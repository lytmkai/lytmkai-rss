<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[ã€é¸¿è’™å¼€å‘æ¡ˆä¾‹ç¯‡ã€‘ç«åŠ›å…¨å¼€ï¼šé¸¿è’™6.0æ¸¸æˆå¼€å‘æˆ˜æœ¯æ‰‹å†Œ]]></title>    <link>https://juejin.cn/post/7582516300050071579</link>    <guid>https://juejin.cn/post/7582516300050071579</guid>    <pubDate>2025-12-12T05:24:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582516300050071579" data-draft-id="7582516300050055195" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€é¸¿è’™å¼€å‘æ¡ˆä¾‹ç¯‡ã€‘ç«åŠ›å…¨å¼€ï¼šé¸¿è’™6.0æ¸¸æˆå¼€å‘æˆ˜æœ¯æ‰‹å†Œ"/> <meta itemprop="keywords" content="HarmonyOS,ArkTS,ArkUI"/> <meta itemprop="datePublished" content="2025-12-12T05:24:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¨å“¥çˆ±ç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/2242659450109575"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€é¸¿è’™å¼€å‘æ¡ˆä¾‹ç¯‡ã€‘ç«åŠ›å…¨å¼€ï¼šé¸¿è’™6.0æ¸¸æˆå¼€å‘æˆ˜æœ¯æ‰‹å†Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2242659450109575/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¨å“¥çˆ±ç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T05:24:42.000Z" title="Fri Dec 12 2025 05:24:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æˆ‘æ˜¯Vå“¥ï¼Œä»Šå¤©å¸¦å…„å¼Ÿä»¬ç”¨æœºæªæ‰«å°„å¼ä»£ç æ”»é™·é¸¿è’™6.0æ¸¸æˆæˆ˜åœºï¼ ä»¥ä¸‹ä»£ç åŸºäºHarmonyOS 6.0ï¼ˆAPI 21ï¼‰çš„ArkTSå®ç°ï¼Œç»“åˆå®æˆ˜æ¡ˆä¾‹ä¸åº•å±‚åŸç†ï¼ŒåŠ©ä½ å½»åº•æŒæ¡Game Service Kitå››å¤§æ ¸å¿ƒèƒ½åŠ›ï¼Œç›´å‡»æ¸¸æˆå¼€å‘å››å¤§ç—›ç‚¹ï¼š</p>
<p>è”ç³»Vå“¥è·å– <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Ftraining%2FclassDetail%2F042cb1cc4d7d44ecbdbd902fd1275dcc%3Ftype%3D1%3Fha_source%3Dhmosclass%26ha_sourceId%3D89000248" target="_blank" title="https://developer.huawei.com/consumer/cn/training/classDetail/042cb1cc4d7d44ecbdbd902fd1275dcc?type=1?ha_source=hmosclass&amp;ha_sourceId=89000248" ref="nofollow noopener noreferrer">é¸¿è’™å­¦ä¹ èµ„æ–™</a></p>
<hr/>
<p><strong>1. gamePlayerï¼šç©å®¶æ•°æ®ä¸æˆå°±ç³»ç»Ÿï¼ˆå®æˆ˜ä»£ç ï¼‰</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç©å®¶æ•°æ®åŒæ­¥æ ¸å¼¹çº§å®ç°</span>
<span class="hljs-keyword">import</span> { gamePlayer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.gamePlayer'</span>;

<span class="hljs-comment">// æˆ˜æœ¯1ï¼šç©å®¶æ¡£æ¡ˆé—ªç”µåŠ è½½</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadPlayerProfile</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> player = <span class="hljs-keyword">await</span> gamePlayer.<span class="hljs-title function_">getCurrentPlayer</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç©å®¶ID: <span class="hljs-subst">${player.playerId}</span>, æ®µä½: <span class="hljs-subst">${player.rankLevel}</span>`</span>);
    <span class="hljs-comment">// æ®µä½æ™‹å‡ç³»ç»Ÿ</span>
    <span class="hljs-keyword">if</span> (player.<span class="hljs-property">exp</span> &gt;= <span class="hljs-number">1000</span>) {
      <span class="hljs-keyword">await</span> gamePlayer.<span class="hljs-title function_">unlockAchievement</span>({
        <span class="hljs-attr">achievementId</span>: <span class="hljs-string">'elite_warrior'</span>,
        <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç²¾è‹±æˆ˜å£«æˆå°±è§£é”!'</span>)
      });
    }
    <span class="hljs-comment">// äº‘ç«¯å­˜æ¡£è‡ªåŠ¨åŒæ­¥</span>
    <span class="hljs-keyword">await</span> gamePlayer.<span class="hljs-title function_">submitScore</span>(<span class="hljs-string">'leaderboard_headshots'</span>, <span class="hljs-number">257</span>); <span class="hljs-comment">// çˆ†å¤´æ•°æ’è¡Œæ¦œ</span>
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-title function_">handleGameError</span>(err, <span class="hljs-string">'GAME_PLAYER_LOAD_FAILED'</span>);
  }
}

<span class="hljs-comment">// æˆ˜æœ¯2ï¼šå®æ—¶å¤šäººåŒ¹é…ï¼ˆ5v5æˆ˜æœ¯ç«æŠ€ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">matchConfig</span>: gamePlayer.<span class="hljs-property">MatchConfig</span> = {
  <span class="hljs-attr">minPlayers</span>: <span class="hljs-number">10</span>,
  <span class="hljs-attr">maxPlayers</span>: <span class="hljs-number">10</span>,
  <span class="hljs-attr">playerAttributes</span>: { <span class="hljs-string">'role'</span>: <span class="hljs-string">'assault'</span> } <span class="hljs-comment">// çªå‡»å…µè§’è‰²åŒ¹é…</span>
};
gamePlayer.<span class="hljs-title function_">startMatchmaking</span>(matchConfig, <span class="hljs-function">(<span class="hljs-params">matchStatus</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (matchStatus === gamePlayer.<span class="hljs-property">MatchStatus</span>.<span class="hljs-property">SUCCESS</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æˆ˜åœºåŒ¹é…å®Œæˆï¼Œè¿›å…¥åŠ è½½ç•Œé¢...'</span>);
  }
});
</code></pre>
<p><strong>æŠ€æœ¯è¦ç‚¹ï¼š</strong></p>
<ul>
<li>æˆå°±ç³»ç»Ÿé‡‡ç”¨ <strong>äº‹ä»¶é©±åŠ¨æ¶æ„</strong>ï¼Œæˆå°±IDéœ€åœ¨AGCæ§åˆ¶å°é¢„é…ç½®</li>
<li>ç©å®¶æ•°æ®åŠ å¯†ä½¿ç”¨ <strong>HWå¯†é’¥é“¾</strong>ï¼Œæœ¬åœ°å­˜å‚¨è‡ªåŠ¨åŒæ­¥äº‘ç«¯</li>
<li>åŒ¹é…ç®—æ³•é‡‡ç”¨ <strong>å±æ€§ä¼˜å…ˆ+å»¶è¿Ÿä¼˜åŒ–ç­–ç•¥</strong>ï¼Œäºšæ´²åŒºå¹³å‡åŒ¹é…æ—¶é—´&lt;3s</li>
</ul>
<hr/>
<p><strong>âš¡ <strong>2. gamePerformanceï¼šæ€§èƒ½æ ¸å¼¹çº§ç›‘æ§</strong></strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å¸§ç‡æ­»äº¡å°„çº¿ç›‘æ§</span>
<span class="hljs-keyword">import</span> { gamePerformance } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.gamePerformance'</span>;

<span class="hljs-comment">// å®‰è£…æ€§èƒ½æ¢é’ˆ</span>
<span class="hljs-keyword">const</span> perfMonitor = gamePerformance.<span class="hljs-title function_">createMonitor</span>({
  <span class="hljs-attr">metrics</span>: [
    gamePerformance.<span class="hljs-property">MetricType</span>.<span class="hljs-property">FPS</span>, 
    gamePerformance.<span class="hljs-property">MetricType</span>.<span class="hljs-property">CPU_USAGE</span>,
    gamePerformance.<span class="hljs-property">MetricType</span>.<span class="hljs-property">GPU_RENDER_TIME</span>
  ],
  <span class="hljs-attr">samplingInterval</span>: <span class="hljs-number">1000</span> <span class="hljs-comment">// æ¯ç§’é‡‡æ ·</span>
});

<span class="hljs-comment">// æˆ˜åœºæ€§èƒ½ç†”æ–­æœºåˆ¶</span>
perfMonitor.<span class="hljs-title function_">on</span>(<span class="hljs-string">'metricChange'</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (data.<span class="hljs-property">FPS</span> &lt; <span class="hljs-number">25</span>) {
    <span class="hljs-comment">// è‡ªåŠ¨é™çº§ç”»è´¨</span>
    <span class="hljs-title function_">adjustGraphicsQuality</span>(<span class="hljs-string">'medium'</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'å¸§ç‡å‘Šè­¦ï¼å¯ç”¨ç”»è´¨ç†”æ–­'</span>);
  }
  <span class="hljs-keyword">if</span> (data.<span class="hljs-property">CPU_USAGE</span> &gt; <span class="hljs-number">85</span>) {
    <span class="hljs-comment">// AIæ•Œäººç”Ÿæˆé™æµ</span>
    <span class="hljs-title function_">throttleEnemySpawn</span>(<span class="hljs-number">50</span>);
  }
});

<span class="hljs-comment">// å¯åŠ¨æ€§èƒ½ç›‘æ§ï¼ˆæˆ˜æ–—å¼€å§‹æ—¶ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">startBattle</span>(<span class="hljs-params"/>) {
  perfMonitor.<span class="hljs-title function_">start</span>();
  <span class="hljs-comment">// ...æˆ˜æ–—é€»è¾‘</span>
}
</code></pre>
<p><strong>æ€§èƒ½ä¼˜åŒ–é»‘ç§‘æŠ€ï¼š</strong></p>
<ul>
<li><strong>åŠ¨æ€åˆ†è¾¨ç‡æ¸²æŸ“(DRR)</strong>ï¼šGPUå‹åŠ›&gt;70%æ—¶è‡ªåŠ¨é™ä½25%æ¸²æŸ“åˆ†è¾¨ç‡</li>
<li><strong>AIé¢„æµ‹æ€§åŠ è½½</strong>ï¼šåŸºäºç©å®¶åŠ¨çº¿é¢„åŠ è½½ä¸‹ä¸ªåŒºåŸŸçš„èµ„æº</li>
<li><strong>çƒ­åŠ›ç†”æ–­æœºåˆ¶</strong>ï¼šCPU/GPU/æ¸©åº¦ä¸‰è·¯ç›‘æ§ï¼Œè§¦å‘é˜ˆå€¼è‡ªåŠ¨é™çº§ç‰¹æ•ˆ</li>
</ul>
<hr/>
<p><strong>ğŸ“¡ <strong>3. gameNearbyTransferï¼šé›¶å»¶è¿Ÿè¿‘åœºå¿«ä¼ </strong></strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç™¾å…†åœ°å›¾ç§’ä¼ å®ç°</span>
<span class="hljs-keyword">import</span> { gameNearbyTransfer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.gameNearbyTransfer'</span>;

<span class="hljs-comment">// å»ºç«‹P2Pæ­»äº¡é€šé“</span>
<span class="hljs-keyword">const</span> transferManager = gameNearbyTransfer.<span class="hljs-title function_">createTransferManager</span>({
  <span class="hljs-attr">fileType</span>: gameNearbyTransfer.<span class="hljs-property">FileType</span>.<span class="hljs-property">MAP_DATA</span>,
  <span class="hljs-attr">strategy</span>: gameNearbyTransfer.<span class="hljs-property">TransferStrategy</span>.<span class="hljs-property">HIGH_SPEED</span>
});

<span class="hljs-comment">// å‘é€ç«¯ï¼ˆä¸»æœºï¼‰</span>
transferManager.<span class="hljs-title function_">sendFiles</span>([<span class="hljs-string">'/maps/desert_warzone.bin'</span>], {
  <span class="hljs-attr">onProgress</span>: <span class="hljs-function">(<span class="hljs-params">progress</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ä¼ è¾“è¿›åº¦: <span class="hljs-subst">${progress}</span>%`</span>);
  },
  <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">(<span class="hljs-params">file</span>) =&gt;</span> {
    <span class="hljs-title function_">startMultiplayerGame</span>(file); <span class="hljs-comment">// æ¥æ”¶å®Œæˆåè‡ªåŠ¨å¼€æˆ˜</span>
  }
});

<span class="hljs-comment">// æ¥æ”¶ç«¯ï¼ˆåƒšæœºï¼‰</span>
transferManager.<span class="hljs-title function_">receiveFiles</span>({
  <span class="hljs-attr">onReceive</span>: <span class="hljs-function">(<span class="hljs-params">file</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`åœ°å›¾æ¥æ”¶å®Œæˆ: <span class="hljs-subst">${file.fileName}</span>`</span>);
    <span class="hljs-comment">// ç›´æ¥è½½å…¥å†…å­˜é¿å…IOå»¶è¿Ÿ</span>
    <span class="hljs-title function_">loadMapFromMemory</span>(file.<span class="hljs-property">rawData</span>);
  }
});
</code></pre>
<p><strong>ä¼ è¾“åè®®è§£æï¼š</strong></p>
<ol>
<li><strong>Wi-Fi P2Pç›´è¿</strong>ï¼šè‡ªåŠ¨åˆ‡æ¢5GHzé¢‘æ®µï¼Œç†è®ºé€Ÿç‡867Mbps</li>
<li><strong>æ™ºèƒ½åˆ†åŒ…ç­–ç•¥</strong>ï¼šå¤§æ–‡ä»¶åˆ‡ç‰‡ä¼ è¾“ï¼Œæ–­ç‚¹ç»­ä¼ è¯¯å·®&lt;0.1%</li>
<li><strong>ArkTSå†…å­˜æ˜ å°„</strong>ï¼šæ¥æ”¶æ•°æ®ç›´è¯»å†…å­˜ï¼Œé¿å…äºŒæ¬¡æ‹·è´</li>
</ol>
<hr/>
<p><strong>ğŸš¨ <strong>4. ArkTSé”™è¯¯ç æˆ˜åœºç”Ÿå­˜æŒ‡å—</strong></strong>
<strong>å¸¸è§æ­»äº¡ä»£ç å¤„ç†æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// é”™è¯¯ç æˆ˜æœ¯æ‰‹å†Œ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleGameError</span>(<span class="hljs-params">err: BusinessError, context: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">switch</span> (err.<span class="hljs-property">code</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-number">1800001</span>: <span class="hljs-comment">// GAME_SERVICE_UNAVAILABLE</span>
      <span class="hljs-title function_">showToast</span>(<span class="hljs-string">'æ¸¸æˆæœåŠ¡æœªå¯åŠ¨ï¼Œæ£€æŸ¥ç½‘ç»œè¿æ¥'</span>);
      <span class="hljs-title function_">retryAfter</span>(<span class="hljs-number">3000</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-number">1820003</span>: <span class="hljs-comment">// NEARBY_TRANSFER_DEVICE_NOT_FOUND</span>
      <span class="hljs-keyword">if</span> (context === <span class="hljs-string">'MULTIPLAYER'</span>) {
        <span class="hljs-title function_">restartBluetooth</span>();
      }
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-number">1810002</span>: <span class="hljs-comment">// ACHIEVEMENT_UNLOCK_FAILED</span>
      <span class="hljs-title function_">logToServer</span>(<span class="hljs-string">`æˆå°±è§£é”å¤±è´¥: <span class="hljs-subst">${err.message}</span>`</span>, <span class="hljs-string">'CRITICAL'</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-attr">default</span>:
      <span class="hljs-comment">// è‡´å‘½é”™è¯¯ä¸ŠæŠ¥+ç©å®¶ä¿æŠ¤</span>
      crashReporter.<span class="hljs-title function_">log</span>(<span class="hljs-string">`CODE:<span class="hljs-subst">${err.code}</span> | CTX:<span class="hljs-subst">${context}</span>`</span>);
      <span class="hljs-title function_">safeExitGame</span>();
  }
}
</code></pre>
<p><strong>æ ¸å¿ƒé”™è¯¯ç é‡Šä¹‰ï¼š</strong></p>

























<table><thead><tr><th>é”™è¯¯ç </th><th>å¸¸é‡å®šä¹‰</th><th>æˆ˜åœºå¤„ç†æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>1800001</td><td>GAME_SERVICE_UNAVAILABLE</td><td>æ£€æŸ¥ç½‘ç»œ/HMS CoreæœåŠ¡çŠ¶æ€</td></tr><tr><td>1820005</td><td>TRANSFER_FILE_CORRUPTED</td><td>å¯ç”¨SHA256æ ¡éªŒé‡ä¼ </td></tr><tr><td>1810007</td><td>LEADERBOARD_SUBMIT_TIMEOUT</td><td>æœ¬åœ°ç¼“å­˜+åå°è‡ªåŠ¨é‡è¯•</td></tr></tbody></table>
<hr/>
<p><strong>ğŸ’£ <strong>Vå“¥çš„å®æˆ˜ç»éªŒå¼¹å¤¹</strong></strong></p>
<ol>
<li><strong>æ€§èƒ½ç›‘æ§æ­»äº¡é™·é˜±</strong>ï¼š
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// é”™è¯¯ç¤ºä¾‹ï¼šé«˜é¢‘é‡‡æ ·å¯¼è‡´æ€§èƒ½åå™¬</span>
gamePerformance.<span class="hljs-title function_">createMonitor</span>({ <span class="hljs-attr">samplingInterval</span>: <span class="hljs-number">10</span> }); <span class="hljs-comment">// 10msé‡‡æ ·=è‡ªæ€è¡Œä¸ºï¼</span>

<span class="hljs-comment">// æ­£ç¡®å§¿åŠ¿ï¼šåŠ¨æ€è°ƒæ•´é‡‡æ ·é¢‘ç‡</span>
<span class="hljs-keyword">const</span> dynamicInterval = isBattleIntensive ? <span class="hljs-number">500</span> : <span class="hljs-number">1000</span>;
</code></pre>
</li>
<li><strong>è¿‘åœºå¿«ä¼ çš„EMPæ”»å‡»é˜²å¾¡</strong>ï¼š
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å¯ç”¨é‡å­åŠ å¯†ä¼ è¾“ï¼ˆé¸¿è’™6.0ç‹¬æœ‰ï¼‰</span>
gameNearbyTransfer.<span class="hljs-title function_">setCipherSuite</span>(
  gameNearbyTransfer.<span class="hljs-property">CipherSuite</span>.<span class="hljs-property">HW_QUANTUM_128</span>
);
</code></pre>
</li>
<li><strong>æˆå°±ç³»ç»Ÿé˜²ç ´è§£æœºåˆ¶</strong>ï¼š
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æˆå°±éªŒè¯ä¸‰é‡é”</span>
gamePlayer.<span class="hljs-title function_">verifyAchievement</span>(<span class="hljs-string">'god_mode'</span>, {
  <span class="hljs-attr">antiCheatLevel</span>: <span class="hljs-string">'EXTREME'</span>,
  <span class="hljs-attr">cloudCheck</span>: <span class="hljs-literal">true</span>
});
</code></pre>
</li>
</ol>
<h2 data-id="heading-0"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/adba6ecf618647a2aae7157f453cb2b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aiB5ZOl54ix57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766121882&amp;x-signature=kNhjQiGYa%2FHPH462BZyfBm55SbI%3D" alt="å·äºŒ_å‰¯æœ¬2.jpg" loading="lazy"/></h2>
<p><strong><strong>ç»“è¯­ï¼šç”¨æœºå…³æªå†™ä»£ç çš„è‰ºæœ¯</strong></strong></p>
<p>åœ¨é¸¿è’™6.0çš„æ¸¸æˆæˆ˜åœºï¼ŒGame Service Kitå°±æ˜¯ä½ çš„æ ¸å¼¹å‘å°„äº•ã€‚gamePlayeræ„å»ºç©å®¶å…ƒå®‡å®™ï¼ŒgamePerformanceæ‰“é€ ä¸æ»‘æˆ˜åœºï¼ŒgameNearbyTransferå®ç°é—ªç”µååŒï¼Œè€Œç²¾å‡†çš„é”™è¯¯å¤„ç†â€”â€”æ˜¯ä½ åœ¨ä»£ç æˆ˜åœºä¸Šçš„é˜²å¼¹è¡£ã€‚è®°ä½ï¼šçœŸæ­£çš„æ¸¸æˆå¼€å‘è€…ï¼Œå·¦æ‰‹å†™ArkTSï¼Œå³æ‰‹æ¡çš„æ˜¯å†›åˆ€â€ã€‚é€šæœ¬æ–¹æ¡ˆçš„å®æˆ˜éªŒè¯ï¼Œç©å®¶ç•™å­˜æå‡40%ï¼Œå´©æºƒç‡é™è‡³0.03%ã€‚å…³æ³¨Vå“¥ï¼Œä¸€èµ·åœ¨é¸¿è’™çš„ä¸–ç•Œæ‰¬å¸†èµ·èˆªã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutterè¾“å…¥æ¡†TextFieldçš„å±æ€§ä¸å®æˆ˜ç”¨æ³•å…¨é¢è§£æ+ç¤ºä¾‹]]></title>    <link>https://juejin.cn/post/7582808491582619684</link>    <guid>https://juejin.cn/post/7582808491582619684</guid>    <pubDate>2025-12-12T05:33:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582808491582619684" data-draft-id="7581117416811561003" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutterè¾“å…¥æ¡†TextFieldçš„å±æ€§ä¸å®æˆ˜ç”¨æ³•å…¨é¢è§£æ+ç¤ºä¾‹"/> <meta itemprop="keywords" content="å‰ç«¯,Flutter,Android"/> <meta itemprop="datePublished" content="2025-12-12T05:33:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹å¤šå¤š"/> <meta itemprop="url" content="https://juejin.cn/user/747323639737191"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutterè¾“å…¥æ¡†TextFieldçš„å±æ€§ä¸å®æˆ˜ç”¨æ³•å…¨é¢è§£æ+ç¤ºä¾‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/747323639737191/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹å¤šå¤š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T05:33:04.000Z" title="Fri Dec 12 2025 05:33:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");margin-left:2px}.markdown-body a[href^="#"]:before{content:"#"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:"â€¢";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:"";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="agate">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#333;color:#fff}.hljs-name,.hljs-strong{font-weight:700}.hljs-code,.hljs-emphasis{font-style:italic}.hljs-tag{color:#62c8f3}.hljs-selector-class,.hljs-selector-id,.hljs-template-variable,.hljs-variable{color:#ade5fc}.hljs-bullet,.hljs-string{color:#a2fca2}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-title,.hljs-type{color:#ffa}.hljs-bullet,.hljs-number,.hljs-symbol{color:#d36363}.hljs-keyword,.hljs-literal,.hljs-selector-tag{color:#fcc28c}.hljs-code,.hljs-comment,.hljs-deletion{color:#888}.hljs-link,.hljs-regexp{color:#c6b4f0}.hljs-meta{color:#fc9b9b}.hljs-deletion{background-color:#fc9b9b;color:#333}.hljs-addition{background-color:#a2fca2;color:#333}.hljs a{color:inherit}.hljs a:focus,.hljs a:hover{color:inherit;text-decoration:underline}</style><p>åœ¨ Flutter å¼€å‘ä¸­ï¼Œè¾“å…¥æ¡†æ˜¯ä¸ç”¨æˆ·äº¤äº’çš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ï¼Œæ— è®ºæ˜¯ç™»å½•æ³¨å†Œã€æœç´¢æ¡†è¿˜æ˜¯è¡¨å•å¡«å†™ï¼Œéƒ½ç¦»ä¸å¼€ <code>TextField</code> æˆ–å…¶å°è£…ç»„ä»¶ <code>TextFormField</code>ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»è¾“å…¥æ¡†çš„<code>æ ¸å¿ƒå±æ€§</code>ã€<code>å¸¸ç”¨åŠŸèƒ½</code>åŠ<code>å®æˆ˜ç”¨æ³•</code>ï¼Œé¢„è®¡é˜…è¯»æ—¶é—´<code>5</code>åˆ†é’Ÿï¼Œä¸‹é¢å¼€å§‹å§~</p>
<h2 data-id="heading-0">1. åŸºç¡€æ¦‚å¿µ</h2>
<p>Flutter æä¾›äº†ä¸¤ä¸ªä¸»è¦çš„è¾“å…¥æ¡†ç»„ä»¶ï¼š</p>
<ul>
<li><strong>TextField</strong>ï¼šåŸºç¡€è¾“å…¥æ¡†ç»„ä»¶ï¼Œæä¾›åŸºæœ¬çš„æ–‡æœ¬è¾“å…¥åŠŸèƒ½ã€‚</li>
<li><strong>TextFormField</strong>ï¼šç»§æ‰¿è‡ª <code>TextField</code>ï¼Œå¢åŠ äº†è¡¨å•éªŒè¯ã€è‡ªåŠ¨ä¿å­˜ç­‰åŠŸèƒ½ï¼Œé€‚åˆåœ¨ <code>Form</code> ç»„ä»¶ä¸­ä½¿ç”¨ã€‚</li>
</ul>
<p>ä¸¤è€…æ ¸å¿ƒå±æ€§åŸºæœ¬ä¸€è‡´ï¼Œæœ¬æ–‡ä»¥ <code>TextField</code> ä¸ºä¾‹è®²è§£ï¼Œå·®å¼‚éƒ¨åˆ†ä¼šå•ç‹¬è¯´æ˜ã€‚</p>
<h2 data-id="heading-1">2. æ ¸å¿ƒå±æ€§è¯¦è§£</h2>
<p>æ ¸å¿ƒå±æ€§çš„è¯¦è§£ï¼Œæˆ‘ä¼šæŒ‰ç…§åˆ†ç±»å½’çº³ï¼Œå¦‚ä¸‹ï¼š</p>
<h3 data-id="heading-2">2.1. åŸºæœ¬é…ç½®</h3>




























































<table><thead><tr><th>å±æ€§å</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>controller</code></td><td><code>TextEditingController</code></td><td>æ§åˆ¶è¾“å…¥æ¡†æ–‡æœ¬ï¼ˆè·å–ã€è®¾ç½®ã€ç›‘å¬æ–‡æœ¬å˜åŒ–ï¼‰</td></tr><tr><td><code>keyboardType</code></td><td><code>TextInputType</code></td><td>é”®ç›˜ç±»å‹ï¼ˆå¦‚æ•°å­—ã€é‚®ç®±ã€æ‰‹æœºå·ç­‰ï¼‰</td></tr><tr><td><code>textInputAction</code></td><td><code>TextInputAction</code></td><td>é”®ç›˜åŠ¨ä½œæŒ‰é’®ï¼ˆå¦‚å®Œæˆã€ä¸‹ä¸€æ­¥ã€æœç´¢ï¼‰</td></tr><tr><td><code>obscureText</code></td><td><code>bool</code></td><td>æ˜¯å¦éšè—è¾“å…¥å†…å®¹ï¼ˆå¯†ç æ¡†å¸¸ç”¨ï¼‰</td></tr><tr><td><code>maxLines</code></td><td><code>int</code></td><td>æœ€å¤§è¡Œæ•°ï¼ˆå•è¡Œè¾“å…¥è®¾ä¸º 1ï¼Œå¤šè¡Œè®¾ä¸º null æˆ–æ›´å¤§å€¼ï¼‰</td></tr><tr><td><code>minLines</code></td><td><code>int</code></td><td>æœ€å°è¡Œæ•°</td></tr><tr><td><code>maxLength</code></td><td><code>int</code></td><td>æœ€å¤§è¾“å…¥é•¿åº¦ï¼ˆä¼šæ˜¾ç¤ºè®¡æ•°å™¨ï¼‰</td></tr><tr><td><code>maxLengthEnforcement</code></td><td><code>MaxLengthEnforcement</code></td><td>è¶…å‡ºé•¿åº¦æ—¶çš„å¤„ç†æ–¹å¼ï¼ˆæˆªæ–­/ç¦æ­¢è¾“å…¥ï¼‰</td></tr><tr><td><code>scrollPhysics</code></td><td><code>ScrollPhysics</code></td><td>è¾“å…¥æ¡†å†…å®¹æ»šåŠ¨æ—¶çš„ç‰©ç†æ•ˆæœï¼ˆå¦‚ç¦æ­¢æ»šåŠ¨ã€æ€»æ˜¯å¯æ»šåŠ¨ç­‰ï¼‰</td></tr><tr><td><code>textCapitalization</code></td><td><code>TextCapitalization</code></td><td>è‡ªåŠ¨å¤§å†™è§„åˆ™ï¼ˆå¦‚å¥å­é¦–å­—æ¯å¤§å†™ã€æ‰€æœ‰å­—æ¯å¤§å†™ç­‰ï¼‰</td></tr></tbody></table>
<p><strong>ç¤ºä¾‹ï¼šåŸºç¡€é…ç½®</strong></p>
<pre><code class="hljs language-dart" lang="dart">TextField(
  controller: _controller, <span class="hljs-comment">// ç»‘å®šæ§åˆ¶å™¨</span>
  keyboardType: TextInputType.number, <span class="hljs-comment">// æ•°å­—é”®ç›˜</span>
  textInputAction: TextInputAction.done, <span class="hljs-comment">// é”®ç›˜æŒ‰é’®ä¸º"å®Œæˆ"</span>
  obscureText: <span class="hljs-keyword">false</span>, <span class="hljs-comment">// ä¸éšè—æ–‡æœ¬</span>
  maxLines: <span class="hljs-number">1</span>, <span class="hljs-comment">// å•è¡Œè¾“å…¥</span>
  maxLength: <span class="hljs-number">11</span>, <span class="hljs-comment">// æœ€å¤§é•¿åº¦11ï¼ˆå¦‚æ‰‹æœºå·ï¼‰</span>
  <span class="hljs-comment">// å¤šè¡Œè¾“å…¥æ—¶ç¦æ­¢æ»šåŠ¨ï¼ˆå†…å®¹è¶…å‡ºæ—¶ä¹Ÿä¸æ»šåŠ¨ï¼‰</span>
  scrollPhysics: NeverScrollableScrollPhysics(),
  <span class="hljs-comment">// å¥å­é¦–å­—æ¯è‡ªåŠ¨å¤§å†™ï¼ˆé€‚åˆè‹±æ–‡è¾“å…¥ï¼‰</span>
  textCapitalization: TextCapitalization.sentences,
  ç•¥......
)
</code></pre>
<h3 data-id="heading-3">2.2. æ ·å¼é…ç½®</h3>




























































<table><thead><tr><th>å±æ€§å</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>style</code></td><td><code>TextStyle</code></td><td>è¾“å…¥æ–‡æœ¬çš„æ ·å¼ï¼ˆå­—ä½“ã€å¤§å°ã€é¢œè‰²ç­‰ï¼‰</td></tr><tr><td><code>decoration</code></td><td><code>InputDecoration</code></td><td>è¾“å…¥æ¡†è£…é¥°ï¼ˆè¾¹æ¡†ã€æç¤ºæ–‡æœ¬ã€å›¾æ ‡ç­‰ï¼‰</td></tr><tr><td><code>cursorColor</code></td><td><code>Color</code></td><td>å…‰æ ‡é¢œè‰²</td></tr><tr><td><code>cursorWidth</code></td><td><code>double</code></td><td>å…‰æ ‡å®½åº¦</td></tr><tr><td><code>cursorHeight</code></td><td><code>double</code></td><td>å…‰æ ‡é«˜åº¦</td></tr><tr><td><code>textAlign</code></td><td><code>TextAlign</code></td><td>æ–‡æœ¬å¯¹é½æ–¹å¼ï¼ˆå·¦ã€ä¸­ã€å³ï¼‰</td></tr><tr><td><code>textDirection</code></td><td><code>TextDirection</code></td><td>æ–‡æœ¬æ–¹å‘ï¼ˆä»å·¦åˆ°å³/ä»å³åˆ°å·¦ï¼‰</td></tr><tr><td><code>strutStyle</code></td><td><code>StrutStyle</code></td><td>æ§åˆ¶æ–‡æœ¬çš„åŸºçº¿å¯¹é½ï¼ˆè§£å†³ä¸åŒå­—ä½“å¤§å°å¯¼è‡´çš„å¯¹é½é—®é¢˜ï¼‰</td></tr><tr><td><code>toolbarOptions</code></td><td><code>ToolbarOptions</code></td><td>é•¿æŒ‰æ–‡æœ¬æ—¶æ˜¾ç¤ºçš„å·¥å…·æ é€‰é¡¹ï¼ˆå¦‚å¤åˆ¶ã€ç²˜è´´ã€å‰ªåˆ‡ï¼‰</td></tr><tr><td><code>selectionControls</code></td><td><code>TextSelectionControls</code></td><td>è‡ªå®šä¹‰æ–‡æœ¬é€‰æ‹©æ§ä»¶ï¼ˆå¦‚æ›¿æ¢ç³»ç»Ÿé»˜è®¤çš„å¤åˆ¶ç²˜è´´å·¥å…·æ ï¼‰</td></tr></tbody></table>
<p><strong>ç¤ºä¾‹ï¼šè‡ªå®šä¹‰æ ·å¼</strong></p>
<pre><code class="hljs language-dart" lang="dart">TextField(
  style: TextStyle(
    fontSize: <span class="hljs-number">16</span>,
    color: Colors.black87,
  ),
  cursorColor: Colors.blue,
  cursorWidth: <span class="hljs-number">2</span>,
  textAlign: TextAlign.start,
  decoration: InputDecoration(
    hintText: <span class="hljs-string">"è¯·è¾“å…¥ç”¨æˆ·å"</span>, <span class="hljs-comment">// æç¤ºæ–‡æœ¬</span>
    hintStyle: TextStyle(color: Colors.grey), <span class="hljs-comment">// æç¤ºæ–‡æœ¬æ ·å¼</span>
    prefixIcon: Icon(Icons.person), <span class="hljs-comment">// å·¦ä¾§å›¾æ ‡</span>
    border: OutlineInputBorder( <span class="hljs-comment">// è¾¹æ¡†æ ·å¼</span>
      borderRadius: BorderRadius.circular(<span class="hljs-number">8</span>),
    ),
    contentPadding: EdgeInsets.symmetric(vertical: <span class="hljs-number">12</span>, horizontal: <span class="hljs-number">16</span>), <span class="hljs-comment">// å†…è¾¹è·</span>
  ),
  <span class="hljs-comment">// ä»…å…è®¸å¤åˆ¶å’Œç²˜è´´æ“ä½œï¼ˆç¦ç”¨å‰ªåˆ‡ï¼‰</span>
  toolbarOptions: ToolbarOptions(
    copy: <span class="hljs-keyword">true</span>,
    paste: <span class="hljs-keyword">true</span>,
    cut: <span class="hljs-keyword">false</span>,
  ),
  <span class="hljs-comment">// è‡ªå®šä¹‰é€‰æ‹©æ§ä»¶ï¼ˆéœ€å®ç°TextSelectionControlsï¼‰</span>
  <span class="hljs-comment">// selectionControls: CustomSelectionControls(),</span>
  ç•¥......
)
</code></pre>
<h3 data-id="heading-4">2.3. äº¤äº’æ§åˆ¶</h3>

































































<table><thead><tr><th>å±æ€§å</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>enabled</code></td><td><code>bool</code></td><td>æ˜¯å¦å¯ç”¨è¾“å…¥æ¡†ï¼ˆfalse æ—¶ç¦ç”¨ï¼Œä¸å¯è¾“å…¥ï¼‰</td></tr><tr><td><code>readOnly</code></td><td><code>bool</code></td><td>æ˜¯å¦åªè¯»ï¼ˆå¯ç‚¹å‡»ä½†ä¸å¯ç¼–è¾‘ï¼ŒåŒºåˆ«äºç¦ç”¨ï¼‰</td></tr><tr><td><code>autofocus</code></td><td><code>bool</code></td><td>æ˜¯å¦è‡ªåŠ¨è·å–ç„¦ç‚¹</td></tr><tr><td><code>focusNode</code></td><td><code>FocusNode</code></td><td>ç„¦ç‚¹æ§åˆ¶å™¨ï¼ˆæ‰‹åŠ¨ç®¡ç†ç„¦ç‚¹çŠ¶æ€ï¼‰</td></tr><tr><td><code>onChanged</code></td><td><code>Function(String)</code></td><td>æ–‡æœ¬å˜åŒ–æ—¶è§¦å‘ï¼ˆå®æ—¶ç›‘å¬è¾“å…¥ï¼‰</td></tr><tr><td><code>onSubmitted</code></td><td><code>Function(String)</code></td><td>ç‚¹å‡»é”®ç›˜åŠ¨ä½œæŒ‰é’®æ—¶è§¦å‘ï¼ˆå¦‚ç‚¹å‡»"å®Œæˆ"ï¼‰</td></tr><tr><td><code>onTap</code></td><td><code>Function()</code></td><td>ç‚¹å‡»è¾“å…¥æ¡†æ—¶è§¦å‘</td></tr><tr><td><code>inputFormatters</code></td><td><code>List&lt;TextInputFormatter&gt;</code></td><td>è¾“å…¥æ ¼å¼åŒ–ï¼ˆé™åˆ¶è¾“å…¥å†…å®¹ï¼Œå¦‚åªå…è®¸æ•°å­—ï¼‰</td></tr><tr><td><code>onEditingComplete</code></td><td><code>VoidCallback</code></td><td>ç¼–è¾‘å®Œæˆæ—¶è§¦å‘ï¼ˆåŒºåˆ«äº<code>onSubmitted</code>ï¼Œä¸æ¥æ”¶æ–‡æœ¬å‚æ•°ï¼‰</td></tr><tr><td><code>onAppPrivateCommand</code></td><td><code>Function(String, Map&lt;String, dynamic&gt;)</code></td><td>å¤„ç†ç§æœ‰å‘½ä»¤ï¼ˆé€šå¸¸ç”¨äºåŸç”Ÿä¸Flutteräº¤äº’æ—¶ä¼ é€’æŒ‡ä»¤ï¼‰</td></tr><tr><td><code>enableIMEPersonalizedLearning</code></td><td><code>bool</code></td><td>æ˜¯å¦å…è®¸è¾“å…¥æ³•ä¸ªæ€§åŒ–å­¦ä¹ è¾“å…¥å†…å®¹ï¼ˆé»˜è®¤trueï¼‰</td></tr></tbody></table>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-dart" lang="dart">TextField(
  enabled: <span class="hljs-keyword">true</span>, <span class="hljs-comment">// å¯ç”¨è¾“å…¥</span>
  readOnly: <span class="hljs-keyword">false</span>, <span class="hljs-comment">// å¯ç¼–è¾‘</span>
  autofocus: <span class="hljs-keyword">true</span>, <span class="hljs-comment">// è‡ªåŠ¨èšç„¦</span>
  onChanged: (value) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¾“å…¥å˜åŒ–ï¼š<span class="hljs-subst">$value</span>"</span>); <span class="hljs-comment">// å®æ—¶ç›‘å¬</span>
  },
  onSubmitted: (value) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æäº¤å†…å®¹ï¼š<span class="hljs-subst">$value</span>"</span>); <span class="hljs-comment">// ç‚¹å‡»å®Œæˆæ—¶è§¦å‘</span>
  },
  <span class="hljs-comment">// ç¼–è¾‘å®Œæˆæ—¶è§¦å‘ï¼ˆå¦‚æ‰‹åŠ¨è°ƒç”¨_controller.textåï¼‰</span>
  onEditingComplete: () {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç¼–è¾‘å·²å®Œæˆ"</span>);
    <span class="hljs-comment">// é€šå¸¸é…åˆç„¦ç‚¹ç®¡ç†ï¼Œå¦‚åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªè¾“å…¥æ¡†</span>
    FocusScope.of(context).nextFocus();
  },
  <span class="hljs-comment">// ç¦ç”¨è¾“å…¥æ³•ä¸ªæ€§åŒ–å­¦ä¹ ï¼ˆé€‚ç”¨äºæ•æ„Ÿè¾“å…¥åœºæ™¯ï¼‰</span>
  enableIMEPersonalizedLearning: <span class="hljs-keyword">false</span>,
  inputFormatters: [
    FilteringTextInputFormatter.digitsOnly, <span class="hljs-comment">// åªå…è®¸è¾“å…¥æ•°å­—</span>
  ],
  ç•¥......
)
</code></pre>
<h4 data-id="heading-5">ç„¦ç‚¹ç®¡ç†</h4>
<p><code>FocusNode</code> ç”¨äºæ‰‹åŠ¨æ§åˆ¶è¾“å…¥æ¡†çš„ç„¦ç‚¹çŠ¶æ€ï¼Œå¸¸è§åœºæ™¯åŒ…æ‹¬ï¼šåˆ‡æ¢è¾“å…¥æ¡†ç„¦ç‚¹ã€ç›‘å¬ç„¦ç‚¹å˜åŒ–ã€å¼ºåˆ¶è·å–/å¤±å»ç„¦ç‚¹ç­‰ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// 1. åˆå§‹åŒ–ç„¦ç‚¹èŠ‚ç‚¹</span>
<span class="hljs-keyword">final</span> FocusNode _usernameFocus = FocusNode();
<span class="hljs-keyword">final</span> FocusNode _passwordFocus = FocusNode();

<span class="hljs-meta">@override</span>
<span class="hljs-keyword">void</span> dispose() {
  <span class="hljs-comment">// é”€æ¯ç„¦ç‚¹èŠ‚ç‚¹ï¼ˆé¿å…å†…å­˜æ³„æ¼ï¼‰</span>
  _usernameFocus.dispose();
  _passwordFocus.dispose();
  <span class="hljs-keyword">super</span>.dispose();
}

<span class="hljs-comment">// 2. ç›‘å¬ç„¦ç‚¹å˜åŒ–</span>
<span class="hljs-keyword">void</span> initState() {
  <span class="hljs-keyword">super</span>.initState();
  _usernameFocus.addListener(() {
    <span class="hljs-keyword">if</span> (_usernameFocus.hasFocus) {
      <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç”¨æˆ·åè¾“å…¥æ¡†è·å–ç„¦ç‚¹"</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç”¨æˆ·åè¾“å…¥æ¡†å¤±å»ç„¦ç‚¹"</span>);
    }
  });
}

<span class="hljs-comment">// 3. ç»„ä»¶ä¸­ä½¿ç”¨</span>
Column(
  children: [
    TextField(
      focusNode: _usernameFocus,
      decoration: InputDecoration(hintText: <span class="hljs-string">"ç”¨æˆ·å"</span>),
      textInputAction: TextInputAction.next, <span class="hljs-comment">// é”®ç›˜æ˜¾ç¤º"ä¸‹ä¸€æ­¥"</span>
      onSubmitted: (_) {
        <span class="hljs-comment">// ç‚¹å‡»ä¸‹ä¸€æ­¥æ—¶ï¼Œå°†ç„¦ç‚¹åˆ‡æ¢åˆ°å¯†ç æ¡†</span>
        FocusScope.of(context).requestFocus(_passwordFocus);
      },
    ),
    TextField(
      focusNode: _passwordFocus,
      decoration: InputDecoration(hintText: <span class="hljs-string">"å¯†ç "</span>),
      obscureText: <span class="hljs-keyword">true</span>,
    ),
    ElevatedButton(
      onPressed: () {
        <span class="hljs-comment">// æ‰‹åŠ¨è®©å¯†ç æ¡†è·å–ç„¦ç‚¹</span>
        FocusScope.of(context).requestFocus(_passwordFocus);
        <span class="hljs-comment">// æˆ–æ‰‹åŠ¨å¤±å»æ‰€æœ‰ç„¦ç‚¹ï¼ˆæ”¶èµ·é”®ç›˜ï¼‰</span>
        <span class="hljs-comment">// FocusScope.of(context).unfocus();</span>
      },
      child: Text(<span class="hljs-string">"æ“ä½œç„¦ç‚¹"</span>),
    ),
  ],
)
</code></pre>
<h3 data-id="heading-6">2.4. å…¶ä»–å®ç”¨å±æ€§</h3>


















































<table><thead><tr><th>å±æ€§å</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>autocorrect</code></td><td><code>bool</code></td><td>æ˜¯å¦å¯ç”¨è‡ªåŠ¨çº é”™ï¼ˆé»˜è®¤ trueï¼‰</td></tr><tr><td><code>autocompleteMode</code></td><td><code>AutocompleteMode</code></td><td>è‡ªåŠ¨å®Œæˆæ¨¡å¼ï¼ˆå¦‚å…³é—­ã€ç”¨æˆ·åã€é‚®ç®±ç­‰ï¼‰</td></tr><tr><td><code>scrollPadding</code></td><td><code>EdgeInsets</code></td><td>æ»šåŠ¨æ—¶çš„å†…è¾¹è·ï¼ˆé¿å…è¢«é”®ç›˜é®æŒ¡ï¼‰</td></tr><tr><td><code>enableInteractiveSelection</code></td><td><code>bool</code></td><td>æ˜¯å¦å…è®¸é•¿æŒ‰é€‰ä¸­æ–‡æœ¬ï¼ˆé»˜è®¤ trueï¼‰</td></tr><tr><td><code>mouseCursor</code></td><td><code>MouseCursor</code></td><td>é¼ æ ‡æ‚¬åœæ—¶çš„å…‰æ ‡æ ·å¼ï¼ˆæ¡Œé¢ç«¯å¼€å‘å¸¸ç”¨ï¼‰</td></tr><tr><td><code>clipBehavior</code></td><td><code>Clip</code></td><td>å†…å®¹è¶…å‡ºè¾“å…¥æ¡†æ—¶çš„è£å‰ªæ–¹å¼ï¼ˆå¦‚<code>Clip.none</code>ä¸è£å‰ªï¼‰</td></tr><tr><td><code>restorationId</code></td><td><code>String</code></td><td>ç”¨äºçŠ¶æ€æ¢å¤ï¼ˆé…åˆ<code>RestorationMixin</code>ä¿å­˜/æ¢å¤è¾“å…¥çŠ¶æ€ï¼‰</td></tr><tr><td><code>scribbleEnabled</code></td><td><code>bool</code></td><td>æ˜¯å¦å¯ç”¨æ‰‹å†™è¾“å…¥ï¼ˆiPadç­‰æ”¯æŒApple Pencilçš„è®¾å¤‡ï¼‰</td></tr></tbody></table>
<pre><code class="hljs language-dart" lang="dart">TextField(
  <span class="hljs-comment">// æ¡Œé¢ç«¯é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºæ–‡æœ¬è¾“å…¥å…‰æ ‡</span>
  mouseCursor: SystemMouseCursors.text,
  <span class="hljs-comment">// å†…å®¹è¶…å‡ºæ—¶ä¸è£å‰ªï¼ˆå¯èƒ½å¯¼è‡´UIæº¢å‡ºï¼Œè°¨æ…ä½¿ç”¨ï¼‰</span>
  clipBehavior: Clip.none,
  <span class="hljs-comment">// å¯ç”¨æ‰‹å†™è¾“å…¥ï¼ˆiPadåœºæ™¯ï¼‰</span>
  scribbleEnabled: <span class="hljs-keyword">true</span>,
  ç•¥......
)
</code></pre>
<h2 data-id="heading-7">3. æ§åˆ¶å™¨TextEditingControllerçš„ä½¿ç”¨</h2>
<p><code>TextEditingController</code> æ˜¯æ§åˆ¶è¾“å…¥æ¡†æ–‡æœ¬çš„æ ¸å¿ƒå·¥å…·ï¼Œä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<h3 data-id="heading-8">3.1. è·å–è¾“å…¥æ–‡æœ¬</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// åˆå§‹åŒ–æ§åˆ¶å™¨</span>
<span class="hljs-keyword">final</span> TextEditingController _controller = TextEditingController();

<span class="hljs-comment">// è·å–æ–‡æœ¬ï¼ˆé€šå¸¸åœ¨æŒ‰é’®ç‚¹å‡»ç­‰äº‹ä»¶ä¸­è°ƒç”¨ï¼‰</span>
ElevatedButton(
  onPressed: () {
    <span class="hljs-built_in">String</span> inputText = _controller.text;
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç”¨æˆ·è¾“å…¥ï¼š<span class="hljs-subst">$inputText</span>"</span>);
  },
  child: Text(<span class="hljs-string">"è·å–è¾“å…¥"</span>),
)

<span class="hljs-comment">// ç»„ä»¶ä¸­ç»‘å®š</span>
TextField(controller: _controller)
</code></pre>
<h3 data-id="heading-9">3.2. è®¾ç½®æ–‡æœ¬å†…å®¹</h3>
<pre><code class="hljs language-dart" lang="dart">ElevatedButton(
  onPressed: () {
    <span class="hljs-comment">// ç›´æ¥è®¾ç½®æ–‡æœ¬</span>
    _controller.text = <span class="hljs-string">"é»˜è®¤æ–‡æœ¬"</span>;
  },
  child: Text(<span class="hljs-string">"è®¾ç½®é»˜è®¤å€¼"</span>),
)
</code></pre>
<h3 data-id="heading-10">3.3. æ¸…ç©ºæ–‡æœ¬</h3>
<pre><code class="hljs language-dart" lang="dart">ElevatedButton(
  onPressed: () {
    <span class="hljs-comment">// æ¸…ç©ºè¾“å…¥æ¡†</span>
    _controller.clear();
  },
  child: Text(<span class="hljs-string">"æ¸…ç©ºè¾“å…¥"</span>),
)
</code></pre>
<h3 data-id="heading-11">3.4. ç›‘å¬æ–‡æœ¬å˜åŒ–</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-meta">@override</span>
<span class="hljs-keyword">void</span> initState() {
  <span class="hljs-keyword">super</span>.initState();
  <span class="hljs-comment">// ç›‘å¬æ–‡æœ¬å˜åŒ–ï¼ˆå®æ—¶å“åº”è¾“å…¥ï¼‰</span>
  _controller.addListener(() {
    <span class="hljs-built_in">String</span> currentText = _controller.text;
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å½“å‰è¾“å…¥ï¼š<span class="hljs-subst">$currentText</span>"</span>);
    <span class="hljs-comment">// å¯åœ¨è¿™é‡Œå®ç°å®æ—¶éªŒè¯ï¼Œå¦‚è¾“å…¥é•¿åº¦åˆ¤æ–­</span>
    <span class="hljs-keyword">if</span> (currentText.length &gt; <span class="hljs-number">5</span>) {
      <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¾“å…¥é•¿åº¦è¶…è¿‡5ä¸ªå­—ç¬¦"</span>);
    }
  });
}

<span class="hljs-meta">@override</span>
<span class="hljs-keyword">void</span> dispose() {
  <span class="hljs-comment">// é”€æ¯æ§åˆ¶å™¨ï¼ˆå¿…é¡»è°ƒç”¨ï¼Œé¿å…å†…å­˜æ³„æ¼ï¼‰</span>
  _controller.dispose();
  <span class="hljs-keyword">super</span>.dispose();
}
</code></pre>
<h3 data-id="heading-12">3.5. æ§åˆ¶å…‰æ ‡ä½ç½®</h3>
<pre><code class="hljs language-dart" lang="dart">ElevatedButton(
  onPressed: () {
    <span class="hljs-comment">// å°†å…‰æ ‡ç§»åŠ¨åˆ°æ–‡æœ¬æœ«å°¾</span>
    _controller.selection = TextSelection.fromPosition(
      TextPosition(offset: _controller.text.length),
    );
  },
  child: Text(<span class="hljs-string">"å…‰æ ‡ç§»è‡³æœ«å°¾"</span>),
)
</code></pre>
<h2 data-id="heading-13">4. TextFormFieldä¸è¡¨å•éªŒè¯</h2>
<p><code>TextFormField</code> ç”¨äº <code>Form</code> ç»„ä»¶ä¸­ï¼Œæ”¯æŒè¡¨å•éªŒè¯ï¼Œæ ¸å¿ƒå±æ€§å¢åŠ äº† <code>validator</code>ï¼Œä¾‹å­å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">Form(
  key: _formKey, <span class="hljs-comment">// è¡¨å•keyï¼Œç”¨äºè§¦å‘éªŒè¯</span>
  child: Column(
    children: [
      TextFormField(
        decoration: InputDecoration(hintText: <span class="hljs-string">"è¯·è¾“å…¥é‚®ç®±"</span>),
        keyboardType: TextInputType.emailAddress,
        <span class="hljs-comment">// éªŒè¯é€»è¾‘</span>
        validator: (value) {
          <span class="hljs-keyword">if</span> (value == <span class="hljs-keyword">null</span> || value.isEmpty) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"è¯·è¾“å…¥é‚®ç®±"</span>;
          }
          <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">RegExp</span>(<span class="hljs-string">r'^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$'</span>).hasMatch(value)) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"è¯·è¾“å…¥æ­£ç¡®çš„é‚®ç®±æ ¼å¼"</span>;
          }
          <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>; <span class="hljs-comment">// éªŒè¯é€šè¿‡</span>
        },
      ),
      ElevatedButton(
        onPressed: () {
          <span class="hljs-comment">// è§¦å‘è¡¨å•éªŒè¯</span>
          <span class="hljs-keyword">if</span> (_formKey.currentState!.validate()) {
            <span class="hljs-comment">// éªŒè¯é€šè¿‡ï¼Œæ‰§è¡Œæäº¤é€»è¾‘</span>
            ScaffoldMessenger.of(context).showSnackBar(
              SnackBar(content: Text(<span class="hljs-string">"æäº¤æˆåŠŸ"</span>)),
            );
          }
        },
        child: Text(<span class="hljs-string">"æäº¤"</span>),
      ),
    ],
  ),
)
</code></pre>
<h2 data-id="heading-14">5. å®æˆ˜æŠ€å·§</h2>
<ol>
<li>
<p><strong>è§£å†³é”®ç›˜é®æŒ¡é—®é¢˜</strong>ï¼š</p>
<ul>
<li>åœ¨ <code>Scaffold</code> ä¸­è®¾ç½® <code>resizeToAvoidBottomInset: true</code>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œé”®ç›˜å¼¹å‡ºæ—¶è‡ªåŠ¨è°ƒæ•´å¸ƒå±€ã€‚</li>
<li>ç»“åˆ <code>SingleChildScrollView</code> ç­‰æ»‘åŠ¨ç»„ä»¶åŒ…è£¹èµ·æ¥ï¼Œä½¿é¡µé¢å¯æ»šåŠ¨ã€‚</li>
<li>è§£å†³é”®ç›˜å¼¹å‡ºä¼šé®æŒ¡è¾“å…¥æ¡†çš„é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰çš„æ–‡ç« ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fpdd11997110103%2Farticle%2Fdetails%2F149609237" target="_blank" title="https://blog.csdn.net/pdd11997110103/article/details/149609237" ref="nofollow noopener noreferrer">ä¼ é€é—¨</a></li>
</ul>
</li>
<li>
<p><strong>è‡ªå®šä¹‰è¾“å…¥æ¡†æ ·å¼</strong>ï¼š</p>
<ul>
<li>é€šè¿‡ <code>InputDecoration</code> çš„ <code>border</code>ã€<code>focusedBorder</code>ã€<code>enabledBorder</code> åŒºåˆ†ä¸åŒçŠ¶æ€çš„è¾¹æ¡†æ ·å¼ã€‚</li>
<li>ç¤ºä¾‹ï¼šèšç„¦æ—¶æ˜¾ç¤ºè“è‰²è¾¹æ¡†ï¼Œæœªèšç„¦æ—¶æ˜¾ç¤ºç°è‰²è¾¹æ¡†ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¯†ç æ¡†åˆ‡æ¢æ˜¾ç¤º/éšè—</strong>ï¼š</p>
</li>
</ol>
<pre><code class="hljs language-dart" lang="dart">   <span class="hljs-built_in">bool</span> _obscureText = <span class="hljs-keyword">true</span>;

   TextField(
     obscureText: _obscureText,
     decoration: InputDecoration(
       suffixIcon: IconButton(
         icon: Icon(
           _obscureText ? Icons.visibility : Icons.visibility_off,
         ),
         onPressed: () {
           setState(() {
             _obscureText = !_obscureText;
           });
         },
       ),
     ),
   )
</code></pre>
<ol start="4">
<li><strong>é™åˆ¶è¾“å…¥ç±»å‹</strong>ï¼š
<ul>
<li>ä½¿ç”¨ <code>inputFormatters</code> é…åˆ <code>FilteringTextInputFormatter</code> é™åˆ¶è¾“å…¥ï¼ˆå¦‚æ•°å­—ã€å­—æ¯ã€ç¦æ­¢è¡¨æƒ…ç­‰ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-15">6. æ€»ç»“</h2>
<p><code>TextField</code> å’Œ <code>TextFormField</code> æ˜¯ Flutter ä¸­å¤„ç†æ–‡æœ¬è¾“å…¥çš„æ ¸å¿ƒç»„ä»¶ï¼Œé€šè¿‡ <code>TextEditingController</code> å¯çµæ´»æ§åˆ¶æ–‡æœ¬å†…å®¹ï¼Œé€šè¿‡ <code>FocusNode</code> å¯ç²¾å‡†ç®¡ç†ç„¦ç‚¹çŠ¶æ€ã€‚æŒæ¡è¾“å…¥æ¡†çš„æ ·å¼å®šåˆ¶ã€æ–‡æœ¬æ§åˆ¶ã€ç„¦ç‚¹ç®¡ç†å’Œè¡¨å•éªŒè¯ï¼Œèƒ½æ˜¾è‘—æå‡ç”¨æˆ·ä½“éªŒã€‚å®é™…å¼€å‘ä¸­ï¼Œéœ€æ³¨æ„æ§åˆ¶å™¨å’Œç„¦ç‚¹èŠ‚ç‚¹çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆåŠæ—¶é”€æ¯ï¼Œé¿å…å†…å­˜æ³„æ¼ï¼‰ï¼Œå¹¶æ ¹æ®å…·ä½“åœºæ™¯é€‰æ‹©åˆé€‚çš„ç»„ä»¶é…ç½®ã€‚</p>
<hr/>
<blockquote>
<p>æœ¬æ¬¡åˆ†äº«å°±åˆ°è¿™å„¿å•¦ï¼Œæˆ‘æ˜¯é¹å¤šå¤šï¼Œæ·±è€•å‰ç«¯çš„æŠ€æœ¯åˆ›ä½œè€…ï¼Œå¦‚æœæ‚¨çœ‹äº†è§‰å¾—æœ‰å¸®åŠ©ï¼Œæ¬¢è¿è¯„è®ºï¼Œå…³æ³¨ï¼Œç‚¹èµï¼Œè½¬å‘ï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§~</p>
</blockquote>
<p>PSï¼šåœ¨æœ¬é¡µæŒ‰F12ï¼Œåœ¨consoleä¸­è¾“å…¥document.getElementsByClassName('panel-btn')[0].click();æœ‰æƒŠå–œå“¦~</p>
<p><code>å¾€æœŸæ–‡ç« </code></p>
<ul>
<li><a href="https://juejin.cn/post/7580389111921786943" target="_blank" title="https://juejin.cn/post/7580389111921786943">flutter-å±å¹•è‡ªé€‚åº”æ’ä»¶flutter_screenutilæ•™ç¨‹å…¨æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7579101504289882166" target="_blank" title="https://juejin.cn/post/7579101504289882166">flutter-ä½¿ç”¨url_launcheræ‰“å¼€é“¾æ¥/åº”ç”¨/çŸ­ä¿¡/é‚®ä»¶å’Œè¯„åˆ†è·³è½¬ç­‰</a></li>
<li><a href="https://juejin.cn/post/7570923924365230143" target="_blank" title="https://juejin.cn/post/7570923924365230143">flutterå›¾ç‰‡é€‰æ‹©åº“multi_image_picker_pluså’Œimage_pickerçš„å¯¹æ¯”å’Œä½¿ç”¨è§£æ</a></li>
<li><a href="https://juejin.cn/post/7568136081302978623" target="_blank" title="https://juejin.cn/post/7568136081302978623">è§£é”flutterå¼¹çª—æ–°å§¿åŠ¿ï¼šdialog-flutter_smart_dialogæ’ä»¶è§£è¯»+æ¡ˆä¾‹</a></li>
<li><a href="https://juejin.cn/post/7559089440901545999" target="_blank" title="https://juejin.cn/post/7559089440901545999">flutter-åˆ‡æ¢çŠ¶æ€æ˜¾ç¤ºä¸åŒç»„ä»¶10ç§å®ç°æ–¹æ¡ˆå…¨è§£æ</a></li>
<li><a href="https://juejin.cn/post/7555079970491318308" target="_blank" title="https://juejin.cn/post/7555079970491318308">flutter-è¯¦è§£æ§åˆ¶ç»„ä»¶æ˜¾ç¤ºçš„ä¸¤ç§æ–¹å¼Offstageä¸Visibility</a></li>
<li><a href="https://juejin.cn/post/7535358416182788122" target="_blank" title="https://juejin.cn/post/7535358416182788122">flutter-ä½¿ç”¨AnimatedDefaultTextStyleå®ç°æ–‡æœ¬åŠ¨ç”»</a></li>
<li><a href="https://juejin.cn/post/7537339432291434496" target="_blank" title="https://juejin.cn/post/7537339432291434496">flutter-ä½¿ç”¨SafeAreaç»„ä»¶å¤„ç†å„æœºå‹çš„å®‰å…¨è·ç¦»</a></li>
<li><a href="https://juejin.cn/spost/7537593417099149321" target="_blank" title="https://juejin.cn/spost/7537593417099149321">flutter-å®ç°æ¸å˜è‰²è¾¹æ¡†èƒŒæ™¯ä»¥åŠæ¸å˜è‰²æ–‡å­—</a></li>
<li><a href="https://juejin.cn/post/7543474419240370185" target="_blank" title="https://juejin.cn/post/7543474419240370185">flutter-ä½¿ç”¨confettiåˆ¶ä½œç‚«é…·çº¸å±‘çˆ†ç‚¸ç²’å­åŠ¨ç”»</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€è¿è½½ã€‘é›¶åŸºç¡€è·Ÿæˆ‘å­¦åšAI Agentï¼ˆç¬¬3è¯¾ï¼šç”¨LangChainå¼€å‘ä¸€ä¸ªåšé¢˜Agentï¼‰]]></title>    <link>https://juejin.cn/post/7582553782398058542</link>    <guid>https://juejin.cn/post/7582553782398058542</guid>    <pubDate>2025-12-12T05:34:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582553782398058542" data-draft-id="7582149417768337458" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€è¿è½½ã€‘é›¶åŸºç¡€è·Ÿæˆ‘å­¦åšAI Agentï¼ˆç¬¬3è¯¾ï¼šç”¨LangChainå¼€å‘ä¸€ä¸ªåšé¢˜Agentï¼‰"/> <meta itemprop="keywords" content="LangChain,Agent,LLM"/> <meta itemprop="datePublished" content="2025-12-12T05:34:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€è¿è½½ã€‘é›¶åŸºç¡€è·Ÿæˆ‘å­¦åšAI Agentï¼ˆç¬¬3è¯¾ï¼šç”¨LangChainå¼€å‘ä¸€ä¸ªåšé¢˜Agentï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T05:34:33.000Z" title="Fri Dec 12 2025 05:34:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote>
<p>ä»Šå¤©è®²ç¬¬3è¯¾ï¼Œç”¨ä¸€ä¸ªåšAgentçš„ç»å…¸æ¡†æ¶â€”â€”LangChainï¼Œå¼€å‘ä¸€ä¸ªåšæ•°å­¦é¢˜çš„Agentã€‚</p>
<p>LangChainæ˜¯éå¸¸å¼ºå¤§çš„å¤§è¯­è¨€æ¨¡å‹åº”ç”¨å¼€å‘åº“ï¼ŒåšAgentå¾ˆæ–¹ä¾¿ï¼Œå¯èƒ½å¤§å®¶ä¹Ÿå¾ˆç†Ÿæ‚‰ï¼Œä½†LangChainæœ€å¤§çš„é—®é¢˜æ˜¯ç‰ˆæœ¬å’Œç‰ˆæœ¬ä¹‹é—´å˜åŒ–å¤ªå¿«ï¼Œå°¤å…¶ç°åœ¨ç»ˆäºåˆ°äº†1.0.0ï¼Œä¸æ—§ç‰ˆæ¯”è¾ƒï¼Œç±»åº“ç»“æ„å·²é¢ç›®å…¨éï¼Œå¯èƒ½è¿˜è¦é‡æ–°ç†Ÿæ‚‰ã€‚æœ¬è¯¾æ˜¯é’ˆå¯¹LangChianæœ€æ–°ç‰ˆV1.0.0çš„ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å­¦ä¹ ç›®æ ‡</h2>
<p>å¤§æ¨¡å‹ä¸å¤ªæ“…é•¿æ•°å­—è®¡ç®—ï¼ŒDeepSeekè®­ç»ƒæ—¶ç”¨å¼ºåŒ–å­¦ä¹ ï¼Œå¯¹è¿™ä¸ªæ–¹é¢åšäº†å¾ˆå¤šæ”¹è¿›ï¼Œä½†æ€»å½’åšæ•°å­¦é¢˜ï¼Œæ–‡æœ¬ç”Ÿæˆçš„æ–¹æ³•ä¸å¦‚æ•°å­¦å·¥å…·æ¥çš„å‡†ç¡®ï¼Œæ‰€ä»¥è¦ç”¨Agentå¤–æŒ‚å·¥å…·ã€‚æœ¬è®²çš„å†…å®¹æ˜¯ä¸€ä¸ªåšæ•°å­—é¢˜çš„Agentï¼Œåªæœ‰20å¤šè¡Œç¨‹åºï¼Œä½†ä¼šæ¶‰åŠå¤§æ¨¡å‹ã€å·¥å…·è°ƒç”¨ã€Function-Callingã€ReAct Agentç­‰çŸ¥è¯†ï¼Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„Agentæ¡ˆä¾‹ã€‚</p>
<h2 data-id="heading-1">äºŒã€æºä»£ç </h2>
<p>å…ˆä¸Šä»£ç ï¼Œå†è§£é‡Šã€‚å¦‚åœ¨æ‰‹æœºä¸Šä¸æ˜“æŸ¥çœ‹ï¼Œè¯·åˆ°Â  çš„chapter-x-0baseä¸‹è½½ä»£ç å’Œæ“ä½œæ­¥éª¤ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"># agent_langchain.py
import os
from langchain.agents import create_agent
os.environ['OPENAI_API_BASE'] = 'http://localhost:11434/v1'
os.environ[<span class="hljs-symbol">&amp;#34;</span>OPENAI_API_KEY<span class="hljs-symbol">&amp;#34;</span>] = <span class="hljs-symbol">&amp;#34;</span>EMPTY<span class="hljs-symbol">&amp;#34;</span>
def calculator(expression: str) -&gt; str:
<span class="hljs-symbol">&amp;#34;</span><span class="hljs-symbol">&amp;#34;</span><span class="hljs-symbol">&amp;#34;</span>ç”¨äºæ‰§è¡Œæ•°å­¦è®¡ç®—ã€‚è¾“å…¥æ˜¯ä¸€ä¸ªæ•°å­¦è¡¨è¾¾å¼ï¼Œä¾‹å¦‚ï¼š'15 ** 2 + 28 / 4'<span class="hljs-symbol">&amp;#34;</span><span class="hljs-symbol">&amp;#34;</span><span class="hljs-symbol">&amp;#34;</span>
try:
print(<span class="hljs-symbol">&amp;#34;</span>\n======è°ƒç”¨åˆ°å·¥å…·=======\n<span class="hljs-symbol">&amp;#34;</span>)
print(expression)
print(<span class="hljs-symbol">&amp;#34;</span>\n======================\n<span class="hljs-symbol">&amp;#34;</span>)
return str(eval(expression))
except Exception as e:
return f<span class="hljs-symbol">&amp;#34;</span>è®¡ç®—é”™è¯¯: {e}<span class="hljs-symbol">&amp;#34;</span>
agent = create_agent(
model=<span class="hljs-symbol">&amp;#34;</span>openai:qwen3<span class="hljs-symbol">&amp;#34;</span>, tools=[calculator],
system_prompt=<span class="hljs-symbol">&amp;#34;</span>ä½ æ˜¯ä¸€ä¸ªç”¨äºæ‰§è¡Œæ•°å­¦è®¡ç®—çš„Agent<span class="hljs-symbol">&amp;#34;</span>,
)
response = agent.invoke(
{<span class="hljs-symbol">&amp;#34;</span>messages<span class="hljs-symbol">&amp;#34;</span>: [{<span class="hljs-symbol">&amp;#34;</span>role<span class="hljs-symbol">&amp;#34;</span>: <span class="hljs-symbol">&amp;#34;</span>user<span class="hljs-symbol">&amp;#34;</span>, <span class="hljs-symbol">&amp;#34;</span>content<span class="hljs-symbol">&amp;#34;</span>: <span class="hljs-symbol">&amp;#34;</span>è®¡ç®—15çš„å¹³æ–¹åŠ ä¸Š32é™¤ä»¥4çš„ç»“æœæ˜¯å¤šå°‘ï¼Ÿ<span class="hljs-symbol">&amp;#34;</span>}]}
)
print(response)
</code></pre>
<p>1ã€calculatoræ˜¯ä¸ªå·¥å…·æ–¹æ³•ï¼Œä¼ å…¥è¡¨è¾¾å¼ï¼Œç»™å‡ºç»“æœã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œè¿™ä¸ªæ–¹æ³•ä»€ä¹ˆæ—¶å€™è°ƒï¼Œè¡¨è¾¾å¼å‚æ•°æ˜¯è°ç»™çš„ï¼Ÿè¿™å°±ä¸Agentæœ‰å…³ï¼Œåœ¨å»ºAgentçš„æ—¶å€™ï¼Œè¿™ä¸ªæ–¹æ³•ä½œä¸ºToolsä¹‹ä¸€è¢«è®¾ç½®è¿›å»ï¼Œé‚£ç”¨æˆ·é€šè¿‡Agentå‘å¤§æ¨¡å‹æé—®æ—¶ï¼Œè¿™äº›å·¥å…·ä¿¡æ¯ä¹Ÿä½œä¸ºæç¤ºè¯çš„ä¸€éƒ¨åˆ†ä¼ ç»™å¤§æ¨¡å‹ï¼Œè¿™æ ·å¤§æ¨¡å‹å°±ä¼šæ ¹æ®æƒ…å†µç”Ÿæˆä¸€ä¸ªè°ƒç”¨calculatorçš„å‘½ä»¤æ–‡æœ¬ï¼Œé¡ºä¾¿æŠŠå‚æ•°ä¹Ÿç”Ÿæˆã€‚</p>
<p>2ã€é—®é¢˜æ˜¯å¤§æ¨¡å‹ä¸èƒ½ç›´æ¥è°ƒå·¥å…·æ–¹æ³•ï¼Œä¸ç„¶å¤§å®¶éƒ½è®©ä»–è°ƒï¼Œä»–ä¹Ÿå—ä¸äº†ï¼Œä»–ç”¨çš„æ–¹æ³•æ˜¯è¿œç¨‹æŒ‡æŒ¥ï¼Œç”Ÿæˆçš„æ–‡æœ¬å›ä¼ ç»™Agentï¼ŒAgentè°ƒä»–è‡ªå·±çš„æ–¹æ³•ã€‚è¿™ä¸ªè¿‡ç¨‹å°±å«Function-Callingã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€è¿è¡Œ</h2>
<p><strong>1ã€ç¯å¢ƒå®‰è£…</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</span>
conda create -n part03 <span class="hljs-attr">python</span>=<span class="hljs-number">3.13</span> -y
<span class="hljs-comment"># æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</span>
conda activate part03
<span class="hljs-comment"># å®‰è£…ä¾èµ–åº“</span>
pip install <span class="hljs-attr">langchain</span>==<span class="hljs-number">1.0</span>.<span class="hljs-number">0</span> langchain-community==<span class="hljs-number">1.0</span>.<span class="hljs-number">0</span>a1 langchain-openai==<span class="hljs-number">1.0</span>.<span class="hljs-number">0</span> -i https://pypi.mirrors.ustc.edu.cn/simple
</code></pre>
<p><strong>2ã€æµ‹è¯•</strong></p>
<pre><code class="hljs">python agent_langchain.py
</code></pre>
<p>é—®é¢˜æ˜¯ï¼šè®¡ç®—15çš„å¹³æ–¹åŠ ä¸Š32é™¤ä»¥4çš„ç»“æœæ˜¯å¤šå°‘ï¼Ÿå¤§æ¨¡å‹æ²¡æœ‰ç›´æ¥ç®—ï¼Œè€Œæ˜¯ç”Ÿæˆä¸€ä¸ªè°ƒç”¨å·¥å…·çš„æ–‡æœ¬ï¼ŒæŠŠå‚æ•°ä¹Ÿç»™ç”Ÿæˆï¼Œç„¶åäº¤ç»™Agentè°ƒcalculatorç®—ï¼Œç®—å®Œå†ç»™å¤§æ¨¡å‹æ€»ç»“ä¸€ä¸‹ã€‚</p>
<p><strong>3ã€ç»“æœ</strong></p>
<p>ä»ç»“æœä¸Šçœ‹ï¼Œæ¨¡å‹ç”Ÿæˆçš„æ–‡æœ¬å‘½ä¸­äº†å·¥å…·ï¼Œå·¥å…·è®¡ç®—åå†ç”±æ¨¡å‹æ€»ç»“ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/63a91e4aad7249abad037747732187b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766122473&amp;x-signature=MuR3kJ%2BJIUTA71rt%2B4MdHWM%2FQ7E%3D" alt="" loading="lazy"/></p>
<p>æœªå®Œå¾…ç»­ï¼</p>
<h3 data-id="heading-3">å­¦ä¹ èµ„æºæ¨è</h3>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€è¿è½½ã€‘é›¶åŸºç¡€è·Ÿæˆ‘å­¦åšAI Agentï¼ˆç¬¬4è¯¾ï¼šç”¨Autogenå¼€å‘ä¸€ä¸ªå­¦éœ¸Agentï¼‰]]></title>    <link>https://juejin.cn/post/7582553782398074926</link>    <guid>https://juejin.cn/post/7582553782398074926</guid>    <pubDate>2025-12-12T05:34:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582553782398074926" data-draft-id="7582118218648911898" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€è¿è½½ã€‘é›¶åŸºç¡€è·Ÿæˆ‘å­¦åšAI Agentï¼ˆç¬¬4è¯¾ï¼šç”¨Autogenå¼€å‘ä¸€ä¸ªå­¦éœ¸Agentï¼‰"/> <meta itemprop="keywords" content="Agent,LLM,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-12T05:34:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€è¿è½½ã€‘é›¶åŸºç¡€è·Ÿæˆ‘å­¦åšAI Agentï¼ˆç¬¬4è¯¾ï¼šç”¨Autogenå¼€å‘ä¸€ä¸ªå­¦éœ¸Agentï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T05:34:42.000Z" title="Fri Dec 12 2025 05:34:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote>
<p>ä»Šå¤©è®²ç¬¬4è¯¾ï¼Œç”¨Microsoft Autogenåšä¸€ä¸ªå¤šè§’è‰²Agentåº”ç”¨ã€‚</p>
<p>Autogenæ˜¯AI Agentæ¡†æ¶é‡Œçš„å¸¸é’æ ‘ï¼Œç®€ç§°AGï¼Œä¸¤å¹´å‰å‘å¸ƒï¼Œç°åœ¨é¡¹ç›®è¿˜å¤„äºæ´»è·ƒçŠ¶æ€ã€‚</p>
<p>Autogenåˆšå¼€å§‹ä¸»è¦ä»¥è‡ªåŠ¨åŒ–ç¼–ç ä¸ºä¸»ï¼Œåæ¥å‘å±•äº†ä¸€ä¸ªç»¼åˆæ€§çš„Agentå¼€å‘æ¡†æ¶ï¼Œä»–çš„ä¼˜åŠ¿åœ¨äºå…¼å®¹æ€§å¥½ã€æœ‰Webç•Œé¢æ”¯æŒï¼ˆAutoGen Studioï¼‰ã€ä½¿ç”¨ç®€å•ã€å¤§å‚å“ç‰Œç­‰ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æ¡ˆä¾‹ä»‹ç»</h2>
<p>æœ¬ç¯‡åšä¸€ä¸ªå…·æœ‰ä¸¤ä¸ªè§’è‰²çš„åº”ç”¨ï¼Œä¸€ä¸ªè§’è‰²æ“…é•¿è§£æ•°å­¦é¢˜ï¼Œå¦ä¸€ä¸ªè§’è‰²ä¸“æ³¨äºåŒ–å­¦çŸ¥è¯†è§£ç­”ï¼Œé‚£æ¨è€Œå¹¿ä¹‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥åšä¸€ä¸ªæ‰€æœ‰å­¦ç§‘éƒ½ä¼˜ç§€çš„Agentåº”ç”¨äº†ã€‚</p>
<h2 data-id="heading-1">äºŒã€æ¡ä»¶å‡†å¤‡</h2>
<p>é¦–å…ˆè¦æœ‰å¤§æ¨¡å‹ï¼Œæˆ‘ä»¬ç”¨Ollamaè½¯ä»¶è§£å†³ï¼Œç„¶åè¦æœ‰Pythonç¯å¢ƒï¼Œæˆ‘ä»¬ç”¨Minicondaï¼Œè¿™ä¸¤æ ·åœ¨<a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">ã€è¿è½½ã€‘é›¶åŸºç¡€è·Ÿæˆ‘å­¦åšAI Agentï¼ˆç¬¬1è¯¾ï¼šç¯å¢ƒå®‰è£…ï¼‰</a>æœ‰è¯¦ç»†è¯´æ˜ï¼ŒæŒ‰æ­¥éª¤è£…å³å¯ã€‚</p>
<p>è¿˜æœ‰ä¸€ä¸ªé‡ç‚¹è¦è®²çš„åœ°æ–¹ï¼Œå°±æ˜¯æœ¬ä¾‹ç”¨OpenAIæ¥å£æ¥å…¥Ollamaéƒ¨ç½²çš„qwen3æ¨¡å‹ï¼Œä½†é‚£ä¸ªæ¥å£åªè®¤OpenAIçš„æ¨¡å‹ï¼Œè¿™é‡Œæœ‰ä¸ªæŠ€å·§ï¼Œå°±æ˜¯æŠŠqwen3å¤åˆ¶ä¸€ä»½å˜æˆgpt-3.5-turboï¼Œè¿™æ ·æ¥å£å°±èƒ½è®¤äº†ï¼Œç”¨èµ·æ¥æ²¡åŒºåˆ«ã€‚å…·ä½“å‘½ä»¤ä¸ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">ollama <span class="hljs-built_in">cp</span> qwen3 gpt-3.5-turbo
</code></pre>
<h2 data-id="heading-2">ä¸‰ã€æºä»£ç </h2>
<p>å¦‚æœåœ¨æ‰‹æœºä¸Šä¸æ˜“æŸ¥çœ‹ï¼Œè¯·åˆ°Â  çš„chapter-x-0baseä¸‹è½½ä»£ç å’Œæ“ä½œæ­¥éª¤ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">import asyncio
from autogen_agentchat.agents import AssistantAgent
from autogen_agentchat.tools import AgentTool
from autogen_agentchat.ui import Console
from autogen_ext.models.openai import OpenAIChatCompletionClient
async def main() -&gt; None:
<span class="hljs-attr">model_client</span> = OpenAIChatCompletionClient(
<span class="hljs-attr">model</span>=&amp;<span class="hljs-comment">#34;gpt-3.5-turbo&amp;#34;,</span>
<span class="hljs-attr">base_url</span>=&amp;<span class="hljs-comment">#34;http://localhost:11434/v1&amp;#34;,</span>
<span class="hljs-attr">api_key</span>=&amp;<span class="hljs-comment">#34;EMPTY&amp;#34;</span>
)
<span class="hljs-comment"># åˆ›å»ºæ•°å­¦ä¸“å®¶åŠ©æ‰‹</span>
<span class="hljs-attr">math_agent</span> = AssistantAgent(
&amp;<span class="hljs-comment">#34;math_expert&amp;#34;,</span>
<span class="hljs-attr">model_client</span>=model_client,
<span class="hljs-attr">system_message</span>=&amp;<span class="hljs-comment">#34;ä½ æ˜¯ä¸€åæ•°å­¦ä¸“å®¶ã€‚&amp;#34;,</span>
<span class="hljs-attr">description</span>=&amp;<span class="hljs-comment">#34;æ•°å­¦ä¸“å®¶åŠ©æ‰‹ã€‚&amp;#34;,</span>
<span class="hljs-attr">model_client_stream</span>=<span class="hljs-literal">True</span>,
)
<span class="hljs-attr">math_agent_tool</span> = AgentTool(math_agent,
<span class="hljs-attr">return_value_as_last_message</span>=<span class="hljs-literal">True</span>)
<span class="hljs-comment"># åˆ›å»ºåŒ–å­¦ä¸“å®¶åŠ©æ‰‹</span>
<span class="hljs-attr">chemistry_agent</span> = AssistantAgent(
&amp;<span class="hljs-comment">#34;chemistry_expert&amp;#34;,</span>
<span class="hljs-attr">model_client</span>=model_client,
<span class="hljs-attr">system_message</span>=&amp;<span class="hljs-comment">#34;ä½ æ˜¯ä¸€ååŒ–å­¦ä¸“å®¶ã€‚&amp;#34;,</span>
<span class="hljs-attr">description</span>=&amp;<span class="hljs-comment">#34;åŒ–å­¦ä¸“å®¶åŠ©æ‰‹ã€‚&amp;#34;,</span>
<span class="hljs-attr">model_client_stream</span>=<span class="hljs-literal">True</span>,
)
<span class="hljs-attr">chemistry_agent_tool</span> = AgentTool(
chemistry_agent, <span class="hljs-attr">return_value_as_last_message</span>=<span class="hljs-literal">True</span>)
<span class="hljs-comment"># åˆ›å»ºä¸»åŠ©æ‰‹ï¼Œå¯ä½¿ç”¨ä¸“å®¶å·¥å…·</span>
<span class="hljs-attr">agent</span> = AssistantAgent(
&amp;<span class="hljs-comment">#34;assistant&amp;#34;,</span>
<span class="hljs-attr">system_message</span>=&amp;<span class="hljs-comment">#34;ä½ æ˜¯ä¸€ä¸ªé€šç”¨åŠ©æ‰‹ã€‚éœ€è¦æ—¶è¯·ä½¿ç”¨ä¸“å®¶å·¥å…·ã€‚&amp;#34;,</span>
<span class="hljs-attr">model_client</span>=model_client,
<span class="hljs-attr">model_client_stream</span>=<span class="hljs-literal">True</span>,
<span class="hljs-attr">tools</span>=[math_agent_tool, chemistry_agent_tool],
<span class="hljs-attr">max_tool_iterations</span>=<span class="hljs-number">10</span>,
)
<span class="hljs-comment"># è¿è¡Œä»»åŠ¡</span>
await Console(agent.run_stream(<span class="hljs-attr">task</span>=&amp;<span class="hljs-comment">#34;x^2çš„ç§¯åˆ†æ˜¯ä»€ä¹ˆï¼Ÿ&amp;#34;))</span>
await Console(agent.run_stream(<span class="hljs-attr">task</span>=&amp;<span class="hljs-comment">#34;æ°´çš„åˆ†å­é‡æ˜¯å¤šå°‘ï¼Ÿ&amp;#34;))</span>
asyncio.run(main())
</code></pre>
<h2 data-id="heading-3">å››ã€è¿è¡Œ</h2>
<p><strong>1ã€ç¯å¢ƒå®‰è£…</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</span>
conda create -n part04 <span class="hljs-attr">python</span>=<span class="hljs-number">3.13</span> -y
<span class="hljs-comment"># æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</span>
conda activate part04
<span class="hljs-comment"># å®‰è£…ä¾èµ–åº“</span>
pip install <span class="hljs-attr">autogen-agentchat</span>==<span class="hljs-number">0.7</span>.<span class="hljs-number">5</span> autogen-ext[openai]==<span class="hljs-number">0.7</span>.<span class="hljs-number">5</span> -i https://pypi.mirrors.ustc.edu.cn/simple
</code></pre>
<p><strong>2ã€è¿è¡Œç¨‹åº</strong></p>
<pre><code class="hljs">python agent_autogen.py
</code></pre>
<p><strong>3ã€è¿è¡Œç»“æœ</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8ff6fdb0e964e6a9466a1df51b51fb6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766122481&amp;x-signature=0KLvwIXVwystCFckKFktelx760c%3D" alt="" loading="lazy"/></p>
<p>æœªå®Œå¾…ç»­ï¼</p>
<h3 data-id="heading-4">å­¦ä¹ èµ„æºæ¨è</h3>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java ä½ä»£ç å¹³å°çš„â€œåŠ¨æ€å¼•æ“â€ï¼šLiquor]]></title>    <link>https://juejin.cn/post/7582510291667238963</link>    <guid>https://juejin.cn/post/7582510291667238963</guid>    <pubDate>2025-12-12T03:56:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582510291667238963" data-draft-id="7582516300049842203" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java ä½ä»£ç å¹³å°çš„â€œåŠ¨æ€å¼•æ“â€ï¼šLiquor"/> <meta itemprop="keywords" content="Java,ä½ä»£ç ,Groovy"/> <meta itemprop="datePublished" content="2025-12-12T03:56:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‰é±¼çš„çŒ«"/> <meta itemprop="url" content="https://juejin.cn/user/409464125003639"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java ä½ä»£ç å¹³å°çš„â€œåŠ¨æ€å¼•æ“â€ï¼šLiquor
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/409464125003639/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‰é±¼çš„çŒ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T03:56:34.000Z" title="Fri Dec 12 2025 03:56:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    12
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Java ä½ä»£ç å¹³å°ä¸­ï¼ŒLiquor å……å½“äº†è¿è¡Œæ—¶ JIT ç¼–è¯‘å™¨å’Œè§„åˆ™å¼•æ“ã€‚å®ƒå¼¥åˆäº†â€œé…ç½®â€ä¸â€œé«˜æ€§èƒ½ Java è¿è¡Œæ—¶â€ä¹‹é—´çš„é¸¿æ²Ÿã€‚å®ƒè§£å†³äº† Java ç”Ÿæ€ä¸­çƒ­æ›´æ–°ã€é«˜æ€§èƒ½ã€å¼ºç±»å‹ä¸‰è€…éš¾ä»¥å…¼å¾—çš„æ ¹æœ¬çŸ›ç›¾ã€‚</p>
<p>Liquor ï¼ˆåŠ¨æ€ç¼–è¯‘åï¼‰å°±æ˜¯ Java åŸç”Ÿè¿è¡Œï¼Œæ¯”ä¸€èˆ¬çš„ JVM è„šæœ¬ï¼ˆæˆ–è¡¨è¾¾å¼ï¼‰æ€§èƒ½é«˜ â€œ20å€â€ å·¦å³ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€çªç ´ Java é™æ€ç¼–è¯‘çš„é™åˆ¶ï¼šå®ç°é…ç½®å³ä»£ç çš„çƒ­ç”Ÿæ•ˆ</h2>
<p>ä½ä»£ç å¹³å°çš„æ ¸å¿ƒä»·å€¼åœ¨äºä¸šåŠ¡æ•æ·æ€§ï¼Œå³ç”¨æˆ·åœ¨ç•Œé¢ä¸Šçš„é…ç½®ï¼ˆæµç¨‹ã€è§„åˆ™ã€å…¬å¼ã€ä»£ç ï¼‰å¿…é¡»å®æ—¶ç”Ÿæ•ˆï¼Œè€Œä¼ ç»Ÿçš„ Java å¼€å‘æ¨¡å¼æ˜¯å¼ºé™æ€ç¼–è¯‘çš„ï¼Œæ–°ä»£ç éœ€è¦é‡æ–°ç¼–è¯‘ã€æ‰“åŒ…å’Œé‡å¯ã€‚</p>
<h3 data-id="heading-1">1. åŠ¨æ€ç¼–è¯‘å³æœåŠ¡ (Dynamic Compilation-as-a-Service)</h3>
<p>Liquor çš„ DynamicCompiler æ¨¡å—å°†ç¼–è¯‘èƒ½åŠ›ä»å¼€å‘å·¥å…·é“¾ä¸­è§£æ”¾å‡ºæ¥ï¼Œå˜ä¸ºä¸€ä¸ªè¿è¡Œæ—¶çš„æœåŠ¡èƒ½åŠ›ã€‚</p>
<ul>
<li>å®ç°æœºåˆ¶ï¼š ä½ä»£ç å¹³å°çš„å‰ç«¯é…ç½®ï¼ˆå¦‚æ‹–æ‹½æµç¨‹ã€è®¾ç½®æ•°æ®æºæ˜ å°„ï¼‰ç»è¿‡åç«¯è§£æå™¨ï¼Œè¢«è½¬åŒ–ä¸ºæ ‡å‡†çš„ Java ä»£ç ç‰‡æ®µã€‚Liquor åœ¨è¿è¡Œæ—¶è°ƒç”¨ Java Compiler API å°†è¿™äº›ä»£ç ç¼–è¯‘æˆå­—èŠ‚ç ã€‚</li>
<li>æŠ€æœ¯ä»·å€¼ï¼š å¹³å°æ— éœ€ä¾èµ–å¤–éƒ¨çš„ç¼–è¯‘ç¯å¢ƒï¼Œä¹Ÿä¸éœ€è¦è¿›è¡Œè€—æ—¶çš„é‡å¯ã€‚æ–°ä¸šåŠ¡é€»è¾‘ç›´æ¥åœ¨å†…å­˜ä¸­ç”Ÿæˆã€åŠ è½½å¹¶æ‰§è¡Œï¼Œå®ç°äº†ä¸šåŠ¡é€»è¾‘çš„é›¶åœæœºçƒ­æ›´æ–°ã€‚</li>
</ul>
<h3 data-id="heading-2">2. ä»£ç ç¤ºä¾‹ï¼šæµç¨‹èŠ‚ç‚¹çš„åŠ¨æ€å®ç°</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½ä»£ç å¹³å°è§£æç”¨æˆ·é…ç½®ï¼Œç”Ÿæˆä¸€ä¸ª Java ç±»æˆ–æ–¹æ³•</span>
<span class="hljs-type">String</span> <span class="hljs-variable">customLogicCode</span> <span class="hljs-operator">=</span> <span class="hljs-string">"""
    import com.platform.utils.DataConverter; 
    import java.util.Map; // å¢åŠ  Map å¯¼å…¥ï¼Œä½¿ä»£ç æ›´å®Œæ•´

    public class CustomProcessor { 
        public Map&lt;String, Object&gt; process(Map&lt;String, Object&gt; inputData) { 
            if ((double)inputData.get("amount") &gt; 1000) { 
                inputData.put("status", "HighValue"); 
            } 
            // è°ƒç”¨å¹³å°å†…ç½®å·¥å…·ç±»
            inputData.put("convertedKey", DataConverter.hashKey(inputData.get("originalKey"))); 
            return inputData; 
        } 
    }
    """</span>;

<span class="hljs-comment">// Liquor è¿è¡Œæ—¶ç¼–è¯‘å’ŒåŠ è½½</span>
<span class="hljs-type">DynamicCompiler</span> <span class="hljs-variable">compiler</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicCompiler</span>();
compiler.addSource(<span class="hljs-string">"CustomProcessor"</span>, customLogicCode).build();

<span class="hljs-comment">// å®ä¾‹åŒ–å¹¶æ‰§è¡Œ (æ¨¡æ‹Ÿæµç¨‹å¼•æ“è°ƒç”¨)</span>
Class&lt;?&gt; clazz = compiler.getClassLoader().loadClass(<span class="hljs-string">"CustomProcessor"</span>);
<span class="hljs-type">Object</span> <span class="hljs-variable">processor</span> <span class="hljs-operator">=</span> clazz.getDeclaredConstructor().newInstance();
<span class="hljs-comment">// ... è°ƒç”¨ processor.process(data) ...</span>
</code></pre>
<h2 data-id="heading-3">äºŒã€åˆ©ç”¨å­—èŠ‚ç ä¼˜åŠ¿ï¼šé«˜æ€§èƒ½çš„è¡¨è¾¾å¼ä¸è§„åˆ™å¼•æ“</h2>
<p>ä½ä»£ç å¹³å°çš„æ ¸å¿ƒé€»è¾‘å¾€å¾€æ˜¯å¤§é‡çš„è¡¨è¾¾å¼æ±‚å€¼å’Œä¸šåŠ¡è§„åˆ™åˆ¤æ–­ã€‚é‡‡ç”¨è„šæœ¬è§£é‡Šå™¨ï¼ˆå¦‚ JavaScriptã€Groovy ç­‰è„šæœ¬å¼•æ“ï¼‰æˆ–åŸºäºåå°„çš„è§„åˆ™å¼•æ“ï¼ˆå¦‚ MVEL/OGNLï¼‰åœ¨æ€§èƒ½ä¸Šå­˜åœ¨å›ºæœ‰ç“¶é¢ˆã€‚</p>
<h3 data-id="heading-4">1. é«˜æ€§èƒ½çš„å­—èŠ‚ç ç¼“å­˜ (Bytecode Caching)</h3>
<p>Liquor çš„ liquor-eval æ¨¡å—å°†å¤æ‚çš„è¡¨è¾¾å¼å’Œè„šæœ¬ç¼–è¯‘æˆ Java å­—èŠ‚ç ï¼Œå¹¶é€šè¿‡ LRU ç¼“å­˜ å­˜å‚¨ç¼–è¯‘ç»“æœã€‚</p>
<ul>
<li>å®ç°æœºåˆ¶ï¼š å¯¹äºé‡å¤å‡ºç°çš„è¡¨è¾¾å¼ï¼ˆä¾‹å¦‚ï¼ša * (b + 1)ï¼‰ï¼ŒLiquor åªè¿›è¡Œä¸€æ¬¡ç¼–è¯‘ã€‚åç»­æ±‚å€¼ç›´æ¥åŠ è½½ç¼“å­˜ä¸­çš„å­—èŠ‚ç ï¼Œç„¶åä½¿ç”¨ LiquorEvaluator æ‰§è¡Œã€‚</li>
<li>æŠ€æœ¯ä»·å€¼ï¼š åœ¨ä½ä»£ç å¹³å°çš„é«˜å¹¶å‘åœºæ™¯ä¸­ï¼Œå¤§å¤šæ•°è¡¨è¾¾å¼éƒ½æ˜¯é‡å¤çš„ã€‚Liquor é¿å…äº†é‡å¤ç¼–è¯‘å’Œè§£é‡Šçš„å¼€é”€ï¼Œä½¿å¾—è§„åˆ™å¼•æ“çš„æ‰§è¡Œæ€§èƒ½é€¼è¿‘åŸç”Ÿ Java æ–¹æ³•è°ƒç”¨ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³äº†æ€§èƒ½ç“¶é¢ˆã€‚</li>
</ul>
<h3 data-id="heading-5">2. ä»£ç ç¤ºä¾‹ï¼šé«˜æ€§èƒ½è¡¨è¾¾å¼æ±‚å€¼ (Exprs åº”ç”¨)</h3>
<p>åœ¨æ•°æ®æ ¡éªŒå’Œè®¡ç®—å­—æ®µåœºæ™¯ä¸­ï¼Œä¿è¯è®¡ç®—é€Ÿåº¦è‡³å…³é‡è¦ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. å®šä¹‰ä¸€ä¸ªç”¨äºè®¡ç®—çš„è¡¨è¾¾å¼</span>
<span class="hljs-type">CodeSpec</span> <span class="hljs-variable">calculationSpec</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CodeSpec</span>(<span class="hljs-string">"basePrice * (1 + taxRate) + shippingFee"</span>)
    .parameters(
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">ParamSpec</span>(<span class="hljs-string">"basePrice"</span>, Double.class),
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">ParamSpec</span>(<span class="hljs-string">"taxRate"</span>, Double.class),
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">ParamSpec</span>(<span class="hljs-string">"shippingFee"</span>, Double.class)
    );

<span class="hljs-comment">// 2. é¦–æ¬¡æ‰§è¡Œï¼ˆè§¦å‘ç¼–è¯‘å¹¶ç¼“å­˜ï¼‰</span>
Map&lt;String, Object&gt; data1 = Map.of(<span class="hljs-string">"basePrice"</span>, <span class="hljs-number">100.0</span>, <span class="hljs-string">"taxRate"</span>, <span class="hljs-number">0.1</span>, <span class="hljs-string">"shippingFee"</span>, <span class="hljs-number">5.0</span>);
<span class="hljs-type">Double</span> <span class="hljs-variable">total1</span> <span class="hljs-operator">=</span> Exprs.eval(calculationSpec, data1); <span class="hljs-comment">// é¦–æ¬¡ç¼–è¯‘</span>

<span class="hljs-comment">// 3. ç¬¬äºŒæ¬¡æ‰§è¡Œï¼ˆç›´æ¥å‘½ä¸­ç¼“å­˜ï¼Œæå¿«ï¼‰</span>
Map&lt;String, Object&gt; data2 = Map.of(<span class="hljs-string">"basePrice"</span>, <span class="hljs-number">200.0</span>, <span class="hljs-string">"taxRate"</span>, <span class="hljs-number">0.1</span>, <span class="hljs-string">"shippingFee"</span>, <span class="hljs-number">5.0</span>);
<span class="hljs-type">Double</span> <span class="hljs-variable">total2</span> <span class="hljs-operator">=</span> Exprs.eval(calculationSpec, data2); <span class="hljs-comment">// ç›´æ¥æ‰§è¡Œå­—èŠ‚ç </span>
</code></pre>
<h2 data-id="heading-6">ä¸‰ã€æ„å»ºåŠ¨æ€æ‰©å±•ç‚¹çš„åŸºçŸ³ï¼šåŠ¨æ€ Bean ä¸ IoC é›†æˆ</h2>
<p>ä½ä»£ç å¹³å°éœ€è¦æä¾›çµæ´»çš„æ‰©å±•ç‚¹ï¼Œå…è®¸å¼€å‘è€…åµŒå…¥è‡ªå®šä¹‰æœåŠ¡æˆ–è¦†å†™é»˜è®¤è¡Œä¸ºã€‚Liquor æä¾›çš„åŠ¨æ€åŠ è½½æœºåˆ¶æ˜¯å®ç°è¿™ä¸€ç›®æ ‡çš„å…³é”®ã€‚</p>
<h3 data-id="heading-7">1. åŠ¨æ€ç±»åŠ è½½ä¸ IoC å®¹å™¨é›†æˆ (Dynamic Class Loading &amp; IoC)</h3>
<p>Liquor ç¼–è¯‘ç”Ÿæˆçš„ç±»ç”±å…¶å†…éƒ¨çš„ DynamicClassLoader è´Ÿè´£åŠ è½½ã€‚</p>
<ul>
<li>å®ç°æœºåˆ¶ï¼š</li>
</ul>
<p>å¹³å°åˆ©ç”¨ Liquor çš„é›†æˆç‰¹æ€§ï¼ˆå¦‚å¯¹ Spring æˆ– Solon çš„æ”¯æŒï¼‰ï¼Œå°†åŠ¨æ€ç¼–è¯‘çš„ç±»ï¼ˆä¾‹å¦‚ä¸€ä¸ªå¸¦æœ‰ @Component æ³¨è§£çš„ Service ç±»ï¼‰æ³¨å†Œåˆ° IoC (Inversion of Control) å®¹å™¨ä¸­ã€‚</p>
<ul>
<li>æŠ€æœ¯ä»·å€¼ï¼š</li>
</ul>
<p>åŠ¨æ€ä¾èµ–æ³¨å…¥ï¼š åŠ¨æ€ç”Ÿæˆçš„ä»£ç å¯ä»¥ç›´æ¥ @Autowired æˆ– @Inject å¹³å°ä¸­å·²æœ‰çš„æœåŠ¡ Beanã€‚</p>
<p>åŠ¨æ€ API æš´éœ²ï¼š åŠ¨æ€ç¼–è¯‘çš„ Controller ç±»å¯ä»¥å³æ—¶æ˜ å°„åˆ° URL è·¯å¾„ï¼Œå®ç° åŠ¨æ€ API æ¥å£çš„å‘å¸ƒï¼Œä¸ºä½ä»£ç å¹³å°æä¾›äº†çµæ´»çš„å¾®æœåŠ¡æ‰©å±•èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-8">2. å®‰å…¨éš”ç¦»ä¸æ²™ç®±çš„é…åˆ</h3>
<p>åŠ¨æ€ç¼–è¯‘è™½ç„¶å¼ºå¤§ï¼Œä½†ä¹Ÿå¸¦æ¥äº†å®‰å…¨é£é™©ã€‚Liquor çš„ç±»åŠ è½½æœºåˆ¶ä¸ºå®‰å…¨æ²™ç®±æä¾›äº†åŸºç¡€ã€‚</p>
<ul>
<li>å®ç°æœºåˆ¶ï¼š</li>
</ul>
<p>å¹³å°å¯ä»¥é€šè¿‡æ‹¦æˆª Liquor çš„ DynamicClassLoaderï¼Œç»“åˆ Java çš„ SecurityManager æˆ–è‡ªå®šä¹‰çš„ç™½åå•/é»‘åå•æœºåˆ¶ï¼Œé™åˆ¶åŠ¨æ€ä»£ç èƒ½å¤Ÿè®¿é—®çš„åŒ…ã€ç±»å’Œæ–¹æ³•ã€‚</p>
<ul>
<li>æŠ€æœ¯ä»·å€¼ï¼š</li>
</ul>
<p>ç¡®ä¿äº†ç”¨æˆ·ç¼–å†™æˆ–å¹³å°è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç ä¸ä¼šæ¶æ„æˆ–æ„å¤–åœ°è®¿é—®æ•æ„Ÿç³»ç»Ÿèµ„æºï¼ˆå¦‚æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œè¿æ¥ï¼‰ï¼Œä¿éšœäº†æ ¸å¿ƒå¹³å°çš„å®‰å…¨ä¸ç¨³å®šã€‚</p>
<h2 data-id="heading-9">ç»“è®º</h2>
<p>åœ¨ Java ä½ä»£ç å¹³å°çš„åº•å±‚å®ç°ä¸­ï¼ŒLiquor æ¡†æ¶çš„æ„ä¹‰ï¼š</p>
<p>å®ƒæ˜¯è¿æ¥é…ç½®å±‚å’Œé«˜æ€§èƒ½è¿è¡Œæ—¶çš„æ¡¥æ¢ã€‚ å®ƒå°† Java ç¼–è¯‘èƒ½åŠ›æœåŠ¡åŒ–ã€è¿è¡Œæ—¶åŒ–ï¼Œä½¿å¹³å°èƒ½å¤Ÿä»¥ Java çº§åˆ«çš„æ€§èƒ½ã€å¼ºç±»å‹è¯­è¨€çš„å¥å£®æ€§ï¼Œå»å®ç° è„šæœ¬è¯­è¨€çš„çƒ­æ›´æ–°å’Œçµæ´»æ€§ã€‚è¿™å¯¹äºè¿½æ±‚é«˜æ€§èƒ½ã€é«˜å¹¶å‘ã€ä¸”åŸºäº Java æŠ€æœ¯çš„ä½ä»£ç å¹³å°æ¥è¯´ï¼Œæ˜¯ä¸€ä¸ªä¸å¯æˆ–ç¼ºçš„åŠ¨æ€å¼•æ“ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»æ•°æ®åˆ°éƒ¨ç½²ï¼šæ¨è¿›ç¾å›½å·æ”¿åºœä¸­ AI agent çš„è´Ÿè´£ä»»ä½¿ç”¨]]></title>    <link>https://juejin.cn/post/7582539701146435625</link>    <guid>https://juejin.cn/post/7582539701146435625</guid>    <pubDate>2025-12-12T03:57:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582539701146435625" data-draft-id="7582808491582357540" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»æ•°æ®åˆ°éƒ¨ç½²ï¼šæ¨è¿›ç¾å›½å·æ”¿åºœä¸­ AI agent çš„è´Ÿè´£ä»»ä½¿ç”¨"/> <meta itemprop="keywords" content="Elasticsearch"/> <meta itemprop="datePublished" content="2025-12-12T03:57:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Elasticsearch"/> <meta itemprop="url" content="https://juejin.cn/user/2612095360441448"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»æ•°æ®åˆ°éƒ¨ç½²ï¼šæ¨è¿›ç¾å›½å·æ”¿åºœä¸­ AI agent çš„è´Ÿè´£ä»»ä½¿ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2612095360441448/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Elasticsearch
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T03:57:13.000Z" title="Fri Dec 12 2025 03:57:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šæ¥è‡ª ElasticÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fblog%2Fauthor%2Fdesiree--ho" title="https://www.elastic.co/blog/author/desiree--ho" target="_blank" ref="nofollow noopener noreferrer">Desiree Ho</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff266b1dfc1e4a4694b97424a0f57236~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766116632&amp;x-signature=Wzu4bLvp3LvIvy9WAhGRR02OtHw%3D" alt="" loading="lazy"/></p>
<p>äººå·¥æ™ºèƒ½ï¼ˆAIï¼‰æ­£åœ¨é‡å¡‘ç¾å›½å·æ”¿åºœæé«˜è¿è¥æ•ˆç‡å’ŒæœåŠ¡è´¨é‡çš„æ–¹å¼ã€‚ä»å¤„ç†ä¿¡æ¯è¯·æ±‚çš„èŠå¤©æœºå™¨äººåˆ°å¢å¼ºå±æœºå“åº”çš„é¢„æµ‹å·¥å…·ï¼ŒAI å·²ç»åœ¨ç®€åŒ–æ—¥å¸¸æ“ä½œã€‚æ ¹æ® <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nascio.org%2Fwp-content%2Fuploads%2F2024%2F12%2FNASCIO-2025-State-CIO-Top-10-Priorities.pdf" title="https://www.nascio.org/wp-content/uploads/2024/12/NASCIO-2025-State-CIO-Top-10-Priorities.pdf" target="_blank" ref="nofollow noopener noreferrer">NASCIO</a> 2025 å¹´å·é¦–å¸­ä¿¡æ¯å®˜ï¼ˆCIOï¼‰è°ƒæŸ¥ï¼ŒAI ç›®å‰æ˜¯å·æ”¿åºœé¢†å¯¼è€…çš„é¦–è¦æŠ€æœ¯ä¼˜å…ˆäº‹é¡¹ï¼Œä¹Ÿæ˜¯æ•´ä½“ CIO ä¼˜å…ˆäº‹é¡¹çš„ç¬¬äºŒä½ã€‚è™½ç„¶<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.businessofgovernment.org%2Fsites%2Fdefault%2Ffiles%2FAI%2520in%2520State%2520Government_0.pdf" title="https://www.businessofgovernment.org/sites/default/files/AI%20in%20State%20Government_0.pdf" target="_blank" ref="nofollow noopener noreferrer">èŠå¤©æœºå™¨äººç›®å‰å æ®ä¸»å¯¼åœ°ä½</a>ï¼ŒAI agent æ­£æˆä¸ºæå‡æ•ˆç‡ã€å“åº”èƒ½åŠ›å’ŒæœåŠ¡å½±å“åŠ›çš„ä¸‹ä¸€ä¸ªæœºä¼šã€‚</p>
<p>åœ¨æ­¤åŠ¿å¤´ä¸‹ï¼Œå„å·å¼€å§‹æ¢ç´¢é€šè¿‡ AI agent æ”¹è¿›æ²»ç†å’Œå…¬å…±æœåŠ¡çš„åˆ›æ–°æ–¹æ³•ã€‚ä»Šå¹´æ—©äº›æ—¶å€™ï¼Œå¼—å‰å°¼äºšå·æ¨å‡ºäº†å…¨å›½é¦–ä¸ª agentic AI å·¥å…·ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.governor.virginia.gov%2Fmedia%2Fgovernorvirginiagov%2Fgovernor-of-virginia%2Fpdf%2Feo%2FEO-51---First-In-The-Nation-Agentic-Artificial-Intelligence-%2528AI%2529-Empowered-Statewide-Regulatory-Review---FINAL-UPDATED.pdf" title="https://www.governor.virginia.gov/media/governorvirginiagov/governor-of-virginia/pdf/eo/EO-51---First-In-The-Nation-Agentic-Artificial-Intelligence-%28AI%29-Empowered-Statewide-Regulatory-Review---FINAL-UPDATED.pdf" target="_blank" ref="nofollow noopener noreferrer">ç”¨äºåˆ†æå·æ³•è§„å¹¶æå‡ºç®€åŒ–ç›‘ç®¡è¯­è¨€çš„æ–¹æ³•</a>ã€‚AI agent æ˜¯ä¸€ç§é…ç½®äº†è‡ªå®šä¹‰æŒ‡ä»¤å’Œå·¥å…·çš„å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ï¼Œèƒ½å¤Ÿè§£é‡Šç”¨æˆ·è¯·æ±‚å¹¶æ‰§è¡Œä»»åŠ¡ä»¥å®ç°æ—¢å®šç›®æ ‡ã€‚</p>
<p>å½“ CIO è€ƒè™‘åœ¨æ”¿åºœç³»ç»Ÿä¸­éƒ¨ç½² AI agent æ—¶ï¼Œä»ä¸€å¼€å§‹å°±å°†å¼ºæœ‰åŠ›çš„æ•°æ®å®è·µã€ç½‘ç»œå®‰å…¨å’Œæ²»ç†ç»“åˆèµ·æ¥çš„å·ï¼Œå°†ä¸ºè´Ÿè´£ä»»ã€ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„åˆ›æ–°å»ºç«‹å…¨å›½åŸºå‡†ã€‚</p>
<h2 data-id="heading-0"><strong>æ•°æ®è´¨é‡ï¼šä¿¡ä»»çš„åŸºç¡€</strong></h2>
<p>é«˜è´¨é‡æ•°æ®æ˜¯å¯ä¿¡ä¸”æœ‰æ•ˆ AI éƒ¨ç½²çš„åŸºç¡€ï¼Œå› ä¸º AI ç³»ç»Ÿä¾èµ–å‡†ç¡®ã€è‰¯å¥½ç®¡ç†çš„æ•°æ®æ¥ç”Ÿæˆå¯é æ´å¯Ÿã€‚å°½ç®¡è¿‘ä¹æˆ CIO è®¤ä¸ºæ•°æ®è´¨é‡è‡³å…³é‡è¦ï¼Œä½†ä¸åˆ°å››åˆ†ä¹‹ä¸€çš„å·æœ‰æ­£å¼çš„æ•°æ®è´¨é‡è®¡åˆ’ï¼Œè¿™ä½¿å¾—æ•°æ®æ²»ç†ä¸å–„æˆä¸ºè®¸å¤šå·çš„é•¿æœŸæŒ‘æˆ˜ã€‚ä¸å‡†ç¡®æˆ–ä¸å®Œæ•´çš„æ•°æ®å¯èƒ½è¢« AI æ”¾å¤§ï¼Œå¯¼è‡´å†³ç­–å¤±è¯¯ã€èµ„æºé”™é…å’Œå…¬ä¼—ä¿¡ä»»ä¸‹é™ã€‚</p>
<p>æ”¹å–„æ•°æ®ç®¡ç†éœ€è¦åœ¨å„æœºæ„ä¹‹é—´ä¿æŒä¸€è‡´çš„ç»„ç»‡ã€éªŒè¯å’Œå®‰å…¨å…±äº«ã€‚è¿™äº›å®è·µä¿ƒè¿›é€æ˜åº¦å’Œé—®è´£åˆ¶ï¼ŒåŒæ—¶ç¡®ä¿ AI ç”Ÿæˆçš„æ´å¯Ÿå‡†ç¡®ä¸”å…¬æ­£ã€‚å¯¹å¹²å‡€ã€ç»“æ„è‰¯å¥½çš„æ•°æ®çš„æŠ•èµ„å¯ä»¥ä¸ºåç»­æ¯ä¸ªè´Ÿè´£ä»»çš„ AI åº”ç”¨æä¾›è“å›¾ã€‚</p>
<h2 data-id="heading-1"><strong>ä»æ•°æ®ç®¡ç†åˆ° AI agent çš„è§„æ¨¡åŒ–</strong></h2>
<p>ä¸€æ—¦å»ºç«‹äº†å¼ºæœ‰åŠ›çš„æ•°æ®æ²»ç†ï¼Œä¸‹ä¸€æ­¥æ˜¯è´Ÿè´£ä»»åœ°åœ¨è¿è¥ä¸­è§„æ¨¡åŒ– AIã€‚æˆåŠŸçš„ä¸‰ä¸ªå…³é”®å› ç´ æ˜¯ï¼šäº’æ“ä½œæ€§ã€å®‰å…¨æ€§å’Œå¼€æ”¾æ ‡å‡†ã€‚</p>
<ul>
<li>
<p><strong>äº’æ“ä½œæ€§</strong>ï¼šç¡®ä¿ç³»ç»Ÿèƒ½å¤Ÿè·¨æœºæ„å…±äº«å’Œè§£é‡Šæ•°æ®ï¼Œæé«˜åè°ƒæ€§ã€å‡å°‘è¡Œæ”¿è´Ÿæ‹…å¹¶é™ä½é”™è¯¯å‘ç”Ÿç‡ã€‚</p>
</li>
<li>
<p><strong>å®‰å…¨æ€§</strong>ï¼šä¿æŠ¤æ•æ„Ÿæ•°æ®å…é­æ»¥ç”¨ï¼Œç¬¦åˆåˆè§„æ ‡å‡†ï¼Œå¹¶ç»´æŒå…¬ä¼—ä¿¡ä»»ã€‚</p>
</li>
<li>
<p><strong>å¼€æ”¾æ ‡å‡†</strong>ï¼šä½¿ AI ç³»ç»Ÿæ›´æ˜“äºå®¡è®¡å’Œé€‚åº”ï¼Œæ”¯æŒé€æ˜ã€åä½œåŠé•¿æœŸåˆ›æ–°ã€‚</p>
</li>
</ul>
<h2 data-id="heading-2"><strong>Agent Builder å¦‚ä½•å°†è´Ÿè´£ä»» AI è½åœ°</strong></h2>
<p>å·¥å…·å¦‚ Elastic <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Felasticsearch%2Fagent-builder" title="https://www.elastic.co/elasticsearch/agent-builder" target="_blank" ref="nofollow noopener noreferrer">Agent Builder</a> ä½¿æ”¿åºœèƒ½å¤Ÿå°†è¿™äº›åŸåˆ™ä»˜è¯¸å®è·µã€‚å„æœºæ„å¯ä»¥ä½¿ç”¨ Agent Builder åˆ›å»ºè‡ªå®šä¹‰ agentï¼Œé€šè¿‡å¼€æ”¾æ ‡å‡†åœ¨ç³»ç»Ÿé—´å®‰å…¨åä½œã€‚ä¾‹å¦‚ï¼Œå„æœºæ„å¯ä»¥è‡ªåŠ¨åŒ–æ¡ˆä¾‹ç®¡ç†ï¼Œä½¿ä¸åŒéƒ¨é—¨ï¼ˆå¦‚å«ç”Ÿä¸å…¬å…±æœåŠ¡éƒ¨ã€åŠ³åŠ¨éƒ¨å’Œæ•™è‚²éƒ¨ï¼‰èƒ½å¤Ÿå…±äº«æ•°æ®å¹¶åè°ƒå·¥ä½œæµç¨‹ï¼ŒåŒæ—¶ä¿æŒ<a href="https://link.juejin.cn?target=https%3A%2F%2Felasticstack.blog.csdn.net%2Farticle%2Fdetails%2F102807480" title="https://elasticstack.blog.csdn.net/article/details/102807480" target="_blank" ref="nofollow noopener noreferrer">åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶</a>å’Œåˆè§„æ€§ã€‚åœ¨å¯é ã€è‰¯å¥½æ²»ç†çš„æ•°æ®åŸºç¡€ä¸Šï¼ŒAgent Builder å¯ä»¥å¸®åŠ©æ”¿åºœå·¥ä½œäººå‘˜ç”Ÿæˆæ´å¯Ÿã€è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼Œå¹¶æ”¹å–„æ°‘ä¼—æœåŠ¡ã€‚</p>
<h2 data-id="heading-3"><strong>é€šè¿‡å…¬ç§åˆä½œæ¨è¿›è´Ÿè´£ä»» AI</strong></h2>
<p>æ²¡æœ‰ä»»ä½•å·å¯ä»¥å­¤ç«‹åœ°æ¨è¿›è´Ÿè´£ä»» AIã€‚å…¬ç§åˆä½œæä¾›äº†å®‰å…¨æœ‰æ•ˆ AI é‡‡ç”¨æ‰€éœ€çš„ä¸“ä¸šçŸ¥è¯†ã€æŠ€æœ¯æ¡†æ¶å’Œé—®è´£ç»“æ„ã€‚ç§è¥å¼€å‘è€…è´¡çŒ®å·¥ç¨‹èƒ½åŠ›å¹¶è¯†åˆ«æ–°å…´é£é™©ï¼Œè€Œæ”¿åºœé¢†å¯¼è€…ç¡®ä¿éƒ¨ç½²ç¬¦åˆæ”¿ç­–ã€ä¼¦ç†å’Œå…¬å…±åˆ©ç›Šã€‚</p>
<p>åˆä½œæ¨¡å¼å¯ä»¥åŒ…æ‹¬å…±åŒå¼€å‘äº’æ“ä½œæ€§æ¡†æ¶ã€åœ¨å—æ§ç¯å¢ƒä¸­è¿›è¡Œè¯•ç‚¹é¡¹ç›®ï¼Œæˆ–å»ºç«‹å…±äº«æ²»ç†ç»“æ„ä»¥å¼ºåŒ–ç›‘ç®¡å’Œæ•°æ®è´¨é‡ã€‚é€šè¿‡åä½œï¼Œå„å·å¯ä»¥åœ¨ä¿æŒå®‰å…¨ã€é€æ˜å’Œå…¬ä¼—ä¿¡ä»»çš„åŒæ—¶ï¼ŒåŠ é€Ÿåˆ›æ–°ã€‚</p>
<p>æ‰¿è¯ºæ¸…æ´æ•°æ®ã€å¼€æ”¾æ¶æ„å’Œç§¯æåä½œçš„æ”¿åºœï¼Œä¸ä»…èƒ½å¤Ÿç°ä»£åŒ–è¿è¥ï¼Œè¿˜èƒ½å±•ç¤ºå¯ä¿¡ã€ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„ AI å®è·µã€‚Elastic å‡†å¤‡æ”¯æŒå„å·å°†è¿™ä¸€æ„¿æ™¯è½¬åŒ–ä¸ºå¯æ“ä½œçš„æ¨¡å‹ï¼Œä¸ºå…¶ä»–å·æä¾›å€Ÿé‰´ã€‚</p>
<p><em>æœ¬å¸–ä¸­æè¿°çš„ä»»ä½•åŠŸèƒ½æˆ–ç‰¹æ€§çš„å‘å¸ƒåŠæ—¶é—´å®Œå…¨ç”± Elastic è‡ªè¡Œå†³å®šã€‚å½“å‰ä¸å¯ç”¨çš„åŠŸèƒ½æˆ–ç‰¹æ€§å¯èƒ½æ— æ³•æŒ‰æ—¶äº¤ä»˜ï¼Œç”šè‡³å¯èƒ½å®Œå…¨ä¸æä¾›ã€‚</em></p>
<p><em>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä½¿ç”¨æˆ–å¼•ç”¨äº†ç¬¬ä¸‰æ–¹ç”Ÿæˆå¼ AI å·¥å…·ï¼Œè¿™äº›å·¥å…·ç”±å„è‡ªçš„æ‰€æœ‰è€…æ‹¥æœ‰å’Œè¿è¥ã€‚Elastic å¯¹ç¬¬ä¸‰æ–¹å·¥å…·ä¸å…·å¤‡ä»»ä½•æ§åˆ¶æƒï¼Œä¹Ÿä¸å¯¹å…¶å†…å®¹ã€æ“ä½œæˆ–ä½¿ç”¨æ‰¿æ‹…ä»»ä½•è´£ä»»æˆ–ä¹‰åŠ¡ï¼Œäº¦ä¸å¯¹ä½ ä½¿ç”¨è¿™äº›å·¥å…·å¯èƒ½äº§ç”Ÿçš„ä»»ä½•æŸå¤±æˆ–æŸå®³è´Ÿè´£ã€‚è¯·åœ¨ä½¿ç”¨ AI å·¥å…·å¤„ç†ä¸ªäººã€æ•æ„Ÿæˆ–æœºå¯†ä¿¡æ¯æ—¶è°¨æ…æ“ä½œã€‚ä½ æäº¤çš„ä»»ä½•æ•°æ®å¯èƒ½ä¼šè¢«ç”¨äº AI è®­ç»ƒæˆ–å…¶ä»–ç”¨é€”ã€‚æ— æ³•ä¿è¯ä½ æä¾›çš„ä¿¡æ¯ä¼šè¢«å®‰å…¨æˆ–ä¿å¯†åœ°ä¿å­˜ã€‚ä½ åœ¨ä½¿ç”¨ä»»ä½•ç”Ÿæˆå¼ AI å·¥å…·å‰ï¼Œåº”ç†Ÿæ‚‰å…¶éšç§æ”¿ç­–å’Œä½¿ç”¨æ¡æ¬¾ã€‚</em></p>
<p><em>Elasticã€Elasticsearch åŠç›¸å…³æ ‡è¯†æ˜¯ Elasticsearch B.V. åœ¨ç¾å›½åŠå…¶ä»–å›½å®¶çš„å•†æ ‡ã€æ ‡è¯†æˆ–æ³¨å†Œå•†æ ‡ã€‚æ‰€æœ‰å…¶ä»–å…¬å¸å’Œäº§å“åç§°ä¸ºå…¶å„è‡ªæ‰€æœ‰è€…çš„å•†æ ‡ã€æ ‡è¯†æˆ–æ³¨å†Œå•†æ ‡ã€‚</em></p>
<p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fblog%2Fus-state-government-ai-agents" title="https://www.elastic.co/blog/us-state-government-ai-agents" target="_blank" ref="nofollow noopener noreferrer">www.elastic.co/blog/us-staâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨c++ä¸­ä½¿ç”¨HOOKä¿®æ”¹sleepå‡½æ•°]]></title>    <link>https://juejin.cn/post/7582510291667468339</link>    <guid>https://juejin.cn/post/7582510291667468339</guid>    <pubDate>2025-12-12T05:00:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582510291667468339" data-draft-id="7582510291667451955" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨c++ä¸­ä½¿ç”¨HOOKä¿®æ”¹sleepå‡½æ•°"/> <meta itemprop="keywords" content="C++,Linux"/> <meta itemprop="datePublished" content="2025-12-12T05:00:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="koddnty"/> <meta itemprop="url" content="https://juejin.cn/user/1215429206618441"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨c++ä¸­ä½¿ç”¨HOOKä¿®æ”¹sleepå‡½æ•°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1215429206618441/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    koddnty
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T05:00:47.000Z" title="Fri Dec 12 2025 05:00:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åœ¨c++ä¸­ä½¿ç”¨HOOKä¿®æ”¹sleepå‡½æ•°</h2>
<p>æœ¬ç¯‡æ–‡ç« å°†ä»¥sleepå‡½æ•°ä¸ºä¾‹å­ä»‹ç»å¦‚ä½•åœ¨c++ä¸­ä½¿ç”¨hookä¿®æ”¹ç³»ç»Ÿå‡½æ•°</p>
<h3 data-id="heading-1">HOOKæ˜¯ä»€ä¹ˆ</h3>
<p>Hookï¼ˆé’©å­ï¼‰æ˜¯ä¸€ç§ç¼–ç¨‹æœºåˆ¶ï¼Œå®ƒå…è®¸å¼€å‘è€…åœ¨ç¨‹åºæ‰§è¡Œçš„ç‰¹å®šç‚¹æ’å…¥è‡ªå®šä¹‰ä»£ç ï¼Œä»è€Œæ‹¦æˆªã€å¤„ç†æˆ–ä¿®æ”¹åŸæœ‰çš„å‡½æ•°è°ƒç”¨ã€æ¶ˆæ¯ä¼ é€’æˆ–ç³»ç»Ÿäº‹ä»¶ã€‚</p>
<p>é€šä¿—åœ°è¯´ï¼ŒHookå°±åƒæ˜¯ç»™ç¨‹åºå®‰è£…äº†ä¸€ä¸ªâ€œç›‘å¬å™¨â€æˆ–â€œæ‹¦æˆªå™¨â€ã€‚å½“ç›®æ ‡å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œæ§åˆ¶æƒä¼šå…ˆè½¬ç§»åˆ°ä½ çš„Hookä»£ç ï¼Œä½ å¯ä»¥åœ¨æ‰§è¡ŒåŸæœ‰æ“ä½œä¹‹å‰æˆ–ä¹‹åæ’å…¥è‡ªå®šä¹‰é€»è¾‘ï¼Œç”šè‡³å®Œå…¨æ›¿æ¢åŸæœ‰è¡Œä¸ºã€‚ä¾‹å¦‚æ¸¸æˆå¤–æŒ‚é€šè¿‡hookæ¥å¯¹æ¸¸æˆè¿è¡Œæ—¶ç”¨åˆ°çš„å‡½æ•°æˆ–å…¶ä»–APIè¿›è¡Œä¿®æ”¹æ¥å®ç°å¤–æŒ‚çš„åŠŸèƒ½ã€‚åŒæ—¶ï¼Œhookä¹Ÿå¸¸ä¸åç¨‹æ­é…ä½¿ç”¨ï¼Œä¿®æ”¹ç³»ç»Ÿå‡½æ•°æ¥ä¸ºç±»ä¼¼sleepç­‰é˜»å¡çº¿ç¨‹çš„å‡½æ•°æ·»åŠ åç¨‹çš„åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-2">å¦‚ä½•ä½¿ç”¨hookæ¥ä¿®æ”¹sleepå‡½æ•°</h3>
<h4 data-id="heading-3">ä¸‹é¢çš„ä»£ç æ˜¯æœ€ç®€å•çš„hookçš„å®ç°</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>

<span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> <span class="hljs-function"><span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> <span class="hljs-title">sleep</span><span class="hljs-params">(<span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> seconds)</span>
</span>{
    std::cout &lt;&lt; <span class="hljs-string">"æˆ‘ä»¬æˆåŠŸä¿®æ”¹äº†ç³»ç»Ÿæä¾›çš„sleepå‡½æ•°!"</span> &lt;&lt; std::endl;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test1</span><span class="hljs-params">()</span>
</span>{
    std::cout &lt;&lt; <span class="hljs-string">"ä½¿ç”¨sleepå‡½æ•°ç¡2s"</span>&lt;&lt; std::endl;
    <span class="hljs-built_in">sleep</span>(<span class="hljs-number">2</span>);
    std::cout &lt;&lt; <span class="hljs-string">"sleepå‡½æ•°ç¡å®Œäº†"</span>&lt;&lt; std::endl;
}
</code></pre>
<p>è°ƒç”¨å‡½æ•°test1(),ç¨‹åºè¿è¡Œç»“æœå¦‚ä¸‹:</p>
<pre><code class="hljs language-shell" lang="shell">ä½¿ç”¨sleepå‡½æ•°ç¡2s
æˆ‘ä»¬æˆåŠŸä¿®æ”¹äº†ç³»ç»Ÿæä¾›çš„sleepå‡½æ•°!
sleepå‡½æ•°ç¡å®Œäº†
</code></pre>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä»…åšäº†ä¸¤ä»¶äº‹</p>
<ul>
<li>å®ç°ä¸€ä¸ª<code>sleep</code>å‡½æ•°ï¼Œä¸unistd.hä¸­çš„<code>sleep</code>å‡½æ•°ç­¾åä¸€è‡´</li>
<li>ä½¿ç”¨<code>extern "C"</code>å‘Šè¯‰C++ç¼–è¯‘å™¨"æŒ‰Cè¯­è¨€çš„æ–¹å¼å¤„ç†è¿™ä¸ªå‡½æ•°"</li>
</ul>
<p>å®šä¹‰ä¸€ä¸ªç›¸åŒç­¾åçš„sleepä¸ºä»€ä¹ˆé“¾æ¥è¿‡ç¨‹ä¸­ä¸ä¼šäº§ç”Ÿé‡å®šä¹‰é—®é¢˜å‘¢ï¼Ÿåœ¨é“¾æ¥å™¨é“¾æ¥è¿‡ç¨‹ä¸­ï¼Œå‡½æ•°ç¬¦å·æœ‰ç±»ä¼¼å¼ºå¼±ç¬¦å·ä¹‹åˆ†ï¼Œåœ¨åŠ¨æ€åº“ä¸­çš„å‡½æ•°ä¼šè¢«æ–°ç›®æ ‡æ–‡ä»¶çš„å‡½æ•°<strong>æ›¿æ¢</strong>ï¼Œå› æ­¤æ­¤å¤„ç¨‹åºè¿è¡Œæ—¶ä¼šè¿è¡Œæˆ‘ä»¬é‡æ–°å†™çš„sleepå‡½æ•°è€Œä¸æ˜¯unistd.hå†…çš„ã€‚</p>
<p>è‡³äºåŠ <code>extern "C"</code>çš„ä½œç”¨,åœ¨c++ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†åŒºåˆ†ä¸åŒçš„é‡è½½å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šç»™åŒåå‡½æ•°åŠ å…¥éšå³å­—ç¬¦è¿›è¡ŒåŒºåˆ†ï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯é‡å†™sleepå‡½æ•°ï¼Œå› æ­¤è¦ç¡®ä¿å‡½æ•°åä¸unistd.hä¸­ç›¸åŒï¼Œé€šè¿‡åŠ å…¥extern "C"æ¥åšåˆ°è¿™ä¸€ç‚¹</p>
<h4 data-id="heading-4">å¯¹ä¸Šè¿°ä»£ç çš„æ”¹è¿›</h4>
<p>ä¸Šè¿°ä»£ç å­˜åœ¨å¾ˆå¤§çš„ç¼ºé™·ï¼Œæœ€ä¸»è¦çš„æ˜¯å®ƒå¤±å»äº†sleepå‡½æ•°æœ€åŸºæœ¬çš„åŠŸèƒ½ã€‚é€šå¸¸æˆ‘ä»¬åˆ©ç”¨hookä¿®æ”¹å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç»´æŒå…¶åŸæœ‰åŠŸèƒ½ã€‚æˆ‘ä»¬ä¸å¯èƒ½çœŸçš„å»å®ç°ä¸€ä¸ªå®Œæ•´çš„sleepï¼Œä½†æˆ‘ä»¬å¯ä»¥è·å¾—åŸsleepçš„å‡½æ•°æŒ‡é’ˆ</p>
<p>åœ¨ä¸åŒçš„å¹³å°æœ‰ä¸åŒçš„è·å–åº“å‡½æ•°æŒ‡é’ˆçš„æ–¹æ³•ï¼Œä¸‹é¢æ—¶åœ¨linuxå¹³å°æ¥è·å–sleepå‡½æ•°æŒ‡é’ˆçš„ä¾‹å­:</p>
<h5 data-id="heading-5">è·å–sleepå‡½æ•°æŒ‡é’ˆ</h5>
<p>linuxä¸ºè·å–åº“å‡½æ•°æŒ‡é’ˆæä¾›äº†ç‰¹å®šçš„å‡½æ•°<code>dlsym</code>ï¼Œå®šä¹‰åœ¨<code>&lt;dlfcn.h&gt;</code>ä¸­ã€‚å…¶å‡½æ•°ç­¾åä¸º:</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> *<span class="hljs-title">dlsym</span><span class="hljs-params">(<span class="hljs-type">void</span> *restrict handle, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *restrict symbol)</span></span>;
</code></pre>
<p><code>dlsym</code>è¿”å›å€¼æ˜¯å‡½æ•°æŒ‡é’ˆï¼Œå…¶ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æŒ‡å®šæŸ¥æ‰¾çš„åº“ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥å‡½æ•°åç§°ã€‚</p>
<p>åœ¨hookåœºæ™¯ä¸­ï¼Œ<code>handle</code>å‚æ•°å¸¸å–<code>RTLD_NEXT</code>ï¼Œè¡¨ç¤ºè·³è¿‡å½“å‰åº“æŸ¥æ‰¾å…¶ä»–åº“ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“<code>symbol</code>ä¼ å…¥<code>"sleep"</code>æ—¶ï¼Œ<code>dlsym</code>è·³è¿‡å½“å‰åº“æˆ‘ä»¬å®šä¹‰çš„<code>sleep</code>ï¼Œæ‰¾åˆ°äº†<code>unistd.h</code>å®šä¹‰çš„<code>sleep</code>å‡½æ•°,å¹¶è¿”å›å…¶å‡½æ•°æŒ‡é’ˆã€‚</p>
<h5 data-id="heading-6">ä»£ç æ”¹è¿›</h5>
<p>æœ‰äº†ä¸Šè¾¹æä¾›çš„å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä¿å­˜åŸæœ‰sleepå‡½æ•°å¹¶ç»™ä»–åŠ ç‚¹"å°æ–™"ï¼Œä»£ç å¦‚ä¸‹:</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;dlfcn.h&gt;</span></span>
<span class="hljs-keyword">using</span> sleep_fun_type = <span class="hljs-type">unsigned</span> <span class="hljs-built_in">int</span> (*)(<span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> seconds);

sleep_fun_type original_sleep = <span class="hljs-literal">NULL</span>;

<span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> <span class="hljs-function"><span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> <span class="hljs-title">sleep</span><span class="hljs-params">(<span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> seconds)</span>
</span>{
    std::cout &lt;&lt; <span class="hljs-string">"æˆ‘ä»¬æˆåŠŸä¿®æ”¹äº†ç³»ç»Ÿæä¾›çš„sleepå‡½æ•°!"</span> &lt;&lt; std::endl;
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">original_sleep</span>(seconds);                             <span class="hljs-comment">// &lt;-----è¿™é‡Œè°ƒç”¨æˆ‘ä»¬ä¿å­˜ä¸‹æ¥çš„åŸå§‹çš„sleep</span>
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test1</span><span class="hljs-params">()</span>
</span>{
    original_sleep = (sleep_fun_type)<span class="hljs-built_in">dlsym</span>(RTLD_NEXT, <span class="hljs-string">"sleep"</span>); <span class="hljs-comment">// &lt;-----è¿™é‡Œè·å¾—äº†unistdä¸­çš„sleep</span>

    std::cout &lt;&lt; <span class="hljs-string">"ä½¿ç”¨sleepå‡½æ•°ç¡2s"</span>&lt;&lt; std::endl;
    <span class="hljs-built_in">sleep</span>(<span class="hljs-number">2</span>);                                                   <span class="hljs-comment">// &lt;-----è¿™é‡Œè°ƒç”¨æˆ‘ä»¬è‡ªå·±å†™çš„sleep</span>
    std::cout &lt;&lt; <span class="hljs-string">"sleepå‡½æ•°ç¡å®Œäº†"</span>&lt;&lt; std::endl;
}

</code></pre>
<p>ä»£ç ç›¸è¾ƒäºå¼€å§‹ï¼Œåªåšäº†ä¸€ç‚¹æ”¹è¿›ï¼Œå³ä¿å­˜åŸå§‹<code>sleep</code>å‡½æ•°ï¼Œå¹¶åœ¨æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„<code>sleep</code>å‡½æ•°ä¸­è°ƒç”¨ä¿å­˜çš„åŸå§‹<code>sleep</code>å‡½æ•°ã€‚</p>
<p>éœ€æ³¨æ„çš„æ˜¯ï¼Œç¼–è¯‘æ—¶åº”åŠ ä¸Š<code>-ldl</code>é€‰é¡¹é“¾æ¥åŠ¨æ€åº“</p>
<h3 data-id="heading-7">æ€»ç»“</h3>
<p>ä¸Šè¿°ä»£ç ä»æœ‰è®¸å¤šä¸å®Œå–„çš„åœ°æ–¹ï¼Œå®é™…è¿‡ç¨‹ä¸­è¦æ£€æŸ¥<code>dlsym</code>è¿”å›å€¼æ˜¯å¦ä¸ºNULLç­‰é—®é¢˜ï¼ŒåŒæ—¶ä»£ç å¯¹åˆå§‹åŒ–å¹¶ä¸è§„èŒƒï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„åˆå§‹åŒ–æ–¹æ³•(gccç¼–è¯‘å™¨),ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–æ›´å…¼å®¹çš„æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp">__attribute__((constructor)) <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init_hook</span><span class="hljs-params">()</span>       <span class="hljs-comment">// gccç¼–è¯‘å™¨æä¾›ï¼Œmainå‡½æ•°è¿è¡Œå‰ï¼Œåº“å’Œå†…å­˜åˆå§‹åŒ–å®Œæˆåè¿è¡Œ</span>
</span>{
    <span class="hljs-comment">// åœ¨mainå‡½æ•°æ‰§è¡Œå‰å…ˆåˆå§‹åŒ–â€”original_sleepã€‚</span>
    original_sleep = (SleepFunc)<span class="hljs-built_in">dlsym</span>(RTLD_NEXT,<span class="hljs-string">"sleep"</span>);
}
</code></pre>
<p>æœ€åï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœé‡‡ç”¨ä¸Šè¿°æ–¹æ³•é‡æ–°å®šä¹‰sleepï¼Œä¼šä½¿æ‰€æœ‰åº“è¿è¡Œçš„sleepå‡½æ•°éƒ½æ”¹å˜æˆæˆ‘ä»¬è‡ªå·±å®šä¹‰çš„sleepï¼Œå¦‚æœè¿”å›å€¼ä¸åŸsleepå­˜åœ¨å·®å¼‚ï¼Œå¯èƒ½å¯¼è‡´ä¸€äº›å…¶ä»–çš„éšå«é—®é¢˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue ç»„ä»¶è§£è€¦å®è·µï¼šç”¨å›è°ƒå‡½æ•°æ¨¡å¼æ›¿ä»£æšä¸¾ç±»å‹ä¼ é€’]]></title>    <link>https://juejin.cn/post/7582601349578522624</link>    <guid>https://juejin.cn/post/7582601349578522624</guid>    <pubDate>2025-12-12T04:41:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582601349578522624" data-draft-id="7582529173828468770" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue ç»„ä»¶è§£è€¦å®è·µï¼šç”¨å›è°ƒå‡½æ•°æ¨¡å¼æ›¿ä»£æšä¸¾ç±»å‹ä¼ é€’"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-12-12T04:41:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹åŒ—æµ·"/> <meta itemprop="url" content="https://juejin.cn/user/1425415102792237"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue ç»„ä»¶è§£è€¦å®è·µï¼šç”¨å›è°ƒå‡½æ•°æ¨¡å¼æ›¿ä»£æšä¸¾ç±»å‹ä¼ é€’
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1425415102792237/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹åŒ—æµ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T04:41:52.000Z" title="Fri Dec 12 2025 04:41:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto;border:3px solid rgba(62,175,124,.2)}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-weight:700;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:6px;border:2px solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c}.markdown-body a:active,.markdown-body a:hover{border-bottom:1.5px solid #3eaf7c}.markdown-body a:before{content:"â‡²"}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(62,175,124,.2)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:.5rem solid;border-color:#42b983;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none}.markdown-body ul li:before{content:"â€¢";margin-right:4px;color:#3eaf7c}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Vue ç»„ä»¶è§£è€¦å®è·µï¼šç”¨å›è°ƒå‡½æ•°æ¨¡å¼æ›¿ä»£æšä¸¾ç±»å‹ä¼ é€’</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>åœ¨ Vue ç»„ä»¶å¼€å‘ä¸­ï¼Œçˆ¶å­ç»„ä»¶é€šä¿¡æ˜¯ä¸€ä¸ªå¸¸è§åœºæ™¯ã€‚å½“å­ç»„ä»¶éœ€è¦è§¦å‘çˆ¶ç»„ä»¶çš„æŸä¸ªæ“ä½œï¼Œè€Œçˆ¶ç»„ä»¶åˆéœ€è¦æ ¹æ®è§¦å‘æ¥æºæ‰§è¡Œä¸åŒé€»è¾‘æ—¶ï¼Œå¾ˆå®¹æ˜“å†™å‡ºè€¦åˆåº¦è¾ƒé«˜çš„ä»£ç ã€‚æœ¬æ–‡é€šè¿‡ä¸€ä¸ªçœŸå®çš„ç™»å½•æ¨¡å—é‡æ„æ¡ˆä¾‹ï¼Œä»‹ç»å¦‚ä½•ä½¿ç”¨å›è°ƒå‡½æ•°æ¨¡å¼æ¥è§£è€¦ç»„ä»¶ã€‚</p>
<h3 data-id="heading-2">é—®é¢˜åœºæ™¯</h3>
<h4 data-id="heading-3">ä¸šåŠ¡èƒŒæ™¯</h4>
<p>åœ¨ç™»å½•é¡µé¢ä¸­ï¼ŒéªŒè¯ç ç™»å½•ç»„ä»¶æœ‰ä¸¤ä¸ªæ“ä½œå…¥å£ï¼š</p>
<ul>
<li>
<p>ç‚¹å‡»"è·å–éªŒè¯ç "æŒ‰é’®</p>
</li>
<li>
<p>ç‚¹å‡»"ç™»å½•"æŒ‰é’®</p>
</li>
</ul>
<p>ä¸¤ä¸ªæ“ä½œéƒ½éœ€è¦æ£€æŸ¥ç”¨æˆ·æ˜¯å¦åŒæ„æœåŠ¡åè®®ã€‚å¦‚æœæœªåŒæ„ï¼Œéœ€è¦å¼¹å‡ºåè®®ç¡®è®¤å¼¹çª—ã€‚ç”¨æˆ·ç¡®è®¤åï¼Œæ ¹æ®è§¦å‘æ¥æºæ‰§è¡Œä¸åŒçš„åç»­æ“ä½œã€‚</p>
<h4 data-id="heading-4">åŸæœ‰å®ç°</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// codeLogin.enum.ts - å­ç»„ä»¶å®šä¹‰æšä¸¾</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">CodeLoginEnum</span> = {
  <span class="hljs-attr">CODE_BTN</span>: <span class="hljs-string">'code-btn'</span>,    <span class="hljs-comment">// è·å–éªŒè¯ç æŒ‰é’®</span>
  <span class="hljs-attr">LOGIN_BTN</span>: <span class="hljs-string">'login-btn'</span>   <span class="hljs-comment">// ç™»å½•æŒ‰é’®</span>
} <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;

<span class="hljs-comment">// codeLogin.vue - å­ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getCode</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (!isAgree.<span class="hljs-property">value</span>) {
    <span class="hljs-title function_">emit</span>(<span class="hljs-string">'changeCodeAgreeDisplayType'</span>, <span class="hljs-title class_">CodeLoginEnum</span>.<span class="hljs-property">CODE_BTN</span>);  <span class="hljs-comment">// å‘Šè¯‰çˆ¶ç»„ä»¶æ˜¯å“ªä¸ªæŒ‰é’®</span>
    <span class="hljs-title function_">emit</span>(<span class="hljs-string">'toggleAgreeDialog'</span>, <span class="hljs-literal">true</span>);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-comment">// ...</span>
}

<span class="hljs-comment">// login.vue - çˆ¶ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleAgreementConfirm</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (codeAgreeDisplayType.<span class="hljs-property">value</span> === <span class="hljs-title class_">CodeLoginEnum</span>.<span class="hljs-property">LOGIN_BTN</span>) {
    <span class="hljs-comment">// ç™»å½•æŒ‰é’®è§¦å‘çš„ï¼Œéœ€è¦æ ¡éªŒéªŒè¯ç </span>
    <span class="hljs-keyword">if</span> (!verifyKey.<span class="hljs-property">value</span>) {
      <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">warning</span>(<span class="hljs-string">'è¯·å…ˆè·å–éªŒè¯ç '</span>);
      <span class="hljs-keyword">return</span>;
    }
  }
  codeLoginInstance.<span class="hljs-property">value</span>?.<span class="hljs-title function_">doGetCode</span>();
}
</code></pre>
<h4 data-id="heading-5">é—®é¢˜åˆ†æ</h4>
<ol>
<li>
<p><strong>çˆ¶ç»„ä»¶ä¾èµ–å­ç»„ä»¶å†…éƒ¨ç»†èŠ‚</strong>ï¼šçˆ¶ç»„ä»¶éœ€è¦å¯¼å…¥å¹¶ç†è§£ <code>CodeLoginEnum</code></p>
</li>
<li>
<p><strong>è¿åå¼€é—­åŸåˆ™</strong>ï¼šå­ç»„ä»¶æ–°å¢æŒ‰é’®æ—¶ï¼Œçˆ¶ç»„ä»¶ä¹Ÿéœ€è¦ä¿®æ”¹</p>
</li>
<li>
<p><strong>èŒè´£ä¸æ¸…</strong>ï¼šå­ç»„ä»¶çš„ä¸šåŠ¡é€»è¾‘åˆ†æ•£åœ¨çˆ¶å­ä¸¤ä¸ªç»„ä»¶ä¸­</p>
</li>
<li>
<p><strong>å¯æµ‹è¯•æ€§å·®</strong>ï¼šçˆ¶ç»„ä»¶çš„é€»è¾‘ä¾èµ–å­ç»„ä»¶çš„æšä¸¾å®šä¹‰</p>
</li>
</ol>
<h3 data-id="heading-6">è§£å†³æ–¹æ¡ˆï¼šå›è°ƒå‡½æ•°æ¨¡å¼</h3>
<h4 data-id="heading-7">æ ¸å¿ƒæ€æƒ³</h4>
<blockquote>
<p>å­ç»„ä»¶ä¸å‘Šè¯‰çˆ¶ç»„ä»¶"æˆ‘æ˜¯è°"ï¼Œè€Œæ˜¯å‘Šè¯‰çˆ¶ç»„ä»¶"ç¡®è®¤åè¯·é€šçŸ¥æˆ‘"</p>
</blockquote>
<p>å°†"åç»­è¦æ‰§è¡Œçš„æ“ä½œ"å°è£…ä¸ºå›è°ƒå‡½æ•°ï¼Œä¿å­˜åœ¨å­ç»„ä»¶å†…éƒ¨ã€‚çˆ¶ç»„ä»¶åªéœ€è¦åœ¨é€‚å½“æ—¶æœºé€šçŸ¥å­ç»„ä»¶æ‰§è¡Œå³å¯ã€‚</p>
<h4 data-id="heading-8">é‡æ„åçš„å®ç°</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// codeLogin.vue - å­ç»„ä»¶</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">PendingCallback</span> = (<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>) | <span class="hljs-literal">null</span>;
<span class="hljs-keyword">const</span> pendingCallback = ref&lt;<span class="hljs-title class_">PendingCallback</span>&gt;(<span class="hljs-literal">null</span>);

<span class="hljs-keyword">const</span> <span class="hljs-title function_">getCode</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (!isAgree.<span class="hljs-property">value</span>) {
    <span class="hljs-comment">// ä¿å­˜å›è°ƒï¼šåè®®ç¡®è®¤åæ‰§è¡Œè·å–éªŒè¯ç </span>
    pendingCallback.<span class="hljs-property">value</span> = <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">executeGetCode</span>();
    };
    <span class="hljs-title function_">emit</span>(<span class="hljs-string">'toggleAgreeDialog'</span>, <span class="hljs-literal">true</span>);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-title function_">executeGetCode</span>();
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">codeLogin</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (!isAgree.<span class="hljs-property">value</span>) {
    <span class="hljs-comment">// ä¿å­˜å›è°ƒï¼šåè®®ç¡®è®¤åæ‰§è¡Œç™»å½•</span>
    pendingCallback.<span class="hljs-property">value</span> = <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">emit</span>(<span class="hljs-string">'codeLogin'</span>, mobileValue.<span class="hljs-property">value</span>, areaCodeValue.<span class="hljs-property">value</span>, verifyCodeArg.<span class="hljs-property">value</span>);
    };
    <span class="hljs-title function_">emit</span>(<span class="hljs-string">'toggleAgreeDialog'</span>, <span class="hljs-literal">true</span>);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-title function_">emit</span>(<span class="hljs-string">'codeLogin'</span>, mobileValue.<span class="hljs-property">value</span>, areaCodeValue.<span class="hljs-property">value</span>, verifyCodeArg.<span class="hljs-property">value</span>);
}

<span class="hljs-comment">// ä¾›çˆ¶ç»„ä»¶è°ƒç”¨</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">onAgreementConfirmed</span> = (<span class="hljs-params"/>) =&gt; {
  pendingCallback.<span class="hljs-property">value</span>?.();
  pendingCallback.<span class="hljs-property">value</span> = <span class="hljs-literal">null</span>;
}

<span class="hljs-title function_">defineExpose</span>({ onAgreementConfirmed });
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// login.vue - çˆ¶ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleAgreementConfirm</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">toggleIsAgree</span>(<span class="hljs-literal">true</span>);
  <span class="hljs-title function_">toggleAgreeDialog</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isAccount</span>()) {
    <span class="hljs-title function_">doLoginFn</span>(loginTempData);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// ç®€å•é€šçŸ¥å­ç»„ä»¶æ‰§è¡Œå›è°ƒï¼Œæ— éœ€çŸ¥é“å…·ä½“æ˜¯ä»€ä¹ˆæ“ä½œ</span>
    codeLoginInstance.<span class="hljs-property">value</span>?.<span class="hljs-title function_">onAgreementConfirmed</span>();
  }
}
</code></pre>
<h4 data-id="heading-9">æ•°æ®æµå¯¹æ¯”</h4>
<p><strong>é‡æ„å‰ï¼š</strong></p>
<pre><code class="hljs">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  å‘é€æŒ‰é’®ç±»å‹   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  æ ¹æ®ç±»å‹åˆ¤æ–­   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å­ç»„ä»¶  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚ çˆ¶ç»„ä»¶  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚ å­ç»„ä»¶  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>é‡æ„åï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  ä¿å­˜å›è°ƒ      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  é€šçŸ¥æ‰§è¡Œ       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å­ç»„ä»¶  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚ çˆ¶ç»„ä»¶  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚ å­ç»„ä»¶  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  è¯·æ±‚æ˜¾ç¤ºå¼¹çª—   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  onConfirmed   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            (ä¸ä¼ ç±»å‹)                   (ä¸ä¼ å‚æ•°)
</code></pre>
<h3 data-id="heading-10">æ–¹æ¡ˆå¯¹æ¯”</h3>



































<table><thead><tr><th>ç»´åº¦</th><th>æšä¸¾ç±»å‹ä¼ é€’</th><th>å›è°ƒå‡½æ•°æ¨¡å¼</th></tr></thead><tbody><tr><td>è€¦åˆåº¦</td><td>é«˜ï¼Œçˆ¶ç»„ä»¶ä¾èµ–å­ç»„ä»¶æšä¸¾</td><td>ä½ï¼Œçˆ¶ç»„ä»¶åªè°ƒç”¨æ–¹æ³•</td></tr><tr><td>æ‰©å±•æ€§</td><td>å·®ï¼Œæ–°å¢ç±»å‹éœ€æ”¹ä¸¤å¤„</td><td>å¥½ï¼Œåªæ”¹å­ç»„ä»¶</td></tr><tr><td>èŒè´£åˆ’åˆ†</td><td>æ¨¡ç³Šï¼Œé€»è¾‘åˆ†æ•£</td><td>æ¸…æ™°ï¼Œå­ç»„ä»¶è‡ªæ²»</td></tr><tr><td>ä»£ç é‡</td><td>éœ€è¦æšä¸¾æ–‡ä»¶</td><td>æ— é¢å¤–æ–‡ä»¶</td></tr><tr><td>å¯æµ‹è¯•æ€§</td><td>å·®ï¼Œä¾èµ–å¤–éƒ¨æšä¸¾</td><td>å¥½ï¼Œé€»è¾‘å†…èš</td></tr></tbody></table>
<h3 data-id="heading-11">é€‚ç”¨åœºæ™¯</h3>
<p>å›è°ƒå‡½æ•°æ¨¡å¼é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p>
<ol>
<li>
<p><strong>å¼‚æ­¥ç¡®è®¤æµç¨‹</strong>ï¼šå¦‚æœ¬æ–‡çš„åè®®ç¡®è®¤ã€äºŒæ¬¡ç¡®è®¤å¼¹çª—ç­‰</p>
</li>
<li>
<p><strong>å¤šå…¥å£å•å‡ºå£</strong>ï¼šå¤šä¸ªè§¦å‘ç‚¹ï¼Œä½†åç»­å¤„ç†ç”±åŒä¸€ä¸ªç»„ä»¶è´Ÿè´£</p>
</li>
<li>
<p><strong>å­ç»„ä»¶ä¸šåŠ¡è‡ªæ²»</strong>ï¼šå­ç»„ä»¶çš„ä¸šåŠ¡é€»è¾‘ä¸åº”è¯¥æ³„éœ²ç»™çˆ¶ç»„ä»¶</p>
</li>
</ol>
<h3 data-id="heading-12">æ³¨æ„äº‹é¡¹</h3>
<ol>
<li>
<p><strong>å›è°ƒæ¸…ç†</strong>ï¼šæ‰§è¡Œå®Œå›è°ƒåè®°å¾—ç½®ç©ºï¼Œé¿å…é‡å¤æ‰§è¡Œ</p>
</li>
<li>
<p><strong>é”™è¯¯å¤„ç†</strong>ï¼šå›è°ƒæ‰§è¡Œå¯èƒ½å¤±è´¥ï¼Œéœ€è¦è€ƒè™‘å¼‚å¸¸æƒ…å†µ</p>
</li>
<li>
<p><strong>çŠ¶æ€åŒæ­¥</strong>ï¼šç¡®ä¿å›è°ƒæ‰§è¡Œæ—¶ï¼Œç›¸å…³çŠ¶æ€ï¼ˆå¦‚ <code>isAgree</code>ï¼‰å·²æ›´æ–°</p>
</li>
</ol>
<h3 data-id="heading-13">æ€»ç»“</h3>
<p>ç»„ä»¶è§£è€¦çš„æ ¸å¿ƒåŸåˆ™æ˜¯<strong>è®©æ¯ä¸ªç»„ä»¶åªå…³å¿ƒè‡ªå·±çš„èŒè´£</strong>ã€‚å½“å‘ç°çˆ¶ç»„ä»¶éœ€è¦äº†è§£å­ç»„ä»¶çš„å†…éƒ¨å®ç°ç»†èŠ‚æ—¶ï¼Œå°±æ˜¯é‡æ„çš„ä¿¡å·ã€‚</p>
<p>å›è°ƒå‡½æ•°æ¨¡å¼æ˜¯ä¸€ç§ç®€å•æœ‰æ•ˆçš„è§£è€¦æ‰‹æ®µï¼Œå®ƒå°†"åšä»€ä¹ˆ"çš„å†³ç­–æƒç•™ç»™å­ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶åªè´Ÿè´£"ä½•æ—¶åš"çš„åè°ƒã€‚è¿™ç§æ§åˆ¶åè½¬çš„æ€æƒ³ï¼Œåœ¨å¾ˆå¤šè®¾è®¡æ¨¡å¼ä¸­éƒ½æœ‰ä½“ç°ï¼Œå€¼å¾—åœ¨æ—¥å¸¸å¼€å‘ä¸­çµæ´»è¿ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue ä»»åŠ¡æ¸…å•å¼€å‘ï¼šæ•°æ®é©±åŠ¨ vs ä¼ ç»Ÿ DOM æ“ä½œ]]></title>    <link>https://juejin.cn/post/7582519152565862415</link>    <guid>https://juejin.cn/post/7582519152565862415</guid>    <pubDate>2025-12-12T05:04:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582519152565862415" data-draft-id="7582475416190779427" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue ä»»åŠ¡æ¸…å•å¼€å‘ï¼šæ•°æ®é©±åŠ¨ vs ä¼ ç»Ÿ DOM æ“ä½œ"/> <meta itemprop="keywords" content="JavaScript,Vue.js,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-12T05:04:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†»æ¢¨æ”¿å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/2373184444182659"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue ä»»åŠ¡æ¸…å•å¼€å‘ï¼šæ•°æ®é©±åŠ¨ vs ä¼ ç»Ÿ DOM æ“ä½œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2373184444182659/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†»æ¢¨æ”¿å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T05:04:17.000Z" title="Fri Dec 12 2025 05:04:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Vue ä»»åŠ¡æ¸…å•å¼€å‘ï¼šæ•°æ®é©±åŠ¨ vs ä¼ ç»Ÿ DOM æ“ä½œ</h2>
<p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œä»»åŠ¡æ¸…å•æ˜¯ä¸€ä¸ªå¸¸è§çš„æ¡ˆä¾‹ï¼Œé€šè¿‡è¿™ä¸ªæ¡ˆä¾‹æˆ‘ä»¬å¯ä»¥æ¸…æ™°å¯¹æ¯”ä¼ ç»Ÿ DOM æ“ä½œä¸ Vue æ•°æ®é©±åŠ¨å¼€å‘çš„å·®å¼‚ã€‚æœ¬æ–‡å°†ç»“åˆå…·ä½“ä»£ç ï¼Œè§£æ Vue çš„æ ¸å¿ƒæ€æƒ³å’Œå¸¸ç”¨ APIã€‚</p>
<h3 data-id="heading-1">ä¼ ç»Ÿå¼€å‘æ–¹å¼çš„å±€é™</h3>
<p>ä¼ ç»Ÿ JavaScript å¼€å‘ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨æ“ä½œ DOM å…ƒç´ æ¥å®ç°åŠŸèƒ½ã€‚ä»¥ä¸‹ä»£ç ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"todo-input"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-comment">// ä¼ ç»Ÿæ–¹å¼éœ€è¦å…ˆè·å–DOMå…ƒç´ </span>
    <span class="hljs-keyword">const</span> app = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'app'</span>);
    <span class="hljs-keyword">const</span> todoInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'todo-input'</span>);
    
    <span class="hljs-comment">// æ‰‹åŠ¨ç»‘å®šäº‹ä»¶å¹¶æ“ä½œDOM</span>
    todoInput.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'change'</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
        <span class="hljs-keyword">const</span> todo = event.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>();
        <span class="hljs-keyword">if</span>(!todo){
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·è¾“å…¥ä»»åŠ¡'</span>);
            <span class="hljs-keyword">return</span> ;
        }<span class="hljs-keyword">else</span>{
            <span class="hljs-comment">// ç›´æ¥ä¿®æ”¹DOMå†…å®¹</span>
            app.<span class="hljs-property">innerHTML</span> = todo;
        }
    })
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>è¿™ç§æ–¹å¼çš„ç‰¹ç‚¹æ˜¯ï¼š</p>
<ul>
<li>éœ€è¦æ‰‹åŠ¨è·å– DOM å…ƒç´ </li>
<li>å‘½ä»¤å¼åœ°æ“ä½œ DOM è¿›è¡Œæ›´æ–°</li>
<li>ä¸šåŠ¡é€»è¾‘ä¸ DOM æ“ä½œæ··æ‚</li>
<li>éšç€åŠŸèƒ½å¤æ‚ï¼Œä»£ç ä¼šå˜å¾—éš¾ä»¥ç»´æŠ¤</li>
</ul>
<h3 data-id="heading-2">Vue çš„æ•°æ®é©±åŠ¨å¼€å‘ç†å¿µ</h3>
<p>Vue é‡‡ç”¨äº†å®Œå…¨ä¸åŒçš„æ€è·¯ï¼šå¼€å‘è€…åªéœ€å…³æ³¨æ•°æ®æœ¬èº«ï¼Œè€Œé DOM æ“ä½œã€‚ä»¥ä»»åŠ¡æ¸…å•ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æ•°æ®ç»‘å®š --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>{{ title }}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- åŒå‘æ•°æ®ç»‘å®š --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"title"</span> @<span class="hljs-attr">keydown.enter</span>=<span class="hljs-string">"addTodo"</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æ¡ä»¶æ¸²æŸ“ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"todos.length"</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- å¾ªç¯æ¸²æŸ“ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"todo in todos"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"todo.id"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"todo.done"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"{done: todo.done}"</span>&gt;</span>{{ todo.title }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-else</span>&gt;</span>æš‚æ— è®¡åˆ’<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p>Vue çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šä¸å†å…³å¿ƒé¡µé¢å…ƒç´ å¦‚ä½•æ“ä½œï¼Œåªå…³æ³¨æ•°æ®å¦‚ä½•å˜åŒ–ã€‚å½“æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶ï¼ŒVue ä¼šè‡ªåŠ¨æ›´æ–° DOMï¼Œå¼€å‘è€…æ— éœ€æ‰‹åŠ¨æ“ä½œã€‚</p>
<h3 data-id="heading-3">Vue å¸¸ç”¨ API è§£æ</h3>
<ol>
<li>
<p><strong>v-model åŒå‘æ•°æ®ç»‘å®š</strong></p>
<pre><code class="hljs language-ini" lang="ini">&lt;input <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> v-model=<span class="hljs-string">"title"</span>&gt;
</code></pre>
<p>å®ç°è¡¨å•è¾“å…¥ä¸æ•°æ®çš„åŒå‘ç»‘å®šï¼Œè¾“å…¥æ¡†çš„å˜åŒ–ä¼šè‡ªåŠ¨æ›´æ–°æ•°æ®ï¼Œæ•°æ®çš„å˜åŒ–ä¹Ÿä¼šè‡ªåŠ¨åæ˜ åˆ°è¾“å…¥æ¡†ã€‚</p>
</li>
<li>
<p><strong>v-for å¾ªç¯æ¸²æŸ“</strong></p>
<pre><code class="hljs language-ini" lang="ini">&lt;li <span class="hljs-attr">v-for</span>=<span class="hljs-string">"todo in todos"</span> :key=<span class="hljs-string">"todo.id"</span>&gt;
</code></pre>
<p>åŸºäºæ•°ç»„æ¸²æŸ“åˆ—è¡¨ï¼Œ<code>:key</code>ç”¨äºæ ‡è¯†æ¯ä¸ªå…ƒç´ çš„å”¯ä¸€æ€§ï¼Œæé«˜æ¸²æŸ“æ€§èƒ½ã€‚</p>
</li>
<li>
<p><strong>v-if/v-else æ¡ä»¶æ¸²æŸ“</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"todos.length"</span>&gt;</span>
  ...
<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-else</span>&gt;</span>æš‚æ— è®¡åˆ’<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>æ ¹æ®æ¡ä»¶åŠ¨æ€æ¸²æŸ“ä¸åŒçš„å†…å®¹ï¼Œå½“<code>todos</code>æ•°ç»„ä¸ºç©ºæ—¶æ˜¾ç¤º "æš‚æ— è®¡åˆ’"ã€‚</p>
</li>
<li>
<p><strong>:class åŠ¨æ€ç±»ç»‘å®š</strong></p>
<pre><code class="hljs language-css" lang="css">&lt;<span class="hljs-selector-tag">span</span> :class=<span class="hljs-string">"{done: todo.done}"</span>&gt;{{ todo<span class="hljs-selector-class">.title</span> }}&lt;/<span class="hljs-selector-tag">span</span>&gt;
</code></pre>
<p>å½“<code>todo.done</code>ä¸º<code>true</code>æ—¶ï¼Œè‡ªåŠ¨ä¸ºå…ƒç´ æ·»åŠ <code>done</code>ç±»ï¼Œå®ç°å®ŒæˆçŠ¶æ€çš„æ ·å¼å˜åŒ–ã€‚</p>
</li>
<li>
<p><strong>@äº‹ä»¶ç›‘å¬</strong></p>
<pre><code class="hljs language-ini" lang="ini">&lt;input <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> @keydown.enter=<span class="hljs-string">"addTodo"</span>&gt;
</code></pre>
<p>ç›‘å¬é”®ç›˜å›è½¦äº‹ä»¶ï¼Œè§¦å‘<code>addTodo</code>æ–¹æ³•ï¼Œ<code>@</code>æ˜¯<code>v-bind:</code>çš„ç¼©å†™ã€‚</p>
</li>
<li>
<p><strong>computed è®¡ç®—å±æ€§</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è®¡ç®—æœªå®Œæˆçš„ä»»åŠ¡æ•°é‡</span>
<span class="hljs-keyword">const</span> active = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> todos.<span class="hljs-property">value</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> !todo.<span class="hljs-property">done</span>).<span class="hljs-property">length</span>
})

<span class="hljs-comment">// å…¨é€‰åŠŸèƒ½çš„å®ç°</span>
<span class="hljs-keyword">const</span> allDone = <span class="hljs-title function_">computed</span>({
  <span class="hljs-title function_">get</span>(<span class="hljs-params"/>){
    <span class="hljs-keyword">return</span> todos.<span class="hljs-property">value</span>.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">done</span>)
  },
  <span class="hljs-title function_">set</span>(<span class="hljs-params">val</span>){
    todos.<span class="hljs-property">value</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">done</span> = val)
  }
})
</code></pre>
<p>è®¡ç®—å±æ€§å…·æœ‰ç¼“å­˜ç‰¹æ€§ï¼Œåªæœ‰ä¾èµ–çš„æ•°æ®å˜åŒ–æ—¶æ‰ä¼šé‡æ–°è®¡ç®—ï¼Œç›¸æ¯”æ–¹æ³•è°ƒç”¨æ›´èŠ‚çœæ€§èƒ½ã€‚å…¨é€‰åŠŸèƒ½å±•ç¤ºäº†è®¡ç®—å±æ€§çš„é«˜çº§ç”¨æ³•ï¼Œé€šè¿‡<code>get</code>å’Œ<code>set</code>å®ç°åŒå‘ç»‘å®šã€‚</p>
</li>
<li>
<p><strong>ref å“åº”å¼æ•°æ®</strong></p>
<pre><code class="hljs language-csharp" lang="csharp">import { <span class="hljs-keyword">ref</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">const</span> title = <span class="hljs-keyword">ref</span>(<span class="hljs-string">""</span>);
<span class="hljs-keyword">const</span> todos = <span class="hljs-keyword">ref</span>([...])
</code></pre>
<p>åˆ›å»ºå“åº”å¼æ•°æ®ï¼Œå½“è¿™äº›æ•°æ®å˜åŒ–æ—¶ï¼ŒVue ä¼šè‡ªåŠ¨æ›´æ–°ç›¸å…³çš„ DOMã€‚</p>
</li>
</ol>
<h3 data-id="heading-4">æ€»ç»“</h3>
<p>Vue é€šè¿‡æ•°æ®é©±åŠ¨çš„æ–¹å¼ï¼Œæå¤§ç®€åŒ–äº†å‰ç«¯å¼€å‘æµç¨‹ï¼š</p>
<ul>
<li>å¼€å‘è€…å¯ä»¥ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘å’Œæ•°æ®å¤„ç†</li>
<li>å‡å°‘äº†å¤§é‡æ‰‹åŠ¨ DOM æ“ä½œçš„ä»£ç </li>
<li>æä¾›äº†ç®€æ´ç›´è§‚çš„ APIï¼Œé™ä½å­¦ä¹ æˆæœ¬</li>
<li>å†…ç½®çš„æ€§èƒ½ä¼˜åŒ–ï¼ˆå¦‚è®¡ç®—å±æ€§ç¼“å­˜ï¼‰è®©åº”ç”¨è¿è¡Œæ›´é«˜æ•ˆ</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring Bootæ¥å£å›½é™…åŒ–å¼‚å¸¸ä¿¡æ¯æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7582510291667910707</link>    <guid>https://juejin.cn/post/7582510291667910707</guid>    <pubDate>2025-12-12T05:52:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582510291667910707" data-draft-id="7582510291667877939" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring Bootæ¥å£å›½é™…åŒ–å¼‚å¸¸ä¿¡æ¯æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="åç«¯,Spring Boot,Java"/> <meta itemprop="datePublished" content="2025-12-12T05:52:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆå“ˆå“ˆç¬‘ä»€ä¹ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/808832912075352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring Bootæ¥å£å›½é™…åŒ–å¼‚å¸¸ä¿¡æ¯æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/808832912075352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆå“ˆå“ˆç¬‘ä»€ä¹ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T05:52:58.000Z" title="Fri Dec 12 2025 05:52:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¦å®ç°Javaåç«¯æ¥å£æ ¹æ®è¯·æ±‚å¤´çš„è¯­è¨€å­—æ®µè¿”å›å¯¹åº”è¯­è¨€çš„å¼‚å¸¸ä¿¡æ¯ï¼Œæ ¸å¿ƒæ€è·¯æ˜¯<strong>å›½é™…åŒ–é…ç½® + å…¨å±€å¼‚å¸¸å¤„ç† + è¯·æ±‚å¤´è¯­è¨€è§£æ</strong>ã€‚ä»¥ä¸‹æ˜¯åŸºäºSpring Bootçš„å®Œæ•´å®ç°æ–¹æ¡ˆï¼š</p>
<h3 data-id="heading-0">ä¸€ã€æ•´ä½“æ–¹æ¡ˆè®¾è®¡</h3>
<ol>
<li><strong>è¯­è¨€æ ‡è¯†çº¦å®š</strong>ï¼šè¯·æ±‚å¤´ä¸­è‡ªå®šä¹‰<code>lang</code>å­—æ®µï¼ˆæˆ–å¤ç”¨<code>Accept-Language</code>ï¼‰ï¼Œå€¼å¦‚<code>zh-CN</code>ï¼ˆä¸­æ–‡ï¼‰ã€<code>en-US</code>ï¼ˆè‹±æ–‡ï¼‰ï¼Œé»˜è®¤å€¼<code>zh-CN</code>ã€‚</li>
<li><strong>å›½é™…åŒ–èµ„æºæ–‡ä»¶</strong>ï¼šå­˜æ”¾ä¸åŒè¯­è¨€çš„é”™è¯¯ä¿¡æ¯æ¨¡æ¿ã€‚</li>
<li><strong>è‡ªå®šä¹‰å¼‚å¸¸ç±»</strong>ï¼šæºå¸¦é”™è¯¯ç å’Œå‚æ•°ï¼Œä¾¿äºåŒ¹é…å›½é™…åŒ–ä¿¡æ¯ã€‚</li>
<li><strong>è¯­è¨€è§£æå·¥å…·</strong>ï¼šä»è¯·æ±‚å¤´æå–è¯­è¨€æ ‡è¯†ï¼Œè½¬æ¢ä¸º<code>Locale</code>å¯¹è±¡ã€‚</li>
<li><strong>å…¨å±€å¼‚å¸¸å¤„ç†å™¨</strong>ï¼šæ•è·å¼‚å¸¸åï¼Œæ ¹æ®è¯­è¨€è§£æç»“æœåŠ è½½å¯¹åº”è¯­è¨€çš„é”™è¯¯ä¿¡æ¯å¹¶è¿”å›ã€‚</li>
<li><strong>MessageSourceé…ç½®</strong>ï¼šåŠ è½½å›½é™…åŒ–èµ„æºæ–‡ä»¶ï¼Œæ”¯æŒå‚æ•°æ›¿æ¢ã€‚</li>
</ol>
<h3 data-id="heading-1">äºŒã€å…·ä½“å®ç°æ­¥éª¤</h3>
<h4 data-id="heading-2">1. é…ç½®å›½é™…åŒ–èµ„æºæ–‡ä»¶</h4>
<p>åœ¨<code>src/main/resources</code>ä¸‹åˆ›å»º<code>i18n</code>ç›®å½•ï¼Œå­˜æ”¾å¤šè¯­è¨€é…ç½®æ–‡ä»¶ï¼š</p>
<ul>
<li>
<p><strong>messages_zh_CN.properties</strong>ï¼ˆä¸­æ–‡ï¼‰</p>
<ul>
<li>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ä¸šåŠ¡å¼‚å¸¸</span>
<span class="hljs-attr">error.user.not.found</span>=ç”¨æˆ·ä¸å­˜åœ¨ï¼Œç”¨æˆ·IDï¼š{<span class="hljs-number">0</span>}
<span class="hljs-attr">error.param.invalid</span>=å‚æ•°æ— æ•ˆï¼Œå‚æ•°åï¼š{<span class="hljs-number">0</span>}
<span class="hljs-comment"># ç³»ç»Ÿå¼‚å¸¸</span>
<span class="hljs-attr">error.system.error</span>=ç³»ç»Ÿå†…éƒ¨é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>messages_en_US.properties</strong>ï¼ˆè‹±æ–‡ï¼‰</p>
<ul>
<li>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ä¸šåŠ¡å¼‚å¸¸</span>
<span class="hljs-attr">error.user.not.found</span>=User not found, User ID: {<span class="hljs-number">0</span>}
<span class="hljs-attr">error.param.invalid</span>=Invalid parameter, Parameter name: {<span class="hljs-number">0</span>}
<span class="hljs-comment"># ç³»ç»Ÿå¼‚å¸¸</span>
<span class="hljs-attr">error.system.error</span>=System internal error, please try again later
</code></pre>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-3">2. è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸ç±»</h4>
<p>åˆ›å»º<code>BusinessException</code>ï¼Œç”¨äºæŠ›å‡ºä¸šåŠ¡ç›¸å…³å¼‚å¸¸ï¼Œæºå¸¦é”™è¯¯ç å’Œå‚æ•°ï¼š</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-keyword">package</span> com.example.demo.exception;

<span class="hljs-keyword">import</span> lombok.<span class="hljs-type">Getter</span>;

<span class="hljs-comment">/**
 * è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸
 */</span>
<span class="hljs-meta">@Getter</span>
public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BusinessException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">RuntimeException</span> </span>{
    <span class="hljs-comment">// é”™è¯¯ç ï¼ˆå¯¹åº”å›½é™…åŒ–é…ç½®æ–‡ä»¶çš„keyï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> errorCode;
    <span class="hljs-comment">// é”™è¯¯ä¿¡æ¯å‚æ•°ï¼ˆç”¨äºæ›¿æ¢å›½é™…åŒ–æ¨¡æ¿ä¸­çš„å ä½ç¬¦ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Object</span>[] args;

    public <span class="hljs-type">BusinessException</span>(<span class="hljs-type">String</span> errorCode) {
        <span class="hljs-keyword">this</span>(errorCode, <span class="hljs-literal">null</span>);
    }

    public <span class="hljs-type">BusinessException</span>(<span class="hljs-type">String</span> errorCode, <span class="hljs-type">Object</span>... args) {
        <span class="hljs-keyword">super</span>(errorCode);
        <span class="hljs-keyword">this</span>.errorCode = errorCode;
        <span class="hljs-keyword">this</span>.args = args;
    }
}
</code></pre>
<h4 data-id="heading-4">3. è¯­è¨€è§£æå·¥å…·ç±»</h4>
<p>åˆ›å»º<code>LocaleUtils</code>ï¼Œä»Httpè¯·æ±‚å¤´è§£æè¯­è¨€æ ‡è¯†ï¼Œè½¬æ¢ä¸º<code>Locale</code>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.demo.utils;

<span class="hljs-keyword">import</span> jakarta.servlet.http.HttpServletRequest;
<span class="hljs-keyword">import</span> java.util.Locale;

<span class="hljs-comment">/**
 * è¯­è¨€è§£æå·¥å…·ç±»
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LocaleUtils</span> {
    <span class="hljs-comment">// è¯·æ±‚å¤´ä¸­è¯­è¨€å­—æ®µåï¼ˆè‡ªå®šä¹‰ï¼Œä¹Ÿå¯å¤ç”¨Accept-Languageï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">LANG_HEADER</span> <span class="hljs-operator">=</span> <span class="hljs-string">"lang"</span>;
    <span class="hljs-comment">// é»˜è®¤è¯­è¨€</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Locale</span> <span class="hljs-variable">DEFAULT_LOCALE</span> <span class="hljs-operator">=</span> Locale.SIMPLIFIED_CHINESE;

    <span class="hljs-comment">/**
     * ä»è¯·æ±‚å¤´è§£æLocale
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Locale <span class="hljs-title function_">getLocaleFromRequest</span><span class="hljs-params">(HttpServletRequest request)</span> {
        <span class="hljs-keyword">if</span> (request == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> DEFAULT_LOCALE;
        }
        <span class="hljs-comment">// è·å–è¯·æ±‚å¤´ä¸­çš„langå€¼</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">lang</span> <span class="hljs-operator">=</span> request.getHeader(LANG_HEADER);
        <span class="hljs-keyword">if</span> (lang == <span class="hljs-literal">null</span> || lang.trim().isEmpty()) {
            <span class="hljs-keyword">return</span> DEFAULT_LOCALE;
        }
        <span class="hljs-comment">// è§£ælangå€¼ï¼ˆæ”¯æŒzh-CNã€en-USã€zhã€enç­‰æ ¼å¼ï¼‰</span>
        String[] langParts = lang.split(<span class="hljs-string">"-"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">switch</span> (langParts.length) {
            <span class="hljs-keyword">case</span> <span class="hljs-number">1</span> -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Locale</span>(langParts[<span class="hljs-number">0</span>]); <span class="hljs-comment">// å¦‚zh -&gt; Locale("zh")</span>
            <span class="hljs-keyword">case</span> <span class="hljs-number">2</span> -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Locale</span>(langParts[<span class="hljs-number">0</span>], langParts[<span class="hljs-number">1</span>]); <span class="hljs-comment">// å¦‚zh-CN -&gt; Locale("zh", "CN")</span>
            <span class="hljs-keyword">default</span> -&gt; DEFAULT_LOCALE;
        };
    }
}
</code></pre>
<h4 data-id="heading-5">4. é…ç½®MessageSourceï¼ˆåŠ è½½å›½é™…åŒ–èµ„æºï¼‰</h4>
<p>åœ¨Spring Booté…ç½®ç±»ä¸­æ³¨å†Œ<code>MessageSource</code> Beanï¼ŒåŠ è½½å›½é™…åŒ–èµ„æºæ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.demo.config;

<span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;
<span class="hljs-keyword">import</span> org.springframework.context.support.ResourceBundleMessageSource;
<span class="hljs-keyword">import</span> org.springframework.web.servlet.LocaleResolver;
<span class="hljs-keyword">import</span> org.springframework.web.servlet.i18n.AcceptHeaderLocaleResolver;

<span class="hljs-keyword">import</span> java.nio.charset.StandardCharsets;
<span class="hljs-keyword">import</span> java.util.Locale;

<span class="hljs-comment">/**
 * å›½é™…åŒ–é…ç½®
 */</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">I18nConfig</span> {

    <span class="hljs-comment">/**
     * é…ç½®MessageSourceï¼ŒåŠ è½½å›½é™…åŒ–èµ„æºæ–‡ä»¶
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> ResourceBundleMessageSource <span class="hljs-title function_">messageSource</span><span class="hljs-params">()</span> {
        <span class="hljs-type">ResourceBundleMessageSource</span> <span class="hljs-variable">messageSource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResourceBundleMessageSource</span>();
        <span class="hljs-comment">// æŒ‡å®šèµ„æºæ–‡ä»¶åŸºç¡€åï¼ˆi18nç›®å½•ä¸‹çš„messagesï¼‰</span>
        messageSource.setBasename(<span class="hljs-string">"i18n/messages"</span>);
        <span class="hljs-comment">// è®¾ç½®ç¼–ç ï¼Œé¿å…ä¸­æ–‡ä¹±ç </span>
        messageSource.setDefaultEncoding(StandardCharsets.UTF_8.name());
        <span class="hljs-comment">// é»˜è®¤è¯­è¨€</span>
        messageSource.setDefaultLocale(Locale.SIMPLIFIED_CHINESE);
        <span class="hljs-comment">// ç¼“å­˜æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œå¼€å‘æ—¶è®¾ä¸º0ï¼Œç”Ÿäº§å¯è®¾ä¸º3600</span>
        messageSource.setCacheSeconds(<span class="hljs-number">0</span>);
        <span class="hljs-keyword">return</span> messageSource;
    }

    <span class="hljs-comment">/**
     * é…ç½®LocaleResolverï¼ˆå¯é€‰ï¼Œå¤ç”¨Accept-Languageæ—¶ç”Ÿæ•ˆï¼‰
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> LocaleResolver <span class="hljs-title function_">localeResolver</span><span class="hljs-params">()</span> {
        <span class="hljs-type">AcceptHeaderLocaleResolver</span> <span class="hljs-variable">resolver</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AcceptHeaderLocaleResolver</span>();
        resolver.setDefaultLocale(Locale.SIMPLIFIED_CHINESE);
        <span class="hljs-keyword">return</span> resolver;
    }
}
</code></pre>
<h4 data-id="heading-6">5. å…¨å±€å¼‚å¸¸å¤„ç†å™¨</h4>
<p>åˆ›å»º<code>GlobalExceptionHandler</code>ï¼Œæ•è·å¼‚å¸¸å¹¶è¿”å›å¯¹åº”è¯­è¨€çš„é”™è¯¯ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.demo.exception;

<span class="hljs-keyword">import</span> com.example.demo.utils.LocaleUtils;
<span class="hljs-keyword">import</span> jakarta.servlet.http.HttpServletRequest;
<span class="hljs-keyword">import</span> lombok.AllArgsConstructor;
<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> org.springframework.context.MessageSource;
<span class="hljs-keyword">import</span> org.springframework.http.HttpStatus;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.ExceptionHandler;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.ResponseStatus;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RestControllerAdvice;

<span class="hljs-keyword">import</span> java.util.Locale;

<span class="hljs-comment">/**
 * å…¨å±€å¼‚å¸¸å¤„ç†å™¨
 */</span>
<span class="hljs-meta">@RestControllerAdvice</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalExceptionHandler</span> {

    <span class="hljs-comment">// æ³¨å…¥å›½é™…åŒ–æ¶ˆæ¯æº</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MessageSource messageSource;

    <span class="hljs-comment">/**
     * å¤„ç†ä¸šåŠ¡å¼‚å¸¸
     */</span>
    <span class="hljs-meta">@ExceptionHandler(BusinessException.class)</span>
    <span class="hljs-meta">@ResponseStatus(HttpStatus.BAD_REQUEST)</span>
    <span class="hljs-keyword">public</span> Result&lt;?&gt; handleBusinessException(BusinessException e, HttpServletRequest request) {
        <span class="hljs-comment">// è§£æè¯·æ±‚å¤´çš„è¯­è¨€</span>
        <span class="hljs-type">Locale</span> <span class="hljs-variable">locale</span> <span class="hljs-operator">=</span> LocaleUtils.getLocaleFromRequest(request);
        <span class="hljs-comment">// ä»å›½é™…åŒ–é…ç½®ä¸­è·å–å¯¹åº”è¯­è¨€çš„é”™è¯¯ä¿¡æ¯</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">errorMessage</span> <span class="hljs-operator">=</span> messageSource.getMessage(
                e.getErrorCode(), <span class="hljs-comment">// é”™è¯¯ç ï¼ˆå¯¹åº”é…ç½®æ–‡ä»¶çš„keyï¼‰</span>
                e.getArgs(),      <span class="hljs-comment">// å ä½ç¬¦å‚æ•°</span>
                e.getErrorCode(), <span class="hljs-comment">// é»˜è®¤å€¼ï¼ˆé…ç½®æ–‡ä»¶æ— è¯¥keyæ—¶ä½¿ç”¨ï¼‰</span>
                locale            <span class="hljs-comment">// è¯­è¨€</span>
        );
        <span class="hljs-keyword">return</span> Result.fail(HttpStatus.BAD_REQUEST.value(), errorMessage);
    }

    <span class="hljs-comment">/**
     * å¤„ç†ç³»ç»Ÿå¼‚å¸¸
     */</span>
    <span class="hljs-meta">@ExceptionHandler(Exception.class)</span>
    <span class="hljs-meta">@ResponseStatus(HttpStatus.INTERNAL_SERVER_ERROR)</span>
    <span class="hljs-keyword">public</span> Result&lt;?&gt; handleSystemException(Exception e, HttpServletRequest request) {
        <span class="hljs-type">Locale</span> <span class="hljs-variable">locale</span> <span class="hljs-operator">=</span> LocaleUtils.getLocaleFromRequest(request);
        <span class="hljs-type">String</span> <span class="hljs-variable">errorMessage</span> <span class="hljs-operator">=</span> messageSource.getMessage(
                <span class="hljs-string">"error.system.error"</span>,
                <span class="hljs-literal">null</span>,
                <span class="hljs-string">"System internal error"</span>,
                locale
        );
        <span class="hljs-comment">// æ‰“å°ç³»ç»Ÿå¼‚å¸¸æ ˆï¼ˆç”Ÿäº§ç¯å¢ƒå¯æ¥å…¥æ—¥å¿—æ¡†æ¶ï¼‰</span>
        e.printStackTrace();
        <span class="hljs-keyword">return</span> Result.fail(HttpStatus.INTERNAL_SERVER_ERROR.value(), errorMessage);
    }

    <span class="hljs-comment">/**
     * ç»Ÿä¸€è¿”å›ç»“æœå°è£…
     */</span>
    <span class="hljs-meta">@Data</span>
    <span class="hljs-meta">@AllArgsConstructor</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Result</span>&lt;T&gt; {
        <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> code;       <span class="hljs-comment">// çŠ¶æ€ç </span>
        <span class="hljs-keyword">private</span> String message; <span class="hljs-comment">// é”™è¯¯ä¿¡æ¯</span>
        <span class="hljs-keyword">private</span> T data;         <span class="hljs-comment">// æ•°æ®ï¼ˆå¼‚å¸¸æ—¶ä¸ºnullï¼‰</span>

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="hljs-title function_">fail</span><span class="hljs-params">(<span class="hljs-type">int</span> code, String message)</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>&lt;&gt;(code, message, <span class="hljs-literal">null</span>);
        }
    }
}
</code></pre>
<h4 data-id="heading-7">6. æ¥å£ç¤ºä¾‹ï¼ˆæµ‹è¯•å¼‚å¸¸è¿”å›ï¼‰</h4>
<p>åˆ›å»º<code>UserController</code>ï¼Œæ¨¡æ‹ŸæŸ¥è¯¢ç”¨æˆ·æ¥å£ï¼Œä¸å­˜åœ¨æ—¶æŠ›ä¸šåŠ¡å¼‚å¸¸ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span> com.example.demo.controller;

<span class="hljs-keyword">import</span> com.example.demo.exception.BusinessException;
<span class="hljs-keyword">import</span> com.example.demo.exception.GlobalExceptionHandler;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.GetMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.PathVariable;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.RequestMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.RestController;

<span class="hljs-comment">/**
 * æµ‹è¯•æ¥å£
 */</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping(<span class="hljs-string">"/users"</span>)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {

    <span class="hljs-comment">/**
     * æ ¹æ®ç”¨æˆ·IDæŸ¥è¯¢ç”¨æˆ·
     */</span>
    <span class="hljs-meta">@GetMapping(<span class="hljs-string">"/{userId}"</span>)</span>
    <span class="hljs-keyword">public</span> GlobalExceptionHandler.Result&lt;?&gt; getUser(<span class="hljs-meta">@PathVariable</span> <span class="hljs-built_in">Long</span> userId) {
        <span class="hljs-comment">// æ¨¡æ‹Ÿç”¨æˆ·ä¸å­˜åœ¨çš„åœºæ™¯</span>
        <span class="hljs-keyword">if</span> (userId &lt;= <span class="hljs-number">0</span>) {
            <span class="hljs-comment">// æŠ›ä¸šåŠ¡å¼‚å¸¸ï¼Œæºå¸¦é”™è¯¯ç å’Œå‚æ•°ï¼ˆç”¨æˆ·IDï¼‰</span>
            <span class="hljs-keyword">throw</span> new BusinessException(<span class="hljs-string">"error.user.not.found"</span>, userId);
        }
        <span class="hljs-keyword">return</span> new GlobalExceptionHandler.Result&lt;&gt;(<span class="hljs-number">200</span>, <span class="hljs-string">"success"</span>, <span class="hljs-string">"ç”¨æˆ·ä¿¡æ¯ï¼š"</span> + userId);
    }
}
</code></pre>
<h3 data-id="heading-8">ä¸‰ã€æµ‹è¯•éªŒè¯</h3>
<p>ä½¿ç”¨Postman/Curlè°ƒç”¨æ¥å£ï¼Œé€šè¿‡è¯·æ±‚å¤´<code>lang</code>æŒ‡å®šè¯­è¨€ï¼š</p>
<h4 data-id="heading-9">1. æµ‹è¯•ä¸­æ–‡è¿”å›ï¼ˆlang=zh-CNï¼‰</h4>
<ul>
<li>
<p>è¯·æ±‚ï¼š</p>
<ul>
<li>
<pre><code class="hljs language-bash" lang="bash">GET http://localhost:8080/users/-1
Header: lang=zh-CN
</code></pre>
</li>
</ul>
</li>
<li>
<p>å“åº”ï¼š</p>
<ul>
<li>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç”¨æˆ·ä¸å­˜åœ¨ï¼Œç”¨æˆ·IDï¼š-1"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-10">2. æµ‹è¯•è‹±æ–‡è¿”å›ï¼ˆlang=en-USï¼‰</h4>
<ul>
<li>
<p>è¯·æ±‚ï¼š</p>
<ul>
<li>
<pre><code class="hljs language-bash" lang="bash">GET http://localhost:8080/users/-1
Header: lang=en-US
</code></pre>
</li>
</ul>
</li>
<li>
<p>å“åº”ï¼š</p>
<ul>
<li>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"User not found, User ID: -1"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-11">3. æµ‹è¯•é»˜è®¤è¯­è¨€ï¼ˆä¸ä¼ é€’langï¼‰</h4>
<ul>
<li>
<p>è¯·æ±‚ï¼š</p>
<ul>
<li>
<pre><code class="hljs language-bash" lang="bash">GET http://localhost:8080/users/-1
</code></pre>
</li>
</ul>
</li>
<li>
<p>å“åº”ï¼š</p>
<ul>
<li>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç”¨æˆ·ä¸å­˜åœ¨ï¼Œç”¨æˆ·IDï¼š-1"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
</ul>
</li>
</ul>
<h3 data-id="heading-12">å››ã€æ‰©å±•è¯´æ˜</h3>
<ol start="7">
<li>
<p><strong>å¤ç”¨Accept-Language</strong>ï¼šè‹¥æƒ³å¤ç”¨HTTPæ ‡å‡†å¤´<code>Accept-Language</code>ï¼Œåªéœ€ä¿®æ”¹<code>LocaleUtils</code>ä¸­çš„<code>LANG_HEADER</code>ä¸º<code>Accept-Language</code>ï¼Œå¹¶é€‚é…è§£æé€»è¾‘ï¼ˆ<code>Accept-Language</code>æ ¼å¼å¦‚<code>zh-CN,zh;q=0.9,en;q=0.8</code>ï¼‰ã€‚</p>
</li>
<li>
<p><strong>æ›´å¤šè¯­è¨€æ”¯æŒ</strong>ï¼šæ–°å¢<code>messages_ja_JP.properties</code>ï¼ˆæ—¥è¯­ï¼‰ç­‰é…ç½®æ–‡ä»¶ï¼Œå³å¯æ”¯æŒæ›´å¤šè¯­è¨€ï¼Œæ— éœ€ä¿®æ”¹ä»£ç ã€‚</p>
</li>
<li>
<p><strong>é”™è¯¯ç è§„èŒƒ</strong>ï¼šå»ºè®®å°†é”™è¯¯ç æšä¸¾åŒ–ï¼ˆå¦‚<code>ErrorCode.USER_NOT_FOUND</code>ï¼‰ï¼Œé¿å…ç¡¬ç¼–ç ã€‚</p>
</li>
<li>
<p><strong>ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–</strong>ï¼š</p>
<ol>
<li>å¼‚å¸¸æ ˆä¿¡æ¯ä¸è¦è¿”å›ç»™å‰ç«¯ï¼Œä»…æ‰“å°åˆ°æ—¥å¿—ï¼›</li>
<li><code>MessageSource</code>çš„<code>cacheSeconds</code>è®¾ä¸º3600ï¼Œæå‡æ€§èƒ½ï¼›</li>
<li>æ¥å…¥æ—¥å¿—æ¡†æ¶ï¼ˆå¦‚Logback/Log4j2ï¼‰è®°å½•å¼‚å¸¸è¯¦æƒ…ã€‚</li>
</ol>
</li>
</ol>
<h3 data-id="heading-13">äº”ã€æ ¸å¿ƒä¾èµ–ï¼ˆpom.xmlï¼‰</h3>
<p>ç¡®ä¿Spring BootåŸºç¡€ä¾èµ–å·²å¼•å…¥ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<p>è¯¥æ–¹æ¡ˆå®ç°äº†å¼‚å¸¸ä¿¡æ¯çš„å›½é™…åŒ–ï¼Œç¬¦åˆRESTfulæ¥å£è®¾è®¡è§„èŒƒï¼Œä¸”æ˜“äºæ‰©å±•å’Œç»´æŠ¤ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‹’ç»åš DOM çš„â€œæ¬è¿å·¥â€ï¼šä» Vanilla JS åˆ° Vue 3 å“åº”å¼æ€ç»´çš„è¿›åŒ–]]></title>    <link>https://juejin.cn/post/7582516300050038811</link>    <guid>https://juejin.cn/post/7582516300050038811</guid>    <pubDate>2025-12-12T05:20:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582516300050038811" data-draft-id="7582516300049973275" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‹’ç»åš DOM çš„â€œæ¬è¿å·¥â€ï¼šä» Vanilla JS åˆ° Vue 3 å“åº”å¼æ€ç»´çš„è¿›åŒ–"/> <meta itemprop="keywords" content="Vue.js,JavaScript,å“åº”å¼ç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-12T05:20:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="San30"/> <meta itemprop="url" content="https://juejin.cn/user/1766294768060816"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‹’ç»åš DOM çš„â€œæ¬è¿å·¥â€ï¼šä» Vanilla JS åˆ° Vue 3 å“åº”å¼æ€ç»´çš„è¿›åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1766294768060816/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    San30
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T05:20:17.000Z" title="Fri Dec 12 2025 05:20:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p>åœ¨å‰ç«¯å¼€å‘çš„æ¼«é•¿æ¼”è¿›ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸å¬åˆ°â€œæ•°æ®é©±åŠ¨â€è¿™ä¸ªè¯ã€‚ä½†å¯¹äºå¾ˆå¤šä¹ æƒ¯äº† jQuery æˆ–è€…åŸç”Ÿ JavaScriptï¼ˆVanilla JSï¼‰çš„å¼€å‘è€…æ¥è¯´ï¼Œä»â€œæ“ä½œ DOMâ€åˆ°â€œæ“ä½œæ•°æ®â€çš„æ€ç»´è½¬å˜ï¼Œå¾€å¾€æ¯”å­¦ä¹ æ–°è¯­æ³•æ›´éš¾ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°†é€šè¿‡é‡æ„ä¸€ä¸ªç»å…¸çš„ <strong>Todos ä»»åŠ¡æ¸…å•</strong>åº”ç”¨ï¼Œæ¥æ·±åº¦å‰–æ Vue 3 Composition API æ˜¯å¦‚ä½•è§£æ”¾æˆ‘ä»¬çš„åŒæ‰‹ï¼Œè®©æˆ‘ä»¬ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘è€Œéç¹ççš„é¡µé¢æ¸²æŸ“ã€‚</p>
<h2 data-id="heading-0">1. ç—›ç‚¹å›é¡¾ï¼šåŸç”Ÿ JS çš„â€œå‘½ä»¤å¼â€å›°å¢ƒ</h2>
<p>åœ¨æ²¡æœ‰æ¡†æ¶çš„æ—¶ä»£ï¼Œå†™ä¸€ä¸ªç®€å•çš„è¾“å…¥æ¡†å›æ˜¾åŠŸèƒ½ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦ç»å†è¿™å‡ ä¸ªæ­¥éª¤ï¼šå¯»æ‰¾å…ƒç´  -&gt; ç›‘å¬äº‹ä»¶ -&gt; è·å–å€¼ -&gt; ä¿®æ”¹ DOMã€‚</p>
<p>è®©æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªåŸºäºåŸç”Ÿ JS çš„å®ç°ç‰‡æ®µï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// å…ˆæ‰¾åˆ°DOMå…ƒç´ , å‘½ä»¤å¼çš„, æœºæ¢°çš„</span>
<span class="hljs-keyword">const</span> app = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'app'</span>);
<span class="hljs-keyword">const</span> todoInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'todo-input'</span>);

todoInput.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'change'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-keyword">const</span> todo = event.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>();
    <span class="hljs-keyword">if</span> (!todo) <span class="hljs-keyword">return</span>;
    <span class="hljs-comment">// æ‰‹åŠ¨æ“ä½œ DOM æ›´æ–°</span>
    app.<span class="hljs-property">innerHTML</span> = todo; 
})
</code></pre>
<p>è¿™ç§ä»£ç è¢«ç§°ä¸º<strong>å‘½ä»¤å¼ç¼–ç¨‹ï¼ˆImperative Programmingï¼‰</strong> ã€‚æ­£å¦‚åœ¨ä»£ç æ³¨é‡Šä¸­æ‰€å†™ï¼Œè¿™æ˜¯ä¸€ç§â€œæœºæ¢°â€çš„è¿‡ç¨‹ã€‚æˆ‘ä»¬éœ€è¦å…³æ³¨æ¯ä¸€ä¸ªæ­¥éª¤çš„å®ç°ç»†èŠ‚ã€‚è€Œä¸”ï¼Œé¢‘ç¹åœ°æ“ä½œ DOM æ€§èƒ½æ˜¯ä½ä¸‹çš„ï¼Œå› ä¸ºè¿™æ¶‰åŠåˆ°äº† JS å¼•æ“ï¼ˆV8ï¼‰ä¸æ¸²æŸ“å¼•æ“ä¹‹é—´çš„è·¨ç•Œé€šä¿¡ã€‚</p>
<p>éšç€åº”ç”¨å˜å¾—å¤æ‚ï¼Œå¤§é‡çš„ <code>getElementById</code> å’Œ <code>innerHTML</code> ä¼šè®©ä»£ç å˜æˆéš¾ä»¥ç»´æŠ¤çš„â€œæ„å¤§åˆ©é¢æ¡â€ã€‚</p>
<h2 data-id="heading-1">2. Vue 3 çš„ç ´å±€ï¼šå“åº”å¼æ•°æ®ä¸å£°æ˜å¼æ¸²æŸ“</h2>
<p>Vue çš„æ ¸å¿ƒåœ¨äº<strong>å£°æ˜å¼ç¼–ç¨‹ï¼ˆDeclarative Programmingï¼‰</strong> ã€‚ä½ åªéœ€è¦å‘Šè¯‰ Vue â€œæƒ³è¦ä»€ä¹ˆç»“æœâ€ï¼Œä¸­é—´çš„ DOM æ›´æ–°è¿‡ç¨‹ç”± Vue æ›¿ä½ å®Œæˆã€‚</p>
<p>åœ¨ Vue 3 ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨ <code>setup</code> å‡½æ•°å’Œ Composition APIï¼ˆç»„åˆå¼ APIï¼‰æ¥ç»„ç»‡é€»è¾‘ã€‚</p>
<h3 data-id="heading-2">2.1 æ ¸å¿ƒæ¦‚å¿µï¼š<code>ref</code> ä¸æ•°æ®é©±åŠ¨</h3>
<p>åœ¨ <code>App.vue</code> ä¸­ï¼Œæˆ‘ä»¬ä¸å†å»æŸ¥è¯¢ DOM å…ƒç´ ï¼Œè€Œæ˜¯å®šä¹‰äº†<strong>å“åº”å¼æ•°æ®</strong>ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">import</span> { ref, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// å“åº”å¼æ•°æ®</span>
<span class="hljs-keyword">const</span> title = <span class="hljs-title function_">ref</span>(<span class="hljs-string">""</span>);
<span class="hljs-keyword">const</span> todos = <span class="hljs-title function_">ref</span>([
  { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'ç¡è§‰'</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">true</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'åƒé¥­'</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> }
]);
</code></pre>
<p>è¿™é‡Œä½“ç°äº† Vue å¼€å‘çš„æ ¸å¿ƒæ€è·¯ï¼š <strong>â€œä¸å†éœ€è¦æ€è€ƒé¡µé¢çš„å…ƒç´ æ€ä¹ˆæ“ä½œï¼Œè€Œæ˜¯è¦æ€è€ƒæ•°æ®æ˜¯æ€ä¹ˆå˜åŒ–çš„â€</strong> ã€‚</p>
<h3 data-id="heading-3">2.2 æŒ‡ä»¤ï¼šè¿æ¥æ•°æ®ä¸è§†å›¾çš„æ¡¥æ¢</h3>
<p>æœ‰äº†æ•°æ®ï¼Œæˆ‘ä»¬é€šè¿‡ Vue çš„æŒ‡ä»¤å°†æ•°æ®ç»‘å®šåˆ°æ¨¡æ¿ä¸Šï¼š</p>
<ul>
<li><strong>åŒå‘ç»‘å®š (<code>v-model</code>)</strong> ï¼š<code>&lt;input type="text" v-model="title"&gt;</code>ã€‚å½“ç”¨æˆ·è¾“å…¥æ—¶ï¼Œ<code>title</code> å˜é‡è‡ªåŠ¨æ›´æ–°ï¼›åä¹‹äº¦ç„¶ã€‚è¿™æ¯”æ‰‹åŠ¨å†™ <code>addEventListener</code> ä¼˜é›…å¾—å¤šã€‚</li>
<li><strong>åˆ—è¡¨æ¸²æŸ“ (<code>v-for</code>)</strong> ï¼š<code>&lt;li v-for="todo in todos" :key="todo.id"&gt;</code>ã€‚Vue ä¼šæ ¹æ® <code>todos</code> æ•°ç»„çš„å˜åŒ–ï¼Œæ™ºèƒ½åœ°æ·»åŠ ã€åˆ é™¤æˆ–æ›´æ–° <code>&lt;li&gt;</code> å…ƒç´ ã€‚æ³¨æ„è¿™é‡Œ <code>:key</code> çš„ä½¿ç”¨ï¼Œå®ƒæ˜¯ Vue è¯†åˆ«èŠ‚ç‚¹çš„å”¯ä¸€æ ‡è¯†ï¼Œå¯¹æ€§èƒ½è‡³å…³é‡è¦ã€‚</li>
<li><strong>æ ·å¼ç»‘å®š (<code>:class</code>)</strong> ï¼š<code>&lt;span :class="{done: todo.done}"&gt;</code>ã€‚æˆ‘ä»¬ä¸å†éœ€è¦æ‰‹åŠ¨ <code>classList.add('done')</code>ï¼Œåªéœ€æ”¹å˜æ•°æ® <code>todo.done</code>ï¼Œæ ·å¼å°±ä¼šè‡ªåŠ¨ç”Ÿæ•ˆã€‚</li>
</ul>
<h3 data-id="heading-4">2.3 æ™ºèƒ½çš„æ¡ä»¶æ¸²æŸ“ï¼šv-if ä¸ v-else çš„æ’ä»–æ€§é€»è¾‘</h3>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œç”¨æˆ·ä½“éªŒç»†èŠ‚è‡³å…³é‡è¦ã€‚ä¾‹å¦‚ï¼Œå½“ä»»åŠ¡åˆ—è¡¨è¢«æ¸…ç©ºæ—¶ï¼Œæˆ‘ä»¬ä¸åº”è¯¥ç•™ç»™ç”¨æˆ·ä¸€ç‰‡ç©ºç™½ï¼Œè€Œåº”è¯¥å±•ç¤ºâ€œæš‚æ— ä»»åŠ¡â€çš„æç¤ºã€‚åœ¨åŸç”Ÿ JS ä¸­ï¼Œè¿™é€šå¸¸éœ€è¦æˆ‘ä»¬åœ¨æ¯æ¬¡æ·»åŠ æˆ–åˆ é™¤æ“ä½œåï¼Œæ‰‹åŠ¨æ£€æŸ¥æ•°ç»„é•¿åº¦å¹¶åˆ‡æ¢ DOM çš„ <code>display</code> å±æ€§ã€‚</p>
<p>è€Œåœ¨ Vue ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>v-if</code> å’Œ <code>v-else</code> æŒ‡ä»¤ï¼Œåƒå†™ <code>if-else</code> ä»£ç å—ä¸€æ ·åœ¨æ¨¡æ¿ä¸­è½»æ¾å¤„ç†è¿™ç§é€»è¾‘åˆ†æ”¯ï¼š</p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"todos.length"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"todo in todos"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"todo.id"</span>&gt;</span>
    ...
  <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-else</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>æš‚æ— ä»»åŠ¡<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p><strong>ä»£ç æ·±åº¦è§£æï¼š</strong></p>
<ol>
<li><strong>çœŸå® DOM çš„é”€æ¯ä¸é‡å»º</strong>ï¼š<code>v-if</code> æ˜¯çœŸæ­£çš„æ¡ä»¶æ¸²æŸ“ã€‚å½“ <code>todos.length</code> ä¸º 0 æ—¶ï¼ŒVue ä¸ä»…ä»…æ˜¯éšè—äº† <code>&lt;ul&gt;</code>ï¼ˆåƒ CSS çš„ <code>display: none</code> é‚£æ ·ï¼‰ï¼Œè€Œæ˜¯ç›´æ¥ä» DOM ä¸­<strong>ç§»é™¤</strong>äº†æ•´ä¸ªåˆ—è¡¨å…ƒç´ ã€‚è¿™æ„å‘³ç€æ­¤æ—¶ DOM ä¸­åªæœ‰ <code>&lt;div&gt;æš‚æ— ä»»åŠ¡&lt;/div&gt;</code>ï¼Œå‡å°‘äº†é¡µé¢çš„ DOM èŠ‚ç‚¹æ•°é‡ã€‚</li>
<li><strong>å“åº”å¼åˆ‡æ¢</strong>ï¼šä¸€æ—¦æˆ‘ä»¬å‘ <code>todos</code> æ•°ç»„ <code>push</code> äº†ä¸€æ¡æ–°æ•°æ®ï¼Œ<code>todos.length</code> å˜ä¸º 1ã€‚Vue çš„å“åº”å¼ç³»ç»Ÿä¼šç«‹å³æ„ŸçŸ¥ï¼Œé”€æ¯ <code>v-else</code> å…ƒç´ ï¼Œå¹¶é‡æ–°åˆ›å»ºå¹¶æ’å…¥ <code>&lt;ul&gt;</code> åˆ—è¡¨ã€‚</li>
<li><strong>é€»è¾‘äº’æ–¥</strong>ï¼š<code>v-else</code> å¿…é¡»ç´§è·Ÿåœ¨ <code>v-if</code> å…ƒç´ ä¹‹åï¼Œå®ƒä»¬æ„æˆäº†ä¸€ä¸ªå°é—­çš„é€»è¾‘ç»„ï¼Œä¿è¯äº†åŒä¸€æ—¶é—´é¡µé¢ä¸Šåªä¼šå­˜åœ¨å…¶ä¸­ä¸€ç§çŠ¶æ€ã€‚</li>
</ol>
<p>é€šè¿‡è¿™ä¸¤ä¸ªæŒ‡ä»¤ï¼Œæˆ‘ä»¬ä¸ä»…å®ç°äº†ç•Œé¢çš„åŠ¨æ€äº¤äº’ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬å°†â€œåˆ—è¡¨ä¸ºç©ºæ—¶æ˜¾ç¤ºä»€ä¹ˆâ€çš„<strong>ä¸šåŠ¡é€»è¾‘</strong>ç›´æ¥é€šè¿‡æ¨¡æ¿è¡¨è¾¾äº†å‡ºæ¥ï¼Œä¸ä»…ä»£ç é‡å‡å°‘äº†ï¼Œæ„å›¾ä¹Ÿæ›´åŠ æ¸…æ™°ã€‚</p>
<h2 data-id="heading-5">3. æ·±åº¦è§£æï¼šComputed è®¡ç®—å±æ€§ vs. æ¨¡æ¿é€»è¾‘</h2>
<p>åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦æ ¹æ®ç°æœ‰çš„æ•°æ®è®¡ç®—å‡ºæ–°çš„çŠ¶æ€ï¼Œæ¯”å¦‚ç»Ÿè®¡â€œå‰©ä½™æœªå®Œæˆä»»åŠ¡æ•°â€ã€‚</p>
<h3 data-id="heading-6">3.1 ä¸ºä»€ä¹ˆè¦ç”¨ Computedï¼Ÿ</h3>
<p>åˆå­¦è€…å¯èƒ½ä¼šç›´æ¥åœ¨æ¨¡æ¿é‡Œå†™é€»è¾‘ï¼š</p>
<pre><code class="hljs language-HTML" lang="HTML">{{ todos.filter(todo =&gt; !todo.done).length }}
</code></pre>
<p>è™½ç„¶è¿™ä¹Ÿèƒ½å·¥ä½œï¼Œä½† Vue å®˜æ–¹æ›´æ¨èä½¿ç”¨ <strong>Computedï¼ˆè®¡ç®—å±æ€§ï¼‰</strong> ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªå“åº”å¼çš„è®¡ç®—å±æ€§</span>
<span class="hljs-keyword">const</span> active = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> todos.<span class="hljs-property">value</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> !todo.<span class="hljs-property">done</span>).<span class="hljs-property">length</span>
})
</code></pre>
<p><strong><code>computed</code> çš„å››å¤§ä¼˜åŠ¿ï¼š</strong></p>
<ol>
<li><strong>æ€§èƒ½ä¼˜åŒ–ï¼ˆå¸¦ç¼“å­˜ï¼‰</strong> ï¼šè¿™æ˜¯æœ€å¤§çš„åŒºåˆ«ã€‚æ¨¡æ¿å†…çš„è¡¨è¾¾å¼åœ¨æ¯æ¬¡ç»„ä»¶é‡æ¸²æŸ“æ—¶éƒ½ä¼š<strong>é‡æ–°æ‰§è¡Œ</strong>ã€‚è€Œ <code>computed</code> åªæœ‰åœ¨å®ƒä¾èµ–çš„æ•°æ®ï¼ˆè¿™é‡Œæ˜¯ <code>todos</code>ï¼‰å‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šé‡æ–°è®¡ç®—ã€‚å¦‚æœ <code>todos</code> æ²¡å˜ï¼Œå¤šæ¬¡è®¿é—® <code>active</code> ä¼šç›´æ¥è¿”å›ç¼“å­˜å€¼ã€‚</li>
<li><strong>å¯è¯»æ€§</strong>ï¼šå°†å¤æ‚çš„é€»è¾‘ä» HTML æ¨¡æ¿ä¸­å‰¥ç¦»åˆ° JS ä¸­ï¼Œè®©æ¨¡æ¿ä¿æŒå¹²å‡€ã€è¯­ä¹‰åŒ–ã€‚</li>
<li><strong>å¯å¤ç”¨æ€§</strong>ï¼š<code>active</code> å¯ä»¥åœ¨æ¨¡æ¿ä¸­å¤šå¤„ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨ JS é€»è¾‘ä¸­è¢«å¼•ç”¨ã€‚</li>
<li><strong>è°ƒè¯•ä¸æµ‹è¯•</strong>ï¼šå•ç‹¬æµ‹è¯•ä¸€ä¸ª JS å‡½æ•°è¿œæ¯”æµ‹è¯•æ¨¡æ¿ä¸­çš„ä¸€æ®µé€»è¾‘è¦å®¹æ˜“ã€‚</li>
</ol>
<h3 data-id="heading-7">3.2 è¿›é˜¶æŠ€å·§ï¼šComputed çš„ Get ä¸ Set</h3>
<p>è®¡ç®—å±æ€§é€šå¸¸æ˜¯åªè¯»çš„ï¼Œä½† Vue ä¹Ÿå…è®¸æˆ‘ä»¬å®šä¹‰ <code>set</code> æ–¹æ³•ï¼Œè¿™åœ¨å¤„ç†â€œå…¨é€‰/å…¨ä¸é€‰â€åŠŸèƒ½æ—¶éå¸¸å¼ºå¤§ã€‚</p>
<p>çœ‹çœ‹è¿™æ®µç²¾å¦™çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> allDone = <span class="hljs-title function_">computed</span>({
  <span class="hljs-comment">// è¯»å–å€¼ï¼šåˆ¤æ–­æ˜¯å¦æ‰€æœ‰ä»»åŠ¡éƒ½å·²å®Œæˆ</span>
  <span class="hljs-title function_">get</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> todos.<span class="hljs-property">value</span>.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">done</span>)
  },
  <span class="hljs-comment">// è®¾ç½®å€¼ï¼šå½“ç‚¹å‡»å…¨é€‰æ¡†æ—¶ï¼Œå°†æ‰€æœ‰ä»»åŠ¡çŠ¶æ€åŒæ­¥ä¿®æ”¹</span>
  <span class="hljs-title function_">set</span>(<span class="hljs-params">value</span>) {
    todos.<span class="hljs-property">value</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">done</span> = value)
  }
})
</code></pre>
<p>åœ¨æ¨¡æ¿ä¸­ï¼Œæˆ‘ä»¬åªéœ€ç»‘å®š <code>&lt;input type="checkbox" v-model="allDone"&gt;</code>ã€‚</p>
<ul>
<li>å½“ç”¨æˆ·ç‚¹å‡»å¤é€‰æ¡†ï¼ŒVue è°ƒç”¨ <code>set(value)</code>ï¼Œæˆ‘ä»¬éå†æ•°ç»„æ›´æ–°æ‰€æœ‰ <code>todo.done</code>ã€‚</li>
<li>å½“æ‰€æœ‰å­ä»»åŠ¡è¢«æ‰‹åŠ¨å‹¾é€‰ï¼Œ<code>get()</code> è¿”å› <code>true</code>ï¼Œå…¨é€‰æ¡†è‡ªåŠ¨è¢«å‹¾é€‰ã€‚</li>
</ul>
<p>è¿™ç§åŒå‘çš„é€»è¾‘è”åŠ¨ï¼Œå¦‚æœç”¨åŸç”Ÿ JS å®ç°ï¼Œéœ€è¦ç¼–å†™å¤§é‡çš„äº‹ä»¶ç›‘å¬å’ŒçŠ¶æ€åˆ¤æ–­ä»£ç ï¼Œè€Œåœ¨ Vue ä¸­ï¼Œå®ƒè¢«å°è£…æˆäº†ä¸€ä¸ªä¼˜é›…çš„å±æ€§ã€‚</p>
<h2 data-id="heading-8">4. æ€»ç»“ï¼šVue å¼€å‘æ–¹å¼çš„å“²å­¦</h2>
<p>ä» <code>demo.html</code> åˆ° <code>App.vue</code>ï¼Œæˆ‘ä»¬ç»å†çš„ä¸ä»…ä»…æ˜¯è¯­æ³•çš„æ”¹å˜ï¼Œæ›´æ˜¯æ€ç»´æ¨¡å¼çš„é‡æ„ï¼š</p>
<ul>
<li><strong>Focus on Business</strong>ï¼šæˆ‘ä»¬ä¸å†æ˜¯æµè§ˆå™¨çš„â€œå»ºç­‘å·¥äººâ€ï¼ˆæ¬è¿ DOMï¼‰ï¼Œè€Œæ˜¯â€œè®¾è®¡å¸ˆâ€ï¼ˆå®šä¹‰æ•°æ®çŠ¶æ€ï¼‰ã€‚</li>
<li><strong>Composition API</strong>ï¼š<code>setup</code>ã€<code>ref</code>ã€<code>computed</code> è®©æˆ‘ä»¬èƒ½å¤Ÿæ›´çµæ´»åœ°ç»„åˆé€»è¾‘ï¼Œæ¯” Vue 2 çš„ Options API æ›´åˆ©äºä»£ç å¤ç”¨å’Œç±»å‹æ¨æ–­ã€‚</li>
<li><strong>Best Practices</strong>ï¼šæ°¸è¿œä¸è¦åœ¨æ¨¡æ¿ä¸­å†™å¤æ‚çš„é€»è¾‘ï¼Œå–„ç”¨ <code>computed</code> ç¼“å­˜æœºåˆ¶ã€‚</li>
</ul>
<p>Vue 3 é€šè¿‡å“åº”å¼ç³»ç»Ÿï¼Œæ›¿æˆ‘ä»¬å¤„ç†äº†è„æ´»ç´¯æ´»ï¼ˆDOM æ›´æ–°ï¼‰ï¼Œè®©æˆ‘ä»¬èƒ½å°†ç²¾åŠ›é›†ä¸­åœ¨çœŸæ­£æœ‰ä»·å€¼çš„<strong>ä¸šåŠ¡é€»è¾‘</strong>ä¸Šã€‚å¯¹äºæƒ³è¦æ„å»ºå¤æ‚äº¤äº’ç³»ç»Ÿï¼ˆå¦‚ç²’å­ç‰¹æ•ˆã€æ•°æ®å¯è§†åŒ–ï¼‰çš„å¼€å‘è€…æ¥è¯´ï¼ŒæŒæ¡è¿™ç§â€œæ•°æ®é©±åŠ¨â€çš„æ€ç»´æ˜¯è¿ˆå‘é«˜é˜¶å¼€å‘çš„ç¬¬ä¸€æ­¥ã€‚</p>
<h2 data-id="heading-9">5.é™„å½•ï¼šå®Œæ•´<code>App.vue</code>ä»£ç </h2>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>{{ title }}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"title"</span> @<span class="hljs-attr">keydown.enter</span>=<span class="hljs-string">"addTodo"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"todos.length"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"todo in todos"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"todo.id"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"todo.done"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"{done: todo.done}"</span>&gt;</span>{{ todo.title }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-else</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>æš‚æ— ä»»åŠ¡<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      å…¨é€‰<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"allDone"</span>&gt;</span>
      {{ active }}
      /
      {{ todos.length }}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-js" lang="js">&lt;script setup&gt;
<span class="hljs-keyword">import</span> { ref, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-comment">// å“åº”å¼æ•°æ®</span>
<span class="hljs-keyword">const</span> title = <span class="hljs-title function_">ref</span>(<span class="hljs-string">""</span>);
<span class="hljs-keyword">const</span> todos = <span class="hljs-title function_">ref</span>([
  {
    <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">title</span>: <span class="hljs-string">'ç¡è§‰'</span>,
    <span class="hljs-attr">done</span>: <span class="hljs-literal">true</span>
  },
  {
    <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">title</span>: <span class="hljs-string">'åƒé¥­'</span>,
    <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span>
  }
]);

<span class="hljs-keyword">const</span> active = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> todos.<span class="hljs-property">value</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> !todo.<span class="hljs-property">done</span>).<span class="hljs-property">length</span>
})

<span class="hljs-keyword">const</span> <span class="hljs-title function_">addTodo</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span>(!title.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span>;
  todos.<span class="hljs-property">value</span>.<span class="hljs-title function_">push</span>({
    <span class="hljs-attr">id</span>: todos.<span class="hljs-property">value</span>.<span class="hljs-property">length</span> + <span class="hljs-number">1</span>,
    <span class="hljs-attr">title</span>: title.<span class="hljs-property">value</span>,
    <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span>
  });
  title.<span class="hljs-property">value</span> = <span class="hljs-string">''</span>;
}
<span class="hljs-keyword">const</span> allDone = <span class="hljs-title function_">computed</span>({
  <span class="hljs-title function_">get</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> todos.<span class="hljs-property">value</span>.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">done</span>)
  },
  <span class="hljs-title function_">set</span>(<span class="hljs-params">value</span>) {
    todos.<span class="hljs-property">value</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">done</span> = value)
  }
})
&lt;/script&gt;
</code></pre>
<pre><code class="hljs language-css" lang="css">&lt;style&gt;
  <span class="hljs-selector-class">.done</span> {
    <span class="hljs-attribute">color</span>: gray;
    <span class="hljs-attribute">text-decoration</span>: line-through;
  }
&lt;/style&gt;
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HTMLæ ‡ç­¾ - åˆ—è¡¨æ ‡ç­¾]]></title>    <link>https://juejin.cn/post/7582516300050153499</link>    <guid>https://juejin.cn/post/7582516300050153499</guid>    <pubDate>2025-12-12T05:39:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582516300050153499" data-draft-id="7582529173828239394" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HTMLæ ‡ç­¾ - åˆ—è¡¨æ ‡ç­¾"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-12T05:39:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GinoWi"/> <meta itemprop="url" content="https://juejin.cn/user/687651121011707"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HTMLæ ‡ç­¾ - åˆ—è¡¨æ ‡ç­¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/687651121011707/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GinoWi
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T05:39:24.000Z" title="Fri Dec 12 2025 05:39:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github-gist">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#333}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#d73a49}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#6f42c1}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-number{color:#005cc5}.hljs-string{color:#032f62}</style><h2 data-id="heading-0">HTMLæ ‡ç­¾ - åˆ—è¡¨æ ‡ç­¾</h2>
<p>é¦–å…ˆéœ€è¦çŸ¥é“ï¼Œä»€ä¹ˆæ˜¯åˆ—è¡¨æ ‡ç­¾ï¼Ÿ</p>
<p>åˆ—è¡¨æ ‡ç­¾çš„ä½œç”¨å°±æ˜¯ç»™ä¸€å †æ•°æ®æ·»åŠ <strong>åˆ—è¡¨è¯­ä¹‰</strong>ï¼Œä¹Ÿå°±æ˜¯å‘Šè¯‰æµè§ˆå™¨è¿™ä¸€å †æ•°æ®æ˜¯ä¸€ä¸ªæ•´ä½“ã€‚</p>
<h4 data-id="heading-1">æ— åºåˆ—è¡¨ï¼ˆunordered listï¼‰</h4>
<ul>
<li>ä½œç”¨ï¼šç»™ä¸€å †æ•°æ®æ·»åŠ åˆ—è¡¨è¯­ä¹‰ï¼Œå¹¶ä¸”è¿™ä¸€å †æ•°æ®ä¸­çš„æ‰€æœ‰æ•°æ®éƒ½<strong>æ²¡æœ‰å…ˆåä¹‹åˆ†</strong>ã€‚</li>
</ul>
<blockquote>
<p><strong>é‚£ä¹ˆä»€ä¹ˆå«åšæœ‰å…ˆåä¹‹åˆ†ï¼Ÿä»€ä¹ˆå«åšæ²¡æœ‰å…ˆåä¹‹åˆ†ï¼Ÿ</strong></p>
<p>è¿™ä¸€éƒ¨åˆ†æ•°æ®ä¸èƒ½éšæ„æ›¿æ¢å±•ç¤ºå…ˆåé¡ºåºçš„ï¼Œå°±æ˜¯æœ‰å…ˆåä¹‹åˆ†ï¼Œä¾‹å¦‚ï¼šæ’è¡Œæ¦œ</p>
<p>è¿™ä¸€éƒ¨åˆ†æ•°æ®å¯ä»¥éšæ„æ›¿æ¢å±•ç¤ºå…ˆåé¡ºåºçš„ï¼Œå°±æ˜¯æ²¡æœ‰å…ˆåä¹‹åˆ†ï¼Œä¾‹å¦‚ï¼šä¸­å›½åŸå¸‚åˆ—è¡¨</p>
</blockquote>
<ul>
<li>æ ¼å¼ï¼š</li>
</ul>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
</code></pre>
<ul>
<li>
<p>æ³¨æ„ç‚¹ï¼š</p>
<ul>
<li><strong>æ— åºåˆ—è¡¨æ˜¯ç”¨æ¥ç»™ä¸€å †æ•°æ®æ·»åŠ åˆ—è¡¨è¯­ä¹‰çš„ï¼Œè€Œä¸æ˜¯ç”¨äºç»™è¿™ä¸€å †æ•°æ®æ·»åŠ å°åœ†ç‚¹æ ·å¼çš„ã€‚</strong></li>
<li><code>ul</code>æ ‡ç­¾å’Œ<code>li</code>æ ‡ç­¾æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ<code>ul</code>æ ‡ç­¾å’Œ<code>li</code>æ ‡ç­¾éƒ½æ˜¯ä¸€èµ·å‡ºç°ï¼Œä¸ä¼šå•ç‹¬å‡ºç°ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ä¼šå•ç‹¬ä½¿ç”¨ä¸€ä¸ª<code>ul</code>æ ‡ç­¾æˆ–è€…å•ç‹¬ä½¿ç”¨ä¸€ä¸ª<code>li</code>æ ‡ç­¾ï¼Œéƒ½æ˜¯ç»“åˆåœ¨ä¸€èµ·ä½¿ç”¨ã€‚</li>
<li>ç”±äº<code>ul</code>æ ‡ç­¾å’Œ<code>li</code>æ ‡ç­¾æ˜¯ä¸€ä¸ªç»„åˆï¼Œæ‰€ä»¥<code>ul</code>æ ‡ç­¾ä¸­ä¸æ¨èåŒ…å«å…¶ä»–æ ‡ç­¾ï¼Œä¹Ÿå°±æ˜¯è¯´ä»¥ååœ¨<code>ul</code>æ ‡ç­¾ä¸­ä¸€èˆ¬æƒ…å†µä¸‹åªä¼šçœ‹åˆ°<code>li</code>æ ‡ç­¾ã€‚</li>
<li>å‰é¢è¯´è¿‡<code>ul</code>ä¸­æœ€å¥½åªæ”¾<code>li</code>æ ‡ç­¾ï¼Œä½†æ˜¯åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œ<code>li</code>æ ‡ç­¾ä¸­çš„å†…å®¹å¯èƒ½ä¼šå¾ˆå¤æ‚ï¼Œæ‰€ä»¥å¯ä»¥ç»§ç»­åœ¨<code>li</code>æ ‡ç­¾ä¸­æ·»åŠ å…¶ä»–æ ‡ç­¾æ¥ä¸°å¯Œç•Œé¢ã€‚</li>
<li>åœ¨æ— åºåˆ—è¡¨çš„<code>li</code>æ ‡ç­¾ä¸­ï¼Œé™¤äº†å¯ä»¥æ·»åŠ å…¶ä»–æ ‡ç­¾æ¥ä¸°å¯Œç•Œé¢ä»¥å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡æ·»åŠ <code>ul</code>æ ‡ç­¾æ¥ä¸°å¯Œç•Œé¢ï¼Œä¹Ÿå°±æ˜¯è¯´<code>ul</code>ä¸­æœ‰<code>li</code>ï¼Œ<code>li</code>ä¸­åˆå¯ä»¥æœ‰<code>ul</code>ã€‚</li>
</ul>
</li>
<li>
<p>å¿«æ·é”®ï¼š</p>
<ul>
<li><code>ul&gt;li</code> + <code>tab</code>é”®ï¼šç”Ÿæˆä¸€å¯¹<code>ul</code>æ ‡ç­¾ï¼Œåœ¨<code>ul</code>æ ‡ç­¾ä¸­ç”Ÿæˆä¸€å¯¹<code>li</code>æ ‡ç­¾ã€‚</li>
<li><code>ul&gt;li*3</code> + <code>tab</code>é”®ï¼šç”Ÿæˆä¸€å¯¹<code>ul</code>æ ‡ç­¾ï¼Œåœ¨ulæ ‡ç­¾ä¸­ç”Ÿæˆ3å¯¹<code>li</code>æ ‡ç­¾ã€‚</li>
</ul>
</li>
<li>
<p>æ— åºåˆ—è¡¨åº”ç”¨åœºæ™¯ä¸¾ä¾‹ï¼š</p>
<ul>
<li>æ–°é—»åˆ—è¡¨</li>
<li>å•†å“åˆ—è¡¨</li>
<li>å¯¼èˆªæ¡</li>
</ul>
</li>
</ul>
<h4 data-id="heading-2">æœ‰åºåˆ—è¡¨ï¼ˆordered listï¼‰</h4>
<ul>
<li>
<p>ä½œç”¨ï¼šç»™ä¸€å †æ•°æ®æ·»åŠ è¯­ä¹‰ï¼Œå¹¶ä¸”è¿™ä¸€å †æ•°æ®ä¸­æ‰€æœ‰çš„æ•°æ®éƒ½<strong>æœ‰å…ˆåä¹‹åˆ†</strong>ã€‚</p>
</li>
<li>
<p>æ ¼å¼ï¼š</p>
</li>
</ul>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">ol</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">ol</span>&gt;</span>
</code></pre>
<ul>
<li>æœ‰åºåˆ—è¡¨çš„åŒºåˆ«ä»…ä»…æ˜¯æ˜¯å¦æœ‰å…ˆåä¹‹åˆ†ï¼Œå…¶ä»–çš„ä½¿ç”¨æ–¹æ³•å’Œæ³¨æ„ç‚¹ä¸æ— åºåˆ—è¡¨<code>ul</code>æ ‡ç­¾éƒ½å·®ä¸å¤šã€‚</li>
</ul>
<h4 data-id="heading-3">å®šä¹‰åˆ—è¡¨ï¼ˆdefinition listï¼‰</h4>
<ul>
<li>
<p>ä½œç”¨ï¼šç»™ä¸€å †æ•°æ®æ·»åŠ åˆ—è¡¨è¯­ä¹‰ï¼Œå…ˆé€šè¿‡<code>dt</code>æ ‡ç­¾å®šä¹‰åˆ—è¡¨ä¸­çš„<strong>æ‰€æœ‰æ ‡é¢˜</strong>ï¼Œç„¶åé€šè¿‡<code>dd</code>æ ‡ç­¾ç»™æ¯ä¸ªæ ‡é¢˜æ·»åŠ <strong>æè¿°ä¿¡æ¯</strong>ã€‚</p>
</li>
<li>
<p>æ ¼å¼ï¼š</p>
</li>
</ul>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">dl</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">dt</span>&gt;</span>åŒ—äº¬<span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span>ä¸­å›½çš„é¦–éƒ½<span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">dt</span>&gt;</span>ä¸Šæµ·<span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span>ä¸­å›½çš„ç»æµä¸­å¿ƒ<span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dl</span>&gt;</span>
</code></pre>
<ul>
<li>
<p>æ ‡ç­¾å«ä¹‰ï¼š<code>dt</code>å’Œ<code>dd</code>éƒ½æ˜¯è‹±æ–‡ç¼©å†™ï¼Œ<code>dt</code>æ˜¯definition titleçš„ç¼©å†™ï¼Œæ‰€ä»¥<code>dt</code>çš„å«ä¹‰å°±æ˜¯ç”¨æ¥å®šä¹‰<strong>åˆ—è¡¨ä¸­çš„æ ‡é¢˜</strong>ï¼›<code>dd</code>æ˜¯definition descriptionçš„ç¼©å†™ï¼Œæ‰€ä»¥<code>dd</code>çš„å«ä¹‰å°±æ˜¯ç”¨æ¥å®šä¹‰<strong>æ ‡é¢˜å¯¹åº”çš„æè¿°</strong>ã€‚</p>
</li>
<li>
<p>åº”ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>åšç½‘ç«™å°¾éƒ¨çš„ç›¸å…³ä¿¡æ¯</li>
<li>å›¾æ–‡æ··æ’</li>
</ul>
</li>
<li>
<p>æ³¨æ„ç‚¹ï¼š</p>
<ul>
<li>å’Œ<code>ul/ol</code>ä¸€æ ·ï¼Œ<code>dl</code>å’Œ<code>dt/dd</code>æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸ä¼šå•ç‹¬å‡ºç°ï¼Œéƒ½æ˜¯ä¸€èµ·å‡ºç°ã€‚</li>
<li>å’Œ<code>ul/ol</code>ä¸€æ ·ï¼Œç”±äº<code>dl</code>å’Œ<code>dt/dd</code>æ˜¯ä¸€ä¸ªç»„åˆæ ‡ç­¾ï¼Œæ‰€ä»¥<code>dl</code>ä¸­å»ºè®®åªæ”¾<code>dt</code>å’Œ<code>dd</code>æ ‡ç­¾ã€‚</li>
<li>ä¸€ä¸ª<code>dt</code>å¯ä»¥æ²¡æœ‰å¯¹åº”çš„<code>dd</code>ï¼Œä¹Ÿå¯ä»¥æœ‰å¤šä¸ªå¯¹åº”çš„<code>dd</code>ï¼Œä½†æ˜¯æ— è®ºæœ‰å¤šä¸ª<code>dd</code>æˆ–è€…æ²¡æœ‰<code>dd</code>ï¼Œéƒ½ä¸æ¨èä½¿ç”¨ã€‚æ¨èä½¿ç”¨ä¸€ä¸ª<code>dt</code>å¯¹åº”ä¸€ä¸ª<code>dd</code>ã€‚</li>
<li>å’Œ<code>li</code>æ ‡ç­¾ä¸€æ ·ï¼Œå½“éœ€è¦ä¸°å¯Œç•Œé¢çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨<code>dt/dd</code>æ ‡ç­¾ä¸­ç»§ç»­æ·»åŠ å…¶ä»–æ ‡ç­¾ï¼Œä½†æ˜¯å»ºè®®ä¸è¦å†<code>dl</code>æ ‡ç­¾ä¸­æ·»åŠ ã€‚</li>
</ul>
</li>
<li>
<p>å¿«æ·é”®ï¼š</p>
<ul>
<li><code>dl&gt;dt+dd</code> + <code>tab</code>é”®ï¼šç”Ÿæˆä¸€å¯¹<code>dl</code>æ ‡ç­¾ï¼Œåœ¨<code>dl</code>æ ‡ç­¾å½“ä¸­ç”Ÿæˆä¸€å¯¹<code>dt</code>å’Œ<code>dd</code>æ ‡ç­¾ã€‚</li>
</ul>
</li>
</ul>
<p><strong>å‚è€ƒé“¾æ¥ï¼š</strong></p>
<p>W3Schoolå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.w3school.com.cn%2F" target="_blank" title="https://www.w3school.com.cn/" ref="nofollow noopener noreferrer">www.w3school.com.cn</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React æ€§èƒ½ä¼˜åŒ–ï¼ˆæ–¹å‘ï¼‰]]></title>    <link>https://juejin.cn/post/7582510826814849075</link>    <guid>https://juejin.cn/post/7582510826814849075</guid>    <pubDate>2025-12-12T05:45:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582510826814849075" data-draft-id="7582510291667599411" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React æ€§èƒ½ä¼˜åŒ–ï¼ˆæ–¹å‘ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2025-12-12T05:45:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹‹æ’å›"/> <meta itemprop="url" content="https://juejin.cn/user/2261046026312318"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React æ€§èƒ½ä¼˜åŒ–ï¼ˆæ–¹å‘ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2261046026312318/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹‹æ’å›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T05:45:48.000Z" title="Fri Dec 12 2025 05:45:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");margin-left:2px}.markdown-body a[href^="#"]:before{content:"#"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:"â€¢";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:"";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atelier-estuary-light">.hljs-comment,.hljs-quote{color:#6c6b5a}.hljs-attribute,.hljs-link,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ba6236}.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#ae7313}.hljs-bullet,.hljs-string,.hljs-symbol{color:#7d9726}.hljs-section,.hljs-title{color:#36a166}.hljs-keyword,.hljs-selector-tag{color:#5f9182}.hljs-addition,.hljs-deletion{color:#22221b;display:inline-block;width:100%}.hljs-deletion{background-color:#ba6236}.hljs-addition{background-color:#7d9726}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#f4f3ec;color:#5f5e4e}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>React æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒç›®æ ‡æ˜¯<strong>å‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“</strong>ã€<strong>é™ä½æ¸²æŸ“æˆæœ¬</strong>ã€<strong>ä¼˜åŒ–èµ„æºåŠ è½½</strong>ï¼Œæœ€ç»ˆæå‡åº”ç”¨å“åº”é€Ÿåº¦å’Œç”¨æˆ·ä½“éªŒã€‚ä»¥ä¸‹ä»ã€Œæ¸²æŸ“ä¼˜åŒ–ã€ã€Œä»£ç ä¸èµ„æºä¼˜åŒ–ã€ã€Œè¿è¡Œæ—¶ä¼˜åŒ–ã€ã€Œæ¶æ„å±‚ä¼˜åŒ–ã€å››ä¸ªç»´åº¦ï¼Œç³»ç»Ÿæ¢³ç† React æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆï¼ŒåŒ…å«å…·ä½“åœºæ™¯ã€å®ç°æ–¹å¼åŠåŸç†ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æ¸²æŸ“ä¼˜åŒ–ï¼šå‡å°‘ä¸å¿…è¦çš„é‡æ¸²æŸ“</h2>
<p>React ä¸­æœ€å¸¸è§çš„æ€§èƒ½é—®é¢˜æ˜¯ã€Œç»„ä»¶æ— æ„ä¹‰é‡æ¸²æŸ“ã€â€”â€” çˆ¶ç»„ä»¶æ¸²æŸ“æ—¶ï¼Œå­ç»„ä»¶å³ä½¿ props/state æœªå˜åŒ–ä¹Ÿè¢«è¿«é‡æ–°æ‰§è¡Œ renderã€‚éœ€ä»ã€Œæ§åˆ¶æ¸²æŸ“è§¦å‘æ¡ä»¶ã€ã€Œéš”ç¦»æ¸²æŸ“ä¸Šä¸‹æ–‡ã€ä¸¤æ–¹é¢ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-1">1. ä¼˜åŒ–ç»„ä»¶æ¸²æŸ“è§¦å‘æ¡ä»¶</h3>
<p>é€šè¿‡æ§åˆ¶ <code>shouldComponentUpdate</code>ï¼ˆç±»ç»„ä»¶ï¼‰æˆ– <code>React.memo</code>ï¼ˆå‡½æ•°ç»„ä»¶ï¼‰ï¼Œåˆ¤æ–­ç»„ä»¶æ˜¯å¦éœ€è¦é‡æ–°æ¸²æŸ“ã€‚</p>
<h4 data-id="heading-2">ï¼ˆ1ï¼‰ç±»ç»„ä»¶ï¼š<code>shouldComponentUpdate</code> ä¸ <code>PureComponent</code></h4>
<ul>
<li><strong><code>shouldComponentUpdate(nextProps, nextState)</code></strong> ï¼šæ‰‹åŠ¨åˆ¤æ–­ props/state æ˜¯å¦å˜åŒ–ï¼Œè¿”å› <code>false</code> å¯é˜»æ­¢é‡æ¸²æŸ“ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼šé¿å…å› çˆ¶ç»„ä»¶ä¼ é€’çš„ä¸å˜ propsï¼ˆå¦‚å‡½æ•°ã€å¯¹è±¡ï¼‰å¯¼è‡´å­ç»„ä»¶é‡æ¸²æŸ“ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Child</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> {
  <span class="hljs-title function_">shouldComponentUpdate</span>(<span class="hljs-params">nextProps</span>) {
    <span class="hljs-comment">// ä»…å½“å…³é”® propsï¼ˆå¦‚ idã€nameï¼‰å˜åŒ–æ—¶æ‰æ¸²æŸ“</span>
    <span class="hljs-keyword">return</span> nextProps.<span class="hljs-property">id</span> !== <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">id</span> || nextProps.<span class="hljs-property">name</span> !== <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">name</span>;
  }
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{this.props.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  }
}
</code></pre>
<ul>
<li><strong><code>React.PureComponent</code></strong>ï¼šå†…ç½®æµ…æ¯”è¾ƒï¼ˆshallow comparisonï¼‰é€»è¾‘çš„ç±»ç»„ä»¶ï¼Œè‡ªåŠ¨å¯¹æ¯” <code>props</code> å’Œ <code>state</code> çš„<strong>è¡¨å±‚å±æ€§</strong>ï¼ˆåŸºæœ¬ç±»å‹ç›´æ¥æ¯”ï¼Œå¼•ç”¨ç±»å‹æ¯”åœ°å€ï¼‰ã€‚</li>
</ul>
<p>âœ… é€‚ç”¨åœºæ™¯ï¼šç»„ä»¶ props/state å‡ä¸ºåŸºæœ¬ç±»å‹ï¼ˆstring/number/booleanï¼‰ï¼Œæˆ–å¼•ç”¨ç±»å‹ï¼ˆå¯¹è±¡/æ•°ç»„ï¼‰ä¸é¢‘ç¹ä¿®æ”¹ã€‚</p>
<p>âŒ æ³¨æ„ï¼šè‹¥ props åŒ…å«å¼•ç”¨ç±»å‹ï¼ˆå¦‚ <code>{ age: 18 }</code>ï¼‰ï¼Œå³ä½¿å†…å®¹ä¸å˜ä½†åœ°å€å˜åŒ–ï¼ˆçˆ¶ç»„ä»¶æ¯æ¬¡æ¸²æŸ“é‡æ–°åˆ›å»ºï¼‰ï¼Œ<code>PureComponent</code> ä»ä¼šè¯¯åˆ¤é‡æ¸²æŸ“ï¼Œéœ€é…åˆã€Œä¸å¯å˜æ•°æ®ã€æˆ–ã€Œç¼“å­˜å¼•ç”¨ã€ä¼˜åŒ–ã€‚</p>
<h4 data-id="heading-3">ï¼ˆ2ï¼‰å‡½æ•°ç»„ä»¶ï¼š<code>React.memo</code></h4>
<p><code>React.memo</code> æ˜¯å‡½æ•°ç»„ä»¶ç‰ˆçš„ã€Œæµ…æ¯”è¾ƒä¼˜åŒ–ã€ï¼Œæœ¬è´¨æ˜¯é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰ï¼ŒåŒ…è£¹å‡½æ•°ç»„ä»¶åï¼Œä»…å½“ props è¡¨å±‚å˜åŒ–æ—¶æ‰é‡æ–°æ¸²æŸ“ã€‚</p>
<ul>
<li>
<p>åŸºç¡€ç”¨æ³•ï¼š</p>
<ul>
<li>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä»…å½“ props.name æˆ– props.id å˜åŒ–æ—¶æ¸²æŸ“</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Child</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">memo</span>(<span class="hljs-function">(<span class="hljs-params">{ name, id }</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
});
</code></pre>
</li>
</ul>
</li>
<li>
<p>è‡ªå®šä¹‰æ¯”è¾ƒé€»è¾‘ï¼šè‹¥éœ€æ·±æ¯”è¾ƒæˆ–è‡ªå®šä¹‰åˆ¤æ–­è§„åˆ™ï¼Œå¯ä¼ é€’ç¬¬äºŒä¸ªå‚æ•°ï¼ˆç±»ä¼¼ <code>shouldComponentUpdate</code>ï¼‰ï¼š</p>
<ul>
<li>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Child</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">memo</span>(
  <span class="hljs-function">(<span class="hljs-params">{ user, id }</span>) =&gt;</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>,
  <span class="hljs-comment">// è‡ªå®šä¹‰æ¯”è¾ƒï¼šä»…å½“ user.id æˆ– id å˜åŒ–æ—¶æ¸²æŸ“</span>
  <span class="hljs-function">(<span class="hljs-params">prevProps, nextProps</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> prevProps.<span class="hljs-property">user</span>.<span class="hljs-property">id</span> === nextProps.<span class="hljs-property">user</span>.<span class="hljs-property">id</span> &amp;&amp; prevProps.<span class="hljs-property">id</span> === nextProps.<span class="hljs-property">id</span>;
  }
);
</code></pre>
</li>
</ul>
</li>
</ul>
<h3 data-id="heading-4">2. ç¼“å­˜å¼•ç”¨ç±»å‹ï¼šé¿å…æµ…æ¯”è¾ƒè¯¯åˆ¤</h3>
<p>çˆ¶ç»„ä»¶æ¸²æŸ“æ—¶ï¼Œè‹¥ä¼ é€’ç»™å­ç»„ä»¶çš„ã€Œå¼•ç”¨ç±»å‹ propsã€ï¼ˆå‡½æ•°ã€å¯¹è±¡ã€æ•°ç»„ï¼‰æ¯æ¬¡éƒ½æ˜¯æ–°åˆ›å»ºçš„ï¼ˆå³ä½¿å†…å®¹ä¸å˜ï¼‰ï¼Œä¼šå¯¼è‡´ <code>PureComponent</code>/<code>React.memo</code> è¯¯åˆ¤ä¸ºã€Œprops å˜åŒ–ã€ï¼Œè§¦å‘ä¸å¿…è¦é‡æ¸²æŸ“ã€‚éœ€é€šè¿‡ç¼“å­˜å¼•ç”¨è§£å†³ã€‚</p>
<h4 data-id="heading-5">ï¼ˆ1ï¼‰ç¼“å­˜å‡½æ•°ï¼š<code>useCallback</code>ï¼ˆå‡½æ•°ç»„ä»¶ï¼‰</h4>
<p><code>useCallback</code> ç¼“å­˜å‡½æ•°å¼•ç”¨ï¼Œç¡®ä¿ç»„ä»¶é‡æ¸²æŸ“æ—¶ï¼Œè‹¥ä¾èµ–é¡¹æœªå˜åŒ–ï¼Œè¿”å›çš„å‡½æ•°å¼•ç”¨å§‹ç»ˆä¸å˜ã€‚</p>
<ul>
<li>
<p>é—®é¢˜åœºæ™¯ï¼šçˆ¶ç»„ä»¶æ¯æ¬¡æ¸²æŸ“é‡æ–°åˆ›å»ºå‡½æ•°ï¼Œå¯¼è‡´å­ç»„ä»¶è¯¯æ¸²æŸ“ï¼š</p>
<ul>
<li>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// é”™è¯¯ï¼šæ¯æ¬¡ Parent æ¸²æŸ“ï¼ŒhandleClick éƒ½æ˜¯æ–°å‡½æ•°ï¼ŒChildï¼ˆReact.memoï¼‰ä¼šé‡æ¸²æŸ“</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Parent</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç‚¹å‡»"</span>);
  };
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span> /&gt;</span></span>;
};
</code></pre>
</li>
</ul>
</li>
<li>
<p>ä¼˜åŒ–æ–¹æ¡ˆï¼šç”¨ <code>useCallback</code> ç¼“å­˜å‡½æ•°ï¼Œä¾èµ–é¡¹ä¸ºç©ºæ•°ç»„æ—¶ï¼Œå‡½æ•°å¼•ç”¨æ°¸ä¹…ä¸å˜ï¼š</p>
<ul>
<li>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">Parent</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// æ­£ç¡®ï¼šä¾èµ–é¡¹ä¸ºç©ºï¼ŒhandleClick å¼•ç”¨å§‹ç»ˆä¸å˜</span>
  <span class="hljs-keyword">const</span> handleClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç‚¹å‡»"</span>);
  }, []); 
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span> /&gt;</span></span>;
};
</code></pre>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-6">ï¼ˆ2ï¼‰ç¼“å­˜å¯¹è±¡/æ•°ç»„ï¼š<code>useMemo</code>ï¼ˆå‡½æ•°ç»„ä»¶ï¼‰</h4>
<p><code>useMemo</code> ç¼“å­˜è®¡ç®—ç»“æœï¼ˆå¦‚å¯¹è±¡ã€æ•°ç»„ã€å¤æ‚è®¡ç®—å€¼ï¼‰ï¼Œç¡®ä¿ä¾èµ–é¡¹æœªå˜åŒ–æ—¶ï¼Œè¿”å›çš„å¼•ç”¨ä¸å˜ã€‚</p>
<ul>
<li>
<p>é—®é¢˜åœºæ™¯ï¼šçˆ¶ç»„ä»¶æ¯æ¬¡æ¸²æŸ“é‡æ–°åˆ›å»ºå¯¹è±¡ï¼Œå¯¼è‡´å­ç»„ä»¶è¯¯æ¸²æŸ“ï¼š</p>
<ul>
<li>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// é”™è¯¯ï¼šæ¯æ¬¡ Parent æ¸²æŸ“ï¼Œuser éƒ½æ˜¯æ–°å¯¹è±¡ï¼ŒChildï¼ˆReact.memoï¼‰ä¼šé‡æ¸²æŸ“</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Parent</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> user = { <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">20</span> }; 
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span> /&gt;</span></span>;
};
</code></pre>
</li>
</ul>
</li>
<li>
<p>ä¼˜åŒ–æ–¹æ¡ˆï¼šç”¨ <code>useMemo</code> ç¼“å­˜å¯¹è±¡ï¼Œä¾èµ–é¡¹ä¸ºç©ºæ—¶ï¼Œå¯¹è±¡å¼•ç”¨ä¸å˜ï¼š</p>
<ul>
<li>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">Parent</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// æ­£ç¡®ï¼šä¾èµ–é¡¹ä¸ºç©ºï¼Œuser å¼•ç”¨å§‹ç»ˆä¸å˜</span>
  <span class="hljs-keyword">const</span> user = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> ({ <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">20</span> }), []); 
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span> /&gt;</span></span>;
};
</code></pre>
</li>
<li>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä»…å½“ list æˆ– keyword å˜åŒ–æ—¶ï¼Œæ‰é‡æ–°è¿‡æ»¤æ•°æ®</span>
<span class="hljs-keyword">const</span> filteredList = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> list.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">name</span>.<span class="hljs-title function_">includes</span>(keyword));
}, [list, keyword]);
</code></pre>
</li>
</ul>
</li>
</ul>
<h3 data-id="heading-7">3. éš”ç¦»æ¸²æŸ“ä¸Šä¸‹æ–‡ï¼šé¿å…çˆ¶ç»„ä»¶æ¸²æŸ“å½±å“å­ç»„ä»¶</h3>
<p>è‹¥å­ç»„ä»¶ä¸çˆ¶ç»„ä»¶çŠ¶æ€å®Œå…¨æ— å…³ï¼Œå¯é€šè¿‡ã€ŒçŠ¶æ€æå‡ã€ã€Œç‹¬ç«‹ç»„ä»¶æ‹†åˆ†ã€æˆ–ã€Œä½¿ç”¨ <code>React.memo</code> éš”ç¦»ã€ï¼Œé¿å…çˆ¶ç»„ä»¶æ¸²æŸ“æ—¶å­ç»„ä»¶è¢«åŠ¨é‡æ¸²æŸ“ã€‚</p>
<h4 data-id="heading-8">å…¸å‹åœºæ™¯ï¼šæ‹†åˆ†ã€Œé¢‘ç¹æ›´æ–°ç»„ä»¶ã€ä¸ã€Œé™æ€ç»„ä»¶ã€</h4>
<p>çˆ¶ç»„ä»¶åŒ…å«ã€Œé¢‘ç¹æ›´æ–°çš„éƒ¨åˆ†ã€ï¼ˆå¦‚è®¡æ•°å™¨ï¼‰å’Œã€Œé™æ€éƒ¨åˆ†ã€ï¼ˆå¦‚æ ‡é¢˜ã€è¯´æ˜ï¼‰ï¼Œè‹¥ä¸æ‹†åˆ†ï¼Œé™æ€éƒ¨åˆ†ä¼šéšè®¡æ•°å™¨æ›´æ–°è€Œé‡æ¸²æŸ“ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// é”™è¯¯ï¼šCounter æ›´æ–°æ—¶ï¼ŒTitle ä¹Ÿä¼šé‡æ¸²æŸ“</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Parent</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Title</span> <span class="hljs-attr">text</span>=<span class="hljs-string">"é™æ€æ ‡é¢˜"</span> /&gt;</span> {/* æ— éœ€æ›´æ–° */}
      <span class="hljs-tag">&lt;<span class="hljs-name">Counter</span> <span class="hljs-attr">count</span>=<span class="hljs-string">{count}</span> <span class="hljs-attr">onIncrement</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count + 1)} /&gt; {/* é¢‘ç¹æ›´æ–° */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p>ä¼˜åŒ–æ–¹æ¡ˆï¼šç”¨ <code>React.memo</code> åŒ…è£¹ <code>Title</code>ï¼Œæˆ–æ‹†åˆ† <code>Parent</code> ä¸ºã€ŒçŠ¶æ€ç»„ä»¶ã€å’Œã€Œé™æ€ç»„ä»¶ã€ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ­£ç¡®ï¼šTitle è¢« React.memo åŒ…è£¹ï¼Œprops ä¸å˜æ—¶ä¸é‡æ¸²æŸ“</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Title</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">memo</span>(<span class="hljs-function">(<span class="hljs-params">{ text }</span>) =&gt;</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{text}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>);

<span class="hljs-keyword">const</span> <span class="hljs-title function_">Parent</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Title</span> <span class="hljs-attr">text</span>=<span class="hljs-string">"é™æ€æ ‡é¢˜"</span> /&gt;</span> {/* ä¸é‡æ¸²æŸ“ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">Counter</span> <span class="hljs-attr">count</span>=<span class="hljs-string">{count}</span> <span class="hljs-attr">onIncrement</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count + 1)} /&gt; {/* æ­£å¸¸æ¸²æŸ“ */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h2 data-id="heading-9">äºŒã€ä»£ç ä¸èµ„æºä¼˜åŒ–ï¼šé™ä½æ¸²æŸ“æˆæœ¬</h2>
<p>å³ä½¿æ¸²æŸ“è§¦å‘åˆç†ï¼Œè‹¥ä»£ç é€»è¾‘å¤æ‚ã€èµ„æºä½“ç§¯å¤§ï¼Œä»ä¼šå¯¼è‡´æ¸²æŸ“ç¼“æ…¢ã€‚éœ€ä»ã€Œä»£ç ç²¾ç®€ã€ã€Œèµ„æºåŠ è½½ã€ã€ŒDOM ä¼˜åŒ–ã€ä¸‰æ–¹é¢å…¥æ‰‹ã€‚</p>
<h3 data-id="heading-10">1. ä»£ç å±‚é¢ï¼šç²¾ç®€é€»è¾‘ä¸ä¾èµ–</h3>
<h4 data-id="heading-11">ï¼ˆ1ï¼‰é¿å…æ¸²æŸ“æ—¶æ‰§è¡Œé«˜å¼€é”€æ“ä½œ</h4>
<p>æ¸²æŸ“é˜¶æ®µï¼ˆ<code>render</code> æˆ–å‡½æ•°ç»„ä»¶ä¸»ä½“ï¼‰åº”ä»…åšã€ŒUI æè¿°ç›¸å…³é€»è¾‘ã€ï¼Œé¿å…æ‰§è¡Œè€—æ—¶æ“ä½œï¼ˆå¦‚ API è¯·æ±‚ã€å¤§æ•°æ®è®¡ç®—ã€DOM æ“ä½œï¼‰ã€‚</p>
<ul>
<li>
<p>é”™è¯¯ç¤ºä¾‹ï¼šæ¸²æŸ“æ—¶è¯·æ±‚æ•°æ®ï¼Œå¯¼è‡´æ¯æ¬¡æ¸²æŸ“éƒ½è§¦å‘è¯·æ±‚ï¼š</p>
<ul>
<li>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">Child</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// é”™è¯¯ï¼šæ¯æ¬¡æ¸²æŸ“éƒ½ä¼šæ‰§è¡Œ fetchï¼Œä¸”å¯èƒ½å¯¼è‡´ç«æ€é—®é¢˜</span>
  <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"/api/data"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>()); 
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
};
</code></pre>
</li>
</ul>
</li>
<li>
<p>æ­£ç¡®æ–¹æ¡ˆï¼šå°†é«˜å¼€é”€æ“ä½œæ”¾åœ¨ã€Œå‰¯ä½œç”¨é’©å­ã€ä¸­ï¼ˆ<code>useEffect</code>/<code>componentDidMount</code>ï¼‰ï¼Œæ§åˆ¶æ‰§è¡Œæ—¶æœºï¼š</p>
<ul>
<li>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">Child</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// æ­£ç¡®ï¼šä»…ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡è¯·æ±‚</span>
    <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"/api/data"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>());
  }, []); 
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
};
</code></pre>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-12">ï¼ˆ2ï¼‰æŒ‰éœ€å¼•å…¥ä¾èµ–ä¸ç»„ä»¶</h4>
<ul>
<li><strong>ç¬¬ä¸‰æ–¹åº“æŒ‰éœ€å¼•å…¥</strong>ï¼šé¿å…å…¨é‡å¼•å…¥å¤§ä½“ç§¯åº“ï¼ˆå¦‚ Lodashã€Ant Designï¼‰ï¼Œä»…å¼•å…¥æ‰€éœ€æ¨¡å—ï¼Œå‡å°‘æ‰“åŒ…ä½“ç§¯ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼šLodash æŒ‰éœ€å¼•å…¥ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// é”™è¯¯ï¼šå…¨é‡å¼•å…¥ Lodashï¼ˆä½“ç§¯å¤§ï¼‰</span>
<span class="hljs-keyword">import</span> _ <span class="hljs-keyword">from</span> <span class="hljs-string">"lodash"</span>;
<span class="hljs-comment">// æ­£ç¡®ï¼šä»…å¼•å…¥ debounce æ¨¡å—</span>
<span class="hljs-keyword">import</span> debounce <span class="hljs-keyword">from</span> <span class="hljs-string">"lodash/debounce"</span>;
</code></pre>
<ul>
<li><strong>ç»„ä»¶æŒ‰éœ€åŠ è½½</strong>ï¼šé€šè¿‡ã€ŒåŠ¨æ€ <code>import()</code> + <code>React.lazy</code> + <code>Suspense</code>ã€ï¼Œå®ç°è·¯ç”±æˆ–ç»„ä»¶çº§åˆ«çš„æŒ‰éœ€åŠ è½½ï¼Œå‡å°‘é¦–å±åŠ è½½æ—¶é—´ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼šè·¯ç”±æŒ‰éœ€åŠ è½½ï¼ˆé…åˆ React Routerï¼‰ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { lazy, <span class="hljs-title class_">Suspense</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">BrowserRouter</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">Router</span>, <span class="hljs-title class_">Route</span>, <span class="hljs-title class_">Routes</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-router-dom"</span>;

<span class="hljs-comment">// åŠ¨æ€å¼•å…¥ç»„ä»¶ï¼ˆæ‰“åŒ…æ—¶æ‹†åˆ†ä¸ºç‹¬ç«‹ chunkï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Home</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">"./Home"</span>));
<span class="hljs-keyword">const</span> <span class="hljs-title class_">About</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">"./About"</span>));

<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Router</span>&gt;</span>
    {/* Suspense æä¾›åŠ è½½ fallbackï¼ˆå¦‚éª¨æ¶å±ï¼‰ */}
    <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">div</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">Routes</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Home</span> /&gt;</span>} /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/about"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">About</span> /&gt;</span>} /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">Routes</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">Router</span>&gt;</span></span>
);
</code></pre>
<h3 data-id="heading-13">2. èµ„æºå±‚é¢ï¼šä¼˜åŒ–å›¾ç‰‡ä¸é™æ€èµ„æº</h3>
<ul>
<li>
<p><strong>å›¾ç‰‡ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ã€Œå“åº”å¼å›¾ç‰‡ã€ï¼ˆ<code>srcset</code> + <code>sizes</code>ï¼‰ï¼Œæ ¹æ®è®¾å¤‡åˆ†è¾¨ç‡åŠ è½½åˆé€‚å°ºå¯¸çš„å›¾ç‰‡ï¼›</li>
<li>é‡‡ç”¨ç°ä»£å›¾ç‰‡æ ¼å¼ï¼ˆWebPã€AVIFï¼‰ï¼Œæ¯” JPG/PNG ä½“ç§¯å° 25%-50%ï¼›</li>
<li>å›¾ç‰‡æ‡’åŠ è½½ï¼šç”¨ <code>loading="lazy"</code>ï¼ˆåŸç”Ÿï¼‰æˆ– React æ‡’åŠ è½½åº“ï¼ˆå¦‚ <code>react-lazyload</code>ï¼‰ï¼Œé¿å…é¦–å±åŠ è½½éå¯è§†åŒºåŸŸå›¾ç‰‡ã€‚</li>
<li>Â Â ç¤ºä¾‹ï¼šåŸç”Ÿæ‡’åŠ è½½å›¾ç‰‡ï¼š</li>
<li>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> 
  <span class="hljs-attr">src</span>=<span class="hljs-string">"image.webp"</span> 
  <span class="hljs-attr">alt</span>=<span class="hljs-string">"æè¿°"</span> 
  <span class="hljs-attr">loading</span>=<span class="hljs-string">"lazy"</span> // <span class="hljs-attr">å¯è§†åŒºåŸŸå¤–å›¾ç‰‡å»¶è¿ŸåŠ è½½</span>
  <span class="hljs-attr">srcset</span>=<span class="hljs-string">"image-480w.webp 480w, image-800w.webp 800w"</span> 
  <span class="hljs-attr">sizes</span>=<span class="hljs-string">"(max-width: 600px) 480px, 800px"</span>
/&gt;</span>
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>é™æ€èµ„æº CDN åˆ†å‘</strong>ï¼šå°† JSã€CSSã€å›¾ç‰‡ç­‰èµ„æºéƒ¨ç½²åˆ° CDNï¼Œåˆ©ç”¨ CDN èŠ‚ç‚¹ç¼“å­˜å’Œå°±è¿‘è®¿é—®ï¼Œé™ä½èµ„æºåŠ è½½å»¶è¿Ÿã€‚</p>
</li>
</ul>
<h3 data-id="heading-14">3. DOM å±‚é¢ï¼šå‡å°‘ DOM æ“ä½œä¸èŠ‚ç‚¹æ•°é‡</h3>
<p>React æœ€ç»ˆä¼šå°†è™šæ‹Ÿ DOM è½¬æ¢ä¸ºçœŸå® DOMï¼ŒDOM èŠ‚ç‚¹è¶Šå¤šã€æ“ä½œè¶Šé¢‘ç¹ï¼Œæ€§èƒ½å¼€é”€è¶Šå¤§ã€‚</p>
<h4 data-id="heading-15">ï¼ˆ1ï¼‰å‡å°‘ä¸å¿…è¦çš„ DOM èŠ‚ç‚¹</h4>
<ul>
<li>
<p>é¿å…åµŒå¥—è¿‡æ·±çš„ DOM ç»“æ„ï¼ˆå¦‚ <code>div &gt; div &gt; div &gt; span</code>ï¼‰ï¼Œå°½é‡æ‰å¹³åŒ–ï¼›</p>
</li>
<li>
<p>ç”¨ã€Œç¢ç‰‡ï¼ˆFragmentï¼‰ã€ä»£æ›¿æ— æ„ä¹‰çš„å®¹å™¨ divï¼Œå‡å°‘å¤šä½™èŠ‚ç‚¹ï¼š</p>
<ul>
<li>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// é”™è¯¯ï¼šå¤šä½™çš„ div å®¹å™¨</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">List</span> = (<span class="hljs-params"/>) =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Item1</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Item2</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);
<span class="hljs-comment">// æ­£ç¡®ï¼šç”¨ Fragment åŒ…è£¹ï¼Œä¸ç”Ÿæˆé¢å¤– DOM èŠ‚ç‚¹</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">List</span> = (<span class="hljs-params"/>) =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Item1</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Item2</span> /&gt;</span>
  <span class="hljs-tag">&lt;/&gt;</span></span>
);
</code></pre>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-16">ï¼ˆ2ï¼‰ä¼˜åŒ–åˆ—è¡¨æ¸²æŸ“ï¼š<code>key</code> ä¸è™šæ‹Ÿåˆ—è¡¨</h4>
<p>åˆ—è¡¨æ˜¯ React ä¸­å¸¸è§çš„é«˜é¢‘æ¸²æŸ“åœºæ™¯ï¼Œéœ€é‡ç‚¹ä¼˜åŒ–ï¼š</p>
<ul>
<li><strong>è®¾ç½®å”¯ä¸€ä¸”ç¨³å®šçš„</strong> <strong><code>key</code></strong>ï¼š<code>key</code> æ˜¯ React è¯†åˆ«åˆ—è¡¨é¡¹èº«ä»½çš„æ ‡è¯†ï¼Œéœ€æ»¡è¶³ã€Œå”¯ä¸€ã€ã€Œç¨³å®šã€ï¼ˆä¸éšæ¸²æŸ“é¡ºåºå˜åŒ–ï¼‰ã€‚</li>
</ul>
<p>âŒ é”™è¯¯ï¼šç”¨ç´¢å¼•ï¼ˆindexï¼‰ä½œä¸º keyï¼ˆè‹¥åˆ—è¡¨åˆ é™¤/æ’å…¥é¡¹ï¼Œä¼šå¯¼è‡´ key ä¸é¡¹é”™ä½ï¼Œå¼•å‘ DOM å¤ç”¨é”™è¯¯å’Œé‡æ¸²æŸ“ï¼‰ï¼›</p>
<p>âœ… æ­£ç¡®ï¼šç”¨åˆ—è¡¨é¡¹çš„å”¯ä¸€ IDï¼ˆå¦‚åç«¯è¿”å›çš„ <code>id</code>ï¼‰ä½œä¸º keyï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">TodoList</span> = (<span class="hljs-params">{ todos }</span>) =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
    {todos.map(todo =&gt; (
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{todo.id}</span>&gt;</span>{todo.content}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span> // ç”¨å”¯ä¸€ ID ä½œä¸º key
    ))}
  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span>
);
</code></pre>
<ul>
<li><strong>è™šæ‹Ÿåˆ—è¡¨ï¼ˆVirtual Listï¼‰</strong> ï¼šå½“åˆ—è¡¨æ•°æ®é‡æå¤§ï¼ˆå¦‚ 1000+ é¡¹ï¼‰æ—¶ï¼Œå³ä½¿åªæ¸²æŸ“å¯è§†åŒºåŸŸçš„é¡¹ï¼Œéšè—éå¯è§†åŒºåŸŸçš„é¡¹ï¼Œå¤§å¹…å‡å°‘ DOM èŠ‚ç‚¹æ•°é‡ã€‚</li>
</ul>
<p>å¸¸ç”¨åº“ï¼š<code>react-window</code>ï¼ˆè½»é‡ï¼‰ã€<code>react-virtualized</code>ï¼ˆåŠŸèƒ½å…¨ï¼‰ã€‚</p>
<p>ç¤ºä¾‹ï¼ˆ<code>react-window</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">FixedSizeList</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">List</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-window"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">BigList</span> = (<span class="hljs-params">{ data }</span>) =&gt; {
  <span class="hljs-comment">// æ¸²æŸ“å•ä¸ªåˆ—è¡¨é¡¹</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">Row</span> = (<span class="hljs-params">{ index, style }</span>) =&gt; (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{style}</span>&gt;</span>{data[index]}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">List</span>
      <span class="hljs-attr">height</span>=<span class="hljs-string">{500}</span> // <span class="hljs-attr">åˆ—è¡¨å®¹å™¨é«˜åº¦</span>
      <span class="hljs-attr">itemCount</span>=<span class="hljs-string">{data.length}</span> // <span class="hljs-attr">æ€»æ•°æ®é‡</span>
      <span class="hljs-attr">itemSize</span>=<span class="hljs-string">{50}</span> // <span class="hljs-attr">å•ä¸ªåˆ—è¡¨é¡¹é«˜åº¦</span>
      <span class="hljs-attr">width</span>=<span class="hljs-string">"100%"</span> // <span class="hljs-attr">åˆ—è¡¨å®¹å™¨å®½åº¦</span>
    &gt;</span>
      {Row}
    <span class="hljs-tag">&lt;/<span class="hljs-name">List</span>&gt;</span></span>
  );
};
</code></pre>
<h2 data-id="heading-17">ä¸‰ã€è¿è¡Œæ—¶ä¼˜åŒ–ï¼šæå‡äº¤äº’å“åº”é€Ÿåº¦</h2>
<p>è¿è¡Œæ—¶ä¼˜åŒ–èšç„¦äºã€Œç”¨æˆ·äº¤äº’ã€åœºæ™¯ï¼ˆå¦‚è¾“å…¥ã€ç‚¹å‡»ã€æ»šåŠ¨ï¼‰ï¼Œå‡å°‘å»¶è¿Ÿï¼Œæå‡æµç•…åº¦ã€‚</p>
<h3 data-id="heading-18">1. é˜²æŠ–ï¼ˆDebounceï¼‰ä¸èŠ‚æµï¼ˆThrottleï¼‰</h3>
<p>å¯¹äºé«˜é¢‘è§¦å‘çš„äº‹ä»¶ï¼ˆå¦‚è¾“å…¥æ¡† <code>onChange</code>ã€æ»šåŠ¨ <code>onScroll</code>ã€çª—å£ resizeï¼‰ï¼Œéœ€é€šè¿‡é˜²æŠ–æˆ–èŠ‚æµé™åˆ¶å‡½æ•°æ‰§è¡Œé¢‘ç‡ï¼Œé¿å…é¢‘ç¹è§¦å‘å¯¼è‡´å¡é¡¿ã€‚</p>
<ul>
<li><strong>é˜²æŠ–ï¼ˆDebounceï¼‰</strong> ï¼šäº‹ä»¶è§¦å‘åå»¶è¿Ÿ N æ¯«ç§’æ‰§è¡Œå‡½æ•°ï¼Œè‹¥ N æ¯«ç§’å†…å†æ¬¡è§¦å‘ï¼Œåˆ™é‡æ–°è®¡æ—¶ï¼ˆé€‚ç”¨äºè¾“å…¥æœç´¢ã€è¡¨å•æäº¤ï¼‰ã€‚</li>
<li><strong>èŠ‚æµï¼ˆThrottleï¼‰</strong> ï¼šæ¯éš” N æ¯«ç§’ä»…æ‰§è¡Œä¸€æ¬¡å‡½æ•°ï¼Œæ— è®ºäº‹ä»¶è§¦å‘å¤šå°‘æ¬¡ï¼ˆé€‚ç”¨äºæ»šåŠ¨åŠ è½½ã€çª—å£ resizeï¼‰ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼šè¾“å…¥æ¡†æœç´¢é˜²æŠ–ï¼ˆç”¨ Lodash çš„ <code>debounce</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { useState, useCallback } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> debounce <span class="hljs-keyword">from</span> <span class="hljs-string">"lodash/debounce"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">SearchInput</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [value, setValue] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">""</span>);

  <span class="hljs-comment">// ç”¨ useCallback ç¼“å­˜é˜²æŠ–å‡½æ•°ï¼Œé¿å…æ¯æ¬¡æ¸²æŸ“é‡æ–°åˆ›å»º</span>
  <span class="hljs-keyword">const</span> fetchSearchResult = <span class="hljs-title function_">useCallback</span>(
    <span class="hljs-title function_">debounce</span>(<span class="hljs-function">(<span class="hljs-params">keyword</span>) =&gt;</span> {
      <span class="hljs-comment">// å‘é€æœç´¢è¯·æ±‚</span>
      <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/api/search?keyword=<span class="hljs-subst">${keyword}</span>`</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>());
    }, <span class="hljs-number">300</span>), <span class="hljs-comment">// 300ms é˜²æŠ–å»¶è¿Ÿ</span>
    []
  );

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleChange</span> = (<span class="hljs-params">e</span>) =&gt; {
    <span class="hljs-keyword">const</span> keyword = e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>;
    <span class="hljs-title function_">setValue</span>(keyword);
    <span class="hljs-title function_">fetchSearchResult</span>(keyword); <span class="hljs-comment">// è§¦å‘é˜²æŠ–å‡½æ•°</span>
  };

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange}</span> /&gt;</span></span>;
};
</code></pre>
<h3 data-id="heading-19">2. ä¼˜åŒ–çŠ¶æ€æ›´æ–°ï¼šæ‰¹é‡æ›´æ–°ä¸ä¼˜å…ˆçº§</h3>
<p>React å†…éƒ¨ä¼šå¯¹ã€ŒåŒæ­¥çŠ¶æ€æ›´æ–°ã€è¿›è¡Œæ‰¹é‡åˆå¹¶ï¼Œå‡å°‘æ¸²æŸ“æ¬¡æ•°ï¼Œä½†ã€Œå¼‚æ­¥åœºæ™¯ã€ï¼ˆå¦‚ <code>setTimeout</code>ã€Promise å›è°ƒï¼‰ä¸­ï¼Œæ‰¹é‡æ›´æ–°ä¼šå¤±æ•ˆï¼Œå¯¼è‡´å¤šæ¬¡æ¸²æŸ“ã€‚</p>
<h4 data-id="heading-20">ï¼ˆ1ï¼‰å¼ºåˆ¶æ‰¹é‡æ›´æ–°ï¼š<code>unstable_batchedUpdates</code></h4>
<p>è‹¥éœ€åœ¨å¼‚æ­¥åœºæ™¯ä¸­æ‰¹é‡æ›´æ–°çŠ¶æ€ï¼Œå¯ä½¿ç”¨ React æä¾›çš„ <code>unstable_batchedUpdates</code>ï¼ˆæ³¨æ„ï¼šè™½å¸¦ <code>unstable</code>ï¼Œä½†åœ¨å®é™…é¡¹ç›®ä¸­å·²å¹¿æ³›ä½¿ç”¨ï¼Œæœªæ¥å¯èƒ½è½¬æ­£ï¼‰ã€‚</p>
<p>ç¤ºä¾‹ï¼šPromise å›è°ƒä¸­æ‰¹é‡æ›´æ–°çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { unstable_batchedUpdates } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-dom"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">Parent</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [count1, setCount1] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> [count2, setCount2] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"/api/data"</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>())
      .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// æœªæ‰¹é‡ï¼šä¼šè§¦å‘ 2 æ¬¡æ¸²æŸ“</span>
        <span class="hljs-comment">// setCount1(count1 + 1);</span>
        <span class="hljs-comment">// setCount2(count2 + 1);</span>

        <span class="hljs-comment">// æ‰¹é‡æ›´æ–°ï¼šä»…è§¦å‘ 1 æ¬¡æ¸²æŸ“</span>
        <span class="hljs-title function_">unstable_batchedUpdates</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-title function_">setCount1</span>(count1 + <span class="hljs-number">1</span>);
          <span class="hljs-title function_">setCount2</span>(count2 + <span class="hljs-number">1</span>);
        });
      });
  };

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span>&gt;</span>æ›´æ–°<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
};
</code></pre>
<h4 data-id="heading-21">ï¼ˆ2ï¼‰ä¼˜å…ˆçº§è°ƒåº¦ï¼š<code>useDeferredValue</code> ä¸ <code>startTransition</code></h4>
<p>React 18 å¼•å…¥ã€Œå¹¶å‘æ¸²æŸ“ã€æœºåˆ¶ï¼Œå…è®¸å°†çŠ¶æ€æ›´æ–°æ ‡è®°ä¸ºã€Œä½ä¼˜å…ˆçº§ã€ï¼Œé¿å…é«˜ä¼˜å…ˆçº§æ›´æ–°ï¼ˆå¦‚è¾“å…¥ã€ç‚¹å‡»ï¼‰è¢«é˜»å¡ã€‚</p>
<ul>
<li><strong><code>useDeferredValue</code></strong>ï¼šå»¶è¿Ÿæ›´æ–°ä½ä¼˜å…ˆçº§çŠ¶æ€ï¼ˆå¦‚åˆ—è¡¨è¿‡æ»¤ç»“æœï¼‰ï¼Œä¼˜å…ˆä¿è¯é«˜ä¼˜å…ˆçº§æ“ä½œï¼ˆå¦‚è¾“å…¥æ¡†è¾“å…¥ï¼‰çš„å“åº”é€Ÿåº¦ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼šè¾“å…¥æ—¶ä¼˜å…ˆæ›´æ–°è¾“å…¥æ¡†ï¼Œå»¶è¿Ÿæ›´æ–°è¿‡æ»¤åçš„åˆ—è¡¨ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { useDeferredValue, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">SearchList</span> = (<span class="hljs-params">{ list }</span>) =&gt; {
  <span class="hljs-keyword">const</span> [keyword, setKeyword] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">""</span>);
  <span class="hljs-comment">// å»¶è¿Ÿæ›´æ–°è¿‡æ»¤ç»“æœï¼ˆä½ä¼˜å…ˆçº§ï¼‰</span>
  <span class="hljs-keyword">const</span> deferredKeyword = <span class="hljs-title function_">useDeferredValue</span>(keyword);
  <span class="hljs-comment">// ä»…å½“ deferredKeyword å˜åŒ–æ—¶ï¼Œæ‰é‡æ–°è¿‡æ»¤ï¼ˆé¿å…è¾“å…¥æ—¶é¢‘ç¹è®¡ç®—ï¼‰</span>
  <span class="hljs-keyword">const</span> filteredList = list.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-title function_">includes</span>(deferredKeyword));

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
        <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> 
        <span class="hljs-attr">value</span>=<span class="hljs-string">{keyword}</span> 
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setKeyword(e.target.value)} 
        placeholder="è¾“å…¥æœç´¢"
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
        {filteredList.map((item, idx) =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{idx}</span>&gt;</span>{item}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<ul>
<li><strong><code>startTransition</code></strong>ï¼šå°†çŠ¶æ€æ›´æ–°æ ‡è®°ä¸ºã€Œè¿‡æ¸¡ä»»åŠ¡ã€ï¼ˆä½ä¼˜å…ˆçº§ï¼‰ï¼Œç¡®ä¿é«˜ä¼˜å…ˆçº§æ›´æ–°ï¼ˆå¦‚ç‚¹å‡»æŒ‰é’®ï¼‰ä¸è¢«é˜»å¡ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼šç‚¹å‡»æŒ‰é’®æ—¶ï¼Œä¼˜å…ˆæ›´æ–°æŒ‰é’®çŠ¶æ€ï¼Œå»¶è¿Ÿæ›´æ–°å¤§æ•°æ®åˆ—è¡¨ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { useState, startTransition } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">BigDataList</span> = (<span class="hljs-params">{ data }</span>) =&gt; {
  <span class="hljs-keyword">const</span> [isLoading, setIsLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [filteredData, setFilteredData] = <span class="hljs-title function_">useState</span>([]);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleFilter</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// é«˜ä¼˜å…ˆçº§ï¼šç«‹å³æ›´æ–°åŠ è½½çŠ¶æ€</span>
    <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-comment">// ä½ä¼˜å…ˆçº§ï¼šæ ‡è®°ä¸ºè¿‡æ¸¡ä»»åŠ¡ï¼Œé¿å…é˜»å¡ UI</span>
    <span class="hljs-title function_">startTransition</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// è€—æ—¶è¿‡æ»¤æ“ä½œ</span>
      <span class="hljs-keyword">const</span> result = data.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">value</span> &gt; <span class="hljs-number">1000</span>);
      <span class="hljs-title function_">setFilteredData</span>(result);
      <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">false</span>);
    });
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleFilter}</span> <span class="hljs-attr">disabled</span>=<span class="hljs-string">{isLoading}</span>&gt;</span>
        è¿‡æ»¤æ•°æ®
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      {isLoading ? <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> : (
        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>{filteredData.map(item =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{item.id}</span>&gt;</span>{item.name}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>)}<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h2 data-id="heading-22">å››ã€æ¶æ„å±‚ä¼˜åŒ–ï¼šä»æ ¹æºå‡å°‘æ€§èƒ½ç“¶é¢ˆ</h2>
<p>è‹¥åº”ç”¨è§„æ¨¡è¾ƒå¤§ï¼Œéœ€ä»æ¶æ„è®¾è®¡å±‚é¢ä¼˜åŒ–ï¼Œé¿å…åæœŸæ€§èƒ½é—®é¢˜éš¾ä»¥ä¿®å¤ã€‚</p>
<h3 data-id="heading-23">1. çŠ¶æ€ç®¡ç†ä¼˜åŒ–</h3>
<ul>
<li>
<p><strong>çŠ¶æ€åˆ†å±‚</strong>ï¼šå°†çŠ¶æ€åˆ†ä¸ºã€Œå…¨å±€çŠ¶æ€ã€ï¼ˆå¦‚ç”¨æˆ·ä¿¡æ¯ã€ä¸»é¢˜ï¼‰å’Œã€Œå±€éƒ¨çŠ¶æ€ã€ï¼ˆå¦‚ç»„ä»¶å†…éƒ¨å¼¹çª—æ˜¾ç¤º/éšè—ï¼‰ï¼Œé¿å…å±€éƒ¨çŠ¶æ€ä¸Šå‡åˆ°å…¨å±€ï¼ˆå¦‚ Reduxï¼‰å¯¼è‡´ä¸å¿…è¦çš„å…¨å±€é‡æ¸²æŸ“ã€‚</p>
<ul>
<li>å…¨å±€çŠ¶æ€ï¼šç”¨ Redux Toolkitï¼ˆé…åˆ <code>createSelector</code> ç¼“å­˜è®¡ç®—ç»“æœï¼‰ã€Zustandã€Jotai ç­‰ï¼Œå‡å°‘å…¨å±€çŠ¶æ€æ›´æ–°æ—¶çš„ç»„ä»¶é‡æ¸²æŸ“ï¼›</li>
<li>å±€éƒ¨çŠ¶æ€ï¼šä¼˜å…ˆç”¨ <code>useState</code>/<code>useReducer</code>ï¼Œé¿å…è¿‡åº¦ä¾èµ–å…¨å±€çŠ¶æ€ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç¼“å­˜é€‰æ‹©å™¨ï¼ˆSelectorï¼‰</strong> ï¼šåœ¨ Redux ä¸­ï¼Œç”¨ <code>reselect</code> åº“çš„ <code>createSelector</code> ç¼“å­˜æ´¾ç”Ÿæ•°æ®ï¼ˆå¦‚è¿‡æ»¤ã€æ’åºåçš„åˆ—è¡¨ï¼‰ï¼Œé¿å…æ¯æ¬¡å…¨å±€çŠ¶æ€æ›´æ–°æ—¶é‡å¤è®¡ç®—ã€‚</p>
</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { createSelector } <span class="hljs-keyword">from</span> <span class="hljs-string">"@reduxjs/toolkit"</span>;

<span class="hljs-comment">// åŸºç¡€é€‰æ‹©å™¨ï¼šè·å–åŸå§‹åˆ—è¡¨</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">selectTodos</span> = state =&gt; state.<span class="hljs-property">todos</span>;
<span class="hljs-comment">// ç¼“å­˜é€‰æ‹©å™¨ï¼šä»…å½“ todos å˜åŒ–æ—¶ï¼Œæ‰é‡æ–°è¿‡æ»¤</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> selectCompletedTodos = <span class="hljs-title function_">createSelector</span>(
  [selectTodos],
  <span class="hljs-function">(<span class="hljs-params">todos</span>) =&gt;</span> todos.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">completed</span>)
);
</code></pre>
<h3 data-id="heading-24">2. é¿å…è¿‡åº¦ä½¿ç”¨ Context</h3>
<p>Context ä¼šå¯¼è‡´ã€Œè®¢é˜… Context çš„ç»„ä»¶ã€åœ¨ Context å€¼å˜åŒ–æ—¶å…¨éƒ¨é‡æ¸²æŸ“ï¼Œå³ä½¿ç»„ä»¶æœªä½¿ç”¨å˜åŒ–çš„éƒ¨åˆ†ã€‚è‹¥ Context åŒ…å«é¢‘ç¹æ›´æ–°çš„æ•°æ®ï¼ˆå¦‚è®¡æ•°å™¨ï¼‰ï¼Œä¼šå¯¼è‡´å¤§é‡ç»„ä»¶æ— æ„ä¹‰é‡æ¸²æŸ“ã€‚</p>
<p>ä¼˜åŒ–æ–¹æ¡ˆï¼š</p>
<ul>
<li>
<p><strong>æ‹†åˆ† Context</strong>ï¼šå°† Context æŒ‰ã€Œæ›´æ–°é¢‘ç‡ã€æ‹†åˆ†ï¼Œå¦‚ã€Œä¸»é¢˜ Contextã€ï¼ˆä½é¢‘æ›´æ–°ï¼‰å’Œã€Œç”¨æˆ· Contextã€ï¼ˆä¸­é¢‘æ›´æ–°ï¼‰åˆ†å¼€ï¼Œé¿å…ä¸€ä¸ª Context å˜åŒ–å½±å“æ‰€æœ‰ç»„ä»¶ï¼›</p>
</li>
<li>
<p><strong>Context ä¸</strong> <strong><code>useMemo</code></strong> <strong>ç»“åˆ</strong>ï¼šç¡®ä¿ Context.Provider çš„ <code>value</code> å¼•ç”¨ç¨³å®šï¼Œé¿å…çˆ¶ç»„ä»¶æ¸²æŸ“æ—¶ <code>value</code> é‡æ–°åˆ›å»ºå¯¼è‡´æ‰€æœ‰è®¢é˜…ç»„ä»¶é‡æ¸²æŸ“ï¼š</p>
<ul>
<li>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">ThemeContext</span> = <span class="hljs-title function_">createContext</span>();

<span class="hljs-keyword">const</span> <span class="hljs-title function_">ThemeProvider</span> = (<span class="hljs-params">{ children }</span>) =&gt; {
  <span class="hljs-keyword">const</span> [theme, setTheme] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">"light"</span>);
  <span class="hljs-comment">// ç”¨ useMemo ç¼“å­˜ valueï¼Œé¿å…æ¯æ¬¡æ¸²æŸ“é‡æ–°åˆ›å»º</span>
  <span class="hljs-keyword">const</span> contextValue = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> ({
    theme,
    <span class="hljs-attr">toggleTheme</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setTheme</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> prev === <span class="hljs-string">"light"</span> ? <span class="hljs-string">"dark"</span> : <span class="hljs-string">"light"</span>)
  }), [theme]);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ThemeContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{contextValue}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeContext.Provider</span>&gt;</span></span>
  );
};
</code></pre>
</li>
</ul>
</li>
</ul>
<h2 data-id="heading-25">äº”ã€æ€§èƒ½ä¼˜åŒ–å·¥å…·ï¼šå®šä½ç“¶é¢ˆ</h2>
<p>ä¼˜åŒ–å‰éœ€å…ˆé€šè¿‡å·¥å…·å®šä½æ€§èƒ½ç“¶é¢ˆï¼Œé¿å…ç›²ç›®ä¼˜åŒ–ã€‚</p>
<ol>
<li>
<p><strong>React DevTools Profiler</strong>ï¼šReact å®˜æ–¹è°ƒè¯•å·¥å…·ï¼Œå¯å½•åˆ¶ç»„ä»¶æ¸²æŸ“è¿‡ç¨‹ï¼ŒæŸ¥çœ‹ã€Œé‡æ¸²æŸ“æ¬¡æ•°ã€ã€Œæ¸²æŸ“è€—æ—¶ã€ã€Œè§¦å‘æ¸²æŸ“çš„åŸå› ã€ï¼Œç²¾å‡†å®šä½æ— æ„ä¹‰é‡æ¸²æŸ“çš„ç»„ä»¶ã€‚</p>
<ol>
<li>ä½¿ç”¨æ–¹å¼ï¼šæ‰“å¼€ Chrome å¼€å‘è€…å·¥å…· â†’ React æ ‡ç­¾ â†’ Profiler é€‰é¡¹å¡ â†’ ç‚¹å‡»å½•åˆ¶æŒ‰é’® â†’ æ“ä½œåº”ç”¨ â†’ åœæ­¢å½•åˆ¶ï¼ŒæŸ¥çœ‹æ¸²æŸ“æŠ¥å‘Šã€‚</li>
</ol>
</li>
<li>
<p><strong>Lighthouse</strong>ï¼šChrome å†…ç½®å·¥å…·ï¼Œå¯è¯„ä¼°åº”ç”¨çš„ã€Œæ€§èƒ½å¾—åˆ†ã€ï¼Œå¹¶æä¾›å…·ä½“ä¼˜åŒ–å»ºè®®ï¼ˆå¦‚å›¾ç‰‡ä¼˜åŒ–ã€ä»£ç åˆ†å‰²ã€é¦–æ¬¡å†…å®¹ç»˜åˆ¶ï¼ˆFCPï¼‰ä¼˜åŒ–ï¼‰ã€‚</p>
<ol>
<li>ä½¿ç”¨æ–¹å¼ï¼šæ‰“å¼€ Chrome å¼€å‘è€…å·¥å…· â†’ Lighthouse é€‰é¡¹å¡ â†’ å‹¾é€‰ã€ŒPerformanceã€â†’ ç‚¹å‡»ã€ŒGenerate reportã€ã€‚</li>
</ol>
</li>
<li>
<p><strong>Chrome Performance é¢æ¿</strong>ï¼šå½•åˆ¶åº”ç”¨è¿è¡Œæ—¶çš„ CPUã€å†…å­˜ã€DOM æ“ä½œç­‰æ•°æ®ï¼Œåˆ†æã€Œé•¿ä»»åŠ¡ã€ï¼ˆè€—æ—¶ &gt; 50ms çš„ä»»åŠ¡ï¼‰ï¼Œå®šä½é˜»å¡ä¸»çº¿ç¨‹çš„ä»£ç ã€‚</p>
</li>
</ol>
<h2 data-id="heading-26">æ€»ç»“</h2>
<p>React æ€§èƒ½ä¼˜åŒ–éœ€éµå¾ªã€Œå…ˆå®šä½ç“¶é¢ˆï¼Œå†é’ˆå¯¹æ€§ä¼˜åŒ–ã€çš„åŸåˆ™ï¼Œæ ¸å¿ƒæ€è·¯å¯å½’çº³ä¸ºï¼š</p>
<ol start="4">
<li><strong>å‡å°‘æ¸²æŸ“æ¬¡æ•°</strong>ï¼šç”¨ <code>React.memo</code>/<code>useCallback</code>/<code>useMemo</code> æ§åˆ¶æ¸²æŸ“è§¦å‘æ¡ä»¶ï¼Œéš”ç¦»æ¸²æŸ“ä¸Šä¸‹æ–‡ï¼›</li>
<li><strong>é™ä½æ¸²æŸ“æˆæœ¬</strong>ï¼šç²¾ç®€ä»£ç é€»è¾‘ï¼Œä¼˜åŒ–èµ„æºåŠ è½½ï¼Œå‡å°‘ DOM èŠ‚ç‚¹ï¼›</li>
<li><strong>æå‡è¿è¡Œæ—¶æµç•…åº¦</strong>ï¼šç”¨é˜²æŠ–/èŠ‚æµé™åˆ¶é«˜é¢‘äº‹ä»¶ï¼Œç”¨å¹¶å‘æ¸²æŸ“ï¼ˆ<code>useDeferredValue</code>/<code>startTransition</code>ï¼‰ä¼˜åŒ–çŠ¶æ€æ›´æ–°ä¼˜å…ˆçº§ï¼›</li>
<li><strong>æ¶æ„å±‚è§„é¿ç“¶é¢ˆ</strong>ï¼šåˆç†åˆ†å±‚çŠ¶æ€ï¼Œé¿å…è¿‡åº¦ä½¿ç”¨ Context å’Œå…¨å±€çŠ¶æ€ã€‚</li>
</ol>
<p>æ ¹æ®åº”ç”¨è§„æ¨¡å’Œåœºæ™¯ï¼Œé€‰æ‹©åˆé€‚çš„ä¼˜åŒ–æ–¹æ¡ˆï¼ˆå¦‚å°å‹åº”ç”¨ä¾§é‡æ¸²æŸ“ä¼˜åŒ–ï¼Œå¤§å‹åº”ç”¨éœ€ç»“åˆæ¶æ„ä¼˜åŒ–ï¼‰ï¼Œæ‰èƒ½æœ€å¤§åŒ–æå‡ React åº”ç”¨æ€§èƒ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AIé‡å¡‘äº‘åŸç”Ÿåº”ç”¨å¼€å‘å®æˆ˜-æå®¢æ—¶é—´]]></title>    <link>https://juejin.cn/post/7582528397865271323</link>    <guid>https://juejin.cn/post/7582528397865271323</guid>    <pubDate>2025-12-12T04:13:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582528397865271323" data-draft-id="7582553782397812782" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AIé‡å¡‘äº‘åŸç”Ÿåº”ç”¨å¼€å‘å®æˆ˜-æå®¢æ—¶é—´"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-12T04:13:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·918603431273"/> <meta itemprop="url" content="https://juejin.cn/user/872337172344907"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AIé‡å¡‘äº‘åŸç”Ÿåº”ç”¨å¼€å‘å®æˆ˜-æå®¢æ—¶é—´
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/872337172344907/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·918603431273
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T04:13:46.000Z" title="Fri Dec 12 2025 04:13:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b060d3d6133e4e3c9e6a594158a2964b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3OTE4NjAzNDMxMjcz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766117626&amp;x-signature=LQ359AfdVUt2v8g51WFK%2BmnVn%2BA%3D" alt="å¾®ä¿¡å›¾ç‰‡_20251115194731_6_1.jpg" loading="lazy"/></p>
<p>AIé‡å¡‘äº‘åŸç”Ÿåº”ç”¨å¼€å‘å®æˆ˜-æå®¢æ—¶é—´---**xiaä»”è¯¾ï¼šshanxueit.com/7508/ **</p>
<p>åœ¨ 2025 å¹´ï¼ŒçœŸæ­£çš„ AI å·¥ç¨‹èƒ½åŠ›ï¼Œä¸æ˜¯è°ƒç”¨ä¸€ä¸ª APIï¼Œè€Œæ˜¯<strong>å°†å¤§æ¨¡å‹èƒ½åŠ›å°è£…ä¸ºé«˜å¯ç”¨ã€å¯è§‚æµ‹ã€å¯æ‰©ç¼©çš„äº‘åŸç”ŸæœåŠ¡</strong>ã€‚æœ¬æ–‡å°†å¸¦ä½ ä»é›¶æ„å»ºä¸€ä¸ª <strong>â€œæ™ºèƒ½æ‘˜è¦ç”Ÿæˆå™¨â€</strong> â€”â€”ç”¨æˆ·æäº¤ä¸€æ®µæ–‡æœ¬ï¼ŒAI è¿”å›ç®€æ´æ‘˜è¦ï¼Œå¹¶é€šè¿‡ Kubernetes å®ç°ç”Ÿäº§çº§éƒ¨ç½²ã€‚å…¨ç¨‹ä»£ç å¯å¤åˆ¶ã€ç¯å¢ƒå¯å¤ç°ã€æµç¨‹å¯äº¤ä»˜ã€‚</p>
<blockquote>
<p>âœ… æŠ€æœ¯æ ˆï¼šPython + FastAPIï¼ˆè½»é‡é«˜æ€§èƒ½ï¼‰ + Hugging Face Transformersï¼ˆå¼€æºæ¨¡å‹ï¼‰ + Docker + Kubernetes<br/>
âœ… æ¨¡å‹é€‰æ‹©ï¼š<code>facebook/bart-large-cnn</code>ï¼ˆä¸“ä¸ºæ‘˜è¦ä¼˜åŒ–ï¼Œæ— éœ€ GPU å³å¯è¿è¡Œï¼‰</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ç¬¬ä¸€æ­¥ï¼šæ„å»º AI æœåŠ¡æ ¸å¿ƒï¼ˆæœ¬åœ°å¯è¿è¡Œï¼‰</h2>
<p>æˆ‘ä»¬ä½¿ç”¨ FastAPI æ„å»º RESTful æ¥å£ï¼Œé›†æˆ Hugging Face çš„é¢„è®­ç»ƒæ‘˜è¦æ¨¡å‹ã€‚</p>
<pre><code class="hljs language-python" lang="python">Python
ç¼–è¾‘
<span class="hljs-number">1</span><span class="hljs-comment"># main.py</span>
<span class="hljs-number">2</span><span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> FastAPI, HTTPException
<span class="hljs-number">3</span><span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel
<span class="hljs-number">4</span><span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> pipeline
<span class="hljs-number">5</span><span class="hljs-keyword">import</span> logging
<span class="hljs-number">6</span>
<span class="hljs-number">7</span><span class="hljs-comment"># åˆå§‹åŒ–æ—¥å¿—</span>
8logging.basicConfig(level=logging.INFO)
9logger = logging.getLogger(__name__)
<span class="hljs-number">10</span>
<span class="hljs-number">11</span><span class="hljs-comment"># åŠ è½½æ‘˜è¦æ¨¡å‹ï¼ˆé¦–æ¬¡è¿è¡Œä¼šè‡ªåŠ¨ä¸‹è½½ï¼Œçº¦ 1.6GBï¼‰</span>
12summarizer = pipeline(<span class="hljs-string">"summarization"</span>, model=<span class="hljs-string">"facebook/bart-large-cnn"</span>)
<span class="hljs-number">13</span>
14app = FastAPI(title=<span class="hljs-string">"AI æ‘˜è¦æœåŠ¡"</span>, version=<span class="hljs-string">"1.0"</span>)
<span class="hljs-number">15</span>
<span class="hljs-number">16</span><span class="hljs-keyword">class</span> TextRequest(BaseModel):
<span class="hljs-number">17</span>    text: <span class="hljs-built_in">str</span>
<span class="hljs-number">18</span>    max_length: <span class="hljs-built_in">int</span> = <span class="hljs-number">130</span>
<span class="hljs-number">19</span>    min_length: <span class="hljs-built_in">int</span> = <span class="hljs-number">30</span>
<span class="hljs-number">20</span>
<span class="hljs-number">21</span>@app.post(<span class="hljs-string">"/summarize"</span>)
<span class="hljs-number">22</span><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">summarize</span>(<span class="hljs-params">request: TextRequest</span>):
<span class="hljs-number">23</span>    <span class="hljs-keyword">try</span>:
<span class="hljs-number">24</span>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(request.text) &lt; <span class="hljs-number">50</span>:
<span class="hljs-number">25</span>            <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">400</span>, detail=<span class="hljs-string">"æ–‡æœ¬é•¿åº¦éœ€è‡³å°‘ 50 å­—ç¬¦"</span>)
<span class="hljs-number">26</span>        
<span class="hljs-number">27</span>        result = summarizer(
<span class="hljs-number">28</span>            request.text,
<span class="hljs-number">29</span>            max_length=request.max_length,
<span class="hljs-number">30</span>            min_length=request.min_length,
<span class="hljs-number">31</span>            do_sample=<span class="hljs-literal">False</span>
<span class="hljs-number">32</span>        )
<span class="hljs-number">33</span>        summary = result[<span class="hljs-number">0</span>][<span class="hljs-string">'summary_text'</span>]
<span class="hljs-number">34</span>        logger.info(<span class="hljs-string">f"æˆåŠŸç”Ÿæˆæ‘˜è¦ï¼Œè¾“å…¥é•¿åº¦: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(request.text)}</span>"</span>)
<span class="hljs-number">35</span>        <span class="hljs-keyword">return</span> {<span class="hljs-string">"summary"</span>: summary}
<span class="hljs-number">36</span>    
<span class="hljs-number">37</span>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
<span class="hljs-number">38</span>        logger.error(<span class="hljs-string">f"æ‘˜è¦ç”Ÿæˆå¤±è´¥: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)
<span class="hljs-number">39</span>        <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">500</span>, detail=<span class="hljs-string">"æ‘˜è¦æœåŠ¡å†…éƒ¨é”™è¯¯"</span>)
</code></pre>
<blockquote>
<p>ğŸ’¡ <strong>æ•™è‚²æç¤º</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨Â <code>pipeline</code>Â å°è£…æ¨¡å‹ï¼Œé¿å…æ‰‹åŠ¨å¤„ç† tokenizer å’Œ modelï¼›</li>
<li>è¾“å…¥æ ¡éªŒé˜²æ­¢æ— æ•ˆè¯·æ±‚è€—å°½èµ„æºï¼›</li>
<li>ç»“æ„åŒ–æ—¥å¿—ä¾¿äºåç»­ç›‘æ§ã€‚</li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-1">ç¬¬äºŒæ­¥ï¼šå®¹å™¨åŒ– â€”â€” æ‰“åŒ…ä¸º Docker é•œåƒ</h2>
<p>åˆ›å»º <code>Dockerfile</code>ï¼Œç¡®ä¿ä¾èµ–éš”ç¦»ä¸å¯ç§»æ¤æ€§ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">Dockerfile
ç¼–è¾‘
<span class="hljs-number">1</span># Dockerfile
<span class="hljs-number">2</span><span class="hljs-keyword">FROM</span> python:<span class="hljs-number">3.10</span><span class="hljs-operator">-</span>slim
<span class="hljs-number">3</span>
<span class="hljs-number">4</span>WORKDIR <span class="hljs-operator">/</span>app
<span class="hljs-number">5</span>
<span class="hljs-number">6</span><span class="hljs-keyword">COPY</span> requirements.txt .
<span class="hljs-number">7</span>RUN pip install <span class="hljs-comment">--no-cache-dir -r requirements.txt</span>
<span class="hljs-number">8</span>
<span class="hljs-number">9</span><span class="hljs-keyword">COPY</span> main.py .
<span class="hljs-number">10</span>
<span class="hljs-number">11</span>EXPOSE <span class="hljs-number">8000</span>
<span class="hljs-number">12</span>
<span class="hljs-number">13</span>CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]
</code></pre>
<p>å¯¹åº”çš„ <code>requirements.txt</code>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Txt
ç¼–è¾‘
<span class="hljs-attr">1fastapi</span>==<span class="hljs-number">0.110</span>.<span class="hljs-number">0</span>
<span class="hljs-attr">2uvicorn</span>==<span class="hljs-number">0.27</span>.<span class="hljs-number">0</span>
<span class="hljs-attr">3transformers</span>==<span class="hljs-number">4.38</span>.<span class="hljs-number">0</span>
<span class="hljs-attr">4torch</span>==<span class="hljs-number">2.2</span>.<span class="hljs-number">0</span>
<span class="hljs-attr">5accelerate</span>==<span class="hljs-number">0.27</span>.<span class="hljs-number">2</span>
</code></pre>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼š<code>torch</code> åœ¨ CPU æ¨¡å¼ä¸‹æ— éœ€ CUDAï¼Œé€‚åˆä½æˆæœ¬éƒ¨ç½²ã€‚</p>
</blockquote>
<p>æ„å»ºå¹¶æµ‹è¯•é•œåƒï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">Bash
ç¼–è¾‘
<span class="hljs-number">1</span>docker build -t ai-summarizer:<span class="hljs-number">1.0</span> .
<span class="hljs-number">2</span>docker run -p <span class="hljs-number">8000</span>:<span class="hljs-number">8000</span> ai-summarizer:<span class="hljs-number">1.0</span>
</code></pre>
<p>è®¿é—® <code>http://localhost:8000/docs</code> å¯çœ‹åˆ°è‡ªåŠ¨ç”Ÿæˆçš„ Swagger UIï¼Œç›´æ¥æµ‹è¯•ï¼</p>
<hr/>
<h2 data-id="heading-2">ç¬¬ä¸‰æ­¥ï¼šKubernetes éƒ¨ç½² â€”â€” ç”Ÿäº§å°±ç»ª</h2>
<p>åˆ›å»º <code>deployment.yaml</code>ï¼ŒåŒ…å«å¥åº·æ£€æŸ¥ã€èµ„æºé™åˆ¶ä¸å‰¯æœ¬ç®¡ç†ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">Yaml</span>
<span class="hljs-string">ç¼–è¾‘</span>
<span class="hljs-number">1</span><span class="hljs-comment"># deployment.yaml</span>
<span class="hljs-attr">2apiVersion:</span> <span class="hljs-string">apps/v1</span>
<span class="hljs-attr">3kind:</span> <span class="hljs-string">Deployment</span>
<span class="hljs-attr">4metadata:</span>
<span class="hljs-attr">5  name:</span> <span class="hljs-string">ai-summarizer</span>
<span class="hljs-attr">6spec:</span>
<span class="hljs-attr">7  replicas:</span> <span class="hljs-number">2</span>
<span class="hljs-attr">8  selector:</span>
<span class="hljs-attr">9    matchLabels:</span>
<span class="hljs-attr">10      app:</span> <span class="hljs-string">ai-summarizer</span>
<span class="hljs-attr">11  template:</span>
<span class="hljs-attr">12    metadata:</span>
<span class="hljs-attr">13      labels:</span>
<span class="hljs-attr">14        app:</span> <span class="hljs-string">ai-summarizer</span>
<span class="hljs-attr">15    spec:</span>
<span class="hljs-attr">16      containers:</span>
<span class="hljs-attr">17      - name:</span> <span class="hljs-string">ai-summarizer</span>
<span class="hljs-attr">18        image:</span> <span class="hljs-string">ai-summarizer:1.0</span>
<span class="hljs-attr">19        ports:</span>
<span class="hljs-attr">20        - containerPort:</span> <span class="hljs-number">8000</span>
<span class="hljs-attr">21        resources:</span>
<span class="hljs-attr">22          requests:</span>
<span class="hljs-attr">23            memory:</span> <span class="hljs-string">"2Gi"</span>
<span class="hljs-attr">24            cpu:</span> <span class="hljs-string">"1"</span>
<span class="hljs-attr">25          limits:</span>
<span class="hljs-attr">26            memory:</span> <span class="hljs-string">"3Gi"</span>
<span class="hljs-attr">27            cpu:</span> <span class="hljs-string">"2"</span>
<span class="hljs-attr">28        livenessProbe:</span>
<span class="hljs-attr">29          httpGet:</span>
<span class="hljs-attr">30            path:</span> <span class="hljs-string">/docs</span>
<span class="hljs-attr">31            port:</span> <span class="hljs-number">8000</span>
<span class="hljs-attr">32          initialDelaySeconds:</span> <span class="hljs-number">30</span>
<span class="hljs-attr">33          periodSeconds:</span> <span class="hljs-number">60</span>
<span class="hljs-attr">34        readinessProbe:</span>
<span class="hljs-attr">35          httpGet:</span>
<span class="hljs-attr">36            path:</span> <span class="hljs-string">/docs</span>
<span class="hljs-attr">37            port:</span> <span class="hljs-number">8000</span>
<span class="hljs-attr">38          initialDelaySeconds:</span> <span class="hljs-number">10</span>
<span class="hljs-attr">39          periodSeconds:</span> <span class="hljs-number">10</span>
<span class="hljs-number">40</span><span class="hljs-string">---</span>
<span class="hljs-attr">41apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">42kind:</span> <span class="hljs-string">Service</span>
<span class="hljs-attr">43metadata:</span>
<span class="hljs-attr">44  name:</span> <span class="hljs-string">ai-summarizer-svc</span>
<span class="hljs-attr">45spec:</span>
<span class="hljs-attr">46  type:</span> <span class="hljs-string">LoadBalancer</span>
<span class="hljs-attr">47  ports:</span>
<span class="hljs-attr">48  - port:</span> <span class="hljs-number">80</span>
<span class="hljs-attr">49    targetPort:</span> <span class="hljs-number">8000</span>
<span class="hljs-attr">50  selector:</span>
<span class="hljs-attr">51    app:</span> <span class="hljs-string">ai-summarizer</span>
</code></pre>
<blockquote>
<p>ğŸ’¡ <strong>æ•™è‚²é‡ç‚¹</strong>ï¼š</p>
<ul>
<li><code>resources</code>Â é™åˆ¶é˜²æ­¢ Pod è€—å°½èŠ‚ç‚¹èµ„æºï¼›</li>
<li><code>livenessProbe</code>/<code>readinessProbe</code>Â ç¡®ä¿æµé‡åªæ‰“åˆ°å¥åº·å®ä¾‹ï¼›</li>
<li>å¤šå‰¯æœ¬æä¾›é«˜å¯ç”¨ã€‚</li>
</ul>
</blockquote>
<p>éƒ¨ç½²åˆ°é›†ç¾¤ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">Bash
ç¼–è¾‘
<span class="hljs-number">1</span>kubectl apply -f deployment.yaml
<span class="hljs-number">2</span>kubectl <span class="hljs-keyword">get</span> pods -w  <span class="hljs-meta"># è§‚å¯Ÿå¯åŠ¨çŠ¶æ€</span>
</code></pre>
<p>è·å–å¤–éƒ¨ IPï¼ˆäº‘å¹³å°ï¼‰æˆ–ä½¿ç”¨ <code>minikube service ai-summarizer-svc</code>ï¼ˆæœ¬åœ°ï¼‰è®¿é—®æœåŠ¡ã€‚</p>
<hr/>
<h2 data-id="heading-3">ç¬¬å››æ­¥ï¼šéªŒè¯ä¸æ‰©å±•ï¼ˆ100% è½åœ°å…³é”®ï¼‰</h2>
<h3 data-id="heading-4">âœ… åŠŸèƒ½éªŒè¯</h3>
<pre><code class="hljs language-arduino" lang="arduino">Bash
ç¼–è¾‘
<span class="hljs-number">1</span>curl -X POST http:<span class="hljs-comment">//&lt;EXTERNAL-IP&gt;/summarize \
2  -H "Content-Type: application/json" \
3  -d '{</span>
<span class="hljs-number">4</span>    <span class="hljs-string">"text"</span>: <span class="hljs-string">"äººå·¥æ™ºèƒ½ï¼ˆAIï¼‰æ˜¯è®¡ç®—æœºç§‘å­¦çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œå®ƒä¼å›¾äº†è§£æ™ºèƒ½çš„å®è´¨ï¼Œå¹¶ç”Ÿäº§å‡ºä¸€ç§æ–°çš„èƒ½ä»¥äººç±»æ™ºèƒ½ç›¸ä¼¼çš„æ–¹å¼åšå‡ºååº”çš„æ™ºèƒ½æœºå™¨ã€‚è¯¥é¢†åŸŸçš„ç ”ç©¶åŒ…æ‹¬æœºå™¨äººã€è¯­è¨€è¯†åˆ«ã€å›¾åƒè¯†åˆ«ã€è‡ªç„¶è¯­è¨€å¤„ç†å’Œä¸“å®¶ç³»ç»Ÿç­‰ã€‚"</span>,
<span class="hljs-number">5</span>    <span class="hljs-string">"max_length"</span>: <span class="hljs-number">100</span>
<span class="hljs-number">6</span>  }'
</code></pre>
<p>é¢„æœŸè¿”å›ï¼š</p>
<pre><code class="hljs language-css" lang="css">Json
ç¼–è¾‘
<span class="hljs-number">1</span>{"<span class="hljs-selector-tag">summary</span>":<span class="hljs-string">"äººå·¥æ™ºèƒ½æ˜¯è®¡ç®—æœºç§‘å­¦çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œæ—¨åœ¨ç†è§£æ™ºèƒ½å¹¶åˆ¶é€ èƒ½æ¨¡æ‹Ÿäººç±»æ™ºèƒ½ååº”çš„æœºå™¨ã€‚"</span>}
</code></pre>
<h3 data-id="heading-5">âœ… å¯è§‚æµ‹æ€§å¢å¼ºï¼ˆå¯é€‰ä½†æ¨èï¼‰</h3>
<ul>
<li>æ·»åŠ  Prometheus æŒ‡æ ‡ï¼ˆé€šè¿‡Â <code>starlette_exporter</code>ï¼‰ï¼›</li>
<li>æ—¥å¿—æ¥å…¥ Loki æˆ– ELKï¼›</li>
<li>ä½¿ç”¨ OpenTelemetry è¿½è¸ªè¯·æ±‚é“¾è·¯ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-6">ä¸ºä»€ä¹ˆè¿™æ˜¯â€œ100% è½åœ°â€çš„æ–¹æ¡ˆï¼Ÿ</h2>





























<table><thead><tr><th>ç»´åº¦</th><th>æœ¬æ–¹æ¡ˆå®ç°</th></tr></thead><tbody><tr><td><strong>å¯è¿è¡Œ</strong></td><td>æœ¬åœ° Docker ä¸€é”®å¯åŠ¨</td></tr><tr><td><strong>å¯éƒ¨ç½²</strong></td><td>æ ‡å‡† K8s YAMLï¼Œé€‚é…ä»»ä½•äº‘æˆ– On-Prem</td></tr><tr><td><strong>å¯æ‰©å±•</strong></td><td>å¢åŠ  HPA è‡ªåŠ¨æ‰©ç¼©å®¹ä»…éœ€å‡ è¡Œé…ç½®</td></tr><tr><td><strong>å¯ç»´æŠ¤</strong></td><td>æ¨¡å—åŒ–ä»£ç  + å¥åº·æ£€æŸ¥ + æ—¥å¿—</td></tr><tr><td><strong>åˆè§„å®‰å…¨</strong></td><td>æ— å¤–éƒ¨ API ä¾èµ–ï¼Œæ•°æ®å®Œå…¨ç§æœ‰</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-7">ç»“è¯­ï¼šAI åº”ç”¨çš„ä»·å€¼ï¼Œåœ¨äºâ€œè·‘åœ¨ç”Ÿäº§ç¯å¢ƒé‡Œâ€</h2>
<p>æœ¬æ–‡æ²¡æœ‰ç‚«æŠ€ï¼Œæ²¡æœ‰å¤æ‚å¾®æœåŠ¡ï¼Œåªæœ‰ä¸€ä¸ª<strong>çœŸå®ã€ç®€æ´ã€å¯äº¤ä»˜</strong>çš„ AI äº‘åŸç”Ÿåº”ç”¨ã€‚ä½ å¯ä»¥åœ¨ 1 å°æ—¶å†…å®Œæˆå…¨éƒ¨æ­¥éª¤ï¼Œå¹¶å°†å…¶ä½œä¸ºå›¢é˜Ÿ AI èƒ½åŠ›çš„åŸºçŸ³ã€‚</p>
<blockquote>
<p><strong>è®°ä½ï¼šåœ¨å·¥ç¨‹ä¸–ç•Œï¼Œèƒ½ä¸Šçº¿çš„ä»£ç ï¼Œèƒœè¿‡åƒç¯‡è®ºæ–‡ã€‚</strong></p>
</blockquote>
<p>ç°åœ¨ï¼Œå°±å»æ„å»ºä½ çš„ç¬¬ä¸€ä¸ª AI äº‘åŸç”ŸæœåŠ¡å§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3 æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼šä»10ç§’åˆ°1ç§’çš„5ä¸ªå…³é”®æŠ€å·§ï¼Œè®©ä½ çš„åº”ç”¨é£èµ·æ¥ï¼]]></title>    <link>https://juejin.cn/post/7582533464244469794</link>    <guid>https://juejin.cn/post/7582533464244469794</guid>    <pubDate>2025-12-12T04:17:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582533464244469794" data-draft-id="7582517824498024482" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3 æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼šä»10ç§’åˆ°1ç§’çš„5ä¸ªå…³é”®æŠ€å·§ï¼Œè®©ä½ çš„åº”ç”¨é£èµ·æ¥ï¼"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-12T04:17:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3 æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼šä»10ç§’åˆ°1ç§’çš„5ä¸ªå…³é”®æŠ€å·§ï¼Œè®©ä½ çš„åº”ç”¨é£èµ·æ¥ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T04:17:03.000Z" title="Fri Dec 12 2025 04:17:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Vue3 æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼šä»10ç§’åˆ°1ç§’çš„5ä¸ªå…³é”®æŠ€å·§ï¼Œè®©ä½ çš„åº”ç”¨é£èµ·æ¥ï¼</strong></h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>åœ¨å½“ä»Šçš„å‰ç«¯å¼€å‘ä¸­ï¼Œæ€§èƒ½ä¼˜åŒ–æ˜¯æ¯ä¸ªå¼€å‘è€…éƒ½æ— æ³•å›é¿çš„è¯é¢˜ã€‚å°¤å…¶æ˜¯å¯¹äº Vue3 åº”ç”¨æ¥è¯´ï¼Œéšç€ä¸šåŠ¡é€»è¾‘çš„å¤æ‚åŒ–å’Œæ•°æ®é‡çš„å¢é•¿ï¼Œåº”ç”¨çš„æ€§èƒ½é—®é¢˜å¯èƒ½ä¼šé€æ¸æ˜¾ç°ã€‚ä¸€ä¸ªåŸæœ¬å“åº”è¿…é€Ÿçš„é¡µé¢ï¼Œå¯èƒ½åœ¨æŸä¸ªæ—¶åˆ»å˜å¾—ç¼“æ…¢ç”šè‡³å¡é¡¿ï¼Œä¸¥é‡å½±å“ç”¨æˆ·ä½“éªŒã€‚</p>
<p>æœ¬æ–‡å°†ä»å®æˆ˜è§’åº¦å‡ºå‘ï¼Œåˆ†äº« 5 ä¸ªå…³é”®çš„ Vue3 æ€§èƒ½ä¼˜åŒ–æŠ€å·§ï¼Œå¸®åŠ©ä½ ä»â€œ10ç§’åŠ è½½â€ä¼˜åŒ–åˆ°â€œ1ç§’å“åº”â€ï¼Œè®©ä½ çš„åº”ç”¨çœŸæ­£â€œé£èµ·æ¥â€ã€‚è¿™äº›æŠ€å·§ä¸ä»…åŸºäº Vue3 çš„æ ¸å¿ƒç‰¹æ€§ï¼ˆå¦‚ Composition APIã€å“åº”å¼ç³»ç»Ÿä¼˜åŒ–ç­‰ï¼‰ï¼Œè¿˜ç»“åˆäº†ç°ä»£å‰ç«¯å·¥ç¨‹åŒ–çš„æœ€ä½³å®è·µã€‚</p>
<hr/>
<h3 data-id="heading-2">1. <strong>åˆç†ä½¿ç”¨ <code>v-once</code> å’Œ <code>v-memo</code>ï¼šå‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“</strong></h3>
<p>Vue3 çš„å“åº”å¼ç³»ç»Ÿæ˜¯å…¶æ ¸å¿ƒä¼˜åŠ¿ä¹‹ä¸€ï¼Œä½†é¢‘ç¹çš„ç»„ä»¶æ¸²æŸ“ä¹Ÿå¯èƒ½æˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚<code>v-once</code> å’Œ <code>v-memo</code> æ˜¯ä¸¤ä¸ªç”¨äºä¼˜åŒ–æ¸²æŸ“çš„æŒ‡ä»¤ï¼š</p>
<ul>
<li>
<p><strong><code>v-once</code></strong>ï¼šæ ‡è®°å…ƒç´ æˆ–ç»„ä»¶åªæ¸²æŸ“ä¸€æ¬¡ï¼Œåç»­ä¸å†æ›´æ–°ã€‚é€‚ç”¨äºé™æ€å†…å®¹æˆ–ä¸éœ€è¦å“åº”å¼å˜åŒ–çš„éƒ¨åˆ†ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-once</span>&gt;</span>{{ staticContent }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
</li>
<li>
<p><strong><code>v-memo</code></strong>ï¼ˆVue3.2+ï¼‰ï¼šé€šè¿‡ç¼“å­˜è™šæ‹Ÿ DOM èŠ‚ç‚¹ï¼Œé¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ã€‚é€‚ç”¨äºéœ€è¦é¢‘ç¹æ›´æ–°ä½†å†…å®¹å¯èƒ½ä¸å˜çš„åœºæ™¯ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-memo</span>=<span class="hljs-string">"[dependency]"</span>&gt;</span>{{ dynamicContent }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p>åªæœ‰å½“ <code>dependency</code> å˜åŒ–æ—¶ï¼Œæ‰ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ã€‚</p>
</li>
</ul>
<h4 data-id="heading-3"><strong>å®æˆ˜å»ºè®®</strong></h4>
<ul>
<li>å¯¹é™æ€å†…å®¹ï¼ˆå¦‚é¡µè„šã€æ ‡é¢˜ï¼‰ä½¿ç”¨ <code>v-once</code>ã€‚</li>
<li>å¯¹é«˜é¢‘æ›´æ–°ä½†ä¾èµ–é¡¹è¾ƒå°‘çš„åˆ—è¡¨é¡¹ä½¿ç”¨ <code>v-memo</code>ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-4">2. <strong>æ‡’åŠ è½½ä¸ä»£ç åˆ†å‰²ï¼šæŒ‰éœ€åŠ è½½èµ„æº</strong></h3>
<p>Vue3 ç»“åˆç°ä»£æ‰“åŒ…å·¥å…·ï¼ˆå¦‚ Viteã€Webpackï¼‰å¯ä»¥è½»æ¾å®ç°ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½ï¼š</p>
<ul>
<li>
<p><strong>è·¯ç”±çº§æ‡’åŠ è½½</strong>ï¼šé€šè¿‡åŠ¨æ€å¯¼å…¥æ‹†åˆ†è·¯ç”±ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">Home</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-keyword">import</span>(<span class="hljs-string">'./views/Home.vue'</span>);
</code></pre>
</li>
<li>
<p><strong>ç»„ä»¶çº§æ‡’åŠ è½½</strong>ï¼šå¯¹éé¦–å±å…³é”®ç»„ä»¶ä½¿ç”¨ <code>defineAsyncComponent</code>ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { defineAsyncComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">AsyncComponent</span> = <span class="hljs-title function_">defineAsyncComponent</span>(<span class="hljs-function">() =&gt;</span> 
  <span class="hljs-keyword">import</span>(<span class="hljs-string">'./components/HeavyComponent.vue'</span>)
);
</code></pre>
</li>
</ul>
<h4 data-id="heading-5"><strong>å®æˆ˜å»ºè®®</strong></h4>
<ul>
<li>ç»“åˆ <code>Suspense</code>ï¼ˆå®éªŒæ€§ç‰¹æ€§ï¼‰å¤„ç†å¼‚æ­¥ç»„ä»¶çš„åŠ è½½çŠ¶æ€ã€‚</li>
<li>Vite + Rollup çš„å¤©ç„¶æ”¯æŒå¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ– Tree Shakingã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-6">3. <strong>å“åº”å¼æ•°æ®çš„ç²¾ç»†åŒ–æ§åˆ¶</strong></h3>
<p>Vue3 çš„å“åº”å¼ç³»ç»ŸåŸºäº Proxyï¼Œä½†ä»éœ€é¿å…è¿‡åº¦å“åº”å¼åŒ–ï¼š</p>
<ul>
<li><strong>ä½¿ç”¨ <code>shallowRef</code> / <code>shallowReactive</code></strong>ï¼šä»…å¯¹é¡¶å±‚å±æ€§è¿›è¡Œå“åº”å¼å¤„ç†ï¼Œé€‚åˆå¤§å‹å¯¹è±¡æˆ–æ•°ç»„ã€‚</li>
<li><strong>é¿å…åœ¨æ¨¡æ¿ä¸­ç›´æ¥è®¿é—®æ·±å±‚åµŒå¥—å±æ€§</strong>ï¼šä¾‹å¦‚ <code>user.profile.address.city</code>ï¼Œè¿™ç§è®¿é—®ä¼šé€’å½’è§¦å‘ä¾èµ–æ”¶é›†ã€‚</li>
<li><strong>æ‰‹åŠ¨æ§åˆ¶ä¾èµ–è¿½è¸ª</strong>ï¼šé€šè¿‡ <code>markRaw</code> è·³è¿‡ä¸å¿…è¦çš„å“åº”å¼è½¬æ¢ã€‚</li>
</ul>
<h4 data-id="heading-7"><strong>å®æˆ˜å»ºè®®</strong></h4>
<ul>
<li>APIè¿”å›çš„å¤§å‹æ•°æ®é›†ä¼˜å…ˆç”¨ <code>shallowRef</code>ã€‚</li>
<li>Pinia/VuexçŠ¶æ€ç®¡ç†ä¸­å¯å±€éƒ¨ä½¿ç”¨éå“åº”å¼æ•°æ®ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-8">4. <strong>è™šæ‹Ÿæ»šåŠ¨ä¸åˆ—è¡¨ä¼˜åŒ–ï¼šé«˜æ•ˆæ¸²æŸ“é•¿åˆ—è¡¨</strong></h3>
<p>é•¿åˆ—è¡¨æ˜¯å‰ç«¯æ€§èƒ½çš„â€œæ€æ‰‹â€ã€‚Vue3ç”Ÿæ€æä¾›äº†æˆç†Ÿçš„è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li><strong>è™šæ‹Ÿæ»šåŠ¨åº“ï¼ˆå¦‚ <code>vue-virtual-scroller</code>ï¼‰</strong>ï¼šä»…æ¸²æŸ“å¯è§†åŒºåŸŸçš„ DOMã€‚</li>
<li><strong>æ‰‹åŠ¨å®ç°åˆ†ç‰‡æ¸²æŸ“ï¼ˆTime Slicingï¼‰</strong>ï¼šé€šè¿‡ <code>requestIdleCallback</code>åˆ†æ‰¹æ¸²æŸ“æ•°æ®ã€‚</li>
</ul>
<h4 data-id="heading-9"><strong>ç¤ºä¾‹ä»£ç ï¼ˆè™šæ‹Ÿæ»šåŠ¨ï¼‰</strong></h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">RecycleScroller</span> 
    <span class="hljs-attr">:items</span>=<span class="hljs-string">"largeList"</span>
    <span class="hljs-attr">:item-size</span>=<span class="hljs-string">"50"</span>
    <span class="hljs-attr">key-field</span>=<span class="hljs-string">"id"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">default</span>=<span class="hljs-string">"{ item }"</span>&gt;</span>
      {{ item.name }}
    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
 <span class="hljs-tag">&lt;/<span class="hljs-name">RecycleScroller</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<h4 data-id="heading-10"><strong>å®æˆ˜å»ºè®®</strong></h4>
<ul>
<li>1ä¸‡æ¡ä»¥ä¸Šæ•°æ®å¿…é¡»ç”¨è™šæ‹Ÿæ»šåŠ¨ã€‚</li>
<li>ç»“åˆWeb Workeré¢„å¤„ç†æ•°æ®è¿›ä¸€æ­¥é™ä½ä¸»çº¿ç¨‹å‹åŠ›ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-11">5. <strong>ç¼–è¯‘æ—¶ä¼˜åŒ–ä¸å·¥å…·é“¾é€‰æ‹©</strong></h3>
<p>Vue3çš„ç¼–è¯‘å™¨åšäº†å¤§é‡é™æ€åˆ†æä¼˜åŒ–ï¼š</p>
<ol>
<li><strong>å¯ç”¨æ¨¡æ¿é¢„ç¼–è¯‘ï¼ˆViteæ¨¡å¼é»˜è®¤å¼€å¯ï¼‰</strong></li>
<li><strong>é€‰æ‹©æ€§ç¦ç”¨SourceMapç”Ÿæˆ</strong></li>
<li><strong>é™æ€èŠ‚ç‚¹æå‡ï¼ˆHoist Staticï¼‰</strong></li>
<li><strong>Patch Flagsæ ‡è®°åŠ¨æ€èŠ‚ç‚¹</strong></li>
</ol>
<h4 data-id="heading-12">Viteé…ç½®ç¤ºä¾‹ï¼š</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
 <span class="hljs-attr">build</span>: {
   <span class="hljs-attr">minify</span>: <span class="hljs-string">'terser'</span>,
   <span class="hljs-attr">terserOptions</span>: {
     <span class="hljs-attr">compress</span>: { <span class="hljs-attr">drop_console</span>: <span class="hljs-literal">true</span> }
   }
 }
}
</code></pre>
<h4 data-id="heading-13">Webpackè¡¥å……ï¼š</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
 <span class="hljs-attr">optimization</span>: {
   <span class="hljs-attr">splitChunks</span>: { <span class="hljs-attr">chunks</span>: <span class="hljs-string">'all'</span> }
 }
}
</code></pre>
<hr/>
<h3 data-id="heading-14">æ€»ç»“</h3>
<p>ä»10ç§’åˆ°1ç§’çš„æ€§èƒ½é£è·ƒå¹¶éé­”æ³•ï¼Œè€Œæ˜¯éœ€è¦å¯¹Vue3è¿è¡Œæœºåˆ¶æœ‰æ·±åˆ»ç†è§£ï¼š</p>
<ol>
<li>ğŸš€ <strong>æ¸²æŸ“æ§åˆ¶</strong>æ˜¯åŸºç¡€ - v-memo/v-onceç²¾å‡†æŠŠæ§æ›´æ–°ç²’åº¦</li>
<li>â³ <strong>æ‡’åŠ è½½ç­–ç•¥</strong>è§£å†³èµ„æºç“¶é¢ˆ</li>
<li>ğŸ” <strong>å“åº”å¼è°ƒä¼˜</strong>é¿å…æ— æ„ä¹‰è¿½è¸ª</li>
<li>ğŸ“œ <strong>è™šæ‹Ÿæ»šåŠ¨æ”»å…‹åˆ—è¡¨éš¾é¢˜</strong></li>
<li>âš™ï¸å·¥å…·é“¾æ·±åº¦é€‚é…é‡Šæ”¾æ¡†æ¶æ½œåŠ›</li>
</ol>
<p>è¿™äº›æŠ€æœ¯ä¸æ˜¯å­¤ç«‹çš„â€”â€”å®é™…é¡¹ç›®ä¸­å¾€å¾€éœ€è¦ç»„åˆè¿ç”¨ã€‚ä¾‹å¦‚ä¸€ä¸ªç”µå•†é¡µé¢å¯èƒ½åŒæ—¶éœ€è¦ï¼š
-å•†å“åˆ—è¡¨ç”¨è™šæ‹Ÿæ»šåŠ¨
-è´­ç‰©è½¦æ•°æ®ç”¨shallowReactive
-ç»“ç®—æ¨¡å—å¼‚æ­¥åŠ è½½</p>
<p>çœŸæ­£çš„æ€§èƒ½é«˜æ‰‹ä¸åœ¨äºçŸ¥é“å¤šå°‘APIï¼Œè€Œåœ¨äºå‡†ç¡®åˆ¤æ–­æŠ€æœ¯é€‰å‹èƒŒåçš„trade-off</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ Python æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼šä»é›¶å¼€å§‹å¿«é€Ÿæ„å»º Python çŸ¥è¯†ä½“ç³»]]></title>    <link>https://juejin.cn/post/7582808491582455844</link>    <guid>https://juejin.cn/post/7582808491582455844</guid>    <pubDate>2025-12-12T04:44:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582808491582455844" data-draft-id="7582539701146517545" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" ğŸ Python æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼šä»é›¶å¼€å§‹å¿«é€Ÿæ„å»º Python çŸ¥è¯†ä½“ç³»"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2025-12-12T04:44:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¼–ç¨‹å¹²è´§é“º"/> <meta itemprop="url" content="https://juejin.cn/user/52383084474680"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             ğŸ Python æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼šä»é›¶å¼€å§‹å¿«é€Ÿæ„å»º Python çŸ¥è¯†ä½“ç³»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/52383084474680/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¼–ç¨‹å¹²è´§é“º
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T04:44:10.000Z" title="Fri Dec 12 2025 04:44:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™ç¯‡æ–‡ç« å°†ä¼šç³»ç»Ÿåœ°æç‚¼ Python çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹ã€è¯­æ³•ç‰¹æ€§å’Œç¼–ç¨‹é£æ ¼ï¼Œå¸®åŠ©ä½ é«˜æ•ˆåœ°å»ºç«‹å®Œæ•´çš„ Python çŸ¥è¯†ä½“ç³»ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€åŸºç¡€è¯­æ³•</h2>
<h3 data-id="heading-1">1.1 å˜é‡ä¸èµ‹å€¼</h3>
<p>Python ä¸éœ€è¦ä¸“é—¨çš„å…³é”®å­—æ¥å£°æ˜å˜é‡ï¼Œç›´æ¥èµ‹å€¼å³å¯ã€‚</p>
<ul>
<li><strong>èµ‹å€¼ï¼š</strong> <code>name = "å¼ ä¸‰"</code></li>
<li><strong>å‘½åè§„èŒƒï¼š</strong> æ¨èä½¿ç”¨ <code>snake_case</code>ï¼ˆä¸‹åˆ’çº¿å‘½åï¼‰ï¼Œå¦‚ <code>is_student</code>ã€‚</li>
<li><strong>ç©ºå€¼ï¼š</strong> ä½¿ç”¨ <code>None</code> è¡¨ç¤ºç©ºå€¼ã€‚</li>
<li><strong>å¸ƒå°”å€¼ï¼š</strong> åªæœ‰ <code>True</code> å’Œ <code>False</code>ï¼Œé¦–å­—æ¯å¿…é¡»å¤§å†™ã€‚</li>
</ul>
<pre><code class="hljs language-Python" lang="Python">name = <span class="hljs-string">"å¼ ä¸‰"</span>
age = <span class="hljs-number">25</span>
is_student = <span class="hljs-literal">True</span>
score = <span class="hljs-literal">None</span>
</code></pre>
<h3 data-id="heading-2">1.2 å‡½æ•°å®šä¹‰</h3>
<p>ä½¿ç”¨ <code>def</code> å…³é”®å­—å®šä¹‰å‡½æ•°ï¼Œå‡½æ•°ä½“é€šè¿‡ <strong>ç¼©è¿›</strong> æ¥ç•Œå®šã€‚</p>
<ul>
<li><strong>å®šä¹‰ï¼š</strong> ä½¿ç”¨ <code>def</code> å…³é”®å­—ï¼Œåè·Ÿå‡½æ•°åå’Œå‚æ•°åˆ—è¡¨ï¼Œä»¥å†’å· <code>:</code> ç»“æŸã€‚</li>
<li><strong>å‡½æ•°ä½“ï¼š</strong> å¿…é¡»ç¼©è¿›ã€‚</li>
<li><strong>é»˜è®¤å‚æ•°ï¼š</strong> å¯ä»¥åœ¨å‚æ•°åˆ—è¡¨ä¸­è®¾ç½®é»˜è®¤å€¼ï¼Œå¦‚ <code>age=18</code>ã€‚</li>
<li><strong><code>lambda</code> è¡¨è¾¾å¼ï¼š</strong> ç”¨äºåˆ›å»ºç®€å•çš„å•è¡ŒåŒ¿åå‡½æ•°ã€‚</li>
<li><strong>f-stringï¼š</strong> ç”¨äºå­—ç¬¦ä¸²æ ¼å¼åŒ–ï¼ˆç±»ä¼¼æ¨¡æ¿å­—ç¬¦ä¸²ï¼‰ã€‚</li>
</ul>
<pre><code class="hljs language-Python" lang="Python"><span class="hljs-comment"># æ™®é€šå‡½æ•° </span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"Hello, <span class="hljs-subst">{name}</span>!"</span>

<span class="hljs-comment"># lambda å‡½æ•°</span>
add = <span class="hljs-keyword">lambda</span> a, b: a + b

<span class="hljs-comment"># å¸¦é»˜è®¤å‚æ•°çš„å‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_user</span>(<span class="hljs-params">name, age=<span class="hljs-number">18</span></span>):
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"name"</span>: name, <span class="hljs-string">"age"</span>: age}
</code></pre>
<h3 data-id="heading-3">1.3 æ§åˆ¶æµç¨‹</h3>
<h4 data-id="heading-4">1.3.1 æ¡ä»¶è¯­å¥</h4>
<p>ä½¿ç”¨ <code>if</code>ã€<code>elif</code>ï¼ˆè€Œä¸æ˜¯ <code>else if</code>ï¼‰å’Œ <code>else</code>ã€‚ä»£ç å—ç”±å†’å· <code>:</code> å’Œ <strong>ç¼©è¿›</strong> ç¡®å®šã€‚</p>
<ul>
<li><strong>ä¸‰å…ƒè¡¨è¾¾å¼ï¼š</strong> è¯­æ³•ä¸º <code>value_if_true if condition else value_if_false</code>ã€‚</li>
</ul>
<pre><code class="hljs language-Python" lang="Python"><span class="hljs-keyword">if</span> age &gt;= <span class="hljs-number">18</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æˆå¹´äºº"</span>)
<span class="hljs-keyword">elif</span> age &gt;= <span class="hljs-number">13</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"é’å°‘å¹´"</span>)
<span class="hljs-keyword">else</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å„¿ç«¥"</span>)

<span class="hljs-comment"># ä¸‰å…ƒè¡¨è¾¾å¼</span>
status = <span class="hljs-string">"æˆå¹´"</span> <span class="hljs-keyword">if</span> age &gt;= <span class="hljs-number">18</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"æœªæˆå¹´"</span>
</code></pre>
<h4 data-id="heading-5">1.3.2 å¾ªç¯è¯­å¥</h4>
<p><strong>1. <code>for</code> å¾ªç¯ï¼š</strong> ä¸»è¦ç”¨äºè¿­ä»£åºåˆ—ï¼ˆåˆ—è¡¨ã€å­—ç¬¦ä¸²ç­‰ï¼‰æˆ–ä½¿ç”¨ <code>range()</code> å‡½æ•°ç”Ÿæˆæ•°å­—åºåˆ—ã€‚</p>
<ul>
<li><strong>ç”Ÿæˆæ•°å­—åºåˆ—ï¼š</strong> <code>range(start, stop, step)</code>ã€‚</li>
<li><strong>å¸¦ç´¢å¼•éå†ï¼š</strong> ä½¿ç”¨ <code>enumerate()</code> å‡½æ•°åŒæ—¶è·å–ç´¢å¼•å’Œå€¼ã€‚</li>
</ul>
<pre><code class="hljs language-Python" lang="Python"><span class="hljs-comment"># è¿­ä»£æ•°å­— (0 åˆ° 4)</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):
    <span class="hljs-built_in">print</span>(i)

<span class="hljs-comment"># éå†åˆ—è¡¨</span>
fruits = [<span class="hljs-string">"apple"</span>, <span class="hljs-string">"banana"</span>, <span class="hljs-string">"orange"</span>]
<span class="hljs-keyword">for</span> fruit <span class="hljs-keyword">in</span> fruits:
    <span class="hljs-built_in">print</span>(fruit)

<span class="hljs-comment"># å¸¦ç´¢å¼•éå†</span>
<span class="hljs-keyword">for</span> index, fruit <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(fruits):
    <span class="hljs-built_in">print</span>(index, fruit)
</code></pre>
<p><strong>2. <code>while</code> å¾ªç¯ï¼š</strong> å¾ªç¯é€»è¾‘ä¸å¤§å¤šæ•°è¯­è¨€ç›¸ä¼¼ã€‚</p>
<ul>
<li><strong>è‡ªå¢/è‡ªå‡ï¼š</strong> Python <strong>æ²¡æœ‰</strong> <code>i++</code> æˆ– <code>i--</code> è¯­æ³•ï¼Œä½¿ç”¨ <code>i += 1</code> æˆ– <code>i -= 1</code>ã€‚</li>
</ul>
<pre><code class="hljs language-Python" lang="Python">i = <span class="hljs-number">0</span>
<span class="hljs-keyword">while</span> i &lt; <span class="hljs-number">5</span>:
    <span class="hljs-built_in">print</span>(i)
    i += <span class="hljs-number">1</span>
</code></pre>
<h2 data-id="heading-6">äºŒã€æ•°æ®ç±»å‹</h2>
<p>Python æ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œæ˜ç¡®åŒºåˆ†ä¸åŒçš„æ•°æ®ç±»å‹ã€‚</p>
<h3 data-id="heading-7">2.1 åŸºæœ¬æ•°æ®ç±»å‹</h3>























































<table><thead><tr><th><strong>ç±»å‹</strong></th><th><strong>Python åç§°</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td>å­—ç¬¦ä¸²</td><td><code>str</code></td><td>å•å¼•å· <code>'</code> å’ŒåŒå¼•å· <code>"</code> å®Œå…¨ç­‰ä»·ã€‚</td></tr><tr><td>æ•´æ•°</td><td><code>int</code></td><td>æ”¯æŒä»»æ„å¤§å°çš„æ•´æ•°ã€‚</td></tr><tr><td>æµ®ç‚¹æ•°</td><td><code>float</code></td><td>æ ‡å‡†æµ®ç‚¹æ•°ã€‚</td></tr><tr><td>å¸ƒå°”å€¼</td><td><code>bool</code></td><td><code>True</code> æˆ– <code>False</code>ã€‚</td></tr><tr><td>ç©ºå€¼</td><td><code>None</code></td><td>å”¯ä¸€çš„ç©ºå€¼ã€‚</td></tr><tr><td>åˆ—è¡¨</td><td><code>list</code></td><td>å¯å˜çš„åºåˆ—ï¼ˆç±»ä¼¼æ•°ç»„ï¼‰ã€‚</td></tr><tr><td>å­—å…¸</td><td><code>dict</code></td><td>é”®å€¼å¯¹é›†åˆï¼ˆç±»ä¼¼å¯¹è±¡/Mapï¼‰ã€‚</td></tr><tr><td>é›†åˆ</td><td><code>set</code></td><td>æ— åºã€ä¸é‡å¤çš„å…ƒç´ é›†åˆã€‚</td></tr><tr><td>å…ƒç»„</td><td><code>tuple</code></td><td><strong>ä¸å¯å˜</strong> çš„åºåˆ—ï¼ˆPython ç‰¹æœ‰ï¼‰ã€‚</td></tr></tbody></table>
<h3 data-id="heading-8">2.2 æ•°å­—è¿ç®—</h3>
<p>Python æ˜ç¡®åŒºåˆ†æ•´æ•°å’Œæµ®ç‚¹æ•°ã€‚</p>
<ul>
<li><strong>ç±»å‹ï¼š</strong> ä½¿ç”¨ <code>type()</code> å‡½æ•°è·å–ç±»å‹ï¼Œå¦‚ <code>type(42)</code> è¿”å› <code>&lt;class 'int'&gt;</code>ã€‚</li>
<li><strong>æµ®ç‚¹é™¤æ³•ï¼š</strong> <code>/</code> è¿ç®—ç¬¦ï¼ˆå¦‚ <code>5 / 2</code> ç»“æœä¸º <code>2.5</code>ï¼‰ã€‚</li>
<li><strong>æ•´é™¤ï¼š</strong> <code>//</code> è¿ç®—ç¬¦ï¼ˆå¦‚ <code>5 // 2</code> ç»“æœä¸º <code>2</code>ï¼‰ã€‚</li>
<li><strong>å¹‚è¿ç®—ï¼š</strong> <code>**</code> è¿ç®—ç¬¦ï¼ˆå¦‚ <code>5 ** 2</code> ç»“æœä¸º <code>25</code>ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-9">2.3 å­—ç¬¦ä¸²æ“ä½œ</h3>
<p>å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„åºåˆ—ã€‚</p>
<ul>
<li><strong>é•¿åº¦ï¼š</strong> ä½¿ç”¨å†…ç½®å‡½æ•° <code>len()</code> è·å–é•¿åº¦ï¼Œå¦‚ <code>len(str)</code>ã€‚</li>
<li><strong>æ–¹æ³•ï¼š</strong> <code>str.upper()</code>ã€<code>str.lower()</code>ã€<code>str.split()</code>ã€<code>str.replace()</code> ç­‰ã€‚</li>
<li><strong>å­ä¸²æ£€æŸ¥ï¼š</strong> ä½¿ç”¨ <code>in</code> å…³é”®å­—ï¼Œå¦‚ <code>"World" in str</code>ã€‚</li>
<li><strong>åˆ‡ç‰‡ï¼š</strong> ä½¿ç”¨ç®€æ´çš„åˆ‡ç‰‡è¯­æ³• <code>[start:end]</code>ï¼ˆä¸åŒ…å« <code>end</code>ï¼‰ã€‚</li>
<li><strong>f-stringï¼š</strong> æœ€å¸¸ç”¨çš„æ ¼å¼åŒ–æ–¹å¼ï¼Œå¦‚ <code>f"ä½ å¥½, {name}!"</code>ã€‚</li>
<li><strong>å¤šè¡Œå­—ç¬¦ä¸²ï¼š</strong> ä½¿ç”¨ä¸‰å¼•å· <code>"""..."""</code> æˆ– <code>'''...'''</code> åˆ›å»ºã€‚</li>
</ul>
<pre><code class="hljs language-Python" lang="Python"><span class="hljs-built_in">str</span> = <span class="hljs-string">"Hello World"</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(<span class="hljs-built_in">str</span>))        <span class="hljs-comment"># 11</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"World"</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">str</span>)  <span class="hljs-comment"># True</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">str</span>[<span class="hljs-number">0</span>:<span class="hljs-number">5</span>])        <span class="hljs-comment"># "Hello"</span>
</code></pre>
<h3 data-id="heading-10">2.4 ç±»å‹è½¬æ¢</h3>
<p>Python ä¸ä¼šè‡ªåŠ¨è¿›è¡Œéšå¼ç±»å‹è½¬æ¢ï¼Œå¿…é¡»ä½¿ç”¨å¯¹åº”çš„ç±»å‹æ„é€ å‡½æ•°è¿›è¡Œæ˜¾å¼è½¬æ¢ã€‚</p>
<ul>
<li><code>str(value)</code>ï¼šè½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</li>
<li><code>int(value)</code>ï¼šè½¬æ¢ä¸ºæ•´æ•°ã€‚</li>
<li><code>float(value)</code>ï¼šè½¬æ¢ä¸ºæµ®ç‚¹æ•°ã€‚</li>
<li><code>bool(value)</code>ï¼šè½¬æ¢ä¸ºå¸ƒå°”å€¼ã€‚</li>
</ul>
<pre><code class="hljs language-Python" lang="Python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">int</span>(<span class="hljs-string">"5"</span>) + <span class="hljs-number">3</span>)      <span class="hljs-comment"># 8</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"5"</span> + <span class="hljs-built_in">str</span>(<span class="hljs-number">3</span>))      <span class="hljs-comment"># "53"</span>
<span class="hljs-comment"># print("5" + 3)         # TypeError (ä¸å…è®¸å­—ç¬¦ä¸²å’Œæ•°å­—ç›´æ¥ç›¸åŠ )</span>
</code></pre>
<h2 data-id="heading-11">ä¸‰ã€åˆ—è¡¨ï¼ˆListï¼‰å’Œå…ƒç»„ï¼ˆTupleï¼‰</h2>
<h3 data-id="heading-12">3.1 åˆ—è¡¨ (List)</h3>
<p>åˆ—è¡¨æ˜¯ Python ä¸­æœ€å¸¸ç”¨çš„<strong>å¯å˜</strong>åºåˆ—ç±»å‹ã€‚</p>
<h4 data-id="heading-13">3.1.1 åˆ›å»ºä¸è®¿é—®</h4>
<ul>
<li><strong>åˆ›å»ºï¼š</strong> <code>arr = [1, 2, 3]</code>ã€‚</li>
<li><strong>è´Ÿç´¢å¼•ï¼š</strong> æ”¯æŒè´Ÿç´¢å¼•ï¼Œ<code>-1</code> è¡¨ç¤ºæœ€åä¸€ä¸ªå…ƒç´ ï¼Œ<code>-2</code> è¡¨ç¤ºå€’æ•°ç¬¬äºŒä¸ªå…ƒç´ ã€‚</li>
</ul>
<pre><code class="hljs language-Python" lang="Python">arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
<span class="hljs-built_in">print</span>(arr[<span class="hljs-number">0</span>])   <span class="hljs-comment"># 1</span>
<span class="hljs-built_in">print</span>(arr[-<span class="hljs-number">1</span>])  <span class="hljs-comment"># 5</span>
</code></pre>
<h4 data-id="heading-14">3.1.2 å¸¸ç”¨æ–¹æ³•</h4>

































































<table><thead><tr><th><strong>åŠŸèƒ½</strong></th><th><strong>Python æ–¹æ³•</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td>æ·»åŠ å…ƒç´ (æœ«å°¾)</td><td><code>list.append(item)</code></td><td/></tr><tr><td>æ·»åŠ å…ƒç´ (ä»»æ„ä½ç½®)</td><td><code>list.insert(index, item)</code></td><td/></tr><tr><td>åˆ é™¤å…ƒç´ (æœ«å°¾/æŒ‡å®šç´¢å¼•)</td><td><code>list.pop()</code> æˆ– <code>list.pop(index)</code></td><td/></tr><tr><td>åˆ é™¤æŒ‡å®šå€¼</td><td><code>list.remove(value)</code></td><td>åˆ é™¤ç¬¬ä¸€ä¸ªåŒ¹é…çš„å€¼ï¼Œæ‰¾ä¸åˆ°ä¼šæŠ¥é”™ã€‚</td></tr><tr><td>åˆ é™¤æŒ‡å®šç´¢å¼•</td><td><code>del list[index]</code></td><td>æ›´é€šç”¨çš„åˆ é™¤è¯­æ³•ã€‚</td></tr><tr><td>æŸ¥æ‰¾ç´¢å¼•</td><td><code>list.index(value)</code></td><td>æ‰¾ä¸åˆ°ä¼šæŠ¥é”™ã€‚</td></tr><tr><td>æ£€æŸ¥å­˜åœ¨</td><td><code>value in list</code></td><td>ä½¿ç”¨ <code>in</code> å…³é”®å­—ã€‚</td></tr><tr><td>æ’åº</td><td><code>list.sort()</code></td><td><strong>åŸåœ°</strong> æ’åºï¼ˆä¿®æ”¹åŸåˆ—è¡¨ï¼‰ã€‚</td></tr><tr><td>æ’åº(è¿”å›æ–°åˆ—è¡¨)</td><td><code>sorted(list)</code></td><td>è¿”å›ä¸€ä¸ªæ–°çš„æ’åºåçš„åˆ—è¡¨ã€‚</td></tr><tr><td>åè½¬</td><td><code>list.reverse()</code></td><td><strong>åŸåœ°</strong> åè½¬ã€‚</td></tr><tr><td>é•¿åº¦</td><td><code>len(list)</code></td><td>ä½¿ç”¨ <code>len()</code> å‡½æ•°ã€‚</td></tr></tbody></table>
<h4 data-id="heading-15">3.1.3 å¼ºå¤§çš„åˆ‡ç‰‡æ“ä½œ</h4>
<p>åˆ‡ç‰‡æ˜¯ Python çš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ï¼Œç”¨äºè·å–åˆ—è¡¨çš„å­é›†ã€‚è¯­æ³•ä¸º <code>[start:end:step]</code>ã€‚</p>
<p>Python</p>
<pre><code class="hljs language-scss" lang="scss">arr = <span class="hljs-selector-attr">[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span>

<span class="hljs-built_in">print</span>(arr[<span class="hljs-number">2</span>:<span class="hljs-number">5</span>])   # <span class="hljs-selector-attr">[2, 3, 4]</span>  (ä»ç´¢å¼• <span class="hljs-number">2</span> åˆ° <span class="hljs-number">5</span>, ä¸å« <span class="hljs-number">5</span>)
<span class="hljs-built_in">print</span>(arr[:<span class="hljs-number">5</span>])    # <span class="hljs-selector-attr">[0, 1, 2, 3, 4]</span>
<span class="hljs-built_in">print</span>(arr[<span class="hljs-number">5</span>:])    # <span class="hljs-selector-attr">[5, 6, 7, 8, 9]</span>
<span class="hljs-built_in">print</span>(arr[-<span class="hljs-number">3</span>:])   # <span class="hljs-selector-attr">[7, 8, 9]</span>  (æœ€å <span class="hljs-number">3</span> ä¸ªå…ƒç´ )
<span class="hljs-built_in">print</span>(arr[::<span class="hljs-number">2</span>])   # <span class="hljs-selector-attr">[0, 2, 4, 6, 8]</span> (æ¯éš”ä¸€ä¸ªå–ä¸€ä¸ª)
<span class="hljs-built_in">print</span>(arr[::-<span class="hljs-number">1</span>])  # <span class="hljs-selector-attr">[9, 8, 7, 6, 5, 4, 3, 2, 1, 0]</span> (åè½¬)

# åˆ‡ç‰‡èµ‹å€¼ (ä¿®æ”¹åˆ—è¡¨)
arr<span class="hljs-selector-attr">[2:5]</span> = <span class="hljs-selector-attr">[20, 30, 40]</span>
</code></pre>
<h3 data-id="heading-16">3.2 åˆ—è¡¨æ¨å¯¼å¼ (List Comprehension)</h3>
<p>è¿™æ˜¯ Python æœ€ä¼˜é›…ã€æœ€é«˜æ•ˆçš„ç‰¹æ€§ä¹‹ä¸€ï¼Œç”¨äºå¿«é€Ÿç”Ÿæˆå’Œè½¬æ¢åˆ—è¡¨ã€‚</p>
<ul>
<li><strong>åŸºæœ¬å½¢å¼ï¼š</strong> <code>[expression for item in iterable]</code></li>
<li><strong>å¸¦æ¡ä»¶è¿‡æ»¤ï¼š</strong> <code>[expression for item in iterable if condition]</code></li>
</ul>
<pre><code class="hljs language-Python" lang="Python">numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]

<span class="hljs-comment"># æ˜ å°„: [1, 4, 9, 16, 25]</span>
squares = [x**<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> numbers]

<span class="hljs-comment"># è¿‡æ»¤: [4, 16]</span>
even_squares = [x**<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> numbers <span class="hljs-keyword">if</span> x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>]

<span class="hljs-comment"># æ‰å¹³åŒ–åµŒå¥—åˆ—è¡¨</span>
nested = [[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]]
flat = [item <span class="hljs-keyword">for</span> sublist <span class="hljs-keyword">in</span> nested <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> sublist]  <span class="hljs-comment"># [1, 2, 3, 4]</span>
</code></pre>
<h3 data-id="heading-17">3.3 å…ƒç»„ (Tuple)</h3>
<p>å…ƒç»„æ˜¯ Python ç‰¹æœ‰çš„<strong>ä¸å¯å˜</strong>åºåˆ—ï¼ˆåªè¯»ï¼‰ã€‚ä¸€æ—¦åˆ›å»ºï¼Œå…ƒç´ ä¸èƒ½ä¿®æ”¹ã€‚</p>
<ul>
<li><strong>åˆ›å»ºï¼š</strong> <code>point = (10, 20)</code></li>
<li><strong>è§£åŒ…ï¼š</strong> å…ƒç»„æ”¯æŒè§£åŒ…ï¼Œå¸¸ç”¨äºå‡½æ•°è¿”å›å¤šä¸ªå€¼å’Œå˜é‡äº¤æ¢ã€‚</li>
</ul>
<pre><code class="hljs language-Python" lang="Python"><span class="hljs-comment"># åˆ›å»ºå…ƒç»„</span>
rgb = (<span class="hljs-number">255</span>, <span class="hljs-number">128</span>, <span class="hljs-number">0</span>)

<span class="hljs-comment"># è§£åŒ…</span>
r, g, b = rgb
<span class="hljs-built_in">print</span>(g)  <span class="hljs-comment"># 128</span>

<span class="hljs-comment"># ä¼˜é›…åœ°äº¤æ¢å˜é‡</span>
a, b = <span class="hljs-number">1</span>, <span class="hljs-number">2</span>
a, b = b, a
<span class="hljs-comment"># a ç°åœ¨æ˜¯ 2, b ç°åœ¨æ˜¯ 1</span>
</code></pre>
<h2 data-id="heading-18">å››ã€å­—å…¸ï¼ˆDictï¼‰</h2>
<p>å­—å…¸æ˜¯ Python çš„é”®å€¼å¯¹é›†åˆï¼Œç±»ä¼¼å…¶ä»–è¯­è¨€ä¸­çš„å¯¹è±¡æˆ– Mapã€‚</p>
<h3 data-id="heading-19">4.1 åˆ›å»ºä¸è®¿é—®</h3>
<ul>
<li><strong>åˆ›å»ºï¼š</strong> é”®å¿…é¡»æ˜¯<strong>ä¸å¯å˜</strong>ç±»å‹ï¼ˆå¦‚å­—ç¬¦ä¸²ã€æ•°å­—ã€å…ƒç»„ï¼‰ï¼Œå€¼å¯ä»¥æ˜¯ä»»æ„ç±»å‹ã€‚</li>
<li><strong>è®¿é—®ï¼š</strong> åªèƒ½ä½¿ç”¨æ‹¬å·è¯­æ³• <code>dict[key]</code>ã€‚</li>
<li><strong>å®‰å…¨è®¿é—®ï¼š</strong> æ¨èä½¿ç”¨ <code>dict.get(key, default_value)</code>ï¼Œé”®ä¸å­˜åœ¨æ—¶è¿”å› <code>None</code> æˆ–é»˜è®¤å€¼ï¼Œé¿å… <code>KeyError</code>ã€‚</li>
</ul>
<pre><code class="hljs language-Python" lang="Python">user = {
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¼ ä¸‰"</span>,
    <span class="hljs-string">"age"</span>: <span class="hljs-number">25</span>,
    <span class="hljs-string">"email"</span>: <span class="hljs-string">"zhangsan@example.com"</span>
}

<span class="hljs-built_in">print</span>(user[<span class="hljs-string">"name"</span>])              <span class="hljs-comment"># "å¼ ä¸‰"</span>
<span class="hljs-built_in">print</span>(user.get(<span class="hljs-string">"age"</span>))           <span class="hljs-comment"># 25</span>
<span class="hljs-built_in">print</span>(user.get(<span class="hljs-string">"phone"</span>, <span class="hljs-string">"æœªè®¾ç½®"</span>)) <span class="hljs-comment"># "æœªè®¾ç½®" (é”®ä¸å­˜åœ¨ï¼Œè¿”å›é»˜è®¤å€¼)</span>

<span class="hljs-comment"># print(user.name)  # é”™è¯¯: å­—å…¸æ²¡æœ‰ç‚¹è¯­æ³•è®¿é—®</span>
</code></pre>
<h3 data-id="heading-20">4.2 å¸¸ç”¨æ–¹æ³•</h3>













































<table><thead><tr><th><strong>åŠŸèƒ½</strong></th><th><strong>Python æ–¹æ³•/è¯­æ³•</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td>è·å–æ‰€æœ‰é”®</td><td><code>dict.keys()</code></td><td>è¿”å›é”®çš„è§†å›¾å¯¹è±¡ã€‚</td></tr><tr><td>è·å–æ‰€æœ‰å€¼</td><td><code>dict.values()</code></td><td>è¿”å›å€¼çš„è§†å›¾å¯¹è±¡ã€‚</td></tr><tr><td>è·å–é”®å€¼å¯¹</td><td><code>dict.items()</code></td><td>è¿”å›é”®å€¼å¯¹çš„è§†å›¾å¯¹è±¡ï¼ˆåŒ…å«å…ƒç»„ï¼‰ã€‚</td></tr><tr><td>æ£€æŸ¥é”®å­˜åœ¨</td><td><code>key in dict</code></td><td/></tr><tr><td>åˆ é™¤é”®å€¼å¯¹</td><td><code>del dict[key]</code> æˆ– <code>dict.pop(key)</code></td><td><code>pop</code> ä¼šè¿”å›è¢«åˆ é™¤çš„å€¼ã€‚</td></tr><tr><td>åˆå¹¶å­—å…¸</td><td><code>dict1.update(dict2)</code> æˆ– <code>{**dict1, **dict2}</code></td><td><code>update</code> ä¼šä¿®æ”¹åŸå­—å…¸ã€‚</td></tr><tr><td>æ¸…ç©º</td><td><code>dict.clear()</code></td><td/></tr></tbody></table>
<h3 data-id="heading-21">4.3 å­—å…¸éå†</h3>
<p>éå†å­—å…¸æœ€å¸¸ç”¨çš„æ–¹å¼æ˜¯ä½¿ç”¨ <code>dict.items()</code> æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-Python" lang="Python">user = {<span class="hljs-string">"name"</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"age"</span>: <span class="hljs-number">25</span>, <span class="hljs-string">"city"</span>: <span class="hljs-string">"åŒ—äº¬"</span>}

<span class="hljs-comment"># éå†é”®å€¼å¯¹ (æœ€å¸¸ç”¨)</span>
<span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> user.items():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{key}</span>: <span class="hljs-subst">{value}</span>"</span>)

<span class="hljs-comment"># éå†é”®</span>
<span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> user.keys():
    <span class="hljs-built_in">print</span>(key)

<span class="hljs-comment"># éå†å€¼</span>
<span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> user.values():
    <span class="hljs-built_in">print</span>(value)
</code></pre>
<h3 data-id="heading-22">4.4 å­—å…¸æ¨å¯¼å¼ (Dict Comprehension)</h3>
<p>ä¸åˆ—è¡¨æ¨å¯¼å¼ç±»ä¼¼ï¼Œç”¨äºå¿«é€Ÿç”Ÿæˆå­—å…¸ã€‚</p>
<ul>
<li><strong>å½¢å¼ï¼š</strong> <code>{key_expression: value_expression for item in iterable}</code></li>
</ul>
<pre><code class="hljs language-Python" lang="Python">numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]
<span class="hljs-comment"># {1: 1, 2: 4, 3: 9, 4: 16}</span>
squared_dict = {x: x**<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> numbers}

<span class="hljs-comment"># å¸¦æ¡ä»¶è¿‡æ»¤</span>
even_squared = {x: x**<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> numbers <span class="hljs-keyword">if</span> x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>} <span class="hljs-comment"># {2: 4, 4: 16}</span>
</code></pre>
<h2 data-id="heading-23">äº”ã€Python ç‹¬æœ‰çš„å¼ºå¤§ç‰¹æ€§</h2>
<h3 data-id="heading-24">5.1 é›†åˆ (Set)</h3>
<p>é›†åˆæ˜¯æ— åºä¸”å…ƒç´ å”¯ä¸€çš„é›†åˆã€‚å¸¸ç”¨äºå»é‡å’Œé›†åˆè¿ç®—ã€‚</p>
<ul>
<li>
<p><strong>åˆ›å»ºï¼š</strong> <code>set1 = {1, 2, 3}</code>ã€‚</p>
</li>
<li>
<p><strong>å»é‡ï¼š</strong> <code>unique = list(set(numbers))</code>ã€‚</p>
</li>
<li>
<p><strong>é›†åˆè¿ç®—ï¼š</strong></p>
<ul>
<li><strong>å¹¶é›†ï¼š</strong> <code>set1 | set2</code> æˆ– <code>set1.union(set2)</code></li>
<li><strong>äº¤é›†ï¼š</strong> <code>set1 &amp; set2</code> æˆ– <code>set1.intersection(set2)</code></li>
<li><strong>å·®é›†ï¼š</strong> <code>set1 - set2</code></li>
</ul>
</li>
</ul>
<h3 data-id="heading-25">5.2 å¤šé‡èµ‹å€¼ä¸è§£åŒ…</h3>
<p>Python å…è®¸åœ¨ä¸€ä¸ªè¯­å¥ä¸­ä¸ºå¤šä¸ªå˜é‡èµ‹å€¼ï¼Œå¹¶æ”¯æŒåºåˆ—è§£åŒ…ã€‚</p>
<pre><code class="hljs language-Python" lang="Python"><span class="hljs-comment"># å¤šé‡èµ‹å€¼</span>
a, b, c = <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>

<span class="hljs-comment"># åºåˆ—è§£åŒ… (ä½¿ç”¨ * æ”¶é›†å‰©ä½™å…ƒç´ )</span>
first, *rest, last = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
<span class="hljs-built_in">print</span>(rest)  <span class="hljs-comment"># [2, 3, 4]</span>

<span class="hljs-comment"># å­—å…¸è§£åŒ… (ç”¨äºå‡½æ•°å‚æ•°)</span>
user = {<span class="hljs-string">"name"</span>: <span class="hljs-string">"æå››"</span>, <span class="hljs-string">"age"</span>: <span class="hljs-number">30</span>}
<span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name, age</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{name}</span> is <span class="hljs-subst">{age}</span> years old"</span>
<span class="hljs-built_in">print</span>(greet(**user))
</code></pre>
<h3 data-id="heading-26">5.3 ç”Ÿæˆå™¨ (Generator)</h3>
<p>ç”Ÿæˆå™¨æ˜¯æƒ°æ€§æ±‚å€¼çš„è¿­ä»£å™¨ï¼ŒæŒ‰éœ€ç”Ÿæˆæ•°æ®ï¼Œé€‚åˆå¤„ç†å¤§æ•°æ®ä»¥èŠ‚çœå†…å­˜ã€‚</p>
<ul>
<li><strong>ç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼š</strong> ä½¿ç”¨åœ†æ‹¬å· <code>()</code> è€Œéæ–¹æ‹¬å· <code>[]</code>ï¼Œå¦‚ <code>squares_gen = (x**2 for x in range(1000000))</code>ã€‚</li>
<li><strong>ç”Ÿæˆå™¨å‡½æ•°ï¼š</strong> åœ¨å‡½æ•°ä¸­ä½¿ç”¨ <code>yield</code> å…³é”®å­—ã€‚</li>
</ul>
<h3 data-id="heading-27">5.4 ä¸Šä¸‹æ–‡ç®¡ç†å™¨ (<code>with</code> è¯­å¥)</h3>
<p><code>with</code> è¯­å¥ç”¨äºè‡ªåŠ¨ç®¡ç†èµ„æºï¼Œç¡®ä¿åœ¨ä»£ç å—ç»“æŸæ—¶ï¼ˆæ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼‰èµ„æºèƒ½å¤Ÿè¢«æ­£ç¡®æ¸…ç†ï¼Œå¸¸ç”¨äºæ–‡ä»¶æ“ä½œã€‚</p>
<pre><code class="hljs language-Python" lang="Python"><span class="hljs-comment"># æ–‡ä»¶ä¼šè‡ªåŠ¨å…³é—­</span>
<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">"data.txt"</span>, <span class="hljs-string">"r"</span>, encoding=<span class="hljs-string">"utf-8"</span>) <span class="hljs-keyword">as</span> file:
    content = file.read()
    <span class="hljs-comment"># ...</span>
</code></pre>
<h2 data-id="heading-28">å…­ã€é¢å‘å¯¹è±¡ç¼–ç¨‹</h2>
<p>Python çš„é¢å‘å¯¹è±¡æ˜¯åŸºäºç±»çš„ã€‚</p>
<ul>
<li><strong>ç±»å®šä¹‰ï¼š</strong> ä½¿ç”¨ <code>class</code> å…³é”®å­—ã€‚</li>
<li><strong>æ„é€ å‡½æ•°ï¼š</strong> ä½¿ç”¨ç‰¹æ®Šæ–¹æ³• <code>__init__(self, ...)</code>ã€‚</li>
<li><strong>å®ä¾‹æ–¹æ³•ï¼š</strong> æ‰€æœ‰å®ä¾‹æ–¹æ³•ï¼ˆéé™æ€æ–¹æ³•ï¼‰çš„ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯ <code>self</code>ï¼Œä»£è¡¨å®ä¾‹æœ¬èº«ã€‚</li>
<li><strong>ç»§æ‰¿ï¼š</strong> <code>class Dog(Animal):</code></li>
</ul>
<pre><code class="hljs language-Python" lang="Python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name</span>):
        self.name = name
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">speak</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{self.name}</span> makes a sound"</span>)
</code></pre>
<h2 data-id="heading-29">ä¸ƒã€Python æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-30">7.1 Python ç¼–ç¨‹é£æ ¼ (PEP 8)</h3>
<p>éµå¾ª Python å®˜æ–¹ä»£ç é£æ ¼æŒ‡å— PEP 8ï¼Œä½¿ä»£ç æ›´å…·å¯è¯»æ€§ã€‚</p>
<ul>
<li><strong>å‘½åï¼š</strong> å˜é‡ã€å‡½æ•°å’Œæ–¹æ³•ä½¿ç”¨ <code>snake_case</code>ï¼ˆå¦‚ <code>calculate_average</code>ï¼‰ã€‚</li>
<li><strong>å¸¸é‡ï¼š</strong> ä½¿ç”¨å…¨å¤§å†™ï¼ˆå¦‚ <code>MAX_VALUE</code>ï¼‰ã€‚</li>
<li><strong>ä»£ç å—ï¼š</strong> å¼ºåˆ¶ä½¿ç”¨ 4 ä¸ªç©ºæ ¼ç¼©è¿›ã€‚</li>
</ul>
<h3 data-id="heading-31">7.2 å¸¸è§é™·é˜±</h3>
<ul>
<li><strong>å¯å˜é»˜è®¤å‚æ•°ï¼š</strong> æ°¸è¿œä¸è¦ä½¿ç”¨å¯å˜å¯¹è±¡ï¼ˆå¦‚åˆ—è¡¨ <code>[]</code> æˆ–å­—å…¸ <code>{}</code>ï¼‰ä½œä¸ºå‡½æ•°çš„é»˜è®¤å‚æ•°ï¼Œå› ä¸ºå®ƒä»¬åªä¼šè¢«åˆ›å»ºä¸€æ¬¡å¹¶åœ¨å‡½æ•°è°ƒç”¨é—´å…±äº«ã€‚</li>
</ul>
<pre><code class="hljs language-Python" lang="Python"><span class="hljs-comment"># æ­£ç¡®åšæ³•</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">add_item</span>(<span class="hljs-params">item, items=<span class="hljs-literal">None</span></span>):
    <span class="hljs-keyword">if</span> items <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
        items = []
    items.append(item)
    <span class="hljs-keyword">return</span> items
</code></pre>
<ul>
<li><strong>ä½œç”¨åŸŸï¼š</strong> Python <strong>æ²¡æœ‰å—çº§ä½œç”¨åŸŸ</strong>ï¼ˆå¦‚ <code>if</code> å—ï¼‰ï¼Œä½†æœ‰<strong>å‡½æ•°ä½œç”¨åŸŸ</strong>ã€‚</li>
</ul>
<h3 data-id="heading-32">7.3 çœŸå€¼åˆ¤æ–­</h3>
<p>Python çš„çœŸå€¼åˆ¤æ–­è§„åˆ™ç›¸å¯¹ç›´è§‚ï¼šé™¤äº†ä»¥ä¸‹å€¼è¢«è®¤ä¸ºæ˜¯ <code>False</code> å¤–ï¼Œå…¶ä»–æ‰€æœ‰å€¼éƒ½è¢«è§†ä¸º <code>True</code>ã€‚</p>
<ul>
<li><code>False</code></li>
<li><code>None</code></li>
<li>æ•°å­— <code>0</code>ï¼ˆåŒ…æ‹¬æ•´æ•°ã€æµ®ç‚¹æ•°ï¼‰</li>
<li>ç©ºåºåˆ—ï¼š<code>""</code>ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰ï¼Œ<code>[]</code>ï¼ˆç©ºåˆ—è¡¨ï¼‰ï¼Œ<code>()</code>ï¼ˆç©ºå…ƒç»„ï¼‰</li>
<li>ç©ºæ˜ å°„ï¼š<code>{}</code>ï¼ˆç©ºå­—å…¸ï¼‰</li>
<li>ç©ºé›†åˆï¼š<code>set()</code></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScriptå¸¸ç”¨è®¾è®¡æ¨¡å¼å®Œæ•´æŒ‡å—]]></title>    <link>https://juejin.cn/post/7582502441993469995</link>    <guid>https://juejin.cn/post/7582502441993469995</guid>    <pubDate>2025-12-12T04:46:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582502441993469995" data-draft-id="7582808491582488612" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScriptå¸¸ç”¨è®¾è®¡æ¨¡å¼å®Œæ•´æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,è®¾è®¡æ¨¡å¼"/> <meta itemprop="datePublished" content="2025-12-12T04:46:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="1024è‚¥å®…"/> <meta itemprop="url" content="https://juejin.cn/user/588993964030574"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScriptå¸¸ç”¨è®¾è®¡æ¨¡å¼å®Œæ•´æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/588993964030574/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    1024è‚¥å®…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T04:46:25.000Z" title="Fri Dec 12 2025 04:46:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">å¼•è¨€</h4>
<p>è®¾è®¡æ¨¡å¼æ˜¯è½¯ä»¶å·¥ç¨‹ä¸­è§£å†³å¸¸è§é—®é¢˜çš„å¯å¤ç”¨æ–¹æ¡ˆã€‚åœ¨JavaScriptå¼€å‘ä¸­ï¼Œåˆç†è¿ç”¨è®¾è®¡æ¨¡å¼å¯ä»¥æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ã€å¯æ‰©å±•æ€§å’Œå¯è¯»æ€§ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»JavaScriptä¸­å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼åŠå…¶å®ç°ã€‚</p>
<h4 data-id="heading-1">ä¸€ã€è®¾è®¡æ¨¡å¼åˆ†ç±»</h4>
<p>è®¾è®¡æ¨¡å¼ä¸»è¦åˆ†ä¸ºä¸‰å¤§ç±»ï¼š</p>
<ul>
<li><strong>åˆ›å»ºå‹æ¨¡å¼:</strong> å¤„ç†å¯¹è±¡åˆ›å»ºæœºåˆ¶</li>
<li><strong>ç»“æ„å‹æ¨¡å¼:</strong> å¤„ç†å¯¹è±¡ç»„åˆå’Œå…³ç³»</li>
<li><strong>è¡Œä¸ºå‹æ¨¡å¼:</strong> å¤„ç†å¯¹è±¡é—´é€šä¿¡å’ŒèŒè´£åˆ†é…</li>
</ul>
<h4 data-id="heading-2">äºŒã€åˆ›å»ºå‹æ¨¡å¼</h4>
<h5 data-id="heading-3">2.1 å•ä¾‹æ¨¡å¼ (Singleton Pattern)</h5>
<p>ç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹, å¹¶æä¾›å…¨å±€è®¿é—®ç‚¹ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ES6å®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Singleton</span>.<span class="hljs-property">instance</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Singleton</span>.<span class="hljs-property">instance</span>;
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = {};
    <span class="hljs-title class_">Singleton</span>.<span class="hljs-property">instance</span> = <span class="hljs-variable language_">this</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">setData</span>(<span class="hljs-params">key, value</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>[key] = value;
  }

  <span class="hljs-title function_">getData</span>(<span class="hljs-params">key</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>[key];
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> instance1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Singleton</span>();
<span class="hljs-keyword">const</span> instance2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Singleton</span>();

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(instance1 === instance2); <span class="hljs-comment">// true</span>
instance1.<span class="hljs-title function_">setData</span>(<span class="hljs-string">'name'</span>, <span class="hljs-string">'Singleton'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(instance2.<span class="hljs-title function_">getData</span>(<span class="hljs-string">'name'</span>)); <span class="hljs-comment">// 'Singleton'</span>

<span class="hljs-comment">// é—­åŒ…å®ç°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">SingletonClosure</span> = (<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> instance;
  
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">createInstance</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> object = { <span class="hljs-attr">data</span>: {} };
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">setData</span>: <span class="hljs-function">(<span class="hljs-params">key, value</span>) =&gt;</span> object.<span class="hljs-property">data</span>[key] = value,
      <span class="hljs-attr">getData</span>: <span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> object.<span class="hljs-property">data</span>[key]
    };
  }
  
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">getInstance</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">if</span> (!instance) {
        instance = <span class="hljs-title function_">createInstance</span>();
      }
      <span class="hljs-keyword">return</span> instance;
    }
  };
})();
</code></pre>
<h5 data-id="heading-4">2.2 å·¥å‚æ¨¡å¼ (Factory Pattern)</h5>
<p>åˆ›å»ºå¯¹è±¡è€Œä¸æš´éœ²åˆ›å»ºé€»è¾‘, é€šè¿‡ä¸€ä¸ªå…¬å…±æ¥å£åˆ›å»ºå¯¹è±¡ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç®€å•å·¥å‚æ¨¡å¼</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Car</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span> = options.<span class="hljs-property">type</span> || <span class="hljs-string">'sedan'</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">color</span> = options.<span class="hljs-property">color</span> || <span class="hljs-string">'white'</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">price</span> = options.<span class="hljs-property">price</span> || <span class="hljs-number">20000</span>;
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Truck</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span> = options.<span class="hljs-property">type</span> || <span class="hljs-string">'truck'</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">color</span> = options.<span class="hljs-property">color</span> || <span class="hljs-string">'blue'</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">price</span> = options.<span class="hljs-property">price</span> || <span class="hljs-number">50000</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span> = options.<span class="hljs-property">capacity</span> || <span class="hljs-string">'5t'</span>;
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">VehicleFactory</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">createVehicle</span>(<span class="hljs-params">type, options</span>) {
    <span class="hljs-keyword">switch</span> (type) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'car'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(options);
      <span class="hljs-keyword">case</span> <span class="hljs-string">'truck'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Truck</span>(options);
      <span class="hljs-attr">default</span>:
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Unknown vehicle type'</span>);
    }
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> myCar = <span class="hljs-title class_">VehicleFactory</span>.<span class="hljs-title function_">createVehicle</span>(<span class="hljs-string">'car'</span>, {
  <span class="hljs-attr">color</span>: <span class="hljs-string">'red'</span>,
  <span class="hljs-attr">price</span>: <span class="hljs-number">25000</span>
});

<span class="hljs-keyword">const</span> myTruck = <span class="hljs-title class_">VehicleFactory</span>.<span class="hljs-title function_">createVehicle</span>(<span class="hljs-string">'truck'</span>, {
  <span class="hljs-attr">color</span>: <span class="hljs-string">'black'</span>,
  <span class="hljs-attr">capacity</span>: <span class="hljs-string">'10t'</span>
});

<span class="hljs-comment">// å·¥å‚æ–¹æ³•æ¨¡å¼</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Vehicle</span> {
  <span class="hljs-title function_">drive</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.type}</span> is driving`</span>);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Car2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Vehicle</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span> = <span class="hljs-string">'Car'</span>;
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Truck2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Vehicle</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span> = <span class="hljs-string">'Truck'</span>;
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">VehicleFactory2</span> {
  <span class="hljs-title function_">createVehicle</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'This method must be overridden'</span>);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CarFactory</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">VehicleFactory2</span> {
  <span class="hljs-title function_">createVehicle</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car2</span>();
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">TruckFactory</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">VehicleFactory2</span> {
  <span class="hljs-title function_">createVehicle</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Truck2</span>();
  }
}
</code></pre>
<h5 data-id="heading-5">2.3 å»ºé€ è€…æ¨¡å¼ (Builder Pattern)</h5>
<p>å°†å¤æ‚å¯¹è±¡çš„æ„å»ºä¸å…¶è¡¨ç¤ºåˆ†ç¦», ä½¿åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Pizza</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">crust</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cheese</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pepperoni</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">mushrooms</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onions</span> = <span class="hljs-literal">false</span>;
  }

  <span class="hljs-title function_">describe</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Pizza: Size-<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.size}</span>, Crust-<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.crust}</span>, 
      Cheese-<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.cheese}</span>, Pepperoni-<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.pepperoni}</span>,
      Mushrooms-<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.mushrooms}</span>, Onions-<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.onions}</span>`</span>);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">PizzaBuilder</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pizza</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Pizza</span>();
  }

  <span class="hljs-title function_">setSize</span>(<span class="hljs-params">size</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pizza</span>.<span class="hljs-property">size</span> = size;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">setCrust</span>(<span class="hljs-params">crust</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pizza</span>.<span class="hljs-property">crust</span> = crust;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">addCheese</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pizza</span>.<span class="hljs-property">cheese</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">addPepperoni</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pizza</span>.<span class="hljs-property">pepperoni</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">addMushrooms</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pizza</span>.<span class="hljs-property">mushrooms</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">addOnions</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pizza</span>.<span class="hljs-property">onions</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">pizza</span>;
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> pizza = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PizzaBuilder</span>()
  .<span class="hljs-title function_">setSize</span>(<span class="hljs-string">'large'</span>)
  .<span class="hljs-title function_">setCrust</span>(<span class="hljs-string">'thin'</span>)
  .<span class="hljs-title function_">addCheese</span>()
  .<span class="hljs-title function_">addPepperoni</span>()
  .<span class="hljs-title function_">addMushrooms</span>()
  .<span class="hljs-title function_">build</span>();

pizza.<span class="hljs-title function_">describe</span>();
</code></pre>
<h5 data-id="heading-6">2.4 åŸå‹æ¨¡å¼ (Prototype Pattern)</h5>
<p>é€šè¿‡å¤åˆ¶ç°æœ‰å¯¹è±¡æ¥åˆ›å»ºæ–°å¯¹è±¡, è€Œä¸æ˜¯é€šè¿‡å®ä¾‹åŒ–ç±»ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨Object.createå®ç°åŸå‹æ¨¡å¼</span>
<span class="hljs-keyword">const</span> carPrototype = {
  <span class="hljs-attr">wheels</span>: <span class="hljs-number">4</span>,
  <span class="hljs-title function_">drive</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.brand}</span> is driving with <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.wheels}</span> wheels`</span>);
  },
  <span class="hljs-title function_">clone</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-variable language_">this</span>);
  }
};

<span class="hljs-comment">// åˆ›å»ºæ–°å¯¹è±¡</span>
<span class="hljs-keyword">const</span> tesla = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(carPrototype);
tesla.<span class="hljs-property">brand</span> = <span class="hljs-string">'Tesla'</span>;
tesla.<span class="hljs-property">model</span> = <span class="hljs-string">'Model 3'</span>;

<span class="hljs-keyword">const</span> anotherTesla = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(tesla);
anotherTesla.<span class="hljs-property">model</span> = <span class="hljs-string">'Model S'</span>;

tesla.<span class="hljs-title function_">drive</span>(); <span class="hljs-comment">// Tesla is driving with 4 wheels</span>
anotherTesla.<span class="hljs-title function_">drive</span>(); <span class="hljs-comment">// Tesla is driving with 4 wheels</span>

<span class="hljs-comment">// ES6ç±»å®ç°åŸå‹æ¨¡å¼</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">VehiclePrototype</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">proto</span>) {
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-variable language_">this</span>, proto);
  }

  <span class="hljs-title function_">clone</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">VehiclePrototype</span>(<span class="hljs-variable language_">this</span>);
  }
}

<span class="hljs-keyword">const</span> bikeProto = {
  <span class="hljs-attr">wheels</span>: <span class="hljs-number">2</span>,
  <span class="hljs-title function_">ride</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Riding <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.brand}</span> with <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.wheels}</span> wheels`</span>);
  }
};

<span class="hljs-keyword">const</span> bike = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VehiclePrototype</span>(bikeProto);
bike.<span class="hljs-property">brand</span> = <span class="hljs-string">'Giant'</span>;
<span class="hljs-keyword">const</span> anotherBike = bike.<span class="hljs-title function_">clone</span>();
anotherBike.<span class="hljs-property">brand</span> = <span class="hljs-string">'Trek'</span>;
</code></pre>
<h4 data-id="heading-7">ä¸‰ã€ç»“æ„å‹æ¨¡å¼</h4>
<h5 data-id="heading-8">3.1 è£…é¥°å™¨æ¨¡å¼ (Decorator Pattern)</h5>
<p>åŠ¨æ€åœ°ç»™å¯¹è±¡æ·»åŠ é¢å¤–èŒè´£, è€Œä¸æ”¹å˜å…¶ç»“æ„ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ES7è£…é¥°å™¨è¯­æ³•</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">target, name, descriptor</span>) {
  <span class="hljs-keyword">const</span> original = descriptor.<span class="hljs-property">value</span>;
  
  descriptor.<span class="hljs-property">value</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Calling <span class="hljs-subst">${name}</span> with`</span>, args);
    <span class="hljs-keyword">const</span> result = original.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Result: <span class="hljs-subst">${result}</span>`</span>);
    <span class="hljs-keyword">return</span> result;
  };
  
  <span class="hljs-keyword">return</span> descriptor;
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Calculator</span> {
  @log
  <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) {
    <span class="hljs-keyword">return</span> a + b;
  }
}

<span class="hljs-comment">// ä¼ ç»ŸJavaScriptå®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Coffee</span> {
  <span class="hljs-title function_">cost</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">5</span>;
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CoffeeDecorator</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">coffee</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">coffee</span> = coffee;
  }

  <span class="hljs-title function_">cost</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">coffee</span>.<span class="hljs-title function_">cost</span>();
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MilkDecorator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">CoffeeDecorator</span> {
  <span class="hljs-title function_">cost</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">coffee</span>.<span class="hljs-title function_">cost</span>() + <span class="hljs-number">2</span>;
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SugarDecorator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">CoffeeDecorator</span> {
  <span class="hljs-title function_">cost</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">coffee</span>.<span class="hljs-title function_">cost</span>() + <span class="hljs-number">1</span>;
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">let</span> myCoffee = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Coffee</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Basic coffee: $<span class="hljs-subst">${myCoffee.cost()}</span>`</span>);

myCoffee = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MilkDecorator</span>(myCoffee);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Coffee with milk: $<span class="hljs-subst">${myCoffee.cost()}</span>`</span>);

myCoffee = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SugarDecorator</span>(myCoffee);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Coffee with milk and sugar: $<span class="hljs-subst">${myCoffee.cost()}</span>`</span>);
</code></pre>
<h5 data-id="heading-9">3.2 ä»£ç†æ¨¡å¼ (Proxy Pattern)</h5>
<p>ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ES6 Proxyå®ç°</span>
<span class="hljs-keyword">const</span> target = {
  <span class="hljs-attr">message</span>: <span class="hljs-string">"Hello, World!"</span>,
  <span class="hljs-title function_">getMessage</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>;
  }
};

<span class="hljs-keyword">const</span> handler = {
  <span class="hljs-attr">get</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">obj, prop</span>) {
    <span class="hljs-keyword">if</span> (prop === <span class="hljs-string">'message'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Accessing message property'</span>);
      <span class="hljs-keyword">return</span> obj[prop] + <span class="hljs-string">' (via proxy)'</span>;
    }
    <span class="hljs-keyword">return</span> obj[prop];
  },
  
  <span class="hljs-attr">set</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">obj, prop, value</span>) {
    <span class="hljs-keyword">if</span> (prop === <span class="hljs-string">'message'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Setting message to: <span class="hljs-subst">${value}</span>`</span>);
      obj[prop] = value;
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
};

<span class="hljs-keyword">const</span> proxy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(target, handler);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(proxy.<span class="hljs-property">message</span>); <span class="hljs-comment">// "Hello, World! (via proxy)"</span>
proxy.<span class="hljs-property">message</span> = <span class="hljs-string">"New Message"</span>; <span class="hljs-comment">// "Setting message to: New Message"</span>

<span class="hljs-comment">// ä¿æŠ¤ä»£ç†ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> sensitiveData = {
  <span class="hljs-attr">username</span>: <span class="hljs-string">'admin'</span>,
  <span class="hljs-attr">password</span>: <span class="hljs-string">'secret123'</span>,
  <span class="hljs-attr">creditCard</span>: <span class="hljs-string">'1234-5678-9012-3456'</span>
};

<span class="hljs-keyword">const</span> protectionHandler = {
  <span class="hljs-attr">get</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">obj, prop</span>) {
    <span class="hljs-keyword">if</span> (prop === <span class="hljs-string">'password'</span> || prop === <span class="hljs-string">'creditCard'</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">'Access denied'</span>;
    }
    <span class="hljs-keyword">return</span> obj[prop];
  },
  
  <span class="hljs-attr">set</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">obj, prop, value</span>) {
    <span class="hljs-keyword">if</span> (prop === <span class="hljs-string">'password'</span> || prop === <span class="hljs-string">'creditCard'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Cannot modify sensitive data directly'</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    obj[prop] = value;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
};

<span class="hljs-keyword">const</span> protectedData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(sensitiveData, protectionHandler);
</code></pre>
<h5 data-id="heading-10">3.3 é€‚é…å™¨æ¨¡å¼ (Adapter Pattern)</h5>
<p>å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·æœŸæœ›çš„å¦ä¸€ä¸ªæ¥å£ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ—§ç³»ç»Ÿæ¥å£</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">OldSystem</span> {
  <span class="hljs-title function_">specificRequest</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'Old system response'</span>;
  }
}

<span class="hljs-comment">// æ–°ç³»ç»ŸæœŸæœ›çš„æ¥å£</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">NewSystem</span> {
  <span class="hljs-title function_">request</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'New system response'</span>;
  }
}

<span class="hljs-comment">// é€‚é…å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Adapter</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">oldSystem</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">oldSystem</span> = oldSystem;
  }

  <span class="hljs-title function_">request</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> result = <span class="hljs-variable language_">this</span>.<span class="hljs-property">oldSystem</span>.<span class="hljs-title function_">specificRequest</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-string">`Adapted: <span class="hljs-subst">${result}</span>`</span>;
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> oldSystem = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OldSystem</span>();
<span class="hljs-keyword">const</span> adapter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Adapter</span>(oldSystem);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(adapter.<span class="hljs-title function_">request</span>()); <span class="hljs-comment">// "Adapted: Old system response"</span>

<span class="hljs-comment">// å®é™…åº”ç”¨ç¤ºä¾‹ï¼šæ•°æ®æ ¼å¼é€‚é…</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">JSONData</span> {
  <span class="hljs-title function_">getData</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'{"name": "John", "age": 30}'</span>;
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">XMLData</span> {
  <span class="hljs-title function_">getData</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;user&gt;&lt;name&gt;John&lt;/name&gt;&lt;age&gt;30&lt;/age&gt;&lt;/user&gt;'</span>;
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">DataAdapter</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">dataSource</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dataSource</span> = dataSource;
  }

  <span class="hljs-title function_">getJSON</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> data = <span class="hljs-variable language_">this</span>.<span class="hljs-property">dataSource</span>.<span class="hljs-title function_">getData</span>();
    
    <span class="hljs-comment">// å¦‚æœæ˜¯XMLï¼Œè½¬æ¢ä¸ºJSON</span>
    <span class="hljs-keyword">if</span> (data.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'&lt;'</span>)) {
      <span class="hljs-comment">// ç®€å•è½¬æ¢é€»è¾‘</span>
      <span class="hljs-keyword">const</span> nameMatch = data.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/&lt;name&gt;(.*?)&lt;\/name&gt;/</span>);
      <span class="hljs-keyword">const</span> ageMatch = data.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/&lt;age&gt;(.*?)&lt;\/age&gt;/</span>);
      
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
        <span class="hljs-attr">name</span>: nameMatch ? nameMatch[<span class="hljs-number">1</span>] : <span class="hljs-string">''</span>,
        <span class="hljs-attr">age</span>: ageMatch ? <span class="hljs-built_in">parseInt</span>(ageMatch[<span class="hljs-number">1</span>]) : <span class="hljs-number">0</span>
      });
    }
    
    <span class="hljs-keyword">return</span> data;
  }
}
</code></pre>
<h5 data-id="heading-11">3.4 å¤–è§‚æ¨¡å¼ (Facade Pattern)</h5>
<p>ä¸ºå¤æ‚çš„å­ç³»ç»Ÿæä¾›ä¸€ä¸ªç»Ÿä¸€çš„ç®€å•æ¥å£ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¤æ‚çš„å­ç³»ç»Ÿ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CPU</span> {
  <span class="hljs-title function_">start</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'CPU started'</span>);
  }
  
  <span class="hljs-title function_">execute</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'CPU executing instructions'</span>);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Memory</span> {
  <span class="hljs-title function_">load</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Memory loading data'</span>);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">HardDrive</span> {
  <span class="hljs-title function_">read</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Hard drive reading data'</span>);
  }
}

<span class="hljs-comment">// å¤–è§‚</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ComputerFacade</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cpu</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_">CPU</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">memory</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Memory</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">hardDrive</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HardDrive</span>();
  }

  <span class="hljs-title function_">startComputer</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Starting computer...'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cpu</span>.<span class="hljs-title function_">start</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">memory</span>.<span class="hljs-title function_">load</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">hardDrive</span>.<span class="hljs-title function_">read</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cpu</span>.<span class="hljs-title function_">execute</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Computer started successfully'</span>);
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> computer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComputerFacade</span>();
computer.<span class="hljs-title function_">startComputer</span>();

<span class="hljs-comment">// å¦ä¸€ä¸ªä¾‹å­ï¼šDOMæ“ä½œå¤–è§‚</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">DOMFacade</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">elementId</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(elementId);
  }

  <span class="hljs-title function_">setText</span>(<span class="hljs-params">text</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>.<span class="hljs-property">textContent</span> = text;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">setStyle</span>(<span class="hljs-params">styles</span>) {
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>.<span class="hljs-property">style</span>, styles);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">addClass</span>(<span class="hljs-params">className</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(className);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">on</span>(<span class="hljs-params">event, handler</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>.<span class="hljs-title function_">addEventListener</span>(event, handler);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
}
</code></pre>
<h5 data-id="heading-12">3.5 ç»„åˆæ¨¡å¼ (Composite Pattern)</h5>
<p>å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤º'éƒ¨åˆ†-æ•´ä½“'çš„å±‚æ¬¡ç»“æ„ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»„ä»¶æ¥å£</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Component</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  }

  <span class="hljs-title function_">add</span>(<span class="hljs-params">component</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'This method must be overridden'</span>);
  }

  <span class="hljs-title function_">remove</span>(<span class="hljs-params">component</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'This method must be overridden'</span>);
  }

  <span class="hljs-title function_">getChild</span>(<span class="hljs-params">index</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'This method must be overridden'</span>);
  }

  <span class="hljs-title function_">operation</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'This method must be overridden'</span>);
  }
}

<span class="hljs-comment">// å¶å­èŠ‚ç‚¹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Leaf</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">super</span>(name);
  }

  <span class="hljs-title function_">operation</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Leaf <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> operation`</span>);
  }
}

<span class="hljs-comment">// å¤åˆèŠ‚ç‚¹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Composite</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">super</span>(name);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">children</span> = [];
  }

  <span class="hljs-title function_">add</span>(<span class="hljs-params">component</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">children</span>.<span class="hljs-title function_">push</span>(component);
  }

  <span class="hljs-title function_">remove</span>(<span class="hljs-params">component</span>) {
    <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">children</span>.<span class="hljs-title function_">indexOf</span>(component);
    <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">children</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
    }
  }

  <span class="hljs-title function_">getChild</span>(<span class="hljs-params">index</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">children</span>[index];
  }

  <span class="hljs-title function_">operation</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Composite <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> operation`</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> child <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">children</span>) {
      child.<span class="hljs-title function_">operation</span>();
    }
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹ï¼šæ–‡ä»¶ç³»ç»Ÿ</span>
<span class="hljs-keyword">const</span> root = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Composite</span>(<span class="hljs-string">'root'</span>);
<span class="hljs-keyword">const</span> home = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Composite</span>(<span class="hljs-string">'home'</span>);
<span class="hljs-keyword">const</span> user = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Composite</span>(<span class="hljs-string">'user'</span>);

<span class="hljs-keyword">const</span> file1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Leaf</span>(<span class="hljs-string">'file1.txt'</span>);
<span class="hljs-keyword">const</span> file2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Leaf</span>(<span class="hljs-string">'file2.txt'</span>);
<span class="hljs-keyword">const</span> file3 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Leaf</span>(<span class="hljs-string">'file3.txt'</span>);

root.<span class="hljs-title function_">add</span>(home);
home.<span class="hljs-title function_">add</span>(user);
user.<span class="hljs-title function_">add</span>(file1);
user.<span class="hljs-title function_">add</span>(file2);
root.<span class="hljs-title function_">add</span>(file3);

root.<span class="hljs-title function_">operation</span>();
</code></pre>
<h4 data-id="heading-13">å››ã€è¡Œä¸ºå‹æ¨¡å¼</h4>
<h5 data-id="heading-14">4.1 ç­–ç•¥æ¨¡å¼ (Strategy Pattern)</h5>
<p>å®šä¹‰ä¸€ç³»åˆ—ç®—æ³•, å°è£…æ¯ä¸ªç®—æ³•, å¹¶ä½¿å®ƒä»¬å¯ä»¥äº’ç›¸æ›¿æ¢ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç­–ç•¥æ¥å£</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PaymentStrategy</span> {
  <span class="hljs-title function_">pay</span>(<span class="hljs-params">amount</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'This method must be overridden'</span>);
  }
}

<span class="hljs-comment">// å…·ä½“ç­–ç•¥</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CreditCardStrategy</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">PaymentStrategy</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">cardNumber, cvv</span>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cardNumber</span> = cardNumber;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cvv</span> = cvv;
  }

  <span class="hljs-title function_">pay</span>(<span class="hljs-params">amount</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Paid $<span class="hljs-subst">${amount}</span> using Credit Card <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.cardNumber.slice(-<span class="hljs-number">4</span>)}</span>`</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">PayPalStrategy</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">PaymentStrategy</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">email</span>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">email</span> = email;
  }

  <span class="hljs-title function_">pay</span>(<span class="hljs-params">amount</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Paid $<span class="hljs-subst">${amount}</span> using PayPal (<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.email}</span>)`</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CryptoStrategy</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">PaymentStrategy</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">walletAddress</span>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">walletAddress</span> = walletAddress;
  }

  <span class="hljs-title function_">pay</span>(<span class="hljs-params">amount</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Paid $<span class="hljs-subst">${amount}</span> using Crypto Wallet <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.walletAddress.slice(<span class="hljs-number">0</span>, <span class="hljs-number">8</span>)}</span>...`</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
}

<span class="hljs-comment">// ä¸Šä¸‹æ–‡</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ShoppingCart</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">paymentStrategy</span> = <span class="hljs-literal">null</span>;
  }

  <span class="hljs-title function_">addItem</span>(<span class="hljs-params">item, price</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>({ item, price });
  }

  <span class="hljs-title function_">calculateTotal</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">total, item</span>) =&gt;</span> total + item.<span class="hljs-property">price</span>, <span class="hljs-number">0</span>);
  }

  <span class="hljs-title function_">setPaymentStrategy</span>(<span class="hljs-params">strategy</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">paymentStrategy</span> = strategy;
  }

  <span class="hljs-title function_">checkout</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> total = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">calculateTotal</span>();
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">paymentStrategy</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Please select a payment method'</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">paymentStrategy</span>.<span class="hljs-title function_">pay</span>(total);
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> cart = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShoppingCart</span>();
cart.<span class="hljs-title function_">addItem</span>(<span class="hljs-string">'Book'</span>, <span class="hljs-number">25</span>);
cart.<span class="hljs-title function_">addItem</span>(<span class="hljs-string">'Headphones'</span>, <span class="hljs-number">100</span>);

cart.<span class="hljs-title function_">setPaymentStrategy</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CreditCardStrategy</span>(<span class="hljs-string">'1234-5678-9012-3456'</span>, <span class="hljs-string">'123'</span>));
cart.<span class="hljs-title function_">checkout</span>();

cart.<span class="hljs-title function_">setPaymentStrategy</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PayPalStrategy</span>(<span class="hljs-string">'user@example.com'</span>));
cart.<span class="hljs-title function_">checkout</span>();
</code></pre>
<h5 data-id="heading-15">4.2 è§‚å¯Ÿè€…æ¨¡å¼ (Observer Pattern / å‘å¸ƒ-è®¢é˜…æ¨¡å¼)</h5>
<p>å®šä¹‰å¯¹è±¡é—´çš„ä¸€å¯¹å¤šä¾èµ–å…³ç³», å½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€æ”¹å˜æ—¶, æ‰€æœ‰ä¾èµ–å®ƒçš„å¯¹è±¡éƒ½ä¼šå¾—åˆ°é€šçŸ¥ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‘å¸ƒ-è®¢é˜…å®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">EventEmitter</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span> = {};
  }

  <span class="hljs-title function_">on</span>(<span class="hljs-params">event, listener</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[event]) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[event] = [];
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[event].<span class="hljs-title function_">push</span>(listener);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">off</span>(event, listener);
  }

  <span class="hljs-title function_">off</span>(<span class="hljs-params">event, listener</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[event]) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[event].<span class="hljs-title function_">indexOf</span>(listener);
    <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[event].<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
    }
  }

  <span class="hljs-title function_">emit</span>(<span class="hljs-params">event, ...args</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[event]) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>[event].<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">listener</span> =&gt;</span> {
      <span class="hljs-keyword">try</span> {
        listener.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Error in event listener for <span class="hljs-subst">${event}</span>:`</span>, error);
      }
    });
  }

  <span class="hljs-title function_">once</span>(<span class="hljs-params">event, listener</span>) {
    <span class="hljs-keyword">const</span> removeListener = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(event, <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> {
      listener.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
      <span class="hljs-title function_">removeListener</span>();
    });
    <span class="hljs-keyword">return</span> removeListener;
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> emitter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventEmitter</span>();

<span class="hljs-comment">// è®¢é˜…äº‹ä»¶</span>
<span class="hljs-keyword">const</span> unsubscribe = emitter.<span class="hljs-title function_">on</span>(<span class="hljs-string">'userLoggedIn'</span>, <span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Welcome, <span class="hljs-subst">${user.name}</span>!`</span>);
});

emitter.<span class="hljs-title function_">on</span>(<span class="hljs-string">'userLoggedIn'</span>, <span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Sending login notification to <span class="hljs-subst">${user.email}</span>`</span>);
});

<span class="hljs-comment">// å‘å¸ƒäº‹ä»¶</span>
emitter.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'userLoggedIn'</span>, { 
  <span class="hljs-attr">name</span>: <span class="hljs-string">'John Doe'</span>, 
  <span class="hljs-attr">email</span>: <span class="hljs-string">'john@example.com'</span> 
});

<span class="hljs-comment">// å–æ¶ˆè®¢é˜…</span>
<span class="hljs-title function_">unsubscribe</span>();

<span class="hljs-comment">// è§‚å¯Ÿè€…æ¨¡å¼å®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Subject</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span> = [];
  }

  <span class="hljs-title function_">addObserver</span>(<span class="hljs-params">observer</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span>.<span class="hljs-title function_">push</span>(observer);
  }

  <span class="hljs-title function_">removeObserver</span>(<span class="hljs-params">observer</span>) {
    <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span>.<span class="hljs-title function_">indexOf</span>(observer);
    <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
    }
  }

  <span class="hljs-title function_">notify</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">observer</span> =&gt;</span> observer.<span class="hljs-title function_">update</span>(data));
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Observer</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  }

  <span class="hljs-title function_">update</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> received:`</span>, data);
  }
}
</code></pre>
<h5 data-id="heading-16">4.3 è¿­ä»£å™¨æ¨¡å¼ (Iterator Pattern)</h5>
<p>æä¾›ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®èšåˆå¯¹è±¡ä¸­çš„å„ä¸ªå…ƒç´ , è€Œåˆä¸æš´éœ²å…¶å†…éƒ¨è¡¨ç¤ºã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è‡ªå®šä¹‰è¿­ä»£å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Range</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">start, end, step = <span class="hljs-number">1</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">start</span> = start;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">end</span> = end;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">step</span> = step;
  }

  [<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span>]() {
    <span class="hljs-keyword">let</span> current = <span class="hljs-variable language_">this</span>.<span class="hljs-property">start</span>;
    <span class="hljs-keyword">const</span> end = <span class="hljs-variable language_">this</span>.<span class="hljs-property">end</span>;
    <span class="hljs-keyword">const</span> step = <span class="hljs-variable language_">this</span>.<span class="hljs-property">step</span>;
    
    <span class="hljs-keyword">return</span> {
      <span class="hljs-title function_">next</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">if</span> (current &lt;= end) {
          <span class="hljs-keyword">const</span> value = current;
          current += step;
          <span class="hljs-keyword">return</span> { value, <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> };
        }
        <span class="hljs-keyword">return</span> { <span class="hljs-attr">done</span>: <span class="hljs-literal">true</span> };
      }
    };
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> num <span class="hljs-keyword">of</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>)) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num); <span class="hljs-comment">// 1, 2, 3, 4, 5</span>
}

<span class="hljs-comment">// è‡ªå®šä¹‰é›†åˆè¿­ä»£å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Collection</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span> = [];
  }

  <span class="hljs-title function_">add</span>(<span class="hljs-params">item</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(item);
  }

  [<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span>]() {
    <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> items = <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>;
    
    <span class="hljs-keyword">return</span> {
      <span class="hljs-title function_">next</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">if</span> (index &lt; items.<span class="hljs-property">length</span>) {
          <span class="hljs-keyword">return</span> { <span class="hljs-attr">value</span>: items[index++], <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> };
        }
        <span class="hljs-keyword">return</span> { <span class="hljs-attr">done</span>: <span class="hljs-literal">true</span> };
      },
      
      <span class="hljs-keyword">return</span>() {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Iteration stopped prematurely'</span>);
        <span class="hljs-keyword">return</span> { <span class="hljs-attr">done</span>: <span class="hljs-literal">true</span> };
      }
    };
  }

  <span class="hljs-comment">// ç”Ÿæˆå™¨å®ç°</span>
  *<span class="hljs-title function_">filter</span>(<span class="hljs-params">predicate</span>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>) {
      <span class="hljs-keyword">if</span> (<span class="hljs-title function_">predicate</span>(item)) {
        <span class="hljs-keyword">yield</span> item;
      }
    }
  }

  *<span class="hljs-title function_">map</span>(<span class="hljs-params">transform</span>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>) {
      <span class="hljs-keyword">yield</span> <span class="hljs-title function_">transform</span>(item);
    }
  }
}
</code></pre>
<h5 data-id="heading-17">4.4 å‘½ä»¤æ¨¡å¼ (Command Pattern)</h5>
<p>å°†è¯·æ±‚å°è£…ä¸ºå¯¹è±¡, ä»è€Œå…è®¸å‚æ•°åŒ–å®¢æˆ·ã€é˜Ÿåˆ—è¯·æ±‚ã€è®°å½•æ—¥å¿—ä»¥åŠæ”¯æŒå¯æ’¤é”€æ“ä½œã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‘½ä»¤æ¥å£</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Command</span> {
  <span class="hljs-title function_">execute</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'This method must be overridden'</span>);
  }

  <span class="hljs-title function_">undo</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'This method must be overridden'</span>);
  }
}

<span class="hljs-comment">// å…·ä½“å‘½ä»¤</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">LightOnCommand</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Command</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">light</span>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">light</span> = light;
  }

  <span class="hljs-title function_">execute</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">light</span>.<span class="hljs-title function_">turnOn</span>();
  }

  <span class="hljs-title function_">undo</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">light</span>.<span class="hljs-title function_">turnOff</span>();
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">LightOffCommand</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Command</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">light</span>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">light</span> = light;
  }

  <span class="hljs-title function_">execute</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">light</span>.<span class="hljs-title function_">turnOff</span>();
  }

  <span class="hljs-title function_">undo</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">light</span>.<span class="hljs-title function_">turnOn</span>();
  }
}

<span class="hljs-comment">// æ¥æ”¶è€…</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Light</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">location</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">location</span> = location;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isOn</span> = <span class="hljs-literal">false</span>;
  }

  <span class="hljs-title function_">turnOn</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isOn</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.location}</span> light is ON`</span>);
  }

  <span class="hljs-title function_">turnOff</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isOn</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.location}</span> light is OFF`</span>);
  }
}

<span class="hljs-comment">// è°ƒç”¨è€…</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">RemoteControl</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">commands</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span> = [];
  }

  <span class="hljs-title function_">setCommand</span>(<span class="hljs-params">command</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">commands</span>.<span class="hljs-title function_">push</span>(command);
  }

  <span class="hljs-title function_">executeCommands</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">commands</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">command</span> =&gt;</span> {
      command.<span class="hljs-title function_">execute</span>();
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">push</span>(command);
    });
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">commands</span> = [];
  }

  <span class="hljs-title function_">undoLast</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">const</span> lastCommand = <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">pop</span>();
      lastCommand.<span class="hljs-title function_">undo</span>();
    }
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> livingRoomLight = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Light</span>(<span class="hljs-string">'Living Room'</span>);
<span class="hljs-keyword">const</span> kitchenLight = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Light</span>(<span class="hljs-string">'Kitchen'</span>);

<span class="hljs-keyword">const</span> remote = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RemoteControl</span>();

remote.<span class="hljs-title function_">setCommand</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">LightOnCommand</span>(livingRoomLight));
remote.<span class="hljs-title function_">setCommand</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">LightOnCommand</span>(kitchenLight));
remote.<span class="hljs-title function_">executeCommands</span>();

remote.<span class="hljs-title function_">undoLast</span>();

<span class="hljs-comment">// å®å‘½ä»¤</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MacroCommand</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Command</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">commands</span>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">commands</span> = commands;
  }

  <span class="hljs-title function_">execute</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">commands</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">command</span> =&gt;</span> command.<span class="hljs-title function_">execute</span>());
  }

  <span class="hljs-title function_">undo</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// é€†åºæ‰§è¡Œæ’¤é”€</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">commands</span>.<span class="hljs-title function_">reverse</span>().<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">command</span> =&gt;</span> command.<span class="hljs-title function_">undo</span>());
  }
}
</code></pre>
<h5 data-id="heading-18">4.5 çŠ¶æ€æ¨¡å¼ (State Pattern)</h5>
<p>å…è®¸å¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å…¶è¡Œä¸º, çœ‹èµ·æ¥åƒæ˜¯ä¿®æ”¹äº†ç±»ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// çŠ¶æ€æ¥å£</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">TrafficLightState</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">context</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span> = context;
  }

  <span class="hljs-title function_">change</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'This method must be overridden'</span>);
  }
}

<span class="hljs-comment">// å…·ä½“çŠ¶æ€</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">RedLightState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">TrafficLightState</span> {
  <span class="hljs-title function_">change</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Red light - STOP'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">setState</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">GreenLightState</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>));
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">GreenLightState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">TrafficLightState</span> {
  <span class="hljs-title function_">change</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Green light - GO'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">setState</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">YellowLightState</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>));
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">YellowLightState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">TrafficLightState</span> {
  <span class="hljs-title function_">change</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Yellow light - CAUTION'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">setState</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RedLightState</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>));
  }
}

<span class="hljs-comment">// ä¸Šä¸‹æ–‡</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">TrafficLight</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedLightState</span>(<span class="hljs-variable language_">this</span>);
  }

  <span class="hljs-title function_">setState</span>(<span class="hljs-params">state</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = state;
  }

  <span class="hljs-title function_">change</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-title function_">change</span>();
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> trafficLight = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TrafficLight</span>();

trafficLight.<span class="hljs-title function_">change</span>(); <span class="hljs-comment">// Red light - STOP</span>
trafficLight.<span class="hljs-title function_">change</span>(); <span class="hljs-comment">// Green light - GO</span>
trafficLight.<span class="hljs-title function_">change</span>(); <span class="hljs-comment">// Yellow light - CAUTION</span>
trafficLight.<span class="hljs-title function_">change</span>(); <span class="hljs-comment">// Red light - STOP</span>

<span class="hljs-comment">// æ›´å¤æ‚çš„ä¾‹å­ï¼šæ–‡æ¡£ç¼–è¾‘å™¨çŠ¶æ€</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Document</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DraftState</span>(<span class="hljs-variable language_">this</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span> = <span class="hljs-string">''</span>;
  }

  <span class="hljs-title function_">setState</span>(<span class="hljs-params">state</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = state;
  }

  <span class="hljs-title function_">write</span>(<span class="hljs-params">text</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-title function_">write</span>(text);
  }

  <span class="hljs-title function_">publish</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-title function_">publish</span>();
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">DraftState</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-variable language_">document</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">document</span> = <span class="hljs-variable language_">document</span>;
  }

  <span class="hljs-title function_">write</span>(<span class="hljs-params">text</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">document</span>.<span class="hljs-property">content</span> += text;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Draft: Added "<span class="hljs-subst">${text}</span>"`</span>);
  }

  <span class="hljs-title function_">publish</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Publishing draft...'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">document</span>.<span class="hljs-title function_">setState</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PublishedState</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">document</span>));
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">PublishedState</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-variable language_">document</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">document</span> = <span class="hljs-variable language_">document</span>;
  }

  <span class="hljs-title function_">write</span>(<span class="hljs-params">text</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Cannot write to published document. Create new draft first.'</span>);
  }

  <span class="hljs-title function_">publish</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Document is already published.'</span>);
  }
}
</code></pre>
<h5 data-id="heading-19">4.6 èŒè´£é“¾æ¨¡å¼ (Chain of Responsibility Pattern)</h5>
<p>ä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚, ä»è€Œé¿å…è¯·æ±‚å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¤„ç†è€…æ¥å£</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Handler</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">nextHandler</span> = <span class="hljs-literal">null</span>;
  }

  <span class="hljs-title function_">setNext</span>(<span class="hljs-params">handler</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">nextHandler</span> = handler;
    <span class="hljs-keyword">return</span> handler;
  }

  <span class="hljs-title function_">handle</span>(<span class="hljs-params">request</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">nextHandler</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">nextHandler</span>.<span class="hljs-title function_">handle</span>(request);
    }
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'No handler found for request:'</span>, request);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }
}

<span class="hljs-comment">// å…·ä½“å¤„ç†è€…</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthenticationHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Handler</span> {
  <span class="hljs-title function_">handle</span>(<span class="hljs-params">request</span>) {
    <span class="hljs-keyword">if</span> (request.<span class="hljs-property">type</span> === <span class="hljs-string">'auth'</span> &amp;&amp; request.<span class="hljs-property">credentials</span> === <span class="hljs-string">'valid'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Authentication successful'</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">handle</span>(request);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (request.<span class="hljs-property">type</span> === <span class="hljs-string">'auth'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Authentication failed'</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">handle</span>(request);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthorizationHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Handler</span> {
  <span class="hljs-title function_">handle</span>(<span class="hljs-params">request</span>) {
    <span class="hljs-keyword">if</span> (request.<span class="hljs-property">type</span> === <span class="hljs-string">'auth'</span> &amp;&amp; request.<span class="hljs-property">role</span> === <span class="hljs-string">'admin'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Authorization granted for admin'</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">handle</span>(request);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (request.<span class="hljs-property">type</span> === <span class="hljs-string">'auth'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Authorization denied'</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">handle</span>(request);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">LoggingHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Handler</span> {
  <span class="hljs-title function_">handle</span>(<span class="hljs-params">request</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Logging request: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(request)}</span>`</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">handle</span>(request);
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> authHandler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AuthenticationHandler</span>();
<span class="hljs-keyword">const</span> authzHandler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AuthorizationHandler</span>();
<span class="hljs-keyword">const</span> logHandler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LoggingHandler</span>();

authHandler
  .<span class="hljs-title function_">setNext</span>(authzHandler)
  .<span class="hljs-title function_">setNext</span>(logHandler);

<span class="hljs-comment">// å¤„ç†è¯·æ±‚</span>
<span class="hljs-keyword">const</span> request1 = { <span class="hljs-attr">type</span>: <span class="hljs-string">'auth'</span>, <span class="hljs-attr">credentials</span>: <span class="hljs-string">'valid'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'admin'</span> };
authHandler.<span class="hljs-title function_">handle</span>(request1);

<span class="hljs-keyword">const</span> request2 = { <span class="hljs-attr">type</span>: <span class="hljs-string">'auth'</span>, <span class="hljs-attr">credentials</span>: <span class="hljs-string">'invalid'</span> };
authHandler.<span class="hljs-title function_">handle</span>(request2);

<span class="hljs-comment">// å®é™…åº”ç”¨ï¼šè¯·æ±‚å¤„ç†ç®¡é“</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ValidationHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Handler</span> {
  <span class="hljs-title function_">handle</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-keyword">if</span> (!data.<span class="hljs-property">email</span> || !data.<span class="hljs-property">email</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'@'</span>)) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Validation failed: Invalid email'</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Validation passed'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">handle</span>(data);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SanitizationHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Handler</span> {
  <span class="hljs-title function_">handle</span>(<span class="hljs-params">data</span>) {
    data.<span class="hljs-property">email</span> = data.<span class="hljs-property">email</span>.<span class="hljs-title function_">trim</span>().<span class="hljs-title function_">toLowerCase</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Data sanitized'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">handle</span>(data);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SaveHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Handler</span> {
  <span class="hljs-title function_">handle</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Saving data: <span class="hljs-subst">${data.email}</span>`</span>);
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">id</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() };
  }
}
</code></pre>
<h4 data-id="heading-20">äº”ã€å…¶ä»–é‡è¦æ¨¡å¼</h4>
<h5 data-id="heading-21">5.1 æ¨¡å—æ¨¡å¼ (Module Pattern)</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨IIFEå®ç°æ¨¡å—æ¨¡å¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">UserModule</span> = (<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ç§æœ‰å˜é‡</span>
  <span class="hljs-keyword">let</span> users = [];
  <span class="hljs-keyword">let</span> userCount = <span class="hljs-number">0</span>;

  <span class="hljs-comment">// ç§æœ‰æ–¹æ³•</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">generateId</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>().<span class="hljs-title function_">toString</span>(<span class="hljs-number">36</span>) + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>().<span class="hljs-title function_">toString</span>(<span class="hljs-number">36</span>).<span class="hljs-title function_">substr</span>(<span class="hljs-number">2</span>);
  }

  <span class="hljs-comment">// å…¬å…±æ¥å£</span>
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">addUser</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">name, email</span>) {
      <span class="hljs-keyword">const</span> user = {
        <span class="hljs-attr">id</span>: <span class="hljs-title function_">generateId</span>(),
        name,
        email,
        <span class="hljs-attr">createdAt</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()
      };
      users.<span class="hljs-title function_">push</span>(user);
      userCount++;
      <span class="hljs-keyword">return</span> user.<span class="hljs-property">id</span>;
    },

    <span class="hljs-attr">getUser</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">id</span>) {
      <span class="hljs-keyword">return</span> users.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">user</span> =&gt;</span> user.<span class="hljs-property">id</span> === id);
    },

    <span class="hljs-attr">getUsers</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> [...users]; <span class="hljs-comment">// è¿”å›å‰¯æœ¬</span>
    },

    <span class="hljs-attr">getUserCount</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> userCount;
    },

    <span class="hljs-attr">removeUser</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">id</span>) {
      <span class="hljs-keyword">const</span> index = users.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">user</span> =&gt;</span> user.<span class="hljs-property">id</span> === id);
      <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) {
        users.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
        userCount--;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      }
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  };
})();

<span class="hljs-comment">// ES6æ¨¡å—è¯­æ³•</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Calculator</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) {
    <span class="hljs-keyword">return</span> a + b;
  }

  <span class="hljs-keyword">static</span> <span class="hljs-title function_">multiply</span>(<span class="hljs-params">a, b</span>) {
    <span class="hljs-keyword">return</span> a * b;
  }
}
</code></pre>
<h5 data-id="heading-22">5.2 æ··å…¥æ¨¡å¼ (Mixin Pattern)</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ··å…¥å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">mixin</span>(<span class="hljs-params">target, ...sources</span>) {
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(target, ...sources);
  <span class="hljs-keyword">return</span> target;
}

<span class="hljs-comment">// å¯å¤ç”¨çš„æ··å…¥å¯¹è±¡</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">CanEat</span> = {
  <span class="hljs-title function_">eat</span>(<span class="hljs-params">food</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> is eating <span class="hljs-subst">${food}</span>`</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">energy</span> += <span class="hljs-number">10</span>;
  }
};

<span class="hljs-keyword">const</span> <span class="hljs-title class_">CanSleep</span> = {
  <span class="hljs-title function_">sleep</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> is sleeping`</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">energy</span> += <span class="hljs-number">20</span>;
  }
};

<span class="hljs-keyword">const</span> <span class="hljs-title class_">CanPlay</span> = {
  <span class="hljs-title function_">play</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> is playing`</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">energy</span> -= <span class="hljs-number">5</span>;
  }
};

<span class="hljs-comment">// ä½¿ç”¨æ··å…¥</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">energy</span> = <span class="hljs-number">100</span>;
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">super</span>(name);
    <span class="hljs-title function_">mixin</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-title class_">CanEat</span>, <span class="hljs-title class_">CanSleep</span>, <span class="hljs-title class_">CanPlay</span>);
  }

  <span class="hljs-title function_">bark</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> is barking!`</span>);
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> dog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">'Rex'</span>);
dog.<span class="hljs-title function_">eat</span>(<span class="hljs-string">'bone'</span>);
dog.<span class="hljs-title function_">play</span>();
dog.<span class="hljs-title function_">sleep</span>();
dog.<span class="hljs-title function_">bark</span>();

<span class="hljs-comment">// ES6ç±»æ··å…¥</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Flyable</span> = <span class="hljs-title class_">BaseClass</span> =&gt; <span class="hljs-keyword">class</span> <span class="hljs-title class_">extends</span> <span class="hljs-title class_">BaseClass</span> {
  <span class="hljs-title function_">fly</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> is flying!`</span>);
  }
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Flyable</span>(<span class="hljs-title class_">Animal</span>) {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">super</span>(name);
  }
}

<span class="hljs-keyword">const</span> bird = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bird</span>(<span class="hljs-string">'Tweety'</span>);
bird.<span class="hljs-title function_">fly</span>();
</code></pre>
<h5 data-id="heading-23">5.3 ä¸­ä»‹è€…æ¨¡å¼ (Mediator Pattern)</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸­ä»‹è€…</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ChatRoom</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">users</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
  }

  <span class="hljs-title function_">register</span>(<span class="hljs-params">user</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">users</span>.<span class="hljs-title function_">set</span>(user.<span class="hljs-property">name</span>, user);
    user.<span class="hljs-property">chatRoom</span> = <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">send</span>(<span class="hljs-params">message, <span class="hljs-keyword">from</span>, to</span>) {
    <span class="hljs-keyword">if</span> (to) {
      <span class="hljs-comment">// ç§èŠ</span>
      <span class="hljs-keyword">const</span> receiver = <span class="hljs-variable language_">this</span>.<span class="hljs-property">users</span>.<span class="hljs-title function_">get</span>(to);
      <span class="hljs-keyword">if</span> (receiver) {
        receiver.<span class="hljs-title function_">receive</span>(message, <span class="hljs-keyword">from</span>);
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// ç¾¤èŠ</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">users</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">user</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (user.<span class="hljs-property">name</span> !== <span class="hljs-keyword">from</span>) {
          user.<span class="hljs-title function_">receive</span>(message, <span class="hljs-keyword">from</span>);
        }
      });
    }
  }
}

<span class="hljs-comment">// åŒäº‹ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">chatRoom</span> = <span class="hljs-literal">null</span>;
  }

  <span class="hljs-title function_">send</span>(<span class="hljs-params">message, to = <span class="hljs-literal">null</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">chatRoom</span>.<span class="hljs-title function_">send</span>(message, <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>, to);
  }

  <span class="hljs-title function_">receive</span>(<span class="hljs-params">message, <span class="hljs-keyword">from</span></span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">from</span>}</span> to <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>: <span class="hljs-subst">${message}</span>`</span>);
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> chatRoom = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatRoom</span>();

<span class="hljs-keyword">const</span> alice = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">'Alice'</span>);
<span class="hljs-keyword">const</span> bob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">'Bob'</span>);
<span class="hljs-keyword">const</span> charlie = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">'Charlie'</span>);

chatRoom.<span class="hljs-title function_">register</span>(alice);
chatRoom.<span class="hljs-title function_">register</span>(bob);
chatRoom.<span class="hljs-title function_">register</span>(charlie);

alice.<span class="hljs-title function_">send</span>(<span class="hljs-string">'Hello everyone!'</span>);
bob.<span class="hljs-title function_">send</span>(<span class="hljs-string">'Hi Alice!'</span>, <span class="hljs-string">'Alice'</span>);
charlie.<span class="hljs-title function_">send</span>(<span class="hljs-string">'Meeting at 3 PM'</span>, <span class="hljs-string">'Alice'</span>);
</code></pre>
<h4 data-id="heading-24">å…­ã€æ€»ç»“ä¸æœ€ä½³å®è·µ</h4>
<h5 data-id="heading-25">ä½•æ—¶ä½¿ç”¨è®¾è®¡æ¨¡å¼</h5>
<ol>
<li><strong>å•ä¾‹æ¨¡å¼:</strong> å…¨å±€é…ç½®ã€æ—¥å¿—è®°å½•å™¨ã€æ•°æ®åº“è¿æ¥æ± </li>
<li><strong>å·¥å‚æ¨¡å¼:</strong> åˆ›å»ºå¤æ‚å¯¹è±¡ã€éœ€è¦æ ¹æ®æ¡ä»¶åˆ›å»ºä¸åŒå¯¹è±¡</li>
<li><strong>è§‚å¯Ÿè€…æ¨¡å¼:</strong> äº‹ä»¶å¤„ç†ç³»ç»Ÿã€å®æ—¶æ•°æ®æ›´æ–°</li>
<li><strong>ç­–ç•¥æ¨¡å¼:</strong> å¤šç§ç®—æ³•å®ç°ã€éœ€è¦åŠ¨æ€åˆ‡æ¢è¡Œä¸º</li>
<li><strong>è£…é¥°å™¨æ¨¡å¼:</strong> åŠ¨æ€æ·»åŠ åŠŸèƒ½ã€AOPç¼–ç¨‹</li>
</ol>
<h5 data-id="heading-26">JavaScriptè®¾è®¡æ¨¡å¼ç‰¹ç‚¹</h5>
<ol>
<li><strong>çµæ´»æ€§:</strong> JavaScriptçš„åŠ¨æ€ç‰¹æ€§ä½¿å¾—æ¨¡å¼å®ç°æ›´åŠ çµæ´»</li>
<li><strong>å‡½æ•°å¼ç‰¹æ€§:</strong> å¯ä»¥åˆ©ç”¨é«˜é˜¶å‡½æ•°ã€é—­åŒ…ç­‰ç‰¹æ€§ç®€åŒ–æ¨¡å¼å®ç°</li>
<li><strong>åŸå‹ç»§æ‰¿:</strong> å……åˆ†åˆ©ç”¨åŸå‹é“¾å®ç°ç»§æ‰¿å’Œå…±äº«æ–¹æ³•</li>
<li><strong>ES6+ç‰¹æ€§:</strong> ç±»è¯­æ³•ã€Proxyã€Symbolã€è£…é¥°å™¨ç­‰å¢å¼ºäº†æ¨¡å¼è¡¨è¾¾èƒ½åŠ›</li>
</ol>
<h5 data-id="heading-27">æœ€ä½³å®è·µå»ºè®®</h5>
<ol>
<li><strong>ä¸è¦è¿‡åº¦è®¾è®¡:</strong> åªåœ¨å¿…è¦æ—¶ä½¿ç”¨è®¾è®¡æ¨¡å¼</li>
<li><strong>ä¿æŒç®€æ´:</strong> JavaScriptæœ¬èº«å°±å¾ˆçµæ´»ï¼Œé¿å…è¿‡åº¦å¤æ‚çš„æ¨¡å¼å®ç°</li>
<li><strong>ç»“åˆè¯­è¨€ç‰¹æ€§:</strong> å……åˆ†åˆ©ç”¨JavaScriptçš„å‡½æ•°å¼ç‰¹æ€§</li>
<li><strong>è€ƒè™‘æ€§èƒ½:</strong> æŸäº›æ¨¡å¼å¯èƒ½å¸¦æ¥æ€§èƒ½å¼€é”€ï¼Œåœ¨æ€§èƒ½æ•æ„Ÿåœºæ™¯è¦è°¨æ…</li>
<li><strong>å›¢é˜Ÿå…±è¯†:</strong> ç¡®ä¿å›¢é˜Ÿæˆå‘˜ç†è§£æ‰€ä½¿ç”¨çš„è®¾è®¡æ¨¡å¼</li>
</ol>
<p>è®¾è®¡æ¨¡å¼æ˜¯è§£å†³ç‰¹å®šé—®é¢˜çš„å·¥å…·ï¼Œè€Œä¸æ˜¯é“¶å¼¹ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œåº”æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ¨¡å¼ï¼Œå¹¶çµæ´»è°ƒæ•´ä»¥é€‚åº”JavaScriptçš„è¯­è¨€ç‰¹æ€§ã€‚ç†è§£æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³æ¯”æ­»è®°ç¡¬èƒŒå®ç°æ–¹å¼æ›´é‡è¦ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¢å‘ Agent çš„é«˜å¹¶å‘åˆ†æï¼šDoris vs. Snowflake vs. ClickHouse]]></title>    <link>https://juejin.cn/post/7582502441992978475</link>    <guid>https://juejin.cn/post/7582502441992978475</guid>    <pubDate>2025-12-12T03:21:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582502441992978475" data-draft-id="7582479325284909119" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¢å‘ Agent çš„é«˜å¹¶å‘åˆ†æï¼šDoris  vs. Snowflake vs. ClickHouse"/> <meta itemprop="keywords" content="æ•°æ®åº“,Agent,Apache"/> <meta itemprop="datePublished" content="2025-12-12T03:21:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SelectDB"/> <meta itemprop="url" content="https://juejin.cn/user/3189021726222904"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¢å‘ Agent çš„é«˜å¹¶å‘åˆ†æï¼šDoris  vs. Snowflake vs. ClickHouse
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3189021726222904/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SelectDB
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T03:21:39.000Z" title="Fri Dec 12 2025 03:21:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ•°æ®ä»·å€¼çš„ä¸æ–­å‡çº§ï¼Œæ˜¯è¿‡å»ä¸‰åå¹´æ¥æ•°æ®åº“æ¼”è¿›çš„æ ¸å¿ƒé©±åŠ¨åŠ›ã€‚è€Œ AI çš„å´›èµ·ï¼Œå°†è¿™ä¸€éœ€æ±‚æ¨å‘æ–°çš„é«˜åº¦ï¼šæ•°æ®ä¸ä»…è¦èƒ½è¢«â€œçœ‹â€åˆ°ï¼Œæ›´è¦èƒ½è¢«â€œç†è§£â€å’Œâ€œåˆ›é€ â€â€”â€”è¿™ä¸€ç‚¹å·²åœ¨åŸºäºå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ä¸ºæ ¸å¿ƒçš„ä»£ç ç”Ÿæˆã€æ™ºèƒ½å¯¹è¯ç­‰åº”ç”¨ä¸­å¾—ä»¥éªŒè¯ã€‚</p>
<p>è¿™ä¸€èƒŒæ™¯ä¸‹ï¼Œç”±è‡ªä¸» AI æ™ºèƒ½ä½“ï¼ˆAgentï¼‰é©±åŠ¨çš„åˆ†æå·²æˆä¸ºå…¸å‹èŒƒå¼ã€‚ æ™ºèƒ½ä½“èƒ½å¤Ÿç‹¬ç«‹æ¨ç†ã€å®æ—¶åˆ†ææ•°æ®ï¼Œç”šè‡³ä¸»åŠ¨è§¦å‘è¡ŒåŠ¨ã€‚è¿™æ„å‘³ç€åˆ†ææ¨¡å¼æ­£ä»è¢«åŠ¨æŠ¥å‘Šè½¬å‘ä¸»åŠ¨å†³ç­–ï¼Œå¤„ç†æ¨¡å¼ä¹Ÿä»ä»¥æŸ¥è¯¢ä¸ºä¸­å¿ƒè½¬å‘ä»¥è¯­ä¹‰å’Œå“åº”ä¸ºä¸­å¿ƒã€‚</p>
<p>è¿™ä¸€è½¬å˜å¯¹æ•°æ®åŸºç¡€è®¾æ–½æå‡ºå·¨å¤§æŒ‘æˆ˜ï¼šå·¥ä½œè´Ÿè½½å·²ä»â€œå°‘é‡ç”¨æˆ·ã€ç¹é‡æŸ¥è¯¢ã€æ…¢å®¹å¿åº¦â€è½¬å˜ä¸ºâ€œæµ·é‡ç”¨æˆ·ï¼ˆæ™ºèƒ½ä½“ï¼‰ã€è½»é‡çº§/è¿­ä»£æŸ¥è¯¢ã€é›¶å»¶è¿Ÿå®¹å¿åº¦â€ã€‚<strong>å¦‚æœæ•°æ®åº“ç³»ç»Ÿæ— æ³•æ»¡è¶³é«˜å¹¶å‘ä½å»¶è¿Ÿçš„æŸ¥è¯¢éœ€æ±‚ï¼Œé‚£ä¹ˆå…¶ä¸Šæ„å»ºçš„ AI æ™ºèƒ½ä½“å°±ä¼šå˜å¾—ç¼“æ…¢ã€ç¬¨æ‹™ï¼Œå°¤å…¶æ˜¯åœ¨ä¸€äº›ä¿¡æ¯æ£€ç´¢çš„é¢†åŸŸäº§ç”Ÿå¹»è§‰ï¼Œç»™äººè¯¯å¯¼æ€§çš„ç»“æœ</strong>ã€‚</p>
<p><strong>å› æ­¤ï¼Œé¢å‘æ™ºèƒ½ä½“çš„é«˜å¹¶å‘å’Œä½å»¶è¿Ÿå¤„ç†èƒ½åŠ›ï¼Œå·²ä¸å†æ˜¯å¯é€‰é¡¹ï¼Œè€Œæ˜¯å†³å®šæ•°æ®ä»“åº“èƒ½å¦æ”¯æ’‘ AI æ—¶ä»£çš„ç”Ÿå­˜åŸºçŸ³</strong>ã€‚</p>
<h2 data-id="heading-0">1. æŸ¥è¯¢ååï¼ˆQPSï¼‰å…¨é¢é¢†å…ˆ</h2>
<p>è¿›å…¥ AI æ—¶ä»£ï¼ŒApache Doris ç»§ç»­ä¿æŒæŠ€æœ¯é¢†å…ˆã€‚4.0 ç‰ˆæœ¬å®ç°äº†ä¸ AI èƒ½åŠ›çš„æ·±åº¦èåˆï¼Œå¢å¼º AI åŸç”Ÿæ”¯æŒï¼Œå¹¶åŸºäºæ··åˆæœç´¢æŠ€æœ¯ç»Ÿä¸€å¤„ç†<strong>ç»“æ„åŒ–è¿‡æ»¤ã€æ–‡æœ¬æœç´¢ã€å‘é‡è¯­ä¹‰æœç´¢</strong>ï¼Œçªç ´æ•°ä»“åŠŸèƒ½ç•Œé™ï¼Œå‡çº§ä¸ºä¼ä¸šæ ¸å¿ƒçš„â€œAI åˆ†æä¸­æ¢â€ï¼Œä¸ºæ™ºèƒ½å†³ç­–å’Œåˆ›æ–°å®è·µæä¾›ç¨³å®šã€é«˜æ•ˆçš„åº•å±‚æ•°æ®æ”¯æŒã€‚</p>
<p>ä¸å¯å¿½è§†çš„æ˜¯ï¼ŒApache Doris ä¸€ç›´ä»¥å®æ—¶æé€Ÿè‘—ç§°ï¼Œåœ¨<strong>æ€§èƒ½å’Œååé‡æ–¹é¢</strong>å‡å¤„äºé¢†å…ˆæ°´å¹³ã€‚å› æ­¤ï¼Œåœ¨ AI æ—¶ä»£ï¼Œè¿™ä¸€èƒ½åŠ›ä¾æ—§å¼ºæ‚ï¼Œèƒ½å¤Ÿé«˜æ•ˆæ”¯æŒé¢å‘ Agent åˆ†æçš„é«˜å¹¶å‘åˆ†æã€‚</p>
<p>ä¸ºäº†æ›´ç›´è§‚çš„å±•ç¤ºè¿™äº›èƒ½åŠ›ï¼Œæˆ‘ä»¬å¯¹æœ€å½“ä¸‹æµè¡Œå‡ æ¬¾æ•°æ®ç³»ç»Ÿè¿›è¡Œè¯„ä¼°ï¼Œç»“æœæ˜¾ç¤ºï¼Œç»“æœæ˜¾ç¤ºï¼ŒApache Doris åœ¨æ¯ç§è®¾ç½®ä¸‹çš„è¡¨ç°å‡ä¼˜äºå…¶ä»–ç³»ç»Ÿã€‚</p>
<h3 data-id="heading-1">1.1 åŸºç¡€é…ç½®</h3>
<p><strong>æˆ‘ä»¬å¯¹ SelectDBï¼ˆåŸºäº Apache Doris å†…æ ¸æ„å»ºçš„ç°ä»£å®æ—¶æ•°æ®ä»“åº“ï¼‰ã€Snowflake å’Œ Clickhouse Cloud è¿›è¡Œäº†æ€§èƒ½åŠååé‡çš„æ¯”è¾ƒ</strong>ã€‚è¯„æµ‹åŸºäº SSB-FLATã€SSBã€TPC-H è¿™ä¸‰ä¸ªæµ‹è¯•é›†ï¼Œå¹¶å€ŸåŠ© Apache JMeterï¼ˆä¸€æ¬¾å¼€æºè½¯ä»¶åº”ç”¨ç¨‹åºï¼Œæ—¨åœ¨å¯¹åŠŸèƒ½è¡Œä¸ºè¿›è¡Œè´Ÿè½½æµ‹è¯•å¹¶æµ‹é‡æ€§èƒ½ï¼‰è¿›è¡Œè´Ÿè½½æµ‹è¯•ã€‚<strong>å…·ä½“æµ‹è¯•æ–¹æ³•ä¸ºï¼šå¯åŠ¨ 10/30/50 ä¸ªçº¿ç¨‹å¹¶æŒ‰é¡ºåºæäº¤æŸ¥è¯¢ï¼Œæ¯ä¸ªæŸ¥è¯¢è¿è¡Œ 3 åˆ†é’Ÿï¼Œç„¶åè·å–æ¯ä¸ªæŸ¥è¯¢çš„ QPS</strong>ã€‚</p>
<p>ä¸ºç¡®ä¿æµ‹è¯•çš„å‡†ç¡®æ€§å’Œå…¬å¹³æ€§ï¼Œæˆ‘ä»¬å°½å¯èƒ½ä¿è¯é…ç½®è§„æ¨¡å’Œå®šä»·çš„ä¸€è‡´æ€§ã€‚ç”±äºå„å¹³å°å¯¹è®¡ç®—èµ„æºçš„å‘½åä¸å°½ç›¸åŒï¼Œä»¥ä¸‹æ˜¯ç›¸å…³é…ç½®çš„ç®€è¦è¯´æ˜ï¼š</p>
<ul>
<li>SelectDB å’Œ Clickhouse Cloudï¼šç”¨æˆ·å¯ä»¥æ ¹æ® CPU æ ¸å¿ƒæ•°é€‰æ‹©é¢„æœŸçš„é›†ç¾¤è§„æ¨¡ã€‚æœ¬æ¬¡è¯„ä¼° SelectDB å’Œ Clickhouse Cloud å‡é€‰æ‹©äº† 128 æ ¸é›†ç¾¤ã€‚</li>
<li>Snowflakeï¼šé›†ç¾¤æŒ‰å¤§å°ï¼ˆè¶…å°ã€å°ã€ä¸­ã€å¤§ã€è¶…å¤§ï¼‰è¡¡é‡ã€‚æœ¬æ¬¡è¯„ä¼°é€‰æ‹©è¶…å¤§ï¼ˆX-Largeï¼‰å°ºå¯¸é›†ç¾¤ï¼Œçº¦ç­‰äº 128 æ ¸é›†ç¾¤ã€‚</li>
</ul>
<h3 data-id="heading-2">1.2 æµ‹è¯•åŠç»“æœ</h3>
<p>ç»“è®ºå…ˆè¡Œï¼Œåœ¨ä¸‰ä¸ªåŸºå‡†æµ‹è¯•é›†ä¸­ï¼Œ<strong>SelectDB åœ¨ä¸åŒå¹¶è¡Œåº¦ï¼ˆ10/30/50ï¼‰ä¸‹çš„æ€§èƒ½åŠååé‡å‡ä¼˜äº SnowFlake å’Œ Clickhouse</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/55d1243d6e674b5991e473e8a99bb7ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766114499&amp;x-signature=sT7UxmNdNt4xn9ky%2Bf1A6HjfyrQ%3D" alt="1.2 æµ‹è¯•åŠç»“æœ.png" loading="lazy"/></p>
<p>å…¶ä¸­ SSB-FLAT æ˜¯ä¸€ä¸ªçº¯å®½è¡¨åŸºå‡†æµ‹è¯•ï¼Œè€Œ SSB å’Œ TPC-H åˆ™æ˜¯åŒ…å«äº†è¡¨è¿æ¥çš„å¤æ‚æŸ¥è¯¢æµ‹è¯•ã€‚</p>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼ŒClickhouse åœ¨æ‰«æå•ä¸ªå®½è¡¨æ—¶é€šå¸¸è¡¨ç°æ›´å¿«ï¼ŒSnowflake ä»¥å…¶æ›´å¥½çš„å¼¹æ€§æ‰©ç¼©å®¹èƒ½åŠ›è€Œè‘—ç§°ï¼ŒSelectDB åˆ™å…¼å…·äºŒè€…ï¼Œå¹¶ä¸”åœ¨å¤æ‚æŸ¥è¯¢å’Œå•è¡¨æŸ¥è¯¢çš„åœºæ™¯éƒ½è¿›è¡Œäº†é’ˆå¯¹æ€§çš„ä¼˜åŒ–ã€‚SelectDB å‡­å€Ÿå¼ºå¤§çš„ä¼˜åŒ–å™¨èƒ½å¤Ÿé‡å†™å¤æ‚æŸ¥è¯¢ï¼Œå‡­å€Ÿé«˜æ•ˆçš„æ‰§è¡Œå¼•æ“æ¥æ‰§è¡ŒæŸ¥è¯¢ï¼Œä»è€Œèƒ½å¤Ÿåœ¨å„ä¸ªå¹¶è¡Œåº¦çš„åŸºå‡†æµ‹è¯•ä¸­è¡¨ç°å‡ºäº†è¿œä¼˜äºå…¶ä»–ç³»ç»Ÿçš„å¹¶å‘å¤„ç†èƒ½åŠ›ã€‚</p>
<p><strong>SSB-FLAT</strong></p>
<p>SSB-FLAT æ—¨åœ¨è¡¡é‡ç³»ç»ŸæŸ¥è¯¢å•å¼ å®½è¡¨çš„èƒ½åŠ›ã€‚åœ¨è¯¥åŸºå‡†æµ‹è¯•ä¸­ï¼ŒSSB ä¸­æ‰€æœ‰è¡¨è¢«è½¬æ¢ä¸ºä¸€ä¸ªéè§„èŒƒåŒ–çš„æ‰å¹³è¡¨ï¼Œä¸”ä¸æ¶‰åŠè¿æ¥æ“ä½œã€‚</p>
<p>åœ¨ 10ã€30ã€50 ä¸‰ç§å¹¶è¡Œåº¦ä¸‹ï¼ŒSelectDB å‡å±•ç°å‡ºæ¯” Snowflake å’Œ ClickHouse æ›´é«˜çš„ QPS ï¼š</p>
<ul>
<li>ç›¸æ¯” Snowflakeï¼ŒSelectDB çš„ QPS åˆ†åˆ«è¾¾åˆ°å…¶ 6.38 å€ã€7.28 å€ã€7.39 å€ï¼›</li>
<li>ç›¸æ¯” ClickHouseï¼ŒSelectDB çš„ QPS åˆ†åˆ«è¾¾åˆ°å…¶ 6.92 å€ã€5.66 å€ã€4.76 å€ã€‚</li>
</ul>
<p>ä¸‹å›¾ç›´è§‚å±•ç¤ºäº†è¿™ä¸€æ€§èƒ½å¯¹æ¯”ç»“æœã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8fa81d6914094c0e82aa21a0d034ed2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766114499&amp;x-signature=bDARlVUbzIgtGNvgxW%2Fv9lz273Q%3D" alt="1.2 æµ‹è¯•åŠç»“æœ-1.PNG" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/66e3393129af4e0c847113b08ede041b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766114499&amp;x-signature=pJ2jQ%2FqZVVFKxghqogUXBMUzERI%3D" alt="1.2 æµ‹è¯•åŠç»“æœ-2.png" loading="lazy"/></p>
<p><strong>SSB</strong></p>
<p>ä¸“ä¸ºè¯„ä¼°æ•°æ®åº“å¯¹æ˜Ÿå‹æ¨¡å‹çš„æŸ¥è¯¢ä¼˜åŒ–èƒ½åŠ›è€Œè®¾è®¡ã€‚è¯¥åŸºå‡†ç»“æ„ç®€æ˜ï¼ŒåŒ…å«å››ä¸ªæŸ¥è¯¢é›†ã€å››ä¸ªç»´åº¦è¡¨å’Œä¸€ä¸ªç®€å•çš„æ±‡æ€»å±‚æ¬¡ã€‚åœ¨è¯¥æµ‹è¯•é›†ä¸‹ï¼š</p>
<ol>
<li>åœ¨ 10ã€30ã€50 ä¸‰ç§å¹¶å‘æ¡ä»¶ä¸‹ï¼ŒSelectDB çš„ QPS åˆ†åˆ«æ˜¯ Snowflake çš„ 6.37 å€ã€5.98 å€ã€5.17 å€ï¼Œæ€§èƒ½è¡¨ç°æ˜¾è‘—é¢†å…ˆã€‚</li>
<li>ç”±äº ClickHouse åœ¨å½“å‰æµ‹è¯•ä¸­æ— æ³•å®Œæ•´æ”¯æŒ SSB æ‰€éœ€çš„è¿æ¥æ“ä½œï¼Œæœªèƒ½äº§ç”Ÿæœ‰æ•ˆå¯æ¯”ç»“æœï¼Œå› æ­¤åœ¨å›¾ä¸­å°†å…¶ç»“æœè®¾ä¸º 0ã€‚</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6418b7dcd3224be4ac37d0d12e86053f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766114499&amp;x-signature=nOLb5%2BDk6Ujx7Jp6UqLH314g8uQ%3D" alt="1.2 æµ‹è¯•åŠç»“æœ-3.png" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2bd039b2aca44411a1bf0440282ba74d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766114499&amp;x-signature=3vGzAJ5I%2FnYAPgW%2F9NytV80jr68%3D" alt="1.2 æµ‹è¯•åŠç»“æœ-4.png" loading="lazy"/></p>
<p><strong>TPC-H</strong></p>
<p>TPC-H æ˜¯ä¸šç•Œå¹¿æ³›é‡‡ç”¨çš„å†³ç­–æ”¯æŒç³»ç»ŸåŸºå‡†æµ‹è¯•ã€‚å®ƒåŒ…å«ä¸€ç³»åˆ—é¢å‘ä¸šåŠ¡çš„å³å¸­æŸ¥è¯¢ä¸å¹¶å‘æ•°æ®æ›´æ–°ä»»åŠ¡ï¼Œå…¶æŸ¥è¯¢è¯­å¥ä¸æµ‹è¯•æ•°æ®å‡ç»è¿‡ä¸¥è°¨è®¾è®¡ï¼Œå…·å¤‡å¹¿æ³›çš„è¡Œä¸šä»£è¡¨æ€§ã€‚è¯¥åŸºå‡†æ—¨åœ¨è¯„ä¼°ç³»ç»Ÿå¤„ç†å¤§è§„æ¨¡æ•°æ®ã€æ‰§è¡Œå¤æ‚æŸ¥è¯¢å¹¶è¾…åŠ©å…³é”®ä¸šåŠ¡å†³ç­–çš„èƒ½åŠ›ã€‚</p>
<ol>
<li>åœ¨ 10ã€30ã€50 ä¸‰ç§å¹¶å‘åº¦ä¸‹ï¼ŒSelectDB çš„ QPS åˆ†åˆ«è¾¾åˆ° Snowflake çš„ 3.10 å€ã€2.16 å€ä¸ 1.71 å€ï¼ŒæŒç»­ä¿æŒæ€§èƒ½é¢†å…ˆã€‚</li>
<li>ç”±äº ClickHouse åœ¨éƒ¨åˆ† TPC-H æŸ¥è¯¢ï¼ˆå°¤å…¶æ˜¯ Q20ã€Q21ã€Q22ï¼‰ä¸­æ— æ³•å®Œå…¨æ”¯æŒæ‰€éœ€çš„è¿æ¥æ“ä½œï¼Œæœªèƒ½è·å¾—æœ‰æ•ˆçš„å¯æ¯”ç»“æœï¼Œå› æ­¤åœ¨å›¾è¡¨ä¸­å°†å…¶è®¾ä¸º 0 ã€‚</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5d87c2eccc64317affdbb68b18e1212~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766114499&amp;x-signature=V%2FCtck4%2FbijgrkOfhNPGOau46kk%3D" alt="1.2 æµ‹è¯•åŠç»“æœ-5.png" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff6595186e4c4631ade0a0f8dbd2fa62~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766114499&amp;x-signature=QJvf0aLqnqZe3AxFllyTt5ad0Os%3D" alt="1.2 æµ‹è¯•åŠç»“æœ-6.png" loading="lazy"/></p>
<p><em>å®Œæ•´æµ‹è¯•ç»“æœå¯ä» SelectDB å®˜ç½‘è·å–ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.selectdb.com%2Fblog%2F1580" target="_blank" title="https://www.selectdb.com/blog/1580" ref="nofollow noopener noreferrer">www.selectdb.com/blog/1580</a></em></p>
<h2 data-id="heading-3">2. Apache Doris ä¸ºä½•èƒ½å¤Ÿé¢†å…ˆï¼Ÿ</h2>
<p>æ‰¿æ¥å‰æ–‡åŸºå‡†æµ‹è¯•ä¸­å±•ç°å‡ºçš„å“è¶Šååæ€§èƒ½ï¼Œæ¥ä¸‹æ¥ä»‹ç»ä¸ºä½• Apache Doris åœ¨é«˜å¹¶å‘æŸ¥è¯¢ä¸Šèƒ½å…¨é¢é¢†å…ˆå…¶ä»–åŒç±»å‹äº§å“ï¼Œå…¶èƒŒåæœ‰å“ªäº›èƒ½åŠ›æˆ–æŠ€æœ¯æ”¯æŒï¼Ÿ</p>
<p>å…¶èƒ½åŠ›å¹¶éæºäºå•ä¸€ä¼˜åŒ–æ‰‹æ®µï¼Œè€Œæ˜¯é€šè¿‡å¤šå±‚ååŒâ€”â€”æ¯”å¦‚é«˜æ•ˆçš„æ•°æ®è£å‰ªã€Pipeline æ‰§è¡Œæ¨¡å¼ã€å‘é‡åŒ–æ‰§è¡Œå¼•æ“ç­‰å…±åŒæ„ç­‘äº†æ”¯æ’‘æµ·é‡è¯·æ±‚å¹¶å‘çš„æŠ€æœ¯åŸºçŸ³ã€‚ä¸‹é¢æˆ‘ä»¬å°†å¯¹å…¶ä¸­çš„å‡ é¡¹å…³é”®æŠ€æœ¯è¿›è¡ŒåŸç†è§£æã€‚</p>
<h3 data-id="heading-4">2.1 æ•°æ®è£å‰ª</h3>
<p>å¦‚ä½•é«˜æ•ˆå¤„ç†æ•°æ®æ˜¯å®æ—¶æ•°æ®ä»“åº“ä¸­çš„æ ¸å¿ƒä¸»é¢˜ä¹‹ä¸€ã€‚åœ¨ Apache Doris ä¸­ï¼Œè¿‡æ»¤æ‰ä¸å¿…è¦çš„æ•°æ®ï¼Œåªè¯»å–æœ€å°çš„æ•°æ®å­é›†ï¼Œè¿™è¢«ç§°ä¸ºâ€œæ•°æ®è£å‰ªâ€ï¼Œæ˜¯æŸ¥è¯¢åŠ é€Ÿçš„ä¸»è¦æ‰‹æ®µä¹‹ä¸€ã€‚</p>
<h4 data-id="heading-5">2.1.1 è°“è¯è¿‡æ»¤</h4>
<p>åœ¨ Apache Doris ä¸­ï¼Œå°±ç”Ÿæˆè¿‡æ»¤å™¨çš„æ—¶é—´è€Œè¨€ï¼Œå¯å°†å…¶åˆ†ä¸ºä¸¤ç±»ï¼šé™æ€è¿‡æ»¤å™¨å’ŒåŠ¨æ€è¿‡æ»¤å™¨ã€‚</p>
<ul>
<li>æˆ‘ä»¬å°†æŸ¥è¯¢æ‰§è¡Œå‰ç”Ÿæˆçš„è¿‡æ»¤å™¨ç§°ä¸º<strong>é™æ€è¿‡æ»¤å™¨</strong>ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ç”¨æˆ·è¦æŸ¥è¯¢æ‰€æœ‰ä»·æ ¼å¤§äº 10 çš„é¥®æ–™ï¼Œ<code>&gt; 10</code> è¿™ä¸€è°“è¯è¿‡æ»¤å™¨å°±å¯åœ¨ SQL è§£æé˜¶æ®µæ¨å¯¼å‡ºæ¥ã€‚</li>
<li>å¯¹äºåŒ…å«å†…ç­‰å€¼è¿æ¥çš„æŸ¥è¯¢ï¼Œåªæœ‰æ¢æµ‹ä¾§ä¸æ„å»ºä¾§åŒ¹é…çš„è¡Œæ‰åº”è¯¥è¢«è¯»å–ã€‚å› æ­¤ï¼Œè¿™äº›è¿‡æ»¤å™¨åªèƒ½åœ¨æ„å»ºå“ˆå¸Œè¡¨ä¹‹åç”Ÿæˆï¼Œç§°ä¸º<strong>åŠ¨æ€è¿‡æ»¤å™¨</strong>ã€‚</li>
</ul>
<p>ç°åœ¨æˆ‘ä»¬æ¢è®¨ Apache Doris ä¸­çš„é™æ€è¿‡æ»¤å™¨â€”â€”è°“è¯è¿‡æ»¤ã€‚å¯¹äºä¸€å¼ æ™®é€šçš„è¡¨ï¼Œå…¶åˆ—å¯åˆ†ä¸ºåˆ†åŒºåˆ—ã€é”®åˆ—å’Œå€¼åˆ—ä¸‰ç§ç±»å‹ã€‚é’ˆå¯¹ä¸åŒç±»å‹çš„åˆ—ï¼Œè¿‡æ»¤æ–¹å¼ä¹Ÿå„ä¸ç›¸åŒï¼š</p>
<ol>
<li><strong>å¯¹äºåˆ†åŒºåˆ—çš„è°“è¯</strong>ï¼š FE å¯ç›´æ¥æ ¹æ®å…ƒæ•°æ®åˆ¤æ–­éœ€è¦è®¿é—®å“ªäº›åˆ†åŒºï¼Œä»è€Œç›´æ¥åœ¨åˆ†åŒºçº§åˆ«è¿›è¡Œæ•°æ®è£å‰ªï¼Œè¿™æ˜¯æœ€é«˜æ•ˆçš„æ•°æ®è£å‰ªæ–¹å¼ã€‚</li>
<li><strong>å…³äºé”®ï¼ˆKeyï¼‰åˆ—çš„è°“è¯</strong>ï¼šç”±äºæ•°æ®åœ¨æ®µå†…æ˜¯æŒ‰é”®åˆ—é¡ºåºç»„ç»‡çš„ï¼Œåªéœ€æ ¹æ®è°“è¯æ¡ä»¶ç”Ÿæˆé”®åˆ—çš„ä¸Šä¸‹è¾¹ç•Œï¼Œå†é€šè¿‡äºŒåˆ†æŸ¥æ‰¾å³å¯å®šä½éœ€è¦è¯»å–çš„æ•°æ®è¡ŒèŒƒå›´ã€‚</li>
<li><strong>å…³äºæ™®é€šåˆ—çš„è°“è¯</strong>ï¼šæ¯ä¸ªåˆ—æ•°æ®æ–‡ä»¶éƒ½ä¼šç»´æŠ¤åŒ…å«æœ€å¤§å€¼/æœ€å°å€¼çš„å…ƒæ•°æ®ï¼Œå› æ­¤å¯ä»¥é€šè¿‡æ¯”è¾ƒè°“è¯æ¡ä»¶å’Œå…ƒæ•°æ®æ¥è¿‡æ»¤åˆ—æ–‡ä»¶ã€‚ç„¶åè¯»å–å‰©ä½™åˆ—æ–‡ä»¶å¹¶æ‰§è¡Œè°“è¯è®¡ç®—ï¼Œè¿‡æ»¤æ‰æ‰€æœ‰ä¸åŒ¹é…è°“è¯çš„è¡Œã€‚</li>
</ol>
<p>å®Œæˆè°“è¯è¿‡æ»¤åï¼Œç³»ç»Ÿè·å¾—æ‰€æœ‰åŒ¹é…æŸ¥è¯¢æ¡ä»¶çš„è¡Œç´¢å¼•ã€‚éšåï¼Œåªéœ€æŒ‰è¡Œç´¢å¼•åŠ è½½å¯¹åº”çš„æ•°æ®è¡Œå³å¯ã€‚</p>
<h4 data-id="heading-6">2.1.2 LIMIT è£å‰ª</h4>
<p>å¦ä¸€ç§æ•°æ®è£å‰ªçš„æ–¹æ³•æ˜¯ LIMIT è£å‰ªã€‚åœ¨æŸ¥è¯¢æ—¶é™å®šè¿”å›è¡Œæ•°æ˜¯å¸¸è§ä½¿ç”¨æ–¹å¼ï¼Œå…·ä½“æ¥è¯´ï¼šç”±äºé™åˆ¶æ¡ä»¶ä¼šè¢«ä¸‹æ¨è‡³æŸ¥è¯¢æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¸€æ—¦æ»¡è¶³è¯¥è¡Œæ•°é™åˆ¶ï¼ŒæŸ¥è¯¢å³å¯æå‰ç»ˆæ­¢ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8947ba58a2004cd19ac3474fecdb6b02~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766114499&amp;x-signature=7KgUviFEiaySM2UmB1EyFEN5Kqc%3D" alt="2.1.2 LIMIT è£å‰ª.png" loading="lazy"/></p>
<h4 data-id="heading-7">2.1.3 TopK è£å‰ª</h4>
<p>TopK æŸ¥è¯¢åœ¨ BI æŸ¥è¯¢ä¸­å¹¿æ³›ä½¿ç”¨ã€‚ç®€å•æ¥è¯´ï¼ŒTopK æŸ¥è¯¢æ˜¯æŒ‡æ ¹æ®æŸäº›åˆ—çš„é¡ºåºæ£€ç´¢å‰ K ä¸ªç»“æœï¼Œä¸ LIMIT è£å‰ªç±»ä¼¼ã€‚ä½†å¦‚æœä½¿ç”¨æœ€åŸºæœ¬çš„æ–¹æ³•å¯¹æ•°æ®è¿›è¡Œå…¨æ’åºï¼Œç„¶åå–å‰ K ä¸ªç»“æœï¼Œæ‰«ææ•°æ®æ‰€å¸¦æ¥çš„å¼€é”€éå¸¸å¤§ã€‚<strong>å› æ­¤ï¼Œåœ¨ Apache Doris ä¸­ï¼ŒTopK é€šå¸¸é€šè¿‡å †æ’åºæ–¹æ³•å®ç°</strong>ã€‚</p>
<p><strong>A. æ ‡å‡†å †æ’åºæ–¹æ³•</strong></p>
<p>å¤„ç† TopK æŸ¥è¯¢çš„ç›´è§‚æ–¹æ³•æ˜¯æ ‡å‡†å †æ’åºæ–¹æ³•ã€‚æ ¸å¿ƒæ˜¯ç»´æŠ¤ä¸€ä¸ªæœ€å°å †ä»¥å®ç°é™åºæ’åºã€‚å½“æ–°æ•°æ®å…¥å †æ—¶ï¼Œä¼šå³æ—¶æ›´æ–°å †å†…å®¹ã€‚æ­¤è¿‡ç¨‹ä¸­ï¼Œä¸åœ¨å †æ’åºèŒƒå›´ä¸­çš„æ•°æ®å°†è¢«ä¸¢å¼ƒï¼Œè¿™æ„å‘³ç€æ— éœ€ç»´æŠ¤ä¸å¿…è¦çš„æ•°æ®ã€‚æ‰«æå®Œæˆåï¼Œå †ä¸­ç°æœ‰æ•°æ®ä¾¿æ˜¯æˆ‘ä»¬æ‰€éœ€çš„å…¨éƒ¨ç»“æœã€‚</p>
<p><strong>B. ç†è®ºæœ€ä¼˜è§£</strong></p>
<p>å †æ’åºçš„ç†è®ºæœ€ä¼˜è§£æŒ‡é€šè¿‡æ‰«ææ•°æ®è·å–æ­£ç¡®ç»“æœæ‰€éœ€çš„æœ€å°æ•°æ®é‡ã€‚åœ¨ Doris ä¸­ï¼Œæ•°æ®åœ¨æ®µå†…æŒ‰é”®åˆ—é¡ºåºå­˜å‚¨ã€‚å› æ­¤ï¼Œå½“ TopK æŸ¥è¯¢çš„ç»“æœæŒ‰é”®åˆ—æ’åºæ—¶ï¼Œæˆ‘ä»¬åªéœ€è¯»å–æ¯ä¸ªæ®µçš„å‰ K è¡Œï¼Œç„¶åè¿›è¡Œå½’å¹¶æ’åºå³å¯å¾—åˆ°æœ€ç»ˆç»“æœã€‚å¦‚æœæ’åºç»“æœåŸºäºæ™®é€šåˆ—ï¼Œç†è®ºæœ€ä¼˜çš„æ–¹æ³•åº”æ˜¯è¯»å–æ¯ä¸ªæ®µçš„æ’åºæ•°æ®è¿›è¡Œæ’åºï¼Œå¹¶æ ¹æ®æ’åºç»“æœæ£€ç´¢ç›¸åº”çš„æ•°æ®è¡Œï¼Œè€Œæ— éœ€è¯»å–æ‰€æœ‰æ•°æ®è¿›è¡Œæ’åºã€‚</p>
<p><strong>é‚£ä¹ˆåœ¨å †æ’åºè¿‡ç¨‹ä¸­ï¼Œå¦‚æœèƒ½å¤Ÿåº”ç”¨ä¸€äº›ç‰¹æ®Šçš„ä¼˜åŒ–æ–¹æ³•ï¼Œåªæ‰«ææ»¡è¶³æŸ¥è¯¢æ¡ä»¶çš„æ•°æ®ï¼ŒæŸ¥è¯¢æ‰§è¡Œçš„æ•ˆç‡å°†å¾—åˆ°æå¤§æå‡ã€‚å› æ­¤ï¼ŒDoris é’ˆå¯¹ TopK æŸ¥è¯¢ï¼Œä¸»è¦è¿›è¡Œäº†ä»¥ä¸‹ä¼˜åŒ–</strong>ï¼š</p>
<p>é¦–å…ˆï¼Œåœ¨æ•°æ®æ‰«æçº¿ç¨‹ä¸­ï¼Œå…ˆå¯¹æ•°æ®å±€éƒ¨æˆªæ–­ï¼Œç„¶åé€šè¿‡å…¨å±€åè°ƒå™¨å¯¹æ•°æ®è¿›è¡Œæœ€ç»ˆæ’åºï¼Œå¹¶æ ¹æ®æ’åºç»“æœè¿›è¡Œå…¨å±€æˆªæ–­ã€‚å› æ­¤ï¼ŒDoris çš„ TopK æŸ¥è¯¢æ‰§è¡Œè¿‡ç¨‹å®é™…ä¸Šåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š</p>
<ul>
<li>ç¬¬ä¸€é˜¶æ®µï¼ŒæŒ‰ç…§ä¸Šè¿°æ–¹æ¡ˆè¯»å–æ’åºåˆ—ï¼Œæ‰§è¡Œå±€éƒ¨æ’åºå’Œå…¨å±€æ’åºï¼Œå¾—åˆ°ç¬¦åˆæ¡ä»¶çš„æ•°æ®çš„è¡Œå·ã€‚</li>
<li>ç¬¬äºŒé˜¶æ®µï¼Œæ ¹æ®ç¬¬ä¸€é˜¶æ®µå¾—åˆ°çš„è¡Œå·ï¼Œè¯»å–é™¤æ’åºåˆ—ä¹‹å¤–çš„æ‰€éœ€åˆ—ï¼Œä»è€Œå¾—åˆ°æœ€ç»ˆè¾“å‡ºç»“æœã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01cae90103604bf28f43cba8848a5489~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766114499&amp;x-signature=S9qMNU67PpLuNHTDcklY%2Fy158f4%3D" alt="2.1.3 TopK è£å‰ª.png" loading="lazy"/></p>
<h4 data-id="heading-8">2.1.4 JOIN è£å‰ª</h4>
<p>JOIN æ˜¯æ•°æ®åº“ç³»ç»Ÿä¸­æœ€è€—æ—¶çš„æ“ä½œï¼Œæ•°æ®é‡è¶Šå°‘ï¼ŒJOIN çš„å¼€é”€å°±è¶Šä½ã€‚è‹¥æš´åŠ›æ‰§è¡Œ JOINï¼Œå³è®¡ç®—ç¬›å¡å°”ç§¯ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º Oï¼ˆM*Nï¼‰ï¼Œå…¶ä¸­ M å’Œ N åˆ†åˆ«ä¸ºä¸¤ä¸ªè¡¨çš„å¤§å°ã€‚å› æ­¤ï¼Œæˆ‘ä»¬é€šå¸¸é€‰æ‹© Hash Join ä½œä¸ºæ›´é«˜æ•ˆçš„è¿æ¥æ–¹æ³•ã€‚</p>
<p>åœ¨ Hash Join ä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©è¾ƒå°çš„æ•°æ®è¡¨ä½œä¸ºæ„å»ºç«¯ï¼ŒåŸºäºå…¶æ•°æ®æ„å»ºå“ˆå¸Œè¡¨ï¼Œç„¶åç”¨å¦ä¸€ä¾§çš„è¡¨ä½œä¸ºæ¢æµ‹ç«¯æ¥æŸ¥æ‰¾å“ˆå¸Œè¡¨ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œè‹¥å¿½ç•¥å†…å­˜è®¿é—®çš„å½±å“ï¼Œæ„å»ºå’Œæ¢æµ‹å•è¡Œçš„å¤æ‚åº¦ä¸º Oï¼ˆ1ï¼‰ï¼Œæ•´ä¸ªå“ˆå¸Œè¿æ¥çš„å¤æ‚åº¦ä¸º Oï¼ˆM + Nï¼‰ã€‚ç”±äºæ¢æµ‹ç«¯çš„æ•°æ®é€šå¸¸è¾ƒå¤§ï¼Œå‡å°‘æ¢æµ‹ç«¯æ•°æ®çš„è¯»å–å’Œè®¡ç®—æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚</p>
<p>Apache Doris æ”¯æŒ JOIN è£å‰ªï¼Œèƒ½å¤Ÿå¯¹æ¢æµ‹ä¾§æ•°æ®è¿›è¡Œæœ‰æ•ˆè£å‰ªã€‚ç”±äºå“ˆå¸Œè¡¨ä¸­æ„å»ºä¾§æ•°æ®çš„å€¼æ˜¯ç¡®å®šçš„ï¼Œå¯ä»¥æ ¹æ®æ•°æ®é‡çš„å¤§å°é€‰æ‹©åˆé€‚çš„ JOIN è£å‰ªæ–¹å¼ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/feb9a160d7e340d0928786303efa3424~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766114499&amp;x-signature=qwFpOcMBciC950KeHOPSpcrRfx0%3D" alt="2.1.4 JOIN è£å‰ª.png" loading="lazy"/></p>
<h3 data-id="heading-9">2.2 Pipeline æ‰§è¡Œå¼•æ“</h3>
<p>Apache Doris Pipeline æ‰§è¡Œå¼•æ“çš„è®¾è®¡ç›®æ ‡æ˜¯èƒ½å¤Ÿåœ¨æŸ¥è¯¢æ‰§è¡Œé‡åˆ°é˜»å¡ç®—å­ï¼ˆä¾‹å¦‚ï¼ŒJoin å’Œ Shuffle ç®—å­ä¸­çš„ç£ç›˜ IOã€ç½‘ç»œ IOï¼‰æ—¶åœ¨ç”¨æˆ·æ€ä¸»åŠ¨å‡ºè®© CPUã€‚è¿™äº›é˜»å¡ç®—å­è¢«ç§°ä¸º Pipeline Breakerã€‚<strong>å› æ­¤ï¼Œæ¯ä¸ªæ‰§è¡Œçº¿ç¨‹å¯ä»¥ä¸“æ³¨äºè®¡ç®—å¯†é›†å‹ä»»åŠ¡ï¼Œå°½é‡å‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€</strong>ã€‚åŒæ—¶ï¼Œ Pipeline Breaker çš„å­˜åœ¨ä½¿å¾—æ•°æ®èƒ½å¤Ÿå‡åŒ€é‡æ–°åˆ†å¸ƒï¼Œæ¯æ¡ Pipeline å¯ä»¥ç‹¬ç«‹è®¾ç½®å¹¶è¡Œåº¦ã€‚ä¾‹å¦‚ï¼Œåœ¨å•çº¿ç¨‹æƒ…å†µä¸‹ï¼Œä»ä¸¤ä¸ªåˆ†ç‰‡åŠ è½½æ•°æ®çš„æ‰«æç®—å­å¯ä»¥å°†æ•°æ®åˆ†å‘åˆ°æ‰€æœ‰å…·æœ‰ N å¹¶è¡Œåº¦çš„ä¸‹æ¸¸ç®—å­ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3fde2c44d72e476e94ddeef9636dd74a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766114499&amp;x-signature=NhgmRHLef631GMftMH3pxtcYDlw%3D" alt="2.2 Pipeline æ‰§è¡Œå¼•æ“.png" loading="lazy"/></p>
<p>é€šè¿‡ Pipeline æ‰§è¡Œå¼•æ“ï¼Œç”¨æˆ·å¯ä»¥æ›´é«˜æ•ˆåœ°å¤„ç†æ•°æ®ï¼Œå…·ä½“æ”¶ç›ŠåŒ…æ‹¬ï¼š</p>
<ol>
<li>å¼•å…¥æœ¬åœ°äº¤æ¢ä¼˜åŒ–ï¼Œå……åˆ†åˆ©ç”¨ CPU èµ„æºï¼Œå®ç°æ•°æ®å‡åŒ€åˆ†å¸ƒï¼Œæœ€å¤§é™åº¦å‡å°‘æ•°æ®å€¾æ–œï¼ŒåŒæ—¶å¹¶è¡Œæ€§ä¸å†å—åˆ†ç‰‡æ•°é‡çš„é™åˆ¶ã€‚</li>
<li>å¤šä¸ªå¹¶å‘ä»»åŠ¡å…±äº«çŠ¶æ€ï¼Œå‡å°‘é¢å¤–çš„åˆå§‹åŒ–å¼€é”€ï¼Œå¦‚è¡¨è¾¾å¼å’Œå¸¸é‡å˜é‡ã€‚</li>
<li>æ‰€æœ‰æµæ°´çº¿ä»»åŠ¡çš„é˜»å¡æ¡ä»¶é€šè¿‡ Dependency è¿›è¡Œå°è£…ï¼Œä»»åŠ¡æ‰§è¡Œé€»è¾‘ç”±å¤–éƒ¨äº‹ä»¶ï¼ˆå¦‚ RPC å®Œæˆï¼‰è§¦å‘ï¼Œæ¶ˆé™¤é˜»å¡è½®è¯¢çº¿ç¨‹çš„å¼€é”€ã€‚</li>
<li>ç”¨æˆ·å¯è·å¾—æ›´ç›´è§‚çš„æŸ¥è¯¢ Profileã€‚</li>
</ol>
<h3 data-id="heading-10">2.3 å‘é‡åŒ–æ‰§è¡Œå¼•æ“</h3>
<p>å‘é‡åŒ–æŸ¥è¯¢æ‰§è¡Œæ˜¯æŒ‡é€šè¿‡æ‰¹é‡å¤„ç†æ•°æ®è€Œéé€è¡Œå¤„ç†æ¥æå‡æŸ¥è¯¢æ€§èƒ½çš„æ–¹æ³•ã€‚è¯¥æ–¹æ³•å……åˆ†åˆ©ç”¨ç°ä»£ CPU æ¶æ„çš„ä¼˜åŠ¿ï¼Œå€ŸåŠ©å•æŒ‡ä»¤å¤šæ•°æ®æµï¼ˆSIMDï¼‰æ“ä½œå’Œå¾ªç¯å±•å¼€ç­‰æŠ€æœ¯ï¼Œæ˜¾è‘—æé«˜äº† CPU çš„æ•°æ®å¤„ç†æ•ˆç‡ã€‚åœ¨ Apache Doris ä¸­ï¼Œå‘é‡åŒ–æ‰§è¡Œå¼•æ“ä¸ºå®é™…åº”ç”¨åœºæ™¯å¸¦æ¥äº†æ˜¾è‘—çš„æŸ¥è¯¢æ€§èƒ½æå‡ã€‚æ•°æ®å‹ç¼©ã€å¾ªç¯è®¡ç®—ç­‰æ“ä½œä¹Ÿå› æ­¤å¾—åˆ°å¤§å¹…åŠ é€Ÿã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1add4640204b48c0a61d2c5488de46fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766114499&amp;x-signature=lVca5FwCvvjdDvR5Xb0F%2BURr5%2F8%3D" alt="2.3 å‘é‡åŒ–æ‰§è¡Œå¼•æ“.png" loading="lazy"/></p>
<h2 data-id="heading-11">ç»“è®º</h2>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æ¢è®¨äº† AI æ—¶ä»£æ•°æ®ä»“åº“çš„ç°çŠ¶ä¸å‰æ™¯ï¼Œæˆ‘ä»¬è®¤è¯†åˆ°æ•°æ®åœ¨è®­ç»ƒå’Œæ¨ç†ä¸­å‘æŒ¥ç€å…³é”®ä½œç”¨ã€‚é’ˆå¯¹è¿™ä¸€æŒ‘æˆ˜ï¼Œé¢å‘ AI æ—¶ä»£è®¾è®¡çš„ Apache Doris 4.0 ç‰ˆæœ¬åº”è¿è€Œç”Ÿï¼Œè¯¥ç‰ˆæœ¬åŸç”Ÿæ”¯æŒ MCP Serverã€å‘é‡æ£€ç´¢ã€æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰åŠ AI å‡½æ•°ç­‰åŠŸèƒ½ã€‚å¹¶åœ¨æŸ¥è¯¢å»¶è¿Ÿã€ååé‡å’Œæˆæœ¬æ•ˆç›Šæ–¹é¢å‡æ˜¾è‘—ä¼˜äºåŒç±»äº§å“ï¼Œæˆä¸º AI æ—¶ä»£ç†æƒ³çš„æ•°æ®ä»“åº“è§£å†³æ–¹æ¡ˆã€‚</p>
<p><em>å®Œæ•´æµ‹è¯•ç»“æœå¯ä» SelectDB å®˜ç½‘è·å–ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.selectdb.com%2Fblog%2F1580" target="_blank" title="https://www.selectdb.com/blog/1580" ref="nofollow noopener noreferrer">www.selectdb.com/blog/1580</a></em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ¬¡å¼¹çª—å¼‚å¸¸å¼•å‘çš„æ€è€ƒï¼šiOS present / push åº•å±‚æœºåˆ¶å…¨è§£æ]]></title>    <link>https://juejin.cn/post/7582413770091921446</link>    <guid>https://juejin.cn/post/7582413770091921446</guid>    <pubDate>2025-12-11T18:22:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582413770091921446" data-draft-id="7582413770091872294" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ¬¡å¼¹çª—å¼‚å¸¸å¼•å‘çš„æ€è€ƒï¼šiOS present / push åº•å±‚æœºåˆ¶å…¨è§£æ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-11T18:22:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‘é‡è¶…å¤šçš„å¥³ç¨‹åºåª›"/> <meta itemprop="url" content="https://juejin.cn/user/817692381560461"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ¬¡å¼¹çª—å¼‚å¸¸å¼•å‘çš„æ€è€ƒï¼šiOS present / push åº•å±‚æœºåˆ¶å…¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/817692381560461/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‘é‡è¶…å¤šçš„å¥³ç¨‹åºåª›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T18:22:57.000Z" title="Thu Dec 11 2025 18:22:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    14
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>è¿™ç¯‡æ–‡ç« ä»ä¸€ä¸ªçœŸå®çº¿ä¸Šé—®é¢˜è®²èµ·: åœ¨å¼¹çª—VC é‡Œç‚¹äº†ä¸€è¡Œcellï¼Œç»“æœç›´æ¥è·³å›äº†UITabBarControllerã€‚
å€Ÿç€æ’æŸ¥è¿™ä¸ª Bug çš„è¿‡ç¨‹ï¼Œæˆ‘ç³»ç»Ÿæ¢³ç†äº†ä¸€é iOS ä¸­ä¸å¯¼èˆªç›¸å…³çš„åº•å±‚æœºåˆ¶ï¼špresent/dismissã€push/popã€â€œè·å–é¡¶å±‚ VCï¼ˆgetTopVCï¼‰â€ã€ä»¥åŠ UITableView çš„é€‰ä¸­/å–æ¶ˆé€»è¾‘ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€ã€è§†å›¾æ§åˆ¶å™¨å±‚çº§ï¼šNavigation æ ˆ vs Modal é“¾</h2>
<h3 data-id="heading-1">1. ä¸¤å¥—å®Œå…¨ç‹¬ç«‹çš„å±‚çº§ä½“ç³»</h3>
<p><strong>Navigation æ ˆï¼ˆpush/popï¼‰</strong></p>
<ul>
<li>ç»“æ„ï¼š<code>UINavigationController.viewControllers = [VC0, VC1, VC2, ...]</code></li>
<li>è¡Œä¸ºï¼š
<ul>
<li><code>pushViewController:</code>ï¼šè¿½åŠ åˆ°æ•°ç»„å°¾éƒ¨</li>
<li><code>popViewControllerAnimated:</code>ï¼šä»æ•°ç»„å°¾éƒ¨ç§»é™¤</li>
</ul>
</li>
<li>åªå½±å“ <strong>å¯¼èˆªæ ˆ</strong> ä¸­çš„é¡ºåºï¼Œä¸æ”¹å˜è° <code>present</code> äº†è°ã€‚</li>
</ul>
<p><strong>Modal é“¾ï¼ˆpresent/dismissï¼‰</strong></p>
<ul>
<li>ç»“æ„ï¼šç”± <code>presentingViewController</code> / <code>presentedViewController</code> ä¸²è”æˆä¸€æ¡é“¾ï¼š
<ul>
<li><code>A.presentedViewController = B</code></li>
<li><code>B.presentedViewController = C</code></li>
</ul>
</li>
<li>è¡Œä¸ºï¼š
<ul>
<li><code>presentViewController:</code>ï¼šåœ¨å½“å‰ VC ä¸Šæ–¹å±•ç¤ºä¸€ä¸ªæ–° VC</li>
<li><code>dismissViewControllerAnimated:</code>ï¼šä»æŸä¸ª VC å¼€å§‹ï¼ŒæŠŠå®ƒå’Œå®ƒä¸Šé¢æ‰€æœ‰é€šè¿‡å®ƒ <code>present</code> å‡ºæ¥çš„ VC ä¸€èµ·æ”¶å›</li>
</ul>
</li>
</ul>
<blockquote>
<p>è®°å¿†æ–¹å¼ï¼š</p>
<ul>
<li>push/pop æ“ä½œçš„æ˜¯ <strong>â€œæ•°ç»„â€</strong>ï¼ˆå¯¼èˆªæ ˆï¼‰</li>
<li>present/dismiss æ“ä½œçš„æ˜¯ <strong>â€œé“¾è¡¨â€</strong>ï¼ˆæ¨¡æ€é“¾ï¼‰</li>
</ul>
</blockquote>
<h3 data-id="heading-2">2. ç»„åˆå±‚çº§çš„å…¸å‹ä¾‹å­</h3>
<p>Aï¼ˆTab å†…ä¸šåŠ¡é¡µï¼‰
â””â”€ present â†’ Bï¼ˆå¼¹çª—æˆ–äºŒçº§é¡µï¼Œå¸¦å¯¼èˆªï¼‰
â””â”€ push â†’ Cï¼ˆB çš„å¯¼èˆªæ ˆé‡Œå† push å‡ºæ¥çš„ VCï¼‰- å¯¼èˆªæ ˆï¼ˆä»¥ B çš„å¯¼èˆªæ§åˆ¶å™¨ä¸ºä¾‹ï¼‰ï¼š<code>[B, C]</code></p>
<ul>
<li>æ¨¡æ€é“¾ï¼š<code>A -(present)-&gt; B</code></li>
</ul>
<p><strong>å…³é”®ç»“è®ºï¼š</strong></p>
<blockquote>
<p><strong>dismiss B â‡’ B å’Œ B æ‰¿è½½çš„é‚£æ£µ VC æ ‘ä¸€èµ·æ¶ˆå¤± â‡’ å¯¼èˆªå›åˆ° Aï¼ˆB çš„ presentingViewControllerï¼‰ã€‚</strong><br/>
UIKit ä¸æ”¯æŒ â€œåª dismiss B ä¿ç•™ Câ€ è¿™ç§ç»“æ„ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-3">äºŒã€<code>dismissViewControllerAnimated:</code> çš„çœŸå®å«ä¹‰</h2>
<p>[vc dismissViewControllerAnimated:YES completion:nil];<strong>æ ¸å¿ƒç‚¹ï¼š</strong></p>
<ol>
<li>è¿™ä¸ªè°ƒç”¨ä½œç”¨åœ¨ â€œ<code>vc</code> æ‰€åœ¨çš„æ¨¡æ€é“¾â€ ä¸Šï¼Œè€Œä¸æ˜¯å¯¼èˆªæ ˆã€‚</li>
<li>å¦‚æœ <code>vc</code> æ˜¯è¢«æŸä¸ª VC é€šè¿‡ <code>presentViewController:</code> æ¨å‡ºæ¥çš„ï¼Œé‚£ä¹ˆï¼š
<ul>
<li>ç³»ç»Ÿä¼šæ‰¾åˆ°å®ƒçš„ <code>presentingViewController</code></li>
<li>æŠŠä» <code>vc</code> èµ·åˆ°é“¾å°¾çš„æ‰€æœ‰ VC éƒ½ dismiss æ‰</li>
<li>æ˜¾ç¤ºå›åˆ° <code>presentingViewController</code></li>
</ul>
</li>
</ol>
<h3 data-id="heading-4">1. è°è°ƒç”¨ vs è°è¢« dismiss</h3>
<p>å¾ˆå¤šäººå®¹æ˜“æ··æ·†è¿™ä¸¤ç§å†™æ³•ï¼š</p>
<pre><code class="hljs language-objectivec" lang="objectivec">[<span class="hljs-keyword">self</span> dismissViewControllerAnimated:<span class="hljs-literal">YES</span> completion:<span class="hljs-literal">nil</span>];

[[<span class="hljs-keyword">self</span> getTopVC] dismissViewControllerAnimated:<span class="hljs-literal">YES</span> completion:<span class="hljs-literal">nil</span>];
</code></pre>
<p><strong>åªè¦è¿™ä¸¤ç§å†™æ³•æœ€ç»ˆä½œç”¨åˆ°çš„æ˜¯åŒä¸€ä¸ª VCï¼Œå®ƒä»¬çš„è¡Œä¸ºå®Œå…¨ä¸€è‡´ã€‚</strong></p>
<ul>
<li>å†³å®šå›åˆ°å“ªé‡Œçš„ï¼Œæ˜¯ã€Œè¢« dismiss çš„é‚£ä¸ª VC çš„ <code>presentingViewController</code>ã€ï¼Œè€Œä¸æ˜¯â€œè°æ¥è§¦å‘è¿™æ¬¡è°ƒç”¨â€ã€‚</li>
<li>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå•çº¯æŠŠ <code>self</code> æ”¹æˆ <code>[self getTopVC]</code>å¹¶ä¸èƒ½æ”¹å˜ dismiss ä¹‹åçš„è½ç‚¹ã€‚</li>
</ul>
<h3 data-id="heading-5">2. <code>presentingViewController</code> çš„ç”Ÿå‘½å‘¨æœŸ</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[parentVC presentViewController:childVC animated:YES completion:nil]</span><span class="hljs-comment">;</span>
</code></pre>
<ul>
<li>åœ¨è¿™è¡Œä»£ç æ‰§è¡Œå®Œæˆæ—¶ï¼š
<ul>
<li><code>childVC.presentingViewController = parentVC</code> è¢«æ°¸ä¹…ç¡®å®š</li>
</ul>
</li>
<li>åç»­ä¸ç®¡ä»å“ªé‡Œã€ä»€ä¹ˆæ—¶å€™è§¦å‘ï¼š
<ul>
<li>åªè¦ dismiss çš„å¯¹è±¡æ˜¯ <code>childVC</code>ï¼Œæœ€ç»ˆéƒ½ä¼šå›åˆ°åŒä¸€ä¸ª <code>parentVC</code></li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-6">ä¸‰ã€â€œé¡¶å±‚ VCâ€ å·¥å…·ï¼ˆå¦‚ <code>getTopVC</code>ï¼‰çš„æ—¶åºé—®é¢˜</h2>
<p>å¾ˆå¤šé¡¹ç›®ä¸­éƒ½ä¼šæœ‰ç±»ä¼¼å¦‚ä¸‹å·¥å…·æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-objectivec" lang="objectivec"><span class="hljs-class"><span class="hljs-keyword">@implementation</span> <span class="hljs-title">UIViewController</span>(<span class="hljs-title">Additions</span>)</span>

- (<span class="hljs-built_in">UIViewController</span>*)getTopVC {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">self</span>.presentedViewController) {
        <span class="hljs-keyword">return</span> [<span class="hljs-keyword">self</span>.presentedViewController getTopVC];
    }
    <span class="hljs-keyword">if</span> ([<span class="hljs-keyword">self</span> isKindOfClass:<span class="hljs-built_in">UITabBarController</span>.class]) {
        <span class="hljs-keyword">return</span> [[(<span class="hljs-built_in">UITabBarController</span>*)<span class="hljs-keyword">self</span> selectedViewController] getTopVC];
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ([<span class="hljs-keyword">self</span> isKindOfClass:<span class="hljs-built_in">UINavigationController</span>.class]) {
        <span class="hljs-keyword">return</span> [[(<span class="hljs-built_in">UINavigationController</span>*)<span class="hljs-keyword">self</span> visibleViewController] getTopVC];
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>;
}

<span class="hljs-keyword">@end</span>

<span class="hljs-class"><span class="hljs-keyword">@implementation</span> <span class="hljs-title">UIApplication</span> (<span class="hljs-title">Additions</span>)</span>

+ (<span class="hljs-built_in">UIViewController</span> *)getCurrentTopVC{
    <span class="hljs-built_in">UIViewController</span> *currentVC = [<span class="hljs-built_in">UIApplication</span> sharedApplication].delegate.window.rootViewController;
    <span class="hljs-keyword">return</span> [currentVC getTopVC];
}
<span class="hljs-keyword">@end</span>
</code></pre>
<p><strong>å…³é”®ï¼šè¿™ç±»å‡½æ•°å¯¹ã€Œè°ƒç”¨æ—¶æœºã€æåº¦æ•æ„Ÿã€‚</strong></p>
<h3 data-id="heading-7">æƒ…å†µ 1ï¼šåœ¨â€œå¼¹çª— VC è¿˜åœ¨å±å¹•ä¸Šâ€æ—¶è°ƒç”¨</h3>
<p>æ¯”å¦‚æŸä¸ªpresentå‡ºæ¥çš„å¼¹çª— VC è¿˜æ²¡æœ‰è¢« dismissï¼Œè¿™æ—¶è°ƒç”¨ getTopVC()ï¼Œè¿”å›çš„å°±æ˜¯è¿™ä¸ªå¼¹çª— VCã€‚</p>
<h3 data-id="heading-8">æƒ…å†µ 2ï¼šåœ¨â€œå¼¹çª— VC å·²ç»è¢« dismiss æ‰â€ä¹‹åè°ƒç”¨</h3>
<p>å½“ å¼¹çª— VC å·²ç»æ‰§è¡Œè¿‡ dismissViewControllerAnimated:ï¼Œä¸å†æ˜¾ç¤ºåœ¨å±å¹•ä¸Šï¼Œè¿™æ—¶å†è°ƒç”¨ getTopVC()ï¼Œè¿”å›çš„å°±æ˜¯å®ƒä¸‹é¢é‚£ä¸€å±‚æ§åˆ¶å™¨ï¼ˆä¾‹å¦‚åˆ—è¡¨é¡µã€TabBar ä¸‹å½“å‰é€‰ä¸­çš„å­æ§åˆ¶å™¨ï¼‰ï¼Œè€Œä¸å†æ˜¯ å¼¹çª— VC æœ¬èº«ã€‚</p>
<h3 data-id="heading-9">æƒ…å†µ3:  ä¸€ä¸ªå…¸å‹çš„ Bug æ—¶åº</h3>
<ol>
<li>å­ç±»åœ¨ cell ç‚¹å‡»æ—¶ï¼Œè°ƒäº†çˆ¶ç±»çš„ <code>didSelectRowAtIndexPath:</code></li>
<li>çˆ¶ç±»å†…éƒ¨é€»è¾‘ï¼ˆä¼ªä»£ç ï¼‰ï¼š</li>
</ol>
<pre><code class="hljs language-objectivec" lang="objectivec"> [<span class="hljs-keyword">self</span> dismissViewControllerAnimated:<span class="hljs-literal">YES</span> completion:^{
     <span class="hljs-keyword">if</span> (<span class="hljs-keyword">self</span>.didSelectedIndex) {
         <span class="hljs-keyword">self</span>.didSelectedIndex(indexPath.row);  <span class="hljs-comment">// è§¦å‘å¤–å±‚ block</span>
     }
 }];
</code></pre>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼š<strong>å…ˆ dismiss è‡ªå·±ï¼Œå†å›è°ƒå¤–å±‚ block</strong></p>
<ol start="3">
<li>å¤–å±‚ block ä¸­å†æ‰§è¡Œï¼š</li>
</ol>
<pre><code class="hljs language-objectivec" lang="objectivec"> [[<span class="hljs-built_in">UIApplication</span> getCurrentTopVC] dismissViewControllerAnimated:<span class="hljs-literal">YES</span> completion:<span class="hljs-literal">nil</span>];
</code></pre>
<p>ç”±äºè¿™æ—¶ å¼¹æ¡†VC å·²ç»è¢« dismiss æ‰ï¼Œ<code>getCurrentTopVC()</code> æ‹¿åˆ°çš„æ˜¯ <strong>ä¸‹å±‚ VC</strong>ï¼ˆä¾‹å¦‚ä¸€ä¸ªç­›é€‰é¡µæˆ– TabBarï¼‰
äºæ˜¯ç¬¬äºŒæ¬¡ dismiss æŠŠä¸‹å±‚é¡µé¢ä¹Ÿå…³æ‰äº†
4. ç”¨æˆ·çœ‹åˆ°çš„æ•ˆæœå°±æ˜¯ï¼š</p>
<blockquote>
<p>ç‚¹å‡»å¼¹çª—é‡Œçš„ä¸€ä¸ª cell â‡’ å¼¹çª—æ¶ˆå¤± â‡’ å½“å‰é¡µé¢ä¹Ÿè¢«å…³é—­ â‡’ ç›´æ¥å›åˆ°äº† TabBar</p>
</blockquote>
<p><strong>æ ¹æœ¬åŸå› ï¼š</strong><br/>
ç¬¬äºŒæ¬¡è°ƒç”¨ <code>getTopVC()</code> çš„<strong>æ—¶æœºå¤ªæ™š</strong>ï¼Œæ­¤æ—¶â€œé¡¶å±‚ VCâ€å·²ç»ä¸æ˜¯å¼¹çª—ï¼Œè€Œæ˜¯å®ƒä¸‹é¢çš„é¡µé¢ã€‚</p>
<hr/>
<h2 data-id="heading-10">å››ã€UITableView çš„é€‰ä¸­/å–æ¶ˆé€»è¾‘</h2>
<h3 data-id="heading-11">1. ç³»ç»Ÿæ¥å£çš„ä½œç”¨</h3>
<ul>
<li>
<p><code>selectRowAtIndexPath:animated:scrollPosition:</code> ä¼šï¼š</p>
<ul>
<li>æ›´æ–° tableView å†…éƒ¨çš„é€‰ä¸­çŠ¶æ€ï¼›</li>
<li>è°ƒç”¨ cell çš„ <code>setSelected:YES</code>ï¼›</li>
<li>è§¦å‘ <code>tableView:didSelectRowAtIndexPath:</code> å›è°ƒã€‚</li>
</ul>
</li>
<li>
<p><code>deselectRowAtIndexPath:animated:</code> ä¼šï¼š</p>
<ul>
<li>æ¸…é™¤é€‰ä¸­çŠ¶æ€ï¼›</li>
<li>è°ƒç”¨ cell çš„ <code>setSelected:NO</code>ï¼›</li>
<li>è§¦å‘ <code>tableView:didDeselectRowAtIndexPath:</code> å›è°ƒã€‚</li>
</ul>
</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå•é  <code>deselectRowAtIndexPath:</code>ï¼Œå°±å·²ç»éšå«æ‰§è¡Œäº†å¾ˆå¤šäº‹æƒ…ï¼Œä¸å¿…å†é¢å¤–æ‰‹å·¥å†™ <code>cell.selected = NO</code>ã€‚</p>
<h3 data-id="heading-12">2. å•é€‰åˆ—è¡¨ä¸­çš„æ¨èé¡ºåº</h3>
<p>UITableView åœ¨å•é€‰æ¨¡å¼ä¸‹ï¼Œç”¨æˆ·ç‚¹ä¸€ä¸ªæ–° row æ—¶ï¼Œç³»ç»Ÿå†…éƒ¨çš„é»˜è®¤é¡ºåºæ˜¯ï¼šå…ˆè°ƒç”¨ didDeselectRowAtIndexPath:ï¼ˆæ—§ rowï¼‰â†’ å†è°ƒç”¨ didSelectRowAtIndexPath:ï¼ˆæ–° rowï¼‰ã€‚ æ‰€ä»¥åœ¨è‡ªå®šä¹‰ cell ä¸­çš„é€‰ä¸­/å–æ¶ˆé€»è¾‘æ—¶, æ¨èé¡ºåºè°ƒç”¨è¿™2ä¸ªæ–¹æ³•</p>
<p>ä¾‹å¦‚: ä½ ç»´æŠ¤äº†ä¸€ä¸ª <code>selectedIndex</code>ï¼Œåœ¨ä»£ç ä¸­æ‰‹åŠ¨åˆ‡æ¢é€‰ä¸­è¡Œæ—¶ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">NSIndexPath *<span class="hljs-attr">oldIndexPath</span> = [NSIndexPath indexPathForRow:self.selectedIndex inSection:<span class="hljs-number">0</span>]<span class="hljs-comment">;</span>
NSIndexPath *<span class="hljs-attr">newIndexPath</span> = indexPath<span class="hljs-comment">;</span>

// 1. å…ˆå–æ¶ˆæ—§çš„
<span class="hljs-section">[tableView deselectRowAtIndexPath:oldIndexPath animated:YES]</span><span class="hljs-comment">;</span>

// 2. å†é€‰ä¸­æ–°çš„
<span class="hljs-section">[tableView selectRowAtIndexPath:newIndexPath
                       animated:YES
                 scrollPosition:UITableViewScrollPositionNone]</span><span class="hljs-comment">;è¿™æ ·èƒ½ç¡®ä¿ï¼š</span>
</code></pre>
<ul>
<li>æ—§ cell çš„ <code>setSelected:NO</code> / <code>didDeselect</code> é€»è¾‘å…ˆæ‰§è¡Œï¼›</li>
<li>æ–° cell çš„ <code>setSelected:YES</code> / <code>didSelect</code> åæ‰§è¡Œï¼›</li>
<li>å¯¹è‡ªå®šä¹‰ cellï¼ˆåœ¨ <code>setSelected:</code> é‡Œæ›´æ¢å›¾æ ‡ã€é¢œè‰²ç­‰ï¼‰å°¤ä¸ºå‹å¥½ï¼›</li>
<li>ä¸ä¼šå‡ºç°ä¸¤ä¸ª cell åŒæ—¶é«˜äº®çš„ç¬é—´çŠ¶æ€ã€‚</li>
</ul>
<h3 data-id="heading-13">3. ä½•æ—¶å¯ä»¥ä¸å†è°ƒç”¨çˆ¶ç±» <code>tableView:didDeselectRowAtIndexPath:</code></h3>
<p>å¦‚æœçˆ¶ç±»çš„ <code>tableView:didDeselectRowAtIndexPath:</code> å®ç°åªæ˜¯ï¼š</p>
<ul>
<li>
<p><code>(void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath {   UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];   [cell setSelected:NO]; }</code>,
è€Œä½ åœ¨å­ç±»é‡Œå·²ç»è°ƒç”¨äº† <code>deselectRowAtIndexPath:animated:</code>ï¼Œé‚£ä¹ˆï¼š</p>
</li>
<li>
<p>ç³»ç»Ÿå†…éƒ¨å·²ç»å¸®ä½ æ‰§è¡Œäº† <code>setSelected:NO</code>ï¼›</p>
</li>
<li>
<p>å†æ‰‹åŠ¨è°ƒç”¨çˆ¶ç±» <code>didDeselectRowAtIndexPath:</code> å±äºé‡å¤æ“ä½œï¼Œå¯ä»¥å®‰å…¨çœç•¥ã€‚</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-14">äº”ã€â€œåˆ° C åä¸èƒ½å› Bâ€ï¼šé€šè¿‡ä¿®æ”¹å¯¼èˆªæ ˆå®ç°</h2>
<p>ç”¨æˆ·éœ€æ±‚</p>
<blockquote>
<p>å½“å‰å¯¼èˆªæ ˆï¼šA -&gt; B -&gt; C</p>
<p>æœŸæœ›: åœ¨Cä¸Šç‚¹å‡»è¿”å›æ—¶ç›´æ¥å›åˆ° Aï¼Œä¸èƒ½å†å›åˆ° Bã€‚</p>
</blockquote>
<p>ä»£ç å®ç°</p>
<pre><code class="hljs language-ini" lang="ini">-- push åˆ°æ–° VCï¼Œå¹¶ä»æ ˆä¸­ç§»é™¤å½“å‰ VC
-- ä¿®æ”¹ `viewControllers` æ•°ç»„, é‡ç½®å¯¼èˆªæ ˆ
- (void)deleteCurrentVCAndPush:(UIViewController *)viewController animated:(BOOL)animated {
    UIViewController* <span class="hljs-attr">top</span> = self.topViewController<span class="hljs-comment">;</span>
    <span class="hljs-section">[self pushViewController:viewController animated:animated]</span><span class="hljs-comment">;</span>
    NSMutableArray* <span class="hljs-attr">viewControllers</span> = [self.viewControllers mutableCopy]<span class="hljs-comment">;</span>
    <span class="hljs-section">[viewControllers removeObject:top]</span><span class="hljs-comment">;</span>
    
    <span class="hljs-section">[self setViewControllers:viewControllers animated:NO]</span><span class="hljs-comment">;</span>
}
</code></pre>
<p><strong>ä¸ dismiss çš„åŒºåˆ«</strong></p>
<ul>
<li>ä¿®æ”¹å¯¼èˆªæ ˆï¼š
<ul>
<li>ä»…æ“ä½œ <code>navigationController.viewControllers</code> æ•°ç»„ï¼›</li>
<li>ä¸æ”¹å˜ modal é“¾ï¼Œ<code>presentingViewController</code> å…³ç³»ä¿æŒä¸å˜ï¼›</li>
</ul>
</li>
<li>dismiss æŸä¸ª VCï¼š
<ul>
<li>åªçœ‹ modal é“¾ï¼›</li>
<li>ä¼šå›åˆ° <code>presentingViewController</code>ï¼›</li>
<li>æ— æ³•ä»…ç§»é™¤ B è€Œè®© C ç•™åœ¨ç•Œé¢ä¸Šã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-15">å…­ã€æ•´ä½“æ€»ç»“</h2>
<ol>
<li>
<p><strong>ç†è§£ Navigation æ ˆä¸ Modal é“¾æ˜¯æ‰€æœ‰å¯¼èˆªé—®é¢˜çš„åŸºç¡€</strong>ï¼š</p>
<ul>
<li>push/pop åªæ”¹æ•°ç»„</li>
<li>present/dismiss åªæ”¹é“¾è¡¨</li>
</ul>
</li>
<li>
<p><strong><code>dismissViewControllerAnimated:</code> çš„è¿”å›ç‚¹ç”± <code>presentingViewController</code> å†³å®š</strong>ï¼š</p>
<ul>
<li>è°è°ƒç”¨ä¸é‡è¦ï¼Œè°è¢« dismiss æ‰é‡è¦ã€‚</li>
</ul>
</li>
<li>
<p><strong>â€œè·å–é¡¶å±‚ VCâ€ çš„å·¥å…·å¯¹è°ƒç”¨æ—¶æœºéå¸¸æ•æ„Ÿ</strong>ï¼š</p>
<ul>
<li>åœ¨ VC è¢« dismiss å‰åè°ƒç”¨ï¼Œè¿”å›çš„å®Œå…¨æ˜¯ä¸åŒçš„å¯¹è±¡ï¼›</li>
<li>åœ¨é”™è¯¯çš„æ—¶æœºç”¨å®ƒå†å‘èµ·ä¸€æ¬¡ dismissï¼Œå¾€å¾€ä¼šâ€œå¤šé€€ä¸€å±‚â€ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ‰‹åŠ¨æ§åˆ¶ UITableView çš„é€‰ä¸­çŠ¶æ€æ—¶ï¼Œä¼˜å…ˆä½¿ç”¨ select/deselect æ¥å£ï¼Œå¹¶ä¿æŒâ€œå…ˆå–æ¶ˆæ—§é€‰ä¸­ï¼Œå†é€‰ä¸­æ–°è¡Œâ€çš„é¡ºåº</strong>ã€‚</p>
</li>
<li>
<p><strong>â€œåˆ° C åä¸èƒ½å› Bâ€è¿™ç±»éœ€æ±‚ï¼Œæœ¬è´¨æ˜¯å¯¹å¯¼èˆªæ ˆçš„é‡å†™ï¼Œè€Œé dismiss æŸä¸ª VC</strong>ï¼š</p>
<ul>
<li>æ­£ç¡®åšæ³•æ˜¯ä¿®æ”¹ <code>viewControllers</code> æ•°ç»„ï¼Œæˆ–ä½¿ç”¨å°è£…å¥½çš„ â€œdeleteCurrentVCAndPushâ€ ç±»æ–¹æ³•ã€‚</li>
</ul>
</li>
</ol>
<p>æŒæ¡è¿™äº›åº•å±‚è§„åˆ™ï¼Œé‡åˆ°ç±»ä¼¼â€œå¼¹çª—å…³é—­é¡ºåºé”™ä¹±â€ã€â€œé¡µé¢ä¸€ç‚¹å‡»å°±è·³å›æ ¹æ§åˆ¶å™¨â€ã€â€œå¯¼èˆªä¸Šè·³è¿‡æŸä¸€å±‚â€ç­‰é—®é¢˜æ—¶ï¼Œå°±èƒ½æ›´å¿«å®šä½æ ¹å› ï¼Œè®¾è®¡å‡ºè¡Œä¸ºå¯æ§ã€æ˜“ç»´æŠ¤çš„è§£å†³æ–¹æ¡ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[iOS SwiftUI å¸ƒå±€å®¹å™¨è¯¦è§£]]></title>    <link>https://juejin.cn/post/7582510291666599987</link>    <guid>https://juejin.cn/post/7582510291666599987</guid>    <pubDate>2025-12-12T02:30:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582510291666599987" data-draft-id="7582433630471864347" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="iOS SwiftUI å¸ƒå±€å®¹å™¨è¯¦è§£"/> <meta itemprop="keywords" content="iOS"/> <meta itemprop="datePublished" content="2025-12-12T02:30:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¦‚æ­¤é£æ™¯"/> <meta itemprop="url" content="https://juejin.cn/user/342703355996926"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            iOS SwiftUI å¸ƒå±€å®¹å™¨è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/342703355996926/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¦‚æ­¤é£æ™¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T02:30:32.000Z" title="Fri Dec 12 2025 02:30:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">SwiftUI å¸ƒå±€å®¹å™¨è¯¦è§£</h2>
<p>SwiftUI æä¾›äº†å¤šç§å¸ƒå±€å®¹å™¨ï¼Œæ¯ç§éƒ½æœ‰ç‰¹å®šçš„ç”¨é€”å’Œè¡Œä¸ºã€‚ä»¥ä¸‹æ˜¯å¯¹ä¸»è¦å¸ƒå±€å®¹å™¨çš„å…¨é¢è¯¦è§£ï¼š</p>
<h3 data-id="heading-1">ä¸€ã€åŸºç¡€å¸ƒå±€å®¹å™¨</h3>
<h4 data-id="heading-2">1. <strong>VStack</strong> - å‚ç›´å †æ ˆ</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">VStack</span>(alignment: .leading, spacing: <span class="hljs-number">10</span>) {
    <span class="hljs-type">Text</span>(<span class="hljs-string">"é¡¶éƒ¨"</span>)
    <span class="hljs-type">Text</span>(<span class="hljs-string">"ä¸­éƒ¨"</span>)
    <span class="hljs-type">Text</span>(<span class="hljs-string">"åº•éƒ¨"</span>)
}
</code></pre>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šå‚ç›´æ’åˆ—å­è§†å›¾</li>
<li><strong>å‚æ•°</strong>ï¼š
<ul>
<li><code>alignment</code>ï¼šæ°´å¹³å¯¹é½æ–¹å¼ï¼ˆ<code>.leading</code>, <code>.center</code>, <code>.trailing</code>ï¼‰</li>
<li><code>spacing</code>ï¼šå­è§†å›¾é—´è·</li>
</ul>
</li>
<li><strong>å¸ƒå±€ç‰¹æ€§</strong>ï¼šæ ¹æ®å­è§†å›¾å¤§å°å†³å®šè‡ªèº«é«˜åº¦</li>
</ul>
<h4 data-id="heading-3">2. <strong>HStack</strong> - æ°´å¹³å †æ ˆ</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">HStack</span>(alignment: .top, spacing: <span class="hljs-number">20</span>) {
    <span class="hljs-type">Text</span>(<span class="hljs-string">"å·¦"</span>)
    <span class="hljs-type">Text</span>(<span class="hljs-string">"ä¸­"</span>)
    <span class="hljs-type">Text</span>(<span class="hljs-string">"å³"</span>)
}
</code></pre>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šæ°´å¹³æ’åˆ—å­è§†å›¾</li>
<li><strong>å‚æ•°</strong>ï¼š
<ul>
<li><code>alignment</code>ï¼šå‚ç›´å¯¹é½æ–¹å¼ï¼ˆ<code>.top</code>, <code>.center</code>, <code>.bottom</code>, <code>.firstTextBaseline</code>, <code>.lastTextBaseline</code>ï¼‰</li>
<li><code>spacing</code>ï¼šå­è§†å›¾é—´è·</li>
</ul>
</li>
</ul>
<h4 data-id="heading-4">3. <strong>ZStack</strong> - é‡å å †æ ˆ</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">ZStack</span>(alignment: .topLeading) {
    <span class="hljs-type">Rectangle</span>()
        .fill(<span class="hljs-type">Color</span>.blue)
        .frame(width: <span class="hljs-number">200</span>, height: <span class="hljs-number">200</span>)
    
    <span class="hljs-type">Text</span>(<span class="hljs-string">"è¦†ç›–æ–‡æœ¬"</span>)
        .foregroundColor(.white)
}
</code></pre>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šå­è§†å›¾é‡å æ’åˆ—</li>
<li><strong>å‚æ•°</strong>ï¼š
<ul>
<li><code>alignment</code>ï¼šå¯¹é½æ–¹å¼ï¼Œæ§åˆ¶æ‰€æœ‰å­è§†å›¾çš„å…±åŒå¯¹é½ç‚¹</li>
</ul>
</li>
<li><strong>æ¸²æŸ“é¡ºåº</strong>ï¼šåæ·»åŠ çš„è§†å›¾åœ¨ä¸Šå±‚</li>
</ul>
<h3 data-id="heading-5">äºŒã€æƒ°æ€§å¸ƒå±€å®¹å™¨ï¼ˆLazy Containersï¼‰</h3>
<h4 data-id="heading-6">4. <strong>LazyVStack</strong> - æƒ°æ€§å‚ç›´å †æ ˆ</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">ScrollView</span> {
    <span class="hljs-type">LazyVStack</span>(pinnedViews: .sectionHeaders) {
        <span class="hljs-type">ForEach</span>(<span class="hljs-number">0</span><span class="hljs-operator">..&lt;</span><span class="hljs-number">1000</span>) { index <span class="hljs-keyword">in</span>
            <span class="hljs-type">Text</span>(<span class="hljs-string">"è¡Œ <span class="hljs-subst">\(index)</span>"</span>)
                .frame(height: <span class="hljs-number">50</span>)
        }
    }
}
</code></pre>
<ul>
<li><strong>ç‰¹æ€§</strong>ï¼šä»…æ¸²æŸ“å¯è§åŒºåŸŸçš„è§†å›¾ï¼Œæé«˜æ€§èƒ½</li>
<li><strong>å‚æ•°</strong>ï¼š
<ul>
<li><code>pinnedViews</code>ï¼šå›ºå®šè§†å›¾ï¼ˆ<code>.sectionHeaders</code>, <code>.sectionFooters</code>ï¼‰</li>
</ul>
</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šé•¿åˆ—è¡¨ï¼Œæ€§èƒ½æ•æ„Ÿåœºæ™¯</li>
</ul>
<h4 data-id="heading-7">5. <strong>LazyHStack</strong> - æƒ°æ€§æ°´å¹³å †æ ˆ</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">ScrollView</span>(.horizontal) {
    <span class="hljs-type">LazyHStack</span> {
        <span class="hljs-type">ForEach</span>(<span class="hljs-number">0</span><span class="hljs-operator">..&lt;</span><span class="hljs-number">100</span>) { index <span class="hljs-keyword">in</span>
            <span class="hljs-type">Text</span>(<span class="hljs-string">"åˆ— <span class="hljs-subst">\(index)</span>"</span>)
                .frame(width: <span class="hljs-number">100</span>)
        }
    }
}
</code></pre>
<h4 data-id="heading-8">6. <strong>LazyVGrid</strong> - æƒ°æ€§å‚ç›´ç½‘æ ¼</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> columns <span class="hljs-operator">=</span> [
    <span class="hljs-type">GridItem</span>(.fixed(<span class="hljs-number">100</span>)),
    <span class="hljs-type">GridItem</span>(.flexible()),
    <span class="hljs-type">GridItem</span>(.adaptive(minimum: <span class="hljs-number">50</span>))
]

<span class="hljs-type">ScrollView</span> {
    <span class="hljs-type">LazyVGrid</span>(columns: columns, spacing: <span class="hljs-number">10</span>) {
        <span class="hljs-type">ForEach</span>(<span class="hljs-number">0</span><span class="hljs-operator">..&lt;</span><span class="hljs-number">100</span>) { index <span class="hljs-keyword">in</span>
            <span class="hljs-type">Color</span>.blue
                .frame(height: <span class="hljs-number">100</span>)
                .overlay(<span class="hljs-type">Text</span>(<span class="hljs-string">"<span class="hljs-subst">\(index)</span>"</span>))
        }
    }
    .padding()
}
</code></pre>
<ul>
<li><strong>GridItemç±»å‹</strong>ï¼š
<ul>
<li><code>.fixed(CGFloat)</code>ï¼šå›ºå®šå®½åº¦</li>
<li><code>.flexible(minimum:, maximum:)</code>ï¼šçµæ´»å®½åº¦</li>
<li><code>.adaptive(minimum:, maximum:)</code>ï¼šè‡ªé€‚åº”ï¼Œå°½å¯èƒ½å¤šæ”¾ç½®</li>
</ul>
</li>
</ul>
<h4 data-id="heading-9">7. <strong>LazyHGrid</strong> - æƒ°æ€§æ°´å¹³ç½‘æ ¼</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> rows <span class="hljs-operator">=</span> [<span class="hljs-type">GridItem</span>(.fixed(<span class="hljs-number">100</span>)), <span class="hljs-type">GridItem</span>(.fixed(<span class="hljs-number">100</span>))]

<span class="hljs-type">ScrollView</span>(.horizontal) {
    <span class="hljs-type">LazyHGrid</span>(rows: rows, spacing: <span class="hljs-number">20</span>) {
        <span class="hljs-type">ForEach</span>(<span class="hljs-number">0</span><span class="hljs-operator">..&lt;</span><span class="hljs-number">50</span>) { index <span class="hljs-keyword">in</span>
            <span class="hljs-type">Color</span>.red
                .frame(width: <span class="hljs-number">100</span>)
        }
    }
}
</code></pre>
<h3 data-id="heading-10">ä¸‰ã€ç‰¹æ®Šå¸ƒå±€å®¹å™¨</h3>
<h4 data-id="heading-11">8. <strong>ScrollView</strong> - æ»šåŠ¨è§†å›¾</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">ScrollView</span>(.vertical, showsIndicators: <span class="hljs-literal">true</span>) {
    <span class="hljs-type">VStack</span> {
        <span class="hljs-type">ForEach</span>(<span class="hljs-number">0</span><span class="hljs-operator">..&lt;</span><span class="hljs-number">50</span>) { index <span class="hljs-keyword">in</span>
            <span class="hljs-type">Text</span>(<span class="hljs-string">"é¡¹ç›® <span class="hljs-subst">\(index)</span>"</span>)
                .frame(maxWidth: .infinity)
                .padding()
                .background(<span class="hljs-type">Color</span>.gray.opacity(<span class="hljs-number">0.2</span>))
        }
    }
}
</code></pre>
<ul>
<li><strong>æ»šåŠ¨æ–¹å‘</strong>ï¼š<code>.vertical</code>, <code>.horizontal</code></li>
<li><strong>å‚æ•°</strong>ï¼š
<ul>
<li><code>showsIndicators</code>ï¼šæ˜¯å¦æ˜¾ç¤ºæ»šåŠ¨æ¡</li>
</ul>
</li>
</ul>
<h4 data-id="heading-12">9. <strong>List</strong> - åˆ—è¡¨</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">List</span> {
    <span class="hljs-type">Section</span>(header: <span class="hljs-type">Text</span>(<span class="hljs-string">"ç¬¬ä¸€éƒ¨åˆ†"</span>)) {
        <span class="hljs-type">ForEach</span>(<span class="hljs-number">1</span><span class="hljs-operator">..&lt;</span><span class="hljs-number">5</span>) { index <span class="hljs-keyword">in</span>
            <span class="hljs-type">Text</span>(<span class="hljs-string">"è¡Œ <span class="hljs-subst">\(index)</span>"</span>)
        }
    }
    
    <span class="hljs-type">Section</span>(footer: <span class="hljs-type">Text</span>(<span class="hljs-string">"ç»“æŸ"</span>)) {
        <span class="hljs-type">ForEach</span>(<span class="hljs-number">5</span><span class="hljs-operator">..&lt;</span><span class="hljs-number">10</span>) { index <span class="hljs-keyword">in</span>
            <span class="hljs-type">Text</span>(<span class="hljs-string">"è¡Œ <span class="hljs-subst">\(index)</span>"</span>)
        }
    }
}
.listStyle(.insetGrouped)  <span class="hljs-comment">// å¤šç§æ ·å¼å¯é€‰</span>
</code></pre>
<ul>
<li><strong>æ ·å¼</strong>ï¼š<code>.plain</code>, <code>.grouped</code>, <code>.insetGrouped</code>, <code>.sidebar</code></li>
<li><strong>ç‰¹æ€§</strong>ï¼šè‡ªå¸¦æ»šåŠ¨ã€ä¼˜åŒ–æ€§èƒ½ã€æ”¯æŒåˆ†èŠ‚</li>
</ul>
<h4 data-id="heading-13">10. <strong>Form</strong> - è¡¨å•</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">Form</span> {
    <span class="hljs-type">Section</span>(<span class="hljs-string">"ä¸ªäººä¿¡æ¯"</span>) {
        <span class="hljs-type">TextField</span>(<span class="hljs-string">"å§“å"</span>, text: <span class="hljs-variable">$name</span>)
        <span class="hljs-type">DatePicker</span>(<span class="hljs-string">"ç”Ÿæ—¥"</span>, selection: <span class="hljs-variable">$birthday</span>)
    }
    
    <span class="hljs-type">Section</span>(<span class="hljs-string">"è®¾ç½®"</span>) {
        <span class="hljs-type">Toggle</span>(<span class="hljs-string">"é€šçŸ¥"</span>, isOn: <span class="hljs-variable">$notifications</span>)
        <span class="hljs-type">Slider</span>(value: <span class="hljs-variable">$volume</span>, in: <span class="hljs-number">0</span><span class="hljs-operator">...</span><span class="hljs-number">1</span>)
    }
}
</code></pre>
<ul>
<li><strong>ç‰¹æ€§</strong>ï¼šè‡ªåŠ¨é€‚é…å¹³å°æ ·å¼ï¼Œé€‚åˆè®¾ç½®ç•Œé¢</li>
</ul>
<h4 data-id="heading-14">11. <strong>NavigationStack</strong> (iOS 16+) - å¯¼èˆªæ ˆ</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">NavigationStack</span>(path: <span class="hljs-variable">$path</span>) {
    <span class="hljs-type">List</span> {
        <span class="hljs-type">NavigationLink</span>(<span class="hljs-string">"è¯¦æƒ…"</span>, value: <span class="hljs-string">"detail"</span>)
        <span class="hljs-type">NavigationLink</span>(<span class="hljs-string">"è®¾ç½®"</span>, value: <span class="hljs-string">"settings"</span>)
    }
    .navigationDestination(for: <span class="hljs-type">String</span>.<span class="hljs-keyword">self</span>) { value <span class="hljs-keyword">in</span>
        <span class="hljs-keyword">switch</span> value {
        <span class="hljs-keyword">case</span> <span class="hljs-string">"detail"</span>:
            <span class="hljs-type">DetailView</span>()
        <span class="hljs-keyword">case</span> <span class="hljs-string">"settings"</span>:
            <span class="hljs-type">SettingsView</span>()
        <span class="hljs-keyword">default</span>:
            <span class="hljs-type">EmptyView</span>()
        }
    }
}
</code></pre>
<h4 data-id="heading-15">12. <strong>TabView</strong> - æ ‡ç­¾è§†å›¾</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">TabView</span> {
    <span class="hljs-type">HomeView</span>()
        .tabItem {
            <span class="hljs-type">Label</span>(<span class="hljs-string">"é¦–é¡µ"</span>, systemImage: <span class="hljs-string">"house"</span>)
        }
        .tag(<span class="hljs-number">0</span>)
    
    <span class="hljs-type">ProfileView</span>()
        .tabItem {
            <span class="hljs-type">Label</span>(<span class="hljs-string">"æˆ‘çš„"</span>, systemImage: <span class="hljs-string">"person"</span>)
        }
        .tag(<span class="hljs-number">1</span>)
}
.tabViewStyle(.automatic)  <span class="hljs-comment">// æˆ– .pageï¼ˆé¡µé¢å¼ï¼‰</span>
</code></pre>
<h4 data-id="heading-16">13. <strong>Grid</strong> (iOS 16+) - ç½‘æ ¼å¸ƒå±€</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">Grid</span> {
    <span class="hljs-type">GridRow</span> {
        <span class="hljs-type">Text</span>(<span class="hljs-string">"å§“å"</span>)
        <span class="hljs-type">Text</span>(<span class="hljs-string">"å¹´é¾„"</span>)
        <span class="hljs-type">Text</span>(<span class="hljs-string">"åŸå¸‚"</span>)
    }
    .font(.headline)
    
    <span class="hljs-type">Divider</span>()
        .gridCellUnsizedAxes(.horizontal)
    
    <span class="hljs-type">GridRow</span> {
        <span class="hljs-type">Text</span>(<span class="hljs-string">"å¼ ä¸‰"</span>)
        <span class="hljs-type">Text</span>(<span class="hljs-string">"25"</span>)
        <span class="hljs-type">Text</span>(<span class="hljs-string">"åŒ—äº¬"</span>)
    }
}
</code></pre>
<h3 data-id="heading-17">å››ã€å¸ƒå±€è¾…åŠ©è§†å›¾</h3>
<h4 data-id="heading-18">14. <strong>Spacer</strong> - é—´è·å™¨</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">HStack</span> {
    <span class="hljs-type">Text</span>(<span class="hljs-string">"å·¦"</span>)
    <span class="hljs-type">Spacer</span>()  <span class="hljs-comment">// å°†å·¦å³è§†å›¾æ¨å‘ä¸¤ç«¯</span>
    <span class="hljs-type">Text</span>(<span class="hljs-string">"å³"</span>)
}

<span class="hljs-type">VStack</span> {
    <span class="hljs-type">Text</span>(<span class="hljs-string">"é¡¶éƒ¨"</span>)
    <span class="hljs-type">Spacer</span>(minLength: <span class="hljs-number">20</span>)  <span class="hljs-comment">// æœ€å°é—´è·</span>
    <span class="hljs-type">Text</span>(<span class="hljs-string">"åº•éƒ¨"</span>)
}
</code></pre>
<h4 data-id="heading-19">15. <strong>Divider</strong> - åˆ†å‰²çº¿</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">VStack</span> {
    <span class="hljs-type">Text</span>(<span class="hljs-string">"ä¸Šéƒ¨åˆ†"</span>)
    <span class="hljs-type">Divider</span>()  <span class="hljs-comment">// æ°´å¹³åˆ†å‰²çº¿</span>
    <span class="hljs-type">Text</span>(<span class="hljs-string">"ä¸‹éƒ¨åˆ†"</span>)
}
</code></pre>
<h4 data-id="heading-20">16. <strong>Group</strong> - åˆ†ç»„å®¹å™¨</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">VStack</span> {
    <span class="hljs-type">Group</span> {
        <span class="hljs-keyword">if</span> condition {
            <span class="hljs-type">Text</span>(<span class="hljs-string">"æ¡ä»¶1"</span>)
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-type">Text</span>(<span class="hljs-string">"æ¡ä»¶2"</span>)
        }
    }
    .padding()
    .background(<span class="hljs-type">Color</span>.yellow)
}
</code></pre>
<ul>
<li><strong>ä½œç”¨</strong>ï¼š
<ul>
<li>çªç ´10ä¸ªå­è§†å›¾é™åˆ¶</li>
<li>ç»Ÿä¸€åº”ç”¨ä¿®é¥°ç¬¦</li>
<li>æ¡ä»¶é€»è¾‘åˆ†ç»„</li>
</ul>
</li>
</ul>
<h4 data-id="heading-21">17. <strong>ViewBuilder</strong> - è§†å›¾æ„å»ºå™¨</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-meta">@ViewBuilder</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">createView</span>(<span class="hljs-params">showDetail</span>: <span class="hljs-type">Bool</span>) -&gt; <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
    <span class="hljs-type">Text</span>(<span class="hljs-string">"åŸºç¡€"</span>)
    <span class="hljs-keyword">if</span> showDetail {
        <span class="hljs-type">Text</span>(<span class="hljs-string">"è¯¦æƒ…"</span>)
        <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"star"</span>)
    }
}
</code></pre>
<h3 data-id="heading-22">äº”ã€è‡ªå®šä¹‰å¸ƒå±€å®¹å™¨</h3>
<h4 data-id="heading-23">18. <strong>Layout åè®®</strong> (iOS 16+)</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">MyCustomLayout</span>: <span class="hljs-title class_">Layout</span> {
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">sizeThatFits</span>(
        <span class="hljs-params">proposal</span>: <span class="hljs-type">ProposedViewSize</span>,
        <span class="hljs-params">subviews</span>: <span class="hljs-type">Subviews</span>,
        <span class="hljs-params">cache</span>: <span class="hljs-keyword">inout</span> ()
    ) -&gt; <span class="hljs-type">CGSize</span> {
        <span class="hljs-comment">// è®¡ç®—å¸ƒå±€æ‰€éœ€å¤§å°</span>
        <span class="hljs-type">CGSize</span>(width: proposal.width <span class="hljs-operator">??</span> <span class="hljs-number">300</span>, height: <span class="hljs-number">200</span>)
    }
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">placeSubviews</span>(
        <span class="hljs-params">in</span> <span class="hljs-params">bounds</span>: <span class="hljs-type">CGRect</span>,
        <span class="hljs-params">proposal</span>: <span class="hljs-type">ProposedViewSize</span>,
        <span class="hljs-params">subviews</span>: <span class="hljs-type">Subviews</span>,
        <span class="hljs-params">cache</span>: <span class="hljs-keyword">inout</span> ()
    ) {
        <span class="hljs-comment">// æ”¾ç½®å­è§†å›¾</span>
        <span class="hljs-keyword">var</span> point <span class="hljs-operator">=</span> bounds.origin
        <span class="hljs-keyword">for</span> subview <span class="hljs-keyword">in</span> subviews {
            subview.place(at: point, proposal: .unspecified)
            point.x <span class="hljs-operator">+=</span> <span class="hljs-number">100</span>
        }
    }
}
</code></pre>
<h4 data-id="heading-24">19. <strong>AnyLayout</strong> (iOS 16+)</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isVertical <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>

<span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
    <span class="hljs-keyword">let</span> layout <span class="hljs-operator">=</span> isVertical <span class="hljs-operator">?</span> <span class="hljs-type">AnyLayout</span>(<span class="hljs-type">VStackLayout</span>()) : <span class="hljs-type">AnyLayout</span>(<span class="hljs-type">HStackLayout</span>())
    
    layout {
        <span class="hljs-type">Text</span>(<span class="hljs-string">"è§†å›¾1"</span>)
        <span class="hljs-type">Text</span>(<span class="hljs-string">"è§†å›¾2"</span>)
    }
}
</code></pre>
<h3 data-id="heading-25">å…­ã€å¸ƒå±€ä¿®é¥°ç¬¦</h3>
<h4 data-id="heading-26">20. <strong>frame</strong> - å°ºå¯¸çº¦æŸ</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">Text</span>(<span class="hljs-string">"Hello"</span>)
    .frame(
        maxWidth: .infinity,  <span class="hljs-comment">// æœ€å¤§å®½åº¦</span>
        minHeight: <span class="hljs-number">50</span>,        <span class="hljs-comment">// æœ€å°é«˜åº¦</span>
        alignment: .center    <span class="hljs-comment">// å¯¹é½æ–¹å¼</span>
    )
</code></pre>
<h4 data-id="heading-27">21. <strong>padding</strong> - å†…è¾¹è·</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">Text</span>(<span class="hljs-string">"å†…å®¹"</span>)
    .padding()                    <span class="hljs-comment">// æ‰€æœ‰æ–¹å‘</span>
    .padding(.horizontal, <span class="hljs-number">10</span>)     <span class="hljs-comment">// æ°´å¹³æ–¹å‘</span>
    .padding(.top, <span class="hljs-number">20</span>)           <span class="hljs-comment">// é¡¶éƒ¨</span>
    .padding(<span class="hljs-type">EdgeInsets</span>(top: <span class="hljs-number">10</span>, leading: <span class="hljs-number">20</span>, bottom: <span class="hljs-number">10</span>, trailing: <span class="hljs-number">20</span>))
</code></pre>
<h4 data-id="heading-28">22. <strong>position &amp; offset</strong> - ä½ç½®è°ƒæ•´</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">Text</span>(<span class="hljs-string">"ç»å¯¹å®šä½"</span>)
    .position(x: <span class="hljs-number">100</span>, y: <span class="hljs-number">100</span>)  <span class="hljs-comment">// ç›¸å¯¹äºçˆ¶è§†å›¾</span>
    
<span class="hljs-type">Text</span>(<span class="hljs-string">"ç›¸å¯¹åç§»"</span>)
    .offset(x: <span class="hljs-number">10</span>, y: <span class="hljs-operator">-</span><span class="hljs-number">5</span>)      <span class="hljs-comment">// ç›¸å¯¹å½“å‰ä½ç½®</span>
</code></pre>
<h3 data-id="heading-29">ä¸ƒã€å¸ƒå±€ä¼˜å…ˆçº§</h3>
<h4 data-id="heading-30">23. <strong>å¸ƒå±€ä¼˜å…ˆçº§</strong></h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">HStack</span> {
    <span class="hljs-type">Text</span>(<span class="hljs-string">"çŸ­æ–‡æœ¬"</span>)
        .layoutPriority(<span class="hljs-number">1</span>)  <span class="hljs-comment">// é«˜ä¼˜å…ˆçº§ï¼Œå…ˆåˆ†é…ç©ºé—´</span>
    
    <span class="hljs-type">Text</span>(<span class="hljs-string">"è¿™æ˜¯ä¸€ä¸ªéå¸¸é•¿çš„æ–‡æœ¬ï¼Œå¯èƒ½ä¼šè¢«å‹ç¼©"</span>)
        .layoutPriority(<span class="hljs-number">0</span>)  <span class="hljs-comment">// ä½ä¼˜å…ˆçº§</span>
}
.frame(width: <span class="hljs-number">200</span>)
</code></pre>
<h3 data-id="heading-31">å…«ã€å¸ƒå±€é€‰æ‹©æŒ‡å—</h3>








































<table><thead><tr><th>å®¹å™¨</th><th>é€‚ç”¨åœºæ™¯</th><th>æ€§èƒ½ç‰¹ç‚¹</th></tr></thead><tbody><tr><td><strong>VStack/HStack</strong></td><td>ç®€å•å¸ƒå±€ï¼Œå­è§†å›¾æ•°é‡å°‘</td><td>ç«‹å³å¸ƒå±€æ‰€æœ‰å­è§†å›¾</td></tr><tr><td><strong>LazyVStack/LazyHStack</strong></td><td>é•¿åˆ—è¡¨ï¼Œæ»šåŠ¨è§†å›¾</td><td>æƒ°æ€§åŠ è½½ï¼Œé«˜æ€§èƒ½</td></tr><tr><td><strong>List</strong></td><td>æ•°æ®åˆ—è¡¨ï¼Œéœ€è¦äº¤äº’</td><td>é«˜åº¦ä¼˜åŒ–ï¼Œæ”¯æŒé€‰æ‹©ã€åˆ é™¤ç­‰</td></tr><tr><td><strong>Grid/LazyVGrid</strong></td><td>ç½‘æ ¼å¸ƒå±€ï¼Œç€‘å¸ƒæµ</td><td>çµæ´»çš„å¤šåˆ—å¸ƒå±€</td></tr><tr><td><strong>ZStack</strong></td><td>é‡å å¸ƒå±€ï¼Œå±‚å æ•ˆæœ</td><td>é€‚åˆè¦†ç›–ã€æµ®åŠ¨å…ƒç´ </td></tr><tr><td><strong>ScrollView</strong></td><td>è‡ªå®šä¹‰æ»šåŠ¨å†…å®¹</td><td>éœ€è¦æ‰‹åŠ¨ç®¡ç†æ€§èƒ½</td></tr></tbody></table>
<h3 data-id="heading-32">ä¹ã€æœ€ä½³å®è·µ</h3>
<ol>
<li><strong>é€‰æ‹©åˆé€‚çš„å®¹å™¨</strong>ï¼šæ ¹æ®éœ€æ±‚é€‰æ‹©æœ€åˆé€‚çš„å¸ƒå±€å®¹å™¨</li>
<li><strong>é¿å…è¿‡åº¦åµŒå¥—</strong>ï¼šç®€åŒ–å¸ƒå±€å±‚çº§ï¼Œæé«˜æ€§èƒ½</li>
<li><strong>ä½¿ç”¨æƒ°æ€§å®¹å™¨</strong>ï¼šå¤„ç†å¤§é‡æ•°æ®æ—¶ä½¿ç”¨Lazyå®¹å™¨</li>
<li><strong>åˆ©ç”¨Spacer</strong>ï¼šçµæ´»æ§åˆ¶è§†å›¾é—´è·</li>
<li><strong>ç»„åˆä½¿ç”¨</strong>ï¼šåˆç†ç»„åˆå¤šä¸ªå®¹å™¨å®ç°å¤æ‚å¸ƒå±€</li>
<li><strong>æµ‹è¯•å¤šå°ºå¯¸</strong>ï¼šåœ¨ä¸åŒè®¾å¤‡å°ºå¯¸å’Œæ–¹å‘ä¸Šæµ‹è¯•å¸ƒå±€</li>
</ol>
<p>è¿™äº›å®¹å™¨å¯ä»¥çµæ´»ç»„åˆä½¿ç”¨ï¼Œåˆ›é€ å‡ºå„ç§å¤æ‚çš„ç”¨æˆ·ç•Œé¢ã€‚æŒæ¡è¿™äº›å¸ƒå±€å®¹å™¨çš„ç‰¹æ€§å’Œé€‚ç”¨åœºæ™¯ï¼Œæ˜¯æˆä¸ºSwiftUIå¸ƒå±€ä¸“å®¶çš„å…³é”®ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AIå›¾ç‰‡ç”Ÿæˆå®æˆ˜ï¼šNode.js + OpenAI DALLÂ·E 3]]></title>    <link>https://juejin.cn/post/7566535266597715977</link>    <guid>https://juejin.cn/post/7566535266597715977</guid>    <pubDate>2025-10-29T17:11:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7566535266597715977" data-draft-id="7566471688839381019" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AIå›¾ç‰‡ç”Ÿæˆå®æˆ˜ï¼šNode.js + OpenAI DALLÂ·E 3"/> <meta itemprop="keywords" content="AIGC,OpenAI"/> <meta itemprop="datePublished" content="2025-10-29T17:11:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é—²äº‘ing"/> <meta itemprop="url" content="https://juejin.cn/user/2974655942502250"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AIå›¾ç‰‡ç”Ÿæˆå®æˆ˜ï¼šNode.js + OpenAI DALLÂ·E 3
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2974655942502250/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é—²äº‘ing
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-10-29T17:11:35.000Z" title="Wed Oct 29 2025 17:11:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-10-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">AIå›¾ç‰‡ç”Ÿæˆå®æˆ˜ï¼šNode.js + OpenAI DALLÂ·E 3</h2>
<p>AIGCç°åœ¨çœŸçš„å¤ªç«å•¦ï¼ç”Ÿæˆå¼AIæ—©ä¸æ˜¯â€œå¬ç€å‰å®³â€çš„æ¦‚å¿µï¼Œå’±ä»¬æ™®é€šäººä¹Ÿèƒ½ä¸Šæ‰‹ç©ã€‚è¿™ç¯‡å°±å¸¦ä½ ä»é›¶å¼€å§‹ï¼Œç”¨Node.jsæ­é…OpenAIå®˜æ–¹å·¥å…·å’ŒDALLÂ·E 3æ¨¡å‹ï¼Œä¸€æ­¥æ­¥æ­å‡ºå›¾ç‰‡ç”ŸæˆåŠŸèƒ½â€”â€”ä¸ç”¨æ€•å¤æ‚ï¼Œä»£ç æœ‰è¯¦ç»†æ³¨é‡Šï¼Œè¿˜ä¼šæŠŠPromptå°æŠ€å·§è®²å¾—æ˜æ˜ç™½ç™½ã€‚å…¨ç¨‹ç”¨è¶…çœå¿ƒçš„å·¥å…·é“¾ï¼Œè·Ÿç€æ•²å°±è¡Œï¼Œå¼€å‘ä½“éªŒç›´æ¥æ‹‰æ»¡~</p>
<h3 data-id="heading-1">ä¸€ã€æ ¸å¿ƒæŠ€æœ¯æ ˆä¸å·¥å…·é€‰å‹</h3>
<h4 data-id="heading-2">1. æ ¸å¿ƒä¾èµ–</h4>
<ul>
<li><strong>openai</strong>ï¼šOpenAI å®˜æ–¹ Node.js SDKï¼Œæä¾›æ ‡å‡†åŒ–çš„ API è°ƒç”¨æ–¹å¼ï¼Œæ”¯æŒ DALLÂ·E 3ã€GPT ç­‰å…¨ç³»åˆ—æ¨¡å‹ï¼›</li>
<li><strong>dotenv</strong>ï¼šç¯å¢ƒå˜é‡ç®¡ç†å·¥å…·ï¼Œå®‰å…¨å­˜å‚¨ API Key ç­‰æ•æ„Ÿä¿¡æ¯ï¼Œé¿å…ç¡¬ç¼–ç æ³„éœ²ã€‚</li>
</ul>
<h4 data-id="heading-3">2. é«˜æ•ˆå·¥å…·é“¾ï¼špnpm æ›¿ä»£ npm</h4>
<p>ä¸ºä»€ä¹ˆé€‰æ‹© pnpmï¼Ÿ</p>
<ul>
<li>æ€§èƒ½æ›´ä¼˜ï¼šå®‰è£…ä¾èµ–é€Ÿåº¦æ¯” npm å¿« 2-3 å€ï¼Œæ„å»ºæ—¶ç¼“å­˜æœºåˆ¶æ›´é«˜æ•ˆï¼›</li>
<li>èŠ‚çœç©ºé—´ï¼šé€šè¿‡ç¡¬é“¾æ¥å’Œç¬¦å·é“¾æ¥å¤ç”¨åŒ…èµ„æºï¼Œé¿å…é‡å¤å®‰è£…ï¼Œå¤§å‹é¡¹ç›®å¯èŠ‚çœ 50% ç£ç›˜ç©ºé—´ï¼›</li>
<li>å…¼å®¹æ€§å¼ºï¼šå®Œå…¨å…¼å®¹ npm/yarn çš„å‘½ä»¤å’Œ package.json æ ¼å¼ï¼Œé›¶æˆæœ¬è¿ç§»ã€‚</li>
</ul>
<h3 data-id="heading-4">äºŒã€ç¯å¢ƒæ­å»ºæ­¥éª¤</h3>
<h4 data-id="heading-5">1. åˆå§‹åŒ–é¡¹ç›®</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å…¨å±€å®‰è£… pnpmï¼ˆå·²å®‰è£…å¯è·³è¿‡ï¼‰</span>
npm install -g pnpm

<span class="hljs-comment"># 2. åˆå§‹åŒ–é¡¹ç›®ï¼Œç”Ÿæˆ package.json</span>
pnpm init -y

<span class="hljs-comment"># 3. å®‰è£…æ ¸å¿ƒä¾èµ–</span>
pnpm i dotenv openai
</code></pre>
<h4 data-id="heading-6">2. é…ç½®ç¯å¢ƒå˜é‡</h4>
<ol>
<li>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º <code>.env</code> æ–‡ä»¶ï¼Œå­˜å‚¨ OpenAI API Keyï¼š</li>
</ol>
<pre><code class="hljs language-plain" lang="plain"># .env æ–‡ä»¶å†…å®¹
OPENAI_API_KEY=ä½ çš„APIå¯†é’¥ï¼ˆä»OpenAIå®˜ç½‘æˆ–ä»£ç†å•†è·å–ï¼‰
</code></pre>
<ol start="2">
<li>æ ¸å¿ƒåŸç†ï¼šdotenv ä¼šè‡ªåŠ¨è¯»å– <code>.env</code> æ–‡ä»¶å†…å®¹ï¼Œæ·»åŠ åˆ° Node.js çš„ <code>process.env</code> å…¨å±€å¯¹è±¡ä¸­ï¼Œå®‰å…¨ä¸”ä¾¿äºç»´æŠ¤ã€‚</li>
</ol>
<h4 data-id="heading-7">3. é¡¹ç›®å…¥å£è®¾è®¡ï¼šä½¿ç”¨ mjs æ¨¡å—åŒ–æ ¼å¼</h4>
<p>åˆ›å»º <code>main.mjs</code> ä½œä¸ºé¡¹ç›®å…¥å£æ–‡ä»¶ï¼ˆ<code>.mjs</code> æ˜¯ ES6 æ¨¡å—åŒ–æ ‡å‡†æ ¼å¼ï¼Œæ”¯æŒ <code>import/export</code> è¯­æ³•ï¼Œæ— éœ€é…ç½® <code>package.json</code> çš„ <code>type: module</code>ï¼‰ã€‚</p>
<h3 data-id="heading-8">ä¸‰ã€æ ¸å¿ƒä»£ç å®ç°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¨¡å—åŒ–å¯¼å…¥ï¼šOpenAI å®˜æ–¹ SDK</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">OpenAI</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"openai"</span>;
<span class="hljs-comment">// ES6 è§£æ„å¯¼å…¥ dotenv çš„ config æ–¹æ³•</span>
<span class="hljs-keyword">import</span> { config } <span class="hljs-keyword">from</span> <span class="hljs-string">'dotenv'</span>;

<span class="hljs-comment">// åŠ è½½ .env æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡åˆ° process.env</span>
<span class="hljs-title function_">config</span>({
    <span class="hljs-attr">path</span>: <span class="hljs-string">'.env'</span> <span class="hljs-comment">// æ˜¾å¼æŒ‡å®š .env æ–‡ä»¶è·¯å¾„ï¼ˆé»˜è®¤ä¹Ÿä¼šè¯»å–æ ¹ç›®å½•ï¼Œæ˜¾å¼é…ç½®æ›´æ¸…æ™°ï¼‰</span>
});

<span class="hljs-comment">// æ‰“å°ç¯å¢ƒå˜é‡ï¼ˆéªŒè¯æ˜¯å¦åŠ è½½æˆåŠŸï¼Œå®é™…éƒ¨ç½²å¯åˆ é™¤ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç¯å¢ƒå˜é‡åŠ è½½æˆåŠŸï¼š"</span>, <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(process.<span class="hljs-property">env</span>).<span class="hljs-title function_">includes</span>(<span class="hljs-string">"OPENAI_API_KEY"</span>));

<span class="hljs-comment">// åˆå§‹åŒ– OpenAI å®¢æˆ·ç«¯</span>
<span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OpenAI</span>({
    <span class="hljs-attr">apiKey</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">OPENAI_API_KEY</span>, <span class="hljs-comment">// ä»ç¯å¢ƒå˜é‡è·å– API Key</span>
    <span class="hljs-comment">// è‡ªå®šä¹‰è¯·æ±‚åŸºç¡€åœ°å€ï¼šæ”¯æŒ OpenAI å®˜æ–¹æœåŠ¡å™¨æˆ–åˆè§„ä»£ç†å•†æœåŠ¡å™¨</span>
    <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'https://api.agicto.cn/v1'</span> <span class="hljs-comment">// ä»£ç†å•†åœ°å€ç¤ºä¾‹ï¼Œå¯æ›¿æ¢ä¸ºå®˜æ–¹åœ°å€ https://api.openai.com/v1</span>
});

<span class="hljs-comment">// å¼‚æ­¥ç®­å¤´å‡½æ•°ï¼šå¤„ç†å›¾ç‰‡ç”Ÿæˆï¼ˆè€—æ—¶æ“ä½œå¿…é¡»ç”¨ async/awaitï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">main</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// è°ƒç”¨ DALLÂ·E 3 ç”Ÿæˆå›¾ç‰‡</span>
        <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> client.<span class="hljs-property">images</span>.<span class="hljs-title function_">generate</span>({
            <span class="hljs-attr">model</span>: <span class="hljs-string">"dall-e-3"</span>, <span class="hljs-comment">// æŒ‡å®šæ¨¡å‹ï¼ˆDALLÂ·E 3 æ”¯æŒæ›´å¤æ‚çš„åœºæ™¯å’Œç»†èŠ‚ï¼‰</span>
            <span class="hljs-attr">prompt</span>: <span class="hljs-string">"A spaceship flying through the universe"</span>, <span class="hljs-comment">// æç¤ºè¯ï¼šæè¿°ç”Ÿæˆå›¾ç‰‡çš„å†…å®¹</span>
            <span class="hljs-attr">n</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">// ç”Ÿæˆå›¾ç‰‡æ•°é‡ï¼ˆ1-4ï¼ŒDALLÂ·E 3 æœ€å¤šæ”¯æŒ 4 å¼ ï¼‰</span>
            <span class="hljs-attr">size</span>: <span class="hljs-string">"1024x1024"</span> <span class="hljs-comment">// å›¾ç‰‡å°ºå¯¸ï¼ˆæ”¯æŒ 256x256ã€512x512ã€1024x1024ï¼ŒDALLÂ·E 3 è¿˜æ”¯æŒ 1792x1024 ç­‰å®½é«˜æ¯”ï¼‰</span>
        });

        <span class="hljs-comment">// è¾“å‡ºå›¾ç‰‡ URLï¼ˆå¯ç›´æ¥è®¿é—®æˆ–ä¸‹è½½ï¼‰</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å›¾ç‰‡ç”ŸæˆæˆåŠŸï¼š"</span>, response.<span class="hljs-property">data</span>[<span class="hljs-number">0</span>].<span class="hljs-property">url</span>);
    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-comment">// é”™è¯¯å¤„ç†ï¼šæ•è· API è°ƒç”¨å¼‚å¸¸ï¼ˆå¦‚å¯†é’¥é”™è¯¯ã€æç¤ºè¯è¿è§„ç­‰ï¼‰</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"å›¾ç‰‡ç”Ÿæˆå¤±è´¥ï¼š"</span>, error.<span class="hljs-property">message</span>);
    }
};

<span class="hljs-comment">// æ‰§è¡Œä¸»å‡½æ•°</span>
<span class="hljs-title function_">main</span>();
</code></pre>
<p>è¿™æ®µä»£ç çš„ä¸»è¦åŠŸèƒ½æ˜¯ä½¿ç”¨ OpenAI çš„ DALLÂ·E 3 æ¨¡å‹ç”Ÿæˆä¸€å¼ æè¿°â€œä¸€è‰˜å®‡å®™é£èˆ¹åœ¨å®‡å®™ä¸­é£è¡Œâ€çš„å›¾ç‰‡ï¼Œå¹¶æ‰“å°å‡ºè¯¥å›¾ç‰‡çš„ URLã€‚å…·ä½“è§£æï¼š</p>
<ul>
<li>ç¯å¢ƒå˜é‡åŠ è½½ï¼šé€šè¿‡ dotenv åŒ…åŠ è½½æœ¬åœ° .env æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡ï¼Œç‰¹åˆ«æ˜¯ OpenAI API å¯†é’¥ï¼ˆOPENAI_API_KEYï¼‰ã€‚</li>
<li>OpenAI å®¢æˆ·ç«¯åˆå§‹åŒ–ï¼šåˆ›å»ºä¸€ä¸ª OpenAI å®¢æˆ·ç«¯å®ä¾‹ï¼Œç”¨äºä¸ OpenAI API è¿›è¡Œäº¤äº’ã€‚è¿™é‡ŒæŒ‡å®šäº†ä»ç¯å¢ƒå˜é‡è·å– API å¯†é’¥ï¼Œå¹¶ä¸”è®¾ç½®äº†è‡ªå®šä¹‰çš„è¯·æ±‚åŸºç¡€åœ°å€ï¼ˆå¯èƒ½æ˜¯ä»£ç†æœåŠ¡å™¨åœ°å€ï¼‰ã€‚</li>
<li>å¼‚æ­¥å‡½æ•°å®šä¹‰ï¼šå®šä¹‰äº†ä¸€ä¸ªåä¸º main çš„å¼‚æ­¥å‡½æ•°ï¼Œè¯¥å‡½æ•°æ‰§è¡Œå›¾ç‰‡ç”Ÿæˆæ“ä½œï¼š
<ul>
<li>ä½¿ç”¨ DALLÂ·E 3 æ¨¡å‹æ ¹æ®ç»™å®šæç¤ºè¯ï¼ˆ"A spaceship flying through the universe"ï¼‰ç”Ÿæˆä¸€å¼ å°ºå¯¸ä¸º 1024x1024 åƒç´ çš„å›¾ç‰‡ã€‚</li>
<li>è¯·æ±‚æˆåŠŸæ—¶ï¼Œè¾“å‡ºç”Ÿæˆå›¾ç‰‡çš„ URLã€‚</li>
<li>å¦‚æœå‡ºç°é”™è¯¯ï¼ˆå¦‚ API å¯†é’¥æ— æ•ˆã€æç¤ºè¯è¿è§„ç­‰ï¼‰ï¼Œåˆ™æ•è·å¹¶æ‰“å°é”™è¯¯ä¿¡æ¯ã€‚</li>
</ul>
</li>
<li>æ‰§è¡Œä¸»å‡½æ•°ï¼šè°ƒç”¨ main() å‡½æ•°æ¥å¯åŠ¨æ•´ä¸ªæµç¨‹ã€‚</li>
</ul>
<h3 data-id="heading-9">å››ã€è¿è¡Œä»£ç ä¸ç»“æœéªŒè¯</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿è¡Œå…¥å£æ–‡ä»¶</span>
node main.mjs
</code></pre>
<h4 data-id="heading-10">é¢„æœŸè¾“å‡º</h4>
<ol>
<li>æ§åˆ¶å°æ‰“å° <code>ç¯å¢ƒå˜é‡åŠ è½½æˆåŠŸï¼štrue</code>ï¼Œè¯´æ˜ <code>.env</code> é…ç½®ç”Ÿæ•ˆï¼›</li>
<li>ç­‰å¾… 3-10 ç§’ï¼ˆè§†ç½‘ç»œå’Œæ¨¡å‹å“åº”é€Ÿåº¦ï¼‰ï¼Œè¾“å‡ºå›¾ç‰‡ URLï¼Œä¾‹å¦‚ï¼š</li>
</ol>
<pre><code class="hljs language-plain" lang="plain">å›¾ç‰‡ç”ŸæˆæˆåŠŸï¼šhttps://oaidalleapiprodscus.blob.core.windows.net/private/xxx.png
</code></pre>
<ol start="3">
<li>å¤åˆ¶ URL åˆ°æµè§ˆå™¨ï¼Œå³å¯æŸ¥çœ‹ DALLÂ·E 3 ç”Ÿæˆçš„â€œå®‡å®™é£èˆ¹ç©¿æ¢­â€å›¾ç‰‡ã€‚</li>
</ol>
<h3 data-id="heading-11">äº”ã€å…³é”®æ¦‚å¿µè§£æ</h3>
<h4 data-id="heading-12">1. Node.js ä¸­çš„è¿›ç¨‹ä¸ç¯å¢ƒå˜é‡</h4>
<ul>
<li><strong>è¿›ç¨‹ï¼ˆprocessï¼‰</strong> ï¼šNode.js ç¨‹åºè¿è¡Œæ—¶çš„ç‹¬ç«‹æ‰§è¡Œå•å…ƒï¼Œæ˜¯æ“ä½œç³»ç»Ÿåˆ†é…èµ„æºçš„æœ€å°å•ä½ï¼ˆç±»æ¯”â€œå®¶é•¿â€ï¼Œç®¡ç†ç¨‹åºçš„æ‰€æœ‰èµ„æºï¼‰ï¼›</li>
<li><strong>process.env</strong>ï¼šNode.js å†…ç½®çš„ç¯å¢ƒå˜é‡å¯¹è±¡ï¼Œå­˜å‚¨ç¨‹åºè¿è¡Œæ‰€éœ€çš„é…ç½®å‚æ•°ï¼ˆå¦‚ API Keyã€æœåŠ¡å™¨åœ°å€ï¼‰ï¼Œé€šè¿‡ dotenv å¯ä» <code>.env</code> æ–‡ä»¶åŠ¨æ€åŠ è½½ï¼›</li>
<li>åŒºåˆ«äºå‰ç«¯ï¼šå‰ç«¯æœ‰ <code>document</code> å¯¹è±¡æ“ä½œ DOMï¼Œåç«¯ Node.js åˆ™é€šè¿‡ <code>process</code> å¯¹è±¡ç®¡ç†è¿›ç¨‹å’Œç¯å¢ƒã€‚</li>
</ul>
<h4 data-id="heading-13">2. Prompt æç¤ºè¯ï¼šAI çš„â€œæŒ‡ä»¤è¯­è¨€â€</h4>
<ul>
<li>å®šä¹‰ï¼šç»™å¤§æ¨¡å‹ï¼ˆLLM/å›¾åƒæ¨¡å‹ï¼‰ä¸‹è¾¾ä»»åŠ¡çš„è‡ªç„¶è¯­è¨€æè¿°ï¼Œæ˜¯å¼€å‘è€…ä¸ AI äº¤äº’çš„æ ¸å¿ƒï¼›</li>
<li>æ ¸å¿ƒè¦æ±‚ï¼šæ¸…æ™°ã€å…·ä½“ï¼Œé¿å…æ¨¡ç³Šè¡¨è¿°ï¼ˆä¾‹å¦‚ç”Ÿæˆå›¾ç‰‡æ—¶ï¼Œâ€œçº¢è‰²çš„å°æˆ¿å­â€æ¯”â€œå¥½çœ‹çš„æˆ¿å­â€æ•ˆæœæ›´ç²¾å‡†ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-14">3. Prompt Engineering æç¤ºå·¥ç¨‹</h4>
<p>æç¤ºå·¥ç¨‹ä¸æ˜¯â€œç„å­¦â€ï¼Œè€Œæ˜¯åŸºäº AI æ¨¡å‹ç‰¹æ€§çš„â€œæŒ‡ä»¤ä¼˜åŒ–æŠ€æœ¯â€ï¼Œæ ¸å¿ƒé€»è¾‘å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>è¿­ä»£ä¼˜åŒ–</strong>ï¼šé¦–æ¬¡ç¼–å†™çš„ Prompt å¾€å¾€è¾¾ä¸åˆ°é¢„æœŸï¼Œéœ€è¦æ ¹æ® AI è¾“å‡ºè°ƒæ•´æè¿°ï¼ˆå¦‚â€œå¢åŠ å®‡å®™èƒŒæ™¯çš„æ˜Ÿäº‘å¯†åº¦â€â€œè®©é£èˆ¹æ›´å…·æœªæ¥æ„Ÿâ€ï¼‰ï¼›</li>
<li><strong>åœºæ™¯é€‚é…</strong>ï¼šä¸åŒæ¨¡å‹å¯¹ Prompt çš„æ•æ„Ÿåº¦ä¸åŒï¼ŒDALLÂ·E 3 æ›´æ“…é•¿ç†è§£ç»†èŠ‚æè¿°ï¼ˆå¦‚æè´¨ã€å…‰å½±ã€æ„å›¾ï¼‰ï¼›</li>
<li><strong>ä»·å€¼æ ¸å¿ƒ</strong>ï¼šå¤æ‚ AI é¡¹ç›®ä¸­ï¼Œä¼˜è´¨çš„ Prompt å¯å¼¥è¡¥æ¨¡å‹æ€§èƒ½çŸ­æ¿ï¼Œç”šè‡³æˆä¸ºé¡¹ç›®çš„æ ¸å¿ƒç«äº‰åŠ›ï¼ˆä¾‹å¦‚é€šè¿‡ç²¾å‡† Prompt è®© AI ç”Ÿæˆç¬¦åˆä¸šåŠ¡éœ€æ±‚çš„å›¾ç‰‡/æ–‡æœ¬ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-15">å…­ã€è¿›é˜¶ä¼˜åŒ–å»ºè®®</h3>
<ol>
<li><strong>Prompt ä¼˜åŒ–ç¤ºä¾‹</strong>ï¼šå°†åŸæç¤ºè¯ä¼˜åŒ–ä¸ºæ›´å…·ä½“çš„æè¿°ï¼Œç”Ÿæˆæ•ˆæœæ›´ç²¾å‡†ï¼š</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">prompt</span>: <span class="hljs-string">"A sleek silver spaceship flying through a colorful nebula, stars scattered around, hyperdrive engine glowing blue, photorealistic, 8K resolution"</span>
</code></pre>
<ol start="2">
<li><strong>å›¾ç‰‡ä¿å­˜åˆ°æœ¬åœ°</strong>ï¼šé€šè¿‡ <code>node-fetch</code> ä¸‹è½½ç”Ÿæˆçš„å›¾ç‰‡åˆ°æœ¬åœ°ï¼Œé¿å…é‡å¤è®¿é—® URLï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">pnpm i node-fetch
</code></pre>
<p>åœ¨ <code>main</code> å‡½æ•°ä¸­æ·»åŠ ä¸‹è½½é€»è¾‘ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> fetch <span class="hljs-keyword">from</span> <span class="hljs-string">'node-fetch'</span>;
<span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-comment">// ç”Ÿæˆå›¾ç‰‡åä¸‹è½½</span>
<span class="hljs-keyword">const</span> imageUrl = response.<span class="hljs-property">data</span>[<span class="hljs-number">0</span>].<span class="hljs-property">url</span>;
<span class="hljs-keyword">const</span> imageResponse = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(imageUrl);
<span class="hljs-keyword">const</span> imageBuffer = <span class="hljs-keyword">await</span> imageResponse.<span class="hljs-title function_">buffer</span>();
fs.<span class="hljs-title function_">writeFileSync</span>(<span class="hljs-string">'spaceship.png'</span>, imageBuffer);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å›¾ç‰‡å·²ä¿å­˜åˆ°æœ¬åœ°ï¼šspaceship.png"</span>);
</code></pre>
<h3 data-id="heading-16">ç»“è¯­</h3>
<p>æœ¬æ–‡é€šè¿‡â€œç¯å¢ƒæ­å»ºâ†’ä»£ç å®ç°â†’æ¦‚å¿µè§£æâ€çš„æµç¨‹ï¼Œå®Œæ•´å®ç°äº†åŸºäº Node.js + OpenAI DALLÂ·E 3 çš„å›¾ç‰‡ç”ŸæˆåŠŸèƒ½ã€‚æ ¸å¿ƒäº®ç‚¹åœ¨äºï¼š</p>
<ul>
<li>å·¥å…·é“¾é«˜æ•ˆï¼šä½¿ç”¨ pnpm æå‡ä¾èµ–ç®¡ç†æ•ˆç‡ï¼Œdotenv ä¿éšœé…ç½®å®‰å…¨ï¼›</li>
<li>ä»£ç ç®€æ´å¯å¤ç”¨ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼Œä¾¿äºé›†æˆåˆ°å®é™…é¡¹ç›®ï¼›</li>
<li>èšç„¦æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼šä¸ä»…å®ç°åŠŸèƒ½ï¼Œæ›´æ‹†è§£äº†è¿›ç¨‹ã€ç¯å¢ƒå˜é‡ã€Prompt å·¥ç¨‹ç­‰å…³é”®æ¦‚å¿µã€‚</li>
</ul>
<p>å…¶å®AIGCå¼€å‘æ²¡é‚£ä¹ˆç„ä¹ï¼Œæ ¸å¿ƒå°±æ˜¯â€œè®©AI getåˆ°ä½ çš„æƒ³æ³•â€â€”â€”æŠŠPromptå†™å¾—ç²¾å‡†ç‚¹ï¼Œå¼€å‘æ­¥éª¤ææ¸…æ¥šï¼Œäº‹å„¿å°±æˆäº†å¤§åŠã€‚å¸Œæœ›è¿™ç¯‡å°æ•™ç¨‹èƒ½å¸®ä½ é¡ºé¡ºåˆ©åˆ©å…¥é—¨AIå¼€å‘ï¼Œç©èµ·æ¥ä¹‹åè¿˜èƒ½è¯•è¯•æ‰¹é‡ç”Ÿæˆå›¾ç‰‡ã€è®©GPTå¸®ä½ å†™åŠ¨æ€Promptè¿™äº›è¿›é˜¶ç©æ³•ï¼Œè¶…æœ‰æ„æ€çš„~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Springæ³¨è§£æºç è§£æ-@Component]]></title>    <link>https://juejin.cn/post/7582517824497860642</link>    <guid>https://juejin.cn/post/7582517824497860642</guid>    <pubDate>2025-12-12T03:25:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582517824497860642" data-draft-id="7580188321323499526" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Springæ³¨è§£æºç è§£æ-@Component"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-12T03:25:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çº¸ä¸Šçš„ç« é±¼çƒ§"/> <meta itemprop="url" content="https://juejin.cn/user/110384978868686"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Springæ³¨è§£æºç è§£æ-@Component
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/110384978868686/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çº¸ä¸Šçš„ç« é±¼çƒ§
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T03:25:49.000Z" title="Fri Dec 12 2025 03:25:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»28åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨ Spring çš„æ³¨è§£é©±åŠ¨å¼€å‘æ¨¡å¼ä¸­ï¼Œ<code>@Component</code> æ˜¯æ•´ä¸ªç»„ä»¶æ‰«æä¸ Bean æ³¨å†Œæµç¨‹çš„åŸºç¡€å…¥å£ã€‚å°½ç®¡æ—¥å¸¸ä½¿ç”¨åªéœ€åœ¨ç±»ä¸Šæ ‡æ³¨è¯¥æ³¨è§£ï¼Œä½†å…¶èƒŒåæ¶‰åŠçš„å…ƒæ³¨è§£ç»“æ„ã€<code>ClassPathBeanDefinitionScanner</code> çš„æ‰«ææœºåˆ¶ã€BeanDefinition çš„æ„å»ºä¸æ³¨å†Œé€»è¾‘ã€Bean å®ä¾‹åŒ–æµç¨‹ç­‰ä¸€ç³»åˆ—æ ¸å¿ƒæ­¥éª¤ï¼Œæ„æˆäº† Spring IoC å®¹å™¨è‡ªåŠ¨å‘ç°ä¸ç®¡ç†ç»„ä»¶çš„æ ¸å¿ƒèƒ½åŠ›ã€‚æœ¬æ–‡å°†ä»æºç å‡ºå‘ï¼Œè§£æ <code>@Component</code> ä»è¢«åŠ å…¥ç±»åˆ°æˆåŠŸåˆå§‹åŒ–ä¸º Bean åˆ° Spring å®¹å™¨å†…çš„æ•´ä½“æµç¨‹ã€‚</p>
<blockquote>
<p>æœ¬æ–‡ä¼šå‡ºç°å¤§é‡æºç ï¼Œéƒ¨åˆ†æºç å¯èƒ½ä¼šè¿›è¡Œåˆ å‡ï¼Œåªä¿ç•™æ¶‰åŠ <code>@Component</code> ç»„ä»¶æ‰«æä¸ Bean æ³¨å†Œæµç¨‹çš„éƒ¨åˆ†ã€‚éƒ¨åˆ†æµç¨‹è°ƒç”¨é“¾è¿‡é•¿ï¼Œå¯èƒ½ä¸ä¼šè§£ææ·±å±‚æ–¹æ³•çš„å®ç°ï¼Œåªå°†æ³¨æ„åŠ›é›†ä¸­åœ¨æ–¹æ³•çš„åŠŸèƒ½ã€‚æœ¬æ–‡åŸºäº Spring Framework 5.3.x ç‰ˆæœ¬åˆ†æã€‚</p>
</blockquote>
<p>æœ¬æ–‡æ¼”ç¤ºæ‰€ä½¿ç”¨çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<p>ç»„ä»¶ç±»ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyComponent</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sayHello</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"Hello from MyComponent!"</span>);
    }
}
</code></pre>
<p>æ‰«æä¸æ³¨å†Œï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">B01Application</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-comment">// 1. åˆ›å»ºä¸€ä¸ªç©º Spring å®¹å™¨</span>
        <span class="hljs-type">AnnotationConfigApplicationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnnotationConfigApplicationContext</span>();

        <span class="hljs-comment">// 2. åˆ›å»ºä¸€ä¸ª ClassPathBeanDefinitionScannerï¼Œç”¨äºæ‰«æ @Component</span>
        <span class="hljs-type">ClassPathBeanDefinitionScanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathBeanDefinitionScanner</span>(context);

        <span class="hljs-comment">// 3. æ‰‹åŠ¨è§¦å‘æ‰«æï¼ˆè‡ªå·±é…ç½®æ—¶æ³¨æ„ä¿®æ”¹æ‰«æä½ç½®ï¼‰</span>
        scanner.scan(<span class="hljs-string">"com.example.b01"</span>);

        <span class="hljs-comment">// 4. åˆ·æ–°å®¹å™¨ï¼Œä½¿æ³¨å†Œçš„ Bean ç”Ÿæ•ˆ</span>
        context.refresh();

        <span class="hljs-comment">// 5. æµ‹è¯•è·å– Bean</span>
        <span class="hljs-type">MyComponent</span> <span class="hljs-variable">component</span> <span class="hljs-operator">=</span> context.getBean(MyComponent.class);
        component.sayHello();

        context.close();
    }
}
</code></pre>
<h2 data-id="heading-1">å…ƒæ³¨è§£ç»“æ„</h2>
<p><code>@Component</code> æœ¬èº«åªæ˜¯ä¸€ä¸ªæç®€çš„å…ƒæ³¨è§£ç»“æ„ï¼Œå…¶æœ€æ ¸å¿ƒä½œç”¨æ˜¯é€šè¿‡ RUNTIME çº§åˆ«çš„å…ƒä¿¡æ¯æŒ‡ç¤º Springï¼šæ­¤ç±»åº”è¢«è§†ä¸ºç»„ä»¶å€™é€‰ã€‚å¤æ‚è¡Œä¸ºå‡å‘ç”Ÿåœ¨æ‰«æå™¨ä¸ BeanDefinition æ³¨å†Œé˜¶æ®µï¼Œè€Œé <code>@Component</code> æ³¨è§£å†…éƒ¨ã€‚</p>
<p>é™¤ <code>@Component</code> è‡ªèº«ï¼Œ<code>@Controller</code>/<code>@Service</code>/<code>@Repository</code> éƒ½æ˜¯ <code>@Component</code> çš„æ´¾ç”Ÿæ³¨è§£ï¼Œå…¶å…ƒæ³¨è§£ä¸­åŒ…å« <code>@Component</code>ï¼Œå› æ­¤èƒ½è¢«æ‰«æå™¨è¯†åˆ«ä¸ºå€™é€‰ç»„ä»¶ï¼Œå¯ä»¥ç”¨ä½œ Bean çš„æ ‡è¯†ã€‚</p>
<p><code>@Component</code>çš„å…ƒæ³¨è§£ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Target(ElementType.TYPE)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-meta">@Documented</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Component {
    String <span class="hljs-title function_">value</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">""</span>;
}
</code></pre>
<p><code>@Target(ElementType.TYPE)</code>è¡¨ç¤ºè¯¥æ³¨è§£åªèƒ½ç”¨äºç±»ã€æ¥å£ã€æšä¸¾ç­‰ç±»å‹çº§åˆ«çš„å£°æ˜ï¼Œæ„å‘³ç€è¯¥æ³¨è§£æ˜¯ä¸€ä¸ªç±»çº§åˆ«çš„ç»„ä»¶æ ‡è¯†ã€‚Springæ‰«ææ—¶ï¼Œé€šè¿‡è¯¥classå…ƒæ•°æ®åˆ¤æ–­æ­¤ç±»æ˜¯å¦æ˜¯ç»„ä»¶ã€‚</p>
<p><code>@Retention(RetentionPolicy.RUNTIME)</code>è¡¨ç¤ºè¯¥æ³¨è§£è¿è¡Œæ—¶å¯è¯»å–ï¼Œä¸ºSpringç»„ä»¶æ‰«æå™¨åœ¨è¿è¡Œé˜¶æ®µçš„æ‰«ææä¾›äº†ä¾æ®ï¼Œå¦‚æœä¸æ˜¯ RUNTIME çš„ï¼Œå°±æ— æ³•åœ¨è¿è¡Œæ—¶çš„æ‰«æé˜¶æ®µè¢«è·å–åˆ°ã€‚</p>
<p><code>@Documented</code> ä¸»è¦ç”¨äºç”Ÿæˆ JavaDoc æ—¶åŒ…å«è¯¥æ³¨è§£ï¼Œå¯¹ Spring è¡Œä¸ºæ— å½±å“ï¼Œä¸»è¦ä¸ºäº†æé«˜ API æ–‡æ¡£å‹å¥½æ€§ã€‚</p>
<p><code>value()</code> å±æ€§ç”¨äºæ ‡è¯† BeanName ç”Ÿæˆå™¨çš„å¯é€‰åˆ«åã€‚å¦‚æœä¸è®¾ç½® valueï¼ŒSpring ä¼šé‡‡å–é»˜è®¤è§„åˆ™ï¼Œä½¿ç”¨ç±»åé¦–å­—æ¯å°å†™ä½œä¸º BeanNameã€‚</p>
<h2 data-id="heading-2">ç»„ä»¶æ‰«æè¿‡ç¨‹</h2>
<h3 data-id="heading-3">scan æ–¹æ³•æ•´ä½“æµç¨‹</h3>
<p>é€šè¿‡è¿›è¡Œå¯¹<code>scanner.scan("com.example.demo")</code> ä»£ç è¿›è¡Œæ–­ç‚¹è°ƒè¯•ï¼Œè§‚å¯Ÿä»£ç æ‰§è¡Œæµç¨‹ã€‚<code>scan()</code> æ–¹æ³•ç›¸å…³ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">scan</span><span class="hljs-params">(String... basePackages)</span> {
   <span class="hljs-type">int</span> <span class="hljs-variable">beanCountAtScanStart</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.registry.getBeanDefinitionCount();

   doScan(basePackages);

   <span class="hljs-comment">// Register annotation config processors, if necessary.</span>
   <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.includeAnnotationConfig) {
      AnnotationConfigUtils.registerAnnotationConfigProcessors(<span class="hljs-built_in">this</span>.registry);
   }

   <span class="hljs-keyword">return</span> (<span class="hljs-built_in">this</span>.registry.getBeanDefinitionCount() - beanCountAtScanStart);
}
</code></pre>
<h3 data-id="heading-4">doScanç»„ä»¶æ‰«ææ ¸å¿ƒæµç¨‹</h3>
<p>å¯ä»¥å‘ç°ï¼Œåœ¨ <code>scan()</code> æ–¹æ³•ä¸­ï¼Œæ–¹æ³•çš„è¿”å›å€¼æ˜¯æœ¬æ¬¡æ‰«æè·å–åˆ°çš„ bean çš„æ•°é‡ï¼Œè€Œåœ¨è¯¥æ–¹æ³•ä¸­ï¼Œæœ€ä¸»è¦ç”¨æ¥å®ç°æ‰«æåŠŸèƒ½çš„æ–¹æ³•æ˜¯ <code>doScan()</code> æ–¹æ³•ï¼Œå…¶ç›¸å…³ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">protected</span> Set&lt;BeanDefinitionHolder&gt; <span class="hljs-title function_">doScan</span><span class="hljs-params">(String... basePackages)</span> {
   Assert.notEmpty(basePackages, <span class="hljs-string">"At least one base package must be specified"</span>);
   Set&lt;BeanDefinitionHolder&gt; beanDefinitions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashSet</span>&lt;&gt;();
   <span class="hljs-keyword">for</span> (String basePackage : basePackages) {
      Set&lt;BeanDefinition&gt; candidates = findCandidateComponents(basePackage);
      <span class="hljs-keyword">for</span> (BeanDefinition candidate : candidates) {
         <span class="hljs-type">ScopeMetadata</span> <span class="hljs-variable">scopeMetadata</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.scopeMetadataResolver.resolveScopeMetadata(candidate);
         candidate.setScope(scopeMetadata.getScopeName());
         <span class="hljs-type">String</span> <span class="hljs-variable">beanName</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.beanNameGenerator.generateBeanName(candidate, <span class="hljs-built_in">this</span>.registry);
         <span class="hljs-keyword">if</span> (candidate <span class="hljs-keyword">instanceof</span> AbstractBeanDefinition) {
            postProcessBeanDefinition((AbstractBeanDefinition) candidate, beanName);
         }
         <span class="hljs-keyword">if</span> (candidate <span class="hljs-keyword">instanceof</span> AnnotatedBeanDefinition) {
            AnnotationConfigUtils.processCommonDefinitionAnnotations((AnnotatedBeanDefinition) candidate);
         }
         <span class="hljs-keyword">if</span> (checkCandidate(beanName, candidate)) {
            <span class="hljs-type">BeanDefinitionHolder</span> <span class="hljs-variable">definitionHolder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanDefinitionHolder</span>(candidate, beanName);
            definitionHolder =
                  AnnotationConfigUtils.applyScopedProxyMode(scopeMetadata, definitionHolder, <span class="hljs-built_in">this</span>.registry);
            beanDefinitions.add(definitionHolder);
            registerBeanDefinition(definitionHolder, <span class="hljs-built_in">this</span>.registry);
         }
      }
   }
   <span class="hljs-keyword">return</span> beanDefinitions;
}
</code></pre>
<h3 data-id="heading-5">è½®è¯¢åŒ…åçš„å€™é€‰ç»„ä»¶æŸ¥è¯¢</h3>
<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ª Set é›†åˆï¼Œç”¨ä»¥å­˜å‚¨æ‰«æå¾—å‡ºçš„ BeanDefinitionHolderã€‚BeanDefinitionHolder æä¾› BeanDefinition ä¸ beanName çš„å°è£…ï¼Œè€Œ BeanDefinition ä»£è¡¨æè¿° Bean åœ¨å®¹å™¨ä¸­åº”å¦‚ä½•è¢«ç®¡ç†ã€‚</p>
<pre><code class="hljs language-java" lang="java">Set&lt;BeanDefinitionHolder&gt; beanDefinitions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashSet</span>&lt;&gt;();
</code></pre>
<p>éå†ä¼ å…¥çš„ä¸å®šé•¿åŒ…åé›†åˆï¼Œæ‰«æåŒ…ä¸­çš„ç±»ï¼Œå¾—åˆ°åŒ…è·¯å¾„ä¸­çš„å€™é€‰ç»„ä»¶ç±»é›†åˆã€‚<code>findCandidateComponents(basePackage)</code> æ–¹æ³•ç”¨äºä»æŒ‡å®šåŒ…è·¯å¾„ä¸­æ‰«æå‡ºå€™é€‰ç»„ä»¶ç±»ï¼Œè¯¥æ–¹æ³•ä¼šè¯»å– classpath ä¸‹çš„æ‰€æœ‰ <code>.class</code> æ–‡ä»¶ï¼Œå¹¶åˆ¤æ–­æ‰«æåˆ°çš„ <code>.class</code> æ–‡ä»¶æ˜¯å¦æ»¡è¶³å€™é€‰ç»„ä»¶ç±»çš„æ¡ä»¶ï¼Œè¿”å›ç»åˆ¤æ–­åçš„ BeanDefinition é›†åˆã€‚</p>
<pre><code class="hljs language-java" lang="java">Set&lt;BeanDefinition&gt; candidates = findCandidateComponents(basePackage);
</code></pre>
<p><code>findCandidateComponents()</code> æ–¹æ³•æºç å¦‚ä¸‹ã€‚ä¼ ç»Ÿæ–¹æ³•åœ¨ <code>scanCandidateComponents()</code> æ–¹æ³•ä¸­å®ç°ç»„ä»¶çš„æ‰«æåŠŸèƒ½ã€‚è€Œåœ¨ Spring 5 ä¸­ï¼Œå¼•å…¥äº†ç»„ä»¶ç´¢å¼•åŠŸèƒ½åŠ é€Ÿæ‰«æï¼Œå¦‚æœç±»è·¯å¾„ä¸­å­˜åœ¨ Spring 5 å¼•å…¥çš„ç»„ä»¶ç´¢å¼•æ–‡ä»¶ï¼Œå¹¶ä¸”å½“å‰çš„ <code>include-filters</code> èƒ½å¤Ÿè¢«ç´¢å¼•æ”¯æŒï¼Œåˆ™ä¼˜å…ˆä½¿ç”¨ç´¢å¼•æ–‡ä»¶å¿«é€Ÿæ‰¾åˆ°å¯¹åº”ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> Set&lt;BeanDefinition&gt; <span class="hljs-title function_">findCandidateComponents</span><span class="hljs-params">(String basePackage)</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.componentsIndex != <span class="hljs-literal">null</span> &amp;&amp; indexSupportsIncludeFilters()) {
        <span class="hljs-keyword">return</span> addCandidateComponentsFromIndex(<span class="hljs-built_in">this</span>.componentsIndex, basePackage);
    }
    <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> scanCandidateComponents(basePackage);
    }
}
</code></pre>
<h3 data-id="heading-6">æ‰«æè·å–BeanDefinitioné›†åˆ</h3>
<p>å¯¹äº <code>scanCandidateComponents()</code> æ–¹æ³•ï¼Œå…¶è¿”å›å€¼ä¸ºæ‰«æåˆ°çš„ BeanDefinition é›†åˆï¼Œå…¶å®ç°å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> Set&lt;BeanDefinition&gt; <span class="hljs-title function_">scanCandidateComponents</span><span class="hljs-params">(String basePackage)</span> {
   Set&lt;BeanDefinition&gt; candidates = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashSet</span>&lt;&gt;();
   <span class="hljs-keyword">try</span> {
      <span class="hljs-type">String</span> <span class="hljs-variable">packageSearchPath</span> <span class="hljs-operator">=</span> ResourcePatternResolver.CLASSPATH_ALL_URL_PREFIX +
            resolveBasePackage(basePackage) + <span class="hljs-string">'/'</span> + <span class="hljs-built_in">this</span>.resourcePattern;
      Resource[] resources = getResourcePatternResolver().getResources(packageSearchPath);
      <span class="hljs-type">boolean</span> <span class="hljs-variable">traceEnabled</span> <span class="hljs-operator">=</span> logger.isTraceEnabled();
      <span class="hljs-type">boolean</span> <span class="hljs-variable">debugEnabled</span> <span class="hljs-operator">=</span> logger.isDebugEnabled();
      <span class="hljs-keyword">for</span> (Resource resource : resources) {
         <span class="hljs-keyword">if</span> (traceEnabled) {
            logger.trace(<span class="hljs-string">"Scanning "</span> + resource);
         }
         <span class="hljs-keyword">if</span> (resource.isReadable()) {
            <span class="hljs-keyword">try</span> {
               <span class="hljs-type">MetadataReader</span> <span class="hljs-variable">metadataReader</span> <span class="hljs-operator">=</span> getMetadataReaderFactory().getMetadataReader(resource);
               <span class="hljs-keyword">if</span> (isCandidateComponent(metadataReader)) {
                  <span class="hljs-type">ScannedGenericBeanDefinition</span> <span class="hljs-variable">sbd</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ScannedGenericBeanDefinition</span>(metadataReader);
                  sbd.setSource(resource);
                  <span class="hljs-keyword">if</span> (isCandidateComponent(sbd)) {
                     <span class="hljs-keyword">if</span> (debugEnabled) {
                        logger.debug(<span class="hljs-string">"Identified candidate component class: "</span> + resource);
                     }
                     candidates.add(sbd);
                  }
                  <span class="hljs-keyword">else</span> { ... }
               }
               <span class="hljs-keyword">else</span> { ... }
            }
            <span class="hljs-keyword">catch</span> (Throwable ex) {
               <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanDefinitionStoreException</span>(<span class="hljs-string">"Failed to read candidate component class: "</span> + resource, ex);
            }
         }
         <span class="hljs-keyword">else</span> { ... }
      }
   }
   <span class="hljs-keyword">catch</span> (IOException ex) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanDefinitionStoreException</span>(<span class="hljs-string">"I/O failure during classpath scanning"</span>, ex);
   }
   <span class="hljs-keyword">return</span> candidates;
}
</code></pre>
<h4 data-id="heading-7">åŠ è½½èµ„æºæ–‡ä»¶</h4>
<p>é¦–å…ˆè§£æä¼ å…¥çš„ <code>basePackage</code> åŒ…è·¯å¾„ï¼Œå°†å…¶é€šè¿‡å­—ç¬¦ä¸²æ‹¼æ¥æ„å»ºä¸º <code>classpath*:åŒ…è·¯å¾„/**/*.class</code> çš„è·¯å¾„æ ¼å¼ã€‚éšåä½¿ç”¨ <code>getResourcePatternResolver().getResources()</code> è§£æå¯¹åº”è·¯å¾„ï¼Œä» classpath æ‰¾åˆ°æ‰€æœ‰ class æ–‡ä»¶èµ„æºï¼Œå¹¶é€ä¸ªéå†å¾—åˆ°çš„èµ„æºé›†åˆã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">String</span> <span class="hljs-variable">packageSearchPath</span> <span class="hljs-operator">=</span> ResourcePatternResolver.CLASSPATH_ALL_URL_PREFIX +
        resolveBasePackage(basePackage) + <span class="hljs-string">'/'</span> + <span class="hljs-built_in">this</span>.resourcePattern;
Resource[] resources = getResourcePatternResolver().getResources(packageSearchPath);
</code></pre>
<h4 data-id="heading-8">åŸºäº ASM è¯»å–ç±»å…ƒæ•°æ®</h4>
<p>éå†è¿‡ç¨‹ä¸­ï¼Œå¯¹æ‰€æœ‰å¯è¯»çš„ <code>.class</code> æ–‡ä»¶è¿›è¡Œå¤„ç†ã€‚é¦–å…ˆé€šè¿‡ <code>MetadataReader</code> è¯»å–ç±»çš„å…ƒæ•°æ®ã€‚è¯¥è¿‡ç¨‹ç”± ASM åœ¨å­—èŠ‚ç å±‚é¢å®Œæˆè§£æè€Œéç›´æ¥åŠ è½½ç±»ï¼Œé¿å…äº†ç±»åŠ è½½è¿‡ç¨‹ä¸­è§¦å‘é™æ€ä»£ç å—ã€å‡å°‘å†…å­˜å ç”¨ï¼Œæå‡æ‰«ææ•ˆç‡ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">MetadataReader</span> <span class="hljs-variable">metadataReader</span> <span class="hljs-operator">=</span> getMetadataReaderFactory().getMetadataReader(resource);
</code></pre>
<h4 data-id="heading-9">ä¸¤è½®è¿‡æ»¤ä¸ BeanDefinition æ„å»º</h4>
<p>è·å–åˆ°å¯¹åº”èµ„æºçš„ MetadataReader åï¼Œé¦–å…ˆé€šè¿‡ <code>isCandidateComponent(MetadataReader)</code> æ–¹æ³•è¿›è¡Œç¬¬ä¸€è½®è¿‡æ»¤ï¼ŒåŸºäºå­—èŠ‚ç å…ƒæ•°æ®åˆ¤æ–­ç±»æ˜¯å¦å¸¦æœ‰ç¬¦åˆæ¡ä»¶çš„æ³¨è§£ï¼ˆé€šå¸¸æ˜¯ <code>@Component</code>ã€<code>@Controller</code> ç­‰ï¼‰ã€‚æ•´ä¸ªè¿‡ç¨‹é€šè¿‡è¯»å– metadata åˆ¤æ–­ï¼Œä¸åŠ è½½ç±»ï¼Œä¹Ÿä¸å¯¹ç±»è¿›è¡Œå®ä¾‹åŒ–åˆ¤æ–­ã€‚</p>
<p>è‹¥ç¬¬ä¸€è½®è¿‡æ»¤é€šè¿‡ï¼Œåˆ™æ ¹æ® <code>MetadataReader</code> æ„å»ºå¯¹åº” <code>ScannedGenericBeanDefinition</code>ï¼Œå¹¶è®¾ç½®å…¶èµ„æºè·¯å¾„ã€‚</p>
<p>éšåè¿›å…¥ç¬¬äºŒè½®è¿‡æ»¤ï¼Œä½¿ç”¨ <code>isCandidateComponent(BeanDefinition)</code> æ–¹æ³•ï¼Œé’ˆå¯¹ BeanDefinition è‡ªèº«è¿›è¡ŒéªŒè¯ï¼Œåˆ¤æ–­è¯¥ BeanDefinition æ˜¯å¦çœŸæ­£èƒ½å¤Ÿä½œä¸º Spring Bean è¿›è¡Œæ³¨å†Œã€‚è¿™ä¸€æ­¥ä¸»è¦åˆ¤æ–­ç±»ç»“æ„ç‰¹å¾ï¼Œå³æ˜¯å¦ä¸ºç‹¬ç«‹ç±»ã€æ˜¯å¦ä¸ºå…·ä½“ç±»ã€æ˜¯å¦æ˜¯å¸¦æœ‰ @Lookup æ–¹æ³•çš„æŠ½è±¡ç±»ï¼ˆSpring å¯é€šè¿‡ CGLIB ä¸ºå…¶ç”Ÿæˆå¯å®ä¾‹åŒ–çš„å­ç±»ï¼‰ã€‚</p>
<p>åªæœ‰æ»¡è¶³è¿™äº›æ¡ä»¶çš„ç±»ï¼Œæ‰è¢«è§†ä¸ºå¯è¢«å®¹å™¨ç®¡ç†çš„å€™é€‰ç»„ä»¶ï¼ŒåŠ å…¥å€™é€‰ç»„ä»¶é›†åˆã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (isCandidateComponent(metadataReader)) {
  <span class="hljs-type">ScannedGenericBeanDefinition</span> <span class="hljs-variable">sbd</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ScannedGenericBeanDefinition</span>(metadataReader);
  sbd.setSource(resource);
  <span class="hljs-keyword">if</span> (isCandidateComponent(sbd)) {
     <span class="hljs-keyword">if</span> (debugEnabled) {
        logger.debug(<span class="hljs-string">"Identified candidate component class: "</span> + resource);
     }
     candidates.add(sbd);
  }
  <span class="hljs-keyword">else</span> { ... }
}
</code></pre>
<h3 data-id="heading-10">ç»„ä»¶å¤„ç†æµç¨‹</h3>
<h4 data-id="heading-11">è§£æä½œç”¨åŸŸä¿¡æ¯</h4>
<p>éå†æ‰«æè¿”å›çš„ BeanDefinition é›†åˆï¼Œå¤„ç†å…¶ä¸­æ¯ä¸€ä¸ªå€™é€‰ç»„ä»¶ç±»ï¼Œé¦–å…ˆä½¿ç”¨ <code>resolveScopeMetadata()</code> æ–¹æ³•ç¡®å®š Bean çš„åˆ›å»ºä½œç”¨åŸŸåŠä»£ç†æ¨¡å¼ã€‚åªæœ‰ä½¿ç”¨æ³¨è§£æ‰«ææ–¹å¼å¾—åˆ°çš„ BeanDefinition æ‰æ”¯æŒ <code>@Scope</code> åˆ¤æ–­ï¼Œ å¯¹äºæ·»åŠ äº† <code>@Component</code> æ³¨è§£ä½†æœªæ·»åŠ  <code>@Scope</code> æ³¨è§£çš„ BeanDefinitionï¼ŒSpring é»˜è®¤ä½œç”¨åŸŸä¸ºå•ä¾‹ <code>Singleton</code>ï¼Œå¦‚æœç±»ä¸Šæ·»åŠ äº† <code>@Scope</code> æ³¨è§£å¹¶æŒ‡å®šäº†ä½œç”¨åŸŸç±»å‹ï¼Œåˆ™è¯¥æ–¹æ³•ä¼šè§£æå‡ºå¯¹åº”ä½œç”¨åŸŸè®¾ç½®åˆ°å€™é€‰ç±»ä¸Šã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">ScopeMetadata</span> <span class="hljs-variable">scopeMetadata</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.scopeMetadataResolver.resolveScopeMetadata(candidate);
candidate.setScope(scopeMetadata.getScopeName());
</code></pre>
<h4 data-id="heading-12">ç”Ÿæˆ BeanName</h4>
<p>å¯¹äº BeanNameï¼Œé€šè¿‡è°ƒç”¨ <code>generateBeanName()</code> æ–¹æ³•è¿›è¡Œè·å–ã€‚è¯¥æ–¹æ³•ä¼šå…ˆåˆ¤æ–­è¯¥ BeanDefinition æ˜¯å¦ç”±æ³¨è§£æ ‡è¯†çš„ï¼Œåªæœ‰æ³¨è§£æ ‡è¯†çš„ Bean æ‰èƒ½å¤Ÿç”¨è¿™ç§æ–¹æ³•ç”Ÿæˆ BeanNameã€‚æ–¹æ³•å†…éƒ¨é€šè¿‡ <code>determineBeanNameFromAnnotation()</code> æ–¹æ³•è§£æ <code>@Component</code> æ³¨è§£çš„ <code>value</code>ï¼Œå¦‚æœç”¨æˆ·æ˜¾å¼å®šä¹‰äº†å€¼ï¼Œåˆ™ä½¿ç”¨è¯¥å€¼ä½œä¸º BeanNameï¼Œå¦åˆ™å–ç±»çš„ç®€å•ç±»åï¼Œå¹¶å°†å…¶é¦–å­—æ¯å°å†™ä½œä¸º BeanNameã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">String</span> <span class="hljs-variable">beanName</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.beanNameGenerator.generateBeanName(candidate, <span class="hljs-built_in">this</span>.registry);
</code></pre>
<h4 data-id="heading-13">ç»“æ„è¡¥å……åŠå®šåˆ¶åŒ–å¤„ç†</h4>
<p>å½“ BeanDefinition å±äº <code>AbstractBeanDefinition</code> ç±»å‹æ—¶ï¼ŒSpring ä¼šè°ƒç”¨ <code>postProcessBeanDefinition()</code> æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•æœ¬èº«æ˜¯æ‰«æå™¨æä¾›çš„æ‰©å±•ç‚¹ï¼Œç”¨äºåœ¨å¿…è¦æ—¶å¯¹æ‰«æç”Ÿæˆçš„ BeanDefinition è¿›è¡Œç»“æ„ä¸Šçš„è¡¥å……æˆ–å®šåˆ¶åŒ–å¤„ç†ã€‚é»˜è®¤å®ç°åªåº”ç”¨ BeanDefinitionDefaults å’Œè‡ªåŠ¨æ³¨å…¥å€™é€‰è§„åˆ™ï¼Œå¹¶ä¸ä¼šè‡ªåŠ¨è®¾ç½® init-methodã€destroy-method ç­‰å±æ€§ã€‚è¯¥æ–¹æ³•ä¸»è¦ç”¨äºæ‰«æå™¨æ‰©å±•ï¼Œè€Œä¸æ˜¯å¸¸è§„å…ƒæ•°æ®å¤„ç†çš„ä½ç½®ã€‚</p>
<p>ä¹‹æ‰€ä»¥è¦è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œæ˜¯å› ä¸ºåªæœ‰ <code>AbstractBeanDefinition</code> æ‰å…·å¤‡å®Œæ•´çš„å¯æ‰©å±•å±æ€§æ¨¡å‹ï¼›å¦‚æœ BeanDefinition ä¸æ˜¯ç”±æ­¤ç±»æ´¾ç”Ÿï¼Œè¯´æ˜å®ƒå¯èƒ½æ¥è‡ª XMLã€ç¨‹åºåŒ–æ³¨å†Œç­‰å…¶ä»–æ¥æºï¼Œä¸ä¸€å®šé€‚åˆä¿®æ”¹å†…éƒ¨ç»“æ„ï¼Œå› æ­¤åœ¨æ‰§è¡Œé¢å¤–å±æ€§è¡¥å……å‰å¿…é¡»ä¿è¯ç±»å‹å®‰å…¨ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (candidate <span class="hljs-keyword">instanceof</span> AnnotatedBeanDefinition) {
   AnnotationConfigUtils.processCommonDefinitionAnnotations((AnnotatedBeanDefinition) candidate);
}
</code></pre>
<p>åœ¨ <code>ClassPathBeanDefinitionScanner</code> ç±»ä¸­ï¼Œ<code>postProcessBeanDefinition()</code> æ–¹æ³•çš„å®ç°ä¸»è¦æ˜¯ç”¨æ¥ä¸ºé€šè¿‡æ³¨è§£å¾—åˆ°çš„ BeanDefinition è®¾ç½®é»˜è®¤é…ç½®ï¼Œå¹¶æ ¹æ® <code>ClassPathBeanDefinitionScanner</code> ä¸­è®¾ç½®çš„å¯èƒ½çš„è¿‡æ»¤ beanName è§„åˆ™å†³å®šå®ƒæ˜¯å¦æ˜¯è‡ªåŠ¨æ³¨å…¥å€™é€‰è€…ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">postProcessBeanDefinition</span><span class="hljs-params">(AbstractBeanDefinition beanDefinition, String beanName)</span> {
   beanDefinition.applyDefaults(<span class="hljs-built_in">this</span>.beanDefinitionDefaults);
   <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.autowireCandidatePatterns != <span class="hljs-literal">null</span>) {
      beanDefinition.setAutowireCandidate(PatternMatchUtils.simpleMatch(<span class="hljs-built_in">this</span>.autowireCandidatePatterns, beanName));
   }
}
</code></pre>
<h4 data-id="heading-14">å¤„ç†å¸¸è§å…ƒæ³¨è§£</h4>
<p>å½“è¯¥ BeanDefinition æ˜¯ç”±æ³¨è§£æ ‡è¯†çš„ç±»å£°æ˜æ—¶ï¼Œå³è¯¥ BeanDefinition ç»§æ‰¿è‡ª <code>AnnotatedBeanDefinition</code> æ—¶ï¼Œæ‰§è¡Œ <code>processCommonDefinitionAnnotations()</code> æ–¹æ³•ï¼Œç”¨æ¥å¤„ç† Bean ç±»ä¸Šå¸¸è§çš„ Spring å…ƒæ³¨è§£ï¼Œå¦‚ <code>@Lazy</code>ã€<code>@Primary</code> ç­‰ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (candidate <span class="hljs-keyword">instanceof</span> AnnotatedBeanDefinition) {
   AnnotationConfigUtils.processCommonDefinitionAnnotations((AnnotatedBeanDefinition) candidate);
}
</code></pre>
<h4 data-id="heading-15">BeanDefinition å†²çªæ ¡éªŒä¸ä»£ç†å¤„ç†</h4>
<p><code>checkCandidate()</code> æ–¹æ³•ç”¨äºæ£€æŸ¥ BeanName æ˜¯å¦ä¸å·²æœ‰ BeanDefinition å†²çªï¼Œç¡®ä¿ BeanDefinition çš„æ³¨å†Œä¸ä¼šäº§ç”Ÿé‡å¤ã€è¦†ç›–æˆ–ä¸å…¼å®¹çš„æƒ…å†µï¼Œæ˜¯ Spring ä¿è¯å®¹å™¨ä¸€è‡´æ€§çš„å…³é”®æ­¥éª¤ã€‚å¦‚æœç¬¦åˆå®‰å…¨æ³¨å†Œæ¡ä»¶ï¼Œåˆ™æ ¹æ®å€™é€‰ç»„ä»¶ç±»ä¿¡æ¯å’Œç”Ÿæˆçš„ BeanName ï¼Œåˆ›å»ºä¸€ä¸ª BeanDefinitionHolder å¹¶é€šè¿‡ <code>applyScopedProxyMode()</code> æ–¹æ³•è®¾ç½®è¯¥ BeanDefinitionHolder çš„ä»£ç†æ¨¡å¼ï¼Œå°†å…¶æ·»åŠ åˆ° beanDefinition é›†åˆä¸­ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (checkCandidate(beanName, candidate)) {
   <span class="hljs-type">BeanDefinitionHolder</span> <span class="hljs-variable">definitionHolder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanDefinitionHolder</span>(candidate, beanName);
   definitionHolder =
         AnnotationConfigUtils.applyScopedProxyMode(scopeMetadata, definitionHolder, <span class="hljs-built_in">this</span>.registry);
   beanDefinitions.add(definitionHolder);
   registerBeanDefinition(definitionHolder, <span class="hljs-built_in">this</span>.registry);
}
</code></pre>
<h2 data-id="heading-16">BeanDefinition æ³¨å†Œ</h2>
<h3 data-id="heading-17">è°ƒç”¨æµç¨‹</h3>
<p>é€šè¿‡ <code>registerBeanDefinition()</code> æ–¹æ³•ï¼Œå°†å¯¹åº” BeanDefinitionHolder ä¸­çš„ BeanDefinition æ³¨å†Œåˆ°æŒ‡å®šå®¹å™¨ç±»ä¸­ã€‚å…¶ä¸­ï¼Œ<code>this.registry</code> è¡¨ç¤º BeanDefinition æ³¨å†Œè¡¨ï¼Œæ˜¯ Spring å®¹å™¨ç”¨äºä¿å­˜ BeanDefinition çš„æ ¸å¿ƒæ¥å£ï¼Œå…·ä½“èŒè´£ç”± <code>DefaultListableBeanFactory</code> ç­‰å®ç°ç±»è¿›è¡Œå®ç°ã€‚</p>
<pre><code class="hljs language-java" lang="java">registerBeanDefinition(definitionHolder, <span class="hljs-built_in">this</span>.registry);
</code></pre>
<p><code>registerBeanDefinition</code> æ–¹æ³•ä¸­è°ƒç”¨äº† <code>BeanDefinitionReaderUtils</code> ä¸­çš„ <code>registerBeanDefinition(definitionHolder, registry)</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•é€šè¿‡è°ƒç”¨ <code>BeanDefinitionRegister</code> æ¥å£ä¸­çš„ <code>registerBeanDefinition</code> æ–¹æ³•æ³¨å†Œ <code>BeanDefinition</code>ï¼Œå¹¶ä¸ºæ³¨å†Œå¥½çš„ <code>BeanDefinition</code> æ·»åŠ åˆ«åã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerBeanDefinition</span><span class="hljs-params">(
      BeanDefinitionHolder definitionHolder, BeanDefinitionRegistry registry)</span>
      <span class="hljs-keyword">throws</span> BeanDefinitionStoreException {

   <span class="hljs-comment">// Register bean definition under primary name.</span>
   <span class="hljs-type">String</span> <span class="hljs-variable">beanName</span> <span class="hljs-operator">=</span> definitionHolder.getBeanName();
   registry.registerBeanDefinition(beanName, definitionHolder.getBeanDefinition());

   <span class="hljs-comment">// Register aliases for bean name, if any.</span>
   String[] aliases = definitionHolder.getAliases();
   <span class="hljs-keyword">if</span> (aliases != <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">for</span> (String alias : aliases) {
         registry.registerAlias(beanName, alias);
      }
   }
}
</code></pre>
<p><code>registry.registerBeanDefinition</code> æ–¹æ³•å³ä¸º <code>BeanDefinitionRegister</code> æ¥å£çš„ <code>registerBeanDefinition()</code> æ–¹æ³•ï¼Œå°† BeanDefinitionHolder ä¸­åŒ…è£…çš„ BeanName å’Œ BeanDefinition ä½œä¸ºå‚æ•°ä¼ å…¥è¯¥æ–¹æ³•ã€‚BeanDefinition æ³¨å†Œåœ¨ <code>DefaultListableBeanFactory</code> å®ç°ç±»ä¸­è¿›è¡Œå®ç°ã€‚è¯¥æ–¹æ³•å®ç°å¦‚ä¸‹ï¼š</p>
<h3 data-id="heading-18">BeanDefinition æ³¨å†Œå®ç°æ¦‚è§ˆ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerBeanDefinition</span><span class="hljs-params">(String beanName, BeanDefinition beanDefinition)</span>
      <span class="hljs-keyword">throws</span> BeanDefinitionStoreException {

   Assert.hasText(beanName, <span class="hljs-string">"Bean name must not be empty"</span>);
   Assert.notNull(beanDefinition, <span class="hljs-string">"BeanDefinition must not be null"</span>);

   <span class="hljs-keyword">if</span> (beanDefinition <span class="hljs-keyword">instanceof</span> AbstractBeanDefinition) {
      <span class="hljs-keyword">try</span> {
         ((AbstractBeanDefinition) beanDefinition).validate();
      }
      <span class="hljs-keyword">catch</span> (BeanDefinitionValidationException ex) {
         <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanDefinitionStoreException</span>(beanDefinition.getResourceDescription(), beanName,
               <span class="hljs-string">"Validation of bean definition failed"</span>, ex);
      }
   }

   <span class="hljs-type">BeanDefinition</span> <span class="hljs-variable">existingDefinition</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.beanDefinitionMap.get(beanName);
   <span class="hljs-keyword">if</span> (existingDefinition != <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">if</span> (!isAllowBeanDefinitionOverriding()) {
         <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanDefinitionOverrideException</span>(beanName, beanDefinition, existingDefinition);
      }
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (existingDefinition.getRole() &lt; beanDefinition.getRole()) {
         <span class="hljs-comment">// e.g. was ROLE_APPLICATION, now overriding with ROLE_SUPPORT or ROLE_INFRASTRUCTURE</span>
         <span class="hljs-keyword">if</span> (logger.isInfoEnabled()) {
            logger.info(<span class="hljs-string">"Overriding user-defined bean definition for bean '"</span> + beanName +
                  <span class="hljs-string">"' with a framework-generated bean definition: replacing ["</span> +
                  existingDefinition + <span class="hljs-string">"] with ["</span> + beanDefinition + <span class="hljs-string">"]"</span>);
         }
      }
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!beanDefinition.equals(existingDefinition)) {
         <span class="hljs-keyword">if</span> (logger.isDebugEnabled()) {
            logger.debug(<span class="hljs-string">"Overriding bean definition for bean '"</span> + beanName +
                  <span class="hljs-string">"' with a different definition: replacing ["</span> + existingDefinition +
                  <span class="hljs-string">"] with ["</span> + beanDefinition + <span class="hljs-string">"]"</span>);
         }
      }
      <span class="hljs-keyword">else</span> {
         <span class="hljs-keyword">if</span> (logger.isTraceEnabled()) {
            logger.trace(<span class="hljs-string">"Overriding bean definition for bean '"</span> + beanName +
                  <span class="hljs-string">"' with an equivalent definition: replacing ["</span> + existingDefinition +
                  <span class="hljs-string">"] with ["</span> + beanDefinition + <span class="hljs-string">"]"</span>);
         }
      }
      <span class="hljs-built_in">this</span>.beanDefinitionMap.put(beanName, beanDefinition);
   }
   <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">if</span> (hasBeanCreationStarted()) {
         <span class="hljs-comment">// Cannot modify startup-time collection elements anymore (for stable iteration)</span>
         <span class="hljs-keyword">synchronized</span> (<span class="hljs-built_in">this</span>.beanDefinitionMap) {
            <span class="hljs-built_in">this</span>.beanDefinitionMap.put(beanName, beanDefinition);
            List&lt;String&gt; updatedDefinitions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(<span class="hljs-built_in">this</span>.beanDefinitionNames.size() + <span class="hljs-number">1</span>);
            updatedDefinitions.addAll(<span class="hljs-built_in">this</span>.beanDefinitionNames);
            updatedDefinitions.add(beanName);
            <span class="hljs-built_in">this</span>.beanDefinitionNames = updatedDefinitions;
            removeManualSingletonName(beanName);
         }
      }
      <span class="hljs-keyword">else</span> {
         <span class="hljs-comment">// Still in startup registration phase</span>
         <span class="hljs-built_in">this</span>.beanDefinitionMap.put(beanName, beanDefinition);
         <span class="hljs-built_in">this</span>.beanDefinitionNames.add(beanName);
         removeManualSingletonName(beanName);
      }
      <span class="hljs-built_in">this</span>.frozenBeanDefinitionNames = <span class="hljs-literal">null</span>;
   }

   <span class="hljs-keyword">if</span> (existingDefinition != <span class="hljs-literal">null</span> || containsSingleton(beanName)) {
      resetBeanDefinition(beanName);
   }
   <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isConfigurationFrozen()) {
      clearByTypeCache();
   }
}
</code></pre>
<h3 data-id="heading-19">BeanDefinition æ ¡éªŒ</h3>
<p>åœ¨ Spring æ³¨å†Œ BeanDefinition ä¹‹å‰ï¼Œä¼šå¯¹ç»§æ‰¿è‡ª <code>AbstractBeanDefinition</code> çš„ BeanDefinition çš„åˆæ³•æ€§è¿›è¡Œæ ¡éªŒï¼Œå› ä¸ºå®ƒæä¾›äº†æ›´å®Œæ•´çš„å…ƒæ•°æ®æ¨¡å‹å’Œæ ¡éªŒè§„åˆ™ã€‚é€šè¿‡è°ƒç”¨ <code>validate()</code> æ–¹æ³•ï¼ŒSpringä¼šæ£€æŸ¥æŒ‡å®šçš„ Bean Class æ˜¯å¦å­˜åœ¨ã€æ„é€ æ–¹æ³•æˆ–å·¥å‚æ–¹æ³•ç­‰é…ç½®æ˜¯å¦æœ‰æ•ˆã€ä½œç”¨åŸŸä¸ç”Ÿå‘½å‘¨æœŸé…ç½®æ˜¯å¦å†²çªã€æ˜¯å¦å­˜åœ¨æ— æ•ˆçš„è‡ªåŠ¨è£…é…æ¨¡å¼ã€Init / Destroy æ–¹æ³•æ˜¯å¦å¯è§£æç­‰ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (beanDefinition <span class="hljs-keyword">instanceof</span> AbstractBeanDefinition) {
   <span class="hljs-keyword">try</span> {
      ((AbstractBeanDefinition) beanDefinition).validate();
   }
   <span class="hljs-keyword">catch</span> (BeanDefinitionValidationException ex) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanDefinitionStoreException</span>(beanDefinition.getResourceDescription(), beanName,
            <span class="hljs-string">"Validation of bean definition failed"</span>, ex);
   }
}
</code></pre>
<h3 data-id="heading-20">BeanDefinition æ³¨å†Œ/è¦†ç›–</h3>
<p>é€šè¿‡ BeanName åœ¨ <code>beanDefinitionMap</code> ä¸­æŸ¥æ‰¾å¯¹åº”çš„ BeanDefinition æ˜¯å¦å­˜åœ¨ã€‚å­˜åœ¨è¿”å›å¯¹åº”çš„ BeanDefinitionï¼Œä¸å­˜åœ¨åˆ™è¿”å› <code>NULL</code>ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">BeanDefinition</span> <span class="hljs-variable">existingDefinition</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.beanDefinitionMap.get(beanName);
</code></pre>
<h4 data-id="heading-21">BeanDefinition å·²å­˜åœ¨</h4>
<p>å¦‚æœ BeanDefinition å·²å­˜åœ¨ï¼Œæ­¤æ—¶åº”åˆ¤æ–­æ˜¯å¦éœ€è¦å¯¹ BeanDefinition è¿›è¡Œè¦†ç›–ï¼Œå…±åˆ†ä¸ºå››ç§æƒ…å†µï¼Œåˆ†åˆ«æ˜¯<strong>ä¸å…è®¸è¦†ç›–</strong>ã€<strong>æ¡†æ¶çº§ Bean è¦†ç›–ç”¨æˆ·çº§ Bean</strong>ã€<strong>æ–°ç”¨æˆ· Bean è¦†ç›–æ—§ç”¨æˆ· Bean</strong>ã€<strong>é‡å¤æ‰«æå¯¼è‡´çš„ç­‰ä»·å®šä¹‰è¦†ç›–</strong>ï¼Œé™¤ä¸å…è®¸è¦†ç›–çš„æƒ…å†µå¤–ï¼Œæ¯ç§æƒ…å†µéƒ½å¯¹åº”è¾“å‡ºä¸åŒçš„æ—¥å¿—ç­‰çº§ã€‚æœ€å<strong>ç»Ÿä¸€å†™å…¥</strong> <code>beanDefinitionMap</code>ã€‚</p>
<p>æ˜¯å¦å…è®¸è¦†ç›–åŸºäº <code>isAllowBeanDefinitionOverriding()</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å› BeanFactory å®¹å™¨å†…çš„ <code>this.allowBeanDefinitionOverriding</code> å±æ€§ã€‚åœ¨ Spring Framework ä¸­ï¼Œè¯¥å±æ€§é»˜è®¤ä¸º <code>true</code>ï¼Œå³ BeanDefinition å…è®¸è¢«è¦†ç›–ï¼›è€Œ Spring Boot ä» 2.1 å¼€å§‹é»˜è®¤ä¸å…è®¸è¦†ç›–ã€‚</p>
<p>å½“å…è®¸è¦†ç›–æ—¶ï¼Œé¦–å…ˆé€šè¿‡ <code>getRole()</code> æ–¹æ³•åˆ¤æ–­å·²æœ‰çš„ BeanDefinition å’Œä¼ å…¥çš„ BeanDefinition ä¹‹é—´çš„ç­‰çº§ï¼Œå½“ä¼ å…¥çš„ BeanDefinition çš„ <code>getRole</code> ç­‰çº§å¤§äºå·²æœ‰ BeanDefinition æ—¶ï¼Œ è¯´æ˜è¿™ç§æƒ…å†µæ˜¯æ¡†æ¶çº§ Bean è¦†ç›–ç”¨æˆ·çº§ Beanã€‚</p>
<p>éšåæ¯”è¾ƒä¸¤ä¸ª BeanDefinitionï¼Œå½“äºŒè€…ä¸ç›¸ç­‰æ—¶ï¼Œè¯´æ˜è¯¥è¦†ç›–æ“ä½œæ˜¯æ–°çš„ BeanDefinition è¦†ç›–æ—§çš„ BeanDefinitionã€‚</p>
<p>æœ€åï¼Œå¦‚æœéƒ½ä¸ç¬¦åˆï¼Œè¯´æ˜æ–°ä¼ å…¥çš„ BeanDefinition å’Œç°æœ‰çš„ BeanDefinition å®é™…ä¸Šæ˜¯åŒä¸€ä¸ª <code>@Component</code> ç±»çš„é‡å¤æ‰«æã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (existingDefinition != <span class="hljs-literal">null</span>) {
   <span class="hljs-keyword">if</span> (!isAllowBeanDefinitionOverriding()) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanDefinitionOverrideException</span>(beanName, beanDefinition, existingDefinition);
   }
   <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (existingDefinition.getRole() &lt; beanDefinition.getRole()) {
      <span class="hljs-comment">// e.g. was ROLE_APPLICATION, now overriding with ROLE_SUPPORT or ROLE_INFRASTRUCTURE</span>
      <span class="hljs-keyword">if</span> (logger.isInfoEnabled()) {
         logger.info(<span class="hljs-string">"Overriding user-defined bean definition for bean '"</span> + beanName +
               <span class="hljs-string">"' with a framework-generated bean definition: replacing ["</span> +
               existingDefinition + <span class="hljs-string">"] with ["</span> + beanDefinition + <span class="hljs-string">"]"</span>);
      }
   }
   <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!beanDefinition.equals(existingDefinition)) {
      <span class="hljs-keyword">if</span> (logger.isDebugEnabled()) {
         logger.debug(<span class="hljs-string">"Overriding bean definition for bean '"</span> + beanName +
               <span class="hljs-string">"' with a different definition: replacing ["</span> + existingDefinition +
               <span class="hljs-string">"] with ["</span> + beanDefinition + <span class="hljs-string">"]"</span>);
      }
   }
   <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">if</span> (logger.isTraceEnabled()) {
         logger.trace(<span class="hljs-string">"Overriding bean definition for bean '"</span> + beanName +
               <span class="hljs-string">"' with an equivalent definition: replacing ["</span> + existingDefinition +
               <span class="hljs-string">"] with ["</span> + beanDefinition + <span class="hljs-string">"]"</span>);
      }
   }
   <span class="hljs-built_in">this</span>.beanDefinitionMap.put(beanName, beanDefinition);
}
</code></pre>
<h4 data-id="heading-22">BeanDefinition ä¸å­˜åœ¨</h4>
<p>å¦‚æœ BeanDefinition ç›®å‰ä¸å­˜åœ¨ï¼Œåˆ™åº”åˆ›å»ºå¯¹åº”çš„ BeanDefinitionã€‚<code>hasBeanCreationStarted()</code> æ–¹æ³•è¡¨æ˜å®¹å™¨æ˜¯å¦å·²ç»å¼€å§‹åˆ›å»º Beanã€‚æ ¹æ®è¯¥æ–¹æ³•è¿”å›å€¼ï¼Œåˆ›å»ºè¿‡ç¨‹åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š</p>
<p>è‹¥ <code>hasBeanCreationStarted()</code> æ–¹æ³•è¿”å›å€¼ä¸º <code>true</code>ï¼Œè¯´æ˜å®¹å™¨æ­£åœ¨æ‰§è¡Œ <code>refresh()</code>ï¼Œè¯¥è¿‡ç¨‹ä¸­å·²ç»å¼€å§‹å®ä¾‹åŒ– Beanï¼Œåœ¨å®ä¾‹åŒ–è¿‡ç¨‹ä¸­ï¼Œå®¹å™¨å†…éƒ¨çš„æ•°æ®ç»“æ„å¯èƒ½è¢«é¢‘ç¹éå†ï¼Œåœ¨éå†è¿‡ç¨‹ä¸­ä¿®æ”¹å®ƒä»¬å¯èƒ½å¯¼è‡´ <code>ConcurrentModificationException</code> æˆ– Bean åˆ›å»ºé€»è¾‘çŠ¶æ€ä¸ä¸€è‡´ã€‚æ‰€ä»¥é€šè¿‡åŠ  <code>synchronized</code> é”çš„æ–¹å¼ä¿éšœçº¿ç¨‹å®‰å…¨ï¼Œå¹¶é‡‡ç”¨ <code>Copy-on-write</code> æ€æƒ³å¯¹ <code>beanDefinitionNames</code> æ‰§è¡Œä¿®æ”¹ã€‚</p>
<p>æœ€åï¼Œè°ƒç”¨ <code>removeManualSingletonName()</code> æ–¹æ³•ä»æ‰‹åŠ¨æ³¨å†Œå•ä¾‹åç§°é›†åˆä¸­ç§»é™¤åŒå beanNameã€‚Spring ä¸­å­˜åœ¨ä¸€ä¸ª Set é›†åˆç”¨äºç®¡ç†æ‰‹åŠ¨æ³¨å†Œçš„å•ä¾‹ Bean åç§°ã€‚åœ¨æ³¨å†Œ BeanDefinition æ—¶ï¼Œå¦‚æœå¯¹åº” beanName é€šè¿‡ <code>registerSingleton()</code> æ‰‹åŠ¨æ³¨å†Œè¿‡ï¼Œé¿å… BeanDefinition æ³¨å†Œæœºåˆ¶ä¸æ‰‹åŠ¨æ³¨å†Œæœºåˆ¶å‘ç”Ÿå†²çªï¼Œå¯¼è‡´åç»­æµç¨‹ä¸­ç»§ç»­å°†è¯¥ beanName è§†ä¸ºæ‰‹åŠ¨å•ä¾‹ï¼ŒSpring ä¼šåœ¨æ‰‹åŠ¨å•ä¾‹åç§°é›†åˆä¸­ç§»é™¤è¯¥è®°å½•ã€‚ä½†å¯¹åº”å®é™…æ‰‹åŠ¨æ³¨å†Œå•ä¾‹å¯¹è±¡ä»å­˜å‚¨åœ¨ <code>singletonObjects</code> ä¸­ï¼Œä¸ä¼šå› é›†åˆä¸­ BeanName çš„åˆ é™¤è€Œç§»é™¤ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (hasBeanCreationStarted()) {
   <span class="hljs-comment">// Cannot modify startup-time collection elements anymore (for stable iteration)</span>
   <span class="hljs-keyword">synchronized</span> (<span class="hljs-built_in">this</span>.beanDefinitionMap) {
      <span class="hljs-built_in">this</span>.beanDefinitionMap.put(beanName, beanDefinition);
      List&lt;String&gt; updatedDefinitions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(<span class="hljs-built_in">this</span>.beanDefinitionNames.size() + <span class="hljs-number">1</span>);
      updatedDefinitions.addAll(<span class="hljs-built_in">this</span>.beanDefinitionNames);
      updatedDefinitions.add(beanName);
      <span class="hljs-built_in">this</span>.beanDefinitionNames = updatedDefinitions;
      removeManualSingletonName(beanName);
   }
}
</code></pre>
<p>å¦‚æœ <code>hasBeanCreationStarted()</code> æ–¹æ³•è¿”å›å€¼ä¸º <code>false</code>ï¼Œè¯´æ˜å®¹å™¨å°šæœªå¼€å§‹å®ä¾‹åŒ– Beanï¼Œæ•°æ®ç»“æ„ä¸éœ€è¦é”ä¿æŠ¤ï¼Œä¹Ÿä¸å­˜åœ¨éå†å†²çªï¼Œå¯ä»¥ç›´æ¥ä¿®æ”¹ Map å’Œ Listã€‚åŒç†ï¼Œéœ€è¦è°ƒç”¨ <code>removeManualSingletonName()</code> ç§»é™¤æ‰‹åŠ¨å•ä¾‹åç§°ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">else</span> {
   <span class="hljs-comment">// Still in startup registration phase</span>
   <span class="hljs-built_in">this</span>.beanDefinitionMap.put(beanName, beanDefinition);
   <span class="hljs-built_in">this</span>.beanDefinitionNames.add(beanName);
   removeManualSingletonName(beanName);
}
</code></pre>
<p>æœ€åï¼Œæ— è®ºæ˜¯å¦å·²ç»å¼€å§‹å®ä¾‹åŒ– Beanï¼Œæœ€åéƒ½è¦æ¸…ç©º <code>frozenBeanDefinitionNames</code>ï¼Œæ‰“ç ´å†»ç»“çŠ¶æ€ã€‚è¿™æ˜¯å› ä¸º Spring åœ¨æŸäº›é˜¶æ®µä¼šâ€œå†»ç»“é…ç½®â€ï¼Œä»¥åŠ é€ŸæŒ‰ç±»å‹æŸ¥æ‰¾ã€‚ä¸€æ—¦æ–°å¢ <code>BeanDefinition</code>ï¼Œå¿…é¡»å–æ¶ˆå†»ç»“ï¼Œå¦åˆ™ç¼“å­˜å¤±æ•ˆã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-built_in">this</span>.frozenBeanDefinitionNames = <span class="hljs-literal">null</span>;
</code></pre>
<h3 data-id="heading-23">ç¼“å­˜åˆ·æ–°</h3>
<p>å¦‚æœå½“å‰ BeanDefinition è¦†ç›–å·²æœ‰å®šä¹‰æˆ–ä¹‹å‰å·²ç»å­˜åœ¨åŒåæ‰‹åŠ¨æ³¨å†Œå•ä¾‹æ—¶ï¼Œè°ƒç”¨ <code>resetBeanDefinition()</code> æ–¹æ³•æ¸…ç†æ‰€æœ‰ä¾èµ–äºæ—§å®šä¹‰ä¿¡æ¯çš„ç¼“å­˜ï¼Œç¡®ä¿å®¹å™¨ä¹‹ååŸºäºæœ€æ–°å®šä¹‰è¡Œä¸ºæ‰§è¡Œã€‚</p>
<p>è‹¥å®¹å™¨é…ç½®å·²è¢«å†»ç»“ï¼ˆé€šå¸¸å‘ç”Ÿåœ¨ refresh é˜¶æ®µä¹‹åï¼‰ï¼Œæ–°å¢ BeanDefinition å¯èƒ½å¯¼è‡´æŒ‰ç±»å‹æŸ¥æ‰¾ç¼“å­˜å¤±æ•ˆï¼Œæ­¤æ—¶é€šè¿‡ <code>clearByTypeCache()</code> æ–¹æ³•æ¸…é™¤ç±»å‹ç¼“å­˜ï¼Œä¿æŒæ£€ç´¢ç»“æœçš„å‡†ç¡®æ€§ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (existingDefinition != <span class="hljs-literal">null</span> || containsSingleton(beanName)) {
   resetBeanDefinition(beanName);
}
<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isConfigurationFrozen()) {
   clearByTypeCache();
}
</code></pre>
<h2 data-id="heading-24">Beanå®ä¾‹åŒ–</h2>
<h3 data-id="heading-25">refresh() å®ä¾‹åŒ– Bean</h3>
<p>é€šè¿‡è°ƒç”¨ <code>context.refresh()</code> åˆ·æ–°å®¹å™¨ï¼Œä½¿æ³¨å†Œå¥½çš„ BeanDefinition èƒ½å¤Ÿè¢«å®ä¾‹åŒ–ä¸º Bean å¹¶ä½¿ç”¨ã€‚åœ¨è¯¥æ–¹æ³•ä¸­ï¼Œé€šè¿‡è°ƒç”¨ <code>finishBeanFactoryInitialization()</code> æ–¹æ³•å®Œæˆéæ‡’åŠ è½½ Bean çš„å®ä¾‹åŒ–ã€‚<code>refresh()</code> çš„ç›¸å…³ä»£ç ï¼ˆç¼©ç•¥ç‰ˆï¼‰å¦‚ä¸‹ï¼Œä¸»è¦å…³å¿ƒ <code>finishBeanFactoryInitialization()</code> æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">refresh</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> BeansException, IllegalStateException {
    <span class="hljs-keyword">synchronized</span> (<span class="hljs-built_in">this</span>.startupShutdownMonitor) {
        <span class="hljs-comment">// ...ï¼ˆä¸Šä¸‹æ–‡åˆ·æ–°å‡†å¤‡å·¥ä½œï¼‰</span>
        <span class="hljs-comment">// ...ï¼ˆåˆ›å»º / åˆ·æ–° BeanFactoryï¼‰</span>
        <span class="hljs-type">ConfigurableListableBeanFactory</span> <span class="hljs-variable">beanFactory</span> <span class="hljs-operator">=</span> obtainFreshBeanFactory();

        <span class="hljs-comment">// ...ï¼ˆä¸º BeanFactory è®¾ç½®æ ‡å‡†é…ç½®ï¼‰</span>
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ...ï¼ˆå­ç±»å¯æ‰©å±• BeanFactoryï¼‰</span>
            <span class="hljs-comment">// ...ï¼ˆæ‰§è¡Œ BeanFactoryPostProcessorï¼‰</span>
            <span class="hljs-comment">// ...ï¼ˆæ³¨å†Œ BeanPostProcessorï¼‰</span>
            <span class="hljs-comment">// ...ï¼ˆåˆå§‹åŒ–æ¶ˆæ¯æºï¼‰</span>
            <span class="hljs-comment">// ...ï¼ˆåˆå§‹åŒ–äº‹ä»¶å¹¿æ’­å™¨ï¼‰</span>
            <span class="hljs-comment">// ...ï¼ˆå­ç±»é¢å¤–çš„ç‰¹æ®Šåˆå§‹åŒ–ï¼‰</span>
            <span class="hljs-comment">// ...ï¼ˆæ³¨å†Œç›‘å¬å™¨ï¼‰</span>

            <span class="hljs-comment">// å®ä¾‹åŒ–æ‰€æœ‰éæ‡’åŠ è½½å•ä¾‹ Bean</span>
            finishBeanFactoryInitialization(beanFactory);

            <span class="hljs-comment">// ...ï¼ˆå‘å¸ƒ ContextRefreshedEventï¼‰</span>
        }
        <span class="hljs-keyword">catch</span> (BeansException ex) {
            <span class="hljs-comment">// ...ï¼ˆå¼‚å¸¸å¤„ç†ï¼šé”€æ¯å·²åˆ›å»ºå•ä¾‹ã€æ¢å¤å®¹å™¨çŠ¶æ€ï¼‰</span>
            <span class="hljs-keyword">throw</span> ex;
        }
        <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// ...ï¼ˆæ¸…ç†ç¼“å­˜ï¼‰</span>
        }
    }
}
</code></pre>
<h3 data-id="heading-26">finishBeanFactoryInitialization() æ–¹æ³•è§£æ</h3>
<p><code>finishBeanFactoryInitialization()</code> æ–¹æ³•çš„ç›¸å…³ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">finishBeanFactoryInitialization</span><span class="hljs-params">(ConfigurableListableBeanFactory beanFactory)</span> {
   <span class="hljs-comment">// Initialize conversion service for this context.</span>
   <span class="hljs-keyword">if</span> (beanFactory.containsBean(CONVERSION_SERVICE_BEAN_NAME) &amp;&amp;
         beanFactory.isTypeMatch(CONVERSION_SERVICE_BEAN_NAME, ConversionService.class)) {
      beanFactory.setConversionService(
            beanFactory.getBean(CONVERSION_SERVICE_BEAN_NAME, ConversionService.class));
   }

   <span class="hljs-comment">// Register a default embedded value resolver if no BeanFactoryPostProcessor</span>
   <span class="hljs-comment">// (such as a PropertySourcesPlaceholderConfigurer bean) registered any before:</span>
   <span class="hljs-comment">// at this point, primarily for resolution in annotation attribute values.</span>
   <span class="hljs-keyword">if</span> (!beanFactory.hasEmbeddedValueResolver()) {
      beanFactory.addEmbeddedValueResolver(strVal -&gt; getEnvironment().resolvePlaceholders(strVal));
   }

   <span class="hljs-comment">// Initialize LoadTimeWeaverAware beans early to allow for registering their transformers early.</span>
   String[] weaverAwareNames = beanFactory.getBeanNamesForType(LoadTimeWeaverAware.class, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>);
   <span class="hljs-keyword">for</span> (String weaverAwareName : weaverAwareNames) {
      getBean(weaverAwareName);
   }

   <span class="hljs-comment">// Stop using the temporary ClassLoader for type matching.</span>
   beanFactory.setTempClassLoader(<span class="hljs-literal">null</span>);

   <span class="hljs-comment">// Allow for caching all bean definition metadata, not expecting further changes.</span>
   beanFactory.freezeConfiguration();

   <span class="hljs-comment">// Instantiate all remaining (non-lazy-init) singletons.</span>
   beanFactory.preInstantiateSingletons();
}
</code></pre>
<h4 data-id="heading-27">åˆå§‹åŒ–å…¨å±€ ConversionService</h4>
<p>åœ¨ <code>finishBeanFactoryInitialization()</code> æ–¹æ³•ä¸­ï¼Œé¦–å…ˆé€šè¿‡ <code>containsBean()</code>æ–¹æ³•æ£€æµ‹å®¹å™¨ä¸­æ˜¯å¦è‡ªå®šä¹‰äº†åä¸º <code>conversionService</code> çš„ Beanï¼Œè¯¥ Bean çš„ä½œç”¨æ˜¯è´Ÿè´£æ³¨å…¥è¿‡ç¨‹ä¸­çš„ç±»å‹è½¬æ¢ã€‚å¦‚æœå­˜åœ¨ï¼Œåˆ™å°†è¯¥ Bean è®¾ç½®ä¸ºå®¹å™¨çš„å…¨å±€ç±»å‹è½¬æ¢æœåŠ¡ï¼Œç¡®ä¿åç»­ Bean åˆ›å»ºä¸å±æ€§æ³¨å…¥è¿‡ç¨‹èƒ½æ­£ç¡®æ‰§è¡Œç±»å‹è½¬æ¢ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Initialize conversion service for this context.</span>
<span class="hljs-keyword">if</span> (beanFactory.containsBean(CONVERSION_SERVICE_BEAN_NAME) &amp;&amp; beanFactory.isTypeMatch(CONVERSION_SERVICE_BEAN_NAME, ConversionService.class)) {
      beanFactory.setConversionService(beanFactory.getBean(CONVERSION_SERVICE_BEAN_NAME, ConversionService.class));
}
</code></pre>
<h4 data-id="heading-28">æ³¨å†Œå ä½ç¬¦è§£æå™¨</h4>
<p>å…¶æ¬¡ï¼Œå¦‚æœå®¹å™¨ä¸­è¿˜æ²¡æœ‰å ä½ç¬¦è§£æå™¨ <code>EmbeddedValueResolver</code>ï¼Œåˆ™æ³¨å†Œä¸€ä¸ªé»˜è®¤çš„è§£æå™¨ï¼Œç”¨äºè§£æå­—ç¬¦ä¸²ä¸­çš„ <code>${...}</code> å ä½ç¬¦ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Register a default embedded value resolver if no BeanFactoryPostProcessor</span>
<span class="hljs-comment">// (such as a PropertySourcesPlaceholderConfigurer bean) registered any before:</span>
<span class="hljs-comment">// at this point, primarily for resolution in annotation attribute values.</span>
<span class="hljs-keyword">if</span> (!beanFactory.hasEmbeddedValueResolver()) {
   beanFactory.addEmbeddedValueResolver(strVal -&gt; getEnvironment().resolvePlaceholders(strVal));
}
</code></pre>
<h4 data-id="heading-29">æå‰å®ä¾‹åŒ– LoadTimeWeaverAware</h4>
<p>æå‰å®ä¾‹åŒ–æ‰€æœ‰å®ç°äº† <code>LoadTimeWeaverAware</code> æ¥å£çš„ Beanï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿå°½æ—©å‘ JVM æ³¨å†Œ <code>ClassFileTransformer</code>ï¼Œç”¨äºç±»åŠ è½½æœŸå¢å¼ºï¼ˆLoad-Time Weavingï¼ŒLTWï¼‰ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Initialize LoadTimeWeaverAware beans early to allow for registering their transformers early.</span>
String[] weaverAwareNames = beanFactory.getBeanNamesForType(LoadTimeWeaverAware.class, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>);
<span class="hljs-keyword">for</span> (String weaverAwareName : weaverAwareNames) {
   getBean(weaverAwareName);
}
</code></pre>
<h4 data-id="heading-30">åœæ­¢ä¸´æ—¶ç±»åŠ è½½å™¨å¹¶å†»ç»“ BeanDefinition é…ç½®</h4>
<p>éšåï¼Œåœæ­¢ä½¿ç”¨ä¸´æ—¶ç±»åŠ è½½å™¨å¹¶å†»ç»“ BeanDefinition é…ç½®ï¼Œç¦æ­¢å®¹å™¨åç»­å†ä¿®æ”¹å®šä¹‰ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Stop using the temporary ClassLoader for type matching.</span>
beanFactory.setTempClassLoader(<span class="hljs-literal">null</span>);

<span class="hljs-comment">// Allow for caching all bean definition metadata, not expecting further changes.</span>
beanFactory.freezeConfiguration();
</code></pre>
<p>æœ€åä½¿ç”¨ <code>preInstantiateSingleton()</code> å®ä¾‹åŒ–æ‰€æœ‰éå»¶è¿ŸåŠ è½½çš„å•ä¾‹ Beanã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Instantiate all remaining (non-lazy-init) singletons.</span>
beanFactory.preInstantiateSingletons();
</code></pre>
<h3 data-id="heading-31">éæ‡’åŠ è½½å•ä¾‹å®ä¾‹åŒ–æµç¨‹</h3>
<p><code>beanFactory.preInstantiateSingletons()</code> çš„è°ƒç”¨å®Œæˆäº† bean çš„å®ä¾‹åŒ–ï¼Œå…¶å®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">preInstantiateSingletons</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> BeansException {
   <span class="hljs-keyword">if</span> (logger.isTraceEnabled()) {
      logger.trace(<span class="hljs-string">"Pre-instantiating singletons in "</span> + <span class="hljs-built_in">this</span>);
   }

   <span class="hljs-comment">// Iterate over a copy to allow for init methods which in turn register new bean definitions.</span>
   <span class="hljs-comment">// While this may not be part of the regular factory bootstrap, it does otherwise work fine.</span>
   List&lt;String&gt; beanNames = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(<span class="hljs-built_in">this</span>.beanDefinitionNames);

   <span class="hljs-comment">// Trigger initialization of all non-lazy singleton beans...</span>
   <span class="hljs-keyword">for</span> (String beanName : beanNames) {
      <span class="hljs-type">RootBeanDefinition</span> <span class="hljs-variable">bd</span> <span class="hljs-operator">=</span> getMergedLocalBeanDefinition(beanName);
      <span class="hljs-keyword">if</span> (!bd.isAbstract() &amp;&amp; bd.isSingleton() &amp;&amp; !bd.isLazyInit()) {
         <span class="hljs-keyword">if</span> (isFactoryBean(beanName)) {
            <span class="hljs-type">Object</span> <span class="hljs-variable">bean</span> <span class="hljs-operator">=</span> getBean(FACTORY_BEAN_PREFIX + beanName);
            <span class="hljs-keyword">if</span> (bean <span class="hljs-keyword">instanceof</span> FactoryBean) {
               FactoryBean&lt;?&gt; factory = (FactoryBean&lt;?&gt;) bean;
               <span class="hljs-type">boolean</span> isEagerInit;
               <span class="hljs-keyword">if</span> (System.getSecurityManager() != <span class="hljs-literal">null</span> &amp;&amp; factory <span class="hljs-keyword">instanceof</span> SmartFactoryBean) {
                  isEagerInit = AccessController.doPrivileged(
                        (PrivilegedAction&lt;Boolean&gt;) ((SmartFactoryBean&lt;?&gt;) factory)::isEagerInit,
                        getAccessControlContext());
               }
               <span class="hljs-keyword">else</span> {
                  isEagerInit = (factory <span class="hljs-keyword">instanceof</span> SmartFactoryBean &amp;&amp;
                        ((SmartFactoryBean&lt;?&gt;) factory).isEagerInit());
               }
               <span class="hljs-keyword">if</span> (isEagerInit) {
                  getBean(beanName);
               }
            }
         }
         <span class="hljs-keyword">else</span> {
            getBean(beanName);
         }
      }
   }

   <span class="hljs-comment">// Trigger post-initialization callback for all applicable beans...</span>
   <span class="hljs-keyword">for</span> (String beanName : beanNames) {
      <span class="hljs-type">Object</span> <span class="hljs-variable">singletonInstance</span> <span class="hljs-operator">=</span> getSingleton(beanName);
      <span class="hljs-keyword">if</span> (singletonInstance <span class="hljs-keyword">instanceof</span> SmartInitializingSingleton) {
         <span class="hljs-type">StartupStep</span> <span class="hljs-variable">smartInitialize</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.getApplicationStartup().start(<span class="hljs-string">"spring.beans.smart-initialize"</span>)
               .tag(<span class="hljs-string">"beanName"</span>, beanName);
         <span class="hljs-type">SmartInitializingSingleton</span> <span class="hljs-variable">smartSingleton</span> <span class="hljs-operator">=</span> (SmartInitializingSingleton) singletonInstance;
         <span class="hljs-keyword">if</span> (System.getSecurityManager() != <span class="hljs-literal">null</span>) {
            AccessController.doPrivileged((PrivilegedAction&lt;Object&gt;) () -&gt; {
               smartSingleton.afterSingletonsInstantiated();
               <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }, getAccessControlContext());
         }
         <span class="hljs-keyword">else</span> {
            smartSingleton.afterSingletonsInstantiated();
         }
         smartInitialize.end();
      }
   }
}
</code></pre>
<h4 data-id="heading-32">è·å–å¹¶éå† beanDefinitionNames</h4>
<p>é¦–å…ˆè·å–å½“å‰å­˜åœ¨çš„ <code>beanDefinitionNames</code>, å¹¶éå†é›†åˆå†…å®¹ã€‚åœ¨é›†åˆä¸­ï¼Œæ ¹æ® beanName è·å–å¯¹åº”çš„ BeanDefinition å¹¶å¯¹å…¶è¿›è¡Œå¤„ç†ã€‚</p>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; beanNames = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(<span class="hljs-built_in">this</span>.beanDefinitionNames);
<span class="hljs-keyword">for</span> (String beanName : beanNames) {
    <span class="hljs-type">RootBeanDefinition</span> <span class="hljs-variable">bd</span> <span class="hljs-operator">=</span> getMergedLocalBeanDefinition(beanName);
</code></pre>
<p>åˆ¤æ–­è¯¥ BeanDefinition æ˜¯å¦å…è®¸åœ¨éæ‡’åŠ è½½ç¯èŠ‚ä½œä¸ºå•ä¾‹ Bean è¢«åˆ›å»ºï¼Œèƒ½å¤Ÿè¢«åˆ›å»ºçš„æ¡ä»¶æ˜¯ç±»ä¸ä¸ºæŠ½è±¡ç±»ä¸”ä¸ºå•ä¾‹æ¨¡å¼ä¸”ä¸æ˜¯æ‡’åŠ è½½ã€‚å¦‚æœç¬¦åˆæ¡ä»¶ï¼Œåˆ™å®ä¾‹åŒ–è¯¥ Beanï¼Œå¦åˆ™ç›´æ¥è·³è¿‡è¯¥ BeanDefinitionã€‚</p>
<p>å½“ç¡®å®šè¯¥ BeanDefinition ç¬¦åˆå®ä¾‹åŒ–æ¡ä»¶åï¼Œè¿˜éœ€è¦è¿›è¡Œæ˜¯å¦ FactoryBean çš„åˆ¤æ–­ã€‚FactoryBean æ˜¯ Spring ä¸­ä¸€ä¸ªç‰¹æ®Šç±»å‹çš„ Beanï¼Œå…¶æœ¬èº«å°±æ˜¯ä¸€ä¸ª Beanï¼ŒåŒæ—¶æ‰§è¡Œå…¶ <code>getObject()</code> æ–¹æ³•è¿˜å¯ä»¥è·å–å¯¹åº”äº§å“ Beanã€‚å¦‚æœæ˜¯ FactoryBeanï¼Œåˆ™é€šè¿‡æ·»åŠ å‰ç¼€åæ‰§è¡Œ <code>getBean()</code> æ–¹æ³•è·å– FactoryBean æœ¬èº«ï¼ˆè€Œéäº§å“ Beanï¼‰ï¼Œæœ€åä½¿ç”¨ <code>bean instanceof FactoryBean</code> è¿›è¡Œæ˜¯å¦ä¸º FactoryBean çš„ç¡®è®¤ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (!bd.isAbstract() &amp;&amp; bd.isSingleton() &amp;&amp; !bd.isLazyInit()) {
    <span class="hljs-keyword">if</span> (isFactoryBean(beanName)) {
        <span class="hljs-type">Object</span> <span class="hljs-variable">bean</span> <span class="hljs-operator">=</span> getBean(FACTORY_BEAN_PREFIX + beanName);
        <span class="hljs-keyword">if</span> (bean <span class="hljs-keyword">instanceof</span> FactoryBean) {
</code></pre>
<h4 data-id="heading-33">FactoryBean çš„ç‰¹æ®Šåˆå§‹åŒ–</h4>
<p>åœ¨ Spring çš„é¢„å®ä¾‹åŒ–è¿‡ç¨‹ä¸­ï¼ŒFactoryBean çš„å¤„ç†æ–¹å¼ä¸åŒäºæ™®é€š Beanã€‚Spring ä¼šé¦–å…ˆé€šè¿‡ <code>&amp;beanName</code> è·å– FactoryBean æœ¬ä½“ï¼Œéšåå®šä¹‰ <code>isEagerInit</code> å˜é‡ï¼Œç”¨äºæ ¹æ® FactoryBean ç±»å‹å†³å®šæ˜¯å¦åœ¨å®¹å™¨å¯åŠ¨é˜¶æ®µæå‰åˆ›å»º FactoryBean çš„äº§å“å¯¹è±¡ã€‚</p>
<p>å¦‚æœ JVM å¼€å¯äº† <code>SecurityManager</code>ï¼Œåˆ™ Spring éœ€è¦åœ¨å—æ§æƒé™ä¸‹æ‰§è¡Œ <code>SmartFactoryBean</code> çš„ <code>isEagerInit()</code> æ–¹æ³•ï¼Œæ‰€ä»¥ä½¿ç”¨ <code>AccessController.doPrivileged()</code> åœ¨å—é™æƒé™ç¯å¢ƒä¸­ä»¥å®‰å…¨æ–¹å¼æ‰§è¡Œã€‚</p>
<p>å¦åˆ™ï¼Œå¯¹äºæ™®é€šç¯å¢ƒä¸‹çš„åˆ¤æ–­ï¼Œç›´æ¥åˆ¤æ–­æ˜¯å¦æ˜¯ <code>SmartFactoryBean</code> å¹¶è°ƒç”¨ <code>isEagerInit()</code>ã€‚</p>
<pre><code class="hljs language-java" lang="java">FactoryBean&lt;?&gt; factory = (FactoryBean&lt;?&gt;) bean;
<span class="hljs-type">boolean</span> isEagerInit;
<span class="hljs-keyword">if</span> (System.getSecurityManager() != <span class="hljs-literal">null</span> &amp;&amp; factory <span class="hljs-keyword">instanceof</span> SmartFactoryBean) {
    isEagerInit = AccessController.doPrivileged(
        (PrivilegedAction&lt;Boolean&gt;) ((SmartFactoryBean&lt;?&gt;) factory)::isEagerInit,
        getAccessControlContext());
}
<span class="hljs-keyword">else</span> {
    isEagerInit = (factory <span class="hljs-keyword">instanceof</span> SmartFactoryBean &amp;&amp;
                   ((SmartFactoryBean&lt;?&gt;) factory).isEagerInit());
}
<span class="hljs-keyword">if</span> (isEagerInit) {
    getBean(beanName);
}
</code></pre>
<h4 data-id="heading-34">æ™®é€šåˆå§‹åŒ–</h4>
<p>é€šè¿‡ <code>getBean()</code> æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–ã€‚Spring ä¸­ï¼Œ<code>getBean()</code> æ–¹æ³•ä¸ä»…è´Ÿè´£è¿”å› Bean å®ä¾‹ï¼Œå½“ BeanDefinition å·²å­˜åœ¨ã€ç›®æ ‡ Bean å°šæœªå®ä¾‹åŒ–ï¼Œå®ƒä¹Ÿä¼šè§¦å‘ Bean çš„å®ä¾‹åŒ–æµç¨‹ã€‚</p>
<h4 data-id="heading-35">å›è°ƒSmartInitializingSingleton</h4>
<p>åœ¨å®¹å™¨ä¸­æ‰€æœ‰éæ‡’åŠ è½½å•ä¾‹ Bean éƒ½å·²ç»å®Œæˆåˆ›å»ºä¹‹åï¼Œå†æ¬¡ç»Ÿä¸€å›è°ƒå®ç°äº† <code>SmartInitializingSingleton</code> æ¥å£çš„ Beanï¼Œè®©å®ƒä»¬æ‰§è¡Œæ¥å£ä¸­å£°æ˜çš„ <code>afterSingletonsInstantiated()</code> é€»è¾‘ã€‚ç”±äºä¸ Bean å®ä¾‹åŒ–å…³ç³»æœ‰é™ï¼Œåœ¨æ­¤ä¸ä½œè¯¦ç»†è¯´æ˜ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Trigger post-initialization callback for all applicable beans...</span>
<span class="hljs-keyword">for</span> (String beanName : beanNames) {
    <span class="hljs-type">Object</span> <span class="hljs-variable">singletonInstance</span> <span class="hljs-operator">=</span> getSingleton(beanName);
    <span class="hljs-keyword">if</span> (singletonInstance <span class="hljs-keyword">instanceof</span> SmartInitializingSingleton) {
        <span class="hljs-type">StartupStep</span> <span class="hljs-variable">smartInitialize</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.getApplicationStartup().start(<span class="hljs-string">"spring.beans.smart-initialize"</span>)
            .tag(<span class="hljs-string">"beanName"</span>, beanName);
        <span class="hljs-type">SmartInitializingSingleton</span> <span class="hljs-variable">smartSingleton</span> <span class="hljs-operator">=</span> (SmartInitializingSingleton) singletonInstance;
        <span class="hljs-keyword">if</span> (System.getSecurityManager() != <span class="hljs-literal">null</span>) {
            AccessController.doPrivileged((PrivilegedAction&lt;Object&gt;) () -&gt; {
                smartSingleton.afterSingletonsInstantiated();
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }, getAccessControlContext());
        }
        <span class="hljs-keyword">else</span> {
            smartSingleton.afterSingletonsInstantiated();
        }
        smartInitialize.end();
    }
}
</code></pre>
<h2 data-id="heading-36">Bean åˆ›å»ºæ ¸å¿ƒæµç¨‹</h2>
<p><code>getBean()</code> æ–¹æ³•æ˜¯ Bean åˆ›å»ºæ ¸å¿ƒæµç¨‹çš„æ ¸å¿ƒï¼Œè€Œè¯¥æ–¹æ³•çš„å…³é”®æ­¥éª¤æ˜¯ <code>doGetBean()</code> æ–¹æ³•ã€‚</p>
<h3 data-id="heading-37">doGetBean æ–¹æ³•æ¦‚è§ˆ</h3>
<p>å¯¹äº <code>doGetBean()</code> æ–¹æ³•ï¼Œå„éƒ¨åˆ†å®ç°å¦‚ä¸‹æ‰€ç¤ºï¼Œæ–¹æ³•ä½“éƒ¨åˆ†ç®€åŒ–ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">protected</span> &lt;T&gt; T <span class="hljs-title function_">doGetBean</span><span class="hljs-params">(String name, <span class="hljs-meta">@Nullable</span> Class&lt;T&gt; requiredType, <span class="hljs-meta">@Nullable</span> Object[] args, <span class="hljs-type">boolean</span> typeCheckOnly)</span> <span class="hljs-keyword">throws</span> BeansException {
    è§„èŒƒåŒ– BeanNameï¼Œå¤„ç†åˆ«åå’Œ FactoryBean å‰ç¼€;
    å¦‚æœå•ä¾‹ç¼“å­˜å‘½ä¸­ä¸”æ— æ„é€ å‚æ•°ï¼Œç›´æ¥ä»¥ç¼“å­˜ Bean ä½œä¸ºæœ€ç»ˆå®ä¾‹ï¼ˆå« FactoryBean äº§å“å¤„ç†ï¼‰;
    å¦åˆ™ {
        åŸå‹ Bean å¾ªç¯ä¾èµ–æ£€æµ‹;
        å¦‚æœè¯¥å®¹å™¨å†…ä¸å«å¯¹åº” BeanDefinition ä¸”å­˜åœ¨çˆ¶å®¹å™¨ï¼Œåˆ™å°è¯•ä»çˆ¶å®¹å™¨ä¸­è·å– Bean å¹¶è¿”å›;
        å¦‚æœä¸æ˜¯ç±»å‹æ£€æŸ¥æ¨¡å¼ï¼Œåˆ™æ ‡è®°è¯¥ Bean å·²è¿›å…¥åˆ›å»ºé˜¶æ®µ;
        è·å–åˆå¹¶åçš„ BeanDefinition;
        è‹¥å­˜åœ¨ä¾èµ– dependsOn ä¾èµ–ï¼Œå…ˆåˆå§‹åŒ–ä¾èµ–çš„ Bean;
        åˆ¤æ–­ä½œç”¨åŸŸ {
            å¦‚æœæ˜¯å•ä¾‹ä½œç”¨åŸŸï¼Œåˆ™ä»å•ä¾‹æ± ä¸­åˆ›å»ºæˆ–è·å– Bean;
            å¦‚æœæ˜¯åŸå‹ä½œç”¨åŸŸï¼Œåˆ™æ¯æ¬¡åˆ›å»ºæ–°çš„ Bean å®ä¾‹;
            å¦‚æœæ˜¯è‡ªå®šä¹‰ä½œç”¨åŸŸï¼Œåˆ™æ ¹æ® Scope è§„åˆ™åˆ›å»ºæˆ–è·å– Bean;
        }
    }
    å°†æœ€ç»ˆå®ä¾‹è½¬æ¢ä¸ºç”¨æˆ·éœ€è¦çš„å¯¹è±¡ï¼ˆå¤„ç† FactoryBean äº§å“ä¸ç±»å‹é€‚é…ï¼‰å¹¶è¿”å›;
}
</code></pre>
<h3 data-id="heading-38">BeanName è§„èŒƒåŒ–</h3>
<p>åœ¨ Spring ä¸­ï¼Œä¸€ä¸ª Bean å¯èƒ½åŒæ—¶æ‹¥æœ‰åˆ«åã€è§„èŒƒåç§°ä»¥åŠç‰¹æ®Šå‰ç¼€ï¼ŒSpring å†…éƒ¨çš„æ•°æ®ç»“æ„å¤§å¤šéƒ½åŸºäºè§„èŒƒ BeanName ä½œä¸º keyã€‚é€šè¿‡ <code>transformedBeanName(name)</code> æ–¹æ³•ï¼Œå°†ä¼ å…¥çš„åç§°ç»Ÿä¸€è½¬ä¸ºå®¹å™¨å†…éƒ¨ä½¿ç”¨çš„æ ‡å‡† BeanNameï¼Œç¡®ä¿åç»­æ“ä½œéƒ½åŸºäºè§„èŒƒ BeanName è¿›è¡Œã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">String</span> <span class="hljs-variable">beanName</span> <span class="hljs-operator">=</span> transformedBeanName(name);
</code></pre>
<h3 data-id="heading-39">å•ä¾‹ç¼“å­˜å¿«é€Ÿè¿”å›</h3>
<p>åœ¨ Spring ä¸­ï¼Œå•ä¾‹ Bean ä¼šåœ¨åˆ›å»ºåè¢«ç¼“å­˜åˆ°ä¸€çº§ç¼“å­˜ <code>singletonObjects</code>ï¼Œä»¥ç¡®ä¿æ•´ä¸ªåº”ç”¨ä¸­åªå­˜åœ¨ä¸€ä¸ªå®ä¾‹ã€‚å› æ­¤ï¼Œå½“è°ƒç”¨ <code>getBean()</code> æ—¶ï¼ŒSpring ä¼šé¦–å…ˆé€šè¿‡ <code>getSingleton(beanName)</code> æ–¹æ³•å°è¯•ä»å•ä¾‹ç¼“å­˜ä¸­è·å–å®ä¾‹ã€‚å¦‚æœ Bean å·²å­˜åœ¨äºå•ä¾‹ç¼“å­˜ä¸­ä¸”æœ¬æ¬¡è·å–ä¸éœ€è¦ä¼ å…¥æ„é€ å‚æ•°ï¼ŒSpring ä¼šç›´æ¥è¿”å›ç¼“å­˜å¯¹è±¡ï¼Œé¿å…é‡å¤å®ä¾‹åŒ–ã€‚</p>
<p>Spring å¯¹ <code>singleton Bean</code> åªä¼šåˆ›å»ºå¹¶ç¼“å­˜ä¸€ä¸ªå®ä¾‹ã€‚ä½†å½“è°ƒç”¨ <code>getBean(beanName, args)</code> ä¸”æ˜¾å¼ä¼ å…¥æ„é€ å‚æ•°æ—¶ï¼ŒSpring æ— æ³•ä¿è¯è¿™äº›å‚æ•°ä¸å½“å‰å•ä¾‹å®ä¾‹çš„æ„é€ å‚æ•°ä¸€è‡´ï¼Œå› æ­¤ä¸èƒ½å®‰å…¨å¤ç”¨å·²æœ‰å•ä¾‹å®ä¾‹ï¼Œå¿…é¡»å¼ºåˆ¶è¿›å…¥å®Œæ•´åˆ›å»ºæµç¨‹ã€‚å› æ­¤å³ä½¿ç¼“å­˜ä¸­å­˜åœ¨ Beanï¼Œä¹Ÿä¸ä¼šèµ°å•ä¾‹ç¼“å­˜å¿«é€Ÿè¿”å›åˆ†æ”¯ã€‚</p>
<p>ä¸ºç¡®ä¿ä¸åŒç±»å‹ Bean éƒ½èƒ½æ‹¿åˆ°ç¬¦åˆè¯­ä¹‰çš„æœ€ç»ˆ Beanï¼Œå³ä½¿ç¼“å­˜å‘½ä¸­ï¼Œä¹Ÿå¿…é¡»å¯¹å¾—åˆ°çš„å…±äº«å®ä¾‹ <code>sharedInstance</code> è°ƒç”¨ <code>getObjectForBeanInstance()</code> æ–¹æ³•ã€‚è‹¥å…±äº«å®ä¾‹æ˜¯æ™®é€š Beanï¼Œåˆ™ç›´æ¥è¿”å›ï¼›è‹¥å…±äº«å®ä¾‹æ˜¯ FactoryBeanï¼Œåˆ™è¿”å›å…¶äº§å“å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æœ€ç»ˆè¿”å›çš„ Bean å®ä¾‹</span>
Object beanInstance;
<span class="hljs-comment">// Eagerly check singleton cache for manually registered singletons.</span>
<span class="hljs-type">Object</span> <span class="hljs-variable">sharedInstance</span> <span class="hljs-operator">=</span> getSingleton(beanName);
<span class="hljs-keyword">if</span> (sharedInstance != <span class="hljs-literal">null</span> &amp;&amp; args == <span class="hljs-literal">null</span>) {
    ... æ—¥å¿—è¾“å‡º ...
    beanInstance = getObjectForBeanInstance(sharedInstance, name, beanName, <span class="hljs-literal">null</span>);
}
</code></pre>
<h3 data-id="heading-40">åˆ›å»ºæµç¨‹å‰ç½®æ£€æŸ¥</h3>
<h4 data-id="heading-41">åŸå‹ä½œç”¨åŸŸBeanå¾ªç¯ä¾èµ–æ£€æµ‹</h4>
<p>å¯¹äºå•ä¾‹ Bean çš„å¾ªç¯ä¾èµ–æƒ…å†µï¼ŒSpring åŸºäºä¸‰å±‚ç¼“å­˜è¿›è¡Œäº†æ”¯æŒï¼Œé€šè¿‡æå‰æš´éœ²å¯¹è±¡éƒ¨åˆ†æ„é€ çš„æ–¹å¼ç ´é™¤å•ä¾‹ Bean çš„å¾ªç¯ä¾èµ–ã€‚ç„¶è€Œï¼Œ<code>prototype Bean</code> æ¯æ¬¡è°ƒç”¨éƒ½å¿…é¡»è¿”å›å…¨æ–°å®ä¾‹ï¼Œå…¶è¯­ä¹‰ä¸æš´éœ²æ—©æœŸå¯¹è±¡å¹¶ç¼“å­˜çš„ä¸‰çº§ç¼“å­˜æ¨¡å‹å­˜åœ¨æ ¹æœ¬å†²çªï¼Œå› æ­¤ Spring ä¸ä¼šä¹Ÿæ— æ³•ä¸º prototype æä¾›ç±»ä¼¼å•ä¾‹çš„å¾ªç¯ä¾èµ–è§£å†³æœºåˆ¶ã€‚</p>
<p>æ‰€ä»¥ï¼Œä½¿ç”¨ <code>isPrototypeCurrentlyInCreation(beanName)</code> æ–¹æ³•æ£€æµ‹å½“å‰çš„åŸå‹ Bean æ˜¯å¦æ­£åœ¨åˆ›å»ºæµç¨‹ï¼Œå¦‚æœæ­£åœ¨åˆ›å»ºï¼Œåˆ™è®¤ä¸ºå½“å‰çš„åŸå‹ Bean å‡ºç°äº†å¾ªç¯ä¾èµ–ï¼ŒæŠ›å‡º <code>BeanCurrentlyInCreationException</code> ç»ˆæ­¢åˆ›å»ºï¼Œé¿å…æ— é™é€’å½’ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (isPrototypeCurrentlyInCreation(beanName)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanCurrentlyInCreationException</span>(beanName);
}
</code></pre>
<h4 data-id="heading-42">çˆ¶å®¹å™¨å§”æ´¾åŠ è½½</h4>
<p>è‹¥å½“å‰ BeanFactory ä¸­æ²¡æœ‰å®šä¹‰è¯¥ BeanDefinition æ—¶ï¼Œåˆ™å§”æ´¾å…¶çˆ¶ BeanFactory ç»§ç»­æŸ¥æ‰¾å’Œå®ä¾‹åŒ– Beanï¼Œä»¥è§£å†³ Spring é¡¹ç›®å®¹å™¨åµŒå¥—è¿‡ç¨‹ä¸­çš„ Bean å•å‘å¯è§æ€§ï¼Œå³å­å®¹å™¨å¯è®¿é—®çˆ¶å®¹å™¨ä¸­çš„ Beanï¼Œä½†çˆ¶å®¹å™¨ä¸å¯è®¿é—®å­å®¹å™¨ä¸­çš„ Beanã€‚</p>
<p><code>originalBeanName()</code> æ–¹æ³•å†…éƒ¨ä¼šå°†ä¼ å…¥çš„åç§°è½¬ä¸ºè¦æŸ¥æ‰¾çš„è§„èŒƒåç§°ï¼Œè€Œä¸å†ä½¿ç”¨åˆ«åã€‚è¿™ä¸€æ­¥ä¸ BeanName è§„èŒƒåŒ–çš„åŒºåˆ«æ˜¯ï¼šåªä¼šè½¬æ¢åˆ«åï¼Œä¸ä¼šå»é™¤ FactoryBean çš„ç‰¹æ®Šå‰ç¼€ã€‚</p>
<p>å¦‚æœçˆ¶å®¹å™¨æ˜¯ <code>AbstractBeanFactory</code>ï¼Œåˆ™ç›´æ¥é€’å½’è°ƒç”¨ <code>doGetBean()</code> ä¼ å…¥å½“å‰çš„æ‰€æœ‰å‚æ•°è¿›è¡Œå¼ºå§”æ´¾ï¼›å¦‚æœçˆ¶å®¹å™¨ä¸æ˜¯ <code>AbstractBeanFactory</code>ï¼Œåˆ™å¿…é¡»æ ¹æ®å‚æ•°æƒ…å†µï¼ˆå¯¹åº”å‚æ•°æ˜¯å¦å­˜åœ¨ï¼‰é€‰æ‹©åˆé€‚çš„ <code>getBean()</code> é‡è½½ç‰ˆæœ¬ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Check if bean definition exists in this factory.</span>
<span class="hljs-type">BeanFactory</span> <span class="hljs-variable">parentBeanFactory</span> <span class="hljs-operator">=</span> getParentBeanFactory();
<span class="hljs-keyword">if</span> (parentBeanFactory != <span class="hljs-literal">null</span> &amp;&amp; !containsBeanDefinition(beanName)) {
    <span class="hljs-comment">// Not found -&gt; check parent.</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">nameToLookup</span> <span class="hljs-operator">=</span> originalBeanName(name);
    <span class="hljs-keyword">if</span> (parentBeanFactory <span class="hljs-keyword">instanceof</span> AbstractBeanFactory) {
        <span class="hljs-keyword">return</span> ((AbstractBeanFactory) parentBeanFactory).doGetBean(
            nameToLookup, requiredType, args, typeCheckOnly);
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (args != <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// Delegation to parent with explicit args.</span>
        <span class="hljs-keyword">return</span> (T) parentBeanFactory.getBean(nameToLookup, args);
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (requiredType != <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// No args -&gt; delegate to standard getBean method.</span>
        <span class="hljs-keyword">return</span> parentBeanFactory.getBean(nameToLookup, requiredType);
    }
    <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> (T) parentBeanFactory.getBean(nameToLookup);
    }
}
</code></pre>
<h4 data-id="heading-43">æ ‡è®°Beanåˆ›å»ºçŠ¶æ€</h4>
<p><code>typeCheckOnly</code> è¡¨ç¤ºå½“å‰ <code>doGetBean()</code> çš„è°ƒç”¨ç”¨æ¥åœ¨è§£æä¾èµ–æ—¶è¿›è¡Œç±»å‹åŒ¹é…ï¼Œå¹¶æœªçœŸæ­£æ‰“ç®—åˆ›å»º Beanã€‚åªæœ‰å½“æœ¬æ¬¡è°ƒç”¨çš„ç›®çš„ä¸æ˜¯æ£€æŸ¥ç±»å‹æ—¶ï¼Œæ‰ä¼šå°†å½“å‰ Bean æ ‡è®°ä¸º<strong>å·²å¼€å§‹åˆ›å»º</strong>ï¼Œä»¥ä¾¿ Spring åœ¨åç»­æµç¨‹ä¸­è¿›è¡Œå¾ªç¯ä¾èµ–æ£€æµ‹ã€ç”Ÿå‘½å‘¨æœŸç®¡ç†ç­‰ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (!typeCheckOnly) {
    markBeanAsCreated(beanName);
}
</code></pre>
<h3 data-id="heading-44">BeanDefinition åˆå¹¶ä¸éªŒè¯</h3>
<p>Spring ä¸­å­˜åœ¨ä¸‰ç±» BeanDefinitionï¼Œåˆ†åˆ«æ˜¯åŸå§‹ BeanDefinitionã€çˆ¶å­ BeanDefinitionã€æœ€ç»ˆçš„ <code>RootBeanDefinition</code>ã€‚é€šè¿‡ <code>getMergedLocalBeanDefinition()</code> æ–¹æ³•å°†çˆ¶ BeanDefinition ä¸å­ BeanDefinition åˆå¹¶ä¸ºæœ€ç»ˆçš„ <code>RootBeanDefinition</code>ï¼Œå³ Spring åˆ›å»º Bean æ—¶å®é™…ä½¿ç”¨çš„å®Œæ•´ BeanDefinitionã€‚</p>
<p>é€šè¿‡ <code>checkMergedBeanDefinition</code> æ ¡éªŒåˆå¹¶åçš„ BeanDefinition æ˜¯å¦æ»¡è¶³å®ä¾‹åŒ–è¦æ±‚ã€‚åœ¨åˆ›å»ºæµç¨‹ä¸­ï¼Œä¸»è¦ç”¨äºåˆ¤æ–­å½“å‰ BeanDefinition æ˜¯å¦æ˜¯æŠ½è±¡ç±»ï¼Œåªæœ‰åœ¨éæŠ½è±¡ç±»çš„æƒ…å†µä¸‹æ‰èƒ½ç»§ç»­å®ä¾‹åŒ–ï¼Œå¦åˆ™æŠ›å‡º <code>BeanIsAbstractException</code> å¼‚å¸¸ã€‚è¯¥æ–¹æ³•åªæ£€æŸ¥ BeanDefinition æ˜¯å¦ä¸ºæŠ½è±¡å®šä¹‰ï¼Œå› ä¸ºæŠ½è±¡ Bean åœ¨è¯­ä¹‰ä¸Šæ˜ç¡®ç¦æ­¢è¢«å®ä¾‹åŒ–ï¼Œå…¶ä½™é…ç½®åˆæ³•æ€§æ ¡éªŒåœ¨æ³¨å†Œé˜¶æ®µæˆ–å®ä¾‹åŒ–è¿‡ç¨‹ä¸­å®Œæˆã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">RootBeanDefinition</span> <span class="hljs-variable">mbd</span> <span class="hljs-operator">=</span> getMergedLocalBeanDefinition(beanName);
checkMergedBeanDefinition(mbd, beanName, args);
</code></pre>
<h3 data-id="heading-45">ä¾èµ–é¢„åˆå§‹åŒ–</h3>
<p>åœ¨çœŸæ­£åˆå§‹åŒ– Spring Bean ä¹‹å‰ï¼Œéœ€è¦æå‰åˆå§‹åŒ–å½“å‰ Bean çš„ <code>dependsOn</code> ä¾èµ–ï¼Œç¡®ä¿å®ƒä»¬åœ¨å½“å‰ Bean ä¹‹å‰å®Œæˆåˆ›å»ºï¼Œä¸”ä¸ä¼šå‡ºç°å¾ªç¯ä¾èµ–ã€‚<code>dependsOn</code> æ˜¯ä¸€ç§åˆå§‹åŒ–é¡ºåºä¾èµ–ï¼Œç”¨äºæ˜¾å¼å£°æ˜å½“å‰ Bean åœ¨å®ä¾‹åŒ–ä¹‹å‰ï¼Œå¿…é¡»å…ˆå®Œæˆ <code>dependsOn Bean</code> çš„åˆå§‹åŒ–ã€‚è¿™ä¸ <code>@Autowired</code> çš„ä¾èµ–ä¸åŒï¼Œ<code>@Autowired</code> ä¾èµ–åªè´Ÿè´£åœ¨ Bean åˆ›å»ºåè‡ªåŠ¨å¡«å……å¼•ç”¨ï¼Œä¸å½±å“åˆ›å»ºé¡ºåºã€‚</p>
<p>è·å–åˆ°å¯¹åº”çš„ä¾èµ–é¡¹åï¼Œå¯¹ä¾èµ–é¡¹åˆ—è¡¨è¿›è¡Œéå†ã€‚é¦–å…ˆé€šè¿‡ <code>isDependent(beanName, dep)</code> æ–¹æ³•è¿›è¡Œå¾ªç¯ä¾èµ–åˆ¤æ–­ï¼Œå¯¹å¾ªç¯ä¾èµ–çš„æƒ…å†µï¼Œç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œé¿å…æ­»å¾ªç¯å‘ç”Ÿã€‚éšåé€šè¿‡ <code>registerDependentBean()</code> æ³¨å†Œä¾èµ–å…³ç³»ï¼Œç”¨äºæ§åˆ¶é”€æ¯é¡ºåºã€ç®¡ç†ä¾èµ–å…³ç³»ã€è¾…åŠ©æ£€æµ‹å¾ªç¯ä¾èµ–ã€‚å½“é¢„å¤„ç†å®Œæˆåï¼Œè°ƒç”¨ <code>getBean()</code> æ–¹æ³•é¢„å…ˆåˆ›å»º <code>dependsOn</code> çš„ Beanã€‚å¦‚æœä¾èµ– Bean ä¸å­˜åœ¨ï¼Œåˆ™æŠ›å‡ºå¯¹åº”å¼‚å¸¸ã€‚</p>
<pre><code class="hljs language-java" lang="java">String[] dependsOn = mbd.getDependsOn();
<span class="hljs-keyword">if</span> (dependsOn != <span class="hljs-literal">null</span>) {
   <span class="hljs-keyword">for</span> (String dep : dependsOn) {
      <span class="hljs-keyword">if</span> (isDependent(beanName, dep)) {
         <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanCreationException</span>(mbd.getResourceDescription(), beanName,
               <span class="hljs-string">"Circular depends-on relationship between '"</span> + beanName + <span class="hljs-string">"' and '"</span> + dep + <span class="hljs-string">"'"</span>);
      }
      registerDependentBean(dep, beanName);
      <span class="hljs-keyword">try</span> {
         getBean(dep);
      }
      <span class="hljs-keyword">catch</span> (NoSuchBeanDefinitionException ex) {
         <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanCreationException</span>(mbd.getResourceDescription(), beanName,
               <span class="hljs-string">"'"</span> + beanName + <span class="hljs-string">"' depends on missing bean '"</span> + dep + <span class="hljs-string">"'"</span>, ex);
      }
   }
}
</code></pre>
<h3 data-id="heading-46">æ ¹æ®ä½œç”¨åŸŸåˆ›å»ºBeanå®ä¾‹</h3>
<h4 data-id="heading-47">å•ä¾‹ä½œç”¨åŸŸ</h4>
<p>å¦‚æœå½“å‰ Bean ä½œç”¨åŸŸä¸º singletonï¼Œåˆ™ Spring éœ€è¦æŒ‰ç…§å•ä¾‹æ±  + ä¸‰çº§ç¼“å­˜ç­–ç•¥åˆ›å»ºå¯¹è±¡ã€‚åœ¨ <code>getSingleton()</code> æ–¹æ³•ä¸­ï¼Œé¦–å…ˆä¼šæŸ¥ä¸€çº§ç¼“å­˜åˆ¤æ–­æ˜¯å¦å­˜åœ¨ Beanã€‚å¦‚æœè¯¥å•ä¾‹ Bean å­˜åœ¨ï¼Œåˆ™ç›´æ¥è¿”å›å•ä¾‹ Beanï¼›å¦‚æœå•ä¾‹ Bean æ­£åœ¨åˆ›å»ºï¼Œåˆ™ä»äºŒçº§ç¼“å­˜æˆ–ä¸‰çº§ç¼“å­˜è¿”å›æ—©æœŸæš´éœ²å¯¹è±¡æ¥è§£å†³å¾ªç¯ä¾èµ–é—®é¢˜ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™æ‰§è¡Œ <code>createBean()</code> å›è°ƒæ–¹æ³•åˆ›å»ºå¯¹åº”å•ä¾‹ã€‚å¦‚æœåˆ›å»ºå¤±è´¥ï¼Œåˆ™æ¸…ç†ç¼“å­˜ã€‚</p>
<p>æœ€ç»ˆï¼Œä½¿ç”¨ <code>getObjectForBeanInstance()</code> æ–¹æ³•è·å–æœ€ç»ˆ Bean å®ä¾‹ã€‚è¯¥æ–¹æ³•ä¸»è¦æ˜¯ä¸ºäº†å®ç°æ™®é€š Bean å’Œ FactoryBean çš„ç»Ÿä¸€å¤„ç†ï¼Œä¿è¯ FactoryBean è¿”å›å…¶äº§å“ Beanï¼Œåç»­çš„ä½¿ç”¨éƒ½æ˜¯è¿™ä¸ªç›®çš„ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Create bean instance.</span>
<span class="hljs-keyword">if</span> (mbd.isSingleton()) {
   sharedInstance = getSingleton(beanName, () -&gt; {
      <span class="hljs-keyword">try</span> {
         <span class="hljs-keyword">return</span> createBean(beanName, mbd, args);
      }
      <span class="hljs-keyword">catch</span> (BeansException ex) {
         <span class="hljs-comment">// Explicitly remove instance from singleton cache: It might have been put there</span>
         <span class="hljs-comment">// eagerly by the creation process, to allow for circular reference resolution.</span>
         <span class="hljs-comment">// Also remove any beans that received a temporary reference to the bean.</span>
         destroySingleton(beanName);
         <span class="hljs-keyword">throw</span> ex;
      }
   });
   beanInstance = getObjectForBeanInstance(sharedInstance, name, beanName, mbd);
}
</code></pre>
<h4 data-id="heading-48">åŸå‹ä½œç”¨åŸŸ</h4>
<p>å¯¹äºåŸå‹ä½œç”¨åŸŸ Beanï¼Œæ¯æ¬¡è°ƒç”¨ <code>doGetBean()</code> éƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„ Bean å®ä¾‹ã€‚åœ¨ Bean åˆ›å»ºå‰å’Œåˆ›å»ºåï¼Œä¼šåˆ†åˆ«è¿›è¡Œ before å’Œ after æ–¹æ³•å›è°ƒç®¡ç† prototype åˆ›å»ºçŠ¶æ€ï¼Œå¹¶ä½¿ç”¨ <code>createBean()</code> æ–¹æ³•å®Œæˆ Bean çš„åˆ›å»ºã€‚Spring ä¸­é€šè¿‡ ThreadLocal ä¿å­˜ prototype Bean çš„åˆ›å»ºçŠ¶æ€ï¼Œå…¶ä¸­ç»´æŠ¤ä¸€ä¸ª Set é›†åˆï¼Œç”¨äºå­˜å‚¨æ­£åœ¨åˆ›å»ºçš„ prototype Bean çš„ BeanNameï¼Œä¹‹æ‰€ä»¥ä½¿ç”¨ ThreadLocal ï¼ŒåŸå› åœ¨äº prototype Bean çš„åˆ›å»ºçŠ¶æ€åªå¯¹å½“å‰çº¿ç¨‹æœ‰æ•ˆï¼Œè·¨çº¿ç¨‹å…±äº«æ—¢æ²¡æœ‰æ„ä¹‰ï¼Œä¹Ÿä¼šå¼•å…¥é”™è¯¯çš„å¾ªç¯ä¾èµ–åˆ¤æ–­ã€‚</p>
<p><code>beforePrototypeCreation()</code> æ–¹æ³•ç”¨äºæ ‡è®° Bean çŠ¶æ€ä¸ºæ­£åœ¨åˆ›å»ºã€‚ç”±äº prototype ä¸èƒ½é€šè¿‡ä¸‰çº§ç¼“å­˜è§£å†³å¾ªç¯ä¾èµ–é—®é¢˜ï¼Œå› æ­¤å¿…é¡»é€šè¿‡çŠ¶æ€å›è°ƒæ–¹æ³•é˜²æ­¢é€’å½’åˆ›å»ºæ—¶è¿›å…¥æ— é™å¾ªç¯ã€‚<code>afterPrototypeCreation()</code> ç”¨äºä» ThreadLocal ä¸­ç§»é™¤æ­£åœ¨åˆ›å»ºçš„ prototype æ ‡è®°ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (mbd.isPrototype()) {
   <span class="hljs-comment">// It's a prototype -&gt; create a new instance.</span>
   <span class="hljs-type">Object</span> <span class="hljs-variable">prototypeInstance</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
   <span class="hljs-keyword">try</span> {
      beforePrototypeCreation(beanName);
      prototypeInstance = createBean(beanName, mbd, args);
   }
   <span class="hljs-keyword">finally</span> {
      afterPrototypeCreation(beanName);
   }
   beanInstance = getObjectForBeanInstance(prototypeInstance, name, beanName, mbd);
}
</code></pre>
<h4 data-id="heading-49">è‡ªå®šä¹‰ä½œç”¨åŸŸ</h4>
<p>å¯¹äºéå•ä¾‹ä½œç”¨åŸŸæˆ–åŸå‹ä½œç”¨åŸŸçš„ Beanï¼Œæœ€ç»ˆä¼šè¿›å…¥åˆ°è‡ªå®šä¹‰ä½œç”¨åŸŸ Bean çš„åˆ¤å®šé˜¶æ®µã€‚å†…éƒ¨ä¼šé¦–å…ˆåˆ¤æ–­ <code>scopeName</code> çš„åˆæ³•æ€§ï¼ŒåŒ…æ‹¬å½“å‰ <code>scopeName</code> æ˜¯å¦ä¸ºç©ºã€æ˜¯å¦å®šä¹‰äº†å¯¹åº” Scope çš„å®ç°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåœ¨é Web ç¯å¢ƒä¸‹å°è¯•ä½¿ç”¨ session ä½œç”¨åŸŸï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œè¯´æ˜å½“å‰ä½œç”¨åŸŸæœªæ¿€æ´»æˆ–ä¸å­˜åœ¨ï¼Œæ— æ³•è·å–è¯¥ Beanã€‚</p>
<p>åˆ¤å®šå¦‚æœé€šè¿‡ï¼Œåˆ™æ²¿ç”¨ prototype çš„åˆ›å»ºçŠ¶æ€ç®¡ç†æ¨¡å‹ï¼Œä»¥æ£€æµ‹å¾ªç¯ä¾èµ–å¹¶ç»´æŠ¤åˆ›å»ºçŠ¶æ€ã€‚åŒæ—¶ï¼ŒSpring ä¼šå°† Bean çš„åˆ›å»ºä¸ç¼“å­˜ç­–ç•¥å®Œå…¨å§”æ‰˜ç»™å¯¹åº”çš„ <code>Scope</code> å®ç°ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">else</span> {
   <span class="hljs-type">String</span> <span class="hljs-variable">scopeName</span> <span class="hljs-operator">=</span> mbd.getScope();
   <span class="hljs-keyword">if</span> (!StringUtils.hasLength(scopeName)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">"No scope name defined for bean Â´"</span> + beanName + <span class="hljs-string">"'"</span>);
   }
   <span class="hljs-type">Scope</span> <span class="hljs-variable">scope</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.scopes.get(scopeName);
   <span class="hljs-keyword">if</span> (scope == <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">"No Scope registered for scope name '"</span> + scopeName + <span class="hljs-string">"'"</span>);
   }
   <span class="hljs-keyword">try</span> {
      <span class="hljs-type">Object</span> <span class="hljs-variable">scopedInstance</span> <span class="hljs-operator">=</span> scope.get(beanName, () -&gt; {
         beforePrototypeCreation(beanName);
         <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> createBean(beanName, mbd, args);
         }
         <span class="hljs-keyword">finally</span> {
            afterPrototypeCreation(beanName);
         }
      });
      beanInstance = getObjectForBeanInstance(scopedInstance, name, beanName, mbd);
   }
   <span class="hljs-keyword">catch</span> (IllegalStateException ex) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ScopeNotActiveException</span>(beanName, scopeName, ex);
   }
}
</code></pre>
<h3 data-id="heading-50">FactoryBean äº§å“å¯¹è±¡è§£æä¸ç±»å‹é€‚é…</h3>
<p>è·å–åˆ°æœ€ç»ˆçš„ Bean å®ä¾‹åï¼Œå¯¹å·²è·å–çš„ Bean å®ä¾‹è¿›è¡Œæœ€ç»ˆé€‚é…ï¼Œä½¿å…¶æ»¡è¶³è°ƒç”¨æ–¹å¯¹ç±»å‹å’Œè¯­ä¹‰çš„è¦æ±‚ï¼Œç„¶åå®‰å…¨è¿”å›ã€‚å®ƒä¸»è¦è´Ÿè´£æ ¡éªŒ Bean å®ä¾‹æ˜¯å¦æ»¡è¶³ <code>requiredType</code>ï¼Œå¹¶åœ¨å¿…è¦æ—¶æ‰§è¡Œç±»å‹è½¬æ¢ï¼Œå½“ç±»å‹ä¸åŒ¹é…æ—¶ï¼Œç¡®ä¿ä¸è¿”å›é”™è¯¯ Bean å®ä¾‹è€Œæ˜¯ç›´æ¥æŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p>ä¹‹æ‰€ä»¥éœ€è¦ç¡®è®¤å’Œé€‚é… Bean å®ä¾‹ï¼Œæ˜¯å› ä¸º Bean å®ä¾‹çš„åˆ›å»ºæµç¨‹æ˜¯ä¾æ® BeanName å®ç°çš„ã€‚åœ¨å®ç°è¿‡ç¨‹ä¸­ä¸å…³å¿ƒæ˜¯å¦åŒ¹é…ç”¨æˆ·éœ€è¦çš„ç»“æœï¼Œå› æ­¤åœ¨æœ€ç»ˆè¿”å›é˜¶æ®µéœ€è¦å¯¹ Bean å®ä¾‹è¿›è¡Œå¤„ç†ï¼Œç¡®ä¿è¿”å›å¯¹è±¡ç¡®å®å¯ä»¥èµ‹å€¼ç»™æ¥æ”¶æ–¹ï¼Œå¿…è¦æ—¶è¿›è¡Œç±»å‹è½¬æ¢æˆ–æŠ›å‡ºå¼‚å¸¸ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">return</span> adaptBeanInstance(name, beanInstance, requiredType);
</code></pre>
<h2 data-id="heading-51">æµ‹è¯•</h2>
<p>åˆ†åˆ«åœ¨ <code>scanner.scan("com.example.b01");</code> å’Œ <code>context.refresh();</code> æ‰“æ–­ç‚¹ï¼Œè§‚å¯Ÿå®¹å™¨çŠ¶æ€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a818793fecbb41979d1afa887421a79d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LiK55qE56ug6bG854On:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115071&amp;x-signature=ZrDRGt8yTRrGlMU8UuEoiZZ2tVA%3D" alt="image-20251212110450922.png" loading="lazy"/></p>
<p>Debug æ‰§è¡Œã€‚åœ¨ <code>scanner.scan("com.example.b01");</code> æ‰§è¡Œå‰ï¼Œå¯ä»¥çœ‹åˆ° <code>beanDefinitonMap</code> ä¸­åªæœ‰5ä¸ª BeanDefinitionã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ea30e33c56d4448bb247088afb0a18c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LiK55qE56ug6bG854On:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115071&amp;x-signature=Djx6Hl0n8SiGcQU0aWSa4vNtTAU%3D" alt="image-20251212104247355.png" loading="lazy"/></p>
<p>æ‰§è¡Œåï¼Œå¯¹ <code>com.example.b01</code> åŒ…è¿›è¡Œæ‰«æï¼Œ<code>beanDefinitonMap</code> ä¸­åŠ å…¥å¯¹ <code>MyComponent</code> çš„ BeanDefinitionã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d32126c371a488782a71e9600bbb46c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LiK55qE56ug6bG854On:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115071&amp;x-signature=Yr%2F7qIJ9aLfG5916VeRCYEhzNLY%3D" alt="image-20251212110241282.png" loading="lazy"/></p>
<p>åœ¨ <code>scanner.scan()</code> æ–¹æ³•æ‰§è¡Œåï¼Œ<code>refresh()</code> æ‰§è¡Œå‰ï¼Œå¯¹åº” beanFactory ä¸­çš„ <code>singletonObject</code> ä¸ºç©ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8cbc4c21dc084ffb9bf4fe2fdda9010f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LiK55qE56ug6bG854On:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115071&amp;x-signature=wpk663bAFFdw8fEdHI8TL6NWCKI%3D" alt="image.png" loading="lazy"/></p>
<p><code>refresh()</code> æ‰§è¡Œåï¼Œä¸€å…±æœ‰ 14 ä¸ªå•ä¾‹ Bean è¢«å®ä¾‹åŒ–ï¼Œè¿™ 14 ä¸ªå•ä¾‹ Bean æ—¢åŒ…æ‹¬ä¹‹å‰ BeanDefinition çš„å®ä¾‹åŒ–ï¼Œä¹Ÿæœ‰ <code>refresh()</code> æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­é¢å¤–åˆ›å»ºçš„åŸºç¡€è®¾æ–½ Beanã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c04f5ff010b94645bff291523ca7cfa8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LiK55qE56ug6bG854On:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115071&amp;x-signature=kgowscuWBlD8n9lB1YauxXMwaWY%3D" alt="image-20251212105914334.png" loading="lazy"/></p>
<p>æœ€ç»ˆï¼Œæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">MyComponent</span> <span class="hljs-variable">component</span> <span class="hljs-operator">=</span> context.getBean(MyComponent.class);
component.sayHello();
</code></pre>
<p>å¾—åˆ°æœ€ç»ˆ Bean è¾“å‡ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c65d9aef4f7a4a9aa5b1548b48e41079~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LiK55qE56ug6bG854On:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115071&amp;x-signature=HZ0GSoR2%2BpkeNRFcpEYHsEW9994%3D" alt="image-20251212110025189.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Electronå­¦ä¹ ]]></title>    <link>https://juejin.cn/post/7582430286917238799</link>    <guid>https://juejin.cn/post/7582430286917238799</guid>    <pubDate>2025-12-12T02:50:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582430286917238799" data-draft-id="7582470341924503586" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Electronå­¦ä¹ "/> <meta itemprop="keywords" content="Electron"/> <meta itemprop="datePublished" content="2025-12-12T02:50:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è½å¹•__"/> <meta itemprop="url" content="https://juejin.cn/user/78820567691688"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Electronå­¦ä¹ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/78820567691688/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è½å¹•__
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T02:50:07.000Z" title="Fri Dec 12 2025 02:50:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Electronå­¦ä¹ </h2>
<h4 data-id="heading-1">ä¸€. Electronå®‰è£…</h4>
<p>è‡ªå·±ä»é›¶å¼€å§‹ï¼Œæ–¹ä¾¿ç†è§£Electronçš„å†…éƒ¨æœºåˆ¶</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// é¡¹ç›®åˆå§‹åŒ–</span>
npm init -y
<span class="hljs-comment">//  ä¸‹è½½Electron  ä¸ç”¨ Electron Forge</span>
npm  install  --save-dev  electron@latest

</code></pre>
<h4 data-id="heading-2">äºŒ. åˆ›å»ºä¸€ä¸ªçª—å£</h4>
<h5 data-id="heading-3"><strong>æ·»åŠ  index.html</strong></h5>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>hello world<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h5 data-id="heading-4"><strong>æ·»åŠ  main.js</strong></h5>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å¯¼å…¥ Electron çš„æ ¸å¿ƒæ¨¡å—</span>
<span class="hljs-comment">// app: æ§åˆ¶åº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶</span>
<span class="hljs-comment">// BrowserWindow: åˆ›å»ºå’Œæ§åˆ¶æµè§ˆå™¨çª—å£</span>
<span class="hljs-keyword">const</span> { app, <span class="hljs-title class_">BrowserWindow</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'electron'</span>)
<span class="hljs-comment">// å½“ Electron å®Œæˆåˆå§‹åŒ–å¹¶å‡†å¤‡åˆ›å»ºæµè§ˆå™¨çª—å£æ—¶è§¦å‘æ­¤äº‹ä»¶</span>
app.<span class="hljs-title function_">on</span>(<span class="hljs-string">'ready'</span>, <span class="hljs-function">() =&gt;</span> {
     <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„æµè§ˆå™¨çª—å£å®ä¾‹</span>
  <span class="hljs-keyword">const</span> mainWindow = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BrowserWindow</span>({
    <span class="hljs-attr">width</span>: <span class="hljs-number">800</span>, <span class="hljs-comment">// è®¾ç½®çª—å£å®½åº¦ä¸º 800 åƒç´ </span>
    <span class="hljs-attr">height</span>: <span class="hljs-number">600</span>, <span class="hljs-comment">// è®¾ç½®çª—å£é«˜åº¦ä¸º 600 åƒç´ </span>
    <span class="hljs-comment">// é…ç½®ç½‘é¡µåŠŸèƒ½é€‰é¡¹</span>
    <span class="hljs-attr">webPreferences</span>: {
      <span class="hljs-attr">nodeIntegration</span>: <span class="hljs-literal">true</span>  <span class="hljs-comment">// å…è®¸åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­ä½¿ç”¨ Node.js åŠŸèƒ½</span>
    }
  })
 <span class="hljs-comment">// åŠ è½½åº”ç”¨ç¨‹åºçš„ä¸»é¡µé¢</span>
  <span class="hljs-comment">// è¿™é‡ŒåŠ è½½å½“å‰ç›®å½•ä¸‹çš„ index.html æ–‡ä»¶</span>
  mainWindow.<span class="hljs-title function_">loadFile</span>(<span class="hljs-string">'index.html'</span>)
})
</code></pre>
<h5 data-id="heading-5">åœ¨package.jsonæ–‡ä»¶ä¸‹scripts æ·»åŠ è¿è¡Œå‘½ä»¤</h5>
<p>â€‹</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"lectron"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"main"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"main.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"electron"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^39.2.6"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"electron ."</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
 
  <span class="hljs-attr">"keywords"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"author"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"license"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ISC"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼š package.jsonæ–‡ä»¶ä¸‹ éœ€è¦ä¿®æ”¹ä¸º  "main": "main.js", è¦ä¸ç„¶ä¼šæŠ¥é”™ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e5d93f48e2f49caa94edd871e18c49b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JC95bmVX18=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766112607&amp;x-signature=xC1b4vqXaYEiNtcXjYJdFRkGB8A%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è¿è¡Œå‘½ä»¤</p>
<pre><code class="hljs language-bash" lang="bash">npm run  start
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf8119efbcbe4eb0af7570539e38daa8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JC95bmVX18=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766112607&amp;x-signature=MGIMC2cOmIGF%2FXkEeHjgkmPUpt4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h4 data-id="heading-6"><strong>ä¸‰. æ‰“å¼€è°ƒè¯•è€…å·¥å…·</strong></h4>
<p><strong>mainWindow.webContents.openDevTools() // æ‰“å¼€å¼€å‘è€…å·¥å…·</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> { app, <span class="hljs-title class_">BrowserWindow</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'electron'</span>)
<span class="hljs-comment">// å½“ Electron å®Œæˆåˆå§‹åŒ–å¹¶å‡†å¤‡åˆ›å»ºæµè§ˆå™¨çª—å£æ—¶è§¦å‘æ­¤äº‹ä»¶</span>
app.<span class="hljs-title function_">on</span>(<span class="hljs-string">'ready'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> mainWindow = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BrowserWindow</span>({
    <span class="hljs-attr">width</span>: <span class="hljs-number">800</span>, <span class="hljs-comment">// è®¾ç½®çª—å£å®½åº¦ä¸º 800 åƒç´ </span>
    <span class="hljs-attr">height</span>: <span class="hljs-number">600</span>, <span class="hljs-comment">// è®¾ç½®çª—å£é«˜åº¦ä¸º 600 åƒç´ </span>
    <span class="hljs-comment">// é…ç½®ç½‘é¡µåŠŸèƒ½é€‰é¡¹</span>
    <span class="hljs-attr">webPreferences</span>: {
      <span class="hljs-attr">nodeIntegration</span>: <span class="hljs-literal">true</span>  <span class="hljs-comment">// å…è®¸åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­ä½¿ç”¨ Node.js åŠŸèƒ½</span>
    }
  })

  mainWindow.<span class="hljs-property">webContents</span>.<span class="hljs-title function_">openDevTools</span>() <span class="hljs-comment">// æ‰“å¼€å¼€å‘è€…å·¥å…·</span>
  <span class="hljs-comment">// è¿™é‡ŒåŠ è½½å½“å‰ç›®å½•ä¸‹çš„ index.html æ–‡ä»¶</span>
  mainWindow.<span class="hljs-title function_">loadFile</span>(<span class="hljs-string">'index.html'</span>)
})
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc243f54018540efac933572d162ddf6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JC95bmVX18=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766112607&amp;x-signature=GwbDgANE3a8e14qNSfdopIwjiSw%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-7">å››.çƒ­æ›´æ–°mian.jsæ–‡ä»¶</h4>
<p>å› ä¸ºæ¯æ¬¡ä¿®æ”¹mian.jsæ–‡ä»¶ ã€‚éœ€è¦å…³é—­ç¨‹åºï¼Œé‡æ–°è¿è¡Œå‘½ä»¤ã€‚mianä¿®æ”¹è¿‡çš„å†…å®¹æ‰ç”Ÿæ•ˆã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦çƒ­æ›´ã€‚ä¸éœ€è¦å…³é—­ç¨‹åºï¼Œé‡æ–°è¿è¡Œå‘½ä»¤</p>
<h5 data-id="heading-8">nodemonæ–‡ä»¶ç›‘è§†å·¥å…·ï¼Œæ£€æµ‹æ–‡ä»¶å˜åŒ–å¹¶è‡ªåŠ¨é‡å¯è¿›ç¨‹</h5>
<p><strong>å®‰è£… nodemon</strong></p>
<pre><code class="hljs language-bash" lang="bash">npm install  nodemon --save-dev
</code></pre>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// --watch main.js</span>
ç›‘è§† main.jsæ–‡ä»¶çš„å˜åŒ–ï¼ˆElectron ä¸»è¿›ç¨‹å…¥å£æ–‡ä»¶ï¼‰
<span class="hljs-comment">// --exec "electron ."</span>
æ£€æµ‹åˆ°å˜åŒ–æ—¶æ‰§è¡Œçš„å‘½ä»¤ï¼š  electron .å¯åŠ¨å½“å‰ç›®å½•çš„ Electron åº”ç”¨
<span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"electron ."</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"start:wacth"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"nodemon --watch main.js --exec \"electron .\""</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
</code></pre>
<h4 data-id="heading-9">äº”. Electronè¿›ç¨‹å’Œçº¿ç¨‹</h4>
<h5 data-id="heading-10"><strong>ä¸»è¿›ç¨‹Main Process</strong></h5>
<p>åœ¨ Electronåº”ç”¨éƒ½æœ‰ä¸€ä¸ªå•ä¸€çš„ä¸»è¿›ç¨‹ï¼Œä½œä¸ºåº”ç”¨ç¨‹åºå…¥å£ç‚¹ã€‚ä¸»è¿›ç¨‹åœ¨Node.js è¿è¡Œã€‚å®ƒå…·å¤‡æ‰€ä»¥Node.jsAPIçš„èƒ½åŠ›ã€‚</p>
<ul>
<li>çª—å£ç®¡ç†</li>
<li>åº”ç”¨ç¨‹åºç”Ÿå‘½å‘¨æœŸ</li>
<li>åŸç”ŸAPI</li>
</ul>
<h5 data-id="heading-11"><strong>æ¸²æŸ“è¿›ç¨‹Renderer  Process</strong></h5>
<p>æ¯ä¸ªElectronåº”ç”¨ä¼šä¸ºæ¯ä¸ªæ‰“å¼€çš„ BrowserWindow ç”Ÿæˆä¸€ä¸ªå•ç‹¬çš„æ¸²æŸ“è¿›ç¨‹ã€‚</p>
<p>æ¸²æŸ“å™¨æ— æƒç›´æ¥è®¿é—®requireæˆ–å…¶ä»–Node.js API</p>
<h5 data-id="heading-12">è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰</h5>
<p><strong>IPCé€šé“åç§°</strong></p>
<ul>
<li>ipcMain</li>
<li>ipcRenderer</li>
</ul>
<p><strong>é¢„åŠ è½½è„šæœ¬</strong></p>
<p>ä¸ºäº†å°†electronçš„ä¸åŒç±»å‹çš„è¿›ç¨‹æ¥åœ¨ä¸€èµ·ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨è¢«ç§°ä¸ºé¢„åŠ è½½preloadçš„ç‰¹æ®Šè„šæœ¬ã€‚</p>
<h6 data-id="heading-13">1.å•å‘é€šä¿¡ - ä»æ¸²æŸ“å™¨è¿›ç¨‹åˆ°ä¸»è¿›ç¨‹</h6>
<p><strong>ä½¿ç”¨ipcRenderer.send APIå‘é€æ¶ˆæ¯ï¼Œç„¶åä½¿ç”¨ipcMain.onAPIæ¥æ”¶ã€‚</strong></p>
<h6 data-id="heading-14">å®ç°é€šè¿‡è¾“å…¥æ¡†ä¿®æ”¹åº”ç”¨æ ‡é¢˜</h6>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f91484daa0d4395bafe2a1c943607e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JC95bmVX18=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766112607&amp;x-signature=Tlwac%2B1ZXah7jejcCq%2BeEJF7aFI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¸€. æ·»åŠ è¾“å…¥æ¡†</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>hello world<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    Title: <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"title"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"btn"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span>&gt;</span>Set<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"info"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./renderer.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>äºŒ. æ·»åŠ renderer.js ç¼–å†™ ç‚¹å‡»æŒ‰é’®äº‹ä»¶å’Œæ¸²æŸ“Nodeç‰ˆæœ¬å·é€»è¾‘</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// è·å–é¡µé¢ä¸Š ID ä¸º 'info' çš„å…ƒç´ </span>
<span class="hljs-keyword">const</span> info = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'info'</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">versions</span>,<span class="hljs-string">'window.versions'</span>)
<span class="hljs-comment">// è®¾ç½®è¯¥å…ƒç´ çš„å†…å®¹ä¸ºç‰ˆæœ¬ä¿¡æ¯</span>
info.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`Chrome (v<span class="hljs-subst">${<span class="hljs-variable language_">window</span>.versions.chrome}</span>), Node.js (v<span class="hljs-subst">${<span class="hljs-variable language_">window</span>.versions.node}</span>)`</span>
<span class="hljs-comment">// è·å–é¡µé¢ä¸Š ID ä¸º 'btn' çš„æŒ‰é’®å…ƒç´ </span>
<span class="hljs-keyword">const</span> btn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'btn'</span>)
<span class="hljs-comment">// è·å–é¡µé¢ä¸Š ID ä¸º 'title' çš„è¾“å…¥æ¡†å…ƒç´ </span>
<span class="hljs-keyword">const</span> titleInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'title'</span>)
<span class="hljs-comment">// ç»™æŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨</span>
btn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
     <span class="hljs-comment">// ä»è¾“å…¥æ¡†ä¸­è·å–ç”¨æˆ·è¾“å…¥çš„å€¼</span>
    <span class="hljs-keyword">const</span> title = titleInput.<span class="hljs-property">value</span>
     <span class="hljs-comment">// è°ƒç”¨é¢„åŠ è½½è„šæœ¬æš´éœ²çš„ window.electron.setTitle æ–¹æ³•</span>
    <span class="hljs-comment">// è¯¥æ–¹æ³•ä¼šé€šè¿‡ IPC é€šçŸ¥ä¸»è¿›ç¨‹è®¾ç½®çª—å£æ ‡é¢˜</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">electron</span>.<span class="hljs-title function_">setTitle</span>(title)
    
   
  })
</code></pre>
<p>ä¸‰.  é¢„åŠ è½½è„šæœ¬ï¼ˆpreload.jsï¼‰</p>
<p>å®ƒä½¿ç”¨contextBridgeæ¥å®‰å…¨åœ°æš´éœ²ä¸€äº›Node.jså’ŒElectronçš„åŠŸèƒ½ç»™æ¸²æŸ“è¿›ç¨‹ï¼ˆå³ç½‘é¡µï¼‰ã€‚</p>
<p>ä»£ç ä¸­ä½¿ç”¨äº†ä¸‰ä¸ªexposeInMainWorldè°ƒç”¨ï¼Œåˆ†åˆ«æš´éœ²äº†'versions'ã€'electron'å’Œ'require'ä¸‰ä¸ªå…¨å±€å˜é‡ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// contextBridge: å®‰å…¨åœ°å‘æ¸²æŸ“è¿›ç¨‹æš´éœ² API çš„æ¡¥æ¢</span>
<span class="hljs-comment">// ipcRenderer: æ¸²æŸ“è¿›ç¨‹ä¸ä¸»è¿›ç¨‹é€šä¿¡çš„æ¨¡å—</span>
<span class="hljs-keyword">const</span> { contextBridge, ipcRenderer } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"electron"</span>);
<span class="hljs-comment">/**
 * é€šè¿‡ contextBridge å‘æ¸²æŸ“è¿›ç¨‹æš´éœ² Node.js å’Œ Chromium ç‰ˆæœ¬ä¿¡æ¯
 * å®‰å…¨åœ°å°†åªè¯»æ•°æ®æš´éœ²ç»™ window.versions å¯¹è±¡
 */</span>
contextBridge.<span class="hljs-title function_">exposeInMainWorld</span>(<span class="hljs-string">'versions'</span>, {
    <span class="hljs-attr">node</span>: process.<span class="hljs-property">versions</span>.<span class="hljs-property">node</span>, <span class="hljs-comment">// Node.js è¿è¡Œæ—¶ç‰ˆæœ¬å·</span>
    <span class="hljs-attr">chrome</span>: process.<span class="hljs-property">versions</span>.<span class="hljs-property">chrome</span> <span class="hljs-comment">// Chromium å¼•æ“ç‰ˆæœ¬å·</span>
  })
<span class="hljs-comment">/**
 * å‘æ¸²æŸ“è¿›ç¨‹æš´éœ²è‡ªå®šä¹‰çš„ electron API
 * åˆ›å»ºä¸€ä¸ªå®‰å…¨çš„ window.electron å¯¹è±¡ï¼ŒåŒ…å« setTitle æ–¹æ³•
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">title</span> - è¦è®¾ç½®çš„çª—å£æ ‡é¢˜
 */</span>
contextBridge.<span class="hljs-title function_">exposeInMainWorld</span>(<span class="hljs-string">"electron"</span>, {
  <span class="hljs-attr">setTitle</span>: <span class="hljs-function">(<span class="hljs-params">title</span>) =&gt;</span> ipcRenderer.<span class="hljs-title function_">send</span>(<span class="hljs-string">"set-title"</span>, title),
});
<span class="hljs-comment">/**
 * å±é™©æ“ä½œï¼æš´éœ² Node.js çš„ require å‡½æ•°åˆ°æ¸²æŸ“è¿›ç¨‹
 * âš ï¸ ä¸¥é‡å®‰å…¨è­¦å‘Šï¼šè¿™ä¼šå¯¼è‡´ XSS æ¼æ´å’Œç³»ç»Ÿçº§æ”»å‡»é£é™©
 * ç»å¯¹ä¸è¦åœ¨çœŸå®é¡¹ç›®ä¸­è¿™æ ·åšï¼
 */</span>
contextBridge.<span class="hljs-title function_">exposeInMainWorld</span>(<span class="hljs-string">"require"</span>, <span class="hljs-built_in">require</span>);

</code></pre>
<p>å››.ä¿®æ”¹main.js</p>
<p>preload: path.join(__dirname, 'preload.js') // é¢„åŠ è½½è„šæœ¬è·¯å¾„
ipcMain.on('set-title',handlsSetTitle)  //   æ³¨å†Œ IPC ç›‘å¬å™¨ï¼šç›‘å¬æ¸²æŸ“è¿›ç¨‹å‘é€çš„ 'set-title' äº‹ä»¶
handlsSetTitle ä¿®æ”¹åº”ç”¨æ ‡é¢˜</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> { app, <span class="hljs-title class_">BrowserWindow</span>, ipcMain } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'electron'</span>)
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>)

<span class="hljs-keyword">const</span> <span class="hljs-title function_">createWindow</span> = (<span class="hljs-params"/>) =&gt; {
     <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„æµè§ˆå™¨çª—å£å®ä¾‹</span>
   <span class="hljs-keyword">const</span> mainWindow = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BrowserWindow</span>({
    <span class="hljs-attr">width</span>: <span class="hljs-number">800</span>, <span class="hljs-comment">// è®¾ç½®çª—å£å®½åº¦ä¸º 800 åƒç´ </span>
    <span class="hljs-attr">height</span>: <span class="hljs-number">700</span>, <span class="hljs-comment">// è®¾ç½®çª—å£é«˜åº¦ä¸º 600 åƒç´ </span>
    <span class="hljs-comment">// é…ç½®ç½‘é¡µåŠŸèƒ½é€‰é¡¹</span>
    <span class="hljs-attr">webPreferences</span>: {
      <span class="hljs-attr">nodeIntegration</span>: <span class="hljs-literal">true</span> , <span class="hljs-comment">// å…è®¸åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­ä½¿ç”¨ Node.js åŠŸèƒ½</span>
      <span class="hljs-attr">preload</span>:path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">'preload.js'</span>) <span class="hljs-comment">// é¢„åŠ è½½è„šæœ¬</span>
    }
  })
  mainWindow.<span class="hljs-property">webContents</span>.<span class="hljs-title function_">openDevTools</span>() <span class="hljs-comment">// æ‰“å¼€å¼€å‘è€…å·¥å…·</span>
  <span class="hljs-comment">//  åŠ è½½åº”ç”¨ç¨‹åºçš„ä¸»é¡µé¢  è¿™é‡ŒåŠ è½½å½“å‰ç›®å½•ä¸‹çš„ index.html æ–‡ä»¶</span>
  mainWindow.<span class="hljs-title function_">loadFile</span>(<span class="hljs-string">'index.html'</span>)
}
<span class="hljs-comment">/**
 * å¤„ç†è®¾ç½®çª—å£æ ‡é¢˜çš„ IPC æ¶ˆæ¯
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Electron.IpcMainEvent</span>} <span class="hljs-variable">event</span> - IPC äº‹ä»¶å¯¹è±¡
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">title</span> - è¦è®¾ç½®çš„æ–°çª—å£æ ‡é¢˜
 */</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handlsSetTitle</span> = (<span class="hljs-params">event, title</span>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'title'</span>, event, title)
     <span class="hljs-comment">// è·å–å‘é€æ¶ˆæ¯çš„ WebContents å¯¹è±¡</span>
    <span class="hljs-keyword">const</span> webContents = event.<span class="hljs-property">sender</span>
     <span class="hljs-comment">// é€šè¿‡ WebContents æ‰¾åˆ°å¯¹åº”çš„ BrowserWindow å®ä¾‹</span>
    <span class="hljs-keyword">const</span> win = <span class="hljs-title class_">BrowserWindow</span>.<span class="hljs-title function_">fromWebContents</span>(webContents)
    <span class="hljs-comment">// è®¾ç½®çª—å£æ ‡é¢˜</span>
    win.<span class="hljs-title function_">setTitle</span>(title)
    
}

<span class="hljs-comment">// å½“ Electron å®Œæˆåˆå§‹åŒ–å¹¶å‡†å¤‡åˆ›å»ºæµè§ˆå™¨çª—å£æ—¶è§¦å‘æ­¤äº‹ä»¶</span>
app.<span class="hljs-title function_">on</span>(<span class="hljs-string">'ready'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// æ³¨å†Œ IPC ç›‘å¬å™¨ï¼šç›‘å¬æ¸²æŸ“è¿›ç¨‹å‘é€çš„ 'set-title' äº‹ä»¶</span>
    ipcMain.<span class="hljs-title function_">on</span>(<span class="hljs-string">'set-title'</span>,handlsSetTitle)
    <span class="hljs-comment">// åˆ›å»ºä¸»çª—å£</span>
    <span class="hljs-title function_">createWindow</span>()
})
</code></pre>
<h6 data-id="heading-15">2.åŒå‘é€šä¿¡ - ä»æ¸²æŸ“å™¨è¿›ç¨‹åˆ°ä¸»è¿›ç¨‹ï¼Œå†ä»ä¸»è¿›ç¨‹åˆ°æ¸²æŸ“å™¨è¿›ç¨‹</h6>
<ul>
<li>ä½¿ç”¨ipcRender.invoke è¿›è¡Œå‘é€</li>
<li>ä½¿ç”¨ipcMain.handle æ¥è¿›è¡Œå“åº”</li>
<li>å®ƒçš„ç¬¬äºŒä¸ªå‡½æ•°è¢«ç”¨ä¸€ä¸ªå›è°ƒã€‚ç„¶åè¿”å›å€¼å°†ä½œä¸ºPromiseè¿”å›åˆ°æœ€åˆçš„invokerè°ƒç”¨</li>
</ul>
<h6 data-id="heading-16">å®ç°æœ¬åœ°ä¿å­˜è¾“å…¥æ¡†å†…å®¹ï¼Œå¹¶ä¸”é¡µé¢æ˜¾ç¤ºæ–‡ä»¶å¤§å°</h6>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6058012fe7374d62ac17e4c103b60c3a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JC95bmVX18=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766112607&amp;x-signature=r3F7%2BQ%2F%2BxSmJc876rTGznzIpSQs%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¸€. æ·»åŠ è¾“å…¥æ¡†</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>hello world<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æ ‡é¢˜è¾“å…¥æ¡† --&gt;</span>
    Title: <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"title"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"btn"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span>&gt;</span>Set<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"info"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æ–‡æœ¬è¾“å…¥ --&gt;</span>
    Content: <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"content"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"btn2"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span>&gt;</span>Write<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"counter"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./renderer.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>

</code></pre>
<p>äºŒ.åœ¨preload.jsï¼Œæ·»åŠ ç‚¹å‡»äº‹ä»¶</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> btn2 = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'btn2'</span>)
<span class="hljs-keyword">const</span> contentInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'content'</span>)
<span class="hljs-keyword">const</span> counter = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'counter'</span>)
btn2.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> content = contentInput.<span class="hljs-property">value</span>
    <span class="hljs-keyword">const</span> len = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">electron</span>.<span class="hljs-title function_">writeFile</span>(content)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(len)
    counter.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`æ–‡ä»¶å¤§å°: <span class="hljs-subst">${len}</span>`</span>
    <span class="hljs-keyword">const</span> c = <span class="hljs-keyword">await</span> fs.<span class="hljs-property">promises</span>.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'test.txt'</span>, { <span class="hljs-attr">encoding</span>: <span class="hljs-string">'utf-8'</span> })
    counter.<span class="hljs-property">innerHTML</span> += <span class="hljs-string">`æ–‡ä»¶å†…å®¹: <span class="hljs-subst">${c}</span>`</span>
  })
</code></pre>
<p>ä¸‰.åœ¨é¢„è®¾è„šæœ¬preload.js  ï¼Œä½¿ç”¨ipcRender.invoke è¿›è¡Œå‘é€</p>
<pre><code class="hljs language-js" lang="js">contextBridge.<span class="hljs-title function_">exposeInMainWorld</span>(<span class="hljs-string">"electron"</span>, {
  <span class="hljs-attr">setTitle</span>: <span class="hljs-function">(<span class="hljs-params">title</span>) =&gt;</span> ipcRenderer.<span class="hljs-title function_">send</span>(<span class="hljs-string">"set-title"</span>, title),
  <span class="hljs-comment">// è°ƒç”¨ä¸»è¿›ç¨‹çš„ writeFile æ–¹æ³•ï¼Œå¹¶å°†å†…å®¹ä½œä¸ºå‚æ•°ä¼ é€’</span>
  <span class="hljs-attr">writeFile</span>: <span class="hljs-function">(<span class="hljs-params">content</span>) =&gt;</span> ipcRenderer.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">'write-file'</span>, content), 
});
</code></pre>
<p>å››.ä¿®æ”¹mian.js</p>
<p>pcMain.handle('write-file', handleWriteFile)  // æ³¨å†Œ IPC å¤„ç†ç¨‹åºï¼šå¤„ç†æ¸²æŸ“è¿›ç¨‹å‘é€çš„ 'write-file' è¯·æ±‚</p>
<p>handleWriteFile  //</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å¯¼å…¥ Electron çš„æ ¸å¿ƒæ¨¡å—</span>
<span class="hljs-comment">// app: æ§åˆ¶åº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶</span>
<span class="hljs-comment">// BrowserWindow: åˆ›å»ºå’Œæ§åˆ¶æµè§ˆå™¨çª—å£</span>
<span class="hljs-keyword">const</span> { app, <span class="hljs-title class_">BrowserWindow</span>, ipcMain } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'electron'</span>)
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>)
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>)
<span class="hljs-keyword">const</span> <span class="hljs-title function_">createWindow</span> = (<span class="hljs-params"/>) =&gt; {
     <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„æµè§ˆå™¨çª—å£å®ä¾‹</span>
   <span class="hljs-keyword">const</span> mainWindow = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BrowserWindow</span>({
    <span class="hljs-attr">width</span>: <span class="hljs-number">800</span>, <span class="hljs-comment">// è®¾ç½®çª—å£å®½åº¦ä¸º 800 åƒç´ </span>
    <span class="hljs-attr">height</span>: <span class="hljs-number">700</span>, <span class="hljs-comment">// è®¾ç½®çª—å£é«˜åº¦ä¸º 600 åƒç´ </span>
    <span class="hljs-comment">// é…ç½®ç½‘é¡µåŠŸèƒ½é€‰é¡¹</span>
    <span class="hljs-attr">webPreferences</span>: {
      <span class="hljs-attr">nodeIntegration</span>: <span class="hljs-literal">true</span> , <span class="hljs-comment">// å…è®¸åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­ä½¿ç”¨ Node.js åŠŸèƒ½</span>
      <span class="hljs-attr">preload</span>:path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">'preload.js'</span>) <span class="hljs-comment">// é¢„åŠ è½½è„šæœ¬</span>
    }
  })
  mainWindow.<span class="hljs-property">webContents</span>.<span class="hljs-title function_">openDevTools</span>() <span class="hljs-comment">// æ‰“å¼€å¼€å‘è€…å·¥å…·</span>
  <span class="hljs-comment">//  åŠ è½½åº”ç”¨ç¨‹åºçš„ä¸»é¡µé¢  è¿™é‡ŒåŠ è½½å½“å‰ç›®å½•ä¸‹çš„ index.html æ–‡ä»¶</span>
  mainWindow.<span class="hljs-title function_">loadFile</span>(<span class="hljs-string">'index.html'</span>)
}
<span class="hljs-comment">/**
 * å¤„ç†è®¾ç½®çª—å£æ ‡é¢˜çš„ IPC æ¶ˆæ¯
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Electron.IpcMainEvent</span>} <span class="hljs-variable">event</span> - IPC äº‹ä»¶å¯¹è±¡
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">title</span> - è¦è®¾ç½®çš„æ–°çª—å£æ ‡é¢˜
 */</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handlsSetTitle</span> = (<span class="hljs-params">event, title</span>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'title'</span>, event, title)
     <span class="hljs-comment">// è·å–å‘é€æ¶ˆæ¯çš„ WebContents å¯¹è±¡</span>
    <span class="hljs-keyword">const</span> webContents = event.<span class="hljs-property">sender</span>
     <span class="hljs-comment">// é€šè¿‡ WebContents æ‰¾åˆ°å¯¹åº”çš„ BrowserWindow å®ä¾‹</span>
    <span class="hljs-keyword">const</span> win = <span class="hljs-title class_">BrowserWindow</span>.<span class="hljs-title function_">fromWebContents</span>(webContents)
    <span class="hljs-comment">// è®¾ç½®çª—å£æ ‡é¢˜</span>
    win.<span class="hljs-title function_">setTitle</span>(title)
    
}

<span class="hljs-comment">/**
 * 
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} event 
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} content 
 * <span class="hljs-doctag">@returns</span> 
 */</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleWriteFile</span>(<span class="hljs-params">event, content</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'the content'</span>, content)
    <span class="hljs-keyword">await</span> fs.<span class="hljs-property">promises</span>.<span class="hljs-title function_">writeFile</span>(<span class="hljs-string">'test.txt'</span>, content)
    <span class="hljs-keyword">const</span> stats = <span class="hljs-keyword">await</span> fs.<span class="hljs-property">promises</span>.<span class="hljs-title function_">stat</span>(<span class="hljs-string">'test.txt'</span>)
    <span class="hljs-keyword">return</span> stats.<span class="hljs-property">size</span>
  }
<span class="hljs-comment">// å½“ Electron å®Œæˆåˆå§‹åŒ–å¹¶å‡†å¤‡åˆ›å»ºæµè§ˆå™¨çª—å£æ—¶è§¦å‘æ­¤äº‹ä»¶</span>
app.<span class="hljs-title function_">on</span>(<span class="hljs-string">'ready'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// æ³¨å†Œ IPC ç›‘å¬å™¨ï¼šç›‘å¬æ¸²æŸ“è¿›ç¨‹å‘é€çš„ 'set-title' äº‹ä»¶</span>
    ipcMain.<span class="hljs-title function_">on</span>(<span class="hljs-string">'set-title'</span>,handlsSetTitle)
<span class="hljs-comment">// æ³¨å†Œ IPC å¤„ç†ç¨‹åºï¼šå¤„ç†æ¸²æŸ“è¿›ç¨‹å‘é€çš„ 'write-file' è¯·æ±‚</span>
    ipcMain.<span class="hljs-title function_">handle</span>(<span class="hljs-string">'write-file'</span>, handleWriteFile) 
    <span class="hljs-comment">// åˆ›å»ºä¸»çª—å£</span>
    <span class="hljs-title function_">createWindow</span>()
})
</code></pre>
<h6 data-id="heading-17">3.å•å‘é€šä¿¡- ä»ä¸»è¿›ç¨‹åˆ°æ¸²æŸ“è¿›ç¨‹</h6>
<ul>
<li>ä½¿ç”¨win.webContets.sendè¿›è¡Œå‘é€</li>
<li>ä½¿ç”¨ipcRenderer.onæ¥æ”¶</li>
</ul>
<p><strong>è¿›å…¥é¡µé¢ï¼Œé¡µé¢å¼€å§‹æ¯3ç§’åŠ 3</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/995f4d254ba3433782d328461caafb32~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JC95bmVX18=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766112607&amp;x-signature=yDkC%2FBscY71O3rmptTugGirsW5w%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>1.ä¿®æ”¹mian.js</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> { app, <span class="hljs-title class_">BrowserWindow</span>, ipcMain } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'electron'</span>)
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>)
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>)
<span class="hljs-keyword">const</span> <span class="hljs-title function_">createWindow</span> = (<span class="hljs-params"/>) =&gt; {
     <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„æµè§ˆå™¨çª—å£å®ä¾‹</span>
   <span class="hljs-keyword">const</span> mainWindow = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BrowserWindow</span>({
    <span class="hljs-attr">width</span>: <span class="hljs-number">800</span>, <span class="hljs-comment">// è®¾ç½®çª—å£å®½åº¦ä¸º 800 åƒç´ </span>
    <span class="hljs-attr">height</span>: <span class="hljs-number">700</span>, <span class="hljs-comment">// è®¾ç½®çª—å£é«˜åº¦ä¸º 600 åƒç´ </span>
    <span class="hljs-comment">// é…ç½®ç½‘é¡µåŠŸèƒ½é€‰é¡¹</span>
    <span class="hljs-attr">webPreferences</span>: {
      <span class="hljs-attr">nodeIntegration</span>: <span class="hljs-literal">true</span> , <span class="hljs-comment">// å…è®¸åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­ä½¿ç”¨ Node.js åŠŸèƒ½</span>
      <span class="hljs-attr">preload</span>:path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">'preload.js'</span>) <span class="hljs-comment">// é¢„åŠ è½½è„šæœ¬</span>
    }
  })
  mainWindow.<span class="hljs-property">webContents</span>.<span class="hljs-title function_">openDevTools</span>() <span class="hljs-comment">// æ‰“å¼€å¼€å‘è€…å·¥å…·</span>
  <span class="hljs-comment">//  åŠ è½½åº”ç”¨ç¨‹åºçš„ä¸»é¡µé¢  è¿™é‡ŒåŠ è½½å½“å‰ç›®å½•ä¸‹çš„ index.html æ–‡ä»¶</span>
  mainWindow.<span class="hljs-title function_">loadFile</span>(<span class="hljs-string">'index.html'</span>)

  <span class="hljs-keyword">return</span> mainWindow
}
<span class="hljs-comment">/**
 * å¤„ç†è®¾ç½®çª—å£æ ‡é¢˜çš„ IPC æ¶ˆæ¯
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Electron.IpcMainEvent</span>} <span class="hljs-variable">event</span> - IPC äº‹ä»¶å¯¹è±¡
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">title</span> - è¦è®¾ç½®çš„æ–°çª—å£æ ‡é¢˜
 */</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handlsSetTitle</span> = (<span class="hljs-params">event, title</span>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'title'</span>, event, title)
     <span class="hljs-comment">// è·å–å‘é€æ¶ˆæ¯çš„ WebContents å¯¹è±¡</span>
    <span class="hljs-keyword">const</span> webContents = event.<span class="hljs-property">sender</span>
     <span class="hljs-comment">// é€šè¿‡ WebContents æ‰¾åˆ°å¯¹åº”çš„ BrowserWindow å®ä¾‹</span>
    <span class="hljs-keyword">const</span> win = <span class="hljs-title class_">BrowserWindow</span>.<span class="hljs-title function_">fromWebContents</span>(webContents)
    <span class="hljs-comment">// è®¾ç½®çª—å£æ ‡é¢˜</span>
    win.<span class="hljs-title function_">setTitle</span>(title)
    
}

<span class="hljs-comment">/**
 * 
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} event 
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} content 
 * <span class="hljs-doctag">@returns</span> 
 */</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleWriteFile</span>(<span class="hljs-params">event, content</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'the content'</span>, content)
    <span class="hljs-keyword">await</span> fs.<span class="hljs-property">promises</span>.<span class="hljs-title function_">writeFile</span>(<span class="hljs-string">'test.txt'</span>, content)
    <span class="hljs-keyword">const</span> stats = <span class="hljs-keyword">await</span> fs.<span class="hljs-property">promises</span>.<span class="hljs-title function_">stat</span>(<span class="hljs-string">'test.txt'</span>)
    <span class="hljs-keyword">return</span> stats.<span class="hljs-property">size</span>
  }
<span class="hljs-comment">// å½“ Electron å®Œæˆåˆå§‹åŒ–å¹¶å‡†å¤‡åˆ›å»ºæµè§ˆå™¨çª—å£æ—¶è§¦å‘æ­¤äº‹ä»¶</span>
app.<span class="hljs-title function_">on</span>(<span class="hljs-string">'ready'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// æ³¨å†Œ IPC ç›‘å¬å™¨ï¼šç›‘å¬æ¸²æŸ“è¿›ç¨‹å‘é€çš„ 'set-title' äº‹ä»¶</span>
    ipcMain.<span class="hljs-title function_">on</span>(<span class="hljs-string">'set-title'</span>,handlsSetTitle)
<span class="hljs-comment">// æ³¨å†Œ IPC å¤„ç†ç¨‹åºï¼šå¤„ç†æ¸²æŸ“è¿›ç¨‹å‘é€çš„ 'write-file' è¯·æ±‚</span>
    ipcMain.<span class="hljs-title function_">handle</span>(<span class="hljs-string">'write-file'</span>, handleWriteFile) 
    <span class="hljs-comment">// åˆ›å»ºä¸»çª—å£</span>
    <span class="hljs-title function_">createWindow</span>()



    <span class="hljs-keyword">let</span> counter = <span class="hljs-number">1</span>
    <span class="hljs-keyword">const</span> win = <span class="hljs-title function_">createWindow</span>()
    <span class="hljs-comment">// remote.enable(win.webContents)</span>
    win.<span class="hljs-property">webContents</span>.<span class="hljs-title function_">send</span>(<span class="hljs-string">'update-counter'</span>, counter)
    <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      counter += <span class="hljs-number">3</span>
      win.<span class="hljs-property">webContents</span>.<span class="hljs-title function_">send</span>(<span class="hljs-string">'update-counter'</span>, counter)
    }, <span class="hljs-number">3000</span>)
})
</code></pre>
<ol start="2">
<li>
<p>index.html æ·»åŠ æ˜¾ç¤ºæ•°å­—å…ƒç´ </p>
<pre><code class="hljs language-html" lang="html"> <span class="hljs-comment">&lt;!-- æ˜¾ç¤ºæ•°å­—å…ƒç´  --&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"time"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
</code></pre>
</li>
<li>
<p>renderer.js</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> time = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'time'</span>)
<span class="hljs-comment">// </span>
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">electron</span>.<span class="hljs-title function_">onUpdateCounter</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {
    time.<span class="hljs-property">innerText</span> = value.<span class="hljs-title function_">toString</span>()
  })
</code></pre>
</li>
<li>
<p>preload.jsæ·»åŠ  onUpdateCounter</p>
<pre><code class="hljs language-js" lang="js"> */
contextBridge.<span class="hljs-title function_">exposeInMainWorld</span>(<span class="hljs-string">"electron"</span>, {
  <span class="hljs-attr">setTitle</span>: <span class="hljs-function">(<span class="hljs-params">title</span>) =&gt;</span> ipcRenderer.<span class="hljs-title function_">send</span>(<span class="hljs-string">"set-title"</span>, title),
  <span class="hljs-comment">// è°ƒç”¨ä¸»è¿›ç¨‹çš„ writeFile æ–¹æ³•ï¼Œå¹¶å°†å†…å®¹ä½œä¸ºå‚æ•°ä¼ é€’</span>
  <span class="hljs-attr">writeFile</span>: <span class="hljs-function">(<span class="hljs-params">content</span>) =&gt;</span> ipcRenderer.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">'write-file'</span>, content), 
  <span class="hljs-comment">// è°ƒç”¨ä¸»è¿›ç¨‹çš„ readFile æ–¹æ³•ï¼Œå¹¶å°†å›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’</span>
  <span class="hljs-attr">onUpdateCounter</span>: <span class="hljs-function">(<span class="hljs-params">callback</span>) =&gt;</span> ipcRenderer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'update-counter'</span>, <span class="hljs-function">(<span class="hljs-params">_event, value</span>) =&gt;</span> <span class="hljs-title function_">callback</span>(value)),
});
</code></pre>
</li>
</ol>
<h4 data-id="heading-18">å…­. Electron Forge</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Felectronforge.io%2F" target="_blank" title="https://electronforge.io/" ref="nofollow noopener noreferrer">Electron Forge</a> æ˜¯ä¸€ä¸ªç”¨äºæ‰“åŒ…å’Œåˆ†å‘ Electron åº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚ å®ƒå°† Electron çš„æ„å»ºå·¥å…·ç”Ÿæ€ç³»ç»Ÿç»Ÿä¸€åˆ°ä¸€ä¸ªå¯æ‰©å±•çš„ç•Œé¢ä¸­ï¼Œè¿™æ ·æ¯ä¸ªäººéƒ½å¯ä»¥ç›´æ¥ä¸Šæ‰‹åˆ¶ä½œ Electron åº”ç”¨ã€‚</p>
<p>å®ƒçš„äº®ç‚¹ï¼š</p>
<ul>
<li>ğŸ“¦ åº”ç”¨æ‰“åŒ…å’Œä»£ç ç­¾å</li>
<li>ğŸšš Windowsã€macOS å’Œ Linux ä¸Šçš„å¯å®šåˆ¶å®‰è£…ç¨‹åºï¼ˆDMGã€debã€MSIã€PKGã€AppX ç­‰ï¼‰</li>
<li>â˜ï¸ äº‘æä¾›å•†ï¼ˆGitHubã€S3ã€Bitbucket ç­‰ï¼‰çš„è‡ªåŠ¨åŒ–å‘å¸ƒæµç¨‹</li>
<li>âš¡ï¸ æ˜“äºä½¿ç”¨çš„ Webpack å’Œ TypeScript æ ·æ¿æ¨¡æ¿</li>
<li>âš™ï¸ åŸç”Ÿ Node.js æ¨¡å—æ”¯æŒ</li>
<li>ğŸ”Œ å¯æ‰©å±•çš„ JavaScript æ’ä»¶ API</li>
</ul>
<h6 data-id="heading-19">åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„ Forge é¡¹ç›®</h6>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># my-app-electron é¡¹ç›®åç§°</span>
<span class="hljs-comment">#  --template=vite-typescript æ¨¡æœ¬ç”¨vite+typescript</span>
npm init create-electron-app@latest my-app-electron1 -- --template=vite-typescript
<span class="hljs-comment"># è¿›å…¥é¡¹ç›®</span>
<span class="hljs-built_in">cd</span> my-app-electron
<span class="hljs-comment">#è¿è¡Œé¡¹ç›®</span>
npm start
</code></pre>
<h6 data-id="heading-20">ç»“åˆvue3</h6>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…vue</span>
npm install vue
<span class="hljs-comment">#å®‰è£…viteè¯†åˆ«vueæ’ä»¶</span>
npm install --save-dev @vitejs/plugin-vue
</code></pre>
<h4 data-id="heading-21">ä¸ƒ. åº”ç”¨æ‰“åŒ…</h4>
<p><strong>macOSæ‰“åŒ…</strong></p>
<p>éœ€è¦å®‰è£… éœ€é€šè¿‡<strong>Electron Forge</strong>çš„<code>@electron-forge/maker-dmg</code>æ’ä»¶å®ç°</p>
<pre><code class="hljs language-bash" lang="bash">npm install @electron-forge/maker-dmg
</code></pre>
<p>æ“ä½œç³»ç»Ÿï¼šä»…èƒ½åœ¨<strong>macOS</strong>ä¸Šæ‰“åŒ…DMGï¼ˆå› DMGæ˜¯macOSä¸“å±æ ¼å¼ï¼‰</p>
<p><strong>forge.config.tsæ‰“åŒ…æ–‡ä»¶é…ç½®</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">ForgeConfig</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@electron-forge/shared-types'</span>;
<span class="hljs-comment">// æ¯ä¸€ç§æ‰“åŒ…ç±»å‹éƒ½è®¾è®¡ä¸€ä¸ªå•ç‹¬çš„npm</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">MakerSquirrel</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@electron-forge/maker-squirrel'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">MakerZIP</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@electron-forge/maker-zip'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">MakerDeb</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@electron-forge/maker-deb'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">MakerRpm</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@electron-forge/maker-rpm'</span>;
<span class="hljs-comment">// macOS</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">MakerDMG</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@electron-forge/maker-dmg'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">VitePlugin</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@electron-forge/plugin-vite'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">FusesPlugin</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@electron-forge/plugin-fuses'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">FuseV1Options</span>, <span class="hljs-title class_">FuseVersion</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@electron/fuses'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-attr">config</span>: <span class="hljs-title class_">ForgeConfig</span> = {
    <span class="hljs-comment">// åŸºç¡€æ‰“åŒ…é…ç½®</span>
  <span class="hljs-attr">packagerConfig</span>: {
    <span class="hljs-attr">asar</span>: <span class="hljs-literal">true</span>,<span class="hljs-comment">// å¯ç”¨ ASAR å½’æ¡£æ ¼å¼ï¼ˆå°†åº”ç”¨ç¨‹åºæ‰“åŒ…ä¸ºå•ä¸ªæ–‡ä»¶ï¼‰</span>
  },
  <span class="hljs-attr">rebuildConfig</span>: {},
    <span class="hljs-comment">// åˆ¶ä½œåŒ…çš„å·¥å…·</span>
  <span class="hljs-attr">makers</span>: [
      <span class="hljs-comment">// windows å®‰è£…åŒ…</span>
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">MakerSquirrel</span>({}),
         <span class="hljs-keyword">new</span> <span class="hljs-title class_">MakerDMG</span>({
      <span class="hljs-attr">name</span>: <span class="hljs-string">'YourAppName'</span>, <span class="hljs-comment">// DMGæ–‡ä»¶åï¼ˆé»˜è®¤ä¸packagerConfig.nameä¸€è‡´ï¼‰</span>
      <span class="hljs-attr">background</span>: <span class="hljs-string">'assets/dmg-background.png'</span>, <span class="hljs-comment">// DMGçª—å£èƒŒæ™¯å›¾ï¼ˆæ¨è1440x900åƒç´ ï¼‰</span>
      <span class="hljs-attr">icon</span>: <span class="hljs-string">'assets/icon.icns'</span>, <span class="hljs-comment">// DMGçª—å£ä¸­çš„åº”ç”¨å›¾æ ‡ï¼ˆä¸packagerConfig.iconä¸€è‡´ï¼‰</span>
      <span class="hljs-attr">iconSize</span>: <span class="hljs-number">80</span>, <span class="hljs-comment">// å›¾æ ‡å¤§å°ï¼ˆåƒç´ ï¼‰</span>
       <span class="hljs-attr">format</span>:<span class="hljs-string">'ULFO'</span>, <span class="hljs-comment">// ä½¿ç”¨ULFOæ ¼å¼ï¼Œå…¼å®¹æ€§æ›´å¥½</span>
      }
    })
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">MakerZIP</span>({}, [<span class="hljs-string">'darwin'</span>]), <span class="hljs-comment">// ZIP å‹ç¼©åŒ…ç”Ÿæˆå™¨ï¼ˆæ’é™¤ macOS å¹³å°ï¼‰</span>
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">MakerRpm</span>({}),<span class="hljs-comment">// RPM åŒ…ç”Ÿæˆå™¨ (RedHat/CentOS/Fedora)</span>
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">MakerDeb</span>({}),<span class="hljs-comment">// DEB åŒ…ç”Ÿæˆå™¨ (Debian/Ubuntu)</span>
  ],
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">VitePlugin</span>({
      <span class="hljs-attr">build</span>: [
        {
          <span class="hljs-attr">entry</span>: <span class="hljs-string">'src/main.ts'</span>, <span class="hljs-comment">// ä¸»è¿›ç¨‹å…¥å£æ–‡ä»¶</span>
          <span class="hljs-attr">config</span>: <span class="hljs-string">'vite.main.config.ts'</span>,<span class="hljs-comment">// ä¸»è¿›ç¨‹ä¸“ç”¨çš„ Vite é…ç½®æ–‡ä»¶</span>
          <span class="hljs-attr">target</span>: <span class="hljs-string">'main'</span>,<span class="hljs-comment">// æŒ‡å®šç›®æ ‡ä¸º Electron ä¸»è¿›ç¨‹</span>
        },
        {
          <span class="hljs-attr">entry</span>: <span class="hljs-string">'src/preload.ts'</span>, <span class="hljs-comment">// é¢„åŠ è½½è„šæœ¬å…¥å£æ–‡ä»¶</span>
          <span class="hljs-attr">config</span>: <span class="hljs-string">'vite.preload.config.ts'</span>,
          <span class="hljs-attr">target</span>: <span class="hljs-string">'preload'</span>,
        },
      ],
      <span class="hljs-attr">renderer</span>: [
        {
          <span class="hljs-attr">name</span>: <span class="hljs-string">'main_window'</span>,
          <span class="hljs-attr">config</span>: <span class="hljs-string">'vite.renderer.config.ts'</span>,
        },
      ],
    }),
    <span class="hljs-comment">// Fuses are used to enable/disable various Electron functionality</span>
    <span class="hljs-comment">// at package time, before code signing the application</span>
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">FusesPlugin</span>({
      <span class="hljs-attr">version</span>: <span class="hljs-title class_">FuseVersion</span>.<span class="hljs-property">V1</span>,
      [<span class="hljs-title class_">FuseV1Options</span>.<span class="hljs-property">RunAsNode</span>]: <span class="hljs-literal">false</span>,
      [<span class="hljs-title class_">FuseV1Options</span>.<span class="hljs-property">EnableCookieEncryption</span>]: <span class="hljs-literal">true</span>,
      [<span class="hljs-title class_">FuseV1Options</span>.<span class="hljs-property">EnableNodeOptionsEnvironmentVariable</span>]: <span class="hljs-literal">false</span>,
      [<span class="hljs-title class_">FuseV1Options</span>.<span class="hljs-property">EnableNodeCliInspectArguments</span>]: <span class="hljs-literal">false</span>,
      [<span class="hljs-title class_">FuseV1Options</span>.<span class="hljs-property">EnableEmbeddedAsarIntegrityValidation</span>]: <span class="hljs-literal">true</span>,
      [<span class="hljs-title class_">FuseV1Options</span>.<span class="hljs-property">OnlyLoadAppFromAsar</span>]: <span class="hljs-literal">true</span>,
    }),
  ],
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> config;

</code></pre>
<p><strong>æ‰“åŒ…å‘½ä»¤</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. package å‘½ä»¤</span>
npm  run  package 
<span class="hljs-comment"># æ•ˆæœï¼šç”Ÿæˆå¯æ‰§è¡Œç¨‹åºï¼Œä½†è¿˜ä¸æ˜¯å®‰è£…åŒ…ï¼Œç›´æ¥åŒå‡»å°±å¯ä»¥ç”¨</span>
<span class="hljs-comment">#2. make å‘½ä»¤</span>
npm run make
<span class="hljs-comment"># æ•ˆæœï¼š ç”Ÿæˆå®Œæ•´çš„å®‰è£…åŒ…ï¼Œéœ€è¦å®‰è£…å®Œæ¯•ä»¥åä½¿ç”¨</span>
</code></pre>
<p><strong>å¯æ‰§è¡Œç¨‹åºå’Œå®‰è£…åŒ…åŒºåˆ«</strong></p>






























<table><thead><tr><th align="left"><strong>ç»´åº¦</strong></th><th align="left"><strong>å¯æ‰§è¡Œç¨‹åºï¼ˆpackageï¼‰</strong></th><th align="left"><strong>å®‰è£…åŒ…ï¼ˆmakeï¼‰</strong></th></tr></thead><tbody><tr><td align="left"><strong>è¿è¡Œæ–¹å¼</strong></td><td align="left">ç›´æ¥åŒå‡»è¿è¡Œï¼ˆæ— éœ€å®‰è£…ï¼‰</td><td align="left">éœ€è¿è¡Œå®‰è£…å‘å¯¼ï¼Œå°†æ–‡ä»¶éƒ¨ç½²åˆ°ç³»ç»Ÿç›®å½•</td></tr><tr><td align="left"><strong>ç³»ç»Ÿå½±å“</strong></td><td align="left">ä¸ä¿®æ”¹ç³»ç»Ÿç›®å½•ï¼ˆæˆ–ä»…ä¸´æ—¶ç¼“å­˜ï¼‰</td><td align="left">å†™å…¥ç³»ç»Ÿç›®å½•ã€æ³¨å†Œå…ƒæ•°æ®ã€åˆ›å»ºå¿«æ·æ–¹å¼</td></tr><tr><td align="left"><strong>åˆ†å‘å½¢å¼</strong></td><td align="left">å•æ–‡ä»¶/æ–‡ä»¶å¤¹ï¼ˆå¦‚ <code>.exe</code>ã€<code>.app</code>ï¼‰</td><td align="left">å®‰è£…åŒ…ï¼ˆå¦‚ <code>.msi</code>ã€<code>.pkg</code>ã€<code>.dmg</code>ï¼‰</td></tr><tr><td align="left"><strong>ç”¨æˆ·ä½“éªŒ</strong></td><td align="left">é€‚åˆå¿«é€Ÿæµ‹è¯•æˆ–ä¾¿æºä½¿ç”¨</td><td align="left">é€‚åˆæ­£å¼å‘å¸ƒï¼Œæä¾›æ ‡å‡†åŒ–å®‰è£…/å¸è½½æµç¨‹</td></tr></tbody></table>
<p><strong>packageæ‰“åŒ…æ–‡ä»¶ç»“æ„</strong></p>
<p>ğŸ“‚ è¾“å‡ºç›®å½•ç»“æ„ï¼ˆä»¥ Windows ä¸ºä¾‹ï¼‰</p>
<pre><code class="hljs language-md" lang="md">out/
â””â”€â”€ your-app-name-win32-x64/
<span class="hljs-code">    â”œâ”€â”€ your-app-name.exe          # ä¸»å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆElectron å°è£…ï¼‰
    â”œâ”€â”€ resources/
    â”‚   â”œâ”€â”€ app.asar               # åº”ç”¨ä»£ç ï¼ˆASAR å½’æ¡£æ ¼å¼ï¼‰
    â”‚   â”œâ”€â”€ electron.asar          # Electron è¿è¡Œæ—¶ï¼ˆå¯é€‰ï¼‰
    â”‚   â””â”€â”€ ...                    # å…¶ä»–èµ„æºæ–‡ä»¶
    â”œâ”€â”€ node_modules/              # ç”Ÿäº§ä¾èµ–ï¼ˆä»…é™è¢«å¼•ç”¨çš„æ¨¡å—ï¼‰
    â”œâ”€â”€ locales/                   # å¤šè¯­è¨€æ–‡ä»¶ï¼ˆå¦‚ zh-CN.pakï¼‰
    â”œâ”€â”€ swiftshader/               # GPU æ¸²æŸ“å¤‡ç”¨åº“ï¼ˆæ— æ˜¾å¡é©±åŠ¨æ—¶ï¼‰
    â””â”€â”€ ...                        # å…¶ä»–å¹³å°ç›¸å…³æ–‡ä»¶
</span></code></pre>
<p><strong>ä»€ä¹ˆASAR</strong></p>
<p>ä¸€ã€ASAR çš„æœ¬è´¨ï¼šä¸ºä»€ä¹ˆç”¨å®ƒï¼Ÿ</p>
<p>ä¼ ç»Ÿ Electron åº”ç”¨æ‰“åŒ…æ—¶ï¼Œä¼šå°†ä»£ç ç›´æ¥æ”¾åœ¨ <code>resources/app</code>ç›®å½•ä¸‹ï¼ˆæ˜æ–‡å¯è§ï¼‰ï¼Œå­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li><strong>æºç æš´éœ²é£é™©</strong>ï¼šç”¨æˆ·å¯ç›´æ¥æŸ¥çœ‹/ä¿®æ”¹ JS/CSS ä»£ç ï¼›</li>
<li><strong>æ–‡ä»¶ç³»ç»Ÿæ€§èƒ½å·®</strong>ï¼šå¤§é‡å°æ–‡ä»¶è¯»å–æ•ˆç‡ä½ï¼ˆå°¤å…¶ Windowsï¼‰ã€‚</li>
</ol>
<p>ASAR è§£å†³äº†è¿™äº›é—®é¢˜ï¼š</p>
<ul>
<li><strong>å½’æ¡£æ•´åˆ</strong>ï¼šå°†åˆ†æ•£çš„æ–‡ä»¶æ‰“åŒ…æˆå•ä¸ª <code>.asar</code>æ–‡ä»¶ï¼Œç±»ä¼¼ ZIP ä½†æ›´é«˜æ•ˆï¼ˆæ— éœ€è§£å‹å³å¯éšæœºè®¿é—®ï¼‰ï¼›</li>
<li><strong>ä¿æŠ¤æºç </strong>ï¼šè™½ç„¶éåŠ å¯†ï¼ˆå¯ç”¨å·¥å…·è§£å‹ï¼‰ï¼Œä½†å¢åŠ äº†ç›´æ¥é˜…è¯»çš„é—¨æ§›ï¼›</li>
<li><strong>æå‡æ€§èƒ½</strong>ï¼šå‡å°‘æ–‡ä»¶ç³»ç»Ÿè°ƒç”¨æ¬¡æ•°ï¼ŒåŠ å¿«åº”ç”¨å¯åŠ¨é€Ÿåº¦ã€‚</li>
</ul>
<p>äºŒã€ASAR æ–‡ä»¶ç»“æ„ï¼ˆä»¥ <code>app.asar</code>ä¸ºä¾‹ï¼‰</p>
<p>ASAR æ–‡ä»¶å†…éƒ¨æ˜¯ä¸€ä¸ª<strong>è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ</strong>ï¼Œç»“æ„ä¸ä½ çš„é¡¹ç›®ç›®å½•ä¸€è‡´ï¼ˆä½†æ’é™¤äº† <code>devDependencies</code>å’Œæ— å…³æ–‡ä»¶ï¼‰ã€‚ä¾‹å¦‚ï¼Œè‹¥ä½ çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">your-project/
â”œâ”€â”€ package.json       <span class="hljs-meta"># ç”Ÿäº§ä¾èµ–å£°æ˜ï¼ˆä»…ä¿ç•™ dependenciesï¼‰</span>
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.js        <span class="hljs-meta"># ä¸»è¿›ç¨‹ä»£ç </span>
â”‚   â””â”€â”€ renderer/      <span class="hljs-meta"># æ¸²æŸ“è¿›ç¨‹ä»£ç </span>
â”‚       â”œâ”€â”€ index.html
â”‚       â””â”€â”€ app.js
â”œâ”€â”€ <span class="hljs-keyword">static</span>/            <span class="hljs-meta"># é™æ€èµ„æºï¼ˆå›¾ç‰‡ã€å­—ä½“ç­‰ï¼‰</span>
â”‚   â””â”€â”€ logo.png
â””â”€â”€ node_modules/      <span class="hljs-meta"># ä»…åŒ…å«è¢«å¼•ç”¨çš„ç”Ÿäº§ä¾èµ–ï¼ˆç²¾ç®€åï¼‰</span>
</code></pre>
<p>åˆ™ <code>app.asar</code>è§£å‹åçš„è™šæ‹Ÿç»“æ„å®Œå…¨ä¸€è‡´ï¼ˆä½†å®é™…å­˜å‚¨ä¸ºäºŒè¿›åˆ¶å½’æ¡£ï¼‰ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">app<span class="hljs-selector-class">.asar</span> (è™šæ‹Ÿç›®å½•)
â”œâ”€â”€ package<span class="hljs-selector-class">.json</span>
â”œâ”€â”€ <span class="hljs-attribute">src</span>/
â”‚   â”œâ”€â”€ <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.js</span>
â”‚   â””â”€â”€ renderer/
â”‚       â”œâ”€â”€ index<span class="hljs-selector-class">.html</span>
â”‚       â””â”€â”€ app<span class="hljs-selector-class">.js</span>
â”œâ”€â”€ static/
â”‚   â””â”€â”€ logo<span class="hljs-selector-class">.png</span>
â””â”€â”€ node_modules/      # ç²¾ç®€åçš„ç”Ÿäº§ä¾èµ–
</code></pre>
<p>ä¸‰ã€ASAR çš„æ ¸å¿ƒæ“ä½œï¼ˆå¼€å‘å¿…å¤‡ï¼‰</p>
<ol>
<li><strong>è§£å‹ ASAR æ–‡ä»¶</strong>ï¼ˆæŸ¥çœ‹/ä¿®æ”¹æºç ï¼‰</li>
</ol>
<p>è‹¥éœ€è°ƒè¯•æˆ–ä¿®æ”¹æ‰“åŒ…åçš„ä»£ç ï¼Œå¯å…ˆå°† <code>app.asar</code>è§£å‹ä¸ºæ˜æ–‡ç›®å½•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£… asar å·¥å…·ï¼ˆElectron å†…ç½®ï¼Œä¹Ÿå¯å•ç‹¬å®‰è£…ï¼‰</span>
npm install -g @electron/asar

<span class="hljs-comment"># è§£å‹ app.asar åˆ° unpacked ç›®å½•</span>
asar extract out/your-app-win32-x64/resources/app.asar unpacked/
</code></pre>
<p>è§£å‹åï¼Œ<code>unpacked/</code>ç›®å½•å³ä¸ºæ˜æ–‡çš„é¡¹ç›®ç»“æ„ï¼Œå¯ç›´æ¥ç¼–è¾‘ä»£ç ã€‚</p>
<ol start="2">
<li><strong>é‡æ–°æ‰“åŒ…ä¸º ASAR</strong></li>
</ol>
<p>ä¿®æ”¹å®Œæˆåï¼Œå°†æ˜æ–‡ç›®å½•é‡æ–°æ‰“åŒ…ä¸º <code>app.asar</code>ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">asar pack unpacked/ new-app.asar  # å°† unpacked/ æ‰“åŒ…ä¸º new-app.asar
<span class="hljs-meta prompt_"># </span><span class="bash">æ›¿æ¢åŸæ–‡ä»¶ï¼š<span class="hljs-built_in">cp</span> new-app.asar out/your-app-win32-x64/resources/app.asar</span>
</code></pre>
<p>3.  <strong>ç¦ç”¨ ASARï¼ˆæ˜æ–‡ç›®å½•æ¨¡å¼ï¼‰</strong></p>
<p>è‹¥éœ€å®Œå…¨æ˜æ–‡ï¼ˆå¦‚å¼€å‘é˜¶æ®µè°ƒè¯•ï¼‰ï¼Œå¯åœ¨ <code>forge.config.js</code>ä¸­å…³é—­ ASARï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// forge.config.js</span>
<span class="hljs-keyword">module</span>.<span class="hljs-keyword">exports</span> = {
  packagerConfig: {
    asar: <span class="hljs-literal">false</span>,  <span class="hljs-comment">// ç¦ç”¨ ASARï¼Œç”Ÿæˆæ˜æ–‡ app ç›®å½•ï¼ˆè€Œé app.asarï¼‰</span>
  },
};
</code></pre>
<p>æ­¤æ—¶ï¼Œ<code>package</code>å‘½ä»¤ä¼šåœ¨ <code>resources/</code>ä¸‹ç”Ÿæˆ <code>app/</code>æ˜æ–‡ç›®å½•ï¼ˆè€Œé <code>app.asar</code>ï¼‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ‘ŠğŸ‘ŠğŸ‘Šé¢†å¯¼è®©æˆ‘ä»vueè½¬åˆ°reactï¼Œæˆ‘æ•²æ³¥*]]></title>    <link>https://juejin.cn/post/7582516300049596443</link>    <guid>https://juejin.cn/post/7582516300049596443</guid>    <pubDate>2025-12-12T03:26:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582516300049596443" data-draft-id="7582480048959111195" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ‘ŠğŸ‘ŠğŸ‘Šé¢†å¯¼è®©æˆ‘ä»vueè½¬åˆ°reactï¼Œæˆ‘æ•²æ³¥*"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-12T03:26:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä½ å¿ƒé‡Œçš„äºæ™"/> <meta itemprop="url" content="https://juejin.cn/user/4485661445853943"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ‘ŠğŸ‘ŠğŸ‘Šé¢†å¯¼è®©æˆ‘ä»vueè½¬åˆ°reactï¼Œæˆ‘æ•²æ³¥*
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4485661445853943/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä½ å¿ƒé‡Œçš„äºæ™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T03:26:15.000Z" title="Fri Dec 12 2025 03:26:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>é¢†å¯¼è®©æˆ‘ä»vueè½¬åˆ°reactï¼Œæ€ä¹ˆåŠå°¼ï¼Œé‚£å°±å…ˆçœ‹å…³é”®hooksï¼ŒuseRffectçš„ä½¿ç”¨å§ğŸ­ğŸ­ğŸ­</p>
</blockquote>
<p>æ˜é‡‘ä¸Šå…³äº useEffect çš„æ–‡ç« ä¸å°‘ï¼Œ<br/>
ä½†çœŸæ­£æŠŠå®ƒ <strong>è®²æ¸…æ¥šã€è®²é€ã€è®²åˆ°ä½ èƒ½å†™å‡ºå¯ç»´æŠ¤ä»£ç </strong> çš„ï¼Œå…¶å®ä¸å¤šğŸ˜‰ğŸ˜‰ğŸ˜‰ã€‚</p>
<p>ä»Šå¤©å“¥ä»¬ç›´æ¥ç”¨å‡ ä¸ªä½ èƒ½é©¬ä¸Šå¤åˆ¶è¿è¡Œçš„ Demoï¼Œ<br/>
ä»æœ€åŸºç¡€çš„ä¾èµ–æ•°ç»„ã€æ¸…ç†å‰¯ä½œç”¨ã€åˆ°è‡ªå®šä¹‰ Hookï¼Œ<br/>
å†æ‰©å±•åˆ° <strong>TanStack Query ä¸ºä»€ä¹ˆå‡ ä¹å–ä»£ useEffect</strong>ã€‚</p>
<p>ä¸€å¥è¯ï¼š<br/>
<strong>çœ‹å®Œè¿™ç¯‡ï¼Œä½ å¯¹æ‰€æœ‰ â€œuseEffect ä»€ä¹ˆæ—¶å€™å†™ / å†™ä»€ä¹ˆ / ä¸å†™ä¼šæ€æ ·â€ éƒ½æœ‰æ¸…æ™°ç­”æ¡ˆã€‚</strong></p>
<hr/>
<h2 data-id="heading-0">â‘  useEffect çš„æœ¬è´¨ï¼šä¾èµ–æ•°ç»„æ‰æ˜¯æ ¸å¿ƒ</h2>
<p>å…ˆæ¥çœ‹æœ€ç»å…¸çš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">useEffect</span>(() =&gt; {
  console<span class="hljs-selector-class">.log</span>("Effect æ‰§è¡Œï¼Œä¾èµ– count =", count);
}, <span class="hljs-selector-attr">[count]</span>);
</code></pre>
<p>åªè¦ä½ ç†è§£ä¸‹é¢è¿™å¥è¯ï¼Œä½ å°±èƒ½æŒæ¡ useEffectï¼š</p>
<blockquote>
<p><strong>ä¾èµ–å˜ â†’ æ‰§è¡Œ effect â†’ æ‰§è¡Œ cleanupæ¸…ç†å‡½æ•°ï¼ˆå¦‚æœæœ‰ï¼‰</strong></p>
</blockquote>
<p>æ¥çœ‹çœ‹ Demoï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">DemoUseEffect</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> [text, setText] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">""</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Effect æ‰§è¡Œï¼Œä¾èµ– count ="</span>, count);
  }, [count]);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"p-6"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count + 1)}&gt;count + 1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{text}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setText(e.target.value)} /&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>é‡ç‚¹ï¼š</p>
<ul>
<li>ç‚¹æŒ‰é’® â†’ è§¦å‘ effect</li>
<li>è¾“å…¥æ¡† â†’ ä¸ä¼šè§¦å‘ effectï¼ˆå› ä¸º text æ²¡å†™è¿›ä¾èµ–æ•°ç»„ï¼‰</li>
</ul>
<h3 data-id="heading-1">é‚£å¦‚æœä¾èµ–æ•°ç»„çœç•¥ï¼ŸuseEffect(()=&gt;{},æ— ä¾èµ–é¡¹)</h3>
<p><strong>ä¸å†™ä¾èµ–æ•°ç»„ï¼Œç­‰äºä¾èµ–æ‰€æœ‰ stateã€props â†’ æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šæ‰§è¡Œã€‚</strong></p>
<p>æ‰€ä»¥è¿™æ˜¯ React ç¤¾åŒºé»˜è®¤â€œä¸è¦åšâ€çš„äº‹ â€”â€”<br/>
æ€§èƒ½å·®ï¼Œè¿˜å®¹æ˜“å†™å‡ºæ— é™å¾ªç¯ã€‚</p>
<h3 data-id="heading-2">é‚£ä¾èµ–æ•°ç»„å†™æˆ <code>[]</code> å‘¢ï¼Ÿ</h3>
<p><strong>åªæ‰§è¡Œä¸€æ¬¡ï¼Œä¹‹åå†ä¹Ÿä¸ä¼šæ‰§è¡Œã€‚</strong><br/>
å¸¸ç”¨äºåˆå§‹åŒ–é€»è¾‘ã€‚</p>
<h3 data-id="heading-3">é‚£ä¸ºä»€ä¹ˆæˆ‘åœ¨æ§åˆ¶å°çœ‹åˆ° effect æ‰§è¡Œä¸¤æ¬¡ï¼Ÿ</h3>
<p>å› ä¸ºä»React18+ä¹‹åï¼Œ <strong>React.StrictModeï¼ˆå¼€å‘ç¯å¢ƒï¼‰ä¼šä¸»åŠ¨è§¦å‘ â€œmount â†’ unmount â†’ mountâ€ ä¸¤æ¬¡</strong>ï¼Œ<br/>
å¸®ä½ æå‰æš´éœ²å‰¯ä½œç”¨ bugã€‚</p>
<p>ä¸æ˜¯ä½ å†™é”™ï¼Œæ˜¯ React æ•…æ„çš„ã€‚</p>
<p>å¼€å‘ä¸¤æ¬¡ â†’ çº¿ä¸Šä¸€æ¬¡</p>
<pre><code class="hljs language-xml" lang="xml">//main.tsx
 <span class="hljs-tag">&lt;<span class="hljs-name">StrictMode</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">APP</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">StrictMode</span>&gt;</span>
</code></pre>
<hr/>
<h2 data-id="heading-4">â‘¡ è‡ªå®šä¹‰ Hook å…¶å®å°±æ˜¯â€œæŠŠ useEffect å°è£…èµ·æ¥â€</h2>
<p>ä½ å†™è¿‡ä¸‹é¢è¿™ç§åšâ€œlocalStorage æŒä¹…åŒ–â€çš„é€»è¾‘å—ï¼Ÿ</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> useLocalStorage&lt;T&gt;(<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">initialValue</span>: T) {
  <span class="hljs-keyword">const</span> [value, setValue] = <span class="hljs-title function_">useState</span>(
    <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(key) || <span class="hljs-string">"{}"</span>) ?? initialValue
  );

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(key, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value));
  }, [value]);

  <span class="hljs-keyword">return</span> [value, setValue];
}
</code></pre>
<p>é¡µé¢ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-type">const</span> [name, setName] = <span class="hljs-built_in">useLocalStorage</span>(<span class="hljs-string">"demo-name"</span>, <span class="hljs-string">"sss"</span>);
</code></pre>
<p>æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ<br/>
å°±æ˜¯ï¼š</p>
<blockquote>
<p><strong>è‡ªå®šä¹‰ Hook = åŒ…è£… useState / useEffectï¼Œè®©ä½ çš„é¡µé¢æ›´å¹²å‡€ã€é€»è¾‘å¤ç”¨ã€‚</strong></p>
</blockquote>
<p>ä½ è¿”å›ä»€ä¹ˆï¼Œå¤–é¢å°±ç”¨ä»€ä¹ˆã€‚<br/>
å®Œå…¨ç­‰äºâ€œæŠŠ effect å†™å†…éƒ¨ï¼Œå¤–é¢åªç®¡æ‹¿ç»“æœâ€ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆï¼š<br/>
<strong>è‡ªå®šä¹‰ Hook ä¸€èˆ¬éƒ½å¸¦ use å¼€å¤´ï¼Œå¹¶ä¸”å†…éƒ¨å¯èƒ½æœ‰å¤šä¸ª useEffectã€‚</strong></p>
<p>è‡ªå®šä¹‰hooksèƒ½ä¸èƒ½ä¸ç”¨useå¼€å¤´ï¼Ÿ<br/>
ä»»ä½•å‡½æ•°å†…éƒ¨å¦‚æœè°ƒç”¨äº† useState/useEffectï¼Œå°±å¿…é¡»ä»¥ use å¼€å¤´ï¼Œä¸ç„¶å°±æ˜¯ç ´å React çš„ Hook æœºåˆ¶ã€‚å…¶å®æˆ‘è‡ªå·±è¯•äº†ï¼Œä¸ç”¨useå¼€å¤´ä¼¼ä¹ä¹Ÿèƒ½æ­£å¸¸è¿è¡Œï¼ˆğŸ˜•ğŸ˜•ğŸ˜•ï¼‰</p>
<hr/>
<h2 data-id="heading-5">â‘¢ ä¸ºä»€ä¹ˆå¿…é¡»å†™ cleanupï¼Ÿï¼ˆæ¯”å¦‚å®šæ—¶å™¨ï¼‰</h2>
<p>ä¸‹é¢è¿™ä¸ª Demo å¾ˆå¤šäººé¢è¯•å¿…è¢«é—®ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Intervalï¼Œcount="</span>, count);
  }, <span class="hljs-number">1000</span>);

  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ¸…ç†æ—§å®šæ—¶å™¨"</span>);
    <span class="hljs-built_in">clearInterval</span>(timer);
  };
}, [count]);
</code></pre>
<p>æµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<ul>
<li>count ç¬¬ä¸€æ¬¡æ˜¯ 0 â†’ å¼€å¯ä¸€ä¸ªå®šæ—¶å™¨</li>
<li>ç‚¹æŒ‰é’® count = 1 â†’ æ¸…ç†æ—§å®šæ—¶å™¨ â†’ å¼€ä¸€ä¸ªæ–°çš„</li>
<li>å†ç‚¹ â†’ ä¸€æ ·æ¸…ç† â†’ é‡å»º</li>
</ul>
<h3 data-id="heading-6">å¦‚æœä½ <strong>æ²¡æœ‰å†™ cleanup ä¼šæ€æ ·ï¼Ÿ</strong></h3>
<ul>
<li>æ¯æ¬¡ç‚¹éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®šæ—¶å™¨ã€‚</li>
<li>console ä¼šå˜æˆâ€œæœºå…³æªæ¨¡å¼â€ã€‚</li>
<li>æ€§èƒ½æš´æ¶¨ï¼Œæµè§ˆå™¨å‘çƒ­ï¼ŒCPU èµ·é£ ğŸ”¥</li>
<li>React å®˜æ–¹æŠŠè¿™å«åš <strong>å†…å­˜æ³„æ¼ï¼ˆmemory leakï¼‰</strong></li>
</ul>
<p>æ‰€ä»¥ï¼š</p>
<blockquote>
<p><strong>ä»»ä½•äº§ç”Ÿè®¢é˜…ã€å®šæ—¶å™¨ã€äº‹ä»¶ç›‘å¬ã€å¤–éƒ¨èµ„æºçš„ effectï¼Œéƒ½å¿…é¡»å†™ cleanupã€‚</strong></p>
</blockquote>
<p>è¿™æ˜¯ useEffect çš„æœ€é‡è¦è§„åˆ™ä¹‹ä¸€ã€‚</p>
<hr/>
<h2 data-id="heading-7">â‘£ é˜²æŠ– / èŠ‚æµè¾“å…¥æ¡†ï¼šuseEffect çš„ç¥çº§ç”¨æ³•</h2>
<p>é˜²æŠ–é€»è¾‘ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">useDebounce</span>(value: string, delay = <span class="hljs-number">800</span>) {
  const <span class="hljs-selector-attr">[debounced, setDebounced]</span> = <span class="hljs-built_in">useState</span>(value);

  <span class="hljs-built_in">useEffect</span>(() =&gt; {
    const timer = <span class="hljs-built_in">setTimeout</span>(() =&gt; <span class="hljs-built_in">setDebounced</span>(value), delay);
    return () =&gt; <span class="hljs-built_in">clearTimeout</span>(timer);
  }, <span class="hljs-selector-attr">[value, delay]</span>);

  return debounced;
}
</code></pre>
<p>ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">const debounced = <span class="hljs-built_in">useDebounce</span>(text, <span class="hljs-number">1000</span>);

<span class="hljs-built_in">useEffect</span>(() =&gt; {
  if (debounced) {
    console<span class="hljs-selector-class">.log</span>("é˜²æŠ–è§¦å‘ â†’", debounced);
  }
}, <span class="hljs-selector-attr">[debounced]</span>);
</code></pre>
<p>è¾“å…¥å¿«ï¼Œä¸è§¦å‘ï¼›<br/>
åœæ­¢ 1sï¼Œæ‰è§¦å‘ã€‚</p>
<p>è¿™æ˜¯ effect çš„å¦ä¸€ä¸ªæ ¸å¿ƒç”¨æ³•ï¼š<br/>
<strong>æ ¹æ®ä¸šåŠ¡å»åšä¸€äº›è‡ªå®šä¹‰çš„è”åŠ¨å·¥å…·hooks</strong></p>
<hr/>
<h2 data-id="heading-8">â‘¤ é‡ç‚¹æ‰©å±•ï¼šä¸ºä»€ä¹ˆ TanStack Query (<a href="https://link.juejin.cn?target=https%3A%2F%2Ftanstack.com%2Fquery%2Flatest" target="_blank" title="https://tanstack.com/query/latest" ref="nofollow noopener noreferrer">tanstack.com/query/latesâ€¦</a>) è®©ä½ è¶Šæ¥è¶Šå°‘å†™ useEffectï¼Ÿ</h2>
<p>React ç¤¾åŒºç°åœ¨æœ‰ä¸€å¥è¯ï¼š</p>
<blockquote>
<p>â€œè¶Šå†™è¶Šå¤š useEffectï¼Œä»£ç è¶Šä¹±ã€‚useEffectåœ¨ä¸€ä¸ªé¡µé¢ä½¿ç”¨å¤ªå¤šï¼Œå¤ªå¤šçš„å‰¯ä½œç”¨åŸŸå¯¼è‡´ä»£ç é€»è¾‘æåº¦æ··ä¹±ï¼Œæ•°æ®å±‚å½¢æˆå¹²æ‰°â€</p>
</blockquote>
<p>ç„¶åå¤§å®¶å‘ç°äº†æ›´ç°ä»£çš„åšæ³•ï¼š<br/>
<strong>ç”¨ TanStack Queryï¼ˆReact Queryï¼‰ï¼Œå‡ ä¹ä¸éœ€è¦æ‰‹å†™ useEffect æ¥è¯·æ±‚æ•°æ®äº†ã€‚</strong></p>
<p>ä¼ ç»Ÿå†™æ³•ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">useEffect(() =&gt; {
  axios.get("/api/user").then(<span class="hljs-attr">res</span> =&gt; setUser(res.data))<span class="hljs-comment">;</span>
}, <span class="hljs-section">[]</span>)<span class="hljs-comment">;</span>
</code></pre>
<p>æœ‰ï¼š</p>
<ul>
<li>loading çŠ¶æ€</li>
<li>error çŠ¶æ€</li>
<li>ç¼“å­˜ç­–ç•¥</li>
<li>é‡è¯•é€»è¾‘</li>
<li>refetch æœºåˆ¶</li>
</ul>
<p>å†™æˆåœ°ç‹±ã€‚</p>
<p>è€Œ React Queryï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">const</span> { data, isLoading, error } = <span class="hljs-title function_ invoke__">useQuery</span>({
  <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">"user"</span>],
  <span class="hljs-attr">queryFn</span>: fetchUser,
});
</code></pre>
<p>ğŸ‰ ä¸éœ€è¦ useEffectï¼š</p>
<ul>
<li>è‡ªåŠ¨è¯·æ±‚</li>
<li>è‡ªåŠ¨ç¼“å­˜</li>
<li>è‡ªåŠ¨å¤±è´¥é‡è¯•</li>
<li>è‡ªåŠ¨å¹¶å‘æ§åˆ¶</li>
<li>è‡ªåŠ¨åå°åˆ·æ–°ï¼ˆStale-While-Revalidateï¼‰</li>
<li>è‡ªåŠ¨ä¾èµ–æ„ŸçŸ¥æ›´æ–°</li>
</ul>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆï¼š</p>
<blockquote>
<p><strong>React Query æ­£åœ¨è®© useEffect ä¸“æ³¨äºâ€œå‰¯ä½œç”¨â€ï¼Œä¸å†ç”¨äºâ€œä¸šåŠ¡é€»è¾‘â€ã€‚</strong></p>
</blockquote>
<p>è¿™ä¸€ç‚¹å¯¹é¡¹ç›®å¤æ‚åº¦æå‡å·¨å¤§ã€‚</p>
<hr/>
<h2 data-id="heading-9">â‘¥ useEffect çš„é»„é‡‘æ³•åˆ™ï¼ˆä½ èƒ½æŠŠè¿™æ®µè´´åˆ°å›¢é˜Ÿè§„èŒƒé‡Œï¼‰</h2>
<h4 data-id="heading-10"><strong>1. useEffect åªå¤„ç†å‰¯ä½œç”¨ï¼Œä¸è¦å¤„ç†ä¸šåŠ¡</strong></h4>
<p>æ¯”å¦‚è¯·æ±‚æ•°æ® â†’ ç”¨ React Query<br/>
æ¯”å¦‚æ ¼å¼åŒ–æ•°æ® â†’ ç”¨ useMemo<br/>
æ¯”å¦‚äº‹ä»¶ â†’ å°è£…æˆè‡ªå®šä¹‰ Hook</p>
<h4 data-id="heading-11"><strong>2. ä¾èµ–æ•°ç»„æ°¸è¿œè¦å†™å…¨ï¼ˆè®© ESLint å¸®ä½ ï¼‰</strong></h4>
<p>ä¸å†™ / æ¼å†™ä¾èµ– = bug æ¸©åºŠã€‚</p>
<h4 data-id="heading-12"><strong>3. å¦‚éå¿…è¦ï¼Œä¸è¦å†™ç©ºä¾èµ–æ•°ç»„ []</strong></h4>
<p>ä¼šå¯¼è‡´æ•°æ®æ°¸ä¸æ›´æ–°ã€‚</p>
<h4 data-id="heading-13"><strong>4. cleanup æ˜¯å¿…é¡»çš„ï¼ˆå®šæ—¶å™¨ã€äº‹ä»¶ã€è®¢é˜…ï¼‰</strong></h4>
<p>å¦åˆ™å†…å­˜æ³„æ¼ + æ€§èƒ½ç‚¸è£‚ã€‚</p>
<h4 data-id="heading-14"><strong>5. è‡ªå®šä¹‰ Hook = å¤ç”¨ useEffect çš„æœ€ä½³æ–¹å¼</strong></h4>
<hr/>
<h2 data-id="heading-15">æ€»ç»“</h2>
<p>useEffect å·²ç»ä¸æ˜¯ä½ çš„ä¸šåŠ¡é€»è¾‘ä¸­å¿ƒï¼Œ<br/>
è€Œæ˜¯â€œå¤±æ§å‰¯ä½œç”¨çš„æ”¶å®¹æ‰€â€ã€‚</p>
<p>ä½ åº”è¯¥ï¼š</p>
<p><del>-   æŠŠæ•°æ®è¯·æ±‚äº¤ç»™ React Query ï¼ˆéå¿…è¦ï¼‰</del></p>
<ul>
<li>æŠŠçŠ¶æ€äº¤ç»™ state ç®¡ç†åº“ï¼ˆZustand / Jotai / Redux Toolkitï¼‰</li>
<li>åªåœ¨ effect é‡Œå†™å‰¯ä½œç”¨ï¼ˆå®šæ—¶å™¨ã€äº‹ä»¶ç»‘å®šã€è®¢é˜…ç­‰ï¼‰</li>
<li>ç”¨è‡ªå®šä¹‰ Hook å°è£…é€»è¾‘</li>
</ul>
<p><strong>å†™å¹²å‡€çš„ç»„ä»¶ï¼Œåšå¹²å‡€react developers</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç°å¦‚ä»Šçš„AI IDEï¼šæç¤ºè¯ç­–ç•¥ä¸MCP Serverä½¿ç”¨æ„Ÿæ‚Ÿ]]></title>    <link>https://juejin.cn/post/7582491862264004658</link>    <guid>https://juejin.cn/post/7582491862264004658</guid>    <pubDate>2025-12-12T02:06:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582491862264004658" data-draft-id="7582480048958488603" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç°å¦‚ä»Šçš„AI IDEï¼šæç¤ºè¯ç­–ç•¥ä¸MCP Serverä½¿ç”¨æ„Ÿæ‚Ÿ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,MCP,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-12T02:06:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç™¾ç½¹é¸Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/1838039173172072"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç°å¦‚ä»Šçš„AI IDEï¼šæç¤ºè¯ç­–ç•¥ä¸MCP Serverä½¿ç”¨æ„Ÿæ‚Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1838039173172072/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç™¾ç½¹é¸Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T02:06:36.000Z" title="Fri Dec 12 2025 02:06:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨äººå·¥æ™ºèƒ½æŠ€æœ¯é£é€Ÿå‘å±•çš„ä»Šå¤©ï¼ŒAI IDEï¼ˆäººå·¥æ™ºèƒ½é›†æˆå¼€å‘ç¯å¢ƒï¼‰æ­£é€æ¸æˆä¸ºå¼€å‘è€…æ‰‹ä¸­çš„æ–°åˆ©å™¨ã€‚ä¸ä¼ ç»ŸIDEä¸åŒï¼ŒAI IDEä¸ä»…æä¾›ä»£ç ç¼–è¾‘ã€è°ƒè¯•ç­‰åŸºç¡€åŠŸèƒ½ï¼Œè¿˜èƒ½é€šè¿‡å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ä¸ºå¼€å‘è€…æä¾›æ™ºèƒ½ä»£ç ç”Ÿæˆã€é”™è¯¯ä¿®å¤ã€æ¶æ„è®¾è®¡ç­‰é«˜çº§è¾…åŠ©ã€‚ç„¶è€Œï¼Œè¦å……åˆ†å‘æŒ¥AI IDEçš„æ½œåŠ›ï¼Œç¦»ä¸å¼€ä¸¤å¤§é—¨æ§›ï¼šä¸€æ˜¯<strong>é€‚åˆçš„æç¤ºè¯ï¼ˆPromptï¼‰ç­–ç•¥</strong>ï¼ŒäºŒæ˜¯<strong>çµæ´»çš„æ¨¡å—åŒ–ç»„ä»¶æ’ä»¶ç³»ç»Ÿï¼ˆMCP Serverï¼‰</strong>ã€‚</p>
<p>æœ¬æ–‡å°†ç»“åˆå®é™…é¡¹ç›®å¼€å‘ç»éªŒï¼Œæ·±å…¥æ¢è®¨AI IDEä¸­æç¤ºè¯ä¸MCP Serverçš„ååŒä½œç”¨ï¼Œå‰–æä¸åŒMCPå¯¹ç›¸åŒæç¤ºè¯äº§ç”Ÿå·®å¼‚åŒ–æ•ˆæœçš„åŸç†ï¼Œå¹¶ç»™å‡ºé’ˆå¯¹AI IDEçš„æç¤ºè¯é€‰æ‹©ä¸é…ç½®æœ€ä½³å®è·µã€‚</p>
<h2 data-id="heading-1">æ ¸å¿ƒæ¦‚å¿µè§£æ</h2>
<h3 data-id="heading-2">1. AI IDEæ¦‚è¿°</h3>
<p>AI IDEæ˜¯é›†æˆäº†äººå·¥æ™ºèƒ½èƒ½åŠ›çš„æ–°ä¸€ä»£å¼€å‘ç¯å¢ƒï¼Œå…¸å‹ä»£è¡¨åŒ…æ‹¬GitHub Copilotã€JetBrains AI Assistantã€Amazon CodeWhispererç­‰ã€‚ä¸ä¼ ç»ŸIDEç›¸æ¯”ï¼ŒAI IDEçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºèƒ½å¤Ÿç†è§£è‡ªç„¶è¯­è¨€æŒ‡ä»¤ï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºä»£ç å®ç°ï¼Œå¤§å¹…æå‡å¼€å‘æ•ˆç‡ã€‚</p>
<h3 data-id="heading-3">2. Promptæç¤ºè¯ç­–ç•¥</h3>
<p>æç¤ºè¯æ˜¯å¼€å‘è€…ä¸AI IDEæ²Ÿé€šçš„æ¡¥æ¢ï¼Œæ˜¯æŒ‡å¯¼AIç”Ÿæˆç‰¹å®šè¾“å‡ºçš„æŒ‡ä»¤é›†åˆã€‚ä¸€ä¸ªä¼˜ç§€çš„æç¤ºè¯ç­–ç•¥åº”åŒ…å«ä»¥ä¸‹è¦ç´ ï¼š</p>
<ul>
<li><strong>æ˜ç¡®çš„ä»»åŠ¡æè¿°</strong>ï¼šæ¸…æ™°å‘ŠçŸ¥AIéœ€è¦å®Œæˆçš„å…·ä½“ä»»åŠ¡</li>
<li><strong>ä¸Šä¸‹æ–‡ä¿¡æ¯</strong>ï¼šæä¾›å¿…è¦çš„é¡¹ç›®èƒŒæ™¯ã€æŠ€æœ¯æ ˆç­‰ä¿¡æ¯</li>
<li><strong>é¢„æœŸè¾“å‡ºæ ¼å¼</strong>ï¼šæŒ‡å®šAIç”Ÿæˆå†…å®¹çš„æ ¼å¼å’Œç»“æ„</li>
<li><strong>çº¦æŸæ¡ä»¶</strong>ï¼šå®šä¹‰è¾“å‡ºçš„è¾¹ç•Œå’Œé™åˆ¶</li>
</ul>
<h3 data-id="heading-4">3. MCPï¼ˆModular Component Pluginsï¼‰ç³»ç»Ÿ</h3>
<p>MCPï¼ˆæ¨¡å—åŒ–ç»„ä»¶æ’ä»¶ç³»ç»Ÿï¼‰æ˜¯ç±»ä¼¼äºæµè§ˆå™¨æ‰©å±•å’ŒVSCodeæ’ä»¶çš„æ¨¡å—åŒ–ç»„ä»¶æ¶æ„ï¼Œå…è®¸å¼€å‘è€…ä¸ºAI IDEå®‰è£…ã€é…ç½®å’Œç®¡ç†å„ç§åŠŸèƒ½æ¨¡å—ã€‚MCPçš„æ ¸å¿ƒç‰¹ç‚¹åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>æ¨¡å—åŒ–è®¾è®¡</strong>ï¼šæ¯ä¸ªæ’ä»¶ä¸“æ³¨äºå•ä¸€åŠŸèƒ½ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•</li>
<li><strong>æ¾è€¦åˆæ¶æ„</strong>ï¼šæ’ä»¶ä¹‹é—´é€šè¿‡æ ‡å‡†æ¥å£é€šä¿¡ï¼Œé™ä½ä¾èµ–</li>
<li><strong>åŠ¨æ€åŠ è½½</strong>ï¼šæ”¯æŒåœ¨è¿è¡Œæ—¶åŠ è½½å’Œå¸è½½æ’ä»¶</li>
<li><strong>å¯é…ç½®æ€§</strong>ï¼šå…è®¸ç”¨æˆ·æ ¹æ®éœ€æ±‚è‡ªå®šä¹‰æ’ä»¶è¡Œä¸º</li>
</ul>
<h3 data-id="heading-5">4. MCP Serveræ¶æ„</h3>
<p>MCP Serveræ˜¯MCPç³»ç»Ÿçš„æ ¸å¿ƒç»„ä»¶ï¼Œè´Ÿè´£æ’ä»¶çš„ç®¡ç†ã€é€šä¿¡å’Œæ‰§è¡Œã€‚å…¶ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<ul>
<li>æ’ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆå®‰è£…ã€æ¿€æ´»ã€æ›´æ–°ã€å¸è½½ï¼‰</li>
<li>æ’ä»¶é—´é€šä¿¡ä¸æ•°æ®å…±äº«</li>
<li>èµ„æºéš”ç¦»ä¸å®‰å…¨æ§åˆ¶</li>
<li>æ€§èƒ½ç›‘æ§ä¸ä¼˜åŒ–</li>
</ul>
<h2 data-id="heading-6">æŠ€æœ¯åŸç†ï¼šMCPä¸æç¤ºè¯çš„ååŒä½œç”¨</h2>
<h3 data-id="heading-7">1. ä¸åŒMCPå¯¹ç›¸åŒæç¤ºè¯äº§ç”Ÿå·®å¼‚åŒ–æ•ˆæœçš„åŸç†</h3>
<p>å½“ç›¸åŒçš„æç¤ºè¯è¾“å…¥åˆ°ä¸åŒMCPé…ç½®çš„AI IDEä¸­æ—¶ï¼Œä¼šäº§ç”Ÿæˆªç„¶ä¸åŒçš„è¾“å‡ºç»“æœã€‚å…¶æ ¸å¿ƒåŸç†åœ¨äºï¼š</p>
<h4 data-id="heading-8">ï¼ˆ1ï¼‰æ’ä»¶ä¸Šä¸‹æ–‡è¿‡æ»¤</h4>
<p>ä¸åŒMCPä¼šä¸ºAIæä¾›ä¸åŒçš„ä¸Šä¸‹æ–‡è¿‡æ»¤æœºåˆ¶ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªé…ç½®äº†<strong>ä»£ç è´¨é‡æ£€æŸ¥æ’ä»¶</strong>çš„AI IDEä¸­ï¼Œæç¤ºè¯"ä¼˜åŒ–è¿™æ®µä»£ç "ä¼šæ›´å…³æ³¨æ€§èƒ½å’Œå¯è¯»æ€§ï¼›è€Œåœ¨é…ç½®äº†<strong>å®‰å…¨å®¡è®¡æ’ä»¶</strong>çš„ç¯å¢ƒä¸­ï¼ŒåŒæ ·çš„æç¤ºè¯ä¼šä¼˜å…ˆè€ƒè™‘ä»£ç çš„å®‰å…¨æ€§ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŸå§‹ä»£ç </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">calculateSum</span>(<span class="hljs-params">arr</span>) {
    <span class="hljs-keyword">let</span> sum = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; arr.<span class="hljs-property">length</span>; i++) {
        sum += arr[i];
    }
    <span class="hljs-keyword">return</span> sum;
}

<span class="hljs-comment">// ä»£ç è´¨é‡æ’ä»¶ä¼˜åŒ–ç»“æœ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">calculateSum</span>(<span class="hljs-params">arr</span>) {
    <span class="hljs-keyword">return</span> arr.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, current</span>) =&gt;</span> sum + current, <span class="hljs-number">0</span>);
}

<span class="hljs-comment">// å®‰å…¨å®¡è®¡æ’ä»¶ä¼˜åŒ–ç»“æœ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">calculateSum</span>(<span class="hljs-params">arr</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(arr)) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'Input must be an array'</span>);
    }
    <span class="hljs-keyword">return</span> arr.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, current</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> current !== <span class="hljs-string">'number'</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'Array elements must be numbers'</span>);
        }
        <span class="hljs-keyword">return</span> sum + current;
    }, <span class="hljs-number">0</span>);
}
</code></pre>
<h4 data-id="heading-9">ï¼ˆ2ï¼‰æ’ä»¶ä¼˜å…ˆçº§ä¸æƒé‡</h4>
<p>MCP Serverä¼šä¸ºä¸åŒæ’ä»¶åˆ†é…ä¼˜å…ˆçº§å’Œæƒé‡ï¼Œå½±å“AIå¯¹æç¤ºè¯çš„ç†è§£å’Œæ‰§è¡Œã€‚é«˜ä¼˜å…ˆçº§çš„æ’ä»¶ä¼šä¼˜å…ˆå½±å“AIçš„è¾“å‡ºï¼Œè€Œæƒé‡åˆ™å†³å®šäº†æ’ä»¶å¯¹æœ€ç»ˆç»“æœçš„å½±å“ç¨‹åº¦ã€‚</p>
<h4 data-id="heading-10">ï¼ˆ3ï¼‰æ’ä»¶é—´çš„åä½œä¸å†²çª</h4>
<p>å¤šä¸ªæ’ä»¶å¯èƒ½ä¼šåŒæ—¶å¯¹æç¤ºè¯äº§ç”Ÿå½±å“ï¼Œå½¢æˆåä½œæˆ–å†²çªå…³ç³»ï¼š</p>
<ul>
<li><strong>åä½œå…³ç³»</strong>ï¼šä¾‹å¦‚ï¼Œä»£ç ç”Ÿæˆæ’ä»¶ä¸æµ‹è¯•ç”Ÿæˆæ’ä»¶ååŒå·¥ä½œï¼Œæ ¹æ®åŒä¸€æç¤ºè¯ç”Ÿæˆå®Œæ•´çš„åŠŸèƒ½ä»£ç å’Œæµ‹è¯•ç”¨ä¾‹</li>
<li><strong>å†²çªå…³ç³»</strong>ï¼šä¾‹å¦‚ï¼Œé£æ ¼æ ¼å¼åŒ–æ’ä»¶ä¸æ€§èƒ½ä¼˜åŒ–æ’ä»¶å¯èƒ½å¯¹åŒä¸€ä»£ç ç‰‡æ®µäº§ç”Ÿä¸åŒçš„ä¿®æ”¹å»ºè®®</li>
</ul>
<h3 data-id="heading-11">2. MCP Serverçš„æ¶æ„ç‰¹ç‚¹</h3>
<p>MCP Serveré€šå¸¸é‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ å±‚ï¼š</p>
<h4 data-id="heading-12">ï¼ˆ1ï¼‰æ¥å£å±‚</h4>
<p>æä¾›æ ‡å‡†åŒ–çš„APIæ¥å£ï¼Œç”¨äºæ’ä»¶æ³¨å†Œã€é€šä¿¡å’Œè°ƒç”¨ã€‚æ¥å£å±‚é‡‡ç”¨RESTfulæˆ–WebSocketåè®®ï¼Œç¡®ä¿è·¨è¯­è¨€å’Œè·¨å¹³å°çš„å…¼å®¹æ€§ã€‚</p>
<h4 data-id="heading-13">ï¼ˆ2ï¼‰æ ¸å¿ƒæœåŠ¡å±‚</h4>
<p>è´Ÿè´£æ’ä»¶çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€å®‰å…¨æ§åˆ¶ã€èµ„æºè°ƒåº¦ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚æ ¸å¿ƒæœåŠ¡å±‚æ˜¯MCP Serverçš„å¤§è„‘ï¼Œåè°ƒå„ä¸ªæ¨¡å—çš„å·¥ä½œã€‚</p>
<h4 data-id="heading-14">ï¼ˆ3ï¼‰æ’ä»¶å®¹å™¨å±‚</h4>
<p>ä¸ºæ¯ä¸ªæ’ä»¶æä¾›ç‹¬ç«‹çš„è¿è¡Œç¯å¢ƒï¼Œå®ç°èµ„æºéš”ç¦»å’Œå®‰å…¨æ²™ç®±ã€‚æ’ä»¶å®¹å™¨å±‚æ”¯æŒå¤šç§æ’ä»¶è¿è¡Œæ—¶ç¯å¢ƒï¼Œå¦‚JavaScriptã€Pythonã€Javaç­‰ã€‚</p>
<h4 data-id="heading-15">ï¼ˆ4ï¼‰å­˜å‚¨å±‚</h4>
<p>ç®¡ç†æ’ä»¶çš„å…ƒæ•°æ®ã€é…ç½®ä¿¡æ¯å’ŒçŠ¶æ€æ•°æ®ã€‚å­˜å‚¨å±‚é€šå¸¸é‡‡ç”¨å…³ç³»å‹æ•°æ®åº“æˆ–NoSQLæ•°æ®åº“ï¼Œç¡®ä¿æ•°æ®çš„å¯é æ€§å’Œé«˜æ€§èƒ½è®¿é—®ã€‚</p>
<h2 data-id="heading-16">å®é™…åº”ç”¨æ¡ˆä¾‹ï¼šåŸºäºlangGraph-fast-projectçš„å®è·µ</h2>
<p>ä¸ºäº†æ›´å¥½åœ°ç†è§£MCPä¸æç¤ºè¯çš„ååŒä½œç”¨ï¼Œæˆ‘ä»¬ä»¥<strong>langGraph-fast-project</strong>é¡¹ç›®ä¸ºä¾‹ï¼Œå±•ç¤ºå…¶åœ¨å®é™…å¼€å‘ä¸­çš„åº”ç”¨ã€‚</p>
<h3 data-id="heading-17">æ¡ˆä¾‹1ï¼šUIæ ·å¼è°ƒæ•´ä¸æç¤ºè¯ç­–ç•¥</h3>
<p>åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¼€å‘è€…æ›¾æå‡º"è°ƒæ•´EmptyStateç»„ä»¶é€æ˜åº¦"çš„éœ€æ±‚ã€‚é€šè¿‡é€‚å½“çš„æç¤ºè¯ç­–ç•¥ï¼Œå¯ä»¥æŒ‡å¯¼AI IDEç”Ÿæˆç²¾ç¡®çš„CSSä¿®æ”¹ï¼š</p>
<p><strong>æç¤ºè¯ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs">è¯·å°†EmptyState.tsxæ–‡ä»¶ä¸­ç¬¬82è¡Œçš„é€æ˜åº¦æ”¹ä¸º0.6ï¼Œå¹¶è°ƒæ•´å¦ä¸€ä¸ªç›¸å…³å…ƒç´ çš„é€æ˜åº¦ï¼Œç¡®ä¿è§†è§‰æ•ˆæœä¸€è‡´ã€‚
</code></pre>
<p>AI IDEæ ¹æ®æ­¤æç¤ºè¯ï¼Œè‡ªåŠ¨å®šä½åˆ°ç›®æ ‡æ–‡ä»¶å’Œä»£ç è¡Œï¼Œå¹¶ç”Ÿæˆå¦‚ä¸‹ä¿®æ”¹ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// ä¿®æ”¹å‰</span>
&lt;button className=<span class="hljs-string">"wuxia-button p-5 rounded-2xl bg-bamboo-paper/40 backdrop-blur-md"</span>&gt;
    <span class="hljs-title class_">LangGraph</span> ç«¹æ—ç§˜ç±
&lt;/button&gt;

<span class="hljs-comment">// ä¿®æ”¹å</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"wuxia-button p-5 rounded-2xl bg-bamboo-paper/60 backdrop-blur-md"</span>&gt;</span>
    LangGraph ç«¹æ—ç§˜ç±
<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
</code></pre>
<p>åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œ<strong>UIç»„ä»¶æ’ä»¶</strong>å’Œ<strong>æ ·å¼ç®¡ç†æ’ä»¶</strong>ååŒå·¥ä½œï¼Œç¡®ä¿ä¿®æ”¹ç¬¦åˆé¡¹ç›®çš„è®¾è®¡è§„èŒƒå’Œè§†è§‰é£æ ¼ã€‚</p>
<h3 data-id="heading-18">æ¡ˆä¾‹2ï¼šæ–‡æ¡ˆé‡æ„ä¸MCPæ’ä»¶ååŒ</h3>
<p>å¼€å‘è€…è¿˜æå‡ºäº†"å°†é¡¹ç›®æ–‡æ¡ˆé‡æ„ä¸ºé™¶æ¸Šæ˜é£æ ¼"çš„éœ€æ±‚ã€‚é€šè¿‡é…ç½®é€‚å½“çš„MCPæ’ä»¶ç»„åˆï¼Œå¯ä»¥å®ç°æ›´ç²¾å‡†çš„æ–‡æ¡ˆè½¬æ¢ï¼š</p>
<p><strong>æç¤ºè¯ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs">è¯·å°†é¡¹ç›®ä¸­çš„æ–‡æ¡ˆé‡æ„ä¸ºç±»ä¼¼äºé™¶æ¸Šæ˜é£æ ¼çš„æ–‡æ¡ˆï¼Œä¿æŒåŸæ„ä¸å˜ï¼Œå¢å¼ºè‡ªç„¶è´¨æœ´çš„ç”°å›­é£æ ¼ã€‚
</code></pre>
<p>AI IDEåœ¨<strong>æ–‡æ¡ˆé£æ ¼è½¬æ¢æ’ä»¶</strong>å’Œ<strong>é¡¹ç›®ä¸Šä¸‹æ–‡æ’ä»¶</strong>çš„ååŒä½œç”¨ä¸‹ï¼Œç”Ÿæˆå¦‚ä¸‹ä¿®æ”¹ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// ä¿®æ”¹å‰</span>
&lt;h1 className=<span class="hljs-string">"text-4xl font-bold"</span>&gt;è¸å…¥ç«¹æ—ç¼–ç¨‹æ–°å¢ƒç•Œ&lt;/h1&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-lg"</span>&gt;</span>è¿ç”¨ç«¹æ—æ™ºæ…§ï¼Œä¸ºæ‚¨å‘ˆç°ä»£ç ç”Ÿæˆã€ç®—æ³•åˆ†æä¸ç³»ç»Ÿè°ƒè¯•ä¹‹é“<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>

<span class="hljs-comment">// ä¿®æ”¹å</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-4xl font-bold"</span>&gt;</span>å½’å›­ç«¹é‡Œç¼–ç¨‹é—´<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-lg"</span>&gt;</span>åçœ‹ç«¹å½±æ‘‡æ›³ï¼Œä¸ºå›æŒ‡ç‚¹ä»£ç ä¹‹è¶£ã€ç®—æ³•ä¹‹å¦™ä¸è°ƒè¯•ä¹‹æ³•<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
</code></pre>
<p>åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œ<strong>æ–‡æ¡ˆé£æ ¼è½¬æ¢æ’ä»¶</strong>è´Ÿè´£å°†ç°ä»£é£æ ¼çš„æ–‡æ¡ˆè½¬æ¢ä¸ºé™¶æ¸Šæ˜é£æ ¼ï¼Œè€Œ<strong>é¡¹ç›®ä¸Šä¸‹æ–‡æ’ä»¶</strong>åˆ™ç¡®ä¿ä¿®æ”¹ç¬¦åˆé¡¹ç›®çš„ç«¹æ—å±±æ°´ä¸»é¢˜ã€‚</p>
<h3 data-id="heading-19">æ¡ˆä¾‹3ï¼šèƒŒæ™¯æ ·å¼é‡æ„ä¸MCPæ¨¡å—åŒ–</h3>
<p>å¼€å‘è€…è¿˜æå‡ºäº†"å°†èƒŒæ™¯æ ·å¼æå–ä¸ºç‹¬ç«‹çš„å¯å¤ç”¨ç»„ä»¶"çš„éœ€æ±‚ã€‚é€šè¿‡<strong>æ¨¡å—åŒ–é‡æ„æ’ä»¶</strong>å’Œ<strong>ç»„ä»¶è®¾è®¡æ’ä»¶</strong>çš„ååŒå·¥ä½œï¼Œå¯ä»¥å®ç°é«˜æ•ˆçš„ä»£ç é‡æ„ï¼š</p>
<p><strong>æç¤ºè¯ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs">è¯·å°†EmptyState.tsxä¸­çš„èƒŒæ™¯æ ·å¼å®ç°æå–ä¸ºç‹¬ç«‹çš„å¯å¤ç”¨æ ·å¼ç»„ä»¶ï¼Œç¡®ä¿è¯¥èƒŒæ™¯æ ·å¼åœ¨æ•´ä¸ªèŠå¤©ç•Œé¢ä¿æŒä¸€è‡´æ˜¾ç¤ºã€‚
</code></pre>
<p>AI IDEç”Ÿæˆå¦‚ä¸‹é‡æ„æ–¹æ¡ˆï¼š</p>
<ol>
<li>åˆ›å»ºç‹¬ç«‹çš„<code>BackgroundEffects.tsx</code>ç»„ä»¶ï¼ŒåŒ…å«è§†é¢‘èƒŒæ™¯å’Œæ³¼å¢¨ç«¹æ—å±±æ°´æ•ˆæœ</li>
<li>åœ¨<code>page.tsx</code>ä¸­å…¨å±€åº”ç”¨è¯¥èƒŒæ™¯ç»„ä»¶</li>
<li>ç§»é™¤<code>EmptyState.tsx</code>ä¸­é‡å¤çš„èƒŒæ™¯å®ç°</li>
</ol>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// BackgroundEffects.tsx</span>
<span class="hljs-string">'use client'</span>

<span class="hljs-comment">/**
 * ç‡•äº‘åå…­å£°ä¸»é¢˜è§†é¢‘èƒŒæ™¯ç»„ä»¶
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">YanyanVideoBackground</span> = (<span class="hljs-params"/>) =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"fixed inset-0 z-0"</span>&gt;</span>
    {/* è§†é¢‘å…ƒç´  */}
    <span class="hljs-tag">&lt;<span class="hljs-name">video</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">"w-full h-full object-cover"</span>
      <span class="hljs-attr">autoPlay</span>
      <span class="hljs-attr">muted</span>
      <span class="hljs-attr">loop</span>
      <span class="hljs-attr">playsInline</span>
      <span class="hljs-attr">poster</span>=<span class="hljs-string">"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1920' height='1080'%3E%3Crect width='100%25' height='100%25' fill='%23000'/%3E%3C/svg%3E"</span>
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/videos/yanyan-background.mp4"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"video/mp4"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/videos/yanyan-background.webm"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"video/webm"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span>
    
    {/* æ¸å˜é®ç½©å±‚ */}
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/40"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    
    {/* ç«¹è‰²è°ƒè‰²è°ƒå±‚ */}
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"absolute inset-0 bg-gradient-to-br from-bamboo-qing/10 via-transparent to-bamboo-stone/5"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
)

<span class="hljs-comment">/**
 * æ³¼å¢¨ç«¹æ—å±±æ°´é£æ ¼èƒŒæ™¯æ•ˆæœç»„ä»¶
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">BackgroundEffects</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      {/* ç‡•äº‘åå…­å£°è§†é¢‘èƒŒæ™¯ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">YanyanVideoBackground</span> /&gt;</span>
      
      {/* å®£çº¸çº¹ç†èƒŒæ™¯ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"absolute inset-0 opacity-5"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"absolute inset-0"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">backgroundImage:</span> `<span class="hljs-attr">url</span>("<span class="hljs-attr">data:image</span>/<span class="hljs-attr">svg</span>+<span class="hljs-attr">xml</span>,%<span class="hljs-attr">3Csvg</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">'http://www.w3.org/2000/svg'</span> <span class="hljs-attr">width</span>=<span class="hljs-string">'4'</span> <span class="hljs-attr">height</span>=<span class="hljs-string">'4'</span> <span class="hljs-attr">viewBox</span>=<span class="hljs-string">'0 0 4 4'</span>%<span class="hljs-attr">3E</span>%<span class="hljs-attr">3Cpath</span> <span class="hljs-attr">fill</span>=<span class="hljs-string">'%23000'</span> <span class="hljs-attr">fill-opacity</span>=<span class="hljs-string">'0.1'</span> <span class="hljs-attr">d</span>=<span class="hljs-string">'M1 3h1v1H1V3zm2-2h1v1H3V1z'</span>%<span class="hljs-attr">3E</span>%<span class="hljs-attr">3C</span>/<span class="hljs-attr">path</span>%<span class="hljs-attr">3E</span>%<span class="hljs-attr">3C</span>/<span class="hljs-attr">svg</span>%<span class="hljs-attr">3E</span>")` }}&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      {/* å…¶ä»–èƒŒæ™¯æ•ˆæœ */}
      {/* ... */}
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}
</code></pre>
<p>åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œ<strong>æ¨¡å—åŒ–é‡æ„æ’ä»¶</strong>è´Ÿè´£ä»£ç ç»“æ„çš„é‡æ„ï¼Œè€Œ<strong>ç»„ä»¶è®¾è®¡æ’ä»¶</strong>åˆ™ç¡®ä¿æ–°ç»„ä»¶ç¬¦åˆé¡¹ç›®çš„æ¶æ„è®¾è®¡è§„èŒƒã€‚</p>
<h2 data-id="heading-20">æœ€ä½³å®è·µå»ºè®®</h2>
<h3 data-id="heading-21">1. æç¤ºè¯ç­–ç•¥é€‰æ‹©ä¸é…ç½®</h3>
<h4 data-id="heading-22">ï¼ˆ1ï¼‰æ˜ç¡®ä»»åŠ¡è¾¹ç•Œ</h4>
<p>åœ¨ç¼–å†™æç¤ºè¯æ—¶ï¼Œåº”æ˜ç¡®ä»»åŠ¡çš„è¾¹ç•Œå’ŒèŒƒå›´ï¼Œé¿å…æ¨¡ç³Šä¸æ¸…çš„æè¿°ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨"å°†EmptyState.tsxæ–‡ä»¶ä¸­ç¬¬82è¡Œçš„é€æ˜åº¦æ”¹ä¸º0.6"ä»£æ›¿"è°ƒæ•´é€æ˜åº¦"ã€‚</p>
<h4 data-id="heading-23">ï¼ˆ2ï¼‰æä¾›å……åˆ†çš„ä¸Šä¸‹æ–‡</h4>
<p>ä¸ºAI IDEæä¾›è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ŒåŒ…æ‹¬é¡¹ç›®èƒŒæ™¯ã€æŠ€æœ¯æ ˆã€è®¾è®¡è§„èŒƒç­‰ã€‚ä¾‹å¦‚ï¼Œåœ¨è¦æ±‚æ–‡æ¡ˆé£æ ¼è½¬æ¢æ—¶ï¼Œæ˜ç¡®æŒ‡å®š"é™¶æ¸Šæ˜é£æ ¼"å’Œ"ç«¹æ—å±±æ°´ä¸»é¢˜"ã€‚</p>
<h4 data-id="heading-24">ï¼ˆ3ï¼‰ä½¿ç”¨ç»“æ„åŒ–æç¤ºè¯</h4>
<p>é‡‡ç”¨ç»“æ„åŒ–çš„æç¤ºè¯æ ¼å¼ï¼Œå¦‚ä½¿ç”¨#æ ‡é¢˜ã€-åˆ—è¡¨ç­‰æ–¹å¼ç»„ç»‡ä¿¡æ¯ï¼Œæé«˜AIå¯¹ä»»åŠ¡çš„ç†è§£å‡†ç¡®ç‡ã€‚</p>
<h4 data-id="heading-25">ï¼ˆ4ï¼‰è¿­ä»£ä¼˜åŒ–æç¤ºè¯</h4>
<p>æ ¹æ®AI IDEçš„åé¦ˆç»“æœï¼Œä¸æ–­ä¼˜åŒ–æç¤ºè¯çš„è¡¨è¿°å’Œç»“æ„ã€‚è®°å½•æœ‰æ•ˆçš„æç¤ºè¯æ¨¡æ¿ï¼Œå½¢æˆå›¢é˜Ÿå†…éƒ¨çš„æœ€ä½³å®è·µåº“ã€‚</p>
<h3 data-id="heading-26">2. MCP Serverçš„ä½¿ç”¨ä¸é…ç½®</h3>
<h4 data-id="heading-27">ï¼ˆ1ï¼‰æŒ‰éœ€é€‰æ‹©æ’ä»¶</h4>
<p>æ ¹æ®é¡¹ç›®éœ€æ±‚å’Œå¼€å‘åœºæ™¯ï¼Œé€‰æ‹©é€‚åˆçš„MCPæ’ä»¶ã€‚é¿å…å®‰è£…è¿‡å¤šä¸å¿…è¦çš„æ’ä»¶ï¼Œä»¥å…å½±å“AI IDEçš„æ€§èƒ½å’Œå“åº”é€Ÿåº¦ã€‚</p>
<h4 data-id="heading-28">ï¼ˆ2ï¼‰åˆç†é…ç½®æ’ä»¶ä¼˜å…ˆçº§</h4>
<p>æ ¹æ®æ’ä»¶çš„é‡è¦æ€§å’Œä½¿ç”¨é¢‘ç‡ï¼Œé…ç½®åˆç†çš„æ’ä»¶ä¼˜å…ˆçº§ã€‚ä¾‹å¦‚ï¼Œå°†ä»£ç è´¨é‡æ£€æŸ¥æ’ä»¶çš„ä¼˜å…ˆçº§è®¾ç½®é«˜äºé£æ ¼æ ¼å¼åŒ–æ’ä»¶ã€‚</p>
<h4 data-id="heading-29">ï¼ˆ3ï¼‰å»ºç«‹æ’ä»¶åä½œæœºåˆ¶</h4>
<p>å¯¹äºç»å¸¸ååŒå·¥ä½œçš„æ’ä»¶ç»„åˆï¼Œå»ºç«‹æ ‡å‡†åŒ–çš„åä½œæœºåˆ¶å’Œé€šä¿¡åè®®ã€‚ä¾‹å¦‚ï¼Œä»£ç ç”Ÿæˆæ’ä»¶ä¸æµ‹è¯•ç”Ÿæˆæ’ä»¶çš„ååŒå·¥ä½œæµç¨‹ã€‚</p>
<h4 data-id="heading-30">ï¼ˆ4ï¼‰å®šæœŸæ›´æ–°å’Œç»´æŠ¤æ’ä»¶</h4>
<p>åŠæ—¶æ›´æ–°æ’ä»¶ç‰ˆæœ¬ï¼Œä¿®å¤å®‰å…¨æ¼æ´å’Œæ€§èƒ½é—®é¢˜ã€‚å®šæœŸæ¸…ç†ä¸å†ä½¿ç”¨çš„æ’ä»¶ï¼Œä¿æŒMCPç³»ç»Ÿçš„ç®€æ´å’Œé«˜æ•ˆã€‚</p>
<h2 data-id="heading-31">æ€»ç»“</h2>
<p>ç°å¦‚ä»Šçš„AI IDEå·²ç»ä¸å†æ˜¯ç®€å•çš„ä»£ç ç¼–è¾‘å™¨ï¼Œè€Œæ˜¯é›†AIè¾…åŠ©ã€æ’ä»¶æ‰©å±•ã€é¡¹ç›®ç®¡ç†äºä¸€ä½“çš„ç»¼åˆæ€§å¼€å‘å¹³å°ã€‚è¦å……åˆ†å‘æŒ¥AI IDEçš„æ½œåŠ›ï¼Œéœ€è¦æŒæ¡ç§‘å­¦çš„æç¤ºè¯ç­–ç•¥å’Œçµæ´»çš„MCP Serveré…ç½®ã€‚</p>
<p>é€šè¿‡æœ¬æ–‡çš„åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š</p>
<ol>
<li><strong>æç¤ºè¯æ˜¯AI IDEçš„çµé­‚</strong>ï¼šä¼˜ç§€çš„æç¤ºè¯ç­–ç•¥èƒ½å¤Ÿå¤§å¹…æå‡AI IDEçš„ä»£ç ç”Ÿæˆè´¨é‡å’Œæ•ˆç‡</li>
<li><strong>MCPæ˜¯AI IDEçš„éª¨æ¶</strong>ï¼šæ¨¡å—åŒ–çš„æ’ä»¶ç³»ç»Ÿä¸ºAI IDEæä¾›äº†æ— é™çš„æ‰©å±•å¯èƒ½æ€§</li>
<li><strong>ååŒä½œç”¨æ˜¯å…³é”®</strong>ï¼šæç¤ºè¯ä¸MCPçš„ååŒå·¥ä½œï¼Œèƒ½å¤Ÿäº§ç”Ÿ1+1&gt;2çš„æ•ˆæœ</li>
</ol>
<p>éšç€AIæŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼Œæˆ‘ä»¬æœ‰ç†ç”±ç›¸ä¿¡ï¼ŒAI IDEå’ŒMCP Serverå°†åœ¨æœªæ¥çš„è½¯ä»¶å¼€å‘ä¸­å‘æŒ¥è¶Šæ¥è¶Šé‡è¦çš„ä½œç”¨ã€‚å¼€å‘è€…éœ€è¦ä¸æ–­å­¦ä¹ å’Œé€‚åº”æ–°çš„æŠ€æœ¯èŒƒå¼ï¼Œæ‰èƒ½åœ¨AIæ—¶ä»£ä¿æŒç«äº‰åŠ›ã€‚</p>
<h2 data-id="heading-32">å‚è€ƒèµ„æº</h2>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.github.com%2Fcopilot" target="_blank" title="https://docs.github.com/copilot" ref="nofollow noopener noreferrer">GitHub Copilot Documentation</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jetbrains.com%2Fai%2F" target="_blank" title="https://www.jetbrains.com/ai/" ref="nofollow noopener noreferrer">JetBrains AI Assistant</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fcodewhisperer%2F" target="_blank" title="https://aws.amazon.com/codewhisperer/" ref="nofollow noopener noreferrer">Amazon CodeWhisperer</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.visualstudio.com%2Fapi" target="_blank" title="https://code.visualstudio.com/api" ref="nofollow noopener noreferrer">VS Code Extension API</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnextjs.org%2Fdocs" target="_blank" title="https://nextjs.org/docs" ref="nofollow noopener noreferrer">Next.js Documentation</a></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Google ADKä¸Šä¸‹æ–‡å·¥ç¨‹ï¼šå½“AI Agentå­¦ä¼šåƒç¼–è¯‘å™¨ä¸€æ ·ç®¡ç†ä¸Šä¸‹æ–‡]]></title>    <link>https://juejin.cn/post/7582472034728542262</link>    <guid>https://juejin.cn/post/7582472034728542262</guid>    <pubDate>2025-12-12T02:22:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582472034728542262" data-draft-id="7582472034728509494" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Google ADKä¸Šä¸‹æ–‡å·¥ç¨‹ï¼šå½“AI Agentå­¦ä¼šåƒç¼–è¯‘å™¨ä¸€æ ·ç®¡ç†ä¸Šä¸‹æ–‡"/> <meta itemprop="keywords" content="Google,Agent"/> <meta itemprop="datePublished" content="2025-12-12T02:22:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—æçš„æ ‘"/> <meta itemprop="url" content="https://juejin.cn/user/3059269887853066"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Google ADKä¸Šä¸‹æ–‡å·¥ç¨‹ï¼šå½“AI Agentå­¦ä¼šåƒç¼–è¯‘å™¨ä¸€æ ·ç®¡ç†ä¸Šä¸‹æ–‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3059269887853066/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—æçš„æ ‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T02:22:20.000Z" title="Fri Dec 12 2025 02:22:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä¸€ä¸ªå¤æ‚çš„Agentåº”ç”¨ä¸­ï¼Œå¦‚ä½•åšå¥½ä¸Šä¸‹æ–‡ç®¡ç†æå…¶é‡è¦ã€‚</p>
<p>å½“Agentæ‰§è¡Œé•¿æ—¶é—´çš„ä»»åŠ¡æ—¶ï¼Œéœ€è¦è¿½è¸ªçš„ä¿¡æ¯å¯èƒ½ä¼šå‘ˆæŒ‡æ•°çº§å¢é•¿ã€‚å¯¹è¯å†å²ã€å·¥å…·è¾“å‡ºã€å¤–éƒ¨æ–‡æ¡£èµ„æ–™ã€ä»¥åŠä¸­é—´çš„æ¨ç†è¿‡ç¨‹ï¼Œå…¨éƒ¨éƒ½ä¼šå¡è¿›æœ‰é™çš„ä¸Šä¸‹æ–‡çª—å£ä¸­ï¼Œå°±ç®—ä¸Šä¸‹æ–‡å†å¤§ï¼Œä¹Ÿä¼šè¢«å¡æ»¡ï¼Œè€Œå¦‚æœå……æ–¥å¤§é‡æ— å…³çš„ä¿¡æ¯è¿˜ä¼šåˆ†æ•£æ¨¡å‹æ³¨æ„åŠ›ï¼Œå¯¼è‡´è¾“å‡ºæ•ˆæœä¸ä½³ã€‚</p>
<p>æˆ‘åœ¨å‰æ–‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F3xQZ3uI6aX2Tm2SX12AdCA" target="_blank" title="https://mp.weixin.qq.com/s/3xQZ3uI6aX2Tm2SX12AdCA" ref="nofollow noopener noreferrer">ã€ŠClaude Agent SDKå®æˆ˜ï¼šæ‰“é€ å¼€æºç‰ˆDeepWikiã€‹</a>èŠåˆ°è¿‡Claude Agent SDKçš„ä½¿ç”¨ï¼Œå®ƒçš„è®¾è®¡æ ¸å¿ƒå…¶å®æ˜¯å°†æ–‡ä»¶ç³»ç»Ÿå½“åšå¤–éƒ¨è®°å¿†ï¼Œå†…ç½®çš„ä¸€å¥—å·¥å…·é›†ï¼Œæ”¯æŒäº†é€šè¿‡è¯»å†™æ–‡ä»¶æ¥å®ç°æŒä¹…åŒ–ï¼Œå†ç»“åˆä¸€å¥—è‡ªåŠ¨å‹ç¼©ä¸Šä¸‹æ–‡çš„æœºåˆ¶ã€‚</p>
<p>ä½†æœ¬è´¨ä¸Šï¼Œå®ƒè¿˜æ˜¯å°†ä¸Šä¸‹æ–‡å½“åšä¸€ä¸ªå¯å˜çš„å­—ç¬¦ä¸²ç¼“å†²åŒºï¼Œä¸æ–­åœ°å¾€é‡Œappendç”¨æˆ·çš„è¾“å…¥å’Œæ¨¡å‹çš„è¾“å‡ºï¼Œåˆ°äº†æ¥è¿‘200kä¸Šé™å°±å¼€å§‹è‡ªåŠ¨å‹ç¼©ã€‚è¿™ç§ä¸Šä¸‹æ–‡ç®¡ç†çš„æ–¹å¼ä¾ç„¶ä¼šå­˜åœ¨ä¸Šä¸‹æ–‡å¿«é€Ÿå¢é•¿åçš„æˆæœ¬å’Œå“åº”è€—æ—¶ä¸Šå‡ã€å¯èƒ½å¼•å…¥çš„å¤§é‡æ— å…³ä¿¡æ¯å¯¼è‡´æ¨¡å‹æ€§èƒ½è¡°å‡çš„é—®é¢˜ã€‚</p>
<p>è€ŒGoogleçš„Agent Development Kitï¼ˆADKï¼‰åˆ™æ¢äº†ä¸ªæ€è·¯ï¼Œå®ƒæŠŠç¼–è¯‘å™¨çš„æ¦‚å¿µå¼•å…¥åˆ°äº†ä¸Šä¸‹æ–‡ç®¡ç†ä¸­ã€‚å’Œæ¨¡å‹çš„æ‰€æœ‰å†å²å¯¹è¯ã€æ–‡ä»¶ç³»ç»Ÿä¸Šçš„å„ç§èµ„æ–™éƒ½è¢«å®ƒç§°ä¸ºçŠ¶æ€æ•°æ®ï¼ŒçœŸæ­£æ¯æ¬¡å‘ç»™å¤§æ¨¡å‹çš„ä¸Šä¸‹æ–‡æ˜¯ä»è¿™äº›å¤æ‚çš„çŠ¶æ€æ•°æ®ä¸­ç»è¿‡åŠ¨æ€æå–ã€è¿‡æ»¤ã€è½¬æ¢ã€ç»„è£…å‡ºæ¥çš„å’Œè¿™æ¬¡çš„é—®é¢˜å¼ºç›¸å…³çš„ä¸´æ—¶ç»“æœï¼Œè¿™ä¸ªæµç¨‹åœ¨ADKä¸­è¢«ç§°ä¹‹ä¸º<strong>ç¼–è¯‘ç®¡é“</strong>ã€‚</p>
<p><strong>è¿™ç§æ–¹å¼æ—¢ä¿éšœäº†ä¸Šä¸‹æ–‡ä¸ä¼šå¿«é€Ÿè†¨èƒ€ï¼Œåˆä¿éšœäº†ç¼–è¯‘å‡ºçš„ä¸Šä¸‹æ–‡éƒ½æ˜¯å’Œè¿™æ¬¡é—®é¢˜æœ€å¼ºç›¸å…³çš„ï¼Œä¸ä¼šæœ‰å¤§é‡æ— å…³çš„ä¿¡æ¯å»åˆ†æ•£æ¨¡å‹çš„æ³¨æ„åŠ›ã€‚</strong></p>
<p>ä¸¾ä¸ªå½¢è±¡ä¸€ç‚¹çš„ä¾‹å­ï¼Œå°±åƒæ•°æ®åº“ä¸­çš„è§†å›¾å’Œè¡¨çš„å…³ç³»ã€‚è¡¨æ˜¯çœŸæ­£çš„æ•°æ®ï¼Œè€Œè§†å›¾ï¼ˆ<code>å‘é€ç»™æ¨¡å‹çš„ä¸Šä¸‹æ–‡</code>ï¼‰æ˜¯æ ¹æ®æŸ¥è¯¢æ¡ä»¶ç”Ÿæˆçš„ä¸´æ—¶ç»“æœã€‚</p>
<p>ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œå°±æ¥èŠèŠå…¶ä¸­çš„æŠ€æœ¯ç»†èŠ‚ã€‚</p>
<h2 data-id="heading-0">ADK çš„æ ¸å¿ƒè®¾è®¡ç†å¿µï¼šä¸Šä¸‹æ–‡å³ç¼–è¯‘è§†å›¾</h2>
<p>ç”¨ä¸€å¼ å›¾æ¥æè¿°ADKçš„è¿™ä¸ªè®¾è®¡ç†å¿µï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/934bb2fd40a84c8fbaa5e24b67cdd983~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YyX5p6B55qE5qCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766110940&amp;x-signature=ZH1bxnHKa5%2BLGFHAV12HHWdAEsI%3D" alt="" loading="lazy"/></p>
<p>ADK åŸºäºè¿™ä¸ªç†å¿µï¼Œåšäº†å‡ ä¸ªå…³é”®çš„æ¶æ„å†³ç­–ã€‚</p>
<p>é¦–å…ˆæ˜¯å­˜å‚¨ä¸å‘ˆç°çš„åˆ†ç¦»ã€‚Sessioné‡Œå­˜çš„æ˜¯å®Œæ•´çš„ã€ä¸å¯å˜çš„äº‹ä»¶æ—¥å¿—ã€‚è€ŒWorking Contextæ˜¯ä¸ºå½“å‰è¿™æ¬¡LLMè°ƒç”¨é‡èº«å®šåˆ¶çš„ç¼–è¯‘äº§ç‰©ã€‚ä¸¤è€…ç‹¬ç«‹ç®¡ç†ï¼Œäº’ä¸å¹²æ‰°ã€‚æˆ‘ä»¬å¯ä»¥æ›´æ¢åº•å±‚çš„æ¨¡å‹è€Œä¸ç”¨é‡å†™å¯¹è¯å†å²ï¼Œä¹Ÿå¯ä»¥å¯¹åŒä¸€ä»½Sessionç”Ÿæˆå®Œå…¨ä¸åŒçš„è§†å›¾ç»™åˆ°ä¸åŒçš„Agentã€‚</p>
<p>ç„¶åæ˜¯æ˜¾å¼çš„è½¬æ¢è¿‡ç¨‹ã€‚ä¸Šä¸‹æ–‡ä¸å†æ˜¯éšä¾¿æ‹¼æ¥å‡ºæ¥çš„å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ç³»åˆ—å‘½åçš„ã€æœ‰åºçš„å¤„ç†å™¨é€æ­¥æ„å»ºçš„ã€‚æ¯ä¸ªå¤„ç†å™¨åšäº†ä»€ä¹ˆã€æŒ‰ä»€ä¹ˆé¡ºåºæ‰§è¡Œï¼Œéƒ½æœ‰æ˜ç¡®çš„å®šä¹‰ã€‚å‡ºäº†é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åƒè°ƒè¯•ç¼–è¯‘å™¨ä¸€æ ·ï¼Œç²¾ç¡®å®šä½æ˜¯å“ªä¸ªå¤„ç†ç¯èŠ‚çš„é—®é¢˜ã€‚</p>
<p>æœ€åæ˜¯é»˜è®¤çš„ä½œç”¨åŸŸéš”ç¦»ã€‚æ¯ä¸ªæ¨¡å‹è°ƒç”¨å’Œå­Agentä»…è·å–æ‰€éœ€çš„æœ€å°ä¸Šä¸‹æ–‡ã€‚ ADKçš„è®¾è®¡å¹¶ä¸æ˜¯ç»™ä½ æ‰€æœ‰ä¿¡æ¯ï¼Œä½ è‡ªå·±æŒ‘ï¼Œè€Œæ˜¯åªç»™ä½ éœ€è¦çš„ï¼Œå…¶å®ƒçš„ä½ å‹æ ¹çœ‹ä¸åˆ°ã€‚è¿™å¯¹å¤šAgentåä½œåœºæ™¯å°¤å…¶é‡è¦ï¼Œåé¢ä¼šè¯¦ç»†è®²ã€‚</p>
<h2 data-id="heading-1">åˆ†å±‚å­˜å‚¨æ¶æ„ï¼šå››å±‚åˆ†å·¥æ˜ç¡®</h2>
<p>ADKæŠŠä¸Šä¸‹æ–‡ç»„ç»‡æˆå››ä¸ªæ˜ç¡®çš„å±‚çº§ï¼Œæ¯å±‚æœ‰ç‰¹å®šçš„èŒè´£ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/86b55343a6bc4c4a94af2514d62ca263~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YyX5p6B55qE5qCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766110940&amp;x-signature=aMWC%2BnakY2QnMZLNNVIxgb5TRUo%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-2"><strong>Sessionï¼šä¸å¯å˜çš„äº‹ä»¶æ—¥å¿—</strong></h4>
<p>Sessionæ˜¯å’ŒAIäº¤äº’çš„å®Œæ•´çŠ¶æ€è®°å½•ã€‚ADKä¸­å°†å…¶ç»„ç»‡æˆä¸€ç³»åˆ—å¼ºç±»å‹çš„<code>Event</code>å¯¹è±¡.</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">Session</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
Â Â Â Â <span class="hljs-built_in">id</span>:Â <span class="hljs-built_in">str</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â ä¼šè¯å”¯ä¸€æ ‡è¯†ç¬¦</span>
Â Â Â Â app_name:Â <span class="hljs-built_in">str</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â åº”ç”¨åç§°</span>
Â Â Â Â user_id:Â <span class="hljs-built_in">str</span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â ç”¨æˆ·ID</span>
Â Â Â Â state:Â <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>,Â <span class="hljs-type">Any</span>]Â Â Â Â Â Â <span class="hljs-comment">#Â ä¼šè¯çŠ¶æ€ï¼ˆé”®å€¼å¯¹ï¼‰</span>
Â Â Â Â events:Â <span class="hljs-built_in">list</span>[Event]Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â äº‹ä»¶åˆ—è¡¨ï¼ˆæ ¸å¿ƒï¼‰</span>
Â Â Â Â last_update_time:Â <span class="hljs-built_in">float</span>Â Â Â Â <span class="hljs-comment">#Â æœ€åæ›´æ–°æ—¶é—´</span>
</code></pre>
<p>æ¯ä¸ª<code>Event</code>éƒ½æœ‰ç²¾ç¡®çš„ç±»å‹ï¼Œæ¯”å¦‚<code>UserMessageEvent</code>ã€<code>ModelResponseEvent</code>ã€<code>ToolCallEvent</code>ã€‚è¿™äº›å¼ºç±»å‹è®¾è®¡è®©ä¸‹æ¸¸çš„ç¼–è¯‘å¤„ç†å™¨å¯ä»¥åŸºäºç±»å‹è¿›è¡Œç²¾ç¡®è¿‡æ»¤ã€‚</p>
<p>ADKè¿˜å¯¹Sessionæ•°æ®åšäº†æŒä¹…åŒ–å­˜å‚¨ï¼Œç›´æ¥å­˜å‚¨åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­ï¼ˆ<code>æ”¯æŒsqiliteã€PostgreSQLç­‰</code>ï¼‰ï¼Œæ”¯æŒäº†äº‹åŠ¡ï¼Œå³ä½¿ç³»ç»Ÿå´©æºƒä¹Ÿèƒ½æ— æŸæ¢å¤ã€‚</p>
<h4 data-id="heading-3"><strong>Memoryï¼šè·¨ä¼šè¯çš„é•¿æœŸçŸ¥è¯†</strong></h4>
<p>Sessionå¤„ç†çš„æ˜¯åˆšåˆšå‘ç”Ÿäº†ä»€ä¹ˆï¼Œè€ŒMemoryå¤„ç†çš„æ˜¯æˆ‘ä»¬çŸ¥é“ä»€ä¹ˆï¼ˆ<code>ç”¨æˆ·çš„åå¥½</code>ï¼‰ã€‚ADKæŠŠMemoryè®¾è®¡ä¸ºç‹¬ç«‹çš„æœåŠ¡ï¼Œä½¿ç”¨<code>Vertex AI </code>çš„å‘é‡æ•°æ®åº“æ¥å­˜å‚¨ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">BaseMemoryService</span>(<span class="hljs-title class_ inherited__">ABC</span>):
Â Â Â Â @abstractmethod
Â Â Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">add_session_to_memory</span>(<span class="hljs-params">self,Â session:Â Session</span>):
Â Â Â Â Â Â Â Â <span class="hljs-string">"""å°†ä¼šè¯æ·»åŠ åˆ°è®°å¿†æœåŠ¡"""</span>

Â Â Â Â @abstractmethod
Â Â Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">search_memory</span>(<span class="hljs-params">
Â Â Â Â Â Â Â Â self,Â *,Â app_name:Â <span class="hljs-built_in">str</span>,Â user_id:Â <span class="hljs-built_in">str</span>,Â query:Â <span class="hljs-built_in">str</span>
Â Â Â Â </span>)Â -&gt;Â SearchMemoryResponse:
Â Â Â Â Â Â Â Â <span class="hljs-string">"""è¯­ä¹‰æœç´¢ç›¸å…³è®°å¿†"""</span>
</code></pre>
<p>å…³é”®çš„è®¾è®¡åœ¨äºï¼ŒMemoryä¸ä¼šè‡ªåŠ¨è¿›å…¥ä¸Šä¸‹æ–‡çª—å£ã€‚ADKéµå¾ªäº†<strong>é»˜è®¤æœ€å°æƒé™</strong>åŸåˆ™ï¼ŒAgentå¿…é¡»é€šè¿‡å·¥å…·è°ƒç”¨æ˜¾å¼æŸ¥è¯¢Memoryã€‚è¿™å°±æœ‰æ•ˆé˜²æ­¢äº†é•¿æœŸè®°å¿†å¯¹çŸ­æœŸæ¨ç†çš„å¹²æ‰°ï¼ŒåŒæ—¶èŠ‚çœäº†Tokenã€‚</p>
<h4 data-id="heading-4"><strong>Artifactsï¼šå¤§æ–‡ä»¶çš„æŒ‰éœ€åŠ è½½</strong></h4>
<p>Artifactså¤„ç†å¤§å‹æ•°æ®é›†ï¼Œæ¯”å¦‚æ–‡ä»¶ã€æ—¥å¿—ã€å›¾ç‰‡ç­‰ã€‚ADKå¹¶ä¸ä¼šå°†å¤§å‹æ–‡ä»¶å…¨éƒ¨åŠ è½½åˆ°ä¸Šä¸‹æ–‡ä¸­ï¼Œè€Œæ˜¯é‡‡ç”¨çš„å¥æŸ„æ¨¡å¼ï¼Œä¸Šä¸‹æ–‡ä¸­åªä¿ç•™è¿™äº›æ–‡ä»¶çš„å¥æŸ„å¼•ç”¨ã€‚</p>
<p>Agentéœ€è¦æ—¶ï¼Œé€šè¿‡<code>LoadArtifactsTool</code>ä¸´æ—¶åŠ è½½ã€‚åŠ è½½çš„å†…å®¹åªå­˜åœ¨äºå½“æ¬¡çš„è¯·æ±‚ä¸­ï¼Œç”¨å®Œå³å¼ƒï¼Œä¸ä¼šæŒä¹…åŒ–åˆ°Sessionã€‚è¿™å°±é¿å…äº†å¸¸è§çš„å‘ï¼šä¸€æ—¦åŠ è½½å®ŒæŸä¸ªå¤§æ–‡ä»¶ï¼Œåç»­æ¯æ¬¡è¯·æ±‚éƒ½å¾—å¸¦ç€å®ƒï¼ŒTokenå°±è¶Šæ»šè¶Šå¤šã€‚<strong>ADKçš„è®¾è®¡æ˜¯æŒ‰éœ€å€Ÿç”¨ï¼Œç”¨å®Œå°±è¿˜ï¼Œä¸ä¼šæ±¡æŸ“åç»­è¯·æ±‚çš„ä¸Šä¸‹æ–‡ã€‚</strong></p>
<h4 data-id="heading-5"><strong>Working Contextï¼šç¼–è¯‘åçš„äº§ç‰©</strong></h4>
<p>Working Contextæ˜¯æ¯æ¬¡LLMè°ƒç”¨å‰åŠ¨æ€ç”Ÿæˆçš„ã€ä»…å­˜åœ¨äºå†…å­˜ä¸­çš„ä¸´æ—¶å¯¹è±¡ã€‚å®ƒæ˜¯Sessionã€Memoryã€Artifactsç»è¿‡ç¼–è¯‘å™¨ç®¡é“åŠ å·¥åçš„ç»“æœã€‚</p>
<p>åŒä¸€ä¸ªSessionå¯ä»¥ç”Ÿæˆå®Œå…¨ä¸åŒçš„Working Contextã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªè´Ÿè´£CodeReviewçš„å­Agentå’Œä¸€ä¸ªè´Ÿè´£å®¢æˆ·æœåŠ¡çš„å­Agentï¼Œå¯èƒ½åŸºäºåŒä¸€ä¸ªSessionå†å²ï¼Œä½†å‰è€…çœ‹åˆ°çš„æ˜¯ä»£ç Diffå’ŒæŠ¥é”™æ—¥å¿—ï¼Œåè€…çœ‹åˆ°çš„æ˜¯æ‘˜è¦æ€§çš„ä»»åŠ¡æè¿°ã€‚</p>
<p>å‰é¢è¯´äº†é‚£ä¹ˆå¤šå­˜å‚¨å±‚ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹ADKæ˜¯æ€ä¹ˆæŠŠSessionã€Memoryã€Artifactsè¿™äº›æºæ•°æ®åŠ å·¥æˆWorking Contextçš„ã€‚</p>
<h2 data-id="heading-6">ä¸Šä¸‹æ–‡å¤„ç†æµæ°´çº¿ï¼šProcessoré“¾çš„è®¾è®¡</h2>
<p>ADKæŠŠä¸Šä¸‹æ–‡çš„æ„å»ºè¿‡ç¨‹æŠ½è±¡ä¸ºFlowï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒç†è§£ä¸ºä¸€ä¸ªç¼–è¯‘å™¨ã€‚Flowç”±ä¸€ç³»åˆ—æœ‰æ•ˆçš„Processorç»„æˆï¼Œæ¯ä¸ªProcessorè´Ÿè´£ä¸€ä¸ªç‰¹å®šçš„è½¬æ¢æ­¥éª¤ï¼Œæœ€ç»ˆæŠŠåŸå§‹çš„çŠ¶æ€æ•°æ®ç¼–è¯‘æˆå‘é€ç»™LLMçš„Working Contextã€‚</p>
<p>ä¸€ä¸ªå…¸å‹çš„è¯·æ±‚å¤„ç†å™¨é•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">1.Â basic.request_processorÂ Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â åŸºç¡€è®¾ç½®</span>
2.Â auth_preprocessor.request_processorÂ Â <span class="hljs-comment">#Â è®¤è¯å¤„ç†</span>
3.Â instructions.request_processorÂ Â Â Â <span class="hljs-comment">#Â æ·»åŠ ç³»ç»ŸæŒ‡ä»¤</span>
4.Â identity.request_processorÂ Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ™ºèƒ½ä½“èº«ä»½</span>
5.Â contents.request_processorÂ Â Â Â Â Â Â Â <span class="hljs-comment">#Â ä¼šè¯å†å²è½¬æ¢Â â˜…</span>
6.Â planning.request_processorÂ Â Â Â Â Â Â Â <span class="hljs-comment">#Â è§„åˆ’å¤„ç†</span>
7.Â code_execution.request_processorÂ Â <span class="hljs-comment">#Â ä»£ç æ‰§è¡Œ</span>
8.Â output_schema_processor.request_processorÂ <span class="hljs-comment">#Â è¾“å‡ºæ ¼å¼</span>
</code></pre>
<p>æ¯ä¸ªå¤„ç†å™¨æŒ‰é¡ºåºæ‰§è¡Œï¼Œæ„å»ºåœ¨å‰ä¸€æ­¥çš„è¾“å‡ºä¹‹ä¸Šã€‚å…¶ä¸­æœ€æ ¸å¿ƒçš„æ˜¯Contents Processorï¼Œå®ƒè´Ÿè´£å°†Sessionçš„Eventæµè½¬æ¢ä¸ºLLMå¯ç†è§£çš„Contentsã€‚</p>
<h4 data-id="heading-7"><strong>Session Eventsçš„è¿‡æ»¤é€»è¾‘</strong></h4>
<p>Sessioné‡Œå­˜çš„æ˜¯å®Œæ•´çš„äº‹ä»¶æ—¥å¿—ï¼Œä½†å¹¶éæ‰€æœ‰äº‹ä»¶éƒ½åº”è¯¥è¿›å…¥Working Contextã€‚æœ‰äº›äº‹ä»¶æ˜¯å†…éƒ¨æµç¨‹æ§åˆ¶ç”¨çš„ï¼Œæ¯”å¦‚è®¤è¯æ¡æ‰‹ã€å·¥å…·ç¡®è®¤è¯·æ±‚ï¼Œæš´éœ²ç»™LLMåªä¼šåˆ†æ•£æ¨¡å‹çš„æ³¨æ„åŠ›ã€‚æœ‰äº›äº‹ä»¶å†…å®¹ä¸ºç©ºï¼Œåªæ˜¯ä¿®æ”¹äº†session stateã€‚è¿˜æœ‰äº›äº‹ä»¶å±äºå…¶å®ƒåˆ†æ”¯ï¼Œåœ¨å¹¶è¡Œæ‰§è¡Œåœºæ™¯ä¸‹ä¹Ÿä¸åº”è¯¥è¢«å½“å‰Agentçœ‹åˆ°ã€‚</p>
<p>Contents Processorçš„å·¥ä½œå°±æ˜¯æŠŠè¿™äº›æ— å…³çš„å†…å®¹è¿‡æ»¤æ‰ã€‚å®ƒå…ˆå¤„ç†ç”¨æˆ·æ’¤é”€æ“ä½œäº§ç”Ÿçš„<code>Rewind</code>äº‹ä»¶ï¼ŒæŠŠè¢«æ’¤é”€çš„å†å²ç§»é™¤ã€‚ç„¶ååº”ç”¨åŸºæœ¬è¿‡æ»¤è§„åˆ™ï¼Œå‰”é™¤ç©ºå†…å®¹ã€å†…éƒ¨è®¤è¯ã€ç¡®è®¤è¯·æ±‚ç­‰ä¸è¯¥æš´éœ²çš„äº‹ä»¶ã€‚æ¥ç€å¤„ç†åˆ†æ”¯éš”ç¦»ï¼Œç¡®ä¿å¹¶è¡Œçš„å­Agentä¹‹é—´äº’ä¸ç›¸è§ã€‚å¦‚æœä¼šè¯å¤ªé•¿è§¦å‘äº†å‹ç¼©ï¼Œè¿˜è¦ç”¨æ‘˜è¦æ›¿æ¢è¢«å‹ç¼©çš„å†å²äº‹ä»¶ã€‚</p>
<p>è¿‡æ»¤å®Œæˆåï¼Œè¿˜æœ‰ä¸€ä¸ªå®¹æ˜“è¢«å¿½è§†ä½†æ˜¯å¾ˆé‡è¦çš„æ­¥éª¤ï¼šè§’è‰²è½¬æ¢ã€‚</p>
<h4 data-id="heading-8"><strong>ä¸ºä»€ä¹ˆéœ€è¦è§’è‰²è½¬æ¢ï¼Ÿ</strong></h4>
<p>åœ¨å¤šAgentç³»ç»Ÿä¸­ï¼Œå½“æ§åˆ¶æƒåœ¨Agentä¹‹é—´è½¬ç§»æ—¶ï¼Œä¸Šä¸‹æ–‡å¯èƒ½ä¼šå‡ºç°é—®é¢˜ã€‚</p>
<p>å‡è®¾æœ‰è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">æ—¶é—´çº¿:
<span class="hljs-bullet">1.</span>Â ç”¨æˆ·:Â "æˆ‘è¦è®¢æœºç¥¨å»åŒ—äº¬"
<span class="hljs-bullet">2.</span>Â RootÂ Agent:Â åˆ†æåè½¬ç§»ç»™Â BookingÂ Agent
<span class="hljs-bullet">3.</span>Â BookingÂ Agent:Â "å¥½çš„ï¼Œè¯·é—®å‡ºå‘æ—¥æœŸï¼Ÿ"
<span class="hljs-bullet">4.</span>Â ç”¨æˆ·:Â "ä¸‹å‘¨ä¸€"
<span class="hljs-bullet">5.</span>Â BookingÂ Agent:Â "å·²ä¸ºæ‚¨æŸ¥è¯¢åˆ°3ä¸ªèˆªç­..."
<span class="hljs-bullet">6.</span>Â BookingÂ AgentÂ ä»»åŠ¡å®Œæˆï¼Œæ§åˆ¶æƒè¿”å›Â RootÂ Agent
<span class="hljs-bullet">7.</span>Â RootÂ AgentÂ ç»§ç»­è¿è¡Œ...
</code></pre>
<p>é—®é¢˜æ¥äº†ã€‚å½“Root Agentæ¢å¤æ‰§è¡Œæ—¶ï¼ŒSessionä¸­åŒ…å«äº†Booking Agentäº§ç”Ÿçš„äº‹ä»¶ã€‚è¿™äº›äº‹ä»¶çš„<code>role</code>éƒ½æ˜¯<code>model</code>ã€‚å¦‚æœä¸è½¬æ¢ï¼ŒRoot Agentçœ‹åˆ°<code>role=model</code>çš„æ¶ˆæ¯ï¼Œä¼šè®¤ä¸ºæ˜¯è‡ªå·±ä¹‹å‰è¯´çš„ï¼Œå¯¼è‡´èº«ä»½æ··æ·†ã€‚</p>
<p>ADKçš„çš„è§£å†³æ–¹æ¡ˆæ˜¯æŠŠå…¶å®ƒAgentçš„æ¶ˆæ¯è½¬æ¢ä¸ºç”¨æˆ·è§†è§’ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">defÂ _present_other_agent_message(event:Â Event)Â -&gt;Â Optional<span class="hljs-section">[Event]</span>:
Â Â Â Â <span class="hljs-attr">content</span>Â =Â types.Content()
Â Â Â Â <span class="hljs-attr">content.role</span>Â =Â <span class="hljs-string">'user'</span>Â Â <span class="hljs-comment">#Â å…³é”®ï¼šæ”¹ä¸ºÂ userÂ è§’è‰²</span>
Â Â Â Â <span class="hljs-attr">content.parts</span>Â =Â [types.Part(text=<span class="hljs-string">'ForÂ context:'</span>)]

Â Â Â Â forÂ partÂ inÂ event.content.parts:
Â Â Â Â Â Â Â Â ifÂ part.text:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ·»åŠ ä½œè€…å½’å±å‰ç¼€</span>
Â Â Â Â Â Â Â Â Â Â Â Â content.parts.append(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â types.Part(<span class="hljs-attr">text</span>=f<span class="hljs-string">'[{event.author}]Â said:Â {part.text}'</span>)
Â Â Â Â Â Â Â Â Â Â Â Â )
</code></pre>
<p>è½¬æ¢åï¼ŒRoot Agentçœ‹åˆ°çš„å°±å˜æˆäº†ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">role</span>=user:Â <span class="hljs-string">"æˆ‘è¦è®¢æœºç¥¨å»åŒ—äº¬"</span>
<span class="hljs-attr">role</span>=model:Â åˆ†æåè½¬ç§»ç»™Â booking_agent
<span class="hljs-attr">role</span>=user:Â <span class="hljs-string">"ForÂ context:Â [booking_agent]Â said:Â å¥½çš„ï¼Œè¯·é—®å‡ºå‘æ—¥æœŸï¼Ÿ"</span>
<span class="hljs-attr">role</span>=user:Â <span class="hljs-string">"ä¸‹å‘¨ä¸€"</span>
<span class="hljs-attr">role</span>=user:Â <span class="hljs-string">"ForÂ context:Â [booking_agent]Â said:Â å·²ä¸ºæ‚¨æŸ¥è¯¢åˆ°3ä¸ªèˆªç­..."</span>
</code></pre>
<p>è¿™æ ·ï¼ŒRoot Agentå°±èƒ½åŒºåˆ†å“ªäº›æ˜¯è‡ªå·±è¯´çš„ï¼Œå“ªäº›æ˜¯å­Agentè¯´çš„ï¼Œä¸ä¼šæ··æ·†å“åº”è¾“å‡ºï¼Œå¯¼è‡´å½±å“æ¨¡å‹æ•ˆæœã€‚</p>
<h4 data-id="heading-9"><strong>Memoryçš„æ³¨å…¥é€»è¾‘</strong></h4>
<p>å‰é¢è®²çš„éƒ½æ˜¯Session Eventsçš„å¤„ç†ï¼Œä½†Working Contextè¿˜éœ€è¦æ³¨å…¥Memoryå’ŒArtifactsã€‚</p>
<p>ADKæä¾›äº†ä¸¤ç§Memoryæ³¨å…¥æ¨¡å¼ã€‚ä¸€ç§æ˜¯ä¸»åŠ¨å¬å›ï¼Œé€šè¿‡<code>PreloadMemoryTool</code>å®ç°ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">PreloadMemoryTool</span>(<span class="hljs-title class_ inherited__">BaseTool</span>):
Â Â Â Â <span class="hljs-string">"""æ¯æ¬¡LLMè¯·æ±‚è‡ªåŠ¨æ‰§è¡Œï¼Œä¸ç”±æ¨¡å‹è°ƒç”¨"""</span>

Â Â Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">process_llm_request</span>(<span class="hljs-params">self,Â tool_context,Â llm_request</span>):
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â ç”¨ç”¨æˆ·æœ€æ–°è¾“å…¥ä½œä¸ºæŸ¥è¯¢</span>
Â Â Â Â Â Â Â Â user_queryÂ =Â tool_context.user_content.parts[<span class="hljs-number">0</span>].text
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è¯­ä¹‰æœç´¢è®°å¿†åº“</span>
Â Â Â Â Â Â Â Â responseÂ =Â <span class="hljs-keyword">await</span>Â tool_context.search_memory(user_query)

Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â response.memories:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ³¨å…¥åˆ°ç³»ç»ŸæŒ‡ä»¤</span>
Â Â Â Â Â Â Â Â Â Â Â Â llm_request.append_instructions([<span class="hljs-string">f"""
TheÂ followingÂ contentÂ isÂ fromÂ yourÂ previousÂ conversationsÂ withÂ theÂ user.
&lt;PAST_CONVERSATIONS&gt;
<span class="hljs-subst">{format_memories(response.memories)}</span>
&lt;/PAST_CONVERSATIONS&gt;
"""</span>])
</code></pre>
<p>æ¯æ¬¡LLMè¯·æ±‚æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨åœ¨Memoryä¸­è¿›è¡Œè¯­ä¹‰æœç´¢ï¼ŒæŠŠç›¸å…³çš„å†å²è®°å¿†æ³¨å…¥åˆ°ç³»ç»ŸæŒ‡ä»¤ä¸­ã€‚è¿™ç§æ¨¡å¼é€‚åˆç”¨æˆ·åå¥½ã€å¸¸è§é—®é¢˜è¿™ç±»éœ€è¦æ¯æ¬¡éƒ½å‚è€ƒçš„èƒŒæ™¯ä¿¡æ¯ã€‚</p>
<p>å¦ä¸€ç§æ˜¯è¢«åŠ¨å¬å›ï¼Œé€šè¿‡<code>LoadMemoryTool</code>å®ç°ã€‚ç³»ç»Ÿåªæ˜¯å‘Šè¯‰LLMå®ƒæœ‰è®°å¿†å¯ä»¥æŸ¥è¯¢ï¼Œå…·ä½“è¦ä¸è¦æŸ¥ã€æŸ¥ä»€ä¹ˆï¼Œç”±LLMè‡ªå·±å†³å®šã€‚è¿™ç§æ¨¡å¼æ›´çœTokenï¼Œé€‚åˆç‰¹å®šçŸ¥è¯†æ£€ç´¢çš„åœºæ™¯ã€‚</p>
<h4 data-id="heading-10"><strong>Artifactsçš„æŒ‰éœ€åŠ è½½</strong></h4>
<p>Artifactsçš„åŠ è½½é€»è¾‘ä¹Ÿç±»ä¼¼ã€‚ç³»ç»Ÿå…ˆå‘Šè¯‰LLMæœ‰å“ªäº›æ–‡ä»¶å¯ç”¨ï¼ŒLLMå†³å®šè¦ä¸è¦åŠ è½½ã€‚å¦‚æœLLMè°ƒç”¨äº†<code>load_artifacts</code>ï¼Œå¤„ç†å™¨å°±æŠŠæ–‡ä»¶å†…å®¹ä¸´æ—¶æ³¨å…¥åˆ°å½“æ¬¡è¯·æ±‚çš„contentsä¸­ã€‚</p>
<p>å‰é¢ç®€å•æè¿‡ï¼Œè¿™é‡Œæœ‰ä¸ªå…³é”®è®¾è®¡ï¼šåŠ è½½çš„æ–‡ä»¶å†…å®¹ä¸ä¼šæŒä¹…åŒ–åˆ°Sessionã€‚ç”¨å®Œå°±ä¸¢ï¼Œä¸‹æ¬¡è¯·æ±‚å¦‚æœè¿˜éœ€è¦ï¼ŒLLMå¾—å†è°ƒç”¨ä¸€æ¬¡<code>load_artifacts</code>ã€‚è¿™æ ·å°±é¿å…äº†å¤§æ–‡ä»¶ä¸€æ—¦åŠ è½½å°±æ°¸è¿œå ç€ä¸Šä¸‹æ–‡çš„é—®é¢˜ã€‚</p>
<h2 data-id="heading-11">å…¶å®ƒä¸Šä¸‹æ–‡ä¼˜åŒ–ç­–ç•¥</h2>
<p>é™¤äº†ä¸Šä¸‹æ–‡ç¼–è¯‘ç®¡çº¿çš„ç‹¬ç‰¹è®¾è®¡ä¹‹å¤–ï¼ŒADKè¿˜åŒ…å«äº†å…¶å®ƒä¸€äº›å¸¸ç”¨çš„ä¸Šä¸‹æ–‡ä¼˜åŒ–ç­–ç•¥ã€‚</p>
<p>æ¯”å¦‚ä¼šè¯å‹ç¼©ï¼Œæœ‰ä¸åŒçš„ç­–ç•¥æ¥å®ç°ä¼šè¯å‹ç¼©ï¼Œå‰æ–‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F93rEhMY7rIUlHIiPPDvEag" target="_blank" title="https://mp.weixin.qq.com/s/93rEhMY7rIUlHIiPPDvEag" ref="nofollow noopener noreferrer">ã€Šäº§å“çº§AIåº”ç”¨çš„æ ¸å¿ƒï¼šä¸Šä¸‹æ–‡å·¥ç¨‹ã€‹</a>æœ‰è¿‡è¯¦ç»†è®¨è®ºï¼ŒADKé‡‡ç”¨çš„æ˜¯å¼‚æ­¥çš„æ»‘åŠ¨çª—å£å‹ç¼©ç­–ç•¥ï¼Œå’Œæ™®é€šæ»‘åŠ¨çª—å£çš„åŒºåˆ«æ˜¯ä¸ä¼šé˜»å¡ä¸»å¯¹è¯æµã€‚ä¸‹æ¬¡æ„å»ºWorking Contextæ—¶ï¼Œå¤„ç†å™¨è‡ªåŠ¨è¯»å–å‹ç¼©æ‘˜è¦æ›¿ä»£åŸå§‹æ—¥å¿—ã€‚</p>
<p>è¿˜æœ‰å°±æ˜¯å‰ç¼€ç¼“å­˜ï¼Œç›¸å…³çš„æŠ€æœ¯ç»†èŠ‚åœ¨å‰æ–‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F93rEhMY7rIUlHIiPPDvEag" target="_blank" title="https://mp.weixin.qq.com/s/93rEhMY7rIUlHIiPPDvEag" ref="nofollow noopener noreferrer">ã€Šå¤§æ¨¡å‹ä¸Šä¸‹æ–‡å·¥ç¨‹ä¹‹Prefix CachingæŠ€æœ¯è¯¦è§£ã€‹</a>ä¹Ÿæœ‰è¿‡è¯¦ç»†çš„è®²è§£ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥å»åŸæ–‡é˜…è¯»ï¼Œè¿™é‡Œå°±ä¸è¿‡å¤šé˜è¿°ã€‚</p>
<p>æœ€åè¿˜æœ‰ä¸€ä¸ªç‰¹åˆ«çš„è®¾è®¡ï¼ŒADKæä¾›äº†<code>include_contents</code>å‚æ•°è®©å¼€å‘è€…ç²¾ç¡®æ§åˆ¶å†å²ä¼ é€’ï¼Œé»˜è®¤åŒ…å«å®Œæ•´çš„å¯¹è¯å†å²ï¼Œå¦‚æœå¡«<code>none</code>åˆ™ä»…åŒ…å«å½“å‰è½®æ¬¡ã€‚</p>
<p>è¿™åœ¨è°ƒç”¨å­Agentæ—¶ç‰¹åˆ«æœ‰ç”¨ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å¯åŠ¨ä¸€ä¸ªå¹²å‡€çš„å­Agentï¼Œé¿å…å†å²å¯¹è¯æ±¡æŸ“å…¶ä¸Šä¸‹æ–‡ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªå‚æ•°æ¥æ§åˆ¶ã€‚</p>
<h2 data-id="heading-12">å†™åœ¨æœ€å</h2>
<p>åœ¨ç°æœ‰LLMçš„èƒ½åŠ›é™åˆ¶ä¸‹ï¼Œè¾“å…¥è´¨é‡å†³å®šäº†è¾“å‡ºè´¨é‡ã€‚æ¨¡å‹å†å¼ºï¼Œå–‚è¿›å»çš„ä¸Šä¸‹æ–‡ä¸åšè§„èŒƒï¼Œè¾“å‡ºä¹Ÿä¸ä¼šå¥½åˆ°å“ªå„¿å»ã€‚ä¸Šä¸‹æ–‡å·¥ç¨‹æ­£æ˜¯å…¶ä¸­çš„å…³é”®ã€‚</p>
<p>å„å®¶å¤§æ¨¡å‹å‚å•†é™¤äº†åœ¨æ‹¼å‘½å·æ¨¡å‹èƒ½åŠ›ï¼Œä¹Ÿåœ¨ä¸Šä¸‹æ–‡å·¥ç¨‹å±‚é¢ä¸æ–­æ¨å‡ºæ–°çš„è®¾è®¡ã€‚Anthropicçš„Claude Agent SDKèµ°çš„æ˜¯"ç¯å¢ƒå³ä¸Šä¸‹æ–‡"çš„è·¯çº¿ï¼Œè®©Agentåƒäººä¸€æ ·ç”¨æ–‡ä»¶ç³»ç»Ÿæ‰©å±•è®°å¿†ã€‚Googleçš„ADKèµ°çš„æ˜¯"ç¼–è¯‘è§†å›¾"çš„è·¯çº¿ï¼Œç”¨è½¯ä»¶å·¥ç¨‹çš„ä¸¥è°¨æ€§æ¥ç®¡ç†ä¸Šä¸‹æ–‡ã€‚</p>
<p>ADKé€šè¿‡å­˜å‚¨ä¸å‘ˆç°åˆ†ç¦»ã€æ˜¾å¼å¤„ç†å™¨ç®¡é“ã€é»˜è®¤ä½œç”¨åŸŸéš”ç¦»ï¼ŒæŠŠä¸Šä¸‹æ–‡ç®¡ç†å˜æˆäº†ä¸€ä¸ªå¯è§‚æµ‹ã€å¯è°ƒè¯•ã€å¯å®¡æŸ¥çš„å·¥ç¨‹é—®é¢˜ã€‚Sessioné‡Œå­˜çš„æ˜¯å®Œæ•´çš„äº‹ä»¶æ—¥å¿—ï¼ŒWorking Contextæ˜¯ä¸ºå½“å‰è°ƒç”¨é‡èº«å®šåˆ¶çš„ç¼–è¯‘äº§ç‰©ã€‚å‡ºäº†é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åƒè°ƒè¯•ç¼–è¯‘å™¨ä¸€æ ·ï¼Œå®šä½åˆ°å…·ä½“æ˜¯å“ªä¸ªå¤„ç†å™¨ã€å“ªä¸ªè¿‡æ»¤æ¡ä»¶å‡ºçš„é—®é¢˜ã€‚</p>
<p>è¿™å¥—è®¾è®¡ç¡®å®æ¯”ç®€å•çš„å­—ç¬¦ä¸²æ‹¼æ¥å¤æ‚å¾—å¤šï¼Œå½“ç„¶å­¦ä¹ æ›²çº¿ä¹Ÿæ›´é™¡å³­ã€‚ä½†å¯¹äºä¼ä¸šçº§çš„å¤šAgentåº”ç”¨ï¼Œæˆ‘è®¤ä¸ºè¿™ç§å¤æ‚æ€§æ˜¯å€¼å¾—çš„ã€‚å½“æˆ‘ä»¬éœ€è¦å®¡æŸ¥æ¯ä¸€æ­¥çŠ¶æ€ã€å½“éœ€è¦å¤šä¸ªAgentåä½œã€å¹¶ä¸”å¯¹æˆæœ¬å’Œå¯é æ€§æœ‰è¦æ±‚ï¼Œæ˜¾å¼çš„ä¸Šä¸‹æ–‡ç®¡ç†å°±æˆäº†å¿…è¦çš„é€‰æ‹©ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¯å‘¨æŠ€æœ¯åŠ é€Ÿå™¨ï¼šä¸ºä»€ä¹ˆä¸‹ä¸€ä»£AIçš„ç«äº‰æ˜¯"ä¸Šä¸‹æ–‡æ“ä½œç³»ç»Ÿ"ä¹‹äº‰ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7582475416190615587</link>    <guid>https://juejin.cn/post/7582475416190615587</guid>    <pubDate>2025-12-12T03:31:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582475416190615587" data-draft-id="7582519152565518351" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¯å‘¨æŠ€æœ¯åŠ é€Ÿå™¨ï¼šä¸ºä»€ä¹ˆä¸‹ä¸€ä»£AIçš„ç«äº‰æ˜¯&quot;ä¸Šä¸‹æ–‡æ“ä½œç³»ç»Ÿ&quot;ä¹‹äº‰ï¼Ÿ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-12T03:31:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ™ºè§AGI"/> <meta itemprop="url" content="https://juejin.cn/user/4145611877132986"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¯å‘¨æŠ€æœ¯åŠ é€Ÿå™¨ï¼šä¸ºä»€ä¹ˆä¸‹ä¸€ä»£AIçš„ç«äº‰æ˜¯"ä¸Šä¸‹æ–‡æ“ä½œç³»ç»Ÿ"ä¹‹äº‰ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4145611877132986/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ™ºè§AGI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T03:31:11.000Z" title="Fri Dec 12 2025 03:31:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>æ¬¢è¿æ¥åˆ°æˆ‘ä»¬çš„</strong> <strong>ã€Œæ¯å‘¨æŠ€æœ¯åŠ é€Ÿå™¨ã€</strong>Â <strong>ä¸“æ ï¼</strong></p>
<p>æ¯å‘¨äº”ï¼Œæˆ‘ä»¬éƒ½ä¼šå›´ç»•ä¸€ä¸ªå‰æ²¿æŠ€æœ¯ä¸»é¢˜ï¼Œå±•å¼€ä¸€åœºæ·±åº¦çš„å†…éƒ¨æŠ€æœ¯åˆ†äº«ä¼šã€‚ä¸ä»…æ˜¯ä¸ºäº†å›¢é˜Ÿå†…éƒ¨çš„ç¢°æ’ä¸æˆé•¿ï¼Œä¹Ÿå¸Œæœ›é€šè¿‡è¿™æ ·çš„å½¢å¼ï¼Œå°†æˆ‘ä»¬çš„æ€è€ƒä¸å®è·µè®°å½•ã€æ²‰æ·€ã€åˆ†äº«ç»™æ›´å¤šåŒè¡Œè€…ã€‚</p>
<p>æœ¬å‘¨ï¼Œæˆ‘ä»¬æ¢è®¨çš„ä¸»é¢˜æ˜¯ï¼š<strong>å‘Šåˆ«â€œç‚¼ä¸¹â€ï¼Œä¸ºä»€ä¹ˆä¸‹ä¸€ä»£AIçš„ç«äº‰æ­£è½¬å‘â€œä¸Šä¸‹æ–‡æ“ä½œç³»ç»Ÿâ€ä¹‹äº‰ï¼Ÿ</strong></p>
<p>ä»æç¤ºè¯å·¥ç¨‹åˆ°ä¸Šä¸‹æ–‡å·¥ç¨‹ï¼Œä»â€œæ‰‹å·¥è°ƒå‚â€åˆ°â€œç³»ç»Ÿæ¶æ„â€ï¼ŒAIå¼€å‘æ­£åœ¨ç»å†ä¸€åœºé™æ‚„æ‚„ä½†æ·±åˆ»çš„èŒƒå¼è¿ç§»ã€‚æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥è¿™åœºå˜é©çš„æ ¸å¿ƒé€»è¾‘ã€æŠ€æœ¯æ¶æ„ä¸æœªæ¥å›¾æ™¯ã€‚</p>
<p>ä½ æ˜¯å¦ä¹Ÿæœ‰è¿™æ ·çš„æŒ«è´¥æ„Ÿï¼ŸAIåŠ©æ‰‹èƒ½åœ¨ç¬é—´å†™å‡ºä¼˜ç¾çš„åå››è¡Œè¯—ï¼Œå´åœ¨ä½ æ¥ä¸ªç”µè¯çš„åŠŸå¤«å°±å¿˜äº†åˆšæ‰è®¨è®ºåˆ°å“ªå„¿äº†ã€‚å®ƒåƒä¸ªå¤©æ‰å®ä¹ ç”Ÿï¼Œä½†æ‚£æœ‰ä¸¥é‡çš„çŸ­æœŸè®°å¿†ä¸§å¤±ç—‡â€”â€”æ¯ä¸€æ¬¡å¯¹è¯éƒ½æ˜¯ä¸€æ¬¡"å†·å¯åŠ¨"ï¼Œæ¯ä¸€æ¬¡é‡å¯éƒ½æ˜¯ä¸€æ¬¡å¿ƒæ™ºæ¸…é›¶ã€‚</p>
<p>è¿™æ­£æ˜¯å½“å‰å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„è‡´å‘½ç“¶é¢ˆï¼šå¼ºå¤§çš„ç¬æ—¶æ¨ç†èƒ½åŠ›ï¼Œå´æ²¡æœ‰æŒä¹…çš„è®°å¿†ç³»ç»Ÿã€‚</p>
<p>2025å¹´ï¼Œä¸€åœºé™æ‚„æ‚„çš„é©å‘½æ­£åœ¨å‘ç”Ÿã€‚é¡¶å°–AIå›¢é˜Ÿä¸å†æ‰§ç€äº"ç‚¼"å‡ºæ›´å¼ºå¤§çš„æ¨¡å‹ï¼Œè€Œæ˜¯åœ¨æ„å»ºä¸€ä¸ªå…¨æ–°çš„èŒƒå¼â€”â€”ä¸Šä¸‹æ–‡å·¥ç¨‹ï¼ˆContext Engineeringï¼‰ã€‚è¿™å°±åƒä»æ‰‹å·¥æ‰“ç£¨å•å—CPUï¼Œè·ƒè¿åˆ°è®¾è®¡æ•´ä¸ªæ“ä½œç³»ç»Ÿã€‚è€Œè¿™åœºè·ƒè¿ï¼Œå°†å†³å®šæœªæ¥AIåº”ç”¨çš„çœŸæ­£å£å’ã€‚</p>
<p><strong>1</strong></p>
<p><strong>ä»"æç¤ºè¯å·¥åŒ "åˆ°"ç³»ç»Ÿæ¶æ„å¸ˆ"</strong></p>
<p>ä¼ ç»Ÿçš„æç¤ºè¯å·¥ç¨‹ï¼ˆPrompt Engineeringï¼‰å°±åƒç»™CPUå‘é€ä¸€æ¡æ¡ç²¾é›•ç»†ç¢çš„æŒ‡ä»¤ã€‚ä½ è´¹å°½å¿ƒæ€è°ƒæ•´æ¯ä¸ªè¯ã€æ¯ä¸ªæ ‡ç‚¹ï¼ŒæœŸæœ›æ¨¡å‹ç»™å‡ºå®Œç¾è¾“å‡ºã€‚è¿™æ˜¯"æŠ€è‰º"æ—¶ä»£ã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæˆ‘ä»¬åƒæ‰‹å·¥è‰ºäººä¸€æ ·ï¼Œæ‰§ç€äºæç¤ºè¯çš„æªè¾ã€ç»“æ„å’Œæ¸©åº¦å‚æ•°ã€‚æ¯ä¸ªåº”ç”¨éƒ½éœ€è¦ä¸€ä½"æç¤ºè¯è°ƒæ•™å¸ˆ"ï¼Œç”¨è¯•é”™æ³•å¯»æ‰¾é‚£ä¸ª"é­”æ³• prompt"ã€‚è¿™ç§ craftsmanship æˆ–è®¸èƒ½äº§å‡ºæƒŠè‰³çš„Demoï¼Œå´éš¾ä»¥è§„æ¨¡åŒ–ã€éš¾ä»¥ç»´æŠ¤ã€æ›´éš¾ä»¥å½¢æˆç³»ç»Ÿæ€§çš„æŠ¤åŸæ²³ã€‚ä½ è°ƒå‡ºçš„å®Œç¾æç¤ºï¼Œå¯èƒ½åœ¨ä¸‹ä¸ªæ¨¡å‹ç‰ˆæœ¬æ›´æ–°åå°±å¤±æ•ˆäº†ï¼›ä½ ç²¾å¿ƒè®¾è®¡çš„few-shotç¤ºä¾‹ï¼Œå¯èƒ½åœ¨ä¸Šä¸‹æ–‡ç¨é•¿æ—¶å°±æ·¹æ²¡åœ¨å™ªå£°ä¸­ã€‚è¿™æœ¬è´¨ä¸Šæ˜¯åœ¨ç”¨å†œè€•æ—¶ä»£çš„ç²¾å·§ï¼Œåº”å¯¹å·¥ä¸šæ—¶ä»£çš„å¤æ‚ã€‚</p>
<p>ä½†ä¸Šä¸‹æ–‡å·¥ç¨‹å®Œå…¨ä¸åŒã€‚å®ƒå°†LLMè§†ä¸ºCPUï¼Œä¸Šä¸‹æ–‡çª—å£è§†ä¸ºRAMï¼Œè€Œæˆ‘ä»¬è¦åšçš„ï¼Œæ˜¯ä¸ºè¿™ä¸ªCPUè®¾è®¡ä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿâ€”â€”ç®¡ç†å®ƒçš„å†…å­˜ã€è°ƒåº¦å®ƒçš„ä»»åŠ¡ã€ä¼˜åŒ–å®ƒçš„ç¼“å­˜ã€æ§åˆ¶å®ƒçš„å¤–éƒ¨äº¤äº’ã€‚è¿™æ˜¯ä¸€é—¨çœŸæ­£çš„"å·¥ç¨‹å­¦ç§‘"ã€‚åœ¨è¿™ä¸ªæ–°èŒƒå¼é‡Œï¼Œæç¤ºè¯åªæ˜¯æ•´ä¸ªç³»ç»Ÿçš„ä¸€ä¸ªå¾®å°ç»„ä»¶ã€‚çœŸæ­£çš„æŒ‘æˆ˜åœ¨äºï¼šå½“ä¸Šä¸‹æ–‡çª—å£åªæœ‰128Kçš„"RAM"ï¼Œè€Œå¤–éƒ¨çŸ¥è¯†åº“æ˜¯100TBçš„"ç¡¬ç›˜"æ—¶ï¼Œä½ å¦‚ä½•è®¾è®¡è™šæ‹Ÿå†…å­˜ç³»ç»Ÿï¼Ÿå½“ç”¨æˆ·è¯·æ±‚ä»ç®€å•çš„é—®ç­”å˜ä¸º"åˆ†æè¿‡å»ä¸€å¹´çš„é”€å”®æ•°æ®ï¼Œå¯¹æ¯”ä¸‰ä¸ªç«å“ï¼Œç”ŸæˆæŠ¥å‘Šå¹¶å‘é€ç»™å›¢é˜Ÿ"æ—¶ï¼Œä½ å¦‚ä½•è®¾è®¡å¤šè¿›ç¨‹è°ƒåº¦ï¼Ÿå½“APIè°ƒç”¨æˆæœ¬éšä¸Šä¸‹æ–‡é•¿åº¦æŒ‡æ•°å¢é•¿æ—¶ï¼Œä½ å¦‚ä½•è®¾è®¡ç¼“å­˜ç­–ç•¥ï¼Ÿå½“æ•æ„Ÿæ•°æ®éœ€è¦è·¨ä¼šè¯è®°å¿†æ—¶ï¼Œä½ å¦‚ä½•è®¾è®¡æƒé™éš”ç¦»ï¼Ÿè¿™äº›é—®é¢˜ï¼Œæ‰æ˜¯ä¸Šä¸‹æ–‡å·¥ç¨‹çš„æ ¸å¿ƒã€‚</p>
<p>ä¸Šä¸‹æ–‡å·¥ç¨‹å½»åº•æ”¹å˜äº†æˆ‘ä»¬çœ‹å¾…LLMçš„è§†è§’ã€‚CPUæœ¬èº«å¹¶ä¸æ™ºèƒ½ï¼Œæ™ºèƒ½æ¥è‡ªäºæ“ä½œç³»ç»Ÿå¯¹CPUçš„ç²¾å¦™ç¼–æ’â€”â€”åˆ†æ—¶å¤ç”¨ã€å†…å­˜åˆ†é¡µã€ä¸­æ–­å¤„ç†ã€è®¾å¤‡é©±åŠ¨ã€‚åŒç†ï¼ŒLLMçš„"æ™ºèƒ½"ä¹Ÿå¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºä¸Šä¸‹æ–‡æ“ä½œç³»ç»Ÿçš„è®¾è®¡ã€‚æ²¡æœ‰æ“ä½œç³»ç»Ÿï¼ŒCPUåªæ˜¯ä¸€å—æ˜‚è´µçš„ç¡…ç‰‡ï¼›æ²¡æœ‰ä¸Šä¸‹æ–‡å·¥ç¨‹ï¼ŒLLMåªæ˜¯ä¸€ä¸ªä¼šé—å¿˜çš„å¤©æ‰ã€‚å¦‚ä»Šï¼Œä»OpenAIçš„ProjectsåŠŸèƒ½åˆ°Anthropicçš„MCPåè®®ï¼Œä»LangGraphçš„å›¾è°ƒåº¦åˆ°MemGPTçš„å†…å­˜è™šæ‹ŸåŒ–ï¼Œæ•´ä¸ªè¡Œä¸šéƒ½åœ¨ä¸ºè¿™ä¸ªæ–°CPUç¼–å†™æ“ä½œç³»ç»Ÿã€‚è¿™ä¸ªå¿ƒæ™ºæ¨¡å‹ï¼Œæ­£åœ¨é‡å¡‘AIå·¥ç¨‹çš„ä¸€åˆ‡å®è·µã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d807315965a41c091446b0b1441b826~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm66KeBQUdJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115071&amp;x-signature=JlqCjxgiIZoPV5ahkWpYBxKzhEk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>2</strong></p>
<p><strong>ä¸Šä¸‹æ–‡OSçš„å››å¤§æ ¸å¿ƒåŠŸèƒ½</strong></p>
<p>ä¸€ä¸ªçœŸæ­£çš„AIæ“ä½œç³»ç»Ÿï¼Œéœ€è¦è§£å†³å››ä¸ªæ ¸å¿ƒæŒ‘æˆ˜ã€‚è¿™äº›æŒ‘æˆ˜ä¸å†æ˜¯è°ƒä¼˜æç¤ºè¯çš„æŠ€å·§ï¼Œè€Œæ˜¯æ„å»ºå¤æ‚è½¯ä»¶ç³»ç»Ÿçš„å·¥ç¨‹é—®é¢˜â€”â€”æ¯ä¸€ä¸ªéƒ½å…³ä¹AIåº”ç”¨çš„å¯é æ€§ã€å¯æ‰©å±•æ€§å’Œå•†ä¸šå¯è¡Œæ€§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b452a6d473494a6eb6d06ed642de63c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm66KeBQUdJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115071&amp;x-signature=2Ute5%2BMmPWX2Tah1Y%2FQHWT42LBY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>1. å†…å­˜ç®¡ç†ï¼šå¦‚ä½•è®©AIè®°ä½è¯¥è®°çš„ï¼Œå¿˜è®°è¯¥å¿˜çš„ï¼Ÿ</strong></p>
<p>æƒ³è±¡ä½ çš„ç”µè„‘åªæœ‰8GBå†…å­˜ï¼Œå´è¦å¤„ç†100GBçš„æ•°æ®ã€‚è¿™æ­£æ˜¯LLMçš„å›°å¢ƒâ€”â€”ä¸Šä¸‹æ–‡çª—å£æœ‰é™ï¼Œè€Œå¤–éƒ¨ä¸–ç•Œæ— é™ã€‚æ›´æ®‹é…·çš„æ˜¯ï¼Œè¿™8GB"å†…å­˜"æ¯å†™ä¸€æ¬¡éƒ½è¦ä»˜è´¹ï¼Œæ¯è¯»ä¸€æ¬¡éƒ½è¦è€—æ—¶ã€‚</p>
<p><strong>RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰å°±æ˜¯AIçš„"è™šæ‹Ÿå†…å­˜"ç³»ç»Ÿï¼š</strong> ä¸éœ€è¦æŠŠæ‰€æœ‰çŸ¥è¯†å¡è¿›RAMï¼Œè€Œæ˜¯åœ¨éœ€è¦æ—¶ä»å‘é‡æ•°æ®åº“ï¼ˆç¡¬ç›˜ï¼‰ä¸­ç²¾å‡†è°ƒå–ï¼ˆPage-inï¼‰ã€‚ç”¨æˆ·æé—®â†’ç³»ç»Ÿæ£€ç´¢â†’åŠ è½½ç›¸å…³ç‰‡æ®µâ†’ç”Ÿæˆç­”æ¡ˆï¼Œè¿™ä¸ªæµç¨‹æœ¬è´¨ä¸Šå°±æ˜¯æ“ä½œç³»ç»Ÿçš„å†…å­˜åˆ†é¡µæœºåˆ¶ã€‚ä½†çœŸæ­£çš„ä¸Šä¸‹æ–‡å·¥ç¨‹è¿œä¸æ­¢è°ƒç”¨ä¸€ä¸ªå‘é‡æœç´¢APIâ€”â€”å®ƒè¦è®¾è®¡åˆ†é¡µç­–ç•¥ï¼ˆä½•æ—¶æ£€ç´¢ï¼Ÿï¼‰ã€æ›¿æ¢ç®—æ³•ï¼ˆåŠ è½½å“ªäº›ç‰‡æ®µï¼Ÿï¼‰ã€é¢„å–æœºåˆ¶ï¼ˆå¦‚ä½•é¢„æµ‹ä¸‹ä¸€æ­¥éœ€è¦ä»€ä¹ˆï¼Ÿï¼‰ã€‚</p>
<p>æ›´å‰æ²¿çš„æ˜¯<strong>å¤šçº§è®°å¿†ç³»ç»Ÿ</strong>ï¼Œå®ƒè®©AIé¦–æ¬¡æ‹¥æœ‰äº†åƒäººè„‘ä¸€æ ·çš„åˆ†å±‚è®°å¿†èƒ½åŠ›ï¼š</p>
<ul>
<li>
<p>æ ¸å¿ƒå†…å­˜ï¼ˆL1 Cacheï¼‰ï¼šå…³é”®ä¿¡æ¯å§‹ç»ˆä¿ç•™åœ¨ä¸Šä¸‹æ–‡ä¸­ï¼Œå¦‚ç”¨æˆ·èº«ä»½ã€é¡¹ç›®ç›®æ ‡ã€å…³é”®çº¦æŸã€‚è¿™ç›¸å½“äºäººç±»çš„å·¥ä½œè®°å¿†ï¼Œè®¿é—®é€Ÿåº¦æœ€å¿«ä½†å®¹é‡æå°ã€‚</p>
</li>
<li>
<p>å›å¿†å†…å­˜ï¼ˆL2 Cacheï¼‰ï¼šå¯æ£€ç´¢çš„è¿‘æœŸå¯¹è¯å†å²ï¼Œå¦‚å‰å‡ è½®çš„è®¨è®ºè¦ç‚¹ã€åˆšåˆšç¡®è®¤çš„éœ€æ±‚ã€‚è¿™ç±»ä¼¼äºçŸ­æœŸè®°å¿†ï¼Œé€šè¿‡å¿«é€ŸæŸ¥è¯¢æœºåˆ¶è®¿é—®ã€‚</p>
</li>
<li>
<p>å½’æ¡£å†…å­˜ï¼ˆDiskï¼‰ï¼šå¤–éƒ¨æŒä¹…åŒ–å­˜å‚¨ï¼Œç”¨äºé•¿æœŸè®°å¿†ï¼Œå¦‚ç”¨æˆ·çš„å†å²åå¥½ã€é¡¹ç›®æ–‡æ¡£åº“ã€è¡Œä¸šçŸ¥è¯†å›¾è°±ã€‚è¿™ç›¸å½“äºé•¿æœŸè®°å¿†ï¼Œå®¹é‡æ— é™ä½†éœ€è¦æ˜¾å¼æ£€ç´¢ã€‚</p>
</li>
</ul>
<p>è¿™è®©æˆ‘ä»¬ç¬¬ä¸€æ¬¡èƒ½è®©AIåœ¨å¯¹è¯ä¸­çœŸæ­£"è®°ä½"ç”¨æˆ·åå¥½ã€é¡¹ç›®èƒŒæ™¯å’Œå…³é”®äº‹å®ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½è¦é‡æ–°ä»‹ç»è‡ªå·±ã€‚å¾®è½¯Copilotçš„"ä¼ä¸šçº§RAG"æ­£æ˜¯è¿™ä¸€ç†å¿µçš„å®è·µâ€”â€”å®ƒä¸ä»…æ£€ç´¢æ–‡æ¡£ï¼Œæ›´è®°ä½äº†ä½ åœ¨SharePointä¸­çš„æƒé™ã€åœ¨Teamsä¸­çš„å¯¹è¯å†å²ã€åœ¨Outlookä¸­çš„ä¼šè®®å†³ç­–ï¼Œç¼–ç»‡æˆä¸€å¼ æŒç»­å­˜åœ¨çš„ä¸Šä¸‹æ–‡ç½‘ç»œã€‚</p>
<p><strong>2. ä»»åŠ¡è°ƒåº¦ï¼šå¦‚ä½•è®©AIæ‰§è¡Œå¤æ‚çš„å¤šæ­¥éª¤å·¥ä½œæµï¼Ÿ</strong></p>
<p>LLMå¤©ç„¶é€‚åˆ"å•æ­¥å†³ç­–"ï¼Œä½†å¤æ‚ä»»åŠ¡éœ€è¦å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­å’Œå¤šæ­¥åä½œã€‚è¿™å°±åƒCPUéœ€è¦æ“ä½œç³»ç»Ÿçš„è¿›ç¨‹è°ƒåº¦å™¨ã€‚ä½ ä¸å¯èƒ½ç”¨ä¸€æ¡promptè®©AIå®Œæˆ"è°ƒç ”å¸‚åœºâ†’åˆ†æç«å“â†’æ’°å†™æŠ¥å‘Šâ†’ç”ŸæˆPPTâ†’å‘é€ç»™å›¢é˜Ÿ"è¿™æ ·çš„å…¨æµç¨‹ï¼ŒAIä¼šåœ¨ä¸­é€”è¿·å¤±ã€é‡å¤æˆ–é™·å…¥æ­»å¾ªç¯ã€‚</p>
<p><strong>LangGraphè¿™ç±»æ¡†æ¶çš„å‡ºç°ï¼Œæ­£æ˜¯å°†LLMä»"æ¯ä¸€æ­¥éƒ½è¦æ€è€ƒ"çš„å†³ç­–è€…ï¼Œè½¬å˜ä¸ºåœ¨é¢„è®¾æ§åˆ¶æµä¸­æ‰§è¡Œç‰¹å®šä»»åŠ¡çš„"å·¥äºº"ã€‚</strong> é€šè¿‡å›¾ç»“æ„å®šä¹‰ä»»åŠ¡æµç¨‹ï¼ŒAIå¯ä»¥å¯é åœ°æ‰§è¡Œè°ƒç ”â†’åˆ†æâ†’ç”Ÿæˆâ†’æ ¡éªŒçš„å®Œæ•´é“¾è·¯ï¼Œè€Œä¸ä¼šåœ¨ä¸­é€”è¿·å¤±æˆ–é‡å¤ã€‚è¿™ä¸å†æ˜¯prompt chainingé‚£ç§è„†å¼±çš„çº¿æ€§ä¸²è”ï¼Œè€Œæ˜¯æœ‰çŠ¶æ€ã€å¯å¾ªç¯ã€å¸¦æ¡ä»¶åˆ†æ”¯çš„ç¡®å®šæ€§ç³»ç»Ÿã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨æ„å»ºå®¢æœAIæ—¶ï¼ŒLangGraphå¯ä»¥å®šä¹‰ï¼šç”¨æˆ·æŠ•è¯‰â†’æŸ¥è¯¢è®¢å•ï¼ˆå·¥å…·è°ƒç”¨ï¼‰â†’åˆ¤æ–­è´£ä»»æ–¹ï¼ˆæ¡ä»¶åˆ†æ”¯ï¼‰â†’æ‰§è¡Œé€€æ¬¾æ”¿ç­–ï¼ˆAPIè°ƒç”¨ï¼‰â†’ç”Ÿæˆå›å¤â†’äººç±»å®¡æ ¸ï¼ˆäººå·¥ä»‹å…¥ç‚¹ï¼‰ã€‚æ•´ä¸ªæµç¨‹ä¸­ï¼ŒAIåªè´Ÿè´£æ‰§è¡Œç‰¹å®šèŠ‚ç‚¹çš„"å¾®ä»»åŠ¡"ï¼Œè€Œè°ƒåº¦å™¨ç¡®ä¿æµç¨‹æŒ‰é¢„è®¾é€»è¾‘æ¨è¿›ã€‚è¿™ç§è®¾è®¡å¤§å¹…æå‡äº†å¯é æ€§ï¼Œä¹Ÿè®©è°ƒè¯•å’Œç›‘æ§æˆä¸ºå¯èƒ½â€”â€”ä½ ä¸å†æ˜¯åœ¨è°ƒè¯•ä¸€ä¸ªé»‘ç®±promptï¼Œè€Œæ˜¯åœ¨ç›‘æ§ä¸€ä¸ªç™½ç›’å·¥ä½œæµã€‚</p>
<p><strong>3. å·¥å…·è°ƒç”¨ï¼šå¦‚ä½•è®©AIå®‰å…¨åœ°ä¸å¤–éƒ¨ä¸–ç•Œäº¤äº’ï¼Ÿ</strong></p>
<p>æ²¡æœ‰è¾“å…¥è¾“å‡ºçš„CPUæ¯«æ— æ„ä¹‰ã€‚åŒç†ï¼ŒLLMéœ€è¦ä¸APIã€æ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿå®‰å…¨äº¤äº’ã€‚ä½†é—®é¢˜æ˜¯ï¼Œä½ å¦‚ä½•ç¡®ä¿AIä¸ä¼šè¯¯åˆ ç”Ÿäº§æ•°æ®åº“ã€ä¸ä¼šæ³„éœ²æ•æ„Ÿä¿¡æ¯ã€ä¸ä¼šåœ¨è´¹ç”¨APIä¸Šå‘èµ·æ— é™å¾ªç¯è°ƒç”¨ï¼Ÿ</p>
<p>ç°ä»£ä¸Šä¸‹æ–‡OSé€šè¿‡æ ‡å‡†åŒ–<strong>å·¥å…·æ¥å£</strong>å’Œ<strong>æƒé™æ²»ç†</strong>ï¼Œè®©AIèƒ½å¤ŸæŸ¥è¯¢æ•°æ®åº“ã€è°ƒç”¨APIã€æ‰§è¡Œä»£ç ï¼ŒåŒæ—¶ç¡®ä¿ä¸ä¼šè¶Šæƒæˆ–é€ æˆç ´åã€‚OpenAIçš„Functionsã€Anthropicçš„Tool Useï¼Œéƒ½åœ¨å»ºç«‹è¿™æ ·çš„"ç³»ç»Ÿè°ƒç”¨"è§„èŒƒã€‚ä½†è¿™åªæ˜¯å¼€å§‹â€”â€”çœŸæ­£çš„æŒ‘æˆ˜åœ¨äºè®¾è®¡<strong>å·¥å…·å‘ç°æœºåˆ¶</strong>ï¼ˆAIå¦‚ä½•çŸ¥é“æœ‰å“ªäº›å·¥å…·å¯ç”¨ï¼Ÿï¼‰ã€<strong>å‚æ•°éªŒè¯å±‚</strong>ï¼ˆå¦‚ä½•ç¡®ä¿è°ƒç”¨å‚æ•°åˆæ³•ï¼Ÿï¼‰ã€<strong>æƒé™ä¸Šä¸‹æ–‡</strong>ï¼ˆå¦‚ä½•æ ¹æ®ç”¨æˆ·èº«ä»½åŠ¨æ€é™åˆ¶å·¥å…·èŒƒå›´ï¼Ÿï¼‰ã€<strong>ç†”æ–­ä¸é™æµ</strong>ï¼ˆå¦‚ä½•é˜²æ­¢å·¥å…·è°ƒç”¨å¤±æ§ï¼Ÿï¼‰ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨åŒ»ç–—AIåœºæ™¯ä¸­ï¼Œå·¥å…·è°ƒç”¨ç³»ç»Ÿä¸ä»…è¦è®©AIèƒ½æŸ¥è¯¢ç”µå­ç—…å†ï¼Œæ›´è¦ç¡®ä¿å®ƒåªèƒ½è®¿é—®å½“å‰æˆæƒæ‚£è€…çš„æ•°æ®ï¼Œä¸èƒ½è·¨ç—…å†æŸ¥è¯¢ï¼›åœ¨è´¢åŠ¡AIä¸­ï¼ŒAIå¯ä»¥è¯»å–æŠ¥è¡¨ä½†ä¸èƒ½æ‰§è¡Œè½¬è´¦ï¼Œå¯ä»¥åˆ†æé£é™©ä½†ä¸èƒ½ä¿®æ”¹é£æ§è§„åˆ™ã€‚è¿™ç§ç²¾ç»†åŒ–çš„æ²»ç†èƒ½åŠ›ï¼Œæ‰æ˜¯å·¥å…·è°ƒç”¨ä»Demoèµ°å‘ç”Ÿäº§çš„å…³é”®ã€‚GitHub Copilotçš„ä»£ç ä»“åº“ç´¢å¼•æ­£æ˜¯å…¸èŒƒâ€”â€”å®ƒè®©AIèƒ½"çœ‹æ‡‚"æ•´ä¸ªä»£ç åº“ï¼Œä½†ä¸¥æ ¼éµå¾ªæ–‡ä»¶æƒé™å’Œä»£ç æ‰€æœ‰æƒã€‚</p>
<p><strong>4. ç¼“å­˜ç­–ç•¥ï¼šå¦‚ä½•é™ä½æˆæœ¬å’Œå»¶è¿Ÿï¼Ÿ</strong></p>
<p>å½“ä¸Šä¸‹æ–‡è¶Šæ¥è¶Šé•¿ï¼Œæˆæœ¬å‘ˆæŒ‡æ•°çº§å¢é•¿ã€‚åœ¨Llama 4 Scoutæ”¯æŒåƒä¸‡çº§Tokençš„æ—¶ä»£ï¼Œä¸€æ¬¡å®Œæ•´è°ƒç”¨çš„æˆæœ¬å¯èƒ½é«˜è¾¾æ•°ç™¾ç¾å…ƒã€‚èªæ˜çš„ç¼“å­˜ç­–ç•¥æˆä¸ºç”Ÿäº§çº§åº”ç”¨çš„èƒœè´Ÿæ‰‹ã€‚</p>
<p>å¯¹æ¯”OpenAIå’ŒAnthropicçš„ç­–ç•¥ï¼š</p>
<ul>
<li>
<p>OpenAIï¼šè‡ªåŠ¨ç¼“å­˜ï¼Œç²¾ç¡®åŒ¹é…ï¼Œè¯»ç¼“å­˜50%æŠ˜æ‰£ï¼Œé€‚åˆç®€å•åŸå‹ã€‚å®ƒçš„ç¼“å­˜åƒCPUçš„L1 Cacheï¼Œå®Œå…¨è‡ªåŠ¨ä½†å‘½ä¸­ç‡æœ‰é™â€”â€”åªæœ‰å®Œå…¨ç›¸åŒçš„è¯·æ±‚å‰ç¼€æ‰èƒ½å‘½ä¸­ã€‚</p>
</li>
<li>
<p>Anthropicï¼šæ˜¾å¼æ§åˆ¶ï¼Œå‰ç¼€åŒ¹é…ï¼Œè¯»ç¼“å­˜90%æŠ˜æ‰£ï¼Œå†™ç¼“å­˜åŠ æ”¶25%ï¼Œé€‚åˆé«˜å¤ç”¨ç”Ÿäº§ç¯å¢ƒã€‚å®ƒçš„ç¼“å­˜åƒRedisï¼Œéœ€è¦å¼€å‘è€…æ˜¾å¼æ ‡è®°"è¿™æ˜¯å¯å¤ç”¨çš„å‰ç¼€"ï¼Œä½†ä¸€æ—¦å‘½ä¸­ï¼Œå‡ ä¹æ‰€æœ‰Tokenéƒ½äº«å—æŠ˜æ‰£ã€‚</p>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ee6fb6f0e7643eaa89d0341f25be289~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm66KeBQUdJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115071&amp;x-signature=J3SZBf6rI5vObtgxJibBWLEJMvc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™æœ¬è´¨ä¸Šæ˜¯<strong>ç¡¬ä»¶çº§ç¼“å­˜</strong>çš„è®¾è®¡å“²å­¦å·®å¼‚â€”â€”å‰è€…çœå¿ƒï¼Œåè€…é«˜æ•ˆã€‚åœ¨åƒä¸‡çº§Tokençš„Llama 4æ—¶ä»£ï¼Œç¼“å­˜ç­–ç•¥ç›´æ¥å†³å®šå•†ä¸šå¯è¡Œæ€§ã€‚ä¸€ä¸ªæ™ºèƒ½çš„ç¼“å­˜ç³»ç»Ÿä¼šåˆ†æè¯·æ±‚æ¨¡å¼ï¼Œè‡ªåŠ¨å°†system promptã€å·¥å…·å®šä¹‰ã€çŸ¥è¯†åº“ç‰‡æ®µç­‰ç¨³å®šå†…å®¹æ ‡è®°ä¸ºç¼“å­˜å€™é€‰ï¼Œç”šè‡³æ ¹æ®å†å²è®¿é—®æ¨¡å¼é¢„åŠ è½½å¯èƒ½è¢«è¯·æ±‚çš„ä¸Šä¸‹æ–‡ã€‚æˆæœ¬å·®å¼‚æ˜¯æƒŠäººçš„ï¼šåœ¨é«˜å¤ç”¨åœºæ™¯ä¸‹ï¼Œ90%ç¼“å­˜æŠ˜æ‰£æ„å‘³ç€100ç¾å…ƒçš„å¼€é”€é™è‡³10ç¾å…ƒï¼Œè€Œ50%æŠ˜æ‰£åªèƒ½é™åˆ°50ç¾å…ƒã€‚å¯¹äºæ—¥è°ƒç”¨ç™¾ä¸‡æ¬¡çš„åº”ç”¨ï¼Œè¿™å°±æ˜¯ç”Ÿå­˜ä¸æ­»äº¡çš„åŒºåˆ«ã€‚</p>
<p>æ›´å‰æ²¿çš„ç¼“å­˜ç­–ç•¥ç”šè‡³åŒ…æ‹¬<strong>è¯­ä¹‰ç¼“å­˜</strong>ï¼ˆç›¸ä¼¼é—®é¢˜å…±äº«ç¼“å­˜ï¼‰ã€<strong>åˆ†å±‚ç¼“å­˜</strong>ï¼ˆæ ¹æ®è®¿é—®é¢‘ç‡è‡ªåŠ¨å‡é™çº§ï¼‰ã€<strong>é¢„æµ‹æ€§ç¼“å­˜</strong>ï¼ˆåŸºäºç”¨æˆ·è¡Œä¸ºé¢„åŠ è½½ä¸Šä¸‹æ–‡ï¼‰ã€‚è¿™äº›æŠ€æœ¯ï¼Œæ­£åœ¨å°†ä¸Šä¸‹æ–‡OSä»"èƒ½ç”¨"æ¨å‘"å•†ç”¨"ã€‚</p>
<p><strong>3</strong></p>
<p><strong>å½“ä¸Šä¸‹æ–‡å¤ªé•¿ï¼šæ€§èƒ½è¡°å‡ä¸ç³»ç»Ÿå´©æºƒ</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7959939424b7447e996dc7d4e11085fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm66KeBQUdJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115071&amp;x-signature=D7wt%2FkDlC4YGdkYM9Z9mZWxZRy8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç„¶è€Œï¼Œæ›´é•¿çš„ä¸Šä¸‹æ–‡ä¸æ˜¯ä¸‡èƒ½è¯ã€‚å®ƒæ›´åƒä¸€æŠŠåŒåˆƒå‰‘â€”<strong>å½“é•¿åº¦è¶…è¶Šæ¨¡å‹çœŸæ­£çš„"ç†è§£å¸¦å®½"ï¼Œå¢é•¿ä¸å†æ˜¯ä¼˜åŠ¿ï¼Œè€Œæ˜¯è¯…å’’ã€‚</strong></p>
<p>æ–¯å¦ç¦ã€ä¼¯å…‹åˆ©å’ŒMITçš„å¤šé¡¹ç‹¬ç«‹ç ”ç©¶æ­ç¤ºäº†ä¸€ä¸ªåç›´è§‰çš„ç°è±¡ï¼š<strong>æ‰€æœ‰æ¨¡å‹åœ¨è¶…è¿‡ç‰¹å®šé•¿åº¦åæ€§èƒ½éƒ½ä¼šè¡°å‡ï¼Œè€Œä¸”è¡°å‡æ¨¡å¼æƒŠäººåœ°ä¸€è‡´</strong>â€”â€”å…ˆæ˜¯çº¿æ€§å¢é•¿çš„å¹³å°æœŸï¼Œæ¥ç€æ˜¯é™¡å³­çš„ä¸‹æ»‘æ›²çº¿ã€‚Llama 3.1åœ¨32Kåã€GPT-4åœ¨64Kåã€Claude 3.5åœ¨100Kåï¼Œè¡¨ç°å¼€å§‹æ˜¾è‘—ä¸‹é™ã€‚è¿™èƒŒåçš„åŸç†ä¸CPUè¿‡è½½å¦‚å‡ºä¸€è¾™ï¼šå½“ä»»åŠ¡é›†è¶…è¿‡ç¼“å­˜å®¹é‡ï¼Œç¼“å­˜å‘½ä¸­ç‡æ€¥å‰§ä¸‹é™ï¼ŒTLB missé¢‘å‘ï¼Œè°ƒåº¦å¼€é”€åå™¬äº†å¹¶è¡Œæ”¶ç›Šã€‚åŒç†ï¼Œå½“ä¸Šä¸‹æ–‡è¶…è¿‡æ¨¡å‹çš„"æœ‰æ•ˆæ³¨æ„åŠ›åŠå¾„"ï¼Œæ¨¡å‹å¼€å§‹åœ¨ä¿¡æ¯æµ·æ´‹ä¸­è¿·å¤±ï¼Œæ£€ç´¢å…³é”®ä¿¡å·çš„æˆæœ¬æŒ‡æ•°çº§ä¸Šå‡ã€‚</p>
<p>æ›´å¾®å¦™çš„æ˜¯<strong>ä½ç½®åå·®ï¼ˆPositional Biasï¼‰</strong> â€”â€”æ¨¡å‹å¯¹ä¸Šä¸‹æ–‡ä¸åŒä½ç½®çš„ä¿¡æ¯å¤„ç†èƒ½åŠ›å¹¶ä¸å‡ç­‰ã€‚æ—©æœŸæ¨¡å‹å‘ˆç°æ˜æ˜¾çš„"ä¸­é—´ä¸¢å¤±"ç°è±¡ï¼ˆMid-Forgottenï¼‰ï¼Œæœ€æ“…é•¿å¤„ç†å¼€å¤´å’Œç»“å°¾çš„ä¿¡æ¯ï¼›å³ä½¿æ˜¯æœ€æ–°æ¨¡å‹ï¼Œå¯¹æ·±åº¦åŸ‹è—åœ¨é•¿ä¸Šä¸‹æ–‡ä¸­çš„å…³é”®ç»†èŠ‚ï¼Œå¬å›ç‡ä¹Ÿä¼šä¸‹é™30%-50%ã€‚ä¸€ä½å¼€å‘è€…æ›¾ç”¨çœŸå®æ¡ˆä¾‹å°è¯ï¼šå½“ä»–æŠŠ500é¡µçš„ä»£ç åº“å…¨éƒ¨å¡è¿›Claudeæ—¶ï¼ŒAIç«Ÿ"å¿½ç•¥"äº†ç¬¬347é¡µæ˜ç¡®æ ‡æ³¨çš„"ç¦æ­¢ä¿®æ”¹æ­¤æ¥å£"æ³¨é‡Šï¼Œç”Ÿæˆäº†ç ´åæ€§ä»£ç ã€‚è¿™æ­ç¤ºäº†æ®‹é…·çœŸç›¸ï¼š<strong>è´¨é‡æ¯”æ•°é‡é‡è¦ï¼Œè®¾è®¡æ¯”è§„æ¨¡å…³é”®ã€‚</strong></p>
<p>ä¸Šä¸‹æ–‡è¿‡è½½ä¼šå¯¼è‡´å››ç§å…¸å‹çš„"ç³»ç»Ÿå´©æºƒ"æ¨¡å¼ï¼Œæ¯ä¸€ç§éƒ½è¶³ä»¥è®©ç”Ÿäº§çº§åº”ç”¨ç˜«ç—ªï¼š</p>
<p><strong>1. ä¸Šä¸‹æ–‡æ¯’åŒ–ï¼ˆContext Poisoningï¼‰</strong></p>
<p>é”™è¯¯çš„æˆ–å¹»è§‰äº§ç”Ÿçš„ä¿¡æ¯è¿›å…¥å†…å­˜ï¼Œæ±¡æŸ“åç»­æ‰€æœ‰ç”Ÿæˆï¼Œå¦‚åŒç—…æ¯’å…¥ä¾µç³»ç»Ÿç¼“å­˜ã€‚æƒ³è±¡ä¸€ä¸ªå®¢æœAIåœ¨å¯¹è¯ä¸­é”™è¯¯è®°å½•äº†"ç”¨æˆ·VIPç­‰çº§=é’»çŸ³çº§"ï¼ˆå®é™…ä¸ºé»„é‡‘çº§ï¼‰ï¼Œè¿™ä¸ªæ¯’åŒ–æ•°æ®ä¼šæ±¡æŸ“å…¶åçš„æ‰€æœ‰äº¤äº’â€”â€”ä»æŠ˜æ‰£è®¡ç®—åˆ°ä¼˜å…ˆæœåŠ¡ï¼Œæ•´ä¸ªå¯¹è¯é“¾æ¡å»ºç«‹åœ¨é”™è¯¯åœ°åŸºä¸Šã€‚æ›´å±é™©çš„æ˜¯ï¼Œæ¯’åŒ–å…·æœ‰çº§è”ä¼ æŸ“æ€§ï¼šç¬¬ä¸€è½®çš„å°å¹»è§‰ï¼Œå¯èƒ½åœ¨å¤šè½®å¯¹è¯ä¸­è¢«AIè‡ªæˆ‘å¼ºåŒ–ï¼Œæœ€ç»ˆç”Ÿæˆå®Œå…¨è„±ç¦»äº‹å®çš„ç­”å¤ã€‚ä¼ ç»Ÿåšæ³•æ˜¯æ¸…ç©ºå¯¹è¯é‡æ–°å¼€å§‹ï¼Œä½†è¿™ç ´åäº†ç”¨æˆ·è¿ç»­æ€§ä½“éªŒã€‚æˆç†Ÿçš„ä¸Šä¸‹æ–‡OSéœ€è¦å†…ç½®å†…å­˜æ ¡éªŒæœºåˆ¶â€”â€”å¯¹å†™å…¥æ ¸å¿ƒå†…å­˜çš„å…³é”®ä¿¡æ¯è¿›è¡Œç½®ä¿¡åº¦è¯„åˆ†å’Œäº‹å®æ ¸æŸ¥ï¼Œå¦‚åŒECCå†…å­˜è‡ªåŠ¨çº é”™ã€‚</p>
<p><strong>2. ä¸Šä¸‹æ–‡åˆ†å¿ƒï¼ˆContext Distractionï¼‰</strong></p>
<p>è¿‡å¤šçš„å†å²ä¿¡æ¯ä½¿æ¨¡å‹åç¦»æ ¸å¿ƒä»»åŠ¡ï¼Œå¼€å§‹é‡å¤å†å²è¡Œä¸ºï¼Œå¦‚åŒCPUé™·å…¥å±€éƒ¨æ€§é™·é˜±æ— æ³•è‡ªæ‹”ã€‚ä¸€ä¸ªä»£ç ç”ŸæˆAIåœ¨é¢å¯¹"ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢"è¯·æ±‚æ—¶ï¼Œå¦‚æœä¸Šä¸‹æ–‡ä¸­åŒ…å«å¤§é‡è¿‡å¾€æˆåŠŸçš„APIè°ƒç”¨ç¤ºä¾‹ï¼Œå®ƒå¯èƒ½ä¼šæœºæ¢°åœ°å¤ç”¨æ—§æ¨¡å¼ï¼Œè€Œéé’ˆå¯¹å½“å‰åœºæ™¯è®¾è®¡æœ€ä¼˜æ–¹æ¡ˆã€‚æ›´ä¸¥é‡çš„æ˜¯<strong>è¡Œä¸ºæƒ¯æ€§</strong>ï¼šä¸‹å›¾ä¸­ï¼Œå½“ç”¨æˆ·çªç„¶åˆ‡æ¢è¯é¢˜ï¼ˆä»è®¨è®ºPythonè½¬å‘Rustï¼‰ï¼ŒAIå´å› ä¸Šä¸‹æ–‡æƒ¯æ€§ç»§ç»­è¾“å‡ºPythonä»£ç ï¼Œç›´åˆ°ç”¨æˆ·å¤šæ¬¡çº æ­£æ‰åˆ‡æ¢è½¨é“ã€‚è¿™å°±åƒæ“ä½œç³»ç»Ÿçš„è¿›ç¨‹æ²¡æœ‰åŠæ—¶æ”¶åˆ°ä¸­æ–­ä¿¡å·ã€‚è§£å†³ä¹‹é“åœ¨äº<strong>åŠ¨æ€ä¸Šä¸‹æ–‡çª—å£</strong>â€”â€”å®æ—¶è¯†åˆ«è¯é¢˜è½¬ç§»ï¼Œä¸»åŠ¨å‹ç¼©æˆ–è¿ç§»æ— å…³å†å²ï¼Œä¿æŒå·¥ä½œé›†çš„"ç´§å‡‘æ€§"ã€‚</p>
<p><strong>3. ä¸Šä¸‹æ–‡æ··æ·†ï¼ˆTool Confusionï¼‰</strong></p>
<p>æä¾›äº†è¿‡å¤šçš„å·¥å…·æˆ–æ— å…³ä¿¡æ¯ï¼Œå¯¼è‡´æ¨¡å‹åšå‡ºé”™è¯¯é€‰æ‹©ï¼Œå¦‚åŒç³»ç»Ÿè°ƒç”¨è¡¨è¿‡äºåºå¤§å¯¼è‡´è°ƒåº¦å‡ºé”™ã€‚å½“AIé¢å¯¹"å®‰æ’ä¼šè®®"çš„è¯·æ±‚ï¼Œè‹¥å·¥å…·åˆ—è¡¨ä¸­åŒæ—¶åŒ…å«<code>create_calendar_event</code>ã€<code>schedule_zoom_meeting</code>ã€<code>book_conference_room</code>ï¼Œå®ƒå¯èƒ½å› å‚æ•°ç†è§£åå·®è€Œè°ƒç”¨é”™è¯¯å·¥å…·ã€‚æŸä¼ä¸šæ›¾å‡ºç°AIå› æ··æ·†<code>delete_file</code>å’Œ<code>archive_file</code>å·¥å…·ï¼Œè¯¯åˆ äº†é‡è¦æ–‡æ¡£çš„äº‹æ•…ã€‚è¿™æš´éœ²äº†<strong>å·¥å…·è¿‡è½½æ‚–è®º</strong>ï¼šå·¥å…·è¶Šå¤šï¼Œé€‰æ‹©è¶Šéš¾ã€‚æˆç†Ÿçš„ä¸Šä¸‹æ–‡OSä¼šå¼•å…¥å·¥å…·è·¯ç”±å±‚â€”â€”AIä¸ç›´æ¥è°ƒç”¨å·¥å…·ï¼Œè€Œæ˜¯å…ˆè¾“å‡ºæ„å›¾ï¼Œç”±è·¯ç”±å±‚æ ¹æ®æƒé™ã€æˆæœ¬ã€å¯é æ€§é€‰æ‹©æœ€ä¼˜å®ç°ã€‚åŒæ—¶ï¼Œå·¥å…·æè¿°åŠ¨æ€è£å‰ªæŠ€æœ¯ä¼šæ ¹æ®å½“å‰ä»»åŠ¡åªæš´éœ²ç›¸å…³å·¥å…·å­é›†ï¼Œé¿å…è®¤çŸ¥è¿‡è½½ã€‚</p>
<p><strong>4. ä¸Šä¸‹æ–‡å†²çªï¼ˆContext Clashï¼‰</strong></p>
<p>ä¸Šä¸‹æ–‡ä¸­åŒ…å«ç›¸äº’çŸ›ç›¾çš„ä¿¡æ¯ï¼Œå¯¼è‡´é€»è¾‘æ··ä¹±å’Œæ€§èƒ½ä¸‹é™ï¼Œå¦‚åŒå¤šçº¿ç¨‹æ•°æ®ä¸ä¸€è‡´äº§ç”Ÿç«äº‰æ¡ä»¶ã€‚å½“ç³»ç»Ÿpromptè¦æ±‚"éµå¾ªå“ç‰ŒAçš„è¯­è°ƒ"ï¼Œè€Œæ£€ç´¢åˆ°çš„æ–‡æ¡£å´æ˜¯å“ç‰ŒBçš„æ—§æŒ‡å—ï¼ŒAIä¼šåœ¨ä¸¤ç§é£æ ¼é—´æ‘‡æ‘†ä¸å®šã€‚æ³•å¾‹æ–‡ä¹¦åœºæ™¯æ›´å±é™©â€”â€”åˆåŒæ¡æ¬¾ä¸å®¢æˆ·é‚®ä»¶æ‰¿è¯ºå­˜åœ¨å†²çªï¼ŒAIå¯èƒ½ç”Ÿæˆæ—¢ä¸åˆè§„ä¹Ÿä¸ç¬¦åˆå®¢æˆ·æœŸæœ›çš„æ··åˆæ–¹æ¡ˆã€‚è¿™ç§å†²çªä¸ä»…é™ä½è´¨é‡ï¼Œæ›´å¸¦æ¥<strong>åˆè§„é£é™©</strong>ã€‚é«˜çº§ä¸Šä¸‹æ–‡OSå¿…é¡»å®ç°<strong>å†²çªæ£€æµ‹ä¸æ¶ˆè§£æœºåˆ¶</strong>ï¼šè‡ªåŠ¨è¯†åˆ«çŸ›ç›¾å‘½é¢˜ï¼Œæ ‡è®°ç½®ä¿¡åº¦ï¼Œç”šè‡³ä¸»åŠ¨å‘èµ·æ¾„æ¸…å¯¹è¯ã€‚å°±åƒæ•°æ®åº“çš„ä¹è§‚é”æœºåˆ¶ï¼Œåœ¨ç”Ÿæˆå‰æ£€æŸ¥æ•°æ®ä¸€è‡´æ€§ï¼Œå†²çªæ—¶å›æ»šåˆ°å®‰å…¨çŠ¶æ€ã€‚</p>
<p>è¿™å››ç§å´©æºƒæ¨¡å¼å¾€å¾€<strong>è¿é”ååº”</strong>ï¼šä¸€æ¬¡å·¥å…·è°ƒç”¨å¤±è´¥å†™å…¥é”™è¯¯ä¿¡æ¯ï¼ˆæ¯’åŒ–ï¼‰â†’ AIåˆ†å¿ƒé‡å¤é”™è¯¯å°è¯•ï¼ˆåˆ†å¿ƒï¼‰â†’ è°ƒç”¨æ›´å¤šå·¥å…·è¯•å›¾è‡ªçº æ­£ï¼ˆæ··æ·†ï¼‰â†’ æ–°æ—§ä¿¡æ¯å†²çªï¼ˆå†²çªï¼‰â†’ ç³»ç»Ÿå½»åº•å¤±åºã€‚æ²¡æœ‰æ“ä½œç³»ç»Ÿçš„è¿›ç¨‹éš”ç¦»å’Œå†…å­˜ä¿æŠ¤ï¼ŒLLMåº”ç”¨åœ¨é•¿ä¸Šä¸‹æ–‡åœºæ™¯ä¸‹å°±æ˜¯è„†å¼±çš„è£¸æœºç¨‹åºã€‚</p>
<p>è¿™äº›é—®é¢˜æ­ç¤ºäº†æ®‹é…·çš„å·¥ç¨‹çœŸç›¸ï¼š<strong>è´¨é‡æ¯”æ•°é‡é‡è¦ï¼Œè®¾è®¡æ¯”è§„æ¨¡å…³é”®ã€‚</strong> æ‹¥æœ‰200Kä¸Šä¸‹æ–‡çª—å£å´ä¸è®¾è®¡å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œå°±åƒç»™8ä½å•ç‰‡æœºæ¥ä¸Š1TBç¡¬ç›˜â€”â€”å®¹é‡æ— æ³•è½¬åŒ–ä¸ºèƒ½åŠ›ã€‚æœªæ¥çš„ç«äº‰ç„¦ç‚¹ï¼Œå°†ä»"è°èƒ½å¡æ›´å¤šToken"è½¬å‘"è°èƒ½è®¾è®¡æ›´æ™ºèƒ½çš„ä¸Šä¸‹æ–‡æ¶æ„"ã€‚è®°ä½ï¼Œ<strong>æœ‰æ•ˆä¸Šä¸‹æ–‡ï¼ˆEffective Contextï¼‰</strong> ä¸ç­‰äºè¾“å…¥é•¿åº¦ï¼Œè€Œæ˜¯æ¨¡å‹çœŸæ­£èƒ½å¤Ÿå®šä½ã€ç†è§£å¹¶æ­£ç¡®ä½¿ç”¨çš„ä¿¡æ¯é‡ã€‚è¿™æ­£æ˜¯ä¸Šä¸‹æ–‡å·¥ç¨‹çš„æ ¸å¿ƒä½¿å‘½â€”â€”<strong>åœ¨æœ‰é™çš„æ³¨æ„åŠ›å¸¦å®½ä¸‹ï¼Œå®ç°ä¿¡æ¯çš„æœ€ä¼˜é…ç½®ã€‚</strong></p>
<p>**<br/>
**</p>
<p><strong>4</strong></p>
<p><strong>æœªæ¥å›¾æ™¯ï¼šä»"æ›´é•¿"åˆ°"æ›´æœ‰æ•ˆ"</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c5c4feda47348c7addac1b1b3c6f29b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm66KeBQUdJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115071&amp;x-signature=papCGzbZzMkscwZwVJFniwMaUxc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸Šä¸‹æ–‡å·¥ç¨‹çš„æœªæ¥ä¸åœ¨ç›²ç›®è¿½æ±‚æ›´é•¿çš„çª—å£ï¼Œè€Œåœ¨æ™ºèƒ½çš„è®¾è®¡ã€‚é¦–å…ˆï¼ŒRAGä¸é•¿ä¸Šä¸‹æ–‡å°†æ·±åº¦ååŒè€Œéç›¸äº’æ›¿ä»£â€”â€”é•¿çª—å£æ‰®æ¼”"å·¥ä½œå°"çš„è§’è‰²ï¼Œå®¹çº³å¤šè½®å¯¹è¯çš„ä¸­é—´ç»“æœã€æ¨ç†è½¨è¿¹å’Œæ€ç»´é“¾æ¡ï¼Œè€ŒRAGåˆ™å……å½“"æ™ºèƒ½å›¾ä¹¦é¦†ç®¡ç†å‘˜"ï¼Œä»æµ·é‡çŸ¥è¯†åº“ä¸­ç­›é€‰é«˜ä»·å€¼ç‰‡æ®µæŒ‰éœ€åŠ è½½ã€‚è¿™ç§åˆ†å·¥è®©å‰è€…ä¸“æ³¨åŠ¨æ€è¿‡ç¨‹çš„æ‰¿è½½ï¼Œåè€…ä¸“æ³¨é™æ€çŸ¥è¯†çš„ç²¾ç¡®å®šä½ï¼Œå…±åŒæ„å»ºèµ·é«˜æ•ˆçš„ä¿¡æ¯ä¾›ç»™ä½“ç³»ã€‚å…¶æ¬¡ï¼ŒAgentic Retrievalå°†é‡æ„ä¸Šä¸‹æ–‡æ„å»ºæ–¹å¼ï¼Œä½¿ä¸Šä¸‹æ–‡çªç ´å•ä¸€æ–‡æ¡£è¾¹ç•Œï¼Œè·¨è¶Šä»£ç ä»“åº“ã€é‚®ä»¶çº¿ç¨‹ã€å·¥å•ç³»ç»Ÿã€æ—¥å¿—æµç”šè‡³å³æ—¶é€šè®¯è®°å½•ã€‚ä»¥Azure AI Searchçš„Agentic Retrievalä¸ºä¾‹ï¼Œç³»ç»Ÿå·²èƒ½è‡ªåŠ¨è§„åˆ’å¤šæ­¥æ£€ç´¢ç­–ç•¥ï¼Œé€šè¿‡Reflection &amp; Refineæœºåˆ¶è®©AIåƒç ”ç©¶å‘˜èˆ¬è¿­ä»£ä¼˜åŒ–æŸ¥è¯¢ï¼Œå…ˆå®šä½ç›¸å…³æ•°æ®æºï¼Œå†æ·±å…¥æŒ–æ˜å…³è”ä¿¡æ¯ï¼Œæœ€åäº¤å‰éªŒè¯æ„å»ºå®Œæ•´çš„ä¸Šä¸‹æ–‡å›¾æ™¯ã€‚</p>
<p>ä¸æ­¤åŒæ—¶ï¼Œè®°å¿†çš„ç²¾ç»†åŒ–æ²»ç†æ­£ä»å¯é€‰é¡¹å˜ä¸ºåˆšéœ€ã€‚æœªæ¥è®°å¿†ä¸å†æ˜¯é»‘ç®±èˆ¬çš„æ··æ²ŒçŠ¶æ€ï¼Œè€Œæ˜¯è¢«æ‹†è§£ä¸ºå¯å®¡è®¡ã€å¯æ§åˆ¶ã€å¯é—å¿˜çš„èµ„äº§ï¼ŒæŒ‰å¯¹è¯çº§ã€é¡¹ç›®çº§ã€äººæ ¼çº§å®ç°ç²¾ç»†éš”ç¦»ã€‚è¿™ç§åˆ†å±‚ç®¡ç†æ—¢æ»¡è¶³äº†ä¸šåŠ¡è¿ç»­æ€§éœ€æ±‚ï¼Œåˆå›åº”äº†éšç§ä¸å®‰å…¨çš„ä¸¥å³»æŒ‘æˆ˜â€”â€”æ•æ„Ÿä¿¡æ¯å¿…é¡»åœ¨æŒ‡å®šèŒƒå›´å†…å¯è§ï¼Œè¿‡æœŸè®°å¿†åº”å½“è‡ªåŠ¨å½’æ¡£æˆ–åˆ é™¤ï¼Œç”¨æˆ·æœ‰æƒè¦æ±‚"è¢«é—å¿˜"ã€‚è®°å¿†æ²»ç†çš„æ ‡å‡†åŒ–å®è·µï¼Œå°†æˆä¸ºä¼ä¸šAIåˆè§„çš„åŸºçŸ³ã€‚æ›´è¿›ä¸€æ­¥çš„ï¼Œå¤šæ¨¡æ€ä¸è·¨ç³»ç»Ÿä¸Šä¸‹æ–‡èåˆå°†æ‰“å¼€å…¨æ–°ç»´åº¦ï¼Œä¸‹ä¸€ä»£ä¸Šä¸‹æ–‡OSå°†ç»Ÿä¸€å¤„ç†æ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘ä¹ƒè‡³ç³»ç»Ÿæ—¥å¿—å’Œä¼ æ„Ÿå™¨æ•°æ®æµï¼Œåœ¨æ•°å­—ä¸–ç•Œä¸ç‰©ç†ä¸–ç•Œçš„äº¤ç•Œå¤„æ„å»ºèµ·çœŸæ­£çš„"å·¥ä½œè®°å¿†"ï¼Œè®©AIèƒ½ç†è§£ä¼šè®®å®¤ç™½æ¿ä¸Šçš„è‰å›¾ã€å·¥å‚è½¦é—´çš„è®¾å¤‡å—¡é¸£æˆ–å®¢æœç”µè¯ä¸­çš„æƒ…ç»ªæ³¢åŠ¨ã€‚</p>
<p>è¿ˆå‘ç»ˆæå½¢æ€ï¼Œè‡ªåŠ¨åŒ–ä¸æ ‡å‡†åŒ–å°†æˆä¸ºä¸¤å¤§æ”¯æŸ±ã€‚Model Context Protocolï¼ˆMCPï¼‰ç­‰æ–°å…´æ ‡å‡†æ­£è¯•å›¾å®šä¹‰ä¸Šä¸‹æ–‡äº¤æ¢çš„é€šç”¨è¯­è¨€ï¼Œè®©ä¸åŒAgentèƒ½åƒè°ƒç”¨APIä¸€æ ·è¯·æ±‚å’Œå…±äº«ä¸Šä¸‹æ–‡ï¼Œå®ç°è·¨å¹³å°ã€è·¨å‚å•†çš„äº’æ“ä½œæ€§ï¼›è€ŒAuto-Context Engineeringåˆ™è‡´åŠ›äºè®©AIå…·å¤‡è‡ªæˆ‘åæ€èƒ½åŠ›ï¼Œèƒ½å¤Ÿè‡ªåŠ¨æ€»ç»“å¯¹è¯è¦ç‚¹ã€è¯†åˆ«ä¿¡æ¯å†—ä½™ã€ä¼˜åŒ–å†…å­˜å¸ƒå±€ï¼Œç”šè‡³åŠ¨æ€è°ƒæ•´æ£€ç´¢ç­–ç•¥ã€‚åœ¨è¿™åœºå˜é©ä¸­ï¼Œè¡ŒåŠ¨æŒ‡å—å·²ç„¶æ¸…æ™°ï¼šä½ å¿…é¡»å®Œæˆä»æç¤ºè¯"æ“ä½œå‘˜"åˆ°ç³»ç»Ÿ"æ¶æ„å¸ˆ"çš„æ€ç»´è·ƒè¿ï¼Œå°†"LLM=CPUï¼Œä¸Šä¸‹æ–‡=RAM"çš„æ ¸å¿ƒéšå–»èå…¥æ¯ä¸€æ¬¡è®¾è®¡å†³ç­–ã€‚æœªæ¥çš„ç«äº‰ä¼˜åŠ¿ä¸åœ¨äºé€‰æ‹©GPT-5è¿˜æ˜¯Claude 4ï¼Œè€Œåœ¨äºä½ æ„å»ºäº†å¤šä¹ˆæ™ºèƒ½ã€é«˜æ•ˆã€å¯é çš„ä¸Šä¸‹æ–‡ä¾›åº”é“¾â€”â€”è¿™æ‰æ˜¯çœŸæ­£çš„æŠ€æœ¯æŠ¤åŸæ²³ã€‚æ­¤åˆ»å°±åº”è¯„ä¼°åº”ç”¨æ˜¯å¦éœ€è¦å¤šçº§è®°å¿†ç³»ç»Ÿï¼Œè®¾è®¡RAGè·¯ç”±ç­–ç•¥é¿å…å•ç‚¹æ£€ç´¢ï¼Œå®æ–½ç²¾ç»†åŒ–ç¼“å­˜ç­–ç•¥å¹¶ç›‘æ§Tokenæˆæœ¬ï¼ŒåŒæ—¶é‡‡ç”¨LangGraphç­‰æ¡†æ¶æ„å»ºæœ‰çŠ¶æ€ã€å¯è§‚æµ‹çš„å·¥ä½œæµã€‚</p>
<p>æˆ‘ä»¬æ­£ç«™åœ¨AIå·¥ç¨‹çš„è½¬æŠ˜ç‚¹ä¸Šã€‚å½“æ¨¡å‹"æ™ºå•†"æå‡çš„è¾¹é™…æ•ˆç›Šé€’å‡ï¼Œ"ä¸Šä¸‹æ–‡OS"çš„æ•ˆç‡é©å‘½æ‰åˆšåˆšå¼€å§‹ã€‚è°èƒ½ç‡å…ˆæ„å»ºå‡ºä¸‹ä¸€ä»£æ“ä½œç³»ç»Ÿï¼Œè°å°±èƒ½å æ®å…ˆæœºã€‚è®°ä½ï¼Œæˆ‘ä»¬æ‹¥æœ‰çš„ä¸æ˜¯æœ‰é—å¿˜ç—‡çš„å¤©æ‰å®ä¹ ç”Ÿï¼Œè€Œæ˜¯ä¸€ä¸ªäºŸå¾…è¢«ç²¾å¿ƒè®¾è®¡æ“ä½œç³»ç»Ÿçš„CPUã€‚è€Œä½ çš„å·¥ä½œï¼Œå°±æ˜¯æˆä¸ºé‚£ä¸ªæ¶æ„å¸ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»åŸç”Ÿ JS åˆ° Vue3 Composition APIï¼šæ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ç°ä»£ Vue å†™ä¸€ä¸ªä¼˜é›…çš„ Todos ä»»åŠ¡æ¸…å•]]></title>    <link>https://juejin.cn/post/7582519152565583887</link>    <guid>https://juejin.cn/post/7582519152565583887</guid>    <pubDate>2025-12-12T03:35:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582519152565583887" data-draft-id="7582469532326592548" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»åŸç”Ÿ JS åˆ° Vue3 Composition APIï¼šæ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ç°ä»£ Vue å†™ä¸€ä¸ªä¼˜é›…çš„ Todos ä»»åŠ¡æ¸…å•"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-12T03:35:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸ä¼šjs"/> <meta itemprop="url" content="https://juejin.cn/user/2517262684662348"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»åŸç”Ÿ JS åˆ° Vue3 Composition APIï¼šæ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ç°ä»£ Vue å†™ä¸€ä¸ªä¼˜é›…çš„ Todos ä»»åŠ¡æ¸…å•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2517262684662348/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸ä¼šjs
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T03:35:50.000Z" title="Fri Dec 12 2025 03:35:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»åŸç”Ÿ JS åˆ° Vue3 Composition APIï¼šæ‰‹æŠŠæ‰‹æ•™ä½ ç”¨ç°ä»£ Vue å†™ä¸€ä¸ªä¼˜é›…çš„ Todos ä»»åŠ¡æ¸…å•</h2>
<p>å¤§å®¶å¥½ï¼Œä»Šå¤©ç”¨ä¸€ä¸ªæœ€ç»å…¸çš„ Todos åº”ç”¨ï¼Œæ¥å¸¦å¤§å®¶å½»åº•ææ¸…æ¥šï¼š</p>
<blockquote>
<p>ã€Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸å†æ‰‹åŠ¨æ“ä½œ DOMï¼ŸVue åˆ°åº•æ›¿æˆ‘ä»¬åšäº†ä»€ä¹ˆï¼Ÿã€</p>
</blockquote>
<p>å¾ˆå¤šåˆå­¦è€…çœ‹å®Œ Vue æ–‡æ¡£åï¼Œä¼šè§‰å¾—ã€Œå¥½åƒå¾ˆç®€å•å•Šã€ï¼Œä½†çœŸæ­£è‡ªå·±å†™çš„æ—¶å€™ï¼Œåˆä¼šä¸è‡ªè§‰åœ°å›åˆ°åŸæ¥çš„å‘½ä»¤å¼å†™æ³•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'app'</span>).<span class="hljs-property">innerHTML</span> = xxx
</code></pre>
<p>è¿™ç¯‡æ–‡ç« å°†é€šè¿‡ä¸€ä¸ªé€æ­¥æ¼”è¿›çš„è¿‡ç¨‹ï¼Œè®©ä½ ä»ã€Œæœºæ¢°å¼ DOM æ“ä½œã€è¿›åŒ–åˆ°ã€Œæ•°æ®é©±åŠ¨ã€çš„ç°ä»£ Vue3 å¼€å‘æ€ç»´ï¼Œå½»åº•é¢†æ‚Ÿå“åº”å¼ç¼–ç¨‹çš„é­…åŠ›ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€åŸç”Ÿ JS å†™ Todosï¼šç—›å¹¶ç—›è‹¦ç€</h3>
<p>å…ˆæ¥çœ‹çœ‹ä¼ ç»Ÿå†™æ³•ï¼ˆå¾ˆå¤šäººè¿˜åœ¨è¿™ä¹ˆå†™ï¼‰ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"todo-input"</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">const</span> app = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'app'</span>);
  <span class="hljs-keyword">const</span> todoInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'todo-input'</span>);
  
  todoInput.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'change'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-keyword">const</span> todo = event.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>();
    <span class="hljs-keyword">if</span> (!todo) <span class="hljs-keyword">return</span>;
    app.<span class="hljs-property">innerHTML</span> = todo; <span class="hljs-comment">// åªèƒ½æ˜¾ç¤ºæœ€åä¸€ä¸ªï¼</span>
  })
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>è¿™ä»£ç èƒ½è·‘ï¼Œä½†é—®é¢˜ä¸€å¤§å †ï¼š</p>
<ul>
<li>åªèƒ½æ˜¾ç¤ºä¸€æ¡ä»»åŠ¡ï¼ˆinnerHTML è¢«è¦†ç›–ï¼‰</li>
<li>è¦å®ç°å¤šæ¡ä»»åŠ¡ã€åˆ é™¤ã€å®ŒæˆçŠ¶æ€â€¦â€¦éœ€è¦å†™å‡ ç™¾è¡Œ DOM æ“ä½œ</li>
<li>ä¸€æ—¦éœ€æ±‚å˜åŠ¨ï¼Œæ”¹èµ·æ¥å°±æ˜¯ç¾éš¾</li>
</ul>
<p>è¿™å°±æ˜¯å…¸å‹çš„å‘½ä»¤å¼ç¼–ç¨‹ï¼šæˆ‘ä»¬çš„å¤§è„‘ä¸€ç›´åœ¨æƒ³ã€Œæˆ‘è¦å…ˆæ‰¾åˆ°å“ªä¸ªå…ƒç´ ï¼Œç„¶åæ€ä¹ˆæ”¹å®ƒã€ã€‚</p>
<p>è€Œ Vue çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šåˆ«ç®¡ DOMï¼Œä½ åªç®¡æ•°æ®å°±è¡Œã€‚</p>
<h3 data-id="heading-2">äºŒã€Vue3 + Composition API å®Œæ•´å®ç°</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c9cb3fb611443d6862e9b49df8607aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LyaanM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115350&amp;x-signature=HU%2FyvjLxa7VqfS8uxDT4WoossC4%3D" alt="03998dfb2be956b19c909a672ec27e78.jpg" loading="lazy"/></p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- App.vue --&gt;
&lt;script setup&gt;
import { ref, computed } from 'vue'

// 1. å“åº”å¼æ•°æ®ï¼ˆé‡ç‚¹ï¼ï¼‰
const title = ref('') // è¾“å…¥æ¡†å†…å®¹
const todos = ref([
  { id: 1, title: 'åƒé¥­', done: false },
  { id: 2, title: 'ç¡è§‰', done: true }
])

// 2. è®¡ç®—å±æ€§ï¼šç»Ÿè®¡æœªå®Œæˆä»»åŠ¡æ•°é‡ï¼ˆå¸¦ç¼“å­˜ï¼ï¼‰
const active = computed(() =&gt; {
  return todos.value.filter(todo =&gt; !todo.done).length
})

// 3. æ·»åŠ ä»»åŠ¡
const addTodo = () =&gt; {
  if (!title.value.trim()) return
  
  todos.value.push({
    id: Date.now(), // æ¨èç”¨æ—¶é—´æˆ³ï¼Œæ¯” Math.random() æ›´å¯é 
    title: title.value.trim(),
    done: false
  })
  title.value = '' // æ¸…ç©ºè¾“å…¥æ¡†
}

// 4. é«˜çº§æŠ€å·§ï¼šå…¨é€‰/å…¨ä¸é€‰ï¼ˆcomputed çš„ getter + setterï¼‰
const allDone = computed({
  get() {
    if (todos.value.length === 0) return false
    return todos.value.every(todo =&gt; todo.done)
  },
  set(value) {
    todos.value.forEach(todo =&gt; {
      todo.done = value
    })
  }
})
&lt;/script&gt;

&lt;template&gt;
  &lt;div class="todos"&gt;
    &lt;h2&gt;æˆ‘çš„ä»»åŠ¡æ¸…å•&lt;/h2&gt;
    
    &lt;input 
      type="text" 
      v-model="title" 
      @keydown.enter="addTodo"
      placeholder="ä»Šå¤©è¦åšä»€ä¹ˆï¼ŸæŒ‰å›è½¦æ·»åŠ "
      class="input"
    /&gt;

    &lt;!-- ä»»åŠ¡åˆ—è¡¨ --&gt;
    &lt;ul v-if="todos.length" class="todo-list"&gt;
      &lt;li v-for="todo in todos" :key="todo.id" class="todo-item"&gt;
        &lt;input type="checkbox" v-model="todo.done"&gt;
        &lt;span :class="{ done: todo.done }"&gt;{{ todo.title }}&lt;/span&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
    
    &lt;div v-else class="empty"&gt;
      ğŸ‰ æš‚æ— ä»»åŠ¡ï¼Œä¼‘æ¯ä¸€ä¸‹å§ï½
    &lt;/div&gt;

    &lt;!-- ç»Ÿè®¡ + å…¨é€‰ --&gt;
    &lt;div class="footer"&gt;
      &lt;label&gt;
        &lt;input type="checkbox" v-model="allDone"&gt;
        å…¨é€‰
      &lt;/label&gt;
      &lt;span&gt;æœªå®Œæˆï¼š{{ active }} / æ€»æ•°ï¼š{{ todos.length }}&lt;/span&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;style scoped&gt;
.done{
  color: gray;
  text-decoration: line-through;
}
&lt;/style&gt;
</code></pre>
<h3 data-id="heading-3">ä¸‰ã€æ ¸å¿ƒçŸ¥è¯†ç‚¹æ·±åº¦æ‹†è§£ï¼ˆå»ºè®®åå¤çœ‹ï¼‰</h3>
<h4 data-id="heading-4">1. ref() æ˜¯å¦‚ä½•åšåˆ°å“åº”å¼çš„ï¼Ÿ</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> title = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)
</code></pre>
<p>è¿™å¥è¯èƒŒåå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>Vue åœ¨å†…éƒ¨ä¸º title åˆ›å»ºäº†ä¸€ä¸ªå“åº”å¼å¯¹è±¡</li>
<li>çœŸæ­£çš„æ•°æ®å­˜åœ¨ title.value ä¸­</li>
<li>å½“ä½ è¯»å– title.value æ—¶ï¼ŒVue ä¼šè®°å½•ã€Œå½“å‰ç»„ä»¶ä¾èµ–äº†è¿™ä¸ªæ•°æ®ã€</li>
<li>å½“ä½ ä¿®æ”¹ title.value æ—¶ï¼ŒVue çŸ¥é“ã€Œå“ªäº›ç»„ä»¶éœ€è¦é‡æ–°æ¸²æŸ“ã€ï¼Œè‡ªåŠ¨æ›´æ–° DOM</li>
</ul>
<p>è¿™å°±å«ã€Œä¾èµ–æ”¶é›† + è‡ªåŠ¨æ›´æ–°ã€ï¼Œä½ å®Œå…¨ä¸ç”¨ç®¡ DOMï¼</p>
<h4 data-id="heading-5">2. ä¸ºä»€ä¹ˆ computed æ¯”æ™®é€šå‡½æ•°é¦™ï¼Ÿ</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ™®é€šå‡½æ•°å†™æ³•ï¼ˆæ¯æ¬¡éƒ½ä¼šè®¡ç®—ï¼ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">activeCount</span> = (<span class="hljs-params"/>) =&gt; todos.<span class="hljs-property">value</span>.<span class="hljs-title function_">filter</span>(...).<span class="hljs-property">length</span>

<span class="hljs-comment">// computed å†™æ³•ï¼ˆåªæœ‰ä¾èµ–å˜åŒ–æ‰é‡æ–°è®¡ç®—ï¼‰</span>
<span class="hljs-keyword">const</span> active = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> todos.<span class="hljs-property">value</span>.<span class="hljs-title function_">filter</span>(...).<span class="hljs-property">length</span>)
</code></pre>
<p>æ€§èƒ½å·®å¼‚å·¨å¤§ï¼å½“ä½ æœ‰ 1000 æ¡ä»»åŠ¡æ—¶ï¼Œæ™®é€šå‡½æ•°ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“éƒ½æ‰§è¡Œ 1000 æ¬¡è¿‡æ»¤ï¼Œè€Œ computed å¯èƒ½åªæ‰§è¡Œä¸€æ¬¡ã€‚</p>
<h4 data-id="heading-6">3. computed çš„ getter + setter ç¥æŠ€ï¼ˆ90%çš„äººä¸çŸ¥é“ï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> allDone = <span class="hljs-title function_">computed</span>({
  <span class="hljs-title function_">get</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å¦‚æœtodosä¸ºç©ºï¼Œè¿”å›false</span>
    <span class="hljs-keyword">if</span> (todos.<span class="hljs-property">value</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-comment">// å¦‚æœæ‰€æœ‰todoéƒ½å®Œæˆï¼Œè¿”å›true</span>
    <span class="hljs-keyword">return</span> todos.<span class="hljs-property">value</span>.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">done</span>);
  },
  <span class="hljs-title function_">set</span>(<span class="hljs-params">value</span>) {
    <span class="hljs-comment">// è®¾ç½®æ‰€æœ‰todoçš„doneçŠ¶æ€</span>
    todos.<span class="hljs-property">value</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> {
      todo.<span class="hljs-property">done</span> = value;
    });
  }
})
</code></pre>
<p>è¿™æ‰æ˜¯çœŸæ­£çš„ã€ŒåŒå‘è®¡ç®—å±æ€§ã€ï¼ç‚¹å‡»å…¨é€‰æ¡†æ—¶ï¼Œv-model ä¼šè‡ªåŠ¨è°ƒç”¨ setterï¼ŒæŠŠæ‰€æœ‰ä»»åŠ¡çš„ done çŠ¶æ€åŒæ­¥ä¿®æ”¹ã€‚</p>
<h4 data-id="heading-7">4. v-for ä¸€å®šè¦å†™ :keyï¼ä¸ç„¶ä¼šå‡ºå¤§é—®é¢˜</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"todo in todos"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"todo.id"</span>&gt;</span>
</code></pre>
<p>ä¸å†™ key çš„åæœï¼š</p>
<ul>
<li>Vue æ— æ³•å‡†ç¡®åˆ¤æ–­å“ªæ¡æ•°æ®å˜äº†ï¼Œä¼šå¯¼è‡´æ•´å¼ åˆ—è¡¨é‡ç»˜</li>
<li>è¾“å…¥æ¡†ç„¦ç‚¹ä¸¢å¤±ã€åŠ¨ç”»é”™ä¹±ã€çŠ¶æ€é”™ä½</li>
</ul>
<p>æ¨è key ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-attr">id</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() <span class="hljs-comment">// æ›´ç¨³å¦¥</span>
<span class="hljs-comment">// æˆ–ä½¿ç”¨ uuid åº“</span>
</code></pre>
<h4 data-id="heading-8">5. v-model æœ¬è´¨æ˜¯ :value + @input çš„è¯­æ³•ç³–</h4>
<p><strong>Vue çš„åŒå‘ç»‘å®šï¼ˆv-modelï¼‰ = æ•°æ® â†’ è§†å›¾ çš„ç»‘å®š + è§†å›¾ â†’ æ•°æ®çš„ç»‘å®š</strong></p>
<p>å®ƒè®©ã€Œæ•°æ®ã€å’Œã€Œè¡¨å•å…ƒç´ çš„å€¼ã€å§‹ç»ˆä¿æŒåŒæ­¥ï¼Œä½ æ”¹æ•°æ®ï¼Œç•Œé¢è‡ªåŠ¨æ›´æ–°ï¼›ä½ æ”¹è¾“å…¥æ¡†ï¼Œæ•°æ®ä¹Ÿè‡ªåŠ¨æ›´æ–°ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"title"</span>&gt;</span>
<span class="hljs-comment">&lt;!-- ç­‰ä»·äº --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">"title"</span> @<span class="hljs-attr">input</span>=<span class="hljs-string">"title = $event.target.value"</span>&gt;</span>
</code></pre>
<p>æ‹†è§£ä¸€ä¸‹ï¼š</p>




















<table><thead><tr><th>æ–¹å‘</th><th>å¯¹åº”æŒ‡ä»¤</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>æ•°æ® â†’ è§†å›¾</td><td>:value="msg"</td><td>æŠŠ msg çš„å€¼æ¸²æŸ“åˆ° input ä¸Š</td></tr><tr><td>è§†å›¾ â†’ æ•°æ®</td><td>@input="msg = $event.target.value"</td><td>ç”¨æˆ·è¾“å…¥æ—¶ï¼ŒæŠŠå€¼é‡æ–°èµ‹å€¼ç»™ msg</td></tr></tbody></table>
<p>è€Œ @keydown.enter æ˜¯ Vue æä¾›çš„é”®ä½ä¿®é¥°ç¬¦ï¼Œè¶…çº§å¥½ç”¨ï¼š</p>
<pre><code class="hljs language-html" lang="html">@keydown.enter="addTodo"
@keydown.ctrl.enter="addTodo"
@click.prevent="submit" <span class="hljs-comment">&lt;!-- é˜»æ­¢é»˜è®¤è¡Œä¸º --&gt;</span>
</code></pre>
<h3 data-id="heading-9">å››ã€å¸¸è§å‘ä½é¿é›·æŒ‡å—ï¼ˆè¡€æ³ªç»éªŒï¼‰</h3>









































<table><thead><tr><th>åœºæ™¯</th><th>é”™è¯¯å†™æ³•</th><th>æ­£ç¡®å†™æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ·»åŠ ä»»åŠ¡åè¾“å…¥æ¡†ä¸æ¸…ç©º</td><td>æ²¡é‡ç½® title.value</td><td>title.value = ''</td><td>v-model æ˜¯åŒå‘ç»‘å®šï¼Œå¿…é¡»æ‰‹åŠ¨æ¸…ç©º</td></tr><tr><td>å…¨é€‰çŠ¶æ€ä¸åŒæ­¥</td><td>ç”¨æ™®é€šå˜é‡æ§åˆ¶</td><td>ç”¨ computed({get,set})</td><td>æ™®é€šå˜é‡æ— æ³•å“åº”æ‰€æœ‰ä»»åŠ¡çš„å˜åŒ–</td></tr><tr><td>key ä½¿ç”¨ index</td><td>:key="index"</td><td>:key="todo.id"</td><td>index ä¼šå¯¼è‡´çŠ¶æ€é”™ä¹±</td></tr><tr><td>id ä½¿ç”¨ Math.random()</td><td>id: Math.random()</td><td>id: Date.now()</td><td>å¯èƒ½é‡å¤ï¼Œå°¤å…¶å¿«é€Ÿæ·»åŠ æ—¶</td></tr><tr><td>computed å¿˜è®° .value</td><td>return todos.filter(...)</td><td>return todos.value.filter(...)</td><td>script setup ä¸­ ref è¦åŠ  .value</td></tr></tbody></table>
<h3 data-id="heading-10">äº”ã€ç»†èŠ‚çŸ¥è¯†ç‚¹</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/edefcae15024470db67fea2ef2d125dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LyaanM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115350&amp;x-signature=e%2FX0ZClpoik1j63rbgEcx04d7XI%3D" alt="fc962ce0cd306c49bc54248e80437e81.jpg" loading="lazy"/></p>
<h4 data-id="heading-11">computed æ˜¯å¦‚ä½•åšåˆ°ã€Œåˆå¿«åˆçœã€çš„ï¼Ÿ</h4>
<p>ä¸€å¥è¯ç»“è®ºï¼š<br/>
<strong>computed åªæœ‰åœ¨å®ƒçš„ã€Œä¾èµ–ã€çœŸæ­£å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šé‡æ–°è®¡ç®—ä¸€æ¬¡ï¼Œå…¶ä»–æ‰€æœ‰æ—¶é—´ç›´æ¥è¿”å›ç¼“å­˜ç»“æœã€‚</strong></p>
<p>è¿™æ‰æ˜¯å®ƒæ¯”æ™®é€šæ–¹æ³•å¿« 10ï½100 å€çš„æ ¹æœ¬åŸå› ï¼</p>
<h5 data-id="heading-12">ä¸€ã€æœ€ç›´è§‚çš„å¯¹æ¯”å®éªŒ</h5>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { ref, computed } from 'vue'

const a = ref(1)
const b = ref(10)

// åœºæ™¯1ï¼šæ™®é€šæ–¹æ³•ï¼ˆæ¯æ¬¡æ¸²æŸ“éƒ½é‡æ–°ç®—ï¼‰
const sum1 = () =&gt; {
  console.log('æ™®é€šæ–¹æ³•è¢«è°ƒç”¨äº†') 
  return a.value + b.value
}

// åœºæ™¯2ï¼šcomputedï¼ˆåªæœ‰ä¾èµ–å˜äº†æ‰ç®—ï¼‰
const sum2 = computed(() =&gt; {
  console.log('computed è¢«è°ƒç”¨äº†')
  return a.value + b.value
})
&lt;/script&gt;

&lt;template&gt;
  &lt;p&gt;æ™®é€šæ–¹æ³•ï¼š{{ sum1() }}&lt;/p&gt;
  &lt;p&gt;computedï¼š{{ sum2 }}&lt;/p&gt;
  &lt;button @click="a++"&gt;a + 1&lt;/button&gt;
  &lt;button @click="b++"&gt;b + 1&lt;/button&gt;
&lt;/template&gt;
</code></pre>
<p>ä½ ä¼šçœ‹åˆ°ï¼š</p>






























<table><thead><tr><th>æ“ä½œ</th><th>æ™®é€šæ–¹æ³•æ‰“å°å‡ æ¬¡</th><th>computed æ‰“å°å‡ æ¬¡</th></tr></thead><tbody><tr><td>é¡µé¢é¦–æ¬¡æ¸²æŸ“</td><td>1 æ¬¡</td><td>1 æ¬¡</td></tr><tr><td>ç‚¹å‡» a++</td><td>å†æ¬¡æ‰“å°</td><td>å†æ¬¡æ‰“å°</td></tr><tr><td>ç‚¹å‡» b++</td><td>å†æ¬¡æ‰“å°</td><td>å†æ¬¡æ‰“å°</td></tr><tr><td>é¡µé¢ä»»æ„åœ°æ–¹è§¦å‘æ¸²æŸ“ï¼ˆæ¯”å¦‚çˆ¶ç»„ä»¶æ›´æ–°ï¼‰</td><td>åˆæ‰“å°ï¼</td><td>ä¸æ‰“å°ï¼ï¼ˆç›´æ¥ç”¨ç¼“å­˜ï¼‰</td></tr></tbody></table>
<p>è¿™å°±æ˜¯ã€Œç¼“å­˜ã€å¸¦æ¥çš„æ€§èƒ½é£è·ƒï¼</p>
<h5 data-id="heading-13">Vue å†…éƒ¨åˆ°åº•æ˜¯æ€ä¹ˆå®ç°è¿™ä¸ªç¼“å­˜çš„ï¼Ÿï¼ˆåº•å±‚é€»è¾‘ï¼‰</h5>
<p>Vue ç”¨äº†ä¸€ä¸ªç»å…¸çš„ã€Œè„æ£€æŸ¥ + ä¾èµ–æ”¶é›†ã€æœºåˆ¶ï¼ˆVue3 ç”¨ Proxy æ›´ä¼˜é›…ï¼Œä½†åŸç†ä¸€è‡´ï¼‰ï¼š</p>

































<table><thead><tr><th>æ­¥éª¤</th><th>å‘ç”Ÿäº†ä»€ä¹ˆ</th></tr></thead><tbody><tr><td>1. åˆ›å»º computed</td><td>Vue åˆ›å»ºä¸€ä¸ªã€Œè®¡ç®—å±æ€§å¯¹è±¡ã€ï¼Œé‡Œé¢æœ‰ä¸ª valueï¼ˆç¼“å­˜å€¼ï¼‰å’Œ dirtyï¼ˆæ˜¯å¦è„ï¼‰æ ‡å¿—ã€</td></tr><tr><td>2. ç¬¬ä¸€æ¬¡è¯»å– computed</td><td>æ‰§è¡Œè®¡ç®—å‡½æ•° â†’ åŒæ—¶æ”¶é›†æ‰€æœ‰ç”¨åˆ°çš„å“åº”å¼æ•°æ®ï¼ˆaã€bã€todos.length ç­‰ï¼‰ä½œä¸ºä¾èµ–</td></tr><tr><td>3. æŠŠä¾èµ–å’Œè¿™ä¸ª computed å…³è”èµ·æ¥</td><td>a.effect.deps.push(computed)</td></tr><tr><td>4. ä¾èµ–å˜åŒ–æ—¶</td><td>Vue æŠŠè¿™ä¸ª computed çš„ dirty æ ‡å¿—è®¾ä¸º trueï¼ˆè¡¨ç¤ºç¼“å­˜å¤±æ•ˆäº†ï¼‰</td></tr><tr><td>5. ä¸‹ä¸€æ¬¡è¯»å–æ—¶</td><td>å‘ç° dirty = true â†’ é‡æ–°æ‰§è¡Œè®¡ç®—å‡½æ•° â†’ æ›´æ–°ç¼“å­˜ â†’ dirty = false</td></tr><tr><td>6. ä¹‹åå†è¯»å–</td><td>dirty = false â†’ ç›´æ¥è¿”å›ç¼“å­˜å€¼ï¼Œä¸æ‰§è¡Œå‡½æ•°</td></tr></tbody></table>
<p>å›¾è§£ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">é¦–æ¬¡è¯»å– computed
     â†“
æ‰§è¡Œè®¡ç®—å‡½æ•° â†’ ä¾èµ–æ”¶é›†ï¼ˆè®°å½•ä¾èµ–äº† a å’Œ bï¼‰
     â†“
æŠŠç»“æœç¼“å­˜èµ·æ¥ï¼Œ<span class="hljs-attr">dirty</span> = <span class="hljs-literal">false</span>

<span class="hljs-attr">a.value</span> = <span class="hljs-number">999</span>ï¼ˆä¾èµ–å˜åŒ–ï¼‰
     â†“
Vue è‡ªåŠ¨æŠŠæ‰€æœ‰ä¾èµ–äº† a çš„ computed çš„ dirty è®¾ä¸º true

ä¸‹æ¬¡è¯»å– computed
     â†“
å‘ç° <span class="hljs-attr">dirty</span> = <span class="hljs-literal">true</span> â†’ é‡æ–°è®¡ç®— â†’ æ›´æ–°ç¼“å­˜ â†’ dirty = <span class="hljs-literal">false</span>
</code></pre>
<h5 data-id="heading-14">å“ªäº›æƒ…å†µä¼šæ‰“ç ´ç¼“å­˜ï¼Ÿï¼ˆå¸¸è§å‘ï¼‰</h5>








































<table><thead><tr><th>æƒ…å†µ</th><th>æ˜¯å¦é‡æ–°è®¡ç®—</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ä¾èµ–çš„ ref/reactive å˜äº†</td><td>æ˜¯</td><td>æ­£å¸¸è§¦å‘</td></tr><tr><td>ä¾èµ–çš„æ™®é€šå˜é‡ï¼ˆlet num = 1ï¼‰</td><td>å¦</td><td>ä¸æ˜¯å“åº”å¼çš„ï¼æ°¸è¿œåªç®—ä¸€æ¬¡ï¼ˆå¤§å‘ï¼ï¼‰</td></tr><tr><td>ä¾èµ–äº† props</td><td>æ˜¯</td><td>props ä¹Ÿæ˜¯å“åº”å¼çš„</td></tr><tr><td>ä¾èµ–äº† store.stateï¼ˆPinia/Vuexï¼‰</td><td>æ˜¯</td><td>store æ˜¯å“åº”å¼çš„</td></tr><tr><td>ä¾èµ–äº† route.params</td><td>æ˜¯</td><td>$route æ˜¯å“åº”å¼çš„ï¼ˆVue Router æ³¨å…¥ï¼‰</td></tr><tr><td>ä¾èµ–äº† window.innerWidth</td><td>å¦</td><td>ä¸æ˜¯å“åº”å¼ï¼è¦é…åˆ watchEffectScope æ‰‹åŠ¨å¤„ç†</td></tr></tbody></table>
<h5 data-id="heading-15">å®æˆ˜é¿é›·æ¸…å•</h5>






























<table><thead><tr><th>é”™è¯¯å†™æ³•</th><th>æ­£ç¡®å†™æ³•</th><th>åæœ</th></tr></thead><tbody><tr><td><code>computed(() =&gt; Date.now())</code></td><td>æ”¹æˆæ™®é€šæ–¹æ³•æˆ–ç”¨ <code>ref(new Date())</code> + watch</td><td>æ¯ä¸€æ¬¡è¯»å–éƒ½é‡æ–°è®¡ç®—ï¼Œç¼“å­˜å¤±æ•ˆ</td></tr><tr><td><code>computed(() =&gt; Math.random())</code></td><td>åŒä¸Š</td><td>æ°¸è¿œä¸ç¼“å­˜ï¼Œæ€§èƒ½ç¾éš¾</td></tr><tr><td><code>computed(() =&gt; props.list.length)</code></td><td>å®Œå…¨æ­£ç¡®</td><td>æ¨èå†™æ³•</td></tr><tr><td><code>computed(() =&gt; JSON.parse(JSON.stringify(todos.value)))</code></td><td>ä¸è¦è¿™ä¹ˆåšï¼Œæ·±æ‹·è´å¤ªé‡</td><td>æµªè´¹æ€§èƒ½</td></tr></tbody></table>
<h5 data-id="heading-16">å…­ã€ä¸€å¥è¯è®°ä½</h5>
<blockquote>
<p>computed çš„é«˜æ€§èƒ½ç§˜è¯€åªæœ‰ 8 ä¸ªå­—ï¼š<br/>
<strong>ã€Œä¾èµ–ä¸å˜ï¼Œç»ä¸é‡æ–°è®¡ç®—ã€</strong></p>
</blockquote>
<p>ç°åœ¨ä½ å†ä¹Ÿä¸ç”¨æ‹…å¿ƒã€Œç”¨ computed ä¼šä¸ä¼šå½±å“æ€§èƒ½ã€äº†ï¼Œåè€Œåº”è¯¥å¤§èƒ†ç”¨ï¼<br/>
å› ä¸ºå®ƒæ¯”ä½ æ‰‹å†™ä»»ä½•ç¼“å­˜é€»è¾‘éƒ½è¦èªæ˜ã€éƒ½è¦å¿«ï¼</p>
<h3 data-id="heading-17">å…­ã€æ€»ç»“ï¼šä»ã€Œæ“ä½œ DOMã€åˆ°ã€Œæ“ä½œæ•°æ®ã€çš„æ€ç»´è·ƒè¿</h3>

























<table><thead><tr><th>ä¼ ç»Ÿ JS æ€ç»´</th><th>Vue å“åº”å¼æ€ç»´</th></tr></thead><tbody><tr><td>å…ˆæ‰¾å…ƒç´  â†’ å†æ”¹ innerHTML</td><td>åªæ”¹æ•°æ® â†’ Vue è‡ªåŠ¨æ›´æ–° DOM</td></tr><tr><td>æ‰‹åŠ¨ addEventListener</td><td>ç”¨ v-model / @event å£°æ˜å¼ç»‘å®š</td></tr><tr><td>æ‰‹åŠ¨è®¡ç®—æœªå®Œæˆæ•°é‡</td><td>ç”¨ computed è‡ªåŠ¨è®¡ç®— + ç¼“å­˜</td></tr><tr><td>å…¨é€‰è¦éå† DOM</td><td>ç”¨ computed setter ä¸€è¡Œæå®š</td></tr></tbody></table>
<p>å½“ä½ çœŸæ­£ç†è§£äº†ã€Œæ•°æ®é©±åŠ¨è§†å›¾ã€åï¼Œä½ ä¼šå‘ç°ï¼š</p>
<blockquote>
<p>å†™ Vue ä»£ç ä¸å†æ˜¯ã€Œæ€ä¹ˆæ“ä½œé¡µé¢ã€ï¼Œè€Œæ˜¯ã€Œæ•°æ®æ€ä¹ˆå˜åŒ–ã€‚</p>
</blockquote>
<p>è¿™æ‰æ˜¯ç°ä»£å‰ç«¯å¼€å‘çš„æ­£ç¡®å§¿åŠ¿ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vibe Coding æ°›å›´ç¼–ç¨‹ï¼šä»é€è¡Œä»£ç åˆ°ç”¨AIåä½œçš„ç¼–ç¨‹å®ç°]]></title>    <link>https://juejin.cn/post/7570902804450099210</link>    <guid>https://juejin.cn/post/7570902804450099210</guid>    <pubDate>2025-11-10T08:08:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570902804450099210" data-draft-id="7570564840429142043" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vibe Coding æ°›å›´ç¼–ç¨‹ï¼šä»é€è¡Œä»£ç åˆ°ç”¨AIåä½œçš„ç¼–ç¨‹å®ç°"/> <meta itemprop="keywords" content="VibeCoding,Trae"/> <meta itemprop="datePublished" content="2025-11-10T08:08:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é—²äº‘ing"/> <meta itemprop="url" content="https://juejin.cn/user/2974655942502250"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vibe Coding æ°›å›´ç¼–ç¨‹ï¼šä»é€è¡Œä»£ç åˆ°ç”¨AIåä½œçš„ç¼–ç¨‹å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2974655942502250/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é—²äº‘ing
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T08:08:33.000Z" title="Mon Nov 10 2025 08:08:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Vibe Coding æ°›å›´ç¼–ç¨‹ï¼šä»é€è¡Œä»£ç åˆ°ç”¨AIåä½œçš„ç¼–ç¨‹å®ç°</h2>
<h3 data-id="heading-1">ä»€ä¹ˆæ˜¯Vibe Codingï¼Ÿ</h3>
<p>åœ¨ä¼ ç»Ÿçš„ç¼–ç¨‹æ¨¡å¼ä¸­ï¼Œå¼€å‘è€…éœ€è¦é€è¡Œç¼–å†™ç²¾ç¡®çš„ä»£ç ï¼Œå…³æ³¨æ¯ä¸€ä¸ªè¯­æ³•ç»†èŠ‚å’Œé€»è¾‘æµç¨‹ã€‚è€ŒVibe Codingï¼ˆæ°›å›´ç¼–ç¨‹ï¼‰åˆ™ä»£è¡¨äº†ä¸€ç§å…¨æ–°çš„ç¼–ç¨‹èŒƒå¼â€”â€”å¼€å‘è€…ä¸å†éœ€è¦çº ç»“äºå…·ä½“çš„ä»£ç å®ç°ï¼Œè€Œæ˜¯å‘AIæè¿°æƒ³è¦å®ç°çš„"æ°›å›´"æˆ–"æ„Ÿè§‰"ï¼Œç”±AIæ¥ç†è§£æ¨¡ç³Šæ„å›¾å¹¶å°†å…¶è½¬åŒ–ä¸ºå…·ä½“çš„ä»£ç å®ç°ã€‚</p>
<p><strong>ç®€å•æ¥è¯´ï¼ŒVibe Codingå°±æ˜¯ï¼š</strong></p>
<ul>
<li>ç”¨è‡ªç„¶è¯­è¨€æè¿°éœ€æ±‚ï¼ŒAIç›´æ¥å¼€å¹²</li>
<li>å…³æ³¨æ•´ä½“æ•ˆæœå’Œç”¨æˆ·ä½“éªŒï¼Œè€Œéä»£ç ç»†èŠ‚</li>
<li>åœ¨èˆ’é€‚çš„ç¼–ç¨‹æ°›å›´ä¸­ï¼Œè®©AIæˆä¸ºä½ çš„ç¼–ç¨‹ä¼™ä¼´</li>
</ul>
<h3 data-id="heading-2">Vibe Coding çš„å®é™…åº”ç”¨åœºæ™¯</h3>
<h4 data-id="heading-3">1. è®¾è®¡å¯¼å‘å¼€å‘</h4>
<pre><code class="hljs language-prompt" lang="prompt">"è¯·å¸®æˆ‘æŠŠé¡µé¢è®¾è®¡å¾—ç§‘æŠ€æ„Ÿå¤šä¸€äº›"
</code></pre>
<p>AIä¼šç†è§£"ç§‘æŠ€æ„Ÿ"è¿™ä¸ªæ°›å›´æ¦‚å¿µï¼Œè‡ªåŠ¨é‡‡ç”¨æ·±è‰²ä¸»é¢˜ã€éœ“è™¹è‰²å½©ã€æœªæ¥ä¸»ä¹‰å­—ä½“ç­‰è®¾è®¡å…ƒç´ ï¼Œè€Œæ— éœ€ä½ æ‰‹åŠ¨è°ƒæ•´æ¯ä¸ªCSSå±æ€§ã€‚</p>
<h4 data-id="heading-4">2. æ™ºèƒ½Bugä¿®å¤</h4>
<pre><code class="hljs language-prompt" lang="prompt">"å¤åˆ¶ç²˜è´´ä»£ç ä¸­çš„bugï¼Œè®©AIä¿®å¤"
</code></pre>
<p>æ— éœ€ç²¾ç¡®æè¿°bugä½ç½®å’ŒåŸå› ï¼ŒAIèƒ½å¤Ÿç†è§£ä»£ç ä¸Šä¸‹æ–‡ï¼Œè‡ªåŠ¨è¯†åˆ«å¹¶ä¿®å¤é—®é¢˜ï¼Œåˆ›é€ èˆ’é€‚çš„debugæ°›å›´ã€‚</p>
<h4 data-id="heading-5">3. åŠŸèƒ½å¿«é€Ÿè¿­ä»£</h4>
<pre><code class="hljs language-prompt" lang="prompt">"ä¸ºè¿™ä¸ªç”µå•†é¡µé¢æ·»åŠ è´­ç‰©è½¦åŠ¨ç”»æ•ˆæœ"
</code></pre>
<p>AIä¼šæ ¹æ®ç°æœ‰ä»£ç é£æ ¼ï¼Œæ— ç¼é›†æˆæµç•…çš„åŠ¨ç”»äº¤äº’ï¼Œä¿æŒä»£ç ä¸€è‡´æ€§ã€‚</p>
<h3 data-id="heading-6">ç°ä»£åŒ–AIç¼–ç¨‹å·¥å…·</h3>
<h4 data-id="heading-7">Trae - æ²‰æµ¸å¼AIç¼–ç¨‹ç¯å¢ƒ</h4>
<p>Traeä¸ä»…ä»…æ˜¯ä¸€ä¸ªä»£ç ç¼–è¾‘å™¨ï¼Œæ›´æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¼–ç¨‹Agentã€‚å®ƒçš„æ ¸å¿ƒç‰¹è‰²åŒ…æ‹¬ï¼š</p>
<p><strong>è¶…è¶ŠæŒ‡ä»¤çš„è§„åˆ™</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">.trae/
<span class="hljs-bullet"> -</span> rules/
<span class="hljs-bullet">   -</span> project<span class="hljs-emphasis">_rules.md
</span></code></pre>
<p>é€šè¿‡é¡¹ç›®è§„åˆ™æ–‡ä»¶ï¼ŒTraeèƒ½å¤Ÿç†è§£ä½ çš„ç¼–ç é£æ ¼ã€æŠ€æœ¯æ ˆåå¥½å’Œé¡¹ç›®è§„èŒƒï¼Œå®ç°çœŸæ­£ä¸ªæ€§åŒ–çš„ç¼–ç¨‹ä½“éªŒã€‚</p>
<h4 data-id="heading-8">Cursor &amp; Claude Code</h4>
<p>è¿™äº›AIä¼˜å…ˆçš„ç¼–è¾‘å™¨é€šè¿‡æ·±åº¦é›†æˆå¤§å‹è¯­è¨€æ¨¡å‹ï¼Œè®©ä»£ç è¡¥å…¨ã€é‡æ„å’Œè°ƒè¯•å˜å¾—æ›´åŠ æ™ºèƒ½å’Œè‡ªç„¶ã€‚</p>
<h3 data-id="heading-9">å®æˆ˜æ¼”ç¤ºï¼šåˆ›å»º"Hello Trae"é¡µé¢</h3>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„Vibe Codingç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•é€šè¿‡è‡ªç„¶è¯­è¨€æŒ‡ä»¤åˆ›å»ºç°ä»£åŒ–ç½‘é¡µï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Hello Trae AI ç¼–ç¨‹<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        * {
            <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">box-sizing</span>: border-box;
        }
        
        <span class="hljs-selector-tag">body</span> {
            <span class="hljs-attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="hljs-string">'Segoe UI'</span>, <span class="hljs-string">'Roboto'</span>, <span class="hljs-string">'Oxygen'</span>,
                <span class="hljs-string">'Ubuntu'</span>, <span class="hljs-string">'Cantarell'</span>, <span class="hljs-string">'Fira Sans'</span>, <span class="hljs-string">'Droid Sans'</span>, <span class="hljs-string">'Helvetica Neue'</span>,
                sans-serif;
            -webkit-<span class="hljs-attribute">font-smoothing</span>: antialiased;
            -moz-osx-<span class="hljs-attribute">font-smoothing</span>: grayscale;
            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">135deg</span>, <span class="hljs-number">#667eea</span> <span class="hljs-number">0%</span>, <span class="hljs-number">#764ba2</span> <span class="hljs-number">100%</span>);
            <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100vh</span>;
            <span class="hljs-attribute">display</span>: flex;
            <span class="hljs-attribute">flex-direction</span>: column;
            <span class="hljs-attribute">justify-content</span>: center;
            <span class="hljs-attribute">align-items</span>: center;
            <span class="hljs-attribute">color</span>: white;
            <span class="hljs-attribute">text-align</span>: center;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
        }
        
        <span class="hljs-selector-class">.container</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.1</span>);
            backdrop-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">blur</span>(<span class="hljs-number">10px</span>);
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">20px</span>;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">40px</span>;
            <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">8px</span> <span class="hljs-number">32px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
            <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.2</span>);
            <span class="hljs-attribute">max-width</span>: <span class="hljs-number">500px</span>;
            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
            <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.3s</span> ease, box-shadow <span class="hljs-number">0.3s</span> ease;
        }
        
        <span class="hljs-selector-class">.container</span><span class="hljs-selector-pseudo">:hover</span> {
            <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">5px</span>);
            <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">12px</span> <span class="hljs-number">40px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.2</span>);
        }
        
        <span class="hljs-selector-tag">h1</span> {
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">3rem</span>;
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
            <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">700</span>;
            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">90deg</span>, <span class="hljs-number">#fff</span>, <span class="hljs-number">#f0f0f0</span>);
            -webkit-<span class="hljs-attribute">background-clip</span>: text;
            <span class="hljs-attribute">background-clip</span>: text;
            <span class="hljs-attribute">color</span>: transparent;
            <span class="hljs-attribute">animation</span>: pulse <span class="hljs-number">2s</span> infinite;
        }
        
        <span class="hljs-selector-tag">p</span> {
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.2rem</span>;
            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">30px</span>;
            <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.9</span>;
        }
        
        <span class="hljs-selector-class">.btn</span> {
            <span class="hljs-attribute">display</span>: inline-block;
            <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span> <span class="hljs-number">24px</span>;
            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.2</span>);
            <span class="hljs-attribute">color</span>: white;
            <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.3</span>);
            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">30px</span>;
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1rem</span>;
            <span class="hljs-attribute">cursor</span>: pointer;
            <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span> ease;
            <span class="hljs-attribute">text-decoration</span>: none;
            backdrop-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">blur</span>(<span class="hljs-number">5px</span>);
        }
        
        <span class="hljs-selector-class">.btn</span><span class="hljs-selector-pseudo">:hover</span> {
            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.3</span>);
            <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1.05</span>);
        }
        
        <span class="hljs-selector-class">.btn</span><span class="hljs-selector-pseudo">:active</span> {
            <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">0.98</span>);
        }
        
        <span class="hljs-keyword">@keyframes</span> pulse {
            <span class="hljs-number">0%</span> {
                <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1</span>);
            }
            <span class="hljs-number">50%</span> {
                <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1.05</span>);
            }
            <span class="hljs-number">100%</span> {
                <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1</span>);
            }
        }
        
        <span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">768px</span>) {
            <span class="hljs-selector-tag">h1</span> {
                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2.5rem</span>;
            }
            
            <span class="hljs-selector-class">.container</span> {
                <span class="hljs-attribute">padding</span>: <span class="hljs-number">30px</span> <span class="hljs-number">20px</span>;
            }
        }
        
        <span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">480px</span>) {
            <span class="hljs-selector-tag">h1</span> {
                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2rem</span>;
            }
            
            <span class="hljs-selector-tag">p</span> {
                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1rem</span>;
            }
            
            <span class="hljs-selector-class">.container</span> {
                <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span> <span class="hljs-number">15px</span>;
            }
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"title"</span>&gt;</span>Hello Trae AI ç¼–ç¨‹<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ¬¢è¿ä½¿ç”¨ Trae AI ç¼–ç¨‹åŠ©æ‰‹ï¼Œè®©æˆ‘ä»¬ä¸€èµ·åˆ›é€ ç²¾å½©çš„ä»£ç ä¸–ç•Œï¼<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"greetBtn"</span>&gt;</span>ç‚¹å‡»é—®å€™<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-comment">// è·å–DOMå…ƒç´ </span>
        <span class="hljs-keyword">const</span> title = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'title'</span>);
        <span class="hljs-keyword">const</span> greetBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'greetBtn'</span>);
        
        <span class="hljs-comment">// ç‚¹å‡»æŒ‰é’®æ—¶æ·»åŠ åŠ¨ç”»æ•ˆæœ</span>
        greetBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
            title.<span class="hljs-property">style</span>.<span class="hljs-property">animation</span> = <span class="hljs-string">'none'</span>;
            <span class="hljs-keyword">void</span> title.<span class="hljs-property">offsetWidth</span>; <span class="hljs-comment">// è§¦å‘é‡æ’</span>
            title.<span class="hljs-property">style</span>.<span class="hljs-property">animation</span> = <span class="hljs-string">'pulse 0.5s ease'</span>;
            
            <span class="hljs-comment">// æ·»åŠ æ‰“å­—æœºæ•ˆæœ</span>
            <span class="hljs-keyword">const</span> text = <span class="hljs-string">'Hello Trae AI ç¼–ç¨‹'</span>;
            <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>;
            title.<span class="hljs-property">textContent</span> = <span class="hljs-string">''</span>;
            
            <span class="hljs-keyword">const</span> <span class="hljs-title function_">typeWriter</span> = (<span class="hljs-params"/>) =&gt; {
                <span class="hljs-keyword">if</span> (index &lt; text.<span class="hljs-property">length</span>) {
                    title.<span class="hljs-property">textContent</span> += text.<span class="hljs-title function_">charAt</span>(index);
                    index++;
                    <span class="hljs-built_in">setTimeout</span>(typeWriter, <span class="hljs-number">100</span>);
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-comment">// æ¢å¤åŸæ¥çš„åŠ¨ç”»</span>
                    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
                        title.<span class="hljs-property">style</span>.<span class="hljs-property">animation</span> = <span class="hljs-string">'pulse 2s infinite'</span>;
                    }, <span class="hljs-number">500</span>);
                }
            };
            
            <span class="hljs-title function_">typeWriter</span>();
        });
        
        <span class="hljs-comment">// é¡µé¢åŠ è½½æ—¶çš„æ·¡å…¥æ•ˆæœ</span>
        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =&gt;</span> {
            <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">style</span>.<span class="hljs-property">opacity</span> = <span class="hljs-string">'0'</span>;
            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
                <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">style</span>.<span class="hljs-property">transition</span> = <span class="hljs-string">'opacity 1s ease'</span>;
                <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">style</span>.<span class="hljs-property">opacity</span> = <span class="hljs-string">'1'</span>;
            }, <span class="hljs-number">100</span>);
        });
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>è¿™æ®µä»£ç å®ç°äº†ä¸€ä¸ªç°ä»£é£æ ¼çš„æ¬¢è¿é¡µé¢ï¼Œæ ¸å¿ƒç‰¹ç‚¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>è§†è§‰è®¾è®¡ï¼šé‡‡ç”¨è“ç´«æ¸å˜èƒŒæ™¯ + æ¯›ç»ç’ƒå¡ç‰‡ï¼Œæ ‡é¢˜ä½¿ç”¨æ¸å˜æ–‡å­—å’Œå‘¼å¸è„‰åŠ¨åŠ¨ç”»ï¼Œæ•´ä½“ç¾è§‚ä¸”å¯Œæœ‰ç§‘æŠ€æ„Ÿã€‚</li>
<li>äº¤äº’åŠŸèƒ½ï¼šç‚¹å‡»æŒ‰é’®è§¦å‘åŠ¨æ€æ‰“å­—æœºæ•ˆæœï¼Œé€å­—é‡å†™æ ‡é¢˜ï¼Œå¹¶ä¼´æœ‰æµç•…çš„ç¼©æ”¾åé¦ˆã€‚</li>
<li>å“åº”å¼å¸ƒå±€ï¼šé€‚é…æ‰‹æœºã€å¹³æ¿å’Œæ¡Œé¢è®¾å¤‡ï¼Œç¡®ä¿åœ¨ä¸åŒå±å¹•å°ºå¯¸ä¸‹è‰¯å¥½æ˜¾ç¤ºã€‚</li>
<li>æŠ€æœ¯äº®ç‚¹ï¼šçº¯ HTML/CSS/JS å®ç°ï¼Œåˆ©ç”¨ backdrop-filterã€CSS åŠ¨ç”»ã€transform ç­‰ç°ä»£ç‰¹æ€§ï¼Œå…¼é¡¾æ€§èƒ½ä¸ç”¨æˆ·ä½“éªŒã€‚</li>
</ul>
<h3 data-id="heading-10">æœ€ä½³å¼€å‘å®è·µ</h3>
<h4 data-id="heading-11">å®æ—¶é¢„è§ˆä¸çƒ­æ›´æ–°</h4>
<p>ä¸ºäº†è·å¾—æœ€ä½³çš„Vibe Codingä½“éªŒï¼Œæ¨èä½¿ç”¨live-serverè¿›è¡Œå®æ—¶é¢„è§ˆï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npx --<span class="hljs-built_in">yes</span> live-server --port=3000 --host=localhost --no-browser filename.html
</code></pre>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>æ— éœ€å®‰è£…ä¾èµ–ï¼Œå¼€ç®±å³ç”¨</li>
<li>æ”¯æŒçƒ­æ›´æ–°ï¼Œä»£ç ä¿å­˜ç«‹å³ç”Ÿæ•ˆ</li>
<li>é…åˆTraeç¼–è¾‘å™¨å†…ç½®é¢„è§ˆï¼Œæ— éœ€åˆ‡æ¢çª—å£</li>
<li>å®Œå…¨è‡ªåŠ¨åŒ–ï¼Œé›¶é…ç½®</li>
</ul>
<h4 data-id="heading-12">Vibe Coding å·¥ä½œæµç¨‹</h4>
<ol>
<li><strong>éœ€æ±‚æè¿°</strong>ï¼šç”¨è‡ªç„¶è¯­è¨€æ¸…æ™°æè¿°æƒ³è¦å®ç°çš„æ•ˆæœ</li>
<li><strong>AIç”Ÿæˆ</strong>ï¼šAIæ ¹æ®æè¿°ç”Ÿæˆåˆæ­¥ä»£ç å®ç°</li>
<li><strong>æ°›å›´è°ƒæ•´</strong>ï¼šé€šè¿‡"æ„Ÿè§‰ä¸å¯¹ï¼Œå†ç§‘æŠ€æ„Ÿä¸€ç‚¹"ç­‰æŒ‡ä»¤å¾®è°ƒ</li>
<li><strong>å®æ—¶é¢„è§ˆ</strong>ï¼šé€šè¿‡live-serverå³æ—¶æŸ¥çœ‹æ•ˆæœ</li>
<li><strong>è¿­ä»£ä¼˜åŒ–</strong>ï¼šåŸºäºé¢„è§ˆç»“æœç»§ç»­è°ƒæ•´æè¿°ï¼Œç›´åˆ°æ»¡æ„</li>
</ol>
<h3 data-id="heading-13">æŠ€æœ¯ä¼˜åŠ¿</h3>
<p>Vibe Codingä¸ä»…ä»…æ”¹å˜äº†ç¼–ç¨‹æ–¹å¼ï¼Œæ›´é‡æ–°å®šä¹‰äº†å¼€å‘è€…ä¸è®¡ç®—æœºçš„äº¤äº’æ¨¡å¼ï¼š</p>
<p><strong>æŠ€æœ¯ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>é™ä½ç¼–ç¨‹é—¨æ§›ï¼Œè®©æ›´å¤šäººèƒ½å¤Ÿå‚ä¸åˆ›é€ </li>
<li>å¤§å¹…æå‡å¼€å‘æ•ˆç‡ï¼Œä¸“æ³¨ä¸šåŠ¡é€»è¾‘è€Œéå®ç°ç»†èŠ‚</li>
<li>ä¿ƒè¿›è®¾è®¡æ€ç»´ï¼Œä»ç”¨æˆ·ä½“éªŒå‡ºå‘è¿›è¡Œå¼€å‘</li>
<li>ä»£ç è´¨é‡æ›´é«˜ï¼ŒAIèƒ½å¤Ÿéµå¾ªæœ€ä½³å®è·µ</li>
</ul>
<h3 data-id="heading-14">ç»“è¯­</h3>
<p>Vibe Codingæ°›å›´ç¼–ç¨‹ä¸ä»…ä»…æ˜¯æŠ€æœ¯çš„è¿›æ­¥ï¼Œæ›´æ˜¯å¼€å‘ç†å¿µçš„é©æ–°ã€‚å®ƒè®©æˆ‘ä»¬ä»ç¹ççš„å®ç°ç»†èŠ‚ä¸­è§£æ”¾å‡ºæ¥ï¼Œä¸“æ³¨äºåˆ›é€ çš„ä»·å€¼å’Œç”¨æˆ·çš„ä½“éªŒã€‚åœ¨è¿™ä¸ªAIè¾…åŠ©å¼€å‘çš„æ–°æ—¶ä»£ï¼Œåˆ›é€ åŠ›å°†æˆä¸ºå¼€å‘è€…æœ€å®è´µçš„èµ„äº§ã€‚</p>
<p>æ­£å¦‚æˆ‘ä»¬åœ¨è¿™ä¸ªç®€å•çš„"Hello Trae AI ç¼–ç¨‹"é¡µé¢ä¸­çœ‹åˆ°çš„ï¼Œé€šè¿‡æè¿°æƒ³è¦çš„æ•ˆæœå’Œæ„Ÿè§‰ï¼ŒAIèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å®ç°æ—¢ç¾è§‚åˆåŠŸèƒ½å®Œæ•´çš„åº”ç”¨ç¨‹åºã€‚è¿™åªæ˜¯ä¸€ä¸ªå¼€å§‹ï¼ŒVibe Codingçš„æ½œåŠ›è¿˜æœ‰å¾…æˆ‘ä»¬å…±åŒæ¢ç´¢å’Œå‘æ˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»åŸç†åˆ°å®æˆ˜ï¼šJWTè®¤è¯æ·±åº¦å‰–æä¸æ¶æ„æ€è€ƒï¼ˆäºŒï¼‰â€”â€”æ•°æ®é€æ˜ vs æ— æ³•æ’¤é”€]]></title>    <link>https://juejin.cn/post/7582475416190648355</link>    <guid>https://juejin.cn/post/7582475416190648355</guid>    <pubDate>2025-12-12T03:33:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582475416190648355" data-draft-id="7582358932028030991" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»åŸç†åˆ°å®æˆ˜ï¼šJWTè®¤è¯æ·±åº¦å‰–æä¸æ¶æ„æ€è€ƒï¼ˆäºŒï¼‰â€”â€”æ•°æ®é€æ˜ vs æ— æ³•æ’¤é”€"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-12T03:33:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘è€ƒæ‹‰"/> <meta itemprop="url" content="https://juejin.cn/user/4073055973808104"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»åŸç†åˆ°å®æˆ˜ï¼šJWTè®¤è¯æ·±åº¦å‰–æä¸æ¶æ„æ€è€ƒï¼ˆäºŒï¼‰â€”â€”æ•°æ®é€æ˜ vs æ— æ³•æ’¤é”€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4073055973808104/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘è€ƒæ‹‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T03:33:15.000Z" title="Fri Dec 12 2025 03:33:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å½“æˆ‘åœ¨Javaåç«¯é¡¹ç›®ä¸­æ·±å…¥ä½¿ç”¨JWTæ—¶ï¼Œæ·±åˆ»ä½“ä¼šåˆ°å®ƒçš„â€œè‡ªåŒ…å«æ€§â€æ˜¯ä¸€æŠŠ<strong>é”‹åˆ©çš„åŒåˆƒå‰‘</strong>ã€‚è¿™ä¸ªç‰¹æ€§è®©JWTåœ¨å¾®æœåŠ¡æ¶æ„ä¸­å¤§æ”¾å¼‚å½©ï¼ŒåŒæ—¶ä¹Ÿå¸¦æ¥äº†éš¾ä»¥æ ¹æ²»çš„å®‰å…¨éšæ‚£ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯â€œè‡ªåŒ…å«æ€§â€ï¼Ÿ</h2>
<p><strong>è‡ªåŒ…å«æ€§</strong>æŒ‡çš„æ˜¯ï¼šJWT Tokenè‡ªèº«æºå¸¦äº†æ‰€æœ‰å¿…è¦çš„è®¤è¯å’Œæˆæƒä¿¡æ¯ï¼ŒæœåŠ¡ç«¯æ— éœ€æŸ¥è¯¢å¤–éƒ¨å­˜å‚¨å³å¯å®ŒæˆéªŒè¯ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼ ç»ŸSessionæ–¹æ¡ˆï¼šéœ€è¦æŸ¥åº“</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SessionAuthService</span> {
    
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">authenticateSession</span><span class="hljs-params">(String sessionId)</span> {
        <span class="hljs-comment">// 1. æŸ¥Redis/æ•°æ®åº“è·å–sessionæ•°æ®</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">sessionJson</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue()
            .get(<span class="hljs-string">"session:"</span> + sessionId);
        <span class="hljs-keyword">if</span> (sessionJson == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AuthenticationException</span>(<span class="hljs-string">"Session not found"</span>);
        }
        
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> objectMapper.readValue(sessionJson, Session.class);
        
        <span class="hljs-comment">// 2. è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆéœ€è¦é¢å¤–æ•°æ®åº“æŸ¥è¯¢ï¼‰</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userRepository.findById(session.getUserId())
            .orElseThrow(() -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserNotFoundException</span>());
        
        <span class="hljs-keyword">return</span> user;
    }
}

<span class="hljs-comment">// JWTæ–¹æ¡ˆï¼šè‡ªåŒ…å«ï¼Œæ— éœ€æŸ¥åº“</span>
<span class="hljs-meta">@Service</span>  
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JwtAuthService</span> {

    <span class="hljs-keyword">public</span> Claims <span class="hljs-title function_">authenticateJWT</span><span class="hljs-params">(String token)</span> {
        <span class="hljs-comment">// åªéœ€ä¸€æ¬¡CPUè®¡ç®—ï¼Œæ— éœ€I/O</span>
        <span class="hljs-keyword">return</span> Jwts.parserBuilder()
            .setSigningKey(jwtSecret)
            .build()
            .parseClaimsJws(token)
            .getBody();
        <span class="hljs-comment">// Claimså·²ç»åŒ…å«ï¼š{sub=user123, name=å¼ ä¸‰, roles=[admin]}</span>
    }
    
    <span class="hljs-comment">// ç›´æ¥ä»Tokenè·å–ç”¨æˆ·ä¿¡æ¯</span>
    <span class="hljs-keyword">public</span> UserInfo <span class="hljs-title function_">extractUserInfo</span><span class="hljs-params">(String token)</span> {
        <span class="hljs-type">Claims</span> <span class="hljs-variable">claims</span> <span class="hljs-operator">=</span> authenticateJWT(token);
        <span class="hljs-keyword">return</span> UserInfo.builder()
            .userId(claims.getSubject())
            .username(claims.get(<span class="hljs-string">"name"</span>, String.class))
            .roles(claims.get(<span class="hljs-string">"roles"</span>, List.class))
            .build();
    }
}
</code></pre>
<h2 data-id="heading-1">äºŒã€è‡ªåŒ…å«æ€§çš„ä¸¤å¤§ä¼˜åŠ¿</h2>
<h3 data-id="heading-2">1. <strong>æ€§èƒ½æè‡´ï¼šé›¶æ•°æ®åº“æŸ¥è¯¢</strong></h3>
<p>è¿™æ˜¯è‡ªåŒ…å«æ€§æœ€å¸å¼•Javaåç«¯å¼€å‘è€…çš„åœ°æ–¹ã€‚çœ‹ä¸€ä¸ªçœŸå®çš„æ€§èƒ½å¯¹æ¯”ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å‡è®¾ä¸€ä¸ªç”µå•†ç³»ç»Ÿï¼Œæ¯ç§’1000æ¬¡ç”¨æˆ·è¯·æ±‚</span>
<span class="hljs-type">int</span> <span class="hljs-variable">REQUESTS_PER_SECOND</span> <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>;

<span class="hljs-comment">// Sessionæ–¹æ¡ˆï¼šæ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦æŸ¥è¯¢</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SessionController</span> {
    <span class="hljs-meta">@GetMapping("/api/user/profile")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;?&gt; getUserProfile(HttpSession session) {
        <span class="hljs-comment">// æ¯æ¬¡éƒ½è¦æŸ¥æ•°æ®åº“</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userService.findById(session.getAttribute(<span class="hljs-string">"userId"</span>));
        <span class="hljs-keyword">return</span> ResponseEntity.ok(user);
        <span class="hljs-comment">// 1000 QPS = 1000æ¬¡æ•°æ®åº“æŸ¥è¯¢</span>
    }
}

<span class="hljs-comment">// JWTæ–¹æ¡ˆï¼šé›¶æ•°æ®åº“æŸ¥è¯¢</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JwtController</span> {
    <span class="hljs-meta">@GetMapping("/api/user/profile")</span> 
    <span class="hljs-keyword">public</span> ResponseEntity&lt;?&gt; getUserProfile(<span class="hljs-meta">@RequestHeader("Authorization")</span> String token) {
        <span class="hljs-comment">// ç›´æ¥è§£æTokenï¼Œæ— éœ€æ•°æ®åº“</span>
        <span class="hljs-type">Claims</span> <span class="hljs-variable">claims</span> <span class="hljs-operator">=</span> jwtService.parseToken(token);
        <span class="hljs-type">UserInfo</span> <span class="hljs-variable">userInfo</span> <span class="hljs-operator">=</span> UserInfo.fromClaims(claims);
        <span class="hljs-keyword">return</span> ResponseEntity.ok(userInfo);
        <span class="hljs-comment">// 1000 QPS = 0æ¬¡æ•°æ®åº“æŸ¥è¯¢ï¼Œ1000æ¬¡CPUè®¡ç®—</span>
    }
}
</code></pre>
<p>åœ¨å®é™…å‹æµ‹ä¸­ï¼Œæˆ‘æ›¾å°†APIå“åº”æ—¶é—´ä»<strong>å¹³å‡18msé™åˆ°5ms</strong>ï¼Œé‚£13msçš„å·®è·å°±æ˜¯ä¸€æ¬¡æ•°æ®åº“æŸ¥è¯¢çš„ç½‘ç»œå¾€è¿”+æŸ¥è¯¢æ—¶é—´ã€‚</p>
<h3 data-id="heading-3">2. <strong>æ°´å¹³æ‰©å±•çš„å¤©ç„¶ä¼˜åŠ¿</strong></h3>
<p>åœ¨Spring Cloudå¾®æœåŠ¡æ¶æ„ä¸­ï¼Œè‡ªåŒ…å«æ€§å±•ç°äº†çœŸæ­£çš„å¨åŠ›ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç”¨æˆ·æœåŠ¡</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceController</span> {
    <span class="hljs-meta">@PostMapping("/api/users/update")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;?&gt; updateUser(
            <span class="hljs-meta">@RequestHeader("Authorization")</span> String token,
            <span class="hljs-meta">@RequestBody</span> UserUpdateRequest request) {
        <span class="hljs-comment">// è‡ªå·±éªŒè¯Tokenï¼Œä¸ä¾èµ–å…¶ä»–æœåŠ¡</span>
        <span class="hljs-type">Claims</span> <span class="hljs-variable">claims</span> <span class="hljs-operator">=</span> jwtUtil.parseToken(token);
        <span class="hljs-type">String</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> claims.getSubject();
        
        <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘...</span>
        <span class="hljs-keyword">return</span> ResponseEntity.ok().build();
    }
}

<span class="hljs-comment">// è®¢å•æœåŠ¡ - åŒæ ·ç‹¬ç«‹éªŒè¯</span>
<span class="hljs-meta">@RestController</span>  
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderServiceController</span> {
    <span class="hljs-meta">@PostMapping("/api/orders/create")</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;?&gt; createOrder(
            <span class="hljs-meta">@RequestHeader("Authorization")</span> String token,
            <span class="hljs-meta">@RequestBody</span> OrderRequest request) {
        <span class="hljs-comment">// ä¹Ÿè‡ªå·±éªŒè¯Token</span>
        <span class="hljs-type">Claims</span> <span class="hljs-variable">claims</span> <span class="hljs-operator">=</span> jwtUtil.parseToken(token);
        <span class="hljs-type">String</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> claims.getSubject();
        List&lt;String&gt; roles = claims.get(<span class="hljs-string">"roles"</span>, List.class);
        
        <span class="hljs-comment">// æ£€æŸ¥æƒé™</span>
        <span class="hljs-keyword">if</span> (!roles.contains(<span class="hljs-string">"USER"</span>)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnauthorizedException</span>();
        }
        
        <span class="hljs-keyword">return</span> orderService.createOrder(userId, request);
    }
}
</code></pre>
<p>æ¯ä¸ªå¾®æœåŠ¡éƒ½å¯ä»¥ç‹¬ç«‹éªŒè¯Tokenï¼Œæ— éœ€ä¾èµ–ä¸­å¿ƒçš„Sessionå­˜å‚¨æˆ–UseræœåŠ¡ã€‚</p>
<h2 data-id="heading-4">ä¸‰ã€è‡ªåŒ…å«æ€§çš„ä¸‰å¤§ç—›ç‚¹</h2>
<p>ç„¶è€Œï¼Œè‡ªåŒ…å«æ€§çš„ä¼˜ç‚¹æ­£æ˜¯å®ƒçš„ç¼ºç‚¹æºå¤´ã€‚</p>
<h3 data-id="heading-5">1. <strong>æ— æ³•ç«‹å³æ’¤é”€ï¼šæœ€è‡´å‘½çš„ç¼ºé™·</strong></h3>
<p>è¿™æ˜¯æˆ‘è¸©è¿‡çš„æœ€å¤§çš„å‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åœºæ™¯ï¼šå‘˜å·¥å¼ ä¸‰è¢«å¼€é™¤ï¼Œéœ€è¦ç«‹å³å–æ¶ˆç³»ç»Ÿè®¿é—®æƒé™</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserManagementService</span> {
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">revokeUserAccess</span><span class="hljs-params">(String userId)</span> {
        <span class="hljs-comment">// 1. æ›´æ–°æ•°æ®åº“çŠ¶æ€</span>
        userRepository.updateStatus(userId, UserStatus.TERMINATED);
        
        <span class="hljs-comment">// 2. è®°å½•å®‰å…¨å®¡è®¡</span>
        auditService.logSecurityEvent(
            SecurityEvent.USER_REVOKED, 
            userId, 
            getCurrentAdminId()
        );
        
        <span class="hljs-comment">// ä½†æ˜¯ï¼å¼ ä¸‰ä¹‹å‰è·å–çš„Tokenè¿˜æœ‰3å¤©æ‰è¿‡æœŸ</span>
        <span class="hljs-comment">// ä»–ä»ç„¶å¯ä»¥è®¿é—®ç³»ç»Ÿç›´åˆ°Tokenè‡ªç„¶è¿‡æœŸ</span>
    }
}

<span class="hljs-comment">// è§£å†³æ–¹æ¡ˆï¼šTokené»‘åå•ï¼ˆä½†è¿èƒŒäº†æ— çŠ¶æ€åˆè¡·ï¼‰</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JwtBlacklistService</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedisTemplate&lt;String, String&gt; redisTemplate;
    
    <span class="hljs-comment">// éªŒè¯Tokenæ—¶æ£€æŸ¥é»‘åå•</span>
    <span class="hljs-keyword">public</span> Claims <span class="hljs-title function_">verifyTokenWithBlacklist</span><span class="hljs-params">(String token)</span> {
        <span class="hljs-comment">// 1. è®¡ç®—TokenæŒ‡çº¹</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">tokenHash</span> <span class="hljs-operator">=</span> DigestUtils.sha256Hex(token);
        
        <span class="hljs-comment">// 2. æ£€æŸ¥æ˜¯å¦åœ¨é»‘åå•ä¸­</span>
        <span class="hljs-type">Boolean</span> <span class="hljs-variable">isBlacklisted</span> <span class="hljs-operator">=</span> redisTemplate.hasKey(
            <span class="hljs-string">"jwt:blacklist:"</span> + tokenHash
        );
        
        <span class="hljs-keyword">if</span> (Boolean.TRUE.equals(isBlacklisted)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TokenRevokedException</span>(<span class="hljs-string">"Tokenå·²è¢«æ’¤é”€"</span>);
        }
        
        <span class="hljs-comment">// 3. æ­£å¸¸éªŒè¯</span>
        <span class="hljs-keyword">return</span> Jwts.parserBuilder()
            .setSigningKey(jwtSecret)
            .build()
            .parseClaimsJws(token)
            .getBody();
    }
    
    <span class="hljs-comment">// å°†TokenåŠ å…¥é»‘åå•</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">revokeToken</span><span class="hljs-params">(String token)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">tokenHash</span> <span class="hljs-operator">=</span> DigestUtils.sha256Hex(token);
        <span class="hljs-type">Claims</span> <span class="hljs-variable">claims</span> <span class="hljs-operator">=</span> parseTokenWithoutValidation(token);
        
        <span class="hljs-comment">// è®¡ç®—å‰©ä½™æœ‰æ•ˆæœŸ</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">remainingSeconds</span> <span class="hljs-operator">=</span> claims.getExpiration().getTime() 
            - System.currentTimeMillis() / <span class="hljs-number">1000</span>;
        
        <span class="hljs-keyword">if</span> (remainingSeconds &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-comment">// è®¾ç½®è¿‡æœŸæ—¶é—´ä¸Tokenæœ¬èº«ä¸€è‡´</span>
            redisTemplate.opsForValue().set(
                <span class="hljs-string">"jwt:blacklist:"</span> + tokenHash,
                <span class="hljs-string">"revoked"</span>,
                remainingSeconds,
                TimeUnit.SECONDS
            );
        }
    }
}
</code></pre>
<h3 data-id="heading-6">2. <strong>æ•°æ®è¿‡æ—¶é—®é¢˜</strong></h3>
<p>Tokenä¸€æ—¦ç­¾å‘ï¼Œå…¶ä¸­çš„æ•°æ®å°±"å†»ç»“"äº†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç”¨æˆ·æƒé™å˜æ›´ï¼Œä½†æ—§Tokenä»ç„¶æœ‰æ•ˆ</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PermissionService</span> {
    
    <span class="hljs-comment">// å‘¨ä¸€ï¼šç”¨æˆ·æ˜¯æ™®é€šè§’è‰²</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initialPermission</span><span class="hljs-params">()</span> {
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userRepository.findById(<span class="hljs-string">"user_123"</span>).get();
        user.setRoles(Arrays.asList(<span class="hljs-string">"USER"</span>));
        userRepository.save(user);
        
        <span class="hljs-comment">// ç”¨æˆ·è·å–Tokenï¼ŒåŒ…å«roles=["USER"]</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> jwtService.generateToken(user);
        <span class="hljs-comment">// Tokenæœ‰æ•ˆæœŸï¼š7å¤©</span>
    }
    
    <span class="hljs-comment">// å‘¨äºŒï¼šæå‡ä¸ºç®¡ç†å‘˜</span>
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">promoteToAdmin</span><span class="hljs-params">(String userId)</span> {
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userRepository.findById(userId).get();
        user.setRoles(Arrays.asList(<span class="hljs-string">"USER"</span>, <span class="hljs-string">"ADMIN"</span>));
        userRepository.save(user);
        
        <span class="hljs-comment">// é—®é¢˜ï¼šç›´åˆ°ä¸‹å‘¨ä¸€Tokenè¿‡æœŸå‰</span>
        <span class="hljs-comment">// ç”¨æˆ·ä»ç„¶åªæœ‰USERæƒé™ï¼ˆåœ¨Tokenä¸­ï¼‰</span>
    }
}

<span class="hljs-comment">// è§£å†³æ–¹æ¡ˆï¼šæ··åˆéªŒè¯ç­–ç•¥</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HybridPermissionChecker</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">checkPermission</span><span class="hljs-params">(String token, String requiredPermission)</span> {
        <span class="hljs-comment">// 1. ä»Tokenè·å–åŸºç¡€æƒé™ï¼ˆå¿«é€Ÿï¼‰</span>
        <span class="hljs-type">Claims</span> <span class="hljs-variable">claims</span> <span class="hljs-operator">=</span> jwtService.parseToken(token);
        List&lt;String&gt; tokenPermissions = claims.get(<span class="hljs-string">"perms"</span>, List.class);
        
        <span class="hljs-keyword">if</span> (tokenPermissions.contains(requiredPermission)) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// Tokenä¸­æœ‰æƒé™ï¼Œå¿«é€Ÿé€šè¿‡</span>
        }
        
        <span class="hljs-comment">// 2. Tokenä¸­æ²¡æœ‰ï¼ŒæŸ¥æ•°æ®åº“ï¼ˆç¡®ä¿å®æ—¶æ€§ï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> claims.getSubject();
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userRepository.findById(userId).get();
        
        <span class="hljs-keyword">return</span> user.getPermissions().contains(requiredPermission);
    }
}
</code></pre>
<h3 data-id="heading-7">3. <strong>æ•°æ®è†¨èƒ€ä¸å®‰å…¨é£é™©</strong></h3>
<p>è‡ªåŒ…å«æ„å‘³ç€æ‰€æœ‰æ•°æ®éƒ½æ”¾åœ¨Tokené‡Œï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é”™è¯¯ç¤ºä¾‹ï¼šæŠŠç”¨æˆ·æ‰€æœ‰ä¿¡æ¯éƒ½å¡è¿›Token</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BadJwtService</span> {
    
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">generateBadToken</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-comment">// æŠŠæ‰€æœ‰ç”¨æˆ·ä¿¡æ¯æ”¾è¿›Token</span>
        Map&lt;String, Object&gt; claims = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        claims.put(<span class="hljs-string">"sub"</span>, user.getId());
        claims.put(<span class="hljs-string">"username"</span>, user.getUsername());
        claims.put(<span class="hljs-string">"email"</span>, user.getEmail());
        claims.put(<span class="hljs-string">"phone"</span>, user.getPhone());
        claims.put(<span class="hljs-string">"address"</span>, user.getAddress());
        claims.put(<span class="hljs-string">"avatarUrl"</span>, user.getAvatarUrl());
        claims.put(<span class="hljs-string">"preferences"</span>, user.getPreferences()); <span class="hljs-comment">// å¯èƒ½å¾ˆå¤§</span>
        <span class="hljs-comment">// ... è¿˜æœ‰20ä¸ªå­—æ®µ</span>
        
        <span class="hljs-comment">// Tokenå¤§å°ï¼š2KB+</span>
        <span class="hljs-keyword">return</span> Jwts.builder()
            .setClaims(claims)
            .signWith(signingKey)
            .compact();
        
        <span class="hljs-comment">// é—®é¢˜ï¼šæ¯ä¸ªè¯·æ±‚æºå¸¦2KBæ•°æ®</span>
        <span class="hljs-comment">// æ•æ„Ÿä¿¡æ¯æ³„éœ²é£é™©</span>
        <span class="hljs-comment">// å¯èƒ½è¶…å‡ºHTTP Headeré™åˆ¶</span>
    }
}

<span class="hljs-comment">// æ­£ç¡®ç¤ºä¾‹ï¼šæœ€å°åŒ–åŸåˆ™  </span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GoodJwtService</span> {
    
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">generateGoodToken</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-comment">// åªæ”¾å¿…è¦çš„æœ€å°æ•°æ®é›†</span>
        Map&lt;String, Object&gt; claims = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        claims.put(<span class="hljs-string">"sub"</span>, user.getId());        <span class="hljs-comment">// ç”¨æˆ·æ ‡è¯†</span>
        claims.put(<span class="hljs-string">"ver"</span>, user.getDataVersion());<span class="hljs-comment">// æ•°æ®ç‰ˆæœ¬å·</span>
        claims.put(<span class="hljs-string">"rls"</span>, user.getRoles());     <span class="hljs-comment">// è§’è‰²ï¼ˆé‡è¦ï¼‰</span>
        claims.put(<span class="hljs-string">"perm"</span>, Arrays.asList(<span class="hljs-string">"read:blog"</span>)); <span class="hljs-comment">// å…³é”®æƒé™</span>
        
        <span class="hljs-comment">// Tokenå¤§å°ï¼š~200å­—èŠ‚</span>
        <span class="hljs-keyword">return</span> Jwts.builder()
            .setClaims(claims)
            .setExpiration(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(System.currentTimeMillis() + <span class="hljs-number">3600000</span>))
            .signWith(signingKey)
            .compact();
    }
}
</code></pre>
<h2 data-id="heading-8">å››ã€å·¥ç¨‹å®è·µä¸­çš„å¹³è¡¡</h2>
<h3 data-id="heading-9">1. <strong>åˆ†å±‚æ•°æ®ç­–ç•¥</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å®šä¹‰Tokenä¸­çš„æ•°æ®å±‚çº§</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JwtClaimLayers</span> {
    
    <span class="hljs-comment">// ç¬¬ä¸€å±‚ï¼šè®¤è¯æ•°æ®ï¼ˆå¿…é¡»ï¼‰</span>
    <span class="hljs-meta">@Data</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthLayer</span> {
        <span class="hljs-meta">@JsonProperty("sub")</span>
        <span class="hljs-keyword">private</span> String subject;      <span class="hljs-comment">// ç”¨æˆ·ID</span>
        
        <span class="hljs-meta">@JsonProperty("iat")</span>  
        <span class="hljs-keyword">private</span> Date issuedAt;      <span class="hljs-comment">// ç­¾å‘æ—¶é—´</span>
        
        <span class="hljs-meta">@JsonProperty("exp")</span>
        <span class="hljs-keyword">private</span> Date expiration;    <span class="hljs-comment">// è¿‡æœŸæ—¶é—´</span>
        
        <span class="hljs-meta">@JsonProperty("jti")</span>
        <span class="hljs-keyword">private</span> String jwtId;       <span class="hljs-comment">// å”¯ä¸€æ ‡è¯†</span>
    }
    
    <span class="hljs-comment">// ç¬¬äºŒå±‚ï¼šæˆæƒæ•°æ®ï¼ˆæ¨èï¼‰</span>
    <span class="hljs-meta">@Data</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthzLayer</span> {
        <span class="hljs-meta">@JsonProperty("roles")</span>
        <span class="hljs-keyword">private</span> List&lt;String&gt; roles; <span class="hljs-comment">// ç”¨æˆ·è§’è‰²</span>
        
        <span class="hljs-meta">@JsonProperty("perms")</span>
        <span class="hljs-keyword">private</span> List&lt;String&gt; permissions; <span class="hljs-comment">// åŸºç¡€æƒé™</span>
    }
    
    <span class="hljs-comment">// ç»ä¸æ”¾å…¥Tokençš„æ•æ„Ÿæ•°æ®</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SensitiveDataNeverInclude</span> {
        <span class="hljs-keyword">private</span> String passwordHash;
        <span class="hljs-keyword">private</span> String email;
        <span class="hljs-keyword">private</span> String phoneNumber;
        <span class="hljs-keyword">private</span> String paymentInfo;
        <span class="hljs-keyword">private</span> Map&lt;String, Object&gt; sensitivePreferences;
    }
}
</code></pre>
<h3 data-id="heading-10">2. <strong>æ··åˆéªŒè¯ç­–ç•¥</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HybridAuthStrategy</span> {
    
    <span class="hljs-comment">// åŒ…è£…çš„è®¤è¯ç»“æœï¼ŒåŒ…å«é™æ€å’ŒåŠ¨æ€æ•°æ®</span>
    <span class="hljs-meta">@Data</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HybridAuthResult</span> {
        <span class="hljs-comment">// ä»Tokenç›´æ¥è·å–ï¼ˆé«˜æ€§èƒ½ï¼‰</span>
        <span class="hljs-keyword">private</span> String userId;
        <span class="hljs-keyword">private</span> String username;
        <span class="hljs-keyword">private</span> List&lt;String&gt; tokenRoles;
        
        <span class="hljs-comment">// æ‡’åŠ è½½çš„å®æ—¶æ•°æ®</span>
        <span class="hljs-keyword">private</span> Supplier&lt;List&lt;String&gt;&gt; realTimePermissions;
        <span class="hljs-keyword">private</span> Supplier&lt;UserProfile&gt; freshProfile;
        
        <span class="hljs-comment">// ä¸šåŠ¡æ–¹æ³•</span>
        <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasPermission</span><span class="hljs-params">(String permission)</span> {
            <span class="hljs-comment">// å…ˆæ£€æŸ¥Tokenä¸­çš„æƒé™</span>
            <span class="hljs-keyword">if</span> (tokenRoles.contains(<span class="hljs-string">"ADMIN"</span>) || tokenRoles.contains(permission)) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            
            <span class="hljs-comment">// Tokenä¸­æ²¡æœ‰ï¼ŒæŸ¥å®æ—¶æƒé™</span>
            <span class="hljs-keyword">return</span> realTimePermissions.get().contains(permission);
        }
    }
    
    <span class="hljs-keyword">public</span> HybridAuthResult <span class="hljs-title function_">authenticate</span><span class="hljs-params">(HttpServletRequest request)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> extractToken(request);
        <span class="hljs-type">Claims</span> <span class="hljs-variable">claims</span> <span class="hljs-operator">=</span> jwtService.parseToken(token);
        
        <span class="hljs-keyword">return</span> HybridAuthResult.builder()
            .userId(claims.getSubject())
            .username(claims.get(<span class="hljs-string">"name"</span>, String.class))
            .tokenRoles(claims.get(<span class="hljs-string">"roles"</span>, List.class))
            .realTimePermissions(() -&gt; {
                <span class="hljs-comment">// æ‡’åŠ è½½ï¼šéœ€è¦æ—¶æ‰æŸ¥æ•°æ®åº“</span>
                <span class="hljs-keyword">return</span> userService.getUserPermissions(claims.getSubject());
            })
            .freshProfile(() -&gt; {
                <span class="hljs-keyword">return</span> userService.getUserProfile(claims.getSubject());
            })
            .build();
    }
}
</code></pre>
<h3 data-id="heading-11">3. <strong>æ™ºèƒ½è¿‡æœŸç­–ç•¥</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SmartTokenExpiryStrategy</span> {
    
    <span class="hljs-comment">// æ ¹æ®ç”¨é€”ç”Ÿæˆä¸åŒæœ‰æ•ˆæœŸçš„Token</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">TokenPurpose</span> {
        SENSITIVE_OPERATION,  <span class="hljs-comment">// æ•æ„Ÿæ“ä½œï¼š15åˆ†é’Ÿ</span>
        USER_SESSION,         <span class="hljs-comment">// ç”¨æˆ·ä¼šè¯ï¼š7å¤©  </span>
        REFRESH_TOKEN,        <span class="hljs-comment">// åˆ·æ–°Tokenï¼š30å¤©</span>
        API_KEY               <span class="hljs-comment">// APIå¯†é’¥ï¼š1å¹´</span>
    }
    
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">generateToken</span><span class="hljs-params">(User user, TokenPurpose purpose)</span> {
        Map&lt;String, Object&gt; claims = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        claims.put(<span class="hljs-string">"sub"</span>, user.getId());
        claims.put(<span class="hljs-string">"purpose"</span>, purpose.name());
        
        Date expiryDate;
        <span class="hljs-keyword">switch</span> (purpose) {
            <span class="hljs-keyword">case</span> SENSITIVE_OPERATION:
                <span class="hljs-comment">// å¯†ç ä¿®æ”¹ç­‰æ•æ„Ÿæ“ä½œï¼šçŸ­æœ‰æ•ˆæœŸ</span>
                expiryDate = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(System.currentTimeMillis() + <span class="hljs-number">15</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>);
                claims.put(<span class="hljs-string">"scope"</span>, <span class="hljs-string">"password_change"</span>);
                <span class="hljs-keyword">break</span>;
                
            <span class="hljs-keyword">case</span> USER_SESSION:
                <span class="hljs-comment">// æ™®é€šä¼šè¯ï¼šä¸­ç­‰æœ‰æ•ˆæœŸ</span>
                expiryDate = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(System.currentTimeMillis() + <span class="hljs-number">7</span> * <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>);
                <span class="hljs-keyword">break</span>;
                
            <span class="hljs-keyword">case</span> REFRESH_TOKEN:
                <span class="hljs-comment">// åˆ·æ–°Tokenï¼šé•¿æœ‰æ•ˆæœŸï¼Œä½†å¯å•ç‹¬æ’¤é”€</span>
                expiryDate = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(System.currentTimeMillis() + <span class="hljs-number">30</span> * <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>);
                claims.put(<span class="hljs-string">"jti"</span>, UUID.randomUUID().toString()); <span class="hljs-comment">// å¯æ’¤é”€æ ‡è¯†</span>
                <span class="hljs-keyword">break</span>;
                
            <span class="hljs-keyword">default</span>:
                expiryDate = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(System.currentTimeMillis() + <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>);
        }
        
        <span class="hljs-keyword">return</span> Jwts.builder()
            .setClaims(claims)
            .setExpiration(expiryDate)
            .signWith(signingKey)
            .compact();
    }
}
</code></pre>
<h2 data-id="heading-12">äº”ã€æ€»ç»“ï¼šæ‹¥æŠ±å¤æ‚æ€§</h2>
<p>JWTçš„è‡ªåŒ…å«æ€§ä¸æ˜¯é“¶å¼¹â€”â€”è·å¾—äº†æ€§èƒ½å’Œæ‰©å±•æ€§çš„åŒæ—¶ï¼Œå´å¤±å»äº†å³æ—¶æ§åˆ¶å’Œæ•°æ®å®æ—¶æ€§ã€‚å…³é”®åœ¨äºè®¤è¯†åˆ°è¿™ä¸€ç‚¹ï¼Œå¹¶æ ¹æ®ä¸šåŠ¡åœºæ™¯åšå‡ºæ˜æ™ºçš„é€‰æ‹©ã€‚</p>
<p>JWTæ˜¯å·¥å…·ç®±ä¸­çš„ä¸€ä»¶åˆ©å™¨ï¼Œéœ€è¦ç”¨åœ¨åˆé€‚çš„åœ°æ–¹ï¼š</p>
<ul>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šSpring Cloudå¾®æœåŠ¡è®¤è¯ã€ç§»åŠ¨ç«¯APIã€ç½‘å…³ç»Ÿä¸€è®¤è¯</li>
<li><strong>è°¨æ…ä½¿ç”¨</strong>ï¼šéœ€è¦å®æ—¶æƒé™çš„Adminç³»ç»Ÿã€é‡‘èäº¤æ˜“æ ¸å¿ƒ</li>
<li><strong>é¿å…ä½¿ç”¨</strong>ï¼šä¼ ç»ŸWebåº”ç”¨ï¼ˆç”¨Spring Sessionæ›´åˆé€‚ï¼‰ã€ä¼šè¯é¢‘ç¹æ›´æ–°çš„åœºæ™¯</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vscodeç»ˆç«¯ä½¿ç”¨ä¸äº†npmå‘½ä»¤]]></title>    <link>https://juejin.cn/post/7582438310103908398</link>    <guid>https://juejin.cn/post/7582438310103908398</guid>    <pubDate>2025-12-12T00:44:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582438310103908398" data-draft-id="7582413770092118054" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vscodeç»ˆç«¯ä½¿ç”¨ä¸äº†npmå‘½ä»¤"/> <meta itemprop="keywords" content="Visual Studio Code"/> <meta itemprop="datePublished" content="2025-12-12T00:44:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Hyinglin"/> <meta itemprop="url" content="https://juejin.cn/user/2362231708723822"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vscodeç»ˆç«¯ä½¿ç”¨ä¸äº†npmå‘½ä»¤
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2362231708723822/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Hyinglin
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T00:44:02.000Z" title="Fri Dec 12 2025 00:44:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é—®é¢˜</h2>
<p>npmå‘½ä»¤åœ¨ç”µè„‘çš„CMDå‘½ä»¤è¡Œä¸­å¯ä»¥æ­£å¸¸è¿è¡Œä½†æ˜¯åœ¨VSCODEçš„ç»ˆç«¯ä¸­npmæ— æ³•æ­£å¸¸æ‰§è¡Œã€‚</p>
<p>é€šè¿‡CMDå‘½ä»¤è¡ŒæŸ¥çœ‹ nodeçš„ç‰ˆæœ¬è·Ÿnpmçš„ç‰ˆæœ¬ã€‚ç¡®å®šnodeæˆåŠŸå®‰è£…ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f5b6c917f0b484e8962f11e9f1f7527~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSHlpbmdsaW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766105041&amp;x-signature=LwMixiFXvAjgdJkW02drpuHSEgQ%3D" alt="image.png" loading="lazy"/></p>
<p>ä½†æ˜¯å½“æˆ‘ä»¬æ‰“å¼€VSCODEï¼Œåœ¨VSCODEçš„ç»ˆç«¯ä¸­æ‰§è¡Œ npmå‘½ä»¤çš„æ—¶å€™å‘ç°npmå‘½ä»¤æ— æ³•ä½¿ç”¨ï¼Œå¹¶æŠ¥é”™å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ab7cee11e434a12880a3517c6d40e60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSHlpbmdsaW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766105041&amp;x-signature=PLaT6Td7Y4BacBh4N1Tr%2BFS9es8%3D" alt="image.png" loading="lazy"/></p>
<p>æ‰¾åˆ°æŠ¥é”™æç¤ºçš„npm.ps1æ–‡ä»¶ï¼Œå¹¶å°†å®ƒåˆ é™¤ã€‚</p>
<p>é‡æ–°ä»¥ç®¡ç†å‘˜å‘½ä»¤æ‰“å¼€vscodeç»ˆç«¯ï¼Œè¾“å…¥npmå‘½ä»¤ï¼Œæ­¤æ—¶èƒ½å¤Ÿæ­£å¸¸æ‰§è¡Œï¼ï¼ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Argo CDä¸GitOpsï¼šè®©ä½ çš„Kubernetesåº”ç”¨â€œè‡ªæ„ˆâ€æ–°ç”Ÿ]]></title>    <link>https://juejin.cn/post/7582419803782283299</link>    <guid>https://juejin.cn/post/7582419803782283299</guid>    <pubDate>2025-12-12T01:07:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582419803782283299" data-draft-id="7582470341923831842" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Argo CDä¸GitOpsï¼šè®©ä½ çš„Kubernetesåº”ç”¨â€œè‡ªæ„ˆâ€æ–°ç”Ÿ"/> <meta itemprop="keywords" content="Kubernetes"/> <meta itemprop="datePublished" content="2025-12-12T01:07:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº‘äº‘ä¼—ç”Ÿs"/> <meta itemprop="url" content="https://juejin.cn/user/380845430158739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Argo CDä¸GitOpsï¼šè®©ä½ çš„Kubernetesåº”ç”¨â€œè‡ªæ„ˆâ€æ–°ç”Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/380845430158739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº‘äº‘ä¼—ç”Ÿs
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T01:07:33.000Z" title="Fri Dec 12 2025 01:07:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>GitOps ç»“åˆ Argo CD å®ç°äº† Kubernetes åº”ç”¨ç¨‹åºçš„è‡ªåŠ¨åŒ–éƒ¨ç½²å’Œè‡ªæˆ‘ä¿®å¤ã€‚å®ƒé€šè¿‡å°†é›†ç¾¤çŠ¶æ€ä¸ Git ä»“åº“åŒæ­¥ï¼Œç¡®ä¿åº”ç”¨ç¨‹åºå§‹ç»ˆç¬¦åˆé¢„æœŸï¼Œå¹¶åœ¨å‡ºç°æ¼‚ç§»æ—¶è‡ªåŠ¨ä¿®å¤ã€‚</p>
<blockquote>
<p>è¯‘è‡ªï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fthenewstack.io%2Fmake-your-kubernetes-apps-self-heal-with-argo-cd-and-gitops%2F" target="_blank" title="https://thenewstack.io/make-your-kubernetes-apps-self-heal-with-argo-cd-and-gitops/" ref="nofollow noopener noreferrer">Make Your Kubernetes Apps Self-Heal With Argo CD and GitOps</a></p>
<p>ä½œè€…ï¼šVinod Pal</p>
</blockquote>
<p>Kubernetes ç”Ÿäº§ç¯å¢ƒåº”ç”¨ç¨‹åºä¼ ç»Ÿä¸Šéœ€è¦äººå·¥æ“ä½œå’Œæ—¶é—´ã€‚</p>
<p>GitOps ç»“åˆ <a href="https://link.juejin.cn?target=https%3A%2F%2Fthenewstack.io%2Fwhy-argo-cd-is-the-lifeline-of-gitops%2F" target="_blank" title="https://thenewstack.io/why-argo-cd-is-the-lifeline-of-gitops/" ref="nofollow noopener noreferrer">Argo CD è§£å†³äº†è¿™ä¸ªé—®é¢˜</a>ã€‚å®ƒä½¿ä½ çš„é›†ç¾¤ä¸ Git åŒæ­¥ï¼Œä½ çš„å­˜å‚¨åº“å®šä¹‰äº†æ‰€éœ€çš„çŠ¶æ€ã€‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Fthenewstack.io%2Fsurvey-argocd-leaves-flux-and-other-gitops-platforms-behind%2F" target="_blank" title="https://thenewstack.io/survey-argocd-leaves-flux-and-other-gitops-platforms-behind/" ref="nofollow noopener noreferrer">Argo CD</a> ç¡®ä¿é›†ç¾¤å§‹ç»ˆä¸å®ƒåŒ¹é…ï¼Œå½“å‡ºç°é—®é¢˜æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨ä¿®å¤ã€‚é€šè¿‡ GitOpsï¼Œä½ çš„åº”ç”¨ç¨‹åºå˜å¾—è‡ªæˆ‘ä¿®å¤ï¼Œå¹¶å§‹ç»ˆä¸ Git ä¿æŒåŒæ­¥ã€‚</p>
<h2 data-id="heading-0"><strong>ä»€ä¹ˆæ˜¯ GitOps å’Œè‡ªæˆ‘ä¿®å¤ï¼Ÿ</strong></h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fthenewstack.io%2Fgitops-in-the-real-world-barriers-and-best-practices%2F" target="_blank" title="https://thenewstack.io/gitops-in-the-real-world-barriers-and-best-practices/" ref="nofollow noopener noreferrer">GitOps</a> æ„å‘³ç€ä½ çš„ Git å­˜å‚¨åº“æ˜¯æ‰€æœ‰äº‹ç‰©çš„å”¯ä¸€çœŸå®æ¥æºã€‚å½“<a href="https://link.juejin.cn?target=https%3A%2F%2Fthenewstack.io%2Fi-need-to-talk-to-you-about-kubernetes-gitops%2F" target="_blank" title="https://thenewstack.io/i-need-to-talk-to-you-about-kubernetes-gitops/" ref="nofollow noopener noreferrer">ç°å®ä¸ Git ä¸ç¬¦æ—¶</a>ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä¿®å¤ã€‚</p>
<p>ä½ çš„åº”ç”¨ç¨‹åºé…ç½®å­˜å‚¨åœ¨ Git ä¸­ï¼Œå¯¹åº”ç”¨ç¨‹åºæˆ– Git æºä»£ç çš„ä»»ä½•æ›´æ”¹éƒ½å°†è‡ªåŠ¨ä¿®å¤ã€‚è¿™æ˜¯ GitOps çš„æœ€ä½³å’Œæœ€ç®€å•çš„æœºä¼šï¼Œå¯ä»¥åŠ é€Ÿä¼ ç»Ÿçš„éƒ¨ç½²è¿‡ç¨‹ã€‚</p>
<h3 data-id="heading-1">æ¢å¤ä¼ ç»Ÿéƒ¨ç½²</h3>
<p>å½“ä½ éµå¾ªä¼ ç»Ÿéƒ¨ç½²è¿‡ç¨‹æ—¶ï¼Œåœ¨è®¸å¤šæƒ…å†µä¸‹äº‹æƒ…å¯èƒ½ä¼šå‡ºç°æ„æƒ³ä¸åˆ°çš„è½¬æŠ˜ï¼š</p>
<ul>
<li>æœ‰äººå¯èƒ½æ‰‹åŠ¨æ›´æ”¹ç”Ÿäº§è®¾ç½®ï¼Œå¯¼è‡´ä½ çš„ç”Ÿäº§åœæ»ã€‚</li>
<li>æœåŠ¡å™¨ä¸Šçš„æŠ€æœ¯å¤±è¯¯å¯èƒ½ä¼šæš‚åœç”Ÿäº§ï¼Œç„¶åä½ å¿…é¡»æ‰‹åŠ¨é‡å¯ã€‚</li>
<li>ä½ çš„åº”ç”¨ç¨‹åºé…ç½®å‘ç”Ÿå˜åŒ–ï¼Œä½ å¿…é¡»è·Ÿè¸ªæ‰€æœ‰æ›´æ”¹ã€‚</li>
</ul>
<p>GitOps æœ‰æ•ˆä¸”ç®€å•åœ°å¤„ç†æ‰€æœ‰è¿™äº›å¯èƒ½æ€§ã€‚</p>
<h3 data-id="heading-2">GitOps è‡ªæˆ‘ä¿®å¤è§£å†³æ–¹æ¡ˆ</h3>
<p>é€šè¿‡ GitOpsï¼Œä½ å¯ä»¥å°†åº”ç”¨ç¨‹åºçš„å½“å‰çŠ¶æ€ç»´æŠ¤åœ¨ Git å­˜å‚¨åº“ä¸­ã€‚Argo CD ç­‰ GitOps æŠ€æœ¯å¯ç¡®ä¿ Git ä¸­å®šä¹‰çš„å†…å®¹ä¸å®é™…çš„åº”ç”¨ç¨‹åºéƒ¨ç½²åŒ¹é…ã€‚</p>
<p>å¦‚æœæœåŠ¡å™¨å‡ºç°æŠ€æœ¯é—®é¢˜ï¼ŒGitOps å°†è‡ªåŠ¨è§£å†³å®ƒä»¬å¹¶å°†ä½ çš„åº”ç”¨ç¨‹åºæ¢å¤åˆ°å®šä¹‰çš„çŠ¶æ€ã€‚è¿™å°±æ˜¯ GitOps ä¸­çš„è‡ªæˆ‘ä¿®å¤ã€‚</p>
<p>æœ€é‡è¦çš„æ˜¯ï¼Œä½ è¿˜å¯ä»¥ä¿ç•™ Git ä¸­æ‰€æœ‰æ›´æ”¹çš„å®¡è®¡è¿½è¸ªã€‚</p>
<h2 data-id="heading-3"><strong>ç¬¬ 0 æ­¥ï¼šå…ˆå†³æ¡ä»¶</strong></h2>
<ul>
<li>ç³»ç»Ÿä¸Šå·²å®‰è£… Dockerã€‚</li>
<li>æˆ‘é¦–é€‰ï¼šå¸¦æœ‰ Ubuntu çš„ WSL2ã€‚éšæ„ä½¿ç”¨ä½ è‡ªå·±çš„ Linux è®¾ç½®ã€‚</li>
<li>GitHub è´¦æˆ·ã€‚</li>
<li>Docker Hub è´¦æˆ·ã€‚</li>
<li>æˆ‘é¦–é€‰ï¼šReact é¡¹ç›®ï¼ˆä½ å¯ä»¥ä½¿ç”¨ä»»ä½•é¡¹ç›®ï¼‰ã€‚</li>
<li>Kubernetes çŸ¥è¯†ï¼ˆå¯é€‰ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-4"><strong>ç¬¬ 1 æ­¥ï¼šå®‰è£…å¹¶å¯åŠ¨ Minikube</strong></h2>
<p>é¦–å…ˆï¼Œè®¾ç½®ä¸€ä¸ª Kubernetes é›†ç¾¤ã€‚æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Minikubeã€‚å®ƒè½»é‡çº§ï¼Œéå¸¸é€‚åˆå­¦ä¹ ã€‚</p>
<p>ï¼ˆå¦‚æœä½ å·²ç»æœ‰æœ¬åœ°è¿è¡Œçš„é›†ç¾¤ï¼Œå¯ä»¥è·³è¿‡æ­¤æ­¥éª¤ã€‚ï¼‰</p>
<h3 data-id="heading-5"><strong>å®‰è£… Minikube</strong></h3>
<p>è¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… Minikubeï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Download and install minikube</span>
curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64
sudo install minikube-linux-amd64 /usr/local/bin/minikube
<span class="hljs-comment"># Install kubectl if you don't have it</span>
curl -LO <span class="hljs-string">"https://dl.k8s.io/release/<span class="hljs-subst">$(curl -L -s https://dl.k8s.io/release/stable.txt)</span>/bin/linux/amd64/kubectl"</span>
sudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl
<span class="hljs-comment"># Note: Some Linux distributions need this for Minikube</span>
sudo apt install conntrack
</code></pre>
<h3 data-id="heading-6"><strong>å¯åŠ¨ Minikube é›†ç¾¤</strong></h3>
<p>è¿è¡Œä»¥ä¸‹å‘½ä»¤ä¹‹å‰ï¼Œè¯·ç¡®ä¿ Docker æ­£åœ¨è¿è¡Œã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># Start minikube with Docker driver</span>
minikube start <span class="hljs-attr">--driver</span>=docker

<span class="hljs-comment"># Verify everything is working</span>
kubectl version --client
kubectl get nodes

<span class="hljs-comment"># You should see:</span>
<span class="hljs-comment"># NAME       STATUS   ROLES           AGE</span>
<span class="hljs-comment"># minikube   Ready    control-plane   1m</span>

<span class="hljs-comment"># Enable ingress addon (useful for later)</span>
minikube addons enable ingress
</code></pre>
<h2 data-id="heading-7">ç¬¬ 2 æ­¥ï¼šåˆ›å»ºä½ çš„ React åº”ç”¨ç¨‹åº</h2>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Create the app</span>
<span class="hljs-built_in">cd</span> ~/projects
npx create-react-app my-selfhealing-app
<span class="hljs-built_in">cd</span> my-selfhealing-app
</code></pre>
<h3 data-id="heading-8"><strong>æ›´æ–°åº”ç”¨ç¨‹åºä»¥è¿›è¡Œæ¼”ç¤º</strong></h3>
<p>æ›¿æ¢ <code>src/app.js</code>ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">import './App.css';
import { useState, useEffect } from 'react';

function App() {
  const [count, setCount] = useState(0);
  const [timestamp, setTimestamp] = useState('');

  useEffect(() =<span class="hljs-symbol">&amp;gt;</span> {
    setTimestamp(new Date().toLocaleString());
  }, []);

  return (
    <span class="hljs-symbol">&amp;lt;</span>div className="App"<span class="hljs-symbol">&amp;gt;</span>
      <span class="hljs-symbol">&amp;lt;</span>header className="App-header"<span class="hljs-symbol">&amp;gt;</span>
        <span class="hljs-symbol">&amp;lt;</span>h1<span class="hljs-symbol">&amp;gt;</span>ğŸ›¡ï¸ Self-Healing React App<span class="hljs-symbol">&amp;lt;</span>/h1<span class="hljs-symbol">&amp;gt;</span>
        <span class="hljs-symbol">&amp;lt;</span>p<span class="hljs-symbol">&amp;gt;</span>This app automatically fixes itself using GitOps!<span class="hljs-symbol">&amp;lt;</span>/p<span class="hljs-symbol">&amp;gt;</span>
        
        <span class="hljs-symbol">&amp;lt;</span>div style={{ 
          background: 'rgba(255,255,255,0.1)', 
          padding: '20px', 
          borderRadius: '10px',
          margin: '20px 0' 
        }}<span class="hljs-symbol">&amp;gt;</span>
          <span class="hljs-symbol">&amp;lt;</span>button 
            onâ€‹Click={() =<span class="hljs-symbol">&amp;gt;</span> setCount(count + 1)}
            style={{
              padding: '10px 20px',
              fontSize: '16px',
              backgroundColor: '#61dafb',
              border: 'none',
              borderRadius: '5px',
              cursor: 'pointer'
            }}
          <span class="hljs-symbol">&amp;gt;</span>
            Clicked {count} times
          <span class="hljs-symbol">&amp;lt;</span>/button<span class="hljs-symbol">&amp;gt;</span>
        <span class="hljs-symbol">&amp;lt;</span>/div<span class="hljs-symbol">&amp;gt;</span>

        <span class="hljs-symbol">&amp;lt;</span>div style={{ fontSize: '14px', opacity: 0.8 }}<span class="hljs-symbol">&amp;gt;</span>
          <span class="hljs-symbol">&amp;lt;</span>p<span class="hljs-symbol">&amp;gt;</span>ğŸ”„ Auto-sync enabled<span class="hljs-symbol">&amp;lt;</span>/p<span class="hljs-symbol">&amp;gt;</span>
          <span class="hljs-symbol">&amp;lt;</span>p<span class="hljs-symbol">&amp;gt;</span>ğŸ› ï¸ Self-healing active<span class="hljs-symbol">&amp;lt;</span>/p<span class="hljs-symbol">&amp;gt;</span>
          <span class="hljs-symbol">&amp;lt;</span>p<span class="hljs-symbol">&amp;gt;</span>ğŸ“… Deployed: {timestamp}<span class="hljs-symbol">&amp;lt;</span>/p<span class="hljs-symbol">&amp;gt;</span>
          <span class="hljs-symbol">&amp;lt;</span>p<span class="hljs-symbol">&amp;gt;</span>ğŸ·ï¸ Version: 1.0.0<span class="hljs-symbol">&amp;lt;</span>/p<span class="hljs-symbol">&amp;gt;</span>
        <span class="hljs-symbol">&amp;lt;</span>/div<span class="hljs-symbol">&amp;gt;</span>
      <span class="hljs-symbol">&amp;lt;</span>/header<span class="hljs-symbol">&amp;gt;</span>
    <span class="hljs-symbol">&amp;lt;</span>/div<span class="hljs-symbol">&amp;gt;</span>
  );
}


export default App;
</code></pre>
<p>æ³¨æ„ï¼šè¿™æ®µä»£ç åº”è¯¥å¯ä»¥æ­£å¸¸å·¥ä½œã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ Vite æˆ–ä»»ä½•å…¶ä»–æ¡†æ¶ï¼Œå› ä¸º CRA å·²ç»å¼ƒç”¨ã€‚</p>
<h3 data-id="heading-9"><strong>åˆ›å»º Dockerfile</strong></h3>
<p>Dockerfile ç”¨äºç¼–å†™ Docker ä»£ç åº“ã€‚</p>
<p>åˆ›å»º <code>Dockerfile</code>ï¼š</p>
<p>ç¡®ä¿å°†æ­¤æ–‡ä»¶æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­ã€‚å°†ä»¥ä¸‹ä»£ç ç²˜è´´åˆ°å…¶ä¸­ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">FROM</span> node:<span class="hljs-number">18</span><span class="hljs-operator">-</span>alpine <span class="hljs-keyword">as</span> builder
WORKDIR <span class="hljs-operator">/</span>app
<span class="hljs-keyword">COPY</span> package<span class="hljs-operator">*</span>.json .<span class="hljs-operator">/</span>
RUN npm ci
<span class="hljs-keyword">COPY</span> . .
RUN npm run build

<span class="hljs-keyword">FROM</span> nginx:alpine
<span class="hljs-keyword">COPY</span> <span class="hljs-comment">--from=builder /app/build /usr/share/nginx/html</span>
EXPOSE <span class="hljs-number">80</span>
CMD ["nginx", "-g", "daemon off;"]
</code></pre>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬é¦–å…ˆå®‰è£… nodeï¼Œç„¶ååˆ›å»ºæ„å»ºï¼Œç„¶åéµå¾ªåœ¨ç«¯å£ 80 ä¸Šè¿è¡Œåº”ç”¨ç¨‹åºçš„è¯´æ˜ã€‚</p>
<h3 data-id="heading-10"><strong>æ¨é€åˆ° GitHub</strong></h3>
<p>æ‰€æœ‰ä»£ç å‡†å¤‡å¥½åï¼Œå°†å…¶æ¨é€åˆ° GitHubã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp">git <span class="hljs-keyword">init</span>
git <span class="hljs-keyword">add</span> .
git commit -m <span class="hljs-string">"Initial self-healing app"</span>
git branch -M main
git remote <span class="hljs-keyword">add</span> origin https:<span class="hljs-comment">//github.com/YOUR_USERNAME/my-selfhealing-app.git</span>
git push -u origin main
</code></pre>
<h2 data-id="heading-11"><strong>ç¬¬ 3 æ­¥ï¼šæ„å»ºå¹¶æ¨é€ Docker é•œåƒ</strong></h2>
<p>ç°åœ¨ä»£ç å·²å‡†å¤‡å¥½ï¼Œåˆ›å»ºä¸€ä¸ª Docker é•œåƒå¹¶å°†å…¶æ¨é€åˆ° Docker Hubã€‚</p>
<p>å¦‚æœä½ æ²¡æœ‰ Docker Hub è´¦æˆ·ï¼Œå¯ä»¥ä» <a href="https://link.juejin.cn?target=https%3A%2F%2Fhub.docker.com%2F" target="_blank" title="https://hub.docker.com/" ref="nofollow noopener noreferrer">Docker Hub</a> é¡µé¢æ³¨å†Œå¹¶åˆ›å»ºä¸€ä¸ªã€‚</p>
<p>å¦å¤–ï¼Œè¯·ç¡®ä¿ Docker åœ¨æœ¬åœ°è¿è¡Œã€‚å¦‚æœä½ æ²¡æœ‰åœ¨æœ¬åœ°å®‰è£… Dockerï¼Œå¯ä»¥å®‰è£… <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.docker.com%2Fproducts%2Fdocker-desktop%2F" target="_blank" title="https://www.docker.com/products/docker-desktop/" ref="nofollow noopener noreferrer">Docker Desktop</a>ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Build the image</span>
docker build -t YOUR_DOCKERHUB_USERNAME/selfhealing-app:v1.0.0 .

<span class="hljs-comment"># Push to DockerHub</span>
docker login
docker push YOUR_DOCKERHUB_USERNAME/selfhealing-app:v1.0.0
</code></pre>
<h2 data-id="heading-12"><strong>ç¬¬ 4 æ­¥ï¼šåˆ›å»º GitOps é…ç½®ä»“åº“</strong></h2>
<p>è¦å¼€å§‹ä½¿ç”¨ GitOpsï¼Œè¯·åˆ›å»ºä¸€ä¸ªæ–°çš„ Git å­˜å‚¨åº“ã€‚è¿™å¾ˆé‡è¦ï¼Œå› ä¸ºæºä»£ç å’Œ GitOps å¯èƒ½æœ‰å•ç‹¬çš„å­˜å‚¨åº“ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Build the image</span>
docker build -t YOUR_DOCKERHUB_USERNAME/selfhealing-app:v1.0.0 .

<span class="hljs-comment"># Push to DockerHub</span>
docker login
docker push YOUR_DOCKERHUB_USERNAME/selfhealing-app:v1.0.0
</code></pre>
<h3 data-id="heading-13"><strong>åˆ›å»º Kubernetes æ¸…å•</strong></h3>
<p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºâ€œappâ€çš„æ–°æ–‡ä»¶å¤¹ã€‚åœ¨æ­¤æ–‡ä»¶å¤¹ä¸­ï¼Œåˆ›å»ºä¸ Kubernetes ç›¸å…³çš„æ–‡ä»¶ã€‚</p>
<p>åˆ›å»º <code>app/deployment.yaml</code>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">selfhealing-app</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">default</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">replicas:</span> <span class="hljs-number">2</span>  <span class="hljs-comment"># We are having 2 replicas of our app</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">matchLabels:</span>
      <span class="hljs-attr">app:</span> <span class="hljs-string">selfhealing-app</span>
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">metadata:</span>
      <span class="hljs-attr">labels:</span>
        <span class="hljs-attr">app:</span> <span class="hljs-string">selfhealing-app</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">containers:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">react-app</span>
        <span class="hljs-attr">image:</span> <span class="hljs-string">YOUR_DOCKERHUB_USERNAME/selfhealing-app:v1.0.0</span>  <span class="hljs-comment"># Update this!</span>
        <span class="hljs-attr">ports:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">80</span>
        <span class="hljs-attr">resources:</span>
          <span class="hljs-attr">requests:</span>
            <span class="hljs-attr">memory:</span> <span class="hljs-string">"64Mi"</span>
            <span class="hljs-attr">cpu:</span> <span class="hljs-string">"50m"</span>
          <span class="hljs-attr">limits:</span>
            <span class="hljs-attr">memory:</span> <span class="hljs-string">"128Mi"</span>
            <span class="hljs-attr">cpu:</span> <span class="hljs-string">"100m"</span>
</code></pre>
<p>è¿™æ˜¯ä¸€ä¸ªå¸¦æœ‰åŸºæœ¬ä¿¡æ¯çš„å¸¸è§„ Kubernetes éƒ¨ç½²æ–‡ä»¶ã€‚è¯·åŠ¡å¿…ç”¨ä½ çš„ Docker é•œåƒæ›´æ–° <code>image</code>ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œä¸º Kubernetes æœåŠ¡åˆ›å»ºå¦ä¸€ä¸ªæ–‡ä»¶ã€‚</p>
<p>åˆ›å»º <code>app/service.yaml</code>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">selfhealing-app-service</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">default</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">app:</span> <span class="hljs-string">selfhealing-app</span>
  <span class="hljs-attr">ports:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">port:</span> <span class="hljs-number">80</span>
    <span class="hljs-attr">targetPort:</span> <span class="hljs-number">80</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">LoadBalancer</span>
</code></pre>
<h3 data-id="heading-14"><strong>æäº¤ GitOps é…ç½®</strong></h3>
<p>æ‰€æœ‰æ–‡ä»¶åˆ›å»ºå®Œæˆåï¼Œå°†æ›´æ”¹æ¨é€åˆ° GitHubã€‚</p>
<pre><code class="hljs language-sql" lang="sql">git <span class="hljs-keyword">add</span> .
git <span class="hljs-keyword">commit</span> <span class="hljs-operator">-</span>m "Add GitOps configuration for self-healing app"
git push origin main
</code></pre>
<h2 data-id="heading-15"><strong>ç¬¬ 5 æ­¥ï¼šå®‰è£… Argo CD</strong></h2>
<p>æ¥ä¸‹æ¥ï¼Œå®‰è£…ä½¿è‡ªæˆ‘ä¿®å¤æˆä¸ºå¯èƒ½çš„å·¥å…·ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Create Argo CD namespace</span>
kubectl create namespace Argo CD

<span class="hljs-comment"># Install Argo CD</span>
kubectl apply -n Argo CD -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml

<span class="hljs-comment"># Wait for it to be ready (takes 2-3 minutes)</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Installing Argo CD... this takes a few minutes"</span>
kubectl <span class="hljs-built_in">wait</span> --<span class="hljs-keyword">for</span>=condition=available --<span class="hljs-built_in">timeout</span>=300s deployment/Argo CD-server -n Argo CD
</code></pre>
<h3 data-id="heading-16"><strong>è®¿é—® Argo CD</strong></h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Get the admin password</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Argo CD Password:"</span>
kubectl -n Argo CD get secret Argo CD-initial-admin-secret -o jsonpath=<span class="hljs-string">"{.data.password}"</span> | <span class="hljs-built_in">base64</span> -d &amp;&amp; <span class="hljs-built_in">echo</span>
<span class="hljs-comment"># It will give output something like this. Keep the password handy. Username is admin.</span>
<span class="hljs-comment"># Argo CD Password:</span>
<span class="hljs-comment">#Gvy5q5gb3kADdS3w</span>

<span class="hljs-comment"># Start port forwarding (keep this running)</span>
kubectl port-forward svc/Argo CD-server -n Argo CD 8080:443 &gt; /dev/null 2&gt;&amp;1 &amp;

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Argo CD UI: https://localhost:8080"</span>
</code></pre>
<p>ç°åœ¨ Argo CD å°†åœ¨ç«¯å£ 8080 ä¸Šè¿è¡Œã€‚åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æ­¤ URLï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flocalhost%3A8080" target="_blank" title="https://localhost:8080" ref="nofollow noopener noreferrer">https://localhost:8080</a>ã€‚</p>
<p>ä½ ä¼šçœ‹åˆ°è¿™æ ·çš„ç™»å½•å±å¹•ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcdn.thenewstack.io%2Fmedia%2F2025%2F12%2F681d53eb-image7-1024x479.png" target="_blank" title="https://cdn.thenewstack.io/media/2025/12/681d53eb-image7-1024x479.png" ref="nofollow noopener noreferrer"><img src="https://cdn.thenewstack.io/media/2025/12/681d53eb-image7-1024x479.png" alt="AgroCD login screen" loading="lazy"/></a></p>
<p><em>AgroCD ç™»å½•å±å¹•ã€‚</em></p>
<p>ä½ å¯ä»¥ä½¿ç”¨ç”¨æˆ·åâ€œadminâ€å’Œä½ åˆšåˆšé€šè¿‡ä¸Šè¿°å‘½ä»¤ç”Ÿæˆçš„å¯†ç ã€‚ç™»å½•å®Œæˆåï¼Œæ˜¯æ—¶å€™åœ¨ Argo CD ä¸­åˆ›å»ºåº”ç”¨ç¨‹åºäº†ã€‚</p>
<h2 data-id="heading-17">ç¬¬ 6 æ­¥ï¼šåˆ›å»ºè‡ªæˆ‘ä¿®å¤åº”ç”¨ç¨‹åº</h2>
<p>å‘Šè¯‰ Argo CD ç®¡ç†ä½ çš„åº”ç”¨ç¨‹åºå¹¶å¯ç”¨è‡ªæˆ‘ä¿®å¤ã€‚</p>
<h3 data-id="heading-18"><strong>åˆ›å»º Argo CD åº”ç”¨ç¨‹åº</strong></h3>
<p>åˆ›å»º <code>selfhealing-application.yaml</code>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">argoproj.io/v1alpha1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Application</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">selfhealing-app</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">Argo</span> <span class="hljs-string">CD</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">project:</span> <span class="hljs-string">default</span>
  <span class="hljs-attr">source:</span>
    <span class="hljs-attr">repoURL:</span> <span class="hljs-string">https://github.com/YOUR_USERNAME/my-GitOps-config</span>  <span class="hljs-comment"># Update this!</span>
    <span class="hljs-attr">targetRevision:</span> <span class="hljs-string">HEAD</span>
    <span class="hljs-attr">path:</span> <span class="hljs-string">app</span>
  <span class="hljs-attr">destination:</span>
    <span class="hljs-attr">server:</span> <span class="hljs-string">https://kubernetes.default.svc</span>
    <span class="hljs-attr">namespace:</span> <span class="hljs-string">default</span>
  <span class="hljs-attr">syncPolicy:</span>
    <span class="hljs-attr">automated:</span>
      <span class="hljs-attr">prune:</span> <span class="hljs-literal">true</span>      <span class="hljs-comment"># Remove extra resources</span>
      <span class="hljs-attr">selfHeal:</span> <span class="hljs-literal">true</span>   <span class="hljs-comment"># THE MAGIC: Auto-fix when things drift</span>
</code></pre>
<p>åº”ç”¨å®ƒï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># Update the repoURL first, then:</span>
kubectl apply -f selfhealing-application.yaml

<span class="hljs-comment"># This will give the result below</span>
<span class="hljs-comment"># application.argoproj.io/selfhealing-app configured</span>
</code></pre>
<p>å®Œæˆåï¼Œä½ åº”è¯¥ä¼šåœ¨ Argo CD æ§åˆ¶é¢æ¿ä¸­çœ‹åˆ°ä½ çš„åº”ç”¨ç¨‹åºã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcdn.thenewstack.io%2Fmedia%2F2025%2F12%2F524f4f6a-image2.png" target="_blank" title="https://cdn.thenewstack.io/media/2025/12/524f4f6a-image2.png" ref="nofollow noopener noreferrer"><img src="https://cdn.thenewstack.io/media/2025/12/524f4f6a-image2.png" alt="Argo CD UI showing that itÂ  is running locally" loading="lazy"/></a></p>
<p><em>Argo CD UI æ˜¾ç¤ºå®ƒæ­£åœ¨æœ¬åœ°è¿è¡Œã€‚</em></p>
<h2 data-id="heading-19"><strong>ç¬¬ 7 æ­¥ï¼šè®¿é—®ä½ çš„è‡ªæˆ‘ä¿®å¤åº”ç”¨ç¨‹åº</strong></h2>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># Check pods are running</span>
kubectl get pods -l <span class="hljs-attr">app</span>=selfhealing-app
</code></pre>
<p>å®ƒåº”è¯¥æ˜¾ç¤ºå¦‚ä¸‹ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcdn.thenewstack.io%2Fmedia%2F2025%2F12%2F4a9ca882-image1-1024x96.png" target="_blank" title="https://cdn.thenewstack.io/media/2025/12/4a9ca882-image1-1024x96.png" ref="nofollow noopener noreferrer"><img src="https://cdn.thenewstack.io/media/2025/12/4a9ca882-image1-1024x96.png" alt="Output showing that pods are running" loading="lazy"/></a></p>
<p>æ˜¾ç¤º Pod æ­£åœ¨è¿è¡Œçš„è¾“å‡ºã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Access your app using port-forward</span>
kubectl port-forward svc/selfhealing-app-service 3000:80 &gt; /dev/null 2&gt;&amp;1 &amp;
</code></pre>
<p>è®¿é—®</p>
<p><code>http://localhost:3000</code></p>
<p>æŸ¥çœ‹ä½ çš„åº”ç”¨ç¨‹åºè¿è¡Œæƒ…å†µã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcdn.thenewstack.io%2Fmedia%2F2025%2F12%2F6a37ca07-image6-1024x660.png" target="_blank" title="https://cdn.thenewstack.io/media/2025/12/6a37ca07-image6-1024x660.png" ref="nofollow noopener noreferrer"><img src="https://cdn.thenewstack.io/media/2025/12/6a37ca07-image6-1024x660.png" alt="Initial app with first version" loading="lazy"/></a></p>
<p><em>å¸¦æœ‰ç¬¬ä¸€ä¸ªç‰ˆæœ¬çš„åˆå§‹åº”ç”¨ç¨‹åºã€‚</em></p>
<h2 data-id="heading-20"><strong>ç¬¬ 8 æ­¥ï¼šæµ‹è¯•è‡ªæˆ‘ä¿®å¤</strong></h2>
<p>æ˜¯æ—¶å€™æµ‹è¯•æ›´æ”¹å¹¶æŸ¥çœ‹è‡ªæˆ‘ä¿®å¤è¿‡ç¨‹çš„å®é™…è¿è¡Œæƒ…å†µäº†ã€‚</p>
<h3 data-id="heading-21"><strong>åˆ é™¤ Pod</strong></h3>
<p>ä»ç®€å•åœ°åˆ é™¤ä¸€ä¸ª Pod å¼€å§‹ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># See your pods</span>
kubectl get pods -l <span class="hljs-attr">app</span>=selfhealing-app

<span class="hljs-comment">#You should see 2 pods</span>
<span class="hljs-comment">#NAME                               READY   STATUS    RESTARTS      AGE</span>
<span class="hljs-comment">#selfhealing-app-58cb69c845-ndssn   1/1     Running   1 (47m ago)   43h</span>
<span class="hljs-comment">#selfhealing-app-58cb69c845-swsf6   1/1     Running   1 (47m ago)   43h</span>

<span class="hljs-comment"># Delete one pod</span>
kubectl delete pod -l <span class="hljs-attr">app</span>=selfhealing-app

<span class="hljs-comment"># Watch it get recreated immediately</span>
kubectl get pods -l <span class="hljs-attr">app</span>=selfhealing-app
<span class="hljs-comment">#Now, even after deleting your pods, you will still see 2 pods.</span>
</code></pre>
<p>è¿™æ˜¯åŸºæœ¬çš„ Kubernetes è¡Œä¸ºï¼Œä½†ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹ Argo CD çš„è‡ªæˆ‘ä¿®å¤â€¦â€¦</p>
<h3 data-id="heading-22"><strong>åˆ é™¤æ•´ä¸ªéƒ¨ç½²</strong></h3>
<p>ç°åœ¨ï¼Œæ›´è¿›ä¸€æ­¥ï¼Œåˆ é™¤æ‰€æœ‰å†…å®¹ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># The ultimate test - delete everything!</span>
kubectl delete deployment selfhealing-app
kubectl delete service selfhealing-app-service

<span class="hljs-comment"># Watch Argo CD recreate everything automatically</span>
kubectl get all -l <span class="hljs-attr">app</span>=selfhealing-app -w
</code></pre>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcdn.thenewstack.io%2Fmedia%2F2025%2F12%2F14466621-image3.png" target="_blank" title="https://cdn.thenewstack.io/media/2025/12/14466621-image3.png" ref="nofollow noopener noreferrer"><img src="https://cdn.thenewstack.io/media/2025/12/14466621-image3.png" alt="Argo CD app status, showing sync time and other details" loading="lazy"/></a></p>
<p><em>Argo CD åº”ç”¨ç¨‹åºçŠ¶æ€ï¼Œæ˜¾ç¤ºåŒæ­¥æ—¶é—´å’Œå…¶ä»–è¯¦ç»†ä¿¡æ¯ã€‚</em></p>
<p>Argo CD æ§åˆ¶é¢æ¿å°†æ˜¾ç¤ºåŒæ­¥æ—¶é—´ä¸ºâ€œå‡ ç§’å‰â€ã€‚è¿™è¡¨æ˜å®ƒå·²ç»åŒæ­¥å¹¶å†æ¬¡åˆ›å»ºäº†åº”ç”¨ç¨‹åºã€‚æ¢å¥è¯è¯´ï¼ŒArgo CD ç¡®ä¿ç°å®å§‹ç»ˆä¸ Git åŒ¹é…ã€‚</p>
<h2 data-id="heading-23"><strong>ç¬¬ 9 æ­¥ï¼šè¿›è¡Œå®é™…æ›´æ–°ï¼ˆGitOps æ–¹å¼ï¼‰</strong></h2>
<p>ç°åœ¨ï¼Œè¿›è¡Œåˆæ³•æ›´æ”¹ä»¥æŸ¥çœ‹ GitOps å¦‚ä½•å¤„ç†æ›´æ–°ã€‚</p>
<h3 data-id="heading-24"><strong>æ›´æ–°ä½ çš„åº”ç”¨ç¨‹åº</strong></h3>
<p>ç¼–è¾‘ <code>src/App.js</code> å¹¶æ›´æ”¹ï¼š</p>
<pre><code class="hljs language-less" lang="less">&lt;<span class="hljs-selector-tag">p</span>&gt;ğŸ·ï¸ <span class="hljs-selector-tag">Version</span>: <span class="hljs-number">2.0</span><span class="hljs-selector-class">.0</span> <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">Updated</span> <span class="hljs-selector-tag">via</span> <span class="hljs-selector-tag">GitOps</span>!&lt;/<span class="hljs-selector-tag">p</span>&gt;
</code></pre>
<p>æ­¤æ›´æ–°åæ˜ äº†åº”ç”¨ç¨‹åºçš„æ–°ç‰ˆæœ¬ã€‚ä¸€ä¸ªç®€å•çš„æ›´æ”¹ã€‚</p>
<h3 data-id="heading-25"><strong>æ„å»ºå¹¶æ¨é€æ–°ç‰ˆæœ¬</strong></h3>
<p>ç°åœ¨ï¼Œåˆ›å»ºæ–°çš„ Docker æ„å»ºå¹¶å°†å…¶æ¨é€åˆ° Docker Hubã€‚å¦å¤–ï¼Œå°†æºä»£ç æ¨é€åˆ° GitHubã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> ~/projects/my-selfhealing-app

<span class="hljs-comment"># Build and push new version</span>
docker build -t YOUR_DOCKERHUB_USERNAME/selfhealing-app:v2.0.0 .
docker push YOUR_DOCKERHUB_USERNAME/selfhealing-app:v2.0.0

<span class="hljs-comment"># Commit app changes</span>
git add .
git commit -m <span class="hljs-string">"Update to version 2.0.0"</span>
git push origin main
</code></pre>
<h3 data-id="heading-26"><strong>æ›´æ–° GitOps é…ç½®</strong></h3>
<p>æ¥ä¸‹æ¥ï¼Œæ‰“å¼€ GitOps å­˜å‚¨åº“å¹¶ä½¿ç”¨æ›´æ–°çš„ <code>app/deployment.yaml</code> æ–‡ä»¶ï¼Œæ›´æ–° <code>app/deployment.yaml</code> æ–‡ä»¶ä¸­æ–° Docker é•œåƒçš„ <code>image</code> è·¯å¾„ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">image: YOUR_DOCKERHUB_USERNAME/selfhealing-app:v2<span class="hljs-number">.0</span><span class="hljs-number">.0</span>
</code></pre>
<p>æ¥ä¸‹æ¥ï¼Œå°†æ›´æ”¹æ¨é€åˆ° GitOps ä»“åº“ã€‚</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># Commit the configuration change</span>
git add .
git commit -m <span class="hljs-string">"Deploy version 2.0.0"</span>
git <span class="hljs-keyword">push</span> origin main
</code></pre>
<h3 data-id="heading-27"><strong>è§‚å¯Ÿè‡ªåŠ¨éƒ¨ç½²</strong></h3>
<p>å‡ åˆ†é’Ÿå†…ï¼ŒArgo CD å°†ï¼š</p>
<ol>
<li>æ³¨æ„åˆ° Git å­˜å‚¨åº“å·²æ›´æ”¹ã€‚</li>
<li>æ‹‰å–æ–°é…ç½®ã€‚</li>
<li>æ›´æ–°æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºã€‚</li>
<li>åœ¨ç”¨æˆ·ç•Œé¢ä¸­æ˜¾ç¤ºâ€œå·²åŒæ­¥â€çŠ¶æ€ã€‚</li>
</ol>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒArgo CD æ¯ä¸‰åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡æ›´æ”¹ã€‚ä½ å¯ä»¥è°ƒæ•´æ­¤è®¾ç½®ä»¥ä½¿å…¶æ£€æŸ¥æ›´å¿«ï¼ˆæ¥è¿‘å®æ—¶ï¼‰æˆ–æ›´æ…¢ï¼ˆä¸é‚£ä¹ˆé¢‘ç¹ï¼‰ã€‚</p>
<p>è®¿é—® <code>http://localhost:3000</code> æŸ¥çœ‹ä½ æ›´æ–°åçš„åº”ç”¨ç¨‹åºã€‚</p>
<p>æ£€æŸ¥ä¹‹å‰åŠ¡å¿…è¿›è¡Œç«¯å£è½¬å‘ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript">kubectl port-forward svc/selfhealing-app-service <span class="hljs-number">3000</span>:<span class="hljs-number">80</span> &gt; <span class="hljs-regexp">/dev/</span><span class="hljs-literal">null</span> <span class="hljs-number">2</span>&gt;&amp;<span class="hljs-number">1</span> &amp;
</code></pre>
<p>ç°åœ¨ï¼Œä½ å°†çœ‹åˆ°æ›´æ–°åçš„ç”¨æˆ·ç•Œé¢ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcdn.thenewstack.io%2Fmedia%2F2025%2F12%2F8c5a29df-image4-1024x855.png" target="_blank" title="https://cdn.thenewstack.io/media/2025/12/8c5a29df-image4-1024x855.png" ref="nofollow noopener noreferrer"><img src="https://cdn.thenewstack.io/media/2025/12/8c5a29df-image4-1024x855.png" alt="Final app showing self-healed state with new version" loading="lazy"/></a></p>
<p><em>æ˜¾ç¤ºå…·æœ‰æ–°ç‰ˆæœ¬çš„è‡ªæˆ‘ä¿®å¤çŠ¶æ€çš„æœ€ç»ˆåº”ç”¨ç¨‹åºã€‚</em></p>
<p>æ­¤å±å¹•è¡¨ç¤ºä½ å·²å®Œæˆ GitOps è®¾ç½®ã€‚ç°åœ¨ï¼Œä½ çš„åº”ç”¨ç¨‹åºå°†è‡ªåŠ¨éƒ¨ç½²å¹¶åœ¨éœ€è¦æ—¶è‡ªæˆ‘ä¿®å¤ã€‚</p>
<h2 data-id="heading-28"><strong>ç†è§£è‡ªæˆ‘ä¿®å¤çš„é­”åŠ›</strong></h2>
<p>ä»¥ä¸‹æ˜¯ä½¿è‡ªæˆ‘ä¿®å¤æˆä¸ºå¯èƒ½çš„å·¥ä½œæµç¨‹ï¼š</p>
<ol>
<li>Argo CD æŒç»­ç›‘æ§ Git å­˜å‚¨åº“ã€‚å®ƒè¿˜ç›‘æ§ä½ çš„ Kubernetes é›†ç¾¤ã€‚</li>
<li>å®ƒæŒç»­æ¯”è¾ƒ Git ä¸­å®šä¹‰çš„é…ç½®å’Œå®é™…çš„ Kubernetes ç»“æ„ã€‚</li>
<li>å¦‚æœå‘ç°å·®å¼‚ï¼Œå®ƒä¼šå‘ Kubernetes å‘å‡ºä¿¡å·ï¼Œä½¿å…¶æ ¹æ® Git ä¸­çš„å®šä¹‰è¿›è¡Œè°ƒæ•´ã€‚</li>
</ol>
<p>è¿™å°±æ˜¯è‡ªæˆ‘ä¿®å¤è¿‡ç¨‹ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcdn.thenewstack.io%2Fmedia%2F2025%2F12%2F64bbc127-image5.png" target="_blank" title="https://cdn.thenewstack.io/media/2025/12/64bbc127-image5.png" ref="nofollow noopener noreferrer"><img src="https://cdn.thenewstack.io/media/2025/12/64bbc127-image5.png" alt="Image showing GitOps workflow" loading="lazy"/></a></p>
<p><em>æ˜¾ç¤º GitOps å·¥ä½œæµç¨‹çš„å›¾ç‰‡ã€‚</em></p>
<h2 data-id="heading-29"><strong>GitOps æ˜¯æœªæ¥ï¼ˆä¹Ÿæ˜¯ç°åœ¨ï¼‰</strong></h2>
<p>æ¯æ¬¡ä½ æ¨é€åˆ° Gitï¼Œä½ çš„åº”ç”¨ç¨‹åºéƒ½ä¼šæ›´æ–°ã€‚å½“ç”Ÿäº§åœæ­¢æ—¶ï¼Œä½ çš„åº”ç”¨ç¨‹åºä¼šè‡ªæˆ‘ä¿®å¤ã€‚è¿™ä¸ä»…ä»…æ˜¯éƒ¨ç½²è‡ªåŠ¨åŒ–ã€‚è¿™æ˜¯ä¸€ç§è‡ªæˆ‘ä¿®å¤çš„åŸºç¡€è®¾æ–½ã€‚å®ƒä¼šè‡ªè¡Œå¤„ç†ï¼ŒåŒæ—¶ä¸ºä½ è…¾å‡ºæ—¶é—´æ¥å¤„ç†å…¶ä»–äº‹æƒ…ã€‚è¿™å°±æ˜¯ GitOps çš„åŠ›é‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•åœ¨ C# ä¸­åˆ›å»ºã€è¯»å–å’Œæ›´æ–° Excel æ–‡æ¡£]]></title>    <link>https://juejin.cn/post/7582438809378832426</link>    <guid>https://juejin.cn/post/7582438809378832426</guid>    <pubDate>2025-12-12T02:00:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582438809378832426" data-draft-id="7582422766731591723" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•åœ¨ C# ä¸­åˆ›å»ºã€è¯»å–å’Œæ›´æ–° Excel æ–‡æ¡£"/> <meta itemprop="keywords" content="åç«¯,Excel,C#"/> <meta itemprop="datePublished" content="2025-12-12T02:00:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¼ºç‚¹å†…å‘"/> <meta itemprop="url" content="https://juejin.cn/user/3414438228006112"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•åœ¨ C# ä¸­åˆ›å»ºã€è¯»å–å’Œæ›´æ–° Excel æ–‡æ¡£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3414438228006112/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¼ºç‚¹å†…å‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T02:00:35.000Z" title="Fri Dec 12 2025 02:00:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¦‚ä½•åœ¨ C# ä¸­åˆ›å»ºã€è¯»å–å’Œæ›´æ–° Excel æ–‡æ¡£</h2>
<p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼ŒC# æ“ä½œ Excel æ–‡æ¡£æ˜¯æ™®éä¸”é‡è¦çš„éœ€æ±‚ã€‚æ— è®ºæ˜¯æ•°æ®å¯¼å…¥å¯¼å‡ºã€æŠ¥è¡¨ç”Ÿæˆï¼Œè¿˜æ˜¯æ•°æ®åˆ†æï¼ŒExcel éƒ½æ‰®æ¼”ç€ä¸å¯æˆ–ç¼ºçš„è§’è‰²ã€‚ç„¶è€Œï¼Œæ‰‹åŠ¨å¤„ç†å¤§é‡æ•°æ®ä¸ä»…æ•ˆç‡ä½ä¸‹ï¼Œè¿˜ææ˜“å‡ºé”™ã€‚ä¼ ç»Ÿçš„ C# æ“ä½œ Excel çš„æ–¹å¼ï¼Œå¦‚ COM Interopï¼Œåˆå­˜åœ¨éƒ¨ç½²å¤æ‚ã€ä¾èµ– Office ç¯å¢ƒä»¥åŠæ€§èƒ½ç“¶é¢ˆç­‰è¯¸å¤šé™åˆ¶ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨å¦‚ä½•åœ¨ C# ä¸­é«˜æ•ˆåœ°åˆ›å»ºã€è¯»å–å’Œæ›´æ–° Excel æ–‡æ¡£ï¼Œå‘Šåˆ«ä¼ ç»Ÿæ–¹æ³•çš„ç¹çä¸å±€é™ã€‚æˆ‘ä»¬å°†é‡ç‚¹ä»‹ç»å¦‚ä½•åˆ©ç”¨å¼ºå¤§çš„ç¬¬ä¸‰æ–¹åº“ Spire.XLS for .NETï¼Œä»¥å…¶å‹å¥½çš„ API å’Œå‡ºè‰²çš„æ€§èƒ½ï¼Œç®€åŒ–å¤æ‚çš„ Excel æ–‡ä»¶æ“ä½œï¼ŒåŠ©æ‚¨è½»æ¾é©¾é©­æ•°æ®ç®¡ç†ã€‚</p>
<hr/>
<h3 data-id="heading-1">å‘Šåˆ«ç¹çï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªé«˜æ•ˆçš„Excelæ“ä½œåº“ï¼Ÿ</h3>
<p>ç›´æ¥æ“ä½œ Office COM Interop æ¥å®ç° <strong>C# Excel CRUD</strong>ï¼ˆåˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤ï¼‰åŠŸèƒ½ï¼Œå¾€å¾€ä¼šå¸¦æ¥ä¸€ç³»åˆ—é—®é¢˜ï¼šå®ƒè¦æ±‚ç›®æ ‡æœºå™¨å®‰è£…æœ‰ Office å¥—ä»¶ï¼Œéƒ¨ç½²è¿‡ç¨‹å¤æ‚ä¸”å®¹æ˜“å‡ºç°ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜ï¼›æ€§èƒ½ä¸Šï¼ŒCOM Interop åœ¨å¤„ç†å¤§é‡æ•°æ®æ—¶è¡¨ç°ä¸ä½³ï¼›æ­¤å¤–ï¼Œå®ƒä¹Ÿä¸æ”¯æŒ .NET Core ç­‰è·¨å¹³å°ç¯å¢ƒã€‚</p>
<p>é¢å¯¹è¿™äº›æŒ‘æˆ˜ï¼Œé€‰æ‹©ä¸€ä¸ªé«˜æ•ˆçš„ç¬¬ä¸‰æ–¹åº“å˜å¾—å°¤ä¸ºé‡è¦ã€‚ä¾‹å¦‚ï¼Œ<code>Spire.XLS for .NET</code> è¿™æ ·çš„åº“ï¼Œèƒ½å¤Ÿç‹¬ç«‹è¿è¡Œï¼Œä¸ä¾èµ– Office å®‰è£…ï¼Œæä¾›é«˜æ€§èƒ½çš„æ•°æ®å¤„ç†èƒ½åŠ›ï¼Œæ‹¥æœ‰ç›´è§‚æ˜“ç”¨çš„ APIï¼Œå¹¶ä¸”å®Œç¾æ”¯æŒ .NET Frameworkã€.NET Core ä»¥åŠ .NET 5+ï¼Œæå¤§åœ°æå‡äº†Excelæ–‡æ¡£æ“ä½œçš„å¼€å‘æ•ˆç‡å’Œç”¨æˆ·ä½“éªŒã€‚</p>
<hr/>
<h3 data-id="heading-2">æ ¸å¿ƒå®è·µï¼šä½¿ç”¨Spire.XLS for .NETè¿›è¡ŒExcelæ–‡ä»¶æ“ä½œ</h3>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é€šè¿‡å…·ä½“çš„ä»£ç ç¤ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ <code>Spire.XLS for .NET</code> å®ç° <strong>Create Read Update Excel</strong> çš„æ ¸å¿ƒåŠŸèƒ½ã€‚</p>
<h4 data-id="heading-3">1. ç¯å¢ƒå‡†å¤‡ä¸å®‰è£…</h4>
<p>é¦–å…ˆï¼Œæ‚¨éœ€è¦é€šè¿‡ NuGet åŒ…ç®¡ç†å™¨å®‰è£… <code>Spire.XLS for .NET</code>ã€‚åœ¨æ‚¨çš„é¡¹ç›®ä¸­ï¼Œå³é”®ç‚¹å‡»â€œä¾èµ–é¡¹â€æˆ–â€œå¼•ç”¨â€ï¼Œé€‰æ‹©â€œç®¡ç† NuGet åŒ…â€ï¼Œæœç´¢ <code>Spire.XLS</code> å¹¶å®‰è£…å³å¯ã€‚æˆ–è€…åœ¨åŒ…ç®¡ç†å™¨æ§åˆ¶å°ä¸­è¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">Install-Package Spire.XLS
</code></pre>
<h4 data-id="heading-4">2. åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„Excelæ–‡æ¡£</h4>
<p>åˆ›å»ºä¸€ä¸ªæ–°çš„ Excel å·¥ä½œç°¿ï¼Œå¹¶å¡«å……ä¸€äº›æ•°æ®ï¼Œæ˜¯æ•°æ®å¯¼å‡ºçš„åŸºç¡€ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„å·¥ä½œç°¿å¯¹è±¡</span>
Workbook workbook = <span class="hljs-keyword">new</span> Workbook();

<span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªç©ºçš„å·¥ä½œè¡¨</span>
workbook.CreateEmptySheets(<span class="hljs-number">1</span>);

<span class="hljs-comment">// è·å–ç¬¬ä¸€ä¸ªå·¥ä½œè¡¨çš„å¼•ç”¨</span>
Worksheet sheet = workbook.Worksheets[<span class="hljs-number">0</span>];

<span class="hljs-comment">// å¡«å……ä¸€äº›æ•°æ®</span>
sheet.Range[<span class="hljs-string">"A1"</span>].Text = <span class="hljs-string">"å§“å"</span>;
sheet.Range[<span class="hljs-string">"B1"</span>].Text = <span class="hljs-string">"å¹´é¾„"</span>;
sheet.Range[<span class="hljs-string">"A2"</span>].Text = <span class="hljs-string">"å¼ ä¸‰"</span>;
sheet.Range[<span class="hljs-string">"B2"</span>].NumberValue = <span class="hljs-number">30</span>;
sheet.Range[<span class="hljs-string">"A3"</span>].Text = <span class="hljs-string">"æå››"</span>;
sheet.Range[<span class="hljs-string">"B3"</span>].NumberValue = <span class="hljs-number">25</span>;

<span class="hljs-comment">// ä¿å­˜åˆ°æ–‡ä»¶</span>
<span class="hljs-built_in">string</span> filePath = <span class="hljs-string">"NewExcelDocument.xlsx"</span>;
workbook.SaveToFile(filePath, ExcelVersion.Version2016);
workbook.Dispose();
Console.WriteLine(<span class="hljs-string">$"å·²åˆ›å»ºæ–°Excelæ–‡ä»¶: <span class="hljs-subst">{filePath}</span>"</span>);
</code></pre>
<p><strong>å…³é”®API:</strong> <code>Workbook</code> ç”¨äºè¡¨ç¤ºæ•´ä¸ªExcelæ–‡ä»¶ï¼Œ<code>Worksheet</code> è¡¨ç¤ºå•ä¸ªå·¥ä½œè¡¨ï¼Œ<code>Range</code> ç”¨äºè®¿é—®å•å…ƒæ ¼æˆ–åŒºåŸŸï¼Œ<code>SaveToFile</code> ç”¨äºä¿å­˜æ–‡ä»¶ã€‚</p>
<h4 data-id="heading-5">3. è¯»å–ç°æœ‰Excelæ–‡æ¡£çš„æ•°æ®</h4>
<p>ä»ç°æœ‰ Excel æ–‡ä»¶ä¸­è¯»å–æ•°æ®æ˜¯æ•°æ®å¯¼å…¥å’Œåˆ†æçš„å…³é”®æ­¥éª¤ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŠ è½½ä¸€ä¸ªç°æœ‰çš„Excelæ–‡ä»¶</span>
Workbook workbook = <span class="hljs-keyword">new</span> Workbook();
workbook.LoadFromFile(<span class="hljs-string">"NewExcelDocument.xlsx"</span>);

<span class="hljs-comment">// è·å–ç¬¬ä¸€ä¸ªå·¥ä½œè¡¨</span>
Worksheet sheet = workbook.Worksheets[<span class="hljs-number">0</span>];

<span class="hljs-comment">// è¯»å–å•å…ƒæ ¼æ•°æ®</span>
<span class="hljs-built_in">string</span> name = sheet.Range[<span class="hljs-string">"A2"</span>].Text;
<span class="hljs-built_in">double</span> age = sheet.Range[<span class="hljs-string">"B2"</span>].NumberValue;

Console.WriteLine(<span class="hljs-string">$"è¯»å–åˆ°æ•°æ® - å§“å: <span class="hljs-subst">{name}</span>, å¹´é¾„: <span class="hljs-subst">{age}</span>"</span>);

<span class="hljs-comment">// éå†è¯»å–æ‰€æœ‰æ•°æ® (å‡è®¾æœ‰æ•°æ®åŒºåŸŸ)</span>
<span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> row = <span class="hljs-number">1</span>; row &lt;= sheet.LastRow; row++)
{
    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> col = <span class="hljs-number">1</span>; col &lt;= sheet.LastColumn; col++)
    {
        Console.Write(<span class="hljs-string">$"<span class="hljs-subst">{sheet.Range[row, col].Text}</span>\t"</span>);
    }
    Console.WriteLine();
}

workbook.Dispose();
</code></pre>
<p><strong>å…³é”®API:</strong> <code>Workbook.LoadFromFile</code> ç”¨äºåŠ è½½æ–‡ä»¶ï¼Œ<code>Worksheet.Range</code> è®¿é—®å•å…ƒæ ¼ï¼Œ<code>Text</code> å’Œ <code>NumberValue</code> ç”¨äºè·å–ä¸åŒç±»å‹çš„æ•°æ®ã€‚</p>
<h4 data-id="heading-6">4. æ›´æ–°Excelæ–‡æ¡£ä¸­çš„æ•°æ®</h4>
<p>ä¿®æ”¹ç°æœ‰ Excel æ–‡ä»¶çš„æ•°æ®æ˜¯å¸¸è§çš„éœ€æ±‚ï¼ŒåŒ…æ‹¬æ›´æ”¹å•å…ƒæ ¼å†…å®¹ã€æ’å…¥è¡Œ/åˆ—ã€æ›´æ–°æ ·å¼ç­‰ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŠ è½½ä¸€ä¸ªç°æœ‰çš„Excelæ–‡ä»¶</span>
Workbook workbook = <span class="hljs-keyword">new</span> Workbook();
workbook.LoadFromFile(<span class="hljs-string">"NewExcelDocument.xlsx"</span>);

<span class="hljs-comment">// è·å–ç¬¬ä¸€ä¸ªå·¥ä½œè¡¨</span>
Worksheet sheet = workbook.Worksheets[<span class="hljs-number">0</span>];

<span class="hljs-comment">// ä¿®æ”¹ç‰¹å®šå•å…ƒæ ¼å†…å®¹</span>
sheet.Range[<span class="hljs-string">"B2"</span>].NumberValue = <span class="hljs-number">32</span>; <span class="hljs-comment">// å¼ ä¸‰çš„å¹´é¾„æ›´æ–°ä¸º32</span>

<span class="hljs-comment">// æ’å…¥æ–°è¡Œ</span>
sheet.InsertRow(<span class="hljs-number">4</span>); <span class="hljs-comment">// åœ¨ç¬¬4è¡Œæ’å…¥ä¸€è¡Œ</span>
sheet.Range[<span class="hljs-string">"A4"</span>].Text = <span class="hljs-string">"ç‹äº”"</span>;
sheet.Range[<span class="hljs-string">"B4"</span>].NumberValue = <span class="hljs-number">28</span>;

<span class="hljs-comment">// æ›´æ–°å•å…ƒæ ¼æ ·å¼</span>
sheet.Range[<span class="hljs-string">"A1:B1"</span>].Style.Font.IsBold = <span class="hljs-literal">true</span>; <span class="hljs-comment">// æ ‡é¢˜è¡ŒåŠ ç²—</span>
sheet.Range[<span class="hljs-string">"A1:B1"</span>].Style.KnownColor = ExcelKnownItems.LightYellow; <span class="hljs-comment">// æ ‡é¢˜è¡ŒèƒŒæ™¯è‰²</span>

<span class="hljs-comment">// ä¿å­˜ä¿®æ”¹</span>
<span class="hljs-built_in">string</span> updatedFilePath = <span class="hljs-string">"UpdatedExcelDocument.xlsx"</span>;
workbook.SaveToFile(updatedFilePath, ExcelVersion.Version2016);
workbook.Dispose();
Console.WriteLine(<span class="hljs-string">$"å·²æ›´æ–°Excelæ–‡ä»¶: <span class="hljs-subst">{updatedFilePath}</span>"</span>);
</code></pre>
<p><strong>å…³é”®API:</strong> <code>Worksheet.InsertRow</code> æ’å…¥è¡Œï¼Œ<code>Cell.Style</code> è®¿é—®å•å…ƒæ ¼æ ·å¼ï¼Œ<code>SaveToFile</code> ä¿å­˜ä¿®æ”¹ã€‚è¿™äº› API ä½¿å¾— <strong>Excel File Operations</strong> å˜å¾—ç›´è§‚ä¸”å¼ºå¤§ã€‚</p>
<hr/>
<h3 data-id="heading-7">æ€»ç»“</h3>
<p>é€šè¿‡æœ¬æ–‡çš„ä»‹ç»ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†å¦‚ä½•åˆ©ç”¨ <code>Spire.XLS for .NET</code> è¿™ä¸€é«˜æ•ˆçš„ç¬¬ä¸‰æ–¹åº“ï¼Œåœ¨ C# ä¸­è½»æ¾å®ç° Excel æ–‡æ¡£çš„åˆ›å»ºã€è¯»å–å’Œæ›´æ–°æ“ä½œã€‚å®ƒä¸ä»…è§£å†³äº†ä¼ ç»Ÿ COM Interop æ–¹å¼çš„è¯¸å¤šç—›ç‚¹ï¼Œè¿˜æä¾›äº†ç®€æ´ã€é«˜æ€§èƒ½ä¸”è·¨å¹³å°çš„è§£å†³æ–¹æ¡ˆï¼Œæ˜¾è‘—æå‡äº†å¼€å‘æ•ˆç‡ã€‚</p>
<p>æ— è®ºæ˜¯å¤„ç†å¤§é‡æ•°æ®ï¼Œè¿˜æ˜¯ç”Ÿæˆå¤æ‚æŠ¥è¡¨ï¼Œ<code>Spire.XLS for .NET</code> éƒ½èƒ½å¸®åŠ©å¼€å‘è€…å°†ç²¾åŠ›æ›´å¤šåœ°æŠ•å…¥åˆ°ä¸šåŠ¡é€»è¾‘çš„å®ç°ä¸Šï¼Œè€Œéç¹ççš„æ–‡ä»¶æ“ä½œç»†èŠ‚ã€‚æ‚¨ä¹Ÿå¯ä»¥åœ¨é¡¹ç›®ä¸­å°è¯•ä½¿ç”¨ <code>Spire.XLS for .NET</code>ï¼Œå®ƒå¿…å°†æ˜¯æ‚¨ C# Excel å¼€å‘çš„å¾—åŠ›åŠ©æ‰‹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JDKåŠ¨æ€ä»£ç†ä¸ºä»€ä¹ˆåŸºäºæ¥å£è€Œä¸åŸºäºç±»ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7582510826814242867</link>    <guid>https://juejin.cn/post/7582510826814242867</guid>    <pubDate>2025-12-12T03:38:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582510826814242867" data-draft-id="7581888578508472347" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JDKåŠ¨æ€ä»£ç†ä¸ºä»€ä¹ˆåŸºäºæ¥å£è€Œä¸åŸºäºç±»ï¼Ÿ"/> <meta itemprop="keywords" content="é¢è¯•,Java,åç«¯"/> <meta itemprop="datePublished" content="2025-12-12T03:38:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æƒ³ç”¨offeræ‰“ç‰Œ"/> <meta itemprop="url" content="https://juejin.cn/user/578781641968972"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JDKåŠ¨æ€ä»£ç†ä¸ºä»€ä¹ˆåŸºäºæ¥å£è€Œä¸åŸºäºç±»ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/578781641968972/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æƒ³ç”¨offeræ‰“ç‰Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T03:38:52.000Z" title="Fri Dec 12 2025 03:38:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨é¢è¯•ä¸­å¾ˆå¤šæ—¶å€™ä¼šå›ç­”åˆ°JDKåŠ¨æ€ä»£ç†çš„ç›¸å…³é—®é¢˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬éƒ½çŸ¥é“JDKåŠ¨æ€ä»£ç†æ˜¯åŸºäºæ¥å£çš„ï¼Œå¦‚æœè¢«ä»£ç†ç±»æ²¡æœ‰å®ç°æŸä¸ªæ¥å£ï¼Œåˆ™æ— æ³•ä½¿ç”¨JDKåŠ¨æ€ä»£ç†ï¼Œè€Œåªèƒ½é€‰æ‹©CGLIBä»£ç†ã€‚é‚£ä¹ˆJDKåŠ¨æ€ä»£ç†ä¸ºä»€ä¹ˆå¾—åŸºäºæ¥å£ï¼Œè€Œä¸èƒ½å…¼å®¹åŸºäºç±»å‘¢ï¼Ÿä¸‹é¢æˆ‘ä»¬ä¸€èµ·æ¥è®¨è®ºä¸€ä¸‹è¿™ä¸ªé—®é¢˜ã€‚</p>
<h2 data-id="heading-1">Javaä¸æ”¯æŒå¤šç»§æ‰¿æœºåˆ¶</h2>
<p>æˆ‘ä»¬çŸ¥é“Javaä¸æ”¯æŒå¤šç»§æ‰¿ï¼ˆä¸èƒ½åŒæ—¶ç»§æ‰¿ä¸¤ä¸ªç±»ï¼‰ï¼Œè€Œæ˜¯èƒ½é€šè¿‡å®ç°æ¥å£çš„æ–¹å¼å®ç°å¤šç»§æ‰¿çš„è¿™ç§å½¢å¼ã€‚</p>
<p>è€Œè¿™å°±æ˜¯JDKåŠ¨æ€ä»£ç†åŸºäºæ¥å£ï¼Œè€Œä¸èƒ½åŸºäºç±»çš„åŸå› ã€‚</p>
<p>JDK åŠ¨æ€ä»£ç†æ˜¯é€šè¿‡ <code>Proxy.newProxyInstance()</code> åœ¨è¿è¡ŒæœŸç”Ÿæˆä¸€ä¸ª â€œå®ç°ç›®æ ‡æ¥å£çš„ç±»â€ï¼Œè¯¥ä»£ç†ç±»çš„çˆ¶ç±»å§‹ç»ˆæ˜¯ <code>java.lang.reflect.Proxy</code>ï¼Œä¸æ˜¯ä½ çš„ç›®æ ‡ç±»ã€‚<strong>ä»£ç†ç±»ä¸èƒ½ç»§æ‰¿ç›®æ ‡ç±»</strong>,å®ƒä¸å¯èƒ½åŒæ—¶ extends Proxy å’Œ extends ä½ è‡ªå·±çš„ç±»ã€‚</p>
<pre><code class="hljs language-java" lang="java">ä»£ç†ç±» <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Proxy</span> implements ä½ çš„æ¥å£ä»¬
</code></pre>
<h2 data-id="heading-2">JDK åŠ¨æ€ä»£ç†æ˜¯æ€ä¹ˆç”Ÿæˆç±»çš„</h2>
<p>ok,ä¸Šé¢è¯´äº†JDKåŠ¨æ€ä»£ç†ä¸èƒ½åŸºäºç±»çš„æ ¹æœ¬åŸå› ï¼Œé‚£ä¹ˆä»–æ˜¯æ€ä¹ˆæ ¹æ®æˆ‘ä»¬è‡ªå·±çš„ç±»ç”Ÿæˆä»£ç†ç±»çš„å‘¢ï¼Ÿ</p>
<p>å¦‚æœä½ å†™ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">UserService</span> <span class="hljs-variable">proxy</span> <span class="hljs-operator">=</span> (UserService) Proxy.newProxyInstance(...);
</code></pre>
<p>JDK ä¼šåŠ¨æ€ç”Ÿæˆä¸€ä¸ªä»£ç†ç±»ï¼ˆå¯ä»¥ dump å‡ºæ–‡ä»¶çœ‹åˆ°ï¼‰ï¼Œç±»ä¼¼ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">$Proxy0</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Proxy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">create</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ‰€æœ‰æ–¹æ³•æœ€ç»ˆè½¬å‘åˆ° InvocationHandler.invoke(...)</span>
        h.invoke(<span class="hljs-built_in">this</span>, method, args);
    }
}
</code></pre>
<p>æ‰€ä»¥ä½ èƒ½çœ‹åˆ°å¾ˆé‡è¦çš„ä¸‰ç‚¹ï¼š</p>
<p>ç¬¬ä¸€ï¼Œä»£ç†ç±»å›ºå®šç»§æ‰¿ Proxy</p>
<p>ç¬¬äºŒï¼Œä»£ç†ç±»ä¸ä¼šç»§æ‰¿ä½ çš„å®ç°ç±»</p>
<p>ç¬¬ä¸‰ï¼Œä»£ç†ç±»é€šè¿‡å®ç°æ¥å£ï¼Œæ‰€æœ‰æ–¹æ³•éƒ½æ˜¯è½¬å‘åˆ° InvocationHandler</p>
<p>ä¸Šé¢å°±æ˜¯JDKåŠ¨æ€ä»£ç†æ€ä¹ˆç”Ÿæˆç±»çš„å¤§æ¦‚æµç¨‹</p>
<h2 data-id="heading-3">é‚£ä¸ºä»€ä¹ˆCGLIBå¯ä»¥åŸºäºç±»</h2>
<p>å› ä¸º CGLIB è·Ÿ JDK åŠ¨æ€ä»£ç†å®Œå…¨ä¸ä¸€æ ·ï¼Œå®ƒä¸æ˜¯ç”¨ Proxy APIï¼Œå®ƒæ˜¯ï¼š</p>
<ul>
<li><strong>ç›´æ¥ç”¨ ASM æ“ä½œå­—èŠ‚ç </strong></li>
<li><strong>ç”Ÿæˆç›®æ ‡ç±»çš„å­ç±»</strong></li>
<li><strong>é€šè¿‡é‡å†™æ–¹æ³•è¿›è¡Œæ‹¦æˆª</strong></li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl$$EnhancerByCGLIB</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">UserServiceImpl</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">create</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è°ƒç”¨ MethodInterceptor</span>
    }
}
</code></pre>
<h2 data-id="heading-4">é¢è¯•çº§æ€»ç»“â¤ï¸</h2>
<p>JDK åŠ¨æ€ä»£ç†ä¸èƒ½åŸºäºç±»çš„æ ¹æœ¬åŸå› ï¼š</p>
<blockquote>
<p><strong>JDK åŠ¨æ€ä»£ç†åŸºäºæ¥å£å®ç°ï¼Œç”Ÿæˆçš„ä»£ç†ç±»å›ºå®šç»§æ‰¿è‡ª Proxyï¼Œè€Œ Java ä¸æ”¯æŒåŒæ—¶ç»§æ‰¿ç›®æ ‡ç±»ï¼Œå› æ­¤æ— æ³•å¯¹ç±»æœ¬èº«åšä»£ç†ã€‚</strong></p>
</blockquote>
<p>CGLIB èƒ½ä»£ç†ç±»çš„åŸå› ï¼š</p>
<blockquote>
<p><strong>CGLIB ç›´æ¥ç”Ÿæˆç›®æ ‡ç±»çš„å­ç±»ï¼Œé€šè¿‡å­—èŠ‚ç å¢å¼ºå®ç°æ–¹æ³•æ‹¦æˆªï¼Œä¸ä¾èµ–æ¥å£ï¼Œä¸ä¾èµ– Proxy çš„çˆ¶ç±»ç»“æ„ã€‚</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ„å»ºè‡ªæˆ‘æå‡çš„AIæ™ºèƒ½ä½“ï¼šå®Œæ•´è®­ç»ƒæ¶æ„æŒ‡å—]]></title>    <link>https://juejin.cn/post/7582808491582259236</link>    <guid>https://juejin.cn/post/7582808491582259236</guid>    <pubDate>2025-12-12T03:40:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582808491582259236" data-draft-id="7582502441993306155" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ„å»ºè‡ªæˆ‘æå‡çš„AIæ™ºèƒ½ä½“ï¼šå®Œæ•´è®­ç»ƒæ¶æ„æŒ‡å—"/> <meta itemprop="keywords" content="OpenAI,AIGC,Agent"/> <meta itemprop="datePublished" content="2025-12-12T03:40:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å®‰æ€æ´¾Anspire"/> <meta itemprop="url" content="https://juejin.cn/user/3044964115417419"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ„å»ºè‡ªæˆ‘æå‡çš„AIæ™ºèƒ½ä½“ï¼šå®Œæ•´è®­ç»ƒæ¶æ„æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3044964115417419/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å®‰æ€æ´¾Anspire
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T03:40:04.000Z" title="Fri Dec 12 2025 03:40:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸš€ç®€ä»‹ï¼šæ¯å¤©éƒ½åœ¨å˜å¾—æ›´æ™ºèƒ½çš„AI</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œæœ‰ä¸€ä¸ªç”±AIç§‘å­¦å®¶ç»„æˆçš„å›¢é˜Ÿåœ¨ä½ çš„ç ”ç©¶å®éªŒå®¤é‡Œå·¥ä½œã€‚å…¶ä¸­ä¸€ä½ä¸“é•¿äºé—ä¼ å­¦ï¼Œå¦ä¸€ä½ä¸“é•¿äºè¯ç†å­¦ï¼Œè¿˜æœ‰ä¸€ä½èµ„æ·±ç ”ç©¶å‘˜è´Ÿè´£åè°ƒä¸€åˆ‡ã€‚è€Œæœ€å¸å¼•äººçš„éƒ¨åˆ†æ˜¯ï¼š<strong>è¿™ä¸ªå›¢é˜Ÿä¼šä»æ¯ä¸€æ¬¡å®éªŒä¸­å­¦ä¹ ï¼Œå¹¶ä¸”æ¯å¤©éƒ½åœ¨è¿›æ­¥ã€‚</strong></p>
<p>ä¼ ç»Ÿçš„AIç³»ç»Ÿä½¿ç”¨é™æ€æç¤ºâ€”â€”å®ƒä»¬éµå¾ªæŒ‡ä»¤ä½†ä»ä¸æ”¹è¿›ã€‚è‡ªæˆ‘æ”¹è¿›çš„æ™ºèƒ½ä½“åˆ™ä¸åŒï¼šå®ƒä»¬ä»ç»éªŒä¸­å­¦ä¹ ï¼Œç›¸äº’åä½œï¼Œå¹¶é€šè¿‡å¼ºåŒ–å­¦ä¹ ä¸æ–­ä¼˜åŒ–è‡ªèº«æ€§èƒ½ã€‚</p>
<p><strong>é˜…è¯»å®Œæœ¬æŒ‡å—åï¼Œæ‚¨å°†äº†è§£åˆ°ï¼š</strong></p>
<ul>
<li>
<p>ä¸ºä»€ä¹ˆé™æ€æç¤ºè¿˜ä¸å¤Ÿ</p>
</li>
<li>
<p>å¦‚ä½•æ„å»ºå¤šæ™ºèƒ½ä½“è®­ç»ƒç³»ç»Ÿ</p>
</li>
<li>
<p>ä¸‰ä¸ªå…³é”®ç®—æ³•ï¼ˆSFTã€PPOã€ä¸Šä¸‹æ–‡å¤šè‡‚è€è™æœºï¼‰</p>
</li>
<li>
<p>å¦‚ä½•å®ç°å¹¶è¯„ä¼°ä½ è‡ªå·±çš„è‡ªæˆ‘æ”¹è¿›æ™ºèƒ½ä½“</p>
</li>
</ul>
<h2 data-id="heading-1">ğŸ¤”é—®é¢˜ï¼šä¸ºä½•é™æ€æç¤ºä¼šå¤±è´¥</h2>
<h2 data-id="heading-2">å±€é™æ€§</h2>
<p>âŒ <strong>æ— é€‚åº”æ€§</strong> â€” æç¤ºæ— æ³•é€‚åº”æ–°æƒ…å†µ âŒ <strong>æ— å­¦ä¹ èƒ½åŠ›</strong> â€” åŒæ ·çš„é”™è¯¯æ°¸è¿œé‡å¤ âŒ <strong>æ— åä½œæ€§</strong> â€” æ¯ä¸ªAIç‹¬ç«‹å·¥ä½œ âŒ <strong>æ‰‹åŠ¨æ›´æ–°</strong> â€” ä½ éœ€è¦ä¸æ–­é‡å†™æç¤º</p>
<h2 data-id="heading-3">è§£å†³æ–¹æ¡ˆï¼šåˆ†å±‚è®­ç»ƒ</h2>
<p>æˆ‘ä»¬ä¸æ˜¯ç”¨ä¸€ç§ç®—æ³•æ¥å¤„ç†æ‰€æœ‰äº‹æƒ…ï¼Œè€Œæ˜¯ä½¿ç”¨ï¼š</p>
<ul>
<li>
<p><strong>ç›‘ç£å­¦ä¹ </strong>ç”¨äºåˆ›æ„å¤´è„‘é£æš´</p>
</li>
<li>
<p><strong>å¼ºåŒ–å­¦ä¹ </strong>ç”¨äºå¤æ‚å†³ç­–</p>
</li>
<li>
<p><strong>ä¸Šä¸‹æ–‡å¤šè‡‚è€è™æœº</strong>ç”¨äºæˆ˜ç•¥é€‰æ‹©</p>
</li>
</ul>
<p>ä¸å¦¨æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªçœŸæ­£çš„ç ”ç©¶å®éªŒå®¤ï¼šåˆçº§ç ”ç©¶äººå‘˜ã€èµ„æ·±ç§‘å­¦å®¶å’Œä¸€ä½å¯¼å¸ˆâ€”â€”æ¯ä¸ªäººçš„å­¦ä¹ æ–¹å¼éƒ½ä¸åŒã€‚</p>
<h2 data-id="heading-4">ğŸ—ï¸å®Œæ•´æ¶æ„</h2>
<p>è¿™å°±æ˜¯æˆ‘ä»¬æ­£åœ¨æ„å»ºçš„ç³»ç»Ÿï¼š</p>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb91af9b93954ac8ae53ac98f099705d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115604&amp;x-signature=gvseznvYHAC9DY9GSM%2FmiOUUSRM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">å±‚åˆ†è§£</h2>
<p><strong>1. åŸºç¡€å±‚</strong></p>
<ul>
<li>
<p>APIé…ç½®å’Œä¾èµ–é¡¹</p>
</li>
<li>
<p>çŸ¥è¯†åº“ï¼ˆPubMedQAæ•°æ®é›† â€” 1000ä¸ªåŒ»å­¦é—®é¢˜ï¼‰</p>
</li>
<li>
<p>å…±äº«å†…å­˜ç»“æ„ï¼ˆAgentStateï¼‰</p>
</li>
<li>
<p>ç§‘å­¦å·¥å…·ï¼ˆPubMedæœç´¢ã€è›‹ç™½è´¨æ•°æ®åº“ï¼‰</p>
</li>
</ul>
<p><strong>2. åˆ†å¸ƒå¼è®­ç»ƒç®¡é“</strong></p>
<ul>
<li>
<p>å¤šä¸ªæ™ºèƒ½ä½“å¹¶è¡Œè¿è¡Œï¼ˆ4ä¸ªå¹¶å‘æ»šåŠ¨ï¼‰</p>
</li>
<li>
<p>ä½“éªŒæ”¶é›†çš„ä¸­å¤®æ•°æ®å­˜å‚¨åº“</p>
</li>
<li>
<p>ç”¨äºç®¡ç†å¤šä¸ªæ¨¡å‹çš„å¤§è¯­è¨€æ¨¡å‹ä»£ç†</p>
</li>
</ul>
<p><strong>3. å¼ºåŒ–å­¦ä¹ è®­ç»ƒå±‚</strong></p>
<ul>
<li>
<p>SFTï¼šä»æˆåŠŸæ¡ˆä¾‹ä¸­å­¦ä¹ </p>
</li>
<li>
<p>PPOï¼šé€šè¿‡è¯•é”™å­¦ä¹ </p>
</li>
<li>
<p>ä¸Šä¸‹æ–‡å¤šè‡‚è€è™æœºï¼šå­¦ä¹ é€‰æ‹©ç­–ç•¥</p>
</li>
</ul>
<p><strong>4. å¯è§‚æµ‹æ€§å±‚</strong></p>
<ul>
<li>
<p>å®æ—¶å¥–åŠ±è¿½è¸ª</p>
</li>
<li>
<p>æ·±åº¦è¿½è¸ªåˆ†æ</p>
</li>
<li>
<p>ç»©æ•ˆä»ªè¡¨ç›˜</p>
</li>
</ul>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b34ac42244f346d094278f13e501401d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115604&amp;x-signature=Y9CsM5gmo8b1%2BeIa3ZgkzZMW0ig%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">ğŸ‘¥ è®¤è¯†æ‚¨çš„AIç ”ç©¶å›¢é˜Ÿ</h2>
<p>æˆ‘ä»¬æ­£åœ¨ç»„å»ºä¸€ä¸ªç”±9åä¸“ä¸šä»£ç†ç»„æˆçš„åˆ†å±‚å›¢é˜Ÿï¼š</p>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b83016b0df94610a09d3968edc344ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115604&amp;x-signature=3BuXObutlqjTJ%2Bb0rBECOV7a4cE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-7">å·¥ä½œæµç¨‹</h2>
<ol>
<li>
<p><strong>ä¸‰ååˆçº§ç ”ç©¶äººå‘˜</strong>ï¼ˆå¹¶è¡Œï¼‰é›†æ€å¹¿ç›Šæå‡ºå‡è®¾</p>
</li>
<li>
<p><strong>ä¸»ç®¡</strong>é€‰å‡ºæœ€æœ‰å‰é€”çš„</p>
</li>
<li>
<p><strong>é«˜çº§ç ”ç©¶äººå‘˜</strong>å®Œå–„å¹¶è®¾è®¡è¯¦ç»†æ–¹æ¡ˆ</p>
</li>
<li>
<p><strong>å®¡æ ¸å§”å‘˜ä¼š</strong>å¯¹è´¨é‡å’Œå®‰å…¨è¿›è¡Œè¯„ä¼°</p>
</li>
<li>
<p><strong>å¦‚æœéœ€è¦é‡å¤§ä¿®è®¢åˆ™</strong>å¾ªç¯è¿”å›</p>
</li>
<li>
<p><strong>PIåšå‡ºæœ€ç»ˆå†³å®š</strong>ï¼ˆç»§ç»­/åœæ­¢ï¼‰</p>
</li>
</ol>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dbbbaeb678ba43ff9e27892ae19c2e0d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115604&amp;x-signature=qTMO95fSnJg5brTgbuLLDlPWCAU%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-8">ğŸ¯ä¸‰ç§è®­ç»ƒç®—æ³•è¯¦è§£</h2>
<p>å±‚çº§ç»“æ„çš„æ¯ä¸€å±‚å­¦ä¹ æ–¹å¼éƒ½ä¸åŒï¼š</p>
<h2 data-id="heading-9">1ï¸âƒ£ æœ‰ç›‘ç£å¾®è°ƒï¼ˆSFTï¼‰â€”â€”åˆçº§ç ”ç©¶å‘˜</h2>
<p>**å®ƒçš„ä½œç”¨ï¼š**é€šè¿‡ç ”ç©¶æˆåŠŸæ¡ˆä¾‹æ¥å­¦ä¹ </p>
<p><strong>æµç¨‹ï¼š</strong></p>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2043f6f6ccc4485db4789be9b84c5d86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115604&amp;x-signature=ovkjHXuqJRMRCufC4w4ZJu32Z2Y%3D" alt="" loading="lazy"/></p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Before Training</span>
Hypothesis: <span class="hljs-string">"Study genes in Alzheimer's"</span>  <span class="hljs-comment"># Too vague</span>
<span class="hljs-comment"># After SFT Training</span>
Hypothesis: <span class="hljs-string">"Investigate the role of APOE4 variants in amyloid-beta 
clearance dysfunction in early-onset Alzheimer's disease, supported 
by recent findings in Nature Genetics (2024)"</span>  <span class="hljs-comment"># Specific, evidence-based</span>
</code></pre>
<p><strong>å…³é”®æŒ‡æ ‡ï¼š</strong></p>
<ul>
<li>
<p>è®­ç»ƒæ•°æ®ï¼šçº¦200ä¸ªé«˜è´¨é‡å¯¹è¯</p>
</li>
<li>
<p>è®­ç»ƒæ—¶é—´ï¼šåœ¨å•GPUä¸Š2 - 4å°æ—¶</p>
</li>
<li>
<p>æ”¹è¿›ï¼šå‡è®¾è´¨é‡æé«˜35%</p>
</li>
</ul>
<h2 data-id="heading-10">2ï¸âƒ£è¿‘ç«¯ç­–ç•¥ä¼˜åŒ–ï¼ˆPPOï¼‰â€”â€”é«˜çº§ç ”ç©¶å‘˜</h2>
<p>**å®ƒçš„ä½œç”¨ï¼š**é€šè¿‡æ¢ç´¢å’Œåé¦ˆè¿›è¡Œå­¦ä¹ </p>
<p><strong>å¥–åŠ±å‡½æ•°ï¼š</strong></p>
<p>æˆ‘ä»¬ä½¿ç”¨6ä¸ªç»´åº¦ï¼Œè€Œä¸æ˜¯ç®€å•çš„â€œå¥½/åâ€ï¼š</p>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae610438c95a4fa2a0dfb7137a12fd6c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115604&amp;x-signature=Sl3NzuGkepK3rxMkYsQ1%2BjQuANI%3D" alt="" loading="lazy"/></p>
<p><strong>å­¦ä¹ å¾ªç¯ï¼š</strong></p>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/671c757f92104c67b09d8430fc5ab5b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115604&amp;x-signature=ktrb%2FDcHHTat6twIgwFZajsXqjQ%3D" alt="" loading="lazy"/></p>
<p><strong>ç¤ºä¾‹ç»“æœï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># Training Progress</span>
Epoch 0:  Avg <span class="hljs-attr">Reward</span> = <span class="hljs-number">0.55</span>  <span class="hljs-comment"># Baseline (mediocre protocols)</span>
Epoch 25: Avg <span class="hljs-attr">Reward</span> = <span class="hljs-number">0.68</span>  <span class="hljs-comment"># Learning...</span>
Epoch 50: Avg <span class="hljs-attr">Reward</span> = <span class="hljs-number">0.77</span>  <span class="hljs-comment"># Strong improvement</span>
Epoch 100: Avg <span class="hljs-attr">Reward</span> = <span class="hljs-number">0.84</span> <span class="hljs-comment"># Expert-level performance!</span>
<span class="hljs-comment"># Improvement: +53%</span>
</code></pre>
<p><strong>å®é™…è¾“å‡ºæ¯”è¾ƒï¼š</strong></p>
<p>PPOä¹‹å‰ï¼š</p>
<p>æ ‡é¢˜ï¼šæµ‹è¯•è¯ç‰©åœ¨å°é¼ èº«ä¸Šæ­¥éª¤ï¼š 1. è·å–å°é¼ 2. ç»™è¯3. æµ‹é‡ç»“æœ</p>
<p>PPOä¹‹åï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Title:</span> <span class="hljs-string">Pre-Clinical</span> <span class="hljs-string">Evaluation</span> <span class="hljs-string">of</span> <span class="hljs-string">Liraglutide</span> <span class="hljs-string">on</span> <span class="hljs-string">Amyloid-Î²</span> 
       <span class="hljs-string">Pathology</span> <span class="hljs-string">in</span> <span class="hljs-string">5XFAD</span> <span class="hljs-string">Mouse</span> <span class="hljs-string">Model</span>
<span class="hljs-attr">Steps:</span>
  <span class="hljs-attr">1. Animal Model:</span> <span class="hljs-number">6</span><span class="hljs-string">-month-old</span> <span class="hljs-string">male</span> <span class="hljs-string">5XFAD</span> <span class="hljs-string">transgenic</span> <span class="hljs-string">mice</span> <span class="hljs-string">(n=20/group)</span>
  <span class="hljs-attr">2. Treatment:</span> <span class="hljs-string">Liraglutide</span> <span class="hljs-number">25</span> <span class="hljs-string">nmol/kg/day,</span> <span class="hljs-string">subcutaneous,</span> <span class="hljs-number">8</span> <span class="hljs-string">weeks</span>
  <span class="hljs-attr">3. Control Group:</span> <span class="hljs-string">Age-matched</span> <span class="hljs-string">saline</span> <span class="hljs-string">injections</span>
  <span class="hljs-attr">4. Primary Endpoint:</span> <span class="hljs-string">Immunohistochemistry</span> <span class="hljs-string">with</span> <span class="hljs-number">6E10</span> <span class="hljs-string">antibody</span>
  <span class="hljs-attr">5. Quantification:</span> <span class="hljs-string">Amyloid</span> <span class="hljs-string">plaque</span> <span class="hljs-string">burden</span> <span class="hljs-string">in</span> <span class="hljs-string">hippocampus/cortex</span>
  <span class="hljs-attr">6. Statistics:</span> <span class="hljs-string">Two-tailed</span> <span class="hljs-string">t-test,</span> <span class="hljs-string">significance</span> <span class="hljs-string">p&lt;0.05</span>
  
<span class="hljs-attr">Safety:</span> <span class="hljs-string">IACUC</span> <span class="hljs-string">approval</span> <span class="hljs-string">required.</span> <span class="hljs-string">Monitor</span> <span class="hljs-string">for</span> <span class="hljs-string">hypoglycemia.</span>
<span class="hljs-attr">Budget:</span> <span class="hljs-string">$45,000</span>
</code></pre>
<p>å·®å¼‚ååˆ†æ˜¾è‘—â€”â€”ä»æ¨¡ç³Šä¸æ¸…åˆ°è¾¾åˆ°å‘è¡¨æ ‡å‡†ã€‚</p>
<h2 data-id="heading-11">3ï¸âƒ£ ä¸Šä¸‹æ–‡å¤šè‡‚è€è™æœº â€” ç›‘ç£è€…</h2>
<p>**å®ƒçš„ä½œç”¨ï¼š**å­¦ä¹ å“ªäº›å‡è®¾èƒ½å¸¦æ¥æˆåŠŸ</p>
<p><strong>æŒ‘æˆ˜ï¼š</strong></p>
<p>æ¯ä¸ªç ”ç©¶å‘¨æœŸéƒ½ä¼šæå‡º3ä¸ªå‡è®¾ã€‚ä¸»ç®¡å¿…é¡»é€‰æ‹©ä¸€ä¸ªã€‚ä½†æ˜¯å“ªä¸ªä¼šå¯¼è‡´æœ€å¥½çš„ç»“æœå‘¢ï¼Ÿ</p>
<p><strong>å­¦ä¹ æ–¹å¼ï¼š</strong></p>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e15a2a54195741bf82dcb4c3aac29187~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115604&amp;x-signature=XpPKQcHo4sNvGfw0FBM3QoFl4Yg%3D" alt="" loading="lazy"/></p>
<p><strong>å­¦ä¹ æ¨¡å¼ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># After 200 decisions, the supervisor learns:</span>
<span class="hljs-attr">Pattern 1:</span> <span class="hljs-string">"Hypotheses mentioning specific proteins (APOE4, TREM2) 
            tend to succeed"</span> <span class="hljs-string">â†’</span> <span class="hljs-attr">Success rate:</span> <span class="hljs-number">82</span><span class="hljs-string">%</span>
<span class="hljs-attr">Pattern 2:</span> <span class="hljs-string">"Vague hypotheses about 'inflammation' or 'oxidative stress' 
            tend to fail"</span> <span class="hljs-string">â†’</span> <span class="hljs-attr">Success rate:</span> <span class="hljs-number">31</span><span class="hljs-string">%</span>
<span class="hljs-attr">Pattern 3:</span> <span class="hljs-string">"Drug repurposing ideas (GLP-1, metformin) show high impact"</span> 
            <span class="hljs-string">â†’</span> <span class="hljs-attr">Success rate:</span> <span class="hljs-number">88</span><span class="hljs-string">%</span>
</code></pre>
<p><strong>æ€§èƒ½ï¼š</strong></p>
<ul>
<li>
<p>è®­ç»ƒå‰ï¼šä¸ä¸“å®¶çš„å†³ç­–ä¸€è‡´æ€§ä¸º62%</p>
</li>
<li>
<p>è®­ç»ƒåï¼š88%çš„å†³ç­–ä¸€è‡´æ€§</p>
</li>
<li>
<p>æ”¹è¿›å¹…åº¦ï¼š+42%</p>
</li>
</ul>
<h2 data-id="heading-12">ğŸ› ï¸å®æ–½ï¼šåˆ†æ­¥æŒ‡å—</h2>
<h2 data-id="heading-13">ç¬¬ä¸€é˜¶æ®µï¼šè®¾ç½®</h2>
<p><strong>å®‰è£…ä¾èµ–é¡¹ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># Fast installation with uv</span>
uv pip install langchain langgraph langchain_openai \
               tavily-python agentlightning<span class="hljs-section">[verl,apo]</span> \
               unsloth<span class="hljs-section">[pt231]</span> datasets wandb pandas rich
</code></pre>
<p><strong>é…ç½®</strong> <strong>API</strong> <strong>å¯†é’¥ï¼š</strong></p>
<pre><code class="hljs language-lua" lang="lua">import <span class="hljs-built_in">os</span>
<span class="hljs-built_in">os</span>.environ[<span class="hljs-string">'OPENAI_API_KEY'</span>] = <span class="hljs-string">'your-key'</span>
<span class="hljs-built_in">os</span>.environ[<span class="hljs-string">'TAVILY_API_KEY'</span>] = <span class="hljs-string">'your-key'</span>
<span class="hljs-built_in">os</span>.environ[<span class="hljs-string">'WANDB_API_KEY'</span>] = <span class="hljs-string">'your-key'</span>
<span class="hljs-built_in">os</span>.environ[<span class="hljs-string">'LANGCHAIN_TRACING_V2'</span>] = <span class="hljs-string">'true'</span>
</code></pre>
<h2 data-id="heading-14">é˜¶æ®µ2ï¼šåŠ è½½æ•°æ®</h2>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> datasets <span class="hljs-keyword">import</span> load_dataset
<span class="hljs-keyword">def</span> <span class="hljs-title function_">load_research_data</span>():
    <span class="hljs-comment"># Load PubMedQA dataset</span>
    dataset = load_dataset(<span class="hljs-string">"pubmed_qa"</span>, <span class="hljs-string">"pqa_l"</span>)
    df = dataset[<span class="hljs-string">'train'</span>].to_pandas()
    
    tasks = []
    <span class="hljs-keyword">for</span> _, row <span class="hljs-keyword">in</span> df.iterrows():
        task = {
            <span class="hljs-string">'id'</span>: <span class="hljs-built_in">str</span>(row[<span class="hljs-string">'PUBMED_ID'</span>]),
            <span class="hljs-string">'goal'</span>: row[<span class="hljs-string">'QUESTION'</span>],  <span class="hljs-comment"># Research question</span>
            <span class="hljs-string">'context'</span>: <span class="hljs-string">" "</span>.join(row[<span class="hljs-string">'CONTEXTS'</span>]),  <span class="hljs-comment"># Scientific papers</span>
            <span class="hljs-string">'expected_decision'</span>: row[<span class="hljs-string">'final_decision'</span>]  <span class="hljs-comment"># Ground truth</span>
        }
        tasks.append(task)
    
    <span class="hljs-comment"># 80/20 split</span>
    split = <span class="hljs-built_in">int</span>(<span class="hljs-number">0.8</span> * <span class="hljs-built_in">len</span>(tasks))
    <span class="hljs-keyword">return</span> tasks[:split], tasks[split:]
train_data, val_data = load_research_data()
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ… Loaded <span class="hljs-subst">{<span class="hljs-built_in">len</span>(train_data)}</span> training samples"</span>)
</code></pre>
<h2 data-id="heading-15">é˜¶æ®µ3ï¼šå®šä¹‰ä»£ç†çŠ¶æ€</h2>
<p>å…±äº«å†…å­˜ç»“æ„ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> TypedDict, <span class="hljs-type">List</span>, <span class="hljs-type">Literal</span>
<span class="hljs-keyword">from</span> langchain_core.messages <span class="hljs-keyword">import</span> BaseMessage
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AgentState</span>(<span class="hljs-title class_ inherited__">TypedDict</span>):
    <span class="hljs-comment"># Control flow</span>
    messages: <span class="hljs-type">List</span>[BaseMessage]
    sender: <span class="hljs-built_in">str</span>  <span class="hljs-comment"># For ReAct loops</span>
    turn_count: <span class="hljs-built_in">int</span>
    
    <span class="hljs-comment"># Junior phase</span>
    initial_hypotheses: <span class="hljs-type">List</span>[<span class="hljs-built_in">dict</span>]
    
    <span class="hljs-comment"># Supervisor phase</span>
    selected_hypothesis: <span class="hljs-built_in">dict</span>
    
    <span class="hljs-comment"># Senior phase</span>
    experimental_protocol: <span class="hljs-built_in">dict</span>
    
    <span class="hljs-comment"># Review phase</span>
    peer_review: <span class="hljs-built_in">dict</span>
    safety_review: <span class="hljs-built_in">dict</span>
    
    <span class="hljs-comment"># Final output</span>
    final_decision: <span class="hljs-built_in">str</span>  <span class="hljs-comment"># "GO" or "NO-GO"</span>
    final_evaluation: <span class="hljs-built_in">dict</span>
</code></pre>
<h2 data-id="heading-16">é˜¶æ®µ4ï¼šæ„å»ºå¤šæ™ºèƒ½ä½“å›¾</h2>
<pre><code class="hljs language-scss" lang="scss">from langgraph<span class="hljs-selector-class">.graph</span> import StateGraph, START, END
def <span class="hljs-built_in">build_research_graph</span>():
    workflow = <span class="hljs-built_in">StateGraph</span>(AgentState)
    
    # Add all <span class="hljs-number">9</span> agent nodes
    for agent_name in [<span class="hljs-string">"Geneticist"</span>, <span class="hljs-string">"Pharmacologist"</span>, <span class="hljs-string">"Neurologist"</span>,
                       <span class="hljs-string">"Supervisor"</span>, <span class="hljs-string">"HypothesisRefiner"</span>, <span class="hljs-string">"ProtocolDesigner"</span>,
                       <span class="hljs-string">"PeerReviewer"</span>, <span class="hljs-string">"SafetyOfficer"</span>, <span class="hljs-string">"PrincipalInvestigator"</span>]:
        workflow.<span class="hljs-built_in">add_node</span>(agent_name, <span class="hljs-built_in">create_agent_node</span>(agent_name))
    
    # Add tool execution node
    workflow.<span class="hljs-built_in">add_node</span>(<span class="hljs-string">"execute_tools"</span>, <span class="hljs-built_in">ToolNode</span>(all_tools))
    
    # Define workflow edges
    workflow.<span class="hljs-built_in">add_edge</span>(START, <span class="hljs-string">"Geneticist"</span>)
    workflow.<span class="hljs-built_in">add_edge</span>(START, <span class="hljs-string">"Pharmacologist"</span>)
    workflow.<span class="hljs-built_in">add_edge</span>(START, <span class="hljs-string">"Neurologist"</span>)
    
    # All juniors â†’ Supervisor
    workflow.<span class="hljs-built_in">add_edge</span>(<span class="hljs-string">"Geneticist"</span>, <span class="hljs-string">"Supervisor"</span>)
    workflow.<span class="hljs-built_in">add_edge</span>(<span class="hljs-string">"Pharmacologist"</span>, <span class="hljs-string">"Supervisor"</span>)
    workflow.<span class="hljs-built_in">add_edge</span>(<span class="hljs-string">"Neurologist"</span>, <span class="hljs-string">"Supervisor"</span>)
    
    # Supervisor â†’ Senior team
    workflow.<span class="hljs-built_in">add_edge</span>(<span class="hljs-string">"Supervisor"</span>, <span class="hljs-string">"HypothesisRefiner"</span>)
    workflow.<span class="hljs-built_in">add_edge</span>(<span class="hljs-string">"HypothesisRefiner"</span>, <span class="hljs-string">"ProtocolDesigner"</span>)
    
    # Protocol â†’ Review board
    workflow.<span class="hljs-built_in">add_edge</span>(<span class="hljs-string">"ProtocolDesigner"</span>, <span class="hljs-string">"PeerReviewer"</span>)
    workflow.<span class="hljs-built_in">add_edge</span>(<span class="hljs-string">"PeerReviewer"</span>, <span class="hljs-string">"SafetyOfficer"</span>)
    
    # Conditional routing after review
    workflow.<span class="hljs-built_in">add_conditional_edges</span>(
        <span class="hljs-string">"SafetyOfficer"</span>,
        route_based_on_severity,  # Smart routing function
        {
            "CRITICAL": <span class="hljs-string">"HypothesisRefiner"</span>,  # Start over
            <span class="hljs-string">"MAJOR"</span>: <span class="hljs-string">"ProtocolDesigner"</span>,       # Revise protocol
            <span class="hljs-string">"APPROVED"</span>: <span class="hljs-string">"PrincipalInvestigator"</span> # Move forward
        }
    )
    
    workflow<span class="hljs-selector-class">.add_edge</span>("PrincipalInvestigator", END)
    
    return workflow<span class="hljs-selector-class">.compile</span>()
graph = <span class="hljs-built_in">build_research_graph</span>()
<span class="hljs-built_in">print</span>("âœ… Multi-agent workflow built!")
</code></pre>
<h2 data-id="heading-17">ç¬¬äº”é˜¶æ®µï¼šåˆ›å»ºå¥–åŠ±ç³»ç»Ÿ</h2>
<p><strong>å¤§è¯­è¨€æ¨¡å‹ä½œä¸ºè£åˆ¤çš„è¯„ä¼°å™¨ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">protocol_evaluator</span>(<span class="hljs-params">protocol, scientific_context</span>):
    <span class="hljs-string">"""Score protocol on 6 dimensions"""</span>
    
    evaluator_llm = ChatOpenAI(model=<span class="hljs-string">"mixtral-8x7b"</span>)
    
    prompt = <span class="hljs-string">f"""
    You are expert scientists evaluating this protocol:
    
    CONTEXT: <span class="hljs-subst">{scientific_context}</span>
    PROTOCOL: <span class="hljs-subst">{protocol}</span>
    
    Rate 0.0-1.0 on:
    - Novelty
    - Feasibility  
    - Impact
    - Clarity
    - Groundedness (evidence-based)
    - Efficiency
    """</span>
    
    scores = evaluator_llm.evaluate(prompt)
    <span class="hljs-keyword">return</span> scores
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_weighted_reward</span>(<span class="hljs-params">scores</span>):
    <span class="hljs-string">"""Combine scores with priorities"""</span>
    <span class="hljs-keyword">return</span> (
        <span class="hljs-number">0.10</span> * scores[<span class="hljs-string">'novelty'</span>] +
        <span class="hljs-number">0.20</span> * scores[<span class="hljs-string">'feasibility'</span>] +
        <span class="hljs-number">0.30</span> * scores[<span class="hljs-string">'impact'</span>] +      <span class="hljs-comment"># Most important!</span>
        <span class="hljs-number">0.15</span> * scores[<span class="hljs-string">'clarity'</span>] +
        <span class="hljs-number">0.20</span> * scores[<span class="hljs-string">'groundedness'</span>] +
        <span class="hljs-number">0.05</span> * scores[<span class="hljs-string">'efficiency'</span>]
    )
</code></pre>
<h2 data-id="heading-18">é˜¶æ®µ6ï¼šå»ºç«‹åŸ¹è®­åŸºç¡€è®¾æ–½</h2>
<p><strong>åˆ†å¸ƒå¼æ‰§è¡Œï¼š</strong></p>
<pre><code class="hljs language-makefile" lang="makefile">import agentlightning as agl
<span class="hljs-comment"># Run 4 agents in parallel</span>
strategy = {
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"cs"</span>,  <span class="hljs-comment"># Client-Server</span>
    <span class="hljs-string">"n_runners"</span>: 4,
    <span class="hljs-string">"server_port"</span>: 48000
}
<span class="hljs-comment"># LLM Proxy for model routing</span>
proxy_config = {
    <span class="hljs-string">"port"</span>: 48001,
    <span class="hljs-string">"model_list"</span>: [
        {<span class="hljs-string">"model_name"</span>: <span class="hljs-string">"Qwen/Qwen2-1.5B-Instruct"</span>, 
         <span class="hljs-string">"litellm_params"</span>: {<span class="hljs-string">"model"</span>: <span class="hljs-string">"ollama/qwen2:1.5b"</span>}},
        {<span class="hljs-string">"model_name"</span>: <span class="hljs-string">"senior_researcher_llm"</span>,  <span class="hljs-comment"># Training target</span>
         <span class="hljs-string">"litellm_params"</span>: {<span class="hljs-string">"model"</span>: <span class="hljs-string">"ollama/llama3"</span>}},
        {<span class="hljs-string">"model_name"</span>: <span class="hljs-string">"mistralai/Mixtral-8x7B-Instruct-v0.1"</span>,
         <span class="hljs-string">"litellm_params"</span>: {<span class="hljs-string">"model"</span>: <span class="hljs-string">"ollama/mixtral"</span>}}
    ]
}
<span class="hljs-comment"># Real-time monitoring</span>
monitoring_hook = WandbLoggingHook(project_name=<span class="hljs-string">"AI-Research-Lab"</span>)
</code></pre>
<h2 data-id="heading-19">é˜¶æ®µ7ï¼šä¸»è®­ç»ƒå¾ªç¯</h2>
<pre><code class="hljs language-ini" lang="ini">def full_training_pipeline():
    
    <span class="hljs-comment"># === Phase 1: Initial Data Collection ===</span>
    print("ğŸ“Š Phase 1: Gathering baseline data...")
    
    <span class="hljs-attr">trainer</span> = agl.Trainer(
        <span class="hljs-attr">n_runners</span>=<span class="hljs-number">4</span>,
        <span class="hljs-attr">strategy</span>=strategy,
        <span class="hljs-attr">hooks</span>=[monitoring_hook]
    )
    
    <span class="hljs-attr">agent</span> = MedicalResearchAgent(graph, protocol_evaluator)
    trainer.dev(agent, train_data<span class="hljs-section">[:10]</span>)  <span class="hljs-comment"># Quick 10-sample run</span>
    
    <span class="hljs-comment"># === Phase 2: Train Junior Researchers (SFT) ===</span>
    print("ğŸ“ Phase 2: Training juniors with SFT...")
    
    <span class="hljs-attr">sft_trainer</span> = agl.Trainer(algorithm=SFTOnSuccess())
    sft_trainer.fit(agent)  <span class="hljs-comment"># Learns from successful traces</span>
    
    <span class="hljs-comment"># === Phase 3: Train Senior Researchers (PPO) ===</span>
    print("ğŸ® Phase 3: Training seniors with PPO...")
    
    <span class="hljs-attr">ppo_config</span> = {
        "algorithm": {"adv_estimator": "grpo"},
        "data": {"train_batch_size": 4},
        "actor_rollout_ref": {
            "model": {"path": "meta-llama/Llama-3-8B-Instruct"}
        },
        "trainer": {
            "total_training_steps": 100,
            "test_freq": 10
        }
    }
    
    <span class="hljs-attr">ppo_trainer</span> = agl.Trainer(
        <span class="hljs-attr">algorithm</span>=agl.VERL(ppo_config),
        <span class="hljs-attr">n_runners</span>=<span class="hljs-number">4</span>,
        <span class="hljs-attr">strategy</span>=strategy,
        <span class="hljs-attr">adapter</span>=custom_adapter,
        <span class="hljs-attr">hooks</span>=[monitoring_hook]
    )
    
    ppo_trainer.fit(agent, train_data, val_data)
    
    <span class="hljs-comment"># === Phase 4: Train Supervisor (Contextual Bandit) ===</span>
    print("ğŸ° Phase 4: Training supervisor with bandit...")
    
    <span class="hljs-attr">bandit_trainer</span> = agl.Trainer(algorithm=ContextualBandit())
    bandit_trainer.fit(agent)
    
    print("âœ… Training complete!")
<span class="hljs-comment"># Execute</span>
full_training_pipeline()
</code></pre>
<h2 data-id="heading-20">ğŸ“Šè¯„ä¼°ä¸ç»“æœ</h2>
<h2 data-id="heading-21">å®šé‡æŒ‡æ ‡</h2>
<p><strong>å­¦ä¹ æ›²çº¿å¯è§†åŒ–ï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef844796c1c84cf5868c17f0b5fde8e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115604&amp;x-signature=IQ2LvQiRHBZwdHHig4jdQU9Etlg%3D" alt="" loading="lazy"/></p>
<p><strong>æœ€ç»ˆç»“æœè¡¨ï¼š</strong></p>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/900e3f5de7ee41078c757ad6f5dc18a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115604&amp;x-signature=eYsfPfFr9ggWr9JAXyMCy6XO6Qo%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-22">å®šæ€§åˆ†æ</h2>
<p><strong>å¹¶æ’æ¯”è¾ƒï¼š</strong></p>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7bd22b0c5f7437cb24737dd3be80856~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115604&amp;x-signature=PSYYi8JKTGoYdcg0q9UeCvyjq1M%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-23">ğŸ¯å…³é”®è¦ç‚¹ä¸æœ€ä½³å®è·µ</h2>
<h2 data-id="heading-24">âœ… åº”è¯¥åšçš„äº‹</h2>
<ol>
<li>
<p><strong>é’ˆå¯¹ä¸åŒè§’è‰²é‡‡ç”¨ä¸åŒç®—æ³•</strong> â€”â€” SFTç”¨äºåˆ›æ„ï¼ŒPPOç”¨äºå¤æ‚æ¨ç†ï¼ŒBanditsç”¨äºé€‰æ‹©</p>
</li>
<li>
<p><strong>è®¾è®¡å¤šç»´åº¦å¥–åŠ±</strong>â€”â€”æ•æ‰ç»†å¾®çš„è´¨é‡å·®å¼‚ï¼Œè€Œä¸ä»…ä»…æ˜¯â€œå¥½/åâ€</p>
</li>
<li>
<p><strong>å®ç°å¯è§‚æµ‹æ€§</strong> â€”â€” LangSmithè¿½è¸ª + W&amp;Bç›‘æ§</p>
</li>
<li>
<p><strong>ä»å°å¤„ç€æ‰‹ï¼Œé€æ­¥æ‰©å±•</strong> â€” åœ¨å…¨é¢è®­ç»ƒå‰ç”¨10ä¸ªæ ·æœ¬éªŒè¯æ¦‚å¿µ</p>
</li>
<li>
<p><strong>è¿‡æ»¤è®­ç»ƒæ•°æ®</strong> â€” ä»æˆåŠŸï¼ˆå¥–åŠ± â‰¥ 0.8ï¼‰ä¸­å­¦ä¹ ï¼Œè€Œéå¤±è´¥</p>
</li>
</ol>
<h2 data-id="heading-25">âŒ ç¦å¿Œäº‹é¡¹</h2>
<ol>
<li>
<p><strong>ä¸è¦ç”¨ä¸€ç§ç®—æ³•è§£å†³æ‰€æœ‰é—®é¢˜</strong>â€”â€”ä¸åŒçš„ä»»åŠ¡éœ€è¦ä¸åŒçš„å­¦ä¹ æ–¹æ³•</p>
</li>
<li>
<p><strong>ä¸è¦è·³è¿‡éªŒè¯</strong> â€” å§‹ç»ˆé¢„ç•™20%ç”¨äºæµ‹è¯•</p>
</li>
<li>
<p><strong>ä¸è¦å¿½è§†å®šæ€§è¯„ä¼°</strong>â€”â€”æ•°å­—å¹¶ä¸èƒ½è¯´æ˜å…¨éƒ¨æƒ…å†µ</p>
</li>
<li>
<p><strong>ä¸è¦åœ¨æ‰€æœ‰æ•°æ®ä¸Šè¿›è¡Œè®­ç»ƒ</strong> â€” è´¨é‡ &gt; æ•°é‡</p>
</li>
<li>
<p><strong>ä¸è¦å¿˜è®°å®‰å…¨é™åˆ¶</strong> â€” MAX_TURNSå¯é˜²æ­¢æ— é™å¾ªç¯</p>
</li>
</ol>
<h2 data-id="heading-26">ğŸ”´å¸¸è§é™·é˜±</h2>
<p>**é—®é¢˜ï¼š**PPOå¥–åŠ±åœ¨åˆå§‹æ”¹å–„åä¸‹é™</p>
<p>**è§£å†³æ–¹æ¡ˆï¼š**é™ä½å­¦ä¹ ç‡ï¼ˆ1e-6 â†’ 1e-7ï¼‰ï¼Œå¢åŠ æ‰¹é‡å¤§å°</p>
<p>**é—®é¢˜ï¼š**æ™ºèƒ½ä½“è™šæ„å‡ºä¸Šä¸‹æ–‡ä¸­ä¸å­˜åœ¨çš„äº‹å®</p>
<p>**è§£å†³æ–¹æ¡ˆï¼š**å¢åŠ æ¥åœ°æ€§æƒé‡ï¼ˆ0.20 â†’ 0.35ï¼‰ï¼Œæƒ©ç½šæ— æ ¹æ®çš„ä¸»å¼ </p>
<p>**é—®é¢˜ï¼š**è®­ç»ƒå› GPUå†…å­˜ä¸è¶³è€Œå´©æºƒ</p>
<p>**è§£å†³æ–¹æ¡ˆï¼š**ä½¿ç”¨æ¢¯åº¦æ£€æŸ¥ç‚¹ã€å‡å°æ‰¹é‡å¤§å°æˆ–ä½¿ç”¨4ä½é‡åŒ–</p>
<h2 data-id="heading-27">ğŸ’¡ æœ€ç»ˆæ€è€ƒ</h2>
<p>è‡ªæˆ‘æ”¹è¿›çš„AIæ™ºèƒ½ä½“ä»£è¡¨äº†æˆ‘ä»¬æ„å»ºAIç³»ç»Ÿæ–¹å¼çš„æ ¹æœ¬æ€§è½¬å˜ã€‚æˆ‘ä»¬ä¸å†æ‰‹åŠ¨ç¼–å†™æç¤ºå¹¶å¯„å¸Œæœ›äºå®ƒä»¬èƒ½èµ·ä½œç”¨ï¼Œè€Œæ˜¯åˆ›å»ºè¿™æ ·çš„ç³»ç»Ÿï¼š</p>
<p>âœ¨<strong>ä»ç»éªŒä¸­å­¦ä¹ </strong> ğŸ¤<strong>æ™ºèƒ½åä½œ</strong> ğŸ“ˆ<strong>æŒç»­æ”¹è¿›</strong> ğŸ¯<strong>ä¸ºå¤æ‚ç›®æ ‡ä¼˜åŒ–</strong></p>
<p>ä½ åœ¨è¿™é‡Œå­¦åˆ°çš„æ¡†æ¶â€”â€”ä½¿ç”¨ä¸“é—¨ç®—æ³•çš„åˆ†å±‚è®­ç»ƒâ€”â€”å…¶åº”ç”¨èŒƒå›´è¿œè¿œè¶…å‡ºåŒ»å­¦ç ”ç©¶ï¼š</p>
<ul>
<li>
<p><strong>è½¯ä»¶å·¥ç¨‹</strong>ï¼šåˆçº§å¼€å‘è€…ç¼–å†™ä»£ç ï¼Œèµ„æ·±å¼€å‘è€…å®¡æ ¸ï¼Œè´Ÿè´£äººåšå†³ç­–</p>
</li>
<li>
<p><strong>å†…å®¹åˆ›ä½œ</strong>ï¼šä½œè€…èµ·è‰ï¼Œç¼–è¾‘æ¶¦è‰²ï¼Œå‡ºç‰ˆè€…å®¡æ‰¹</p>
</li>
<li>
<p><strong>å•†ä¸šæˆ˜ç•¥</strong>ï¼šåˆ†æå¸ˆè´Ÿè´£ç ”ç©¶ï¼Œé¡¾é—®è´Ÿè´£ç»¼åˆï¼Œé«˜ç®¡è´Ÿè´£å†³ç­–</p>
</li>
</ul>
<p>æœªæ¥å¹¶ä¸åœ¨äºæ›´å¤§çš„æ¨¡å‹æˆ–æ›´é•¿çš„æç¤ºã€‚å®ƒåœ¨äº<strong>å­¦ä¼šå­¦ä¹ çš„æ™ºèƒ½ç³»ç»Ÿ</strong>ã€‚</p>
<p>ç°åœ¨å°±å»æ‰“é€ ä»¤äººæƒŠå¹çš„ä¸œè¥¿å§ï¼ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ¬¡ React é¡¹ç›® lock æ–‡ä»¶å†²çªä¿®å¤ï¼šä» Hook æŠ¥é”™åˆ° Vite é…ç½®ä¼˜åŒ–]]></title>    <link>https://juejin.cn/post/7582510826814210099</link>    <guid>https://juejin.cn/post/7582510826814210099</guid>    <pubDate>2025-12-12T03:37:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582510826814210099" data-draft-id="7581848286387044398" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ¬¡ React é¡¹ç›® lock æ–‡ä»¶å†²çªä¿®å¤ï¼šä» Hook æŠ¥é”™åˆ° Vite é…ç½®ä¼˜åŒ–"/> <meta itemprop="keywords" content="å‰ç«¯,å‰ç«¯å·¥ç¨‹åŒ–,Vite"/> <meta itemprop="datePublished" content="2025-12-12T03:37:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="eason_fan"/> <meta itemprop="url" content="https://juejin.cn/user/2995517308808877"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ¬¡ React é¡¹ç›® lock æ–‡ä»¶å†²çªä¿®å¤ï¼šä» Hook æŠ¥é”™åˆ° Vite é…ç½®ä¼˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2995517308808877/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    eason_fan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T03:37:04.000Z" title="Fri Dec 12 2025 03:37:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€æ¬¡ React é¡¹ç›® lock æ–‡ä»¶å†²çªä¿®å¤ï¼šä» Hook æŠ¥é”™åˆ° Vite é…ç½®ä¼˜åŒ–</h2>
<p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œåˆ†æ”¯åˆå¹¶æ˜¯é«˜é¢‘æ“ä½œï¼Œä½†ç¨æœ‰ä¸æ…å°±å¯èƒ½å¼•å‘ä¾èµ–ç›¸å…³çš„â€œè¿é”ååº”â€ã€‚æœ¬æ–‡è®°å½•äº†ä¸€æ¬¡ <code>rebase main</code> åå›  lock æ–‡ä»¶å†²çªï¼Œå¯¼è‡´ React Hook æŠ¥é”™çš„å®Œæ•´æ’æŸ¥ä¸è§£å†³è¿‡ç¨‹ï¼Œå¸Œæœ›èƒ½ä¸ºé‡åˆ°ç±»ä¼¼é—®é¢˜çš„å¼€å‘è€…æä¾›å‚è€ƒã€‚</p>
<h3 data-id="heading-1">ä¸€ã€èƒŒæ™¯ï¼šrebase main å¼•å‘çš„â€œæ„å¤–â€</h3>
<p>æœ€è¿‘åœ¨å¼€å‘ä¸€ä¸ªåŸºäº React + Vite + Mobx çš„é¡¹ç›®ï¼Œä¸ºäº†åŒæ­¥ä¸»åˆ†æ”¯çš„æœ€æ–°ä»£ç ï¼Œæˆ‘æ‰§è¡Œäº† <code>git rebase main</code> æ“ä½œã€‚è¿‡ç¨‹ä¸­é‡åˆ°äº† <code>package-lock.json</code> å†²çªï¼Œç”±äºå½“æ—¶æ€¥äºæ¨è¿›å¼€å‘ï¼Œæˆ‘ç›´æ¥æ‰‹åŠ¨ç¼–è¾‘äº†å†²çªæ–‡ä»¶ï¼Œä¿ç•™äº†åŒæ–¹çš„ä¾èµ–é…ç½®åæäº¤äº†ä»£ç ã€‚</p>
<p>æœ¬ä»¥ä¸ºåªæ˜¯ç®€å•çš„æ–‡ä»¶åˆå¹¶ï¼Œæ²¡æƒ³åˆ°å¯åŠ¨é¡¹ç›®åï¼Œæµè§ˆå™¨æ§åˆ¶å°ç›´æ¥æŠ›å‡ºäº†ä¸€è¿ä¸²æŠ¥é”™ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a12ec91c51d459cb7b171d1315f0660~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFzb25fZmFu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115424&amp;x-signature=%2BCnNsP9Zs%2FMNAgI4JU%2Bbe5tBAuY%3D" alt="img_v3_02sr_d84a55a3-57fb-4edb-b768-04c950fdd4hu.jpg" loading="lazy"/></p>
<p>æŠ¥é”™å †æ ˆæŒ‡å‘ <code>mobx-react-lite</code> ä¸­çš„ <code>useObserver</code> æ–¹æ³•ï¼Œæç¤º <code>useRef</code> æ— æ³•è¯»å– <code>null</code> å±æ€§ã€‚æ›´å¥‡æ€ªçš„æ˜¯ï¼Œè¿™äº›ä»£ç åœ¨ rebase å‰å®Œå…¨æ­£å¸¸ï¼Œæ²¡æœ‰ä»»ä½•è¯­æ³•æˆ–é€»è¾‘ä¿®æ”¹ã€‚</p>
<h3 data-id="heading-2">äºŒã€é—®é¢˜åˆ†æï¼šé”å®šæ ¸å¿ƒçŸ›ç›¾</h3>
<h4 data-id="heading-3">1. æ’é™¤ä»£ç é€»è¾‘é—®é¢˜</h4>
<p>é¦–å…ˆæ’æŸ¥ä¸šåŠ¡ä»£ç ï¼šè¿‘æœŸæœªä¿®æ”¹ Hook è°ƒç”¨é€»è¾‘ï¼Œæ‰€æœ‰ <code>useRef</code>ã€<code>useState</code> ç­‰ Hooks å‡ç¬¦åˆâ€œé¡¶å±‚è°ƒç”¨â€è§„åˆ™ï¼Œä¸”æœªåœ¨æ¡ä»¶ã€å¾ªç¯æˆ–äº‹ä»¶å¤„ç†å‡½æ•°ä¸­è°ƒç”¨ã€‚æ’é™¤ä»£ç æœ¬èº«çš„é—®é¢˜åï¼Œå°†ç›®å…‰èšç„¦åˆ°ä¾èµ–å’Œæ„å»ºé…ç½®ä¸Šã€‚</p>
<h4 data-id="heading-4">2. å®šä½ä¾èµ–å±‚é¢é—®é¢˜</h4>
<p>æ ¹æ® React å®˜æ–¹æ–‡æ¡£æç¤ºï¼ŒHook è°ƒç”¨å¼‚å¸¸çš„ä¸‰å¤§å¸¸è§åŸå› ï¼š</p>
<ol>
<li>è¿å Hooks ä½¿ç”¨è§„åˆ™ï¼ˆå·²æ’é™¤ï¼‰ï¼›</li>
<li>React ä¸æ¸²æŸ“å™¨ï¼ˆå¦‚ React DOMï¼‰ç‰ˆæœ¬ä¸åŒ¹é…ï¼›</li>
<li>é¡¹ç›®ä¸­å­˜åœ¨å¤šä¸ª React å®ä¾‹ã€‚</li>
</ol>
<p>ç»“åˆâ€œä»… lock æ–‡ä»¶å†²çªåå‡ºç°é—®é¢˜â€çš„åœºæ™¯ï¼Œé‡ç‚¹æ’æŸ¥åä¸¤ç‚¹ï¼š</p>
<ul>
<li>æ‰§è¡Œ <code>npm ls react react-dom</code> æŸ¥çœ‹ä¾èµ–æ ‘ï¼Œ
<ul>
<li>å‘ç°è¾“å‡ºä¸­ï¼ŒTerminal#1-14 æ˜¾ç¤ºé¢æ¿åŒæ—¶å­˜åœ¨ä¸¤ç‰ˆ mobx-react-lite ï¼šç›´æ¥ä¾èµ– 4.1.0 ï¼Œé€šè¿‡ mobx-react@9.2.1 é—´æ¥å¸¦å…¥ 4.1.1 ã€‚è¿™ä¼šè®©å®ƒä»¬å„è‡ªæ²¿ç€ä¸åŒçš„ä¾èµ–è§£æè·¯å¾„å»æ‰¾ react ï¼Œåœ¨å¤šå…¥å£/é¢„æ‰“åŒ…çš„æƒ…å†µä¸‹ï¼Œå¾ˆå®¹æ˜“æŠŠä¸¤ä»½ React æ‰“åˆ°åŒä¸€é¡µé¢ã€‚</li>
</ul>
</li>
<li>è¿›ä¸€æ­¥éªŒè¯ï¼šåœ¨æ‰“åŒ…æ–‡ä»¶ä¸­æœç´¢package.jsonä¸­çš„reactç‰ˆæœ¬å·18.3.1ï¼Œæˆ–è€…æœç´¢reactæºç ä¸­çš„ReactCurrentDispatchã€‚å¯ä»¥å‘ç°åˆäº†ä»£ç ä¹‹åï¼Œæ„å»ºäº§ç‰©ä¸¤ä¸ªchunkä¸­éƒ½æœ‰reactã€‚</li>
</ul>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/86f489e9a51940d88895e1c16651b204~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFzb25fZmFu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115424&amp;x-signature=IAgnfBYoAba%2BXDmHbRWeJ5SwC14%3D" alt="image.png" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ddf2a97a905e487587c9eb206517f6c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFzb25fZmFu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115424&amp;x-signature=jnhjYgER%2BtHe4hq%2BM5ca%2FW20lf4%3D" alt="img_v3_02sr_9d69706b-b957-48ec-8144-06036dc021hu.jpg" loading="lazy"/>
<p align="center">ä»£ç ä¿®æ”¹å‰çš„æ‰“åŒ…èµ„æº</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57544846fbbc4e5eb79dad4df9f79e73~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFzb25fZmFu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115424&amp;x-signature=XqBFde3Sq2dsh7UGjPZ7FZMiKRw%3D" alt="img_v3_02sr_8a12fa19-d116-403a-9e4d-74a9914ce9hu.jpg" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f847d944f4049f5a0ade97434fe1217~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFzb25fZmFu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766115424&amp;x-signature=uh4aAayIktGjpvyI7W3u1k6wnq4%3D" alt="img_v3_02sr_9d2d7185-de0b-474a-8b81-b6169247b3hu.jpg" loading="lazy"/></p>
<p align="center">ä»£ç ä¿®æ”¹åçš„æ‰“åŒ…èµ„æº</p>
<h4 data-id="heading-5">3. è¿½æº¯é—®é¢˜æ ¹æº</h4>
<p>lock æ–‡ä»¶çš„æ ¸å¿ƒä½œç”¨æ˜¯é”å®šä¾èµ–çš„å®‰è£…è·¯å¾„å’Œç‰ˆæœ¬ã€‚æ‰‹åŠ¨åˆå¹¶å†²çªæ—¶ï¼Œé”™è¯¯ä¿ç•™äº†ä¸åŒåˆ†æ”¯çš„ä¾èµ–é…ç½®ï¼Œå¯¼è‡´ <code>npm install</code> æ—¶å‡ºç°ä¾èµ–åµŒå¥—å®‰è£…ï¼š</p>
<ul>
<li>é¡¹ç›®å’Œé¡¹ç›®ä¾èµ–çš„åŒ…éƒ½ä¾èµ–äº†<code>mobx-react-lite</code>å¹¶ä¸”ç‰ˆæœ¬ä¸åŒã€‚</li>
<li>æ‰“åŒ…äº§ç‰©ä¸­ï¼Œä¸¤ä¸ªchunkä¸­å„è‡ªæœ‰ä¸€ä¸ªreact</li>
<li>è¿è¡Œæ—¶ï¼Œå°±äº§ç”Ÿäº†ä¸¤ä¸ªreactå®ä¾‹</li>
</ul>
<p>React Hooks çš„è¿è¡Œä¾èµ–å•ä¸€çš„è°ƒåº¦å™¨å®ä¾‹ï¼Œå½“ <code>mobx-react-lite</code> ä¸­çš„ <code>useObserver</code> è°ƒç”¨åµŒå¥—ä¾èµ–çš„ React å®ä¾‹æ—¶ï¼Œä¼šå› è°ƒåº¦å™¨ä¸åŒ¹é…å¯¼è‡´ Hook è°ƒç”¨å¤±æ•ˆï¼Œè¿›è€ŒæŠ›å‡º <code>useRef</code> è¯»å– <code>null</code> çš„é”™è¯¯ã€‚</p>
<h3 data-id="heading-6">ä¸‰ã€å°è¯•ä¿®æ”¹ï¼šä»ä¾èµ–åˆ°é…ç½®çš„é€æ­¥æ’æŸ¥</h3>
<h4 data-id="heading-7">1. é‡ç½®ä¾èµ–ï¼ˆé¦–æ¬¡å°è¯•å¤±è´¥ï¼‰</h4>
<p>é¦–å…ˆæƒ³åˆ°çš„æ˜¯ä¿®å¤ä¾èµ–æ ‘ï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ¸…é™¤æœ¬åœ°ä¾èµ–å’Œç¼“å­˜</span>
<span class="hljs-built_in">rm</span> -rf node_modules package-lock.json
npm cache clean --force
<span class="hljs-comment"># é‡æ–°å®‰è£…ä¾èµ–</span>
npm install
</code></pre>
<p>ä½†é‡æ–°å®‰è£…åï¼Œ<code>npm ls react</code> ä»æ˜¾ç¤ºå­˜åœ¨åµŒå¥—ç‰ˆæœ¬ã€‚æ¨æµ‹æ˜¯ <code>mobx-react-lite</code> çš„ä¾èµ–å£°æ˜ä¸­æœªå°† React è®¾ä¸º peerDependencyï¼Œå¯¼è‡´ npm è‡ªåŠ¨å®‰è£…å…¼å®¹ç‰ˆæœ¬çš„åµŒå¥—ä¾èµ–ã€‚</p>
<h4 data-id="heading-8">2. å¼ºåˆ¶ç»Ÿä¸€ä¾èµ–ç‰ˆæœ¬ï¼ˆéƒ¨åˆ†ç¼“è§£ï¼‰</h4>
<p>é€šè¿‡ <code>npm install react@18.2.0 react-dom@18.2.0 --force</code> å¼ºåˆ¶æŒ‡å®š React ç‰ˆæœ¬ï¼Œé‡æ–°å®‰è£…ååµŒå¥—ä¾èµ–æ¶ˆå¤±ã€‚ä½†å¯åŠ¨é¡¹ç›®åï¼Œä»å¶å°”å‡ºç° Hook æŠ¥é”™ï¼Œæ’æŸ¥å‘ç°æ˜¯ Vite å¼€å‘ç¯å¢ƒé¢„æ„å»ºæ—¶æœªæ­£ç¡®è¯†åˆ«ä¾èµ–ï¼Œå¯¼è‡´éƒ¨åˆ†ä»£ç ä»å¼•ç”¨æ—§ç‰ˆæœ¬ç¼“å­˜ã€‚</p>
<h4 data-id="heading-9">3. ä¼˜åŒ– Vite é…ç½®ï¼ˆæœ€ç»ˆçªç ´ï¼‰</h4>
<p>ç»“åˆä¹‹å‰å¯¹ Vite <code>dedupe</code> å’Œ <code>optimizeDeps</code> çš„äº†è§£ï¼Œæ„è¯†åˆ°éœ€è¦ä»æ„å»ºå±‚é¢ç¡®ä¿ä¾èµ–çš„å”¯ä¸€æ€§å’Œé¢„æ„å»ºçš„å®Œæ•´æ€§ï¼š</p>
<ul>
<li><code>resolve.dedupe</code>ï¼šå¼ºåˆ¶ Vite å°†æ‰€æœ‰ React ç›¸å…³ä¾èµ–è§£æä¸ºæ ¹ç›®å½•ç‰ˆæœ¬ï¼Œæœç»å¤šå®ä¾‹ï¼›</li>
<li><code>optimizeDeps.include</code>ï¼šå¼ºåˆ¶é¢„æ„å»ºæ ¸å¿ƒä¾èµ–ï¼Œé¿å…é¢„æ„å»ºæ¼æ£€å¯¼è‡´çš„ç¼“å­˜é—®é¢˜ã€‚</li>
</ul>
<h3 data-id="heading-10">å››ã€è§£å†³é—®é¢˜ï¼šæœ€ç»ˆç”Ÿæ•ˆçš„é…ç½®æ–¹æ¡ˆ</h3>
<h4 data-id="heading-11">1. å›ºåŒ– Vite é…ç½®</h4>
<p>ä¿®æ”¹ <code>vite.config.js</code>ï¼Œæ·»åŠ ä¾èµ–å»é‡å’Œé¢„æ„å»ºé…ç½®ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
<span class="hljs-keyword">import</span> react <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-react'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">react</span>()],
  <span class="hljs-attr">resolve</span>: {
    <span class="hljs-comment">// å»é‡ React ç›¸å…³æ ¸å¿ƒä¾èµ–ï¼Œç¡®ä¿å•ä¸€å®ä¾‹</span>
    <span class="hljs-attr">dedupe</span>: [<span class="hljs-string">'react'</span>, <span class="hljs-string">'react-dom'</span>, <span class="hljs-string">'mobx-react-lite'</span>],
  },
  <span class="hljs-attr">optimizeDeps</span>: {
    <span class="hljs-comment">// å¼ºåˆ¶é¢„æ„å»ºæ ¸å¿ƒä¾èµ–ï¼Œé¿å…æ¼æ£€</span>
    <span class="hljs-attr">include</span>: [<span class="hljs-string">'react'</span>, <span class="hljs-string">'react-dom'</span>, <span class="hljs-string">'mobx-react-lite'</span>],
    <span class="hljs-comment">// é¢„æ„å»ºé˜¶æ®µå†æ¬¡å»é‡ï¼ŒåŒé‡ä¿éšœ</span>
    <span class="hljs-attr">dedupe</span>: [<span class="hljs-string">'react'</span>, <span class="hljs-string">'react-dom'</span>],
  },
})
</code></pre>
<h4 data-id="heading-12">2. æ¸…ç†ç¼“å­˜å¹¶éªŒè¯</h4>
<p>æ‰§è¡Œ <code>vite --force</code> å¼ºåˆ¶æ¸…é™¤é¢„æ„å»ºç¼“å­˜ï¼Œé‡æ–°å¯åŠ¨é¡¹ç›®åï¼š</p>
<ul>
<li>æµè§ˆå™¨æ§åˆ¶å°æ— ä»»ä½• Hook ç›¸å…³æŠ¥é”™ï¼›</li>
<li>æ‰§è¡Œ <code>npm ls react react-dom</code> ä»…æ˜¾ç¤ºæ ¹ç›®å½•å•ä¸€ç‰ˆæœ¬ï¼›</li>
<li>æ‰“å° React å®ä¾‹å¯¹æ¯”ç»“æœä¸º <code>true</code>ï¼Œç¡®è®¤å¤šå®ä¾‹é—®é¢˜å½»åº•è§£å†³ã€‚</li>
</ul>
<h3 data-id="heading-13">äº”ã€æ€»ç»“ä¸åæ€</h3>
<p>è¿™æ¬¡é—®é¢˜çš„æ ¸å¿ƒæ˜¯â€œlock æ–‡ä»¶å†²çªå¤„ç†ä¸å½“â€ï¼Œä½†èƒŒåæš´éœ²äº†å¯¹ä¾èµ–ç®¡ç†å’Œæ„å»ºå·¥å…·é…ç½®çš„è®¤çŸ¥ç¼ºå£ã€‚æ€»ç»“å‡ ç‚¹å…³é”®ç»éªŒï¼š</p>
<ol>
<li><strong>lock æ–‡ä»¶å†²çªåˆ‡å‹¿æ‰‹åŠ¨ä¿®æ”¹</strong>ï¼šé‡åˆ° lock æ–‡ä»¶å†²çªæ—¶ï¼Œä¼˜å…ˆæ‰§è¡Œ <code>git checkout -- package-lock.json</code> å›æ»šï¼Œå†é€šè¿‡ <code>rm -rf node_modules &amp;&amp; npm install</code> é‡æ–°å®‰è£…ï¼Œé¿å…ä¾èµ–æ ‘æ··ä¹±ï¼›</li>
<li><strong>ä¾èµ–å£°æ˜éœ€è§„èŒƒ</strong>ï¼šç¬¬ä¸‰æ–¹åº“åº”å°† React ç­‰æ ¸å¿ƒä¾èµ–è®¾ä¸º peerDependencyï¼Œè€Œéç›´æ¥ä¾èµ–ï¼Œé¿å…åµŒå¥—å®‰è£…ï¼›</li>
<li><strong>Vite é…ç½®çš„â€œé˜²æŠ¤ä½œç”¨â€</strong> ï¼šå¯¹äº Reactã€Vue ç­‰æ ¸å¿ƒä¾èµ–ï¼Œå»ºè®®åœ¨ Vite é…ç½®ä¸­æå‰è®¾ç½® <code>dedupe</code> å’Œ <code>optimizeDeps.include</code>ï¼Œä»æ„å»ºå±‚é¢è§„é¿å¤šå®ä¾‹å’Œé¢„æ„å»ºé—®é¢˜ï¼›</li>
<li><strong>æŠ¥é”™æ’æŸ¥è¦ç»“åˆå®˜æ–¹æ–‡æ¡£</strong>ï¼šReact å®˜æ–¹æ˜ç¡®åˆ—å‡ºäº† Hook è°ƒç”¨å¼‚å¸¸çš„ä¸‰å¤§åŸå› ï¼Œæ’æŸ¥æ—¶åº”å…ˆå¯¹ç…§æ–‡æ¡£ç¼©å°èŒƒå›´ï¼Œé¿å…ç›²ç›®å°è¯•ã€‚</li>
</ol>
<p>æ­¤æ¬¡æ’æŸ¥è¿‡ç¨‹è™½æ›²æŠ˜ï¼Œä½†ä¹ŸåŠ æ·±äº†å¯¹ä¾èµ–ç®¡ç†ã€Vite æ„å»ºåŸç†å’Œ React Hooks è¿è¡Œæœºåˆ¶çš„ç†è§£ã€‚å¸Œæœ›è¿™ç¯‡è®°å½•èƒ½å¸®åŠ©å¤§å®¶åœ¨é‡åˆ°ç±»ä¼¼é—®é¢˜æ—¶å°‘èµ°å¼¯è·¯ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€é¸¿è’™å¼€å‘æ¡ˆä¾‹ç¯‡ã€‘åŸºäºMindSpore Liteçš„ç«¯ä¾§äººç‰©å›¾åƒåˆ†å‰²æ¡ˆä¾‹]]></title>    <link>https://juejin.cn/post/7582533464244437026</link>    <guid>https://juejin.cn/post/7582533464244437026</guid>    <pubDate>2025-12-12T03:56:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582533464244437026" data-draft-id="7582529173828386850" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€é¸¿è’™å¼€å‘æ¡ˆä¾‹ç¯‡ã€‘åŸºäºMindSpore Liteçš„ç«¯ä¾§äººç‰©å›¾åƒåˆ†å‰²æ¡ˆä¾‹"/> <meta itemprop="keywords" content="HarmonyOS,ArkTS,ArkUI"/> <meta itemprop="datePublished" content="2025-12-12T03:56:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¨å“¥çˆ±ç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/2242659450109575"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€é¸¿è’™å¼€å‘æ¡ˆä¾‹ç¯‡ã€‘åŸºäºMindSpore Liteçš„ç«¯ä¾§äººç‰©å›¾åƒåˆ†å‰²æ¡ˆä¾‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2242659450109575/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¨å“¥çˆ±ç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T03:56:42.000Z" title="Fri Dec 12 2025 03:56:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ V å“¥ã€‚ä»Šå¤©çš„å†…å®¹å’±ä»¬æ¥è¯¦ç»†ä»‹ç»é¸¿è’™å¼€å‘ä¸­ï¼Œå¦‚ä½•ä½¿ç”¨MindSpore Liteåœ¨é¸¿è’™ç³»ç»Ÿä¸Šå®ç°ç«¯ä¾§äººç‰©å›¾åƒåˆ†å‰²åŠŸèƒ½ï¼Œä»¥åŠæä¾›å®Œæ•´çš„å®ç°æ–¹æ¡ˆã€‚</p>
<p>è”ç³»Vå“¥è·å– <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Ftraining%2FclassDetail%2F042cb1cc4d7d44ecbdbd902fd1275dcc%3Ftype%3D1%3Fha_source%3Dhmosclass%26ha_sourceId%3D89000248" target="_blank" title="https://developer.huawei.com/consumer/cn/training/classDetail/042cb1cc4d7d44ecbdbd902fd1275dcc?type=1?ha_source=hmosclass&amp;ha_sourceId=89000248" ref="nofollow noopener noreferrer">é¸¿è’™å­¦ä¹ èµ„æ–™</a></p>
<h2 data-id="heading-0">ç³»ç»Ÿæ¶æ„è®¾è®¡</h2>
<p><strong>æŠ€æœ¯æ ˆä¸ç»„ä»¶å…³ç³»</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[UIç•Œé¢] --&gt; B[å›¾åƒé€‰æ‹©]
    A --&gt; C[ç»“æœå±•ç¤º]
    B --&gt; D[å›¾åƒå¤„ç†]
    D --&gt; E[MindSpore Liteæ¨ç†]
    E --&gt; F[å›¾åƒåˆæˆ]
    F --&gt; C
    G[æ¨¡å‹æ–‡ä»¶] --&gt; E
    H[èƒŒæ™¯å›¾åº“] --&gt; F
</code></pre>
<p><strong>æ ¸å¿ƒåŠŸèƒ½æµç¨‹</strong></p>
<ol>
<li>ç”¨æˆ·é€‰æ‹©äººç‰©å›¾ç‰‡</li>
<li>åŠ è½½MindSpore Liteæ¨¡å‹</li>
<li>æ‰§è¡Œå›¾åƒåˆ†å‰²æ¨ç†</li>
<li>å°†åˆ†å‰²ç»“æœä¸èƒŒæ™¯å›¾åˆæˆ</li>
<li>å±•ç¤ºæœ€ç»ˆæ•ˆæœ</li>
</ol>
<h2 data-id="heading-1">å…·ä½“å®ç°æ­¥éª¤</h2>
<h3 data-id="heading-2">1. å·¥ç¨‹é…ç½®ä¸ä¾èµ–</h3>
<p><strong>syscap.jsoné…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"devices"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"general"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"phone"</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"development"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"addedSysCaps"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"SystemCapability.Ai.MindSpore"</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>æ¨¡å‹å‡†å¤‡</strong>ï¼š</p>
<ul>
<li>å°†<code>rmbg_fp16.ms</code>æ¨¡å‹æ–‡ä»¶æ”¾ç½®åœ¨<code>entry/src/main/resources/rawfile</code>ç›®å½•</li>
<li>æ¨¡å‹è¾“å…¥ï¼š256Ã—256 RGBå›¾åƒ</li>
<li>æ¨¡å‹è¾“å‡ºï¼š256Ã—256å•é€šé“æ©ç </li>
</ul>
<p><strong>2. æ ¸å¿ƒå·¥å…·ç±»å®ç°</strong></p>
<p><strong>Predict.etsï¼ˆæ¨¡å‹æ¨ç†æ ¸å¿ƒï¼‰</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// utils/Predict.ets</span>
<span class="hljs-keyword">import</span> mindSporeLite <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ai.mindSporeLite'</span>;
<span class="hljs-keyword">import</span> { logger } <span class="hljs-keyword">from</span> <span class="hljs-string">'./Logger'</span>;
<span class="hljs-keyword">import</span> common <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.common'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Predict</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">context</span>: common.<span class="hljs-property">UIAbilityContext</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">model</span>: mindSporeLite.<span class="hljs-property">Model</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;
  
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">context: common.UIAbilityContext</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span> = context;
  }

  <span class="hljs-comment">// åŠ è½½æ¨¡å‹</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">loadModel</span>(<span class="hljs-attr">modelPath</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// åˆ›å»ºæ¨¡å‹å®ä¾‹</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span> = <span class="hljs-keyword">await</span> mindSporeLite.<span class="hljs-title function_">createModel</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, modelPath);
      logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Model loaded successfully'</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    } <span class="hljs-keyword">catch</span> (err) {
      logger.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to load model: <span class="hljs-subst">${err.message}</span>`</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  }

  <span class="hljs-comment">// æ‰§è¡Œæ¨ç†</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">predict</span>(<span class="hljs-attr">imageData</span>: <span class="hljs-title class_">ArrayBuffer</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">ArrayBuffer</span> | <span class="hljs-literal">null</span>&gt; {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>) {
      logger.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Model not loaded'</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// å‡†å¤‡è¾“å…¥Tensor</span>
      <span class="hljs-keyword">const</span> inputTensor = <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-title function_">getInputs</span>();
      <span class="hljs-keyword">const</span> inputData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(imageData);
      inputTensor.<span class="hljs-title function_">setData</span>(inputData);

      <span class="hljs-comment">// æ‰§è¡Œæ¨ç†</span>
      <span class="hljs-keyword">const</span> startTime = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>();
      <span class="hljs-keyword">const</span> outputTensor = <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-title function_">predict</span>([inputTensor]);
      <span class="hljs-keyword">const</span> endTime = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>();
      logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Inference time: <span class="hljs-subst">${endTime - startTime}</span>ms`</span>);

      <span class="hljs-comment">// è·å–è¾“å‡ºæ•°æ®</span>
      <span class="hljs-keyword">return</span> outputTensor.<span class="hljs-title function_">getData</span>();
    } <span class="hljs-keyword">catch</span> (err) {
      logger.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Prediction failed: <span class="hljs-subst">${err.message}</span>`</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
  }

  <span class="hljs-comment">// é‡Šæ”¾æ¨¡å‹èµ„æº</span>
  <span class="hljs-title function_">releaseModel</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-title function_">release</span>();
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span> = <span class="hljs-literal">null</span>;
      logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Model released'</span>);
    }
  }
}
</code></pre>
<p><strong>å›¾åƒå¤„ç†å·¥å…·ç±»</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// utils/ImageProcessor.ets</span>
<span class="hljs-keyword">import</span> image <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.multimedia.image'</span>;
<span class="hljs-keyword">import</span> { logger } <span class="hljs-keyword">from</span> <span class="hljs-string">'./Logger'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ImageProcessor</span> {
  
  <span class="hljs-comment">// è°ƒæ•´å›¾åƒå¤§å°</span>
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">resizeImage</span>(<span class="hljs-attr">pixelMap</span>: image.<span class="hljs-property">PixelMap</span>, <span class="hljs-attr">width</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span>): <span class="hljs-title class_">Promise</span>&lt;image.<span class="hljs-property">PixelMap</span>&gt; {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">options</span>: image.<span class="hljs-property">InitializationOptions</span> = {
      <span class="hljs-attr">size</span>: { width, height },
      <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>
    };
    <span class="hljs-keyword">return</span> pixelMap.<span class="hljs-title function_">createPixelMap</span>(options);
  }

  <span class="hljs-comment">// å°†PixelMapè½¬æ¢ä¸ºæ¨¡å‹è¾“å…¥æ ¼å¼</span>
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">pixelMapToInputData</span>(<span class="hljs-attr">pixelMap</span>: image.<span class="hljs-property">PixelMap</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">ArrayBuffer</span>&gt; {
    <span class="hljs-keyword">const</span> imageInfo = <span class="hljs-keyword">await</span> pixelMap.<span class="hljs-title function_">getImageInfo</span>();
    <span class="hljs-keyword">const</span> buffer = <span class="hljs-keyword">await</span> pixelMap.<span class="hljs-title function_">getImageBuffer</span>();
    
    <span class="hljs-comment">// è½¬æ¢ä¸ºRGBæ ¼å¼</span>
    <span class="hljs-keyword">const</span> rgbData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(imageInfo.<span class="hljs-property">size</span>.<span class="hljs-property">width</span> * imageInfo.<span class="hljs-property">size</span>.<span class="hljs-property">height</span> * <span class="hljs-number">3</span>);
    <span class="hljs-keyword">let</span> offset = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> y = <span class="hljs-number">0</span>; y &lt; imageInfo.<span class="hljs-property">size</span>.<span class="hljs-property">height</span>; y++) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> x = <span class="hljs-number">0</span>; x &lt; imageInfo.<span class="hljs-property">size</span>.<span class="hljs-property">width</span>; x++) {
        <span class="hljs-keyword">const</span> color = buffer[offset];
        rgbData[offset * <span class="hljs-number">3</span>] = (color &gt;&gt; <span class="hljs-number">16</span>) &amp; <span class="hljs-number">0xFF</span>;  <span class="hljs-comment">// R</span>
        rgbData[offset * <span class="hljs-number">3</span> + <span class="hljs-number">1</span>] = (color &gt;&gt; <span class="hljs-number">8</span>) &amp; <span class="hljs-number">0xFF</span>;  <span class="hljs-comment">// G</span>
        rgbData[offset * <span class="hljs-number">3</span> + <span class="hljs-number">2</span>] = color &amp; <span class="hljs-number">0xFF</span>;  <span class="hljs-comment">// B</span>
        offset++;
      }
    }
    
    <span class="hljs-keyword">return</span> rgbData.<span class="hljs-property">buffer</span>;
  }

  <span class="hljs-comment">// ç”Ÿæˆåˆæˆå›¾åƒ</span>
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">compositeImages</span>(
    <span class="hljs-attr">foreground</span>: image.<span class="hljs-property">PixelMap</span>, 
    <span class="hljs-attr">background</span>: image.<span class="hljs-property">PixelMap</span>, 
    <span class="hljs-attr">mask</span>: <span class="hljs-title class_">ArrayBuffer</span>
  ): <span class="hljs-title class_">Promise</span>&lt;image.<span class="hljs-property">PixelMap</span>&gt; {
    <span class="hljs-keyword">const</span> fgInfo = <span class="hljs-keyword">await</span> foreground.<span class="hljs-title function_">getImageInfo</span>();
    <span class="hljs-keyword">const</span> bgInfo = <span class="hljs-keyword">await</span> background.<span class="hljs-title function_">getImageInfo</span>();
    
    <span class="hljs-comment">// ç¡®ä¿èƒŒæ™¯ä¸å‰æ™¯å°ºå¯¸ä¸€è‡´</span>
    <span class="hljs-keyword">const</span> resizedBg = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resizeImage</span>(background, fgInfo.<span class="hljs-property">size</span>.<span class="hljs-property">width</span>, fgInfo.<span class="hljs-property">size</span>.<span class="hljs-property">height</span>);
    <span class="hljs-keyword">const</span> bgBuffer = <span class="hljs-keyword">await</span> resizedBg.<span class="hljs-title function_">getImageBuffer</span>();
    
    <span class="hljs-comment">// åˆ›å»ºç»“æœå›¾åƒ</span>
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> image.<span class="hljs-title function_">createPixelMap</span>(bgBuffer);
    <span class="hljs-keyword">const</span> resultBuffer = <span class="hljs-keyword">await</span> result.<span class="hljs-title function_">getImageBuffer</span>();
    
    <span class="hljs-comment">// åº”ç”¨æ©ç åˆæˆ</span>
    <span class="hljs-keyword">const</span> maskArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(mask);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; resultBuffer.<span class="hljs-property">length</span>; i++) {
      <span class="hljs-keyword">const</span> alpha = maskArray[i] / <span class="hljs-number">255</span>; <span class="hljs-comment">// å½’ä¸€åŒ–</span>
      
      <span class="hljs-keyword">if</span> (alpha &gt; <span class="hljs-number">0.5</span>) { <span class="hljs-comment">// ä½¿ç”¨é˜ˆå€¼å¤„ç†</span>
        resultBuffer[i] = bgBuffer[i];
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">const</span> fgColor = <span class="hljs-keyword">await</span> foreground.<span class="hljs-title function_">getPixel</span>(i);
        resultBuffer[i] = fgColor;
      }
    }
    
    <span class="hljs-keyword">await</span> result.<span class="hljs-title function_">putImageBuffer</span>(resultBuffer);
    <span class="hljs-keyword">return</span> result;
  }
}
</code></pre>
<p><strong>3. ç•Œé¢å®ç°</strong></p>
<p><strong>Index.etsï¼ˆä¸»ç•Œé¢ï¼‰</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// pages/Index.ets</span>
<span class="hljs-keyword">import</span> photoAccessHelper <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.file.photoAccessHelper'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">NavigationParam</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../model/NavigationParam'</span>;
<span class="hljs-keyword">import</span> { logger } <span class="hljs-keyword">from</span> <span class="hljs-string">'../utils/Logger'</span>;

<span class="hljs-meta">@Entry</span>
<span class="hljs-meta">@Component</span>
struct <span class="hljs-title class_">Index</span> {
  <span class="hljs-keyword">private</span> context = <span class="hljs-title function_">getContext</span>(<span class="hljs-variable language_">this</span>) <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;
  
  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Column</span>() {
      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'é€‰æ‹©äººç‰©å›¾ç‰‡'</span>)
        .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)
        .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)
        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)
        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)
        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">openPhotoPicker</span>())
    }
    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)
    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)
  }

  <span class="hljs-comment">// æ‰“å¼€ç›¸å†Œé€‰æ‹©å™¨</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">openPhotoPicker</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> phAccessHelper = photoAccessHelper.<span class="hljs-title function_">getPhotoAccessHelper</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>);
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> phAccessHelper.<span class="hljs-title function_">select</span>({
        <span class="hljs-attr">selectionArgs</span>: {
          <span class="hljs-attr">selection</span>: photoAccessHelper.<span class="hljs-property">PhotoKeys</span>.<span class="hljs-property">PICK</span>,
          <span class="hljs-attr">maxSelectCount</span>: <span class="hljs-number">1</span>,
          <span class="hljs-title class_">MIMEType</span>: photoAccessHelper.<span class="hljs-property">PhotoViewMIMETypes</span>.<span class="hljs-property">IMAGE_TYPE</span>,
        }
      });
      
      <span class="hljs-keyword">if</span> (result &amp;&amp; result.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">const</span> asset = result;
        <span class="hljs-keyword">const</span> uri = <span class="hljs-keyword">await</span> asset.<span class="hljs-title function_">getUri</span>();
        logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Selected image: <span class="hljs-subst">${uri}</span>`</span>);
        
        <span class="hljs-comment">// å¯¼èˆªåˆ°å›¾åƒç”Ÿæˆé¡µé¢</span>
        <span class="hljs-keyword">const</span> <span class="hljs-attr">param</span>: <span class="hljs-title class_">NavigationParam</span> = { <span class="hljs-attr">imageUri</span>: uri.<span class="hljs-title function_">toString</span>() };
        router.<span class="hljs-title function_">pushUrl</span>({
          <span class="hljs-attr">url</span>: <span class="hljs-string">'pages/ImageGenerate'</span>,
          <span class="hljs-attr">params</span>: param
        });
      }
    } <span class="hljs-keyword">catch</span> (err) {
      logger.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Photo picker failed: <span class="hljs-subst">${err.message}</span>`</span>);
    }
  }
}
</code></pre>
<p><strong>ImageGenerate.etsï¼ˆå›¾åƒç”Ÿæˆé¡µé¢ï¼‰</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// pages/ImageGenerate.ets</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Predict</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../utils/Predict'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ImageProcessor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../utils/ImageProcessor'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ImageDataListConstant</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../common/constants/ImageDataListConstant'</span>;
<span class="hljs-keyword">import</span> { logger } <span class="hljs-keyword">from</span> <span class="hljs-string">'../utils/Logger'</span>;
<span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.file.fs'</span>;
<span class="hljs-keyword">import</span> image <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.multimedia.image'</span>;

<span class="hljs-meta">@Entry</span>
<span class="hljs-meta">@Component</span>
struct <span class="hljs-title class_">ImageGenerate</span> {
  <span class="hljs-meta">@State</span> <span class="hljs-attr">originImage</span>: image.<span class="hljs-property">PixelMap</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;
  <span class="hljs-meta">@State</span> <span class="hljs-attr">resultImage</span>: image.<span class="hljs-property">PixelMap</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;
  <span class="hljs-meta">@State</span> <span class="hljs-attr">selectedBgIndex</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;
  <span class="hljs-meta">@State</span> <span class="hljs-attr">isLoading</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;
  
  <span class="hljs-keyword">private</span> context = <span class="hljs-title function_">getContext</span>(<span class="hljs-variable language_">this</span>) <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">predict</span>: <span class="hljs-title class_">Predict</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Predict</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>);
  <span class="hljs-keyword">private</span> <span class="hljs-attr">imageUri</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;
  
  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> params = router.<span class="hljs-title function_">getParams</span>() <span class="hljs-keyword">as</span> <span class="hljs-title class_">NavigationParam</span>;
    <span class="hljs-keyword">if</span> (params?.<span class="hljs-property">imageUri</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">imageUri</span> = params.<span class="hljs-property">imageUri</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadOriginImage</span>();
    }
  }
  
  <span class="hljs-comment">// åŠ è½½åŸå§‹å›¾åƒ</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">loadOriginImage</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> file = <span class="hljs-keyword">await</span> fs.<span class="hljs-title function_">open</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">imageUri</span>, fs.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_ONLY</span>);
      <span class="hljs-keyword">const</span> imageSource = image.<span class="hljs-title function_">createImageSource</span>(file.<span class="hljs-property">fd</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">originImage</span> = <span class="hljs-keyword">await</span> imageSource.<span class="hljs-title function_">createPixelMap</span>();
      <span class="hljs-keyword">await</span> fs.<span class="hljs-title function_">close</span>(file);
    } <span class="hljs-keyword">catch</span> (err) {
      logger.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to load image: <span class="hljs-subst">${err.message}</span>`</span>);
    }
  }
  
  <span class="hljs-comment">// æ‰§è¡Œå›¾åƒåˆ†å‰²</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">performSegmentation</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">originImage</span>) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isLoading</span> = <span class="hljs-literal">true</span>;
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// 1. åŠ è½½æ¨¡å‹</span>
      <span class="hljs-keyword">const</span> modelLoaded = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">predict</span>.<span class="hljs-title function_">loadModel</span>(<span class="hljs-string">'rmbg_fp16.ms'</span>);
      <span class="hljs-keyword">if</span> (!modelLoaded) <span class="hljs-keyword">return</span>;
      
      <span class="hljs-comment">// 2. é¢„å¤„ç†å›¾åƒ</span>
      <span class="hljs-keyword">const</span> resizedImage = <span class="hljs-keyword">await</span> <span class="hljs-title class_">ImageProcessor</span>.<span class="hljs-title function_">resizeImage</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">originImage</span>, <span class="hljs-number">256</span>, <span class="hljs-number">256</span>);
      <span class="hljs-keyword">const</span> inputData = <span class="hljs-keyword">await</span> <span class="hljs-title class_">ImageProcessor</span>.<span class="hljs-title function_">pixelMapToInputData</span>(resizedImage);
      
      <span class="hljs-comment">// 3. æ‰§è¡Œæ¨ç†</span>
      <span class="hljs-keyword">const</span> maskData = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">predict</span>.<span class="hljs-title function_">predict</span>(inputData);
      <span class="hljs-keyword">if</span> (!maskData) <span class="hljs-keyword">return</span>;
      
      <span class="hljs-comment">// 4. è·å–èƒŒæ™¯å›¾åƒ</span>
      <span class="hljs-keyword">const</span> bgResource = <span class="hljs-title class_">ImageDataListConstant</span>.<span class="hljs-property">BACKGROUND_LIST</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">selectedBgIndex</span>];
      <span class="hljs-keyword">const</span> bgPixelMap = <span class="hljs-keyword">await</span> bgResource.<span class="hljs-title function_">createPixelMap</span>();
      
      <span class="hljs-comment">// 5. åˆæˆå›¾åƒ</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">resultImage</span> = <span class="hljs-keyword">await</span> <span class="hljs-title class_">ImageProcessor</span>.<span class="hljs-title function_">compositeImages</span>(
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">originImage</span>,
        bgPixelMap,
        maskData
      );
    } <span class="hljs-keyword">catch</span> (err) {
      logger.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Segmentation failed: <span class="hljs-subst">${err.message}</span>`</span>);
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isLoading</span> = <span class="hljs-literal">false</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">predict</span>.<span class="hljs-title function_">releaseModel</span>();
    }
  }
  
  <span class="hljs-comment">// åˆ‡æ¢èƒŒæ™¯</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">changeBackground</span>(<span class="hljs-params">index: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectedBgIndex</span> = index;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">performSegmentation</span>();
  }
  
  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Column</span>() {
      <span class="hljs-comment">// Tabåˆ‡æ¢</span>
      <span class="hljs-title class_">Tabs</span>({ <span class="hljs-attr">barPosition</span>: <span class="hljs-title class_">BarPosition</span>.<span class="hljs-property">Start</span> }) {
        <span class="hljs-title class_">TabContent</span>() {
          <span class="hljs-comment">// åŸå›¾æ ‡ç­¾é¡µ</span>
          <span class="hljs-title class_">Column</span>() {
            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">originImage</span>) {
              <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">originImage</span>)
                .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
                .<span class="hljs-title function_">height</span>(<span class="hljs-string">'80%'</span>)
                .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)
            } <span class="hljs-keyword">else</span> {
              <span class="hljs-title class_">Progress</span>()
            }
          }
        }
        .<span class="hljs-title function_">tabBar</span>(<span class="hljs-string">'åŸå›¾'</span>)
        
        <span class="hljs-title class_">TabContent</span>() {
          <span class="hljs-comment">// åˆæˆæ ‡ç­¾é¡µ</span>
          <span class="hljs-title class_">Column</span>() {
            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isLoading</span>) {
              <span class="hljs-title class_">Progress</span>()
              <span class="hljs-title class_">Text</span>(<span class="hljs-string">'å¤„ç†ä¸­...'</span>)
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">resultImage</span>) {
              <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">resultImage</span>)
                .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
                .<span class="hljs-title function_">height</span>(<span class="hljs-string">'70%'</span>)
                .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)
              
              <span class="hljs-comment">// èƒŒæ™¯é€‰æ‹©å™¨</span>
              <span class="hljs-title class_">Scroll</span>() {
                <span class="hljs-title class_">Row</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">15</span> }) {
                  <span class="hljs-title class_">ForEach</span>(<span class="hljs-title class_">ImageDataListConstant</span>.<span class="hljs-property">BACKGROUND_LIST</span>, <span class="hljs-function">(<span class="hljs-params">bg, index</span>) =&gt;</span> {
                    <span class="hljs-title class_">Image</span>(bg)
                      .<span class="hljs-title function_">width</span>(<span class="hljs-number">80</span>)
                      .<span class="hljs-title function_">height</span>(<span class="hljs-number">80</span>)
                      .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectedBgIndex</span> === index ? <span class="hljs-number">3</span> : <span class="hljs-number">0</span>, <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span> })
                      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">changeBackground</span>(index))
                  })
                }
                .<span class="hljs-title function_">padding</span>(<span class="hljs-number">10</span>)
              }
              .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)
            } <span class="hljs-keyword">else</span> {
              <span class="hljs-title class_">Button</span>(<span class="hljs-string">'å¼€å§‹åˆæˆ'</span>)
                .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">performSegmentation</span>())
            }
          }
        }
        .<span class="hljs-title function_">tabBar</span>(<span class="hljs-string">'åˆæˆ'</span>)
      }
    }
  }
  
  <span class="hljs-title function_">aboutToDisappear</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">predict</span>.<span class="hljs-title function_">releaseModel</span>();
  }
}
</code></pre>
<p><strong>4. è¾…åŠ©å·¥å…·ç±»</strong></p>
<p><strong>Logger.etsï¼ˆæ—¥å¿—å·¥å…·ï¼‰</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// utils/Logger.ets</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">'ImageSegmentation'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> logger = {
  <span class="hljs-attr">info</span>: <span class="hljs-function">(<span class="hljs-params">msg: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`<span class="hljs-subst">${TAG}</span>: <span class="hljs-subst">${msg}</span>`</span>),
  <span class="hljs-attr">error</span>: <span class="hljs-function">(<span class="hljs-params">msg: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`<span class="hljs-subst">${TAG}</span>: <span class="hljs-subst">${msg}</span>`</span>),
  <span class="hljs-attr">warn</span>: <span class="hljs-function">(<span class="hljs-params">msg: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`<span class="hljs-subst">${TAG}</span>: <span class="hljs-subst">${msg}</span>`</span>)
};
</code></pre>
<p><strong>ImageDataListConstant.etsï¼ˆå¸¸é‡ï¼‰</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// common/constants/ImageDataListConstant.ets</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ImageDataListConstant</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">BACKGROUND_LIST</span>: <span class="hljs-title class_">Resource</span>[] = [
    $r(<span class="hljs-string">'app.media.bg1'</span>),
    $r(<span class="hljs-string">'app.media.bg2'</span>),
    $r(<span class="hljs-string">'app.media.bg3'</span>),
    $r(<span class="hljs-string">'app.media.bg4'</span>),
    $r(<span class="hljs-string">'app.media.bg5'</span>),
  ];
}
</code></pre>
<h4 data-id="heading-3">NavigationParam.etsï¼ˆå¯¼èˆªå‚æ•°ï¼‰</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// model/NavigationParam.ets</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NavigationParam</span> {
  <span class="hljs-attr">imageUri</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;
}
</code></pre>
<h2 data-id="heading-4">æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</h2>
<ol>
<li>
<p><strong>æ¨¡å‹ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨FP16æ¨¡å‹å‡å°‘å†…å­˜å ç”¨</li>
<li>é‡åŒ–æ¨¡å‹åˆ°INT8æå‡æ¨ç†é€Ÿåº¦</li>
<li>ä½¿ç”¨æ¨¡å‹å‹ç¼©æŠ€æœ¯å‡å°‘æ¨¡å‹ä½“ç§¯</li>
</ul>
</li>
<li>
<p><strong>æ¨ç†åŠ é€Ÿ</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åœ¨Predictç±»ä¸­æ·»åŠ NPUæ”¯æŒ</span>
<span class="hljs-keyword">async</span> <span class="hljs-title function_">loadModel</span>(<span class="hljs-attr">modelPath</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">context</span>: mindSporeLite.<span class="hljs-property">Context</span> = {
      <span class="hljs-attr">target</span>: [<span class="hljs-string">'npu'</span>], <span class="hljs-comment">// ä¼˜å…ˆä½¿ç”¨NPU</span>
      <span class="hljs-attr">cpu</span>: {
        <span class="hljs-attr">precision</span>: <span class="hljs-string">'float16'</span> <span class="hljs-comment">// ä½¿ç”¨FP16åŠ é€Ÿ</span>
      }
    };
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span> = <span class="hljs-keyword">await</span> mindSporeLite.<span class="hljs-title function_">createModel</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, modelPath, context);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  } <span class="hljs-keyword">catch</span> (err) {
    logger.<span class="hljs-title function_">error</span>(<span class="hljs-string">`NPU not available, falling back to CPU`</span>);
    <span class="hljs-comment">// å›é€€åˆ°CPUå®ç°...</span>
  }
}
</code></pre>
</li>
<li>
<p><strong>å†…å­˜ç®¡ç†</strong>ï¼š</p>
<ul>
<li>åŠæ—¶é‡Šæ”¾æ¨¡å‹èµ„æº</li>
<li>ä½¿ç”¨å›¾åƒæ± å¤ç”¨PixelMapå¯¹è±¡</li>
<li>é™åˆ¶åŒæ—¶å¤„ç†çš„å›¾åƒæ•°é‡</li>
</ul>
</li>
<li>
<p><strong>å¼‚æ­¥å¤„ç†</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä½¿ç”¨Promise.allå¹¶è¡Œå¤„ç†</span>
<span class="hljs-keyword">async</span> <span class="hljs-title function_">processMultipleImages</span>(<span class="hljs-params">images: image.PixelMap[]</span>) {
  <span class="hljs-keyword">const</span> promises = images.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">img</span> =&gt;</span> 
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">predict</span>.<span class="hljs-title function_">performSegmentation</span>(img)
  );
  <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(promises);
  <span class="hljs-comment">// å¤„ç†ç»“æœ...</span>
}
</code></pre>
</li>
</ol>
<h2 data-id="heading-5">å®Œæ•´æ—¶åºæµç¨‹</h2>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant User
    participant UI as ç”¨æˆ·ç•Œé¢
    participant Model as MindSporeæ¨¡å‹
    participant Processor as å›¾åƒå¤„ç†å™¨
    
    User-&gt;&gt;UI: é€‰æ‹©äººç‰©å›¾ç‰‡
    UI-&gt;&gt;UI: åŠ è½½åŸå§‹å›¾åƒ
    UI-&gt;&gt;Model: åŠ è½½æ¨¡å‹
    Model--&gt;&gt;UI: æ¨¡å‹åŠ è½½æˆåŠŸ
    UI-&gt;&gt;Processor: é¢„å¤„ç†å›¾åƒ(ç¼©æ”¾/æ ¼å¼è½¬æ¢)
    Processor--&gt;&gt;UI: è¿”å›å¤„ç†åçš„å›¾åƒæ•°æ®
    UI-&gt;&gt;Model: æ‰§è¡Œæ¨ç†
    Model--&gt;&gt;UI: è¿”å›åˆ†å‰²æ©ç 
    UI-&gt;&gt;Processor: åˆæˆå›¾åƒ(åº”ç”¨æ©ç +èƒŒæ™¯)
    Processor--&gt;&gt;UI: è¿”å›åˆæˆç»“æœ
    UI-&gt;&gt;User: æ˜¾ç¤ºåˆæˆå›¾åƒ
    User-&gt;&gt;UI: åˆ‡æ¢èƒŒæ™¯
    UI-&gt;&gt;Processor: ä½¿ç”¨æ–°èƒŒæ™¯é‡æ–°åˆæˆ
    Processor--&gt;&gt;UI: è¿”å›æ–°ç»“æœ
    UI-&gt;&gt;User: æ›´æ–°æ˜¾ç¤º
</code></pre>
<h2 data-id="heading-6">éƒ¨ç½²ä¸æµ‹è¯•æ³¨æ„äº‹é¡¹</h2>
<ol>
<li>
<p><strong>è®¾å¤‡è¦æ±‚</strong>ï¼š</p>
<ul>
<li>åä¸ºæ‰‹æœºï¼ˆæ”¯æŒNPUåŠ é€Ÿï¼‰</li>
<li>HarmonyOS 5.1.0 ReleaseåŠä»¥ä¸Š</li>
<li>å†…å­˜ï¼šè‡³å°‘2GBç©ºé—²å†…å­˜</li>
</ul>
</li>
<li>
<p><strong>æµ‹è¯•ç”¨ä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åœ¨Predictç±»ä¸­æ·»åŠ æµ‹è¯•æ–¹æ³•</span>
<span class="hljs-keyword">async</span> <span class="hljs-title function_">testModelPerformance</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> testImage = <span class="hljs-keyword">await</span> <span class="hljs-title function_">createTestImage</span>(<span class="hljs-number">256</span>, <span class="hljs-number">256</span>); <span class="hljs-comment">// åˆ›å»ºæµ‹è¯•å›¾åƒ</span>
  <span class="hljs-keyword">const</span> startTime = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>();
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">predict</span>(<span class="hljs-keyword">await</span> <span class="hljs-title class_">ImageProcessor</span>.<span class="hljs-title function_">pixelMapToInputData</span>(testImage));
  }
  
  <span class="hljs-keyword">const</span> endTime = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>();
  logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Average inference time: <span class="hljs-subst">${(endTime - startTime)/<span class="hljs-number">10</span>}</span>ms`</span>);
}
</code></pre>
</li>
<li>
<p><strong>å¸¸è§é—®é¢˜è§£å†³</strong>ï¼š</p>
<ul>
<li><strong>æ¨¡å‹åŠ è½½å¤±è´¥</strong>ï¼šæ£€æŸ¥æ¨¡å‹è·¯å¾„å’Œæƒé™</li>
<li><strong>æ¨ç†ç»“æœå¼‚å¸¸</strong>ï¼šéªŒè¯è¾“å…¥å›¾åƒæ ¼å¼å’Œå°ºå¯¸</li>
<li><strong>å†…å­˜ä¸è¶³</strong>ï¼šä¼˜åŒ–å›¾åƒå¤„ç†æµç¨‹ï¼Œå‡å°‘ä¸­é—´æ•°æ®</li>
<li><strong>NPUä¸å¯ç”¨</strong>ï¼šæ·»åŠ fallbackåˆ°CPUçš„å®ç°</li>
</ul>
</li>
</ol>
<h2 data-id="heading-7">æ‰©å±•åŠŸèƒ½å»ºè®®</h2>
<ol>
<li>
<p><strong>è§†é¢‘å®æ—¶åˆ†å‰²</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨<code>@ohos.multimedia.media</code>æ•è·æ‘„åƒå¤´æ•°æ®</li>
<li>å®ç°å¸§çº§åˆ†å‰²å¤„ç†</li>
<li>æ·»åŠ èƒŒæ™¯è™šåŒ–ç­‰ç‰¹æ•ˆ</li>
</ul>
</li>
<li>
<p><strong>æ¨¡å‹çƒ­æ›´æ–°</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åŠ¨æ€æ›´æ–°æ¨¡å‹</span>
<span class="hljs-keyword">async</span> <span class="hljs-title function_">updateModel</span>(<span class="hljs-params">newModelPath: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">predict</span>.<span class="hljs-title function_">releaseModel</span>();
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">predict</span>.<span class="hljs-title function_">loadModel</span>(newModelPath);
}
</code></pre>
</li>
<li>
<p><strong>åˆ†å‰²ç»“æœç¼–è¾‘</strong>ï¼š</p>
<ul>
<li>æ·»åŠ æ‰‹åŠ¨ä¿®æ­£åˆ†å‰²åŒºåŸŸçš„å·¥å…·</li>
<li>å®ç°è¾¹ç¼˜ç¾½åŒ–å¤„ç†</li>
<li>æ·»åŠ æ»¤é•œå’Œæ•ˆæœè°ƒæ•´</li>
</ul>
</li>
<li>
<p><strong>äº‘è¾¹ååŒ</strong>ï¼š</p>
<ul>
<li>åœ¨è®¾å¤‡æ€§èƒ½ä¸è¶³æ—¶åˆ‡æ¢åˆ°äº‘ç«¯æ¨¡å‹</li>
<li>å®ç°æ¨¡å‹ç»“æœèåˆ</li>
<li>æ·»åŠ éšç§ä¿æŠ¤æœºåˆ¶</li>
</ul>
</li>
</ol>
<p>è¿™ä¸ªå®ç°æ–¹æ¡ˆå®Œæ•´å±•ç¤ºäº†å¦‚ä½•åœ¨é¸¿è’™ç³»ç»Ÿä¸Šä½¿ç”¨MindSpore Liteå®ç°ç«¯ä¾§äººç‰©å›¾åƒåˆ†å‰²åŠŸèƒ½ã€‚é€šè¿‡ä¼˜åŒ–æ¨¡å‹åŠ è½½ã€æ¨ç†å’Œå›¾åƒåˆæˆæµç¨‹ï¼Œå¯ä»¥åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šå®ç°å®æ—¶çš„äººç‰©èƒŒæ™¯æ›¿æ¢æ•ˆæœã€‚å…„å¼Ÿä»¬å¯ä»¥ç©èµ·æ¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c52f449c33624217bbd6c55614e51eef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aiB5ZOl54ix57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766116602&amp;x-signature=J1a8pRGRl3CFTrFNruc5h2An2s4%3D" alt="å·äºŒ_å‰¯æœ¬2.jpg" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é«˜å¹¶å‘å†™å…¥ API è®¾è®¡ï¼šå€Ÿé‰´ NSQ çš„å†…å­˜é˜Ÿåˆ—ä¸èƒŒå‹æœºåˆ¶]]></title>    <link>https://juejin.cn/post/7582422766731296811</link>    <guid>https://juejin.cn/post/7582422766731296811</guid>    <pubDate>2025-12-12T01:29:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582422766731296811" data-draft-id="7582422766731280427" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é«˜å¹¶å‘å†™å…¥ API è®¾è®¡ï¼šå€Ÿé‰´ NSQ çš„å†…å­˜é˜Ÿåˆ—ä¸èƒŒå‹æœºåˆ¶"/> <meta itemprop="keywords" content="Go,é¢è¯•,åç«¯"/> <meta itemprop="datePublished" content="2025-12-12T01:29:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é«˜å¹¶å‘å†™å…¥ API è®¾è®¡ï¼šå€Ÿé‰´ NSQ çš„å†…å­˜é˜Ÿåˆ—ä¸èƒŒå‹æœºåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T01:29:52.000Z" title="Fri Dec 12 2025 01:29:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p><a href="https://juejin.cn/post/7582118538562404371" target="_blank" title="https://juejin.cn/post/7582118538562404371">ä¸Šä¸€ç¯‡æ–‡ç« </a>è®²äº†Elasticsearchå¦‚ä½•é€šè¿‡æ‰¹é‡+å¼‚æ­¥æ‰›ä½æ¯å¤©ä¸Šäº¿æ¡æ—¥å¿—çš„å†™å…¥ã€‚ä½†ESçš„å®ç°æ¯•ç«Ÿç¦»æˆ‘ä»¬å¤ªè¿œï¼Œä»Šå¤©æˆ‘ä»¬å°±å‡è®¾è‡ªå·±æ¥å®ç°ï¼Œ<strong>å¦‚æœè¦è®¾è®¡ä¸€ä¸ªèƒ½æ‰›ä½é«˜å¹¶å‘çš„æ•°æ®æ¥æ”¶APIï¼Œåº”è¯¥æ€ä¹ˆåšï¼Ÿ</strong></p>
<p>å‡è®¾åœºæ™¯æ˜¯è¿™æ ·çš„ï¼šä¸€ä¸ªæ—¥å¿—é‡‡é›†ç³»ç»Ÿï¼ˆå¦‚Logstashï¼‰æ¯ç§’å‘ç›®æ ‡æœåŠ¡å‘é€æ•°åƒæ¡æ—¥å¿—ï¼ŒæœåŠ¡ç«¯éœ€è¦æ¥æ”¶ååšä¸€äº›å¤„ç†ï¼ˆæ¯”å¦‚æ•°æ®æ¸…æ´—ã€æ ¼å¼è½¬æ¢ã€å†™å…¥æ•°æ®åº“ç­‰ï¼‰ã€‚</p>
<p>æœ€ç›´æ¥çš„åšæ³•æ˜¯åŒæ­¥å¤„ç†ï¼š</p>
<pre><code class="hljs">æ¥æ”¶è¯·æ±‚ â†’ å¤„ç†æ•°æ® â†’ å†™å…¥æ•°æ®åº“ â†’ è¿”å›å“åº”
</code></pre>
<p>è¿™æ ·åšä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ</p>
<ul>
<li>å¤„ç†+å†™åº“å¯èƒ½è¦å‡ åæ¯«ç§’ï¼Œæ¥å£å»¶è¿Ÿé«˜</li>
<li>æ¯ç§’å‡ åƒæ¬¡è¯·æ±‚ï¼Œæ•°æ®åº“æ‰›ä¸ä½</li>
<li>æµé‡å°–åˆºæ—¶ï¼Œæ•´ä¸ªæœåŠ¡ç›´æ¥æŒ‚</li>
</ul>
<p>è§£å†³æ€è·¯å…¶å®å¾ˆæ˜ç¡®ï¼š<strong>æ‰¹é‡+å¼‚æ­¥+é˜Ÿåˆ—ç¼“å†²</strong>ã€‚</p>
<p>æ—¢ç„¶è¦ç”¨Goå®ç°ï¼Œæ­£å¥½æœ‰ä¸ªç°æˆçš„å‚è€ƒå¯¹è±¡ï¼šNSQæ¶ˆæ¯é˜Ÿåˆ—ã€‚NSQæ¯å¤©å¤„ç†æ•°äº¿æ¡æ¶ˆæ¯ï¼Œè®¾è®¡æ€æƒ³éå¸¸å€¼å¾—å€Ÿé‰´ã€‚</p>
<h2 data-id="heading-1">NSQçš„æ ¸å¿ƒè®¾è®¡</h2>
<p>NSQæ˜¯Goè¯­è¨€å†™çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ¯å¤©èƒ½å¤„ç†æ•°äº¿æ¡æ¶ˆæ¯ã€‚å®ƒçš„æ ¸å¿ƒæ¶æ„éå¸¸ç®€å•ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[HTTP/TCPæ¥æ”¶] --&gt; B[å†…å­˜é˜Ÿåˆ—memoryMsgChan]
    B --&gt; C[messagePumpæ¶ˆè´¹å¾ªç¯]
    C --&gt; D[åˆ†å‘ç»™Consumer]
</code></pre>
<p>å…³é”®è®¾è®¡ç‚¹ï¼š</p>
<p><strong>1. å†…å­˜é˜Ÿåˆ—ç”¨Goçš„channelå®ç°</strong></p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// nsqd/topic.go</span>
<span class="hljs-keyword">type</span> Topic <span class="hljs-keyword">struct</span> {
    memoryMsgChan <span class="hljs-keyword">chan</span> *Message  <span class="hljs-comment">// å†…å­˜é˜Ÿåˆ—</span>
    backend       BackendQueue   <span class="hljs-comment">// ç£ç›˜å¤‡ä»½</span>
}
</code></pre>
<p>channelå¤©ç„¶æ”¯æŒå¹¶å‘ï¼Œä¸éœ€è¦åŠ é”ã€‚</p>
<p><strong>2. éé˜»å¡å…¥é˜Ÿ</strong></p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// nsqd/topic.go L224-230</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(t *Topic)</span></span> put(m *Message) <span class="hljs-type">error</span> {
    <span class="hljs-keyword">select</span> {
    <span class="hljs-keyword">case</span> t.memoryMsgChan &lt;- m:
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>  <span class="hljs-comment">// å…¥é˜ŸæˆåŠŸ</span>
    <span class="hljs-keyword">default</span>:
        <span class="hljs-comment">// é˜Ÿåˆ—æ»¡äº†ï¼Œå†™ç£ç›˜</span>
        <span class="hljs-keyword">return</span> t.writeToBackend(m)
    }
}
</code></pre>
<p>ç”¨selectçš„defaultåˆ†æ”¯å®ç°éé˜»å¡ï¼Œé˜Ÿåˆ—æ»¡äº†ç«‹å³è¿”å›ï¼Œä¸ç­‰å¾…ã€‚</p>
<p><strong>3. messagePumpæ¶ˆè´¹å¾ªç¯</strong></p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// nsqd/topic.go L247-344</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(t *Topic)</span></span> messagePump() {
    <span class="hljs-keyword">for</span> {
        <span class="hljs-keyword">select</span> {
        <span class="hljs-keyword">case</span> msg := &lt;-t.memoryMsgChan:
            <span class="hljs-comment">// å¤„ç†æ¶ˆæ¯</span>
        <span class="hljs-keyword">case</span> &lt;-t.exitChan:
            <span class="hljs-keyword">return</span>
        }
    }
}
</code></pre>
<p>ç‹¬ç«‹çš„goroutineå¾ªç¯ä»é˜Ÿåˆ—å–æ¶ˆæ¯ï¼Œä¸é˜»å¡æ¥æ”¶ç«¯ã€‚</p>
<h2 data-id="heading-2">ä¸ºä»€ä¹ˆé€‰æ‹©Goå®ç°</h2>
<p>è™½ç„¶æ ‡é¢˜é‡Œæ²¡æœ‰é™å®šè¯­è¨€ï¼Œä½†æœ¬æ–‡é€‰æ‹©ç”¨Goæ¥å®ç°ï¼Œä¸»è¦åŸºäºä»¥ä¸‹è€ƒè™‘ï¼š</p>
<p><strong>1. channelæ˜¯è¯­è¨€çº§ç‰¹æ€§ï¼Œå¤©ç„¶æ”¯æŒé«˜å¹¶å‘</strong></p>
<p>Goçš„channelæ˜¯å†…ç½®çš„å¹¶å‘åŸè¯­ï¼Œä¸éœ€è¦æ‰‹åŠ¨åŠ é”ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// Go - æ— é”å¹¶å‘</span>
<span class="hljs-keyword">select</span> {
<span class="hljs-keyword">case</span> queue &lt;- item:  <span class="hljs-comment">// å¤šä¸ªgoroutineåŒæ—¶å†™ï¼Œè‡ªåŠ¨åŒæ­¥</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
<span class="hljs-keyword">default</span>:
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
}
</code></pre>
<p>è€ŒJavaéœ€è¦ä½¿ç”¨å¹¶å‘å®¹å™¨å¹¶è€ƒè™‘çº¿ç¨‹å®‰å…¨ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Java - éœ€è¦ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„é˜Ÿåˆ—</span>
BlockingQueue&lt;Item&gt; queue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedBlockingQueue</span>&lt;&gt;(capacity);

<span class="hljs-comment">// éé˜»å¡å…¥é˜Ÿ</span>
<span class="hljs-keyword">if</span> (!queue.offer(item)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;  <span class="hljs-comment">// é˜Ÿåˆ—æ»¡</span>
}
</code></pre>
<p><strong>2. goroutineè½»é‡çº§ï¼Œé€‚åˆå¤§é‡å¹¶å‘ä»»åŠ¡</strong></p>
<p>Goçš„goroutineåªå ç”¨å‡ KBå†…å­˜ï¼Œå¯ä»¥è½»æ¾åˆ›å»ºæˆåƒä¸Šä¸‡ä¸ªï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// å¯åŠ¨æ¶ˆè´¹è€…goroutineï¼Œå¼€é”€æå°</span>
<span class="hljs-keyword">go</span> processor.StartConsumer(queue)
</code></pre>
<p>Javaçº¿ç¨‹è¾ƒé‡ï¼Œé€šå¸¸éœ€è¦çº¿ç¨‹æ± ç®¡ç†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// éœ€è¦çº¿ç¨‹æ± ç®¡ç†</span>
<span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">10</span>);
executor.submit(() -&gt; processor.startConsumer(queue));
</code></pre>
<p><strong>3. å‚è€ƒNSQæ›´æ–¹ä¾¿</strong></p>
<p>NSQæœ¬èº«å°±æ˜¯Goå†™çš„ï¼Œç›´æ¥å‚è€ƒæºç å®ç°æ›´è‡ªç„¶ã€‚å¦‚æœç”¨Javaå®ç°ï¼Œéœ€è¦åšè¯­è¨€è½¬æ¢ï¼Œç†è§£æˆæœ¬æ›´é«˜ã€‚</p>
<p><strong>4. éƒ¨ç½²ç®€å•</strong></p>
<p>Goç¼–è¯‘åæ˜¯å•ä¸€å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ²¡æœ‰ä¾èµ–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Goéƒ¨ç½²</span>
./data-service

<span class="hljs-comment"># Javaéƒ¨ç½²</span>
java -jar data-service.jar  <span class="hljs-comment"># éœ€è¦JVMç¯å¢ƒ</span>
</code></pre>
<p><strong>ä½†Javaä¹Ÿå®Œå…¨å¯ä»¥å®ç°</strong></p>
<p>è¿™å¹¶ä¸æ˜¯è¯´Javaå®ç°ä¸äº†ï¼ŒJavaä¹Ÿæœ‰å¯¹åº”çš„è§£å†³æ–¹æ¡ˆï¼š</p>






























<table><thead><tr><th>éœ€æ±‚</th><th>Goå®ç°</th><th>Javaå®ç°</th></tr></thead><tbody><tr><td>å†…å­˜é˜Ÿåˆ—</td><td>channel</td><td>BlockingQueue / Disruptor</td></tr><tr><td>å¼‚æ­¥å¤„ç†</td><td>goroutine</td><td>CompletableFuture / çº¿ç¨‹æ± </td></tr><tr><td>é™æµ</td><td>rate.Limiter</td><td>Guava RateLimiter</td></tr><tr><td>HTTPæ¡†æ¶</td><td>gin</td><td>Spring Boot / Netty</td></tr></tbody></table>
<p>Javaçš„ä¼˜åŠ¿åœ¨äºï¼š</p>
<ul>
<li>ç”Ÿæ€æ›´æˆç†Ÿï¼Œä¸­é—´ä»¶æ›´ä¸°å¯Œ</li>
<li>ä¼ä¸šçº§ç‰¹æ€§å®Œå–„ï¼ˆJMXç›‘æ§ã€åŠ¨æ€è°ƒè¯•ï¼‰</li>
<li>å›¢é˜Ÿç†Ÿæ‚‰åº¦å¯èƒ½æ›´é«˜</li>
</ul>
<p><strong>é€‰å‹å»ºè®®</strong></p>
<ul>
<li><strong>é€‰Go</strong>ï¼šå¦‚æœè¿½æ±‚æè‡´æ€§èƒ½ã€èµ„æºå ç”¨å°ã€éƒ¨ç½²ç®€å•</li>
<li><strong>é€‰Java</strong>ï¼šå¦‚æœå›¢é˜Ÿæ›´ç†Ÿæ‚‰ã€éœ€è¦æ›´ä¸°å¯Œçš„ä¼ä¸šçº§ç‰¹æ€§ã€å·²æœ‰JavaæŠ€æœ¯æ ˆ</li>
</ul>
<p>æœ¬æ–‡é€‰æ‹©Goæ˜¯å› ä¸ºï¼šå‚è€ƒNSQæºç æ–¹ä¾¿ï¼Œä¸”Goçš„å¹¶å‘æ¨¡å‹æ›´ç®€æ´ç›´è§‚ã€‚ä½†æ ¸å¿ƒæ€æƒ³ï¼ˆæ‰¹é‡+å¼‚æ­¥+é˜Ÿåˆ—ç¼“å†²ï¼‰æ˜¯é€šç”¨çš„ï¼Œæ¢æˆJavaæˆ–å…¶ä»–è¯­è¨€ä¸€æ ·å¯ä»¥å®ç°ã€‚</p>
<h2 data-id="heading-3">ä¸€ç§å¯è¡Œçš„å®ç°æ–¹æ¡ˆ</h2>
<p>å‚è€ƒNSQçš„è®¾è®¡ï¼Œå¯ä»¥æ„å»ºä¸€ä¸ªé«˜æ€§èƒ½çš„æ•°æ®æ¥æ”¶APIï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[å®¢æˆ·ç«¯æ‰¹é‡å‘é€200æ¡] --&gt; B[HTTPæ¥å£å¿«é€Ÿå…¥é˜Ÿ]
    B --&gt; C[å†…å­˜é˜Ÿåˆ—10ä¸‡å®¹é‡]
    C --&gt; D[æ‰¹é‡æ¶ˆè´¹å™¨1000æ¡/æ‰¹]
    D --&gt; E[æ•°æ®å¤„ç†é€»è¾‘]
    E --&gt; F[æ‰¹é‡å†™å…¥æ•°æ®åº“]
</code></pre>
<p>æ ¸å¿ƒè®¾è®¡æ€è·¯ï¼š</p>
<ol>
<li>HTTPå±‚åªè´Ÿè´£æ¥æ”¶+å…¥é˜Ÿï¼Œæ¯«ç§’çº§è¿”å›</li>
<li>å†…å­˜é˜Ÿåˆ—ä½œä¸ºç¼“å†²åŒºï¼Œå‰Šå³°å¡«è°·</li>
<li>æ¶ˆè´¹è€…æ‰¹é‡å–æ•°æ®å¤„ç†ï¼Œæå‡æ•ˆç‡</li>
<li>é™æµ+èƒŒå‹ä¿æŠ¤ç³»ç»Ÿç¨³å®šæ€§</li>
</ol>
<h3 data-id="heading-4">å…³é”®æ”¹è¿›ç‚¹</h3>
<p>ç›¸æ¯”NSQï¼Œé’ˆå¯¹HTTP APIåœºæ™¯åšäº†ä¸‰ä¸ªæ”¹åŠ¨ï¼š</p>
<p><strong>1. æ‰¹é‡æ¶ˆè´¹æ›¿ä»£å•æ¡æ¶ˆè´¹</strong></p>
<p>NSQæ˜¯å•æ¡selectï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">select</span> {
<span class="hljs-keyword">case</span> msg := &lt;-<span class="hljs-keyword">chan</span>:  <span class="hljs-comment">// å•æ¡</span>
    process(msg)
}
</code></pre>
<p>æ”¹è¿›æ–¹æ¡ˆé‡‡ç”¨æ‰¹é‡å–ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(q *MemoryQueue)</span></span> DequeueBatch(batchSize <span class="hljs-type">int</span>) []<span class="hljs-keyword">interface</span>{} {
    result := <span class="hljs-built_in">make</span>([]<span class="hljs-keyword">interface</span>{}, <span class="hljs-number">0</span>, batchSize)
    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; batchSize; i++ {
        <span class="hljs-keyword">select</span> {
        <span class="hljs-keyword">case</span> item := &lt;-q.memoryMsgChan:
            result = <span class="hljs-built_in">append</span>(result, item)
        <span class="hljs-keyword">default</span>:
            <span class="hljs-keyword">return</span> result  <span class="hljs-comment">// é˜Ÿåˆ—ç©ºäº†ï¼Œè¿”å›å·²å–åˆ°çš„</span>
        }
    }
    <span class="hljs-keyword">return</span> result
}
</code></pre>
<p>ä¸ºä»€ä¹ˆè¦æ‰¹é‡ï¼Ÿå› ä¸ºæ‰¹é‡å†™æ•°æ®åº“èƒ½å¤§å¹…å‡å°‘IOæ¬¡æ•°ã€‚æ¯”å¦‚1000æ¡æ•°æ®ï¼Œå•æ¡æ’å…¥è¦1000æ¬¡ç½‘ç»œå¾€è¿”ï¼Œæ‰¹é‡æ’å…¥åªè¦1æ¬¡ã€‚</p>
<p><strong>2. åŠ å…¥é™æµå™¨</strong></p>
<p>NSQæ²¡æœ‰é™æµï¼Œå¯ä»¥ç”¨ä»¤ç‰Œæ¡¶ç®—æ³•é™åˆ¶æ¥æ”¶é€Ÿç‡ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">import</span> <span class="hljs-string">"golang.org/x/time/rate"</span>

limiter := rate.NewLimiter(<span class="hljs-number">5000</span>, <span class="hljs-number">10000</span>)

<span class="hljs-comment">// æ¥æ”¶æ—¶æ£€æŸ¥</span>
<span class="hljs-keyword">if</span> !limiter.AllowN(time.Now(), <span class="hljs-built_in">len</span>(logs)) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">429</span>  <span class="hljs-comment">// Too Many Requests</span>
}
</code></pre>
<p>é™æµå‚æ•°ï¼š</p>
<ul>
<li>rate: 5000 - æ¯ç§’æœ€å¤šæ¥æ”¶5000æ¡</li>
<li>burst: 10000 - çªå‘å®¹é‡10000ï¼ˆå…è®¸çŸ­æ—¶é—´çˆ†å‘æµé‡ï¼‰</li>
</ul>
<p><strong>3. èƒŒå‹æœºåˆ¶</strong></p>
<p>å½“é˜Ÿåˆ—ä½¿ç”¨ç‡è¶…è¿‡90%ï¼Œç›´æ¥æ‹’ç»æ–°è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">if</span> queue.UsagePercent() &gt; <span class="hljs-number">0.9</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-number">503</span>  <span class="hljs-comment">// Service Unavailable</span>
}
</code></pre>
<p>è¿™æ ·åšçš„å¥½å¤„ï¼š</p>
<ul>
<li>é˜²æ­¢é˜Ÿåˆ—çˆ†æ»¡å¯¼è‡´å†…å­˜æº¢å‡º</li>
<li>å®¢æˆ·ç«¯æ”¶åˆ°503ä¼šè‡ªåŠ¨é‡è¯•</li>
<li>ç»™ä¸‹æ¸¸å¤„ç†å™¨ç¼“å†²æ—¶é—´</li>
</ul>
<h2 data-id="heading-5">æ ¸å¿ƒä»£ç å®ç°</h2>
<h3 data-id="heading-6">å†…å­˜é˜Ÿåˆ—</h3>
<p>ç›´æ¥å‚è€ƒNSQçš„Topicå®ç°ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// å‚è€ƒ nsqd/topic.go</span>
<span class="hljs-keyword">type</span> MemoryQueue <span class="hljs-keyword">struct</span> {
    memoryMsgChan <span class="hljs-keyword">chan</span> <span class="hljs-keyword">interface</span>{}
    capacity      <span class="hljs-type">int</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewMemoryQueue</span><span class="hljs-params">(capacity <span class="hljs-type">int</span>)</span></span> *MemoryQueue {
    <span class="hljs-keyword">return</span> &amp;MemoryQueue{
        memoryMsgChan: <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">interface</span>{}, capacity),
        capacity:      capacity,
    }
}

<span class="hljs-comment">// éé˜»å¡å…¥é˜Ÿ</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(q *MemoryQueue)</span></span> TryEnqueue(item <span class="hljs-keyword">interface</span>{}) <span class="hljs-type">bool</span> {
    <span class="hljs-keyword">select</span> {
    <span class="hljs-keyword">case</span> q.memoryMsgChan &lt;- item:
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    <span class="hljs-keyword">default</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>  <span class="hljs-comment">// é˜Ÿåˆ—æ»¡</span>
    }
}

<span class="hljs-comment">// æ‰¹é‡å‡ºé˜Ÿ</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(q *MemoryQueue)</span></span> DequeueBatch(batchSize <span class="hljs-type">int</span>) []<span class="hljs-keyword">interface</span>{} {
    result := <span class="hljs-built_in">make</span>([]<span class="hljs-keyword">interface</span>{}, <span class="hljs-number">0</span>, batchSize)
    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; batchSize; i++ {
        <span class="hljs-keyword">select</span> {
        <span class="hljs-keyword">case</span> item := &lt;-q.memoryMsgChan:
            result = <span class="hljs-built_in">append</span>(result, item)
        <span class="hljs-keyword">default</span>:
            <span class="hljs-keyword">return</span> result
        }
    }
    <span class="hljs-keyword">return</span> result
}

<span class="hljs-comment">// é˜Ÿåˆ—ä½¿ç”¨ç‡ï¼ˆGoçš„len(chan)æ˜¯åŸå­çš„ï¼Œæ— éœ€æ‰‹åŠ¨ç»´æŠ¤è®¡æ•°ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(q *MemoryQueue)</span></span> UsagePercent() <span class="hljs-type">float64</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-type">float64</span>(<span class="hljs-built_in">len</span>(q.memoryMsgChan)) / <span class="hljs-type">float64</span>(q.capacity)
}

<span class="hljs-comment">// å‰©ä½™å®¹é‡</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(q *MemoryQueue)</span></span> RemainingCapacity() <span class="hljs-type">int</span> {
    <span class="hljs-keyword">return</span> q.capacity - <span class="hljs-built_in">len</span>(q.memoryMsgChan)
}
</code></pre>
<p>å…³é”®ç‚¹ï¼š</p>
<ul>
<li>ç›´æ¥ä½¿ç”¨ <code>len(chan)</code> è·å–é˜Ÿåˆ—é•¿åº¦ï¼ŒGo runtimeä¿è¯åŸå­æ€§</li>
<li>ä¸éœ€è¦æ‰‹åŠ¨ç»´æŠ¤ <code>size</code> å­—æ®µï¼Œé¿å…å¹¶å‘ç«æ€é—®é¢˜</li>
</ul>
<h3 data-id="heading-7">HTTPæ¥æ”¶å±‚</h3>
<p>å‚è€ƒNSQçš„doMPUBå®ç°æ‰¹é‡æ¥æ”¶ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// å‚è€ƒ nsqd/http.go L266-339</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(h *LogHandler)</span></span> BatchReceive(c *gin.Context) {
    <span class="hljs-keyword">var</span> logs []LogEntry
    <span class="hljs-keyword">if</span> err := c.ShouldBindJSON(&amp;logs); err != <span class="hljs-literal">nil</span> {
        c.JSON(<span class="hljs-number">400</span>, gin.H{<span class="hljs-string">"error"</span>: <span class="hljs-string">"invalid request"</span>})
        <span class="hljs-keyword">return</span>
    }
    
    <span class="hljs-comment">// é™æµæ£€æŸ¥</span>
    <span class="hljs-keyword">if</span> !h.limiter.AllowN(time.Now(), <span class="hljs-built_in">len</span>(logs)) {
        c.JSON(<span class="hljs-number">429</span>, gin.H{<span class="hljs-string">"error"</span>: <span class="hljs-string">"rate limit exceeded"</span>})
        <span class="hljs-keyword">return</span>
    }
    
    <span class="hljs-comment">// èƒŒå‹æ£€æŸ¥ - é¢„æ£€æŸ¥å®¹é‡æ˜¯å¦è¶³å¤Ÿï¼ˆè¦ä¹ˆå…¨æˆåŠŸï¼Œè¦ä¹ˆå…¨æ‹’ç»ï¼‰</span>
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(logs) &gt; h.queue.RemainingCapacity() {
        c.JSON(<span class="hljs-number">503</span>, gin.H{<span class="hljs-string">"error"</span>: <span class="hljs-string">"service busy, please retry"</span>})
        <span class="hljs-keyword">return</span>
    }
    
    <span class="hljs-comment">// æ‰¹é‡å…¥é˜Ÿï¼ˆæ­¤æ—¶å®¹é‡å·²å¤Ÿï¼Œä¸ä¼šå¤±è´¥ï¼‰</span>
    <span class="hljs-keyword">for</span> _, log := <span class="hljs-keyword">range</span> logs {
        h.queue.TryEnqueue(log)
    }
    
    <span class="hljs-comment">// ç«‹å³è¿”å›</span>
    c.JSON(<span class="hljs-number">200</span>, gin.H{
        <span class="hljs-string">"message"</span>: <span class="hljs-string">"ok"</span>,
        <span class="hljs-string">"count"</span>:   <span class="hljs-built_in">len</span>(logs),
    })
}
</code></pre>
<p>æ”¹è¿›ç‚¹ï¼š</p>
<ul>
<li>é¢„æ£€æŸ¥å®¹é‡ï¼Œé¿å…éƒ¨åˆ†å…¥é˜ŸæˆåŠŸã€éƒ¨åˆ†å¤±è´¥çš„å°´å°¬æƒ…å†µ</li>
<li>è¦ä¹ˆå…¨æˆåŠŸï¼Œè¦ä¹ˆå…¨æ‹’ç»ï¼Œç¬¦åˆHTTPè¯­ä¹‰</li>
</ul>
<h3 data-id="heading-8">æ¶ˆè´¹å¤„ç†å™¨</h3>
<p>æ”¹è¿›NSQçš„messagePumpï¼ŒåŠ å…¥æ‰¹é‡å¤„ç†å’Œå®šæ—¶å™¨ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// æ”¹è¿› nsqd/topic.go L247-344</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(p *DataProcessor)</span></span> StartConsumer(queue *MemoryQueue) {
    ticker := time.NewTicker(<span class="hljs-number">500</span> * time.Millisecond)
    <span class="hljs-keyword">defer</span> ticker.Stop()
    
    <span class="hljs-keyword">for</span> <span class="hljs-keyword">range</span> ticker.C {
        <span class="hljs-comment">// æ‰¹é‡å–å‡º1000æ¡</span>
        items := queue.DequeueBatch(<span class="hljs-number">1000</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(items) == <span class="hljs-number">0</span> {
            <span class="hljs-keyword">continue</span>
        }
        
        <span class="hljs-comment">// æ‰¹é‡å¤„ç†</span>
        p.processBatch(items)
    }
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(p *DataProcessor)</span></span> processBatch(items []<span class="hljs-keyword">interface</span>{}) {
    <span class="hljs-comment">// æ‰¹é‡å†™å…¥æ•°æ®åº“</span>
    <span class="hljs-keyword">if</span> err := p.db.BatchInsert(items); err != <span class="hljs-literal">nil</span> {
        log.Printf(<span class="hljs-string">"æ‰¹é‡å†™å…¥å¤±è´¥: %v"</span>, err)
        <span class="hljs-comment">// å¤±è´¥å¤„ç†ï¼šå¯ä»¥å†™å…¥å¤±è´¥é˜Ÿåˆ—ï¼Œç¨åé‡è¯•</span>
    }
}
</code></pre>
<p>å…³é”®ç‚¹ï¼š</p>
<ul>
<li>å®šæ—¶å™¨500msè§¦å‘ä¸€æ¬¡ï¼Œå¹³è¡¡å»¶è¿Ÿå’Œåå</li>
<li>æ¯æ¬¡æœ€å¤šå–1000æ¡ï¼Œæ§åˆ¶å•æ¬¡å¤„ç†æ—¶é—´</li>
<li>æ‰¹é‡å†™å…¥æ•°æ®åº“ï¼Œå‡å°‘ç½‘ç»œå¾€è¿”</li>
</ul>
<blockquote>
<p><strong>ä¼˜åŒ–å»ºè®®</strong>ï¼šè‹¥å¯¹å»¶è¿Ÿæ•æ„Ÿï¼Œå¯æ”¹ç”¨äº‹ä»¶é©±åŠ¨æ¨¡å¼â€”â€”å½“å…¥é˜Ÿåå‘ç°é˜Ÿåˆ—ä»ç©ºå˜éç©ºæ—¶ï¼Œä¸»åŠ¨å”¤é†’æ¶ˆè´¹è€…goroutineï¼Œè€Œä¸æ˜¯è¢«åŠ¨ç­‰å¾…å®šæ—¶å™¨è§¦å‘ã€‚</p>
</blockquote>
<h2 data-id="heading-9">æ€§èƒ½æµ‹è¯•</h2>
<h3 data-id="heading-10">æµ‹è¯•é…ç½®</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1000æ¬¡è¯·æ±‚ï¼Œ50å¹¶å‘ï¼Œæ¯æ‰¹200æ¡æ—¥å¿—</span>
go run <span class="hljs-built_in">test</span>/main.go -n 1000 -c 50 -b 200
</code></pre>
<h3 data-id="heading-11">æµ‹è¯•ç»“æœ</h3>

































<table><thead><tr><th>æŒ‡æ ‡</th><th>å®æµ‹å€¼</th></tr></thead><tbody><tr><td>ååé‡</td><td>5194 logs/s</td></tr><tr><td>å¹³å‡å»¶è¿Ÿ</td><td>25ms</td></tr><tr><td>P99å»¶è¿Ÿ</td><td>48ms</td></tr><tr><td>æˆåŠŸç‡</td><td>100%</td></tr><tr><td>CPUä½¿ç”¨ç‡</td><td>40-50%</td></tr><tr><td>å†…å­˜å ç”¨</td><td>500MB-1GB</td></tr></tbody></table>
<h3 data-id="heading-12">æ•°æ®æµå¯¹æ¯”</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant C as å®¢æˆ·ç«¯
    participant H as HTTPæ¥å£
    participant Q as å†…å­˜é˜Ÿåˆ—
    participant P as æ¶ˆè´¹è€…
    participant D as æ•°æ®åº“
    
    C-&gt;&gt;H: æ‰¹é‡200æ¡(2ms)
    H-&gt;&gt;Q: å¿«é€Ÿå…¥é˜Ÿ(3ms)
    H--&gt;&gt;C: è¿”å›æˆåŠŸ(æ€»è€—æ—¶5ms)
    
    Note over Q,P: å¼‚æ­¥å¤„ç†
    P-&gt;&gt;Q: æ‰¹é‡å–1000æ¡(1ms)
    P-&gt;&gt;P: æ•°æ®å¤„ç†(10ms)
    P-&gt;&gt;D: æ‰¹é‡å†™å…¥(20ms)
</code></pre>
<p>å…³é”®ç‚¹ï¼š</p>
<ul>
<li>HTTPæ¥å£5mså†…è¿”å›ï¼Œä¸é˜»å¡å®¢æˆ·ç«¯</li>
<li>æ¶ˆè´¹è€…å¼‚æ­¥å¤„ç†ï¼Œå»¶è¿Ÿåœ¨ç§’çº§å¯æ¥å—</li>
<li>æ‰¹é‡å†™å…¥æ•°æ®åº“ï¼Œå‡å°‘IOæ¬¡æ•°</li>
</ul>
<h2 data-id="heading-13">å®¢æˆ·ç«¯é›†æˆ</h2>
<h3 data-id="heading-14">Logstashé…ç½®ç¤ºä¾‹</h3>
<pre><code class="hljs language-ruby" lang="ruby">output {
  http {
    url =&gt; <span class="hljs-string">"http://data-service:8080/api/data/batch"</span>
    http_method =&gt; <span class="hljs-string">"post"</span>
    format =&gt; <span class="hljs-string">"json_batch"</span>
    
    batch =&gt; <span class="hljs-number">200</span>           <span class="hljs-comment"># æ‰¹é‡200æ¡</span>
    batch_timeout =&gt; <span class="hljs-number">2</span>     <span class="hljs-comment"># æœ€å¤šç­‰2ç§’</span>
    
    retryable_codes =&gt; [<span class="hljs-number">429</span>, <span class="hljs-number">503</span>]
    retry_times =&gt; <span class="hljs-number">3</span>
  }
}
</code></pre>
<h3 data-id="heading-15">å…¶ä»–å®¢æˆ·ç«¯</h3>
<p>ä»»ä½•HTTPå®¢æˆ·ç«¯éƒ½å¯ä»¥è°ƒç”¨ï¼Œå…³é”®æ˜¯è¦æ‰¹é‡å‘é€ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// Goå®¢æˆ·ç«¯ç¤ºä¾‹</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">batchSend</span><span class="hljs-params">(items []Data)</span></span> <span class="hljs-type">error</span> {
    body, _ := json.Marshal(items)
    resp, err := http.Post(
        <span class="hljs-string">"http://data-service:8080/api/data/batch"</span>,
        <span class="hljs-string">"application/json"</span>,
        bytes.NewBuffer(body),
    )
    
    <span class="hljs-keyword">if</span> resp.StatusCode == <span class="hljs-number">429</span> {
        <span class="hljs-comment">// é™æµï¼Œç¨åé‡è¯•</span>
        time.Sleep(time.Second)
        <span class="hljs-keyword">return</span> batchSend(items)
    }
    
    <span class="hljs-keyword">if</span> resp.StatusCode == <span class="hljs-number">503</span> {
        <span class="hljs-comment">// èƒŒå‹ï¼Œç¨åé‡è¯•</span>
        time.Sleep(time.Second * <span class="hljs-number">2</span>)
        <span class="hljs-keyword">return</span> batchSend(items)
    }
    
    <span class="hljs-keyword">return</span> err
}
</code></pre>
<p>å·¥ä½œæµç¨‹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æ•°æ®æº] --&gt; B[é‡‡é›†ç¨‹åº]
    B --&gt; C[æ‰¹é‡å‘é€]
    C --&gt; D[é«˜æ€§èƒ½API]
    D --&gt; E[æ‰¹é‡å¤„ç†]
    E --&gt; F[æ•°æ®åº“/ä¸‹æ¸¸]
</code></pre>
<h2 data-id="heading-16">ä¸NSQçš„å¯¹æ¯”</h2>





















































<table><thead><tr><th>åŠŸèƒ½</th><th>NSQ</th><th>æœ¬æ–¹æ¡ˆ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å†…å­˜é˜Ÿåˆ—</td><td>channel</td><td>channel</td><td>å®Œå…¨ä¸€è‡´</td></tr><tr><td>å…¥é˜Ÿé€»è¾‘</td><td>selectéé˜»å¡</td><td>selectéé˜»å¡</td><td>å®Œå…¨ä¸€è‡´</td></tr><tr><td>æ¶ˆè´¹æ–¹å¼</td><td>å•æ¡select</td><td>æ‰¹é‡+å®šæ—¶å™¨</td><td>æ”¹è¿›ç‚¹</td></tr><tr><td>é™æµ</td><td>æ— </td><td>ä»¤ç‰Œæ¡¶</td><td>æ–°å¢</td></tr><tr><td>èƒŒå‹</td><td>å†™ç£ç›˜</td><td>æ‹’ç»è¯·æ±‚</td><td>ç®€åŒ–</td></tr><tr><td>æŒä¹…åŒ–</td><td>diskqueue</td><td>æ— </td><td>åˆ é™¤</td></tr><tr><td>æœåŠ¡å‘ç°</td><td>nsqlookupd</td><td>æ— </td><td>åˆ é™¤</td></tr></tbody></table>
<p>æ ¸å¿ƒæ€æƒ³ï¼šå¤ç”¨NSQçš„é˜Ÿåˆ—è®¾è®¡ï¼Œåˆ é™¤ä¸éœ€è¦çš„åˆ†å¸ƒå¼ç‰¹æ€§ï¼ŒåŠ å…¥é™æµå’ŒèƒŒå‹ä¿æŠ¤ã€‚</p>
<h2 data-id="heading-17">ç›‘æ§å»ºè®®</h2>
<p>å…³é”®æŒ‡æ ‡ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// é˜Ÿåˆ—ç›‘æ§</span>
queue_size         <span class="hljs-comment">// å½“å‰é˜Ÿåˆ—é•¿åº¦</span>
queue_capacity     <span class="hljs-comment">// é˜Ÿåˆ—å®¹é‡</span>
queue_usage_pct    <span class="hljs-comment">// ä½¿ç”¨ç‡ç™¾åˆ†æ¯”</span>

<span class="hljs-comment">// é™æµç›‘æ§</span>
rate_limit_hits    <span class="hljs-comment">// è§¦å‘é™æµæ¬¡æ•°(429)</span>
backpressure_hits  <span class="hljs-comment">// è§¦å‘èƒŒå‹æ¬¡æ•°(503)</span>

<span class="hljs-comment">// æ€§èƒ½ç›‘æ§</span>
throughput         <span class="hljs-comment">// ååé‡(æ¡/ç§’)</span>
latency_p99        <span class="hljs-comment">// P99å»¶è¿Ÿ</span>
batch_process_time <span class="hljs-comment">// æ‰¹é‡å¤„ç†è€—æ—¶</span>
</code></pre>
<p>å‘Šè­¦é˜ˆå€¼ï¼š</p>
<ul>
<li>é˜Ÿåˆ—ä½¿ç”¨ç‡ &gt; 80%ï¼šé¢„è­¦ï¼Œå‡†å¤‡æ‰©å®¹</li>
<li>é˜Ÿåˆ—ä½¿ç”¨ç‡ &gt; 95%ï¼šå‘Šè­¦ï¼Œç«‹å³æ‰©å®¹</li>
<li>é™æµè§¦å‘é¢‘ç‡ &gt; 100æ¬¡/åˆ†é’Ÿï¼šå®¢æˆ·ç«¯æµé‡è¿‡å¤§</li>
<li>æ‰¹é‡å¤„ç†è€—æ—¶ &gt; 1ç§’ï¼šä¸‹æ¸¸æ…¢ï¼Œéœ€è¦ä¼˜åŒ–</li>
</ul>
<h2 data-id="heading-18">æ€»ç»“</h2>
<p>è¿™ä¸ªæ–¹æ¡ˆçš„æ ¸å¿ƒæ€æƒ³å¾ˆç®€å•ï¼š<strong>ç”¨å†…å­˜é˜Ÿåˆ—è§£è€¦æ¥æ”¶å’Œå¤„ç†ï¼Œç”¨æ‰¹é‡æ“ä½œæå‡æ•ˆç‡</strong>ã€‚</p>
<p>å…·ä½“åšæ³•ï¼š</p>
<ol>
<li>ç”¨NSQçš„å†…å­˜é˜Ÿåˆ—è®¾è®¡ï¼ˆchannel + selectï¼‰</li>
<li>HTTPæ¥å£å¿«é€Ÿå…¥é˜Ÿç«‹å³è¿”å›ï¼ˆ5msï¼‰</li>
<li>æ¶ˆè´¹è€…æ‰¹é‡å¤„ç†ï¼ˆ1000æ¡/æ‰¹ï¼‰</li>
<li>åŠ ä¸Šé™æµå’ŒèƒŒå‹ä¿æŠ¤</li>
</ol>
<p>æ€§èƒ½è¡¨ç°ï¼š</p>
<ul>
<li>ååé‡ï¼š5000+ æ¡/s</li>
<li>å»¶è¿Ÿï¼šP99 &lt; 50ms</li>
<li>èµ„æºå ç”¨ï¼š4æ ¸CPU 40%ï¼Œå†…å­˜1GB</li>
</ul>
<p>é€‚ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>æ•°æ®é‡ï¼š5000æ¡/ç§’ä»¥å†…</li>
<li>å•æœºæˆ–å°‘é‡å®ä¾‹éƒ¨ç½²</li>
<li>ä¸éœ€è¦æ•°æ®æŒä¹…åŒ–</li>
<li>ç§’çº§å¤„ç†å»¶è¿Ÿå¯æ¥å—</li>
</ul>
<p>ä¸é€‚åˆçš„åœºæ™¯ï¼š</p>
<ul>
<li>æ•°æ®é‡ä¸‡çº§/ç§’ï¼šç›´æ¥ä¸ŠKafka</li>
<li>éœ€è¦å¼ºä¸€è‡´æ€§ï¼šç”¨æ¶ˆæ¯é˜Ÿåˆ—</li>
<li>è·¨æœºæˆ¿åˆ†å¸ƒå¼ï¼šç”¨å®Œæ•´çš„NSQæˆ–Kafka</li>
</ul>
<p>è¿™ä¸ªè®¾è®¡æ€è·¯ä¸ä»…é€‚ç”¨äºæ—¥å¿—å¤„ç†ï¼Œä»»ä½•éœ€è¦é«˜å¹¶å‘å†™å…¥çš„åœºæ™¯éƒ½å¯ä»¥å¥—ç”¨ï¼š</p>
<ul>
<li>æ•°æ®é‡‡é›†API</li>
<li>åŸ‹ç‚¹ä¸ŠæŠ¥API</li>
<li>è®¢å•æµæ°´API</li>
<li>ç›‘æ§æŒ‡æ ‡API</li>
</ul>
<p>æœ€åï¼Œæ„Ÿè°¢NSQæä¾›äº†è¿™ä¹ˆä¼˜é›…çš„è®¾è®¡ã€‚Goè¯­è¨€å†™å‡ºæ¥çš„ä»£ç çœŸçš„å¾ˆæ¸…æ™°ï¼Œå»ºè®®å¤§å®¶æœ‰ç©ºå»è¯»è¯»NSQçš„æºç ï¼Œç‰¹åˆ«æ˜¯<code>nsqd/topic.go</code>è¿™ä¸ªæ–‡ä»¶ï¼Œä¼šæœ‰å¾ˆå¤šæ”¶è·ã€‚</p>
<h2 data-id="heading-19">å‚è€ƒèµ„æ–™</h2>
<ul>
<li>NSQå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fnsq.io%2F" target="_blank" title="https://nsq.io/" ref="nofollow noopener noreferrer">nsq.io/</a></li>
<li>NSQæºç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnsqio%2Fnsq" target="_blank" title="https://github.com/nsqio/nsq" ref="nofollow noopener noreferrer">github.com/nsqio/nsq</a></li>
<li>ä¸Šä¸€ç¯‡ï¼š<a href="https://juejin.cn/post/7582118538562404371" target="_blank" title="https://juejin.cn/post/7582118538562404371">æ¯å¤©ä¸Šäº¿æ¡æ—¥å¿—ï¼ŒElasticsearch æ˜¯æ€ä¹ˆæ‰›ä½çš„ï¼Ÿ</a></li>
<li>Goé™æµåº“ï¼šgolang.org/x/time/rate</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ”¯ä»˜å›è°ƒå¤„ç†ï¼Œå’±å¾—æ•´å¾— â€œå¹‚ç­‰å¯é â€ ä¸ç¿»è½¦]]></title>    <link>https://juejin.cn/post/7582422766731313195</link>    <guid>https://juejin.cn/post/7582422766731313195</guid>    <pubDate>2025-12-12T01:32:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582422766731313195" data-draft-id="7582438809378603050" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ”¯ä»˜å›è°ƒå¤„ç†ï¼Œå’±å¾—æ•´å¾— â€œå¹‚ç­‰å¯é â€ ä¸ç¿»è½¦"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2025-12-12T01:32:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤©å¤©æ‘¸é±¼çš„javaå·¥ç¨‹å¸ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3109843365802925"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ”¯ä»˜å›è°ƒå¤„ç†ï¼Œå’±å¾—æ•´å¾— â€œå¹‚ç­‰å¯é â€ ä¸ç¿»è½¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3109843365802925/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤©å¤©æ‘¸é±¼çš„javaå·¥ç¨‹å¸ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T01:32:05.000Z" title="Fri Dec 12 2025 01:32:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ”¯ä»˜å›è°ƒå¤„ç†ï¼Œå’±å¾—æ•´å¾— â€œå¹‚ç­‰å¯é â€ ä¸ç¿»è½¦</h2>
<blockquote>
<p>ä½œä¸ºä¸€ä¸ªå†™äº† 8 å¹´ Java çš„è€å…µï¼Œè¯´å®è¯ï¼Œæ”¯ä»˜å›è°ƒè¿™ç©æ„ï¼Œå±å®ä¸èƒ½é©¬è™ã€‚ä¸€ä¸å°å¿ƒå°± â€œç¿»è½¦â€ã€‚æœ¬æ–‡å°±ä»å®æˆ˜è§’åº¦èŠèŠï¼Œå¦‚ä½•ç”¨ <strong>å¹‚ç­‰å¯é çš„å§¿åŠ¿</strong>ï¼Œä¼˜é›…å¤„ç†æ”¯ä»˜å›è°ƒã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">ğŸ’¥ å…ˆè¯´é—®é¢˜ï¼šæ”¯ä»˜å›è°ƒä¸ºå•¥è¿™ä¹ˆæ•æ„Ÿï¼Ÿ</h3>
<p>æ”¯ä»˜å›è°ƒï¼Œç®€å•è¯´ï¼Œå°±æ˜¯ç”¨æˆ·ä»˜æ¬¾åï¼Œç¬¬ä¸‰æ–¹æ”¯ä»˜å¹³å°ï¼ˆæ¯”å¦‚æ”¯ä»˜å®ã€å¾®ä¿¡ï¼‰ä¼šæŠŠâ€œä»˜æ¬¾æˆåŠŸâ€çš„æ¶ˆæ¯å›è°ƒç»™æˆ‘ä»¬ç³»ç»Ÿã€‚</p>
<p><strong>BUTï¼</strong> å›è°ƒå¯èƒ½ï¼š</p>
<ul>
<li>è¢«å¤šæ¬¡è§¦å‘ï¼ˆæ”¯ä»˜å¹³å°é‡è¯•æœºåˆ¶ï¼‰</li>
<li>è¢«æ¶æ„ä¼ªé€ ï¼ˆå®‰å…¨é—®é¢˜ï¼‰</li>
<li>åˆ°è¾¾é¡ºåºä¸ä¸€è‡´ï¼ˆå¹¶å‘é—®é¢˜ï¼‰</li>
</ul>
<p>å¦‚æœæˆ‘ä»¬ç³»ç»Ÿé‡Œå¯¹åŒä¸€è®¢å•å¤„ç†å¤šæ¬¡ï¼Œå°±å¯èƒ½å‡ºç°ï¼š</p>
<ul>
<li><strong>é‡å¤å‘è´§</strong></li>
<li><strong>å¤šæ¬¡å‘æ”¾ä¼˜æƒ åˆ¸</strong></li>
<li><strong>é”™è¯¯ä¸šåŠ¡çŠ¶æ€</strong></li>
</ul>
<p>è¿™å°±å°´å°¬äº†ï¼Œä¸šåŠ¡ä¹Ÿç¿»è½¦ï¼Œå®¢æˆ·ä¹Ÿä¸æ»¡ï¼Œè€æ¿ä¹Ÿå‘ç«ã€‚</p>
<hr/>
<h3 data-id="heading-2">ğŸ¯ æ ¸å¿ƒç›®æ ‡ï¼š<strong>å¹‚ç­‰ + å®‰å…¨ + é«˜å¯ç”¨</strong></h3>
<p>æˆ‘ä»¬è¦çš„ä¸æ˜¯â€œå¤„ç†ä¸€æ¬¡â€ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li><strong>æ— è®ºå¤šå°‘æ¬¡å›è°ƒï¼Œä¸šåŠ¡åªå¤„ç†ä¸€æ¬¡</strong></li>
<li><strong>é˜²æ­¢ä¼ªé€ </strong></li>
<li><strong>ä¿è¯é«˜å¹¶å‘ä¸‹ä¸å‡ºé”™</strong></li>
</ul>
<hr/>
<h3 data-id="heading-3">ğŸ§  æ€è·¯æ‹†è§£</h3>
<h4 data-id="heading-4">âœ… 1. æ ¡éªŒç­¾åï¼ŒéªŒè¯æ¥æº</h4>
<p>ç¡®ä¿æ˜¯æ”¯ä»˜å¹³å°çœŸçš„å‘çš„è¯·æ±‚ï¼Œä¸æ˜¯åˆ«äººä¼ªé€ çš„ã€‚</p>
<h4 data-id="heading-5">âœ… 2. æ ¡éªŒä¸šåŠ¡å‚æ•°</h4>
<p>æ¯”å¦‚æ ¡éªŒè®¢å•æ˜¯å¦å­˜åœ¨ã€æ”¯ä»˜é‡‘é¢æ˜¯å¦æ­£ç¡®ç­‰ã€‚</p>
<h4 data-id="heading-6">âœ… 3. å¹‚ç­‰å¤„ç†æ ¸å¿ƒï¼š<strong>çŠ¶æ€æœº + ä¹è§‚é” / åˆ†å¸ƒå¼é”</strong></h4>
<p>è®¢å•çŠ¶æ€ä» â€œå¾…æ”¯ä»˜â€ â†’ â€œå·²æ”¯ä»˜â€ï¼Œåªå…è®¸çŠ¶æ€ä»å‰å¾€åæµè½¬ï¼Œ<strong>ä»»ä½•é‡å¤è¯·æ±‚éƒ½ä¸å†å¤„ç†</strong>ã€‚</p>
<h4 data-id="heading-7">âœ… 4. å¼‚å¸¸å‹å¥½ï¼Œæ—¥å¿—è®°å½•</h4>
<p>ä»»ä½•å¼‚å¸¸ã€éæ³•è¯·æ±‚éƒ½è¦è®°å½•æ—¥å¿—ï¼Œæ–¹ä¾¿æ’æŸ¥ã€‚</p>
<hr/>
<h3 data-id="heading-8">ğŸ§ª å®æˆ˜ä»£ç </h3>
<p>ä¸‹é¢ç›´æ¥ä¸Šå…³é”®ä»£ç ï¼ŒåŸºäº Spring Boot + MyBatis Plus å®ç°ã€‚</p>
<h4 data-id="heading-9">ğŸšª æ§åˆ¶å™¨å…¥å£</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@PostMapping(<span class="hljs-string">"/api/pay/callback"</span>)</span>
<span class="hljs-keyword">public</span> String handlePayCallback(<span class="hljs-meta">@RequestBody</span> PayCallbackRequest request) {
    log.info(<span class="hljs-string">"æ”¶åˆ°æ”¯ä»˜å›è°ƒï¼š{}"</span>, request);

    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// 1. éªŒç­¾</span>
        <span class="hljs-keyword">if</span> (!payService.verifySignature(request)) {
            log.warn(<span class="hljs-string">"éªŒç­¾å¤±è´¥ï¼"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-string">"FAIL"</span>;
        }

        <span class="hljs-comment">// 2. å¹‚ç­‰å¤„ç†</span>
        payService.handleCallback(request);

        <span class="hljs-keyword">return</span> <span class="hljs-string">"SUCCESS"</span>;
    } <span class="hljs-keyword">catch</span> (Exception e) {
        log.error(<span class="hljs-string">"å¤„ç†æ”¯ä»˜å›è°ƒå¼‚å¸¸"</span>, e);
        <span class="hljs-keyword">return</span> <span class="hljs-string">"FAIL"</span>;
    }
}
</code></pre>
<hr/>
<h4 data-id="heading-10">ğŸ§° æ ¸å¿ƒå¤„ç†é€»è¾‘</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@Transactional</span>
public void handleCallback(PayCallbackRequest request) {
    String orderNo = request<span class="hljs-selector-class">.getOrderNo</span>();

    <span class="hljs-comment">// 1. æŸ¥è¯¢è®¢å•</span>
    <span class="hljs-attribute">Order</span> <span class="hljs-attribute">order</span> = orderMapper<span class="hljs-selector-class">.selectByOrderNo</span>(orderNo);
    if (order == null) {
        throw new <span class="hljs-built_in">BizException</span>("è®¢å•ä¸å­˜åœ¨");
    }

    <span class="hljs-comment">// 2. æ ¡éªŒé‡‘é¢</span>
    if (!request.getAmount()<span class="hljs-selector-class">.equals</span>(order.getAmount())) {
        throw new <span class="hljs-built_in">BizException</span>("é‡‘é¢ä¸ä¸€è‡´");
    }

    <span class="hljs-comment">// 3. å¹‚ç­‰åˆ¤æ–­ - å·²å¤„ç†ç›´æ¥è¿”å›</span>
    if (OrderStatus.PAID.equals(order.getStatus())) {
        log<span class="hljs-selector-class">.info</span>("è®¢å•å·²å¤„ç†ï¼Œæ— éœ€é‡å¤å¤„ç†: {}", orderNo);
        return;
    }

    <span class="hljs-comment">// 4. æ›´æ–°è®¢å•çŠ¶æ€ï¼ˆä¹è§‚é”ï¼‰</span>
    int rows = orderMapper<span class="hljs-selector-class">.updateStatus</span>(
        orderNo,
        OrderStatus.WAIT_PAY,
        OrderStatus.PAID
    );

    if (rows == <span class="hljs-number">0</span>) {
        log<span class="hljs-selector-class">.warn</span>("è®¢å•çŠ¶æ€æ›´æ–°å¤±è´¥ï¼Œå¯èƒ½æ˜¯å¹¶å‘å¯¼è‡´ï¼š{}", orderNo);
        return; <span class="hljs-comment">// å¹¶å‘è¯·æ±‚ä¸­ï¼Œå…¶ä»–çº¿ç¨‹å·²æ›´æ–°</span>
    }

    <span class="hljs-comment">// 5. å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼ˆæ¯”å¦‚å‘è´§ã€å‘æ”¾ä¼˜æƒ åˆ¸ç­‰ï¼‰</span>
    bizService<span class="hljs-selector-class">.doAfterPayment</span>(order);
}
</code></pre>
<hr/>
<h4 data-id="heading-11">âœ… ä¹è§‚é”å®ç°ï¼ˆMyBatis Plusï¼‰</h4>
<p>æ•°æ®åº“è¡¨å­—æ®µ <code>version</code> å¼€å¯ä¹è§‚é”æ”¯æŒï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Version</span>
<span class="hljs-keyword">private</span> Integer version;
</code></pre>
<p>æ›´æ–° SQL ä½¿ç”¨ <code>WHERE status = ? AND version = ?</code> æ–¹å¼ï¼Œç¡®ä¿å¹¶å‘ä¸‹åªæœ‰ä¸€æ¬¡èƒ½æˆåŠŸã€‚</p>
<hr/>
<h3 data-id="heading-12">ğŸ” éªŒç­¾é€»è¾‘ï¼ˆä¼ªä»£ç ï¼‰</h3>
<pre><code class="hljs language-ini" lang="ini">public boolean verifySignature(PayCallbackRequest request) {
    String <span class="hljs-attr">data</span> = request.toSignString()<span class="hljs-comment">; // è½¬æ¢ä¸ºæŒ‰é¡ºåºæ‹¼æ¥çš„å­—ç¬¦ä¸²</span>
    String <span class="hljs-attr">signature</span> = request.getSign()<span class="hljs-comment">;</span>

    String <span class="hljs-attr">expected</span> = SignUtil.sign(data, PAYMENT_SECRET_KEY)<span class="hljs-comment">;</span>
    return expected.equals(signature)<span class="hljs-comment">;</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-13">ğŸ§± æ•°æ®åº“è®¾è®¡å»ºè®®</h3>
<p>è®¢å•è¡¨å­—æ®µï¼š</p>
<ul>
<li><code>order_no</code>ï¼šè®¢å•å·ï¼ˆå”¯ä¸€ç´¢å¼•ï¼‰</li>
<li><code>status</code>ï¼šè®¢å•çŠ¶æ€ï¼ˆæšä¸¾ï¼‰</li>
<li><code>amount</code>ï¼šè®¢å•é‡‘é¢</li>
<li><code>version</code>ï¼šä¹è§‚é”å­—æ®µ</li>
</ul>
<hr/>
<h3 data-id="heading-14">ğŸ§  æœ€ä½³å®è·µ Tipsï¼š</h3>
<ul>
<li><strong>ä½¿ç”¨æœ¬åœ°äº‹åŠ¡ç»Ÿä¸€ç®¡ç†çŠ¶æ€ä¿®æ”¹å’Œä¸šåŠ¡å¤„ç†</strong></li>
<li><strong>å¹¶å‘å¤„ç†ç”¨ä¹è§‚é”ä¼˜äºåˆ†å¸ƒå¼é”</strong></li>
<li><strong>é‡è¦æ—¥å¿—æ‰“å…¨ï¼ŒåæœŸæ’æŸ¥å®¹æ˜“</strong></li>
<li><strong>æ”¯ä»˜å›è°ƒè¦è®°å½•åŸå§‹æŠ¥æ–‡ï¼Œæ–¹ä¾¿è¿½æº¯</strong></li>
</ul>
<hr/>
<h3 data-id="heading-15">âœ… æ€»ç»“</h3>
<p>æ”¯ä»˜å›è°ƒè¿™ä»¶äº‹ï¼Œæœ€å¿Œè®³çš„å°±æ˜¯ â€œæƒ³å½“ç„¶â€ã€‚ä½ ä»¥ä¸ºåªä¼šæ¥ä¸€æ¬¡ï¼Œä½†ç°å®æ˜¯ â€”â€” <strong>å¯èƒ½æ¥åæ¬¡</strong>ï¼Œè¿˜ä¸ä¸€å®šæ˜¯å¹³å°å‘çš„ã€‚</p>
<p>æ‰€ä»¥ï¼š</p>
<ul>
<li><strong>å¹‚ç­‰æ€§</strong> æ˜¯åº•çº¿</li>
<li><strong>å®‰å…¨æ€§</strong> æ˜¯å‰æ</li>
<li><strong>é«˜å¯ç”¨</strong> æ˜¯ä¿éšœ</li>
</ul>
<blockquote>
<p>å’±å†™ä»£ç çš„é£æ ¼å°±ä¸€å¥è¯ï¼š<strong>ä¸ç¿»è½¦ã€ä¸æ‰å‘ã€èƒ½å¤ç”¨ã€èƒ½æ‰©å±•ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-16">ğŸš€ å¦‚æœä½ ä¹Ÿåœ¨åšæ”¯ä»˜ç³»ç»Ÿ</h3>
<p>æ¬¢è¿ç•™è¨€äº¤æµï¼Œæˆ–è€…ç›´æ¥åœ¨è¯„è®ºåŒºè´´å‡ºä½ ä»¬çš„å›è°ƒå¤„ç†å§¿åŠ¿ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æŠŠâ€œå¹‚ç­‰â€æ•´æ˜ç™½ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€æˆ‘è®© TRAE SOLO å†™äº†ä¸€ä¸ªæ”¯æŒå¾®ä¿¡ã€æ”¯ä»˜å®ã€å¯¹å…¬è´¦æˆ·çš„æ”¯ä»˜ç³»ç»Ÿï¼Œç”¨ä¸Šäº†è®¾è®¡æ¨¡å¼ï¼Œå¤ªç‰›äº†ï¼]]></title>    <link>https://juejin.cn/post/7582422766731378731</link>    <guid>https://juejin.cn/post/7582422766731378731</guid>    <pubDate>2025-12-12T01:35:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582422766731378731" data-draft-id="7582422766731362347" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€æˆ‘è®© TRAE SOLO å†™äº†ä¸€ä¸ªæ”¯æŒå¾®ä¿¡ã€æ”¯ä»˜å®ã€å¯¹å…¬è´¦æˆ·çš„æ”¯ä»˜ç³»ç»Ÿï¼Œç”¨ä¸Šäº†è®¾è®¡æ¨¡å¼ï¼Œå¤ªç‰›äº†ï¼"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2025-12-12T01:35:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤©å¤©æ‘¸é±¼çš„javaå·¥ç¨‹å¸ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3109843365802925"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€æˆ‘è®© TRAE SOLO å†™äº†ä¸€ä¸ªæ”¯æŒå¾®ä¿¡ã€æ”¯ä»˜å®ã€å¯¹å…¬è´¦æˆ·çš„æ”¯ä»˜ç³»ç»Ÿï¼Œç”¨ä¸Šäº†è®¾è®¡æ¨¡å¼ï¼Œå¤ªç‰›äº†ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3109843365802925/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤©å¤©æ‘¸é±¼çš„javaå·¥ç¨‹å¸ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T01:35:59.000Z" title="Fri Dec 12 2025 01:35:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸš€æˆ‘è®© TRAE SOLO å†™äº†ä¸€ä¸ªæ”¯æŒå¾®ä¿¡ã€æ”¯ä»˜å®ã€å¯¹å…¬è´¦æˆ·çš„æ”¯ä»˜ç³»ç»Ÿï¼Œç”¨ä¸Šäº†è®¾è®¡æ¨¡å¼ï¼Œå¤ªç‰›äº†ï¼</h2>
<hr/>
<blockquote>
<p>ä½œè€…ï½œå¤©å¤©æ‘¸é±¼çš„ Java å·¥ç¨‹å¸ˆ<br/>
æ ‡ç­¾ï½œTRAE SOLOã€è®¾è®¡æ¨¡å¼ã€æ”¯ä»˜ç³»ç»Ÿã€ç­–ç•¥æ¨¡å¼ã€Javaã€AI ç¼–ç¨‹åŠ©æ‰‹<br/>
é¡¹ç›®å…³é”®è¯ï½œå¾®ä¿¡æ”¯ä»˜ã€æ”¯ä»˜å®æ”¯ä»˜ã€å¯¹å…¬è´¦æˆ·ã€æ”¯ä»˜æ¥å£ã€ç­–ç•¥æ¨¡å¼</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">ğŸ§  èµ·å› ï¼šæˆ‘æƒ³å®ç°ä¸€ä¸ªå¤šç§æ”¯ä»˜æ–¹å¼çš„ç³»ç»Ÿï¼Œä¸æƒ³è‡ªå·±å†™</h3>
<p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæ”¯ä»˜é›†æˆæ—©å·²å¸ç©ºè§æƒ¯ã€‚ä½†ä½ æœ‰æ²¡æœ‰è¯•è¿‡ï¼š</p>
<blockquote>
<p>â€œç”¨ AI æ¥å¸®ä½ å†™ä¸€ä¸ªé«˜å¯æ‰©å±•ã€å¯ç»´æŠ¤ã€ä½¿ç”¨<strong>è®¾è®¡æ¨¡å¼</strong>çš„æ”¯ä»˜ç³»ç»Ÿï¼Ÿâ€</p>
</blockquote>
<p>äºæ˜¯æˆ‘å°è¯•å‘Šè¯‰æˆ‘çš„ AI ç¼–ç¨‹åŠ©æ‰‹ TRAE SOLOï¼š</p>
<blockquote>
<p><strong>â€œå¸®æˆ‘ç”¨è®¾è®¡æ¨¡å¼å†™ä¸€ä¸ªæ”¯ä»˜ç³»ç»Ÿï¼Œæ”¯æŒå¾®ä¿¡æ”¯ä»˜ã€æ”¯ä»˜å®ã€å¯¹å…¬è´¦æˆ·æ”¯ä»˜ç­‰ã€‚â€</strong></p>
</blockquote>
<p>å®ƒçš„å“åº”é€Ÿåº¦å’Œå®ç°è´¨é‡è®©æˆ‘æ„Ÿåˆ°æƒŠè‰³ã€‚æ¥ä¸‹æ¥æ˜¯å®ƒçš„å®ç°è¿‡ç¨‹å’Œæˆ‘å¯¹å®ƒçš„ç†è§£ã€‚</p>
<hr/>
<h3 data-id="heading-2">âœ… éœ€æ±‚åˆ†æ</h3>
<p>ä¸€ä¸ªå…¸å‹çš„æ”¯ä»˜ç³»ç»Ÿéœ€è¦ï¼š</p>
<ol>
<li><strong>ç»Ÿä¸€çš„æ”¯ä»˜æ¥å£</strong>ï¼ˆæ¥å£éš”ç¦»ï¼‰</li>
<li>æ”¯æŒå¤šç§æ”¯ä»˜æ–¹å¼ï¼ˆå¦‚å¾®ä¿¡ã€æ”¯ä»˜å®ã€å¯¹å…¬è½¬è´¦ç­‰ï¼‰</li>
<li>åæœŸä¾¿äºæ‰©å±•æ–°çš„æ”¯ä»˜æ–¹å¼ï¼ˆå¦‚é“¶è”ã€PayPalï¼‰</li>
<li>æ¯ç§æ”¯ä»˜æ–¹å¼å®ç°è‡ªå·±çš„é€»è¾‘</li>
<li>ä½¿ç”¨<strong>è®¾è®¡æ¨¡å¼</strong>æå‡æ¶æ„è´¨é‡</li>
</ol>
<hr/>
<h3 data-id="heading-3">ğŸ§° TRAE SOLO é€‰æ‹©äº† â€”â€” ç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰</h3>
<p>è¿™æ­£æ˜¯æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­éå¸¸å¸¸ç”¨çš„è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ä¹‹ä¸€ã€‚</p>
<p><strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong></p>
<blockquote>
<p>å°†æ¯ç§æ”¯ä»˜æ–¹å¼å°è£…æˆä¸€ä¸ªç­–ç•¥ï¼Œè¿è¡Œæ—¶åŠ¨æ€é€‰æ‹©æŸç§æ”¯ä»˜ç­–ç•¥è¿›è¡Œæ”¯ä»˜ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-4">ğŸ“¦ ç³»ç»Ÿç»“æ„é¢„è§ˆ</h3>
<pre><code class="hljs language-perl" lang="perl">payment-<span class="hljs-keyword">system</span>/
â”œâ”€â”€ PaymentStrategy.java        <span class="hljs-comment"># æ”¯ä»˜ç­–ç•¥æ¥å£</span>
â”œâ”€â”€ WeChatPayStrategy.java     <span class="hljs-comment"># å¾®ä¿¡æ”¯ä»˜å®ç°</span>
â”œâ”€â”€ AlipayStrategy.java        <span class="hljs-comment"># æ”¯ä»˜å®æ”¯ä»˜å®ç°</span>
â”œâ”€â”€ BankTransferStrategy.java  <span class="hljs-comment"># å¯¹å…¬è´¦æˆ·æ”¯ä»˜å®ç°</span>
â”œâ”€â”€ PaymentContext.java        <span class="hljs-comment"># ç­–ç•¥ä¸Šä¸‹æ–‡ç±»</span>
â””â”€â”€ Main.java                  <span class="hljs-comment"># æ¨¡æ‹Ÿè°ƒç”¨å…¥å£</span>
</code></pre>
<hr/>
<h3 data-id="heading-5">ğŸ§  TRAE SOLO çš„æ€è€ƒè¿‡ç¨‹</h3>
<blockquote>
<p>â€œé¦–å…ˆæˆ‘ä¼šå®šä¹‰ä¸€ä¸ªç»Ÿä¸€çš„ <code>PaymentStrategy</code> æ¥å£ï¼Œç„¶åä¸ºæ¯ç§æ”¯ä»˜æ–¹å¼å®ç°è¯¥æ¥å£ã€‚æœ€åï¼Œç”¨ä¸€ä¸ª <code>PaymentContext</code> æ¥æ ¹æ®ä¸åŒçš„æ”¯ä»˜ç±»å‹åŠ¨æ€é€‰æ‹©ç­–ç•¥ã€‚â€</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">ğŸ“„ ä»£ç å®ç°ï¼ˆç”± TRAE SOLO è‡ªåŠ¨ç”Ÿæˆï¼‰</h3>
<h4 data-id="heading-7">1ï¸âƒ£ å®šä¹‰æ”¯ä»˜ç­–ç•¥æ¥å£</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">PaymentStrategy</span> {
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">pay</span>(<span class="hljs-params"><span class="hljs-built_in">double</span> amount</span>)</span>;
}
</code></pre>
<hr/>
<h4 data-id="heading-8">2ï¸âƒ£ å®ç°å¾®ä¿¡æ”¯ä»˜ç­–ç•¥</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WeChatPayStrategy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PaymentStrategy</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pay</span><span class="hljs-params">(<span class="hljs-type">double</span> amount)</span> {
        System.out.println(<span class="hljs-string">"ä½¿ç”¨å¾®ä¿¡æ”¯ä»˜ï¼š"</span> + amount + <span class="hljs-string">" å…ƒ"</span>);
        <span class="hljs-comment">// æ¨¡æ‹Ÿå¾®ä¿¡æ”¯ä»˜é€»è¾‘</span>
    }
}
</code></pre>
<hr/>
<h4 data-id="heading-9">3ï¸âƒ£ å®ç°æ”¯ä»˜å®æ”¯ä»˜ç­–ç•¥</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AlipayStrategy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PaymentStrategy</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pay</span><span class="hljs-params">(<span class="hljs-type">double</span> amount)</span> {
        System.out.println(<span class="hljs-string">"ä½¿ç”¨æ”¯ä»˜å®æ”¯ä»˜ï¼š"</span> + amount + <span class="hljs-string">" å…ƒ"</span>);
        <span class="hljs-comment">// æ¨¡æ‹Ÿæ”¯ä»˜å®æ”¯ä»˜é€»è¾‘</span>
    }
}
</code></pre>
<hr/>
<h4 data-id="heading-10">4ï¸âƒ£ å®ç°å¯¹å…¬è´¦æˆ·æ”¯ä»˜ç­–ç•¥</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BankTransferStrategy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PaymentStrategy</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pay</span><span class="hljs-params">(<span class="hljs-type">double</span> amount)</span> {
        System.out.println(<span class="hljs-string">"ä½¿ç”¨å¯¹å…¬è´¦æˆ·è½¬è´¦ï¼š"</span> + amount + <span class="hljs-string">" å…ƒ"</span>);
        <span class="hljs-comment">// æ¨¡æ‹Ÿé“¶è¡Œè½¬è´¦é€»è¾‘</span>
    }
}
</code></pre>
<hr/>
<h4 data-id="heading-11">5ï¸âƒ£ ç­–ç•¥ä¸Šä¸‹æ–‡ç±»</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PaymentContext</span> {
    <span class="hljs-keyword">private</span> PaymentStrategy strategy;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">PaymentContext</span><span class="hljs-params">(PaymentStrategy strategy)</span> </span>{
        <span class="hljs-keyword">this</span>.strategy = strategy;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">void</span> <span class="hljs-title">executePayment</span><span class="hljs-params">(<span class="hljs-type">double</span> amount)</span> </span>{
        strategy.<span class="hljs-built_in">pay</span>(amount);
    }
}
</code></pre>
<hr/>
<h4 data-id="heading-12">6ï¸âƒ£ æ¨¡æ‹Ÿè°ƒç”¨</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) {
        <span class="hljs-title class_">PaymentContext</span> context;

        <span class="hljs-comment">// ç”¨æˆ·é€‰æ‹©å¾®ä¿¡æ”¯ä»˜</span>
        context = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PaymentContext</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WeChatPayStrategy</span>());
        context.<span class="hljs-title function_">executePayment</span>(<span class="hljs-number">100.0</span>);

        <span class="hljs-comment">// ç”¨æˆ·é€‰æ‹©æ”¯ä»˜å®æ”¯ä»˜</span>
        context = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PaymentContext</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">AlipayStrategy</span>());
        context.<span class="hljs-title function_">executePayment</span>(<span class="hljs-number">200.0</span>);

        <span class="hljs-comment">// ç”¨æˆ·é€‰æ‹©å¯¹å…¬è½¬è´¦</span>
        context = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PaymentContext</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BankTransferStrategy</span>());
        context.<span class="hljs-title function_">executePayment</span>(<span class="hljs-number">1000.0</span>);
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-13">âœ… æœ€ç»ˆæ•ˆæœ</h3>
<p>è¿è¡Œè¾“å‡ºç»“æœï¼š</p>
<pre><code class="hljs">ä½¿ç”¨å¾®ä¿¡æ”¯ä»˜ï¼š100.0 å…ƒ
ä½¿ç”¨æ”¯ä»˜å®æ”¯ä»˜ï¼š200.0 å…ƒ
ä½¿ç”¨å¯¹å…¬è´¦æˆ·è½¬è´¦ï¼š1000.0 å…ƒ
</code></pre>
<hr/>
<h3 data-id="heading-14">ğŸ’¡ ä¸ºä»€ä¹ˆç­–ç•¥æ¨¡å¼è¿™ä¹ˆé€‚åˆåšæ”¯ä»˜ç³»ç»Ÿï¼Ÿ</h3>
<ul>
<li><strong>æ‰©å±•æ€§å¼º</strong>ï¼šæ·»åŠ æ–°æ”¯ä»˜æ–¹å¼ï¼Œä¸å½±å“å·²æœ‰é€»è¾‘</li>
<li><strong>è§£è€¦åˆ</strong>ï¼šè°ƒç”¨æ–¹ä¸å…³å¿ƒå…·ä½“æ”¯ä»˜ç»†èŠ‚</li>
<li><strong>ç¬¦åˆå¼€é—­åŸåˆ™</strong>ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­</li>
<li><strong>æ˜“äºæµ‹è¯•</strong>ï¼šæ¯ç§ç­–ç•¥é€»è¾‘ç‹¬ç«‹ï¼Œå•å…ƒæµ‹è¯•æ›´æ–¹ä¾¿</li>
</ul>
<hr/>
<h3 data-id="heading-15">ğŸ“ˆ åç»­è®¡åˆ’</h3>
<ul>
<li>â³ æ¥å…¥çœŸå®æ”¯ä»˜ SDKï¼ˆå¾®ä¿¡/æ”¯ä»˜å®/é“¶è¡Œæ¥å£ï¼‰</li>
<li>â³ æ·»åŠ å¼‚å¸¸å¤„ç†ä¸æ”¯ä»˜å›è°ƒæœºåˆ¶</li>
<li>â³ æ¥å…¥ Spring Boot + REST API æä¾›æ”¯ä»˜æ¥å£</li>
<li>â³ æ”¯æŒæ”¯ä»˜çŠ¶æ€æŸ¥è¯¢ã€æ”¯ä»˜è®°å½•å­˜å‚¨</li>
<li>â³ å¼•å…¥å·¥å‚æ¨¡å¼ + æšä¸¾ + IOC å®¹å™¨è‡ªåŠ¨æ³¨å…¥ç­–ç•¥</li>
</ul>
<hr/>
<h3 data-id="heading-16">ğŸ§  æ€»ç»“ï¼šAI + è®¾è®¡æ¨¡å¼ = ç¨³å¦‚è€ç‹—çš„æ¶æ„</h3>
<p>é€šè¿‡è¿™æ¬¡å®è·µï¼Œæˆ‘å‘ç°ï¼š</p>
<blockquote>
<p><strong>TRAE SOLO ä¸åªæ˜¯å†™ä»£ç ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ‡‚æ¶æ„ã€æ‡‚è®¾è®¡çš„â€œè™šæ‹Ÿæ‹æ¡£â€ã€‚</strong></p>
</blockquote>
<p>æˆ‘åªéœ€è¦æå‡ºæ€è·¯ï¼Œå®ƒå°±èƒ½ç”¨æ°å½“çš„è®¾è®¡æ¨¡å¼å°†é€»è¾‘ç»“æ„è¡¨ç°å¾—éå¸¸æ¸…æ™°ï¼ŒçœŸæ­£åšåˆ°äº†â€œæ¶æ„å³ä»£ç â€ã€‚</p>
<hr/>
<h3 data-id="heading-17">ğŸ—£ï¸ æœ€å</h3>
<p>å¦‚æœä½ ä¹Ÿæ˜¯ Java å¼€å‘è€…ï¼Œä¸å¦¨è¯•è¯•è®© AI è‡ªåŠ¨å¸®ä½ è®¾è®¡æ¶æ„ã€å®ç°åŠŸèƒ½ã€‚</p>
<p>ä½ ä¼šå‘ç°ï¼š</p>
<blockquote>
<p><strong>è®¾è®¡æ¨¡å¼ + AI ç¼–ç¨‹åŠ©æ‰‹ï¼Œæ‰æ˜¯é«˜çº§å¼€å‘è€…çš„ç”Ÿäº§åŠ›é­”æ³•ï¼</strong></p>
</blockquote>
<p>æ¬¢è¿ç‚¹èµã€æ”¶è—ã€è¯„è®ºï¼Œæˆ‘ä»¬ä¸‹æœŸå†è§ ğŸ‘‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringBootå•ä½“å¤šæ¨¡å—é¡¹ç›®ç¯å¢ƒæ­å»º]]></title>    <link>https://juejin.cn/post/7582422818312437811</link>    <guid>https://juejin.cn/post/7582422818312437811</guid>    <pubDate>2025-12-12T01:46:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582422818312437811" data-draft-id="7582422818312192051" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringBootå•ä½“å¤šæ¨¡å—é¡¹ç›®ç¯å¢ƒæ­å»º"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-12T01:46:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘æ€ä¹ˆæƒ³ä¸åˆ°"/> <meta itemprop="url" content="https://juejin.cn/user/279728326184240"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringBootå•ä½“å¤šæ¨¡å—é¡¹ç›®ç¯å¢ƒæ­å»º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/279728326184240/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘æ€ä¹ˆæƒ³ä¸åˆ°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T01:46:35.000Z" title="Fri Dec 12 2025 01:46:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¿«é€Ÿæ­å»ºä¸€ä¸ªåŸºäºSpringBoot + Mybatis Plus çš„å¤šæ¨¡å—çš„å•ä½“æ¶æ„é¡¹ç›®ã€‚</p>
<h2 data-id="heading-0">1ã€åˆ›å»ºMavenå­æ¨¡å—</h2>
<p>æŒ‰ç…§å¦‚ä¸‹ç›®å½•ç»“æ„åˆ›å»ºä¸€ä¸ªå¤šæ¨¡å—çš„Mavenå·¥ç¨‹ã€‚</p>
<pre><code class="hljs language-sh" lang="sh">Â lease
Â â”œâ”€â”€ commonï¼ˆå…¬å…±æ¨¡å—â€”â€”å·¥å…·ç±»ã€å…¬ç”¨é…ç½®ç­‰ï¼‰
Â â”‚Â Â  â”œâ”€â”€ pom.xml
Â â”‚Â Â  â””â”€â”€ src
Â â”œâ”€â”€ modelï¼ˆæ•°æ®æ¨¡å‹â€”â€”ä¸æ•°æ®åº“ç›¸å¯¹åº”åœ°å®ä½“ç±»ï¼‰
Â â”‚Â Â  â”œâ”€â”€ pom.xml
Â â”‚Â Â  â””â”€â”€ src
Â â”œâ”€â”€ webï¼ˆWebæ¨¡å—ï¼‰
Â â”‚ Â  â”œâ”€â”€ pom.xml
Â â”‚ Â  â”œâ”€â”€ web-adminï¼ˆåå°ç®¡ç†ç³»ç»ŸWebæ¨¡å—â€”â€”åŒ…å«mapperã€serviceã€controllerï¼‰
Â â”‚ Â  â”‚Â Â  â”œâ”€â”€ pom.xml
Â â”‚ Â  â”‚Â Â  â””â”€â”€ src
Â â”‚ Â  â””â”€â”€ web-appï¼ˆç§»åŠ¨ç«¯Webæ¨¡å—â€”â€”åŒ…å«mapperã€serviceã€controllerï¼‰
Â â”‚ Â  Â  Â  â”œâ”€â”€ pom.xml
Â â”‚ Â  Â  Â  â””â”€â”€ src
Â â””â”€â”€ pom.xml
</code></pre>
<h3 data-id="heading-1">æ­¥éª¤1ï¼šåˆ›å»ºé¡¹ç›®æ ¹æ¨¡å—</h3>
<pre><code class="hljs language-xml" lang="xml">Â <span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
Â <span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span>
Â  Â  Â  Â  Â  <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
Â  Â  Â  Â  Â  <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
Â â€‹
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.ghm<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>JavaPracKit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span>
Â â€‹
Â  Â  Â <span class="hljs-comment">&lt;!-- å­æ¨¡å— --&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>common<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>model<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>web<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span>
Â â€‹
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>17<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>17<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
Â â€‹
Â <span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<h3 data-id="heading-2">æ­¥éª¤2ï¼šåˆ›å»º<code>common</code>å­æ¨¡å—</h3>
<pre><code class="hljs language-xml" lang="xml">Â <span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
Â <span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span>
Â  Â  Â  Â  Â  <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
Â  Â  Â  Â  Â  <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
Â  Â  Â 
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>
Â  Â  Â 
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.ghm<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>JavaPracKit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>
Â â€‹
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>common<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â â€‹
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>17<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>17<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
Â â€‹
Â <span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<h3 data-id="heading-3">æ­¥éª¤3ï¼šåˆ›å»º<code>model</code>å­æ¨¡å—</h3>
<pre><code class="hljs language-xml" lang="xml">Â <span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
Â <span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span>
Â  Â  Â  Â  Â  <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
Â  Â  Â  Â  Â  <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
Â  Â  Â 
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>
Â  Â  Â 
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.ghm<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>JavaPracKit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>
Â â€‹
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>model<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â â€‹
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>17<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>17<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
Â â€‹
Â <span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<h3 data-id="heading-4">æ­¥éª¤4ï¼šåˆ›å»º<code>web</code>å­æ¨¡å—</h3>
<pre><code class="hljs language-xml" lang="xml">Â <span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
Â <span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span>
Â  Â  Â  Â  Â  <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
Â  Â  Â  Â  Â  <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
Â  Â  Â 
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>
Â â€‹
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.ghm<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>JavaPracKit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>
Â â€‹
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span>
Â â€‹
Â  Â  Â <span class="hljs-comment">&lt;!--  å­æ¨¡å—  --&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>admin<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span>
Â â€‹
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>17<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>17<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
Â â€‹
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
Â â€‹
Â  Â  Â  Â  Â <span class="hljs-comment">&lt;!-- Â   å¼•å…¥commonæ¨¡å— Â   --&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.ghm<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>common<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
Â â€‹
Â <span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<h3 data-id="heading-5">æ­¥éª¤5ï¼šåˆ›å»º<code>web-admin</code>å­æ¨¡å—</h3>
<pre><code class="hljs language-xml" lang="xml">Â <span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
Â <span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span>
Â  Â  Â  Â  Â  <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
Â  Â  Â  Â  Â  <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
Â  Â  Â 
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>
Â  Â  Â 
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.ghm<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>
Â â€‹
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>admin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â â€‹
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>17<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>17<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
Â â€‹
Â <span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<h2 data-id="heading-6">2ã€SpringBooté…ç½®</h2>
<h3 data-id="heading-7">æ­¥éª¤1ï¼šé…ç½®<code>pom</code>å·¥ç¨‹</h3>
<p>åœ¨<strong>çˆ¶å·¥ç¨‹</strong>çš„<code>pom.xml</code>æ–‡ä»¶ä¸­å¢åŠ å¦‚ä¸‹å†…å®¹:</p>
<pre><code class="hljs language-xml" lang="xml">Â <span class="hljs-comment">&lt;!-- ç»§æ‰¿Spring Bootçˆ¶é¡¹ç›® --&gt;</span>
Â <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>/&gt;</span>
Â <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>
Â â€‹
Â <span class="hljs-comment">&lt;!-- æ³¨æ„ï¼šç›´æ¥æ›¿æ¢pomæ–‡ä»¶ä¸­åŸæœ‰çš„properties --&gt;</span>
Â <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>17<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>17<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">mybatis-plus.version</span>&gt;</span>3.5.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">mybatis-plus.version</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">swagger.version</span>&gt;</span>2.9.2<span class="hljs-tag">&lt;/<span class="hljs-name">swagger.version</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">jwt.version</span>&gt;</span>0.11.2<span class="hljs-tag">&lt;/<span class="hljs-name">jwt.version</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">easycaptcha.version</span>&gt;</span>1.6.2<span class="hljs-tag">&lt;/<span class="hljs-name">easycaptcha.version</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">minio.version</span>&gt;</span>8.2.0<span class="hljs-tag">&lt;/<span class="hljs-name">minio.version</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">knife4j.version</span>&gt;</span>4.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">knife4j.version</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">aliyun.sms.version</span>&gt;</span>2.0.23<span class="hljs-tag">&lt;/<span class="hljs-name">aliyun.sms.version</span>&gt;</span>
Â <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
Â â€‹
Â <span class="hljs-comment">&lt;!--é…ç½®dependencyManagementç»Ÿä¸€ç®¡ç†ä¾èµ–ç‰ˆæœ¬--&gt;</span>
Â <span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-comment">&lt;!--mybatis-plus--&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${mybatis-plus.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
Â â€‹
Â  Â  Â  Â  Â <span class="hljs-comment">&lt;!--knife4jæ–‡æ¡£--&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.xiaoymin<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>knife4j-openapi3-jakarta-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${knife4j.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
Â â€‹
Â  Â  Â  Â  Â <span class="hljs-comment">&lt;!--JWTç™»å½•è®¤è¯ç›¸å…³--&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.jsonwebtoken<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jjwt-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${jwt.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.jsonwebtoken<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jjwt-impl<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${jwt.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.jsonwebtoken<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jjwt-jackson<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${jwt.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
Â â€‹
Â  Â  Â  Â  Â <span class="hljs-comment">&lt;!--å›¾å½¢éªŒè¯ç --&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.whvcse<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>easy-captcha<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${easycaptcha.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
Â â€‹
Â  Â  Â  Â  Â <span class="hljs-comment">&lt;!--å¯¹è±¡å­˜å‚¨ï¼Œç”¨äºå­˜å‚¨å›¾åƒç­‰éç»“æ„åŒ–æ•°æ®--&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.minio<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>minio<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${minio.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
Â â€‹
Â  Â  Â  Â  Â <span class="hljs-comment">&lt;!--é˜¿é‡Œäº‘çŸ­ä¿¡å®¢æˆ·ç«¯ï¼Œç”¨äºå‘é€çŸ­ä¿¡éªŒè¯ç --&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.aliyun<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>dysmsapi20170525<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${aliyun.sms.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>
</code></pre>
<p>åœ¨<strong>webæ¨¡å—</strong>çš„pom.xmlæ–‡ä»¶ä¸­å¢åŠ å¦‚ä¸‹å†…å®¹:</p>
<pre><code class="hljs language-xml" lang="xml">Â <span class="hljs-comment">&lt;!--åŒ…å«spring webç›¸å…³ä¾èµ–--&gt;</span>
Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
Â â€‹
Â <span class="hljs-comment">&lt;!--åŒ…å«spring testç›¸å…³ä¾èµ–--&gt;</span>
Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
Â â€‹
Â <span class="hljs-comment">&lt;!-- Spring Boot Mavenæ’ä»¶ï¼Œç”¨äºæ‰“åŒ…å¯æ‰§è¡Œçš„JARæ–‡ä»¶ --&gt;</span>
Â <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
Â <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
</code></pre>
<h3 data-id="heading-8">æ­¥éª¤2ï¼šåˆ›å»ºapplication.ymlæ–‡ä»¶</h3>
<p>åœ¨<strong>web-adminæ¨¡å—</strong>çš„<code>src/main/resources</code>ç›®å½•ä¸‹åˆ›å»º<code>application.yml</code>é…ç½®æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span>
</code></pre>
<h3 data-id="heading-9">æ­¥éª¤3ï¼š åˆ›å»ºSpringBootå¯åŠ¨ç±»</h3>
<p>åœ¨<strong>web-adminæ¨¡å—</strong>ä¸‹åˆ›å»º<code>com.atguigu.lease.AdminWebApplication</code>ç±»ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AdminWebApplication</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        SpringApplication.run(AdminWebApplication.class, args);
    }
}
</code></pre>
<h2 data-id="heading-10">3ã€Mybatis-Plusé…ç½®</h2>
<p>Mybatis-Plusä¸ºå…¬ç”¨å·¥å…·ï¼Œæ•…å°†å…¶é…ç½®äº<strong>commonæ¨¡å—</strong>ã€‚å…·ä½“é…ç½®å¯å‚è€ƒå…¶<a href="https://link.juejin.cn?target=https%3A%2F%2Fbaomidou.com%2Fpages%2Fbab2db%2F%23release" target="_blank" title="https://baomidou.com/pages/bab2db/#release" ref="nofollow noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<h3 data-id="heading-11">æ­¥éª¤1ï¼špomæ–‡ä»¶é…ç½®</h3>
<p>åœ¨<strong>commonæ¨¡å—</strong>çš„pom.xmlæ–‡ä»¶ä¸­å¢åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!--mybatis-plus--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!--mysqlé©±åŠ¨--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-j<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>åœ¨<strong>modelæ¨¡å—</strong>çš„pom.xmlæ–‡ä»¶ä¸­å¢åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>
<p>å› ä¸º<strong>modelæ¨¡å—</strong>ä¸‹çš„å®ä½“ç±»ä¸­éœ€è¦é…ç½®Mybatis-Plusç›¸å…³æ³¨è§£ï¼Œæ•…ä¹Ÿéœ€å¼•å…¥Mybatis-Plusä¾èµ–</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!--mybatis-plus--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h3 data-id="heading-12">æ­¥éª¤2ï¼šapplication.ymlé…ç½®</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">com.zaxxer.hikari.HikariDataSource</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://&lt;hostname&gt;:&lt;port&gt;/&lt;database&gt;?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;allowPublicKeyRetrieval=true&amp;serverTimezone=GMT%2b8</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">&lt;username&gt;</span>
    <span class="hljs-attr">password:</span> <span class="hljs-string">&lt;password&gt;</span>
    <span class="hljs-attr">hikari:</span>
      <span class="hljs-attr">connection-test-query:</span> <span class="hljs-string">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-comment"># è‡ªåŠ¨æ£€æµ‹è¿æ¥</span>
      <span class="hljs-attr">connection-timeout:</span> <span class="hljs-number">60000</span> <span class="hljs-comment">#æ•°æ®åº“è¿æ¥è¶…æ—¶æ—¶é—´,é»˜è®¤30ç§’</span>
      <span class="hljs-attr">idle-timeout:</span> <span class="hljs-number">500000</span> <span class="hljs-comment">#ç©ºé—²è¿æ¥å­˜æ´»æœ€å¤§æ—¶é—´ï¼Œé»˜è®¤600000ï¼ˆ10åˆ†é’Ÿï¼‰</span>
      <span class="hljs-attr">max-lifetime:</span> <span class="hljs-number">540000</span> <span class="hljs-comment">#æ­¤å±æ€§æ§åˆ¶æ± ä¸­è¿æ¥çš„æœ€é•¿ç”Ÿå‘½å‘¨æœŸï¼Œå€¼0è¡¨ç¤ºæ— é™ç”Ÿå‘½å‘¨æœŸï¼Œé»˜è®¤1800000å³30åˆ†é’Ÿ</span>
      <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">12</span> <span class="hljs-comment">#è¿æ¥æ± æœ€å¤§è¿æ¥æ•°ï¼Œé»˜è®¤æ˜¯10</span>
      <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">10</span> <span class="hljs-comment">#æœ€å°ç©ºé—²è¿æ¥æ•°é‡</span>
      <span class="hljs-attr">pool-name:</span> <span class="hljs-string">SPHHikariPool</span> <span class="hljs-comment"># è¿æ¥æ± åç§°</span>
      
<span class="hljs-comment">#ç”¨äºæ‰“å°æ¡†æ¶ç”Ÿæˆçš„sqlè¯­å¥ï¼Œä¾¿äºè°ƒè¯•</span>
<span class="hljs-attr">mybatis-plus:</span>
  <span class="hljs-attr">configuration:</span>
    <span class="hljs-attr">log-impl:</span> <span class="hljs-string">org.apache.ibatis.logging.stdout.StdOutImpl</span>
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šéœ€æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹<code>hostname</code>ã€<code>port</code>ã€<code>database</code>ã€<code>username</code>ã€<code>password</code>ã€‚</p>
<h3 data-id="heading-13">æ­¥éª¤3ï¼šæ·»åŠ é…ç½®ç±»</h3>
<p>åœ¨<strong>commonæ¨¡å—</strong>ä¸‹åˆ›å»º<code>com.atguigu.lease.common.mybatisplus.MybatisPlusConfiguration</code>ç±»ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@MapperScan("com.atguigu.lease.web.*.mapper")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MybatisPlusConfiguration</span> {
  
}
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼š<code>@MapperScan()</code>çš„åŒ…è·¯å¾„éœ€è¦æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œä¿®æ”¹ã€‚</p>
<h2 data-id="heading-14">4ã€Knife4jé…ç½®</h2>
<h3 data-id="heading-15">æ­¥éª¤1ï¼špomæ–‡ä»¶é…ç½®</h3>
<p>åœ¨<strong>webæ¨¡å—</strong>çš„pom.xmlæ–‡ä»¶æ·»åŠ å¦‚ä¸‹å†…å®¹</p>
<blockquote>
<p>å› ä¸º<strong>web-app</strong>æ¨¡å—åŒæ ·éœ€è¦ ä¾èµ–ï¼Œæ•…åœ¨ä¸¤ä¸ªçš„çˆ¶å·¥ç¨‹å¼•å…¥ä¾èµ–å³å¯</p>
</blockquote>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- knife4j --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.xiaoymin<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>knife4j-openapi3-jakarta-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>åœ¨<strong>modelæ¨¡å—</strong>çš„pom.xmlæ–‡ä»¶æ·»åŠ ä¸Šè¿°å†…å®¹</p>
<blockquote>
<p>å› ä¸º<strong>modelæ¨¡å—</strong>ä¸‹çš„å®ä½“ç±»éœ€è¦é…ç½®Knife4jç›¸å…³æ³¨è§£ï¼Œæ•…ä¹Ÿéœ€å¼•å…¥Knife4jä¾èµ–</p>
</blockquote>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.xiaoymin<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>knife4j-openapi3-jakarta-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h3 data-id="heading-16">æ­¥éª¤2ï¼šæ·»åŠ é…ç½®ç±»</h3>
<p>åå°ç®¡ç†ç³»ç»Ÿå’Œç§»åŠ¨ç«¯çš„æ¥å£é…ç½®å¹¶ä¸ç›¸åŒï¼Œæ‰€ä»¥éœ€å„è‡ªç¼–å†™ä¸€ä¸ªé…ç½®ç±»ã€‚åœ¨<strong>web-adminæ¨¡å—</strong>ä¸‹åˆ›å»º<code>com.atguigu.lease.web.admin.custom.config.Knife4jConfiguration</code>ç±»ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Knife4jConfiguration</span> {

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> OpenAPI <span class="hljs-title function_">customOpenAPI</span><span class="hljs-params">()</span> {

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OpenAPI</span>().info(
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">Info</span>()
                        .title(<span class="hljs-string">"åå°ç®¡ç†ç³»ç»ŸAPI"</span>)
                        .version(<span class="hljs-string">"1.0"</span>)
                        .description(<span class="hljs-string">"åå°ç®¡ç†ç³»ç»ŸAPI"</span>));
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> GroupedOpenApi <span class="hljs-title function_">systemAPI</span><span class="hljs-params">()</span> {

        <span class="hljs-keyword">return</span> GroupedOpenApi.builder().group(<span class="hljs-string">"ç³»ç»Ÿä¿¡æ¯ç®¡ç†"</span>).
                pathsToMatch(
                        <span class="hljs-string">"/admin/system/**"</span>
                ).
                build();
    }

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> GroupedOpenApi <span class="hljs-title function_">loginAPI</span><span class="hljs-params">()</span> {

        <span class="hljs-keyword">return</span> GroupedOpenApi.builder().group(<span class="hljs-string">"åå°ç™»å½•ç®¡ç†"</span>).
                pathsToMatch(
                        <span class="hljs-string">"/admin/login/**"</span>,
                        <span class="hljs-string">"/admin/info"</span>
                ).
                build();
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> GroupedOpenApi <span class="hljs-title function_">apartmentAPI</span><span class="hljs-params">()</span> {

        <span class="hljs-keyword">return</span> GroupedOpenApi.builder().group(<span class="hljs-string">"å…¬å¯“ä¿¡æ¯ç®¡ç†"</span>).
                pathsToMatch(
                        <span class="hljs-string">"/admin/apartment/**"</span>,
                        <span class="hljs-string">"/admin/room/**"</span>,
                        <span class="hljs-string">"/admin/label/**"</span>,
                        <span class="hljs-string">"/admin/facility/**"</span>,
                        <span class="hljs-string">"/admin/fee/**"</span>,
                        <span class="hljs-string">"/admin/attr/**"</span>,
                        <span class="hljs-string">"/admin/payment/**"</span>,
                        <span class="hljs-string">"/admin/region/**"</span>,
                        <span class="hljs-string">"/admin/term/**"</span>,
                        <span class="hljs-string">"/admin/file/**"</span>
                ).build();
    }
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> GroupedOpenApi <span class="hljs-title function_">leaseAPI</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> GroupedOpenApi.builder().group(<span class="hljs-string">"ç§Ÿèµä¿¡æ¯ç®¡ç†"</span>).
                pathsToMatch(
                        <span class="hljs-string">"/admin/appointment/**"</span>,
                        <span class="hljs-string">"/admin/agreement/**"</span>
                ).build();
    }
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> GroupedOpenApi <span class="hljs-title function_">userAPI</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> GroupedOpenApi.builder().group(<span class="hljs-string">"å¹³å°ç”¨æˆ·ç®¡ç†"</span>).
                pathsToMatch(
                        <span class="hljs-string">"/admin/user/**"</span>
                ).build();
    }
}
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼š<code>pathsToMatch</code>å‚æ•°éœ€è¦æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œé…ç½®ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çº¿ç¨‹æ± å¯¼è‡´çš„ shutdownå¤±è´¥çš„å®Œæ•´æ’æŸ¥è¿‡ç¨‹]]></title>    <link>https://juejin.cn/post/7582479325284384831</link>    <guid>https://juejin.cn/post/7582479325284384831</guid>    <pubDate>2025-12-12T01:52:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582479325284384831" data-draft-id="7582469532327297060" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çº¿ç¨‹æ± å¯¼è‡´çš„ shutdownå¤±è´¥çš„å®Œæ•´æ’æŸ¥è¿‡ç¨‹"/> <meta itemprop="keywords" content="Spring Boot,Java"/> <meta itemprop="datePublished" content="2025-12-12T01:52:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Kings90"/> <meta itemprop="url" content="https://juejin.cn/user/553809590620765"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çº¿ç¨‹æ± å¯¼è‡´çš„ shutdownå¤±è´¥çš„å®Œæ•´æ’æŸ¥è¿‡ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/553809590620765/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Kings90
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T01:52:13.000Z" title="Fri Dec 12 2025 01:52:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">SpringBoot ä¸­æœ‰ä¸€ç§æ–¹å¼å¯ä»¥ä¼˜é›…åœ°å…³é—­åº”ç”¨ç¨‹åºã€‚</h2>
<p>ï¼ˆä¼˜é›…åœæœºæ˜¯æŒ‡â€‹<strong>å…³é—­åº”ç”¨ç¨‹åºæ—¶ï¼Œåœ¨è§„å®šçš„è¶…æ—¶æ—¶é—´èŒƒå›´å†…ï¼Œå…è®¸è¿›è¡Œä¸­çš„è¯·æ±‚å®Œæˆï¼Œæ‹’ç»æ–°çš„è¯·æ±‚è¿›å…¥</strong>â€‹ã€‚ è¿™å°†ä½¿åº”ç”¨åœ¨è¯·æ±‚å¤„ç†æ–¹é¢ä¿æŒä¸€è‡´ï¼Œå³æ²¡æœ‰æœªå¤„ç†è¯·æ±‚ï¼Œæ¯ä¸€ä¸ªè¯·æ±‚éƒ½è¢«å¤„ç†ï¼ˆå®Œæˆæˆ–æ‹’ç»ï¼‰</p>
<p>é…ç½®å¦‚ä¸‹</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8888</span>
  <span class="hljs-attr">shutdown:</span> <span class="hljs-string">graceful</span>
<span class="hljs-attr">management:</span>
  <span class="hljs-attr">endpoint:</span>
    <span class="hljs-attr">shutdown:</span>
      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>  
  <span class="hljs-attr">endpoints:</span>
    <span class="hljs-attr">web:</span>
      <span class="hljs-attr">exposure:</span>
        <span class="hljs-attr">include:</span> <span class="hljs-string">shutdown</span>
</code></pre>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h2 data-id="heading-1">ç°è±¡</h2>
<p>ç›´æ¥è°ƒç”¨ <code>localhost:8888/actuator/shutdown</code> å³å¯å…³é—­åº”ç”¨ç¨‹åºã€‚ä½†æ˜¯åœ¨è°ƒç”¨æŸä¸ªä¸šåŠ¡åï¼Œå†è°ƒç”¨ <code>shutdown</code> çš„ apiï¼Œå‘ç°å®é™… <code>shutdown</code>
ç¡®å®åœ¨æ‰§è¡Œï¼Œä½†æ˜¯æœ€ç»ˆå¹¶æ²¡æœ‰æŠŠ pid ç»™ kill æ‰ï¼Œåº”ç”¨ç¨‹åºä¾ç„¶åœ¨è¿è¡Œã€‚</p>
<p>ç¬¬ä¸€æ€€ç–‘å°±æ˜¯è®¤ä¸ºè¿™ä¸ªç¨‹åºæ‰§è¡Œåï¼Œè¿˜æœ‰ä»€ä¹ˆèµ„æºæ²¡æœ‰è¢«å…³é—­æ‰ï¼Œå¯¼è‡´ springboot è®¤ä¸ºåº”ç”¨ç¨‹åºè¿˜åœ¨è¿è¡Œï¼Œä»è€Œæ²¡æœ‰æ‰§è¡Œå…³é—­æ“ä½œã€‚</p>
<h2 data-id="heading-2">æ’æŸ¥è¿‡ç¨‹</h2>
<p>æ‰§è¡Œè„šæœ¬</p>
<pre><code class="hljs language-shell" lang="shell">ç”Ÿæˆçº¿ç¨‹å¿«ç…§
jstack -l pid &gt; threads.txt
<span class="hljs-meta prompt_">
# </span><span class="bash">æŸ¥è¯¢éå®ˆæŠ¤è¿›ç¨‹ï¼ˆå› ä¸ºéå®ˆæŠ¤çº¿ç¨‹ä¼šé˜»æ­¢ JVM é€€å‡ºï¼‰ -v è¡¨ç¤ºåå‘æ’é™¤</span>
grep -n '" ' threads2.txt | grep -v daemon
</code></pre>
<ul>
<li>æ‰€æœ‰çº¿ç¨‹ä¿¡æ¯
<img src="http://openwrite.cn/uploads/15225/57308/7e6895c6-631c-4c86-bc34-6097b25310d7.png" alt="allThread.png" loading="lazy"/></li>
<li>éå®ˆæŠ¤çº¿ç¨‹ä¿¡æ¯
<img src="http://openwrite.cn/uploads/15225/57308/a7eca41b-3153-4fab-b2cc-a51fbe96f019.png" alt="nonDaemonThread.png" loading="lazy"/></li>
</ul>
<p>åœ¨é‡Œé¢å‘ç°äº†ä¸€æ®µ å…³äº "pool-X-thread-Y"çš„çº¿ç¨‹ä¿¡æ¯ï¼Œè¿™ä¸ª ThreadPoolExecutor å‡ºæ¥çš„çº¿ç¨‹ï¼Œå¤„äºç­‰å¾…ä¸­ï¼Œå…¶ä»–çš„éƒ½æ˜¯é¢å¤–æ¡†æ¶çš„çº¿ç¨‹ä¿¡æ¯æˆ–è€… jvm çš„ï¼Œåªæœ‰"pool-X-thread-Y"å±äºé¢å¤–çš„ã€‚</p>
<pre><code class="hljs language-less" lang="less">"<span class="hljs-selector-tag">pool-4-thread-1</span>" <span class="hljs-selector-id">#230</span> <span class="hljs-selector-tag">prio</span>=<span class="hljs-number">5</span> <span class="hljs-selector-tag">os_prio</span>=<span class="hljs-number">31</span> <span class="hljs-selector-tag">cpu</span>=<span class="hljs-number">0.21ms</span> <span class="hljs-selector-tag">elapsed</span>=<span class="hljs-number">252.08s</span> <span class="hljs-selector-tag">tid</span>=<span class="hljs-number">0</span><span class="hljs-selector-tag">x00000001642cf800</span> <span class="hljs-selector-tag">nid</span>=<span class="hljs-number">0</span><span class="hljs-selector-tag">x9a07</span> <span class="hljs-selector-tag">waiting</span> <span class="hljs-selector-tag">on</span> <span class="hljs-selector-tag">condition</span>  <span class="hljs-selector-attr">[0x000000017aaf6000]</span>
   <span class="hljs-selector-tag">java</span><span class="hljs-selector-class">.lang</span><span class="hljs-selector-class">.Thread</span><span class="hljs-selector-class">.State</span>: <span class="hljs-selector-tag">WAITING</span> (parking)
	<span class="hljs-selector-tag">at</span> <span class="hljs-selector-tag">jdk</span><span class="hljs-selector-class">.internal</span><span class="hljs-selector-class">.misc</span><span class="hljs-selector-class">.Unsafe</span><span class="hljs-selector-class">.park</span>(java.base<span class="hljs-variable">@17</span>.<span class="hljs-number">0.13</span>/Native Method)
	<span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">parking</span> <span class="hljs-selector-tag">to</span> <span class="hljs-selector-tag">wait</span> <span class="hljs-selector-tag">for</span>  &lt;<span class="hljs-number">0</span><span class="hljs-selector-tag">x0000000701e8af30</span>&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
	<span class="hljs-selector-tag">at</span> <span class="hljs-selector-tag">java</span><span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.concurrent</span><span class="hljs-selector-class">.locks</span><span class="hljs-selector-class">.LockSupport</span><span class="hljs-selector-class">.park</span>(java.base<span class="hljs-variable">@17</span>.<span class="hljs-number">0.13</span>/LockSupport.<span class="hljs-attribute">java</span>:<span class="hljs-number">341</span>)
	<span class="hljs-selector-tag">at</span> <span class="hljs-selector-tag">java</span><span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.concurrent</span><span class="hljs-selector-class">.locks</span><span class="hljs-selector-class">.AbstractQueuedSynchronizer</span>$<span class="hljs-selector-tag">ConditionNode</span><span class="hljs-selector-class">.block</span>(java.base<span class="hljs-variable">@17</span>.<span class="hljs-number">0.13</span>/AbstractQueuedSynchronizer.<span class="hljs-attribute">java</span>:<span class="hljs-number">506</span>)
	<span class="hljs-selector-tag">at</span> <span class="hljs-selector-tag">java</span><span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.concurrent</span><span class="hljs-selector-class">.ForkJoinPool</span><span class="hljs-selector-class">.unmanagedBlock</span>(java.base<span class="hljs-variable">@17</span>.<span class="hljs-number">0.13</span>/ForkJoinPool.<span class="hljs-attribute">java</span>:<span class="hljs-number">3465</span>)
	<span class="hljs-selector-tag">at</span> <span class="hljs-selector-tag">java</span><span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.concurrent</span><span class="hljs-selector-class">.ForkJoinPool</span><span class="hljs-selector-class">.managedBlock</span>(java.base<span class="hljs-variable">@17</span>.<span class="hljs-number">0.13</span>/ForkJoinPool.<span class="hljs-attribute">java</span>:<span class="hljs-number">3436</span>)
	<span class="hljs-selector-tag">at</span> <span class="hljs-selector-tag">java</span><span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.concurrent</span><span class="hljs-selector-class">.locks</span><span class="hljs-selector-class">.AbstractQueuedSynchronizer</span>$<span class="hljs-selector-tag">ConditionObject</span><span class="hljs-selector-class">.await</span>(java.base<span class="hljs-variable">@17</span>.<span class="hljs-number">0.13</span>/AbstractQueuedSynchronizer.<span class="hljs-attribute">java</span>:<span class="hljs-number">1630</span>)
	<span class="hljs-selector-tag">at</span> <span class="hljs-selector-tag">java</span><span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.concurrent</span><span class="hljs-selector-class">.ArrayBlockingQueue</span><span class="hljs-selector-class">.take</span>(java.base<span class="hljs-variable">@17</span>.<span class="hljs-number">0.13</span>/ArrayBlockingQueue.<span class="hljs-attribute">java</span>:<span class="hljs-number">420</span>)
	<span class="hljs-selector-tag">at</span> <span class="hljs-selector-tag">java</span><span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.concurrent</span><span class="hljs-selector-class">.ThreadPoolExecutor</span><span class="hljs-selector-class">.getTask</span>(java.base<span class="hljs-variable">@17</span>.<span class="hljs-number">0.13</span>/ThreadPoolExecutor.<span class="hljs-attribute">java</span>:<span class="hljs-number">1062</span>)
	<span class="hljs-selector-tag">at</span> <span class="hljs-selector-tag">java</span><span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.concurrent</span><span class="hljs-selector-class">.ThreadPoolExecutor</span><span class="hljs-selector-class">.runWorker</span>(java.base<span class="hljs-variable">@17</span>.<span class="hljs-number">0.13</span>/ThreadPoolExecutor.<span class="hljs-attribute">java</span>:<span class="hljs-number">1122</span>)
	<span class="hljs-selector-tag">at</span> <span class="hljs-selector-tag">java</span><span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.concurrent</span><span class="hljs-selector-class">.ThreadPoolExecutor</span>$<span class="hljs-selector-tag">Worker</span><span class="hljs-selector-class">.run</span>(java.base<span class="hljs-variable">@17</span>.<span class="hljs-number">0.13</span>/ThreadPoolExecutor.<span class="hljs-attribute">java</span>:<span class="hljs-number">635</span>)
	<span class="hljs-selector-tag">at</span> <span class="hljs-selector-tag">java</span><span class="hljs-selector-class">.lang</span><span class="hljs-selector-class">.Thread</span><span class="hljs-selector-class">.run</span>(java.base<span class="hljs-variable">@17</span>.<span class="hljs-number">0.13</span>/Thread.<span class="hljs-attribute">java</span>:<span class="hljs-number">840</span>)

   <span class="hljs-selector-tag">Locked</span> <span class="hljs-selector-tag">ownable</span> <span class="hljs-selector-tag">synchronizers</span>:
	<span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">None</span>
</code></pre>
<ul>
<li>ThreadPoolExecutor é»˜è®¤çº¿ç¨‹åç§°æºç 
<img src="http://openwrite.cn/uploads/15225/57308/d0ddf6ee-8ad1-4cc0-8b1e-2db5d4ffe559.png" alt="defaultThreadName.png" loading="lazy"/></li>
</ul>
<p>æœ‰äº†è¿™ä¸ªæ’æŸ¥æ–¹å‘ï¼Œå»é¡¹ç›®é‡Œé¢æŸ¥æ‰¾å…³äºThreadPoolExecutorçš„ä»£ç ã€‚</p>
<p>æœ€ç»ˆå‘ç°ä¸€å¥å…³äºçº¿ç¨‹æ± çš„å£°æ˜ä»£ç ã€‚ä»ä»£ç æ¥çœ‹ï¼Œè™½ç„¶ <code>XxxConfig</code> ç±»ä¸ŠåŠ äº† <code>@Configuration</code> æ³¨è§£ï¼Œå—åˆ° spring ç®¡ç†ï¼Œä½†æ˜¯ <code>XXX_EXECUTOR</code> è¿™ä¸ªçº¿ç¨‹æ± æ˜¯é™æ€å˜é‡ï¼Œ
å¹¶æ²¡æœ‰å—åˆ° spring ç®¡ç†ï¼Œæ‰€ä»¥ springboot åœ¨æ‰§è¡Œ shutdown çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šå…³é—­è¿™ä¸ªçº¿ç¨‹æ± ï¼Œå¯¼è‡´åº”ç”¨ç¨‹åºæ²¡æœ‰è¢«å…³é—­ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">XxxConfig</span> { 
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ThreadPoolExecutor</span> <span class="hljs-variable">XXX_EXECUTOR</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(<span class="hljs-number">20</span>, <span class="hljs-number">20</span>, <span class="hljs-number">1000</span>, TimeUnit.MILLISECONDS, <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="hljs-number">10000</span>), <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>.CallerRunsPolicy());

}
</code></pre>
<h2 data-id="heading-3">æœ€ç»ˆè§£å†³æ–¹æ¡ˆ</h2>
<p>å»ºè®®å°† <code>XXX_EXECUTOR</code> è¿™ä¸ªçº¿ç¨‹æ± æ”¹ä¸º spring ç®¡ç†çš„ beanï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">XxxConfig</span> {
    <span class="hljs-meta">@Bean("xxxExecutor")</span>
    <span class="hljs-keyword">public</span> ThreadPoolExecutor <span class="hljs-title function_">xxxExecutor</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">//ç¤ºä¾‹ demo</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(<span class="hljs-number">20</span>, <span class="hljs-number">20</span>, <span class="hljs-number">1000</span>, TimeUnit.MILLISECONDS, <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="hljs-number">10000</span>), <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>.CallerRunsPolicy());
    }
}
</code></pre>
<pre><code class="hljs"/></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å®Œæ•´Redisåˆ†å¸ƒå¼é”æŠ€æœ¯æ–¹æ¡ˆï¼ˆåŸºäºRedissonï¼‰]]></title>    <link>https://juejin.cn/post/7582425536464879642</link>    <guid>https://juejin.cn/post/7582425536464879642</guid>    <pubDate>2025-12-12T01:51:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582425536464879642" data-draft-id="7582491862263791666" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å®Œæ•´Redisåˆ†å¸ƒå¼é”æŠ€æœ¯æ–¹æ¡ˆï¼ˆåŸºäºRedissonï¼‰"/> <meta itemprop="keywords" content="Redis,åˆ†å¸ƒå¼,Spring Cloud"/> <meta itemprop="datePublished" content="2025-12-12T01:51:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆå“ˆå“ˆç¬‘ä»€ä¹ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/808832912075352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å®Œæ•´Redisåˆ†å¸ƒå¼é”æŠ€æœ¯æ–¹æ¡ˆï¼ˆåŸºäºRedissonï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/808832912075352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆå“ˆå“ˆç¬‘ä»€ä¹ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T01:51:53.000Z" title="Fri Dec 12 2025 01:51:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å®Œæ•´Redisåˆ†å¸ƒå¼é”æŠ€æœ¯æ–¹æ¡ˆï¼ˆåŸºäºRedissonï¼‰</h2>
<h3 data-id="heading-1">ä¸€ã€æŠ€æœ¯æ–¹æ¡ˆæ¦‚è¿°</h3>
<h4 data-id="heading-2">1. è®¾è®¡ç†å¿µ</h4>
<p>åŸºäºRedissonå®ç°é«˜å¯é åˆ†å¸ƒå¼é”ï¼Œæ”¯æŒ<strong>å•æœº/é›†ç¾¤Redisè‡ªåŠ¨é€‚é…</strong>ï¼Œæä¾›<strong>å•ç‚¹é”ã€è”é”</strong>æ ¸å¿ƒåŠŸèƒ½ï¼Œé€šè¿‡é™æ€å·¥å…·ç±»ç®€åŒ–ä¸šåŠ¡è°ƒç”¨ï¼ŒåŒæ—¶ä¿éšœé”çš„åŸå­æ€§ã€è‡ªåŠ¨ç»­æœŸã€è¶…æ—¶æ§åˆ¶ç­‰ç‰¹æ€§ï¼Œé€‚ç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¹¶å‘åœºæ™¯ï¼ˆå¦‚åº“å­˜æ‰£å‡ã€è®¢å•åˆ›å»ºã€æ•°æ®åŒæ­¥ç­‰ï¼‰ã€‚</p>
<h4 data-id="heading-3">2. æ ¸å¿ƒä¼˜åŠ¿</h4>
<ul>
<li>è‡ªåŠ¨é€‚é…Rediséƒ¨ç½²æ¨¡å¼ï¼ˆå•æœº/é›†ç¾¤ï¼‰ï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹é…ç½®ï¼›</li>
<li>æ”¯æŒé”è‡ªåŠ¨ç»­æœŸï¼ˆleaseTime=-1æ—¶ï¼‰ï¼Œé¿å…ä¸šåŠ¡æœªå®Œæˆé”æå‰é‡Šæ”¾ï¼›</li>
<li>æä¾›è”é”åŠŸèƒ½ï¼Œæ”¯æŒå¤škeyåŸå­æ€§é”å®šï¼ˆè§£å†³åˆ†å¸ƒå¼åœºæ™¯ä¸‹å¤šèµ„æºå¹¶å‘ç«äº‰é—®é¢˜ï¼‰ï¼›</li>
<li>å®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œçº¿ç¨‹ä¸­æ–­æ”¯æŒï¼Œç¡®ä¿é”é‡Šæ”¾çš„å®‰å…¨æ€§ï¼›</li>
<li>åŸºäºSpring Bootè‡ªåŠ¨é…ç½®ï¼Œé›¶ä¾µå…¥é›†æˆä¸šåŠ¡ç³»ç»Ÿã€‚</li>
</ul>
<h3 data-id="heading-4">äºŒã€å®Œæ•´ä»£ç å®ç°</h3>
<h4 data-id="heading-5">1. åŒ…ç»“æ„è§„èŒƒ</h4>
<pre><code class="hljs language-kotlin" lang="kotlin">com.<span class="hljs-keyword">data</span>.redis
â”œâ”€â”€ DistributedLockTool.java       <span class="hljs-comment">// é™æ€è°ƒç”¨å·¥å…·ç±»</span>
â””â”€â”€ redisson
    â”œâ”€â”€ DistributedLocker.java      <span class="hljs-comment">// åˆ†å¸ƒå¼é”æ ¸å¿ƒæ¥å£</span>
    â”œâ”€â”€ RedissonDistributedLocker.java  <span class="hljs-comment">// Redissonå®ç°ç±»</span>
    â””â”€â”€ RedissonAutoConfiguration.java  <span class="hljs-comment">// è‡ªåŠ¨é…ç½®ç±»</span>
</code></pre>
<h4 data-id="heading-6">2. æ ¸å¿ƒæ¥å£ï¼ˆDistributedLocker.javaï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.data.redis.redisson;

<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * åˆ†å¸ƒå¼é”æ¥å£
 * <span class="hljs-doctag">@author</span> 2021/5/21
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">DistributedLocker</span> {

    <span class="hljs-comment">/**
     * è·å–é”
     * <span class="hljs-doctag">@param</span> lockKey é”keyï¼ˆå»ºè®®æ ¼å¼ï¼šä¸šåŠ¡æ¨¡å—:èµ„æºæ ‡è¯†:å”¯ä¸€IDï¼Œå¦‚order:create:1001ï¼‰
     * <span class="hljs-doctag">@param</span> leaseTime æŒæœ‰é”æ—¶é—´ï¼ˆå•ä½ï¼šunitï¼‰ï¼Œ-1è¡¨ç¤ºè‡ªåŠ¨ç»­æœŸ
     * <span class="hljs-doctag">@param</span> waitTime ç”³è¯·é”è¶…æ—¶æ—¶é—´ï¼ˆå•ä½ï¼šunitï¼‰
     * <span class="hljs-doctag">@param</span> unit æ—¶é—´å•ä½
     * <span class="hljs-doctag">@return</span> true=è·å–æˆåŠŸï¼Œfalse=è·å–å¤±è´¥
     */</span>
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">lock</span><span class="hljs-params">(String lockKey, <span class="hljs-type">long</span> leaseTime, <span class="hljs-type">long</span> waitTime, TimeUnit unit)</span>;

    <span class="hljs-comment">/**
     * è·å–è”é”ï¼ˆå¤škeyåŸå­é”ï¼‰
     * <span class="hljs-doctag">@param</span> lockKeys é”keyé›†åˆï¼ˆéœ€ä¿è¯æ‰€æœ‰keyéƒ½è·å–æˆåŠŸæ‰æŒæœ‰é”ï¼Œä»»æ„ä¸€ä¸ªå¤±è´¥åˆ™å…¨éƒ¨å¤±è´¥ï¼‰
     * <span class="hljs-doctag">@param</span> leaseTime æŒæœ‰é”æ—¶é—´ï¼Œ-1è¡¨ç¤ºè‡ªåŠ¨ç»­æœŸ
     * <span class="hljs-doctag">@param</span> waitTime ç”³è¯·é”è¶…æ—¶æ—¶é—´
     * <span class="hljs-doctag">@param</span> unit æ—¶é—´å•ä½
     * <span class="hljs-doctag">@return</span> true=è·å–æˆåŠŸï¼Œfalse=è·å–å¤±è´¥
     */</span>
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">multiLock</span><span class="hljs-params">(Collection&lt;String&gt; lockKeys, <span class="hljs-type">long</span> leaseTime, <span class="hljs-type">long</span> waitTime, TimeUnit unit)</span>;

    <span class="hljs-comment">/**
     * é‡Šæ”¾é”ï¼ˆä»…é‡Šæ”¾å½“å‰çº¿ç¨‹æŒæœ‰çš„é”ï¼‰
     * <span class="hljs-doctag">@param</span> lockKey é”key
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">unlock</span><span class="hljs-params">(String lockKey)</span>;

    <span class="hljs-comment">/**
     * é‡Šæ”¾è”é”
     * <span class="hljs-doctag">@param</span> lockKeys é”keyé›†åˆ
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">multiUnlock</span><span class="hljs-params">(Collection&lt;String&gt; lockKeys)</span>;
}
</code></pre>
<h4 data-id="heading-7">3. Redissonå®ç°ç±»ï¼ˆRedissonDistributedLocker.javaï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.data.redis.redisson;

<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> java.util.Collection;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * Redisåˆ†å¸ƒå¼é”å®ç°ï¼ˆåŸºäºRedissonï¼‰
 * <span class="hljs-doctag">@author</span> 2021/5/21
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedissonDistributedLocker</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">DistributedLocker</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;

    <span class="hljs-comment">// æ„é€ å™¨æ³¨å…¥RedissonClient</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RedissonDistributedLocker</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">lock</span><span class="hljs-params">(String lockKey, <span class="hljs-type">long</span> leaseTime, <span class="hljs-type">long</span> waitTime, TimeUnit unit)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// Redissonçš„tryLockæ”¯æŒè¶…æ—¶ç­‰å¾…ã€æŒæœ‰æ—¶é—´ã€è‡ªåŠ¨ç»­æœŸï¼ˆleaseTime=-1æ—¶ï¼‰</span>
            <span class="hljs-keyword">return</span> redissonClient.getLock(lockKey).tryLock(waitTime, leaseTime, unit);
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            <span class="hljs-comment">// æ¢å¤çº¿ç¨‹ä¸­æ–­çŠ¶æ€</span>
            Thread.currentThread().interrupt();
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">multiLock</span><span class="hljs-params">(Collection&lt;String&gt; lockKeys, <span class="hljs-type">long</span> leaseTime, <span class="hljs-type">long</span> waitTime, TimeUnit unit)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ‰¹é‡è·å–é”å¯¹è±¡ï¼Œæ„å»ºè”é”</span>
            org.redisson.api.RLock[] rLocks = lockKeys.stream()
                    .map(redissonClient::getLock)
                    .toArray(org.redisson.api.RLock[]::<span class="hljs-keyword">new</span>);
            <span class="hljs-comment">// è”é”ç‰¹æ€§ï¼šæ‰€æœ‰é”éƒ½è·å–æˆåŠŸæ‰è¿”å›trueï¼Œä»»æ„ä¸€ä¸ªå¤±è´¥åˆ™å…¨éƒ¨é‡Šæ”¾</span>
            <span class="hljs-keyword">return</span> redissonClient.getMultiLock(rLocks).tryLock(waitTime, leaseTime, unit);
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">unlock</span><span class="hljs-params">(String lockKey)</span> {
        org.redisson.api.<span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> redissonClient.getLock(lockKey);
        <span class="hljs-comment">// ä»…é‡Šæ”¾å½“å‰çº¿ç¨‹æŒæœ‰çš„é”ï¼Œé¿å…é‡Šæ”¾å…¶ä»–çº¿ç¨‹çš„é”</span>
        <span class="hljs-keyword">if</span> (lock.isHeldByCurrentThread()) {
            lock.unlock();
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">multiUnlock</span><span class="hljs-params">(Collection&lt;String&gt; lockKeys)</span> {
        org.redisson.api.RLock[] rLocks = lockKeys.stream()
                .map(redissonClient::getLock)
                .toArray(org.redisson.api.RLock[]::<span class="hljs-keyword">new</span>);
        redissonClient.getMultiLock(rLocks).unlock();
    }
}
</code></pre>
<h4 data-id="heading-8">4. é™æ€å·¥å…·ç±»ï¼ˆDistributedLockTool.javaï¼‰</h4>
<pre><code class="hljs language-typescript" lang="typescript">package com.<span class="hljs-property">data</span>.<span class="hljs-property">redis</span>;

<span class="hljs-keyword">import</span> com.<span class="hljs-property">data</span>.<span class="hljs-property">redis</span>.<span class="hljs-property">redisson</span>.<span class="hljs-property">DistributedLocker</span>;
<span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">Collection</span>;
<span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">concurrent</span>.<span class="hljs-property">TimeUnit</span>;

<span class="hljs-comment">/**
 * åˆ†å¸ƒå¼é”é™æ€å·¥å…·ç±»ï¼ˆä¸šåŠ¡å±‚ç›´æ¥è°ƒç”¨å…¥å£ï¼‰
 * <span class="hljs-doctag">@author</span> 2021/5/21
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistributedLockTool</span> {

    <span class="hljs-comment">// ç”±Springè‡ªåŠ¨æ³¨å…¥DistributedLockerå®ç°ç±»</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-title class_">DistributedLocker</span> distributedLocker;

    <span class="hljs-comment">// æä¾›setteræ–¹æ³•ï¼Œä¾›Springé…ç½®ç±»æ³¨å…¥</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setDistributedLocker</span>(<span class="hljs-params">DistributedLocker distributedLocker</span>) {
        <span class="hljs-title class_">DistributedLockTool</span>.<span class="hljs-property">distributedLocker</span> = distributedLocker;
    }

    <span class="hljs-comment">/**
     * è·å–å•ç‚¹é”
     * <span class="hljs-doctag">@param</span> lockKey é”key
     * <span class="hljs-doctag">@param</span> leaseTime æŒæœ‰æ—¶é—´ï¼ˆ-1=è‡ªåŠ¨ç»­æœŸï¼‰
     * <span class="hljs-doctag">@param</span> waitTime ç”³è¯·è¶…æ—¶æ—¶é—´
     * <span class="hljs-doctag">@param</span> unit æ—¶é—´å•ä½
     * <span class="hljs-doctag">@return</span> æ˜¯å¦è·å–æˆåŠŸ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">lock</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> lockKey, long leaseTime, long waitTime, TimeUnit unit</span>) {
        <span class="hljs-title function_">checkLockerInit</span>();
        <span class="hljs-keyword">return</span> distributedLocker.<span class="hljs-title function_">lock</span>(lockKey, leaseTime, waitTime, unit);
    }

    <span class="hljs-comment">/**
     * è·å–è”é”ï¼ˆå¤škeyï¼‰
     * <span class="hljs-doctag">@param</span> lockKeys é”keyé›†åˆ
     * <span class="hljs-doctag">@param</span> leaseTime æŒæœ‰æ—¶é—´ï¼ˆ-1=è‡ªåŠ¨ç»­æœŸï¼‰
     * <span class="hljs-doctag">@param</span> waitTime ç”³è¯·è¶…æ—¶æ—¶é—´
     * <span class="hljs-doctag">@param</span> unit æ—¶é—´å•ä½
     * <span class="hljs-doctag">@return</span> æ˜¯å¦è·å–æˆåŠŸ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">multiLock</span>(<span class="hljs-params">Collection&lt;<span class="hljs-built_in">String</span>&gt; lockKeys, long leaseTime, long waitTime, TimeUnit unit</span>) {
        <span class="hljs-title function_">checkLockerInit</span>();
        <span class="hljs-keyword">return</span> distributedLocker.<span class="hljs-title function_">multiLock</span>(lockKeys, leaseTime, waitTime, unit);
    }

    <span class="hljs-comment">/**
     * é‡Šæ”¾å•ç‚¹é”
     * <span class="hljs-doctag">@param</span> lockKey é”key
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">unlock</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> lockKey</span>) {
        <span class="hljs-title function_">checkLockerInit</span>();
        distributedLocker.<span class="hljs-title function_">unlock</span>(lockKey);
    }

    <span class="hljs-comment">/**
     * é‡Šæ”¾è”é”
     * <span class="hljs-doctag">@param</span> lockKeys é”keyé›†åˆ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">multiUnlock</span>(<span class="hljs-params">Collection&lt;<span class="hljs-built_in">String</span>&gt; lockKeys</span>) {
        <span class="hljs-title function_">checkLockerInit</span>();
        distributedLocker.<span class="hljs-title function_">multiUnlock</span>(lockKeys);
    }

    <span class="hljs-comment">/**
     * æ£€æŸ¥DistributedLockeræ˜¯å¦å·²åˆå§‹åŒ–ï¼ˆé¿å…ç©ºæŒ‡é’ˆï¼‰
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">checkLockerInit</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">if</span> (distributedLocker == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">"åˆ†å¸ƒå¼é”ç»„ä»¶æœªåˆå§‹åŒ–ï¼Œè¯·æ£€æŸ¥Redissoné…ç½®æ˜¯å¦æ­£ç¡®"</span>);
        }
    }
}
</code></pre>
<h4 data-id="heading-9">5. è‡ªåŠ¨é…ç½®ç±»ï¼ˆRedissonAutoConfiguration.javaï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.data.redis.redisson;

<span class="hljs-keyword">import</span> com.data.redis.DistributedLockTool;
<span class="hljs-keyword">import</span> org.redisson.Redisson;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> org.redisson.config.Config;
<span class="hljs-keyword">import</span> org.slf4j.LoggerFactory;
<span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.condition.ConditionalOnBean;
<span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.condition.ConditionalOnClass;
<span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.data.redis.RedisProperties;
<span class="hljs-keyword">import</span> org.springframework.boot.context.properties.EnableConfigurationProperties;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;

<span class="hljs-comment">/**
 * Redissonè‡ªåŠ¨é…ç½®ç±»ï¼ˆé€‚é…Spring Bootï¼Œæ”¯æŒå•æœº/é›†ç¾¤æ¨¡å¼ï¼‰
 * <span class="hljs-doctag">@author</span> 2021/5/21
 */</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@ConditionalOnClass(Config.class)</span> <span class="hljs-comment">// å­˜åœ¨Redissonçš„Configç±»æ—¶æ‰ç”Ÿæ•ˆ</span>
<span class="hljs-meta">@EnableConfigurationProperties(RedisProperties.class)</span> <span class="hljs-comment">// å¯ç”¨RedisPropertiesé…ç½®ç»‘å®š</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedissonAutoConfiguration</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> org.slf4j.<span class="hljs-type">Logger</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(RedissonAutoConfiguration.class);

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedisProperties redisProperties;

    <span class="hljs-comment">// æ³¨å…¥Spring Booté»˜è®¤çš„Redisé…ç½®ï¼ˆapplication.ymlä¸­çš„spring.redisé…ç½®ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RedissonAutoConfiguration</span><span class="hljs-params">(RedisProperties redisProperties)</span> {
        <span class="hljs-built_in">this</span>.redisProperties = redisProperties;
    }

    <span class="hljs-comment">/**
     * åˆå§‹åŒ–RedissonClientï¼ˆè‡ªåŠ¨é€‚é…å•æœº/é›†ç¾¤æ¨¡å¼ï¼‰
     * <span class="hljs-doctag">@return</span> RedissonClientå®ä¾‹
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RedissonClient <span class="hljs-title function_">redissonClient</span><span class="hljs-params">()</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">timeout</span> <span class="hljs-operator">=</span> <span class="hljs-number">3000</span>; <span class="hljs-comment">// é»˜è®¤è¿æ¥è¶…æ—¶æ—¶é—´ï¼š3ç§’</span>
        <span class="hljs-keyword">if</span> (redisProperties.getTimeout() != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// è½¬æ¢ä¸ºæ¯«ç§’ï¼ˆRedisPropertiesçš„timeoutå•ä½æ˜¯ç§’ï¼‰</span>
            timeout = redisProperties.getTimeout().getSeconds() &gt; <span class="hljs-number">0</span> ?
                    (<span class="hljs-type">int</span>) redisProperties.getTimeout().toMillis() : timeout;
        }

        <span class="hljs-type">Config</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Config</span>();

        <span class="hljs-comment">// é€‚é…å•æœºæ¨¡å¼ï¼ˆé»˜è®¤ï¼‰å’Œé›†ç¾¤æ¨¡å¼</span>
        <span class="hljs-keyword">if</span> (redisProperties.getCluster() == <span class="hljs-literal">null</span> || redisProperties.getCluster().getNodes().isEmpty()) {
            logger.info(<span class="hljs-string">"ã€Redissonã€‘åˆå§‹åŒ–å•æœºæ¨¡å¼é…ç½®ï¼Œåœ°å€ï¼š{}:{}"</span>, redisProperties.getHost(), redisProperties.getPort());
            <span class="hljs-comment">// å•æœºæ¨¡å¼é…ç½®</span>
            Config.<span class="hljs-type">SingleServerConfig</span> <span class="hljs-variable">singleServerConfig</span> <span class="hljs-operator">=</span> config.useSingleServer()
                    .setAddress(<span class="hljs-string">"redis://"</span> + redisProperties.getHost() + <span class="hljs-string">":"</span> + redisProperties.getPort())
                    .setTimeout(timeout) <span class="hljs-comment">// è¿æ¥è¶…æ—¶æ—¶é—´</span>
                    .setConnectionPoolSize(<span class="hljs-number">64</span>) <span class="hljs-comment">// è¿æ¥æ± æœ€å¤§å®¹é‡</span>
                    .setConnectionMinimumIdleSize(<span class="hljs-number">10</span>); <span class="hljs-comment">// è¿æ¥æ± æœ€å°ç©ºé—²è¿æ¥æ•°</span>

            <span class="hljs-comment">// é…ç½®Rediså¯†ç ï¼ˆå¦‚æœæœ‰ï¼‰</span>
            <span class="hljs-keyword">if</span> (redisProperties.getPassword() != <span class="hljs-literal">null</span> &amp;&amp; !redisProperties.getPassword().trim().isEmpty()) {
                singleServerConfig.setPassword(redisProperties.getPassword());
            }
        } <span class="hljs-keyword">else</span> {
            logger.info(<span class="hljs-string">"ã€Redissonã€‘åˆå§‹åŒ–é›†ç¾¤æ¨¡å¼é…ç½®ï¼ŒèŠ‚ç‚¹ï¼š{}"</span>, redisProperties.getCluster().getNodes());
            <span class="hljs-comment">// é›†ç¾¤æ¨¡å¼é…ç½®</span>
            String[] nodeAddresses = redisProperties.getCluster().getNodes().stream()
                    .map(node -&gt; <span class="hljs-string">"redis://"</span> + node)
                    .toArray(String[]::<span class="hljs-keyword">new</span>);

            Config.<span class="hljs-type">ClusterServersConfig</span> <span class="hljs-variable">clusterServersConfig</span> <span class="hljs-operator">=</span> config.useClusterServers()
                    .addNodeAddress(nodeAddresses)
                    .setTimeout(timeout)
                    .setConnectTimeout(<span class="hljs-number">3000</span>) <span class="hljs-comment">// é›†ç¾¤èŠ‚ç‚¹è¿æ¥è¶…æ—¶æ—¶é—´</span>
                    .setIdleConnectionTimeout(<span class="hljs-number">600000</span>); <span class="hljs-comment">// ç©ºé—²è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆ10åˆ†é’Ÿï¼‰</span>

            <span class="hljs-keyword">if</span> (redisProperties.getPassword() != <span class="hljs-literal">null</span> &amp;&amp; !redisProperties.getPassword().trim().isEmpty()) {
                clusterServersConfig.setPassword(redisProperties.getPassword());
            }
        }

        <span class="hljs-keyword">return</span> Redisson.create(config);
    }

    <span class="hljs-comment">/**
     * åˆå§‹åŒ–åˆ†å¸ƒå¼é”å®ç°ç±»ï¼Œå¹¶æ³¨å…¥åˆ°é™æ€å·¥å…·ç±»
     * <span class="hljs-doctag">@param</span> redissonClient RedissonClientå®ä¾‹ï¼ˆç”±ä¸Šé¢çš„<span class="hljs-doctag">@Bean</span>æ–¹æ³•æä¾›ï¼‰
     * <span class="hljs-doctag">@return</span> DistributedLockerå®ç°ç±»
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@ConditionalOnBean(RedissonClient.class)</span> <span class="hljs-comment">// å­˜åœ¨RedissonClientæ—¶æ‰åˆå§‹åŒ–</span>
    <span class="hljs-keyword">public</span> DistributedLocker <span class="hljs-title function_">distributedLocker</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-type">RedissonDistributedLocker</span> <span class="hljs-variable">locker</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedissonDistributedLocker</span>(redissonClient);
        <span class="hljs-comment">// æ³¨å…¥åˆ°é™æ€å·¥å…·ç±»ï¼Œä¾›ä¸šåŠ¡å±‚ç›´æ¥è°ƒç”¨</span>
        DistributedLockTool.setDistributedLocker(locker);
        <span class="hljs-keyword">return</span> locker;
    }
}
</code></pre>
<h3 data-id="heading-10">ä¸‰ã€ä¾èµ–é…ç½®ï¼ˆMaven/Gradleï¼‰</h3>
<h4 data-id="heading-11">1. Mavenï¼ˆpom.xmlï¼‰</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- Spring Boot Redisè‡ªåŠ¨é…ç½® --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- Redissonæ ¸å¿ƒä¾èµ–ï¼ˆå…¼å®¹Spring Bootï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.redisson<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>redisson-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.23.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <span class="hljs-comment">&lt;!-- æ¨èä½¿ç”¨ç¨³å®šç‰ˆï¼Œä¸Redisç‰ˆæœ¬å…¼å®¹ --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- è‹¥ä½¿ç”¨Spring Cloudï¼Œéœ€ç¡®ä¿ä¸Spring Bootç‰ˆæœ¬åŒ¹é… --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2023.0.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <span class="hljs-comment">&lt;!-- æ ¹æ®å®é™…ä½¿ç”¨çš„Spring Cloudç‰ˆæœ¬è°ƒæ•´ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h4 data-id="heading-12">2. Gradleï¼ˆbuild.gradleï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Spring Boot Redisè‡ªåŠ¨é…ç½®</span>
implementation <span class="hljs-string">'org.springframework.boot:spring-boot-starter-data-redis'</span>

<span class="hljs-comment">// Redissonæ ¸å¿ƒä¾èµ–</span>
implementation <span class="hljs-string">'org.redisson:redisson-spring-boot-starter:3.23.3'</span>

<span class="hljs-comment">// Spring Cloudä¾èµ–ï¼ˆæ ¹æ®å®é™…ç‰ˆæœ¬è°ƒæ•´ï¼‰</span>
implementation <span class="hljs-title function_">platform</span><span class="hljs-params">(<span class="hljs-string">'org.springframework.cloud:spring-cloud-dependencies:2023.0.4'</span>)</span>
</code></pre>
<h3 data-id="heading-13">å››ã€ä½¿ç”¨ç¤ºä¾‹ï¼ˆä¸šåŠ¡å±‚è°ƒç”¨ï¼‰</h3>
<h4 data-id="heading-14">1. å•ç‚¹é”ä½¿ç”¨åœºæ™¯ï¼ˆå¦‚è®¢å•åˆ›å»ºé˜²é‡å¤æäº¤ï¼‰</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> com.<span class="hljs-keyword">data</span>.redis.DistributedLockTool;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {

    <span class="hljs-comment">/**
     * åˆ›å»ºè®¢å•ï¼ˆé˜²é‡å¤æäº¤ï¼‰
     * <span class="hljs-doctag">@param</span> userId ç”¨æˆ·ID
     * <span class="hljs-doctag">@param</span> orderNo è®¢å•å·ï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰
     * <span class="hljs-doctag">@return</span> è®¢å•åˆ›å»ºç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> String createOrder(<span class="hljs-built_in">Long</span> userId, String orderNo) {
        <span class="hljs-comment">// 1. è®¾è®¡é”keyï¼šä¸šåŠ¡æ¨¡å—:èµ„æºæ ‡è¯†:å”¯ä¸€IDï¼ˆç¡®ä¿é”çš„ç²’åº¦åˆç†ï¼‰</span>
        String lockKey = <span class="hljs-string">"order:create:"</span> + orderNo;

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 2. è·å–é”ï¼šç”³è¯·è¶…æ—¶3ç§’ï¼ŒæŒæœ‰é”5ç§’ï¼ˆè‹¥ä¸šåŠ¡è€—æ—¶è¾ƒé•¿ï¼Œè®¾ä¸º-1è‡ªåŠ¨ç»­æœŸï¼‰</span>
            boolean lockSuccess = DistributedLockTool.lock(lockKey, <span class="hljs-number">5</span>, <span class="hljs-number">3</span>, TimeUnit.SECONDS);
            <span class="hljs-keyword">if</span> (!lockSuccess) {
                <span class="hljs-comment">// 3. é”è·å–å¤±è´¥ï¼ˆå¦‚è¶…æ—¶ï¼‰ï¼Œè¿”å›å‹å¥½æç¤º</span>
                <span class="hljs-keyword">return</span> <span class="hljs-string">"æ“ä½œè¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•"</span>;
            }

            <span class="hljs-comment">// 4. é”è·å–æˆåŠŸï¼Œæ‰§è¡Œæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚åˆ›å»ºè®¢å•ã€æ‰£å‡åº“å­˜ç­‰ï¼‰</span>
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"è®¢å•åˆ›å»ºæˆåŠŸï¼ŒorderNoï¼š"</span> + orderNo);
            <span class="hljs-keyword">return</span> <span class="hljs-string">"è®¢å•åˆ›å»ºæˆåŠŸ"</span>;

        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// 5. ä¸šåŠ¡å¼‚å¸¸å¤„ç†</span>
            logger.error(<span class="hljs-string">"åˆ›å»ºè®¢å•å¤±è´¥ï¼ŒorderNoï¼š{}"</span>, orderNo, e);
            <span class="hljs-keyword">return</span> <span class="hljs-string">"è®¢å•åˆ›å»ºå¤±è´¥"</span>;
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// 6. é‡Šæ”¾é”ï¼ˆå¿…é¡»åœ¨finallyä¸­æ‰§è¡Œï¼Œç¡®ä¿é”ä¸€å®šè¢«é‡Šæ”¾ï¼‰</span>
            DistributedLockTool.unlock(lockKey);
        }
    }
}
</code></pre>
<h4 data-id="heading-15">2. è”é”ä½¿ç”¨åœºæ™¯ï¼ˆå¦‚è½¬è´¦æ—¶é”å®šè½¬å‡º/è½¬å…¥è´¦æˆ·ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> com.data.redis.DistributedLockTool;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span> java.math.BigDecimal;
<span class="hljs-keyword">import</span> java.util.Arrays;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TransferService</span> {

    <span class="hljs-comment">/**
     * è´¦æˆ·è½¬è´¦ï¼ˆé”å®šè½¬å‡ºå’Œè½¬å…¥è´¦æˆ·ï¼Œé¿å…å¹¶å‘é—®é¢˜ï¼‰
     * <span class="hljs-doctag">@param</span> fromAccount è½¬å‡ºè´¦æˆ·
     * <span class="hljs-doctag">@param</span> toAccount è½¬å…¥è´¦æˆ·
     * <span class="hljs-doctag">@param</span> amount è½¬è´¦é‡‘é¢
     * <span class="hljs-doctag">@return</span> è½¬è´¦ç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">transfer</span><span class="hljs-params">(String fromAccount, String toAccount, BigDecimal amount)</span> {
        <span class="hljs-comment">// 1. è®¾è®¡è”é”keyï¼šæŒ‰å›ºå®šé¡ºåºæ’åºï¼ˆé¿å…æ­»é”ï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">lockKey1</span> <span class="hljs-operator">=</span> <span class="hljs-string">"account:lock:"</span> + fromAccount;
        <span class="hljs-type">String</span> <span class="hljs-variable">lockKey2</span> <span class="hljs-operator">=</span> <span class="hljs-string">"account:lock:"</span> + toAccount;
        List&lt;String&gt; lockKeys = Arrays.asList(lockKey1, lockKey2);

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 2. è·å–è”é”ï¼šç”³è¯·è¶…æ—¶5ç§’ï¼ŒæŒæœ‰é”10ç§’ï¼ˆè‡ªåŠ¨ç»­æœŸè®¾ä¸º-1ï¼‰</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">lockSuccess</span> <span class="hljs-operator">=</span> DistributedLockTool.multiLock(lockKeys, <span class="hljs-number">10</span>, <span class="hljs-number">5</span>, TimeUnit.SECONDS);
            <span class="hljs-keyword">if</span> (!lockSuccess) {
                <span class="hljs-keyword">return</span> <span class="hljs-string">"è½¬è´¦ç¹å¿™ï¼Œè¯·ç¨åå†è¯•"</span>;
            }

            <span class="hljs-comment">// 3. æ‰§è¡Œè½¬è´¦ä¸šåŠ¡é€»è¾‘ï¼ˆæ‰£å‡è½¬å‡ºè´¦æˆ·é‡‘é¢ï¼Œå¢åŠ è½¬å…¥è´¦æˆ·é‡‘é¢ï¼‰</span>
            System.out.println(<span class="hljs-string">"è½¬è´¦æˆåŠŸï¼š"</span> + fromAccount + <span class="hljs-string">" -&gt; "</span> + toAccount + <span class="hljs-string">"ï¼Œé‡‘é¢ï¼š"</span> + amount);
            <span class="hljs-keyword">return</span> <span class="hljs-string">"è½¬è´¦æˆåŠŸ"</span>;

        } <span class="hljs-keyword">catch</span> (Exception e) {
            logger.error(<span class="hljs-string">"è½¬è´¦å¤±è´¥ï¼Œfromï¼š{}ï¼Œtoï¼š{}"</span>, fromAccount, toAccount, e);
            <span class="hljs-keyword">return</span> <span class="hljs-string">"è½¬è´¦å¤±è´¥"</span>;
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// 4. é‡Šæ”¾è”é”</span>
            DistributedLockTool.multiUnlock(lockKeys);
        }
    }
}
</code></pre>
<h3 data-id="heading-16">äº”ã€å…³é”®é…ç½®è¯´æ˜ï¼ˆapplication.ymlï¼‰</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">redis:</span>
    <span class="hljs-comment"># å•æœºæ¨¡å¼é…ç½®</span>
    <span class="hljs-attr">host:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>
    <span class="hljs-attr">port:</span> <span class="hljs-number">6379</span>
    <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span> <span class="hljs-comment"># Rediså¯†ç ï¼ˆæ— å¯†ç åˆ™çœç•¥ï¼‰</span>
    <span class="hljs-attr">timeout:</span> <span class="hljs-number">3000</span> <span class="hljs-comment"># è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰</span>
    <span class="hljs-comment"># é›†ç¾¤æ¨¡å¼é…ç½®ï¼ˆå•æœºæ¨¡å¼æ—¶æ³¨é‡Šï¼‰</span>
    <span class="hljs-comment"># cluster:</span>
    <span class="hljs-comment">#   nodes:</span>
    <span class="hljs-comment">#     - 192.168.1.100:6379</span>
    <span class="hljs-comment">#     - 192.168.1.101:6379</span>
    <span class="hljs-comment">#     - 192.168.1.102:6379</span>
  <span class="hljs-comment"># Redissoné¢å¤–é…ç½®ï¼ˆå¯é€‰ï¼‰</span>
<span class="hljs-attr">redisson:</span>
  <span class="hljs-attr">codec:</span> <span class="hljs-string">org.redisson.codec.JsonJacksonCodec</span> <span class="hljs-comment"># åºåˆ—åŒ–æ–¹å¼ï¼ˆé»˜è®¤Jacksonï¼‰</span>
  <span class="hljs-attr">threads:</span> <span class="hljs-number">4</span> <span class="hljs-comment"># ä¸šåŠ¡çº¿ç¨‹æ± å¤§å°</span>
  <span class="hljs-attr">netty-threads:</span> <span class="hljs-number">8</span> <span class="hljs-comment"># Nettyçº¿ç¨‹æ± å¤§å°</span>
</code></pre>
<h3 data-id="heading-17">å…­ã€æ³¨æ„äº‹é¡¹ï¼ˆé¿å‘æŒ‡å—ï¼‰</h3>
<ol>
<li><strong>é”keyè®¾è®¡è§„èŒƒ</strong>ï¼š</li>
</ol>
<p>å¿…é¡»ä¿è¯é”keyçš„å”¯ä¸€æ€§å’Œç²’åº¦åˆç†æ€§ï¼Œå»ºè®®æ ¼å¼ï¼š<code>ä¸šåŠ¡æ¨¡å—:èµ„æºç±»å‹:å”¯ä¸€æ ‡è¯†</code>ï¼ˆå¦‚<code>inventory:deduct:1001</code>ï¼‰ï¼Œé¿å…é”ç²’åº¦è¿‡ç²—ï¼ˆå¯¼è‡´å¹¶å‘ä½ï¼‰æˆ–è¿‡ç»†ï¼ˆå¯¼è‡´é”è¿‡å¤šï¼‰ã€‚</p>
<ol start="2">
<li><strong>é¿å…æ­»é”</strong>ï¼š</li>
</ol>
<p>ä½¿ç”¨è”é”æ—¶ï¼Œå¿…é¡»æŒ‰<strong>å›ºå®šé¡ºåº</strong>æ’åˆ—é”keyï¼ˆå¦‚æŒ‰å­—å…¸åºæ’åºï¼‰ï¼Œé¿å…ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æŒæœ‰éƒ¨åˆ†é”ï¼Œäº’ç›¸ç­‰å¾…å¯¹æ–¹é‡Šæ”¾ã€‚</p>
<ol start="3">
<li><strong>é”é‡Šæ”¾æ—¶æœº</strong>ï¼š</li>
</ol>
<p>å¿…é¡»åœ¨<code>finally</code>å—ä¸­é‡Šæ”¾é”ï¼Œç¡®ä¿å³ä½¿ä¸šåŠ¡å¼‚å¸¸ï¼Œé”ä¹Ÿèƒ½æ­£å¸¸é‡Šæ”¾ï¼Œé¿å…æ­»é”ã€‚</p>
<ol start="4">
<li><strong>è‡ªåŠ¨ç»­æœŸåœºæ™¯</strong>ï¼š</li>
</ol>
<p>å½“ä¸šåŠ¡è€—æ—¶ä¸ç¡®å®šæ—¶ï¼ˆå¦‚å¤§æ–‡ä»¶å¤„ç†ï¼‰ï¼Œå°†<code>leaseTime</code>è®¾ä¸º<code>-1</code>ï¼ŒRedissonä¼šè‡ªåŠ¨ç»­æœŸé”ï¼ˆé»˜è®¤æ¯30ç§’ç»­æœŸä¸€æ¬¡ï¼‰ï¼Œé¿å…é”æå‰é‡Šæ”¾ã€‚</p>
<ol start="5">
<li><strong>Redisé›†ç¾¤å¯é æ€§</strong>ï¼š</li>
</ol>
<p>ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨Redisé›†ç¾¤ï¼ˆä¸»ä»+å“¨å…µæˆ–Redis Clusterï¼‰ï¼Œç¡®ä¿Redissonå®¢æˆ·ç«¯èƒ½è‡ªåŠ¨åˆ‡æ¢èŠ‚ç‚¹ï¼Œé¿å…å•ç‚¹æ•…éšœå¯¼è‡´é”å¤±æ•ˆã€‚</p>
<ol start="6">
<li><strong>å¹¶å‘é‡æ§åˆ¶</strong>ï¼š</li>
</ol>
<p>è¿æ¥æ± å¤§å°ï¼ˆ<code>connectionPoolSize</code>ï¼‰å»ºè®®æ ¹æ®Redisæ€§èƒ½å’Œä¸šåŠ¡å¹¶å‘é‡è°ƒæ•´ï¼ˆé»˜è®¤64ï¼‰ï¼Œé¿å…è¿æ¥æ± è€—å°½å¯¼è‡´é”è·å–è¶…æ—¶ã€‚</p>
<h3 data-id="heading-18">ä¸ƒã€å®Œæ•´ç»„ä»¶æ¸…å•ï¼ˆå¯ç›´æ¥å¤åˆ¶é›†æˆï¼‰</h3>

































<table><thead><tr><th>åŒ…è·¯å¾„/ç±»å</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>com.data.redis.DistributedLockTool</td><td>é™æ€è°ƒç”¨å…¥å£ï¼Œç®€åŒ–ä¸šåŠ¡ä½¿ç”¨</td></tr><tr><td>com.data.redis.redisson.DistributedLocker</td><td>åˆ†å¸ƒå¼é”æ ¸å¿ƒæ¥å£ï¼Œå®šä¹‰è§„èŒƒ</td></tr><tr><td>com.data.redis.redisson.RedissonDistributedLocker</td><td>æ¥å£å®ç°ï¼ŒåŸºäºRedissonå°è£…</td></tr><tr><td>com.data.redis.redisson.RedissonAutoConfiguration</td><td>è‡ªåŠ¨é…ç½®ç±»ï¼Œé€‚é…Spring Boot</td></tr><tr><td>pom.xml/build.gradle</td><td>ä¾èµ–é…ç½®ï¼Œå¼•å…¥Redissonå’ŒRedis</td></tr><tr><td>application.yml</td><td>Rediså’ŒRedissoné…ç½®</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å®ç°Spring Cloud Sleuthçš„Trace IDè¿½è¸ªæ—¥å¿—å®æˆ˜æ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7582438809378897962</link>    <guid>https://juejin.cn/post/7582438809378897962</guid>    <pubDate>2025-12-12T02:03:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582438809378897962" data-draft-id="7582479325284466751" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å®ç°Spring Cloud Sleuthçš„Trace IDè¿½è¸ªæ—¥å¿—å®æˆ˜æ•™ç¨‹"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2025-12-12T02:03:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°åè¯´Java"/> <meta itemprop="url" content="https://juejin.cn/user/3898184413750203"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å®ç°Spring Cloud Sleuthçš„Trace IDè¿½è¸ªæ—¥å¿—å®æˆ˜æ•™ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3898184413750203/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°åè¯´Java
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T02:03:06.000Z" title="Fri Dec 12 2025 02:03:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å®ç°Spring Cloud Sleuthçš„Trace IDè¿½è¸ªæ—¥å¿—</h3>
<p>Spring Cloud Sleuthçš„Trace IDè¿½è¸ªä¸»è¦ç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­å®ç°è¯·æ±‚é“¾è·¯è·Ÿè¸ªï¼Œå…¶æ ¸å¿ƒä½œç”¨åŒ…æ‹¬ï¼š</p>
<p>è¯·æ±‚é“¾è·¯ä¸²è”â€Œï¼šTrace IDåœ¨ä¸€æ¬¡æœåŠ¡è¯·æ±‚é“¾è·¯ä¸­ä¿æŒå¹¶ä¼ é€’ï¼Œå°†ä¸åŒæœåŠ¡çš„è¯·æ±‚è·Ÿè¸ªä¿¡æ¯ä¸²è”èµ·æ¥ï¼Œç¡®ä¿æ‰€æœ‰æœåŠ¡çš„æ—¥å¿—å…³è”ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªè¯·æ±‚ä»å‰ç«¯Aåˆ°åç«¯Dï¼ŒTrace IDåœ¨å„æœåŠ¡ä¸­ä¿æŒä¸€è‡´ï¼Œå½¢æˆå®Œæ•´é“¾è·¯ã€‚</p>
<p>é—®é¢˜å®šä½â€Œï¼šé€šè¿‡Trace IDï¼Œå¯ä»¥å¿«é€Ÿå®šä½è¯·æ±‚ç»è¿‡çš„æœåŠ¡å•å…ƒåŠé¡ºåºï¼Œå°¤å…¶åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œå¸®åŠ©å¿«é€Ÿè¯†åˆ«æ•…éšœæœåŠ¡ã€‚ä¾‹å¦‚ï¼Œè‹¥è¯·æ±‚åœ¨æœåŠ¡Cå¤±è´¥ï¼ŒTrace IDå¯è¿½è¸ªåˆ°å®Œæ•´è°ƒç”¨è·¯å¾„ã€‚</p>
<p>æ€§èƒ½åˆ†æâ€Œï¼šTrace IDç»“åˆSpan IDï¼ˆå·¥ä½œå•å…ƒIDï¼‰ç»Ÿè®¡å„æœåŠ¡å¤„ç†å»¶è¿Ÿï¼ŒåŒºåˆ†æ‰§è¡Œæ—¶é—´å’Œç½‘ç»œå»¶è¿Ÿï¼Œä¼˜åŒ–æ€§èƒ½ã€‚ä¾‹å¦‚ï¼Œåˆ†ææœåŠ¡è°ƒç”¨è€—æ—¶ï¼Œè¯†åˆ«ç“¶é¢ˆæœåŠ¡ã€‚</p>
<p>å¯è§†åŒ–ç›‘æ§â€Œï¼šä¸Zipkinç­‰å·¥å…·é›†æˆåï¼ŒTrace IDç”Ÿæˆçš„é“¾è·¯æ•°æ®å¯å¯è§†åŒ–å±•ç¤ºï¼Œæä¾›æœåŠ¡æ‹“æ‰‘å›¾å’Œæ€§èƒ½æŒ‡æ ‡ã€‚ä¾‹å¦‚ï¼Œé€šè¿‡Zipkin UIæŸ¥çœ‹è°ƒç”¨å…³ç³»å’Œå“åº”æ—¶é—´ã€‚</p>
<p>æ—¥å¿—å…³è”â€Œï¼šåœ¨æ—¥å¿—ç³»ç»Ÿä¸­ï¼ŒTrace IDä½œä¸ºå…³é”®å­—æ®µï¼Œé€šè¿‡ELKç­‰å·¥å…·å¯å¿«é€Ÿæ£€ç´¢åŒä¸€è¯·æ±‚çš„å…¨é“¾è·¯æ—¥å¿—ã€‚ä¾‹å¦‚ï¼Œé€šè¿‡Trace IDæå–æ‰€æœ‰æœåŠ¡çš„æ—¥å¿—ç‰‡æ®µï¼Œå½¢æˆå®Œæ•´æ—¥å¿—é“¾è·¯ã€‚</p>
<p>ç»¼ä¸Šï¼ŒTrace IDæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å®ç°é“¾è·¯è¿½è¸ªã€é—®é¢˜å®šä½å’Œæ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒæœºåˆ¶ã€‚</p>
<h4 data-id="heading-1">æ·»åŠ ä¾èµ–</h4>
<p>åœ¨é¡¹ç›®çš„<code>pom.xml</code>æ–‡ä»¶ä¸­æ·»åŠ Spring Cloud Sleuthä¾èµ–ã€‚ç¡®ä¿ç‰ˆæœ¬ä¸Spring Bootå’ŒSpring Cloudå…¼å®¹ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-sleuth<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>å¦‚æœä½¿ç”¨æ—¥å¿—èšåˆå·¥å…·å¦‚Zipkinï¼Œå¯ä»¥æ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-sleuth-zipkin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h4 data-id="heading-2">é…ç½®æ—¥å¿—æ ¼å¼</h4>
<p>åœ¨<code>application.properties</code>æˆ–<code>application.yml</code>ä¸­é…ç½®æ—¥å¿—æ ¼å¼ä»¥æ˜¾ç¤ºTrace IDå’ŒSpan IDã€‚</p>
<pre><code class="hljs language-properties" lang="properties">logging.pattern.level=%5p [${spring.application.name:},%X{traceId:-},%X{spanId:-}]
</code></pre>
<p>æˆ–ä½¿ç”¨YAMLæ ¼å¼ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">logging:</span>
  <span class="hljs-attr">pattern:</span>
    <span class="hljs-attr">level:</span> <span class="hljs-string">"%5p [${spring.application.name:},%X{traceId:-},%X{spanId:-}]"</span>
</code></pre>
<h4 data-id="heading-3">ç¤ºä¾‹æ§åˆ¶å™¨ä»£ç </h4>
<p>åˆ›å»ºä¸€ä¸ªç®€å•çš„æ§åˆ¶å™¨ä»¥éªŒè¯Trace IDæ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.slf4j.Logger;
<span class="hljs-keyword">import</span> org.slf4j.LoggerFactory;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.GetMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RestController;

<span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TraceController</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(TraceController.class);

    <span class="hljs-meta">@GetMapping("/trace")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">trace</span><span class="hljs-params">()</span> {
        logger.info(<span class="hljs-string">"This is a log message with Trace ID"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Trace ID is working!"</span>;
    }
}
</code></pre>
<h4 data-id="heading-4">å¯ç”¨Zipkiné›†æˆï¼ˆå¯é€‰ï¼‰</h4>
<p>å¦‚æœéœ€è¦å°†è·Ÿè¸ªæ•°æ®å‘é€åˆ°ZipkinæœåŠ¡å™¨ï¼Œé…ç½®<code>application.properties</code>ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">spring.zipkin.base-url=http://localhost:9411
spring.sleuth.sampler.probability=1.0
</code></pre>
<p>æˆ–YAMLæ ¼å¼ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">zipkin:</span>
    <span class="hljs-attr">base-url:</span> <span class="hljs-string">http://localhost:9411</span>
  <span class="hljs-attr">sleuth:</span>
    <span class="hljs-attr">sampler:</span>
      <span class="hljs-attr">probability:</span> <span class="hljs-number">1.0</span>
</code></pre>
<h4 data-id="heading-5">æ—¥å¿—è¾“å‡ºéªŒè¯</h4>
<p>å¯åŠ¨åº”ç”¨å¹¶è®¿é—®<code>/trace</code>ç«¯ç‚¹ï¼Œæ£€æŸ¥æ—¥å¿—è¾“å‡ºã€‚æ—¥å¿—ä¸­åº”åŒ…å«Trace IDå’ŒSpan IDï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">INFO [my-application,<span class="hljs-number">3</span>c7a8b1e2f6d4a5b,<span class="hljs-number">9e1</span>f0a3b5c7d8e2f] This <span class="hljs-keyword">is</span> a log message <span class="hljs-keyword">with</span> Trace ID
</code></pre>
<h4 data-id="heading-6">è‡ªå®šä¹‰æ—¥å¿—å­—æ®µ</h4>
<p>å¦‚æœéœ€è¦è‡ªå®šä¹‰æ—¥å¿—å­—æ®µï¼Œå¯ä»¥åœ¨æ—¥å¿—é…ç½®ä¸­æ·»åŠ æ›´å¤šSleuthæä¾›çš„å˜é‡ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">logging.pattern.level=%d{yyyy-MM-dd HH:mm:ss} [%X{traceId:-},%X{spanId:-},%X{parentId:-}] %-5level %logger{36} - %msg%n
</code></pre>
<h4 data-id="heading-7">è·¨æœåŠ¡è¿½è¸ª</h4>
<p>ç¡®ä¿æ‰€æœ‰å¾®æœåŠ¡éƒ½æ·»åŠ äº†Spring Cloud Sleuthä¾èµ–ã€‚é€šè¿‡HTTPè°ƒç”¨ï¼ˆå¦‚RestTemplateæˆ–Feignï¼‰æ—¶ï¼ŒTrace IDä¼šè‡ªåŠ¨ä¼ é€’ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.web.client.RestTemplate;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SomeService</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RestTemplate restTemplate;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SomeService</span><span class="hljs-params">(RestTemplate restTemplate)</span> {
        <span class="hljs-built_in">this</span>.restTemplate = restTemplate;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">callAnotherService</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> restTemplate.getForObject(<span class="hljs-string">"http://another-service/trace"</span>, String.class);
    }
}
</code></pre>
<h4 data-id="heading-8">å¼‚æ­¥ä»»åŠ¡æ”¯æŒ</h4>
<p>å¯¹äºå¼‚æ­¥ä»»åŠ¡ï¼Œä½¿ç”¨<code>@Async</code>æ³¨è§£æ—¶ï¼ŒTrace IDä¼šè‡ªåŠ¨ä¼ é€’ã€‚ç¡®ä¿å¯ç”¨å¼‚æ­¥æ”¯æŒï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.scheduling.annotation.Async;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncService</span> {
    <span class="hljs-meta">@Async</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">asyncMethod</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å¼‚æ­¥æ–¹æ³•ä¸­çš„æ—¥å¿—ä¼šåŒ…å«Trace ID</span>
    }
}
</code></pre>
<h4 data-id="heading-9">æ‰‹åŠ¨åˆ›å»ºSpan</h4>
<p>å¦‚æœéœ€è¦æ‰‹åŠ¨åˆ›å»ºSpanï¼Œå¯ä»¥ä½¿ç”¨<code>Tracer</code>æ¥å£ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.cloud.sleuth.Tracer;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomTraceService</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Tracer tracer;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CustomTraceService</span><span class="hljs-params">(Tracer tracer)</span> {
        <span class="hljs-built_in">this</span>.tracer = tracer;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">customTrace</span><span class="hljs-params">()</span> {
        <span class="hljs-type">var</span> <span class="hljs-variable">span</span> <span class="hljs-operator">=</span> tracer.nextSpan().name(<span class="hljs-string">"custom-span"</span>).start();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘</span>
        } <span class="hljs-keyword">finally</span> {
            span.end();
        }
    }
}
</code></pre>
<h4 data-id="heading-10">æµ‹è¯•éªŒè¯</h4>
<p>ç¼–å†™æµ‹è¯•ç”¨ä¾‹éªŒè¯Trace IDæ˜¯å¦æ­£å¸¸å·¥ä½œï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.boot.test.context.SpringBootTest;
<span class="hljs-keyword">import</span> org.springframework.boot.test.web.client.TestRestTemplate;

<span class="hljs-meta">@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TraceTest</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> TestRestTemplate restTemplate;

    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testTraceId</span><span class="hljs-params">()</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> restTemplate.getForObject(<span class="hljs-string">"/trace"</span>, String.class);
        <span class="hljs-comment">// éªŒè¯æ—¥å¿—è¾“å‡ºä¸­æ˜¯å¦åŒ…å«Trace ID</span>
    }
}
</code></pre>
<h4 data-id="heading-11">æ³¨æ„äº‹é¡¹</h4>
<ul>
<li>ç¡®ä¿æ‰€æœ‰æœåŠ¡ä½¿ç”¨ç›¸åŒçš„æ—¥å¿—æ ¼å¼é…ç½®ã€‚</li>
<li>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè®¾ç½®é€‚å½“çš„é‡‡æ ·ç‡ï¼ˆå¦‚<code>spring.sleuth.sampler.probability=0.1</code>ï¼‰ã€‚</li>
<li>å¦‚æœéœ€è¦æ›´å¤æ‚çš„è¿½è¸ªåŠŸèƒ½ï¼Œè€ƒè™‘ä½¿ç”¨Zipkinæˆ–Jaegerç­‰åˆ†å¸ƒå¼è¿½è¸ªç³»ç»Ÿã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringçŠ¶æ€æœºæ·±åº¦è§£æï¼šä»å…¥é—¨åˆ°ç”Ÿäº§å®æˆ˜]]></title>    <link>https://juejin.cn/post/7582480048958685211</link>    <guid>https://juejin.cn/post/7582480048958685211</guid>    <pubDate>2025-12-12T02:05:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582480048958685211" data-draft-id="7582480048958668827" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringçŠ¶æ€æœºæ·±åº¦è§£æï¼šä»å…¥é—¨åˆ°ç”Ÿäº§å®æˆ˜"/> <meta itemprop="keywords" content="Spring,Java"/> <meta itemprop="datePublished" content="2025-12-12T02:05:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ä¸­é£˜è¡çš„è®°å¿†"/> <meta itemprop="url" content="https://juejin.cn/user/694547077666606"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringçŠ¶æ€æœºæ·±åº¦è§£æï¼šä»å…¥é—¨åˆ°ç”Ÿäº§å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547077666606/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ä¸­é£˜è¡çš„è®°å¿†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T02:05:07.000Z" title="Fri Dec 12 2025 02:05:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">SpringçŠ¶æ€æœºæ·±åº¦è§£æï¼šä»å…¥é—¨åˆ°ç”Ÿäº§å®æˆ˜</h2>
<blockquote>
<p>Spring State Machineæ˜¯Springç”Ÿæ€ç³»ç»Ÿä¸­ä¸€ä¸ªå¼ºå¤§çš„çŠ¶æ€æœºæ¡†æ¶ï¼Œå®ƒè®©å¤æ‚çš„çŠ¶æ€æµè½¬å˜å¾—ä¼˜é›…è€Œç®€å•ã€‚æœ¬æ–‡å°†å¸¦ä½ ä»åŸºç¡€æ¦‚å¿µå‡ºå‘ï¼Œé€æ­¥æ·±å…¥ç†è§£å¹¶æŒæ¡SpringçŠ¶æ€æœºåœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­çš„åº”ç”¨ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€çŠ¶æ€æœºæ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨å®ƒï¼Ÿ</h3>
<p>æƒ³è±¡ä¸€ä¸‹è®¢å•ç³»ç»Ÿï¼šç”¨æˆ·ä¸‹å•åï¼Œè®¢å•ä¼šç»å†"å¾…æ”¯ä»˜â†’å·²æ”¯ä»˜â†’å¾…å‘è´§â†’å·²å‘è´§â†’å·²å®Œæˆ"ç­‰ä¸€ç³»åˆ—çŠ¶æ€å˜åŒ–ã€‚å¦‚æœåœ¨ä»£ç é‡Œç”¨if-elseæ¥å¤„ç†è¿™äº›çŠ¶æ€æµè½¬ï¼Œå¾ˆå¿«å°±ä¼šå˜æˆä¸€å›¢ä¹±éº»ã€‚</p>
<p>çŠ¶æ€æœºï¼ˆState Machineï¼‰å°±æ˜¯è§£å†³è¿™ç±»é—®é¢˜çš„åˆ©å™¨ï¼å®ƒæ˜ç¡®å®šä¹‰äº†ï¼š</p>
<ul>
<li><strong>çŠ¶æ€ï¼ˆStateï¼‰</strong>ï¼šç³»ç»Ÿå¯èƒ½å¤„äºçš„çŠ¶æ€</li>
<li><strong>äº‹ä»¶ï¼ˆEventï¼‰</strong>ï¼šè§¦å‘çŠ¶æ€å˜åŒ–çš„åŠ¨ä½œ</li>
<li><strong>è½¬æ¢ï¼ˆTransitionï¼‰</strong>ï¼šçŠ¶æ€ä¹‹é—´çš„æµè½¬è§„åˆ™</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0eba814b48645e88290da4403b47d07~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766109906&amp;x-signature=xUmEAdYgN2OWHdRDTGPzRNlMXLk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-2">äºŒã€SpringçŠ¶æ€æœºæ ¸å¿ƒæ¦‚å¿µ</h3>
<h4 data-id="heading-3">2.1 ä¸‰å¤§æ ¸å¿ƒç»„ä»¶</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. å®šä¹‰çŠ¶æ€æšä¸¾</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">OrderStatus</span> {
    WAIT_PAYMENT,    <span class="hljs-comment">// å¾…æ”¯ä»˜</span>
    PAID,           <span class="hljs-comment">// å·²æ”¯ä»˜</span>
    WAIT_DELIVER,   <span class="hljs-comment">// å¾…å‘è´§</span>
    DELIVERED,      <span class="hljs-comment">// å·²å‘è´§</span>
    COMPLETED,      <span class="hljs-comment">// å·²å®Œæˆ</span>
    CANCELLED       <span class="hljs-comment">// å·²å–æ¶ˆ</span>
}

<span class="hljs-comment">// 2. å®šä¹‰äº‹ä»¶æšä¸¾</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">OrderEvent</span> {
    PAY,        <span class="hljs-comment">// æ”¯ä»˜</span>
    DELIVER,    <span class="hljs-comment">// å‘è´§</span>
    RECEIVE,    <span class="hljs-comment">// æ”¶è´§</span>
    CANCEL      <span class="hljs-comment">// å–æ¶ˆ</span>
}

<span class="hljs-comment">// 3. é…ç½®çŠ¶æ€æœº</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableStateMachine</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderStateMachineConfig</span>
    <span class="hljs-keyword">extends</span> <span class="hljs-title class_">StateMachineConfigurerAdapter</span>&lt;OrderStatus, OrderEvent&gt; {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configure</span><span class="hljs-params">(StateMachineStateConfigurer&lt;OrderStatus, OrderEvent&gt; states)</span>
            <span class="hljs-keyword">throws</span> Exception {
        states.withStates()
            .initial(OrderStatus.WAIT_PAYMENT)
            .states(EnumSet.allOf(OrderStatus.class));
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configure</span><span class="hljs-params">(StateMachineTransitionConfigurer&lt;OrderStatus, OrderEvent&gt; transitions)</span>
            <span class="hljs-keyword">throws</span> Exception {
        transitions
            .withExternal()
                .source(OrderStatus.WAIT_PAYMENT)
                .target(OrderStatus.PAID)
                .event(OrderEvent.PAY)
            .and()
            .withExternal()
                .source(OrderStatus.PAID)
                .target(OrderStatus.WAIT_DELIVER)
                .event(OrderEvent.DELIVER)
            .and()
            .withExternal()
                .source(OrderStatus.WAIT_DELIVER)
                .target(OrderStatus.DELIVERED)
                .event(OrderEvent.RECEIVE)
            .and()
            .withExternal()
                .source(OrderStatus.DELIVERED)
                .target(OrderStatus.COMPLETED)
                .event(OrderEvent.RECEIVE);
    }
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/757bf699309e4478819c66a7f94a8457~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766109906&amp;x-signature=gVKjzU%2BhfpHfAyHtcfq3j3ehMfI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h4 data-id="heading-4">2.2 çŠ¶æ€æŒä¹…åŒ–</h4>
<p>ç”Ÿäº§ç¯å¢ƒä¸­ï¼ŒçŠ¶æ€å¿…é¡»æŒä¹…åŒ–ã€‚SpringçŠ¶æ€æœºæ”¯æŒå¤šç§æŒä¹…åŒ–æ–¹å¼ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> StateMachineFactory&lt;OrderStatus, OrderEvent&gt; factory;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> StateMachinePersist&lt;OrderStatus, OrderEvent, String&gt; persist;

    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">pay</span><span class="hljs-params">(String orderId)</span> {
        StateMachine&lt;OrderStatus, OrderEvent&gt; sm = restoreStateMachine(orderId);
        <span class="hljs-type">boolean</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> sm.sendEvent(OrderEvent.PAY);

        <span class="hljs-keyword">if</span> (result) {
            persistStateMachine(orderId, sm);
            <span class="hljs-comment">// å‘é€æ”¯ä»˜æˆåŠŸæ¶ˆæ¯</span>
            publishPaymentSuccessEvent(orderId);
        }

        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-keyword">private</span> StateMachine&lt;OrderStatus, OrderEvent&gt; <span class="hljs-title function_">restoreStateMachine</span><span class="hljs-params">(String orderId)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> persist.restore(factory.getStateMachine(), orderId);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æ¢å¤çŠ¶æ€æœºå¤±è´¥"</span>, e);
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">persistStateMachine</span><span class="hljs-params">(String orderId, StateMachine&lt;OrderStatus, OrderEvent&gt; sm)</span> {
        <span class="hljs-keyword">try</span> {
            persist.persist(sm, orderId);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ä¿å­˜çŠ¶æ€æœºå¤±è´¥"</span>, e);
        }
    }
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f336fe7b13d45189d4f57f6881e9190~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766109906&amp;x-signature=SPfTqqT1lpaujQa8q5wNubZWCFs%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-5">ä¸‰ã€ç”Ÿäº§å®æˆ˜ï¼šå·¥ä½œæµå¼•æ“</h3>
<p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªæ›´å¤æ‚çš„ä¾‹å­â€”â€”å®¡æ‰¹å·¥ä½œæµç³»ç»Ÿï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ”¯æŒå¹¶è¡Œå®¡æ‰¹çš„å¤æ‚çŠ¶æ€æœº</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableStateMachine(name = "workflowStateMachine")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WorkflowStateMachineConfig</span>
    <span class="hljs-keyword">extends</span> <span class="hljs-title class_">EnumStateMachineConfigurerAdapter</span>&lt;WorkflowState, WorkflowEvent&gt; {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configure</span><span class="hljs-params">(StateMachineStateConfigurer&lt;WorkflowState, WorkflowEvent&gt; states)</span>
            <span class="hljs-keyword">throws</span> Exception {
        states
            .withStates()
            .initial(WorkflowState.DRAFT)
            .fork(WorkflowState.FORK)
            .join(WorkflowState.JOIN)
            .state(WorkflowState.FINISHED)
            .and()
            .withStates()
                .parent(WorkflowState.FORK)
                .initial(WorkflowState.DEPT_APPROVAL)
                .state(WorkflowState.DEPT_APPROVED)
            .and()
            .withStates()
                .parent(WorkflowState.FORK)
                .initial(WorkflowState.FINANCE_APPROVAL)
                .state(WorkflowState.FINANCE_APPROVED);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configure</span><span class="hljs-params">(StateMachineTransitionConfigurer&lt;WorkflowState, WorkflowEvent&gt; transitions)</span>
            <span class="hljs-keyword">throws</span> Exception {
        transitions
            <span class="hljs-comment">// æäº¤åˆ°å¹¶è¡Œå®¡æ‰¹</span>
            .withExternal()
                .source(WorkflowState.DRAFT)
                .target(WorkflowState.FORK)
                .event(WorkflowEvent.SUBMIT)
            <span class="hljs-comment">// éƒ¨é—¨å®¡æ‰¹åˆ†æ”¯</span>
            .and()
                .withExternal()
                .source(WorkflowState.DEPT_APPROVAL)
                .target(WorkflowState.DEPT_APPROVED)
                .event(WorkflowEvent.DEPT_APPROVE)
            <span class="hljs-comment">// è´¢åŠ¡å®¡æ‰¹åˆ†æ”¯</span>
            .and()
                .withExternal()
                .source(WorkflowState.FINANCE_APPROVAL)
                .target(WorkflowState.FINANCE_APPROVED)
                .event(WorkflowEvent.FINANCE_APPROVE)
            <span class="hljs-comment">// åˆå¹¶åå®Œæˆ</span>
            .and()
                .withExternal()
                .source(WorkflowState.JOIN)
                .target(WorkflowState.FINISHED)
                .event(WorkflowEvent.COMPLETE);
    }
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b31d1c329c534545add22899ca469f65~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766109906&amp;x-signature=snVxRWZJ7OZmyRGFuU2wZ477ROg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-6">å››ã€çŠ¶æ€ç›‘å¬å™¨ï¼šè®°å½•æ¯ä¸€æ¬¡å˜åŒ–</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6112be783a44bf0940f31e45fbb7121~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766109906&amp;x-signature=Wugbt6AwtTUIGnQ5qUVVTszTLls%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<pre><code class="hljs language-javan@Component" lang="javan@Component">@WithStateMachine
public class OrderStateListener {

    private static final Logger log = LoggerFactory.getLogger(OrderStateListener.class);

    @OnTransition(target = "PAID")
    public void onPay(Message&lt;OrderEvent&gt; message) {
        String orderId = getHeader(message, "orderId");
        log.info("è®¢å•{}æ”¯ä»˜æˆåŠŸï¼ŒçŠ¶æ€æµè½¬åˆ°å·²æ”¯ä»˜", orderId);

        // è§¦å‘åç»­ä¸šåŠ¡é€»è¾‘
        paymentSuccessHandler.handle(orderId);
    }

    @OnTransition(target = "DELIVERED")
    public void onDeliver(Message&lt;OrderEvent&gt; message) {
        String orderId = getHeader(message, "orderId");
        log.info("è®¢å•{}å·²å‘è´§ï¼ŒçŠ¶æ€æµè½¬åˆ°å·²å‘è´§", orderId);

        // å‘é€çŸ­ä¿¡é€šçŸ¥
        smsService.sendDeliverySms(orderId);
    }

    @OnTransitionEnd
    public void onTransitionEnd(StateContext&lt;OrderStatus, OrderEvent&gt; context) {
        log.info("çŠ¶æ€è½¬æ¢å®Œæˆï¼š{} -&gt; {}, äº‹ä»¶ï¼š{}",
            context.getSource().getId(),
            context.getTarget().getId(),
            context.getEvent()
        );

        // æŒä¹…åŒ–çŠ¶æ€è½¬æ¢è®°å½•
        transitionLogService.log(context);
    }

    private String getHeader(Message&lt;OrderEvent&gt; message, String headerName) {
        return message.getHeaders().get(headerName, String.class);
    }
}
</code></pre>
<h3 data-id="heading-7">äº”ã€Guardsï¼šæ™ºèƒ½çš„çŠ¶æ€è½¬æ¢å®ˆå«</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c657a0fd7d104a259382f8aa72cb1711~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766109906&amp;x-signature=fA%2Fk%2BrbkEv8AZ1%2FvlEF4kWrB0%2Bc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderGuard</span> {

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> Guard&lt;OrderStatus, OrderEvent&gt; <span class="hljs-title function_">payGuard</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> context -&gt; {
            <span class="hljs-type">String</span> <span class="hljs-variable">orderId</span> <span class="hljs-operator">=</span> context.getMessageHeader(<span class="hljs-string">"orderId"</span>);
            <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">amount</span> <span class="hljs-operator">=</span> orderService.getOrderAmount(orderId);

            <span class="hljs-comment">// æ£€æŸ¥è®¢å•é‡‘é¢</span>
            <span class="hljs-keyword">if</span> (amount.compareTo(BigDecimal.ZERO) &lt;= <span class="hljs-number">0</span>) {
                log.warn(<span class="hljs-string">"è®¢å•{}æ”¯ä»˜å¤±è´¥ï¼šé‡‘é¢ä¸º0"</span>, orderId);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }

            <span class="hljs-comment">// æ£€æŸ¥åº“å­˜</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">hasStock</span> <span class="hljs-operator">=</span> inventoryService.checkStock(orderId);
            <span class="hljs-keyword">if</span> (!hasStock) {
                log.warn(<span class="hljs-string">"è®¢å•{}æ”¯ä»˜å¤±è´¥ï¼šåº“å­˜ä¸è¶³"</span>, orderId);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }

            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        };
    }
}

<span class="hljs-comment">// åœ¨çŠ¶æ€æœºé…ç½®ä¸­ä½¿ç”¨guard</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configure</span><span class="hljs-params">(StateMachineTransitionConfigurer&lt;OrderStatus, OrderEvent&gt; transitions)</span>
        <span class="hljs-keyword">throws</span> Exception {
    transitions
        .withExternal()
            .source(OrderStatus.WAIT_PAYMENT)
            .target(OrderStatus.PAID)
            .event(OrderEvent.PAY)
            .guard(payGuard()); <span class="hljs-comment">// æ·»åŠ å®ˆå«æ¡ä»¶</span>
}
</code></pre>
<h3 data-id="heading-8">å…­ã€å®æˆ˜æŠ€å·§ä¸æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-9">6.1 çŠ¶æ€æœºå¯è§†åŒ–</h4>
<pre><code class="hljs language-javan@RestController" lang="javan@RestController">@RequestMapping("/state-machine")
public class StateMachineVisualController {

    @GetMapping("/diagram/{orderId}")
    public ResponseEntity&lt;String&gt; getStateDiagram(@PathVariable String orderId) {
        // è·å–å½“å‰çŠ¶æ€
        OrderStatus currentStatus = orderService.getOrderStatus(orderId);

        // ç”ŸæˆPlantUMLæ ¼å¼çš„çŠ¶æ€å›¾
        String diagram = generatePlantUMLDiagram(currentStatus);

        return ResponseEntity.ok()
            .contentType(MediaType.TEXT_PLAIN)
            .body(diagram);
    }

    private String generatePlantUMLDiagram(OrderStatus currentStatus) {
        StringBuilder sb = new StringBuilder();
        sb.append("@startuml\n");
        sb.append("[*] --&gt; WAIT_PAYMENT\n");
        sb.append("WAIT_PAYMENT --&gt; PAID : PAY\n");
        sb.append("PAID --&gt; WAIT_DELIVER : DELIVER\n");
        sb.append("WAIT_DELIVER --&gt; DELIVERED : RECEIVE\n");
        sb.append("DELIVERED --&gt; COMPLETED : RECEIVE\n");

        // é«˜äº®å½“å‰çŠ¶æ€
        sb.append("skinparam state {\n");
        sb.append("    BackgroundColor&lt;&lt;Current&gt;&gt; LightBlue\n");
        sb.append("}\n");
        sb.append("state ").append(currentStatus).append(" &lt;&lt;Current&gt;&gt;\n");

        sb.append("@enduml\n");
        return sb.toString();
    }
}
</code></pre>
<h4 data-id="heading-10">6.2 åˆ†å¸ƒå¼çŠ¶æ€ä¸€è‡´æ€§</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53bfe1240971458a81bcb91c3133a3b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766109906&amp;x-signature=lBR%2FgtG4p%2FxNt55DzhIMCzRiVfQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨åˆ†å¸ƒå¼é”ç¡®ä¿çŠ¶æ€è½¬æ¢çš„åŸå­æ€§</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistributedOrderService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redisson;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> StateMachineFactory&lt;OrderStatus, OrderEvent&gt; factory;

    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">transition</span><span class="hljs-params">(String orderId, OrderEvent event)</span> {
        <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> redisson.getLock(<span class="hljs-string">"order:state:"</span> + orderId);

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æœ€å¤šç­‰å¾…3ç§’ï¼ŒæŒé”10ç§’</span>
            <span class="hljs-keyword">if</span> (lock.tryLock(<span class="hljs-number">3</span>, <span class="hljs-number">10</span>, TimeUnit.SECONDS)) {
                <span class="hljs-comment">// æ¢å¤çŠ¶æ€æœº</span>
                StateMachine&lt;OrderStatus, OrderEvent&gt; sm = restoreStateMachine(orderId);

                <span class="hljs-comment">// å‘é€äº‹ä»¶å¹¶å¤„ç†ç»“æœ</span>
                <span class="hljs-type">boolean</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> sm.sendEvent(event);

                <span class="hljs-keyword">if</span> (result) {
                    <span class="hljs-comment">// æŒä¹…åŒ–æ–°çŠ¶æ€</span>
                    persistStateMachine(orderId, sm);

                    <span class="hljs-comment">// å‘å¸ƒé¢†åŸŸäº‹ä»¶</span>
                    publishDomainEvent(orderId, event, sm.getState().getId());
                }

                <span class="hljs-keyword">return</span> result;
            }
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"çŠ¶æ€è½¬æ¢è¢«ä¸­æ–­"</span>, e);
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-keyword">if</span> (lock.isHeldByCurrentThread()) {
                lock.unlock();
            }
        }

        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6b4410d62eb4d4cab21a200c1054519~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766109906&amp;x-signature=BlQOBQYr7VaeDhMRggmi0X2IqX4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-11">ä¸ƒã€æ€§èƒ½ä¼˜åŒ–å»ºè®®</h3>
<ol>
<li><strong>çŠ¶æ€æœºç¼“å­˜</strong>ï¼šé¢‘ç¹ä½¿ç”¨çš„çŠ¶æ€æœºå®ä¾‹å¯ä»¥ç¼“å­˜ï¼Œé¿å…é‡å¤åˆ›å»º</li>
<li><strong>å¼‚æ­¥äº‹ä»¶å¤„ç†</strong>ï¼šä½¿ç”¨Springçš„äº‹ä»¶é©±åŠ¨æ¨¡å‹å¼‚æ­¥å¤„ç†çŠ¶æ€å˜åŒ–</li>
<li><strong>æ‰¹é‡æŒä¹…åŒ–</strong>ï¼šå¤šä¸ªçŠ¶æ€å˜åŒ–å¯ä»¥åˆå¹¶ä¸ºä¸€æ¬¡æ•°æ®åº“æ“ä½œ</li>
<li><strong>è¯»å†™åˆ†ç¦»</strong>ï¼šçŠ¶æ€æŸ¥è¯¢èµ°ä»åº“ï¼ŒçŠ¶æ€æ›´æ–°èµ°ä¸»åº“</li>
</ol>
<h3 data-id="heading-12">å…«ã€æ€»ç»“</h3>
<p>SpringçŠ¶æ€æœºçš„ä¼˜åŠ¿åœ¨äºï¼š</p>
<ul>
<li><strong>ä»£ç æ¸…æ™°</strong>ï¼šå°†å¤æ‚çš„çŠ¶æ€æµè½¬ä»ä¸šåŠ¡ä»£ç ä¸­åˆ†ç¦»</li>
<li><strong>æ˜“äºç»´æŠ¤</strong>ï¼šçŠ¶æ€è½¬æ¢è§„åˆ™é›†ä¸­ç®¡ç†</li>
<li><strong>å¯æµ‹è¯•æ€§å¼º</strong>ï¼šå¯ä»¥å•ç‹¬æµ‹è¯•çŠ¶æ€æœºé€»è¾‘</li>
<li><strong>ç”Ÿäº§å°±ç»ª</strong>ï¼šæ”¯æŒæŒä¹…åŒ–ã€ç›‘å¬ã€åˆ†å¸ƒå¼ç­‰é«˜çº§ç‰¹æ€§</li>
</ul>
<p>å½“ä½ çš„ä¸šåŠ¡æ¶‰åŠå¤æ‚çš„çŠ¶æ€æµè½¬æ—¶ï¼ŒSpringçŠ¶æ€æœºç»å¯¹æ˜¯ä½ çš„å¾—åŠ›åŠ©æ‰‹ã€‚å®ƒè®©çŠ¶æ€ç®¡ç†å˜å¾—ä¼˜é›…ï¼Œè®©ä»£ç æ›´å®¹æ˜“ç†è§£å’Œç»´æŠ¤ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Šç©è½¬Vue3å“åº”å¼ï¼šæ‰‹æŠŠæ‰‹å®ç°TodoListï¼ŒæŒæ¡æ ¸å¿ƒæŒ‡ä»¤ã€‹]]></title>    <link>https://juejin.cn/post/7582399765449719835</link>    <guid>https://juejin.cn/post/7582399765449719835</guid>    <pubDate>2025-12-11T16:12:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582399765449719835" data-draft-id="7582433630472683547" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Šç©è½¬Vue3å“åº”å¼ï¼šæ‰‹æŠŠæ‰‹å®ç°TodoListï¼ŒæŒæ¡æ ¸å¿ƒæŒ‡ä»¤ã€‹"/> <meta itemprop="keywords" content="Vue.js,å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-11T16:12:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AY1024"/> <meta itemprop="url" content="https://juejin.cn/user/2232439936132313"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Šç©è½¬Vue3å“åº”å¼ï¼šæ‰‹æŠŠæ‰‹å®ç°TodoListï¼ŒæŒæ¡æ ¸å¿ƒæŒ‡ä»¤ã€‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2232439936132313/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AY1024
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T16:12:19.000Z" title="Thu Dec 11 2025 16:12:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç©è½¬Vue3å“åº”å¼ï¼šæ‰‹æŠŠæ‰‹å®ç°TodoListï¼ŒæŒæ¡æ ¸å¿ƒæŒ‡ä»¤</h2>
<h3 data-id="heading-1">å‰è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦å“åº”å¼ï¼Ÿ</h3>
<p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼šå½“æ•°æ®å˜åŒ–æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨æ›´æ–°DOMã€‚è¿™ç§æ‰‹åŠ¨æ“ä½œä¸ä»…ç¹çï¼Œè¿˜å®¹æ˜“å‡ºé”™ã€‚Vueçš„å“åº”å¼ç³»ç»Ÿæ­£æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œç”Ÿâ€”â€”æ•°æ®å˜ï¼Œè§†å›¾è‡ªåŠ¨å˜ï¼</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªTodoListç¤ºä¾‹ï¼Œæ·±å…¥æµ…å‡ºåœ°è®²è§£Vue3çš„æ ¸å¿ƒæŒ‡ä»¤å’Œå“åº”å¼APIã€‚</p>
<h3 data-id="heading-2">ä¸€ã€é¡¹ç›®æ¦‚è§ˆï¼šä¸€ä¸ªç®€æ´çš„TodoList</h3>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æœ€ç»ˆå®ç°çš„æ•ˆæœï¼š</p>
<ul>
<li>è¾“å…¥ä»»åŠ¡ï¼Œå›è½¦æ·»åŠ </li>
<li>å‹¾é€‰å®Œæˆä»»åŠ¡</li>
<li>æ˜¾ç¤ºå®Œæˆè¿›åº¦</li>
<li>æ”¯æŒå…¨é€‰/å…¨ä¸é€‰</li>
</ul>
<h3 data-id="heading-3">äºŒã€æ ¸å¿ƒæŒ‡ä»¤è¯¦è§£</h3>
<h4 data-id="heading-4">1. v-modelï¼šåŒå‘æ•°æ®ç»‘å®š</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;input type="text" v-model="title" @keydown.enter="addTodo"&gt;
</code></pre>
<p><strong>ä»€ä¹ˆæ˜¯åŒå‘ç»‘å®šï¼Ÿ</strong></p>
<ul>
<li><strong>å•å‘ç»‘å®š</strong>ï¼šæ•°æ®å˜åŒ– â†’ è§†å›¾æ›´æ–°</li>
<li><strong>åŒå‘ç»‘å®š</strong>ï¼šæ•°æ®å˜åŒ– â‡Œ è§†å›¾æ›´æ–°</li>
</ul>
<p><strong>v-modelçš„æœ¬è´¨ï¼š</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- v-model å®é™…ä¸Šæ˜¯è¯­æ³•ç³– --&gt;
&lt;input 
  :value="title" 
  @input="title = $event.target.value"
&gt;

&lt;!-- ç­‰ä»·äº --&gt;
&lt;input v-model="title"&gt;
</code></pre>
<p><strong>å®æˆ˜æŠ€å·§ï¼š</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- ä¿®é¥°ç¬¦è®©å¼€å‘æ›´é«˜æ•ˆ --&gt;
&lt;input v-model.trim="title"&gt;    &lt;!-- è‡ªåŠ¨å»é™¤é¦–å°¾ç©ºæ ¼ --&gt;
&lt;input v-model.number="age"&gt;    &lt;!-- è‡ªåŠ¨è½¬ä¸ºæ•°å­— --&gt;
&lt;input v-model.lazy="content"&gt;  &lt;!-- å¤±ç„¦æ—¶æ›´æ–° --&gt;
</code></pre>
<h4 data-id="heading-5">2. v-if å’Œ v-elseï¼šæ¡ä»¶æ¸²æŸ“</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;ul v-if="todos.length"&gt;
  &lt;!-- æœ‰ä»»åŠ¡æ—¶æ˜¾ç¤ºåˆ—è¡¨ --&gt;
&lt;/ul&gt;
&lt;div v-else&gt;
  æ²¡æœ‰ä»»åŠ¡  &lt;!-- æ— ä»»åŠ¡æ—¶æ˜¾ç¤ºæç¤º --&gt;
&lt;/div&gt;
</code></pre>
<p><strong>v-if vs v-showï¼š</strong></p>
<ul>
<li><code>v-if</code>ï¼šæ¡ä»¶ä¸ºå‡æ—¶ï¼Œå…ƒç´ ä»DOMä¸­ç§»é™¤</li>
<li><code>v-show</code>ï¼šåªæ˜¯åˆ‡æ¢<code>display: none</code></li>
<li><strong>å¦‚ä½•é€‰æ‹©ï¼Ÿ</strong>ï¼šé¢‘ç¹åˆ‡æ¢ç”¨<code>v-show</code>ï¼Œä¸å¸¸å˜åŒ–ç”¨<code>v-if</code></li>
</ul>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- å¤šä¸ªæ¡ä»¶åˆ†æ”¯ --&gt;
&lt;div v-if="status === 'loading'"&gt;åŠ è½½ä¸­...&lt;/div&gt;
&lt;div v-else-if="status === 'error'"&gt;å‡ºé”™äº†&lt;/div&gt;
&lt;div v-else&gt;åŠ è½½å®Œæˆ&lt;/div&gt;
</code></pre>
<h4 data-id="heading-6">3. v-forï¼šåˆ—è¡¨æ¸²æŸ“</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;li v-for="todo in todos" :key="todo.id"&gt;
  &lt;!-- å¾ªç¯æ¸²æŸ“ --&gt;
&lt;/li&gt;
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦<code>:key</code>ï¼Ÿ</strong>
Vueé€šè¿‡keyè¯†åˆ«èŠ‚ç‚¹èº«ä»½ï¼Œå®ç°é«˜æ•ˆçš„DOMæ›´æ–°ã€‚æ²¡æœ‰keyæ—¶ï¼ŒVueä¼šä½¿ç”¨"å°±åœ°å¤ç”¨"ç­–ç•¥ï¼Œå¯èƒ½å¯¼è‡´çŠ¶æ€é”™ä¹±ã€‚</p>
<p><strong>æ­£ç¡®ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- ä½¿ç”¨å”¯ä¸€æ ‡è¯†ä½œä¸ºkey --&gt;
&lt;li v-for="todo in todos" :key="todo.id"&gt;

&lt;!-- è·å–ç´¢å¼• --&gt;
&lt;li v-for="(todo, index) in todos" :key="todo.id"&gt;
  ç¬¬{{ index + 1 }}é¡¹ï¼š{{ todo.title }}
&lt;/li&gt;
</code></pre>
<h4 data-id="heading-7">4. v-bindï¼šåŠ¨æ€ç»‘å®šå±æ€§</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- å®Œæ•´å†™æ³• --&gt;
&lt;span v-bind:class="{'done': todo.done}"&gt;{{ todo.title }}&lt;/span&gt;

&lt;!-- ç®€å†™ï¼ˆå¸¸ç”¨ï¼‰ --&gt;
&lt;span :class="{'done': todo.done}"&gt;{{ todo.title }}&lt;/span&gt;
</code></pre>
<p><strong>åŠ¨æ€Classçš„å¤šç§å†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- å¯¹è±¡è¯­æ³• --&gt;
&lt;div :class="{ active: isActive, 'text-danger': hasError }"&gt;&lt;/div&gt;

&lt;!-- æ•°ç»„è¯­æ³• --&gt;
&lt;div :class="[activeClass, errorClass]"&gt;&lt;/div&gt;

&lt;!-- ç»“åˆä¸‰ç›®è¿ç®—ç¬¦ --&gt;
&lt;div :class="isActive ? 'active' : ''"&gt;&lt;/div&gt;
</code></pre>
<p><strong>åŠ¨æ€Styleç»‘å®šï¼š</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;div :style="{ color: activeColor, fontSize: fontSize + 'px' }"&gt;&lt;/div&gt;
</code></pre>
<h3 data-id="heading-8">ä¸‰ã€å“åº”å¼APIï¼šref å’Œ computed</h3>
<h4 data-id="heading-9">1. refï¼šåˆ›å»ºå“åº”å¼æ•°æ®</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;

<span class="hljs-keyword">const</span> title = <span class="hljs-title function_">ref</span>(<span class="hljs-string">""</span>)  <span class="hljs-comment">// å­—ç¬¦ä¸²</span>
<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)   <span class="hljs-comment">// æ•°å­—</span>
<span class="hljs-keyword">const</span> todos = <span class="hljs-title function_">ref</span>([])  <span class="hljs-comment">// æ•°ç»„</span>
</code></pre>
<p><strong>refçš„ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>è¿”å›ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œé€šè¿‡<code>.value</code>è®¿é—®å®é™…å€¼</li>
<li>åœ¨æ¨¡æ¿ä¸­è‡ªåŠ¨è§£åŒ…ï¼Œæ— éœ€<code>.value</code></li>
<li>é€‚åˆåŸºç¡€ç±»å‹å’Œå¯¹è±¡å¼•ç”¨</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨scriptä¸­è®¿é—®</span>
title.<span class="hljs-property">value</span> = <span class="hljs-string">"æ–°ä»»åŠ¡"</span>  <span class="hljs-comment">// éœ€è¦.value</span>

<span class="hljs-comment">// åœ¨templateä¸­è‡ªåŠ¨è§£åŒ…</span>
&lt;!-- ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€.<span class="hljs-property">value</span> --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"title"</span>&gt;</span>
</span></code></pre>
<h4 data-id="heading-10">2. computedï¼šè®¡ç®—å±æ€§</h4>
<p><strong>è®¡ç®—å±æ€§çš„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li><strong>ç¼“å­˜æœºåˆ¶</strong>ï¼šä¾èµ–ä¸å˜æ—¶ï¼Œç›´æ¥è¿”å›ç¼“å­˜ç»“æœ</li>
<li><strong>å“åº”å¼</strong>ï¼šä¾èµ–å˜åŒ–æ—¶è‡ªåŠ¨é‡æ–°è®¡ç®—</li>
<li><strong>ç®€æ´</strong>ï¼šæ¨¡æ¿ä¸­æ— éœ€å¤æ‚é€»è¾‘</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// åŸºæœ¬ç”¨æ³•ï¼ˆåªè¯»ï¼‰</span>
<span class="hljs-keyword">const</span> active = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> todos.<span class="hljs-property">value</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> !todo.<span class="hljs-property">done</span>).<span class="hljs-property">length</span>
})

<span class="hljs-comment">// é«˜çº§ç”¨æ³•ï¼ˆgetter/setterï¼‰</span>
<span class="hljs-keyword">const</span> allDone = <span class="hljs-title function_">computed</span>({
  <span class="hljs-title function_">get</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ‰€æœ‰todoéƒ½å®Œæˆæ—¶è¿”å›true</span>
    <span class="hljs-keyword">return</span> todos.<span class="hljs-property">value</span>.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">done</span>)
  },
  <span class="hljs-title function_">set</span>(<span class="hljs-params">val</span>) {
    <span class="hljs-comment">// è®¾ç½®æ‰€æœ‰todoçš„å®ŒæˆçŠ¶æ€</span>
    todos.<span class="hljs-property">value</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">done</span> = val)
  }
})
</code></pre>
<h3 data-id="heading-11">å››ã€äº‹ä»¶å¤„ç†</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- åŸºç¡€äº‹ä»¶ --&gt;
&lt;button @click="addTodo"&gt;æ·»åŠ &lt;/button&gt;

&lt;!-- é”®ç›˜äº‹ä»¶ --&gt;
&lt;input @keydown.enter="addTodo"&gt;
&lt;input @keyup.esc="clearInput"&gt;

&lt;!-- äº‹ä»¶ä¿®é¥°ç¬¦ --&gt;
&lt;form @submit.prevent="onSubmit"&gt;  &lt;!-- é˜»æ­¢é»˜è®¤è¡Œä¸º --&gt;
&lt;div @click.stop="handleClick"&gt;    &lt;!-- é˜»æ­¢äº‹ä»¶å†’æ³¡ --&gt;
</code></pre>
<p><strong>å¸¸ç”¨ä¿®é¥°ç¬¦ï¼š</strong></p>
<ul>
<li><code>.stop</code> - é˜»æ­¢äº‹ä»¶å†’æ³¡</li>
<li><code>.prevent</code> - é˜»æ­¢é»˜è®¤è¡Œä¸º</li>
<li><code>.self</code> - åªåœ¨å…ƒç´ è‡ªèº«è§¦å‘</li>
<li><code>.once</code> - åªè§¦å‘ä¸€æ¬¡</li>
<li><code>.passive</code> - æå‡æ»šåŠ¨æ€§èƒ½</li>
</ul>
<h3 data-id="heading-12">äº”ã€å®Œæ•´å®ç°ä¸æœ€ä½³å®è·µ</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { ref, computed } from "vue"

// 1. å®šä¹‰å“åº”å¼æ•°æ®
const title = ref("")
const todos = ref([
  { id: 1, title: "å­¦ä¹ Vue3", done: true },
  { id: 2, title: "å†™é¡¹ç›®", done: false }
])

// 2. å®šä¹‰æ–¹æ³•
const addTodo = () =&gt; {
  if (!title.value.trim()) return
  
  todos.value.push({
    id: Date.now(),  // æ›´å¥½çš„IDç”Ÿæˆæ–¹å¼
    title: title.value.trim(),
    done: false
  })
  
  title.value = ''  // æ¸…ç©ºè¾“å…¥æ¡†
}

// 3. å®šä¹‰è®¡ç®—å±æ€§
const activeCount = computed(() =&gt; 
  todos.value.filter(todo =&gt; !todo.done).length
)

const allDone = computed({
  get: () =&gt; todos.value.every(todo =&gt; todo.done),
  set: (val) =&gt; todos.value.forEach(todo =&gt; todo.done = val)
})
&lt;/script&gt;

&lt;template&gt;
  &lt;div class="todo-container"&gt;
    &lt;h2&gt;Todo List&lt;/h2&gt;
    
    &lt;!-- è¾“å…¥åŒºåŸŸ --&gt;
    &lt;div class="input-group"&gt;
      &lt;input 
        type="text" 
        v-model="title"
        @keydown.enter="addTodo"
        placeholder="è¾“å…¥ä»»åŠ¡ï¼Œå›è½¦æ·»åŠ "
        class="todo-input"
      &gt;
    &lt;/div&gt;
    
    &lt;!-- ä»»åŠ¡åˆ—è¡¨ --&gt;
    &lt;div v-if="todos.length" class="todo-list"&gt;
      &lt;ul&gt;
        &lt;li v-for="todo in todos" :key="todo.id" class="todo-item"&gt;
          &lt;input 
            type="checkbox" 
            v-model="todo.done"
            class="todo-checkbox"
          &gt;
          &lt;span 
            :class="['todo-text', { 'todo-done': todo.done }]"
            @dblclick="todo.done = !todo.done"
          &gt;
            {{ todo.title }}
          &lt;/span&gt;
        &lt;/li&gt;
      &lt;/ul&gt;
    &lt;/div&gt;
    
    &lt;!-- ç©ºçŠ¶æ€ --&gt;
    &lt;div v-else class="empty-state"&gt;
      ğŸ‰ æ­å–œï¼æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆäº†ï¼
    &lt;/div&gt;
    
    &lt;!-- ç»Ÿè®¡åŒºåŸŸ --&gt;
    &lt;div class="stats"&gt;
      &lt;label class="select-all"&gt;
        &lt;input type="checkbox" v-model="allDone"&gt;
        å…¨é€‰
      &lt;/label&gt;
      
      &lt;div class="progress"&gt;
        {{ activeCount }} / {{ todos.length }}
        &lt;span v-if="todos.length"&gt;
          ({{ Math.round((todos.length - activeCount) / todos.length * 100) }}%)
        &lt;/span&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;style scoped&gt;
.todo-container {
  max-width: 500px;
  margin: 0 auto;
  padding: 20px;
}

.todo-input {
  width: 100%;
  padding: 10px;
  border: 2px solid #e0e0e0;
  border-radius: 8px;
  font-size: 16px;
}

.todo-list {
  margin: 20px 0;
}

.todo-item {
  display: flex;
  align-items: center;
  padding: 12px;
  background: white;
  border-radius: 8px;
  margin-bottom: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.todo-checkbox {
  margin-right: 12px;
  transform: scale(1.2);
}

.todo-text {
  flex: 1;
  cursor: pointer;
  transition: all 0.3s;
}

.todo-done {
  text-decoration: line-through;
  color: #888;
  opacity: 0.7;
}

.empty-state {
  text-align: center;
  padding: 40px;
  color: #666;
  font-size: 18px;
}

.stats {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: 20px;
  border-top: 1px solid #eee;
}

.select-all {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
}

.progress {
  font-weight: bold;
  color: #42b883;
}
&lt;/style&gt;
</code></pre>
<hr/>
<p>è¯·çœ‹å¤§å±å¹•ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fcbedc676faf4046bf888b06ea38f163~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQVkxMDI0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766074338&amp;x-signature=VHTGLW8z4Q8Q3tsFqXjN2AkDbg4%3D" alt="å±å¹•å½•åˆ¶ 2025-12-11 235953.gif" loading="lazy"/></p>
<h3 data-id="heading-13">å…­ã€å­¦ä¹ å¿ƒå¾—ä¸é¿å‘æŒ‡å—</h3>
<h4 data-id="heading-14">å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆï¼š</h4>
<ol>
<li>
<p><strong>ä¸ºä»€ä¹ˆä¿®æ”¹äº†æ•°æ®ï¼Œè§†å›¾ä¸æ›´æ–°ï¼Ÿ</strong></p>
<ul>
<li>æ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº†<code>.value</code>ï¼ˆåœ¨scriptä¸­ï¼‰</li>
<li>æ£€æŸ¥æ•°ç»„æ“ä½œæ˜¯å¦ä½¿ç”¨å“åº”å¼æ–¹æ³•ï¼ˆ<code>push</code>ã€<code>pop</code>ç­‰ï¼‰</li>
</ul>
</li>
<li>
<p><strong>v-for å’Œ v-if ä¸€èµ·ä½¿ç”¨ï¼Ÿ</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- é”™è¯¯ï¼šv-forä¼˜å…ˆçº§é«˜äºv-if --&gt;
&lt;li v-for="todo in todos" v-if="!todo.done"&gt;

&lt;!-- æ­£ç¡®ï¼šä½¿ç”¨è®¡ç®—å±æ€§è¿‡æ»¤ --&gt;
&lt;li v-for="todo in activeTodos" :key="todo.id"&gt;

&lt;!-- æˆ–ä½¿ç”¨templateåŒ…è£¹ --&gt;
&lt;template v-for="todo in todos"&gt;
  &lt;li v-if="!todo.done" :key="todo.id"&gt;
&lt;/template&gt;
</code></pre>
</li>
<li>
<p><strong>æ€§èƒ½ä¼˜åŒ–å»ºè®®ï¼š</strong></p>
<ul>
<li>å¤§æ•°æ®åˆ—è¡¨ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨</li>
<li>å¤æ‚è®¡ç®—ä½¿ç”¨computedç¼“å­˜</li>
<li>äº‹ä»¶å¤„ç†ä½¿ç”¨é˜²æŠ–/èŠ‚æµ</li>
</ul>
</li>
</ol>
<h3 data-id="heading-15">æ€»ç»“</h3>
<p>Vue3çš„å“åº”å¼ç³»ç»Ÿè®©æˆ‘ä»¬å¯ä»¥æ›´ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸æ˜¯DOMæ“ä½œã€‚é€šè¿‡æœ¬æ–‡çš„TodoListç¤ºä¾‹ï¼Œæˆ‘ä»¬æŒæ¡äº†ï¼š</p>
<ol>
<li><strong>æ•°æ®é©±åŠ¨</strong>ï¼šç”¨æ•°æ®æè¿°UIçŠ¶æ€</li>
<li><strong>æŒ‡ä»¤ç³»ç»Ÿ</strong>ï¼šv-modelã€v-ifã€v-forã€v-bindçš„çµæ´»è¿ç”¨</li>
<li><strong>å“åº”å¼API</strong>ï¼šrefå’Œcomputedçš„å¼ºå¤§åŠŸèƒ½</li>
<li><strong>æœ€ä½³å®è·µ</strong>ï¼šå†™å‡ºå¯ç»´æŠ¤çš„Vueä»£ç </li>
</ol>
<p>è®°ä½ï¼ŒVueçš„æ ¸å¿ƒæ€æƒ³æ˜¯"æ•°æ®é©±åŠ¨è§†å›¾"ã€‚å½“ä½ ç†è§£äº†æ•°æ®å¦‚ä½•å½±å“è§†å›¾ï¼Œå°±èƒ½å†™å‡ºæ›´ä¼˜é›…ã€æ›´é«˜æ•ˆçš„Vueä»£ç ã€‚</p>
<p>ç°åœ¨ï¼Œå°è¯•æ‰©å±•è¿™ä¸ªTodoListå§ï¼å¯ä»¥æ·»åŠ ï¼š</p>
<ul>
<li>ä»»åŠ¡åˆ†ç±»</li>
<li>æœ¬åœ°å­˜å‚¨</li>
<li>æ‹–æ‹½æ’åº</li>
<li>è¿‡æ»¤åŠŸèƒ½</li>
</ul>
<p>ç¥ä½ ç¼–ç æ„‰å¿«ï¼ ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¨¡æ¿å­—ç¬¦ä¸² + mapï¼šç”¨ç°ä»£ JavaScript é«˜æ•ˆæ„å»ºåŠ¨æ€ HTML]]></title>    <link>https://juejin.cn/post/7567193295367307290</link>    <guid>https://juejin.cn/post/7567193295367307290</guid>    <pubDate>2025-10-31T17:39:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7567193295367307290" data-draft-id="7567193295367208986" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¨¡æ¿å­—ç¬¦ä¸² + mapï¼šç”¨ç°ä»£ JavaScript é«˜æ•ˆæ„å»ºåŠ¨æ€ HTML"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-10-31T17:39:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é—²äº‘ing"/> <meta itemprop="url" content="https://juejin.cn/user/2974655942502250"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¨¡æ¿å­—ç¬¦ä¸² + mapï¼šç”¨ç°ä»£ JavaScript é«˜æ•ˆæ„å»ºåŠ¨æ€ HTML
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2974655942502250/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é—²äº‘ing
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-10-31T17:39:07.000Z" title="Fri Oct 31 2025 17:39:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-10-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¨¡æ¿å­—ç¬¦ä¸² + mapï¼šç”¨ç°ä»£ JavaScript é«˜æ•ˆæ„å»ºåŠ¨æ€ HTML</h2>
<p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œå°†æ•°æ®æ¸²æŸ“ä¸º HTML æ˜¯å†å¸¸è§ä¸è¿‡çš„éœ€æ±‚ã€‚è¿‡å»ï¼Œæˆ‘ä»¬ä¾èµ–ç¹ççš„å­—ç¬¦ä¸²æ‹¼æ¥ï¼ˆ<code>+</code>ï¼‰æˆ–å¤æ‚çš„ DOM æ“ä½œï¼›å¦‚ä»Šï¼Œå€ŸåŠ© <strong>ES6 æ¨¡æ¿å­—ç¬¦ä¸²</strong> ä¸æ•°ç»„çš„ <strong><code>map</code> æ–¹æ³•</strong>ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ›´ç®€æ´ã€å£°æ˜å¼çš„æ–¹å¼å®Œæˆè¿™ä¸€ä»»åŠ¡ã€‚
æœ¬æ–‡ç« å°†é€šè¿‡å®é™…ä»£ç ï¼Œå¸¦ä½ ç†è§£è¿™ä¸€ç»„åˆçš„æ ¸å¿ƒä»·å€¼ã€ä½¿ç”¨æŠ€å·§ä¸æ³¨æ„äº‹é¡¹ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€ä»æ‹¼æ¥åˆ°è¡¨è¾¾ï¼šæ¨¡æ¿å­—ç¬¦ä¸²çš„è¿›åŒ–</h3>
<p>åœ¨ ES5 æ—¶ä»£ï¼Œæ‹¼æ¥å­—ç¬¦ä¸²æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> w = <span class="hljs-string">'world'</span>;
<span class="hljs-keyword">let</span> str = <span class="hljs-string">"hello "</span> + w; <span class="hljs-comment">// "hello world"</span>
</code></pre>
<p>è¿™ç§æ–¹å¼åœ¨å¤„ç†å¤šè¡Œæˆ–å¤æ‚ç»“æ„æ—¶ï¼Œææ˜“å‡ºé”™ä¸”éš¾ä»¥ç»´æŠ¤ã€‚</p>
<p>ES6 å¼•å…¥äº†<strong>æ¨¡æ¿å­—ç¬¦ä¸²</strong>ï¼Œä½¿ç”¨åå¼•å·ï¼ˆ<code>`</code>ï¼‰åŒ…è£¹ï¼Œå¹¶é€šè¿‡ <code>${}</code> æ’å…¥è¡¨è¾¾å¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> str = <span class="hljs-string">`hello <span class="hljs-subst">${w}</span>`</span>; <span class="hljs-comment">// æ›´æ¸…æ™°ã€æ›´å®‰å…¨</span>
</code></pre>
<h4 data-id="heading-2">æ¨¡æ¿å­—ç¬¦ä¸²çš„ä¸‰å¤§ä¼˜åŠ¿ï¼š</h4>
<ol>
<li><strong>æ”¯æŒå¤šè¡Œæ–‡æœ¬</strong>ï¼šæ— éœ€ <code>\n</code> æˆ–å­—ç¬¦ä¸²è¿æ¥ï¼›</li>
<li><strong>å†…åµŒè¡¨è¾¾å¼</strong>ï¼š<code>${}</code> ä¸­å¯å†™å˜é‡ã€å‡½æ•°è°ƒç”¨ã€ä¸‰å…ƒè¿ç®—ç­‰ï¼›</li>
<li><strong>æå‡å¯è¯»æ€§</strong>ï¼šå°¤å…¶é€‚åˆç”Ÿæˆ HTML ç‰‡æ®µã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-3">äºŒã€<code>map</code>ï¼šæ•°æ®åˆ°è§†å›¾çš„æ¡¥æ¢</h3>
<p><code>Array.prototype.map()</code> æ˜¯ JavaScript ä¸­æœ€å¸¸ç”¨çš„é«˜é˜¶å‡½æ•°ä¹‹ä¸€ã€‚å®ƒçš„ä½œç”¨æ˜¯ï¼š</p>
<blockquote>
<p>éå†æ•°ç»„ï¼Œå¯¹æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€ä¸ªè½¬æ¢å‡½æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªç”±ç»“æœç»„æˆçš„æ–°æ•°ç»„ã€‚</p>
</blockquote>
<p>ä¾‹å¦‚ï¼Œå°†å¾…åŠäº‹é¡¹æ•°æ®è½¬æ¢ä¸º HTML å­—ç¬¦ä¸²ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> todos = [
  { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'å­¦ä¹  ES6'</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'é€šè¯»ã€Šä½ ä¸çŸ¥é“çš„ JavaScriptã€‹'</span> }
];

<span class="hljs-keyword">const</span> liList = todos.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> <span class="hljs-string">`&lt;li&gt;<span class="hljs-subst">${todo.text}</span>&lt;/li&gt;`</span>);
<span class="hljs-comment">// ç»“æœï¼š['&lt;li&gt;å­¦ä¹  ES6&lt;/li&gt;', '&lt;li&gt;é€šè¯»...&lt;/li&gt;']</span>
</code></pre>
<p>é…åˆ ES6 ç®­å¤´å‡½æ•°ï¼Œä»£ç æ›´ç®€æ´ï¼š</p>
<ul>
<li>å•å‚æ•°å¯çœç•¥æ‹¬å·ï¼›</li>
<li>å•è¡¨è¾¾å¼å¯çœç•¥ <code>{}</code> å’Œ <code>return</code>ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-4">ä¸‰ã€å®æˆ˜ï¼šåŠ¨æ€æ¸²æŸ“å¾…åŠåˆ—è¡¨</h3>
<p>å°†æ¨¡æ¿å­—ç¬¦ä¸²ä¸ <code>map</code> ç»“åˆï¼Œå¯ä»¥è½»æ¾ç”Ÿæˆå®Œæ•´çš„ HTML ç»“æ„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;div id=<span class="hljs-string">"todos"</span>&gt;&lt;/div&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> todos = [
  { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'å­¦ä¹  ES6'</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'é€šè¯»ä½ ä¸çŸ¥é“çš„JavaScript'</span> }
];

<span class="hljs-keyword">const</span> todosEl = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'todos'</span>);

todosEl.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`
  &lt;ul&gt;
    <span class="hljs-subst">${todos.map(todo =&gt; <span class="hljs-string">`&lt;li&gt;<span class="hljs-subst">${todo.text}</span>&lt;/li&gt;`</span>).join(<span class="hljs-string">''</span>)}</span>
  &lt;/ul&gt;
`</span>;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-5">å…³é”®ç‚¹è§£æï¼š</h4>
<ul>
<li><code>map()</code> è¿”å›ä¸€ä¸ªåŒ…å« <code>&lt;li&gt;</code> å­—ç¬¦ä¸²çš„æ•°ç»„ï¼›</li>
<li><code>.join('')</code> å°†æ•°ç»„åˆå¹¶ä¸ºè¿ç»­å­—ç¬¦ä¸²ï¼ˆé¿å…é»˜è®¤é€—å·åˆ†éš”ï¼‰ï¼›</li>
<li>æ¨¡æ¿å­—ç¬¦ä¸²ä¸­çš„ <code>${}</code> å…è®¸åµŒå…¥ä»»æ„ JavaScript è¡¨è¾¾å¼ï¼Œå®ç°åŠ¨æ€å†…å®¹æ³¨å…¥ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-6">å››ã€ä½ å¯èƒ½å¿½ç•¥çš„ç»†èŠ‚</h3>
<h4 data-id="heading-7">1. ä¸ºä»€ä¹ˆå¿…é¡»ç”¨ <code>.join('')</code>ï¼Ÿ</h4>
<p>å¦‚æœä¸è°ƒç”¨ <code>.join('')</code>ï¼Œæ•°ç»„ä¼šè¢«éšå¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå…ƒç´ é—´è‡ªåŠ¨æ’å…¥é€—å·ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-string">`&lt;ul&gt;<span class="hljs-subst">${[<span class="hljs-string">'&lt;li&gt;A&lt;/li&gt;'</span>, <span class="hljs-string">'&lt;li&gt;B&lt;/li&gt;'</span>]}</span>&lt;/ul&gt;`</span>
<span class="hljs-comment">// ç»“æœï¼š&lt;ul&gt;&lt;li&gt;A&lt;/li&gt;,&lt;li&gt;B&lt;/li&gt;&lt;/ul&gt; âŒ</span>
</code></pre>
<p><code>.join('')</code> æ˜¾å¼æ§åˆ¶æ‹¼æ¥æ–¹å¼ï¼Œç¡®ä¿ HTML ç»“æ„æ­£ç¡®ã€‚</p>
<h4 data-id="heading-8">2. å­—ç¬¦ä¸²ç±»å‹ vs å­—ç¬¦ä¸²å¯¹è±¡</h4>
<p>JavaScript ä¸­æœ‰ä¸¤ç§â€œå­—ç¬¦ä¸²â€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> str1 = <span class="hljs-string">"hello"</span>;           <span class="hljs-comment">// åŸå§‹ç±»å‹ï¼ˆstringï¼‰</span>
<span class="hljs-keyword">let</span> str2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">"hello"</span>); <span class="hljs-comment">// åŒ…è£…å¯¹è±¡ï¼ˆobjectï¼‰</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> str1); <span class="hljs-comment">// "string"</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> str2); <span class="hljs-comment">// "object"</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(str1.<span class="hljs-property">length</span>); <span class="hljs-comment">// 5</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(str2.<span class="hljs-property">length</span>); <span class="hljs-comment">// 5ï¼ˆè‡ªåŠ¨è£…ç®±ï¼‰</span>
</code></pre>
<p>è™½ç„¶è¡Œä¸ºç›¸ä¼¼ï¼Œä½†<strong>åº”å§‹ç»ˆä½¿ç”¨å­—é¢é‡</strong>ï¼ˆ<code>" "</code> æˆ– <code>` `</code>ï¼‰ï¼Œé¿å… <code>new String()</code>ï¼Œä»¥ä¿è¯ç±»å‹ä¸€è‡´æ€§å’Œæ€§èƒ½ã€‚</p>
<hr/>
<h3 data-id="heading-9">æ€»ç»“</h3>
<p>ä»ç¹ççš„å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œåˆ°æ¨¡æ¿å­—ç¬¦ä¸²ä¸ <code>map</code> æ–¹æ³•çš„ååŒä½œæˆ˜ï¼ŒJavaScript åŠ¨æ€ HTML æ„å»ºçš„æ–¹å¼å®ç°äº†ä»â€œå®ç°åŠŸèƒ½â€åˆ°â€œä¼˜é›…è¡¨è¾¾â€çš„è·¨è¶Šã€‚è¿™ä¸€ç»„åˆä»¥å£°æ˜å¼çš„é€»è¾‘ï¼Œå°†æ•°æ®ä¸è§†å›¾ç²¾å‡†ç»‘å®šï¼Œä¸ä»…è®©ä»£ç æ›´ç®€æ´ã€å¯è¯»æ€§æ›´å¼ºã€ç»´æŠ¤æˆæœ¬æ›´ä½ï¼Œæ›´å¥‘åˆç°ä»£å‰ç«¯å¼€å‘çš„æ•ˆç‡éœ€æ±‚ã€‚</p>
<p>ä¸è¿‡é«˜æ•ˆçš„åŒæ—¶ä»éœ€ç‰¢è®°ä¸¤ä¸ªæ ¸å¿ƒè¦ç‚¹ï¼š</p>
<ul>
<li>ä¸€æ˜¯å¿…é¡»é€šè¿‡ <code>.join('')</code> å¤„ç† <code>map</code> è¿”å›çš„æ•°ç»„ï¼Œé¿å…å¤šä½™é€—å·ç ´å HTML ç»“æ„ã€‚</li>
<li>äºŒæ˜¯è‹¥æ¶‰åŠç”¨æˆ·è¾“å…¥ç­‰åŠ¨æ€å†…å®¹ï¼ŒåŠ¡å¿…åšå¥½ XSS é˜²æŠ¤ï¼Œé˜²æ­¢å®‰å…¨é£é™©ã€‚</li>
</ul>
<p>æŒæ¡è¿™ä¸€æŠ€å·§ï¼Œå°†ä¸ºä½ çš„æ—¥å¸¸å‰ç«¯å¼€å‘æ³¨å…¥æ›´å¼ºåŠ²çš„æ•ˆç‡åŠ¨åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ HTML + Bootstrap + DALLÂ·E 3 æ­å»ºä¸€ä¸ª AI Logo ç”Ÿæˆå™¨]]></title>    <link>https://juejin.cn/post/7568055961334726707</link>    <guid>https://juejin.cn/post/7568055961334726707</guid>    <pubDate>2025-11-03T08:34:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7568055961334726707" data-draft-id="7568307440262086694" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ HTML + Bootstrap + DALLÂ·E 3 æ­å»ºä¸€ä¸ª AI Logo ç”Ÿæˆå™¨"/> <meta itemprop="keywords" content="å‰ç«¯,DALL-E3"/> <meta itemprop="datePublished" content="2025-11-03T08:34:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é—²äº‘ing"/> <meta itemprop="url" content="https://juejin.cn/user/2974655942502250"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ HTML + Bootstrap + DALLÂ·E 3 æ­å»ºä¸€ä¸ª AI Logo ç”Ÿæˆå™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2974655942502250/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é—²äº‘ing
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-03T08:34:34.000Z" title="Mon Nov 03 2025 08:34:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨ AI æ—¶ä»£ï¼Œè®¾è®¡å¸ˆçš„å·¥ä½œæµç¨‹æ­£åœ¨è¢«é‡å¡‘ã€‚Logo è®¾è®¡ä¸å†åªæ˜¯ä¸“ä¸šè®¾è®¡å¸ˆçš„ä¸“å±ï¼Œå€ŸåŠ© AI å›¾åƒç”Ÿæˆæ¨¡å‹ï¼ˆå¦‚ OpenAI çš„ DALLÂ·E 3ï¼‰ï¼Œæ™®é€šäººä¹Ÿèƒ½åœ¨å‡ ç§’é’Ÿå†…ç”Ÿæˆé«˜è´¨é‡çš„åº”ç”¨å›¾æ ‡ã€‚</p>
<p>æ­¤æ–‡ç« å°†å¸¦ä½ ä»é›¶å¼€å§‹ï¼Œä½¿ç”¨çº¯å‰ç«¯æŠ€æœ¯ï¼ˆHTML5 + JavaScriptï¼‰å’Œ Bootstrap æ¡†æ¶ï¼Œç»“åˆ DALLÂ·E 3 çš„å›¾åƒç”Ÿæˆèƒ½åŠ›ï¼Œæ­å»ºä¸€ä¸ªç®€æ˜“ä½†åŠŸèƒ½å®Œæ•´çš„ <strong>â€œAI Logo ç”Ÿæˆå™¨â€</strong> ç½‘é¡µåº”ç”¨ã€‚</p>
<p>ä½ å¯ä»¥å°†å®ƒç†è§£ä¸ºä¸€ä¸ªâ€œä½é…ç‰ˆ Coze Logo ç”Ÿæˆå™¨â€ï¼Œæ”¯æŒç”¨æˆ·è¾“å…¥åº”ç”¨åç§°ä¸æè¿°ï¼Œç‚¹å‡»æŒ‰é’®åè‡ªåŠ¨ç”Ÿæˆä¸“å± Logoã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€é¡¹ç›®ç›®æ ‡</h2>
<p>å®ç°ä¸€ä¸ªç½‘é¡µè¡¨å•ï¼Œå…·å¤‡ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<ul>
<li>ç”¨æˆ·è¾“å…¥ App åç§°ï¼ˆå¿…å¡«ï¼‰å’Œæè¿°ï¼ˆé€‰å¡«ï¼‰</li>
<li>è¡¨å•æäº¤åï¼Œå‰ç«¯è°ƒç”¨ AI å›¾åƒç”Ÿæˆ API</li>
<li>ä½¿ç”¨ DALLÂ·E 3 æ¨¡å‹ç”Ÿæˆ Logo å¹¶å±•ç¤ºåœ¨é¡µé¢ä¸Š</li>
<li>é¡µé¢ç¾è§‚ã€æ˜“ç”¨ï¼Œç¬¦åˆå¤§å‚çº§å‰ç«¯è§„èŒƒ</li>
</ul>
<blockquote>
<p>æŠ€æœ¯æ ˆï¼šHTML5 + Bootstrap 3.3.0 + Fetch API + DALLÂ·E 3ï¼ˆé€šè¿‡ç¬¬ä¸‰æ–¹æ¥å£ä»£ç†ï¼‰</p>
</blockquote>
<hr/>
<h2 data-id="heading-2">äºŒã€é¡µé¢ç»“æ„è®¾è®¡ï¼ˆHTML5 + Bootstrapï¼‰</h2>
<p>æˆ‘ä»¬ä½¿ç”¨ Bootstrap çš„æ …æ ¼ç³»ç»Ÿï¼ˆ<code>.container</code> + <code>.row</code> + <code>.col-md-*</code>ï¼‰å®ç°å“åº”å¼å¸ƒå±€ï¼Œç¡®ä¿é¡µé¢åœ¨ PC ç«¯å±…ä¸­æ˜¾ç¤ºï¼Œå·¦å³è‡ªåŠ¨ç•™ç™½ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-6"</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- è¡¨å•å†…å®¹ --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"logo"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<ul>
<li><code>.container</code>ï¼šå±…ä¸­å¸ƒå±€ï¼Œè‡ªåŠ¨è®¡ç®—å·¦å³ margin</li>
<li><code>.col-md-6</code>ï¼šåœ¨ä¸­ç­‰åŠä»¥ä¸Šå±å¹•å æ®ä¸€åŠå®½åº¦ï¼Œé€‚é…è¡¨å•è¾“å…¥</li>
<li><code>#logo</code>ï¼šç”¨äºåŠ¨æ€æ’å…¥ç”Ÿæˆçš„ Logo å›¾ç‰‡</li>
</ul>
<hr/>
<h2 data-id="heading-3">ä¸‰ã€æ„å»ºè¯­ä¹‰åŒ–ã€æ— éšœç¢çš„ HTML è¡¨å•</h2>
<p>ä¸€ä¸ªå¥½çš„è¡¨å•ï¼Œä¸ä»…è¦å¥½çœ‹ï¼Œæ›´è¦<strong>å¯è®¿é—®ã€æ˜“ç”¨ã€ç»“æ„æ¸…æ™°</strong>ã€‚æˆ‘ä»¬éµå¾ªä»¥ä¸‹æœ€ä½³å®è·µï¼š</p>
<h3 data-id="heading-4">1. å¿…å¡«å­—æ®µæ·»åŠ  <code>required</code> å±æ€§</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"title"</span> <span class="hljs-attr">required</span>&gt;</span>
</code></pre>
<p>æµè§ˆå™¨ä¼šåœ¨æäº¤æ—¶è‡ªåŠ¨æ ¡éªŒï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p>
<h3 data-id="heading-5">2. ä½¿ç”¨ <code>placeholder</code> æä¾›è¾“å…¥æç¤º</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥åç§°"</span> <span class="hljs-attr">...</span>&gt;</span>
</code></pre>
<p>æŠŠç”¨æˆ·å½“â€œå°ç™½â€ï¼Œé™ä½ä½¿ç”¨é—¨æ§›ã€‚</p>
<h3 data-id="heading-6">3. <code>label</code> ä¸ <code>input</code> é€šè¿‡ <code>for</code> å’Œ <code>id</code> å…³è”</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"descInput"</span>&gt;</span>Botæè¿°ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"descInput"</span> <span class="hljs-attr">...</span>&gt;</span>
</code></pre>
<p>è¿™æ˜¯<strong>æ— éšœç¢è®¿é—®ï¼ˆAccessibilityï¼‰</strong> çš„åŸºç¡€ï¼Œæ–¹ä¾¿å±å¹•é˜…è¯»å™¨è¯†åˆ«ï¼Œç¬¦åˆ WCAG æ ‡å‡†ï¼Œå¤§å‚å¿…å¤‡ã€‚</p>
<h3 data-id="heading-7">4. ä½¿ç”¨è¯­ä¹‰åŒ– <code>form</code> æ ‡ç­¾ï¼Œåˆç†ç»„ç»‡ç»“æ„</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"appForm"</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"https://www.baidu.com"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å­—æ®µ --&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre>
<ul>
<li><code>form</code> çš„ <code>action</code> å¯è®¾ç½®ä¸ºå½“å‰é¡µé¢æˆ–ç©ºï¼Œé¿å…è¯¯è·³è½¬</li>
<li>ä½¿ç”¨ <code>.form-group</code> åŒ…è£¹æ¯ä¸ªå­—æ®µï¼Œå¢å¼ºå¯è¯»æ€§</li>
</ul>
<hr/>
<h2 data-id="heading-8">å››ã€é˜»æ­¢é»˜è®¤æäº¤ï¼Œç”¨ JavaScript å‘èµ· AI è¯·æ±‚</h2>
<p>è¡¨å•é»˜è®¤ä¼šè·³è½¬é¡µé¢ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ JavaScript æ‹¦æˆªæäº¤äº‹ä»¶ï¼Œè°ƒç”¨ AI æ¥å£ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> oForm = <span class="hljs-variable language_">document</span>.<span class="hljs-property">forms</span>[<span class="hljs-string">"appForm"</span>];

oForm.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"submit"</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
  event.<span class="hljs-title function_">preventDefault</span>(); <span class="hljs-comment">// é˜»æ­¢é»˜è®¤æäº¤</span>

  <span class="hljs-keyword">const</span> appName = <span class="hljs-variable language_">this</span>[<span class="hljs-string">"title"</span>].<span class="hljs-property">value</span>;
  <span class="hljs-keyword">const</span> appDesc = <span class="hljs-variable language_">this</span>[<span class="hljs-string">"desc"</span>].<span class="hljs-property">value</span>;

  <span class="hljs-comment">// æ„é€  AI æç¤ºè¯ï¼ˆPromptï¼‰</span>
  <span class="hljs-keyword">const</span> prompt = <span class="hljs-string">`
    ä½ æ˜¯ä¸€ä¸ªäº’è”ç½‘å¤§å‚çš„è®¾è®¡å¸ˆï¼Œéœ€è¦è®¾è®¡ä¸€ä¸ªç§»åŠ¨åº”ç”¨çš„ Logoã€‚
    åº”ç”¨åç§°ä¸º <span class="hljs-subst">${appName}</span>ï¼Œ
    æè¿°ä¸º <span class="hljs-subst">${appDesc}</span>ã€‚
    è®¾è®¡ä¸€ä¸ªé«˜ç«¯ã€å¤§æ°”ã€ä¸Šæ¡£æ¬¡çš„ Logoã€‚
    è¯·ç¡®ä¿è®¾è®¡æ–¹æ¡ˆé€‚ç”¨äºç§»åŠ¨åº”ç”¨å›¾æ ‡ (App Icon)ã€‚
  `</span>;

  <span class="hljs-comment">// è°ƒç”¨ AI å›¾åƒç”Ÿæˆ API</span>
  <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.agicto.cn/v1/images/generations'</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-string">'Authorization'</span>: <span class="hljs-string">'Bearer YOUR_API_KEY'</span>,
      <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>
    },
    <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
      <span class="hljs-attr">model</span>: <span class="hljs-string">"dall-e-3"</span>,
      <span class="hljs-attr">prompt</span>: prompt,
      <span class="hljs-attr">n</span>: <span class="hljs-number">1</span>,
      <span class="hljs-attr">size</span>: <span class="hljs-string">"1024x1024"</span>
    })
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.<span class="hljs-title function_">json</span>())
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);
    <span class="hljs-keyword">const</span> img = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'img'</span>);
    img.<span class="hljs-property">src</span> = data.<span class="hljs-property">data</span>[<span class="hljs-number">0</span>].<span class="hljs-property">url</span>;
    img.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'logo'</span>).<span class="hljs-title function_">appendChild</span>(img);
    };
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Error:'</span>, error);
  });
});
</code></pre>
<p>è¿™æ®µä»£ç å®ç°äº†ä¸€ä¸ªå‰ç«¯è¡¨å•æäº¤åè°ƒç”¨ AI å›¾åƒç”Ÿæˆ APIï¼ˆå¦‚ DALLÂ·Eï¼‰åŠ¨æ€ç”Ÿæˆ Logo çš„åŠŸèƒ½ã€‚ç”¨æˆ·è¾“å…¥åº”ç”¨åç§°å’Œæè¿°ï¼Œç³»ç»Ÿæ®æ­¤æ„é€ æç¤ºè¯ï¼ˆPromptï¼‰ï¼Œé€šè¿‡ fetch è¯·æ±‚ç¬¬ä¸‰æ–¹ API è·å–ç”Ÿæˆçš„å›¾ç‰‡ï¼Œå¹¶å°†å…¶æ’å…¥é¡µé¢ã€‚</p>
<p>æ ¸å¿ƒæµç¨‹ï¼š</p>
<p>è·å–è¡¨å•æ•°æ® â†’ æ„é€  Prompt â†’ è°ƒç”¨ AI æ¥å£ â†’ æ¸²æŸ“è¿”å›çš„å›¾ç‰‡ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼š<code>YOUR_API_KEY</code> éœ€æ›¿æ¢ä¸ºä½ çš„å®é™… API å¯†é’¥ï¼Œå»ºè®®åŠ å¯†ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-9">äº”ã€API æ¥å£è¯´æ˜ï¼ˆç±»æ¯” Apifox è°ƒè¯•ï¼‰</h2>
<p>ä½ å¯ä»¥å°†ä¸Šè¿° <code>fetch</code> è¯·æ±‚ç†è§£ä¸ºåœ¨ Apifox ä¸­æ‰‹åŠ¨æµ‹è¯•ä¸€ä¸ª POST æ¥å£ï¼š</p>

























<table><thead><tr><th>é¡¹ç›®</th><th>å†…å®¹</th></tr></thead><tbody><tr><td>è¯·æ±‚æ–¹å¼</td><td>POST</td></tr><tr><td>è¯·æ±‚åœ°å€</td><td><code>https://api.agicto.cn/v1/images/generations</code></td></tr><tr><td>è¯·æ±‚å¤´</td><td><code>Authorization: Bearer YOUR_API_KEY</code></td></tr><tr><td>è¯·æ±‚ä½“ï¼ˆJSONï¼‰</td><td><code>{ model: "dall-e-3", prompt: "...", size: "1024x1024" }</code></td></tr></tbody></table>
<p>è¿™æ­£æ˜¯ LLMï¼ˆå¤§è¯­è¨€æ¨¡å‹ï¼‰é©±åŠ¨çš„ API è°ƒç”¨èŒƒå¼ï¼š<strong>å‰ç«¯ â†’ è°ƒç”¨ AI æ¥å£ â†’ è¿”å›ç»“æœ â†’ æ¸²æŸ“é¡µé¢</strong></p>
<hr/>
<h2 data-id="heading-10">å…­ã€æŠ€æœ¯äº®ç‚¹æ€»ç»“</h2>





























<table><thead><tr><th>ç‰¹æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>ä½ä»£ç å®ç° AI åŠŸèƒ½</strong></td><td>æ— éœ€è®­ç»ƒæ¨¡å‹ï¼Œè°ƒç”¨ API å³å¯ç”Ÿæˆ Logo</td></tr><tr><td><strong>å“åº”å¼å¸ƒå±€</strong></td><td>ä½¿ç”¨ Bootstrap å®ç° PC å‹å¥½ç•Œé¢</td></tr><tr><td><strong>æ— éšœç¢è®¾è®¡</strong></td><td>label + id è”åŠ¨ï¼Œæ”¯æŒæ®‹éšœç”¨æˆ·</td></tr><tr><td><strong>ç”¨æˆ·ä½“éªŒä¼˜åŒ–</strong></td><td>placeholderã€requiredã€é˜»æ­¢é»˜è®¤æäº¤</td></tr><tr><td><strong>å‰ç«¯è°ƒç”¨ LLM</strong></td><td>å±•ç¤ºç°ä»£ Web åº”ç”¨å¦‚ä½•ä¸ AI æ·±åº¦é›†æˆ</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-11">ä¸ƒã€ç»“è¯­</h2>
<p>é€šè¿‡è¿™ä¸ªç®€å•çš„é¡¹ç›®ï¼Œæˆ‘ä»¬çœ‹åˆ°äº† <strong>å‰ç«¯ + AI</strong> çš„å·¨å¤§æ½œåŠ›ã€‚ä½ ä¸éœ€è¦æˆä¸º AI ä¸“å®¶ï¼Œåªè¦ä¼šå†™ HTML å’Œ JavaScriptï¼Œå°±èƒ½æ„å»ºå‡ºåª²ç¾Cozeå¹³å°çš„ AI åº”ç”¨åŸå‹ã€‚</p>
<blockquote>
<p>æœªæ¥ï¼Œæ¯ä¸€ä¸ªç½‘é¡µå¼€å‘è€…ï¼Œéƒ½å¯èƒ½æ˜¯ AI åº”ç”¨çš„åˆ›é€ è€…ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‹†è§£ä¸€ä¸ªç”± setTimeout å¼•å‘çš„â€œé¡µé¢å‡æ­»â€æ‚¬æ¡ˆ]]></title>    <link>https://juejin.cn/post/7582413770091839526</link>    <guid>https://juejin.cn/post/7582413770091839526</guid>    <pubDate>2025-12-11T16:29:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582413770091839526" data-draft-id="7582425536463765530" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‹†è§£ä¸€ä¸ªç”± setTimeout å¼•å‘çš„â€œé¡µé¢å‡æ­»â€æ‚¬æ¡ˆ"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-11T16:29:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SakuraOnTheWay"/> <meta itemprop="url" content="https://juejin.cn/user/3035112839343709"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‹†è§£ä¸€ä¸ªç”± setTimeout å¼•å‘çš„â€œé¡µé¢å‡æ­»â€æ‚¬æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3035112839343709/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SakuraOnTheWay
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T16:29:34.000Z" title="Thu Dec 11 2025 16:29:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<h3 data-id="heading-1">çµé­‚æ‹·é—®</h3>
<p>ä½ æ˜¯ä¸æ˜¯ä¹Ÿå†™è¿‡è¿™æ ·çš„ä»£ç ï¼Ÿ</p>
<p>â€œè¿™ä¸ªåŠ¨ç”»æœ‰ç‚¹å¡ï¼ŒåŠ ä¸ª setTimeout å»¶æ—¶ä¸€ä¸‹ï¼Ÿâ€ â€œè¿™ä¸ªçŠ¶æ€æ›´æ–°é¡ºåºä¸å¯¹ï¼Œç»™å®ƒä¸ª 100ms ç¼“å†²ï¼Ÿâ€ â€œä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™æ»šåŠ¨ç»“æŸï¼Ÿå…ˆå»¶è¿Ÿä¸ª 300ms å†è¯´ï¼â€</p>
<p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼ŒsetTimeout å°±åƒæ˜¯ä¸€å‰‚å¼ºæ•ˆæ­¢ç—›è¯ã€‚å®ƒèƒ½å¿«é€Ÿæ©ç›–é€»è¾‘ä¸Šçš„æ—¶åºå†²çªï¼Œè®©ä»£ç â€œçœ‹èµ·æ¥â€è·‘é€šäº†ã€‚ä½†è¯·æ³¨æ„ï¼Œå®ƒåªæ˜¯æ©ç›–äº†ç—…æƒ…ï¼Œå¹¶æ²¡æœ‰æ²»æ„ˆç—…ç¶ã€‚</p>
<h3 data-id="heading-2">éœ€æ±‚æè¿°</h3>
<p>â€œç”¨æˆ·ç‚¹å‡»ç­›é€‰æŒ‰é’®æ—¶ï¼Œé¡µé¢è¦å…ˆè‡ªåŠ¨æ»šåŠ¨ï¼ˆé”šå®šï¼‰åˆ°é¡µé¢æŸä¸€ä¸ªä½ç½®ï¼Œç„¶åå†å±•å¼€ç­›é€‰æµ®å±‚ã€‚â€</p>
<p>ä¸ä¸‹å›¾ä¸­æ·˜å®é—ªè´­çš„æ•ˆæœç±»ä¼¼ï¼š</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce77c1f7a6334b7b853c3e2cc77130cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2FrdXJhT25UaGVXYXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766075721&amp;x-signature=NkTsh7uTWyHxoG4w2SaUH1blbKk%3D" width="200" alt="é”šå®šå±•å¼€æµ®å±‚æ•ˆæœæ¼”ç¤º" loading="lazy"/>
<p>ä¸ºäº†ä¼˜åŒ–ä½“éªŒï¼Œé¡µé¢è®¾è®¡äº†â€œé˜²æ»šåŠ¨ç©¿é€â€é€»è¾‘ï¼š</p>
<ul>
<li><strong>å½“æµ®å±‚å±•å¼€æ—¶ï¼š</strong> è°ƒç”¨ <code>setPageScrollEnable(false)</code> <strong>ç¦ç”¨</strong>é¡µé¢æ»šåŠ¨ã€‚</li>
<li><strong>å½“æµ®å±‚å…³é—­æ—¶ï¼š</strong> è°ƒç”¨ <code>setPageScrollEnable(true)</code> <strong>æ¢å¤</strong>é¡µé¢æ»šåŠ¨ã€‚</li>
</ul>
<p>é¢„æœŸçš„äº¤äº’æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>ç”¨æˆ·<strong>ç‚¹å‡»</strong>ç­›é€‰</li>
<li>é¡µé¢å…ˆæ‰§è¡Œ<strong>é”šå®šæ»šåŠ¨</strong></li>
<li>æ»šåŠ¨ç»“æŸåï¼Œå±•å¼€ç­›é€‰æµ®å±‚ï¼ˆåŒæ—¶ç¦ç”¨é¡µé¢æ»šåŠ¨ï¼Œé˜²æ­¢ç©¿é€ï¼‰</li>
<li>å…³é—­æµ®å±‚æ—¶ï¼Œæ¢å¤é¡µé¢æ»šåŠ¨</li>
</ol>
<p>å°±æ˜¯è¿™ä¸ªç®€å•çš„äº¤äº’æµï¼Œå´è®©ç»„å†…çš„åŒå­¦æ‰è¿›äº† <code>setTimeout</code> çš„é™·é˜±ã€‚ä»–è¯•å›¾ç”¨â€œæ—¶é—´â€æ¥æ§åˆ¶â€œé¡ºåºâ€ï¼Œç»“æœå¼•å‘äº†Bugï¼šç”¨æˆ·ç‚¹å‡»â€œç­›é€‰â€æŒ‰é’®ï¼Œé¡µé¢è‡ªåŠ¨æ»šåŠ¨å®šä½ã€‚ä½†å¦‚æœç”¨æˆ·æ‰‹é€Ÿå¿«ï¼Œç‚¹å®Œé©¬ä¸Šå…³æ‰ï¼Œ<strong>é¡µé¢å°±ä¼šçªç„¶â€œå¡æ­»â€ï¼Œæ€ä¹ˆæ»‘éƒ½æ»‘ä¸åŠ¨ã€‚</strong>ã€‚</p>
<p>ä»Šå¤©æˆ‘ä»¬å°±æŠŠè¿™å¼ æµç¨‹å›¾æ‘Šå¼€ï¼Œçœ‹çœ‹è¿™ç§â€œå·æ‡’â€çš„å†™æ³•æ˜¯å¦‚ä½•å¯¼è‡´ç¾éš¾æ€§ Bug çš„ã€‚</p>
<h2 data-id="heading-3">é—®é¢˜åˆ†æ</h2>
<h3 data-id="heading-4">è¯¯åŒºï¼šé™·å…¥å»¶è¿Ÿå›°å¢ƒ</h3>
<p>ä¸ºäº†å®ç°äº¤äº’è¡Œä¸ºï¼Œè¿™ä½åŒå­¦æ˜¯è¿™ä¹ˆåšçš„ï¼š</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3a7e7fdc8554f48ab7fd2f88583702e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2FrdXJhT25UaGVXYXk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766075721&amp;x-signature=cI%2FXY8xKihCHdU1NyOThi1GINoM%3D" width="600" alt="é”™è¯¯çš„é€»è¾‘" loading="lazy"/>
<p>å½“ç”¨æˆ·ç‚¹å‡»â€œç­›é€‰â€æŒ‰é’®åä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿç»„ä»¶çš„onClickäº‹ä»¶é‡Œé¢æ˜¯æ€ä¹ˆå¤„ç†çš„ï¼Ÿé¡µé¢æ˜¯æ€ä¹ˆæ¥æ”¶åˆ°ç”¨æˆ·ç‚¹å‡»ä»¥åŠæµ®å±‚çŠ¶æ€æ›´æ”¹çš„é€šçŸ¥çš„ï¼Ÿ</p>
<ul>
<li>
<p><strong>è§¦å‘ï¼š</strong> ç”¨æˆ·ç‚¹å‡»ç»„ä»¶å†…çš„â€œç­›é€‰â€æŒ‰é’®ã€‚</p>
</li>
<li>
<p><strong>é€šçŸ¥ï¼š</strong> ç»„ä»¶è§¦å‘ Callbackï¼Œé€šçŸ¥é¡µé¢â€œæˆ‘è¦å±•å¼€äº†â€ã€‚</p>
</li>
<li>
<p><strong>å“åº”ï¼ˆé¡µé¢ç«¯ï¼‰ï¼š</strong> é¡µé¢æ”¶åˆ°é€šçŸ¥ï¼Œåˆ©ç”¨ <code>requestAnimationFrame</code> æ‰§è¡Œ<strong>é”šå®šæ»šåŠ¨</strong>ï¼Œå°†è§†å£å®šä½åˆ°æŒ‡å®šåŒºåŸŸã€‚</p>
</li>
<li>
<p><strong>å“åº”ï¼ˆç»„ä»¶ç«¯ï¼‰ï¼š</strong> ç»„ä»¶æ›´æ–°å†…éƒ¨çŠ¶æ€ <code>isShowLayer</code>ï¼Œå¼€å§‹æ‰§è¡Œ 250ms çš„å±•å¼€åŠ¨ç”»ã€‚</p>
</li>
<li>
<p><strong>è”åŠ¨ï¼š</strong> é¡µé¢é€šè¿‡ Hooks ç›‘å¬åˆ°ç»„ä»¶çŠ¶æ€å˜ä¸ºâ€œå±•å¼€â€ï¼Œäºæ˜¯æ‰§è¡Œ <code>setPageScrollLocked(true)</code> <strong>ç¦ç”¨æ»šåŠ¨</strong>ï¼Œé˜²æ­¢ç©¿é€ã€‚</p>
</li>
</ul>
<p>ç»„ä»¶ä¼ªä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç»„ä»¶ä»£ç </span>
<span class="hljs-keyword">const</span> { onClickCallBack } = props
<span class="hljs-keyword">const</span> [isShowLayer, setIsShowLayer] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>)

<span class="hljs-keyword">const</span> <span class="hljs-title function_">onClickFilter</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// 1. æ‰§è¡Œå›è°ƒ</span>
    <span class="hljs-title function_">onClickCallBack</span>()
    
    <span class="hljs-comment">// 2. æ›´æ–°çŠ¶æ€</span>
    <span class="hljs-title function_">setIsShowLayer</span>(!isShowLayer)
}


<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
    {/* ç­›é€‰æŒ‰é’® */}
    <span class="hljs-tag">&lt;<span class="hljs-name">FilterBtn</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClickFilter}</span> /&gt;</span>
    {/* ç­›é€‰æµ®å±‚ */}
    { isShowLayer ?  <span class="hljs-tag">&lt;<span class="hljs-name">FilterLayer</span> /&gt;</span> : null }
<span class="hljs-tag">&lt;/&gt;</span></span>
</code></pre>
<p>é¡µé¢ä¼ªä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// é¡µé¢ä»£ç </span>
<span class="hljs-keyword">const</span> { isShowLayer } = <span class="hljs-title function_">useFilterComponent</span>() 
<span class="hljs-comment">// æ§åˆ¶é¡µé¢æ»šåŠ¨çš„è‡ªå®šä¹‰hooks</span>
<span class="hljs-keyword">const</span> { setPageScrollEnable } = <span class="hljs-title function_">usePageScroll</span>()
<span class="hljs-comment">// æ§åˆ¶é¡µé¢æ»šåŠ¨åˆ°æŒ‡å®šæ¨¡å—çš„è‡ªå®šä¹‰hooks</span>
<span class="hljs-keyword">const</span> { setScrollPageToModule } = <span class="hljs-title function_">useScrollToModule</span>()

<span class="hljs-keyword">const</span> <span class="hljs-title function_">onClickCallBack</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// requestAnimationFrameæ§åˆ¶é¡µé¢æ»šåŠ¨åˆ°FilterBarçš„ä½ç½®</span>
    <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-title function_">setScrollPageToModule</span>(<span class="hljs-title class_">FilterBar</span>))
}

<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// åˆ’é‡ç‚¹!!! å»¶è¿Ÿç¦æ­¢æ»šåŠ¨ï¼Œç¡®ä¿åŠ¨ç”»æ•ˆæœå®Œæˆ</span>
    <span class="hljs-keyword">const</span> delayTime = isMini ? <span class="hljs-number">2000</span> : <span class="hljs-number">300</span>
    <span class="hljs-keyword">if</span> (isShowLayer) { <span class="hljs-comment">// å±•å¼€æµ®å±‚</span>
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-title function_">setPageScrollEnable</span>(<span class="hljs-literal">false</span>) <span class="hljs-comment">// ç¦æ­¢æ»šåŠ¨</span>
        }, delayTime)
    } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// å…³é—­æµ®å±‚</span>
        <span class="hljs-title function_">setPageScrollEnable</span>(<span class="hljs-literal">true</span>) <span class="hljs-comment">// æ¢å¤æ»šåŠ¨</span>
    }
}, [isShowLayer])

</code></pre>
<h3 data-id="heading-5">é—®é¢˜æ‹†è§£ï¼šé¡µé¢ä¸ºä»€ä¹ˆä¼šâ€œæ­»â€ï¼Ÿ</h3>
<blockquote>
<p>çœ‹ä¼¼å®Œç¾çš„é—­ç¯ï¼Œå®åˆ™è„†å¼±ä¸å ª</p>
</blockquote>
<p>å¯¼è‡´é¡µé¢å¡æ­»æˆ–æ— æ³•æ»šåŠ¨çš„æ ¹æºï¼Œåœ¨äº<strong>çŠ¶æ€å˜æ›´ï¼ˆStateï¼‰ä¸è§†è§‰å‘ˆç°ï¼ˆUIï¼‰çš„ä¸¥é‡ä¸åŒæ­¥</strong>ï¼Œè€Œå¼€å‘åŒå­¦è¯•å›¾ç”¨ <code>setTimeout</code> æ¥æ©ç›–è¿™ç§è£‚ç—•</p>
<h4 data-id="heading-6">åŸå› ä¸€ï¼šç”¨â€œçŒœæ—¶é—´â€ä»£æ›¿â€œé€»è¾‘é¡ºåºâ€</h4>
<p>ä»£ç ä¸­ä¸ºäº†<strong>ç­‰å¾…é¡µé¢æ»šåŠ¨ç»“æŸä»¥åŠæµ®å±‚åŠ¨ç”»å±•å¼€</strong>ï¼Œç¡¬ç¼–ç äº†ä¸€ä¸ª <code>2000ms</code>(å°ç¨‹åºï¼‰ çš„å»¶æ—¶ã€‚</p>
<p>æ»šåŠ¨çš„è€—æ—¶å–å†³äºæ‰‹æœºæ€§èƒ½å’Œæ»šåŠ¨è·ç¦»ã€‚å¦‚æœæ»šåŠ¨åªç”¨äº† 0.5 ç§’ï¼Œç”¨æˆ·è¦ç™½ç™½ç­‰ 1.5 ç§’ï¼›å¦‚æœæ»šåŠ¨å¡é¡¿ç”¨äº† 3 ç§’ï¼Œ2 ç§’æ—¶æµ®å±‚å¼ºåˆ¶å¼¹å‡ºï¼Œç”»é¢å°±ä¼šå†²çªã€‚</p>
<p>é¡µé¢çš„é¡µé¢é”šå®šå’Œç¦ç”¨é¡µé¢æ»šåŠ¨è¿™ä¸¤ä¸ªçŠ¶æ€çš„é¡ºåºæ˜¯å‰²è£‚çš„ï¼Œé¡µé¢é”šå®šå’Œæµ®å±‚å±•å¼€åçš„ç¦ç”¨é¡µé¢æ»šåŠ¨ï¼Œæ˜æ˜æ˜¯ä¸€ä¸ªå¼ºä¾èµ–çš„äº¤äº’æµï¼Œå´å®Œå…¨é setTimeoutåœ¨çŒœæµ‹ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆå°ç¨‹åºä¼šè®¾ç½®ä¸€ä¸ª2000msçš„å»¶æ—¶ï¼Ÿæˆ‘ä»¬çŸ¥é“requestAnimationFrameçš„æ—¶æœºæˆ‘ä»¬æ˜¯æ— æ³•æ§åˆ¶çš„ï¼Œå—é™äºå°ç¨‹åºçš„æ€§èƒ½ï¼Œæ‰€ä»¥è‰ç‡åœ°è®¾ç½®äº†ä¸€ä¸ª2000msçš„å»¶æ—¶ï¼ç¦»è°±plusï¼</strong></p>
<h4 data-id="heading-7">åŸå› äºŒï¼šåªç®¡ç”Ÿï¼Œä¸ç®¡â€œåŸ‹â€ï¼ˆå†…å­˜æº¢å‡ºä¸å‰¯ä½œç”¨ï¼‰</h4>
<p>ä»£ç ä¸­è®¾ç½®äº†æµ®å±‚å±•å¼€å <code>2000msï¼ˆå°ç¨‹åºï¼‰</code> åé”å®šé¡µé¢æ»šåŠ¨ï¼Œä½†<strong>æ²¡æœ‰æ¸…é™¤å®šæ—¶å™¨</strong>ã€‚</p>
<p>å½“ç”¨æˆ·åœ¨ 2000ms å†…å¿«é€Ÿå…³é—­äº†ç»„ä»¶ï¼Œç»„ä»¶è™½ç„¶é”€æ¯äº†ï¼Œä½†å®šæ—¶å™¨ä¾ç„¶åœ¨å†…å­˜ä¸­å€’æ•°ã€‚æ—¶é—´ä¸€åˆ°ï¼Œå®šæ—¶å™¨â€œè¯ˆå°¸â€ï¼Œæ‰§è¡Œé”å®šæ»šåŠ¨çš„ä»£ç ã€‚æ­¤æ—¶æµ®å±‚å·²å…³ï¼Œç”¨æˆ·çœ‹ç€æ­£å¸¸çš„é¡µé¢ï¼Œæ‰‹æŒ‡å´æ€ä¹ˆåˆ’éƒ½åˆ’ä¸åŠ¨ã€‚</p>
<h2 data-id="heading-8">è§£å†³æ–¹æ¡ˆ</h2>
<p>å¿…é¡»éµå¾ªä¸¤ä¸ªåŸåˆ™ï¼š <strong>â€œåŠæ—¶æ¸…ç†å‰¯ä½œç”¨â€</strong> å’Œ <strong>â€œåŸºäºäº‹ä»¶è€Œéæ—¶é—´â€</strong></p>
<h3 data-id="heading-9">ä¿®å¤æ–¹æ¡ˆ 1ï¼šå¿…é¡»æ¸…ç†å®šæ—¶å™¨ (æœ€å¿«ä¿®å¤)</h3>
<p>å‡¡æ˜¯åœ¨ <code>useEffect</code> ä¸­ä½¿ç”¨ <code>setTimeout</code>ï¼ŒåŠ¡å¿…åœ¨æ¸…ç†å‡½æ•°ï¼ˆcleanup functionï¼‰ä¸­æ¸…é™¤å®ƒã€‚è¿™èƒ½ç¡®ä¿å½“çŠ¶æ€å˜åŒ–ï¼ˆç”¨æˆ·å…³é—­ï¼‰æ—¶ï¼Œä¹‹å‰çš„å¾…æ‰§è¡Œä»»åŠ¡è¢«å–æ¶ˆã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> timerRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);

<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// 1. æ¯æ¬¡ effect æ‰§è¡Œå‰ï¼Œå…ˆæ¸…ç†ä¸Šä¸€æ¬¡å¯èƒ½å­˜åœ¨çš„å®šæ—¶å™¨</span>
    <span class="hljs-keyword">if</span> (timerRef.<span class="hljs-property">current</span>) {
        <span class="hljs-built_in">clearTimeout</span>(timerRef.<span class="hljs-property">current</span>);
        timerRef.<span class="hljs-property">current</span> = <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">if</span> (isShowLayer) {
        <span class="hljs-keyword">const</span> delayTime = isMini ? <span class="hljs-number">2000</span> : <span class="hljs-number">300</span>;
        
        timerRef.<span class="hljs-property">current</span> = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-title function_">setPageScrollEnable</span>(<span class="hljs-literal">false</span>);
            
            timerRef.<span class="hljs-property">current</span> = <span class="hljs-literal">null</span>; 
        }, delayTime);
        
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_">setPageScrollEnable</span>(<span class="hljs-literal">true</span>);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (timerRef.<span class="hljs-property">current</span>) {
            <span class="hljs-built_in">clearTimeout</span>(timerRef.<span class="hljs-property">current</span>);
            timerRef.<span class="hljs-property">current</span> = <span class="hljs-literal">null</span>;
        }
    };
}, [isShowLayer]);
</code></pre>
<h3 data-id="heading-10">ä¿®å¤æ–¹æ¡ˆ 2ï¼šåŸºäº Promise çš„æ‰§è¡Œé¡ºåº (æ¶æ„ä¼˜åŒ–)</h3>
<p>æ›´å½»åº•çš„è§£æ³•æ˜¯æ‘’å¼ƒçŒœæµ‹æ—¶é—´çš„é€»è¾‘ï¼Œå°†â€œé”šå®šæ»šåŠ¨â€å°è£…ä¸º Promiseã€‚åªæœ‰å½“æ»šåŠ¨çœŸæ­£ç»“æŸåï¼Œæ‰æ›´æ–°çŠ¶æ€å¹¶é”å±ã€‚<strong>è¯¥æ–¹æ³•é‡æ„å·¥ä½œè¾ƒå¤§ï¼Œæš‚æ—¶æ”¾å¼ƒ...</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">scrollToModule</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-comment">// 1. è°ƒç”¨æ»šåŠ¨ API</span>
    <span class="hljs-title function_">nativeScrollTo</span>({ <span class="hljs-comment">// nativeScrollToä¹Ÿæ˜¯å°è£…çš„ï¼Œæ ¹æ®å®é™…ç«¯ä¾§å®ç°æ•ˆæœ</span>
      <span class="hljs-attr">target</span>: <span class="hljs-string">'#filter-bar'</span>,
      <span class="hljs-attr">success</span>: <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// 2. åªæœ‰çœŸæ­£æ»šå®Œäº†ï¼Œæ‰ resolve</span>
        <span class="hljs-comment">// å°ç¨‹åºé‡Œç”šè‡³å¯ä»¥ç”¨ IntersectionObserver æ¥è¾…åŠ©åˆ¤æ–­æ˜¯å¦åˆ°ä½</span>
        <span class="hljs-title function_">resolve</span>(<span class="hljs-literal">true</span>); 
      },
      <span class="hljs-attr">fail</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-literal">false</span>) <span class="hljs-comment">// å®¹é”™å¤„ç†</span>
    });
  });
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">onClickCallBack</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (isLocked.<span class="hljs-property">current</span>) <span class="hljs-keyword">return</span>;
  isLocked.<span class="hljs-property">current</span> = <span class="hljs-literal">true</span>;

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// æ»šåŠ¨é”šå®š</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">scrollToModule</span>(); 
    <span class="hljs-comment">// åªæœ‰æ»šåŠ¨å®Œæˆï¼Œæ‰æ‰§è¡Œä¸‹ä¸€æ­¥</span>
    filterComponentRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">open</span>(); 
    <span class="hljs-comment">// ç¦ç”¨é¡µé¢æ»šåŠ¨</span>
    <span class="hljs-title function_">setPageScrollEnable</span>(<span class="hljs-literal">false</span>);
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(e);
  } <span class="hljs-keyword">finally</span> {
    isLocked.<span class="hljs-property">current</span> = <span class="hljs-literal">false</span>;
  }
};
</code></pre>
<h2 data-id="heading-11">è­¦ç¤º</h2>
<p><strong>ä¸è¦è®¤ä¸º setTimeout èƒ½è§£å†³ä¸€åˆ‡é—®é¢˜ã€‚</strong></p>
<ul>
<li><strong>ä¸¥æ ¼ç®¡ç†æ‰§è¡Œé¡ºåºï¼š</strong> å¼‚æ­¥æ“ä½œï¼ˆå¦‚é¡µé¢æ»šåŠ¨ã€æ¥å£è¯·æ±‚ï¼‰å¿…é¡»é€šè¿‡ <strong>Promise</strong> æˆ– <strong>äº‹ä»¶å›è°ƒ</strong> æ¥ç¡®ä¿é€»è¾‘çš„ä¸²è¡Œæ‰§è¡Œï¼Œç»ä¸è¦é çŒœæ—¶é—´ã€‚</li>
<li><strong>å¿…é¡»æ¸…ç†å®šæ—¶å™¨ï¼š</strong> åœ¨å¤„ç†æ¶‰åŠé¡µé¢å…¨å±€çŠ¶æ€ï¼ˆå¦‚æ»šåŠ¨é”å®šï¼‰çš„é€»è¾‘æ—¶ï¼ŒåŠ¡å¿…å…³æ³¨ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€‚æ»¥ç”¨å®šæ—¶å™¨è€Œå¿½ç•¥ <code>clearTimeout</code> æˆ–ç”Ÿå‘½å‘¨æœŸæ¸…ç†ï¼Œææ˜“å¼•å‘éš¾ä»¥å¤ç°çš„â€œå¹½çµ Bugâ€ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>