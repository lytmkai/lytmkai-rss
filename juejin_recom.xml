<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[åœ¨æ•°æ®åº“è¿ç§»ä¸­ï¼Œå¦‚ä½•è®© AI çœŸæ­£â€œå¯ç”¨ã€å¯ä¿¡ã€å¯è½åœ°â€?]]></title>    <link>https://juejin.cn/post/7587342120022212659</link>    <guid>https://juejin.cn/post/7587342120022212659</guid>    <pubDate>2025-12-25T05:14:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587342120022212659" data-draft-id="7587336857538707465" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨æ•°æ®åº“è¿ç§»ä¸­ï¼Œå¦‚ä½•è®© AI çœŸæ­£â€œå¯ç”¨ã€å¯ä¿¡ã€å¯è½åœ°â€?"/> <meta itemprop="keywords" content="æ•°æ®åº“,SQL,LLM"/> <meta itemprop="datePublished" content="2025-12-25T05:14:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çˆ±å¯ç”Ÿå¼€æºç¤¾åŒº"/> <meta itemprop="url" content="https://juejin.cn/user/1480387593251847"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨æ•°æ®åº“è¿ç§»ä¸­ï¼Œå¦‚ä½•è®© AI çœŸæ­£â€œå¯ç”¨ã€å¯ä¿¡ã€å¯è½åœ°â€?
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1480387593251847/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çˆ±å¯ç”Ÿå¼€æºç¤¾åŒº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T05:14:06.000Z" title="Thu Dec 25 2025 05:14:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/24265f1dec9141dfad04ee4cdcb68485~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5Y-v55Sf5byA5rqQ56S-5Yy6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767245931&amp;x-signature=%2F0HpE5Jt9F2KsQ7YkkgP51zAwIA%3D" alt="ç”Ÿæˆç‰¹å®šé£æ ¼å›¾ç‰‡ (1).png" loading="lazy"/></p>
<p><strong>åœ¨æ•°æ®åº“è¿ç§»é¢†åŸŸï¼ŒAI æ­£åœ¨è¢«å¯„äºˆåšæœ›ã€‚</strong></p>
<p>ä½†ä¸€ä¸ªç°å®é—®é¢˜ä¹Ÿè¶Šæ¥è¶Šæ¸…æ™°ï¼šå¦‚æœåªâ€œ<strong>ç›¸ä¿¡æ¨¡å‹</strong>â€ï¼Œè¿ç§»é£é™©å¹¶ä¸ä¼šå‡å°‘ï¼Œç”šè‡³å¯èƒ½è¢«æ”¾å¤§ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fsqlshift.cn%2Fapp%2Ftask_detail%3Ftask_id%3D578cb98b-a121-41a6-930a-4cc271ef0749%26task_name%3DDemo%26detail_type%3Dshare_detail%26code%3D83103ce2-9167-439c-a03c-532c911fb516" title="https://sqlshift.cn/app/task_detail?task_id=578cb98b-a121-41a6-930a-4cc271ef0749&amp;task_name=Demo&amp;detail_type=share_detail&amp;code=83103ce2-9167-439c-a03c-532c911fb516" target="_blank" ref="nofollow noopener noreferrer">SQLShift</a> æ­£æ˜¯åœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹è¯ç”Ÿï¼Œå¹¶æŒç»­æ¼”è¿›ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æ•°æ®åº“è¿ç§»éš¾ç‚¹</h2>
<p>åœ¨ä¼ä¸šè¿›è¡Œ IT æ¶æ„å‡çº§ã€äº‘åŒ–æ”¹é€ æˆ–å›½äº§åŒ–æ›¿ä»£æ—¶ï¼Œæ•°æ®åº“è¿ç§»å‡ ä¹æ˜¯ç»•ä¸å¼€çš„æ ¸å¿ƒä»»åŠ¡ã€‚</p>
<p>ä»å®è·µæ¥çœ‹ï¼Œè¿ç§»éš¾ç‚¹ä¸»è¦é›†ä¸­åœ¨ä¸¤ä¸ªå±‚é¢ï¼š</p>
<p>1ï¸âƒ£ <strong>è¡¨å¯¹è±¡å±‚é¢</strong></p>
<p>å­—æ®µç±»å‹æ˜ å°„ã€é•¿åº¦è°ƒæ•´ã€é»˜è®¤å€¼ä¿®æ­£ï¼Œè¿™ç±»é—®é¢˜å·²ç»è¢«å¤§é‡å·¥å…·ï¼ˆå¦‚ OMAã€OMSã€DTS ç­‰ï¼‰è¾ƒå¥½è§£å†³ã€‚</p>
<p>2ï¸âƒ£ <strong>éè¡¨å¯¹è±¡å±‚é¢</strong></p>
<p>å­˜å‚¨è¿‡ç¨‹ã€å‡½æ•°ã€è§¦å‘å™¨ã€åŒ…ã€è§†å›¾ç­‰éè¡¨å¯¹è±¡ä¸­ï¼Œå°è£…çš„æ˜¯ <strong>çœŸå®ä¸šåŠ¡é€»è¾‘</strong>ï¼Œä¹Ÿæ˜¯è¿ç§»ä¸­æœ€å®¹æ˜“å‡ºé—®é¢˜çš„åœ°æ–¹ã€‚</p>
<p>å³ä¾¿åœ¨â€œ<strong>çœ‹ä¼¼å…¼å®¹</strong>â€çš„è¿ç§»è·¯å¾„ä¸­ï¼Œé—®é¢˜ä¾ç„¶å¤§é‡å­˜åœ¨ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li>åœ¨ Oracle â†’ OceanBaseï¼ˆOracle æ¨¡å¼ï¼‰è¿ç§»ä¸­
<ul>
<li><code>SYSDATE()</code> åœ¨ Oracle å¯ç”¨ï¼Œåœ¨ OceanBase ä¸­å´æŠ¥é”™</li>
<li>åŠ¨æ€ SQL çš„ <code>USING</code> å­å¥åœ¨ç›®æ ‡ç«¯è¡Œä¸ºæ›´ä¸¥æ ¼</li>
</ul>
</li>
<li>å…¨è§’ç¬¦å·ã€éšå¼ç±»å‹è½¬æ¢ã€å®½æ¾è¯­æ³•åœ¨ç›®æ ‡ç«¯ç›´æ¥å¤±æ•ˆ</li>
<li>å›½äº§æ•°æ®åº“å®£ç§°â€œå®Œå…¨å…¼å®¹â€ï¼Œä½†å…³é”®è¡Œä¸ºå·®å¼‚å¹¶æœªåœ¨æ–‡æ¡£ä¸­è¯´æ˜</li>
</ul>
<p>è¿™äº›â€œéšæ€§æ–¹è¨€å·®å¼‚â€ï¼Œå¾€å¾€éœ€è¦ DBA <strong>é€è¡Œé˜…è¯»ã€åå¤è°ƒè¯•ã€äººå·¥æ”¹å†™</strong>ï¼Œæˆæœ¬æé«˜ã€é£é™©æå¤§ã€‚</p>
<h2 data-id="heading-1">äºŒã€ä¸ºä»€ä¹ˆâ€œç›´æ¥ç”¨å¤§æ¨¡å‹åšè¿ç§»â€å¹¶ä¸å¯é ï¼Ÿ</h2>
<p>åœ¨ <strong>SQLShift</strong> çš„æ—©æœŸè°ƒç ”ä¸å®è·µä¸­ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰ç›²ç›®ä¹è§‚åœ°â€œç›´æ¥ä¸Š AIâ€ã€‚ç›¸åï¼Œæˆ‘ä»¬ç³»ç»Ÿæ€§åœ°éªŒè¯äº†ä¸€ä¸ªé—®é¢˜ï¼š</p>
<blockquote>
<p>å¤§æ¨¡å‹æ˜¯å¦çœŸçš„å…·å¤‡å¯é çš„æ•°æ®åº“è¯­æ³•ä¸ç‰ˆæœ¬æ„ŸçŸ¥èƒ½åŠ›ï¼Ÿ</p>
</blockquote>
<h3 data-id="heading-2">ğŸ” å®é™…è¯„æµ‹ç»“è®ºï¼ˆæ¥è‡ªå¤šæ¨¡å‹æµ‹è¯•ï¼‰</h3>
<p>åœ¨å¯¹å¤šæ¬¾ä¸»æµå¤§æ¨¡å‹ï¼ˆåŒ…æ‹¬ GPTã€Claudeã€Geminiã€DeepSeekã€Qwenã€Kimi ç­‰ï¼‰è¿›è¡Œå¯¹æ¯”è¯„æµ‹åï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€è‡´ç»“è®ºï¼š</p>
<p><strong>å³ä½¿æ˜¯æ’è¡Œæ¦œå‰åˆ—çš„å¤§æ¨¡å‹ï¼Œåœ¨æ•°æ®åº“ç‰ˆæœ¬ä¸ç»†èŠ‚é—®é¢˜ä¸Šï¼Œä»ç„¶æ™®éå­˜åœ¨å¹»è§‰ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9228b0db11ca4895a6a794e9f3792760~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5Y-v55Sf5byA5rqQ56S-5Yy6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767245931&amp;x-signature=ZS7SaFM04ZzWv5zmVBm6isoEcQI%3D" alt="" loading="lazy"/></p>
<p>å…³é”®ç»“è®ºåŒ…æ‹¬ï¼š</p>
<ul>
<li>å•é æ¨¡å‹â€œè‡ªèº«çŸ¥è¯†â€å›ç­”æ•°æ®åº“å…¼å®¹é—®é¢˜ï¼Œå¯é æ€§ä¸è¶³</li>
<li><strong>ç»“åˆè”ç½‘æœç´¢ä¼šæœ‰æ˜æ˜¾æå‡ï¼Œä½†ä»æ— æ³•ä¿è¯ä¸€è‡´æ­£ç¡®</strong></li>
</ul>
<h3 data-id="heading-3">ğŸ“Œ å…¸å‹æµ‹è¯•é—®é¢˜ç¤ºä¾‹</h3>
<ul>
<li>OceanBaseï¼ˆMySQL æ¨¡å¼ï¼‰ä»å“ªä¸ªç‰ˆæœ¬å¼€å§‹æ”¯æŒä¸´æ—¶è¡¨ï¼Ÿ</li>
<li>GaussDB v2.0_3.x é›†ä¸­å¼ç‰ˆæœ¬æ˜¯å¦æ”¯æŒ <code>ON COMMIT DROP</code>ï¼Ÿ</li>
<li>GaussDB v2.0_3.x é›†ä¸­å¼ç‰ˆæœ¬æ˜¯å¦å†…ç½® UUID ç”Ÿæˆå‡½æ•°ï¼Ÿ</li>
</ul>
<p>è¿™äº›é—®é¢˜åœ¨ DBA çœ‹æ¥æ˜¯ <strong>ç¡®å®šä¸”å¯æŸ¥è¯çš„äº‹å®</strong>ï¼Œä½†å¤§æ¨¡å‹å´é¢‘ç¹å‡ºç°ï¼š</p>
<ul>
<li>ç‰ˆæœ¬å·é”™è¯¯</li>
<li>åŠŸèƒ½â€œå‡­ç©ºå­˜åœ¨â€</li>
<li>è¡Œä¸ºæè¿°ä¸å®˜æ–¹æ–‡æ¡£ä¸ä¸€è‡´</li>
</ul>
<p>è¿™æ„å‘³ç€ï¼š</p>
<blockquote>
<p>å¦‚æœç›´æ¥è®©å¤§æ¨¡å‹â€œè‡ªç”±ç”Ÿæˆâ€è¿ç§» SQLï¼Œé£é™©æ˜¯ä¸å¯æ§çš„ã€‚</p>
</blockquote>
<h2 data-id="heading-4">ä¸‰ã€SQLShift çš„æ ¸å¿ƒæ€è·¯</h2>
<p>æ­£æ˜¯åŸºäºä¸Šè¿°è®¤çŸ¥ï¼Œ<strong>SQLShift</strong> ä»ä¸€å¼€å§‹å°±æ˜ç¡®äº†ä¸€æ¡æŠ€æœ¯è·¯çº¿ï¼š</p>
<p><strong>AI æ˜¯èƒ½åŠ›æ”¾å¤§å™¨ï¼Œä½†ä¸èƒ½æ˜¯å”¯ä¸€åˆ¤æ–­æºã€‚</strong></p>
<h3 data-id="heading-5">SQLShift çš„å®šä½</h3>
<p><strong>SQLShift æ˜¯ä¸€æ¬¾ä¸“æ³¨äºæ•°æ®åº“éè¡¨å¯¹è±¡çš„æ™ºèƒ½æ–¹è¨€è½¬æ¢å·¥å…·</strong>ï¼Œä½†å®ƒçš„â€œæ™ºèƒ½â€å¹¶éå•ä¸€æ¨¡å‹èƒ½åŠ›ï¼Œè€Œæ˜¯ä¸€ä¸ª <strong>å·¥ç¨‹åŒ–çš„ AI è¿ç§»ä½“ç³»</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4642ddebdf3f4adaa7d577c0a8ddfd9a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5Y-v55Sf5byA5rqQ56S-5Yy6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767245931&amp;x-signature=jEAyjOYXD2hz%2Fid6R2f8liVp5MI%3D" alt="" loading="lazy"/></p>
<p>ğŸ‘‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fsqlshift.cn%2Fapp%2Ftask_detail%3Ftask_id%3D578cb98b-a121-41a6-930a-4cc271ef0749%26task_name%3DDemo%26detail_type%3Dshare_detail%26code%3D83103ce2-9167-439c-a03c-532c911fb516" target="_blank" title="https://sqlshift.cn/app/task_detail?task_id=578cb98b-a121-41a6-930a-4cc271ef0749&amp;task_name=Demo&amp;detail_type=share_detail&amp;code=83103ce2-9167-439c-a03c-532c911fb516" ref="nofollow noopener noreferrer">å³åˆ»ä½“éªŒ</a></p>
<h2 data-id="heading-6">å››ã€SQLShift å¦‚ä½•è®© AI åœ¨è¿ç§»åœºæ™¯ä¸­â€œå¯æ§â€</h2>
<h3 data-id="heading-7">1ï¸âƒ£ é¢†åŸŸçŸ¥è¯†å¾®è°ƒï¼Œè€Œéé€šç”¨é—®ç­”</h3>
<p><strong>SQLShift</strong> å¹¶ä¸ä¾èµ–æ¨¡å‹çš„â€œé€šè¯†è®°å¿†â€ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>ä½¿ç”¨ æ•°æ®åº“å®˜æ–¹æ–‡æ¡£ã€è¯­æ³•è§„èŒƒã€æœ€ä½³å®è·µ</li>
<li>å¼•å…¥ çœŸå®è¿ç§»é¡¹ç›®ä¸­çš„å­˜å‚¨è¿‡ç¨‹ã€å‡½æ•° Case</li>
<li>é€šè¿‡ DBA äººå·¥æ ¡éªŒ æ„å»ºé«˜è´¨é‡è®­ç»ƒä¸éªŒè¯é›†</li>
</ul>
<p>ç›®æ ‡åªæœ‰ä¸€ä¸ªï¼š</p>
<blockquote>
<p>è®©æ¨¡å‹å­¦ä¹ â€œæ•°æ®åº“çœŸå®ä¸–ç•Œâ€ï¼Œè€Œä¸æ˜¯äº’è”ç½‘å°è±¡ã€‚</p>
</blockquote>
<h3 data-id="heading-8">2ï¸âƒ£ å¤šé‡æ ¡éªŒæœºåˆ¶ï¼Œè€Œéä¸€æ¬¡æ€§ç”Ÿæˆ</h3>
<p>åœ¨ SQLShift ä¸­ï¼ŒAI ç”Ÿæˆå¹¶ä¸æ˜¯ç»ˆç‚¹ï¼Œè€Œæ˜¯èµ·ç‚¹ï¼š</p>
<ul>
<li><strong>è¯­æ³•æ ¡éªŒ</strong>ï¼šé€šè¿‡ç›®æ ‡æ•°æ®åº“è§£æå™¨éªŒè¯æ˜¯å¦å¯æ‰§è¡Œ</li>
<li><strong>è¯­ä¹‰æ ¡éªŒï¼ˆæ¢ç´¢ä¸­ï¼‰</strong>ï¼šç”¨ç¬¬äºŒæ¨¡å‹å®¡æŸ¥é«˜é£é™©é€»è¾‘</li>
<li><strong>å†å² Case å¯¹ç…§</strong>ï¼šå¯¹æ¯”å·²çŸ¥å…¼å®¹ / ä¸å…¼å®¹æ¨¡å¼</li>
</ul>
<p>é¿å…â€œçœ‹èµ·æ¥å¯¹ï¼Œå®é™…ä¸Šé”™â€çš„éšæ€§é£é™©ã€‚</p>
<h3 data-id="heading-9">3ï¸âƒ£ äººæœºååŒï¼Œè€Œä¸æ˜¯â€œé»‘ç›’ AIâ€</h3>
<p>å¯¹äºå¤æ‚åº¦æé«˜æˆ–æ¨¡å‹ç½®ä¿¡åº¦ä¸è¶³çš„ä»£ç ï¼š</p>
<ul>
<li><strong>SQLShift</strong> ä¼šæ˜¾å¼æ ‡æ³¨é£é™©ç‚¹</li>
<li>ç»™å‡ºè½¬æ¢ä¾æ®ä¸ä¿®æ”¹å»ºè®®</li>
<li>DBA å¯å¿«é€Ÿç¡®è®¤å¹¶è®© <strong>SQLShift</strong> è‡ªåŠ¨è°ƒæ•´</li>
</ul>
<p>ç”¨æˆ·çš„æ¯ä¸€æ¬¡åé¦ˆï¼Œéƒ½ä¼šåå‘è¿›å…¥æ¨¡å‹ä¸è§„åˆ™çš„ä¼˜åŒ–é—­ç¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1659b7410aa4bfd9564556c229af68c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54ix5Y-v55Sf5byA5rqQ56S-5Yy6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767245931&amp;x-signature=rTBm3nkANQXmVYJ5MF79c8gpmRo%3D" alt="" loading="lazy"/></p>
<p>ğŸ‘‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fsqlshift.cn%2Fapp%2Ftask_detail%3Ftask_id%3D578cb98b-a121-41a6-930a-4cc271ef0749%26task_name%3DDemo%26detail_type%3Dshare_detail%26code%3D83103ce2-9167-439c-a03c-532c911fb516" target="_blank" title="https://sqlshift.cn/app/task_detail?task_id=578cb98b-a121-41a6-930a-4cc271ef0749&amp;task_name=Demo&amp;detail_type=share_detail&amp;code=83103ce2-9167-439c-a03c-532c911fb516" ref="nofollow noopener noreferrer">å³åˆ»ä½“éªŒ</a></p>
<h3 data-id="heading-10">4ï¸âƒ£ æ¨¡å—åŒ–ä¸åˆ†æ²»ï¼Œè§£å†³è¶…å¤§å¯¹è±¡é—®é¢˜</h3>
<p>é¢å¯¹åŠ¨è¾„ä¸Šåƒè¡Œçš„å­˜å‚¨è¿‡ç¨‹ï¼š</p>
<ul>
<li><strong>SQLShift</strong> å°è¯•å…ˆç”±æ¨¡å‹ æ‹†è§£é€»è¾‘æ¨¡å—</li>
<li>å†å¯¹æ¯ä¸ªå­æ¨¡å—åˆ†åˆ«è½¬æ¢</li>
<li>æœ€ç»ˆåœ¨ç›®æ ‡ç«¯é‡æ–°ç»„åˆ</li>
</ul>
<p>è¿™æ—¢è§£å†³äº†ä¸Šä¸‹æ–‡é•¿åº¦é™åˆ¶ï¼Œä¹Ÿæ˜¾è‘—æå‡äº†å‡†ç¡®ç‡ã€‚</p>
<h2 data-id="heading-11">äº”ã€SQLShift çš„ä»·å€¼ï¼šä¸æ˜¯æ›¿ä»£ DBAï¼Œè€Œæ˜¯é™ä½è¿ç§»çš„ä¸ç¡®å®šæ€§</h2>
<p>åœ¨æ•°æ®åº“è¿ç§»è¿™ä»¶äº‹ä¸Šï¼Œä¸ç¡®å®šæ€§æœ¬èº«å°±æ˜¯æœ€å¤§çš„æˆæœ¬ã€‚</p>
<p><strong>SQLShift</strong> çš„æ ¸å¿ƒä»·å€¼åœ¨äºï¼š</p>
<ul>
<li>å°†å¤§é‡éšæ€§æ–¹è¨€å·®å¼‚æ˜¾æ€§åŒ–</li>
<li>å°†â€œé ç»éªŒçŒœâ€çš„è¿ç§»è¿‡ç¨‹ï¼Œå˜æˆâ€œæœ‰ä¾æ®ã€æœ‰æ ¡éªŒâ€çš„å·¥ç¨‹æµç¨‹</li>
<li>å¤§å¹…å‡å°‘ DBA åœ¨éè¡¨å¯¹è±¡è¿ç§»ä¸­çš„é‡å¤åŠ³åŠ¨ä¸è¸©å‘æˆæœ¬</li>
</ul>
<p>æ— è®ºæ˜¯åˆçº§ DBAï¼Œè¿˜æ˜¯ç»éªŒä¸°å¯Œçš„ä¸“å®¶ï¼Œéƒ½å¯ä»¥åœ¨ SQLShift çš„è¾…åŠ©ä¸‹ï¼š</p>
<blockquote>
<p>æŠŠæ—¶é—´ç”¨åœ¨åˆ¤æ–­ä¸å†³ç­–ä¸Šï¼Œè€Œä¸æ˜¯æ¶ˆè€—åœ¨æ— ç©·çš„è¯•é”™ä¸­ã€‚</p>
</blockquote>
<h2 data-id="heading-12">ç»“è¯­</h2>
<p>AI æ­£åœ¨æ”¹å˜æ•°æ®åº“è¿ç§»ï¼Œä½†<strong>çœŸæ­£å¯ç”¨çš„ AIï¼Œä¸€å®šæ˜¯è¢«å·¥ç¨‹ä½“ç³»çº¦æŸå’ŒéªŒè¯è¿‡çš„ AI</strong>ã€‚</p>
<p><strong>SQLShift</strong> é€‰æ‹©äº†ä¸€æ¡æ›´æ…¢ã€ä½†æ›´ç¨³çš„è·¯ï¼š</p>
<p>ä¸è¿½æ±‚â€œçœ‹èµ·æ¥å¾ˆèªæ˜â€ï¼Œè€Œè¿½æ±‚ <strong>åœ¨çœŸå®æ•°æ®åº“ä¸Šèƒ½è·‘ã€èƒ½ç”¨ã€èƒ½äº¤ä»˜</strong>ã€‚
è¿™ï¼Œæ‰æ˜¯ AI åœ¨æ•°æ®åº“è¿ç§»åœºæ™¯ä¸­çœŸæ­£çš„ä»·å€¼æ‰€åœ¨ã€‚</p>
<h2 data-id="heading-13">ğŸ é™æ—¶æ´»åŠ¨è¯´æ˜</h2>
<p>ä¸ºé™ä½å¤§å®¶ä½“éªŒæ™ºèƒ½è¿ç§»èƒ½åŠ›çš„é—¨æ§›ï¼Œ<strong>SQLShift</strong> å½“å‰å¼€æ”¾æ´»åŠ¨æœŸå†…å…è´¹ä½¿ç”¨ï¼Œæ‰€æœ‰ç”¨æˆ·å‡å¯åœ¨çº¿ä½“éªŒ AI é©±åŠ¨çš„éè¡¨å¯¹è±¡è¯­æ³•è½¬æ¢èƒ½åŠ›ã€‚</p>
<p>ğŸ“… <strong>æ´»åŠ¨æˆªæ­¢æ—¶é—´</strong>ï¼š2025 å¹´ 12 æœˆ 30 æ—¥</p>
<p>å¦‚æœä½ æ­£é¢ä¸´æ•°æ®åº“è¿ç§»ï¼Œå°¤å…¶æ˜¯å­˜å‚¨è¿‡ç¨‹è¿™ç§éè¡¨å¯¹è±¡è¿ç§»éš¾é¢˜ï¼Œæ¬¢è¿åœ¨æ´»åŠ¨æœŸå†…å…è´¹å‚ä¸ä½“éªŒï¼Œä¸ <strong>SQLShift</strong> ä¸€èµ·éªŒè¯ AI åœ¨çœŸå®è¿ç§»åœºæ™¯ä¸­çš„ä»·å€¼ã€‚</p>
<p>ğŸ‘‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fsqlshift.cn%2Fapp%2Ftask_detail%3Ftask_id%3D578cb98b-a121-41a6-930a-4cc271ef0749%26task_name%3DDemo%26detail_type%3Dshare_detail%26code%3D83103ce2-9167-439c-a03c-532c911fb516" target="_blank" title="https://sqlshift.cn/app/task_detail?task_id=578cb98b-a121-41a6-930a-4cc271ef0749&amp;task_name=Demo&amp;detail_type=share_detail&amp;code=83103ce2-9167-439c-a03c-532c911fb516" ref="nofollow noopener noreferrer">å³åˆ»ä½“éªŒ</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨URLPattern APIæ„å»ºè‡ªå·±çš„è·¯ç”±å™¨ ğŸ›£ï¸]]></title>    <link>https://juejin.cn/post/7587263750250299443</link>    <guid>https://juejin.cn/post/7587263750250299443</guid>    <pubDate>2025-12-25T03:40:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587263750250299443" data-draft-id="7587313610696671259" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨URLPattern APIæ„å»ºè‡ªå·±çš„è·¯ç”±å™¨ ğŸ›£ï¸"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-25T03:40:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Yanni4Night"/> <meta itemprop="url" content="https://juejin.cn/user/4089838983724520"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨URLPattern APIæ„å»ºè‡ªå·±çš„è·¯ç”±å™¨ ğŸ›£ï¸
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4089838983724520/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Yanni4Night
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T03:40:09.000Z" title="Thu Dec 25 2025 03:40:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fjschof.dev%2Fposts%2F2025%2F11%2Fbuild-your-own-router%2F" target="_blank" title="https://jschof.dev/posts/2025/11/build-your-own-router/" ref="nofollow noopener noreferrer">jschof.dev/posts/2025/â€¦</a></p>
</blockquote>
<p>URLPattern ç°åœ¨å·²ç»åœ¨æ‰€æœ‰æµè§ˆå™¨ä¸­å¯ç”¨äº†ï¼æ‰€ä»¥æˆ‘æƒ³æ·±å…¥ç ”ç©¶ä¸€ä¸‹ï¼Œçœ‹çœ‹å¦‚ä½•ä½¿ç”¨åŸç”Ÿ JavaScript å’Œæµè§ˆå™¨ API åˆ¶ä½œä¸€ä¸ªç®€å•çš„ SPA è·¯ç”±å™¨ã€‚æˆ‘ä»¬åº”è¯¥èƒ½å¤Ÿåˆ›å»ºä¸€ä¸ªç»„ä»¶ï¼Œå®ƒæ¥å—è·¯ç”±å™¨é…ç½®ï¼Œå¹¶æ ¹æ®æµè§ˆå™¨ URL æ¸²æŸ“ç›¸åº”çš„ç»„ä»¶ã€‚</p>
<h2 data-id="heading-0">URLPattern() æ˜¯åšä»€ä¹ˆçš„ï¼ŸğŸ“</h2>
<p>å¯¹äºè·¯ç”±å™¨æ¥è¯´ï¼Œæ¡ä»¶æ¸²æŸ“ç»„ä»¶å¹¶ä¸æ˜¯å›°éš¾çš„éƒ¨åˆ†ã€‚å›°éš¾çš„æ˜¯å‡†ç¡®æµ‹è¯•æµè§ˆå™¨ URLï¼Œä»¥ç¡®å®šåº”è¯¥æ¸²æŸ“å“ªä¸ªç»„ä»¶ã€‚è€Œä¸”ä¸ä»…å¦‚æ­¤ï¼Œæˆ‘ä»¬è¿˜éœ€è¦èƒ½å¤Ÿæ•è·è·¯ç”±çš„åŠ¨æ€éƒ¨åˆ†ï¼ˆæ¯”å¦‚åƒ <code>/posts/{post_id}</code> è¿™æ ·çš„è·¯å¾„ï¼‰ã€‚</p>
<p>ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€äº›ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•æµ‹è¯•è·¯ç”± URL æ˜¯å¦åŒ¹é…æŸä¸ªæ¨¡å¼ï¼ç„¶åä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªæœºåˆ¶æ¥åˆ›å»ºä¸€ä¸ªå…·æœ‰æ˜“äºé…ç½®è·¯å¾„çš„è·¯ç”±å™¨ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> catUrlPattern = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLPattern</span>({ <span class="hljs-attr">pathname</span>: <span class="hljs-string">"/cat"</span> });
catUrlPattern.<span class="hljs-title function_">test</span>(<span class="hljs-string">"http://www.jschof.dev/cat"</span>); <span class="hljs-comment">// True!</span>
catUrlPattern.<span class="hljs-title function_">test</span>(<span class="hljs-string">"http://www.jschof.dev/dog"</span>); <span class="hljs-comment">// False!</span>
catUrlPattern.<span class="hljs-title function_">test</span>({ <span class="hljs-attr">pathname</span>: <span class="hljs-string">"/cat"</span> }); <span class="hljs-comment">// True!</span>
catUrlPattern.<span class="hljs-title function_">test</span>(<span class="hljs-string">"http://www.jschof.dev/cat/"</span>); <span class="hljs-comment">// False!</span>
catUrlPattern.<span class="hljs-title function_">test</span>(<span class="hljs-string">"http://www.jschof.dev/cat/other-things?yes"</span>); <span class="hljs-comment">// False!</span>
</code></pre>
<p>ä½ å¯èƒ½ä¼šå¯¹ä¸Šé¢çš„ç¬¬å››ä¸ªä¾‹å­æ„Ÿåˆ°æƒŠè®¶ã€‚<code>/cat</code> å’Œ <code>/cat/</code> æ˜¯æœ‰åŒºåˆ«çš„ã€‚æ‰€ä»¥ä¸ºäº†å¤„ç†è¿™ç§æƒ…å†µï¼Œä½ å¯ä»¥åœ¨ä¸€ä¸ªç”¨å¤§æ‹¬å·æ‹¬èµ·æ¥çš„ç»„ä¸­ä½¿æ¨¡å¼å¯é€‰åœ°åŒ…å«ä¸€ä¸ªç»“å°¾æ–œæ ï¼Œå¹¶ä½¿ç”¨ <code>?:</code> æ ‡è®°å®ƒä¸ºå¯é€‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> catUrlPattern = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLPattern</span>({ <span class="hljs-attr">pathname</span>: <span class="hljs-string">"/cat{/}?"</span> });
catUrlPattern.<span class="hljs-title function_">test</span>(<span class="hljs-string">"http://www.jschof.dev/cat"</span>); <span class="hljs-comment">// True!</span>
catUrlPattern.<span class="hljs-title function_">test</span>({ <span class="hljs-attr">pathname</span>: <span class="hljs-string">"/cat/"</span> }); <span class="hljs-comment">// True!</span>
catUrlPattern.<span class="hljs-title function_">test</span>(<span class="hljs-string">"http://www.jschof.dev/cat/"</span>); <span class="hljs-comment">// True!</span>
catUrlPattern.<span class="hljs-title function_">test</span>(<span class="hljs-string">"http://www.jschof.dev/cat/other-things?yes"</span>); <span class="hljs-comment">// False!</span>
</code></pre>
<p>åˆä¸€ä¸ªæƒŠå–œï¼ä½ å¯èƒ½æœŸæœ›å¯ä»¥æ¥å— <code>/cat/</code> åé¢çš„æ›´å¤šå†…å®¹ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œéœ€è¦åŒ…å«ä¸€ä¸ªé€šé…ç¬¦æ˜Ÿå·ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> catUrlPattern = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLPattern</span>({ <span class="hljs-attr">pathname</span>: <span class="hljs-string">"/cat{/}?*"</span> });
catUrlPattern.<span class="hljs-title function_">test</span>(<span class="hljs-string">"http://www.jschof.dev/cat"</span>); <span class="hljs-comment">// True!</span>
catUrlPattern.<span class="hljs-title function_">test</span>({ <span class="hljs-attr">pathname</span>: <span class="hljs-string">"/cat/"</span> }); <span class="hljs-comment">// True!</span>
catUrlPattern.<span class="hljs-title function_">test</span>(<span class="hljs-string">"http://www.jschof.dev/cat/"</span>); <span class="hljs-comment">// True!</span>
catUrlPattern.<span class="hljs-title function_">test</span>(<span class="hljs-string">"http://www.jschof.dev/cat/other-things?yes"</span>); <span class="hljs-comment">// True!</span>
</code></pre>
<h2 data-id="heading-1">æˆ‘ä»¬ä»å“ªé‡Œå¼€å§‹ï¼ŸğŸ“</h2>
<p>æˆ‘å°†ä½¿ç”¨ä¸€ä¸ªé…ç½®å¯¹è±¡æ•°ç»„ï¼Œå°† URL è·¯ç”±ä¸ç‰¹å®šçš„ Web ç»„ä»¶å…³è”èµ·æ¥ã€‚è¿™ä¸ä½ ä½¿ç”¨ vue-router åˆ›å»ºè·¯ç”±å™¨çš„æ–¹å¼éå¸¸ç›¸ä¼¼ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> routerConfig = [
  { <span class="hljs-attr">pathName</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLPattern</span>(<span class="hljs-string">"/home{/}?"</span>), <span class="hljs-attr">component</span>: <span class="hljs-string">"my-home"</span> },
  { <span class="hljs-attr">pathName</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLPattern</span>(<span class="hljs-string">"/posts{/}?"</span>), <span class="hljs-attr">component</span>: <span class="hljs-string">"my-posts"</span> },
  { <span class="hljs-attr">pathName</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLPattern</span>(<span class="hljs-string">"/about{/}?"</span>), <span class="hljs-attr">component</span>: <span class="hljs-string">"my-about"</span> },
];
</code></pre>
<p>é…ç½®å¯¹è±¡çš„é¡ºåºå¾ˆé‡è¦ã€‚æˆ‘ä»¬ä¼šé€ä¸ªæµ‹è¯•æ¯ä¸ªæ¨¡å¼ï¼Œå¦‚æœæ‰¾åˆ°åŒ¹é…é¡¹ï¼Œå°±æ¸²æŸ“é‚£ä¸ª Web ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> config <span class="hljs-keyword">of</span> routerConfig) {
  <span class="hljs-keyword">if</span> (config.<span class="hljs-property">pathName</span>.<span class="hljs-title function_">test</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span>)) {
    <span class="hljs-comment">// æ¸²æŸ“ config.componentï¼</span>
    <span class="hljs-keyword">return</span>;
  }
}
<span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> å¤„ç† 404ï¼</span>
</code></pre>
<p>å¦‚ä½•è¿›è¡Œæ¸²æŸ“å‘¢ï¼Ÿè¿™å°†æ˜¯æˆ‘ä»¬æ”¾ç½®æ‰€æœ‰è¿™äº›é€»è¾‘çš„ Web ç»„ä»¶çš„å·¥ä½œã€‚è¯¥ç»„ä»¶ä¼šæŸ¥çœ‹å½“å‰çª—å£ URLï¼Œå°†å…¶ä¸æˆ‘ä»¬ç”¨ URLPattern è®¾ç½®çš„æ‰€æœ‰è·¯ç”±å™¨é…ç½®è¿›è¡Œæµ‹è¯•ï¼Œç„¶ååˆ›å»ºå¹¶æ¸²æŸ“é€‚å½“çš„ Web ç»„ä»¶ä½œä¸ºå­å…ƒç´ ã€‚</p>
<p>æœ‰äº›æ¡†æ¶ç§°è¿™ä¸ªè·¯ç”±å™¨ä¸º"å‡ºå£"ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> routerConfig = [
  { <span class="hljs-attr">pathName</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLPattern</span>(<span class="hljs-string">"/home{/}?"</span>), <span class="hljs-attr">component</span>: <span class="hljs-string">"my-home"</span> },
  { <span class="hljs-attr">pathName</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLPattern</span>(<span class="hljs-string">"/posts{/}?"</span>), <span class="hljs-attr">component</span>: <span class="hljs-string">"my-posts"</span> },
  { <span class="hljs-attr">pathName</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLPattern</span>(<span class="hljs-string">"/about{/}?"</span>), <span class="hljs-attr">component</span>: <span class="hljs-string">"my-about"</span> },
];
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRouter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">HTMLElement</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-keyword">const</span> matchedComponent = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getRouteMatch</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">renderComponent</span>(matchedComponent);
  }
  <span class="hljs-title function_">getRouteMatch</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> config <span class="hljs-keyword">of</span> routerConfig) {
      <span class="hljs-keyword">if</span> (config.<span class="hljs-property">pathName</span>.<span class="hljs-title function_">test</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span>)) {
        <span class="hljs-keyword">return</span> config.<span class="hljs-property">component</span>;
      }
    }
    <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> å¤„ç† 404ï¼</span>
  }
  <span class="hljs-title function_">renderComponent</span>(<span class="hljs-params">component</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">const</span> viewElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(component);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">appendChild</span>(viewElement);
  }
}
customElements.<span class="hljs-title function_">define</span>(<span class="hljs-string">"my-router"</span>, <span class="hljs-title class_">MyRouter</span>);
</code></pre>
<p>å½“ç„¶ï¼Œä½ è¿˜éœ€è¦æ³¨å†Œ <code>my-home</code>ã€<code>my-posts</code> å’Œ <code>my-about</code> è¿™äº› Web ç»„ä»¶ã€‚</p>
<p>è¿™æ ·æˆ‘ä»¬å°±æœ‰äº†ä¸€ä¸ªè·¯ç”±å™¨ï¼Œå®ƒä¼šåœ¨é¡µé¢åŠ è½½æ—¶æ¸²æŸ“é€‚å½“çš„ Web ç»„ä»¶ã€‚ä¸è¿‡æˆ‘ä»¬è¿˜æœ‰å¾ˆå¤šå·¥ä½œè¦åšã€‚å¦‚æœæœ‰äººç‚¹å‡»é“¾æ¥æ€ä¹ˆåŠï¼Ÿå¦‚æœæœ‰äººä½¿ç”¨æµè§ˆå™¨å¯¼èˆªå‰è¿›æˆ–åé€€æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬éœ€è¦å¤„ç†è¿™äº›æƒ…å†µï¼Œå¹¸è¿çš„æ˜¯è¿™å¹¶ä¸å¤ªå›°éš¾ã€‚</p>
<h2 data-id="heading-2">å¤„ç† SPA å¯¼èˆªå’Œé“¾æ¥ç‚¹å‡» ğŸ“</h2>
<p>æœ‰ä¸€ç‚¹éœ€è¦æ„è¯†åˆ°çš„æ˜¯ï¼Œå¦‚æœä½ å¯¼èˆªåˆ° <code>http://www.myblog.com/some/path</code>ï¼ŒæœåŠ¡å™¨é€šå¸¸ä¼šå°è¯•åœ¨åç«¯è§£æ <code>/some/path</code>ã€‚å®ƒå®é™…ä¸Šå¯èƒ½ä¼šå¯»æ‰¾ "some" å’Œ "path" æ–‡ä»¶å¤¹ã€‚ä½†åœ¨ SPA ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰æ–‡ä»¶å¤¹â€”â€”æˆ‘ä»¬åªæœ‰ä¸€ä¸ªå¤„ç†è™šæ‹Ÿè·¯å¾„çš„ index HTML æ–‡ä»¶ã€‚æ‰€æœ‰è¿™äº›éƒ½åœ¨å®¢æˆ·ç«¯ç”¨ JS å®Œæˆï¼æ— è®ºæˆ‘ä»¬è¦åˆ°å“ªä¸ªè·¯å¾„ï¼ŒæœåŠ¡å™¨å®é™…ä¸Šåªéœ€è¦æä¾› index é¡µé¢ã€‚ç„¶åå®¢æˆ·ç«¯ä¼šæ¥ç®¡ï¼Œä½¿ç”¨æˆ‘ä»¬çš„æ–° URLPattern å¹¶å¤„ç†æ¸²æŸ“é€‚å½“çš„ç»„ä»¶ã€‚</p>
<p>å¯¹äºé…ç½® Vite æ¥è¯´ï¼Œè¿™éå¸¸ç®€å•ã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªåä¸º <code>spa</code> çš„é…ç½®ã€‚åªéœ€æ›´æ–°ä½ çš„ vite é…ç½®ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">"vite"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">appType</span>: <span class="hljs-string">"spa"</span>,
});
</code></pre>
<p>è¿™å¯¹äºä½ çš„ Vite æœ¬åœ°æœåŠ¡å™¨æ¥è¯´æ•ˆæœå¾ˆå¥½ã€‚ä½†ä¸å¹¸çš„æ˜¯ï¼Œè¿™å°†å–å†³äºä½ éƒ¨ç½²çš„ä½ç½®ä»¥åŠä½ ä½¿ç”¨çš„å…¶ä»–æ¡†æ¶/å¼€å‘æœåŠ¡å™¨ã€‚å¯¹äºåƒ netlify è¿™æ ·çš„åœ°æ–¹ï¼Œä½ éœ€è¦åœ¨ä½ çš„ netlify é…ç½®ä¸­è®¾ç½®é‡å®šå‘è§„åˆ™ã€‚ä½ å¯èƒ½éœ€è¦æŸ¥é˜… Stack Overflowã€Google æˆ–ä½ é€‰æ‹©çš„ LLM æ¥äº†è§£å¦‚ä½•é’ˆå¯¹ä½ çš„ç‰¹å®šæƒ…å†µæ‰§è¡Œæ­¤æ“ä½œã€‚</p>
<p>ä½†ä¸€æ—¦ä½ è®¾ç½®å¥½æœåŠ¡å™¨é…ç½®å’Œé‡å®šå‘ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹å¤„ç†ç‚¹å‡»äº‹ä»¶äº†ï¼</p>
<p>æˆ‘ä»¬åŸºæœ¬ä¸Šæƒ³æ‹¦æˆªä»»ä½•é“¾æ¥ç‚¹å‡»ï¼Œå¹¶é˜»æ­¢æµè§ˆå™¨æ­£å¸¸å¯¼èˆªã€‚è¿™æ„å‘³ç€æˆ‘ä»¬è¦å¯¹æ‰€æœ‰ç‚¹å‡»äº‹ä»¶è°ƒç”¨ <code>preventDefault()</code>ï¼Œå¹¶æå–é“¾æ¥çš„ç›®æ ‡æ¥ä¸æˆ‘ä»¬çš„ URL æ¨¡å¼è¿›è¡Œæµ‹è¯•ã€‚è¿™è®©æˆ‘ä»¬çŸ¥é“åº”è¯¥æ¸²æŸ“å“ªä¸ªç»„ä»¶ï¼Œç„¶åæˆ‘ä»¬æ‰‹åŠ¨å°† URL è®¾ç½®ä¸ºé”šæ ‡ç­¾æŒ‡å‘çš„å†…å®¹ã€‚çœ‹èµ·æ¥æˆ‘ä»¬æ­£åœ¨æ›´æ”¹é¡µé¢ï¼Œä½†å®é™…ä¸Šæˆ‘ä»¬æ˜¯åœ¨æ¨¡æ‹Ÿé¡µé¢è¿‡æ¸¡ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦åœ¨è·¯ç”±å™¨ç»„ä»¶è¿æ¥åˆ° DOM æ—¶è®¾ç½®ä¸€ä¸ªç‚¹å‡»å¤„ç†å™¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRouter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">HTMLElement</span> {
  <span class="hljs-comment">//...</span>
  <span class="hljs-title function_">connectedCallback</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"click"</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleClicks</span>);
  }
  handleClicks = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (event.<span class="hljs-property">target</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">HTMLAnchorElement</span>) {
      <span class="hljs-comment">// ä¸è¦åƒé€šå¸¸é‚£æ ·å¤„ç†è¿™ä¸ªé“¾æ¥ï¼</span>
      event.<span class="hljs-title function_">preventDefault</span>();
      <span class="hljs-comment">// æ‰‹åŠ¨è®¾ç½® URL</span>
      <span class="hljs-keyword">const</span> toUrl = event.<span class="hljs-property">target</span>.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">"href"</span>);
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">pushState</span>({}, <span class="hljs-string">""</span>, toUrl);
      <span class="hljs-comment">// ç°åœ¨ URL å·²ç»è®¾ç½®å¥½äº†ï¼Œæ‰§è¡Œé€šå¸¸çš„åŒ¹é…å’Œæ¸²æŸ“ï¼</span>
      <span class="hljs-keyword">const</span> matchedComponent = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getRouteMatch</span>();
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">renderComponent</span>(matchedComponent);
    }
  };
  <span class="hljs-title function_">disconnectedCallback</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"click"</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleClicks</span>);
  }
}
</code></pre>
<p>å½“ç„¶ï¼Œç¡®ä¿ä½ åœ¨ <code>disconnectedCallback</code> ä¸­æ¸…ç†è¿™äº›å¤„ç†å™¨ï¼</p>
<p>å½“ç”¨æˆ·ç‚¹å‡»é“¾æ¥æ—¶ï¼Œä»–ä»¬ä¼šçœ‹åˆ° URL æ”¹å˜ï¼Œé¡µé¢è¿‡æ¸¡ï¼Œç”šè‡³æµè§ˆå™¨å¯¼èˆªå†å²ä¸­ä¼šæœ‰ä¸€ä¸ªæ–°æ¡ç›®ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿æµè§ˆå™¨ä¸ä¼šå®é™…å‰è¿›æˆ–åé€€ï¼Œè€Œæ˜¯åœ¨ç‚¹å‡»å‰è¿›/åé€€æŒ‰é’®æ—¶é’©å­åˆ°æˆ‘ä»¬çš„è·¯ç”±å™¨ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ‹¦æˆªäº†æ‰€æœ‰é”šæ ‡ç­¾ä¸Šçš„ç‚¹å‡»ï¼Œæ— è®ºç‚¹å‡»æ˜¯åœ¨æˆ‘ä»¬çš„è·¯ç”±å™¨ç»„ä»¶å†…éƒ¨è¿˜æ˜¯å¤–éƒ¨ã€‚ä½ å¯èƒ½åªæƒ³å¤„ç†è¿™ä¸ªè·¯ç”±å™¨ç»„ä»¶å†…éƒ¨çš„ç‚¹å‡»ï¼Œè¿™æ ·ä½ å°±ä¸ä¼šæ‰¿æ‹…æ•´ä¸ªé¡µé¢ä¸Šé“¾æ¥çš„è´£ä»»ã€‚</p>
</blockquote>
<blockquote>
<p>å¦å¤–ï¼Œè¯·æ³¨æ„ï¼Œæˆ‘ä»¬ç”šè‡³è¿˜æ²¡æœ‰è§¦åŠå¦‚ä½•å¤„ç†å¤–éƒ¨é“¾æ¥ã€‚è¿™éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œä½†è¿™è¶…å‡ºäº†è¿™ç¯‡åšå®¢æ–‡ç« çš„èŒƒå›´ã€‚</p>
</blockquote>
<h2 data-id="heading-3">æœ€åä¸€ä¸ªç»†èŠ‚ï¼šæµè§ˆå™¨å¯¼èˆª ğŸ“</h2>
<p>å½“æµè§ˆå™¨å‰è¿›æˆ–åé€€æ—¶ï¼ˆæ— è®ºæ˜¯é€šè¿‡ç¼–ç¨‹æ–¹å¼ <code>window.back()</code>/<code>forward()</code> è¿˜æ˜¯ç”¨æˆ·ç‚¹å‡»å‰è¿›/åé€€æŒ‰é’®ï¼‰ï¼Œéƒ½ä¼šè§¦å‘ä¸€ä¸ª <code>popstate</code> äº‹ä»¶ã€‚</p>
<p>è¿™ä¸ªäº‹ä»¶çš„å¥½å¤„æ˜¯ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ <code>window.pushState</code> æ—¶ï¼Œæµè§ˆå™¨å·²ç»åœ¨å†å²æ ˆä¸­å‰åç§»åŠ¨åˆ°äº†æˆ‘ä»¬æ¨é€çš„æ¡ç›®ã€‚æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬åªéœ€è¦ç›‘å¬è¿™ç§åé€€/å‰è¿›å¯¼èˆªä½•æ—¶å‘ç”Ÿï¼Œå¹¶æ¸²æŸ“æˆ‘ä»¬çš„ç»„ä»¶ã€‚åœ¨æŒ‰ä¸‹åé€€/å‰è¿›æŒ‰é’®åï¼ŒURL å·²ç»æ›´æ–°äº†ã€‚</p>
<p>è¿™æ˜¯æˆ‘ä»¬æœ€å°å¯è¡Œè·¯ç”±å™¨çš„æœ€åä¸€éƒ¨åˆ†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRouter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">HTMLElement</span> {
  <span class="hljs-comment">//...</span>
  <span class="hljs-title function_">connectedCallback</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"click"</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleClicks</span>);
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"popstate"</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopState</span>);
  }
  handlePopState = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> matchedComponent = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getRouteMatch</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">renderComponent</span>(matchedComponent);
  };
  <span class="hljs-title function_">disconnectedCallback</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"click"</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleClicks</span>);
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"popstate"</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopState</span>);
  }
}
</code></pre>
<h2 data-id="heading-4">ä¸€ä¸ªå·¥ä½œç¤ºä¾‹ ğŸ“</h2>
<p>å¦‚æœä½ æœ‰å…´è¶£çœ‹åˆ°å®ƒçš„å·¥ä½œåŸç†ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªåœ¨ StackBlitz ä¸Šæ„å»ºçš„ç¤ºä¾‹ã€‚</p>
<p>è¿˜æœ‰æ›´å¤šå·¥ä½œè¦åšï¼ä»¥ä¸‹æ˜¯æˆ‘å»ºè®®ç ”ç©¶çš„äº‹æƒ…ï¼š</p>
<ul>
<li>åˆ›å»ºåŠ¨æ€æ®µï¼Œå¦‚ <code>/posts/:id</code>ã€‚è¿™é‡Œæœ‰ä¸€äº›å…³äºå¤„ç†åŠ¨æ€å‚æ•°çš„æ–‡æ¡£</li>
<li>ä½¿ç”¨ <code>search</code> å¤„ç†æŸ¥è¯¢å‚æ•°</li>
<li>å¤„ç†åµŒå¥—æˆ–å­è·¯ç”±å™¨</li>
</ul>
<h2 data-id="heading-5">éœ€è¦è®°ä½çš„äº‹æƒ…... ğŸ“</h2>
<p>æˆ‘ä»¬æ­£åœ¨å¤„ç†ç›¸å½“åº•å±‚çš„ä¸œè¥¿ã€‚åƒè¿™æ ·åˆ›å»ºè‡ªå·±çš„è·¯ç”±å™¨æ¸²æŸ“å™¨å¯èƒ½ä¼šè®©ä½ æš´éœ²åœ¨ XSS æ”»å‡»ä¸­ï¼Œå¦‚æœä½ ç•™ä¸‹äº†è®©äººä»¬ç ´åä½ çš„è·¯ç”±å™¨é…ç½®çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ è®©äººä»¬ç›´æ¥åœ¨è·¯ç”±å™¨ç»„ä»¶ä¸Šè®¾ç½®é…ç½®æ•°ç»„ï¼Œæœ‰äººå¯èƒ½ä¼šåœ¨æ§åˆ¶å°ä¸­æ³¨å†Œä»–ä»¬è‡ªå·±çš„ Web ç»„ä»¶ï¼Œå¹¶å¯¼èˆªåˆ°ä»–ä»¬çš„ç»„ä»¶æ¥æ¸²æŸ“å®ƒã€‚å®é™…ä¸Šï¼Œä½ å°†å…è®¸å…¶ä»–æ–¹åœ¨ä½ çš„è·¯ç”±å™¨ä¸­è¿è¡Œä»–ä»¬çš„ä»£ç ï¼</p>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆï¼Œè‡³å°‘åœ¨æˆ‘ä»¬è®¨è®ºçš„ä¾‹å­ä¸­ï¼Œè·¯ç”±å™¨é…ç½®æ˜¯åœ¨æˆ‘ä»¬çš„è·¯ç”±å™¨ç»„ä»¶ä¸­çš„ä¸€ä¸ªç§æœ‰å˜é‡ä¸­å®šä¹‰çš„ã€‚å¦‚æœæˆ‘ä»¬å…¬å¼€è¿™ä¸ªå±æ€§ï¼Œæœ‰äººå¯ä»¥æ³¨å†Œä»–ä»¬è‡ªå·±çš„ Web ç»„ä»¶å¹¶è®©æˆ‘ä»¬çš„è·¯ç”±å™¨æ¸²æŸ“å®ƒã€‚</p>
<p>æˆ‘ä»¬å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿæˆ‘æƒ³è¯´ï¼Œæ°¸è¿œä¸è¦çº¯ç²¹åŸºäº URL çš„æŸ¥è¯¢å‚æ•°æˆ–åŠ¨æ€æ®µè¿›è¡Œæ¸²æŸ“ã€‚å§‹ç»ˆå°†å®é™…æ¸²æŸ“çš„ Web ç»„ä»¶ä¿å­˜åœ¨é™æ€åˆ—è¡¨ä¸­â€”â€”å¯èƒ½æ˜¯è·¯ç”±å™¨ä¸Šçš„ç§æœ‰å˜é‡ä¸­çš„åˆ—è¡¨ã€‚</p>
<p>å¦ä¸€ä»¶äº‹â€”â€”æˆ‘ä»¬åº”è¯¥ç”¨ Web ç»„ä»¶æ„å»ºè·¯ç”±å™¨å—ï¼Ÿå—¯...ä¹Ÿè®¸ä¸åº”è¯¥ï¼ŸLit ä¼¼ä¹è®¤ä¸ºè¿™ä¼šæœ‰å¸®åŠ©å’Œæœ‰ç”¨ã€‚ä½†ä½ è‡ªå·±å®ç°çš„è·¯ç”±å™¨éœ€è¦å¤„ç†å¾ˆå¤šæ¡†æ¶è·¯ç”±å™¨å·²ç»è§£å†³çš„é—®é¢˜ã€‚Web ç»„ä»¶è¿˜å¢åŠ äº†å¦ä¸€ä¸ªä½ éœ€è¦æ³¨æ„çš„å®‰å…¨çº§åˆ«ã€‚</p>
<p>æˆ‘è®¤ä¸ºè¿™å€¼å¾—ç ”ç©¶å’Œå­¦ä¹ ã€‚è€Œä¸”äº†è§£ä¸æ–­æ¨å‡ºçš„åŸç”Ÿ API ä¹Ÿå¾ˆå¥½ï¼Œè¿™äº› API è®©æˆ‘ä»¬åœ¨ä¾èµ–å¹³å°æ—¶çš„ç”Ÿæ´»æ›´è½»æ¾ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±åº¦è§£æï¼šfetch ä¸ Promise ç»“åˆå®æˆ˜åŠé¢è¯•é‡ç‚¹]]></title>    <link>https://juejin.cn/post/7587313610696851483</link>    <guid>https://juejin.cn/post/7587313610696851483</guid>    <pubDate>2025-12-25T04:16:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587313610696851483" data-draft-id="7587342120022114355" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±åº¦è§£æï¼šfetch ä¸ Promise ç»“åˆå®æˆ˜åŠé¢è¯•é‡ç‚¹"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-25T04:16:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯æ— æ¶¯"/> <meta itemprop="url" content="https://juejin.cn/user/3967483738859639"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±åº¦è§£æï¼šfetch ä¸ Promise ç»“åˆå®æˆ˜åŠé¢è¯•é‡ç‚¹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3967483738859639/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯æ— æ¶¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T04:16:18.000Z" title="Thu Dec 25 2025 04:16:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹</p>
<p>åœ¨å‰ç«¯å¼‚æ­¥ç¼–ç¨‹é¢†åŸŸï¼ŒPromise æ˜¯è§£å†³å›è°ƒåœ°ç‹±çš„æ ¸å¿ƒæ–¹æ¡ˆï¼Œè€Œ fetch ä½œä¸ºç°ä»£æµè§ˆå™¨åŸç”Ÿæ”¯æŒçš„ç½‘ç»œè¯·æ±‚ APIï¼Œå…¶è®¾è®¡æœ¬èº«å°±æ·±åº¦ä¾èµ– Promiseã€‚æŒæ¡äºŒè€…çš„ç»“åˆä½¿ç”¨ï¼Œä¸ä»…æ˜¯æ—¥å¸¸å¼€å‘çš„åŸºç¡€ï¼Œæ›´æ˜¯å‰ç«¯é¢è¯•çš„é«˜é¢‘è€ƒç‚¹ã€‚æœ¬æ–‡å°†ä»æ ¸å¿ƒæ¦‚å¿µè”åŠ¨ã€å®æˆ˜åœºæ™¯åº”ç”¨ã€é¢è¯•é‡ç‚¹æ‹†è§£ä¸‰ä¸ªç»´åº¦ï¼Œå¸®ä½ å½»åº•ææ‡‚ fetch ä¸ Promise çš„ååŒé€»è¾‘ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æ ¸å¿ƒæ¦‚å¿µï¼šä¸ºä»€ä¹ˆ fetch å¤©ç„¶é€‚é… Promiseï¼Ÿ</h2>
<p>åœ¨è®²è§£ç»“åˆç”¨æ³•å‰ï¼Œæˆ‘ä»¬å…ˆæ˜ç¡®ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µçš„å…³è”ï¼š</p>
<h3 data-id="heading-1">1.1 Promise çš„æ ¸å¿ƒä»·å€¼</h3>
<p>Promise æ˜¯ä¸€ç§ç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œçš„å¯¹è±¡ï¼Œå®ƒå°†å¼‚æ­¥æ“ä½œçš„ç»“æœï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰å°è£…ä¸ºå¯é¢„æµ‹çš„çŠ¶æ€æµè½¬ï¼Œé¿å…äº†å¤šå±‚åµŒå¥—çš„å›è°ƒåœ°ç‹±ã€‚å…¶æ ¸å¿ƒç‰¹æ€§åŒ…æ‹¬ï¼š</p>
<ul>
<li>ä¸‰ç§çŠ¶æ€ï¼š<code>pending</code>ï¼ˆè¿›è¡Œä¸­ï¼‰ã€<code>fulfilled</code>ï¼ˆæˆåŠŸï¼‰ã€<code>rejected</code>ï¼ˆå¤±è´¥ï¼‰ï¼ŒçŠ¶æ€ä¸€æ—¦æ”¹å˜ä¸å¯é€†ï¼›</li>
<li>é“¾å¼è°ƒç”¨ï¼šé€šè¿‡ <code>then()</code> æ¥æ”¶æˆåŠŸç»“æœï¼Œ<code>catch()</code> æ•è·é”™è¯¯ï¼Œæ”¯æŒé“¾å¼ä¸²è”å¤šä¸ªå¼‚æ­¥æ“ä½œï¼›</li>
<li>å¼‚æ­¥ç©¿é€ï¼šå…è®¸åœ¨é“¾å¼è°ƒç”¨ä¸­è·³è¿‡éƒ¨åˆ† <code>then()</code>ï¼Œç›´æ¥ç”±åç»­ <code>catch()</code> æ•è·é”™è¯¯ã€‚</li>
</ul>
<h3 data-id="heading-2">1.2 fetch çš„è®¾è®¡æœ¬è´¨</h3>
<p>fetch æ˜¯æµè§ˆå™¨æä¾›çš„ç”¨äºæ›¿ä»£ XMLHttpRequest çš„ç½‘ç»œè¯·æ±‚ APIï¼Œå…¶æ ¸å¿ƒè®¾è®¡ç†å¿µå°±æ˜¯â€œåŸºäº Promise å°è£…å¼‚æ­¥è¯·æ±‚â€ã€‚ä¸ XHR ä¸åŒï¼Œfetch è°ƒç”¨åä¼šç›´æ¥è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼š</p>
<ul>
<li>å½“è¯·æ±‚å‘å‡ºåï¼ŒPromise å¤„äº <code>pending</code> çŠ¶æ€ï¼›</li>
<li>å½“æœåŠ¡å™¨è¿”å›å“åº”ï¼ˆæ— è®º HTTP çŠ¶æ€ç æ˜¯å¦ä¸º 2xxï¼‰ï¼ŒPromise ä¼šå˜ä¸º <code>fulfilled</code>ï¼Œå¹¶å°†å“åº”å¯¹è±¡ï¼ˆResponseï¼‰ä¼ é€’ç»™ <code>then()</code>ï¼›</li>
<li>åªæœ‰å½“ç½‘ç»œæ•…éšœï¼ˆå¦‚æ–­ç½‘ã€è·¨åŸŸæœªæˆæƒç­‰ï¼‰å¯¼è‡´è¯·æ±‚æ— æ³•å‘å‡ºæ—¶ï¼ŒPromise æ‰ä¼šå˜ä¸º <code>rejected</code>ï¼Œé”™è¯¯ä¼šè¢« <code>catch()</code> æ•è·ã€‚</li>
</ul>
<p>æ³¨æ„ï¼šfetch çš„ Promise ä¸ä¼šå›  HTTP é”™è¯¯çŠ¶æ€ç ï¼ˆå¦‚ 404ã€500ï¼‰è€Œ rejectï¼Œè¿™æ˜¯é¢è¯•é«˜é¢‘æ˜“é”™ç‚¹ï¼</p>
<h2 data-id="heading-3">äºŒã€å®æˆ˜åœºæ™¯ï¼šfetch ä¸ Promise ç»“åˆç”¨æ³•å…¨è§£æ</h2>
<p>åŸºäºäºŒè€…çš„å¤©ç„¶é€‚é…æ€§ï¼Œå®é™…å¼€å‘ä¸­æˆ‘ä»¬é€šè¿‡ Promise çš„é“¾å¼è°ƒç”¨ï¼Œå°±èƒ½ä¼˜é›…åœ°å¤„ç† fetch çš„è¯·æ±‚ã€å“åº”è§£æã€é”™è¯¯æ•è·å…¨æµç¨‹ã€‚ä»¥ä¸‹æ˜¯é«˜é¢‘å®æˆ˜åœºæ™¯ï¼š</p>
<h3 data-id="heading-4">2.1 åŸºç¡€åœºæ™¯ï¼šGET è¯·æ±‚ä¸å“åº”è§£æ</h3>
<p>fetch é»˜è®¤å‘èµ· GET è¯·æ±‚ï¼Œéœ€é€šè¿‡ Response å¯¹è±¡çš„æ–¹æ³•ï¼ˆå¦‚ <code>json()</code>ã€<code>text()</code>ï¼‰è§£æå“åº”ä½“ï¼Œè€Œè¿™äº›æ–¹æ³•æœ¬èº«ä¹Ÿè¿”å› Promiseï¼Œå› æ­¤éœ€è¦åµŒå¥—ä¸€å±‚ <code>then()</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŸºç¡€ GET è¯·æ±‚</span>
<span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.example.com/data'</span>)
  <span class="hljs-comment">// ç¬¬ä¸€æ¬¡ thenï¼šæ¥æ”¶å“åº”å¯¹è±¡ï¼Œè§£æä¸º JSONï¼ˆè¿”å› Promiseï¼‰</span>
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
    <span class="hljs-comment">// æ‰‹åŠ¨å¤„ç† HTTP é”™è¯¯çŠ¶æ€ç </span>
    <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`HTTP é”™è¯¯ï¼š<span class="hljs-subst">${response.status}</span>`</span>);
    }
    <span class="hljs-keyword">return</span> response.<span class="hljs-title function_">json</span>(); <span class="hljs-comment">// è§£æ JSON æ ¼å¼å“åº”ä½“ï¼Œè¿”å› Promise</span>
  })
  <span class="hljs-comment">// ç¬¬äºŒæ¬¡ thenï¼šæ¥æ”¶è§£æåçš„ä¸šåŠ¡æ•°æ®</span>
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·æ±‚æˆåŠŸï¼š'</span>, data);
  })
  <span class="hljs-comment">// catchï¼šæ•è·æ‰€æœ‰é”™è¯¯ï¼ˆç½‘ç»œé”™è¯¯ + æ‰‹åŠ¨æŠ›å‡ºçš„ HTTP é”™è¯¯ï¼‰</span>
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·æ±‚å¤±è´¥ï¼š'</span>, error);
  });
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>æ ¸å¿ƒé€»è¾‘ï¼šå¤–å±‚ Promise å¤„ç†è¯·æ±‚å‘èµ·ä¸å“åº”æ¥æ”¶ï¼Œå†…å±‚ Promise å¤„ç†å“åº”ä½“è§£æï¼Œé€šè¿‡é“¾å¼è°ƒç”¨ä¸²è”ï¼Œä»£ç æ¸…æ™°æ— åµŒå¥—ã€‚</p>
<h3 data-id="heading-5">2.2 è¿›é˜¶åœºæ™¯ï¼šPOST è¯·æ±‚ä¸è¯·æ±‚é…ç½®</h3>
<p>å‘èµ· POST è¯·æ±‚æ—¶ï¼Œéœ€é€šè¿‡ fetch çš„ç¬¬äºŒä¸ªå‚æ•°é…ç½®è¯·æ±‚æ–¹æ³•ã€è¯·æ±‚å¤´ã€è¯·æ±‚ä½“ç­‰ï¼Œç»“åˆ Promise å¤„ç†å¤æ‚å¼‚æ­¥é€»è¾‘ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®šä¹‰è¯·æ±‚æ•°æ®</span>
<span class="hljs-keyword">const</span> postData = { <span class="hljs-attr">username</span>: <span class="hljs-string">'test'</span>, <span class="hljs-attr">password</span>: <span class="hljs-string">'123456'</span> };

<span class="hljs-comment">// POST è¯·æ±‚</span>
<span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.example.com/login'</span>, {
  <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>, <span class="hljs-comment">// è¯·æ±‚æ–¹æ³•</span>
  <span class="hljs-attr">headers</span>: {
    <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>, <span class="hljs-comment">// å£°æ˜è¯·æ±‚ä½“æ ¼å¼ä¸º JSON</span>
  },
  <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(postData), <span class="hljs-comment">// åºåˆ—åŒ–è¯·æ±‚ä½“ï¼ˆå¿…é¡»ä¸ºå­—ç¬¦ä¸²ï¼‰</span>
})
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {<span class="hljs-comment">//è¿™é‡Œæ˜¯å¤„ç†fetchè¿”å›çš„promiseå¯¹è±¡</span>
    <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`çŠ¶æ€ç ï¼š<span class="hljs-subst">${response.status}</span>`</span>);
    <span class="hljs-keyword">return</span> response.<span class="hljs-title function_">json</span>();
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {<span class="hljs-comment">//response.jsonä¹Ÿæ˜¯ä¸€ä¸ªpromiseå¯¹è±¡</span>
    <span class="hljs-keyword">if</span> (result.<span class="hljs-property">code</span> === <span class="hljs-number">200</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç™»å½•æˆåŠŸï¼š'</span>, result.<span class="hljs-property">data</span>.<span class="hljs-property">token</span>);
      <span class="hljs-comment">// å¯ç»§ç»­å‘èµ·åç»­è¯·æ±‚ï¼ˆå¦‚è·å–ç”¨æˆ·ä¿¡æ¯ï¼‰ï¼Œå½¢æˆ Promise é“¾å¼ä¸²è”</span>
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.example.com/userInfo'</span>, {
        <span class="hljs-attr">headers</span>: { <span class="hljs-title class_">Authorization</span>: <span class="hljs-string">`Bearer <span class="hljs-subst">${result.data.token}</span>`</span> }
      });
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(result.<span class="hljs-property">msg</span>);
    }
  })
    <span class="hljs-comment">// è¿™é‡Œæ˜¯è·å–ç”¨æˆ·å¯¹è±¡fetch è¿”å›çš„promise</span>
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">userRes</span> =&gt;</span> userRes.<span class="hljs-title function_">json</span>())
    <span class="hljs-comment">// å¤„ç†è·å–ç”¨æˆ·ä¿¡æ¯æ¥å£è¿”å›çš„æ•°æ®</span>
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">userData</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç”¨æˆ·ä¿¡æ¯ï¼š'</span>, userData))
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æµç¨‹å¤±è´¥ï¼š'</span>, error));
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>å…³é”®äº®ç‚¹ï¼šåœ¨ä¸€ä¸ª Promise é“¾ä¸­ä¸²è”å¤šä¸ªå¼‚æ­¥è¯·æ±‚ï¼ˆç™»å½• â†’ è·å–ç”¨æˆ·ä¿¡æ¯ï¼‰ï¼Œå‰ä¸€ä¸ªè¯·æ±‚çš„ç»“æœä½œä¸ºåä¸€ä¸ªè¯·æ±‚çš„å‚æ•°ï¼Œå®ç°å¼‚æ­¥æµç¨‹çš„çº¿æ€§åŒ–ã€‚</p>
<h3 data-id="heading-6">2.3 é«˜çº§åœºæ™¯ï¼šPromise å·¥å…·å‡½æ•°ç»“åˆ fetch</h3>
<p>åˆ©ç”¨ Promise çš„å·¥å…·å‡½æ•°ï¼ˆå¦‚ <code>Promise.all()</code>ã€<code>Promise.race()</code>ï¼‰ï¼Œå¯å®ç° fetch çš„æ‰¹é‡è¯·æ±‚æˆ–è¶…æ—¶æ§åˆ¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. Promise.all()ï¼šå¹¶è¡Œå‘èµ·å¤šä¸ªè¯·æ±‚ï¼Œå…¨éƒ¨æˆåŠŸæ‰è¿”å›ç»“æœ</span>
<span class="hljs-keyword">const</span> request1 = <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.example.com/data1'</span>);
<span class="hljs-keyword">const</span> request2 = <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.example.com/data2'</span>);

<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([request1, request2])
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">responses</span> =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(responses.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>())))
  .<span class="hljs-title function_">then</span>([data1, data2] =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰¹é‡è¯·æ±‚æˆåŠŸï¼š'</span>, data1, data2);
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ä»»æ„ä¸€ä¸ªè¯·æ±‚å¤±è´¥ï¼š'</span>, error));

<span class="hljs-comment">// 2. Promise.race()ï¼šè¶…æ—¶æ§åˆ¶ï¼ˆè¯·æ±‚è¶…æ—¶æ—¶ä¸­æ–­å¹¶æŠ›å‡ºé”™è¯¯ï¼‰</span>
<span class="hljs-keyword">const</span> timeoutPromise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'è¯·æ±‚è¶…æ—¶ï¼ˆ3ç§’ï¼‰'</span>)), <span class="hljs-number">3000</span>);
});

<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">race</span>([<span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.example.com/slowData'</span>), timeoutPromise])
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>())
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·æ±‚æˆåŠŸï¼š'</span>, data))
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·æ±‚å¤±è´¥ï¼š'</span>, error));
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-7">2.4 ä¼˜åŒ–åœºæ™¯ï¼šPromise å·¥å…·å‡½æ•°ç»“åˆasync,await</h3>
<p>åˆ©ç”¨async,awaitå°†è¯·æ±‚æ›´åŠ ä¼˜é›…,ç»Ÿä¸€å¤„ç†error</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">search</span> = <span class="hljs-keyword">async</span>(<span class="hljs-params"/>) =&gt;{
    <span class="hljs-keyword">try</span>{
        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/test'</span>)
        <span class="hljs-keyword">const</span> data = res.<span class="hljs-title function_">json</span>()
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data,<span class="hljs-string">'è¿”å›æ¥å£æ•°æ®'</span>)
    }<span class="hljs-keyword">catch</span>(err){
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·æ±‚å‡ºé”™'</span>,err)
    }
}
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h2 data-id="heading-8">ä¸‰ã€é¢è¯•é‡ç‚¹ï¼šé«˜é¢‘é—®é¢˜ä¸æ ¸å¿ƒç­”æ¡ˆ</h2>
<p>fetch ä¸ Promise çš„ç»“åˆæ˜¯å‰ç«¯é¢è¯•çš„æ ¸å¿ƒè€ƒç‚¹ï¼Œä»¥ä¸‹æ˜¯é«˜é¢‘é—®é¢˜åŠç²¾å‡†å›ç­”æ€è·¯ï¼š</p>
<h3 data-id="heading-9">3.1 é—®é¢˜ 1ï¼šfetch çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿå®ƒçš„ Promise ä»€ä¹ˆæ—¶å€™ä¼š rejectï¼Ÿ</h3>
<ul>
<li>fetch çš„è¿”å›å€¼æ˜¯ä¸€ä¸ª <strong>Promise å¯¹è±¡</strong>ï¼›</li>
<li>è¯¥ Promise ä»…åœ¨ã€Œç½‘ç»œæ•…éšœã€æ—¶æ‰ä¼š rejectï¼ˆå¦‚æ–­ç½‘ã€è·¨åŸŸæœªé…ç½® CORSã€åŸŸåæ— æ³•è§£æç­‰ï¼‰ï¼›</li>
<li>å³ä½¿æœåŠ¡å™¨è¿”å› 404ã€500 ç­‰ HTTP é”™è¯¯çŠ¶æ€ç ï¼ŒPromise ä»ä¼š resolveï¼Œæ­¤æ—¶éœ€è¦é€šè¿‡ Response å¯¹è±¡çš„ <code>ok</code> å±æ€§ï¼ˆtrue è¡¨ç¤º 2xx çŠ¶æ€ç ï¼‰æ‰‹åŠ¨åˆ¤æ–­è¯·æ±‚æ˜¯å¦æˆåŠŸï¼Œå¹¶æŠ›å‡ºé”™è¯¯ã€‚</li>
</ul>
<h3 data-id="heading-10">3.2 é—®é¢˜ 2ï¼šå¦‚ä½•ç”¨ Promise å¤„ç† fetch çš„é”™è¯¯ï¼ˆåŒ…æ‹¬ç½‘ç»œé”™è¯¯å’Œ HTTP é”™è¯¯ï¼‰ï¼Ÿ</h3>
<p>æ ¸å¿ƒç­”æ¡ˆï¼šé€šè¿‡ã€Œæ‰‹åŠ¨åˆ¤æ–­ HTTP çŠ¶æ€ç  + catch æ•è·ã€çš„ç»„åˆå®ç°å…¨é‡é”™è¯¯å¤„ç†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/data'</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
    <span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šåˆ¤æ–­ HTTP çŠ¶æ€ç ï¼Œé 2xx åˆ™æŠ›å‡ºé”™è¯¯</span>
    <span class="hljs-keyword">if</span> (!res.<span class="hljs-property">ok</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`HTTP é”™è¯¯ï¼š<span class="hljs-subst">${res.status}</span>`</span>);
    <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">json</span>();
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æˆåŠŸ'</span>, data))
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
    <span class="hljs-comment">// æ•è·ä¸¤ç±»é”™è¯¯ï¼šç½‘ç»œé”™è¯¯ + æ‰‹åŠ¨æŠ›å‡ºçš„ HTTP é”™è¯¯</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å¤±è´¥'</span>, err);
  });
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-11">3.3 é—®é¢˜ 3ï¼šfetch ç›¸æ¯” XMLHttpRequestï¼Œç»“åˆ Promise æœ‰å“ªäº›ä¼˜åŠ¿ï¼Ÿ</h3>
<ol>
<li>ä»£ç æ›´ç®€æ´ï¼šPromise é“¾å¼è°ƒç”¨æ›¿ä»£ XHR çš„å¤šå±‚å›è°ƒï¼Œé¿å…å›è°ƒåœ°ç‹±ï¼›</li>
<li>çŠ¶æ€æ›´å¯æ§ï¼šPromise çš„çŠ¶æ€ä¸å¯é€†ç‰¹æ€§ï¼Œè®©å¼‚æ­¥æµç¨‹æ›´å¯é¢„æµ‹ï¼›</li>
<li>åŸç”Ÿé€‚é…ï¼šfetch å¤©ç”Ÿè¿”å› Promiseï¼Œæ— éœ€æ‰‹åŠ¨å°è£…ï¼Œè€Œ XHR éœ€è¦æ‰‹åŠ¨ç”¨ Promise åŒ…è£¹æ‰èƒ½å®ç°é“¾å¼è°ƒç”¨ï¼›</li>
<li>åŠŸèƒ½æ›´å¼ºå¤§ï¼šæ”¯æŒ Promise å·¥å…·å‡½æ•°ï¼ˆå¦‚ Promise.all()ï¼‰å®ç°æ‰¹é‡è¯·æ±‚ï¼Œè½»æ¾å¤„ç†å¤æ‚å¼‚æ­¥åœºæ™¯ã€‚</li>
</ol>
<h3 data-id="heading-12">3.4 é—®é¢˜ 4ï¼šå¦‚ä½•ç”¨ Promise.race() ç»™ fetch è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Ÿ</h3>
<p>åˆ›å»ºä¸€ä¸ªè¶…æ—¶ Promiseï¼ˆæŒ‡å®šæ—¶é—´å rejectï¼‰ï¼Œä¸ fetch çš„ Promise è¿›è¡Œ race ç«äº‰ï¼Œè°å…ˆæ”¹å˜çŠ¶æ€å°±ä»¥è°çš„ç»“æœä¸ºå‡†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchWithTimeout</span>(<span class="hljs-params">url, timeout = <span class="hljs-number">3000</span></span>) {
  <span class="hljs-comment">// è¶…æ—¶ Promise</span>
  <span class="hljs-keyword">const</span> timeoutTask = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">_, reject</span>) =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`è¶…æ—¶ <span class="hljs-subst">${timeout}</span>ms`</span>)), timeout);
  });
  <span class="hljs-comment">// ç«äº‰ï¼šfetch æˆåŠŸ/å¤±è´¥ æˆ– è¶…æ—¶</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">race</span>([<span class="hljs-title function_">fetch</span>(url), timeoutTask]);
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-title function_">fetchWithTimeout</span>(<span class="hljs-string">'/api/slowData'</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>())
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æˆåŠŸ'</span>, data))
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å¤±è´¥'</span>, err));
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-13">3.5 é—®é¢˜ 5ï¼šfetch ä¸­å¦‚ä½•å®ç°è¯·æ±‚ä¸­æ–­ï¼Ÿç»“åˆ Promise æ€ä¹ˆå¤„ç†ï¼Ÿ</h3>
<p>fetch æœ¬èº«ä¸æ”¯æŒä¸­æ–­ï¼Œä½†å¯é€šè¿‡ <strong>AbortController</strong> ä¸ Promise ç»“åˆå®ç°ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// 1. åˆ›å»º AbortController å®ä¾‹
const <span class="hljs-attr">controller</span> = new AbortController()<span class="hljs-comment">;</span>
// 2. è·å–ä¿¡å·å¯¹è±¡
const <span class="hljs-attr">signal</span> = controller.signal<span class="hljs-comment">;</span>

// 3. å‘èµ· fetch è¯·æ±‚ï¼Œå°† signal ä¼ å…¥é…ç½®
fetch('/api/data', { signal })
  .then(<span class="hljs-attr">res</span> =&gt; res.json())
  .then(<span class="hljs-attr">data</span> =&gt; console.log(<span class="hljs-string">'æˆåŠŸ'</span>, data))
  .catch(<span class="hljs-attr">err</span> =&gt; {
    // 4. ä¸­æ–­æ—¶ä¼šè§¦å‘ AbortError
    if (<span class="hljs-attr">err.name</span> === <span class="hljs-string">'AbortError'</span>) {
      console.log('è¯·æ±‚å·²ä¸­æ–­')<span class="hljs-comment">;</span>
      return<span class="hljs-comment">;</span>
    }
    console.error('å…¶ä»–é”™è¯¯', err)<span class="hljs-comment">;</span>
  })<span class="hljs-comment">;</span>

// 5. ä¸»åŠ¨ä¸­æ–­è¯·æ±‚ï¼ˆå¦‚ç”¨æˆ·ç‚¹å‡»å–æ¶ˆæŒ‰é’®ï¼‰
controller.abort()<span class="hljs-comment">;</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>åŸç†ï¼šAbortController çš„ signal å¯¹è±¡ä¸ fetch å…³è”ï¼Œè°ƒç”¨ <code>abort()</code> æ—¶ï¼Œsignal ä¼šè§¦å‘ abort äº‹ä»¶ï¼Œfetch ä¼šç«‹å³ reject å¹¶æŠ›å‡º AbortErrorã€‚</p>
<h2 data-id="heading-14">å››ã€æ€»ç»“</h2>
<p>fetch ä¸ Promise çš„ç»“åˆï¼Œæ ¸å¿ƒæ˜¯åˆ©ç”¨ Promise çš„çŠ¶æ€ç®¡ç†å’Œé“¾å¼è°ƒç”¨ç‰¹æ€§ï¼Œè§£å†³ fetch å¼‚æ­¥è¯·æ±‚çš„æµç¨‹æ§åˆ¶é—®é¢˜ã€‚æ—¥å¸¸å¼€å‘ä¸­ï¼Œéœ€é‡ç‚¹æŒæ¡å“åº”è§£æã€é”™è¯¯å¤„ç†ï¼ˆå°¤å…¶æ˜¯ HTTP é”™è¯¯ï¼‰ã€æ‰¹é‡è¯·æ±‚ã€è¶…æ—¶æ§åˆ¶ç­‰åœºæ™¯ï¼›é¢è¯•ä¸­ï¼Œè¦ç‰¢è®° fetch çš„ Promise çŠ¶æ€è§„åˆ™ã€é”™è¯¯å¤„ç†é€»è¾‘ã€ä¸ XHR çš„å·®å¼‚åŠè¯·æ±‚ä¸­æ–­æ–¹æ¡ˆç­‰æ ¸å¿ƒè€ƒç‚¹ã€‚</p>
<p>æŒæ¡äºŒè€…çš„ååŒé€»è¾‘ï¼Œä¸ä»…èƒ½æå‡å¼‚æ­¥ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œæ›´èƒ½åœ¨é¢è¯•ä¸­å¿«é€Ÿç²¾å‡†åœ°åº”å¯¹é«˜é¢‘é—®é¢˜ã€‚å»ºè®®ç»“åˆå®é™…åœºæ™¯å¤šå†™å¤šç»ƒï¼ŒåŠ æ·±å¯¹ Promise å¼‚æ­¥æµè½¬å’Œ fetch æ ¸å¿ƒç‰¹æ€§çš„ç†è§£ã€‚</p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[flutter ç¡®å®ä¸éœ€è¦ hooks]]></title>    <link>https://juejin.cn/post/7587325326046412809</link>    <guid>https://juejin.cn/post/7587325326046412809</guid>    <pubDate>2025-12-25T04:37:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587325326046412809" data-draft-id="7587355990408970291" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="flutter ç¡®å®ä¸éœ€è¦ hooks"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2025-12-25T04:37:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœªæ¥çŒ«å’ªèŠ±"/> <meta itemprop="url" content="https://juejin.cn/user/1081575169340526"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            flutter ç¡®å®ä¸éœ€è¦ hooks
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1081575169340526/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœªæ¥çŒ«å’ªèŠ±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T04:37:40.000Z" title="Thu Dec 25 2025 04:37:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    14
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¹‹å‰å†™è¿‡ä¸€ç¯‡æ–‡ç« :<a href="https://juejin.cn/post/7568527869187899435" target="_blank" title="https://juejin.cn/post/7568527869187899435">juejin.cn/post/756852â€¦</a></p>
<p>æœ€è¿‘æœ‰äººåœ¨è¯„è®ºåŒºæŒ‡è´£æˆ‘ä¸æ‡‚ hooksã€ä¸æ‡‚ signalsã€ä¸æ‡‚å‰ç«¯æ½®æµã€‚é‚£ç¯‡æ–‡ç« ä¸­,æˆ‘å¯¹ hooks è¿˜ä¿ç•™äº†ä¸€äº›ä½™åœ°,è®¤ä¸ºæŸäº›åœºæ™¯ä¸‹å¯èƒ½ç¡®å®æœ‰å…¶å¿…è¦æ€§ã€‚ä½†ç›´åˆ°æˆ‘æ·±å…¥ç ”ç©¶äº† <code>flutter_hooks</code> è¿™ä¸ªåº“çš„èµ·æº,æˆ‘çš„æƒ³æ³•å‘ç”Ÿäº†æ”¹å˜ã€‚</p>
<p>äº‹æƒ…çš„èµ·å› æ˜¯,è¯¥åº“ä½œè€…åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fissues%2F51752" target="_blank" title="https://github.com/flutter/flutter/issues/51752" ref="nofollow noopener noreferrer">github.com/flutter/fluâ€¦</a> ä¸­æå‡ºçŠ¶æ€å¤ç”¨å›°éš¾çš„é—®é¢˜,å¸Œæœ›å€Ÿé‰´ React çš„ hooks æ¨¡å¼æ¥è§£å†³ã€‚ä½† Flutter å®˜æ–¹ç»´æŠ¤è€…å¹¶ä¸è®¤åŒ hooks ä¸çŠ¶æ€å¤ç”¨ä¹‹é—´å­˜åœ¨å¿…ç„¶è”ç³»,å› æ­¤ä¸æ‰“ç®—æä¾›å®˜æ–¹æ”¯æŒã€‚</p>
<p>å°½ç®¡å¦‚æ­¤,ä½œè€…åœ¨è¿™å‡ å¹´é‡Œå§‹ç»ˆåšæŒè‡ªå·±çš„è§‚ç‚¹,åˆ›å»ºäº† <code>flutter_hooks</code> åº“,å°† React çš„é‚£å¥— API å®Œæ•´åœ°ç§»æ¤åˆ°äº† Flutter ä¸­ã€‚</p>
<p>æˆ‘ä¸ªäººä¹Ÿåå¯¹å°† hooks å¼•å…¥ Flutterã€‚å¦‚æœé—®é¢˜æ˜¯çŠ¶æ€å¤ç”¨å›°éš¾,éš¾é“ hooks å°±æ˜¯å”¯ä¸€çš„è§£å†³æ–¹æ¡ˆå—?æ˜¾ç„¶ä¸æ˜¯ã€‚</p>
<p>æˆ‘ä»¬å®Œå…¨å¯ä»¥å€Ÿé‰´ Android çš„ <code>LifecycleObserver</code> æ¨¡å¼,å°†é€»è¾‘æŠ½ç¦»å‡ºæ¥å®ç°æœ€å¤§åŒ–å¤ç”¨,è¾¾åˆ°ä¸ hooks ç›¸åŒç”šè‡³æ›´å¥½çš„æ•ˆæœã€‚æœ¬è´¨ä¸Š,hooks ä¹Ÿæ˜¯å¯¹ç”Ÿå‘½å‘¨æœŸçš„ä¸€ç§å°è£…,åªæ˜¯å®ƒåœ¨å°è£…ç”Ÿå‘½å‘¨æœŸä¹‹å¤–è¿˜é™„åŠ äº†è®¸å¤šé¢å¤–åŠŸèƒ½ã€‚ä½†è¿™äº›é¢å¤–åŠŸèƒ½ä¸çŠ¶æ€å¤ç”¨çš„æ ¸å¿ƒé—®é¢˜å…³ç³»ä¸å¤§,æˆ‘è®¤ä¸ºè¿™æ›´åƒæ˜¯ä¸ºäº†ä½¿ç”¨ hooks è€Œå¼ºè¡Œå¼•å…¥ hooksã€‚</p>
<p>å…·ä½“å®ç°ä»£ç  :<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flwj1994%2Fstate_lifecycle_observer" target="_blank" title="https://github.com/lwj1994/state_lifecycle_observer" ref="nofollow noopener noreferrer">github.com/lwj1994/staâ€¦</a></p>
<h3 data-id="heading-0">ä½¿ç”¨æ–‡æ¡£</h3>
<h2 data-id="heading-1">Flutter State Observer</h2>
<p>ä½¿ç”¨ Observer æ¨¡å¼è§£å†³çŠ¶æ€å¤ç”¨é—®é¢˜çš„ Flutter åŒ…ã€‚</p>
<h3 data-id="heading-2">ç‰¹æ€§</h3>
<ul>
<li><strong>LifecycleObserver</strong>: ç”¨äºåˆ›å»ºå¯å¤ç”¨çŠ¶æ€è§‚å¯Ÿè€…çš„åŸºç±»ã€‚</li>
<li><strong>LifecycleObserverMixin</strong>: ç”¨äºåœ¨ <code>State</code> ä¸­ç®¡ç†è§‚å¯Ÿè€…ç”Ÿå‘½å‘¨æœŸçš„ mixinã€‚</li>
<li><strong>å¸¸ç”¨è§‚å¯Ÿè€…</strong>:
<ul>
<li><code>AnimControllerObserver</code>: å¯å¤ç”¨çš„ <code>AnimationController</code> é€»è¾‘ã€‚</li>
<li><code>ScrollControllerObserver</code>: ç®¡ç† <code>ScrollController</code>ã€‚</li>
<li><code>TabControllerObserver</code>: ç®¡ç† <code>TabController</code>ã€‚</li>
<li><code>TextEditingControllerObserver</code>: ç®¡ç† <code>TextEditingController</code>ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-3">ç”¨æ³•</h3>
<h4 data-id="heading-4">è‡ªå®šä¹‰è§‚å¯Ÿè€…</h4>
<p>ä½ å¯ä»¥é€šè¿‡ç»§æ‰¿ <code>LifecycleObserver</code> è½»æ¾åˆ›å»ºè‡ªå·±çš„è§‚å¯Ÿè€…ã€‚</p>
<p>ç¤ºä¾‹ï¼šä¸€ä¸ª <code>UserDataObserver</code>ï¼Œå®ƒèƒ½å¤Ÿï¼š</p>
<ol>
<li>åœ¨ <code>onInit</code> ä¸­åˆå§‹åŒ–æ•°æ®è·å–ã€‚</li>
<li>åœ¨ <code>onUpdate</code> ä¸­å½“ <code>userId</code> å˜åŒ–æ—¶é‡æ–°è·å–æ•°æ®ã€‚</li>
<li>åœ¨ <code>onBuild</code> ä¸­è®°å½•è°ƒè¯•ä¿¡æ¯ã€‚</li>
</ol>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:state_lifecycle_observer/state_lifecycle_observer.dart'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Data</span> </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> id;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> info;
  Data(<span class="hljs-keyword">this</span>.id, <span class="hljs-keyword">this</span>.info);
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDataObserver</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">LifecycleObserver</span>&lt;<span class="hljs-title">ValueNotifier</span>&lt;<span class="hljs-title">Data</span>?&gt;&gt; </span>{
  <span class="hljs-comment">// è·å– Widget æœ€æ–°å‚æ•°çš„æœºåˆ¶</span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> <span class="hljs-built_in">Function</span>() getUserId;
  
  <span class="hljs-comment">// ç”¨äºè¿½è¸ªå˜åŒ–çš„å†…éƒ¨çŠ¶æ€</span>
  <span class="hljs-keyword">late</span> <span class="hljs-built_in">String</span> _currentUserId;

  UserDataObserver(
    <span class="hljs-keyword">super</span>.state, {
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.getUserId,
  });

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> onInit() {
    target = ValueNotifier(<span class="hljs-keyword">null</span>);
    _currentUserId = getUserId();
    _fetchData(_currentUserId);
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> onUpdate() {
    <span class="hljs-comment">// æ£€æŸ¥ä¾èµ– (userId) æ˜¯å¦å‘ç”Ÿå˜åŒ–</span>
    <span class="hljs-keyword">final</span> newUserId = getUserId();
    <span class="hljs-keyword">if</span> (newUserId != _currentUserId) {
      debugPrint(<span class="hljs-string">'UserId changed from <span class="hljs-subst">$_currentUserId</span> to <span class="hljs-subst">$newUserId</span>'</span>);
      _currentUserId = newUserId;
      _fetchData(_currentUserId);
    }
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> onBuild(BuildContext context) {
    debugPrint(<span class="hljs-string">'Building with user: <span class="hljs-subst">$_currentUserId</span>'</span>);
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> onDispose() {
    target.dispose();
  }

  <span class="hljs-keyword">void</span> _fetchData(<span class="hljs-built_in">String</span> id) <span class="hljs-keyword">async</span> {
    <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚</span>
    <span class="hljs-keyword">await</span> Future.delayed(<span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(milliseconds: <span class="hljs-number">500</span>));
    <span class="hljs-keyword">if</span> (_currentUserId == id) { <span class="hljs-comment">// é¿å…ç«æ€æ¡ä»¶</span>
      target.value = Data(id, <span class="hljs-string">'Info for <span class="hljs-subst">$id</span>'</span>);
    }
  }
}
</code></pre>
<h3 data-id="heading-5">ä¸ flutter_hooks çš„æ¯”è¾ƒ</h3>








































<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">state_lifecycle_observer</th><th align="left">flutter_hooks</th></tr></thead><tbody><tr><td align="left"><strong>èŒƒå¼</strong></td><td align="left">OOP (ç±»)</td><td align="left">å‡½æ•°å¼ (Hooks)</td></tr><tr><td align="left"><strong>åŸºç±»</strong></td><td align="left">æ ‡å‡† <code>StatefulWidget</code></td><td align="left"><code>HookWidget</code></td></tr><tr><td align="left"><strong>ç”Ÿå‘½å‘¨æœŸ</strong></td><td align="left">æ˜¾å¼ (<code>onInit</code>, <code>onDispose</code>)</td><td align="left">éšå¼ (<code>useEffect</code>)</td></tr><tr><td align="left"><strong>å­¦ä¹ æ›²çº¿</strong></td><td align="left">ä½ (æ ‡å‡† Flutter)</td><td align="left">ä¸­ (Hooks è§„åˆ™)</td></tr><tr><td align="left"><strong>é»‘é­”æ³•</strong></td><td align="left">ä½ (Mixin + List)</td><td align="left">é«˜ (Element é€»è¾‘)</td></tr><tr><td align="left"><strong>æ¡ä»¶é€»è¾‘</strong></td><td align="left">éšå¤„æ”¯æŒ</td><td align="left">ä¸å…è®¸åœ¨ <code>build</code> ä¸­ä½¿ç”¨</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C Programming Language | Manipulating arrays in functions]]></title>    <link>https://juejin.cn/post/7587335187073253402</link>    <guid>https://juejin.cn/post/7587335187073253402</guid>    <pubDate>2025-12-25T03:38:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587335187073253402" data-draft-id="7587336857537904649" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C Programming Language | Manipulating arrays in functions"/> <meta itemprop="keywords" content="Cè¯­è¨€"/> <meta itemprop="datePublished" content="2025-12-25T03:38:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è½è´¯ä¸€"/> <meta itemprop="url" content="https://juejin.cn/user/2306144643848090"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C Programming Language | Manipulating arrays in functions
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2306144643848090/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è½è´¯ä¸€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T03:38:01.000Z" title="Thu Dec 25 2025 03:38:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-comment">/*
1.ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œæ‰“å°ä¼ å…¥çš„æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚
	 
*/</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">printArr</span><span class="hljs-params">(<span class="hljs-type">int</span> arr[],<span class="hljs-type">int</span> len)</span>{
		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;len;i++){
			<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>,arr[i]);
		}
}

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>{
	<span class="hljs-comment">//int ç±»å‹çš„æ•°ç»„</span>
	<span class="hljs-type">int</span> arr1[<span class="hljs-number">5</span>]={<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>};
	<span class="hljs-type">int</span> arr2[<span class="hljs-number">3</span>]={<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>};

	printArr(arr1,<span class="hljs-number">5</span>); 
	printArr(arr2,<span class="hljs-number">3</span>); 
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
} 
<span class="hljs-comment">//å‡½æ•°ä¸­æ“ä½œæ•°ç»„ </span>
<span class="hljs-comment">//printf("åœ¨å‡½æ•°ä¸­ä¼ å…¥æ•°ç»„");</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2b970a7b90f4accbc901a6fa1bd419a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JC96LSv5LiA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238681&amp;x-signature=1CN0BKbDj842g%2BU1Jz1nP5NaIfU%3D" alt="image.png" loading="lazy"/></p>
<p>æ”¹å˜åŸåœ°å€</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">void</span> <span class="hljs-title function_">funArr</span><span class="hljs-params">(<span class="hljs-type">int</span> arr[])</span>{
    arr[<span class="hljs-number">0</span>]=<span class="hljs-number">100</span>;
    arr[<span class="hljs-number">1</span>]=<span class="hljs-number">200</span>;
}

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>{
    <span class="hljs-comment">// int ç±»å‹çš„æ•°ç»„</span>
    <span class="hljs-type">int</span> arr[]={<span class="hljs-number">1</span>,<span class="hljs-number">2</span>};
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d %d\n"</span>, arr[<span class="hljs-number">0</span>], arr[<span class="hljs-number">1</span>]);
    funArr(arr);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d %d\n"</span>, arr[<span class="hljs-number">0</span>], arr[<span class="hljs-number">1</span>]);
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cbf14222ce09480597097bfd32219de4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JC96LSv5LiA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238681&amp;x-signature=TITkx14JoYW6Wz0%2ByBYKA%2FNLdhU%3D" alt="image.png" loading="lazy"/></p>
<p>å±€éƒ¨å˜é‡ä¸æ”¹å˜</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">void</span> <span class="hljs-title function_">f</span><span class="hljs-params">(<span class="hljs-type">int</span> m)</span>{
    m += <span class="hljs-number">10</span>;
}

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>{
    <span class="hljs-type">int</span> m = <span class="hljs-number">1</span>;
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"m=%d\n"</span>, m); <span class="hljs-comment">// 1</span>
    f(m);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"m=%d"</span>, m); <span class="hljs-comment">// 1</span>
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc04b1c68a414b499b2e0cada785c9ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JC96LSv5LiA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238681&amp;x-signature=yLvXaQBxw7%2BtJAcXeTsBnSVui0I%3D" alt="image.png" loading="lazy"/></p>
<p>ä»»åŠ¡1ï¼š å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„å‚æ•°æ˜¯intæ•°ç»„ï¼Œå®ƒçš„è¿”å›å€¼æ˜¯æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ çš„å’Œã€‚
int getArrSum(int arr[], int len){</p>
<p>}</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">int</span> <span class="hljs-title function_">getArrSum</span><span class="hljs-params">(<span class="hljs-type">int</span> arr[], <span class="hljs-type">int</span> len)</span>{
    <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i&lt;len; i++){
        sum += arr[i];
    }
    <span class="hljs-keyword">return</span> sum;
}

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>{
    <span class="hljs-type">int</span> arr[<span class="hljs-number">3</span>] = {<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>};
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d"</span>, getArrSum(arr, <span class="hljs-number">3</span>));
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3135a5e6a414f89bd41b842bbe91c87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JC96LSv5LiA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238681&amp;x-signature=0Km0rqk%2FoWQwD0Q4ypL5Ta8JKB4%3D" alt="image.png" loading="lazy"/>
ä»»åŠ¡2ï¼š å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„å‚æ•°æ˜¯intæ•°ç»„ï¼Œå®ƒçš„è¿”å›å€¼æ˜¯æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ çš„æœ€å¤§å€¼ã€‚
int getArrMax(int arr[], int len){
}</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">//ä»»åŠ¡2ï¼šè·å–æ•°ç»„ä¸­çš„æœ€å¤§å€¼</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-type">int</span> <span class="hljs-title function_">getArrMax</span><span class="hljs-params">(<span class="hljs-type">int</span> arr[], <span class="hljs-type">int</span> len)</span> {
    <span class="hljs-comment">// å¤„ç†æ•°ç»„é•¿åº¦ä¸º0çš„å¼‚å¸¸æƒ…å†µ</span>
    <span class="hljs-keyword">if</span> (len &lt;= <span class="hljs-number">0</span>) {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"æ•°ç»„é•¿åº¦æ— æ•ˆï¼\n"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// æˆ–æ ¹æ®éœ€æ±‚è¿”å›å…¶ä»–æ ‡è¯†å€¼</span>
    }
    <span class="hljs-comment">// å‡è®¾ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºæœ€å¤§å€¼</span>
    <span class="hljs-type">int</span> max = arr[<span class="hljs-number">0</span>];
    <span class="hljs-comment">// éå†æ•°ç»„ï¼Œä»ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹æ¯”è¾ƒ</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; len; i++) {
        <span class="hljs-keyword">if</span> (arr[i] &gt; max) {
            max = arr[i]; <span class="hljs-comment">// æ›´æ–°æœ€å¤§å€¼</span>
        }
    }
    <span class="hljs-keyword">return</span> max;
}

<span class="hljs-comment">// æµ‹è¯•å‡½æ•°</span>
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹1ï¼šæ™®é€šæ•°ç»„</span>
    <span class="hljs-type">int</span> arr1[<span class="hljs-number">5</span>] = {<span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-number">2</span>, <span class="hljs-number">9</span>, <span class="hljs-number">5</span>};
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"æ•°ç»„1çš„æœ€å¤§å€¼ï¼š%d\n"</span>, getArrMax(arr1, <span class="hljs-number">5</span>)); <span class="hljs-comment">// è¾“å‡º9</span>

    <span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹2ï¼šåŒ…å«è´Ÿæ•°çš„æ•°ç»„</span>
    <span class="hljs-type">int</span> arr2[<span class="hljs-number">4</span>] = {<span class="hljs-number">-5</span>, <span class="hljs-number">-2</span>, <span class="hljs-number">-8</span>, <span class="hljs-number">-1</span>};
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"æ•°ç»„2çš„æœ€å¤§å€¼ï¼š%d\n"</span>, getArrMax(arr2, <span class="hljs-number">4</span>)); <span class="hljs-comment">// è¾“å‡º-1</span>

    <span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹3ï¼šå•å…ƒç´ æ•°ç»„</span>
    <span class="hljs-type">int</span> arr3[<span class="hljs-number">1</span>] = {<span class="hljs-number">10</span>};
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"æ•°ç»„3çš„æœ€å¤§å€¼ï¼š%d\n"</span>, getArrMax(arr3, <span class="hljs-number">1</span>)); <span class="hljs-comment">// è¾“å‡º10</span>

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77f49bdfd3374a3a8e738a0994ac95ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JC96LSv5LiA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238681&amp;x-signature=jFTVgBjYa4kQgD%2F5ILiYr%2BSMEYw%3D" alt="image.png" loading="lazy"/>
ä»»åŠ¡3ï¼š å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„å‚æ•°æ˜¯intæ•°ç»„ï¼Œå’Œè¦æŸ¥æ‰¾çš„å€¼ã€‚å¦‚æœåœ¨è¿™ä¸ªæ•°ç»„ä¸­ï¼Œèƒ½æ‰¾åˆ°ï¼Œåˆ™è¿”å›ç¬¬ä¸€ä¸ªæ‰¾åˆ°çš„å€¼çš„ä¸‹æ ‡ï¼›
å¦‚æœæ‰¾ä¸åˆ°ï¼Œåˆ™è¿”å›-1
int findArrValue(int arr[], int len, int val) {
}</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-comment">// ä»»åŠ¡3ï¼šæŸ¥æ‰¾æ•°ç»„ä¸­ç›®æ ‡å€¼çš„ç¬¬ä¸€ä¸ªä¸‹æ ‡ï¼Œæœªæ‰¾åˆ°è¿”å›-1</span>
<span class="hljs-type">int</span> <span class="hljs-title function_">findArrValue</span><span class="hljs-params">(<span class="hljs-type">int</span> arr[], <span class="hljs-type">int</span> len, <span class="hljs-type">int</span> val)</span> {
    <span class="hljs-comment">// å¤„ç†æ•°ç»„é•¿åº¦æ— æ•ˆçš„æƒ…å†µ</span>
    <span class="hljs-keyword">if</span> (len &lt;= <span class="hljs-number">0</span>) {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"æ•°ç»„é•¿åº¦æ— æ•ˆï¼\n"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    }
    <span class="hljs-comment">// éå†æ•°ç»„ï¼Œé€ä¸ªåŒ¹é…ç›®æ ‡å€¼</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) {
        <span class="hljs-keyword">if</span> (arr[i] == val) {
            <span class="hljs-keyword">return</span> i; <span class="hljs-comment">// æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œè¿”å›å½“å‰ä¸‹æ ‡</span>
        }
    }
    <span class="hljs-comment">// éå†ç»“æŸæœªæ‰¾åˆ°ï¼Œè¿”å›-1</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
}

<span class="hljs-comment">// æµ‹è¯•å‡½æ•°</span>
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹1ï¼šç›®æ ‡å€¼å­˜åœ¨ä¸”å‡ºç°å¤šæ¬¡</span>
    <span class="hljs-type">int</span> arr1[<span class="hljs-number">6</span>] = {<span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-number">2</span>, <span class="hljs-number">7</span>, <span class="hljs-number">5</span>, <span class="hljs-number">9</span>};
    <span class="hljs-type">int</span> index1 = findArrValue(arr1, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>);
    <span class="hljs-keyword">if</span> (index1 != <span class="hljs-number">-1</span>) {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"ç›®æ ‡å€¼7çš„ç¬¬ä¸€ä¸ªä¸‹æ ‡ï¼š%d\n"</span>, index1); <span class="hljs-comment">// è¾“å‡º1</span>
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"æœªæ‰¾åˆ°ç›®æ ‡å€¼7\n"</span>);
    }

    <span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹2ï¼šç›®æ ‡å€¼ä¸å­˜åœ¨</span>
    <span class="hljs-type">int</span> index2 = findArrValue(arr1, <span class="hljs-number">6</span>, <span class="hljs-number">10</span>);
    <span class="hljs-keyword">if</span> (index2 != <span class="hljs-number">-1</span>) {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"ç›®æ ‡å€¼10çš„ç¬¬ä¸€ä¸ªä¸‹æ ‡ï¼š%d\n"</span>, index2);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"æœªæ‰¾åˆ°ç›®æ ‡å€¼10\n"</span>); <span class="hljs-comment">// è¾“å‡ºè¯¥è¯­å¥</span>
    }

    <span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹3ï¼šå•å…ƒç´ æ•°ç»„ä¸”åŒ¹é…</span>
    <span class="hljs-type">int</span> arr2[<span class="hljs-number">1</span>] = {<span class="hljs-number">5</span>};
    <span class="hljs-type">int</span> index3 = findArrValue(arr2, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>);
    <span class="hljs-keyword">if</span> (index3 != <span class="hljs-number">-1</span>) {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"ç›®æ ‡å€¼5çš„ç¬¬ä¸€ä¸ªä¸‹æ ‡ï¼š%d\n"</span>, index3); <span class="hljs-comment">// è¾“å‡º0</span>
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"æœªæ‰¾åˆ°ç›®æ ‡å€¼5\n"</span>);
    }

    <span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹4ï¼šç©ºæ•°ç»„ï¼ˆé•¿åº¦ä¸º0ï¼‰</span>
    <span class="hljs-type">int</span> arr3[<span class="hljs-number">0</span>];
    <span class="hljs-type">int</span> index4 = findArrValue(arr3, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>);
    <span class="hljs-keyword">if</span> (index4 != <span class="hljs-number">-1</span>) {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"ç›®æ ‡å€¼2çš„ç¬¬ä¸€ä¸ªä¸‹æ ‡ï¼š%d\n"</span>, index4);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"æœªæ‰¾åˆ°ç›®æ ‡å€¼2ï¼ˆæ•°ç»„ä¸ºç©ºï¼‰\n"</span>); <span class="hljs-comment">// è¾“å‡ºè¯¥è¯­å¥</span>
    }

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c2a42cf50cf4647a5faedbc0695fd98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6JC96LSv5LiA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238681&amp;x-signature=I%2B%2B12ideag%2BMqvyIF3sEGQQ4mU8%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Claude Code æ•ˆç‡ç¿»å€æŒ‡å—:ä½ å¯èƒ½é”™è¿‡çš„10ä¸ªéšè—æ›´æ–°]]></title>    <link>https://juejin.cn/post/7587368168622669830</link>    <guid>https://juejin.cn/post/7587368168622669830</guid>    <pubDate>2025-12-25T04:34:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587368168622669830" data-draft-id="7587398857536749631" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Claude Code æ•ˆç‡ç¿»å€æŒ‡å—:ä½ å¯èƒ½é”™è¿‡çš„10ä¸ªéšè—æ›´æ–°"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-25T04:34:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å’Œå¹³hepingfly"/> <meta itemprop="url" content="https://juejin.cn/user/4100516930912747"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Claude Code æ•ˆç‡ç¿»å€æŒ‡å—:ä½ å¯èƒ½é”™è¿‡çš„10ä¸ªéšè—æ›´æ–°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4100516930912747/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å’Œå¹³hepingfly
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T04:34:31.000Z" title="Thu Dec 25 2025 04:34:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘åœ¨ç”¨ Claude Code å†™ä»£ç çš„æ—¶å€™ï¼Œé‡åˆ°äº†ä¸€äº›é—®é¢˜ã€‚æ¯”å¦‚ï¼š</p>
<p>1ï¸âƒ£ è·Ÿ Claude Code èŠå¤©èŠåˆ°ä¸€åŠï¼Œç”µè„‘é‡å¯ä¹‹åï¼Œä¹‹å‰èŠå¤©çš„ä¸Šä¸‹æ–‡éƒ½æ²¡æœ‰äº†ã€‚åˆå¾—é‡æ–°è·Ÿä¸€ä¸ªæ²¡æœ‰è®°å¿†çš„ Claude ä»å¤´å¼€å§‹èŠã€‚</p>
<p>2ï¸âƒ£ Claude ç”¨ç€ç”¨ç€å¹»è§‰ä¸¥é‡ï¼Œå¼€å§‹èƒ¡è¨€ä¹±è¯­ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯ä¸Šä¸‹æ–‡ token ç”¨è¶…äº†</p>
<p>3ï¸âƒ£ è®© Claude æ”¹ä¸€ä¸ªä»£ç ï¼Œç»“æœæ”¹é”™äº†ï¼Œæƒ³è¦æ’¤å›ï¼Œå¾—èŠ±è´¹ä¸€ç•ªåŠŸå¤«ã€‚</p>
<p>4ï¸âƒ£ Claude å¤šå¼€çª—å£ä¹‹åï¼Œåˆ†ä¸æ¸…å“ªä¸ªå¯¹è¯æ˜¯å“ªä¸ª</p>
<p>å¥½åœ¨æœ€è¿‘ Claude Code æ›´æ–°äº†ä¸€ç³»åˆ—çš„åŠŸèƒ½ï¼Œå¦‚æœä½ ä¹Ÿç»å¸¸é‡åˆ°ç±»ä¼¼çš„é—®é¢˜ï¼Œçœ‹å®Œè¿™ç¯‡æ–‡ç« å†å»ä½¿ç”¨ Claude Code æˆ–è®¸èƒ½å¤Ÿæé«˜æˆå€çš„æ•ˆç‡ã€‚</p>
<h3 data-id="heading-0">1ã€é€€å‡ºå¯¹è¯ä¹‹åï¼Œä¸Šä¸‹æ–‡éƒ½æ²¡æœ‰äº†å’‹æ•´ï¼Ÿç”¨<code>--resume</code></h3>
<p>å½“ä½ èŠ±äº†å¾ˆé•¿çš„æ—¶é—´è·Ÿ Claude èŠéœ€æ±‚ï¼Œå¥½ä¸å®¹æ˜“èŠé¡ºäº†ï¼Œå»ºç«‹äº†å®Œæ•´çš„ä¸Šä¸‹æ–‡ï¼Œå‡†å¤‡å¼€å§‹å†™ä»£ç äº†ã€‚</p>
<p>è¿™æ—¶å€™ä¸€ä¸å°å¿ƒæŠŠçª—å£ç»™å…³äº†ï¼Œè¿™æ—¶å€™ï¼Œæ‰€æœ‰å¯¹è¯å†å²å…¨éƒ¨æ¶ˆå¤±ï¼Œéš¾é“åˆè¦ä»å¤´å¼€å§‹å—ï¼Ÿ</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<p>å‘½ä»¤:<code>claude --resume</code>Â  æˆ–è€…åœ¨ Claude äº¤äº’çª—å£ï¼Œè¾“å…¥<code>Â /resume</code></p>
<p>è¿™æ ·ä¼šæŠŠæ‰€æœ‰çš„å†å²æ–‡åŒ–éƒ½ç»™ä½ æ˜¾ç¤ºå‡ºæ¥ï¼Œéœ€è¦ç”¨å“ªä¸ªç›´æ¥é€‰æ‹©å¯¹åº”çš„ä¼šè¯ï¼Œä¹‹å‰çš„ä¸Šä¸‹æ–‡å°±ä¼šå…¨éƒ½å›æ¥äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3bcc59628cd94ff89b04f86f39d2f639~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767242071&amp;x-signature=yGe4loV6n9kLUgu8G%2Fzlzm%2BsqSQ%3D" alt="img" loading="lazy"/><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f243d431bae64fc8ad3a62ee4b0a1333~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767242071&amp;x-signature=dG1ADvYuak6AdJXaIhE%2BLRc8fCc%3D" alt="img" loading="lazy"/></p>
<h3 data-id="heading-1">2ã€Claude ç”¨ç€ç”¨ç€æ„Ÿè§‰å¹»è§‰ä¸¥é‡ï¼Œå›ç­”çš„ç‰›å¤´ä¸å¯¹é©¬å˜´ã€‚ç”¨<code>Â /context</code></h3>
<p>åœ¨ä½ æŒ‡æŒ¥ Claude å†™ä»£ç ï¼Œå†™äº†ä¸€æ®µæ—¶é—´ä¹‹åï¼Œä½ å‘ç°ä»–å¼€å§‹çæ”¹ä»£ç ï¼Œå‡ºç°æ˜æ˜¾çš„å¹»è§‰ã€‚</p>
<p>è¿™æ—¶å€™ä½ å°±è¦çœ‹ä¸€ä¸‹ä½ çš„ä¸Šä¸‹æ–‡çª—å£æ˜¯ä¸æ˜¯è¢«å¡æ»¡äº†ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<p>åœ¨ Claude äº¤äº’çª—å£ï¼Œè¾“å…¥<code>/context</code></p>
<p>è¿™ä¸ªå‘½ä»¤å¯ä»¥ç”¨å¯è§†åŒ–çš„æ–¹å¼æ˜¾ç¤ºä¸Šä¸‹æ–‡å ç”¨æƒ…å†µã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50565d732fbe453d8ae9e2c777040399~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767242071&amp;x-signature=NM%2B%2FSEKTiKzfHT85ko5XREYdGgk%3D" alt="img" loading="lazy"/><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f5a6d4d09034e8584ff1e5c5c95563b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767242071&amp;x-signature=Qq98yKb9S041QU%2B8gm9pBQNgXYg%3D" alt="img" loading="lazy"/></p>
<p>å¦‚æœæ˜¯å†å²æ¶ˆæ¯å ç”¨çš„tokenè¿‡å¤šå°±å¯ä»¥ä½¿ç”¨Â <code>/clear</code>Â å»æ¸…ç†ã€‚</p>
<p>å¦‚æœæ˜¯ç³»ç»Ÿæç¤ºè¯å¤ªå¤§ï¼Œå°±è¦å»çœ‹ä¸€ä¸‹æ˜¯ä¸æ˜¯Claude è§„åˆ™å†™å¤ªå¤šäº†ã€‚</p>
<p>å¦‚æœæ˜¯MCPå·¥å…·å ç”¨çš„ token å¤ªå¤šäº†ï¼Œå°±éœ€è¦å…ˆå¸è½½ä¸€éƒ¨åˆ†ä¸å¸¸ç”¨çš„MCPå·¥å…·ã€‚</p>
<h3 data-id="heading-2">3ã€ä¸çŸ¥é“ token ç”¨äº†å¤šå°‘? ç”¨<code>Â /stats</code></h3>
<p>å½“ä½ åœ¨ç–¯ç‹‚ç”¨ Claude Code å¼€å‘çš„æ—¶å€™ï¼Œæƒ³è¦çœ‹ä¸€ä¸‹ç”¨äº†å¤šå°‘token çš„æ—¶å€™ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<p>åœ¨ Claude äº¤äº’çª—å£ï¼Œè¾“å…¥<code>/stats</code></p>
<p>è¿™æ¡å‘½ä»¤å¯ä»¥è®©ä½ çœ‹åˆ°æ‰€æœ‰çš„ä½¿ç”¨æ•°æ®ï¼ŒåŒ…æ‹¬ tokenã€è¿ç»­å¤©æ•°ã€æ´»è·ƒæ—¶æ®µã€ä½¿ç”¨çš„æ¨¡å‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c63be2f7a98f4278930b1555f822b9e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767242071&amp;x-signature=sxuxwp%2Bv4C4PwR%2FTd%2BVsrd4Xn14%3D" alt="img" loading="lazy"/><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8956bd6c87bf49179ae1c7a332a0033b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767242071&amp;x-signature=UjxUJ3tThkVKbrnAswxST1K9%2BMI%3D" alt="img" loading="lazy"/></p>
<p>çœ‹åˆ°è¿™é‡Œå¯ä»¥åœ¨è¯„è®ºåŒºæ™’ä¸€ä¸‹ä½ çš„æ¨¡å‹å’Œ token çš„ä½¿ç”¨æ•°æ®ï¼Œå“ˆå“ˆå“ˆğŸ˜„</p>
<h3 data-id="heading-3">4ã€Claude åŒæ—¶å¼€å¤šä¸ªçª—å£æ¥å›åˆ‡ï¼Ÿç”¨Â <code>/rename</code></h3>
<p>å¦‚æœä½ åŒæ—¶å¼€å¤šä¸ª Claude çª—å£ï¼Œæ—¶é—´é•¿äº†å¯èƒ½å°±åˆ†ä¸æ¸…å“ªä¸ªå¯¹å“ªä¸ªäº†ã€‚ä¸‹æ¬¡å†<code>Â /resume</code>Â  çœ‹åˆ°ä¸€å †ç³»ç»Ÿé»˜è®¤çš„å‘½åä¹Ÿå®Œå…¨ä¸çŸ¥é“å“ªä¸ªæ˜¯å“ªä¸ªã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<p>åœ¨ Claude äº¤äº’çª—å£ï¼Œè¾“å…¥<code>/rename ä¼šè¯åå­—Â </code></p>
<p>è¿™ä¸ªå‘½ä»¤ä¼šç»™ä½ å½“å‰çš„ä¼šè¯èµ·ä¸€ä¸ªæœ‰æ„ä¹‰çš„åå­—ï¼Œè®©ä½ ä¸‹æ¬¡ä¸€çœ¼å°±èƒ½æ‰¾åˆ°è¿™ä¸ªä¼šè¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6253b9dc1ffd45bbb41580b91353ada6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767242071&amp;x-signature=t9llZd%2BeArILgb94I%2BIZdzabUmk%3D" alt="img" loading="lazy"/><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/55b8926c5a1147ea853e7c08258caacd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767242071&amp;x-signature=kZSEsU2P1PPnTZRckY8L6rtKueI%3D" alt="img" loading="lazy"/></p>
<p><strong>å‘½åè§„åˆ™ï¼š</strong></p>
<p>å¯ä»¥æ ¹æ®ä½ è‡ªå·±çš„å–œå¥½ã€‚ æˆ–è€…ä½¿ç”¨ï¼ŒÂ <strong>é¡¹ç›®å-åŠŸèƒ½æ¨¡å—</strong></p>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ-æŸ¥è¯¢å­¦ç”Ÿ</li>
<li>å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ-åˆ é™¤å­¦ç”Ÿ</li>
</ul>
<p><strong>é…åˆä½¿ç”¨ï¼š</strong></p>
<ol>
<li>æ–°é¡¹ç›®å¼€å§‹æ—¶ï¼Œå…ˆÂ <code>/rename</code>Â å‘½å</li>
<li>æ¯å¤© resume æ—¶ï¼Œä¸€çœ¼æ‰¾åˆ°å¯¹åº”ä¼šè¯</li>
<li>å¤šå¼€å‡ ä¸ªç»ˆç«¯ï¼ŒåŒæ—¶æ¨è¿›ä¸åŒåŠŸèƒ½</li>
</ol>
<h3 data-id="heading-4">5ã€ä»£ç æ”¹åäº†ï¼Œæƒ³æ’¤å›æ›´æ”¹ï¼Ÿ åŒå‡» ESC é”®</h3>
<p>å½“ä½ æŒ‡æŒ¥ Claude ä¿®æ”¹æŸä¸€ä¸ªåŠŸèƒ½çš„æ—¶å€™ï¼ŒClaude ä¸€ä¸å°å¿ƒæŠŠè¿™ä¸ªåŠŸèƒ½ç»™æ”¹åäº†ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<p>è¿™æ—¶å€™ä½ è‚¯å®šæƒ³æ’¤å›ä¿®æ”¹ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<p>åŒå‡»Â <code>ESC</code>Â é”®</p>
<p>è¿™ä¸ªæ“ä½œä¼šæ˜¾ç¤ºå†å²èŠ‚ç‚¹ï¼Œä½ å¯ä»¥é€‰æ‹©å›åˆ°å“ªä¸€æ­¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/130b41efda35487ea3f2738b65e71765~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767242071&amp;x-signature=4vtSSn4IRGg4l3uXN0bIjSPUKI0%3D" alt="img" loading="lazy"/></p>
<p>å‡å¦‚æˆ‘å¯¹è¿™ä¸€æ¬¡çš„æ“ä½œä¸æ»¡æ„ï¼Œæˆ‘æƒ³å›åˆ°ä¸Šä¸€æ­¥ã€‚é‚£è¿™æ—¶å€™æˆ‘å°±å¯ä»¥åŒå‡» ESCé”®ã€‚</p>
<p>å®ƒå°±ä¼šæ˜¾ç¤ºä½ ä¹‹å‰æ“ä½œçš„å†å²èŠ‚ç‚¹ï¼Œä½ å¯ä»¥é€‰æ‹©å›åˆ°å“ªä¸€ä¸ªèŠ‚ç‚¹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aaf821f1d51d4dd6805b74d2a60c7271~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767242071&amp;x-signature=9FdSnMoefXMpxhx%2BORig0LJVNAI%3D" alt="img" loading="lazy"/><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d2535ca53104c4fa89239e712749383~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767242071&amp;x-signature=9OxC07poi0UvnUZZtZcy3ZQ9Q48%3D" alt="img" loading="lazy"/><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77e124ef013e4849a4d03777dc030006~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767242071&amp;x-signature=MhGJ1mCtQNbHk1cCvnBdKwRxGw0%3D" alt="img" loading="lazy"/></p>
<p>æœ‰äº†è¿™ä¸ªåŠŸèƒ½ä¹‹åï¼Œæœ‰ä»»ä½•æƒ³æ³•ï¼Œä½ å°±å¯ä»¥ç›´æ¥è®© Claude ä¸Šæ‰‹å»æ”¹ã€‚æ”¹é”™äº†æ²¡å…³ç³»ï¼Œç›´æ¥åŒå‡»ESCï¼Œé€‰æ¢å¤ä»£ç å’Œå¯¹è¯ï¼Œç«‹åˆ»å›åˆ°ä¹‹å‰çš„çŠ¶æ€ï¼Œé›¶æˆæœ¬è¯•é”™</p>
<h3 data-id="heading-5">6ã€é’ˆå¯¹å¤æ‚ä»»åŠ¡ï¼ŒåŠ  UltraThink ï¼Œè´¨é‡ç«‹é©¬é£å‡</h3>
<p>æ¯”å¦‚ä½ è®© Claude è®¾è®¡ä¸€ä¸ªå¤æ‚çš„æ—¥å†ç»„ä»¶ï¼Œä½†æ˜¯ç¬¬ä¸€ç‰ˆå‡ºæ¥çš„ç»“æœå¾ˆæ™®é€šï¼Œä¸å¤Ÿç²¾è‡´ã€‚ä½ æƒ³è¦çš„æ˜¯é‚£ç§èƒ½ç›´æ¥æ”¾è¿›äº§å“çš„è´¨é‡ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<p>åœ¨æç¤ºè¯é‡ŒåŠ ä¸€ä¸ªè¯ï¼šUltraThink</p>
<p>è¿™æ · Claude ä¼šèŠ±æ›´å¤šæ—¶é—´æ€è€ƒï¼Œç»™å‡ºæ›´å¥½çš„æ–¹æ¡ˆï¼ˆå®ƒç”šè‡³ä¼šå˜æˆå½©è™¹è‰²ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b46ca289449347da9725da8068e87c73~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767242071&amp;x-signature=F1KEMj4WFhM97mzC6RIZwVa80hI%3D" alt="img" loading="lazy"/></p>
<p><strong>ä»€ä¹ˆæ—¶å€™ç”¨ï¼š</strong></p>
<ul>
<li>å¤æ‚çš„æ¶æ„è®¾è®¡</li>
<li>éœ€è¦ç²¾è‡´çš„ UI ç»„ä»¶</li>
<li>å›°éš¾çš„ Bug è°ƒè¯•</li>
</ul>
<p><strong>ä»€ä¹ˆæ—¶å€™ä¸ç”¨ï¼š</strong></p>
<ul>
<li>ç®€å•çš„å¢åˆ æ”¹æŸ¥</li>
<li>æ”¹ä¸ªæ–‡æ¡ˆ/é¢œè‰²</li>
<li>æ—¥å¸¸å°è°ƒæ•´</li>
</ul>
<p>å› ä¸º UltraThink ä¼šæ¶ˆè€—æ›´å¤š token å’Œæ—¶é—´</p>
<h3 data-id="heading-6">7ã€æ— æ¡ä»¶ä¿¡ä»» Claude ï¼Œå¼€å¯ YOLO æ¨¡å¼</h3>
<p>å½“ä½ ç»™ Claude ä¸€ä¸ªé•¿æœŸä»»åŠ¡ï¼Œæ¯”å¦‚ï¼šé‡æ„æ•´ä¸ªè®¤è¯ç³»ç»Ÿ,åŠ ä¸Šå•å…ƒæµ‹è¯•ã€‚</p>
<p>ç„¶åä½ ä¼šå‘ç°ä½ éœ€è¦ä¸åœåœ°ç‚¹ï¼Œæ¥å— â†’ æ¥å— â†’ æ¥å— ï¼Œéœ€è¦ä¸€ç›´å®ˆç€ç‚¹ç¡®è®¤ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<p>å‘½ä»¤:<code>claude --dangerously-skip-permissions</code></p>
<p>è¿™æ · Claude å°±ä¸ä¼šå†é—®ä½ è¦æƒé™ï¼Œç›´æ¥æ‰§è¡Œ</p>
<p><strong>è¿™ä¸ªåŠŸèƒ½é€‚åˆï¼š</strong></p>
<ul>
<li>å¯¹ Claude Code éå¸¸ç†Ÿæ‚‰çš„äºº</li>
<li>ç»™çš„æ˜¯æ¸…æ™°ã€æ˜ç¡®çš„ä»»åŠ¡</li>
<li>æœ‰å®Œæ•´çš„ Git ç‰ˆæœ¬æ§åˆ¶</li>
</ul>
<p><strong>è¿™ä¸ªåŠŸèƒ½ä¸é€‚åˆï¼š</strong></p>
<ul>
<li>åˆšå¼€å§‹ç”¨ Claude Code çš„æ–°æ‰‹</li>
<li>åœ¨ç”Ÿäº§ç¯å¢ƒç›´æ¥æ“ä½œ</li>
<li>ä»»åŠ¡æè¿°æ¨¡ç³Šä¸æ¸…</li>
</ul>
<p>å½“ä½ å¼€å¯ YOLO æ¨¡å¼çš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°ä»–èƒ½å¤Ÿå¸®ä½ èŠ‚çœ50%çš„æ—¶é—´ã€‚</p>
<h3 data-id="heading-7">8ã€ä¸€é”®å®‰è£…ç¥å™¨ï¼Œ<code>/pluginsÂ </code>æ’ä»¶å•†åº—</h3>
<p>å‡å¦‚ä½ æƒ³ç”¨ Claude æ“ä½œ GitHubã€Figmaã€Notion ï¼Œä½†ä¸çŸ¥é“æ€ä¹ˆé…ç½® MCP æœåŠ¡å™¨ã€‚ç½‘ä¸Šæ•™ç¨‹åˆé•¿åˆå¤æ‚ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<p>å‘½ä»¤:<code>/plugins</code></p>
<p>å®ƒå¯ä»¥ä¸€é”®å¸®ä½ å®‰è£…å„ç§ skill å’Œ MCPã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dfd55d64543c4fb2b5c375c69970e5d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767242071&amp;x-signature=GVdBRVBTtLBSuFJHJErLxw8xzOc%3D" alt="img" loading="lazy"/></p>
<h3 data-id="heading-8">9ã€æç¤ºè¯å†™ä¸€åŠï¼Œæƒ³èµ·æ¥è¦å…ˆä¿®ä¸ª bug ï¼Ÿç”¨<code>Ctrl+S</code>æš‚å­˜èµ·æ¥</h3>
<p>å½“ä½ å†™äº†å¾ˆé•¿ä¸€å¤§ä¸²çš„æç¤ºè¯ï¼Œå†™åˆ°ä¸€åŠï¼Œçªç„¶æƒ³èµ·è¿˜æœ‰ä¸ª Bug è¦å…ˆä¿®ã€‚</p>
<p>ç„¶åä½ å°±ä¸€ç›´æŒ‰ä½ Backspace ï¼ŒæŠŠåˆšæ‰è¾›è‹¦å†™çš„æç¤ºè¯å…¨éƒ¨éƒ½åˆ äº†ï¼Œå…ˆä¿®è¿™ä¸ª bugï¼Œä¿®å®Œä¹‹ååˆé‡æ–°å†™åˆšæ‰çš„æç¤ºè¯ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<p>å¿«æ·é”®:<code>Ctrl+S</code></p>
<p>å®ƒå¯ä»¥æš‚å­˜ä½ å½“å‰çš„æç¤ºè¯ï¼Œç­‰ä½ å¤„ç†å®Œå…¶ä»–äº‹æƒ…åè‡ªåŠ¨æ¢å¤ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12898fa5da0d41df9ed3c1ebfb0abd0b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767242071&amp;x-signature=jKtsb%2FuIAb5vgjp0svjFDSAnZ6o%3D" alt="img" loading="lazy"/></p>
<p>å‡å¦‚ç°åœ¨æˆ‘è¾“äº†ä¸€å¤§æ®µçš„æç¤ºè¯ï¼Œä½†æ˜¯çªç„¶å‘ç°æˆ‘éœ€è¦å…ˆä¿®ä¸€ä¸ªbugã€‚</p>
<p>æŒ‰ç…§ä»¥å¾€ï¼Œæˆ‘åªèƒ½å…ˆæŠŠè¿™æ®µæç¤ºè¯ç»™åˆ äº†ã€‚ä½†æ˜¯ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨å¿«æ·é”®Â <code>Ctrl+S</code>ï¼ŒæŠŠè¿™æ®µæç¤ºè¯ç»™æš‚å­˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7605d07286e045a0b51f9bef087950e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767242071&amp;x-signature=%2BSkCv%2Bmv%2FyUHZkjea9lc6sAYXdk%3D" alt="img" loading="lazy"/></p>
<p>æ­¤æ—¶è¿™ä¸ªçª—å£ä½ å°±å¯ä»¥ç”¨æ¥å…ˆå»ä¿®bugã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5397897eff22408f8ea59704e462eb26~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767242071&amp;x-signature=B15kz4kzlvwkyZv7eYzgkXRgVIQ%3D" alt="img" loading="lazy"/></p>
<p>å½“æˆ‘å›è½¦æäº¤è¿™ä¸ªå‘½ä»¤ä¹‹åï¼Œä¸Šé¢æš‚å­˜çš„æç¤ºè¯ä¼šè‡ªåŠ¨å›åˆ°å¯¹è¯çª—å£ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf5ede8bb54a460d84f75983d3acfb26~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767242071&amp;x-signature=NfIotzHyqamARU5KowM5c%2Ftf8rU%3D" alt="img" loading="lazy"/></p>
<p><strong>ä»€ä¹ˆæ—¶å€™ç”¨ï¼š</strong></p>
<ul>
<li>å†™é•¿æç¤ºè¯æ—¶çªç„¶æƒ³èµ·å…¶ä»–äº‹</li>
<li>éœ€è¦å…ˆæŸ¥çœ‹æŸä¸ªæ–‡ä»¶å†ç»§ç»­</li>
<li>ä¸´æ—¶è¢«æ‰“æ–­ä½†ä¸æƒ³ä¸¢å¤±æ€è·¯</li>
</ul>
<h3 data-id="heading-9">10ã€æƒ³å¯¼å‡ºå®Œæ•´èŠå¤©è®°å½•ï¼Ÿç”¨<code>Â /export</code></h3>
<p>å½“ä½ å’Œ Claude èŠäº†ä¸€è½®åˆä¸€è½®ï¼Œç§¯ç´¯äº†éå¸¸å¤šæœ‰ä»·å€¼çš„ä¸Šä¸‹æ–‡ï¼Œæƒ³è¦æŠŠè¿™ä¸ªä¸Šä¸‹æ–‡ä¿å­˜ä¸‹æ¥ï¼Œæ–¹ä¾¿ä¸‹æ¬¡ä½¿ç”¨ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<p>å‘½ä»¤:Â <code>/export æ–‡ä»¶å</code></p>
<p>è¿™ä¸ªå‘½ä»¤ä¼šå¸®ä½ æŠŠæ•´ä¸ªå¯¹è¯ä»¥ Markdown æ ¼å¼è½¬å‚¨ï¼ŒåŒ…æ‹¬æ¯ä¸€ä¸ªæç¤ºã€æ¯ä¸€æ¡å›å¤ä»¥åŠæ¯ä¸€æ¬¡å·¥å…·è°ƒç”¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37759addc7694d0da09a37904a04af1d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767242071&amp;x-signature=v2jauD236eHeVk1HOzxvWRZUA1Q%3D" alt="img" loading="lazy"/></p>
<p>ç„¶ååœ¨ä½ çš„é¡¹ç›®ç›®å½•ä¸‹å°±å¯ä»¥çœ‹åˆ°è¿™ä»½èŠå¤©è®°å½•</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/895d4c58979b4c8e9ede17acdf243a8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767242071&amp;x-signature=hGeIGvGHosbjGrGj1Ik967%2FYUA4%3D" alt="img" loading="lazy"/></p>
<p>ä»¥ä¸Šè¿™äº›å‘½ä»¤ï¼Œå¤§å®¶éƒ½ç”¨è¿‡å‡ ä¸ªï¼Ÿå“ªä¸ªå‘½ä»¤ä½ å¹³å¸¸ç”¨çš„æœ€å¤šï¼Ÿå¯ä»¥èŠä¸€èŠ</p>
<p>æœ€åï¼Œè§‰å¾—æœ‰æ”¶è·çš„è¯ï¼Œå¯ä»¥ç‚¹ä¸ªå…³æ³¨ï¼Œä¼šæŒç»­åˆ†äº«å¹²è´§å†…å®¹ğŸ«¶</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ¨¡å‹åŸç†å‰–æâ€”â€”çŸ©é˜µå¸æ”¶ä¼˜åŒ–ï¼šLLMæ¨ç†åŠ é€Ÿçš„æ ¸å¿ƒåŸç†ä¸å®è·µ]]></title>    <link>https://juejin.cn/post/7587343333329256482</link>    <guid>https://juejin.cn/post/7587343333329256482</guid>    <pubDate>2025-12-25T05:41:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587343333329256482" data-draft-id="7587342664078016527" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ¨¡å‹åŸç†å‰–æâ€”â€”çŸ©é˜µå¸æ”¶ä¼˜åŒ–ï¼šLLMæ¨ç†åŠ é€Ÿçš„æ ¸å¿ƒåŸç†ä¸å®è·µ"/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2025-12-25T05:41:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‰¾é†’"/> <meta itemprop="url" content="https://juejin.cn/user/708512558088669"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ¨¡å‹åŸç†å‰–æâ€”â€”çŸ©é˜µå¸æ”¶ä¼˜åŒ–ï¼šLLMæ¨ç†åŠ é€Ÿçš„æ ¸å¿ƒåŸç†ä¸å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/708512558088669/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‰¾é†’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T05:41:10.000Z" title="Thu Dec 25 2025 05:41:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>çŸ©é˜µå¸æ”¶ä¼˜åŒ–æ˜¯é’ˆå¯¹Transformeræ¶æ„å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„<strong>æ— ç²¾åº¦æŸå¤±æ¨ç†åŠ é€ŸæŠ€æœ¯</strong>ï¼Œæ ¸å¿ƒé€šè¿‡åˆ©ç”¨çŸ©é˜µä¹˜æ³•ç»“åˆå¾‹å’Œæ¨¡å‹å‚æ•°çš„å›ºå®šæ€§ï¼Œå°†å†—ä½™çš„åœ¨çº¿çŸ©é˜µä¹˜æ³•æå‰ç¦»çº¿é¢„è®¡ç®—ï¼Œä»è€Œå‡å°‘æ¨ç†æ—¶çš„è®¡ç®—é‡ã€é™ä½å»¶è¿Ÿã€‚è¯¥æŠ€æœ¯å°¤å…¶é€‚ç”¨äºè‡ªæ³¨æ„åŠ›æœºåˆ¶çš„è®¡ç®—ç“¶é¢ˆä¼˜åŒ–ï¼Œåœ¨ä¸æ”¹å˜æ¨¡å‹è¾“å‡ºç»“æœçš„å‰æä¸‹ï¼Œå¯å®ç°çº¦1.7å€çš„æ¨ç†é€Ÿåº¦æå‡ï¼Œæ˜¯LLMæœ¬åœ°åŒ–éƒ¨ç½²ã€é«˜å¹¶å‘APIæœåŠ¡ç­‰åœºæ™¯çš„å…³é”®ä¼˜åŒ–æ‰‹æ®µä¹‹ä¸€ã€‚</p>
<h2 data-id="heading-1">å…ˆæ˜ç¡®æ ¸å¿ƒèƒŒæ™¯ï¼šTransformerè‡ªæ³¨æ„åŠ›çš„æ ‡å‡†è®¡ç®—æµç¨‹</h2>
<p>è¦ç†è§£çŸ©é˜µå¸æ”¶ä¼˜åŒ–çš„ä»·å€¼ï¼Œéœ€å…ˆå›é¡¾Transformerè‡ªæ³¨æ„åŠ›æœºåˆ¶çš„æ ¸å¿ƒè®¡ç®—æ­¥éª¤ã€‚å‡è®¾æ¨¡å‹è¾“å…¥åºåˆ—ç»è¿‡è¯åµŒå…¥+ä½ç½®ç¼–ç åå¾—åˆ°ç‰¹å¾çŸ©é˜µ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span></span>ï¼ˆç»´åº¦ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo>Ã—</mo><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></mrow><annotation encoding="application/x-tex">LÃ—d_{model}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"/><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi></mrow><annotation encoding="application/x-tex">L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">L</span></span></span></span></span> ä¸ºåºåˆ—é•¿åº¦ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></mrow><annotation encoding="application/x-tex">d_{model}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ä¸ºæ¨¡å‹éšè—å±‚ç»´åº¦ï¼‰ï¼Œè‡ªæ³¨æ„åŠ›çš„æ ‡å‡†è®¡ç®—é€»è¾‘å¦‚ä¸‹ï¼š</p>
<h3 data-id="heading-2">1. æ ¸å¿ƒç¬¦å·å®šä¹‰</h3>
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mi>q</mi></msub><mo separator="true">,</mo><msub><mi>C</mi><mi>k</mi></msub><mo separator="true">,</mo><msub><mi>C</mi><mi>v</mi></msub></mrow><annotation encoding="application/x-tex">C_q, C_k, C_v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼šè¾“å…¥ç‰¹å¾ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span></span>åˆ†åˆ«å¯¹åº”æŸ¥è¯¢ï¼ˆQueryï¼‰ã€é”®ï¼ˆKeyï¼‰ã€å€¼ï¼ˆValueï¼‰çš„è¾“å…¥ç‰¹å¾ï¼ˆå®é™…ä¸­é€šå¸¸æ˜¯åŒä¸€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span></span> ç»è¿‡ä¸åŒçº¿æ€§å±‚æŠ•å½±ï¼Œæ­¤å¤„åˆ†å¼€è¡¨ç¤ºæ›´æ¸…æ™°ï¼‰ï¼›</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>q</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">W_q^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2244em;vertical-align:-0.3831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span/></span></span></span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>k</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">W_k^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1244em;vertical-align:-0.2831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4169em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>v</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">W_v^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0883em;vertical-align:-0.247em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span/></span></span></span></span></span></span></span></span></span>ï¼šæŸ¥è¯¢ã€é”®ã€å€¼çš„<strong>ä¸ŠæŠ•å½±çŸ©é˜µ</strong>ï¼ˆæ¨¡å‹é¢„è®­ç»ƒå¥½çš„å›ºå®šå‚æ•°ï¼Œç»´åº¦ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub><mo>Ã—</mo><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">d_{model}Ã—d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> ä¸ºæ³¨æ„åŠ›å¤´çš„ç»´åº¦ï¼Œæ»¡è¶³ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>k</mi></msub><mo>=</mo><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub><mi mathvariant="normal">/</mi><mi>n</mi><mi>u</mi><msub><mi>m</mi><mrow><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>s</mi></mrow></msub></mrow><annotation encoding="application/x-tex">d_k = d_{model} / num_{heads}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">/</span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>)ï¼›</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼šæ³¨æ„åŠ›å¤´ç»´åº¦ï¼Œç”¨äºç¼©æ”¾æ³¨æ„åŠ›åˆ†æ•°ï¼ˆé¿å…æ•°å€¼è¿‡å¤§ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-3">2. æ ‡å‡†è‡ªæ³¨æ„åŠ›è®¡ç®—æ­¥éª¤ï¼ˆ3æ¬¡çŸ©é˜µä¹˜æ³•ï¼‰</h3>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow/></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mn>1.</mn><mtext>æŠ•å½±è®¡ç®—ï¼šÂ </mtext><mi>Q</mi><mo>=</mo><msub><mi>C</mi><mi>q</mi></msub><mo>â‹…</mo><msubsup><mi>W</mi><mi>q</mi><mi>U</mi></msubsup><mo separator="true">,</mo><mtext>Â </mtext><mi>K</mi><mo>=</mo><msub><mi>C</mi><mi>k</mi></msub><mo>â‹…</mo><msubsup><mi>W</mi><mi>k</mi><mi>U</mi></msubsup><mo separator="true">,</mo><mtext>Â </mtext><mi>V</mi><mo>=</mo><msub><mi>C</mi><mi>v</mi></msub><mo>â‹…</mo><msubsup><mi>W</mi><mi>v</mi><mi>U</mi></msubsup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow/></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mn>2.</mn><mtext>æ³¨æ„åŠ›åˆ†æ•°è®¡ç®—ï¼šÂ </mtext><mi>A</mi><mi>t</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>=</mo><mi>s</mi><mi>o</mi><mi>f</mi><mi>t</mi><mi>m</mi><mi>a</mi><mi>x</mi><mrow><mo fence="true">(</mo><mfrac><mrow><mi>Q</mi><mo>â‹…</mo><msup><mi>K</mi><mi>T</mi></msup></mrow><msqrt><msub><mi>d</mi><mi>k</mi></msub></msqrt></mfrac><mo fence="true">)</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow/></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mn>3.</mn><mtext>è¾“å‡ºè®¡ç®—ï¼šÂ </mtext><mi>O</mi><mi>u</mi><mi>t</mi><mi>p</mi><mi>u</mi><mi>t</mi><mo>=</mo><mi>A</mi><mi>t</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>â‹…</mo><mi>V</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{align*}
&amp;1. \text{æŠ•å½±è®¡ç®—ï¼š} \ Q = C_q \cdot W_q^U, \ K = C_k \cdot W_k^U, \ V = C_v \cdot W_v^U \\
&amp;2. \text{æ³¨æ„åŠ›åˆ†æ•°è®¡ç®—ï¼š} \ Attention = softmax\left( \frac{Q \cdot K^T}{\sqrt{d_k}} \right) \\
&amp;3. \text{è¾“å‡ºè®¡ç®—ï¼š} \ Output = Attention \cdot V
\end{align*}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:5.8428em;vertical-align:-2.6714em;"/><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.1714em;"><span style="top:-5.7984em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"/></span><span style="top:-3.597em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"/></span><span style="top:-1.5069em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"/></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.6714em;"><span/></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.1714em;"><span style="top:-5.7984em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"><span class="mord"/><span class="mord">1.</span><span class="mord text"><span class="mord cjk_fallback">æŠ•å½±è®¡ç®—ï¼š</span></span><span class="mspace">Â </span><span class="mord mathnormal">Q</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span/></span></span></span></span></span></span></span><span style="top:-3.597em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"><span class="mord"/><span class="mord">2.</span><span class="mord text"><span class="mord cjk_fallback">æ³¨æ„åŠ›åˆ†æ•°è®¡ç®—ï¼š</span></span><span class="mspace">Â </span><span class="mord mathnormal">A</span><span class="mord mathnormal">tt</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord mathnormal">so</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">t</span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5183em;"><span style="top:-2.2528em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8572em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-2.8172em;"><span class="pstrut" style="height:3em;"/><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702&#10;c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14&#10;c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54&#10;c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10&#10;s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429&#10;c69,-144,104.5,-217.7,106.5,-221&#10;l0 -0&#10;c5.3,-9.3,12,-14,20,-14&#10;H400000v40H845.2724&#10;s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7&#10;c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z&#10;M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1828em;"><span/></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.93em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span></span></span><span style="top:-1.5069em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"><span class="mord"/><span class="mord">3.</span><span class="mord text"><span class="mord cjk_fallback">è¾“å‡ºè®¡ç®—ï¼š</span></span><span class="mspace">Â </span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mord mathnormal">u</span><span class="mord mathnormal">tp</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord mathnormal">A</span><span class="mord mathnormal">tt</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.6714em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<p><strong>å…³é”®ç“¶é¢ˆ</strong>ï¼šæ­¥éª¤1ä¸­éœ€åŒæ—¶è®¡ç®— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord mathnormal">Q</span></span></span></span></span> å’Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span></span> çš„æŠ•å½±ï¼ˆ2æ¬¡ç‹¬ç«‹çš„çŸ©é˜µä¹˜æ³•ï¼‰ï¼Œæ­¥éª¤2ä¸­è¿˜éœ€è®¡ç®— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><mo separator="true">â‹…</mo><msup><mi>K</mi><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">QÂ·K^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0358em;vertical-align:-0.1944em;"/><span class="mord mathnormal">Q</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></span>ï¼Œå½“ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi></mrow><annotation encoding="application/x-tex">L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">L</span></span></span></span></span>ï¼ˆåºåˆ—é•¿åº¦ï¼‰æˆ– <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></mrow><annotation encoding="application/x-tex">d_{model}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆéšè—å±‚ç»´åº¦ï¼‰è¾ƒå¤§æ—¶ï¼ˆå¦‚LLMä¸­ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub><mo>=</mo><mn>2048</mn><mi mathvariant="normal">/</mi><mn>4096</mn></mrow><annotation encoding="application/x-tex">d_{model}=2048/4096</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">2048/4096</span></span></span></span></span>ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo>=</mo><mn>2048</mn></mrow><annotation encoding="application/x-tex">L=2048</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">2048</span></span></span></span></span>ï¼‰ï¼Œè¿™ä¸‰æ­¥çš„çŸ©é˜µä¹˜æ³•ä¼šå æ®æ¨ç†æ—¶çš„ä¸»è¦è®¡ç®—å¼€é”€å’Œå†…å­˜è®¿é—®æˆæœ¬ã€‚</p>
<h2 data-id="heading-4">çŸ©é˜µå¸æ”¶ä¼˜åŒ–çš„æ ¸å¿ƒé€»è¾‘ï¼šé¢„ä¹˜æŠ•å½±çŸ©é˜µï¼Œçœå»åœ¨çº¿è®¡ç®—</h2>
<p>çŸ©é˜µå¸æ”¶ä¼˜åŒ–çš„æ ¸å¿ƒçµæ„Ÿæ¥è‡ªä¸¤ä¸ªå…³é”®ç‚¹ï¼š</p>
<ol>
<li><strong>çŸ©é˜µä¹˜æ³•ç»“åˆå¾‹</strong>ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>A</mi><mo separator="true">â‹…</mo><mi>B</mi><mo stretchy="false">)</mo><mo separator="true">â‹…</mo><mi>C</mi><mo>=</mo><mi>A</mi><mo separator="true">â‹…</mo><mo stretchy="false">(</mo><mi>B</mi><mo separator="true">â‹…</mo><mi>C</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(AÂ·B)Â·C = AÂ·(BÂ·C)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mclose">)</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">A</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mclose">)</span></span></span></span></span>ï¼Œå…è®¸è°ƒæ•´è®¡ç®—é¡ºåºï¼›</li>
<li><strong>æŠ•å½±çŸ©é˜µå›ºå®šæ€§</strong>ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>q</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">W_q^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2244em;vertical-align:-0.3831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span/></span></span></span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>k</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">W_k^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1244em;vertical-align:-0.2831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4169em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span></span></span></span></span> æ˜¯æ¨¡å‹é¢„è®­ç»ƒå¥½çš„å‚æ•°ï¼Œæ¨ç†æ—¶å®Œå…¨ä¸å˜ï¼Œå¯<strong>ç¦»çº¿é¢„è®¡ç®—</strong>å…¶ç»„åˆç»“æœï¼Œæ— éœ€åœ¨çº¿å®æ—¶è®¡ç®—ã€‚</li>
</ol>
<h3 data-id="heading-5">1. ä¼˜åŒ–æ ¸å¿ƒï¼šé¢„è®¡ç®—åˆå¹¶æŠ•å½±çŸ©é˜µ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{qk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span></h3>
<p>å°†æŸ¥è¯¢æŠ•å½±çŸ©é˜µ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>q</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">W_q^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2244em;vertical-align:-0.3831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span/></span></span></span></span></span></span></span></span></span> ä¸é”®æŠ•å½±çŸ©é˜µçš„è½¬ç½® <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msubsup><mi>W</mi><mi>k</mi><mi>U</mi></msubsup><msup><mo stretchy="false">)</mo><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">(W_k^U)^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1244em;vertical-align:-0.2831em;"/><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4169em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></span> æå‰ç¦»çº¿ç›¸ä¹˜ï¼Œå¾—åˆ°åˆå¹¶åçš„æŠ•å½±çŸ©é˜µ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{qk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span>ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub><mo>=</mo><msubsup><mi>W</mi><mi>q</mi><mi>U</mi></msubsup><mo>â‹…</mo><mo stretchy="false">(</mo><msubsup><mi>W</mi><mi>k</mi><mi>U</mi></msubsup><msup><mo stretchy="false">)</mo><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">W_{qk} = W_q^U \cdot (W_k^U)^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.2744em;vertical-align:-0.3831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.1413em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span/></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></span></div>
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{qk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span> ç»´åº¦ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub><mo>Ã—</mo><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></mrow><annotation encoding="application/x-tex">d_{model}Ã—d_{model}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆå›  <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>q</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">W_q^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2244em;vertical-align:-0.3831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span/></span></span></span></span></span></span></span></span></span>æ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub><mo>Ã—</mo><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">d_{model}Ã—d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msubsup><mi>W</mi><mi>k</mi><mi>U</mi></msubsup><msup><mo stretchy="false">)</mo><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">(W_k^U)^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1244em;vertical-align:-0.2831em;"/><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4169em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></span> æ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>k</mi></msub><mo>Ã—</mo><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></mrow><annotation encoding="application/x-tex">d_kÃ—d_{model}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œä¹˜ç§¯åä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub><mo>Ã—</mo><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></mrow><annotation encoding="application/x-tex">d_{model}Ã—d_{model}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼‰ï¼›</li>
<li>é¢„è®¡ç®—æ—¶æœºï¼šæ¨¡å‹åŠ è½½å‰ã€éƒ¨ç½²æ‰“åŒ…æ—¶ï¼ˆä»…éœ€è®¡ç®—ä¸€æ¬¡ï¼Œåç»­æ¨ç†ç›´æ¥å¤ç”¨ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{qk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span>ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-6">2. ä¼˜åŒ–åçš„è‡ªæ³¨æ„åŠ›è®¡ç®—æ­¥éª¤ï¼ˆ2æ¬¡çŸ©é˜µä¹˜æ³•ï¼‰</h3>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow/></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mn>1.</mn><mtext>ç®€åŒ–æŠ•å½±è®¡ç®—ï¼šÂ </mtext><msup><mi>Q</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>=</mo><msub><mi>C</mi><mi>q</mi></msub><mo>â‹…</mo><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub><mo separator="true">,</mo><mtext>Â </mtext><mi>V</mi><mo>=</mo><msub><mi>C</mi><mi>v</mi></msub><mo>â‹…</mo><msubsup><mi>W</mi><mi>v</mi><mi>U</mi></msubsup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow/></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mn>2.</mn><mtext>æ³¨æ„åŠ›åˆ†æ•°è®¡ç®—ï¼šÂ </mtext><mi>A</mi><mi>t</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>=</mo><mi>s</mi><mi>o</mi><mi>f</mi><mi>t</mi><mi>m</mi><mi>a</mi><mi>x</mi><mrow><mo fence="true">(</mo><mfrac><mrow><msup><mi>Q</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>â‹…</mo><msubsup><mi>C</mi><mi>k</mi><mi>T</mi></msubsup></mrow><msqrt><msub><mi>d</mi><mi>k</mi></msub></msqrt></mfrac><mo fence="true">)</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow/></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mn>3.</mn><mtext>è¾“å‡ºè®¡ç®—ï¼šÂ </mtext><mi>O</mi><mi>u</mi><mi>t</mi><mi>p</mi><mi>u</mi><mi>t</mi><mo>=</mo><mi>A</mi><mi>t</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>â‹…</mo><mi>V</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{align*}
&amp;1. \text{ç®€åŒ–æŠ•å½±è®¡ç®—ï¼š} \ Q' = C_q \cdot W_{qk}, \ V = C_v \cdot W_v^U \\
&amp;2. \text{æ³¨æ„åŠ›åˆ†æ•°è®¡ç®—ï¼š} \ Attention = softmax\left( \frac{Q' \cdot C_k^T}{\sqrt{d_k}} \right) \\
&amp;3. \text{è¾“å‡ºè®¡ç®—ï¼š} \ Output = Attention \cdot V
\end{align*}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:5.8197em;vertical-align:-2.6598em;"/><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.1598em;"><span style="top:-5.7868em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"/></span><span style="top:-3.6085em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"/></span><span style="top:-1.5185em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"/></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.6598em;"><span/></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.1598em;"><span style="top:-5.7868em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"><span class="mord"/><span class="mord">1.</span><span class="mord text"><span class="mord cjk_fallback">ç®€åŒ–æŠ•å½±è®¡ç®—ï¼š</span></span><span class="mspace">Â </span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span/></span></span></span></span></span></span></span><span style="top:-3.6085em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"><span class="mord"/><span class="mord">2.</span><span class="mord text"><span class="mord cjk_fallback">æ³¨æ„åŠ›åˆ†æ•°è®¡ç®—ï¼š</span></span><span class="mspace">Â </span><span class="mord mathnormal">A</span><span class="mord mathnormal">tt</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord mathnormal">so</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">t</span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5183em;"><span style="top:-2.2528em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8572em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-2.8172em;"><span class="pstrut" style="height:3em;"/><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702&#10;c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14&#10;c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54&#10;c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10&#10;s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429&#10;c69,-144,104.5,-217.7,106.5,-221&#10;l0 -0&#10;c5.3,-9.3,12,-14,20,-14&#10;H400000v40H845.2724&#10;s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7&#10;c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z&#10;M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1828em;"><span/></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4169em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.93em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span></span></span><span style="top:-1.5185em;"><span class="pstrut" style="height:3.5183em;"/><span class="mord"><span class="mord"/><span class="mord">3.</span><span class="mord text"><span class="mord cjk_fallback">è¾“å‡ºè®¡ç®—ï¼š</span></span><span class="mspace">Â </span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mord mathnormal">u</span><span class="mord mathnormal">tp</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord mathnormal">A</span><span class="mord mathnormal">tt</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.6598em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<h3 data-id="heading-7">3. ä¼˜åŒ–å‰åå¯¹æ¯”ï¼šå‡å°‘1æ¬¡å…³é”®çŸ©é˜µä¹˜æ³•</h3>





























<table><thead><tr><th>é˜¶æ®µ</th><th>æ ‡å‡†è®¡ç®—</th><th>çŸ©é˜µå¸æ”¶ä¼˜åŒ–</th><th>æ ¸å¿ƒå·®å¼‚</th></tr></thead><tbody><tr><td>æŠ•å½±é˜¶æ®µ</td><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><mo>=</mo><msub><mi>C</mi><mi>q</mi></msub><mo separator="true">â‹…</mo><msubsup><mi>W</mi><mi>q</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">Q = C_qÂ·W_q^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord mathnormal">Q</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.2244em;vertical-align:-0.3831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆ1æ¬¡ï¼‰+ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo>=</mo><msub><mi>C</mi><mi>k</mi></msub><mo separator="true">â‹…</mo><msubsup><mi>W</mi><mi>k</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">K = C_kÂ·W_k^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.1244em;vertical-align:-0.2831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4169em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆ1æ¬¡ï¼‰</td><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Q</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>=</mo><msub><mi>C</mi><mi>q</mi></msub><mo separator="true">â‹…</mo><msub><mi>W</mi><mi>q</mi></msub><mi>k</mi></mrow><annotation encoding="application/x-tex">Q' = C_qÂ·W_qk</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9463em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span>ï¼ˆ1æ¬¡ï¼‰</td><td>çœå» <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo>=</mo><msub><mi>C</mi><mi>k</mi></msub><mo separator="true">â‹…</mo><msubsup><mi>W</mi><mi>k</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">K = C_kÂ·W_k^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.1244em;vertical-align:-0.2831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4169em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span></span></span></span></span> çš„åœ¨çº¿è®¡ç®—</td></tr><tr><td>æ³¨æ„åŠ›åˆ†æ•°é˜¶æ®µ</td><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><mo separator="true">â‹…</mo><msup><mi>K</mi><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">QÂ·K^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0358em;vertical-align:-0.1944em;"/><span class="mord mathnormal">Q</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></span>ï¼ˆ1æ¬¡ï¼‰</td><td><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Q</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo separator="true">â‹…</mo><msubsup><mi>C</mi><mi>k</mi><mi>T</mi></msubsup></mrow><annotation encoding="application/x-tex">Q'Â·C_k^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1244em;vertical-align:-0.2831em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4169em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆ1æ¬¡ï¼‰</td><td>ç”¨é¢„è®¡ç®—çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>q</mi></msub><mi>k</mi></mrow><annotation encoding="application/x-tex">W_qk</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span>æ›¿ä»£ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>q</mi><mi>U</mi></msubsup><mo separator="true">â‹…</mo><mo stretchy="false">(</mo><msubsup><mi>W</mi><mi>k</mi><mi>U</mi></msubsup><msup><mo stretchy="false">)</mo><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">W_q^UÂ·(W_k^U)^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2244em;vertical-align:-0.3831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span/></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4169em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></span></td></tr><tr><td>æ€»åœ¨çº¿çŸ©é˜µä¹˜æ³•æ¬¡æ•°</td><td>3æ¬¡</td><td>2æ¬¡</td><td>å‡å°‘1æ¬¡é«˜å¼€é”€çš„æŠ•å½±çŸ©é˜µä¹˜æ³•</td></tr></tbody></table>
<p><strong>å…³é”®ç»“è®º</strong>ï¼šä¼˜åŒ–åçœå»çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo>=</mo><msub><mi>C</mi><mi>k</mi></msub><mo separator="true">â‹…</mo><msubsup><mi>W</mi><mi>k</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">K = C_kÂ·W_k^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.1244em;vertical-align:-0.2831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4169em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span></span></span></span></span> æ˜¯é«˜å¼€é”€è®¡ç®—â€”â€”<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">C_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> ç»´åº¦ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo>Ã—</mo><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></mrow><annotation encoding="application/x-tex">LÃ—d_{model}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"/><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>k</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">W_k^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1244em;vertical-align:-0.2831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4169em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span></span></span></span></span> ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>m</mi></msub><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi><mo>Ã—</mo><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">d_modelÃ—d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œè¯¥ä¹˜æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>L</mi><mo separator="true">â‹…</mo><msub><mi>d</mi><mi>m</mi></msub><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi><mo separator="true">â‹…</mo><msub><mi>d</mi><mi>k</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(LÂ·d_modelÂ·d_k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">L</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>ï¼Œå æ ‡å‡†è‡ªæ³¨æ„åŠ›è®¡ç®—æ€»è€—æ—¶çš„30%~40%ï¼ˆå°¤å…¶å½“ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></mrow><annotation encoding="application/x-tex">d_{model}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> è¾ƒå¤§æ—¶ï¼‰ï¼Œè¿™æ˜¯å®ç°1.7å€åŠ é€Ÿçš„æ ¸å¿ƒåŸå› ã€‚</p>
<h2 data-id="heading-8">åŠ é€Ÿæ¯”èƒŒåçš„è®¡ç®—å¤æ‚åº¦åˆ†æ</h2>
<p>è¦ç†è§£ä¸ºä½•èƒ½å®ç°çº¦1.7å€åŠ é€Ÿï¼Œéœ€ä»<strong>æ—¶é—´å¤æ‚åº¦</strong>å’Œ<strong>å®é™…ç¡¬ä»¶æ‰§è¡Œæ•ˆç‡</strong>ä¸¤æ–¹é¢åˆ†æï¼š</p>
<h3 data-id="heading-9">1. æ—¶é—´å¤æ‚åº¦é‡åŒ–å¯¹æ¯”</h3>
<p>å‡è®¾ï¼šåºåˆ—é•¿åº¦ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo>=</mo><mn>2048</mn></mrow><annotation encoding="application/x-tex">L=2048</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">2048</span></span></span></span></span>ï¼Œéšè—å±‚ç»´åº¦ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub><mo>=</mo><mn>2048</mn></mrow><annotation encoding="application/x-tex">d_{model}=2048</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">2048</span></span></span></span></span>ï¼Œæ³¨æ„åŠ›å¤´ç»´åº¦ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>k</mi></msub><mo>=</mo><mn>64</mn></mrow><annotation encoding="application/x-tex">d_k=64</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">64</span></span></span></span></span>ï¼ˆå¯¹åº”32ä¸ªæ³¨æ„åŠ›å¤´ï¼‰ï¼Œå¿½ç•¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>o</mi><mi>f</mi><mi>t</mi><mi>m</mi><mi>a</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">softmax</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal">so</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">t</span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span></span></span></span></span> å’Œå°å¸¸æ•°é¡¹ï¼Œä»…è®¡ç®—çŸ©é˜µä¹˜æ³•çš„æµ®ç‚¹è¿ç®—æ¬¡æ•°ï¼ˆFLOPsï¼‰ï¼š</p>
<ul>
<li>æ ‡å‡†è®¡ç®—ï¼šæ¯ä¸ªå¤´çš„ <code>Q/K</code> æŠ•å½±FLOPsä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo separator="true">â‹…</mo><msub><mi>d</mi><mi>k</mi></msub><mo separator="true">â‹…</mo><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">LÂ·d_kÂ·d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord mathnormal">L</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆå› æ¯ä¸ªå¤´çš„è¾“å…¥ç‰¹å¾ç»´åº¦æ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub><mi mathvariant="normal">/</mi><mi>n</mi><mi>u</mi><msub><mi>m</mi><mrow><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>s</mi></mrow></msub><mo>=</mo><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">d_{model}/num_{heads} = d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">/</span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼‰ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mi>u</mi><msub><mi>m</mi><mrow><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>s</mi></mrow></msub></mrow><annotation encoding="application/x-tex">num_{heads}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> ä¸ªå¤´çš„æ€»FLOPsä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mi>u</mi><msub><mi>m</mi><mrow><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>s</mi></mrow></msub><mo>Ã—</mo><mo stretchy="false">(</mo><mi>L</mi><mo separator="true">â‹…</mo><msub><mi>d</mi><mi>k</mi></msub><mo separator="true">â‹…</mo><msub><mi>d</mi><mi>k</mi></msub><mo>+</mo><mi>L</mi><mo separator="true">â‹…</mo><msub><mi>d</mi><mi>k</mi></msub><mo separator="true">â‹…</mo><msub><mi>d</mi><mi>k</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mn>2</mn><mo>Ã—</mo><mi>n</mi><mi>u</mi><msub><mi>m</mi><mrow><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>s</mi></mrow></msub><mo>Ã—</mo><mi>L</mi><mo>Ã—</mo><msubsup><mi>d</mi><mi>k</mi><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">num_{heads} Ã— (LÂ·d_kÂ·d_k + LÂ·d_kÂ·d_k) = 2Ã—num_{heads}Ã—LÃ—d_kÂ²</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"/><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord mathnormal">L</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">L</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"/><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"/><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0972em;vertical-align:-0.2831em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-2.4169em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span></span></span></span></span>ï¼›</li>
<li>çŸ©é˜µå¸æ”¶ä¼˜åŒ–ï¼šæ¯ä¸ªå¤´çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{qk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span> æ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>k</mi></msub><mo>Ã—</mo><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">d_kÃ—d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆæŒ‰å¤´æ‹†åˆ†åï¼‰ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Q</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>=</mo><msub><mi>C</mi><mi>q</mi></msub><mo separator="true">â‹…</mo><msub><mi>W</mi><mi>q</mi></msub><mi>k</mi></mrow><annotation encoding="application/x-tex">Q'=C_qÂ·W_qk</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9463em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span> çš„FLOPsä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mi>u</mi><msub><mi>m</mi><mrow><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>s</mi></mrow></msub><mo>Ã—</mo><mi>L</mi><mo separator="true">â‹…</mo><msub><mi>d</mi><mi>k</mi></msub><mo separator="true">â‹…</mo><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">num_{heads} Ã— LÂ·d_kÂ·d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"/><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord mathnormal">L</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œçœå»äº† <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mi>u</mi><msub><mi>m</mi><mrow><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>s</mi></mrow></msub><mo>Ã—</mo><mi>L</mi><mo separator="true">â‹…</mo><msub><mi>d</mi><mi>k</mi></msub><mo separator="true">â‹…</mo><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">num_{heads} Ã— LÂ·d_kÂ·d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"/><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord mathnormal">L</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> çš„KæŠ•å½±FLOPsã€‚</li>
</ul>
<p>å½“ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mi>u</mi><msub><mi>m</mi><mrow><mi>h</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>s</mi></mrow></msub><mo>=</mo><mn>32</mn></mrow><annotation encoding="application/x-tex">num_{heads}=32</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">32</span></span></span></span></span>ï¼ŒL=2048ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>k</mi></msub><mo>=</mo><mn>64</mn></mrow><annotation encoding="application/x-tex">d_k=64</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">64</span></span></span></span></span> æ—¶ï¼š</p>
<ul>
<li>æ ‡å‡†è®¡ç®—æŠ•å½±FLOPsï¼š<code>2Ã—32Ã—2048Ã—64Â² â‰ˆ 5.3e9</code>ï¼›</li>
<li>ä¼˜åŒ–åæŠ•å½±FLOPsï¼š<code>32Ã—2048Ã—64Â² â‰ˆ 2.65e9</code>ï¼›</li>
<li>ä»…æŠ•å½±é˜¶æ®µå°±èŠ‚çœäº†50%çš„FLOPsï¼Œå†åŠ ä¸Šæ³¨æ„åŠ›åˆ†æ•°è®¡ç®—çš„å†…å­˜è®¿é—®ä¼˜åŒ–ï¼ˆæ— éœ€å­˜å‚¨ <code>K</code> çŸ©é˜µï¼Œå‡å°‘å†…å­˜å¸¦å®½å ç”¨ï¼‰ï¼Œç»¼åˆä¸‹æ¥å®ç°1.7å€å·¦å³çš„ç«¯åˆ°ç«¯åŠ é€Ÿï¼ˆå®é™…åŠ é€Ÿæ¯”å—ç¡¬ä»¶ç±»å‹ã€åºåˆ—é•¿åº¦ã€æ¨¡å‹ç»´åº¦å½±å“ï¼Œé€šå¸¸åœ¨1.5~2å€ä¹‹é—´ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-10">2. ç¡¬ä»¶æ‰§è¡Œæ•ˆç‡æå‡</h3>
<p>é™¤äº†å‡å°‘FLOPsï¼ŒçŸ©é˜µå¸æ”¶ä¼˜åŒ–è¿˜èƒ½æå‡<strong>å†…å­˜è®¿é—®æ•ˆç‡</strong>ï¼š</p>
<ul>
<li>æ ‡å‡†è®¡ç®—éœ€å­˜å‚¨ <code>Q</code>ã€<code>K</code>ã€<code>V</code> ä¸‰ä¸ªçŸ©é˜µï¼Œä¼˜åŒ–åä»…éœ€å­˜å‚¨ <code>Q'</code> å’Œ <code>V</code>ï¼Œå‡å°‘äº† <code>K</code> çŸ©é˜µçš„å†…å­˜å ç”¨ï¼ˆå°¤å…¶æ˜¯é•¿åºåˆ—åœºæ™¯ï¼Œ<code>K</code> çŸ©é˜µçš„å­˜å‚¨å¼€é”€æ˜¾è‘—ï¼‰ï¼›</li>
<li>å†…å­˜è®¿é—®å»¶è¿Ÿæ˜¯LLMæ¨ç†çš„é‡è¦ç“¶é¢ˆï¼ˆå°¤å…¶æ˜¯GPUæ˜¾å­˜å¸¦å®½ã€CPUå†…å­˜å¸¦å®½å—é™åœºæ™¯ï¼‰ï¼Œå‡å°‘å†…å­˜å ç”¨å¯é™ä½ç¼“å­˜å‘½ä¸­å¤±è´¥ç‡ï¼Œè¿›ä¸€æ­¥æå‡å®é™…æ‰§è¡Œé€Ÿåº¦ã€‚</li>
</ul>
<h2 data-id="heading-11">çŸ©é˜µå¸æ”¶ä¼˜åŒ–çš„å…³é”®ç‰¹æ€§ä¸é€‚ç”¨åœºæ™¯</h2>
<h3 data-id="heading-12">1. æ ¸å¿ƒä¼˜åŠ¿</h3>
<ul>
<li><strong>æ— ç²¾åº¦æŸå¤±</strong>ï¼šä»…è°ƒæ•´çŸ©é˜µä¹˜æ³•é¡ºåºï¼Œæ•°å€¼è®¡ç®—å®Œå…¨ç­‰ä»·äºæ ‡å‡†è‡ªæ³¨æ„åŠ›ï¼Œä¸å½±å“æ¨¡å‹è¾“å‡ºè´¨é‡ï¼ˆæ— éœ€é‡æ–°è®­ç»ƒæˆ–å¾®è°ƒï¼‰ï¼›</li>
<li><strong>å®ç°æˆæœ¬æä½</strong>ï¼šæ— éœ€ä¿®æ”¹æ¨¡å‹ç»“æ„ï¼Œä»…éœ€åœ¨æ¨ç†å‰é¢„è®¡ç®— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{qk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œå¹¶è°ƒæ•´æ¨ç†æ—¶çš„è®¡ç®—é€»è¾‘ï¼ˆæ›¿æ¢ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><mo separator="true">â‹…</mo><msup><mi>K</mi><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">QÂ·K^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0358em;vertical-align:-0.1944em;"/><span class="mord mathnormal">Q</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></span> ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Q</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo separator="true">â‹…</mo><msubsup><mi>C</mi><mi>k</mi><mi>T</mi></msubsup></mrow><annotation encoding="application/x-tex">Q'Â·C_k^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1244em;vertical-align:-0.2831em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4169em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span></span></span></span></span>ï¼‰ï¼›</li>
<li><strong>å…¼å®¹æ€§å¼º</strong>ï¼šå¯ä¸é‡åŒ–ï¼ˆINT8/INT4ï¼‰ã€ç¨€ç–åŒ–ã€FlashAttentionã€TensorRTç­‰å…¶ä»–æ¨ç†åŠ é€ŸæŠ€æœ¯å åŠ ä½¿ç”¨ï¼ˆä¾‹å¦‚ï¼šé¢„è®¡ç®—çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{qk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span> å¯ç›´æ¥è¿›è¡ŒINT8é‡åŒ–ï¼Œè¿›ä¸€æ­¥é™ä½è®¡ç®—å¼€é”€ï¼‰ï¼›</li>
<li><strong>æ™®é€‚æ€§é«˜</strong>ï¼šé€‚ç”¨äºæ‰€æœ‰åŸºäºTransformerè‡ªæ³¨æ„åŠ›çš„LLMï¼ˆå¦‚GPTç³»åˆ—ã€Llamaç³»åˆ—ã€ChatGLMç³»åˆ—ç­‰ï¼‰ï¼Œæ— è®ºæ˜¯è§£ç å™¨æ¶æ„ï¼ˆDecoder-onlyï¼‰è¿˜æ˜¯ç¼–ç å™¨-è§£ç å™¨æ¶æ„ï¼ˆEncoder-Decoderï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-13">2. é€‚ç”¨åœºæ™¯</h3>
<ul>
<li><strong>é•¿åºåˆ—æ¨ç†</strong>ï¼šåºåˆ—é•¿åº¦ Lè¶Šå¤§ï¼ŒK çŸ©é˜µçš„æŠ•å½±å’Œå­˜å‚¨å¼€é”€è¶Šæ˜¾è‘—ï¼Œä¼˜åŒ–æ•ˆæœè¶Šæ˜æ˜¾ï¼ˆå¦‚æ–‡æ¡£æ‘˜è¦ã€ä»£ç ç”Ÿæˆç­‰é•¿æ–‡æœ¬åœºæ™¯ï¼‰ï¼›</li>
<li><strong>é«˜å¹¶å‘éƒ¨ç½²</strong>ï¼šAPIæœåŠ¡ã€æœ¬åœ°åŒ–éƒ¨ç½²ç­‰å¯¹å»¶è¿Ÿæ•æ„Ÿçš„åœºæ™¯ï¼Œå¯é€šè¿‡å‡å°‘è®¡ç®—é‡æå‡å¹¶å‘å¤„ç†èƒ½åŠ›ï¼ˆç›¸åŒç¡¬ä»¶èµ„æºä¸‹æ”¯æŒæ›´å¤šè¯·æ±‚ï¼‰ï¼›</li>
<li><strong>èµ„æºå—é™è®¾å¤‡</strong>ï¼šCPUéƒ¨ç½²ã€è¾¹ç¼˜è®¾å¤‡ï¼ˆå¦‚ Jetson ç³»åˆ—ï¼‰ç­‰ç®—åŠ›/å†…å­˜æœ‰é™çš„åœºæ™¯ï¼Œå¯åœ¨ä¸ç‰ºç‰²ç²¾åº¦çš„å‰æä¸‹é™ä½ç¡¬ä»¶é—¨æ§›ã€‚</li>
</ul>
<h3 data-id="heading-14">3. å±€é™æ€§</h3>
<ul>
<li>ä»…é€‚ç”¨äº<strong>æ¨ç†é˜¶æ®µ</strong>ï¼šè®­ç»ƒé˜¶æ®µ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>q</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">W_q^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2244em;vertical-align:-0.3831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span/></span></span></span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>k</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">W_k^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1244em;vertical-align:-0.2831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4169em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span></span></span></span></span> æ˜¯åŠ¨æ€æ›´æ–°çš„ï¼Œæ— æ³•é¢„è®¡ç®— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{qk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œå› æ­¤ä¸é€‚ç”¨ï¼›</li>
<li>å¯¹çŸ­åºåˆ—åŠ é€Ÿæ•ˆæœæœ‰é™ï¼šå½“ L æå°æ—¶ï¼ˆå¦‚ L&lt;128ï¼‰ï¼ŒK çŸ©é˜µçš„æŠ•å½±å¼€é”€å æ¯”ä½ï¼ŒåŠ é€Ÿæ¯”å¯èƒ½é™è‡³1.2å€ä»¥ä¸‹ã€‚</li>
</ul>
<h2 data-id="heading-15">å·¥ç¨‹å®ç°æ­¥éª¤ï¼ˆä»¥PyTorchä¸ºä¾‹ï¼‰</h2>
<p>çŸ©é˜µå¸æ”¶ä¼˜åŒ–çš„å·¥ç¨‹å®ç°éå¸¸ç®€æ´ï¼Œæ ¸å¿ƒåˆ†ä¸ºâ€œé¢„è®¡ç®— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{qk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span>â€å’Œâ€œä¿®æ”¹æ¨ç†é€»è¾‘â€ä¸¤æ­¥ï¼š</p>
<h3 data-id="heading-16">1. æ­¥éª¤1ï¼šé¢„è®¡ç®—åˆå¹¶æŠ•å½±çŸ©é˜µ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{qk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span></h3>
<p>åŠ è½½é¢„è®­ç»ƒæ¨¡å‹åï¼Œæå– <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>q</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">W_q^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2244em;vertical-align:-0.3831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span/></span></span></span></span></span></span></span></span></span> å’Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>W</mi><mi>k</mi><mi>U</mi></msubsup></mrow><annotation encoding="application/x-tex">W_k^U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1244em;vertical-align:-0.2831em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4169em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2831em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œç¦»çº¿è®¡ç®— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{qk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span> å¹¶æ›¿æ¢åŸæŠ•å½±çŸ©é˜µï¼ˆä»¥Llamaç³»åˆ—æ¨¡å‹ä¸ºä¾‹ï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> torch
<span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn

<span class="hljs-keyword">class</span> <span class="hljs-title class_">LlamaAttentionWithAbsorption</span>(nn.Module):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, original_attention</span>):
        <span class="hljs-built_in">super</span>().__init__()
        self.original_attention = original_attention
        self.d_model = original_attention.hidden_size
        self.num_heads = original_attention.num_attention_heads
        self.d_k = self.d_model // self.num_heads
        
        <span class="hljs-comment"># æå–åŸå§‹æŠ•å½±çŸ©é˜µï¼ˆLlamaçš„attentionæƒé‡é€šå¸¸åœ¨self.q_projã€self.k_projã€self.v_projï¼‰</span>
        self.W_q_U = original_attention.q_proj.weight  <span class="hljs-comment"># ç»´åº¦ï¼šd_model Ã— d_modelï¼ˆå®é™…æ˜¯num_headsÃ—d_k Ã— d_modelï¼Œéœ€æŒ‰å¤´æ‹†åˆ†ï¼‰</span>
        self.W_k_U = original_attention.k_proj.weight  <span class="hljs-comment"># ç»´åº¦ï¼šd_model Ã— d_model</span>
        self.W_v_U = original_attention.v_proj.weight  <span class="hljs-comment"># ç»´åº¦ï¼šd_model Ã— d_model</span>
        
        <span class="hljs-comment"># æŒ‰æ³¨æ„åŠ›å¤´æ‹†åˆ†æŠ•å½±çŸ©é˜µï¼ˆnum_heads Ã— d_k Ã— d_modelï¼‰</span>
        self.W_q_U_per_head = self.W_q_U.view(self.num_heads, self.d_k, self.d_model)
        self.W_k_U_per_head = self.W_k_U.view(self.num_heads, self.d_k, self.d_model)
        
        <span class="hljs-comment"># é¢„è®¡ç®—æ¯ä¸ªå¤´çš„ W_qk = W_q_U Â· (W_k_U)^Tï¼ˆç»´åº¦ï¼šnum_heads Ã— d_k Ã— d_kï¼‰</span>
        self.W_qk_per_head = torch.matmul(
            self.W_q_U_per_head,  <span class="hljs-comment"># (num_heads, d_k, d_model)</span>
            self.W_k_U_per_head.transpose(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)  <span class="hljs-comment"># (num_heads, d_model, d_k)</span>
        )
        
        <span class="hljs-comment"># åˆå¹¶ä¸ºä¸€ä¸ªçŸ©é˜µï¼ˆæ–¹ä¾¿æ‰¹é‡è®¡ç®—ï¼šnum_headsÃ—d_k Ã— d_kï¼‰</span>
        self.W_qk = self.W_qk_per_head.view(self.num_heads * self.d_k, self.d_k)
        
        <span class="hljs-comment"># ä¿ç•™Vçš„æŠ•å½±çŸ©é˜µ</span>
        self.W_v = self.W_v_U.view(self.num_heads, self.d_k, self.d_model)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, hidden_states</span>):
        L, B, d_model = hidden_states.shape  <span class="hljs-comment"># è¾“å…¥ç»´åº¦ï¼š(åºåˆ—é•¿åº¦L, æ‰¹æ¬¡å¤§å°B, éšè—å±‚ç»´åº¦d_model)</span>
        num_heads, d_k = self.num_heads, self.d_k
        
        <span class="hljs-comment"># 1. è®¡ç®—Q' = C_q Â· W_qkï¼ˆæ›¿ä»£åŸQ = C_qÂ·W_q_U å’Œ K = C_kÂ·W_k_Uï¼‰</span>
        <span class="hljs-comment"># è¾“å…¥reshapeï¼š(L, B, d_model) â†’ (B, L, d_model)</span>
        hidden_states = hidden_states.transpose(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)
        
        <span class="hljs-comment"># Q'è®¡ç®—ï¼š(B, L, d_model) Ã— (num_headsÃ—d_k, d_k) â†’ (B, L, num_headsÃ—d_k)</span>
        q_prime = torch.matmul(hidden_states, self.W_qk.t())  <span class="hljs-comment"># W_qkæ˜¯(num_headsÃ—d_k, d_k)ï¼Œè½¬ç½®åæ˜¯(d_k, num_headsÃ—d_k)ï¼Ÿä¿®æ­£ï¼š</span>
        q_prime = torch.matmul(hidden_states, self.W_qk.permute(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>))  <span class="hljs-comment"># æ­£ç¡®ç»´åº¦åŒ¹é…ï¼š(B,L,d_model) Ã— (d_model, num_headsÃ—d_k) â†’ (B,L,num_headsÃ—d_k)</span>
        
        <span class="hljs-comment"># æŒ‰å¤´æ‹†åˆ†Q'ï¼š(B, L, num_heads, d_k) â†’ (B, num_heads, L, d_k)</span>
        q_prime = q_prime.view(B, L, num_heads, d_k).transpose(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)
        
        <span class="hljs-comment"># 2. è®¡ç®—C_k^Tï¼ˆè¾“å…¥ç‰¹å¾çš„è½¬ç½®ï¼‰ï¼š(B, d_model, L)</span>
        C_k_T = hidden_states.transpose(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)
        
        <span class="hljs-comment"># 3. æ³¨æ„åŠ›åˆ†æ•°è®¡ç®—ï¼šQ' Â· C_k^T â†’ (B, num_heads, L, L)</span>
        attention_scores = torch.matmul(q_prime, C_k_T)  <span class="hljs-comment"># (B, num_heads, L, d_k) Ã— (B, d_model, L) â†’ ä¸å¯¹ï¼Œéœ€æŒ‰å¤´å¤„ç†C_kï¼š</span>
        <span class="hljs-comment"># ä¿®æ­£ï¼šC_kæŒ‰å¤´æ‹†åˆ†å¹¶è½¬ç½®ï¼š(B, d_model, L) â†’ (B, num_heads, d_k, L)</span>
        C_k_per_head_T = hidden_states.view(B, L, num_heads, d_k).transpose(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>).transpose(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)  <span class="hljs-comment"># (B, num_heads, d_k, L)</span>
        attention_scores = torch.matmul(q_prime, C_k_per_head_T)  <span class="hljs-comment"># (B, num_heads, L, d_k) Ã— (B, num_heads, d_k, L) â†’ (B, num_heads, L, L)</span>
        
        <span class="hljs-comment"># ç¼©æ”¾æ³¨æ„åŠ›åˆ†æ•°</span>
        attention_scores = attention_scores / math.sqrt(d_k)
        
        <span class="hljs-comment"># 4. softmaxè®¡ç®—æ³¨æ„åŠ›æƒé‡</span>
        attention_weights = F.softmax(attention_scores, dim=-<span class="hljs-number">1</span>)
        
        <span class="hljs-comment"># 5. è®¡ç®—V = C_v Â· W_v_U</span>
        v = torch.matmul(hidden_states, self.W_v.permute(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>).reshape(d_model, num_heads*d_k).t())  <span class="hljs-comment"># (B, L, num_headsÃ—d_k)</span>
        v = v.view(B, L, num_heads, d_k).transpose(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)  <span class="hljs-comment"># (B, num_heads, L, d_k)</span>
        
        <span class="hljs-comment"># 6. è¾“å‡ºè®¡ç®—ï¼šAttention Â· V â†’ (B, num_heads, L, d_k)</span>
        output = torch.matmul(attention_weights, v)
        
        <span class="hljs-comment"># åˆå¹¶æ³¨æ„åŠ›å¤´ï¼š(B, num_heads, L, d_k) â†’ (B, L, num_headsÃ—d_k) â†’ (B, L, d_model)</span>
        output = output.transpose(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>).contiguous().view(B, L, d_model)
        
        <span class="hljs-comment"># è¿˜åŸä¸ºåŸå§‹è¾“å‡ºç»´åº¦ï¼š(L, B, d_model)</span>
        <span class="hljs-keyword">return</span> output.transpose(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)
</code></pre>
<h3 data-id="heading-17">2. æ­¥éª¤2ï¼šæ›¿æ¢æ¨¡å‹çš„æ³¨æ„åŠ›å±‚å¹¶éƒ¨ç½²</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åŠ è½½åŸå§‹Llamaæ¨¡å‹</span>
<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> LlamaForCausalLM, LlamaTokenizer
model_name = <span class="hljs-string">"meta-llama/Llama-2-7b-hf"</span>
tokenizer = LlamaTokenizer.from_pretrained(model_name)
original_model = LlamaForCausalLM.from_pretrained(model_name)

<span class="hljs-comment"># æ›¿æ¢æ‰€æœ‰æ³¨æ„åŠ›å±‚ä¸ºä¼˜åŒ–åçš„ç‰ˆæœ¬</span>
<span class="hljs-keyword">for</span> layer <span class="hljs-keyword">in</span> original_model.model.layers:
    layer.self_attn = LlamaAttentionWithAbsorption(layer.self_attn)

<span class="hljs-comment"># æ¨ç†æµ‹è¯•</span>
inputs = tokenizer(<span class="hljs-string">"Hello, matrix absorption optimization!"</span>, return_tensors=<span class="hljs-string">"pt"</span>)
outputs = original_model.generate(**inputs, max_new_tokens=<span class="hljs-number">50</span>)
<span class="hljs-built_in">print</span>(tokenizer.decode(outputs[<span class="hljs-number">0</span>], skip_special_tokens=<span class="hljs-literal">True</span>))
</code></pre>
<h3 data-id="heading-18">3. å…³é”®ä¼˜åŒ–ç‚¹</h3>
<ul>
<li><strong>æŒ‰å¤´æ‹†åˆ†è®¡ç®—</strong>ï¼šLLMçš„æ³¨æ„åŠ›å¤´æ˜¯å¹¶è¡Œè®¾è®¡çš„ï¼ŒæŒ‰å¤´æ‹†åˆ† <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{qk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span> å¯é¿å…ç»´åº¦ä¸åŒ¹é…ï¼ŒåŒæ—¶åˆ©ç”¨ç¡¬ä»¶çš„å¹¶è¡Œè®¡ç®—èƒ½åŠ›ï¼›</li>
<li><strong>é¢„è®¡ç®—ç¼“å­˜</strong>ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{qk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span> å¯æå‰ä¿å­˜ä¸ºæ–‡ä»¶ï¼ˆå¦‚ <code>.bin</code>ï¼‰ï¼Œæ¨¡å‹åŠ è½½æ—¶ç›´æ¥è¯»å–ï¼Œæ— éœ€æ¯æ¬¡åŠ è½½éƒ½é‡æ–°è®¡ç®—ï¼›</li>
<li><strong>é‡åŒ–å…¼å®¹</strong>ï¼šè‹¥éœ€é‡åŒ–æ¨¡å‹ï¼Œå¯åœ¨é¢„è®¡ç®— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mrow><mi>q</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{qk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span> åå¯¹å…¶è¿›è¡ŒINT8é‡åŒ–ï¼ˆå¦‚ä½¿ç”¨ <code>torch.quantize_per_tensor</code>ï¼‰ï¼Œè¿›ä¸€æ­¥é™ä½è®¡ç®—å’Œå†…å­˜å¼€é”€ã€‚</li>
</ul>
<h2 data-id="heading-19">æ€»ç»“</h2>
<p>çŸ©é˜µå¸æ”¶ä¼˜åŒ–æ˜¯LLMæ¨ç†åŠ é€Ÿçš„â€œè½»é‡çº§åˆ©å™¨â€â€”â€”é€šè¿‡<strong>ç¦»çº¿é¢„è®¡ç®—åˆå¹¶æŠ•å½±çŸ©é˜µ</strong>ï¼Œåœ¨ä¸æŸå¤±ç²¾åº¦ã€ä¸ä¿®æ”¹æ¨¡å‹ç»“æ„çš„å‰æä¸‹ï¼Œå‡å°‘1æ¬¡é«˜å¼€é”€çš„åœ¨çº¿çŸ©é˜µä¹˜æ³•ï¼ŒåŒæ—¶é™ä½å†…å­˜è®¿é—®å‹åŠ›ï¼Œæœ€ç»ˆå®ç°çº¦1.7å€çš„æ¨ç†é€Ÿåº¦æå‡ã€‚è¯¥æŠ€æœ¯å®ç°ç®€å•ã€å…¼å®¹æ€§å¼ºï¼Œå°¤å…¶é€‚åˆé•¿åºåˆ—ã€é«˜å¹¶å‘ã€èµ„æºå—é™çš„LLMæœ¬åœ°åŒ–éƒ¨ç½²åœºæ™¯ï¼Œæ˜¯å¼€å‘è€…åœ¨ä¼˜åŒ–LLMæ¨ç†æ€§èƒ½æ—¶çš„ä¼˜å…ˆé€‰æ‹©ä¹‹ä¸€ã€‚</p>
<p>è‹¥éœ€è¿›ä¸€æ­¥æå‡æ€§èƒ½ï¼Œå¯å°†å…¶ä¸FlashAttentionï¼ˆä¼˜åŒ–æ³¨æ„åŠ›åˆ†æ•°çš„å†…å­˜è®¿é—®ï¼‰ã€æ¨¡å‹é‡åŒ–ï¼ˆINT8/INT4ï¼‰ã€TensorRTæ¨ç†å¼•æ“ç­‰æŠ€æœ¯ç»“åˆï¼Œå½¢æˆâ€œç»„åˆä¼˜åŒ–æ–¹æ¡ˆâ€ï¼Œå¯å®ç°3~5å€çš„ç»¼åˆåŠ é€Ÿæ¯”ï¼Œæ»¡è¶³æ›´ä¸¥è‹›çš„å»¶è¿Ÿå’Œååé‡éœ€æ±‚ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®°å½•CI/CDè‡ªåŠ¨åŒ–ä¸Šä¼ AppGalleryé‡åˆ°çš„å‘]]></title>    <link>https://juejin.cn/post/7587398857536651327</link>    <guid>https://juejin.cn/post/7587398857536651327</guid>    <pubDate>2025-12-25T04:07:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587398857536651327" data-draft-id="7587349016222220329" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®°å½•CI/CDè‡ªåŠ¨åŒ–ä¸Šä¼ AppGalleryé‡åˆ°çš„å‘"/> <meta itemprop="keywords" content="å‰ç«¯,Android,API"/> <meta itemprop="datePublished" content="2025-12-25T04:07:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="helloCat"/> <meta itemprop="url" content="https://juejin.cn/user/1908407918148728"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®°å½•CI/CDè‡ªåŠ¨åŒ–ä¸Šä¼ AppGalleryé‡åˆ°çš„å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1908407918148728/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    helloCat
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T04:07:03.000Z" title="Thu Dec 25 2025 04:07:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    15
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡ä¸»è¦å£°è®¨çš„æ˜¯åä¸º AppGallery å¼€å‘è€…æ–‡æ¡£ã€‚è¦å€¼å¾—ç§°èµçš„æ˜¯ï¼Œä»–ä»¬è¿˜æ˜¯å†™äº†ä¸ºäº†è¿™ä¸ªåŠŸèƒ½ç¼–å†™äº†æ–‡æ¡£ã€‚å¦‚æœä½ åœ¨å†™CI/CDçš„æ—¶å€™é‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œå¹¶é€šè¿‡è¯¥æ–‡ç« è§£å†³äº†ï¼Œéº»çƒ¦ç‚¹ä¸ªèµã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œä½ éœ€è¦æŒ‰ç…§ä»¥ä¸‹å‡ æ­¥èµ°ã€‚</p>
<h2 data-id="heading-0">ç¬¬ä¸€æ­¥ï¼Œè·å–åä¸ºåº”ç”¨å¸‚åœº Access Token</h2>
<p>é¦–å…ˆï¼Œä¸€å¼€å§‹ï¼Œå…ˆçœ‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Fdoc%2Fapp%2Fagc-help-connect-api-obtain-server-auth-0000002271134661%23section1679462873111" target="_blank" title="https://developer.huawei.com/consumer/cn/doc/app/agc-help-connect-api-obtain-server-auth-0000002271134661#section1679462873111" ref="nofollow noopener noreferrer">æ–‡æ¡£</a>ã€‚è·å–æœåŠ¡ç«¯æˆæƒï¼Œç„¶åæŠŠæ‹¿åˆ°çš„<code>client_id</code> å’Œ <code>client_secret</code> è¿›è¡Œå¦‚ä¸‹è¯·æ±‚ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> result = axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">'https://connect-api.cloud.huawei.com/api/oauth2/v1/token'</span>, {
  <span class="hljs-attr">grant_type</span>: <span class="hljs-string">'client_credentials'</span>,
  <span class="hljs-attr">client_id</span>: clientId, <span class="hljs-comment">// æ›¿æ¢ä¸ºä½ çš„ client_id</span>
  <span class="hljs-attr">client_secret</span>: clientSecret, <span class="hljs-comment">// æ›¿æ¢ä¸ºä½ çš„ client_secret</span>
});

<span class="hljs-comment">// æ‹¿åˆ°çš„ Token</span>
<span class="hljs-keyword">const</span> accessToken = result.<span class="hljs-property">access_token</span>;
</code></pre>
<h2 data-id="heading-1">ç¬¬äºŒæ­¥ï¼Œç”³è¯·ä¸Šä¼ æƒé™</h2>
<p>æ¥ç€ï¼Œç›´æ¥çœ‹ä»£ç å°±è¡Œï¼Œåˆ°è¿™ä¸€æ­¥è¿˜æ²¡æœ‰å‘ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> contentLength = fs.<span class="hljs-title function_">statSync</span>(apkFilePath).<span class="hljs-property">size</span>;
  
<span class="hljs-keyword">const</span> uploadApplyResult = axios.<span class="hljs-title function_">get</span>(
  <span class="hljs-string">"https://connect-api.cloud.huawei.com/api/publish/v2/upload-url/for-obs"</span>, 
  {
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-attr">client_id</span>: clientId,
      <span class="hljs-comment">// ç¬¬ä¸€æ­¥æ‹¿åˆ°çš„ token</span>
      <span class="hljs-title class_">Authorization</span>: <span class="hljs-string">`Bearer <span class="hljs-subst">${accessToken}</span>`</span>,
      <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span>,
    },
    
    <span class="hljs-attr">params</span>: {
      <span class="hljs-comment">// æ ¹æ®åä¸º API è¦æ±‚æ„é€ è¯·æ±‚ä½“</span>

      <span class="hljs-comment">// 1 ä»£è¡¨ APK, 2 ä»£è¡¨ AABï¼ˆAndroid App Bundleï¼‰</span>
      <span class="hljs-attr">type</span>: <span class="hljs-number">1</span>,
      <span class="hljs-comment">// ä½ åœ¨åä¸ºå¹³å°çš„åº”ç”¨ ID</span>
      <span class="hljs-attr">appId</span>: appId,
      <span class="hljs-comment">// 'apk' or 'aab'</span>
      <span class="hljs-attr">suffix</span>: <span class="hljs-string">'apk'</span>,

      <span class="hljs-comment">// ä¸Šä¼ çš„ APK æ–‡ä»¶å</span>
      <span class="hljs-attr">fileName</span>: fileName,
      
      <span class="hljs-comment">// ä¸Šä¼ çš„ APK æ–‡ä»¶å¤§å°</span>
      <span class="hljs-attr">contentLength</span>: contentLength,

      <span class="hljs-comment">// å¤§é™†åœ°åŒºå¯ä»¥å¿½ç•¥ï¼Œæµ·å¤–åœ°åŒºå¿…å¡«</span>
      <span class="hljs-attr">chineseMainlandFlag</span>: <span class="hljs-number">0</span>,
    },
  }
)
</code></pre>
<h2 data-id="heading-2">ç¬¬ä¸‰éƒ¨ï¼Œå¼€å§‹ä¸Šä¼  APK æ–‡ä»¶</h2>
<p>æˆ‘ä»¬è¦æ±‚æ˜¯åªéœ€è¦ä¸Šä¼ åˆ°å¹³å°å°±è¡Œï¼Œæ‰€ä»¥ä¸ç”¨æåˆ†ç‰‡ä¸Šä¼ ã€‚è¿™ä¸€æ­¥å°±æ˜¯å‘çš„å¼€å§‹ï¼Œå¦‚æœä½ æŒ‰ç…§æ–‡æ¡£æ¥ï¼Œç™¾åˆ†ç™¾ä¼šç»™ä½ æŠ¥ä¸€ä¸²é”™è¯¯ XMLï¼Œå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-txt" lang="txt">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;Error&gt;
  &lt;Code&gt;SignatureDoesNotMatch&lt;/Code&gt;
  &lt;Message&gt;The request signature we calculated does not match the signature you provided. Check your
    key and signing method.&lt;/Message&gt;
  &lt;RequestId&gt;0000019AED024D5C94169C0FA01D180A&lt;/RequestId&gt;
  &lt;HostId&gt;Z9v+cC1sRnaWw6x0vi8pxxYA0YVnKxbYHUPAFpnxkX8sLV44u5b02Z+ailn2wCnR&lt;/HostId&gt;
  &lt;AWSAccessKeyId&gt;NT1DSSQ7R3FSAEMCBELN&lt;/AWSAccessKeyId&gt;
  &lt;SignatureProvided&gt;fbd22dc7ed5bf90a420fcd6bd78b3fae93e68f2668758c53cbb13c7555913422&lt;/SignatureProvided&gt;
  &lt;StringToSign&gt;AWS4-HMAC-SHA256
    20251205T053539Z
    20251205/ap-southeast-3/s3/aws4_request
    0b4bc19ab88df2d905cfbba6f3f24fd722da7cb7434fc9d2288776eaed7cd15f&lt;/StringToSign&gt;
  &lt;StringToSignBytes&gt;41 57 53 34 2d 48 4d 41 43 2d 53 48 41 32 35 36 0a 32 30 32 35 31 32 30 35 54
    30 35 33 35 33 39 5a 0a 32 30 32 35 31 32 30 35 2f 61 70 2d 73 6f 75 74 68 65 61 73 74 2d 33 2f
    73 33 2f 61 77 73 34 5f 72 65 71 75 65 73 74 0a 30 62 34 62 63 31 39 61 62 38 38 64 66 32 64 39
    30 35 63 66 62 62 61 36 66 33 66 32 34 66 64 37 32 32 64 61 37 63 62 37 34 33 34 66 63 39 64 32
    32 38 38 37 37 36 65 61 65 64 37 63 64 31 35 66&lt;/StringToSignBytes&gt;
  &lt;CanonicalRequest&gt;PUT
    /SG/2025120505/1764912939540-2257a16f-c80f-4fe3-bdde-f3150531d3c4.apk
    content-type:application/octet-stream
    host:nsp-appgallery-agcfs-dra.obs.ap-southeast-3.myhuaweicloud.com
    x-amz-content-sha256:UNSIGNED-PAYLOAD
    x-amz-date:20251205T053539Z
    ontent-length;content-type;host;x-amz-content-sha256;x-amz-date
    UNSIGNED-PAYLOAD
    &lt;/CanonicalRequest&gt;
  &lt;StringToSignBytes&gt;50 55 54 0a 2f 53 47 2f 32 30 32 35 31 32 30 35 30 35 2f 31 37 36 34 39 31 32
    39 33 39 35 34 30 2d 32 32 35 37 61 31 36 66 2d 63 38 30 66 2d 34 66 65 33 2d 62 64 64 65 2d 66
    33 31 35 30 35 33 31 64 33 63 34 2e 61 70 6b 0a 0a 63 6f 6e 74 65 6e 74 2d 74 79 70 65 3a 61 70
    70 6c 69 63 61 74 69 6f 6e 2f 6f 63 74 65 74 2d 73 74 72 65 61 6d 0a 68 6f 73 74 3a 6e 73 70 2d
    61 70 70 67 61 6c 6c 65 72 79 2d 61 67 63 66 73 2d 64 72 61 2e 6f 62 73 2e 61 70 2d 73 6f 75 74
    68 65 61 73 74 2d 33 2e 6d 79 68 75 61 77 65 69 63 6c 6f 75 64 2e 63 6f 6d 0a 78 2d 61 6d 7a 2d
    63 6f 6e 74 65 6e 74 2d 73 68 61 32 35 36 3a 55 4e 53 49 47 4e 45 44 2d 50 41 59 4c 4f 41 44 0a
    78 2d 61 6d 7a 2d 64 61 74 65 3a 32 30 32 35 31 32 30 35 54 30 35 33 35 33 39 5a 0a 0a 63 6f 6e
    74 65 6e 74 2d 6c 65 6e 67 74 68 3b 63 6f 6e 74 65 6e 74 2d 74 79 70 65 3b 68 6f 73 74 3b 78 2d
    61 6d 7a 2d 63 6f 6e 74 65 6e 74 2d 73 68 61 32 35 36 3b 78 2d 61 6d 7a 2d 64 61 74 65 0a 55 4e
    53 49 47 4e 45 44 2d 50 41 59 4c 4f 41 44&lt;/StringToSignBytes&gt;
&lt;/Error&gt;
</code></pre>
<p>å…¶å®é—®é¢˜çš„ç—‡ç»“å°±åœ¨äºï¼Œæ–‡æ¡£æ²¡å‘Šè¯‰ä½ ï¼Œä½ éœ€è¦æŠŠ<code>Content-Length</code>æ”¾å…¥å¤´éƒ¨ï¼Œä»–çš„å¤´éƒ¨ç­¾åå­—æ®µ<code>x-amz-content-sha256</code>ä¸­éœ€è¦<code>Content-Length</code>æ¥è¿›è¡Œç­¾åã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç¬¬äºŒæ­¥æ‹¿åˆ°çš„ä¸Šä¼ ç»“æœ</span>
<span class="hljs-keyword">const</span> result = uploadApplyResult;

<span class="hljs-comment">// æ–‡ä»¶æµ</span>
<span class="hljs-keyword">const</span> fileStream = fs.<span class="hljs-title function_">createReadStream</span>(apkFilePath);

<span class="hljs-comment">// ç°åœ¨ä¸ä¼šæŠ¥é”™äº†...</span>
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">put</span>(result.<span class="hljs-property">urlInfo</span>.<span class="hljs-property">url</span>, fileStream, {
  <span class="hljs-attr">headers</span>: {
    ...result.<span class="hljs-property">urlInfo</span>.<span class="hljs-property">headers</span>,
    <span class="hljs-string">'Content-Length'</span>: contentLength
  }
});

</code></pre>
<h2 data-id="heading-3">ç¬¬å››æ­¥ï¼Œæ›´æ–°åº”ç”¨æ–‡ä»¶ä¿¡æ¯</h2>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç¬¬äºŒæ­¥æ‹¿åˆ°çš„ç»“æœ</span>
<span class="hljs-keyword">const</span> objectId = uploadApplyResult.<span class="hljs-property">urlInfo</span>.<span class="hljs-property">objectId</span>;

<span class="hljs-keyword">const</span> fileName = <span class="hljs-string">'my.apk'</span>

<span class="hljs-keyword">const</span> fileInfoResult = <span class="hljs-keyword">await</span> httpClient.<span class="hljs-title function_">put</span>(
  <span class="hljs-string">`https://connect-api.cloud.huawei.com/api/publish/v2/app-file-info?appId=<span class="hljs-subst">${appId}</span>`</span>,
  {
    <span class="hljs-comment">// apk: 5, aab: 6</span>
    <span class="hljs-string">'fileType'</span>: <span class="hljs-number">5</span>,
    <span class="hljs-string">'files'</span>: [{
      <span class="hljs-string">'fileName'</span>: fileName,
      <span class="hljs-string">'fileDestUrl'</span>: result.<span class="hljs-property">urlInfo</span>.<span class="hljs-property">objectId</span>
    }]
  },
);
</code></pre>
<h2 data-id="heading-4">æœ€å</h2>
<p>æˆ‘çœ‹åˆ°æˆªæ­¢ç›®å‰ 2025-12-25 ä¸ºæ­¢ï¼ŒAppGallery å·²ç»ä» v2 å‡çº§åˆ°äº† v3ã€‚æ‰€ä»¥ï¼Œæ API æ²¡å•¥å‰é€”ã€‚ä½ çœ‹åˆ°ä¸Šé¢æ‰€è°“çš„ <code>SignatureDoesNotMatch</code> åï¼Œèƒ½ç¬¬ä¸€æ—¶é—´æƒ³åˆ°çœ‹æ˜¯ä¸æ˜¯å°‘äº†æˆ–è€…å¤šäº†å‚æ•°ï¼Œè¿™ç§è§£å†³é—®é¢˜çš„ç›´è§‰æ‰æ˜¯æˆ‘è®¤ä¸ºæœ€é‡è¦çš„ã€‚</p>
<p>ps: <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fen%2Fdoc%2FAppGallery-connect-References%2Fagcapi-app-file-info-0000001111685202" target="_blank" title="https://developer.huawei.com/consumer/en/doc/AppGallery-connect-References/agcapi-app-file-info-0000001111685202" ref="nofollow noopener noreferrer">è‹±æ–‡ç‰ˆæ–‡æ¡£</a>è¿˜æ²¡æ”¹ï¼Œç”¨çš„è¿˜æ˜¯ v2 çš„ APIã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Reasoning + Acting: ReActèŒƒå¼ä¸ReAct Agent]]></title>    <link>https://juejin.cn/post/7587355990409150515</link>    <guid>https://juejin.cn/post/7587355990409150515</guid>    <pubDate>2025-12-25T05:42:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587355990409150515" data-draft-id="7587335187073384474" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Reasoning + Acting: ReActèŒƒå¼ä¸ReAct Agent"/> <meta itemprop="keywords" content="LLM,äººå·¥æ™ºèƒ½,åç«¯"/> <meta itemprop="datePublished" content="2025-12-25T05:42:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æƒ³ç”¨offeræ‰“ç‰Œ"/> <meta itemprop="url" content="https://juejin.cn/user/578781641968972"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Reasoning + Acting: ReActèŒƒå¼ä¸ReAct Agent
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/578781641968972/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æƒ³ç”¨offeræ‰“ç‰Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T05:42:00.000Z" title="Thu Dec 25 2025 05:42:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.8;font-weight:400;font-size:16px;word-spacing:2px;letter-spacing:2px;overflow-x:hidden;color:#3e3e3e;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:1.2em;border-bottom:2px solid #ef7060;word-spacing:0!important;letter-spacing:0!important;font-size:inherit;line-height:inherit;display:block;font-weight:400;background:#ef7060;color:#fff;padding:10px;border-top-right-radius:3px;border-top-left-radius:3px;margin-right:3px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨äººå·¥æ™ºèƒ½é¢†åŸŸï¼Œå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„å‡ºç°å¸¦æ¥äº†å‰æ‰€æœªæœ‰çš„å¯èƒ½æ€§ã€‚ç„¶è€Œï¼ŒLLM å¹¶éä¸‡èƒ½ï¼Œå®ƒä»¬ä¼šâ€œå¹»è§‰â€ï¼Œå®ƒä»¬æ— æ³•å®æ—¶è·å–ä¿¡æ¯ã€‚ä¸ºäº†å¼¥è¡¥è¿™äº›ä¸è¶³ï¼Œ<strong>ReAct èŒƒå¼</strong> åº”è¿è€Œç”Ÿï¼Œå®ƒèµ‹äºˆäº† LLM åƒäººç±»ä¸€æ ·â€œæ€è€ƒâ€ï¼ˆReasoningï¼‰å’Œâ€œè¡ŒåŠ¨â€ï¼ˆActingï¼‰çš„èƒ½åŠ›ï¼Œä»è€Œæ„å»ºå‡ºæ›´å¼ºå¤§ã€æ›´å¯é çš„ <strong>ReAct Agent</strong>ã€‚</p>
<h2 data-id="heading-1">ä¼ ç»Ÿ LLM çš„å±€é™æ€§ï¼šä¸ºä»€ä¹ˆéœ€è¦ ReAct</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ é—®ä¸€ä¸ªæ™®é€šçš„ LLMï¼šâ€œè¯·å¸®æˆ‘è§„åˆ’ä¸€ä¸‹ä»ä¸Šæµ·åˆ°åŒ—äº¬çš„ç«è½¦ç¥¨ï¼Œå¹¶å‘Šè¯‰æˆ‘å¤©æ°”æƒ…å†µã€‚â€</p>
<ul>
<li><strong>ç¥¨åŠ¡ä¿¡æ¯</strong>ï¼šLLM å¯èƒ½ä¼šç»™å‡ºä¸€äº›çœ‹ä¼¼åˆç†ä½†å®é™…ä¸Šæ˜¯è™šæ„çš„ç¥¨åŠ¡ä¿¡æ¯ï¼Œå› ä¸ºå®ƒæ— æ³•è®¿é—®å®æ—¶ç¥¨åŠ¡ç³»ç»Ÿã€‚</li>
<li><strong>å¤©æ°”ä¿¡æ¯</strong>ï¼šLLM åªèƒ½æ ¹æ®å…¶è®­ç»ƒæ•°æ®å›ç­”å†å²å¤©æ°”ï¼Œè€Œæ— æ³•æä¾›å®æ—¶å¤©æ°”ã€‚</li>
</ul>
<p><strong>æ ¸å¿ƒé—®é¢˜ï¼š</strong> ä¼ ç»Ÿçš„ LLM ç¼ºä¹ä¸å¤–éƒ¨ä¸–ç•Œäº¤äº’çš„èƒ½åŠ›ï¼Œå®ƒä»¬æ— æ³•è°ƒç”¨å·¥å…·ï¼Œä¹Ÿæ— æ³•æ ¹æ®çœŸå®ä¸–ç•Œçš„åé¦ˆè¿›è¡Œè°ƒæ•´ã€‚</p>
<h2 data-id="heading-2">ReAct èŒƒå¼ç™»åœºï¼šæ€è€ƒã€è¡ŒåŠ¨ã€è§‚å¯Ÿã€è¿­ä»£çš„å¾ªç¯</h2>
<h3 data-id="heading-3">ReActæ˜¯è°æå‡ºæ¥çš„ï¼Ÿ</h3>
<p>åœ¨äººå·¥æ™ºèƒ½é¢†åŸŸï¼Œ<strong>ReAct</strong>ï¼ˆReasoning and Actingï¼‰æ¡†æ¶æ˜¯ç”±Â <strong>æ™®æ—æ–¯é¡¿å¤§å­¦</strong>ï¼ˆPrinceton Universityï¼‰å’ŒÂ <strong>è°·æ­Œç ”ç©¶é™¢</strong>ï¼ˆGoogle Researchï¼Œç‰¹åˆ«æ˜¯ Brain å›¢é˜Ÿï¼‰çš„ç§‘ç ”äººå‘˜å…±åŒæå‡ºçš„ã€‚Â </p>
<p>è¯¥æ¡†æ¶é¦–æ¬¡å‡ºç°åœ¨ 2022 å¹´å‘è¡¨çš„è®ºæ–‡Â <a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2210.03629" target="_blank" title="https://arxiv.org/abs/2210.03629" ref="nofollow noopener noreferrer">ã€ŠReAct: Synergizing Reasoning and Acting in Language Modelsã€‹</a>Â ä¸­ã€‚å…¶ä¸»è¦è´¡çŒ®è€…åŒ…æ‹¬ï¼šÂ </p>
<ul>
<li><strong>å§šé¡ºé›¨ (Shunyu Yao)</strong> ï¼šè®ºæ–‡ç¬¬ä¸€ä½œè€…ï¼Œæ¥è‡ªæ™®æ—æ–¯é¡¿å¤§å­¦ã€‚</li>
<li><strong>Jeffrey Zhao, Dian Yu, Nan Du, Izhak Shafran, Yuan Cao</strong>ï¼šæ¥è‡ªè°·æ­Œç ”ç©¶é™¢ã€‚</li>
<li><strong>Karthik Narasimhan</strong>ï¼šæ¥è‡ªæ™®æ—æ–¯é¡¿å¤§å­¦ã€‚</li>
</ul>
<p>å§šé¡ºé›¨ï¼ˆShunyu Yaoï¼‰ç›®å‰è¢«å…¬è®¤ä¸º AI Agentï¼ˆäººå·¥æ™ºèƒ½ä½“ï¼‰é¢†åŸŸçš„<strong>å…¨çƒé¡¶å°–é’å¹´å­¦è€…å’Œé¢†å†›äººç‰©ä¹‹ä¸€</strong>ã€‚</p>
<p>å°å…«å¦ï¼š2025 å¹´ 12 æœˆï¼Œè…¾è®¯å®˜æ–¹ç¡®è®¤å§šé¡ºé›¨å·²æ­£å¼åŠ ç›Ÿï¼Œå‡ºä»»é¦–å¸­ AI ç§‘å­¦å®¶ï¼ˆChief AI Scientistï¼‰ï¼Œç›´å±äº CEO/æ€»è£åŠï¼Œå¹¶é¢†å¯¼æ–°æˆç«‹çš„Â <strong>AI Infra éƒ¨é—¨</strong>å’Œ<strong>å¤§æ¨¡å‹éƒ¨é—¨</strong>ã€‚</p>
<h3 data-id="heading-4">ä»€ä¹ˆæ˜¯ ReAct èŒƒå¼</h3>
<p>å®ƒçš„æ ¸å¿ƒé€»è¾‘æ˜¯ä¸€ä¸ªå››å…ƒç»„çš„å¾ªç¯ï¼š</p>
<p>Thought (æ€è€ƒ) â†’ Action (è¡ŒåŠ¨) â†’ Observation (è§‚å¯Ÿ) â†’ <strong>è¿­ä»£</strong></p>
<p><strong>æ ¸å¿ƒç»„ä»¶åˆ†è§£ï¼š</strong></p>
<ul>
<li><strong>Thought (æ¨ç†)</strong> ï¼šæ¨¡å‹å¯¹å½“å‰ä»»åŠ¡è¿›è¡Œåˆ†æï¼Œè®¡åˆ’ä¸‹ä¸€æ­¥è¦åšä»€ä¹ˆï¼ˆä¾‹å¦‚ï¼šâ€œæˆ‘éœ€è¦æŸ¥è¯¢å½“å‰çš„è‚¡ä»·â€ï¼‰ã€‚</li>
<li><strong>Action (è¡ŒåŠ¨)</strong> ï¼šæ¨¡å‹å†³å®šè°ƒç”¨å“ªä¸ªå¤–éƒ¨å·¥å…·ï¼ˆTool/Function Callingï¼‰ï¼Œå¹¶ç»™å‡ºå‚æ•°ï¼ˆä¾‹å¦‚ï¼šè°ƒç”¨ <code>get_stock_price(symbol="AAPL")</code>ï¼‰ã€‚</li>
<li><strong>Observation (è§‚å¯Ÿ)</strong> ï¼šæ¨¡å‹æ¥æ”¶å¤–éƒ¨å·¥å…·è¿”å›çš„çœŸå®ç»“æœï¼ˆä¾‹å¦‚ï¼šâ€œApple è‚¡ä»·ä¸º 190 ç¾å…ƒâ€ï¼‰ã€‚</li>
<li><strong>è¿­ä»£</strong>ï¼šåŸºäºè§‚å¯Ÿç»“æœç»§ç»­æ€è€ƒå’Œè¡ŒåŠ¨ï¼Œç›´åˆ°å®Œæˆä»»åŠ¡ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5562d1c3fa0d4055bb750e13b088c82a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oOz55Sob2ZmZXLmiZPniYw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767246120&amp;x-signature=GUH5d8P5HqAzGsnuUxtaqiPK6mw%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-5">ReAct Agentï¼šå…·æœ‰â€œæ‰‹è„šâ€çš„æ™ºèƒ½ä½“</h2>
<h3 data-id="heading-6">å®šä¹‰</h3>
<p><strong>ReAct Agent</strong> å°±æ˜¯åŸºäº ReAct èŒƒå¼æ„å»ºçš„æ™ºèƒ½ä½“ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªæ‹¥æœ‰å¤§è„‘ï¼ˆLLMï¼‰å’Œâ€œæ‰‹è„šâ€ï¼ˆå¤–éƒ¨å·¥å…·ï¼‰çš„æœºå™¨äººã€‚å®ƒä¸å†ä»…ä»…æ˜¯å›ç­”é—®é¢˜ï¼Œè€Œæ˜¯èƒ½å¤Ÿï¼š</p>
<ul>
<li><strong>ç†è§£å¹¶è§„åˆ’</strong>ï¼šè§£æç”¨æˆ·æ„å›¾ã€‚</li>
<li><strong>è°ƒç”¨å·¥å…·</strong>ï¼šæ‰§è¡Œç‰¹å®šçš„å¤–éƒ¨æ“ä½œã€‚</li>
<li><strong>å¤„ç†åé¦ˆ</strong>ï¼šæ ¹æ®å·¥å…·è¿”å›çš„çœŸå®ä¸–ç•Œä¿¡æ¯è°ƒæ•´ç­–ç•¥ã€‚</li>
<li><strong>è¿­ä»£ä¼˜åŒ–</strong>ï¼šé€šè¿‡å¤šè½®æ€è€ƒ-è¡ŒåŠ¨-è§‚å¯Ÿï¼Œé€æ­¥æ¥è¿‘æœ€ç»ˆç­”æ¡ˆ</li>
</ul>
<h3 data-id="heading-7">æ¡ˆä¾‹</h3>
<p>è¿™æ ·è¯´å¤ªå¹²äº†ï¼Œæ¥ç‚¹æ¡ˆä¾‹ï¼ŸğŸ˜ˆ</p>
<p><strong>ç”¨æˆ·ï¼š</strong> â€œè®¡ç®—ä¸€ä¸‹ 2023 å¹´ 8 æœˆ 15 æ—¥ï¼Œä¸Šæµ·æµ¦ä¸œæ–°åŒºæœ‰å¤šå°‘äººä¼šå»è¿ªå£«å°¼ä¹å›­ï¼Œç„¶åå‘Šè¯‰æˆ‘å½“å¤©æ˜¯å¦ä¼šä¸‹é›¨ï¼Ÿâ€</p>
<ol>
<li><strong>Thought:</strong> â€œç”¨æˆ·æƒ³çŸ¥é“è¿ªå£«å°¼å®¢æµé‡å’Œå¤©æ°”ã€‚æˆ‘éœ€è¦ä¸€ä¸ªè·å–å®¢æµé‡çš„å·¥å…·å’Œä¸€ä¸ªå¤©æ°”æŸ¥è¯¢å·¥å…·ã€‚å®¢æµé‡å¯èƒ½éœ€è¦ç»“åˆå†å²æ•°æ®å’ŒèŠ‚å‡æ—¥å› ç´ ï¼Œå¤©æ°”æ˜¯å®æ—¶çš„ã€‚â€</li>
<li><strong>Action:</strong> â€œè°ƒç”¨ <code>get_disney_attendance_estimate(date='2023-08-15', location='ä¸Šæµ·æµ¦ä¸œæ–°åŒº')</code> å·¥å…·ã€‚â€</li>
<li><strong>Observation:</strong> â€œè¿ªå£«å°¼ä¹å›­åœ¨ 8 æœˆ 15 æ—¥ï¼ˆéå‘¨æœ«ï¼‰é¢„è®¡å®¢æµé‡ä¸º 30,000 äººã€‚â€</li>
<li><strong>Thought:</strong> â€œæˆ‘å·²ç»è·å–äº†å®¢æµé‡ã€‚ç°åœ¨éœ€è¦è·å–å¤©æ°”ä¿¡æ¯ã€‚â€</li>
<li><strong>Action:</strong> â€œè°ƒç”¨ <code>get_current_weather(location='ä¸Šæµ·æµ¦ä¸œæ–°åŒº', date='2023-08-15')</code> å·¥å…·ã€‚â€</li>
<li><strong>Observation:</strong> â€œ2023 å¹´ 8 æœˆ 15 æ—¥ï¼Œä¸Šæµ·æµ¦ä¸œæ–°åŒºé¢„è®¡å°é›¨ã€‚â€</li>
<li><strong>Thought:</strong> â€œæˆ‘å·²ç»è·å–äº†æ‰€æœ‰éœ€è¦çš„ä¿¡æ¯ï¼Œå¯ä»¥å›ç­”ç”¨æˆ·äº†ã€‚â€</li>
<li><strong>Action:</strong> â€œå›ç­”ç”¨æˆ·ï¼šâ€˜æ ¹æ®é¢„æµ‹ï¼Œ2023 å¹´ 8 æœˆ 15 æ—¥ä¸Šæµ·æµ¦ä¸œè¿ªå£«å°¼ä¹å›­é¢„è®¡å®¢æµé‡ä¸º 30,000 äººï¼Œå½“å¤©é¢„è®¡ä¼šæœ‰å°é›¨ã€‚â€™â€</li>
</ol>
<h2 data-id="heading-8">æ·±å…¥åç«¯å¼€å‘ï¼šReAct Agent çš„å®ç°æ¡†æ¶</h2>
<p>å¯¹äºåç«¯å¼€å‘è€…æ¥è¯´ï¼Œæ‰‹åŠ¨å®ç° ReAct èŒƒå¼éœ€è¦å¤§é‡çš„æç¤ºè¯å·¥ç¨‹å’ŒçŠ¶æ€ç®¡ç†ã€‚å¹¸è¿çš„æ˜¯ï¼Œç›®å‰ä¸»æµçš„ AI æ¡†æ¶éƒ½æä¾›äº†å¯¹ ReAct çš„å¼€ç®±å³ç”¨æ”¯æŒï¼š</p>
<ul>
<li>Spring AI/Spring AI Alibaba</li>
<li>Langchain4j</li>
</ul>
<h3 data-id="heading-9">Spring AI Alibaba (å£°æ˜å¼/é…ç½®å¼)</h3>
<p>å®ƒæ›´å€¾å‘äºé€šè¿‡ Spring çš„ Bean æ³¨å…¥å’Œ <code>ChatClient</code> æ¥å®ç°ï¼Œå…¶æ·±åº¦ç»‘å®š Spring ç”Ÿæ€ã€‚</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">// å…¸å‹çš„ Spring é£æ ¼ï¼šé€šè¿‡ ChatClient ç»‘å®šå·¥å…·</span>
<span class="hljs-type">var</span> <span class="hljs-variable">chatClient</span> <span class="hljs-operator">=</span> chatClientBuilder
    .defaultFunctions(<span class="hljs-string">"currentWeatherTool"</span>) <span class="hljs-comment">// æ³¨å†Œä¸º Spring Bean çš„å·¥å…·</span>
    .build();

<span class="hljs-comment">// æ‰§è¡Œæ—¶ï¼ŒSpring AI å†…éƒ¨ä¼šå°è£… ReAct çš„å¾ªç¯é€»è¾‘</span>
<span class="hljs-type">String</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> chatClient.prompt(<span class="hljs-string">"ä¸Šæµ·ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"</span>).call().content();
</code></pre>
<h3 data-id="heading-10">LangChain4j (å‘½ä»¤å¼/ç¼–æ’å¼)</h3>
<p>å®ƒæ›´åƒæ˜¯ä¸€ä¸ªå·¥å…·ç®±ï¼Œè®©ä½ æ˜¾å¼åœ°æ„å»ºâ€œå¤§è„‘â€å’Œâ€œæ‰‹è„šâ€ã€‚å¦‚æœä½ éœ€è¦å¤æ‚çš„åº•å±‚agentç¼–æ’ï¼Œé‚£å®ƒæ›´åŠ é€‚åˆä½ ã€‚</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-type">Assistant</span> <span class="hljs-variable">assistant</span> <span class="hljs-operator">=</span> AiServices.builder(Assistant.class)
    .chatLanguageModel(model)
    .tools(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WeatherTool</span>()) <span class="hljs-comment">// æ‰‹åŠ¨ç»‘å®šå·¥å…·ç±»</span>
    .chatMemory(MessageWindowChatMemory.withMaxMessages(<span class="hljs-number">10</span>))
    .build();

<span class="hljs-type">String</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> assistant.chat(<span class="hljs-string">"ä¸Šæµ·ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"</span>);
</code></pre>
<h3 data-id="heading-11">å¯¹æ¯”æ€»ç»“</h3>






























<table><thead><tr><th><strong>ç»´åº¦</strong></th><th><strong>LangChain4j</strong></th><th><strong>Spring AI Alibaba</strong></th></tr></thead><tbody><tr><td><strong>ç”Ÿæ€</strong></td><td>ç‹¬ç«‹äºæ¡†æ¶ï¼ŒQuarkus/Spring å‡å¯</td><td>æ·±åº¦ç»‘å®š Spring Boot / Cloud</td></tr><tr><td><strong>çµæ´»æ€§</strong></td><td>æé«˜ï¼Œé€‚åˆä»åº•å±‚å®šåˆ¶ Agent è¡Œä¸º</td><td>è¾ƒå¥½ï¼Œéµå¾ªâ€œçº¦å®šå¤§äºé…ç½®â€</td></tr><tr><td><strong>ä¸Šæ‰‹éš¾åº¦</strong></td><td>éœ€è¦å­¦ä¹ å¤æ‚çš„é“¾/æœåŠ¡æ¦‚å¿µ</td><td>åªè¦ä¼šç”¨ Springï¼Œä¸Šæ‰‹éå¸¸å¿«</td></tr><tr><td><strong>æ¨èåœºæ™¯</strong></td><td>å¤æ‚çš„ã€é Spring ç¯å¢ƒçš„å¤š Agent åä½œ</td><td>ç°æœ‰çš„ Java å¾®æœåŠ¡ç³»ç»Ÿå¢åŠ  AI èƒ½åŠ›</td></tr></tbody></table>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ebc4fcdaf9474592a5a96a0e98ebaa59~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oOz55Sob2ZmZXLmiZPniYw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767246120&amp;x-signature=gvJyqd5uxKoXm6bSle%2Brf0aXwqk%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-12">æ€»ç»“</h2>
<p>ReActèŒƒå¼å¾ˆå¥½åœ°æŒ‡å¯¼äº†agentå¦‚ä½•æ€è€ƒå¹¶è°ƒç”¨å·¥å…·è§£å†³ç”¨æˆ·æå‡ºçš„é—®é¢˜ï¼Œè™½ç„¶è€—è´¹çš„tokenä¼šå¤šå¾ˆå¤šï¼Œä½†æ˜¯å¹»è§‰é—®é¢˜å¾—åˆ°å¤§å¤§ç¼“è§£ã€‚è¿™æ˜¯agentå¼€å‘çš„æ–°çš„æŒ‡å¯¼èŒƒå¼å’Œé‡Œç¨‹ç¢‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pythonå‡½æ•°æ·±åº¦è§£æï¼šä»åŸºç¡€åˆ°é«˜çº§è£…é¥°å™¨]]></title>    <link>https://juejin.cn/post/7587398857536864319</link>    <guid>https://juejin.cn/post/7587398857536864319</guid>    <pubDate>2025-12-25T05:16:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587398857536864319" data-draft-id="7587349016222924841" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pythonå‡½æ•°æ·±åº¦è§£æï¼šä»åŸºç¡€åˆ°é«˜çº§è£…é¥°å™¨"/> <meta itemprop="keywords" content="Python,PyCharm"/> <meta itemprop="datePublished" content="2025-12-25T05:16:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åƒè¥¿çº¢æŸ¿é•¿å¤§çš„ç•ªèŒ„"/> <meta itemprop="url" content="https://juejin.cn/user/3097787706900985"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pythonå‡½æ•°æ·±åº¦è§£æï¼šä»åŸºç¡€åˆ°é«˜çº§è£…é¥°å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3097787706900985/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åƒè¥¿çº¢æŸ¿é•¿å¤§çš„ç•ªèŒ„
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T05:16:25.000Z" title="Thu Dec 25 2025 05:16:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-light">.hljs-comment,.hljs-quote{color:#696969}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#d91e18}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#aa5d00}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:green}.hljs-section,.hljs-title{color:#007faa}.hljs-keyword,.hljs-selector-tag{color:#7928a1}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fefefe;color:#545454}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><p>åœ¨Pythonç¼–ç¨‹ä¸­ï¼Œå‡½æ•°å°±åƒä¹é«˜ç§¯æœ¨â€”â€”ä½ å¯ä»¥åˆ›å»ºå°å—çš„åŠŸèƒ½æ¨¡å—ï¼Œç„¶åå°†å®ƒä»¬ç»„åˆæˆå¤æ‚çš„ç»“æ„ã€‚ä»Šå¤©ï¼Œè®©æˆ‘ä»¬æ·±å…¥æ¢ç´¢Pythonå‡½æ•°çš„æ–¹æ–¹é¢é¢ï¼Œä»æœ€åŸºç¡€çš„å‡½æ•°å®šä¹‰åˆ°é«˜çº§çš„è£…é¥°å™¨æ¨¡å¼ã€‚</p>
<h2 data-id="heading-0">å¼•å…¥ï¼šä¸ºä»€ä¹ˆå‡½æ•°å¦‚æ­¤é‡è¦ï¼Ÿ</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªæ•°æ®åˆ†æç¨‹åºï¼š</p>
<ul>
<li>éœ€è¦å¤šæ¬¡è®¡ç®—æ•°æ®çš„å¹³å‡å€¼</li>
<li>éœ€è¦æ ¼å¼åŒ–è¾“å‡ºç»“æœ</li>
<li>éœ€è¦éªŒè¯è¾“å…¥æ•°æ®çš„æœ‰æ•ˆæ€§</li>
</ul>
<p>å¦‚æœæ²¡æœ‰å‡½æ•°ï¼Œä½ ä¼šé‡å¤å†™ç›¸åŒçš„ä»£ç ã€‚è€Œä½¿ç”¨å‡½æ•°ï¼Œå°±åƒæ‹¥æœ‰ä¸€ä¸ªé­”æ³•å·¥å…·ç®±ï¼Œæ¯ä¸ªå·¥å…·éƒ½æœ‰ç‰¹å®šçš„ç”¨é€”ï¼Œå¯ä»¥åå¤ä½¿ç”¨ï¼Œè®©ä»£ç æ›´ç®€æ´ã€æ›´æ˜“ç»´æŠ¤ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€å‡½æ•°åŸºç¡€ï¼šæ„å»ºä»£ç æ¨¡å—</h2>
<h3 data-id="heading-2">1.1 å‡½æ•°çš„å®šä¹‰ä¸è°ƒç”¨</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å‡½æ•°åŸºç¡€ï¼šå®šä¹‰ã€è°ƒç”¨ã€è¿”å›å€¼</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"=== Pythonå‡½æ•°åŸºç¡€ ===\n"</span>)

<span class="hljs-comment"># 1. æœ€ç®€å•çš„å‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>():
    <span class="hljs-string">"""ä¸€ä¸ªç®€å•çš„é—®å€™å‡½æ•°"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä½ å¥½ï¼"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ¬¢è¿å­¦ä¹ Pythonå‡½æ•°"</span>)

<span class="hljs-comment"># è°ƒç”¨å‡½æ•°</span>
greet()

<span class="hljs-comment"># 2. å¸¦å‚æ•°çš„å‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">personalized_greet</span>(<span class="hljs-params">name</span>):
    <span class="hljs-string">"""å‘ç‰¹å®šçš„äººé—®å¥½"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä½ å¥½ï¼Œ<span class="hljs-subst">{name}</span>ï¼"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{name}</span>ï¼Œä»Šå¤©è¿‡å¾—æ€ä¹ˆæ ·ï¼Ÿ"</span>)

<span class="hljs-comment"># è°ƒç”¨å¸¦å‚æ•°çš„å‡½æ•°</span>
personalized_greet(<span class="hljs-string">"å°æ˜"</span>)
personalized_greet(<span class="hljs-string">"å°çº¢"</span>)

<span class="hljs-comment"># 3. å¸¦è¿”å›å€¼çš„å‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">add_numbers</span>(<span class="hljs-params">a, b</span>):
    <span class="hljs-string">"""è¿”å›ä¸¤ä¸ªæ•°çš„å’Œ"""</span>
    result = a + b
    <span class="hljs-keyword">return</span> result

<span class="hljs-comment"># ä½¿ç”¨è¿”å›å€¼</span>
sum_result = add_numbers(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"5 + 3 = <span class="hljs-subst">{sum_result}</span>"</span>)

<span class="hljs-comment"># è¿”å›å€¼å¯ä»¥ç›´æ¥ä½¿ç”¨</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"10 + 20 = <span class="hljs-subst">{add_numbers(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>)}</span>"</span>)

<span class="hljs-comment"># 4. å¤šä¸ªè¿”å›å€¼</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_student_info</span>():
    <span class="hljs-string">"""è¿”å›å­¦ç”Ÿçš„å§“åã€å¹´é¾„å’Œæˆç»©"""</span>
    name = <span class="hljs-string">"å¼ ä¸‰"</span>
    age = <span class="hljs-number">18</span>
    scores = [<span class="hljs-number">85</span>, <span class="hljs-number">92</span>, <span class="hljs-number">78</span>]
    <span class="hljs-keyword">return</span> name, age, scores  <span class="hljs-comment"># å®é™…ä¸Šè¿”å›ä¸€ä¸ªå…ƒç»„</span>

<span class="hljs-comment"># æ¥æ”¶å¤šä¸ªè¿”å›å€¼</span>
student_name, student_age, student_scores = get_student_info()
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å­¦ç”Ÿä¿¡æ¯ï¼š<span class="hljs-subst">{student_name}</span>ï¼Œ<span class="hljs-subst">{student_age}</span>å²ï¼Œæˆç»©ï¼š<span class="hljs-subst">{student_scores}</span>"</span>)

<span class="hljs-comment"># 5. æŸ¥çœ‹å‡½æ•°ä¿¡æ¯</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå‡½æ•°æ–‡æ¡£ï¼š<span class="hljs-subst">{add_numbers.__doc__}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‡½æ•°åï¼š<span class="hljs-subst">{add_numbers.__name__}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ¨¡å—ï¼š<span class="hljs-subst">{add_numbers.__module__}</span>"</span>)
</code></pre>
<h3 data-id="heading-3">1.2 å‚æ•°ä¼ é€’çš„å››ç§æ–¹å¼</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== å‚æ•°ä¼ é€’çš„å››ç§æ–¹å¼ ===\n"</span>)

<span class="hljs-comment"># 1. ä½ç½®å‚æ•°ï¼ˆæœ€åŸºæœ¬çš„å‚æ•°ä¼ é€’ï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">describe_pet</span>(<span class="hljs-params">animal_type, pet_name</span>):
    <span class="hljs-string">"""æ˜¾ç¤ºå® ç‰©çš„ä¿¡æ¯"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æˆ‘æœ‰ä¸€åª<span class="hljs-subst">{animal_type}</span>ï¼Œå®ƒå«<span class="hljs-subst">{pet_name}</span>ã€‚"</span>)

describe_pet(<span class="hljs-string">"ç‹—"</span>, <span class="hljs-string">"æ—ºè´¢"</span>)  <span class="hljs-comment"># å‚æ•°æŒ‰ä½ç½®ä¼ é€’</span>
describe_pet(<span class="hljs-string">"çŒ«"</span>, <span class="hljs-string">"å’ªå’ª"</span>)

<span class="hljs-comment"># 2. å…³é”®å­—å‚æ•°ï¼ˆæŒ‡å®šå‚æ•°åï¼‰</span>
describe_pet(animal_type=<span class="hljs-string">"ä»“é¼ "</span>, pet_name=<span class="hljs-string">"å±å±"</span>)  <span class="hljs-comment"># æ˜ç¡®æŒ‡å®šå‚æ•°å</span>
describe_pet(pet_name=<span class="hljs-string">"èŠ±èŠ±"</span>, animal_type=<span class="hljs-string">"é¸Ÿ"</span>)    <span class="hljs-comment"># é¡ºåºå¯ä»¥æ”¹å˜</span>

<span class="hljs-comment"># 3. é»˜è®¤å‚æ•°ï¼ˆå‚æ•°æœ‰é»˜è®¤å€¼ï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">make_coffee</span>(<span class="hljs-params">size=<span class="hljs-string">"ä¸­æ¯"</span>, coffee_type=<span class="hljs-string">"æ‹¿é“"</span>, sugar=<span class="hljs-literal">True</span></span>):
    <span class="hljs-string">"""åˆ¶ä½œå’–å•¡"""</span>
    sugar_text = <span class="hljs-string">"åŠ ç³–"</span> <span class="hljs-keyword">if</span> sugar <span class="hljs-keyword">else</span> <span class="hljs-string">"ä¸åŠ ç³–"</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆ¶ä½œä¸€æ¯<span class="hljs-subst">{size}</span><span class="hljs-subst">{coffee_type}</span>ï¼Œ<span class="hljs-subst">{sugar_text}</span>"</span>)

make_coffee()                          <span class="hljs-comment"># ä½¿ç”¨æ‰€æœ‰é»˜è®¤å€¼</span>
make_coffee(<span class="hljs-string">"å¤§æ¯"</span>)                     <span class="hljs-comment"># åªæŒ‡å®šç¬¬ä¸€ä¸ªå‚æ•°</span>
make_coffee(coffee_type=<span class="hljs-string">"ç¾å¼"</span>, sugar=<span class="hljs-literal">False</span>)  <span class="hljs-comment"># æŒ‡å®šéƒ¨åˆ†å‚æ•°</span>

<span class="hljs-comment"># 4. å¯å˜å‚æ•°ï¼ˆå‚æ•°æ•°é‡å¯å˜ï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_average</span>(<span class="hljs-params">*scores</span>):
    <span class="hljs-string">"""è®¡ç®—å¹³å‡åˆ†ï¼Œå¯ä»¥æ¥å—ä»»æ„æ•°é‡çš„åˆ†æ•°"""</span>
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(scores) == <span class="hljs-number">0</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
    total = <span class="hljs-built_in">sum</span>(scores)
    <span class="hljs-keyword">return</span> total / <span class="hljs-built_in">len</span>(scores)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¹³å‡åˆ†1ï¼š<span class="hljs-subst">{calculate_average(<span class="hljs-number">85</span>, <span class="hljs-number">90</span>, <span class="hljs-number">78</span>):<span class="hljs-number">.2</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¹³å‡åˆ†2ï¼š<span class="hljs-subst">{calculate_average(<span class="hljs-number">92</span>, <span class="hljs-number">88</span>, <span class="hljs-number">95</span>, <span class="hljs-number">76</span>):<span class="hljs-number">.2</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¹³å‡åˆ†3ï¼š<span class="hljs-subst">{calculate_average(<span class="hljs-number">100</span>, <span class="hljs-number">95</span>):<span class="hljs-number">.2</span>f}</span>"</span>)

<span class="hljs-comment"># 5. å…³é”®å­—å¯å˜å‚æ•°ï¼ˆ**kwargsï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">build_profile</span>(<span class="hljs-params">first, last, **user_info</span>):
    <span class="hljs-string">"""åˆ›å»ºä¸€ä¸ªåŒ…å«ç”¨æˆ·æ‰€æœ‰ä¿¡æ¯çš„å­—å…¸"""</span>
    profile = {}
    profile[<span class="hljs-string">'first_name'</span>] = first
    profile[<span class="hljs-string">'last_name'</span>] = last
    <span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> user_info.items():
        profile[key] = value
    <span class="hljs-keyword">return</span> profile

user_profile = build_profile(<span class="hljs-string">'å¼ '</span>, <span class="hljs-string">'ä¸‰'</span>, age=<span class="hljs-number">25</span>, city=<span class="hljs-string">'åŒ—äº¬'</span>, job=<span class="hljs-string">'å·¥ç¨‹å¸ˆ'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nç”¨æˆ·æ¡£æ¡ˆï¼š<span class="hljs-subst">{user_profile}</span>"</span>)

<span class="hljs-comment"># 6. å‚æ•°ç»„åˆä½¿ç”¨ï¼ˆå®Œæ•´çš„å‡½æ•°ç­¾åï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">complex_function</span>(<span class="hljs-params">a, b, *args, c=<span class="hljs-number">10</span>, d=<span class="hljs-number">20</span>, **kwargs</span>):
    <span class="hljs-string">"""æ¼”ç¤ºæ‰€æœ‰å‚æ•°ç±»å‹çš„ç»„åˆ"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"a=<span class="hljs-subst">{a}</span>, b=<span class="hljs-subst">{b}</span>, args=<span class="hljs-subst">{args}</span>, c=<span class="hljs-subst">{c}</span>, d=<span class="hljs-subst">{d}</span>, kwargs=<span class="hljs-subst">{kwargs}</span>"</span>)

<span class="hljs-comment"># è°ƒç”¨ç¤ºä¾‹</span>
complex_function(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, c=<span class="hljs-number">30</span>, e=<span class="hljs-number">100</span>, f=<span class="hljs-number">200</span>)
</code></pre>
<h2 data-id="heading-4">äºŒã€å‡½æ•°è¿›é˜¶ï¼šä½œç”¨åŸŸä¸é—­åŒ…</h2>
<h3 data-id="heading-5">2.1 å˜é‡ä½œç”¨åŸŸ</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"=== å˜é‡ä½œç”¨åŸŸï¼šç†è§£Pythonçš„å‘½åç©ºé—´ ===\n"</span>)

<span class="hljs-comment"># å…¨å±€å˜é‡ï¼ˆåœ¨æ•´ä¸ªæ–‡ä»¶ä¸­éƒ½æœ‰æ•ˆï¼‰</span>
global_var = <span class="hljs-string">"æˆ‘æ˜¯å…¨å±€å˜é‡"</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">scope_demo</span>():
    <span class="hljs-string">"""æ¼”ç¤ºå˜é‡ä½œç”¨åŸŸ"""</span>
    <span class="hljs-comment"># å±€éƒ¨å˜é‡ï¼ˆåªåœ¨å‡½æ•°å†…éƒ¨æœ‰æ•ˆï¼‰</span>
    local_var = <span class="hljs-string">"æˆ‘æ˜¯å±€éƒ¨å˜é‡"</span>
    
    <span class="hljs-comment"># å¯ä»¥åœ¨å‡½æ•°å†…éƒ¨è®¿é—®å…¨å±€å˜é‡</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‡½æ•°å†…è®¿é—®å…¨å±€å˜é‡ï¼š<span class="hljs-subst">{global_var}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‡½æ•°å†…è®¿é—®å±€éƒ¨å˜é‡ï¼š<span class="hljs-subst">{local_var}</span>"</span>)
    
    <span class="hljs-comment"># ä¿®æ”¹å…¨å±€å˜é‡éœ€è¦ä½¿ç”¨globalå…³é”®å­—</span>
    <span class="hljs-keyword">global</span> global_var
    global_var = <span class="hljs-string">"å…¨å±€å˜é‡å·²è¢«ä¿®æ”¹"</span>
    
    <span class="hljs-comment"># åµŒå¥—ä½œç”¨åŸŸ</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">inner_function</span>():
        <span class="hljs-comment"># å†…å±‚å‡½æ•°å¯ä»¥è®¿é—®å¤–å±‚å‡½æ•°çš„å˜é‡</span>
        inner_var = <span class="hljs-string">"æˆ‘æ˜¯å†…å±‚å±€éƒ¨å˜é‡"</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå†…å±‚å‡½æ•°ï¼š"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  è®¿é—®å¤–å±‚å±€éƒ¨å˜é‡ï¼š<span class="hljs-subst">{local_var}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  è®¿é—®å…¨å±€å˜é‡ï¼š<span class="hljs-subst">{global_var}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  è®¿é—®å†…å±‚å±€éƒ¨å˜é‡ï¼š<span class="hljs-subst">{inner_var}</span>"</span>)
        
        <span class="hljs-comment"># ä½¿ç”¨nonlocalä¿®æ”¹å¤–å±‚å‡½æ•°çš„å˜é‡</span>
        <span class="hljs-keyword">nonlocal</span> local_var
        local_var = <span class="hljs-string">"å¤–å±‚å±€éƒ¨å˜é‡å·²è¢«å†…å±‚å‡½æ•°ä¿®æ”¹"</span>
    
    inner_function()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå¤–å±‚å‡½æ•°ä¿®æ”¹åï¼šlocal_var = <span class="hljs-subst">{local_var}</span>"</span>)

<span class="hljs-comment"># å‡½æ•°è°ƒç”¨</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‡½æ•°è°ƒç”¨å‰å…¨å±€å˜é‡ï¼š<span class="hljs-subst">{global_var}</span>"</span>)
scope_demo()
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‡½æ•°è°ƒç”¨åå…¨å±€å˜é‡ï¼š<span class="hljs-subst">{global_var}</span>"</span>)

<span class="hljs-comment"># å°è¯•è®¿é—®å±€éƒ¨å˜é‡ï¼ˆä¼šæŠ¥é”™ï¼‰</span>
<span class="hljs-keyword">try</span>:
    <span class="hljs-built_in">print</span>(local_var)
<span class="hljs-keyword">except</span> NameError <span class="hljs-keyword">as</span> e:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\né”™è¯¯ï¼š<span class="hljs-subst">{e}</span> - ä¸èƒ½ä»å¤–éƒ¨è®¿é—®å±€éƒ¨å˜é‡"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== ä½œç”¨åŸŸæŸ¥æ‰¾è§„åˆ™ï¼šLEGB ==="</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"1. Localï¼ˆå±€éƒ¨ä½œç”¨åŸŸï¼‰ - å‡½æ•°å†…éƒ¨"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"2. Enclosingï¼ˆåµŒå¥—ä½œç”¨åŸŸï¼‰ - å¤–å±‚å‡½æ•°"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"3. Globalï¼ˆå…¨å±€ä½œç”¨åŸŸï¼‰ - æ¨¡å—çº§åˆ«"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"4. Built-inï¼ˆå†…ç½®ä½œç”¨åŸŸï¼‰ - Pythonå†…ç½®å‡½æ•°å’Œå˜é‡"</span>)
</code></pre>
<h3 data-id="heading-6">2.2 é—­åŒ…ï¼šå‡½æ•°ä¸­çš„å‡½æ•°</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== é—­åŒ…ï¼šå‡½æ•°è¿”å›å‡½æ•° ==="</span>)

<span class="hljs-comment"># é—­åŒ…ï¼šå‡½æ•°å†…éƒ¨å®šä¹‰äº†å¦ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”å†…éƒ¨å‡½æ•°å¼•ç”¨äº†å¤–éƒ¨å‡½æ•°çš„å˜é‡</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">outer_function</span>(<span class="hljs-params">message</span>):
    <span class="hljs-string">"""å¤–éƒ¨å‡½æ•°"""</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">inner_function</span>():
        <span class="hljs-string">"""å†…éƒ¨å‡½æ•°ï¼ˆé—­åŒ…ï¼‰"""</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ¶ˆæ¯ï¼š<span class="hljs-subst">{message}</span>"</span>)
    <span class="hljs-keyword">return</span> inner_function  <span class="hljs-comment"># è¿”å›å†…éƒ¨å‡½æ•°ï¼Œè€Œä¸æ˜¯è°ƒç”¨å®ƒ</span>

<span class="hljs-comment"># åˆ›å»ºé—­åŒ…</span>
closure = outer_function(<span class="hljs-string">"ä½ å¥½ï¼Œé—­åŒ…ï¼"</span>)
closure()  <span class="hljs-comment"># è°ƒç”¨é—­åŒ…å‡½æ•°</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== é—­åŒ…çš„å®é™…åº”ç”¨ï¼šè®¡æ•°å™¨ ==="</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_counter</span>():
    <span class="hljs-string">"""åˆ›å»ºä¸€ä¸ªè®¡æ•°å™¨é—­åŒ…"""</span>
    count = <span class="hljs-number">0</span>  <span class="hljs-comment"># è¿™ä¸ªå˜é‡ä¼šè¢«é—­åŒ…"è®°ä½"</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">counter</span>():
        <span class="hljs-keyword">nonlocal</span> count  <span class="hljs-comment"># å£°æ˜ä½¿ç”¨å¤–å±‚å‡½æ•°çš„å˜é‡</span>
        count += <span class="hljs-number">1</span>
        <span class="hljs-keyword">return</span> count
    
    <span class="hljs-keyword">return</span> counter

<span class="hljs-comment"># åˆ›å»ºä¸¤ä¸ªç‹¬ç«‹çš„è®¡æ•°å™¨</span>
counter1 = create_counter()
counter2 = create_counter()

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"è®¡æ•°å™¨1ï¼š<span class="hljs-subst">{counter1()}</span>"</span>)  <span class="hljs-comment"># 1</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"è®¡æ•°å™¨1ï¼š<span class="hljs-subst">{counter1()}</span>"</span>)  <span class="hljs-comment"># 2</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"è®¡æ•°å™¨2ï¼š<span class="hljs-subst">{counter2()}</span>"</span>)  <span class="hljs-comment"># 1</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"è®¡æ•°å™¨1ï¼š<span class="hljs-subst">{counter1()}</span>"</span>)  <span class="hljs-comment"># 3</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"è®¡æ•°å™¨2ï¼š<span class="hljs-subst">{counter2()}</span>"</span>)  <span class="hljs-comment"># 2</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== é—­åŒ…åº”ç”¨ï¼šå‡½æ•°å·¥å‚ ==="</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">power_factory</span>(<span class="hljs-params">exponent</span>):
    <span class="hljs-string">"""åˆ›å»ºè®¡ç®—å¹‚çš„å‡½æ•°å·¥å‚"""</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">power</span>(<span class="hljs-params">base</span>):
        <span class="hljs-keyword">return</span> base ** exponent
    <span class="hljs-keyword">return</span> power

<span class="hljs-comment"># åˆ›å»ºä¸åŒçš„å¹‚å‡½æ•°</span>
square = power_factory(<span class="hljs-number">2</span>)  <span class="hljs-comment"># å¹³æ–¹å‡½æ•°</span>
cube = power_factory(<span class="hljs-number">3</span>)    <span class="hljs-comment"># ç«‹æ–¹å‡½æ•°</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"3çš„å¹³æ–¹ï¼š<span class="hljs-subst">{square(<span class="hljs-number">3</span>)}</span>"</span>)  <span class="hljs-comment"># 9</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"3çš„ç«‹æ–¹ï¼š<span class="hljs-subst">{cube(<span class="hljs-number">3</span>)}</span>"</span>)    <span class="hljs-comment"># 27</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"5çš„å¹³æ–¹ï¼š<span class="hljs-subst">{square(<span class="hljs-number">5</span>)}</span>"</span>)  <span class="hljs-comment"># 25</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== é—­åŒ…åº”ç”¨ï¼šé…ç½®å‡½æ•° ==="</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">make_multiplier</span>(<span class="hljs-params">factor</span>):
    <span class="hljs-string">"""åˆ›å»ºä¹˜ä»¥ç‰¹å®šå› å­çš„å‡½æ•°"""</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">multiplier</span>(<span class="hljs-params">x</span>):
        <span class="hljs-keyword">return</span> x * factor
    <span class="hljs-keyword">return</span> multiplier

<span class="hljs-comment"># åˆ›å»ºä¸åŒçš„ä¹˜æ³•å™¨</span>
double = make_multiplier(<span class="hljs-number">2</span>)
triple = make_multiplier(<span class="hljs-number">3</span>)
ten_times = make_multiplier(<span class="hljs-number">10</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"2å€ï¼š<span class="hljs-subst">{double(<span class="hljs-number">5</span>)}</span>"</span>)      <span class="hljs-comment"># 10</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"3å€ï¼š<span class="hljs-subst">{triple(<span class="hljs-number">5</span>)}</span>"</span>)      <span class="hljs-comment"># 15</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"10å€ï¼š<span class="hljs-subst">{ten_times(<span class="hljs-number">5</span>)}</span>"</span>)   <span class="hljs-comment"># 50</span>
</code></pre>
<h2 data-id="heading-7">ä¸‰ã€è£…é¥°å™¨ï¼šå‡½æ•°çš„"åŒ–å¦†å¸ˆ"</h2>
<h3 data-id="heading-8">3.1 è£…é¥°å™¨åŸºç¡€</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"=== è£…é¥°å™¨åŸºç¡€ï¼šå¢å¼ºå‡½æ•°åŠŸèƒ½ ==="</span>)

<span class="hljs-comment"># è£…é¥°å™¨æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">simple_decorator</span>(<span class="hljs-params">func</span>):
    <span class="hljs-string">"""ä¸€ä¸ªç®€å•çš„è£…é¥°å™¨"""</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>():
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"è£…é¥°å™¨ï¼šå‡½æ•°æ‰§è¡Œå‰"</span>)
        result = func()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"è£…é¥°å™¨ï¼šå‡½æ•°æ‰§è¡Œå"</span>)
        <span class="hljs-keyword">return</span> result
    <span class="hljs-keyword">return</span> wrapper

<span class="hljs-meta">@simple_decorator</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">say_hello</span>():
    <span class="hljs-string">"""è¢«è£…é¥°çš„å‡½æ•°"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä½ å¥½ï¼Œä¸–ç•Œï¼"</span>)

<span class="hljs-comment"># è°ƒç”¨è¢«è£…é¥°çš„å‡½æ•°</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"è°ƒç”¨è¢«è£…é¥°çš„å‡½æ•°ï¼š"</span>)
say_hello()

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== æ‰‹åŠ¨åº”ç”¨è£…é¥°å™¨ ==="</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>():
    <span class="hljs-string">"""æ™®é€šå‡½æ•°"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä½ å¥½ï¼"</span>)

<span class="hljs-comment"># ä¸é€‚ç”¨@è¯­æ³•ï¼Œæ‰‹åŠ¨è£…é¥°</span>
decorated_greet = simple_decorator(greet)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰‹åŠ¨è£…é¥°çš„å‡½æ•°ï¼š"</span>)
decorated_greet()

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== å¸¦å‚æ•°çš„å‡½æ•°è£…é¥° ==="</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">logger_decorator</span>(<span class="hljs-params">func</span>):
    <span class="hljs-string">"""è®°å½•å‡½æ•°è°ƒç”¨çš„è£…é¥°å™¨"""</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è°ƒç”¨å‡½æ•°ï¼š<span class="hljs-subst">{func.__name__}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‚æ•°ï¼šargs=<span class="hljs-subst">{args}</span>, kwargs=<span class="hljs-subst">{kwargs}</span>"</span>)
        result = func(*args, **kwargs)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¿”å›å€¼ï¼š<span class="hljs-subst">{result}</span>"</span>)
        <span class="hljs-keyword">return</span> result
    <span class="hljs-keyword">return</span> wrapper

<span class="hljs-meta">@logger_decorator</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>):
    <span class="hljs-string">"""ä¸¤ä¸ªæ•°ç›¸åŠ """</span>
    <span class="hljs-keyword">return</span> a + b

<span class="hljs-meta">@logger_decorator</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">greet_person</span>(<span class="hljs-params">name, title=<span class="hljs-string">"å…ˆç”Ÿ"</span></span>):
    <span class="hljs-string">"""é—®å€™æŸäºº"""</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"ä½ å¥½ï¼Œ<span class="hljs-subst">{name}</span><span class="hljs-subst">{title}</span>ï¼"</span>

<span class="hljs-comment"># æµ‹è¯•å¸¦å‚æ•°çš„è£…é¥°å™¨</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æµ‹è¯•åŠ æ³•å‡½æ•°ï¼š"</span>)
result = add(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœ€ç»ˆç»“æœï¼š<span class="hljs-subst">{result}</span>\n"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"æµ‹è¯•é—®å€™å‡½æ•°ï¼š"</span>)
greeting = greet_person(<span class="hljs-string">"å°æ˜"</span>, title=<span class="hljs-string">"åŒå­¦"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœ€ç»ˆé—®å€™ï¼š<span class="hljs-subst">{greeting}</span>"</span>)
</code></pre>
<h3 data-id="heading-9">3.2 å®ç”¨çš„è£…é¥°å™¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== å®ç”¨è£…é¥°å™¨ç¤ºä¾‹ ==="</span>)

<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">import</span> functools

<span class="hljs-comment"># 1. è®¡æ—¶è£…é¥°å™¨</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">timer_decorator</span>(<span class="hljs-params">func</span>):
    <span class="hljs-string">"""è®¡ç®—å‡½æ•°æ‰§è¡Œæ—¶é—´çš„è£…é¥°å™¨"""</span>
<span class="hljs-meta">    @functools.wraps(<span class="hljs-params">func</span>)  </span><span class="hljs-comment"># ä¿ç•™åŸå‡½æ•°çš„å…ƒæ•°æ®</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):
        start_time = time.time()
        result = func(*args, **kwargs)
        end_time = time.time()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{func.__name__}</span> æ‰§è¡Œæ—¶é—´ï¼š<span class="hljs-subst">{end_time - start_time:<span class="hljs-number">.4</span>f}</span>ç§’"</span>)
        <span class="hljs-keyword">return</span> result
    <span class="hljs-keyword">return</span> wrapper

<span class="hljs-meta">@timer_decorator</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">slow_function</span>(<span class="hljs-params">seconds</span>):
    <span class="hljs-string">"""æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ"""</span>
    time.sleep(seconds)
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"ç­‰å¾…äº†<span class="hljs-subst">{seconds}</span>ç§’"</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"è®¡æ—¶è£…é¥°å™¨æµ‹è¯•ï¼š"</span>)
<span class="hljs-built_in">print</span>(slow_function(<span class="hljs-number">1</span>))

<span class="hljs-comment"># 2. ç¼“å­˜è£…é¥°å™¨ï¼ˆè®°å¿†åŒ–ï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">cache_decorator</span>(<span class="hljs-params">func</span>):
    <span class="hljs-string">"""ç¼“å­˜å‡½æ•°ç»“æœçš„è£…é¥°å™¨"""</span>
    cache = {}
    
<span class="hljs-meta">    @functools.wraps(<span class="hljs-params">func</span>)</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args</span>):
        <span class="hljs-keyword">if</span> args <span class="hljs-keyword">in</span> cache:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¼“å­˜å‘½ä¸­ï¼š<span class="hljs-subst">{args}</span> -&gt; <span class="hljs-subst">{cache[args]}</span>"</span>)
            <span class="hljs-keyword">return</span> cache[args]
        result = func(*args)
        cache[args] = result
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¼“å­˜æœªå‘½ä¸­ï¼Œè®¡ç®—ç»“æœï¼š<span class="hljs-subst">{args}</span> -&gt; <span class="hljs-subst">{result}</span>"</span>)
        <span class="hljs-keyword">return</span> result
    
    <span class="hljs-keyword">return</span> wrapper

<span class="hljs-meta">@cache_decorator</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">fibonacci</span>(<span class="hljs-params">n</span>):
    <span class="hljs-string">"""è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼ˆé€’å½’å®ç°ï¼‰"""</span>
    <span class="hljs-keyword">if</span> n &lt;= <span class="hljs-number">1</span>:
        <span class="hljs-keyword">return</span> n
    <span class="hljs-keyword">return</span> fibonacci(n-<span class="hljs-number">1</span>) + fibonacci(n-<span class="hljs-number">2</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nç¼“å­˜è£…é¥°å™¨æµ‹è¯•ï¼ˆæ–æ³¢é‚£å¥‘æ•°åˆ—ï¼‰ï¼š"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"fibonacci(5) = <span class="hljs-subst">{fibonacci(<span class="hljs-number">5</span>)}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"fibonacci(5) = <span class="hljs-subst">{fibonacci(<span class="hljs-number">5</span>)}</span>"</span>)  <span class="hljs-comment"># ç¬¬äºŒæ¬¡è°ƒç”¨åº”è¯¥ä»ç¼“å­˜è·å–</span>

<span class="hljs-comment"># 3. é‡è¯•è£…é¥°å™¨</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">retry_decorator</span>(<span class="hljs-params">max_attempts=<span class="hljs-number">3</span>, delay=<span class="hljs-number">1</span></span>):
    <span class="hljs-string">"""é‡è¯•è£…é¥°å™¨ï¼Œå¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•"""</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">func</span>):
<span class="hljs-meta">        @functools.wraps(<span class="hljs-params">func</span>)</span>
        <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):
            last_exception = <span class="hljs-literal">None</span>
            <span class="hljs-keyword">for</span> attempt <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(max_attempts):
                <span class="hljs-keyword">try</span>:
                    <span class="hljs-keyword">return</span> func(*args, **kwargs)
                <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                    last_exception = e
                    <span class="hljs-keyword">if</span> attempt &lt; max_attempts - <span class="hljs-number">1</span>:
                        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬<span class="hljs-subst">{attempt+<span class="hljs-number">1</span>}</span>æ¬¡å°è¯•å¤±è´¥ï¼š<span class="hljs-subst">{e}</span>ï¼Œ<span class="hljs-subst">{delay}</span>ç§’åé‡è¯•..."</span>)
                        time.sleep(delay)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰€æœ‰<span class="hljs-subst">{max_attempts}</span>æ¬¡å°è¯•éƒ½å¤±è´¥äº†"</span>)
            <span class="hljs-keyword">raise</span> last_exception
        <span class="hljs-keyword">return</span> wrapper
    <span class="hljs-keyword">return</span> decorator

<span class="hljs-meta">@retry_decorator(<span class="hljs-params">max_attempts=<span class="hljs-number">3</span>, delay=<span class="hljs-number">1</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">unreliable_function</span>():
    <span class="hljs-string">"""æœ‰æ—¶ä¼šå¤±è´¥çš„å‡½æ•°"""</span>
    <span class="hljs-keyword">import</span> random
    <span class="hljs-keyword">if</span> random.random() &lt; <span class="hljs-number">0.7</span>:  <span class="hljs-comment"># 70%çš„å‡ ç‡å¤±è´¥</span>
        <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"éšæœºå¤±è´¥"</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-string">"æˆåŠŸï¼"</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\né‡è¯•è£…é¥°å™¨æµ‹è¯•ï¼š"</span>)
<span class="hljs-keyword">try</span>:
    result = unreliable_function()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç»“æœï¼š<span class="hljs-subst">{result}</span>"</span>)
<span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœ€ç»ˆå¤±è´¥ï¼š<span class="hljs-subst">{e}</span>"</span>)
</code></pre>
<h3 data-id="heading-10">3.3 å¸¦å‚æ•°çš„è£…é¥°å™¨</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== å¸¦å‚æ•°çš„è£…é¥°å™¨ ==="</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">repeat_decorator</span>(<span class="hljs-params">num_times</span>):
    <span class="hljs-string">"""é‡å¤æ‰§è¡Œå‡½æ•°çš„è£…é¥°å™¨"""</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">func</span>):
<span class="hljs-meta">        @functools.wraps(<span class="hljs-params">func</span>)</span>
        <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):
            results = []
            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_times):
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬<span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span>æ¬¡æ‰§è¡Œï¼š"</span>)
                result = func(*args, **kwargs)
                results.append(result)
            <span class="hljs-keyword">return</span> results
        <span class="hljs-keyword">return</span> wrapper
    <span class="hljs-keyword">return</span> decorator

<span class="hljs-meta">@repeat_decorator(<span class="hljs-params">num_times=<span class="hljs-number">3</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name</span>):
    <span class="hljs-string">"""é—®å€™å‡½æ•°"""</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"ä½ å¥½ï¼Œ<span class="hljs-subst">{name}</span>ï¼"</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"å¸¦å‚æ•°çš„è£…é¥°å™¨æµ‹è¯•ï¼š"</span>)
results = greet(<span class="hljs-string">"å°æ˜"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰€æœ‰ç»“æœï¼š<span class="hljs-subst">{results}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== å¤šä¸ªè£…é¥°å™¨ ==="</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator1</span>(<span class="hljs-params">func</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>():
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"è£…é¥°å™¨1ï¼šä¹‹å‰"</span>)
        func()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"è£…é¥°å™¨1ï¼šä¹‹å"</span>)
    <span class="hljs-keyword">return</span> wrapper

<span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator2</span>(<span class="hljs-params">func</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>():
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"è£…é¥°å™¨2ï¼šä¹‹å‰"</span>)
        func()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"è£…é¥°å™¨2ï¼šä¹‹å"</span>)
    <span class="hljs-keyword">return</span> wrapper

<span class="hljs-meta">@decorator1</span>
<span class="hljs-meta">@decorator2</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">say_hi</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä½ å¥½ï¼"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"å¤šä¸ªè£…é¥°å™¨æµ‹è¯•ï¼š"</span>)
say_hi()
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ³¨æ„ï¼šè£…é¥°å™¨çš„åº”ç”¨é¡ºåºæ˜¯ä»ä¸‹å¾€ä¸Šï¼ˆä»é‡Œåˆ°å¤–ï¼‰"</span>)
</code></pre>
<h2 data-id="heading-11">å››ã€Lambdaå‡½æ•°ä¸é«˜é˜¶å‡½æ•°</h2>
<h3 data-id="heading-12">4.1 Lambdaè¡¨è¾¾å¼</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"=== Lambdaè¡¨è¾¾å¼ï¼šåŒ¿åå‡½æ•° ==="</span>)

<span class="hljs-comment"># Lambdaè¡¨è¾¾å¼ç”¨äºåˆ›å»ºç®€å•çš„åŒ¿åå‡½æ•°</span>
<span class="hljs-comment"># è¯­æ³•ï¼šlambda å‚æ•°: è¡¨è¾¾å¼</span>

<span class="hljs-comment"># 1. åŸºæœ¬ç”¨æ³•</span>
square = <span class="hljs-keyword">lambda</span> x: x ** <span class="hljs-number">2</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¹³æ–¹å‡½æ•°ï¼šsquare(5) = <span class="hljs-subst">{square(<span class="hljs-number">5</span>)}</span>"</span>)

add = <span class="hljs-keyword">lambda</span> a, b: a + b
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"åŠ æ³•å‡½æ•°ï¼šadd(3, 4) = <span class="hljs-subst">{add(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)}</span>"</span>)

<span class="hljs-comment"># 2. ç«‹å³è°ƒç”¨</span>
result = (<span class="hljs-keyword">lambda</span> x, y: x * y)(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç«‹å³è°ƒç”¨ï¼š(lambda x, y: x * y)(3, 4) = <span class="hljs-subst">{result}</span>"</span>)

<span class="hljs-comment"># 3. åœ¨åˆ—è¡¨æ¨å¯¼å¼ä¸­ä½¿ç”¨</span>
numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
squares = [(<span class="hljs-keyword">lambda</span> x: x ** <span class="hljs-number">2</span>)(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> numbers]
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆ—è¡¨æ¨å¯¼å¼ä¸­çš„Lambdaï¼š<span class="hljs-subst">{squares}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== Lambdaçš„å…¸å‹åº”ç”¨åœºæ™¯ ==="</span>)

<span class="hljs-comment"># 1. æ’åº</span>
students = [
    {<span class="hljs-string">"name"</span>: <span class="hljs-string">"å°æ˜"</span>, <span class="hljs-string">"score"</span>: <span class="hljs-number">85</span>},
    {<span class="hljs-string">"name"</span>: <span class="hljs-string">"å°çº¢"</span>, <span class="hljs-string">"score"</span>: <span class="hljs-number">92</span>},
    {<span class="hljs-string">"name"</span>: <span class="hljs-string">"å°åˆš"</span>, <span class="hljs-string">"score"</span>: <span class="hljs-number">78</span>}
]

<span class="hljs-comment"># æŒ‰åˆ†æ•°æ’åº</span>
students_sorted = <span class="hljs-built_in">sorted</span>(students, key=<span class="hljs-keyword">lambda</span> s: s[<span class="hljs-string">"score"</span>], reverse=<span class="hljs-literal">True</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æŒ‰åˆ†æ•°æ’åºï¼š"</span>)
<span class="hljs-keyword">for</span> student <span class="hljs-keyword">in</span> students_sorted:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  <span class="hljs-subst">{student[<span class="hljs-string">'name'</span>]}</span>: <span class="hljs-subst">{student[<span class="hljs-string">'score'</span>]}</span>åˆ†"</span>)

<span class="hljs-comment"># 2. è¿‡æ»¤</span>
numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>]
even_numbers = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">filter</span>(<span class="hljs-keyword">lambda</span> x: x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>, numbers))
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå¶æ•°ï¼š<span class="hljs-subst">{even_numbers}</span>"</span>)

<span class="hljs-comment"># 3. æ˜ å°„</span>
squared_numbers = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x: x ** <span class="hljs-number">2</span>, numbers))
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¹³æ–¹æ•°ï¼š<span class="hljs-subst">{squared_numbers}</span>"</span>)

<span class="hljs-comment"># 4. åœ¨GUIç¼–ç¨‹ä¸­ï¼ˆå¦‚æŒ‰é’®å›è°ƒï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nLambdaä½œä¸ºå›è°ƒå‡½æ•°çš„ç¤ºä¾‹ï¼š"</span>)
<span class="hljs-keyword">def</span> <span class="hljs-title function_">button_click</span>(<span class="hljs-params">button_name</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">lambda</span>: <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{button_name}</span> è¢«ç‚¹å‡»äº†"</span>)

ok_button = button_click(<span class="hljs-string">"ç¡®å®š"</span>)
cancel_button = button_click(<span class="hljs-string">"å–æ¶ˆ"</span>)

<span class="hljs-comment"># æ¨¡æ‹Ÿç‚¹å‡»</span>
ok_button()
cancel_button()
</code></pre>
<h3 data-id="heading-13">4.2 é«˜é˜¶å‡½æ•°</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== é«˜é˜¶å‡½æ•°ï¼šå‡½æ•°ä½œä¸ºå‚æ•°æˆ–è¿”å›å€¼ ==="</span>)

<span class="hljs-comment"># 1. å‡½æ•°ä½œä¸ºå‚æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">apply_operation</span>(<span class="hljs-params">numbers, operation</span>):
    <span class="hljs-string">"""å¯¹åˆ—è¡¨ä¸­çš„æ¯ä¸ªæ•°åº”ç”¨æ“ä½œ"""</span>
    <span class="hljs-keyword">return</span> [operation(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> numbers]

numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]

<span class="hljs-keyword">def</span> <span class="hljs-title function_">square</span>(<span class="hljs-params">x</span>):
    <span class="hljs-keyword">return</span> x ** <span class="hljs-number">2</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">double</span>(<span class="hljs-params">x</span>):
    <span class="hljs-keyword">return</span> x * <span class="hljs-number">2</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"åº”ç”¨å¹³æ–¹æ“ä½œï¼š<span class="hljs-subst">{apply_operation(numbers, square)}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"åº”ç”¨åŠ å€æ“ä½œï¼š<span class="hljs-subst">{apply_operation(numbers, double)}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"åº”ç”¨Lambdaæ“ä½œï¼š<span class="hljs-subst">{apply_operation(numbers, <span class="hljs-keyword">lambda</span> x: x + <span class="hljs-number">10</span>)}</span>"</span>)

<span class="hljs-comment"># 2. å‡½æ•°ä½œä¸ºè¿”å›å€¼</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">make_adder</span>(<span class="hljs-params">n</span>):
    <span class="hljs-string">"""åˆ›å»ºåŠ æ³•å‡½æ•°"""</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">adder</span>(<span class="hljs-params">x</span>):
        <span class="hljs-keyword">return</span> x + n
    <span class="hljs-keyword">return</span> adder

add5 = make_adder(<span class="hljs-number">5</span>)
add10 = make_adder(<span class="hljs-number">10</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"add5(3) = <span class="hljs-subst">{add5(<span class="hljs-number">3</span>)}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"add10(3) = <span class="hljs-subst">{add10(<span class="hljs-number">3</span>)}</span>"</span>)

<span class="hljs-comment"># 3. å‡½æ•°ç»„åˆ</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">compose</span>(<span class="hljs-params">f, g</span>):
    <span class="hljs-string">"""ç»„åˆä¸¤ä¸ªå‡½æ•°ï¼šf(g(x))"""</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">lambda</span> x: f(g(x))

<span class="hljs-keyword">def</span> <span class="hljs-title function_">add_one</span>(<span class="hljs-params">x</span>):
    <span class="hljs-keyword">return</span> x + <span class="hljs-number">1</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">multiply_by_two</span>(<span class="hljs-params">x</span>):
    <span class="hljs-keyword">return</span> x * <span class="hljs-number">2</span>

<span class="hljs-comment"># åˆ›å»ºç»„åˆå‡½æ•°ï¼šå…ˆåŠ 1ï¼Œå†ä¹˜ä»¥2</span>
add_then_multiply = compose(multiply_by_two, add_one)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"add_then_multiply(3) = <span class="hljs-subst">{add_then_multiply(<span class="hljs-number">3</span>)}</span>"</span>)  <span class="hljs-comment"># (3+1)*2 = 8</span>

<span class="hljs-comment"># 4. éƒ¨åˆ†å‡½æ•°</span>
<span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> partial

<span class="hljs-keyword">def</span> <span class="hljs-title function_">power</span>(<span class="hljs-params">base, exponent</span>):
    <span class="hljs-string">"""è®¡ç®—å¹‚"""</span>
    <span class="hljs-keyword">return</span> base ** exponent

<span class="hljs-comment"># åˆ›å»ºå¹³æ–¹å‡½æ•°ï¼ˆå›ºå®šexponentä¸º2ï¼‰</span>
square = partial(power, exponent=<span class="hljs-number">2</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"square(5) = <span class="hljs-subst">{square(<span class="hljs-number">5</span>)}</span>"</span>)

<span class="hljs-comment"># åˆ›å»ºç«‹æ–¹å‡½æ•°ï¼ˆå›ºå®šexponentä¸º3ï¼‰</span>
cube = partial(power, exponent=<span class="hljs-number">3</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"cube(3) = <span class="hljs-subst">{cube(<span class="hljs-number">3</span>)}</span>"</span>)
</code></pre>
<h2 data-id="heading-14">äº”ã€ç”Ÿæˆå™¨å‡½æ•°ï¼šæƒ°æ€§è®¡ç®—çš„è‰ºæœ¯</h2>
<h3 data-id="heading-15">5.1 yieldå…³é”®å­—ä¸ç”Ÿæˆå™¨</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"=== ç”Ÿæˆå™¨å‡½æ•°ï¼šä½¿ç”¨yield ==="</span>)

<span class="hljs-comment"># ç”Ÿæˆå™¨å‡½æ•°ä½¿ç”¨yieldè¿”å›ä¸€ä¸ªå€¼ï¼Œå¹¶æš‚åœæ‰§è¡Œï¼Œä¸‹æ¬¡ä»æš‚åœå¤„ç»§ç»­</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">simple_generator</span>():
    <span class="hljs-string">"""ä¸€ä¸ªç®€å•çš„ç”Ÿæˆå™¨"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼€å§‹"</span>)
    <span class="hljs-keyword">yield</span> <span class="hljs-number">1</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç»§ç»­"</span>)
    <span class="hljs-keyword">yield</span> <span class="hljs-number">2</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç»“æŸ"</span>)
    <span class="hljs-keyword">yield</span> <span class="hljs-number">3</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"åˆ›å»ºç”Ÿæˆå™¨ï¼š"</span>)
gen = simple_generator()

<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç¬¬ä¸€æ¬¡è°ƒç”¨nextï¼š"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(gen))

<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç¬¬äºŒæ¬¡è°ƒç”¨nextï¼š"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(gen))

<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç¬¬ä¸‰æ¬¡è°ƒç”¨nextï¼š"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(gen))

<span class="hljs-comment"># å†æ¬¡è°ƒç”¨ä¼šæŠ›å‡ºStopIterationå¼‚å¸¸</span>
<span class="hljs-keyword">try</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(gen))
<span class="hljs-keyword">except</span> StopIteration:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç”Ÿæˆå™¨å·²ç»“æŸ"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== ä½¿ç”¨forå¾ªç¯éå†ç”Ÿæˆå™¨ ==="</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">countdown</span>(<span class="hljs-params">n</span>):
    <span class="hljs-string">"""å€’æ•°ç”Ÿæˆå™¨"""</span>
    <span class="hljs-keyword">while</span> n &gt; <span class="hljs-number">0</span>:
        <span class="hljs-keyword">yield</span> n
        n -= <span class="hljs-number">1</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"å€’æ•°ï¼š"</span>)
<span class="hljs-keyword">for</span> number <span class="hljs-keyword">in</span> countdown(<span class="hljs-number">5</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å€’è®¡æ—¶ï¼š<span class="hljs-subst">{number}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== ç”Ÿæˆå™¨è¡¨è¾¾å¼ ==="</span>)

<span class="hljs-comment"># ç”Ÿæˆå™¨è¡¨è¾¾å¼ç±»ä¼¼äºåˆ—è¡¨æ¨å¯¼å¼ï¼Œä½†ä½¿ç”¨åœ†æ‹¬å·</span>
numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]

<span class="hljs-comment"># åˆ—è¡¨æ¨å¯¼å¼ï¼šç«‹å³è®¡ç®—æ‰€æœ‰å€¼</span>
squares_list = [x**<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> numbers]
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆ—è¡¨æ¨å¯¼å¼ï¼š<span class="hljs-subst">{squares_list}</span>ï¼Œç±»å‹ï¼š<span class="hljs-subst">{<span class="hljs-built_in">type</span>(squares_list)}</span>"</span>)

<span class="hljs-comment"># ç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼šæƒ°æ€§è®¡ç®—</span>
squares_gen = (x**<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> numbers)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼š<span class="hljs-subst">{squares_gen}</span>ï¼Œç±»å‹ï¼š<span class="hljs-subst">{<span class="hljs-built_in">type</span>(squares_gen)}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"è½¬æ¢ä¸ºåˆ—è¡¨ï¼š<span class="hljs-subst">{<span class="hljs-built_in">list</span>(squares_gen)}</span>"</span>)
</code></pre>
<h3 data-id="heading-16">5.2 ç”Ÿæˆå™¨çš„å®é™…åº”ç”¨</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== ç”Ÿæˆå™¨çš„å®é™…åº”ç”¨ ==="</span>)

<span class="hljs-comment"># 1. è¯»å–å¤§æ–‡ä»¶</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">read_large_file</span>(<span class="hljs-params">file_path</span>):
    <span class="hljs-string">"""é€è¡Œè¯»å–å¤§æ–‡ä»¶"""</span>
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">'r'</span>, encoding=<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">as</span> file:
        <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> file:
            <span class="hljs-keyword">yield</span> line.strip()

<span class="hljs-comment"># æ¨¡æ‹Ÿå¤§æ–‡ä»¶</span>
<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">'large_file.txt'</span>, <span class="hljs-string">'w'</span>, encoding=<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">as</span> f:
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000</span>):
        f.write(<span class="hljs-string">f"è¿™æ˜¯ç¬¬<span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span>è¡Œæ•°æ®\n"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"è¯»å–å¤§æ–‡ä»¶ï¼ˆä¸å ç”¨å¤ªå¤šå†…å­˜ï¼‰ï¼š"</span>)
line_count = <span class="hljs-number">0</span>
<span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> read_large_file(<span class="hljs-string">'large_file.txt'</span>):
    <span class="hljs-keyword">if</span> line_count &lt; <span class="hljs-number">5</span>:  <span class="hljs-comment"># åªæ˜¾ç¤ºå‰5è¡Œ</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  <span class="hljs-subst">{line}</span>"</span>)
    line_count += <span class="hljs-number">1</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ€»è¡Œæ•°ï¼š<span class="hljs-subst">{line_count}</span>"</span>)

<span class="hljs-comment"># 2. æ— é™åºåˆ—</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">fibonacci_sequence</span>():
    <span class="hljs-string">"""ç”Ÿæˆæ–æ³¢é‚£å¥‘æ•°åˆ—ï¼ˆæ— é™ï¼‰"""</span>
    a, b = <span class="hljs-number">0</span>, <span class="hljs-number">1</span>
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        <span class="hljs-keyword">yield</span> a
        a, b = b, a + b

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ–æ³¢é‚£å¥‘æ•°åˆ—ï¼ˆå‰10ä¸ªï¼‰ï¼š"</span>)
fib_gen = fibonacci_sequence()
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  F<span class="hljs-subst">{i}</span> = <span class="hljs-subst">{<span class="hljs-built_in">next</span>(fib_gen)}</span>"</span>)

<span class="hljs-comment"># 3. ç®¡é“å¤„ç†</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">number_generator</span>(<span class="hljs-params">n</span>):
    <span class="hljs-string">"""ç”Ÿæˆæ•°å­—"""</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):
        <span class="hljs-keyword">yield</span> i

<span class="hljs-keyword">def</span> <span class="hljs-title function_">square_numbers</span>(<span class="hljs-params">numbers</span>):
    <span class="hljs-string">"""å¹³æ–¹æ•°å­—"""</span>
    <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> numbers:
        <span class="hljs-keyword">yield</span> num ** <span class="hljs-number">2</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">filter_even</span>(<span class="hljs-params">numbers</span>):
    <span class="hljs-string">"""è¿‡æ»¤å¶æ•°"""</span>
    <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> numbers:
        <span class="hljs-keyword">if</span> num % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>:
            <span class="hljs-keyword">yield</span> num

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nç®¡é“å¤„ç†ï¼šç”Ÿæˆ â†’ å¹³æ–¹ â†’ è¿‡æ»¤"</span>)
pipeline = filter_even(square_numbers(number_generator(<span class="hljs-number">10</span>)))
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç»“æœï¼š<span class="hljs-subst">{<span class="hljs-built_in">list</span>(pipeline)}</span>"</span>)

<span class="hljs-comment"># 4. åç¨‹ï¼ˆåŒå‘é€šä¿¡ï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">coroutine_example</span>():
    <span class="hljs-string">"""ä¸€ä¸ªç®€å•çš„åç¨‹"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"åç¨‹å¯åŠ¨"</span>)
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        value = <span class="hljs-keyword">yield</span>  <span class="hljs-comment"># æ¥æ”¶å€¼</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ”¶åˆ°å€¼ï¼š<span class="hljs-subst">{value}</span>"</span>)
        <span class="hljs-keyword">yield</span> value * <span class="hljs-number">2</span>  <span class="hljs-comment"># è¿”å›å€¼</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nåç¨‹ç¤ºä¾‹ï¼š"</span>)
coro = coroutine_example()
<span class="hljs-built_in">next</span>(coro)  <span class="hljs-comment"># å¯åŠ¨åç¨‹ï¼Œæ‰§è¡Œåˆ°ç¬¬ä¸€ä¸ªyield</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‘é€10ï¼Œæ”¶åˆ°ï¼š<span class="hljs-subst">{coro.send(<span class="hljs-number">10</span>)}</span>"</span>)
<span class="hljs-built_in">next</span>(coro)  <span class="hljs-comment"># ç»§ç»­åˆ°ä¸‹ä¸€ä¸ªyield</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‘é€20ï¼Œæ”¶åˆ°ï¼š<span class="hljs-subst">{coro.send(<span class="hljs-number">20</span>)}</span>"</span>)
</code></pre>
<h2 data-id="heading-17">å…­ã€é¢å‘å¯¹è±¡ä¸­çš„å‡½æ•°ï¼šæ–¹æ³•ä¸ç‰¹æ®Šæ–¹æ³•</h2>
<h3 data-id="heading-18">6.1 ç±»æ–¹æ³•ä¸å®ä¾‹æ–¹æ³•</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"=== ç±»ä¸­çš„å‡½æ•°ï¼šæ–¹æ³• ==="</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Calculator</span>:
    <span class="hljs-string">"""è®¡ç®—å™¨ç±»"""</span>
    
    <span class="hljs-comment"># ç±»å±æ€§</span>
    operation_count = <span class="hljs-number">0</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name=<span class="hljs-string">"è®¡ç®—å™¨"</span></span>):
        <span class="hljs-string">"""æ„é€ æ–¹æ³•"""</span>
        self.name = name
        self.history = []
    
    <span class="hljs-comment"># å®ä¾‹æ–¹æ³•ï¼šæ“ä½œå®ä¾‹æ•°æ®</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">self, a, b</span>):
        <span class="hljs-string">"""åŠ æ³•"""</span>
        Calculator.operation_count += <span class="hljs-number">1</span>
        result = a + b
        self.history.append(<span class="hljs-string">f"<span class="hljs-subst">{a}</span> + <span class="hljs-subst">{b}</span> = <span class="hljs-subst">{result}</span>"</span>)
        <span class="hljs-keyword">return</span> result
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">multiply</span>(<span class="hljs-params">self, a, b</span>):
        <span class="hljs-string">"""ä¹˜æ³•"""</span>
        Calculator.operation_count += <span class="hljs-number">1</span>
        result = a * b
        self.history.append(<span class="hljs-string">f"<span class="hljs-subst">{a}</span> Ã— <span class="hljs-subst">{b}</span> = <span class="hljs-subst">{result}</span>"</span>)
        <span class="hljs-keyword">return</span> result
    
    <span class="hljs-comment"># å®ä¾‹æ–¹æ³•ï¼šè®¿é—®å®ä¾‹æ•°æ®</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">show_history</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""æ˜¾ç¤ºå†å²è®°å½•"""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.history:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{self.name}</span> è¿˜æ²¡æœ‰æ“ä½œè®°å½•"</span>)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{self.name}</span> çš„æ“ä½œè®°å½•ï¼š"</span>)
            <span class="hljs-keyword">for</span> operation <span class="hljs-keyword">in</span> self.history:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  <span class="hljs-subst">{operation}</span>"</span>)
    
    <span class="hljs-comment"># ç±»æ–¹æ³•ï¼šæ“ä½œç±»æ•°æ®</span>
<span class="hljs-meta">    @classmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_operation_count</span>(<span class="hljs-params">cls</span>):
        <span class="hljs-string">"""è·å–æ€»æ“ä½œæ¬¡æ•°"""</span>
        <span class="hljs-keyword">return</span> cls.operation_count
    
    <span class="hljs-comment"># é™æ€æ–¹æ³•ï¼šä¸è®¿é—®ç±»æˆ–å®ä¾‹æ•°æ®</span>
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">help</span>():
        <span class="hljs-string">"""æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯"""</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"è¿™æ˜¯ä¸€ä¸ªè®¡ç®—å™¨ç±»ï¼Œæ”¯æŒåŠ æ³•å’Œä¹˜æ³•è¿ç®—"</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"åˆ›å»ºè®¡ç®—å™¨å®ä¾‹ï¼š"</span>)
calc1 = Calculator(<span class="hljs-string">"æˆ‘çš„è®¡ç®—å™¨"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nä½¿ç”¨å®ä¾‹æ–¹æ³•ï¼š"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"5 + 3 = <span class="hljs-subst">{calc1.add(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"5 Ã— 3 = <span class="hljs-subst">{calc1.multiply(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)}</span>"</span>)
calc1.show_history()

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nä½¿ç”¨ç±»æ–¹æ³•ï¼š"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ€»æ“ä½œæ¬¡æ•°ï¼š<span class="hljs-subst">{Calculator.get_operation_count()}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nä½¿ç”¨é™æ€æ–¹æ³•ï¼š"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¸®åŠ©ä¿¡æ¯ï¼š<span class="hljs-subst">{Calculator.<span class="hljs-built_in">help</span>()}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nåˆ›å»ºç¬¬äºŒä¸ªè®¡ç®—å™¨ï¼š"</span>)
calc2 = Calculator(<span class="hljs-string">"ç¬¬äºŒä¸ªè®¡ç®—å™¨"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"10 + 20 = <span class="hljs-subst">{calc2.add(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>)}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ€»æ“ä½œæ¬¡æ•°ï¼ˆç±»çº§åˆ«ï¼‰ï¼š<span class="hljs-subst">{Calculator.get_operation_count()}</span>"</span>)
</code></pre>
<h3 data-id="heading-19">6.2 ç‰¹æ®Šæ–¹æ³•ï¼ˆé­”æœ¯æ–¹æ³•ï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== ç‰¹æ®Šæ–¹æ³•ï¼ˆé­”æœ¯æ–¹æ³•ï¼‰ ==="</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Vector</span>:
    <span class="hljs-string">"""å‘é‡ç±»ï¼Œæ¼”ç¤ºç‰¹æ®Šæ–¹æ³•"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, x, y</span>):
        self.x = x
        self.y = y
    
    <span class="hljs-comment"># å­—ç¬¦ä¸²è¡¨ç¤º</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__str__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""str() æ—¶è°ƒç”¨"""</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"Vector(<span class="hljs-subst">{self.x}</span>, <span class="hljs-subst">{self.y}</span>)"</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__repr__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""repr() æ—¶è°ƒç”¨"""</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"Vector(<span class="hljs-subst">{self.x}</span>, <span class="hljs-subst">{self.y}</span>)"</span>
    
    <span class="hljs-comment"># ç®—æœ¯è¿ç®—</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__add__</span>(<span class="hljs-params">self, other</span>):
        <span class="hljs-string">"""+ è¿ç®—"""</span>
        <span class="hljs-keyword">return</span> Vector(self.x + other.x, self.y + other.y)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__sub__</span>(<span class="hljs-params">self, other</span>):
        <span class="hljs-string">"""- è¿ç®—"""</span>
        <span class="hljs-keyword">return</span> Vector(self.x - other.x, self.y - other.y)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__mul__</span>(<span class="hljs-params">self, scalar</span>):
        <span class="hljs-string">"""* è¿ç®—ï¼ˆå‘é‡ä¹˜ä»¥æ ‡é‡ï¼‰"""</span>
        <span class="hljs-keyword">return</span> Vector(self.x * scalar, self.y * scalar)
    
    <span class="hljs-comment"># æ¯”è¾ƒè¿ç®—</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__eq__</span>(<span class="hljs-params">self, other</span>):
        <span class="hljs-string">"""== è¿ç®—"""</span>
        <span class="hljs-keyword">return</span> self.x == other.x <span class="hljs-keyword">and</span> self.y == other.y
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__lt__</span>(<span class="hljs-params">self, other</span>):
        <span class="hljs-string">"""&lt; è¿ç®—ï¼ˆæ¯”è¾ƒé•¿åº¦ï¼‰"""</span>
        <span class="hljs-keyword">return</span> (self.x**<span class="hljs-number">2</span> + self.y**<span class="hljs-number">2</span>) &lt; (other.x**<span class="hljs-number">2</span> + other.y**<span class="hljs-number">2</span>)
    
    <span class="hljs-comment"># é•¿åº¦å’Œå¸ƒå°”å€¼</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__len__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""len() æ—¶è°ƒç”¨ï¼ˆè¿”å›ç»´åº¦ï¼‰"""</span>
        <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__bool__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""bool() æ—¶è°ƒç”¨"""</span>
        <span class="hljs-keyword">return</span> self.x != <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> self.y != <span class="hljs-number">0</span>
    
    <span class="hljs-comment"># è°ƒç”¨å¯¹è±¡</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, scale=<span class="hljs-number">1</span></span>):
        <span class="hljs-string">"""å¯¹è±¡è¢«è°ƒç”¨æ—¶"""</span>
        <span class="hljs-keyword">return</span> Vector(self.x * scale, self.y * scale)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"åˆ›å»ºå‘é‡ï¼š"</span>)
v1 = Vector(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)
v2 = Vector(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"v1 = <span class="hljs-subst">{v1}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"v2 = <span class="hljs-subst">{v2}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nv1 + v2 = <span class="hljs-subst">{v1 + v2}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"v1 - v2 = <span class="hljs-subst">{v1 - v2}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"v1 * 2 = <span class="hljs-subst">{v1 * <span class="hljs-number">2</span>}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nv1 == v2: <span class="hljs-subst">{v1 == v2}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"v1 &lt; v2: <span class="hljs-subst">{v1 &lt; v2}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nlen(v1): <span class="hljs-subst">{<span class="hljs-built_in">len</span>(v1)}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"bool(v1): <span class="hljs-subst">{<span class="hljs-built_in">bool</span>(v1)}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nv1(2): <span class="hljs-subst">{v1(<span class="hljs-number">2</span>)}</span>"</span>)  <span class="hljs-comment"># è°ƒç”¨å¯¹è±¡</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== å±æ€§è®¿é—®ç‰¹æ®Šæ–¹æ³• ==="</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>:
    <span class="hljs-string">"""æ¼”ç¤ºå±æ€§è®¿é—®ç‰¹æ®Šæ–¹æ³•"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, age</span>):
        self.name = name
        self._age = age  <span class="hljs-comment"># ç§æœ‰å±æ€§</span>
    
    <span class="hljs-comment"># å±æ€§è®¿é—®</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__getattr__</span>(<span class="hljs-params">self, name</span>):
        <span class="hljs-string">"""è®¿é—®ä¸å­˜åœ¨çš„å±æ€§æ—¶è°ƒç”¨"""</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"__getattr__: å°è¯•è®¿é—®ä¸å­˜åœ¨çš„å±æ€§ '<span class="hljs-subst">{name}</span>'"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__setattr__</span>(<span class="hljs-params">self, name, value</span>):
        <span class="hljs-string">"""è®¾ç½®å±æ€§æ—¶è°ƒç”¨"""</span>
        <span class="hljs-keyword">if</span> name == <span class="hljs-string">'_age'</span> <span class="hljs-keyword">and</span> value &lt; <span class="hljs-number">0</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•°ï¼"</span>)
            <span class="hljs-keyword">return</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"__setattr__: è®¾ç½®å±æ€§ <span class="hljs-subst">{name}</span> = <span class="hljs-subst">{value}</span>"</span>)
        <span class="hljs-built_in">super</span>().__setattr__(name, value)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__delattr__</span>(<span class="hljs-params">self, name</span>):
        <span class="hljs-string">"""åˆ é™¤å±æ€§æ—¶è°ƒç”¨"""</span>
        <span class="hljs-keyword">if</span> name == <span class="hljs-string">'name'</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¸èƒ½åˆ é™¤å§“åå±æ€§ï¼"</span>)
            <span class="hljs-keyword">return</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"__delattr__: åˆ é™¤å±æ€§ <span class="hljs-subst">{name}</span>"</span>)
        <span class="hljs-built_in">super</span>().__delattr__(name)

person = Person(<span class="hljs-string">"å°æ˜"</span>, <span class="hljs-number">25</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å§“åï¼š<span class="hljs-subst">{person.name}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¹´é¾„ï¼š<span class="hljs-subst">{person._age}</span>"</span>)

person.salary = <span class="hljs-number">5000</span>  <span class="hljs-comment"># è®¾ç½®æ–°å±æ€§</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"è–ªæ°´ï¼š<span class="hljs-subst">{person.salary}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä¸å­˜åœ¨çš„å±æ€§ï¼š<span class="hljs-subst">{person.address}</span>"</span>)  <span class="hljs-comment"># è®¿é—®ä¸å­˜åœ¨çš„å±æ€§</span>

<span class="hljs-keyword">del</span> person.salary  <span class="hljs-comment"># åˆ é™¤å±æ€§</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆ é™¤åï¼š<span class="hljs-subst">{person.salary}</span>"</span>)
</code></pre>
<h2 data-id="heading-20">ä¸ƒã€å®æˆ˜åº”ç”¨ï¼šå‡½æ•°å¼æ•°æ®å¤„ç†ç®¡é“</h2>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== å®æˆ˜ï¼šå‡½æ•°å¼æ•°æ®å¤„ç†ç®¡é“ ==="</span>)

<span class="hljs-comment"># åˆ›å»ºç¤ºä¾‹æ•°æ®</span>
students = [
    {<span class="hljs-string">"name"</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"age"</span>: <span class="hljs-number">18</span>, <span class="hljs-string">"scores"</span>: {<span class="hljs-string">"math"</span>: <span class="hljs-number">85</span>, <span class="hljs-string">"english"</span>: <span class="hljs-number">92</span>, <span class="hljs-string">"chinese"</span>: <span class="hljs-number">78</span>}},
    {<span class="hljs-string">"name"</span>: <span class="hljs-string">"æå››"</span>, <span class="hljs-string">"age"</span>: <span class="hljs-number">17</span>, <span class="hljs-string">"scores"</span>: {<span class="hljs-string">"math"</span>: <span class="hljs-number">92</span>, <span class="hljs-string">"english"</span>: <span class="hljs-number">88</span>, <span class="hljs-string">"chinese"</span>: <span class="hljs-number">95</span>}},
    {<span class="hljs-string">"name"</span>: <span class="hljs-string">"ç‹äº”"</span>, <span class="hljs-string">"age"</span>: <span class="hljs-number">19</span>, <span class="hljs-string">"scores"</span>: {<span class="hljs-string">"math"</span>: <span class="hljs-number">76</span>, <span class="hljs-string">"english"</span>: <span class="hljs-number">85</span>, <span class="hljs-string">"chinese"</span>: <span class="hljs-number">90</span>}},
    {<span class="hljs-string">"name"</span>: <span class="hljs-string">"èµµå…­"</span>, <span class="hljs-string">"age"</span>: <span class="hljs-number">18</span>, <span class="hljs-string">"scores"</span>: {<span class="hljs-string">"math"</span>: <span class="hljs-number">88</span>, <span class="hljs-string">"english"</span>: <span class="hljs-number">92</span>, <span class="hljs-string">"chinese"</span>: <span class="hljs-number">86</span>}},
    {<span class="hljs-string">"name"</span>: <span class="hljs-string">"é’±ä¸ƒ"</span>, <span class="hljs-string">"age"</span>: <span class="hljs-number">17</span>, <span class="hljs-string">"scores"</span>: {<span class="hljs-string">"math"</span>: <span class="hljs-number">95</span>, <span class="hljs-string">"english"</span>: <span class="hljs-number">79</span>, <span class="hljs-string">"chinese"</span>: <span class="hljs-number">88</span>}},
]

<span class="hljs-comment"># 1. çº¯å‡½æ•°ï¼šä¸ä¿®æ”¹å¤–éƒ¨çŠ¶æ€ï¼Œç›¸åŒè¾“å…¥æ€»æ˜¯å¾—åˆ°ç›¸åŒè¾“å‡º</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_average</span>(<span class="hljs-params">student</span>):
    <span class="hljs-string">"""è®¡ç®—å­¦ç”Ÿçš„å¹³å‡åˆ†"""</span>
    scores = student[<span class="hljs-string">"scores"</span>].values()
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span>(scores) / <span class="hljs-built_in">len</span>(scores)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">add_average</span>(<span class="hljs-params">student</span>):
    <span class="hljs-string">"""æ·»åŠ å¹³å‡åˆ†åˆ°å­¦ç”Ÿä¿¡æ¯ï¼ˆè¿”å›æ–°å­—å…¸ï¼‰"""</span>
    student_copy = student.copy()
    student_copy[<span class="hljs-string">"average"</span>] = calculate_average(student)
    <span class="hljs-keyword">return</span> student_copy

<span class="hljs-comment"># 2. é«˜é˜¶å‡½æ•°ï¼šå¤„ç†æ•°æ®ç®¡é“</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_students</span>(<span class="hljs-params">students, *processors</span>):
    <span class="hljs-string">"""å¤„ç†å­¦ç”Ÿæ•°æ®ç®¡é“"""</span>
    result = students
    <span class="hljs-keyword">for</span> processor <span class="hljs-keyword">in</span> processors:
        result = processor(result)
    <span class="hljs-keyword">return</span> result

<span class="hljs-comment"># 3. æ•°æ®å¤„ç†å‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">add_average_to_all</span>(<span class="hljs-params">students</span>):
    <span class="hljs-string">"""ä¸ºæ‰€æœ‰å­¦ç”Ÿæ·»åŠ å¹³å‡åˆ†"""</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(add_average, students))

<span class="hljs-keyword">def</span> <span class="hljs-title function_">filter_by_age</span>(<span class="hljs-params">students, min_age=<span class="hljs-number">18</span></span>):
    <span class="hljs-string">"""è¿‡æ»¤å¹´é¾„"""</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">list</span>(<span class="hljs-built_in">filter</span>(<span class="hljs-keyword">lambda</span> s: s[<span class="hljs-string">"age"</span>] &gt;= min_age, students))

<span class="hljs-keyword">def</span> <span class="hljs-title function_">sort_by_average</span>(<span class="hljs-params">students, reverse=<span class="hljs-literal">True</span></span>):
    <span class="hljs-string">"""æŒ‰å¹³å‡åˆ†æ’åº"""</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">sorted</span>(students, key=<span class="hljs-keyword">lambda</span> s: s.get(<span class="hljs-string">"average"</span>, <span class="hljs-number">0</span>), reverse=reverse)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_top_n</span>(<span class="hljs-params">students, n=<span class="hljs-number">3</span></span>):
    <span class="hljs-string">"""è·å–å‰Nåå­¦ç”Ÿ"""</span>
    <span class="hljs-keyword">return</span> students[:n]

<span class="hljs-keyword">def</span> <span class="hljs-title function_">format_output</span>(<span class="hljs-params">students</span>):
    <span class="hljs-string">"""æ ¼å¼åŒ–è¾“å‡º"""</span>
    <span class="hljs-keyword">return</span> [<span class="hljs-string">f"<span class="hljs-subst">{s[<span class="hljs-string">'name'</span>]}</span>ï¼ˆ<span class="hljs-subst">{s[<span class="hljs-string">'age'</span>]}</span>å²ï¼‰: å¹³å‡åˆ†<span class="hljs-subst">{s[<span class="hljs-string">'average'</span>]:<span class="hljs-number">.1</span>f}</span>"</span> <span class="hljs-keyword">for</span> s <span class="hljs-keyword">in</span> students]

<span class="hljs-comment"># 4. ç»„åˆå‡½æ•°</span>
<span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> partial

<span class="hljs-comment"># åˆ›å»ºéƒ¨åˆ†å‡½æ•°</span>
filter_adults = partial(filter_by_age, min_age=<span class="hljs-number">18</span>)
get_top_3 = partial(get_top_n, n=<span class="hljs-number">3</span>)

<span class="hljs-comment"># 5. æ„å»ºæ•°æ®å¤„ç†ç®¡é“</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ•°æ®å¤„ç†ç®¡é“ï¼šæ·»åŠ å¹³å‡åˆ† â†’ è¿‡æ»¤æˆå¹´äºº â†’ æŒ‰å¹³å‡åˆ†æ’åº â†’ å–å‰ä¸‰å"</span>)

result = process_students(
    students,
    add_average_to_all,
    filter_adults,
    <span class="hljs-keyword">lambda</span> s: sort_by_average(s, reverse=<span class="hljs-literal">True</span>),
    get_top_3,
    format_output
)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nç»“æœï¼š"</span>)
<span class="hljs-keyword">for</span> i, student <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(result, <span class="hljs-number">1</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  <span class="hljs-subst">{i}</span>. <span class="hljs-subst">{student}</span>"</span>)

<span class="hljs-comment"># 6. ä½¿ç”¨è£…é¥°å™¨è®°å½•å¤„ç†æ­¥éª¤</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">log_step</span>(<span class="hljs-params">step_name</span>):
    <span class="hljs-string">"""è®°å½•å¤„ç†æ­¥éª¤çš„è£…é¥°å™¨"""</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">func</span>):
        <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">students</span>):
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ­¥éª¤ï¼š<span class="hljs-subst">{step_name}</span> (å¤„ç†<span class="hljs-subst">{<span class="hljs-built_in">len</span>(students)}</span>åå­¦ç”Ÿ)"</span>)
            result = func(students)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  ç»“æœï¼š<span class="hljs-subst">{<span class="hljs-built_in">len</span>(result)}</span>åå­¦ç”Ÿ"</span>)
            <span class="hljs-keyword">return</span> result
        <span class="hljs-keyword">return</span> wrapper
    <span class="hljs-keyword">return</span> decorator

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== å¸¦æ—¥å¿—çš„æ•°æ®å¤„ç†ç®¡é“ ==="</span>)

<span class="hljs-meta">@log_step(<span class="hljs-params"><span class="hljs-string">"æ·»åŠ å¹³å‡åˆ†"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">add_average_with_log</span>(<span class="hljs-params">students</span>):
    <span class="hljs-keyword">return</span> add_average_to_all(students)

<span class="hljs-meta">@log_step(<span class="hljs-params"><span class="hljs-string">"è¿‡æ»¤æˆå¹´äºº"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">filter_adults_with_log</span>(<span class="hljs-params">students</span>):
    <span class="hljs-keyword">return</span> filter_adults(students)

<span class="hljs-meta">@log_step(<span class="hljs-params"><span class="hljs-string">"æŒ‰å¹³å‡åˆ†æ’åº"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">sort_by_average_with_log</span>(<span class="hljs-params">students</span>):
    <span class="hljs-keyword">return</span> sort_by_average(students, reverse=<span class="hljs-literal">True</span>)

<span class="hljs-meta">@log_step(<span class="hljs-params"><span class="hljs-string">"å–å‰ä¸‰å"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_top_3_with_log</span>(<span class="hljs-params">students</span>):
    <span class="hljs-keyword">return</span> get_top_3(students)

final_result = process_students(
    students,
    add_average_with_log,
    filter_adults_with_log,
    sort_by_average_with_log,
    get_top_3_with_log,
    format_output
)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\næœ€ç»ˆç»“æœï¼š"</span>)
<span class="hljs-keyword">for</span> i, student <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(final_result, <span class="hljs-number">1</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  <span class="hljs-subst">{i}</span>. <span class="hljs-subst">{student}</span>"</span>)
</code></pre>
<h2 data-id="heading-21">å…«ã€æ€»ç»“ï¼šPythonå‡½æ•°çš„æ ¸å¿ƒè¦ç‚¹</h2>
<h3 data-id="heading-22">ğŸ¯ æ ¸å¿ƒè¦ç‚¹æ€»ç»“ï¼š</h3>
<ol>
<li>
<p><strong>å‡½æ•°å®šä¹‰</strong>ï¼šä½¿ç”¨<code>def</code>å…³é”®å­—ï¼Œå¯ä»¥å¸¦å‚æ•°å’Œè¿”å›å€¼</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">function_name</span>(<span class="hljs-params">parameters</span>):
    <span class="hljs-string">"""æ–‡æ¡£å­—ç¬¦ä¸²"""</span>
    <span class="hljs-comment"># å‡½æ•°ä½“</span>
    <span class="hljs-keyword">return</span> value
</code></pre>
</li>
<li>
<p><strong>å››ç§å‚æ•°ç±»å‹</strong>ï¼š</p>
<ul>
<li><strong>ä½ç½®å‚æ•°</strong>ï¼šæŒ‰é¡ºåºä¼ é€’</li>
<li><strong>å…³é”®å­—å‚æ•°</strong>ï¼šæŒ‡å®šå‚æ•°å</li>
<li><strong>é»˜è®¤å‚æ•°</strong>ï¼šå‚æ•°æœ‰é»˜è®¤å€¼</li>
<li><strong>å¯å˜å‚æ•°</strong>ï¼š<code>*args</code>å’Œ<code>**kwargs</code></li>
</ul>
</li>
<li>
<p><strong>è£…é¥°å™¨</strong>ï¼šå¢å¼ºå‡½æ•°åŠŸèƒ½çš„å¼ºå¤§å·¥å…·</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@decorator</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">function</span>():
    <span class="hljs-keyword">pass</span>
</code></pre>
</li>
<li>
<p><strong>Lambdaè¡¨è¾¾å¼</strong>ï¼šåŒ¿åå‡½æ•°ï¼Œç®€æ´é«˜æ•ˆ</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">lambda</span> x: x**<span class="hljs-number">2</span>
</code></pre>
</li>
<li>
<p><strong>ç”Ÿæˆå™¨</strong>ï¼šä½¿ç”¨<code>yield</code>ï¼ŒèŠ‚çœå†…å­˜</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">generator</span>():
    <span class="hljs-keyword">yield</span> value
</code></pre>
</li>
<li>
<p><strong>é—­åŒ…</strong>ï¼šå‡½æ•°ä¸­çš„å‡½æ•°ï¼Œå¯ä»¥"è®°ä½"å¤–éƒ¨å˜é‡</p>
</li>
</ol>
<h3 data-id="heading-23">ğŸ’¡ æœ€ä½³å®è·µï¼š</h3>
<ol>
<li>
<p><strong>ä¸€ä¸ªå‡½æ•°åªåšä¸€ä»¶äº‹</strong>ï¼šä¿æŒå‡½æ•°ç®€æ´ï¼ŒåŠŸèƒ½å•ä¸€</p>
</li>
<li>
<p><strong>ä½¿ç”¨æœ‰æ„ä¹‰çš„å‡½æ•°å</strong>ï¼šå‡½æ•°ååº”è¯¥æè¿°å‡½æ•°çš„åŠŸèƒ½</p>
</li>
<li>
<p><strong>ç¼–å†™æ–‡æ¡£å­—ç¬¦ä¸²</strong>ï¼šè§£é‡Šå‡½æ•°çš„ä½œç”¨ã€å‚æ•°å’Œè¿”å›å€¼</p>
</li>
<li>
<p><strong>ä½¿ç”¨ç±»å‹æç¤º</strong>ï¼ˆPython 3.5+ï¼‰ï¼šæé«˜ä»£ç å¯è¯»æ€§</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a: <span class="hljs-built_in">int</span>, b: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:
    <span class="hljs-keyword">return</span> a + b
</code></pre>
</li>
<li>
<p><strong>é¿å…å‰¯ä½œç”¨</strong>ï¼šçº¯å‡½æ•°æ›´å®¹æ˜“æµ‹è¯•å’Œç»´æŠ¤</p>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pythonæ¨¡å—ä¸åŒ…ï¼šæ„å»ºå¯ç»´æŠ¤çš„ä»£ç ç»“æ„]]></title>    <link>https://juejin.cn/post/7587368168622817286</link>    <guid>https://juejin.cn/post/7587368168622817286</guid>    <pubDate>2025-12-25T05:31:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587368168622817286" data-draft-id="7587349016222973993" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pythonæ¨¡å—ä¸åŒ…ï¼šæ„å»ºå¯ç»´æŠ¤çš„ä»£ç ç»“æ„"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2025-12-25T05:31:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åƒè¥¿çº¢æŸ¿é•¿å¤§çš„ç•ªèŒ„"/> <meta itemprop="url" content="https://juejin.cn/user/3097787706900985"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pythonæ¨¡å—ä¸åŒ…ï¼šæ„å»ºå¯ç»´æŠ¤çš„ä»£ç ç»“æ„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3097787706900985/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åƒè¥¿çº¢æŸ¿é•¿å¤§çš„ç•ªèŒ„
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T05:31:20.000Z" title="Thu Dec 25 2025 05:31:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-light">.hljs-comment,.hljs-quote{color:#696969}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#d91e18}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#aa5d00}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:green}.hljs-section,.hljs-title{color:#007faa}.hljs-keyword,.hljs-selector-tag{color:#7928a1}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fefefe;color:#545454}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><p>åœ¨Pythonç¼–ç¨‹ä¸­ï¼Œæ¨¡å—å’ŒåŒ…å°±åƒä¹é«˜ç§¯æœ¨çš„ç›’å­â€”â€”å®ƒä»¬å¸®åŠ©ä½ æŠŠç›¸å…³çš„ä»£ç ç»„ç»‡åœ¨ä¸€èµ·ï¼Œè®©å¤§å‹é¡¹ç›®å˜å¾—äº•ç„¶æœ‰åºã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬æ¥å­¦ä¹ å¦‚ä½•å°†Pythonä»£ç ç»„ç»‡æˆæ¨¡å—å’ŒåŒ…ï¼Œæ„å»ºå¯ç»´æŠ¤çš„ä»£ç ç»“æ„ï¼</p>
<h2 data-id="heading-0">å¼•å…¥ï¼šä¸ºä»€ä¹ˆéœ€è¦æ¨¡å—å’ŒåŒ…ï¼Ÿ</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªç”µå•†ç½‘ç«™ï¼š</p>
<ul>
<li>éœ€è¦å¤„ç†ç”¨æˆ·è®¤è¯</li>
<li>éœ€è¦ç®¡ç†å•†å“</li>
<li>éœ€è¦å¤„ç†è®¢å•</li>
<li>éœ€è¦ä¸æ•°æ®åº“äº¤äº’</li>
</ul>
<p>å¦‚æœä¸ä½¿ç”¨æ¨¡å—å’ŒåŒ…ï¼Œä½ å¯èƒ½ä¼šæœ‰ä¸€ä¸ªå·¨å¤§çš„æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«æ‰€æœ‰åŠŸèƒ½ï¼Œè¿™æ ·çš„ä»£ç ï¼š</p>
<ol>
<li>éš¾ä»¥é˜…è¯»å’Œç»´æŠ¤</li>
<li>éš¾ä»¥å¤šäººåä½œå¼€å‘</li>
<li>éš¾ä»¥é‡ç”¨ç‰¹å®šåŠŸèƒ½</li>
</ol>
<p>ä½¿ç”¨æ¨¡å—å’ŒåŒ…ï¼Œä½ å¯ä»¥ï¼š</p>
<ul>
<li>å°†ç”¨æˆ·è®¤è¯ä»£ç æ”¾åœ¨Â <code>auth.py</code>Â æ¨¡å—ä¸­</li>
<li>å°†å•†å“ç®¡ç†ä»£ç æ”¾åœ¨Â <code>products.py</code>Â æ¨¡å—ä¸­</li>
<li>å°†è®¢å•å¤„ç†ä»£ç æ”¾åœ¨Â <code>orders.py</code>Â æ¨¡å—ä¸­</li>
<li>å°†æ‰€æœ‰ç›¸å…³æ¨¡å—ç»„ç»‡åœ¨Â <code>ecommerce</code>Â åŒ…ä¸­</li>
</ul>
<p>è¿™å°±æ˜¯æ¨¡å—åŒ–å’Œä»£ç ç»„ç»‡çš„é­…åŠ›ï¼</p>
<h2 data-id="heading-1">ä¸€ã€æ¨¡å—åŸºç¡€ï¼šåˆ›å»ºå’Œä½¿ç”¨æ¨¡å—</h2>
<h3 data-id="heading-2">1.1 ä»€ä¹ˆæ˜¯æ¨¡å—ï¼Ÿ</h3>
<p><strong>æ¨¡å—</strong>å°±æ˜¯ä¸€ä¸ªåŒ…å«Pythonä»£ç çš„Â <code>.py</code>Â æ–‡ä»¶ã€‚æ¨¡å—å¯ä»¥åŒ…å«ï¼š</p>
<ul>
<li>å‡½æ•°</li>
<li>ç±»</li>
<li>å˜é‡</li>
<li>å¯æ‰§è¡Œä»£ç </li>
</ul>
<h3 data-id="heading-3">1.2 åˆ›å»ºç¬¬ä¸€ä¸ªæ¨¡å—</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªåä¸º calculator.py çš„æ¨¡å—</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"=== åˆ›å»ºå’Œä½¿ç”¨æ¨¡å— ===\n"</span>)

<span class="hljs-comment"># calculator.py çš„å†…å®¹å¦‚ä¸‹ï¼š</span>
<span class="hljs-string">"""
calculator.py - ä¸€ä¸ªç®€å•çš„è®¡ç®—å™¨æ¨¡å—

è¿™ä¸ªæ¨¡å—åŒ…å«åŸºæœ¬çš„æ•°å­¦è¿ç®—å‡½æ•°ã€‚
"""</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>):
    <span class="hljs-string">"""è¿”å›ä¸¤ä¸ªæ•°çš„å’Œ"""</span>
    <span class="hljs-keyword">return</span> a + b

<span class="hljs-keyword">def</span> <span class="hljs-title function_">subtract</span>(<span class="hljs-params">a, b</span>):
    <span class="hljs-string">"""è¿”å›ä¸¤ä¸ªæ•°çš„å·®"""</span>
    <span class="hljs-keyword">return</span> a - b

<span class="hljs-keyword">def</span> <span class="hljs-title function_">multiply</span>(<span class="hljs-params">a, b</span>):
    <span class="hljs-string">"""è¿”å›ä¸¤ä¸ªæ•°çš„ç§¯"""</span>
    <span class="hljs-keyword">return</span> a * b

<span class="hljs-keyword">def</span> <span class="hljs-title function_">divide</span>(<span class="hljs-params">a, b</span>):
    <span class="hljs-string">"""
    è¿”å›ä¸¤ä¸ªæ•°çš„å•†
    å¦‚æœé™¤æ•°ä¸º0ï¼Œè¿”å›None
    """</span>
    <span class="hljs-keyword">if</span> b == <span class="hljs-number">0</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
    <span class="hljs-keyword">return</span> a / b

<span class="hljs-comment"># æ¨¡å—çº§åˆ«çš„å˜é‡</span>
PI = <span class="hljs-number">3.141592653589793</span>
VERSION = <span class="hljs-string">"1.0.0"</span>

<span class="hljs-comment"># æ¨¡å—çº§åˆ«çš„å‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_version</span>():
    <span class="hljs-string">"""è¿”å›æ¨¡å—ç‰ˆæœ¬"""</span>
    <span class="hljs-keyword">return</span> VERSION

<span class="hljs-comment"># æ¨¡å—æµ‹è¯•ä»£ç ï¼ˆé€šå¸¸æ”¾åœ¨æœ€åï¼‰</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-comment"># åªæœ‰å½“ç›´æ¥è¿è¡Œè¿™ä¸ªæ¨¡å—æ—¶æ‰æ‰§è¡Œ</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æµ‹è¯•è®¡ç®—å™¨æ¨¡å—ï¼š"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"5 + 3 = <span class="hljs-subst">{add(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"5 - 3 = <span class="hljs-subst">{subtract(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"5 * 3 = <span class="hljs-subst">{multiply(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"5 / 3 = <span class="hljs-subst">{divide(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>):<span class="hljs-number">.2</span>f}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"5 / 0 = <span class="hljs-subst">{divide(<span class="hljs-number">5</span>, <span class="hljs-number">0</span>)}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"PI = <span class="hljs-subst">{PI}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç‰ˆæœ¬ï¼š<span class="hljs-subst">{get_version()}</span>"</span>)
</code></pre>
<h3 data-id="heading-4">1.3 ä½¿ç”¨æ¨¡å—</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># main.py - ä½¿ç”¨è®¡ç®—å™¨æ¨¡å—</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"=== ä½¿ç”¨æ¨¡å— ===\n"</span>)

<span class="hljs-comment"># æ–¹æ³•1ï¼šå¯¼å…¥æ•´ä¸ªæ¨¡å—</span>
<span class="hljs-keyword">import</span> calculator

<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–¹æ³•1ï¼šå¯¼å…¥æ•´ä¸ªæ¨¡å—"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"5 + 3 = <span class="hljs-subst">{calculator.add(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"PI = <span class="hljs-subst">{calculator.PI}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç‰ˆæœ¬ï¼š<span class="hljs-subst">{calculator.get_version()}</span>\n"</span>)

<span class="hljs-comment"># æ–¹æ³•2ï¼šå¯¼å…¥ç‰¹å®šå‡½æ•°/å˜é‡</span>
<span class="hljs-keyword">from</span> calculator <span class="hljs-keyword">import</span> add, subtract, PI

<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–¹æ³•2ï¼šå¯¼å…¥ç‰¹å®šå‡½æ•°/å˜é‡"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"5 + 3 = <span class="hljs-subst">{add(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"5 - 3 = <span class="hljs-subst">{subtract(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"PI = <span class="hljs-subst">{PI}</span>\n"</span>)

<span class="hljs-comment"># æ–¹æ³•3ï¼šå¯¼å…¥æ‰€æœ‰å†…å®¹ï¼ˆä¸æ¨èï¼‰</span>
<span class="hljs-keyword">from</span> calculator <span class="hljs-keyword">import</span> *

<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–¹æ³•3ï¼šå¯¼å…¥æ‰€æœ‰å†…å®¹"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"5 * 3 = <span class="hljs-subst">{multiply(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"5 / 3 = <span class="hljs-subst">{divide(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>):<span class="hljs-number">.2</span>f}</span>\n"</span>)

<span class="hljs-comment"># æ–¹æ³•4ï¼šç»™æ¨¡å—èµ·åˆ«å</span>
<span class="hljs-keyword">import</span> calculator <span class="hljs-keyword">as</span> calc

<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–¹æ³•4ï¼šç»™æ¨¡å—èµ·åˆ«å"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"calc.add(5, 3) = <span class="hljs-subst">{calc.add(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"calc.VERSION = <span class="hljs-subst">{calc.VERSION}</span>\n"</span>)

<span class="hljs-comment"># æ–¹æ³•5ï¼šç»™å‡½æ•°èµ·åˆ«å</span>
<span class="hljs-keyword">from</span> calculator <span class="hljs-keyword">import</span> add <span class="hljs-keyword">as</span> addition

<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–¹æ³•5ï¼šç»™å‡½æ•°èµ·åˆ«å"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"addition(5, 3) = <span class="hljs-subst">{addition(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== æŸ¥çœ‹æ¨¡å—ä¿¡æ¯ ==="</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ¨¡å—åï¼š<span class="hljs-subst">{calculator.__name__}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ–‡ä»¶ä½ç½®ï¼š<span class="hljs-subst">{calculator.__file__}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ–‡æ¡£å­—ç¬¦ä¸²ï¼š<span class="hljs-subst">{calculator.__doc__}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ¨¡å—ä¸­çš„æ‰€æœ‰åç§°ï¼š<span class="hljs-subst">{<span class="hljs-built_in">dir</span>(calculator)[:<span class="hljs-number">10</span>]}</span>..."</span>)  <span class="hljs-comment"># åªæ˜¾ç¤ºå‰10ä¸ª</span>
</code></pre>
<h3 data-id="heading-5">1.4 æ¨¡å—æœç´¢è·¯å¾„</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== Pythonæ¨¡å—æœç´¢è·¯å¾„ ==="</span>)

<span class="hljs-keyword">import</span> sys

<span class="hljs-built_in">print</span>(<span class="hljs-string">"Pythonæœç´¢æ¨¡å—çš„è·¯å¾„ï¼š"</span>)
<span class="hljs-keyword">for</span> i, path <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(sys.path, <span class="hljs-number">1</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{i:<span class="hljs-number">2</span>}</span>. <span class="hljs-subst">{path}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== è‡ªå®šä¹‰æ¨¡å—æœç´¢è·¯å¾„ ==="</span>)

<span class="hljs-comment"># æ·»åŠ è‡ªå®šä¹‰è·¯å¾„åˆ°æ¨¡å—æœç´¢è·¯å¾„</span>
<span class="hljs-keyword">import</span> os

<span class="hljs-comment"># åˆ›å»ºè‡ªå®šä¹‰æ¨¡å—ç›®å½•</span>
custom_dir = <span class="hljs-string">"my_modules"</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(custom_dir):
    os.makedirs(custom_dir)

<span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªç®€å•çš„æ¨¡å—</span>
module_content = <span class="hljs-string">'''
def hello():
    return "æ¥è‡ªè‡ªå®šä¹‰æ¨¡å—çš„é—®å€™ï¼"

def add(a, b):
    return a + b
'''</span>

<span class="hljs-comment"># å°†æ¨¡å—ä¿å­˜åˆ°è‡ªå®šä¹‰ç›®å½•</span>
<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(os.path.join(custom_dir, <span class="hljs-string">"mymodule.py"</span>), <span class="hljs-string">"w"</span>) <span class="hljs-keyword">as</span> f:
    f.write(module_content)

<span class="hljs-comment"># æ·»åŠ è‡ªå®šä¹‰ç›®å½•åˆ°æœç´¢è·¯å¾„</span>
sys.path.append(os.path.abspath(custom_dir))

<span class="hljs-comment"># ç°åœ¨å¯ä»¥å¯¼å…¥è‡ªå®šä¹‰æ¨¡å—</span>
<span class="hljs-keyword">try</span>:
    <span class="hljs-keyword">import</span> mymodule
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æˆåŠŸå¯¼å…¥è‡ªå®šä¹‰æ¨¡å—ï¼š<span class="hljs-subst">{mymodule.hello()}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"mymodule.add(5, 3) = <span class="hljs-subst">{mymodule.add(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)}</span>"</span>)
<span class="hljs-keyword">except</span> ImportError <span class="hljs-keyword">as</span> e:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¯¼å…¥å¤±è´¥ï¼š<span class="hljs-subst">{e}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== åŠ¨æ€å¯¼å…¥æ¨¡å— ==="</span>)

<span class="hljs-comment"># æœ‰æ—¶æˆ‘ä»¬éœ€è¦åœ¨è¿è¡Œæ—¶å†³å®šå¯¼å…¥å“ªä¸ªæ¨¡å—</span>
module_name = <span class="hljs-string">"calculator"</span>  <span class="hljs-comment"># å¯ä»¥æ˜¯å˜é‡</span>

<span class="hljs-comment"># æ–¹æ³•1ï¼šä½¿ç”¨__import__</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–¹æ³•1ï¼šä½¿ç”¨ __import__"</span>)
<span class="hljs-keyword">try</span>:
    calc_module = <span class="hljs-built_in">__import__</span>(module_name)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¯¼å…¥æˆåŠŸï¼š<span class="hljs-subst">{calc_module.add(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)}</span>"</span>)
<span class="hljs-keyword">except</span> ImportError:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ— æ³•å¯¼å…¥æ¨¡å—ï¼š<span class="hljs-subst">{module_name}</span>"</span>)

<span class="hljs-comment"># æ–¹æ³•2ï¼šä½¿ç”¨importlibï¼ˆæ¨èï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ–¹æ³•2ï¼šä½¿ç”¨ importlib"</span>)
<span class="hljs-keyword">import</span> importlib

<span class="hljs-keyword">try</span>:
    calc_module = importlib.import_module(module_name)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¯¼å…¥æˆåŠŸï¼š<span class="hljs-subst">{calc_module.subtract(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)}</span>"</span>)
<span class="hljs-keyword">except</span> ImportError:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ— æ³•å¯¼å…¥æ¨¡å—ï¼š<span class="hljs-subst">{module_name}</span>"</span>)
</code></pre>
<h2 data-id="heading-6">äºŒã€åŒ…ï¼šç»„ç»‡æ¨¡å—çš„å®¹å™¨</h2>
<h3 data-id="heading-7">2.1 ä»€ä¹ˆæ˜¯åŒ…ï¼Ÿ</h3>
<p><strong>åŒ…</strong>æ˜¯ä¸€ä¸ªåŒ…å«å¤šä¸ªæ¨¡å—çš„ç›®å½•ã€‚åŒ…å¿…é¡»åŒ…å«ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ï¼š<code>__init__.py</code>ï¼ˆPython 3.3+ ä¸­å¯ä»¥æ˜¯ç©ºæ–‡ä»¶ï¼Œä½†æ¨èåŒ…å«å†…å®¹ï¼‰ã€‚</p>
<h3 data-id="heading-8">2.2 åˆ›å»ºåŒ…çš„ç»“æ„</h3>
<pre><code class="hljs language-python" lang="python">ecommerce/                    <span class="hljs-comment"># åŒ…ç›®å½•</span>
â”œâ”€â”€ __init__.py              <span class="hljs-comment"># åŒ…åˆå§‹åŒ–æ–‡ä»¶</span>
â”œâ”€â”€ products.py              <span class="hljs-comment"># å•†å“æ¨¡å—</span>
â”œâ”€â”€ orders.py                <span class="hljs-comment"># è®¢å•æ¨¡å—</span>
â”œâ”€â”€ auth.py                  <span class="hljs-comment"># è®¤è¯æ¨¡å—</span>
â”œâ”€â”€ database/                <span class="hljs-comment"># å­åŒ…</span>
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ connection.py
â”‚   â””â”€â”€ models.py
â””â”€â”€ utils/                   <span class="hljs-comment"># å¦ä¸€ä¸ªå­åŒ…</span>
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ validators.py
    â””â”€â”€ helpers.py
</code></pre>
<h3 data-id="heading-9">2.3 åˆ›å»ºåŒ…å’Œå­åŒ…</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åˆ›å»ºecommerceåŒ…åŠå…¶æ¨¡å—</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"=== åˆ›å»ºå’Œä½¿ç”¨åŒ… ==="</span>)

<span class="hljs-comment"># é¦–å…ˆåˆ›å»ºç›®å½•ç»“æ„</span>
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> shutil

<span class="hljs-comment"># æ¸…ç†æ—§çš„æµ‹è¯•ç›®å½•</span>
<span class="hljs-keyword">if</span> os.path.exists(<span class="hljs-string">"ecommerce"</span>):
    shutil.rmtree(<span class="hljs-string">"ecommerce"</span>)

<span class="hljs-comment"># åˆ›å»ºç›®å½•ç»“æ„</span>
os.makedirs(<span class="hljs-string">"ecommerce/database"</span>)
os.makedirs(<span class="hljs-string">"ecommerce/utils"</span>)

<span class="hljs-comment"># åˆ›å»º __init__.py æ–‡ä»¶</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"åˆ›å»ºåŒ…å’Œå­åŒ…..."</span>)

<span class="hljs-comment"># ecommerce/__init__.py</span>
init_content = <span class="hljs-string">'''
"""
ecommerceåŒ… - ç”µå­å•†åŠ¡ç³»ç»Ÿ

è¿™ä¸ªåŒ…åŒ…å«ç”µå­å•†åŠ¡ç½‘ç«™çš„æ ¸å¿ƒåŠŸèƒ½ã€‚
"""

__version__ = "1.0.0"
__author__ = "Pythonå¼€å‘è€…"

# å¯¼å…¥åŒ…çº§åˆ«çš„åŠŸèƒ½
from .products import Product
from .orders import Order
from .auth import authenticate

# åŒ…çº§åˆ«çš„å˜é‡
SITE_NAME = "æˆ‘çš„ç”µå•†ç½‘ç«™"

def get_version():
    """è¿”å›åŒ…ç‰ˆæœ¬"""
    return __version__
'''</span>

<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">"ecommerce/__init__.py"</span>, <span class="hljs-string">"w"</span>) <span class="hljs-keyword">as</span> f:
    f.write(init_content)

<span class="hljs-comment"># ecommerce/products.py</span>
products_content = <span class="hljs-string">'''
class Product:
    """å•†å“ç±»"""
    
    def __init__(self, name, price, category):
        self.name = name
        self.price = price
        self.category = category
    
    def display_info(self):
        """æ˜¾ç¤ºå•†å“ä¿¡æ¯"""
        return f"{self.name} - Â¥{self.price:.2f} ({self.category})"
    
    def apply_discount(self, discount_percent):
        """åº”ç”¨æŠ˜æ‰£"""
        discounted_price = self.price * (1 - discount_percent / 100)
        return discounted_price

def create_product(name, price, category):
    """åˆ›å»ºå•†å“"""
    return Product(name, price, category)

def calculate_total(products):
    """è®¡ç®—å•†å“æ€»ä»·"""
    return sum(product.price for product in products)
'''</span>

<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">"ecommerce/products.py"</span>, <span class="hljs-string">"w"</span>) <span class="hljs-keyword">as</span> f:
    f.write(products_content)

<span class="hljs-comment"># ecommerce/orders.py</span>
orders_content = <span class="hljs-string">'''
class Order:
    """è®¢å•ç±»"""
    
    def __init__(self, order_id, customer, products):
        self.order_id = order_id
        self.customer = customer
        self.products = products
        self.status = "pending"
    
    def calculate_total(self):
        """è®¡ç®—è®¢å•æ€»é¢"""
        return sum(product.price for product in self.products)
    
    def update_status(self, new_status):
        """æ›´æ–°è®¢å•çŠ¶æ€"""
        valid_statuses = ["pending", "processing", "shipped", "delivered", "cancelled"]
        if new_status in valid_statuses:
            self.status = new_status
            return True
        return False
    
    def display_order(self):
        """æ˜¾ç¤ºè®¢å•ä¿¡æ¯"""
        total = self.calculate_total()
        return f"è®¢å• #{self.order_id} - å®¢æˆ·: {self.customer}, æ€»é¢: Â¥{total:.2f}, çŠ¶æ€: {self.status}"
'''</span>

<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">"ecommerce/orders.py"</span>, <span class="hljs-string">"w"</span>) <span class="hljs-keyword">as</span> f:
    f.write(orders_content)

<span class="hljs-comment"># ecommerce/auth.py</span>
auth_content = <span class="hljs-string">'''
def authenticate(username, password):
    """ç”¨æˆ·è®¤è¯"""
    # è¿™é‡Œåº”è¯¥æ˜¯æ•°æ®åº“æŸ¥è¯¢ï¼Œè¿™é‡Œç”¨ç¡¬ç¼–ç æ¼”ç¤º
    users = {
        "admin": "admin123",
        "user1": "password1",
        "user2": "password2"
    }
    
    if username in users and users[username] == password:
        return True, f"æ¬¢è¿å›æ¥ï¼Œ{username}ï¼"
    else:
        return False, "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"

def register(username, password, email):
    """ç”¨æˆ·æ³¨å†Œ"""
    # è¿™é‡Œåº”è¯¥æœ‰æ•°æ®åº“æ“ä½œï¼Œè¿™é‡Œåªæ˜¯æ¼”ç¤º
    return True, f"ç”¨æˆ· {username} æ³¨å†ŒæˆåŠŸï¼"

def logout(username):
    """ç”¨æˆ·é€€å‡º"""
    return f"ç”¨æˆ· {username} å·²é€€å‡ºç™»å½•"
'''</span>

<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">"ecommerce/auth.py"</span>, <span class="hljs-string">"w"</span>) <span class="hljs-keyword">as</span> f:
    f.write(auth_content)

<span class="hljs-comment"># ecommerce/database/__init__.py</span>
db_init_content = <span class="hljs-string">'''
"""
æ•°æ®åº“å­åŒ…
"""
from .connection import DatabaseConnection
from .models import User, ProductModel

__all__ = ['DatabaseConnection', 'User', 'ProductModel']
'''</span>

<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">"ecommerce/database/__init__.py"</span>, <span class="hljs-string">"w"</span>) <span class="hljs-keyword">as</span> f:
    f.write(db_init_content)

<span class="hljs-comment"># ecommerce/database/connection.py</span>
connection_content = <span class="hljs-string">'''
class DatabaseConnection:
    """æ•°æ®åº“è¿æ¥ç±»"""
    
    def __init__(self, host, port, database):
        self.host = host
        self.port = port
        self.database = database
        self.connected = False
    
    def connect(self):
        """è¿æ¥æ•°æ®åº“"""
        self.connected = True
        return f"å·²è¿æ¥åˆ° {self.host}:{self.port}/{self.database}"
    
    def disconnect(self):
        """æ–­å¼€æ•°æ®åº“è¿æ¥"""
        self.connected = False
        return "æ•°æ®åº“è¿æ¥å·²æ–­å¼€"
    
    def execute_query(self, query):
        """æ‰§è¡ŒæŸ¥è¯¢"""
        if self.connected:
            return f"æ‰§è¡ŒæŸ¥è¯¢: {query}"
        else:
            return "é”™è¯¯ï¼šæ•°æ®åº“æœªè¿æ¥"
'''</span>

<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">"ecommerce/database/connection.py"</span>, <span class="hljs-string">"w"</span>) <span class="hljs-keyword">as</span> f:
    f.write(connection_content)

<span class="hljs-comment"># ecommerce/database/models.py</span>
models_content = <span class="hljs-string">'''
class User:
    """ç”¨æˆ·æ¨¡å‹"""
    
    def __init__(self, user_id, username, email):
        self.user_id = user_id
        self.username = username
        self.email = email
    
    def to_dict(self):
        """è½¬æ¢ä¸ºå­—å…¸"""
        return {
            'user_id': self.user_id,
            'username': self.username,
            'email': self.email
        }

class ProductModel:
    """å•†å“æ¨¡å‹"""
    
    def __init__(self, product_id, name, price, stock):
        self.product_id = product_id
        self.name = name
        self.price = price
        self.stock = stock
    
    def is_available(self):
        """æ£€æŸ¥æ˜¯å¦æœ‰åº“å­˜"""
        return self.stock &gt; 0
    
    def update_stock(self, quantity):
        """æ›´æ–°åº“å­˜"""
        if self.stock + quantity &gt;= 0:
            self.stock += quantity
            return True
        return False
'''</span>

<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">"ecommerce/database/models.py"</span>, <span class="hljs-string">"w"</span>) <span class="hljs-keyword">as</span> f:
    f.write(models_content)

<span class="hljs-comment"># ecommerce/utils/__init__.py</span>
utils_init_content = <span class="hljs-string">'''
"""
å·¥å…·å‡½æ•°å­åŒ…
"""
from .validators import validate_email, validate_phone
from .helpers import format_price, generate_id

__all__ = ['validate_email', 'validate_phone', 'format_price', 'generate_id']
'''</span>

<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">"ecommerce/utils/__init__.py"</span>, <span class="hljs-string">"w"</span>) <span class="hljs-keyword">as</span> f:
    f.write(utils_init_content)

<span class="hljs-comment"># ecommerce/utils/validators.py</span>
validators_content = <span class="hljs-string">'''
import re

def validate_email(email):
    """éªŒè¯é‚®ç®±æ ¼å¼"""
    pattern = r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,}$'
    return bool(re.match(pattern, email))

def validate_phone(phone):
    """éªŒè¯æ‰‹æœºå·æ ¼å¼ï¼ˆä¸­å›½ï¼‰"""
    pattern = r'^1[3-9]\d{9}$'
    return bool(re.match(pattern, phone))

def validate_password(password):
    """éªŒè¯å¯†ç å¼ºåº¦"""
    if len(password) &lt; 8:
        return False, "å¯†ç è‡³å°‘8ä½"
    if not any(c.isupper() for c in password):
        return False, "å¯†ç å¿…é¡»åŒ…å«å¤§å†™å­—æ¯"
    if not any(c.islower() for c in password):
        return False, "å¯†ç å¿…é¡»åŒ…å«å°å†™å­—æ¯"
    if not any(c.isdigit() for c in password):
        return False, "å¯†ç å¿…é¡»åŒ…å«æ•°å­—"
    return True, "å¯†ç å¼ºåº¦è¶³å¤Ÿ"
'''</span>

<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">"ecommerce/utils/validators.py"</span>, <span class="hljs-string">"w"</span>) <span class="hljs-keyword">as</span> f:
    f.write(validators_content)

<span class="hljs-comment"># ecommerce/utils/helpers.py</span>
helpers_content = <span class="hljs-string">'''
import random
import string
from datetime import datetime

def format_price(price):
    """æ ¼å¼åŒ–ä»·æ ¼"""
    return f"Â¥{price:,.2f}"

def generate_id(prefix="", length=8):
    """ç”ŸæˆéšæœºID"""
    chars = string.ascii_uppercase + string.digits
    random_part = ''.join(random.choices(chars, k=length))
    return f"{prefix}{random_part}"

def get_current_timestamp():
    """è·å–å½“å‰æ—¶é—´æˆ³"""
    return datetime.now().strftime("%Y-%m-%d %H:%M:%S")

def truncate_text(text, max_length=50):
    """æˆªæ–­æ–‡æœ¬"""
    if len(text) &lt;= max_length:
        return text
    return text[:max_length] + "..."
'''</span>

<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">"ecommerce/utils/helpers.py"</span>, <span class="hljs-string">"w"</span>) <span class="hljs-keyword">as</span> f:
    f.write(helpers_content)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"åŒ…ç»“æ„åˆ›å»ºå®Œæˆï¼\n"</span>)

<span class="hljs-comment"># ç°åœ¨è®©æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªåŒ…</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"=== ä½¿ç”¨åŒ… ==="</span>)

<span class="hljs-comment"># æ–¹æ³•1ï¼šå¯¼å…¥æ•´ä¸ªåŒ…</span>
<span class="hljs-keyword">import</span> ecommerce

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"åŒ…ç‰ˆæœ¬ï¼š<span class="hljs-subst">{ecommerce.get_version()}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç½‘ç«™åç§°ï¼š<span class="hljs-subst">{ecommerce.SITE_NAME}</span>\n"</span>)

<span class="hljs-comment"># æ–¹æ³•2ï¼šä»åŒ…ä¸­å¯¼å…¥ç‰¹å®šæ¨¡å—</span>
<span class="hljs-keyword">from</span> ecommerce <span class="hljs-keyword">import</span> products

<span class="hljs-comment"># ä½¿ç”¨productsæ¨¡å—</span>
product1 = products.create_product(<span class="hljs-string">"Pythonç¼–ç¨‹ä¹¦"</span>, <span class="hljs-number">89.90</span>, <span class="hljs-string">"å›¾ä¹¦"</span>)
product2 = products.create_product(<span class="hljs-string">"æ— çº¿é¼ æ ‡"</span>, <span class="hljs-number">129.00</span>, <span class="hljs-string">"ç”µå­äº§å“"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å•†å“1ï¼š<span class="hljs-subst">{product1.display_info()}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å•†å“2ï¼š<span class="hljs-subst">{product2.display_info()}</span>"</span>)

<span class="hljs-comment"># æ–¹æ³•3ï¼šä»åŒ…ä¸­å¯¼å…¥ç‰¹å®šç±»/å‡½æ•°</span>
<span class="hljs-keyword">from</span> ecommerce.orders <span class="hljs-keyword">import</span> Order

order = Order(<span class="hljs-string">"ORD001"</span>, <span class="hljs-string">"å¼ ä¸‰"</span>, [product1, product2])
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nè®¢å•ï¼š<span class="hljs-subst">{order.display_order()}</span>"</span>)

<span class="hljs-comment"># æ–¹æ³•4ï¼šä½¿ç”¨å­åŒ…</span>
<span class="hljs-keyword">from</span> ecommerce.database <span class="hljs-keyword">import</span> DatabaseConnection
<span class="hljs-keyword">from</span> ecommerce.utils <span class="hljs-keyword">import</span> validate_email, format_price

db_conn = DatabaseConnection(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">5432</span>, <span class="hljs-string">"ecommerce_db"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næ•°æ®åº“è¿æ¥ï¼š<span class="hljs-subst">{db_conn.connect()}</span>"</span>)

email = <span class="hljs-string">"test@example.com"</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\né‚®ç®±éªŒè¯ï¼š<span class="hljs-subst">{email}</span> -&gt; <span class="hljs-subst">{validate_email(email)}</span>"</span>)

price = <span class="hljs-number">1234.56</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä»·æ ¼æ ¼å¼åŒ–ï¼š<span class="hljs-subst">{price}</span> -&gt; <span class="hljs-subst">{format_price(price)}</span>"</span>)

<span class="hljs-comment"># æ–¹æ³•5ï¼šç›¸å¯¹å¯¼å…¥ï¼ˆåœ¨åŒ…å†…éƒ¨ä½¿ç”¨ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== åŒ…å†…éƒ¨çš„ç›¸å¯¹å¯¼å…¥ ==="</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"åœ¨åŒ…å†…éƒ¨çš„æ¨¡å—ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ç›¸å¯¹å¯¼å…¥æ¥å¼•ç”¨å…¶ä»–æ¨¡å—"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¾‹å¦‚ï¼Œåœ¨ orders.py ä¸­å¯¼å…¥ productsï¼š"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"  from . import products  # å¯¼å…¥åŒçº§æ¨¡å—"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"  from .products import Product  # ä»åŒçº§æ¨¡å—å¯¼å…¥"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"  from ..utils import helpers  # ä»ä¸Šçº§ç›®å½•å¯¼å…¥"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"  from .database import models  # ä»å­åŒ…å¯¼å…¥"</span>)
</code></pre>
<h3 data-id="heading-10">2.4Â <code>__all__</code>Â å˜é‡</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== __all__ å˜é‡ ==="</span>)

<span class="hljs-comment"># __all__ å˜é‡å®šä¹‰äº†å½“ä½¿ç”¨ from module import * æ—¶å¯¼å…¥çš„å†…å®¹</span>
<span class="hljs-comment"># åˆ›å»ºç¤ºä¾‹æ¨¡å—</span>
module_content = <span class="hljs-string">'''
__all__ = ['public_func', 'PublicClass']

def public_func():
    return "è¿™æ˜¯ä¸€ä¸ªå…¬å…±å‡½æ•°"

def _private_func():
    return "è¿™æ˜¯ä¸€ä¸ªç§æœ‰å‡½æ•°"

class PublicClass:
    def __init__(self):
        self.name = "å…¬å…±ç±»"

class _PrivateClass:
    def __init__(self):
        self.name = "ç§æœ‰ç±»"

public_var = "å…¬å…±å˜é‡"
_private_var = "ç§æœ‰å˜é‡"
'''</span>

<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">"example_module.py"</span>, <span class="hljs-string">"w"</span>) <span class="hljs-keyword">as</span> f:
    f.write(module_content)

<span class="hljs-comment"># æµ‹è¯• __all__</span>
<span class="hljs-keyword">from</span> example_module <span class="hljs-keyword">import</span> *

<span class="hljs-built_in">print</span>(<span class="hljs-string">"ä½¿ç”¨ from example_module import * åï¼š"</span>)
<span class="hljs-keyword">try</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"public_func: <span class="hljs-subst">{public_func()}</span>"</span>)
<span class="hljs-keyword">except</span> NameError <span class="hljs-keyword">as</span> e:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é”™è¯¯ï¼š<span class="hljs-subst">{e}</span>"</span>)

<span class="hljs-keyword">try</span>:
    pc = PublicClass()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"PublicClass: <span class="hljs-subst">{pc.name}</span>"</span>)
<span class="hljs-keyword">except</span> NameError <span class="hljs-keyword">as</span> e:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é”™è¯¯ï¼š<span class="hljs-subst">{e}</span>"</span>)

<span class="hljs-keyword">try</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"_private_func: <span class="hljs-subst">{_private_func()}</span>"</span>)
<span class="hljs-keyword">except</span> NameError <span class="hljs-keyword">as</span> e:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"_private_func æœªå¯¼å…¥"</span>)

<span class="hljs-keyword">try</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"public_var: <span class="hljs-subst">{public_var}</span>"</span>)
<span class="hljs-keyword">except</span> NameError <span class="hljs-keyword">as</span> e:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"public_var æœªå¯¼å…¥"</span>)

<span class="hljs-comment"># æ¸…ç†</span>
<span class="hljs-keyword">import</span> os
os.remove(<span class="hljs-string">"example_module.py"</span>)
</code></pre>
<h2 data-id="heading-11">ä¸‰ã€Pythonæ ‡å‡†åº“æ¨¡å—</h2>
<h3 data-id="heading-12">3.1 å¸¸ç”¨å†…ç½®æ¨¡å—</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== Pythonå¸¸ç”¨å†…ç½®æ¨¡å— ==="</span>)

<span class="hljs-comment"># 1. os - æ“ä½œç³»ç»Ÿæ¥å£</span>
<span class="hljs-keyword">import</span> os

<span class="hljs-built_in">print</span>(<span class="hljs-string">"1. osæ¨¡å— - æ“ä½œç³»ç»Ÿæ¥å£"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å½“å‰å·¥ä½œç›®å½•: <span class="hljs-subst">{os.getcwd()}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç›®å½•åˆ—è¡¨: <span class="hljs-subst">{os.listdir(<span class="hljs-string">'.'</span>)[:<span class="hljs-number">5</span>]}</span>..."</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"è·¯å¾„å­˜åœ¨: <span class="hljs-subst">{os.path.exists(<span class="hljs-string">'ecommerce'</span>)}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"è·¯å¾„æ˜¯æ–‡ä»¶: <span class="hljs-subst">{os.path.isfile(<span class="hljs-string">'ecommerce/products.py'</span>)}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"è·¯å¾„æ˜¯ç›®å½•: <span class="hljs-subst">{os.path.isdir(<span class="hljs-string">'ecommerce'</span>)}</span>\n"</span>)

<span class="hljs-comment"># 2. sys - ç³»ç»Ÿç›¸å…³å‚æ•°å’Œå‡½æ•°</span>
<span class="hljs-keyword">import</span> sys

<span class="hljs-built_in">print</span>(<span class="hljs-string">"2. sysæ¨¡å— - ç³»ç»Ÿç›¸å…³"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Pythonç‰ˆæœ¬: <span class="hljs-subst">{sys.version_info.major}</span>.<span class="hljs-subst">{sys.version_info.minor}</span>.<span class="hljs-subst">{sys.version_info.micro}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¹³å°: <span class="hljs-subst">{sys.platform}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"é»˜è®¤ç¼–ç : <span class="hljs-subst">{sys.getdefaultencoding()}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‘½ä»¤è¡Œå‚æ•°: <span class="hljs-subst">{sys.argv}</span>\n"</span>)

<span class="hljs-comment"># 3. datetime - æ—¥æœŸå’Œæ—¶é—´å¤„ç†</span>
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime, date, time, timedelta

<span class="hljs-built_in">print</span>(<span class="hljs-string">"3. datetimeæ¨¡å— - æ—¥æœŸæ—¶é—´å¤„ç†"</span>)
now = datetime.now()
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å½“å‰æ—¶é—´: <span class="hljs-subst">{now}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ ¼å¼åŒ–: <span class="hljs-subst">{now.strftime(<span class="hljs-string">'%Y-%m-%d %H:%M:%S'</span>)}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ—¥æœŸéƒ¨åˆ†: <span class="hljs-subst">{now.date()}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ—¶é—´éƒ¨åˆ†: <span class="hljs-subst">{now.time()}</span>"</span>)

<span class="hljs-comment"># æ—¶é—´è¿ç®—</span>
tomorrow = now + timedelta(days=<span class="hljs-number">1</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ˜å¤©: <span class="hljs-subst">{tomorrow.strftime(<span class="hljs-string">'%Y-%m-%d'</span>)}</span>"</span>)

<span class="hljs-comment"># 4. json - JSONæ•°æ®å¤„ç†</span>
<span class="hljs-keyword">import</span> json

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n4. jsonæ¨¡å— - JSONæ•°æ®å¤„ç†"</span>)

<span class="hljs-comment"># Pythonå¯¹è±¡è½¬JSONå­—ç¬¦ä¸²</span>
data = {
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¼ ä¸‰"</span>,
    <span class="hljs-string">"age"</span>: <span class="hljs-number">25</span>,
    <span class="hljs-string">"city"</span>: <span class="hljs-string">"åŒ—äº¬"</span>,
    <span class="hljs-string">"skills"</span>: [<span class="hljs-string">"Python"</span>, <span class="hljs-string">"JavaScript"</span>, <span class="hljs-string">"SQL"</span>]
}

json_str = json.dumps(data, ensure_ascii=<span class="hljs-literal">False</span>, indent=<span class="hljs-number">2</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"JSONå­—ç¬¦ä¸²:\n<span class="hljs-subst">{json_str}</span>"</span>)

<span class="hljs-comment"># JSONå­—ç¬¦ä¸²è½¬Pythonå¯¹è±¡</span>
parsed_data = json.loads(json_str)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"è§£æåå§“å: <span class="hljs-subst">{parsed_data[<span class="hljs-string">'name'</span>]}</span>\n"</span>)

<span class="hljs-comment"># 5. random - ç”Ÿæˆéšæœºæ•°</span>
<span class="hljs-keyword">import</span> random

<span class="hljs-built_in">print</span>(<span class="hljs-string">"5. randomæ¨¡å— - éšæœºæ•°ç”Ÿæˆ"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"éšæœºæ•´æ•°(1-100): <span class="hljs-subst">{random.randint(<span class="hljs-number">1</span>, <span class="hljs-number">100</span>)}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"éšæœºæµ®ç‚¹æ•°: <span class="hljs-subst">{random.random()}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"éšæœºé€‰æ‹©: <span class="hljs-subst">{random.choice([<span class="hljs-string">'è‹¹æœ'</span>, <span class="hljs-string">'é¦™è•‰'</span>, <span class="hljs-string">'æ©™å­'</span>])}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"éšæœºæ ·æœ¬: <span class="hljs-subst">{random.sample(<span class="hljs-built_in">range</span>(<span class="hljs-number">100</span>), <span class="hljs-number">5</span>)}</span>\n"</span>)

<span class="hljs-comment"># 6. re - æ­£åˆ™è¡¨è¾¾å¼</span>
<span class="hljs-keyword">import</span> re

<span class="hljs-built_in">print</span>(<span class="hljs-string">"6. reæ¨¡å— - æ­£åˆ™è¡¨è¾¾å¼"</span>)
text = <span class="hljs-string">"æˆ‘çš„é‚®ç®±æ˜¯ zhangsan@example.comï¼Œç”µè¯æ˜¯ 138-1234-5678"</span>
email_pattern = <span class="hljs-string">r'[\w.-]+@[\w.-]+.\w+'</span>
phone_pattern = <span class="hljs-string">r'\d{3}-\d{4}-\d{4}'</span>

emails = re.findall(email_pattern, text)
phones = re.findall(phone_pattern, text)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ–‡æœ¬: <span class="hljs-subst">{text}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰¾åˆ°é‚®ç®±: <span class="hljs-subst">{emails}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰¾åˆ°ç”µè¯: <span class="hljs-subst">{phones}</span>\n"</span>)

<span class="hljs-comment"># 7. collections - å®¹å™¨æ•°æ®ç±»å‹</span>
<span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> Counter, defaultdict, namedtuple

<span class="hljs-built_in">print</span>(<span class="hljs-string">"7. collectionsæ¨¡å— - é«˜çº§å®¹å™¨"</span>)
<span class="hljs-comment"># Counter - è®¡æ•°å™¨</span>
words = [<span class="hljs-string">"apple"</span>, <span class="hljs-string">"banana"</span>, <span class="hljs-string">"apple"</span>, <span class="hljs-string">"orange"</span>, <span class="hljs-string">"banana"</span>, <span class="hljs-string">"apple"</span>]
word_count = Counter(words)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å•è¯è®¡æ•°: <span class="hljs-subst">{word_count}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœ€å¸¸è§çš„2ä¸ª: <span class="hljs-subst">{word_count.most_common(<span class="hljs-number">2</span>)}</span>"</span>)

<span class="hljs-comment"># defaultdict - å¸¦é»˜è®¤å€¼çš„å­—å…¸</span>
fruit_dict = defaultdict(<span class="hljs-built_in">list</span>)
fruit_dict[<span class="hljs-string">'red'</span>].append(<span class="hljs-string">'apple'</span>)
fruit_dict[<span class="hljs-string">'yellow'</span>].append(<span class="hljs-string">'banana'</span>)
fruit_dict[<span class="hljs-string">'red'</span>].append(<span class="hljs-string">'cherry'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"é»˜è®¤å­—å…¸: <span class="hljs-subst">{<span class="hljs-built_in">dict</span>(fruit_dict)}</span>"</span>)

<span class="hljs-comment"># namedtuple - å‘½åå…ƒç»„</span>
Point = namedtuple(<span class="hljs-string">'Point'</span>, [<span class="hljs-string">'x'</span>, <span class="hljs-string">'y'</span>])
p = Point(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‘½åå…ƒç»„: <span class="hljs-subst">{p}</span>, x=<span class="hljs-subst">{p.x}</span>, y=<span class="hljs-subst">{p.y}</span>\n"</span>)

<span class="hljs-comment"># 8. itertools - è¿­ä»£å™¨å·¥å…·</span>
<span class="hljs-keyword">import</span> itertools

<span class="hljs-built_in">print</span>(<span class="hljs-string">"8. itertoolsæ¨¡å— - è¿­ä»£å™¨å·¥å…·"</span>)
<span class="hljs-comment"># æ— é™è¿­ä»£å™¨</span>
counter = itertools.count(start=<span class="hljs-number">10</span>, step=<span class="hljs-number">2</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ— é™è®¡æ•°å‰5ä¸ª: <span class="hljs-subst">{[<span class="hljs-built_in">next</span>(counter) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>)]}</span>"</span>)

<span class="hljs-comment"># æ’åˆ—ç»„åˆ</span>
letters = [<span class="hljs-string">'A'</span>, <span class="hljs-string">'B'</span>, <span class="hljs-string">'C'</span>]
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ’åˆ—(2ä¸ª): <span class="hljs-subst">{<span class="hljs-built_in">list</span>(itertools.permutations(letters, <span class="hljs-number">2</span>))}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç»„åˆ(2ä¸ª): <span class="hljs-subst">{<span class="hljs-built_in">list</span>(itertools.combinations(letters, <span class="hljs-number">2</span>))}</span>"</span>)
</code></pre>
<h3 data-id="heading-13">3.2 ç¬¬ä¸‰æ–¹æ¨¡å—ç®¡ç†</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== ç¬¬ä¸‰æ–¹æ¨¡å—ç®¡ç† ==="</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"Pythonæœ‰ä¸°å¯Œçš„ç¬¬ä¸‰æ–¹åº“ï¼Œå¯ä»¥ä½¿ç”¨pipç®¡ç†ï¼š"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nå¸¸ç”¨pipå‘½ä»¤ï¼š"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"  å®‰è£…åŒ…: pip install package_name"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"  å®‰è£…ç‰¹å®šç‰ˆæœ¬: pip install package_name==1.0.0"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"  å‡çº§åŒ…: pip install --upgrade package_name"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"  å¸è½½åŒ…: pip uninstall package_name"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"  æŸ¥çœ‹å·²å®‰è£…åŒ…: pip list"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"  å¯¼å‡ºä¾èµ–: pip freeze &gt; requirements.txt"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"  ä»æ–‡ä»¶å®‰è£…: pip install -r requirements.txt"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nå¸¸ç”¨ç¬¬ä¸‰æ–¹åº“ç¤ºä¾‹ï¼š"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"  1. requests - HTTPè¯·æ±‚åº“"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"  2. numpy - ç§‘å­¦è®¡ç®—"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"  3. pandas - æ•°æ®åˆ†æ"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"  4. matplotlib - æ•°æ®å¯è§†åŒ–"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"  5. flask/django - Webæ¡†æ¶"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"  6. beautifulsoup4 - HTMLè§£æ"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"  7. pillow - å›¾åƒå¤„ç†"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"  8. openpyxl - Excelæ“ä½œ"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== è™šæ‹Ÿç¯å¢ƒ ==="</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"è™šæ‹Ÿç¯å¢ƒå¯ä»¥éš”ç¦»ä¸åŒé¡¹ç›®çš„ä¾èµ–ï¼š"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nåˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼š"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"  python -m venv myenv"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼š"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"  Windows: myenv\Scripts\activate"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"  Mac/Linux: source myenv/bin/activate"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\né€€å‡ºè™šæ‹Ÿç¯å¢ƒï¼š"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"  deactivate"</span>)

<span class="hljs-comment"># æ¼”ç¤ºrequestsåº“çš„ä½¿ç”¨ï¼ˆå¦‚æœå·²å®‰è£…ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼šrequests ==="</span>)
<span class="hljs-keyword">try</span>:
    <span class="hljs-keyword">import</span> requests
    
    <span class="hljs-comment"># å‘é€GETè¯·æ±‚</span>
    response = requests.get(<span class="hljs-string">"https://api.github.com"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"GitHub APIçŠ¶æ€ç : <span class="hljs-subst">{response.status_code}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å“åº”å¤´: <span class="hljs-subst">{<span class="hljs-built_in">dict</span>(response.headers)[:<span class="hljs-number">3</span>]}</span>..."</span>)
    
    <span class="hljs-comment"># å‘é€å¸¦å‚æ•°çš„GETè¯·æ±‚</span>
    params = {<span class="hljs-string">"q"</span>: <span class="hljs-string">"python"</span>, <span class="hljs-string">"sort"</span>: <span class="hljs-string">"stars"</span>}
    response = requests.get(<span class="hljs-string">"https://api.github.com/search/repositories"</span>, params=params)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœç´¢Pythonä»“åº“ï¼Œç»“æœæ•°: <span class="hljs-subst">{response.json()[<span class="hljs-string">'total_count'</span>]}</span>"</span>)
    
<span class="hljs-keyword">except</span> ImportError:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"requestsåº“æœªå®‰è£…ï¼Œè¿è¡Œ pip install requests å®‰è£…"</span>)
<span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¯·æ±‚å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
</code></pre>
<h2 data-id="heading-14">å››ã€æ¨¡å—é«˜çº§ç‰¹æ€§</h2>
<h3 data-id="heading-15">4.1 æ¨¡å—ç¼“å­˜å’Œé‡æ–°åŠ è½½</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== æ¨¡å—ç¼“å­˜å’Œé‡æ–°åŠ è½½ ==="</span>)

<span class="hljs-keyword">import</span> importlib

<span class="hljs-comment"># åˆ›å»ºæµ‹è¯•æ¨¡å—</span>
test_module_content = <span class="hljs-string">'''
message = "åŸå§‹æ¶ˆæ¯"
def get_message():
    return message
'''</span>

<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">"test_module.py"</span>, <span class="hljs-string">"w"</span>) <span class="hljs-keyword">as</span> f:
    f.write(test_module_content)

<span class="hljs-comment"># ç¬¬ä¸€æ¬¡å¯¼å…¥</span>
<span class="hljs-keyword">import</span> test_module
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬ä¸€æ¬¡å¯¼å…¥: <span class="hljs-subst">{test_module.get_message()}</span>"</span>)

<span class="hljs-comment"># ä¿®æ”¹æ¨¡å—æ–‡ä»¶</span>
test_module_content_updated = <span class="hljs-string">'''
message = "æ›´æ–°åçš„æ¶ˆæ¯"
def get_message():
    return f"æ›´æ–°: {message}"
'''</span>

<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">"test_module.py"</span>, <span class="hljs-string">"w"</span>) <span class="hljs-keyword">as</span> f:
    f.write(test_module_content_updated)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä¿®æ”¹åç›´æ¥è°ƒç”¨: <span class="hljs-subst">{test_module.get_message()}</span> (ä»ç„¶æ˜¯æ—§ç‰ˆæœ¬)"</span>)

<span class="hljs-comment"># é‡æ–°åŠ è½½æ¨¡å—</span>
importlib.reload(test_module)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"é‡æ–°åŠ è½½å: <span class="hljs-subst">{test_module.get_message()}</span>"</span>)

<span class="hljs-comment"># æ¸…ç†</span>
<span class="hljs-keyword">import</span> os
os.remove(<span class="hljs-string">"test_module.py"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== æ¨¡å—ç¼“å­˜ä½ç½® ==="</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å¯¼å…¥çš„æ¨¡å—ç¼“å­˜åœ¨ sys.modules ä¸­:"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"test_module åœ¨ç¼“å­˜ä¸­: <span class="hljs-subst">{<span class="hljs-string">'test_module'</span> <span class="hljs-keyword">in</span> sys.modules}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¼“å­˜å¤§å°: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(sys.modules)}</span> ä¸ªæ¨¡å—"</span>)

<span class="hljs-comment"># æŸ¥çœ‹æ¨¡å—ç¼“å­˜</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nå‰10ä¸ªç¼“å­˜çš„æ¨¡å—:"</span>)
<span class="hljs-keyword">for</span> i, name <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(<span class="hljs-built_in">list</span>(sys.modules.keys())[:<span class="hljs-number">10</span>], <span class="hljs-number">1</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  <span class="hljs-subst">{i:<span class="hljs-number">2</span>}</span>. <span class="hljs-subst">{name}</span>"</span>)
</code></pre>
<h3 data-id="heading-16">4.2 åŠ¨æ€æ¨¡å—åˆ›å»º</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== åŠ¨æ€åˆ›å»ºæ¨¡å— ==="</span>)

<span class="hljs-keyword">import</span> types

<span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªæ¨¡å—å¯¹è±¡</span>
dynamic_module = types.ModuleType(<span class="hljs-string">"dynamic_module"</span>)

<span class="hljs-comment"># æ·»åŠ å†…å®¹åˆ°æ¨¡å—</span>
dynamic_module.value = <span class="hljs-number">42</span>
dynamic_module.hello = <span class="hljs-keyword">lambda</span>: <span class="hljs-string">"Hello from dynamic module!"</span>

<span class="hljs-comment"># æ·»åŠ åˆ°sys.modulesä»¥ä¾¿å¯ä»¥å¯¼å…¥</span>
sys.modules[<span class="hljs-string">"dynamic_module"</span>] = dynamic_module

<span class="hljs-comment"># ç°åœ¨å¯ä»¥åƒæ™®é€šæ¨¡å—ä¸€æ ·å¯¼å…¥</span>
<span class="hljs-keyword">import</span> dynamic_module <span class="hljs-keyword">as</span> dm
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"åŠ¨æ€æ¨¡å—å€¼: <span class="hljs-subst">{dm.value}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"åŠ¨æ€æ¨¡å—å‡½æ•°: <span class="hljs-subst">{dm.hello()}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== ä»å­—ç¬¦ä¸²åˆ›å»ºæ¨¡å— ==="</span>)

<span class="hljs-comment"># ä»å­—ç¬¦ä¸²åˆ›å»ºæ¨¡å—</span>
module_code = <span class="hljs-string">"""
def greet(name):
    return f"Hello, {name}!"

def calculate(a, b):
    return a + b, a - b, a * b, a / b

CONSTANT = "è¿™æ˜¯ä¸€ä¸ªå¸¸é‡"
"""</span>

<span class="hljs-comment"># ç¼–è¯‘å¹¶æ‰§è¡Œæ¨¡å—ä»£ç </span>
compiled_code = <span class="hljs-built_in">compile</span>(module_code, <span class="hljs-string">"&lt;string&gt;"</span>, <span class="hljs-string">"exec"</span>)
string_module = types.ModuleType(<span class="hljs-string">"string_module"</span>)
<span class="hljs-built_in">exec</span>(compiled_code, string_module.__dict__)

<span class="hljs-comment"># ä½¿ç”¨æ¨¡å—</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¸¸é‡: <span class="hljs-subst">{string_module.CONSTANT}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"é—®å€™: <span class="hljs-subst">{string_module.greet(<span class="hljs-string">'Python'</span>)}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"è®¡ç®—: <span class="hljs-subst">{string_module.calculate(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>)}</span>"</span>)
</code></pre>
<h3 data-id="heading-17">4.3 æ¨¡å—å•ä¾‹æ¨¡å¼</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== æ¨¡å—å•ä¾‹æ¨¡å¼ ==="</span>)

<span class="hljs-comment"># åœ¨Pythonä¸­ï¼Œæ¨¡å—å¤©ç„¶å°±æ˜¯å•ä¾‹çš„</span>
<span class="hljs-comment"># å½“æ¨¡å—ç¬¬ä¸€æ¬¡è¢«å¯¼å…¥æ—¶ï¼Œå®ƒè¢«åˆå§‹åŒ–å¹¶ç¼“å­˜</span>
<span class="hljs-comment"># åç»­å¯¼å…¥éƒ½ä½¿ç”¨åŒä¸€ä¸ªå®ä¾‹</span>

<span class="hljs-comment"># singleton.py å†…å®¹</span>
singleton_content = <span class="hljs-string">'''
class DatabaseConnection:
    """æ•°æ®åº“è¿æ¥å•ä¾‹"""
    
    _instance = None
    
    def __new__(cls):
        if cls._instance is None:
            cls._instance = super().__new__(cls)
            cls._instance.connection_count = 0
        return cls._instance
    
    def connect(self):
        self.connection_count += 1
        return f"è¿æ¥ #{self.connection_count}"
    
    def get_connection_count(self):
        return self.connection_count

# åˆ›å»ºå•ä¾‹å®ä¾‹
db = DatabaseConnection()
'''</span>

<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">"singleton.py"</span>, <span class="hljs-string">"w"</span>) <span class="hljs-keyword">as</span> f:
    f.write(singleton_content)

<span class="hljs-comment"># åœ¨ä¸åŒåœ°æ–¹å¯¼å…¥</span>
<span class="hljs-keyword">import</span> singleton <span class="hljs-keyword">as</span> s1
<span class="hljs-keyword">import</span> singleton <span class="hljs-keyword">as</span> s2  <span class="hljs-comment"># å®é™…ä¸Šæ˜¯åŒä¸€ä¸ªæ¨¡å—</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"s1.db is s2.db: <span class="hljs-subst">{s1.db <span class="hljs-keyword">is</span> s2.db}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"s1.db.connect(): <span class="hljs-subst">{s1.db.connect()}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"s2.db.connect(): <span class="hljs-subst">{s2.db.connect()}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¿æ¥æ¬¡æ•°: <span class="hljs-subst">{s1.db.get_connection_count()}</span>"</span>)

<span class="hljs-comment"># æ¸…ç†</span>
<span class="hljs-keyword">import</span> os
os.remove(<span class="hljs-string">"singleton.py"</span>)
</code></pre>
<h2 data-id="heading-18">äº”ã€å®æˆ˜é¡¹ç›®ï¼šæ„å»ºå°å‹Webæ¡†æ¶</h2>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== å®æˆ˜ï¼šæ„å»ºå°å‹Webæ¡†æ¶ ==="</span>)

<span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªå°å‹Webæ¡†æ¶çš„ç»“æ„</span>
web_framework_structure = {
    <span class="hljs-string">"web_framework/__init__.py"</span>: <span class="hljs-string">'''
"""
å°å‹Webæ¡†æ¶
"""
from .app import Application
from .request import Request
from .response import Response
from .router import Router

__version__ = "0.1.0"
__all__ = ['Application', 'Request', 'Response', 'Router']
'''</span>,
    
    <span class="hljs-string">"web_framework/app.py"</span>: <span class="hljs-string">'''
"""
åº”ç”¨ç¨‹åºç±»
"""
from .router import Router
from .request import Request
from .response import Response

class Application:
    """Webåº”ç”¨"""
    
    def __init__(self):
        self.router = Router()
        self.middleware = []
    
    def route(self, path, methods=None):
        """è·¯ç”±è£…é¥°å™¨"""
        if methods is None:
            methods = ['GET']
        
        def decorator(handler):
            for method in methods:
                self.router.add_route(method, path, handler)
            return handler
        
        return decorator
    
    def use(self, middleware):
        """æ·»åŠ ä¸­é—´ä»¶"""
        self.middleware.append(middleware)
    
    def handle_request(self, environ):
        """å¤„ç†è¯·æ±‚"""
        # åˆ›å»ºè¯·æ±‚å¯¹è±¡
        request = Request(environ)
        
        # æ‰§è¡Œä¸­é—´ä»¶
        for middleware in self.middleware:
            middleware(request)
        
        # è·¯ç”±åŒ¹é…
        handler, params = self.router.match(request.method, request.path)
        
        if handler:
            # æ‰§è¡Œå¤„ç†å™¨
            response = handler(request, **params)
            if isinstance(response, str):
                response = Response(body=response)
            return response
        else:
            # 404 æœªæ‰¾åˆ°
            return Response(status=404, body="404 Not Found")
    
    def __call__(self, environ, start_response):
        """WSGIæ¥å£"""
        response = self.handle_request(environ)
        start_response(response.status, response.headers)
        return [response.body.encode('utf-8')]
'''</span>,
    
    <span class="hljs-string">"web_framework/request.py"</span>: <span class="hljs-string">'''
"""
è¯·æ±‚ç±»
"""
class Request:
    """HTTPè¯·æ±‚"""
    
    def __init__(self, environ):
        self.environ = environ
        self.method = environ.get('REQUEST_METHOD', 'GET')
        self.path = environ.get('PATH_INFO', '/')
        self.query_string = environ.get('QUERY_STRING', '')
        self.headers = {}
        
        # è§£æå¤´éƒ¨
        for key, value in environ.items():
            if key.startswith('HTTP_'):
                header_name = key[5:].replace('_', '-').title()
                self.headers[header_name] = value
    
    def get_header(self, name):
        """è·å–å¤´éƒ¨"""
        return self.headers.get(name)
    
    @property
    def query_params(self):
        """æŸ¥è¯¢å‚æ•°"""
        from urllib.parse import parse_qs
        return parse_qs(self.query_string)
'''</span>,
    
    <span class="hljs-string">"web_framework/response.py"</span>: <span class="hljs-string">'''
"""
å“åº”ç±»
"""
class Response:
    """HTTPå“åº”"""
    
    def __init__(self, status=200, body="", content_type="text/html; charset=utf-8"):
        self.status = f"{status} OK" if status == 200 else f"{status}"
        self.body = body
        self.headers = [
            ('Content-Type', content_type),
            ('Content-Length', str(len(body.encode('utf-8'))))
        ]
    
    def set_header(self, name, value):
        """è®¾ç½®å¤´éƒ¨"""
        self.headers.append((name, value))
    
    def json(self, data):
        """è¿”å›JSONå“åº”"""
        import json
        self.body = json.dumps(data)
        self.headers = [
            ('Content-Type', 'application/json'),
            ('Content-Length', str(len(self.body.encode('utf-8'))))
        ]
        return self
'''</span>,
    
    <span class="hljs-string">"web_framework/router.py"</span>: <span class="hljs-string">'''
"""
è·¯ç”±å™¨ç±»
"""
import re

class Route:
    """è·¯ç”±"""
    
    def __init__(self, pattern, handler):
        self.pattern = pattern
        self.handler = handler
        self.regex = self._compile_pattern(pattern)
    
    def _compile_pattern(self, pattern):
        """ç¼–è¯‘è·¯ç”±æ¨¡å¼ä¸ºæ­£åˆ™è¡¨è¾¾å¼"""
        # å°† :param è½¬æ¢ä¸º (?P&lt;param&gt;[^/]+)
        regex_pattern = re.sub(r':(\w+)', r'(?P&lt;\1&gt;[^/]+)', pattern)
        return re.compile(f'^{regex_pattern}$')
    
    def match(self, path):
        """åŒ¹é…è·¯å¾„"""
        match = self.regex.match(path)
        if match:
            return True, match.groupdict()
        return False, {}

class Router:
    """è·¯ç”±å™¨"""
    
    def __init__(self):
        self.routes = {}  # method -&gt; list of routes
    
    def add_route(self, method, pattern, handler):
        """æ·»åŠ è·¯ç”±"""
        if method not in self.routes:
            self.routes[method] = []
        
        route = Route(pattern, handler)
        self.routes[method].append(route)
    
    def match(self, method, path):
        """åŒ¹é…è·¯ç”±"""
        if method not in self.routes:
            return None, {}
        
        for route in self.routes[method]:
            matched, params = route.match(path)
            if matched:
                return route.handler, params
        
        return None, {}
'''</span>
}

<span class="hljs-comment"># åˆ›å»ºæ¡†æ¶æ–‡ä»¶</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"åˆ›å»ºWebæ¡†æ¶ç»“æ„..."</span>)
os.makedirs(<span class="hljs-string">"web_framework"</span>, exist_ok=<span class="hljs-literal">True</span>)

<span class="hljs-keyword">for</span> file_path, content <span class="hljs-keyword">in</span> web_framework_structure.items():
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">"w"</span>, encoding=<span class="hljs-string">"utf-8"</span>) <span class="hljs-keyword">as</span> f:
        f.write(content)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ¡†æ¶åˆ›å»ºå®Œæˆï¼"</span>)

<span class="hljs-comment"># ä½¿ç”¨æ¡†æ¶åˆ›å»ºåº”ç”¨</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== ä½¿ç”¨æ¡†æ¶åˆ›å»ºåº”ç”¨ ==="</span>)

app_content = <span class="hljs-string">'''
from web_framework import Application
from web_framework.response import Response

app = Application()

# ä¸­é—´ä»¶
def logging_middleware(request):
    print(f"[{request.method}] {request.path}")

app.use(logging_middleware)

# è·¯ç”±
@app.route('/')
def home(request):
    return """
    &lt;html&gt;
    &lt;head&gt;&lt;title&gt;Home&lt;/title&gt;&lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;æ¬¢è¿æ¥åˆ°æˆ‘çš„ç½‘ç«™ï¼&lt;/h1&gt;
        &lt;p&gt;è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨è‡ªå®šä¹‰Webæ¡†æ¶æ„å»ºçš„ç½‘ç«™ã€‚&lt;/p&gt;
        &lt;ul&gt;
            &lt;li&gt;&lt;a href="/about"&gt;å…³äº&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href="/hello/World"&gt;é—®å€™&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href="/api/info"&gt;APIä¿¡æ¯&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/body&gt;
    &lt;/html&gt;
    """

@app.route('/about')
def about(request):
    return """
    &lt;html&gt;
    &lt;head&gt;&lt;title&gt;About&lt;/title&gt;&lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;å…³äºæˆ‘ä»¬&lt;/h1&gt;
        &lt;p&gt;è¿™æ˜¯ä¸€ä¸ªæ¼”ç¤ºWebæ¡†æ¶çš„å°å‹ç½‘ç«™ã€‚&lt;/p&gt;
        &lt;a href="/"&gt;è¿”å›é¦–é¡µ&lt;/a&gt;
    &lt;/body&gt;
    &lt;/html&gt;
    """

@app.route('/hello/:name')
def hello(request, name):
    return f"""
    &lt;html&gt;
    &lt;head&gt;&lt;title&gt;Hello {name}&lt;/title&gt;&lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;Hello, {name}!&lt;/h1&gt;
        &lt;p&gt;æ¬¢è¿æ¥åˆ°æˆ‘ä»¬çš„ç½‘ç«™ã€‚&lt;/p&gt;
        &lt;a href="/"&gt;è¿”å›é¦–é¡µ&lt;/a&gt;
    &lt;/body&gt;
    &lt;/html&gt;
    """

@app.route('/api/info')
def api_info(request):
    response = Response()
    return response.json({
        'framework': 'Web Framework',
        'version': '0.1.0',
        'endpoints': ['/', '/about', '/hello/:name', '/api/info']
    })

if __name__ == '__main__':
    # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
    from wsgiref.simple_server import make_server
    
    print("å¯åŠ¨æœåŠ¡å™¨ï¼šhttp://localhost:8000")
    server = make_server('localhost', 8000, app)
    server.serve_forever()
'''</span>

<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">"myapp.py"</span>, <span class="hljs-string">"w"</span>, encoding=<span class="hljs-string">"utf-8"</span>) <span class="hljs-keyword">as</span> f:
    f.write(app_content)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"åº”ç”¨åˆ›å»ºå®Œæˆï¼šmyapp.py"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"è¿è¡Œ python myapp.py å¯åŠ¨æœåŠ¡å™¨"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"è®¿é—® http://localhost:8000 æŸ¥çœ‹ç½‘ç«™"</span>)

<span class="hljs-comment"># æ¸…ç†ä¸´æ—¶æ–‡ä»¶ï¼ˆåœ¨å®é™…ç¯å¢ƒä¸­ä¿ç•™ï¼‰</span>
<span class="hljs-keyword">import</span> shutil
shutil.rmtree(<span class="hljs-string">"web_framework"</span>, ignore_errors=<span class="hljs-literal">True</span>)
shutil.rmtree(<span class="hljs-string">"ecommerce"</span>, ignore_errors=<span class="hljs-literal">True</span>)
os.remove(<span class="hljs-string">"myapp.py"</span>)
</code></pre>
<h2 data-id="heading-19">å…­ã€æ€»ç»“ï¼šæ¨¡å—ä¸åŒ…çš„æ ¸å¿ƒè¦ç‚¹</h2>
<h3 data-id="heading-20">ğŸ¯ æ ¸å¿ƒè¦ç‚¹æ€»ç»“ï¼š</h3>
<ol>
<li>
<p><strong>æ¨¡å—æ˜¯Â <code>.py</code>Â æ–‡ä»¶</strong>ï¼šåŒ…å«Pythonä»£ç ï¼Œå¯ä»¥å¯¼å…¥å’Œä½¿ç”¨</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> module
<span class="hljs-keyword">from</span> module <span class="hljs-keyword">import</span> function
</code></pre>
</li>
<li>
<p><strong>åŒ…æ˜¯åŒ…å«Â <code>__init__.py</code>Â çš„ç›®å½•</strong>ï¼šç»„ç»‡ç›¸å…³æ¨¡å—</p>
<pre><code class="hljs language-python" lang="python">mypackage/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ module1.py
â””â”€â”€ module2.py
</code></pre>
</li>
<li>
<p><strong>å¯¼å…¥æ–¹å¼</strong>ï¼š</p>
<ul>
<li>ç»å¯¹å¯¼å…¥ï¼š<code>from package import module</code></li>
<li>ç›¸å¯¹å¯¼å…¥ï¼š<code>from . import module</code>ï¼ˆåœ¨åŒ…å†…éƒ¨ä½¿ç”¨ï¼‰</li>
</ul>
</li>
<li>
<p><strong>Pythonè·¯å¾„</strong>ï¼š<code>sys.path</code>Â å®šä¹‰äº†æ¨¡å—æœç´¢è·¯å¾„</p>
</li>
</ol>
<h3 data-id="heading-21">ğŸ’¡ æœ€ä½³å®è·µï¼š</h3>
<ol>
<li><strong>ä¿æŒæ¨¡å—å°å·§</strong>ï¼šä¸€ä¸ªæ¨¡å—åº”è¯¥ä¸“æ³¨äºä¸€ä¸ªåŠŸèƒ½</li>
<li><strong>ä½¿ç”¨æœ‰æ„ä¹‰çš„åç§°</strong>ï¼šæ¨¡å—ååº”è¯¥æè¿°å…¶åŠŸèƒ½</li>
<li><strong>ç¼–å†™æ–‡æ¡£å­—ç¬¦ä¸²</strong>ï¼šè§£é‡Šæ¨¡å—çš„ç”¨é€”</li>
<li><strong>ä½¿ç”¨Â <code>__all__</code></strong> ï¼šæ§åˆ¶Â <code>from module import *</code>Â çš„è¡Œä¸º</li>
<li><strong>ç»„ç»‡åŒ…ç»“æ„</strong>ï¼šç›¸å…³åŠŸèƒ½æ”¾åœ¨åŒä¸€ä¸ªåŒ…ä¸­</li>
</ol>
<h3 data-id="heading-22">ğŸš€ é«˜çº§ç‰¹æ€§ï¼š</h3>
<ul>
<li><strong>åŠ¨æ€å¯¼å…¥</strong>ï¼š<code>importlib.import_module()</code></li>
<li><strong>æ¨¡å—é‡è½½</strong>ï¼š<code>importlib.reload()</code></li>
<li><strong>æ¨¡å—ç¼“å­˜</strong>ï¼š<code>sys.modules</code></li>
<li><strong>å•ä¾‹æ¨¡å¼</strong>ï¼šæ¨¡å—å¤©ç„¶å°±æ˜¯å•ä¾‹</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ¨¡å‹åŸç†å‰–æâ€”â€”å¤šå¤´å¹¶è¡Œ + æ½œå˜é‡ååŒï¼šåŸç†ã€åº”ç”¨ä¸éƒ¨ç½²ä¼˜åŒ–]]></title>    <link>https://juejin.cn/post/7587334152870477864</link>    <guid>https://juejin.cn/post/7587334152870477864</guid>    <pubDate>2025-12-25T05:42:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587334152870477864" data-draft-id="7587322796825985064" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ¨¡å‹åŸç†å‰–æâ€”â€”å¤šå¤´å¹¶è¡Œ + æ½œå˜é‡ååŒï¼šåŸç†ã€åº”ç”¨ä¸éƒ¨ç½²ä¼˜åŒ–"/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2025-12-25T05:42:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‰¾é†’"/> <meta itemprop="url" content="https://juejin.cn/user/708512558088669"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ¨¡å‹åŸç†å‰–æâ€”â€”å¤šå¤´å¹¶è¡Œ + æ½œå˜é‡ååŒï¼šåŸç†ã€åº”ç”¨ä¸éƒ¨ç½²ä¼˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/708512558088669/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‰¾é†’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T05:42:20.000Z" title="Thu Dec 25 2025 05:42:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>â€œå¤šå¤´å¹¶è¡Œ+æ½œå˜é‡ååŒâ€æ˜¯æ·±åº¦å­¦ä¹ æ³¨æ„åŠ›æœºåˆ¶çš„æ ¸å¿ƒè¿›é˜¶æ¶æ„ï¼Œé€šè¿‡â€œå¤šç»´åº¦å¹¶è¡ŒæŒ–æ˜â€ä¸â€œéšæ€§ç‰¹å¾ååŒèåˆâ€ï¼Œçªç ´å•ä¸€æ³¨æ„åŠ›å¤´çš„è¡¨è¾¾ç“¶é¢ˆï¼Œé«˜æ•ˆæ•æ‰æ•°æ®ä¸­çš„å¤æ‚å…³è”ï¼ˆå¦‚è¯­ä¹‰ã€æ—¶åºã€ç‰¹å¾ä¾èµ–ï¼‰ã€‚å…¶è®¾è®¡ç†å¿µå®Œç¾é€‚é…å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ã€è¯­éŸ³è¯†åˆ«ï¼ˆASRï¼‰ç­‰å¤æ‚AIä»»åŠ¡ï¼Œå°¤å…¶åœ¨æœ¬åœ°åŒ–éƒ¨ç½²åœºæ™¯ä¸­ï¼Œèƒ½å…¼é¡¾æ¨¡å‹è¡¨è¾¾èƒ½åŠ›ä¸ç¡¬ä»¶å¹¶è¡Œæ•ˆç‡ï¼Œæ˜¯å½“å‰é«˜æ€§èƒ½AIç³»ç»Ÿçš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€æ ¸å¿ƒæ¦‚å¿µä¸åº•å±‚é€»è¾‘</h3>
<h4 data-id="heading-2">1. æ•´ä½“å®šä¹‰</h4>
<p>è¯¥æ¶æ„ç”±<strong>å¤šå¤´å¹¶è¡Œ</strong>ï¼ˆMulti-Head Parallelismï¼‰å’Œ<strong>æ½œå˜é‡ååŒ</strong>ï¼ˆLatent Variable Collaborationï¼‰ä¸¤ä¸ªæ ¸å¿ƒæ¨¡å—ç»„æˆï¼š</p>
<ul>
<li>å¤šå¤´å¹¶è¡Œï¼šå°†è¾“å…¥ç‰¹å¾æ‹†åˆ†åˆ°å¤šä¸ªç‹¬ç«‹å­ç©ºé—´ï¼Œé€šè¿‡å¹¶è¡Œè®¡ç®—æŒ–æ˜å·®å¼‚åŒ–å…³è”ï¼›</li>
<li>æ½œå˜é‡ååŒï¼šèåˆå¤šä¸ªå­ç©ºé—´çš„éšæ€§ç‰¹å¾ï¼ˆæ½œå˜é‡ï¼‰ï¼Œå½¢æˆæ— ç“¶é¢ˆçš„å…¨å±€è¡¨è¾¾ã€‚
æœ¬è´¨æ˜¯â€œå¹¶è¡Œæ¢ç´¢+é›†ä¸­æ•´åˆâ€ï¼Œæ—¢è§£å†³äº†å•ä¸€è§†è§’çš„ä¿¡æ¯å±€é™ï¼Œåˆé¿å…äº†å¹¶è¡Œç»“æœçš„ç¢ç‰‡åŒ–ã€‚</li>
</ul>
<h4 data-id="heading-3">2. æ¨¡å—1ï¼šå¤šå¤´å¹¶è¡Œâ€”â€”å¤šç»´åº¦å¹¶è¡Œæ¢ç´¢</h4>
<h5 data-id="heading-4">ï¼ˆ1ï¼‰æ ¸å¿ƒåŸç†</h5>
<p>å°†åŸå§‹è¾“å…¥ç‰¹å¾é€šè¿‡<strong>å·®å¼‚åŒ–çº¿æ€§æŠ•å½±</strong>ï¼Œæ‹†åˆ†åˆ°hä¸ªç›¸äº’ç‹¬ç«‹çš„â€œå­ç‰¹å¾ç©ºé—´â€ï¼Œæ¯ä¸ªç©ºé—´å¯¹åº”ä¸€ä¸ªâ€œæ³¨æ„åŠ›å¤´â€ï¼ˆAttention Headï¼‰ã€‚æ¯ä¸ªå¤´ç‹¬ç«‹è®¡ç®—æ³¨æ„åŠ›æƒé‡ï¼Œä¸“æ³¨æŒ–æ˜è¯¥å­ç©ºé—´å†…çš„ç‰¹å®šå…³è”æ¨¡å¼ï¼ˆå¦‚æœ‰çš„å¤´å…³æ³¨å±€éƒ¨ç‰¹å¾ï¼Œæœ‰çš„å…³æ³¨é•¿è·ç¦»ä¾èµ–ï¼‰ã€‚</p>
<h5 data-id="heading-5">ï¼ˆ2ï¼‰æ•°å­¦ç®€åŒ–è¡¨è¾¾</h5>
<p>å‡è®¾è¾“å…¥ç‰¹å¾ç»´åº¦ä¸º<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></mrow><annotation encoding="application/x-tex">d_{model}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼Œå¤šå¤´æ•°ä¸ºhï¼Œæ¯ä¸ªå¤´çš„ç»´åº¦ä¸º<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>k</mi></msub><mo>=</mo><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub><mi mathvariant="normal">/</mi><mi>h</mi></mrow><annotation encoding="application/x-tex">d_k = d_{model}/h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">/</span><span class="mord mathnormal">h</span></span></span></span></span>ï¼ˆä¿è¯æ€»ç»´åº¦ä¸å˜ï¼‰ï¼š</p>
<ol>
<li>æŠ•å½±æ‹†åˆ†ï¼šåŸå§‹æŸ¥è¯¢ï¼ˆQï¼‰ã€é”®ï¼ˆKï¼‰ã€å€¼ï¼ˆVï¼‰é€šè¿‡ä¸åŒçº¿æ€§çŸ©é˜µæŠ•å½±ï¼Œå¾—åˆ°hç»„ç‹¬ç«‹çš„<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Q</mi><mi>i</mi></msub><mtext>ã€</mtext><msub><mi>K</mi><mi>i</mi></msub><mtext>ã€</mtext><msub><mi>V</mi><mi>i</mi></msub><mtext>ï¼ˆ</mtext><mi>i</mi><mo>=</mo><mn>1</mn><mo>âˆ¼</mo><mi>h</mi><mtext>ï¼‰</mtext></mrow><annotation encoding="application/x-tex">Q_iã€K_iã€V_iï¼ˆi=1\sim hï¼‰</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord cjk_fallback">ã€</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord cjk_fallback">ã€</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord cjk_fallback">ï¼ˆ</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆ¼</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal">h</span><span class="mord cjk_fallback">ï¼‰</span></span></span></span></span>ï¼›</li>
<li>å¹¶è¡Œè®¡ç®—ï¼šæ¯ä¸ªå¤´ç‹¬ç«‹æ‰§è¡Œæ³¨æ„åŠ›å…¬å¼ï¼š<br/>
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mi>t</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo stretchy="false">(</mo><msub><mi>Q</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>K</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>V</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mi>S</mi><mi>o</mi><mi>f</mi><mi>t</mi><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy="false">(</mo><msub><mi>Q</mi><mi>i</mi></msub><msubsup><mi>K</mi><mi>i</mi><mi>T</mi></msubsup><mi mathvariant="normal">/</mi><msqrt><msub><mi>d</mi><mi>k</mi></msub></msqrt><mo stretchy="false">)</mo><mo separator="true">â‹…</mo><msub><mi>V</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">Attention(Q_i, K_i, V_i) = Softmax(Q_iK_i^T/\sqrt{d_k})Â·V_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">A</span><span class="mord mathnormal">tt</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.1159em;vertical-align:-0.2587em;"/><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">t</span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-2.4413em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2587em;"><span/></span></span></span></span></span><span class="mord">/</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8572em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-2.8172em;"><span class="pstrut" style="height:3em;"/><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702&#10;c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14&#10;c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54&#10;c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10&#10;s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429&#10;c69,-144,104.5,-217.7,106.5,-221&#10;l0 -0&#10;c5.3,-9.3,12,-14,20,-14&#10;H400000v40H845.2724&#10;s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7&#10;c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z&#10;M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1828em;"><span/></span></span></span></span><span class="mclose">)</span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼›</li>
<li>ç»“æœæš‚å­˜ï¼šæ¯ä¸ªå¤´çš„è¾“å‡ºåŒ…å«è¯¥å­ç©ºé—´çš„â€œæ½œå˜é‡â€ï¼ˆå¦‚ç‰¹å¾é‡è¦æ€§æƒé‡ã€å…³è”å¼ºåº¦ï¼‰ã€‚</li>
</ol>
<h5 data-id="heading-6">ï¼ˆ3ï¼‰å…³é”®ä¼˜åŠ¿ï¼šå·®å¼‚åŒ–ä¸å¹¶è¡Œæ•ˆç‡</h5>
<ul>
<li>å·®å¼‚åŒ–ï¼šä¸åŒæŠ•å½±çŸ©é˜µè®©æ¯ä¸ªå¤´å­¦ä¹ åˆ°ç‹¬ç‰¹çš„å…³è”æ¨¡å¼ï¼ˆå¦‚LLMä¸­ï¼Œå¤´1å…³æ³¨è¯­æ³•ç»“æ„ï¼Œå¤´2å…³æ³¨è¯­ä¹‰æ­é…ï¼Œå¤´3å…³æ³¨æŒ‡ä»£å…³ç³»ï¼‰ï¼Œé¿å…ä¿¡æ¯å†—ä½™ï¼›</li>
<li>å¹¶è¡Œæ€§ï¼šå¤šå¤´è®¡ç®—å®Œå…¨ç‹¬ç«‹ï¼Œå¤©ç„¶é€‚é…GPU/CPUçš„å¹¶è¡Œæ¶æ„ï¼ˆå¦‚å¤šæ ¸å¿ƒæ‹†åˆ†è®¡ç®—ï¼‰ï¼Œæ˜¾è‘—æå‡æ¨ç†é€Ÿåº¦ã€‚</li>
</ul>
<h4 data-id="heading-7">3. æ¨¡å—2ï¼šæ½œå˜é‡ååŒâ€”â€”éšæ€§ç‰¹å¾é›†ä¸­æ•´åˆ</h4>
<h5 data-id="heading-8">ï¼ˆ1ï¼‰æ½œå˜é‡çš„å®šä¹‰</h5>
<p>â€œæ½œå˜é‡â€æŒ‡æ¯ä¸ªæ³¨æ„åŠ›å¤´åœ¨è®¡ç®—ä¸­å­¦ä¹ åˆ°çš„<strong>éšæ€§å…³è”ä¿¡æ¯</strong>ï¼ˆæœªç›´æ¥æ˜¾å¼è¾“å…¥ï¼‰ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>LLMä¸­ï¼šè¯­ä¹‰å…³è”å¼ºåº¦ã€é•¿è·ç¦»ä¾èµ–æƒé‡ã€è¯­æ³•ç»“æ„ä¼˜å…ˆçº§ï¼›</li>
<li>ASRä¸­ï¼šé¢‘è°±ç‰¹å¾å…³è”ã€éŸ³ç´ æ—¶åºä¾èµ–ã€å™ªå£°æŠ‘åˆ¶æ©ç ã€‚</li>
</ul>
<h5 data-id="heading-9">ï¼ˆ2ï¼‰ååŒæœºåˆ¶ï¼šè§£å†³â€œå¹¶è¡Œç¢ç‰‡åŒ–â€é—®é¢˜</h5>
<p>å•ä¸€å¤šå¤´å¹¶è¡Œä¼šäº§ç”Ÿhä¸ªç‹¬ç«‹çš„ç‰¹å¾è¾“å‡ºï¼Œæ½œå˜é‡ååŒé€šè¿‡ä»¥ä¸‹æ–¹å¼æ•´åˆï¼š</p>





























<table><thead><tr><th>ååŒæ–¹å¼</th><th>åŸç†</th><th>é€‚ç”¨åœºæ™¯</th><th>è®¡ç®—å¤æ‚åº¦</th></tr></thead><tbody><tr><td>æ‹¼æ¥èåˆï¼ˆConcatï¼‰</td><td>ç›´æ¥æ‹¼æ¥hä¸ªå¤´çš„è¾“å‡ºï¼Œé€šè¿‡çº¿æ€§å±‚å‹ç¼©ç»´åº¦</td><td>LLMã€å¤æ‚æ–‡æœ¬ç”Ÿæˆ</td><td>ä¸­-é«˜</td></tr><tr><td>åŠ æƒæ±‚å’Œï¼ˆWeighted Sumï¼‰</td><td>ç»™æ¯ä¸ªå¤´åˆ†é…å¯å­¦ä¹ æƒé‡ï¼ŒåŠ¨æ€è°ƒæ•´é‡è¦æ€§</td><td>ASRã€å™ªå£°ç¯å¢ƒä¸‹çš„ç‰¹å¾æå–</td><td>ä½-ä¸­</td></tr><tr><td>äº¤å‰æ³¨æ„åŠ›ååŒ</td><td>ä»¥ä¸€ä¸ªå¤´çš„æ½œå˜é‡ä¸ºæŸ¥è¯¢ï¼Œå…¶ä»–å¤´ä¸ºé”®/å€¼</td><td>å¤šæ¨¡æ€ä»»åŠ¡ï¼ˆè¯­éŸ³-æ–‡æœ¬è”åŠ¨ï¼‰</td><td>é«˜</td></tr></tbody></table>
<h5 data-id="heading-10">ï¼ˆ3ï¼‰ä¸â€œå•ä¸€æ½œæ³¨æ„åŠ›â€çš„æ ¸å¿ƒåŒºåˆ«</h5>






























<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>å•ä¸€æ½œæ³¨æ„åŠ›</th><th>å¤šå¤´å¹¶è¡Œ+æ½œå˜é‡ååŒ</th></tr></thead><tbody><tr><td>ç‰¹å¾ç©ºé—´</td><td>å•ç»´åº¦ç©ºé—´ï¼Œæ˜“â€œç»´åº¦æ‹¥æŒ¤â€</td><td>å¤šå­ç©ºé—´å¹¶è¡Œï¼Œæ— è¡¨è¾¾ç“¶é¢ˆ</td></tr><tr><td>å…³è”æŒ–æ˜èƒ½åŠ›</td><td>ä»…èƒ½æ•æ‰å•ä¸€ç²’åº¦å…³è”</td><td>å¤šç²’åº¦ã€å¤šç»´åº¦å…³è”åŒæ—¶æ•æ‰</td></tr><tr><td>æ³›åŒ–èƒ½åŠ›</td><td>æ˜“è¿‡æ‹Ÿåˆï¼Œé€‚é…æ€§å·®</td><td>é€‚é…å¤šæ ·åŒ–æ•°æ®åˆ†å¸ƒ</td></tr><tr><td>å¹¶è¡Œæ•ˆç‡</td><td>æ— å¹¶è¡Œæ€§ï¼Œæ¨ç†é€Ÿåº¦æ…¢</td><td>å¤©ç„¶å¹¶è¡Œï¼Œé€‚é…ç¡¬ä»¶åŠ é€Ÿ</td></tr></tbody></table>
<h3 data-id="heading-11">äºŒã€æ ¸å¿ƒä¼˜åŠ¿ï¼šä¸ºä½•æˆä¸ºLLM/ASRçš„é¦–é€‰æ¶æ„</h3>
<h4 data-id="heading-12">1. çªç ´è¡¨è¾¾ç“¶é¢ˆï¼Œæ•æ‰å¤æ‚å…³è”</h4>
<ul>
<li>LLMåœºæ™¯ï¼šåŒæ—¶æ•æ‰çŸ­è·ç¦»è¯­æ³•æ­é…ï¼ˆå¦‚â€œæ·±åº¦å­¦ä¹ æ¡†æ¶â€ï¼‰å’Œé•¿è·ç¦»è¯­ä¹‰è¿è´¯ï¼ˆå¦‚å¯¹è¯ä¸­å‰æ–‡â€œæ¨¡å‹éƒ¨ç½²â€ä¸åæ–‡å‘¼åº”ï¼‰ï¼Œç”Ÿæˆæ–‡æœ¬çš„é€»è¾‘æ€§æå‡30%ä»¥ä¸Šï¼›</li>
<li>ASRåœºæ™¯ï¼šåŒæ—¶æ•æ‰é¢‘è°±å±€éƒ¨å…³è”ï¼ˆéŸ³ç´ è¯†åˆ«ï¼‰å’Œæ—¶åºé•¿è·ç¦»å…³è”ï¼ˆè¯­å¥æµç•…æ€§ï¼‰ï¼Œå¤æ‚å™ªå£°ç¯å¢ƒä¸‹è¯†åˆ«å‡†ç¡®ç‡æå‡10%-20%ã€‚</li>
</ul>
<h4 data-id="heading-13">2. é€‚é…ç¡¬ä»¶å¹¶è¡Œï¼Œæå‡éƒ¨ç½²æ•ˆç‡</h4>
<ul>
<li>GPUéƒ¨ç½²ï¼šå¤šå¤´è®¡ç®—å¯é€šè¿‡Tensor Parallelismæ‹†åˆ†åˆ°å¤šå¡æ ¸å¿ƒï¼ˆå¦‚h=32çš„LLMæ‹†åˆ†ä¸º4å¼ GPUï¼Œæ¯å¼ å¤„ç†8ä¸ªå¤´ï¼‰ï¼Œæ˜¾å­˜å ç”¨é™ä½50%ï¼Œæ¨ç†é€Ÿåº¦æå‡2-3å€ï¼›</li>
<li>CPU/è¾¹ç¼˜è®¾å¤‡éƒ¨ç½²ï¼šé€šè¿‡å¤šçº¿ç¨‹å¹¶è¡Œå¤„ç†ä¸åŒå¤´ï¼Œ8æ ¸CPUå¤„ç†h=8çš„å¤šå¤´æ—¶ï¼Œå»¶è¿Ÿé™ä½50%ã€‚</li>
</ul>
<h4 data-id="heading-14">3. æ³›åŒ–èƒ½åŠ›å¼ºï¼Œé€‚é…å¤šä»»åŠ¡åœºæ™¯</h4>
<ul>
<li>å¯é€šè¿‡è°ƒæ•´å¤šå¤´æ•°ï¼ˆhï¼‰å’ŒååŒæ–¹å¼é€‚é…ä¸åŒä»»åŠ¡ï¼š
<ul>
<li>è½»é‡ä»»åŠ¡ï¼ˆæ–‡æœ¬åˆ†ç±»ã€ç®€å•ASRï¼‰ï¼šh=8+åŠ æƒæ±‚å’Œï¼Œå¹³è¡¡é€Ÿåº¦ä¸æ•ˆæœï¼›</li>
<li>å¤æ‚ä»»åŠ¡ï¼ˆå¯¹è¯ç”Ÿæˆã€å¤šæ¨¡æ€è”åŠ¨ï¼‰ï¼šh=16/32+äº¤å‰æ³¨æ„åŠ›ï¼Œæå‡å…³è”æ•æ‰èƒ½åŠ›ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-15">4. æˆæœ¬æ•ˆç›Šå¹³è¡¡ï¼Œé€‚é…æœ¬åœ°åŒ–éƒ¨ç½²</h4>
<ul>
<li>å°æ¨¡å‹ï¼ˆLLaMA 7Bã€è½»é‡ASRï¼‰ï¼šh=8-16ï¼Œå•å¡RTX 3090/4090å³å¯éƒ¨ç½²ï¼Œæ˜¾å­˜å ç”¨ä»…8-12GBï¼›</li>
<li>å¤§æ¨¡å‹ï¼ˆLLaMA 70Bï¼‰ï¼šh=32-64ï¼Œé€šè¿‡å¤šå¡å¹¶è¡Œï¼ˆ4å¼ A100ï¼‰ï¼Œå…¼é¡¾æ•ˆæœä¸éƒ¨ç½²å¯è¡Œæ€§ã€‚</li>
</ul>
<h3 data-id="heading-16">ä¸‰ã€å®é™…åº”ç”¨åœºæ™¯ï¼šèšç„¦LLMä¸ASR</h3>
<h4 data-id="heading-17">1. åœºæ™¯1ï¼šLLMçš„è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼ˆæ ¸å¿ƒåº”ç”¨ï¼‰</h4>
<h5 data-id="heading-18">ï¼ˆ1ï¼‰å®ç°é€»è¾‘ï¼ˆä»¥Transformerä¸ºä¾‹ï¼‰</h5>
<ol>
<li>è¾“å…¥å¤„ç†ï¼šæ–‡æœ¬Embeddingï¼ˆç»´åº¦<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub><mo>=</mo><mn>512</mn><mi mathvariant="normal">/</mi><mn>1024</mn></mrow><annotation encoding="application/x-tex">d_{model}=512/1024</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">512/1024</span></span></span></span></span>ï¼‰é€šè¿‡Qã€Kã€Vçº¿æ€§æŠ•å½±ï¼›</li>
<li>å¤šå¤´æ‹†åˆ†ï¼šsplitä¸º<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo>=</mo><mn>12</mn><mi mathvariant="normal">/</mi><mn>16</mn><mi mathvariant="normal">/</mi><mn>32</mn></mrow><annotation encoding="application/x-tex">h=12/16/32</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">12/16/32</span></span></span></span></span>ä¸ªå¤´ï¼ˆå¦‚<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub><mo>=</mo><mn>1024</mn></mrow><annotation encoding="application/x-tex">d_{model}=1024</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1024</span></span></span></span></span>ï¼Œh=16ï¼Œæ¯ä¸ªå¤´ç»´åº¦<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>k</mi></msub><mo>=</mo><mn>64</mn></mrow><annotation encoding="application/x-tex">d_k=64</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">64</span></span></span></span></span>ï¼‰ï¼›</li>
<li>å¹¶è¡Œè®¡ç®—ï¼šæ¯ä¸ªå¤´ç‹¬ç«‹è®¡ç®—è‡ªæ³¨æ„åŠ›ï¼ŒæŒ–æ˜ä¸åŒè¯­ä¹‰æ½œå˜é‡ï¼›</li>
<li>æ½œå˜é‡ååŒï¼šæ‹¼æ¥æ‰€æœ‰å¤´çš„è¾“å‡ºï¼Œé€šè¿‡çº¿æ€§å±‚å¾—åˆ°å…¨å±€æ³¨æ„åŠ›ç‰¹å¾ï¼Œè¾“å…¥Feed-Forwardç½‘ç»œã€‚</li>
</ol>
<h5 data-id="heading-19">ï¼ˆ2ï¼‰éƒ¨ç½²ä¼˜åŒ–æŠ€å·§</h5>
<ul>
<li>æ˜¾å­˜ä¼˜åŒ–ï¼šå°†å¤šå¤´æ‹†åˆ†åˆ°å¤šå¡ï¼ˆTensor Parallelismï¼‰ï¼ŒLLaMA 7B h=32æ‹†åˆ†ä¸º2å¼ GPUï¼Œæ¯å¼ å¤„ç†16ä¸ªå¤´ï¼Œæ˜¾å­˜å ç”¨ä»14GBé™è‡³8GBï¼›</li>
<li>é€Ÿåº¦ä¼˜åŒ–ï¼šåˆ©ç”¨CUDA Tensor CoreåŠ é€ŸçŸ©é˜µä¹˜æ³•ï¼ˆQK^Tã€VÂ·æƒé‡ï¼‰ï¼Œå¼€å¯TensorRTä¼˜åŒ–ï¼Œæ¨ç†é€Ÿåº¦æå‡2å€ã€‚</li>
</ul>
<h4 data-id="heading-20">2. åœºæ™¯2ï¼šASRçš„è¯­éŸ³ç‰¹å¾æå–ï¼ˆå…³é”®æ”¹è¿›ï¼‰</h4>
<h5 data-id="heading-21">ï¼ˆ1ï¼‰å¤šå¤´åˆ†å·¥è®¾è®¡</h5>
<ul>
<li>å¤´1-4ï¼šä¸“æ³¨é¢‘è°±å±€éƒ¨å…³è”ï¼ˆæ¢…å°”é¢‘è°±çš„é¢‘ç‡ä¾èµ–ï¼Œç”¨äºéŸ³ç´ è¯†åˆ«ï¼‰ï¼›</li>
<li>å¤´5-8ï¼šä¸“æ³¨æ—¶åºé•¿è·ç¦»å…³è”ï¼ˆéŸ³ç´ å…ˆåé¡ºåºï¼Œç”¨äºè¯­å¥è¿è´¯æ€§ï¼‰ï¼›</li>
<li>å¤´9-12ï¼šä¸“æ³¨å™ªå£°æŠ‘åˆ¶ï¼ˆæŒ–æ˜â€œè¯­éŸ³ä¿¡å·â€ä¸â€œå™ªå£°â€çš„æ½œå˜é‡å·®å¼‚ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-22">ï¼ˆ2ï¼‰æ½œå˜é‡ååŒç­–ç•¥</h5>
<p>é‡‡ç”¨<strong>åŠ¨æ€åŠ æƒæ±‚å’Œ</strong>ï¼šæ¨¡å‹æ ¹æ®è¾“å…¥è¯­éŸ³çš„å™ªå£°å¼ºåº¦ã€é•¿åº¦ï¼Œè‡ªåŠ¨è°ƒæ•´ä¸åŒå¤´çš„æƒé‡ï¼ˆå¦‚å™ªå£°ç¯å¢ƒä¸‹ï¼Œå™ªå£°æŠ‘åˆ¶å¤´æƒé‡ä»0.1æå‡è‡³0.3ï¼‰ã€‚</p>
<h5 data-id="heading-23">ï¼ˆ3ï¼‰éƒ¨ç½²æ•ˆæœ</h5>
<ul>
<li>å®æ—¶ASRï¼šå»¶è¿Ÿä»200msé™è‡³100msä»¥å†…ï¼ˆCPU 8æ ¸å¹¶è¡Œï¼‰ï¼›</li>
<li>é•¿è¯­éŸ³è½¬å†™ï¼ˆ10åˆ†é’Ÿä¼šè®®å½•éŸ³ï¼‰ï¼šWERï¼ˆå­—é”™è¯¯ç‡ï¼‰ä»18%é™è‡³12%ã€‚</li>
</ul>
<h4 data-id="heading-24">3. åœºæ™¯3ï¼šå¤šæ¨¡æ€å·¥å…·ï¼ˆè¯­éŸ³-æ–‡æœ¬-è„±æ•è”åŠ¨ï¼‰</h4>
<h5 data-id="heading-25">ï¼ˆ1ï¼‰æ¶æ„è®¾è®¡</h5>
<ul>
<li>å¤šå¤´åˆ†å·¥ï¼šéƒ¨åˆ†å¤´è´Ÿè´£ASRè¯­éŸ³è½¬å†™ï¼Œéƒ¨åˆ†å¤´è´Ÿè´£æ–‡æœ¬æ•æ„Ÿä¿¡æ¯è¯†åˆ«ï¼ˆæŒ–æ˜â€œæ•æ„Ÿè¯-ä¸Šä¸‹æ–‡â€æ½œå˜é‡ï¼‰ï¼›</li>
<li>ååŒæ–¹å¼ï¼šäº¤å‰æ³¨æ„åŠ›ï¼ˆASRå¤´è¾“å‡ºä½œä¸ºK/Vï¼Œè„±æ•å¤´è¾“å‡ºä½œä¸ºQï¼‰ï¼Œè®©è„±æ•ä»»åŠ¡åˆ©ç”¨è¯­éŸ³æ—¶åºä¿¡æ¯ï¼Œé¿å…è¯¯åˆ¤ï¼ˆå¦‚â€œå¼ ä¸‰â€ä¸ä¼šè¢«è¯¯åˆ¤ä¸ºæ™®é€šåè¯ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-26">ï¼ˆ2ï¼‰å®ç”¨ä»·å€¼</h5>
<p>æ„å»ºæœ¬åœ°åŒ–â€œè¯­éŸ³è½¬å†™+æ•°æ®è„±æ•â€ä¸€ä½“åŒ–å·¥å…·ï¼Œé€‚ç”¨äºä¼ä¸šä¼šè®®å½•éŸ³ã€å®¢æˆ·é€šè¯ç­‰éšç§åœºæ™¯ï¼Œè„±æ•å‡†ç¡®ç‡è¾¾95%ä»¥ä¸Šã€‚</p>
<h3 data-id="heading-27">å››ã€æœ¬åœ°åŒ–éƒ¨ç½²ä¼˜åŒ–æŒ‡å—</h3>
<h4 data-id="heading-28">1. å¤šå¤´æ•°ï¼ˆhï¼‰çš„é€‰æ‹©ï¼šå¹³è¡¡æ•ˆæœä¸ç¡¬ä»¶æˆæœ¬</h4>

































<table><thead><tr><th>æ¨¡å‹è§„æ¨¡</th><th>æ¨èå¤šå¤´æ•°h</th><th>é€‚é…ç¡¬ä»¶</th><th>æ˜¾å­˜å ç”¨ï¼ˆFP16ï¼‰</th><th>æ¨ç†é€Ÿåº¦ï¼ˆå•æ¡è¯·æ±‚ï¼‰</th></tr></thead><tbody><tr><td>è½»é‡æ¨¡å‹ï¼ˆLLaMA 7Bã€è½»é‡ASRï¼‰</td><td>8-16</td><td>å•å¡RTX 3090/4090ã€CPU 16æ ¸</td><td>8-12GB</td><td>LLMï¼š50-100msï¼ŒASRï¼š50ms</td></tr><tr><td>ä¸­è§„æ¨¡æ¨¡å‹ï¼ˆLLaMA 13Bã€é€šç”¨ASRï¼‰</td><td>16-24</td><td>å•å¡A10ã€åŒå¡RTX 4090</td><td>12-20GB</td><td>LLMï¼š100-200msï¼ŒASRï¼š80ms</td></tr><tr><td>å¤§è§„æ¨¡æ¨¡å‹ï¼ˆLLaMA 70Bã€é«˜ç²¾åº¦ASRï¼‰</td><td>32-64</td><td>4-8å¡A100</td><td>40-80GB</td><td>LLMï¼š200-500msï¼ŒASRï¼š150ms</td></tr></tbody></table>
<blockquote>
<p>æ³¨æ„ï¼šå¤šå¤´æ•°å¹¶éè¶Šå¤šè¶Šå¥½ï¼Œè¶…è¿‡h=64åï¼Œæ¨¡å‹å¤æ‚åº¦æ¿€å¢ï¼Œæ³›åŒ–èƒ½åŠ›ä¸‹é™ï¼Œä¸”ç¡¬ä»¶æˆæœ¬ç¿»å€ã€‚</p>
</blockquote>
<h4 data-id="heading-29">2. æ½œå˜é‡ååŒæ–¹å¼çš„ç¡¬ä»¶é€‚é…</h4>
<ul>
<li>è®¡ç®—èµ„æºæœ‰é™ï¼ˆCPU/è¾¹ç¼˜è®¾å¤‡ï¼‰ï¼šé€‰æ‹©â€œåŠ æƒæ±‚å’Œâ€æˆ–â€œå¹³å‡æ± åŒ–â€ï¼Œè®¡ç®—é‡æ¯”æ‹¼æ¥èåˆä½30%ï¼Œé€‚åˆæ ‘è“æ´¾ã€NVIDIA Jetsonç­‰è®¾å¤‡ï¼›</li>
<li>é«˜æ€§èƒ½ç¡¬ä»¶ï¼ˆGPUå¤šå¡ï¼‰ï¼šé€‰æ‹©â€œæ‹¼æ¥èåˆâ€æˆ–â€œäº¤å‰æ³¨æ„åŠ›â€ï¼Œæœ€å¤§åŒ–æ¨¡å‹è¡¨è¾¾èƒ½åŠ›ï¼Œé€‚åˆä¼ä¸šçº§æœ¬åœ°åŒ–éƒ¨ç½²ï¼›</li>
<li>è¾¹ç¼˜è®¾å¤‡åŠŸè€—ä¼˜åŒ–ï¼šé‡‡ç”¨â€œç¨€ç–å¤šå¤´â€ç­–ç•¥ï¼ˆç¦ç”¨20%æ¬¡è¦å¤´ï¼‰ï¼ŒåŠŸè€—é™ä½15%ï¼Œæ•ˆæœä»…ä¸‹é™2%ã€‚</li>
</ul>
<h4 data-id="heading-30">3. å¹¶è¡Œè®¡ç®—ä¼˜åŒ–æŠ€å·§</h4>
<h5 data-id="heading-31">ï¼ˆ1ï¼‰GPUéƒ¨ç½²</h5>
<ul>
<li>å¼€å¯Tensor Parallelismï¼šæ‹†åˆ†å¤šå¤´è®¡ç®—åˆ°å¤šå¡ï¼Œå¦‚h=32æ‹†åˆ†ä¸º4å¼ GPUï¼Œæ¯å¼ å¤„ç†8ä¸ªå¤´ï¼›</li>
<li>æ··åˆç²¾åº¦è®­ç»ƒ/æ¨ç†ï¼ˆFP16/FP8ï¼‰ï¼šæ˜¾å­˜å ç”¨é™ä½50%ï¼Œæ¨ç†é€Ÿåº¦æå‡1.5å€ï¼Œæ•ˆæœæŸå¤±å¯å¿½ç•¥ï¼›</li>
<li>åˆ©ç”¨CUDAæ ¸å‡½æ•°ï¼šè‡ªå®šä¹‰å¤šå¤´æ³¨æ„åŠ›çš„çŸ©é˜µä¹˜æ³•æ ¸ï¼Œè¿›ä¸€æ­¥æå‡å¹¶è¡Œæ•ˆç‡ã€‚</li>
</ul>
<h5 data-id="heading-32">ï¼ˆ2ï¼‰CPUéƒ¨ç½²</h5>
<ul>
<li>å¤šçº¿ç¨‹å¹¶è¡Œï¼šé€šè¿‡OpenMPå°†æ¯ä¸ªå¤´çš„è®¡ç®—åˆ†é…åˆ°ä¸åŒCPUæ ¸å¿ƒï¼Œé¿å…ä¸²è¡Œç­‰å¾…ï¼›</li>
<li>ç‰¹å¾ç»´åº¦ä¼˜åŒ–ï¼šé™ä½<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow></msub></mrow><annotation encoding="application/x-tex">d_{model}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>ï¼ˆå¦‚ä»1024é™è‡³768ï¼‰ï¼ŒåŒæ—¶ä¿æŒh=16ï¼Œå¹³è¡¡é€Ÿåº¦ä¸æ•ˆæœã€‚</li>
</ul>
<h4 data-id="heading-33">4. æ€§èƒ½è¯„ä¼°æŒ‡æ ‡ï¼ˆæœ¬åœ°åŒ–éƒ¨ç½²å…³é”®ï¼‰</h4>

























<table><thead><tr><th>ç»´åº¦</th><th>æ ¸å¿ƒæŒ‡æ ‡</th><th>ä¼˜åŒ–ç›®æ ‡</th></tr></thead><tbody><tr><td>æ¨¡å‹æ•ˆæœ</td><td>LLMï¼šPerplexityã€BLEUï¼›ASRï¼šWER/CER</td><td>LLM Perplexity&lt;30ï¼›ASR WER&lt;15%</td></tr><tr><td>éƒ¨ç½²æ€§èƒ½</td><td>æ¨ç†å»¶è¿Ÿã€ååé‡ã€æ˜¾å­˜/å†…å­˜å ç”¨</td><td>å»¶è¿Ÿ&lt;300msï¼›ååé‡&gt;10 QPS</td></tr><tr><td>æˆæœ¬æ•ˆç›Š</td><td>æ¯åƒæ¡è¯·æ±‚ç¡¬ä»¶æˆæœ¬ï¼ˆGPUå°æ—¶è´¹ã€ç”µè´¹ï¼‰</td><td>æ§åˆ¶åœ¨1-5å…ƒ/åƒæ¡</td></tr></tbody></table>
<h3 data-id="heading-34">äº”ã€å‰æ²¿æ‰©å±•ä¸æœªæ¥è¶‹åŠ¿</h3>
<h4 data-id="heading-35">1. åŠ¨æ€å¤šå¤´æœºåˆ¶</h4>
<p>æ¨¡å‹æ ¹æ®è¾“å…¥æ•°æ®å¤æ‚åº¦åŠ¨æ€æ¿€æ´»å¤šå¤´æ•°ï¼ˆå¦‚ç®€å•æ–‡æœ¬æ¿€æ´»4ä¸ªå¤´ï¼Œå¤æ‚æ–‡æœ¬æ¿€æ´»16ä¸ªå¤´ï¼‰ï¼Œæ¨ç†é€Ÿåº¦æå‡30%ï¼ŒåŒæ—¶ä¿æŒæ•ˆæœã€‚</p>
<h4 data-id="heading-36">2. æ½œå˜é‡è’¸é¦</h4>
<p>å°†å¤§æ¨¡å‹ï¼ˆh=32ï¼‰çš„æ½œå˜é‡çŸ¥è¯†è’¸é¦åˆ°å°æ¨¡å‹ï¼ˆh=8ï¼‰ï¼Œè®©å°æ¨¡å‹åœ¨è¾¹ç¼˜è®¾å¤‡éƒ¨ç½²æ—¶ï¼Œæ•ˆæœæ¥è¿‘å¤§æ¨¡å‹ï¼ˆå¦‚ASR WERä»…ä¸Šå‡3%ï¼‰ã€‚</p>
<h4 data-id="heading-37">3. è·¨ä»»åŠ¡æ½œå˜é‡å…±äº«</h4>
<p>åœ¨ä¸€ä½“åŒ–å·¥å…·ï¼ˆå¦‚â€œLLMç”Ÿæˆ+ASRè½¬å†™+è„±æ•â€ï¼‰ä¸­ï¼Œå…±äº«è¯­ä¹‰å…³è”ç±»æ½œå˜é‡ï¼Œå‡å°‘æ¨¡å‹å‚æ•°30%ï¼Œæå‡éƒ¨ç½²æ•ˆç‡ã€‚</p>
<h3 data-id="heading-38">æ€»ç»“</h3>
<p>â€œå¤šå¤´å¹¶è¡Œ+æ½œå˜é‡ååŒâ€æ˜¯å¹³è¡¡AIæ¨¡å‹â€œè¡¨è¾¾èƒ½åŠ›â€ä¸â€œéƒ¨ç½²æ•ˆç‡â€çš„æ ¸å¿ƒæ¶æ„ï¼Œå…¶æœ¬è´¨æ˜¯é€šè¿‡â€œå¤šç»´åº¦å¹¶è¡Œæ¢ç´¢â€çªç ´å•ä¸€è§†è§’å±€é™ï¼Œå†é€šè¿‡â€œéšæ€§ç‰¹å¾ååŒâ€å½¢æˆå…¨å±€è¡¨è¾¾ã€‚åœ¨LLMã€ASRç­‰æœ¬åœ°åŒ–éƒ¨ç½²åœºæ™¯ä¸­ï¼Œé€šè¿‡åˆç†é€‰æ‹©å¤šå¤´æ•°ã€ååŒæ–¹å¼å’Œå¹¶è¡Œç­–ç•¥ï¼Œå¯åœ¨æ™®é€šç¡¬ä»¶ï¼ˆå¦‚å•å¡RTX 4090ï¼‰ä¸Šå®ç°é«˜æ€§èƒ½æ¨ç†ï¼ŒåŒæ—¶æ§åˆ¶æˆæœ¬ã€‚</p>
<p>å¯¹äºå¼€å‘è€…è€Œè¨€ï¼Œè¯¥æ¶æ„çš„å…³é”®ä»·å€¼åœ¨äºâ€œçµæ´»æ€§â€â€”â€”å¯æ ¹æ®ä»»åŠ¡å¤æ‚åº¦ã€ç¡¬ä»¶é…ç½®åŠ¨æ€è°ƒæ•´å‚æ•°ï¼Œå®Œç¾é€‚é…ä»è¾¹ç¼˜è®¾å¤‡åˆ°ä¼ä¸šçº§æœåŠ¡å™¨çš„å…¨åœºæ™¯éƒ¨ç½²éœ€æ±‚ï¼Œæ˜¯æ„å»ºå®ç”¨åŒ–ã€æœ¬åœ°åŒ–AIå·¥å…·çš„æ ¸å¿ƒæŠ€æœ¯æ”¯æ’‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é€ƒå‡ºç»“æ„åŒ–æ€ç»´ï¼šä»å‘é‡ï¼Œå‘é‡æ•°æ®åº“åˆ°RAG]]></title>    <link>https://juejin.cn/post/7587074669818134554</link>    <guid>https://juejin.cn/post/7587074669818134554</guid>    <pubDate>2025-12-24T13:51:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587074669818134554" data-draft-id="7587245616754507827" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é€ƒå‡ºç»“æ„åŒ–æ€ç»´ï¼šä»å‘é‡ï¼Œå‘é‡æ•°æ®åº“åˆ°RAG"/> <meta itemprop="keywords" content="åç«¯,æ¶æ„,LLM"/> <meta itemprop="datePublished" content="2025-12-24T13:51:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æƒ³ç”¨offeræ‰“ç‰Œ"/> <meta itemprop="url" content="https://juejin.cn/user/578781641968972"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é€ƒå‡ºç»“æ„åŒ–æ€ç»´ï¼šä»å‘é‡ï¼Œå‘é‡æ•°æ®åº“åˆ°RAG
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/578781641968972/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æƒ³ç”¨offeræ‰“ç‰Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T13:51:09.000Z" title="Wed Dec 24 2025 13:51:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.8;font-weight:400;font-size:16px;word-spacing:2px;letter-spacing:2px;overflow-x:hidden;color:#3e3e3e;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:1.2em;border-bottom:2px solid #ef7060;word-spacing:0!important;letter-spacing:0!important;font-size:inherit;line-height:inherit;display:block;font-weight:400;background:#ef7060;color:#fff;padding:10px;border-top-right-radius:3px;border-top-left-radius:3px;margin-right:3px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>ä½œä¸ºä¸€ä¸ª <strong>Java/Go åç«¯å¼€å‘è€…</strong>ï¼Œä½ è‚¯å®šéå¸¸ç†Ÿæ‚‰ä¼ ç»Ÿçš„<strong>å…³ç³»å‹æ•°æ®åº“</strong>ï¼ˆMySQLã€PostgreSQLï¼‰å’Œ<strong>é”®å€¼å¯¹æ•°æ®åº“</strong>ï¼ˆRedisï¼‰ã€‚å®ƒä»¬çš„æ ¸å¿ƒé€»è¾‘é€šå¸¸æ˜¯<strong>ç²¾ç¡®åŒ¹é…</strong>ï¼ˆ<code>WHERE id = 1</code> æˆ– <code>key = "session_123"</code>ï¼‰ã€‚</p>
<p>ä½†åœ¨è¿™ä¸ª AI çˆ†å‘çš„æ—¶ä»£ï¼Œæˆ‘ä»¬å¤„ç†çš„æ•°æ®ç±»å‹å˜äº†ï¼šæ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘ã€‚è¿™äº›éç»“æ„åŒ–æ•°æ®æ— æ³•é€šè¿‡ç®€å•çš„â€œç²¾ç¡®åŒ¹é…â€æ¥æŸ¥è¯¢ã€‚è¯¦ç»†æ¥è¯´ï¼Œ<strong>å¦‚ä½•è®©æ•°æ®åº“ç†è§£â€œå«ä¹‰â€ï¼Ÿ</strong> æ¯”å¦‚ç”¨æˆ·æœâ€œæ€ä¹ˆé€€è´§ï¼Ÿâ€ï¼Œæ•°æ®åº“å¾—èƒ½æŠŠæ–‡æ¡£é‡Œå†™ç€â€œå”®åæµç¨‹â€çš„é‚£ä¸€è¡Œæ‰¾å‡ºæ¥ã€‚ä¼ ç»Ÿçš„ SQL <code>LIKE</code> æˆ–å…¨æ–‡æ£€ç´¢ï¼ˆElasticsearchï¼‰åœ¨è¿™é‡Œå¾€å¾€åŠ›ä¸ä»å¿ƒï¼Œå› ä¸ºå®ƒä»¬åŒ¹é…çš„æ˜¯<strong>å­—é¢</strong>ï¼Œè€Œä¸æ˜¯<strong>æ„æ€</strong></p>
<p>è¿™æ—¶å€™ï¼Œå‘é‡ï¼ˆVectorï¼‰<strong>å’Œ</strong>å‘é‡æ•°æ®åº“ï¼ˆVector Databaseï¼‰<strong>å°±ç™»åœºäº†ã€‚ç®€å•æ¥è¯´ï¼Œå®ƒä»¬æ˜¯ä¸ºäº†è§£å†³</strong>â€œè¯­ä¹‰æœç´¢â€<strong>å’Œ</strong>â€œæ¨¡ç³ŠåŒ¹é…â€è€Œç”Ÿçš„</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c25d1a22c33f4e18a55ff86bd3cd5522~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oOz55Sob2ZmZXLmiZPniYw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767189069&amp;x-signature=mFka%2BJ%2FMoJUhXBm6sQL4BjF5JXc%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">ä»€ä¹ˆæ˜¯å‘é‡ -- æ•°æ®çš„åæ ‡</h2>
<p>åœ¨æ•°å­¦ä¸Šï¼Œå‘é‡æ˜¯æœ‰å¤§å°å’Œæ–¹å‘çš„é‡ã€‚ä½†åœ¨ AI å·¥ç¨‹ä¸­ï¼Œ<strong>å‘é‡ï¼ˆEmbeddingï¼‰</strong> æ˜¯<strong>éç»“æ„åŒ–æ•°æ®ï¼ˆæ–‡æœ¬ã€å›¾ç‰‡ã€éŸ³é¢‘ï¼‰åœ¨å¤šç»´ç©ºé—´ä¸­çš„æ•°å€¼æ˜ å°„</strong></p>
<p>å› æ­¤ï¼Œå®šä¹‰æ˜¯ï¼šæ•°æ®ï¼ˆå¦‚ä¸€å¥è¯ã€ä¸€å¼ å›¾ï¼‰ç»è¿‡æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼ˆEmbedding Modelï¼‰è®¡ç®—åï¼Œè½¬åŒ–æˆçš„ä¸€ä¸²<strong>æµ®ç‚¹æ•°æ•°ç»„</strong></p>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>
<p><strong>è¾“å…¥ï¼š</strong> "è‹¹æœ"</p>
</li>
<li>
<p><strong>è¾“å‡º (å‡è®¾ 3 ç»´)ï¼š</strong> <code>[0.8, 0.1, 0.1]</code></p>
</li>
<li>
<p><strong>è¾“å…¥ï¼š</strong> "æ¢¨å­"</p>
</li>
<li>
<p><strong>è¾“å‡ºï¼š</strong> <code>[0.7, 0.2, 0.1]</code></p>
</li>
<li>
<p><strong>è¾“å…¥ï¼š</strong> "å¡è½¦"</p>
</li>
<li>
<p><strong>è¾“å‡ºï¼š</strong> <code>[-0.9, 0.5, 0.3]</code></p>
</li>
</ul>
<h3 data-id="heading-2"><strong>æ ¸å¿ƒé€»è¾‘ï¼šç©ºé—´è·ç¦»ä»£è¡¨è¯­ä¹‰ç›¸ä¼¼åº¦</strong></h3>
<p>ç®€å•æ¥è¯´å‘¢ï¼Œå°±æ˜¯åœ¨è¿™ä¸ªå¤šç»´ç©ºé—´é‡Œï¼Œ<strong>å«ä¹‰ç›¸è¿‘çš„è¯ï¼Œåæ ‡è·ç¦»å°±è¿‘</strong></p>
<ul>
<li>å¦‚æœä¸¤ä¸ªæ•°æ®åœ¨è¯­ä¹‰ä¸Šå¾ˆåƒï¼ˆæ¯”å¦‚â€œçŒ«â€å’Œâ€œå°çŒ«â€ï¼‰ï¼Œå®ƒä»¬è½¬æ¢æˆçš„å‘é‡åœ¨æ•°å­¦ç©ºé—´é‡Œçš„<strong>è·ç¦»</strong>å°±ä¼šéå¸¸è¿‘ã€‚</li>
<li>å¦‚æœè¯­ä¹‰æ— å…³ï¼ˆæ¯”å¦‚â€œçŒ«â€å’Œâ€œæ±½è½¦â€ï¼‰ï¼Œè·ç¦»å°±ä¼šå¾ˆè¿œ</li>
</ul>
<h3 data-id="heading-3"><strong>åç«¯è§†è§’</strong></h3>
<p>å¯¹äºåç«¯æ¥è¯´ï¼Œæ‰€è°“çš„â€œè¯­ä¹‰æœç´¢â€ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯<strong>è®¡ç®—ä¸¤ä¸ªæ•°ç»„ï¼ˆå‘é‡ï¼‰ä¹‹é—´çš„æ•°å­¦è·ç¦»</strong>ã€‚å¸¸ç”¨çš„ç®—æ³•æ˜¯ <strong>ä½™å¼¦ç›¸ä¼¼åº¦ (Cosine Similarity)</strong> ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>similarity</mtext><mo>=</mo><mi>cos</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>Î¸</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mi>A</mi><mo>â‹…</mo><mi>B</mi></mrow><mrow><mi mathvariant="normal">âˆ¥</mi><mi>A</mi><mi mathvariant="normal">âˆ¥</mi><mi mathvariant="normal">âˆ¥</mi><mi>B</mi><mi mathvariant="normal">âˆ¥</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\text{similarity} = \cos(\theta) = \frac{A \cdot B}{\|A\| \|B\|}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord text"><span class="mord">similarity</span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mop">cos</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.3923em;vertical-align:-0.52em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ¥</span><span class="mord mathnormal mtight">A</span><span class="mord mtight">âˆ¥âˆ¥</span><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span><span class="mord mtight">âˆ¥</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="mbin mtight">â‹…</span><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span></p>
<p>ç»“æœè¶Šæ¥è¿‘ 1ï¼Œè¡¨ç¤ºè¶Šç›¸ä¼¼ã€‚</p>
<h2 data-id="heading-4">å‘é‡æ•°æ®åº“ (Vector DB) -- â€œåæ ‡â€çš„å¼•æ“</h2>
<p>å¦‚æœåªæœ‰å‡ åƒæ¡æ•°æ®ï¼Œä½ æŠŠå‘é‡å­˜åœ¨å†…å­˜é‡Œï¼Œå†™ä¸ª <code>for</code> å¾ªç¯ç®—è·ç¦»ä¹Ÿè¡Œã€‚ä½†å¦‚æœæœ‰ 1 äº¿æ¡æ•°æ®ï¼Œæ¯æ¬¡æŸ¥è¯¢éƒ½è¦ç®— 1 äº¿æ¬¡ä½™å¼¦ç›¸ä¼¼åº¦ï¼ŒCPU ç›´æ¥çˆ†ç‚¸ã€‚</p>
<p>è¿™å°±éœ€è¦ <strong>å‘é‡æ•°æ®åº“</strong></p>
<h3 data-id="heading-5">ä¸å…³ç³»å‹æ•°æ®åº“çš„åŒºåˆ«</h3>
<p>å®ƒå’Œ MySQL çš„æœ¬è´¨åŒºåˆ«</p>
<ul>
<li><strong>MySQL (B+ Tree):</strong> å¯»æ‰¾<strong>ç²¾ç¡®åŒ¹é…</strong>ã€‚åˆ©ç”¨æ ‘ç»“æ„å¿«é€Ÿå®šä½åˆ° <code>ID=100</code> çš„å¶å­èŠ‚ç‚¹ã€‚</li>
<li><strong>Vector DB (ANN):</strong> å¯»æ‰¾<strong>è¿‘ä¼¼æœ€è¿‘é‚»</strong></li>
</ul>






























<table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>ä¼ ç»Ÿæ•°æ®åº“ (MySQL/PostgreSQL)</strong></th><th><strong>å‘é‡æ•°æ®åº“ (Milvus/Weaviate/Pinecone)</strong></th></tr></thead><tbody><tr><td><strong>æŸ¥è¯¢é€»è¾‘</strong></td><td>ç²¾ç¡®åŒ¹é… (Exact Match)</td><td>è¿‘ä¼¼æœ€è¿‘é‚»æœç´¢ (ANN - Approximate Nearest Neighbor)</td></tr><tr><td><strong>æŸ¥è¯¢è¯­å¥</strong></td><td><code>SELECT * FROM table WHERE type='fruit'</code></td><td><code>Search(vector=[0.1, 0.2...], top_k=5)</code></td></tr><tr><td><strong>æ ¸å¿ƒç®—æ³•</strong></td><td>B+ Tree, Hash Index</td><td>HNSW (å›¾ç´¢å¼•), IVF (å€’æ’ç´¢å¼•), Quantization (é‡åŒ–)</td></tr><tr><td><strong>ç»“æœ</strong></td><td>ç¡®å®šçš„è¡Œæ•°æ®</td><td>æœ€ç›¸ä¼¼çš„æ•°æ®åˆ—è¡¨ + ç›¸ä¼¼åº¦å¾—åˆ†</td></tr></tbody></table>
<h3 data-id="heading-6">èº²åœ¨èƒŒåçš„çš‡å¸ï¼ŸHNSW ç´¢å¼•</h3>
<p>è™½ç„¶è¿™ä¸ªå°æ ‡é¢˜æœ‰ç‚¹å“—ä¼—å–å® ï¼Œä½†æ˜¯æˆ‘æ°å¥½æ˜¯æƒ³å€Ÿå…¶æ¥è¡¨è¾¾<strong>HNSW ç´¢å¼•çš„é‡è¦æ€§</strong>ã€‚</p>
<p>å‘é‡åº“ä¸ä¼šçœŸçš„å»ç®— 1 äº¿æ¬¡è·ç¦»ã€‚å®ƒé€šå¸¸ä½¿ç”¨ <strong>HNSW</strong> è¿™ç§å›¾ç´¢å¼•ç®—æ³•ã€‚</p>
<p>ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆâ€œè·³è¡¨â€+â€œç¤¾äº¤ç½‘ç»œâ€ï¼š</p>
<ol>
<li><strong>åˆ†å±‚å¯¼èˆªï¼š</strong> é¡¶å±‚åªæœ‰å°‘æ•°å‡ ä¸ªâ€œæ¢çº½èŠ‚ç‚¹â€ï¼Œåº•å±‚åŒ…å«æ‰€æœ‰æ•°æ®ã€‚</li>
<li><strong>å¿«é€Ÿæ”¶æ•›ï¼š</strong> æŸ¥è¯¢æ—¶ï¼Œå…ˆåœ¨é¡¶å±‚æ‰¾åˆ°å¤§æ¦‚åŒºåŸŸï¼Œç„¶ååƒè·³ä¼ä¸€æ ·è½å…¥ä¸‹ä¸€å±‚ï¼Œé€æ­¥ç¼©å°èŒƒå›´ï¼Œæœ€ç»ˆæ‰¾åˆ°ç¦»ç›®æ ‡æœ€è¿‘çš„ä¸€ç°‡æ•°æ®</li>
</ol>
<h3 data-id="heading-7">å‘é‡æ•°æ®åº“å·¥ä½œä¸€èˆ¬æµç¨‹ï¼Ÿ</h3>
<p>æ¥è®²è®²ä¸€èˆ¬å‘é‡æ•°æ®åº“æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼š</p>
<ul>
<li>
<p><strong>Embeddingï¼ˆåµŒå…¥ï¼‰ï¼š</strong> ä½ çš„åç«¯æœåŠ¡è°ƒç”¨ AI æ¨¡å‹ï¼ˆå¦‚ OpenAIï¼‰ï¼ŒæŠŠç”¨æˆ·çš„ Query å˜æˆå‘é‡ã€‚</p>
</li>
<li>
<p><strong>Indexingï¼ˆç´¢å¼•ï¼‰ï¼š</strong> å‘é‡æ•°æ®åº“ä½¿ç”¨ç®—æ³•ï¼ˆå¦‚ HNSWï¼‰æ„å»ºç´¢å¼•ï¼ŒæŠŠå‘é‡åœ¨ç©ºé—´ä¸­æŒ‰åŒºåŸŸåˆ’åˆ†ã€‚</p>
</li>
<li>
<p><strong>Searchï¼ˆæœç´¢ï¼‰ï¼š</strong> æ•°æ®åº“å¿«é€Ÿå®šä½åˆ°ç›®æ ‡å‘é‡é™„è¿‘çš„åŒºåŸŸï¼Œæ‰¾å‡ºæœ€è¿‘çš„é‚»å±…ï¼Œè€Œä¸æ˜¯å…¨è¡¨æ‰«æã€‚</p>
</li>
</ul>
<h3 data-id="heading-8">å‘é‡æ•°æ®åº“æœ‰å“ªäº›æ¨èï¼Ÿ</h3>
<h4 data-id="heading-9">1. çº¯å‘é‡æ•°æ®åº“ (ä¸“é—¨äº§å“)</h4>
<ul>
<li><strong>Milvus:</strong> <strong>å¼ºçƒˆæ¨èå…³æ³¨ã€‚</strong> å®ƒæ˜¯äº‘åŸç”Ÿæ¶æ„ï¼Œæ ¸å¿ƒéƒ¨åˆ†æ˜¯ç”¨ <strong>Go</strong> å†™çš„ï¼ˆå¯¹ Go å¼€å‘è€…å¾ˆäº²åˆ‡ï¼‰ï¼Œæ€§èƒ½æå¼ºï¼Œå›½å†…ç¤¾åŒºæ´»è·ƒã€‚å®ƒæœ‰å®Œå–„çš„ Java å’Œ Go SDKã€‚</li>
<li><strong>Weaviate:</strong> ä¹Ÿæ˜¯ç”¨ <strong>Go</strong> å†™çš„å¼€æºå‘é‡æ•°æ®åº“ï¼Œæ”¯æŒ GraphQLï¼Œä¸ä»…å­˜å‘é‡ï¼Œè¿˜èƒ½å­˜å¯¹è±¡ã€‚</li>
</ul>
<h4 data-id="heading-10">2. ä¼ ç»Ÿæ•°æ®åº“çš„æ‰©å±• (æ’ä»¶)</h4>
<ul>
<li><strong>Elasticsearch (kNN):</strong> å¦‚æœä½ çš„æ¶æ„é‡Œå·²ç»æœ‰ ESï¼Œå¯ä»¥ç›´æ¥ç”¨å®ƒçš„å‘é‡æœç´¢åŠŸèƒ½ã€‚</li>
<li><strong>PostgreSQL (pgvector):</strong> éå¸¸ç«çš„æ’ä»¶ã€‚å¦‚æœä½ çš„æ•°æ®é‡ä¸æ˜¯ç‰¹åˆ«å·¨å¤§ï¼ˆæ¯”å¦‚åƒä¸‡çº§ä»¥ä¸‹ï¼‰ï¼Œç›´æ¥ç”¨ PG å­˜å‘é‡æ˜¯æœ€çœæ¶æ„æˆæœ¬çš„</li>
</ul>
<h2 data-id="heading-11">å‘é‡æ•°æ®åº“è¿™ä¹ˆç«çš„åŸå› ğŸ§ -- RAGä¸LLM</h2>
<p>ä½œä¸ºåç«¯ï¼Œä½ å¯èƒ½å¬è¯´è¿‡ <strong>RAG (Retrieval-Augmented Generationï¼Œæ£€ç´¢å¢å¼ºç”Ÿæˆ)</strong> ã€‚è¿™æ˜¯å‘é‡æ•°æ®åº“æœ€æ ¸å¿ƒçš„åº”ç”¨åœºæ™¯ã€‚</p>
<p><strong>å¤§æ¨¡å‹ (LLM) çš„ç—›ç‚¹ï¼š</strong></p>
<ul>
<li>å®ƒä¸çŸ¥é“ä½ å…¬å¸çš„ç§æœ‰æ•°æ®ï¼ˆæ¯”å¦‚å†…éƒ¨æ–‡æ¡£ã€ä»£ç åº“ï¼‰ï¼šä¾‹å¦‚å®ƒä¸çŸ¥é“ä½ å…¬å¸ä¸Šå‘¨å‘å¸ƒçš„ã€ŠV3.0 æ¥å£æ–‡æ¡£ã€‹ï¼Œä¹Ÿä¸çŸ¥é“ä»Šå¤©çš„æ–°é—»(ä¸è°ƒç”¨ä»»ä½•toolçš„æƒ…å†µä¸‹)</li>
<li>å®ƒçš„çŸ¥è¯†æœ‰æˆªæ­¢æ—¥æœŸï¼Œå¯¼è‡´äº†å¹»è§‰ï¼šä¸€æœ¬æ­£ç»åœ°èƒ¡è¯´å…«é“ï¼ˆè¿™ä¸ªå¤§å®¶åº”è¯¥æ·±æœ‰ä½“ä¼šğŸ¤“ï¼‰</li>
</ul>
<p><strong>å‘é‡æ•°æ®åº“çš„è§£æ³•ï¼š</strong></p>
<ol>
<li>æŠŠä½ å…¬å¸çš„æ–‡æ¡£åˆ‡ç‰‡ï¼Œå˜æˆå‘é‡ï¼Œå­˜å…¥å‘é‡æ•°æ®åº“ï¼ˆè¿™æ˜¯â€œé•¿æœŸè®°å¿†â€ï¼‰ã€‚</li>
<li>å½“ç”¨æˆ·æé—®æ—¶ï¼Œå…ˆæŠŠé—®é¢˜å˜æˆå‘é‡ã€‚</li>
<li>å»å‘é‡æ•°æ®åº“é‡Œæœå‡ºæœ€ç›¸å…³çš„å‡ æ®µæ–‡æ¡£ã€‚</li>
<li>æŠŠâ€œç”¨æˆ·é—®é¢˜ + æœåˆ°çš„æ–‡æ¡£â€ä¸€èµ·æ‰”ç»™ LLMã€‚</li>
<li>LLM åŸºäºè¿™äº›æ–‡æ¡£å›ç­”é—®é¢˜ã€‚</li>
</ol>
<p>è¿™è®© LLM çœ‹èµ·æ¥åƒæ˜¯è¯»è¿‡ä½ å…¬å¸çš„ç»´åŸºç™¾ç§‘ä¸€æ ·</p>
<h3 data-id="heading-12">RAGçš„æ ‡å‡†æ¶æ„æµç¨‹ï¼Ÿ</h3>
<h4 data-id="heading-13">é˜¶æ®µä¸€ï¼šæ•°æ®å…¥åº“</h4>
<p>è¿™æ˜¯ä¸€ä¸ªç¦»çº¿æˆ–å¼‚æ­¥ä»»åŠ¡ã€‚</p>
<ol>
<li><strong>åŠ è½½ (Load):</strong> è¯»å– PDF/Word/Markdown æ–‡æ¡£ã€‚</li>
<li><strong>åˆ‡ç‰‡ (Chunking):</strong> <strong>è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚</strong> ä½ ä¸èƒ½æŠŠæ•´æœ¬ä¹¦å­˜æˆä¸€ä¸ªå‘é‡ã€‚ä½ éœ€è¦æŠŠæ–‡æœ¬æŒ‰è¯­ä¹‰ï¼ˆæˆ–å›ºå®šå­—ç¬¦æ•°ï¼Œå¦‚ 500 å­—ï¼‰åˆ‡æˆå°å—ã€‚</li>
<li><strong>åµŒå…¥ (Embedding):</strong> è°ƒç”¨ OpenAI API æˆ–æœ¬åœ°æ¨¡å‹ï¼ŒæŠŠæ¯ä¸ª Chunk å˜æˆå‘é‡ <code>[]float32</code>ã€‚</li>
<li><strong>å­˜å‚¨ (Upsert):</strong> å°† <code>(Vector, Chunk_Text, Metadata)</code> å­˜å…¥å‘é‡æ•°æ®åº“ï¼ˆå¦‚ Milvusï¼‰</li>
</ol>
<h4 data-id="heading-14">é˜¶æ®µäºŒï¼šåœ¨çº¿æ£€ç´¢ä¸ç”Ÿæˆ</h4>
<p>è¿™æ˜¯ç”¨æˆ·å‘èµ·è¯·æ±‚æ—¶çš„åŒæ­¥æµç¨‹ã€‚</p>
<ol>
<li><strong>é—®é¢˜åµŒå…¥:</strong> ç”¨æˆ·é—®ï¼šâ€œV3 æ¥å£æ€ä¹ˆé‰´æƒï¼Ÿâ€ -&gt; è°ƒç”¨æ¨¡å‹è½¬æˆå‘é‡ <code>Query_Vector</code>ã€‚</li>
<li><strong>å‘é‡æ£€ç´¢:</strong> æ‹¿ <code>Query_Vector</code> å»å‘é‡åº“æœ Top 3 æœ€ç›¸ä¼¼çš„ Chunksã€‚</li>
<li><strong>Prompt ç»„è£…:</strong></li>
</ol>
<pre><code class="hljs language-Plaintext" lang="Plaintext">ä½ æ˜¯ä¸€ä¸ªæŠ€æœ¯æ”¯æŒåŠ©æ‰‹ã€‚è¯·æ ¹æ®ä»¥ä¸‹å·²çŸ¥ä¿¡æ¯å›ç­”ç”¨æˆ·é—®é¢˜ã€‚

å·²çŸ¥ä¿¡æ¯ï¼š
1. ... (æ£€ç´¢åˆ°çš„ Chunk 1)
2. ... (æ£€ç´¢åˆ°çš„ Chunk 2)

ç”¨æˆ·é—®é¢˜ï¼šV3 æ¥å£æ€ä¹ˆé‰´æƒï¼Ÿ
</code></pre>
<p>4.<strong>LLM ç”Ÿæˆ:</strong> å°†ç»„è£…å¥½çš„ Prompt å‘ç»™ GPTï¼Œå¾—åˆ°æœ€ç»ˆç­”æ¡ˆ</p>
<h3 data-id="heading-15">æ½œåœ¨è¸©å‘ç‚¹ğŸ˜µ</h3>
<p>åœ¨ Demo é˜¶æ®µï¼Œä¸Šé¢çš„æµç¨‹è·‘å¾—å¾ˆé¡ºã€‚ä½†åœ¨ç”Ÿäº§ç¯å¢ƒï¼Œä½ ä¼šé‡åˆ°ä»¥ä¸‹é—®é¢˜ï¼Œè¿™ä¹Ÿæ˜¯åç«¯å·¥ç¨‹å¸ˆçš„ä»·å€¼æ‰€åœ¨ï¼š</p>
<h4 data-id="heading-16">1. åˆ‡ç‰‡ç­–ç•¥ (Chunking Strategy)</h4>
<ul>
<li><strong>é—®é¢˜ï¼š</strong> å¦‚æœåˆ‡ç‰‡å¤ªå°ï¼Œä¸Šä¸‹æ–‡ä¸¢å¤±ï¼›å¦‚æœåˆ‡ç‰‡å¤ªå¤§ï¼Œå™ªéŸ³å¤ªå¤šä¸”ä¸ä»…å  Tokenã€‚</li>
<li><strong>è§£æ³•ï¼š</strong> ä½¿ç”¨ <code>RecursiveCharacterTextSplitter</code>ï¼Œå¹¶è®¾ç½® <strong>Overlap (é‡å )</strong> ã€‚æ¯”å¦‚æ¯å— 500 å­—ï¼Œå—ä¸å—ä¹‹é—´é‡å  50 å­—ï¼Œä¿è¯å¥å­æ²¡è¢«åˆ‡æ–­ã€‚</li>
</ul>
<h4 data-id="heading-17">2. æ··åˆæ£€ç´¢ (Hybrid Search)</h4>
<ul>
<li><strong>é—®é¢˜ï¼š</strong> ç”¨æˆ·æœå…·ä½“çš„â€œé”™è¯¯ç  10045â€ã€‚å‘é‡æœç´¢å¯èƒ½æ‰¾å‡ºä¸€å †â€œé”™è¯¯â€ã€â€œå¼‚å¸¸â€ç›¸å…³çš„æ–‡æ¡£ï¼Œä½†ååæ¼äº†åŒ…å«â€œ10045â€è¿™ä¸ªæ•°å­—çš„æ–‡æ¡£ï¼ˆå› ä¸ºå‘é‡å…³æ³¨çš„æ˜¯è¯­ä¹‰ï¼Œå¯¹ç²¾ç¡®æ•°å­—æœ‰æ—¶ä¸æ•æ„Ÿï¼‰ã€‚</li>
<li><strong>è§£æ³•ï¼š</strong> <strong>å‘é‡æ£€ç´¢ (è¯­ä¹‰) + å…³é”®è¯æ£€ç´¢ (BM25)</strong> åŒæ—¶è¿›è¡Œï¼Œç„¶åä½¿ç”¨ <strong>RRF (Reciprocal Rank Fusion)</strong> ç®—æ³•å¯¹ç»“æœè¿›è¡ŒåŠ æƒé‡æ–°æ’åºã€‚</li>
</ul>
<h4 data-id="heading-18">3. å…ƒæ•°æ®è¿‡æ»¤ (Metadata Filtering)</h4>
<ul>
<li><strong>é—®é¢˜ï¼š</strong> ä½ å­˜äº†å…¨å…¬å¸çš„æ–‡æ¡£ã€‚ä½†â€œè´¢åŠ¡éƒ¨â€çš„æ–‡æ¡£ä¸èƒ½è¢«â€œç ”å‘éƒ¨â€çš„äººæœåˆ°ã€‚</li>
<li><strong>è§£æ³•ï¼š</strong> åœ¨å­˜å‘é‡æ—¶ï¼Œå†™å…¥ Metadataï¼š<code>{"dept": "finance"}</code>ã€‚åœ¨æŸ¥è¯¢å‘é‡åº“æ—¶ï¼Œå¸¦ä¸Š <code>filter: "dept == 'finance'"</code>ã€‚<strong>å…ˆè¿‡æ»¤ï¼Œå†åšå‘é‡è¿‘ä¼¼æœç´¢</strong>ã€‚</li>
</ul>
<h2 data-id="heading-19">æ€»ç»“â¤ï¸</h2>
<p>ä»<strong>å‘é‡</strong>åˆ°<strong>å‘é‡æ•°æ®åº“</strong>ï¼Œå†åˆ°<strong>RAG</strong>ï¼Œæœ¬è´¨ä¸Šæ˜¯æˆ‘ä»¬é€ƒå‡ºäº†ç»“æ„åŒ–æ€ç»´ï¼Œå¯¹æ•°æ®å¤„ç†æ–¹å¼çš„ä¸€æ¬¡å‡ç»´ï¼š</p>
<ol>
<li><strong>å‘é‡</strong>æ˜¯æ•°æ®çš„<strong>è¯­ä¹‰å‹ç¼©</strong>ã€‚</li>
<li><strong>å‘é‡æ•°æ®åº“</strong>æ˜¯è¯­ä¹‰æ•°æ®çš„<strong>é«˜æ€§èƒ½ç´¢å¼•</strong>ã€‚</li>
<li><strong>RAG</strong> æ˜¯è¿æ¥<strong>é™æ€æ•°æ®</strong>ä¸<strong>åŠ¨æ€æ™ºèƒ½</strong>çš„æ¡¥æ¢ã€‚</li>
</ol>
<p>å¯¹äº Java/Go å¼€å‘è€…æ¥è¯´ï¼Œç°åœ¨çš„æœºä¼šåœ¨äºï¼šä¸è¦åªç›¯ç€ LLM çš„ API è°ƒç”¨ï¼Œè€Œæ˜¯å»å»ºè®¾<strong>é«˜è´¨é‡çš„æ•°æ®ç®¡é“ (Data Pipeline)</strong> ã€‚å› ä¸ºåœ¨ RAG æ¶æ„ä¸­ï¼Œ<strong>æ£€ç´¢çš„è´¨é‡ï¼ˆæ•°æ®åˆ‡å¾—å¥½ä¸å¥½ã€æœå¾—å‡†ä¸å‡†ï¼‰ç›´æ¥å†³å®šäº†æœ€ç»ˆå›ç­”çš„è´¨é‡</strong>ã€‚</p>
<p>å¦‚æœä½ è§‰å¾—æˆ‘å†™çš„å¥½ï¼Œå°±ç‚¹èµæ”¶è—å…³æ³¨ï¼Œè¿™æ˜¯æˆ‘æ›´æ–°çš„æœ€å¤§åŠ¨åŠ›ï¼ï¼ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è™šæ‹Ÿå†…å­˜ä¸å¯»å€æ–¹å¼è§£æ(é¢è¯•ç‰ˆ)]]></title>    <link>https://juejin.cn/post/7585395972294197257</link>    <guid>https://juejin.cn/post/7585395972294197257</guid>    <pubDate>2025-12-19T12:15:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7585395972294197257" data-draft-id="7585121055036686386" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è™šæ‹Ÿå†…å­˜ä¸å¯»å€æ–¹å¼è§£æ(é¢è¯•ç‰ˆ)"/> <meta itemprop="keywords" content="åç«¯,æ“ä½œç³»ç»Ÿ,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-19T12:15:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æƒ³ç”¨offeræ‰“ç‰Œ"/> <meta itemprop="url" content="https://juejin.cn/user/578781641968972"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è™šæ‹Ÿå†…å­˜ä¸å¯»å€æ–¹å¼è§£æ(é¢è¯•ç‰ˆ)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/578781641968972/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æƒ³ç”¨offeræ‰“ç‰Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-19T12:15:06.000Z" title="Fri Dec 19 2025 12:15:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.8;font-weight:400;font-size:16px;word-spacing:2px;letter-spacing:2px;overflow-x:hidden;color:#3e3e3e;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:1.2em;border-bottom:2px solid #ef7060;word-spacing:0!important;letter-spacing:0!important;font-size:inherit;line-height:inherit;display:block;font-weight:400;background:#ef7060;color:#fff;padding:10px;border-top-right-radius:3px;border-top-left-radius:3px;margin-right:3px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<blockquote>
<p>è™šæ‹Ÿå†…å­˜å’Œç‰©ç†å†…å­˜çš„åŒºåˆ«ï¼Ÿå®ƒä»¬ä¹‹é—´æ˜¯æ€ä¹ˆå¯¹åº”çš„ï¼Ÿæ®µå¼ã€é¡µå¼ã€æ®µé¡µå¼åˆ†åˆ«æ˜¯æ€ä¹ˆå¯»å€çš„ï¼Ÿè¿™æ˜¯ä¸€ä¸ªéå¸¸ç»å…¸çš„æ“ä½œç³»ç»Ÿåº•å±‚é—®é¢˜ï¼Œå¯¹äºåç«¯å¼€å‘ï¼ˆJava/Goï¼‰æ¥è¯´ï¼Œç†è§£å®ƒæ˜¯è¿›è¡Œæ€§èƒ½è°ƒä¼˜ï¼ˆå¦‚æ’æŸ¥ OOMã€ç†è§£ GC è¡Œä¸ºã€æ•°æ®åº“ç¼“å­˜æœºåˆ¶ï¼‰çš„åŸºçŸ³ã€‚åŒæ—¶è¿™ä¹Ÿæ˜¯å¤§å‚é¢è¯•çš„å¸¸è€ƒé¢˜ï¼Œä¸‹é¢è®©æˆ‘ä»¬ä¸€èµ·æ¢è®¨ã€‚</p>
</blockquote>
<h2 data-id="heading-1">è™šæ‹Ÿå†…å­˜ä¸ç‰©ç†å†…å­˜</h2>
<ul>
<li>ç‰©ç†å†…å­˜ï¼šç‰©ç†å†…å­˜æ˜¯æŒ‡è®¡ç®—æœºä¸­å®é™…å­˜åœ¨çš„ç¡¬ä»¶å†…å­˜ï¼Œç”±å†…å­˜æ¡ç­‰ç¡¬ä»¶ç»„æˆ</li>
<li>è™šæ‹Ÿå†…å­˜ï¼šç”±æ“ä½œç³»ç»Ÿæä¾›ï¼Œä¸ºæ¯ä¸ªè¿›ç¨‹åˆ›å»ºä¸€ä¸ª<strong>ç‹¬ç«‹çš„ã€è¿ç»­çš„åœ°å€ç©ºé—´</strong>ï¼Œç©ºé—´å¤§å°å¯ä»¥è¿œè¿œå¤§äºç‰©ç†å†…å­˜ã€‚æ¯ä¸ªè¿›ç¨‹éƒ½è®¤ä¸ºè‡ªå·±æ‹¥æœ‰ç‹¬ç«‹ã€è¿ç»­çš„å†…å­˜ç©ºé—´ã€‚ä¸”æ¯ä¸ªè¿›ç¨‹çš„è™šæ‹Ÿç©ºé—´éƒ½æ˜¯<strong>ç‹¬ç«‹éš”ç¦»</strong>çš„</li>
</ul>
<p><strong>ä½¿ç”¨è™šæ‹Ÿå†…å­˜çš„å¥½å¤„ï¼Ÿ</strong></p>
<ul>
<li>æä¾›<strong>å†…å­˜éš”ç¦»</strong>ï¼šæ¯ä¸ªè¿›ç¨‹ä»¥ä¸ºè‡ªå·±ç‹¬å æ•´ä¸ªå†…å­˜ç©ºé—´ï¼Œäº’ä¸å¹²æ‰°ï¼Œè¿™è§£å†³äº†å¤šè¿›ç¨‹ä¹‹é—´åœ°å€å†²çªçš„é—®é¢˜ï¼›</li>
<li>æ”¯æŒ<strong>æ¯”ç‰©ç†å†…å­˜æ›´å¤§çš„åœ°å€ç©ºé—´</strong>ï¼ˆä¾‹å¦‚32ä½ç³»ç»Ÿæ”¯æŒ4GBè™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œå³ä½¿ç‰©ç†å†…å­˜åªæœ‰2GBï¼‰ï¼Œå› ä¸ºç¨‹åºè¿è¡Œç¬¦åˆå±€éƒ¨æ€§åŸç†ï¼ŒCPU è®¿é—®å†…å­˜ä¼šæœ‰å¾ˆæ˜æ˜¾çš„é‡å¤è®¿é—®çš„å€¾å‘æ€§ï¼Œå¯¹äºé‚£äº›æ²¡æœ‰è¢«ç»å¸¸ä½¿ç”¨åˆ°çš„å†…å­˜ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒæ¢å‡ºåˆ°ç‰©ç†å†…å­˜ä¹‹å¤–ï¼Œæ¯”å¦‚ç¡¬ç›˜ä¸Šçš„ swap åŒºåŸŸï¼›</li>
<li>å®ç°<strong>æŒ‰éœ€åŠ è½½</strong>ï¼ˆDemand Pagingï¼‰å’Œ<strong>å†…å­˜ä¿æŠ¤</strong>ï¼›</li>
<li>ç®€åŒ–ç¨‹åºå¼€å‘ï¼Œç¨‹åºå‘˜æ— éœ€å…³å¿ƒç‰©ç†å†…å­˜å¸ƒå±€ã€‚</li>
</ul>
<p>ç®€å•æ¥è¯´ï¼Œ<strong>ç‰©ç†å†…å­˜æ˜¯ç¡¬ä»¶çœŸç›¸ï¼Œè™šæ‹Ÿå†…å­˜æ˜¯æ“ä½œç³»ç»Ÿç¼–ç»‡çš„â€œè°è¨€â€ï¼ˆæŠ½è±¡å±‚ï¼‰ã€‚</strong></p>



































<table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>ç‰©ç†å†…å­˜ (Physical Memory)</strong></th><th><strong>è™šæ‹Ÿå†…å­˜ (Virtual Memory)</strong></th></tr></thead><tbody><tr><td><strong>æœ¬è´¨</strong></td><td>çœŸå®çš„ç¡¬ä»¶è®¾å¤‡ï¼ˆRAM å†…å­˜æ¡ï¼‰ã€‚</td><td>æ“ä½œç³»ç»Ÿæä¾›çš„é€»è¾‘æŠ½è±¡å±‚ã€‚</td></tr><tr><td><strong>å¤§å°</strong></td><td>å—é™äºç¡¬ä»¶å®¹é‡ï¼ˆå¦‚ 16GB, 32GBï¼‰ã€‚</td><td>å—é™äº CPU å­—é•¿ï¼ˆ32ä½ç³»ç»Ÿ4GBï¼Œ64ä½ç³»ç»Ÿç†è®ºæå¤§ï¼‰ã€‚</td></tr><tr><td><strong>åœ°å€ç©ºé—´</strong></td><td>å…¨å±€å”¯ä¸€ï¼Œæ‰€æœ‰ç¨‹åºå…±äº«è¿™å—ç¡¬ä»¶ã€‚</td><td><strong>è¿›ç¨‹éš”ç¦»</strong>ã€‚æ¯ä¸ªè¿›ç¨‹éƒ½è®¤ä¸ºè‡ªå·±æ‹¥æœ‰ç‹¬ç«‹ã€è¿ç»­çš„å†…å­˜ç©ºé—´ã€‚</td></tr><tr><td><strong>å¯è§æ€§</strong></td><td>æ“ä½œç³»ç»Ÿå†…æ ¸å’Œç¡¬ä»¶ç›´æ¥è®¿é—®ã€‚</td><td>åº”ç”¨ç¨‹åºï¼ˆJava/Go è¿›ç¨‹ï¼‰ç›´æ¥çœ‹åˆ°çš„å†…å­˜ã€‚</td></tr><tr><td><strong>ä¸»è¦ä½œç”¨</strong></td><td>å­˜å‚¨å®é™…çš„æ•°æ®å’ŒæŒ‡ä»¤ã€‚</td><td>éš”ç¦»è¿›ç¨‹ã€ç®€åŒ–å†…å­˜ç®¡ç†ã€å®ç°å†…å­˜è¶…å”®ï¼ˆSwap/Pagefileï¼‰ã€‚</td></tr></tbody></table>
<p><strong>åç«¯è§†è§’ï¼š</strong> å½“ä½ åœ¨ Java ä¸­ <code>new Object()</code> æˆ–åœ¨ Go ä¸­ <code>make([]int)</code> æ—¶ï¼Œåˆ†é…çš„åœ°å€ï¼ˆå¦‚ <code>0x4f00123</code>ï¼‰å…¨éƒ½æ˜¯<strong>è™šæ‹Ÿåœ°å€</strong>ã€‚ä½ æ°¸è¿œæ— æ³•ç›´æ¥è§¦ç¢°ç‰©ç†å†…å­˜åœ°å€</p>
<h2 data-id="heading-2">è™šæ‹Ÿå†…å­˜ä¸ç‰©ç†å†…å­˜ä¹‹é—´æ˜¯å¦‚ä½•å¯¹åº”çš„ï¼Ÿ</h2>
<p>è™šæ‹Ÿå†…å­˜å’Œç‰©ç†å†…å­˜ä¹‹é—´çš„æ¡¥æ¢æ˜¯ <strong>MMUï¼ˆMemory Management Unitï¼Œå†…å­˜ç®¡ç†å•å…ƒï¼‰</strong> ã€‚è¿™æ˜¯ä¸€ä¸ªé›†æˆåœ¨ CPU ä¸­çš„ç¡¬ä»¶å•å…ƒã€‚</p>
<ul>
<li><strong>æ˜ å°„è¡¨ï¼š</strong> æ“ä½œç³»ç»Ÿåœ¨å†…å­˜ä¸­ç»´æŠ¤ç€æ˜ å°„è¡¨ï¼ˆé¡µè¡¨æˆ–æ®µè¡¨ï¼‰ï¼Œè®°å½•äº†â€œè™šæ‹Ÿåœ°å€ X å¯¹åº” ç‰©ç†åœ°å€ Yâ€ã€‚</li>
<li><strong>è½¬æ¢è¿‡ç¨‹ï¼š</strong> å½“ CPU æ‰§è¡ŒæŒ‡ä»¤è¦è®¿é—®æŸä¸ªè™šæ‹Ÿåœ°å€æ—¶ï¼ŒMMU ä¼šè‡ªåŠ¨æŸ¥è¯¢æ˜ å°„è¡¨ï¼Œå°†å…¶è½¬æ¢ä¸ºç‰©ç†åœ°å€ï¼Œç„¶åå‘ç»™å†…å­˜æ¡è¯»å–æ•°æ®ã€‚</li>
<li><strong>ç¼ºé¡µä¸­æ–­ (Page Fault)ï¼š</strong> å¦‚æœ MMU å‘ç°æ•°æ®ä¸åœ¨ç‰©ç†å†…å­˜ä¸­ï¼ˆå¯èƒ½åœ¨ç£ç›˜ Swap åˆ†åŒºé‡Œï¼‰ï¼Œä¼šè§¦å‘ä¸­æ–­å¼‚å¸¸ï¼Œæ“ä½œç³»ç»Ÿä¼šæŠŠæ•°æ®ä»ç£ç›˜åŠ è½½åˆ°ç‰©ç†å†…å­˜ï¼Œæ›´æ–°æ˜ å°„è¡¨ï¼Œç„¶åé‡è¯•</li>
</ul>
<h2 data-id="heading-3">ä¸‰ç§å¯»å€æ–¹å¼è¯¦è§£</h2>
<p>ä¸åŒçš„æ“ä½œç³»ç»Ÿé‡‡ç”¨ä¸åŒçš„æ–¹å¼æ¥ç®¡ç†è¿™ç§æ˜ å°„ï¼Œä¸»è¦åˆ†ä¸ºæ®µå¼ã€é¡µå¼å’Œæ®µé¡µå¼ã€‚</p>
<h3 data-id="heading-4">æ®µå¼å‚¨å­˜(Segmentation) â€”â€” æŒ‰é€»è¾‘åˆ†å—</h3>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šæŒ‰ç…§ç¨‹åºçš„é€»è¾‘ç»“æ„åˆ’åˆ†ã€‚æ¯”å¦‚æŠŠç¨‹åºåˆ†ä¸ºâ€œä»£ç æ®µâ€ã€â€œæ•°æ®æ®µâ€ã€â€œæ ˆæ®µâ€ã€‚<strong>æ¯ä¸€æ®µçš„å¤§å°æ˜¯ä¸å›ºå®šçš„</strong>ã€‚</p>
<ul>
<li>
<p><strong>è™šæ‹Ÿåœ°å€ç»“æ„</strong>ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>&lt;</mo><mtext>æ®µå·</mtext><mo stretchy="false">(</mo><mi>S</mi><mi>e</mi><mi>g</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mtext>Â </mtext><mi>S</mi><mi>e</mi><mi>l</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>o</mi><mi>r</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mtext>æ®µå†…åç§»é‡</mtext><mo stretchy="false">(</mo><mi>O</mi><mi>f</mi><mi>f</mi><mi>s</mi><mi>e</mi><mi>t</mi><mo stretchy="false">)</mo><mo>&gt;</mo></mrow><annotation encoding="application/x-tex">&lt;æ®µå· (Segment\ Selector), æ®µå†…åç§»é‡ (Offset)&gt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"/><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord cjk_fallback">æ®µå·</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">m</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mspace">Â </span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">ec</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">or</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord cjk_fallback">æ®µå†…åç§»é‡</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mord mathnormal" style="margin-right:0.10764em;">ff</span><span class="mord mathnormal">se</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">&gt;</span></span></span></span></span></p>
</li>
<li>
<p><strong>å¯»å€è¿‡ç¨‹</strong>ï¼š</p>
<ol>
<li>
<p>æ ¹æ®<strong>æ®µå·</strong>å»æŸ¥<strong>æ®µè¡¨ (Segment Table)</strong> ã€‚</p>
</li>
<li>
<p>æ®µè¡¨ä¸­è®°å½•äº†è¯¥æ®µçš„<strong>åŸºå€ (Base Address)</strong> å’Œ <strong>æ®µé•¿ (Limit)</strong> ã€‚</p>
</li>
<li>
<p><strong>è¶Šç•Œæ£€æŸ¥</strong>ï¼šæ£€æŸ¥ <code>åç§»é‡</code> æ˜¯å¦è¶…è¿‡äº† <code>æ®µé•¿</code>ï¼Œè¶…è¿‡åˆ™æŠ¥é”™ï¼ˆSegfaultï¼‰ã€‚</p>
</li>
<li>
<p><strong>è®¡ç®—ç‰©ç†åœ°å€</strong>ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>ç‰©ç†åœ°å€</mtext><mo>=</mo><mtext>æ®µåŸºå€</mtext><mo>+</mo><mtext>åç§»é‡</mtext></mrow><annotation encoding="application/x-tex">ç‰©ç†åœ°å€ = æ®µåŸºå€ + åç§»é‡</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord cjk_fallback">ç‰©ç†åœ°å€</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"/><span class="mord cjk_fallback">æ®µåŸºå€</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord cjk_fallback">åç§»é‡</span></span></span></span></span></p>
</li>
</ol>
</li>
<li>
<p><strong>ä¼˜ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li><em>ä¼˜ç‚¹</em>ï¼šç¬¦åˆç¨‹åºå‘˜æ€ç»´ï¼Œæ–¹ä¾¿ä»£ç å…±äº«å’Œä¿æŠ¤ã€‚</li>
<li><em>ç¼ºç‚¹</em>ï¼š<strong>å¤–éƒ¨ç¢ç‰‡</strong>ã€‚å› ä¸ºæ®µçš„å¤§å°ä¸ä¸€ï¼Œå†…å­˜ä¸­ä¼šç•™ä¸‹è®¸å¤šå¡ä¸è¿›æ–°æ®µçš„å°ç©ºéš™ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-5">é¡µå¼å­˜å‚¨ (Paging) â€”â€” æŒ‰å›ºå®šå¤§å°åˆ†å—</h3>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šå°†ç‰©ç†å†…å­˜å’Œè™šæ‹Ÿå†…å­˜éƒ½åˆ‡æˆ<strong>å›ºå®šå¤§å°</strong>çš„å—ï¼ˆé€šå¸¸æ˜¯ 4KBï¼‰ã€‚ç‰©ç†å†…å­˜å—å«<strong>é¡µæ¡† (Page Frame)</strong> ï¼Œè™šæ‹Ÿå†…å­˜å—å«<strong>é¡µ (Page)</strong> ã€‚</p>
<ul>
<li>
<p><strong>è™šæ‹Ÿåœ°å€ç»“æ„</strong>ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>&lt;</mo><mtext>é¡µå·</mtext><mo stretchy="false">(</mo><mi>V</mi><mi>P</mi><mi>N</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mtext>é¡µå†…åç§»é‡</mtext><mo stretchy="false">(</mo><mi>O</mi><mi>f</mi><mi>f</mi><mi>s</mi><mi>e</mi><mi>t</mi><mo stretchy="false">)</mo><mo>&gt;</mo></mrow><annotation encoding="application/x-tex">&lt;é¡µå· (VPN), é¡µå†…åç§»é‡ (Offset)&gt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"/><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord cjk_fallback">é¡µå·</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mord mathnormal" style="margin-right:0.10903em;">PN</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord cjk_fallback">é¡µå†…åç§»é‡</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mord mathnormal" style="margin-right:0.10764em;">ff</span><span class="mord mathnormal">se</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">&gt;</span></span></span></span></span></p>
</li>
<li>
<p><strong>å¯»å€è¿‡ç¨‹</strong>ï¼š</p>
<ol>
<li>
<p>æ ¹æ®<strong>é¡µå·</strong>å»æŸ¥<strong>é¡µè¡¨ (Page Table)</strong> ã€‚</p>
</li>
<li>
<p>é¡µè¡¨ä¸­è®°å½•äº†è¯¥é¡µå¯¹åº”çš„<strong>ç‰©ç†é¡µæ¡†å· (PPN)</strong> ã€‚</p>
</li>
<li>
<p><strong>è®¡ç®—ç‰©ç†åœ°å€</strong>ï¼šç›´æ¥æ‹¼æ¥ã€‚</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>ç‰©ç†åœ°å€</mtext><mo>=</mo><mtext>ç‰©ç†é¡µæ¡†å·</mtext><mo>Ã—</mo><mtext>é¡µå¤§å°</mtext><mo>+</mo><mtext>åç§»é‡</mtext></mrow><annotation encoding="application/x-tex">ç‰©ç†åœ°å€ = ç‰©ç†é¡µæ¡†å· \times é¡µå¤§å° + åç§»é‡</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord cjk_fallback">ç‰©ç†åœ°å€</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"/><span class="mord cjk_fallback">ç‰©ç†é¡µæ¡†å·</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"/><span class="mord cjk_fallback">é¡µå¤§å°</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord cjk_fallback">åç§»é‡</span></span></span></span></span></p>
</li>
</ol>
<ul>
<li><em>æ³¨ï¼šå®é™…ç¡¬ä»¶ä¸­é€šå¸¸æ˜¯ç›´æ¥æ‹¼æ¥äºŒè¿›åˆ¶ä½ã€‚</em></li>
</ul>
</li>
<li>
<p><strong>ä¼˜ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li><em>ä¼˜ç‚¹</em>ï¼šè§£å†³äº†å¤–éƒ¨ç¢ç‰‡é—®é¢˜ï¼Œå†…å­˜åˆ©ç”¨ç‡é«˜ã€‚</li>
<li><em>ç¼ºç‚¹</em>ï¼š<strong>å†…éƒ¨ç¢ç‰‡</strong>ï¼ˆæœ€åä¸€é¡µæ²¡å¡«æ»¡ï¼‰ï¼›é¡µè¡¨å¯èƒ½å¾ˆå¤§ï¼ˆéœ€è¦å¤šçº§é¡µè¡¨ï¼‰ï¼›é¢‘ç¹è®¿é—®å†…å­˜ï¼ˆéœ€è¦ TLB åŠ é€Ÿï¼‰ã€‚</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>ç°ä»£ä¸»æµ OSï¼ˆLinux, Windowsï¼‰ä¸»è¦åŸºäºé¡µå¼ç®¡ç†</strong>ï¼ˆå°½ç®¡ x86 ç¡¬ä»¶ä¿ç•™äº†åˆ†æ®µæœºåˆ¶ï¼Œä½† Linux ä¸»è¦å°†å…¶æ—è·¯æ‰ï¼Œåªç”¨åˆ†é¡µï¼‰ã€‚</p>
</blockquote>
<h3 data-id="heading-6">æ®µé¡µå¼å­˜å‚¨ (Segmented Paging) â€”â€” é›†å¤§æˆè€…</h3>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šå…ˆå°†ç¨‹åºæŒ‰é€»è¾‘<strong>åˆ†æ®µ</strong>ï¼Œå†æŠŠæ¯ä¸ªæ®µ<strong>åˆ†é¡µ</strong>ã€‚è¿™æ˜¯ä¸ºäº†ç»“åˆä¸¤è€…çš„ä¼˜ç‚¹ã€‚</p>
<ul>
<li>
<p><strong>è™šæ‹Ÿåœ°å€ç»“æ„</strong>ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>&lt;</mo><mtext>æ®µå·</mtext><mo separator="true">,</mo><mtext>æ®µå†…é¡µå·</mtext><mo separator="true">,</mo><mtext>é¡µå†…åç§»é‡</mtext><mo>&gt;</mo></mrow><annotation encoding="application/x-tex">&lt;æ®µå·, æ®µå†…é¡µå·, é¡µå†…åç§»é‡&gt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"/><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord cjk_fallback">æ®µå·</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord cjk_fallback">æ®µå†…é¡µå·</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord cjk_fallback">é¡µå†…åç§»é‡</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">&gt;</span></span></span></span></span></p>
</li>
<li>
<p><strong>å¯»å€è¿‡ç¨‹</strong>ï¼ˆéœ€è¦ä¸‰æ¬¡å†…å­˜è®¿é—®ï¼Œæ¯”è¾ƒæ…¢ï¼Œå¿…é¡»ä¾èµ–ç¡¬ä»¶ç¼“å­˜ï¼‰ï¼š</p>
<ol>
<li>
<p>æ ¹æ®<strong>æ®µå·</strong>æŸ¥<strong>æ®µè¡¨</strong>ï¼Œå¾—åˆ°è¯¥æ®µçš„<strong>é¡µè¡¨èµ·å§‹åœ°å€</strong>ã€‚</p>
</li>
<li>
<p>æ ¹æ®<strong>æ®µå†…é¡µå·</strong>æŸ¥<strong>é¡µè¡¨</strong>ï¼Œå¾—åˆ°<strong>ç‰©ç†é¡µæ¡†å·</strong>ã€‚</p>
</li>
<li>
<p><strong>è®¡ç®—ç‰©ç†åœ°å€</strong>ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>ç‰©ç†åœ°å€</mtext><mo>=</mo><mtext>ç‰©ç†é¡µæ¡†å·</mtext><mo>+</mo><mtext>é¡µå†…åç§»é‡</mtext></mrow><annotation encoding="application/x-tex">ç‰©ç†åœ°å€ = ç‰©ç†é¡µæ¡†å· + é¡µå†…åç§»é‡</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord cjk_fallback">ç‰©ç†åœ°å€</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"/><span class="mord cjk_fallback">ç‰©ç†é¡µæ¡†å·</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord cjk_fallback">é¡µå†…åç§»é‡</span></span></span></span></span></p>
</li>
</ol>
</li>
</ul>
<h2 data-id="heading-7">æ€»ç»“</h2>
<p>è¿™å¼ å›¾è¡¨å±•ç¤ºäº†ä¸‰ç§å¯»å€æ–¹å¼çš„å¯¹æ¯”</p>

































<table><thead><tr><th><strong>æ–¹å¼</strong></th><th><strong>å•ä½å¤§å°</strong></th><th><strong>ç¢ç‰‡ç±»å‹</strong></th><th><strong>å¯»å€å¤æ‚åº¦</strong></th><th><strong>é€‚ç”¨åœºæ™¯</strong></th></tr></thead><tbody><tr><td><strong>æ®µå¼</strong></td><td>ä¸å®šï¼ˆæŒ‰é€»è¾‘ï¼‰</td><td>å¤–éƒ¨ç¢ç‰‡</td><td>ä¸­</td><td>æ—©æœŸç³»ç»Ÿï¼Œä¾¿äºå…±äº«ä¿æŠ¤</td></tr><tr><td><strong>é¡µå¼</strong></td><td>å›ºå®šï¼ˆå¦‚ 4KBï¼‰</td><td>å†…éƒ¨ç¢ç‰‡</td><td>ä½ï¼ˆç¡¬ä»¶æ˜“å®ç°ï¼‰</td><td><strong>ç°ä»£ä¸»æµ OSï¼ˆLinuxï¼‰</strong></td></tr><tr><td><strong>æ®µé¡µå¼</strong></td><td>å›ºå®š</td><td>å†…éƒ¨ç¢ç‰‡</td><td>é«˜ï¼ˆå¤šæ¬¡æŸ¥è¡¨ï¼‰</td><td>å¤æ‚ç³»ç»Ÿæ¶æ„</td></tr></tbody></table>
<p>åœ¨æ—¥å¸¸åç«¯å¼€å‘ï¼Œå“ªé‡Œæœ‰å†…å­˜ç®¡ç†ä¸å¯»å€çš„çŸ¥è¯†è¿ç”¨å‘¢ï¼Ÿ</p>
<ul>
<li>
<p><strong>GC ä¸ å†…å­˜æ•´ç†</strong>ï¼šJava çš„ GC ç®—æ³•ï¼ˆå¦‚ G1, ZGCï¼‰åœ¨å¤„ç†å †å†…å­˜æ—¶ï¼Œå®é™…ä¸Šæ˜¯åœ¨æ•´ç†<strong>è™šæ‹Ÿå†…å­˜</strong>ã€‚åº•å±‚çš„æ“ä½œç³»ç»Ÿä¼šé€šè¿‡é¡µè¡¨æ˜ å°„ï¼Œå°½å¯èƒ½è®©ç‰©ç†å†…å­˜çš„ä½¿ç”¨å˜å¾—ç´§å‡‘ï¼Œä½†å¦‚æœ Java å †è¿‡å¤§å¯¼è‡´é¢‘ç¹ Swapï¼Œæ€§èƒ½ä¼šæ€¥å‰§ä¸‹é™ã€‚</p>
</li>
<li>
<p><strong>Copy-On-Write (COW)</strong> ï¼šLinux <code>fork()</code> å­è¿›ç¨‹ï¼ˆå¦‚ Redis RDB å¿«ç…§ï¼‰æ—¶ï¼Œå­è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹å…±äº«ç‰©ç†å†…å­˜ï¼Œåªæœ‰åœ¨å†™æ“ä½œæ—¶ï¼ŒOS æ‰ä¼šåˆ©ç”¨é¡µè¡¨æœºåˆ¶å¤åˆ¶ä¸€ä»½ç‰©ç†é¡µã€‚ç†è§£é¡µå¼å­˜å‚¨èƒ½å¸®ä½ ç†è§£ä¸ºä»€ä¹ˆ Redis å¿«ç…§æ—¶å†…å­˜å ç”¨ä¸ä¼šç¬é—´ç¿»å€ã€‚</p>
</li>
<li>
<p><strong>mmap</strong>ï¼šåœ¨ Go æˆ– Java ä¸­ä½¿ç”¨ <code>MappedByteBuffer</code> (Zero Copy)ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¿®æ”¹é¡µè¡¨ï¼Œå°†æ–‡ä»¶ç›´æ¥æ˜ å°„åˆ°ç”¨æˆ·æ€çš„è™šæ‹Ÿå†…å­˜åœ°å€ï¼Œç»•è¿‡å†…æ ¸ç¼“å†²åŒºæ‹·è´ã€‚</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”µè§†ç‰ˆæ™ºå®¶Appå…¼å®¹è§¦æ‘¸å’Œé¥æ§å™¨äº¤äº’æ–¹å¼]]></title>    <link>https://juejin.cn/post/7587322796826198056</link>    <guid>https://juejin.cn/post/7587322796826198056</guid>    <pubDate>2025-12-25T06:02:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587322796826198056" data-draft-id="7585091990347677732" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”µè§†ç‰ˆæ™ºå®¶Appå…¼å®¹è§¦æ‘¸å’Œé¥æ§å™¨äº¤äº’æ–¹å¼"/> <meta itemprop="keywords" content="APP"/> <meta itemprop="datePublished" content="2025-12-25T06:02:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æµ·å°”æ™ºæ…§å®¶æŠ€æœ¯å¹³å°"/> <meta itemprop="url" content="https://juejin.cn/user/3848721122725016"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”µè§†ç‰ˆæ™ºå®¶Appå…¼å®¹è§¦æ‘¸å’Œé¥æ§å™¨äº¤äº’æ–¹å¼
            <!----> <!----></h1> <div class="container team-follow" data-v-d326b38e="" data-v-61fb5e44=""><div class="left" data-v-d326b38e=""><a href="/team/7156434854350389283/posts" data-v-d326b38e=""><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a4176c1a2e0b4e1b986f105126840cc9~tplv-k3u1fbpfcp-watermark.image?" class="icon" data-v-d326b38e=""/></a> <div class="content" data-v-d326b38e=""><div style="display: flex" data-v-d326b38e=""><a href="/team/7156434854350389283/posts" data-v-d326b38e=""><p class="title-line" data-v-d326b38e=""><span title="ä¸‰ç¿¼é¸Ÿæ•°å­—åŒ–æŠ€æœ¯å›¢é˜Ÿ" class="title" data-v-d326b38e="">ä¸‰ç¿¼é¸Ÿæ•°å­—åŒ–æŠ€æœ¯å›¢é˜Ÿ</span> <img src="//lf-web-assets.juejin.cn/obj/juejin-web/xitu_juejin_web/255e400027b783cbad76dc41527e7695.svg" alt="team icon" class="team-icon" data-v-d326b38e=""/></p></a></div> <div class="meta-box team" data-v-d326b38e="" data-v-61fb5e44=""><time datetime="2025-12-25T06:02:27.000Z" title="Thu Dec 25 2025 06:02:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-d326b38e="" data-v-61fb5e44="">
                2025-12-25
              </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-d326b38e="" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-d326b38e="" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-d326b38e="" data-v-61fb5e44=""/></svg> <span class="views-count" style="display:none;" data-v-d326b38e="" data-v-61fb5e44="">
                0
              </span> <span class="read-time" data-v-d326b38e="" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d326b38e="" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-d326b38e="" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-d326b38e="" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-d326b38e="" data-v-61fb5e44=""/></svg>
                é˜…è¯»8åˆ†é’Ÿ
              </span> <!----> <!----></div></div></div> <button class="jj-follow-button follow-btn" style="display:none;" data-v-b60b2868="" data-v-d326b38e=""><span data-v-b60b2868="" data-v-d326b38e=""><i class="byte-icon byte-icon--plus" data-v-d326b38e=""><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 48 48"><path fill="none" d="M0 0h48v48H0z"/><path d="M24.7 4c.4 0 .6 0 .8.1.2.1.3.2.4.4.1.2.1.3.1.8V22h16.7c.4 0 .6 0 .8.1.2.1.3.2.4.4.1.2.1.3.1.8v1.4c0 .4 0 .6-.1.8-.1.2-.2.3-.4.4-.2.1-.3.1-.8.1H26v16.7c0 .4 0 .6-.1.8-.1.2-.2.3-.4.4-.2.1-.3.1-.8.1h-1.4c-.4 0-.6 0-.8-.1-.2-.1-.3-.2-.4-.4-.1-.2-.1-.3-.1-.8V26H5.3c-.4 0-.6 0-.8-.1-.2-.1-.3-.2-.4-.4-.1-.2-.1-.3-.1-.8v-1.4c0-.4 0-.6.1-.8.1-.2.2-.3.4-.4.2-.1.3-.1.8-.1H22V5.3c0-.4 0-.6.1-.8.1-.2.2-.3.4-.4.2-.1.3-.1.8-.1h1.4z"/></svg></i>
        å…³æ³¨
      </span></button></div> <div class="team-user block-hidden" data-v-61fb5e44=""><div class="avatar jj-avatar avatar" data-v-03256cc6="" data-v-61fb5e44=""><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="avatar" class="lazy avatar-img" data-v-5244ef91="" data-v-03256cc6=""/> </div> <!----> <span class="position ellipsis" data-v-61fb5e44="">
              @æµ·å°”ä¼˜å®¶æ™ºèƒ½ç§‘æŠ€ï¼ˆåŒ—äº¬ï¼‰æœ‰é™å…¬å¸
            </span></div> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Â 1. èƒŒæ™¯</h2>
<p>ç”µè§†ç‰ˆæ™ºå®¶Appä¸€ç›´è¿è¡Œåœ¨æµ·å°”ç”µè§†ä¸Šï¼Œä½¿ç”¨é¥æ§å™¨è¿›è¡Œäº¤äº’ï¼Œåæ¥æ·»åŠ äº†ä¸€ä¸ªæŒ‡å‘å‹é¥æ§å™¨ï¼Œä¹Ÿæ˜¯é€šè¿‡ç„¦ç‚¹è¿›è¡Œäº¤äº’çš„ï¼Œä¸€ç›´è¿è¡Œæ­£å¸¸ã€‚</p>
<p>ç°åœ¨å¢åŠ äº†ä¸€æ¬¾æ–°çš„ç”µè§†ï¼Œæ­¤ç”µè§†ç«Ÿç„¶å¯è§¦æ‘¸ï¼Œå¤ªå‰å®³äº†ï¼Œè¶…çº§å¥½ç”¨ã€‚ä½†æ˜¯æˆ‘ä»¬çš„Appè·‘ä¸Šå»åç«Ÿç„¶æ°´åœŸä¸æœï¼Œäº¤äº’å‡ºç°äº†é—®é¢˜ï¼Œé—®é¢˜æœ‰å¾ˆå¤šï¼Œæœ‰UIé€‚é…çš„ï¼Œæœ‰äº¤äº’çš„ï¼Œæœ‰æ¨ªç«–å±çš„ï¼Œä»Šå¤©å…ˆç ”ç©¶ä¸€ä¸‹äº¤äº’æ¨¡å¼ï¼Œé¥­è¦ä¸€å£ä¸€å£åƒã€‚</p>
<h2 data-id="heading-1">2. ç„¦ç‚¹ä¸è§¦æ‘¸æ¨¡å¼</h2>
<h3 data-id="heading-2">2.1 ä»€ä¹ˆæ˜¯ç„¦ç‚¹ï¼Ÿå®ƒæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h3>
<p>åœ¨éè§¦å±çš„æ‰‹æœºæˆ–è€…ç”µè§†ä¸Šï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦ç”¨é”®ç›˜ã€é¼ æ ‡ã€é¥æ§å™¨ä¸ç•Œé¢è¿›è¡Œäº¤äº’ï¼Œå½“äº¤äº’çš„æ—¶å€™å¿…é¡»å…ˆä½¿ç›®æ ‡æ§ä»¶è·å¾—ç„¦ç‚¹ï¼ˆæ¯”å¦‚é«˜äº®èµ·æ¥ï¼‰ï¼Œè¿™æ ·ç”¨æˆ·æ‰ä¼šæ³¨æ„åˆ°æ˜¯ä»€ä¹ˆæ§ä»¶æ¥å—è¾“å…¥ã€‚</p>
<p>è€Œå¦‚æœæ˜¯åœ¨è§¦å±æ—¶ä»£ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥ç”¨æ‰‹æŒ‡ç‚¹å‡»æ§ä»¶ï¼Œè¿™ä¸ªæ—¶å€™å°±æ²¡å¿…è¦å°†ç›®æ ‡é«˜äº®äº†ï¼ˆå³è·å–ç„¦ç‚¹ï¼‰ã€‚</p>
<p>æ€»ç»“ï¼Œç„¦ç‚¹ä¸»è¦ç”¨äºéè§¦å±æ‰‹æœºä¸Šçš„ï¼Œæ˜¯ä¸ç”¨æˆ·äº¤äº’æœ‰å…³çš„äº§ç‰©ï¼Œè·Ÿäº¤äº’æ–¹å¼ç´§å¯†ç›¸å…³ï¼ˆå½“ç„¶å®ƒè¿˜æœ‰å…¶å®ƒç”¨é€”ï¼Œè¿™ä¸ªåç»­å†è¯´ï¼Œç°åœ¨å…ˆèšç„¦åœ¨è¿™é‡Œï¼‰ã€‚</p>
<h3 data-id="heading-3">2.2 è§¦æ‘¸æ¨¡å¼</h3>
<h4 data-id="heading-4">2.2.1 è§¦æ‘¸æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p>ç°åœ¨çš„æ‰‹æœºå¤§å¤šæ˜¯è§¦æ‘¸å±ï¼Œä½¿ç”¨èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œå®ƒä¸ä¼ ç»Ÿçš„é”®ç›˜ã€é¼ æ ‡ã€é¥æ§å™¨çš„äº¤äº’æ–¹å¼ä¸å¤ªä¸€æ ·çš„ä¸€ç‚¹æ˜¯ï¼Œå®ƒä¸éœ€è¦ç„¦ç‚¹è¾…åŠ©äº¤äº’ï¼Œæ›´åŠ æ–¹ä¾¿äººä»¬ä½¿ç”¨æ‰‹æœºï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸€ç§æ–°çš„äº¤äº’æ¨¡å¼ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œè§¦æ‘¸æ¨¡å¼â€ï¼ˆTouch Modeï¼‰ã€‚</p>
<p>åœ¨Androidä¸Šï¼Œæœ‰ä¸€ä¸ªæ–¹æ³•ï¼ˆ<strong>View#isInTouchMode()</strong> ï¼‰ç”¨æ¥æŒ‡ç¤ºå½“å‰æ˜¯å¦æ˜¯å¤„äºè§¦æ‘¸æ¨¡å¼ï¼Œå®ƒæ˜¯ç”¨æˆ·å’Œæ‰‹æœºè¿›è¡Œäº¤äº’æ—¶viewå±‚æ¬¡ç»“æ„çš„ä¸€ä¸ªçŠ¶æ€ã€‚ä»£è¡¨äº†æœ€è¿‘ä¸€æ¬¡çš„äº¤äº’æ˜¯å¦æ˜¯é€šè¿‡è§¦æ‘¸å±å‘ç”Ÿçš„ï¼Œå› ä¸ºåœ¨Androidè®¾å¤‡ä¸Šè¿˜å­˜åœ¨åˆ«çš„äº¤äº’æ–¹å¼ï¼Œæ¯”å¦‚é”®ç›˜ã€é¼ æ ‡ç­‰ç­‰ã€‚</p>
<h4 data-id="heading-5">2.2.2 è¿›å…¥/é€€å‡ºè§¦æ‘¸æ¨¡å¼ï¼Œå¦‚ä½•åˆ¤æ–­å½“å‰æ˜¯ä»€ä¹ˆæ¨¡å¼</h4>
<p>Androidç³»ç»Ÿä¼šè‡ªåŠ¨ç»´æŠ¤å½“å‰çš„çŠ¶æ€ï¼Œå³æ˜¯å¦æ˜¯è§¦æ‘¸æ¨¡å¼ã€‚å¯¹äºæ”¯æŒè§¦æ‘¸åŠŸèƒ½çš„è®¾å¤‡ï¼Œå½“ç”¨æˆ·è§¦æ‘¸å±å¹•æ—¶ï¼Œè®¾å¤‡ä¼šç«‹å³è¿›å…¥è§¦æ‘¸æ¨¡å¼ã€‚æ— è®ºä½•æ—¶ï¼Œåªè¦ç”¨æˆ·ç‚¹å‡»æ–¹å‘é”®æˆ–æ»šåŠ¨è½¨è¿¹çƒæˆ–ç‚¹å‡»é¥æ§å™¨ï¼Œè®¾å¤‡å°±ä¼šé€€å‡ºè§¦æ‘¸æ¨¡å¼å¹¶æ‰¾åˆ°ä¸€ä¸ªè§†å›¾ä½¿å…¶è·å¾—ç„¦ç‚¹ã€‚</p>
<p>æ•´ä¸ªç³»ç»Ÿï¼ˆæ‰€æœ‰çª—å£å’Œ Activityï¼‰éƒ½å°†ä¿æŒåŒä¸€ä¸ªè§¦æ‘¸æ¨¡å¼çš„çŠ¶æ€ã€‚å¯é€šè¿‡è°ƒç”¨<strong>View#isInTouchMode()</strong> æ¥æ£€æŸ¥è®¾å¤‡ç›®å‰æ˜¯å¦å¤„äºè§¦æ‘¸æ¨¡å¼ï¼Œç”¨äºæ‚¨è‡ªå·±çš„é€»è¾‘å¤„ç†æ—¶ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-6">2.3 è§¦æ‘¸æ¨¡å¼ä¸ç„¦ç‚¹</h3>
<p>å‰é¢è¯´äº†ï¼Œè§¦æ‘¸æ¨¡å¼æ˜¯ä¸ä¼ ç»Ÿçš„é¥æ§å™¨ã€é”®ç›˜ä¸ä¸€æ ·çš„ä¸€ç§äº¤äº’æ–¹å¼ï¼Œå®ƒæ˜¯ä¸éœ€è¦ç„¦ç‚¹çš„ï¼Œä»»ä½•å·²èšç„¦çš„æ§ä»¶å½“è¿›å…¥è§¦æ‘¸æ¨¡å¼æ—¶éƒ½å˜ä¸ºæœªèšç„¦çŠ¶æ€ã€‚è€Œå½“ä½¿ç”¨é¼ æ ‡å’Œé”®ç›˜æ—¶ï¼Œå°±ä¼šç«‹å³ç¦»å¼€è§¦æ‘¸æ¨¡å¼ï¼Œæ§ä»¶å°±ä¼šå˜æˆèšç„¦çš„çŠ¶æ€ã€‚</p>
<p>é‚£ä¹ˆæ˜¯ä¸æ˜¯è§¦æ‘¸æ¨¡å¼ä¸‹å°±æ²¡æœ‰ç„¦ç‚¹çš„æ¦‚å¿µäº†å‘¢ï¼Ÿ</p>
<p>éä¹Ÿï¼Œä¸Šè¾¹åªæ˜¯è¯´ä¸éœ€è¦ç„¦ç‚¹è¿›è¡Œè¾…åŠ©äº¤äº’ï¼Œä½†è¿˜æ˜¯æœ‰å…¶å®ƒåœºæ™¯æ˜¯éœ€è¦ç„¦ç‚¹çš„ï¼Œæ¯”å¦‚æ–‡æœ¬è¾“å…¥æ¡†ã€‚è¿™å°±å¼•å‡ºäº†ä¸¤ä¸ªæ¦‚å¿µï¼Œææ¸…äº†å®ƒä¿©ï¼Œä¹Ÿå°±å¼„æ¸…äº†ç„¦ç‚¹å’Œè§¦æ¨¡æ¨¡å¼äº†ï¼Œå®ƒä»¬æ˜¯<strong>setFocusableInTouchMode å’Œ setFocusable ã€‚</strong></p>
<h4 data-id="heading-7">2.3.1 setFocusableInTouchMode å’Œ setFocusable æ–¹æ³•</h4>
<ul>
<li><strong>setFocusable</strong>ï¼šè®¾ç½®æ§ä»¶æ˜¯å¦èƒ½è·å–ç„¦ç‚¹ã€‚å¯ä»¥é€šè¿‡isFocusable()è·å–å…¶çŠ¶æ€ã€‚</li>
<li><strong>setFocusableInTouchMode</strong>ï¼šåœ¨è§¦æ‘¸æ¨¡å¼ä¸‹ï¼Œè®¾ç½®æ§ä»¶æ˜¯å¦å…è®¸èšç„¦ã€‚å¯ä»¥é€šè¿‡isFocusableInTouchMode() è·å–å…¶çŠ¶æ€ã€‚</li>
</ul>
<h4 data-id="heading-8">2.3.2 setFocusableInTouchMode å’Œ setFocusable çš„ä½¿ç”¨åœºæ™¯</h4>
<ol>
<li>åœ¨ä½¿ç”¨é”®ç›˜ã€é¼ æ ‡ã€è½¨è¿¹çƒã€é¥æ§å™¨çš„æƒ…å†µä¸‹ï¼Œåªæœ‰setFocusableä¸ºtrueçš„æ§ä»¶ï¼Œæ‰å¯ä»¥è·å–ç„¦ç‚¹ï¼ˆé€‰ä¸­æ—¶é«˜äº®ï¼‰ã€‚</li>
<li>åœ¨è§¦æ‘¸æ¨¡å¼ä¸‹ï¼ŒsetFocusableä¸ºtrueï¼Œå¹¶æ— æ³•ä¿è¯æ§ä»¶å¯ä»¥è·å–ç„¦ç‚¹ï¼Œå®ƒåªèƒ½ä¿è¯åœ¨éè§¦æ‘¸æ¨¡å¼ä¸‹ï¼Œè¯¥æ§ä»¶å¯ä»¥å…è®¸è·å–ç„¦ç‚¹ã€‚å¦‚æœæƒ³åœ¨åœ¨è§¦æ‘¸æ¨¡å¼ä¸­ï¼Œæ”¹å˜æ§ä»¶æ˜¯å¦å…è®¸èšç„¦ï¼Œéœ€è¦ä½¿ç”¨setFocusableInTouchModeã€‚</li>
<li>ä»ä¸Šé¢æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œä¸ç®¡æ˜¯å¦åœ¨è§¦æ‘¸æ¨¡å¼ä¸‹ï¼Œæ§ä»¶è·å–ç„¦ç‚¹çš„å‰ææ˜¯isFocusable()ä¸ºtrueã€‚è€Œåœ¨è§¦æ‘¸æ¨¡å¼ä¸‹ï¼Œåªæœ‰isFocusable()å’ŒisFocusableInTouchMode()éƒ½ä¸ºtureçš„æƒ…å†µä¸‹ï¼Œæ§ä»¶æ‰å…è®¸èšç„¦ã€‚</li>
</ol>
<h4 data-id="heading-9">2.3.3 è°ƒç”¨ setFocusableInTouchMode å’Œ setFocusable å¯¹ç›¸äº’çš„å½±å“</h4>
<ol>
<li>setFocusableInTouchModeä¸ºtrueï¼Œä¼šä½¿isFocusableä¹Ÿå˜ä¸ºtrueï¼Œè€ŒsetFocusableInTouchModeä¸ºfalseå¹¶ä¸å½±å“isFocusableã€‚</li>
<li>setFocusableä¸ºfalseï¼Œä¼šä½¿isFocusableInTouchModeå˜ä¸ºfalseï¼Œè€ŒsetFocusableä¸ºtrueå¹¶ä¸å½±å“isFocusableInTouchMode</li>
</ol>
<h4 data-id="heading-10">2.3.4 å„ç§å¸¸ç”¨æ§ä»¶çš„é»˜è®¤åˆå§‹çŠ¶æ€</h4>







































































































<table><thead><tr><th/><th/><th/><th/><th/></tr></thead><tbody><tr><td>æ§ä»¶</td><td>Focusable</td><td>FocusableInTouchMode</td><td>Clickable</td><td>LongClickable</td></tr><tr><td>View</td><td>FALSE</td><td>FALSE</td><td>FALSE</td><td>FALSE</td></tr><tr><td>TextView</td><td>FALSE</td><td>FALSE</td><td>FALSE</td><td>FALSE</td></tr><tr><td>EditText</td><td>TRUE</td><td>TRUE</td><td>TRUE</td><td>TRUE</td></tr><tr><td>Button</td><td>TRUE</td><td>FALSE</td><td>TRUE</td><td>FALSE</td></tr><tr><td>ImageButton</td><td>TRUE</td><td>FALSE</td><td>TRUE</td><td>FALSE</td></tr><tr><td>ImageView</td><td>FALSE</td><td>FALSE</td><td>FALSE</td><td>FALSE</td></tr><tr><td>CheckBox</td><td>TRUE</td><td>FALSE</td><td>TRUE</td><td>FALSE</td></tr><tr><td>RadioButton</td><td>TRUE</td><td>FALSE</td><td>TRUE</td><td>FALSE</td></tr><tr><td>ProgressBar</td><td>FALSE</td><td>FALSE</td><td>FALSE</td><td>FALSE</td></tr><tr><td>LinearLayout</td><td>FALSE</td><td>FALSE</td><td>FALSE</td><td>FALSE</td></tr><tr><td>RelativeLayout</td><td>FALSE</td><td>FALSE</td><td>FALSE</td><td>FALSE</td></tr><tr><td>å…¶ä»–Layoutéƒ½å‡ ä¹ä¸€æ ·</td><td>FALSE</td><td>FALSE</td><td>FALSE</td><td>FALSE</td></tr></tbody></table>
<p>ä»ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå¤§éƒ¨åˆ†çš„æ§ä»¶FocusableInTouchModeå±æ€§éƒ½ä¸ºfalseã€‚åªæœ‰ç±»ä¼¼EditTextè¿™ç§æ§ä»¶æ‰ä¸ºtrueï¼Œå› ä¸ºEditTextéœ€è¦æä¾›åœ¨æ²¡ç”¨æˆ·ç‚¹å‡»çš„æ¡ä»¶ä¸‹ï¼Œå¼¹å‡ºä¸€ä¸ªè½¯é”®ç›˜è¿›è¡Œè¾“å…¥çš„åŠŸèƒ½ã€‚</p>
<h2 data-id="heading-11">3. æ™ºå®¶Appé€‚é…è§¦æ‘¸å±è¦ç‚¹</h2>
<p>ç”±äºç”µè§†ä¹‹å‰åªæœ‰é¥æ§å™¨ï¼Œæ‰€ä»¥å®ƒçš„äº¤äº’æ–¹å¼ä¸€ç›´æ˜¯ä¾èµ–ç„¦ç‚¹çš„ï¼Œæ–°ç”µè§†æ”¯æŒè§¦æ‘¸ï¼Œè¿™å—è‚¯å®šæ˜¯éœ€è¦é€‚é…çš„ï¼Œç»è¿‡ä¸Šé¢çš„ç ”ç©¶ï¼Œå‘ç°ç°åœ¨çš„é—®é¢˜ä¸»è¦æ˜¯ä½¿ç”¨focusableInTouchModeå±æ€§ä¸å½“å¯¼è‡´çš„ï¼Œéœ€è¦æ£€æŸ¥ä¸€ä¸‹æ‰€æœ‰é¡µé¢ä¸­çš„æ§ä»¶ï¼Œæ­¤å±æ€§çš„ä½¿ç”¨æƒ…å†µï¼Œæ˜¯å¦æ­£ç¡®ã€‚</p>
<p>ä»¥ä¸‹æ€»ç»“äº†åœ¨ç”µè§†ä¸Šé€‚é…è§¦æ‘¸å±çš„è¦ç‚¹åŠå¯èƒ½ä¼šå‡ºç°çš„é—®é¢˜ï¼š</p>
<ol>
<li>
<p>è§¦æ‘¸æ¨¡å¼çš„è¿›å…¥å’Œé€€å‡ºç³»ç»Ÿå·²åšå¥½äº†ï¼Œä¸ç”¨å¼€å‘è€…æ“å¿ƒï¼›</p>
</li>
<li>
<p>å¼€å‘è€…åªéœ€è¦ç®¡ç†å¥½æ§ä»¶çš„focusableInTouchModeå±æ€§å³å¯ï¼Œä¸€èˆ¬æƒ…å†µ(ä¸éœ€è¦è¾“å…¥æ—¶)ä¸‹å°†å®ƒè®¾ç½®ä¸ºfalseå³å¯ï¼Œå¯åœ¨xmlä¸­è¿›è¡Œè®¾ç½®ä¹Ÿå¯ä»¥é€šè¿‡ setFocusableInTouchMode() åœ¨ä»£ç ä¸­è®¾ç½®ï¼›</p>
</li>
<li>
<p>å½“éœ€è¦æ ¹æ®å½“å‰çš„æ¨¡å¼è¿›è¡Œè‡ªå®šä¹‰é€»è¾‘é€‚é…æ—¶ï¼Œå¯ä½¿ç”¨æ–¹æ³•ï¼š<strong>View#isInTouchMode()</strong> ï¼›</p>
</li>
<li>
<p>å¯èƒ½ä¼šå‡ºç°çš„é—®é¢˜éœ€è¦æ³¨æ„ï¼š</p>
<ol>
<li>æ™®é€šçš„æ§ä»¶æˆ–è‡ªå®šä¹‰æ§ä»¶ï¼Œæ»¥ç”¨äº†setFocusableInTouchModeï¼Œä¼šå‡ºç°ç‚¹å‡»ä¸€ä¸‹è·å–ç„¦ç‚¹ï¼Œå†ç‚¹ä¸€ä¸‹æ‰æ˜¯ç‚¹å‡»çš„æƒ…å†µã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œå°†å®ƒçš„setFocusableInTouchModeè®¾ç½®ä¸ºfalseå³å¯ï¼›</li>
<li>ä»¥åå¼€å‘æ—¶ï¼Œè¦å°å¿ƒonTouchEvent()æ–¹æ³•ï¼Œå› ä¸ºå®ƒåªä¼šåœ¨è§¦æ‘¸å±ä¸Šæ‰æœ‰ï¼Œåœ¨éè§¦æ‘¸å±ä¸Šæ°¸è¿œä¸ä¼šè§¦å‘å®ƒï¼Œå¦‚æœä½¿ç”¨äº†æ­¤æ–¹æ³•ï¼Œåˆ°æ—¶å€™é€»è¾‘å¯èƒ½å°±ä¸æ­£å¸¸äº†ï¼›</li>
</ol>
</li>
</ol>
<h2 data-id="heading-12">4. ç»Ÿä¸€é€‚é…View</h2>
<p>åœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†å¸¸ç”¨çš„ä¸€äº›é€‚é…æ”¾åˆ°åŸºç±»ä¸­è¿›è¡Œç»Ÿä¸€é€‚é…ï¼Œå¯æ–¹ä¾¿æˆ‘ä»¬çš„å¼€å‘åŠç»´æŠ¤ï¼Œè¿™é‡Œæˆ‘ä»¬ç»Ÿä¸€åšäº†å‡ å¤„é€‚é…ã€‚</p>
<h3 data-id="heading-13">4.1 å°è£…æ–¹æ³•åˆ¤æ–­æ˜¯å¦æ˜¯ç§»åŠ¨å±</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">tvProductTypeIsPad</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">return</span> getTvProductType() == TvProductType.PAD
}
</code></pre>
<h3 data-id="heading-14">4.2 HoverViewExtension</h3>
<p>é€šç”¨æ‰©å±•ç±»ï¼Œç”¨äºåœ¨é¼ æ ‡/æŒ‡å‘å‹é¥æ§å™¨ç§»åŠ¨åˆ°Viewæ—¶ï¼Œæ™ºèƒ½ä¿®æ”¹focuseableInTouchModeï¼Œä»¥é€‚é…ç§»åŠ¨å±å’Œæ™®é€šç”µè§†ï¼Œå…³é”®ä»£ç å¦‚ä¸‹æ‰€ç¤º</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span>  View.<span class="hljs-title">addHoverListener</span><span class="hljs-params">(autoChangeItemFocusableInTouchMode: <span class="hljs-type">Boolean</span> = <span class="hljs-literal">true</span>)</span></span> {
    <span class="hljs-keyword">this</span>.setOnGenericMotionListener { v, event -&gt;
        <span class="hljs-keyword">when</span>(event?.action) {
            MotionEvent.ACTION_HOVER_ENTER -&gt; {
                <span class="hljs-keyword">if</span> (autoChangeItemFocusableInTouchMode) {
                    v.isFocusableInTouchMode = <span class="hljs-literal">true</span>
                }
            }
            MotionEvent.ACTION_HOVER_EXIT -&gt; {
                <span class="hljs-keyword">if</span> (autoChangeItemFocusableInTouchMode) {
                    v.isFocusableInTouchMode = <span class="hljs-literal">false</span>
                }
            }
        }
        <span class="hljs-keyword">return</span><span class="hljs-symbol">@setOnGenericMotionListener</span> <span class="hljs-literal">true</span>
    }
}
</code></pre>
<h3 data-id="heading-15">4.3 UiUtils</h3>
<p>åˆ›å»ºUtilsæ–¹æ³•ï¼Œå®ç°ç‚¹å‡»æ—¶çš„åŠ¨æ•ˆï¼Œç‚¹å‡»ç¼©å°Viewï¼Œæ¾å¼€æ‰‹æŒ‡æ¢å¤åŸå¤§å°ï¼Œå¦‚ä¸‹</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">commonCardTouchScale</span><span class="hljs-params">(
    view: <span class="hljs-type">View</span>?,
    scaleX: <span class="hljs-type">Float</span> = SCALE_RATIO_SMART,
    scaleY: <span class="hljs-type">Float</span> = SCALE_RATIO_SMART,
    duration: <span class="hljs-type">Long</span> = SCALE_DURATION_SMART,
    effectZ: <span class="hljs-type">Boolean</span> = <span class="hljs-literal">false</span>
)</span></span> {
    view?.setOnTouchListener { v, event -&gt;
        <span class="hljs-keyword">when</span> (event.action) {
            MotionEvent.ACTION_DOWN -&gt; {
                <span class="hljs-keyword">if</span> (effectZ) view.elevation += <span class="hljs-number">1</span>
                scaleView(v,
                    getSmartScaleRatio(scaleX, v),
                    getSmartScaleRatio(scaleY, v),
                    getSmartScaleDuration(duration, event.action)
                )
            }
            MotionEvent.ACTION_UP, MotionEvent.ACTION_CANCEL -&gt; {
                <span class="hljs-keyword">if</span> (effectZ) view.elevation -= <span class="hljs-number">1</span>
                scaleView(v, SCALE_DEFAULT, SCALE_DEFAULT,
                    getSmartScaleDuration(duration, event.action)
                )
            }
        }
        <span class="hljs-literal">false</span>
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">scaleView</span><span class="hljs-params">(
    view: <span class="hljs-type">View</span>,
    scaleX: <span class="hljs-type">Float</span>,
    scaleY: <span class="hljs-type">Float</span>,
    duration: <span class="hljs-type">Long</span> = SCALE_DURATION
)</span></span> {
    view.animate().scaleX(scaleX).scaleY(scaleY).setDuration(duration)
        .setInterpolator(AccelerateDecelerateInterpolator())
        .start()
}
</code></pre>
<p>å¦‚ä¸Šï¼Œå®ç°äº†ä¸€äº›é€šç”¨çš„æ–¹æ³•ï¼Œç„¶ååœ¨æ¯ä¸ªé¡µé¢çš„åˆé€‚ä½ç½®ä¸­è¿›è¡Œé€‚é…ï¼Œå³å¯å®Œæˆæ•´ä¸ªå·¥ç¨‹çš„é€‚é…ã€‚å½“ç„¶é€‚é…å·¥ä½œæ˜¯ä¸€é¡¹ç»†è‡´çš„äº‹æƒ…ï¼Œéœ€è¦ç»†å¿ƒä¿®æ”¹ï¼Œå¹¶åå¤æ‰“ç£¨ï¼Œæœ€åå‘ˆç°å‡ºä¸€ä¸ªå®Œç¾çš„ä½œå“ã€‚</p>
<h2 data-id="heading-16">5. æ€»ç»“</h2>
<p>æœ¬ç¯‡æ–‡ç« æ¢³ç†æ€»ç»“äº†ç„¦ç‚¹ã€è§¦æ‘¸æ¨¡å¼çš„å®šä¹‰ï¼Œç»´æŠ¤æ˜¯å¦æ˜¯è§¦æ‘¸æ¨¡å¼çš„æ–¹å¼ã€focusableå’ŒfocusableInTouchModeå±æ€§çš„åŒºåˆ«ï¼Œæœ€åæ¢³ç†å‡ºæ™ºå®¶Appé€‚é…è§¦æ‘¸å±çš„è¦ç‚¹ï¼Œæ¸…æ™°äº†æ¦‚å¿µï¼Œæ ¹æ®è¦ç‚¹ï¼Œèµ°æŸ¥ä¸€éAppåŠŸèƒ½ï¼Œå¤§ä½“ä¸Šå°±ç®—é€‚é…å®Œäº†ï¼Œåç»­å†æ ¹æ®éœ€è¦è¿›è¡Œä¸€äº›UIæˆ–å…¶å®ƒé€»è¾‘çš„å®Œå–„å³å¯ã€‚</p>
<h2 data-id="heading-17">6. å‚è€ƒ</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fmcryeasy%2Farticle%2Fdetails%2F53708493" title="https://blog.csdn.net/mcryeasy/article/details/53708493" target="_blank" ref="nofollow noopener noreferrer">Android è§¦æ‘¸æ¨¡å¼ï¼ˆTouch Modeï¼‰</a></p>
<h2 data-id="heading-18">7. å›¢é˜Ÿä»‹ç»</h2>
<p>ã€Œä¸‰ç¿¼é¸Ÿæ•°å­—åŒ–æŠ€æœ¯å¹³å°-åº”ç”¨è½¯ä»¶æ¡†æ¶å¼€å‘ã€ä¸»è¦è´Ÿè´£è®¾è®¡å·¥å…·çš„ç ”å‘ï¼ŒåŒ…æ‹¬è¥é”€è®¾è®¡å·¥å…·ã€å®¶ç”µVRè®¾è®¡å’Œå±•ç¤ºã€æ°´ç”µæš–é€šå‰ç½®è®¾è®¡èƒ½åŠ›ï¼Œç ”å‘å¹¶æ²‰æ·€ç´ æåº“ï¼Œæ„å»ºå®¶å±…å®¶è£…ç´ æåº“ï¼Œé›†æˆæˆ·å‹åº“ã€å…¨å“ç±»äº§å“åº“ã€è®¾è®¡æ–¹æ¡ˆåº“ã€ç”Ÿäº§å·¥è‰ºæ¨¡å‹ï¼Œæ‰“é€ åŸºäºæˆ·å‹å’Œé£æ ¼çš„AIè®¾è®¡èƒ½åŠ›ï¼Œå¿«é€Ÿç”Ÿæˆç®—é‡å’ŒæŠ¥ä»·ï¼›åŒæ—¶ç ”å‘äº†é—¨åº—è®¾è®¡å¸ˆä¸­å¿ƒå’Œé¡¹ç›®ä¸­å¿ƒï¼ŒåŒ…æ‹¬è®¾è®¡å¸ˆç®¡ç†èƒ½åŠ›å’Œé¡¹ç›®ç»ç†ç®¡ç†èƒ½åŠ›ã€‚å®ç°äº†åœºæ™¯å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ŒåŒæ—¶ä¸ºæ°´ï¼Œç©ºæ°”ï¼Œå¨æˆ¿ç­‰äº§ä¸šæä¾›å•†æœºç®¡ç†å·¥å…·ï¼Œä»è€Œå®ç°äº†ä»¥åœºæ™¯è´¯ç©¿çš„Bç«¯Cç«¯å…¨æµç¨‹ç³»ç»Ÿã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨Python+FastAPIé¡¹ç›®ä¸­ä½¿ç”¨SqlAlchemyæ“ä½œæ•°æ®çš„å‡ ç§å¸¸è§æ–¹å¼]]></title>    <link>https://juejin.cn/post/7587336857538527241</link>    <guid>https://juejin.cn/post/7587336857538527241</guid>    <pubDate>2025-12-25T04:05:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587336857538527241" data-draft-id="7587336857538478089" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨Python+FastAPIé¡¹ç›®ä¸­ä½¿ç”¨SqlAlchemyæ“ä½œæ•°æ®çš„å‡ ç§å¸¸è§æ–¹å¼"/> <meta itemprop="keywords" content="åç«¯,Python"/> <meta itemprop="datePublished" content="2025-12-25T04:05:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¼åèª"/> <meta itemprop="url" content="https://juejin.cn/user/122769398839592"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨Python+FastAPIé¡¹ç›®ä¸­ä½¿ç”¨SqlAlchemyæ“ä½œæ•°æ®çš„å‡ ç§å¸¸è§æ–¹å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/122769398839592/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¼åèª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T04:05:48.000Z" title="Thu Dec 25 2025 04:05:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨Python+FastAPIçš„åç«¯é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€å¾ˆå¤šæ—¶å€™éœ€è¦å¯¹æ•°æ®è¿›è¡Œç›¸å…³çš„å¤„ç†ï¼Œæœ¬ç¯‡éšç¬”ä»‹ç»åœ¨Python+FastAPIé¡¹ç›®ä¸­ä½¿ç”¨SqlAlchemyæ“ä½œæ•°æ®çš„å‡ ç§å¸¸è§æ–¹å¼ã€‚</p>
<p>ä½¿ç”¨ FastAPI, SQLAlchemy, Pydanticæ„å»ºåç«¯é¡¹ç›®çš„æ—¶å€™ï¼Œå…¶ä¸­æ•°æ®åº“è®¿é—®é‡‡ç”¨SQLAlchemy çš„å¼‚æ­¥æ–¹å¼å¤„ç†ã€‚ä¸€èˆ¬æˆ‘ä»¬åœ¨æ“ä½œæ•°æ®åº“æ“ä½œçš„æ—¶å€™ï¼Œé‡‡ç”¨åŸºç±»ç»§æ‰¿çš„æ–¹å¼å‡å°‘é‡å¤ä»£ç ï¼Œæé«˜ä»£ç å¤ç”¨æ€§ã€‚ä¸è¿‡æˆ‘ä»¬åœ¨åˆ†æSQLAlchemyçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•çš„æ–¹å¼æ¥å‰–æå‡ ç§å¸¸è§çš„æ•°æ®åº“æ“ä½œæ–¹å¼ï¼Œæ¥ä»‹ç»SQLAlchemyçš„å…·ä½“ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-0">1ã€SQLAlchemyä»‹ç»</h3>
<p><strong>SQLAlchemy</strong>Â æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”çµæ´»çš„ Python SQL å·¥å…·åŒ…å’Œå¯¹è±¡å…³ç³»æ˜ å°„ï¼ˆORMï¼‰åº“ã€‚å®ƒè¢«å¹¿æ³›ç”¨äºåœ¨ Python é¡¹ç›®ä¸­å¤„ç†å…³ç³»å‹æ•°æ®åº“çš„åœºæ™¯ï¼Œæ—¢æä¾›äº†é«˜çº§çš„ ORM åŠŸèƒ½ï¼Œåˆä¿ç•™äº†å¯¹åº•å±‚ SQL è¯­å¥çš„å¼ºå¤§æ§åˆ¶åŠ›ã€‚<code>SQLAlchemy</code>Â å…è®¸å¼€å‘è€…é€šè¿‡ Python ä»£ç ä¸æ•°æ®åº“è¿›è¡Œäº¤äº’ï¼Œè€Œæ— éœ€ç›´æ¥ç¼–å†™ SQL è¯­å¥ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒç›´æ¥ä½¿ç”¨åŸç”Ÿ SQL è¿›è¡Œå¤æ‚æŸ¥è¯¢ã€‚ä¸‹é¢æ˜¯<strong>SQLAlchemy</strong>å’Œæˆ‘ä»¬å¸¸è§„æ•°æ®åº“å¯¹è±¡çš„å¯¹åº”å…³ç³»è¯´æ˜ã€‚</p>
<p>Engine Â ã€€ã€€è¿æ¥å¯¹è±¡Â  Â  Â  Â  Â é©±åŠ¨å¼•æ“</p>
<p>Session ã€€ã€€è¿æ¥æ± Â  Â  Â  Â  Â  Â äº‹åŠ¡ Â ç”±æ­¤å¼€å§‹æŸ¥è¯¢</p>
<p>Model Â  ã€€ã€€è¡¨Â  Â  Â  Â  Â  Â  Â  Â  Â  Â ç±»å®šä¹‰</p>
<p>Column Â ã€€Â  åˆ— Â </p>
<p>Query Â  ã€€ã€€è‹¥å¹²è¡Œ Â  Â  Â  Â  å¯ä»¥é“¾å¼æ·»åŠ å¤šä¸ªæ¡ä»¶</p>
<p>åœ¨ä½¿ç”¨SQLAlchemyæ—¶ï¼Œé€šå¸¸ä¼šå°†å…¶ä¸æ•°æ®åº“å¯¹è±¡å¯¹åº”èµ·æ¥ã€‚</p>
<p><strong>SQLAlchemy</strong>: ä½¿ç”¨Â <code>Table</code>Â å¯¹è±¡æˆ–Â <code>Declarative Base</code>Â ä¸­çš„ç±»æ¥è¡¨ç¤ºã€‚</p>
<p><strong>å¯¹åº”å…³ç³»</strong>: æ•°æ®åº“ä¸­çš„æ¯ä¸€ä¸ªè¡¨å¯¹åº”äºSQLAlchemyä¸­çš„ä¸€ä¸ªç±»ï¼Œè¯¥ç±»ç»§æ‰¿è‡ªÂ <code>declarative_base()</code>ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">from sqlalchemy import Column, Integer, String, create_engine
from sqlalchemy.ext.declarative import declarative_base

<span class="hljs-attr">Base</span> = declarative_base()

class User(Base):
    <span class="hljs-attr">__tablename__</span> = <span class="hljs-string">'users'</span>  <span class="hljs-comment"># æ•°æ®åº“è¡¨å</span>
    <span class="hljs-attr">id</span> = Column(Integer, primary_key=<span class="hljs-literal">True</span>)
    <span class="hljs-attr">name</span> = Column(String)
    <span class="hljs-attr">email</span> = Column(String)
</code></pre>
<p><strong>æ•°æ®åº“åˆ— (Database Column)ï¼š</strong> ä½¿ç”¨Â <code>Column</code>Â å¯¹è±¡æ¥è¡¨ç¤ºã€‚æ¯ä¸ªæ•°æ®åº“è¡¨ä¸­çš„åˆ—åœ¨SQLAlchemyä¸­è¡¨ç¤ºä¸ºÂ <code>Column</code>Â å¯¹è±¡ï¼Œå¹¶ä½œä¸ºç±»çš„å±æ€§å®šä¹‰ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">id</span> = Column(Integer, primary_key=<span class="hljs-literal">True</span>)
<span class="hljs-attr">name</span> = Column(String(<span class="hljs-number">50</span>))
</code></pre>
<p><strong>æ•°æ®åº“è¡Œ (Database Row)ï¼š</strong> æ¯ä¸ªæ•°æ®åº“è¡¨çš„ä¸€ä¸ªå®ä¾‹ï¼ˆå¯¹è±¡ï¼‰ä»£è¡¨æ•°æ®åº“è¡¨ä¸­çš„ä¸€è¡Œã€‚åœ¨SQLAlchemyä¸­ï¼Œé€šè¿‡å®ä¾‹åŒ–æ¨¡å‹ç±»æ¥è¡¨ç¤ºæ•°æ®åº“è¡¨ä¸­çš„ä¸€è¡Œã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">new_user</span> = User(id=<span class="hljs-number">1</span>, name=<span class="hljs-string">'John Doe'</span>, email=<span class="hljs-string">'john@example.com'</span>)
</code></pre>
<p><strong>ä¸»é”® (Primary Key)</strong> ï¼šä½¿ç”¨Â <code>primary_key=True</code>Â å‚æ•°å®šä¹‰ä¸»é”®ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">id</span> = Column(Integer, primary_key=<span class="hljs-literal">True</span>)
</code></pre>
<p><strong>å¤–é”® (Foreign Key):</strong> ä½¿ç”¨Â <code>ForeignKey</code>Â å¯¹è±¡æ¥è¡¨ç¤ºã€‚</p>
<pre><code class="hljs language-ini" lang="ini">from sqlalchemy import ForeignKey
from sqlalchemy.orm import relationship

class Address(Base):
    <span class="hljs-attr">__tablename__</span> = <span class="hljs-string">'addresses'</span>
    <span class="hljs-attr">id</span> = Column(Integer, primary_key=<span class="hljs-literal">True</span>)
    <span class="hljs-attr">user_id</span> = Column(Integer, ForeignKey(<span class="hljs-string">'users.id'</span>))
    <span class="hljs-attr">user</span> = relationship(<span class="hljs-string">'User'</span>)
</code></pre>
<p><strong>å…³ç³» (Relationships):</strong> ä½¿ç”¨Â <code>relationship</code>Â å¯¹è±¡æ¥è¡¨ç¤ºã€‚æ•°æ®åº“ä¸­è¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»åœ¨SQLAlchemyä¸­é€šè¿‡Â <code>relationship</code>Â æ¥å®šä¹‰ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">addresses</span> = relationship(<span class="hljs-string">"Address"</span>, back_populates=<span class="hljs-string">"user"</span>)
</code></pre>
<h3 data-id="heading-1">2ã€å¸¸è§„çš„å•è¡¨å¤„ç†</h3>
<p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡å¼‚æ­¥å¤„ç†çš„æ–¹å¼ï¼Œä»‹ç»å¦‚ä½•åœ¨å•è¡¨ä¸­æ“ä½œç›¸å…³çš„æ•°æ®åº“æ•°æ®ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">self, db: AsyncSession, <span class="hljs-built_in">id</span>: <span class="hljs-type">Any</span></span>) -&gt; <span class="hljs-type">Any</span>:
    <span class="hljs-string">"""æ ¹æ®ä¸»é”®è·å–ä¸€ä¸ªå¯¹è±¡"""</span>

    <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(<span class="hljs-built_in">id</span>, <span class="hljs-built_in">str</span>):
        query = select(self.model).<span class="hljs-built_in">filter</span>(func.lower(self.model.<span class="hljs-built_in">id</span>) == <span class="hljs-built_in">id</span>.lower())
    <span class="hljs-keyword">else</span>:
        query = select(self.model).<span class="hljs-built_in">filter</span>(self.model.<span class="hljs-built_in">id</span> == <span class="hljs-built_in">id</span>)

    result = <span class="hljs-keyword">await</span> db.execute(query)
    item = result.scalars().first()

    <span class="hljs-keyword">return</span> item
</code></pre>
<p>å¦‚æœæˆ‘ä»¬éœ€è¦å¼ºåˆ¶å¯¹å¤–é”®çš„ç±»å‹è¿›è¡ŒåŒ¹é…ï¼ˆå¦‚å¯¹äºPostgresqlçš„ä¸¥æ ¼è¦æ±‚ï¼Œæ•°æ®æ¯”è¾ƒçš„ç±»å‹å¿…é¡»ä¸€è‡´ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦åœ¨åŸºç±»æˆ–è€…CRUDç±»åˆå§‹åŒ–çš„æ—¶å€™ï¼Œè·å¾—å¯¹åº”çš„ä¸»é”®ç±»å‹ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseCrud</span>(<span class="hljs-type">Generic</span>[ModelType, PrimaryKeyType, PageDtoType, DtoType]):
    <span class="hljs-string">"""
    åŸºç¡€CRUDæ“ä½œç±»ï¼Œä¼ å…¥å‚æ•°è¯´æ˜ï¼š
    * `ModelType`: SQLAlchemy æ¨¡å‹ç±»
    * `PrimaryKeyType`: é™å®šä¸»é”®çš„ç±»å‹
    * `PageDtoType`: åˆ†é¡µæŸ¥è¯¢è¾“å…¥ç±»
    * `DtoType`: æ•°æ®ä¼ è¾“å¯¹è±¡ç±»ï¼Œå¦‚æ–°å¢ã€æ›´æ–°çš„å•ä¸ªå¯¹è±¡DTO
    """</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, model: <span class="hljs-type">Type</span>[ModelType]</span>):
        <span class="hljs-string">"""
        æ•°æ®åº“è®¿é—®æ“ä½œçš„åŸºç±»å¯¹è±¡(CRUD).
        * `model`: A SQLAlchemy model class
        """</span>
        
        self.model = model  <span class="hljs-comment"># æ¨¡å‹ç±»å‹</span>

        <span class="hljs-comment"># è¿è¡ŒæœŸè·å–ä¸»é”®å­—æ®µç±»å‹</span>
        pk_column = inspect(model).primary_key[<span class="hljs-number">0</span>]
        self._pk_type = pk_column.<span class="hljs-built_in">type</span>.python_type  <span class="hljs-comment"># int / str</span>
</code></pre>
<p>å› æ­¤å¯¹äºå•è¡¨çš„Getæ–¹æ³•ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸‹ï¼Œè®©ä»–åŒ¹é…ä¸»é”®çš„ç±»å‹è¿›è¡Œæ¯”è¾ƒï¼Œè¿™æ ·è¿‡å¯¹äºä¸¥æ ¼ç±»å‹åˆ¤æ–­çš„Postgresqlä¹Ÿæ­£å¸¸åŒ¹é…äº†ã€‚</p>
<pre><code class="hljs language-python" lang="python">    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">self, db: AsyncSession, <span class="hljs-built_in">id</span>: PrimaryKeyType</span>) -&gt; <span class="hljs-type">Optional</span>[ModelType]:
        <span class="hljs-string">"""æ ¹æ®ä¸»é”®è·å–ä¸€ä¸ªå¯¹è±¡"""</span>
        
        <span class="hljs-comment">#å¯¹idçš„ä¸»é”®è¿›è¡Œç±»å‹è½¬æ¢ï¼Œself._pk_typeåœ¨æ„é€ å‡½æ•°çš„åˆå§‹åŒ–ä¸­è·å–</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-built_in">id</span> = self._pk_type(<span class="hljs-built_in">id</span>)
        <span class="hljs-keyword">except</span> Exception:
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"Invalid primary key type: <span class="hljs-subst">{<span class="hljs-built_in">id</span>}</span>"</span>)
        
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(<span class="hljs-built_in">id</span>, <span class="hljs-built_in">str</span>):
            query = select(self.model).<span class="hljs-built_in">filter</span>(func.lower(self.model.<span class="hljs-built_in">id</span>) == <span class="hljs-built_in">id</span>.lower())
        <span class="hljs-keyword">else</span>:
            query = select(self.model).<span class="hljs-built_in">filter</span>(self.model.<span class="hljs-built_in">id</span> == <span class="hljs-built_in">id</span>)

        result = <span class="hljs-keyword">await</span> db.execute(query)
        item = result.scalars().first()

        <span class="hljs-keyword">return</span> item
</code></pre>
<p>å¯¹äºåˆ é™¤çš„æ•°æ®ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç±»ä¼¼çš„å¤„ç†å¯¹æ¯”è¿›è¡Œäº†ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sqlalchemy.orm <span class="hljs-keyword">import</span> Session, Query
<span class="hljs-keyword">from</span> sqlalchemy.ext.asyncio <span class="hljs-keyword">import</span> AsyncSession
<span class="hljs-keyword">from</span> sqlalchemy <span class="hljs-keyword">import</span> delete <span class="hljs-keyword">as</span> sa_delete, update <span class="hljs-keyword">as</span> sa_update

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">delete_byid</span>(<span class="hljs-params">self, db: AsyncSession, <span class="hljs-built_in">id</span>: PrimaryKeyType</span>) -&gt; <span class="hljs-built_in">bool</span>:
    <span class="hljs-string">"""æ ¹æ®ä¸»é”®åˆ é™¤ä¸€ä¸ªå¯¹è±¡
    
    :param id: ä¸»é”®å€¼
    """</span>
    
    <span class="hljs-comment">#å¯¹idçš„ä¸»é”®è¿›è¡Œç±»å‹è½¬æ¢ï¼Œself._pk_typeåœ¨æ„é€ å‡½æ•°çš„åˆå§‹åŒ–ä¸­è·å–</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-built_in">id</span> = self._pk_type(<span class="hljs-built_in">id</span>)
    <span class="hljs-keyword">except</span> Exception:
        <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"Invalid primary key type: <span class="hljs-subst">{<span class="hljs-built_in">id</span>}</span>"</span>)
    
    del_query: sa_delete
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(<span class="hljs-built_in">id</span>, <span class="hljs-built_in">str</span>):
        del_query = sa_delete(self.model).where(
            func.lower(self.model.<span class="hljs-built_in">id</span>) == <span class="hljs-built_in">id</span>.lower()
        )
    <span class="hljs-keyword">else</span>:
        del_query = sa_delete(self.model).where(self.model.<span class="hljs-built_in">id</span> == <span class="hljs-built_in">id</span>)

    result = <span class="hljs-keyword">await</span> db.execute(del_query)

    <span class="hljs-keyword">await</span> db.commit()
    <span class="hljs-keyword">return</span> result.rowcount &gt; <span class="hljs-number">0</span>
</code></pre>
<p>å¯¹äºæä¾›å¤šæ¡ä»¶çš„æŸ¥è¯¢æˆ–è€…è¿‡æ»¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<strong>where</strong>å‡½æ•°æˆ–è€…<strong>filter</strong>å‡½æ•°ï¼Œåœ¨ SQLAlchemy ä¸­ï¼Œ<code>select(...).where(...)</code>Â å’ŒÂ <code>select(...).filter(...)</code>Â éƒ½ç”¨äºæ„é€ æŸ¥è¯¢æ¡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºç­‰æ•ˆã€‚</p>
<pre><code class="hljs language-python" lang="python">query = select(self.model).where(self.model.<span class="hljs-built_in">id</span> == <span class="hljs-built_in">id</span>)

query = select(self.model).<span class="hljs-built_in">filter</span>(self.model.<span class="hljs-built_in">id</span> == <span class="hljs-built_in">id</span>)
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡sqlAlchemyçš„and_å’Œor_å‡½æ•°æ¥è¿›è¡Œç»„åˆå¤šä¸ªæ¡ä»¶ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">from</span> sqlalchemy import ( <span class="hljs-keyword">Table</span>,<span class="hljs-keyword">Column</span>,and_,or_,<span class="hljs-keyword">asc</span>,<span class="hljs-keyword">desc</span>,<span class="hljs-keyword">select</span>,func,<span class="hljs-keyword">distinct</span>,text, <span class="hljs-type">Integer</span>)

....
    <span class="hljs-keyword">match</span> expression:
        <span class="hljs-keyword">case</span> "and":
            query <span class="hljs-operator">=</span> await db.execute(
                <span class="hljs-keyword">select</span>(self.model)
                .<span class="hljs-keyword">filter</span>(and_(  <span class="hljs-operator">*</span> where_list)) 
                .order_by(<span class="hljs-operator">*</span>order_by_list)
            )
        <span class="hljs-keyword">case</span> "or":
            query <span class="hljs-operator">=</span> await db.execute(
                <span class="hljs-keyword">select</span>(self.model).<span class="hljs-keyword">filter</span>(or_(  <span class="hljs-operator">*</span>where_list)) .order_by(<span class="hljs-operator">*</span>order_by_list)
            )
</code></pre>
<p>Pythonçš„SqlAlchemyæä¾›Â InstrumentedAttribute å¯¹è±¡æ¥æ“ä½œå¤šä¸ªæ¡ä»¶ï¼Œå¦‚æˆ‘ä»¬å¯¹äºä¸€äº›å¤šæ¡ä»¶çš„å¤„ç†ï¼Œå¯ä»¥åˆ©ç”¨å®ƒæ¥ä¼ é€’å¤šä¸ªå‚æ•°ã€‚</p>
<pre><code class="hljs language-python" lang="python">    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_all_by_attributes</span>(<span class="hljs-params">
        self, db: AsyncSession, *attributes: InstrumentedAttribute, sorting: <span class="hljs-built_in">str</span> = <span class="hljs-string">""</span>
    </span>) -&gt; <span class="hljs-type">List</span>[ModelType] | <span class="hljs-literal">None</span>:
        <span class="hljs-string">"""æ ¹æ®åˆ—åç§°å’Œå€¼è·å–ç›¸å…³çš„å¯¹è±¡åˆ—è¡¨

        :param sorting: æ ¼å¼ï¼šname asc æˆ– name asc,age desc
        :param attributes: SQLAlchemy InstrumentedAttribute objectsï¼Œå¯ä»¥è¾“å…¥å¤šä¸ªæ¡ä»¶
        ä¾‹å­ï¼šUser.id != 1 æˆ–è€… User.username == "JohnDoe"
        """</span>

        order_by_list = parse_sort_string(sorting, self.model)
        query = select(self.model).<span class="hljs-built_in">filter</span>(and_(*attributes)).order_by(*order_by_list)
        
        result = <span class="hljs-keyword">await</span> db.execute(query)
        <span class="hljs-keyword">return</span> result.scalars().<span class="hljs-built_in">all</span>()
</code></pre>
<p>ä¾‹å¦‚ï¼Œå¯¹äº æ¨¡å‹Â Material å¯¹è±¡ï¼Œæˆ‘ä»¬å¯¹å®ƒè¿›è¡Œå¤šä¸ªæ¡ä»¶çš„æŸ¥è¯¢å¤„ç†ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œçº¢è‰²éƒ¨åˆ†ä¸º *attributes: InstrumentedAttribute å‚æ•°ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">items</span> = await super().get_all_by_attributes(
    db,
 <span class="hljs-attr">Material.id</span> == vercol.id,
    <span class="hljs-attr">Material.vercol</span> == vercol.vercol,
    <span class="hljs-attr">Material.ischecked</span> == <span class="hljs-number">0</span>,
    <span class="hljs-attr">Material.status</span> == <span class="hljs-number">0</span>, 
)
</code></pre>
<p>åŒæ ·æˆ‘ä»¬å¯ä»¥åˆ©ç”¨å®ƒæ¥è·å–æ•°é‡ï¼Œæˆ–è€…åˆ¤æ–­å¤šæ¡ä»¶çš„è®°å½•æ˜¯å¦å­˜åœ¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/757682ba154a422caaa6813152a5e890~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LyN5Y2O6IGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767240347&amp;x-signature=TJaMmqNVSsmbwb%2FVQgrgL%2B05Ezk%3D" alt="image" loading="lazy"/></p>
<p>Â åœ¨æ•°æ®æ’å…¥æˆ–è€…æ›´æ–°çš„æ“ä½œä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ¥å—å¯¹è±¡ç±»å‹æˆ–è€…å­—å…¸ç±»å‹çš„å‚æ•°å¯¹è±¡ï¼Œå› æ­¤æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<pre><code class="hljs language-python" lang="python">   <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">self, db: AsyncSession, obj_in: DtoType | <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]</span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-string">"""æ›´æ–°å¯¹è±¡
        
        :param obj_in: å¯¹è±¡è¾“å…¥æ•°æ®,å¯ä»¥æ˜¯ DTO å¯¹è±¡æˆ–å­—å…¸
        """</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(obj_in, <span class="hljs-built_in">dict</span>):
                obj_id = obj_in.get(<span class="hljs-string">"id"</span>)
                <span class="hljs-keyword">if</span> obj_id <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
                    <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"id is required for update"</span>)
                update_data = obj_in
            <span class="hljs-keyword">else</span>:
                obj_id = obj_in.<span class="hljs-built_in">id</span>
                <span class="hljs-comment"># update_data = vars(obj_in)  </span>
                update_data = obj_in.model_dump(exclude_unset=<span class="hljs-literal">True</span>)

            query = select(self.model).<span class="hljs-built_in">filter</span>(self.model.<span class="hljs-built_in">id</span> == obj_id)
            result = <span class="hljs-keyword">await</span> db.execute(query)
            db_obj = result.scalars().first()

            <span class="hljs-keyword">if</span> db_obj:
                <span class="hljs-comment"># æ›´æ–°å¯¹è±¡å­—æ®µ</span>
                <span class="hljs-keyword">for</span> field, value <span class="hljs-keyword">in</span> update_data.items():
                    <span class="hljs-comment"># è·³è¿‡ä»¥ "_" å¼€å¤´çš„ç§æœ‰å±æ€§</span>
                    <span class="hljs-keyword">if</span> field.startswith(<span class="hljs-string">"_"</span>):
                        <span class="hljs-keyword">continue</span>
                    <span class="hljs-built_in">setattr</span>(db_obj, field, value)

                <span class="hljs-comment"># å¤„ç†æ›´æ–°å‰çš„å›è°ƒå¤„ç†</span>
 self.on_before_update(update_data, db_obj) <span class="hljs-comment"># æäº¤äº‹åŠ¡</span>
                <span class="hljs-keyword">await</span> db.commit()
                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
            <span class="hljs-keyword">else</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
        <span class="hljs-keyword">except</span> SQLAlchemyError <span class="hljs-keyword">as</span> e:
            self.logger.error(<span class="hljs-string">f"update æ“ä½œå‡ºç°é”™è¯¯: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">await</span> db.rollback()  <span class="hljs-comment"># ç¡®ä¿åœ¨å‡ºé”™æ—¶å›æ»šäº‹åŠ¡</span>
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
</code></pre>
<p>æˆ‘ä»¬åœ¨æ’å…¥æˆ–è€…æ›´æ–°æ•°æ®çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¼šé»˜è®¤æ›´æ–°ä¸€äº›å­—æ®µï¼Œå¦‚åˆ›å»ºäººï¼Œåˆ›å»ºæ—¥æœŸã€ç¼–è¾‘äººï¼Œç¼–è¾‘æ—¥æœŸç­‰ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒå•ç‹¬ä½œä¸ºä¸€ä¸ªå¯ä»¥ç»™å­ç±»é‡å†™çš„å‡½æ•°ï¼ŒåŸºç±»åšä¸€äº›é»˜è®¤çš„å¤„ç†ã€‚</p>
<pre><code class="hljs language-python" lang="python">    <span class="hljs-keyword">def</span> <span class="hljs-title function_">on_before_update</span>(<span class="hljs-params">self, update_data: <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>], db_obj: ModelType</span>) -&gt; <span class="hljs-literal">None</span>:
        <span class="hljs-string">"""æ›´æ–°å¯¹è±¡å‰çš„å›è°ƒå‡½æ•°ï¼Œå­ç±»å¯ä»¥é‡å†™æ­¤æ–¹æ³•

        å¯é€šè¿‡ setattr(db_obj, field, value) è®¾ç½®å­—æ®µå€¼
        """</span>
        
        <span class="hljs-built_in">setattr</span>(db_obj, <span class="hljs-string">"edittime"</span>, datetime.now())
        user :CurrentUserIns  = get_current_user()
        <span class="hljs-keyword">if</span> user:
            <span class="hljs-built_in">setattr</span>(db_obj, <span class="hljs-string">"editor"</span>, user.fullname)
            <span class="hljs-built_in">setattr</span>(db_obj, <span class="hljs-string">"editor_id"</span>, user.<span class="hljs-built_in">id</span>)

            <span class="hljs-built_in">setattr</span>(db_obj, <span class="hljs-string">"company_id"</span>, user.company_id)
            <span class="hljs-built_in">setattr</span>(db_obj, <span class="hljs-string">"companyname"</span>, user.companyname)
</code></pre>
<p>æœ‰æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦è·å–æŸä¸ªå­—æ®µéé‡å¤çš„åˆ—è¡¨ï¼Œç”¨æ¥åšä¸ºåŠ¨æ€ä¸‹æ‹‰åˆ—è¡¨çš„æ•°æ®ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢å‡½æ•°å°è£…ä¸‹ã€‚</p>
<pre><code class="hljs language-python" lang="python">    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_field_list</span>(<span class="hljs-params">self, db: AsyncSession, field_name: <span class="hljs-built_in">str</span></span>) -&gt; Iterable[<span class="hljs-built_in">str</span>]:
        <span class="hljs-string">"""è·å–æŒ‡å®šå­—æ®µå€¼çš„å”¯ä¸€åˆ—è¡¨

        :param field_name: å­—æ®µåç§°
        """</span>

        field = <span class="hljs-built_in">getattr</span>(self.model, field_name)
        query = select(distinct(field))
        result = <span class="hljs-keyword">await</span> db.execute(query)
        <span class="hljs-keyword">return</span> result.scalars().<span class="hljs-built_in">all</span>()
</code></pre>
<h3 data-id="heading-2">3ã€å¤šè¡¨è”åˆçš„å¤„ç†æ“ä½œÂ </h3>
<p>å¤šè¡¨æ“ä½œï¼Œä¹Ÿæ˜¯æˆ‘ä»¬ç»å¸¸ç¢°åˆ°çš„å¤„ç†æ–¹å¼ï¼Œå¦‚å¯¹äºå­—å…¸ç±»å‹å’Œå­—å…¸é¡¹ç›®ï¼Œä»–ä»¬æ˜¯ä¸¤ä¸ªè¡¨ï¼Œéœ€è¦è”åˆèµ·æ¥è·å–æ•°æ®ï¼Œé‚£ä¹ˆå°±éœ€è¦å¤šè¡¨çš„è”åˆæ“ä½œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fcde1deeeecb42ee9bf077f276e466df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LyN5Y2O6IGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767240347&amp;x-signature=gqBb0Bk5oM2cfSPVZPjahlYledk%3D" alt="image" loading="lazy"/></p>
<p>Â å¦‚ä¸‹æ˜¯å­—å…¸CRUDç±»ä¸­ï¼Œè”åˆå­—å…¸ç±»å‹è·å–æ•°æ®çš„è®°å½•å¤„ç†ã€‚</p>
<pre><code class="hljs language-python" lang="python">    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_dict_by_typename</span>(<span class="hljs-params">self, db: AsyncSession, dicttype_name: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">dict</span>:
        <span class="hljs-string">"""æ ¹æ®å­—å…¸ç±»å‹åç§°è·å–æ‰€æœ‰è¯¥ç±»å‹çš„å­—å…¸åˆ—è¡¨é›†åˆ"""</span>
        result = <span class="hljs-keyword">await</span> db.execute(
            select(self.model)
             .join(DictType, DictType.<span class="hljs-built_in">id</span> == self.model.dicttype_id)   <span class="hljs-comment"># å…³è”å­—å…¸ç±»å‹è¡¨</span>
            .<span class="hljs-built_in">filter</span>(DictType.name == dicttype_name) <span class="hljs-comment"># è¿‡æ»¤å­—å…¸ç±»å‹åç§°</span>
            .order_by(DictData.seq)  <span class="hljs-comment"># æ’åº</span>
        )
        items = result.scalars().<span class="hljs-built_in">all</span>()

        <span class="hljs-built_in">dict</span> = {}
        <span class="hljs-keyword">for</span> info <span class="hljs-keyword">in</span> items:
            <span class="hljs-keyword">if</span> info.name <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">dict</span>:
                <span class="hljs-built_in">dict</span>[info.name] = info.value

        <span class="hljs-keyword">return</span> <span class="hljs-built_in">dict</span>
</code></pre>
<p>å¦‚æœæˆ‘ä»¬éœ€è¦å¯¹æŸä¸ªè¡¨çš„é€’å½’è·å–æ ‘åˆ—è¡¨ï¼Œå¯ä»¥å¦‚ä¸‹å¤„ç†</p>
<pre><code class="hljs language-python" lang="python">    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_tree</span>(<span class="hljs-params">self, db: AsyncSession, pid: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">list</span>[DictType]:
        <span class="hljs-string">"""è·å–å­—å…¸ç±»å‹ä¸€çº§åˆ—è¡¨åŠå…¶ä¸‹é¢çš„å†…å®¹"""</span>

        <span class="hljs-comment"># ä½¿ç”¨ä¸‰å…ƒè¿ç®—ç¬¦å°† pid è®¾ä¸º "-1"ï¼ˆå¦‚æœ pid æ˜¯ null æˆ–ç©ºç™½ï¼‰æˆ–ä¿æŒåŸå€¼</span>
        pid = <span class="hljs-string">"-1"</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> pid <span class="hljs-keyword">or</span> pid.strip() == <span class="hljs-string">""</span> <span class="hljs-keyword">else</span> pid
        result = <span class="hljs-keyword">await</span> db.execute(
            select(self.model)
            .<span class="hljs-built_in">filter</span>(self.model.pid == pid)
            .options(selectinload(DictType.children))
        )
        nodes = result.scalars().<span class="hljs-built_in">all</span>()
        <span class="hljs-keyword">return</span> nodes
</code></pre>
<p>æˆ‘ä»¬æ¥å‡è®¾ç”¨æˆ·å’Œæ–‡ç« çš„ç¤ºä¾‹è¡¨ç»“æ„ï¼ˆORM æ¨¡å‹ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<pre><code class="hljs language-ini" lang="ini">class User(Base):
    <span class="hljs-attr">__tablename__</span> = <span class="hljs-string">"users"</span>
    <span class="hljs-attr">id</span> = Column(Integer, primary_key=<span class="hljs-literal">True</span>, index=<span class="hljs-literal">True</span>)
    <span class="hljs-attr">name</span> = Column(String)
    <span class="hljs-attr">email</span> = Column(String)
    <span class="hljs-attr">articles</span> = relationship(<span class="hljs-string">"Article"</span>, back_populates=<span class="hljs-string">"author"</span>)


class Article(Base):
    <span class="hljs-attr">__tablename__</span> = <span class="hljs-string">"articles"</span>
    <span class="hljs-attr">id</span> = Column(Integer, primary_key=<span class="hljs-literal">True</span>, index=<span class="hljs-literal">True</span>)
    <span class="hljs-attr">title</span> = Column(String)
    <span class="hljs-attr">content</span> = Column(Text)
    <span class="hljs-attr">user_id</span> = Column(Integer, ForeignKey(<span class="hljs-string">"users.id"</span>))
    <span class="hljs-attr">author</span> = relationship(<span class="hljs-string">"User"</span>, back_populates=<span class="hljs-string">"articles"</span>)
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢å‡½æ•°å¤„ç†è·å¾—ç›¸å…³çš„è®°å½•é›†åˆã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_user_articles</span>(<span class="hljs-params">db: AsyncSession</span>):
    stmt = (
        select(User, Article)
        .join(Article, Article.user_id == User.<span class="hljs-built_in">id</span>)
    )
    result = <span class="hljs-keyword">await</span> db.execute(stmt)
    <span class="hljs-keyword">return</span> result.<span class="hljs-built_in">all</span>()   <span class="hljs-comment"># [ (User(), Article()), . ..]</span>
</code></pre>
<p>å¦‚æœéœ€è¦å¯ä»¥ä½¿ç”¨outer_joinå‡½æ•°å¤„ç†</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_users_with_articles</span>(<span class="hljs-params">db: AsyncSession</span>):
    stmt = (
        select(User, Article)
        .outerjoin(Article, Article.user_id == User.<span class="hljs-built_in">id</span>)
    )
    result = <span class="hljs-keyword">await</span> db.execute(stmt)
    <span class="hljs-keyword">return</span> result.<span class="hljs-built_in">all</span>()  <span class="hljs-comment"># ç”¨æˆ·å³ä¾¿æ²¡æœ‰æ–‡ç« ä¹Ÿä¼šå‡ºç°</span>
</code></pre>
<p>å¦‚æœæˆ‘ä»¬éœ€è¦è·å–æœ‰æ–‡ç« çš„æ‰€æœ‰ç”¨æˆ·ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<pre><code class="hljs language-scss" lang="scss">async def <span class="hljs-built_in">get_users_with_articles</span>(db: AsyncSession):
    stmt = <span class="hljs-built_in">select</span>(User).<span class="hljs-built_in">options</span>(<span class="hljs-built_in">selectinload</span>(User.articles))  # è‡ªåŠ¨ load å…³è”
    result = await db.<span class="hljs-built_in">execute</span>(stmt)
    return result.<span class="hljs-built_in">scalars</span>().<span class="hljs-built_in">all</span>()
</code></pre>
<p><code>selectinload</code>Â ä¼šæ‰§è¡Œä¸¤æ¬¡ SQLï¼Œä½†æ•ˆç‡é«˜ï¼Œä¸ä¼šäº§ç”Ÿç¬›å¡å°”ç§¯ï¼Œéå¸¸é€‚åˆé›†åˆæŸ¥è¯¢ã€‚</p>
<p>å¤šè¡¨é“¾å¼ Joinçš„å¤„ç†ï¼Œå¯ä»¥è·å¾—ä¸¤ä¸ªè¡¨çš„ä¸åŒä¿¡æ¯è¿›è¡Œç»„åˆã€‚</p>
<pre><code class="hljs language-css" lang="css">async def get_articles_with_author(db: AsyncSession):
    stmt = (
        <span class="hljs-built_in">select</span>(Article.title, User.name.<span class="hljs-built_in">label</span>(<span class="hljs-string">"author"</span>))
        .<span class="hljs-built_in">join</span>(User, Article.user_id == User.id)
    )
    rows = await db.<span class="hljs-built_in">execute</span>(stmt)
    return rows.<span class="hljs-built_in">mappings</span>().<span class="hljs-built_in">all</span>()   # ä»¥ dict å½¢å¼è¿”å› [{'title':..., <span class="hljs-string">'author'</span>:...}]
</code></pre>
<p>å¸¦ç­›é€‰æ¡ä»¶ä¸åˆ†é¡µçš„å¤„ç†å®ç°ï¼Œå¦‚ä¸‹æ‰€ç¤º</p>
<pre><code class="hljs language-scss" lang="scss">async def <span class="hljs-built_in">search_articles</span>(db: AsyncSession, keyword: str, page: int = <span class="hljs-number">1</span>, size: int = <span class="hljs-number">10</span>):
    stmt = (
        <span class="hljs-built_in">select</span>(Article, User.name.<span class="hljs-built_in">label</span>(<span class="hljs-string">"author"</span>))
        .<span class="hljs-built_in">join</span>(User)
        .<span class="hljs-built_in">filter</span>(Article.title.<span class="hljs-built_in">contains</span>(keyword))
        .<span class="hljs-built_in">offset</span>((page - <span class="hljs-number">1</span>) * size)
        .<span class="hljs-built_in">limit</span>(size)
    )
    result = await db.<span class="hljs-built_in">execute</span>(stmt)
    return result.<span class="hljs-built_in">mappings</span>().<span class="hljs-built_in">all</span>()
</code></pre>
<p>Â 
å¯¹äºæƒé™ç®¡ç†ç³»ç»Ÿæ¥è¯´ï¼Œä¸€èˆ¬æœ‰ç”¨æˆ·ã€è§’è‰²ï¼Œä»¥åŠç”¨æˆ·è§’è‰²çš„ä¸­é—´è¡¨ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªåœ¨SQLAlchemyæœ€ä½³å®è·µæ˜¯å¦‚ä½•çš„æ“ä½œã€‚</p>
<pre><code class="hljs language-ini" lang="ini">from sqlalchemy import Table, Column, Integer, ForeignKey
from sqlalchemy.orm import relationship, Mapped, mapped_column
from database import Base

<span class="hljs-comment"># --- ä¸­é—´è¡¨å†™æ³• ---</span>
<span class="hljs-attr">role_user</span> = Table(
    "role_user",
    Base.metadata,
    Column("user_id", ForeignKey("users.id"), <span class="hljs-attr">primary_key</span>=<span class="hljs-literal">True</span>),
    Column("role_id", ForeignKey("roles.id"), <span class="hljs-attr">primary_key</span>=<span class="hljs-literal">True</span>)
)

class User(Base):
    <span class="hljs-attr">__tablename__</span> = <span class="hljs-string">"users"</span>
    id: Mapped<span class="hljs-section">[int]</span> = mapped_column(<span class="hljs-attr">primary_key</span>=<span class="hljs-literal">True</span>)
    username: Mapped<span class="hljs-section">[str]</span> = mapped_column()

    roles: Mapped<span class="hljs-section">[list["Role"]]</span> = relationship(
        <span class="hljs-attr">secondary</span>=role_user,
        <span class="hljs-attr">back_populates</span>=<span class="hljs-string">"users"</span>,
        <span class="hljs-attr">lazy</span>=<span class="hljs-string">"selectin"</span>
    )

class Role(Base):
    <span class="hljs-attr">__tablename__</span> = <span class="hljs-string">"roles"</span>
    id: Mapped<span class="hljs-section">[int]</span> = mapped_column(<span class="hljs-attr">primary_key</span>=<span class="hljs-literal">True</span>)
    name: Mapped<span class="hljs-section">[str]</span> = mapped_column()

    users: Mapped<span class="hljs-section">[list[User]]</span> = relationship(
        <span class="hljs-attr">secondary</span>=role_user,
        <span class="hljs-attr">back_populates</span>=<span class="hljs-string">"roles"</span>,
        <span class="hljs-attr">lazy</span>=<span class="hljs-string">"selectin"</span>
    )
</code></pre>
<p>åœ¨ SQLAlchemy å£°æ˜å¤šå¯¹å¤šå…³ç³»æ—¶ï¼Œ<code>secondary</code>Â å‚æ•°æ—¢å¯ä»¥å¡«Â <strong>å­—ç¬¦ä¸²å½¢å¼çš„è¡¨å</strong>ï¼Œä¹Ÿå¯ä»¥å¡«Â <strong>å·²ç»å®šä¹‰å¥½çš„ä¸­é—´è¡¨å¯¹è±¡ï¼ˆTable å¯¹è±¡ï¼‰ã€‚</strong></p>
<p><strong>â‘  econdary="role_user" â€”â€” ä½¿ç”¨å­—ç¬¦ä¸²è¡¨å</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">roles</span> = relationship(<span class="hljs-string">"Role"</span>, secondary=<span class="hljs-string">"role_user"</span>, back_populates=<span class="hljs-string">"users"</span>)
</code></pre>
<p><strong>â‘¡ secondary=role_user â€”â€” ä¼ å…¥ä¸­é—´è¡¨å¯¹è±¡ï¼ˆæ¨èæ–¹å¼ï¼‰</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">role_user</span> = Table(
    "role_user",
    Base.metadata,
    Column("user_id", ForeignKey("users.id"), <span class="hljs-attr">primary_key</span>=<span class="hljs-literal">True</span>),
    Column("role_id", ForeignKey("roles.id"), <span class="hljs-attr">primary_key</span>=<span class="hljs-literal">True</span>)
)

<span class="hljs-attr">roles</span> = relationship(<span class="hljs-string">"Role"</span>, secondary=role_user, back_populates=<span class="hljs-string">"users"</span>)
</code></pre>
<p>å¯¹äºå¦‚æœè·å–å¯¹åº”è§’è‰²çš„ç”¨æˆ·è®°å½•ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢æ–¹å¼è·å–ï¼ˆé€šè¿‡è¿æ¥ä¸­é—´è¡¨çš„æ–¹å¼ï¼‰</p>
<pre><code class="hljs language-ini" lang="ini">async def get_users_by_role(db: AsyncSession, role_id: int) -&gt; list<span class="hljs-section">[User]</span>:
    <span class="hljs-attr">stmt</span> = (
        select(User)
        .join(role_user, <span class="hljs-attr">role_user.c.user_id</span> == User.id)
        .where(<span class="hljs-attr">role_user.c.role_id</span> == role_id)
    )
    <span class="hljs-attr">result</span> = await db.execute(stmt)
    return result.scalars().all()
</code></pre>
<p>ä¹Ÿå¯ä»¥ä¸‹é¢çš„æ–¹å¼è¿›è¡Œå¤„ç†ï¼ˆä½¿ç”¨ relationship any()ï¼‰ï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</p>
<pre><code class="hljs language-python" lang="python">select(User).<span class="hljs-built_in">filter</span>(User.roles.<span class="hljs-built_in">any</span>(<span class="hljs-built_in">id</span>=role_id))
</code></pre>
<p>å¦‚æœéœ€è¦å†™å…¥ç”¨æˆ·ã€è§’è‰²çš„å…³è”å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢æ–¹æ³•æ¥é€šè¿‡ä¸­é—´è¡¨è¿›è¡Œåˆ¤æ–­å¹¶å†™å…¥è®°å½•ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">from sqlalchemy import select, insert

async def add_users_to_role(db: AsyncSession, role_id: int, user_ids: list<span class="hljs-section">[int]</span>):
    <span class="hljs-comment"># 1ï¸âƒ£ æŸ¥è¯¢å·²æœ‰å…³è” user_id</span>
    <span class="hljs-attr">stmt</span> = select(role_user.c.user_id).where(role_user.c.role_id == role_id)
    <span class="hljs-attr">res</span> = await db.execute(stmt)
    <span class="hljs-attr">existing_user_ids</span> = {row[<span class="hljs-number">0</span>] for row in res.fetchall()}

    <span class="hljs-comment"># 2ï¸âƒ£ è¿‡æ»¤å‡ºæ–°çš„ user_id</span>
    <span class="hljs-attr">new_user_ids</span> = [uid for uid in user_ids if uid not in existing_user_ids]
    if not new_user_ids:
        return 0  <span class="hljs-comment"># æ²¡æœ‰æ–°å¢</span>

    <span class="hljs-comment"># 3ï¸âƒ£ æ‰¹é‡æ’å…¥</span>
    <span class="hljs-attr">values</span> = [{<span class="hljs-string">"user_id"</span>: uid, <span class="hljs-string">"role_id"</span>: role_id} for uid in new_user_ids]
    <span class="hljs-attr">stmt</span> = insert(role_user).values(values)
    await db.execute(stmt)
    await db.commit()

    return len(new_user_ids)
</code></pre>
<p>å¦‚æœåªæ˜¯å•ä¸ªè®°å½•çš„æ’å…¥ï¼Œå¯ä»¥åˆ©ç”¨ä¸‹é¢çš„æ–¹å¼å¤„ç†ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sqlalchemy <span class="hljs-keyword">import</span> select, insert

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">add_user_to_role</span>(<span class="hljs-params">db: AsyncSession, role_id: <span class="hljs-built_in">int</span>, user_id: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">bool</span>:
    <span class="hljs-comment"># 1ï¸âƒ£ æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨å…³è”</span>
    stmt = select(role_user).where(
        role_user.c.role_id == role_id,
        role_user.c.user_id == user_id
    )
    res = <span class="hljs-keyword">await</span> db.execute(stmt)
    exists = res.first()

    <span class="hljs-keyword">if</span> exists:
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>  <span class="hljs-comment"># å·²å­˜åœ¨ï¼Œä¸å†æ’å…¥</span>

    <span class="hljs-comment"># 2ï¸âƒ£ æ’å…¥è®°å½•</span>
    stmt = insert(role_user).values(user_id=user_id, role_id=role_id)
    <span class="hljs-keyword">await</span> db.execute(stmt)
    <span class="hljs-keyword">await</span> db.commit()

    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
</code></pre>
<p>ä»¥ä¸Šå°±æ˜¯å¯¹äºåœ¨Python+FastAPIçš„åç«¯é¡¹ç›®ä¸­ä½¿ç”¨SqlAlchemyæ“ä½œæ•°æ®çš„å‡ ç§å¸¸è§æ–¹å¼ï¼ŒåŒ…æ‹¬å•è¡¨å¤„ç†ï¼Œå¤šè¡¨å…³è”ã€ä¸­é—´è¡¨çš„æ•°æ®ç»´æŠ¤å’Œå®šä¹‰ç­‰å†…å®¹ï¼Œæ˜¯æˆ‘ä»¬åœ¨æ“ä½œå¸¸è§„æ•°æ®çš„æ—¶å€™ï¼Œç»å¸¸ç¢°åˆ°çš„å‡ ç§æ–¹å¼ã€‚</p>
<p>å¸Œæœ›ä¸Šæ–‡å¯¹ä½ æœ‰æ‰€å¯å‘å’Œå¸®åŠ©ï¼Œæ„Ÿè°¢é˜…è¯»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pythonæ€§èƒ½ç¿»å€çš„5ä¸ªéšè—æŠ€å·§ï¼šè®©ä½ çš„ä»£ç è·‘å¾—æ¯”åŒäº‹å¿«50%]]></title>    <link>https://juejin.cn/post/7587322796825870376</link>    <guid>https://juejin.cn/post/7587322796825870376</guid>    <pubDate>2025-12-25T04:16:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587322796825870376" data-draft-id="7587327550872895488" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pythonæ€§èƒ½ç¿»å€çš„5ä¸ªéšè—æŠ€å·§ï¼šè®©ä½ çš„ä»£ç è·‘å¾—æ¯”åŒäº‹å¿«50%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-25T04:16:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pythonæ€§èƒ½ç¿»å€çš„5ä¸ªéšè—æŠ€å·§ï¼šè®©ä½ çš„ä»£ç è·‘å¾—æ¯”åŒäº‹å¿«50%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T04:16:48.000Z" title="Thu Dec 25 2025 04:16:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Pythonæ€§èƒ½ç¿»å€çš„5ä¸ªéšè—æŠ€å·§ï¼šè®©ä½ çš„ä»£ç è·‘å¾—æ¯”åŒäº‹å¿«50%</strong></h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>Pythonå› å…¶ç®€æ´æ˜“è¯»çš„è¯­æ³•å’Œå¼ºå¤§çš„ç”Ÿæ€ç³»ç»Ÿè€Œå¹¿å—æ¬¢è¿ï¼Œä½†åœ¨æ€§èƒ½æ–¹é¢å´å¸¸å¸¸è¢«äººè¯Ÿç—…ã€‚ç„¶è€Œï¼ŒPythonçš„æ€§èƒ½é—®é¢˜å¹¶éæ— è§£â€”â€”é€šè¿‡ä¸€äº›é²œä¸ºäººçŸ¥çš„ä¼˜åŒ–æŠ€å·§ï¼Œä½ å¯ä»¥æ˜¾è‘—æå‡ä»£ç çš„æ‰§è¡Œæ•ˆç‡ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨5ä¸ªç»è¿‡éªŒè¯çš„éšè—æŠ€å·§ï¼Œå¸®åŠ©ä½ è½»æ¾å®ç°æ€§èƒ½ç¿»å€ï¼Œç”šè‡³åœ¨æŸäº›åœºæ™¯ä¸‹æ¯”åŒäº‹çš„ä»£ç å¿«50%ä»¥ä¸Šã€‚è¿™äº›æŠ€å·§æ¶µç›–äº†ä»æ•°æ®ç»“æ„é€‰æ‹©åˆ°åº•å±‚ä¼˜åŒ–çš„å¤šä¸ªå±‚é¢ï¼Œé€‚åˆä¸­é«˜çº§å¼€å‘è€…è¿›ä¸€æ­¥æå‡ä»£ç æ•ˆç‡ã€‚</p>
<hr/>
<h3 data-id="heading-2">1. ä½¿ç”¨å†…ç½®å‡½æ•°å’Œåº“æ›¿ä»£æ‰‹åŠ¨å®ç°</h3>
<h4 data-id="heading-3">ä¸ºä»€ä¹ˆæœ‰æ•ˆï¼Ÿ</h4>
<p>Pythonçš„å†…ç½®å‡½æ•°ï¼ˆå¦‚<code>map()</code>ã€<code>filter()</code>ã€<code>sum()</code>ï¼‰å’Œæ ‡å‡†åº“ï¼ˆå¦‚<code>collections</code>ã€<code>itertools</code>ï¼‰æ˜¯ç”¨Cå®ç°çš„ï¼Œæ‰§è¡Œé€Ÿåº¦è¿œé«˜äºçº¯Pythonä»£ç ã€‚è®¸å¤šå¼€å‘è€…ä¹ æƒ¯æ‰‹åŠ¨å®ç°è¿™äº›åŠŸèƒ½ï¼Œå´å¿½ç•¥äº†å†…ç½®å‡½æ•°çš„æ€§èƒ½ä¼˜åŠ¿ã€‚</p>
<h4 data-id="heading-4">ç¤ºä¾‹å¯¹æ¯”</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ‰‹åŠ¨æ±‚å’Œ</span>
total = <span class="hljs-number">0</span>
<span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> large_list:
    total += num

<span class="hljs-comment"># ä½¿ç”¨sum()å†…ç½®å‡½æ•°</span>
total = <span class="hljs-built_in">sum</span>(large_list)
</code></pre>
<p>åè€…ä¸ä»…æ›´ç®€æ´ï¼Œè€Œä¸”åœ¨å¤„ç†å¤§è§„æ¨¡æ•°æ®æ—¶é€Ÿåº¦å¯èƒ½å¿«2-3å€ã€‚ç±»ä¼¼çš„ä¼˜åŒ–è¿˜åŒ…æ‹¬ï¼š</p>
<ul>
<li>ç”¨<code>collections.defaultdict</code>æ›¿ä»£å­—å…¸çš„æ‰‹åŠ¨åˆå§‹åŒ–</li>
<li>ç”¨<code>itertools.chain</code>åˆå¹¶å¤šä¸ªè¿­ä»£å™¨è€ŒéåµŒå¥—å¾ªç¯</li>
</ul>
<h4 data-id="heading-5">å®æµ‹æ•°æ®</h4>
<p>åœ¨1000ä¸‡æ¬¡åŠ æ³•æµ‹è¯•ä¸­ï¼Œ<code>sum()</code>æ¯”æ‰‹åŠ¨å¾ªç¯å¿«çº¦60%ã€‚</p>
<hr/>
<h3 data-id="heading-6">2. åˆ©ç”¨å±€éƒ¨å˜é‡åŠ é€Ÿè®¿é—®</h3>
<h4 data-id="heading-7">åŸç†åˆ†æ</h4>
<p>Pythonçš„å˜é‡æŸ¥æ‰¾éµå¾ªLEGBè§„åˆ™ï¼ˆLocal â†’ Enclosing â†’ Global â†’ Built-inï¼‰ï¼Œå±€éƒ¨å˜é‡çš„è®¿é—®é€Ÿåº¦æœ€å¿«ã€‚å°†é¢‘ç¹ä½¿ç”¨çš„å…¨å±€å˜é‡æˆ–ç±»å±æ€§èµ‹å€¼ç»™å±€éƒ¨å˜é‡ï¼Œå¯ä»¥å‡å°‘æŸ¥æ‰¾æ—¶é—´ã€‚</p>
<h4 data-id="heading-8">ä¼˜åŒ–ç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æœªä¼˜åŒ–ç‰ˆæœ¬</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate</span>(<span class="hljs-params">data</span>):
    result = []
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> data:
        result.append(math.sqrt(item) * config.factor)  <span class="hljs-comment"># config.factoræ˜¯å…¨å±€å˜é‡</span>

<span class="hljs-comment"># ä¼˜åŒ–åç‰ˆæœ¬</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate</span>(<span class="hljs-params">data</span>):
    factor = config.factor  <span class="hljs-comment"># å±€éƒ¨åŒ–å…¨å±€å˜é‡</span>
    sqrt_func = math.sqrt   <span class="hljs-comment"># é¿å…å¤šæ¬¡å±æ€§æŸ¥æ‰¾</span>
    result = []
    append = result.append  <span class="hljs-comment"># æ–¹æ³•ä¹Ÿè½¬ä¸ºå±€éƒ¨å˜é‡</span>
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> data:
        append(sqrt_func(item) * factor)
</code></pre>
<p>è¿™ç§ä¼˜åŒ–åœ¨å¾ªç¯æ¬¡æ•°è¶…è¿‡10ä¸‡æ¬¡æ—¶å¯èƒ½å¸¦æ¥20%-30%çš„æ€§èƒ½æå‡ã€‚</p>
<hr/>
<h3 data-id="heading-9">3. <strong><strong>slots</strong></strong>é­”æ³•ï¼šå‡å°‘å†…å­˜å ç”¨ä¸åŠ é€Ÿå±æ€§è®¿é—®</h3>
<h4 data-id="heading-10"><strong>slots</strong>çš„ä½œç”¨</h4>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒPythonç±»çš„å®ä¾‹ä½¿ç”¨å­—å…¸ï¼ˆ<code>__dict__</code>ï¼‰å­˜å‚¨å±æ€§ï¼Œè¿™å¸¦æ¥äº†çµæ´»æ€§ä½†ä¹Ÿå¢åŠ äº†å†…å­˜å’Œè®¿é—®å¼€é”€ã€‚é€šè¿‡å®šä¹‰<code>__slots__</code>ï¼Œå¯ä»¥å›ºå®šç±»çš„å±æ€§åˆ—è¡¨ï¼ŒèŠ‚çœå†…å­˜å¹¶æå‡è®¿é—®é€Ÿåº¦ã€‚</p>
<h4 data-id="heading-11"><strong>ç¤ºä¾‹ä»£ç </strong></h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">RegularUser</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, uid</span>):
        self.name = name
        self.uid = uid

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SlotUser</span>:
    __slots__ = [<span class="hljs-string">'name'</span>, <span class="hljs-string">'uid'</span>]
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, uid</span>):
        self.name = name
        self.uid = uid
</code></pre>
<h4 data-id="heading-12"><strong>æ€§èƒ½å¯¹æ¯”</strong></h4>
<ul>
<li><strong>å†…å­˜å ç”¨</strong>ï¼šåœ¨100ä¸‡ä¸ªå®ä¾‹çš„æµ‹è¯•ä¸­ï¼Œä½¿ç”¨<code>__slots__</code>å¯å‡å°‘40%-50%çš„å†…å­˜ã€‚</li>
<li><strong>è®¿é—®é€Ÿåº¦</strong>ï¼šå±æ€§è¯»å–é€Ÿåº¦å¿«çº¦20%ã€‚</li>
</ul>
<p>æ³¨æ„ï¼šä»…é€‚ç”¨äºå±æ€§å›ºå®šçš„ç±»ï¼Œä¸”ä¼šç‰ºç‰²åŠ¨æ€æ·»åŠ å±æ€§çš„èƒ½åŠ›ã€‚</p>
<hr/>
<h3 data-id="heading-13">4. NumPy/Pandaså‘é‡åŒ–æ“ä½œæ›¿ä»£å¾ªç¯</h3>
<h4 data-id="heading-14"><strong>å‘é‡åŒ–çš„åŠ›é‡</strong></h4>
<p>å¯¹äºæ•°å€¼è®¡ç®—ä»»åŠ¡ï¼ˆå¦‚çŸ©é˜µè¿ç®—ã€ç»Ÿè®¡èšåˆï¼‰ï¼ŒNumPyå’ŒPandasçš„åº•å±‚C/Fortranå®ç°æ¯”Pythonå¾ªç¯é«˜æ•ˆå‡ ä¸ªæ•°é‡çº§ã€‚å…³é”®åœ¨äºé¿å…é€å…ƒç´ æ“ä½œï¼Œè½¬è€Œä½¿ç”¨å†…ç½®çš„å‘é‡åŒ–å‡½æ•°ã€‚</p>
<h4 data-id="heading-15"><strong>å…¸å‹æ¡ˆä¾‹</strong></h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä½æ•ˆçš„é€å…ƒç´ å¹³æ–¹</span>
squares = [x**<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> big_list]

<span class="hljs-comment"># NumPyå‘é‡åŒ–ç‰ˆæœ¬</span>
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
arr = np.array(big_list)
squares = arr ** <span class="hljs-number">2</span>  <span class="hljs-comment"># Speedup: ~100x for large arrays</span>
</code></pre>
<h4 data-id="heading-16"><strong>è¿›é˜¶æŠ€å·§</strong></h4>
<ul>
<li>Pandasçš„<code>.apply()</code>ä»ç„¶è¾ƒæ…¢ï¼Œä¼˜å…ˆä½¿ç”¨<code>.map()</code>æˆ–<code>.transform()</code></li>
<li>NumPyçš„å¹¿æ’­æœºåˆ¶ï¼ˆBroadcastingï¼‰å¯é¿å…æ˜¾å¼å¾ªç¯</li>
</ul>
<hr/>
<h3 data-id="heading-17">5. JITç¼–è¯‘ï¼šç”¨Numbaçªç ´è§£é‡Šå™¨é™åˆ¶</h3>
<h4 data-id="heading-18"><strong>Numbaç®€ä»‹</strong></h4>
<p>Numbaæ˜¯ä¸€ä¸ªJITï¼ˆJust-In-Timeï¼‰ç¼–è¯‘å™¨ï¼Œèƒ½å°†Pythonå‡½æ•°ç¼–è¯‘ä¸ºæœºå™¨ç ã€‚ç‰¹åˆ«é€‚åˆæ•°å€¼è®¡ç®—å¯†é›†å‹ä»»åŠ¡ï¼ˆå¦‚ç§‘å­¦è®¡ç®—ã€ç®—æ³•æ ¸å¿ƒé€»è¾‘ï¼‰ã€‚æ— éœ€é‡å†™ä»£ç â€”â€”åªéœ€æ·»åŠ ä¸€ä¸ªè£…é¥°å™¨å³å¯è·å¾—Cçº§åˆ«çš„é€Ÿåº¦ã€‚</p>
<h4 data-id="heading-19"><strong>ä½¿ç”¨æ–¹æ³•</strong></h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> numba <span class="hljs-keyword">import</span> njit

<span class="hljs-meta">@njit(<span class="hljs-params">fastmath=<span class="hljs-literal">True</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">monte_carlo_pi</span>(<span class="hljs-params">n_samples</span>): 
    acc = <span class="hljs-number">0</span> 
    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n_samples): 
        x, y = np.random.random(), np.random.random() 
        <span class="hljs-keyword">if</span> (x**<span class="hljs-number">2</span> + y**<span class="hljs-number">2</span>) &lt; <span class="hljs-number">1.0</span>: 
            acc +=<span class="hljs-number">1</span> 
    return4 * acc / n_samples 

<span class="hljs-comment"># First run includes compilation time </span>
pi_estimate=monte_carlo_pi(<span class="hljs-number">1000000</span>)<span class="hljs-comment"># Subsequent calls areæé€Ÿæ‰§è¡Œ!</span>
</code></pre>
<h4 data-id="heading-20"><strong>æ€§èƒ½æ”¶ç›Š</strong></h4>
<p>åœ¨è’™ç‰¹å¡æ´›æ¨¡æ‹Ÿç­‰åœºæ™¯ä¸‹,Numbaå¯æé€Ÿ100å€ä»¥ä¸Š(å¯¹æ¯”çº¯Pythonå®ç°)ã€‚</p>
<hr/>
<p>###æ€»ç»“</p>
<p>è¿™äº”ä¸ªæŠ€å·§è¦†ç›–äº†ä»è¯­è¨€ç‰¹æ€§(<code>slots</code>,å±€éƒ¨å˜é‡)åˆ°å·¥å…·é“¾(Numba,NumPy)çš„å¤šç»´åº¦ä¼˜åŒ–æ‰‹æ®µ:</p>
<p>1.<strong>ä¼˜å…ˆä½¿ç”¨å†…ç½®å‡½æ•°/åº“</strong>
2.<strong>å±€éƒ¨åŒ–é¢‘ç¹è®¿é—®çš„å˜é‡</strong>
3.<strong>å¯¹å›ºå®šå±æ€§ç±»å¯ç”¨slots</strong>
4.<strong>æ•°å€¼è®¡ç®—åŠ¡å¿…å‘é‡åŒ–</strong>
5.<strong>å…³é”®è·¯å¾„è€ƒè™‘JITç¼–è¯‘</strong></p>
<p>éœ€è¦å¼ºè°ƒçš„æ˜¯:ä¼˜åŒ–å‰åŠ¡å¿…å…ˆç”¨cProfileå®šä½ç“¶é¢ˆ!ç›²ç›®åº”ç”¨è¿™äº›æŠ€æœ¯å¯èƒ½å¯¼è‡´ä»£ç å¯è¯»æ€§ä¸‹é™å´æ”¶æ•ˆç”šå¾®ã€‚</p>
<p>å½“ä½ å°†è¿™äº›æ–¹æ³•ç»„åˆä½¿ç”¨æ—¶,å®Œå…¨å¯èƒ½åœ¨ä¿æŒPythonå¼€å‘æ•ˆç‡çš„åŒæ—¶,è®©å…³é”®ä»£ç æ®µçš„æ€§èƒ½åŒ¹æ•ŒC/Javaå®ç°â€”è¿™æ‰æ˜¯çœŸæ­£çš„"å…¨æ ˆPython"é«˜æ‰‹ä¹‹é“!</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€èŠ‚ç‚¹ã€‘[ChannelMaskèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨]]></title>    <link>https://juejin.cn/post/7587336857538658313</link>    <guid>https://juejin.cn/post/7587336857538658313</guid>    <pubDate>2025-12-25T04:38:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587336857538658313" data-draft-id="7587325326046429193" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€èŠ‚ç‚¹ã€‘[ChannelMaskèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨"/> <meta itemprop="keywords" content="æ¸¸æˆå¼€å‘,å›¾å½¢å­¦,Unity3D"/> <meta itemprop="datePublished" content="2025-12-25T04:38:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SmalBox"/> <meta itemprop="url" content="https://juejin.cn/user/2218166695237532"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€èŠ‚ç‚¹ã€‘[ChannelMaskèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2218166695237532/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SmalBox
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T04:38:50.000Z" title="Thu Dec 25 2025 04:38:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong></p>
</blockquote>
<h2 data-id="heading-0">èŠ‚ç‚¹åŠŸèƒ½æ¦‚è¿°</h2>
<p>ChannelMaskèŠ‚ç‚¹æ˜¯Unityé€šç”¨æ¸²æŸ“ç®¡çº¿ï¼ˆURPï¼‰ä¸­Shader Graphçš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œä¸“é—¨ç”¨äºå®ç°é€šé“çº§çš„é¢œè‰²æ“ä½œã€‚è¯¥èŠ‚ç‚¹é€šè¿‡åŠ¨æ€é€šé“é€‰æ‹©æœºåˆ¶ï¼Œèƒ½å¤Ÿå¯¹è¾“å…¥å‘é‡è¿›è¡Œé€‰æ‹©æ€§å±è”½ï¼Œå…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äºéç ´åæ€§ç¼–è¾‘â€”â€”ä»…è°ƒæ•´æŒ‡å®šé€šé“ï¼Œè€Œä¸ä¼šå½±å“å…¶ä»–æ•°æ®ã€‚è¿™ä¸€ç‰¹æ€§åœ¨æè´¨ç¼–è¾‘ã€ç‰¹æ•ˆåˆæˆä»¥åŠæ€§èƒ½ä¼˜åŒ–ç­‰åœºæ™¯ä¸­å…·æœ‰å…³é”®ä½œç”¨ã€‚</p>
<p>åœ¨URPæ¸²æŸ“ç®¡çº¿ä¸­ï¼ŒChannelMaskèŠ‚ç‚¹ä¸SRP Batcheræ·±åº¦å…¼å®¹ï¼Œé€šè¿‡æ‰¹é‡å¤„ç†é€šé“æ“ä½œæœ‰æ•ˆå‡å°‘Draw Callã€‚èŠ‚ç‚¹å…·å¤‡åŠ¨æ€ç»´åº¦é€‚é…èƒ½åŠ›ï¼Œå¯è‡ªåŠ¨å¤„ç†Vector2/Vector3/Vector4ç­‰ä¸åŒç±»å‹çš„è¾“å…¥ã€‚ä¾‹å¦‚ï¼Œå½“è¿æ¥çº¹ç†é‡‡æ ·èŠ‚ç‚¹æ—¶ï¼Œç³»ç»Ÿä¼šæ ¹æ®RGBAé€šé“è‡ªåŠ¨ç”Ÿæˆç›¸åº”é€‰é¡¹ï¼Œä»è€Œæ˜¾è‘—é™ä½Shaderå¼€å‘çš„å¤æ‚åº¦ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿæ›´ä¸“æ³¨äºè§†è§‰æ•ˆæœçš„å®ç°ã€‚</p>
<h2 data-id="heading-1">ç«¯å£é…ç½®è¯¦è§£</h2>
<p><img src="https://docs.unity.cn/cn/Packages-cn/com.unity.shadergraph@14.0/manual/images/ChannelMaskNodeThumb.png" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">è¾“å…¥ç«¯å£ï¼ˆInï¼‰</h3>
<ul>
<li><strong>ç±»å‹</strong>ï¼šåŠ¨æ€çŸ¢é‡ï¼ˆDynamic Vectorï¼‰</li>
<li><strong>ç»‘å®š</strong>ï¼šæ— </li>
<li><strong>ç‰¹æ€§</strong>ï¼š
<ul>
<li>æ”¯æŒè‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼Œå¯è¿æ¥ä»»æ„è¾“å‡ºçŸ¢é‡å‹èŠ‚ç‚¹</li>
<li>è¾“å…¥ç»´åº¦å†³å®šå¯é€‰é€šé“èŒƒå›´ï¼ˆä¾‹å¦‚ï¼ŒVector3è¾“å…¥ä»…æ˜¾ç¤ºRã€Gã€Bé€‰é¡¹ï¼‰</li>
<li>åœ¨URPç®¡çº¿ä¸­ï¼Œè¯¥ç«¯å£ä¸StandardLitæè´¨ä¸­çš„åŸºç¡€è‰²é€šé“å®Œå…¨å…¼å®¹</li>
</ul>
</li>
</ul>
<h3 data-id="heading-3">è¾“å‡ºç«¯å£ï¼ˆOutï¼‰</h3>
<ul>
<li><strong>ç±»å‹</strong>ï¼šåŠ¨æ€çŸ¢é‡</li>
<li><strong>ç»‘å®š</strong>ï¼šæ— </li>
<li><strong>ç‰¹æ€§</strong>ï¼š
<ul>
<li>è¾“å‡ºç»´åº¦ä¸è¾“å…¥ä¿æŒä¸€è‡´ï¼Œç¡®ä¿æ•°æ®æµå®Œæ•´æ€§</li>
<li>æ”¯æŒå¤šèŠ‚ç‚¹ä¸²è”è¾“å‡ºï¼Œä¾¿äºæ„å»ºå¤æ‚é€šé“å¤„ç†æµæ°´çº¿</li>
<li>åœ¨URPæ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œè¾“å‡ºç»“æœå¯ç›´æ¥åº”ç”¨äºAlbedoã€Metallicç­‰æè´¨é€šé“</li>
</ul>
</li>
</ul>
<h2 data-id="heading-4">æ§ä»¶å‚æ•°åˆ†æ</h2>
<h3 data-id="heading-5">Channelsæ§ä»¶</h3>
<ul>
<li><strong>ç±»å‹</strong>ï¼šåŠ¨æ€æ©ç ä¸‹æ‹‰é€‰å•</li>
<li><strong>è¡Œä¸ºé€»è¾‘</strong>ï¼š
<ul>
<li>å½“è¾“å…¥ä¸ºVector4æ—¶ï¼Œæ˜¾ç¤ºRã€Gã€Bã€Aå››ä¸ªé€‰é¡¹</li>
<li>æ”¯æŒå¤šé€‰æ“ä½œï¼ˆä¾‹å¦‚åŒæ—¶å±è”½Rå’ŒGé€šé“ï¼‰</li>
<li>é€‰é¡¹å‘½åä¸URPæè´¨é€šé“è§„èŒƒä¿æŒä¸€è‡´</li>
</ul>
</li>
<li><strong>ç‰¹æ®Šåœºæ™¯</strong>ï¼š
<ul>
<li>è¿æ¥æ³•çº¿è´´å›¾æ—¶ï¼Œè‡ªåŠ¨è½¬æ¢ä¸ºXã€Yã€Zé€šé“é€‰é¡¹</li>
<li>å¤„ç†HDRé¢œè‰²æ—¶ï¼Œé€šé“å€¼ä¼šä¾æ®URPçº¿æ€§ç©ºé—´è§„åˆ™é‡æ–°è®¡ç®—</li>
</ul>
</li>
</ul>
<h2 data-id="heading-6">æ•°å­¦åŸç†ä¸ä»£ç å®ç°</h2>
<h3 data-id="heading-7">HLSLæ ¸å¿ƒé€»è¾‘</h3>
<p><code>// ç¤ºä¾‹ï¼šå±è”½çº¢è‰²é€šé“çš„Vector4å¤„ç† void Unity_ChannelMask_Red_float4(float4 In, out float4 Out) {     Out = float4(0, In.g, In.b, In.a); }</code></p>
<h3 data-id="heading-8">URPé€‚é…ç‰¹æ€§</h3>
<ol>
<li><strong>çº¿æ€§ç©ºé—´å¤„ç†</strong>ï¼šåœ¨URPçš„çº¿æ€§é¢œè‰²ç©ºé—´ä¸‹ï¼Œé€šé“å±è”½æ“ä½œè‡ªåŠ¨åº”ç”¨Gammaæ ¡æ­£</li>
<li><strong>HDRæ”¯æŒ</strong>ï¼šå¤„ç†HDRé¢œè‰²æ—¶ï¼Œå±è”½æ“ä½œä¼šä¿ç•™é«˜åŠ¨æ€èŒƒå›´æ•°æ®</li>
<li><strong>æ‰¹å¤„ç†ä¼˜åŒ–</strong>ï¼šåœ¨SRP Batcherä¸­ï¼Œç›¸åŒé€šé“æ©ç çš„èŠ‚ç‚¹ä¼šè¢«åˆå¹¶ä¸ºå•ä¸ªDraw Call</li>
</ol>
<h2 data-id="heading-9">å®é™…åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-10">æè´¨ç¼–è¾‘</h3>
<ul>
<li><strong>é‡‘å±åº¦æ§åˆ¶</strong>ï¼šé€šè¿‡å±è”½çº¢è‰²é€šé“åˆ†ç¦»é‡‘å±åå°„ä¿¡æ¯</li>
<li><strong>æ³•çº¿è´´å›¾å¤„ç†</strong>ï¼šå±è”½Alphaé€šé“ä»¥å®ç°æ³•çº¿å‹ç¼©</li>
<li><strong>æ¬¡è¡¨é¢æ•£å°„</strong>ï¼šå•ç‹¬å¤„ç†ç»¿è‰²é€šé“ä»¥æ¨¡æ‹Ÿçš®è‚¤é€å…‰æ•ˆæœ</li>
</ul>
<h3 data-id="heading-11">ç‰¹æ•ˆåˆ¶ä½œ</h3>
<ul>
<li><strong>å‘å…‰æ•ˆæœ</strong>ï¼šå±è”½æ‰€æœ‰é€šé“ä»…ä¿ç•™äº®åº¦é€šé“</li>
<li><strong>é¢œè‰²æ¸å˜</strong>ï¼šåŠ¨æ€åˆ‡æ¢é€šé“å®ç°å®æ—¶é¢œè‰²è¿‡æ¸¡</li>
<li><strong>æ•…éšœç‰¹æ•ˆ</strong>ï¼šéšæœºå±è”½é€šé“ä»¥æ¨¡æ‹Ÿæ•°å­—å¤±çœŸæ•ˆæœ</li>
</ul>
<h3 data-id="heading-12">æ€§èƒ½ä¼˜åŒ–</h3>
<ul>
<li><strong>é€šé“å‹ç¼©</strong>ï¼šå±è”½æ— ç”¨é€šé“ä»¥å‡å°‘çº¹ç†é‡‡æ ·é‡</li>
<li><strong>LODé€‚é…</strong>ï¼šæ ¹æ®è·ç¦»åŠ¨æ€è°ƒæ•´é€šé“ç²¾åº¦</li>
<li><strong>ç§»åŠ¨ç«¯ä¼˜åŒ–</strong>ï¼šåœ¨ä½ç«¯è®¾å¤‡ä¸Šå±è”½éå¿…è¦é€šé“</li>
</ul>
<h2 data-id="heading-13">æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</h2>
<h3 data-id="heading-14">URPä¸“å±ä¼˜åŒ–</h3>
<ol>
<li><strong>SRP Batcherå…¼å®¹</strong>ï¼šç¡®ä¿é€šé“æ©ç æ“ä½œåœ¨ç›¸åŒæè´¨å®ä¾‹ä¸­è¿›è¡Œ</li>
<li><strong>åŠ¨æ€åˆ†è¾¨ç‡é€‚é…</strong>ï¼šæ ¹æ®å±å¹•åˆ†è¾¨ç‡è°ƒæ•´é€šé“ç²¾åº¦</li>
<li><strong>GPU Instancingæ”¯æŒ</strong>ï¼šå¯¹ä½¿ç”¨ç›¸åŒé€šé“æ©ç çš„ç‰©ä½“è¿›è¡Œæ‰¹å¤„ç†</li>
</ol>
<h3 data-id="heading-15">é€šç”¨ä¼˜åŒ–æŠ€å·§</h3>
<ul>
<li>é¿å…åœ¨ç‰‡æ®µç€è‰²å™¨ä¸­é¢‘ç¹ä¿®æ”¹é€šé“æ©ç </li>
<li>ä½¿ç”¨é€šé“é¢„è®¡ç®—èŠ‚ç‚¹å‡å°‘å®æ—¶è®¡ç®—é‡</li>
<li>åˆ©ç”¨URPçš„Shader Variantsç³»ç»Ÿåˆ›å»ºä¸åŒé€šé“é…ç½®çš„å˜ä½“</li>
</ul>
<h2 data-id="heading-16">å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-17">URPç‰¹æœ‰é—®é¢˜</h3>
<ol>
<li><strong>é€šé“ä¸æ˜¾ç¤º</strong>ï¼šæ£€æŸ¥æ˜¯å¦å¯ç”¨äº†URPçš„çº¿æ€§é¢œè‰²ç©ºé—´</li>
<li><strong>æ€§èƒ½ä¸‹é™</strong>ï¼šç¡®è®¤åœ¨ç§»åŠ¨ç«¯æ˜¯å¦å¯ç”¨äº†ä¸å¿…è¦çš„é€šé“</li>
<li><strong>æ¸²æŸ“å¼‚å¸¸</strong>ï¼šéªŒè¯é€šé“æ©ç æ˜¯å¦ä¸URPæè´¨å±æ€§å†²çª</li>
</ol>
<h3 data-id="heading-18">é€šç”¨è§£å†³æ–¹æ¡ˆ</h3>
<ul>
<li>ä½¿ç”¨URPçš„Shader Graphé¢„è§ˆåŠŸèƒ½å®æ—¶éªŒè¯é€šé“æ•ˆæœ</li>
<li>é€šè¿‡Frame Debuggeråˆ†æé€šé“æ“ä½œå¯¹æ¸²æŸ“ç®¡çº¿çš„å½±å“</li>
<li>åœ¨URPçš„Qualityè®¾ç½®ä¸­å¯ç”¨é€šé“æ“ä½œä¼˜åŒ–é€‰é¡¹</li>
</ul>
<h2 data-id="heading-19">é«˜çº§åº”ç”¨æŠ€å·§</h2>
<h3 data-id="heading-20">URPç®¡çº¿é›†æˆ</h3>
<ol>
<li><strong>ä¸Volumeç³»ç»Ÿç»“åˆ</strong>ï¼šé€šè¿‡é€šé“æ©ç å®ç°åŠ¨æ€æè´¨ä¿®æ”¹</li>
<li><strong>ä¸Lit Shaderé…åˆ</strong>ï¼šæ§åˆ¶URPæ ‡å‡†æè´¨çš„ä¸åŒé€šé“</li>
<li><strong>ä¸Post Processingé›†æˆ</strong>ï¼šåœ¨åæœŸå¤„ç†ä¸­åº”ç”¨é€šé“æ“ä½œ</li>
</ol>
<h3 data-id="heading-21">åŠ¨æ€é€šé“æ§åˆ¶</h3>
<ul>
<li>é€šè¿‡URPçš„MaterialPropertyBlockå®ç°è¿è¡Œæ—¶é€šé“ä¿®æ”¹</li>
<li>ç»“åˆURPçš„Render Featureåˆ›å»ºè‡ªå®šä¹‰é€šé“å¤„ç†æµç¨‹</li>
<li>åˆ©ç”¨URPçš„Shader Variantsç³»ç»Ÿåˆ›å»ºå¤šé€šé“é…ç½®</li>
</ul>
<h2 data-id="heading-22">ä¸å…¶ä»–èŠ‚ç‚¹çš„é…åˆä½¿ç”¨</h2>
<h3 data-id="heading-23">URPæ ¸å¿ƒèŠ‚ç‚¹</h3>
<ol>
<li><strong>Sample Texture 2D</strong>ï¼šåœ¨çº¹ç†é‡‡æ ·ååº”ç”¨é€šé“æ©ç </li>
<li><strong>URP Lit Shader</strong>ï¼šæ§åˆ¶æ ‡å‡†æè´¨çš„é€šé“è¾“å‡º</li>
<li><strong>URP Render Features</strong>ï¼šåœ¨æ¸²æŸ“ç®¡çº¿ä¸­æ’å…¥é€šé“å¤„ç†</li>
</ol>
<h3 data-id="heading-24">é€šç”¨èŠ‚ç‚¹ç»„åˆ</h3>
<ul>
<li>ä¸MathèŠ‚ç‚¹é…åˆå®ç°é€šé“å€¼è®¡ç®—</li>
<li>ä¸ConditionèŠ‚ç‚¹ç»“åˆåˆ›å»ºåŠ¨æ€é€šé“åˆ‡æ¢</li>
<li>ä¸Texture SampleèŠ‚ç‚¹è¿æ¥å®ç°åŸºäºçº¹ç†çš„é€šé“æ§åˆ¶</li>
</ul>
<h2 data-id="heading-25">æœ€ä½³å®è·µæŒ‡å—</h2>
<h3 data-id="heading-26">URPå¼€å‘è§„èŒƒ</h3>
<ol>
<li>åœ¨URPé¡¹ç›®ä¸­ä¼˜å…ˆä½¿ç”¨é€šé“æ©ç è€Œéé¢œè‰²æ··åˆ</li>
<li>ä¸ºç§»åŠ¨ç«¯åˆ›å»ºç®€åŒ–é€šé“é…ç½®çš„å˜ä½“</li>
<li>åˆ©ç”¨URPçš„Shader Variantsç³»ç»Ÿç®¡ç†å¤šé€šé“é…ç½®</li>
</ol>
<h3 data-id="heading-27">é€šç”¨å®è·µå»ºè®®</h3>
<ul>
<li>ä¸ºå¤æ‚é€šé“æ“ä½œåˆ›å»ºæ³¨é‡ŠèŠ‚ç‚¹</li>
<li>ä½¿ç”¨URPçš„Shader Graphé¢„è§ˆåŠŸèƒ½éªŒè¯æ•ˆæœ</li>
<li>å®šæœŸæ£€æŸ¥é€šé“æ“ä½œå¯¹æ€§èƒ½çš„å½±å“</li>
</ul>
<hr/>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong>
ï¼ˆæ¬¢è¿<em>ç‚¹èµç•™è¨€</em>æ¢è®¨ï¼Œæ›´å¤šäººåŠ å…¥è¿›æ¥èƒ½æ›´åŠ å®Œå–„è¿™ä¸ªæ¢ç´¢çš„è¿‡ç¨‹ï¼ŒğŸ™ï¼‰</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CSS å…¨å±€æ ·å¼æ±¡æŸ“é—®é¢˜å¤ç›˜]]></title>    <link>https://juejin.cn/post/7587284708947771407</link>    <guid>https://juejin.cn/post/7587284708947771407</guid>    <pubDate>2025-12-25T02:22:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587284708947771407" data-draft-id="7587261253912969231" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CSS å…¨å±€æ ·å¼æ±¡æŸ“é—®é¢˜å¤ç›˜"/> <meta itemprop="keywords" content="CSS"/> <meta itemprop="datePublished" content="2025-12-25T02:22:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§è±¡çš„é¼»å­é‚£ä¹ˆé•¿"/> <meta itemprop="url" content="https://juejin.cn/user/2277843821926871"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CSS å…¨å±€æ ·å¼æ±¡æŸ“é—®é¢˜å¤ç›˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2277843821926871/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§è±¡çš„é¼»å­é‚£ä¹ˆé•¿
  </span> <!----> <!----> <div class="vip-level" data-v-cd7d0a50="" data-v-292f6e48=""><span class="tooltip" data-v-cd7d0a50=""><div class="byte-tooltip byte-tooltip--dark" style="display:none;">
        VIP.4 èä¼šè´¯é€š
      </div><span class="byte-tooltip__wrapper"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="VIP.4 èä¼šè´¯é€š" title="VIP.4 èä¼šè´¯é€š" class="lazy" style="aspect-ratio:NaN;" data-v-5244ef91="" data-v-cd7d0a50=""/></span></span></div> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T02:22:34.000Z" title="Thu Dec 25 2025 02:22:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€é—®é¢˜ç°è±¡</h2>
<h3 data-id="heading-1">1.1 é—®é¢˜æè¿°</h3>
<p>VGM ç¼–è¾‘å¼¹çª—ï¼ˆä½¿ç”¨ <code>CmcDialog</code> ç»„ä»¶ï¼‰å‡ºç°å¼‚å¸¸çš„å†…è¾¹è·ï¼Œå¯¼è‡´å¼¹çª—å†…å®¹å¸ƒå±€é”™ä¹±ï¼Œè¡¨å•å…ƒç´ é—´è·è¿‡å¤§ã€‚</p>
<h3 data-id="heading-2">1.2 é—®é¢˜æˆªå›¾</h3>
<p>å¼¹çª—å†…å®¹åŒºåŸŸå‡ºç°äº†ä¸åº”æœ‰çš„ <code>padding: 52px 50px</code> æ ·å¼ï¼Œå¯¼è‡´ï¼š</p>
<ul>
<li>è¡¨å•å†…å®¹è¢«å‹ç¼©</li>
<li>å¸ƒå±€ä¸è®¾è®¡ç¨¿ä¸ç¬¦</li>
<li>è§†è§‰æ•ˆæœå¼‚å¸¸</li>
</ul>
<h3 data-id="heading-3">1.3 å½±å“èŒƒå›´</h3>
<p>æ‰€æœ‰ä½¿ç”¨ <code>el-dialog</code> æˆ–åŸºäº <code>el-dialog</code> å°è£…çš„ç»„ä»¶ï¼ˆå¦‚ <code>CmcDialog</code>ï¼‰éƒ½å—åˆ°å½±å“ã€‚</p>
<hr/>
<h2 data-id="heading-4">äºŒã€é—®é¢˜å®šä½</h2>
<h3 data-id="heading-5">2.1 æ’æŸ¥è¿‡ç¨‹</h3>
<ol>
<li><strong>æ£€æŸ¥ç»„ä»¶è‡ªèº«æ ·å¼</strong> - <code>CmcDialog</code> ç»„ä»¶æ ·å¼æ­£å¸¸</li>
<li><strong>æ£€æŸ¥çˆ¶ç»„ä»¶æ ·å¼</strong> - ä½¿ç”¨ <code>CmcDialog</code> çš„é¡µé¢æ— å¼‚å¸¸æ ·å¼</li>
<li><strong>ä½¿ç”¨ DevTools æ£€æŸ¥</strong> - å‘ç° <code>.el-dialog</code> è¢«æ³¨å…¥äº†å…¨å±€æ ·å¼</li>
<li><strong>å…¨å±€æœç´¢æ±¡æŸ“æº</strong> - æœç´¢ <code>padding: 52px 50px</code> å®šä½åˆ°é—®é¢˜æ–‡ä»¶</li>
</ol>
<h3 data-id="heading-6">2.2 é—®é¢˜æ ¹æº</h3>
<p>åœ¨ <code>src/views/search_service/ship-schedules/components/Subscribe.vue</code> ä¸­å‘ç°ä»¥ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;style scoped lang="scss"&gt;
.subscriber-dialog {
  :global(.el-dialog) {
    padding: 52px 50px;
  }
}
&lt;/style&gt;
</code></pre>
<h3 data-id="heading-7">2.3 ä¸ºä»€ä¹ˆä¼šé€ æˆå…¨å±€æ±¡æŸ“ï¼Ÿ</h3>
<p>è¿™é‡Œæ¶‰åŠåˆ° Vue Scoped CSS å’Œ <code>:global()</code> çš„å·¥ä½œåŸç†ï¼š</p>
<h4 data-id="heading-8">Vue Scoped CSS åŸç†</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- ç¼–è¯‘å‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
  <span class="hljs-selector-class">.subscriber-dialog</span> {
    <span class="hljs-attribute">color</span>: red;
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

<span class="hljs-comment">&lt;!-- ç¼–è¯‘å --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
  <span class="hljs-selector-class">.subscriber-dialog</span><span class="hljs-selector-attr">[data-v-xxxxx]</span> {
    <span class="hljs-attribute">color</span>: red;
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

</code></pre>
<p>Vue ä¼šä¸º scoped æ ·å¼æ·»åŠ å”¯ä¸€çš„ <code>data-v-xxxxx</code> å±æ€§é€‰æ‹©å™¨ï¼Œç¡®ä¿æ ·å¼åªä½œç”¨äºå½“å‰ç»„ä»¶ã€‚</p>
<h4 data-id="heading-9">:global() çš„ä½œç”¨</h4>
<p><code>:global()</code> æ˜¯ CSS Modules å’Œ Vue çš„ä¸€ä¸ªç‰¹æ€§ï¼Œç”¨äº<strong>è·³è¿‡ scoped é™åˆ¶</strong>ï¼Œç”Ÿæˆå…¨å±€æ ·å¼ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// ç¼–è¯‘å‰</span>
<span class="hljs-selector-class">.subscriber-dialog</span> {
  :<span class="hljs-built_in">global</span>(.el-dialog) {
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">52px</span> <span class="hljs-number">50px</span>;
  }
}

<span class="hljs-comment">// ç¼–è¯‘åï¼ˆæ³¨æ„ï¼š.el-dialog æ²¡æœ‰ data-v å±æ€§ï¼ï¼‰</span>
<span class="hljs-selector-class">.subscriber-dialog</span><span class="hljs-selector-attr">[data-v-xxxxx]</span> <span class="hljs-selector-class">.el-dialog</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">52px</span> <span class="hljs-number">50px</span>;
}

</code></pre>
<h4 data-id="heading-10">å…³é”®é—®é¢˜ï¼šel-dialog çš„ DOM ç»“æ„</h4>
<p>Element Plus çš„ <code>el-dialog</code> é»˜è®¤ä¼šé€šè¿‡ <code>append-to-body</code> å°† DOM æŒ‚è½½åˆ° <code>&lt;body&gt;</code> ä¸‹ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- é¡µé¢å†…å®¹ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"subscriber-dialog"</span> <span class="hljs-attr">data-v-xxxxx</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- è§¦å‘æŒ‰é’® --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

  <span class="hljs-comment">&lt;!-- Dialog è¢« teleport åˆ° body ä¸‹ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"el-overlay subscriber-dialog"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- modal-class åº”ç”¨åœ¨è¿™é‡Œ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"el-dialog"</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- å®é™…çš„ dialog --&gt;</span>
      ...
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>

</code></pre>
<p>ç”±äº <code>modal-class="subscriber-dialog"</code> åº”ç”¨åˆ°äº† <code>el-overlay</code> ä¸Šï¼Œè€Œ <code>.el-dialog</code> æ˜¯å…¶å­å…ƒç´ ï¼Œæ‰€ä»¥é€‰æ‹©å™¨ <code>.subscriber-dialog .el-dialog</code> èƒ½å¤ŸåŒ¹é…åˆ°ï¼</p>
<p><strong>ä½†é—®é¢˜åœ¨äº</strong>ï¼š<code>:global(.el-dialog)</code> ç”Ÿæˆçš„æ ·å¼<strong>æ²¡æœ‰è¶³å¤Ÿçš„ç‰¹å¼‚æ€§é™åˆ¶</strong>ï¼Œå½“å…¶ä»–é¡µé¢çš„ dialog ä¹Ÿè¢«æŒ‚è½½åˆ° body æ—¶ï¼Œå¦‚æœ CSS åŠ è½½é¡ºåºå¯¼è‡´è¿™ä¸ªæ ·å¼ååŠ è½½ï¼Œå°±ä¼šè¦†ç›–å…¶ä»– dialog çš„æ ·å¼ã€‚</p>
<hr/>
<h2 data-id="heading-11">ä¸‰ã€æ·±åº¦åŸç†å‰–æ</h2>
<h3 data-id="heading-12">3.1 CSS ç‰¹å¼‚æ€§ï¼ˆSpecificityï¼‰</h3>
<p>CSS ç‰¹å¼‚æ€§å†³å®šäº†å½“å¤šä¸ªè§„åˆ™åº”ç”¨äºåŒä¸€å…ƒç´ æ—¶ï¼Œå“ªä¸ªè§„åˆ™ä¼˜å…ˆï¼š</p>

























<table><thead><tr><th>é€‰æ‹©å™¨ç±»å‹</th><th>ç‰¹å¼‚æ€§å€¼</th></tr></thead><tbody><tr><td>å†…è”æ ·å¼</td><td>1000</td></tr><tr><td>ID é€‰æ‹©å™¨</td><td>100</td></tr><tr><td>ç±»/å±æ€§/ä¼ªç±»</td><td>10</td></tr><tr><td>å…ƒç´ /ä¼ªå…ƒç´ </td><td>1</td></tr></tbody></table>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// ç‰¹å¼‚æ€§ï¼š20ï¼ˆä¸¤ä¸ªç±»é€‰æ‹©å™¨ï¼‰</span>
<span class="hljs-selector-class">.subscriber-dialog</span> <span class="hljs-selector-class">.el-dialog</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">52px</span> <span class="hljs-number">50px</span>;
}

<span class="hljs-comment">// ç‰¹å¼‚æ€§ï¼š20ï¼ˆä¸¤ä¸ªç±»é€‰æ‹©å™¨ï¼‰</span>
<span class="hljs-selector-class">.cmc-dialog</span><span class="hljs-selector-class">.el-dialog</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
}

</code></pre>
<p>å½“ç‰¹å¼‚æ€§ç›¸åŒæ—¶ï¼Œ<strong>ååŠ è½½çš„æ ·å¼ä¼šè¦†ç›–å…ˆåŠ è½½çš„æ ·å¼</strong>ã€‚</p>
<h3 data-id="heading-13">3.2 æ ·å¼åŠ è½½é¡ºåºé—®é¢˜</h3>
<p>åœ¨ SPA åº”ç”¨ä¸­ï¼Œç»„ä»¶æ ·å¼æ˜¯æŒ‰éœ€åŠ è½½çš„ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> ç”¨æˆ·è®¿é—®é¦–é¡µ â†’ åŠ è½½é¦–é¡µç»„ä»¶æ ·å¼
<span class="hljs-bullet">2.</span> ç”¨æˆ·è®¿é—®èˆ¹æœŸé¡µé¢ â†’ åŠ è½½ Subscribe.vue æ ·å¼ï¼ˆåŒ…å«å…¨å±€æ±¡æŸ“ï¼‰
<span class="hljs-bullet">3.</span> ç”¨æˆ·è®¿é—® VGM é¡µé¢ â†’ CmcDialog æ ·å¼è¢«æ±¡æŸ“æ ·å¼è¦†ç›–
</code></pre>
<h3 data-id="heading-14">3.3 Teleport/Portal çš„å½±å“</h3>
<p>Element Plus Dialog ä½¿ç”¨ Vue 3 çš„ Teleport ç‰¹æ€§ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;Teleport to="body"&gt;
  &lt;div class="el-overlay"&gt;
    &lt;div class="el-dialog"&gt;...&lt;/div&gt;
  &lt;/div&gt;
&lt;/Teleport&gt;
</code></pre>
<p>è¿™å¯¼è‡´ï¼š</p>
<ol>
<li>Dialog DOM è„±ç¦»äº†ç»„ä»¶çš„ DOM æ ‘</li>
<li>Scoped æ ·å¼çš„ <code>data-v-xxxxx</code> å±æ€§æ— æ³•æ­£ç¡®åº”ç”¨</li>
<li>å¿…é¡»ä½¿ç”¨ <code>:global()</code> æˆ– <code>:deep()</code> æ‰èƒ½æ ·å¼åŒ– dialog</li>
</ol>
<hr/>
<h2 data-id="heading-15">å››ã€ä¿®å¤æ–¹æ¡ˆ</h2>
<h3 data-id="heading-16">4.1 ä¿®å¤æ±¡æŸ“æºï¼ˆæ²»æœ¬ï¼‰</h3>
<p><strong>ä¿®æ”¹å‰ï¼ˆé”™è¯¯å†™æ³•ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;el-dialog modal-class="subscriber-dialog"&gt;
  ...
&lt;/el-dialog&gt;

&lt;style scoped lang="scss"&gt;
.subscriber-dialog {
  :global(.el-dialog) {
    padding: 52px 50px;
  }
}
&lt;/style&gt;
</code></pre>
<p><strong>ä¿®æ”¹åï¼ˆæ­£ç¡®å†™æ³•ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;el-dialog class="subscriber-dialog-box" modal-class="subscriber-dialog"&gt;
  ...
&lt;/el-dialog&gt;

&lt;style scoped lang="scss"&gt;
// ä½¿ç”¨ class å±æ€§ç›´æ¥åº”ç”¨åˆ° el-dialog ä¸Š
// ç»„åˆé€‰æ‹©å™¨ç¡®ä¿åªå½±å“ç‰¹å®šçš„ dialog
:global(.subscriber-dialog-box) {
  padding: 52px 50px;

  .el-dialog__header {
    display: none;
  }
}
&lt;/style&gt;
</code></pre>
<p><strong>å…³é”®æ”¹åŠ¨ï¼š</strong></p>
<ol>
<li>ä½¿ç”¨ <code>class</code> è€Œéä»…ä¾èµ– <code>modal-class</code></li>
<li>ä½¿ç”¨<strong>ç»„åˆé€‰æ‹©å™¨</strong> <code>.subscriber-dialog-box</code> ç¡®ä¿å”¯ä¸€æ€§</li>
<li>æ ·å¼åªä½œç”¨äºå¸¦æœ‰è¯¥ç‰¹å®šç±»åçš„ dialog</li>
</ol>
<h3 data-id="heading-17">4.2 åŠ å›ºç»„ä»¶åº“ï¼ˆæ²»æ ‡ + é˜²å¾¡ï¼‰</h3>
<p>åœ¨ <code>CmcDialog</code> ç»„ä»¶ä¸­æ·»åŠ é«˜ä¼˜å…ˆçº§æ ·å¼é‡ç½®ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-selector-class">.cmc-dialog</span> {
  &amp;<span class="hljs-selector-class">.el-dialog</span> {
    <span class="hljs-comment">// ä½¿ç”¨ !important ç¡®ä¿ä¸è¢«å¤–éƒ¨æ ·å¼è¦†ç›–</span>
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-meta">!important</span>;
    <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">0</span> <span class="hljs-meta">!important</span>;
    <span class="hljs-attribute">padding-bottom</span>: <span class="hljs-number">0</span> <span class="hljs-meta">!important</span>;
    <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">0</span> <span class="hljs-meta">!important</span>;
    <span class="hljs-attribute">padding-right</span>: <span class="hljs-number">0</span> <span class="hljs-meta">!important</span>;
  }

  <span class="hljs-selector-class">.el-dialog__header</span> {
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-meta">!important</span>;
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-meta">!important</span>;
  }

  <span class="hljs-selector-class">.el-dialog__body</span> {
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-meta">!important</span>;
  }

  <span class="hljs-selector-class">.el-dialog__footer</span> {
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-meta">!important</span>;
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-meta">!important</span>;
  }
}

</code></pre>
<hr/>
<h2 data-id="heading-18">äº”ã€åŒç±»é—®é¢˜é¢„é˜²æŒ‡å—</h2>
<h3 data-id="heading-19">5.1 âŒ é”™è¯¯å†™æ³•ç¤ºä¾‹</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// é”™è¯¯1ï¼šç›´æ¥ä½¿ç”¨ :global ä¿®æ”¹ Element Plus ç»„ä»¶</span>
:<span class="hljs-built_in">global</span>(.el-dialog) { ... }
:<span class="hljs-built_in">global</span>(.el-table) { ... }
:<span class="hljs-built_in">global</span>(.el-form) { ... }

<span class="hljs-comment">// é”™è¯¯2ï¼šåœ¨ scoped æ ·å¼ä¸­ä½¿ç”¨è¿‡äºå®½æ³›çš„é€‰æ‹©å™¨</span>
<span class="hljs-selector-class">.my-page</span> {
  :<span class="hljs-built_in">global</span>(.el-button) {
    <span class="hljs-attribute">background</span>: red;
  }
}

<span class="hljs-comment">// é”™è¯¯3ï¼šåœ¨å…¨å±€æ ·å¼æ–‡ä»¶ä¸­ç›´æ¥ä¿®æ”¹ç»„ä»¶æ ·å¼</span>
<span class="hljs-comment">// src/assets/styles/index.scss</span>
<span class="hljs-selector-class">.el-dialog</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">52px</span> <span class="hljs-number">50px</span>;
}
</code></pre>
<h3 data-id="heading-20">5.2 âœ… æ­£ç¡®å†™æ³•ç¤ºä¾‹</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æ­£ç¡®1ï¼šä½¿ç”¨ç»„åˆé€‰æ‹©å™¨ï¼Œç¡®ä¿å”¯ä¸€æ€§</span>
:<span class="hljs-built_in">global</span>(.my-specific-dialog.el-dialog) {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">52px</span> <span class="hljs-number">50px</span>;
}

<span class="hljs-comment">// æ­£ç¡®2ï¼šä½¿ç”¨ BEM å‘½å + ç»„åˆé€‰æ‹©å™¨</span>
:<span class="hljs-built_in">global</span>(.page-name__dialog.el-dialog) {
  <span class="hljs-comment">// æ ·å¼</span>
}

<span class="hljs-comment">// æ­£ç¡®3ï¼šåœ¨ç»„ä»¶ä¸Šä½¿ç”¨ class å±æ€§</span>
&lt;el-dialog class="my-unique-dialog"&gt;

<span class="hljs-comment">// æ­£ç¡®4ï¼šä½¿ç”¨ CSS å˜é‡è¿›è¡Œå®šåˆ¶</span>
<span class="hljs-selector-class">.my-dialog</span> {
  <span class="hljs-attr">--el-dialog-padding-primary</span>: <span class="hljs-number">52px</span> <span class="hljs-number">50px</span>;
}

</code></pre>
<h3 data-id="heading-21">5.3 ä»£ç å®¡æŸ¥æ£€æŸ¥æ¸…å•</h3>
<p>åœ¨ Code Review æ—¶ï¼Œæ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š</p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦ä½¿ç”¨äº† <code>:global(.el-xxx)</code> ç›´æ¥ä¿®æ”¹ Element Plus ç»„ä»¶ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å…¨å±€æ ·å¼æ–‡ä»¶ä¸­æ˜¯å¦æœ‰ç›´æ¥ä¿®æ”¹ç»„ä»¶åº“æ ·å¼çš„ä»£ç ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ä½¿ç”¨ <code>:global()</code> æ—¶æ˜¯å¦æ·»åŠ äº†è¶³å¤Ÿç‰¹å¼‚æ€§çš„çˆ¶é€‰æ‹©å™¨ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> Dialog/Drawer ç­‰ Teleport ç»„ä»¶æ˜¯å¦ä½¿ç”¨äº† <code>class</code> å±æ€§ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ ·å¼æ˜¯å¦å¯èƒ½å½±å“å…¶ä»–é¡µé¢çš„åŒç±»ç»„ä»¶ï¼Ÿ</li>
</ul>
<h3 data-id="heading-22">5.4 ESLint/Stylelint è§„åˆ™å»ºè®®</h3>
<p>å¯ä»¥é…ç½® Stylelint è§„åˆ™æ¥æ£€æµ‹æ½œåœ¨çš„å…¨å±€æ±¡æŸ“ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// stylelint.config.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">rules</span>: {
    <span class="hljs-comment">// ç¦æ­¢ç›´æ¥ä½¿ç”¨ Element Plus ç±»åä½œä¸ºé€‰æ‹©å™¨</span>
    <span class="hljs-string">'selector-disallowed-list'</span>: [
      <span class="hljs-string">'/^\\.el-(?!.*\\.)/'</span>, <span class="hljs-comment">// åŒ¹é…å•ç‹¬çš„ .el-xxx é€‰æ‹©å™¨</span>
      {
        <span class="hljs-attr">message</span>: <span class="hljs-string">'è¯·ä½¿ç”¨ç»„åˆé€‰æ‹©å™¨é¿å…å…¨å±€æ±¡æŸ“ï¼Œå¦‚ .my-class.el-dialog'</span>
      }
    ]
  }
}
</code></pre>
<hr/>
<h2 data-id="heading-23">å…­ã€æ€»ç»“</h2>
<h3 data-id="heading-24">6.1 é—®é¢˜æœ¬è´¨</h3>
<p>è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ <strong>CSS ä½œç”¨åŸŸæ³„æ¼</strong> é—®é¢˜ï¼Œç”±ä»¥ä¸‹å› ç´ å…±åŒå¯¼è‡´ï¼š</p>
<ol>
<li><strong>Teleport æœºåˆ¶</strong> - Dialog DOM è„±ç¦»ç»„ä»¶æ ‘</li>
<li><strong>:global() æ»¥ç”¨</strong> - è·³è¿‡ scoped é™åˆ¶</li>
<li><strong>é€‰æ‹©å™¨ç‰¹å¼‚æ€§ä¸è¶³</strong> - æ²¡æœ‰ä½¿ç”¨ç»„åˆé€‰æ‹©å™¨</li>
<li><strong>æ ·å¼åŠ è½½é¡ºåº</strong> - ååŠ è½½çš„æ ·å¼è¦†ç›–å…ˆåŠ è½½çš„</li>
</ol>
<h3 data-id="heading-25">6.2 æ ¸å¿ƒæ•™è®­</h3>
<ol>
<li><strong>æ°¸è¿œä¸è¦ç›´æ¥ <code>:global(.el-xxx)</code></strong> - å¿…é¡»æ·»åŠ ç‰¹å®šçš„çˆ¶é€‰æ‹©å™¨æˆ–ç»„åˆé€‰æ‹©å™¨</li>
<li><strong>ç»„ä»¶åº“å°è£…è¦æœ‰é˜²å¾¡æ€§</strong> - ä½¿ç”¨ <code>!important</code> é‡ç½®å…³é”®æ ·å¼</li>
<li><strong>ä½¿ç”¨ <code>class</code> è€Œéä»… <code>modal-class</code></strong> - ç¡®ä¿æ ·å¼èƒ½æ­£ç¡®åº”ç”¨</li>
<li><strong>å‘½åè¦æœ‰å”¯ä¸€æ€§</strong> - ä½¿ç”¨ BEM æˆ–é¡µé¢å‰ç¼€é¿å…å†²çª</li>
</ol>
<h3 data-id="heading-26">6.3 æ¨èçš„ Dialog æ ·å¼å®šåˆ¶æ¨¡å¼</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;el-dialog
    class="feature-name__dialog"
    modal-class="feature-name__overlay"
  &gt;
    ...
  &lt;/el-dialog&gt;
&lt;/template&gt;

&lt;style scoped lang="scss"&gt;
// ä½¿ç”¨ç»„åˆé€‰æ‹©å™¨ï¼Œç¡®ä¿åªå½±å“å½“å‰ç»„ä»¶çš„ dialog
:global(.feature-name__dialog.el-dialog) {
  // è‡ªå®šä¹‰æ ·å¼
}
&lt;/style&gt;
</code></pre>
<hr/>
<h2 data-id="heading-27">ä¸ƒã€ç›¸å…³èµ„æº</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fvuejs.org%2Fapi%2Fsfc-css-features.html%23scoped-css" target="_blank" title="https://vuejs.org/api/sfc-css-features.html#scoped-css" ref="nofollow noopener noreferrer">Vue Scoped CSS å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FSpecificity" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity" ref="nofollow noopener noreferrer">CSS Specificity MDN</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Felement-plus.org%2Fzh-CN%2Fcomponent%2Fdialog.html" target="_blank" title="https://element-plus.org/zh-CN/component/dialog.html" ref="nofollow noopener noreferrer">Element Plus Dialog æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fvuejs.org%2Fguide%2Fbuilt-ins%2Fteleport.html" target="_blank" title="https://vuejs.org/guide/built-ins/teleport.html" ref="nofollow noopener noreferrer">Vue Teleport æ–‡æ¡£</a></li>
</ul>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3 è°ƒç”¨ Coze å·¥ä½œæµï¼šä»ä¸Šä¼ å® ç‰©ç…§åˆ°ç”Ÿæˆå†°çƒæ˜æ˜Ÿçš„å®Œæ•´æŠ€æœ¯è§£æ]]></title>    <link>https://juejin.cn/post/7587263750250086451</link>    <guid>https://juejin.cn/post/7587263750250086451</guid>    <pubDate>2025-12-25T03:00:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587263750250086451" data-draft-id="7587238733503545387" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3 è°ƒç”¨ Coze å·¥ä½œæµï¼šä»ä¸Šä¼ å® ç‰©ç…§åˆ°ç”Ÿæˆå†°çƒæ˜æ˜Ÿçš„å®Œæ•´æŠ€æœ¯è§£æ"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,Coze"/> <meta itemprop="datePublished" content="2025-12-25T03:00:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AAAé˜¿giao"/> <meta itemprop="url" content="https://juejin.cn/user/473218785740627"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3 è°ƒç”¨ Coze å·¥ä½œæµï¼šä»ä¸Šä¼ å® ç‰©ç…§åˆ°ç”Ÿæˆå†°çƒæ˜æ˜Ÿçš„å®Œæ•´æŠ€æœ¯è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/473218785740627/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AAAé˜¿giao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T03:00:11.000Z" title="Thu Dec 25 2025 03:00:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Â å¼•è¨€</h2>
<blockquote>
<p><strong>â€œä½ å®¶çš„çŒ«ï¼Œä¹Ÿèƒ½æ‰“å†°çƒï¼Ÿâ€</strong><br/>
ä¸æ˜¯ç©ç¬‘â€”â€”è¿™æ˜¯ä¸€æ¬¡å‰ç«¯ä¸ AI å·¥ä½œæµçš„å®Œç¾é‚‚é€…ã€‚</p>
</blockquote>
<p>åœ¨å½“ä»Š AI åº”ç”¨çˆ†å‘çš„æ—¶ä»£ï¼Œå¼€å‘è€…ä¸å†æ»¡è¶³äºè°ƒç”¨å•ä¸€æ¨¡å‹ APIï¼Œè€Œæ˜¯é€šè¿‡ <strong>å·¥ä½œæµï¼ˆWorkflowï¼‰</strong> ç¼–æ’å¤šä¸ªèƒ½åŠ›èŠ‚ç‚¹ï¼Œå®ç°å¤æ‚ä¸šåŠ¡é€»è¾‘ã€‚è€Œå‰ç«¯ä½œä¸ºç”¨æˆ·äº¤äº’çš„ç¬¬ä¸€çº¿ï¼Œå¦‚ä½•ä¼˜é›…åœ°é›†æˆè¿™äº› AI èƒ½åŠ›ï¼Œæˆä¸ºç°ä»£ Web å¼€å‘çš„é‡è¦è¯¾é¢˜ã€‚</p>
<p>æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥å‰–æä¸€ä¸ªçœŸå®é¡¹ç›®ï¼š<strong>ä½¿ç”¨ Vue3 å‰ç«¯è°ƒç”¨ Coze å¹³å°çš„å·¥ä½œæµ APIï¼Œä¸Šä¼ ä¸€å¼ å® ç‰©ç…§ç‰‡ï¼Œç”Ÿæˆç©¿ç€å®šåˆ¶é˜Ÿæœã€æ‰‹æŒå†°çƒæ†çš„è¿åŠ¨å‘˜å½¢è±¡å›¾</strong>ã€‚æˆ‘ä»¬å°†é€è¡Œè§£è¯» <code>App.vue</code> æºç ï¼Œè§£é‡Šæ¯ä¸€ä¸ª API è°ƒç”¨ã€æ¯ä¸€æ®µé€»è¾‘è®¾è®¡ï¼Œå¹¶ç»“åˆå®Œæ•´çš„ Coze å·¥ä½œæµå›¾è§£ï¼Œè¿˜åŸæ•´ä¸ªæ•°æ®æµè½¬è¿‡ç¨‹ã€‚æ–‡ç« å†…å®¹ä¸¥æ ¼å¼•ç”¨åŸå§‹ä»£ç ï¼ˆä¸€å­—ä¸å˜ï¼‰ï¼Œç¡®ä¿æŠ€æœ¯ç»†èŠ‚ 100% å‡†ç¡®ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€é¡¹ç›®èƒŒæ™¯ä¸ç›®æ ‡</h2>
<blockquote>
<p>AI åº”ç”¨ä¹‹å†°çƒå‰ç«¯åº”ç”¨ vue3ï¼šå†°çƒåä¼šï¼Œä¸Šä¼ å® ç‰©ç…§ç‰‡ï¼Œç”Ÿæˆè¿åŠ¨å‘˜çš„å½¢è±¡ç…§ç‰‡ã€‚</p>
</blockquote>
<p>è¿™ä¸ªåº”ç”¨çš„æ ¸å¿ƒåŠŸèƒ½éå¸¸æ˜ç¡®ï¼š</p>
<ul>
<li>ç”¨æˆ·ä¸Šä¼ ä¸€å¼ å® ç‰©ï¼ˆæˆ–äººç‰©ï¼‰ç…§ç‰‡ï¼›</li>
<li>é€‰æ‹©å†°çƒé˜Ÿæœç¼–å·ã€é¢œè‰²ã€åœºä¸Šä½ç½®ã€æŒæ†æ‰‹ã€è‰ºæœ¯é£æ ¼ç­‰å‚æ•°ï¼›</li>
<li>ç‚¹å‡»â€œç”Ÿæˆâ€ï¼Œç³»ç»Ÿè°ƒç”¨ AI å·¥ä½œæµï¼›</li>
<li>è¿”å›ä¸€å¼ åˆæˆåçš„â€œå†°çƒè¿åŠ¨å‘˜â€å›¾åƒã€‚</li>
</ul>
<p>è€Œè¿™ä¸€åˆ‡çš„å®ç°ï¼Œå®Œå…¨ä¾èµ–äº <strong>Coze å¹³å°æä¾›çš„å·¥ä½œæµ API</strong>ã€‚å‰ç«¯è´Ÿè´£æ”¶é›†è¾“å…¥ã€ä¸Šä¼ æ–‡ä»¶ã€å‘èµ·è¯·æ±‚ã€å±•ç¤ºç»“æœâ€”â€”å…¸å‹çš„â€œè½»å‰ç«¯ + é‡ AI åç«¯â€æ¶æ„ã€‚</p>
<hr/>
<h2 data-id="heading-2">äºŒã€App.vue æ•´ä½“ç»“æ„æ¦‚è§ˆ</h2>
<p><code>App.vue</code> æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ Vue3 å•æ–‡ä»¶ç»„ä»¶ï¼ˆSFCï¼‰ï¼Œé‡‡ç”¨ <code>&lt;script setup&gt;</code> è¯­æ³•ç³–ï¼Œç»“åˆ Composition API å®ç°å“åº”å¼é€»è¾‘ã€‚æ•´ä½“åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š</p>
<ol>
<li><strong><code>&lt;template&gt;</code></strong> ï¼šç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰</li>
<li><strong><code>&lt;script setup&gt;</code></strong> ï¼šä¸šåŠ¡é€»è¾‘ï¼ˆJSï¼‰</li>
<li><strong><code>&lt;style scoped&gt;</code></strong> ï¼šæ ·å¼ï¼ˆCSSï¼‰</li>
</ol>
<p>æˆ‘ä»¬å…ˆä»æ¨¡æ¿å…¥æ‰‹ï¼Œç†è§£ç”¨æˆ·çœ‹åˆ°ä»€ä¹ˆã€èƒ½åšä»€ä¹ˆã€‚</p>
<hr/>
<h2 data-id="heading-3">ä¸‰ã€æ¨¡æ¿ï¼ˆTemplateï¼‰è¯¦è§£ï¼šç”¨æˆ·äº¤äº’å±‚</h2>
<h3 data-id="heading-4">3.1 æ–‡ä»¶ä¸Šä¼ ä¸é¢„è§ˆ</h3>
<pre><code class="hljs language-ini" lang="ini">&lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"file-input"</span>&gt;
  &lt;input 
    <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> 
    <span class="hljs-attr">ref</span>=<span class="hljs-string">"uploadImage"</span> 
    <span class="hljs-attr">accept</span>=<span class="hljs-string">"image/*"</span> 
    @<span class="hljs-attr">change</span>=<span class="hljs-string">"updateImageData"</span> required /&gt;
&lt;/div&gt;
&lt;img :<span class="hljs-attr">src</span>=<span class="hljs-string">"imgPreview"</span> alt=<span class="hljs-string">""</span> v-if=<span class="hljs-string">"imgPreview"</span>/&gt;
</code></pre>
<ul>
<li><code>&lt;input type="file"&gt;</code>ï¼šåŸç”Ÿæ–‡ä»¶é€‰æ‹©å™¨ï¼Œé™åˆ¶åªæ¥å—å›¾ç‰‡ï¼ˆ<code>accept="image/*"</code>ï¼‰ã€‚</li>
<li><code>ref="uploadImage"</code>ï¼šé€šè¿‡ <code>ref</code> è·å–è¯¥ DOM å…ƒç´ ï¼Œä¾¿äº JS ä¸­è¯»å–æ–‡ä»¶ã€‚</li>
<li><code>@change="updateImageData"</code>ï¼šå½“ç”¨æˆ·é€‰æ‹©æ–‡ä»¶åï¼Œç«‹å³è§¦å‘ <code>updateImageData</code> æ–¹æ³•ï¼Œç”Ÿæˆæœ¬åœ°é¢„è§ˆã€‚</li>
<li><code>imgPreview</code> æ˜¯ä¸€ä¸ªå“åº”å¼å˜é‡ï¼Œç”¨äºæ˜¾ç¤º Data URL æ ¼å¼çš„é¢„è§ˆå›¾ï¼Œæ— éœ€ä¸Šä¼ å³å¯çœ‹åˆ°æ•ˆæœã€‚</li>
</ul>
<blockquote>
<p>âœ… <strong>ç”¨æˆ·ä½“éªŒäº®ç‚¹</strong>ï¼šå³ä½¿å›¾ç‰‡å¾ˆå¤§ã€ä¸Šä¼ å¾ˆæ…¢ï¼Œç”¨æˆ·ä¹Ÿèƒ½ç«‹åˆ»ç¡®è®¤è‡ªå·±é€‰å¯¹äº†å›¾ã€‚</p>
</blockquote>
<h3 data-id="heading-5">3.2 è¡¨å•å‚æ•°è®¾ç½®</h3>
<p>æ¥ä¸‹æ¥æ˜¯ä¸¤ç»„è®¾ç½®é¡¹ï¼Œå…¨éƒ¨ä½¿ç”¨ <code>v-model</code> åŒå‘ç»‘å®šï¼š</p>
<h4 data-id="heading-6">ç¬¬ä¸€ç»„ï¼šé˜Ÿæœä¿¡æ¯</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"settings"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"selection"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>é˜Ÿæœç¼–å·:<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"uniform_number"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"selection"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>é˜Ÿæœé¢œè‰²:<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"uniform_color"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"çº¢"</span>&gt;</span>çº¢<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"è“"</span>&gt;</span>è“<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"ç»¿"</span>&gt;</span>ç»¿<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"ç™½"</span>&gt;</span>ç™½<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"é»‘"</span>&gt;</span>é»‘<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<ul>
<li><code>uniform_number</code>ï¼šé»˜è®¤å€¼ä¸º <code>10</code>ï¼ˆè§ script éƒ¨åˆ†ï¼‰ï¼Œæ”¯æŒä»»æ„æ•°å­—ã€‚</li>
<li><code>uniform_color</code>ï¼šé™å®šäº”ç§é¢œè‰²ï¼Œå€¼ä¸ºä¸­æ–‡å­—ç¬¦ä¸²ï¼ˆå¦‚ <code>"çº¢"</code>ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-7">ç¬¬äºŒç»„ï¼šè§’è‰²ä¸é£æ ¼</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"settings"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"selection"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>ä½ç½®ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"position"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0"</span>&gt;</span>å®ˆé—¨å‘˜<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"1"</span>&gt;</span>å‰é”‹<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"2"</span>&gt;</span>åå«<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"selection"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>æŒæ†ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"shooting_hand"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0"</span>&gt;</span>å·¦æ‰‹<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"1"</span>&gt;</span>å³æ‰‹<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"selection"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>é£æ ¼ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"style"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"å†™å®"</span>&gt;</span>å†™å®<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"ä¹é«˜"</span>&gt;</span>ä¹é«˜<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"å›½æ¼«"</span>&gt;</span>å›½æ¼«<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"æ—¥æ¼«"</span>&gt;</span>æ—¥æ¼«<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"æ²¹ç”»"</span>&gt;</span>æ²¹ç”»<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"æ¶‚é¸¦"</span>&gt;</span>æ¶‚é¸¦<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"ç´ æ"</span>&gt;</span>ç´ æ<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<ul>
<li><code>position</code> å’Œ <code>shooting_hand</code> çš„å€¼è™½ç„¶æ˜¯æ•°å­—å­—ç¬¦ä¸²ï¼ˆ<code>"0"</code>/<code>"1"</code>/<code>"2"</code>ï¼‰ï¼Œä½†å‰ç«¯æ˜¾ç¤ºä¸ºä¸­æ–‡ï¼Œå…¼é¡¾å¯è¯»æ€§ä¸åç«¯å…¼å®¹æ€§ã€‚</li>
<li><code>style</code> æä¾› 7 ç§è‰ºæœ¯é£æ ¼ï¼Œæå¤§å¢å¼ºè¶£å‘³æ€§å’Œåˆ†äº«æ¬²ã€‚</li>
</ul>
<h3 data-id="heading-8">3.3 ç”ŸæˆæŒ‰é’®ä¸è¾“å‡ºåŒºåŸŸ</h3>
<pre><code class="hljs language-ini" lang="ini">&lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"generate"</span>&gt;
  &lt;button @<span class="hljs-attr">click</span>=<span class="hljs-string">"generate"</span>&gt;ç”Ÿæˆ&lt;/button&gt;
&lt;/div&gt;
</code></pre>
<p>ç‚¹å‡»åè§¦å‘ <code>generate()</code> å‡½æ•°ï¼Œå¯åŠ¨æ•´ä¸ª AI ç”Ÿæˆæµç¨‹ã€‚</p>
<p>è¾“å‡ºåŒºåŸŸï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"output"</span>&gt;
  &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"generated"</span>&gt;
    &lt;img :<span class="hljs-attr">src</span>=<span class="hljs-string">"imgUrl"</span> alt=<span class="hljs-string">""</span> v-if=<span class="hljs-string">"imgUrl"</span>/&gt;
    &lt;div <span class="hljs-attr">v-if</span>=<span class="hljs-string">"status"</span>&gt;{{ status }}&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<ul>
<li><code>imgUrl</code>ï¼šå­˜å‚¨ Coze è¿”å›çš„ç”Ÿæˆå›¾ URLã€‚</li>
<li><code>status</code>ï¼šåŠ¨æ€æ˜¾ç¤ºå½“å‰çŠ¶æ€ï¼ˆå¦‚â€œä¸Šä¼ ä¸­â€¦â€ã€â€œç”Ÿæˆå¤±è´¥â€ç­‰ï¼‰ï¼Œé¿å…ç”¨æˆ·ç„¦è™‘ã€‚</li>
</ul>
<blockquote>
<p>ğŸ’¡ <strong>è®¾è®¡å“²å­¦</strong>ï¼šçŠ¶æ€åé¦ˆæ˜¯è‰¯å¥½ UX çš„æ ¸å¿ƒã€‚æ²¡æœ‰åé¦ˆçš„â€œç”Ÿæˆâ€æŒ‰é’®ï¼Œç­‰äºé»‘ç›’ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-9">å››ã€è„šæœ¬é€»è¾‘ï¼ˆScript Setupï¼‰æ·±åº¦è§£æ</h2>
<p>ç°åœ¨è¿›å…¥æœ€æ ¸å¿ƒçš„éƒ¨åˆ†â€”â€”JavaScript é€»è¾‘ã€‚</p>
<h3 data-id="heading-10">4.1 ç¯å¢ƒé…ç½®ä¸å¸¸é‡å®šä¹‰</h3>
<pre><code class="hljs language-ini" lang="ini">import { ref, onMounted } from 'vue'

const <span class="hljs-attr">patToken</span> = import.meta.env.VITE_PAT_TOKEN<span class="hljs-comment">;</span>
const <span class="hljs-attr">uploadUrl</span> = <span class="hljs-string">'https://api.coze.cn/v1/files/upload'</span><span class="hljs-comment">;</span>
const <span class="hljs-attr">workflowUrl</span> = <span class="hljs-string">'https://api.coze.cn/v1/workflow/run'</span><span class="hljs-comment">;</span>
const <span class="hljs-attr">workflow_id</span> = <span class="hljs-string">'7584046136391630898'</span><span class="hljs-comment">;</span>
</code></pre>
<ul>
<li>
<p><code>import.meta.env.VITE_PAT_TOKEN</code>ï¼šVite æä¾›çš„ç¯å¢ƒå˜é‡æ³¨å…¥æœºåˆ¶ã€‚<code>.env</code> æ–‡ä»¶ä¸­åº”åŒ…å«ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">VITE_PAT_TOKEN</span>=cztei_lvNwngHgch9rxNlx4KiXuky3UjfW9iqCZRe17KDXjh22RLL8sPLsb8Vl10R3IHJsW
</code></pre>
</li>
<li>
<p><code>uploadUrl</code>ï¼šCoze å®˜æ–¹æ–‡ä»¶ä¸Šä¼ æ¥å£ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.coze.com%2Freference%2Fupload_file" title="https://docs.coze.com/reference/upload_file" target="_blank" ref="nofollow noopener noreferrer">æ–‡æ¡£</a>ï¼‰ã€‚</p>
</li>
<li>
<p><code>workflowUrl</code>ï¼šè§¦å‘å·¥ä½œæµçš„å…¥å£ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.coze.com%2Freference%2Frun_workflow" title="https://docs.coze.com/reference/run_workflow" target="_blank" ref="nofollow noopener noreferrer">æ–‡æ¡£</a>ï¼‰ã€‚</p>
</li>
<li>
<p><code>workflow_id</code>ï¼šåœ¨ Coze æ§åˆ¶å°åˆ›å»ºçš„å·¥ä½œæµå”¯ä¸€ IDï¼Œå†…éƒ¨å·²é…ç½®å¥½å›¾åƒç”Ÿæˆé€»è¾‘ï¼ˆå¦‚è°ƒç”¨æ–‡ç”Ÿå›¾æ¨¡å‹ã€å åŠ é˜Ÿæœç­‰ï¼‰ã€‚</p>
</li>
</ul>
<blockquote>
<p>âš ï¸ <strong>å®‰å…¨è­¦å‘Š</strong>ï¼šå°† PAT Token æ”¾åœ¨å‰ç«¯ä»…é€‚ç”¨äºæ¼”ç¤ºæˆ–å†…éƒ¨å·¥å…·ã€‚ç”Ÿäº§ç¯å¢ƒåº”é€šè¿‡åç«¯ä»£ç† APIï¼Œé¿å… Token æ³„éœ²ã€‚</p>
</blockquote>
<h3 data-id="heading-11">4.2 å“åº”å¼çŠ¶æ€å£°æ˜</h3>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">uniform_number</span> = ref(<span class="hljs-number">10</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">uniform_color</span> = ref(<span class="hljs-string">'çº¢'</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">position</span> = ref(<span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">shooting_hand</span> = ref(<span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">style</span> = ref(<span class="hljs-string">'å†™å®'</span>)<span class="hljs-comment">;</span>

const <span class="hljs-attr">status</span> = ref(<span class="hljs-string">''</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">imageUrl</span> = ref(<span class="hljs-string">''</span>)<span class="hljs-comment">;</span>
</code></pre>
<ul>
<li>æ‰€æœ‰è¡¨å•å­—æ®µå‡ä¸º <code>ref</code> å“åº”å¼å¯¹è±¡ï¼Œç¡®ä¿è§†å›¾è‡ªåŠ¨æ›´æ–°ã€‚</li>
<li><code>status</code> åˆå§‹ä¸ºç©ºï¼Œåç»­å°†æ˜¾ç¤ºï¼šâ€œå›¾ç‰‡ä¸Šä¼ ä¸­...â€ â†’ â€œå›¾ç‰‡ä¸Šä¼ æˆåŠŸ, æ­£åœ¨ç”Ÿæˆ...â€ â†’ æˆåŠŸæ¸…ç©º æˆ– é”™è¯¯ä¿¡æ¯ã€‚</li>
<li><code>imageUrl</code> åˆå§‹ä¸ºç©ºï¼Œç”ŸæˆæˆåŠŸåèµ‹å€¼ä¸ºå›¾ç‰‡ URLã€‚</li>
</ul>
<h3 data-id="heading-12">4.3 æ ¸å¿ƒå‡½æ•° 1ï¼šå›¾ç‰‡é¢„è§ˆï¼ˆupdateImageDataï¼‰</h3>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">uploadImage</span> = ref(null)<span class="hljs-comment">;</span>
const <span class="hljs-attr">imgPreview</span> = ref(<span class="hljs-string">''</span>)<span class="hljs-comment">;</span>

const <span class="hljs-attr">updateImageData</span> = () =&gt; {
  const <span class="hljs-attr">input</span> = uploadImage.value<span class="hljs-comment">;</span>
  if (!input.files || <span class="hljs-attr">input.files.length</span> === <span class="hljs-number">0</span>) {
    return<span class="hljs-comment">;</span>
  }
  const <span class="hljs-attr">file</span> = input.files[<span class="hljs-number">0</span>]<span class="hljs-comment">;</span>
  const <span class="hljs-attr">reader</span> = new FileReader()<span class="hljs-comment">;</span>
  reader.readAsDataURL(file)<span class="hljs-comment">;</span>
  <span class="hljs-attr">reader.onload</span> = (e) =&gt; {
    <span class="hljs-attr">imgPreview.value</span> = e.target.result<span class="hljs-comment">;</span>
  }<span class="hljs-comment">;</span>
}
</code></pre>
<ul>
<li><code>uploadImage</code> æ˜¯å¯¹ <code>&lt;input&gt;</code> å…ƒç´ çš„å¼•ç”¨ã€‚</li>
<li>ä½¿ç”¨ <code>FileReader</code> çš„ <code>readAsDataURL</code> æ–¹æ³•ï¼Œå°†æ–‡ä»¶è½¬ä¸º Base64 ç¼–ç çš„ Data URLã€‚</li>
<li><code>onload</code> å›è°ƒä¸­ï¼Œå°†ç»“æœèµ‹ç»™ <code>imgPreview</code>ï¼Œè§¦å‘ <code>&lt;img&gt;</code> æ ‡ç­¾æ¸²æŸ“ã€‚</li>
</ul>
<blockquote>
<p>âœ… <strong>ä¼˜åŠ¿</strong>ï¼šçº¯å‰ç«¯å®ç°ï¼Œé›¶ç½‘ç»œè¯·æ±‚ï¼Œç§’çº§å“åº”ã€‚</p>
</blockquote>
<h3 data-id="heading-13">4.4 æ ¸å¿ƒå‡½æ•° 2ï¼šæ–‡ä»¶ä¸Šä¼ ï¼ˆuploadFileï¼‰</h3>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">uploadFile</span> = async () =&gt; {
  const <span class="hljs-attr">formData</span> = new FormData()<span class="hljs-comment">;</span>
  const <span class="hljs-attr">input</span> = uploadImage.value<span class="hljs-comment">;</span>
  if (!input.files || input.files.length &lt;= 0) return<span class="hljs-comment">;</span>
  formData.append('file', input.files<span class="hljs-section">[0]</span>)<span class="hljs-comment">;</span>

  const <span class="hljs-attr">res</span> = await fetch(uploadUrl, {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${patToken}`
    },
    body: formData
  })<span class="hljs-comment">;</span>

  const <span class="hljs-attr">ret</span> = await res.json()<span class="hljs-comment">;</span>
  console.log(ret)<span class="hljs-comment">;</span>
  if (ret.code !== 0) {
    <span class="hljs-attr">status.value</span> = ret.msg<span class="hljs-comment">;</span>
    return<span class="hljs-comment">;</span>
  }
  return ret.data.id<span class="hljs-comment">;</span>
}
</code></pre>
<h4 data-id="heading-14">é€è¡Œè§£æï¼š</h4>
<ol>
<li>
<p><strong>æ„é€  FormData</strong>ï¼š</p>
<ul>
<li><code>new FormData()</code> æ˜¯æµè§ˆå™¨åŸç”Ÿ APIï¼Œç”¨äºæ„å»º multipart/form-data è¯·æ±‚ä½“ï¼Œä¸“ä¸ºæ–‡ä»¶ä¸Šä¼ è®¾è®¡ã€‚</li>
<li><code>formData.append('file', file)</code>ï¼šCoze è¦æ±‚å­—æ®µåä¸º <code>file</code>ã€‚</li>
</ul>
</li>
<li>
<p><strong>å‘é€ POST è¯·æ±‚</strong>ï¼š</p>
<ul>
<li>
<p>URLï¼š<code>https://api.coze.cn/v1/files/upload</code></p>
</li>
<li>
<p>Headersï¼š</p>
<ul>
<li><code>Authorization: Bearer &lt;token&gt;</code>ï¼šCoze ä½¿ç”¨ Bearer Token è®¤è¯ã€‚</li>
</ul>
</li>
<li>
<p>Bodyï¼š<code>formData</code> è‡ªåŠ¨è®¾ç½®æ­£ç¡® Content-Typeï¼ˆå« boundaryï¼‰ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>å¤„ç†å“åº”</strong>ï¼š</p>
<ul>
<li>
<p>æˆåŠŸæ—¶è¿”å›ï¼š</p>
<pre><code class="hljs language-css" lang="css">{ "<span class="hljs-selector-tag">code</span>": <span class="hljs-number">0</span>, <span class="hljs-string">"msg"</span>: <span class="hljs-string">"success"</span>, <span class="hljs-string">"data"</span>: { "id": <span class="hljs-string">"file_xxx"</span>, ... } }
</code></pre>
</li>
<li>
<p>å¤±è´¥æ—¶ <code>code !== 0</code>ï¼Œ<code>msg</code> åŒ…å«é”™è¯¯åŸå› ï¼ˆå¦‚ Token æ— æ•ˆã€æ–‡ä»¶è¿‡å¤§ç­‰ï¼‰ã€‚</p>
</li>
<li>
<p>å‡½æ•°è¿”å› <code>file_id</code>ï¼ˆå¦‚ <code>"file_abc123"</code>ï¼‰ï¼Œä¾›ä¸‹ä¸€æ­¥ä½¿ç”¨ã€‚</p>
</li>
</ul>
</li>
</ol>
<blockquote>
<p><strong>å…³é”®ç‚¹</strong>ï¼šCoze çš„æ–‡ä»¶ä¸Šä¼ æ˜¯ç‹¬ç«‹æ­¥éª¤ï¼Œå¿…é¡»å…ˆä¸Šä¼ è·å– <code>file_id</code>ï¼Œæ‰èƒ½åœ¨å·¥ä½œæµä¸­å¼•ç”¨ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-15">äº”ã€æ ¸å¿ƒå‡½æ•° 3ï¼šè°ƒç”¨å·¥ä½œæµï¼ˆgenerateï¼‰</h2>
<p>è¿™æ˜¯æ•´ä¸ªåº”ç”¨çš„â€œå¤§è„‘â€ã€‚æˆ‘ä»¬ç»“åˆ Coze å·¥ä½œæµå›¾ï¼Œæ·±å…¥åˆ†æå…¶é€»è¾‘ä¸æ•°æ®æµã€‚</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">generate</span> = async () =&gt; {
  <span class="hljs-attr">status.value</span> = <span class="hljs-string">"å›¾ç‰‡ä¸Šä¼ ä¸­..."</span><span class="hljs-comment">;</span>
  const <span class="hljs-attr">file_id</span> = await uploadFile()<span class="hljs-comment">;</span>
  if (!file_id) return<span class="hljs-comment">;</span>

  <span class="hljs-attr">status.value</span> = <span class="hljs-string">"å›¾ç‰‡ä¸Šä¼ æˆåŠŸ, æ­£åœ¨ç”Ÿæˆ..."</span><span class="hljs-comment">;</span>

  const <span class="hljs-attr">parameters</span> = {
    picture: JSON.stringify({ file_id }),
    style: style.value,
    uniform_color: uniform_color.value,
    uniform_number: uniform_number.value,
    position: position.value,
    shooting_hand: shooting_hand.value,
  }<span class="hljs-comment">;</span>

  try {
    const <span class="hljs-attr">res</span> = await fetch(workflowUrl, {
      method: 'POST',
      headers: {
        Authorization: `Bearer ${patToken}`,
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ workflow_id, parameters })
    })<span class="hljs-comment">;</span>

    const <span class="hljs-attr">ret</span> = await res.json()<span class="hljs-comment">;</span>
    console.log("Workflow API response:", ret)<span class="hljs-comment">;</span>
    if (ret.code !== 0) {
      <span class="hljs-attr">status.value</span> = ret.msg<span class="hljs-comment">;</span>
      return<span class="hljs-comment">;</span>
    }

    // æ£€æŸ¥è¿”å›æ•°æ®ç»“æ„
    console.log("Return data:", ret.data)<span class="hljs-comment">;</span>
    console.log("Return data type:", typeof ret.data)<span class="hljs-comment">;</span>

    // å°è¯•è§£ææ•°æ®
    let data<span class="hljs-comment">;</span>
    if (typeof <span class="hljs-attr">ret.data</span> === <span class="hljs-string">'string'</span>) {
      try {
        <span class="hljs-attr">data</span> = JSON.parse(ret.data)<span class="hljs-comment">;</span>
        console.log("Parsed data:", data)<span class="hljs-comment">;</span>
      } catch (e) {
        console.error("JSON parse error:", e)<span class="hljs-comment">;</span>
        <span class="hljs-attr">status.value</span> = <span class="hljs-string">"æ•°æ®è§£æé”™è¯¯"</span><span class="hljs-comment">;</span>
        return<span class="hljs-comment">;</span>
      }
    } else {
      <span class="hljs-attr">data</span> = ret.data<span class="hljs-comment">;</span>
    }

    // æ£€æŸ¥data.dataæ˜¯å¦å­˜åœ¨
    if (data &amp;&amp; data.data) {
      console.log("Generated image URL:", data.data)<span class="hljs-comment">;</span>
      <span class="hljs-attr">status.value</span> = <span class="hljs-string">''</span><span class="hljs-comment">;</span>
      <span class="hljs-attr">imageUrl.value</span> = data.data<span class="hljs-comment">;</span>
    } else {
      console.error("Invalid data structure, missing 'data' field:", data)<span class="hljs-comment">;</span>
      <span class="hljs-attr">status.value</span> = <span class="hljs-string">"è¿”å›æ•°æ®ç»“æ„é”™è¯¯"</span><span class="hljs-comment">;</span>
    }
  } catch (error) {
    console.error("Generate error:", error)<span class="hljs-comment">;</span>
    <span class="hljs-attr">status.value</span> = <span class="hljs-string">"ç”Ÿæˆå¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥"</span><span class="hljs-comment">;</span>
  }
}
</code></pre>
<h3 data-id="heading-16">é€»è¾‘æ‹†è§£ï¼ˆç»“åˆ Coze å·¥ä½œæµå›¾ï¼‰</h3>
<h4 data-id="heading-17">Coze å·¥ä½œæµç»“æ„ï¼ˆå›¾è§£è¯´æ˜ï¼‰</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df867d224be54ad6abb69d515547f3d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUFB6Zi_Z2lhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767236411&amp;x-signature=w82B316O2BMsmkUpKIegCC%2BsVOY%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<blockquote>
<p><strong>å›¾æ³¨</strong>ï¼š</p>
<ol>
<li><strong>å¼€å§‹èŠ‚ç‚¹</strong>ï¼šæ¥æ”¶ <code>picture</code>, <code>style</code>, <code>uniform_number</code>, <code>position</code>, <code>shooting_hand</code>, <code>uniform_color</code> ç­‰å‚æ•°ã€‚</li>
<li><strong>åˆ†æ”¯ä¸€</strong>ï¼š<code>imgUnderstand_1</code>ï¼ˆå›¾åƒç†è§£ï¼‰â†’ åˆ†æä¸Šä¼ å›¾ç‰‡å†…å®¹ï¼ˆå¦‚åŠ¨ç‰©ç§ç±»ã€å§¿æ€ï¼‰ã€‚</li>
<li><strong>åˆ†æ”¯äºŒ</strong>ï¼š<code>ä»£ç </code> èŠ‚ç‚¹ â†’ æ ¹æ® <code>position</code>, <code>shooting_hand</code>, <code>style</code> ç­‰ç”Ÿæˆæè¿°æ–‡æœ¬ï¼ˆå¦‚â€œä¸€åªç‹—ï¼Œå³æ‰‹æŒæ†ï¼Œèº«ç©¿çº¢è‰²10å·é˜Ÿæœï¼Œç«™åœ¨å†°çƒåœºä¸Šâ€ï¼‰ã€‚</li>
<li><strong>å¤§æ¨¡å‹èŠ‚ç‚¹</strong>ï¼šå°†å›¾åƒç†è§£ç»“æœä¸æè¿°æ–‡æœ¬åˆå¹¶ï¼Œç”Ÿæˆæœ€ç»ˆæç¤ºè¯ï¼ˆpromptï¼‰ã€‚</li>
<li><strong>å›¾åƒç”ŸæˆèŠ‚ç‚¹</strong>ï¼šè°ƒç”¨æ–‡ç”Ÿå›¾æ¨¡å‹ï¼ˆå¦‚è±†åŒ…Â·1.5Â·ProÂ·32kï¼‰ï¼Œç”Ÿæˆæ–°å›¾åƒã€‚</li>
<li><strong>ç»“æŸèŠ‚ç‚¹</strong>ï¼šè¾“å‡ºç”Ÿæˆå›¾çš„ URLã€‚</li>
</ol>
</blockquote>
<hr/>
<h4 data-id="heading-18">å‰ç«¯ä»£ç çš„å¯¹åº”å…³ç³»</h4>








































<table><thead><tr><th>å‰ç«¯å‚æ•°</th><th>Coze è¾“å…¥å­—æ®µ</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><code>picture</code></td><td><code>picture</code></td><td>å›¾ç‰‡æ–‡ä»¶ IDï¼Œä¼ å…¥ <code>imgUnderstand_1</code> å’Œ <code>å›¾åƒç”Ÿæˆ</code> èŠ‚ç‚¹</td></tr><tr><td><code>style</code></td><td><code>style</code></td><td>ä¼ é€’ç»™ <code>ä»£ç </code> èŠ‚ç‚¹ï¼Œå†³å®šè‰ºæœ¯é£æ ¼</td></tr><tr><td><code>uniform_number</code></td><td><code>uniform_number</code></td><td>ç”¨äºç”Ÿæˆæè¿°</td></tr><tr><td><code>position</code></td><td><code>position</code></td><td>å†³å®šè§’è‰²åŠ¨ä½œï¼ˆå¦‚å®ˆé—¨å‘˜è¹²å§¿ï¼‰</td></tr><tr><td><code>shooting_hand</code></td><td><code>shooting_hand</code></td><td>å†³å®šæŒæ†æ‰‹</td></tr><tr><td><code>uniform_color</code></td><td><code>uniform_color</code></td><td>ç”¨äºç”Ÿæˆé˜Ÿæœé¢œè‰²</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>å…³é”®ç‚¹</strong>ï¼šå‰ç«¯åªéœ€æä¾›åŸå§‹å‚æ•°ï¼ŒCoze å·¥ä½œæµå†…éƒ¨å®Œæˆæ‰€æœ‰é€»è¾‘ç¼–æ’ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-19">æ•°æ®æµå…¨è¿‡ç¨‹</h3>
<ol>
<li>
<p><strong>å‰ç«¯ä¸Šä¼ æ–‡ä»¶</strong> â†’ å¾—åˆ° <code>file_id</code></p>
</li>
<li>
<p><strong>å‰ç«¯ç»„è£…å‚æ•°</strong> â†’ å‘é€è‡³ <code>/workflow/run</code></p>
</li>
<li>
<p><strong>Coze å·¥ä½œæµæ‰§è¡Œ</strong>ï¼š</p>
<ul>
<li><code>imgUnderstand_1</code>ï¼šåˆ†æå›¾ç‰‡å†…å®¹ â†’ è¾“å‡º <code>text</code>, <code>url</code>, <code>content</code></li>
<li><code>ä»£ç </code> èŠ‚ç‚¹ï¼šæ ¹æ®å‚æ•°ç”Ÿæˆæè¿° â†’ å¦‚ <code>"ä¸€åªçŒ«ï¼Œèº«ç©¿è“è‰²10å·é˜Ÿæœï¼Œå³æ‰‹æŒæ†ï¼Œç«™åœ¨å†°çƒåœºä¸Šï¼Œé£æ ¼ä¸ºä¹é«˜"</code></li>
<li><code>å¤§æ¨¡å‹</code> èŠ‚ç‚¹ï¼šåˆå¹¶å›¾åƒç†è§£ç»“æœä¸æè¿° â†’ ç”Ÿæˆæœ€ç»ˆ prompt</li>
<li><code>å›¾åƒç”Ÿæˆ</code> èŠ‚ç‚¹ï¼šè°ƒç”¨æ¨¡å‹ç”Ÿæˆå›¾åƒ â†’ è¿”å› <code>data</code> å­—æ®µï¼ˆURLï¼‰</li>
</ul>
</li>
<li>
<p><strong>å‰ç«¯æ¥æ”¶å“åº”</strong>ï¼š</p>
<ul>
<li>è‹¥ <code>ret.data</code> æ˜¯å­—ç¬¦ä¸² â†’ å°è¯• <code>JSON.parse</code></li>
<li>è‹¥æ˜¯å¯¹è±¡ â†’ ç›´æ¥å– <code>data.data</code></li>
<li>æœ€ç»ˆèµ‹å€¼ç»™ <code>imageUrl</code></li>
</ul>
</li>
</ol>
<blockquote>
<p>âœ… <strong>ä¸ºä»€ä¹ˆéœ€è¦åŒé‡è§£æï¼Ÿ</strong><br/>
å› ä¸º Coze çš„â€œå›¾åƒç”Ÿæˆâ€èŠ‚ç‚¹å¯èƒ½ç›´æ¥è¿”å› URL å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯èƒ½è¿”å› <code>{ data: "url" }</code> ç»“æ„ã€‚å‰ç«¯å¿…é¡»å…¼å®¹ä¸¤ç§æƒ…å†µã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-20">å…­ã€æ ·å¼ï¼ˆStyleï¼‰ç®€æ</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: row;
  <span class="hljs-attribute">align-items</span>: start;
  <span class="hljs-attribute">justify-content</span>: start;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;
  <span class="hljs-attribute">font-size</span>: .<span class="hljs-number">85rem</span>;
}
<span class="hljs-selector-class">.generated</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;
  <span class="hljs-attribute">border</span>: solid <span class="hljs-number">1px</span> black;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">justify-content</span>: center;
  <span class="hljs-attribute">align-items</span>: center;
}
<span class="hljs-selector-class">.output</span> <span class="hljs-selector-tag">img</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<ul>
<li>ä½¿ç”¨ Flex å¸ƒå±€ï¼Œå·¦å³åˆ†æ ï¼ˆè¾“å…¥åŒºå›ºå®šå®½åº¦ï¼Œè¾“å‡ºåŒºè‡ªé€‚åº”ï¼‰ã€‚</li>
<li><code>.generated</code> å®¹å™¨å›ºå®š 400x400ï¼Œå›¾ç‰‡å±…ä¸­æ˜¾ç¤ºï¼Œæ— è®ºåŸå§‹æ¯”ä¾‹å¦‚ä½•éƒ½ä¸å˜å½¢ã€‚</li>
<li><code>scoped</code> ç¡®ä¿æ ·å¼ä»…ä½œç”¨äºå½“å‰ç»„ä»¶ï¼Œé¿å…æ±¡æŸ“å…¨å±€ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-21">ä¸ƒã€é¡¹ç›®è¿è¡Œ</h2>
<p>åœ¨é¡¹ç›®ç»ˆç«¯è¿è¡Œå‘½ä»¤ ï¼šnpm run dev</p>
<p>è¿è¡Œç•Œé¢å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c0b4ffcc9074875ac79d19c6dd039b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUFB6Zi_Z2lhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767236411&amp;x-signature=0TGAd4aYtt0gXusNweelNBbN%2BUM%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>é€‰æ‹©å›¾ç‰‡åŠé£æ ¼ç­‰å†…å®¹åï¼Œç‚¹å‡»å¼€å§‹ç”Ÿæˆï¼Œè¿è¡Œç»“æœå¦‚å›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae9a4d82c5964599b8b4c648a2a02684~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUFB6Zi_Z2lhbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767236411&amp;x-signature=kyiJS9z4Mjupkb9D9Ov3fs%2BNkj8%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-22">æ€»ç»“ï¼šä¸ºä»€ä¹ˆè¿™ä¸ªé¡¹ç›®å€¼å¾—å­¦ä¹ ï¼Ÿ</h2>
<ol>
<li>
<p><strong>çœŸå®åœºæ™¯</strong>ï¼šä¸æ˜¯ Hello Worldï¼Œè€Œæ˜¯å®Œæ•´äº§å“é€»è¾‘ã€‚</p>
</li>
<li>
<p><strong>æŠ€æœ¯å…¨é¢</strong>ï¼š</p>
<ul>
<li>Vue3 Composition API</li>
<li>æ–‡ä»¶ä¸Šä¼ ä¸é¢„è§ˆ</li>
<li>Fetch API ä¸é”™è¯¯å¤„ç†</li>
<li>ç¯å¢ƒå˜é‡ç®¡ç†</li>
<li>å“åº”å¼çŠ¶æ€é©±åŠ¨ UI</li>
</ul>
</li>
<li>
<p><strong>AI é›†æˆèŒƒå¼</strong>ï¼šå±•ç¤ºäº†å¦‚ä½•å°†å¤æ‚ AI èƒ½åŠ›å°è£…ä¸ºç®€å• APIï¼Œå‰ç«¯åªéœ€â€œå¡«å‚æ•° + æ‹¿ç»“æœâ€ã€‚</p>
</li>
<li>
<p><strong>ç”¨æˆ·ä½“éªŒä¼˜å…ˆ</strong>ï¼šçŠ¶æ€æç¤ºã€æœ¬åœ°é¢„è§ˆã€é”™è¯¯åé¦ˆä¸€åº”ä¿±å…¨ã€‚</p>
</li>
</ol>
<p><strong>å®‰å…¨ä¸éƒ¨ç½²å»ºè®®</strong>ï¼š</p>
<ul>
<li>
<p><strong>åç«¯ä»£ç†æ‰€æœ‰ Coze API è°ƒç”¨</strong>ï¼š</p>
<ul>
<li>å‰ç«¯ â†’ è‡ªå·±çš„åç«¯ï¼ˆ/api/generateï¼‰</li>
<li>åç«¯ â†’ Cozeï¼ˆæºå¸¦å®‰å…¨å­˜å‚¨çš„ Tokenï¼‰</li>
</ul>
</li>
<li>
<p><strong>é™åˆ¶å·¥ä½œæµæƒé™</strong>ï¼šCoze çš„ PAT Token åº”ä»…æˆäºˆå¿…è¦æƒé™ã€‚</p>
</li>
<li>
<p><strong>æ·»åŠ é€Ÿç‡é™åˆ¶</strong>ï¼šé˜²æ­¢æ»¥ç”¨ã€‚</p>
</li>
</ul>
<blockquote>
<p>æœ€ç»ˆï¼ŒæŠ€æœ¯çš„æ„ä¹‰åœ¨äºåˆ›é€ å¿«ä¹ã€‚<br/>
å½“ä½ ä¸Šä¼ ä¸€å¼ ç‹—å­çš„ç…§ç‰‡ï¼Œçœ‹åˆ°å®ƒç©¿ä¸Šçº¢è‰²10å·çƒè¡£ã€å³æ‰‹æŒæ†ã€ä»¥â€œä¹é«˜â€é£æ ¼ç«™åœ¨å†°åœºä¸Šâ€”â€”<br/>
ä½ ä¼šç¬‘ï¼Œä¼šåˆ†äº«ï¼Œä¼šè¯´ï¼šâ€œAI çœŸé…·ï¼â€</p>
</blockquote>
<p>è€Œè¿™ï¼Œæ­£æ˜¯æˆ‘ä»¬å†™ä»£ç çš„åˆå¿ƒã€‚</p>
<p>å®Œæ•´é¡¹ç›®æºç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2FgiaoZou%2Flesson_zp%2Ftree%2Fmaster%2Fai%2Fapp%2Ficeball" title="https://gitee.com/giaoZou/lesson_zp/tree/master/ai/app/iceball" target="_blank" ref="nofollow noopener noreferrer">lesson_zp/ai/app/iceball: AI + å…¨æ ˆå­¦ä¹ ä»“åº“ - Gitee.com</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Linux pinctrl å­ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7587299670641737734</link>    <guid>https://juejin.cn/post/7587299670641737734</guid>    <pubDate>2025-12-24T16:53:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587299670641737734" data-draft-id="7587299443643924543" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Linux pinctrl å­ç³»ç»Ÿ"/> <meta itemprop="keywords" content="Linux"/> <meta itemprop="datePublished" content="2025-12-24T16:53:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lolo_fi"/> <meta itemprop="url" content="https://juejin.cn/user/414934077803401"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Linux pinctrl å­ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/414934077803401/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lolo_fi
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T16:53:24.000Z" title="Wed Dec 24 2025 16:53:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Linux pinctrl å­ç³»ç»Ÿ</h2>
<h3 data-id="heading-1">ä¸€ã€Pinctrlçš„ä½¿ç”¨</h3>
<p>å¤§å¤šæ•° SOC çš„ pin éƒ½æ˜¯æ”¯æŒå¤ç”¨çš„ï¼Œä¾‹å¦‚æŸä¸ªSOCçš„GPIO3_D4 æ—¢å¯ä»¥ä½œä¸ºæ™®é€šçš„ GPIO ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä½œä¸º PWM1_M0 å¼•è„šã€GPU_AVS å¼•è„šã€UART0_RX å¼•è„šã€‚æ­¤å¤–æˆ‘ä»¬è¿˜éœ€è¦é…ç½® pin çš„ç”µæ°”ç‰¹æ€§ï¼Œæ¯”å¦‚ä¸Š/ä¸‹æ‹‰ã€é©±åŠ¨èƒ½åŠ›ç­‰ç­‰ã€‚ä¼ ç»Ÿçš„é…ç½® pin çš„æ–¹å¼å°±æ˜¯ç›´æ¥æ“ä½œç›¸åº”çš„å¯„å­˜å™¨ï¼Œä½†æ˜¯è¿™ç§é…ç½®æ–¹å¼æ¯”è¾ƒç¹çã€è€Œä¸”å®¹æ˜“å‡ºé—®é¢˜(æ¯”å¦‚ pin åŠŸèƒ½å†²çª)ã€‚pinctrl å­ç³»ç»Ÿå°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œå¼•å…¥çš„ï¼Œpinctrl å­ç³»ç»Ÿä¸»è¦å·¥ä½œå†…å®¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>è·å–è®¾å¤‡æ ‘ä¸­ pin ä¿¡æ¯ã€‚</li>
<li>æ ¹æ®è·å–åˆ°çš„ pin ä¿¡æ¯æ¥è®¾ç½® pin çš„å¤ç”¨åŠŸèƒ½</li>
<li>æ ¹æ®è·å–åˆ°çš„ pin ä¿¡æ¯æ¥è®¾ç½® pin çš„ç”µæ°”ç‰¹æ€§ï¼Œå¦‚é©±åŠ¨èƒ½åŠ›ã€‚</li>
</ul>
<p>å¯¹äºæˆ‘ä»¬ä½¿ç”¨è€…æ¥è®²ï¼Œåªéœ€è¦åœ¨è®¾å¤‡æ ‘é‡Œé¢è®¾ç½®å¥½æŸä¸ª pin çš„ç›¸å…³å±æ€§å³å¯ï¼Œå…¶ä»–çš„åˆå§‹åŒ–å·¥ä½œå‡ç”± pinctrl å­ç³»ç»Ÿæ¥å®Œæˆï¼Œpinctrl å­ç³»ç»Ÿæºç ç›®å½•ä¸º drivers/pinctrlã€‚</p>
<h4 data-id="heading-2">1.PIN é…ç½®ä¿¡æ¯è¯¦è§£</h4>
<p>è¦ä½¿ç”¨ pinctrl å­ç³»ç»Ÿï¼Œæˆ‘ä»¬éœ€è¦åœ¨è®¾å¤‡æ ‘é‡Œé¢è®¾ç½® PIN çš„é…ç½®ä¿¡æ¯ï¼Œæ¯•ç«Ÿ pinctrl å­ç³»ç»Ÿè¦æ ¹æ®ä½ æä¾›çš„ä¿¡æ¯æ¥é…ç½® PIN åŠŸèƒ½ï¼Œä¸€èˆ¬ä¼šåœ¨è®¾å¤‡æ ‘é‡Œé¢åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹æ¥æè¿° PIN çš„é…ç½®ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-C" lang="C"><span class="hljs-comment">//imx6ull.dtsi</span>
iomuxc: iomuxc@<span class="hljs-number">020e0000</span> {
				compatible = <span class="hljs-string">"fsl,imx6ul-iomuxc"</span>;
				reg = &lt;<span class="hljs-number">0x020e0000</span> <span class="hljs-number">0x4000</span>&gt;;
			};
<span class="hljs-comment">//imx6ull-14x14-evk.dts</span>
&amp;iomuxc {
	pinctrl-names = <span class="hljs-string">"default"</span>;
	pinctrl<span class="hljs-number">-0</span> = &lt;&amp;pinctrl_hog_1&gt;; <span class="hljs-comment">//hog pinæ˜¯ç³»ç»Ÿé»˜è®¤çš„çŠ¶æ€ï¼Œåœ¨ pinctrl åˆå§‹åŒ–é˜¶æ®µç«‹å³ç”Ÿæ•ˆ</span>
	pinctrl_hog_1: hoggrp<span class="hljs-number">-1</span> {
		fsl,pins = &lt;
			MX6UL_PAD_UART1_RTS_B__GPIO1_IO19	<span class="hljs-number">0x17059</span> <span class="hljs-comment">/* SD1 CD */</span>
			MX6UL_PAD_GPIO1_IO05__USDHC1_VSELECT	<span class="hljs-number">0x17059</span> <span class="hljs-comment">/* SD1 VSELECT */</span>
			MX6UL_PAD_GPIO1_IO09__GPIO1_IO09        <span class="hljs-number">0x17059</span> <span class="hljs-comment">/* SD1 RESET */</span>
		&gt;;
	};

	pinctrl_csi1: csi1grp {
		fsl,pins = &lt;
			MX6UL_PAD_CSI_MCLK__CSI_MCLK		<span class="hljs-number">0x1b088</span>
			MX6UL_PAD_CSI_PIXCLK__CSI_PIXCLK	<span class="hljs-number">0x1b088</span>
			...
		&gt;;
	};
    ...
}
</code></pre>
<ul>
<li><code>iomuxc</code> æ˜¯ IOMUX æ§åˆ¶å™¨ï¼Œè´Ÿè´£ pin çš„å¤ç”¨å’Œ pad æ§åˆ¶</li>
<li><code>compatible</code> å†³å®šä½¿ç”¨å“ªä¸ª pinctrl é©±åŠ¨ï¼ˆ<code>drivers/pinctrl/freescale/</code>ï¼‰</li>
<li><code>reg</code> æŒ‡å‘ IOMUXC å¯„å­˜å™¨åŸºåœ°å€</li>
</ul>
<p>æ‰€æœ‰ pin çš„å¤ç”¨å’Œç”µæ°”é…ç½®ï¼Œæœ€ç»ˆéƒ½ä¼šé€šè¿‡è¯¥æ§åˆ¶å™¨å®Œæˆã€‚</p>
<p>è¿™é‡Œè¦è¯´æ˜ä¸€ä¸‹ï¼ŒPADã€Pinã€GPIOæ˜¯ä¸‰ä¸ªä¸œè¥¿ï¼š</p>
<ul>
<li>
<p>PAD  				SoC å†…éƒ¨  			è´Ÿè´£å¤ç”¨ã€ç”µæ°”ç‰¹æ€§ã€ä¿¡å·ç¼“å†²</p>
</li>
<li>
<p>Pin / Ball  		èŠ¯ç‰‡å°è£…  				ç„Šçƒ / å¼•è„šç¼–å·</p>
</li>
<li>
<p>GPIO  				é€»è¾‘åŠŸèƒ½  			æ•°å­—è¾“å…¥è¾“å‡ºæ§åˆ¶å™¨</p>
</li>
</ul>
<p><strong>PAD æ˜¯ pinctrl / IOMUX ç›´æ¥æ“ä½œçš„å¯¹è±¡ï¼Œå¤šä¸ªå†…éƒ¨ä¿¡å·å…±äº«åŒä¸€ä¸ª PADï¼Œé€šè¿‡å¤ç”¨é€‰æ‹©å…¶ä¸€ã€‚</strong></p>
<p>é€šå¸¸åœ¨ <code>&amp;iomuxc</code> èŠ‚ç‚¹ä¸‹å®šä¹‰å¤šä¸ª pinctrl å­èŠ‚ç‚¹ï¼Œæ¯ä¸ªå­èŠ‚ç‚¹æè¿°ä¸€ç»„åŠŸèƒ½ç›¸å…³çš„ pinï¼Œä¾‹å¦‚ä¸Šé¢çš„<code>pinctrl_hog_1</code>ã€<code>pinctrl_csi1</code>ã€‚</p>
<pre><code class="hljs language-c" lang="c">pinctrl_xxx: xxxgrp {
	fsl,pins = &lt;
		PAD_MUX_CONFIG  PAD_CTRL_CONFIG
		...
	&gt;;
};

</code></pre>
<p><code>pinctrl_xxx</code>ï¼šlabelï¼Œç”¨äºè¢«å…¶ä»–è®¾å¤‡èŠ‚ç‚¹å¼•ç”¨</p>
<p><code>xxxgrp</code>ï¼šèŠ‚ç‚¹åï¼Œæ— å®é™…åŠŸèƒ½æ„ä¹‰ï¼Œä»…ç”¨äºåŒºåˆ†</p>
<p><code>fsl,pins</code>ï¼šå¹³å°ç§æœ‰å±æ€§ï¼Œæè¿°å…·ä½“ pin é…ç½®</p>
<p><strong>fsl,pins å±æ€§æ ¼å¼è¯´æ˜</strong></p>
<p>è¯¥å±æ€§ç”± è‹¥å¹²ç»„ <code>&lt;PAD MUX + PAD CTRL&gt;</code> ç»„æˆï¼Œæ¯ä¸€ç»„ä»£è¡¨ä¸€ä¸ª pin çš„é…ç½®ã€‚ä¸¾ä¾‹ï¼š</p>
<pre><code class="hljs language-C" lang="C">fsl,pins = &lt;
	MX6UL_PAD_UART1_RTS_B__GPIO1_IO19   <span class="hljs-number">0x17059</span>
&gt;;

</code></pre>
<p><strong>PAD MUX</strong>ï¼šå®<code>MX6UL_PAD_UART1_RTS_B__GPIO1_IO19</code>åŒ…å«ä¸‰éƒ¨åˆ†ä¿¡æ¯ï¼Œ<code>MX6UL_PAD_UART1_RTS_B</code>è¡¨ç¤ºç‰©ç† PAD åç§°ï¼Œ<code>__</code>è¡¨ç¤ºåˆ†éš”ç¬¦ï¼Œ<code>GPIO1_IO19</code>è¡¨ç¤ºå¤ç”¨åçš„åŠŸèƒ½ï¼Œè¡¨ç¤ºå°† <code>UART1_RTS_B</code> è¿™ä¸ª PAD å¤ç”¨ä¸º <code>GPIO1_IO19</code> åŠŸèƒ½ã€‚è¿™äº›å®å®šä¹‰ä½äº<code>arch/arm/boot/dts/imx6ull-pinfunc.h</code>ã€‚</p>
<p><strong>PAD CTRL</strong>ï¼š<code>0x17059</code>ç”¨äºé…ç½® pin çš„ç”µæ°”ç‰¹æ€§ï¼Œå¯¹åº” <code>IOMUXC_PAD</code> æ§åˆ¶å¯„å­˜å™¨ã€‚å¸¸è§æ§åˆ¶é¡¹åŒ…æ‹¬ï¼šä¸Šæ‹‰ / ä¸‹æ‹‰ã€é©±åŠ¨èƒ½åŠ›ã€é€Ÿç‡ã€æ–½å¯†ç‰¹è§¦å‘ã€æ¨æŒ½å¼€æ¼ã€‚</p>
<h4 data-id="heading-3">2.è®¾å¤‡èŠ‚ç‚¹ä¸­å¼•ç”¨ pinctrl</h4>
<p>pinctrl é…ç½®å¹¶ä¸ä¼šè‡ªåŠ¨ç”Ÿæ•ˆï¼Œå¿…é¡»è¢«è®¾å¤‡èŠ‚ç‚¹å¼•ç”¨ã€‚</p>
<p><strong>åŸºæœ¬å¼•ç”¨æ–¹å¼</strong></p>
<pre><code class="hljs language-c" lang="c">uart1: serial@<span class="hljs-number">02020000</span> {
	compatible = <span class="hljs-string">"fsl,imx6ul-uart"</span>;
	reg = &lt;<span class="hljs-number">0x02020000</span> <span class="hljs-number">0x4000</span>&gt;;
	interrupts = &lt;GIC_SPI <span class="hljs-number">26</span> IRQ_TYPE_LEVEL_HIGH&gt;;

	pinctrl-names = <span class="hljs-string">"default"</span>;
	pinctrl<span class="hljs-number">-0</span> = &lt;&amp;pinctrl_uart1&gt;; <span class="hljs-comment">//å¼•ç”¨pinctrl_uart1</span>

	status = <span class="hljs-string">"okay"</span>;
};
<span class="hljs-comment">//å¯¹åº”çš„pinctrlå®šä¹‰</span>
pinctrl_uart1: uart1grp {
	fsl,pins = &lt;
		MX6UL_PAD_UART1_TX_DATA__UART1_DCE_TX  <span class="hljs-number">0x1b0b1</span>
		MX6UL_PAD_UART1_RX_DATA__UART1_DCE_RX  <span class="hljs-number">0x1b0b1</span>
	&gt;;
};
</code></pre>
<p><strong>å¤šçŠ¶æ€ pinctrl</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">pinctrl-names</span> = <span class="hljs-string">"default"</span>, <span class="hljs-string">"sleep"</span><span class="hljs-comment">;</span>
<span class="hljs-attr">pinctrl-0</span> = &lt;&amp;pinctrl_uart1_default&gt;<span class="hljs-comment">;</span>
<span class="hljs-attr">pinctrl-1</span> = &lt;&amp;pinctrl_uart1_sleep&gt;<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™é‡Œæœ‰ä¸¤ä¸ªçŠ¶æ€ï¼š</p>
<p><code>default</code>ï¼šå·¥ä½œçŠ¶æ€</p>
<p><code>sleep</code>ï¼šä½åŠŸè€—çŠ¶æ€ï¼ˆå…³é—­ä¸Šä¸‹æ‹‰ã€é™ä½é©±åŠ¨ï¼‰</p>
<p>æ˜¯å¦åˆ‡æ¢ç”±é©±åŠ¨è°ƒç”¨ï¼š<code>pinctrl_select_state();</code></p>
<h3 data-id="heading-4">äºŒã€å†…éƒ¨åŸç†</h3>
<p><strong>æ ¸å¿ƒæ€è·¯</strong> ï¼ˆæ–¹ä¾¿å›å¿†ï¼‰
pinctrl æ˜¯ Linux å†…æ ¸ä¸­è´Ÿè´£ç®¡ç†å¼•è„šå¤ç”¨ä¸å¼•è„šé…ç½®çš„å­ç³»ç»Ÿã€‚<br/>
å®ƒé€šè¿‡Pin Controller é©±åŠ¨å’Œ è®¾å¤‡é©±åŠ¨ä¸¤å±‚æ¨¡å‹ï¼Œå®ç°äº†ä»è®¾å¤‡æ ‘å¼•è„šå®šä¹‰åˆ°ç¡¬ä»¶å¯„å­˜å™¨é…ç½®çš„å®Œæ•´æ˜ å°„ã€‚</p>
<p>ç®€å•æµç¨‹ç‰ˆï¼š</p>
<ul>
<li>pinctrl å­ç³»ç»Ÿçš„å·¥ä½œæµç¨‹ä» Pin Controller é©±åŠ¨å¼€å§‹ã€‚é¦–å…ˆï¼Œå†…æ ¸é€šè¿‡è®¾å¤‡æ ‘ä¸­çš„ <strong>compatible</strong> å±æ€§åŒ¹é…åˆ°å¯¹åº”çš„ pinctrl é©±åŠ¨ï¼Œå½“åŒ¹é…æˆåŠŸåï¼Œä¼šè°ƒç”¨è¯¥é©±åŠ¨çš„ <strong>probe</strong> å‡½æ•°ã€‚åœ¨ probe é˜¶æ®µï¼Œé©±åŠ¨ä¼šæ ¹æ® SoC çš„ç‰¹æ€§å¡«å……ä¸€ä¸ª <strong>pinctrl_desc</strong> ç»“æ„ä½“ï¼Œå…¶ä¸­åŒ…å«å¼•è„šæè¿°ä¿¡æ¯ï¼ˆpins/npinsï¼‰ã€æ“ä½œå‡½æ•°ï¼ˆpctlopsã€pmxopsã€confopsï¼‰ç­‰å†…å®¹ï¼Œå¹¶é€šè¿‡ <strong>devm_pinctrl_register()</strong> å°†è¯¥ pin controller æ³¨å†Œåˆ°å†…æ ¸ä¸­ï¼Œå®Œæˆå¼•è„šæ§åˆ¶å™¨çš„åˆå§‹åŒ–ä¸åŠŸèƒ½æ³¨å†Œã€‚</li>
<li>å½“å…·ä½“ä½¿ç”¨pinctrlçš„è®¾å¤‡é©±åŠ¨åœ¨ probe é˜¶æ®µåŠ è½½æ—¶ï¼Œå†…æ ¸ä¼šæ ¹æ®è®¾å¤‡æ ‘ä¸­å®šä¹‰çš„å¼•è„šé…ç½®è°ƒç”¨ <strong>pinctrl_bind_pins()</strong> å‡½æ•°ï¼Œä¸ºè¯¥è®¾å¤‡å»ºç«‹å¼•è„šæ§åˆ¶ä¸Šä¸‹æ–‡ã€‚è¯¥å‡½æ•°é¦–å…ˆä¸ºè®¾å¤‡åˆ›å»ºä¸€ä¸ª <strong>dev_pin_info</strong> ç»“æ„ä½“ï¼Œç”¨äºä¿å­˜è®¾å¤‡çš„å¼•è„šæ§åˆ¶ä¿¡æ¯ã€‚å…¶ä¸­ï¼Œå‡½æ•°ä¼šè°ƒç”¨ <strong>devm_pinctrl_get()</strong> åˆ›å»ºä¸€ä¸ªæ–°çš„ <strong>pinctrl</strong> ç»“æ„ä½“ï¼Œå¹¶å°†å…¶èµ‹å€¼ç»™ <code>dev_pin_info</code> çš„ <code>p</code> æˆå‘˜ã€‚</li>
<li>éšåï¼Œå†…æ ¸é€šè¿‡ <strong>pinctrl_dt_to_map()</strong> ä»è®¾å¤‡æ ‘ä¸­è¯»å–è¯¥è®¾å¤‡çš„å¼•è„šé…ç½®ï¼Œå¹¶è°ƒç”¨ pinctrl é©±åŠ¨æä¾›çš„ <strong>imx_dt_node_to_map()</strong> ç­‰å‡½æ•°æ¥è§£æ <code>pinctrl-0</code>ã€<code>pinctrl-1</code> ç­‰èŠ‚ç‚¹ã€‚è§£æè¿‡ç¨‹ä¼šç”Ÿæˆä¸€ç³»åˆ— <strong>pinctrl_map</strong> ç»“æ„ä½“ï¼Œæ¯ä¸ª map å¯¹åº”ä¸€ç»„å¼•è„šåŠŸèƒ½æˆ–é…ç½®ã€‚è¿™äº› map ä¼šè¢«è¿›ä¸€æ­¥è½¬æ¢ä¸º <strong>pinctrl_setting</strong>ï¼Œå¹¶æŒ‚å…¥å¯¹åº”çŠ¶æ€çš„ <strong>pinctrl_state.settings</strong> é“¾è¡¨ä¸­ï¼ŒåŒæ—¶æ‰€æœ‰ map ä¿¡æ¯ä¹Ÿä¼šä¿å­˜åœ¨ <code>pinctrl</code> çš„ <code>dt_maps</code> é“¾è¡¨ä¸­ã€‚</li>
<li>åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå†…æ ¸æ ¹æ®ä¸åŒçš„ pinctrl èŠ‚ç‚¹ï¼ˆå¦‚ defaultã€sleep ç­‰ï¼‰åˆ›å»ºå¤šä¸ª <strong>pinctrl_state</strong>ï¼Œæ¯ä¸ªçŠ¶æ€å¯¹åº”è®¾å¤‡æ ‘ä¸­å®šä¹‰çš„ä¸€ä¸ªå¼•è„šçŠ¶æ€ã€‚è¿™äº›çŠ¶æ€è¢«æ·»åŠ åˆ° <code>pinctrl</code> çš„ <code>states</code> é“¾è¡¨ä¸­ï¼Œè€Œ <code>dev_pin_info</code> ç»“æ„ä¸­çš„ <code>default_state</code>ã€<code>sleep_state</code> ç­‰æŒ‡é’ˆåˆ™ä¼šè¢«è®¾ç½®ä¸ºæŒ‡å‘è¿™äº›çŠ¶æ€ç»“æ„ã€‚</li>
<li>å½“è®¾å¤‡è¿è¡Œè¿‡ç¨‹ä¸­éœ€è¦åˆ‡æ¢å¼•è„šé…ç½®ï¼ˆä¾‹å¦‚è¿›å…¥ç¡çœ æˆ–æ¢å¤é»˜è®¤çŠ¶æ€ï¼‰æ—¶ï¼Œé©±åŠ¨å¯è°ƒç”¨ <strong>pinctrl_select_state()</strong> å‡½æ•°æ¥åˆ‡æ¢åˆ°å¯¹åº”çš„çŠ¶æ€ã€‚è¯¥å‡½æ•°ä¼šéå†å½“å‰çŠ¶æ€ä¸‹çš„æ‰€æœ‰ <strong>pinctrl_setting</strong>ï¼Œå¹¶æ ¹æ®æ¯ä¸ª setting çš„ç±»å‹ï¼ˆå¤ç”¨æˆ–é…ç½®ï¼‰è°ƒç”¨ pin controller é©±åŠ¨æä¾›çš„æ“ä½œæ¥å£ï¼ˆopsï¼‰ï¼Œæœ€ç»ˆé€šè¿‡åº•å±‚å¯„å­˜å™¨é…ç½®å®Œæˆç¡¬ä»¶å¼•è„šåŠŸèƒ½ä¸ç”µæ°”å±æ€§çš„åˆ‡æ¢ã€‚</li>
</ul>
<p>è¿™ä¸€æ•´å¥—æœºåˆ¶å®ç°äº†ä»è®¾å¤‡æ ‘å®šä¹‰åˆ°ç¡¬ä»¶å¼•è„šé…ç½®çš„å®Œæ•´è‡ªåŠ¨åŒ–æ˜ å°„æµç¨‹ã€‚</p>
<hr/>
<h4 data-id="heading-5">1.Provider ç«¯</h4>
<p><strong>Pin Controller é©±åŠ¨æ³¨å†Œæµç¨‹</strong></p>
<h5 data-id="heading-6">(1)è®¾å¤‡æ ‘åŒ¹é…</h5>
<p>åœ¨è®¾å¤‡æ ‘ä¸­å®šä¹‰ä¸€ä¸ª pin controller èŠ‚ç‚¹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">iomuxc: iomuxc@020e0000 {
    <span class="hljs-attr">compatible</span> = <span class="hljs-string">"fsl,imx6ul-iomuxc"</span><span class="hljs-comment">;</span>
    <span class="hljs-attr">reg</span> = &lt;<span class="hljs-number">0</span>x020e0000 <span class="hljs-number">0</span>x4000&gt;<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre>
<p>å¯¹åº”é©±åŠ¨ä¸­çš„åŒ¹é…è¡¨ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-type">static</span> <span class="hljs-type">const</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">of_device_id</span> imx6ul_pinctrl_of_match[] = {
    { .compatible = <span class="hljs-string">"fsl,imx6ul-iomuxc"</span>, .data = &amp;imx6ul_pinctrl_info },
    { <span class="hljs-comment">/* sentinel */</span> }
};
</code></pre>
<p>å½“ compatible åŒ¹é…æˆåŠŸåï¼Œè°ƒç”¨ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">int</span> <span class="hljs-title">imx6ul_pinctrl_probe</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> platform_device *pdev)</span>
</span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">imx_pinctrl_probe</span>(pdev, pinctrl_info);
}
</code></pre>
<hr/>
<h5 data-id="heading-7">(2)probe é˜¶æ®µ</h5>
<p><strong>æ„é€ å¹¶æ³¨å†Œ pinctrl_desc</strong></p>
<p>æ ¸å¿ƒå‡½æ•° <code>imx_pinctrl_probe()</code>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">int imx_pinctrl_probe(struct platform_device *pdev,
                      struct imx_pinctrl_soc_info *info)
{
    struct pinctrl_desc *desc<span class="hljs-comment">;</span>

    desc-&gt;<span class="hljs-attr">name</span> = dev_name(&amp;pdev-&gt;dev)<span class="hljs-comment">;</span>
    desc-&gt;<span class="hljs-attr">pins</span> = info-&gt;pins<span class="hljs-comment">;           // å¼•è„šæ•°ç»„</span>
    desc-&gt;<span class="hljs-attr">npins</span> = info-&gt;npins<span class="hljs-comment">;         // å¼•è„šæ•°é‡</span>
    desc-&gt;<span class="hljs-attr">pctlops</span> = &amp;imx_pctrl_ops<span class="hljs-comment">;    // åˆ†ç»„æ“ä½œ</span>
    desc-&gt;<span class="hljs-attr">pmxops</span> = &amp;imx_pmx_ops<span class="hljs-comment">;       // å¤ç”¨æ“ä½œ</span>
    desc-&gt;<span class="hljs-attr">confops</span> = &amp;imx_pinconf_ops<span class="hljs-comment">;  // å¼•è„šé…ç½®æ“ä½œ</span>
    desc-&gt;<span class="hljs-attr">owner</span> = THIS_MODULE<span class="hljs-comment">;</span>

    // æ³¨å†Œ pin controller
    ipctl-&gt;<span class="hljs-attr">pctl</span> = devm_pinctrl_register(&amp;pdev-&gt;dev, desc, ipctl)<span class="hljs-comment">;</span>
}
</code></pre>
<p><code>devm_pinctrl_register()</code> ä¼šåœ¨å†…æ ¸ä¸­æ³¨å†Œä¸€ä¸ª <code>pinctrl_dev</code> å®ä¾‹ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">pinctrl_dev</span> {
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">pinctrl_desc</span> *desc;
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">device</span> *dev;
    <span class="hljs-type">void</span> *driver_data;
};
</code></pre>
<hr/>
<h5 data-id="heading-8">(3)ä¸‰å¤§æ“ä½œå‡½æ•°</h5>
<p>pinctrl æ¡†æ¶é€šè¿‡ä»¥ä¸‹ä¸‰ç±» ops å®ŒæˆæŠ½è±¡ï¼š</p>

























<table><thead><tr><th>æ“ä½œé›†</th><th>åŠŸèƒ½</th><th>ç¤ºä¾‹å‡½æ•°</th></tr></thead><tbody><tr><td><strong>pinctrl_ops</strong></td><td>å¼•è„šç»„ç®¡ç†ä¸è®¾å¤‡æ ‘è§£æ</td><td><code>dt_node_to_map()</code></td></tr><tr><td><strong>pinmux_ops</strong></td><td>æ§åˆ¶å¼•è„šå¤ç”¨</td><td><code>set_mux()</code></td></tr><tr><td><strong>pinconf_ops</strong></td><td>æ§åˆ¶å¼•è„šç”µæ°”å±æ€§</td><td><code>pin_config_set()</code></td></tr></tbody></table>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">static const struct pinctrl_ops <span class="hljs-attr">imx_pctrl_ops</span> = {
    .<span class="hljs-attr">get_groups_count</span> = imx_get_groups_count,
    .<span class="hljs-attr">get_group_name</span> = imx_get_group_name,
    .<span class="hljs-attr">dt_node_to_map</span> = imx_dt_node_to_map, // å…³é”®ï¼šè®¾å¤‡æ ‘è½¬ pinctrl_map
}<span class="hljs-comment">;</span>
</code></pre>
<hr/>
<h3 data-id="heading-9">2.Consumer ç«¯</h3>
<p><strong>è®¾å¤‡é©±åŠ¨çš„å¼•è„šç»‘å®šä¸çŠ¶æ€åˆ›å»º</strong></p>
<h5 data-id="heading-10">(1)è®¾å¤‡æ ‘ä¸­å®šä¹‰å¼•è„šé…ç½®</h5>
<pre><code class="hljs language-ini" lang="ini">&amp;iomuxc {
    imx6ul-evk {
        pinctrl_i2c1: i2c1grp {
            fsl,<span class="hljs-attr">pins</span> = &lt;
                MX6UL_PAD_UART1_TX_DATA__I2C1_SCL 0x4001b8b0
                MX6UL_PAD_UART1_RX_DATA__I2C1_SDA 0x4001b8b0
            &gt;<span class="hljs-comment">;</span>
        }<span class="hljs-comment">;</span>
    }<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>

i2c1: i2c@021a0000 {
    <span class="hljs-attr">compatible</span> = <span class="hljs-string">"fsl,imx6ul-i2c"</span><span class="hljs-comment">;</span>
    <span class="hljs-attr">pinctrl-names</span> = <span class="hljs-string">"default"</span>, <span class="hljs-string">"sleep"</span><span class="hljs-comment">;</span>
    <span class="hljs-attr">pinctrl-0</span> = &lt;&amp;pinctrl_i2c1&gt;<span class="hljs-comment">;</span>
    <span class="hljs-attr">pinctrl-1</span> = &lt;&amp;pinctrl_i2c1_sleep&gt;<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre>
<p><code>pinctrl-names</code> ä¸ <code>pinctrl-0</code>, <code>pinctrl-1</code> ç­‰å±æ€§å®šä¹‰äº†è®¾å¤‡çš„å¤šç§å¼•è„šçŠ¶æ€ã€‚</p>
<hr/>
<h5 data-id="heading-11">(2)pinctrl_bind_pins()</h5>
<p><strong>è®¾å¤‡ probe æ—¶çš„å¼•è„šç»‘å®šå…¥å£ï¼š<code>pinctrl_bind_pins()</code></strong></p>
<p>å½“è®¾å¤‡é©±åŠ¨è¢«åŠ è½½æ—¶ï¼Œ<code>really_probe()</code> è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">pinctrl_bind_pins</span>(dev);
</code></pre>
<p>è¯¥å‡½æ•°è´Ÿè´£ä¸ºè®¾å¤‡åˆ›å»ºå¼•è„šæ§åˆ¶ä¿¡æ¯ï¼Œæ˜¯ Consumer ç«¯çš„æ ¸å¿ƒå…¥å£ã€‚</p>
<hr/>
<h5 data-id="heading-12">(3)<code>pinctrl_bind_pins</code></h5>
<p><strong><code>pinctrl_bind_pins</code> å†…éƒ¨å…³é”®æ­¥éª¤</strong></p>
<p><strong>step1.åˆ›å»º <code>dev_pin_info</code> ç»“æ„</strong></p>
<pre><code class="hljs language-ini" lang="ini">dev-&gt;<span class="hljs-attr">pins</span> = devm_kzalloc(dev, sizeof(*(dev-&gt;pins)), GFP_KERNEL)<span class="hljs-comment">;</span>
</code></pre>
<p><code>struct dev_pin_info</code> ç”¨äºæè¿°è®¾å¤‡ä¸ pinctrl å­ç³»ç»Ÿçš„ç»‘å®šå…³ç³»ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">dev_pin_info</span> {
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">pinctrl</span> *p;                    <span class="hljs-comment">// æŒ‡å‘è¯¥è®¾å¤‡çš„ pinctrl å¥æŸ„</span>
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">pinctrl_state</span> *default_state;  <span class="hljs-comment">// é»˜è®¤çŠ¶æ€</span>
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">pinctrl_state</span> *init_state;     <span class="hljs-comment">// åˆå§‹åŒ–çŠ¶æ€</span>
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">pinctrl_state</span> *sleep_state;    <span class="hljs-comment">// ç¡çœ çŠ¶æ€</span>
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">pinctrl_state</span> *idle_state;     <span class="hljs-comment">// ç©ºé—²çŠ¶æ€</span>
};
</code></pre>
<p><code>dev_pin_info</code> æ˜¯è®¾å¤‡å’Œ pinctrl æ¡†æ¶ä¹‹é—´çš„â€œæ¡¥æ¢â€ï¼š</p>
<ul>
<li><code>p</code>ï¼šæŒ‡å‘è®¾å¤‡å¯¹åº”çš„ <code>struct pinctrl</code></li>
<li>å…¶ä»–æˆå‘˜æŒ‡å‘ä¸åŒå‘½åçŠ¶æ€çš„ <code>pinctrl_state</code></li>
</ul>
<hr/>
<p><strong>step2.åˆ›å»º <code>pinctrl</code> ç»“æ„</strong></p>
<pre><code class="hljs language-ini" lang="ini">dev-&gt;pins-&gt;<span class="hljs-attr">p</span> = devm_pinctrl_get(dev)<span class="hljs-comment">;</span>
</code></pre>
<p><code>devm_pinctrl_get()</code> å†…éƒ¨æ‰§è¡Œï¼š</p>
<ol>
<li>åˆ›å»º <code>struct pinctrl</code>ï¼›</li>
<li>è°ƒç”¨ <code>pinctrl_dt_to_map()</code> è§£æè®¾å¤‡æ ‘ï¼›</li>
<li>å°†è§£æç»“æœä¿å­˜åˆ° <code>pinctrl-&gt;dt_maps</code>ï¼›</li>
<li>ä¸ºæ¯ä¸ªçŠ¶æ€åˆ›å»º <code>pinctrl_state</code> å¹¶åŠ å…¥ <code>pinctrl-&gt;states</code> é“¾è¡¨ã€‚</li>
</ol>
<hr/>
<p><strong>step3.è®¾å¤‡æ ‘è§£æ â†’ <code>pinctrl_map</code> æ„å»º</strong></p>
<p><code>pinctrl_dt_to_map()</code> é€šè¿‡ pinctrl é©±åŠ¨æä¾›çš„ <code>dt_node_to_map()</code> æ¥è§£æï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">imx_dt_node_to_map</span>(np_config, &amp;map, &amp;num_maps);
</code></pre>
<p>æ¯ä¸ªèŠ‚ç‚¹ï¼ˆå¦‚ <code>pinctrl-0</code>ï¼‰ä¼šç”Ÿæˆè‹¥å¹²ä¸ª <code>pinctrl_map</code>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">pinctrl_map</span> {
    <span class="hljs-type">const</span> <span class="hljs-type">char</span> *dev_name;
    <span class="hljs-type">const</span> <span class="hljs-type">char</span> *name;
    <span class="hljs-keyword">enum</span> <span class="hljs-title class_">pinctrl_map_type</span> type;
    <span class="hljs-keyword">union</span> {
        <span class="hljs-keyword">struct</span> { <span class="hljs-type">const</span> <span class="hljs-type">char</span> *group; <span class="hljs-type">const</span> <span class="hljs-type">char</span> *function; } mux;
        <span class="hljs-keyword">struct</span> { <span class="hljs-type">const</span> <span class="hljs-type">char</span> *group_or_pin; <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> *configs; <span class="hljs-type">unsigned</span> num_configs; } configs;
    } data;
};
</code></pre>
<p>è¿™äº› <code>pinctrl_map</code> æè¿°äº†è®¾å¤‡ã€ç»„ã€åŠŸèƒ½ä¸é…ç½®ä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼Œå¹¶è¢«æŒ‚å…¥ï¼š</p>
<pre><code class="hljs language-rust" lang="rust">pinctrl<span class="hljs-punctuation">-&gt;</span>dt_maps
</code></pre>
<hr/>
<p><strong>step4.<code>pinctrl_map</code> â†’ <code>pinctrl_setting</code> â†’ <code>pinctrl_state</code></strong></p>
<p>æ¯ä¸ª <code>pinctrl_map</code> ä¼šè¢«è½¬æ¢ä¸º <code>pinctrl_setting</code>ï¼ŒæŒ‚å…¥å¯¹åº”çš„ <code>pinctrl_state.settings</code> é“¾è¡¨ã€‚</p>
<p>ç»“æ„å…³ç³»å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">dev_pin_info
   â””â”€â”€ pinctrl
        â”œâ”€â”€ states (é“¾è¡¨)
        â”‚     â”œâ”€â”€ <span class="hljs-built_in">pinctrl_state</span>("default")
        â”‚     â”‚       â””â”€â”€ settings â†’ <span class="hljs-built_in">pinctrl_setting</span>(å¤šä¸ª)
        â”‚     â””â”€â”€ <span class="hljs-built_in">pinctrl_state</span>("sleep")
        â””â”€â”€ dt_maps (æ˜ å°„é“¾è¡¨)
</code></pre>
<p>æ­¤æ—¶ï¼Œ<code>dev_pin_info</code> ä¸­çš„ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">default_state â†’ æŒ‡å‘ states ä¸­åä¸º â€œ<span class="hljs-keyword">default</span>â€ çš„çŠ¶æ€
sleep_state   â†’ æŒ‡å‘ states ä¸­åä¸º â€œsleepâ€ çš„çŠ¶æ€
</code></pre>
<hr/>
<h3 data-id="heading-13">3.çŠ¶æ€åˆ‡æ¢</h3>
<p>å½“é©±åŠ¨éœ€è¦åˆ‡æ¢å¼•è„šçŠ¶æ€æ—¶ï¼ˆå¦‚è¿›å…¥ä¼‘çœ ï¼‰ï¼Œä¼šè°ƒç”¨ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">pinctrl_select_state</span>(pinctrl, sleep_state);
</code></pre>
<p>æ‰§è¡Œè¿‡ç¨‹ï¼š</p>
<ol>
<li>éå†è¯¥çŠ¶æ€ä¸‹æ‰€æœ‰çš„ <code>pinctrl_setting</code></li>
<li>åˆ¤æ–­ setting ç±»å‹å¹¶è°ƒç”¨ç›¸åº” opsï¼š</li>
</ol>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">switch</span> (setting-&gt;<span class="hljs-keyword">type</span>) {
<span class="hljs-keyword">case</span> PIN_MAP_TYPE_MUX_GROUP:
    pinmux_enable_setting(setting);
    <span class="hljs-comment">// å®é™…è°ƒç”¨ -&gt; ops-&gt;set_mux()</span>
    <span class="hljs-keyword">break</span>;

<span class="hljs-keyword">case</span> PIN_MAP_TYPE_CONFIGS_GROUP:
<span class="hljs-keyword">case</span> PIN_MAP_TYPE_CONFIGS_PIN:
    pinconf_apply_setting(setting);
    <span class="hljs-comment">// å®é™…è°ƒç”¨ -&gt; ops-&gt;pin_config_group_set()</span>
    <span class="hljs-keyword">break</span>;
}
</code></pre>
<p>æœ€ç»ˆç”± pin controller é©±åŠ¨çš„åº•å±‚å‡½æ•°ï¼ˆ<code>imx_pmx_ops</code>ã€<code>imx_pinconf_ops</code>ï¼‰å°†é…ç½®å†™å…¥å¯„å­˜å™¨ï¼Œå®Œæˆç¡¬ä»¶å±‚è®¾ç½®ã€‚</p>
<hr/>
<h3 data-id="heading-14">4.è°ƒè¯•</h3>
<p>åœ¨ <code>/sys/kernel/debug/pinctrl/&lt;controller&gt;/</code> ä¸‹å¯ä»¥æŸ¥çœ‹ pinctrl çš„å†…éƒ¨çŠ¶æ€ï¼š</p>

































<table><thead><tr><th>æ–‡ä»¶å</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>pins</code></td><td>å·²æ³¨å†Œå¼•è„šä¿¡æ¯</td></tr><tr><td><code>pingroups</code></td><td>å¼•è„šç»„ä¿¡æ¯</td></tr><tr><td><code>pinmux-pins</code></td><td>æ¯ä¸ªå¼•è„šçš„å¤ç”¨çŠ¶æ€</td></tr><tr><td><code>pinmux-functions</code></td><td>åŠŸèƒ½ä¸ç»„çš„å¯¹åº”</td></tr><tr><td><code>pinconf-pins</code></td><td>å¼•è„šé…ç½®å‚æ•°</td></tr><tr><td><code>pinconf-config</code></td><td>å¯åŠ¨æ€ä¿®æ”¹é…ç½®</td></tr></tbody></table>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cat</span> /sys/kernel/debug/pinctrl/20e0000.iomuxc/pingroups
<span class="hljs-built_in">cat</span> /sys/kernel/debug/pinctrl/20e0000.iomuxc/pinmux-functions
</code></pre>
<hr/>
<h3 data-id="heading-15">5.æ‰§è¡Œé“¾æ€»ç»“</h3>





















































<table><thead><tr><th>é˜¶æ®µ</th><th>ä¸»ä½“</th><th>æ“ä½œ</th><th>æ ¸å¿ƒç»“æ„ / å‡½æ•°</th></tr></thead><tbody><tr><td><strong>1. åŒ¹é…é©±åŠ¨</strong></td><td>å†…æ ¸ â†’ pinctrl é©±åŠ¨</td><td>åŒ¹é… compatible</td><td><code>of_match_table</code></td></tr><tr><td><strong>2. æ§åˆ¶å™¨æ³¨å†Œ</strong></td><td>pinctrl é©±åŠ¨</td><td>æ³¨å†Œ pin controller</td><td><code>devm_pinctrl_register</code></td></tr><tr><td><strong>3. è®¾å¤‡æ ‘è§£æ</strong></td><td>å†…æ ¸æ¡†æ¶</td><td>è§£æ pinctrl-0 èŠ‚ç‚¹</td><td><code>pinctrl_dt_to_map</code> / <code>dt_node_to_map</code></td></tr><tr><td><strong>4. çŠ¶æ€å»ºç«‹</strong></td><td>å†…æ ¸æ¡†æ¶</td><td>åˆ›å»º map â†’ setting â†’ state</td><td><code>pinctrl_add_setting</code></td></tr><tr><td><strong>5. è®¾å¤‡ç»‘å®š</strong></td><td>å†…æ ¸æ¡†æ¶</td><td>åˆ›å»º <code>dev_pin_info</code> ä¸ <code>pinctrl</code></td><td><code>pinctrl_bind_pins</code></td></tr><tr><td><strong>6. çŠ¶æ€åˆ‡æ¢</strong></td><td>è®¾å¤‡é©±åŠ¨</td><td>åº”ç”¨çŠ¶æ€</td><td><code>pinctrl_select_state</code></td></tr><tr><td><strong>7. ç¡¬ä»¶é…ç½®</strong></td><td>pinctrl é©±åŠ¨</td><td>è°ƒç”¨ ops å†™å¯„å­˜å™¨</td><td><code>set_mux</code> / <code>pin_config_set</code></td></tr></tbody></table>
<hr/>
<h3 data-id="heading-16">6.æ€»ç»“</h3>
<p>pinctrl é©±åŠ¨ï¼šæè¿°å¹¶æ³¨å†Œç¡¬ä»¶å¼•è„šèƒ½åŠ›ï¼›</p>
<p>pinctrl æ ¸å¿ƒï¼šæä¾›ç»Ÿä¸€çš„æ•°æ®ç»“æ„ä¸è°ƒç”¨æœºåˆ¶ï¼›</p>
<p>è®¾å¤‡é©±åŠ¨ï¼šå£°æ˜çŠ¶æ€ï¼ŒåŠ¨æ€åˆ‡æ¢å¼•è„šé…ç½®ï¼›</p>
<p>dev_pin_infoï¼šè¿æ¥è®¾å¤‡ä¸ pinctrl æ¡†æ¶çš„ä¸­æ¢ï¼Œç®¡ç†çŠ¶æ€åˆ‡æ¢ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Androidæš—é»‘æ¨¡å¼é€‚é…å…¨æ”»ç•¥ï¼šä»å…¥é—¨åˆ°ç²¾é€šï¼Œå‘Šåˆ«"é˜´é—´é…è‰²"]]></title>    <link>https://juejin.cn/post/7587264707285106698</link>    <guid>https://juejin.cn/post/7587264707285106698</guid>    <pubDate>2025-12-25T01:49:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587264707285106698" data-draft-id="7587264707285041162" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Androidæš—é»‘æ¨¡å¼é€‚é…å…¨æ”»ç•¥ï¼šä»å…¥é—¨åˆ°ç²¾é€šï¼Œå‘Šåˆ«&quot;é˜´é—´é…è‰²&quot;"/> <meta itemprop="keywords" content="é¢è¯•,Android,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2025-12-25T01:49:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¡¾æ—æµ·"/> <meta itemprop="url" content="https://juejin.cn/user/2365804752153911"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Androidæš—é»‘æ¨¡å¼é€‚é…å…¨æ”»ç•¥ï¼šä»å…¥é—¨åˆ°ç²¾é€šï¼Œå‘Šåˆ«"é˜´é—´é…è‰²"
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2365804752153911/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¡¾æ—æµ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T01:49:19.000Z" title="Thu Dec 25 2025 01:49:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å¦‚ä»Šæ‰“å¼€æ‰‹æœºï¼Œä¸å°‘äººéƒ½ä¼šä¸‹æ„è¯†åˆ‡æ¢åˆ°æš—é»‘æ¨¡å¼â€”â€”æ¯•ç«Ÿåœ¨æ·±å¤œåˆ·æ‰‹æœºæ—¶ï¼Œæƒ¨ç™½çš„å±å¹•å ªæ¯”"ç”µå­å¼ºå…‰æ‰‹ç”µ"ï¼Œæ™ƒå¾—äººçœ¼ç›å‘é…¸ã€‚ä½œä¸ºAndroidå¼€å‘è€…ï¼Œç»™åº”ç”¨åšå¥½æš—é»‘æ¨¡å¼é€‚é…æ—©å·²ä¸æ˜¯"åŠ åˆ†é¡¹"ï¼Œè€Œæ˜¯å…³ä¹ç”¨æˆ·ä½“éªŒçš„"å¿…åšé¢˜"ã€‚</p>
<p>ä½†é€‚é…æš—é»‘æ¨¡å¼å¯ä¸æ˜¯ç®€å•åœ°æŠŠèƒŒæ™¯æ”¹æˆé»‘è‰²ã€æ–‡å­—æ”¹æˆç™½è‰²å°±å®Œäº‹äº†ã€‚ä¸å°‘æ–°æ‰‹è¸©å‘ååšå‡ºçš„æš—é»‘æ¨¡å¼ï¼Œè¦ä¹ˆæ–‡å­—å’ŒèƒŒæ™¯å¯¹æ¯”åº¦ä¸å¤Ÿçœ‹å¾—è´¹åŠ²ï¼Œè¦ä¹ˆæ§ä»¶é¢œè‰²æ··ä¹±åƒ"è°ƒè‰²ç›˜æ‰“ç¿»"ï¼Œè¦ä¹ˆåˆ‡æ¢æ—¶é—ªå±å¡é¡¿è®©ç”¨æˆ·æŠ“ç‹‚ã€‚ä»Šå¤©è¿™ç¯‡å…¨æ”»ç•¥ï¼Œå°±ä»åŸºç¡€åŸç†åˆ°è¿›é˜¶æŠ€å·§ï¼ŒæŠŠAndroidæš—é»‘æ¨¡å¼é€‚é…è®²å¾—æ˜æ˜ç™½ç™½ï¼Œè¿˜é™„ä¸Šå¯ç›´æ¥å¤ç”¨çš„ä»£ç ï¼Œè®©ä½ å°‘èµ°99%çš„å¼¯è·¯ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€å…ˆææ‡‚ï¼šæš—é»‘æ¨¡å¼é€‚é…çš„æ ¸å¿ƒé€»è¾‘</h2>
<p>åœ¨åŠ¨æ‰‹å†™ä»£ç å‰ï¼Œæˆ‘ä»¬å¾—å…ˆæ˜ç™½Androidç³»ç»Ÿæ˜¯æ€ä¹ˆç®¡ç†æš—é»‘æ¨¡å¼çš„ã€‚ç®€å•æ¥è¯´ï¼Œæ ¸å¿ƒé€»è¾‘å°±æ˜¯ <strong>"èµ„æºåŒ¹é…"</strong> â€”â€”ç³»ç»Ÿä¼šæ ¹æ®å½“å‰çš„ä¸»é¢˜æ¨¡å¼ï¼ˆæµ…è‰²/æš—é»‘ï¼‰ï¼Œè‡ªåŠ¨åŠ è½½å¯¹åº”çš„èµ„æºæ–‡ä»¶ã€‚</p>
<p>Android 10ï¼ˆAPI 29ï¼‰æ˜¯ä¸ªå…³é”®èŠ‚ç‚¹ï¼Œä»è¿™ä¸ªç‰ˆæœ¬å¼€å§‹ï¼Œç³»ç»Ÿæ­£å¼æ”¯æŒå…¨å±€æš—é»‘æ¨¡å¼ã€‚è€Œé€šè¿‡AndroidXçš„AppCompatåº“ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠé€‚é…èŒƒå›´å‘ä¸‹å…¼å®¹åˆ°API 14ï¼ŒåŸºæœ¬è¦†ç›–å¸‚é¢ä¸Šç»å¤§å¤šæ•°è®¾å¤‡ã€‚</p>
<p>è¿™é‡Œæœ‰ä¸ªé‡è¦æ¦‚å¿µï¼š<strong>DayNightä¸»é¢˜</strong>ã€‚è¿™æ˜¯Androidæä¾›çš„"æ—¥å¤œåˆ‡æ¢"åŸºç¡€ä¸»é¢˜ï¼Œæˆ‘ä»¬çš„åº”ç”¨ä¸»é¢˜åªè¦ç»§æ‰¿å®ƒï¼Œå°±èƒ½è‡ªåŠ¨å“åº”ç³»ç»Ÿçš„ä¸»é¢˜åˆ‡æ¢æŒ‡ä»¤ã€‚åç»­çš„æ‰€æœ‰é€‚é…å·¥ä½œï¼Œéƒ½æ˜¯å›´ç»•è¿™ä¸ªä¸»é¢˜å±•å¼€çš„èµ„æºå®šåˆ¶ã€‚</p>
<p>å¦å¤–ï¼Œæš—é»‘æ¨¡å¼çš„å¼€å¯æ–¹å¼æœ‰ä¸‰ç§ï¼ˆç”¨æˆ·å¯è‡ªè¡Œåˆ‡æ¢ï¼‰ï¼š</p>
<ul>
<li>ç³»ç»Ÿè®¾ç½®ï¼šè®¾ç½® &gt; æ˜¾ç¤º &gt; ä¸»é¢˜ï¼Œæ‰‹åŠ¨åˆ‡æ¢æµ…è‰²/æš—é»‘ï¼›</li>
<li>å¿«æ·è®¾ç½®ï¼šä¸‹æ‹‰é€šçŸ¥æ ï¼Œç‚¹å‡»"æš—é»‘æ¨¡å¼"å¿«æ·å¼€å…³ï¼›</li>
<li>çœç”µæ¨¡å¼ï¼šéƒ¨åˆ†è®¾å¤‡ï¼ˆå¦‚Pixelï¼‰å¼€å¯çœç”µæ¨¡å¼åï¼Œä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°æš—é»‘æ¨¡å¼ã€‚</li>
</ul>
<p>æˆ‘ä»¬çš„é€‚é…ç›®æ ‡ï¼Œå°±æ˜¯è®©åº”ç”¨åœ¨è¿™ä¸‰ç§åœºæ™¯ä¸‹ï¼Œéƒ½èƒ½æµç•…ã€ç¾è§‚åœ°åˆ‡æ¢ä¸»é¢˜ï¼Œä¸”æ‰€æœ‰UIå…ƒç´ éƒ½ç¬¦åˆæš—é»‘æ¨¡å¼çš„è§†è§‰è§„èŒƒã€‚</p>
<h2 data-id="heading-2">äºŒã€åŸºç¡€æ“ä½œï¼š3æ­¥æå®šæš—é»‘æ¨¡å¼é€‚é…å…¥é—¨</h2>
<p>å…¥é—¨çº§çš„æš—é»‘æ¨¡å¼é€‚é…ï¼Œæ ¸å¿ƒå°±3ä¸ªæ­¥éª¤ï¼šç»§æ‰¿DayNightä¸»é¢˜ã€åˆ›å»ºæš—é»‘æ¨¡å¼èµ„æºç›®å½•ã€ä½¿ç”¨ä¸»é¢˜å±æ€§è€Œéç¡¬ç¼–ç é¢œè‰²ã€‚è·Ÿç€åšï¼Œå°±èƒ½å¿«é€Ÿå®ç°åŸºç¡€çš„æ˜æš—åˆ‡æ¢æ•ˆæœã€‚</p>
<h3 data-id="heading-3">æ­¥éª¤1ï¼šè®©åº”ç”¨ä¸»é¢˜ç»§æ‰¿DayNightä¸»é¢˜</h3>
<p>é¦–å…ˆæ‰¾åˆ°åº”ç”¨çš„ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼ˆé€šå¸¸åœ¨res/values/styles.xmlï¼‰ï¼ŒæŠŠä¸»é¢˜çš„parentè®¾ç½®ä¸ºDayNightç›¸å…³ä¸»é¢˜ã€‚è¿™é‡Œæ¨èä½¿ç”¨Material Componentsåº“çš„ä¸»é¢˜ï¼Œå…¼å®¹æ€§æ›´å¥½ï¼Œè¿˜èƒ½ç›´æ¥å¤ç”¨Material Designçš„é…è‰²è§„èŒƒã€‚</p>
<p>å…ˆç¡®ä¿åœ¨build.gradleä¸­å¼•å…¥äº†Material Componentsä¾èµ–ï¼ˆå¦‚æœè¿˜æ²¡å¼•å…¥çš„è¯ï¼‰ï¼š</p>
<pre><code class="hljs language-groovy" lang="groovy">// Moduleçº§åˆ«çš„build.gradle
 dependencies {
     implementation 'com.google.android.material:material:1.12.0'
 }
 
</code></pre>
<p>ç„¶åä¿®æ”¹styles.xmlä¸­çš„ä¸»é¢˜é…ç½®ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">// res/values/styles.xml

     <span class="hljs-comment">&lt;!-- åŸºç¡€ä¸»é¢˜ï¼šç»§æ‰¿Materialçš„DayNightä¸»é¢˜ --&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"AppTheme"</span> <span class="hljs-attr">parent</span>=<span class="hljs-string">"Theme.MaterialComponents.DayNight.NoActionBar"</span>&amp;<span class="hljs-attr">gt</span>;
         &lt;!<span class="hljs-attr">--</span> <span class="hljs-attr">ä¸»é¢˜å±æ€§é…ç½®</span>ï¼š<span class="hljs-attr">ä¸è¦ç¡¬ç¼–ç é¢œè‰²</span>ï¼ <span class="hljs-attr">--</span>&gt;</span><span class="xml">
         <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"colorPrimary"</span>&gt;</span>?attr/colorPrimary<span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"colorPrimaryDark"</span>&gt;</span>?attr/colorPrimaryDark<span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"colorAccent"</span>&gt;</span>?attr/colorAccent<span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"android:windowBackground"</span>&gt;</span>?android:attr/colorBackground<span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span>
     </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

 
</code></pre>
<p>è¿™é‡Œè¦é‡ç‚¹æé†’ï¼š<strong>ç»å¯¹ä¸è¦åœ¨ä¸»é¢˜ä¸­ç¡¬ç¼–ç é¢œè‰²</strong>ï¼ˆæ¯”å¦‚ç›´æ¥å†™#FFFFFFã€#000000ï¼‰ã€‚ä¸Šé¢çš„?attr/xxxæ˜¯ä¸»é¢˜å±æ€§å¼•ç”¨ï¼Œç³»ç»Ÿä¼šæ ¹æ®å½“å‰æ¨¡å¼è‡ªåŠ¨åŒ¹é…å¯¹åº”çš„é¢œè‰²å€¼ï¼Œè¿™æ˜¯é€‚é…çš„æ ¸å¿ƒå‰æã€‚</p>
<h3 data-id="heading-4">æ­¥éª¤2ï¼šåˆ›å»ºæš—é»‘æ¨¡å¼ä¸“å±èµ„æºç›®å½•</h3>
<p>Androidé€šè¿‡"èµ„æºé™å®šç¬¦"æ¥åŒºåˆ†ä¸åŒæ¨¡å¼çš„èµ„æºã€‚å¯¹äºæš—é»‘æ¨¡å¼ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºå¸¦æœ‰**-night**åç¼€çš„èµ„æºç›®å½•ï¼ŒæŠŠæš—é»‘æ¨¡å¼ä¸‹çš„èµ„æºæ”¾åœ¨é‡Œé¢ã€‚</p>
<p>å¸¸è§çš„éœ€è¦é€‚é…çš„èµ„æºåŒ…æ‹¬ï¼šé¢œè‰²ï¼ˆcolors.xmlï¼‰ã€å›¾ç‰‡ï¼ˆdrawableï¼‰ã€å¸ƒå±€ï¼ˆlayoutï¼Œä¸€èˆ¬ä¸éœ€è¦ï¼Œé™¤éå¸ƒå±€ç»“æ„æœ‰å·®å¼‚ï¼‰ã€å­—ç¬¦ä¸²ï¼ˆstrings.xmlï¼Œæå°‘æ•°åœºæ™¯éœ€è¦ï¼‰ã€‚</p>
<p>åˆ›å»ºç›®å½•çš„è§„åˆ™å¾ˆç®€å•ï¼šåœ¨resç›®å½•ä¸‹ï¼Œå¤åˆ¶åŸæœ‰çš„èµ„æºç›®å½•ï¼Œæ·»åŠ -nightåç¼€ã€‚æ¯”å¦‚ï¼š</p>
<ul>
<li>æµ…è‰²æ¨¡å¼é¢œè‰²ï¼šres/values/colors.xml</li>
<li>æš—é»‘æ¨¡å¼é¢œè‰²ï¼šres/values-night/colors.xml</li>
<li>æµ…è‰²æ¨¡å¼å›¾ç‰‡ï¼šres/drawable/icon_home.xml</li>
<li>æš—é»‘æ¨¡å¼å›¾ç‰‡ï¼šres/drawable-night/icon_home.xml</li>
</ul>
<p>æ³¨æ„ï¼šä¸¤ä¸ªç›®å½•ä¸‹çš„èµ„æºæ–‡ä»¶åå¿…é¡»å®Œå…¨ä¸€è‡´ï¼Œç³»ç»Ÿæ‰èƒ½æ­£ç¡®åŒ¹é…ã€‚æ¯”å¦‚åœ¨values/colors.xmlä¸­å®šä¹‰äº†color_bg_mainï¼Œåœ¨values-night/colors.xmlä¸­ä¹Ÿå¿…é¡»å®šä¹‰åŒåçš„color_bg_mainï¼Œåªæ˜¯é¢œè‰²å€¼ä¸åŒã€‚</p>
<h3 data-id="heading-5">æ­¥éª¤3ï¼šåœ¨å¸ƒå±€ä¸­ä½¿ç”¨ä¸»é¢˜å±æ€§æˆ–èµ„æºå¼•ç”¨</h3>
<p>åˆ›å»ºå¥½èµ„æºåï¼Œåœ¨å¸ƒå±€æ–‡ä»¶ä¸­å¼•ç”¨è¿™äº›èµ„æºï¼Œè€Œä¸æ˜¯ç›´æ¥å†™æ­»é¢œè‰²ã€‚è¿™æ ·ç³»ç»Ÿåˆ‡æ¢æ¨¡å¼æ—¶ï¼Œä¼šè‡ªåŠ¨åŠ è½½å¯¹åº”ç›®å½•ä¸‹çš„èµ„æºã€‚</p>
<pre><code class="hljs language-xml" lang="xml">// æ­£ç¡®ç¤ºä¾‹ï¼šå¼•ç”¨èµ„æºæˆ–ä¸»é¢˜å±æ€§
 <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
     <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
     <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
     <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/color_bg_main"</span>  &lt;!<span class="hljs-attr">--</span> <span class="hljs-attr">å¼•ç”¨é¢œè‰²èµ„æº</span> <span class="hljs-attr">--</span>&gt;</span>
     android:orientation="vertical"&gt;
 
     <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
         <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
         <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
         <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/app_name"</span>
         <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"?attr/textColorPrimary"</span>  &lt;!<span class="hljs-attr">--</span> <span class="hljs-attr">å¼•ç”¨ä¸»é¢˜å±æ€§</span> <span class="hljs-attr">--</span>&gt;</span>
         android:textSize="20sp"/&gt;
 
 <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
 
</code></pre>
<p>å¯¹åº”çš„é¢œè‰²èµ„æºæ–‡ä»¶ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">// res/values/colors.xmlï¼ˆæµ…è‰²æ¨¡å¼ï¼‰
 <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">color</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"color_bg_main"</span>&amp;<span class="hljs-attr">gt</span>;#<span class="hljs-attr">FFFFFF</span>&amp;<span class="hljs-attr">lt</span>;/<span class="hljs-attr">color</span>&amp;<span class="hljs-attr">gt</span>;  &lt;!<span class="hljs-attr">--</span> <span class="hljs-attr">ç™½è‰²èƒŒæ™¯</span> <span class="hljs-attr">--</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">color</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"color_text_main"</span>&amp;<span class="hljs-attr">gt</span>;#<span class="hljs-attr">333333</span>&amp;<span class="hljs-attr">lt</span>;/<span class="hljs-attr">color</span>&amp;<span class="hljs-attr">gt</span>;  &lt;!<span class="hljs-attr">--</span> <span class="hljs-attr">æ·±ç°è‰²æ–‡å­—</span> <span class="hljs-attr">--</span>&gt;</span>
 <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span>
 
 // res/values-night/colors.xmlï¼ˆæš—é»‘æ¨¡å¼ï¼‰
 <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">color</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"color_bg_main"</span>&gt;</span>#121212<span class="hljs-tag">&lt;/<span class="hljs-name">color</span>&gt;</span>  <span class="hljs-comment">&lt;!-- æ·±é»‘è‰²èƒŒæ™¯ --&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">color</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"color_text_main"</span>&gt;</span>#E0E0E0<span class="hljs-symbol">&amp;lt;</span>/color<span class="hljs-symbol">&amp;gt;</span>  <span class="hljs-comment">&lt;!-- æµ…ç°è‰²æ–‡å­— --&gt;</span>
 <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span>
</code></pre>
<p>åˆ°è¿™é‡Œï¼ŒåŸºç¡€çš„æš—é»‘æ¨¡å¼é€‚é…å°±å®Œæˆäº†ã€‚è¿è¡Œåº”ç”¨ååˆ‡æ¢ç³»ç»Ÿä¸»é¢˜ï¼Œä½ ä¼šå‘ç°ç•Œé¢ä¼šè‡ªåŠ¨è·Ÿç€åˆ‡æ¢æ˜æš—é¢œè‰²ã€‚æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Ÿä½†è¿™åªæ˜¯å…¥é—¨ï¼ŒçœŸæ­£çš„éš¾ç‚¹åœ¨åé¢çš„ç»†èŠ‚ä¼˜åŒ–ã€‚</p>
<h2 data-id="heading-6">ä¸‰ã€è¿›é˜¶ä¼˜åŒ–ï¼šä»"èƒ½ç”¨"åˆ°"å¥½ç”¨"çš„å…³é”®ç»†èŠ‚</h2>
<p>ä¸å°‘å¼€å‘è€…åšåˆ°ä¸Šé¢ä¸‰æ­¥å°±è§‰å¾—å®Œäº‹äº†ï¼Œä½†ç”¨æˆ·ç”¨èµ·æ¥è¿˜æ˜¯åæ§½ä¸æ–­ã€‚é—®é¢˜å°±å‡ºåœ¨ç»†èŠ‚ä¸Šã€‚ä¸‹é¢è¿™äº›è¿›é˜¶æŠ€å·§ï¼Œèƒ½è®©ä½ çš„æš—é»‘æ¨¡å¼ä½“éªŒé£™å‡ä¸€ä¸ªæ¡£æ¬¡ã€‚</p>
<h3 data-id="heading-7">1. é¢œè‰²é€‚é…ï¼šéµå¾ª"å¯¹æ¯”åº¦ä¼˜å…ˆ"åŸåˆ™</h3>
<p>æš—é»‘æ¨¡å¼ä¸æ˜¯"é»‘è‰²èƒŒæ™¯+ç™½è‰²æ–‡å­—"çš„ç®€å•ç»„åˆï¼Œå…³é”®æ˜¯è¦ä¿è¯æ–‡å­—å’ŒèƒŒæ™¯çš„<strong>å¯¹æ¯”åº¦è¶³å¤Ÿé«˜</strong>ï¼Œå¦åˆ™ç”¨æˆ·ä¼šçœ‹å¾—å¾ˆè´¹åŠ²ã€‚æ ¹æ®WCAGï¼ˆWebå†…å®¹æ— éšœç¢æŒ‡å—ï¼‰ï¼Œæ­£æ–‡æ–‡å­—ä¸èƒŒæ™¯çš„å¯¹æ¯”åº¦è‡³å°‘è¦è¾¾åˆ°4.5:1ï¼Œæ ‡é¢˜æ–‡å­—è‡³å°‘è¦è¾¾åˆ°3:1ã€‚</p>
<p>è¿™é‡Œæ¨èå‡ ä¸ªå®ç”¨çš„é¢œè‰²æ­é…æ–¹æ¡ˆï¼ˆäº²æµ‹ä¸ä¼šè¸©å‘ï¼‰ï¼š</p>
<ul>
<li>èƒŒæ™¯è‰²ï¼š#121212ï¼ˆæ·±é»‘ï¼‰ã€#1E1E1Eï¼ˆæµ…é»‘ï¼‰ï¼Œé¿å…ç”¨çº¯é»‘#000000ï¼Œä¼šè®©æ–‡å­—æ˜¾å¾—è¿‡äºåˆºçœ¼ï¼›</li>
<li>æ­£æ–‡æ–‡å­—ï¼š#E0E0E0ï¼ˆæµ…ç°ï¼‰ã€#FFFFFFï¼ˆç™½è‰²ï¼‰ï¼Œå¯¹æ¯”åº¦è¶³å¤Ÿä¸”ä¸åˆºçœ¼ï¼›</li>
<li>è¾…åŠ©æ–‡å­—ï¼š#9E9E9Eï¼ˆä¸­ç°ï¼‰ï¼Œç”¨äºæç¤ºæ€§æ–‡å­—ï¼Œå¯¹æ¯”åº¦é€‚ä¸­ï¼›</li>
<li>å¼ºè°ƒè‰²ï¼šä¿æŒå’Œæµ…è‰²æ¨¡å¼ä¸€è‡´çš„å¼ºè°ƒè‰²ï¼ˆå¦‚è“è‰²#2196F3ï¼‰ï¼Œæ—¢èƒ½çªå‡ºé‡ç‚¹ï¼Œåˆèƒ½ä¿è¯è§†è§‰ä¸€è‡´æ€§ã€‚</li>
</ul>
<p>å¦å¤–ï¼ŒMaterial Design 3æä¾›äº†ä¸€å¥—å®Œæ•´çš„æš—é»‘æ¨¡å¼é…è‰²ç³»ç»Ÿï¼Œæ¨èç›´æ¥å¤ç”¨ï¼šé€šè¿‡?attr/colorSurfaceï¼ˆè¡¨é¢è‰²ï¼‰ã€?attr/colorOnSurfaceï¼ˆè¡¨é¢æ–‡å­—è‰²ï¼‰ç­‰å±æ€§ï¼Œèƒ½å¿«é€Ÿå®ç°ç¬¦åˆè§„èŒƒçš„é…è‰²ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">// åœ¨ä¸»é¢˜ä¸­è‡ªå®šä¹‰Material 3é…è‰²
 <span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"AppTheme"</span> <span class="hljs-attr">parent</span>=<span class="hljs-string">"Theme.MaterialComponents.DayNight.NoActionBar"</span>&gt;</span><span class="xml">
     <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"colorSurface"</span>&gt;</span>@color/surface<span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"colorOnSurface"</span>&gt;</span>@color/on_surface<span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"colorPrimary"</span>&gt;</span>@color/primary<span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"colorOnPrimary"</span>&gt;</span>@color/on_primary<span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span>
 </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
 
 // res/values/colors.xml
 <span class="hljs-tag">&lt;<span class="hljs-name">color</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"surface"</span>&gt;</span>#FFFFFF<span class="hljs-tag">&lt;/<span class="hljs-name">color</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">color</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"on_surface"</span>&gt;</span>#121212<span class="hljs-tag">&lt;/<span class="hljs-name">color</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">color</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"primary"</span>&gt;</span>#2196F3<span class="hljs-tag">&lt;/<span class="hljs-name">color</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">color</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"on_primary"</span>&gt;</span>#FFFFFF<span class="hljs-tag">&lt;/<span class="hljs-name">color</span>&gt;</span>
 
 // res/values-night/colors.xml
 <span class="hljs-tag">&lt;<span class="hljs-name">color</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"surface"</span>&gt;</span>#121212<span class="hljs-tag">&lt;/<span class="hljs-name">color</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">color</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"on_surface"</span>&gt;</span>#E0E0E0<span class="hljs-tag">&lt;/<span class="hljs-name">color</span>&gt;</span>
 <span class="hljs-symbol">&amp;lt;</span>color name="primary"<span class="hljs-symbol">&amp;gt;</span>#64B5F6<span class="hljs-symbol">&amp;lt;</span>/color<span class="hljs-symbol">&amp;gt;</span>  <span class="hljs-comment">&lt;!-- æš—é»‘æ¨¡å¼ä¸‹å¯ç¨å¾®è°ƒäº®å¼ºè°ƒè‰² --&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">color</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"on_primary"</span>&gt;</span>#000000<span class="hljs-tag">&lt;/<span class="hljs-name">color</span>&gt;</span>
 
</code></pre>
<h3 data-id="heading-8">2. å›¾ç‰‡ä¸å›¾æ ‡é€‚é…ï¼šé¿å…"ç™½å›¾æ ‡å˜é»‘åº•"çš„å°´å°¬</h3>
<p>å¾ˆå¤šåº”ç”¨åœ¨æµ…è‰²æ¨¡å¼ä¸‹ç”¨çš„æ˜¯é»‘è‰²å›¾æ ‡ï¼Œåˆ‡æ¢åˆ°æš—é»‘æ¨¡å¼åï¼Œå›¾æ ‡å°±å’Œé»‘è‰²èƒŒæ™¯"èä¸ºä¸€ä½“"ï¼Œç”¨æˆ·æ ¹æœ¬çœ‹ä¸è§ã€‚è¿™æ—¶å€™å°±éœ€è¦ä¸ºæš—é»‘æ¨¡å¼å‡†å¤‡ä¸“å±çš„å›¾æ ‡èµ„æºã€‚</p>
<p>æ¨èä¸¤ç§é€‚é…æ–¹æ¡ˆï¼Œæ ¹æ®åœºæ™¯é€‰æ‹©ï¼š</p>
<h4 data-id="heading-9">æ–¹æ¡ˆ1ï¼šä½¿ç”¨çŸ¢é‡å›¾ï¼ˆSVGï¼‰+ tintç€è‰²</h4>
<p>è¿™æ˜¯æœ€æ¨èçš„æ–¹æ¡ˆï¼ŒçŸ¢é‡å›¾ä½“ç§¯å°ã€ä¸å¤±çœŸï¼Œè¿˜èƒ½é€šè¿‡tintå±æ€§åŠ¨æ€ç€è‰²ã€‚æˆ‘ä»¬åªéœ€è¦å‡†å¤‡ä¸€ä»½çŸ¢é‡å›¾ï¼Œç„¶ååœ¨å¸ƒå±€ä¸­é€šè¿‡?attr/colorControlNormalå±æ€§ç»™å›¾æ ‡ç€è‰²ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ ¹æ®ä¸»é¢˜åˆ‡æ¢é¢œè‰²ã€‚</p>
<pre><code class="hljs language-xml" lang="xml">// å¸ƒå±€ä¸­çš„ImageViewé…ç½®
 <span class="hljs-tag">&lt;<span class="hljs-name">ImageView</span>
     <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"24dp"</span>
     <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"24dp"</span>
     <span class="hljs-attr">android:src</span>=<span class="hljs-string">"@drawable/ic_home"</span>  &lt;!<span class="hljs-attr">--</span> <span class="hljs-attr">çŸ¢é‡å›¾èµ„æº</span> <span class="hljs-attr">--</span>&gt;</span>
     android:tint="?attr/colorControlNormal"/<span class="hljs-symbol">&amp;gt;</span>  <span class="hljs-comment">&lt;!-- ä¸»é¢˜è‰²ç€è‰² --&gt;</span>
 
</code></pre>
<p>è¿™æ ·ä¸€æ¥ï¼Œæµ…è‰²æ¨¡å¼ä¸‹å›¾æ ‡æ˜¯é»‘è‰²ï¼Œæš—é»‘æ¨¡å¼ä¸‹æ˜¯ç™½è‰²ï¼Œæ— éœ€å‡†å¤‡ä¸¤ä»½å›¾æ ‡èµ„æºï¼Œçœå¿ƒåˆé«˜æ•ˆã€‚</p>
<h4 data-id="heading-10">æ–¹æ¡ˆ2ï¼šåˆ›å»ºdrawable-nightç›®å½•å­˜æ”¾ä¸“å±å›¾æ ‡</h4>
<p>å¦‚æœæ˜¯ä½å›¾ï¼ˆPNG/JPGï¼‰ï¼Œå°±éœ€è¦åˆ›å»ºres/drawable-nightç›®å½•ï¼ŒæŠŠæš—é»‘æ¨¡å¼ä¸‹çš„å›¾æ ‡æ”¾è¿›å»ã€‚æ³¨æ„å›¾æ ‡æ–‡ä»¶åè¦å’Œdrawableç›®å½•ä¸‹çš„ä¸€è‡´ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åŒ¹é…ã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<ul>
<li>æµ…è‰²æ¨¡å¼å›¾æ ‡ï¼šres/drawable/ic_setting.pngï¼ˆé»‘è‰²ï¼‰</li>
<li>æš—é»‘æ¨¡å¼å›¾æ ‡ï¼šres/drawable-night/ic_setting.pngï¼ˆç™½è‰²ï¼‰</li>
</ul>
<p>æç¤ºï¼šå°½é‡ä½¿ç”¨çŸ¢é‡å›¾ï¼Œå‡å°‘APKä½“ç§¯ï¼Œä¹Ÿé¿å…å¤šå¥—ä½å›¾èµ„æºçš„ç»´æŠ¤æˆæœ¬ã€‚</p>
<h3 data-id="heading-11">3. åº”ç”¨å†…ä¸»é¢˜åˆ‡æ¢ï¼šç»™ç”¨æˆ·è‡ªä¸»é€‰æ‹©çš„æƒåˆ©</h3>
<p>é™¤äº†è·Ÿéšç³»ç»Ÿä¸»é¢˜ï¼Œå¾ˆå¤šåº”ç”¨è¿˜ä¼šæä¾›"æµ…è‰²/æš—é»‘/è·Ÿéšç³»ç»Ÿ"çš„è‡ªä¸»åˆ‡æ¢é€‰é¡¹ï¼ˆæ¯”å¦‚å¾®ä¿¡ã€çŸ¥ä¹ï¼‰ã€‚è¿™éœ€è¦æˆ‘ä»¬åœ¨åº”ç”¨å†…å®ç°ä¸»é¢˜åˆ‡æ¢é€»è¾‘ï¼Œè¿˜å¾—æŠŠç”¨æˆ·çš„é€‰æ‹©æŒä¹…åŒ–å­˜å‚¨ï¼ˆæ¯”å¦‚SharedPreferencesï¼‰ï¼Œä¸‹æ¬¡å¯åŠ¨æ—¶æ¢å¤ç”¨æˆ·çš„è®¾ç½®ã€‚</p>
<p>å®ç°æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<h4 data-id="heading-12">ç¬¬ä¸€æ­¥ï¼šå®šä¹‰ä¸»é¢˜åˆ‡æ¢é€‰é¡¹å¯¹åº”çš„æ¨¡å¼</h4>
<p>AppCompatæä¾›äº†å››ç§å¤œé—´æ¨¡å¼ï¼Œå¯¹åº”æˆ‘ä»¬çš„åˆ‡æ¢é€‰é¡¹ï¼š</p>
<ul>
<li>MODE_NIGHT_NOï¼šå¼ºåˆ¶æµ…è‰²æ¨¡å¼ï¼›</li>
<li>MODE_NIGHT_YESï¼šå¼ºåˆ¶æ·±è‰²æ¨¡å¼ï¼›</li>
<li>MODE_NIGHT_FOLLOW_SYSTEMï¼šè·Ÿéšç³»ç»Ÿï¼ˆé»˜è®¤ï¼‰ï¼›</li>
<li>MODE_NIGHT_AUTO_BATTERYï¼šä½ç”µé‡æ—¶è‡ªåŠ¨å¼€å¯æš—é»‘æ¨¡å¼ã€‚</li>
</ul>
<h4 data-id="heading-13">ç¬¬äºŒæ­¥ï¼šå®ç°åˆ‡æ¢é€»è¾‘ä¸æŒä¹…åŒ–å­˜å‚¨</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä¸»é¢˜å·¥å…·ç±»ï¼šå¤„ç†åˆ‡æ¢å’ŒæŒä¹…åŒ–</span>
 <span class="hljs-keyword">object</span> ThemeUtils {
     <span class="hljs-comment">// å­˜å‚¨ç”¨æˆ·é€‰æ‹©çš„ä¸»é¢˜æ¨¡å¼ï¼Œkeyä¸º"night_mode"</span>
     <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> KEY_NIGHT_MODE = <span class="hljs-string">"night_mode"</span>
     <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> sharedPreferences <span class="hljs-keyword">by</span> lazy {
         AppContext.context.getSharedPreferences(<span class="hljs-string">"app_settings"</span>, Context.MODE_PRIVATE)
     }
 
     <span class="hljs-comment">// åˆå§‹åŒ–ä¸»é¢˜ï¼šå¯åŠ¨åº”ç”¨æ—¶è°ƒç”¨</span>
     <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">initTheme</span><span class="hljs-params">()</span></span> {
         <span class="hljs-keyword">val</span> mode = sharedPreferences.getInt(KEY_NIGHT_MODE, AppCompatDelegate.MODE_NIGHT_FOLLOW_SYSTEM)
         AppCompatDelegate.setDefaultNightMode(mode)
     }
 
     <span class="hljs-comment">// åˆ‡æ¢ä¸»é¢˜</span>
     <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">switchTheme</span><span class="hljs-params">(mode: <span class="hljs-type">Int</span>)</span></span> {
         <span class="hljs-comment">// ä¿å­˜ä¸»é¢˜æ¨¡å¼åˆ°SP</span>
         sharedPreferences.edit().putInt(KEY_NIGHT_MODE, mode).apply()
         <span class="hljs-comment">// è®¾ç½®ä¸»é¢˜æ¨¡å¼</span>
         AppCompatDelegate.setDefaultNightMode(mode)
         <span class="hljs-comment">// é‡å¯Activityä»¥åº”ç”¨ä¸»é¢˜ï¼ˆå¯é€‰ï¼Œæ ¹æ®éœ€æ±‚è°ƒæ•´ï¼‰</span>
         AppContext.context.startActivity(
             Intent(AppContext.context, MainActivity::<span class="hljs-keyword">class</span>.java).apply {
                 addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP or Intent.FLAG_ACTIVITY_NEW_TASK)
             }
         )
     }
 }
 
</code></pre>
<h4 data-id="heading-14">ç¬¬ä¸‰æ­¥ï¼šåœ¨Activityä¸­è°ƒç”¨åˆ‡æ¢æ–¹æ³•</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ç¤ºä¾‹ï¼šè®¾ç½®é¡µé¢çš„åˆ‡æ¢æŒ‰é’®ç‚¹å‡»äº‹ä»¶</span>
 btnLight.setOnClickListener {
     ThemeUtils.switchTheme(AppCompatDelegate.MODE_NIGHT_NO)
 }
 
 btnDark.setOnClickListener {
     ThemeUtils.switchTheme(AppCompatDelegate.MODE_NIGHT_YES)
 }
 
 btnFollowSystem.setOnClickListener {
     ThemeUtils.switchTheme(AppCompatDelegate.MODE_NIGHT_FOLLOW_SYSTEM)
 }
 
</code></pre>
<p>æ³¨æ„ï¼šä»AppCompat v1.1.0å¼€å§‹ï¼ŒsetDefaultNightMode()ä¼šè‡ªåŠ¨é‡å»ºå·²å¯åŠ¨çš„Activityï¼Œæ‰€ä»¥æœ‰æ—¶å€™ä¸éœ€è¦æ‰‹åŠ¨é‡å¯ã€‚ä½†å¦‚æœæœ‰ç‰¹æ®Šéœ€æ±‚ï¼ˆæ¯”å¦‚ä¿å­˜é¡µé¢çŠ¶æ€ï¼‰ï¼Œå¯ä»¥æ‰‹åŠ¨å¤„ç†é‡å¯é€»è¾‘ï¼Œå¹¶é€šè¿‡onSaveInstanceState()ä¿å­˜æ•°æ®ã€‚</p>
<h2 data-id="heading-15">å››ã€ç‰¹æ®Šåœºæ™¯é€‚é…ï¼šè¿™äº›å‘åƒä¸‡åˆ«è¸©</h2>
<p>é™¤äº†å¸¸è§„çš„ç•Œé¢é€‚é…ï¼Œè¿˜æœ‰å‡ ä¸ªç‰¹æ®Šåœºæ™¯å®¹æ˜“è¢«å¿½ç•¥ï¼Œä¸€æ—¦è¸©å‘å°±ä¼šä¸¥é‡å½±å“ç”¨æˆ·ä½“éªŒã€‚ä¸‹é¢é€ä¸ªè®²è§£è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-16">1. å¯åŠ¨é¡µï¼ˆSplashï¼‰é€‚é…ï¼šé¿å…"ç™½å±é—ªä¸€ä¸‹"</h3>
<p>å¾ˆå¤šåº”ç”¨çš„å¯åŠ¨é¡µæ˜¯é€šè¿‡WindowBackgroundè®¾ç½®çš„å›¾ç‰‡æˆ–é¢œè‰²ã€‚å¦‚æœå¯åŠ¨é¡µçš„é¢œè‰²æ˜¯ç¡¬ç¼–ç çš„ç™½è‰²ï¼Œé‚£ä¹ˆåœ¨æš—é»‘æ¨¡å¼ä¸‹å¯åŠ¨åº”ç”¨æ—¶ï¼Œä¼šå…ˆé—ªä¸€ä¸‹ç™½è‰²çš„å¯åŠ¨é¡µï¼Œå†åˆ‡æ¢åˆ°æš—é»‘æ¨¡å¼çš„ç•Œé¢ï¼Œéå¸¸çªå…€ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼šå¯åŠ¨é¡µçš„èƒŒæ™¯ä¸è¦ç¡¬ç¼–ç ï¼Œä½¿ç”¨ä¸»é¢˜å±æ€§?android:attr/colorBackgroundã€‚</p>
<pre><code class="hljs language-xml" lang="xml">// å¯åŠ¨é¡µçš„ä¸»é¢˜ï¼ˆåœ¨styles.xmlä¸­å®šä¹‰ï¼‰
 <span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"SplashTheme"</span> <span class="hljs-attr">parent</span>=<span class="hljs-string">"Theme.MaterialComponents.DayNight.NoActionBar"</span>&gt;</span><span class="xml">
     <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"android:windowBackground"</span>&gt;</span>?android:attr/colorBackground<span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span>  <span class="hljs-comment">&lt;!-- ä½¿ç”¨ä¸»é¢˜èƒŒæ™¯è‰² --&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"android:windowFullscreen"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span>
 </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
 
 // åœ¨AndroidManifest.xmlä¸­ç»™å¯åŠ¨Activityè®¾ç½®ä¸»é¢˜
 <span class="hljs-tag">&lt;<span class="hljs-name">activity</span>
     <span class="hljs-attr">android:name</span>=<span class="hljs-string">".SplashActivity"</span>
     <span class="hljs-attr">android:theme</span>=<span class="hljs-string">"@style/SplashTheme"</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">intent-filter</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">action</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.intent.action.MAIN"</span>/&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">category</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.intent.category.LAUNCHER"</span>/&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">intent-filter</span>&gt;</span>
 <span class="hljs-tag">&lt;/<span class="hljs-name">activity</span>&gt;</span>
 
</code></pre>
<p>å¦‚æœå¯åŠ¨é¡µç”¨çš„æ˜¯å›¾ç‰‡ï¼Œå°±éœ€è¦åˆ›å»ºdrawable-nightç›®å½•ï¼Œæ”¾ç½®æš—é»‘æ¨¡å¼ä¸‹çš„å¯åŠ¨é¡µå›¾ç‰‡ï¼Œç¡®ä¿å¯åŠ¨é¡µå’Œåº”ç”¨ä¸»é¢˜ä¿æŒä¸€è‡´ã€‚</p>
<h3 data-id="heading-17">2. WebViewé€‚é…ï¼šè®©ç½‘é¡µä¹Ÿèƒ½è·Ÿç€å˜æš—</h3>
<p>å¦‚æœåº”ç”¨ä¸­æœ‰WebViewåŠ è½½ç½‘é¡µï¼Œé»˜è®¤æƒ…å†µä¸‹ç½‘é¡µä¸ä¼šè·Ÿéšç³»ç»Ÿä¸»é¢˜å˜æš—ï¼Œä¼šå‡ºç°"åº”ç”¨æ˜¯æš—é»‘æ¨¡å¼ï¼Œç½‘é¡µæ˜¯æµ…è‰²æ¨¡å¼"çš„å‰²è£‚æ„Ÿã€‚è§£å†³æ–¹æ¡ˆæœ‰ä¸¤ç§ï¼š</p>
<h4 data-id="heading-18">æ–¹æ¡ˆ1ï¼šä½¿ç”¨WebViewçš„forceDarkåŠŸèƒ½ï¼ˆAndroid 10+ï¼‰</h4>
<p>Android 10åŠä»¥ä¸Šç‰ˆæœ¬ï¼ŒWebViewæ”¯æŒforceDarkåŠŸèƒ½ï¼Œèƒ½è‡ªåŠ¨æŠŠæµ…è‰²ç½‘é¡µè½¬æ¢æˆæš—é»‘æ¨¡å¼ã€‚åªéœ€åœ¨ä»£ç ä¸­å¼€å¯å³å¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {
     webView.settings.forceDark = WebSettings.FORCE_DARK_ON
     <span class="hljs-comment">// å¯é€‰ï¼šè®¾ç½®æš—é»‘æ¨¡å¼çš„å¯¹æ¯”åº¦</span>
     webView.settings.forceDarkStrategy = WebSettings.DARK_STRATEGY_WEB_THEME_DARKEN
 }
 
</code></pre>
<h4 data-id="heading-19">æ–¹æ¡ˆ2ï¼šè‡ªå®šä¹‰æš—é»‘æ¨¡å¼CSS</h4>
<p>å¦‚æœéœ€è¦å…¼å®¹æ›´ä½ç‰ˆæœ¬ï¼Œæˆ–è€…æƒ³è®©ç½‘é¡µæš—é»‘æ¨¡å¼æ›´ç¾è§‚ï¼Œå¯ä»¥åœ¨ç½‘é¡µä¸­æ·»åŠ æš—é»‘æ¨¡å¼çš„CSSï¼Œç„¶åé€šè¿‡Androidä»£ç åˆ¤æ–­å½“å‰ä¸»é¢˜ï¼Œæ³¨å…¥å¯¹åº”çš„CSSæ ·å¼ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// åˆ¤æ–­å½“å‰æ˜¯å¦ä¸ºæš—é»‘æ¨¡å¼</span>
 <span class="hljs-keyword">val</span> isDarkMode = resources.configuration.uiMode and Configuration.UI_MODE_NIGHT_MASK == Configuration.UI_MODE_NIGHT_YES
 
 <span class="hljs-comment">// åŠ è½½ç½‘é¡µæ—¶æ³¨å…¥CSS</span>
 webView.webViewClient = <span class="hljs-keyword">object</span> : WebViewClient() {
     <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onPageFinished</span><span class="hljs-params">(view: <span class="hljs-type">WebView</span>?, url: <span class="hljs-type">String</span>?)</span></span> {
         <span class="hljs-keyword">super</span>.onPageFinished(view, url)
         <span class="hljs-keyword">val</span> css = <span class="hljs-keyword">if</span> (isDarkMode) {
             <span class="hljs-comment">// æš—é»‘æ¨¡å¼CSSï¼šè®¾ç½®èƒŒæ™¯è‰²å’Œæ–‡å­—è‰²</span>
             <span class="hljs-string">"javascript:(function() { "</span> +
                     <span class="hljs-string">"document.body.style.backgroundColor = '#121212'; "</span> +
                     <span class="hljs-string">"document.body.style.color = '#E0E0E0'; "</span> +
                     <span class="hljs-string">"})()"</span>
         } <span class="hljs-keyword">else</span> {
             <span class="hljs-comment">// æµ…è‰²æ¨¡å¼CSS</span>
             <span class="hljs-string">"javascript:(function() { "</span> +
                     <span class="hljs-string">"document.body.style.backgroundColor = '#FFFFFF'; "</span> +
                     <span class="hljs-string">"document.body.style.color = '#333333'; "</span> +
                     <span class="hljs-string">"})()"</span>
         }
         webView.evaluateJavascript(css, <span class="hljs-literal">null</span>)
     }
 }
 
</code></pre>
<h3 data-id="heading-20">3. é€šçŸ¥ä¸Widgeté€‚é…ï¼šåˆ«è®©é€šçŸ¥æˆä¸º"è§†è§‰å¼‚ç±»"</h3>
<p>é€šçŸ¥å’Œæ¡Œé¢Widgetæ˜¯åœ¨åº”ç”¨å¤–éƒ¨æ˜¾ç¤ºçš„ï¼Œä¹Ÿéœ€è¦é€‚é…æš—é»‘æ¨¡å¼ï¼Œå¦åˆ™åœ¨æš—é»‘æ¨¡å¼ä¸‹ä¼šå‡ºç°"ç™½è‰²é€šçŸ¥æ¡†+é»‘è‰²æ–‡å­—"çš„åˆºçœ¼ç»„åˆã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>é€šçŸ¥ï¼šå°½é‡ä½¿ç”¨ç³»ç»Ÿæä¾›çš„é€šçŸ¥æ¨¡æ¿ï¼ˆå¦‚MessagingStyleã€BigTextStyleï¼‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨é€‚é…æš—é»‘æ¨¡å¼ã€‚é¿å…è‡ªå®šä¹‰é€šçŸ¥å¸ƒå±€ï¼Œå¦‚æœå¿…é¡»è‡ªå®šä¹‰ï¼Œè¦ä½¿ç”¨ä¸»é¢˜å±æ€§è®¾ç½®é¢œè‰²ï¼Œä¸è¦ç¡¬ç¼–ç ã€‚</li>
<li>Widgetï¼šåœ¨Widgetçš„å¸ƒå±€ä¸­ä½¿ç”¨ä¸»é¢˜å±æ€§ï¼ˆå¦‚?attr/textColorPrimaryã€?attr/colorBackgroundï¼‰ï¼Œç¡®ä¿æ–‡å­—å’ŒèƒŒæ™¯é¢œè‰²èƒ½è·Ÿéšä¸»é¢˜åˆ‡æ¢ã€‚</li>
</ul>
<pre><code class="hljs language-xml" lang="xml">// Widgetå¸ƒå±€ç¤ºä¾‹ï¼ˆä½¿ç”¨ä¸»é¢˜å±æ€§ï¼‰
 <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
     <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
     <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
     <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
     <span class="hljs-attr">android:background</span>=<span class="hljs-string">"?attr/colorBackground"</span>
     <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>&gt;</span>
 
     <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
         <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/widget_title"</span>
         <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
         <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
         <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"?attr/textColorPrimary"</span>
         <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"16sp"</span>/&gt;</span>
 
 <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
 
</code></pre>
<h2 data-id="heading-21">äº”ã€å¸¸è§é—®é¢˜æ’æŸ¥ï¼šè§£å†³é€‚é…ä¸­çš„"ç–‘éš¾æ‚ç—‡"</h2>
<p>é€‚é…è¿‡ç¨‹ä¸­éš¾å…ä¼šé‡åˆ°å„ç§é—®é¢˜ï¼Œä¸‹é¢åˆ—ä¸¾å‡ ä¸ªæœ€å¸¸è§çš„å‘ï¼Œä»¥åŠå¯¹åº”çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-22">1. åˆ‡æ¢ä¸»é¢˜æ—¶é—ªé»‘/é—ªç™½</h3>
<p>é—®é¢˜åŸå› ï¼šåˆ‡æ¢ä¸»é¢˜æ—¶ç³»ç»Ÿä¼šé‡å»ºActivityï¼Œé‡å»ºè¿‡ç¨‹ä¸­ä¼šçŸ­æš‚æ˜¾ç¤ºWindowçš„èƒŒæ™¯è‰²ï¼Œå¦‚æœèƒŒæ™¯è‰²å’Œå½“å‰ä¸»é¢˜ä¸åŒ¹é…ï¼Œå°±ä¼šå‡ºç°é—ªå±ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>ç¡®ä¿æ‰€æœ‰Activityçš„ä¸»é¢˜éƒ½ç»§æ‰¿è‡ªDayNightä¸»é¢˜ï¼Œä¸”WindowBackgroundä½¿ç”¨ä¸»é¢˜å±æ€§ï¼›</li>
<li>åœ¨AndroidManifest.xmlä¸­ç»™Activityæ·»åŠ android:configChanges="uiMode"ï¼Œé¿å…ç³»ç»Ÿè‡ªåŠ¨é‡å»ºï¼Œç„¶ååœ¨Activityä¸­é‡å†™onConfigurationChanged()æ–¹æ³•ï¼Œæ‰‹åŠ¨æ›´æ–°UIï¼›</li>
</ul>
<h3 data-id="heading-23">2. éƒ¨åˆ†è§†å›¾æ²¡æœ‰è·Ÿéšä¸»é¢˜åˆ‡æ¢</h3>
<p>é—®é¢˜åŸå› ï¼šå¤§æ¦‚ç‡æ˜¯åœ¨ä»£ç ä¸­ç¡¬ç¼–ç äº†é¢œè‰²ï¼Œæˆ–è€…æ²¡æœ‰ä½¿ç”¨ä¸»é¢˜å±æ€§/èµ„æºå¼•ç”¨ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>å…¨å±€æœç´¢ä»£ç ä¸­çš„ç¡¬ç¼–ç é¢œè‰²ï¼ˆå¦‚#FFFFFFã€#000000ï¼‰ï¼Œå…¨éƒ¨æ›¿æ¢ä¸ºä¸»é¢˜å±æ€§æˆ–èµ„æºå¼•ç”¨ï¼›</li>
<li>æ£€æŸ¥æ˜¯å¦æ‰€æœ‰èµ„æºéƒ½åœ¨values-nightç›®å½•ä¸‹æœ‰å¯¹åº”çš„æš—é»‘æ¨¡å¼ç‰ˆæœ¬ï¼›</li>
<li>å¦‚æœæ˜¯åŠ¨æ€åˆ›å»ºçš„è§†å›¾ï¼Œç¡®ä¿åœ¨åˆ›å»ºæ—¶ä½¿ç”¨ä¸»é¢˜å±æ€§è·å–é¢œè‰²ï¼š</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ­£ç¡®ç¤ºä¾‹ï¼šä»ä¸»é¢˜ä¸­è·å–é¢œè‰²</span>
 <span class="hljs-keyword">val</span> textColor = ThemeUtils.getColor(context, android.R.attr.textColorPrimary)
 textView.setTextColor(textColor)
 
 <span class="hljs-comment">// å·¥å…·ç±»æ–¹æ³•</span>
 <span class="hljs-keyword">object</span> ThemeUtils {
     <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getColor</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>, attr: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> {
         <span class="hljs-keyword">val</span> typedValue = TypedValue()
         context.theme.resolveAttribute(attr, typedValue, <span class="hljs-literal">true</span>)
         <span class="hljs-keyword">return</span> typedValue.<span class="hljs-keyword">data</span>
     }
 }
 
</code></pre>
<h3 data-id="heading-24">3. Force DarkåŠŸèƒ½ä¸ç”Ÿæ•ˆ</h3>
<p>é—®é¢˜åŸå› ï¼šForce Darkæ˜¯Android 10æä¾›çš„"ä¸€é”®æš—é»‘"åŠŸèƒ½ï¼Œé€‚ç”¨äºæ²¡æœ‰é€‚é…DayNightä¸»é¢˜çš„åº”ç”¨ï¼Œä½†æœ‰å‡ ä¸ªå‰ææ¡ä»¶ï¼š</p>
<ul>
<li>åº”ç”¨ä¸»é¢˜å¿…é¡»æ˜¯æµ…è‰²ä¸»é¢˜ï¼ˆå¦‚Theme.Material.Lightï¼‰ï¼›</li>
<li>å¿…é¡»åœ¨ä¸»é¢˜ä¸­è®¾ç½®android:forceDarkAllowed="true"ï¼›</li>
<li>å¦‚æœåº”ç”¨å·²ç»ç»§æ‰¿äº†DayNightä¸»é¢˜ï¼ŒForce Darkä¼šè‡ªåŠ¨å¤±æ•ˆï¼ˆå› ä¸ºDayNightå·²ç»å®ç°äº†æš—é»‘æ¨¡å¼ï¼‰ã€‚</li>
</ul>
<p>è§£å†³æ–¹æ¡ˆï¼šå¦‚æœéœ€è¦ä½¿ç”¨Force Darkï¼Œç¡®ä¿ä¸»é¢˜æ˜¯æµ…è‰²ä¸”å¼€å¯äº†forceDarkAllowedï¼›å¦‚æœå·²ç»é€‚é…äº†DayNightä¸»é¢˜ï¼Œå°±ä¸éœ€è¦å†ä½¿ç”¨Force Darkäº†ã€‚</p>
<h2 data-id="heading-25">å…­ã€è¿›é˜¶ä¼˜åŒ–ï¼šè®©æš—é»‘æ¨¡å¼æ›´æè‡´çš„å°æŠ€å·§</h2>
<p>å¦‚æœæƒ³è®©ä½ çš„æš—é»‘æ¨¡å¼ä½“éªŒæ›´ä¸Šä¸€å±‚æ¥¼ï¼Œå¯ä»¥è¯•è¯•ä¸‹é¢è¿™äº›å°æŠ€å·§ï¼š</p>
<h3 data-id="heading-26">1. åŠ¨æ€è°ƒæ•´å›¾ç‰‡äº®åº¦</h3>
<p>å¯¹äºä¸€äº›æ²¡æœ‰é€‚é…æš—é»‘æ¨¡å¼çš„å›¾ç‰‡ï¼ˆæ¯”å¦‚ç”¨æˆ·å¤´åƒã€ç½‘ç»œå›¾ç‰‡ï¼‰ï¼Œå¯ä»¥åœ¨æš—é»‘æ¨¡å¼ä¸‹é€‚å½“é™ä½å›¾ç‰‡äº®åº¦ï¼Œé¿å…å›¾ç‰‡è¿‡äº®åˆºçœ¼ã€‚å¯ä»¥é€šè¿‡ColorMatrixè°ƒæ•´å›¾ç‰‡çš„äº®åº¦ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">adjustImageBrightness</span><span class="hljs-params">(imageView: <span class="hljs-type">ImageView</span>, isDarkMode: <span class="hljs-type">Boolean</span>)</span></span> {
     <span class="hljs-keyword">if</span> (isDarkMode) {
         <span class="hljs-keyword">val</span> matrix = ColorMatrix()
         matrix.setSaturation(<span class="hljs-number">0.8f</span>)  <span class="hljs-comment">// é™ä½é¥±å’Œåº¦</span>
         matrix.setScale(<span class="hljs-number">0.9f</span>, <span class="hljs-number">0.9f</span>, <span class="hljs-number">0.9f</span>, <span class="hljs-number">1f</span>)  <span class="hljs-comment">// é™ä½äº®åº¦</span>
         imageView.colorFilter = ColorMatrixColorFilter(matrix)
     } <span class="hljs-keyword">else</span> {
         imageView.colorFilter = <span class="hljs-literal">null</span>  <span class="hljs-comment">// æ¢å¤æ­£å¸¸</span>
     }
 }
 
</code></pre>
<h3 data-id="heading-27">2. é€‚é…æ·±è‰²æ¨¡å¼ä¸‹çš„çŠ¶æ€æ </h3>
<p>åœ¨æš—é»‘æ¨¡å¼ä¸‹ï¼ŒçŠ¶æ€æ çš„é¢œè‰²ä¹Ÿåº”è¯¥è·Ÿç€è°ƒæ•´ï¼Œé¿å…å‡ºç°"ç™½è‰²çŠ¶æ€æ +é»‘è‰²æ–‡å­—"çš„å‰²è£‚æ„Ÿã€‚å¯ä»¥é€šè¿‡ä»£ç åŠ¨æ€è®¾ç½®çŠ¶æ€æ é¢œè‰²å’Œæ–‡å­—é¢œè‰²ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setStatusBarTheme</span><span class="hljs-params">(activity: <span class="hljs-type">Activity</span>, isDarkMode: <span class="hljs-type">Boolean</span>)</span></span> {
     <span class="hljs-keyword">val</span> window = activity.window
     <span class="hljs-comment">// è®¾ç½®çŠ¶æ€æ èƒŒæ™¯è‰²</span>
     window.statusBarColor = ThemeUtils.getColor(activity, android.R.attr.colorBackground)
     <span class="hljs-comment">// è®¾ç½®çŠ¶æ€æ æ–‡å­—é¢œè‰²ï¼ˆtrueï¼šé»‘è‰²æ–‡å­—ï¼›falseï¼šç™½è‰²æ–‡å­—ï¼‰</span>
     ViewCompat.getWindowInsetsController(window.decorView)?.apply {
         isAppearanceLightStatusBars = !isDarkMode
     }
 }
 
</code></pre>
<h3 data-id="heading-28">3. æµ‹è¯•å·¥å…·æ¨è</h3>
<p>é€‚é…å®Œæˆåï¼Œä¸€å®šè¦åšå¥½æµ‹è¯•ã€‚æ¨èä¸¤ä¸ªå®ç”¨çš„æµ‹è¯•å·¥å…·ï¼š</p>
<ul>
<li>Android Studioçš„Layout Inspectorï¼šå¯ä»¥å®æ—¶æŸ¥çœ‹è§†å›¾çš„é¢œè‰²ã€èµ„æºå¼•ç”¨ï¼Œå¿«é€Ÿå®šä½ç¡¬ç¼–ç é—®é¢˜ï¼›</li>
<li>Accessibility Scannerï¼ˆæ— éšœç¢æ‰«æå™¨ï¼‰ï¼šå¯ä»¥æ£€æµ‹æ–‡å­—å¯¹æ¯”åº¦æ˜¯å¦è¾¾æ ‡ï¼Œå¸®åŠ©ä¼˜åŒ–æ— éšœç¢ä½“éªŒã€‚</li>
</ul>
<h2 data-id="heading-29">ä¸ƒã€æ€»ç»“ï¼šæš—é»‘æ¨¡å¼é€‚é…çš„æ ¸å¿ƒè¦ç‚¹</h2>
<p>å…¶å®æš—é»‘æ¨¡å¼é€‚é…çš„æ ¸å¿ƒå°±ä¸‰ä»¶äº‹ï¼š<strong>ä¸ç¡¬ç¼–ç é¢œè‰²ã€ç”¨å¯¹ä¸»é¢˜å±æ€§ã€åšå¥½èµ„æºåŒ¹é…</strong>ã€‚ä»åŸºç¡€çš„ç»§æ‰¿DayNightä¸»é¢˜ï¼Œåˆ°è¿›é˜¶çš„åº”ç”¨å†…åˆ‡æ¢å’Œç‰¹æ®Šåœºæ™¯é€‚é…ï¼Œåªè¦ä¸€æ­¥æ­¥è·Ÿç€åšï¼Œå°±èƒ½åšå‡ºä½“éªŒä¼˜ç§€çš„æš—é»‘æ¨¡å¼ã€‚</p>
<p>æœ€åå†å¼ºè°ƒå‡ ä¸ªå…³é”®ç‚¹ï¼š</p>
<ul>
<li>ä¼˜å…ˆä½¿ç”¨Material Designçš„ä¸»é¢˜å±æ€§ï¼Œå‡å°‘è‡ªå®šä¹‰é¢œè‰²çš„æˆæœ¬ï¼›</li>
<li>æ‰€æœ‰èµ„æºéƒ½è¦åšå¥½"æµ…è‰²/æš—é»‘"åŒç‰ˆæœ¬å‡†å¤‡ï¼Œå°¤å…¶æ˜¯é¢œè‰²å’Œå›¾æ ‡ï¼›</li>
<li>åˆ‡æ¢ä¸»é¢˜æ—¶è¦å¤„ç†å¥½Activityé‡å»ºå’ŒçŠ¶æ€ä¿å­˜ï¼Œé¿å…é—ªå±å’Œæ•°æ®ä¸¢å¤±ï¼›</li>
<li>ä¸€å®šè¦æµ‹è¯•ç‰¹æ®Šåœºæ™¯ï¼ˆå¯åŠ¨é¡µã€WebViewã€é€šçŸ¥ã€Widgetï¼‰ï¼Œé¿å…å‡ºç°"è§†è§‰å¼‚ç±»"ã€‚</li>
</ul>
<p>åšå¥½æš—é»‘æ¨¡å¼é€‚é…ï¼Œä¸ä»…èƒ½æå‡ç”¨æˆ·ä½“éªŒï¼Œè¿˜èƒ½ä½“ç°å¼€å‘è€…çš„ç»†èŠ‚æŠŠæ§èƒ½åŠ›ã€‚å¸Œæœ›è¿™ç¯‡å…¨æ”»ç•¥èƒ½å¸®ä½ é¡ºåˆ©æå®šé€‚é…å·¥ä½œï¼Œè®©ä½ çš„åº”ç”¨åœ¨æ·±å¤œä¹Ÿèƒ½ç»™ç”¨æˆ·å¸¦æ¥èˆ’é€‚çš„ä½¿ç”¨ä½“éªŒï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Swift æ–°å¹¶å‘æ¡†æ¶ä¹‹ async/await]]></title>    <link>https://juejin.cn/post/7587349016221810729</link>    <guid>https://juejin.cn/post/7587349016221810729</guid>    <pubDate>2025-12-25T02:26:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587349016221810729" data-draft-id="7587368168621834246" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swift æ–°å¹¶å‘æ¡†æ¶ä¹‹ async/await"/> <meta itemprop="keywords" content="iOS"/> <meta itemprop="datePublished" content="2025-12-25T02:26:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çš‡ä¸Šo_O"/> <meta itemprop="url" content="https://juejin.cn/user/4177799913409303"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swift æ–°å¹¶å‘æ¡†æ¶ä¹‹ async/await
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4177799913409303/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çš‡ä¸Šo_O
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T02:26:46.000Z" title="Thu Dec 25 2025 02:26:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. ä¸ºä»€ä¹ˆéœ€è¦ async/await</h2>
<p>åœ¨ç§»åŠ¨å¼€å‘é‡Œï¼Œâ€œå¹¶å‘/å¼‚æ­¥â€å‡ ä¹æ— å¤„ä¸åœ¨ï¼šç½‘ç»œè¯·æ±‚ã€å›¾ç‰‡ä¸‹è½½ã€æ–‡ä»¶è¯»å†™ã€æ•°æ®åº“æ“ä½œâ€¦â€¦å®ƒä»¬éƒ½æœ‰ä¸€ä¸ªå…±åŒç‰¹ç‚¹ï¼š</p>
<ul>
<li><strong>è€—æ—¶</strong>ï¼ˆå¦‚æœä½ åœ¨ä¸»çº¿ç¨‹é‡Œæ­»ç­‰ï¼Œä¼šå¡ UIï¼‰</li>
<li><strong>ç»“æœç¨åæ‰å›æ¥</strong>ï¼ˆä½ å¿…é¡»ç”¨æŸç§æ–¹å¼â€œæ‹¿åˆ°ç»“æœâ€ï¼‰</li>
</ul>
<p>ä¼ ç»Ÿçš„å¹¶å‘æ¨¡å‹å¤§å¤šæ˜¯â€œå›è°ƒå¼â€çš„ï¼šç”¨ <code>completion</code>ã€delegateã€é€šçŸ¥ç­‰åœ¨æœªæ¥æŸä¸ªæ—¶é—´ç‚¹æŠŠç»“æœäº¤è¿˜ç»™ä½ ã€‚
è¿™å¥—æ–¹æ¡ˆèƒ½è·‘ï¼Œä½†ä¼šå¸¦æ¥ä¸¤ä¸ªå…¸å‹æŒ‘æˆ˜ï¼ˆä½ å‚è€ƒèµ„æ–™é‡Œä¹Ÿç‚¹å‡ºæ¥äº†ï¼‰ï¼š</p>
<ol>
<li><strong>ä»£ç ç»´æŠ¤æ€§å·®</strong>ï¼šå¼‚æ­¥å›è°ƒè®©ä»£ç é˜…è¯»â€œè·³æ¥è·³å»â€ï¼Œä¸çº¿æ€§</li>
<li><strong>å®¹æ˜“å‡ºç°æ•°æ®ç«äº‰ï¼ˆData Racesï¼‰</strong>ï¼šå…±äº«å¯å˜çŠ¶æ€åœ¨å¹¶å‘ä¸‹å¾ˆå®¹æ˜“å‡º Bugï¼Œè€Œä¸”éš¾å¤ç°ã€éš¾æ’æŸ¥</li>
</ol>
<p>Swift ä» <strong>5.5</strong> å¼€å§‹å¼•å…¥æ–°å¹¶å‘æ¡†æ¶ï¼Œ<code>async/await</code> å…ˆè§£å†³ç¬¬ä¸€ä¸ªæ ¸å¿ƒç—›ç‚¹ï¼š<strong>è®©å¼‚æ­¥ä»£ç çœ‹èµ·æ¥åƒåŒæ­¥ä»£ç ä¸€æ ·é¡ºç•…</strong>ï¼Œå¹¶ä¸”æŠŠé”™è¯¯å¤„ç†å˜å¾—æ›´è‡ªç„¶ã€‚</p>
<hr/>
<h2 data-id="heading-1">2. å…ˆå¤ä¹  4 ä¸ªåŸºç¡€æ¦‚å¿µ</h2>
<h3 data-id="heading-2">2.1 åŒæ­¥ vs å¼‚æ­¥ï¼ˆæè¿°â€œå‡½æ•°æ€ä¹ˆè¿”å›â€ï¼‰</h3>
<ul>
<li><strong>åŒæ­¥ï¼ˆSynchronousï¼‰</strong>ï¼šå‡½æ•°æ‰§è¡Œå®Œæ‰è¿”å›
ä¾‹å­ï¼š<code>let x = add(1, 2)</code>ï¼Œæ‹¿åˆ°ç»“æœæ‰èƒ½å¾€ä¸‹èµ°</li>
<li><strong>å¼‚æ­¥ï¼ˆAsynchronousï¼‰</strong>ï¼šå‡½æ•°æŠŠä»»åŠ¡â€œä¸¢å‡ºå»â€ï¼Œ<strong>ç»“æœä»¥åå†ç»™ä½ </strong>
æ‰€ä»¥ä½ å¿…é¡»ç”¨ <code>completion</code> / delegate / async/await ç­‰æ–¹å¼æ‹¿ç»“æœ</li>
</ul>
<h3 data-id="heading-3">2.2 ä¸²è¡Œ vs å¹¶è¡Œ/å¹¶å‘ï¼ˆæè¿°â€œä¸€ç»„ä»»åŠ¡æ€ä¹ˆè·‘â€ï¼‰</h3>
<ul>
<li><strong>ä¸²è¡Œï¼ˆSerialï¼‰</strong>ï¼šä¸€æ¬¡åªæ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œå®Œæˆä¸€ä¸ªå†ä¸‹ä¸€ä¸ª</li>
<li><strong>å¹¶å‘/å¹¶è¡Œï¼ˆConcurrent/Parallelï¼‰</strong>ï¼šåŒä¸€æ®µæ—¶é—´å†…å¯èƒ½æ‰§è¡Œå¤šä¸ªä»»åŠ¡
ï¼ˆæœ¬æ–‡ä¸ä¸¥æ ¼åŒºåˆ†å¹¶å‘ä¸å¹¶è¡Œï¼›ä½ åªè¦çŸ¥é“ï¼šä¼šâ€œåŒæ—¶å¤„ç†å¤šä¸ªä»»åŠ¡â€å°±è¡Œï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-4">3. å›è°ƒå¼å¼‚æ­¥çš„å…¸å‹ç—›ç‚¹ï¼šå›è°ƒåœ°ç‹± + é”™è¯¯å¤„ç†éš¾çœ‹</h2>
<p>ç”¨â€œå¤´åƒåŠ è½½â€æ¥è¯´æ˜ï¼š
æ­¥éª¤ï¼šæ‹¿ URL â†’ ä¸‹è½½æ•°æ®ï¼ˆåŠ å¯†ï¼‰â†’ è§£å¯† â†’ è§£ç æˆå›¾ç‰‡</p>
<h3 data-id="heading-5">3.1 å›è°ƒåœ°ç‹±ï¼ˆCallback Hellï¼‰</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AvatarLoader</span> {
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">loadAvatar</span>(<span class="hljs-params">token</span>: <span class="hljs-type">String</span>, <span class="hljs-params">completion</span>: <span class="hljs-keyword">@escaping</span> (<span class="hljs-type">UIImage</span>) -&gt; <span class="hljs-type">Void</span>) {
        fetchAvatarURL(token: token) { url <span class="hljs-keyword">in</span>
            <span class="hljs-keyword">self</span>.fetchAvatar(url: url) { data <span class="hljs-keyword">in</span>
                <span class="hljs-keyword">self</span>.decryptAvatar(data: data) { data <span class="hljs-keyword">in</span>
                    <span class="hljs-keyword">self</span>.decodeImage(data: data) { image <span class="hljs-keyword">in</span>
                        completion(image)
                    }
                }
            }
        }
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchAvatarURL</span>(<span class="hljs-params">token</span>: <span class="hljs-type">String</span>, <span class="hljs-params">completion</span>: <span class="hljs-keyword">@escaping</span> (<span class="hljs-type">String</span>) -&gt; <span class="hljs-type">Void</span>) { <span class="hljs-comment">/* ... */</span> }
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchAvatar</span>(<span class="hljs-params">url</span>: <span class="hljs-type">String</span>, <span class="hljs-params">completion</span>: <span class="hljs-keyword">@escaping</span> (<span class="hljs-type">Data</span>) -&gt; <span class="hljs-type">Void</span>) { <span class="hljs-comment">/* ... */</span> }
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">decryptAvatar</span>(<span class="hljs-params">data</span>: <span class="hljs-type">Data</span>, <span class="hljs-params">completion</span>: <span class="hljs-keyword">@escaping</span> (<span class="hljs-type">Data</span>) -&gt; <span class="hljs-type">Void</span>) { <span class="hljs-comment">/* ... */</span> }
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">decodeImage</span>(<span class="hljs-params">data</span>: <span class="hljs-type">Data</span>, <span class="hljs-params">completion</span>: <span class="hljs-keyword">@escaping</span> (<span class="hljs-type">UIImage</span>) -&gt; <span class="hljs-type">Void</span>) { <span class="hljs-comment">/* ... */</span> }
}
</code></pre>
<p>é˜…è¯»ä½“éªŒåƒåœ¨â€œèµ°è¿·å®«â€ï¼šä½ è¦ä¸åœåœ°è¿›å›è°ƒã€å‡ºå›è°ƒï¼Œè„‘å­è¦åŒæ—¶è®°ä½å¾ˆå¤šä¸Šä¸‹æ–‡ã€‚</p>
<h3 data-id="heading-6">3.2 é”™è¯¯å¤„ç†ä¼šè®©ä»£ç æ›´ç³Ÿ</h3>
<p>å¼‚æ­¥å›è°ƒå¸¸è§çš„å†™æ³•æ˜¯ <code>completion(value, error)</code> æˆ–è€… <code>Result</code>ã€‚
ä½†åœ¨å¤šå±‚åµŒå¥—é‡Œï¼Œé”™è¯¯ä¼ é€’ä¼šè¶Šæ¥è¶Šå•°å—¦ï¼Œæ¼æ‰æŸä¸ªåˆ†æ”¯çš„ <code>completion</code> ä¹Ÿå¾ˆå¸¸è§ã€‚</p>
<hr/>
<h2 data-id="heading-7">4. async/await çš„æ ¸å¿ƒï¼šæŠŠâ€œå¼‚æ­¥ä»£ç â€å†™æˆâ€œçº¿æ€§ä»£ç â€</h2>
<h3 data-id="heading-8">4.1 å…ˆçœ‹æ•ˆæœï¼šä¸€çœ¼å°±èƒ½è¯»æ‡‚</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AvatarLoader</span> {
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">loadAvatar</span>(<span class="hljs-params">token</span>: <span class="hljs-type">String</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">UIImage</span> {
        <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> fetchAvatarURL(token: token)
        <span class="hljs-keyword">let</span> encryptedData <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> fetchAvatar(url: url)
        <span class="hljs-keyword">let</span> decryptedData <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> decryptAvatar(data: encryptedData)
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> decodeImage(data: decryptedData)
    }

    <span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchAvatarURL</span>(<span class="hljs-params">token</span>: <span class="hljs-type">String</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">String</span> { <span class="hljs-comment">/* ... */</span> }
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchAvatar</span>(<span class="hljs-params">url</span>: <span class="hljs-type">String</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">Data</span> { <span class="hljs-comment">/* ... */</span> }
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">decryptAvatar</span>(<span class="hljs-params">data</span>: <span class="hljs-type">Data</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">Data</span> { <span class="hljs-comment">/* ... */</span> }
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">decodeImage</span>(<span class="hljs-params">data</span>: <span class="hljs-type">Data</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">UIImage</span> { <span class="hljs-comment">/* ... */</span> }
}
</code></pre>
<p>ä½ ä¼šå‘ç°ï¼š</p>
<ul>
<li>ä»£ç åƒåŒæ­¥ä¸€æ ·ä»ä¸Šåˆ°ä¸‹æ‰§è¡Œï¼ˆâ€œç›´çº¿å¼â€ï¼‰</li>
<li>é”™è¯¯å¤„ç†å›åˆ°äº†ç†Ÿæ‚‰çš„ <code>throws + try + do/catch</code></li>
<li>é€»è¾‘æ¸…æ™°ã€å¯ç»´æŠ¤æ€§å¤§å¹…æå‡</li>
</ul>
<hr/>
<h2 data-id="heading-9">5. è¯­æ³•è§„åˆ™ï¼šä½ åªéœ€è¦æŒæ¡è¿™ 3 æ¡</h2>
<h3 data-id="heading-10">5.1 <code>async</code>ï¼šå£°æ˜â€œè¿™ä¸ªå‡½æ•°å¯èƒ½ä¼šæŒ‚èµ·â€</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">func</span> <span class="hljs-title function_">fetch</span>() <span class="hljs-keyword">async</span> -&gt; <span class="hljs-type">Int</span> { <span class="hljs-number">42</span> }
</code></pre>
<p>å«ä¹‰ï¼šå®ƒæ˜¯â€œå¼‚æ­¥å‡½æ•°â€ï¼Œæ‰§è¡Œè¿‡ç¨‹ä¸­<strong>å¯èƒ½æš‚åœ</strong>ï¼ˆæŒ‚èµ·ï¼‰ï¼Œç­‰å¾…æŸäº›äº‹æƒ…å®Œæˆï¼ˆæ¯”å¦‚ç½‘ç»œè¿”å›ã€IO å®Œæˆï¼‰ã€‚</p>
<h3 data-id="heading-11">5.2 <code>await</code>ï¼šè°ƒç”¨ async å‡½æ•°æ—¶å¿…é¡»å†™</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> value <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> fetch()
</code></pre>
<p><code>await</code> è¡¨ç¤ºï¼šè¿™é‡Œæ˜¯ä¸€ä¸ª<strong>æ½œåœ¨æŒ‚èµ·ç‚¹</strong>ï¼ˆpotential suspension pointï¼‰ã€‚
æ„æ€æ˜¯ï¼šè¿è¡Œåˆ°è¿™é‡Œï¼Œå¯èƒ½ä¼šâ€œå…ˆåœä¸€ä¸‹â€ï¼Œç­‰ç»“æœå‡†å¤‡å¥½å†ç»§ç»­å¾€ä¸‹èµ°ã€‚</p>
<h3 data-id="heading-12">5.3 <code>await</code> åªèƒ½å‡ºç°åœ¨â€œå¼‚æ­¥ä¸Šä¸‹æ–‡â€é‡Œ</h3>
<p>å¼‚æ­¥ä¸Šä¸‹æ–‡ä¸»è¦æœ‰ä¸¤ç±»ï¼š</p>
<ol>
<li><strong>async å‡½æ•°ä½“å†…éƒ¨</strong></li>
<li><strong>Task é—­åŒ…å†…éƒ¨</strong></li>
</ol>
<hr/>
<h2 data-id="heading-13">6. ä¸€ä¸ªå…³é”®è®¤çŸ¥ï¼šæŒ‚èµ·çš„æ˜¯â€œå‡½æ•°â€ï¼Œä¸æ˜¯â€œçº¿ç¨‹â€</h2>
<p>è¿™æ˜¯å¾ˆå¤šæ–°æ‰‹æœ€å®¹æ˜“è¯¯è§£çš„åœ°æ–¹ï¼š</p>
<ul>
<li><code>await</code> <strong>ä¸æ˜¯</strong>â€œæŠŠå½“å‰çº¿ç¨‹å¡ä½ç­‰å¾…â€</li>
<li>å®ƒæ˜¯â€œæŠŠå½“å‰å‡½æ•°æŒ‚èµ·â€ï¼Œè®©å‡ºæ‰§è¡Œæƒ</li>
<li>ç­‰æ¡ä»¶æ»¡è¶³åï¼Œå†æ¢å¤æ‰§è¡Œï¼ˆæ¢å¤æ—¶<strong>å¯èƒ½æ¢äº†çº¿ç¨‹</strong>ï¼‰</li>
</ul>
<p>ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆï¼š</p>
<blockquote>
<p>ä½ åœ¨æ’é˜Ÿå–å·ï¼ˆawaitï¼‰ï¼Œä½ äººå¯ä»¥å…ˆç¦»å¼€å»åšåˆ«çš„ï¼ˆçº¿ç¨‹å»æ‰§è¡Œåˆ«çš„ä»»åŠ¡ï¼‰ï¼Œç­‰å«åˆ°ä½ å·äº†ä½ å†å›æ¥ç»§ç»­åŠç†ï¼ˆå‡½æ•°æ¢å¤æ‰§è¡Œï¼‰ã€‚</p>
</blockquote>
<p><strong>ç»“è®º</strong>ï¼šåœ¨ async/await çš„ä¸–ç•Œé‡Œï¼Œåˆ«å¼ºä¾èµ–â€œæˆ‘ç°åœ¨ä¸€å®šåœ¨æŸä¸ªçº¿ç¨‹ä¸Šâ€ã€‚</p>
<hr/>
<h2 data-id="heading-14">7. ä¸ºä»€ä¹ˆâ€œé” + awaitâ€å®¹æ˜“å‡ºäº‹ï¼šä¸€ä¸ªç»å…¸å‘</h2>
<p>ä¸€ä¸ªå¾ˆå…¸å‹çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> lock <span class="hljs-operator">=</span> <span class="hljs-type">NSLock</span>()

<span class="hljs-keyword">func</span> <span class="hljs-title function_">test</span>() <span class="hljs-keyword">async</span> {
    lock.lock()
    <span class="hljs-keyword">try?</span> <span class="hljs-keyword">await</span> <span class="hljs-type">Task</span>.sleep(nanoseconds: <span class="hljs-number">1_000_000_000</span>)
    lock.unlock()
}

<span class="hljs-keyword">for</span> <span class="hljs-keyword">_</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span><span class="hljs-operator">..&lt;</span><span class="hljs-number">10</span> {
    <span class="hljs-type">Task</span> { <span class="hljs-keyword">await</span> test() }
}
</code></pre>
<p>é—®é¢˜åœ¨å“ªé‡Œï¼Ÿ</p>
<ul>
<li>åœ¨ <code>lock.lock()</code> åé‡åˆ°äº† <code>await</code></li>
<li>å‡½æ•°å¯èƒ½æŒ‚èµ·å¹¶å‘ç”Ÿçº¿ç¨‹åˆ‡æ¢</li>
<li>å…¶ä»–ä»»åŠ¡ä¹Ÿæƒ³æ‹¿é”ï¼Œä½†é”å¯èƒ½è¢«â€œæ‹¿ç€ä¸æ”¾â€</li>
<li>ç»“æœå°±æ˜¯ï¼šå¾ˆå®¹æ˜“å‡ºç°<strong>æ­»é”/é¥¥é¥¿</strong>ç­‰éš¾æ’æŸ¥é—®é¢˜</li>
</ul>
<p><strong>ç»éªŒæ³•åˆ™ï¼š</strong></p>
<blockquote>
<p>ä¸è¦åœ¨æŒæœ‰é”çš„æœŸé—´è·¨è¿‡ <code>await</code>ã€‚
å¦‚æœä½ éœ€è¦ä¿æŠ¤å…±äº«å¯å˜çŠ¶æ€ï¼Œä¼˜å…ˆè€ƒè™‘ <code>actor</code>æˆ–è®©çŠ¶æ€åªåœ¨å•ä¸€æ‰§è¡Œä¸Šä¸‹æ–‡é‡Œä¿®æ”¹ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-15">8. çœŸæ­£èƒ½ä¸Šæ‰‹çš„ä»£ç ï¼šç”¨ URLSession å†™ä¸€ä¸ª async ç½‘ç»œè¯·æ±‚</h2>
<p>iOS 15+ï¼ˆSwift 5.5+ï¼‰å¼€å§‹ï¼Œ<code>URLSession</code> å·²ç»æä¾›äº† async APIï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> (data, response) <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> <span class="hljs-type">URLSession</span>.shared.data(from: url)
</code></pre>
<p>æˆ‘ä»¬åšä¸€ä¸ªâ€œè·å–ç”¨æˆ·ä¿¡æ¯â€çš„ç¤ºä¾‹ï¼ˆåŒ…å«é”™è¯¯å¤„ç†ï¼‰ï¼š</p>
<h3 data-id="heading-16">8.1 å®šä¹‰æ¨¡å‹ä¸é”™è¯¯</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> Foundation

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">User</span>: <span class="hljs-title class_">Decodable</span> {
    <span class="hljs-keyword">let</span> id: <span class="hljs-type">Int</span>
    <span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span>
}

<span class="hljs-keyword">enum</span> <span class="hljs-title class_">NetworkError</span>: <span class="hljs-title class_">Error</span> {
    <span class="hljs-keyword">case</span> invalidURL
    <span class="hljs-keyword">case</span> invalidResponse
    <span class="hljs-keyword">case</span> httpStatus(<span class="hljs-type">Int</span>)
}
</code></pre>
<h3 data-id="heading-17">8.2 å†™ä¸€ä¸ª async ç½‘ç»œå±‚</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">APIClient</span> {
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchUser</span>(<span class="hljs-params">id</span>: <span class="hljs-type">Int</span>) <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">User</span> {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-string">"https://example.com/users/<span class="hljs-subst">\(id)</span>"</span>) <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-type">NetworkError</span>.invalidURL
        }

        <span class="hljs-keyword">let</span> (data, response) <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> <span class="hljs-type">URLSession</span>.shared.data(from: url)

        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> http <span class="hljs-operator">=</span> response <span class="hljs-keyword">as?</span> <span class="hljs-type">HTTPURLResponse</span> <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-type">NetworkError</span>.invalidResponse
        }
        <span class="hljs-keyword">guard</span> (<span class="hljs-number">200</span><span class="hljs-operator">...</span><span class="hljs-number">299</span>).contains(http.statusCode) <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-type">NetworkError</span>.httpStatus(http.statusCode)
        }

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> <span class="hljs-type">JSONDecoder</span>().decode(<span class="hljs-type">User</span>.<span class="hljs-keyword">self</span>, from: data)
    }
}
</code></pre>
<p>è¿™ä¸€æ®µä»£ç çš„é˜…è¯»ä½“éªŒå°±æ˜¯â€œåŒæ­¥å¼â€çš„ï¼šæ„å»º URL â†’ await æ‹¿æ•°æ® â†’ æ ¡éªŒ â†’ decodeã€‚</p>
<hr/>
<h2 data-id="heading-18">9. åœ¨ UIViewController é‡Œæ€ä¹ˆè°ƒç”¨ async å¹¶æ›´æ–° UIï¼Ÿ</h2>
<p>è¿™æ˜¯ iOS å¼€å‘é‡Œæœ€å¸¸è§çš„è½åœ°é—®é¢˜ï¼š</p>
<blockquote>
<p>async æ–¹æ³•ä¸èƒ½ç›´æ¥åœ¨æ™®é€šå‡½æ•°é‡Œ <code>await</code>ï¼Œé‚£æˆ‘æ€ä¹ˆä»æŒ‰é’®ç‚¹å‡»é‡Œå‘è¯·æ±‚ï¼Ÿ</p>
</blockquote>
<p>ç­”æ¡ˆï¼šç”¨ <code>Task { }</code> æŠŠå®ƒæ”¾è¿›å¼‚æ­¥ä¸Šä¸‹æ–‡é‡Œã€‚</p>
<h3 data-id="heading-19">9.1 ç¤ºä¾‹ï¼šç‚¹å‡»æŒ‰é’®åŠ è½½ç”¨æˆ·å¹¶åˆ·æ–° label</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> UIKit

<span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserViewController</span>: <span class="hljs-title class_">UIViewController</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> api <span class="hljs-operator">=</span> <span class="hljs-type">APIClient</span>()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> label <span class="hljs-operator">=</span> <span class="hljs-type">UILabel</span>()

    <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {
        <span class="hljs-keyword">super</span>.viewDidLoad()
        view.backgroundColor <span class="hljs-operator">=</span> .white

        label.numberOfLines <span class="hljs-operator">=</span> <span class="hljs-number">0</span>
        label.frame <span class="hljs-operator">=</span> <span class="hljs-type">CGRect</span>(x: <span class="hljs-number">20</span>, y: <span class="hljs-number">100</span>, width: <span class="hljs-number">320</span>, height: <span class="hljs-number">200</span>)
        view.addSubview(label)

        loadUser()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">loadUser</span>() {
        <span class="hljs-comment">// è¿›å…¥å¼‚æ­¥ä¸Šä¸‹æ–‡</span>
        <span class="hljs-type">Task</span> { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] <span class="hljs-keyword">in</span>
            <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword">self</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }

            <span class="hljs-keyword">do</span> {
                <span class="hljs-keyword">let</span> user <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> api.fetchUser(id: <span class="hljs-number">1</span>)

                <span class="hljs-comment">// æ›´æ–° UIï¼šå›åˆ°ä¸»çº¿ç¨‹ï¼ˆMainActorï¼‰</span>
                <span class="hljs-keyword">await</span> <span class="hljs-type">MainActor</span>.run {
                    <span class="hljs-keyword">self</span>.label.text <span class="hljs-operator">=</span> <span class="hljs-string">"ç”¨æˆ·ï¼š<span class="hljs-subst">\(user.name)</span><span class="hljs-subst">\n</span>IDï¼š<span class="hljs-subst">\(user.id)</span>"</span>
                }

            } <span class="hljs-keyword">catch</span> {
                <span class="hljs-keyword">await</span> <span class="hljs-type">MainActor</span>.run {
                    <span class="hljs-keyword">self</span>.label.text <span class="hljs-operator">=</span> <span class="hljs-string">"åŠ è½½å¤±è´¥ï¼š<span class="hljs-subst">\(error)</span>"</span>
                }
            }
        }
    }
}
</code></pre>
<p>ä½ åªè¦è®°ä½ä¸€å¥è¯å°±å¤Ÿäº†ï¼š</p>
<ul>
<li><strong>è€—æ—¶å·¥ä½œ</strong>æ”¾åœ¨ <code>Task</code> é‡Œ <code>await</code></li>
<li><strong>UI æ›´æ–°</strong>æ”¾åœ¨ <code>MainActor</code>ï¼ˆä¸»çº¿ç¨‹è¯­ä¹‰ï¼‰é‡Œåš</li>
</ul>
<hr/>
<h2 data-id="heading-20">10. ä»æ—§ä»£ç è¿ç§»ï¼šæŠŠ completion å›è°ƒåŒ…è£…æˆ async</h2>
<p>å¾ˆå¤šé¡¹ç›®é‡Œå·²ç»æœ‰å¤§é‡å›è°ƒå¼ APIï¼Œä½ ä¸å¯èƒ½ä¸€å¤œä¹‹é—´å…¨æ”¹æ‰ã€‚Swift æä¾›äº†â€œç»­ä½“ï¼ˆContinuationï¼‰â€åšæ¡¥æ¥ã€‚</p>
<h3 data-id="heading-21">10.1 å‡è®¾ä½ æœ‰æ—§æ¥å£</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LegacyService</span> {
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchText</span>(<span class="hljs-params">completion</span>: <span class="hljs-keyword">@escaping</span> (<span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>, <span class="hljs-type">Error</span>&gt;) -&gt; <span class="hljs-type">Void</span>) {
        <span class="hljs-type">DispatchQueue</span>.global().asyncAfter(deadline: .now() <span class="hljs-operator">+</span> <span class="hljs-number">1</span>) {
            completion(.success(<span class="hljs-string">"hello async/await"</span>))
        }
    }
}
</code></pre>
<h3 data-id="heading-22">10.2 ç”¨ withCheckedThrowingContinuation åŒ…è£…</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">extension</span> <span class="hljs-title class_">LegacyService</span> {
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchText</span>() <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> -&gt; <span class="hljs-type">String</span> {
        <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> withCheckedThrowingContinuation { continuation <span class="hljs-keyword">in</span>
            fetchText { result <span class="hljs-keyword">in</span>
                <span class="hljs-keyword">switch</span> result {
                <span class="hljs-keyword">case</span> .success(<span class="hljs-keyword">let</span> text):
                    continuation.resume(returning: text)
                <span class="hljs-keyword">case</span> .failure(<span class="hljs-keyword">let</span> error):
                    continuation.resume(throwing: error)
                }
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-23">10.3 ä½¿ç”¨æ–¹å¼</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-type">Task</span> {
    <span class="hljs-keyword">do</span> {
        <span class="hljs-keyword">let</span> text <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> <span class="hljs-type">LegacyService</span>().fetchText()
        <span class="hljs-built_in">print</span>(text)
    } <span class="hljs-keyword">catch</span> {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"error:"</span>, error)
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-24">11. å…¥é—¨é˜¶æ®µçš„æœ€ä½³å®è·µæ¸…å•</h2>
<ol>
<li><strong>ä¸è¦åœ¨æŒé”æœŸé—´è·¨ <code>await</code></strong>ï¼ˆå®¹æ˜“æ­»é”/é€»è¾‘å¡ä½ï¼‰</li>
<li><strong>UI æ›´æ–°ç»Ÿä¸€å›åˆ° <code>MainActor</code></strong>ï¼ˆé¿å…ä¸»çº¿ç¨‹é—®é¢˜ï¼‰</li>
<li><strong>èƒ½ç”¨ <code>throws</code> å°±åˆ«ç”¨ Optional+error ä¹±ä¼ </strong>ï¼šé”™è¯¯è·¯å¾„æ›´æ¸…æ™°</li>
<li><strong>ä»å…¥å£å¤„å°±ç»“æ„åŒ–</strong>ï¼š<code>async</code> å‡½æ•°è°ƒç”¨ <code>async</code> å‡½æ•°ï¼Œåˆ«å±‚å±‚å›è°ƒ</li>
<li><strong>è¿ç§»æ—§ä»£ç ç”¨ Continuation</strong>ï¼šé€æ­¥æ”¹ï¼Œä¸è¦ä¸€æ¬¡æ€§é‡æ„åˆ°å´©</li>
</ol>
<hr/>
<h2 data-id="heading-25">12. å°ç»“</h2>
<p>åˆ°è¿™é‡Œï¼Œä½ å·²ç»å…·å¤‡äº† async/await çš„â€œå¯ç”¨çº§ç†è§£â€ï¼š</p>
<ul>
<li><code>async</code>ï¼šè¿™ä¸ªå‡½æ•°å¯èƒ½æŒ‚èµ·</li>
<li><code>await</code>ï¼šæ½œåœ¨æŒ‚èµ·ç‚¹ï¼Œåªèƒ½åœ¨å¼‚æ­¥ä¸Šä¸‹æ–‡ä½¿ç”¨</li>
<li>async/await è®©å¼‚æ­¥ä»£ç â€œçº¿æ€§å¯è¯»â€ï¼Œé”™è¯¯å¤„ç†å›åˆ° <code>throws</code></li>
<li>æŒ‚èµ·çš„æ˜¯å‡½æ•°ï¼Œä¸æ˜¯çº¿ç¨‹ï¼›<code>await</code> å‰åå¯èƒ½æ¢çº¿ç¨‹</li>
<li>iOS é‡Œç”¨ <code>Task {}</code> è¿›å…¥å¼‚æ­¥ä¸Šä¸‹æ–‡ï¼Œç”¨ <code>MainActor</code> æ›´æ–° UI</li>
<li>æ—§å›è°ƒæ¥å£å¯ä»¥ç”¨ <code>withCheckedThrowingContinuation</code> å¹³æ»‘è¿ç§»</li>
</ul>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Nextcloud Docker å®¹å™¨åŒ–éƒ¨ç½²æŒ‡å—]]></title>    <link>https://juejin.cn/post/7587299670642704390</link>    <guid>https://juejin.cn/post/7587299670642704390</guid>    <pubDate>2025-12-25T02:06:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587299670642704390" data-draft-id="7587329107303415871" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Nextcloud Docker å®¹å™¨åŒ–éƒ¨ç½²æŒ‡å—"/> <meta itemprop="keywords" content="Docker,æ•°æ®å¯è§†åŒ–,æ•°æ®åˆ†æ"/> <meta itemprop="datePublished" content="2025-12-25T02:06:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜è€èµµ"/> <meta itemprop="url" content="https://juejin.cn/user/3208848015890347"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Nextcloud Docker å®¹å™¨åŒ–éƒ¨ç½²æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3208848015890347/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜è€èµµ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T02:06:29.000Z" title="Thu Dec 25 2025 02:06:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">æ¦‚è¿°</h3>
<p>Nextcloud æ˜¯ä¸€æ¬¾å¼€æºçš„å®¹å™¨åŒ–åº”ç”¨ï¼Œä¸ºç”¨æˆ·æä¾›å®‰å…¨çš„æ•°æ®å­˜å‚¨ä¸ç®¡ç†è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒæ–‡ä»¶è®¿é—®ä¸å…±äº«ã€æ—¥å†ã€è”ç³»äººã€é‚®ä»¶ç­‰å¤šç§åŠŸèƒ½ï¼Œå¯ä»ä»»ä½•è®¾å¤‡è®¿é—®ï¼Œå®Œå…¨ç”±ç”¨æˆ·è‡ªä¸»æŒæ§ã€‚è¯¥Dockeré•œåƒç”±Nextcloudç¤¾åŒºå¼€å‘ç»´æŠ¤ï¼Œæ—¨åœ¨æä¾›è½»é‡çº§ã€å¯æ‰©å±•çš„éƒ¨ç½²æ–¹å¼ã€‚</p>
<p>æœ¬æ–‡æ¡£å°†è¯¦ç»†ä»‹ç»å¦‚ä½•é€šè¿‡Dockerå®¹å™¨åŒ–æ–¹å¼éƒ¨ç½² Nextcloud ï¼ŒåŒ…æ‹¬ç¯å¢ƒå‡†å¤‡ã€é•œåƒæ‹‰å–ã€å®¹å™¨é…ç½®ã€åŠŸèƒ½æµ‹è¯•åŠç”Ÿäº§ç¯å¢ƒä¼˜åŒ–å»ºè®®ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿæ­å»ºç¨³å®šå¯é çš„NEXTCLOUDæœåŠ¡ã€‚</p>
<h3 data-id="heading-1">ç¯å¢ƒå‡†å¤‡</h3>
<h4 data-id="heading-2">Dockerç¯å¢ƒå®‰è£…</h4>
<p>éƒ¨ç½² Nextcloud å®¹å™¨å‰ï¼Œéœ€å…ˆç¡®ä¿æœåŠ¡å™¨å·²å®‰è£…Dockerç¯å¢ƒã€‚æ¨èä½¿ç”¨ä»¥ä¸‹ä¸€é”®å®‰è£…è„šæœ¬ï¼Œé€‚ç”¨äºä¸»æµLinuxå‘è¡Œç‰ˆï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">bash</span> &lt;(wget -qO- <span class="hljs-attribute">https</span>:<span class="hljs-comment">//xuanyuan.cloud/docker.sh)</span>
</code></pre>
<p>è„šæœ¬æ‰§è¡Œè¿‡ç¨‹ä¸­éœ€æ ¹æ®æç¤ºå®Œæˆå¿…è¦é…ç½®ï¼Œå®‰è£…å®Œæˆåå¯é€šè¿‡<code>docker --version</code>å‘½ä»¤éªŒè¯Dockeræ˜¯å¦æ­£å¸¸å®‰è£…ã€‚</p>
<h3 data-id="heading-3">é•œåƒå‡†å¤‡</h3>
<h4 data-id="heading-4">æ‹‰å– Nextcloud é•œåƒ</h4>
<p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤é€šè¿‡è½©è¾•é•œåƒè®¿é—®æ”¯æŒåœ°å€æ‹‰å–æœ€æ–°ç‰ˆæœ¬çš„ Nextcloud é•œåƒï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">docker pull xxx.xuanyuan.run/library/nextcloud:latest
</code></pre>
<p>å¦‚éœ€æŸ¥çœ‹æ‰€æœ‰å¯ç”¨ç‰ˆæœ¬æ ‡ç­¾ï¼Œå¯è®¿é—® Nextcloud é•œåƒæ ‡ç­¾åˆ—è¡¨ <code>https://xuanyuan.cloud/r/library/nextcloud/tags</code>ã€‚</p>
<h3 data-id="heading-5">å®¹å™¨éƒ¨ç½²</h3>
<h4 data-id="heading-6">åŸºç¡€éƒ¨ç½²ï¼ˆé€‚ç”¨äºæµ‹è¯•ç¯å¢ƒï¼‰</h4>
<p>ä»¥ä¸‹å‘½ä»¤å°†åˆ›å»ºä¸€ä¸ªåŸºç¡€çš„ Nextcloud å®¹å™¨ï¼Œä½¿ç”¨é»˜è®¤é…ç½®å’ŒSQLiteæ•°æ®åº“ï¼Œé€‚åˆå¿«é€Ÿæµ‹è¯•ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">docker run -d \  --name nextcloud \  -p <span class="hljs-number">80</span>:<span class="hljs-number">80</span> \  -v nextcloud_data:/var/www/html \  xxx.xuanyuan.run/library/nextcloud:latest
</code></pre>
<p><strong>å‚æ•°è¯´æ˜</strong>ï¼š</p>
<ul>
<li>â€¢ <code>-d</code>ï¼šåå°è¿è¡Œå®¹å™¨</li>
<li>â€¢ <code>--name nextcloud</code>ï¼šæŒ‡å®šå®¹å™¨åç§°ä¸ºnextcloud</li>
<li>â€¢ <code>-p 80:80</code>ï¼šå°†å®¹å™¨80ç«¯å£æ˜ å°„åˆ°ä¸»æœº80ç«¯å£ï¼ˆç«¯å£é…ç½®è¯·å‚è€ƒ NEXTCLOUDé•œåƒæ–‡æ¡£ï¼ˆè½©è¾•ï¼‰ <code>https://xuanyuan.cloud/r/library/nextcloud</code>ï¼‰</li>
<li>â€¢ <code>-v nextcloud_data:/var/www/html</code>ï¼šåˆ›å»ºå‘½åå·<code>nextcloud_data</code>æŒ‚è½½åˆ°å®¹å™¨å†…<code>/var/www/html</code>ç›®å½•ï¼Œç”¨äºæŒä¹…åŒ–å­˜å‚¨æ•°æ®</li>
</ul>
<h4 data-id="heading-7">è‡ªå®šä¹‰é…ç½®éƒ¨ç½²ï¼ˆé€‚ç”¨äºå¼€å‘ç¯å¢ƒï¼‰</h4>
<p>å¦‚éœ€è‡ªå®šä¹‰ç®¡ç†å‘˜è´¦æˆ·ã€æ•°æ®åº“é…ç½®ç­‰ï¼Œå¯é€šè¿‡ç¯å¢ƒå˜é‡å®ç°è‡ªåŠ¨é…ç½®ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">docker run -d \  --name nextcloud \  -p <span class="hljs-number">80</span>:<span class="hljs-number">80</span> \  -v <span class="hljs-attr">nextcloud_data</span>:<span class="hljs-regexp">/var/</span>www/html \  -v <span class="hljs-attr">nextcloud_config</span>:<span class="hljs-regexp">/var/</span>www/html/config \  -v <span class="hljs-attr">nextcloud_apps</span>:<span class="hljs-regexp">/var/</span>www/html/custom_apps \  -e <span class="hljs-variable constant_">NEXTCLOUD_ADMIN_USER</span>=admin \  -e <span class="hljs-variable constant_">NEXTCLOUD_ADMIN_PASSWORD</span>=your_secure_password \  -e <span class="hljs-variable constant_">NEXTCLOUD_TRUSTED_DOMAINS</span>=<span class="hljs-string">"localhost 192.168.1.100"</span> \  xxx.<span class="hljs-property">xuanyuan</span>.<span class="hljs-property">run</span>/library/<span class="hljs-attr">nextcloud</span>:latest
</code></pre>
<p><strong>æ–°å¢å‚æ•°è¯´æ˜</strong>ï¼š</p>
<ul>
<li>â€¢ é¢å¤–æŒ‚è½½<code>nextcloud_config</code>å’Œ<code>nextcloud_apps</code>å·ï¼Œåˆ†åˆ«ç”¨äºæŒä¹…åŒ–é…ç½®æ–‡ä»¶å’Œè‡ªå®šä¹‰åº”ç”¨</li>
<li>â€¢ <code>NEXTCLOUD_ADMIN_USER</code>ï¼šè®¾ç½®ç®¡ç†å‘˜ç”¨æˆ·å</li>
<li>â€¢ <code>NEXTCLOUD_ADMIN_PASSWORD</code>ï¼šè®¾ç½®ç®¡ç†å‘˜å¯†ç ï¼ˆè¯·æ›¿æ¢ä¸ºå®‰å…¨å¯†ç ï¼‰</li>
<li>â€¢ <code>NEXTCLOUD_TRUSTED_DOMAINS</code>ï¼šè®¾ç½®å¯è®¿é—®NEXTCLOUDçš„å¯ä¿¡åŸŸåï¼Œå¤šä¸ªåŸŸåç”¨ç©ºæ ¼åˆ†éš”</li>
</ul>
<h4 data-id="heading-8">å¤–éƒ¨æ•°æ®åº“éƒ¨ç½²ï¼ˆæ¨èé…ç½®ï¼‰</h4>
<p>NEXTCLOUDé»˜è®¤ä½¿ç”¨SQLiteæ•°æ®åº“ï¼Œé€‚åˆæµ‹è¯•ç¯å¢ƒã€‚ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨MySQL/MariaDBæˆ–PostgreSQLæ•°æ®åº“ä»¥æå‡æ€§èƒ½å’Œå¯é æ€§ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨MariaDBçš„ç¤ºä¾‹ï¼š</p>
<ol>
<li>
<p>1. <strong>å¯åŠ¨MariaDBå®¹å™¨</strong>ï¼š</p>
<p>docker run -d \  --name nextcloud_db \  -v nextcloud_db:/var/lib/mysql \  -e MYSQL_ROOT_PASSWORD=root_password \  -e MYSQL_DATABASE=nextcloud \  -e MYSQL_USER=nextcloud_user \  -e MYSQL_PASSWORD=db_user_password \  mariadb:10.6</p>
</li>
<li>
<p>2. <strong>å¯åŠ¨NEXTCLOUDå®¹å™¨å¹¶è¿æ¥æ•°æ®åº“</strong>ï¼š</p>
<p>docker run -d \  --name nextcloud \  --link nextcloud_db:db \  -p 80:80 \  -v nextcloud_data:/var/www/html \  -e MYSQL_HOST=db \  -e MYSQL_DATABASE=nextcloud \  -e MYSQL_USER=nextcloud_user \  -e MYSQL_PASSWORD=db_user_password \  -e NEXTCLOUD_ADMIN_USER=admin \  -e NEXTCLOUD_ADMIN_PASSWORD=your_secure_password \  xxx.xuanyuan.run/library/nextcloud:latest</p>
</li>
</ol>
<p><strong>è¯´æ˜</strong>ï¼š<code>--link nextcloud_db:db</code>å‚æ•°å°†MariaDBå®¹å™¨é“¾æ¥åˆ°NEXTCLOUDå®¹å™¨ï¼Œä½¿NEXTCLOUDå¯é€šè¿‡<code>db</code>ä¸»æœºåè®¿é—®æ•°æ®åº“ã€‚</p>
<h3 data-id="heading-9">åŠŸèƒ½æµ‹è¯•</h3>
<h4 data-id="heading-10">æœåŠ¡è®¿é—®æµ‹è¯•</h4>
<p>å®¹å™¨å¯åŠ¨åï¼Œå¯é€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œï¼š</p>
<ol>
<li>
<p>1. <strong>æµè§ˆå™¨è®¿é—®</strong>ï¼šåœ¨æµè§ˆå™¨ä¸­è¾“å…¥<code>http://æœåŠ¡å™¨IP</code>ï¼Œé¦–æ¬¡è®¿é—®å°†æ˜¾ç¤ºNEXTCLOUDè®¾ç½®é¡µé¢ï¼ˆå¦‚æœªé€šè¿‡ç¯å¢ƒå˜é‡é¢„è®¾ç®¡ç†å‘˜è´¦æˆ·ï¼‰æˆ–ç›´æ¥è¿›å…¥ç™»å½•ç•Œé¢ã€‚</p>
</li>
<li>
<p>2. <strong>å‘½ä»¤è¡Œè®¿é—®</strong>ï¼šä½¿ç”¨<code>curl</code>å‘½ä»¤æµ‹è¯•ç«¯å£è¿é€šæ€§ï¼š</p>
<p>curl -I <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost" target="_blank" title="http://localhost" ref="nofollow noopener noreferrer">http://localhost</a></p>
</li>
</ol>
<p>è‹¥è¿”å›<code>HTTP/1.1 200 OK</code>æˆ–<code>HTTP/1.1 302 Found</code>ï¼Œè¡¨ç¤ºæœåŠ¡åŸºæœ¬æ­£å¸¸ã€‚</p>
<h4 data-id="heading-11">å®¹å™¨çŠ¶æ€æ£€æŸ¥</h4>
<p>é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å®¹å™¨è¿è¡ŒçŠ¶æ€ï¼š</p>
<pre><code class="hljs language-python" lang="python">docker ps --<span class="hljs-built_in">filter</span> <span class="hljs-string">"name=nextcloud"</span>
</code></pre>
<p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œå®¹å™¨çŠ¶æ€åº”ä¸º<code>Up</code>ã€‚</p>
<h4 data-id="heading-12">æ—¥å¿—æŸ¥çœ‹</h4>
<p>æŸ¥çœ‹å®¹å™¨æ—¥å¿—ä»¥æ’æŸ¥æ½œåœ¨é—®é¢˜ï¼š</p>
<pre><code class="hljs">docker logs nextcloud
</code></pre>
<p>é¦–æ¬¡å¯åŠ¨æ—¶ï¼Œæ—¥å¿—å°†æ˜¾ç¤ºåˆå§‹åŒ–è¿‡ç¨‹ï¼ŒåŒ…æ‹¬æ•°æ®åº“è¿æ¥ã€æ–‡ä»¶æƒé™é…ç½®ç­‰ä¿¡æ¯ã€‚è‹¥å‡ºç°é”™è¯¯ï¼Œå¯æ ¹æ®æ—¥å¿—æç¤ºè¿›è¡Œæ’æŸ¥ã€‚</p>
<h4 data-id="heading-13">åŸºç¡€åŠŸèƒ½æµ‹è¯•</h4>
<ol>
<li>1. <strong>ç™»å½•æµ‹è¯•</strong>ï¼šä½¿ç”¨é¢„è®¾çš„ç®¡ç†å‘˜è´¦æˆ·ç™»å½•ç³»ç»Ÿï¼ŒéªŒè¯è®¤è¯åŠŸèƒ½ã€‚</li>
<li>2. <strong>æ–‡ä»¶ä¸Šä¼ æµ‹è¯•</strong>ï¼šä¸Šä¼ ä¸€ä¸ªå°å‹æµ‹è¯•æ–‡ä»¶ï¼ŒéªŒè¯å­˜å‚¨åŠŸèƒ½æ˜¯å¦æ­£å¸¸ã€‚</li>
<li>3. <strong>åº”ç”¨è®¿é—®æµ‹è¯•</strong>ï¼šè®¿é—®å†…ç½®åº”ç”¨ï¼ˆå¦‚â€œæ–‡ä»¶â€ã€â€œç›¸å†Œâ€ï¼‰ï¼Œç¡®è®¤åº”ç”¨åŠ è½½æ­£å¸¸ã€‚</li>
</ol>
<h3 data-id="heading-14">ç”Ÿäº§ç¯å¢ƒå»ºè®®</h3>
<h4 data-id="heading-15">æ•°æ®æŒä¹…åŒ–ä¼˜åŒ–</h4>
<p>ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå»ºè®®å¯¹NEXTCLOUDçš„æ•°æ®ç›®å½•è¿›è¡Œç²¾ç»†åŒ–æŒ‚è½½ï¼Œç¡®ä¿æ•°æ®å®‰å…¨å’Œå‡çº§å…¼å®¹æ€§ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">docker run -d \  --name nextcloud \  -p <span class="hljs-number">80</span>:<span class="hljs-number">80</span> \  -v <span class="hljs-attr">nextcloud_html</span>:<span class="hljs-regexp">/var/</span>www/html \  -v <span class="hljs-attr">nextcloud_data</span>:<span class="hljs-regexp">/var/</span>www/html/data \  -v <span class="hljs-attr">nextcloud_config</span>:<span class="hljs-regexp">/var/</span>www/html/config \  -v <span class="hljs-attr">nextcloud_apps</span>:<span class="hljs-regexp">/var/</span>www/html/custom_apps \  -v <span class="hljs-attr">nextcloud_themes</span>:<span class="hljs-regexp">/var/</span>www/html/themes \  xxx.<span class="hljs-property">xuanyuan</span>.<span class="hljs-property">run</span>/library/<span class="hljs-attr">nextcloud</span>:latest
</code></pre>
<p><strong>æŒ‚è½½è¯´æ˜</strong>ï¼š</p>
<ul>
<li>â€¢ <code>/var/www/html/data</code>ï¼šç”¨æˆ·ä¸Šä¼ æ–‡ä»¶å­˜å‚¨ç›®å½•</li>
<li>â€¢ <code>/var/www/html/config</code>ï¼šé…ç½®æ–‡ä»¶ç›®å½•</li>
<li>â€¢ <code>/var/www/html/custom_apps</code>ï¼šè‡ªå®šä¹‰åº”ç”¨ç›®å½•</li>
<li>â€¢ <code>/var/www/html/themes</code>ï¼šä¸»é¢˜æ–‡ä»¶ç›®å½•</li>
</ul>
<h4 data-id="heading-16">å®‰å…¨åŠ å›º</h4>
<ol>
<li>
<p>1. <strong>å¯ç”¨HTTPS</strong>ï¼šç”Ÿäº§ç¯å¢ƒå¿…é¡»é…ç½®HTTPSï¼Œå¯é€šè¿‡åå‘ä»£ç†ï¼ˆå¦‚Nginxã€Traefikï¼‰å®ç°ã€‚ç¤ºä¾‹Nginxé…ç½®å¯å‚è€ƒ NEXTCLOUDå®˜æ–¹æ–‡æ¡£ <code>https://docs.nextcloud.com/server/latest/admin_manual/installation/nginx.html</code>ã€‚</p>
</li>
<li>
<p>2. <strong>é™åˆ¶å®¹å™¨æƒé™</strong>ï¼šä½¿ç”¨érootç”¨æˆ·è¿è¡Œå®¹å™¨ï¼Œå‡å°‘å®‰å…¨é£é™©ï¼š</p>
<p>docker run -d \  --name nextcloud \  --user 33:33 \  # www-dataç”¨æˆ·IDå’Œç»„ID  -p 80:80 \  -v nextcloud_data:/var/www/html \  xxx.xuanyuan.run/library/nextcloud:latest</p>
</li>
<li>
<p>3. <strong>è®¾ç½®é˜²ç«å¢™</strong>ï¼šåªå¼€æ”¾å¿…è¦ç«¯å£ï¼ˆå¦‚80/443ï¼‰ï¼Œé™åˆ¶è®¿é—®æ¥æºã€‚</p>
</li>
</ol>
<h4 data-id="heading-17">æ€§èƒ½ä¼˜åŒ–</h4>
<ol>
<li>
<p>1. <strong>ä½¿ç”¨Redisç¼“å­˜</strong>ï¼šé…ç½®Redisç”¨äºæ–‡ä»¶é”å®šå’Œç¼“å­˜ï¼Œæå‡å¹¶å‘æ€§èƒ½ï¼š</p>
<h2 data-id="heading-18">å¯åŠ¨Rediså®¹å™¨docker run -d --name nextcloud_redis redis:alpine# å¯åŠ¨NEXTCLOUDå¹¶é…ç½®Redisdocker run -d \  --name nextcloud \  --link nextcloud_db:db \  --link nextcloud_redis:redis \  -p 80:80 \  -e REDIS_HOST=redis \  -e REDIS_HOST_PASSWORD=your_redis_password \  -v nextcloud_data:/var/www/html \  xxx.xuanyuan.run/library/nextcloud:latest</h2>
</li>
<li>
<p>2. <strong>è°ƒæ•´PHPå‚æ•°</strong>ï¼šæ ¹æ®æœåŠ¡å™¨é…ç½®è°ƒæ•´PHPå†…å­˜é™åˆ¶å’Œä¸Šä¼ é™åˆ¶ï¼š</p>
<p>docker run -d \  --name nextcloud \  -e PHP_MEMORY_LIMIT=1G \  # è°ƒæ•´PHPå†…å­˜é™åˆ¶ä¸º1GB  -e PHP_UPLOAD_LIMIT=10G \  # è°ƒæ•´ä¸Šä¼ é™åˆ¶ä¸º10GB  -v nextcloud_data:/var/www/html \  xxx.xuanyuan.run/library/nextcloud:latest</p>
</li>
<li>
<p>3. <strong>æ•°æ®åº“ä¼˜åŒ–</strong>ï¼šå¯¹MariaDB/MySQLè¿›è¡Œæ€§èƒ½è°ƒä¼˜ï¼Œå¦‚è°ƒæ•´è¿æ¥æ•°ã€ç¼“å­˜å¤§å°ç­‰ï¼Œå…·ä½“é…ç½®å¯å‚è€ƒæ•°æ®åº“å®˜æ–¹æ–‡æ¡£ã€‚</p>
</li>
</ol>
<h4 data-id="heading-19">å¤‡ä»½ç­–ç•¥</h4>
<p>å®šæœŸå¤‡ä»½NEXTCLOUDæ•°æ®å’Œæ•°æ®åº“ï¼Œå»ºè®®ä½¿ç”¨ä»¥ä¸‹ç­–ç•¥ï¼š</p>
<ol>
<li>
<p>1. <strong>æ•°æ®å·å¤‡ä»½</strong>ï¼šä½¿ç”¨<code>docker volume inspect</code>æ‰¾åˆ°å·çš„å®é™…è·¯å¾„ï¼Œç„¶åé€šè¿‡<code>rsync</code>æˆ–<code>tar</code>è¿›è¡Œå¤‡ä»½ã€‚</p>
</li>
<li>
<p>2. <strong>æ•°æ®åº“å¤‡ä»½</strong>ï¼šå¯¹MariaDBå®¹å™¨æ‰§è¡Œæ•°æ®åº“å¯¼å‡ºï¼š</p>
<p>docker exec nextcloud_db mysqldump -u root -p'root_password' nextcloud &gt; nextcloud_db_backup_$(date +%Y%m%d).sql</p>
</li>
<li>
<p>3. <strong>è‡ªåŠ¨åŒ–å¤‡ä»½</strong>ï¼šä½¿ç”¨crontabè®¾ç½®å®šæ—¶ä»»åŠ¡ï¼Œè‡ªåŠ¨æ‰§è¡Œå¤‡ä»½è„šæœ¬ï¼Œå¹¶å°†å¤‡ä»½æ–‡ä»¶å­˜å‚¨åˆ°å¤–éƒ¨å­˜å‚¨æˆ–äº‘å­˜å‚¨æœåŠ¡ã€‚</p>
</li>
</ol>
<h3 data-id="heading-20">æ•…éšœæ’æŸ¥</h3>
<h4 data-id="heading-21">å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ³•</h4>
<ol>
<li>1. <strong>æœåŠ¡æ— æ³•è®¿é—®</strong></li>
</ol>
<ul>
<li>â€¢ æ£€æŸ¥å®¹å™¨çŠ¶æ€ï¼š<code>docker ps --filter "name=nextcloud"</code>ï¼Œè‹¥æœªè¿è¡Œï¼Œä½¿ç”¨<code>docker start nextcloud</code>å¯åŠ¨</li>
<li>â€¢ æ£€æŸ¥ç«¯å£æ˜ å°„ï¼š<code>netstat -tulpn | grep 80</code>ï¼Œç¡®è®¤ç«¯å£æœªè¢«å ç”¨</li>
<li>â€¢ æ£€æŸ¥é˜²ç«å¢™è§„åˆ™ï¼šç¡®ä¿æœåŠ¡å™¨é˜²ç«å¢™å…è®¸80/443ç«¯å£è®¿é—®</li>
</ul>
<ol start="3">
<li>2. <strong>æ•°æ®åº“è¿æ¥å¤±è´¥</strong></li>
</ol>
<ul>
<li>â€¢ æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼š<code>docker logs nextcloud</code>ï¼Œæ£€æŸ¥æ•°æ®åº“è¿æ¥é”™è¯¯ä¿¡æ¯</li>
<li>â€¢ éªŒè¯æ•°æ®åº“å®¹å™¨çŠ¶æ€ï¼š<code>docker ps --filter "name=nextcloud_db"</code></li>
<li>â€¢ æ£€æŸ¥æ•°æ®åº“ç¯å¢ƒå˜é‡ï¼šç¡®è®¤<code>MYSQL_HOST</code>ã€<code>MYSQL_USER</code>ã€<code>MYSQL_PASSWORD</code>ç­‰å‚æ•°æ­£ç¡®</li>
</ul>
<ol start="5">
<li>3. <strong>æ–‡ä»¶ä¸Šä¼ å¤±è´¥</strong></li>
</ol>
<ul>
<li>â€¢ æ£€æŸ¥ç›®å½•æƒé™ï¼šå®¹å™¨å†…<code>/var/www/html/data</code>ç›®å½•æƒé™åº”ä¸ºwww-dataç”¨æˆ·ï¼ˆID 33ï¼‰æ‰€æœ‰</li>
<li>â€¢ æ£€æŸ¥PHPä¸Šä¼ é™åˆ¶ï¼šé€šè¿‡ç¯å¢ƒå˜é‡<code>PHP_UPLOAD_LIMIT</code>è°ƒæ•´ä¸Šä¼ å¤§å°é™åˆ¶</li>
<li>â€¢ æ£€æŸ¥ç£ç›˜ç©ºé—´ï¼šä½¿ç”¨<code>df -h</code>ç¡®è®¤ä¸»æœºç£ç›˜ç©ºé—´å……è¶³</li>
</ul>
<ol start="7">
<li>4. <strong>å‡çº§ååŠŸèƒ½å¼‚å¸¸</strong></li>
</ol>
<ul>
<li>
<p>â€¢ æŸ¥çœ‹å‡çº§æ—¥å¿—ï¼š<code>docker logs nextcloud</code>ï¼Œæ£€æŸ¥å‡çº§è¿‡ç¨‹ä¸­çš„é”™è¯¯</p>
</li>
<li>
<p>â€¢ ç¦ç”¨ç¬¬ä¸‰æ–¹åº”ç”¨ï¼šé€šè¿‡<code>occ</code>å‘½ä»¤ç¦ç”¨å¯èƒ½ä¸å…¼å®¹çš„è‡ªå®šä¹‰åº”ç”¨ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">docker <span class="hljs-keyword">exec</span> <span class="hljs-comment">--user www-data nextcloud php occ app:disable problematic_app</span>
</code></pre>
</li>
<li>
<p>â€¢ æ¢å¤å¤‡ä»½ï¼šè‹¥å‡çº§å¤±è´¥ï¼Œå¯ä½¿ç”¨ä¹‹å‰çš„å¤‡ä»½æ¢å¤æ•°æ®å’Œé…ç½®</p>
</li>
</ul>
<h4 data-id="heading-22">æ—¥å¿—æ’æŸ¥å·¥å…·</h4>
<ol>
<li>
<p>1. <strong>å®¹å™¨æ—¥å¿—</strong>ï¼š<code>docker logs -f nextcloud</code>ï¼ˆ<code>-f</code>å‚æ•°å¯å®æ—¶æŸ¥çœ‹æ—¥å¿—ï¼‰</p>
</li>
<li>
<p>2. <strong>åº”ç”¨æ—¥å¿—</strong>ï¼šNextcloud åº”ç”¨æ—¥å¿—ä½äº<code>/var/www/html/data/nextcloud.log</code>ï¼Œå¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker <span class="hljs-built_in">exec</span> nextcloud <span class="hljs-built_in">cat</span> /var/www/html/data/nextcloud.log
</code></pre>
</li>
<li>
<p>3. <strong>æ•°æ®åº“æ—¥å¿—</strong>ï¼šæŸ¥çœ‹MariaDBå®¹å™¨æ—¥å¿—ä»¥æ’æŸ¥æ•°æ®åº“é—®é¢˜ï¼š</p>
<pre><code class="hljs">docker logs nextcloud_db
</code></pre>
</li>
</ol>
<h3 data-id="heading-23">å‚è€ƒèµ„æº</h3>
<ol>
<li>1. Nextcloud é•œåƒæ–‡æ¡£ï¼ˆè½©è¾•ï¼‰ <code>https://xuanyuan.cloud/r/library/nextcloud</code> - è½©è¾•é•œåƒæä¾›çš„NEXTCLOUDé•œåƒè¯¦ç»†è¯´æ˜</li>
<li>2. Nextcloud é•œåƒæ ‡ç­¾åˆ—è¡¨ <code>https://xuanyuan.cloud/r/library/nextcloud/tags</code> - æ‰€æœ‰å¯ç”¨é•œåƒç‰ˆæœ¬æ ‡ç­¾</li>
<li>3. Nextcloudå®˜æ–¹æ–‡æ¡£ <code>https://docs.nextcloud.com</code> - Nextcloudé¡¹ç›®å®˜æ–¹æ–‡æ¡£ï¼ŒåŒ…å«è¯¦ç»†çš„é…ç½®å’Œç®¡ç†æŒ‡å—</li>
<li>4. Dockerå®˜æ–¹æ–‡æ¡£ <code>https://docs.docker.com</code> - Dockerå®¹å™¨æŠ€æœ¯å®˜æ–¹æ–‡æ¡£ï¼ŒåŒ…å«å®¹å™¨ç®¡ç†ã€ç½‘ç»œã€å­˜å‚¨ç­‰åŸºç¡€å†…å®¹</li>
<li>5. MariaDBå®˜æ–¹æ–‡æ¡£ <code>https://mariadb.com/kb/en</code> - MariaDBæ•°æ®åº“å®˜æ–¹æ–‡æ¡£ï¼ŒåŒ…å«æ€§èƒ½ä¼˜åŒ–ã€å¤‡ä»½æ¢å¤ç­‰å†…å®¹</li>
</ol>
<h3 data-id="heading-24">æ€»ç»“</h3>
<p>æœ¬æ–‡è¯¦ç»†ä»‹ç»äº† Nextcloud çš„Dockerå®¹å™¨åŒ–éƒ¨ç½²æ–¹æ¡ˆï¼Œä»ç¯å¢ƒå‡†å¤‡ã€é•œåƒæ‹‰å–ã€åŸºç¡€éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–ï¼Œæä¾›äº†ä¸€å¥—å®Œæ•´çš„éƒ¨ç½²æµç¨‹ã€‚é€šè¿‡å®¹å™¨åŒ–éƒ¨ç½²ï¼Œç”¨æˆ·å¯å¿«é€Ÿæ­å»º Nextcloud æœåŠ¡ï¼Œå¹¶æ ¹æ®å®é™…éœ€æ±‚è¿›è¡Œçµæ´»é…ç½®ã€‚</p>
<p><strong>å…³é”®è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>â€¢ ä½¿ç”¨è½©è¾•é•œåƒè®¿é—®æ”¯æŒå¯æå‡ Nextcloud é•œåƒä¸‹è½½è®¿é—®è¡¨ç°ï¼Œç®€åŒ–éƒ¨ç½²æµç¨‹</li>
<li>â€¢ æµ‹è¯•ç¯å¢ƒå¯ä½¿ç”¨åŸºç¡€éƒ¨ç½²å‘½ä»¤å¿«é€Ÿå¯åŠ¨ï¼Œç”Ÿäº§ç¯å¢ƒéœ€é…ç½®å¤–éƒ¨æ•°æ®åº“å’ŒHTTPS</li>
<li>â€¢ æ•°æ®æŒä¹…åŒ–éœ€é€šè¿‡Dockerå·å®ç°ï¼Œå»ºè®®ç²¾ç»†åŒ–æŒ‚è½½å…³é”®ç›®å½•ä»¥ç¡®ä¿æ•°æ®å®‰å…¨</li>
<li>â€¢ å®šæœŸå¤‡ä»½æ•°æ®å’Œæ•°æ®åº“æ˜¯ç”Ÿäº§ç¯å¢ƒç¨³å®šè¿è¡Œçš„é‡è¦ä¿éšœ</li>
<li>â€¢ é‡åˆ°é—®é¢˜æ—¶ï¼Œå¯é€šè¿‡å®¹å™¨æ—¥å¿—ã€åº”ç”¨æ—¥å¿—å’Œæ•°æ®åº“æ—¥å¿—è¿›è¡Œæ’æŸ¥</li>
</ul>
<p><strong>åç»­å»ºè®®</strong>ï¼š</p>
<ul>
<li>â€¢ æ·±å…¥å­¦ä¹  Nextcloud çš„é«˜çº§ç‰¹æ€§ï¼Œå¦‚å¤–éƒ¨å­˜å‚¨é›†æˆã€LDAPè®¤è¯ã€è”é‚¦å…±äº«ç­‰ï¼Œæ‰©å±•æœåŠ¡åŠŸèƒ½</li>
<li>â€¢ æ ¹æ®ä¸šåŠ¡éœ€æ±‚è°ƒæ•´æ€§èƒ½å‚æ•°ï¼Œå¦‚PHPå†…å­˜é™åˆ¶ã€æ•°æ®åº“è¿æ¥æ•°ã€ç¼“å­˜ç­–ç•¥ç­‰ï¼Œä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½</li>
<li>â€¢ å…³æ³¨ Nextcloud é•œåƒæ ‡ç­¾åˆ—è¡¨ <code>https://xuanyuan.cloud/r/library/nextcloud/tags</code>ï¼ŒåŠæ—¶æ›´æ–°é•œåƒç‰ˆæœ¬ä»¥è·å–å®‰å…¨è¡¥ä¸å’Œæ–°åŠŸèƒ½</li>
<li>â€¢ å»ºç«‹å®Œå–„çš„ç›‘æ§ä½“ç³»ï¼Œå¯¹ Nextcloud æœåŠ¡çš„è¿è¡ŒçŠ¶æ€ã€èµ„æºä½¿ç”¨ç‡è¿›è¡Œå®æ—¶ç›‘æ§ï¼Œç¡®ä¿æœåŠ¡ç¨³å®šè¿è¡Œ</li>
</ul>
<p>é€šè¿‡æœ¬æ–‡æ¡£çš„æŒ‡å¯¼ï¼Œç”¨æˆ·å¯åœ¨å„ç§ç¯å¢ƒä¸­é«˜æ•ˆéƒ¨ç½²å’Œç®¡ç† Nextcloud æœåŠ¡ï¼Œå……åˆ†åˆ©ç”¨å…¶æ•°æ®ç®¡ç†å’Œåä½œåŠŸèƒ½ï¼Œæ»¡è¶³ä¸ªäººæˆ–ä¼ä¸šçš„éœ€æ±‚ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¾®å‰ç«¯ä»å…¥é—¨åˆ°ç²¾é€šï¼šVueå¼€å‘è€…çš„å¤§å‹åº”ç”¨æ¶æ„æ¼”è¿›æŒ‡å—]]></title>    <link>https://juejin.cn/post/7587412021709225990</link>    <guid>https://juejin.cn/post/7587412021709225990</guid>    <pubDate>2025-12-25T03:26:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587412021709225990" data-draft-id="7587349016222302249" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¾®å‰ç«¯ä»å…¥é—¨åˆ°ç²¾é€šï¼šVueå¼€å‘è€…çš„å¤§å‹åº”ç”¨æ¶æ„æ¼”è¿›æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-25T03:26:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Mr_chiu"/> <meta itemprop="url" content="https://juejin.cn/user/1644525124592974"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¾®å‰ç«¯ä»å…¥é—¨åˆ°ç²¾é€šï¼šVueå¼€å‘è€…çš„å¤§å‹åº”ç”¨æ¶æ„æ¼”è¿›æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1644525124592974/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Mr_chiu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T03:26:07.000Z" title="Thu Dec 25 2025 03:26:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼€ç¯‡ï¼šå½“Vueåº”ç”¨ä»â€œå°åˆ«å¢…â€å˜æˆâ€œæ‘©å¤©å¤§æ¥¼â€</h2>
<p>ä½œä¸ºVueå¼€å‘è€…ï¼Œä½ æ˜¯å¦ç»å†è¿‡è¿™æ ·çš„æŠ€æœ¯ç„¦è™‘ï¼Ÿ</p>
<ul>
<li>é¡¹ç›®ä»£ç é‡çªç ´10ä¸‡è¡Œï¼Œ<code>npm run build</code> æ—¶é—´è¶…è¿‡5åˆ†é’Ÿ</li>
<li>15ä¸ªå›¢é˜Ÿåœ¨åŒä¸€ä¸ªä»£ç åº“ä¸­å¹¶è¡Œå¼€å‘ï¼Œæ¯å¤©äº§ç”Ÿæ•°åä¸ªåˆå¹¶å†²çª</li>
<li>æ¯æ¬¡åŠŸèƒ½ä¸Šçº¿éƒ½éœ€è¦å…¨é‡å›å½’æµ‹è¯•ï¼Œå‘å¸ƒçª—å£è¶Šæ¥è¶Šå°</li>
<li>æƒ³ç”¨Vue 3çš„Composition APIé‡æ„è€ä»£ç ï¼Œå´æ— ä»ä¸‹æ‰‹</li>
</ul>
<p>è¿™æ­£æ˜¯å¾®å‰ç«¯æ¶æ„è¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜ã€‚æœ¬æ–‡å°†ä¸ºä½ å‘ˆç°ä¸€å¥—å®Œæ•´çš„Vueå¾®å‰ç«¯å®æˆ˜æŒ‡å—ï¼Œä»åŸºç¡€æ¦‚å¿µåˆ°ç”Ÿäº§çº§æ¶æ„è®¾è®¡ï¼ŒåŠ©ä½ æŒæ¡å¤§å‹Vueåº”ç”¨çš„æ‹†åˆ†è‰ºæœ¯ã€‚</p>
<h2 data-id="heading-1">ç¬¬ä¸€ç« ï¼šé‡æ–°è®¤è¯†å¾®å‰ç«¯â€”â€”ä¸åªæ˜¯ä»£ç æ‹†åˆ†</h2>
<h3 data-id="heading-2">1.1 å¾®å‰ç«¯çš„æœ¬è´¨ï¼šæŠ€æœ¯æ¶æ„ä¸ç»„ç»‡æ¶æ„çš„èåˆ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¾®å‰ç«¯è§£å†³çš„ä¸ä»…æ˜¯æŠ€æœ¯é—®é¢˜</span>
<span class="hljs-keyword">const</span> microFrontendBenefits = {
  <span class="hljs-attr">technical</span>: [
    <span class="hljs-string">'ç‹¬ç«‹å¼€å‘ã€éƒ¨ç½²'</span>,
    <span class="hljs-string">'æŠ€æœ¯æ ˆå¼‚æ„ï¼ˆVue 2/3ã€Reactå¹¶è¡Œï¼‰'</span>,
    <span class="hljs-string">'æ¸è¿›å¼å‡çº§'</span>,
    <span class="hljs-string">'å¢é‡æ›´æ–°'</span>
  ],
  <span class="hljs-attr">organizational</span>: [
    <span class="hljs-string">'å›¢é˜Ÿè‡ªæ²»'</span>,
    <span class="hljs-string">'å¹¶è¡Œå¼€å‘æµ'</span>,
    <span class="hljs-string">'æŒ‰ä¸šåŠ¡é¢†åŸŸåˆ’åˆ†èŒè´£'</span>,
    <span class="hljs-string">'é™ä½åä½œæˆæœ¬'</span>
  ]
};
</code></pre>
<h3 data-id="heading-3">1.2 Vueå¼€å‘è€…çš„å¾®å‰ç«¯æ€ç»´è½¬å˜</h3>
<p><strong>ä¼ ç»Ÿæ€ç»´ï¼š</strong></p>
<pre><code class="hljs">å•ä»“åº“ â†’ é›†ä¸­è·¯ç”± â†’ å…¨å±€çŠ¶æ€ â†’ ç»Ÿä¸€æ„å»º â†’ å…¨é‡éƒ¨ç½²
</code></pre>
<p><strong>å¾®å‰ç«¯æ€ç»´ï¼š</strong></p>
<pre><code class="hljs">å¤šä»“åº“ â†’ è·¯ç”±èšåˆ â†’ çŠ¶æ€éš”ç¦» â†’ ç‹¬ç«‹æ„å»º â†’ å¢é‡éƒ¨ç½²
</code></pre>
<h2 data-id="heading-4">ç¬¬äºŒç« ï¼šVueå¾®å‰ç«¯æ ¸å¿ƒæŠ€æœ¯é€‰å‹æ·±åº¦è§£æ</h2>
<h3 data-id="heading-5">2.1 ä¸»æµæ–¹æ¡ˆæ¨ªå‘å¯¹æ¯”</h3>








































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>æ ¸å¿ƒåŸç†</th><th>Vueæ”¯æŒåº¦</th><th>ç”Ÿäº§å°±ç»ªåº¦</th><th>å­¦ä¹ æˆæœ¬</th></tr></thead><tbody><tr><td><strong>qiankun</strong></td><td>è¿è¡Œæ—¶åŠ è½½ + JSæ²™ç®±</td><td>â­â­â­â­â­</td><td>â­â­â­â­â­</td><td>ä¸­</td></tr><tr><td><strong>Module Federation</strong></td><td>ç¼–è¯‘æ—¶ä¾èµ–å…±äº«</td><td>â­â­â­â­</td><td>â­â­â­â­</td><td>é«˜</td></tr><tr><td><strong>Single-SPA</strong></td><td>ç”Ÿå‘½å‘¨æœŸè°ƒåº¦</td><td>â­â­â­â­</td><td>â­â­â­â­</td><td>ä¸­</td></tr><tr><td><strong>æ— ç•Œ</strong></td><td>iframeæ²™ç®±</td><td>â­â­â­â­</td><td>â­â­â­</td><td>ä½</td></tr></tbody></table>
<h3 data-id="heading-6">2.2 æˆ‘ä»¬çš„é€‰æ‹©ï¼šqiankun + Vue 3ç”Ÿæ€ä½“ç³»</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æŠ€æœ¯æ ˆå…¨æ™¯å›¾</span>
<span class="hljs-keyword">const</span> techStack = {
  <span class="hljs-attr">baseFramework</span>: <span class="hljs-string">'Vue 3 + TypeScript + Vite'</span>,
  <span class="hljs-attr">microFramework</span>: {
    <span class="hljs-attr">host</span>: <span class="hljs-string">'Vue 3 + qiankun'</span>,
    <span class="hljs-attr">microApps</span>: [
      { <span class="hljs-attr">name</span>: <span class="hljs-string">'auth-center'</span>, <span class="hljs-attr">stack</span>: <span class="hljs-string">'Vue 3 + Pinia'</span> },
      { <span class="hljs-attr">name</span>: <span class="hljs-string">'dashboard'</span>, <span class="hljs-attr">stack</span>: <span class="hljs-string">'Vue 3 + Composition API'</span> },
      { <span class="hljs-attr">name</span>: <span class="hljs-string">'legacy-module'</span>, <span class="hljs-attr">stack</span>: <span class="hljs-string">'Vue 2 + Vuex'</span> },
      { <span class="hljs-attr">name</span>: <span class="hljs-string">'experimental'</span>, <span class="hljs-attr">stack</span>: <span class="hljs-string">'React 18'</span> } <span class="hljs-comment">// æŠ€æœ¯æ ˆè‡ªç”±ï¼</span>
    ]
  },
  <span class="hljs-attr">stateManagement</span>: <span class="hljs-string">'Pinia (ä¸»åº”ç”¨) + è‡ªå®šä¹‰é€šä¿¡åè®®'</span>,
  <span class="hljs-attr">buildSystem</span>: <span class="hljs-string">'Vite (å¾®åº”ç”¨) + Webpack (ä¸»åº”ç”¨)'</span>
};
</code></pre>
<h2 data-id="heading-7">ç¬¬ä¸‰ç« ï¼šå®æˆ˜æ¼”ç»ƒâ€”â€”ä»é›¶æ„å»ºç”Ÿäº§çº§Vueå¾®å‰ç«¯æ¶æ„</h2>
<h3 data-id="heading-8">3.1 ä¸»åº”ç”¨ï¼šå¾®å‰ç«¯çš„â€œèˆªç©ºæ¯èˆ°â€</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// main-app/src/micro/registry.ts - å¾®åº”ç”¨æ³¨å†Œä¸­å¿ƒ</span>
<span class="hljs-keyword">import</span> { registerMicroApps, start, initGlobalState } <span class="hljs-keyword">from</span> <span class="hljs-string">'qiankun'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">MicroApp</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/types/micro'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-attr">microApps</span>: <span class="hljs-title class_">MicroApp</span>[] = [
  {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'vue3-auth'</span>,
    <span class="hljs-attr">entry</span>: <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_AUTH_APP_URL</span>,
    <span class="hljs-attr">container</span>: <span class="hljs-string">'#micro-container'</span>,
    <span class="hljs-attr">activeRule</span>: <span class="hljs-string">'/auth'</span>,
    <span class="hljs-attr">props</span>: {
      <span class="hljs-attr">routerBase</span>: <span class="hljs-string">'/auth'</span>,
      <span class="hljs-attr">sharedStore</span>: <span class="hljs-title function_">initGlobalState</span>({ <span class="hljs-attr">user</span>: <span class="hljs-literal">null</span> }),
      <span class="hljs-attr">onAuthSuccess</span>: <span class="hljs-function">(<span class="hljs-params">token: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
        <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'token'</span>, token);
      }
    }
  },
  {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'vue2-legacy'</span>,
    <span class="hljs-attr">entry</span>: <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_LEGACY_APP_URL</span>,
    <span class="hljs-attr">container</span>: <span class="hljs-string">'#micro-container'</span>,
    <span class="hljs-attr">activeRule</span>: <span class="hljs-string">'/legacy'</span>,
    <span class="hljs-attr">props</span>: {
      <span class="hljs-comment">// Vue 2å…¼å®¹æ€§é€‚é…å™¨</span>
      <span class="hljs-attr">vue2Adapter</span>: <span class="hljs-literal">true</span>
    }
  }
];

<span class="hljs-comment">// æ™ºèƒ½é¢„åŠ è½½ç­–ç•¥</span>
<span class="hljs-keyword">const</span> prefetchApps = microApps
  .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">app</span> =&gt;</span> app.<span class="hljs-property">priority</span> === <span class="hljs-string">'high'</span>)
  .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">app</span> =&gt;</span> app.<span class="hljs-property">name</span>);

<span class="hljs-title function_">registerMicroApps</span>(microApps, {
  <span class="hljs-attr">beforeLoad</span>: [<span class="hljs-function"><span class="hljs-params">app</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`åŠ è½½ <span class="hljs-subst">${app.name}</span>`</span>)],
  <span class="hljs-attr">beforeMount</span>: [<span class="hljs-function"><span class="hljs-params">app</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æŒ‚è½½ <span class="hljs-subst">${app.name}</span>`</span>)],
  <span class="hljs-attr">afterUnmount</span>: [<span class="hljs-function"><span class="hljs-params">app</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å¸è½½ <span class="hljs-subst">${app.name}</span>`</span>)]
});

<span class="hljs-title function_">start</span>({
  <span class="hljs-attr">prefetch</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">sandbox</span>: {
    <span class="hljs-attr">experimentalStyleIsolation</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// CSSéš”ç¦»</span>
  },
  <span class="hljs-attr">singular</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">// å…è®¸åŒæ—¶è¿è¡Œå¤šä¸ªå¾®åº”ç”¨</span>
});
</code></pre>
<h3 data-id="heading-9">3.2 Vue 3å¾®åº”ç”¨ï¼šç°ä»£åŒ–é…ç½®</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// micro-auth/src/entry.ts - å¾®åº”ç”¨å…¥å£æ–‡ä»¶</span>
<span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>;
<span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">'./router'</span>;
<span class="hljs-keyword">import</span> { createPinia } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>;

<span class="hljs-keyword">let</span> <span class="hljs-attr">instance</span>: <span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-keyword">typeof</span> createApp&gt; | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params">props: <span class="hljs-built_in">any</span> = {}</span>) {
  <span class="hljs-keyword">const</span> { container, routerBase } = props;
  <span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>);
  
  <span class="hljs-comment">// ç‹¬ç«‹è¿è¡Œæ—¶ä¸åµŒå…¥è¿è¡Œæ—¶è·¯ç”±å·®å¼‚åŒ–</span>
  <span class="hljs-keyword">const</span> baseRouter = routerBase || <span class="hljs-string">'/'</span>;
  
  app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">router</span>(baseRouter));
  app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">createPinia</span>());
  
  <span class="hljs-comment">// æŒ‚è½½åˆ°æŒ‡å®šå®¹å™¨æˆ–é»˜è®¤#app</span>
  <span class="hljs-keyword">const</span> target = container 
    ? container.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'#auth-app'</span>) 
    : <span class="hljs-string">'#auth-app'</span>;
  
  instance = app.<span class="hljs-title function_">mount</span>(target);
  <span class="hljs-keyword">return</span> instance;
}

<span class="hljs-comment">// ç‹¬ç«‹è¿è¡Œ</span>
<span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">window</span>.<span class="hljs-property">__POWERED_BY_QIANKUN__</span>) {
  <span class="hljs-title function_">render</span>();
}

<span class="hljs-comment">// qiankunç”Ÿå‘½å‘¨æœŸåè®®</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[Auth] å¾®åº”ç”¨å¯åŠ¨'</span>);
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">mount</span>(<span class="hljs-params">props: <span class="hljs-built_in">any</span></span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[Auth] æ¥æ”¶ä¸»åº”ç”¨å‚æ•°'</span>, props);
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">render</span>(props);
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">unmount</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (instance &amp;&amp; instance.<span class="hljs-property">$destroy</span>) {
    instance.$destroy();
  }
  instance = <span class="hljs-literal">null</span>;
}
</code></pre>
<h3 data-id="heading-10">3.3 Vue 2å¾®åº”ç”¨ï¼šå…¼å®¹æ€§é€‚é…æ–¹æ¡ˆ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// micro-legacy/src/public-path.js</span>
<span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">__POWERED_BY_QIANKUN__</span>) {
  <span class="hljs-comment">// åŠ¨æ€è®¾ç½®webpack publicPath</span>
  __webpack_public_path__ = <span class="hljs-variable language_">window</span>.<span class="hljs-property">__INJECTED_PUBLIC_PATH_BY_QIANKUN__</span>;
}

<span class="hljs-comment">// micro-legacy/src/main.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>;
<span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">'./store'</span>;

<span class="hljs-keyword">let</span> vueInstance = <span class="hljs-literal">null</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params">{ container, routerBase } = {}</span>) {
  <span class="hljs-keyword">const</span> target = container 
    ? container.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'#legacy-app'</span>) 
    : <span class="hljs-string">'#legacy-app'</span>;
  
  vueInstance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>({
    store,
    <span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-params">h</span> =&gt;</span> <span class="hljs-title function_">h</span>(<span class="hljs-title class_">App</span>)
  }).$mount(target);
  
  <span class="hljs-keyword">return</span> vueInstance;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[Legacy] Vue 2åº”ç”¨å¯åŠ¨'</span>);
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">mount</span>(<span class="hljs-params">props</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[Legacy] æŒ‚è½½'</span>, props);
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">render</span>(props);
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">unmount</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (vueInstance) {
    vueInstance.$destroy();
    vueInstance.<span class="hljs-property">$el</span>.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">''</span>;
  }
  vueInstance = <span class="hljs-literal">null</span>;
}
</code></pre>
<h2 data-id="heading-11">ç¬¬å››ç« ï¼šé«˜çº§ç‰¹æ€§å®ç°â€”â€”çªç ´å¾®å‰ç«¯æ ¸å¿ƒéš¾é¢˜</h2>
<h3 data-id="heading-12">4.1 è·¨åº”ç”¨çŠ¶æ€ç®¡ç†ï¼šä¸åªæ˜¯Pinia/Vuex</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// shared/src/stores/global-store.ts - è·¨åº”ç”¨çŠ¶æ€æ€»çº¿</span>
<span class="hljs-keyword">import</span> { reactive, watch } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> { initGlobalState, <span class="hljs-title class_">MicroAppStateActions</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'qiankun'</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalStore</span> {
  <span class="hljs-keyword">private</span> state = <span class="hljs-title function_">reactive</span>({
    <span class="hljs-attr">user</span>: <span class="hljs-literal">null</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">User</span> | <span class="hljs-literal">null</span>,
    <span class="hljs-attr">permissions</span>: [] <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>[],
    <span class="hljs-attr">theme</span>: <span class="hljs-string">'light'</span> <span class="hljs-keyword">as</span> <span class="hljs-string">'light'</span> | <span class="hljs-string">'dark'</span>
  });
  
  <span class="hljs-keyword">private</span> <span class="hljs-attr">actions</span>: <span class="hljs-title class_">MicroAppStateActions</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;
  
  <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">actions</span> = <span class="hljs-title function_">initGlobalState</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>);
    
    <span class="hljs-comment">// ç›‘å¬çŠ¶æ€å˜åŒ–</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">actions</span>.<span class="hljs-title function_">onGlobalStateChange</span>(<span class="hljs-function">(<span class="hljs-params">newState, prevState</span>) =&gt;</span> {
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>, newState);
    });
  }
  
  <span class="hljs-comment">// æ›´æ–°çŠ¶æ€å¹¶åŒæ­¥åˆ°æ‰€æœ‰å¾®åº”ç”¨</span>
  <span class="hljs-title function_">setUser</span>(<span class="hljs-params">user: User</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">user</span> = user;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">actions</span>?.<span class="hljs-title function_">setGlobalState</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>);
  }
  
  <span class="hljs-comment">// ä»…æœ¬åœ°æ›´æ–°ï¼Œä¸å¹¿æ’­</span>
  <span class="hljs-title function_">setThemeLocal</span>(<span class="hljs-params">theme: <span class="hljs-string">'light'</span> | <span class="hljs-string">'dark'</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">theme</span> = theme;
  }
  
  <span class="hljs-title function_">getState</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>;
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> globalStore = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GlobalStore</span>();

<span class="hljs-comment">// åœ¨Vueç»„ä»¶ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">import</span> { globalStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@shared/store'</span>;
<span class="hljs-keyword">import</span> { storeToRefs } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> { user, theme } = <span class="hljs-title function_">storeToRefs</span>(globalStore.<span class="hljs-title function_">getState</span>());
    
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">updateUser</span> = (<span class="hljs-params"/>) =&gt; {
      globalStore.<span class="hljs-title function_">setUser</span>({ <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'John'</span> });
    };
    
    <span class="hljs-keyword">return</span> { user, theme, updateUser };
  }
};
</code></pre>
<h3 data-id="heading-13">4.2 CSSéš”ç¦»çš„ç»ˆææ–¹æ¡ˆ</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æ–¹æ¡ˆä¸€ï¼šCSS Modules + å‘½åç©ºé—´ï¼ˆæ¨èï¼‰</span>
<span class="hljs-selector-class">.auth-app</span> {
  <span class="hljs-comment">// æ‰€æœ‰æ ·å¼éƒ½åœ¨å‘½åç©ºé—´ä¸‹</span>
  :global {
    <span class="hljs-selector-class">.button</span> {
      <span class="hljs-comment">// è¦†ç›–å…¨å±€æ ·å¼</span>
    }
  }
}

<span class="hljs-comment">// æ–¹æ¡ˆäºŒï¼šåŠ¨æ€æ ·å¼è¡¨åŠ è½½/å¸è½½</span>
class ScopedCSSManager {
  private styleCache = new Map&lt;string, HTMLStyleElement&gt;();
  
  <span class="hljs-built_in">load</span>(appName: string, css: string) {
    const style = document<span class="hljs-selector-class">.createElement</span>('style');
    style<span class="hljs-selector-class">.setAttribute</span>('data-app', appName);
    style<span class="hljs-selector-class">.textContent</span> = this<span class="hljs-selector-class">.scopeCSS</span>(css, appName);
    document<span class="hljs-selector-class">.head</span><span class="hljs-selector-class">.appendChild</span>(style);
    this<span class="hljs-selector-class">.styleCache</span><span class="hljs-selector-class">.set</span>(appName, style);
  }
  
  <span class="hljs-built_in">unload</span>(appName: string) {
    const style = this<span class="hljs-selector-class">.styleCache</span><span class="hljs-selector-class">.get</span>(appName);
    if (style &amp;&amp; document.head.contains(style)) {
      document<span class="hljs-selector-class">.head</span><span class="hljs-selector-class">.removeChild</span>(style);
    }
    this<span class="hljs-selector-class">.styleCache</span><span class="hljs-selector-class">.delete</span>(appName);
  }
  
  private <span class="hljs-built_in">scopeCSS</span>(css: string, appName: string): string {
    <span class="hljs-comment">// å°†é€‰æ‹©å™¨è½¬æ¢ä¸º [data-app="auth"] .button å½¢å¼</span>
    return css<span class="hljs-selector-class">.replace</span>(/([^{]+)\{/g, `<span class="hljs-selector-attr">[data-app=<span class="hljs-string">"${appName}"</span>]</span> $<span class="hljs-number">1</span>{`);
  }
}
</code></pre>
<h3 data-id="heading-14">4.3 æ™ºèƒ½è·¯ç”±ä¸å¯¼èˆªå®ˆå«</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// main-app/src/router/micro-router.ts</span>
<span class="hljs-keyword">import</span> { createRouter, createWebHistory } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>;

<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/layouts/MainLayout.vue'</span>),
    <span class="hljs-attr">children</span>: [
      <span class="hljs-comment">// ä¸»åº”ç”¨è·¯ç”±</span>
      { <span class="hljs-attr">path</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">HomePage</span> },
      <span class="hljs-comment">// å¾®å‰ç«¯è·¯ç”± - åŠ¨æ€åŒ¹é…</span>
      { 
        <span class="hljs-attr">path</span>: <span class="hljs-string">'/auth/:pathMatch(.*)*'</span>,
        <span class="hljs-attr">component</span>: <span class="hljs-title class_">MicroContainer</span>,
        <span class="hljs-attr">meta</span>: { <span class="hljs-attr">microApp</span>: <span class="hljs-string">'vue3-auth'</span> }
      },
      {
        <span class="hljs-attr">path</span>: <span class="hljs-string">'/legacy/:pathMatch(.*)*'</span>,
        <span class="hljs-attr">component</span>: <span class="hljs-title class_">MicroContainer</span>,
        <span class="hljs-attr">meta</span>: { <span class="hljs-attr">microApp</span>: <span class="hljs-string">'vue2-legacy'</span> }
      }
    ]
  }
];

<span class="hljs-comment">// å¯¼èˆªå®ˆå« - å¾®åº”ç”¨æƒé™æ§åˆ¶</span>
router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> microApp = to.<span class="hljs-property">meta</span>.<span class="hljs-property">microApp</span>;
  
  <span class="hljs-keyword">if</span> (microApp) {
    <span class="hljs-comment">// æ£€æŸ¥å¾®åº”ç”¨æ˜¯å¦å°±ç»ª</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">isMicroAppLoaded</span>(microApp)) {
      <span class="hljs-title function_">loadMicroApp</span>(microApp).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">next</span>();
      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">next</span>(<span class="hljs-string">'/error/micro-app-unavailable'</span>);
      });
      <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-comment">// æ£€æŸ¥å¾®åº”ç”¨è®¿é—®æƒé™</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">hasPermissionForMicroApp</span>(microApp)) {
      <span class="hljs-title function_">next</span>(<span class="hljs-string">'/forbidden'</span>);
      <span class="hljs-keyword">return</span>;
    }
  }
  
  <span class="hljs-title function_">next</span>();
});
</code></pre>
<h2 data-id="heading-15">ç¬¬äº”ç« ï¼šæ€§èƒ½ä¼˜åŒ–å®æˆ˜æ‰‹å†Œ</h2>
<h3 data-id="heading-16">5.1 å¾®åº”ç”¨æ‡’åŠ è½½ä¸é¢„åŠ è½½ç­–ç•¥</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// main-app/src/utils/preload-strategy.ts</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MicroAppPreloader</span> {
  <span class="hljs-keyword">private</span> loadedApps = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>&lt;<span class="hljs-built_in">string</span>&gt;();
  <span class="hljs-keyword">private</span> <span class="hljs-attr">prefetchQueue</span>: <span class="hljs-built_in">string</span>[] = [];
  
  <span class="hljs-comment">// åŸºäºç”¨æˆ·è¡Œä¸ºé¢„æµ‹çš„é¢„åŠ è½½</span>
  <span class="hljs-title function_">setupUserBehaviorPrediction</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// 1. ç›‘å¬è·¯ç”±å˜åŒ–</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">router</span>.<span class="hljs-title function_">afterEach</span>(<span class="hljs-function"><span class="hljs-params">to</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> nextApps = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">predictNextApps</span>(to);
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">prefetch</span>(nextApps);
    });
    
    <span class="hljs-comment">// 2. ç›‘å¬é¼ æ ‡æ‚¬åœ</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mouseover'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> link = e.<span class="hljs-property">target</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLElement</span>;
      <span class="hljs-keyword">if</span> (link.<span class="hljs-property">dataset</span>.<span class="hljs-property">microApp</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">prefetch</span>([link.<span class="hljs-property">dataset</span>.<span class="hljs-property">microApp</span>]);
      }
    }, { <span class="hljs-attr">capture</span>: <span class="hljs-literal">true</span> });
  }
  
  <span class="hljs-comment">// æ™ºèƒ½é¢„åŠ è½½ç®—æ³•</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">prefetch</span>(<span class="hljs-params">appNames: <span class="hljs-built_in">string</span>[]</span>) {
    <span class="hljs-keyword">const</span> toLoad = appNames.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">name</span> =&gt;</span> 
      !<span class="hljs-variable language_">this</span>.<span class="hljs-property">loadedApps</span>.<span class="hljs-title function_">has</span>(name) &amp;&amp; 
      !<span class="hljs-variable language_">this</span>.<span class="hljs-property">prefetchQueue</span>.<span class="hljs-title function_">includes</span>(name)
    );
    
    <span class="hljs-comment">// ç©ºé—²æ—¶åŠ è½½</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-string">'requestIdleCallback'</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span>) {
      <span class="hljs-title function_">requestIdleCallback</span>(<span class="hljs-keyword">async</span> () =&gt; {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> app <span class="hljs-keyword">of</span> toLoad) {
          <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadAppResources</span>(app);
        }
      });
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// é™çº§æ–¹æ¡ˆï¼šå»¶è¿ŸåŠ è½½</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        toLoad.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">app</span> =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadAppResources</span>(app));
      }, <span class="hljs-number">1000</span>);
    }
  }
  
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">predictNextApps</span>(currentRoute): <span class="hljs-built_in">string</span>[] {
    <span class="hljs-comment">// åŸºäºè·¯ç”±é…ç½®çš„ç®€å•é¢„æµ‹</span>
    <span class="hljs-keyword">const</span> routeMap = {
      <span class="hljs-string">'/dashboard'</span>: [<span class="hljs-string">'vue3-auth'</span>, <span class="hljs-string">'vue3-analytics'</span>],
      <span class="hljs-string">'/user/profile'</span>: [<span class="hljs-string">'vue3-auth'</span>],
      <span class="hljs-comment">// ...æ›´å¤šè·¯ç”±æ˜ å°„</span>
    };
    
    <span class="hljs-keyword">return</span> routeMap[currentRoute.<span class="hljs-property">path</span>] || [];
  }
}
</code></pre>
<h3 data-id="heading-17">5.2 æ„å»ºä¼˜åŒ–ï¼šVite + qiankunçš„æœ€ä½³å®è·µ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// micro-app/vite.config.js</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>;
<span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-vue'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">vue</span>()],
  <span class="hljs-attr">build</span>: {
    <span class="hljs-attr">target</span>: <span class="hljs-string">'es2015'</span>,
    <span class="hljs-attr">lib</span>: {
      <span class="hljs-attr">entry</span>: <span class="hljs-string">'src/entry.ts'</span>,
      <span class="hljs-attr">formats</span>: [<span class="hljs-string">'umd'</span>],
      <span class="hljs-attr">name</span>: <span class="hljs-string">'vue3AuthApp'</span>
    },
    <span class="hljs-attr">rollupOptions</span>: {
      <span class="hljs-attr">external</span>: [<span class="hljs-string">'vue'</span>, <span class="hljs-string">'vue-router'</span>, <span class="hljs-string">'pinia'</span>],
      <span class="hljs-attr">output</span>: {
        <span class="hljs-attr">globals</span>: {
          <span class="hljs-attr">vue</span>: <span class="hljs-string">'Vue'</span>,
          <span class="hljs-string">'vue-router'</span>: <span class="hljs-string">'VueRouter'</span>,
          <span class="hljs-attr">pinia</span>: <span class="hljs-string">'Pinia'</span>
        },
        <span class="hljs-comment">// ç¡®ä¿qiankunèƒ½æ­£ç¡®åŠ è½½</span>
        <span class="hljs-attr">entryFileNames</span>: <span class="hljs-string">'[name].js'</span>,
        <span class="hljs-attr">chunkFileNames</span>: <span class="hljs-string">'[name].[hash].js'</span>
      }
    }
  },
  <span class="hljs-attr">server</span>: {
    <span class="hljs-attr">port</span>: <span class="hljs-number">3001</span>,
    <span class="hljs-attr">cors</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-string">'Access-Control-Allow-Origin'</span>: <span class="hljs-string">'*'</span>
    }
  }
});
</code></pre>
<h2 data-id="heading-18">ç¬¬å…­ç« ï¼šç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ä¸DevOpsæµæ°´çº¿</h2>
<h3 data-id="heading-19">6.1 å¾®å‰ç«¯CI/CDæ¶æ„</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># .github/workflows/deploy-micro-apps.yml</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">Micro</span> <span class="hljs-string">Frontends</span>

<span class="hljs-attr">on:</span>
  <span class="hljs-attr">push:</span>
    <span class="hljs-attr">paths:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">'micro-apps/**'</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">'main-app/**'</span>

<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">deploy-micro-apps:</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
    <span class="hljs-attr">strategy:</span>
      <span class="hljs-attr">matrix:</span>
        <span class="hljs-attr">app:</span> [<span class="hljs-string">auth</span>, <span class="hljs-string">dashboard</span>, <span class="hljs-string">legacy</span>]
    
    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Checkout</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v3</span>
      
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Setup</span> <span class="hljs-string">Node.js</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v3</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">node-version:</span> <span class="hljs-string">'18'</span>
          
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Install</span> <span class="hljs-string">Dependencies</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">|
          cd micro-apps/${{ matrix.app }}
          npm ci
</span>          
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Build</span> <span class="hljs-string">Micro</span> <span class="hljs-string">App</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">|
          cd micro-apps/${{ matrix.app }}
          npm run build
</span>          
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">to</span> <span class="hljs-string">CDN</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">aws-actions/configure-aws-credentials@v1</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">aws-access-key-id:</span> <span class="hljs-string">${{</span> <span class="hljs-string">secrets.AWS_ACCESS_KEY</span> <span class="hljs-string">}}</span>
          <span class="hljs-attr">aws-secret-access-key:</span> <span class="hljs-string">${{</span> <span class="hljs-string">secrets.AWS_SECRET_KEY</span> <span class="hljs-string">}}</span>
          <span class="hljs-attr">aws-region:</span> <span class="hljs-string">us-east-1</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">|
          aws s3 sync ./dist s3://my-cdn/micro-apps/${{ matrix.app }}/${{ github.sha }}/
</span>          
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Update</span> <span class="hljs-string">Version</span> <span class="hljs-string">Registry</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">|
          # æ›´æ–°å¾®åº”ç”¨ç‰ˆæœ¬æ¸…å•
          curl -X POST https://api.myapp.com/versions \
            -H "Authorization: Bearer ${{ secrets.DEPLOY_TOKEN }}" \
            -d '{"app":"${{ matrix.app }}","version":"${{ github.sha }}"}'
</span></code></pre>
<h3 data-id="heading-20">6.2 ç‰ˆæœ¬ç®¡ç†ä¸ç°åº¦å‘å¸ƒ</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// version-manager.ts - å¾®åº”ç”¨ç‰ˆæœ¬æ§åˆ¶</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">VersionManager</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">versionManifest</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; = {};
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">versionManifest</span> = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fetchManifest</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupVersionPolling</span>();
  }
  
  <span class="hljs-comment">// è·å–æŒ‡å®šåº”ç”¨çš„æœ€ä½³ç‰ˆæœ¬</span>
  <span class="hljs-title function_">getAppVersion</span>(<span class="hljs-attr">appName</span>: <span class="hljs-built_in">string</span>, userId?: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">const</span> defaultVersion = <span class="hljs-variable language_">this</span>.<span class="hljs-property">versionManifest</span>[appName];
    
    <span class="hljs-comment">// ç°åº¦å‘å¸ƒé€»è¾‘</span>
    <span class="hljs-keyword">if</span> (userId &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isInGrayScale</span>(userId, appName)) {
      <span class="hljs-keyword">const</span> grayVersion = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getGrayVersion</span>(appName);
      <span class="hljs-keyword">return</span> grayVersion || defaultVersion;
    }
    
    <span class="hljs-keyword">return</span> defaultVersion;
  }
  
  <span class="hljs-comment">// è‡ªåŠ¨é™çº§æœºåˆ¶</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">loadWithFallback</span>(<span class="hljs-params">appName: <span class="hljs-built_in">string</span>, version: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadVersion</span>(appName, version);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`ç‰ˆæœ¬ <span class="hljs-subst">${version}</span> åŠ è½½å¤±è´¥ï¼Œå°è¯•å›é€€`</span>);
      
      <span class="hljs-comment">// å°è¯•ä¸Šä¸€ä¸ªç¨³å®šç‰ˆæœ¬</span>
      <span class="hljs-keyword">const</span> stableVersion = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getStableVersion</span>(appName);
      <span class="hljs-keyword">if</span> (stableVersion !== version) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadVersion</span>(appName, stableVersion);
      }
      
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`å¾®åº”ç”¨ <span class="hljs-subst">${appName}</span> åŠ è½½å¤±è´¥`</span>);
    }
  }
}
</code></pre>
<h2 data-id="heading-21">ç¬¬ä¸ƒç« ï¼šä»Monolithåˆ°å¾®å‰ç«¯â€”â€”çœŸå®è¿ç§»æ¡ˆä¾‹</h2>
<h3 data-id="heading-22">è¿ç§»å‰åçš„é‡åŒ–å¯¹æ¯”</h3>
<p><strong>æŸç”µå•†å¹³å°Vueé¡¹ç›®è¿ç§»æ•°æ®ï¼š</strong></p>









































<table><thead><tr><th>æŒ‡æ ‡</th><th>è¿ç§»å‰ï¼ˆå•ä½“ï¼‰</th><th>è¿ç§»åï¼ˆå¾®å‰ç«¯ï¼‰</th><th>æ”¹è¿›</th></tr></thead><tbody><tr><td>æ„å»ºæ—¶é—´</td><td>8åˆ†30ç§’</td><td>å¹³å‡1åˆ†20ç§’</td><td>â¬‡ï¸ 84%</td></tr><tr><td>é¦–å±åŠ è½½</td><td>3.2ç§’</td><td>1.8ç§’</td><td>â¬‡ï¸ 44%</td></tr><tr><td>å‘å¸ƒé¢‘ç‡</td><td>æ¯å‘¨1æ¬¡</td><td>æ¯æ—¥å¤šæ¬¡</td><td>â¬†ï¸ 500%+</td></tr><tr><td>å›¢é˜Ÿç‹¬ç«‹éƒ¨ç½²ç‡</td><td>0%</td><td>85%</td><td>â¬†ï¸ 85%</td></tr><tr><td>ç”Ÿäº§äº‹æ•…å½±å“èŒƒå›´</td><td>å…¨å±€</td><td>å•ä¸ªå¾®åº”ç”¨</td><td>â¬‡ï¸ 90%</td></tr></tbody></table>
<h3 data-id="heading-23">æ¸è¿›å¼è¿ç§»ç­–ç•¥ç¤ºä¾‹</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è¿ç§»è·¯çº¿å›¾</span>
<span class="hljs-keyword">const</span> migrationRoadmap = [
  {
    <span class="hljs-attr">phase</span>: <span class="hljs-string">'å‡†å¤‡é˜¶æ®µ'</span>,
    <span class="hljs-attr">tasks</span>: [
      <span class="hljs-string">'æ­å»ºå¾®å‰ç«¯åŸºåº§'</span>,
      <span class="hljs-string">'é…ç½®æ„å»ºæµæ°´çº¿'</span>,
      <span class="hljs-string">'åˆ¶å®šé€šä¿¡åè®®'</span>,
      <span class="hljs-string">'åŸ¹è®­å¼€å‘å›¢é˜Ÿ'</span>
    ],
    <span class="hljs-attr">duration</span>: <span class="hljs-string">'2å‘¨'</span>
  },
  {
    <span class="hljs-attr">phase</span>: <span class="hljs-string">'ç¬¬ä¸€æœŸè¿ç§»'</span>,
    <span class="hljs-attr">tasks</span>: [
      <span class="hljs-string">'æŠ½ç¦»ç”¨æˆ·ä¸­å¿ƒï¼ˆä½é£é™©ï¼‰'</span>,
      <span class="hljs-string">'ç‹¬ç«‹éƒ¨ç½²è®¤è¯æ¨¡å—'</span>,
      <span class="hljs-string">'éªŒè¯æŠ€æœ¯æ–¹æ¡ˆå¯è¡Œæ€§'</span>
    ],
    <span class="hljs-attr">duration</span>: <span class="hljs-string">'3å‘¨'</span>
  },
  {
    <span class="hljs-attr">phase</span>: <span class="hljs-string">'æ ¸å¿ƒä¸šåŠ¡è¿ç§»'</span>,
    <span class="hljs-attr">tasks</span>: [
      <span class="hljs-string">'æ‹†è§£å•†å“è¯¦æƒ…é¡µ'</span>,
      <span class="hljs-string">'è¿ç§»è®¢å•æµç¨‹'</span>,
      <span class="hljs-string">'å®ç°è´­ç‰©è½¦å¾®åº”ç”¨'</span>
    ],
    <span class="hljs-attr">duration</span>: <span class="hljs-string">'6å‘¨'</span>
  },
  {
    <span class="hljs-attr">phase</span>: <span class="hljs-string">'æ”¶å°¾ä¸ä¼˜åŒ–'</span>,
    <span class="hljs-attr">tasks</span>: [
      <span class="hljs-string">'è¿ç§»å‰©ä½™æ¨¡å—'</span>,
      <span class="hljs-string">'æ€§èƒ½è°ƒä¼˜'</span>,
      <span class="hljs-string">'ç›‘æ§ä½“ç³»å®Œå–„'</span>,
      <span class="hljs-string">'æ–‡æ¡£æ•´ç†'</span>
    ],
    <span class="hljs-attr">duration</span>: <span class="hljs-string">'3å‘¨'</span>
  }
];
</code></pre>
<h2 data-id="heading-24">ç¬¬å…«ç« ï¼šé¿å‘æŒ‡å—ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-25">8.1 å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">## ğŸ› é—®é¢˜1ï¼šå¾®åº”ç”¨æ ·å¼æ±¡æŸ“</span>
<span class="hljs-strong">**ç—‡çŠ¶**</span>ï¼šå¾®åº”ç”¨çš„CSSå½±å“äº†å…¶ä»–åº”ç”¨
<span class="hljs-strong">**è§£å†³æ–¹æ¡ˆ**</span>ï¼š
<span class="hljs-bullet">1.</span> å¯ç”¨qiankunçš„experimentalStyleIsolation
<span class="hljs-bullet">2.</span> ä½¿ç”¨CSS Modules + å‘½åç©ºé—´å‰ç¼€
<span class="hljs-bullet">3.</span> åŠ¨æ€æ ·å¼è¡¨åŠ è½½/å¸è½½

<span class="hljs-section">## ğŸ› é—®é¢˜2ï¼šå…¨å±€å˜é‡å†²çª</span>
<span class="hljs-strong">**ç—‡çŠ¶**</span>ï¼šå¤šä¸ªVueå®ä¾‹æˆ–Vuex storeå†²çª
<span class="hljs-strong">**è§£å†³æ–¹æ¡ˆ**</span>ï¼š
<span class="hljs-bullet">1.</span> ä½¿ç”¨æ²™ç®±æ¨¡å¼è¿è¡Œå¾®åº”ç”¨
<span class="hljs-bullet">2.</span> é¿å…ä¿®æ”¹windowå…¨å±€å¯¹è±¡
<span class="hljs-bullet">3.</span> é€šè¿‡propsä¼ é€’å…±äº«ä¾èµ–

<span class="hljs-section">## ğŸ› é—®é¢˜3ï¼šè·¯ç”±è·³è½¬å¼‚å¸¸</span>
<span class="hljs-strong">**ç—‡çŠ¶**</span>ï¼šå¾®åº”ç”¨å†…è·³è½¬å¯¼è‡´ä¸»åº”ç”¨è·¯ç”±æ··ä¹±
<span class="hljs-strong">**è§£å†³æ–¹æ¡ˆ**</span>ï¼š
<span class="hljs-bullet">1.</span> ç»Ÿä¸€ä½¿ç”¨ä¸»åº”ç”¨è·¯ç”±æ§åˆ¶
<span class="hljs-bullet">2.</span> å¾®åº”ç”¨ä½¿ç”¨ç›¸å¯¹è·¯å¾„
<span class="hljs-bullet">3.</span> å®ç°è·¯ç”±äº‹ä»¶ä»£ç†æœºåˆ¶

<span class="hljs-section">## ğŸ› é—®é¢˜4ï¼šé€šä¿¡å¤æ‚åº¦é«˜</span>
<span class="hljs-strong">**ç—‡çŠ¶**</span>ï¼šå¾®åº”ç”¨é—´é€šä¿¡ä»£ç æ··ä¹±
<span class="hljs-strong">**è§£å†³æ–¹æ¡ˆ**</span>ï¼š
<span class="hljs-bullet">1.</span> å®šä¹‰æ¸…æ™°çš„äº‹ä»¶é€šä¿¡åè®®
<span class="hljs-bullet">2.</span> ä½¿ç”¨çŠ¶æ€ç®¡ç†åº“ï¼ˆPiniaï¼‰ä½œä¸ºä¸­å¿ƒåŒ–store
<span class="hljs-bullet">3.</span> é™åˆ¶ç›´æ¥é€šä¿¡ï¼Œé€šè¿‡ä¸»åº”ç”¨ä¸­è½¬
</code></pre>
<h3 data-id="heading-26">8.2 Vueå¾®å‰ç«¯é»„é‡‘æ³•åˆ™</h3>
<ol>
<li><strong>å•ä¸€èŒè´£åŸåˆ™</strong>ï¼šæ¯ä¸ªå¾®åº”ç”¨åªè´Ÿè´£ä¸€ä¸ªä¸šåŠ¡é¢†åŸŸ</li>
<li><strong>æŠ€æœ¯æ ˆè‡ªç”±ä½†æœ‰é™åˆ¶</strong>ï¼šå…è®¸å¼‚æ„ï¼Œä½†è¦åˆ¶å®šæ ‡å‡†</li>
<li><strong>ç‹¬ç«‹å¯éƒ¨ç½²</strong>ï¼šæ¯ä¸ªå¾®åº”ç”¨éƒ½èƒ½ç‹¬ç«‹è¿è¡Œå’Œæµ‹è¯•</li>
<li><strong>å‘åå…¼å®¹</strong>ï¼šç¡®ä¿APIå’Œé€šä¿¡åè®®å‘åå…¼å®¹</li>
<li><strong>ç›‘æ§å…¨è¦†ç›–</strong>ï¼šæ¯ä¸ªå¾®åº”ç”¨éƒ½éœ€è¦ç‹¬ç«‹çš„ç›‘æ§å’Œæ—¥å¿—</li>
</ol>
<h2 data-id="heading-27">ç»“è¯­ï¼šå¾®å‰ç«¯ä¸æ˜¯é“¶å¼¹ï¼Œè€Œæ˜¯æ¶æ„æ¼”è¿›çš„å¿…ç»ä¹‹è·¯</h2>
<p>å¾®å‰ç«¯å¹¶ä¸æ˜¯è¦å–ä»£Vueçš„å•é¡µé¢åº”ç”¨æ¶æ„ï¼Œè€Œæ˜¯ä¸ºå…¶æä¾›ä¸€ç§å¯æ‰©å±•çš„è§£å†³æ–¹æ¡ˆã€‚å½“ä½ çš„Vueåº”ç”¨ä»â€œå°åˆ«å¢…â€æˆé•¿ä¸ºâ€œæ‘©å¤©å¤§æ¥¼â€æ—¶ï¼Œå¾®å‰ç«¯æä¾›äº†å¿…è¦çš„ç»“æ„æ”¯æ’‘ã€‚</p>
<p>è®°ä½ï¼ŒæŠ€æœ¯é€‰å‹çš„æ ¸å¿ƒä¸æ˜¯è¿½æ±‚æœ€æ–°æœ€é…·ï¼Œè€Œæ˜¯æ‰¾åˆ°æœ€é€‚åˆå›¢é˜Ÿå’Œä¸šåŠ¡åœºæ™¯çš„å¹³è¡¡ç‚¹ã€‚å¾®å‰ç«¯å¸¦æ¥çš„ä¸ä»…æ˜¯æŠ€æœ¯ä¸Šçš„è§£è€¦ï¼Œæ›´æ˜¯ç»„ç»‡æ¶æ„å’Œå¼€å‘æµç¨‹çš„ä¼˜åŒ–ã€‚</p>
<p><strong>Vue 3 + qiankunçš„å¾®å‰ç«¯æ–¹æ¡ˆï¼Œå·²ç»è¯æ˜æ˜¯ç”Ÿäº§å¯è¡Œçš„ã€‚ç°åœ¨ï¼Œæ˜¯æ—¶å€™å°†ä½ çš„å¤§å‹Vueåº”ç”¨å¸¦å…¥å¾®å‰ç«¯æ—¶ä»£äº†ã€‚</strong></p>
<hr/>
<p><strong>èµ„æºæ¨è</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fqiankun.umijs.org%2F" target="_blank" title="https://qiankun.umijs.org/" ref="nofollow noopener noreferrer">qiankunå®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvue-microfrontends" target="_blank" title="https://github.com/vue-microfrontends" ref="nofollow noopener noreferrer">Vue 3å¾®å‰ç«¯å®æˆ˜ä»£ç åº“</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmodule-federation.io%2F" target="_blank" title="https://module-federation.io/" ref="nofollow noopener noreferrer">Module Federation with Vue</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmicro-frontends.org%2F" target="_blank" title="https://micro-frontends.org/" ref="nofollow noopener noreferrer">å¾®å‰ç«¯è®¾è®¡æ¨¡å¼</a></li>
</ul>
<p><em>æœ¬æ–‡é¦–å‘äºæ˜é‡‘æŠ€æœ¯ç¤¾åŒºï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚å¦‚æœä½ åœ¨Vueå¾®å‰ç«¯å®è·µä¸­é‡åˆ°é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµè®¨è®ºã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨äº†MySQLçš„INSERT ON DUPLICATE KEY UPDATEï¼Œæ€ä¹ˆè¿˜æŠ¥å”¯ä¸€ç´¢å¼•å†²çªé”™è¯¯]]></title>    <link>https://juejin.cn/post/7586901995429871625</link>    <guid>https://juejin.cn/post/7586901995429871625</guid>    <pubDate>2025-12-24T00:57:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586901995429871625" data-draft-id="7586703355646492699" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨äº†MySQLçš„INSERT ON DUPLICATE KEY UPDATEï¼Œæ€ä¹ˆè¿˜æŠ¥å”¯ä¸€ç´¢å¼•å†²çªé”™è¯¯"/> <meta itemprop="keywords" content="MySQL,åç«¯,SQL"/> <meta itemprop="datePublished" content="2025-12-24T00:57:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é’çŸ³è·¯"/> <meta itemprop="url" content="https://juejin.cn/user/1999357021005580"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨äº†MySQLçš„INSERT ON DUPLICATE KEY UPDATEï¼Œæ€ä¹ˆè¿˜æŠ¥å”¯ä¸€ç´¢å¼•å†²çªé”™è¯¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1999357021005580/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é’çŸ³è·¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T00:57:04.000Z" title="Wed Dec 24 2025 00:57:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼€å¿ƒä¸€åˆ»</h2>
<p>ä¸€å¤©ï¼Œè€å©†ç¬‘å®¹æ»¡é¢çš„å†²åˆ°æˆ‘é¢å‰<br/>
è€å©†ï¼šä½ å¨¶æˆ‘åˆ°åº•æ˜¯å›¾æˆ‘å•¥<br/>
æˆ‘ï¼šä¾¿å®œ<br/>
è€å©†ç¬‘å®¹ç¬é—´æ¶ˆå¤±ï¼Œæ°”å‘¼å‘¼çš„é“ï¼šä½ ä¼šä¸ä¼šè¯´è¯ï¼Ÿ<br/>
å¹¶ä¸”å¼ºè°ƒï¼šæˆ‘çˆ¸å½“å¹´é‚£æ˜¯å¯æ€œä½ ï¼Œæ²¡è·Ÿä½ å¤šè¦<br/>
æˆ‘ï¼šä¸æ˜¯ï¼Œä½ çˆ¸ä¸æ˜¯è¿™ä¹ˆè¯´çš„<br/>
è€å©†ï¼šé‚£æ€ä¹ˆè¯´çš„<br/>
æˆ‘å¼€å§‹å­¦ç€è€ä¸ˆäººçš„å£å»ï¼šä¸è®¸é€€ï¼Œç»™ä½ ä¾¿å®œç‚¹<br/></p>
<div align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/145c7b4e26194e5e81243a259cb88af9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S55-z6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767142624&amp;x-signature=XbcCvm3PTHFLzDz7MaVUbMmh9IY%3D" alt="å¼€å¿ƒä¸€åˆ»" loading="lazy"/></div>
<h2 data-id="heading-1">INSERT ON DUPLICATE KEY UPDATE</h2>
<p>å…³äº <code>INSERT ... ON DUPLICATE KEY UPDATE</code>ï¼Œç›¸ä¿¡å¤§å®¶éƒ½æœ‰æ‰€äº†è§£ï¼Œæ˜¯ <code>MySQL</code> é’ˆå¯¹</p>
<blockquote>
<p>ä¸å­˜åœ¨åˆ™æ’å…¥ï¼Œå­˜åœ¨åˆ™æ›´æ–°</p>
</blockquote>
<p>çš„ä¸€ç§æ–¹è¨€å®ç°ï¼›<code>å­˜ä¸å­˜åœ¨</code> è¯¥å¦‚ä½•åˆ¤å®šå‘¢ï¼ŒåŸºäºè¡¨çš„ <code>å”¯ä¸€ç´¢å¼•</code> æˆ– <code>ä¸»é”®</code></p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœåˆ— <code>a</code> è¢«å£°æ˜ä¸º <code>å”¯ä¸€</code> ä¸”è¡¨ä¸­å·²ç»å­˜åœ¨ <code>a=1</code> çš„è®°å½•ï¼Œåˆ™ä»¥ä¸‹ä¸¤æ¡è¯­å¥å…·æœ‰ç±»ä¼¼çš„æ•ˆæœ</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> t1 (a,b,c) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)
  <span class="hljs-keyword">ON</span> DUPLICATE KEY <span class="hljs-keyword">UPDATE</span> c<span class="hljs-operator">=</span>c<span class="hljs-operator">+</span><span class="hljs-number">1</span>;

<span class="hljs-keyword">UPDATE</span> t1 <span class="hljs-keyword">SET</span> c<span class="hljs-operator">=</span>c<span class="hljs-operator">+</span><span class="hljs-number">1</span> <span class="hljs-keyword">WHERE</span> a<span class="hljs-operator">=</span><span class="hljs-number">1</span>;
</code></pre>
<p>å‡è®¾æˆ‘ä»¬æœ‰è¡¨</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `tbl_insert_on_update` (
  `id` <span class="hljs-type">bigint</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  `name` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  `uk_column1` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  `uk_column2` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  `remark` text,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  <span class="hljs-keyword">UNIQUE</span> KEY `name` (`name`)
) ENGINE<span class="hljs-operator">=</span>InnoDB
</code></pre>
<p>ä¸€å¼€å§‹è¡¨ä¸­æ²¡æœ‰æ•°æ®ï¼Œé‚£ä¹ˆ</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">INSERT</span> tbl_insert_on_update(id, name, uk_column1, uk_column2, remark)
<span class="hljs-keyword">VALUES</span>(<span class="hljs-number">1</span>, <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-string">'20050101001'</span>, <span class="hljs-string">'ç”·ä¸€å·'</span>, <span class="hljs-string">'é£ä¸€æ ·çš„ç”·å­'</span>)
<span class="hljs-keyword">ON</span> DUPLICATE KEY <span class="hljs-keyword">UPDATE</span> uk_column1<span class="hljs-operator">=</span><span class="hljs-string">'20050101002'</span>, uk_column2<span class="hljs-operator">=</span><span class="hljs-string">'ç”·äºŒå·'</span>, remark<span class="hljs-operator">=</span><span class="hljs-string">'ç‹‚é£ä¸€æ ·çš„ç”·å­'</span>;
</code></pre>
<p>çš„ä½œç”¨ï¼Œç›¸ä¿¡å¤§å®¶éƒ½çŸ¥é“ï¼Œä¸</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">INSERT</span> tbl_insert_on_update(id, name, uk_column1, uk_column2, remark)
<span class="hljs-keyword">VALUES</span>(<span class="hljs-number">1</span>, <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-string">'20050101001'</span>, <span class="hljs-string">'ç”·ä¸€å·'</span>, <span class="hljs-string">'é£ä¸€æ ·çš„ç”·å­'</span>);
</code></pre>
<p>ä½œç”¨ä¸€æ ·ï¼Œä¼šå¾€è¡¨ä¸­æ’å…¥ä¸€æ¡æ–°çš„è®°å½•ï¼›å¦‚æœå†æ‰§è¡Œä¸€æ¬¡</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">INSERT</span> tbl_insert_on_update(id, name, uk_column1, uk_column2, remark)
<span class="hljs-keyword">VALUES</span>(<span class="hljs-number">1</span>, <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-string">'20050101001'</span>, <span class="hljs-string">'ç”·ä¸€å·'</span>, <span class="hljs-string">'é£ä¸€æ ·çš„ç”·å­'</span>)
<span class="hljs-keyword">ON</span> DUPLICATE KEY <span class="hljs-keyword">UPDATE</span> uk_column1<span class="hljs-operator">=</span><span class="hljs-string">'20050101002'</span>, uk_column2<span class="hljs-operator">=</span><span class="hljs-string">'ç”·äºŒå·'</span>, remark<span class="hljs-operator">=</span><span class="hljs-string">'ç‹‚é£ä¸€æ ·çš„ç”·å­'</span>;
</code></pre>
<p>å‘¢ï¼Œä¼šæ˜¯æ€ä¹ˆæ ·çš„ç»“æœï¼Ÿç›¸ä¿¡å¤§å®¶éƒ½çŸ¥é“</p>
<div align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a67391724fdd49c49a4b8c777679d035~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S55-z6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767142624&amp;x-signature=und9tkxAabtRGe70a0t6Ow2CfWo%3D" alt="insert_on_update_å†æ‰§è¡Œä¸€æ¬¡" loading="lazy"/></div>
<p>ä¸</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">UPDATE</span> tbl_insert_on_update <span class="hljs-keyword">SET</span> uk_column1<span class="hljs-operator">=</span><span class="hljs-string">'20050101002'</span>, uk_column2<span class="hljs-operator">=</span><span class="hljs-string">'ç”·äºŒå·'</span>, remark<span class="hljs-operator">=</span><span class="hljs-string">'ç‹‚é£ä¸€æ ·çš„ç”·å­'</span> <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
</code></pre>
<p>çš„æ•ˆæœä¸€æ ·ã€‚æˆ‘ä»¬æ¥ç€åšä¸ªç®€å•è°ƒæ•´ï¼Œæ‹¿æ‰ <code>name</code></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">INSERT</span> tbl_insert_on_update(id, uk_column1, uk_column2, remark)
<span class="hljs-keyword">VALUES</span>(<span class="hljs-number">1</span>, <span class="hljs-string">'20050101001'</span>, <span class="hljs-string">'ç”·ä¸€å·'</span>, <span class="hljs-string">'é£ä¸€æ ·çš„ç”·å­'</span>)
<span class="hljs-keyword">ON</span> DUPLICATE KEY <span class="hljs-keyword">UPDATE</span> uk_column1<span class="hljs-operator">=</span><span class="hljs-string">'20050101003'</span>, uk_column2<span class="hljs-operator">=</span><span class="hljs-string">'ç”·ä¸‰å·'</span>, remark<span class="hljs-operator">=</span><span class="hljs-string">'æš´é£ä¸€æ ·çš„ç”·å­'</span>;
</code></pre>
<p>æˆ–è€…æ‹¿æ‰ <code>id</code></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">INSERT</span> tbl_insert_on_update(name, uk_column1, uk_column2, remark)
<span class="hljs-keyword">VALUES</span>(<span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-string">'20050101001'</span>, <span class="hljs-string">'ç”·ä¸€å·'</span>, <span class="hljs-string">'é£ä¸€æ ·çš„ç”·å­'</span>)
<span class="hljs-keyword">ON</span> DUPLICATE KEY <span class="hljs-keyword">UPDATE</span> uk_column1<span class="hljs-operator">=</span><span class="hljs-string">'20050101003'</span>, uk_column2<span class="hljs-operator">=</span><span class="hljs-string">'ç”·ä¸‰å·'</span>, remark<span class="hljs-operator">=</span><span class="hljs-string">'æš´é£ä¸€æ ·çš„ç”·å­'</span>;
</code></pre>
<p>ä¼šæ˜¯æ€ä¹ˆæ ·çš„ä¸€ä¸ªç»“æœï¼Œä½ ä»¬å¯ä»¥å¤§èƒ†çŒœä¸€ä¸‹ã€‚è¿™ä¸¤ä¸ª SQL çš„æ‰§è¡Œç»“æœæ˜¯ä¸€æ ·çš„</p>
<div align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fcc56051e4c24b888d7ccb70fed7bba3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S55-z6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767142624&amp;x-signature=W%2BDJ5QTi1N%2BUfCrqrtRoX2vn0ik%3D" alt="ç”·ä¸‰æµ©" loading="lazy"/></div>
<p>æ­¤æ—¶ä½ ä»¬æ˜¯ä¸æ˜¯æœ‰ç–‘é—®å‘¢</p>
<blockquote>
<p>ä¸ºä»€ä¹ˆæ‹¿æ‰ <code>name</code> å’Œæ‹¿æ‰ <code>id</code> çš„ INSERT ... ON DUPLICATE KEY UPDATE çš„æ‰§è¡Œç»“æœä¼šæ˜¯ä¸€æ ·çš„ï¼Ÿ</p>
</blockquote>
<p>è¿™ä¸ªé—®é¢˜å…ˆæ”¾ä¸€æ”¾ï¼Œæˆ‘ä»¬å…ˆå½•å…¥å¥³ä¸€å·çš„æ•°æ®</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">INSERT</span> tbl_insert_on_update(id, name, uk_column1, uk_column2, remark)
<span class="hljs-keyword">VALUES</span>(<span class="hljs-number">2</span>, <span class="hljs-string">'å©‰å„¿'</span>, <span class="hljs-string">'20050101001X'</span>, <span class="hljs-string">'å¥³ä¸€å·'</span>, <span class="hljs-string">'èŠ±ä¸€æ ·çš„å¥³å­'</span>);
</code></pre>
<p>å‡è®¾æˆ‘ä»¬è¦ä¿®æ”¹å¥³ä¸€å·çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ <code>å§“å</code>ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥è¿™ä¹ˆå®ç°</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">INSERT</span> tbl_insert_on_update(id, name, uk_column1, uk_column2, remark)
<span class="hljs-keyword">VALUES</span>(<span class="hljs-number">2</span>, <span class="hljs-string">'å©‰å„¿'</span>, <span class="hljs-string">'20050101001X'</span>, <span class="hljs-string">'å¥³ä¸€å·'</span>, <span class="hljs-string">'èŠ±ä¸€æ ·çš„å¥³å­'</span>)
<span class="hljs-keyword">ON</span> DUPLICATE KEY <span class="hljs-keyword">UPDATE</span>, name<span class="hljs-operator">=</span><span class="hljs-string">'å¼ ä¸‰'</span>, uk_column1<span class="hljs-operator">=</span><span class="hljs-string">'20050101002X'</span>, uk_column2<span class="hljs-operator">=</span><span class="hljs-string">'å¥³äºŒå·'</span>, remark<span class="hljs-operator">=</span><span class="hljs-string">'ç‰µç‰›èŠ±ä¸€æ ·çš„å¥³å­'</span>;
</code></pre>
<p>æœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Œæ‰§è¡Œä¸‹å°±çŸ¥é“äº†å˜›</p>
<div align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80d7289949da4d01b4e54029844f72f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S55-z6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767142624&amp;x-signature=%2BaD5b68%2Fb3%2FAFjXpF2yQROcxhfU%3D" alt="å”¯ä¸€ç´¢å¼•å†²çª" width="90%" loading="lazy"/></div>
<p>æ‰§è¡ŒæŠ¥é”™äº†ï¼Œæç¤º</p>
<blockquote>
<p>1062 - Duplicate entry 'å¼ ä¸‰' for key 'tbl_insert_on_update.name'</p>
</blockquote>
<p>è¿™ä¸ªé”™è¯¯ä¿¡æ¯æˆ‘ä»¬æ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Ÿä¸å°±æ˜¯å”¯ä¸€ç´¢å¼•å†²çªå—ï¼Ÿé‚£ä¹ˆé—®é¢˜åˆæ¥äº†</p>
<blockquote>
<p>ç”¨äº†MySQLçš„INSERT ON DUPLICATE KEY UPDATEï¼Œä¸ºä»€ä¹ˆè¿˜ä¼šå”¯ä¸€ç´¢å¼•å†²çªï¼Ÿ</p>
</blockquote>
<h2 data-id="heading-2">å¦‚ä½•åˆ¤æ–­æ˜¯å¦å­˜åœ¨</h2>
<p>æˆ‘ä»¬å†™ <code>INSERT ... ON DUPLICATE KEY UPDATE</code> è¯­å¥æ—¶ï¼Œå¹¶æœªæŒ‡å®šç”¨å“ªä¸ª <code>ä¸»é”®</code> æˆ–è€… <code>å”¯ä¸€ç´¢å¼•</code> æ¥åˆ¤å®šè®°å½•æ˜¯å¦å­˜åœ¨</p>
<blockquote>
<p>Oracleã€SQL Serverã€PostgreSQL çš„ <code>MERGE</code> æœ‰ç±»ä¼¼ä½œç”¨</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">MERGE</span> <span class="hljs-keyword">INTO</span> TBL_INSERT_ON_UPDATE t
<span class="hljs-keyword">USING</span> (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">AS</span> ID, <span class="hljs-string">'å¼ ä¸‰'</span> <span class="hljs-keyword">AS</span> NAME, <span class="hljs-string">'20050101001'</span> <span class="hljs-keyword">AS</span> UK_COLUMN1, <span class="hljs-string">'ç”·ä¸€å·'</span> <span class="hljs-keyword">AS</span> UK_COLUMN2, <span class="hljs-string">'é£ä¸€æ ·çš„ç”·å­'</span> <span class="hljs-keyword">AS</span> REMARK <span class="hljs-keyword">FROM</span> dual
) s
<span class="hljs-keyword">ON</span> (t.NAME <span class="hljs-operator">=</span> s.NAME)  <span class="hljs-comment">-- åŸºäº NAME å­—æ®µåŒ¹é…</span>
<span class="hljs-keyword">WHEN</span> MATCHED <span class="hljs-keyword">THEN</span>
    <span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">SET</span>
        t.ID <span class="hljs-operator">=</span> s.ID,
        t.UK_COLUMN1 <span class="hljs-operator">=</span> s.UK_COLUMN1,
        t.UK_COLUMN2 <span class="hljs-operator">=</span> s.UK_COLUMN2,
        t.REMARK <span class="hljs-operator">=</span> s.REMARK
<span class="hljs-keyword">WHEN</span> <span class="hljs-keyword">NOT</span> MATCHED <span class="hljs-keyword">THEN</span>
    <span class="hljs-keyword">INSERT</span> (ID, NAME, UK_COLUMN1, UK_COLUMN2, REMARK)
    <span class="hljs-keyword">VALUES</span> (s.ID, s.NAME, s.UK_COLUMN1, s.UK_COLUMN2, s.REMARK);
</code></pre>
<p>å…¶ä¸­çš„ <code>ON</code>  æ˜ç¡®æŒ‡å®šåŒ¹é…å­—æ®µï¼ˆæ ¹æ®å“ªäº›å­—æ®µåˆ¤æ–­è®°å½•æ˜¯å¦å­˜åœ¨ï¼‰ï¼Œä¸€èˆ¬æ˜¯æŒ‡å®š <code>ä¸»é”®</code>å­—æ®µæˆ– <code>å”¯ä¸€ç´¢å¼•</code>å­—æ®µ</p>
</blockquote>
<p>é‚£ MySQL æ˜¯å¦‚ä½•åˆ¤å®šè®°å½•æ˜¯å¦å­˜åœ¨çš„å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ç¿»é˜…ä¸‹å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.mysql.com%2Fdoc%2Frefman%2F8.0%2Fen%2Finsert-on-duplicate.html" target="_blank" title="https://dev.mysql.com/doc/refman/8.0/en/insert-on-duplicate.html" ref="nofollow noopener noreferrer">INSERT ... ON DUPLICATE KEY UPDATE Statement</a>ã€‚ä¸€å¼€å¤´æœ‰å¦‚ä¸‹ä¸€æ®µæè¿°</p>
<blockquote>
<p>If you specify an <code>ON DUPLICATE KEY UPDATE</code> clause and a row to be inserted would cause a duplicate value in a <code>UNIQUE</code> index or <code>PRIMARY KEY</code>, an <a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.mysql.com%2Fdoc%2Frefman%2F8.0%2Fen%2Fupdate.html" target="_blank" title="https://dev.mysql.com/doc/refman/8.0/en/update.html" ref="nofollow noopener noreferrer"><code>UPDATE</code></a> of the old row occurs</p>
<p>å½“æˆ‘ä»¬ä½¿ç”¨ <code>ON DUPLICATE KEY UPDATE</code>  å­å¥æ—¶ï¼Œæ’å…¥çš„è¡Œå¯¼è‡´ <code>å”¯ä¸€</code> ç´¢å¼•æˆ–è€… <code>ä¸»é”®</code> é‡å¤æ—¶ï¼Œä¼šæ›´æ–°æ—§çš„è¡Œ</p>
</blockquote>
<p>é€šè¿‡è¿™æ®µè¯ï¼Œæˆ‘ä»¬åªçŸ¥é“ MySQL æ˜¯æ ¹æ®å”¯ä¸€ç´¢å¼•æˆ–ä¸»é”®æ¥åˆ¤å®šè¡Œæ˜¯å¦å­˜åœ¨ï¼Œå¹¶ä¸çŸ¥é“</p>
<ol>
<li>å…ˆæ ¹æ®ä¸»é”®åˆ¤å®šï¼Œä¸å†²çªä¹‹åå†æ ¹æ®å”¯ä¸€ç´¢å¼•åˆ¤å®šï¼Ÿ</li>
<li>æœ‰å¤šä¸ªå”¯ä¸€ç´¢å¼•æ—¶ï¼Œè¿™äº›å”¯ä¸€ç´¢å¼•çš„åˆ¤å®šä¼˜å…ˆçº§æ˜¯æ€æ ·çš„ï¼Ÿ</li>
</ol>
<p>å®˜æ–¹æ–‡æ¡£é‡Œé¢å¹¶æœªæ˜ç¡®è¯´æ˜è¿™äº›é—®é¢˜ï¼Œåªæ˜¯åœ¨ç»“å°¾è¿›è¡Œäº†å¦‚ä¸‹è¯´æ˜</p>
<blockquote>
<p>An <a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.mysql.com%2Fdoc%2Frefman%2F8.0%2Fen%2Finsert-on-duplicate.html" target="_blank" title="https://dev.mysql.com/doc/refman/8.0/en/insert-on-duplicate.html" ref="nofollow noopener noreferrer"><code>INSERT ... ON DUPLICATE KEY UPDATE</code></a> statement against a table having more than one unique or primary key is also marked as unsafe. (Bug #11765650, Bug #58637)</p>
<p>å½“è¡¨ä¸­æœ‰å¤šä¸ªå”¯ä¸€ç´¢å¼•æˆ–è€…ä¸»é”®æ—¶ï¼ŒINSERT ... ON DUPLICATE KEY UPDATE è¯­å¥ä¸å®‰å…¨</p>
</blockquote>
<p>ä¸å®‰å…¨ä»£è¡¨æ‰§è¡Œç»“æœä¸å›ºå®šï¼Œä¼šå‡ºç°æˆ‘ä»¬é¢„æœŸä¹‹å¤–çš„ç»“æœ</p>
<h2 data-id="heading-3">å·¥ä½œåŸç†</h2>
<p>å¦‚æœè®©ä½ ä»¬æ¥å®ç° <code>ä¸å­˜åœ¨åˆ™æ’å…¥ï¼Œå­˜åœ¨åˆ™æ›´æ–°</code>ï¼Œä½ ä»¬ä¼šæ€ä¹ˆå®ç°ï¼Ÿ</p>
<p>é€ä¸ªæŸ¥è¯¢ä¸»é”®ä»¥åŠæ‰€æœ‰å”¯ä¸€ç´¢å¼•ï¼Œåˆ¤æ–­è¯¥è¡Œæ•°æ®æ˜¯å¦å­˜åœ¨ï¼Œä¸€æ—¦å­˜åœ¨åˆ™æ ¹æ®é‡å¤çš„ä¸»é”®æˆ–è€…å”¯ä¸€ç´¢å¼•è¿›è¡Œ <code>UPDATE</code>ï¼Œéƒ½ä¸å­˜åœ¨åˆ™è¿›è¡Œ <code>INSERT</code>ï¼›è¿™ä¸ä»…æ˜¯ä½ ä»¬æœ€å®¹æ˜“æƒ³åˆ°çš„å®ç°æ–¹å¼ï¼Œä¹Ÿæ˜¯æˆ‘æœ€å®¹æ˜“æƒ³åˆ°çš„æ–¹å¼ã€‚</p>
<p>ä½† MySQL å¹¶æœªé‡‡ç”¨è¿™ç§æ–¹å¼ï¼Œè€Œæ˜¯é‡‡ç”¨äº†å¦å¤–ä¸€ç§æ›´é«˜æ•ˆçš„æ–¹å¼ï¼Œå…ˆå°è¯•æ’å…¥ï¼Œå­˜å‚¨å¼•æ“ä¼šå‘<strong>æ‰€æœ‰ç›¸å…³çš„å”¯ä¸€ç´¢å¼•ï¼ˆåŒ…æ‹¬ä¸»é”®ï¼‰</strong> ä¸­æ’å…¥å¯¹åº”çš„ç´¢å¼•æ¡ç›®ï¼Œå¦‚æœéƒ½æ’å…¥æˆåŠŸï¼Œè¯´æ˜æ•°æ®è¡Œä¸å­˜åœ¨ï¼Œé‚£ä¹ˆ <code>INSERT</code> æ•°æ®è¡Œï¼›ä¸€æ—¦å­˜å‚¨å¼•æ“å°è¯•æ’å…¥æŸä¸ªå”¯ä¸€ç´¢å¼•æ—¶ï¼Œå‘ç°è¯¥æ•°æ®è¡Œå·²ç»å­˜åœ¨ï¼Œä¼šç«‹å³åœæ­¢æ’å…¥åŠ¨ä½œï¼Œå¹¶å‘MySQLæœåŠ¡å±‚æŠ›å‡º <code>é‡å¤é”®</code> é”™è¯¯ï¼ŒæœåŠ¡å±‚æ”¶åˆ°é‡å¤é”®é”™è¯¯åï¼Œå¹¶ä¸ä¼šè®©æ•´ä¸ªè¯­å¥å¤±è´¥ï¼ˆå› ä¸ºä½¿ç”¨äº† ON DUPLICATE KEY UPDATE å­å¥ï¼‰ï¼Œè€Œæ˜¯è½¬æ¢æ‰§è¡Œæ¨¡å¼ï¼Œä¼šå…ˆå›æ»šä¹‹å‰çš„æ’å…¥ï¼Œç„¶åæ ¹æ®é‡å¤çš„é‚£ä¸ªå”¯ä¸€ç´¢å¼•æ‰¾åˆ°æ•°æ®è¡Œå¯¹åº”çš„ <code>æ—§è¡Œ</code> æ•°æ®ï¼Œæœ€å <code>UPDATE</code> æ•°æ®è¡Œï¼›æ€»ç»“ä¸‹æ¥åˆ†ä¸‰æ­¥</p>
<ol>
<li>
<p>å°è¯•æ’å…¥</p>
<p>æ‰€æœ‰å”¯ä¸€ç´¢å¼•ï¼ˆåŒ…æ‹¬ä¸»é”®ï¼‰éƒ½æ’å…¥æˆåŠŸï¼Œåˆ™æ’å…¥æ•°æ®è¡Œï¼Œç›¸å½“äºå®Œæˆæ™®é€šçš„ <code>INSERT</code></p>
<p>ä¸€æ—¦æŸä¸ªå”¯ä¸€ç´¢å¼•æ’å…¥å¤±è´¥ï¼Œåˆ™ç«‹å³åœæ­¢æ’å…¥ï¼Œå­˜å‚¨å¼•æ“ä¼šå‘ä¸Šå±‚æŠ›å‡ºä¸€ä¸ª <code>é‡å¤é”®</code> é”™è¯¯</p>
</li>
<li>
<p>æ¨¡å¼è½¬æ¢</p>
<p>MySQLæœåŠ¡å™¨æ”¶åˆ°é‡å¤é”®åï¼Œå‘ç°æ‰§è¡Œè¯­å¥ä¸­æœ‰ <code>ON DUPLICATE KEY UPDATE</code> å­å¥ï¼Œä¸ä¼šç›´æ¥è®©æ•´ä¸ªè¯­å¥å¤±è´¥ï¼Œè€Œæ˜¯å…ˆå›æ»šä¹‹å‰çš„é‚£éƒ¨åˆ†å”¯ä¸€ç´¢å¼•çš„æ’å…¥ï¼Œç„¶åæ ¹æ®æ’å…¥å¤±è´¥çš„å”¯ä¸€ç´¢å¼•æ‰¾åˆ°å·²ç»å­˜åœ¨çš„ <code>æ—§è¡Œ</code></p>
</li>
<li>
<p>æ‰§è¡Œæ›´æ–°</p>
<p>æ ¹æ®æ’å…¥å¤±è´¥çš„å”¯ä¸€ç´¢å¼•ï¼Œå¯¹æ—§è¡Œæ‰§è¡Œæ›´æ–°æ“ä½œï¼Œç›¸å½“äºå®Œæˆæ™®é€šçš„ <code>UPDATE</code></p>
</li>
</ol>
<p>æ•´ä¸ª <code>å°è¯•-å¤±è´¥-è½¬æ¢-æ›´æ–°</code> è¿‡ç¨‹æ—¶ä¸€ä¸ªåŸå­æ“ä½œï¼Œé‚£ä¹ˆå®Œå…¨æˆåŠŸï¼Œè¦ä¹ˆå®Œå…¨å¤±è´¥ï¼›ç›¸æ¯”äº <code>å…ˆæŸ¥è¯¢ååˆ¤æ–­</code> çš„ä¼ ç»Ÿå®ç°ï¼Œè¿™ç§å®ç°æ–¹å¼æ•ˆç‡æ›´é«˜ã€‚</p>
<h2 data-id="heading-4">é—®é¢˜ç­”ç–‘</h2>
<p>å‰é¢æ¶‰åŠåˆ°ä¸¤ä¸ªé—®é¢˜ï¼Œç°åœ¨æˆ‘ä»¬æ¥è§£æƒ‘ä¸‹</p>
<ol>
<li>
<p>ä¸ºä»€ä¹ˆæ‹¿æ‰ <code>name</code> å’Œæ‹¿æ‰ <code>id</code> çš„ INSERT ... ON DUPLICATE KEY UPDATE çš„æ‰§è¡Œç»“æœä¼šæ˜¯ä¸€æ ·çš„ï¼Ÿ</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ‹¿æ‰name</span>
<span class="hljs-keyword">INSERT</span> tbl_insert_on_update(id, uk_column1, uk_column2, remark)
<span class="hljs-keyword">VALUES</span>(<span class="hljs-number">1</span>, <span class="hljs-string">'20050101001'</span>, <span class="hljs-string">'ç”·ä¸€å·'</span>, <span class="hljs-string">'é£ä¸€æ ·çš„ç”·å­'</span>)
<span class="hljs-keyword">ON</span> DUPLICATE KEY <span class="hljs-keyword">UPDATE</span> uk_column1<span class="hljs-operator">=</span><span class="hljs-string">'20050101003'</span>, uk_column2<span class="hljs-operator">=</span><span class="hljs-string">'ç”·ä¸‰å·'</span>, remark<span class="hljs-operator">=</span><span class="hljs-string">'æš´é£ä¸€æ ·çš„ç”·å­'</span>;

<span class="hljs-comment">-- æ‹¿æ‰id</span>
<span class="hljs-keyword">INSERT</span> tbl_insert_on_update(name, uk_column1, uk_column2, remark)
<span class="hljs-keyword">VALUES</span>(<span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-string">'20050101001'</span>, <span class="hljs-string">'ç”·ä¸€å·'</span>, <span class="hljs-string">'é£ä¸€æ ·çš„ç”·å­'</span>)
<span class="hljs-keyword">ON</span> DUPLICATE KEY <span class="hljs-keyword">UPDATE</span> uk_column1<span class="hljs-operator">=</span><span class="hljs-string">'20050101003'</span>, uk_column2<span class="hljs-operator">=</span><span class="hljs-string">'ç”·ä¸‰å·'</span>, remark<span class="hljs-operator">=</span><span class="hljs-string">'æš´é£ä¸€æ ·çš„ç”·å­'</span>;
</code></pre>
<p>è¿™ä¸ªé—®é¢˜æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥åˆ†æä¸‹</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">INSERT</span> tbl_insert_on_update(id, uk_column1, uk_column2, remark)
<span class="hljs-keyword">VALUES</span>(<span class="hljs-number">1</span>, <span class="hljs-string">'20050101001'</span>, <span class="hljs-string">'ç”·ä¸€å·'</span>, <span class="hljs-string">'é£ä¸€æ ·çš„ç”·å­'</span>)
<span class="hljs-keyword">ON</span> DUPLICATE KEY <span class="hljs-keyword">UPDATE</span> uk_column1<span class="hljs-operator">=</span><span class="hljs-string">'20050101003'</span>, uk_column2<span class="hljs-operator">=</span><span class="hljs-string">'ç”·ä¸‰å·'</span>, remark<span class="hljs-operator">=</span><span class="hljs-string">'æš´é£ä¸€æ ·çš„ç”·å­'</span>;
</code></pre>
<p>INSERT çš„å­—æ®µä¸­æ²¡æœ‰ <code>name</code>ï¼Œä½†æœ‰ <code>id</code>ï¼Œå¯æƒ³è€ŒçŸ¥åˆ¤æ–­æ•°æ®è¡Œæ˜¯å¦å­˜åœ¨ï¼Œç”¨åˆ°çš„æ˜¯ <code>ä¸»é”®</code>ï¼Œå› ä¸º <code>id=1</code> çš„è®°å½•å·²ç»å­˜åœ¨ï¼Œæ‰€ä»¥æ ¹æ® id å»æ›´æ–°å…¶ä»–å­—æ®µå€¼ï¼›é‚£ä¹ˆæ‰§è¡Œç»“æœä¸å¦‚ä¸‹ SQL ä¸€è‡´</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">UPDATE</span> tbl_insert_on_update <span class="hljs-keyword">SET</span> uk_column1<span class="hljs-operator">=</span><span class="hljs-string">'20050101003'</span>, uk_column2<span class="hljs-operator">=</span><span class="hljs-string">'ç”·ä¸‰å·'</span>, remark<span class="hljs-operator">=</span><span class="hljs-string">'æš´é£ä¸€æ ·çš„ç”·å­'</span> <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
</code></pre>
<p>åŒç†</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">INSERT</span> tbl_insert_on_update(name, uk_column1, uk_column2, remark)
<span class="hljs-keyword">VALUES</span>(<span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-string">'20050101001'</span>, <span class="hljs-string">'ç”·ä¸€å·'</span>, <span class="hljs-string">'é£ä¸€æ ·çš„ç”·å­'</span>)
<span class="hljs-keyword">ON</span> DUPLICATE KEY <span class="hljs-keyword">UPDATE</span> uk_column1<span class="hljs-operator">=</span><span class="hljs-string">'20050101003'</span>, uk_column2<span class="hljs-operator">=</span><span class="hljs-string">'ç”·ä¸‰å·'</span>, remark<span class="hljs-operator">=</span><span class="hljs-string">'æš´é£ä¸€æ ·çš„ç”·å­'</span>;
</code></pre>
<p>INSERT çš„å­—æ®µä¸­æ²¡æœ‰ <code>id</code>ï¼Œä½†æœ‰ <code>name</code>ï¼Œå¯æƒ³è€ŒçŸ¥åˆ¤æ–­æ•°æ®è¡Œæ˜¯å¦å­˜åœ¨ï¼Œç”¨åˆ°çš„æ˜¯ <code>å”¯ä¸€ç´¢å¼•</code>ï¼Œå› ä¸º <code>name=å¼ ä¸‰</code> çš„è®°å½•å·²ç»å­˜åœ¨ï¼Œæ‰€ä»¥æ ¹æ® name å»æ›´æ–°å…¶ä»–å­—æ®µå€¼ï¼›é‚£ä¹ˆæ‰§è¡Œç»“æœä¸å¦‚ä¸‹ SQL ä¸€è‡´</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">UPDATE</span> tbl_insert_on_update <span class="hljs-keyword">SET</span> uk_column1<span class="hljs-operator">=</span><span class="hljs-string">'20050101003'</span>, uk_column2<span class="hljs-operator">=</span><span class="hljs-string">'ç”·ä¸‰å·'</span>, remark<span class="hljs-operator">=</span><span class="hljs-string">'æš´é£ä¸€æ ·çš„ç”·å­'</span> <span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">'å¼ ä¸‰'</span>;
</code></pre>
<p><code>id = 1</code> ä¸ <code>name = 'å¼ ä¸‰'</code> æŒ‡å‘çš„æœ¬æ¥å°±æ˜¯åŒä¸€è¡Œæ•°æ®ï¼Œæ›´æ–°çš„åˆ—ä¸åˆ—å€¼éƒ½ä¸€è‡´ï¼Œé‚£ä¹ˆæ‰§è¡Œç»“æœè‡ªç„¶å°±ä¸€æ ·äº†</p>
</li>
<li>
<p>å­˜åœ¨å¤šä¸ªå”¯ä¸€ç´¢å¼•ï¼ˆåŒ…å«ä¸»é”®ï¼‰æ—¶ï¼Œåˆ¤æ–­æ•°æ®è¡Œæ˜¯å¦å­˜åœ¨ï¼Œè¿™äº›å”¯ä¸€ç´¢å¼•çš„ä¼˜å…ˆçº§é¡ºåºæ˜¯æ€æ ·çš„ï¼Ÿ</p>
<p>MySQL å®˜æ–¹æ–‡æ¡£å¹¶æœªæ˜ç¡®è¯´æ˜è¿™ä¸ªä¼˜å…ˆçº§é¡ºåºï¼Œä½†åœ¨ MySQL çš„å®ç°ä¸­è‚¯å®šæœ‰è¿™ä¸ªä¼˜å…ˆçº§é¡ºåºçš„å®ç°ç®—æ³•ï¼Œå¯èƒ½è·Ÿç‰ˆæœ¬ã€å­˜å‚¨å¼•æ“æœ‰å…³</p>
<p>åŸºäº <code>8.0.31</code> ç‰ˆæœ¬ï¼Œç®€å•æµ‹è¯•å‡ºä»¥ä¸‹ä¼˜å…ˆçº§</p>
<blockquote>
<p>ä¸»é”® &gt; å”¯ä¸€ç´¢å¼•</p>
<p>å”¯ä¸€ç´¢å¼•ä¹‹é—´æŒ‰åˆ›å»ºé¡ºåºï¼Œå…ˆåˆ›å»ºçš„ä¼˜å…ˆçº§é«˜</p>
</blockquote>
<p>å®˜æ–¹æ–‡æ¡£å·²ç»æ˜ç¡®è¯´æ˜ï¼šå½“è¡¨ä¸­æœ‰å¤šä¸ªå”¯ä¸€ç´¢å¼•æˆ–è€…ä¸»é”®æ—¶ï¼ŒINSERT ... ON DUPLICATE KEY UPDATE è¯­å¥ä¸å®‰å…¨ï¼Œæ‰€ä»¥å¦‚ä¸Šçš„æµ‹è¯•ç»“æœå¹¶ä¸å…·å¤‡ç¡®å®šæ€§ï¼Œä¸èƒ½ä½œä¸ºä½¿ç”¨å‡†åˆ™</p>
</li>
<li>
<p>ç”¨äº†MySQLçš„INSERT ON DUPLICATE KEY UPDATEï¼Œæ€ä¹ˆè¿˜æŠ¥å”¯ä¸€ç´¢å¼•å†²çªé”™è¯¯</p>
<p>MySQLæ˜¯åŸºäºå°è¯•æ’å…¥çš„ç¬¬ä¸€ä¸ªå†²çªçš„å”¯ä¸€ç´¢å¼•æ¥æ‰§è¡Œæ›´æ–°çš„ï¼Œæ›´æ–°çš„å­—æ®µå®Œå…¨æœ‰å¯èƒ½è§¦å‘å…¶ä»–å”¯ä¸€ç´¢å¼•ï¼ˆåŒ…æ‹¬ä¸»é”®ï¼‰å†²çª</p>
<p>è¿™ä¸ªé—®é¢˜æ ¹æœ¬ä¸æˆç«‹ï¼</p>
</li>
</ol>
<h2 data-id="heading-5">æ€»ç»“</h2>
<ol>
<li>
<p>ä¸ç®¡æ˜¯ MySQLï¼Œè¿˜æ˜¯ Oracleã€SQL Serverã€PostgreSQLï¼Œé’ˆå¯¹ <code>ä¸å­˜åœ¨åˆ™æ’å…¥ï¼Œå­˜åœ¨åˆ™æ›´æ–°</code> åˆ¤æ–­æ•°æ®æ˜¯å¦å­˜åœ¨çš„é€»è¾‘éƒ½æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯ MySQL ä¸éœ€è¦æ˜¾ç¤ºæŒ‡å®š <code>åˆ¤å­˜</code> çš„å”¯ä¸€ç´¢å¼•ï¼ˆåŒ…æ‹¬ä¸»é”®ï¼‰ï¼Œç”± MySQL å¼•æ“å†…éƒ¨è‡ªåŠ¨å®ç°</p>
</li>
<li>
<p>å…³äºåˆ¤æ–­æ•°æ®è¡Œæ˜¯å¦å­˜åœ¨ï¼Œå¤šä¸ªå”¯ä¸€ç´¢å¼•çš„ä¼˜å…ˆçº§ï¼Œçœ‹ä¼¼èƒ½æµ‹å‡º MySQL ä¸­çš„ä¼˜å…ˆçº§ï¼Œä½†å¹¶ä¸å…·å¤‡ç¡®å®šæ€§ï¼Œä¸èƒ½ä½œä¸ºä½¿ç”¨å‡†åˆ™</p>
<p>ç±»ä¼¼ä¸ç¡®å®šçš„æ’åºé—®é¢˜è¿˜æœ‰ï¼š<a href="https://juejin.cn/post/7290017749715632168" target="_blank" title="https://juejin.cn/post/7290017749715632168">æˆ‘è¯•å›¾æ‰¯æ‰è¿™æ¡ SQL çš„åº•è£¤</a></p>
</li>
<li>
<p>INSERT ... ON DUPLICATE KEY UPDATE ä½¿ç”¨è¿‡ç¨‹ä¸­æœ‰ä¸€äº›éœ€è¦æ³¨æ„çš„ç‚¹ï¼Œéœ€è¦ç»“åˆè‡ªå·±çš„ä¸šåŠ¡æ¥åˆ†ææ˜¯å¦å¯ä»¥å¿½ç•¥è¿™äº›ç‚¹</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Fyouzhibing%2Fp%2F15248758.html" target="_blank" title="https://www.cnblogs.com/youzhibing/p/15248758.html" ref="nofollow noopener noreferrer">è®°å½•ä¸å­˜åœ¨åˆ™æ’å…¥ï¼Œå­˜åœ¨åˆ™æ›´æ–° â†’ MySQL çš„å®ç°æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</a></p>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç»™å‰ç«¯æ˜æ˜Ÿå¼€æºé¡¹ç›®Biomeæ PRï¼Œè¢« Snapshot æµ‹è¯•å‘äº†ä¸€æŠŠ]]></title>    <link>https://juejin.cn/post/7586983243925782566</link>    <guid>https://juejin.cn/post/7586983243925782566</guid>    <pubDate>2025-12-24T05:27:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586983243925782566" data-draft-id="7586983243925766182" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç»™å‰ç«¯æ˜æ˜Ÿå¼€æºé¡¹ç›®Biomeæ PRï¼Œè¢« Snapshot æµ‹è¯•å‘äº†ä¸€æŠŠ"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,æµ‹è¯•"/> <meta itemprop="datePublished" content="2025-12-24T05:27:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/2175258804632332"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç»™å‰ç«¯æ˜æ˜Ÿå¼€æºé¡¹ç›®Biomeæ PRï¼Œè¢« Snapshot æµ‹è¯•å‘äº†ä¸€æŠŠ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2175258804632332/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T05:27:55.000Z" title="Wed Dec 24 2025 05:27:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Snapshot æµ‹è¯•ï¼šä»ä¸€æ¬¡ CI å¤±è´¥è¯´èµ·</h2>
<p>æœ€è¿‘ç»™ Biome æäº†ä¸ª PRï¼Œæ”¹äº†å‡ ä¸ªæ–‡ä»¶ï¼Œæœ¬åœ°æµ‹è¯•è·‘è¿‡äº†ï¼Œpush ä¸Šå»ï¼ŒCI æŒ‚äº†ã€‚</p>
<p>æŠ¥é”™ä¿¡æ¯æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">---- specs::nursery::no_undeclared_env_vars::invalid_js stdout ----
thread <span class="hljs-string">'specs::nursery::no_undeclared_env_vars::invalid_js'</span> panicked at
crates/biome_js_analyze/tests/spec_tests.rs:<span class="hljs-number">19</span>:<span class="hljs-number">5</span>:

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Snapshot file: crates/biome_js_analyze/tests/specs/nursery/noUndeclaredEnvVars/invalid.js.snap
Snapshot: invalid_js
Source: crates/biome_js_analyze/tests/spec_tests.rs:<span class="hljs-number">19</span>

-old snapshot
+<span class="hljs-keyword">new</span> results
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
</code></pre>
<p>ä¸€è„¸æ‡µã€‚æˆ‘æ”¹çš„æ˜¯ <code>--stdin-file-path</code> çš„é€»è¾‘ï¼Œè·Ÿ <code>noUndeclaredEnvVars</code> è¿™ä¸ª lint è§„åˆ™æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ</p>
<p>åæ¥ææ˜ç™½äº†ï¼šæˆ‘çš„åˆ†æ”¯è½åäº mainï¼Œrebase ä¹‹åæŠŠä¸Šæ¸¸çš„æ”¹åŠ¨åˆè¿›æ¥äº†ã€‚ä¸Šæ¸¸ç»™è¿™ä¸ªè§„åˆ™åŠ äº†ä¸€è¡Œæç¤ºä¿¡æ¯ï¼Œä½†å¿«ç…§æ–‡ä»¶è¿˜æ˜¯æ—§çš„ï¼Œæ‰€ä»¥æµ‹è¯•å¤±è´¥ã€‚</p>
<p>è¿™å°±æ˜¯ snapshot æµ‹è¯•ã€‚</p>
<h3 data-id="heading-1">ä»€ä¹ˆæ˜¯ snapshot æµ‹è¯•</h3>
<p>Snapshotï¼Œç›´è¯‘å°±æ˜¯"å¿«ç…§"ã€‚ç”Ÿæ´»ä¸­çš„å¿«ç…§æ˜¯æŸä¸ªæ—¶åˆ»çš„ç…§ç‰‡ï¼Œä»£ç é‡Œçš„ snapshot æ˜¯æŸä¸ªæ—¶åˆ»ç¨‹åºè¾“å‡ºçš„"ç…§ç‰‡"ã€‚</p>
<p>ä¼ ç»Ÿæµ‹è¯•æ˜¯è¿™æ ·å†™çš„ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// ä½ å¾—æ‰‹åŠ¨å†™å‡ºæœŸæœ›çš„è¾“å‡º</span>
<span class="hljs-built_in">assert_eq!</span>(<span class="hljs-title function_ invoke__">format</span>(<span class="hljs-string">"let x=1"</span>), <span class="hljs-string">"let x = 1;\n"</span>);
</code></pre>
<p>Snapshot æµ‹è¯•æ¢äº†ä¸ªæ€è·¯ï¼š<strong>ä½ ä¸ç”¨å†™æœŸæœ›å€¼ï¼Œè®©ç¨‹åºè‡ªå·±è®°å½•ã€‚</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">ç¬¬ä¸€æ¬¡è·‘æµ‹è¯•ï¼š
  è¾“å…¥ â†’ ç¨‹åº â†’ è¾“å‡º â†’ è‡ªåŠ¨ä¿å­˜æˆ .snap æ–‡ä»¶ï¼ˆè¿™å°±æ˜¯<span class="hljs-string">"å¿«ç…§"</span>ï¼‰

åç»­è·‘æµ‹è¯•ï¼š
  è¾“å…¥ â†’ ç¨‹åº â†’ è¾“å‡º â†’ è·Ÿ .snap æ–‡ä»¶æ¯”å¯¹
                         â”‚
                         â”œâ”€â”€ ä¸€æ · â†’ é€šè¿‡
                         â””â”€â”€ ä¸ä¸€æ · â†’ å¤±è´¥ï¼Œæ˜¾ç¤º diff
</code></pre>
<p>ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶ï¼Œæµ‹è¯•æ¡†æ¶ä¼šé—®ä½ ï¼š"è¿™ä¸ªè¾“å‡ºå¯¹å—ï¼Ÿ"ä½ ç¡®è®¤åï¼Œå®ƒå°±æŠŠè¾“å‡ºå­˜æˆ <code>.snap</code> æ–‡ä»¶ã€‚ä¹‹åæ¯æ¬¡è¿è¡Œï¼Œéƒ½æ‹¿æ–°è¾“å‡ºè·Ÿè¿™ä¸ªæ–‡ä»¶æ¯”ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆå«"å¿«ç…§"ï¼Ÿ</strong></p>
<p>å› ä¸ºå®ƒè®°å½•çš„æ˜¯æŸä¸ªæ—¶é—´ç‚¹çš„çŠ¶æ€ã€‚å°±åƒä½ ç»™ä»£ç çš„è¾“å‡ºæ‹äº†å¼ ç…§ç‰‡ï¼Œä»¥åæ¯æ¬¡éƒ½æ‹¿æ–°è¾“å‡ºè·Ÿç…§ç‰‡å¯¹æ¯”ï¼Œçœ‹æœ‰æ²¡æœ‰å˜åŒ–ã€‚</p>
<p><strong>Snapshot æ–‡ä»¶å­˜ä»€ä¹ˆï¼Ÿ</strong></p>
<p>å°±æ˜¯çº¯æ–‡æœ¬ï¼Œè®°å½•ç¨‹åºçš„è¾“å‡ºã€‚æ¯”å¦‚æ ¼å¼åŒ–å·¥å…·çš„ snapshot å­˜çš„æ˜¯æ ¼å¼åŒ–åçš„ä»£ç ï¼ŒCLI å·¥å…·çš„ snapshot å­˜çš„æ˜¯å‘½ä»¤è¡Œè¾“å‡ºï¼ŒReact ç»„ä»¶çš„ snapshot å­˜çš„æ˜¯æ¸²æŸ“å‡ºæ¥çš„ DOM ç»“æ„ã€‚</p>
<p>æˆ‘é‡åˆ°çš„æƒ…å†µå°±æ˜¯ï¼šä¸Šæ¸¸æ”¹äº†è§„åˆ™çš„è¾“å‡ºï¼ˆå¤šäº†ä¸€è¡Œ "This rule belongs to the nursery group"ï¼‰ï¼Œä½† <code>.snap</code> æ–‡ä»¶è¿˜æ˜¯æ—§çš„ï¼Œæ–°è¾“å‡ºè·Ÿæ—§å¿«ç…§ä¸ä¸€æ ·ï¼Œæ‰€ä»¥æµ‹è¯•å¤±è´¥ã€‚</p>
<h3 data-id="heading-2">æ€ä¹ˆä¿®</h3>
<p>Biome ç”¨çš„æ˜¯ Rust ç”Ÿæ€çš„ <code>insta</code> åº“åš snapshot æµ‹è¯•ã€‚ä¿®èµ·æ¥å¾ˆç®€å•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…ˆæœ¬åœ°è·‘ä¸€éæµ‹è¯•ï¼Œç¡®è®¤æ˜¯ snapshot çš„é—®é¢˜</span>
cargo <span class="hljs-built_in">test</span>

<span class="hljs-comment"># æ¥å—æ–°çš„ snapshot</span>
cargo insta accept

<span class="hljs-comment"># æˆ–è€…ç”¨äº¤äº’æ¨¡å¼ï¼Œé€ä¸ªç¡®è®¤</span>
cargo insta review
</code></pre>
<p>è·‘å®Œ <code>cargo insta accept</code>ï¼Œå®ƒä¼šè‡ªåŠ¨æ›´æ–° <code>.snap</code> æ–‡ä»¶ã€‚commit è¿›å»ï¼Œpushï¼ŒCI å°±è¿‡äº†ã€‚</p>
<h3 data-id="heading-3">å¿«ç…§æ–‡ä»¶é•¿ä»€ä¹ˆæ ·</h3>
<p>çœ‹ä¸€çœ¼ Biome é‡Œçš„å¿«ç…§æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-meta">---</span>
<span class="hljs-attr">source:</span> <span class="hljs-string">crates/biome_cli/tests/snap_test.rs</span>
<span class="hljs-attr">expression:</span> <span class="hljs-string">content</span>
<span class="hljs-meta">---</span>
<span class="hljs-comment">## `biome.json`</span>

<span class="hljs-string">```json</span>
{ <span class="hljs-attr">"files":</span> { <span class="hljs-attr">"includes":</span> [<span class="hljs-string">"apps/**"</span>] } }
</code></pre>
<h2 data-id="heading-4">Emitted Messages</h2>
<pre><code class="hljs language-block" lang="block">function f() {
	return {};
}
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp">
å°±æ˜¯æŠŠæµ‹è¯•çš„è¾“å…¥ï¼ˆé…ç½®æ–‡ä»¶ï¼‰å’Œè¾“å‡ºï¼ˆæ ¼å¼åŒ–ç»“æœï¼‰éƒ½è®°ä¸‹æ¥ã€‚ä¸‹æ¬¡è·‘æµ‹è¯•ï¼Œè¾“å‡ºå˜äº†å°±èƒ½å‘ç°ã€‚

<span class="hljs-meta">## ä¸ºä»€ä¹ˆ Biome è¦ç”¨ snapshot æµ‹è¯•</span>

å…ˆæƒ³ä¸€ä¸ªé—®é¢˜ï¼šBiome æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ

ä»£ç æ ¼å¼åŒ–å’Œ lintã€‚è¾“å…¥ä¸€æ®µä»£ç ï¼Œè¾“å‡ºæ ¼å¼åŒ–åçš„ä»£ç ï¼Œæˆ–è€…è¾“å‡ºä¸€å † lint è­¦å‘Šã€‚

è¿™ç±»å·¥å…·æœ‰ä¸ªç‰¹ç‚¹ï¼š**è¾“å‡ºåˆé•¿åˆå¤æ‚ï¼Œè€Œä¸”ç»å¸¸å˜ã€‚**

æ¯”å¦‚æ ¼å¼åŒ– `<span class="hljs-function">function <span class="hljs-title">f</span>()</span>{<span class="hljs-keyword">return</span>{}}` è¿™æ®µä»£ç ï¼Œè¾“å‡ºæ˜¯ï¼š

```<span class="hljs-function">javascript
function <span class="hljs-title">f</span>()</span> {
	<span class="hljs-keyword">return</span> {};
}
</code></pre>
<p>å¦‚æœç”¨ä¼ ç»Ÿæµ‹è¯•ï¼Œä½ å¾—è¿™æ ·å†™ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-built_in">assert_eq!</span>(
    <span class="hljs-title function_ invoke__">format_code</span>(<span class="hljs-string">"function f(){return{}}"</span>),
    <span class="hljs-string">"function f() {\n\treturn {};\n}\n"</span>
);
</code></pre>
<p>é—®é¢˜æ¥äº†ï¼š</p>
<ol>
<li><strong>è¾“å‡ºå¤ªé•¿</strong>ï¼šè¿™è¿˜æ˜¯æœ€ç®€å•çš„ä¾‹å­ï¼ŒçœŸå®åœºæ™¯å¯èƒ½æ˜¯å‡ åä¸Šç™¾è¡Œä»£ç </li>
<li><strong>è½¬ä¹‰å­—ç¬¦åœ°ç‹±</strong>ï¼š<code>\n</code>ã€<code>\t</code> ä¸€å¤šï¼Œæ ¹æœ¬æ²¡æ³•è¯»</li>
<li><strong>æ”¹åŠ¨é¢‘ç¹</strong>ï¼šæ ¼å¼åŒ–è§„åˆ™ç»å¸¸è°ƒæ•´ï¼Œæ¯”å¦‚"å‡½æ•°å‰è¦ä¸è¦ç©ºè¡Œ"ï¼Œä¸€æ”¹å°±å¾—æ‰‹åŠ¨æ›´æ–°å‡ ç™¾ä¸ªæµ‹è¯•</li>
</ol>
<p>Biome æœ‰å‡ åƒä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œå¦‚æœæ¯ä¸ªéƒ½æ‰‹å†™æœŸæœ›å€¼ï¼Œç»´æŠ¤æˆæœ¬å¤ªé«˜äº†ã€‚</p>
<p>Snapshot æµ‹è¯•è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// ä¸ç”¨å†™æœŸæœ›å€¼ï¼Œæ¡†æ¶è‡ªåŠ¨å­˜</span>
assert_snapshot!(<span class="hljs-title function_ invoke__">format_code</span>(<span class="hljs-string">"function f(){return{}}"</span>));
</code></pre>
<p>è¾“å‡ºè‡ªåŠ¨å­˜åˆ° <code>.snap</code> æ–‡ä»¶é‡Œï¼Œä¸‹æ¬¡è¿è¡Œè‡ªåŠ¨æ¯”å¯¹ã€‚æ”¹äº†æ ¼å¼åŒ–è§„åˆ™ï¼Ÿè·‘ä¸€é <code>cargo insta accept</code>ï¼Œå‡ åƒä¸ªå¿«ç…§ä¸€èµ·æ›´æ–°ã€‚</p>
<h3 data-id="heading-5">å“ªäº›é¡¹ç›®åœ¨ç”¨</h3>
<p>ä¸åªæ˜¯ Biomeï¼Œå¾ˆå¤šçŸ¥åé¡¹ç›®éƒ½é‡åº¦ä¾èµ– snapshot æµ‹è¯•ï¼š</p>













































<table><thead><tr><th>é¡¹ç›®</th><th>ç±»å‹</th><th>ä¸ºä»€ä¹ˆç”¨ snapshot</th></tr></thead><tbody><tr><td><strong>Prettier</strong></td><td>ä»£ç æ ¼å¼åŒ–</td><td>è¾“å‡ºæ˜¯æ ¼å¼åŒ–åçš„ä»£ç ï¼Œæ‰‹å†™å¤ªç´¯</td></tr><tr><td><strong>Babel</strong></td><td>JS ç¼–è¯‘å™¨</td><td>è¾“å‡ºæ˜¯è½¬æ¢åçš„ä»£ç </td></tr><tr><td><strong>TypeScript</strong></td><td>ç±»å‹æ£€æŸ¥</td><td>é”™è¯¯ä¿¡æ¯ã€ç±»å‹æ¨æ–­ç»“æœ</td></tr><tr><td><strong>Rome/Biome</strong></td><td>æ ¼å¼åŒ–+Lint</td><td>æ ¼å¼åŒ–ç»“æœã€è¯Šæ–­ä¿¡æ¯</td></tr><tr><td><strong>Jest</strong></td><td>æµ‹è¯•æ¡†æ¶</td><td>React ç»„ä»¶æ¸²æŸ“ç»“æœ</td></tr><tr><td><strong>Rust Analyzer</strong></td><td>IDE æ”¯æŒ</td><td>ä»£ç è¡¥å…¨ã€æ‚¬åœæç¤º</td></tr><tr><td><strong>SWC</strong></td><td>JS/TS ç¼–è¯‘å™¨</td><td>ASTã€è½¬æ¢ç»“æœ</td></tr></tbody></table>
<p>è¿™äº›é¡¹ç›®æœ‰ä¸ªå…±åŒç‚¹ï¼š<strong>è¾“å‡ºæ˜¯ç»“æ„åŒ–çš„æ–‡æœ¬ï¼Œè€Œä¸”é‡å¤§</strong>ã€‚</p>
<p>ç”¨ snapshot æµ‹è¯•çš„å¥½å¤„ï¼š</p>
<ol>
<li><strong>é˜²æ­¢å›å½’</strong>ï¼šæ”¹äº†ä¸€è¡Œä»£ç ï¼Œæ‰€æœ‰ç›¸å…³è¾“å‡ºçš„å˜åŒ–éƒ½èƒ½çœ‹åˆ°</li>
<li><strong>ä»£ç å®¡æŸ¥å‹å¥½</strong>ï¼šPR é‡Œèƒ½ç›´æ¥çœ‹åˆ°è¾“å‡ºå˜åŒ–çš„ diff</li>
<li><strong>æ–‡æ¡£ä½œç”¨</strong>ï¼šå¿«ç…§æ–‡ä»¶æœ¬èº«å°±æ˜¯"è¿™ä¸ªè¾“å…¥åº”è¯¥äº§ç”Ÿä»€ä¹ˆè¾“å‡º"çš„æ–‡æ¡£</li>
<li><strong>ç»´æŠ¤æˆæœ¬ä½</strong>ï¼šè¾“å‡ºå˜äº†ï¼Œä¸€æ¡å‘½ä»¤æ›´æ–°ï¼Œä¸ç”¨æ‰‹åŠ¨æ”¹å‡ ç™¾ä¸ªæµ‹è¯•</li>
</ol>
<h3 data-id="heading-6">ä¸€ä¸ªçœŸå®çš„ä¾‹å­</h3>
<p>æˆ‘è¿™æ¬¡æ”¹çš„ PR åŠ äº†ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œæµ‹è¯• stdin è¾“å…¥èƒ½ä¸èƒ½æ­£å¸¸æ ¼å¼åŒ–ã€‚</p>
<p>æµ‹è¯•ä»£ç å¾ˆç®€å•ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[test]</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">format_stdin_formats_virtual_path_outside_includes</span>() {
    <span class="hljs-comment">// å‡†å¤‡è¾“å…¥</span>
    console.in_buffer.<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-string">"function f() {return{}}"</span>.<span class="hljs-title function_ invoke__">to_string</span>());

    <span class="hljs-comment">// è¿è¡Œæ ¼å¼åŒ–</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">result</span> = <span class="hljs-title function_ invoke__">run_cli</span>(
        Args::<span class="hljs-title function_ invoke__">from</span>([<span class="hljs-string">"format"</span>, <span class="hljs-string">"--stdin-file-path"</span>, <span class="hljs-string">"mock.js"</span>]),
    );

    <span class="hljs-comment">// å¿«ç…§æµ‹è¯•</span>
    assert_cli_snapshot!(...);
}
</code></pre>
<p>ç”Ÿæˆçš„å¿«ç…§æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-meta">---</span>
<span class="hljs-attr">source:</span> <span class="hljs-string">crates/biome_cli/tests/snap_test.rs</span>
<span class="hljs-attr">expression:</span> <span class="hljs-string">content</span>
<span class="hljs-meta">---</span>
<span class="hljs-comment">## `biome.json`</span>

{ <span class="hljs-attr">"files":</span> { <span class="hljs-attr">"includes":</span> [<span class="hljs-string">"apps/**"</span>] } }

<span class="hljs-comment"># Emitted Messages</span>

<span class="hljs-string">function</span> <span class="hljs-string">f()</span> {
	<span class="hljs-string">return</span> {}<span class="hljs-string">;</span>
}
</code></pre>
<p>ä»¥åå¦‚æœæœ‰äººæ”¹äº†æ ¼å¼åŒ–é€»è¾‘ï¼Œå¯¼è‡´è¾“å‡ºå˜äº†ï¼Œæµ‹è¯•å°±ä¼šå¤±è´¥ï¼Œæé†’ä½ æ£€æŸ¥è¿™ä¸ªå˜åŒ–æ˜¯ä¸æ˜¯é¢„æœŸçš„ã€‚</p>
<h3 data-id="heading-7">ä»€ä¹ˆæ—¶å€™ç”¨</h3>
<p>é€‚åˆçš„åœºæ™¯ï¼š</p>

























<table><thead><tr><th>åœºæ™¯</th><th>ä¾‹å­</th></tr></thead><tbody><tr><td>CLI å·¥å…·</td><td>å¸®åŠ©ä¿¡æ¯ã€é”™è¯¯æ¶ˆæ¯ã€æ ¼å¼åŒ–è¾“å‡º</td></tr><tr><td>ç¼–è¯‘å™¨/æ ¼å¼åŒ–å™¨</td><td>ä»£ç è½¬æ¢ç»“æœã€AST è¾“å‡º</td></tr><tr><td>UI ç»„ä»¶</td><td>React/Vue ç»„ä»¶çš„æ¸²æŸ“ç»“æœ</td></tr><tr><td>åºåˆ—åŒ–</td><td>JSONã€YAML çš„è¾“å‡º</td></tr></tbody></table>
<p>ä¸å¤ªé€‚åˆçš„åœºæ™¯ï¼š</p>
<ul>
<li>ç®€å•æ–­è¨€ï¼ˆ<code>1 + 1 == 2</code>ï¼‰</li>
<li>éšæœº/æ—¶é—´ç›¸å…³çš„è¾“å‡º</li>
<li>ä¸šåŠ¡é€»è¾‘éªŒè¯ï¼ˆsnapshot åªèƒ½å‘Šè¯‰ä½ "å˜äº†"ï¼Œä¸èƒ½å‘Šè¯‰ä½ "å¯¹ä¸å¯¹"ï¼‰</li>
</ul>
<h3 data-id="heading-8">å®¹æ˜“è¸©çš„å‘</h3>
<p><strong>1. æ— è„‘ accept</strong></p>
<p>æµ‹è¯•æŒ‚äº†ï¼Œçœ‹éƒ½ä¸çœ‹ç›´æ¥ <code>cargo insta accept</code>ã€‚è¿™æ · snapshot æµ‹è¯•å°±å¤±å»æ„ä¹‰äº†â€”â€”ä¸‡ä¸€æ˜¯çœŸçš„ bug å‘¢ï¼Ÿ</p>
<p>æˆ‘è¿™æ¬¡çš„æƒ…å†µæ¯”è¾ƒæ˜ç¡®ï¼Œæ˜¯ rebase å¸¦è¿›æ¥çš„æ”¹åŠ¨ï¼Œæ‰€ä»¥ç›´æ¥ accept æ²¡é—®é¢˜ã€‚ä½†å¹³æ—¶è¿˜æ˜¯è¦çœ‹ä¸€çœ¼ diffã€‚</p>
<p><strong>2. å¿˜äº†æäº¤å¿«ç…§æ–‡ä»¶</strong></p>
<p>æœ¬åœ°è·‘æµ‹è¯•æ²¡é—®é¢˜ï¼ŒCI æŒ‚äº†ã€‚å› ä¸º <code>.snap</code> æ–‡ä»¶æ²¡ commitã€‚</p>
<p><strong>3. å¿«ç…§å¤ªå¤§</strong></p>
<p>æœ‰äº›é¡¹ç›®å–œæ¬¢æŠŠæ•´ä¸ªé¡µé¢çš„æ¸²æŸ“ç»“æœå­˜æˆå¿«ç…§ï¼Œå‡ åƒè¡Œã€‚æ¯æ¬¡ review éƒ½æ˜¯æŠ˜ç£¨ï¼Œæœ€åå¤§å®¶éƒ½æ— è„‘ accept äº†ã€‚</p>
<p>å»ºè®®æ‹†å°ä¸€ç‚¹ï¼Œæ¯ä¸ªå¿«ç…§ä¿æŒåœ¨å‡ åè¡Œå†…ã€‚</p>
<h3 data-id="heading-9">JavaScript ç”Ÿæ€</h3>
<p>JS è¿™è¾¹å¸¸ç”¨çš„æ˜¯ Jest çš„ snapshot åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">test</span>(<span class="hljs-string">'Button æ¸²æŸ“æ­£ç¡®'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> tree = renderer.<span class="hljs-title function_">create</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"ç‚¹å‡»"</span> /&gt;</span></span>).<span class="hljs-title function_">toJSON</span>();
  <span class="hljs-title function_">expect</span>(tree).<span class="hljs-title function_">toMatchSnapshot</span>();
});
</code></pre>
<p>æ›´æ–°å¿«ç…§ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">jest --updateSnapshot
<span class="hljs-comment"># æˆ–è€…</span>
jest -u
</code></pre>
<p>åŸç†ä¸€æ ·ï¼Œå°±æ˜¯ API ä¸åŒã€‚</p>
<h3 data-id="heading-10">å°ç»“</h3>
<p>Snapshot æµ‹è¯•æœ¬è´¨ä¸Šæ˜¯æŠŠ"å†™æœŸæœ›å€¼"è¿™ä»¶äº‹è‡ªåŠ¨åŒ–äº†ã€‚å¯¹äºè¾“å‡ºå¤æ‚çš„åœºæ™¯ï¼ˆCLIã€æ ¼å¼åŒ–å™¨ã€UI ç»„ä»¶ï¼‰ï¼Œèƒ½çœä¸å°‘äº‹ã€‚</p>
<p>ä½†è®°ä½ï¼šæ›´æ–°å¿«ç…§å‰è¦çœ‹ä¸€çœ¼ diffï¼Œç¡®è®¤å˜åŒ–æ˜¯ä½ æƒ³è¦çš„ã€‚ä¸ç„¶å°±è·Ÿæˆ‘ä¸€æ ·ï¼Œrebase å®Œæ— è„‘ pushï¼ŒCI ä¸€æ ·ä¼šæŒ‚ã€‚</p>
<hr/>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i" target="_blank" title="https://github.com/tt-a1i" ref="nofollow noopener noreferrer">GitHub</a>ï¼Œä¸‹é¢æ˜¯æˆ‘çš„ä¸€äº›å¼€æºé¡¹ç›®ï¼š</p>
<p><strong>Claude Code Skills</strong>ï¼ˆæŒ‰éœ€åŠ è½½ï¼Œæ„å›¾è‡ªåŠ¨è¯†åˆ«ï¼Œä¸æµªè´¹ tokenï¼Œ<a href="https://juejin.cn/post/7578714735307735066" target="_blank" title="https://juejin.cn/post/7578714735307735066">ä»‹ç»æ–‡ç« </a>ï¼‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fcode-review-skill" target="_blank" title="https://github.com/tt-a1i/code-review-skill" ref="nofollow noopener noreferrer">code-review-skill</a> - ä»£ç å®¡æŸ¥æŠ€èƒ½ï¼Œè¦†ç›– React 19ã€Vue 3ã€TypeScriptã€Rust ç­‰çº¦ 9000 è¡Œè§„åˆ™ï¼ˆ<a href="https://juejin.cn/post/7578709098255908902" target="_blank" title="https://juejin.cn/post/7578709098255908902">è¯¦ç»†ä»‹ç»</a>ï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2F5-whys-skill" target="_blank" title="https://github.com/tt-a1i/5-whys-skill" ref="nofollow noopener noreferrer">5-whys-skill</a> - 5 Whys æ ¹å› åˆ†æï¼Œè¯´"æ‰¾æ ¹å› "è‡ªåŠ¨æ¿€æ´»</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Ffirst-principles-skill" target="_blank" title="https://github.com/tt-a1i/first-principles-skill" ref="nofollow noopener noreferrer">first-principles-skill</a> - ç¬¬ä¸€æ€§åŸç†æ€è€ƒï¼Œé€‚åˆæ¶æ„è®¾è®¡å’ŒæŠ€æœ¯é€‰å‹</li>
</ul>
<p><strong>å…¨æ ˆé¡¹ç›®</strong>ï¼ˆé€‚åˆå­¦ä¹ ç°ä»£æŠ€æœ¯æ ˆï¼‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fprompt-vault" target="_blank" title="https://github.com/tt-a1i/prompt-vault" ref="nofollow noopener noreferrer">prompt-vault</a> - Prompt ç®¡ç†å™¨ï¼Œç”¨çš„éƒ½æ˜¯æœ€æ–°çš„æŠ€æœ¯æ ˆï¼Œé€‚åˆç”¨æ¥å­¦ä¹ äº†è§£æœ€æ–°çš„å‰ç«¯å…¨æ ˆå¼€å‘èŒƒå¼ï¼šNext.js 15 + React 19 + tRPC 11 + Supabase å…¨æ ˆç¤ºä¾‹ï¼Œclone ä¸‹æ¥é…ä¸ªå…è´¹ Supabase å°±èƒ½è·‘</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fchat_edit" target="_blank" title="https://github.com/tt-a1i/chat_edit" ref="nofollow noopener noreferrer">chat_edit</a> - åŒæ¨¡å¼ AI åº”ç”¨ï¼ˆèŠå¤©+å¯Œæ–‡æœ¬ç¼–è¾‘ï¼‰ï¼ŒVue 3.5 + TypeScript + Vite 5 + Quill 2.0 + IndexedDB</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ¨¡å‹LLMå…¥é—¨ç¯‡ï¼šå°ç™½å…¥é—¨ä¸€æ–‡å¿«é€Ÿäº†è§£å¤§æ¨¡å‹ï¼ˆé™„æ•™ç¨‹ï¼‰]]></title>    <link>https://juejin.cn/post/7586957587077103666</link>    <guid>https://juejin.cn/post/7586957587077103666</guid>    <pubDate>2025-12-24T06:03:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586957587077103666" data-draft-id="7586957587077038130" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ¨¡å‹LLMå…¥é—¨ç¯‡ï¼šå°ç™½å…¥é—¨ä¸€æ–‡å¿«é€Ÿäº†è§£å¤§æ¨¡å‹ï¼ˆé™„æ•™ç¨‹ï¼‰"/> <meta itemprop="keywords" content="LLM,Agent,LangChain"/> <meta itemprop="datePublished" content="2025-12-24T06:03:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹æ•™ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/1145012233707299"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ¨¡å‹LLMå…¥é—¨ç¯‡ï¼šå°ç™½å…¥é—¨ä¸€æ–‡å¿«é€Ÿäº†è§£å¤§æ¨¡å‹ï¼ˆé™„æ•™ç¨‹ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1145012233707299/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹æ•™ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T06:03:21.000Z" title="Wed Dec 24 2025 06:03:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote>
<p>å¤§æ¨¡å‹å¸­å·å…¨çƒï¼Œå½·ä½›å¾—æ¨¡å‹è€…å¾—å¤©ä¸‹ã€‚å¯¹äºITè¡Œä¸šæ¥è¯´ï¼Œä»¥åå¯èƒ½æ²¡æœ‰å„ç§è½¯ä»¶äº†ï¼Œåªæœ‰å„ç§å„æ ·çš„æ™ºä½“ï¼ˆAgentï¼‰è°ƒç”¨å„ç§å„æ ·çš„APIã€‚åœ¨è¿™ç§å¤§åŠ¿ä¸‹ï¼Œç¬”è€…ä¹Ÿé˜…è¯»äº†å¾ˆå¤šå¤§æ¨¡å‹ç›¸å…³çš„èµ„æ–™ï¼Œå’Œå¾ˆå¤šæ–°æ‰‹ä¸€æ ·ï¼Œå¼€å§‹è„‘å­é‡Œéƒ½æ˜¯ä¸€å›¢ä¹±éº»ï¼Œéšç€ç›¸å…³æ–‡ç« è¶Šè¯»è¶Šå¤šï¼Œå†è¿›è¡Œå†…å®¹æ¢³ç†ï¼Œç»ˆäºç†æ¸…äº†ä¸€æ¡æ¸…æ™°çš„è„‰ç»œã€‚</p>
<p>ç¬”è€…å¸Œæœ›é€šè¿‡ä¸‰ç¯‡æ–‡ç« æ€»ç»“ï¼ˆå…¥é—¨ç¯‡ã€åŸç†ç¯‡å’Œåº”ç”¨ç¯‡ï¼‰å°†æ€è·¯å†™ä¸‹æ¥ï¼Œä»¥ä¾¿è·Ÿæˆ‘ä¸€æ ·çš„æ–°æ‰‹è¯»è€…å¿«é€Ÿäº†è§£å¤§æ¨¡å‹çš„æ–¹æ–¹é¢é¢ã€‚åœ¨è¿™é‡Œï¼Œç¬”è€…å…ˆå¼ºè°ƒä¸€ä¸‹ï¼Œæœ¬ç³»åˆ—æ–‡ç« çš„æ·±åº¦æœ‰é™ï¼Œåªæ˜¯ä¸ªäººå¯¹å¤§æ¨¡å‹çŸ¥è¯†è„‰ç»œçš„æ¢³ç†ï¼ŒåŒæ—¶ä¹Ÿä¼šå€Ÿé‰´ä¸€ä¸‹åŒè¡Œçš„åšå®¢å†…å®¹å……å®æœ¬æ–‡ï¼Œæ–‡æœ«å°†ä¼šæ³¨æ˜å‚è€ƒæ¥æºã€‚</p>
<p>åœ¨å¼€å§‹é˜…è¯»æ–‡ç« ä¹‹å‰ï¼Œæœ‰å‡ ä¸ªé—®é¢˜è¯»è€…å¯ä»¥å…ˆæ€è€ƒä¸€ä¸‹ï¼š</p>
<ul>
<li>ä»€ä¹ˆæ˜¯å¤§æ¨¡å‹ï¼Ÿ</li>
<li>å¤§æ¨¡å‹æœ€ç»ˆè¦è§£å†³çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ul>
<h4 data-id="heading-0"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2FDEVELOPERAA%2Farticle%2Fdetails%2F146979848%3Fops_request_misc%3D%25257B%252522request%25255Fid%252522%25253A%252522b89c918c549e0aaad7cb340126a05c42%252522%25252C%252522scm%252522%25253A%25252220140713.130102334.pc%25255Fblog.%252522%25257D%26request_id%3Db89c918c549e0aaad7cb340126a05c42%26biz_id%3D0%26utm_medium%3Ddistribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-28-146979848-null-null.nonecase%26utm_term%3D%25E5%25A4%25A7%25E6%25A8%25A1%25E5%259E%258B%25E5%25AD%25A6%25E4%25B9%25A0%25E8%25B7%25AF%25E7%25BA%25BF%26spm%3D1018.2226.3001.4450" target="_blank" title="https://blog.csdn.net/DEVELOPERAA/article/details/146979848?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522b89c918c549e0aaad7cb340126a05c42%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&amp;request_id=b89c918c549e0aaad7cb340126a05c42&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-28-146979848-null-null.nonecase&amp;utm_term=%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF&amp;spm=1018.2226.3001.4450" ref="nofollow noopener noreferrer"/>å¤§æ¨¡å‹LLMä¸äººå·¥æ™ºèƒ½AI</h4>
<p>æåˆ°å¤§æ¨¡å‹ï¼ˆå…¨åï¼Œå¤§è¯­è¨€æ¨¡å‹ï¼ŒLLMï¼ŒLarge Language Modelï¼‰ï¼Œç»•ä¸å¼€äººå·¥æ™ºèƒ½ï¼ˆAIï¼ŒArtificial Intelligenceï¼‰è¿™ä¸ªæ¦‚å¿µã€‚</p>
<p>ç›®å‰ä¸šç•Œå¯¹äºAIçš„å®šä¹‰æœ‰å¾ˆå¤šï¼Œä½†æœ‰ä¸€ä¸ªä»¤æˆ‘å°è±¡æ·±åˆ»çš„è¯´æ³•ï¼š<strong>è®©æœºå™¨åƒäººä¸€æ ·é˜…è¯»ã€å†™ä½œå’Œäº¤æµ</strong>ã€‚é€šè¿‡æœ€è¿‘å‡ å¹´AGIçš„é«˜é€Ÿå‘å±•ï¼ŒAIä¸ä»…ä»…èƒ½å†™ä½œäº†ï¼Œè¿˜èƒ½è¿›è¡Œå„ç§å„æ ·çš„åˆ›ä½œäº†ã€‚æ‰€ä»¥ï¼Œç¬”è€…è®¤ä¸ºè¿™ä¸ªè¯´æ˜å¯ä»¥è¿›ä¸€æ­¥å®Œå–„ï¼š<strong>äººå·¥æ™ºèƒ½å°±æ˜¯è¦è®©æœºå™¨åƒäººä¸€æ ·é˜…è¯»ã€åˆ›ä½œå’Œäº¤æµ</strong>ã€‚</p>
<ul>
<li>é˜…è¯»ï¼šæœºå™¨èƒ½å¤Ÿåƒäººä¸€æ ·æ¥æ”¶å„ç§å„æ ·çš„è¾“å…¥ï¼Œå¹¶èƒ½å¤Ÿç†è§£è¿™äº›è¾“å…¥ï¼›</li>
<li>åˆ›ä½œï¼šæœºå™¨èƒ½å¤Ÿåƒäººä¸€æ ·è¿›è¡Œåˆ›ä½œè¾“å‡ºï¼Œä¸ä»…ä»…åªæ˜¯å†™ä½œï¼Œè¿˜åŒ…æ‹¬ï¼šç»˜ç”»ã€è§†é¢‘åˆ›ä½œç­‰ç­‰ï¼›</li>
<li>äº¤æµï¼šåœ¨ä¸Šè¿°ç†è§£è¾“å…¥å’Œåˆ›ä½œè¾“å‡ºçš„åŸºç¡€ä¸Šï¼Œå°±è‡ªç„¶è€Œç„¶å¯ä»¥å®ç°æœºå™¨åƒäººä¸€æ ·äº¤æµï¼Œå¹¶ä¸”åœ¨åˆ›ä½œè¾“å‡ºèƒ½åŠ›ä¸Šï¼Œå¯èƒ½æ¯”è‡ªç„¶äººæ›´åŠ ä¼˜åŠ¿ã€‚</li>
</ul>
<p>è¦å®ç°ä¸Šè¿°æè¿°çš„äººå·¥æ™ºèƒ½ï¼Œé¦–å…ˆå°±éœ€è¦è®©æœºå™¨ç†è§£äººç±»çš„è¾“å…¥ï¼Œäººç±»çš„è¾“å…¥æ–¹å¼æ¯”è¾ƒå¤šï¼Œè¯­è¨€å’Œæ–‡å­—é¦–å½“å…¶å†²ã€‚è¦è®©æœºå™¨ç†è§£è¯­è¨€å’Œæ–‡å­—ï¼Œå°±éœ€è¦è¿›è¡Œè¯­è¨€å»ºæ¨¡ï¼Œè¯­è¨€å»ºæ¨¡çš„è¾“å‡ºå°±æ˜¯è¯­è¨€æ¨¡å‹LMï¼ˆLanguage Modelï¼‰ã€‚</p>
<p>æœºå™¨é€šè¿‡åˆ†æå­¦ä¹ å¤§é‡äººç±»è¯­è¨€å’Œæ–‡å­—ï¼Œæœ€ç»ˆè·å¾—ä¸€ä¸ªè¯­è¨€æ¨¡å‹ã€‚é€šè¿‡è¯¥æ¨¡å‹ï¼Œæœºå™¨å¥½åƒ<strong>å¬æ‡‚</strong>äº†ç”¨æˆ·è¾“å…¥ä¸€æ ·ï¼Œå¯¹ç”¨æˆ·çš„è¾“å…¥è¿›è¡Œå¯¹åº”çš„è¾“å‡ºã€‚è€Œç”¨æˆ·é€šè¿‡å¾—åˆ°çš„æœºå™¨è¾“å‡ºï¼Œä¹Ÿæ„Ÿè§‰æœºå™¨<strong>ç†è§£</strong>äº†è‡ªå·±çš„æ„æ€ã€‚<strong>ä½†å®é™…è¿™é‡Œçš„å¬æ‡‚å’Œç†è§£éƒ½æ˜¯æœºå™¨çš„è¿ç®—ã€‚</strong></p>
<p>é‚£ä¹ˆï¼Œè¿™ä¹ˆå‰å®³çš„æ¨¡å‹æ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿ</p>
<h4 data-id="heading-1"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2FDEVELOPERAA%2Farticle%2Fdetails%2F146979848%3Fops_request_misc%3D%25257B%252522request%25255Fid%252522%25253A%252522b89c918c549e0aaad7cb340126a05c42%252522%25252C%252522scm%252522%25253A%25252220140713.130102334.pc%25255Fblog.%252522%25257D%26request_id%3Db89c918c549e0aaad7cb340126a05c42%26biz_id%3D0%26utm_medium%3Ddistribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-28-146979848-null-null.nonecase%26utm_term%3D%25E5%25A4%25A7%25E6%25A8%25A1%25E5%259E%258B%25E5%25AD%25A6%25E4%25B9%25A0%25E8%25B7%25AF%25E7%25BA%25BF%26spm%3D1018.2226.3001.4450" target="_blank" title="https://blog.csdn.net/DEVELOPERAA/article/details/146979848?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522b89c918c549e0aaad7cb340126a05c42%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&amp;request_id=b89c918c549e0aaad7cb340126a05c42&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-28-146979848-null-null.nonecase&amp;utm_term=%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF&amp;spm=1018.2226.3001.4450" ref="nofollow noopener noreferrer"/>å¤§æ¨¡å‹LLMçš„å‘å±•ä¸å®šä¹‰</h4>
<p>å’Œå¾ˆå¤šæœ‰æ•…äº‹çš„äººçš„åå­—ä¸€æ ·ï¼Œå¤§æ¨¡å‹ä¸€å¼€å§‹å¹¶ä¸å«å¤§æ¨¡å‹ã€‚</p>
<p>å¤§æ¨¡å‹çš„å‘å±•ç»å†äº†4ä¸ªé˜¶æ®µï¼š</p>
<ul>
<li>ç»Ÿè®¡è¯­è¨€æ¨¡å‹ SLMï¼ŒStatistical Language Modelï¼Œç»Ÿè®¡è¯­è¨€æ¨¡å‹ï¼ŒåŸºäºç»Ÿè®¡å­¦ä¹ æ–¹æ³•å¼€å‘ï¼Œå…¶åŸºæœ¬æ€æƒ³æ˜¯åŸºäºé©¬å°”å¯å¤«å‡è®¾å»ºç«‹è¯é¢„æµ‹æ¨¡å‹ã€‚è¿™ç§æ¨¡å‹å¸¸è§äºæˆ‘ä»¬çš„å…¨æ–‡æ£€ç´¢å’Œæ¨èç³»ç»Ÿä¸­ï¼Œé€šè¿‡ç»Ÿè®¡è¯é¢‘ç­‰ä¿¡æ¯æ¥åšç»Ÿè®¡é¢„æµ‹ï¼Œè¿™ç§æ¨¡å‹é€šå¸¸å—åˆ°ç»´æ•°ç¾éš¾çš„å›°æ‰°ã€‚</li>
<li>ç¥ç»è¯­è¨€æ¨¡å‹ NLMï¼ŒNeutral Language Modelï¼Œé€šè¿‡ç¥ç»ç½‘ç»œï¼Œå¦‚å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆRNNï¼‰ï¼Œæ¥æè¿°å•è¯åºåˆ—çš„æ¦‚ç‡ã€‚è¯¥æ¨¡å‹å¼•å…¥äº†è¯çš„åˆ†å¸ƒå¼è¡¨ç¤ºè¿™ä¸€æ¦‚å¿µï¼Œå¹¶åœ¨èšåˆä¸Šä¸‹æ–‡ç‰¹å¾ï¼ˆå³åˆ†å¸ƒå¼è¯å‘é‡ï¼‰çš„æ¡ä»¶ä¸‹æ„å»ºè¯é¢„æµ‹å‡½æ•°ã€‚word2vecæå‡ºäº†æ„å»ºç®€åŒ–çš„æµ…å±‚ç¥ç»ç½‘ç»œæ¥å­¦ä¹ åˆ†å¸ƒå¼å•è¯è¡¨ç¤ºçš„æ–¹æ³•ï¼Œè¿™äº›è¡¨ç¤ºåœ¨å„ç§NLPä»»åŠ¡ä¸­è¢«è¯æ˜éå¸¸æœ‰æ•ˆã€‚</li>
<li>é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹ PLMï¼ŒPre-training Language Modelï¼ŒåŸºäºè‡ªæ³¨æ„åŠ›æœºåˆ¶çš„é«˜åº¦å¹¶è¡ŒåŒ–Transformeræ¶æ„ï¼Œåœ¨å¤§è§„æ¨¡æ— æ ‡ç­¾è¯­æ–™åº“ä¸Šä½¿ç”¨ä¸“é—¨è®¾è®¡çš„é¢„è®­ç»ƒä»»åŠ¡ã€‚è¯¥æ¨¡å‹ç¡®ç«‹äº†â€œé¢„è®­ç»ƒå’Œå¾®è°ƒâ€å­¦ä¹ èŒƒå¼ã€‚åœ¨è¿™ä¸ªèŒƒå¼ä¸‹ï¼Œé€šå¸¸éœ€è¦å¯¹PLMè¿›è¡Œå¾®è°ƒä»¥é€‚é…ä¸åŒçš„ä¸‹æ¸¸ä»»åŠ¡ã€‚</li>
<li>å¤§è¯­è¨€æ¨¡å‹ LLMï¼ŒLarge Language Modelã€‚ç ”ç©¶äººå‘˜å‘ç°ï¼Œæ‰©å±•PLMï¼ˆæ‰©å±•æ¨¡å‹å¤§å°æˆ–æ•°æ®å¤§å°ï¼‰é€šå¸¸ä¼šæé«˜ä¸‹æ¸¸ä»»åŠ¡çš„æ¨¡å‹æ€§èƒ½ï¼Œè®¸å¤šç ”ç©¶é€šè¿‡è®­ç»ƒè¶Šæ¥è¶Šå¤§çš„PLMæ¥æ¢ç´¢æ€§èƒ½æé™ã€‚éšåå‘ç°ï¼Œå½“æ¨¡å‹å‚æ•°è¾¾åˆ°æŸä¸€æé™ä¹‹åï¼Œæ¨¡å‹åœ¨è§£å†³ä¸€ç³»åˆ—å¤æ‚ä»»åŠ¡ä¸­å±•ç¤ºäº†æƒŠäººçš„èƒ½åŠ›ï¼Œè¿™ç§èƒ½åŠ›è¢«ç§°ä¸ºã€<strong>æ¶Œç°èƒ½åŠ›</strong>ã€‘ã€‚ å…³äºæ¶Œç°èƒ½åŠ›ï¼Œä¸šç•Œç›®å‰è¿˜æœ‰å¾ˆå¤šé—®é¢˜å¾…ç ”ç©¶è§£å†³ã€‚æ¯”å¦‚ï¼šæ¨¡å‹å‚æ•°å…·ä½“è¾¾åˆ°å¤šå°‘æ¶Œç°èƒ½åŠ›ä¼šå‡ºç°ï¼Ÿå¤§æ¨¡å‹ä¸ºä»€ä¹ˆä¼šçªç„¶å‡ºç°æ¶Œç°èƒ½åŠ›ç­‰ã€‚</li>
</ul>
<p>é€šè¿‡å¤§æ¨¡å‹çš„å‘å±•é˜¶æ®µæè¿°ï¼Œæœ¬èŠ‚æœ€åæ€»ç»“ä¸€ä¸‹å¤§æ¨¡å‹LLMçš„å®šä¹‰ã€‚Â <strong>å¤§æ¨¡å‹æ˜¯ä¸€ç§é‡‡ç”¨Transformeræ¶æ„ï¼Œæ¨¡å‹å‚æ•°è¾¾åˆ°ç™¾äº¿æˆ–åƒäº¿çº§çš„é¢„è®­ç»ƒæ¨¡å‹ã€‚</strong></p>
<h4 data-id="heading-2"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2FDEVELOPERAA%2Farticle%2Fdetails%2F146979848%3Fops_request_misc%3D%25257B%252522request%25255Fid%252522%25253A%252522b89c918c549e0aaad7cb340126a05c42%252522%25252C%252522scm%252522%25253A%25252220140713.130102334.pc%25255Fblog.%252522%25257D%26request_id%3Db89c918c549e0aaad7cb340126a05c42%26biz_id%3D0%26utm_medium%3Ddistribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-28-146979848-null-null.nonecase%26utm_term%3D%25E5%25A4%25A7%25E6%25A8%25A1%25E5%259E%258B%25E5%25AD%25A6%25E4%25B9%25A0%25E8%25B7%25AF%25E7%25BA%25BF%26spm%3D1018.2226.3001.4450" target="_blank" title="https://blog.csdn.net/DEVELOPERAA/article/details/146979848?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522b89c918c549e0aaad7cb340126a05c42%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&amp;request_id=b89c918c549e0aaad7cb340126a05c42&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-28-146979848-null-null.nonecase&amp;utm_term=%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF&amp;spm=1018.2226.3001.4450" ref="nofollow noopener noreferrer"/>å¤§æ¨¡å‹LLMçš„åˆ†ç±»</h4>
<p>ç›®å‰ä¸šç•Œæ¶Œç°äº†éå¸¸å¤šçš„å¤§æ¨¡å‹ï¼Œä¹Ÿçœ‹äº†ç½‘ä¸Šä¸€äº›å…³äºå¯¹å¤§æ¨¡å‹åˆ†ç±»å½’çº³çš„æ–‡ç« ï¼Œéƒ½éå¸¸ä¸é”™ï¼Œæœ¬èŠ‚ä¸»è¦æ˜¯å¯¹ç½‘ä¸Šçš„åˆ†ç±»ä¿¡æ¯è¿›è¡Œæ€»ç»“ã€‚</p>
<p>æœ¬èŠ‚å°†ä»ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢æ¥å¯¹å¤§æ¨¡å‹è¿›è¡Œåˆ†ç±»ï¼š</p>
<h5 data-id="heading-3"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2FDEVELOPERAA%2Farticle%2Fdetails%2F146979848%3Fops_request_misc%3D%25257B%252522request%25255Fid%252522%25253A%252522b89c918c549e0aaad7cb340126a05c42%252522%25252C%252522scm%252522%25253A%25252220140713.130102334.pc%25255Fblog.%252522%25257D%26request_id%3Db89c918c549e0aaad7cb340126a05c42%26biz_id%3D0%26utm_medium%3Ddistribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-28-146979848-null-null.nonecase%26utm_term%3D%25E5%25A4%25A7%25E6%25A8%25A1%25E5%259E%258B%25E5%25AD%25A6%25E4%25B9%25A0%25E8%25B7%25AF%25E7%25BA%25BF%26spm%3D1018.2226.3001.4450" target="_blank" title="https://blog.csdn.net/DEVELOPERAA/article/details/146979848?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522b89c918c549e0aaad7cb340126a05c42%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&amp;request_id=b89c918c549e0aaad7cb340126a05c42&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-28-146979848-null-null.nonecase&amp;utm_term=%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF&amp;spm=1018.2226.3001.4450" ref="nofollow noopener noreferrer"/>æ ¹æ®ç®—æ³•åŸç†åˆ†ç±»</h5>
<p>å¤§æ¨¡å‹çš„æ¶æ„åŸºæœ¬éƒ½æ˜¯Transformerï¼Œè€ŒTransformerè¯¦ç»†çš„ç»“æ„åœ¨googleå‘å¸ƒçš„è®ºæ–‡ã€ŠAttention Is All You Needã€‹ä¸­è¿›è¡Œäº†æè¿°ï¼ŒTransformerç»“æ„ä¸­æœ‰ä¸¤ä¸ªéå¸¸é‡è¦çš„éƒ¨ä»¶ï¼šEncoderå’ŒDecoderï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af58ee3a7a574c46b61eecce34429b8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767161000&amp;x-signature=onWZHqmLkTo6OqMMs5oE5e8xBS8%3D" alt="transformeræ¶æ„.webp" loading="lazy"/></p>
<p>æ ¹æ®å¯¹Transformerç»“æ„çš„è£å‰ªï¼Œå¯ä»¥å°†ç›®å‰çš„å¤§æ¨¡å‹åˆ†ä¸ºä¸‰ç±»ï¼š</p>
<ul>
<li>Encoder-Onlyï¼šè£å‰ªäº†Decoderéƒ¨ä»¶ï¼Œä»£è¡¨æ¨¡å‹BERTï¼Œåˆ°äº†2020å¹´ä¹‹åï¼Œè¿™ç±»æŠ€æœ¯åŸºæœ¬å·²ç»ä¸å†å‘å±•ã€‚</li>
<li>Encoder-Decoderï¼šæ²¡æœ‰è£å‰ªä»»ä½•éƒ¨ä»¶ï¼Œä»£è¡¨æ¨¡å‹T5ã€‚</li>
<li>Decoder-Onlyï¼šè£å‰ªäº†Encoderéƒ¨ä»¶ï¼Œä»£è¡¨æ¨¡å‹GPTï¼Œç›®å‰ä¸»å¯¼LLMé¢†åŸŸçš„å‘å±•ã€‚</li>
</ul>
<p>ä¸‹é¢æ˜¯ä¸€å¼ ç»“åˆäº†å¤§æ¨¡å‹å‡ºç°æ—¶é—´ä»¥åŠæ‰€å±æ¶æ„åˆ†ç±»çš„å›¾ç‰‡ï¼Œåˆ†åˆ«è¯¦ç»†é˜è¿°äº†å„ä¸ªåˆ†ç±»æœ‰å“ªäº›ä»£è¡¨æ¨¡å‹ï¼Œä»¥åŠæ¨¡å‹å‡ºç°çš„æ—¶é—´ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/baa636f5d459496cae65718a99af5797~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767161000&amp;x-signature=yfsxTDv6Iw7Np4cWN1g5DpyyjDo%3D" alt="llm-evolutionary-tree.png" loading="lazy"/></p>
<h5 data-id="heading-4"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2FDEVELOPERAA%2Farticle%2Fdetails%2F146979848%3Fops_request_misc%3D%25257B%252522request%25255Fid%252522%25253A%252522b89c918c549e0aaad7cb340126a05c42%252522%25252C%252522scm%252522%25253A%25252220140713.130102334.pc%25255Fblog.%252522%25257D%26request_id%3Db89c918c549e0aaad7cb340126a05c42%26biz_id%3D0%26utm_medium%3Ddistribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-28-146979848-null-null.nonecase%26utm_term%3D%25E5%25A4%25A7%25E6%25A8%25A1%25E5%259E%258B%25E5%25AD%25A6%25E4%25B9%25A0%25E8%25B7%25AF%25E7%25BA%25BF%26spm%3D1018.2226.3001.4450" target="_blank" title="https://blog.csdn.net/DEVELOPERAA/article/details/146979848?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522b89c918c549e0aaad7cb340126a05c42%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&amp;request_id=b89c918c549e0aaad7cb340126a05c42&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-28-146979848-null-null.nonecase&amp;utm_term=%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF&amp;spm=1018.2226.3001.4450" ref="nofollow noopener noreferrer"/>æ ¹æ®è¾“å…¥å†…å®¹åˆ†ç±»</h5>
<p>æ ¹æ®è¾“å…¥å†…å®¹ä¸åŒï¼Œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»ï¼š</p>
<ul>
<li>è¯­è¨€å¤§æ¨¡å‹</li>
</ul>
<p>æŒ‡åœ¨è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNatural Language Processingï¼ŒNLPï¼‰é¢†åŸŸä¸­çš„ä¸€ç±»å¤§æ¨¡å‹ï¼Œé€šå¸¸ç”¨äºå¤„ç†æ–‡æœ¬æ•°æ®å’Œç†è§£è‡ªç„¶è¯­è¨€ã€‚ è¿™ç±»å¤§æ¨¡å‹çš„ä¸»è¦ç‰¹ç‚¹æ˜¯å®ƒä»¬åœ¨å¤§è§„æ¨¡è¯­æ–™åº“ä¸Šè¿›è¡Œäº†è®­ç»ƒï¼Œä»¥å­¦ä¹ è‡ªç„¶è¯­è¨€çš„å„ç§è¯­æ³•ã€è¯­ä¹‰å’Œè¯­å¢ƒè§„åˆ™ã€‚ ä¾‹å¦‚ï¼šGPT ç³»åˆ—ï¼ˆOpenAIï¼‰ã€Bardï¼ˆGoogleï¼‰ã€æ–‡å¿ƒä¸€è¨€ï¼ˆç™¾åº¦ï¼‰ã€‚</p>
<ul>
<li>è§†è§‰å¤§æ¨¡å‹</li>
</ul>
<p>æŒ‡åœ¨è®¡ç®—æœºè§†è§‰ï¼ˆComputer Visionï¼ŒCVï¼‰é¢†åŸŸä¸­ä½¿ç”¨çš„å¤§æ¨¡å‹ï¼Œé€šå¸¸ç”¨äºå›¾åƒå¤„ç†å’Œåˆ†æã€‚ è¿™ç±»æ¨¡å‹é€šè¿‡åœ¨å¤§è§„æ¨¡å›¾åƒæ•°æ®ä¸Šè¿›è¡Œè®­ç»ƒï¼Œå¯ä»¥å®ç°å„ç§è§†è§‰ä»»åŠ¡ï¼Œå¦‚å›¾åƒåˆ†ç±»ã€ç›®æ ‡æ£€æµ‹ã€å›¾åƒåˆ†å‰²ã€å§¿æ€ä¼°è®¡ã€äººè„¸è¯†åˆ«ç­‰ã€‚ ä¾‹å¦‚ï¼šVIT ç³»åˆ—ï¼ˆGoogleï¼‰ã€æ–‡å¿ƒUFOã€åä¸ºç›˜å¤ CVã€INTERNï¼ˆå•†æ±¤ï¼‰ã€‚</p>
<ul>
<li>å¤šæ¨¡æ€å¤§æ¨¡å‹</li>
</ul>
<p>æŒ‡èƒ½å¤Ÿå¤„ç†å¤šç§ä¸åŒç±»å‹æ•°æ®çš„å¤§æ¨¡å‹ï¼Œä¾‹å¦‚æ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ç­‰å¤šæ¨¡æ€æ•°æ®ã€‚ è¿™ç±»æ¨¡å‹ç»“åˆäº† NLP å’Œ CV çš„èƒ½åŠ›ï¼Œä»¥å®ç°å¯¹å¤šæ¨¡æ€ä¿¡æ¯çš„ç»¼åˆç†è§£å’Œåˆ†æï¼Œä»è€Œèƒ½å¤Ÿæ›´å…¨é¢åœ°ç†è§£å’Œå¤„ç†å¤æ‚çš„æ•°æ®ã€‚ ä¾‹å¦‚ï¼šDingoDB å¤šæ¨¡å‘é‡æ•°æ®åº“ï¼ˆä¹ç« äº‘æ DataCanvasï¼‰ã€DALL-E(OpenAI)ã€æ‚Ÿç©ºç”»ç”»ï¼ˆåä¸ºï¼‰ã€midjourneyã€‚</p>
<h5 data-id="heading-5"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2FDEVELOPERAA%2Farticle%2Fdetails%2F146979848%3Fops_request_misc%3D%25257B%252522request%25255Fid%252522%25253A%252522b89c918c549e0aaad7cb340126a05c42%252522%25252C%252522scm%252522%25253A%25252220140713.130102334.pc%25255Fblog.%252522%25257D%26request_id%3Db89c918c549e0aaad7cb340126a05c42%26biz_id%3D0%26utm_medium%3Ddistribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-28-146979848-null-null.nonecase%26utm_term%3D%25E5%25A4%25A7%25E6%25A8%25A1%25E5%259E%258B%25E5%25AD%25A6%25E4%25B9%25A0%25E8%25B7%25AF%25E7%25BA%25BF%26spm%3D1018.2226.3001.4450" target="_blank" title="https://blog.csdn.net/DEVELOPERAA/article/details/146979848?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522b89c918c549e0aaad7cb340126a05c42%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&amp;request_id=b89c918c549e0aaad7cb340126a05c42&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-28-146979848-null-null.nonecase&amp;utm_term=%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF&amp;spm=1018.2226.3001.4450" ref="nofollow noopener noreferrer"/>æ ¹æ®åº”ç”¨é¢†åŸŸåˆ†ç±»</h5>
<p>æŒ‰ç…§åº”ç”¨é¢†åŸŸï¼Œå¤§æ¨¡å‹ä¸»è¦å¯ä»¥åˆ†ä¸º L0ã€L1ã€L2 ä¸‰ä¸ªå±‚çº§ï¼š</p>
<ul>
<li>é€šç”¨å¤§æ¨¡å‹ L0ï¼š æ˜¯æŒ‡å¯ä»¥åœ¨å¤šä¸ªé¢†åŸŸå’Œä»»åŠ¡ä¸Šé€šç”¨çš„å¤§æ¨¡å‹ã€‚ å®ƒä»¬åˆ©ç”¨å¤§ç®—åŠ›ã€ä½¿ç”¨æµ·é‡çš„å¼€æ”¾æ•°æ®ä¸å…·æœ‰å·¨é‡å‚æ•°çš„æ·±åº¦å­¦ä¹ ç®—æ³•ï¼Œåœ¨å¤§è§„æ¨¡æ— æ ‡æ³¨æ•°æ®ä¸Šè¿›è¡Œè®­ç»ƒï¼Œä»¥å¯»æ‰¾ç‰¹å¾å¹¶å‘ç°è§„å¾‹ï¼Œè¿›è€Œå½¢æˆå¯â€œä¸¾ä¸€åä¸‰â€çš„å¼ºå¤§æ³›åŒ–èƒ½åŠ›ï¼Œå¯åœ¨ä¸è¿›è¡Œå¾®è°ƒæˆ–å°‘é‡å¾®è°ƒçš„æƒ…å†µä¸‹å®Œæˆå¤šåœºæ™¯ä»»åŠ¡ï¼Œç›¸å½“äº AI å®Œæˆäº†â€œé€šè¯†æ•™è‚²â€ã€‚</li>
<li>è¡Œä¸šå¤§æ¨¡å‹ L1ï¼š æ˜¯æŒ‡é‚£äº›é’ˆå¯¹ç‰¹å®šè¡Œä¸šæˆ–é¢†åŸŸçš„å¤§æ¨¡å‹ã€‚ å®ƒä»¬é€šå¸¸ä½¿ç”¨è¡Œä¸šç›¸å…³çš„æ•°æ®è¿›è¡Œé¢„è®­ç»ƒæˆ–å¾®è°ƒï¼Œä»¥æé«˜åœ¨è¯¥é¢†åŸŸçš„æ€§èƒ½å’Œå‡†ç¡®åº¦ï¼Œç›¸å½“äº AI æˆä¸ºâ€œè¡Œä¸šä¸“å®¶â€ã€‚</li>
<li>å‚ç›´å¤§æ¨¡å‹ L2ï¼š æ˜¯æŒ‡é‚£äº›é’ˆå¯¹ç‰¹å®šä»»åŠ¡æˆ–åœºæ™¯çš„å¤§æ¨¡å‹ã€‚ å®ƒä»¬é€šå¸¸ä½¿ç”¨ä»»åŠ¡ç›¸å…³çš„æ•°æ®è¿›è¡Œé¢„è®­ç»ƒæˆ–å¾®è°ƒï¼Œä»¥æé«˜åœ¨è¯¥ä»»åŠ¡ä¸Šçš„æ€§èƒ½å’Œæ•ˆæœã€‚</li>
</ul>
<h2 data-id="heading-6">å­¦ä¹ èµ„æºæ¨è</h2>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TRAE 2025 å¹´åº¦æŠ¥å‘ŠğŸ¥³ï¼šéšè—äººæ ¼å¤§æ­ç§˜ï¼æ™’æŠ¥å‘Šèµ¢å®šåˆ¶å¹´ç»ˆå¥–]]></title>    <link>https://juejin.cn/post/7587349016222367785</link>    <guid>https://juejin.cn/post/7587349016222367785</guid>    <pubDate>2025-12-25T03:31:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587349016222367785" data-draft-id="7587062584164810790" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TRAE 2025 å¹´åº¦æŠ¥å‘ŠğŸ¥³ï¼šéšè—äººæ ¼å¤§æ­ç§˜ï¼æ™’æŠ¥å‘Šèµ¢å®šåˆ¶å¹´ç»ˆå¥–"/> <meta itemprop="keywords" content="Trae,AIç¼–ç¨‹,VibeCoding"/> <meta itemprop="datePublished" content="2025-12-25T03:31:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘é…±"/> <meta itemprop="url" content="https://juejin.cn/user/1556564194374926"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TRAE 2025 å¹´åº¦æŠ¥å‘ŠğŸ¥³ï¼šéšè—äººæ ¼å¤§æ­ç§˜ï¼æ™’æŠ¥å‘Šèµ¢å®šåˆ¶å¹´ç»ˆå¥–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1556564194374926/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘é…±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T03:31:02.000Z" title="Thu Dec 25 2025 03:31:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github-gist">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#333}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#d73a49}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#6f42c1}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-number{color:#005cc5}.hljs-string{color:#032f62}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0cc3df41b00e4a0e8fef7414eb0d2af8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6YWx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238262&amp;x-signature=qdeddRoXvXh%2FD0Ec2pxjZ8v%2FE6E%3D" alt="20251225-111403.png" loading="lazy"/></p>
<p><strong>å¹´æœ«æ”¶å®˜ï¼ŒTRAE å¹´åº¦æŠ¥å‘Šæ­£å¼ä¸Šçº¿å•¦</strong></p>
<p>è¿™ä¸€å¹´é‡Œï¼Œæ¯ä¸€æ¬¡å’Œ AI åä½œ Codingã€æ¯ä¸€æ®µè¢«ä¼˜åŒ–çš„ä»£ç ã€æ¯ä¸€ä¸ªæ”»å…‹çš„éœ€æ±‚ï¼Œéƒ½åœ¨ TRAE ç•™ä¸‹äº†ä½ çš„ä¸“å±å°è®°ã€‚é€šè¿‡è¿™ä»½æŠ¥å‘Šï¼Œè¿˜èƒ½è§£é”ä½ çš„éšè—ç¼–ç äººæ ¼ï½</p>
<p>COME ON ï¼æ™’å‡ºæŠ¥å‘Šåˆ†äº«çœŸå®æ„Ÿå—ï¼Œæ¥å†²ä¸€æ³¢ TRAE å‘¨è¾¹å¹´ç»ˆå¤§ç¤¼ï¼</p>
<p>ç”¨ä¸€æ¡æ²¸ç‚¹ï¼Œæ¥ç»™è¿™ä¸€å¹´çš„ Coding æ—¶å…‰å®Œç¾æ”¶å°¾å§ï½</p>
<h3 data-id="heading-0">æ´»åŠ¨æ—¶é—´</h3>
<p>12æœˆ25æ—¥12:00-12æœˆ30æ—¥23:59</p>
<h3 data-id="heading-1">æ´»åŠ¨æ–¹å¼</h3>
<ul>
<li><strong>ç”ŸæˆæŠ¥å‘Š</strong>ï¼šç‚¹å‡»é“¾æ¥<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.trae.cn%2Fevents%2Fannual-2025" target="_blank" title="https://www.trae.cn/events/annual-2025" ref="nofollow noopener noreferrer">www.trae.cn/events/annuâ€¦</a> æˆ–æ‰«æäºŒç»´ç ï¼Œç”Ÿæˆå¹¶ä¿å­˜ä½ çš„ 2025 å¹´åº¦æŠ¥å‘Šã€‚</li>
</ul>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da9dc97b2362442684f7a26ddecc7dd8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6YWx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238262&amp;x-signature=80piVKiEsvvVoExfvD9fSpkkgOk%3D" alt="img_v3_02ta_eecdce34-bda4-4470-a0fe-86a5fbae943g.png" loading="lazy"/></p>
<ul>
<li>
<p><strong>å‘å¸ƒæ²¸ç‚¹</strong>ï¼šåœ¨æ˜é‡‘ç¤¾åŒºå†…å‘å¸ƒæ²¸ç‚¹ï¼Œ<strong>åˆ†äº«2025æœ€å…·æˆå°±æ„Ÿçš„ã€Œæ•°æ®é¢æ¿ã€æˆ–ã€Œè§’è‰²å½¢è±¡ã€</strong>ï¼Œæ–‡æ¡ˆå†…å®¹åŒ…æ‹¬ä½†ä¸é™äºï¼šä½“éªŒæ„Ÿæƒ³ã€ç©æ³•æ”»ç•¥ã€åé¦ˆå»ºè®®â€¦â€¦</p>
</li>
<li>
<p><strong>æ·»åŠ è¯é¢˜</strong>ï¼šå¸¦ä¸Š <strong>#<a href="https://juejin.cn/pin/topic/7587524867952476206" target="_blank" title="https://juejin.cn/pin/topic/7587524867952476206">TRAELAND</a></strong> è¯é¢˜æ ‡ç­¾ã€‚</p>
</li>
</ul>
<h3 data-id="heading-2">æ´»åŠ¨æ¿€åŠ±</h3>
<p>æ´»åŠ¨æœŸé—´ï¼Œç»¼åˆç»Ÿè®¡æ‰€æœ‰ç¬¦åˆè¦æ±‚çš„å‚èµ›æ²¸ç‚¹ï¼ŒæŒ‰ã€Œç‚¹èµæ•° + è¯„è®ºæ•°ã€æ€»å’Œæ’åï¼Œå‰ 100 åæ˜å‹å¯è·å¾—ä¸“å± TRAE å®šåˆ¶å‘¨è¾¹å¹´ç»ˆå¤§ç¤¼ï½</p>
<p>ğŸ’¡ 100 ä¸ªè·å¥–åé¢å…¨è¦†ç›–ï¼Œåªè¦è·»èº«å‰ 100ï¼Œå³å¯å°†å®šåˆ¶ç¦åˆ©æ”¶å…¥å›Šä¸­ï¼</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/325702089b7640c99f88fc5d580a2fc4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6YWx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238262&amp;x-signature=sFxKgaNzADS92g2wZDcfOJnVAhs%3D" alt="img_v3_02ta_9413d7eb-e69d-4fd2-b7db-0d74589504dg.jpg" loading="lazy"/></p>
<h3 data-id="heading-3">æ³¨æ„äº‹é¡¹</h3>
<ul>
<li>
<p><strong>è¯é¢˜æ­£ç¡®</strong>ï¼šå‚èµ›æ²¸ç‚¹å¿…é¡»æ·»åŠ  #<a href="https://juejin.cn/pin/topic/7587524867952476206" target="_blank" title="https://juejin.cn/pin/topic/7587524867952476206">TRAELAND</a> è¯é¢˜æ ‡ç­¾ï¼Œé”™åŠ ã€æ¼åŠ å‡è§†ä¸ºæ— æ•ˆå‚ä¸ï¼›</p>
</li>
<li>
<p><strong>å†…å®¹çœŸå®</strong>ï¼šåˆ†äº«çš„å¹´åº¦æŠ¥å‘Šæˆªå›¾ã€æ•°æ®ä¿¡æ¯éœ€çœŸå®æœ‰æ•ˆï¼Œä¸¥ç¦ä¼ªé€ ã€ç›—ç”¨ä»–äººå†…å®¹ï¼Œä¸€ç»å‘ç°å–æ¶ˆèµ„æ ¼ï¼›</p>
</li>
<li>
<p><strong>å½¢å¼åˆè§„</strong>ï¼šå‘å¸ƒå†…å®¹éœ€æ¸…æ™°å±•ç¤ºã€Œè§’è‰²å½¢è±¡ã€æˆ–ã€Œæ•°æ®é¢æ¿ã€ä¹‹ä¸€ï¼Œæ— é®æŒ¡ã€æ— æ¨¡ç³Šï¼Œç¡®ä¿å®¡æ ¸äººå‘˜å¯æ¸…æ™°è¾¨è¯†ï¼›</p>
</li>
<li>
<p><strong>å…¬å¼€å¯è§</strong>ï¼šå‚èµ›æ²¸ç‚¹éœ€è®¾ç½®ä¸ºã€Œå…¬å¼€ã€çŠ¶æ€ï¼Œç§å¯†æˆ–ä»…å¥½å‹å¯è§çš„å†…å®¹æ— æ³•å‚ä¸å®¡æ ¸ä¸æ’åï¼›</p>
</li>
<li>
<p><strong>åˆè§„åˆ›ä½œ</strong>ï¼šå†…å®¹éœ€ç§¯æå‘ä¸Šï¼Œä¸å¾—åŒ…å«è¿è§„ã€ä½ä¿—ã€æ”»å‡»æ€§è¨€è®ºï¼Œå¦åˆ™å–æ¶ˆå‚ä¸èµ„æ ¼ã€‚</p>
</li>
<li>
<p>æœ¬æ¬¡æ´»åŠ¨é¢å‘TRAEä¸­å›½ç‰ˆç”¨æˆ·ã€‚</p>
</li>
</ul>
<h3 data-id="heading-4">æ´»åŠ¨Q&amp;A</h3>
<p><strong>Q1: æœ‰æ•ˆæ²¸ç‚¹åˆ¤å®šæ ‡å‡†æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p>A1: éœ€åŒæ—¶æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p>
<p>â‘  å†…å®¹ç§¯æå‘ä¸Šï¼Œå›´ç»• TRAELAND å¹´åº¦æŠ¥å‘Šå±•å¼€çœŸå®åˆ†äº«ï¼Œå¯å«ä½“éªŒæ„Ÿæƒ³ã€ç©æ³•æ”»ç•¥ã€åé¦ˆå»ºè®®ç­‰ï¼›</p>
<p>â‘¡ æ­£ç¡®æ·»åŠ  <strong>#<a href="https://juejin.cn/pin/topic/7587524867952476206" target="_blank" title="https://juejin.cn/pin/topic/7587524867952476206">TRAELAND</a></strong> è¯é¢˜æ ‡ç­¾ï¼›</p>
<p>â‘¢ æ²¸ç‚¹è®¾ç½®ä¸ºå…¬å¼€å¯è§çŠ¶æ€ï¼›</p>
<p>â‘£ æ¸…æ™°å±•ç¤ºä½ çš„ TRAE LAND è§’è‰²å½¢è±¡æˆ–æ•°æ®é¢æ¿æˆªå›¾ï¼›å†…å®¹çœŸå®ï¼Œæ— ä¼ªé€ ã€ç›—ç”¨è¡Œä¸ºã€‚</p>
<p><strong>Q2: æ’åå¦‚ä½•è®¡ç®—ä¸æˆªæ­¢æ—¶é—´ï¼Ÿ</strong></p>
<p>A2: å‚èµ›æ²¸ç‚¹æ’åæŒ‰ã€Œç‚¹èµæ•° + è¯„è®ºæ•°ã€æ€»å’Œæ ¸ç®—ï¼ŒåŒä¸€ç”¨æˆ·å‘å¸ƒå¤šæ¡å‚èµ›å†…å®¹ï¼Œä»…å–æ•°æ®æœ€ä¼˜ä¸€æ¡å‚ä¸æ’åï¼›æ— æ„ä¹‰æ°´è¯„è®ºä¸è®¡å…¥æœ‰æ•ˆè¯„è®ºæ•°ã€‚ï¼›</p>
<p>æ•°æ®ç»Ÿè®¡æˆªæ­¢æ—¶é—´ä¸º 2025 å¹´ 12 æœˆ 30 æ—¥ 23:59ï¼Œé€¾æœŸæ–°å¢çš„ç‚¹èµã€è¯„è®ºä¸å†è®¡å…¥ã€‚è·å¥–åå•å°†äºæ´»åŠ¨ç»“æŸå 7 ä¸ªå·¥ä½œæ—¥å†…ï¼Œåœ¨æ˜é‡‘æ²¸ç‚¹åœˆå­å…¬å¸ƒï¼Œæ•¬è¯·å…³æ³¨ã€‚</p>
<p><strong>Q3: åŒä¸€ç”¨æˆ·å¯ä»¥å‘å¸ƒå¤šæ¡æ²¸ç‚¹å‚èµ›å—ï¼Ÿ</strong></p>
<p>A3: å¯ä»¥ï¼Œä½†åŒä¸€ç”¨æˆ·ä»…èƒ½ä»¥æ•°æ®æœ€ä¼˜çš„ä¸€æ¡æ²¸ç‚¹å‚ä¸æ’åï¼Œä¸å¯é‡å¤è·å¥–ã€‚å»ºè®®å¤§å®¶ç²¾å¿ƒæ‰“ç£¨ä¸€æ¡å†…å®¹ï¼Œæå‡è·å¥–æ¦‚ç‡å“¦ï½</p>
<p><strong>Q4: æ˜¯å¦å¿…é¡»å‘å¸ƒæˆªå›¾ï¼Ÿ</strong></p>
<p>A4: æ˜¯çš„ï¼Œè¯·åˆ†äº« TRAE LAND å¹´åº¦æŠ¥å‘Šä¸­çš„â€œè§’è‰²å½¢è±¡â€æˆ–â€œæ•°æ®é¢æ¿â€æˆªå›¾ä¹‹ä¸€ï¼Œå¹¶ç¡®ä¿å†…å®¹æ¸…æ™°å¯è§ã€‚</p>
<p><strong>Q5: è¿è§„æˆ–æŠ„è¢­å¦‚ä½•å¤„ç†ï¼Ÿ</strong></p>
<p>A5: ä¸€ç»æ ¸å®å­˜åœ¨åˆ·é‡ã€æŠ„è¢­ã€ç›—ç”¨ç­‰è¿è§„è¡Œä¸ºï¼Œå°†å–æ¶ˆå‚ä¸èµ„æ ¼ã€‚</p>
<p><strong>Q6: å¥–å“å¦‚ä½•å‘æ”¾ï¼Ÿ</strong></p>
<p>A6: è·å¥–åå•å…¬å¸ƒåï¼Œå®˜æ–¹å°†é€šè¿‡æ˜é‡‘ç¤¾åŒºã€Œç§ä¿¡ã€åŠŸèƒ½è”ç³»è·å¥–ç”¨æˆ·ï¼Œæ ¸å®èº«ä»½ä¿¡æ¯ä¸æ”¶è´§åœ°å€ã€‚è¯·è·å¥–ç”¨æˆ·åœ¨æ”¶åˆ°ç§ä¿¡å 3 ä¸ªå·¥ä½œæ—¥å†…å›å¤ç¡®è®¤ï¼Œé€¾æœŸæœªå›å¤è§†ä¸ºè‡ªåŠ¨æ”¾å¼ƒç¦åˆ©ã€‚å®ç‰©å¥–å“å°†åœ¨ä¿¡æ¯ç¡®è®¤å 10 ä¸ªå·¥ä½œæ—¥å†…å®‰æ’å¯„é€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kotlin Flow çš„ emit å’Œ tryEmit æœ‰ä»€ä¹ˆåŒºåˆ« ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7587342120021999667</link>    <guid>https://juejin.cn/post/7587342120021999667</guid>    <pubDate>2025-12-25T03:45:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587342120021999667" data-draft-id="7580815599351595023" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kotlin Flow çš„ emit å’Œ tryEmit æœ‰ä»€ä¹ˆåŒºåˆ« ï¼Ÿ"/> <meta itemprop="keywords" content="Kotlin,Android,Android Jetpack"/> <meta itemprop="datePublished" content="2025-12-25T03:45:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="QING618"/> <meta itemprop="url" content="https://juejin.cn/user/339115460529117"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kotlin Flow çš„ emit å’Œ tryEmit æœ‰ä»€ä¹ˆåŒºåˆ« ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/339115460529117/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    QING618
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T03:45:45.000Z" title="Thu Dec 25 2025 03:45:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Kotlin Flow ä¸­ï¼Œ<code>emit()</code>Â å’ŒÂ <code>tryEmit()</code>Â éƒ½ç”¨äºå‘ Flow å‘é€å€¼ï¼Œä½†å®ƒä»¬çš„å…³é”®åŒºåˆ«åœ¨äº<strong>èƒŒå‹å¤„ç†</strong>å’Œ<strong>åç¨‹ä¸Šä¸‹æ–‡</strong>ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä¸»è¦åŒºåˆ«</h2>
<h4 data-id="heading-1">1.Â emit()</h4>
<ul>
<li><strong>æŒ‚èµ·å‡½æ•°</strong>ï¼šä¼šæŒ‚èµ·ç›´åˆ°æœ‰ç©ºé—´æ¥æ”¶å€¼ï¼ˆå¤„ç†èƒŒå‹ï¼‰</li>
<li><strong>åç¨‹å®‰å…¨</strong>ï¼šåªèƒ½åœ¨åç¨‹ä½œç”¨åŸŸä¸­è°ƒç”¨</li>
<li><strong>æ¨èä½¿ç”¨</strong>ï¼šåœ¨Â <code>collect</code>Â æˆ–Â <code>callbackFlow</code>Â ä¸­ä¼˜å…ˆä½¿ç”¨</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin">flow {
    <span class="hljs-comment">// ä¼šæŒ‚èµ·ç›´åˆ°æ¥æ”¶æ–¹å‡†å¤‡å¥½</span>
    emit(<span class="hljs-number">1</span>)
    emit(<span class="hljs-number">2</span>)
}
</code></pre>
<h4 data-id="heading-2">2.Â tryEmit()</h4>
<ul>
<li><strong>éæŒ‚èµ·å‡½æ•°</strong>ï¼šå°è¯•ç«‹å³å‘å°„å€¼ï¼Œå¦‚æœæ¥æ”¶æ–¹æœªå‡†å¤‡å¥½åˆ™è¿”å›Â <code>false</code></li>
<li><strong>å¯èƒ½ä¸¢æ•°æ®</strong>ï¼šè¿”å›Â <code>false</code>Â æ—¶å€¼ä¼šè¢«ä¸¢å¼ƒ</li>
<li><strong>æœ‰é™åœºæ™¯</strong>ï¼šä¸»è¦åœ¨ MutableStateFlow å’Œ MutableSharedFlow ä¸­ä½¿ç”¨</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> _state = MutableStateFlow(<span class="hljs-number">0</span>)

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateValue</span><span class="hljs-params">(newValue: <span class="hljs-type">Int</span>)</span></span> {
    <span class="hljs-comment">// å°è¯•å‘å°„ï¼Œå¦‚æœå¤±è´¥åˆ™ä¸¢å¼ƒ</span>
    <span class="hljs-keyword">val</span> success = _state.tryEmit(newValue)
    <span class="hljs-keyword">if</span> (!success) {
        <span class="hljs-comment">// å¤„ç†å‘å°„å¤±è´¥çš„æƒ…å†µ</span>
    }
}
</code></pre>
<h2 data-id="heading-3">äºŒã€ä½¿ç”¨åœºæ™¯å¯¹æ¯”</h2>
<h4 data-id="heading-4">1. ä½¿ç”¨ emit() çš„åœºæ™¯</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. åœ¨ flow {} æ„å»ºå™¨ä¸­</span>
flow {
    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span><span class="hljs-number">.10</span>) {
        delay(<span class="hljs-number">100</span>)
        emit(i)  <span class="hljs-comment">// âœ… æ­£ç¡®</span>
    }
}

<span class="hljs-comment">// 2. åœ¨ callbackFlow ä¸­</span>
callbackFlow {
    callback.setOnData { <span class="hljs-keyword">data</span> -&gt;
        trySend(<span class="hljs-keyword">data</span>)  <span class="hljs-comment">// callbackFlow ç‰¹æ®Šæ–¹æ³•</span>
    }
    awaitClose { callback.removeListener() }
}
</code></pre>
<h4 data-id="heading-5">2. ä½¿ç”¨ tryEmit() çš„åœºæ™¯</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä¸»è¦åœ¨ MutableStateFlow/MutableSharedFlow ä¸­</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewModel</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _uiState = MutableStateFlow&lt;UiState&gt;(Loading)
    <span class="hljs-keyword">val</span> uiState: StateFlow&lt;UiState&gt; = _uiState
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">update</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">// éæŒ‚èµ·å‡½æ•°ä¸­å°è¯•æ›´æ–°çŠ¶æ€</span>
        <span class="hljs-keyword">if</span> (!_uiState.tryEmit(Success(<span class="hljs-keyword">data</span>))) {
            <span class="hljs-comment">// å¤„ç†èƒŒå‹ï¼ˆé€šå¸¸æ—¥å¿—è®°å½•ï¼‰</span>
        }
    }
}
</code></pre>
<h4 data-id="heading-6">3. ä¸‹é¢æ˜¯ä¸€ä¸ªå°è¡¨æ ¼ï¼Œå¯ä»¥å¸®åŠ©å¿«é€Ÿäº†è§£ä½•æ—¶ä½¿ç”¨Â <code>emit</code>Â å’ŒÂ <code>tryEmit</code>ï¼š</h4>



































<table><thead><tr><th>åœºæ™¯</th><th>ä½¿ç”¨ emit</th><th>ä½¿ç”¨ tryEmit</th></tr></thead><tbody><tr><td>åœ¨æŒ‚èµ·å‡½æ•°å†…éƒ¨</td><td>æ˜¯</td><td>é¿å…ä½¿ç”¨ï¼ˆé™¤ééå¸¸ç´§æ€¥ï¼‰</td></tr><tr><td>UI ç‚¹å‡»æˆ–ç”Ÿå‘½å‘¨æœŸäº‹ä»¶</td><td>æ˜¯</td><td>å¯èƒ½ï¼ˆå¦‚æœéœ€è¦å¿«é€Ÿæ›´æ–°ï¼‰</td></tr><tr><td>å›è°ƒã€ç›‘å¬å™¨æˆ–åå°çº¿ç¨‹</td><td>é¿å…ä½¿ç”¨ï¼ˆä¸èƒ½æŒ‚èµ·ï¼‰</td><td>æ˜¯</td></tr><tr><td>éœ€è¦ä¿è¯æ•°æ®é€è¾¾</td><td>æ˜¯</td><td>å¦ï¼ˆéœ€è‡ªè¡Œå¤„ç†å¤±è´¥æƒ…å†µï¼‰</td></tr><tr><td>å‘é€å³å¿˜ï¼ˆfire-and-forgetï¼‰åœºæ™¯</td><td>å¦</td><td>æ˜¯</td></tr></tbody></table>
<p>ä¸¤å¥è¯æ¦‚æ‹¬å°±æ˜¯ï¼š</p>
<ul>
<li>å½“ä½ éœ€è¦å¯é çš„ã€å¯¹åç¨‹å‹å¥½çš„å‘é€æ–¹å¼æ—¶ï¼Œä½¿ç”¨Â <code>emit</code>ã€‚</li>
<li>å½“ä½ å¸Œæœ›å®ç°æ— é˜»å¡ã€å¿«é€Ÿè§¦å‘ä¸”ä¸æš‚åœçš„æ“ä½œæ—¶ï¼Œä½¿ç”¨Â <code>tryEmit</code>ã€‚</li>
</ul>
<h2 data-id="heading-7">ä¸‰ã€é‡è¦æ³¨æ„äº‹é¡¹</h2>
<ol>
<li>
<p><strong>callbackFlow çš„ç‰¹æ®Šæƒ…å†µ</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin">callbackFlow {
    callback { <span class="hljs-keyword">data</span> -&gt;
        <span class="hljs-comment">// è¿™é‡Œå¿…é¡»ç”¨ trySendï¼Œå› ä¸º callback ä¸æ˜¯æŒ‚èµ·ä¸Šä¸‹æ–‡</span>
        trySend(<span class="hljs-keyword">data</span>)
    }
}
</code></pre>
</li>
<li>
<p><strong>MutableSharedFlow çš„é…ç½®å½±å“</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> flow = MutableSharedFlow&lt;<span class="hljs-built_in">Int</span>&gt;(
    replay = <span class="hljs-number">0</span>,
    extraBufferCapacity = <span class="hljs-number">10</span>  <span class="hljs-comment">// ç¼“å†²åŒºå¤§å°å½±å“ tryEmit æˆåŠŸç‡</span>
)
</code></pre>
</li>
<li>
<p><strong>æ€§èƒ½è€ƒè™‘</strong></p>
<ul>
<li><code>emit()</code>ï¼šæ›´å®‰å…¨ï¼Œä¿è¯æ•°æ®ä¸ä¸¢å¤±</li>
<li><code>tryEmit()</code>ï¼šæ€§èƒ½æ›´å¥½ï¼Œä½†å¯èƒ½ä¸¢å¤±æ•°æ®</li>
</ul>
</li>
</ol>
<p>æ€»ç»“ä¸€ä¸‹äºŒè€…çš„åŒºåˆ«ï¼š</p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>emit()</th><th>tryEmit()</th></tr></thead><tbody><tr><td>æŒ‚èµ·å‡½æ•°</td><td>æ˜¯</td><td>å¦</td></tr><tr><td>ç­‰å¾…æ”¶é›†è€…</td><td>æ˜¯ï¼ˆå¦‚æœç¼“å†²åŒºå·²æ»¡ï¼‰</td><td>å¦</td></tr><tr><td>è¿”å›ç±»å‹</td><td>Unit</td><td>Boolean</td></tr><tr><td>æ˜¯å¦ç«‹å³å‘å°„ï¼Ÿ</td><td>å¦ï¼ˆå¯èƒ½ä¼šæŒ‚èµ·ï¼‰</td><td>æ˜¯ï¼ˆå¦‚æœç¼“å†²åŒºå…è®¸ï¼‰</td></tr><tr><td>æ˜¯å¦å¯åœ¨åç¨‹ä¸­ä½¿ç”¨ï¼Ÿ</td><td>å¿…é¡»</td><td>ä¸éœ€è¦</td></tr></tbody></table>
<h2 data-id="heading-8">å››ã€æœ€ä½³å®è·µå»ºè®®</h2>
<ul>
<li><strong>ä¼˜å…ˆä½¿ç”¨Â <code>emit()</code></strong> ï¼Œé™¤éæœ‰ç‰¹æ®Šæ€§èƒ½éœ€æ±‚</li>
<li>åœ¨Â <code>flow {}</code>Â æ„å»ºå™¨ä¸­<strong>æ€»æ˜¯ä½¿ç”¨Â <code>emit()</code></strong></li>
<li>åœ¨å›è°ƒæ¥å£ä¸­ï¼ˆå¦‚ callbackFlowï¼‰ä½¿ç”¨Â <code>trySend()</code>/<code>tryEmit()</code></li>
<li>å¯¹äºçŠ¶æ€æ›´æ–°ï¼Œå¦‚æœæ— æ³•ç¡®ä¿åœ¨åç¨‹ä¸Šä¸‹æ–‡ä¸­ï¼Œä½¿ç”¨Â <code>tryEmit()</code>Â ä½†è¦æœ‰å¤±è´¥å¤„ç†</li>
<li>æ˜ç¡®å¤„ç†Â <code>tryEmit()</code>Â è¿”å›çš„Â <code>false</code>Â æƒ…å†µ</li>
</ul>
<p>ç®€å•æ€»ç»“ï¼š<strong><code>emit()</code>Â æ˜¯å®‰å…¨çš„é˜»å¡ç‰ˆæœ¬ï¼Œ<code>tryEmit()</code>Â æ˜¯éé˜»å¡çš„å°è¯•ç‰ˆæœ¬ï¼Œå¯èƒ½å¤±è´¥ä¸¢æ•°æ®ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¥³å‹æ€’éª‚å›½å†…ä¸èƒ½ç”¨Claude Codeï¼Œäºæ˜¯æˆ‘ç»™å¥¹åšäº†ä¸€ä¸ª]]></title>    <link>https://juejin.cn/post/7587336857538265097</link>    <guid>https://juejin.cn/post/7587336857538265097</guid>    <pubDate>2025-12-25T03:28:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587336857538265097" data-draft-id="7587325326046101513" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¥³å‹æ€’éª‚å›½å†…ä¸èƒ½ç”¨Claude Codeï¼Œäºæ˜¯æˆ‘ç»™å¥¹åšäº†ä¸€ä¸ª"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,ç¨‹åºå‘˜,AIGC"/> <meta itemprop="datePublished" content="2025-12-25T03:28:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜é±¼çš®"/> <meta itemprop="url" content="https://juejin.cn/user/2444938365386621"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¥³å‹æ€’éª‚å›½å†…ä¸èƒ½ç”¨Claude Codeï¼Œäºæ˜¯æˆ‘ç»™å¥¹åšäº†ä¸€ä¸ª
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2444938365386621/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜é±¼çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T03:28:51.000Z" title="Thu Dec 25 2025 03:28:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç¨‹åºå‘˜é±¼çš®ã€‚æœ€è¿‘å¥³å‹å¼€å§‹å­¦ä¹  AI ç¼–ç¨‹äº†ï¼ˆè¢«æˆ‘å¸¦çš„ï¼‰ï¼Œå¥¹å¬è¯´ Claude Code è¿™ä¸ª AI ç¼–ç¨‹å·¥å…·å¾ˆç‰›æ°ï¼Œç»“æœè¯•äº†ä¸‹å‘ç°å¾—è¦å›½å¤–çš„ Claude è´¦å·æ‰èƒ½ç™»é™†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/403e1821707e4762967e3d515d740be8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=142pPF4tMBCB37dNtQLUvGGqy78%3D" alt="" loading="lazy"/></p>
<p>ç„¶åå¥¹å°±éª‚éª‚å’§å’§åœ°è·Ÿæˆ‘åæ§½ã€‚</p>
<p>å±•ç°ç”·å‹åŠ›çš„æ—¶å€™åˆ°äº†ï¼Œäºæ˜¯æˆ‘å¼€ç©ç¬‘åœ°è¯´ï¼šåˆ«éš¾è¿‡äº†ï¼Œè¦ä¸æˆ‘ç»™ä½ åšä¸€ä¸ª Claude Code ç®—äº†ï¼Ÿ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/adf061f039274e61876a4ce4cdf86dd4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=i80pz0R2lyKiysoFzkkclox%2FUM4%3D" alt="" loading="lazy"/></p>
<p>ç»“æœï¼Œå¥¹å½“çœŸäº†ï¼</p>
<p>æˆ‘ â†“</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9529994248f845b199f00a498f1d5727~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=9KfDHzcrv8SE8KQts25xz53RkV8%3D" alt="" loading="lazy"/></p>
<p>æ²¡åŠæ³•ï¼Œåªèƒ½è¯•ä¸€è¯•äº†ï¼Œæ¯•ç«Ÿè°å¸Œæœ›åœ£è¯èŠ‚è¿™ä¸¤å¤©è®©è‡ªå®¶äººéš¾è¿‡å‘¢ï¼Ÿ</p>
<p>æ­£å¥½è¿™ä¸¤å¤©å›½äº§ AI å¤§æ¨¡å‹ GLM-4.7 å‘å¸ƒäº†ï¼Œæˆ‘çœ‹ç½‘ä¸Šå¾ˆå¤šåšä¸»éƒ½åœ¨å¹ä»€ä¹ˆ â€œå›½å†…æœ€å¼ºçš„ç¼–ç¨‹æ¨¡å‹â€ã€â€œæœ€å¼ºçš„å¼€æºæ¨¡å‹â€ã€â€œClaude çš„æœ€ä½³å¹³æ›¿â€ï¼Œç”šè‡³è¯´æ˜¯è¶…è¿‡äº† GPT-5.2 å’Œ Claude Sonnet 4.5ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8a2302900ee4a4fa02364e504f918ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=5mp3WwdA1IWIcL6Rq%2BTtR4NZnt0%3D" alt="" loading="lazy"/></p>
<p>ä½ è¯´å›½äº§æœ€å¼ºä¹Ÿå°±ç®—äº†ï¼Œè¶…è¿‡ Claude è¿™æˆ‘èƒ½ä¿¡ä¹ˆï¼Ÿ</p>
<p>é‚£æ­£å¥½ï¼Œæˆ‘å°±å°è¯•ç”¨ GLM-4.7 æ¥åšä¸ªè‡ªå·±çš„ AI ç¼–ç¨‹å·¥å…·å§ï¼Œå¯¹æ ‡ Claude Code é‚£ç§çš„ï¼Œçœ‹çœ‹ GLM-4.7 åˆ°åº•å‡ æ–¤å‡ ä¸¤ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f10f802e5a74d7a84c2353ba62fc969~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=wfTHRwJNN3DN0tfRa9C7DY9Ei%2B8%3D" alt="" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥ï¼Œå°±è®©æˆ‘ä»¬ä¸€èµ· <strong>ç”¨ GLM-4.7 + Claude Code</strong> å¼€å‘ä¸€ä¸ª <strong>åŸºäº GLM-4.7 çš„ä»¿ Claude Code</strong> çš„ AI ç¼–ç¨‹å·¥å…·ã€‚</p>
<p>é¡¹ç›®å¼€å§‹å‰ï¼Œå…ˆèµ·ä¸€ä¸ªå“å½“å½“çš„åå­—ï¼Œå°±å« <code>Yupi Code</code> å§ï¼</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†éµå¾ªè¿™å¥—ã€Šé±¼çš® AI Vibe Coding å¼€å‘ä»¿ Claude Code çš„ Yupi Codeã€‹æµç¨‹ï¼Œä¸å†™ä¸€è¡Œä»£ç ï¼Œä¸€æ­¥ä¸€æ­¥æŠŠ â€œClaude Codeâ€ åšå‡ºæ¥ï¼</p>
<ul>
<li>ç¯å¢ƒå‡†å¤‡ =&gt; å®‰è£…å·¥å…·å’Œé…ç½®ç¯å¢ƒï¼Œèƒ½å¤Ÿ Vibe Coding</li>
<li>æŠ€æœ¯è°ƒç ” =&gt; ç¡®è®¤æ»¡è¶³ç”Ÿæˆéœ€æ±‚</li>
<li>è®¾è®¡å¼€å‘ =&gt; åŒ…æ‹¬æ–¹æ¡ˆè®¾è®¡ã€ç”Ÿæˆä»£ç ã€ä¿®å¤ Bugï¼Œå¾—åˆ° MVP æœ€å°å¯è¡Œäº§å“</li>
<li>ç‰ˆæœ¬æ§åˆ¶ =&gt; é˜²æ­¢åç»­æ”¹åŠ¨å‡ºé—®é¢˜</li>
<li>ä¼˜åŒ–èƒ½åŠ› =&gt; æ”¯æŒæ›´å¤šå¯¹æ ‡ Claude Code çš„åŠŸèƒ½ï¼Œæ¯”å¦‚è”ç½‘æœç´¢ã€æµå¼è¾“å‡ºã€æ·±åº¦æ€è€ƒç­‰</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6a826d4ccfb407aad98f9405decbf85~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=Ly9atXzS1TPpayL2tqYModXoNM0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">ç¯å¢ƒå‡†å¤‡</h2>
<p>æ™ºè°±çš„ GLM-4.7 å…¼å®¹å¤šæ¬¾ç¼–ç å·¥å…·ï¼Œé™¤ Claude Code å¤–ï¼Œè¿˜æ”¯æŒ Cursorã€Cline ç­‰ä¸»æµç¼–ç å·¥å…·ï¼Œçµæ´»é€‚é…å¤šç§å¼€å‘åœºæ™¯ã€‚</p>
<p>ç»™ Claude Code æ¥å…¥ GLM ä¹Ÿå¾ˆç®€å•ï¼Œ1 åˆ†é’Ÿæå®šã€‚</p>
<p>é¦–å…ˆæ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ä¸€è¡Œå‘½ä»¤å®‰è£… Claude Codeï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npmÂ installÂ -gÂ @anthropic-ai/claude-code
</code></pre>
<p>ç„¶åæ‰§è¡Œ <code>claude</code> å‘½ä»¤æ‰“å¼€ç¨‹åºï¼Œé»˜è®¤æ˜¯éœ€è¦ç™»å½• Claude è´¦å·çš„ï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d06c5da11e93450f84658eac4d31893f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=MCG8of9Fpaj0T6WUH%2FlTzFsATWg%3D" alt="" loading="lazy"/></p>
<p>ä¸è¿‡æ²¡å…³ç³»ï¼Œè®©æˆ‘ä»¬æŠŠå®ƒèƒŒåçš„ AI å¤§æ¨¡å‹æ¢æˆå›½å†…çš„ GLM-4.7ã€‚é¦–å…ˆè¿›å…¥ <code>{ç”¨æˆ·ç›®å½•}/.claude</code> ç›®å½•ï¼Œåˆ›å»ºä¸€ä¸ª <code>settings.json</code> é…ç½®æ–‡ä»¶ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/825961b0404b47c2bc0cd35a903ce335~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=psFY%2B6a46y6z9LIX8EsidwhWUKo%3D" alt="" loading="lazy"/></p>
<p>ç„¶åä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹å¦‚ä¸‹ï¼Œè®°å¾—æ›¿æ¢æˆä½ è‡ªå·±çš„ API Keyï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2627396010d6428a86ad42adf5991b38~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=wFKPnhz4mgQtmkGdxB0nwvSU9cw%3D" alt="" loading="lazy"/></p>
<p>API Key ç›´æ¥åˆ°æ™ºè°±å¼€å‘å¹³å°è·å–å³å¯ï¼š</p>
<p>æŒ‡è·¯ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fbigmodel.cn%2F" target="_blank" title="https://bigmodel.cn/" ref="nofollow noopener noreferrer">bigmodel.cn/</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a92e06b01e07470f96b417848e982268~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=hMM5G18HFhJwn55HmwTBaH1oVgs%3D" alt="" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥å°±å¯ä»¥æ„‰å¿«åœ°ä½¿ç”¨äº†~</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7db86ed5fd7414f8bfb223bcbefc1d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=QJcDsb4g4y%2BzGHu4lvXHFyYqyFE%3D" alt="" loading="lazy"/></p>
<p>é™¤äº†è¿™ç§æ–¹å¼å¤–ï¼Œå®˜æ–¹æ–‡æ¡£è¿˜æä¾›äº†æ›´ç®€å•çš„æ–¹å¼ï¼Œç›´æ¥ä½¿ç”¨è‡ªåŠ¨åŒ–åŠ©æ‰‹ï¼ŒæŒ‰ç…§æŒ‡å¼•å°±èƒ½å®Œæˆç¯å¢ƒé…ç½®ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02eac37fcb40438e8020d6c53700aade~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=bHtgVZpPdSpjFhqk6GbxDP7gmKA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">æŠ€æœ¯è°ƒç ”</h2>
<p>å¦‚æœè¦å®Œå…¨åˆ©ç”¨ AI å¼€å‘é¡¹ç›®ï¼Œæœ‰å‡ ä¸ªéš¾ç‚¹ï¼š</p>
<ol start="0">
<li>é¡¹ç›®éœ€è¦åŒ…å«å®Œæ•´å‰åç«¯ï¼Œéœ€è¦å¤§æ¨¡å‹æœ‰è¾ƒå¼ºçš„ <strong>ç¼–ç èƒ½åŠ›</strong></li>
<li>éœ€è¦è®©åç«¯é¡¹ç›®å¯¹æ¥ AI å¤§æ¨¡å‹ï¼Œæ¯ä¸ªå¤§æ¨¡å‹çš„æ¥å…¥å’Œå¼€å‘æ–¹å¼ä¸åŒï¼Œéœ€è¦è®© AI <strong>è¯»å–æ–‡æ¡£</strong> ç†è§£æœ€æ–°çš„å¼€å‘æ–¹å¼</li>
<li>å¦‚æœæƒ³è¦ä¼˜åŒ–ç•Œé¢æ•ˆæœï¼Œè¿˜éœ€è¦ <strong>å›¾ç‰‡ç†è§£èƒ½åŠ›</strong>ï¼Œç»™ AI ä¸€å¼ å›¾ç‰‡å°±èƒ½è®©å®ƒè¿˜åŸ</li>
</ol>
<p>åœ¨æ­£å¼å¼€å‘å‰ï¼Œæˆ‘ä»¬è¦ç¡®è®¤ GLM-4.7 å’Œ Claude Code çš„é…åˆèƒ½å¤Ÿæ»¡è¶³è¿™äº›èƒ½åŠ›è¦æ±‚ã€‚</p>
<p>æ ¹æ®æ™ºè°±å®˜æ–¹ä»‹ç»ï¼ŒClaude Code ä¸­å†…ç½®äº†æ™ºè°±ä¸“å±çš„ MCP å·¥å…·ï¼Œä¸éœ€è¦å¼€å‘è€…è‡ªå·±å®‰è£…ã€‚åŒ…æ‹¬ <strong>æœç´¢å’Œç½‘é¡µè¯»å–</strong> èƒ½åŠ›ã€èƒ½å¤Ÿç›´æ¥è§£ææˆªå›¾/è®¾è®¡ç¨¿/æŠ¥é”™å›¾çš„ <strong>è§†è§‰ç†è§£èƒ½åŠ›</strong>ã€‚</p>
<p>è®©æˆ‘ä»¬ä¾æ¬¡æµ‹è¯•ä¸€ä¸‹ï¼Œé¦–å…ˆæ˜¯ç½‘é¡µæœç´¢èƒ½åŠ›ï¼Œç´§è·Ÿæ—¶äº‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe66c77d48954f97bb12fafc2d158935~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=CaoeWTfnhznaEvonN%2F6exCh4KqU%3D" alt="" loading="lazy"/></p>
<p>æµ‹è¯•ç½‘é¡µè¯»å–èƒ½åŠ›ï¼Œè®©å®ƒæ¥è¯»å–æˆ‘ä»¬ç¼–ç¨‹å¯¼èˆªç½‘ç«™çš„ä¿¡æ¯ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28ca33e0dc8b40e9a083248ec3800ccd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=49oPG8yaroiE418rKFqVXYDkAyk%3D" alt="" loading="lazy"/></p>
<p>æµ‹è¯•å›¾ç‰‡ç†è§£èƒ½åŠ›ï¼Œæˆ‘ç»™ AI ä¼ äº†ä¸€å¼  â€œä»å¤¯åˆ°æ‹‰æ’è¡Œæ¦œçš„èƒŒæ™¯å›¾â€ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db773f9bc7cf486b88e0064c459903ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=U3UdvPDR2MdmNUdNu9izviDTXDw%3D" alt="" loading="lazy"/></p>
<p>AI çš„ç†è§£è¿˜æ˜¯å¾ˆå‡†ç¡®çš„ï¼Œå…·ä½“æ–‡å­—ä¹Ÿè¯»å–å‡ºæ¥äº†ã€‚</p>
<p>OKï¼Œå‡ ä¸ªèƒ½åŠ›éƒ½æ»¡è¶³è¦æ±‚ï¼Œä¸‹é¢è®©æˆ‘ä»¬è¿›å…¥æ–¹æ¡ˆè®¾è®¡å’Œå¼€å‘é˜¶æ®µã€‚</p>
<h2 data-id="heading-2">è®¾è®¡å¼€å‘</h2>
<p>å…ˆåˆ›å»ºä¸€ä¸ªå¹²å‡€çš„é¡¹ç›®ç›®å½• <code>yupi-code</code>ï¼Œæ‰“å¼€ç»ˆç«¯å¹¶è¿›å…¥è¯¥ç›®å½•ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f071d1bea8194b3caf2e0ce84dbb466e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=D6rBBQ5Hn%2Baskiiy9mUjuAbEas0%3D" alt="" loading="lazy"/></p>
<p>ç„¶åè¾“å…¥æç¤ºè¯ï¼š</p>
<pre><code class="hljs language-css" lang="css">å¸®æˆ‘å¼€å‘ä¸€ä¸ªç±»ä¼¼ Claude <span class="hljs-selector-tag">Code</span> çš„ç»ˆç«¯ AI ç¼–ç¨‹å·¥å…·ï¼Œèƒ½å¤Ÿä½¿ç”¨ GLM-<span class="hljs-number">4.7</span> æ¨¡å‹å¸®ç”¨æˆ·å›ç­”é—®é¢˜å’Œç”Ÿæˆä»£ç 
</code></pre>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œæ•´ä¸ªé¡¹ç›®çš„ç¬¬ä¸€å¥æç¤ºè¯æ˜¯æœ€é‡è¦çš„ï¼Œå¦‚æœæˆ‘è¦å¼€å‘ä¸€ä¸ªå¤æ‚çš„å•†ä¸šé¡¹ç›®ï¼Œè‚¯å®šä¼šå¥½å¥½æ‰“ç£¨ä¸€ä¸‹è¿™å¥æç¤ºè¯ï¼Œå°‘è¯´å†™ä¸ªå‡ ç™¾å­—ï¼ˆä¹‹å‰çœ‹è¿‡æˆ‘ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fcd7K9WQiOkP7AJglZ1b1Ng" target="_blank" title="https://mp.weixin.qq.com/s/cd7K9WQiOkP7AJglZ1b1Ng" ref="nofollow noopener noreferrer">AI ç¨‹åºå‘˜æŠ€æœ¯ç»ƒå…µåœºé¡¹ç›®</a> çš„åŒå­¦åº”è¯¥çŸ¥é“ï¼‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dfc0a92952c84b67ad80fe3dd9314865~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=jlCtPh7i0X1ztT6SXgwArnvlwPU%3D" alt="" loading="lazy"/></p>
<p>ä½†æµ‹è¯• AI æ¨¡å‹æ—¶ï¼Œæˆ‘å–œæ¬¢åå…¶é“è€Œè¡Œä¹‹ï¼Œç«™åœ¨å¤§å¤šæ•°ç”¨æˆ·çš„è§’åº¦ï¼Œæ•…æ„è¾“å…¥ä¸€å¥ç®€å•çš„æç¤ºè¯ï¼Œçœ‹çœ‹ AI èƒ½ä¸èƒ½å¼•å¯¼æˆ‘æ¥ç”Ÿæˆæ»¡è¶³éœ€æ±‚çš„é¡¹ç›®ã€‚</p>
<p>æœç„¶ï¼ŒAI åˆ¤æ–­è¿™æ˜¯ä¸€ä¸ªå¤æ‚çš„é¡¹ç›®ï¼Œæƒ³è¦è¿›å…¥ <strong>è®¡åˆ’æ¨¡å¼</strong> â€”â€” å…ˆæ˜ç¡®éœ€æ±‚ã€è®¾è®¡æ–¹æ¡ˆå†å¼€å‘ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2da1b2d39d284971a233f96b44acf68a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=%2BXyoQoUDsQ18%2BigLGMuNSZj4JZg%3D" alt="" loading="lazy"/></p>
<p>ç„¶åæˆ‘ä»¬éœ€è¦é€šè¿‡é€‰æ‹©æ¥æ˜ç¡®éœ€æ±‚ï¼Œå¹¶è®© AI ç”Ÿæˆæ–¹æ¡ˆã€‚</p>
<p>Claude Code çš„äº¤äº’åšçš„è¿˜æ˜¯ä¸é”™çš„ï¼Œå…ˆé€‰æ‹©ç¼–ç¨‹è¯­è¨€ï¼Œå»ºè®®è€è€å®å®é€‰ AI æ¨èçš„ç¬¬ä¸€ä¸ªï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ddd1677b3df64d878cccd4d89935d679~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=1U%2BHfya3WfkUJjkwG%2BLKCDaOkmU%3D" alt="" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥æ˜¯é€‰æ‹©é¡¹ç›®è¦å…·æœ‰çš„åŠŸèƒ½ã€‚å¦‚æœæ˜¯ä»¥å‰ï¼Œæˆ‘å¯èƒ½ä¼šå…ˆè®© AI åªå¼€å‘åŸºç¡€å¯¹è¯åŠŸèƒ½ï¼Œè·‘é€šæµç¨‹åå†æ·»åŠ å…¶ä»–åŠŸèƒ½ã€‚</p>
<p>ä½†ç°åœ¨æˆ‘å¯¹ AI æœ‰äº†æ›´å¤šçš„ä¿¡å¿ƒï¼Œ<strong>å’±å°±æŠŠæ‰€æœ‰åŠŸèƒ½å…¨éƒ½é€‰ä¸Šï¼Œå¹²å°±å®Œäº†ï¼</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e7b05807f9746a38dc3a53980af0cc5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=3OXjv7QT%2B5GB9OVldBcblxOBu7M%3D" alt="" loading="lazy"/></p>
<p>å…¶ä»–è®¾ç½®å°±ä¸å¤šè¯´äº†ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a3c3b32960d42ba9acc128d56e94b0a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=S%2FRT54Tjuojd88ChByegRiOjE%2Bk%3D" alt="" loading="lazy"/></p>
<p>é€‰æ‹©å®Œæˆåï¼ŒAI ç»™å‡ºäº†è¯¦ç»†çš„å®ç°è®¡åˆ’ï¼Œä¸€å®šè¦ä»”ç»†é˜…è¯»ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7b291fa1a434c97a85bf5b3c2d26345~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=hiuUw8T9Q8laCoRXe93t4ngNenw%3D" alt="" loading="lazy"/></p>
<p>ä½ å¯ä»¥ç›´æ¥æ‰§è¡Œï¼Œæˆ–è€…ç»™ AI è¿›ä¸€æ­¥çš„æŒ‡å¯¼ã€‚æ¯”å¦‚æˆ‘è®© AI ç”Ÿæˆçš„åº”ç”¨å»è°ƒç”¨æ™ºè°± Coding Plan å¥—é¤çš„ BASE URLï¼Œèƒ½èŠ‚çº¦ä¸€äº›æˆæœ¬ï¼Œå¹¶ä¸”ç»™ AI æä¾›äº†ä¸€ä¸ªå®˜æ–¹çš„ API æ–‡æ¡£ï¼Œä¾¿äº AI ç”Ÿæˆå‡†ç¡®çš„ä»£ç ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/247cdbdecdca405eb8571bc0e57d41b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=PykJSYiGIdYGRAZfEwqDTIsSEok%3D" alt="" loading="lazy"/></p>
<p>ç¡®è®¤åå¼€å§‹æ‰§è¡Œï¼ŒAI ä¼šå…ˆè°ƒç”¨å†…ç½®çš„å·¥å…·æ¥æœç´¢å’Œè§£ææ–‡æ¡£ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb3066f442394b24b61c22b8cc4a15e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=z1KYOzo648KfGsa8YgB0jJk11po%3D" alt="" loading="lazy"/></p>
<p>ç„¶å AI åˆ—å‡ºäº†ä¸€ä¸ª Todo Listï¼Œå¹¶ä¸”ä¸€æ­¥æ­¥ç”Ÿæˆä»£ç å’Œæ–‡æ¡£ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce264a6c600f4f33ab4cb0f73d9b10d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=eiKA2Df03v1Tu2PkD%2FU2UhH2%2F8k%3D" alt="" loading="lazy"/></p>
<p>è¿™æœŸé—´å¦‚æœä½ å‘ç°æœ‰ä¸¥é‡çš„é—®é¢˜ï¼Œæ¯”å¦‚å‘ç° AI ç”Ÿæˆçš„ä»£ç å·²ç»å®Œå…¨åç¦»é¢„æœŸäº†ï¼Œé‚£ä¹ˆå°±å°½æ—©æš‚åœæˆ–è€…äººå·¥è¾“å…¥æç¤ºè¯æ¥å¼•å¯¼ AIã€‚å¦‚æœå‘ç° AI åªæ˜¯æœ‰ä¸€å°å—ä»£ç ç”Ÿæˆçš„ä¸å¯¹ï¼Œæˆ‘çš„å»ºè®®æ˜¯å…ˆå¿ç€ï¼Œåæ­£æœ€å AI å¤§æ¦‚ç‡ä¼šè‡ªå·±å‘ç°é—®é¢˜å¹¶ä¿®å¤ã€‚</p>
<p>è¿‡äº†å¤§æ¦‚åå‡ åˆ†é’Ÿåï¼ŒAI ç”Ÿæˆå®Œæˆï¼Œè¿˜å‘Šè¯‰äº†æˆ‘ä½¿ç”¨æ–¹æ³•ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a20a424d82e4a36be03dedd2ce0686f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=P8G0s6Wb88WyLOJ9J8a3UR0VMFM%3D" alt="" loading="lazy"/></p>
<p>å¯æƒœæˆ‘æ ¹æœ¬æ‡’å¾—çœ‹ï¼Œæˆ‘ç›´æ¥æŠŠ API Key äº¤ç»™ AI å¸®æˆ‘è¿è¡Œä¸å°±å¥½äº†ï¼Ÿ</p>
<p>Vibe Coding å¼€å‘æ¨¡å¼ä¸‹ï¼Œæˆ‘å¤šè‡ªå·±åšä¸€ä»¶äº‹ï¼Œéƒ½æ˜¯å¯¹ AI çš„ä¸å°Šé‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94d4953816fe478ba863363c0623a784~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=U0UbiM8faK2xr%2F%2BFND%2FJTgbClWI%3D" alt="" loading="lazy"/></p>
<p>è¾“å…¥æç¤ºè¯ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">æˆ‘çš„ API <span class="hljs-keyword">key</span> æ˜¯ xxxxxxxï¼Œè¯·ä½ å¸®æˆ‘è¿è¡Œ
</code></pre>
<p>ç„¶åï¼Œç¿»è½¦äº†ã€‚ã€‚ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d58b4e956ff47d0b41931fb8a497d1d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=8w7AXXzQVBcPGClgWGXsT%2Fm%2FLYA%3D" alt="" loading="lazy"/></p>
<p>ä¸æ…Œï¼Œç›´æ¥è®© AI è‡ªå·±æ£€æŸ¥å¹¶ä¿®å¤é”™è¯¯ã€‚è€Œä¸”ä¸ºäº†ä½¿ç”¨æ–¹ä¾¿ï¼Œåº”è¯¥æä¾›ä¸€ä¸ªå¿«é€Ÿå¯åŠ¨è„šæœ¬ï¼Œèƒ½å¤Ÿè®©æˆ‘åƒè¿è¡Œ Claude Code ä¸€æ ·ï¼Œä¸€è¡Œå‘½ä»¤å¯åŠ¨ AI ç¼–ç¨‹å·¥å…·ã€‚</p>
<p>æç¤ºè¯ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">å¸®æˆ‘æ£€æŸ¥å¹¶ä¿®å¤é¡¹ç›®ä¸­çš„é”™è¯¯ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªå¯ä»¥åƒ Claude ä¸€æ ·è®©ç”¨æˆ·åœ¨å‘½ä»¤è¡Œè¾“å…¥ <span class="hljs-string">"yupicode"</span> å°±èƒ½å¯åŠ¨ç¨‹åºçš„å¿«æ·è„šæœ¬
</code></pre>
<p>å‡ åˆ†é’Ÿåï¼ŒAI ä¿®å¤å®Œæˆï¼Œå¹¶ä¸”æä¾›äº†ä¸€ä¸ª <code>yupicode</code> è„šæœ¬ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/480880fba25d4b11b9d5bc9a9fca89a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=PUC5MnBEvAhkfQa1L9gEhLQ89zI%3D" alt="" loading="lazy"/></p>
<p>æˆ‘æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯ï¼Œç„¶åè¿è¡Œ <code>yupicode</code> è„šæœ¬ï¼Œå°è¯•å’Œ AI å¯¹è¯ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6734c65be73442bb8d25c4d0867fac7f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=BQ8Yoj8E%2F6nRemSiaBcVN5P4amg%3D" alt="" loading="lazy"/></p>
<p>ä½ åˆ«è¯´ï¼Œæ•ˆæœè¿˜ä¸é”™å•Šï¼</p>
<p>è¿˜åƒ Claude Code ä¸€æ ·æä¾›äº†ä¸€äº›å‘½ä»¤ï¼Œæ¯”å¦‚æ¸…ç©ºå¯¹è¯å†å²ã€æŸ¥çœ‹å¸®åŠ©ä¹‹ç±»çš„ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64b3f341f448478e9dcae2a69fe85bb1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=2aliH3bIwtDVaM7QGZN8d0MMjtc%3D" alt="" loading="lazy"/></p>
<p>çœ‹åˆ°è¿™é‡Œï¼Œæˆ‘æ„Ÿè§‰é¡¹ç›®å·²ç»åŸºæœ¬å¯ç”¨äº†ã€‚å»ºè®®ç»™é¡¹ç›®ä¸Šä¸ª Git æ¥ç‰ˆæœ¬æ§åˆ¶ï¼Œé˜²æ­¢åé¢çš„æ”¹åŠ¨å‡ºé—®é¢˜ã€‚</p>
<p>ä»€ä¹ˆï¼Ÿä½ ä¸çŸ¥é“ Git æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>æ²¡å…³ç³»ï¼Œç›´æ¥äº¤ç»™ AI å§ï¼š</p>
<pre><code class="hljs">ç°åœ¨é¡¹ç›®å·²ç»åŸºæœ¬å¯ç”¨äº†ï¼Œå¸®æˆ‘æäº¤ä¸€ä¸ª git ç‰ˆæœ¬ï¼Œé˜²æ­¢åç»­æ”¹åŠ¨å‡ºé—®é¢˜
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b742e95a06de4c049177651a571930d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=HxyrhXHiVxWtLYmThDFw5W%2B1uPE%3D" alt="" loading="lazy"/></p>
<p>æµ‹è¯•ä¸‹æ¥ï¼Œç›®å‰çš„ Yupi Code è¿˜æœ‰ä¸€äº›ä¸è¶³ä¹‹å¤„ï¼Œæ¯”å¦‚ä¸æ”¯æŒæœç´¢ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/607af21913214a658fd6f05a95226a5d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=tJi8xegWNomYSZZDIYJv0NLsIhg%3D" alt="" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥å°±è®©æˆ‘ä»¬ä¼˜åŒ–é¡¹ç›®ï¼Œå¢åŠ æ›´å¤š Claude Code æ”¯æŒçš„èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-3">ä¼˜åŒ–èƒ½åŠ›</h2>
<p>1ï¼‰å…ˆæ¥æ·»åŠ ç½‘ç»œæœç´¢èƒ½åŠ›ï¼Œç›´æ¥æŠŠæ™ºè°±çš„å®˜æ–¹æ–‡æ¡£ç»™å®ƒä¸¢è¿›å»ã€‚æç¤ºè¯å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">ç°åœ¨å¥½åƒä¸æ”¯æŒç½‘ç»œæœç´¢ï¼Œè¯·å‚è€ƒ
https:<span class="hljs-regexp">//d</span>ocs.bigmodel.cn/api-reference/%E5%B7%A5%E5%85%B7-api/%E7%BD%91%E7%BB%<span class="hljs-number">9</span>C%E6%9<span class="hljs-number">0</span>%<span class="hljs-number">9</span>C%E7%B4%A2
æ–‡æ¡£ï¼Œå¢åŠ ç½‘ç»œæœç´¢å·¥å…·è°ƒç”¨èƒ½åŠ›
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/157b1318bf014959bb29eaedb0a49ec8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=aHEfQHHG1HVHbspyJvfG%2Bhoc1AI%3D" alt="" loading="lazy"/></p>
<p>å¾ˆå¿« AI å°±æ·»åŠ äº†æ–°åŠŸèƒ½ï¼Œé‡æ–°æ‰“å¼€ yupicode æ¥éªŒè¯ä¸‹ï¼Œæ­£å¸¸ç”Ÿæ•ˆäº†ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0365d092903c4922919a7d37ba32fea0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=yrBbqL84y0kPCz%2BFGZuIr%2F9fx60%3D" alt="" loading="lazy"/></p>
<p>2ï¼‰ä¸‹é¢å†ä¼˜åŒ–ä¸‹ AI å›å¤çš„æ•ˆæœï¼Œç›®å‰æ˜¯å¡ä¸€ä¼šå„¿ç„¶åç›´æ¥è¾“å‡ºå®Œæ•´å›ç­”ï¼Œéœ€è¦è°ƒæ•´ä¸ºæµå¼è¾“å‡ºçš„æ‰“å­—æœºæ•ˆæœã€‚</p>
<p>æç¤ºè¯ï¼š</p>
<pre><code class="hljs">æˆ‘å¸Œæœ›åœ¨ç­‰å¾… AI å›å¤æ—¶ï¼Œæœ‰ä¸€ä¸ªè½¬åœˆçš„å°å›¾æ ‡ï¼›å¹¶ä¸” AI çš„å›å¤å¯ä»¥å®æ—¶æµå¼è¾“å‡º
</code></pre>
<p>AI å¾ˆå¿«å°±æå®šäº†ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a6a4a2946224f09a95fef4a631afe98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=2%2B3IadOTnv%2FzD5yyrh%2FEJ8KVCQE%3D" alt="" loading="lazy"/></p>
<p>3ï¼‰GLM-4.7 è¿›ä¸€æ­¥å¼ºåŒ–äº†äº¤é”™å¼æ€è€ƒèƒ½åŠ›ï¼Œå¼•å…¥ <strong>ä¿ç•™å¼æ€è€ƒ</strong> å’Œ <strong>è½®çº§æ€è€ƒ</strong>ï¼Œè®©å¤æ‚ä»»åŠ¡æ‰§è¡Œæ›´ç¨³ã€æ›´å¯æ§ã€‚æˆ‘ä»¬ä¹Ÿåº”è¯¥è®© Yupi Code è¾“å‡ºæ¨¡å‹çš„æ€è€ƒä¿¡æ¯ã€å·¥å…·è°ƒç”¨ä¿¡æ¯ç­‰ç­‰ï¼Œå¸®åŠ©ç”¨æˆ·äº†è§£æƒ…å†µã€‚</p>
<p>è¾“å…¥æç¤ºè¯ï¼š</p>
<pre><code class="hljs">å¸®æˆ‘è¾“å‡ºæ¨¡å‹æ€è€ƒçš„ä¿¡æ¯ã€ä»¥åŠå·¥å…·è°ƒç”¨ä¿¡æ¯ï¼Œä½ å¯ä»¥é€šè¿‡å®˜æ–¹æ–‡æ¡£æ¥äº†è§£å¦‚ä½•å¼€å‘
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/109d59f5f3c64055b095e35f9a80d9a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=LZ2%2FdZoz08%2FM%2BpI1ItpRmTOra4U%3D" alt="" loading="lazy"/></p>
<p>æµ‹è¯•ä¸€ä¸‹ä¼˜åŒ–åçš„æ•ˆæœï¼Œæ¯”å¦‚ â€œä»‹ç»ä¸€ä¸‹é±¼çš®çš„ AI å¯¼èˆªç½‘ç«™â€ï¼Œèƒ½å¾ˆæ¸…æ™°åœ°çœ‹åˆ°æ€è€ƒè¿‡ç¨‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe75a74675804c92969459a845ca6d20~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=3PBybmOrnPkMvFfsGCdQjrnyvu0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">å¤§åŠŸå‘Šæˆ</h2>
<p>åˆ°è¿™é‡Œï¼Œä»¿ç…§ Claude Code å¼€å‘çš„ Yupi Code å°±å·²ç»å®Œæˆäº†ï¼Œè®©æˆ‘ä»¬ç”¨å®ƒæ¥å¼€å‘ä¸ªå°ç½‘ç«™è¯•è¯•ã€‚</p>
<p>æ¯”å¦‚æ¥ä¸ªåŠ¨ç”»å­¦ç®—æ³•çš„ Demoï¼Œæç¤ºè¯ï¼š</p>
<pre><code class="hljs language-css" lang="css">å¸®æˆ‘å¼€å‘ä¸€ä¸ªå­¦ä¹ å†’æ³¡æ’åºç®—æ³•çš„åŠ¨ç”»ç½‘ç«™ï¼Œä½¿ç”¨ <span class="hljs-selector-tag">Q</span> ç‰ˆåŠ¨æ¼«çš„é£æ ¼å’Œå‰ä¼Šå¡å“‡æ„Ÿè§‰çš„é…è‰²
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/437bbf742d6f41219e59bc0fb6a08367~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=53gcwbKEuwuzeJ%2BtSgCoO8tfKjw%3D" alt="" loading="lazy"/></p>
<p>æ•ˆæœå¦‚å›¾ï¼Œç”»é£è¿˜æ˜¯ä¸é”™çš„ï¼Œä½†è¦æ˜¯ä¹‹åå¤§æ¨¡å‹èƒ½è‡ªåŠ¨ç”Ÿæˆå›¾ç‰‡æ’ç”»å¹¶æ·»åŠ åˆ°ç½‘ç«™ä¸­ï¼Œå°±æ›´å¥½äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f900c67f69945ca8f6e735dfc46ce0d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=MRTDO1oSa8Jev58yaSsTAZG0X%2FI%3D" alt="" loading="lazy"/></p>
<p>å†æ¥å¼€å‘ä¸ªä»¿çœŸçš„ç”µå­é»‘æ¿ï¼Œæç¤ºè¯ï¼š</p>
<pre><code class="hljs">å¸®æˆ‘å¼€å‘ä¸€ä¸ªä»¿çœŸçš„ç”µå­é»‘æ¿ï¼Œç”¨æˆ·å¯ä»¥åœ¨ä¸Šé¢ç”»ç”»å¹¶å¯¼å‡ºä¸ºå›¾ç‰‡
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0cabbb5bd0144931bd80081cb1eca121~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=mBzflbJDACoMTUS794IWQJZYCHk%3D" alt="" loading="lazy"/></p>
<p>åœ£è¯èŠ‚äº†ï¼Œé±¼çš®ç»™å¤§å®¶ç”»é¢—åœ£è¯æ ‘ï¼Œè¿˜é™„èµ ä¸€ä¸ªå°ç¤¼ç‰©ï¼Œè¿™æ€ä¹ˆèƒ½ä¸ç®—æ˜¯ç¨‹åºå‘˜çš„æµªæ¼«å‘¢~</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d97835113ac64d2a8be69f36e3113826~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=QDbR3VcuDBPqBtHDgOygIVOyBwo%3D" alt="" loading="lazy"/></p>
<hr/>
<p>OKï¼Œè¿™å°±æ˜¯æˆ‘ <strong>åˆ©ç”¨å›½äº§çš„ AI å¤§æ¨¡å‹ GLM-4.7 + Claude Code</strong> å¼€å‘å‡ºä¸€ä¸ª <strong>åŸºäº GLM-4.7 çš„ Yupi Code</strong> çš„å…¨è¿‡ç¨‹äº†ã€‚</p>
<p>æˆ‘è‡ªå·±ä½“éªŒä¸‹æ¥ï¼ŒGLM-4.7 ç›¸æ¯”äºä¹‹å‰çš„å›½å†…å¤§æ¨¡å‹ï¼Œåœ¨å¤„ç†å¤æ‚ä»»åŠ¡çš„ç¨³å®šæ€§ä¸Šæœ‰è¿›æ­¥ï¼Œå³ä½¿é‡åˆ°é—®é¢˜ä¹Ÿä¼šè‡ªåŠ¨ä¿®å¤ï¼Œè®©æœ€ç»ˆç”Ÿæˆçš„ä»£ç å¯è¿è¡Œã€‚</p>
<p>è€Œä¸” GLM-4.7 è°ƒç”¨å·¥å…·çš„èƒ½åŠ›ä¹Ÿå¼ºåŒ–äº†ï¼Œå’Œ Claude Code ç­‰ AI ç¼–ç¨‹å·¥å…·æ‰“é…åˆï¼Œç›´æ¥å†…ç½®äº†è”ç½‘æœç´¢ã€ç½‘é¡µè¯»å–ã€è§£é‡Šå›¾ç‰‡ç­‰ AI ç¼–ç¨‹å¸¸ç”¨çš„èƒ½åŠ›ï¼Œä¸éœ€è¦è‡ªå·±å†å»æ‰¾ MCP æ¥å¢å¼ºäº†ã€‚</p>
<p>ä¸å¾—ä¸è¯´ï¼Œä½œä¸ºä¸€ç›´å…³æ³¨æ™ºè°± AI çš„å¿ å®å¼€å‘è€…ï¼ŒçœŸçš„å¾ˆèƒ½æ„Ÿå—åˆ°ä»–ä»¬è¿™å‡ ä¸ªæœˆæ¥åœ¨ AI ç¼–ç¨‹æ–¹å‘çš„åŠªåŠ›ï¼Œæˆ‘ç›¸ä¿¡å¤§å®¶ä¹Ÿæ˜¯æœ‰ç›®å…±ç¹ã€‚</p>
<p>ä¸è¿‡æ¯•ç«Ÿç°åœ¨çš„ Yupi Code æ˜¯ AI ä¸€æŠŠæ¢­çš„ï¼Œè¿˜æœ‰å¾ˆå¤šèƒ½ä¼˜åŒ–å®Œå–„çš„åœ°æ–¹ã€‚å¦‚æœåé¢æœ‰æ—¶é—´ï¼Œå¤§å®¶ä¹Ÿæ„Ÿå…´è¶£çš„è¯ï¼Œè¯´ä¸å®šæˆ‘ä¼šå¥½å¥½æ‰“ç£¨æ‰“ç£¨è¿™ä¸ªå·¥å…·æŠŠå®ƒå¼€æºå‡ºæ¥ã€‚æˆ‘çš„ç»ˆæç›®æ ‡æ˜¯ï¼Œè®©åŸºäº <strong>AI å¤§æ¨¡å‹ GLM-4.7 + Claude Code</strong> å¼€å‘çš„åŸºäº <strong>GLM-4.7 çš„ Yupi Code</strong> ç¼–ç¨‹å·¥å…·ï¼Œèƒ½å¤Ÿå¼€å‘å‡ºä¸€ä¸ªåŸºäº <strong>GLM-4.7 çš„</strong> ç¼–ç¨‹å·¥å…·ï¼Œæ¯”å¦‚ Yupi Son Codeã€‚æˆ‘è®¤ä¸ºå¥½çš„ AI å·¥å…·å°±æ˜¯è¦èƒ½åšåˆ°æ— é™å¥—å¨ƒï¼Œç–¯ç‹‚è‡ªä¸¾ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e176b292a14411e9c8943984cd0e455~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767238131&amp;x-signature=uciHH69IM8Olfil1Xzso0twtUsg%3D" alt="" loading="lazy"/></p>
<p>å¬æ‡‚æŒå£°~</p>
<h2 data-id="heading-5">æ›´å¤š</h2>
<p>ğŸ’» ç¼–ç¨‹å­¦ä¹ äº¤æµï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Fcode-nav" target="_blank" title="https://github.com/liyupi/code-nav" ref="nofollow noopener noreferrer">ç¼–ç¨‹å¯¼èˆª</a> ğŸ“ƒ ç®€å†å¿«é€Ÿåˆ¶ä½œï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Flaoyujianli" target="_blank" title="https://github.com/liyupi/laoyujianli" ref="nofollow noopener noreferrer">è€é±¼ç®€å†</a> âœï¸ é¢è¯•åˆ·é¢˜ç¥å™¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Fmianshiya" target="_blank" title="https://github.com/liyupi/mianshiya" ref="nofollow noopener noreferrer">é¢è¯•é¸­</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ„å»º AI-Ready è½¯ä»¶ï¼šä¸‰å±‚æ¥å£æ¨¡å‹ä¸æ™ºèƒ½è°ƒåº¦æ¶æ„]]></title>    <link>https://juejin.cn/post/7587342120021917747</link>    <guid>https://juejin.cn/post/7587342120021917747</guid>    <pubDate>2025-12-25T03:31:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587342120021917747" data-draft-id="7587325326046232585" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ„å»º AI-Ready è½¯ä»¶ï¼šä¸‰å±‚æ¥å£æ¨¡å‹ä¸æ™ºèƒ½è°ƒåº¦æ¶æ„"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-25T03:31:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‡ªç”±ç”Ÿé•¿2024"/> <meta itemprop="url" content="https://juejin.cn/user/1591748569862670"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ„å»º AI-Ready è½¯ä»¶ï¼šä¸‰å±‚æ¥å£æ¨¡å‹ä¸æ™ºèƒ½è°ƒåº¦æ¶æ„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1591748569862670/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‡ªç”±ç”Ÿé•¿2024
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T03:31:48.000Z" title="Thu Dec 25 2025 03:31:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ‘˜è¦ï¼šæœ¬æ–‡æå‡ºäº†ä¸€ä¸ªAI-READYçš„æ§åˆ¶è½¯ä»¶çš„æ¨¡å‹ï¼ŒåŸºäºä¸‰å±‚æ¶æ„ï¼Œè¯­éŸ³æˆ–è€…æ–‡æœ¬æ¥å£ï¼ŒCoreAPIå’ŒGUIåŒæ­¥APIï¼Œä»¥ä½æˆæœ¬ç²¾å‡†çš„æ“ä½œæ–¹å¼å»æ„å»ºAIæ™ºèƒ½è½¯ä»¶ï¼Œè€Œéå…¨éƒ¨åŸºäºå›¾åƒè¯†åˆ«è¯†åˆ«å»ä»æ“ä½œè½¯ä»¶ã€‚</p>
<h2 data-id="heading-0"><strong>æ„å»º AI-Ready è½¯ä»¶ï¼šä¸‰ä½ä¸€ä½“æ¥å£æ¨¡å‹ä¸æ™ºèƒ½è°ƒåº¦æ¶æ„</strong></h2>
<h3 data-id="heading-1">å¼•è¨€ï¼šå½“è½¯ä»¶éœ€è¦â€œå¬æ‡‚äººè¯â€</h3>
<p>åœ¨å¤§æ¨¡å‹ï¼ˆLLMï¼‰èƒ½åŠ›æ—¥ç›Šæˆç†Ÿçš„ä»Šå¤©ï¼Œâ€œè®© AI æ“ä½œè½¯ä»¶â€å·²ä¸å†æ˜¯å®éªŒå®¤é‡Œçš„å¥‡æƒ³ï¼Œè€Œæˆä¸ºæå‡äººæœºååŒæ•ˆç‡çš„å…³é”®è·¯å¾„ã€‚ç„¶è€Œï¼Œè®¸å¤šå°è¯•ä»åœç•™åœ¨ä¸¤ä¸ªæç«¯ï¼šè¦ä¹ˆç”¨è®¡ç®—æœºè§†è§‰æ¨¡æ‹Ÿäººç±»ç‚¹å‡»ï¼ˆè„†å¼±ä¸”ä½æ•ˆï¼‰ï¼Œè¦ä¹ˆç›´æ¥æš´éœ²åº•å±‚å‘½ä»¤è¡Œï¼ˆé»‘ç›’ä¸”éš¾ç”¨ï¼‰ã€‚</p>
<p>çœŸæ­£å®ç”¨çš„æ–¹æ¡ˆï¼Œå¿…é¡»å›ç­”ä¸‰ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š</p>
<ol>
<li><strong>å¦‚ä½•ç†è§£ç”¨æˆ·çš„è‡ªç„¶è¯­è¨€æŒ‡ä»¤ï¼Ÿ</strong></li>
<li><strong>å¦‚ä½•å¯é ã€é«˜æ•ˆåœ°æ‰§è¡Œæ“ä½œï¼Ÿ</strong></li>
<li><strong>å¦‚ä½•è®©ç”¨æˆ·â€œçœ‹å¾—è§ã€ä¿¡å¾—è¿‡â€ï¼Ÿ</strong></li>
</ol>
<p>æœ¬æ–‡æå‡ºä¸€ç§<strong>ä¸‰ä½ä¸€ä½“çš„æ™ºèƒ½è½¯ä»¶æ¥å£æ¨¡å‹</strong>ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šæ„å»º<strong>ä»¥è°ƒåº¦ä¸­æ¢ä¸ºæ ¸å¿ƒçš„ååŒæ¶æ„</strong>ï¼Œä¸ºå¼€å‘è€…æä¾›ä¸€æ¡æ¸…æ™°ã€å¯è½åœ°çš„â€œAI-Ready è½¯ä»¶â€æ”¹é€ è·¯å¾„ã€‚</p>
<p>ä½•è°“AI-Readyï¼Ÿ <strong>AI-Ready</strong>è¿™ä¸ªæœ¯è¯­ï¼Œæ˜¯è¿‘å¹´æ¥åœ¨è½¯ä»¶å·¥ç¨‹ã€äº§å“è®¾è®¡å’Œä¼ä¸šæ•°å­—åŒ–è½¬å‹ä¸­é€æ¸æµè¡Œèµ·æ¥çš„ä¸€ä¸ªå…³é”®æ¦‚å¿µã€‚å®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªéšæ„çš„è¥é”€è¯æ±‡ï¼Œè€Œæ˜¯å¯¹ä¸€ç±»<strong>å…·å¤‡ä¸äººå·¥æ™ºèƒ½ç³»ç»Ÿï¼ˆå°¤å…¶æ˜¯å¤§è¯­è¨€æ¨¡å‹å’Œæ™ºèƒ½ä½“ï¼‰é«˜æ•ˆã€å®‰å…¨ã€å¯é ååŒèƒ½åŠ›</strong>çš„è½¯ä»¶æˆ–ç³»ç»Ÿçš„ç²¾å‡†æè¿°ã€‚</p>
<p>æŠ€æœ¯å²ä¸Šï¼Œæˆ‘ä»¬æ—©å·²ä¹ æƒ¯ç”¨ â€œ-Readyâ€ æ¥æè¿°ç³»ç»Ÿæ˜¯å¦é€‚é…æ–°èŒƒå¼ï¼š</p>
<ul>
<li><strong>Mobile-Readyï¼ˆç§»åŠ¨å°±ç»ªï¼‰</strong> ï¼šæŒ‡ç½‘ç«™æˆ–åº”ç”¨èƒ½è‡ªé€‚åº”æ‰‹æœºå±å¹•ã€è§¦æ§æ“ä½œã€ä½å¸¦å®½ç­‰ç§»åŠ¨ç¯å¢ƒã€‚</li>
<li><strong>Cloud-Readyï¼ˆäº‘å°±ç»ªï¼‰</strong> ï¼šæŒ‡è½¯ä»¶èƒ½å¼¹æ€§ä¼¸ç¼©ã€æ— çŠ¶æ€éƒ¨ç½²ã€é€šè¿‡ API å¯¹æ¥äº‘æœåŠ¡ã€‚</li>
</ul>
<p>åŒç†ï¼Œ<strong>AI-Ready = è½¯ä»¶å·²åšå¥½ä¸ AI æ™ºèƒ½ä½“ååŒå·¥ä½œçš„å‡†å¤‡ã€‚</strong></p>
<p>å®ƒæ„å‘³ç€ï¼š<strong>è½¯ä»¶ä¸å†åªæ˜¯ä¸€ä¸ªå­¤ç«‹çš„å·¥å…·ï¼Œè€Œæ˜¯ä¸€ä¸ªå¯è¢« AI ç†è§£ã€è°ƒç”¨ã€ç»„åˆçš„â€œèƒ½åŠ›å•å…ƒâ€</strong> ã€‚ç±»ä¼¼äºMCPå·¥å…·ï¼Œä½†æ˜¯è¶…è¶ŠMCPä½œä¸ºè·å¾—ä¿¡æ¯çš„æ¥å£ï¼Œè€Œæ˜¯ç›´æ¥ä¸ŠAIæ§åˆ¶ä¼ ç»Ÿçš„è½¯ä»¶ã€‚</p>
<p>ä¸€ä¸ª AI-Ready çš„è½¯ä»¶ï¼Œå¿…é¡»æ»¡è¶³ä»¥ä¸‹è‡³å°‘ä¸‰é¡¹åŸºæœ¬æ¡ä»¶ï¼š</p>
<ul>
<li><strong>å¯ç¼–ç¨‹æ¥å£ï¼ˆProgrammableï¼‰</strong>ï¼Œæä¾›æ¸…æ™°ã€ç¨³å®šçš„ API æˆ–è„šæœ¬æ¥å£ï¼Œå…è®¸å¤–éƒ¨ç¨‹åºï¼ˆå¦‚ AI Agentï¼‰è°ƒç”¨å…¶åŠŸèƒ½ã€‚åä¾‹å¦‚åªæœ‰å›¾å½¢ç•Œé¢ï¼Œæ— ä»»ä½•å‘½ä»¤è¡Œæˆ– API æ”¯æŒã€‚</li>
<li><strong>è¯­ä¹‰å¯ç†è§£ï¼ˆSemantically Describableï¼‰</strong>ï¼ŒåŠŸèƒ½å¯é€šè¿‡è‡ªç„¶è¯­è¨€æè¿°ï¼ˆå¦‚â€œä¿å­˜æ–‡ä»¶â€â€œå¯¼å‡ºPDFâ€ï¼‰ï¼Œä¸”æœ‰å¯¹åº”çš„ç»“æ„åŒ–å…ƒæ•°æ®ï¼ˆå¦‚ OpenAPIï¼‰ã€‚åä¾‹å¦‚åŠŸèƒ½éšè—åœ¨å¤šå±‚èœå•ä¸­ï¼Œæ— æ³•ç”¨ä¸€å¥è¯è¯´æ¸…ã€‚</li>
<li><strong>çŠ¶æ€å¯è§‚æµ‹ï¼ˆObservableï¼‰</strong> æ“ä½œç»“æœå¯è¢«å¤–éƒ¨æ„ŸçŸ¥ï¼ˆå¦‚è¿”å›æˆåŠŸ/å¤±è´¥ã€è§¦å‘äº‹ä»¶ã€æ›´æ–°çŠ¶æ€ï¼‰ï¼Œä¾¿äº AI åˆ¤æ–­ä¸‹ä¸€æ­¥ã€‚</li>
<li><strong>å®‰å…¨å¯æ§ï¼ˆControllableï¼‰</strong> æ”¯æŒæƒé™æ§åˆ¶ã€æ“ä½œå®¡è®¡ã€ç”¨æˆ·æˆæƒï¼Œé˜²æ­¢ AI æ»¥ç”¨ã€‚è€Œè¿‡å¾€çš„è®¾è®¡ï¼Œä¸€æ—¦å¼€æ”¾æ¥å£ï¼Œå°±ç­‰äºå®Œå…¨æ”¾æƒï¼Œæ— ç»†ç²’åº¦æ§åˆ¶ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-2">ä¸€ã€ä¸‰ä½ä¸€ä½“æ¥å£æ¨¡å‹ï¼šè¯­éŸ³å…¥å£ + æ ¸å¿ƒæ“ä½œ API + GUI åŒæ­¥ API</h3>
<p>æˆ‘ä»¬ä¸»å¼ ï¼Œä»»ä½•ä¸€ä¸ªå¸Œæœ›æ”¯æŒ AI æ§åˆ¶çš„ç°ä»£è½¯ä»¶ï¼Œéƒ½åº”åŒæ—¶æä¾›ä»¥ä¸‹ä¸‰ç±»æ¥å£ï¼Œå½¢æˆé—­ç¯ï¼š</p>
<h4 data-id="heading-3">1. è¯­éŸ³/è‡ªç„¶è¯­è¨€å…¥å£ï¼ˆVoice/NL Gatewayï¼‰</h4>
<p>è¿™æ˜¯ç”¨æˆ·ä¸ AI çš„äº¤äº’èµ·ç‚¹ã€‚å®ƒä¸æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œåªè´Ÿè´£å°†æ¨¡ç³Šçš„äººç±»è¯­è¨€è½¬åŒ–ä¸ºç»“æ„åŒ–æŒ‡ä»¤ã€‚</p>
<ul>
<li><strong>è¾“å…¥</strong>ï¼šè¯­éŸ³æˆ–æ–‡æœ¬ï¼ˆå¦‚â€œæŠŠè¿™å¼ å›¾å‘ç»™æå·¥ï¼Œå¹¶åŠ ä¸ªæ°´å°â€ï¼‰ã€‚</li>
<li><strong>å¤„ç†</strong>ï¼šé€šè¿‡æœ¬åœ°æˆ–äº‘ç«¯å¤§æ¨¡å‹è¿›è¡Œæ„å›¾è¯†åˆ«ä¸å‚æ•°æŠ½å–ã€‚</li>
<li><strong>è¾“å‡º</strong>ï¼šæ ‡å‡†åŒ–çš„æ“ä½œè¯·æ±‚å¯¹è±¡ï¼Œä¾‹å¦‚ï¼š
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"action"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"send_with_watermark"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"target"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"li.gong@company.com"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"image_path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/tmp/photo.png"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
</ul>
<blockquote>
<p>âœ… å…³é”®åŸåˆ™ï¼š<strong>è§£è€¦ç†è§£ä¸æ‰§è¡Œ</strong>ã€‚NL å…¥å£åªåšâ€œç¿»è¯‘â€ï¼Œä¸åšâ€œå†³ç­–â€ã€‚</p>
</blockquote>
<h4 data-id="heading-4">2. æ ¸å¿ƒæ“ä½œ APIï¼ˆCore Action APIï¼‰</h4>
<p>è¿™æ˜¯è½¯ä»¶çœŸæ­£çš„â€œè‚Œè‚‰â€â€”â€”æ‰€æœ‰ä¸šåŠ¡é€»è¾‘çš„ç¨‹åºåŒ–å…¥å£ã€‚</p>
<ul>
<li>
<p><strong>è®¾è®¡è¦æ±‚</strong>ï¼š</p>
<ul>
<li><strong>åŸå­æ€§</strong>ï¼šæ¯ä¸ª API å¯¹åº”å•ä¸€ã€æ˜ç¡®çš„æ“ä½œï¼›</li>
<li><strong>æ—  GUI ä¾èµ–</strong>ï¼šå³ä½¿ç•Œé¢æœªå¯åŠ¨ï¼Œä¹Ÿèƒ½è¿è¡Œï¼ˆæ”¯æŒ headless æ¨¡å¼ï¼‰ï¼›</li>
<li><strong>å¹‚ç­‰æ€§ä¸é”™è¯¯åé¦ˆ</strong>ï¼šä¾¿äº AI è¿›è¡Œé‡è¯•æˆ–å›æ»šã€‚</li>
</ul>
</li>
<li>
<p><strong>æ¥å£å½¢å¼çµæ´»</strong>ï¼š</p>
<ul>
<li>å‡½æ•°è°ƒç”¨ï¼ˆ<code>save_project(path)</code>ï¼‰</li>
<li>REST/gRPCï¼ˆè·¨è¿›ç¨‹ï¼‰</li>
<li>CLIï¼ˆ<code>myapp --save --path=xxx</code>ï¼‰</li>
</ul>
</li>
</ul>
<blockquote>
<p>âœ… è¿™æ˜¯ç³»ç»Ÿ<strong>å¯é æ€§ä¸æ€§èƒ½çš„åŸºçŸ³</strong>ã€‚AI åº”ç›´æ¥è°ƒç”¨æ­¤å±‚ï¼Œè€Œéæ¨¡æ‹Ÿé¼ æ ‡ç‚¹å‡»ã€‚</p>
</blockquote>
<h4 data-id="heading-5">3. GUI åŒæ­¥ APIï¼ˆGUI Sync APIï¼‰</h4>
<p>è¿™æ˜¯é¢å‘äººç±»çš„â€œä¿¡ä»»å±‚â€ã€‚å®ƒåœ¨æ ¸å¿ƒæ“ä½œå®Œæˆåï¼Œä¸»åŠ¨è§¦å‘ç•Œé¢æ›´æ–°ï¼Œè®©ç”¨æˆ·æ„ŸçŸ¥åˆ° AI å·²å®Œæˆä»»åŠ¡ã€‚</p>
<ul>
<li><strong>å…¸å‹è¡Œä¸º</strong>ï¼š
<ul>
<li>ä»¿äººç±»çš„å¤šæ­¥éª¤ç‚¹å‡»å’Œé¡µé¢åˆ‡æ¢åŠ¨ç”»ï¼Œå‘ç”¨æˆ·æ¸…æ™°åŒæ­¥å±•ç¤ºæ ¸å¿ƒAPIæ“ä½œè¿‡ç¨‹</li>
<li>æ›´æ–°çŠ¶æ€æ ï¼šâ€œå·²ä¿å­˜è‡³ ~/Documentsâ€</li>
<li>é«˜äº®ç›¸å…³èœå•é¡¹</li>
<li>æ’­æ”¾å¾®åŠ¨æ•ˆï¼ˆå¦‚æˆåŠŸæ‰“é’©åŠ¨ç”»ï¼‰</li>
</ul>
</li>
<li><strong>å…³é”®ç‰¹æ€§</strong>ï¼š
<ul>
<li><strong>éé˜»å¡</strong>ï¼šä¸å½±å“æ ¸å¿ƒé€»è¾‘æ‰§è¡Œï¼›</li>
<li><strong>äº‹ä»¶é©±åŠ¨</strong>ï¼šç”± Core API è§¦å‘å›è°ƒï¼Œè€Œéè½®è¯¢ï¼›</li>
<li><strong>å¯å…³é—­</strong>ï¼šæ”¯æŒæ— å¤´è¿è¡Œæ¨¡å¼ã€‚</li>
</ul>
</li>
</ul>
<blockquote>
<p>âœ… GUI åŒæ­¥ä¸æ˜¯ä¸ºäº† AI çœ‹ï¼Œè€Œæ˜¯ä¸ºäº†<strong>äººçœ‹</strong>â€”â€”è¿™æ˜¯äººæœºååŒä¸­ä¸å¯å¿½è§†çš„å¿ƒç†å¥‘çº¦ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">äºŒã€æ‰§è¡Œæµç¨‹ï¼šä»è¯­éŸ³åˆ°åé¦ˆçš„å®Œæ•´é—­ç¯</h3>
<p>æ•´ä¸ªäº¤äº’è¿‡ç¨‹å¯åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant User as ç”¨æˆ·ï¼ˆè¯­éŸ³ï¼‰
    participant NL_Gateway as è¯­éŸ³/NLå…¥å£
    participant Core_API as æ ¸å¿ƒæ“ä½œAPI
    participant GUI_Sync as GUIåŒæ­¥API
    participant Model as å¤§æ¨¡å‹

    User-&gt;&gt;NL_Gateway: â€œå¯¼å‡ºå½“å‰å›¾è¡¨ä¸ºPDFâ€
    NL_Gateway-&gt;&gt;Model: å‘é€æ–‡æœ¬
    Model--&gt;&gt;NL_Gateway: è¿”å› {action: &amp;#34;export_pdf&amp;#34;, format: &amp;#34;A4&amp;#34;}
    NL_Gateway-&gt;&gt;Core_API: è°ƒç”¨ export_pdf(&amp;#34;A4&amp;#34;)
    Core_API-&gt;&gt;Core_API: æ‰§è¡Œæ¸²æŸ“ä¸æ–‡ä»¶å†™å…¥
    Core_API-&gt;&gt;GUI_Sync: è§¦å‘ on_export_success(path)
    GUI_Sync-&gt;&gt;GUI: æ˜¾ç¤ºâ€œPDFå·²ç”Ÿæˆâ€é€šçŸ¥ + è‡ªåŠ¨æ‰“å¼€æ–‡ä»¶å¤¹
</code></pre>
<p>è¿™ä¸€æµç¨‹ç¡®ä¿äº†ï¼š</p>
<ul>
<li><strong>é«˜æ•ˆ</strong>ï¼šç»•è¿‡ GUI ç›´æ¥æ“ä½œæ•°æ®ï¼›</li>
<li><strong>å¯é </strong>ï¼šæ ¸å¿ƒé€»è¾‘å¯æµ‹è¯•ã€å¯å®¡è®¡ï¼›</li>
<li><strong>å¯ä¿¡</strong>ï¼šç”¨æˆ·è·å¾—å³æ—¶ã€ç›´è§‚çš„åé¦ˆã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-7">ä¸‰ã€è¿›é˜¶æ¶æ„ï¼šå¼•å…¥è°ƒåº¦ä¸­æ¢ï¼ˆOrchestratorï¼‰</h3>
<p>å½“å•åº”ç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç›´æ¥æŠŠä¸‰å±‚æ¶æ„å°è£…åœ¨åŒä¸€ä¸ªåº”ç”¨å†…ï¼Œè€Œå½“ç³»ç»Ÿæ¶‰åŠå¤šä¸ªåº”ç”¨ï¼ˆå¦‚å¯¼èˆª + é€šè®¯ + åŒ»ç–—å½±åƒï¼‰æ—¶ï¼Œéœ€å¼•å…¥<strong>æ ¸å¿ƒè°ƒåº¦è½¯ä»¶</strong>ä½œä¸ºç»Ÿä¸€åè°ƒè€…ã€‚</p>
<h4 data-id="heading-8">æ¶æ„ç»„æˆ</h4>
<ul>
<li>
<p><strong>è°ƒåº¦ä¸­æ¢ï¼ˆOrchestratorï¼‰</strong>ï¼š</p>
<ul>
<li>ç»Ÿä¸€æ¥æ”¶ç”¨æˆ·æŒ‡ä»¤ï¼›</li>
<li>åˆ©ç”¨å¤§æ¨¡å‹è¿›è¡Œä»»åŠ¡è§„åˆ’ï¼›</li>
<li>ç»´æŠ¤åº”ç”¨æ³¨å†Œè¡¨ï¼ŒåŠ¨æ€è·¯ç”± API è°ƒç”¨ï¼›</li>
<li>å®ç°æƒé™æ§åˆ¶ä¸æ“ä½œå®¡è®¡ã€‚</li>
</ul>
</li>
<li>
<p><strong>åº”ç”¨è½¯ä»¶ï¼ˆAgentsï¼‰</strong>ï¼š</p>
<ul>
<li>å‘è°ƒåº¦ä¸­æ¢æ³¨å†Œè‡ªèº«èƒ½åŠ›ï¼ˆç±»ä¼¼ OpenAPIï¼‰ï¼›</li>
<li>æä¾›æ ‡å‡†åŒ– Core API ä¸ GUI Sync æ¥å£ï¼›</li>
<li>å¯ç‹¬ç«‹å‡çº§ï¼Œä¸å½±å“æ•´ä½“ç³»ç»Ÿã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-9">æ¶æ„ä¼˜åŠ¿</h4>

























<table><thead><tr><th>ä¼˜åŠ¿</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>è§£è€¦</strong></td><td>æ–°å¢åº”ç”¨æ— éœ€ä¿®æ”¹è°ƒåº¦å™¨</td></tr><tr><td><strong>å®‰å…¨</strong></td><td>æ‰€æœ‰æ“ä½œç»ä¸­æ¢æˆæƒï¼Œé¿å…è¶Šæƒ</td></tr><tr><td><strong>è·¨å¹³å°</strong></td><td>å¯è°ƒåº¦æ¡Œé¢ã€Webã€IoT è®¾å¤‡</td></tr><tr><td><strong>å¯è§‚æµ‹</strong></td><td>å…¨é“¾è·¯æ—¥å¿—æ”¯æŒè°ƒè¯•ä¸å›æ”¾</td></tr></tbody></table>
<blockquote>
<p>è¿™ä¸€æ¶æ„ç±»ä¼¼äºæ“ä½œç³»ç»Ÿçš„å†…æ ¸ï¼ˆè°ƒåº¦ä¸­æ¢ï¼‰ä¸ç”¨æˆ·æ€ç¨‹åºï¼ˆåº”ç”¨è½¯ä»¶ï¼‰çš„å…³ç³»ï¼Œæ˜¯æ„å»º<strong>ä¸ªäººæ™ºèƒ½ä½“æ“ä½œç³»ç»Ÿ</strong>çš„é›å½¢ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-10">å››ã€å…¸å‹åº”ç”¨åœºæ™¯ï¼šå½“â€œæ‰‹â€ä¸å¯ç”¨æ—¶ï¼ŒAI æˆä¸ºå»¶ä¼¸</h3>
<p>è¯¥æ¨¡å‹çš„ä»·å€¼åœ¨ä»¥ä¸‹é«˜ä¸“æ³¨åº¦ã€é«˜é£é™©åœºæ™¯ä¸­å°¤ä¸ºçªå‡ºï¼š</p>
<ul>
<li><strong>æ™ºèƒ½é©¾é©¶</strong>ï¼šè¯­éŸ³æŒ‡ä»¤ â†’ è°ƒç”¨å¯¼èˆª API â†’ ä¸­æ§å±åŒæ­¥åˆ·æ–°è·¯çº¿ï¼›</li>
<li><strong>å¤–ç§‘æ‰‹æœ¯</strong>ï¼šåŒ»ç”Ÿè¯´â€œè°ƒå‡ºæ˜¨æ—¥ MRIâ€ â†’ AI è°ƒç”¨ PACS ç³»ç»Ÿ â†’ æ‰‹æœ¯å®¤å¤§å±å³æ—¶æ˜¾ç¤ºï¼›</li>
<li><strong>æ·±ç©ºæ¢ç´¢</strong>ï¼šå®‡èˆªå‘˜éª¨ä¼ å¯¼è¯­éŸ³ â†’ æ§åˆ¶æœºæ¢°è‡‚é‡‡æ · â†’ HUD æ˜¾ç¤ºæ“ä½œçŠ¶æ€ã€‚</li>
<li><strong>ä¼´éšç›‘æ§</strong>ï¼šè¯­éŸ³/åŠ¨ä½œæŒ‡ä»¤ â†’ è°ƒç”¨è®°å½• API â†’ å¢åŠ è®°å½•æ—¥å¿—ï¼›</li>
</ul>
<blockquote>
<p>åœ¨è¿™äº›åœºæ™¯ä¸­ï¼Œ<strong>æ‰‹æ˜¯ç¨€ç¼ºèµ„æºï¼Œçœ¼éœ€ä¸“æ³¨ä¸»ä»»åŠ¡ï¼Œå˜´æˆä¸ºæœ€è‡ªç„¶çš„è¾“å…¥é€šé“</strong>ã€‚ä¸‰ä½ä¸€ä½“æ¨¡å‹å®Œç¾å¥‘åˆè¿™ä¸€éœ€æ±‚ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-11">äº”ã€å®è·µå»ºè®®</h3>
<ol>
<li>
<p><strong>å…ˆé‡æ„ Core API</strong><br/>
å°†ç°æœ‰åŠŸèƒ½å°è£…ä¸ºæ—  GUI ä¾èµ–çš„å‡½æ•°ï¼Œç¡®ä¿å¯è„šæœ¬åŒ–è°ƒç”¨ã€‚</p>
</li>
<li>
<p><strong>æ·»åŠ  GUI Sync é’©å­</strong><br/>
åœ¨å…³é”®æ“ä½œåè§¦å‘äº‹ä»¶ï¼ˆå¦‚ <code>on_save_complete</code>ï¼‰ï¼Œç”±ç•Œé¢å±‚ç›‘å¬å¹¶æ›´æ–°ã€‚</p>
</li>
<li>
<p><strong>æ¥å…¥ NL å…¥å£</strong><br/>
ä½¿ç”¨ LangChainã€Ollama æˆ–è‡ªç ” Agent æ¡†æ¶ï¼Œå°† Core API æ³¨å†Œä¸ºå·¥å…·ï¼ˆToolsï¼‰ã€‚</p>
</li>
<li>
<p><strong>æä¾›å¼€å…³ä¸æ—¥å¿—</strong><br/>
å…è®¸ç”¨æˆ·å…³é—­ AI æ§åˆ¶ï¼Œå¹¶è®°å½•æ‰€æœ‰æ“ä½œç”¨äºå®¡è®¡ã€‚</p>
</li>
</ol>
<hr/>
<h3 data-id="heading-12">ç»“è¯­ï¼šèµ°å‘äººæœºååŒçš„æ–°èŒƒå¼</h3>
<p>æœªæ¥çš„è½¯ä»¶ï¼Œä¸åº”åªæ˜¯è¢«åŠ¨å“åº”ç‚¹å‡»çš„å·¥å…·ï¼Œè€Œåº”æˆä¸ºèƒ½ç†è§£æ„å›¾ã€ä¸»åŠ¨åä½œçš„æ™ºèƒ½ä¼™ä¼´ã€‚</p>
<p>é€šè¿‡<strong>ä¸‰ä½ä¸€ä½“æ¥å£æ¨¡å‹</strong>ï¼ˆè¯­éŸ³å…¥å£ + æ ¸å¿ƒ API + GUI åŒæ­¥ï¼‰ä¸<strong>è°ƒåº¦ä¸­æ¢æ¶æ„</strong>ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸ç‰ºç‰²ç¨³å®šæ€§ä¸å®‰å…¨æ€§çš„å‰æä¸‹ï¼Œèµ‹äºˆè½¯ä»¶çœŸæ­£çš„â€œå¯å¯¹è¯æ€§â€ä¸â€œå¯æ“ä½œæ€§â€ã€‚</p>
<p>è¿™ä¸ä»…æ˜¯æŠ€æœ¯å‡çº§ï¼Œæ›´æ˜¯ä¸€æ¬¡äº¤äº’èŒƒå¼çš„è·ƒè¿ï¼š</p>
<blockquote>
<p><strong>AI è´Ÿè´£å¹²æ´»ï¼ŒGUI è´Ÿè´£æ²Ÿé€šï¼Œäººè´Ÿè´£å†³ç­–ã€‚</strong></p>
</blockquote>
<p>åœ¨é©¾é©¶èˆ±ã€æ‰‹æœ¯å®¤ã€ç©ºé—´ç«™â€”â€”ä¹ƒè‡³æ¯ä¸ªäººçš„æ—¥å¸¸å·¥ä½œä¸­ï¼Œè¿™æ ·çš„ç³»ç»Ÿå°†æˆä¸ºäººæœºå…±ç”Ÿçš„æ–°åŸºç¡€è®¾æ–½ã€‚</p>
<hr/>
<p>å¦‚æœä½ æ­£åœ¨å¼€å‘ä¸€æ¬¾æ¡Œé¢æˆ– Web åº”ç”¨ï¼Œå¹¶å¸Œæœ›æ”¯æŒ AI æ§åˆ¶ï¼Œä¸å¦¨ä¸ºä½ çš„è½¯ä»¶åŠ ä¸Šè¿™ä¸‰å±‚æ¥å£ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·¡æ³Šååˆ©ä¸ç”Ÿæ´»ç„¦è™‘ï¼šå†™ç»™ IT äººçš„ä¸€ç‚¹ä¸ªäººæ€è€ƒ]]></title>    <link>https://juejin.cn/post/7587334152870297640</link>    <guid>https://juejin.cn/post/7587334152870297640</guid>    <pubDate>2025-12-25T03:49:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587334152870297640" data-draft-id="7587342664077688847" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·¡æ³Šååˆ©ä¸ç”Ÿæ´»ç„¦è™‘ï¼šå†™ç»™ IT äººçš„ä¸€ç‚¹ä¸ªäººæ€è€ƒ"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-25T03:49:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¼–ç¨‹å¹²è´§é“º"/> <meta itemprop="url" content="https://juejin.cn/user/52383084474680"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·¡æ³Šååˆ©ä¸ç”Ÿæ´»ç„¦è™‘ï¼šå†™ç»™ IT äººçš„ä¸€ç‚¹ä¸ªäººæ€è€ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/52383084474680/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¼–ç¨‹å¹²è´§é“º
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T03:49:48.000Z" title="Thu Dec 25 2025 03:49:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62192a1cac294ea7b30f87a44c9c042c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57yW56iL5bmy6LSn6ZO6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767239388&amp;x-signature=QfZeayrE22VO7nSVUNnOlb2Pyek%3D" alt="ChatGPT Image 2025å¹´12æœˆ25æ—¥ 11_38_42.png" loading="lazy"/></p>
<p>è¿™ä¸¤å¹´æˆ‘ç»å¸¸ä¼šå¬åˆ°ä¸¤å¥è¯ã€‚</p>
<p>ä¸€å¥æ˜¯â€œè¦æ·¡æ³Šååˆ©â€ï¼Œå¥½åƒåªè¦å¿ƒæ€ç¨³ä¸€ç‚¹ï¼Œç”Ÿæ´»å°±èƒ½è½»å¾ˆå¤šã€‚å¦ä¸€å¥æ˜¯â€œåˆ«çŸ«æƒ…ï¼Œå…ˆæŠŠé’±æŒ£äº†â€ï¼Œå¥½åƒåªè¦è¶³å¤ŸåŠªåŠ›ï¼Œç„¦è™‘è‡ªç„¶ä¼šæ¶ˆå¤±ã€‚</p>
<p>ä½†ä½œä¸ºä¸€ä¸ªé•¿æœŸå’Œ IT åœˆèŠ‚å¥æ‰“äº¤é“çš„äººï¼Œæˆ‘è¶Šæ¥è¶Šè§‰å¾—ï¼š<strong>å¾ˆå¤šç„¦è™‘ä¸æ˜¯ä½ æƒ³ä¸å¼€ï¼Œè€Œæ˜¯ä½ ä¸€ç›´å¤„åœ¨ä¸€ä¸ªâ€œéšæ—¶ä¼šè¢«æ·˜æ±°â€çš„å™äº‹é‡Œã€‚</strong><br/>
åœ¨è¿™ç§å™äº‹é‡Œè°ˆâ€œæ·¡æ³Šååˆ©â€ï¼Œå¾ˆå®¹æ˜“å˜æˆä¸€å¥ç«™ç€è¯´è¯ä¸è…°ç–¼çš„å®‰æ…°ã€‚</p>
<p>æ‰€ä»¥æˆ‘æƒ³æŠŠâ€œæ·¡æ³Šååˆ©â€æ¢ä¸€ç§æ›´æ¥åœ°æ°”çš„è¯´æ³•ï¼š<br/>
<strong>ä¸æ˜¯ä¸æƒ³è¦ï¼Œè€Œæ˜¯åˆ«æŠŠäººç”Ÿå…¨éƒ¨æŠ¼åœ¨ä¸€ä¸ªæŒ‡æ ‡ä¸Šã€‚</strong><br/>
è¿™ç¯‡æ–‡ç« å°±å½“æ˜¯æˆ‘è‡ªå·±çš„æ•´ç†ï¼Œå†™ç»™åŒæ ·åœ¨ IT è¡Œä¸šé‡ŒåŠªåŠ›çš„äººçœ‹ã€‚</p>
<hr/>
<h2 data-id="heading-0">1ï¼‰IT äººçš„ç„¦è™‘ï¼Œå¾ˆå¤šæ—¶å€™ä¸æ˜¯â€œè´ªâ€ï¼Œæ˜¯â€œæ€•â€</h2>
<p>æˆ‘è§è¿‡çš„å¤šæ•°å·¥ç¨‹å¸ˆå¹¶ä¸è´ªã€‚ä»–ä»¬è¦çš„å¾ˆæœ´ç´ ï¼š</p>
<ul>
<li>å·¥èµ„åˆ«å¤ªç¦»è°±åœ°ä½</li>
<li>å·¥ä½œåˆ«éšæ—¶è£å‘˜</li>
<li>æˆ¿è´·ã€å®¶åº­å¼€é”€èƒ½è¦†ç›–</li>
<li>æ‰‹é‡Œæœ‰ç‚¹ä½™é’±ï¼Œèƒ½é¢å¯¹çªå‘æƒ…å†µ</li>
<li>æœªæ¥ä¸¤ä¸‰å¹´ä¸è¦å®Œå…¨é»‘ç®±</li>
</ul>
<p>è¿™äº›éƒ½ç®—ä¸ä¸Šååˆ©å¿ƒé‡ï¼Œæ›´å¤šæ˜¯<strong>å®‰å…¨æ„Ÿéœ€æ±‚</strong>ã€‚</p>
<p>ä½† IT è¡Œä¸šæœ‰ä¸ªå¾ˆç‰¹åˆ«çš„åœ°æ–¹ï¼šå®ƒä¼šä¸æ–­æé†’ä½ â€œä½ éšæ—¶å¯èƒ½ä¸å€¼é’±â€ã€‚</p>
<ul>
<li>æŠ€æœ¯æ›´æ–°å¿«ï¼Œä½ çš„æ ˆå¯èƒ½çªç„¶è¿‡æ—¶</li>
<li>å…¬å¸ä¸šåŠ¡è¯´æ²¡å°±æ²¡ï¼Œç»„ç»‡è°ƒæ•´æ¯”ä½ åŠ ç­è¿˜å¿«</li>
<li>ä½ ç¨å¾®æ¾ä¸€ç‚¹ï¼Œèº«è¾¹çš„äººå°±å¼€å§‹â€œå·æ–°ä¸œè¥¿â€</li>
<li>å¹´é¾„ã€èŒçº§ã€ç»©æ•ˆï¼Œä¼šæŠŠä½ æ¨åˆ°æŸä¸ªä¸å¾—ä¸è¿½çš„è½¨é“ä¸Š</li>
</ul>
<p>æ‰€ä»¥å¾ˆå¤šäººçš„ç„¦è™‘å¹¶ä¸æ˜¯â€œæˆ‘æƒ³èµ¢â€ï¼Œè€Œæ˜¯â€œæˆ‘ä¸æ•¢è¾“â€ã€‚<br/>
ä½ ä¸æ˜¯æƒ³å½“äººä¸Šäººï¼Œä½ åªæ˜¯å®³æ€•è‡ªå·±çªç„¶å¤±å»é€‰æ‹©æƒã€‚</p>
<hr/>
<h2 data-id="heading-1">2ï¼‰â€œæ·¡æ³Šååˆ©â€å¯¹ IT äººæ¥è¯´ï¼Œæ›´åƒæ˜¯ä¸€ç§â€œé™æƒâ€</h2>
<p>æˆ‘ä»¥å‰ä¹Ÿä¼šå¯¹â€œæ·¡æ³Šååˆ©â€è¿™ä¸ªè¯æœ‰æŠµè§¦ã€‚å› ä¸ºå¬èµ·æ¥åƒæ˜¯ï¼š</p>
<ul>
<li>ä½ ä¸åº”è¯¥åœ¨ä¹å·¥èµ„</li>
<li>ä½ ä¸åº”è¯¥åœ¨ä¹æ™‹å‡</li>
<li>ä½ ä¸åº”è¯¥åœ¨ä¹æˆ¿å­</li>
<li>ä½ ä¸åº”è¯¥åœ¨ä¹æ¯”è¾ƒ</li>
</ul>
<p>ä½†ä½ çœŸåœ¨è¿™ä¸ªç¤¾ä¼šé‡Œç”Ÿæ´»ï¼Œæ€ä¹ˆå¯èƒ½ä¸åœ¨ä¹ï¼Ÿ</p>
<p>åæ¥æˆ‘æ…¢æ…¢ç†è§£ï¼Œâ€œæ·¡æ³Šâ€æœ€å¯è¡Œçš„ç‰ˆæœ¬ï¼Œå…¶å®ä¸æ˜¯â€œæ¸…é›¶â€ï¼Œè€Œæ˜¯<strong>é™æƒ</strong>ï¼š</p>
<ul>
<li>å·¥èµ„é‡è¦ï¼Œä½†ä¸æ˜¯å”¯ä¸€çš„è‡ªæˆ‘è¯æ˜</li>
<li>æ™‹å‡é‡è¦ï¼Œä½†ä¸ä»£è¡¨æˆ‘å¿…é¡»ç‰ºç‰²å¥åº·ã€å…³ç³»ã€äººæ ¼</li>
<li>ä¹°æˆ¿é‡è¦ï¼Œä½†ä¸æ„å‘³ç€æˆ‘ä¹‹ååªèƒ½å½“ä¸€ä¸ªâ€œè¿˜è´·æœºå™¨â€</li>
<li>å¤–ç•Œè¯„ä»·é‡è¦ï¼Œä½†ä¸èƒ½æˆä¸ºæˆ‘æ¯å¤©é†’æ¥çš„å”¯ä¸€é©±åŠ¨åŠ›</li>
</ul>
<p>æ›´åƒæ˜¯ä½ åœ¨åšç³»ç»Ÿè®¾è®¡ï¼š<br/>
ååˆ©æ˜¯ä¸€ä¸ªä¿¡å·ï¼Œä½†ä¸èƒ½è®©å®ƒå˜æˆâ€œå•ç‚¹æ•…éšœâ€ã€‚<br/>
å¦‚æœä½ çš„äººç”Ÿåªé ä¸€ä¸ªæŒ‡æ ‡é©±åŠ¨ï¼Œé‚£ä¸€æ—¦æŒ‡æ ‡å´©äº†ï¼Œä½ æ•´ä¸ªäººä¹Ÿä¼šå´©ã€‚</p>
<hr/>
<h2 data-id="heading-2">3ï¼‰IT è¡Œä¸šçš„â€œç”Ÿæ´»ç„¦è™‘â€ï¼Œæœ‰ä¸ªéšè”½çš„æ¥æºï¼šæ¯”è¾ƒæœºåˆ¶</h2>
<p>IT äººç‰¹åˆ«å®¹æ˜“æ‰è¿›ä¸€ç§å±€é¢ï¼š<br/>
<strong>ä½ æ°¸è¿œçŸ¥é“æœ‰äººæ¯”ä½ æ›´å¼ºã€æ›´å¿«ã€æ›´æœ‰é’±ã€‚</strong></p>
<p>ä»¥å‰æ¯”è¾ƒåªå‘ç”Ÿåœ¨å…¬å¸å†…éƒ¨ï¼Œç°åœ¨æ¯”è¾ƒå‘ç”Ÿåœ¨å…¨ç½‘ï¼š</p>
<ul>
<li>åˆ«äºº 30 å²ä¸Šæ¶æ„å¸ˆã€å¹´åŒ…ç¿»å€</li>
<li>åˆ«äººåšå‰¯ä¸šã€åšè¯¾ç¨‹ã€åšå¼€æºã€åšè‡ªåª’ä½“</li>
<li>åˆ«äººè·³æ§½æ¶¨è–ªã€æ‹¿æœŸæƒã€ç§»æ°‘ã€ä¹°æˆ¿</li>
<li>åˆ«äººç”¨ AI ç”Ÿäº§åŠ›èµ·é£ï¼Œä½ è¿˜åœ¨å†™é‡å¤ CRUD</li>
</ul>
<p>ä½ ä¼šå‘ç°æ¯”è¾ƒæ˜¯æ— ç©·æ— å°½çš„ï¼Œå®ƒä¸åƒä¸€ä¸ªé¡¹ç›®èƒ½éªŒæ”¶ã€‚<br/>
ä½ ä»Šå¤©èµ¢ä¸€æ¬¡ï¼Œæ˜å¤©ä¼šçœ‹åˆ°æ›´å¤¸å¼ çš„ä¾‹å­ã€‚<br/>
äºæ˜¯ç„¦è™‘å˜æˆä¸€ç§å¸¸æ€èƒŒæ™¯éŸ³ï¼šä¸æ˜¯å‘ç”Ÿäº†ä»€ä¹ˆï¼Œè€Œæ˜¯ä½ ä¸€ç›´è§‰å¾—â€œä¼šå‘ç”Ÿä»€ä¹ˆâ€ã€‚</p>
<p>è¿™å°±æ˜¯â€œç”Ÿæ´»ç„¦è™‘â€çš„æ ¸å¿ƒï¼š<strong>ä¸æ˜¯ä½ ç°åœ¨è¿‡å¾—å·®ï¼Œè€Œæ˜¯ä½ ä¸ç¡®å®šä½ èƒ½ä¸èƒ½ä¸€ç›´ç¨³ä¸‹å»ã€‚</strong></p>
<hr/>
<h2 data-id="heading-3">4ï¼‰æˆ‘è§‰å¾—æœ€éš¾çš„ç‚¹æ˜¯ï¼šæˆ‘ä»¬æŠŠâ€œè‡ªæˆ‘ä»·å€¼â€å¤–åŒ…ç»™äº†ç»“æœ</h2>
<p>å¾ˆå¤š IT äººçš„è‡ªæˆ‘ä»·å€¼æ„Ÿï¼Œæ¥è‡ªå¯é‡åŒ–çš„ä¸œè¥¿ï¼š</p>
<ul>
<li>ä»£ç å†™å¾—å¿«ã€bug å°‘</li>
<li>ç»©æ•ˆå¥½ã€æ™‹å‡å¿«</li>
<li>å·¥èµ„é«˜ã€title å¤§</li>
<li>é¡¹ç›®ä¸Šçº¿ã€æŒ‡æ ‡å¢é•¿</li>
</ul>
<p>è¿™äº›ä¸œè¥¿å½“ç„¶é‡è¦ã€‚ä½†å±é™©åœ¨äºï¼š<br/>
å½“ä½ æŠŠè‡ªæˆ‘ä»·å€¼å®Œå…¨ç»‘å®šåœ¨è¿™äº›ç»“æœä¸Šï¼Œä½ ä¼šå˜å¾—è¶Šæ¥è¶Šè„†ã€‚</p>
<p>å› ä¸ºç»“æœä¸å®Œå…¨ç”±ä½ æ§åˆ¶ï¼š</p>
<ul>
<li>é¡¹ç›®æˆè´¥æœ‰è¿æ°”å’Œç»„ç»‡å› ç´ </li>
<li>æ™‹å‡æœ‰åé¢ã€æœ‰æ”¿æ²»ã€æœ‰æ—¶æœº</li>
<li>è¡Œä¸šå‘¨æœŸæœ‰èµ·æœ‰è½</li>
<li>ä½ å†å¼ºä¹Ÿå¯èƒ½é‡åˆ°â€œä¸šåŠ¡ä¸è¡Œâ€</li>
</ul>
<p>ä¸€æ—¦ä½ æŠŠä»·å€¼äº¤ç»™å¤–ç•Œè£å†³ï¼Œä½ å°±ä¼šä¸€ç›´ç´§å¼ ï¼š<br/>
æˆ‘æ˜¯ä¸æ˜¯è¿˜å¤Ÿç”¨ï¼Ÿæˆ‘æ˜¯ä¸æ˜¯è¿˜å€¼é’±ï¼Ÿæˆ‘æ˜¯ä¸æ˜¯å¿«è¢«æ›¿ä»£ï¼Ÿ</p>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤šäººâ€œèµšåˆ°äº†é’±â€ä¾æ—§ç„¦è™‘ã€‚<br/>
ç„¦è™‘ä¸æ˜¯é’±ä¸å¤Ÿï¼Œè€Œæ˜¯ä½ æ²¡æœ‰å»ºç«‹ä¸€ä¸ªæ›´ç¨³å®šçš„ä»·å€¼æ¥æºã€‚</p>
<hr/>
<h2 data-id="heading-4">5ï¼‰é‚£æ€ä¹ˆåšæ‰ä¸ç©ºæ´ï¼Ÿæˆ‘è§‰å¾—æ˜¯åšå‡ ä»¶â€œå°è€Œç¨³â€çš„äº‹</h2>
<p>æˆ‘ä¸å¤ªä¿¡é‚£ç§ä¸€æŠŠæ¢­å“ˆçš„â€œäººç”Ÿç¿»ç›˜â€ã€‚<br/>
IT è¡Œä¸šå·²ç»å¤Ÿé«˜æ³¢åŠ¨äº†ï¼Œå†æŠŠç”Ÿæ´»å˜æˆèµŒåšï¼Œåè€Œæ›´è€—ã€‚</p>
<p>æˆ‘æ›´è®¤å¯ä¸€ç§â€œå·¥ç¨‹åŒ–â€çš„æ€è·¯ï¼š<br/>
<strong>ä¸è¿½æ±‚ä¸€æ¬¡æ€§æ”¹å˜å‘½è¿ï¼Œè€Œæ˜¯æŒç»­ç»™ç³»ç»ŸåŠ ç¨³å®šæ€§ã€‚</strong></p>
<h3 data-id="heading-5">ï¼ˆ1ï¼‰æŠŠæˆåŠŸå®šä¹‰æˆå¤šæŒ‡æ ‡ï¼Œè€Œä¸æ˜¯å¹´åŒ…ä¸€ä¸ªæ•°å­—</h3>
<p>é™¤äº†è–ªèµ„ï¼Œä½ å¯ä»¥ç»™è‡ªå·±åŠ å‡ ä¸ªæŒ‡æ ‡ï¼š</p>
<ul>
<li>èº«ä½“çŠ¶æ€æ˜¯å¦å¯æŒç»­ï¼ˆç¡çœ ã€ä½“åŠ›ã€ç²¾ç¥ï¼‰</li>
<li>ç°é‡‘æµæ˜¯å¦æ›´ç¨³ï¼ˆå‚¨è“„ã€è´Ÿå€ºç»“æ„ï¼‰</li>
<li>æŠ€èƒ½æ˜¯å¦æ›´å¯è¿ç§»ï¼ˆæ¢å…¬å¸ä¹Ÿèƒ½ç”¨ï¼‰</li>
<li>æ—¶é—´æ˜¯å¦æœ‰å›æ”¶ï¼ˆä¸è¢«æ— æ„ä¹‰åŠ ç­åæ‰ï¼‰</li>
<li>å…³ç³»æ˜¯å¦ä¸å´©ï¼ˆå®¶åº­ã€æœ‹å‹ã€ä¼´ä¾£ï¼‰</li>
</ul>
<p>ä½ ä¼šå‘ç°ä¸€æ—¦æŒ‡æ ‡å˜å¤šï¼Œä½ çš„å¿ƒä¼šæ›´ç¨³ã€‚<br/>
å› ä¸ºä½ ä¸ä¼šè¢«â€œå•ç‚¹å¤±è´¥â€å‡»ç©¿ã€‚</p>
<h3 data-id="heading-6">ï¼ˆ2ï¼‰å»ºç«‹â€œæœ€å°å®‰å…¨å«â€ï¼Œå®ƒæ¯”å¿ƒç†å®‰æ…°æœ‰ç”¨</h3>
<p>å¾ˆå¤šç„¦è™‘æ¥è‡ªâ€œæ€•çªç„¶å‡ºäº‹â€ã€‚</p>
<ul>
<li>æ‰‹é‡Œæœ‰ 3â€“6 ä¸ªæœˆçš„ç”Ÿæ´»è´¹å‚¨å¤‡ï¼ˆå“ªæ€•æ…¢æ…¢æ”’ï¼‰</li>
<li>é¿å…é«˜æ¯è´Ÿå€ºå’Œå†²åŠ¨æ¶ˆè´¹</li>
<li>ç»™è‡ªå·±ç•™ä¸€ä¸ªéšæ—¶èƒ½å›åˆ°å¸‚åœºçš„â€œåŸºç¡€æŠ€èƒ½åŒ…â€</li>
</ul>
<p>å®‰å…¨å«ä¸æ˜¯ä¸ºäº†è®©ä½ èººå¹³ï¼Œæ˜¯ä¸ºäº†è®©ä½ åœ¨å…³é”®æ—¶åˆ»ä¸è¢«è¿«åšé€‰æ‹©ã€‚</p>
<h3 data-id="heading-7">ï¼ˆ3ï¼‰æŠ€èƒ½ä¸Šä¼˜å…ˆæŠ•â€œå¯è¿ç§»èƒ½åŠ›â€</h3>
<p>æˆ‘ä¸ªäººçš„æ’åºå¤§æ¦‚æ˜¯ï¼š</p>
<ul>
<li>è¡¨è¾¾ä¸å†™ä½œï¼šèƒ½æŠŠé—®é¢˜è®²æ¸…æ¥šã€æŠŠæ–¹æ¡ˆè¯´æ˜ç™½</li>
<li>ç»“æ„åŒ–æ€ç»´ï¼šèƒ½æ‹†è§£é—®é¢˜ã€å¤ç›˜ã€æ²‰æ·€</li>
<li>å·¥ç¨‹èƒ½åŠ›ï¼šèƒ½æŠŠä¸œè¥¿åšå‡ºæ¥ã€è·‘èµ·æ¥ã€ç¨³å®šèµ·æ¥</li>
<li>åä½œæ¨è¿›ï¼šèƒ½æŠŠäº‹æƒ…æ¨è¿‡å»ï¼Œè€Œä¸æ˜¯åªå†™ä»£ç </li>
</ul>
<p>è¿™äº›ä¸œè¥¿ä¸ä¼šå› ä¸ºæŸä¸ªæ¡†æ¶é€€æ½®è€Œå¤±æ•ˆã€‚</p>
<h3 data-id="heading-8">ï¼ˆ4ï¼‰å‡å°‘â€œæ¯”è¾ƒè¾“å…¥â€ï¼Œä¸æ˜¯è¿œç¦»ä¸–ç•Œï¼Œæ˜¯ç®¡ç†æ³¨æ„åŠ›</h3>
<p>æˆ‘è§è¿‡å¤ªå¤šäººä¸æ˜¯è¢«ç°å®æ‰“å®ï¼Œæ˜¯è¢«ä¿¡æ¯æ‰“å®ã€‚</p>
<p>ä½ å¯ä»¥è¯•è¯•ï¼š</p>
<ul>
<li>æŠŠç¤¾åª’å½“å·¥å…·ï¼Œä¸å½“ç”Ÿæ´»</li>
<li>è§„å®šè¾“å…¥æ—¶é—´ï¼Œåˆ«è®©ä¿¡æ¯éšæ—¶æ’é˜Ÿ</li>
<li>å°‘åˆ·æˆåŠŸå­¦ï¼Œå¤šçœ‹å¯å¤ç”¨æ–¹æ³•è®º</li>
</ul>
<p>æ³¨æ„åŠ›å°±æ˜¯ä½ çš„â€œèƒ½é‡é¢„ç®—â€ï¼ŒIT äººå°¤å…¶éœ€è¦æŠŠå®ƒå®ˆä½ã€‚</p>
<h3 data-id="heading-9">ï¼ˆ5ï¼‰æ¯å¤©ç•™ä¸€ç‚¹â€œæœ€å°è‡ªæˆ‘ç©ºé—´â€</h3>
<p>æˆ‘è§‰å¾—è¿™ä»¶äº‹ç‰¹åˆ«å…³é”®ã€‚</p>
<p>å“ªæ€•æ¯å¤© 15 åˆ†é’Ÿï¼š</p>
<ul>
<li>è¯»ä¸€ç‚¹</li>
<li>å†™å‡ å¥</li>
<li>è¿åŠ¨ä¸€ä¸‹</li>
<li>å­¦ä¸€ä¸ªå°ç‚¹</li>
<li>åšä¸€ä»¶çº¯ç²¹å±äºè‡ªå·±çš„äº‹</li>
</ul>
<p>å®ƒçš„æ„ä¹‰ä¸æ˜¯æå‡æ•ˆç‡ï¼Œè€Œæ˜¯å‘Šè¯‰è‡ªå·±ï¼š<br/>
<strong>æˆ‘ä¸æ˜¯ä¸€ä¸ªåªä¸ºç»©æ•ˆå’Œè´¦å•æ´»ç€çš„å·¥å…·ã€‚</strong></p>
<hr/>
<h2 data-id="heading-10">6ï¼‰æœ€åï¼šæ·¡æ³Šååˆ©ï¼Œä¸æ˜¯èººå¹³ï¼Œè€Œæ˜¯åˆ«è¢«ç‰µç€èµ°</h2>
<p>æˆ‘ç°åœ¨è¶Šæ¥è¶Šè§‰å¾—ï¼Œæ·¡æ³Šååˆ©å¯¹ IT äººæ¥è¯´ï¼Œä¸æ˜¯ä¸€ç§é“å¾·å§¿æ€ï¼Œè€Œæ˜¯ä¸€ç§ç”Ÿå­˜ç­–ç•¥ã€‚</p>
<p>ä½ å¯ä»¥åŠªåŠ›ã€å¯ä»¥ä¸Šè¿›ã€å¯ä»¥è¿½æ±‚æ›´å¥½ã€‚<br/>
ä½†ä½ ä¸å¿…æŠŠäººç”Ÿçš„å…¨éƒ¨æ„ä¹‰æŠ¼åœ¨â€œæ›´é«˜çš„å·¥èµ„ã€æ›´å¤§çš„ titleã€æ›´å¼ºçš„æ¯”è¾ƒâ€ä¸Šã€‚</p>
<p>è¡Œä¸šä¼šæ³¢åŠ¨ï¼ŒæŠ€æœ¯ä¼šæ›´æ–°ï¼Œç»„ç»‡ä¼šå˜åŠ¨ã€‚<br/>
çœŸæ­£èƒ½è®©ä½ ä¸é‚£ä¹ˆç„¦è™‘çš„ï¼Œå¾€å¾€ä¸æ˜¯æŸæ¬¡æˆåŠŸï¼Œè€Œæ˜¯ä½ ç»™è‡ªå·±æ­äº†ä¸€ä¸ªæ›´ç¨³å®šçš„ç³»ç»Ÿï¼š</p>
<ul>
<li>æœ‰ä¸€ç‚¹å®‰å…¨å«</li>
<li>æœ‰ä¸€ç‚¹å¯è¿ç§»èƒ½åŠ›</li>
<li>æœ‰ä¸€ç‚¹ç”Ÿæ´»çš„æŒæ§æ„Ÿ</li>
<li>æœ‰ä¸€ç‚¹å±äºè‡ªå·±çš„ç©ºé—´</li>
</ul>
<p>å¦‚æœä½ ä¹Ÿæ­£è¢«ç„¦è™‘è¿½ç€è·‘ï¼Œæˆ‘æƒ³è¯´ä¸€å¥æ›´ç°å®çš„è¯ï¼š<br/>
<strong>ä½ ä¸æ˜¯â€œçœ‹ä¸å¼€â€ï¼Œä½ åªæ˜¯èƒŒè´Ÿäº†å¤ªå¤šä¸ç¡®å®šã€‚</strong><br/>
è€Œä½ èƒ½åšçš„ï¼Œæ˜¯ä¸€ç‚¹ç‚¹æŠŠä¸ç¡®å®šå˜æˆå¯æ§ï¼ŒæŠŠååˆ©ä»â€œä¸»å®°â€å˜æˆâ€œå‚è€ƒâ€ã€‚</p>
<p>è¿™å°±å·²ç»å¾ˆä¸å®¹æ˜“äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ç§åŸºäº SQLite3 çš„åŠè‡ªåŠ¨ C++ ORM å®ç°]]></title>    <link>https://juejin.cn/post/7587299443644645439</link>    <guid>https://juejin.cn/post/7587299443644645439</guid>    <pubDate>2025-12-25T00:59:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587299443644645439" data-draft-id="7587299443644629055" data-original-type="2" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ç§åŸºäº SQLite3 çš„åŠè‡ªåŠ¨ C++ ORM å®ç°"/> <meta itemprop="keywords" content="C++"/> <meta itemprop="datePublished" content="2025-12-25T00:59:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="charlee44"/> <meta itemprop="url" content="https://juejin.cn/user/1117549770846872"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ç§åŸºäº SQLite3 çš„åŠè‡ªåŠ¨ C++ ORM å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1117549770846872/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    charlee44
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T00:59:29.000Z" title="Thu Dec 25 2025 00:59:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. å¼•è¨€</h2>
<p>åœ¨ç°ä»£è½¯ä»¶å¼€å‘ä¸­ï¼Œå°¤å…¶æ˜¯åœ¨åç«¯ç³»ç»Ÿä¸æ•°æ®åº“äº¤äº’çš„åœºæ™¯ä¸‹ï¼Œå¯¹è±¡å…³ç³»æ˜ å°„ï¼ˆObject-Relational Mapping, ORMï¼‰å·²æˆä¸ºä¸€ç§ä¸»æµçš„è®¾è®¡èŒƒå¼ã€‚ORM çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†ç¨‹åºä¸­çš„å¯¹è±¡æ¨¡å‹ä¸å…³ç³»å‹æ•°æ®åº“ä¸­çš„è¡¨ç»“æ„è¿›è¡Œæ˜ å°„ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿä»¥é¢å‘å¯¹è±¡çš„æ–¹å¼æ“ä½œæ•°æ®ï¼Œè€Œæ— éœ€ç›´æ¥ç¼–å†™ç¹çä¸”æ˜“é”™çš„ SQL è¯­å¥ã€‚è¿™ç§æŠ½è±¡ä¸ä»…æ˜¾è‘—æå‡äº†å¼€å‘æ•ˆç‡ï¼Œä¹Ÿå¢å¼ºäº†ä»£ç çš„å¯ç»´æŠ¤æ€§ä¸å¯ç§»æ¤æ€§ã€‚</p>
<p>å°½ç®¡åœ¨å¯¹æ€§èƒ½æˆ–æ§åˆ¶åŠ›è¦æ±‚æé«˜çš„åœºæ™¯ä¸­åŸç”Ÿ SQL ä»ä¸å¯æ›¿ä»£ï¼Œä½†åœ¨å¤§å¤šæ•°å¸¸è§„ä¸šåŠ¡ç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„ ORM å±‚èƒ½æœ‰æ•ˆç®€åŒ–æ•°æ®æŒä¹…åŒ–çš„å®ç°ã€‚</p>
<p>ç„¶è€Œï¼Œç”±äº C/C++ æ˜¯åº•å±‚ç³»ç»Ÿçº§è¯­è¨€ï¼Œç¼ºä¹è¿è¡Œæ—¶åå°„ã€æ³›å‹æ“¦é™¤ç­‰é«˜çº§ç‰¹æ€§ï¼Œè¦å®ç°ä¸€ä¸ªå…¨è‡ªåŠ¨ã€åŠŸèƒ½å®Œå¤‡çš„ ORM æ¡†æ¶ï¼ˆå¦‚ Java çš„ Hibernate æˆ– Python çš„ SQLAlchemyï¼‰æä¸ºå¤æ‚ï¼Œç”šè‡³å¾—ä¸å¿å¤±ã€‚å› æ­¤ï¼Œæœ¬æ–‡æå‡ºä¸€ç§åŠè‡ªåŠ¨çš„ ORM é£æ ¼å°è£…ï¼šå®ƒå€Ÿé‰´ä¸€äº›å…¸å‹ ORM çš„è®¾è®¡æ€æƒ³ï¼Œä½†ä¸è¿½æ±‚å®Œå…¨è‡ªåŠ¨åŒ–ï¼Œè€Œæ˜¯é€šè¿‡åˆç†çš„æ¨¡æ¿ã€æšä¸¾å’Œå·¥å…·å‡½æ•°ï¼Œåœ¨ä¿æŒè½»é‡ä¸å¯æ§çš„å‰æä¸‹ï¼Œæä¾›æ¥è¿‘ ORM çš„å¼€å‘ä½“éªŒã€‚</p>
<h2 data-id="heading-1">2. å®ç°</h2>
<p>ä¸å¿…è¢« ORM ç­‰çœ‹ä¼¼å¤æ‚çš„æ¦‚å¿µæ‰€å“é€€ã€‚ä»åº•å±‚è§†è§’å‡ºå‘ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼šè®¸å¤šé«˜çº§è®¾è®¡èŒƒå¼æœ¬è´¨ä¸Šæ˜¯å¯¹åº•å±‚é‡å¤ã€åˆ†æ•£æˆ–å†—ä½™ä»£ç çš„å°è£…ä¸æŠ½è±¡â€”â€”æ¯”å¦‚ä¸ºäº†è§£å†³ SQL æ¨¡æ¿é‡å¤ã€æ•°æ®æ˜ å°„é€»è¾‘ä¸å†…èšç­‰é—®é¢˜ã€‚</p>
<p>ä»¥å¸¸è§çš„ä¸šåŠ¡å¼€å‘ä¸ºä¾‹ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å¯¹æ•°æ®åº“æ‰§è¡Œ CRUD æ“ä½œï¼ˆå³ Create åˆ›å»ºã€Retrieve æŸ¥è¯¢ã€Update æ›´æ–°ã€Delete åˆ é™¤ï¼‰ã€‚è¿™äº›æ“ä½œåœ¨ä¸åŒæ•°æ®è¡¨ä¸Šåå¤å‡ºç°ï¼Œä»£ç ç»“æ„é«˜åº¦ç›¸ä¼¼ï¼Œå´å¾€å¾€è¢«ä¸€ééæ‰‹å†™ã€‚é‚£ä¹ˆï¼Œæ˜¯å¦æœ‰å¯èƒ½å°†è¿™äº›é‡å¤é€»è¾‘æç‚¼å‡ºæ¥ï¼Œä»…é€šè¿‡ç»Ÿä¸€çš„å››ä¸ªæ¥å£ï¼Œå°±èƒ½æ»¡è¶³æ‰€æœ‰å®ä½“çš„ CRUD éœ€æ±‚ï¼Ÿè¿™æ­£æ˜¯è½»é‡çº§ ORM å°è¯•å›ç­”çš„é—®é¢˜ã€‚</p>
<h3 data-id="heading-2">2.1 å­—æ®µå€¼</h3>
<p>å…ˆæ¥çœ‹çœ‹ä»¥ä¸‹ä»£ç å°è£…çš„å››ä¸ª CRUD æ¥å£ï¼š<code>InsertRow</code>ã€<code>DeleteRow</code>ã€<code>UpdateRow</code> ä»¥åŠ <code>QueryRows</code>ã€‚</p>
<p><strong>Sqlite3Crud.h</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">pragma</span> once</span>&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;variant&gt;</span></span>&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>&#13;
&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"TableName.h"</span></span>&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"Util/Statement.hpp"</span></span>&#13;
&#13;
<span class="hljs-keyword">namespace</span> Persistence {&#13;
&#13;
<span class="hljs-comment">/// @brief Sqlite3æ•°æ®åº“å°è£…ç±»</span>&#13;
<span class="hljs-keyword">namespace</span> Sqlite3Crud {&#13;
&#13;
<span class="hljs-keyword">using</span> TableValue = std::variant&lt;std::monostate, std::string, <span class="hljs-type">int64_t</span>&gt;;  <span class="hljs-comment">//è¡¨çš„å€¼</span>&#13;
&#13;
<span class="hljs-comment">//æ•°æ®åº“è¡¨æ’å…¥è®°å½•çš„æŠ½è±¡æ–¹æ³•</span>&#13;
<span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">InsertRow</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *sql, <span class="hljs-type">const</span> std::vector&lt;TableValue&gt; &amp;params)</span></span>;&#13;
&#13;
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Field&gt;&#13;
<span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">Insert</span><span class="hljs-params">(TableName tableName, <span class="hljs-type">const</span> std::vector&lt;Field&gt; &amp;fieldNames,&#13;
            <span class="hljs-type">const</span> std::vector&lt;Sqlite3Crud::TableValue&gt; &amp;fieldValues)</span> </span>{&#13;
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">InsertRow</span>(Util::Statement::<span class="hljs-built_in">Insert</span>(tableName, fieldNames).<span class="hljs-built_in">c_str</span>(),&#13;
                   fieldValues);&#13;
}&#13;
&#13;
<span class="hljs-comment">//æ•°æ®åº“è¡¨åˆ é™¤è®°å½•çš„æŠ½è±¡æ–¹æ³•</span>&#13;
<span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">DeleteRow</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *sql, <span class="hljs-type">const</span> TableValue &amp;bindParam)</span></span>;&#13;
&#13;
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Field&gt;&#13;
<span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">Delete</span><span class="hljs-params">(TableName tableName, <span class="hljs-type">const</span> Field &amp;fieldName,&#13;
            <span class="hljs-type">const</span> TableValue &amp;bindParam)</span> </span>{&#13;
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">DeleteRow</span>(Util::Statement::<span class="hljs-built_in">Delete</span>(tableName, fieldName).<span class="hljs-built_in">c_str</span>(),&#13;
                   bindParam);&#13;
}&#13;
&#13;
<span class="hljs-comment">//æ•°æ®åº“è¡¨æ›´æ–°è®°å½•çš„æŠ½è±¡æ–¹æ³•</span>&#13;
<span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">UpdateRow</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *sql, <span class="hljs-type">const</span> std::vector&lt;TableValue&gt; &amp;bindParams)</span></span>;&#13;
&#13;
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Field&gt;&#13;
<span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">Update</span><span class="hljs-params">(TableName tableName, <span class="hljs-type">const</span> std::vector&lt;Field&gt; &amp;fieldNames,&#13;
            <span class="hljs-type">const</span> std::vector&lt;Sqlite3Crud::TableValue&gt; &amp;fieldValues)</span> </span>{&#13;
  <span class="hljs-keyword">return</span> Sqlite3Crud::<span class="hljs-built_in">UpdateRow</span>(&#13;
      Util::Statement::<span class="hljs-built_in">Update</span>(tableName, fieldNames).<span class="hljs-built_in">c_str</span>(), fieldValues);&#13;
}&#13;
&#13;
<span class="hljs-comment">//æ•°æ®åº“è¡¨æŸ¥è¯¢è®°å½•çš„æŠ½è±¡æ–¹æ³•</span>&#13;
<span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">QueryRows</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *sql, std::vector&lt;TableValue&gt; &amp;result,&#13;
               <span class="hljs-type">const</span> std::vector&lt;TableValue&gt; &amp;bindParams = {})</span></span>;&#13;
&#13;
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Field&gt;&#13;
<span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">Query</span><span class="hljs-params">(&#13;
    TableName tableName, <span class="hljs-type">const</span> std::vector&lt;Field&gt; &amp;fieldNames,&#13;
    std::vector&lt;TableValue&gt; &amp;result, <span class="hljs-type">const</span> std::vector&lt;Field&gt; &amp;whereFields = {},&#13;
    <span class="hljs-type">const</span> std::vector&lt;TableValue&gt; &amp;whereBindParams = {},&#13;
    std::optional&lt;Field&gt; orderByField = std::<span class="hljs-literal">nullopt</span>,&#13;
    std::optional&lt;Util::Statement::OrderByValue&gt; orderByValue = std::<span class="hljs-literal">nullopt</span>)</span> </span>{&#13;
  <span class="hljs-keyword">if</span> (whereFields.<span class="hljs-built_in">size</span>() != whereBindParams.<span class="hljs-built_in">size</span>()) {&#13;
    <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">invalid_argument</span>(<span class="hljs-string">"whereFields å’Œ whereBindParams æ•°é‡ä¸åŒ¹é…ï¼"</span>);&#13;
  }&#13;
  <span class="hljs-type">const</span> std::string &amp;statement = Util::Statement::<span class="hljs-built_in">Query</span>(&#13;
      tableName, fieldNames, whereFields, orderByField, orderByValue);&#13;
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">QueryRows</span>(statement.<span class="hljs-built_in">c_str</span>(), result, whereBindParams);&#13;
}&#13;
&#13;
};  <span class="hljs-comment">// namespace Sqlite3Crud</span>&#13;
&#13;
}  <span class="hljs-comment">// namespace Persistence</span>
</code></pre>
<p><strong>Sqlite3Crud.cpp</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"Sqlite3Crud.h"</span></span>&#13;
&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sqlite3.h&gt;</span></span>&#13;
&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>&#13;
&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"Bootstrap/App.h"</span></span>&#13;
&#13;
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;&#13;
&#13;
<span class="hljs-keyword">namespace</span> Persistence {&#13;
&#13;
<span class="hljs-keyword">namespace</span> Sqlite3Crud {&#13;
&#13;
<span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">InsertRow</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *sql, <span class="hljs-type">const</span> std::vector&lt;TableValue&gt; &amp;params)</span> </span>{&#13;
  sqlite3 *db = App::<span class="hljs-built_in">GetInstance</span>().<span class="hljs-built_in">Db</span>();&#13;
&#13;
  <span class="hljs-comment">// å‡†å¤‡ SQL è¯­å¥</span>&#13;
  sqlite3_stmt *stmt;&#13;
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">sqlite3_prepare_v2</span>(db, sql, <span class="hljs-number">-1</span>, &amp;stmt, <span class="hljs-literal">nullptr</span>) != SQLITE_OK) {&#13;
    std::cerr &lt;&lt; (<span class="hljs-type">const</span> <span class="hljs-type">char</span> *)(<span class="hljs-string">u8"SQLå‡†å¤‡è¯­å¥å¤±è´¥ï¼š"</span>) &lt;&lt; <span class="hljs-built_in">sqlite3_errmsg</span>(db)&#13;
              &lt;&lt; std::endl;&#13;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#13;
  }&#13;
&#13;
  <span class="hljs-comment">// ç»‘å®šå‚æ•°</span>&#13;
  <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> si = <span class="hljs-number">0</span>; si &lt; params.<span class="hljs-built_in">size</span>(); ++si) {&#13;
    <span class="hljs-type">int</span> bindId = (<span class="hljs-type">int</span>)(si + <span class="hljs-number">1</span>);&#13;
&#13;
    <span class="hljs-comment">// ä½¿ç”¨ std::holds_alternative æ£€æŸ¥å½“å‰æ˜¯å¦å­˜å‚¨äº†æŒ‡å®šç±»å‹çš„å€¼</span>&#13;
    <span class="hljs-keyword">if</span> (std::<span class="hljs-built_in">holds_alternative</span>&lt;std::string&gt;(params[si])) {&#13;
      <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> &amp;param = std::<span class="hljs-built_in">get</span>&lt;std::string&gt;(params[si]);&#13;
      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">sqlite3_bind_text</span>(stmt, bindId, param.<span class="hljs-built_in">c_str</span>(), <span class="hljs-number">-1</span>, SQLITE_STATIC) !=&#13;
          SQLITE_OK) {&#13;
        std::cerr &lt;&lt; (<span class="hljs-type">const</span> <span class="hljs-type">char</span> *)(<span class="hljs-string">u8"ç»‘å®šé”™è¯¯: "</span>) &lt;&lt; <span class="hljs-built_in">sqlite3_errmsg</span>(db)&#13;
                  &lt;&lt; std::endl;&#13;
        <span class="hljs-built_in">sqlite3_finalize</span>(stmt);&#13;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#13;
      }&#13;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (std::<span class="hljs-built_in">holds_alternative</span>&lt;<span class="hljs-type">int64_t</span>&gt;(params[si])) {&#13;
      <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> &amp;param = std::<span class="hljs-built_in">get</span>&lt;<span class="hljs-type">int64_t</span>&gt;(params[si]);&#13;
      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">sqlite3_bind_int64</span>(stmt, bindId, param) != SQLITE_OK) {&#13;
        std::cerr &lt;&lt; (<span class="hljs-type">const</span> <span class="hljs-type">char</span> *)(<span class="hljs-string">u8"ç»‘å®šé”™è¯¯: "</span>) &lt;&lt; <span class="hljs-built_in">sqlite3_errmsg</span>(db)&#13;
                  &lt;&lt; std::endl;&#13;
        <span class="hljs-built_in">sqlite3_finalize</span>(stmt);&#13;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#13;
      }&#13;
    } <span class="hljs-keyword">else</span> {&#13;
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#13;
    }&#13;
  }&#13;
&#13;
  <span class="hljs-comment">// æ‰§è¡Œæ’å…¥è¯­å¥</span>&#13;
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">sqlite3_step</span>(stmt) != SQLITE_DONE) {&#13;
    std::cerr &lt;&lt; (<span class="hljs-type">const</span> <span class="hljs-type">char</span> *)(<span class="hljs-string">u8"æ‰§è¡Œå¤±è´¥: "</span>) &lt;&lt; <span class="hljs-built_in">sqlite3_errmsg</span>(db)&#13;
              &lt;&lt; std::endl;&#13;
    <span class="hljs-built_in">sqlite3_finalize</span>(stmt);&#13;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#13;
  }&#13;
&#13;
  <span class="hljs-built_in">sqlite3_finalize</span>(stmt);  <span class="hljs-comment">// é‡Šæ”¾SQLè¯­å¥å¯¹è±¡</span>&#13;
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;&#13;
}&#13;
&#13;
<span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">DeleteRow</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *sql, <span class="hljs-type">const</span> TableValue &amp;bindParam)</span> </span>{&#13;
  sqlite3 *db = App::<span class="hljs-built_in">GetInstance</span>().<span class="hljs-built_in">Db</span>();&#13;
&#13;
  <span class="hljs-comment">// å‡†å¤‡ SQL è¯­å¥</span>&#13;
  sqlite3_stmt *stmt;&#13;
  <span class="hljs-type">int</span> exit = <span class="hljs-built_in">sqlite3_prepare_v2</span>(db, sql, <span class="hljs-number">-1</span>, &amp;stmt, <span class="hljs-literal">nullptr</span>);&#13;
  <span class="hljs-keyword">if</span> (exit != SQLITE_OK) {&#13;
    std::cerr &lt;&lt; (<span class="hljs-type">const</span> <span class="hljs-type">char</span> *)(<span class="hljs-string">u8"SQLå‡†å¤‡è¯­å¥å¤±è´¥ï¼š"</span>) &lt;&lt; <span class="hljs-built_in">sqlite3_errmsg</span>(db)&#13;
              &lt;&lt; std::endl;&#13;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#13;
  }&#13;
&#13;
  <span class="hljs-comment">// ç»‘å®šå‚æ•°</span>&#13;
  <span class="hljs-keyword">if</span> (std::<span class="hljs-built_in">holds_alternative</span>&lt;std::string&gt;(bindParam)) {&#13;
    <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> &amp;param = std::<span class="hljs-built_in">get</span>&lt;std::string&gt;(bindParam);&#13;
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">sqlite3_bind_text</span>(stmt, <span class="hljs-number">1</span>, param.<span class="hljs-built_in">c_str</span>(), <span class="hljs-number">-1</span>, SQLITE_STATIC) !=&#13;
        SQLITE_OK) {&#13;
      std::cerr &lt;&lt; (<span class="hljs-type">const</span> <span class="hljs-type">char</span> *)(<span class="hljs-string">u8"ç»‘å®šé”™è¯¯: "</span>) &lt;&lt; <span class="hljs-built_in">sqlite3_errmsg</span>(db)&#13;
                &lt;&lt; std::endl;&#13;
      <span class="hljs-built_in">sqlite3_finalize</span>(stmt);&#13;
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#13;
    }&#13;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (std::<span class="hljs-built_in">holds_alternative</span>&lt;<span class="hljs-type">int64_t</span>&gt;(bindParam)) {&#13;
    <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> &amp;param = std::<span class="hljs-built_in">get</span>&lt;<span class="hljs-type">int64_t</span>&gt;(bindParam);&#13;
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">sqlite3_bind_int64</span>(stmt, <span class="hljs-number">1</span>, param) != SQLITE_OK) {&#13;
      std::cerr &lt;&lt; (<span class="hljs-type">const</span> <span class="hljs-type">char</span> *)(<span class="hljs-string">u8"ç»‘å®šé”™è¯¯: "</span>) &lt;&lt; <span class="hljs-built_in">sqlite3_errmsg</span>(db)&#13;
                &lt;&lt; std::endl;&#13;
      <span class="hljs-built_in">sqlite3_finalize</span>(stmt);&#13;
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#13;
    }&#13;
  }&#13;
&#13;
  <span class="hljs-comment">// æ‰§è¡Œè¯­å¥</span>&#13;
  exit = <span class="hljs-built_in">sqlite3_step</span>(stmt);&#13;
  <span class="hljs-keyword">if</span> (exit != SQLITE_DONE) {&#13;
    std::cerr &lt;&lt; (<span class="hljs-type">const</span> <span class="hljs-type">char</span> *)(<span class="hljs-string">u8"æ‰§è¡Œå¤±è´¥: "</span>) &lt;&lt; <span class="hljs-built_in">sqlite3_errmsg</span>(db)&#13;
              &lt;&lt; std::endl;&#13;
    <span class="hljs-built_in">sqlite3_finalize</span>(stmt);&#13;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#13;
  }&#13;
&#13;
  <span class="hljs-built_in">sqlite3_finalize</span>(stmt);  <span class="hljs-comment">// é‡Šæ”¾SQLè¯­å¥å¯¹è±¡</span>&#13;
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;&#13;
}&#13;
&#13;
<span class="hljs-comment">// ä» bindParams ç»‘å®šæ‰€æœ‰å‚æ•°</span>&#13;
<span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">bool</span> <span class="hljs-title">BindParams2Stmt</span><span class="hljs-params">(<span class="hljs-type">const</span> std::vector&lt;TableValue&gt; &amp;bindParams,&#13;
                            sqlite3_stmt *stmt, sqlite3 *db)</span> </span>{&#13;
  <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> si = <span class="hljs-number">0</span>; si &lt; bindParams.<span class="hljs-built_in">size</span>(); ++si) {&#13;
    <span class="hljs-type">int</span> bindIndex = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">int</span>&gt;(si + <span class="hljs-number">1</span>);  <span class="hljs-comment">// SQLite å‚æ•°ä» 1 å¼€å§‹</span>&#13;
    <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> &amp;bindParam = bindParams[si];&#13;
&#13;
    <span class="hljs-comment">// ä½¿ç”¨ std::holds_alternative æ£€æŸ¥å½“å‰æ˜¯å¦å­˜å‚¨äº†æŒ‡å®šç±»å‹çš„å€¼</span>&#13;
    <span class="hljs-keyword">if</span> (std::<span class="hljs-built_in">holds_alternative</span>&lt;std::string&gt;(bindParam)) {&#13;
      <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> &amp;param = std::<span class="hljs-built_in">get</span>&lt;std::string&gt;(bindParam);&#13;
      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">sqlite3_bind_text</span>(stmt, bindIndex, param.<span class="hljs-built_in">c_str</span>(), <span class="hljs-number">-1</span>,&#13;
                            SQLITE_STATIC) != SQLITE_OK) {&#13;
        std::cerr &lt;&lt; <span class="hljs-string">"ç»‘å®šé”™è¯¯: "</span> &lt;&lt; <span class="hljs-built_in">sqlite3_errmsg</span>(db) &lt;&lt; std::endl;&#13;
        <span class="hljs-built_in">sqlite3_finalize</span>(stmt);&#13;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#13;
      }&#13;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (std::<span class="hljs-built_in">holds_alternative</span>&lt;<span class="hljs-type">int64_t</span>&gt;(bindParam)) {&#13;
      <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> &amp;param = std::<span class="hljs-built_in">get</span>&lt;<span class="hljs-type">int64_t</span>&gt;(bindParam);&#13;
      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">sqlite3_bind_int64</span>(stmt, bindIndex, param) != SQLITE_OK) {&#13;
        std::cerr &lt;&lt; <span class="hljs-string">"ç»‘å®šé”™è¯¯: "</span> &lt;&lt; <span class="hljs-built_in">sqlite3_errmsg</span>(db) &lt;&lt; std::endl;&#13;
        <span class="hljs-built_in">sqlite3_finalize</span>(stmt);&#13;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#13;
      }&#13;
    } <span class="hljs-keyword">else</span> {&#13;
      std::cerr &lt;&lt; <span class="hljs-string">"ä¸æ”¯æŒçš„ç»‘å®šå‚æ•°ç±»å‹"</span> &lt;&lt; std::endl;&#13;
      <span class="hljs-built_in">sqlite3_finalize</span>(stmt);&#13;
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#13;
    }&#13;
  }&#13;
&#13;
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;&#13;
}&#13;
&#13;
<span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">UpdateRow</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *sql, <span class="hljs-type">const</span> std::vector&lt;TableValue&gt; &amp;bindParams)</span> </span>{&#13;
  sqlite3 *db = App::<span class="hljs-built_in">GetInstance</span>().<span class="hljs-built_in">Db</span>();&#13;
&#13;
  <span class="hljs-comment">// å‡†å¤‡SQLè¯­å¥</span>&#13;
  sqlite3_stmt *stmt;&#13;
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">sqlite3_prepare_v2</span>(db, sql, <span class="hljs-number">-1</span>, &amp;stmt, <span class="hljs-literal">nullptr</span>) != SQLITE_OK) {&#13;
    std::cerr &lt;&lt; (<span class="hljs-type">const</span> <span class="hljs-type">char</span> *)(<span class="hljs-string">u8"SQLå‡†å¤‡è¯­å¥å¤±è´¥: "</span>) &lt;&lt; <span class="hljs-built_in">sqlite3_errmsg</span>(db)&#13;
              &lt;&lt; std::endl;&#13;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#13;
  }&#13;
&#13;
  <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">BindParams2Stmt</span>(bindParams, stmt, db)) {&#13;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#13;
  }&#13;
&#13;
  <span class="hljs-comment">// æ‰§è¡Œè¯­å¥</span>&#13;
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">sqlite3_step</span>(stmt) != SQLITE_DONE) {&#13;
    std::cerr &lt;&lt; (<span class="hljs-type">const</span> <span class="hljs-type">char</span> *)(<span class="hljs-string">u8"æ‰§è¡Œå¤±è´¥: "</span>) &lt;&lt; <span class="hljs-built_in">sqlite3_errmsg</span>(db)&#13;
              &lt;&lt; std::endl;&#13;
    <span class="hljs-built_in">sqlite3_finalize</span>(stmt);&#13;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#13;
  }&#13;
&#13;
  <span class="hljs-comment">// æ¸…ç†</span>&#13;
  <span class="hljs-built_in">sqlite3_finalize</span>(stmt);&#13;
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;&#13;
}&#13;
&#13;
<span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">QueryRows</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *sql, std::vector&lt;TableValue&gt; &amp;result,&#13;
               <span class="hljs-type">const</span> std::vector&lt;TableValue&gt; &amp;bindParams)</span> </span>{&#13;
  sqlite3 *db = App::<span class="hljs-built_in">GetInstance</span>().<span class="hljs-built_in">Db</span>();&#13;
&#13;
  <span class="hljs-comment">// å‡†å¤‡SQLè¯­å¥</span>&#13;
  sqlite3_stmt *stmt;&#13;
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">sqlite3_prepare_v2</span>(db, sql, <span class="hljs-number">-1</span>, &amp;stmt, <span class="hljs-literal">nullptr</span>) != SQLITE_OK) {&#13;
    std::cerr &lt;&lt; (<span class="hljs-type">const</span> <span class="hljs-type">char</span> *)(<span class="hljs-string">u8"SQLå‡†å¤‡è¯­å¥å¤±è´¥: "</span>) &lt;&lt; <span class="hljs-built_in">sqlite3_errmsg</span>(db)&#13;
              &lt;&lt; std::endl;&#13;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#13;
  }&#13;
&#13;
  <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">BindParams2Stmt</span>(bindParams, stmt, db)) {&#13;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#13;
  }&#13;
&#13;
  <span class="hljs-comment">// æ‰§è¡ŒSQLè¯­å¥å¹¶å­˜å‚¨ç»“æœ</span>&#13;
  <span class="hljs-keyword">while</span> (<span class="hljs-built_in">sqlite3_step</span>(stmt) == SQLITE_ROW) {&#13;
    <span class="hljs-type">int</span> colCount = <span class="hljs-built_in">sqlite3_column_count</span>(stmt);&#13;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; colCount; ++i) {&#13;
      <span class="hljs-keyword">switch</span> (<span class="hljs-built_in">sqlite3_column_type</span>(stmt, i)) {&#13;
        <span class="hljs-keyword">case</span> SQLITE_TEXT: {&#13;
          result.<span class="hljs-built_in">emplace_back</span>(&#13;
              <span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">const</span> <span class="hljs-type">char</span> *&gt;(<span class="hljs-built_in">sqlite3_column_text</span>(stmt, i)));&#13;
          <span class="hljs-keyword">break</span>;&#13;
        }&#13;
        <span class="hljs-keyword">case</span> SQLITE_INTEGER: {&#13;
          result.<span class="hljs-built_in">emplace_back</span>(<span class="hljs-built_in">sqlite3_column_int64</span>(stmt, i));&#13;
          <span class="hljs-keyword">break</span>;&#13;
        }&#13;
        <span class="hljs-keyword">case</span> SQLITE_NULL: {&#13;
          result.<span class="hljs-built_in">emplace_back</span>(std::monostate{});&#13;
          <span class="hljs-keyword">break</span>;&#13;
        }&#13;
        <span class="hljs-keyword">case</span> SQLITE_FLOAT:&#13;
        <span class="hljs-keyword">case</span> SQLITE_BLOB:&#13;
        <span class="hljs-keyword">default</span>: {&#13;
          std::cerr &lt;&lt; (<span class="hljs-type">const</span> <span class="hljs-type">char</span> *)(<span class="hljs-string">u8"æ‰§è¡Œå¤±è´¥: "</span>) &lt;&lt; <span class="hljs-built_in">sqlite3_errmsg</span>(db)&#13;
                    &lt;&lt; std::endl;&#13;
          <span class="hljs-built_in">sqlite3_finalize</span>(stmt);&#13;
          <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#13;
        }&#13;
      }&#13;
    }&#13;
  }&#13;
&#13;
  <span class="hljs-built_in">sqlite3_finalize</span>(stmt);  <span class="hljs-comment">// é‡Šæ”¾SQLè¯­å¥å¯¹è±¡</span>&#13;
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;&#13;
}&#13;
&#13;
}  <span class="hljs-comment">// namespace Sqlite3Crud</span>&#13;
&#13;
}  <span class="hljs-comment">// namespace Persistence</span>
</code></pre>
<p>Sqlite3 çš„ CURD çš„æ“ä½œéƒ½å·®ä¸å¤šï¼Œéƒ½æ˜¯ç¼–è¯‘ statement ï¼Œç„¶åç»‘å®šå‚æ•°ï¼Œæœ€åæ‰§è¡Œã€‚ä½†æ˜¯è¦å®ç°ç»Ÿä¸€çš„ CURD æ¥å£çš„å°è£…ï¼Œä¸€ä¸ªå…³é”®çš„åœ°æ–¹å°±åœ¨äºä¼ å‚è¡¨æ ¼å­—æ®µå€¼ç±»å‹ã€‚å¦‚æœæ˜¯ JavaScriptã€Python è¿™æ ·çš„ç¼–ç¨‹è¯­è¨€å¥½åŠï¼Œå®ƒä»¬æ˜¯å¼±ç±»å‹è¯­è¨€ï¼Œå®Œå…¨å¯ä»¥æ”¯æŒã€‚ä½œä¸ºå¼ºç±»å‹è¯­è¨€ï¼ŒC++ä¹Ÿæœ‰åŠæ³•ï¼Œé‚£å°±æ˜¯ä½¿ç”¨ C++17 æä¾›çš„ <code>std::variant</code>:</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">using</span> TableValue = std::variant&lt;std::monostate, std::string, <span class="hljs-type">int64_t</span>&gt;;  <span class="hljs-comment">//è¡¨çš„å€¼</span>
</code></pre>
<p>è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªç±»å‹åˆ«å <code>TableValue</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ª std::variant ç±»å‹ï¼Œå¯ä»¥æŒæœ‰ä»¥ä¸‹ä¸‰ç§ç±»å‹çš„å€¼ï¼š<code>std::monostate</code> ã€<code>std::string</code> å’Œ <code>int64_t</code> ã€‚å…¶ä¸­ <code>std::monostate</code> æ˜¯ä¸€ä¸ªç©ºç±»å‹ï¼ˆempty structï¼‰ï¼Œå¸¸ç”¨äº std::variant ä¸­è¡¨ç¤ºâ€œæ— å€¼â€æˆ–â€œç©ºçŠ¶æ€â€ã€‚å½“éœ€è¦ç»‘å®šå‚æ•°åˆ° SQL è¯­å¥æ—¶ï¼Œå†å°† <code>TableValue</code> æ‹†ç®±æˆå…·ä½“çš„å€¼ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä» bindParams ç»‘å®šæ‰€æœ‰å‚æ•°</span>&#13;
<span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">bool</span> <span class="hljs-title">BindParams2Stmt</span><span class="hljs-params">(<span class="hljs-type">const</span> std::vector&lt;TableValue&gt; &amp;bindParams,&#13;
                            sqlite3_stmt *stmt, sqlite3 *db)</span> </span>{&#13;
  <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> si = <span class="hljs-number">0</span>; si &lt; bindParams.<span class="hljs-built_in">size</span>(); ++si) {&#13;
    <span class="hljs-type">int</span> bindIndex = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">int</span>&gt;(si + <span class="hljs-number">1</span>);  <span class="hljs-comment">// SQLite å‚æ•°ä» 1 å¼€å§‹</span>&#13;
    <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> &amp;bindParam = bindParams[si];&#13;
&#13;
    <span class="hljs-comment">// ä½¿ç”¨ std::holds_alternative æ£€æŸ¥å½“å‰æ˜¯å¦å­˜å‚¨äº†æŒ‡å®šç±»å‹çš„å€¼</span>&#13;
    <span class="hljs-keyword">if</span> (std::<span class="hljs-built_in">holds_alternative</span>&lt;std::string&gt;(bindParam)) {&#13;
      <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> &amp;param = std::<span class="hljs-built_in">get</span>&lt;std::string&gt;(bindParam);&#13;
      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">sqlite3_bind_text</span>(stmt, bindIndex, param.<span class="hljs-built_in">c_str</span>(), <span class="hljs-number">-1</span>,&#13;
                            SQLITE_STATIC) != SQLITE_OK) {&#13;
        std::cerr &lt;&lt; <span class="hljs-string">"ç»‘å®šé”™è¯¯: "</span> &lt;&lt; <span class="hljs-built_in">sqlite3_errmsg</span>(db) &lt;&lt; std::endl;&#13;
        <span class="hljs-built_in">sqlite3_finalize</span>(stmt);&#13;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#13;
      }&#13;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (std::<span class="hljs-built_in">holds_alternative</span>&lt;<span class="hljs-type">int64_t</span>&gt;(bindParam)) {&#13;
      <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> &amp;param = std::<span class="hljs-built_in">get</span>&lt;<span class="hljs-type">int64_t</span>&gt;(bindParam);&#13;
      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">sqlite3_bind_int64</span>(stmt, bindIndex, param) != SQLITE_OK) {&#13;
        std::cerr &lt;&lt; <span class="hljs-string">"ç»‘å®šé”™è¯¯: "</span> &lt;&lt; <span class="hljs-built_in">sqlite3_errmsg</span>(db) &lt;&lt; std::endl;&#13;
        <span class="hljs-built_in">sqlite3_finalize</span>(stmt);&#13;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#13;
      }&#13;
    } <span class="hljs-keyword">else</span> {&#13;
      std::cerr &lt;&lt; <span class="hljs-string">"ä¸æ”¯æŒçš„ç»‘å®šå‚æ•°ç±»å‹"</span> &lt;&lt; std::endl;&#13;
      <span class="hljs-built_in">sqlite3_finalize</span>(stmt);&#13;
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#13;
    }&#13;
  }&#13;
&#13;
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;&#13;
}
</code></pre>
<h3 data-id="heading-3">2.2 å­—æ®µå</h3>
<p>ä»”ç»†è§‚å¯Ÿ <code>InsertRow</code>ã€<code>DeleteRow</code>ã€<code>UpdateRow</code> ä»¥åŠ <code>QueryRows</code> çš„å®ç°ï¼Œè™½ç„¶å®ƒä»¬é€šè¿‡ <code>TableValue</code> è§£å†³äº†å­—æ®µå€¼ç±»å‹å¤šæ ·çš„ä¼ å‚é—®é¢˜ï¼Œä½†ä»ç„¶è¦æ±‚è°ƒç”¨è€…ä¼ å…¥å®Œæ•´çš„ SQL å­—ç¬¦ä¸²ã€‚è¿™æ„å‘³ç€ä¸šåŠ¡ä»£ç ä»éœ€æ‰‹åŠ¨æ‹¼æ¥è¡¨åã€å­—æ®µåå’Œå ä½ç¬¦ï¼Œä¸ä»…é‡å¤ç¹çï¼Œè¿˜å®¹æ˜“å¼•å…¥è¯­æ³•é”™è¯¯æˆ– SQL æ³¨å…¥é£é™©ï¼ˆå°½ç®¡ä½¿ç”¨å‚æ•°ç»‘å®šå¯ç¼“è§£åè€…ï¼‰ã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œè¡¨ç»“æ„æœ¬èº«æ˜¯é™æ€çš„ã€å·²çŸ¥çš„ï¼šæ¯”å¦‚ä¸€ç¯‡åšå®¢æ–‡ç« å¯¹åº” posts è¡¨ï¼ŒåŒ…å« idã€titleã€content ç­‰å­—æ®µã€‚å¦‚æœæ¯æ¬¡æ’å…¥éƒ½è¦å†™ "INSERT INTO posts (title, content) VALUES (?, ?)"ï¼Œé‚£ä¹ˆå½“è¡¨ç»“æ„å˜æ›´æ—¶ï¼Œæ‰€æœ‰ç›¸å…³ SQL å­—ç¬¦ä¸²éƒ½éœ€åŒæ­¥ä¿®æ”¹ï¼Œè¿åäº†â€œä¸€å¤„ä¿®æ”¹ï¼Œå¤„å¤„ç”Ÿæ•ˆâ€çš„å·¥ç¨‹åŸåˆ™ã€‚</p>
<p>å› æ­¤ï¼Œç†æƒ³çš„åšæ³•æ˜¯ï¼šè®© CRUD æ¥å£æ¥å—é«˜å±‚è¯­ä¹‰ä¿¡æ¯ï¼ˆå¦‚è¡¨åã€å­—æ®µååˆ—è¡¨ï¼‰ï¼Œç”±åº•å±‚è‡ªåŠ¨æ„é€ å¯¹åº”çš„ SQL è¯­å¥ã€‚è¿™æ ·ï¼Œä¸šåŠ¡å±‚åªéœ€å…³æ³¨â€œæˆ‘è¦æ’å…¥å“ªäº›å­—æ®µâ€ï¼Œè€Œæ— éœ€å…³å¿ƒå…·ä½“çš„ SQL è¯­æ³•ç»†èŠ‚ã€‚è¿™ä¸ä»…æå‡äº†å¼€å‘æ•ˆç‡ï¼Œä¹Ÿå¢å¼ºäº†ç³»ç»Ÿçš„å†…èšæ€§ä¸å¯ç»´æŠ¤æ€§ã€‚</p>
<p>åŸºäº ORM çš„æ€æƒ³ï¼Œä¸€ä¸ªç®€å•çš„æƒ³æ³•æ˜¯å¯ä»¥å°†æ•°æ®åº“è¡¨æ˜ å°„æˆç±»/ç»“æ„ä½“å¯¹è±¡ï¼Œé€šè¿‡åå°„ç‰¹æ€§è·å–ç±»/ç»“æ„ä½“å¯¹è±¡çš„æˆå‘˜ä¿¡æ¯ï¼Œè¿›è€ŒçŸ¥é“æ•°æ®åº“è¡¨åå’Œå­—æ®µåï¼Œå®ç°è‡ªåŠ¨æ„é€ è¯­å¥ã€‚å¦‚æœæ˜¯ Java æˆ–è€… C# è¿™æ ·çš„é«˜çº§æ‰˜ç®¡è¯­è¨€å°±æ²¡æœ‰é—®é¢˜ï¼Œå› ä¸ºå®ƒä»¬æ”¯æŒåå°„ï¼ˆReflectionï¼‰ç‰¹æ€§ã€‚å¯¹äº C++ ï¼Œå¯ä»¥å¼•å…¥ magic_enum åº“ï¼Œå°†æšä¸¾å€¼ï¼ˆenumï¼‰è½¬æ¢ä¸ºå¯¹åº”çš„å­—ç¬¦ä¸²åç§°ã€‚å‚çœ‹å·¥å…·æ¥å£Util::Statement çš„å®ç°ï¼š</p>
<p><strong>Statement.hpp</strong>:</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">pragma</span> once</span>&#13;
&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;format&gt;</span></span>&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;magic_enum/magic_enum.hpp&gt;</span></span>&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;optional&gt;</span></span>&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>&#13;
&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"Persistence/TableName.h"</span></span>&#13;
&#13;
<span class="hljs-keyword">namespace</span> Util {&#13;
&#13;
<span class="hljs-keyword">namespace</span> Statement {&#13;
&#13;
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> Persistence;&#13;
&#13;
<span class="hljs-keyword">enum class</span> <span class="hljs-title class_">OrderByValue</span> { ASC, DESC };&#13;
&#13;
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Field&gt;&#13;
<span class="hljs-function">std::string <span class="hljs-title">Insert</span><span class="hljs-params">(TableName tableName, <span class="hljs-type">const</span> std::vector&lt;Field&gt;&amp; fieldNames)</span> </span>{&#13;
  <span class="hljs-type">size_t</span> num = fieldNames.<span class="hljs-built_in">size</span>();&#13;
  <span class="hljs-keyword">if</span> (num == <span class="hljs-number">0</span>) {&#13;
    <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">invalid_argument</span>(<span class="hljs-string">"æ’å…¥æ•°æ®ç¼ºå°‘æ’å…¥é¡¹ï¼"</span>);&#13;
  }&#13;
&#13;
  std::string columnList = <span class="hljs-string">"("</span>;           <span class="hljs-comment">//åˆ—åˆ—è¡¨</span>&#13;
  std::string valuesClause = <span class="hljs-string">"VALUES ("</span>;  <span class="hljs-comment">// valueså­å¥</span>&#13;
  <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; num; ++i) {&#13;
    columnList += magic_enum::<span class="hljs-built_in">enum_name</span>(fieldNames.<span class="hljs-built_in">at</span>(i));&#13;
    valuesClause += <span class="hljs-string">"?"</span>;&#13;
    <span class="hljs-keyword">if</span> (i != num - <span class="hljs-number">1</span>) {&#13;
      columnList += <span class="hljs-string">", "</span>;&#13;
      valuesClause += <span class="hljs-string">", "</span>;&#13;
    }&#13;
  }&#13;
  columnList += <span class="hljs-string">")"</span>;&#13;
  valuesClause += <span class="hljs-string">")"</span>;&#13;
&#13;
  <span class="hljs-comment">//æ’å…¥å­å¥</span>&#13;
  std::string insertClause = std::format(&#13;
      <span class="hljs-string">"INSERT INTO {} {}"</span>, magic_enum::<span class="hljs-built_in">enum_name</span>(tableName), columnList);&#13;
&#13;
  <span class="hljs-keyword">return</span> std::format(<span class="hljs-string">"{} {};"</span>, insertClause, valuesClause);&#13;
}&#13;
&#13;
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Field&gt;&#13;
<span class="hljs-function">std::string <span class="hljs-title">Delete</span><span class="hljs-params">(TableName tableName, <span class="hljs-type">const</span> Field&amp; fieldName)</span> </span>{&#13;
  std::string deleteClause = <span class="hljs-string">"DELETE"</span>;&#13;
&#13;
  std::string fromClause =&#13;
      std::format(<span class="hljs-string">"FROM {}"</span>, magic_enum::<span class="hljs-built_in">enum_name</span>(tableName));&#13;
&#13;
  std::string whereClause =&#13;
      std::format(<span class="hljs-string">"WHERE {} = ?"</span>, magic_enum::<span class="hljs-built_in">enum_name</span>(fieldName));&#13;
&#13;
  <span class="hljs-keyword">return</span> std::format(<span class="hljs-string">"{} {} {};"</span>, deleteClause, fromClause, whereClause);&#13;
}&#13;
&#13;
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Field&gt;&#13;
<span class="hljs-function">std::string <span class="hljs-title">Update</span><span class="hljs-params">(TableName tableName, <span class="hljs-type">const</span> std::vector&lt;Field&gt;&amp; fieldNames)</span> </span>{&#13;
  <span class="hljs-type">size_t</span> num = fieldNames.<span class="hljs-built_in">size</span>();&#13;
  <span class="hljs-keyword">if</span> (num &lt;= <span class="hljs-number">1</span>) {&#13;
    <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">invalid_argument</span>(<span class="hljs-string">"æ›´æ–°æ•°æ®è‡³å°‘è¦ä¸¤åˆ—å€¼ï¼"</span>);&#13;
  }&#13;
&#13;
  std::string updateClause =&#13;
      std::format(<span class="hljs-string">"UPDATE {}"</span>, magic_enum::<span class="hljs-built_in">enum_name</span>(tableName));&#13;
&#13;
  std::string setClause = <span class="hljs-string">"SET "</span>;&#13;
  <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; num - <span class="hljs-number">1</span>; ++i) {&#13;
    setClause += magic_enum::<span class="hljs-built_in">enum_name</span>(fieldNames[i]);&#13;
    setClause += <span class="hljs-string">" = ?"</span>;&#13;
    <span class="hljs-keyword">if</span> (i != num - <span class="hljs-number">2</span>) {&#13;
      setClause += <span class="hljs-string">", "</span>;&#13;
    }&#13;
  }&#13;
&#13;
  std::string whereClause =&#13;
      std::format(<span class="hljs-string">"WHERE {} = ?"</span>, magic_enum::<span class="hljs-built_in">enum_name</span>(fieldNames[num - <span class="hljs-number">1</span>]));&#13;
&#13;
  <span class="hljs-keyword">return</span> std::format(<span class="hljs-string">"{} {} {};"</span>, updateClause, setClause, whereClause);&#13;
}&#13;
&#13;
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Field&gt;&#13;
<span class="hljs-function">std::string <span class="hljs-title">Query</span><span class="hljs-params">(TableName tableName, <span class="hljs-type">const</span> std::vector&lt;Field&gt;&amp; fieldNames,&#13;
                  <span class="hljs-type">const</span> std::vector&lt;Field&gt;&amp; whereFields = {},&#13;
                  std::optional&lt;Field&gt; orderByField = std::<span class="hljs-literal">nullopt</span>,&#13;
                  std::optional&lt;OrderByValue&gt; orderByValue = std::<span class="hljs-literal">nullopt</span>)</span> </span>{&#13;
  <span class="hljs-keyword">if</span> (fieldNames.<span class="hljs-built_in">empty</span>()) {&#13;
    <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">invalid_argument</span>(<span class="hljs-string">"query sql fieldNames must not be empty"</span>);&#13;
  }&#13;
&#13;
  <span class="hljs-type">size_t</span> num = fieldNames.<span class="hljs-built_in">size</span>();&#13;
&#13;
  <span class="hljs-comment">//</span>&#13;
  std::string columnList;  <span class="hljs-comment">//åˆ—åˆ—è¡¨</span>&#13;
  <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; num; ++i) {&#13;
    columnList += magic_enum::<span class="hljs-built_in">enum_name</span>(fieldNames.<span class="hljs-built_in">at</span>(i));&#13;
    <span class="hljs-keyword">if</span> (i != num - <span class="hljs-number">1</span>) {&#13;
      columnList += <span class="hljs-string">", "</span>;&#13;
    }&#13;
  }&#13;
  std::string selectClause = std::format(<span class="hljs-string">"SELECT {}"</span>, columnList);&#13;
&#13;
  std::string fromClause =&#13;
      std::format(<span class="hljs-string">"FROM {}"</span>, magic_enum::<span class="hljs-built_in">enum_name</span>(tableName));&#13;
  std::string statement = std::format(<span class="hljs-string">"{} {}"</span>, selectClause, fromClause);&#13;
&#13;
  <span class="hljs-comment">// æ·»åŠ  WHERE å­å¥ï¼ˆæ”¯æŒå¤šä¸ªæ¡ä»¶ï¼‰</span>&#13;
  <span class="hljs-keyword">if</span> (!whereFields.<span class="hljs-built_in">empty</span>()) {&#13;
    std::string whereClause = <span class="hljs-string">"WHERE "</span>;&#13;
&#13;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; whereFields.<span class="hljs-built_in">size</span>(); ++i) {&#13;
      whereClause += magic_enum::<span class="hljs-built_in">enum_name</span>(whereFields[i]);&#13;
      whereClause += <span class="hljs-string">" = ?"</span>;&#13;
      <span class="hljs-keyword">if</span> (i != whereFields.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>) {&#13;
        whereClause += <span class="hljs-string">" AND "</span>;&#13;
      }&#13;
    }&#13;
    statement = std::format(<span class="hljs-string">"{} {}"</span>, statement, whereClause);&#13;
  }&#13;
&#13;
  <span class="hljs-keyword">if</span> (orderByField.<span class="hljs-built_in">has_value</span>() &amp;&amp; orderByValue.<span class="hljs-built_in">has_value</span>()) {&#13;
    std::string orderByClause = std::format(&#13;
        <span class="hljs-string">"ORDER BY {} {}"</span>, magic_enum::<span class="hljs-built_in">enum_name</span>(orderByField.<span class="hljs-built_in">value</span>()),&#13;
        magic_enum::<span class="hljs-built_in">enum_name</span>(orderByValue.<span class="hljs-built_in">value</span>()));&#13;
    statement = std::format(<span class="hljs-string">"{} {}"</span>, statement, orderByClause);&#13;
  }&#13;
&#13;
  <span class="hljs-keyword">return</span> std::format(<span class="hljs-string">"{};"</span>, statement);&#13;
}&#13;
&#13;
}  <span class="hljs-comment">// namespace Statement</span>&#13;
&#13;
}  <span class="hljs-comment">// namespace Util</span>
</code></pre>
<p>åˆ©ç”¨æ¨¡æ¿ç‰¹æ€§ï¼Œæ¥å£<code>Insert</code>ã€<code>Delete</code>ã€<code>Update</code>ã€<code>Query</code>å¯ä»¥æ¥å—ä¸åŒçš„æ•°æ®åº“è¡¨çš„æšä¸¾ç±»æ˜ å°„å¯¹è±¡ã€‚ä¾‹å¦‚åšæ–‡è¡¨<code>TableBlogsField.h</code>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">pragma</span> once</span>&#13;
&#13;
<span class="hljs-keyword">namespace</span> Persistence {&#13;
&#13;
<span class="hljs-keyword">enum class</span> <span class="hljs-title class_">TableBlogsField</span> {&#13;
  id,&#13;
  title,&#13;
  content,&#13;
  summary,&#13;
  cover_image_url,&#13;
  created_at,&#13;
  updated_at,&#13;
  is_draft&#13;
};&#13;
&#13;
}
</code></pre>
<p>åˆ†ç±»ä¸“æ è¡¨<code>TableCategoriesField.h</code>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">pragma</span> once</span>&#13;
&#13;
<span class="hljs-keyword">namespace</span> Persistence {&#13;
&#13;
<span class="hljs-keyword">enum class</span> <span class="hljs-title class_">TableCategoriesField</span> {&#13;
  id,&#13;
  title,&#13;
  description,&#13;
  image_url,&#13;
  parent_id,&#13;
  created_at&#13;
};&#13;
&#13;
}
</code></pre>
<p><code>TableBlogsField</code> ã€<code>TableCategoriesField</code> ä¼šåœ¨ <code>Insert</code>ã€<code>Delete</code>ã€<code>Update</code>ã€<code>Query</code> çš„æ¨¡æ¿ <code>template &lt;typename Field&gt;</code> ä¸­å±•å¼€æˆå­—ç¬¦ä¸²ï¼Œå®ç° SQL å­—ç¬¦ä¸²çš„æ‹¼æ¥ï¼›å¹¶è¢« <code>Sqlite3Crud</code> çš„ <code>Insert</code>ã€<code>Delete</code>ã€<code>Update</code>ã€<code>Query</code> æ‰€è°ƒç”¨ï¼Œå½¢æˆæ›´åŠ é€šç”¨çš„æ¥å£ã€‚è¿™æ ·ï¼Œä¸šåŠ¡ä»£ç åªéœ€æ“ä½œè¯­ä¹‰æ¸…æ™°çš„æšä¸¾å­—æ®µï¼Œè€Œæ— éœ€ç¡¬ç¼–ç ä»»ä½• SQL å­—ç¬¦ä¸²ã€‚è¿™ç§åŸºäºæšä¸¾ä¸æ¨¡æ¿çš„â€œç¼–è¯‘æœŸåå°„â€æœºåˆ¶ï¼Œåœ¨ C++ ç¼ºä¹åŸç”Ÿåå°„èƒ½åŠ›çš„å‰æä¸‹ï¼Œæä¾›äº†ä¸€ç§è½»é‡ã€ç±»å‹å®‰å…¨ä¸”æ˜“äºç»´æŠ¤çš„ ORM é£æ ¼æ¥å£ã€‚</p>
<h3 data-id="heading-4">2.3 è°ƒç”¨</h3>
<p>å½“ç„¶ï¼Œåœ¨ <code>Sqlite3Crud</code> çš„ <code>Insert</code>ã€<code>Delete</code>ã€<code>Update</code>ã€<code>Query</code> æ¥å£ä¸­ï¼Œè¿˜éœ€è¦çŸ¥é“æ•°æ®åº“åï¼Œè¿™ä¹Ÿæ˜¯æšä¸¾ç±»<code>TableName.h</code>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">pragma</span> once</span>&#13;
&#13;
<span class="hljs-keyword">namespace</span> Persistence {&#13;
&#13;
<span class="hljs-keyword">enum class</span> <span class="hljs-title class_">TableName</span> {&#13;
  users,&#13;
  tags,&#13;
  blog_tags,&#13;
  categories,&#13;
  category_blog,&#13;
  blog_views,&#13;
  blog_likes,&#13;
  friend_links,&#13;
  blogs&#13;
};&#13;
&#13;
}
</code></pre>
<p>å¦‚æœæ˜¯ä»åšæ–‡è¡¨ä¸­æŸ¥è¯¢æ•°æ®ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp">vector&lt;Sqlite3Crud::TableValue&gt; result;&#13;
<span class="hljs-keyword">if</span> (!Sqlite3Crud::<span class="hljs-built_in">Query</span>&lt;TableBlogsField&gt;(&#13;
        TableName::blogs,&#13;
        {TableBlogsField::title, TableBlogsField::content,&#13;
        TableBlogsField::summary, TableBlogsField::created_at,&#13;
        TableBlogsField::updated_at},&#13;
        result, {TableBlogsField::is_draft, TableBlogsField::id},&#13;
        {isDraft, blogId})) {&#13;
<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#13;
}&#13;
&#13;
<span class="hljs-keyword">auto</span> &amp;blogMeta = blogData.blogMeta;&#13;
blogMeta.id = blogId;&#13;
blogMeta.title = std::<span class="hljs-built_in">move</span>(std::<span class="hljs-built_in">get</span>&lt;std::string&gt;(result.<span class="hljs-built_in">at</span>(<span class="hljs-number">0</span>)));&#13;
blogData.content = std::<span class="hljs-built_in">move</span>(std::<span class="hljs-built_in">get</span>&lt;std::string&gt;(result.<span class="hljs-built_in">at</span>(<span class="hljs-number">1</span>)));&#13;
blogMeta.summary = std::<span class="hljs-built_in">move</span>(std::<span class="hljs-built_in">get</span>&lt;std::string&gt;(result.<span class="hljs-built_in">at</span>(<span class="hljs-number">2</span>)));&#13;
blogMeta.createdTime = std::<span class="hljs-built_in">move</span>(std::<span class="hljs-built_in">get</span>&lt;std::string&gt;(result.<span class="hljs-built_in">at</span>(<span class="hljs-number">3</span>)));&#13;
blogMeta.updatedTime = std::<span class="hljs-built_in">move</span>(std::<span class="hljs-built_in">get</span>&lt;std::string&gt;(result.<span class="hljs-built_in">at</span>(<span class="hljs-number">4</span>)));
</code></pre>
<p>åˆ›å»ºåšæ–‡æ’å…¥åˆ°åšæ–‡è¡¨ä¸­ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">auto</span> &amp;blogMeta = blogData.blogMeta;&#13;
blogMeta.updatedTime = blogMeta.createdTime;&#13;
&#13;
<span class="hljs-comment">// æ’å…¥åšæ–‡è¡¨</span>&#13;
Sqlite3Crud::<span class="hljs-built_in">Insert</span>&lt;TableBlogsField&gt;(&#13;
    TableName::blogs,&#13;
    {TableBlogsField::id, TableBlogsField::title, TableBlogsField::content,&#13;
    TableBlogsField::summary, TableBlogsField::created_at,&#13;
    TableBlogsField::updated_at, TableBlogsField::cover_image_url,&#13;
    TableBlogsField::is_draft},&#13;
    {blogId, std::<span class="hljs-built_in">move</span>(blogMeta.title), std::<span class="hljs-built_in">move</span>(blogData.content),&#13;
    std::<span class="hljs-built_in">move</span>(blogMeta.summary), std::<span class="hljs-built_in">move</span>(blogMeta.createdTime),&#13;
    std::<span class="hljs-built_in">move</span>(blogMeta.updatedTime), std::<span class="hljs-built_in">move</span>(blogMeta.coverAddress),&#13;
    std::<span class="hljs-built_in">move</span>(blogMeta.isDraft)});
</code></pre>
<p>æ›´æ–°æŸç¯‡åšæ–‡æ•°æ®ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> &amp;blogId = blogData.blogMeta.id;&#13;
<span class="hljs-keyword">auto</span> &amp;blogMeta = blogData.blogMeta;&#13;
&#13;
<span class="hljs-keyword">if</span> (!Sqlite3Crud::<span class="hljs-built_in">Update</span>&lt;TableBlogsField&gt;(&#13;
        TableName::blogs,&#13;
        {TableBlogsField::title, TableBlogsField::content,&#13;
        TableBlogsField::summary, TableBlogsField::created_at,&#13;
        TableBlogsField::updated_at, TableBlogsField::cover_image_url,&#13;
        TableBlogsField::is_draft, TableBlogsField::id},&#13;
        {std::<span class="hljs-built_in">move</span>(blogMeta.title), std::<span class="hljs-built_in">move</span>(blogData.content),&#13;
        std::<span class="hljs-built_in">move</span>(blogMeta.summary), std::<span class="hljs-built_in">move</span>(blogMeta.createdTime),&#13;
        std::<span class="hljs-built_in">move</span>(blogMeta.updatedTime), std::<span class="hljs-built_in">move</span>(blogMeta.coverAddress),&#13;
        std::<span class="hljs-built_in">move</span>(blogMeta.isDraft), blogId})) {&#13;
<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#13;
}
</code></pre>
<p>åˆ é™¤æŸç¯‡åšæ–‡ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp">Sqlite3Crud::<span class="hljs-built_in">Delete</span>&lt;TableBlogsField&gt;(&#13;
      TableName::blogs, TableBlogsField::id, {std::<span class="hljs-built_in">move</span>(blogId)});
</code></pre>
<p>è¿™ç§è°ƒç”¨æ–¹å¼å°†æ•°æ®åº“æ“ä½œå®Œå…¨è§£è€¦äºåŸå§‹ SQL å­—ç¬¦ä¸²ï¼Œä¸ä»…é¿å…äº†æ‰‹å†™ SQL å¸¦æ¥çš„æ‹¼å†™é”™è¯¯ä¸æ³¨å…¥é£é™©ï¼Œè¿˜ä½¿å¾—è¡¨ç»“æ„å˜æ›´åªéœ€ä¿®æ”¹å¯¹åº”çš„æšä¸¾å®šä¹‰å³å¯è‡ªåŠ¨åŒæ­¥åˆ°æ‰€æœ‰ç›¸å…³æ“ä½œä¸­ï¼Œæ˜¾è‘—æå‡äº†ä»£ç çš„å®‰å…¨æ€§ã€å¯è¯»æ€§ä¸å¯ç»´æŠ¤æ€§ã€‚</p>
<h2 data-id="heading-5">3. ä¼˜åŒ–</h2>
<h3 data-id="heading-6">3.1 ç¼–è¯‘æœŸç”Ÿæˆ</h3>
<p>è™½ç„¶è¿™æ ·åšå·²ç»éå¸¸è‡ªåŠ¨åŒ–äº†ï¼Œä½†æ˜¯æ•°æ®åº“è¡¨æ˜ å°„çš„æšä¸¾ç±»å¯¹è±¡å¯èƒ½å¹¶ä¸èƒ½è·Ÿ SQLite3 æ•°æ®åº“åŒæ­¥â€”â€”å› ä¸ºè¿™äº›æšä¸¾æ˜¯åœ¨ç¼–è¯‘æœŸé™æ€å®šä¹‰çš„ï¼Œè€Œæ•°æ®åº“è¡¨ç»“æ„å¯èƒ½åœ¨è¿è¡Œæ—¶è¢«å¤–éƒ¨å·¥å…·ï¼ˆå¦‚è¿ç§»è„šæœ¬ã€æ‰‹åŠ¨ ALTER TABLE æ“ä½œæˆ–ä¸åŒç‰ˆæœ¬çš„éƒ¨ç½²ï¼‰åŠ¨æ€ä¿®æ”¹ã€‚ä¸€æ—¦å®é™…æ•°æ®åº“ä¸­çš„å­—æ®µå¢åˆ æ”¹ä¸ C++ æšä¸¾ä¸­å®šä¹‰çš„å­—æ®µä¸ä¸€è‡´ï¼Œå°±ä¼šå¯¼è‡´ç”Ÿæˆçš„ SQL è¯­å¥å¼•ç”¨ä¸å­˜åœ¨çš„åˆ—ã€é—æ¼æ–°å¢åˆ—ï¼Œç”šè‡³å› ç±»å‹ä¸åŒ¹é…è€Œå¼•å‘è¿è¡Œæ—¶é”™è¯¯æˆ–æ•°æ®ä¸¢å¤±ã€‚</p>
<p>æ­¤å¤–ï¼Œè¿™ç§â€œä»£ç å³ Schemaâ€çš„æ–¹å¼ç¼ºä¹å¯¹æ•°æ®åº“çœŸå®çŠ¶æ€çš„éªŒè¯æœºåˆ¶ï¼Œæ— æ³•åœ¨ç¨‹åºå¯åŠ¨æ—¶è‡ªåŠ¨æ£€æµ‹è¡¨ç»“æ„æ˜¯å¦ä¸æšä¸¾å®šä¹‰ä¸€è‡´ï¼Œä»è€ŒåŸ‹ä¸‹æ½œåœ¨çš„å…¼å®¹æ€§éšæ‚£ã€‚å› æ­¤ï¼Œåœ¨è¿½æ±‚å¼€å‘æ•ˆç‡çš„åŒæ—¶ï¼Œä»éœ€è¾…ä»¥æ•°æ®åº“ç‰ˆæœ¬ç®¡ç†ï¼ˆå¦‚è¿ç§»è„šæœ¬ï¼‰ã€å¯åŠ¨æ—¶ç»“æ„æ ¡éªŒæˆ–æ„å»ºé˜¶æ®µçš„ä»£ç ç”Ÿæˆå·¥å…·ï¼ˆå¦‚ä»æ•°æ®åº“ schema è‡ªåŠ¨ç”Ÿæˆæšä¸¾ï¼‰ï¼Œæ‰èƒ½çœŸæ­£å®ç°ç±»å‹å®‰å…¨ä¸ç»“æ„ä¸€è‡´æ€§çš„åŒé‡ä¿éšœã€‚</p>
<p>å¯¹ C++ æ¥è¯´ï¼Œæ¯”è¾ƒå¥½çš„æ–¹æ³•å°±æ˜¯åœ¨æ„å»ºç¨‹åºçš„æ—¶å€™é€šè¿‡ä»£ç ç”Ÿæˆå·¥å…·ä»æ•°æ®åº“ schema è‡ªåŠ¨ç”Ÿæˆæšä¸¾ç±»ã€‚ç¬”è€…çš„å®ç°ä»£ç æ˜¯ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Script/DbSchemaGenerator.cpp</span>&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sqlite3.h&gt;</span></span>&#13;
&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;filesystem&gt;</span></span>&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span>&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>&#13;
&#13;
<span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN32</span>&#13;
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;Windows.h&gt;</span></span>&#13;
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>&#13;
&#13;
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;&#13;
&#13;
<span class="hljs-comment">//è½¬æ¢æˆå¸•æ–¯å¡å‘½å</span>&#13;
<span class="hljs-function">std::string <span class="hljs-title">ToPascalCase</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; input)</span> </span>{&#13;
  <span class="hljs-keyword">if</span> (input.<span class="hljs-built_in">empty</span>()) {&#13;
    <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;&#13;
  }&#13;
&#13;
  std::string result;&#13;
  <span class="hljs-type">bool</span> nextUpper = <span class="hljs-literal">true</span>;  <span class="hljs-comment">// ä¸‹ä¸€ä¸ªæœ‰æ•ˆå­—ç¬¦åº”å¤§å†™</span>&#13;
&#13;
  <span class="hljs-keyword">for</span> (<span class="hljs-type">char</span> c : input) {&#13;
    <span class="hljs-keyword">if</span> (c == <span class="hljs-string">'_'</span>) {&#13;
      <span class="hljs-comment">// é‡åˆ°ä¸‹åˆ’çº¿ï¼Œä¸‹ä¸€ä¸ªéä¸‹åˆ’çº¿å­—æ¯è¦å¤§å†™</span>&#13;
      nextUpper = <span class="hljs-literal">true</span>;&#13;
    } <span class="hljs-keyword">else</span> {&#13;
      <span class="hljs-keyword">if</span> (nextUpper) {&#13;
        result +=&#13;
            <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">char</span>&gt;(std::<span class="hljs-built_in">toupper</span>(<span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">unsigned</span> <span class="hljs-type">char</span>&gt;(c)));&#13;
        nextUpper = <span class="hljs-literal">false</span>;&#13;
      } <span class="hljs-keyword">else</span> {&#13;
        result +=&#13;
            <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">char</span>&gt;(std::<span class="hljs-built_in">tolower</span>(<span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">unsigned</span> <span class="hljs-type">char</span>&gt;(c)));&#13;
      }&#13;
    }&#13;
  }&#13;
&#13;
  <span class="hljs-comment">// å¦‚æœç»“æœä¸ºç©ºï¼ˆæ¯”å¦‚è¾“å…¥å…¨æ˜¯ä¸‹åˆ’çº¿ï¼‰ï¼Œè¿”å›ç©ºä¸²</span>&#13;
  <span class="hljs-keyword">return</span> result;&#13;
}&#13;
&#13;
<span class="hljs-function">vector&lt;string&gt; <span class="hljs-title">QueryTableName</span><span class="hljs-params">(sqlite3* db)</span> </span>{&#13;
  vector&lt;string&gt; tableNames;&#13;
&#13;
  <span class="hljs-comment">// è·å–æ‰€æœ‰ç”¨æˆ·è¡¨</span>&#13;
  <span class="hljs-type">const</span> <span class="hljs-type">char</span>* sqlTables =&#13;
      <span class="hljs-string">"SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE "</span>&#13;
      <span class="hljs-string">"'sqlite_%';"</span>;&#13;
&#13;
  sqlite3_stmt* stmtTables;&#13;
  <span class="hljs-type">int</span> rc = <span class="hljs-built_in">sqlite3_prepare_v2</span>(db, sqlTables, <span class="hljs-number">-1</span>, &amp;stmtTables, <span class="hljs-literal">nullptr</span>);&#13;
&#13;
  <span class="hljs-keyword">if</span> (rc != SQLITE_OK) {&#13;
    std::cerr &lt;&lt; <span class="hljs-string">"Failed to fetch tables: "</span> &lt;&lt; <span class="hljs-built_in">sqlite3_errmsg</span>(db) &lt;&lt; <span class="hljs-string">"\n"</span>;&#13;
    <span class="hljs-keyword">return</span> tableNames;&#13;
  }&#13;
&#13;
  <span class="hljs-keyword">while</span> (<span class="hljs-built_in">sqlite3_step</span>(stmtTables) == SQLITE_ROW) {&#13;
    <span class="hljs-type">const</span> <span class="hljs-type">char</span>* tableNameCstr =&#13;
        <span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">const</span> <span class="hljs-type">char</span>*&gt;(<span class="hljs-built_in">sqlite3_column_text</span>(stmtTables, <span class="hljs-number">0</span>));&#13;
&#13;
    <span class="hljs-keyword">if</span> (!tableNameCstr) <span class="hljs-keyword">continue</span>;&#13;
&#13;
    tableNames.<span class="hljs-built_in">emplace_back</span>(tableNameCstr);&#13;
  }&#13;
  <span class="hljs-built_in">sqlite3_finalize</span>(stmtTables);&#13;
&#13;
  <span class="hljs-keyword">return</span> tableNames;&#13;
}&#13;
&#13;
<span class="hljs-function">string <span class="hljs-title">Read2String</span><span class="hljs-params">(filesystem::path&amp; filePath)</span> </span>{&#13;
  <span class="hljs-function">std::ifstream <span class="hljs-title">infile</span><span class="hljs-params">(filePath)</span></span>;&#13;
  <span class="hljs-keyword">if</span> (!infile) {&#13;
    <span class="hljs-keyword">return</span> {};&#13;
  }&#13;
  <span class="hljs-keyword">return</span> {(std::<span class="hljs-built_in">istreambuf_iterator</span>&lt;<span class="hljs-type">char</span>&gt;(infile)),&#13;
          std::<span class="hljs-built_in">istreambuf_iterator</span>&lt;<span class="hljs-type">char</span>&gt;()};&#13;
}&#13;
&#13;
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">WriteTableName</span><span class="hljs-params">(filesystem::path&amp; tableNameFile,&#13;
                    <span class="hljs-type">const</span> vector&lt;string&gt;&amp; tableNames)</span> </span>{&#13;
  std::ostringstream memStream;&#13;
&#13;
  memStream &lt;&lt; <span class="hljs-string">"#pragma once\n"</span>;&#13;
  memStream &lt;&lt; <span class="hljs-string">"\n"</span>;&#13;
  memStream &lt;&lt; <span class="hljs-string">"namespace Persistence {\n"</span>;&#13;
  memStream &lt;&lt; <span class="hljs-string">"\n"</span>;&#13;
  memStream &lt;&lt; <span class="hljs-string">"enum class TableName {\n"</span>;&#13;
&#13;
  <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; tableNames.<span class="hljs-built_in">size</span>(); ++i) {&#13;
    string line;&#13;
    <span class="hljs-keyword">if</span> (i == tableNames.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>) {&#13;
      line = std::format(<span class="hljs-string">"  {}\n"</span>, tableNames[i]);&#13;
    } <span class="hljs-keyword">else</span> {&#13;
      line = std::format(<span class="hljs-string">"  {},\n"</span>, tableNames[i]);&#13;
    }&#13;
    memStream &lt;&lt; line;&#13;
  }&#13;
  memStream &lt;&lt; <span class="hljs-string">"};\n"</span>;&#13;
  memStream &lt;&lt; <span class="hljs-string">"\n"</span>;&#13;
  memStream &lt;&lt; <span class="hljs-string">"}"</span>;&#13;
&#13;
  <span class="hljs-keyword">if</span> (memStream.<span class="hljs-built_in">str</span>() == <span class="hljs-built_in">Read2String</span>(tableNameFile)) {&#13;
    <span class="hljs-keyword">return</span>;&#13;
  }&#13;
&#13;
  <span class="hljs-function">ofstream <span class="hljs-title">file</span><span class="hljs-params">(tableNameFile)</span></span>;&#13;
  <span class="hljs-keyword">if</span> (!file) {&#13;
    std::cerr &lt;&lt; <span class="hljs-string">"Failed to open file '"</span> &lt;&lt; tableNameFile.<span class="hljs-built_in">generic_string</span>()&#13;
              &lt;&lt; <span class="hljs-string">"' for writing.\n"</span>;&#13;
    <span class="hljs-keyword">return</span>;&#13;
  }&#13;
&#13;
  file &lt;&lt; memStream.<span class="hljs-built_in">str</span>();&#13;
}&#13;
&#13;
<span class="hljs-function">vector&lt;string&gt; <span class="hljs-title">QueryFiledName</span><span class="hljs-params">(sqlite3* db, <span class="hljs-type">const</span> string&amp; tableName)</span> </span>{&#13;
  vector&lt;string&gt; filedNames;&#13;
&#13;
  <span class="hljs-type">const</span> string&amp; sql = <span class="hljs-string">"PRAGMA table_info("</span> + tableName + <span class="hljs-string">");"</span>;&#13;
  sqlite3_stmt* stmt;&#13;
  <span class="hljs-type">int</span> rc = <span class="hljs-built_in">sqlite3_prepare_v2</span>(db, sql.<span class="hljs-built_in">c_str</span>(), <span class="hljs-number">-1</span>, &amp;stmt, <span class="hljs-literal">nullptr</span>);&#13;
  <span class="hljs-keyword">if</span> (rc != SQLITE_OK) {&#13;
    std::cerr &lt;&lt; <span class="hljs-string">"Failed to get schema for table '"</span> &lt;&lt; tableName.<span class="hljs-built_in">c_str</span>()&#13;
              &lt;&lt; <span class="hljs-string">"': "</span> &lt;&lt; <span class="hljs-built_in">sqlite3_errmsg</span>(db) &lt;&lt; <span class="hljs-string">"\n"</span>;&#13;
    <span class="hljs-keyword">return</span> filedNames;&#13;
  }&#13;
&#13;
  <span class="hljs-keyword">while</span> (<span class="hljs-built_in">sqlite3_step</span>(stmt) == SQLITE_ROW) {&#13;
    <span class="hljs-type">const</span> <span class="hljs-type">char</span>* col_name = <span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">const</span> <span class="hljs-type">char</span>*&gt;(&#13;
        <span class="hljs-built_in">sqlite3_column_text</span>(stmt, <span class="hljs-number">1</span>));  <span class="hljs-comment">// ç¬¬1åˆ—æ˜¯name</span>&#13;
&#13;
    <span class="hljs-keyword">if</span> (col_name) {&#13;
      filedNames.<span class="hljs-built_in">emplace_back</span>(col_name);&#13;
    }&#13;
  }&#13;
&#13;
  <span class="hljs-built_in">sqlite3_finalize</span>(stmt);&#13;
&#13;
  <span class="hljs-keyword">return</span> filedNames;&#13;
}&#13;
&#13;
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">WriteFiledName</span><span class="hljs-params">(filesystem::path&amp; outSourceDir, <span class="hljs-type">const</span> string&amp; fileName,&#13;
                    <span class="hljs-type">const</span> vector&lt;string&gt;&amp; filedNames)</span> </span>{&#13;
  std::ostringstream memStream;&#13;
&#13;
  memStream &lt;&lt; <span class="hljs-string">"#pragma once\n"</span>;&#13;
  memStream &lt;&lt; <span class="hljs-string">"\n"</span>;&#13;
  memStream &lt;&lt; <span class="hljs-string">"namespace Persistence {\n"</span>;&#13;
  memStream &lt;&lt; <span class="hljs-string">"\n"</span>;&#13;
  memStream &lt;&lt; std::format(<span class="hljs-string">"enum class {} {{\n"</span>, fileName);&#13;
&#13;
  <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; filedNames.<span class="hljs-built_in">size</span>(); ++i) {&#13;
    string line;&#13;
    <span class="hljs-keyword">if</span> (i == filedNames.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>) {&#13;
      line = std::format(<span class="hljs-string">"  {}\n"</span>, filedNames[i]);&#13;
    } <span class="hljs-keyword">else</span> {&#13;
      line = std::format(<span class="hljs-string">"  {},\n"</span>, filedNames[i]);&#13;
    }&#13;
    memStream &lt;&lt; line;&#13;
  }&#13;
  memStream &lt;&lt; <span class="hljs-string">"};\n"</span>;&#13;
  memStream &lt;&lt; <span class="hljs-string">"\n"</span>;&#13;
  memStream &lt;&lt; <span class="hljs-string">"}"</span>;&#13;
&#13;
  filesystem::path filedNameFile = outSourceDir / (fileName + <span class="hljs-string">".h"</span>);&#13;
  <span class="hljs-keyword">if</span> (memStream.<span class="hljs-built_in">str</span>() == <span class="hljs-built_in">Read2String</span>(filedNameFile)) {&#13;
    <span class="hljs-keyword">return</span>;&#13;
  }&#13;
&#13;
  <span class="hljs-function">ofstream <span class="hljs-title">file</span><span class="hljs-params">(filedNameFile)</span></span>;&#13;
  <span class="hljs-keyword">if</span> (!file) {&#13;
    std::cerr &lt;&lt; <span class="hljs-string">"Failed to open file '"</span> &lt;&lt; filedNameFile.<span class="hljs-built_in">generic_string</span>()&#13;
              &lt;&lt; <span class="hljs-string">"' for writing.\n"</span>;&#13;
    <span class="hljs-keyword">return</span>;&#13;
  }&#13;
&#13;
  file &lt;&lt; memStream.<span class="hljs-built_in">str</span>();&#13;
}&#13;
&#13;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span>* argv[])</span> </span>{&#13;
<span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN32</span>&#13;
  <span class="hljs-built_in">SetConsoleOutputCP</span>(<span class="hljs-number">65001</span>);&#13;
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>&#13;
&#13;
  <span class="hljs-comment">//</span>&#13;
  <span class="hljs-keyword">if</span> (argc != <span class="hljs-number">3</span>) {&#13;
    std::cerr &lt;&lt; <span class="hljs-string">"Usage: "</span> &lt;&lt; argv[<span class="hljs-number">0</span>]&#13;
              &lt;&lt; <span class="hljs-string">" &lt;database_path&gt; &lt;output_directory&gt;\n"</span>;&#13;
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;&#13;
  }&#13;
&#13;
  <span class="hljs-comment">//</span>&#13;
  <span class="hljs-type">const</span> <span class="hljs-type">char</span>* dbPath = argv[<span class="hljs-number">1</span>];&#13;
  <span class="hljs-type">const</span> <span class="hljs-type">char</span>* outputDir = argv[<span class="hljs-number">2</span>];&#13;
  std::cout &lt;&lt; <span class="hljs-string">"Generating DB schema enums...\n"</span>;&#13;
  std::cout &lt;&lt; <span class="hljs-string">"  DB Path: "</span> &lt;&lt; dbPath &lt;&lt; <span class="hljs-string">"\n"</span>;&#13;
  std::cout &lt;&lt; <span class="hljs-string">"  Output : "</span> &lt;&lt; outputDir &lt;&lt; <span class="hljs-string">"\n"</span>;&#13;
  filesystem::path outSourceDir{outputDir};&#13;
&#13;
  sqlite3* db;&#13;
  <span class="hljs-type">int</span> rc = <span class="hljs-built_in">sqlite3_open</span>(dbPath, &amp;db);&#13;
&#13;
  <span class="hljs-keyword">if</span> (rc != SQLITE_OK) {&#13;
    std::cerr &lt;&lt; <span class="hljs-string">"Cannot open database: "</span> &lt;&lt; <span class="hljs-built_in">sqlite3_errmsg</span>(db) &lt;&lt; <span class="hljs-string">"\n"</span>;&#13;
    <span class="hljs-built_in">sqlite3_close</span>(db);&#13;
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;&#13;
  }&#13;
&#13;
  vector&lt;string&gt; tableNames = <span class="hljs-built_in">QueryTableName</span>(db);&#13;
  filesystem::path tableNameFile = outSourceDir / <span class="hljs-string">"TableName.h"</span>;&#13;
  <span class="hljs-built_in">WriteTableName</span>(tableNameFile, tableNames);&#13;
&#13;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> tableName : tableNames) {&#13;
    string fileName = <span class="hljs-string">"Table"</span> + <span class="hljs-built_in">ToPascalCase</span>(tableName) + <span class="hljs-string">"Field"</span>;&#13;
    <span class="hljs-built_in">WriteFiledName</span>(outSourceDir, fileName, <span class="hljs-built_in">QueryFiledName</span>(db, tableName));&#13;
  }&#13;
&#13;
  <span class="hljs-built_in">sqlite3_close</span>(db);&#13;
&#13;
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#13;
}
</code></pre>
<p>ä»£ç è™½ç„¶å¾ˆé•¿ï¼Œä½†æ˜¯å®ç°æ€è·¯å¾ˆç®€å•ï¼šæ—¢ç„¶è¦ä¿è¯ SQLite3 æ•°æ®åº“ä¸­çš„è¡¨æ ¼æ•°æ®ä¸æ˜ å°„çš„æšä¸¾ç±»ä¸€è‡´ï¼Œé‚£å°±è®©è¿™äº›æšä¸¾ç±»ä»£ç åœ¨æ„å»ºä¹‹å‰é€šè¿‡è¿™ä¸ª <code>Script/DbSchemaGenerator.cpp</code> å·¥å…·ç”Ÿæˆå°±å¯ä»¥äº†ï¼Œæ•°æ®åº“è¡¨çš„åç§°å’Œå­—æ®µåéƒ½å¯ä»¥é€šè¿‡è°ƒç”¨ç›¸åº”çš„ SQL è¯­å¥æ¥å®ç°ã€‚å½“ç„¶ï¼Œè¿™éœ€è¦å€ŸåŠ©äºæ„å»ºç³»ç»Ÿï¼Œå¯å‚ç…§<a href="https://link.juejin.cn?target=https%3A%2F%2Fcharlee44.com%2Fpost.html%3Fid%3D421b07cc6a3146b0852d6b7d42ffba6c" target="_blank" title="https://charlee44.com/post.html?id=421b07cc6a3146b0852d6b7d42ffba6c" ref="nofollow noopener noreferrer">ã€ŠCMake æ„å»ºå­¦ä¹ ç¬”è®° 31-æ„å»ºå‰æ‰§è¡Œå¯æ‰§è¡Œç¨‹åºã€‹</a>ã€‚</p>
<h3 data-id="heading-7">3.2 JOIN æŸ¥è¯¢</h3>
<p>å½“å‰ <code>Util::Statement::Query</code> åªæ”¯æŒ å•è¡¨æŸ¥è¯¢ï¼ˆFROM tableï¼‰ï¼Œé‚£ä¹ˆå¤æ‚çš„ JOIN æŸ¥è¯¢å¦‚ä½•å®ç°å‘¢ï¼Ÿä¸€èˆ¬æ¥è¯´ï¼Œ JOIN æ¶‰åŠå¤šè¡¨ã€åˆ«åã€å¤æ‚ SELECT åˆ—ç­‰ï¼Œæ— æ³•ç›´æ¥ç”¨â€œå­—æ®µæšä¸¾åˆ—è¡¨â€ç®€å•è¡¨è¾¾ï¼Œä¹Ÿå¾ˆéš¾ç”¨ä¸€ä¸ªå‡½æ•°ç”Ÿæˆæ‰€æœ‰ JOIN SQL ã€‚æœ€å¥½çš„åŠæ³•æ˜¯ä¸¤ç§æ–¹æ¡ˆå¹¶è¡Œï¼š</p>
<ol>
<li>ç®€å•å•è¡¨ CRUD : ç»§ç»­ç”¨ç°æœ‰çš„å®ç°ã€‚</li>
<li>å¤æ‚æŸ¥è¯¢ï¼ˆå« JOIN / å­æŸ¥è¯¢ / èšåˆï¼‰ï¼šå…è®¸æ‰‹å†™ SQL å­—ç¬¦ä¸²ï¼Œä½†å¤ç”¨ä½ å·²æœ‰çš„ QueryRows æ‰§è¡Œå¼•æ“ã€‚</li>
</ol>
<p>åœ¨ä¸»æµ Java åç«¯æ¡†æ¶ï¼ˆSpring Data JPAã€MyBatisï¼‰ä¸­ï¼Œè¿™ç§â€œç®€å•æ“ä½œç”¨ ORM è‡ªåŠ¨ç”Ÿæˆï¼Œå¤æ‚æŸ¥è¯¢å…è®¸æ‰‹å†™ SQLâ€çš„æ··åˆç­–ç•¥æ˜¯ä¸€ç§å¹¿æ³›é‡‡çº³çš„æœ€ä½³å®è·µã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šåœ¨å¼€å‘æ•ˆç‡ä¸æ§åˆ¶åŠ›ä¹‹é—´å–å¾—å¹³è¡¡â€”â€”æ—¢äº«å— ORM å¸¦æ¥çš„ç±»å‹å®‰å…¨ã€ä»£ç ç®€æ´å’Œå¿«é€Ÿå¼€å‘ä¼˜åŠ¿ï¼Œåˆä¸ç‰ºç‰²å¯¹å¤æ‚ SQL åœºæ™¯çš„å®Œå…¨æŒæ§èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-8">4. è¡¥å……</h2>
<p>ç¬”è€…çš„è¿™æ®µå®ç°åªèƒ½ç®—æ˜¯åŠè‡ªåŠ¨çš„ ORM é£æ ¼å°è£…ï¼Œæ²¡æœ‰å®ç°å…¨è‡ªåŠ¨çš„å¯¹è±¡ä¸æ•°æ®åº“è¡¨çš„æ˜ å°„ï¼ˆæ¯”å¦‚ä¸èƒ½ç›´æ¥ä¼ ä¸€ä¸ª <code>User</code> å¯¹è±¡å°±è‡ªåŠ¨æ’å…¥ï¼‰ï¼Œä½†å®ƒç¡®å®ä½“ç°äº†ä¸€äº› ORM çš„å…¸å‹è®¾è®¡æ€è·¯ï¼š</p>








































<table><thead><tr><th>ORM ç‰¹æ€§</th><th>æ˜¯å¦ä½“ç°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>âœ… <strong>éšè—åŸå§‹ SQL å­—ç¬¦ä¸²æ‹¼æ¥</strong></td><td>âœ”ï¸</td><td>ä½¿ç”¨ <code>Util::Statement</code> è‡ªåŠ¨ç”Ÿæˆå¸¦å ä½ç¬¦çš„ SQL</td></tr><tr><td>âœ… <strong>å‚æ•°ç»‘å®šé˜²æ³¨å…¥</strong></td><td>âœ”ï¸</td><td>å…¨éƒ¨ä½¿ç”¨ <code>sqlite3_bind_*</code>ï¼Œå®‰å…¨</td></tr><tr><td>âœ… <strong>å­—æ®µåç±»å‹å®‰å…¨</strong></td><td>âœ”ï¸</td><td>ç”¨æšä¸¾ + <code>magic_enum</code> ä»£æ›¿å­—ç¬¦ä¸² <code>"name"</code>ï¼Œé¿å…æ‹¼é”™</td></tr><tr><td>âœ… <strong>CRUD æŠ½è±¡ä¸ºå‡½æ•°</strong></td><td>âœ”ï¸</td><td><code>InsertRow</code>, <code>QueryRows</code> ç­‰æä¾›ç»Ÿä¸€æ¥å£</td></tr><tr><td>âŒ <strong>å¯¹è±¡è‡ªåŠ¨æ˜ å°„</strong></td><td>âœ–ï¸</td><td>ä»éœ€æ‰‹åŠ¨æ„é€  <code>vector</code>ï¼Œä¸èƒ½ç›´æ¥ä¼ å¯¹è±¡</td></tr><tr><td>âŒ <strong>è‡ªåŠ¨ç”Ÿæˆ SQLï¼ˆåŸºäºå¯¹è±¡ï¼‰</strong></td><td>âœ–ï¸</td><td>SQL ç”±å·¥å…·å‡½æ•°ç”Ÿæˆï¼Œä½†éœ€æ˜¾å¼æŒ‡å®šå­—æ®µåˆ—è¡¨</td></tr></tbody></table>
<p>ä¸åŒçš„ç¼–ç¨‹è¯­è¨€æœ‰ç€å„è‡ªé€‚ç”¨çš„ç¼–ç¨‹èŒƒå¼ï¼Œç›²ç›®ç…§æ¬å…¶ä»–ç”Ÿæ€çš„å…¨è‡ªåŠ¨ ORM æ¨¡å¼å¹¶ä¸å¯å–â€”â€”å®ƒä¸ä»…å¯èƒ½å¼•å…¥ä¸å¿…è¦çš„æ€§èƒ½å¼€é”€ï¼Œè¿˜å¯èƒ½ä¸è¯­è¨€ç‰¹æ€§æ ¼æ ¼ä¸å…¥ã€‚å½’æ ¹ç»“åº•ï¼Œåªè¦èƒ½ä»¥åˆç†ã€å®‰å…¨ä¸”å¯ç»´æŠ¤çš„æ–¹å¼è§£å†³é—®é¢˜ï¼Œå°±æ˜¯å¥½çš„è®¾è®¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RxJavaï¼šå“åº”å¼ç¼–ç¨‹]]></title>    <link>https://juejin.cn/post/7587254134401810441</link>    <guid>https://juejin.cn/post/7587254134401810441</guid>    <pubDate>2025-12-25T00:58:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587254134401810441" data-draft-id="7587246055457357851" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RxJavaï¼šå“åº”å¼ç¼–ç¨‹"/> <meta itemprop="keywords" content="RxJava"/> <meta itemprop="datePublished" content="2025-12-25T00:58:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ä¸­é£˜è¡çš„è®°å¿†"/> <meta itemprop="url" content="https://juejin.cn/user/694547077666606"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RxJavaï¼šå“åº”å¼ç¼–ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547077666606/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ä¸­é£˜è¡çš„è®°å¿†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T00:58:36.000Z" title="Thu Dec 25 2025 00:58:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡æ·±å…¥è®²è§£ReactiveXæ——ä¸‹çš„RxJavaæ¡†æ¶ï¼Œä»æ ¸å¿ƒæ¦‚å¿µåˆ°å®æˆ˜åº”ç”¨ï¼Œå¸®åŠ©ä½ æŒæ¡å“åº”å¼ç¼–ç¨‹çš„ç²¾é«“ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€å¼•è¨€ï¼šä¸ºä»€ä¹ˆé€‰æ‹©RxJava</h2>
<p>åœ¨ç°ä»£è½¯ä»¶å¼€å‘ä¸­,å¼‚æ­¥ç¼–ç¨‹å·²æˆä¸ºå¿…ä¸å¯å°‘çš„æŠ€èƒ½ã€‚ä¼ ç»Ÿçš„å›è°ƒã€çº¿ç¨‹ç®¡ç†å¤æ‚ç­‰é—®é¢˜ä¸€ç›´å›°æ‰°ç€å¼€å‘è€…ã€‚<strong>RxJava</strong>(Reactive Extensions for Java)æä¾›äº†ä¸€ç§ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆ,è®©å¼‚æ­¥ç¼–ç¨‹å˜å¾—ç®€å•è€Œå¼ºå¤§ã€‚</p>
<h2 data-id="heading-1">RxJavaçš„æ ¸å¿ƒä¼˜åŠ¿</h2>
<pre><code class="hljs">å£°æ˜å¼ç¼–ç¨‹ - ä»¥æ•°æ®æµçš„æ–¹å¼æè¿°ä¸šåŠ¡é€»è¾‘
é“¾å¼è°ƒç”¨ - æ“ä½œç¬¦ç»„åˆ,ä»£ç ç®€æ´æ˜“è¯»
å¼ºå¤§çš„æ“ä½œç¬¦ - 100+æ“ä½œç¬¦æ»¡è¶³å„ç§åœºæ™¯
çº¿ç¨‹è°ƒåº¦çµæ´» - è½»æ¾åˆ‡æ¢æ‰§è¡Œçº¿ç¨‹
é”™è¯¯å¤„ç†ä¼˜é›… - ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†æœºåˆ¶
èƒŒå‹æ”¯æŒ - Flowableå¤„ç†æ•°æ®æµé€Ÿæ§åˆ¶
</code></pre>
<h2 data-id="heading-2">äºŒã€æ ¸å¿ƒæ¶æ„è§£æ</h2>
<p>RxJavaåŸºäºè§‚å¯Ÿè€…æ¨¡å¼,é‡‡ç”¨å“åº”å¼ç¼–ç¨‹æ€æƒ³,æ ¸å¿ƒç”±å››å¤§ç»„ä»¶æ„æˆã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41543a16fd8d41d89e952a4f3d5bbb60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767229115&amp;x-signature=BP9x7etaZ9DWyREWCQtxUXXoVZA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">æ ¸å¿ƒç»„ä»¶è¯¦è§£</h2>
<p><strong>Observable(è¢«è§‚å¯Ÿè€…)</strong></p>
<p>æ•°æ®æº,è´Ÿè´£å‘å°„æ•°æ®æµã€‚Observableæ˜¯æ•´ä¸ªå“åº”å¼æµçš„èµ·ç‚¹,å®ƒè´Ÿè´£äº§ç”Ÿæ•°æ®å¹¶å‘é€ç»™è®¢é˜…è€…ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">publicabstractclassObservable&lt;T&gt; 
    implementsObservableSource&lt;T&gt; {

    <span class="hljs-built_in">publicfinalvoidsubscribe</span>(
        Observer&lt;? super T&gt; observer) {
        <span class="hljs-built_in">subscribeActual</span>(observer);
    }
    <span class="hljs-built_in">protectedabstractvoidsubscribeActual</span>(
        Observer&lt;? super T&gt; observer);
}
</code></pre>
<p><strong>Observer(è§‚å¯Ÿè€…)</strong></p>
<p>æ•°æ®æ¶ˆè´¹è€…,æ¥æ”¶å¹¶å¤„ç†æ•°æ®ã€‚Observerå®šä¹‰äº†å››ä¸ªæ ¸å¿ƒæ–¹æ³•æ¥å¤„ç†æ•°æ®æµçš„ä¸åŒçŠ¶æ€ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">Observer</span>&lt;<span class="hljs-title">T</span>&gt; {
    <span class="hljs-comment">// è®¢é˜…å¼€å§‹</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onSubscribe</span>(<span class="hljs-params">Disposable d</span>)</span>;

    <span class="hljs-comment">// æ¥æ”¶æ•°æ®</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onNext</span>(<span class="hljs-params">T t</span>)</span>;

    <span class="hljs-comment">// å‘ç”Ÿé”™è¯¯</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onError</span>(<span class="hljs-params">Throwable e</span>)</span>;

    <span class="hljs-comment">// å®Œæˆ</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onComplete</span>()</span>;
}
</code></pre>
<p><strong>Operators(æ“ä½œç¬¦)</strong></p>
<p>ç”¨äºè½¬æ¢ã€è¿‡æ»¤ã€ç»„åˆæ•°æ®æµçš„ä¸­é—´æ“ä½œã€‚æ“ä½œç¬¦æ˜¯RxJavaçš„ç²¾é«“,æä¾›äº†ä¸°å¯Œçš„æ•°æ®å¤„ç†èƒ½åŠ›ã€‚</p>
<p><strong>Schedulers(è°ƒåº¦å™¨)</strong></p>
<p>æ§åˆ¶Observableå’ŒObserveråœ¨å“ªä¸ªçº¿ç¨‹æ‰§è¡Œ,å®ç°çµæ´»çš„çº¿ç¨‹è°ƒåº¦ã€‚</p>
<h2 data-id="heading-4">æ•°æ®æµç±»å‹</h2>
<p>RxJava 3æä¾›äº†5ç§ä¸»è¦çš„æ•°æ®æµç±»å‹,æ¯ç§ç±»å‹é€‚ç”¨äºä¸åŒçš„åœºæ™¯ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">Observable - å‘å°„<span class="hljs-number">0</span>åˆ°Nä¸ªæ•°æ®é¡¹,ä¸æ”¯æŒèƒŒå‹,é€‚ç”¨äºé€šç”¨åœºæ™¯
Flowable - å‘å°„<span class="hljs-number">0</span>åˆ°Nä¸ªæ•°æ®é¡¹,æ”¯æŒèƒŒå‹,é€‚ç”¨äºå¤§æ•°æ®é‡åœºæ™¯
<span class="hljs-type">Single</span> - åªå‘å°„<span class="hljs-number">1</span>ä¸ªæ•°æ®é¡¹,é€‚ç”¨äºå•ä¸€ç»“æœåœºæ™¯å¦‚ç½‘ç»œè¯·æ±‚
Maybe - å‘å°„<span class="hljs-number">0</span>æˆ–<span class="hljs-number">1</span>ä¸ªæ•°æ®é¡¹,é€‚ç”¨äºå¯èƒ½æœ‰ç»“æœçš„åœºæ™¯
Completable - ä¸å‘å°„æ•°æ®,åªå…³å¿ƒå®ŒæˆçŠ¶æ€
</code></pre>
<h2 data-id="heading-5">ä¸‰ã€å¿«é€Ÿä¸Šæ‰‹ï¼šåŸºç¡€ç”¨æ³•</h2>
<h2 data-id="heading-6">åˆ›å»ºObservableçš„å¤šç§æ–¹å¼</h2>
<p><strong>æ–¹å¼1ï¼šjust - å‘å°„å›ºå®šçš„æ•°æ®é¡¹</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">Observable&lt;<span class="hljs-type">String</span>&gt; observable1 = 
    Observable.<span class="hljs-built_in">just</span>(<span class="hljs-string">"Hello"</span>, <span class="hljs-string">"RxJava"</span>);
</code></pre>
<p><strong>æ–¹å¼2ï¼šfrom - ä»æ•°ç»„æˆ–é›†åˆåˆ›å»º</strong></p>
<pre><code class="hljs language-ini" lang="ini">List&lt;Integer&gt; <span class="hljs-attr">numbers</span> = Arrays.asList(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)<span class="hljs-comment">;</span>
Observable&lt;Integer&gt; <span class="hljs-attr">observable2</span> = 
    Observable.fromIterable(numbers)<span class="hljs-comment">;</span>
</code></pre>
<p><strong>æ–¹å¼3ï¼šcreate - è‡ªå®šä¹‰å‘å°„é€»è¾‘</strong></p>
<pre><code class="hljs language-ini" lang="ini">Observable&lt;String&gt; <span class="hljs-attr">observable3</span> = 
    Observable.create(emitter -&gt; {
        emitter.onNext("Data 1")<span class="hljs-comment">;</span>
        emitter.onNext("Data 2")<span class="hljs-comment">;</span>
        emitter.onComplete()<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>
</code></pre>
<p><strong>æ–¹å¼4ï¼šinterval - å®šæ—¶å‘å°„</strong></p>
<pre><code class="hljs language-ini" lang="ini">Observable&lt;Long&gt; <span class="hljs-attr">observable4</span> = 
    Observable.interval(1, TimeUnit.SECONDS)<span class="hljs-comment">;</span>
</code></pre>
<p><strong>æ–¹å¼5ï¼šrange - å‘å°„ä¸€ç³»åˆ—æ•´æ•°</strong></p>
<pre><code class="hljs language-ini" lang="ini">Observable&lt;Integer&gt; <span class="hljs-attr">observable5</span> = 
    Observable.range(1, 10)<span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-7">è®¢é˜…Observable</h2>
<p>å®Œæ•´çš„è®¢é˜…ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title class_">Observable</span>.<span class="hljs-title function_">just</span>(<span class="hljs-string">"Apple"</span>, <span class="hljs-string">"Banana"</span>, <span class="hljs-string">"Orange"</span>)
    .<span class="hljs-title function_">subscribe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Observer</span>&lt;<span class="hljs-title class_">String</span>&gt;() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">onSubscribe</span>(<span class="hljs-params">Disposable d</span>) {
            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å¼€å§‹è®¢é˜…"</span>);
        }
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">onNext</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> item</span>) {
            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"æ”¶åˆ°æ•°æ®: "</span> + item);
        }
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">onError</span>(<span class="hljs-params">Throwable e</span>) {
            <span class="hljs-title class_">System</span>.<span class="hljs-property">err</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å‘ç”Ÿé”™è¯¯: "</span> 
                + e.<span class="hljs-title function_">getMessage</span>());
        }
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">onComplete</span>(<span class="hljs-params"/>) {
            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å®Œæˆ"</span>);
        }
    });
</code></pre>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">å¼€å§‹è®¢é˜…æ”¶åˆ°æ•°æ®: Appleæ”¶åˆ°æ•°æ®: Bananaæ”¶åˆ°æ•°æ®: Orangeå®Œæˆ</span>
</code></pre>
<h2 data-id="heading-8">ç®€åŒ–çš„è®¢é˜…æ–¹å¼</h2>
<p>å®é™…å¼€å‘ä¸­,æˆ‘ä»¬ç»å¸¸ä½¿ç”¨Lambdaè¡¨è¾¾å¼ç®€åŒ–è®¢é˜…ä»£ç ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// åªå¤„ç†onNext</span>
Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
    .subscribe(item -&gt; System.out.<span class="hljs-built_in">println</span>(item));
<span class="hljs-comment">// å¤„ç†onNextå’ŒonError</span>
Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
    .subscribe(
        item -&gt; System.out.<span class="hljs-built_in">println</span>(item),
        <span class="hljs-type">error</span> -&gt; System.err.<span class="hljs-built_in">println</span>(<span class="hljs-type">error</span>)
    );
<span class="hljs-comment">// å¤„ç†onNextã€onErrorå’ŒonComplete</span>
Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
    .subscribe(
        item -&gt; System.out.<span class="hljs-built_in">println</span>(item),
        <span class="hljs-type">error</span> -&gt; System.err.<span class="hljs-built_in">println</span>(<span class="hljs-type">error</span>),
        () -&gt; System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">"å®Œæˆ"</span>)
    );
</code></pre>
<h2 data-id="heading-9">å››ã€æ“ä½œç¬¦è¯¦è§£ï¼šæ•°æ®å˜æ¢çš„è‰ºæœ¯</h2>
<p>æ“ä½œç¬¦æ˜¯RxJavaçš„æ ¸å¿ƒ,æŒæ¡å¸¸ç”¨æ“ä½œç¬¦æ˜¯ä½¿ç”¨RxJavaçš„å…³é”®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b1e3e59377d45e9b282f665f77832e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767229115&amp;x-signature=tI9WOEJpRy2LU%2FuLGhsutJhtTXM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-10">åˆ›å»ºæ“ä½œç¬¦</h2>
<p>åˆ›å»ºæ“ä½œç¬¦ç”¨äºç”ŸæˆObservableæ•°æ®æºï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// just - å‘å°„é¢„å®šä¹‰çš„æ•°æ®é¡¹</span>
Observable<span class="hljs-selector-class">.just</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);
<span class="hljs-comment">// fromArray - ä»æ•°ç»„åˆ›å»º</span>
Integer<span class="hljs-selector-attr">[]</span> array = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>};
Observable<span class="hljs-selector-class">.fromArray</span>(array);
<span class="hljs-comment">// fromCallable - å»¶è¿Ÿæ‰§è¡Œ</span>
Observable<span class="hljs-selector-class">.fromCallable</span>(() -&gt; {
    <span class="hljs-comment">// åªæœ‰è®¢é˜…æ—¶æ‰æ‰§è¡Œ</span>
    return <span class="hljs-built_in">expensiveOperation</span>();
});
<span class="hljs-comment">// defer - ä¸ºæ¯ä¸ªè®¢é˜…è€…åˆ›å»ºæ–°çš„Observable</span>
Observable<span class="hljs-selector-class">.defer</span>(() -&gt; 
    Observable<span class="hljs-selector-class">.just</span>(System.currentTimeMillis()));
</code></pre>
<h2 data-id="heading-11">è½¬æ¢æ“ä½œç¬¦</h2>
<p><strong>map - ä¸€å¯¹ä¸€è½¬æ¢</strong></p>
<p>æœ€å¸¸ç”¨çš„è½¬æ¢æ“ä½œç¬¦,å°†æ¯ä¸ªæ•°æ®é¡¹è½¬æ¢ä¸ºå¦ä¸€ç§å½¢å¼ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">Observable<span class="hljs-selector-class">.just</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
    <span class="hljs-selector-class">.map</span>(number -&gt; number * <span class="hljs-number">2</span>)
    <span class="hljs-selector-class">.subscribe</span>(System.out::println);
<span class="hljs-comment">// è¾“å‡º: 2, 4, 6, 8, 10</span>
</code></pre>
<p><strong>flatMap - ä¸€å¯¹å¤šè½¬æ¢å¹¶åˆå¹¶</strong></p>
<p>é€‚ç”¨äºéœ€è¦ä¸ºæ¯ä¸ªæ•°æ®é¡¹å‘èµ·å¼‚æ­¥æ“ä½œçš„åœºæ™¯ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// åœºæ™¯ï¼šæœç´¢ç”¨æˆ·å¹¶è·å–æ¯ä¸ªç”¨æˆ·çš„è®¢å•</span>
Observable.just(<span class="hljs-string">"user1"</span>, <span class="hljs-string">"user2"</span>, <span class="hljs-string">"user3"</span>)
    .flatMap(userId -&gt; {
        <span class="hljs-comment">// ä¸ºæ¯ä¸ªç”¨æˆ·å‘èµ·ç½‘ç»œè¯·æ±‚</span>
        <span class="hljs-keyword">return</span> getUserOrders(userId);
    })
    .subscribe(order -&gt; 
        System.<span class="hljs-keyword">out</span>.println(order));
</code></pre>
<p><strong>concatMap - é¡ºåºçš„flatMap</strong></p>
<p>å½“éœ€è¦ä¿è¯æ‰§è¡Œé¡ºåºæ—¶ä½¿ç”¨concatMapï¼š</p>
<pre><code class="hljs language-scss" lang="scss">Observable<span class="hljs-selector-class">.just</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
    <span class="hljs-selector-class">.concatMap</span>(i -&gt; Observable.just(i * <span class="hljs-number">10</span>)
        <span class="hljs-selector-class">.delay</span>(<span class="hljs-number">100</span>, TimeUnit.MILLISECONDS))
    <span class="hljs-selector-class">.subscribe</span>(System.out::println);
<span class="hljs-comment">// è¾“å‡ºä¸¥æ ¼æŒ‰é¡ºåº: 10, 20, 30</span>
</code></pre>
<h2 data-id="heading-12">è¿‡æ»¤æ“ä½œç¬¦</h2>
<p>è¿‡æ»¤æ“ä½œç¬¦ç”¨äºç­›é€‰æ•°æ®æµä¸­çš„æ•°æ®ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// filter - è¿‡æ»¤æ•°æ®</span>
Observable<span class="hljs-selector-class">.range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)
    <span class="hljs-selector-class">.filter</span>(number -&gt; number % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>)
    <span class="hljs-selector-class">.subscribe</span>(System.out::println);
<span class="hljs-comment">// è¾“å‡º: 2, 4, 6, 8, 10</span>
<span class="hljs-comment">// take - åªå–å‰Nä¸ª</span>
Observable<span class="hljs-selector-class">.range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">100</span>)
    <span class="hljs-selector-class">.take</span>(<span class="hljs-number">5</span>)
    <span class="hljs-selector-class">.subscribe</span>(System.out::println);
<span class="hljs-comment">// è¾“å‡º: 1, 2, 3, 4, 5</span>
<span class="hljs-comment">// skip - è·³è¿‡å‰Nä¸ª</span>
Observable<span class="hljs-selector-class">.range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)
    <span class="hljs-selector-class">.skip</span>(<span class="hljs-number">5</span>)
    <span class="hljs-selector-class">.subscribe</span>(System.out::println);
<span class="hljs-comment">// è¾“å‡º: 6, 7, 8, 9, 10</span>
<span class="hljs-comment">// distinct - å»é‡</span>
Observable<span class="hljs-selector-class">.just</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>)
    <span class="hljs-selector-class">.distinct</span>()
    <span class="hljs-selector-class">.subscribe</span>(System.out::println);
<span class="hljs-comment">// è¾“å‡º: 1, 2, 3, 4</span>
</code></pre>
<p><strong>debounce - é˜²æŠ–(æœç´¢æ¡†å¸¸ç”¨)</strong></p>
<p>åœ¨ç”¨æˆ·åœæ­¢è¾“å…¥ä¸€æ®µæ—¶é—´åæ‰è§¦å‘æœç´¢,é¿å…é¢‘ç¹è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">Observable<span class="hljs-selector-class">.create</span>(emitter -&gt; {
    emitter.onNext("a");
    Thread<span class="hljs-selector-class">.sleep</span>(<span class="hljs-number">100</span>);
    emitter<span class="hljs-selector-class">.onNext</span>("ab");
    Thread<span class="hljs-selector-class">.sleep</span>(<span class="hljs-number">100</span>);
    emitter<span class="hljs-selector-class">.onNext</span>("abc");
    Thread<span class="hljs-selector-class">.sleep</span>(<span class="hljs-number">500</span>); <span class="hljs-comment">// åœé¡¿è¶…è¿‡300ms</span>
    emitter<span class="hljs-selector-class">.onComplete</span>();
})
<span class="hljs-selector-class">.debounce</span>(<span class="hljs-number">300</span>, TimeUnit.MILLISECONDS)
<span class="hljs-selector-class">.subscribe</span>(System.out::println);
<span class="hljs-comment">// åªè¾“å‡º: abc</span>
</code></pre>
<h2 data-id="heading-13">ç»„åˆæ“ä½œç¬¦</h2>
<p>ç»„åˆæ“ä½œç¬¦ç”¨äºåˆå¹¶å¤šä¸ªæ•°æ®æºï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// merge - åˆå¹¶å¤šä¸ªObservable
Observable&lt;String&gt; <span class="hljs-attr">obs1</span> = Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>)<span class="hljs-comment">;</span>
Observable&lt;String&gt; <span class="hljs-attr">obs2</span> = Observable.just(<span class="hljs-string">"C"</span>, <span class="hljs-string">"D"</span>)<span class="hljs-comment">;</span>
Observable.merge(obs1, obs2)
    .subscribe(System.out::println)<span class="hljs-comment">;</span>
// è¾“å‡º: A, B, C, D(é¡ºåºä¸ä¿è¯)
// zip - ç»„åˆå¯¹åº”ä½ç½®çš„æ•°æ®
Observable&lt;Integer&gt; <span class="hljs-attr">numbers</span> = 
    Observable.just(1, 2, 3)<span class="hljs-comment">;</span>
Observable&lt;String&gt; <span class="hljs-attr">letters</span> = 
    Observable.just("A", "B", "C")<span class="hljs-comment">;</span>
Observable.zip(numbers, letters,
    (number, letter) -&gt; number + letter)
    .subscribe(System.out::println)<span class="hljs-comment">;</span>
// è¾“å‡º: 1A, 2B, 3C
// combineLatest - ä»»ä¸€æ•°æ®æºå˜åŒ–æ—¶ç»„åˆæœ€æ–°å€¼
Observable&lt;Long&gt; <span class="hljs-attr">timer1</span> = 
    Observable.interval(1, TimeUnit.SECONDS)<span class="hljs-comment">;</span>
Observable&lt;Long&gt; <span class="hljs-attr">timer2</span> = 
    Observable.interval(2, TimeUnit.SECONDS)<span class="hljs-comment">;</span>
Observable.combineLatest(timer1, timer2,
    (t1, t2) -&gt; "T1:" + t1 + " T2:" + t2)
    .subscribe(System.out::println)<span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-14">é”™è¯¯å¤„ç†æ“ä½œç¬¦</h2>
<p>ä¼˜é›…çš„é”™è¯¯å¤„ç†æ˜¯RxJavaçš„ä¸€å¤§ä¼˜åŠ¿ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// onErrorReturn - é”™è¯¯æ—¶è¿”å›é»˜è®¤å€¼</span>
Observable.<span class="hljs-title function_ invoke__">create</span>(emitter -&gt; {
    emitter.<span class="hljs-title function_ invoke__">onNext</span>(<span class="hljs-number">1</span>);
    emitter.<span class="hljs-title function_ invoke__">onNext</span>(<span class="hljs-number">2</span>);
    emitter.<span class="hljs-title function_ invoke__">onError</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Exception</span>(<span class="hljs-string">"å‡ºé”™äº†"</span>));
})
.<span class="hljs-title function_ invoke__">onErrorReturn</span>(throwable -&gt; -<span class="hljs-number">1</span>)
.<span class="hljs-title function_ invoke__">subscribe</span>(System.out::<span class="hljs-variable constant_">println</span>);
<span class="hljs-comment">// è¾“å‡º: 1, 2, -1</span>
<span class="hljs-comment">// onErrorResumeNext - é”™è¯¯æ—¶åˆ‡æ¢åˆ°å¦ä¸€ä¸ªObservable</span>
Observable.<span class="hljs-title function_ invoke__">create</span>(emitter -&gt; {
    emitter.<span class="hljs-title function_ invoke__">onNext</span>(<span class="hljs-string">"A"</span>);
    emitter.<span class="hljs-title function_ invoke__">onError</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Exception</span>(<span class="hljs-string">"å‡ºé”™"</span>));
})
.<span class="hljs-title function_ invoke__">onErrorResumeNext</span>(Observable.<span class="hljs-title function_ invoke__">just</span>(<span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>))
.<span class="hljs-title function_ invoke__">subscribe</span>(System.out::<span class="hljs-variable constant_">println</span>);
<span class="hljs-comment">// è¾“å‡º: A, B, C</span>
<span class="hljs-comment">// retry - é‡è¯•</span>
AtomicInteger count = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(<span class="hljs-number">0</span>);
Observable.<span class="hljs-title function_ invoke__">create</span>(emitter -&gt; {
    <span class="hljs-keyword">int</span> attempt = count.<span class="hljs-title function_ invoke__">incrementAndGet</span>();
    System.out.<span class="hljs-title function_ invoke__">println</span>(<span class="hljs-string">"å°è¯•æ¬¡æ•°: "</span> + attempt);
    <span class="hljs-keyword">if</span> (attempt &lt; <span class="hljs-number">3</span>) {
        emitter.<span class="hljs-title function_ invoke__">onError</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Exception</span>(<span class="hljs-string">"å¤±è´¥"</span>));
    } <span class="hljs-keyword">else</span> {
        emitter.<span class="hljs-title function_ invoke__">onNext</span>(<span class="hljs-string">"æˆåŠŸ"</span>);
        emitter.<span class="hljs-title function_ invoke__">onComplete</span>();
    }
})
.<span class="hljs-title function_ invoke__">retry</span>(<span class="hljs-number">3</span>)
.<span class="hljs-title function_ invoke__">subscribe</span>(System.out::<span class="hljs-variable constant_">println</span>);
</code></pre>
<h2 data-id="heading-15">äº”ã€çº¿ç¨‹è°ƒåº¦ï¼šæŒæ§å¼‚æ­¥æ‰§è¡Œ</h2>
<p>åˆç†çš„çº¿ç¨‹è°ƒåº¦æ˜¯ä¿è¯åº”ç”¨æ€§èƒ½çš„å…³é”®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb071d1ad42248888b67dd88baf8f96b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767229115&amp;x-signature=sBUfoH7pYnz0CowPVfnDVTGCG3E%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-16">Schedulersç±»å‹</h2>
<p>RxJavaæä¾›äº†å¤šç§è°ƒåº¦å™¨,æ¯ç§é€‚ç”¨äºä¸åŒçš„åœºæ™¯ï¼š</p>
<p><strong>Schedulers.io() - IOå¯†é›†å‹ä»»åŠ¡</strong></p>
<p>é€‚ç”¨äºç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å†™ç­‰IOæ“ä½œï¼š</p>
<pre><code class="hljs language-scss" lang="scss">Observable<span class="hljs-selector-class">.fromCallable</span>(() -&gt; {
    <span class="hljs-comment">// ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å†™</span>
    return <span class="hljs-built_in">downloadFile</span>();
})
<span class="hljs-selector-class">.subscribeOn</span>(Schedulers.io())
<span class="hljs-selector-class">.subscribe</span>(result -&gt; System.out.println(result));
</code></pre>
<p><strong>Schedulers.computation() - è®¡ç®—å¯†é›†å‹</strong></p>
<p>é€‚ç”¨äºCPUå¯†é›†å‹è®¡ç®—ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">Observable<span class="hljs-selector-class">.range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1000000</span>)
    <span class="hljs-selector-class">.map</span>(i -&gt; i * i)
    <span class="hljs-selector-class">.subscribeOn</span>(Schedulers.computation())
    <span class="hljs-selector-class">.subscribe</span>();
</code></pre>
<p><strong>Schedulers.newThread() - æ¯æ¬¡åˆ›å»ºæ–°çº¿ç¨‹</strong></p>
<pre><code class="hljs language-scss" lang="scss">Observable<span class="hljs-selector-class">.just</span>(<span class="hljs-number">1</span>)
    <span class="hljs-selector-class">.subscribeOn</span>(Schedulers.newThread())
    <span class="hljs-selector-class">.subscribe</span>();
</code></pre>
<p><strong>Schedulers.single() - å•çº¿ç¨‹æ‰§è¡Œ</strong></p>
<pre><code class="hljs language-scss" lang="scss">Observable<span class="hljs-selector-class">.just</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
    <span class="hljs-selector-class">.subscribeOn</span>(Schedulers.single())
    <span class="hljs-selector-class">.subscribe</span>();
</code></pre>
<p><strong>AndroidSchedulers.mainThread() - Androidä¸»çº¿ç¨‹</strong></p>
<p>åœ¨Androidå¼€å‘ä¸­æ›´æ–°UIæ—¶ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">Observable.<span class="hljs-built_in">just</span>(<span class="hljs-string">"æ›´æ–°UI"</span>)
    .<span class="hljs-built_in">observeOn</span>(AndroidSchedulers.<span class="hljs-built_in">mainThread</span>())
    .<span class="hljs-built_in">subscribe</span>(text -&gt; textView.<span class="hljs-built_in">setText</span>(text));
</code></pre>
<h2 data-id="heading-17">subscribeOn vs observeOn</h2>
<p>ç†è§£è¿™ä¸¤ä¸ªæ–¹æ³•çš„åŒºåˆ«æ˜¯æŒæ¡çº¿ç¨‹è°ƒåº¦çš„å…³é”®ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">Observable</span><span class="hljs-selector-class">.just</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
    <span class="hljs-selector-class">.subscribeOn</span>(Schedulers.<span class="hljs-built_in">io</span>())        
    <span class="hljs-comment">// æŒ‡å®šæ•°æ®æºåœ¨IOçº¿ç¨‹</span>
    <span class="hljs-selector-class">.map</span>(number -&gt; {
        <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"mapçº¿ç¨‹: "</span> +
            Thread.<span class="hljs-built_in">currentThread</span>().<span class="hljs-built_in">getName</span>());
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">number</span> * <span class="hljs-number">2</span>;
    })
    <span class="hljs-selector-class">.observeOn</span>(Schedulers.<span class="hljs-built_in">computation</span>()) 
    <span class="hljs-comment">// åˆ‡æ¢åˆ°è®¡ç®—çº¿ç¨‹</span>
    <span class="hljs-selector-class">.filter</span>(number -&gt; {
        <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"filterçº¿ç¨‹: "</span> +
            Thread.<span class="hljs-built_in">currentThread</span>().<span class="hljs-built_in">getName</span>());
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">number</span> &gt; <span class="hljs-number">2</span>;
    })
    <span class="hljs-selector-class">.observeOn</span>(Schedulers.<span class="hljs-built_in">newThread</span>())   
    <span class="hljs-comment">// å†æ¬¡åˆ‡æ¢çº¿ç¨‹</span>
    <span class="hljs-selector-class">.subscribe</span>(number -&gt; {
        <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"subscribeçº¿ç¨‹: "</span> +
            Thread.<span class="hljs-built_in">currentThread</span>().<span class="hljs-built_in">getName</span>());
        <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">"ç»“æœ: "</span> + number);
    });
</code></pre>
<p><strong>å…³é”®åŒºåˆ«ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">subscribeOn - æŒ‡å®šObservableè‡ªèº«åœ¨å“ªä¸ªçº¿ç¨‹æ‰§è¡Œ(åªæœ‰ç¬¬ä¸€æ¬¡æœ‰æ•ˆ)
observeOn - æŒ‡å®šåç»­æ“ä½œåœ¨å“ªä¸ªçº¿ç¨‹æ‰§è¡Œ(å¯å¤šæ¬¡ä½¿ç”¨)
</code></pre>
<h2 data-id="heading-18">å…­ã€å®æˆ˜åº”ç”¨ï¼šç»“åˆRetrofit</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4add11d9ab44a3eb8267a80702bf922~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767229115&amp;x-signature=o8%2FzQhx%2BtYLJNOZXpZug75R063o%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-19">ç½‘ç»œè¯·æ±‚ - ç»“åˆRetrofit</h2>
<p><strong>APIæ¥å£å®šä¹‰ï¼š</strong></p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">interface</span> <span class="hljs-selector-tag">ApiService</span> {
    <span class="hljs-variable">@GET</span>(<span class="hljs-string">"users/{id}"</span>)
    Single&lt;User&gt; <span class="hljs-built_in">getUser</span>(<span class="hljs-variable">@Path</span>(<span class="hljs-string">"id"</span>) int userId);
    <span class="hljs-variable">@GET</span>(<span class="hljs-string">"users/{id}/posts"</span>)
    Observable&lt;List&lt;Post&gt;&gt; <span class="hljs-built_in">getUserPosts</span>(
        <span class="hljs-variable">@Path</span>(<span class="hljs-string">"id"</span>) int userId);
}
</code></pre>
<p><strong>Retrofité…ç½®ï¼š</strong></p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">NetworkModule</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> ApiService apiService;
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ApiService <span class="hljs-title">getApiService</span>()</span> {
        <span class="hljs-keyword">if</span> (apiService == <span class="hljs-literal">null</span>) {
            Retrofit retrofit = <span class="hljs-keyword">new</span> Retrofit.Builder()
                .baseUrl(<span class="hljs-string">"https://api.example.com/"</span>)
                .addConverterFactory(
                    GsonConverterFactory.create())
                .addCallAdapterFactory(
                    RxJava3CallAdapterFactory.create())
                .build();
            apiService = retrofit.create(ApiService.<span class="hljs-keyword">class</span>);
        }
        <span class="hljs-keyword">return</span> apiService;
    }
}
</code></pre>
<p><strong>ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserRepository</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ApiService apiService;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">CompositeDisposable</span> <span class="hljs-variable">disposables</span> <span class="hljs-operator">=</span> 
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">CompositeDisposable</span>();
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">UserRepository</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">this</span>.apiService = NetworkModule.getApiService();
    }
    <span class="hljs-comment">// è·å–ç”¨æˆ·ä¿¡æ¯</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">loadUser</span><span class="hljs-params">(<span class="hljs-type">int</span> userId, 
                         Consumer&lt;User&gt; onSuccess,
                         Consumer&lt;Throwable&gt; onError)</span> {
        <span class="hljs-type">Disposable</span> <span class="hljs-variable">disposable</span> <span class="hljs-operator">=</span> apiService.getUser(userId)
            .subscribeOn(Schedulers.io())
            .observeOn(AndroidSchedulers.mainThread())
            .subscribe(onSuccess, onError);
        disposables.add(disposable);
    }
    <span class="hljs-comment">// æ¸…ç†è®¢é˜…</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">clear</span><span class="hljs-params">()</span> {
        disposables.clear();
    }
}
</code></pre>
<h2 data-id="heading-20">æœç´¢é˜²æŠ–</h2>
<p>å®ç°æ™ºèƒ½æœç´¢,é¿å…é¢‘ç¹è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">public class SearchActivity extends AppCompatActivity {
    private EditText searchEditText;
    private final CompositeDisposable disposables = 
        new <span class="hljs-built_in">CompositeDisposable</span>();
    <span class="hljs-keyword">@Override</span>
    protected void onCreate(Bundle savedInstanceState) {
        super<span class="hljs-selector-class">.onCreate</span>(savedInstanceState);
        <span class="hljs-built_in">setContentView</span>(R.layout.activity_search);
        searchEditText = 
            <span class="hljs-built_in">findViewById</span>(R.id.search_edit_text);
        <span class="hljs-comment">// ç›‘å¬æœç´¢æ¡†è¾“å…¥</span>
        Disposable disposable = 
            RxTextView<span class="hljs-selector-class">.textChanges</span>(searchEditText)
            <span class="hljs-selector-class">.debounce</span>(<span class="hljs-number">500</span>, TimeUnit.MILLISECONDS)  
            <span class="hljs-comment">// é˜²æŠ–500ms</span>
            <span class="hljs-selector-class">.filter</span>(text -&gt; text.length() &gt;= <span class="hljs-number">2</span>)     
            <span class="hljs-comment">// è‡³å°‘2ä¸ªå­—ç¬¦</span>
            <span class="hljs-selector-class">.distinctUntilChanged</span>()                 
            <span class="hljs-comment">// å†…å®¹å˜åŒ–æ‰è§¦å‘</span>
            <span class="hljs-selector-class">.subscribeOn</span>(Schedulers.io())
            <span class="hljs-selector-class">.observeOn</span>(AndroidSchedulers.mainThread())
            <span class="hljs-selector-class">.subscribe</span>(text -&gt; {
                // æ‰§è¡Œæœç´¢
                performSearch(text.toString());
            });
        disposables<span class="hljs-selector-class">.add</span>(disposable);
    }
    private void <span class="hljs-built_in">performSearch</span>(String keyword) {
        apiService<span class="hljs-selector-class">.search</span>(keyword)
            <span class="hljs-selector-class">.subscribeOn</span>(Schedulers.io())
            <span class="hljs-selector-class">.observeOn</span>(AndroidSchedulers.mainThread())
            <span class="hljs-selector-class">.subscribe</span>(
                results -&gt; updateSearchResults(results),
                error -&gt; <span class="hljs-built_in">showError</span>(error)
            );
    }
    <span class="hljs-keyword">@Override</span>
    protected void onDestroy() {
        super<span class="hljs-selector-class">.onDestroy</span>();
        disposables<span class="hljs-selector-class">.clear</span>();  <span class="hljs-comment">// é˜²æ­¢å†…å­˜æ³„æ¼</span>
    }
}
</code></pre>
<h2 data-id="heading-21">å¤šæ•°æ®æºåˆå¹¶</h2>
<p>åŒæ—¶åŠ è½½å¤šä¸ªæ•°æ®æº,ç­‰å¾…å…¨éƒ¨å®Œæˆåç»Ÿä¸€å¤„ç†ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">public class HomeRepository {
    <span class="hljs-comment">// åŒæ—¶åŠ è½½å¤šä¸ªæ•°æ®æº</span>
    public Single&lt;HomeData&gt; <span class="hljs-built_in">loadHomeData</span>() {
        Single&lt;User&gt; userSingle = 
            apiService<span class="hljs-selector-class">.getCurrentUser</span>();
        Single&lt;List&lt;Post&gt;&gt; postsSingle = 
            apiService<span class="hljs-selector-class">.getLatestPosts</span>();
        Single&lt;List&lt;Notification&gt;&gt; notificationsSingle =
            apiService<span class="hljs-selector-class">.getNotifications</span>();
        return Single<span class="hljs-selector-class">.zip</span>(userSingle, 
                         postsSingle, 
                         notificationsSingle,
            (user, posts, notifications) -&gt;
                new <span class="hljs-built_in">HomeData</span>(user, posts, notifications))
            <span class="hljs-selector-class">.subscribeOn</span>(Schedulers.io())
            <span class="hljs-selector-class">.observeOn</span>(AndroidSchedulers.mainThread());
    }
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a441ea846544883a9e57a4e46cbac8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767229115&amp;x-signature=BAyWDYAFKXqmoCPzq%2B%2FU2z6r8GM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-22">å®šæ—¶åˆ·æ–°</h2>
<p>å®ç°è‡ªåŠ¨åˆ·æ–°åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RefreshManager</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Disposable</span> refreshDisposable;
    <span class="hljs-comment">// æ¯30ç§’è‡ªåŠ¨åˆ·æ–°</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">startAutoRefresh</span>(<span class="hljs-params">Runnable refreshAction</span>) {
        refreshDisposable = 
            <span class="hljs-title class_">Observable</span>.<span class="hljs-title function_">interval</span>(<span class="hljs-number">30</span>, <span class="hljs-title class_">TimeUnit</span>.<span class="hljs-property">SECONDS</span>)
            .<span class="hljs-title function_">subscribeOn</span>(<span class="hljs-title class_">Schedulers</span>.<span class="hljs-title function_">io</span>())
            .<span class="hljs-title function_">observeOn</span>(<span class="hljs-title class_">AndroidSchedulers</span>.<span class="hljs-title function_">mainThread</span>())
            .<span class="hljs-title function_">subscribe</span>(tick -&gt; refreshAction.<span class="hljs-title function_">run</span>());
    }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">stopAutoRefresh</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">if</span> (refreshDisposable != <span class="hljs-literal">null</span> &amp;&amp; 
            !refreshDisposable.<span class="hljs-title function_">isDisposed</span>()) {
            refreshDisposable.<span class="hljs-title function_">dispose</span>();
        }
    }
}
</code></pre>
<h2 data-id="heading-23">ä¸ƒã€æœ€ä½³å®è·µï¼šé¿å‘æŒ‡å—</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/774cc09f9f5a4438bfdddd2c764f83d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767229115&amp;x-signature=jwyY7IuxWFoR8erZqe9YfjMGdow%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-24">ç®¡ç†è®¢é˜… - ä½¿ç”¨CompositeDisposable</h2>
<p><strong>æ­£ç¡®åšæ³•ï¼š</strong></p>
<pre><code class="hljs language-scala" lang="scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AppCompatActivity</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">CompositeDisposable</span> disposables = 
        <span class="hljs-keyword">new</span> <span class="hljs-type">CompositeDisposable</span>();
    <span class="hljs-keyword">private</span> void loadData() {
        <span class="hljs-type">Disposable</span> disposable = observable
            .subscribe(data -&gt; process(data));
        disposables.add(disposable);
    }
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> void onDestroy() {
        <span class="hljs-keyword">super</span>.onDestroy();
        disposables.clear();  <span class="hljs-comment">// æ¸…ç†æ‰€æœ‰è®¢é˜…</span>
    }
}
</code></pre>
<h2 data-id="heading-25">ç»Ÿä¸€çš„é”™è¯¯å¤„ç†</h2>
<p>åˆ›å»ºä¸€ä¸ªç»Ÿä¸€çš„é”™è¯¯å¤„ç†å™¨ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RxErrorHandler</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Consumer&lt;Throwable&gt; <span class="hljs-title function_">handleError</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> throwable -&gt; {
            <span class="hljs-keyword">if</span> (throwable <span class="hljs-keyword">instanceof</span> IOException) {
                <span class="hljs-comment">// ç½‘ç»œé”™è¯¯</span>
                showToast(<span class="hljs-string">"ç½‘ç»œè¿æ¥å¤±è´¥"</span>);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (throwable <span class="hljs-keyword">instanceof</span> HttpException) {
                <span class="hljs-comment">// HTTPé”™è¯¯</span>
                <span class="hljs-type">int</span> <span class="hljs-variable">code</span> <span class="hljs-operator">=</span> 
                    ((HttpException) throwable).code();
                showToast(<span class="hljs-string">"æœåŠ¡å™¨é”™è¯¯: "</span> + code);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// å…¶ä»–é”™è¯¯</span>
                showToast(<span class="hljs-string">"å‘ç”ŸæœªçŸ¥é”™è¯¯"</span>);
            }
            <span class="hljs-comment">// è®°å½•æ—¥å¿—</span>
            Log.e(<span class="hljs-string">"RxError"</span>, <span class="hljs-string">"Error occurred"</span>, throwable);
        };
    }
}
<span class="hljs-comment">// ä½¿ç”¨</span>
observable.subscribe(
    data -&gt; process(data),
    RxErrorHandler.handleError()
);
</code></pre>
<h2 data-id="heading-26">æ“ä½œç¬¦é€‰æ‹©</h2>
<p>æ ¹æ®åœºæ™¯é€‰æ‹©åˆé€‚çš„æ“ä½œç¬¦ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// flatMap - ä¸ä¿è¯é¡ºåº,é€‚åˆå¹¶å‘</span>
<span class="hljs-selector-tag">Observable</span><span class="hljs-selector-class">.just</span>(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>)
    <span class="hljs-selector-class">.flatMap</span>(item -&gt; <span class="hljs-built_in">processAsync</span>(item))
    <span class="hljs-selector-class">.subscribe</span>();
<span class="hljs-comment">// concatMap - ä¿è¯é¡ºåº,é€‚åˆé¡ºåºæ‰§è¡Œ</span>
<span class="hljs-selector-tag">Observable</span><span class="hljs-selector-class">.just</span>(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>)
    <span class="hljs-selector-class">.concatMap</span>(item -&gt; <span class="hljs-built_in">processAsync</span>(item))
    <span class="hljs-selector-class">.subscribe</span>();
<span class="hljs-comment">// switchMap - åªä¿ç•™æœ€æ–°çš„,é€‚åˆæœç´¢</span>
<span class="hljs-selector-tag">searchObservable</span>
    <span class="hljs-selector-class">.switchMap</span>(keyword -&gt; apiService.<span class="hljs-built_in">search</span>(keyword))
    <span class="hljs-selector-class">.subscribe</span>();
</code></pre>
<h2 data-id="heading-27">èƒŒå‹å¤„ç†</h2>
<p>å¤„ç†å¤§æ•°æ®é‡æ—¶ä½¿ç”¨Flowableï¼š</p>
<pre><code class="hljs language-scss" lang="scss">Flowable<span class="hljs-selector-class">.range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1000000</span>)
    <span class="hljs-selector-class">.onBackpressureBuffer</span>(<span class="hljs-number">100</span>)  <span class="hljs-comment">// ç¼“å†²åŒº</span>
    <span class="hljs-selector-class">.observeOn</span>(Schedulers.computation(), false, <span class="hljs-number">10</span>)
    <span class="hljs-selector-class">.subscribe</span>(
        data -&gt; process(data),
        error -&gt; <span class="hljs-built_in">handleError</span>(error)
    );
<span class="hljs-comment">// èƒŒå‹ç­–ç•¥</span>
Flowable<span class="hljs-selector-class">.create</span>(emitter -&gt; {
    for (int i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10000</span>; i++) {
        emitter<span class="hljs-selector-class">.onNext</span>(i);
    }
    emitter<span class="hljs-selector-class">.onComplete</span>();
}, BackpressureStrategy<span class="hljs-selector-class">.DROP</span>)  <span class="hljs-comment">// ä¸¢å¼ƒç­–ç•¥</span>
<span class="hljs-selector-class">.subscribe</span>();
</code></pre>
<h2 data-id="heading-28">å…«ã€æ€»ç»“</h2>
<p>RxJavaæ ¸å¿ƒè¦ç‚¹</p>
<pre><code class="hljs">å“åº”å¼æ€ç»´ - ä»¥æ•°æ®æµçš„æ–¹å¼æ€è€ƒé—®é¢˜
æ“ä½œç¬¦é“¾ - çµæ´»ç»„åˆæ“ä½œç¬¦å®Œæˆå¤æ‚é€»è¾‘
çº¿ç¨‹è°ƒåº¦ - åˆç†ä½¿ç”¨subscribeOnå’ŒobserveOn
è®¢é˜…ç®¡ç† - åŠæ—¶disposeé¿å…å†…å­˜æ³„æ¼
é”™è¯¯å¤„ç† - ä½¿ç”¨ä¸“é—¨çš„é”™è¯¯å¤„ç†æ“ä½œç¬¦
èƒŒå‹æ§åˆ¶ - å¤§æ•°æ®é‡åœºæ™¯ä½¿ç”¨Flowable
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¼‚å¸¸çš„ â€œéšè—ä¼ é€’â€ï¼šfinally ä¸­çš„ return ä¼šåå™¬å¼‚å¸¸ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7587245616755163187</link>    <guid>https://juejin.cn/post/7587245616755163187</guid>    <pubDate>2025-12-25T01:08:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587245616755163187" data-draft-id="7585206549305884735" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¼‚å¸¸çš„ â€œéšè—ä¼ é€’â€ï¼šfinally ä¸­çš„ return ä¼šåå™¬å¼‚å¸¸ï¼Ÿ"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-12-25T01:08:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="uup"/> <meta itemprop="url" content="https://juejin.cn/user/4378706456356627"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¼‚å¸¸çš„ â€œéšè—ä¼ é€’â€ï¼šfinally ä¸­çš„ return ä¼šåå™¬å¼‚å¸¸ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4378706456356627/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    uup
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T01:08:45.000Z" title="Thu Dec 25 2025 01:08:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€Bug åœºæ™¯</h2>
<p>åœ¨ä¸€ä¸ª Java ç¨‹åºä¸­ï¼Œå¼€å‘äººå‘˜åœ¨Â <code>try - catch - finally</code>Â å—ä¸­ç¼–å†™äº†ä¸šåŠ¡é€»è¾‘ã€‚åŸæœ¬æœŸæœ›Â <code>try</code>Â å—ä¸­æŠ›å‡ºçš„å¼‚å¸¸èƒ½å¤Ÿè¢«æ­£ç¡®æ•è·å¹¶å¤„ç†ï¼Œä½†åœ¨å®é™…è¿è¡Œæ—¶ï¼Œå‘ç°Â <code>finally</code>Â å—ä¸­çš„Â <code>return</code>Â è¯­å¥å¯¼è‡´å¼‚å¸¸ä¼¼ä¹è¢« â€œåå™¬â€ï¼Œç¨‹åºæ²¡æœ‰æŒ‰ç…§é¢„æœŸå¤„ç†å¼‚å¸¸ï¼Œè¿™ä½¿å¾—æ’æŸ¥å’Œè§£å†³é—®é¢˜å˜å¾—å›°éš¾ï¼Œä¹Ÿå½±å“äº†ç¨‹åºçš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚</p>
<h2 data-id="heading-1">äºŒã€ä»£ç ç¤ºä¾‹</h2>
<h3 data-id="heading-2">å¼‚å¸¸å¤„ç†ç±»ï¼ˆæœ‰ç¼ºé™·ï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExceptionHidingExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">divide</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> a / b;
        } <span class="hljs-keyword">catch</span> (ArithmeticException e) {
            System.out.println(<span class="hljs-string">"æ•è·åˆ°ç®—æœ¯å¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"å¤„ç†ç®—æœ¯å¼‚å¸¸æ—¶æŠ›å‡ºæ–°å¼‚å¸¸"</span>, e);
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// è¿™é‡Œçš„returnè¯­å¥ä¼šéšè—tryæˆ–catchå—ä¸­æŠ›å‡ºçš„å¼‚å¸¸</span>
            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>; 
        }
    }
}
</code></pre>
<h3 data-id="heading-3">æµ‹è¯•ä»£ç </h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExceptionHidingBugExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> ExceptionHidingExample.divide(<span class="hljs-number">10</span>, <span class="hljs-number">0</span>);
            System.out.println(<span class="hljs-string">"ç»“æœ: "</span> + result);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.out.println(<span class="hljs-string">"å¤–éƒ¨æ•è·åˆ°å¼‚å¸¸: "</span> + e.getMessage());
        }
    }
}
</code></pre>
<h2 data-id="heading-4">ä¸‰ã€é—®é¢˜æè¿°</h2>
<ol>
<li><strong>é¢„æœŸè¡Œä¸º</strong>ï¼šå½“Â <code>divide</code>Â æ–¹æ³•æ‰§è¡ŒÂ <code>a / b</code>Â å‡ºç°Â <code>ArithmeticException</code>Â æ—¶ï¼Œ<code>catch</code>Â å—æ•è·å¹¶å¤„ç†è¯¥å¼‚å¸¸ï¼Œç„¶åæŠ›å‡ºä¸€ä¸ªæ–°çš„Â <code>RuntimeException</code>ï¼Œè¿™ä¸ªæ–°å¼‚å¸¸åº”è¯¥è¢«å¤–éƒ¨çš„Â <code>try - catch</code>Â å—æ•è·å¹¶å¤„ç†ï¼Œè¾“å‡ºç›¸åº”çš„é”™è¯¯ä¿¡æ¯ã€‚</li>
<li><strong>å®é™…è¡Œä¸º</strong>ï¼š<code>finally</code>Â å—ä¸­çš„Â <code>return</code>Â è¯­å¥ä½¿å¾—Â <code>try</code>Â æˆ–Â <code>catch</code>Â å—ä¸­æŠ›å‡ºçš„å¼‚å¸¸è¢« â€œéšè—â€ã€‚å°½ç®¡Â <code>catch</code>Â å—æ•è·äº†Â <code>ArithmeticException</code>Â å¹¶æŠ›å‡ºäº†æ–°çš„Â <code>RuntimeException</code>ï¼Œä½†ç”±äºÂ <code>finally</code>Â å—ä¸­çš„Â <code>return -1</code>Â è¯­å¥ï¼Œè¿™ä¸ªæ–°çš„Â <code>RuntimeException</code>Â æ²¡æœ‰è¢«ä¼ é€’åˆ°å¤–éƒ¨çš„Â <code>try - catch</code>Â å—ï¼Œå¯¼è‡´å¤–éƒ¨æ•è·ä¸åˆ°å¼‚å¸¸ï¼Œç¨‹åºè¾“å‡ºçš„ç»“æœæ˜¯Â <code>ç»“æœ: -1</code>ã€‚è¿™æ˜¯å› ä¸ºåœ¨æ‰§è¡ŒÂ <code>finally</code>Â å—ä¸­çš„Â <code>return</code>Â è¯­å¥æ—¶ï¼Œ<code>try</code>Â æˆ–Â <code>catch</code>Â å—ä¸­æŠ›å‡ºçš„å¼‚å¸¸ä¿¡æ¯ä¼šè¢«ä¸¢å¼ƒï¼Œæœ€ç»ˆè¿”å›çš„æ˜¯Â <code>finally</code>Â å—ä¸­çš„Â <code>return</code>Â å€¼ï¼Œä»è€Œéšè—äº†å¼‚å¸¸ã€‚</li>
</ol>
<h2 data-id="heading-5">å››ã€è§£å†³æ–¹æ¡ˆ</h2>
<ol>
<li><strong>é¿å…åœ¨Â <code>finally</code>Â ä¸­ä½¿ç”¨Â <code>return</code></strong>ï¼šå°†Â <code>return</code>Â è¯­å¥æ”¾åœ¨Â <code>try</code>Â æˆ–Â <code>catch</code>Â å—ä¸­åˆé€‚çš„ä½ç½®ï¼Œç¡®ä¿å¼‚å¸¸èƒ½å¤Ÿæ­£å¸¸ä¼ é€’ã€‚</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExceptionHidingExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">divide</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> a / b;
        } <span class="hljs-keyword">catch</span> (ArithmeticException e) {
            System.out.println(<span class="hljs-string">"æ•è·åˆ°ç®—æœ¯å¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"å¤„ç†ç®—æœ¯å¼‚å¸¸æ—¶æŠ›å‡ºæ–°å¼‚å¸¸"</span>, e);
        }
    }
}
</code></pre>
<h3 data-id="heading-6">ä¿®æ”¹åçš„æµ‹è¯•ä»£ç </h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExceptionHidingBugExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> ExceptionHidingExample.divide(<span class="hljs-number">10</span>, <span class="hljs-number">0</span>);
            System.out.println(<span class="hljs-string">"ç»“æœ: "</span> + result);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.out.println(<span class="hljs-string">"å¤–éƒ¨æ•è·åˆ°å¼‚å¸¸: "</span> + e.getMessage());
        }
    }
}
</code></pre>
<ol start="2">
<li><strong>ä½¿ç”¨è¾…åŠ©å˜é‡</strong>ï¼šåœ¨Â <code>try</code>Â æˆ–Â <code>catch</code>Â å—ä¸­è®¾ç½®ä¸€ä¸ªè¾…åŠ©å˜é‡æ¥å­˜å‚¨ç»“æœï¼Œ<code>finally</code>Â å—ä¸­ä¸ä½¿ç”¨Â <code>return</code>ï¼Œè€Œæ˜¯å¯¹è¾…åŠ©å˜é‡è¿›è¡Œæ“ä½œï¼Œè¿™æ ·å¯ä»¥ä¿è¯å¼‚å¸¸çš„æ­£å¸¸ä¼ é€’ã€‚</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExceptionHidingExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">divide</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">try</span> {
            result = a / b;
        } <span class="hljs-keyword">catch</span> (ArithmeticException e) {
            System.out.println(<span class="hljs-string">"æ•è·åˆ°ç®—æœ¯å¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"å¤„ç†ç®—æœ¯å¼‚å¸¸æ—¶æŠ›å‡ºæ–°å¼‚å¸¸"</span>, e);
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// è¿™é‡Œå¯ä»¥å¯¹resultè¿›è¡Œå…¶ä»–éreturnçš„æ“ä½œ</span>
        }
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¶…è¶Š SpringBoot 4.0äº†å—ï¼ŸOpenSolon v3.8, v3.7.4, v3.6.7 å‘å¸ƒ]]></title>    <link>https://juejin.cn/post/7587245616755294259</link>    <guid>https://juejin.cn/post/7587245616755294259</guid>    <pubDate>2025-12-25T01:24:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587245616755294259" data-draft-id="7587263750249316403" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¶…è¶Š SpringBoot 4.0äº†å—ï¼ŸOpenSolon v3.8, v3.7.4, v3.6.7 å‘å¸ƒ"/> <meta itemprop="keywords" content="Java,Spring Boot"/> <meta itemprop="datePublished" content="2025-12-25T01:24:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‰é±¼çš„çŒ«"/> <meta itemprop="url" content="https://juejin.cn/user/409464125003639"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¶…è¶Š SpringBoot 4.0äº†å—ï¼ŸOpenSolon v3.8, v3.7.4, v3.6.7 å‘å¸ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/409464125003639/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‰é±¼çš„çŒ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T01:24:32.000Z" title="Thu Dec 25 2025 01:24:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¯¼å¼•</h2>
<p>ï¼ˆå¬è¯´éš”å£çš„ Spring 7 å’Œ SpringBoot 4 æœ€è¿‘å‡ºäº†å‡ ä¸ªå¤§ Bugäº†ï¼Ÿï¼ï¼‰å†æ—¶ 8 å¹´ç£¨ç ºï¼Œ1.7 ä¸‡æ¬¡ä»£ç æäº¤ï¼Œ9ä¸ªåˆ†ä»“åº“ï¼Œå‡ ç™¾ä¸ªæ¨¡å—ï¼Œ20å¤šä¸‡ä»£ç é‡ï¼Œ 1200 ä¸‡æ¬¡åŠå¹´ä¸‹è½½é‡ â€”â€” OpenSolonï¼ˆå³ Solonï¼‰æ­£åœ¨é‡æ–°å®šä¹‰ Java ä¼ä¸šçº§åº”ç”¨å¼€å‘çš„æ€§ä»·æ¯”ã€‚</p>
<p>ä»Šæ—¥ï¼Œæˆ‘ä»¬æ­£å¼å‘å¸ƒ OpenSolon v3.8 åŠå…¶ LTS ç»´æŠ¤ç‰ˆæœ¬ã€‚æ˜¯ä¸€æ¬¡æ¶æ„çº§çš„è·¨è¶Šï¼šä» AI é¢†åŸŸçš„ MCP æ— çŠ¶æ€é›†ç¾¤æ”¯æŒï¼Œåˆ° Flow æµç¨‹å¼•æ“çš„å›å½’é€šç”¨åŒ–ï¼Œå†åˆ°å¯¹ Java æ–°ç‰ˆæœ¬ï¼ˆv25ï¼‰çš„è¶…å‰å¸ƒå±€ï¼ŒOpenSolon æŒç»­è·µè¡Œâ€œå¿«é€Ÿã€å°å·§ã€ç®€æ´â€çš„å…‹åˆ¶ç¾å­¦ã€‚</p>
<p>æ— è®ºä½ æ˜¯è¿½æ±‚ç®—åŠ›æ€§ä»·æ¯”çš„æè‡´ä¸»ä¹‰è€…ï¼Œè¿˜æ˜¯æ­£åœ¨å¯»æ‰¾å®‰å…¨å¯é çš„å›½äº§åŸºåº§ï¼Œè¿™æ¬¡æ›´æ–°éƒ½å€¼å¾—ä½ å…³æ³¨ã€‚</p>
<ul>
<li>ã€è¶…å‰é€‚é…ã€‘ ç‡å…ˆé€‚é… Java 25ï¼Œæ–°å¢ ScopedValue é€‚é…æ”¯æŒ</li>
<li>ã€AI å¢å¼ºã€‘ solon-ai æ·±åº¦æ”¯æŒ MCP æ— çŠ¶æ€ä¼šè¯é›†ç¾¤ä¸å¼‚æ­¥å·¥å…·</li>
<li>ã€æ¶æ„é‡æ„ã€‘ solon-flow å›å½’é€šç”¨æµç¨‹å¼•æ“ï¼Œæ¨å‡ºå…¨æ–°çš„ WorkflowService å°è£…ï¼›</li>
<li>ã€æ€§èƒ½ä¼˜åŒ–ã€‘ å…¨é¢ä¼˜åŒ–è¡¨è¾¾å¼å¼•æ“ï¼ˆSnELï¼‰ä¸ç¼“å­˜æ€§èƒ½ï¼ŒæŒç»­ä¿æŒé«˜å¹¶å‘ã€çœå†…å­˜çš„é¢†å…ˆä¼˜åŠ¿ã€‚</li>
</ul>
<h2 data-id="heading-1">OpenSolon å¼€æºæ¡†æ¶ï¼ï¼ˆä¹Ÿç§°ï¼šSolonï¼‰</h2>
<p>OpenSolon æ˜¯æ–°ä¸€ä»£ï¼ŒJava ä¼ä¸šçº§åº”ç”¨å¼€å‘æ¡†æ¶ã€‚<strong>ä»é›¶å¼€å§‹æ„å»ºï¼ˆNo Java-EEï¼‰ï¼Œæœ‰çµæ´»çš„æ¥å£è§„èŒƒä¸å¼€æ”¾ç”Ÿæ€</strong>ã€‚é‡‡ç”¨å•†ç”¨å‹å¥½çš„ Apache  2.0 å¼€æºåè®®ï¼Œæ˜¯â€œæ­å·æ— è€³ç§‘æŠ€æœ‰é™å…¬å¸â€å¼€æºçš„æ ¹çº§é¡¹ç›®ï¼Œæ˜¯ Java åº”ç”¨å¼€å‘çš„ç”Ÿæ€åŸºåº§ï¼ˆå¯æ›¿æ¢ç¾å›½åšé€šå…¬å¸çš„ Spring ç”Ÿæ€ï¼‰ã€‚</p>
<ul>
<li>è¿½æ±‚ï¼š å¿«é€Ÿã€å°å·§ã€ç®€æ´</li>
<li>æå€¡ï¼š å…‹åˆ¶ã€é«˜æ•ˆã€å¼€æ”¾</li>
</ul>
<p>7å¹´å¼€æºæ—¶é—´ï¼Œç´¯è®¡ä»£ç æäº¤1.6ä¸‡æ¬¡ ï¼Œè¿‘åŠå¹´ä¸‹è½½é‡1200ä¸‡æ¬¡ã€‚</p>
<ul>
<li>æœ‰é€æ˜å¯é¢„æœŸçš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fsolon.noear.org%2Farticle%2F687" target="_blank" title="https://solon.noear.org/article/687" ref="nofollow noopener noreferrer">ã€Šç‰ˆæœ¬å‘å¸ƒä¸é•¿æœŸæ”¯æŒè®¡åˆ’ï¼ˆLTSï¼‰ã€‹</a></li>
<li>æœ‰â€œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fsolon.noear.org%2Farticle%2Fsupport" target="_blank" title="https://solon.noear.org/article/support" ref="nofollow noopener noreferrer">ã€ç¤¾åŒºäº¤æµã€‘</a>â€å’Œâ€œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fsolon.noear.org%2Farticle%2Fservices" target="_blank" title="https://solon.noear.org/article/services" ref="nofollow noopener noreferrer">ã€ä¼ä¸šæœåŠ¡ã€‘</a>â€åŒé‡æŠ€æœ¯æ”¯æŒ</li>
</ul>
<p>åŒæ—¶æ”¯æŒè¿è¡Œæ—¶ç¯å¢ƒï¼ˆä¸åŸºäº java-ee æ„å»ºï¼Œæ‰€ä»¥å¯ä»¥åŒæ—¶å…¼å®¹ï¼‰ï¼š</p>
<ul>
<li>java8, java11, java17, java21, java25</li>
</ul>
<p>ç›®å‰æœ‰å‡ ä¸ªä¸»è¦çš„é¡¹ç›®ä»“åº“ï¼š</p>





































































<table><thead><tr><th>ä»£ç ä»“åº“</th><th>æè¿°</th></tr></thead><tbody><tr><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fopensolon%2Fsolon" target="_blank" title="https://gitee.com/opensolon/solon" ref="nofollow noopener noreferrer">/opensolon/solon</a></td><td>Solon ,ä¸»ä»£ç ä»“åº“</td></tr><tr><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fopensolon%2Fsolon-examples" target="_blank" title="https://gitee.com/opensolon/solon-examples" ref="nofollow noopener noreferrer">/opensolon/solon-examples</a></td><td>Solon ,å®˜ç½‘é…å¥—ç¤ºä¾‹ä»£ç ä»“åº“</td></tr><tr><td/><td/></tr><tr><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fopensolon%2Fsolon-expression" target="_blank" title="https://gitee.com/opensolon/solon-expression" ref="nofollow noopener noreferrer">/opensolon/solon-expression</a></td><td>Solon Expression ,ä»£ç ä»“åº“</td></tr><tr><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fopensolon%2Fsolon-flow" target="_blank" title="https://gitee.com/opensolon/solon-flow" ref="nofollow noopener noreferrer">/opensolon/solon-flow</a></td><td>Solon Flow ,ä»£ç ä»“åº“</td></tr><tr><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fopensolon%2Fsolon-ai" target="_blank" title="https://gitee.com/opensolon/solon-ai" ref="nofollow noopener noreferrer">/opensolon/solon-ai</a></td><td>Solon Ai ,ä»£ç ä»“åº“</td></tr><tr><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fopensolon%2Fsolon-cloud" target="_blank" title="https://gitee.com/opensolon/solon-cloud" ref="nofollow noopener noreferrer">/opensolon/solon-cloud</a></td><td>Solon Cloud ,ä»£ç ä»“åº“</td></tr><tr><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fopensolon%2Fsolon-admin" target="_blank" title="https://gitee.com/opensolon/solon-admin" ref="nofollow noopener noreferrer">/opensolon/solon-admin</a></td><td>Solon Admin ,ä»£ç ä»“åº“</td></tr><tr><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fopensolon%2Fsolon-integration" target="_blank" title="https://gitee.com/opensolon/solon-integration" ref="nofollow noopener noreferrer">/opensolon/solon-integration</a></td><td>Solon Integration ,ä»£ç ä»“åº“</td></tr><tr><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fopensolon%2Fsolon-java17" target="_blank" title="https://gitee.com/opensolon/solon-java17" ref="nofollow noopener noreferrer">/opensolon/solon-java17</a></td><td>Solon Java17 é€‚é…ä»“åº“ï¼ˆbase java17ï¼‰</td></tr><tr><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fopensolon%2Fsolon-java25" target="_blank" title="https://gitee.com/opensolon/solon-java25" ref="nofollow noopener noreferrer">/opensolon/solon-java25</a></td><td>Solon Java25 é€‚é…ä»“åº“ï¼ˆbase java25ï¼‰</td></tr><tr><td/><td/></tr><tr><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fopensolon%2Fsolon-gradle-plugin" target="_blank" title="https://gitee.com/opensolon/solon-gradle-plugin" ref="nofollow noopener noreferrer">/opensolon/solon-gradle-plugin</a></td><td>Solon Gradle ,æ’ä»¶ä»£ç ä»“åº“</td></tr><tr><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fopensolon%2Fsolon-idea-plugin" target="_blank" title="https://gitee.com/opensolon/solon-idea-plugin" ref="nofollow noopener noreferrer">/opensolon/solon-idea-plugin</a></td><td>Solon Idea ,æ’ä»¶ä»£ç ä»“åº“</td></tr><tr><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fopensolon%2Fsolon-vscode-plugin" target="_blank" title="https://gitee.com/opensolon/solon-vscode-plugin" ref="nofollow noopener noreferrer">/opensolon/solon-vscode-plugin</a></td><td>Solon VsCode ,æ’ä»¶ä»£ç ä»“åº“</td></tr></tbody></table>
<h2 data-id="heading-2">æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼ˆç›¸å¯¹ Java Spring æ–¹æ¡ˆï¼‰ï¼Ÿ</h2>
<p>OpenSolon å¯¹å›½äº§ç®—åŠ›éå¸¸å‹å¥½ï¼Œå¯¹ cpu å’Œ memory çš„éœ€æ±‚è¿œä½äºåŒç±»æ–¹æ¡ˆã€‚</p>

























<table><thead><tr><th>ç‰¹ç‚¹</th><th>æè¿°</th></tr></thead><tbody><tr><td>æ›´é«˜çš„è®¡ç®—æ€§ä»·æ¯”</td><td>å¹¶å‘é«˜ 700%ï¼›å†…å­˜çœ 50%</td></tr><tr><td>æ›´å¿«çš„å¼€å‘æ•ˆç‡</td><td>ä»£ç å°‘ï¼›å…¥é—¨ç®€å•ï¼›å¯åŠ¨ï¼ˆæˆ–è°ƒè¯•é‡å¯ï¼‰å¿« 10å€</td></tr><tr><td>æ›´å¥½çš„ç”Ÿäº§ä¸éƒ¨ç½²ä½“éªŒ</td><td>æ‰“åŒ…å° 90%</td></tr><tr><td>æ›´å¤§çš„å…¼å®¹èŒƒå›´</td><td>é java-ee æ¶æ„ï¼›åŒæ—¶æ”¯æŒ java8 ï½ java25ï¼Œgraalvm native image</td></tr></tbody></table>
<p>æœ€æ–°çš„ techempower ï¼ˆç¬¬ä¸‰æ–¹çŸ¥åæµ‹è¯•å¹³å°ï¼‰æµ‹è¯•æ•°æ®ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.techempower.com%2Fbenchmarks%2F%23hw%3Dph%26test%3Djson%25C2%25A7ion%3Ddata-r23" target="_blank" title="https://www.techempower.com/benchmarks/#hw=ph&amp;test=json%C2%A7ion=data-r23" ref="nofollow noopener noreferrer">www.techempower.com/benchmarks/â€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.techempower.com%2Fbenchmarks%2F%23hw%3Dph%26test%3Dplaintext%25C2%25A7ion%3Ddata-r23" target="_blank" title="https://www.techempower.com/benchmarks/#hw=ph&amp;test=plaintext%C2%A7ion=data-r23" ref="nofollow noopener noreferrer">www.techempower.com/benchmarks/â€¦</a></li>
</ul>
<h2 data-id="heading-3">é¡¹ç›®æ¶æ„ç¤ºæ„å›¾ï¼ˆå…¨åœºæ™¯åº”ç”¨å¼€å‘æ”¯æŒï¼‰</h2>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ffec7fd062a4dcca42da8b415d223d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6J6bG855qE54yr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767230729&amp;x-signature=l1uv4ZJiw5NatU48qCWqYKkCSGk%3D" width="700" loading="lazy"/>
<h2 data-id="heading-4">v3.8.0 æ›´æ–°è¯´æ˜</h2>
<ul>
<li>æ’ä»¶ <code>solon-flow</code> ç¬¬å…­æ¬¡é¢„è§ˆ</li>
<li>æ–°å¢ <code>solon-flow-workflow</code> æ’ä»¶ï¼ˆæ›¿ä»£ FlowStatefulServiceï¼‰</li>
<li>æ–°å¢ <code>solon-java25</code> ä»“åº“ï¼ˆæä¾› ScopedValue é€‚é…ï¼‰</li>
<li>æ·»åŠ  <code>solon</code> ScopeLocal æ¥å£ï¼ˆç”¨äº ThreadLocal åˆ° ScopedValue å…¼å®¹ï¼‰</li>
<li>æ·»åŠ  <code>solon</code> Solon.start(Class, MultiMap) æ–¹æ³•</li>
<li>æ·»åŠ  <code>solon</code> ThreadsUtil:newVirtualThreadFactory æ–¹æ³•</li>
<li>æ·»åŠ  <code>solon</code> ContextHolder:currentWith æ–¹æ³•ï¼Œæ›¿ä»£ currentSetï¼ˆæ ‡ä¸ºå¼ƒç”¨ï¼‰</li>
<li>æ·»åŠ  <code>solon</code> Controller:remoting å±æ€§ï¼ˆå¯æ›¿ä»£ @Remoting æ³¨è§£ï¼‰</li>
<li>æ·»åŠ  <code>solon</code> éä¾èµ–å…³ç³»çš„ bean å¼‚æ­¥åˆå§‹åŒ–ï¼ˆ<code>@Init(async=true)</code>ï¼‰</li>
<li>æ·»åŠ  <code>solon</code> Stringable æ¥å£</li>
<li>æ·»åŠ  <code>solon</code> 'env.use' é…ç½®æ”¯æŒï¼ˆç›¸å¯¹ 'env'ï¼Œå®ƒä¸ 'env.on' åä½œæ—¶ä¸ä¼šå†²çªï¼‰</li>
<li>æ·»åŠ  <code>solon</code> 'server.session.cookieHttpOnly' é…ç½®æ”¯æŒï¼ˆé»˜è®¤ä¸º trueï¼‰</li>
<li>æ·»åŠ  <code>solon</code> Context.cookieSet(...,httpOnly) æ–¹æ³•</li>
<li>æ·»åŠ  <code>solon-test</code> HttpTester protocol å‚æ•°æ”¯æŒï¼ˆæ–¹ä¾¿ https æˆ– http åˆ‡æ¢æµ‹è¯•ï¼‰</li>
<li>æ·»åŠ  <code>solon-serialization</code> JsonPropsUtil2.dateAsFormat æ·»åŠ  java.sql.Timestamp ç±»å‹æ”¯æŒ</li>
<li>æ·»åŠ  <code>solon-config-yaml</code> ä¾èµ– solon-config-snack4 é¿å…å•ä¸ªå¼•å…¥æ—¶å¿˜æ‰</li>
<li>æ·»åŠ  <code>solon-net-httputils</code> HttpSslSupplierAnyï¼ˆæ–¹ä¾¿æ— é™åˆ¶çš„ ssl ä½¿ç”¨ï¼Œä½†ä¸å»ºè®®ï¼‰</li>
<li>æ·»åŠ  <code>solon-web-rx</code> RxEntity ç±»ï¼ˆæ–¹ä¾¿å¯¹æ¥ mcp-sdkï¼‰</li>
<li>æ·»åŠ  <code>solon-server</code> ä¼šè¯çŠ¶æ€çš„ cookie httpOnly é…ç½®ï¼ˆé»˜è®¤ä¸º falseï¼‰</li>
<li>æ·»åŠ  <code>solon-server-tomcat</code> ssl é€‚é…æ”¯æŒ</li>
<li>æ·»åŠ  <code>solon-security-validation</code> ValidatorFailureHandlerI18n æ”¯æŒéªŒè¯æ³¨è§£çš„å›½é™…åŒ–å¤„ç†
æ·»åŠ  <code>solon-expression</code> SnelParser ç±»ï¼Œä¸º TemplateParser å’Œ EvaluateParser æä¾›å‡ºå…¥å£å’Œå ä½ç¬¦é…ç½®</li>
<li>æ·»åŠ  <code>solon-flow</code> FlowContext:lastNode() æ–¹æ³•ï¼ˆæœ€åä¸€ä¸ªè¿è¡Œçš„èŠ‚ç‚¹ï¼‰</li>
<li>æ·»åŠ  <code>solon-flow</code> FlowContext:lastNodeId() æ–¹æ³•ï¼ˆæœ€åä¸€ä¸ªè¿è¡Œçš„èŠ‚ç‚¹Idï¼‰</li>
<li>æ·»åŠ  <code>solon-flow</code> Node.getMetaAs, Link.getMetaAs æ–¹æ³•</li>
<li>æ·»åŠ  <code>solon-flow</code> NodeSpec:linkRemove æ–¹æ³•ï¼ˆå¢å¼ºä¿®æ”¹èƒ½åŠ›ï¼‰</li>
<li>æ·»åŠ  <code>solon-flow</code> Graph:create(id,title,consumer) æ–¹æ³•</li>
<li>æ·»åŠ  <code>solon-flow</code> Graph:copy(graph,consumer) æ–¹æ³•ï¼ˆæ–¹ä¾¿å¤åˆ¶åä¿®æ”¹ï¼‰</li>
<li>æ·»åŠ  <code>solon-flow</code> GraphSpec:getNode(id) æ–¹æ³•</li>
<li>æ·»åŠ  <code>solon-flow</code> GraphSpec:addLoop(id) æ–¹æ³•æ›¿ä»£ addLoopingï¼ˆåè€…æ ‡ä¸ºå¼ƒç”¨ï¼‰</li>
<li>æ·»åŠ  <code>solon-flow</code> FlowEngine:eval(Graph, ..) ç³»åˆ—æ–¹æ³•</li>
<li>æ·»åŠ  <code>solon-ai</code> FunctionPrompt:handleAsyncï¼ˆç”¨äº mcp-server å¼‚æ­¥æ”¯æŒï¼‰</li>
<li>æ·»åŠ  <code>solon-ai</code> FunctionResource:handleAsyncï¼ˆç”¨äº mcp-server å¼‚æ­¥æ”¯æŒï¼‰</li>
<li>æ·»åŠ  <code>solon-ai</code> FunctionTool:handleAsyncï¼ˆç”¨äº mcp-server å¼‚æ­¥æ”¯æŒï¼‰</li>
<li>æ·»åŠ  <code>solon-ai-core</code> ChatMessage:toNdjson,fromNdjson æ–¹æ³•ï¼ˆæ›¿ä»£ ChatSession:toNdjson, loadNdjsonï¼‰ï¼Œæ–°æ–¹æ³•æœºåˆ¶ä¸Šæ›´è‡ªç”±</li>
<li>æ·»åŠ  <code>solon-ai-core</code> ToolSchemaUtil.jsonSchema Publisher æ³›å‹æ”¯æŒ</li>
<li>æ·»åŠ  <code>solon-ai-mcp</code> mcp-java-sdk v0.17 é€‚é…ï¼ˆæ”¯æŒ 2025-06-18 ç‰ˆæœ¬åè®®ï¼‰</li>
<li>æ·»åŠ  <code>solon-ai-mcp</code> mcp-server å¼‚æ­¥æ”¯æŒ</li>
<li>æ·»åŠ  <code>solon-ai-mcp</code> mcp-server streamable_stateless æ”¯æŒ</li>
<li>æ·»åŠ  <code>solon-ai-mcp</code> Tool,Resource,Prompt å¯¹ org.reactivestreams.Publisher å¼‚æ­¥è¿”å›æ”¯æŒ</li>
<li>æ·»åŠ  <code>solon-ai-mcp</code> McpServerHost æœåŠ¡å®¿ä¸»æ¥å£ï¼Œç”¨äºéš”ç¦»æœ‰çŠ¶æ€ä¸æ— çŠ¶æ€æœåŠ¡</li>
<li>æ·»åŠ  <code>solon-ai-mcp</code> McpChannel.STREAMABLE_STATELESS ï¼ˆæœåŠ¡ç«¯ï¼‰æ— çŠ¶æ€ä¼šè¯</li>
<li>æ·»åŠ  <code>solon-ai-mcp</code> McpClientProvider:customize æ–¹æ³•ï¼ˆç”¨äºæ‰©å±• roots, sampling ç­‰ï¼‰</li>
<li>æ·»åŠ  <code>solon-ai-mcp</code> mcpServer McpAsyncServerExchange æ³¨å…¥æ”¯æŒï¼ˆç”¨äºæ‰©å±• roots, sampling ç­‰ï¼‰</li>
<li>ä¼˜åŒ– <code>solon</code> api-version ç‰ˆæœ¬åŒ¹é…</li>
<li>ä¼˜åŒ– <code>solon</code> SnelUtil snel è¡¨è¾¾å¼ç¼ºå‚æ•°æ—¶å¼‚å¸¸æç¤ºï¼ˆé¿å…é…é”™åå­—ï¼‰</li>
<li>ä¼˜åŒ– <code>solon</code> ParamWrap:getName æ”¹ç”¨ ParamSpec.getAliasã€‚åŠ  '@Param(name=xxx)' æ³¨è§£å¯ç”Ÿæ•ˆ</li>
<li>ä¼˜åŒ– <code>solon-cache</code> CacheService é€‚é…æ²¡æœ‰ _cacheKeyHead é…ç½®æ—¶ï¼Œåˆ™ä¸åŠ å‰ç¼€</li>
<li>ä¼˜åŒ– <code>solon-net-httputils</code> SslContextBuilder</li>
<li>ä¼˜åŒ– <code>solon-expression</code> EvaluateParser æ”¯æŒå®šä¹‰å ä½ç¬¦ï¼ˆå¯æ”¯æŒ <code>{xxx}</code> è¡¨è¾¾å¼ï¼‰</li>
<li>ä¼˜åŒ– <code>solon-expression</code> TemplateParser æ”¯æŒå®šä¹‰å ä½ç¬¦ï¼ˆå¯æ”¯æŒ <code>{xxx}</code> è¡¨è¾¾å¼ï¼‰</li>
<li>ä¼˜åŒ– <code>solon-expression</code> LRUCache æ€§èƒ½ï¼ˆæé«˜ç¼“å­˜æ€§èƒ½ï¼‰</li>
<li>ä¼˜åŒ– <code>solon-ai-dialect-openai</code> claude å…¼å®¹æ€§</li>
<li>ä¼˜åŒ– <code>solon-ai-mcp mcp</code> StreamableHttp æ¨¡å¼ä¸‹ æœåŠ¡ç«¯æ­£å¸¸è¿”å›æ—¶ å®¢æˆ·ç«¯å¼‚å¸¸æ—¥å¿—æ‰“å°çš„æƒ…å†µ* ä¼˜åŒ– <code>solon-flow</code> eval(Node startNode) å¤„ç†ï¼Œæ”¹ä¸ºä» root å¼€å§‹æ¢å¤åˆ° start å†å¼€å§‹æ‰§è¡Œï¼ˆæ¢å¤è¿‡ç¨‹ä¸­ï¼Œä¸ä¼šæ‰§è¡Œä»»åŠ¡ï¼‰</li>
<li>ä¼˜åŒ– <code>solon-flow</code> FlowEngine:eval(Node startNode) å¤„ç†ï¼Œæ”¹ä¸ºä» root å¼€å§‹æ¢å¤åˆ° start å†å¼€å§‹æ‰§è¡Œï¼ˆæ¢å¤è¿‡ç¨‹ä¸­ï¼Œä¸ä¼šæ‰§è¡Œä»»åŠ¡ï¼‰</li>
<li>è°ƒæ•´ <code>nami</code> NamiAttachment åˆ‡æ¢ä¸º ScopeLocal æ¥å£å®ç°</li>
<li>è°ƒæ•´ <code>solon</code> ContextHolder åˆ‡æ¢ä¸º ScopeLocal æ¥å£å®ç°</li>
<li>è°ƒæ•´ <code>solon</code> RunHolderï¼šparallelExecutor æ”¹ä¸º newFixedThreadPool</li>
<li>è°ƒæ•´ <code>solon-data</code> TranExecutorDefault åˆ‡æ¢ä¸º ScopeLocal æ¥å£å®ç°</li>
<li>è°ƒæ•´ <code>local-solon-cloud-plugin</code> çš„ config å’Œ i18n æœåŠ¡ï¼Œå¦‚æœæ²¡æœ‰ group é…ç½®ï¼Œåˆ™æ–‡ä»¶ä¸å¸¦ group å‰ç¼€ï¼ˆä¹‹å‰é»˜è®¤ç»™äº† DEFAULT_GROUP ç»„åï¼Œæ˜¾å¾—å¤æ‚ï¼‰</li>
<li>è°ƒæ•´ <code>rocketmq-solon-clouud-plugin</code> çš„é€‚é…ï¼Œäº‹ä»¶å±æ€§ä¸å†åŠ  '!' ï¼ˆå¹¶å…¼å®¹æ—§æ ¼å¼ï¼‰</li>
<li>è°ƒæ•´ <code>aliyun-ons-solon-clouud-plugin</code> çš„é€‚é…ï¼Œäº‹ä»¶å±æ€§ä¸å†åŠ  '!' ï¼ˆå¹¶å…¼å®¹æ—§æ ¼å¼ï¼‰</li>
<li>è°ƒæ•´ <code>rocketmq5-solon-clouud-plugin</code> çš„é€‚é…ï¼Œäº‹ä»¶å±æ€§ä¸å†åŠ  '!' ï¼ˆå¹¶å…¼å®¹æ—§æ ¼å¼ï¼‰ã€‚æ·»åŠ  sql92 è¿‡æ»¤æ”¯æŒ</li>
<li>è°ƒæ•´ <code>solon-flow</code> ç§»é™¤ Activity èŠ‚ç‚¹é¢„è§ˆå±æ€§ "<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi mathvariant="normal">"</mi><mtext>å’Œ</mtext><mi mathvariant="normal">"</mi></mrow><annotation encoding="application/x-tex">imode" å’Œ "</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal">im</span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord">"</span><span class="mord cjk_fallback">å’Œ</span><span class="mord">"</span></span></span></span></span>omode"</li>
<li>è°ƒæ•´ <code>solon-flow</code> Activity èŠ‚ç‚¹æµå‡ºæ”¹ä¸ºè‡ªç”±æ¨¡å¼ï¼ˆå¯ä»¥å¤šçº¿æµå‡ºï¼šæ— æ¡ä»¶ç›´æ¥æµå‡ºï¼Œæœ‰æ¡ä»¶æ£€æµ‹åæµå‡ºï¼‰</li>
<li>è°ƒæ•´ <code>solon-flow</code> Node.getMeta æ–¹æ³•è¿”å›æ”¹ä¸º Object ç±»å‹ï¼ˆå¹¶æ–°å¢ getMetaAsï¼‰</li>
<li>è°ƒæ•´ <code>solon-flow</code> Evaluation:runTest æ”¹ä¸º runCondition</li>
<li>è°ƒæ•´ <code>solon-flow</code> FlowContext:incrAdd,incrGet æ ‡ä¸ºå¼ƒç”¨ï¼ˆä¸Šä¸‹æ–‡æ•°æ®ä¸ºå‹åªèƒ½ç”±è¾“å…¥ä¾§å†³å®šï¼‰</li>
<li>è°ƒæ•´ <code>solon-flow</code> Condition æ›´åä¸º ConditionDesc</li>
<li>è°ƒæ•´ <code>solon-flow</code> Task æ›´åä¸º ConditionDesc</li>
<li>è°ƒæ•´ <code>solon-flow</code> XxxDecl å‘½åé£æ ¼æ”¹ä¸º XxxSpec</li>
<li>è°ƒæ•´ <code>solon-flow</code> GraphDecl.parseByXxx å‘½åé£æ ¼æ”¹ä¸º GraphSpec.fromXxx</li>
<li>è°ƒæ•´ <code>solon-flow</code> Graph.parseByXxx å‘½åé£æ ¼æ”¹ä¸º Graph.fromXxx</li>
<li>è°ƒæ•´ <code>solon-ai-mcp</code> getResourceTemplatesã€getResources ä¸å†å…±äº«æ³¨å†Œ</li>
<li>è°ƒæ•´ <code>solon-ai-mcp</code> McpServerManager å†…éƒ¨æ¥å£æ›´åä¸º McpPrimitivesRegistry ï¼ˆMCP åŸè¯­æ³¨å†Œå™¨ï¼‰</li>
<li>è°ƒæ•´ <code>solon-ai-mcp</code> McpClientProvider é»˜è®¤ä¸å¯ç”¨å¿ƒè·³æœºåˆ¶ï¼ˆéšç€ mcp-sdk çš„æˆç†Ÿï¼Œserver éƒ½æœ‰å¿ƒè·³æœºåˆ¶äº†ï¼‰</li>
<li>ä¿®å¤ <code>solon</code> IndexFiles è·¯å¾„è¡¨è¾¾å¼çš„å…¼å®¹é—®é¢˜ï¼ˆæ·»åŠ è½¬æ¢ <code>*-&gt;@</code>ã€<code>:-&gt;!</code>ï¼‰</li>
<li>ä¿®å¤ <code>solon</code> ParamWrap:getName åŠ  '@Param(name=xxx)' æ³¨è§£æ—¶æ²¡æœ‰ç”Ÿæ•ˆçš„é—®é¢˜ï¼ˆv3.7.0 å‡ºç°ï¼‰ã€‚å¯¹ solon-cache ä¼šæœ‰å½±å“</li>
<li>ä¿®å¤ <code>solon-web-vertx</code> VxWebContext._requestBody å¦‚æœä¸º null æ–‡ä»¶ä¸Šä¼ æ—¶ä¼šå‡ºé”™çš„é—®é¢˜</li>
<li>ä¿®å¤ <code>solon-docs-openapi2</code> è¿”å›ç±»å‹ä¸­æ³›å‹å¤±æ•ˆçš„é—®é¢˜ï¼ˆv3.7.0 å‡ºç°ï¼‰</li>
<li>snack4 å‡ä¸º 4.0.20</li>
<li>jackson å‡ä¸º 2.19.2</li>
<li>liquor å‡ä¸º 1.6.6</li>
<li>asm å‡ä¸º 9.9</li>
</ul>
<h4 data-id="heading-5">solon ä»“åº“è¡¥å……è¯´æ˜</h4>
<p>æ–°ç‰¹æ€§ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> {
   <span class="hljs-keyword">static</span> ScopeLocal&lt;String&gt; LOCAL = ScopeLocal.newInstance();

   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span>{
       LOCAL.with(<span class="hljs-string">"test"</span>, ()-&gt;{
           System.out.println(LOCAL.get());
       });
   }
}
</code></pre>
<h4 data-id="heading-6">solon-ai ä»“åº“è¡¥å……è¯´æ˜</h4>
<p>æ–°ç‰¹æ€§å±•ç¤ºï¼š1.MCP æ— çŠ¶æ€ä¼šè¯ï¼ˆSTREAMABLE_STATELESSï¼‰å’Œ 2.CompletableFuture å¼‚æ­¥MCPå·¥å…·</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@McpServerEndpoint(channel = McpChannel.STREAMABLE_STATELESS, mcpEndpoint = "/mcp1")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">McpServerTool</span> {
    <span class="hljs-meta">@ToolMapping(description = "æŸ¥è¯¢å¤©æ°”é¢„æŠ¥", returnDirect = true)</span>
    <span class="hljs-keyword">public</span> CompletableFuture&lt;String&gt; <span class="hljs-title function_">getWeather</span><span class="hljs-params">(<span class="hljs-meta">@Param(description = "åŸå¸‚ä½ç½®")</span> String location)</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.completedFuture(<span class="hljs-string">"æ™´ï¼Œ14åº¦"</span>);
    }
}
</code></pre>
<p>ä¼ è¾“æ–¹å¼å¯¹åº”è¡¨ï¼šï¼ˆæœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯ï¼Œé¡»ä½¿ç”¨å¯¹åº”çš„ä¼ è¾“æ–¹å¼æ‰å¯é€šè®¯ï¼‰</p>






























<table><thead><tr><th>æœåŠ¡ç«¯</th><th>å®¢æˆ·ç«¯</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>STDIO</td><td>STDIO</td><td/></tr><tr><td>SSE</td><td>SSE</td><td/></tr><tr><td>STREAMABLE</td><td>STREAMABLE</td><td/></tr><tr><td>STREAMABLE_STATELESS</td><td>STREAMABLE</td><td>å¯¹ server é›†ç¾¤å¾ˆå‹å¥½</td></tr></tbody></table>
<ul>
<li>STREAMABLE_STATELESS é›†ç¾¤ï¼Œä¸éœ€è¦ ip_hashï¼Œä½†â€œåŸè¯­â€å˜åŒ–åæ— æ³•é€šçŸ¥ client</li>
</ul>
<h4 data-id="heading-7">solon-flow ä»“åº“è¡¥å……è¯´æ˜</h4>
<p>é‡è¦å˜åŒ–ï¼š</p>
<ul>
<li>å–æ¶ˆâ€œæœ‰çŠ¶æ€â€ã€â€œæ— çŠ¶æ€â€æ¦‚å¿µã€‚</li>
<li>solon-flow å›å½’é€šç”¨æµç¨‹å¼•æ“ï¼ˆåˆ†ç¦»â€œæœ‰çŠ¶æ€â€çš„æ¦‚å¿µï¼‰ã€‚</li>
<li>æ–°å¢ solon-flow-workflow ä¸ºå·¥ä½œæµæ€§è´¨çš„å°è£…ï¼ˆæœªæ¥å¯èƒ½ä¼šæœ‰ dataflow ç­‰ï¼‰ã€‚</li>
</ul>
<p>å…¼å®¹å˜åŒ–å¯¹ç…§è¡¨ï¼š</p>






































































<table><thead><tr><th>æ—§åç§°</th><th>æ–°åç§°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>GraphDecl</code></td><td><code>GraphSpec</code></td><td>å›¾å®šä¹‰</td></tr><tr><td><code>GraphDecl.parseByXxx</code></td><td><code>GraphSpec.fromXxx</code></td><td>å›¾å®šä¹‰åŠ è½½</td></tr><tr><td><code>Graph.parseByXxx</code></td><td><code>Graph.fromXxx</code></td><td>å›¾åŠ è½½</td></tr><tr><td><code>LinkDecl</code></td><td><code>LinkSpec</code></td><td>è¿æ¥å®šä¹‰</td></tr><tr><td><code>NodeDecl</code></td><td><code>NodeSpec</code></td><td>èŠ‚ç‚¹å®šä¹‰</td></tr><tr><td><code>Condition</code></td><td><code>ConditionDesc</code></td><td>æ¡ä»¶æè¿°</td></tr><tr><td><code>Task</code></td><td><code>TaskDesc</code></td><td>ä»»åŠ¡æè¿°ï¼ˆé¿å…ä¸ workflow çš„æ¦‚å¿µå†²çªï¼‰</td></tr><tr><td/><td/><td/></tr><tr><td><code>FlowStatefulService</code></td><td><code>WorkflowService</code></td><td>å·¥ä½œæµæœåŠ¡</td></tr><tr><td><code>StatefulTask</code></td><td><code>Task</code></td><td>ä»»åŠ¡</td></tr><tr><td><code>Operation</code></td><td><code>TaskAction</code></td><td>ä»»åŠ¨å·¥ä½œ</td></tr><tr><td><code>TaskType</code></td><td><code>TaskState</code></td><td>ä»»åŠ¡çŠ¶æ€</td></tr></tbody></table>
<p>FlowStatefulService åˆ° WorkflowService çš„æ¥å£å˜åŒ–å¯¹ç…§è¡¨ï¼š</p>


















































<table><thead><tr><th>æ—§åç§°</th><th>æ–°åç§°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>postOperation(..)</code></td><td><code>postTask(..)</code></td><td>æäº¤ä»»åŠ¡</td></tr><tr><td><code>postOperationIfWaiting(..)</code></td><td><code>postTaskIfWaiting(..)</code></td><td>æäº¤ä»»åŠ¡</td></tr><tr><td/><td/><td/></tr><tr><td><code>evel(..)</code></td><td>/</td><td>æ‰§è¡Œ</td></tr><tr><td><code>stepForward(..)</code></td><td>/</td><td>å•æ­¥å‰è¿›</td></tr><tr><td><code>stepBack(..)</code></td><td>/</td><td>å•æ­¥åé€€</td></tr><tr><td/><td/><td/></tr><tr><td>/</td><td><code>getState(..)</code></td><td>è·å–çŠ¶æ€</td></tr></tbody></table>
<p>æ–°ç‰¹æ€§é¢„è§ˆï¼šGraph ç¡¬ç¼–ç æ–¹å¼ï¼ˆåŠä¿®æ”¹èƒ½åŠ›å¢å¼ºï¼‰</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//ç¡¬ç¼–ç </span>
<span class="hljs-type">Graph</span> <span class="hljs-variable">graph</span> <span class="hljs-operator">=</span> Graph.create(<span class="hljs-string">"demo1"</span>, <span class="hljs-string">"ç¤ºä¾‹"</span>, spec -&gt; {
    spec.addStart(<span class="hljs-string">"start"</span>).title(<span class="hljs-string">"å¼€å§‹"</span>).linkAdd(<span class="hljs-string">"01"</span>);
    spec.addActivity(<span class="hljs-string">"n1"</span>).task(<span class="hljs-string">"@AaMetaProcessCom"</span>).linkAdd(<span class="hljs-string">"end"</span>);
    spec.addEnd(<span class="hljs-string">"end"</span>).title(<span class="hljs-string">"ç»“æŸ"</span>);
});

<span class="hljs-comment">//ä¿®æ”¹</span>
<span class="hljs-type">Graph</span> <span class="hljs-variable">graphNew</span> <span class="hljs-operator">=</span> Graph.copy(graph, spec -&gt; {
    spec.getNode(<span class="hljs-string">"n1"</span>).linkRemove(<span class="hljs-string">"end"</span>).linkAdd(<span class="hljs-string">"n2"</span>); <span class="hljs-comment">//ç§»æ‰ n1 è¿æ¥ï¼›æ”¹ä¸º n2 è¿æ¥</span>
    spec.addActivity(<span class="hljs-string">"n2"</span>).linkAdd(<span class="hljs-string">"end"</span>);
});
</code></pre>
<p>æ–°ç‰¹æ€§é¢„è§ˆï¼šFlowContext:lastNodeId ï¼ˆè®¡ç®—çš„ä¸­æ–­ä¸æ¢å¤ï¼‰ã€‚å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fsolon.noear.org%2Farticle%2F1246" target="_blank" title="https://solon.noear.org/article/1246" ref="nofollow noopener noreferrer">solon.noear.org/article/124â€¦</a></p>
<pre><code class="hljs language-java" lang="java">flowEngine.eval(graph, context.lastNodeId(), context);
<span class="hljs-comment">//...ï¼ˆä»ä¸Šä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹æ‰§è¡Œï¼‰</span>
flowEngine.eval(graph, context.lastNodeId(), context);
</code></pre>
<p>æ–°ç‰¹æ€§é¢„è§ˆï¼šWorkflowServiceï¼ˆæ›¿ä»£ FlowStatefulServiceï¼‰</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">WorkflowService</span> <span class="hljs-variable">workflow</span> <span class="hljs-operator">=</span> WorkflowService.of(engine, WorkflowDriver.builder()
        .stateController(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ActorStateController</span>()) 
        .stateRepository(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InMemoryStateRepository</span>()) 
        .build());


<span class="hljs-comment">//1. å–å‡ºä»»åŠ¡</span>
<span class="hljs-type">Task</span> <span class="hljs-variable">task</span> <span class="hljs-operator">=</span> workflow.getTask(graph, context);

<span class="hljs-comment">//2. æäº¤ä»»åŠ¡</span>
workflow.postTask(task.getNode(), TaskAction.FORWARD, context);
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çŸ¥è¯†åº“-å‘é‡åŒ–åŠŸèƒ½-æµå¼åˆ†ç‰‡]]></title>    <link>https://juejin.cn/post/7587264707285024778</link>    <guid>https://juejin.cn/post/7587264707285024778</guid>    <pubDate>2025-12-25T01:40:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587264707285024778" data-draft-id="7586614240531857434" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çŸ¥è¯†åº“-å‘é‡åŒ–åŠŸèƒ½-æµå¼åˆ†ç‰‡"/> <meta itemprop="keywords" content="åç«¯,Elasticsearch"/> <meta itemprop="datePublished" content="2025-12-25T01:40:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é€ è½®å­çš„çŒª"/> <meta itemprop="url" content="https://juejin.cn/user/497453720940158"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çŸ¥è¯†åº“-å‘é‡åŒ–åŠŸèƒ½-æµå¼åˆ†ç‰‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/497453720940158/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é€ è½®å­çš„çŒª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T01:40:14.000Z" title="Thu Dec 25 2025 01:40:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">çŸ¥è¯†åº“-å‘é‡åŒ–åŠŸèƒ½-æµå¼åˆ†ç‰‡</h2>
<h3 data-id="heading-1">ä¸€ã€è®¾è®¡èƒŒæ™¯</h3>
<p>é’ˆå¯¹è¶…å¤§æ–‡æœ¬ï¼ˆå¦‚100MBä»¥ä¸Šçº¯æ–‡æœ¬æ–‡ä»¶ï¼‰ï¼Œä¼ ç»Ÿâ€œä¸€æ¬¡æ€§åŠ è½½å…¨éƒ¨æ–‡æœ¬åˆ°å†…å­˜å†åˆ†ç‰‡â€çš„æ–¹å¼æ˜“å¯¼è‡´å†…å­˜æº¢å‡ºã€æ–¹æ³•å¡æ­»ç­‰é—®é¢˜ã€‚å› æ­¤é‡‡ç”¨<strong>æµå¼åˆ†ç‰‡ç­–ç•¥</strong>ï¼šé€æ‰¹æ¬¡è¯»å–æ–‡æœ¬åˆ°ç¼“å†²åŒºï¼ŒæŒ‰éœ€ç”Ÿæˆåˆ†ç‰‡ï¼Œå…¨ç¨‹ä¸åŠ è½½å®Œæ•´æ–‡æœ¬åˆ°å†…å­˜ï¼Œå¤§å¹…é™ä½å†…å­˜å ç”¨ã€‚</p>
<h3 data-id="heading-2">äºŒã€æ ¸å¿ƒé€»è¾‘</h3>
<ol>
<li><strong>æµå¼è¯»å–</strong>ï¼šé€šè¿‡<code>Reader</code>é€ç¼“å†²åŒºè¯»å–æ–‡æœ¬ï¼Œé¿å…ä¸€æ¬¡æ€§åŠ è½½å…¨é‡å†…å®¹ï¼›</li>
<li><strong>æ‰¹æ¬¡åˆ†ç‰‡</strong>ï¼šå¯¹æ¯æ‰¹æ¬¡è¯»å–çš„æ–‡æœ¬æŒ‰å¥å­ç»“æŸç¬¦åˆ†å‰²ï¼Œä¿è¯åˆ†ç‰‡è¯­ä¹‰å®Œæ•´æ€§ï¼›</li>
<li><strong>å…œåº•æœºåˆ¶</strong>ï¼šè®¾ç½®æœ€å°é€’å¢æ­¥é•¿ã€æœ€å¤§å¾ªç¯æ¬¡æ•°ï¼Œé¿å…æ­»å¾ªç¯ï¼›</li>
<li><strong>é‡å å¤„ç†</strong>ï¼šåˆ†ç‰‡é—´ä¿ç•™é‡å å­—ç¬¦ï¼Œé˜²æ­¢è·¨æ‰¹æ¬¡å¥å­è¯­ä¹‰æ–­è£‚ï¼›</li>
<li><strong>å‰©ä½™æ–‡æœ¬å¤„ç†</strong>ï¼šåˆå¹¶æœªå¤„ç†å®Œçš„æ–‡æœ¬åˆ°ä¸‹ä¸€æ‰¹æ¬¡ï¼Œä¿è¯åˆ†ç‰‡å®Œæ•´æ€§ã€‚</li>
</ol>
<h3 data-id="heading-3">ä¸‰ã€æ ¸å¿ƒå®ç°ä»£ç </h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.io.IOException;
<span class="hljs-keyword">import</span> java.io.Reader;
<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.Iterator;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.regex.Pattern;

<span class="hljs-comment">/**
 * è¶…å¤§æ–‡æœ¬æµå¼åˆ†ç‰‡å·¥å…·ç±»
 * æ ¸å¿ƒï¼šæŒ‰éœ€è¯»å–ã€æŒ‰éœ€åˆ†ç‰‡ï¼Œé¿å…ä¸€æ¬¡æ€§åŠ è½½å…¨é‡æ–‡æœ¬åˆ°å†…å­˜
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamTextSplitter</span> {
    <span class="hljs-comment">// å¥å­ç»“æŸç¬¦æ­£åˆ™ï¼ˆè¦†ç›–ä¸­è‹±æ–‡ç»“æŸç¬¦ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Pattern</span> <span class="hljs-variable">SENTENCE_END_PATTERN</span> <span class="hljs-operator">=</span> Pattern.compile(<span class="hljs-string">"[ã€‚ï¼ï¼Ÿï¼›\\n\\.!?;]"</span>);
    <span class="hljs-comment">// å•åˆ†ç‰‡æœ€å¤§å­—ç¬¦æ•°ï¼ˆå¯æ ¹æ®æ¨¡å‹ä¸Šä¸‹æ–‡è°ƒæ•´ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MAX_CHUNK_LENGTH</span> <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>;
    <span class="hljs-comment">// åˆ†ç‰‡é‡å å­—ç¬¦æ•°ï¼ˆé¿å…è·¨åˆ†ç‰‡è¯­ä¹‰æ–­è£‚ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">CHUNK_OVERLAP</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;
    <span class="hljs-comment">// æœ€å°é€’å¢æ­¥é•¿ï¼ˆé˜²æ­¢æ­»å¾ªç¯ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MIN_STEP</span> <span class="hljs-operator">=</span> MAX_CHUNK_LENGTH / <span class="hljs-number">2</span>;
    <span class="hljs-comment">// æœ€å¤§å¾ªç¯æ¬¡æ•°ï¼ˆå…œåº•ï¼Œé¿å…æ— é™å¾ªç¯ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MAX_LOOP_COUNT</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;

    <span class="hljs-comment">/**
     * æµå¼åˆ†ç‰‡ï¼šæ ¸å¿ƒæ–¹æ³•ï¼ŒæŒ‰éœ€ç”Ÿæˆæ–‡æœ¬åˆ†ç‰‡
     * <span class="hljs-doctag">@param</span> textReader æ–‡æœ¬æµå¼è¯»å–å™¨ï¼ˆæ”¯æŒFileReader/InputStreamReaderç­‰ï¼‰
     * <span class="hljs-doctag">@param</span> bufferSize ç¼“å†²åŒºå¤§å°ï¼ˆå»ºè®®8192/16384å­—ç¬¦ï¼Œå¹³è¡¡IOæ¬¡æ•°ä¸å†…å­˜å ç”¨ï¼‰
     * <span class="hljs-doctag">@return</span> åˆ†ç‰‡è¿­ä»£å™¨ï¼ˆæŒ‰éœ€éå†ï¼Œä¸ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰åˆ†ç‰‡åˆ°å†…å­˜ï¼‰
     * <span class="hljs-doctag">@throws</span> IOException æ–‡æœ¬è¯»å–å¼‚å¸¸
     */</span>
    <span class="hljs-keyword">public</span> Iterator&lt;String&gt; <span class="hljs-title function_">streamSplitText</span><span class="hljs-params">(Reader textReader, <span class="hljs-type">int</span> bufferSize)</span> <span class="hljs-keyword">throws</span> IOException {
        List&lt;String&gt; results = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        List&lt;String&gt; currentBatchChunks = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-type">char</span>[] buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">char</span>[bufferSize];
        <span class="hljs-type">int</span> readLen;
        <span class="hljs-comment">// ä¸Šä¸€æ‰¹æ¬¡æœªå¤„ç†å®Œçš„æ–‡æœ¬ï¼ˆåˆå¹¶åˆ°ä¸‹ä¸€æ‰¹ï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">remainingText</span> <span class="hljs-operator">=</span> <span class="hljs-string">""</span>;

        <span class="hljs-comment">// é€ç¼“å†²åŒºè¯»å–æ–‡æœ¬</span>
        <span class="hljs-keyword">while</span> ((readLen = textReader.read(buffer)) != -<span class="hljs-number">1</span>) {
            <span class="hljs-comment">// æ‹¼æ¥ï¼šå‰©ä½™æ–‡æœ¬ + æ–°è¯»å–çš„æ–‡æœ¬</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">batchText</span> <span class="hljs-operator">=</span> remainingText + <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(buffer, <span class="hljs-number">0</span>, readLen);
            <span class="hljs-comment">// å¯¹å½“å‰æ‰¹æ¬¡æ–‡æœ¬è¿›è¡Œåˆ†ç‰‡</span>
            List&lt;String&gt; batchChunks = splitBatchText(batchText);

            <span class="hljs-keyword">if</span> (!batchChunks.isEmpty()) {
                <span class="hljs-type">String</span> <span class="hljs-variable">lastChunk</span> <span class="hljs-operator">=</span> batchChunks.get(batchChunks.size() - <span class="hljs-number">1</span>);
                <span class="hljs-comment">// åˆ¤æ–­æœ€åä¸€ä¸ªåˆ†ç‰‡æ˜¯å¦ä¸ºâ€œä¸å®Œæ•´åˆ†ç‰‡â€ï¼ˆé•¿åº¦&lt;æœ€å¤§é•¿åº¦çš„1/2ï¼‰</span>
                <span class="hljs-keyword">if</span> (lastChunk.length() &lt; MAX_CHUNK_LENGTH / <span class="hljs-number">2</span>) {
                    <span class="hljs-comment">// ä¸å®Œæ•´åˆ†ç‰‡ï¼šä¿ç•™åˆ°ä¸‹ä¸€æ‰¹æ¬¡å¤„ç†</span>
                    remainingText = lastChunk;
                    <span class="hljs-comment">// å®Œæ•´åˆ†ç‰‡ï¼šåŠ å…¥ç»“æœé›†</span>
                    currentBatchChunks.addAll(batchChunks.subList(<span class="hljs-number">0</span>, batchChunks.size() - <span class="hljs-number">1</span>));
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-comment">// æœ€åä¸€ä¸ªåˆ†ç‰‡å®Œæ•´ï¼šæ¸…ç©ºå‰©ä½™æ–‡æœ¬ï¼Œå…¨éƒ¨åŠ å…¥</span>
                    remainingText = <span class="hljs-string">""</span>;
                    currentBatchChunks.addAll(batchChunks);
                }
            }

            <span class="hljs-comment">// æ‰¹é‡æ·»åŠ åˆ°ç»“æœé›†ï¼Œå‡å°‘å†…å­˜æ³¢åŠ¨</span>
            results.addAll(currentBatchChunks);
            currentBatchChunks.clear();
        }

        <span class="hljs-comment">// å¤„ç†æœ€åå‰©ä½™çš„æ–‡æœ¬ï¼ˆéç©ºåˆ™ä½œä¸ºæœ€åä¸€ä¸ªåˆ†ç‰‡ï¼‰</span>
        <span class="hljs-keyword">if</span> (!remainingText.isEmpty()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">lastChunk</span> <span class="hljs-operator">=</span> remainingText.trim();
            <span class="hljs-keyword">if</span> (!lastChunk.isEmpty()) {
                results.add(lastChunk);
            }
        }

        <span class="hljs-comment">// è¿”å›è¿­ä»£å™¨ï¼Œæ”¯æŒæŒ‰éœ€éå†</span>
        <span class="hljs-keyword">return</span> results.iterator();
    }

    <span class="hljs-comment">/**
     * æ‰¹æ¬¡æ–‡æœ¬åˆ†ç‰‡ï¼šå¯¹å•æ‰¹æ¬¡æ–‡æœ¬æŒ‰å¥å­ç»“æŸç¬¦åˆ†å‰²ï¼Œä¿è¯è¯­ä¹‰å®Œæ•´
     * <span class="hljs-doctag">@param</span> text å•æ‰¹æ¬¡è¯»å–çš„æ–‡æœ¬
     * <span class="hljs-doctag">@return</span> è¯¥æ‰¹æ¬¡çš„æ–‡æœ¬åˆ†ç‰‡åˆ—è¡¨
     */</span>
    <span class="hljs-keyword">private</span> List&lt;String&gt; <span class="hljs-title function_">splitBatchText</span><span class="hljs-params">(String text)</span> {
        List&lt;String&gt; chunks = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-type">int</span> <span class="hljs-variable">textLength</span> <span class="hljs-operator">=</span> text.length();
        <span class="hljs-keyword">if</span> (textLength == <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span> chunks;
        }

        <span class="hljs-type">int</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">loopCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;

        <span class="hljs-comment">// å¾ªç¯åˆ†ç‰‡ï¼Œç›´åˆ°å¤„ç†å®Œå½“å‰æ‰¹æ¬¡æ–‡æœ¬æˆ–è¾¾åˆ°æœ€å¤§å¾ªç¯æ¬¡æ•°</span>
        <span class="hljs-keyword">while</span> (start &lt; textLength &amp;&amp; loopCount &lt; MAX_LOOP_COUNT) {
            loopCount++;
            <span class="hljs-comment">// 1. åŸºç¡€ç»“æŸä½ç½®ï¼ˆä¸è¶…è¿‡æœ€å¤§åˆ†ç‰‡é•¿åº¦ï¼‰</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> Math.min(start + MAX_CHUNK_LENGTH, textLength);
            <span class="hljs-comment">// 2. è°ƒæ•´ç»“æŸä½ç½®åˆ°æœ€è¿‘çš„å¥å­ç»“æŸç¬¦ï¼ˆä¿è¯è¯­ä¹‰å®Œæ•´ï¼‰</span>
            end = adjustToSentenceEnd(text, start, end);
            <span class="hljs-comment">// 3. æˆªå–åˆ†ç‰‡å¹¶å»ç©º</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">chunk</span> <span class="hljs-operator">=</span> text.substring(start, end).trim();
            <span class="hljs-keyword">if</span> (!chunk.isEmpty()) {
                chunks.add(chunk);
            }

            <span class="hljs-comment">// 4. è®¡ç®—ä¸‹ä¸€ä¸ªåˆ†ç‰‡çš„èµ·å§‹ä½ç½®ï¼ˆæ ¸å¿ƒï¼šé¿å…æ­»å¾ªç¯ï¼‰</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">nextStart</span> <span class="hljs-operator">=</span> end - CHUNK_OVERLAP;
            nextStart = Math.max(nextStart, start + MIN_STEP); <span class="hljs-comment">// è‡³å°‘é€’å¢æœ€å°æ­¥é•¿</span>
            nextStart = Math.min(nextStart, textLength);       <span class="hljs-comment">// ä¸è¶…è¿‡æ–‡æœ¬é•¿åº¦</span>

            <span class="hljs-comment">// 5. ç»ˆæ­¢æ¡ä»¶ï¼šèµ·å§‹ä½ç½®ä¸å†é€’å¢ï¼ˆé˜²æ­¢æ­»å¾ªç¯ï¼‰</span>
            <span class="hljs-keyword">if</span> (nextStart &lt;= start) {
                <span class="hljs-keyword">break</span>;
            }
            start = nextStart;
        }

        <span class="hljs-comment">// å…œåº•ï¼šå¤„ç†æœ€åå‰©ä½™çš„æ–‡æœ¬ï¼ˆå¾ªç¯ç»ˆæ­¢åä»æœ‰æœªå¤„ç†å†…å®¹ï¼‰</span>
        <span class="hljs-keyword">if</span> (start &lt; textLength) {
            <span class="hljs-type">String</span> <span class="hljs-variable">lastChunk</span> <span class="hljs-operator">=</span> text.substring(start).trim();
            <span class="hljs-keyword">if</span> (!lastChunk.isEmpty()) {
                chunks.add(lastChunk);
            }
        }

        <span class="hljs-comment">// æ—¥å¿—æç¤ºï¼šå¾ªç¯æ¬¡æ•°è¾¾ä¸Šé™ï¼ˆéœ€æ’æŸ¥æ–‡æœ¬æ ¼å¼é—®é¢˜ï¼‰</span>
        <span class="hljs-keyword">if</span> (loopCount &gt;= MAX_LOOP_COUNT) {
            System.err.printf(<span class="hljs-string">"æ‰¹æ¬¡æ–‡æœ¬åˆ†ç‰‡å¾ªç¯æ¬¡æ•°è¾¾ä¸Šé™ï¼ˆ%dæ¬¡ï¼‰ï¼Œå¯èƒ½å­˜åœ¨å¼‚å¸¸æ–‡æœ¬æ ¼å¼ï¼æ–‡æœ¬é•¿åº¦ï¼š%d%n"</span>, MAX_LOOP_COUNT, textLength);
        }

        <span class="hljs-keyword">return</span> chunks;
    }

    <span class="hljs-comment">/**
     * è°ƒæ•´åˆ†ç‰‡ç»“æŸä½ç½®åˆ°å¥å­æœ«å°¾ï¼ˆä¼˜åŒ–ï¼šé¿å…è¿‡åº¦å›æº¯ï¼‰
     * <span class="hljs-doctag">@param</span> text å¾…åˆ†ç‰‡æ–‡æœ¬
     * <span class="hljs-doctag">@param</span> start åˆ†ç‰‡èµ·å§‹ä½ç½®
     * <span class="hljs-doctag">@param</span> end åŸºç¡€ç»“æŸä½ç½®
     * <span class="hljs-doctag">@return</span> è°ƒæ•´åçš„ç»“æŸä½ç½®ï¼ˆä¿è¯è¯­ä¹‰å®Œæ•´ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">adjustToSentenceEnd</span><span class="hljs-params">(String text, <span class="hljs-type">int</span> start, <span class="hljs-type">int</span> end)</span> {
        <span class="hljs-comment">// å·²åˆ°æ–‡æœ¬æœ«å°¾ï¼Œç›´æ¥è¿”å›</span>
        <span class="hljs-keyword">if</span> (end &gt;= text.length()) {
            <span class="hljs-keyword">return</span> end;
        }

        <span class="hljs-comment">// æˆªå–å½“å‰åˆ†ç‰‡èŒƒå›´çš„æ–‡æœ¬</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">subText</span> <span class="hljs-operator">=</span> text.substring(start, end);
        <span class="hljs-comment">// æŸ¥æ‰¾æœ€åä¸€ä¸ªå¥å­ç»“æŸç¬¦çš„ä½ç½®</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">lastEndPos</span> <span class="hljs-operator">=</span> findLastSentenceEnd(subText);

        <span class="hljs-comment">// ä»…å½“å›æº¯ååˆ†ç‰‡é•¿åº¦â‰¥æœ€å°æœ‰æ•ˆé•¿åº¦æ—¶ï¼Œæ‰è°ƒæ•´ï¼ˆé¿å…è¿‡çŸ­åˆ†ç‰‡ï¼‰</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">minValidLength</span> <span class="hljs-operator">=</span> <span class="hljs-number">50</span>;
        <span class="hljs-keyword">if</span> (lastEndPos != -<span class="hljs-number">1</span>) {
            <span class="hljs-type">int</span> <span class="hljs-variable">adjustedEnd</span> <span class="hljs-operator">=</span> start + lastEndPos + <span class="hljs-number">1</span>;
            <span class="hljs-keyword">if</span> (adjustedEnd - start &gt;= minValidLength) {
                <span class="hljs-keyword">return</span> adjustedEnd;
            }
        }

        <span class="hljs-comment">// æ— æœ‰æ•ˆå¥å­ç»“æŸç¬¦ï¼Œè¿”å›åŸºç¡€ç»“æŸä½ç½®</span>
        <span class="hljs-keyword">return</span> end;
    }

    <span class="hljs-comment">/**
     * æŸ¥æ‰¾æ–‡æœ¬ä¸­æœ€åä¸€ä¸ªå¥å­ç»“æŸç¬¦çš„ä½ç½®
     * <span class="hljs-doctag">@param</span> text å¾…æŸ¥æ‰¾æ–‡æœ¬
     * <span class="hljs-doctag">@return</span> æœ€åä¸€ä¸ªç»“æŸç¬¦çš„ç´¢å¼•ï¼ˆæ— åˆ™è¿”å›-1ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">findLastSentenceEnd</span><span class="hljs-params">(String text)</span> {
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> text.length() - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
            <span class="hljs-keyword">if</span> (SENTENCE_END_PATTERN.matcher(String.valueOf(text.charAt(i))).matches()) {
                <span class="hljs-keyword">return</span> i;
            }
        }
        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
    }
}
</code></pre>
<h3 data-id="heading-4">å››ã€ä½¿ç”¨æ–¹æ³•</h3>
<h4 data-id="heading-5">4.1 åŸºç¡€ä½¿ç”¨ï¼ˆè¯»å–æœ¬åœ°è¶…å¤§æ–‡æœ¬æ–‡ä»¶ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.io.FileReader;
<span class="hljs-keyword">import</span> java.io.Reader;
<span class="hljs-keyword">import</span> java.util.Iterator;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamSplitterDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// 1. åˆå§‹åŒ–æµå¼åˆ†ç‰‡å·¥å…·</span>
        <span class="hljs-type">StreamTextSplitter</span> <span class="hljs-variable">splitter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StreamTextSplitter</span>();
        <span class="hljs-comment">// 2. å®šä¹‰æ–‡ä»¶è·¯å¾„å’Œç¼“å†²åŒºå¤§å°ï¼ˆå»ºè®®8192å­—ç¬¦ï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">"D:/large_text.txt"</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">bufferSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">8192</span>;

        <span class="hljs-keyword">try</span> (<span class="hljs-type">Reader</span> <span class="hljs-variable">textReader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(filePath)) {
            <span class="hljs-comment">// 3. æ‰§è¡Œæµå¼åˆ†ç‰‡ï¼Œè·å–è¿­ä»£å™¨</span>
            Iterator&lt;String&gt; chunkIterator = splitter.streamSplitText(textReader, bufferSize);

            <span class="hljs-comment">// 4. æŒ‰éœ€éå†åˆ†ç‰‡ï¼ˆé€ä¸€åˆ†ç‰‡å¤„ç†ï¼Œä¸åŠ è½½å…¨é‡åˆ°å†…å­˜ï¼‰</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">chunkIndex</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
            <span class="hljs-keyword">while</span> (chunkIterator.hasNext()) {
                <span class="hljs-type">String</span> <span class="hljs-variable">chunk</span> <span class="hljs-operator">=</span> chunkIterator.next();
                chunkIndex++;
                <span class="hljs-comment">// ä¸šåŠ¡å¤„ç†ï¼šå¦‚å‘é‡åŒ–ã€å­˜å‚¨åˆ°ESç­‰</span>
                System.out.printf(<span class="hljs-string">"åˆ†ç‰‡%dï¼šé•¿åº¦=%dï¼Œå†…å®¹é¢„è§ˆï¼š%s%n"</span>,
                        chunkIndex,
                        chunk.length(),
                        chunk.substring(<span class="hljs-number">0</span>, Math.min(chunk.length(), <span class="hljs-number">50</span>))); <span class="hljs-comment">// é¢„è§ˆå‰50å­—ç¬¦</span>
            }

            System.out.printf(<span class="hljs-string">"åˆ†ç‰‡å®Œæˆï¼Œå…±ç”Ÿæˆ%dä¸ªåˆ†ç‰‡%n"</span>, chunkIndex);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æµå¼åˆ†ç‰‡å¤±è´¥ï¼š"</span> + e.getMessage());
            e.printStackTrace();
        }
    }
}
</code></pre>
<h4 data-id="heading-6">4.2 ç»“åˆæ–‡ä»¶ä¸Šä¼ åœºæ™¯ï¼ˆInputStreamReaderï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.web.multipart.MultipartFile;
<span class="hljs-keyword">import</span> java.io.InputStreamReader;
<span class="hljs-keyword">import</span> java.io.Reader;
<span class="hljs-keyword">import</span> java.nio.charset.StandardCharsets;

<span class="hljs-comment">/**
 * å¤„ç†ä¸Šä¼ çš„è¶…å¤§æ–‡æœ¬æ–‡ä»¶ï¼ˆå¦‚TXT/CSVï¼‰
 * <span class="hljs-doctag">@param</span> file ä¸Šä¼ çš„æ–‡ä»¶
 * <span class="hljs-doctag">@throws</span> Exception å¤„ç†å¼‚å¸¸
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processUploadedLargeFile</span><span class="hljs-params">(MultipartFile file)</span> <span class="hljs-keyword">throws</span> Exception {
    <span class="hljs-type">StreamTextSplitter</span> <span class="hljs-variable">splitter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StreamTextSplitter</span>();
    <span class="hljs-type">int</span> <span class="hljs-variable">bufferSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">16384</span>; <span class="hljs-comment">// å¤§æ–‡ä»¶å»ºè®®å¢å¤§ç¼“å†²åŒº</span>

    <span class="hljs-comment">// åŸºäºæ–‡ä»¶è¾“å…¥æµåˆ›å»ºReaderï¼ˆæŒ‡å®šUTF-8ç¼–ç é¿å…ä¹±ç ï¼‰</span>
    <span class="hljs-keyword">try</span> (<span class="hljs-type">Reader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(file.getInputStream(), StandardCharsets.UTF_8)) {
        Iterator&lt;String&gt; chunkIterator = splitter.streamSplitText(reader, bufferSize);

        <span class="hljs-comment">// éå†åˆ†ç‰‡ï¼Œé€ä¸ªå‘é‡åŒ–å¹¶å­˜å‚¨</span>
        <span class="hljs-keyword">while</span> (chunkIterator.hasNext()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">chunk</span> <span class="hljs-operator">=</span> chunkIterator.next();
            <span class="hljs-comment">// è°ƒç”¨å‘é‡åŒ–æ–¹æ³•</span>
            <span class="hljs-comment">// float[] vector = embeddingModel.embed(chunk);</span>
            <span class="hljs-comment">// å­˜å‚¨åˆ°ES</span>
            <span class="hljs-comment">// esService.saveChunk(chunk, vector);</span>
        }
    }
}
</code></pre>
<h4 data-id="heading-7">4.3 ç»“åˆPDF/Wordè§£æï¼ˆæµå¼å¤„ç†è§£æç»“æœï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æµå¼å¤„ç†PDFè§£æåçš„è¶…å¤§æ–‡æœ¬
 * <span class="hljs-doctag">@param</span> pdfFilePath PDFæ–‡ä»¶è·¯å¾„
 * <span class="hljs-doctag">@throws</span> Exception å¤„ç†å¼‚å¸¸
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">streamProcessPdf</span><span class="hljs-params">(String pdfFilePath)</span> <span class="hljs-keyword">throws</span> Exception {
    <span class="hljs-comment">// 1. è§£æPDFè·å–æ–‡æœ¬ï¼ˆå‚è€ƒPDFè§£ææ–‡æ¡£ï¼‰</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">pdfText</span> <span class="hljs-operator">=</span> PdfTextExtractor.getContent(pdfFilePath);
    <span class="hljs-comment">// 2. å°†å­—ç¬¦ä¸²è½¬ä¸ºReaderï¼ˆæ¨¡æ‹Ÿæµå¼è¯»å–ï¼‰</span>
    <span class="hljs-keyword">try</span> (<span class="hljs-type">Reader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">java</span>.io.StringReader(pdfText)) {
        <span class="hljs-type">StreamTextSplitter</span> <span class="hljs-variable">splitter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StreamTextSplitter</span>();
        Iterator&lt;String&gt; chunkIterator = splitter.streamSplitText(reader, <span class="hljs-number">8192</span>);

        <span class="hljs-comment">// 3. é€åˆ†ç‰‡å¤„ç†</span>
        <span class="hljs-keyword">while</span> (chunkIterator.hasNext()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">chunk</span> <span class="hljs-operator">=</span> chunkIterator.next();
            <span class="hljs-comment">// å‘é‡åŒ–+å­˜å‚¨é€»è¾‘</span>
        }
    }
}
</code></pre>
<h3 data-id="heading-8">äº”ã€æ ¸å¿ƒè®¾è®¡è¯´æ˜</h3>
<h4 data-id="heading-9">5.1 å…³é”®å‚æ•°è¯´æ˜</h4>



































<table><thead><tr><th>å‚æ•°å</th><th>å–å€¼</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>MAX_CHUNK_LENGTH</td><td>1000</td><td>å•åˆ†ç‰‡æœ€å¤§å­—ç¬¦æ•°ï¼Œéœ€åŒ¹é…åµŒå…¥æ¨¡å‹ä¸Šä¸‹æ–‡çª—å£ï¼ˆå¦‚num_ctx=1024ï¼‰</td></tr><tr><td>CHUNK_OVERLAP</td><td>100</td><td>åˆ†ç‰‡é—´é‡å å­—ç¬¦æ•°ï¼Œé¿å…è·¨åˆ†ç‰‡å¥å­è¯­ä¹‰æ–­è£‚ï¼ˆå¦‚â€œæˆ‘æ˜¯ä¸€ä¸ªæµ‹è¯•æ–‡æœ¬â€è¢«æˆªæ–­ä¸ºâ€œæˆ‘æ˜¯ä¸€ä¸ªâ€å’Œâ€œæµ‹è¯•æ–‡æœ¬â€ï¼‰</td></tr><tr><td>MIN_STEP</td><td>500</td><td>æœ€å°é€’å¢æ­¥é•¿ï¼Œé˜²æ­¢å› é‡å å¯¼è‡´startä½ç½®ä¸é€’å¢ï¼Œè§¦å‘æ­»å¾ªç¯</td></tr><tr><td>MAX_LOOP_COUNT</td><td>100</td><td>æœ€å¤§å¾ªç¯æ¬¡æ•°ï¼Œå…œåº•å¤„ç†å¼‚å¸¸æ–‡æœ¬ï¼ˆå¦‚æ— å¥å­ç»“æŸç¬¦çš„è¶…é•¿æ–‡æœ¬ï¼‰</td></tr><tr><td>bufferSize</td><td>8192/16384</td><td>ç¼“å†²åŒºå¤§å°ï¼Œå»ºè®®ä¸º2çš„å¹‚æ¬¡ï¼Œå¹³è¡¡IOæ¬¡æ•°ä¸å†…å­˜å ç”¨</td></tr></tbody></table>
<h4 data-id="heading-10">5.2 æ ¸å¿ƒä¼˜åŠ¿</h4>





























<table><thead><tr><th>ä¼˜åŠ¿</th><th>è§£å†³çš„é—®é¢˜</th></tr></thead><tbody><tr><td>æµå¼è¯»å–</td><td>é¿å…ä¸€æ¬¡æ€§åŠ è½½è¶…å¤§æ–‡æœ¬åˆ°å†…å­˜ï¼Œé˜²æ­¢OOM/æ–¹æ³•å¡æ­»</td></tr><tr><td>å¥å­ç»“æŸç¬¦åˆ†å‰²</td><td>ä¿è¯åˆ†ç‰‡è¯­ä¹‰å®Œæ•´æ€§ï¼Œé¿å…ç”Ÿç¡¬æˆªæ–­å¯¼è‡´çš„å‘é‡åŒ–è¯¯å·®</td></tr><tr><td>å‰©ä½™æ–‡æœ¬åˆå¹¶</td><td>é˜²æ­¢è·¨æ‰¹æ¬¡æ–‡æœ¬ä¸¢å¤±ï¼Œä¿è¯åˆ†ç‰‡å®Œæ•´æ€§</td></tr><tr><td>å¤šé‡å…œåº•æœºåˆ¶</td><td>æœ€å°æ­¥é•¿+æœ€å¤§å¾ªç¯æ¬¡æ•°ï¼Œå½»åº•é¿å…æ­»å¾ªç¯</td></tr><tr><td>è¿­ä»£å™¨è¿”å›</td><td>æ”¯æŒæŒ‰éœ€éå†ï¼Œåˆ†ç‰‡å¤„ç†å®Œæˆåç«‹å³é‡Šæ”¾å†…å­˜</td></tr></tbody></table>
<h3 data-id="heading-11">å…­ã€æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>ç¼–ç ä¸€è‡´æ€§</strong>ï¼šåˆ›å»º<code>Reader</code>æ—¶éœ€æŒ‡å®šç¼–ç ï¼ˆå¦‚UTF-8ï¼‰ï¼Œé¿å…ä¸åŒç¼–ç å¯¼è‡´çš„å­—ç¬¦è§£æé”™è¯¯ï¼›</li>
<li><strong>ç¼“å†²åŒºå¤§å°è°ƒæ•´</strong>ï¼šå°æ–‡ä»¶ï¼ˆ&lt;1MBï¼‰å»ºè®®ç”¨8192ï¼Œè¶…å¤§æ–‡ä»¶ï¼ˆ&gt;100MBï¼‰å»ºè®®ç”¨16384/32768ï¼Œå‡å°‘IOæ¬¡æ•°ï¼›</li>
<li><strong>å¼‚å¸¸æ–‡æœ¬å¤„ç†</strong>ï¼šè‹¥æ–‡æœ¬æ— ä»»ä½•å¥å­ç»“æŸç¬¦ï¼ˆå¦‚çº¯æ•°å­—/ä¹±ç ï¼‰ï¼Œä¼šè§¦å‘å…œåº•æŒ‰æœ€å¤§é•¿åº¦åˆ†å‰²ï¼Œéœ€åœ¨æ—¥å¿—ä¸­ç›‘æ§æ­¤ç±»æƒ…å†µï¼›</li>
<li><strong>èµ„æºé‡Šæ”¾</strong>ï¼šå¿…é¡»é€šè¿‡<code>try-with-resources</code>å…³é—­<code>Reader</code>ï¼Œé¿å…æ–‡ä»¶å¥æŸ„æ³„æ¼ï¼›</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šåˆ†ç‰‡å¤„ç†ï¼ˆå‘é‡åŒ–/å­˜å‚¨ï¼‰å»ºè®®ç»“åˆçº¿ç¨‹æ± å¼‚æ­¥æ‰§è¡Œï¼Œæå‡æ•´ä½“æ•ˆç‡ï¼›</li>
<li><strong>å†…å­˜ç›‘æ§</strong>ï¼šå¤„ç†GBçº§æ–‡æœ¬æ—¶ï¼Œå»ºè®®ç›‘æ§JVMå †å†…å­˜ï¼Œé¿å…ç¼“å†²åŒº+åˆ†ç‰‡ç»“æœé›†å ç”¨è¿‡å¤šå†…å­˜ï¼›</li>
<li><strong>ç‰¹æ®Šå­—ç¬¦å¤„ç†</strong>ï¼šè‹¥æ–‡æœ¬åŒ…å«å¤§é‡ç‰¹æ®Šç¬¦å·ï¼ˆå¦‚\t/\rï¼‰ï¼Œéœ€åœ¨åˆ†ç‰‡å‰å…ˆæ ¼å¼åŒ–æ¸…ç†ã€‚</li>
</ol>
<h3 data-id="heading-12">ä¸ƒã€æ‰©å±•å»ºè®®</h3>
<ol>
<li><strong>è‡ªå®šä¹‰ç»“æŸç¬¦</strong>ï¼šå¼€æ”¾<code>SENTENCE_END_PATTERN</code>é…ç½®ï¼Œæ”¯æŒä¸šåŠ¡è‡ªå®šä¹‰å¥å­ç»“æŸç¬¦ï¼›</li>
<li><strong>åˆ†ç‰‡è¿‡æ»¤</strong>ï¼šå¢åŠ ç©ºåˆ†ç‰‡/çŸ­åˆ†ç‰‡è¿‡æ»¤é€»è¾‘ï¼ˆå¦‚è¿‡æ»¤é•¿åº¦&lt;50çš„åˆ†ç‰‡ï¼‰ï¼›</li>
<li><strong>è¿›åº¦å›è°ƒ</strong>ï¼šå¢åŠ åˆ†ç‰‡è¿›åº¦å›è°ƒå‡½æ•°ï¼Œä¾¿äºå‰ç«¯å±•ç¤ºå¤„ç†è¿›åº¦ï¼›</li>
<li><strong>æ‰¹é‡å†™å…¥</strong>ï¼šç»“åˆESçš„bulkå†™å…¥ï¼Œç§¯ç´¯ä¸€å®šæ•°é‡åˆ†ç‰‡åæ‰¹é‡å­˜å‚¨ï¼Œå‡å°‘ç½‘ç»œè¯·æ±‚ï¼›</li>
<li><strong>è¶…æ—¶æ§åˆ¶</strong>ï¼šä¸ºåˆ†ç‰‡å¤„ç†å¢åŠ è¶…æ—¶æœºåˆ¶ï¼Œé¿å…å•ä¸ªåˆ†ç‰‡å¤„ç†è€—æ—¶è¿‡é•¿ï¼›</li>
<li><strong>ç›‘æ§æŒ‡æ ‡</strong>ï¼šç»Ÿè®¡åˆ†ç‰‡æ€»æ•°ã€å¹³å‡åˆ†ç‰‡é•¿åº¦ã€å¤„ç†è€—æ—¶ï¼Œä¾¿äºæ€§èƒ½è°ƒä¼˜ï¼›</li>
<li><strong>è‡ªé€‚åº”ç¼“å†²åŒº</strong>ï¼šæ ¹æ®æ–‡æœ¬è¯»å–é€Ÿåº¦åŠ¨æ€è°ƒæ•´ç¼“å†²åŒºå¤§å°ï¼Œå¹³è¡¡æ€§èƒ½ä¸å†…å­˜ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PyTorch 2.0 æ ¸å¿ƒæŠ€æœ¯æ·±åº¦è§£ætorch.compile ä»åŸç†åˆ°å®è·µ]]></title>    <link>https://juejin.cn/post/7587325326045675529</link>    <guid>https://juejin.cn/post/7587325326045675529</guid>    <pubDate>2025-12-25T01:55:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587325326045675529" data-draft-id="7587336857537658889" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PyTorch 2.0 æ ¸å¿ƒæŠ€æœ¯æ·±åº¦è§£ætorch.compile ä»åŸç†åˆ°å®è·µ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-25T01:55:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ•…æ—§"/> <meta itemprop="url" content="https://juejin.cn/user/3006493596857081"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PyTorch 2.0 æ ¸å¿ƒæŠ€æœ¯æ·±åº¦è§£ætorch.compile ä»åŸç†åˆ°å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3006493596857081/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ•…æ—§
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T01:55:51.000Z" title="Thu Dec 25 2025 01:55:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>PyTorch 2.0 æ ¸å¿ƒæŠ€æœ¯æ·±åº¦è§£ætorch.compile ä»åŸç†åˆ°å®è·µ</strong></h2>
<h3 data-id="heading-1"><strong>å¼•è¨€</strong></h3>
<p>éšç€æ·±åº¦å­¦ä¹ æ¨¡å‹å¤æ‚åº¦çš„ä¸æ–­æå‡ï¼Œæ¨¡å‹æ¨ç†å’Œè®­ç»ƒçš„æ€§èƒ½ä¼˜åŒ–æˆä¸ºäº†ä¸šç•Œå…³æ³¨çš„ç„¦ç‚¹ã€‚PyTorch 2.0 å¼•å…¥çš„ torch.compile åŠŸèƒ½ï¼Œé€šè¿‡å³æ—¶ç¼–è¯‘ï¼ˆJITï¼‰æŠ€æœ¯å®ç°äº†æ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚æœ¬æ–‡å°†ä»æŠ€æœ¯åŸç†ã€æ¶æ„è®¾è®¡åˆ°å®é™…åº”ç”¨ï¼Œå…¨é¢è§£æè¿™ä¸€é©å‘½æ€§ç‰¹æ€§ã€‚</p>
<h3 data-id="heading-2"><strong>1. æŠ€æœ¯èƒŒæ™¯ä¸å®šä½</strong></h3>
<h4 data-id="heading-3"><strong>1.1 ä» Eager åˆ° Graph æ¨¡å¼çš„æ¼”è¿›</strong></h4>
<p>ä¼ ç»Ÿçš„ PyTorch é‡‡ç”¨ <strong>Eager æ‰§è¡Œæ¨¡å¼</strong>ï¼Œæ¯ä¸ªæ“ä½œéƒ½ä¼šç«‹å³æ‰§è¡Œï¼Œè¿™ç§æ–¹å¼è™½ç„¶è°ƒè¯•å‹å¥½ï¼Œä½†å­˜åœ¨ä»¥ä¸‹æ€§èƒ½ç“¶é¢ˆï¼š</p>
<p>â— <strong>Python è§£é‡Šå™¨å¼€é”€</strong>ï¼šé¢‘ç¹çš„ Python å‡½æ•°è°ƒç”¨</p>
<p>â— <strong>å†…å­˜è®¿é—®æ•ˆç‡ä½</strong>ï¼šæ— æ³•è¿›è¡Œå…¨å±€å†…å­˜ä¼˜åŒ–</p>
<p>â— <strong>ç®—å­èåˆå›°éš¾</strong>ï¼šç¼ºä¹å…¨å±€è§†å›¾è¿›è¡Œä¼˜åŒ–</p>
<p>torch.compile ä½œä¸º <strong>Graph æ¨¡å¼</strong> çš„æ–°å®ç°ï¼Œä¸ TorchScript å’Œ FX Tracing å¹¶åˆ—ï¼Œé€šè¿‡ä»¥ä¸‹æ–¹å¼è§£å†³æ€§èƒ½é—®é¢˜ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ä¼ ç»Ÿ Eager æ¨¡å¼</span>
def traditional_forward(x, y): Â  Â 
 Â   <span class="hljs-attr">a</span> = torch.sin(x) Â  Â  Â <span class="hljs-comment"># ç«‹å³æ‰§è¡Œ Â  Â </span>
 Â   <span class="hljs-attr">b</span> = torch.cos(y) Â  Â  Â <span class="hljs-comment"># ç«‹å³æ‰§è¡Œ Â  Â  Â </span>
 Â   return a + b Â  Â  Â  Â  Â <span class="hljs-comment"># ç«‹å³æ‰§è¡Œ</span>
<span class="hljs-comment"># torch.compile ä¼˜åŒ–å@</span>
torch.compiledef optimized_forward(x, y): Â  Â 
 Â   <span class="hljs-attr">a</span> = torch.sin(x) Â  Â  Â <span class="hljs-comment"># å›¾æ•è· Â  </span>
 Â   <span class="hljs-attr">b</span> = torch.cos(y) Â  Â  Â <span class="hljs-comment"># å›¾æ•è· Â  Â </span>
 Â   return a + b Â  Â  Â  Â  Â <span class="hljs-comment"># ç”Ÿæˆèåˆkernel</span>
</code></pre>
<h4 data-id="heading-4"><strong>1.2 æ ¸å¿ƒä¼˜åŠ¿</strong></h4>
<p>â— <strong>é›¶ä»£ç ä¿®æ”¹</strong>ï¼šä»…éœ€æ·»åŠ è£…é¥°å™¨æˆ–å‡½æ•°è°ƒç”¨</p>
<p>â— <strong>åŠ¨æ€å›¾æ”¯æŒ</strong>ï¼šä¿æŒ PyTorch çš„çµæ´»æ€§</p>
<p>â— <strong>æ˜¾è‘—æ€§èƒ½æå‡</strong>ï¼šå…¸å‹åœºæ™¯ä¸‹ 1.3-2x åŠ é€Ÿæ¯”</p>
<h3 data-id="heading-5"><strong>2. ä½¿ç”¨æ–¹å¼ä¸æœ€ä½³å®è·µ</strong></h3>
<h4 data-id="heading-6"><strong>2.1 åŸºç¡€ç”¨æ³•</strong></h4>
<pre><code class="hljs language-ini" lang="ini">import torch
<span class="hljs-comment"># æ–¹å¼1ï¼šå‡½æ•°è°ƒç”¨</span>
def model_forward(x, y): Â  Â 
    <span class="hljs-attr">a</span> = torch.sin(x) Â  Â 
    <span class="hljs-attr">b</span> = torch.cos(y) Â  Â 
    return a + <span class="hljs-attr">bcompiled_model</span> = torch.compile(model_forward)
    <span class="hljs-attr">result</span> = compiled_model(torch.randn(<span class="hljs-number">1000</span>, <span class="hljs-number">1000</span>), torch.randn(<span class="hljs-number">1000</span>, <span class="hljs-number">1000</span>))
<span class="hljs-comment"># æ–¹å¼2ï¼šè£…é¥°å™¨ï¼ˆæ¨èï¼‰</span>
@torch.compiledef optimized_model(x, y): Â  Â 
    <span class="hljs-attr">a</span> = torch.sin(x) Â  Â 
    <span class="hljs-attr">b</span> = torch.cos(y) Â  Â 
    return a + <span class="hljs-attr">bresult</span> = optimized_model(torch.randn(<span class="hljs-number">1000</span>, <span class="hljs-number">1000</span>), torch.randn(<span class="hljs-number">1000</span>, <span class="hljs-number">1000</span>))
</code></pre>
<h4 data-id="heading-7"><strong>2.2 é«˜çº§é…ç½®</strong></h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># è‡ªå®šä¹‰ç¼–è¯‘é€‰é¡¹</span>
@torch.compile( Â  Â 
    <span class="hljs-attr">mode</span>=<span class="hljs-string">"max-autotune"</span>, Â  Â <span class="hljs-comment"># æœ€å¤§ä¼˜åŒ–æ¨¡å¼ Â  Â </span>
    <span class="hljs-attr">backend</span>=<span class="hljs-string">"inductor"</span>, Â  Â  <span class="hljs-comment"># æŒ‡å®šåç«¯ Â  Â </span>
    <span class="hljs-attr">dynamic</span>=<span class="hljs-literal">True</span> Â  Â  Â  Â  Â  <span class="hljs-comment"># æ”¯æŒåŠ¨æ€shape</span>
)
def advanced_model(x): Â  Â 
    return torch.nn.functional.relu(x @ x.T)
</code></pre>
<h3 data-id="heading-8"><strong>3. æ ¸å¿ƒæ¶æ„æ·±åº¦è§£æ</strong></h3>
<h4 data-id="heading-9"><strong>3.1 æ•´ä½“æµç¨‹æ¦‚è§ˆ</strong></h4>
<p>torch.compile çš„å·¥ä½œæµç¨‹å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªæ ¸å¿ƒé˜¶æ®µï¼š</p>
<p>[MISSING IMAGE: , ]</p>
<p>null</p>
<ol>
<li><strong>å›¾æ•è·ï¼ˆTorchDynamoï¼‰</strong> ï¼šå°† Python ä»£ç è½¬æ¢ä¸º FX å›¾</li>
<li><strong>å›¾ä¼˜åŒ–ï¼ˆAOT Autogradï¼‰</strong> ï¼šè¿›è¡Œç®—å­èåˆå’Œå†…å­˜ä¼˜åŒ–</li>
<li><strong>ä»£ç ç”Ÿæˆï¼ˆTorchInductorï¼‰</strong> ï¼šç”Ÿæˆé«˜æ€§èƒ½çš„åº•å±‚ä»£ç </li>
</ol>
<h4 data-id="heading-10"><strong>3.2 TorchDynamoï¼šPython å­—èŠ‚ç çš„é­”æ³•å¸ˆ</strong></h4>
<p>TorchDynamo æ˜¯æ•´ä¸ªç³»ç»Ÿçš„æ ¸å¿ƒï¼Œå®ƒé€šè¿‡ <strong>CPython Frame Evaluation Hook</strong> å®ç°äº†å¯¹ Python å­—èŠ‚ç çš„åŠ¨æ€é‡å†™ã€‚</p>
<p>[MISSING IMAGE: , ]</p>
<p>null</p>
<h5 data-id="heading-11"><strong>3.2.1 CPython Frame Evaluation Hook æœºåˆ¶</strong></h5>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ç®€åŒ–çš„å·¥ä½œæµç¨‹</span>
def custom_eval_frame(frame, exc): Â  Â 
    <span class="hljs-comment"># 1. æ£€æŸ¥æ˜¯å¦éœ€è¦è·³è¿‡ç¼–è¯‘ Â  Â </span>
    if should_skip_frame(frame): Â  Â  Â  Â 
        return default_eval_frame(frame, exc) Â  Â  Â  Â 
    
    <span class="hljs-comment"># 2. æ£€æŸ¥ç¼“å­˜ Â  Â </span>
    <span class="hljs-attr">cached_code</span> = check_cache(frame.f_code) Â  Â 
 Â  Â if cached_code and guards_check_passed(): Â  Â  Â  Â 
 Â  Â  Â   return execute_compiled_code(cached_code) Â  Â  Â  Â 
    
    <span class="hljs-comment"># 3. ç¬¦å·æ‰§è¡Œå’Œå›¾æ•è· Â  Â </span>
    fx_graph, <span class="hljs-attr">guards</span> = symbolic_evaluation(frame.f_code) Â  Â  Â  Â 
    
    <span class="hljs-comment"># 4. åç«¯ç¼–è¯‘ Â  Â </span>
    <span class="hljs-attr">compiled_fn</span> = backend_compile(fx_graph) Â  Â  Â  Â 
    <span class="hljs-comment"># 5. ç”Ÿæˆæ–°å­—èŠ‚ç å¹¶ç¼“å­˜ Â  Â </span>
    <span class="hljs-attr">new_bytecode</span> = generate_wrapper_code(compiled_fn) Â  Â 
    cache_result(frame.f_code, new_bytecode, guards) Â  Â  Â  Â 
    return execute_compiled_code(new_bytecode)
</code></pre>
<h5 data-id="heading-12"><strong>3.2.2 Guards æœºåˆ¶ï¼šåŠ¨æ€å±æ€§çš„å®ˆæŠ¤è€…</strong></h5>
<p>Guards æ˜¯ TorchDynamo ç¡®ä¿ç¼–è¯‘ç»“æœæ­£ç¡®æ€§çš„å…³é”®æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç¤ºä¾‹ï¼štensor shape guard</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">shape_guard</span>(<span class="hljs-params">tensor, expected_shape</span>): Â  Â 
    <span class="hljs-keyword">return</span> tensor.shape == expected_shape
<span class="hljs-comment"># ç¤ºä¾‹ï¼šæ•°æ®ç±»å‹ guard Â </span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">dtype_guard</span>(<span class="hljs-params">tensor, expected_dtype</span>): Â  Â 
    <span class="hljs-keyword">return</span> tensor.dtype == expected_dtype
</code></pre>
<p>å½“ guards æ£€æŸ¥å¤±è´¥æ—¶ï¼Œä¼šè§¦å‘ï¼š</p>
<ul>
<li><strong>Graph Break</strong>ï¼šå›é€€åˆ° eager æ¨¡å¼</li>
<li><strong>Recompilation</strong>ï¼šé‡æ–°ç¼–è¯‘ç”Ÿæˆæ–°çš„ä¼˜åŒ–ä»£ç </li>
</ul>
<h4 data-id="heading-13"><strong>3.3 TorchInductorï¼šé«˜æ€§èƒ½ä»£ç çš„ç”Ÿæˆå™¨</strong></h4>
<p>TorchInductor ä½œä¸ºé»˜è®¤åç«¯ï¼Œè´Ÿè´£å°† FX å›¾è½¬æ¢ä¸ºé«˜æ•ˆçš„åº•å±‚ä»£ç ã€‚</p>
<p>[MISSING IMAGE: , ]</p>
<p>null</p>
<h5 data-id="heading-14"><strong>3.3.1 ç®—å­åˆ†è§£ï¼ˆOperator Decompositionï¼‰</strong></h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¤æ‚ç®—å­åˆ†è§£ä¸ºåŸºç¡€ç®—å­</span>
<span class="hljs-meta">@register_decomposition(<span class="hljs-params">torch.ops.aten.log2</span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">log2_decomposition</span>(<span class="hljs-params">x</span>): Â  Â 
    log2_scale = <span class="hljs-number">1</span> / math.log(<span class="hljs-number">2</span>) Â  Â 
    <span class="hljs-keyword">return</span> torch.log(x) * log2_scale
â€‹
<span class="hljs-meta">@register_decomposition(<span class="hljs-params">torch.ops.aten.gelu</span>) Â </span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">gelu_decomposition</span>(<span class="hljs-params">x</span>): Â  Â 
    <span class="hljs-keyword">return</span> x * <span class="hljs-number">0.5</span> * (<span class="hljs-number">1.0</span> + torch.erf(x / math.sqrt(<span class="hljs-number">2.0</span>)))
</code></pre>
<h5 data-id="heading-15"><strong>3.3.2 IR é™çº§ï¼šä» FX å›¾åˆ° Loop-level IR</strong></h5>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># TorchInductor çš„ define-by-run IR ç¤ºä¾‹</span>
def pointwise_kernel(index): Â  Â 
    i0, <span class="hljs-attr">i1</span> = index Â  Â 
    <span class="hljs-comment"># åŠ è½½è¾“å…¥æ•°æ® Â  Â </span>
    <span class="hljs-attr">tmp0</span> = ops.load(<span class="hljs-string">"input"</span>, i0 * stride0 + i1 * stride1) Â  Â 
    <span class="hljs-comment"># æ‰§è¡Œè®¡ç®— Â  Â </span>
    <span class="hljs-attr">tmp1</span> = ops.log(tmp0) Â  Â 
    <span class="hljs-attr">tmp2</span> = ops.mul(tmp1, <span class="hljs-number">1.4426950408889634</span>) Â <span class="hljs-comment"># log2 scale Â  Â </span>
    <span class="hljs-comment"># å­˜å‚¨ç»“æœ Â  Â </span>
    return tmp2
    
<span class="hljs-comment"># ç”Ÿæˆçš„ Triton kernel ç»“æ„</span>
<span class="hljs-attr">buf0</span> = TensorBox(StorageBox(ComputedBuffer( Â  Â 
    <span class="hljs-attr">name</span>=<span class="hljs-string">'buf0'</span>, Â  Â 
    <span class="hljs-attr">layout</span>=FixedLayout(<span class="hljs-string">'cuda'</span>, torch.float32, size=[M, N]), Â  Â 
    <span class="hljs-attr">data</span>=Pointwise(inner_fn=pointwise_kernel, ranges=[M, N])
)))
</code></pre>
<h5 data-id="heading-16"><strong>3.3.3 ä»£ç ç”Ÿæˆï¼šTriton ä¸ C++ åç«¯</strong></h5>
<p>æœ€ç»ˆç”Ÿæˆçš„ä»£ç ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ç”Ÿæˆçš„ Triton kernel ä»£ç ç‰‡æ®µ</span>
@triton.jit
def triton_poi_fused_add_div_mul_0(in_ptr0, in_ptr1, in_ptr2, out_ptr0, xnumel, XBLOCK : tl.constexpr): Â  Â 
    <span class="hljs-attr">xnumel</span> = <span class="hljs-number">1000000</span> Â  Â 
    <span class="hljs-attr">xoffset</span> = tl.program_id(<span class="hljs-number">0</span>) * XBLOCK Â  Â 
    <span class="hljs-attr">xindex</span> = x<span class="hljs-literal">off</span>set + tl.arange(<span class="hljs-number">0</span>, XBLOCK)[:] Â  Â 
    <span class="hljs-attr">xmask</span> = xindex &lt; xnumel Â  Â 
    <span class="hljs-attr">x0</span> = xindex Â  Â 
    <span class="hljs-attr">tmp0</span> = tl.load(in_ptr0 + (x0), xmask) Â  Â 
    <span class="hljs-attr">tmp1</span> = tl.load(in_ptr1 + (x0), xmask) Â  Â 
    <span class="hljs-attr">tmp2</span> = tmp0 / tmp1 Â <span class="hljs-comment"># div operation Â  Â </span>
    <span class="hljs-attr">tmp3</span> = tmp2 * <span class="hljs-number">0.1</span> Â  <span class="hljs-comment"># mul operation Â  Â  Â </span>
    <span class="hljs-attr">tmp4</span> = tl.load(in_ptr2 + (x0), xmask) Â  Â 
    <span class="hljs-attr">tmp5</span> = tmp4 + tmp3 Â <span class="hljs-comment"># add operation Â   tl.store(out_ptr0 + (x0), tmp5, xmask)</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6c4447a39824e24a52a4ecc8fc93322~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWF5pen:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767232551&amp;x-signature=6sBaqjBayq%2BxAb%2BqJ%2BJYyQ3ojzs%3D" alt="image-20251225094250899" loading="lazy"/></p>
<p>ä»ä»£ç å¯ä»¥çœ‹åˆ°ï¼ŒTorchInductor ç”Ÿæˆäº†é«˜åº¦ä¼˜åŒ–çš„ Triton kernelï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>ç®—å­èåˆ</strong>ï¼šå°† divã€mulã€add æ“ä½œèåˆä¸ºå•ä¸ª kernel</li>
<li><strong>å†…å­˜ä¼˜åŒ–</strong>ï¼šå‡å°‘ä¸­é—´ç»“æœçš„å†…å­˜è¯»å†™</li>
<li><strong>å¹¶è¡ŒåŒ–</strong>ï¼šå……åˆ†åˆ©ç”¨ GPU çš„å¹¶è¡Œè®¡ç®—èƒ½åŠ›</li>
</ul>
<h3 data-id="heading-17"><strong>4. æ€§èƒ½ä¼˜åŒ–ä¸è°ƒè¯•å®è·µ</strong></h3>
<h4 data-id="heading-18"><strong>4.1 æ€§èƒ½åˆ†æå·¥å…·</strong></h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å¯ç”¨è¯¦ç»†æ—¥å¿—</span>
import os
os.environ<span class="hljs-section">['TORCH_COMPILE_DEBUG']</span> = '1'
<span class="hljs-comment"># æ€§èƒ½å¯¹æ¯”æµ‹è¯•</span>
def benchmark_model(): Â  Â 
    <span class="hljs-attr">model</span> = MyModel() Â  Â 
    <span class="hljs-attr">compiled_model</span> = torch.compile(model) Â  Â  Â  Â 
    
    <span class="hljs-comment"># é¢„çƒ­ Â  Â </span>
    for _ in range(10): Â  Â  Â  Â 
 Â       <span class="hljs-attr">_</span> = compiled_model(sample_input) Â  Â  Â  Â 
 Â  Â 
 Â  Â <span class="hljs-comment"># æ€§èƒ½æµ‹è¯• Â  </span>
 Â   <span class="hljs-attr">start_time</span> = time.time() Â  Â 
 Â  Â for _ in range(100): Â  Â  Â  Â 
 Â       <span class="hljs-attr">result</span> = compiled_model(sample_input) Â  Â 
 Â   <span class="hljs-attr">end_time</span> = time.time() Â  Â  Â  Â 
 Â  Â 
 Â   print(f"Average time: {(end_time - start_time) / 100:.4f}s")
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad7ac638151e473e8e39bac666f3e4af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWF5pen:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767232551&amp;x-signature=1ctSx%2BQIs79Lx1qKTaqtn7qc280%3D" alt="image-20251225093838985" loading="lazy"/></p>
<h4 data-id="heading-19"><strong>4.2 å¸¸è§é—®é¢˜æ’æŸ¥</strong></h4>
<h5 data-id="heading-20"><strong>4.2.1 ç¼–è¯‘å¤±è´¥è¯Šæ–­</strong></h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¼€å¯è°ƒè¯•æ¨¡å¼</span>
<span class="hljs-built_in">export</span> TORCH_COMPILE_DEBUG=1
<span class="hljs-built_in">export</span> TORCH_LOGS=<span class="hljs-string">"+dynamo,+inductor"</span>
â€‹
<span class="hljs-comment"># è¿è¡Œç¨‹åºåæ£€æŸ¥ç”Ÿæˆçš„è°ƒè¯•æ–‡ä»¶</span>
<span class="hljs-built_in">ls</span> /tmp/torchinductor_*/
<span class="hljs-comment"># - output_code.py Â  Â   # ç”Ÿæˆçš„ä»£ç </span>
<span class="hljs-comment"># - fx_graph_readable.py # å¯è¯»çš„FXå›¾</span>
<span class="hljs-comment"># - run_*_benchmark.py Â  # æ€§èƒ½æµ‹è¯•è„šæœ¬</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/767b63a752904e919036ddac1d46abbd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWF5pen:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767232551&amp;x-signature=n8y2Rn9NisyXCR%2BEVmcXUFBBYZM%3D" alt="image-20251225093725089" loading="lazy"/></p>
<h5 data-id="heading-21"><strong>4.2.2 æ€§èƒ½å›å½’åˆ†æ</strong></h5>
<p>é€šè¿‡è°ƒè¯•è¾“å‡ºå¯ä»¥çœ‹åˆ°å®Œæ•´çš„ç¼–è¯‘æ ˆä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>æ¨¡å—è°ƒç”¨é“¾</strong>ï¼šä»ç”¨æˆ·ä»£ç åˆ°åº•å±‚ç®—å­çš„å®Œæ•´è·¯å¾„</li>
<li><strong>å›¾æ•è·è¿‡ç¨‹</strong>ï¼šTorchDynamo çš„ç¬¦å·æ‰§è¡Œè¿‡ç¨‹</li>
<li><strong>ä»£ç ç”Ÿæˆç»“æœ</strong>ï¼šæœ€ç»ˆç”Ÿæˆçš„ä¼˜åŒ–ä»£ç </li>
</ul>
<h4 data-id="heading-22"><strong>4.3 æœ€ä½³å®è·µå»ºè®®</strong></h4>
<ol>
<li><strong>æ¨¡å‹é¢„çƒ­</strong>ï¼šé¦–æ¬¡ç¼–è¯‘æœ‰å¼€é”€ï¼Œå»ºè®®è¿›è¡Œé¢„çƒ­</li>
<li><strong>æ‰¹é‡å¤„ç†</strong>ï¼šç¼–è¯‘å¯¹å¤§batchæ›´å‹å¥½</li>
<li><strong>é¿å…åŠ¨æ€æ§åˆ¶æµ</strong>ï¼šå‡å°‘ graph break</li>
<li><strong>åˆç†ä½¿ç”¨ dynamic=True</strong>ï¼šå¹³è¡¡çµæ´»æ€§å’Œæ€§èƒ½</li>
</ol>
<h3 data-id="heading-23"><strong>5. å®é™…åº”ç”¨æ¡ˆä¾‹</strong></h3>
<h4 data-id="heading-24"><strong>5.1 Transformer æ¨¡å‹ä¼˜åŒ–</strong></h4>
<pre><code class="hljs language-ini" lang="ini">class OptimizedTransformer(nn.Module): Â  Â 
    def __init__(self, config): Â  Â  Â  Â 
        super().__init__() Â  Â  Â  Â 
        <span class="hljs-attr">self.attention</span> = MultiHeadAttention(config) Â  Â  Â  Â 
        <span class="hljs-attr">self.feed_forward</span> = FeedForward(config) Â  Â  Â  Â 
        <span class="hljs-attr">self.layer_norm1</span> = nn.LayerNorm(config.hidden_size) Â  Â  Â  Â 
        <span class="hljs-attr">self.layer_norm2</span> = nn.LayerNorm(config.hidden_size) Â  Â  Â  Â 
 Â   @torch.compile Â  Â 
 Â   def forward(self, x, <span class="hljs-attr">attention_mask</span>=None): Â  Â  Â  Â 
 Â  Â <span class="hljs-comment"># Self-attention Â  Â  Â  Â </span>
 Â   <span class="hljs-attr">attn_output</span> = self.attention(x, attention_mask) Â  Â  Â  Â 
 Â   <span class="hljs-attr">x</span> = self.layer_norm1(x + attn_output) Â  Â  Â  Â  Â  Â  Â  Â 
 Â  Â 
 Â  Â <span class="hljs-comment"># Feed-forward Â  Â  Â  Â </span>
 Â   <span class="hljs-attr">ff_output</span> = self.feed_forward(x) Â  Â  Â  Â 
 Â   <span class="hljs-attr">x</span> = self.layer_norm2(x + ff_output) Â  Â  Â  Â  Â  Â  Â  Â 
 Â  Â 
 Â   return x
<span class="hljs-comment"># æ€§èƒ½æå‡ï¼š1.5-2x åŠ é€Ÿæ¯”</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2cfbfdf870f94f88b6e98fea7125098f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWF5pen:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767232551&amp;x-signature=OO5%2FsFZkcoNLskao5eLVH03WWjc%3D" alt="image-20251225093546096" loading="lazy"/></p>
<h3 data-id="heading-25"><strong>ç»“è®º</strong></h3>
<p>torch.compile ä»£è¡¨äº† PyTorch åœ¨æ€§èƒ½ä¼˜åŒ–æ–¹é¢çš„é‡å¤§çªç ´ã€‚é€šè¿‡ TorchDynamo çš„å­—èŠ‚ç é‡å†™ã€AOT Autograd çš„å›¾ä¼˜åŒ–å’Œ TorchInductor çš„ä»£ç ç”Ÿæˆï¼Œå®ç°äº†åœ¨ä¿æŒ PyTorch çµæ´»æ€§çš„åŒæ—¶è·å¾—æ¥è¿‘é™æ€å›¾çš„æ€§èƒ½ã€‚</p>
<p>å¯¹äºå¼€å‘è€…è€Œè¨€ï¼Œtorch.compile æä¾›äº†ä¸€ä¸ªå‡ ä¹é›¶æˆæœ¬çš„æ€§èƒ½æå‡æ–¹æ¡ˆã€‚åªéœ€è¦æ·»åŠ ä¸€ä¸ªè£…é¥°å™¨ï¼Œå°±èƒ½è·å¾—æ˜¾è‘—çš„åŠ é€Ÿæ•ˆæœã€‚éšç€æŠ€æœ¯çš„ä¸æ–­æˆç†Ÿï¼Œtorch.compile å¿…å°†æˆä¸º PyTorch ç”Ÿæ€ç³»ç»Ÿä¸­ä¸å¯æˆ–ç¼ºçš„æ ¸å¿ƒç»„ä»¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»Šå¤©ä¸€ä¸ªæ–°çš„çŸ¥è¯†ç‚¹ Cè¯­è¨€çš„ â€œå‡½æ•°â€]]></title>    <link>https://juejin.cn/post/7587261253912838159</link>    <guid>https://juejin.cn/post/7587261253912838159</guid>    <pubDate>2025-12-25T02:03:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587261253912838159" data-draft-id="7582077175002218539" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»Šå¤©ä¸€ä¸ªæ–°çš„çŸ¥è¯†ç‚¹ Cè¯­è¨€çš„ â€œå‡½æ•°â€"/> <meta itemprop="keywords" content="C"/> <meta itemprop="datePublished" content="2025-12-25T02:03:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å¼ å¿ƒç»ªçƒ‚å°¾"/> <meta itemprop="url" content="https://juejin.cn/user/4135731991953737"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»Šå¤©ä¸€ä¸ªæ–°çš„çŸ¥è¯†ç‚¹ Cè¯­è¨€çš„ â€œå‡½æ•°â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4135731991953737/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å¼ å¿ƒç»ªçƒ‚å°¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T02:03:10.000Z" title="Thu Dec 25 2025 02:03:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-light">.hljs-comment,.hljs-quote{color:#696969}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#d91e18}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#aa5d00}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:green}.hljs-section,.hljs-title{color:#007faa}.hljs-keyword,.hljs-selector-tag{color:#7928a1}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fefefe;color:#545454}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">**<strong>å‡½æ•°ï¼šå®ç°ç‰¹å®šåŠŸèƒ½çš„ä»£ç </strong></h2>
<p>é€šä¿—çš„è¯ï¼šæˆ‘ç»™å®ƒä»€ä¹ˆï¼Œå®ƒå°±ç»™æˆ‘åšä»€ä¹ˆäº‹ï¼Œè¿˜ç»™æˆ‘ä»€ä¹ˆ</p>
<p>ä¸¤ä¸ªæ­¥éª¤ï¼š
1.å…ˆå®šä¹‰å‡½æ•°ï¼š
æ ¼å¼</p>
<pre><code class="hljs">è¿”å›å€¼ç±»å‹ å‡½æ•°åï¼ˆå‚æ•°åˆ—è¡¨ï¼‰{

å‡½æ•°å…·ä½“çš„ä»£ç 
}
</code></pre>
<p>2.	è°ƒç”¨å‡½æ•°ï¼š</p>
<pre><code class="hljs">æ ¼å¼

è¿”å›å€¼ = å‡½æ•°åï¼ˆå‚æ•°ï¼‰   
</code></pre>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span></span>

<span class="hljs-comment">// å®ç°ç‰¹å®šåŠŸèƒ½çš„ä»£ç æ®µ</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">printAge</span><span class="hljs-params">()</span>{
	<span class="hljs-type">int</span> age = <span class="hljs-number">18</span>;
	<span class="hljs-built_in">printf</span>(&amp;#<span class="hljs-number">34</span>;------------------\n&amp;#<span class="hljs-number">34</span>;);
	<span class="hljs-built_in">printf</span>(&amp;#<span class="hljs-number">34</span>;å¹´é¾„æ˜¯:%d\n&amp;#<span class="hljs-number">34</span>;,age);
	<span class="hljs-built_in">printf</span>(&amp;#<span class="hljs-number">34</span>;-------------------\n&amp;#<span class="hljs-number">34</span>;);
} 
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>{
	<span class="hljs-comment">// å‡½æ•°</span>
	printAge();	<span class="hljs-comment">// è°ƒç”¨å‡½æ•° </span>
		
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
} 
</code></pre>
<p>è¿è¡Œç»“æœ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b2cf65f76314021a3337841a61993fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5byg5b-D57uq54OC5bC-:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767232990&amp;x-signature=2b%2Bm%2Bt5UCLM62uwm4hHBScy1xUg%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-1"><strong>è¿›é˜¶çŸ¥è¯†ç‚¹ï¼š</strong></h3>
<p>å¦‚ä½•è®©å®ƒåˆèƒ½è¾“å‡º18,19</p>
<p>å°±æ˜¯æŠŠint ageï¼Œç§»åˆ°printMyAge()çš„è¿™ä¸ªæ‹¬å·é‡Œé¢ï¼Œå†åœ¨ä¸‹é¢çš„"è°ƒç”¨å‡½æ•°"é‡Œé¢è¾“å…¥æƒ³è¦è¾“å‡ºçš„æ•°å­—ã€‚</p>
<p>å¦‚ä¸‹å±•ç¤ºï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">void</span> <span class="hljs-title function_">printMyAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span>{
	<span class="hljs-built_in">printf</span>(&amp;#<span class="hljs-number">34</span>;------------------\n&amp;#<span class="hljs-number">34</span>;);
	<span class="hljs-built_in">printf</span>(&amp;#<span class="hljs-number">34</span>;å¹´é¾„æ˜¯:%d\n&amp;#<span class="hljs-number">34</span>;,age);
	<span class="hljs-built_in">printf</span>(&amp;#<span class="hljs-number">34</span>;-------------------\n&amp;#<span class="hljs-number">34</span>;);
} 
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>{
	<span class="hljs-comment">// å‡½æ•°</span>
	printMyAge(<span class="hljs-number">18</span>);	<span class="hljs-comment">// è°ƒç”¨å‡½æ•° </span>
	printMyAge(<span class="hljs-number">19</span>);	<span class="hljs-comment">// è°ƒç”¨å‡½æ•° </span>

		
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
} 
</code></pre>
<p>è¿è¡Œç»“æœ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7f64e9f4d894ef788414852b2e6fa8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5byg5b-D57uq54OC5bC-:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767232990&amp;x-signature=sLeHP%2FLwCBqAHpER434Sdh7PSK8%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-2">å†è¿›é˜¶ä¸€ä¸‹</h4>
<p>æ·»åŠ ä¸€ä¸ªèº«é«˜åœ¨é‡Œé¢ï¼Œæˆ‘ä»¬åº”è¯¥æ€æ ·æ”¹å†™ä¸€ä¸‹ä»£ç ï¼š</p>
<p>å¾ˆç®€å•å°±æ˜¯åœ¨(int age),æ‹¬å·é‡Œé¢åŠ ä¸€ä¸ªå®šä¹‰ç¬¦"double"ï¼Œå°±æ˜¯è¿™æ ·(int age,double sg)ï¼Œä¸‹é¢"è°ƒç”¨å‡½æ•°åŠ ä¸ªèº«é«˜çš„æ•°å€¼å°±å®Œæˆäº†ã€‚</p>
<p>å±•ç¤ºå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span></span>

<span class="hljs-comment">// å®ç°ç‰¹å®šåŠŸèƒ½çš„ä»£ç æ®µ</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">printMyInfo</span><span class="hljs-params">(<span class="hljs-type">int</span> age,<span class="hljs-type">double</span> sg)</span>{
	<span class="hljs-built_in">printf</span>(&amp;#<span class="hljs-number">34</span>;------------------\n&amp;#<span class="hljs-number">34</span>;);
	<span class="hljs-built_in">printf</span>(&amp;#<span class="hljs-number">34</span>;å¹´é¾„æ˜¯:%d\n&amp;#<span class="hljs-number">34</span>;,age);
	<span class="hljs-built_in">printf</span>(&amp;#<span class="hljs-number">34</span>;èº«é«˜æ˜¯:%<span class="hljs-number">.2</span>f\n&amp;#<span class="hljs-number">34</span>;,sg);
	<span class="hljs-built_in">printf</span>(&amp;#<span class="hljs-number">34</span>;-------------------\n&amp;#<span class="hljs-number">34</span>;);
} 
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>{
	<span class="hljs-comment">// å‡½æ•°</span>
	printMyInfo(<span class="hljs-number">18</span>, <span class="hljs-number">1.78</span>);	<span class="hljs-comment">// è°ƒç”¨å‡½æ•° </span>
	printMyInfo(<span class="hljs-number">19</span>, <span class="hljs-number">1.88</span>);	<span class="hljs-comment">// è°ƒç”¨å‡½æ•° </span>

		
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
} 
</code></pre>
<p>è¿è¡Œç»“æœ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3350ab9c92145ddbbca018d9d360fa8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5byg5b-D57uq54OC5bC-:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767232990&amp;x-signature=jOZrFhTCjKsZ%2BEyUJpEjgHBtKcw%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±åº¦å­¦ä¹ é©±åŠ¨çš„è§†é¢‘å¼‚å¸¸æ£€æµ‹ï¼ˆVADï¼‰ï¼ŒAIå¦‚ä½•è®©ç›‘æ§æ›´æ™ºèƒ½ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7587322796825444392</link>    <guid>https://juejin.cn/post/7587322796825444392</guid>    <pubDate>2025-12-25T02:51:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587322796825444392" data-draft-id="7587277503947554816" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±åº¦å­¦ä¹ é©±åŠ¨çš„è§†é¢‘å¼‚å¸¸æ£€æµ‹ï¼ˆVADï¼‰ï¼ŒAIå¦‚ä½•è®©ç›‘æ§æ›´æ™ºèƒ½ï¼Ÿ"/> <meta itemprop="keywords" content="ç®—æ³•,è®¡ç®—æœºè§†è§‰,æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2025-12-25T02:51:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CoovallyAIHub"/> <meta itemprop="url" content="https://juejin.cn/user/2461151071843739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±åº¦å­¦ä¹ é©±åŠ¨çš„è§†é¢‘å¼‚å¸¸æ£€æµ‹ï¼ˆVADï¼‰ï¼ŒAIå¦‚ä½•è®©ç›‘æ§æ›´æ™ºèƒ½ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2461151071843739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CoovallyAIHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T02:51:27.000Z" title="Thu Dec 25 2025 02:51:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æ˜¯å¦æ›¾æƒ³è¿‡ï¼Œåœ¨æˆåƒä¸Šä¸‡çš„ç›‘æ§è§†é¢‘ä¸­ï¼Œå¦‚ä½•è®©è®¡ç®—æœºè‡ªåŠ¨è¯†åˆ«å‡ºæ‰“æ¶ã€é—¯å…¥ã€å¾˜å¾Šç­‰å¼‚å¸¸äº‹ä»¶ï¼Ÿè¿™æ­£æ˜¯è§†é¢‘å¼‚å¸¸æ£€æµ‹ï¼ˆVideo Anomaly Detection, VADï¼‰ æ‰€è¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜ã€‚éšç€æ·±åº¦å­¦ä¹ æŠ€æœ¯çš„é£é€Ÿå‘å±•ï¼ŒVAD å·²æˆä¸ºè®¡ç®—æœºè§†è§‰é¢†åŸŸçš„çƒ­ç‚¹ç ”ç©¶æ–¹å‘ï¼Œå¹¶åœ¨æ™ºèƒ½å®‰é˜²ã€è‡ªåŠ¨é©¾é©¶ã€å†…å®¹å®¡æ ¸ç­‰é¢†åŸŸå±•ç°å‡ºå·¨å¤§åº”ç”¨æ½œåŠ›ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±åŸºäºæ·±åº¦å­¦ä¹ çš„ VAD æ–¹æ³•è¿›è¡Œäº†å…¨é¢æ¢³ç†ä¸æ€»ç»“ï¼Œçœ‹çœ‹ AI å¦‚ä½•è®©è§†é¢‘ç›‘æ§å˜å¾—æ›´æ™ºèƒ½ã€‚</p>
<h2 data-id="heading-0"><strong>ä»€ä¹ˆæ˜¯è§†é¢‘å¼‚å¸¸æ£€æµ‹ï¼Ÿ</strong></h2>
<p>å¼‚å¸¸ï¼ŒæŒ‡çš„æ˜¯åç¦»æ­£å¸¸ã€æ ‡å‡†æˆ–é¢„æœŸçš„äº‹ç‰©ã€‚åœ¨è§†é¢‘ä¸­ï¼Œå¼‚å¸¸å¯èƒ½è¡¨ç°ä¸ºå¼‚å¸¸è¡Œä¸ºï¼ˆå¦‚çªç„¶å¥”è·‘ã€æ‰“æ¶ï¼‰æˆ–å¼‚å¸¸äº‹ä»¶ï¼ˆå¦‚è½¦è¾†é€†è¡Œã€ç‰©å“é—ç•™ï¼‰ã€‚VAD çš„ç›®æ ‡å°±æ˜¯è‡ªåŠ¨è¯†åˆ«å‡ºè¿™äº›â€œä¸å¯»å¸¸â€çš„ç”»é¢ã€‚</p>
<p>ä¼ ç»Ÿçš„ VAD æ–¹æ³•é€šå¸¸åˆ†ä¸ºä¸¤æ­¥ï¼šå…ˆæå–æ‰‹å·¥è®¾è®¡çš„ç‰¹å¾ï¼Œå†è®¾è®¡åˆ†ç±»å™¨è¿›è¡Œåˆ¤æ–­ã€‚ä½†è¿™ç§æ–¹å¼ä¾èµ–ä¸“å®¶ç»éªŒï¼Œéš¾ä»¥åº”å¯¹å¤æ‚å¤šå˜çš„çœŸå®åœºæ™¯ã€‚</p>
<p>éšç€æ·±åº¦å­¦ä¹ çš„å…´èµ·ï¼ŒVAD è¿›å…¥äº†æ–°çš„å‘å±•é˜¶æ®µã€‚å¦‚å›¾1æ‰€ç¤ºï¼Œè¿‘åå¹´æ¥ç›¸å…³è®ºæ–‡æ•°é‡æŒç»­å¿«é€Ÿå¢é•¿ï¼Œå°¤å…¶æ˜¯åœ¨ IEEE Xplore å’Œ Google Scholar ä¸­ï¼ŒVAD ç›¸å…³ç ”ç©¶å‘ˆç°å‡ºçˆ†å‘å¼å¢é•¿ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0397084242ec494ba4ba1ceea73482cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767235887&amp;x-signature=37V0crXT%2BOLCZzZqFr6C%2FCqHFW4%3D" alt="screenshot_2025-12-24_16-22-49.png" loading="lazy"/></p>
<p>åŒæ—¶ï¼Œæ£€æµ‹æ€§èƒ½ä¹Ÿåœ¨ä¸æ–­æå‡ã€‚å¦‚å›¾2æ‰€ç¤ºï¼Œåœ¨åŠç›‘ç£å’Œå¼±ç›‘ç£è®¾ç½®ä¸‹ï¼Œå„æ•°æ®é›†çš„æ£€æµ‹æ€§èƒ½ï¼ˆAUC æŒ‡æ ‡ï¼‰å‘ˆç¨³æ­¥ä¸Šå‡è¶‹åŠ¿ï¼Œè¡¨æ˜ç®—æ³•åœ¨ä¸æ–­è¿›æ­¥ã€‚</p>
<h2 data-id="heading-1"><strong>äº”ç§ç›‘ç£æ¨¡å¼ï¼šä½ çŸ¥é“å‡ ç§ï¼Ÿ</strong></h2>
<p>æ ¹æ®è®­ç»ƒæ—¶ä½¿ç”¨çš„æ ‡æ³¨ä¿¡æ¯ä¸åŒï¼ŒVAD å¯åˆ†ä¸ºä»¥ä¸‹äº”ç§æ¨¡å¼ï¼š</p>

<ul>
<li><strong>åŠç›‘ç£ VAD</strong></li>
</ul>
<p>ç‰¹ç‚¹ï¼šä»…ä½¿ç”¨æ­£å¸¸æ ·æœ¬è¿›è¡Œè®­ç»ƒã€‚</p>
<p>ä¼˜ç‚¹ï¼šæ— éœ€æ”¶é›†ç½•è§çš„å¼‚å¸¸æ ·æœ¬ã€‚</p>
<p>ç¼ºç‚¹ï¼šå®¹æ˜“å°†æœªè§è¿‡ä½†æ­£å¸¸çš„æ ·æœ¬è¯¯åˆ¤ä¸ºå¼‚å¸¸ã€‚</p>
<ul>
<li><strong>å¼±ç›‘ç£ VAD</strong></li>
</ul>
<p>ç‰¹ç‚¹ï¼šè®­ç»ƒè§†é¢‘åªæœ‰è§†é¢‘çº§æ ‡ç­¾ï¼ˆæ­£å¸¸/å¼‚å¸¸ï¼‰ï¼Œæ²¡æœ‰å…·ä½“å‘ç”Ÿæ—¶é—´ã€‚</p>
<p>ä¼˜ç‚¹ï¼šæ ‡æ³¨æˆæœ¬ä½ã€‚</p>
<p>ç¼ºç‚¹ï¼šç®—æ³•è®¾è®¡å¤æ‚ï¼Œå®¹æ˜“â€œç›²çŒœâ€ã€‚</p>
<ul>
<li><strong>å…¨ç›‘ç£ VAD</strong></li>
</ul>
<p>ç‰¹ç‚¹ï¼šæ¯ä¸ªå¼‚å¸¸éƒ½æœ‰ç²¾ç¡®çš„æ—¶é—´æ®µæ ‡æ³¨ã€‚</p>
<p>ä¼˜ç‚¹ï¼šæ£€æµ‹æ€§èƒ½é«˜ã€‚</p>
<p>ç¼ºç‚¹ï¼šæ ‡æ³¨æˆæœ¬æé«˜ï¼Œç°å®ä¸­éš¾ä»¥å¤§è§„æ¨¡åº”ç”¨ã€‚</p>
<ul>
<li><strong>æ— ç›‘ç£ VAD</strong></li>
</ul>
<p>ç‰¹ç‚¹ï¼šå®Œå…¨æ— éœ€æ ‡æ³¨ï¼Œç›´æ¥ä»æœªæ ‡æ³¨è§†é¢‘ä¸­æ£€æµ‹å¼‚å¸¸ã€‚</p>
<p>ä¼˜ç‚¹ï¼šæ— éœ€æ ‡æ³¨ï¼Œé€‚ç”¨æ€§å¹¿ã€‚</p>
<p>ç¼ºç‚¹ï¼šæ£€æµ‹å‡†ç¡®ç‡ç›¸å¯¹è¾ƒä½ã€‚</p>
<ul>
<li><strong>å¼€æ”¾é›†ç›‘ç£ VAD</strong></li>
</ul>
<p>ç‰¹ç‚¹ï¼šè®­ç»ƒæ—¶å·²çŸ¥éƒ¨åˆ†å¼‚å¸¸ç±»å‹ï¼Œä½†æµ‹è¯•æ—¶å¯èƒ½å‡ºç°ä»æœªè§è¿‡çš„å¼‚å¸¸ã€‚</p>
<p>ä¼˜ç‚¹ï¼šæ›´è´´è¿‘çœŸå®å¼€æ”¾ç¯å¢ƒã€‚</p>
<p>ç¼ºç‚¹ï¼šéœ€è¦è®¾è®¡ä¸“é—¨æœºåˆ¶æ¥è¯†åˆ«æœªçŸ¥å¼‚å¸¸ã€‚</p>
<p>å›¾3ç›´è§‚å¯¹æ¯”äº†è¿™äº”ç§ä»»åŠ¡çš„åŒºåˆ«ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca8cf3f061e544f3abc7090ad718b0eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767235887&amp;x-signature=tI%2BtW6Jk8iekwVVf%2BFqrdq0nobQ%3D" alt="screenshot_2025-12-24_16-24-26.png" loading="lazy"/></p>
<h2 data-id="heading-2"><strong>æ–¹æ³•ä½“ç³»ï¼šAI æ˜¯å¦‚ä½•â€œçœ‹â€è§†é¢‘çš„ï¼Ÿ</strong></h2>
<ul>
<li><strong>åŠç›‘ç£ VADï¼šå­¦ä¹ â€œæ­£å¸¸â€çš„æ ·å­</strong></li>
</ul>
<p>ç”±äºåªæœ‰æ­£å¸¸æ ·æœ¬ï¼Œæ¨¡å‹é€šå¸¸é€šè¿‡è‡ªç›‘ç£å­¦ä¹ æ¥æ„å»ºâ€œæ­£å¸¸æ¨¡å¼â€ã€‚å¸¸è§æ–¹æ³•åŒ…æ‹¬ï¼š</p>
<p>é‡å»ºï¼šè®­ç»ƒä¸€ä¸ªè‡ªç¼–ç å™¨ï¼Œè®©å…¶å­¦ä¼šé‡æ„æ­£å¸¸è§†é¢‘ã€‚å¼‚å¸¸è§†é¢‘é€šå¸¸éš¾ä»¥è¢«è‰¯å¥½é‡æ„ã€‚</p>
<p>é¢„æµ‹ï¼šè®©æ¨¡å‹é¢„æµ‹æœªæ¥å¸§ï¼Œæ­£å¸¸äº‹ä»¶é€šå¸¸å¯é¢„æµ‹ï¼Œå¼‚å¸¸äº‹ä»¶åˆ™éš¾ä»¥é¢„æµ‹ã€‚</p>
<p>è§†è§‰å®Œå½¢å¡«ç©ºï¼šéšæœºé®æŒ¡éƒ¨åˆ†å¸§ï¼Œè®©æ¨¡å‹è¡¥å…¨ï¼Œä»¥æ­¤å­¦ä¹ æ—¶ç©ºä¸Šä¸‹æ–‡ã€‚</p>
<p>å›¾4å±•ç¤ºäº†åŠç›‘ç£ VAD çš„ç³»ç»ŸåŒ–åˆ†ç±»ä½“ç³»ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b1c977e58b54e39935e5bf46eb142c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767235887&amp;x-signature=juWIGRj6deU747tsaqEvCU1xQ5M%3D" alt="screenshot_2025-12-24_16-24-50.png" loading="lazy"/></p>
<ul>
<li><strong>å¼±ç›‘ç£ VADï¼šä»â€œè§†é¢‘çº§æ ‡ç­¾â€ä¸­å®šä½å¼‚å¸¸</strong></li>
</ul>
<p>å¼±ç›‘ç£æ–¹æ³•é€šå¸¸å€ŸåŠ©å¤šç¤ºä¾‹å­¦ä¹ ï¼ˆMILï¼‰ æœºåˆ¶ï¼Œä»é•¿è§†é¢‘ä¸­æŒ–æ˜å‡ºæœ€å¯èƒ½æ˜¯å¼‚å¸¸çš„ç‰‡æ®µã€‚è¿‘å¹´æ¥ï¼Œä¸€äº›æ–¹æ³•è¿˜å¼•å…¥ä¸¤é˜¶æ®µè‡ªè®­ç»ƒã€æ—¶åºå»ºæ¨¡ã€æ—¶ç©ºå»ºæ¨¡ç­‰ç­–ç•¥æå‡æ€§èƒ½ã€‚</p>
<ul>
<li><strong>æ— ç›‘ç£ VADï¼šå®Œå…¨â€œè‡ªåŠ›æ›´ç”Ÿâ€</strong></li>
</ul>
<p>æ— ç›‘ç£æ–¹æ³•ä¸ä¾èµ–ä»»ä½•æ ‡æ³¨ï¼Œå¸¸è§æ€è·¯åŒ…æ‹¬ï¼š</p>
<p>ä¼ªæ ‡ç­¾æ³•ï¼šå…ˆé€šè¿‡æŸç§æ–¹å¼ç”Ÿæˆä¼ªæ ‡ç­¾ï¼Œå†è¿­ä»£ä¼˜åŒ–ã€‚</p>
<p>å˜åŒ–æ£€æµ‹ï¼šæ£€æµ‹è§†é¢‘ä¸­æ˜¯å¦å‡ºç°åˆ†å¸ƒå˜åŒ–ã€‚</p>
<p>å› æœæ¨æ–­ï¼šä»å› æœè§’åº¦å»ºæ¨¡æ­£å¸¸ä¸å¼‚å¸¸çš„å…³ç³»ã€‚</p>
<ul>
<li><strong>å¼€æ”¾é›†ä¸å°‘æ ·æœ¬ VADï¼šåº”å¯¹æœªçŸ¥å¼‚å¸¸</strong></li>
</ul>
<p>è¿™ç±»æ–¹æ³•æ—¨åœ¨è¯†åˆ«è®­ç»ƒä¸­æœªå‡ºç°çš„å¼‚å¸¸ã€‚å¸¸è§æŠ€æœ¯åŒ…æ‹¬ï¼š</p>
<p>è¾¹é™…å­¦ä¹ ï¼šåœ¨ç‰¹å¾ç©ºé—´ä¸­æ‹‰å¼€æ­£å¸¸ä¸å¼‚å¸¸çš„è·ç¦»ã€‚</p>
<p>åŸºäºå¤§æ¨¡å‹çš„æ–¹æ³•ï¼šåˆ©ç”¨è§†è§‰-è¯­è¨€æ¨¡å‹ï¼ˆå¦‚ CLIPï¼‰è¿›è¡Œé›¶æ ·æœ¬æˆ–å¼€æ”¾è¯æ±‡æ£€æµ‹ã€‚</p>
<p>å°‘æ ·æœ¬é€‚åº”ï¼šä»…ç”¨å°‘é‡æ ·æœ¬å¿«é€Ÿé€‚åº”æ–°åœºæ™¯ã€‚</p>
<p>å›¾10å±•ç¤ºäº†å…­ç§å…¸å‹çš„å¼€æ”¾é›†ç›‘ç£ VAD æ–¹æ³•æµç¨‹ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6043b8a1ca6408ba0d2019a900d5507~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767235887&amp;x-signature=vK%2FeuWta76JW8pjWfc%2B%2ByPy8VZg%3D" alt="screenshot_2025-12-24_16-25-23.png" loading="lazy"/></p>
<h2 data-id="heading-3"><strong>æœªæ¥æ–¹å‘ï¼šVAD å°†èµ°å‘ä½•æ–¹ï¼Ÿ</strong></h2>
<ul>
<li><strong>æ„å»ºæ›´å…¨é¢çš„åŸºå‡†æ•°æ®é›†</strong></li>
</ul>
<p>å½“å‰æ•°æ®é›†è§„æ¨¡å°ã€æ¨¡æ€å•ä¸€ã€‚æœªæ¥éœ€è¦ï¼š</p>
<ul>
<li><strong>å¤§è§„æ¨¡æ•°æ®ï¼š</strong> æ›´é•¿ã€æ›´ä¸°å¯Œçš„è§†é¢‘å†…å®¹ã€‚</li>
<li><strong>å¤šæ¨¡æ€èåˆï¼š</strong> ç»“åˆè§†è§‰ã€éŸ³é¢‘ã€çº¢å¤–ç­‰å¤šæ¨¡æ€ä¿¡æ¯ã€‚</li>
<li><strong>å¤šè§†è§’ä¸ç¬¬ä¸€è§†è§’ï¼š</strong> æ”¯æŒå¤šæ‘„åƒå¤´ã€ç¬¬ä¸€äººç§°è§†è§’ç­‰æ›´çœŸå®åœºæ™¯ã€‚</li>
</ul>

<ul>
<li><strong>è¿ˆå‘å¼€æ”¾ä¸–ç•Œ</strong></li>
</ul>
<p>ç°å®ä¸–ç•Œå¼‚å¸¸å±‚å‡ºä¸ç©·ï¼Œæ¨¡å‹éœ€å…·å¤‡ï¼š</p>
<ul>
<li><strong>å¼€æ”¾è¯æ±‡æ£€æµ‹ï¼š</strong> èƒ½ç†è§£å¹¶æ£€æµ‹æœªçŸ¥ç±»åˆ«çš„å¼‚å¸¸ã€‚</li>
<li><strong>å¢é‡å­¦ä¹ ï¼š</strong> æŒç»­å­¦ä¹ æ–°å¼‚å¸¸è€Œä¸é—å¿˜æ—§çŸ¥è¯†ã€‚</li>
</ul>

<ul>
<li><strong>æ‹¥æŠ±å¤§æ¨¡å‹</strong></li>
</ul>
<p>é¢„è®­ç»ƒå¤§æ¨¡å‹ï¼ˆå¦‚ CLIPã€LLMï¼‰ä¸º VAD å¸¦æ¥æ–°æœºé‡ï¼š</p>
<ul>
<li><strong>è¯­ä¹‰ç†è§£ï¼š</strong> ç»“åˆæ–‡æœ¬æè¿°æå‡å¼‚å¸¸è§£é‡Šèƒ½åŠ›ã€‚</li>
<li><strong>é›¶æ ·æœ¬æ£€æµ‹ï¼š</strong> æ— éœ€è®­ç»ƒå³å¯æ£€æµ‹æ–°å¼‚å¸¸ã€‚</li>
</ul>

<ul>
<li><strong>å¯è§£é‡Šæ€§ VAD</strong></li>
</ul>
<p>è®© AI ä¸ä»…æ£€æµ‹å¼‚å¸¸ï¼Œè¿˜èƒ½â€œè¯´â€å‡ºä¸ºä»€ä¹ˆï¼š</p>
<ul>
<li><strong>è§„åˆ™æ¨ç†ï¼š</strong> ç»“åˆçŸ¥è¯†å›¾è°±ã€å¤§è¯­è¨€æ¨¡å‹è¿›è¡Œé€»è¾‘æ¨ç†ã€‚</li>
<li><strong>å¯è§†åŒ–å®šä½ï¼š</strong> åœ¨åƒç´ çº§æ ‡æ³¨å¼‚å¸¸åŒºåŸŸï¼Œæå‡å¯è§£é‡Šæ€§ã€‚</li>
</ul>
<h2 data-id="heading-4"><strong>ç»“è¯­</strong></h2>
<p>è§†é¢‘å¼‚å¸¸æ£€æµ‹æ­£æœç€æ›´æ™ºèƒ½ã€æ›´å¼€æ”¾ã€æ›´å¯è§£é‡Šçš„æ–¹å‘å‘å±•ã€‚ä»ä»…ä½¿ç”¨æ­£å¸¸æ ·æœ¬çš„åŠç›‘ç£å­¦ä¹ ï¼Œåˆ°åº”å¯¹æœªçŸ¥å¼‚å¸¸çš„å¼€æ”¾é›†æ£€æµ‹ï¼Œå†åˆ°ç»“åˆå¤§æ¨¡å‹çš„å¤šæ¨¡æ€ç†è§£ï¼ŒVAD çš„æŠ€æœ¯æ¼”è¿›ä¸æ–­æ‹“å±•å…¶åº”ç”¨è¾¹ç•Œã€‚</p>
<p>æœªæ¥ï¼Œéšç€æ•°æ®è§„æ¨¡çš„æ‰©å¤§ã€ç®—æ³•èƒ½åŠ›çš„æå‡ä»¥åŠå¤šæ¨¡æ€èåˆçš„æ·±å…¥ï¼ŒVAD å°†åœ¨å®‰é˜²ã€äº¤é€šã€åŒ»ç–—ç­‰é¢†åŸŸå‘æŒ¥æ›´åŠ å…³é”®çš„ä½œç”¨ï¼ŒçœŸæ­£å®ç°â€œè®©ç›‘æ§æ›´æ™ºèƒ½â€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vue3è¿™äº›å¸¸è§æŒ‡ä»¤ä½ å°è£…äº†å—]]></title>    <link>https://juejin.cn/post/7587349016222122025</link>    <guid>https://juejin.cn/post/7587349016222122025</guid>    <pubDate>2025-12-25T02:53:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587349016222122025" data-draft-id="7587329107303907391" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vue3è¿™äº›å¸¸è§æŒ‡ä»¤ä½ å°è£…äº†å—"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-25T02:53:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ—å¤ªç™½"/> <meta itemprop="url" content="https://juejin.cn/user/1874034273300919"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vue3è¿™äº›å¸¸è§æŒ‡ä»¤ä½ å°è£…äº†å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1874034273300919/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ—å¤ªç™½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T02:53:33.000Z" title="Thu Dec 25 2025 02:53:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">vue3è¿™äº›å¸¸è§æŒ‡ä»¤ä½ å°è£…äº†å—</h2>
<h3 data-id="heading-1">ğŸ‘‰æŒ‡ä»¤æ­å»º</h3>
<p>vue3ä¹‹ä¸­ä¼šæœ‰ä¸€äº›å¸¸è§çš„æŒ‡ä»¤æ“ä½œï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å†™ä¸€ä¸‹,ä¹‹å‰æˆ‘ä»¬å†™äº†æƒé™æŒ‰é’®ï¼Œå…¶å®æ˜¯ç±»ä¼¼çš„</p>
<p>æŒ‡ä»¤çš„æœ€ä¸»è¦æ–‡ä»¶å¦‚ä¸‹ï¼Œæˆ‘ä»¬ä¸»è¦æ˜¯ä¸»æ¨¡å—ä¹‹ä¸­ä½¿ç”¨ï¼Œå…¶ä»–çš„æ¨¡å—ä¹‹ä¸­åˆ†å‰²å†™å¥½æ–¹æ³•å³å¯</p>
<h4 data-id="heading-2">æŒ‡ä»¤ä¸»è¦æ–‡ä»¶</h4>
<pre><code class="hljs language-javascript" lang="javascript">src\utils\directive\index.<span class="hljs-property">ts</span>

<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">App</span>, <span class="hljs-title class_">Directive</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">const</span> directives={};
<span class="hljs-comment">// å¯¼å‡ºæ’ä»¶å¯¹è±¡</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> registerDirectives = {
  <span class="hljs-title function_">install</span>(<span class="hljs-params">app: App</span>) {
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(directives).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> {
      app.<span class="hljs-title function_">directive</span>(key, directives[key])
    })
  }
}
</code></pre>
<h4 data-id="heading-3">æŒ‡ä»¤ä½¿ç”¨</h4>
<pre><code class="hljs language-javascript" lang="javascript">
<span class="hljs-comment">// æŒ‡ä»¤ä½¿ç”¨</span>
<span class="hljs-keyword">import</span> {registerDirectives} <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/directive'</span><span class="hljs-comment">// å¯¼å…¥å…¨å±€æŒ‡ä»¤</span>
app.<span class="hljs-title function_">use</span>(registerDirectives);<span class="hljs-comment">//å…¨å±€æŒ‡ä»¤æ³¨å†Œ</span>
</code></pre>
<h3 data-id="heading-4">ğŸ‘‰æŒ‡ä»¤ç¼–å†™</h3>
<h4 data-id="heading-5">å¤åˆ¶æŒ‡ä»¤</h4>
<h5 data-id="heading-6">æŒ‡ä»¤ç¼–å†™</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> type { <span class="hljs-title class_">Directive</span>, <span class="hljs-title class_">App</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// æ‰©å±• HTMLElement æ¥å£</span>
declare <span class="hljs-variable language_">global</span> {
  interface <span class="hljs-title class_">HTMLElement</span> {
    copyData?: string
  }
}

<span class="hljs-comment">// å®šä¹‰æŒ‡ä»¤å€¼çš„ç±»å‹</span>
interface <span class="hljs-title class_">CopyBinding</span> {
  <span class="hljs-attr">value</span>: string
}

<span class="hljs-comment">// å¤åˆ¶æŒ‡ä»¤é…ç½®</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">copy</span>: <span class="hljs-title class_">Directive</span>&lt;<span class="hljs-title class_">HTMLElement</span>, string&gt; = {
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el: HTMLElement, binding: CopyBinding</span>) {
    <span class="hljs-comment">// ä¿å­˜è¦å¤åˆ¶çš„å€¼</span>
    el.<span class="hljs-property">copyData</span> = binding.<span class="hljs-property">value</span>
    <span class="hljs-comment">// æ·»åŠ ç‚¹å‡»äº‹ä»¶ç›‘å¬</span>
    el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, handleClick)
  },
  <span class="hljs-title function_">updated</span>(<span class="hljs-params">el: HTMLElement, binding: CopyBinding</span>) {
    <span class="hljs-comment">// æ›´æ–°è¦å¤åˆ¶çš„å€¼</span>
    el.<span class="hljs-property">copyData</span> = binding.<span class="hljs-property">value</span>
  },
  <span class="hljs-title function_">beforeUnmount</span>(<span class="hljs-params">el: HTMLElement</span>) {
    <span class="hljs-comment">// ç§»é™¤äº‹ä»¶ç›‘å¬</span>
    el.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'click'</span>, handleClick)
  }
}

<span class="hljs-comment">// å¤„ç†å¤åˆ¶åŠŸèƒ½</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">event: Event</span>) =&gt; {
  <span class="hljs-keyword">const</span> el = event.<span class="hljs-property">currentTarget</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLElement</span>
  <span class="hljs-keyword">if</span> (!el.<span class="hljs-property">copyData</span>) <span class="hljs-keyword">return</span>

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// ä½¿ç”¨ç°ä»£çš„ Clipboard API</span>
    <span class="hljs-keyword">await</span> navigator.<span class="hljs-property">clipboard</span>.<span class="hljs-title function_">writeText</span>(el.<span class="hljs-property">copyData</span>)
    <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ æˆåŠŸæç¤º</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤åˆ¶æˆåŠŸ'</span>)
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-comment">// é™çº§æ–¹æ¡ˆï¼šä½¿ç”¨ä¼ ç»Ÿæ–¹æ³•</span>
    <span class="hljs-keyword">const</span> input = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'input'</span>)
    input.<span class="hljs-property">value</span> = el.<span class="hljs-property">copyData</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(input)
    input.<span class="hljs-title function_">select</span>()
    <span class="hljs-keyword">try</span> {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">execCommand</span>(<span class="hljs-string">'Copy'</span>)
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤åˆ¶æˆåŠŸ'</span>)
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å¤åˆ¶å¤±è´¥:'</span>, err)
    }
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(input)
  }
}
<span class="hljs-comment">// å¯¼å‡ºæŒ‡ä»¤å¯¹è±¡</span>
<span class="hljs-keyword">export</span> { copy }

</code></pre>
<h5 data-id="heading-7">å¼•å…¥æŒ‡ä»¤</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¤åˆ¶æŒ‡ä»¤</span>
<span class="hljs-keyword">import</span> {copy} <span class="hljs-keyword">from</span> <span class="hljs-string">'./modules/copy'</span>

<span class="hljs-comment">// å®šä¹‰æ‰€æœ‰æŒ‡ä»¤</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">directives</span>: <span class="hljs-title class_">Record</span>&lt;string, <span class="hljs-title class_">Directive</span>&gt; = {

  <span class="hljs-comment">// å¤åˆ¶æŒ‡ä»¤</span>
  copy,
}
</code></pre>
<h5 data-id="heading-8">ä½¿ç”¨æŒ‡ä»¤</h5>
<p>æ¥ä¸‹æ¥æ¼”ç¤ºä¸€ä¸‹åœ¨é¡¹ç›®ä¹‹ä¸­è¿›è¡Œä½¿ç”¨æŒ‡ä»¤</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"flex gap-3"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
      <span class="hljs-attr">class</span>=<span class="hljs-string">"flex-1 px-4 py-2 bg-gray-50 border-0 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200"</span> 
      <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥è¦å¤åˆ¶çš„å†…å®¹"</span> 
      <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> 
      <span class="hljs-attr">v-model</span>=<span class="hljs-string">"data"</span>
    &gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> 
      <span class="hljs-attr">class</span>=<span class="hljs-string">"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors duration-200"</span>
      <span class="hljs-attr">v-copy</span>=<span class="hljs-string">"data"</span>
    &gt;</span>
      å¤åˆ¶
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> data = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'æˆ‘æ˜¯è¢«å¤åˆ¶çš„å†…å®¹ ğŸ’ ğŸ‰ ğŸŠ'</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

</code></pre>
<h4 data-id="heading-9">æ°´å°æŒ‡ä»¤</h4>
<p>æ¥ä¸‹æ¥å†™ä¸€ä¸ªæ°´å°æŒ‡ä»¤ï¼Œæˆ‘ä»¬è®¾ç½®çš„æ˜¯é‡‡å–canvaså®ç°çš„æ°´å°æ•ˆæœï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±ç¼–å†™ä¸€ä¸‹</p>
<h5 data-id="heading-10">å¼•å…¥æŒ‡ä»¤</h5>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±åœ¨è¿™é‡Œç¼–å†™æ°´å°</p>
<pre><code class="hljs language-javascript" lang="javascript">src\utils\directive\modules\watermark .<span class="hljs-property">ts</span>
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ°´å°æŒ‡ä»¤</span>
<span class="hljs-keyword">import</span> {watermark} <span class="hljs-keyword">from</span> <span class="hljs-string">'./modules/watermark'</span>

<span class="hljs-comment">// å®šä¹‰æ‰€æœ‰æŒ‡ä»¤</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">directives</span>: <span class="hljs-title class_">Record</span>&lt;string, <span class="hljs-title class_">Directive</span>&gt; = {
  <span class="hljs-comment">// æ°´å°æŒ‡ä»¤</span>
  watermark,
}
</code></pre>
<h5 data-id="heading-11">æŒ‡ä»¤ç¼–å†™</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// modules/watermark.ts</span>

<span class="hljs-keyword">export</span> interface <span class="hljs-title class_">WatermarkConfig</span> {
  text?: string
  color?: string
  fontSize?: number
  fontFamily?: string
  width?: number
  height?: number
  rotate?: number
  zIndex?: number
}

interface <span class="hljs-title class_">HTMLElementWithWatermark</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HTMLElement</span> {
  _watermarkElement?: <span class="hljs-title class_">HTMLDivElement</span>
}

<span class="hljs-keyword">const</span> <span class="hljs-attr">defaultConfig</span>: <span class="hljs-title class_">Required</span>&lt;<span class="hljs-title class_">WatermarkConfig</span>&gt; = {
  <span class="hljs-attr">text</span>: <span class="hljs-string">'Watermark'</span>,
  <span class="hljs-attr">color</span>: <span class="hljs-string">'rgba(0, 0, 0, 0.15)'</span>,
  <span class="hljs-attr">fontSize</span>: <span class="hljs-number">16</span>,
  <span class="hljs-attr">fontFamily</span>: <span class="hljs-string">'Arial'</span>,
  <span class="hljs-attr">width</span>: <span class="hljs-number">200</span>,
  <span class="hljs-attr">height</span>: <span class="hljs-number">200</span>,
  <span class="hljs-attr">rotate</span>: -<span class="hljs-number">20</span>,
  <span class="hljs-attr">zIndex</span>: <span class="hljs-number">9999</span>
}

<span class="hljs-keyword">const</span> createWatermark = (<span class="hljs-attr">config</span>: <span class="hljs-title class_">WatermarkConfig</span>): <span class="hljs-function"><span class="hljs-params">string</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> finalConfig = { ...defaultConfig, ...config }
  
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'canvas'</span>)
  canvas.<span class="hljs-property">width</span> = finalConfig.<span class="hljs-property">width</span>
  canvas.<span class="hljs-property">height</span> = finalConfig.<span class="hljs-property">height</span>
  <span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'2d'</span>)!

  <span class="hljs-comment">// è®¾ç½®ç”»å¸ƒæ ·å¼</span>
  ctx.<span class="hljs-title function_">rotate</span>((finalConfig.<span class="hljs-property">rotate</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>) / <span class="hljs-number">180</span>)
  ctx.<span class="hljs-property">font</span> = <span class="hljs-string">`<span class="hljs-subst">${finalConfig.fontSize}</span>px <span class="hljs-subst">${finalConfig.fontFamily}</span>`</span>
  ctx.<span class="hljs-property">fillStyle</span> = finalConfig.<span class="hljs-property">color</span>
  ctx.<span class="hljs-property">textAlign</span> = <span class="hljs-string">'center'</span>
  ctx.<span class="hljs-property">textBaseline</span> = <span class="hljs-string">'middle'</span>
  
  <span class="hljs-comment">// ç»˜åˆ¶æ°´å°æ–‡æœ¬</span>
  ctx.<span class="hljs-title function_">fillText</span>(finalConfig.<span class="hljs-property">text</span>, finalConfig.<span class="hljs-property">width</span> / <span class="hljs-number">2</span>, finalConfig.<span class="hljs-property">height</span> / <span class="hljs-number">2</span>)

  <span class="hljs-keyword">return</span> canvas.<span class="hljs-title function_">toDataURL</span>()
}

<span class="hljs-keyword">const</span> watermark = {
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el: HTMLElementWithWatermark, binding: { value: WatermarkConfig }</span>) {
    <span class="hljs-keyword">const</span> config = binding.<span class="hljs-property">value</span> || {}
    <span class="hljs-keyword">const</span> dataURL = <span class="hljs-title function_">createWatermark</span>(config)

    <span class="hljs-comment">// åˆ›å»ºæ°´å°å±‚</span>
    <span class="hljs-keyword">const</span> watermarkDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>)
    watermarkDiv.<span class="hljs-property">style</span>.<span class="hljs-property">position</span> = <span class="hljs-string">'absolute'</span>
    watermarkDiv.<span class="hljs-property">style</span>.<span class="hljs-property">top</span> = <span class="hljs-string">'0'</span>
    watermarkDiv.<span class="hljs-property">style</span>.<span class="hljs-property">left</span> = <span class="hljs-string">'0'</span>
    watermarkDiv.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">'100%'</span>
    watermarkDiv.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-string">'100%'</span>
    watermarkDiv.<span class="hljs-property">style</span>.<span class="hljs-property">pointerEvents</span> = <span class="hljs-string">'none'</span>
    watermarkDiv.<span class="hljs-property">style</span>.<span class="hljs-property">backgroundImage</span> = <span class="hljs-string">`url(<span class="hljs-subst">${dataURL}</span>)`</span>
    watermarkDiv.<span class="hljs-property">style</span>.<span class="hljs-property">backgroundRepeat</span> = <span class="hljs-string">'repeat'</span>
    watermarkDiv.<span class="hljs-property">style</span>.<span class="hljs-property">zIndex</span> = <span class="hljs-title class_">String</span>(config.<span class="hljs-property">zIndex</span> || defaultConfig.<span class="hljs-property">zIndex</span>)

    <span class="hljs-comment">// è®¾ç½®çˆ¶å…ƒç´ ä¸ºç›¸å¯¹å®šä½</span>
    el.<span class="hljs-property">style</span>.<span class="hljs-property">position</span> = <span class="hljs-string">'relative'</span>
    <span class="hljs-comment">// æ·»åŠ æ°´å°å±‚</span>
    el.<span class="hljs-title function_">appendChild</span>(watermarkDiv)

    <span class="hljs-comment">// ä¿å­˜æ°´å°å…ƒç´ å¼•ç”¨</span>
    el.<span class="hljs-property">_watermarkElement</span> = watermarkDiv
  },

  <span class="hljs-title function_">updated</span>(<span class="hljs-params">el: HTMLElementWithWatermark, binding: { value: WatermarkConfig; oldValue: WatermarkConfig }</span>) {
    <span class="hljs-comment">// å¦‚æœé…ç½®å‘ç”Ÿå˜åŒ–ï¼Œé‡æ–°æ¸²æŸ“æ°´å°</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(binding.<span class="hljs-property">value</span>) !== <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(binding.<span class="hljs-property">oldValue</span>)) {
      <span class="hljs-comment">// ç§»é™¤æ—§æ°´å°</span>
      <span class="hljs-keyword">if</span> (el.<span class="hljs-property">_watermarkElement</span>) {
        el.<span class="hljs-title function_">removeChild</span>(el.<span class="hljs-property">_watermarkElement</span>)
      }
      <span class="hljs-comment">// åˆ›å»ºæ–°æ°´å°</span>
      watermark.<span class="hljs-title function_">mounted</span>(el, binding)
    }
  },

  <span class="hljs-title function_">unmounted</span>(<span class="hljs-params">el: HTMLElementWithWatermark</span>) {
    <span class="hljs-comment">// ç»„ä»¶å¸è½½æ—¶ç§»é™¤æ°´å°</span>
    <span class="hljs-keyword">if</span> (el.<span class="hljs-property">_watermarkElement</span>) {
      el.<span class="hljs-title function_">removeChild</span>(el.<span class="hljs-property">_watermarkElement</span>)
      <span class="hljs-keyword">delete</span> el.<span class="hljs-property">_watermarkElement</span>
    }
  }
}
<span class="hljs-keyword">export</span> { watermark }
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> watermark;

</code></pre>
<h5 data-id="heading-12">æŒ‡ä»¤ä½¿ç”¨</h5>
<p>è¿™ä¸ªæ—¶å€™ä½¿ç”¨æˆ‘ä»¬çš„æŒ‡ä»¤ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„æ•ˆæœ</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"flex gap-3 content"</span> <span class="hljs-attr">v-watermark</span>=<span class="hljs-string">"watermarkConfig"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-lg font-semibold mb-4 text-gray-800"</span>&gt;</span>æ°´å°æŒ‡ä»¤<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
      <span class="hljs-attr">class</span>=<span class="hljs-string">"flex-1 px-4 py-2  border-0 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200"</span> 
      <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥è¦å¤åˆ¶çš„å†…å®¹"</span> 
      <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> 
      <span class="hljs-attr">v-model</span>=<span class="hljs-string">"data"</span>
    &gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref,computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-comment">// å°†åŸæ¥çš„ compute æ–¹æ³•æ”¹ä¸ºè®¡ç®—å±æ€§</span>
<span class="hljs-keyword">const</span> watermarkText = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> data.<span class="hljs-property">value</span>)

<span class="hljs-keyword">const</span> data = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'æ°´å°å†…å®¹ğŸ’ ğŸ‰ ğŸŠ'</span>)

<span class="hljs-comment">// ç„¶ååœ¨ watermarkConfig ä¸­ä½¿ç”¨è¿™ä¸ªè®¡ç®—å±æ€§</span>
<span class="hljs-keyword">const</span> watermarkConfig = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> ({
  <span class="hljs-attr">text</span>: watermarkText.<span class="hljs-property">value</span>,
  <span class="hljs-attr">color</span>: <span class="hljs-string">'rgba(0, 0, 0, 0.15)'</span>,
  <span class="hljs-attr">fontSize</span>: <span class="hljs-number">16</span>,
  <span class="hljs-attr">fontFamily</span>: <span class="hljs-string">'Arial'</span>,
  <span class="hljs-attr">width</span>: <span class="hljs-number">200</span>,
  <span class="hljs-attr">height</span>: <span class="hljs-number">200</span>,
  <span class="hljs-attr">rotate</span>: -<span class="hljs-number">20</span>,
  <span class="hljs-attr">zIndex</span>: <span class="hljs-number">9999</span>,
}))
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.content</span> {
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-13">æ‹–æ‹½æŒ‡ä»¤</h4>
<h5 data-id="heading-14">æŒ‡ä»¤ç¼–å†™</h5>
<pre><code class="hljs language-javascript" lang="javascript">src\utils\directive\modules\draggable.<span class="hljs-property">ts</span>
</code></pre>
<p>æŒ‡ä»¤å†…å®¹,è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸ªéƒ¨åˆ†ï¼ŒæŒ‡ä»¤çš„ä½ç½®æ˜¯ç›¸å¯¹äºæˆ‘ä»¬çˆ¶å…ƒç´ ä½ç½®ï¼Œè€Œä¸æ˜¯ç›¸å¯¹äºæˆ‘ä»¬è§†å£çš„ä½ç½®</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è®°å½•åˆå§‹ä½ç½®</span>
<span class="hljs-keyword">const</span> rect = el.<span class="hljs-title function_">getBoundingClientRect</span>()
dragData.<span class="hljs-property">initialLeft</span> = rect.<span class="hljs-property">left</span>
dragData.<span class="hljs-property">initialTop</span> = rect.<span class="hljs-property">top</span>

=&gt;æ›´æ”¹ä¸º

<span class="hljs-comment">// è·å–å½“å‰ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®åˆ™é»˜è®¤ä¸º0</span>
dragData.<span class="hljs-property">initialLeft</span> = <span class="hljs-built_in">parseInt</span>(el.<span class="hljs-property">style</span>.<span class="hljs-property">left</span>) || <span class="hljs-number">0</span>
dragData.<span class="hljs-property">initialTop</span> = <span class="hljs-built_in">parseInt</span>(el.<span class="hljs-property">style</span>.<span class="hljs-property">top</span>) || <span class="hljs-number">0</span>
</code></pre>
<p>å®Œæ•´ä¿®æ”¹ä»¥åæˆ‘ä»¬çš„ç‰ˆæœ¬å¦‚ä¸‹</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> type { <span class="hljs-title class_">Directive</span>, <span class="hljs-title class_">DirectiveBinding</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

interface <span class="hljs-title class_">DraggableElement</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HTMLElement</span> {
  _dragData?: {
    <span class="hljs-attr">isDragging</span>: boolean
    <span class="hljs-attr">startX</span>: number
    <span class="hljs-attr">startY</span>: number
    <span class="hljs-attr">initialLeft</span>: number
    <span class="hljs-attr">initialTop</span>: number
    <span class="hljs-attr">initialPosition</span>: string
    <span class="hljs-attr">zIndex</span>: string
  }
  _cleanup?: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">void</span>  <span class="hljs-comment">// æ·»åŠ è¿™ä¸€è¡Œ</span>
}


<span class="hljs-keyword">const</span> <span class="hljs-attr">draggable</span>: <span class="hljs-title class_">Directive</span>&lt;<span class="hljs-title class_">DraggableElement</span>, boolean&gt; = {
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el: DraggableElement, binding: DirectiveBinding&lt;boolean&gt;</span>) {
    <span class="hljs-keyword">if</span> (binding.<span class="hljs-property">value</span> === <span class="hljs-literal">false</span>) <span class="hljs-keyword">return</span>

    <span class="hljs-keyword">const</span> dragData = {
      <span class="hljs-attr">isDragging</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">startX</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">startY</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">initialLeft</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">initialTop</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">initialPosition</span>: <span class="hljs-string">''</span>,
      <span class="hljs-attr">zIndex</span>: <span class="hljs-string">''</span>
    }
    el.<span class="hljs-property">_dragData</span> = dragData

    <span class="hljs-comment">// è®¾ç½®åˆå§‹æ ·å¼</span>
    el.<span class="hljs-property">style</span>.<span class="hljs-property">cursor</span> = <span class="hljs-string">'move'</span>
    el.<span class="hljs-property">style</span>.<span class="hljs-property">position</span> = el.<span class="hljs-property">style</span>.<span class="hljs-property">position</span> || <span class="hljs-string">'absolute'</span>

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseDown</span> = (<span class="hljs-params">e: MouseEvent</span>) =&gt; {
      dragData.<span class="hljs-property">isDragging</span> = <span class="hljs-literal">true</span>
      dragData.<span class="hljs-property">startX</span> = e.<span class="hljs-property">clientX</span>
      dragData.<span class="hljs-property">startY</span> = e.<span class="hljs-property">clientY</span>
      dragData.<span class="hljs-property">initialPosition</span> = el.<span class="hljs-property">style</span>.<span class="hljs-property">position</span>
      dragData.<span class="hljs-property">zIndex</span> = el.<span class="hljs-property">style</span>.<span class="hljs-property">zIndex</span>
      
      <span class="hljs-comment">// è·å–å½“å‰ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®åˆ™é»˜è®¤ä¸º0</span>
      dragData.<span class="hljs-property">initialLeft</span> = <span class="hljs-built_in">parseInt</span>(el.<span class="hljs-property">style</span>.<span class="hljs-property">left</span>) || <span class="hljs-number">0</span>
      dragData.<span class="hljs-property">initialTop</span> = <span class="hljs-built_in">parseInt</span>(el.<span class="hljs-property">style</span>.<span class="hljs-property">top</span>) || <span class="hljs-number">0</span>

      <span class="hljs-comment">// æé«˜å±‚çº§</span>
      el.<span class="hljs-property">style</span>.<span class="hljs-property">zIndex</span> = <span class="hljs-string">'9999'</span>
      
      <span class="hljs-comment">// æ·»åŠ ç§»åŠ¨æ—¶çš„æ ·å¼</span>
      el.<span class="hljs-property">style</span>.<span class="hljs-property">transition</span> = <span class="hljs-string">'none'</span>
      el.<span class="hljs-property">style</span>.<span class="hljs-property">userSelect</span> = <span class="hljs-string">'none'</span>
    }

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseMove</span> = (<span class="hljs-params">e: MouseEvent</span>) =&gt; {
      <span class="hljs-keyword">if</span> (!dragData.<span class="hljs-property">isDragging</span>) <span class="hljs-keyword">return</span>

      <span class="hljs-keyword">const</span> deltaX = e.<span class="hljs-property">clientX</span> - dragData.<span class="hljs-property">startX</span>
      <span class="hljs-keyword">const</span> deltaY = e.<span class="hljs-property">clientY</span> - dragData.<span class="hljs-property">startY</span>

      el.<span class="hljs-property">style</span>.<span class="hljs-property">left</span> = <span class="hljs-string">`<span class="hljs-subst">${dragData.initialLeft + deltaX}</span>px`</span>
      el.<span class="hljs-property">style</span>.<span class="hljs-property">top</span> = <span class="hljs-string">`<span class="hljs-subst">${dragData.initialTop + deltaY}</span>px`</span>
    }

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseUp</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">if</span> (!dragData.<span class="hljs-property">isDragging</span>) <span class="hljs-keyword">return</span>
      
      dragData.<span class="hljs-property">isDragging</span> = <span class="hljs-literal">false</span>
      
      <span class="hljs-comment">// æ¢å¤æ ·å¼</span>
      el.<span class="hljs-property">style</span>.<span class="hljs-property">zIndex</span> = dragData.<span class="hljs-property">zIndex</span>
      el.<span class="hljs-property">style</span>.<span class="hljs-property">userSelect</span> = <span class="hljs-string">''</span>
      el.<span class="hljs-property">style</span>.<span class="hljs-property">transition</span> = <span class="hljs-string">''</span>
    }

    <span class="hljs-comment">// æ·»åŠ äº‹ä»¶ç›‘å¬</span>
    el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousedown'</span>, handleMouseDown)
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousemove'</span>, handleMouseMove)
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mouseup'</span>, handleMouseUp)

    <span class="hljs-comment">// ä¿å­˜æ¸…ç†å‡½æ•°</span>
    el.<span class="hljs-property">_cleanup</span> = <span class="hljs-function">() =&gt;</span> {
      el.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mousedown'</span>, handleMouseDown)
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mousemove'</span>, handleMouseMove)
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mouseup'</span>, handleMouseUp)
    }
  },

  <span class="hljs-title function_">unmounted</span>(<span class="hljs-params">el: DraggableElement</span>) {
    <span class="hljs-comment">// æ¸…ç†äº‹ä»¶ç›‘å¬</span>
    <span class="hljs-keyword">if</span> (el.<span class="hljs-property">_cleanup</span>) {
      el.<span class="hljs-title function_">_cleanup</span>()
    }
    <span class="hljs-keyword">delete</span> el.<span class="hljs-property">_dragData</span>
  },

  <span class="hljs-title function_">updated</span>(<span class="hljs-params">el: DraggableElement, binding: DirectiveBinding&lt;boolean&gt;</span>) {
    <span class="hljs-comment">// å¦‚æœæŒ‡ä»¤å€¼æ”¹å˜ï¼Œæ›´æ–°çŠ¶æ€</span>
    <span class="hljs-keyword">if</span> (binding.<span class="hljs-property">value</span> === <span class="hljs-literal">false</span> &amp;&amp; el.<span class="hljs-property">_dragData</span>) {
      el.<span class="hljs-property">style</span>.<span class="hljs-property">cursor</span> = <span class="hljs-string">''</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (binding.<span class="hljs-property">value</span> === <span class="hljs-literal">true</span>) {
      el.<span class="hljs-property">style</span>.<span class="hljs-property">cursor</span> = <span class="hljs-string">'move'</span>
    }
  }
}

<span class="hljs-keyword">export</span> {draggable}

</code></pre>
<h5 data-id="heading-15">æŒ‡ä»¤ä½¿ç”¨</h5>
<p>æˆ‘ä»¬åœ¨æŒ‡ä»¤ä¹‹ä¸­è¿›è¡Œä½¿ç”¨ï¼Œæ•ˆæœok</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"relative"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-draggable</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"draggable-box"</span>&gt;</span>
      å¯æ‹–æ‹½çš„å†…å®¹
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ä¹Ÿå¯ä»¥åŠ¨æ€æ§åˆ¶æ˜¯å¦å¯æ‹–æ‹½ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-draggable</span>=<span class="hljs-string">"isDraggable"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"draggable-box"</span>&gt;</span>
      æ¡ä»¶æ‹–æ‹½çš„å†…å®¹
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">const</span> isDraggable = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">true</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.draggable-box</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#409EFF</span>;
  <span class="hljs-attribute">color</span>: white;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">justify-content</span>: center;
  <span class="hljs-attribute">position</span>: absolute;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-16">é˜²æŠ–æŒ‡ä»¤</h4>
<h5 data-id="heading-17">æŒ‡ä»¤ç¼–å†™</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// modules/debounce.ts</span>
<span class="hljs-comment">/**
 * é˜²æŠ–å‡½æ•°
 * <span class="hljs-doctag">@param</span> fn éœ€è¦é˜²æŠ–çš„å‡½æ•°
 * <span class="hljs-doctag">@param</span> delay å»¶è¿Ÿæ—¶é—´ï¼Œå•ä½æ¯«ç§’ï¼Œé»˜è®¤300ms
 * <span class="hljs-doctag">@param</span> immediate æ˜¯å¦ç«‹å³æ‰§è¡Œï¼Œé»˜è®¤false
 * <span class="hljs-doctag">@returns</span> è¿”å›é˜²æŠ–å¤„ç†åçš„å‡½æ•°
 */</span>
interface <span class="hljs-title class_">DebounceBinding</span> {
  <span class="hljs-attr">value</span>: <span class="hljs-title class_">Function</span>;
  arg?: string; <span class="hljs-comment">// å»¶è¿Ÿæ—¶é—´å‚æ•°</span>
}

<span class="hljs-comment">// é˜²æŠ–å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">debounceFn</span>(<span class="hljs-params">func: <span class="hljs-built_in">Function</span>, wait: number</span>) {
  <span class="hljs-keyword">let</span> <span class="hljs-attr">timeout</span>: <span class="hljs-title class_">NodeJS</span>.<span class="hljs-property">Timeout</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-variable language_">this</span>: any, ...args: any[]</span>) {
    <span class="hljs-built_in">clearTimeout</span>(timeout);
    timeout = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      func.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
    }, wait);
  };
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> debounce = {
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el: HTMLElement, binding: DebounceBinding</span>) {
    <span class="hljs-comment">// è·å–å»¶è¿Ÿæ—¶é—´ï¼Œé»˜è®¤ä¸º 500ms</span>
    <span class="hljs-keyword">const</span> delay = <span class="hljs-title class_">Number</span>(binding.<span class="hljs-property">arg</span>) || <span class="hljs-number">500</span>;
    
    <span class="hljs-comment">// åˆ›å»ºé˜²æŠ–å‡½æ•°</span>
    <span class="hljs-keyword">const</span> debouncedFn = <span class="hljs-title function_">debounceFn</span>(binding.<span class="hljs-property">value</span>, delay);
    
    <span class="hljs-comment">// ä¿å­˜åŸå§‹å‡½æ•°å’Œé˜²æŠ–å‡½æ•°åˆ°å…ƒç´ çš„ dataset ä¸­</span>
    el.<span class="hljs-property">dataset</span>.<span class="hljs-property">debounceFn</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
      <span class="hljs-attr">original</span>: binding.<span class="hljs-property">value</span>.<span class="hljs-title function_">toString</span>(),
      <span class="hljs-attr">debounced</span>: debouncedFn.<span class="hljs-title function_">toString</span>()
    });
    
    <span class="hljs-comment">// æ·»åŠ äº‹ä»¶ç›‘å¬å™¨</span>
    el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, debouncedFn);
  },
  
  <span class="hljs-title function_">updated</span>(<span class="hljs-params">el: HTMLElement, binding: DebounceBinding</span>) {
    <span class="hljs-comment">// å¦‚æœå€¼å‘ç”Ÿå˜åŒ–ï¼Œæ›´æ–°é˜²æŠ–å‡½æ•°</span>
    <span class="hljs-keyword">const</span> delay = <span class="hljs-title class_">Number</span>(binding.<span class="hljs-property">arg</span>) || <span class="hljs-number">500</span>;
    <span class="hljs-keyword">const</span> debouncedFn = <span class="hljs-title function_">debounceFn</span>(binding.<span class="hljs-property">value</span>, delay);
    
    <span class="hljs-comment">// ç§»é™¤æ—§çš„äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-keyword">const</span> oldFn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Function</span>(<span class="hljs-string">'return '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(el.<span class="hljs-property">dataset</span>.<span class="hljs-property">debounceFn</span> || <span class="hljs-string">'{}'</span>).<span class="hljs-property">debounced</span>)();
    el.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'click'</span>, oldFn);
    
    <span class="hljs-comment">// æ›´æ–° dataset</span>
    el.<span class="hljs-property">dataset</span>.<span class="hljs-property">debounceFn</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
      <span class="hljs-attr">original</span>: binding.<span class="hljs-property">value</span>.<span class="hljs-title function_">toString</span>(),
      <span class="hljs-attr">debounced</span>: debouncedFn.<span class="hljs-title function_">toString</span>()
    });
    
    <span class="hljs-comment">// æ·»åŠ æ–°çš„äº‹ä»¶ç›‘å¬å™¨</span>
    el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, debouncedFn);
  },
  
  <span class="hljs-title function_">unmounted</span>(<span class="hljs-params">el: HTMLElement</span>) {
    <span class="hljs-comment">// ç»„ä»¶å¸è½½æ—¶ç§»é™¤äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-keyword">const</span> fn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Function</span>(<span class="hljs-string">'return '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(el.<span class="hljs-property">dataset</span>.<span class="hljs-property">debounceFn</span> || <span class="hljs-string">'{}'</span>).<span class="hljs-property">debounced</span>)();
    el.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'click'</span>, fn);
    <span class="hljs-keyword">delete</span> el.<span class="hljs-property">dataset</span>.<span class="hljs-property">debounceFn</span>;
  }
};

<span class="hljs-comment">// å¯¼å‡ºé˜²æŠ–å‡½æ•°ä¾›å…¶ä»–åœ°æ–¹ä½¿ç”¨</span>
<span class="hljs-keyword">export</span> { debounceFn };

</code></pre>
<h5 data-id="heading-18">æŒ‡ä»¤ä½¿ç”¨</h5>
<pre><code class="hljs language-javascript" lang="javascript">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"flex flex-wrap gap-4 p-6"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- åŸºç¡€é˜²æŠ–æŒ‰é’® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
      <span class="hljs-attr">v-debounce</span>=<span class="hljs-string">"handleClick"</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"px-6 py-2.5 bg-blue-600 text-white font-medium text-sm leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out"</span>
    &gt;</span>
      é˜²æŠ–æŒ‰é’®
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- 500msé˜²æŠ–æŒ‰é’® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
      <span class="hljs-attr">v-debounce:500</span>=<span class="hljs-string">"handleClick"</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"px-6 py-2.5 bg-green-600 text-white font-medium text-sm leading-tight uppercase rounded shadow-md hover:bg-green-700 hover:shadow-lg focus:bg-green-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-green-800 active:shadow-lg transition duration-150 ease-in-out"</span>
    &gt;</span>
      500msé˜²æŠ–æŒ‰é’®
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- ç«‹å³æ‰§è¡Œé˜²æŠ–æŒ‰é’® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
      <span class="hljs-attr">v-debounce.immediate</span>=<span class="hljs-string">"handleClick"</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"px-6 py-2.5 bg-purple-600 text-white font-medium text-sm leading-tight uppercase rounded shadow-md hover:bg-purple-700 hover:shadow-lg focus:bg-purple-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-purple-800 active:shadow-lg transition duration-150 ease-in-out"</span>
    &gt;</span>
      ç«‹å³æ‰§è¡Œé˜²æŠ–æŒ‰é’®
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é˜²æŠ–æŒ‰é’®ç‚¹å‡»'</span>);
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

</code></pre>
<h4 data-id="heading-19">èŠ‚æµæŒ‡ä»¤</h4>
<h5 data-id="heading-20">æŒ‡ä»¤ç¼–å†™</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * v-throttle æŒ‡ä»¤
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Function</span>} fn éœ€è¦èŠ‚æµçš„å‡½æ•°
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Number</span>} delay å»¶è¿Ÿæ—¶é—´
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Boolean</span>} immediate æ˜¯å¦ç«‹å³æ‰§è¡Œ
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Function</span>} è¿”å›ä¸€ä¸ªèŠ‚æµåçš„å‡½æ•°
 */</span>

<span class="hljs-comment">// modules/throttle.ts</span>

interface <span class="hljs-title class_">ThrottleBinding</span> {
  <span class="hljs-attr">value</span>: <span class="hljs-title class_">Function</span>;
  arg?: string | number; <span class="hljs-comment">// å»¶è¿Ÿæ—¶é—´å‚æ•°</span>
  modifiers?: {
    immediate?: boolean;
  };
}

<span class="hljs-comment">// èŠ‚æµå‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">throttleFn</span>(<span class="hljs-params">
  func: <span class="hljs-built_in">Function</span>,
  wait: number,
  immediate: boolean = <span class="hljs-literal">false</span>
</span>) {
  <span class="hljs-keyword">let</span> <span class="hljs-attr">timeout</span>: <span class="hljs-title class_">NodeJS</span>.<span class="hljs-property">Timeout</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">let</span> previous = <span class="hljs-number">0</span>;

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-variable language_">this</span>: any, ...args: any[]</span>) {
    <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">const</span> remaining = wait - (now - previous);

    <span class="hljs-keyword">if</span> (remaining &lt;= <span class="hljs-number">0</span> || remaining &gt; wait) {
      <span class="hljs-keyword">if</span> (timeout) {
        <span class="hljs-built_in">clearTimeout</span>(timeout);
        timeout = <span class="hljs-literal">null</span>;
      }
      previous = now;
      func.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!timeout &amp;&amp; !immediate) {
      timeout = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        previous = immediate ? <span class="hljs-number">0</span> : <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
        timeout = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">if</span> (!immediate) {
          func.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
        }
      }, remaining);
    }

    <span class="hljs-keyword">if</span> (immediate &amp;&amp; !timeout) {
      func.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
      previous = now;
    }
  };
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> throttle = {
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el: HTMLElement, binding: ThrottleBinding</span>) {
    <span class="hljs-keyword">const</span> delay = <span class="hljs-title class_">Number</span>(binding.<span class="hljs-property">arg</span>) || <span class="hljs-number">500</span>;
    <span class="hljs-keyword">const</span> immediate = binding.<span class="hljs-property">modifiers</span>?.<span class="hljs-property">immediate</span> || <span class="hljs-literal">false</span>;
    
    <span class="hljs-keyword">const</span> throttledFn = <span class="hljs-title function_">throttleFn</span>(binding.<span class="hljs-property">value</span>, delay, immediate);
    
    el.<span class="hljs-property">dataset</span>.<span class="hljs-property">throttleFn</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
      <span class="hljs-attr">original</span>: binding.<span class="hljs-property">value</span>.<span class="hljs-title function_">toString</span>(),
      <span class="hljs-attr">throttled</span>: throttledFn.<span class="hljs-title function_">toString</span>()
    });
    
    el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, throttledFn);
  },
  
  <span class="hljs-title function_">updated</span>(<span class="hljs-params">el: HTMLElement, binding: ThrottleBinding</span>) {
    <span class="hljs-keyword">const</span> delay = <span class="hljs-title class_">Number</span>(binding.<span class="hljs-property">arg</span>) || <span class="hljs-number">500</span>;
    <span class="hljs-keyword">const</span> immediate = binding.<span class="hljs-property">modifiers</span>?.<span class="hljs-property">immediate</span> || <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">const</span> throttledFn = <span class="hljs-title function_">throttleFn</span>(binding.<span class="hljs-property">value</span>, delay, immediate);
    
    <span class="hljs-keyword">const</span> oldFn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Function</span>(<span class="hljs-string">'return '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(el.<span class="hljs-property">dataset</span>.<span class="hljs-property">throttleFn</span> || <span class="hljs-string">'{}'</span>).<span class="hljs-property">throttled</span>)();
    el.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'click'</span>, oldFn);
    
    el.<span class="hljs-property">dataset</span>.<span class="hljs-property">throttleFn</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
      <span class="hljs-attr">original</span>: binding.<span class="hljs-property">value</span>.<span class="hljs-title function_">toString</span>(),
      <span class="hljs-attr">throttled</span>: throttledFn.<span class="hljs-title function_">toString</span>()
    });
    
    el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, throttledFn);
  },
  
  <span class="hljs-title function_">unmounted</span>(<span class="hljs-params">el: HTMLElement</span>) {
    <span class="hljs-keyword">const</span> fn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Function</span>(<span class="hljs-string">'return '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(el.<span class="hljs-property">dataset</span>.<span class="hljs-property">throttleFn</span> || <span class="hljs-string">'{}'</span>).<span class="hljs-property">throttled</span>)();
    el.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'click'</span>, fn);
    <span class="hljs-keyword">delete</span> el.<span class="hljs-property">dataset</span>.<span class="hljs-property">throttleFn</span>;
  }
};

<span class="hljs-keyword">export</span> { throttleFn };

</code></pre>
<h5 data-id="heading-21">æŒ‡ä»¤ä½¿ç”¨</h5>
<pre><code class="hljs language-javascript" lang="javascript">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"flex flex-wrap gap-4 p-6"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- åŸºç¡€èŠ‚æµæŒ‰é’® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
      <span class="hljs-attr">v-throttle</span>=<span class="hljs-string">"handleClick"</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"px-6 py-2.5 bg-blue-600 text-white font-medium text-sm leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out"</span>
    &gt;</span>
      èŠ‚æµæŒ‰é’®
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- 500msèŠ‚æµæŒ‰é’® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
      <span class="hljs-attr">v-throttle:500</span>=<span class="hljs-string">"handleClick"</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"px-6 py-2.5 bg-green-600 text-white font-medium text-sm leading-tight uppercase rounded shadow-md hover:bg-green-700 hover:shadow-lg focus:bg-green-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-green-800 active:shadow-lg transition duration-150 ease-in-out"</span>
    &gt;</span>
      500msèŠ‚æµæŒ‰é’®
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- ç«‹å³æ‰§è¡ŒèŠ‚æµæŒ‰é’® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
      <span class="hljs-attr">v-throttle.immediate</span>=<span class="hljs-string">"handleClick"</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"px-6 py-2.5 bg-purple-600 text-white font-medium text-sm leading-tight uppercase rounded shadow-md hover:bg-purple-700 hover:shadow-lg focus:bg-purple-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-purple-800 active:shadow-lg transition duration-150 ease-in-out"</span>
    &gt;</span>
      ç«‹å³æ‰§è¡ŒèŠ‚æµæŒ‰é’®
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æŒ‰é’®è¢«ç‚¹å‡»'</span>);
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-22">é•¿æŒ‰æŒ‡ä»¤</h4>
<h5 data-id="heading-23">æŒ‡ä»¤ç¼–å†™</h5>
<pre><code class="hljs language-javascript" lang="javascript">src\utils\directive\modules\longPress.<span class="hljs-property">ts</span>
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// modules/longPress.ts</span>

interface <span class="hljs-title class_">LongPressBinding</span> {
  <span class="hljs-attr">value</span>: <span class="hljs-title class_">Function</span>;
  arg?: number; <span class="hljs-comment">// é•¿æŒ‰æ—¶é—´ï¼Œå•ä½æ¯«ç§’ï¼Œé»˜è®¤500ms</span>
  modifiers?: {
    stop?: boolean; <span class="hljs-comment">// æ˜¯å¦é˜»æ­¢äº‹ä»¶å†’æ³¡</span>
    prevent?: boolean; <span class="hljs-comment">// æ˜¯å¦é˜»æ­¢é»˜è®¤äº‹ä»¶</span>
  };
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> longPress = {
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el: HTMLElement, binding: LongPressBinding</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> binding.<span class="hljs-property">value</span> !== <span class="hljs-string">'function'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'v-longPress æŒ‡ä»¤éœ€è¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå€¼'</span>);
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">let</span> <span class="hljs-attr">pressTimer</span>: <span class="hljs-title class_">NodeJS</span>.<span class="hljs-property">Timeout</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-attr">startTime</span>: number = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> duration = <span class="hljs-title class_">Number</span>(binding.<span class="hljs-property">arg</span>) || <span class="hljs-number">500</span>;
    <span class="hljs-keyword">const</span> isStop = binding.<span class="hljs-property">modifiers</span>?.<span class="hljs-property">stop</span> || <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">const</span> isPrevent = binding.<span class="hljs-property">modifiers</span>?.<span class="hljs-property">prevent</span> || <span class="hljs-literal">false</span>;

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">start</span> = (<span class="hljs-params">e: MouseEvent | TouchEvent</span>) =&gt; {
      <span class="hljs-keyword">if</span> (isPrevent) {
        e.<span class="hljs-title function_">preventDefault</span>();
      }
      <span class="hljs-keyword">if</span> (isStop) {
        e.<span class="hljs-title function_">stopPropagation</span>();
      }

      startTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
      
      pressTimer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        binding.<span class="hljs-title function_">value</span>(e);
      }, duration);
    };

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">cancel</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">if</span> (pressTimer) {
        <span class="hljs-built_in">clearTimeout</span>(pressTimer);
        pressTimer = <span class="hljs-literal">null</span>;
      }
    };

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">end</span> = (<span class="hljs-params">e: MouseEvent | TouchEvent</span>) =&gt; {
      <span class="hljs-keyword">const</span> endTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
      <span class="hljs-keyword">const</span> timeDiff = endTime - startTime;
      
      <span class="hljs-comment">// å¦‚æœæŒ‰ä½æ—¶é—´å°äºè®¾å®šæ—¶é—´ï¼Œåˆ™è§†ä¸ºæ™®é€šç‚¹å‡»</span>
      <span class="hljs-keyword">if</span> (timeDiff &lt; duration &amp;&amp; pressTimer) {
        <span class="hljs-title function_">cancel</span>();
        <span class="hljs-keyword">return</span>;
      }
      
      <span class="hljs-title function_">cancel</span>();
    };

    <span class="hljs-comment">// æ·»åŠ äº‹ä»¶ç›‘å¬å™¨</span>
    el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousedown'</span>, start);
    el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'touchstart'</span>, start);
    el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mouseup'</span>, end);
    el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'touchend'</span>, end);
    el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mouseleave'</span>, cancel);
    el.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'touchcancel'</span>, cancel);

    <span class="hljs-comment">// ä¿å­˜æ¸…ç†å‡½æ•°åˆ°å…ƒç´ ä¸Š</span>
    (el <span class="hljs-keyword">as</span> any).<span class="hljs-property">_longPressCleanup</span> = <span class="hljs-function">() =&gt;</span> {
      el.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mousedown'</span>, start);
      el.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'touchstart'</span>, start);
      el.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mouseup'</span>, end);
      el.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'touchend'</span>, end);
      el.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mouseleave'</span>, cancel);
      el.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'touchcancel'</span>, cancel);
      <span class="hljs-title function_">cancel</span>();
    };
  },

  <span class="hljs-title function_">unmounted</span>(<span class="hljs-params">el: HTMLElement</span>) {
    <span class="hljs-comment">// æ¸…ç†äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-keyword">if</span> ((el <span class="hljs-keyword">as</span> any).<span class="hljs-property">_longPressCleanup</span>) {
      (el <span class="hljs-keyword">as</span> any).<span class="hljs-title function_">_longPressCleanup</span>();
    }
  }
};

</code></pre>
<h5 data-id="heading-24">æŒ‡ä»¤ä½¿ç”¨</h5>
<p>æµ‹è¯•ä¸€ä¸‹æˆ‘ä»¬çš„æŒ‰é’®æŒ‡ä»¤ï¼Œæ•ˆæœok</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"p-6 space-y-4"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- åŸºç¡€ç”¨æ³•ï¼Œé»˜è®¤500ms --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
      <span class="hljs-attr">v-longPress</span>=<span class="hljs-string">"handleLongPress"</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"</span>
    &gt;</span>
      é•¿æŒ‰æŒ‰é’®
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- è‡ªå®šä¹‰é•¿æŒ‰æ—¶é—´ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
      <span class="hljs-attr">v-longPress:1000</span>=<span class="hljs-string">"handleLongPress"</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600"</span>
    &gt;</span>
      1ç§’é•¿æŒ‰æŒ‰é’®
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- é˜»æ­¢äº‹ä»¶å†’æ³¡ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
      <span class="hljs-attr">v-longPress.stop</span>=<span class="hljs-string">"handleLongPress"</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600"</span>
    &gt;</span>
      é˜»æ­¢å†’æ³¡é•¿æŒ‰æŒ‰é’®
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- é˜»æ­¢é»˜è®¤äº‹ä»¶ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
      <span class="hljs-attr">v-longPress.prevent</span>=<span class="hljs-string">"handleLongPress"</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600"</span>
    &gt;</span>
      é˜»æ­¢é»˜è®¤äº‹ä»¶é•¿æŒ‰æŒ‰é’®
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleLongPress</span> = (<span class="hljs-params">event: MouseEvent | TouchEvent</span>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é•¿æŒ‰è§¦å‘'</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>());
  <span class="hljs-comment">// è¿™é‡Œå¯ä»¥æ·»åŠ ä½ çš„é•¿æŒ‰å¤„ç†é€»è¾‘</span>
  <span class="hljs-keyword">if</span> (event <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">MouseEvent</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é¼ æ ‡äº‹ä»¶'</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è§¦æ‘¸äº‹ä»¶'</span>);
  }
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»äººåŠ›æ¨è½¦åˆ°æ™ºèƒ½å¼•æ“ï¼šQA æ™ºç»˜é¡¹ç›®çš„æµ‹è¯•ç”¨ä¾‹è‡ªåŠ¨ç”Ÿæˆæœ¯]]></title>    <link>https://juejin.cn/post/7587335187073024026</link>    <guid>https://juejin.cn/post/7587335187073024026</guid>    <pubDate>2025-12-25T02:54:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587335187073024026" data-draft-id="7587336857538002953" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»äººåŠ›æ¨è½¦åˆ°æ™ºèƒ½å¼•æ“ï¼šQA æ™ºç»˜é¡¹ç›®çš„æµ‹è¯•ç”¨ä¾‹è‡ªåŠ¨ç”Ÿæˆæœ¯"/> <meta itemprop="keywords" content="æµ‹è¯•,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-25T02:54:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›ªçƒå·¥ç¨‹å¸ˆå›¢é˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2664871914644525"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»äººåŠ›æ¨è½¦åˆ°æ™ºèƒ½å¼•æ“ï¼šQA æ™ºç»˜é¡¹ç›®çš„æµ‹è¯•ç”¨ä¾‹è‡ªåŠ¨ç”Ÿæˆæœ¯
            <!----> <!----></h1> <div class="container team-follow" data-v-d326b38e="" data-v-61fb5e44=""><div class="left" data-v-d326b38e=""><a href="/team/6942370795716870178/posts" data-v-d326b38e=""><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/962ff7fb0a7e485e8a67c02675746756~tplv-k3u1fbpfcp-watermark.image" class="icon" data-v-d326b38e=""/></a> <div class="content" data-v-d326b38e=""><div style="display: flex" data-v-d326b38e=""><a href="/team/6942370795716870178/posts" data-v-d326b38e=""><p class="title-line" data-v-d326b38e=""><span title="é›ªçƒå·¥ç¨‹å¸ˆå›¢é˜Ÿ" class="title" data-v-d326b38e="">é›ªçƒå·¥ç¨‹å¸ˆå›¢é˜Ÿ</span> <img src="//lf-web-assets.juejin.cn/obj/juejin-web/xitu_juejin_web/255e400027b783cbad76dc41527e7695.svg" alt="team icon" class="team-icon" data-v-d326b38e=""/></p></a></div> <div class="meta-box team" data-v-d326b38e="" data-v-61fb5e44=""><time datetime="2025-12-25T02:54:44.000Z" title="Thu Dec 25 2025 02:54:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-d326b38e="" data-v-61fb5e44="">
                2025-12-25
              </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-d326b38e="" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-d326b38e="" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-d326b38e="" data-v-61fb5e44=""/></svg> <span class="views-count" style="display:none;" data-v-d326b38e="" data-v-61fb5e44="">
                0
              </span> <span class="read-time" data-v-d326b38e="" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d326b38e="" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-d326b38e="" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-d326b38e="" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-d326b38e="" data-v-61fb5e44=""/></svg>
                é˜…è¯»14åˆ†é’Ÿ
              </span> <!----> <!----></div></div></div> <button class="jj-follow-button follow-btn" style="display:none;" data-v-b60b2868="" data-v-d326b38e=""><span data-v-b60b2868="" data-v-d326b38e=""><i class="byte-icon byte-icon--plus" data-v-d326b38e=""><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 48 48"><path fill="none" d="M0 0h48v48H0z"/><path d="M24.7 4c.4 0 .6 0 .8.1.2.1.3.2.4.4.1.2.1.3.1.8V22h16.7c.4 0 .6 0 .8.1.2.1.3.2.4.4.1.2.1.3.1.8v1.4c0 .4 0 .6-.1.8-.1.2-.2.3-.4.4-.2.1-.3.1-.8.1H26v16.7c0 .4 0 .6-.1.8-.1.2-.2.3-.4.4-.2.1-.3.1-.8.1h-1.4c-.4 0-.6 0-.8-.1-.2-.1-.3-.2-.4-.4-.1-.2-.1-.3-.1-.8V26H5.3c-.4 0-.6 0-.8-.1-.2-.1-.3-.2-.4-.4-.1-.2-.1-.3-.1-.8v-1.4c0-.4 0-.6.1-.8.1-.2.2-.3.4-.4.2-.1.3-.1.8-.1H22V5.3c0-.4 0-.6.1-.8.1-.2.2-.3.4-.4.2-.1.3-.1.8-.1h1.4z"/></svg></i>
        å…³æ³¨
      </span></button></div> <div class="team-user block-hidden" data-v-61fb5e44=""><div class="avatar jj-avatar avatar" data-v-03256cc6="" data-v-61fb5e44=""><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="avatar" class="lazy avatar-img" data-v-5244ef91="" data-v-03256cc6=""/> </div> <!----> <span class="position ellipsis" data-v-61fb5e44="">
              @é›ªçƒè´¢ç»
            </span></div> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ed90e7850674bf1aa57b637b17c36e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuq55CD5bel56iL5biI5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767236084&amp;x-signature=Qbc%2B8feZFyze7wXII84hlJ%2BSHq8%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>å¯¼è¯»ï¼š</p>
<h4 data-id="heading-0">æ„å»ºä¸€å°â€œæµ‹è¯•ç”¨ä¾‹ç”Ÿæˆå¼•æ“â€â€”â€”é©±åŠ¨è´¨é‡å·¦ç§»çš„æ™ºèƒ½é£è½®</h4>
<p>è½¯ä»¶è´¨é‡ä¸æ˜¯ç»ˆç‚¹ï¼Œè€Œæ˜¯ä¸€ä¸ªæŒç»­åŠ é€Ÿçš„é£è½®ã€‚</p>
<p>ä¼ ç»Ÿæµ‹è¯•åƒé äººåŠ›æ¨è½¦ï¼Œç¼“æ…¢ä¸”è¿Ÿæ»ï¼›è€Œ AI è¾…åŠ©çš„ç”¨ä¾‹å¼€å‘ï¼Œåˆ™æ˜¯ä¸ºè¿™ä¸ªé£è½®è£…ä¸Šä¸€å°æ™ºèƒ½å¼•æ“ã€‚</p>
<p>è¿™å°å¼•æ“ç”±ä¸ƒå¤§æ ¸å¿ƒç»„ä»¶é©±åŠ¨ï¼šä¸“å±æ•°æ®è¾“å…¥ã€æ™ºèƒ½éœ€æ±‚è§£æã€æµ‹è¯•åœºæ™¯å»ºæ¨¡ã€ç”¨ä¾‹è¿­ä»£ç”Ÿæˆã€å˜æ›´åŠ¨æ€æ„ŸçŸ¥ã€æ ‡å‡†åŒ–è¾“å‡ºé€‚é…ã€è‡ªåŠ¨åŒ–æ‰§è¡Œé›†æˆã€‚</p>
<p>å½“ä¸ƒè€…ååŒè¿è½¬ï¼Œå¼•æ“è½°é¸£å¯åŠ¨â€”â€”ç”¨ä¾‹è‡ªåŠ¨ç”Ÿæˆã€é£é™©æå‰æš´éœ²ã€åé¦ˆé—­ç¯åŠ é€Ÿï¼ŒçœŸæ­£å®ç°â€œè´¨é‡å†…å»ºï¼Œå·¦ç§»è½åœ°â€ã€‚</p>
</blockquote>
<h2 data-id="heading-1">ä¸€ã€èƒŒæ™¯</h2>
<p>QAåŒå­¦ä¸€å®šæ‡‚è¿™ä¸ªç—›ç‚¹ï¼šé•¿æœŸä½¿ç”¨å›ºå®šæµ‹è¯•ç”¨ä¾‹é›†æˆ–åŒä¸€æµ‹è¯•æ–¹æ³•ï¼Œè½¯ä»¶ä¼šåƒç”Ÿç‰©æŠ—è¯æ€§ä¸€æ ·äº§ç”Ÿâ€œæµ‹è¯•å…ç–«åŠ›â€ï¼Œç¼ºé™·å‘ç°æ•ˆç‡è¶Šæ¥è¶Šä½â€”â€”è¿™å°±æ˜¯æµ‹è¯•é¢†åŸŸçš„â€œæ€è™«å‰‚æ‚–è®ºâ€ã€‚</p>
<p>ä¸ºäº†åº”å¯¹è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä¸€ç›´é æŒç»­è¿­ä»£ç”¨ä¾‹ã€åŠ¨æ€æ‰©å……æ•°æ®ã€ç»„åˆäº¤å‰æµ‹è¯•ç­‰æ–¹æ³•ç»´æŒæœ‰æ•ˆæ€§ã€‚ä½†éšç€é¡¹ç›®å¿«é€Ÿè¿­ä»£ï¼Œä¸šåŠ¡åœºæ™¯å’ŒåŠŸèƒ½æ¨¡å—è¶Šæ¥è¶Šå¤šï¼Œæ–°çš„éš¾é¢˜åˆå†’äº†å‡ºæ¥ï¼š</p>
<ul>
<li>
<p>éœ€æ±‚åˆ†æã€ç”¨ä¾‹å¼€å‘ç»´æŠ¤å¤æ‚åº¦é£™å‡ï¼šæ—¢è¦ç²¾å‡†å¯¹é½æ–°å¢åŠŸèƒ½ç»†èŠ‚ï¼Œåˆè¦å…¼é¡¾å›å½’ç”¨ä¾‹å…¼å®¹æ€§ï¼Œæœ‰é™æ—¶é—´é‡Œå¾—åå¤æ¢³ç†æ–°æ—§åœºæ™¯å…³è”ï¼›</p>
</li>
<li>
<p>ç”¨ä¾‹åº“ç´¯ç§¯æˆè´Ÿæ‹…ï¼šæ—¥å¸¸ç»´æŠ¤è¦è€—è´¹å¤§é‡ç²¾åŠ›æ›´æ–°é€‚é…ï¼Œéœ€æ±‚ç´§æ€¥æ—¶è¿˜å®¹æ˜“é™·å…¥â€œæ—§ç”¨ä¾‹è¦†ç›–ä¸åˆ°æ–°åœºæ™¯ã€æ–°ç”¨ä¾‹å…¼é¡¾ä¸åˆ°è€é€»è¾‘â€çš„è¢«åŠ¨ï¼›</p>
</li>
<li>
<p>â€œæµ‹è¯•å…ç–«åŠ›â€é—®é¢˜æ”¾å¤§ï¼šé«˜é¢‘è¿­ä»£ä¸‹ï¼Œä¼ ç»Ÿæ–¹æ³•çš„å±€é™æ€§è¶Šæ¥è¶Šæ˜æ˜¾ï¼Œæ‹–æ…¢æµ‹è¯•èŠ‚å¥çš„åŒæ—¶ï¼Œç¼ºé™·æ¼æµ‹é£é™©ä¹Ÿåœ¨å¢åŠ ã€‚</p>
</li>
</ul>
<p>åœ¨AIæŠ€æœ¯çˆ†å‘çš„å½“ä¸‹ï¼Œæˆ‘ä»¬å†³å®šè·³å‡ºä¼ ç»Ÿæ¡†æ¶ï¼Œæ‰“é€ **ã€ŒQAæ™ºç»˜ã€**é¡¹ç›®ï¼Œç”¨æ™ºèƒ½ç ´è§£â€œæŠ—è¯æ€§â€ï¼Œä»æ ¹æœ¬ä¸Šæœç»â€œé›ªçƒæµ‹è¯•â€ä¸­çš„æ€è™«å‰‚æ•ˆåº”ã€‚</p>
<h2 data-id="heading-2">äºŒã€ã€ŒQAæ™ºç»˜ã€ä¹‹Featureæµ‹è¯•ç”¨ä¾‹ç”Ÿæˆï¼šä¸‰å±‚æ¶æ„æå®šè‡ªåŠ¨åŒ–</h2>
<p>ä¼ ç»Ÿæµ‹è¯•ç”¨ä¾‹å¼€å‘ï¼ŒQAè¦èµ°å®Œâ€œéœ€æ±‚åˆ†æâ†’ç”¨ä¾‹è®¾è®¡â†’è¯„å®¡ä¼˜åŒ–â†’ç®¡ç†ç»´æŠ¤â€å…¨æµç¨‹ã€‚è€ƒè™‘åˆ°ç”¨ä¾‹è¯„å®¡æ˜¯äº§ç ”æµ‹ä¸‰æ–¹å¯¹é½é€»è¾‘çš„å…³é”®èŠ‚ç‚¹ï¼Œå› æ­¤æˆ‘ä»¬ä¼˜å…ˆèšç„¦å¦å¤–ä¸‰ä¸ªç¯èŠ‚ï¼Œç»“åˆå¤§æ¨¡å‹èƒ½åŠ›æ­å»ºäº†â€œè¾“å…¥-ç”Ÿæˆ-è¾“å‡ºâ€ä¸‰å±‚AIè‡ªåŠ¨ç”Ÿæˆæ¶æ„ï¼Œå†ä¾æ‰˜DifyåŸºå»ºèƒ½åŠ›åšå…¨é“¾è·¯æ”¯æ’‘ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/39a5676132024be7bfaedd1e790b5004~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuq55CD5bel56iL5biI5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767236084&amp;x-signature=y7oy%2Bf2KW%2Fj7b9VzwJDfmRn8B9U%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p><strong>è¾“å…¥å±‚</strong>å®Œæˆå¯¹æ•°æ®æºçš„è‡ªåŠ¨é›†æˆä¸æ™ºèƒ½å…³è”ï¼Œä»æ ¹æºæ¶ˆå¼­éœ€æ±‚ä¼ é€’ä¸­çš„æ­§ä¹‰ï¼›</p>
</li>
<li>
<p><strong>ç”Ÿæˆå±‚</strong>ä»¥ Dify æä¾›çš„å·¥ä½œæµå¼•æ“ã€å¤šæ¨¡å‹è°ƒåº¦ã€Prompt+æ€ç»´é“¾æ¶æ„ä¸ºåº•åº§ï¼Œæ­é…æ¥å…¥çš„å·¥å…·é€‚é…èƒ½åŠ›ï¼Œé©±åŠ¨æ ¸å¿ƒæ¨¡å—å®Œæˆä»éœ€æ±‚åˆ†æã€éœ€æ±‚ç‚¹åˆ†è§£åˆ°ç”¨ä¾‹ç”Ÿæˆä¸ä¼˜åŒ–çš„å…¨æµç¨‹è‡ªåŠ¨åŒ–ï¼›</p>
</li>
<li>
<p><strong>è¾“å‡ºå±‚</strong>é€šè¿‡äººæœºååŒæœºåˆ¶ï¼Œå®ç°æµ‹è¯•ç”¨ä¾‹çš„æŒç»­è¿­ä»£ä¸æ ‡å‡†åŒ–é—­ç¯äº¤ä»˜ã€‚</p>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/711e04cb11124b2a811a710d1566a2fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuq55CD5bel56iL5biI5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767236084&amp;x-signature=U%2FFR%2FwXoJHqU9sGJZ4DfwSti5Es%3D" alt="" loading="lazy"/></p>
<div align="center">Featureç”¨ä¾‹ç”Ÿæˆçš„ä¸‰å±‚æ¶æ„</div>
<p>ç®€å•è¯´ï¼Œè¿™ä¸ªä½“ç³»çš„æ ¸å¿ƒå°±æ˜¯ä¸€å¥—æ™ºèƒ½å¢å¼ºå†³ç­–ç³»ç»Ÿï¼šæ¥æ”¶éœ€æ±‚åï¼Œä¼šæŒ‰ä¸¥å¯†çš„â€œæ€è€ƒé“¾â€åšä»»åŠ¡åˆ†è§£ã€é€»è¾‘æ¨ç†å’Œç»“æœéªŒè¯ï¼Œæœ€ç»ˆå®ç°ç”¨ä¾‹çš„è‡ªåŠ¨åŒ–ç”Ÿæˆä¸æ ‡å‡†åŒ–äº¤ä»˜ã€‚ä¸‹é¢æˆ‘ä»¬é€å±‚æ‹†è§£æ ¸å¿ƒé€»è¾‘ï¼š</p>
<h4 data-id="heading-3">1. è¾“å…¥å±‚ï¼šæ™ºèƒ½åŒ–çš„æ•°æ®æ•´åˆåˆ†æ</h4>
<p>é«˜è´¨é‡ç”¨ä¾‹çš„å‰ææ˜¯å®Œæ•´çš„éœ€æ±‚åˆ†æï¼Œä½†äººå·¥åˆ†æå¾ˆå®¹æ˜“å‡ºé—®é¢˜ï¼šå¯¹ä¸šåŠ¡é€»è¾‘ç†è§£ä¸åˆ°ä½ã€éœ€æ±‚å˜æ›´è·Ÿè¿›æ»åã€ä¸ªäººç»éªŒå±€é™å¯¼è‡´é£é™©åˆ¤æ–­ä¸è¶³â€¦â€¦ä¸ºäº†è§£å†³è¿™äº›ç—›ç‚¹ï¼Œæˆ‘ä»¬æ•´åˆäº†å››å¤§æ•°æ®æºï¼Œæ­é…Promptå·¥ç¨‹+æ€ç»´é“¾ï¼Œæ‰“é€ äº†ä¸€ä¸ªâ€œä¼šæ€è€ƒâ€çš„æµ‹è¯•æ•°æ®ä¸­æ¢ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/745e69d1a74f454ba609eff1fce2e378~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuq55CD5bel56iL5biI5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767236084&amp;x-signature=f665%2BJWc3NEoV4V1%2FC%2BbYBJD6Jw%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸ªä¸­æ¢çš„æ ¸å¿ƒèƒ½åŠ›æœ‰4ä¸ªï¼š</p>
<ul>
<li>
<p><strong>è¯­ä¹‰æ·±åº¦æ¨ç†ä¸é£é™©é¢„åˆ¤</strong>ï¼šåˆ©ç”¨LLMï¼ˆå¤§è¯­è¨€æ¨¡å‹ï¼‰æ·±åº¦è§£æä¸šåŠ¡é€»è¾‘ã€ç”¨æˆ·æ—…ç¨‹ä¸å¤æ‚è§„åˆ™ï¼ˆå¦‚â€œæ”¯ä»˜æµç¨‹ä¸­æ‰‹ç»­è´¹è®¡ç®—è§„åˆ™â€ï¼‰ï¼›è‡ªåŠ¨æ ‡è¯†<strong>é«˜é£é™©åŠŸèƒ½ç‚¹</strong>ï¼ˆå¦‚èµ„æŸç›¸å…³æ“ä½œï¼‰ï¼›</p>
</li>
<li>
<p><strong>è§†è§‰åŒ–ä¸Šä¸‹æ–‡ç†è§£</strong>ï¼šé›†æˆ<strong>VLMï¼ˆè§†è§‰å¤§æ¨¡å‹ï¼‰ä¸OCRæŠ€æœ¯</strong>ï¼Œè®©AIâ€œçœ‹æ‡‚â€UIç•Œé¢ï¼Œè¯†åˆ«å…ƒç´ çŠ¶æ€ä¸è®¾è®¡å†²çªï¼Œä¸ºäº¤äº’æµ‹è¯•ä¸è§†è§‰å…¼å®¹æ€§æµ‹è¯•æ„å»ºåƒç´ çº§åˆ¤å®šåŸºçº¿ï¼›</p>
</li>
<li>
<p><strong>å†å²ç»éªŒçš„çŸ¥è¯†åŒ–å¤ç”¨</strong>ï¼šé€šè¿‡ç”¨<strong>RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æŠ€æœ¯</strong>æ£€ç´¢é›ªçƒçŸ¥è¯†åº“ä¸å†å²ç”¨ä¾‹ï¼Œè¡¥å…¨ä¸šåŠ¡èƒŒæ™¯ã€æ˜ å°„åŠŸèƒ½æ¨¡å—å…³è”ï¼Œä¸ºAIè£…é…ä¸Šâ€œèµ„æ·±æµ‹è¯•ä¸“å®¶çš„è®°å¿†åº“â€ï¼›</p>
</li>
<li>
<p>**Prompt +æ€ç»´é“¾ï¼š**ä»¥ â€œéœ€æ±‚åˆ†æâ†’ä¸šåŠ¡æ‹†è§£â†’ç”¨ä¾‹ç”Ÿæˆâ€ ä¸ºæ ¸å¿ƒæ¡†æ¶ï¼ŒæŒ‰ä¸šåŠ¡ç‰¹å¾å·®å¼‚åŒ–å®šåˆ¶å„æ¨¡å—çš„æ ¸å¿ƒä¾§é‡ç‚¹ã€è¾“å…¥è¾“å‡ºè§„èŒƒåŠ Prompt é€»è¾‘ã€‚é€šè¿‡æ¨¡å—åŒ–é™ä½æ¨¡å‹è®¤çŸ¥è´Ÿæ‹…ï¼Œç²¾å‡†é€‚é…ä¸šåŠ¡é£é™©ï¼Œé¿å…ç”¨ä¾‹è¦†ç›–ä¸å…¨æˆ–å†—ä½™ã€‚</p>
</li>
</ul>
<p>è¾“å…¥å±‚ä½œä¸ºä¸€ä¸ªæ™ºèƒ½åŒ–çš„**æ•°æ®æ•´åˆåˆ†æä¸­å¿ƒï¼Œ**å°†åŸæœ¬å­¤ç«‹ã€é™æ€çš„æ•°æ®èµ„äº§ï¼Œè½¬åŒ–ä¸ºåŠ¨æ€å¯æ¨ç†çš„â€œæ´»åŒ–çŸ¥è¯†å›¾è°±â€ï¼Œä½¿æµ‹è¯•è®¾è®¡ä»æºå¤´å°±ç«‹è¶³äºå…¨é¢ç²¾å‡†çš„æ•°æ®æ”¯æ’‘ï¼›å¹¶å°†åˆ†æ•£çš„éœ€æ±‚ä¿¡æ¯ã€æŠ€æœ¯èƒŒæ™¯ä¸å†å²ç»éªŒï¼Œè½¬åŒ–ä¸ºå¯è½åœ°ã€å¯é‡åŒ–çš„æµ‹è¯•ç­–ç•¥ï¼Œä»æ ¹æºä¸ŠåŒ–è§£éœ€æ±‚æ­§ä¹‰ã€æ‰“ç ´æ•°æ®å­¤å²›ã€å¡«è¡¥è¦†ç›–ç›²åŒºï¼Œä¸ºåç»­ç”¨ä¾‹ç”Ÿæˆç­‘ç‰¢åŸºç¡€ã€‚</p>
<h4 data-id="heading-4">2. ç”Ÿæˆå±‚ï¼šAIé©±åŠ¨çš„ç”¨ä¾‹æ™ºèƒ½ç”Ÿäº§é“¾</h4>
<p>å®Œæˆä¸Šæ¸¸å¤šæºä¿¡æ¯çš„æ™ºèƒ½èåˆåï¼Œæµç¨‹å³è¿›å…¥æ ¸å¿ƒçš„æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆé˜¶æ®µã€‚è¯¥é˜¶æ®µå°†ç³»ç»Ÿæ€§è½åœ° â€œéœ€æ±‚åˆ†æâ†’éœ€æ±‚ç‚¹åˆ†æä¸åˆ†ç»„â†’ç”¨ä¾‹åˆæ­¥ç”Ÿæˆâ†’ç”¨ä¾‹è¯„åˆ†â†’ç”¨ä¾‹ä¼˜åŒ–â€ å…¨æµç¨‹ï¼Œç¡®ä¿æ¯ä¸€æ­¥è¡”æ¥æœ‰åºã€é—­ç¯å¯æ§ã€‚</p>
<p>ä»¥å…¶ä¸­çš„ç”¨ä¾‹ç”Ÿæˆç¯èŠ‚ä¸ºä¾‹ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18c0c70d26c14362ad43ab1ad6792a63~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuq55CD5bel56iL5biI5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767236084&amp;x-signature=4pnHPlJ8NrUZiFOIA3kLeqXnZww%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p><strong>éœ€æ±‚ç‚¹é¢„åˆ†ç»„ï¼Œè§„é¿è¾“å…¥è¿‡è½½ä¸è¾“å‡ºæˆªæ–­</strong>ï¼šç”¨DAGåˆ†ææŠŠå¤æ‚éœ€æ±‚æ‹†åˆ†æˆå¤šä¸ªé«˜å†…èšçš„â€œéœ€æ±‚ç‚¹åŒ…â€ï¼Œå†åºåˆ—åŒ–è¾“å…¥ï¼Œè§£å†³å¤§æ¨¡å‹ä¸Šä¸‹æ–‡è¿‡è½½é—®é¢˜ï¼Œé¿å…é€»è¾‘é—æ¼ä¸è¾“å‡ºæˆªæ–­ï¼›</p>
</li>
<li>
<p>**å¤šæ¨¡å‹ååŒï¼Œæå‡ç”¨ä¾‹æ€ç»´çš„æ·±åº¦ä¸å¹¿åº¦ï¼š**ç»“åˆä¸åŒæ¨¡å‹ä¼˜åŠ¿ï¼Œç”Ÿæˆè¦†ç›–æ­£å¸¸ã€å¼‚å¸¸ã€æ¢ç´¢æ€§åœºæ™¯çš„å¤šæ ·åŒ–ç”¨ä¾‹ï¼Œé¿å…å•ä¸€æ¨¡å‹é—æ¼æ·±å±‚éšåŒ¿çš„ç¼ºé™·ï¼›</p>
</li>
<li>
<p>**æ ‡æ³¨æ¨¡æ¿çº¦æŸï¼Œç¡®ä¿ç”¨ä¾‹äº§å‡ºçš„æ ‡å‡†åŒ–ï¼š**ä»¥JSON Schemaå®šä¹‰æ•°æ®æ¨¡å‹ï¼Œç¡®ä¿ç”¨ä¾‹åŒ…å«â€œå‰ç½®æ¡ä»¶â†’æ“ä½œæ­¥éª¤â†’é¢„æœŸç»“æœâ€ç­‰è¦ç´ ï¼Œå†å€ŸåŠ© Jinja æ¨¡æ¿è½¬æ¢ä¸ºæ ‡å‡†æ ¼å¼ï¼Œæå‡åç»­è¯„å®¡ã€æ‰§è¡Œã€ç»´æŠ¤æ•ˆç‡ï¼›</p>
</li>
<li>
<p>**åæ€(Reflection)æ¨¡å¼ï¼Œé©±åŠ¨ç”¨ä¾‹å¾ªç¯å¼ºåŒ–ï¼š**å†…ç½®å¤šç»´åº¦è´¨é‡é‡åŒ–è¯„åˆ†ç®—æ³•ï¼Œä»å®Œæ•´æ€§ã€å‡†ç¡®æ€§ã€å¯æ‰§è¡Œæ€§ã€è¦†ç›–åº¦ç­‰ç»´åº¦æ‰“åˆ†ï¼Œä½äºé˜ˆå€¼è‡ªåŠ¨æ‰“å›é‡ç”Ÿæˆï¼Œå½¢æˆâ€œè¯„ä¼°-åé¦ˆ-ä¼˜åŒ–â€é—­ç¯ï¼Œä¿éšœç”¨ä¾‹è´¨é‡ã€‚</p>
</li>
</ul>
<h4 data-id="heading-5">3. è¾“å‡ºå±‚ï¼šæ ‡å‡†åŒ–é—­ç¯äº¤ä»˜</h4>
<p>ç»è¿‡ç”Ÿæˆå±‚çš„æ‹†è§£ã€è¯„ä¼°ã€ä¼˜åŒ–ï¼Œç”¨ä¾‹æœ€ç»ˆåœ¨è¾“å‡ºå±‚å®Œæˆäº¤ä»˜ã€‚è¾“å‡ºå±‚çš„æ ¸å¿ƒç›®æ ‡æ˜¯ç¡®ä¿AIç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹èƒ½å¤Ÿ<strong>å®‰å…¨ã€å¯é åœ°èå…¥ç°æœ‰å·¥å…·é“¾</strong>ï¼Œå®ç°ä»ç”Ÿæˆåˆ°å¯ç”¨çš„â€œæœ€åä¸€å…¬é‡Œâ€é—­ç¯ã€‚å…¶è¿ä½œä¾èµ–äºä¸¤å¤§å…³é”®æœºåˆ¶ï¼š</p>
<ul>
<li>
<p><strong>äººæœºååŒå®¡æ ¸</strong>ï¼šå»ºç«‹â€œAIåˆç­›-äººå·¥å¤æ ¸â€çš„åä½œæ¨¡å¼ã€‚äººå·¥é‡ç‚¹æ ¡éªŒä¸Šä¸‹æ–‡ä¸€è‡´æ€§ï¼ˆç¡®ä¿ç”¨ä¾‹å¯¹åº”éœ€æ±‚èŠ‚ç‚¹ï¼‰å’Œä¸šåŠ¡è§„åˆ™å‡†ç¡®æ€§ï¼Œè§„é¿AIâ€œå¹»è§‰â€é£é™©ï¼Œç»™ç”¨ä¾‹è´¨é‡å…œåº•ï¼›</p>
</li>
<li>
<p><strong>ç»“æ„åŒ–åˆ†å‘</strong>ï¼šå®¡æ ¸é€šè¿‡çš„ç”¨ä¾‹ä¼šè¢«è‡ªåŠ¨èµ‹äºˆä¸°å¯Œçš„<strong>ç»“æ„åŒ–æ ‡ç­¾</strong>ï¼ˆå¦‚å…³è”éœ€æ±‚IDã€æµ‹è¯•ç±»å‹ã€ä¼˜å…ˆçº§P0-P2ï¼‰ï¼Œå®Œæˆâ€œèµ„äº§åŒ–â€å°è£…ã€‚éšåï¼Œé€šè¿‡é¢„å®šä¹‰çš„APIæ¥å£ï¼Œå°†ç”¨ä¾‹åŒæ­¥åˆ°é£ä¹¦ã€MeterSphereã€é›ªå³°åå°ç­‰ç›®æ ‡å¹³å°ï¼Œå®ç°æµ‹è¯•èµ„äº§çš„<strong>æ— ç¼é›†æˆ</strong>ä¸<strong>ç«¯åˆ°ç«¯å¯è¿½æº¯ã€‚</strong></p>
</li>
</ul>
<p>è‡³æ­¤ï¼ŒFeatureæµ‹è¯•ç”¨ä¾‹è‡ªåŠ¨ç”Ÿæˆç³»ç»Ÿå·²æ­£å¼è½åœ°äº¤ä»˜ã€‚åœ¨ç¤¾åŒºå¹³å°ä¸šåŠ¡çš„å®é™…åº”ç”¨ä¸­ï¼Œè‡ªåŠ¨ç”Ÿæˆç”¨ä¾‹çš„æœ‰æ•ˆç‡è¾¾70%ä»¥ä¸Šï¼Œæ˜¾è‘—èŠ‚çœäº†äººå·¥æŠ•å…¥ã€æå‡äº†æµ‹è¯•æ•ˆç‡ã€‚åç»­æˆ‘ä»¬å°†æŒç»­ç²¾è¿›è¿™ä¸€èƒ½åŠ›ï¼Œå¹¶é€æ­¥æ‹“å±•è‡³æ›´å¤šä¸šåŠ¡åœºæ™¯ã€‚</p>
<blockquote>
<p>æå®šåŠŸèƒ½çº§ç”¨ä¾‹ç”Ÿæˆåï¼Œæˆ‘ä»¬æŠŠç›®å…‰æŠ•å‘äº†å‰åç«¯åä½œçš„æ ¸å¿ƒçº½å¸¦â€”â€”æ¥å£å±‚ã€‚æ¯•ç«Ÿæ¥å£çš„ç¨³å®šæ€§ç›´æ¥å…³ç³»ä¸šåŠ¡æµç¨‹å¯é æ€§ï¼Œã€ŒQAæ™ºç»˜ã€çš„æ™ºèƒ½ç”Ÿæˆèƒ½åŠ›ä¹Ÿéšä¹‹å»¶ä¼¸åˆ°äº†æ¥å£æµ‹è¯•é¢†åŸŸã€‚</p>
</blockquote>
<h2 data-id="heading-6">ä¸‰ã€ ã€ŒQAæ™ºç»˜ã€ä¹‹æ¥å£ç”¨ä¾‹è‡ªåŠ¨åŒ–ï¼šåŒæ ¸æ€è·¯ç ´è§£æµ‹è¯•ç—›ç‚¹</h2>
<p>åšæ¥å£æµ‹è¯•ï¼Œæœ€å¤´ç–¼çš„ä¸¤ä»¶äº‹ï¼šä¸€æ˜¯ç”¨ä¾‹å®¹æ˜“è¦†ç›–ä¸å…¨ã€åˆ†æ”¯æ¼æµ‹ï¼›äºŒæ˜¯ç”¨ä¾‹ç»´æŠ¤éš¾ï¼Œä»£ç è¿­ä»£ä¸€æ¬¡å°±è¦ç»´æŠ¤åŠå¤©ã€‚è¿™æ­£æ˜¯æˆ‘ä»¬è®¾è®¡ã€ŒQAæ™ºç»˜ã€ä¹‹æ¥å£ç”¨ä¾‹è‡ªåŠ¨åŒ–ç³»ç»Ÿçš„ç›´æ¥åŸå› ã€‚ä¸ºäº†å½»åº•è§£å†³è¿™äº›ç—›ç‚¹ï¼Œæˆ‘ä»¬å¸¦æ¥äº†ä¸€å¥—å¯è½åœ°çš„å®Œæ•´æ–¹æ¡ˆï¼šé€šè¿‡æ·±æŒ–è°ƒç”¨é“¾åƒé€æ¥å£ä»£ç ï¼Œå®ç°ç”¨ä¾‹çš„ä»£ç çº§å…¨è¦†ç›–ï¼›å†å€ŸåŠ©AIé—­ç¯è‡ªä¼˜åŒ–ï¼Œè®©ç”¨ä¾‹è¶Šç”¨è¶Šç²¾å‡†ï¼Œä»è€ŒçœŸæ­£æ‘†è„±é‡å¤ä½æ•ˆçš„æ‰‹åŠ¨æ“ä½œã€‚è¯¥è®¾è®¡å·²åœ¨ç³»ç»Ÿçš„å››å±‚æ¶æ„ä¸­å…¨é¢è½åœ°ï¼Œå½¢æˆä»é—®é¢˜è¯†åˆ«åˆ°è‡ªä¸»ä¼˜åŒ–çš„å®Œæ•´é—­ç¯ã€‚å¦‚å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/242ab04b30744577a0aa8947d8b64daf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuq55CD5bel56iL5biI5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767236084&amp;x-signature=ifl1fWbTSWdY1aZkThXdsbMkSlA%3D" alt="" loading="lazy"/></p>
<p>æ•´ä¸ªç³»ç»Ÿé‡‡ç”¨æ¸…æ™°çš„åˆ†å±‚è®¾è®¡ï¼Œå„å±‚å„å¸å…¶èŒåˆç´§å¯†ååŒï¼š</p>
<ul>
<li>
<p>**åŸºå»ºæ”¯æ’‘å±‚ï¼šæ‰“ä¸‹åšå®çš„â€œåœ°åŸºâ€ ï¼Œ**åŒ…å«è°ƒç”¨é“¾å·¥ç¨‹ã€AIæ¨¡å‹é…ç½®ä¸MCPæœåŠ¡ã€MySQLä¸ç³»ç»Ÿé…ç½®ï¼Œä¸ºä¸Šå±‚èƒ½åŠ›æä¾›æ ¸å¿ƒæ”¯æ’‘ï¼›</p>
</li>
<li>
<p>**æ ¸å¿ƒä¸šåŠ¡å±‚ï¼šæ‰¿è½½æ ¸å¿ƒè§£å†³æ–¹æ¡ˆï¼Œ**è¿™æ˜¯ç³»ç»Ÿçš„â€œå¤§è„‘â€å’Œâ€œä¸­æ¢â€ã€‚åŒ…å«AIç”¨ä¾‹ç”Ÿæˆæ¨¡å—ã€ç”¨ä¾‹æ‰§è¡Œæ¨¡å—ã€ç»“æœåˆ†ææ¨¡å—ã€ç”¨ä¾‹è´¨é‡è¯„ä¼°æ¨¡å—ï¼Œè®©ç”¨ä¾‹åº“â€œè¶Šç”¨è¶Šç²¾å‡†â€ï¼Œä»è€Œè§£å†³â€œç»´æŠ¤éš¾â€çš„æŒ‘æˆ˜ï¼›</p>
</li>
<li>
<p>**åº”ç”¨å±‚ï¼šç»Ÿä¸€æ²»ç†ä¸å¯è§†åŒ–å¹³å°ï¼Œ**é€šè¿‡é›ªå³°ç³»ç»Ÿï¼Œæˆ‘ä»¬å°†æ ¸å¿ƒèƒ½åŠ›è½¬åŒ–ä¸ºç”¨æˆ·å¯ä¾¿æ·æ“ä½œçš„äº§å“ç•Œé¢ï¼ŒåŒ…å«æ¥å£ç®¡ç†ã€ç”¨ä¾‹ç®¡ç†ã€ç»“æœå±•ç¤ºï¼Œè®©æŠ€æœ¯èƒ½åŠ›é€‚ç”¨æ‰€æœ‰QAå’Œç ”å‘åŒå­¦ï¼›</p>
</li>
<li>
<p>**æ¥å…¥å±‚ï¼šæ¥å…¥ç ”å‘ç”Ÿæ€ï¼Œ**é€šè¿‡å¯¹æ¥Gitã€YAPIã€é›ªå³°ç­‰ç°æœ‰ç ”å‘å·¥å…·é“¾ï¼Œç³»ç»Ÿèƒ½å¤Ÿè‡ªåŠ¨è·å–æ¥å£å®šä¹‰ã€ä»£ç å˜æ›´ç­‰å…³é”®ä¿¡æ¯ï¼Œå®ç°æµç¨‹çš„æ— ç¼é›†æˆï¼Œè®©æµ‹è¯•å·¦ç§»å’ŒæŒç»­æµ‹è¯•æˆä¸ºè‡ªç„¶æµç¨‹ã€‚</p>
</li>
</ul>
<p>åŸºäºä»¥ä¸Šå¯¹ç³»ç»Ÿæ¶æ„çš„åˆ†å±‚è§£æï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ•´ä¸ªç³»ç»Ÿå¹¶éç®€å•çš„åŠŸèƒ½å †ç Œï¼Œè€Œæ˜¯ä¸ºå½»åº•è§£å†³æ–‡ç« å¼€å¤´æå‡ºçš„ç—›ç‚¹ï¼Œæ‰€ç²¾å¿ƒæ„å»ºçš„ä¸€æ¡æŠ€æœ¯å®ç°è·¯å¾„ï¼Œè¿™æ¡è·¯å¾„åœ¨æ¶æ„ä¸­æ¸…æ™°å¯è§ï¼Œå¹¶æœ€ç»ˆå‡ç»“ä¸ºæ”¯æ’‘ã€ŒQAæ™ºç»˜ã€é«˜æ•ˆè¿è¡Œçš„ä¸‰ä¸ªæ ¸å¿ƒè®®é¢˜ã€‚</p>
<h4 data-id="heading-7">1. ç”¨ä¾‹å…¨è¦†ç›–ï¼šä»£ç +è°ƒç”¨é“¾åŒé©±åŠ¨</h4>
<p>å¾ˆå¤šæ—¶å€™éœ€æ±‚æ–‡æ¡£é‡Œåªæœ‰æ¥å£çš„è¡¨é¢è§„åˆ™ï¼Œé‚£äº›éšæ€§æ ¡éªŒã€å¼‚å¸¸åˆ†æ”¯ã€æ¨¡å—ä¾èµ–ï¼Œæ ¹æœ¬æ— ä»çŸ¥æ™“ã€‚è€Œâ€œä»£ç +è°ƒç”¨é“¾â€çš„åŒé©±åŠ¨æ¨¡å¼ï¼Œå°±èƒ½æŠŠè¿™äº›éšè—çš„é€»è¾‘å…¨æŒ–å‡ºæ¥ã€‚æ ¸å¿ƒç›®æ ‡å¾ˆç®€å•ï¼š<strong>è®©æ¯ä¸€è¡Œæ ¸å¿ƒä»£ç éƒ½æœ‰å¯¹åº”çš„æµ‹è¯•ç”¨ä¾‹ï¼Œæ¯ä¸€ä¸ªåˆ†æ”¯é€»è¾‘éƒ½è¢«è¦†ç›–</strong>ã€‚</p>
<p>ä¹‹å‰æˆ‘ä»¬åœ¨ã€Šä»£ç "è´è¶æ•ˆåº”"ç»ˆç»“è€…:Al Review+ASTè”å±•,æ„å»ºæ™ºèƒ½æµ‹è¯•é˜²å¾¡æ–°ä½“ç³»ã€‹ä¸€æ–‡ä¸­ï¼Œå·²ç»æ­å»ºå¥½äº†ä»£ç å¯¼èˆªç³»ç»Ÿï¼Œèƒ½æ¸…æ™°æ¢³ç†å‡ºæ¯ä¸ªæ–¹æ³•ä¹‹é—´çš„è°ƒç”¨å…³ç³»ã€‚åŸºäºè¿™ä¸ªç³»ç»Ÿï¼Œæˆ‘ä»¬å°±èƒ½è·å–æ¥å£ä»ä¸Šåˆ°ä¸‹çš„å®Œæ•´è°ƒç”¨é“¾ä»£ç ï¼Œå†è®©AIæŒ‰è§„åˆ™<strong>ä¸€é”®ç”Ÿæˆä»£ç å…¨è¦†ç›–ç”¨ä¾‹</strong>ã€‚å¦‚å›¾æ‰€ç¤ºï¼šã€ŒQAæ™ºç»˜ã€ä¹‹æ¥å£ç”¨ä¾‹è‡ªåŠ¨åŒ–é¡¹ç›®ç³»ç»Ÿæ€§åœ°é€šè¿‡ â€œå¤šæºæ•°æ®æ•´åˆâ†’ å¤šæ¨¡å‹ç‹¬ç«‹æ¢ç´¢ â†’ æ™ºèƒ½èåˆä»²è£â€ ä¸‰æ­¥æ³•ï¼Œæ¥æœ€å¤§åŒ–é€¼è¿‘æµ‹è¯•ç”¨ä¾‹çš„å…¨è¦†ç›–ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97abf730c9f845ac9978e14ef412b7ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuq55CD5bel56iL5biI5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767236084&amp;x-signature=WfybljbBEIwQIUVW%2BhHR%2BR5Aa%2B4%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p><strong>å¤šæºæ•°æ®æ•´åˆï¼Œæ„å»ºå…¨æ™¯è®¤çŸ¥ï¼ˆæ•°æ®é©±åŠ¨ï¼‰</strong>ï¼šæµç¨‹å§‹äºå¯¹æ¥å£çš„360åº¦æ·±åº¦é€è§†ã€‚è‡ªåŠ¨åŒ–åœ°ä»å¤šä¸ªå…³é”®æ•°æ®æºåŒæ­¥è·å–ä¿¡æ¯ï¼Œå½¢æˆä¸€ä»½æ•´åˆçš„Promptï¼Œä»æºå¤´ç¡®ä¿ç”Ÿæˆç”¨ä¾‹çš„è¾“å…¥ä¿¡æ¯æ˜¯å…¨é¢ã€ç«‹ä½“ä¸”å‡†ç¡®çš„ï¼›</p>
</li>
<li>
<p><strong>å¤šæ¨¡å‹ç‹¬ç«‹æ¢ç´¢ï¼Œæ¿€å‘æ€ç»´å¤šæ ·æ€§ï¼ˆæ™ºèƒ½é©±åŠ¨ï¼‰</strong>ï¼šè¿™æ˜¯ç¡®ä¿è¦†ç›–èŒƒå›´ã€é¿å…å•ä¸€æ¨¡å‹æ€ç»´å±€é™çš„å…³é”®è®¾è®¡ã€‚ç³»ç»Ÿå¹¶è¡Œå‘èµ·ä¸‰æ¬¡å¼‚æ­¥è°ƒç”¨ï¼Œä»ä¸åŒè§†è§’ç‹¬ç«‹æ„æ€æµ‹è¯•æ–¹æ¡ˆï¼Œä»è€Œæ±‡é›†å¤šæ ·åŒ–çš„æµ‹è¯•æƒ³æ³•ï¼Œæœ‰æ•ˆé¿å…äº†å› å•ä¸€AIæ€è·¯å›ºåŒ–å¯¼è‡´çš„è¦†ç›–ç›²åŒºï¼›</p>
</li>
<li>
<p><strong>æ™ºèƒ½èåˆä»²è£ï¼Œç”Ÿæˆæœ€ä¼˜é›†ï¼ˆé—­ç¯ä¼˜åŒ–ï¼‰</strong>ï¼šå¹¶è¡Œæ¢ç´¢äº§å‡ºäº†ä¸‰ä»½å„æœ‰ä¾§é‡ã€å¯èƒ½å­˜åœ¨å†—ä½™æˆ–å†²çªçš„ç”¨ä¾‹è‰æ¡ˆã€‚ç³»ç»Ÿå¼•å…¥äº†å…³é”®çš„ç¬¬å››æ¬¡æ¨¡å‹è°ƒç”¨ï¼Œæ‰®æ¼”â€œé¦–å¸­æµ‹è¯•æ¶æ„å¸ˆâ€çš„è§’è‰²ï¼Œç¡®ä¿æœ€ç»ˆå…¥åº“çš„ç”¨ä¾‹é›†æ˜¯â€œ1+1+1 &gt; 3â€çš„é«˜è´¨é‡ã€é«˜å¯ä¿¡åº¦æˆæœã€‚</p>
</li>
</ul>
<h4 data-id="heading-8">2. è¦†ç›–ç‡å¯è§†åŒ–ï¼šä»£ç æŸ“è‰²ç›´è§‚éªŒè¯</h4>
<p>AIç”Ÿæˆç”¨ä¾‹åï¼Œæ€ä¹ˆç¡®è®¤æ˜¯ä¸æ˜¯çœŸçš„å…¨è¦†ç›–äº†ï¼Ÿç­”æ¡ˆæ˜¯ã€Œ<strong>ä»£ç æŸ“è‰²</strong>ã€ã€‚</p>
<p>é€šè¿‡å¯è§†åŒ–ç•Œé¢ï¼Œè¢«è¦†ç›–çš„ä»£ç ä¼šæ ‡æ³¨ä¸€ç§é¢œè‰²ï¼Œæœªè¦†ç›–çš„æ ‡æ³¨å¦ä¸€ç§é¢œè‰²ï¼Œå“ªäº›åœ°æ–¹æ²¡æµ‹åˆ°ã€å“ªäº›åœ°æ–¹å·²è¾¾æ ‡ï¼Œä¸€ç›®äº†ç„¶ã€‚ä¸ç”¨å†æ‰‹åŠ¨æ ¸å¯¹ï¼Œæ•ˆç‡ç›´æ¥æ‹‰æ»¡ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ae0dd53846d48ada8d1140a42d50cff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuq55CD5bel56iL5biI5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767236084&amp;x-signature=V3AaDsMz98KkXvNjxqZwjsCQMAE%3D" alt="" loading="lazy"/></p>
<p>è¿™æ­£æ˜¯æˆ‘ä»¬â€œä»£ç +è°ƒç”¨é“¾â€åŒé©±åŠ¨æ¨¡å¼ä»·å€¼çš„ç›´è§‚ä½“ç°ã€‚é€šè¿‡è°ƒç”¨é“¾åˆ†æï¼ŒAIèƒ½å¤Ÿç²¾å‡†ç”Ÿæˆè§¦åŠæ·±å±‚é€»è¾‘çš„ç”¨ä¾‹ï¼›è€Œé€šè¿‡ä»£ç æŸ“è‰²çš„å¯è§†åŒ–éªŒè¯ï¼Œè¦†ç›–ç»“æœå˜å¾—ä¸€ç›®äº†ç„¶ã€‚è®©è´¨é‡ä¿éšœä»ç”Ÿæˆåˆ°éªŒè¯ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´ã€å¯ä¿¡çš„é—­ç¯ã€‚</p>
<h4 data-id="heading-9">3. AIç”¨ä¾‹è‡ªä¼˜åŒ–ï¼šé—­ç¯é©±åŠ¨ï¼Œå‘Šåˆ«æ‰‹åŠ¨ç»´æŠ¤</h4>
<p>è§£å†³äº†æ¼æµ‹é—®é¢˜ï¼Œå†æ¥çœ‹ç”¨ä¾‹ç»´æŠ¤éš¾çš„ç—›ç‚¹ã€‚æ ¸å¿ƒæ€è·¯æ˜¯æ­å»ºã€Œç”Ÿæˆâ†’æ‰§è¡Œâ†’åé¦ˆâ†’ä¼˜åŒ–ã€çš„é—­ç¯ï¼Œé MCPæ¨¡å‹åä½œã€äººå·¥å®¡æ ¸ã€è°ƒè¯•ç»“æœåå“ºï¼Œè®©ç”¨ä¾‹è¶Šç”¨è¶Šç²¾å‡†ï¼Œå½»åº•å‘Šåˆ«æ‰‹åŠ¨ä¿®æ”¹ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4417f7fe5c04c6db3c191d7075624f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuq55CD5bel56iL5biI5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767236084&amp;x-signature=ngxyuJsQbU3Oh5yyPvcN41RJMKY%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p><strong>MCPæœåŠ¡ï¼šè´´åˆä¸šåŠ¡ï¼Œç”Ÿæˆé«˜è´¨é‡åˆå§‹ç”¨ä¾‹</strong>ã€‚åˆå§‹ç”¨ä¾‹çš„è´¨é‡å¾ˆå…³é”®ï¼Œç›´æ¥å½±å“åç»­ä¼˜åŒ–æ•ˆç‡ã€‚æˆ‘ä»¬ç»“åˆMCPæœåŠ¡ï¼Œè®©AIèƒ½ç²¾å‡†åŒ¹é…ä¸šåŠ¡åœºæ™¯ï¼Œç”Ÿæˆçš„åˆå§‹ç”¨ä¾‹ä¸ä»…è¦†ç›–å…¨é¢ï¼Œè¿˜èƒ½è´´åˆå®é™…ä¸šåŠ¡é€»è¾‘ï¼Œä¸ç”¨å†ä»é›¶å¼€å§‹æ‰“ç£¨ã€‚</p>
</li>
<li>
<p><strong>è°ƒè¯•ç»“æœåå“ºï¼šè‡ªåŠ¨ä¿®æ­£ï¼Œç”¨ä¾‹â€œè‡ªæˆ‘è¿­ä»£â€</strong>ã€‚ç”¨ä¾‹ç”Ÿæˆåä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œç³»ç»Ÿä¼šå¯¹æ¯”å®é™…æ‰§è¡Œç»“æœä¸é¢„æœŸç»“æœã€‚å¦‚æœå‡ºç°åå·®ï¼Œå°±ä¼šè‡ªåŠ¨åˆ†æåŸå› ï¼Œä¿®æ­£ç”¨ä¾‹ä¸­çš„å‚æ•°ã€æ–­è¨€ç­‰å†…å®¹â€”â€”ç›¸å½“äºç”¨ä¾‹åœ¨â€œè‡ªæˆ‘è¿­ä»£â€ï¼Œä¸ç”¨äººå·¥é€ä¸ªä¿®æ”¹ã€‚</p>
</li>
<li>
<p><strong>äººå·¥å®¡æ ¸è¿­ä»£ï¼šç²¾å‡†æ‰“ç£¨ï¼ŒæŸ¥æ¼è¡¥ç¼º</strong>ã€‚å½“ç„¶ï¼ŒAIä¼˜åŒ–ä¹Ÿéœ€è¦äººå·¥è¾…åŠ©æŠŠå…³ã€‚æˆ‘ä»¬å¯ä»¥å¯¹ç”¨ä¾‹è¿›è¡Œå®¡æ ¸æ‰“æ ‡ç­¾ï¼Œæ¯”å¦‚â€œæœ‰æ•ˆâ€â€œæ— æ•ˆâ€â€œé‡å¤â€ç­‰ã€‚è¿™äº›æ ‡ç­¾ä¼šåå“ºç»™AIï¼Œåç»­ç”Ÿæˆç”¨ä¾‹æ—¶ï¼Œå°±èƒ½é’ˆå¯¹æ€§åœ°æŸ¥æ¼è¡¥ç¼ºï¼Œè®©ç”¨ä¾‹è´¨é‡è¶Šæ¥è¶Šé«˜ã€‚</p>
</li>
</ul>
<h2 data-id="heading-10">å››ã€å°ç»“</h2>
<p>éšç€ã€ŒQAæ™ºç»˜ã€-AI Case Generation çš„æ­£å¼è½åœ°ï¼Œå åŠ æŒç»­å»ºè®¾çš„ AI TestExecã€AI Code Review èƒ½åŠ›ï¼Œå†ä¾æ‰˜é›ªå³°ç³»ç»Ÿå’Œå…¨åŸŸ AST ä»£ç è°ƒç”¨é“¾çš„åº•å±‚æŠ€æœ¯æ”¯æ’‘ï¼Œé›ªçƒ AI Quality é¡¹ç›®å·²åˆæ­¥æ­å»ºèµ·è´¨é‡åŸŸçš„æ™ºèƒ½é—­ç¯ä½“ç³»ã€‚</p>
<p>åœ¨æ ¸å¿ƒçš„æ™ºèƒ½è´¨é‡ç¯èŠ‚ï¼Œå®ç° â€œ<strong>ç”¨ä¾‹è‡ªåŠ¨ç”Ÿæˆ-æµ‹è¯•è‡ªåŠ¨æ‰§è¡Œ-ä»£ç è‡ªåŠ¨æ£€æµ‹</strong>â€ çš„å…¨æµç¨‹è‡ªåŠ¨åŒ–ï¼š</p>
<p>âœ… AI Case Generationï¼šå¯åŸºäºä¸šåŠ¡éœ€æ±‚æ™ºèƒ½æ‹†è§£æµ‹è¯•ç‚¹ï¼Œè‡ªåŠ¨ç”Ÿæˆ Feature ç”¨ä¾‹ä¸æ¥å£ç”¨ä¾‹å¹¶ç›´æ¥æ‰§è¡Œï¼›</p>
<p>âœ… AI TestExecï¼šæ‰¿æ¥ç”¨ä¾‹æ‰§è¡Œä»»åŠ¡ï¼Œå®Œæˆå›å½’æµ‹è¯•çš„è‡ªåŠ¨è°ƒåº¦ã€æ™ºèƒ½æ–­è¨€ä¸ç»“æœåˆ†æï¼›</p>
<p>âœ… AI Code Reviewï¼šä¾æ‰˜ AST è°ƒç”¨é“¾æ„ŸçŸ¥ä»£ç å˜æ›´ï¼Œè‡ªåŠ¨è¯„ä¼°å½±å“èŒƒå›´å¹¶å°†åˆ†æç»“æœç²¾å‡†æ¨é€è‡³å¯¹åº”è´Ÿè´£äººï¼›</p>
<p>è¿™ä¸€ç³»åˆ—èƒ½åŠ›çš„è”åŠ¨ï¼Œå·²æ¨åŠ¨é›ªçƒçš„è´¨é‡ä¿éšœæ¨¡å¼ä» â€œäººå·¥ä¸»å¯¼çš„é‡å¤åŠ³åŠ¨â€ å‘ â€œæ™ºèƒ½é©±åŠ¨çš„ç²¾å‡†ä¿éšœâ€ å®Œæˆäº†åˆæ­¥è½¬å‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ab5d987828a432e8f0a99a2de6c4d39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuq55CD5bel56iL5biI5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767236084&amp;x-signature=FXxiEPb7yhdwXYNdAv0MHZXzJbY%3D" alt="" loading="lazy"/></p>
<p>æœªæ¥ï¼Œé›ªçƒ AI Quality å°†å›´ç»• â€œèƒ½åŠ›æ·±åŒ–+æµç¨‹æ‰“é€š+ç”Ÿæ€ååŒâ€ ä¸‰ä¸ªæ–¹å‘æŒç»­è¿­ä»£ï¼š</p>
<p>ä¸€æ–¹é¢ï¼Œç»†åŒ–ä¸‰å¤§æ ¸å¿ƒèƒ½åŠ›çš„ç²¾åº¦ï¼Œå¤¯å®æ™ºèƒ½åŒ–åŸºç¡€ï¼›</p>
<p>å¦ä¸€æ–¹é¢ï¼Œæ‰“é€šå„æ¨¡å—æ•°æ®æµè½¬é“¾è·¯ï¼Œæ„å»º â€œä¸šåŠ¡éœ€æ±‚-æµ‹è¯•ç”¨ä¾‹-æ‰§è¡Œç»“æœ-ä»£ç é£é™©â€ çš„è”åŠ¨åé¦ˆæœºåˆ¶ â€”â€” ç”¨ä¾‹è¿­ä»£åå“ºéœ€æ±‚åˆ†æå®Œæ•´æ€§ï¼Œæ‰§è¡Œå¤±è´¥è‡ªåŠ¨å…³è”ä»£ç å˜æ›´ï¼Œä»£ç é£é™©åŒæ­¥æ›´æ–°ç”¨ä¾‹è¡¥å……æ¸…å•ï¼Œå®ç°åŒå‘é—­ç¯ï¼›</p>
<p>åŒæ—¶ï¼Œæ¨åŠ¨ä¸‰å¤§èƒ½åŠ›ä¸ç ”å‘åä½œå·¥å…·æ·±åº¦å¯¹æ¥ï¼Œèå…¥äº§ç ”å…¨æµç¨‹ï¼Œå½¢æˆ â€œæ™ºèƒ½è´¨é‡ä¿éšœ+ç ”å‘åä½œâ€ çš„ä¸€ä½“åŒ–ç”Ÿæ€ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a51df5c9281344db93c0cef9040e43dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuq55CD5bel56iL5biI5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767236084&amp;x-signature=qAUTt0EMHf5xSCygaFCaXDjN%2Fac%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é›¶åˆ°ä¸€æ­å»ºSpringCloudå¾®æœåŠ¡ï¼Œä¸€åœºä»£ç ä¸–ç•Œçš„â€œåˆ†å®¶â€å¤§æˆ]]></title>    <link>https://juejin.cn/post/7587284708947836943</link>    <guid>https://juejin.cn/post/7587284708947836943</guid>    <pubDate>2025-12-25T02:29:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587284708947836943" data-draft-id="7587277503947407360" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é›¶åˆ°ä¸€æ­å»ºSpringCloudå¾®æœåŠ¡ï¼Œä¸€åœºä»£ç ä¸–ç•Œçš„â€œåˆ†å®¶â€å¤§æˆ"/> <meta itemprop="keywords" content="åç«¯,Java,Spring Cloud"/> <meta itemprop="datePublished" content="2025-12-25T02:29:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‚Ÿç©ºç å­—"/> <meta itemprop="url" content="https://juejin.cn/user/3139860942296830"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é›¶åˆ°ä¸€æ­å»ºSpringCloudå¾®æœåŠ¡ï¼Œä¸€åœºä»£ç ä¸–ç•Œçš„â€œåˆ†å®¶â€å¤§æˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3139860942296830/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‚Ÿç©ºç å­—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T02:29:28.000Z" title="Thu Dec 25 2025 02:29:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°æ‚Ÿã€‚</p>
<h2 data-id="heading-0">ç¬¬ä¸€éƒ¨åˆ†ï¼šå¾®æœåŠ¡æ˜¯ä»€ä¹ˆï¼Ÿä¸€åœºâ€œåˆ†å®¶è¿‡æ—¥å­â€çš„å“²å­¦</h2>
<p>ä½ å¼€äº†ä¸€å®¶è¶…çº§ç«çˆ†çš„â€œç¨‹åºçŒ¿é¤å…â€ï¼Œä¸€å¼€å§‹æ‰€æœ‰èœéƒ½åœ¨ä¸€ä¸ªå¤§å¨æˆ¿åšï¼š</p>
<ul>
<li><strong>å•ä½“æ¶æ„</strong>ï¼šä¸€ä¸ªå¨å­ï¼ˆæœåŠ¡å™¨ï¼‰åŒ…æ½æ‰€æœ‰èœï¼Œç‚¹å•ã€ç‚’èœã€ç…²æ±¤ã€æ´—ç¢—å…¨ç®¡</li>
<li>å®¢äººç‚¹ä¸ªè›‹ç‚’é¥­ï¼Œæ•´ä¸ªå¨æˆ¿éƒ½å¾—åŠ¨èµ·æ¥</li>
<li>æƒ³å‡çº§è›‹ç‚’é¥­é…æ–¹ï¼Ÿå¾—å…³åº—è£…ä¿®ï¼ˆåœæœºéƒ¨ç½²ï¼‰</li>
<li>å¨å­æ„Ÿå†’äº†ï¼Ÿå…¨åº—åœä¸šï¼ˆå•ç‚¹æ•…éšœï¼‰</li>
</ul>
<p><strong>å¾®æœåŠ¡å°±åƒæŠŠå¤§å¨æˆ¿æ‹†äº†</strong>ï¼š</p>
<ul>
<li>è›‹ç‚’é¥­éƒ¨ã€ç«é”…éƒ¨ã€å¥¶èŒ¶éƒ¨å„è‡ªç‹¬ç«‹</li>
<li>æ¯ä¸ªéƒ¨é—¨æœ‰è‡ªå·±çš„å°å¨æˆ¿ï¼ˆæœåŠ¡å®ä¾‹ï¼‰</li>
<li>é€šè¿‡ä¼ èœæœºå™¨äººï¼ˆæœåŠ¡é€šä¿¡ï¼‰åä½œ</li>
<li>å¥¶èŒ¶éƒ¨ç‚¸äº†ï¼Ÿæ²¡äº‹ï¼Œè›‹ç‚’é¥­ç…§å¸¸ä¾›åº”ï¼ˆæ•…éšœéš”ç¦»ï¼‰</li>
</ul>
<h2 data-id="heading-1">ç¬¬äºŒéƒ¨åˆ†ï¼šå¼€å¹²ï¼å…«æ­¥æ­å»ºSpringCloudå…¨å®¶æ¡¶</h2>
<h3 data-id="heading-2">å…ˆæ‹œç å¤´ï¼ˆç¯å¢ƒå‡†å¤‡ï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¿…å¤‡ä¸‰ä»¶å¥—</span>
Java 11+ï¼ˆåˆ«ç”¨Java 8äº†ï¼Œå®ƒéƒ½é€€ä¼‘äº†ï¼‰
Maven 3.6+ï¼ˆJavaç•Œçš„åŒ…å·¥å¤´ï¼‰
IDEï¼ˆIntelliJ IDEA - ç¨‹åºå‘˜çš„æ³•æ‹‰åˆ©ï¼‰
</code></pre>
<h3 data-id="heading-3">ç¬¬1æ­¥ï¼šåˆ›å»ºçˆ¶å·¥ç¨‹ - å®¶æ—çš„â€œæ—è°±â€</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- pom.xml - å®¶æ—æ€»ç« ç¨‹ --&gt;</span>
<span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">project</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.coder.micro<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>micro-family<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å£°æ˜SpringCloudç‰ˆæœ¬ - å®¶æ—ç”¨çš„å®¶è§„ç‰ˆæœ¬ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">spring.cloud.version</span>&gt;</span>2021.0.3<span class="hljs-tag">&lt;/<span class="hljs-name">spring.cloud.version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">spring.boot.version</span>&gt;</span>2.7.14<span class="hljs-tag">&lt;/<span class="hljs-name">spring.boot.version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- ä¾èµ–ç®¡ç† - æ‰€æœ‰å­å­™è¯¥ç”¨ä»€ä¹ˆç‰ˆæœ¬ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring.cloud.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>eureka-server<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>gateway<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>order-service<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>user-service<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<h3 data-id="heading-4">ç¬¬2æ­¥ï¼šEurekaæœåŠ¡æ³¨å†Œä¸­å¿ƒ - å®¶æ—çš„â€œæˆ·å£æœ¬â€</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æƒ³è±¡æˆå®¶æ—å¾®ä¿¡ç¾¤ï¼š</span>
<span class="hljs-comment"># è°åœ¨ï¼ˆæœåŠ¡ä¸Šçº¿ï¼‰@æ‰€æœ‰äºº</span>
<span class="hljs-comment"># è°ç¡äº†ï¼ˆæœåŠ¡ä¸‹çº¿ï¼‰æ”¹å¤‡æ³¨</span>
<span class="hljs-comment"># è°å¤±è”äº†ï¼ˆå¿ƒè·³æ£€æµ‹ï¼‰è¸¢å‡ºç¾¤</span>
</code></pre>

<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// EurekaServerApplication.java - æˆ·å£æœ¬ç®¡ç†å‘˜</span>
@SpringBootApplication
@EnableEurekaServer  <span class="hljs-comment">// å¼€å¯æˆ·å£æœ¬åŠŸèƒ½</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">EurekaServerApplication</span> {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> {
        SpringApplication.run(EurekaServerApplication.<span class="hljs-keyword">class</span>, args);
    }
}

<span class="hljs-comment">// application.yml - æˆ·å£æœ¬é…ç½®</span>
server:
  port: <span class="hljs-number">8761</span>  <span class="hljs-meta"># æˆ·å£æœ¬åŠå…¬å®¤é—¨ç‰Œå·</span>

eureka:
  client:
    register-<span class="hljs-keyword">with</span>-eureka: <span class="hljs-literal">false</span>  <span class="hljs-meta"># æˆ·å£æœ¬ä¸ç”¨è‡ªå·±ç™»è®°è‡ªå·±</span>
    fetch-registry: <span class="hljs-literal">false</span>  <span class="hljs-meta"># ä¸ç”¨æ‹‰å–åˆ«äººçš„ä¿¡æ¯</span>
  server:
    eviction-interval-timer-<span class="hljs-keyword">in</span>-ms: <span class="hljs-number">30000</span>  <span class="hljs-meta"># 30ç§’æ£€æŸ¥ä¸€æ¬¡è°å¤±è”äº†</span>
</code></pre>
<h3 data-id="heading-5">ç¬¬3æ­¥ï¼šAPIç½‘å…³ - å®¶æ—çš„â€œå‰å°å°å§å§â€</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">//</span> <span class="hljs-string">GatewayApplication.java</span>
<span class="hljs-string">@SpringBootApplication</span>
<span class="hljs-string">public</span> <span class="hljs-string">class</span> <span class="hljs-string">GatewayApplication</span> {
    <span class="hljs-string">public</span> <span class="hljs-string">static</span> <span class="hljs-string">void</span> <span class="hljs-string">main(String</span>[] <span class="hljs-string">args)</span> {
        <span class="hljs-string">SpringApplication.run(GatewayApplication.class</span>, <span class="hljs-string">args);</span>
    }
}

<span class="hljs-string">//</span> <span class="hljs-string">Gatewayé…ç½®</span> <span class="hljs-bullet">-</span> <span class="hljs-string">å‰å°è·¯ç”±è§„åˆ™</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">cloud:</span>
    <span class="hljs-attr">gateway:</span>
      <span class="hljs-attr">routes:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">order-service</span>  <span class="hljs-comment"># æ‰¾ç‚¹å•éƒ¨çš„è·¯</span>
          <span class="hljs-attr">uri:</span> <span class="hljs-string">lb://ORDER-SERVICE</span>  <span class="hljs-comment"># lb=è´Ÿè½½å‡è¡¡ï¼Œåƒç”µæ¢¯åˆ†æµå…¥æµ</span>
          <span class="hljs-attr">predicates:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">Path=/api/orders/**</span>  <span class="hljs-comment"># æ‰€æœ‰/orderså¼€å¤´çš„è¯·æ±‚</span>
            
        <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">user-service</span>  <span class="hljs-comment"># æ‰¾ä¼šå‘˜éƒ¨çš„è·¯</span>
          <span class="hljs-attr">uri:</span> <span class="hljs-string">lb://USER-SERVICE</span>
          <span class="hljs-attr">predicates:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">Path=/api/users/**</span>
            
        <span class="hljs-comment"># å…¨å±€è¿‡æ»¤å™¨ - å‰å°çš„å°æœ¬æœ¬</span>
      <span class="hljs-attr">default-filters:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">AddRequestHeader=X-Request-From,</span> <span class="hljs-string">gateway</span>  <span class="hljs-comment"># ç»™æ¯ä¸ªè¯·æ±‚ç›–ä¸ªç« </span>
</code></pre>
<h3 data-id="heading-6">ç¬¬4æ­¥ï¼šè®¢å•æœåŠ¡ - å®¶æ—çš„â€œç‚¹å•éƒ¨â€</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// OrderServiceApplication.java</span>
<span class="hljs-variable">@SpringBootApplication</span>
<span class="hljs-variable">@EnableEurekaClient</span>  <span class="hljs-comment">// å¤§å–Šä¸€å£°ï¼šæˆ‘ä¸Šçº¿äº†ï¼</span>
<span class="hljs-variable">@EnableFeignClients</span>  <span class="hljs-comment">// å¼€å¯â€œæ‰“ç”µè¯â€åŠŸèƒ½</span>
public class OrderServiceApplication {
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">static</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">main</span>(String[] args) {
        <span class="hljs-selector-tag">SpringApplication</span><span class="hljs-selector-class">.run</span>(OrderServiceApplication.class, args);
    }
}

<span class="hljs-comment">// OrderController.java - ç‚¹å•éƒ¨æ¥å¾…å¤„</span>
@<span class="hljs-selector-tag">RestController</span>
@<span class="hljs-selector-tag">RequestMapping</span>(<span class="hljs-string">"/orders"</span>)
@<span class="hljs-selector-tag">Slf4j</span>
<span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">OrderController</span> {
    
    <span class="hljs-variable">@Autowired</span>
    private UserServiceClient userServiceClient;  <span class="hljs-comment">// ç”¨æˆ·éƒ¨çš„è”ç³»ç”µè¯</span>
    
    <span class="hljs-variable">@PostMapping</span>
    public OrderDTO <span class="hljs-built_in">createOrder</span>(<span class="hljs-variable">@RequestBody</span> OrderRequest request) {
        <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.info</span>(<span class="hljs-string">"æ¥åˆ°æ–°è®¢å•ï¼š{}"</span>, request);
        
        <span class="hljs-comment">// æ‰“ä¸ªç”µè¯é—®ç”¨æˆ·éƒ¨ï¼šè¿™äººæ˜¯ä¸æ˜¯VIPï¼Ÿ</span>
        <span class="hljs-selector-tag">UserDTO</span> <span class="hljs-selector-tag">user</span> = <span class="hljs-selector-tag">userServiceClient</span><span class="hljs-selector-class">.getUser</span>(request.<span class="hljs-built_in">getUserId</span>());
        
        <span class="hljs-selector-tag">if</span> (user.<span class="hljs-built_in">isVip</span>()) {
            <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.info</span>(<span class="hljs-string">"VIPç”¨æˆ·ï¼ŒåŠ æ€¥å¤„ç†ï¼"</span>);
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">processVipOrder</span>(request);
        }
        
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">processNormalOrder</span>(request);
    }
    
    <span class="hljs-comment">// å‡è£…è¿™é‡Œæœ‰å¾ˆå¤šä¸šåŠ¡é€»è¾‘...</span>
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">OrderDTO</span> <span class="hljs-selector-tag">processVipOrder</span>(OrderRequest request) {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">OrderDTO</span><span class="hljs-selector-class">.builder</span>()
                <span class="hljs-selector-class">.orderId</span>(UUID.<span class="hljs-built_in">randomUUID</span>().<span class="hljs-built_in">toString</span>())
                <span class="hljs-selector-class">.status</span>(<span class="hljs-string">"VIP_ä¼˜å…ˆå¤„ç†"</span>)
                <span class="hljs-selector-class">.message</span>(<span class="hljs-string">"è€æ¿ï¼Œæ‚¨çš„è®¢å•å·²æ’é˜Ÿï¼"</span>)
                <span class="hljs-selector-class">.build</span>();
    }
}
</code></pre>
<h3 data-id="heading-7">ç¬¬5æ­¥ï¼šç”¨æˆ·æœåŠ¡ - å®¶æ—çš„â€œä¼šå‘˜éƒ¨â€</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// UserController.java</span>
<span class="hljs-variable">@RestController</span>
<span class="hljs-variable">@RequestMapping</span>(<span class="hljs-string">"/users"</span>)
<span class="hljs-variable">@Slf4j</span>
public class UserController {
    
    <span class="hljs-comment">// ç”¨æˆ·éƒ¨çš„VIPåå•</span>
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">Map</span>&lt;<span class="hljs-selector-tag">String</span>, <span class="hljs-selector-tag">UserDTO</span>&gt; <span class="hljs-selector-tag">userDatabase</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">HashMap</span>&lt;&gt;();
    
    @<span class="hljs-selector-tag">PostConstruct</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">init</span>() {
        <span class="hljs-selector-tag">userDatabase</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"1001"</span>, new <span class="hljs-built_in">UserDTO</span>(<span class="hljs-string">"1001"</span>, <span class="hljs-string">"å¼ å¤§æ¬¾"</span>, true));
        <span class="hljs-selector-tag">userDatabase</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"1002"</span>, new <span class="hljs-built_in">UserDTO</span>(<span class="hljs-string">"1002"</span>, <span class="hljs-string">"æé“æŸ±"</span>, false));
    }
    
    @<span class="hljs-selector-tag">GetMapping</span>(<span class="hljs-string">"/{userId}"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">UserDTO</span> <span class="hljs-selector-tag">getUser</span>(<span class="hljs-variable">@PathVariable</span> String userId) {
        <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.info</span>(<span class="hljs-string">"æŸ¥è¯¢ç”¨æˆ·ï¼š{}"</span>, userId);
        
        <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ</span>
        <span class="hljs-selector-tag">try</span> {
            <span class="hljs-selector-tag">Thread</span><span class="hljs-selector-class">.sleep</span>(<span class="hljs-number">100</span>);
        } <span class="hljs-selector-tag">catch</span> (InterruptedException e) {
            <span class="hljs-selector-tag">Thread</span><span class="hljs-selector-class">.currentThread</span>()<span class="hljs-selector-class">.interrupt</span>();
        }
        
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">userDatabase</span><span class="hljs-selector-class">.getOrDefault</span>(userId, 
                new <span class="hljs-built_in">UserDTO</span>(userId, <span class="hljs-string">"æœªçŸ¥ç”¨æˆ·"</span>, false));
    }
}
</code></pre>
<h3 data-id="heading-8">ç¬¬6æ­¥ï¼šæœåŠ¡é—´é€šä¿¡ - å®¶æ—çš„â€œå†…éƒ¨ç”µè¯ç³»ç»Ÿâ€</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// UserServiceClient.java - è®¢å•éƒ¨ç”¨æ¥å‘¼å«ç”¨æˆ·éƒ¨çš„ç”µè¯</span>
<span class="hljs-variable">@FeignClient</span>(name = <span class="hljs-string">"USER-SERVICE"</span>)  <span class="hljs-comment">// å£°æ˜è¦å‘¼å«çš„æœåŠ¡å</span>
public interface UserServiceClient {
    
    <span class="hljs-variable">@GetMapping</span>(<span class="hljs-string">"/users/{userId}"</span>)  <span class="hljs-comment">// ç”µè¯å·ç å’Œæ‹¨å·æ–¹å¼</span>
    UserDTO <span class="hljs-built_in">getUser</span>(<span class="hljs-variable">@PathVariable</span> String userId);
    
    <span class="hljs-comment">// è¿™å°±æ˜¯SpringCloudçš„é­”æ³•ï¼š</span>
    <span class="hljs-comment">// çœ‹èµ·æ¥åƒæœ¬åœ°è°ƒç”¨ï¼Œå®é™…ä¸Šæ˜¯HTTPè¯·æ±‚</span>
    <span class="hljs-comment">// åƒæäº†å¾®ä¿¡è¯­éŸ³ï¼Œçœ‹ä¼¼åœ¨èº«è¾¹ï¼Œå®é™…å¯èƒ½éš”äº†ä¸ªå¤ªå¹³æ´‹</span>
}
</code></pre>
<h3 data-id="heading-9">ç¬¬7æ­¥ï¼šé…ç½®ä¸­å¿ƒ - å®¶æ—çš„â€œå…¬å‘Šæ â€</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">//</span> <span class="hljs-string">æ¯ä¸ªæœåŠ¡éƒ½è¦æœ‰è¿™ä¸ªé…ç½®</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">config:</span>
    <span class="hljs-attr">import:</span> <span class="hljs-string">optional:configserver:http://localhost:8888</span>  <span class="hljs-comment"># çœ‹å…¬å‘Šæ åœ°å€</span>
  <span class="hljs-attr">cloud:</span>
    <span class="hljs-attr">config:</span>
      <span class="hljs-attr">fail-fast:</span> <span class="hljs-literal">false</span>  <span class="hljs-comment"># å…¬å‘Šæ åäº†ä¹Ÿä¸å½±å“è¥ä¸š</span>
      
<span class="hljs-comment"># å…¬å‘Šæ ä¸Šå†™ç€ï¼š</span>
<span class="hljs-comment"># order-service.yml:</span>
<span class="hljs-comment">#   ä¼˜æƒ æ´»åŠ¨ï¼šåŒåä¸€æ‰“äº”æŠ˜</span>
<span class="hljs-comment">#   è¶…æ—¶æ—¶é—´ï¼š30ç§’</span>
<span class="hljs-comment">#   </span>
<span class="hljs-comment"># user-service.yml:</span>
<span class="hljs-comment">#   VIPé—¨æ§›ï¼šæ¶ˆè´¹æ»¡10000</span>
<span class="hljs-comment">#   ç­¾åˆ°ç§¯åˆ†ï¼š10åˆ†/å¤©</span>
</code></pre>
<h3 data-id="heading-10">ç¬¬8æ­¥ï¼šç†”æ–­é™çº§ - å®¶æ—çš„â€œåº”æ€¥æ–¹æ¡ˆâ€</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// OrderServiceä¸­è°ƒç”¨ç”¨æˆ·æœåŠ¡æ—¶</span>
<span class="hljs-variable">@FeignClient</span>(name = <span class="hljs-string">"USER-SERVICE"</span>, 
             fallback = UserServiceFallback.class)  <span class="hljs-comment">// å¤‡èƒæ–¹æ¡ˆ</span>
public interface UserServiceClient {
    <span class="hljs-comment">// ...</span>
}

<span class="hljs-comment">// ç”¨æˆ·éƒ¨å¤±è”æ—¶çš„å¤‡èƒæ–¹æ¡ˆ</span>
<span class="hljs-variable">@Component</span>
<span class="hljs-variable">@Slf4j</span>
public class UserServiceFallback implements UserServiceClient {
    
    <span class="hljs-variable">@Override</span>
    public UserDTO <span class="hljs-built_in">getUser</span>(String userId) {
        <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.warn</span>(<span class="hljs-string">"ç”¨æˆ·æœåŠ¡å¤±è”ï¼Œå¯ç”¨é»˜è®¤ç”¨æˆ·ä¿¡æ¯"</span>);
        
        <span class="hljs-comment">// è¿”å›å…œåº•æ•°æ®ï¼Œä¿è¯è®¢å•æœåŠ¡ä¸å´©æºƒ</span>
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">UserDTO</span><span class="hljs-selector-class">.builder</span>()
                <span class="hljs-selector-class">.userId</span>(userId)
                <span class="hljs-selector-class">.username</span>(<span class="hljs-string">"é»˜è®¤ç”¨æˆ·"</span>)
                <span class="hljs-selector-class">.vip</span>(false)
                <span class="hljs-selector-class">.fromFallback</span>(true)  <span class="hljs-comment">// æ ‡è®°è¿™æ˜¯å¤‡èƒæ•°æ®</span>
                <span class="hljs-selector-class">.build</span>();
    }
}
</code></pre>
<h2 data-id="heading-11">ç¬¬ä¸‰éƒ¨åˆ†ï¼šå¯åŠ¨å…¨å®¶æ¡¶çš„â€œå¼€æœºä»ªå¼â€</h2>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨é¡ºåºå¾ˆé‡è¦ï¼Œåƒç©å¤šç±³è¯ºéª¨ç‰Œï¼š</span>
1. å¯åŠ¨æˆ·å£æœ¬ï¼ˆEureka Serverï¼‰
   <span class="hljs-built_in">cd</span> eureka-server &amp;&amp; mvn spring-boot:run
   <span class="hljs-comment"># è®¿é—® http://localhost:8761 çœ‹è°åœ¨çº¿</span>

2. å¯åŠ¨ä¼šå‘˜éƒ¨ï¼ˆUser Serviceï¼‰
   <span class="hljs-built_in">cd</span> user-service &amp;&amp; mvn spring-boot:run
   <span class="hljs-comment"># åœ¨Eurekaé¡µé¢åº”è¯¥èƒ½çœ‹åˆ°USER-SERVICE</span>

3. å¯åŠ¨ç‚¹å•éƒ¨ï¼ˆOrder Serviceï¼‰
   <span class="hljs-built_in">cd</span> order-service &amp;&amp; mvn spring-boot:run

4. å¯åŠ¨å‰å°ï¼ˆGatewayï¼‰
   <span class="hljs-built_in">cd</span> gateway &amp;&amp; mvn spring-boot:run

<span class="hljs-comment"># æµ‹è¯•ä¸€ä¸‹ï¼š</span>
curl http://localhost:8080/api/orders \
  -X POST \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -d <span class="hljs-string">'{"userId": "1001", "productId": "P001"}'</span>
  
<span class="hljs-comment"># åº”è¯¥è¿”å›ï¼šVIPè®¢å•å·²æ’é˜Ÿï¼</span>
</code></pre>
<h2 data-id="heading-12">ç¬¬å››éƒ¨åˆ†ï¼šå¾®æœåŠ¡å¼€å‘çš„â€œç”Ÿå­˜æ³•åˆ™â€</h2>
<h3 data-id="heading-13">1. æœåŠ¡æ‹†åˆ†åŸåˆ™ - â€œåˆ†å®¶ä¸åˆ†å¿ƒâ€</h3>
<pre><code class="hljs language-diff" lang="diff">// å¥½çš„æ‹†åˆ†ï¼šæŒ‰ä¸šåŠ¡èƒ½åŠ›
<span class="hljs-deletion">- è®¢å•æœåŠ¡ï¼šç®¡ä¸‹å•ã€æ”¯ä»˜ã€é€€æ¬¾</span>
<span class="hljs-deletion">- åº“å­˜æœåŠ¡ï¼šç®¡å•†å“åº“å­˜</span>
<span class="hljs-deletion">- ç‰©æµæœåŠ¡ï¼šç®¡é…é€</span>

// åçš„æ‹†åˆ†ï¼šæŒ‰æŠ€æœ¯å±‚
<span class="hljs-deletion">- ControlleræœåŠ¡ï¼šåªæ”¾Controller  // åˆ«è¿™ä¹ˆå¹²ï¼</span>
<span class="hljs-deletion">- ServiceæœåŠ¡ï¼šåªæ”¾Service      // è¿™æ˜¯ç»™è‡ªå·±æŒ–å‘ï¼</span>
<span class="hljs-deletion">- DAOæœåŠ¡ï¼šåªæ”¾DAO            // ä½ ä¼šå“­çš„ï¼</span>
</code></pre>
<h3 data-id="heading-14">2. æ•°æ®åº“è®¾è®¡ - â€œå„ç®¡å„çš„è´¦â€</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è®¢å•æœåŠ¡æœ‰è‡ªå·±çš„è®¢å•è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> orders (
    id <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">PRIMARY</span> KEY,
    user_id <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>),  <span class="hljs-comment">-- åªå­˜ç”¨æˆ·IDï¼Œä¸å­˜ç”¨æˆ·è¯¦æƒ…</span>
    amount <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>)
    <span class="hljs-comment">-- ä¸åœ¨è¿™é‡Œåˆ›å»ºuserè¡¨çš„å¤–é”®ï¼è¿™æ˜¯å¾®æœåŠ¡å¤§å¿Œï¼</span>
);

<span class="hljs-comment">-- ç”¨æˆ·æœåŠ¡æœ‰è‡ªå·±çš„ç”¨æˆ·è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> users (
    id <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">PRIMARY</span> KEY,
    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),
    vip_level <span class="hljs-type">INT</span>
    <span class="hljs-comment">-- ä¸çŸ¥é“è®¢å•è¡¨çš„å­˜åœ¨ï¼Œå„è¿‡å„çš„</span>
);
</code></pre>
<h3 data-id="heading-15">3. åˆ†å¸ƒå¼äº‹åŠ¡ - â€œå®¶æ—çš„ä¿¡ä»»å±æœºâ€</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä½¿ç”¨Seataå¤„ç†åˆ†å¸ƒå¼äº‹åŠ¡</span>
<span class="hljs-meta">@GlobalTransactional</span>  <span class="hljs-comment">// åˆ†å¸ƒå¼äº‹åŠ¡æ³¨è§£</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">placeOrder</span>(<span class="hljs-params">OrderRequest request</span>) {
    <span class="hljs-comment">// 1. æ‰£åº“å­˜ï¼ˆè°ƒç”¨åº“å­˜æœåŠ¡ï¼‰</span>
    inventoryService.<span class="hljs-title function_">reduceStock</span>(request.<span class="hljs-title function_">getProductId</span>());
    
    <span class="hljs-comment">// 2. åˆ›å»ºè®¢å•</span>
    orderService.<span class="hljs-title function_">createOrder</span>(request);
    
    <span class="hljs-comment">// 3. æ‰£æ¬¾ï¼ˆè°ƒç”¨æ”¯ä»˜æœåŠ¡ï¼‰</span>
    paymentService.<span class="hljs-title function_">deductBalance</span>(request.<span class="hljs-title function_">getUserId</span>());
    
    <span class="hljs-comment">// ä»»ä½•ä¸€æ­¥å¤±è´¥ï¼Œæ‰€æœ‰æ“ä½œéƒ½ä¼šå›æ»š</span>
    <span class="hljs-comment">// åƒæäº†"è¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨æ’¤é”€"</span>
}
</code></pre>
<h2 data-id="heading-16">æ€»ç»“ï¼šå¾®æœåŠ¡ä¹‹è·¯çš„è‹¦ä¸ä¹</h2>
<h3 data-id="heading-17">ä½ å¾—åˆ°çš„â€œè¶…èƒ½åŠ›â€ï¼š</h3>
<ol>
<li><strong>ç‹¬ç«‹éƒ¨ç½²</strong>ï¼šæ”¹ä¸ªæŒ‰é’®é¢œè‰²ä¸ç”¨é‡å¯æ•´ä¸ªç³»ç»Ÿ</li>
<li><strong>æŠ€æœ¯å¼‚æ„</strong>ï¼šè®¢å•ç”¨Javaï¼Œæ¨èç”¨Pythonï¼Œæ•°æ®åˆ†æç”¨Go</li>
<li><strong>å¼¹æ€§ä¼¸ç¼©</strong>ï¼šåŒåä¸€ç»™è®¢å•æœåŠ¡å¤šåŠ 10å°æœºå™¨</li>
<li><strong>å®¹é”™æ€§</strong>ï¼šæ¨èæœåŠ¡æŒ‚äº†ï¼Ÿå•†å“è¯¦æƒ…é¡µç…§æ ·èƒ½æ‰“å¼€</li>
</ol>
<h3 data-id="heading-18">ä½ é¢ä¸´çš„â€œæŒ‘æˆ˜â€ï¼š</h3>
<ol>
<li><strong>åˆ†å¸ƒå¼debug</strong>ï¼šæ‰¾bugåƒä¾¦æ¢ç ´æ¡ˆï¼Œçº¿ç´¢åˆ†å¸ƒåœ¨5ä¸ªæœåŠ¡é‡Œ</li>
<li><strong>ç½‘ç»œå»¶è¿Ÿ</strong>ï¼šæœ¬åœ°æ–¹æ³•è°ƒç”¨1msï¼ŒæœåŠ¡é—´è°ƒç”¨å¯èƒ½100ms</li>
<li><strong>æ•°æ®ä¸€è‡´æ€§</strong>ï¼šç”¨æˆ·ä½™é¢å‡å°‘äº†ï¼Œè®¢å•å´æ²¡åˆ›å»ºæˆåŠŸï¼Ÿ</li>
<li><strong>è¿ç»´å¤æ‚åº¦</strong>ï¼šåŸæ¥ç®¡1ä¸ªåº”ç”¨ï¼Œç°åœ¨è¦ç®¡20ä¸ªæœåŠ¡</li>
</ol>
<h3 data-id="heading-19">æœ€åï¼š</h3>
<p><strong>å¾®æœåŠ¡ä¸æ˜¯é“¶å¼¹ï¼Œæ˜¯é“¶åˆ¶é¤å…·</strong>ï¼š</p>
<ul>
<li>é€‚åˆå¤§å‹å›¢é˜Ÿï¼ˆå„è‡ªåšé¥­ä¸æ‰“æ¶ï¼‰</li>
<li>é€‚åˆå¿«é€Ÿè¿­ä»£ï¼ˆå„éƒ¨åˆ†ç‹¬ç«‹å‡çº§ï¼‰</li>
<li>é€‚åˆå¤æ‚ç³»ç»Ÿï¼ˆåˆ†è€Œæ²»ä¹‹ï¼‰</li>
</ul>
<p><strong>ä½†å¦‚æœä½ åªæ˜¯å¼€ä¸ªç…é¥¼æ‘Š</strong>ï¼š</p>
<ul>
<li>ä¸€ä¸ªå¹³é”…ï¼ˆå•ä½“åº”ç”¨ï¼‰å¤Ÿäº†</li>
<li>éè¦æ5ä¸ªå°ç¶ï¼ˆå¾®æœåŠ¡ï¼‰ï¼Ÿ</li>
<li>å…‰åè°ƒå“ªä¸ªæ‘Šé¸¡è›‹å“ªä¸ªæ’’è‘±èŠ±å°±å¤Ÿä½ å—çš„</li>
</ul>
<p>å¾®æœåŠ¡è§£å†³çš„æ˜¯"äºº"çš„é—®é¢˜ï¼Œä¸æ˜¯"æŠ€æœ¯"çš„é—®é¢˜ã€‚å½“å›¢é˜Ÿå¤§åˆ°éœ€è¦åˆ†å±±å¤´ã€ä¸šåŠ¡å¤æ‚åˆ°éœ€è¦åˆ†é¢†åŸŸæ—¶ï¼Œæ‰æ˜¯å¾®æœåŠ¡ç™»åœºçš„æœ€ä½³æ—¶æœºã€‚å¦åˆ™ï¼Œä½ å°±æ˜¯ç”¨å¯¼å¼¹æ‰“èšŠå­â€”â€”æ•ˆæœéœ‡æ’¼ï¼Œä½†çœŸçš„æ²¡å¿…è¦ï¼</p>
<hr/>
<p><strong>ä»£ç ä¸–ç•Œçš„çœŸç†</strong>ï¼šæ²¡æœ‰æœ€å¥½çš„æ¶æ„ï¼Œåªæœ‰æœ€åˆé€‚çš„æ¶æ„ã€‚å¾®æœåŠ¡ä¸æ˜¯ç»ˆç‚¹ï¼Œè€Œæ˜¯ä½ æ¶æ„æ¼”åŒ–è·¯ä¸Šçš„ä¸€ä¸ªé‡Œç¨‹ç¢‘ã€‚åˆ›å»ºç¬¬ä¸€ä¸ªå¾®æœåŠ¡ï¼Œè®°å¾—å…ˆä»å°å¤„ç€æ‰‹ï¼Œæ¯•ç«Ÿï¼Œç½—é©¬ä¸æ˜¯ä¸€å¤©å»ºæˆçš„ï¼Œå¾®æœåŠ¡ä¹Ÿä¸æ˜¯ä¸€æ¬¡æ‹†å®Œçš„ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6065e0ef4a9e42c48fe5059493d93033~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767234567&amp;x-signature=zS2YVnvWQ9AiA4NqwqItPsqJD9Y%3D" alt="ä»é›¶åˆ°ä¸€æ­å»ºSpringCloudå¾®æœåŠ¡ï¼Œä¸€åœºä»£ç ä¸–ç•Œçš„â€œåˆ†å®¶â€å¤§æˆ.png" loading="lazy"/></p>
<p><strong>è°¢è°¢ä½ çœ‹æˆ‘çš„æ–‡ç« ï¼Œæ—¢ç„¶çœ‹åˆ°è¿™é‡Œäº†ï¼Œå¦‚æœè§‰å¾—ä¸é”™ï¼Œéšæ‰‹ç‚¹ä¸ªèµã€è½¬å‘ã€åœ¨çœ‹ä¸‰è¿å§ï¼Œæ„Ÿè°¢æ„Ÿè°¢ã€‚é‚£æˆ‘ä»¬ï¼Œä¸‹æ¬¡å†è§ã€‚</strong></p>
<p>æ‚¨çš„ä¸€é”®ä¸‰è¿ï¼Œæ˜¯æˆ‘æ›´æ–°çš„æœ€å¤§åŠ¨åŠ›ï¼Œè°¢è°¢</p>
<p>å±±æ°´æœ‰ç›¸é€¢ï¼Œæ¥æ—¥çš†å¯æœŸï¼Œè°¢è°¢é˜…è¯»ï¼Œæˆ‘ä»¬å†ä¼š</p>
<p>æˆ‘æ‰‹ä¸­çš„é‡‘ç®æ£’ï¼Œä¸Šèƒ½é€šå¤©ï¼Œä¸‹èƒ½æ¢æµ·</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä» 0 æ­å»º React å¾…åŠåº”ç”¨ï¼šçŠ¶æ€ç®¡ç†ã€å‰¯ä½œç”¨ä¸åŒå‘ç»‘å®šæ¨¡æ‹Ÿ]]></title>    <link>https://juejin.cn/post/7587265840066183174</link>    <guid>https://juejin.cn/post/7587265840066183174</guid>    <pubDate>2025-12-24T16:01:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587265840066183174" data-draft-id="7587265840066084870" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä» 0 æ­å»º React å¾…åŠåº”ç”¨ï¼šçŠ¶æ€ç®¡ç†ã€å‰¯ä½œç”¨ä¸åŒå‘ç»‘å®šæ¨¡æ‹Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,React.js,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-24T16:01:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="T___T"/> <meta itemprop="url" content="https://juejin.cn/user/1599155645973066"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä» 0 æ­å»º React å¾…åŠåº”ç”¨ï¼šçŠ¶æ€ç®¡ç†ã€å‰¯ä½œç”¨ä¸åŒå‘ç»‘å®šæ¨¡æ‹Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1599155645973066/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    T___T
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-24T16:01:02.000Z" title="Wed Dec 24 2025 16:01:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>React ä½œä¸ºå‰ç«¯ä¸»æµæ¡†æ¶ï¼Œå…¶<code>å•å‘æ•°æ®æµ</code> <code>ç»„ä»¶åŒ–</code> <code>çŠ¶æ€é©±åŠ¨è§†å›¾</code>çš„è®¾è®¡ç†å¿µï¼Œçœ‹ä¼¼æŠ½è±¡å´èƒ½é€šè¿‡ä¸€ä¸ªç®€å•çš„ TodoList æ¡ˆä¾‹å½»åº•åƒé€ã€‚æœ¬æ–‡ä¸åªæ˜¯ â€œè§£é‡Šä»£ç â€ï¼Œè€Œæ˜¯ä»<strong>è®¾è®¡åˆè¡·ã€åº•å±‚é€»è¾‘ã€å®é™…ä»·å€¼</strong>ä¸‰ä¸ªç»´åº¦ï¼Œæ‹†è§£Â <code>useState</code>Â <code>useEffect</code>ã€å—æ§ç»„ä»¶æ¨¡æ‹ŸåŒå‘ç»‘å®šã€çˆ¶å­é€šä¿¡ç­‰æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼Œè®©ä½ ä¸ä»… â€œä¼šç”¨â€ï¼Œæ›´ â€œæ‡‚ä¸ºä»€ä¹ˆè¿™ä¹ˆç”¨â€ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æ¡ˆä¾‹æ•´ä½“æ¶æ„ï¼šå…ˆæ‡‚ â€œæ‹†åˆ†é€»è¾‘â€ï¼Œå†çœ‹ â€œä»£ç ç»†èŠ‚â€</h2>
<p>åœ¨åŠ¨æ‰‹å†™ä»£ç å‰ï¼ŒReact å¼€å‘çš„ç¬¬ä¸€æ­¥æ˜¯<code>ç»„ä»¶æ‹†åˆ†</code>â€”â€” éµå¾ªå•ä¸€èŒè´£åŸåˆ™ï¼ŒæŠŠå¤æ‚é¡µé¢æ‹†æˆç‹¬ç«‹ã€å¯å¤ç”¨çš„å°ç»„ä»¶ï¼Œè¿™æ˜¯ React ç»„ä»¶åŒ–æ€æƒ³çš„æ ¸å¿ƒã€‚</p>
<p>æœ¬æ¬¡ TodoList çš„ç»„ä»¶æ‹†åˆ†å¦‚ä¸‹ï¼š</p>






























<table><thead><tr><th>ç»„ä»¶å</th><th>æ ¸å¿ƒèŒè´£</th><th>æ ¸å¿ƒäº¤äº’</th></tr></thead><tbody><tr><td>Appï¼ˆæ ¹ç»„ä»¶ï¼‰</td><td>å…¨å±€çŠ¶æ€ç®¡ç† + æ ¸å¿ƒé€»è¾‘å°è£…</td><td>å®šä¹‰æ–°å¢ / åˆ é™¤ / åˆ‡æ¢å¾…åŠã€æ•°æ®æŒä¹…åŒ–ç­‰æ–¹æ³•</td></tr><tr><td>TodoInput</td><td>å¾…åŠè¾“å…¥ + æäº¤</td><td>æ”¶é›†ç”¨æˆ·è¾“å…¥ï¼Œè§¦å‘ â€œæ–°å¢å¾…åŠâ€ é€»è¾‘</td></tr><tr><td>TodoList</td><td>å¾…åŠåˆ—è¡¨æ¸²æŸ“</td><td>å±•ç¤ºå¾…åŠé¡¹ï¼Œè½¬å‘ â€œåˆ é™¤ / åˆ‡æ¢å®ŒæˆçŠ¶æ€â€ äº‹ä»¶</td></tr><tr><td>TodoStats</td><td>å¾…åŠæ•°æ®ç»Ÿè®¡</td><td>å±•ç¤ºæ€»æ•° / å·²å®Œæˆ / æœªå®Œæˆæ•°ï¼Œè§¦å‘ â€œæ¸…é™¤å·²å®Œæˆâ€ é€»è¾‘</td></tr></tbody></table>
<p>è¿™ç§æ‹†åˆ†çš„æ ¸å¿ƒä»·å€¼ï¼š<strong>æ¯ä¸ªç»„ä»¶åªåšä¸€ä»¶äº‹ï¼Œä¾¿äºç»´æŠ¤ã€å¤ç”¨å’Œè°ƒè¯•</strong>ï¼ˆæ¯”å¦‚åç»­æƒ³æ”¹è¾“å…¥æ¡†æ ·å¼ï¼ŒåªåŠ¨ TodoInput å³å¯ï¼Œä¸å½±å“åˆ—è¡¨å’Œç»Ÿè®¡é€»è¾‘ï¼‰ã€‚</p>
<h2 data-id="heading-1">äºŒã€æ ¸å¿ƒ API æ·±åº¦æ‹†è§£ï¼šä¸æ­¢ â€œä¼šç”¨â€ï¼Œæ›´æ‡‚ â€œä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡â€</h2>
<h3 data-id="heading-2">1. useStateï¼šReact çŠ¶æ€ç®¡ç†çš„ â€œçµé­‚â€</h3>
<p>React ä¸­æ‰€æœ‰<strong>å¯å˜æ•°æ®</strong>éƒ½å¿…é¡»é€šè¿‡**çŠ¶æ€ï¼ˆStateï¼‰**ç®¡ç†ï¼Œè€ŒÂ <code>useState</code>Â æ˜¯æœ€åŸºç¡€ã€æœ€æ ¸å¿ƒçš„çŠ¶æ€é’©å­ â€”â€” å®ƒè§£å†³äº† â€œå‡½æ•°ç»„ä»¶æ— æ³•æ‹¥æœ‰è‡ªèº«çŠ¶æ€â€ çš„é—®é¢˜ï¼Œä¹Ÿæ˜¯ â€œçŠ¶æ€é©±åŠ¨è§†å›¾â€ çš„æ ¸å¿ƒè½½ä½“ã€‚</p>
<h4 data-id="heading-3">ï¼ˆ1ï¼‰åŸºç¡€åŸç†ï¼šä¸ºä»€ä¹ˆéœ€è¦ useStateï¼Ÿ</h4>
<p>çº¯å‡½æ•°ç»„ä»¶æœ¬èº«æ˜¯ â€œæ— çŠ¶æ€â€ çš„ï¼ˆæ‰§è¡Œå®Œå°±é”€æ¯ï¼Œæ— æ³•ä¿å­˜æ•°æ®ï¼‰ï¼Œè€Œç”¨æˆ·äº¤äº’ï¼ˆæ¯”å¦‚è¾“å…¥å¾…åŠã€åˆ‡æ¢å®ŒæˆçŠ¶æ€ï¼‰å¿…ç„¶éœ€è¦ â€œä¿å­˜å¯å˜æ•°æ®â€ã€‚<code>useState</code>Â æœ¬è´¨æ˜¯ç»™å‡½æ•°ç»„ä»¶æä¾›äº†æŒä¹…åŒ–çš„çŠ¶æ€å­˜å‚¨ç©ºé—´ï¼Œä¸”è¿™ä¸ªå­˜å‚¨ç©ºé—´å’Œç»„ä»¶æ¸²æŸ“å‘¨æœŸç»‘å®šï¼š</p>
<ul>
<li>çŠ¶æ€æ›´æ–° â†’ ç»„ä»¶é‡æ–°æ¸²æŸ“ â†’ è§†å›¾åŒæ­¥æ›´æ–°ï¼›</li>
<li>çŠ¶æ€ä¸æ›´æ–° â†’ ç»„ä»¶ä¸ä¼šé‡å¤æ¸²æŸ“ï¼Œä¿è¯æ€§èƒ½ã€‚</li>
</ul>
<h4 data-id="heading-4">ï¼ˆ2ï¼‰ä¸¤ç§åˆå§‹åŒ–æ–¹å¼ï¼šæ™®é€šåˆå§‹åŒ– vs æƒ°æ€§åˆå§‹åŒ–</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// æ–¹å¼1ï¼šæ™®é€šåˆå§‹åŒ–ï¼ˆé€‚åˆç®€å•ã€æ— è®¡ç®—çš„åˆå§‹å€¼ï¼‰</span>
<span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

<span class="hljs-comment">// æ–¹å¼2ï¼šæƒ°æ€§åˆå§‹åŒ–ï¼ˆé‡ç‚¹ï¼ TodoList ä¸­ç”¨çš„å°±æ˜¯è¿™ç§ï¼‰</span>
<span class="hljs-keyword">const</span> [todos, setTodos] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> saved = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'todos'</span>);
  <span class="hljs-keyword">return</span> saved ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(saved) : [];
});
</code></pre>
<p><strong>å…³é”®åŒºåˆ«ä¸è®¾è®¡åˆè¡·</strong>ï¼š</p>
<ul>
<li>æ™®é€šåˆå§‹åŒ–ï¼š<code>useState(åˆå§‹å€¼)</code>Â ä¸­ï¼Œåˆå§‹å€¼è¡¨è¾¾å¼ä¼šåœ¨<strong>ç»„ä»¶æ¯æ¬¡æ¸²æŸ“</strong>æ—¶éƒ½æ‰§è¡Œï¼ˆå“ªæ€•çŠ¶æ€æ²¡å˜åŒ–ï¼‰ï¼›</li>
<li>æƒ°æ€§åˆå§‹åŒ–ï¼š<code>useState(() =&gt; { ... })</code>Â ä¸­ï¼Œä¼ å…¥çš„å‡½æ•°ä»…åœ¨**ç»„ä»¶é¦–æ¬¡æ¸²æŸ“*æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œåç»­æ¸²æŸ“ä¸ä¼šå†è·‘ã€‚</li>
</ul>
<p>TodoList ä¸­ç”¨æƒ°æ€§åˆå§‹åŒ–çš„æ ¸å¿ƒåŸå› ï¼š<code>localStorage.getItem('todos')</code>Â æ˜¯æµè§ˆå™¨æœ¬åœ°è¯»å–æ“ä½œï¼Œè™½ç„¶å¼€é”€å°ï¼Œä½†å¦‚æœæ”¾åœ¨æ™®é€šåˆå§‹åŒ–é‡Œï¼Œæ¯æ¬¡ç»„ä»¶æ¸²æŸ“ï¼ˆæ¯”å¦‚æ–°å¢ / åˆ é™¤å¾…åŠï¼‰éƒ½ä¼šé‡å¤è¯»å–æœ¬åœ°å­˜å‚¨ï¼Œå®Œå…¨æ²¡å¿…è¦ï¼›è€Œæƒ°æ€§åˆå§‹åŒ–åªæ‰§è¡Œä¸€æ¬¡ï¼Œæ—¢æ‹¿åˆ°äº†åˆå§‹æ•°æ®ï¼Œåˆé¿å…äº†æ€§èƒ½æµªè´¹ â€”â€” è¿™æ˜¯ React æ€§èƒ½ä¼˜åŒ–çš„ â€œå°ç»†èŠ‚â€ï¼Œä¹Ÿæ˜¯ç†è§£Â <code>useState</code>Â è®¾è®¡çš„å…³é”®ã€‚</p>
<h4 data-id="heading-5">ï¼ˆ3ï¼‰çŠ¶æ€æ›´æ–°çš„ â€œä¸å¯å˜åŸåˆ™â€ï¼šä¸ºä»€ä¹ˆå¿…é¡»è¿”å›æ–°å€¼ï¼Ÿ</h4>
<p>React è§„å®šï¼š<strong>çŠ¶æ€æ˜¯åªè¯»çš„ï¼Œä¿®æ”¹çŠ¶æ€å¿…é¡»è¿”å›æ–°å€¼ï¼Œä¸èƒ½ç›´æ¥ä¿®æ”¹åŸçŠ¶æ€</strong>ã€‚æ¯”å¦‚è¿™é‡Œçš„ â€œæ–°å¢å¾…åŠâ€ é€»è¾‘ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">addTodo</span> = (<span class="hljs-params">text</span>) =&gt; {
  <span class="hljs-comment">// é”™è¯¯å†™æ³•ï¼šç›´æ¥ä¿®æ”¹åŸæ•°ç»„ï¼ˆReact æ— æ³•æ£€æµ‹åˆ°çŠ¶æ€å˜åŒ–ï¼Œè§†å›¾ä¸æ›´æ–°ï¼‰</span>
  <span class="hljs-comment">// todos.push({ id: Date.now(), text, completed: false });</span>
  <span class="hljs-comment">// setTodos(todos);</span>

  <span class="hljs-comment">// æ­£ç¡®å†™æ³•ï¼šè§£æ„åŸæ•°ç»„ + æ–°å¢é¡¹ï¼Œè¿”å›æ–°æ•°ç»„</span>
  <span class="hljs-title function_">setTodos</span>([...todos, {
    <span class="hljs-attr">id</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
    text,
    <span class="hljs-attr">completed</span>: <span class="hljs-literal">false</span>
  }]);
};
</code></pre>
<p><strong>åº•å±‚é€»è¾‘</strong>ï¼šReact åˆ¤æ–­çŠ¶æ€æ˜¯å¦å˜åŒ–çš„ä¾æ®æ˜¯<strong>å¼•ç”¨æ˜¯å¦æ”¹å˜</strong>ã€‚æ•°ç»„ / å¯¹è±¡æ˜¯å¼•ç”¨ç±»å‹ï¼Œç›´æ¥ä¿®æ”¹åŸæ•°ç»„ï¼ˆ<code>todos.push</code>ï¼‰ï¼Œæ•°ç»„çš„å¼•ç”¨æ²¡å˜åŒ–ï¼ŒReact ä¼šè®¤ä¸º â€œçŠ¶æ€æ²¡æ”¹â€ï¼Œå› æ­¤ä¸ä¼šè§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼›è€Œé€šè¿‡Â <code>[...todos]</code>Â è§£æ„ç”Ÿæˆæ–°æ•°ç»„ï¼Œå¼•ç”¨å˜äº†ï¼ŒReact æ‰èƒ½æ£€æµ‹åˆ°çŠ¶æ€å˜åŒ–ï¼Œè¿›è€Œæ›´æ–°è§†å›¾ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯ React â€œå•å‘æ•°æ®æµâ€ çš„æ ¸å¿ƒä½“ç°ï¼šçŠ¶æ€æ›´æ–°æ˜¯ â€œä¸å¯å˜â€ çš„ï¼Œæ¯ä¸€æ¬¡çŠ¶æ€å˜åŒ–éƒ½ä¼šç”Ÿæˆæ–°å€¼ï¼Œä¾¿äºè¿½è¸ªæ•°æ®æµè½¬ï¼ˆæ¯”å¦‚è°ƒè¯•æ—¶èƒ½æ¸…æ™°çœ‹åˆ°æ¯æ¬¡çŠ¶æ€æ›´æ–°çš„å‰åå€¼ï¼‰ã€‚</p>
<h3 data-id="heading-6">2. useEffectï¼šå‰¯ä½œç”¨å¤„ç†çš„ â€œä¸“å±ç®¡å®¶â€</h3>
<p>React ç»„ä»¶çš„æ ¸å¿ƒèŒè´£æ˜¯<strong>æ ¹æ®çŠ¶æ€æ¸²æŸ“è§†å›¾</strong>ï¼Œè€Œåƒ â€œè¯»å–æœ¬åœ°å­˜å‚¨ã€å‘é€ç½‘ç»œè¯·æ±‚ã€ç»‘å®šäº‹ä»¶ç›‘å¬ã€ä¿®æ”¹ DOMâ€ è¿™ç±»ä¸ç›´æ¥å‚ä¸æ¸²æŸ“ï¼Œä½†åˆå¿…é¡»æ‰§è¡Œçš„æ“ä½œï¼Œç»Ÿç§°ä¸º â€œå‰¯ä½œç”¨ï¼ˆSide Effectï¼‰â€ã€‚<code>useEffect</code>Â æ˜¯ React ä¸“é—¨ä¸ºå¤„ç†å‰¯ä½œç”¨è®¾è®¡çš„é’©å­ï¼Œæ›¿ä»£äº†ç±»ç»„ä»¶ä¸­Â <code>componentDidMount</code>Â <code>componentDidUpdate</code>Â <code>componentWillUnmount</code>Â ç­‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œä¸”é€»è¾‘æ›´é›†ä¸­ã€‚</p>
<h4 data-id="heading-7">ï¼ˆ1ï¼‰æ ¸å¿ƒè¯­æ³•ä¸æ‰§è¡Œæœºåˆ¶</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// å‰¯ä½œç”¨é€»è¾‘ï¼šæ¯”å¦‚ä¿å­˜æ•°æ®åˆ°æœ¬åœ°å­˜å‚¨</span>
  <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'todos'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(todos));

  <span class="hljs-comment">// å¯é€‰çš„æ¸…ç†å‡½æ•°ï¼ˆæ¯”å¦‚å–æ¶ˆäº‹ä»¶ç›‘å¬ã€æ¸…é™¤å®šæ—¶å™¨ï¼‰</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// ç»„ä»¶å¸è½½/ä¾èµ–å˜åŒ–å‰æ‰§è¡Œ</span>
  };
}, [todos]); <span class="hljs-comment">// ä¾èµ–æ•°ç»„ï¼šå†³å®šå‰¯ä½œç”¨çš„æ‰§è¡Œæ—¶æœº</span>
</code></pre>
<p><strong>æ‰§è¡Œæ—¶æœºçš„æ·±åº¦è§£æ</strong>ï¼š</p>
<ul>
<li>ä¾èµ–æ•°ç»„ä¸ºç©ºÂ <code>[]</code>ï¼šä»…åœ¨ç»„ä»¶<strong>é¦–æ¬¡æ¸²æŸ“å®Œæˆå</strong>æ‰§è¡Œä¸€æ¬¡ï¼ˆå¯¹åº”ç±»ç»„ä»¶Â <code>componentDidMount</code>ï¼‰ï¼›</li>
<li>ä¾èµ–æ•°ç»„æœ‰å€¼Â <code>[todos]</code>ï¼šç»„ä»¶é¦–æ¬¡æ¸²æŸ“æ‰§è¡Œ + æ¯æ¬¡ä¾èµ–é¡¹ï¼ˆtodosï¼‰å˜åŒ–åæ‰§è¡Œï¼ˆå¯¹åº”Â <code>componentDidMount + componentDidUpdate</code>ï¼‰ï¼›</li>
<li>æ— ä¾èµ–æ•°ç»„ï¼šç»„ä»¶<strong>æ¯æ¬¡æ¸²æŸ“å®Œæˆå</strong>éƒ½æ‰§è¡Œï¼ˆæå°‘ç”¨ï¼Œæ˜“å¯¼è‡´æ€§èƒ½é—®é¢˜ï¼‰ï¼›</li>
<li>æ¸…ç†å‡½æ•°ï¼šç»„ä»¶å¸è½½å‰ / ä¸‹ä¸€æ¬¡å‰¯ä½œç”¨æ‰§è¡Œå‰è§¦å‘ï¼ˆæ¯”å¦‚ç›‘å¬çª—å£å¤§å°å˜åŒ–åï¼Œå¸è½½ç»„ä»¶æ—¶è¦å–æ¶ˆç›‘å¬ï¼Œé¿å…å†…å­˜æ³„æ¼ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-8">ï¼ˆ2ï¼‰åœ¨ TodoList ä¸­çš„æ ¸å¿ƒåº”ç”¨ï¼šæ•°æ®æŒä¹…åŒ–</h4>
<p>ä»£ç ä¸­ï¼Œ<code>useEffect</code>Â ç”¨æ¥å°† todos åŒæ­¥åˆ° localStorageï¼Œè¿™æ˜¯å‰ç«¯ â€œæ•°æ®æŒä¹…åŒ–â€ çš„ç»å…¸åœºæ™¯ï¼Œæˆ‘ä»¬æ‹†è§£å…¶ä»·å€¼ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'todos'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(todos));
}, [todos]);
</code></pre>
<ul>
<li><strong>ä¸ºä»€ä¹ˆ localStorage åªèƒ½å­˜å­—ç¬¦ä¸²ï¼Ÿ</strong> localStorage æ˜¯æµè§ˆå™¨æä¾›çš„æœ¬åœ°å­˜å‚¨ APIï¼Œå…¶åº•å±‚è®¾è®¡åªæ”¯æŒ<strong>å­—ç¬¦ä¸²é”®å€¼å¯¹</strong>å­˜å‚¨ï¼Œå› æ­¤å­˜å‚¨æ•°ç»„ / å¯¹è±¡æ—¶ï¼Œå¿…é¡»ç”¨Â <code>JSON.stringify</code>Â è½¬ä¸ºå­—ç¬¦ä¸²ï¼›è¯»å–æ—¶ç”¨Â <code>JSON.parse</code>Â è½¬å›åŸæ•°æ®ç±»å‹ï¼Œè¿™æ˜¯å‰ç«¯æœ¬åœ°å­˜å‚¨çš„é€šç”¨è§„åˆ™ã€‚</li>
</ul>
<h4 data-id="heading-9">ï¼ˆ3ï¼‰useEffect åœ¨è¿™é‡Œçš„æ ¸å¿ƒä»·å€¼ï¼ˆä¸ºä»€ä¹ˆéå®ƒä¸å¯ï¼‰</h4>
<h5 data-id="heading-10">1. ç²¾å‡†è§¦å‘ï¼šåªåœ¨éœ€è¦æ—¶æ‰§è¡Œï¼Œä¿è¯æ€§èƒ½</h5>
<p><code>useEffect</code>Â çš„ç¬¬äºŒä¸ªå‚æ•°ï¼ˆä¾èµ–æ•°ç»„Â <code>[todos]</code>ï¼‰æ˜¯å…³é”®ï¼š</p>
<ul>
<li>ç»„ä»¶é¦–æ¬¡æ¸²æŸ“æ—¶ï¼Œæ‰§è¡Œä¸€æ¬¡ï¼ˆæŠŠåˆå§‹çš„Â <code>todos</code>Â ä¿å­˜åˆ°æœ¬åœ°ï¼‰ï¼›</li>
<li>åªæœ‰Â <code>todos</code>Â å‘ç”Ÿ<strong>å®é™…å˜åŒ–</strong>æ—¶ï¼Œæ‰ä¼šå†æ¬¡æ‰§è¡Œï¼ˆæ–°å¢ / åˆ é™¤ / åˆ‡æ¢çŠ¶æ€ / æ¸…é™¤å·²å®Œæˆï¼Œåªè¦Â <code>todos</code>Â å˜äº†ï¼Œå°±åŒæ­¥ä¿å­˜ï¼‰ï¼›</li>
<li><code>todos</code>Â æ²¡å˜åŒ–æ—¶ï¼ˆæ¯”å¦‚ç»„ä»¶å› å…¶ä»–çŠ¶æ€é‡æ–°æ¸²æŸ“ï¼‰ï¼Œå®Œå…¨ä¸æ‰§è¡Œï¼Œé¿å…æ— æ•ˆæ“ä½œã€‚</li>
</ul>
<p>å¯¹æ¯” â€œå†™åœ¨ç»„ä»¶é¡¶å±‚â€ çš„æ— å·®åˆ«æ‰§è¡Œï¼Œ<code>useEffect</code>Â å®ç°äº† â€œæŒ‰éœ€æ‰§è¡Œâ€ï¼Œæ—¢ä¿è¯æ•°æ®åŒæ­¥ï¼Œåˆä¸æµªè´¹æ€§èƒ½ã€‚</p>
<h5 data-id="heading-11">2. æ—¶æœºæ­£ç¡®ï¼šæ‹¿åˆ°æœ€æ–°çš„çŠ¶æ€ï¼Œé¿å…æ•°æ®ä¸ä¸€è‡´</h5>
<p><code>useEffect</code>Â çš„æ‰§è¡Œæ—¶æœºæ˜¯ã€Œç»„ä»¶æ¸²æŸ“å®Œæˆåã€â€”â€” ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“Â <code>useEffect</code>Â é‡Œçš„ä»£ç æ‰§è¡Œæ—¶ï¼Œ<code>setTodos</code>Â å·²ç»å®Œæˆäº†çŠ¶æ€æ›´æ–°ï¼Œ<code>todos</code>Â ä¸€å®šæ˜¯æœ€æ–°çš„ã€‚</p>
<p>æ¯”å¦‚æ–°å¢å¾…åŠæ—¶ï¼š</p>
<ol>
<li>è°ƒç”¨Â <code>addTodo</code>Â â†’ æ‰§è¡ŒÂ <code>setTodos</code>Â â†’ ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼ˆ<code>todos</code>Â å˜ä¸ºæ–°å€¼ï¼‰ï¼›</li>
<li>æ¸²æŸ“å®Œæˆåï¼Œ<code>useEffect</code>Â æ£€æµ‹åˆ°Â <code>todos</code>Â å˜åŒ– â†’ æ‰§è¡Œä¿å­˜é€»è¾‘ â†’ æ‹¿åˆ°çš„æ˜¯æœ€æ–°çš„Â <code>todos</code>ã€‚</li>
</ol>
<p>è¿™å°±é¿å…äº† â€œå¼‚æ­¥æ›´æ–°å¯¼è‡´ä¿å­˜æ—§å€¼â€ çš„é—®é¢˜ï¼Œä¿è¯æœ¬åœ°å­˜å‚¨çš„æ•°æ®å’Œç»„ä»¶çŠ¶æ€å®Œå…¨ä¸€è‡´ã€‚</p>
<h5 data-id="heading-12">3. é€»è¾‘èšåˆï¼šä¸€å¤„ç›‘å¬ï¼Œå…¨åœºæ™¯ç”Ÿæ•ˆ</h5>
<p>ä¸ç®¡æ˜¯æ–°å¢ã€åˆ é™¤ã€åˆ‡æ¢çŠ¶æ€ã€æ¸…é™¤å·²å®Œæˆï¼Œåªè¦æœ€ç»ˆå¯¼è‡´Â <code>todos</code>Â å˜åŒ–ï¼Œ<code>useEffect</code>Â éƒ½ä¼šè‡ªåŠ¨è§¦å‘ä¿å­˜ â€”â€” æ— éœ€åœ¨æ¯ä¸ªä¿®æ”¹Â <code>todos</code>Â çš„å‡½æ•°é‡Œé‡å¤å†™ä¿å­˜é€»è¾‘ï¼Œä»£ç ç®€æ´ã€æ˜“ç»´æŠ¤ï¼Œåç»­æ–°å¢ä¿®æ”¹Â <code>todos</code>Â çš„é€»è¾‘ï¼ˆæ¯”å¦‚æ‰¹é‡ä¿®æ”¹ï¼‰ï¼Œå®Œå…¨ä¸ç”¨åŠ¨ä¿å­˜ä»£ç ï¼Œå¤©ç„¶ç¬¦åˆ â€œå¼€é—­åŸåˆ™â€ã€‚</p>
<h4 data-id="heading-13">ï¼ˆ4ï¼‰useEffect çš„è®¾è®¡ä»·å€¼ï¼šåˆ†ç¦» â€œæ¸²æŸ“é€»è¾‘â€ ä¸ â€œå‰¯ä½œç”¨é€»è¾‘â€</h4>
<p>React è¿½æ±‚ â€œç»„ä»¶æ ¸å¿ƒé€»è¾‘çº¯å‡€â€â€”â€” ç»„ä»¶é¡¶å±‚åªå…³æ³¨ â€œæ ¹æ®çŠ¶æ€æ¸²æŸ“ä»€ä¹ˆâ€ï¼Œå‰¯ä½œç”¨å…¨éƒ¨äº¤ç»™Â <code>useEffect</code>Â å¤„ç†ï¼Œè¿™æ ·ï¼š</p>
<ul>
<li>ä»£ç ç»“æ„æ›´æ¸…æ™°ï¼šæ¸²æŸ“å’Œå‰¯ä½œç”¨åˆ†ç¦»ï¼Œä¸€çœ¼èƒ½åŒºåˆ† â€œè§†å›¾ç›¸å…³â€ å’Œ â€œéè§†å›¾ç›¸å…³â€ é€»è¾‘ï¼›</li>
<li>ä¾¿äºè°ƒè¯•ï¼šå‰¯ä½œç”¨çš„æ‰§è¡Œæ—¶æœºç”±ä¾èµ–æ•°ç»„æ˜ç¡®æ§åˆ¶ï¼Œèƒ½ç²¾å‡†å®šä½ â€œä»€ä¹ˆæ—¶å€™æ‰§è¡Œã€ä¸ºä»€ä¹ˆæ‰§è¡Œâ€ï¼›</li>
<li>é¿å…å†…å­˜æ³„æ¼ï¼šé€šè¿‡æ¸…ç†å‡½æ•°å¯ä¼˜é›…å¤„ç† â€œç»„ä»¶å¸è½½åä»æ‰§è¡Œå‰¯ä½œç”¨â€ çš„é—®é¢˜ï¼ˆæ¯”å¦‚è¯·æ±‚æ•°æ®æ—¶ç»„ä»¶å¸è½½äº†ï¼Œæ¸…ç†å‡½æ•°å¯å–æ¶ˆè¯·æ±‚ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-14">3. å—æ§ç»„ä»¶ï¼šæ¨¡æ‹ŸåŒå‘ç»‘å®šçš„åº•å±‚é€»è¾‘</h3>
<p>Vue ä¸­ç”¨Â <code>v-model</code>Â å°±èƒ½å®ç° â€œè¡¨å•å€¼ â†” æ•°æ®â€ çš„åŒå‘ç»‘å®šï¼Œä½† React æ²¡æœ‰å†…ç½®çš„åŒå‘ç»‘å®šè¯­æ³• â€”â€” ä¸æ˜¯ â€œåšä¸åˆ°â€ï¼Œè€Œæ˜¯ React åšæŒ<code>å•å‘æ•°æ®æµ</code>ï¼Œé€šè¿‡ â€œå—æ§ç»„ä»¶â€ æ‰‹åŠ¨æ¨¡æ‹ŸåŒå‘ç»‘å®šï¼Œè™½ç„¶ä»£ç å¤šäº†å‡ è¡Œï¼Œä½†èƒ½å®Œå…¨æŒæ§æ•°æ®æµè½¬ã€‚</p>
<h4 data-id="heading-15">ï¼ˆ1ï¼‰åŒå‘ç»‘å®šçš„æœ¬è´¨ï¼šè§†å›¾ â†” æ•°æ®åŒæ­¥</h4>
<p>ä¸ç®¡æ˜¯ Vue çš„Â <code>v-model</code>Â è¿˜æ˜¯ React çš„å—æ§ç»„ä»¶ï¼ŒåŒå‘ç»‘å®šçš„æ ¸å¿ƒæ˜¯ä¸¤ä»¶äº‹ï¼š</p>
<ol>
<li><strong>æ•°æ® â†’ è§†å›¾</strong>ï¼šæ•°æ®ï¼ˆçŠ¶æ€ï¼‰å˜åŒ–ï¼Œè§†å›¾ï¼ˆè¾“å…¥æ¡†ï¼‰è‡ªåŠ¨æ›´æ–°ï¼›</li>
<li><strong>è§†å›¾ â†’ æ•°æ®</strong>ï¼šè§†å›¾ï¼ˆç”¨æˆ·è¾“å…¥ï¼‰å˜åŒ–ï¼Œæ•°æ®ï¼ˆçŠ¶æ€ï¼‰è‡ªåŠ¨æ›´æ–°ã€‚</li>
</ol>
<h4 data-id="heading-16">ï¼ˆ2ï¼‰React å—æ§ç»„ä»¶çš„å®ç°ï¼šæ‹†è§£æ¯ä¸€æ­¥</h4>
<p>ä»¥ TodoInput ç»„ä»¶ä¸ºä¾‹ï¼Œé€è¡Œè§£æåŒå‘ç»‘å®šçš„å®ç°é€»è¾‘ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">TodoInput</span> = (<span class="hljs-params">{ onAdd }</span>) =&gt; {
  <span class="hljs-comment">// æ­¥éª¤1ï¼šå®šä¹‰çŠ¶æ€å­˜å‚¨è¾“å…¥æ¡†å€¼ï¼ˆæ•°æ®å±‚ï¼‰</span>
  <span class="hljs-keyword">const</span> [inputValue, setInputValue] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);

  <span class="hljs-comment">// æ­¥éª¤2ï¼šå¤„ç†è¡¨å•æäº¤</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = (<span class="hljs-params">e</span>) =&gt; {
    <span class="hljs-comment">// å…³é”®ï¼šé˜»æ­¢è¡¨å•é»˜è®¤æäº¤è¡Œä¸º</span>
    e.<span class="hljs-title function_">preventDefault</span>();
    <span class="hljs-comment">// è¾“å…¥å†…å®¹æ ¡éªŒï¼šå»é™¤é¦–å°¾ç©ºæ ¼ï¼Œé¿å…ç©ºæäº¤</span>
    <span class="hljs-keyword">const</span> text = inputValue.<span class="hljs-title function_">trim</span>();
    <span class="hljs-keyword">if</span> (!text) <span class="hljs-keyword">return</span>;
    <span class="hljs-comment">// æ­¥éª¤3ï¼šå°†è¾“å…¥å†…å®¹ä¼ ç»™çˆ¶ç»„ä»¶ï¼ˆçˆ¶å­é€šä¿¡ï¼‰</span>
    <span class="hljs-title function_">onAdd</span>(text);
    <span class="hljs-comment">// æ­¥éª¤4ï¼šæ¸…ç©ºè¾“å…¥æ¡†ï¼ˆä¿®æ”¹çŠ¶æ€ â†’ è§†å›¾æ¸…ç©ºï¼‰</span>
    <span class="hljs-title function_">setInputValue</span>(<span class="hljs-string">''</span>);
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>
        // <span class="hljs-attr">æ ¸å¿ƒ1</span>ï¼š<span class="hljs-attr">æ•°æ®</span> â†’ <span class="hljs-attr">è§†å›¾</span>ï¼ˆ<span class="hljs-attr">çŠ¶æ€æ§åˆ¶è¾“å…¥æ¡†æ˜¾ç¤º</span>ï¼‰
        <span class="hljs-attr">value</span>=<span class="hljs-string">{inputValue}</span>
        // <span class="hljs-attr">æ ¸å¿ƒ2</span>ï¼š<span class="hljs-attr">è§†å›¾</span> â†’ <span class="hljs-attr">æ•°æ®</span>ï¼ˆ<span class="hljs-attr">è¾“å…¥å˜åŒ–åŒæ­¥æ›´æ–°çŠ¶æ€</span>ï¼‰
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setInputValue(e.target.value)}
        placeholder="è¯·è¾“å…¥å¾…åŠäº‹é¡¹..."
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>Add<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
  );
};
</code></pre>
<p><strong>é€ç‚¹æ·±åº¦è§£æ</strong>ï¼š</p>
<ul>
<li><strong>æ•°æ® â†’ è§†å›¾</strong>ï¼š<code>value={inputValue}</code>Â æ˜¯ â€œå•å‘ç»‘å®šâ€ çš„æ ¸å¿ƒ â€”â€” è¾“å…¥æ¡†æ˜¾ç¤ºçš„å†…å®¹å®Œå…¨ç”±Â <code>inputValue</code>Â çŠ¶æ€å†³å®šï¼Œè€Œé DOM è‡ªèº«çš„ valueã€‚æ¯”å¦‚æ‰§è¡ŒÂ <code>setInputValue('')</code>ï¼Œ<code>inputValue</code>Â å˜ä¸ºç©ºï¼Œè¾“å…¥æ¡†å°±ä¼šç«‹åˆ»æ¸…ç©ºï¼Œè¿™æ˜¯ â€œçŠ¶æ€é©±åŠ¨è§†å›¾â€ çš„ä½“ç°ã€‚</li>
<li><strong>è§†å›¾ â†’ æ•°æ®</strong>ï¼š<code>onChange</code>Â äº‹ä»¶ç›‘å¬è¾“å…¥æ¡†çš„æ¯ä¸€æ¬¡å­—ç¬¦å˜åŒ–ï¼Œ<code>e.target.value</code>Â æ˜¯è¾“å…¥æ¡†å½“å‰çš„ DOM å–å€¼ï¼Œé€šè¿‡Â <code>setInputValue</code>Â å°†å…¶åŒæ­¥åˆ°Â <code>inputValue</code>Â çŠ¶æ€ â€”â€” è¿™ä¸€æ­¥æ˜¯ â€œæ‰‹åŠ¨è¡¥å…¨â€ åŒå‘ç»‘å®šçš„åå‘æµç¨‹ï¼Œä¹Ÿæ˜¯ React ä¸ Vue çš„æ ¸å¿ƒåŒºåˆ«ï¼ˆVue æŠŠè¿™ä¸€æ­¥å°è£…æˆäº†Â <code>v-model</code>ï¼ŒReact è®©å¼€å‘è€…æ‰‹åŠ¨æ§åˆ¶ï¼Œæ›´çµæ´»ï¼‰ã€‚</li>
<li><strong>e.preventDefault()</strong> ï¼šè¡¨å•çš„é»˜è®¤è¡Œä¸ºæ˜¯ â€œæäº¤å¹¶åˆ·æ–°é¡µé¢â€ï¼Œè€Œ React æ˜¯å•é¡µåº”ç”¨ï¼Œåˆ·æ–°é¡µé¢ä¼šå¯¼è‡´æ‰€æœ‰çŠ¶æ€ä¸¢å¤±ï¼Œå› æ­¤å¿…é¡»é˜»æ­¢è¿™ä¸ªé»˜è®¤è¡Œä¸º â€”â€” è¿™æ˜¯å‰ç«¯å¼€å‘çš„é€šç”¨çŸ¥è¯†ç‚¹ï¼Œä¹Ÿæ˜¯ React å¤„ç†è¡¨å•çš„ â€œå¿…åšæ­¥éª¤â€ã€‚</li>
<li><strong>ä¸ºä»€ä¹ˆç”¨ form + onSubmit è€Œé button + onClick</strong>é™¤äº†ç‚¹å‡»æŒ‰é’®æäº¤ï¼Œç”¨æˆ·åœ¨è¾“å…¥æ¡†æŒ‰<code>å›è½¦é”®</code>ä¹Ÿèƒ½è§¦å‘Â <code>onSubmit</code>ï¼Œè€Œå•çº¯çš„Â <code>onClick</code>Â æ— æ³•å“åº”å›è½¦æäº¤ï¼Œè¿™æ˜¯<strong>è¯­ä¹‰åŒ– + ç”¨æˆ·ä½“éªŒ</strong>çš„åŒé‡è€ƒé‡ã€‚</li>
</ul>
<h4 data-id="heading-17">ï¼ˆ3ï¼‰å—æ§ç»„ä»¶çš„æ ¸å¿ƒä¼˜åŠ¿ï¼šå®Œå…¨å¯æ§</h4>
<p>ç›¸æ¯” Vue çš„Â <code>v-model</code>Â é»‘ç›’å°è£…ï¼ŒReact å—æ§ç»„ä»¶çš„ â€œæ‰‹åŠ¨æ“ä½œâ€ å¸¦æ¥äº†ä¸¤ä¸ªæ ¸å¿ƒä»·å€¼ï¼š</p>
<ul>
<li><strong>å¯æ ¡éªŒæ€§</strong>ï¼šåœ¨Â <code>onChange</code>Â æˆ–Â <code>handleSubmit</code>Â ä¸­å¯éšæ—¶å¯¹è¾“å…¥å†…å®¹åšæ ¡éªŒï¼ˆæ¯”å¦‚ç¦æ­¢è¾“å…¥ç‰¹æ®Šå­—ç¬¦ã€é™åˆ¶é•¿åº¦ã€å»é™¤ç©ºæ ¼ï¼‰ï¼Œæ¯”å¦‚åœ¨ä»£ç ä¸­Â <code>inputValue.trim()</code>Â å°±æ˜¯ç®€å•çš„æ ¡éªŒï¼Œè‹¥éœ€è¦æ›´å¤æ‚çš„æ ¡éªŒï¼ˆæ¯”å¦‚æ‰‹æœºå·æ ¼å¼ï¼‰ï¼Œå¯ç›´æ¥åœ¨è¿™ä¸€æ­¥å¤„ç†ï¼›</li>
<li><strong>å¯è¿½æº¯æ€§</strong>ï¼šè¾“å…¥æ¡†çš„æ¯ä¸€æ¬¡å€¼å˜åŒ–éƒ½å¿…é¡»é€šè¿‡Â <code>setInputValue</code>Â è§¦å‘ï¼Œåœ¨è°ƒè¯•å·¥å…·ä¸­èƒ½æ¸…æ™°çœ‹åˆ°Â <code>inputValue</code>Â çš„æ¯ä¸€æ¬¡æ›´æ–°è®°å½•ï¼Œä¾¿äºå®šä½ â€œè¾“å…¥å¼‚å¸¸â€ é—®é¢˜ï¼ˆæ¯”å¦‚è¾“å…¥æ¡†å€¼ä¸å˜ï¼Œå¯ç›´æ¥æŸ¥Â <code>setInputValue</code>Â æ˜¯å¦æ‰§è¡Œï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-18">4. çˆ¶å­ç»„ä»¶é€šä¿¡ï¼šå•å‘æ•°æ®æµçš„æè‡´ä½“ç°</h3>
<p>React çš„ â€œå•å‘æ•°æ®æµâ€ ä¸æ˜¯ â€œé™åˆ¶â€ï¼Œè€Œæ˜¯ â€œä¿éšœâ€â€”â€” æ•°æ®åªèƒ½ä»çˆ¶ç»„ä»¶é€šè¿‡ props æµå‘å­ç»„ä»¶ï¼Œå­ç»„ä»¶ä¸èƒ½ç›´æ¥ä¿®æ”¹çˆ¶ç»„ä»¶çš„çŠ¶æ€ï¼Œåªèƒ½é€šè¿‡çˆ¶ç»„ä»¶ä¼ é€’çš„å›è°ƒå‡½æ•° â€œé€šçŸ¥â€ çˆ¶ç»„ä»¶ä¿®æ”¹çŠ¶æ€ã€‚è¿™ç§è®¾è®¡è®©æ•°æ®æµè½¬è·¯å¾„æ¸…æ™°ï¼Œé¿å…äº† â€œå¤šä¸ªç»„ä»¶éšæ„ä¿®æ”¹æ•°æ®å¯¼è‡´çš„æ··ä¹±â€ã€‚</p>
<h4 data-id="heading-19">ï¼ˆ1ï¼‰é€šä¿¡æµç¨‹ï¼šä»¥ â€œæ¸…é™¤å·²å®Œæˆä»»åŠ¡â€ ä¸ºä¾‹</h4>
<ol>
<li><strong>çˆ¶ç»„ä»¶ï¼ˆAppï¼‰</strong> ï¼šå®šä¹‰çŠ¶æ€ä¿®æ”¹é€»è¾‘ + ä¼ é€’å›è°ƒå‡½æ•°</li>
</ol>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// æ­¥éª¤1ï¼šçˆ¶ç»„ä»¶å®šä¹‰ä¿®æ”¹çŠ¶æ€çš„æ ¸å¿ƒé€»è¾‘</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">clearCompleted</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">setTodos</span>(todos.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> !todo.<span class="hljs-property">completed</span>));
};

<span class="hljs-comment">// æ­¥éª¤2ï¼šé€šè¿‡ props å°†å›è°ƒå‡½æ•°ä¼ é€’ç»™å­ç»„ä»¶</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">TodoStats</span> 
  <span class="hljs-attr">total</span>=<span class="hljs-string">{todos.length}</span>
  <span class="hljs-attr">completed</span>=<span class="hljs-string">{completedCount}</span>
  <span class="hljs-attr">active</span>=<span class="hljs-string">{activeCount}</span>
  <span class="hljs-attr">onClearCompleted</span>=<span class="hljs-string">{clearCompleted}</span> // <span class="hljs-attr">ä¼ é€’å›è°ƒ</span>
/&gt;</span></span>
</code></pre>
<ol start="2">
<li><strong>å­ç»„ä»¶ï¼ˆTodoStatsï¼‰</strong> ï¼šæ¥æ”¶å›è°ƒå‡½æ•° + è§¦å‘å›è°ƒ</li>
</ol>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">TodoStats</span> = (<span class="hljs-params">{ total, completed, active, onClearCompleted }</span>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Total: {total}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Completed: {completed}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Active: {active}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      {/* æ¡ä»¶æ¸²æŸ“ï¼šæœ‰å·²å®Œæˆä»»åŠ¡æ‰æ˜¾ç¤ºæŒ‰é’® */}
      {completed &gt; 0 &amp;&amp; (
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClearCompleted}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"clear-btn"</span>&gt;</span>
          æ¸…é™¤å·²å®Œæˆä»»åŠ¡
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p><strong>æ·±åº¦è§£æ</strong>ï¼š</p>
<ul>
<li>å­ç»„ä»¶ TodoStats åªè´Ÿè´£ â€œå±•ç¤ºæ•°æ® + è§¦å‘äº¤äº’â€ï¼Œä¸å…³å¿ƒ â€œæ¸…é™¤å·²å®Œæˆä»»åŠ¡â€ çš„å…·ä½“é€»è¾‘ â€”â€” å“ªæ€•åç»­ä¿®æ”¹æ¸…é™¤é€»è¾‘ï¼ˆæ¯”å¦‚åŠ ç¡®è®¤å¼¹çª—ï¼‰ï¼Œåªéœ€æ”¹çˆ¶ç»„ä»¶çš„Â <code>clearCompleted</code>ï¼Œå­ç»„ä»¶å®Œå…¨ä¸ç”¨åŠ¨ï¼Œç¬¦åˆ â€œå¼€é—­åŸåˆ™â€ã€‚</li>
<li>å›è°ƒå‡½æ•°æ˜¯ â€œå­ç»„ä»¶é€šçŸ¥çˆ¶ç»„ä»¶â€ çš„å”¯ä¸€æ–¹å¼ï¼šå­ç»„ä»¶æ— æ³•ç›´æ¥è®¿é—®çˆ¶ç»„ä»¶çš„Â <code>todos</code>Â çŠ¶æ€ï¼Œä¹Ÿä¸èƒ½ç›´æ¥è°ƒç”¨Â <code>setTodos</code>ï¼Œåªèƒ½é€šè¿‡çˆ¶ç»„ä»¶ä¼ é€’çš„Â <code>onClearCompleted</code>Â å›è°ƒï¼Œè§¦å‘çˆ¶ç»„ä»¶çš„çŠ¶æ€ä¿®æ”¹é€»è¾‘ â€”â€” è¿™å°±æ˜¯ â€œå•å‘æ•°æ®æµâ€ï¼šæ•°æ®å‘ä¸‹ä¼ ï¼ˆçˆ¶â†’å­ï¼‰ï¼Œäº‹ä»¶å‘ä¸Šä¼ ï¼ˆå­â†’çˆ¶ï¼‰ï¼Œæ‰€æœ‰çŠ¶æ€ä¿®æ”¹éƒ½é›†ä¸­åœ¨çˆ¶ç»„ä»¶ï¼Œä¾¿äºè¿½è¸ªå’Œè°ƒè¯•ã€‚</li>
</ul>
<h4 data-id="heading-20">ï¼ˆ2ï¼‰props çš„æœ¬è´¨ï¼šåªè¯»çš„ â€œæ•°æ®æ¡¥æ¢â€ (åé¢ä¼šå•ç‹¬æ¥è®²)</h4>
<p>props æ˜¯çˆ¶å­ç»„ä»¶é€šä¿¡çš„å”¯ä¸€æ¡¥æ¢ï¼Œä½†æœ‰ä¸€ä¸ªæ ¸å¿ƒè§„åˆ™ï¼š<strong>å­ç»„ä»¶ä¸èƒ½ä¿®æ”¹ props</strong>ã€‚æ¯”å¦‚ TodoStats æ¥æ”¶çš„Â <code>completed</code>Â <code>total</code>Â ç­‰ propsï¼Œå­ç»„ä»¶åªèƒ½è¯»å–ï¼Œä¸èƒ½ä¿®æ”¹ â€”â€” å› ä¸º props æ˜¯çˆ¶ç»„ä»¶çŠ¶æ€çš„ â€œå¿«ç…§â€ï¼Œä¿®æ”¹ props ä¼šå¯¼è‡´æ•°æ®æºå¤´æ··ä¹±ï¼ˆæ¯”å¦‚å­ç»„ä»¶æ”¹äº†Â <code>completed</code>ï¼Œçˆ¶ç»„ä»¶çš„Â <code>completedCount</code>Â å´æ²¡å˜åŒ–ï¼Œæ•°æ®ä¸ä¸€è‡´ï¼‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/013869adb5f94edcad2cc7302eb442b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVF9fX1Q=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767196862&amp;x-signature=PcjpbZS3MknSZBObnCXiTfAo50A%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-21">ä¸‰ã€æ ¸å¿ƒè®¾è®¡æ€æƒ³ï¼šä» TodoList çœ‹ React çš„åº•å±‚é€»è¾‘</h2>
<p>é€šè¿‡è¿™ä¸ª TodoList æ¡ˆä¾‹ï¼Œæˆ‘ä»¬èƒ½æç‚¼å‡º React æœ€æ ¸å¿ƒçš„ 4 ä¸ªè®¾è®¡æ€æƒ³ï¼Œè¿™ä¹Ÿæ˜¯ç†è§£ React çš„å…³é”®ï¼š</p>
<h3 data-id="heading-22">1. çŠ¶æ€é©±åŠ¨è§†å›¾</h3>
<p>React ä¸­ â€œè§†å›¾æ˜¯ä»€ä¹ˆæ ·â€ å®Œå…¨ç”± â€œçŠ¶æ€æ˜¯ä»€ä¹ˆæ ·â€ å†³å®šï¼Œæ²¡æœ‰ â€œæ‰‹åŠ¨æ“ä½œ DOMâ€ çš„åœºæ™¯ï¼ˆæ¯”å¦‚ä¸ç”¨Â <code>document.getElementById</code>Â æ”¹è¾“å…¥æ¡†å€¼ï¼Œä¸ç”¨Â <code>appendChild</code>Â åŠ å¾…åŠé¡¹ï¼‰ã€‚æ‰€æœ‰è§†å›¾å˜åŒ–ï¼Œéƒ½æ˜¯å…ˆä¿®æ”¹çŠ¶æ€ï¼Œå†ç”± React è‡ªåŠ¨æ›´æ–° DOMâ€”â€” è¿™é¿å…äº†æ‰‹åŠ¨æ“ä½œ DOM çš„ç¹çå’Œæ˜“å‡ºé”™ï¼Œä¹Ÿè®©ä»£ç æ›´æ˜“ç»´æŠ¤ï¼ˆåªéœ€å…³æ³¨çŠ¶æ€å˜åŒ–ï¼Œä¸ç”¨å…³æ³¨ DOM å˜åŒ–ï¼‰ã€‚</p>
<h3 data-id="heading-23">2. å•å‘æ•°æ®æµ</h3>
<p>æ•°æ®åªæœ‰ä¸€ä¸ªæµå‘ï¼šçˆ¶ç»„ä»¶ â†’ å­ç»„ä»¶ï¼ŒçŠ¶æ€åªæœ‰ä¸€ä¸ªä¿®æ”¹å…¥å£ï¼šå®šä¹‰çŠ¶æ€çš„ç»„ä»¶ï¼ˆæ¯”å¦‚ todos å®šä¹‰åœ¨ Appï¼Œåªæœ‰ App èƒ½æ”¹ï¼Œå­ç»„ä»¶åªèƒ½é€šè¿‡å›è°ƒé€šçŸ¥ App æ”¹ï¼‰ã€‚è¿™ç§è®¾è®¡è®©æ•°æ®æµè½¬ â€œå¯é¢„æµ‹â€â€”â€” ä¸ç®¡é¡¹ç›®å¤šå¤æ‚ï¼Œéƒ½èƒ½é¡ºç€ props æ‰¾åˆ°æ•°æ®çš„æºå¤´ï¼Œé¡ºç€å›è°ƒæ‰¾åˆ°çŠ¶æ€ä¿®æ”¹çš„åœ°æ–¹ã€‚</p>
<h3 data-id="heading-24">3. ç»„ä»¶åŒ–ä¸å•ä¸€èŒè´£</h3>
<p>æ¯ä¸ªç»„ä»¶åªåšä¸€ä»¶äº‹ï¼šTodoInput åªå¤„ç†è¾“å…¥ï¼ŒTodoList åªæ¸²æŸ“åˆ—è¡¨ï¼ŒTodoStats åªå±•ç¤ºç»Ÿè®¡ã€‚è¿™ç§æ‹†åˆ†è®©ç»„ä»¶ â€œé«˜å†…èšã€ä½è€¦åˆâ€ï¼š</p>
<ul>
<li>é«˜å†…èšï¼šç»„ä»¶å†…éƒ¨é€»è¾‘å›´ç»•æ ¸å¿ƒèŒè´£å±•å¼€ï¼Œä¸æºæ‚å…¶ä»–åŠŸèƒ½ï¼›</li>
<li>ä½è€¦åˆï¼šç»„ä»¶ä¹‹é—´é€šè¿‡ props é€šä¿¡ï¼Œä¿®æ”¹ä¸€ä¸ªç»„ä»¶ä¸ä¼šå½±å“å…¶ä»–ç»„ä»¶ã€‚</li>
</ul>
<h3 data-id="heading-25">4. å‰¯ä½œç”¨ä¸æ¸²æŸ“åˆ†ç¦»</h3>
<p><code>useEffect</code>Â å°† â€œå‰¯ä½œç”¨é€»è¾‘â€ï¼ˆæ¯”å¦‚æœ¬åœ°å­˜å‚¨ï¼‰ä¸ â€œæ¸²æŸ“é€»è¾‘â€ï¼ˆæ¯”å¦‚å±•ç¤ºå¾…åŠåˆ—è¡¨ï¼‰åˆ†ç¦»ï¼Œè®©ç»„ä»¶çš„æ ¸å¿ƒé€»è¾‘ï¼ˆæ ¹æ®çŠ¶æ€æ¸²æŸ“è§†å›¾ï¼‰ä¿æŒ â€œçº¯å‡€â€â€”â€” çº¯å‡€çš„ç»„ä»¶é€»è¾‘æ›´æ˜“æµ‹è¯•ã€æ›´æ˜“å¤ç”¨ï¼Œè¿™ä¹Ÿæ˜¯ React æ¨å´‡çš„ â€œå‡½æ•°å¼ç¼–ç¨‹â€ æ€æƒ³çš„ä½“ç°ã€‚</p>
<h2 data-id="heading-26">å››ã€æ€»ç»“ï¼šä» TodoList åˆ° React æ ¸å¿ƒèƒ½åŠ›</h2>
<p>è¿™ä¸ªçœ‹ä¼¼ç®€å•çš„ TodoListï¼Œå®åˆ™æ¶µç›–äº† React æ—¥å¸¸å¼€å‘çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼š</p>
<ul>
<li><code>useState</code>Â å®ç°çŠ¶æ€ç®¡ç†ï¼Œç†è§£ â€œä¸å¯å˜æ›´æ–°â€ å’Œ â€œæƒ°æ€§åˆå§‹åŒ–â€ï¼›</li>
<li><code>useEffect</code>Â å¤„ç†å‰¯ä½œç”¨ï¼Œç†è§£ â€œä¾èµ–æ•°ç»„â€ å’Œ â€œæ•°æ®æŒä¹…åŒ–â€ï¼›</li>
<li>å—æ§ç»„ä»¶æ¨¡æ‹ŸåŒå‘ç»‘å®šï¼Œç†è§£ â€œçŠ¶æ€é©±åŠ¨è§†å›¾â€ å’Œ â€œå•å‘æ•°æ®æµâ€ï¼›</li>
<li>çˆ¶å­ç»„ä»¶é€šä¿¡ï¼Œç†è§£ props çš„ â€œåªè¯»ç‰¹æ€§â€ å’Œå›è°ƒå‡½æ•°çš„ä½œç”¨ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§‚æµ‹äº‘äº§å“æ›´æ–° | åº”ç”¨æ€§èƒ½ç›‘æµ‹ã€ç›‘æ§ã€åœºæ™¯ã€å¿«ç…§ç­‰]]></title>    <link>https://juejin.cn/post/7587261253913395215</link>    <guid>https://juejin.cn/post/7587261253913395215</guid>    <pubDate>2025-12-25T02:58:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587261253913395215" data-draft-id="7587322796825428008" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§‚æµ‹äº‘äº§å“æ›´æ–° | åº”ç”¨æ€§èƒ½ç›‘æµ‹ã€ç›‘æ§ã€åœºæ™¯ã€å¿«ç…§ç­‰"/> <meta itemprop="keywords" content="äº§å“"/> <meta itemprop="datePublished" content="2025-12-25T02:58:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¯è§‚æµ‹æ€§ç”¨è§‚æµ‹äº‘"/> <meta itemprop="url" content="https://juejin.cn/user/2392958212523102"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§‚æµ‹äº‘äº§å“æ›´æ–° | åº”ç”¨æ€§èƒ½ç›‘æµ‹ã€ç›‘æ§ã€åœºæ™¯ã€å¿«ç…§ç­‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2392958212523102/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¯è§‚æµ‹æ€§ç”¨è§‚æµ‹äº‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T02:58:27.000Z" title="Thu Dec 25 2025 02:58:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è§‚æµ‹äº‘æ›´æ–°</h2>
<h3 data-id="heading-1">è§’è‰²æƒé™</h3>
<p>1ã€ä»ªè¡¨æ¿æƒé™ç»†åŒ–ï¼šæ–°å¢ç‹¬ç«‹çš„â€œä»ªè¡¨æ¿æ–°å»ºâ€æƒé™ï¼ŒåŸæœ‰â€œä»ªè¡¨æ¿ç®¡ç†â€æƒé™ä»åŒ…å«æ‰€æœ‰æ“ä½œã€‚åˆ†é…â€œæ–°å»ºâ€æƒé™æ—¶ä¼šè‡ªåŠ¨å¼€å¯ä»ªè¡¨æ¿ã€è§†å›¾åŸºç¡€æŸ¥çœ‹æƒé™ã€‚</p>
<p>2ã€å¯¼èˆªæ æ ¹æ®ç”¨æˆ·çš„æƒé™åŠ¨æ€æ˜¾ç¤ºã€‚è‹¥æŸä¸€è§’è‰²åœ¨æŒ‡å®šæ¨¡å—ä¸­æœªè·å¾—ä»»ä½•æƒé™ï¼Œè¯¥æ¨¡å—å°†ä¸ä¼šåœ¨å…¶å·¦ä¾§å¯¼èˆªæ ä¸­æ˜¾ç¤ºã€‚æ­¤è§„åˆ™é€‚ç”¨äºä»¥ä¸‹æ¨¡å—ï¼šäº‘è´¦å•ã€ä»˜è´¹è®¡åˆ’ä¸è´¦å•ã€åœºæ™¯ã€äº‹ä»¶ä¸­å¿ƒã€åŸºç¡€è®¾æ–½ã€æ—¥å¿—ã€æŒ‡æ ‡ã€åº”ç”¨æ€§èƒ½ç›‘æµ‹ã€ç”¨æˆ·è®¿é—®ç›‘æµ‹ã€LLM ç›‘æµ‹ã€å¯ç”¨æ€§ç›‘æµ‹ã€ç›‘æ§ã€å¼‚å¸¸è¿½è¸ªã€å®‰å…¨ç›‘æµ‹ã€‚</p>
<h3 data-id="heading-2">ç›‘æ§</h3>
<p>1ã€å‘Šè­¦ç­–ç•¥ï¼š</p>
<ul>
<li>åŒæ—¶æ”¯æŒæœç´¢å’Œç­›é€‰å¯¹å‘Šè­¦ç­–ç•¥è¿›è¡Œè¿‡æ»¤ï¼›æ–°å¢æ”¯æŒå¯æŒ‰ç›‘æ§å™¨åç§°ï¼ˆ<code>checker_title</code>ï¼‰ã€æˆå‘˜ï¼ˆ<code>member</code>ï¼‰è¿›è¡Œç²¾å‡†ç­›é€‰ï¼›</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/994b2dadc15b474b90c908f2980f362d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767236307&amp;x-signature=qjreMKtKSXeOOQ6hV%2F2MGx8Bveg%3D" alt="" loading="lazy"/></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fmonitoring%2Fcreate-alert-setting%2F%23repeat" target="_blank" title="https://docs.guance.com/monitoring/create-alert-setting/#repeat" ref="nofollow noopener noreferrer">é‡å¤å‘Šè­¦</a>ï¼šæ–°å¢æ”¯æŒé’ˆå¯¹ä¸åŒå‘Šè­¦ç­‰çº§ï¼ˆå¦‚ç´§æ€¥ã€ä¸¥é‡ã€è­¦å‘Šç­‰ï¼‰åˆ†åˆ«è®¾ç½®é‡å¤å‘Šè­¦çš„ä¸å‘é€æ—¶é—´é—´éš”ï¼›</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8740b87a4494d15a9f6b249d8b4867c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767236307&amp;x-signature=notA%2B9Zg%2F7Ny%2B21isC8IYF%2BYPkk%3D" alt="" loading="lazy"/></p>
<ul>
<li>æ–°å¢é€šçŸ¥èšåˆè§„åˆ™ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fmonitoring%2Fcreate-alert-setting%2F%23custom-pattern" target="_blank" title="https://docs.guance.com/monitoring/create-alert-setting/#custom-pattern" ref="nofollow noopener noreferrer">â€œè‡ªå®šä¹‰â€</a>ã€‚æ”¯æŒæ ¹æ®ä¸šåŠ¡éœ€æ±‚è‡ªç”±æŒ‡å®šç”¨äºå‘Šè­¦èšåˆçš„å­—æ®µç»„åˆã€‚è¾“å…¥å­—æ®µåï¼ˆå¤šä¸ªå­—æ®µä»¥è‹±æ–‡é€—å·åˆ†éš”ï¼‰ï¼Œç³»ç»Ÿå°†ä¸¥æ ¼æŒ‰æ­¤ç»„åˆè¿›è¡Œèšåˆï¼šä»…å½“äº‹ä»¶æ•°æ®åŒ…å«æ‰€æœ‰æŒ‡å®šå­—æ®µä¸”å–å€¼å‡æœ‰æ•ˆæ—¶ï¼Œæ‰ä¼šè§¦å‘èšåˆå‘Šè­¦ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d00a84ffc9cf4689bafeb57a80ff49d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767236307&amp;x-signature=eoYwtHmluoMM0Yppq%2B%2B21pqvucY%3D" alt="" loading="lazy"/></p>
<p>2ã€Arbiter å†…ç½®çš„ DQL å‡½æ•°æ”¯æŒé€šè¿‡ä¼ å…¥å·¥ä½œç©ºé—´å‚æ•°ï¼ŒæŸ¥è¯¢æŒ‡å®šç©ºé—´çš„æ•°æ®ã€‚é€‚ç”¨äº<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fmonitoring%2Fmonitor%2Fprogrammable-detection%2F" target="_blank" title="https://docs.guance.com/monitoring/monitor/programmable-detection/" ref="nofollow noopener noreferrer">å¯ç¼–ç¨‹ç›‘æ§å™¨</a>å’ŒÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fsecurity%2Fcreate-detection-rules%2F" target="_blank" title="https://docs.guance.com/security/create-detection-rules/" ref="nofollow noopener noreferrer">SIEM</a>Â æ£€æµ‹è§„åˆ™çš„åˆ›å»ºä¸ä¿®æ”¹åœºæ™¯ã€‚</p>
<h3 data-id="heading-3">åº”ç”¨æ€§èƒ½ç›‘æµ‹</h3>
<p>1ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fapplication-performance-monitoring%2Fservice-manag%2Fservice-performance%2F" target="_blank" title="https://docs.guance.com/application-performance-monitoring/service-manag/service-performance/" ref="nofollow noopener noreferrer">æ€§èƒ½æŒ‡æ ‡</a>ï¼š</p>
<ul>
<li>æ–°å¢ Apdex ç»Ÿè®¡ï¼Œé‡åŒ–ç”¨æˆ·å¯¹åº”ç”¨æ€§èƒ½çš„æ»¡æ„åº¦ï¼›</li>
<li>ç»Ÿè®¡æŒ‡æ ‡æ—¶åºå¯è§†åŒ–ï¼šå°†æœåŠ¡åˆ—è¡¨ä¸­çš„å¹³å‡è¯·æ±‚æ•°ã€å“åº”æ—¶é—´ã€é”™è¯¯æ•°ç­‰æ ¸å¿ƒç»Ÿè®¡æŒ‡æ ‡ï¼Œä»æ•°å€¼å±•ç¤ºå‡çº§ä¸ºæ—¶åºå›¾å½¢å¼ï¼Œç›´è§‚å‘ˆç°å˜åŒ–è¶‹åŠ¿ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/064f6a32fb8d4d5aaed61f38cf2f5d47~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767236307&amp;x-signature=RJgPiJXbXKGHuEcyYlzQP%2Bl3A%2F8%3D" alt="" loading="lazy"/></p>
<p>2ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fapplication-performance-monitoring%2Fservice-manag%2Fservice-details%2F" target="_blank" title="https://docs.guance.com/application-performance-monitoring/service-manag/service-details/" ref="nofollow noopener noreferrer">æœåŠ¡è¯¦æƒ…</a>ï¼š</p>
<ul>
<li>æ”¯æŒ OpenTelemetry æœåŠ¡è¯­è¨€çš„æ˜¾ç¤ºï¼›</li>
<li>æ–°å¢ Tab é¡µï¼šæœåŠ¡æ‹“æ‰‘ã€Profileã€ä»ªè¡¨æ¿ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ddde2bc5985248919e5922240ed17efd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767236307&amp;x-signature=7XoG7REo4wmZ%2BtK%2Fv%2FDc%2BHs6P4s%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">åœºæ™¯</h3>
<p>1ã€æ–°å¢å›¾è¡¨ç±»å‹â€œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fscene%2Fvisual-chart%2Fchange-comparison-chart%2F" target="_blank" title="https://docs.guance.com/scene/visual-chart/change-comparison-chart/" ref="nofollow noopener noreferrer">å˜åŒ–å¯¹æ¯”å›¾</a>â€ï¼šå°†æŒ‡å®šæŒ‡æ ‡åœ¨å½“å‰æ—¶æ®µä¸å†å²åŒæœŸï¼ˆå¦‚æ˜¨æ—¥åŒä¸€æ—¶åˆ»ã€ä¸Šå‘¨åŒæ—¥ï¼‰çš„æ•°å€¼æˆ–å…¶ä»–æŒ‡æ ‡è¿›è¡Œé‡åŒ–å¯¹æ¯”ï¼Œå¹¶ä»¥ç›´è§‚æ–¹å¼å±•ç°å˜åŒ–å¹…åº¦ï¼Œä»è€Œå¿«é€Ÿè¯†åˆ«å¼‚å¸¸æ³¢åŠ¨ï¼›</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/90ae9e72314541a1a5d3ac9d918450aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767236307&amp;x-signature=6ixaki0dLugufNuaoS2r5cipyAc%3D" alt="" loading="lazy"/></p>
<p>2ã€æ–°å»º<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fscene%2Fvisual-chart%2Fpie-chart%2F" target="_blank" title="https://docs.guance.com/scene/visual-chart/pie-chart/" ref="nofollow noopener noreferrer">é¥¼å›¾ï¼ˆç¯å½¢å›¾ï¼‰</a>æ—¶ï¼Œå½“å›¾ä¾‹å¤„äºééšè—çŠ¶æ€ï¼Œå¯é€‰æ‹©æ˜¯å¦æ˜¾ç¤º Value å€¼å’Œ Value ç™¾åˆ†æ¯”ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5d27720fc24400ba3b2b353e531530d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767236307&amp;x-signature=Eg1xb7vg3dR3wHJr5j34LLhIqZI%3D" alt="" loading="lazy"/></p>
<p>3ã€å›¾è¡¨Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fscene%2Fvisual-chart%2Fbar-chart%2F%23y" target="_blank" title="https://docs.guance.com/scene/visual-chart/bar-chart/#y" ref="nofollow noopener noreferrer">Y è½´</a>ï¼šä¼˜åŒ–åŸå§‹æ•°å€¼å±•ç¤ºã€‚</p>
<h3 data-id="heading-5">å¿«ç…§</h3>
<p>1ã€å¿«ç…§åˆ—è¡¨æ ·å¼æ•´ä½“ä¼˜åŒ–ï¼›</p>
<p>2ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fplatform-capabilities%2Fsave-snapshot%2F%23begin-save-snapshot" target="_blank" title="https://docs.guance.com/platform-capabilities/save-snapshot/#begin-save-snapshot" ref="nofollow noopener noreferrer">ä¿å­˜å¿«ç…§</a>ï¼šæ–°å¢â€œä¿å­˜ä¸ºé™æ€æ—¶é—´â€è®¾ç½®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d8bf61c7ff7425ea0bca2cc9e211544~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767236307&amp;x-signature=1%2BMijVF%2FpJAQTzDpKNSfoWLOAS8%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-6">æŒ‡æ ‡</h3>
<p>æŒ‡æ ‡åˆ†æï¼šæŸ¥è¯¢ç»“æœä¸­çš„æ•°å€¼æ–°å¢æ”¯æŒçµæ´»çš„æ˜¾ç¤ºæ ¼å¼è®¾ç½®ï¼Œå¯è®¾ç½®å°æ•°ä½æ•°å’Œå…¨ç²¾åº¦ç»“æœå±•ç¤ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a5112673ba64cfaa8f1443fbf150c11~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767236307&amp;x-signature=8pztva6HFuW5d%2FAaeaWZOdhgCz8%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">ç®¡ç†</h3>
<p>1ã€è·¨å·¥ä½œç©ºé—´æˆæƒï¼šå½“æ•°æ®èŒƒå›´é€‰æ‹©â€œæŒ‡æ ‡â€æ—¶ï¼Œå¯å¯¹æŒ‡æ ‡æˆæƒèŒƒå›´è¿›è¡Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fmanagement%2Fdata-authorization%2F%23scope" target="_blank" title="https://docs.guance.com/management/data-authorization/#scope" ref="nofollow noopener noreferrer">ç»†åŒ–é…ç½®</a>ï¼›</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b957c0e453f43b4b0460c2b2849218d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767236307&amp;x-signature=lQjDUB%2FuG0j5F55%2BSCFrs%2F8t%2FGw%3D" alt="" loading="lazy"/></p>
<p>2ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fmanagement%2Fshare-management%2F" target="_blank" title="https://docs.guance.com/management/share-management/" ref="nofollow noopener noreferrer">åˆ†äº«ç®¡ç†</a>ï¼šæ–°å¢ç±»å‹å¿«é€Ÿç­›é€‰ã€æœç´¢æ¡†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29099d7557784884b4a769805708765b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767236307&amp;x-signature=O3n9WtPfylKyF4%2FqPIELCTzvcCw%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">Pipelines</h3>
<p>æ¯ä¸ªæ•°æ®ç±»å‹æ–°å¢æ”¯æŒè®¾ç½®ä¸¤ä¸ªé»˜è®¤ Pipelineï¼ˆåŒ…æ‹¬æœ¬åœ°å’Œä¸­å¿ƒ Pipelineï¼‰ã€‚</p>
<h3 data-id="heading-9">Open API</h3>
<p>ä»ªè¡¨æ¿è·¨ç©ºé—´æŸ¥è¯¢æ—¶æ”¯æŒæŒ‡å®šé»˜è®¤é€‰ä¸­ç©ºé—´ã€‚</p>
<h2 data-id="heading-10">é›†æˆæ›´æ–°</h2>
<ul>
<li>æ–°å¢ GCP Storage é›†æˆï¼›</li>
<li>æ–°å¢ GCP Cloud SQLï¼ˆMySQLï¼‰é›†æˆï¼›</li>
<li>æ–°å¢é˜¿é‡Œäº‘ VPC å¯¹ç­‰è¿æ¥é›†æˆï¼›</li>
<li>æ–°å¢ AWS Lambda Trace é›†æˆï¼›</li>
<li>æ–°å¢é˜¿é‡Œäº‘ WAF åº”ç”¨é˜²ç«å¢™é›†æˆï¼›</li>
<li>è¡¥å……è…¾è®¯äº‘ Tencent CVM / KeewiDB è§†å›¾ï¼›</li>
<li>ä¿®å¤ Ingress-nginx-prom é›†æˆæ–‡æ¡£ä¸­å¤§å°å†™é—®é¢˜ï¼›</li>
<li>ä¿®å¤é›†æˆæ–‡æ¡£é—®é¢˜ï¼ˆåŒ…æ‹¬ä¸­è‹±æ–‡å­—ç¬¦åŠæ ¼å¼é—®é¢˜ï¼‰ï¼›</li>
<li>ä¿®å¤ TencentCloud å…¬ç½‘ CLB é‡‡é›†å™¨ä»¥æ”¯æŒéå…¬ç½‘ IPï¼›</li>
<li>ä¿®å¤ GCP äº‘ç›‘æ§ä¸­çº¿æ€§æ¡¶ï¼ˆlinearBucketsï¼‰æŒ‡æ ‡ Bugï¼›</li>
<li>æ–°å¢ CSPM è§„åˆ™ï¼šS3 å­˜å‚¨æ¡¶ç­–ç•¥åº”é™åˆ¶æ¥è‡ªå…¶ä»– AWS è´¦æˆ·çš„è®¿é—®ï¼›</li>
<li>æ–°å¢äº‘é›†æˆæ¨¡æ¿ï¼šAliyun CPFSã€Aliyun NLBã€HuaweiCloud EVSã€Aliyun CNAPIGatewayã€HuaweiCloud ROMAï¼›</li>
<li>æ–°å¢äº‘è„šæœ¬ï¼šGCP APIs é‡‡é›†å™¨ï¼›</li>
<li>æ–°å¢äº‘è„šæœ¬ï¼šGCP RUN é‡‡é›†å™¨ã€‚</li>
</ul>
<h2 data-id="heading-11">DataKit æ›´æ–°</h2>
<h3 data-id="heading-12">æ–°åŠ åŠŸèƒ½</h3>
<ul>
<li>æ–°å¢ Flameshot ç”¨ä»¥æ”¯æŒåŠ¨æ€ Profile é‡‡é›†</li>
<li>Cloud meta åŒæ­¥æ–°å¢ Google Cloud äº‘ä¸»æœºæ”¯æŒ</li>
</ul>
<h3 data-id="heading-13">é—®é¢˜ä¿®å¤</h3>
<ul>
<li>ä¼˜åŒ– Pipeline å¯¹ null å­—ç¬¦çš„å¤„ç†</li>
<li>ä¿®å¤ Redis ä¸»ä»æ¨¡å¼ä¸­ slow log é‡‡é›†é—®é¢˜</li>
<li>ä¿®å¤ Pipeline Refer table å¯èƒ½å´©æºƒçš„é—®é¢˜</li>
<li>ä¿®å¤ä¸€å¤„ logfwd service/source å­—æ®µé”™è¯¯é—®é¢˜</li>
<li>ä¿®å¤ OpenTelemetry æŒ‡æ ‡é‡‡é›†å¯¹ count ç±»æŒ‡æ ‡çš„å¤„ç†ï¼Œå¢åŠ é¢å¤–çš„ tagÂ <code>__temporality</code>ï¼Œä¾¿äº GuanceDB å¤„ç†</li>
<li>ä¿®å¤ DDTrace é‡‡é›†å™¨è‡ªå®šä¹‰ tag æ— æ•ˆé—®é¢˜</li>
</ul>
<h3 data-id="heading-14">åŠŸèƒ½ä¼˜åŒ–</h3>
<ul>
<li>ä¼˜åŒ– service å¯åŠ¨è¡Œä¸ºï¼Œåœ¨å¯åŠ¨è¿‡ç¨‹ä¸­å¦‚æœå‡ºç°æŠ¥é”™ï¼Œä¼šè¾“å‡ºè·Ÿ service å¯åŠ¨æœ‰å…³çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä¾¿äºé”™è¯¯æ’æŸ¥</li>
<li>ä¼˜åŒ–åŸºäº Jolokia çš„ JVM å’Œ Kafka æŒ‡æ ‡é‡‡é›†</li>
<li>HTTP API ç™½åå•åŠŸèƒ½ä¼˜åŒ–ï¼Œå¢åŠ åŸºäºæ­£åˆ™çš„ç™½åå•é…ç½®å’Œç¦ç”¨ç™½åå•çš„é€‰é¡¹</li>
<li>ä¼˜åŒ– MongoDB é‡‡é›†ä¸­é”™è¯¯æ—¥å¿—å¤„ç†</li>
<li>ä¼˜åŒ– Redis é‡‡é›†ä¸­å…³äºæƒé™çš„è¯´æ˜</li>
<li>ä¼˜åŒ– DataKit è‡ªèº«æŒ‡æ ‡é‡‡é›†é…ç½®ï¼Œæ–°å¢ interval é…ç½®å…¥å£ï¼ŒåŒæ—¶ï¼Œè‡ªèº«æŒ‡æ ‡ä¸­æ–°å¢ eBPF è¿›ç¨‹æœ‰å…³çš„ CPU/å†…å­˜æŒ‡æ ‡é‡‡é›†</li>
<li>DDTrace/OpenTelemetry trace é‡‡é›†ä¸­æ–°å¢ Trace SDK åç§°/ç‰ˆæœ¬å·/è¯­è¨€/å…¬å…±å­—æ®µæå–</li>
<li>ä¸»æœºå¯¹è±¡é‡‡é›†æ”¯æŒè™šæ‹Ÿæœº/ç‰©ç†æœºæ£€æµ‹ï¼Œå¯æ®æ­¤è®¾å®šä¸åŒçš„é‡‡é›† tag</li>
</ul>
<h3 data-id="heading-15">å…¼å®¹è°ƒæ•´</h3>
<ul>
<li>Kafka é‡‡é›†å™¨åšäº†è¾ƒå¤§è°ƒæ•´ï¼Œåœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­æ‰€æœ‰æŒ‡æ ‡éƒ½å½’åˆ° kafka è¿™ä¸ªæŒ‡æ ‡é›†ä¸‹ï¼Œä¸”æ‰€æœ‰çš„æŒ‡æ ‡éƒ½æ ¹æ®å¯¹åº”çš„ MBean åç§°è‡ªåŠ¨æ¨å¯¼ï¼Œä¸ç”¨äººå·¥é…ç½®é‡‡é›†çš„ MBean ä»¥åŠå…¶å¯¹åº”çš„æŒ‡æ ‡å‘½å</li>
<li>ç§»é™¤äº† OpenTelemetry æŒ‡æ ‡é‡‡é›†æ—¶çš„ global tag è¿½åŠ </li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Function.prototype.bindå®ç°]]></title>    <link>https://juejin.cn/post/7587256133792022568</link>    <guid>https://juejin.cn/post/7587256133792022568</guid>    <pubDate>2025-12-25T01:19:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587256133792022568" data-draft-id="7587245616754589747" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Function.prototype.bindå®ç°"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-25T01:19:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·4939409522935"/> <meta itemprop="url" content="https://juejin.cn/user/2661285222166046"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Function.prototype.bindå®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2661285222166046/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·4939409522935
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T01:19:01.000Z" title="Thu Dec 25 2025 01:19:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç›®æ ‡</h2>
<p>å®ç°å‡½æ•°<code>Function.prototype.mybind</code>ï¼Œæ•ˆæœç­‰åŒäº<code>Function.prototype.bind</code></p>
<p>bindæ¥å—å‚æ•°ä¸ºï¼š<code>(thisArg, ...args)</code></p>
<h2 data-id="heading-1">å®ç°</h2>
<p>åˆ©ç”¨<code>apply</code>å‡½æ•°å®ç°ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">mybind</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">thisArg, ...args</span>) {
  <span class="hljs-keyword">const</span> fn = <span class="hljs-variable language_">this</span>;
  
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">bound</span>(<span class="hljs-params">...innerArgs</span>) {
    <span class="hljs-keyword">const</span> context = (<span class="hljs-variable language_">this</span> <span class="hljs-keyword">instanceof</span> bound) ? <span class="hljs-variable language_">this</span> : thisArg;
  
    <span class="hljs-keyword">return</span> fn.<span class="hljs-title function_">apply</span>(context, [...args, ...innerArgs]);
  }
  
  <span class="hljs-keyword">if</span> (fn.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>){
    bound.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(fn.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
    bound.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = bound;
  }

  <span class="hljs-keyword">return</span> bound;
}
</code></pre>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªç»†èŠ‚ï¼Œå½“å¾—åˆ°äº†<code>bound = fn.bind(obj1)</code>åï¼Œå†æ¬¡è°ƒç”¨<code>bound2 = bound.bind(obj2)</code>ï¼Œä¼šå¿½ç•¥è¿™ä¸ª<code>bind</code>è°ƒç”¨ï¼Œ<code>bound2</code>ä¸<code>bound</code>è¿è¡Œæ—¶çš„<code>this</code>éƒ½æŒ‡å‘<code>obj1</code>ã€‚è¯¥è¡Œä¸ºæ‰‹å†™<code>bind</code>ä¸åŸå§‹<code>bind</code>è¡¨ç°ä¸€è‡´ã€‚</p>
<h2 data-id="heading-2">é—®é¢˜</h2>
<p><code>bound.prototype</code>åº”è¯¥ä¸º<code>undefined</code></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯Tokenæ— æ„Ÿåˆ·æ–°ï¼šè®©ç”¨æˆ·åƒåœ¨æ¸¸ä¹å›­ç•…ç©ä¸€æ ·æµç•…]]></title>    <link>https://juejin.cn/post/7587336857537478665</link>    <guid>https://juejin.cn/post/7587336857537478665</guid>    <pubDate>2025-12-25T01:41:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587336857537478665" data-draft-id="7587335187072417818" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯Tokenæ— æ„Ÿåˆ·æ–°ï¼šè®©ç”¨æˆ·åƒåœ¨æ¸¸ä¹å›­ç•…ç©ä¸€æ ·æµç•…"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-25T01:41:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JS_Likers"/> <meta itemprop="url" content="https://juejin.cn/user/1377017277975032"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯Tokenæ— æ„Ÿåˆ·æ–°ï¼šè®©ç”¨æˆ·åƒåœ¨æ¸¸ä¹å›­ç•…ç©ä¸€æ ·æµç•…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1377017277975032/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JS_Likers
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T01:41:35.000Z" title="Thu Dec 25 2025 01:41:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â¤ å†™åœ¨å‰é¢<br/>
å¦‚æœè§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œç‚¹ä¸ªå°â¤â¤ å§ï¼Œä½ çš„æ”¯æŒæ˜¯å¯¹æˆ‘æœ€å¤§çš„é¼“åŠ±~<br/>
ä¸ªäººç‹¬ç«‹å¼€å‘wxå°ç¨‹åºï¼Œæ„Ÿè°¢æ”¯æŒï¼
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d25c4001b1b4e6e902dc1f8863bcef2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSlNfTGlrZXJz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767231695&amp;x-signature=zkL4bG6Y6uSKgGKRAU%2BLmf6hZGU%3D" alt="small.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-0">ğŸª ä»æ¸¸ä¹å›­é—¨ç¥¨è¯´èµ·</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ å»æ¸¸ä¹å›­ç©ï¼Œé—¨ç¥¨ï¼ˆTokenï¼‰æœ‰ä¸€å®šæœ‰æ•ˆæœŸã€‚ä¼ ç»Ÿæ–¹å¼ä¸­ï¼Œé—¨ç¥¨è¿‡æœŸæ—¶ï¼š</p>
<ul>
<li>ä¿å®‰æ‹¦ä¸‹ä½ ï¼šâ€œç¥¨è¿‡æœŸäº†ï¼Œå»å”®ç¥¨å¤„é‡æ–°ä¹°ï¼â€</li>
<li>ä½ ä¸å¾—ä¸ç¦»å¼€é¡¹ç›®ï¼Œæ’é˜Ÿé‡æ–°ä¹°ç¥¨ï¼Œå†å›æ¥ç»§ç»­ç©</li>
</ul>
<p>è€Œ<strong>æ— æ„Ÿåˆ·æ–°</strong>å°±åƒæœ‰ä¸ªè´´å¿ƒåŠ©æ‰‹ï¼š</p>
<ul>
<li>é—¨ç¥¨å¿«è¿‡æœŸæ—¶ï¼ŒåŠ©æ‰‹æ‚„æ‚„å¸®ä½ ç»­æœŸ</li>
<li>ä½ å®Œå…¨æ„ŸçŸ¥ä¸åˆ°ï¼Œç»§ç»­ç•…ç©å„ä¸ªé¡¹ç›®</li>
</ul>
<p>è¿™å°±æ˜¯æˆ‘ä»¬ä»Šå¤©è¦å®ç°çš„ç”¨æˆ·ä½“éªŒï¼</p>
<h2 data-id="heading-1">ğŸ” ä¸ºä»€ä¹ˆéœ€è¦Tokenåˆ·æ–°ï¼Ÿ</h2>
<h3 data-id="heading-2">Tokençš„ç”Ÿå‘½å‘¨æœŸ</h3>
<pre><code class="hljs language-markdown" lang="markdown">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç™»å½•è·å–   â”‚â”€â”€â”€â”€â–¶â”‚  ä½¿ç”¨Token  â”‚â”€â”€â”€â”€â–¶â”‚  Tokenè¿‡æœŸ  â”‚
â”‚ AccessToken â”‚     â”‚  è®¿é—®æ¥å£   â”‚     â”‚   401é”™è¯¯   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">                                              â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ ä¼ ç»Ÿæ–¹å¼ï¼š   â”‚â”€â”€â”€â”€â–¶â”‚ ç”¨æˆ·éœ€é‡æ–°  â”‚
                 â”‚ è·³è½¬ç™»å½•é¡µ  â”‚     â”‚    ç™»å½•     â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre>
<p><strong>é—®é¢˜æ¥äº†</strong>ï¼šæ¯æ¬¡Tokenè¿‡æœŸéƒ½è®©ç”¨æˆ·é‡æ–°ç™»å½•ï¼Œä½“éªŒæå·®ï¼</p>
<h2 data-id="heading-3">ğŸ¯ æ— æ„Ÿåˆ·æ–°çš„æ ¸å¿ƒæ€è·¯</h2>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[ç”¨æˆ·å‘èµ·è¯·æ±‚] --&gt; B{Tokenæ˜¯å¦æœ‰æ•ˆ?}
    B -- æœ‰æ•ˆ --&gt; C[æ­£å¸¸è¯·æ±‚]
    B -- å·²è¿‡æœŸ --&gt; D[æ‹¦æˆªè¯·æ±‚]
    D --&gt; E{æ˜¯å¦æ­£åœ¨åˆ·æ–°?}
    E -- å¦ --&gt; F[å‘èµ·åˆ·æ–°è¯·æ±‚]
    F --&gt; G[è·å–æ–°Token]
    G --&gt; H[é‡è¯•åŸè¯·æ±‚]
    E -- æ˜¯ --&gt; I[åŠ å…¥ç­‰å¾…é˜Ÿåˆ—]
    I --&gt; J[åˆ·æ–°å®Œæˆåé‡è¯•]
    C --&gt; K[è¿”å›æ•°æ®]
    H --&gt; K
    J --&gt; K
</code></pre>
<h2 data-id="heading-4">ğŸ’» å®æˆ˜ä»£ç å®ç°ï¼ˆåŸºäºaxiosï¼‰</h2>
<h3 data-id="heading-5">ç¬¬ä¸€æ­¥ï¼šåŸºç¡€é…ç½®</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// tokenManager.js</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">TokenManager</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">accessToken</span> = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'access_token'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">refreshToken</span> = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'refresh_token'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isRefreshing</span> = <span class="hljs-literal">false</span>; <span class="hljs-comment">// æ˜¯å¦æ­£åœ¨åˆ·æ–°</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestsQueue</span> = []; <span class="hljs-comment">// è¯·æ±‚ç­‰å¾…é˜Ÿåˆ—</span>
  }
  
  <span class="hljs-comment">// ä¿å­˜token</span>
  <span class="hljs-title function_">setTokens</span>(<span class="hljs-params">accessToken, refreshToken</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">accessToken</span> = accessToken;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">refreshToken</span> = refreshToken;
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'access_token'</span>, accessToken);
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'refresh_token'</span>, refreshToken);
  }
  
  <span class="hljs-comment">// æ¸…é™¤token</span>
  <span class="hljs-title function_">clearTokens</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">accessToken</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">refreshToken</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'access_token'</span>);
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'refresh_token'</span>);
  }
}
</code></pre>
<h3 data-id="heading-6">ç¬¬äºŒæ­¥ï¼šaxiosæ‹¦æˆªå™¨è®¾ç½®</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// http.js</span>
<span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">TokenManager</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./tokenManager'</span>;

<span class="hljs-keyword">const</span> tokenManager = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TokenManager</span>();
<span class="hljs-keyword">const</span> http = axios.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">baseURL</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">VUE_APP_BASE_API</span>,
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">10000</span>
});

<span class="hljs-comment">// è¯·æ±‚æ‹¦æˆªå™¨</span>
http.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (tokenManager.<span class="hljs-property">accessToken</span>) {
      config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${tokenManager.accessToken}</span>`</span>;
    }
    <span class="hljs-keyword">return</span> config;
  },
  <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
  }
);

<span class="hljs-comment">// å“åº”æ‹¦æˆªå™¨ - æ ¸å¿ƒé€»è¾‘åœ¨è¿™é‡Œï¼</span>
http.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
    <span class="hljs-comment">// æ­£å¸¸å“åº”ç›´æ¥è¿”å›</span>
    <span class="hljs-keyword">return</span> response;
  },
  <span class="hljs-keyword">async</span> (error) =&gt; {
    <span class="hljs-keyword">const</span> originalRequest = error.<span class="hljs-property">config</span>;
    
    <span class="hljs-comment">// å¦‚æœä¸æ˜¯401é”™è¯¯ï¼Œç›´æ¥è¿”å›</span>
    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">response</span>?.<span class="hljs-property">status</span> !== <span class="hljs-number">401</span> || originalRequest.<span class="hljs-property">_retry</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
    }
    
    <span class="hljs-comment">// æ ‡è®°è¿™ä¸ªè¯·æ±‚å·²ç»é‡è¯•è¿‡ï¼Œé¿å…æ— é™å¾ªç¯</span>
    originalRequest.<span class="hljs-property">_retry</span> = <span class="hljs-literal">true</span>;
    
    <span class="hljs-comment">// å¦‚æœæ²¡æœ‰refreshTokenï¼Œè·³è½¬åˆ°ç™»å½•é¡µ</span>
    <span class="hljs-keyword">if</span> (!tokenManager.<span class="hljs-property">refreshToken</span>) {
      tokenManager.<span class="hljs-title function_">clearTokens</span>();
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = <span class="hljs-string">'/login'</span>;
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
    }
    
    <span class="hljs-comment">// å¦‚æœæ­£åœ¨åˆ·æ–°tokenï¼Œå°†è¯·æ±‚åŠ å…¥é˜Ÿåˆ—</span>
    <span class="hljs-keyword">if</span> (tokenManager.<span class="hljs-property">isRefreshing</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
        tokenManager.<span class="hljs-property">requestsQueue</span>.<span class="hljs-title function_">push</span>(<span class="hljs-function">() =&gt;</span> {
          originalRequest.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${tokenManager.accessToken}</span>`</span>;
          <span class="hljs-title function_">resolve</span>(<span class="hljs-title function_">http</span>(originalRequest));
        });
      });
    }
    
    <span class="hljs-comment">// å¼€å§‹åˆ·æ–°token</span>
    tokenManager.<span class="hljs-property">isRefreshing</span> = <span class="hljs-literal">true</span>;
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// è°ƒç”¨åˆ·æ–°æ¥å£</span>
      <span class="hljs-keyword">const</span> { data } = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/api/auth/refresh'</span>, {
        <span class="hljs-attr">refresh_token</span>: tokenManager.<span class="hljs-property">refreshToken</span>
      });
      
      <span class="hljs-comment">// ä¿å­˜æ–°token</span>
      tokenManager.<span class="hljs-title function_">setTokens</span>(data.<span class="hljs-property">access_token</span>, data.<span class="hljs-property">refresh_token</span>);
      
      <span class="hljs-comment">// æ‰§è¡Œç­‰å¾…é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰è¯·æ±‚</span>
      tokenManager.<span class="hljs-property">requestsQueue</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">callback</span> =&gt;</span> <span class="hljs-title function_">callback</span>());
      tokenManager.<span class="hljs-property">requestsQueue</span> = [];
      
      <span class="hljs-comment">// é‡è¯•åŸå§‹è¯·æ±‚</span>
      originalRequest.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${data.access_token}</span>`</span>;
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">http</span>(originalRequest);
      
    } <span class="hljs-keyword">catch</span> (refreshError) {
      <span class="hljs-comment">// åˆ·æ–°å¤±è´¥ï¼Œæ¸…é™¤tokenå¹¶è·³è½¬ç™»å½•</span>
      tokenManager.<span class="hljs-title function_">clearTokens</span>();
      tokenManager.<span class="hljs-property">requestsQueue</span> = [];
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = <span class="hljs-string">'/login'</span>;
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(refreshError);
    } <span class="hljs-keyword">finally</span> {
      tokenManager.<span class="hljs-property">isRefreshing</span> = <span class="hljs-literal">false</span>;
    }
  }
);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> http;
</code></pre>
<h3 data-id="heading-7">ç¬¬ä¸‰æ­¥ï¼šä½¿ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// userService.js</span>
<span class="hljs-keyword">import</span> http <span class="hljs-keyword">from</span> <span class="hljs-string">'./http'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getUserInfo</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> http.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/user/info'</span>);
    <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>;
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:'</span>, error);
    <span class="hljs-keyword">throw</span> error;
  }
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">updateProfile</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">data</span>) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> http.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/api/user/profile'</span>, data);
    <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>;
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ›´æ–°èµ„æ–™å¤±è´¥:'</span>, error);
    <span class="hljs-keyword">throw</span> error;
  }
};
</code></pre>
<h2 data-id="heading-8">ğŸ¨ å¢å¼ºä½“éªŒï¼šæ·»åŠ è§†è§‰æç¤º</h2>
<p>è™½ç„¶è¯´æ˜¯"æ— æ„Ÿ"ï¼Œä½†é€‚å½“çš„æç¤ºèƒ½è®©ä½“éªŒæ›´å¥½ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨åˆ·æ–°tokenæ—¶æ˜¾ç¤ºåŠ è½½æç¤º</span>
<span class="hljs-keyword">let</span> refreshLoading = <span class="hljs-literal">null</span>;

<span class="hljs-comment">// ä¿®æ”¹å“åº”æ‹¦æˆªå™¨ä¸­çš„åˆ·æ–°éƒ¨åˆ†</span>
<span class="hljs-keyword">try</span> {
  <span class="hljs-comment">// æ˜¾ç¤ºè½»é‡çº§æç¤º</span>
  refreshLoading = <span class="hljs-title function_">showLoading</span>(<span class="hljs-string">'æ­£åœ¨æ›´æ–°ç™»å½•çŠ¶æ€...'</span>);
  
  <span class="hljs-keyword">const</span> { data } = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/api/auth/refresh'</span>, {
    <span class="hljs-attr">refresh_token</span>: tokenManager.<span class="hljs-property">refreshToken</span>
  });
  
  <span class="hljs-comment">// éšè—æç¤º</span>
  refreshLoading?.<span class="hljs-title function_">hide</span>();
  <span class="hljs-title function_">showToast</span>(<span class="hljs-string">'ç™»å½•çŠ¶æ€å·²æ›´æ–°'</span>, <span class="hljs-string">'success'</span>, <span class="hljs-number">2000</span>);
  
  <span class="hljs-comment">// ... å…¶ä½™é€»è¾‘</span>
} <span class="hljs-keyword">catch</span> (error) {
  refreshLoading?.<span class="hljs-title function_">hide</span>();
  <span class="hljs-title function_">showToast</span>(<span class="hljs-string">'ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•'</span>, <span class="hljs-string">'error'</span>);
  <span class="hljs-comment">// ... å…¶ä½™é”™è¯¯å¤„ç†</span>
}
</code></pre>
<h2 data-id="heading-9">ğŸ›¡ï¸ å®‰å…¨æ³¨æ„äº‹é¡¹</h2>
<ol>
<li><strong>Refresh Tokenæœ‰æ•ˆæœŸ</strong>ï¼šé€šå¸¸æ¯”Access Tokené•¿ï¼Œä½†ä¹Ÿä¸æ˜¯æ°¸ä¹…çš„</li>
<li><strong>å•æ¬¡ä½¿ç”¨</strong>ï¼šæ¯æ¬¡ä½¿ç”¨Refresh Tokenåï¼ŒæœåŠ¡ç«¯åº”è¯¥é¢å‘æ–°çš„Refresh Token</li>
<li><strong>å®‰å…¨å­˜å‚¨</strong>ï¼š
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨æ›´å®‰å…¨çš„æ–¹å¼å­˜å‚¨</span>
<span class="hljs-keyword">const</span> secureStorage = {
  <span class="hljs-attr">setItem</span>: <span class="hljs-function">(<span class="hljs-params">key, value</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">crypto</span> &amp;&amp; <span class="hljs-variable language_">window</span>.<span class="hljs-property">crypto</span>.<span class="hljs-property">subtle</span>) {
      <span class="hljs-comment">// è€ƒè™‘ä½¿ç”¨åŠ å¯†å­˜å‚¨</span>
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(key, value);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// é™çº§æ–¹æ¡ˆ</span>
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(key, value);
    }
  },
  <span class="hljs-attr">getItem</span>: <span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(key)
};
</code></pre>
</li>
</ol>
<h2 data-id="heading-10">ğŸª å›åˆ°æ¸¸ä¹å›­æ¯”å–»</h2>
<p>ç°åœ¨æˆ‘ä»¬çš„ç³»ç»Ÿå°±åƒè¿™æ ·å·¥ä½œï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">æ¸¸ä¹å›­é¡¹ç›®ï¼ˆAPIè¯·æ±‚ï¼‰ â†’ æ£€ç¥¨å£ï¼ˆæ‹¦æˆªå™¨ï¼‰
<span class="hljs-code">    â”‚
    â”œâ”€â”€ ç¥¨æœ‰æ•ˆ â†’ ç›´æ¥è¿›å…¥
    â”‚
    â”œâ”€â”€ ç¥¨è¿‡æœŸï¼Œæœ‰ç»­ç¥¨èµ„æ ¼ â†’ åŠ©æ‰‹æ‚„æ‚„ç»­ç¥¨ â†’ ç»§ç»­æ¸¸ç©
    â”‚
    â””â”€â”€ ç¥¨è¿‡æœŸï¼Œæ— ç»­ç¥¨èµ„æ ¼ â†’ å¼•å¯¼é‡æ–°è´­ç¥¨ï¼ˆç™»å½•ï¼‰
</span></code></pre>
<h2 data-id="heading-11">ğŸ“Š æ€§èƒ½ä¼˜åŒ–å°è´´å£«</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. é¢„åˆ·æ–°ï¼šåœ¨tokenå³å°†è¿‡æœŸæ—¶æå‰åˆ·æ–°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">shouldRefreshToken</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> tokenExpiry = <span class="hljs-title function_">getTokenExpiry</span>(tokenManager.<span class="hljs-property">accessToken</span>);
  <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
  <span class="hljs-comment">// åœ¨è¿‡æœŸå‰5åˆ†é’Ÿå¼€å§‹åˆ·æ–°</span>
  <span class="hljs-keyword">return</span> tokenExpiry - now &lt; <span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>;
};

<span class="hljs-comment">// 2. å®šæ—¶æ£€æŸ¥</span>
<span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">shouldRefreshToken</span>() &amp;&amp; !tokenManager.<span class="hljs-property">isRefreshing</span>) {
    <span class="hljs-title function_">refreshTokenSilently</span>();
  }
}, <span class="hljs-number">60000</span>); <span class="hljs-comment">// æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡</span>

<span class="hljs-comment">// 3. å¹¶å‘æ§åˆ¶ä¼˜åŒ–</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MAX_QUEUE_SIZE</span> = <span class="hljs-number">50</span>;
<span class="hljs-keyword">if</span> (tokenManager.<span class="hljs-property">requestsQueue</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-variable constant_">MAX_QUEUE_SIZE</span>) {
  <span class="hljs-comment">// é˜Ÿåˆ—è¿‡é•¿ï¼Œå¯èƒ½æ˜¯å¼‚å¸¸æƒ…å†µ</span>
  tokenManager.<span class="hljs-property">requestsQueue</span> = [];
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-title function_">reload</span>(); <span class="hljs-comment">// æˆ–é‡‡å–å…¶ä»–æ¢å¤æªæ–½</span>
}
</code></pre>
<h2 data-id="heading-12">ğŸ‰ æ€»ç»“</h2>
<p>å®ç°Tokenæ— æ„Ÿåˆ·æ–°çš„å…³é”®åœ¨äºï¼š</p>
<ol>
<li><strong>æ‹¦æˆª401é”™è¯¯</strong>ï¼šåœ¨axioså“åº”æ‹¦æˆªå™¨ä¸­æ•è·</li>
<li><strong>é¿å…å¹¶å‘åˆ·æ–°</strong>ï¼šç”¨æ ‡å¿—ä½å’Œé˜Ÿåˆ—æ§åˆ¶</li>
<li><strong>ä¼˜é›…é™çº§</strong>ï¼šåˆ·æ–°å¤±è´¥æ—¶å‹å¥½å¼•å¯¼é‡æ–°ç™»å½•</li>
<li><strong>ç”¨æˆ·ä½“éªŒ</strong>ï¼šé€‚å½“çš„æç¤ºï¼ˆä½†ä¸æ˜¯æ‰“æ–­ï¼‰</li>
</ol>
<p>ç°åœ¨ä½ çš„åº”ç”¨å°±åƒé‚£ä¸ªè´´å¿ƒçš„æ¸¸ä¹å›­åŠ©æ‰‹ï¼Œè®©ç”¨æˆ·åœ¨ä¸çŸ¥ä¸è§‰ä¸­ä¿æŒç™»å½•çŠ¶æ€ï¼Œäº«å—æµç•…çš„ä½“éªŒï¼</p>
<p>è¯•è¯•å®ç°å®ƒï¼Œè®©ä½ çš„åº”ç”¨å‘Šåˆ«çƒ¦äººçš„"ç™»å½•å·²è¿‡æœŸ"æç¤ºå§ï¼ğŸš€</p>
<hr/>
<p><strong>å°ä½œä¸š</strong>ï¼šä½ èƒ½æƒ³åˆ°åœ¨å“ªäº›åœºæ™¯ä¸‹ï¼Œå³ä½¿å®ç°äº†æ— æ„Ÿåˆ·æ–°ï¼Œä»ç„¶éœ€è¦ä¸»åŠ¨æç¤ºç”¨æˆ·é‡æ–°ç™»å½•å—ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„æƒ³æ³•ï¼ğŸ’­</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[oaæµç¨‹åˆ°è¾¾æŸä¸ªèŠ‚ç‚¹ä¹‹åè§¦å‘è‡ªå®šä¹‰åŠ¨ä½œ(å¤–éƒ¨æ¥å£)]]></title>    <link>https://juejin.cn/post/7587313610696425499</link>    <guid>https://juejin.cn/post/7587313610696425499</guid>    <pubDate>2025-12-25T02:59:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587313610696425499" data-draft-id="7587325326046150665" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="oaæµç¨‹åˆ°è¾¾æŸä¸ªèŠ‚ç‚¹ä¹‹åè§¦å‘è‡ªå®šä¹‰åŠ¨ä½œ(å¤–éƒ¨æ¥å£)"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-25T02:59:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Hyinglin"/> <meta itemprop="url" content="https://juejin.cn/user/2362231708723822"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            oaæµç¨‹åˆ°è¾¾æŸä¸ªèŠ‚ç‚¹ä¹‹åè§¦å‘è‡ªå®šä¹‰åŠ¨ä½œ(å¤–éƒ¨æ¥å£)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2362231708723822/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Hyinglin
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-25T02:59:05.000Z" title="Thu Dec 25 2025 02:59:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ç¬¬ä¸€ç§æ–¹æ¡ˆï¼ˆæ¨èï¼‰<br/>
åœ¨å½’æ¡£èŠ‚ç‚¹å‰æ·»åŠ è‡ªå®šä¹‰é™„åŠ æ“ä½œå°±å¯ä»¥ï¼ˆoaå‰å°ç›´æ¥è°ƒç”¨å¤–éƒ¨æ¥å£å³å¯ï¼‰</p>
</blockquote>
<blockquote>
<p>ç¬¬äºŒç§æ–¹æ¡ˆï¼ˆä¸æ¨èï¼Œç”¨æ¥æ‰©å±•æ€è·¯ï¼‰<br/>
æ•°æ®åº“è½®è¯¢ç‰ˆ</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€æ•°æ®åº“è½®è¯¢ç‰ˆ-æ•´ä½“æ€è·¯</h2>
<h4 data-id="heading-1">æ ¸å¿ƒæ€æƒ³ï¼ˆéå¸¸é‡è¦ï¼‰</h4>
<blockquote>
<p><strong>ä¸è¦ç›´æ¥æ‰«â€œå·²ç»“æŸæµç¨‹â€</strong><br/>
è€Œæ˜¯ï¼š<br/>
ğŸ‘‰ <strong>â€œæ‰¾å‡ºã€åˆšåˆšç»“æŸã€ã€ä¸”ã€è¿˜æ²¡é€šçŸ¥è¿‡ã€çš„æµç¨‹å®ä¾‹â€</strong></p>
</blockquote>
<p>æ‰€ä»¥ä¸€å®šè¦æœ‰ <strong>å»é‡æ ‡è®°</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-2">æ€»ä½“æ¶æ„</h3>
<pre><code class="hljs language-markdown" lang="markdown">Spring Boot å®šæ—¶ä»»åŠ¡
<span class="hljs-code">        â†“
æŸ¥è¯¢ OA æ•°æ®åº“
        â†“
æ‰¾å‡ºã€å‚å¤–è°ƒæ‹¨æµç¨‹ã€‘ä¸­
ã€å®¡æ‰¹å®Œæˆ &amp; æœªé€šçŸ¥ã€‘çš„ requestId
        â†“
å‘é€é£ä¹¦ç¾¤é€šçŸ¥
        â†“
è®°å½•é€šçŸ¥æ—¥å¿—ï¼ˆé˜²é‡å¤ï¼‰
</span></code></pre>
<hr/>
<h2 data-id="heading-3">äºŒã€ä½ å¿…é¡»çŸ¥é“çš„ 3 å¼ å…³é”®è¡¨ï¼ˆe-cology 9ï¼‰</h2>
<blockquote>
<p>âš ï¸ è¡¨ååœ¨ä¸åŒå®¢æˆ·å¯èƒ½ç•¥æœ‰å·®å¼‚ï¼Œä½† <strong>ä¸‹é¢è¿™å‡ å¼  90% éƒ½å­˜åœ¨</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-4">1ï¸âƒ£ workflow_requestbaseï¼ˆæµç¨‹å®ä¾‹ä¸»è¡¨ï¼‰</h3>
<p>è¿™æ˜¯æœ€é‡è¦çš„ã€‚</p>
<p>å¸¸ç”¨å­—æ®µï¼š</p>





























<table><thead><tr><th>å­—æ®µ</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>requestid</td><td>æµç¨‹å®ä¾‹ ID</td></tr><tr><td>workflowid</td><td>æµç¨‹æ¨¡æ¿ ID</td></tr><tr><td>currentstatus</td><td>æµç¨‹çŠ¶æ€</td></tr><tr><td>lastoperatedate</td><td>æœ€åæ“ä½œæ—¥æœŸ</td></tr><tr><td>lastoperatetime</td><td>æœ€åæ“ä½œæ—¶é—´</td></tr></tbody></table>
<h4 data-id="heading-5">currentstatus å¸¸è§å€¼ï¼ˆç»éªŒï¼‰</h4>

























<table><thead><tr><th>å€¼</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>0</td><td>è¿è¡Œä¸­</td></tr><tr><td>1</td><td>æ­£å¸¸ç»“æŸï¼ˆå®¡æ‰¹é€šè¿‡ï¼‰</td></tr><tr><td>2</td><td>å¼ºåˆ¶ç»“æŸ</td></tr><tr><td>3</td><td>é€€å›</td></tr></tbody></table>
<p>ğŸ‘‰ <strong>ä½ åªè¦ <code>currentstatus = 1</code></strong></p>
<hr/>
<h3 data-id="heading-6">2ï¸âƒ£ workflow_baseï¼ˆæµç¨‹æ¨¡æ¿è¡¨ï¼‰</h3>
<p>ç”¨æ¥ç¡®è®¤æµç¨‹åï¼ˆå¯é€‰ï¼‰</p>

















<table><thead><tr><th>å­—æ®µ</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>id</td><td>workflowId</td></tr><tr><td>workflowname</td><td>æµç¨‹åç§°</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-7">3ï¸âƒ£ ä½ è‡ªå·±å»ºçš„è¡¨ï¼ˆå¼ºçƒˆæ¨èï¼‰</h3>
<h4 data-id="heading-8">oa_notify_logï¼ˆé˜²é‡å¤ï¼‰</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> oa_notify_log (
  request_id <span class="hljs-type">int</span> <span class="hljs-keyword">primary</span> key,
  workflow_id <span class="hljs-type">int</span>,
  notify_time datetime
);
</code></pre>
<blockquote>
<p>â— <strong>è¿™æ˜¯æ•´ä¸ªæ–¹æ¡ˆæ˜¯å¦â€œèƒ½é•¿æœŸç”¨â€çš„å…³é”®</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-9">ä¸‰ã€SQLï¼šæ‰¾å‡ºã€Œåˆšåˆšå®¡æ‰¹å®Œæˆã€çš„æµç¨‹</h2>
<h4 data-id="heading-10">æ ¸å¿ƒ SQLï¼ˆé‡ç‚¹çœ‹ï¼‰</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">select</span> r.requestid,
       r.workflowid,
       r.lastoperatedate,
       r.lastoperatetime
<span class="hljs-keyword">from</span> workflow_requestbase r
<span class="hljs-keyword">where</span> r.workflowid <span class="hljs-operator">=</span> <span class="hljs-number">456</span>            <span class="hljs-comment">-- å‚å¤–è°ƒæ‹¨æµç¨‹ID</span>
  <span class="hljs-keyword">and</span> r.currentstatus <span class="hljs-operator">=</span> <span class="hljs-string">'1'</span>         <span class="hljs-comment">-- å®¡æ‰¹é€šè¿‡</span>
  <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">exists</span> (
      <span class="hljs-keyword">select</span> <span class="hljs-number">1</span>
      <span class="hljs-keyword">from</span> oa_notify_log n
      <span class="hljs-keyword">where</span> n.request_id <span class="hljs-operator">=</span> r.requestid
  )
</code></pre>
<p>ğŸ“Œ <strong>è§£é‡Š</strong>ï¼š</p>
<ul>
<li>åªæŸ¥ä½ å…³å¿ƒçš„æµç¨‹</li>
<li>åªè¦â€œå®¡æ‰¹é€šè¿‡â€çš„</li>
<li><strong>æ’é™¤å·²ç»é€šçŸ¥è¿‡çš„</strong></li>
</ul>
<hr/>
<h2 data-id="heading-11">å››ã€Spring Boot 3 å®ç°ï¼ˆå®Œæ•´å¯ç”¨ç¤ºä¾‹ï¼‰</h2>
<h3 data-id="heading-12">1ï¸âƒ£ å®šæ—¶ä»»åŠ¡é…ç½®</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@EnableScheduling</span>
<span class="hljs-variable">@Configuration</span>
public class ScheduleConfig {
}
</code></pre>
<hr/>
<h3 data-id="heading-13">2ï¸âƒ£ å®šæ—¶æ‰«æä»»åŠ¡</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OaWorkflowScanJob</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">JdbcTemplate</span> jdbcTemplate;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">FeishuService</span> feishuService;

    <span class="hljs-meta">@Scheduled</span>(cron = <span class="hljs-string">"0 */1 * * * ?"</span>) <span class="hljs-comment">// æ¯ 1 åˆ†é’Ÿæ‰«ä¸€æ¬¡</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">scanFinishedWorkflow</span>(<span class="hljs-params"/>) {

        <span class="hljs-title class_">String</span> sql = <span class="hljs-string">""</span><span class="hljs-string">"
            select requestid
            from workflow_requestbase
            where workflowid = ?
              and currentstatus = '1'
              and not exists (
                select 1 from oa_notify_log
                where request_id = workflow_requestbase.requestid
              )
        "</span><span class="hljs-string">""</span>;

        <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">Integer</span>&gt; requestIds =
            jdbcTemplate.<span class="hljs-title function_">queryForList</span>(sql, <span class="hljs-title class_">Integer</span>.<span class="hljs-property">class</span>, <span class="hljs-number">456</span>);

        <span class="hljs-keyword">for</span> (<span class="hljs-title class_">Integer</span> requestId : requestIds) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// 1. å‘é€é£ä¹¦</span>
                feishuService.<span class="hljs-title function_">send</span>(<span class="hljs-title function_">buildMsg</span>(requestId));

                <span class="hljs-comment">// 2. è®°å½•å·²é€šçŸ¥</span>
                <span class="hljs-title function_">saveNotifyLog</span>(requestId);

            } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">Exception</span> e) {
                <span class="hljs-comment">// å¤±è´¥ä¸å†™ logï¼Œä¸‹æ¬¡è¿˜ä¼šå†å‘</span>
                e.<span class="hljs-title function_">printStackTrace</span>();
            }
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">saveNotifyLog</span>(<span class="hljs-params">Integer requestId</span>) {
        jdbcTemplate.<span class="hljs-title function_">update</span>(
            <span class="hljs-string">"insert into oa_notify_log(request_id, workflow_id, notify_time) values (?, ?, getdate())"</span>,
            requestId, <span class="hljs-number">456</span>
        );
    }

    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">buildMsg</span>(<span class="hljs-params">Integer requestId</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"ã€å‚å¤–è°ƒæ‹¨æµç¨‹ã€‘å®¡æ‰¹å·²é€šè¿‡\næµç¨‹IDï¼š"</span> + requestId;
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-14">3ï¸âƒ£ é£ä¹¦å‘é€ï¼ˆç®€ç‰ˆï¼‰</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FeishuService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final <span class="hljs-title class_">String</span> <span class="hljs-variable constant_">WEBHOOK</span> =
        <span class="hljs-string">"https://open.feishu.cn/open-apis/bot/v2/hook/xxxx"</span>;

    <span class="hljs-keyword">private</span> final <span class="hljs-title class_">RestTemplate</span> restTemplate = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestTemplate</span>();

    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">send</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> text</span>) {
        <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt; body = <span class="hljs-title class_">Map</span>.<span class="hljs-title function_">of</span>(
            <span class="hljs-string">"msg_type"</span>, <span class="hljs-string">"text"</span>,
            <span class="hljs-string">"content"</span>, <span class="hljs-title class_">Map</span>.<span class="hljs-title function_">of</span>(<span class="hljs-string">"text"</span>, text)
        );
        restTemplate.<span class="hljs-title function_">postForObject</span>(<span class="hljs-variable constant_">WEBHOOK</span>, body, <span class="hljs-title class_">String</span>.<span class="hljs-property">class</span>);
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-15">äº”ã€ä½ è¿™ä¸ªæ–¹æ¡ˆä¸€å®šè¦åŠ çš„ 4 ä¸ªâ€œä¿é™©â€</h2>
<h4 data-id="heading-16">âœ… 1ï¸âƒ£ å¿…é¡»ç”¨ <code>oa_notify_log</code></h4>
<p>å¦åˆ™ <strong>ä¸€å®šä¼šé‡å¤å‘</strong></p>
<hr/>
<h4 data-id="heading-17">âœ… 2ï¸âƒ£ å®šæ—¶é¢‘ç‡ä¸è¦å¤ªé«˜</h4>
<ul>
<li>æ¨èï¼š<strong>1ï½3 åˆ†é’Ÿ</strong></li>
<li>ä¸è¦ç§’çº§</li>
</ul>
<hr/>
<h4 data-id="heading-18">âœ… 3ï¸âƒ£ åªè®¤ <code>currentstatus = 1</code></h4>
<p>ä¸è¦è‡ªå·±çŒœå…¶ä»–çŠ¶æ€</p>
<hr/>
<h4 data-id="heading-19">âœ… 4ï¸âƒ£ é£ä¹¦å¤±è´¥ä¸è¦å†™ log</h4>
<p>è®©ä¸‹æ¬¡å®šæ—¶ä»»åŠ¡è¡¥å‘</p>
<hr/>
<h2 data-id="heading-20">å…­ã€è¿™ä¸ªæ–¹æ¡ˆçš„â€œå®¢è§‚ç¼ºç‚¹â€ï¼ˆæˆ‘å¿…é¡»å‘Šè¯‰ä½ ï¼‰</h2>

























<table><thead><tr><th>ç‚¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å»¶è¿Ÿ</td><td>æœ€å¿« 1 åˆ†é’Ÿ</td></tr><tr><td>å¼ºåˆ¶ç»“æŸè¦é¢å¤–åˆ¤æ–­</td><td>currentstatus = 2</td></tr><tr><td>è¡¨ç»“æ„å‡çº§é£é™©</td><td>æœ‰</td></tr><tr><td>å¹¶å‘é«˜æ—¶å‹åŠ›å¤§</td><td>æœ‰</td></tr></tbody></table>
<p>ğŸ‘‰ <strong>ä½†åœ¨â€œä¸èƒ½ç”¨ Actionâ€çš„å‰æä¸‹ï¼Œè¿™æ˜¯æœ€ç¨³çš„ä¸€ç§</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>