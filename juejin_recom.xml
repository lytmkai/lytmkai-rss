<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[ä¿éšœç¼“å­˜å’Œæ•°æ®åº“å°½é‡ä¸€è‡´çš„ç­–ç•¥]]></title>    <link>https://juejin.cn/post/7588104741610848266</link>    <guid>https://juejin.cn/post/7588104741610848266</guid>    <pubDate>2025-12-28T04:03:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588104741610848266" data-draft-id="7588139768275337267" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¿éšœç¼“å­˜å’Œæ•°æ®åº“å°½é‡ä¸€è‡´çš„ç­–ç•¥"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-28T04:03:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‡ªç”±ç”Ÿé•¿2024"/> <meta itemprop="url" content="https://juejin.cn/user/1591748569862670"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¿éšœç¼“å­˜å’Œæ•°æ®åº“å°½é‡ä¸€è‡´çš„ç­–ç•¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1591748569862670/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‡ªç”±ç”Ÿé•¿2024
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T04:03:48.000Z" title="Sun Dec 28 2025 04:03:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    12
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åŒåˆ ç­–ç•¥ Cache-Aside</h2>
<p>ç¬¬ä¸€æ¬¡åˆ ï¼ˆæŠŠè·¯å µæ­»ï¼‰ï¼š</p>
<p>å…ˆæŠŠ Redis é‡Œçš„ç¼“å­˜åˆ æ‰ã€‚
ç›®çš„ï¼šè®©æ¥ä¸‹æ¥çš„è¯»è¯·æ±‚å¿…é¡»å»æŸ¥æ•°æ®åº“ï¼Œé¿å…è¯»åˆ°æ—§ç¼“å­˜ã€‚
æ›´æ–°æ•°æ®åº“ï¼šæŠŠ MySQL é‡Œçš„æ•°æ®æ›´æ–°æˆæœ€æ–°çš„ï¼ˆæ¯”å¦‚ 9ï¼‰ã€‚</p>
<p>å»¶è¿Ÿç­‰å¾…ï¼ˆå…³é”®ä¸€æ­¥ï¼‰ï¼š
çº¿ç¨‹åœ¨è¿™é‡Œç¡ä¸€ä¼šå„¿ï¼ˆæ¯”å¦‚ 1 ç§’ï¼‰ã€‚
ç›®çš„ï¼šè¿™ä¸€æ­¥éå¸¸å…³é”®ï¼æˆ‘ä»¬è¦ç­‰ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>ç­‰é‚£äº›åœ¨â€œç¬¬ä¸€æ¬¡åˆ â€ä¹‹åã€â€œæ›´æ–°æ•°æ®åº“â€ä¹‹å‰çš„é‚£ä¸€ç¬é—´è¿›æ¥çš„è¯»è¯·æ±‚ã€‚</p>
<p>è®©å®ƒä»¬æœ‰è¶³å¤Ÿçš„æ—¶é—´å»æ•°æ®åº“è¯»åˆ°æ—§æ•°æ®ï¼ˆæƒ³æƒ³ï¼Œä¸ºä»€ä¹ˆï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿè¿™é‡Œæ˜¯ç†è§£å»¶è¿ŸåŒåˆ çš„å…³é”®ï¼‰ï¼Œå¹¶æŠŠè¿™ä¸ªæ—§æ•°æ®é‡æ–°å†™å› Redisï¼ˆå˜æˆè„æ•°æ®ï¼‰ã€‚</p>
<p>æ•…æ„ç•™å‡ºè¿™ä¸ªæ—¶é—´çª—å£ï¼Œå°±æ˜¯ä¸ºäº†æŠ“å‡ºè¿™äº›â€œæ¼ç½‘ä¹‹é±¼â€ã€‚</p>
<p>ç¬¬äºŒæ¬¡åˆ ï¼ˆæ¸…ç†æˆ˜åœºï¼‰ï¼š
ç¡é†’äº†ï¼Œå†åˆ ä¸€æ¬¡ Redisã€‚
ç›®çš„ï¼šæŠŠåˆšæ‰é‚£äº›è¯»è¯·æ±‚å¯èƒ½å†™è¿›å»çš„è„æ•°æ®ï¼ˆæ—§æ•°æ®ï¼‰å†æ¬¡å¹²æ‰ï¼</p>
<p>å»¶è¿Ÿç¬¬äºŒæ¬¡åˆ é™¤ï¼Œä¸ºäº†é˜²æ­¢æ›´æ–°æ•°æ®åº“æ—¶ï¼Œæœ‰å¹¶å‘è¯»è¯·æ±‚æŠŠæ—§æ•°æ®å›å¡«åˆ°ç¼“å­˜ï¼Œé€ æˆè„æ•°æ®ã€‚</p>
<p>å› ä¸ºæ•°æ®åº“ï¼ˆMySQLï¼‰çš„â€œæäº¤â€å’Œâ€œåŒæ­¥â€æ˜¯éœ€è¦æ—¶é—´çš„ã€‚</p>
<p>åœ¨é«˜å¹¶å‘æˆ–è€…ä¸»ä»åˆ†ç¦»çš„æ¶æ„ä¸‹ï¼Œæ•°æ®åº“ä¸æ˜¯â€œç¬é—´â€å°±å˜çš„ã€‚å“ªæ€•åªæœ‰ä¸€æ¯«ç§’çš„å»¶è¿Ÿï¼Œä¹Ÿä¼šæœ‰å…¶ä»–çš„çº¿ç¨‹è¯»åˆ°æ—§å€¼ã€‚</p>
<h3 data-id="heading-1">åˆ -æ”¹-ç«‹é©¬å†åˆ â€ ä¸ºä»€ä¹ˆä¸è¡Œï¼Ÿ</h3>
<p>å¦‚æœåˆ å¾—å¤ªå¿«ï¼ˆä¸ç­‰å¾…ï¼‰ï¼Œç¬¬äºŒæ¬¡åˆ å¯èƒ½æ ¹æœ¬æ²¡ç”¨ï¼Œç”šè‡³ä¼šæŠŠåˆšå†™è¿›å»çš„â€œæ–°æ•°æ®â€ç»™è¯¯æ€äº†ï¼Œç›¸å½“äºç™½å¹²ã€‚</p>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆä¸ç›´æ¥åˆ -å†™-æ›´æ–°ï¼Ÿ</h3>
<p>ç¬¬äºŒæ¬¡ä¸ºä»€ä¹ˆä¸ç›´æ¥æ›´æ–°å‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸æ›´æ–°çš„æ—¶å€™å›å¡«å‘¢ï¼Ÿ</p>
<p>å¦‚æœé€‰æ‹©æ›´æ–°ç¼“å­˜â€ï¼Œå¿…é¡»ä¿è¯ â€œè¯»å–æ–°æ•°æ®â€ å’Œ â€œå†™å…¥ç¼“å­˜â€ æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼ˆå³ä¸å¯åˆ†å‰²çš„æ•´ä½“ï¼‰ã€‚ä½†è¿™æ ·æˆæœ¬é«˜ã€‚</p>
<p>æ›´æ–°ï¼ˆUpdateï¼‰ï¼š
ä½ éœ€è¦å…ˆæŠŠæ•°æ®ä»æ•°æ®åº“æŸ¥å‡ºæ¥ï¼ˆä¸€æ¬¡ IOï¼‰ã€‚
ä½ éœ€è¦æŠŠæ•°æ®åºåˆ—åŒ–ï¼ˆè½¬æˆ JSON ç­‰æ ¼å¼ï¼‰ã€‚
ä½ éœ€è¦æŠŠæ•´ä¸ªå¤§å­—ç¬¦ä¸²å‘ç»™ Redisï¼ˆå ç½‘ç»œå¸¦å®½ï¼‰ã€‚
Redis éœ€è¦ç”³è¯·å†…å­˜ç©ºé—´å­˜è¿™ä¸ªå¤§å¯¹è±¡ã€‚</p>
<p>åˆ é™¤ï¼ˆDeleteï¼‰ï¼šå°±æ˜¯ä¸€ä¸ªç®€å•çš„ DEL key å‘½ä»¤ã€‚æ—¶é—´å¤æ‚åº¦æ˜¯ O(1)ï¼Œéå¸¸å¿«ï¼Œä¸å å¸¦å®½ã€‚</p>
<p>æˆæœ¬æé«˜ï¼</p>
<p>æ­¥éª¤å¤šäº†ï¼Œå®¹æ˜“è¢«å…¶ä»–çº¿ç¨‹å¹²æ‰°ï¼Œå¹¶å‘ä¸å®‰å…¨äº†ã€‚</p>
<h3 data-id="heading-3">æ›´æ–°æ•°æ®çš„æ—¶å€™ä¸SETå€¼ï¼Œåªæœ‰æŸ¥è¯¢çš„æ—¶å€™æ‰SETå€¼</h3>
<p>å› ä¸ºè¯»è¯·æ±‚å» SET æ•°æ®æ˜¯æœ€å®‰å…¨çš„ã€‚å› ä¸ºå®ƒæ‹¿çš„æ•°æ®æ˜¯å®ƒåˆšåˆšä»æ•°æ®åº“æŸ¥å‡ºæ¥çš„ï¼Œç»å¯¹æ˜¯æœ€æ–°çš„ï¼Œç»å¯¹ä¸ä¼šå‡ºç°å¹¶å‘è¦†ç›–çš„é—®é¢˜ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ˜¯ä¸€ä¸ªå›¾ä¹¦ç®¡ç†å‘˜ï¼ˆå†™è¯·æ±‚ï¼‰ï¼Œä½ è¦æŠŠã€ŠJavaç¼–ç¨‹æ€æƒ³ã€‹è¿™æœ¬ä¹¦çš„ä»·æ ¼ä» 50 å…ƒæ”¹æˆ 60 å…ƒã€‚</p>
<p>âŒ é”™è¯¯çš„åšæ³•ï¼ˆå†™æ—¶å›å¡«/æ›´æ–°ï¼‰ï¼š
ä½ è·‘å»ä¹¦æ¶ï¼ˆMySQLï¼‰ï¼ŒæŠŠä»·æ ¼æ”¹æˆäº† 60 å…ƒã€‚
ä½ é¡ºæ‰‹æŠŠç¼“å­˜åŒºï¼ˆRedisï¼‰é‡Œçš„é‚£å¼ å¡ç‰‡ä¹Ÿæ”¹æˆäº† 60 å…ƒï¼ˆå›å¡«ï¼‰ã€‚</p>
<p>å¦ä¸€ä¸ªç®¡ç†å‘˜ï¼ˆçº¿ç¨‹Bï¼‰ä¹Ÿæ¥æ”¹ä»·æ ¼ï¼Œä»–æŠŠä»·æ ¼æ”¹æˆäº† 70 å…ƒï¼Œå¹¶ä¸”ä»–æ‰‹é€Ÿå¿«ï¼Œå…ˆæ›´æ–°äº†ç¼“å­˜å¡ç‰‡ã€‚
ç„¶åä½ çš„ç½‘ç»œæ¢å¤äº†ï¼Œä½ æŠŠå¡ç‰‡åˆæ”¹å›äº† 60 å…ƒã€‚</p>
<p>A write X as 60<br/>
B write X as 70<br/>
B update Cache X as 70<br/>
A update Cache X as 60</p>
<p>B update Cache Lost!<br/>
C Get X = 60</p>
<p>å¤šä¸ªçº¿ç¨‹äº¤å‰æ”¹ä¸€ä¸ªå€¼ï¼Œä¸¤ä¸ªå¯èƒ½è¢«æ‹†åˆ†çš„æ­¥éª¤ï¼Œå¤šä¸€ä¸ªæ­¥éª¤ï¼Œå°±å®¹æ˜“å‡ºé”™ã€‚</p>
<p>æ‰€ä»¥å†™çº¿ç¨‹åªä¿®æ”¹ä¸€æ¬¡</p>
<p>A write X as 60<br/>
B write X as 70<br/>
C Get X = 70 ï¼ˆé€Ÿåº¦å¿«ï¼‰<br/>
C update Cache X as 70</p>
<p>ä¸è¦æŠŠä¸¤æ¬¡å†™ï¼ˆå†™DBå’Œå†™Cacheï¼‰æ”¾åˆ°ä¸€èµ·å»ã€‚</p>
<h2 data-id="heading-4">â€œè¯»å†™ç©¿é€â€ (Read/Write Through)</h2>
<p>æ‰¾ä¸ªç®¡å®¶ï¼ˆç¼“å­˜å±‚ï¼‰å¸®ä½ ç®¡æ•°æ®åº“ã€‚</p>
<p>ä½ åªå’Œç¼“å­˜ï¼ˆRedisï¼‰æ‰“äº¤é“ã€‚</p>
<p>è¯»ï¼šä½ é—® Redisï¼ŒRedis å‘ç°æ²¡æœ‰ï¼Œå®ƒè‡ªå·±å»æ•°æ®åº“æŸ¥ï¼ŒæŸ¥å®Œè‡ªå·±å­˜ä¸€ä»½ï¼Œå†ç»™ä½ ã€‚</p>
<p>å†™ï¼šä½ å‘Šè¯‰ Redis â€œæ”¹æ•°æ®â€ï¼ŒRedis å…ˆæŠŠç¼“å­˜æ”¹äº†ï¼Œç„¶åå®ƒåŒæ­¥å»æŠŠæ•°æ®åº“ä¹Ÿæ”¹äº†ã€‚</p>
<h2 data-id="heading-5">â€œå¼‚æ­¥å›å†™â€ (Write Behind / Write Back)</h2>
<p>æ ¸å¿ƒæ€æƒ³ï¼šåªå†™ç¼“å­˜ï¼Œæ•°æ®åº“ï¼Ÿä»¥åå†è¯´ï¼</p>
<p>åœºæ™¯ï¼šå†™æ“ä½œç‰¹åˆ«å¤šï¼Œç‰¹åˆ«å¿«ï¼Œæ•°æ®åº“æ ¹æœ¬æ‰›ä¸ä½ï¼ˆæ¯”å¦‚ç›´æ’­é—´çš„ç‚¹èµæ•°ã€è®¡æ•°å™¨ï¼‰ã€‚</p>
<p>ä¼˜ç‚¹ï¼šæ€§èƒ½æé«˜ï¼ æ•°æ®åº“å‹åŠ›æå°ï¼Œå› ä¸ºæ˜¯æ‰¹é‡å†™çš„ã€‚
ç¼ºç‚¹ï¼šæ•°æ®ä¸å®‰å…¨ï¼ å¦‚æœ Redis æŒ‚äº†ï¼Œè¿˜æ²¡æ¥å¾—åŠåŒæ­¥çš„æ•°æ®å°±ä¸¢äº†ã€‚</p>
<p>é€‚ç”¨ï¼šå¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚ä¸é«˜ï¼Œä½†å¯¹æ€§èƒ½è¦æ±‚æé«˜çš„åœºæ™¯ï¼ˆæ¯”å¦‚ç‚¹èµã€æµè§ˆé‡ã€æ—¥å¿—ï¼‰ã€‚</p>
<h3 data-id="heading-6">å’Œè¯»å†™ç©¿é€çš„å¯¹æ¯”</h3>
<ol>
<li>Read/Write Throughï¼ˆè¯»å†™ç©¿é€ï¼‰â€”â€” â€œåŒæ­¥ç®¡å®¶â€
è¿™ä¸ªæ¨¡å¼ä¸‹ï¼ŒRedis å°±åƒä¸€ä¸ªè¶…çº§è´Ÿè´£ä»»çš„ç®¡å®¶ã€‚</li>
</ol>
<p>ä½ ï¼ˆåº”ç”¨ç¨‹åºï¼‰ï¼šæŠŠæ•°æ®äº¤ç»™ç®¡å®¶ï¼Œè¯´â€œæŠŠåº“å­˜æ”¹æˆ 9â€ã€‚<br/>
ç®¡å®¶ï¼ˆRedisï¼‰ï¼šâ€œå¥½çš„ä¸»äººï¼â€<br/>
ä»–å…ˆæŠŠå®¶é‡Œï¼ˆå†…å­˜/ç¼“å­˜ï¼‰çš„åº“å­˜æ”¹æˆ 9ã€‚<br/>
ç„¶åï¼Œä»–äº²è‡ªæ‹¿ç€è´¦æœ¬ï¼Œè·‘ä¸€è¶Ÿé“¶è¡Œï¼ˆæ•°æ®åº“ï¼‰ï¼ŒæŠŠæ•°æ®åº“é‡Œçš„åº“å­˜ä¹Ÿæ”¹æˆ 9<br/>
ç›´åˆ°é“¶è¡Œç¡®è®¤æ”¹å¥½äº†ï¼Œä»–æ‰å›æ¥è·Ÿä½ è¯´ï¼šâ€œä¸»äººï¼Œæå®šäº†ï¼â€<br/>
ç‰¹ç‚¹ï¼šåŒæ­¥ã€‚ä½ å¿…é¡»ç­‰ç®¡å®¶ä»é“¶è¡Œå›æ¥ï¼Œä½ æ‰èƒ½ç»§ç»­å¹²ä¸‹ä¸€ä»¶äº‹ã€‚æ•°æ®ç»å¯¹ä¸€è‡´ï¼Œä½†ç¨å¾®æ…¢ä¸€ç‚¹ç‚¹ã€‚</p>
<ol start="2">
<li>Write Behind Cachingï¼ˆå¼‚æ­¥å›å†™/å†™å›ï¼‰â€”â€” â€œç”©æ‰‹æŒæŸœâ€
è¿™ä¸ªæ¨¡å¼ä¸‹ï¼ŒRedis å°±åƒä¸€ä¸ªç‰¹åˆ«æ‡’ä½†æ˜¯æ•ˆç‡é«˜çš„ç§˜ä¹¦ã€‚</li>
</ol>
<p>ä½ ï¼ˆåº”ç”¨ç¨‹åºï¼‰ï¼šæŠŠæ•°æ®æ‰”ç»™ç§˜ä¹¦ï¼Œè¯´â€œæŠŠåº“å­˜æ”¹æˆ 9â€ã€‚<br/>
ç§˜ä¹¦ï¼ˆRedisï¼‰ï¼šâ€œæ”¶åˆ°ï¼â€ï¼ˆå•ªçš„ä¸€ä¸‹ç›–ä¸ªç« ï¼Œç«‹é©¬å›å¤ä½ ï¼‰<br/>
ä»–åªæŠŠå®¶é‡Œï¼ˆå†…å­˜/ç¼“å­˜ï¼‰çš„åº“å­˜æ”¹æˆ 9ã€‚<br/>
è‡³äºé“¶è¡Œï¼ˆæ•°æ®åº“ï¼‰ï¼Ÿä»–è®°åœ¨å°æœ¬æœ¬ä¸Šï¼šâ€œå›å¤´æœ‰ç©ºå†å­˜å§â€ã€‚<br/>
ä»–æ ¹æœ¬ä¸å»é“¶è¡Œï¼Œç›´æ¥è·Ÿä½ è¯´â€œæå®šäº†â€ï¼Œè®©ä½ å»å¹²åˆ«çš„ã€‚<br/>
ä»–ä»€ä¹ˆæ—¶å€™å»é“¶è¡Œï¼Ÿç­‰ä»–å¿ƒæƒ…å¥½ï¼Œæˆ–è€…æ”’äº†ä¸€å¤§å †å°æœ¬æœ¬ï¼Œæ‰æ…¢æ‚ æ‚ å»æ›´æ–°æ•°æ®åº“ã€‚<br/>
ç‰¹ç‚¹ï¼šå¼‚æ­¥ã€‚ä½ ä¸ç”¨ç­‰ä»–ï¼Œé€Ÿåº¦é£å¿«ã€‚ä½†å¦‚æœä»–è¿˜æ²¡æ¥å¾—åŠå»é“¶è¡Œï¼Œçªç„¶çŒæ­»ï¼ˆæœåŠ¡å™¨å®•æœºï¼‰äº†ï¼Œé‚£è¿™ç¬”é’±ï¼ˆæ•°æ®ï¼‰å°±ä¸¢äº†ã€‚</p>
<h3 data-id="heading-7">å’ŒCache Asideçš„å¯¹æ¯”</h3>
<p>Read/Write Throughï¼ˆç©¿é€æ¨¡å¼ï¼‰ï¼Œç¼“å­˜æ˜¯â€œé—¨å«â€ï¼Œæ‰€æœ‰è¯»å†™éƒ½å¿…é¡»ç»è¿‡å®ƒï¼Œå®ƒè´Ÿè´£åŒæ­¥æ›´æ–°æ•°æ®åº“ã€‚</p>
<p>Cache-Aside æ˜¯ï¼š</p>
<p>è¯»çš„æ—¶å€™ï¼šå…ˆçœ‹ä¸€çœ¼æ—è¾¹çš„ç¼“å­˜ï¼Œæ²¡æœ‰å°±è‡ªå·±å»æ•°æ®åº“æ‹¿ï¼Œé¡ºä¾¿æŠŠç»“æœæ”¾å›ç¼“å­˜ï¼ˆå›å¡«ï¼‰ã€‚
å†™çš„æ—¶å€™ï¼šç›´æ¥æ”¹æ•°æ®åº“ï¼Œç„¶åé¡ºæ‰‹æŠŠæ—è¾¹çš„ç¼“å­˜åˆ æ‰ï¼Œè®©ç¼“å­˜å¤±æ•ˆã€‚
æ•´ä¸ªè¿‡ç¨‹ï¼Œç¼“å­˜å§‹ç»ˆæ˜¯ä¸ªâ€œå¤–æŒ‚â€ï¼Œä¸æ˜¯å¿…ç»ä¹‹è·¯ã€‚</p>
<h2 data-id="heading-8">ä¸€èˆ¬ç­–ç•¥</h2>
<p>è¯´è½¬è´¦æœ¬æ¥å°±è¦æ…¢ä¸€ç‚¹å¥½ï¼Œä¸ºäº†å®‰å…¨ã€‚</p>
<p>ç‚¹èµå•Šè¿™äº›ä¸œè¥¿ä¸æ˜¯é‚£ä¹ˆé‡è¦ï¼Œå¯ä»¥é€šè¿‡æœ€ç»ˆä¸€è‡´æ€§æ¥å®ç°ï¼Œè¿™äº›å°±æ²¡æœ‰å¿…è¦è¦å°±æ˜¯è¦è®©äººç­‰å¤ªä¹…ã€‚</p>
<p>ä¸åŒçš„ä¸šåŠ¡ç”¨ä¸åŒçš„ç­–ç•¥ã€‚</p>
<p>åœ¨é«˜å¹¶å‘ç³»ç»Ÿä¸­ï¼Œä¿®æ”¹æ•°æ®è¿˜æœªå®Œæˆçš„æ—¶å€™ï¼Œä¸­é—´æŸ¥è¯¢åˆ°æ—§å€¼çš„æƒ…å†µï¼Œæ˜¯æ— æ³•å®Œå…¨é¿å…çš„ï¼Œä½†æˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œå†³å®šæ˜¯å¦å®¹å¿å®ƒã€ä»¥åŠå¦‚ä½•æ§åˆ¶å®ƒçš„å½±å“èŒƒå›´ã€‚</p>
<p>å¼ºä¸€è‡´æ€§åœºæ™¯
åœºæ™¯ï¼šé“¶è¡Œä½™é¢ã€æ”¯ä»˜çŠ¶æ€ã€åº“å­˜è¶…å–ã€è®¢å•åˆ›å»ºã€‚
ç”¨æˆ·æ„Ÿå—ï¼šæˆ‘è½¬äº† 100 å—ï¼Œå¯¹æ–¹è¯´æ²¡æ”¶åˆ°ï¼›æˆ‘ä¹°äº†æœ€åä¸€ä»¶å•†å“ï¼Œç»“æœåˆ«äººä¹Ÿä¹°åˆ°äº† â€”â€” ä¿¡ä»»å´©å¡Œï¼</p>
<p>ç­–ç•¥ï¼šå¿…é¡»ç”¨å¼ºä¸€è‡´æ€§æ‰‹æ®µï¼š</p>
<p>æ•°æ®åº“äº‹åŠ¡ + ä¹è§‚é”/æ‚²è§‚é”
å¼ºåˆ¶è¯»ä¸»åº“ï¼ˆç»•è¿‡ä»åº“ï¼‰</p>
<h2 data-id="heading-9">ç§’æ€ä¿®æ”¹åº“å­˜çš„åœºæ™¯</h2>
<p>ç§’æ€å•†å“ï¼Œä¿®æ”¹åº“å­˜çš„æ€ä¹ˆå¼„ï¼Ÿ</p>
<p>åˆ†å±‚å‰Šå³° + åŸå­æ“ä½œ + å¼‚æ­¥è§£è€¦ã€‚</p>
<p>å‰åç«¯é˜²åˆ·ï¼Œä¸€ä¸ªäºº3ç§’é’Ÿä¹‹å†…åªèƒ½è®¿é—®ä¸€æ¬¡ï¼Œæ‹’ç»æœºå™¨äººã€‚</p>
<p>ç”¨ Redis å½“â€œå‰ç½®åº“å­˜â€</p>
<p>é¢„çƒ­åº“å­˜ï¼š
ç§’æ€å¼€å§‹å‰ï¼ŒæŠŠå•†å“çš„åº“å­˜æ•°é‡ï¼ˆæ¯”å¦‚ 100ï¼‰æå‰å†™å…¥ Redisã€‚
Key: stock:product_123, Value: 100</p>
<p>åŸå­æ‰£å‡ï¼š
ç”¨æˆ·ç‚¹å‡»è´­ä¹°æ—¶ï¼Œä½ çš„æœåŠ¡ä¸æ˜¯å»æŸ¥ MySQLï¼Œè€Œæ˜¯ç›´æ¥å‘ Redis å‘é€ä¸€ä¸ªåŸå­æ“ä½œã€‚
æŸ¥è¯¢å¹¶ä¸”æ‰£å‡ã€‚
è¦ä¹ˆæˆåŠŸï¼Œè¦ä¹ˆå¤±è´¥å›æ»šã€‚</p>
<p>å¦‚æœè¿”å›å€¼ &gt;= 0ï¼Œè¯´æ˜æ‰£å‡æˆåŠŸï¼
å¦‚æœè¿”å›å€¼ == -1ï¼Œè¯´æ˜åº“å­˜æ²¡äº†ï¼Œç›´æ¥å‘Šè¯‰ç”¨æˆ·â€œæ‰‹æ…¢äº†â€ã€‚</p>
<p>Redis æ˜¯å†…å­˜æ“ä½œï¼Œé€Ÿåº¦æå¿«ï¼ˆå¾®ç§’çº§ï¼‰ã€‚</p>
<p>å½“ Redis æ‰£å‡æˆåŠŸåï¼Œç«‹åˆ»æ„é€ ä¸€æ¡æ¶ˆæ¯ï¼Œå‘é€åˆ° Kafka æˆ– RocketMQï¼ŒæŠŠè¿™ä¸ªæˆåŠŸçš„è®¢å•ä¿¡æ¯ï¼Œæœ€ç»ˆæŒä¹…åŒ–åˆ° MySQL é‡Œã€‚</p>
<p>æ¶ˆæ¯å†…å®¹ï¼š{ "user_id": 1001, "product_id": 123, "count": 1 }</p>
<p>ç«‹åˆ»è¿”å›ç»™ç”¨æˆ·ï¼šâ€œæ­å–œä½ ï¼ŒæŠ¢è´­æˆåŠŸï¼â€</p>
<p>åå°æ¶ˆè´¹è€…ä» MQ é‡Œæ…¢æ…¢æ¶ˆè´¹è¿™æ¡æ¶ˆæ¯ï¼š</p>
<p>å†æ¬¡æ ¡éªŒä¸€ä¸‹ï¼ˆé˜²é‡æ”¾æ”»å‡»ï¼‰ã€‚</p>
<p>åœ¨ MySQL é‡Œåˆ›å»ºè®¢å•ã€æ‰£å‡çœŸå®åº“å­˜ã€æ‰£ç”¨æˆ·ä½™é¢ç­‰ã€‚</p>
<p>è¿™æ ·å†™çš„å¥½å¤„ï¼š</p>
<p>ç”¨æˆ·ä½“éªŒæä½³ï¼šç”¨æˆ·æ„Ÿè§‰â€œç§’å›â€ï¼Œå› ä¸ºæ²¡ç­‰æ•°æ®åº“ã€‚</p>
<p>ç³»ç»Ÿè§£è€¦ï¼šå³ä½¿ MySQL æŒ‚äº†ï¼Œæ¶ˆæ¯è¿˜åœ¨ MQ é‡Œï¼Œç­‰ DB æ¢å¤äº†å†å¤„ç†ã€‚</p>
<p>å‰Šå³°å¡«è°·ï¼šMQ æŠŠç¬é—´çš„å†™å‹åŠ›ï¼Œå˜æˆäº†å¹³ç¼“çš„åå°ä»»åŠ¡ã€‚</p>
<h2 data-id="heading-10">å‚è€ƒ</h2>
<p>[1] ç¼“å­˜æ›´æ–°ç­–ç•¥ä¸æ•°æ®ä¸€è‡´æ€§ä¿éšœ <a href="https://juejin.cn/post/7585463195200946226" target="_blank" title="https://juejin.cn/post/7585463195200946226">juejin.cn/post/758546â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š7ä¸ªè¢«ä½ä¼°çš„Composition APIæŠ€å·§è®©æ¸²æŸ“æé€Ÿ40%]]></title>    <link>https://juejin.cn/post/7588098335790923776</link>    <guid>https://juejin.cn/post/7588098335790923776</guid>    <pubDate>2025-12-28T04:31:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588098335790923776" data-draft-id="7588093282531049524" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š7ä¸ªè¢«ä½ä¼°çš„Composition APIæŠ€å·§è®©æ¸²æŸ“æé€Ÿ40%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-28T04:31:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š7ä¸ªè¢«ä½ä¼°çš„Composition APIæŠ€å·§è®©æ¸²æŸ“æé€Ÿ40%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T04:31:55.000Z" title="Sun Dec 28 2025 04:31:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Vue3æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š7ä¸ªè¢«ä½ä¼°çš„Composition APIæŠ€å·§è®©æ¸²æŸ“æé€Ÿ40%</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Vue 3çš„Composition APIä¸ä»…é‡æ„äº†ä»£ç ç»„ç»‡æ–¹å¼ï¼Œæ›´ä¸ºæ€§èƒ½ä¼˜åŒ–æä¾›äº†æ–°çš„å¯èƒ½æ€§ã€‚å°½ç®¡è®¸å¤šå¼€å‘è€…å·²ç»ç†Ÿæ‚‰äº†<code>ref</code>ã€<code>reactive</code>å’Œ<code>watch</code>ç­‰åŸºç¡€APIï¼Œä½†ä¸€äº›éšè—çš„æŠ€å·§å´è¢«ä¸¥é‡ä½ä¼°ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨7ä¸ªé²œä¸ºäººçŸ¥çš„Composition APIæŠ€å·§ï¼Œç»“åˆçœŸå®åœºæ™¯å’Œæ€§èƒ½æµ‹è¯•æ•°æ®ï¼Œå±•ç¤ºå¦‚ä½•é€šè¿‡è¿™äº›æ–¹æ³•å®ç°é«˜è¾¾40%çš„æ¸²æŸ“é€Ÿåº¦æå‡ã€‚</p>
<h2 data-id="heading-2">ä¸»ä½“</h2>
<h3 data-id="heading-3">1. <code>shallowRef</code>ä¸<code>shallowReactive</code>ï¼šé¿å…æ·±åº¦å“åº”å¼çš„å¼€é”€</h3>
<p><strong>é—®é¢˜</strong>ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒVueçš„å“åº”å¼ç³»ç»Ÿä¼šå¯¹å¯¹è±¡è¿›è¡Œæ·±åº¦é€’å½’ä»£ç†ï¼ˆå¦‚<code>reactive</code>æˆ–<code>ref</code>ï¼‰ï¼Œè¿™åœ¨å¤„ç†å¤§å‹å¯¹è±¡æ—¶å¯èƒ½å¯¼è‡´ä¸å¿…è¦çš„æ€§èƒ½æŸè€—ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li><strong><code>shallowRef</code></strong>ï¼šä»…å¯¹<code>.value</code>å±æ€§åšå“åº”å¼è·Ÿè¸ªï¼Œå†…éƒ¨å€¼å˜åŒ–ä¸ä¼šè§¦å‘æ›´æ–°ã€‚</li>
<li><strong><code>shallowReactive</code></strong>ï¼šåªä»£ç†å¯¹è±¡çš„ç¬¬ä¸€å±‚å±æ€§ï¼Œæ·±å±‚å±æ€§å˜æ›´éœ€æ‰‹åŠ¨è§¦å‘æ›´æ–°ã€‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> largeList = <span class="hljs-title function_">shallowRef</span>([...]); <span class="hljs-comment">// åˆ—è¡¨å†…éƒ¨å˜åŒ–ä¸ä¼šè§¦å‘æ¸²æŸ“</span>
<span class="hljs-keyword">const</span> config = <span class="hljs-title function_">shallowReactive</span>({ <span class="hljs-attr">a</span>: { <span class="hljs-attr">b</span>: <span class="hljs-number">1</span> } }); <span class="hljs-comment">// config.a.bå˜åŒ–éœ€æ‰‹åŠ¨å¤„ç†</span>
</code></pre>
<p><strong>æ€§èƒ½æ”¶ç›Š</strong>ï¼šåœ¨æµ‹è¯•ä¸­ï¼Œå¯¹ä¸€ä¸ªåŒ…å«1000é¡¹åµŒå¥—å¯¹è±¡çš„åˆ—è¡¨ä½¿ç”¨<code>shallowReactive</code>åï¼Œåˆå§‹åŒ–æ—¶é—´å‡å°‘35%ã€‚</p>
<hr/>
<h3 data-id="heading-4">2. <code>markRaw</code>ï¼šå½»åº•è·³è¿‡Proxyä»£ç†</h3>
<p><strong>åœºæ™¯</strong>ï¼šæŸäº›æ•°æ®ï¼ˆå¦‚ç¬¬ä¸‰æ–¹åº“å®ä¾‹ã€é™æ€é…ç½®ï¼‰ä¸éœ€è¦å“åº”å¼ç‰¹æ€§æ—¶ï¼Œå¼ºåˆ¶Vueè·³è¿‡ä»£ç†ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { markRaw, reactive } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">const</span> staticData = <span class="hljs-title function_">markRaw</span>({ ... });
<span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({ 
  <span class="hljs-attr">list</span>: [],
  <span class="hljs-attr">utils</span>: staticData <span class="hljs-comment">// utilsä¸ä¼šè¢«ä»£ç†</span>
});
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ</strong>ï¼šé¿å…æ— æ„ä¹‰çš„Proxyåˆ›å»ºå’Œå†…å­˜å ç”¨ï¼Œå°¤å…¶åœ¨SSRæˆ–é«˜é¢‘æ•°æ®äº¤æ¢åœºæ™¯ä¸‹æ•ˆæœæ˜¾è‘—ã€‚</p>
<hr/>
<h3 data-id="heading-5">3. <code>customRef</code>å®ç°é˜²æŠ–/èŠ‚æµæ§åˆ¶æ›´æ–°é¢‘ç‡</h3>
<p>ä¼ ç»Ÿæ–¹æ³•å¯èƒ½åœ¨æ¨¡æ¿ä¸­æ»¥ç”¨é˜²æŠ–å‡½æ•°ï¼Œè€Œåˆ©ç”¨<code>customRef</code>å¯ä»¥å°†é€»è¾‘å°è£…åˆ°å“åº”å¼ç³»ç»Ÿä¸­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useDebouncedRef</span>(<span class="hljs-params">value, delay = <span class="hljs-number">200</span></span>) {
  <span class="hljs-keyword">let</span> timeout;
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">customRef</span>(<span class="hljs-function">(<span class="hljs-params">track, trigger</span>) =&gt;</span> ({
    <span class="hljs-title function_">get</span>(<span class="hljs-params"/>) {
      <span class="hljs-title function_">track</span>();
      <span class="hljs-keyword">return</span> value;
    },
    <span class="hljs-title function_">set</span>(<span class="hljs-params">newValue</span>) {
      <span class="hljs-built_in">clearTimeout</span>(timeout);
      timeout = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        value = newValue;
        <span class="hljs-title function_">trigger</span>();
      }, delay);
    }
  }));
}
</code></pre>
<p><strong>å®æµ‹ç»“æœ</strong>ï¼šåœ¨è¾“å…¥æ¡†è”åŠ¨æœç´¢çš„åœºæ™¯ä¸‹ï¼Œå‡å°‘80%çš„æ— æ„ä¹‰æ¸²æŸ“ã€‚</p>
<hr/>
<h3 data-id="heading-6">4. <code>readonly + computed</code>:  ä¸å¯å˜æ•°æ®çš„æ€§èƒ½çº¢åˆ©</h3>
<p>ç»„åˆä½¿ç”¨è¿™ä¸¤ä¸ªAPIå¯ä»¥åˆ›å»ºé«˜æ•ˆè¡ç”ŸçŠ¶æ€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> original = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> });
<span class="hljs-keyword">const</span> doubleCount = <span class="hljs-title function_">readonly</span>(<span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> original.<span class="hljs-property">count</span> * <span class="hljs-number">2</span>));
</code></pre>
<ul>
<li><strong>ä¼˜åŠ¿1</strong>: <code>readonly</code>é˜²æ­¢æ„å¤–ä¿®æ”¹å¯¼è‡´çš„é¢å¤–æ¸²æŸ“</li>
<li><strong>ä¼˜åŠ¿2</strong>: <code>computed</code>ç¼“å­˜ç»“æœé¿å…é‡å¤è®¡ç®—</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>: Vuex/PiniaçŠ¶æ€æ´¾ç”Ÿã€è·¨ç»„ä»¶å…±äº«è®¡ç®—é€»è¾‘æ—¶å°¤å…¶æœ‰æ•ˆã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-7">5. <code>effectScope</code>:  ç²¾å‡†æ§åˆ¶å‰¯ä½œç”¨ç”Ÿå‘½å‘¨æœŸ</h3>
<p>Vue3.2+å¼•å…¥çš„APIå¯æ‰¹é‡ç®¡ç†ç»„ä»¶çš„å‰¯ä½œç”¨ï¼ˆå¦‚å®šæ—¶å™¨ã€äº‹ä»¶ç›‘å¬ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { effectScope } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">useComplexLogic</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> scope = <span class="hljs-title function_">effectScope</span>();
  
  scope.<span class="hljs-title function_">run</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">watch</span>(data, <span class="hljs-function">() =&gt;</span> {...});
    <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {...});
  });

  <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> scope.<span class="hljs-title function_">stop</span>()); <span class="hljs-comment">//ä¸€é”®æ¸…é™¤æ‰€æœ‰å…³è”å‰¯ä½œç”¨ï¼</span>
}
</code></pre>
<p><strong>æ ¸å¿ƒä»·å€¼</strong>:</p>
<ul>
<li><strong>å†…å­˜æ³„æ¼é˜²æŠ¤</strong>:  ç¡®ä¿ç»„ä»¶å¸è½½æ—¶å½»åº•æ¸…ç†èµ„æº</li>
<li><strong>æ€§èƒ½æå‡</strong>:  æ¯”æ‰‹åŠ¨ç»´æŠ¤å¤šä¸ªcleanupå‡½æ•°æ›´é«˜æ•ˆï¼ˆæµ‹è¯•æ˜¾ç¤ºå†…å­˜å ç”¨ä¸‹é™20%ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-8">6. <code>toRaw</code>:  éœ€è¦éä»£ç†åŸå§‹å€¼æ—¶çš„é«˜æ•ˆè®¿é—®</h3>
<p>å½“éœ€è¦è¯»å–å¤§é‡æ•°æ®ä½†ä¸è§¦å‘ä¾èµ–æ”¶é›†æ—¶ï¼ˆå¦‚å¯¼å‡ºæ•°æ®ã€æ·±æ¯”è¾ƒï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> rawData = <span class="hljs-title function_">toRaw</span>(reactiveData); <span class="hljs-comment">//ç»•è¿‡Proxyç›´æ¥è·å–åŸå¯¹è±¡</span>
</code></pre>
<p>æ³¨æ„ä¸JSON.parse(JSON.stringify(state))æ›´é«˜æ•ˆï¼</p>
<hr/>
<p>###7. <code>&lt;script setup&gt;</code>ç¼–è¯‘æ—¶ä¼˜åŒ–é»‘ç§‘æŠ€</p>
<p>ä¸¥æ ¼æ¥è¯´è¿™ä¸æ˜¯Composition APIçš„ä¸€éƒ¨åˆ†ï¼Œä½†ä¸å®ƒæ·±åº¦ååŒï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// ğŸ‘‡ç¼–è¯‘å™¨ä¼šå°†å…¶æå‡åˆ°æ¨¡å—ä½œç”¨åŸŸï¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PI</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>; 

<span class="hljs-comment">// ğŸ‘‡æ¡ä»¶ç¼–è¯‘ä¼˜åŒ–é™æ€èŠ‚ç‚¹</span>
<span class="hljs-keyword">const</span> isDev = <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">DEV</span>;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"isDev"</span>&gt;</span>Debug Mode<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p><strong>åº•å±‚åŸç†</strong>: Vue SFCç¼–è¯‘å™¨ä¼šï¼š</p>
<ol>
<li><strong>é™æ€æå‡ï¼ˆHoistingï¼‰</strong>:  å°†å¸¸é‡ç§»å‡ºæ¸²æŸ“å‡½æ•°</li>
<li><strong>Patch Flagsæ ‡è®°</strong>:  åŠ¨æ€èŠ‚ç‚¹å·®å¼‚æ›´æ–°ç²¾åº¦æ›´é«˜</li>
<li><strong>Tree-shakingå‹å¥½</strong>:  æœªä½¿ç”¨çš„å¯¼å…¥ä¼šè¢«ç§»é™¤</li>
</ol>
<hr/>
<h2 data-id="heading-9">æ€»ç»“</h2>
<p>ä»é¿å…æ·±åº¦å“åº”å¼çš„å†—ä½™å¤„ç†(<code>shallowRef</code>)åˆ°ç²¾ç¡®æ§åˆ¶å‰¯ä½œç”¨(<code>effectScope</code>) ï¼Œè¿™äº›æŠ€å·§å…±åŒæ„æˆäº†Vue3é«˜æ€§èƒ½åº”ç”¨çš„ç§˜å¯†æ­¦å™¨ ã€‚å®é™…é¡¹ç›®ä¸­ ï¼Œå»ºè®®é€šè¿‡Chrome DevToolsçš„Performanceé¢æ¿éªŒè¯ä¼˜åŒ–æ•ˆæœ â€”â€”å½“ä½ çœ‹åˆ°è„šæœ¬æ‰§è¡Œæ—¶é—´ç¼©çŸ­ ã€FPSæ›²çº¿è¶‹äºå¹³ç¨³æ—¶ ï¼Œå°±ä¼šæ„è¯†åˆ°Composition APIçš„è®¾è®¡è¿œæ¯”è¡¨é¢çœ‹èµ·æ¥æ›´å¼ºå¤§ ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¿™ä¸€å¹´ï¼Œè®©æˆ‘äººç”Ÿäº‹ä¸šå¼€æŒ‚çš„13ä¸ªè®¤çŸ¥]]></title>    <link>https://juejin.cn/post/7588140921248038950</link>    <guid>https://juejin.cn/post/7588140921248038950</guid>    <pubDate>2025-12-28T04:42:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588140921248038950" data-draft-id="7588109656041177134" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¿™ä¸€å¹´ï¼Œè®©æˆ‘äººç”Ÿäº‹ä¸šå¼€æŒ‚çš„13ä¸ªè®¤çŸ¥"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-28T04:42:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ˜ŸAIå·¥ä½œå®¤"/> <meta itemprop="url" content="https://juejin.cn/user/2250051536050763"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¿™ä¸€å¹´ï¼Œè®©æˆ‘äººç”Ÿäº‹ä¸šå¼€æŒ‚çš„13ä¸ªè®¤çŸ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2250051536050763/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ˜ŸAIå·¥ä½œå®¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T04:42:34.000Z" title="Sun Dec 28 2025 04:42:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å“ˆå–½ï¼Œå¤§å®¶å¥½ï¼</p>
<p>æˆ‘æ˜¯é˜¿æ˜ŸğŸ‘‹</p>
<p>ä»Šå¹´æˆ‘æœ‰å‡ ä¸ªè®¤çŸ¥è¢«å½»åº•æ”¹å˜äº†ã€‚è¿™å‡ ä¸ªè®¤çŸ¥ä¹Ÿå½»åº•æ”¹å˜äº†æˆ‘çš„äººç”Ÿï¼Œ</p>
<p>å…³äºäº‹ä¸šä¹Ÿæ›´å…³äºæˆé•¿ã€‚</p>
<p>åˆ†äº«ç»™å¤§å®¶ğŸ‘‡</p>
<h2 data-id="heading-0">01Â <strong>æ„Ÿæ©ï¼šä¸æ˜¯ä½ ä¸å¯æ›¿ä»£ï¼Œä½ è¸©ä¸­äº†çº¢åˆ©è€Œå·²</strong></h2>
<p>ä»äº‹ AI è¡Œä¸šï¼Œä½ ä¼šå‘ç°å¾ˆå¤šå­¦å†éå¸¸ä¼˜ç§€çš„äººï¼Œæ¯å¤©éƒ½åœ¨æ‹¼å‘½å·ã€‚Â <strong>å¹¶ä¸æ˜¯ä½ çœŸçš„æœ‰ä»€ä¹ˆä¸å¯å–ä»£çš„ï¼Œè€Œæ˜¯ä½ ä»¬ä¸€èµ·åƒä¸Šäº†æ—¶ä»£çš„çº¢åˆ©ï¼Œç¤¾ä¼šç»™ä½ æä¾›äº†å‘å±•ç©ºé—´è€Œå·²ã€‚</strong></p>
<h2 data-id="heading-1">02Â <strong>èº«å£æ„åˆä¸€ï¼šä¸–ç•Œä¸ºä½ æ˜¾åŒ–</strong></h2>
<p>æˆ‘ä¹‹å‰æ€»æ˜¯æœ‰å¾ˆå¤šå¾ˆå¤šæƒ³æ³•ï¼Œè„‘å­é‡Œåƒçˆ†ç±³èŠ±ä¸€æ ·ï¼Œä¸€å¤©ä¸Šåˆå¯èƒ½æœ‰åå‡ äºŒåä¸ªæƒ³æ³•ï¼Œä¸€å‘¨ä¹‹å†…å¯èƒ½ä¼šæ”¹å˜ä¸‰æ¬¡åŠ¨ä½œï¼Œè¿™å°±ä»£è¡¨æˆ‘çš„æƒ³æ³•å’ŒåŠ¨ä½œæ˜¯å®Œå…¨ä¸åˆä¸€çš„ã€‚</p>
<p>åæ¥æˆ‘æ¥è§¦åˆ°ä¸€äº›æ­£è§‰è§‚å¿µï¼Œè¯´Â <strong>ä¸€ä¸ªäººçš„æƒ³æ³•ã€è¯´å‡ºæ¥çš„è¯ã€ç°å®ä¸­çš„åŠ¨ä½œå¿…é¡»è¦åˆä¸€ï¼Œè¿™æ ·ä¸–ç•Œæ‰èƒ½çŸ¥é“ä½ çœŸæ­£æƒ³è¦ä»€ä¹ˆã€‚</strong> Â å¦åˆ™ï¼Œä¸–ç•Œä¸çŸ¥é“ä½ åˆ°åº•æƒ³è¦ä»€ä¹ˆï¼Œä½ æ¥è§¦çš„äººä¹Ÿä¸çŸ¥é“ä½ è¯´çš„è¯æ˜¯ä¸æ˜¯ä½ çœŸæ­£çš„æƒ³æ³•ã€‚</p>
<p>åˆ«äººåªèƒ½é ä½ è¯´çš„è¯å’Œä½ åšçš„äº‹æ¥åˆ¤æ–­ï¼Œè€Œå¦‚æœè¿™ä¸¤è€…å’Œä½ å†…å¿ƒçš„æƒ³æ³•ä¸ä¸€è‡´ï¼Œä½ çš„ç°å®å°±ä¼šå’Œä½ çš„æ€ç»´ä¸¥é‡è„±èŠ‚ï¼Œä½ åªä¼šè¶Šæ¥è¶Šå‰²è£‚ã€‚æ…¢æ…¢åœ°ä½ å¯èƒ½ä¼šè§‰å¾—è‡ªå·±çš„ç›®æ ‡ä¸å¯¹ï¼Œä½†å…¶å®å¹¶ä¸æ˜¯ç›®æ ‡ä¸å¯¹ï¼ŒÂ <strong>è€Œæ˜¯ä½ è„‘å­é‡Œæƒ³çš„æ²¡æœ‰è½å®åˆ°ä½ çš„è¯­è¨€å’Œè¡ŒåŠ¨ä¸Šï¼Œå·®ä¹‹åƒé‡Œã€‚</strong></p>
<p>ä½ å¯èƒ½ä¼šå› æ­¤æ›´æ¢ç›®æ ‡ï¼Œä½†å®é™…ä¸Šåªæ˜¯å› ä¸ºä¸‰è€…æ²¡æœ‰å¯¹é½ã€‚Â <strong>æ‰€ä»¥å¦‚æœè¦åšä¸€ä»¶äº‹ï¼Œè¿™ä¸‰è€…å¿…é¡»å¯¹é½å°±è¡Œäº†ã€‚</strong></p>
<h2 data-id="heading-2">03Â <strong>åœæ­¢ç²¾ç¥å†…è€—ï¼šä¸å–œæ¬¢å°±è·‘</strong></h2>
<p>ä»¥å‰çœ‹åˆ°è‡ªå·±ä¸å–œæ¬¢çš„äººå’Œäº‹ï¼Œæˆ‘ä¼šè§‰å¾—ä¸–ç•Œæ˜¯å‚å·®çš„ï¼Œæ‰€ä»¥è¦å¿è€ã€åŒ…å®¹ã€‚ç°åœ¨ä¼šè§‰å¾—ï¼ŒÂ <strong>å¦‚æœæ˜¯ä¸å–œæ¬¢çš„ä½æƒ…å•†çš„äººï¼Œæˆ‘ä¹‹å‰ä¼šè§£é‡Šä¸ºä»–ä¹Ÿä¸å®¹æ˜“ï¼Œç°åœ¨å°±æ’’è…¿è·‘å°±å¥½ï¼Œä¹Ÿä¸å†å†…è€—è‡ªå·±äº†ã€‚</strong></p>
<p>äº‹æƒ…è¶Šæ¥è¶Šå¤šã€è¶Šæ¥è¶Šå¿™ï¼Œæˆ‘ä¸èƒ½å†æŠŠæ—¶é—´èŠ±åœ¨å®¹å¿ä¸€äº›æˆ‘æœ¬æ¥å°±ä¸è®¤å¯çš„äººå’Œäº‹ä¸Šï¼ŒÂ <strong>æˆ‘åªç”¨å»è¿½æ±‚æˆ‘è®¤å¯çš„å°±å¯ä»¥äº†ã€‚</strong></p>
<h2 data-id="heading-3">04Â <strong>å¤§èƒ†æƒ³è±¡ï¼šæŠŠç›®æ ‡è¯´å‡ºæ¥ï¼Œè®©ä¸–ç•Œå¸®ä½ å®ç°</strong></h2>
<p>ä»Šå¹´ 7 æœˆä»½æˆ‘æœ‰ä¸€ä»¶ç‰¹åˆ«ç¥å¥‡çš„äº‹ã€‚æˆ‘ä¸€ç›´åœ¨å¹»æƒ³ï¼Œä» 7 æœˆåˆ° 12 æœˆè¦è¿›è¡Œ 6â€“7 æ¬¡å®£å‘ï¼Œè®©åˆ«äººçŸ¥é“æˆ‘ã€çŸ¥é“æˆ‘çš„è‡ªåª’ä½“å“ç‰Œã€çŸ¥é“æˆ‘çš„å·¥ä½œå®¤ã€çŸ¥é“æˆ‘æœ‰ä»€ä¹ˆæ ·çš„å•†ä¸šæ‰¿æ¥èƒ½åŠ›ï¼Œè¿™æ ·åˆ«äººæ‰èƒ½å’Œæˆ‘åˆä½œï¼Œæˆ‘ä¹Ÿæ‰èƒ½æ›´å¥½åœ°æä¾›æœåŠ¡ã€‚</p>
<p>å½“æ—¶æˆ‘è¯´è¿™äº›è¯çš„æ—¶å€™ï¼Œæˆ‘è‡ªå·±éƒ½è§‰å¾—æœ‰ç‚¹åƒé¥±äº†æ’‘çš„ï¼Œå› ä¸ºé‚£æ—¶æˆ‘è¿˜æ²¡å‚åŠ è¿‡å¾ˆå¤š AI æ´»åŠ¨ï¼Œåªå‚åŠ è¿‡ä¸€æ¬¡ç‹åšé™¢å£«çš„ 2050 å¤§ä¼šï¼Œä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡ä½œä¸ºå˜‰å®¾ä¸Šå»æ¼”è®²ã€‚ä½†æˆ‘å›æ¥ä¹‹åå°±ç«‹é©¬åœ¨ç¾¤é‡Œè¯´ï¼Œæˆ‘ä¸‹åŠå¹´è¦åš 6â€“7 æ¬¡å®£å‘ï¼Œè€Œä¸”å…¶ä¸­ä¸€æ¬¡å¿…é¡»æ˜¯ Festival çº§åˆ«çš„æ´»åŠ¨ã€‚</p>
<p>æˆ‘å°±æ˜¯é‚£ä¹ˆè¯´äº†ï¼Œç„¶åè¯´å®Œä¹‹åå°±æ…¢æ…¢å®ç°äº†ã€‚ç°åœ¨ä¸åªæ˜¯å…­ä¸ƒæ¬¡ï¼Œè¿œè¿œè¶…å‡ºäº†å½“æ—¶çš„ç›®æ ‡ï¼Œä¸ä»…åšäº†è®²åº§ï¼Œè¿˜å½•äº†æ’­å®¢ï¼Œåšäº†çˆ†æ¬¾è§†é¢‘ï¼Œç»™è€æ¿è®²å­¦ï¼Œç»™å¤§å­¦ç”Ÿè®²å­¦â€¦â€¦</p>
<p>æ‰€ä»¥æˆ‘æƒ³è¯´ï¼ŒÂ <strong>å¦‚æœä½ è§‰å¾—è‡ªå·±çš„æƒ³æ³•å¤§åˆ°å¯æ€•ï¼Œå¯ä»¥æŠŠè¿™äº›æƒ³æ³•å‘Šè¯‰ä½ å‘¨å›´çš„äººï¼Œæœ€å¥½æ˜¯åœ¨ç¾¤é‡Œè¯´ï¼Œè¿™æ ·ä½ æ‰èƒ½çœŸæ­£ç»™è‡ªå·±ä¿¡å¿ƒå»å®ç°ã€‚</strong> Â ä½ å®³æ€•è¯´äº†ä¹‹ååšä¸åˆ°ä¼šå¾ˆå°´å°¬ï¼Œé‚£æˆ‘è§‰å¾—Â <strong>å¦‚æœå¯¹ä½ è¿å°´å°¬éƒ½æ˜¯ä¸€ä¸ªå›°éš¾çš„è¯ï¼Œè¿™ä»¶äº‹ä½ å¤§æ¦‚ç‡æ˜¯åšä¸åˆ°çš„ã€‚</strong></p>
<h2 data-id="heading-4">05Â <strong>æ•¢äºæ¥ä½æµé‡å’Œè´¢å¯Œï¼šä¸è¦è¢« â€œæ™®é€šäººâ€ çš„äººè®¾ç»‘æ¶</strong></h2>
<p>æˆ‘ä¹‹å‰æœ‰ä¸€ä¸ªå¾ˆè’è°¬çš„æƒ³æ³•ï¼šå¦‚æœçŸ­è§†é¢‘åšå¾—å¥½ï¼Œæœ‰ 800 ä¸ªèµã€1000 ä¸ªèµï¼Œé‚£å¤šå¯æ€•å‘€ã€‚å½“æˆ‘å’Œæœ‹å‹è¯´å‡ºè¿™ä¸ªæƒ³æ³•çš„æ—¶å€™ï¼Œæˆ‘è‡ªå·±éƒ½éœ‡æƒŠäº†ï¼Œæˆ‘ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç§æƒ³æ³•ï¼Ÿ</p>
<p>åæ¥æˆ‘å‘ç°ï¼Œæœ‰ä¸€ç§æ ¹æ·±è’‚å›ºçš„è§‚å¿µåœ¨è€½è¯¯æˆ‘åšæµé‡ â€”â€” **æˆ‘è§‰å¾—å¦‚æœæŠŠæµé‡åšå¾—å¤ªå¥½ï¼Œå°±ä¼šå’Œåˆ«äººå½¢æˆå¾ˆå¤§çš„å·®è·ï¼Œè¿™ä¸ªå·®è·ä¼šè®©æˆ‘å˜å¾—å­¤å•ï¼Œ**è€Œä¸”æ€»æœ‰äººåœ¨å–·åšè‡ªåª’ä½“çš„æ ‡æ¦œè‡ªå·±æ˜¯ä¸ç¢°è¿™äº›ä¸œè¥¿çš„ã€‚å¦‚æœæˆ‘åšæµé‡ï¼Œ<strong>èº«è¾¹ä¸ä¼šæœ‰é‚£ä¹ˆå¤šäººé™ªä¼´æˆ‘ã€‚</strong></p>
<p>è¿™å¯¹ä»»ä½•äººæ¥è¯´éƒ½æ˜¯æœ‰æŒ‘æˆ˜çš„ï¼Œä½†åæ¥æˆ‘å†³å®šæ”¹å˜è¿™ä¸ªæ€ç»´ã€‚ä¸€æ–¹é¢æ˜¯æ—¶ä¸æˆ‘å¾…ï¼Œæˆ‘ä»¬æœ‰æ•ˆå·¥ä½œæ—¶é—´å¾ˆçŸ­ï¼Œå°±è¿™ä¹ˆå‡ åå¹´ï¼Œæ²¡æœ‰å¤ªå¤šæ—¶é—´çŠ¹è±«ï¼›å¦ä¸€æ–¹é¢æ˜¯ï¼ŒÂ <strong>ä½ è§‰å¾—æŠŠæµé‡åšå¤§äº†ä¼šæœ‰å‹åŠ›ï¼Œä½†é—®é¢˜æ˜¯å¹¶ä¸æ˜¯ä½ æƒ³åšå°±èƒ½åšåˆ°ï¼Œå‰æœŸæƒ³é‚£ä¹ˆå¤šå…¶å®æœ‰ç‚¹æäººå¿§å¤©ã€è‡ªä½œå¤šæƒ…ã€‚</strong></p>
<p>äºæ˜¯æˆ‘å¼€å§‹åœ¨è„‘æµ·é‡Œä¸æ–­æƒ³è±¡ï¼Œå¾—åˆ°å…³æ³¨ä¹‹åä¼šæ€ä¹ˆæ ·ï¼Œç„¶åå‘ç°ï¼Œä¹Ÿä¸ä¼šå™¶ï¼Œä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆå¤ªå¤§çš„å›°éš¾ã€‚Gemini 3 å‡ºæ¥ä¹‹åï¼Œæˆ‘å¼€å§‹åšç›¸å…³çš„çŸ­è§†é¢‘ï¼Œæ•°æ®è¿˜ä¸é”™ï¼Œæˆ‘æ‰å‘ç°ï¼ŒÂ <strong>åŸæ¥å¾—åˆ°æµé‡å¹¶ä¸ä¼šå‘ç”Ÿç‰¹åˆ«å¯æ€•çš„äº‹æƒ…ã€‚</strong></p>
<p>å¦å¤–ï¼Œå¯¹å¾ˆå¤šäººæ¥è¯´ï¼ŒÂ <strong>è·å¾—æµé‡å…¶å®æ˜¯å¯¹ â€œæ™®é€šäººèº«ä»½â€ çš„ä¸€æ¬¡èƒŒå›ã€‚</strong> Â ä»å°è¢«æ•™è‚²è¯´æ™®é€šäººè¦éšå¤§æµï¼Œè€Œèƒ½è·å¾—æµé‡çš„äººåœ¨ç¤¾ä¼šä¸Šæ¯•ç«Ÿæ˜¯å°‘æ•°ï¼Œå°±å†²è¿™ä¸€ç‚¹ï¼Œå¾ˆå¤šäººä¹Ÿè¿ˆä¸å‡ºè¿™ä¸€æ­¥ã€‚</p>
<p>è¿™èƒŒåæœ‰å¾ˆå¤šä»å°åˆ°å¤§æ—¥ç§¯æœˆç´¯çš„è§‚å¿µï¼Œå¯¼è‡´å¾ˆéš¾æ”¹å˜ã€‚å†åŠ ä¸Šå‘¨å›´ç¤¾ç¾¤çš„å™ªéŸ³ï¼Œå½“ä½ ç¨å¾®æƒ³å˜å¥½ã€å¾€é«˜å¤„èµ°çš„æ—¶å€™ï¼Œä¸€å®šä¼šæœ‰äººè¯´ï¼šâ€œä½ è¿™ä¸ªä¸€å®šè¦æ‘”ä¸ªå¤§è·Ÿå¤´â€â€œäººæ€•å‡ºåçŒªæ€•å£®â€ ä¹‹ç±»çš„ã€‚ä»–ä»¬ä¼šç»™è‡ªå·±çš„ä¸è¡ŒåŠ¨æ‰¾å¾ˆå¤šå€Ÿå£ï¼Œç„¶åæ¥è´¬ä½ä½ ã€æ‹‰è¸©ä½ ã€‚</p>
<p>å¾ˆå¤šäººå°±æ˜¯åœ¨è¿™ä¸ªæ—¶å€™æ”¾å¼ƒçš„ï¼Œ99% çš„äººéƒ½ä¼šæ”¾å¼ƒã€‚ä½†Â <strong>å½“ä½ æ„è¯†åˆ°è¿™å®Œå…¨æ˜¯ä¸€ç§è®¾å®šè€Œä¸æ˜¯äº‹å®çš„æ—¶å€™ï¼Œå°±ä¸ä¼šå†é‚£ä¹ˆè¢«ä»–äººå·¦å³ã€‚</strong></p>
<h2 data-id="heading-5">06Â <strong>é¢å¯¹æ‰“å‹å’Œå¼±åŒ–ï¼šç«‹åˆ»ç¦»å¼€ï¼Œä¸è§£é‡Š</strong></h2>
<p>æˆ‘æœ€å¼€å§‹æ˜¯åš AI è‡ªåª’ä½“çš„ï¼Œæˆ‘ä»¬é‚£ä¸ªç¾¤é‡Œå¾ˆå¤šäººéƒ½è¯´ï¼šâ€œä½ å…³å¿ƒæŠ€æœ¯å¹²å•¥å‘€ï¼Ÿåšä½ çš„è‡ªåª’ä½“å»å§ã€‚â€ è¯­æ°”é‡Œå……æ»¡ä¸å±‘çš„è°ƒä¾ƒã€‚</p>
<p>å…¶å®æˆ‘åœ¨è‡ªåª’ä½“ä¹‹å¤–ä¹Ÿåšè¯¾ç¨‹ç ”å‘å’Œå¼€å‘ï¼Œä½†ä¸ªåˆ«ä»¥å¼€å‘è‡ªå±…çš„äººä¼šè§‰å¾—ï¼Œä½ æ—¢ç„¶å·²ç»å äº†è‡ªåª’ä½“çš„å¥½å¤„ï¼Œå°±ä¸åº”è¯¥å†å»åš Vibe codingã€åšè¯¾ç¨‹ï¼Œä¸åº”è¯¥å¾—åˆ°é‚£ä¹ˆå¤šã€‚å¯¹è¿™ç§æˆ‘ä¸€æ¦‚ä¸ç†ã€‚</p>
<p>æ›´è¿‡åˆ†çš„æ˜¯ï¼Œæœ‰äººä¼šè·Ÿæˆ‘è¯´ï¼šâ€œåšè‡ªåª’ä½“å¤šè½»æ¾å•Šï¼Œä¸åƒæˆ‘ä»¬åšå¼€å‘è¿™ä¹ˆç´¯ã€‚â€ å…¶å®åšè‡ªåª’ä½“ä¸€ç‚¹éƒ½ä¸è½»æ¾ã€‚Â <strong>è¿™äº›è¯å¬èµ·æ¥å¥½åƒæ˜¯ä¸ºä½ å¥½ï¼Œè®©ä½ å»æ¡æœ€è½»æ¾çš„æ´»å¹²ï¼Œä½†å®é™…ä¸Šï¼Œæ›´å¤šæ˜¯æƒ³æŠŠä½ çš„æ½œèƒ½å±€é™åœ¨ä¸€ä¸ªåœ°æ–¹ã€‚</strong></p>
<p>æ¯ä¸ªäººçš„å‘å±•æ½œåŠ›éƒ½æ˜¯æ— é™çš„ï¼ŒÂ <strong>ä¸€ä¸ªäººåœ¨æ¢ç´¢ AI åˆæœŸçš„æ—¶å€™ï¼Œå¯ä»¥åšè‡ªåª’ä½“ï¼Œä¹Ÿå¯ä»¥åšå¼€å‘ï¼Œå¯ä»¥å°è¯•å„ç§å„æ ·çš„åˆ†æ”¯ï¼Œè€Œä¸æ˜¯ä¸€ä¸Šæ¥å°±æŠŠè‡ªå·±ç»‘å®šåœ¨ä¸€ä¸ªæ–¹é¢ã€‚</strong></p>
<p>æˆ‘ä¹Ÿç¢°åˆ°è¿‡ä¸€äº›éå¸¸ä¼˜ç§€çš„äººï¼Œä½†ä»–æœ‰ä¸€äº›æ¯”è¾ƒåçš„æ¯›ç—…ï¼Œæ¯”å¦‚æ‰“å‹åˆ«äººã€‚ä¸€å¼€å§‹æˆ‘ä¼šè§‰å¾—ä»–ä¹Ÿæ˜¯å¥½å¿ƒï¼Œæ¯•ç«Ÿæ˜¯æƒå¨ã€‚åæ¥æˆ‘å‘ç°ï¼Œå¯èƒ½æ˜¯åˆ©ç›Šå†²çªå¯¼è‡´ä»–ä»¬çš„æ‰“å‹ã€‚</p>
<p>æ‰€ä»¥Â <strong>ä»»ä½•æ—¶å€™ï¼Œæƒ³å¸®ä½ çš„äººæ˜¯ä¸ä¼šä»¥æ‰“å‹çš„æ–¹å¼æ¥å¸®ä½ çš„ã€‚</strong> Â ä½ ä¹‹æ‰€ä»¥è§‰å¾—åˆ«äººæ‰“å‹ä½ æ˜¯åœ¨å¸®ä½ ï¼Œå¯èƒ½æ˜¯å› ä¸ºåŸç”Ÿå®¶åº­é‡Œï¼Œçˆ¶æ¯ä¼šè¯´ â€œæˆ‘æ‰“ä½ éª‚ä½ æ˜¯ä¸ºäº†ä½ å¥½â€ï¼Œè€å¸ˆä¹Ÿä¼šè¯´ â€œæˆ‘æ‰“ä½ éª‚ä½ æ˜¯ä¸ºäº†ä½ å¥½â€ã€‚</p>
<p>ä½†åæ¥æƒ³æƒ³ï¼Œè¿™æ˜¯ä¸å¯èƒ½çš„ã€‚Â <strong>å¦‚æœä¸€ä¸ªäººçœŸçš„å‘è‡ªå†…å¿ƒå°Šé‡å¦ä¸€ä¸ªäººï¼Œä»–åœ¨å¸®å¯¹æ–¹çš„æ—¶å€™æ˜¯ä¸å¯èƒ½ç”¨è¿™ç§æ–¹å¼çš„ã€‚</strong></p>
<p>åæ¥ï¼ŒÂ <strong>ä¸ç®¡è¿™ä¸ªäººæ˜¯ä¸æ˜¯çœŸå¿ƒæƒ³å¸®æˆ‘ï¼Œåªè¦å‡ºç°ä»»ä½•æ‰“å‹çš„ç«¯å€ªï¼Œå“ªæ€•æ˜¯ä¸€ç‚¹ç‚¹ï¼Œæˆ‘ç°åœ¨åŸºæœ¬ä¸Šéƒ½ä¼šç«‹é©¬é€ƒå¼€ã€‚</strong></p>
<p>æ‰“å‹è¿˜ç®—æ˜¯æ˜æ˜¾çš„ï¼Œå¼±åŒ–æ›´å®¹æ˜“è¢«å¿½ç•¥ã€‚æ¯”å¦‚æœ‰äººä¼šè·Ÿä½ å¼€ç©ç¬‘è¯´ï¼šâ€œå“ï¼Œä½ èƒ½å¹²æˆå•¥äº‹å•Šï¼Ÿâ€ åƒè¿™ç§è¯ï¼Œå¦‚æœæˆ‘å¬åˆ°æœ‰äººè¿™ä¹ˆè·Ÿæˆ‘è¯´ï¼ŒÂ <strong>æˆ‘ä¼šç«‹é©¬è®©è¿™ä¸ªäººç¦»å¼€æˆ‘çš„ç”Ÿæ´»ï¼Œå› ä¸ºè¿™å…¶å®æ˜¯ä¸€ç§éšå½¢çš„è´¬ä½ã€‚</strong></p>
<p><strong>ä»»ä½•äººè¦æ˜¯çœŸçš„å°Šé‡ä½ ï¼Œæ˜¯ç»å¯¹ä¸ä¼šè¯´å‡ºä¸æ¯«è´¬ä½ä½ çš„è¯çš„ï¼Œè€Œä¸”è¿™ç§è¯æ²¡å¿…è¦è§£é‡Šä¸ºç©ç¬‘ã€‚</strong></p>
<h2 data-id="heading-6">07Â <strong>ä¸éœ€è¦ä»–äººçš„è¯„ä»·ï¼šå»ºç«‹ç‹¬ç«‹äººæ ¼çš„é›å½¢</strong></h2>
<p>è¿™ä¸€ç‚¹å’Œä¸Šä¸€ç‚¹æœ‰å…³ã€‚å¾ˆå¤šäººæ‰“å‹ä½ ï¼Œæ˜¯å› ä¸ºæƒ³æ“æ§ä½ ï¼Œè€Œæ“æ§å¾€å¾€å€ŸåŠ©è¯„ä»·å®Œæˆ â€”â€” ä»å„ç§è§’åº¦è¯„ä»·ä½ ï¼Œè®©ä½ è§‰å¾—è‡ªå·± â€œè¿˜å·®ç‚¹æ„æ€â€ã€‚</p>
<p><strong>å½“ä½ çœŸæ­£ä¸åœ¨ä¹åˆ«äººçš„æ¶æ„è¯„ä»·æ—¶ï¼Œæ‰ç®—æœ‰äº†æœ€åŸºæœ¬çš„ç‹¬ç«‹äººæ ¼é›å½¢ã€‚</strong> Â çœŸæ­£çš„æˆç†Ÿå’Œå‘¨åˆ°ï¼Œä¸æ˜¯å› ä¸ºåœ¨ä¹åˆ«äººæ€ä¹ˆçœ‹ä½ ï¼Œè€Œæ˜¯å› ä¸ºä½ æœ‰è‡ªå·±çš„ä½“ç³»ã€åšæŒè‡ªå·±ã€åŒæ—¶è¿˜èƒ½å–„è‰¯å¾…äººã€‚è‡³äºåˆ«çš„ï¼ŒçœŸçš„æ˜¯ä½ çš„ä¹‰åŠ¡å—ï¼Ÿ</p>
<p>å¦‚æœä¸€å¼€å§‹å°±ç‰¹åˆ«å¤–å€¾ï¼Œä½ å¯èƒ½ä¼šè¿·å¤±åœ¨åˆ«äººå¯¹ä½ çš„å„ç§è¯‰æ±‚é‡Œã€‚æ¯ä¸ªäººå¯¹ä½ çš„è¯‰æ±‚éƒ½ä¸ä¸€æ ·ï¼Œåˆ°æœ€åä½ å¯èƒ½æ»¡è¶³äº† A çš„è¯‰æ±‚ã€B çš„è¯‰æ±‚ï¼ŒÂ <strong>å´æŠŠè‡ªå·±å˜æˆäº†ä¸€ä¸ªå››ä¸åƒã€‚</strong></p>
<h2 data-id="heading-7">08Â <strong>è¯šå·±è¯šäººï¼šåˆ†é’±ï¼Œæ˜¯æˆå¹´äººæœ€å¤§çš„å°Šé‡</strong></h2>
<p>æˆ‘è§‰å¾—Â <strong>100 å—å¦‚æœæ˜¯åˆ«äººè®©ä½ èµšçš„ï¼Œä½ èµ·ç å¾—åˆ†10å—ç»™åˆ«äººã€‚</strong> Â å¦‚æœä¸€ä»¶äº‹æƒ…ä½ è¿10% çš„å›æŠ¥éƒ½åšä¸åˆ°ï¼Œåˆ«äººä¸ºä»€ä¹ˆè¦å¸®ä½ å‘¢ï¼Ÿè¿™å°±æ˜¯æœ€ç›´è§‚çš„æ„Ÿæ©ä¹‹å¿ƒã€‚</p>
<p><strong>ä¸è¦å¼€ç©ºå¤´æ”¯ç¥¨ï¼Œä¸è¦è¯´ä»€ä¹ˆ â€œä»¥åå†å›æŠ¥â€ï¼Œæ›´ä¸è¦è¯´å¯¹æ–¹ â€œçœ¼é‡Œåªæœ‰é’±â€ã€‚å…¶å®è°ˆé’±æ˜¯æˆå¹´äººä¹‹é—´æœ€å¤§çš„å°Šé‡ï¼Œå› ä¸ºä½ ä¸è°ˆé’±å°±æ˜¯åœ¨è°ˆæ„Ÿæƒ…ã€‚</strong></p>
<p>æ²¡æœ‰æ„Ÿæ©ä¹‹å¿ƒçš„äººï¼Œæ—©å°±åœ¨å¤§ä½¬çš„é»‘åå•ä¸Šäº†ï¼Œæ ¹æœ¬è¿ˆä¸å‡ºè‡ªå·±çš„äº¤é™…åœˆã€‚</p>
<h2 data-id="heading-8">09Â <strong>å¯ä»¥å¹è‡ªå·±ï¼Œä½†ä¸è¦æ‹‰è¸©åˆ«äºº</strong></h2>
<p>æˆ‘ä»¬åšå•†ä¸šå®£ä¼ ï¼Œè‡ªå¤¸æ˜¯å¾ˆå¸¸è§çš„ã€‚å¦‚æœä½ çœ‹åˆ°æœ‰äººåœ¨å¤¸è‡ªå·±ï¼Œä½ ä¸ç”¨å»ç®¡ä»–ï¼Œä½†Â <strong>åœ¨è‡ªå¤¸çš„æ—¶å€™ï¼Œåƒä¸‡ä¸è¦æ‹‰è¸©åˆ«äººï¼Œæˆ–è€…ä¼¤å®³åˆ°åˆ«äººã€‚</strong> Â æ•´ä¸ªåœˆå­éå¸¸å°â€¦â€¦ç‰¹åˆ«æ˜¯åœ¨äº’è”ç½‘åœˆå­é‡Œï¼Œå„ç§æˆªå›¾ã€æ™’æœ‹å‹åœˆéƒ½æœ‰ã€‚</p>
<p>æœ‰çš„æ—¶å€™å¹¶ä¸æ˜¯è¦æ”¾å¼ƒè‡ªå·±çš„ä¸€äº›æƒåˆ©ï¼ŒÂ <strong>è€Œæ˜¯è¦èŠ‚çº¦è‡ªå·±çš„æ—¶é—´ï¼Œå› ä¸ºå¦‚æœæœ‰ä¸åˆ©äºè‡ªå·±çš„äº‹æƒ…å‘ç”Ÿï¼Œè¿˜è¦èŠ±æ—¶é—´å»å¤„ç†ã€‚</strong></p>
<h2 data-id="heading-9">10Â <strong>é‡æ–°è®¤è¯†å•†ä¸šï¼šæå‰é€‰å¥½ä½ å–œæ¬¢çš„èµšé’±æ–¹å¼</strong></h2>
<p>æˆ‘ä¹‹å‰æ€»æ˜¯è§‰å¾—å•†ä¸šå¥½åƒæ˜¯ä¸€ç§ç´¢å–ï¼Œå› ä¸ºåœ¨æˆ‘å°è±¡ä¸­ï¼Œåˆ«äººè°ˆç”Ÿæ„éƒ½æ˜¯è§¥ç­¹äº¤é”™ã€äº’ç›¸ç®—è®¡çš„æ„Ÿè§‰ã€‚</p>
<p>ä½†æœ‰ä¸€å¤©æˆ‘åœ¨è·¯ä¸Šï¼Œçœ‹åˆ°å„ç§ç¾Šè‚‰ä¸²åº—ã€æŠ«è¨åº—ã€è„±å£ç§€å‰§åœºï¼Œæˆ‘å‘ç°ï¼ŒÂ <strong>å•†ä¸šå…¶å®æ˜¯ä¸€ç§æˆå…¨ï¼Œæ˜¯å„ç§æ¬²æœ›çš„æˆå…¨ï¼Œæ‰€ä»¥è¯´å•†ä¸šæœ¬è´¨ä¸Šæœ‰ç‚¹åƒæ…ˆå–„ã€‚æ‰€ä»¥é’±å–œæ¬¢çš„æ˜¯å¼€æ”¾çš„åœºåŸŸï¼Œæ­£å‘çš„åœºåŸŸï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä¹‹åè´Ÿé¢çš„å·²ç»å¾ˆå°‘çœ‹å¾ˆå°‘æŠ›å‡ºæ³¨æ„åŠ›äº†ã€‚</strong></p>
<p>å¦ä¸€æ–¹é¢ï¼Œæ˜¯è¦æƒ³æ¸…æ¥šè‡ªå·±å–œæ¬¢å“ªä¸€ç§ç»è¥æ–¹å¼ï¼šåšå®šåˆ¶åŒ–æœåŠ¡ï¼Œè¿˜æ˜¯åšçº¯è‡ªåŠ¨åŒ–è¥æ”¶çš„ä¸šåŠ¡ã€‚å®šåˆ¶åŒ–æœåŠ¡éœ€è¦ä¸€ä¸ªä¸€ä¸ªå»æœåŠ¡ï¼Œå¾ˆè´¹äººï¼Œé™¤éä½ æœ‰å›¢é˜Ÿã€‚çº¯è‡ªåŠ¨åŒ–è¥æ”¶å¯èƒ½æ˜¯å‡ºæµ·ã€è‡ªåŠ¨å‘è´§ä¹‹ç±»çš„ä¸œè¥¿ã€‚</p>
<p><strong>ä¸€å¼€å§‹å°±è¦æƒ³å¥½è‡ªå·±å¯¹é‡‘é’±çš„è¿½æ±‚æ˜¯ä»€ä¹ˆå½¢å¼</strong>Â ï¼šä½ æ˜¯æƒ³é è¿‘äººã€è´´è¿‘äººï¼Œä¸€ä¸ªä¸€ä¸ªå»æœåŠ¡ï¼Œè¿˜æ˜¯æƒ³è¦ä¸€ç§çº¯è‡ªåŠ¨åŒ–ã€å¾ˆ â€œæœºå™¨å¼â€ çš„å•†å“ã€‚</p>
<p>è¿™ä¸ªå¾ˆé‡è¦ï¼Œè¦ä¸ç„¶è¯•äº†ä¸€åœˆä¹‹åä½ å¯èƒ½ä¼šå‘ç°ï¼Œè‡ªå·±ä¸æ„¿æ„æ¥è¿‘äººã€ä¸æ„¿æ„åšå®šåˆ¶åŒ–æœåŠ¡ã€å—ä¸äº†é‚£ç§æ°”ï¼Œåˆè¦é‡æ–°èµ°è‡ªåŠ¨åŒ–è¥æ”¶çš„è·¯ï¼Œä¸å¦‚æœ€å¼€å§‹å°±æƒ³æ¸…æ¥šã€‚</p>
<h2 data-id="heading-10">11Â <strong>æŠŠæ—¶é—´ç•™ç»™è‡ªå·±ï¼šä¸è¦æŠŠè‡ªå·±æ´»æˆæ³¡æ²«</strong></h2>
<p>æˆ‘ç°åœ¨å·¥ä½œæ—¥æ¯å¤©éƒ½å¿™å¾—è„šä¸æ²¾åœ°ï¼Œä¹Ÿä¸å¾—ä¸å¼€å§‹å•ä¼‘ï¼Œä¹‹å‰æ˜¯ 20 å¤©ä¼‘ä¸€æ¬¡ï¼Œå¤ªç´¯äº†ï¼Œç°åœ¨åªèƒ½æ”¹æˆå•ä¼‘ã€‚æ‰€ä»¥çœŸçš„æ²¡æœ‰ç²¾åŠ›å¯ä»¥æµªè´¹ã€‚</p>
<p><strong>é™¤äº†éåšä¸å¯çš„é‚£äº›å®¢å¥—ï¼Œå‰©ä¸‹çš„æ—¶é—´å°½é‡ç•™ç»™è‡ªå·±ã€‚å› ä¸ºäººç”Ÿçš„æœ‰æ•ˆæ—¶é—´éå¸¸çŸ­ï¼Œåƒ AI è¿™ç§é£å£ä¹Ÿéå¸¸è®²ç©¶æ—¶æœºï¼Œæ—©æŠ“çš„äººæ¯”æ™šæŠ“çš„äººè¦å¼ºå¾—å¤šã€‚</strong></p>
<p>å¹¶ä¸æ˜¯è¯´ AI çš„é•¿å°¾çº¢åˆ©ä¸å¤šï¼Œè€Œæ˜¯å®ƒçš„çº¢åˆ©æœŸä¸»è¦é›†ä¸­åœ¨å‰å‡ å¹´ã€‚åé¢å¤§å®¶éƒ½æ AI äº†ï¼Œè¿˜éœ€è¦ä½ å¹²å˜›ï¼ŸåæœŸçš„çº¢åˆ©ä¼šå’Œä¼ä¸šæŒ‚é’©ï¼Œå˜æˆä¼ä¸šæœåŠ¡å•†çš„å¤©ä¸‹ï¼Œä¸ªäººå†åšå°±æ²¡æœ‰ç°åœ¨è¿™ä¹ˆå¥½çš„æœºä¼šäº†ã€‚</p>
<p>å¦‚æœä½ å˜å¾—æƒœæ—¶å¦‚é‡‘ï¼Œä½ æ˜¯å¦ä¼šå®³æ€•è‡ªå·±ä¸å†æ˜¯ä¸€ä¸ªæ™®é€šäººï¼Ÿ</p>
<p>â€œèƒŒå›â€æ™®é€šäººäººè®¾å…¶å®åªæ˜¯æˆ‘ä»¬çš„ä¸€ç§ææƒ§æƒ³è±¡ã€‚æ¯ä¸ªäººéƒ½æ˜¯ç‹¬ç«‹çš„ä¸ªä½“ï¼Œæ²¡æœ‰ä»€ä¹ˆæ‰€è°“çš„æ™®é€šäººå’Œä¸æ™®é€šäººã€‚</p>
<p><strong>ä½ åˆ°åº•æ˜¯è¦åšè‡ªå·±çš„äº‹æƒ…ï¼Œè¿˜æ˜¯æˆä¸ºæ´ªæµä¸­çš„ä¸€ä¸ªå°æ³¡æ²«ï¼Œå°±çœ‹ä½ ç»™è‡ªå·±è®¤å®šçš„æ˜¯å“ªä¸€ç§èº«ä»½ã€‚</strong></p>
<h2 data-id="heading-11">12Â <strong>å†²çªæ˜¯ä½ çš„é¢„è®¾ï¼Œä¸–ç•Œæœ¬èº«æ²¡æœ‰è¾¹ç•Œ</strong></h2>
<p>è¿™å¥è¯æ˜¯æˆ‘å’Œæœ‹å‹èŠå¤©æ—¶æƒ³åˆ°çš„ã€‚ä»–ä¸€ç›´åœ¨çº ç»“ï¼Œæ˜¯åšæŠ€æœ¯æ€§å¾ˆå¼ºçš„äº§å“ï¼Œè¿˜æ˜¯å»å–è¯¾åšå•†ä¸šåŒ–ã€‚</p>
<p>æˆ‘è·Ÿä»–è¯´ï¼Œè¿™ä¸¤è€…å¹¶ä¸å†²çªï¼Œä½ å¯ä»¥åŒæ—¶åšä¸¤ä»¶äº‹ï¼Œè€Œä¸”åšäº§å“çš„å¾ˆå¤šç»éªŒä¹Ÿå¯ä»¥åšæˆè¯¾ã€‚ç„¶åæˆ‘å°±è·Ÿä»–è¯´äº†è¿™å¥è¯ï¼šÂ <strong>ä¸–ç•Œæ˜¯æ²¡æœ‰è¾¹ç•Œçš„ï¼Œå†²çªåªä¸è¿‡æ˜¯ä½ çš„é¢„è®¾è€Œå·²ã€‚</strong> Â ä»–å½“æ—¶æç„¶å¤§æ‚Ÿã€‚</p>
<p>è¿˜æœ‰ä¸€å¤©æˆ‘åœ¨å•†åœºåƒèŠ’æœå†°ï¼Œæˆ‘çªç„¶æ„Ÿè§‰è‡ªå·±å’Œå¤–ç•Œçš„å¢™å€’å¡Œäº†ï¼Œæˆ‘å‘ç°æˆ‘å’Œè¿™ä¸ªä¸–ç•Œæ˜¯å®Œå…¨ä¸€ä½“çš„ï¼Œè™½ç„¶å½“æ—¶æˆ‘è¿˜æ²¡æ³•è§£é‡Šä¸ºä»€ä¹ˆä¼šè¿™ä¹ˆè®¤ä¸ºï¼Œä½†æ˜¯æœ‰ä¸€ç§å¾ˆå¼ºçš„ç›´è§‚ã€‚æˆ‘ä¹‹å‰æ€»è§‰å¾—åƒèŠ’æœå†°çš„æˆ‘å’Œå¤–ç•Œä»–äººæ˜¯ä¸¤ä¸ªä¸–ç•Œï¼Œäººæˆ‘ä¹‹è§ï¼Œé‚£ä¸€åˆ»è¿™ç§æƒ³æ³•å½»åº•æ¶ˆå¤±äº†ä¸”å‡ ä¹æ²¡æœ‰åå¤ã€‚</p>
<p>å°±æ˜¯å¾ˆç¥å¥‡çš„çªç„¶è¿›å…¥äº†æ— ç•Œçš„æ„Ÿè§‰ã€‚åæ¥æˆ‘æ„Ÿè§‰ä¹‹å‰åœ¨è„‘æµ·é‡Œç”¨åç›¸æ€ç»´å»æ€è€ƒï¼Œå¾ˆè´¹åŠ›ä¸è®¨å¥½ã€‚Â </p>
<p>æ¯”å¦‚<strong>ä½ ä¸€ç›´ç”¨å¯¹ç«‹çš„æ¦‚å¿µå»æ€è€ƒï¼Œå°±ä¼šè§‰å¾—å¿…é¡»äºŒé€‰ä¸€ï¼Œä½ æ‹¿ææ¦‚å¿µçš„åŒæ—¶å°±è¢«æ¦‚å¿µæ‹¿æäº†ã€‚</strong> Â è¿™æ˜¯ä¸€ç§å…¸å‹çš„æ€ç»´ä¹ æƒ¯ï¼Œå› ä¸ºæˆ‘ä»¬ä¸Šå­¦æ—¶åšé¢˜ï¼Œæ€»æ˜¯åšåˆ¤æ–­é¢˜ï¼šå¯¹å‘€ã€é”™å‘€ã€‚</p>
<p>ä½†<strong>ç°å®æ˜¯å¤šç»´çš„ï¼Œä½ ä½œä¸ºä¸€ä¸ªå¤§æ´»äººï¼Œå¯ä»¥æ‰¿è½½çš„é¢å‘å…¶å®å¾ˆå¤šï¼Œå¹¶ä¸æ˜¯è¯´å¿…é¡»äºŒé€‰ä¸€ï¼Œæˆ–è®¸è¿™å°±æ˜¯è¶…è¶ŠèŒƒå¼ï¼Œä¸æ‹¿æä»»ä½•æ¦‚å¿µï¼Œä»¥ä¸‡å˜åº”ä¸‡å˜å°±å¥½äº†ã€‚</strong> Â åªæ˜¯å› ä¸ºè¿™ç§æ€ç»´æ¡†æ¶ï¼Œæœ‰çš„æ—¶å€™ä¼šè®©è‡ªå·±é™·å…¥æ­»å±€ï¼Œæ—¢è€½è¯¯æ—¶é—´ï¼Œåˆæ±¡æŸ“æƒ…ç»ªã€‚</p>
<p>æ‰€ä»¥å¦‚æœä½ è§‰å¾—è‡ªå·±è¢«ä¸¤ä¸ªæç«¯æªç€å¤§è„‘ä¸æ”¾ï¼Œä¸å¦¨å‡ºå»çœ‹çœ‹ä»Šå¤©çš„æ ‘å¶ï¼Œçœ‹çœ‹å¤–é¢çš„ç¯å¢ƒã€‚ä½ ä¼šå‘ç°ç°å®ä¸–ç•Œæ˜¯å®Œå…¨æ²¡æœ‰è¾¹ç•Œçš„ã€‚</p>
<h2 data-id="heading-12">13Â <strong>ç²¾åŠ›æ˜¯å¯ä»¥å…»æˆçš„ï¼šç»™è‡ªå·±é¢å‘ â€œé€šè¡Œè¯â€</strong></h2>
<p>ç²¾åŠ›ä¸æ˜¯æˆåŠŸäººå£«çš„ä¸“å±ï¼Œè¿™ä¸€ç‚¹æˆ‘ä¸“é—¨å†™è¿‡ä¸€ç¯‡æ–‡ç« ã€‚</p>
<p>æ€»ä½“æ¥è¯´ï¼Œä½ è¦æŠŠè‡ªå·±æƒ³è±¡æˆåœ¨é«˜é€Ÿå…¬è·¯ä¸Šå¼€è½¦çš„å¸æœºï¼Œå³æ‰‹è¾¹æŠ½å±‰é‡Œæœ‰ä¸€å¼ é€šè¡Œè¯ï¼Œè¿™å¼ é€šè¡Œè¯æ˜¯ä½ è‡ªå·±é¢å‘çš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥å¼€åˆ°ä»»ä½•åœ°æ–¹ï¼Œä½ çš„æ—…ç¨‹å¯ä»¥å»ä»»ä½•åœ°æ–¹ã€‚</p>
<p>è¿™å…¶ä¸­åŒ…æ‹¬ä¸€é¡¹æƒåˆ©ï¼šÂ <strong>ä½ å¯ä»¥ç»™è‡ªå·±é…ç½®å„ç§ â€œè®¸å¯â€ï¼Œæ¯”å¦‚ç²¾åŠ›ã€‚æˆ‘ç»™è‡ªå·±çš„è®¸å¯åŒ…æ‹¬ â€œé«˜ç²¾åŠ›äººå£«â€é…ç½®ï¼Œé‚£æˆ‘å°±å¯ä»¥åˆ»æ„è®­ç»ƒè‡ªå·±ï¼ŒæŠŠé«˜ç²¾åŠ›é‡Šæ”¾å‡ºæ¥ã€‚æ‰€ä»¥æˆ‘è¿å·ä¸¤ä¸ªæœˆï¼Œç²¾åŠ›æ–¹é¢ç›´æ¥çªç ´äº†ä»¥å¾€å‡ åå¹´çš„ç“¶é¢ˆã€‚ï¼ˆä¸å»ºè®®èº«ä½“å·®çš„åŒå­¦æ¨¡ä»¿ï¼‰</strong></p>
<p><strong>èƒ½ä¸èƒ½æˆä¸ºä¸€ä¸ªé«˜ç²¾åŠ›çš„äººï¼Œä¸»è¦å–å†³äºä½ çš„ä¸»ä½“æ€§æ˜¯å¦ç¡®ç«‹ã€‚</strong></p>
<p>ä¸€æ—¦ç¡®ç«‹ï¼Œä¸ç”¨åˆ«äººé€¼ä½ ï¼Œä½ çš„ç²¾åŠ›ä¹Ÿä¼šåƒäº•å–·ä¸€æ ·çˆ†å‘ã€‚Â <strong>å› ä¸ºè‡ªæˆ‘å°Šé‡ï¼Œæ‰€ä»¥æ‰æœ‰åŠ¨åŠ›ï¼Œè€Œä¸æ˜¯å› ä¸ºè¦ç¬¦åˆæŸé¡¹ç¤¾ä¼šæ ‡å‡†ï¼Œæ‰å‹‰å¼ºè®©è‡ªå·±ä¿æŒå……æ²›çš„ç²¾åŠ›ã€‚å› ä¸ºè‡ªå·±çš„æ‰¹å‡†å’Œè®¸å¯ï¼Œæ‰ä¸Šè·¯ï¼Œè€Œä¸æ˜¯å› ä¸ºä»»ä½•å¤–å› ï¼Œè¿‡å®Œä¸€ç”Ÿã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android äº‹ä»¶åˆ†å‘æœºåˆ¶ï¼ˆä¸€ï¼‰â€”â€” å…¨æµç¨‹æºç è§£æ]]></title>    <link>https://juejin.cn/post/7588109656041259054</link>    <guid>https://juejin.cn/post/7588109656041259054</guid>    <pubDate>2025-12-28T05:02:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588109656041259054" data-draft-id="7585406229167931442" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android äº‹ä»¶åˆ†å‘æœºåˆ¶ï¼ˆä¸€ï¼‰â€”â€” å…¨æµç¨‹æºç è§£æ"/> <meta itemprop="keywords" content="æºç ,Android,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-28T05:02:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ— é™è¿›åŒ–"/> <meta itemprop="url" content="https://juejin.cn/user/108212996024855"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android äº‹ä»¶åˆ†å‘æœºåˆ¶ï¼ˆä¸€ï¼‰â€”â€” å…¨æµç¨‹æºç è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/108212996024855/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ— é™è¿›åŒ–
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T05:02:58.000Z" title="Sun Dec 28 2025 05:02:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. ç‚¹å‡»äº‹ä»¶ä¼ é€’é“¾è·¯</h2>
<p>äº‹ä»¶å¹¶éå‡­ç©ºäº§ç”Ÿç›´æ¥åˆ°è¾¾ Viewï¼Œè€Œæ˜¯ç»è¿‡äº†ä¸€ä¸ªè·¨è¶Šå†…æ ¸ã€ç³»ç»ŸæœåŠ¡ä¸åº”ç”¨è¿›ç¨‹çš„æ¼«é•¿æ—…ç¨‹ã€‚</p>
<h3 data-id="heading-1">1.1 æºå¤´æº¯æºï¼šç³»ç»Ÿå±‚</h3>
<p>äº‹ä»¶åœ¨è§¦è¾¾åº”ç”¨å±‚ Java ä»£ç å‰ï¼Œéœ€åœ¨ç³»ç»Ÿåº•å±‚å®Œæˆâ€œç¡¬ä»¶-å†…æ ¸-æœåŠ¡-åº”ç”¨â€çš„è·¨è¿›ç¨‹æ¥åŠ›ï¼š</p>
<p>è§¦æ‘¸ä¿¡å·ç”±å†…æ ¸é©±åŠ¨æ•è·å¹¶å†™å…¥æ–‡ä»¶èŠ‚ç‚¹ï¼Œç»ç”± SystemServer ä¸­çš„ InputReader è¯»å–ä¸ InputDispatcher åˆ†å‘ï¼Œæœ€ç»ˆé€šè¿‡ <strong>Socket</strong> è·¨è¿›ç¨‹ä¼ è¾“è‡³åº”ç”¨è¿›ç¨‹çš„ ViewRootImplï¼Œä»è€Œæ­£å¼æ¿€æ´» Android åº”ç”¨å±‚çš„äº‹ä»¶åˆ†å‘ä½“ç³»ã€‚</p>
<h3 data-id="heading-2">1.2 æ ¸å¿ƒç»„ä»¶çš„è§’è‰²å®šä½</h3>
<p>è¿›å…¥åº”ç”¨å±‚åï¼ŒAndroid UI ç³»ç»Ÿçš„äº‹ä»¶ä¼ é€’ç‰©ç†è½½ä½“ç”±ä¸‰å±‚æ ¸å¿ƒç»„ä»¶ååŒæ„æˆï¼š</p>
<ol>
<li>Activityï¼šä½œä¸ºä¸šåŠ¡å…¥å£æŒæœ‰ Windowã€‚</li>
<li>Windowï¼šä½œä¸ºç³»ç»Ÿæ¡¥æ¢ç®¡ç† DecorViewã€‚</li>
<li>DecorViewï¼šä½œä¸ºè§†å›¾æ ¹èŠ‚ç‚¹æ‰¿è½½å…·ä½“çš„äº¤äº’æ‰§è¡Œã€‚</li>
</ol>
<p><a href="https://juejin.cn/post/7516829784414568499" target="_blank" title="https://juejin.cn/post/7516829784414568499">ç‚¹å‡»é˜…è¯»ï¼šAndroid çª—å£æ˜¾ç¤ºï¼ˆä¸€ï¼‰â€”â€” Activityã€Window å’Œ View ä¹‹é—´çš„è”ç³»</a></p>
<h3 data-id="heading-3">1.3 ç‚¹å‡»äº‹ä»¶ä¼ é€’é“¾è·¯ï¼šU å‹æµè½¬çš„é—­ç¯</h3>
<p>ç‚¹å‡»äº‹ä»¶çš„ä¼ é€’å¹¶éå•å‘æµåŠ¨ï¼Œè€Œæ˜¯ä¸€ä¸ªåŸºäºé€’å½’è°ƒç”¨çš„å®Œæ•´é—­ç¯ï¼Œå½¢æˆäº†çš„<strong>Uå‹</strong>ç»“æ„ï¼Œè¿™æ˜¯ Android äº‹ä»¶åˆ†å‘æœºåˆ¶çš„æ ¸å¿ƒéª¨æ¶ã€‚</p>
<h4 data-id="heading-4">1.3.1 ä¸‹æ²‰é˜¶æ®µï¼ˆåˆ†å‘ä¸æ‹¦æˆªï¼‰</h4>
<p><strong>Activity</strong> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> <strong>PhoneWindow</strong> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> <strong>DecorView (æ ¹ ViewGroup)</strong> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> <strong>å­ ViewGroup</strong> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> <strong>ç›®æ ‡ View</strong></p>
<p>å½“æ‰‹æŒ‡è§¦æ‘¸å±å¹•ï¼Œç¡¬ä»¶ä¿¡å·è¢«å°è£…ä¸º Event åï¼Œé¦–å…ˆä¼ é€’ç»™ Activityã€‚éšåï¼Œäº‹ä»¶ç»ç”± PhoneWindow ä¼ è‡³ DecorViewã€‚DecorView ä½œä¸ºæ ¹ ViewGroupï¼Œå¼€å§‹è‡ªé¡¶å‘ä¸‹åœ°åˆ†å‘äº‹ä»¶ï¼Œå¯»æ‰¾èƒ½å¤„ç†è¯¥äº‹ä»¶çš„ç›®æ ‡ Viewã€‚</p>
<h4 data-id="heading-5">1.3.2 ä¸Šæµ®é˜¶æ®µï¼ˆæ¶ˆè´¹ä¸å›æº¯ï¼‰</h4>
<p><strong>ç›®æ ‡ View</strong> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> <strong>å­ ViewGroup</strong> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> <strong>DecorView</strong> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> <strong>PhoneWindow</strong> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> <strong>Activity</strong></p>
<p>å½“äº‹ä»¶åˆ°è¾¾åº•å±‚ç›®æ ‡ View åï¼Œæˆ–è€…åœ¨åˆ†å‘è¿‡ç¨‹ä¸­æ²¡æœ‰ View æ¶ˆè´¹äº‹ä»¶ï¼Œäº‹ä»¶ä¼šåƒæ°”æ³¡ä¸€æ ·è‡ªåº•å‘ä¸Šå›ä¼ ç»™çˆ¶å®¹å™¨ï¼Œç›´è‡³å›åˆ° Activity çš„ <code>onTouchEvent</code> è¿›è¡Œå…œåº•å¤„ç†ã€‚</p>
<h2 data-id="heading-6">2. è´£ä»»é“¾æ¨¡å¼ä¸‹çš„ U å‹æµè½¬</h2>
<p>Android äº‹ä»¶åˆ†å‘æœ¬è´¨ä¸Šæ˜¯<strong>è´£ä»»é“¾æ¨¡å¼</strong>ã€‚å®ƒä¸ä»…ä»…æ˜¯çº¿æ€§çš„ä¼ é€’ï¼Œè€Œæ˜¯åŸºäºè§†å›¾æ ‘ç»“æ„çš„é€’å½’è°ƒç”¨ä¸å›æº¯ã€‚</p>
<h4 data-id="heading-7">2.1 è´£ä»»é“¾çš„æ„å»ºä¸åˆ†å·¥</h4>
<p>åœ¨æ ‡å‡†çš„è´£ä»»é“¾æ¨¡å¼ä¸­ï¼Œå¤šä¸ªå¯¹è±¡æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚</p>
<p>åœ¨äº‹ä»¶åˆ†å‘æœºåˆ¶ä¸­ï¼Œè¿™ä¸€æ¨¡å¼è¢«é€‚é…ä¸ºâ€œåˆ†å‘-æ‹¦æˆª-æ¶ˆè´¹â€çš„ä¸‰çº§ä½“ç³»ï¼š</p>
<ol>
<li><strong>é“¾çš„èŠ‚ç‚¹</strong>ï¼šæ¯ä¸ª <code>View</code> å’Œ <code>ViewGroup</code> éƒ½æ˜¯é“¾ä¸Šçš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚</li>
<li><strong>ä¼ é€’æœºåˆ¶</strong>ï¼šäº‹ä»¶åœ¨è§†å›¾æ ‘ä¸­ä¼ é€’ï¼Œç›´åˆ°è¢«æŸä¸ªèŠ‚ç‚¹æ¶ˆè´¹æˆ–è€…å›ä¼ è‡³æ ¹èŠ‚ç‚¹ã€‚</li>
<li><strong>åŒå‘æµåŠ¨</strong>ï¼šä¸åŒäºæ ‡å‡†è´£ä»»é“¾çš„å•å‘ä¼ é€’ï¼ŒAndroid æä¾›äº†ä¸‹æ²‰ï¼ˆåˆ†å‘ï¼‰ä¸ä¸Šæµ®ï¼ˆå›æº¯ï¼‰çš„åŒå‘é€šé“ï¼Œç¡®ä¿äº‹ä»¶èƒ½è¢«ç²¾å‡†æ•è·æˆ–å…œåº•å¤„ç†ã€‚</li>
</ol>
<p>Android äº‹ä»¶åˆ†å‘æœºåˆ¶æ˜¯ä¸€ä¸ªç”± <code>dispatchTouchEvent</code> é©±åŠ¨çš„è´£ä»»é“¾ï¼Œé€šè¿‡ <code>onInterceptTouchEvent</code> ä½œä¸ºæ§åˆ¶é˜€å†³å®šæ˜¯å¦æˆªæ–­å‘ä¸‹ä¼ é€’ï¼Œå¹¶ç”± <code>onTouchEvent</code> ä½œä¸ºå¤„ç†è€…æœ€ç»ˆå†³å®šæ˜¯æ¶ˆè€—äº‹ä»¶ç»ˆæ­¢é“¾æ¡ï¼Œè¿˜æ˜¯å‘ä¸Šçº§å›æº¯ä»»åŠ¡ã€‚</p>
<p><strong>æ ¸å¿ƒæ–¹æ³•ï¼š</strong></p>
<p>å…ˆæ˜ç¡®è¿™ä¸‰ä¸ªæ–¹æ³•åœ¨ <code>Activity</code>ã€<code>ViewGroup</code> å’Œ <code>View</code> ä¸­çš„å­˜åœ¨æƒ…å†µï¼š</p>

































<table><thead><tr><th><strong>æ–¹æ³•</strong></th><th><strong>Activity</strong></th><th><strong>ViewGroup</strong></th><th><strong>View</strong></th><th><strong>ä½œç”¨</strong></th></tr></thead><tbody><tr><td><strong>dispatchTouchEvent</strong></td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td><strong>åˆ†å‘</strong>äº‹ä»¶ã€‚åªè¦äº‹ä»¶ä¼ åˆ°äº†è¯¥ç»„ä»¶ï¼Œæ­¤æ–¹æ³•å¿…è¢«è°ƒç”¨ã€‚</td></tr><tr><td><strong>onInterceptTouchEvent</strong></td><td>âŒ</td><td>âœ…</td><td>âŒ</td><td><strong>æ‹¦æˆª</strong>äº‹ä»¶ã€‚å†³å®šæ˜¯å¦æŠŠäº‹ä»¶æ‹¦ä¸‹è‡ªå·±å¤„ç†ã€‚</td></tr><tr><td><strong>onTouchEvent</strong></td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td><strong>å¤„ç†</strong>äº‹ä»¶ã€‚æ¶ˆè€—ï¼ˆConsumeï¼‰ç‚¹å‡»æˆ–æ»‘åŠ¨åŠ¨ä½œã€‚</td></tr></tbody></table>
<p>ä¸ºä»€ä¹ˆåªæœ‰viewgroupæœ‰onInterceptTouchEventæ–¹æ³•ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼Ÿ</p>
<p>Android äº‹ä»¶åˆ†å‘æœºåˆ¶æœ¬è´¨ä¸Šæ˜¯ä¸€æ¬¡åŸºäºè´£ä»»é“¾æ¨¡å¼çš„ U å‹å®Œæ•´æµè½¬ï¼š</p>
<p>å½“è§¦æ‘¸å‘ç”Ÿæ—¶ï¼Œäº‹ä»¶ç”± Activity å§‹å‘ï¼Œç» PhoneWindow ä¼ è‡³ DecorViewï¼Œéšåå¼€å¯ <strong>è‡ªé¡¶å‘ä¸‹</strong> çš„åˆ†å‘é“¾è·¯ï¼ŒæœŸé—´ ViewGroup é€šè¿‡ <code>dispatchTouchEvent</code> åˆ†å‘å¹¶åˆ©ç”¨ <code>onInterceptTouchEvent</code> åˆ¤å®šæ˜¯å¦æ‹¦æˆªï¼›ä¸€æ—¦åˆ°è¾¾åº•å±‚ View æˆ–è¢«æ‹¦æˆªï¼Œé“¾è·¯å³åˆ»åè½¬ä¸º <strong>è‡ªåº•å‘ä¸Š</strong> çš„å›æº¯ï¼Œé€šè¿‡ <code>onTouchEvent</code> é€çº§å°è¯•æ¶ˆè´¹ï¼Œè‹¥æœ€ç»ˆæ—  View å“åº”ï¼Œäº‹ä»¶å°†å›æµè‡³ Activity å…œåº•ï¼Œå½¢æˆä»ç³»ç»Ÿå±‚åˆ°è§†å›¾æ ‘å†å›å½’é€»è¾‘å±‚çš„å®Œæ•´é—­ç¯ã€‚</p>
<h2 data-id="heading-8">3. æºç è§£æ</h2>
<h3 data-id="heading-9">3.1 Activity çš„åˆ†å‘</h3>
<p><strong>ç¡¬ä»¶é©±åŠ¨ (Kernel) <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> SystemServer (InputReader/InputDispatcher) <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> ViewRootImpl <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> DecorView <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> Activity</strong></p>
<p>InputEventReceiver ç±»çš„ dispatchInputEvent æ–¹æ³•:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dispatchInputEvent</span><span class="hljs-params">(<span class="hljs-type">int</span> seq, InputEvent event)</span> {
    mSeqMap.put(event.getSequenceNumber(), seq);
    <span class="hljs-comment">// è°ƒç”¨å­ç±»çš„å®ç°</span>
    onInputEvent(event);
}
</code></pre>
<p>å®ƒæ¥æ”¶ Native å±‚ä¼ é€’è¿‡æ¥çš„ InputEvent å¯¹è±¡ï¼Œå¹¶å°†å…¶åˆ†å‘ç»™å­ç±»ï¼ˆå¦‚ ViewRootImpl.WindowInputEventReceiverï¼‰ã€‚</p>
<p>æ‰€ä»¥æœ€ç»ˆæ‰§è¡Œåˆ°äº†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ViewRootImpl.java</span>
<span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WindowInputEventReceiver</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">InputEventReceiver</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onInputEvent</span><span class="hljs-params">(InputEvent event)</span> {
        <span class="hljs-comment">// ...</span>
        enqueueInputEvent(event, <span class="hljs-built_in">this</span>, <span class="hljs-number">0</span>, <span class="hljs-literal">true</span>); <span class="hljs-comment">// å°†äº‹ä»¶åŠ å…¥é˜Ÿåˆ—</span>
    }
}
</code></pre>
<p>enqueueInputEvent ä¼šè°ƒç”¨ doProcessInputEvents ï¼Œå¼€å§‹å¤„ç†äº‹ä»¶é˜Ÿåˆ—:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ViewRootImpl.java</span>
<span class="hljs-keyword">void</span> <span class="hljs-title function_">doProcessInputEvents</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">while</span> (mPendingInputEventHead != <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// ...</span>
        deliverInputEvent(q); <span class="hljs-comment">// å¼€å§‹åˆ†å‘äº‹ä»¶</span>
    }
}
</code></pre>
<p>deliverInputEvent ä¼šå°†äº‹ä»¶äº¤ç»™è´£ä»»é“¾çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ mFirstInputStage ã€‚è¿™ä¸ªè´£ä»»é“¾åœ¨ setView æ–¹æ³•ä¸­åˆå§‹åŒ–ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ViewRootImpl.java</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deliverInputEvent</span><span class="hljs-params">(QueuedInputEvent q)</span> {
    stage.deliver(q);
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ViewRootImpl.java -&gt; setView()</span>
<span class="hljs-comment">// åˆå§‹åŒ– InputStage è´£ä»»é“¾</span>
<span class="hljs-comment">// 1. NativePreImeInputStage</span>
<span class="hljs-comment">// 2. ViewPreImeInputStage</span>
<span class="hljs-comment">// 3. ImeInputStage (è¾“å…¥æ³•)</span>
<span class="hljs-comment">// 4. EarlyPostImeInputStage</span>
<span class="hljs-comment">// 5. NativePostImeInputStage</span>
<span class="hljs-comment">// 6. ViewPostImeInputStage (å…³é”®èŠ‚ç‚¹)</span>
<span class="hljs-comment">// 7. SyntheticInputStage</span>
mFirstInputStage = nativePreImeStage;
</code></pre>
<p>äº‹ä»¶ä¼šä¾æ¬¡ç»è¿‡è¿™äº› Stageã€‚å¦‚æœå‰é¢çš„ Stage æ²¡æœ‰æ¶ˆè´¹äº‹ä»¶ï¼ˆä¾‹å¦‚ IME æ²¡æœ‰æ‹¦æˆªï¼‰ï¼Œäº‹ä»¶æœ€ç»ˆä¼šåˆ°è¾¾ ViewPostImeInputStage ã€‚</p>
<p>ViewPostImeInputStage çš„ onProcess æ–¹æ³•ä¼šæ ¹æ®äº‹ä»¶ç±»å‹è°ƒç”¨ä¸åŒçš„å¤„ç†é€»è¾‘ã€‚å¯¹äºè§¦æ‘¸äº‹ä»¶ï¼ˆMotionEventï¼‰ï¼Œå®ƒä¼šè°ƒç”¨ processPointerEvent ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ViewRootImpl.java</span>
<span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewPostImeInputStage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">InputStage</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-type">int</span> <span class="hljs-title function_">onProcess</span><span class="hljs-params">(QueuedInputEvent q)</span> {
        <span class="hljs-keyword">if</span> (q.mEvent <span class="hljs-keyword">instanceof</span> KeyEvent) {
            <span class="hljs-keyword">return</span> processKeyEvent(q);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// ...</span>
            <span class="hljs-keyword">if</span> ((source &amp; InputDevice.SOURCE_CLASS_POINTER) != <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">return</span> processPointerEvent(q); 
            }
            <span class="hljs-comment">// ...</span>
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">processPointerEvent</span><span class="hljs-params">(QueuedInputEvent q)</span> {
        <span class="hljs-keyword">final</span> <span class="hljs-type">MotionEvent</span> <span class="hljs-variable">event</span> <span class="hljs-operator">=</span> (MotionEvent)q.mEvent;
        <span class="hljs-comment">// ...</span>
        <span class="hljs-comment">// mView æ˜¯ DecorView</span>
        <span class="hljs-comment">// è¿™é‡Œè°ƒç”¨ DecorView.dispatchPointerEvent</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">handled</span> <span class="hljs-operator">=</span> mView.dispatchPointerEvent(event); 
        <span class="hljs-comment">// ...</span>
        <span class="hljs-keyword">return</span> handled ? FINISH_HANDLED : FORWARD;
    }
}
</code></pre>
<p>mView åœ¨ ViewRootImpl ä¸­å°±æ˜¯ DecorView ã€‚ DecorView ç»§æ‰¿è‡ª View ï¼Œ dispatchPointerEvent æ˜¯ View ç±»çš„æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// View.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">dispatchPointerEvent</span><span class="hljs-params">(MotionEvent event)</span> {
    <span class="hljs-keyword">if</span> (event.isTouchEvent()) {
        <span class="hljs-keyword">return</span> dispatchTouchEvent(event); <span class="hljs-comment">// è¿™é‡Œçš„ dispatchTouchEvent æ˜¯ DecorView é‡å†™çš„ç‰ˆæœ¬</span>
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> dispatchGenericMotionEvent(event);
    }
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">dispatchTouchEvent</span><span class="hljs-params">(MotionEvent ev)</span> {
    <span class="hljs-comment">// è·å– Window çš„å›è°ƒæ¥å£ï¼Œé€šå¸¸æ˜¯ Activity å®ä¾‹</span>
    <span class="hljs-keyword">final</span> Window.<span class="hljs-type">Callback</span> <span class="hljs-variable">cb</span> <span class="hljs-operator">=</span> mWindow.getCallback();

    <span class="hljs-comment">// ä¼˜å…ˆå°†äº‹ä»¶åˆ†å‘ç»™ Activity å¤„ç†</span>
    <span class="hljs-comment">// æ¡ä»¶ï¼š1) å›è°ƒå­˜åœ¨ 2) çª—å£æœªé”€æ¯ 3) ä¸æ˜¯å­çª—å£ï¼ˆmFeatureId &lt; 0 è¡¨ç¤ºä¸»çª—å£ï¼‰</span>
    <span class="hljs-keyword">return</span> cb != <span class="hljs-literal">null</span> &amp;&amp; !mWindow.isDestroyed() &amp;&amp; mFeatureId &lt; <span class="hljs-number">0</span>
            ? cb.dispatchTouchEvent(ev) : <span class="hljs-built_in">super</span>.dispatchTouchEvent(ev);
}
</code></pre>
<p>é€šè¿‡ mWindow.getCallback() è·å–åˆ° Window çš„æ§åˆ¶è€…ï¼Œå®ƒçš„è€å¤§ï¼ŒActivityã€‚æœ€ç»ˆè°ƒç”¨è‡³ Activity çš„ dispatchTouchEvent æ–¹æ³•ã€‚</p>
<p>DecorView å°†äº‹ä»¶ä¸ŠæŠ¥ç»™ Activity ï¼Œè®© Activity æœ‰æœºä¼šåœ¨ View å¤„ç†ä¹‹å‰æ‹¦æˆªæˆ–å¤„ç†ã€‚</p>
<p>Activity çš„ dispatchTouchEvent éå¸¸ç®€å•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">dispatchTouchEvent</span><span class="hljs-params">(MotionEvent ev)</span> {
    <span class="hljs-keyword">if</span> (ev.getAction() == MotionEvent.ACTION_DOWN) {
        onUserInteraction(); <span class="hljs-comment">// å±ä¿æˆ–ç³»ç»Ÿäº¤äº’å›è°ƒ</span>
    }
    <span class="hljs-comment">// å§”æ‰˜ç»™ Window å¤„ç† -&gt; PhoneWindow -&gt; DecorView</span>
    <span class="hljs-keyword">if</span> (getWindow().superDispatchTouchEvent(ev)) { 
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; 
    }
    <span class="hljs-comment">// å¦‚æœæ‰€æœ‰ View éƒ½ä¸æ¶ˆè´¹ï¼Œæœ€ç»ˆç”± Activity å…œåº•å¤„ç†</span>
    <span class="hljs-keyword">return</span> onTouchEvent(ev); 
}
</code></pre>
<p>å¦‚æœ Window çš„ superDispatchTouchEvent è¿”å› trueï¼Œè¡¨ç¤ºäº‹ä»¶è¢«æ¶ˆè´¹ï¼Œå¾ªç¯ç»“æŸã€‚</p>
<p><strong>é‡å†™ Activity çš„ dispatchTouchEvent æ–¹æ³•çš„ä¸€äº›åœºæ™¯ï¼šç‚¹å‡»ç©ºç™½å¤„éšè—è½¯é”®ç›˜ã€å…¨å±€é˜²æŠ–ã€åº”ç”¨é•¿æ—¶é—´æ— æ“ä½œæ£€æµ‹ã€å…¨å±€åŸ‹ç‚¹ä¸æ‰‹åŠ¿åˆ†æç­‰ã€‚</strong></p>
<h3 data-id="heading-10">3.2 ViewGroup çš„æ‹¦æˆªä¸åˆ†å‘ (æœºåˆ¶æ ¸å¿ƒ)</h3>
<p>è¿™æ˜¯æ•´ä¸ªæœºåˆ¶ä¸­æœ€å¤æ‚çš„éƒ¨åˆ†ã€‚ViewGroup æ—¢è¦å†³å®šæ˜¯å¦æ‹¦æˆªï¼Œåˆè¦éå†å­ View å¯»æ‰¾æ¶ˆè´¹è€…ã€‚</p>
<p><strong>Activity â†’ PhoneWindow â†’ DecorView (æ ¹ ViewGroup) â†’ å­ ViewGroup â†’ ç›®æ ‡ View</strong></p>
<p>Activity æ”¶åˆ°äº‹ä»¶åï¼Œå§”æ‰˜ç»™ PhoneWindow å¤„ç†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">superDispatchTouchEvent</span><span class="hljs-params">(MotionEvent event)</span> {
    <span class="hljs-comment">// DecorView æ˜¯ Window å¯¹åº”çš„ RootViewï¼Œç»§æ‰¿è‡ª FrameLayout</span>
    <span class="hljs-keyword">return</span> mDecor.superDispatchTouchEvent(event);
}
</code></pre>
<p>äº‹ä»¶å›åˆ° DecorView ï¼Œä½†è¿™æ¬¡è°ƒç”¨çš„æ˜¯ super æ–¹æ³•ï¼Œè¿›å…¥æ ‡å‡†çš„ ViewGroup åˆ†å‘æµç¨‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// DecorView.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">superDispatchTouchEvent</span><span class="hljs-params">(MotionEvent event)</span> {
    <span class="hljs-comment">// è°ƒç”¨çˆ¶ç±» FrameLayout çš„ dispatchTouchEventï¼Œå¯åŠ¨æ ‡å‡†çš„ View äº‹ä»¶åˆ†å‘æµç¨‹</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.dispatchTouchEvent(event);
}
</code></pre>
<h4 data-id="heading-11">A. æ‹¦æˆªé€»è¾‘ (Intercept)</h4>
<p>åœ¨ <code>ViewGroup.dispatchTouchEvent</code> ä¸­ï¼Œè‹¥æ˜¯æ–°äº‹ä»¶(DOWN)æˆ–å·²æœ‰ç›®æ ‡(mFirstTouchTarget)ï¼Œä¸”æœªè¢«ç¦æ­¢(disallowIntercept)ï¼Œåˆ™è°ƒ onInterceptTouchEventï¼›å¦åˆ™(éDOWNä¸”æ— ç›®æ ‡)é»˜è®¤æ‹¦æˆªï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ViewGroup.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">dispatchTouchEvent</span><span class="hljs-params">(MotionEvent ev)</span> {
    <span class="hljs-comment">//...</span>
    <span class="hljs-keyword">if</span> (onFilterTouchEventForSecurity(ev)) {
        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">action</span> <span class="hljs-operator">=</span> ev.getAction();
        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">actionMasked</span> <span class="hljs-operator">=</span> action &amp; MotionEvent.ACTION_MASK;
        <span class="hljs-keyword">if</span> (actionMasked == MotionEvent.ACTION_DOWN) {
            <span class="hljs-comment">// æ–°çš„è§¦æ‘¸åºåˆ—å¼€å§‹ (ACTION_DOWN)</span>
            <span class="hljs-comment">// 1. æ¸…é™¤ä¹‹å‰çš„ TouchTargets (mFirstTouchTargetç½®ç©º)</span>
            <span class="hljs-comment">// 2. é‡ç½®è§¦æ‘¸çŠ¶æ€ (åŒ…æ‹¬ FLAG_DISALLOW_INTERCEPT)</span>
            cancelAndClearTouchTargets(ev);
            resetTouchState();
        }

        <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> intercepted;
        <span class="hljs-comment">// æ‹¦æˆªåˆ¤æ–­çš„æ ¸å¿ƒæ¡ä»¶ï¼š</span>
        <span class="hljs-comment">// 1. ä¸€ä¸ªæ–°çš„äº‹ä»¶åºåˆ—å¼€å§‹</span>
        <span class="hljs-comment">// 2. å¦‚æœ mFirstTouchTarget != nullï¼Œè¯´æ˜å·²ç»æœ‰å­ View æ¶ˆè´¹äº†è¯¥åºåˆ—çš„ ACTION_DOWNï¼Œ</span>
        <span class="hljs-comment">//    åç»­çš„ MOVE/UP äº‹ä»¶ä¹Ÿéœ€è¦å†æ¬¡åˆ¤æ–­æ˜¯å¦æ‹¦æˆª</span>
        <span class="hljs-keyword">if</span> (actionMasked == MotionEvent.ACTION_DOWN
                || mFirstTouchTarget != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// å­ View å¯ä»¥é€šè¿‡ requestDisallowInterceptTouchEvent(true) è®¾ç½® FLAG_DISALLOW_INTERCEPT</span>
            <span class="hljs-comment">// ä»è€Œå¼ºåˆ¶çˆ¶å®¹å™¨è·³è¿‡ onInterceptTouchEvent çš„è°ƒç”¨ï¼Œç›´æ¥ä¸æ‹¦æˆª</span>
            <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">disallowIntercept</span> <span class="hljs-operator">=</span> (mGroupFlags &amp; FLAG_DISALLOW_INTERCEPT) != <span class="hljs-number">0</span>;
            <span class="hljs-keyword">if</span> (!disallowIntercept) {
                <span class="hljs-comment">// è°ƒç”¨ onInterceptTouchEvent è¯¢é—®æ˜¯å¦æ‹¦æˆª</span>
                intercepted = onInterceptTouchEvent(ev);
                ev.setAction(action); <span class="hljs-comment">// restore action in case it was changed</span>
            } <span class="hljs-keyword">else</span> {
                intercepted = <span class="hljs-literal">false</span>;
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// å¦‚æœä¸æ˜¯ DOWN äº‹ä»¶ï¼Œä¸” mFirstTouchTarget ä¸ºç©º</span>
            <span class="hljs-comment">// è¯´æ˜ DOWN äº‹ä»¶æ—¶ ViewGroup æ‹¦æˆªäº†ï¼Œæˆ–è€…æ²¡æœ‰å­ View æ¶ˆè´¹</span>
            <span class="hljs-comment">// æ­¤æ—¶ç›´æ¥é»˜è®¤æ‹¦æˆªåç»­äº‹ä»¶ï¼Œä¸å†è°ƒç”¨ onInterceptTouchEvent</span>
            intercepted = <span class="hljs-literal">true</span>;
        }
        <span class="hljs-comment">// ...</span>
        
        <span class="hljs-comment">// [æµç¨‹è§£é‡Š] å¦‚æœäº‹ä»¶æœªå–æ¶ˆä¸”æœªæ‹¦æˆªï¼Œåˆ™å¼€å§‹åˆ†å‘ç»™å­ View</span>
        <span class="hljs-keyword">if</span> (!canceled &amp;&amp; !intercepted) {
        
        }
    }
}
</code></pre>
<p>mFirstTouchTarget æ˜¯ ViewGroup ä¸­ç”¨äºè®°å½•å½“å‰è§¦æ‘¸äº‹ä»¶åºåˆ—ï¼ˆå¦‚ ACTION_DOWN ä¹‹åï¼‰ä¸­æˆåŠŸæ¶ˆè´¹äº†äº‹ä»¶çš„å­ View é“¾è¡¨ ï¼Œå®ƒçš„å­˜åœ¨ä½¿å¾—åç»­äº‹ä»¶ï¼ˆå¦‚ ACTION_MOVEã€ACTION_UPï¼‰å¯ä»¥ç›´æ¥åˆ†å‘ç»™ç›®æ ‡ View è€Œæ— éœ€é‡æ–°éå†æŸ¥æ‰¾ï¼Œä»è€Œæå‡åˆ†å‘æ•ˆç‡ã€‚</p>
<p><strong>åœºæ™¯ Aï¼šACTION_DOWN</strong>ï¼šäº‹ä»¶åºåˆ—çš„å¼€å§‹ï¼Œä¸€å®šä¼šè¿›å…¥æ‹¦æˆªåˆ¤æ–­é€»è¾‘ï¼Œé»˜è®¤è°ƒç”¨ <code>onInterceptTouchEvent</code>Â æ–¹æ³•ï¼Œå¦‚æœè¿”å› trueï¼Œåˆ™ ViewGroup è¿›è¡Œæ‹¦æˆªï¼Œä¸ä¼šå°†äº‹ä»¶åºåˆ—åˆ†å‘è‡³å­ Viewã€‚å­ View å¯è°ƒç”¨ requestDisallowInterceptTouchEvent(true) è®¾ç½® FLAG_DISALLOW_INTERCEPTï¼Œè¿™æ ·ä¼šå¼ºåˆ¶ç¦æ­¢ ViewGroup è¿›è¡Œæ‹¦æˆªã€‚</p>
<p><strong>åœºæ™¯ Bï¼šACTION_MOVE ä¸”å·²æœ‰å­ View æ•è·</strong>ï¼šæ­¤æ—¶Â <code>mFirstTouchTarget!= null</code>ï¼Œè¡¨ç¤ºè¯¥äº‹ä»¶åºåˆ—çš„ ACTION_DOWN äº‹ä»¶å·²ç»åˆ†å‘ï¼Œæœ‰å­ View æˆåŠŸæ¶ˆè´¹äº†ä¹‹å‰çš„äº‹ä»¶ (DOWN)ï¼Œé‚£ä¹ˆåç»­äº‹ä»¶ä¸€å®šä¼šè¿›å…¥æ‹¦æˆªåˆ¤æ–­é€»è¾‘ã€‚çˆ¶ View ä¾ç„¶æœ‰æœºä¼šåœ¨åç»­çš„Â MOVEÂ è¿‡ç¨‹ä¸­â€œåæ‚”â€ï¼Œé€šè¿‡Â <code>onInterceptTouchEvent</code>Â è¿”å›Â trueÂ æ¥åˆ‡æ–­å­ View çš„äº‹ä»¶æµï¼ˆæ­¤æ—¶å­ View ä¼šæ”¶åˆ°Â <code>CANCEL</code>ï¼‰ã€‚</p>
<p><strong>åœºæ™¯ Cï¼šACTION_MOVE ä½†æ— å­ View æ•è·</strong>ï¼šå³Â <code>mFirstTouchTarget == null</code>ï¼Œä¸”ä¸æ˜¯Â <code>DOWN</code>ã€‚ä»£ç è¿›å…¥Â <code>else</code>Â åˆ†æ”¯ï¼Œ<code>intercepted = true</code>ã€‚è¿™æ˜¯ä¸€ç§ä¼˜åŒ–ï¼šæ—¢ç„¶æ²¡æœ‰å­ View åœ¨å¤„ç†è¿™ä¸ªæ‰‹åŠ¿ï¼ˆæ„å‘³ç€ä¹‹å‰æ‰€æœ‰çš„å­ View åœ¨Â <code>DOWN</code>Â æ—¶éƒ½è¿”å›äº†Â <code>false</code>ï¼Œæˆ–è€…çˆ¶ View å·²ç»åœ¨Â <code>DOWN</code>Â æ—¶æ‹¦æˆªäº†ï¼‰ï¼Œé‚£ä¹ˆåç»­äº‹ä»¶æ¯«æ— ç–‘é—®åº”è¯¥ç”±çˆ¶ View è‡ªå·±å¤„ç†ï¼Œæ— éœ€å†è¯¢é—®æ˜¯å¦æ‹¦æˆªÂ ã€‚</p>
<p><code>onInterceptTouchEvent</code> ä¸­ä¸åº”è¿›è¡Œå¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼Œå®é™…ä¸Šï¼Œè¯¥æ–¹æ³•åº”ä»…ç”¨äº<strong>çŠ¶æ€æ£€æµ‹</strong>ï¼ˆå¦‚ï¼šæ£€æµ‹æ»‘åŠ¨è·ç¦»æ˜¯å¦è¶…è¿‡Â <code>TouchSlop</code>ï¼‰ã€‚çœŸæ­£çš„ä¸šåŠ¡å¤„ç†ï¼ˆå¦‚æ»šåŠ¨è§†å›¾ï¼‰åº”åœ¨Â <code>onTouchEvent</code>Â ä¸­è¿›è¡Œ.</p>
<h4 data-id="heading-12">B. å¯»æ‰¾ç›®æ ‡å­ View (Targeting)</h4>
<p>å¦‚æœäº‹ä»¶æ²¡æœ‰è¢«å–æ¶ˆï¼Œä¹Ÿæ²¡æœ‰è¢«æ‹¦æˆªï¼Œä¸”æ˜¯ <code>DOWN</code> äº‹ä»¶ï¼ŒViewGroup å°±å¼€å§‹â€œæ‹›å‹Ÿâ€å¤„ç†è€…ï¼Œå‡†å¤‡å‘ä¸‹åˆ†å‘:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ViewGroup.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">dispatchTouchEvent</span><span class="hljs-params">(MotionEvent ev)</span> {
    <span class="hljs-comment">//...</span>
    <span class="hljs-keyword">if</span> (onFilterTouchEventForSecurity(ev)) {
        <span class="hljs-comment">// ...</span>
        
        <span class="hljs-comment">// [æµç¨‹è§£é‡Š] å¦‚æœäº‹ä»¶æœªå–æ¶ˆä¸”æœªæ‹¦æˆªï¼Œåˆ™å¼€å§‹åˆ†å‘ç»™å­ View</span>
        <span class="hljs-keyword">if</span> (!canceled &amp;&amp; !intercepted) {
            <span class="hljs-comment">// ...</span>
            <span class="hljs-keyword">if</span> (actionMasked == MotionEvent.ACTION_DOWN || ...) {
                <span class="hljs-comment">// 1. è·å–å­ View åˆ—è¡¨ï¼ˆæŒ‰ç…§ Z-order æ’åºï¼Œæœ€åç»˜åˆ¶çš„åœ¨æœ€ä¸Šé¢ï¼‰</span>
                <span class="hljs-keyword">final</span> ArrayList&lt;View&gt; preorderedList = buildTouchDispatchChildList();

                <span class="hljs-comment">// 2. å€’åºéå†ï¼ˆä»æœ€ä¸Šå±‚ View å¼€å§‹é—®ï¼‰</span>
                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> childrenCount - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
                    <span class="hljs-comment">// ... è·å– child ...</span>

                    <span class="hljs-comment">// 3. é—¨æ§›æ£€æŸ¥ï¼šView å¯è§ï¼ŸåŠ¨ç”»æ²¡æ’­æ”¾å®Œï¼Ÿç‚¹å‡»åæ ‡åœ¨ View å†…éƒ¨ï¼Ÿ</span>
                    <span class="hljs-keyword">if</span> (!child.canReceivePointerEvents()
                            || !isTransformedTouchPointInView(x, y, child, <span class="hljs-literal">null</span>)) {
                        <span class="hljs-keyword">continue</span>; <span class="hljs-comment">// ä¸æ»¡è¶³æ¡ä»¶ï¼Œæ‰¾ä¸‹ä¸€ä¸ª</span>
                    }

                    <span class="hljs-comment">// 4. å°è¯•åˆ†å‘ï¼(dispatchTransformedTouchEvent å†…éƒ¨è°ƒç”¨ child.dispatchTouchEvent)</span>
                    <span class="hljs-keyword">if</span> (dispatchTransformedTouchEvent(ev, <span class="hljs-literal">false</span>, child, idBitsToAssign)) {
                        <span class="hljs-comment">// 5. æ‰¾åˆ°äº†ï¼å­ View è¿”å›äº† true</span>

                        <span class="hljs-comment">// 6. ã€å…³é”®ã€‘è®°å½•è¿™ä¸ªå­ View åˆ° mFirstTouchTarget é“¾è¡¨ä¸­</span>
                        newTouchTarget = addTouchTarget(child, idBitsToAssign);
                        alreadyDispatchedToNewTouchTarget = <span class="hljs-literal">true</span>;
                        <span class="hljs-keyword">break</span>; <span class="hljs-comment">// æ‰¾åˆ°äº†å°±åœæ­¢éå†ï¼ä¼˜åŒ–æ€§èƒ½</span>
                    }
                }
            }
        }
    }
}
</code></pre>
<p>ä¸ºäº†ç¡®ä¿ç‚¹å‡»çš„æœ€ä¸Šå±‚ View èƒ½ä¼˜å…ˆæ¥æ”¶åˆ°äº‹ä»¶ï¼Œéœ€è¦é€šè¿‡ buildTouchDispatchChildList è·å–ä¸€ä¸ªæŒ‰ Z è½´æ’åºçš„å­ View åˆ—è¡¨ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ViewGroup.java</span>
<span class="hljs-keyword">public</span> ArrayList&lt;View&gt; <span class="hljs-title function_">buildTouchDispatchChildList</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// å®é™…è°ƒç”¨æ„å»ºæœ‰åºåˆ—è¡¨çš„æ–¹æ³•</span>
    <span class="hljs-keyword">return</span> buildOrderedChildList();
}

ArrayList&lt;View&gt; <span class="hljs-title function_">buildOrderedChildList</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">childrenCount</span> <span class="hljs-operator">=</span> mChildrenCount;
    <span class="hljs-comment">// [ä¼˜åŒ–] å¦‚æœæ²¡æœ‰å­ View è®¾ç½® Z å€¼ï¼Œä¸éœ€è¦æ’åºï¼Œç›´æ¥è¿”å› null</span>
    <span class="hljs-keyword">if</span> (childrenCount &lt;= <span class="hljs-number">1</span> || !hasChildWithZ()) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

    <span class="hljs-comment">// [ä¼˜åŒ–] å¤ç”¨åˆ—è¡¨ï¼Œé¿å…å†…å­˜æŠ–åŠ¨</span>
    <span class="hljs-keyword">if</span> (mPreSortedChildren == <span class="hljs-literal">null</span>) {
        mPreSortedChildren = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(childrenCount);
    } <span class="hljs-keyword">else</span> {
        mPreSortedChildren.clear();
    }

    <span class="hljs-comment">// ViewGroup çš„å­ View ç»˜åˆ¶é¡ºåºæ˜¯å¦æ˜¯è‡ªå®šä¹‰çš„</span>
    <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">customOrder</span> <span class="hljs-operator">=</span> isChildrenDrawingOrderEnabled();
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; childrenCount; i++) {
        <span class="hljs-comment">// è·å–å­ View ç´¢å¼•ï¼ˆæ”¯æŒè‡ªå®šä¹‰ç»˜åˆ¶é¡ºåº getChildDrawingOrderï¼‰</span>
        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">childIndex</span> <span class="hljs-operator">=</span> getAndVerifyPreorderedIndex(childrenCount, i, customOrder);
        <span class="hljs-comment">// è·å–åˆ°å­ View å¯¹è±¡</span>
        <span class="hljs-keyword">final</span> <span class="hljs-type">View</span> <span class="hljs-variable">nextChild</span> <span class="hljs-operator">=</span> mChildren[childIndex];
        <span class="hljs-comment">// è·å–å½“å‰å­ View çš„ Z å€¼ï¼ˆZ = elevation + translationZï¼‰</span>
        <span class="hljs-keyword">final</span> <span class="hljs-type">float</span> <span class="hljs-variable">currentZ</span> <span class="hljs-operator">=</span> nextChild.getZ();

        <span class="hljs-comment">// [æ­¥éª¤2] æ’å…¥æ’åº (Insertion Sort)</span>
        <span class="hljs-comment">// å¯»æ‰¾æ’å…¥ä½ç½®ï¼šä¿æŒåˆ—è¡¨æŒ‰ Z å€¼ä»å°åˆ°å¤§æ’åº</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">insertIndex</span> <span class="hljs-operator">=</span> i;
        <span class="hljs-keyword">while</span> (insertIndex &gt; <span class="hljs-number">0</span> &amp;&amp; mPreSortedChildren.get(insertIndex - <span class="hljs-number">1</span>).getZ() &gt; currentZ) {
            insertIndex--;
        }
        <span class="hljs-comment">// å°†å½“å‰ View æ’å…¥åˆ°è®¡ç®—å‡ºçš„æœ€ç»ˆä½ç½®</span>
        mPreSortedChildren.add(insertIndex, nextChild);
    }
    <span class="hljs-keyword">return</span> mPreSortedChildren;
}
</code></pre>
<p>ç»§ç»­çœ‹ dispatchTouchEvent æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ViewGroup.java</span>
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> childrenCount - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
    <span class="hljs-comment">// [è·å– View] å¦‚æœæœ‰æ’åºåˆ—è¡¨ï¼Œä»åˆ—è¡¨ä¸­å–ï¼›å¦åˆ™ç›´æ¥å– mChildren æ•°ç»„</span>
    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">childIndex</span> <span class="hljs-operator">=</span> getAndVerifyPreorderedIndex(childrenCount, i, customOrder);
    <span class="hljs-keyword">final</span> <span class="hljs-type">View</span> <span class="hljs-variable">child</span> <span class="hljs-operator">=</span> getAndVerifyPreorderedView(preorderedList, children, childIndex);

    <span class="hljs-comment">// [å‘½ä¸­æµ‹è¯•] 1. View å¯è§ 2. è§¦æ‘¸ç‚¹åœ¨ View èŒƒå›´å†…</span>
    <span class="hljs-keyword">if</span> (!child.canReceivePointerEvents()
            || !isTransformedTouchPointInView(x, y, child, <span class="hljs-literal">null</span>)) {
        <span class="hljs-keyword">continue</span>;
    }

    <span class="hljs-comment">// [åˆ†å‘] å°è¯•å°†äº‹ä»¶äº¤ç»™å­ View å¤„ç†</span>
    <span class="hljs-keyword">if</span> (dispatchTransformedTouchEvent(ev, <span class="hljs-literal">false</span>, child, idBitsToAssign)) {
        <span class="hljs-comment">// ... å­ View æ¶ˆè´¹äº†äº‹ä»¶ï¼Œè®°å½• Target å¹¶è·³å‡ºå¾ªç¯</span>
        newTouchTarget = addTouchTarget(child, idBitsToAssign); <span class="hljs-comment">// [å…³é”®] æ·»åŠ åˆ° TouchTarget é“¾è¡¨å¤´</span>
        alreadyDispatchedToNewTouchTarget = <span class="hljs-literal">true</span>; <span class="hljs-comment">// [æ ‡è®°] æ ‡è®°å·²åˆ†å‘</span>

        <span class="hljs-keyword">break</span>;
    }
}
</code></pre>
<h4 data-id="heading-13">C. åç»­åˆ†å‘</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Case A: æ²¡äººå¤„ç† (mFirstTouchTarget ä¸ºç©º)</span>
<span class="hljs-keyword">if</span> (mFirstTouchTarget == <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// å¯èƒ½æ˜¯ä¹‹å‰æ‹¦æˆªäº†ï¼Œä¹Ÿå¯èƒ½æ˜¯æ‰€æœ‰å­ View éƒ½ä¸åœ¨ç‚¹å‡»èŒƒå›´å†…ï¼Œæˆ–è€…æ˜¯å­ View çš„ onTouchEvent éƒ½è¿”å›äº† falseã€‚</span>
    <span class="hljs-comment">// æ²¡æœ‰å­ View æ¶ˆè´¹äº‹ä»¶ (mFirstTouchTarget ä¸º null)</span>
    <span class="hljs-comment">// æ­¤æ—¶ ViewGroup è‡ªå·±å¤„ç†äº‹ä»¶ï¼Œè°ƒç”¨ dispatchTransformedTouchEvent æ—¶ child ä¼  null</span>
    <span class="hljs-comment">// å†…éƒ¨ä¼šè°ƒç”¨ super.dispatchTouchEvent(ev)ï¼Œå³ View.dispatchTouchEvent (è°ƒç”¨ onTouch/onTouchEvent)</span>
    handled = dispatchTransformedTouchEvent(ev, canceled, <span class="hljs-literal">null</span>, TouchTarget.ALL_POINTER_IDS);
} <span class="hljs-keyword">else</span> {<span class="hljs-comment">// Case B: æœ‰äººå¤„ç† (mFirstTouchTarget ä¸ä¸ºç©º)</span>
    <span class="hljs-type">TouchTarget</span> <span class="hljs-variable">target</span> <span class="hljs-operator">=</span> mFirstTouchTarget;
    <span class="hljs-keyword">while</span> (target != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">final</span> <span class="hljs-type">TouchTarget</span> <span class="hljs-variable">next</span> <span class="hljs-operator">=</span> target.next;
        
        <span class="hljs-comment">// å¦‚æœæ˜¯åˆšæ‰åœ¨â€œç¬¬äºŒé˜¶æ®µâ€åˆšæ‰¾åˆ°çš„é‚£ä¸ª childï¼Œä¸”å·²ç»å‘è¿‡ DOWN äº†ï¼Œå°±åˆ«å‘äº†ï¼Œç›´æ¥æ ‡è®° handled = true</span>
        <span class="hljs-keyword">if</span> (alreadyDispatchedToNewTouchTarget &amp;&amp; target == newTouchTarget) {
            handled = <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ª MOVE æˆ– UP äº‹ä»¶ï¼Œæˆ–è€…æ˜¯å¤šç‚¹è§¦æ§çš„å…¶ä»–æ‰‹æŒ‡</span>
            <span class="hljs-comment">// ç›´æ¥æŠŠäº‹ä»¶åˆ†å‘ç»™ target.childï¼Œã€ä¸éœ€è¦ã€‘å†éå†å­ View æ ‘äº†ï¼</span>
            <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">cancelChild</span> <span class="hljs-operator">=</span> resetCancelNextUpFlag(target.child) || intercepted;
            
            <span class="hljs-keyword">if</span> (dispatchTransformedTouchEvent(ev, cancelChild, target.child, target.pointerIdBits)) {
                handled = <span class="hljs-literal">true</span>;
            }
            
            <span class="hljs-comment">// å¦‚æœçˆ¶å®¹å™¨æ­¤æ—¶çªç„¶æ‹¦æˆª (intercepted = true)ï¼ŒcancelChild ä¼šå˜ä¸º true</span>
            <span class="hljs-comment">// ä¸‹ä¸€æ¬¡å¾ªç¯ï¼Œé“¾è¡¨å°±ä¼šè¢«æ¸…ç†ï¼ŒmFirstTouchTarget å˜å› null</span>
        }
        target = next;
    }
}
</code></pre>
<ul>
<li><strong>O(1) çš„åˆ†å‘æ•ˆç‡</strong>ï¼šå¯¹äº <code>MOVE</code> å’Œ <code>UP</code>ï¼Œä»£ç ç›´æ¥è¿›å…¥ <code>else</code> å—ï¼Œç›´æ¥æ‹¿åˆ° <code>mFirstTouchTarget</code> è¿›è¡Œåˆ†å‘ï¼Œè·³è¿‡äº†å®½å¤§çš„ <code>for</code> å¾ªç¯éå†ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Android äº‹ä»¶åˆ†å‘æ•ˆç‡é«˜çš„åŸå› ã€‚</li>
</ul>
<h4 data-id="heading-14">D. æ”¶å°¾</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (canceled
        || actionMasked == MotionEvent.ACTION_UP
        || actionMasked == MotionEvent.ACTION_HOVER_MOVE) {
    resetTouchState(); <span class="hljs-comment">// æ¸…é™¤ mFirstTouchTargetï¼Œé‡ç½®æ ‡è®°ä½</span>
}
</code></pre>
<p>å½“æ‰‹æŒ‡æŠ¬èµ·æˆ–äº‹ä»¶å–æ¶ˆæ—¶ï¼Œæ•´ä¸ªé“¾è·¯çŠ¶æ€æ¸…é›¶ï¼Œä¸ºä¸‹ä¸€æ¬¡ç‚¹å‡»åšå‡†å¤‡ã€‚</p>
<h3 data-id="heading-15">3.3 View çš„æ¶ˆè´¹é€»è¾‘</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">dispatchTransformedTouchEvent</span><span class="hljs-params">(MotionEvent event, <span class="hljs-type">boolean</span> cancel,
        View child, <span class="hljs-type">int</span> desiredPointerIdBits)</span> {
    <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> handled;

    <span class="hljs-comment">// å¦‚æœæ˜¯å–æ¶ˆäº‹ä»¶ (cancel=true æˆ– ACTION_CANCEL)ï¼Œç›´æ¥åˆ†å‘å–æ¶ˆæ“ä½œï¼Œä¸éœ€è¦åæ ‡è½¬æ¢</span>
    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">oldAction</span> <span class="hljs-operator">=</span> event.getAction();
    <span class="hljs-keyword">if</span> (cancel || oldAction == MotionEvent.ACTION_CANCEL) {
        event.setAction(MotionEvent.ACTION_CANCEL);
        <span class="hljs-keyword">if</span> (child == <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// [å…³é”®è°ƒç”¨] å¦‚æœæ²¡æœ‰ child (å³ ViewGroup è‡ªå·±å¤„ç†)ï¼Œè°ƒç”¨çˆ¶ç±»çš„ dispatchTouchEvent (View.dispatchTouchEvent)</span>
            handled = <span class="hljs-built_in">super</span>.dispatchTouchEvent(event);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// [å…³é”®è°ƒç”¨] è°ƒç”¨å­ View çš„ dispatchTouchEvent</span>
            handled = child.dispatchTouchEvent(event);
        }
        event.setAction(oldAction); <span class="hljs-comment">// æ¢å¤ Action</span>
        <span class="hljs-keyword">return</span> handled;
    }

    <span class="hljs-comment">// Calculate the number of pointers to deliver.</span>
    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">oldPointerIdBits</span> <span class="hljs-operator">=</span> event.getPointerIdBits();
    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">newPointerIdBits</span> <span class="hljs-operator">=</span> oldPointerIdBits &amp; desiredPointerIdBits;

    <span class="hljs-comment">// If for some reason we ended up in an inconsistent state where it looks like we</span>
    <span class="hljs-comment">// might produce a motion event with no pointers in it, then drop the event.</span>
    <span class="hljs-keyword">if</span> (newPointerIdBits == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-comment">// If the number of pointers is the same and we don't need to perform any fancy</span>
    <span class="hljs-comment">// irreversible transformations, then we can reuse the motion event for this</span>
    <span class="hljs-comment">// dispatch as long as we are careful to revert any changes we make.</span>
    <span class="hljs-comment">// Otherwise we need to make a copy.</span>
    <span class="hljs-comment">// [æºç ç»†èŠ‚] ä¼˜åŒ–ï¼šå¦‚æœ Pointer æ•°é‡æ²¡å˜ï¼Œå°½é‡é‡ç”¨ MotionEvent å¯¹è±¡ï¼Œé¿å…åˆ›å»ºæ–°å¯¹è±¡</span>
    <span class="hljs-keyword">final</span> MotionEvent transformedEvent;
    <span class="hljs-keyword">if</span> (newPointerIdBits == oldPointerIdBits) {
        <span class="hljs-keyword">if</span> (child == <span class="hljs-literal">null</span> || child.hasIdentityMatrix()) {
            <span class="hljs-keyword">if</span> (child == <span class="hljs-literal">null</span>) {
                handled = <span class="hljs-built_in">super</span>.dispatchTouchEvent(event); <span class="hljs-comment">// [å…³é”®] ViewGroup è‡ªå·±å¤„ç†</span>
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">final</span> <span class="hljs-type">float</span> <span class="hljs-variable">offsetX</span> <span class="hljs-operator">=</span> mScrollX - child.mLeft;
                <span class="hljs-keyword">final</span> <span class="hljs-type">float</span> <span class="hljs-variable">offsetY</span> <span class="hljs-operator">=</span> mScrollY - child.mTop;
                event.offsetLocation(offsetX, offsetY); <span class="hljs-comment">// [åæ ‡è½¬æ¢] è½¬æ¢åˆ°å­ View åæ ‡ç³»</span>

                handled = child.dispatchTouchEvent(event); <span class="hljs-comment">// [å…³é”®] åˆ†å‘ç»™å­ View</span>

                event.offsetLocation(-offsetX, -offsetY); <span class="hljs-comment">// [æ¢å¤] æ¢å¤åæ ‡</span>
            }
            <span class="hljs-keyword">return</span> handled;
        }
        transformedEvent = MotionEvent.obtain(event); <span class="hljs-comment">// éœ€è¦å˜æ¢çŸ©é˜µï¼Œå¤åˆ¶ä¸€ä»½äº‹ä»¶</span>
    } <span class="hljs-keyword">else</span> {
        transformedEvent = event.split(newPointerIdBits); <span class="hljs-comment">// éœ€è¦æ‹†åˆ† Pointerï¼Œå¤åˆ¶ä¸€ä»½äº‹ä»¶</span>
    }

    <span class="hljs-comment">// Perform any necessary transformations and dispatch.</span>
    <span class="hljs-keyword">if</span> (child == <span class="hljs-literal">null</span>) {
        handled = <span class="hljs-built_in">super</span>.dispatchTouchEvent(transformedEvent);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">final</span> <span class="hljs-type">float</span> <span class="hljs-variable">offsetX</span> <span class="hljs-operator">=</span> mScrollX - child.mLeft;
        <span class="hljs-keyword">final</span> <span class="hljs-type">float</span> <span class="hljs-variable">offsetY</span> <span class="hljs-operator">=</span> mScrollY - child.mTop;
        transformedEvent.offsetLocation(offsetX, offsetY);
        <span class="hljs-keyword">if</span> (! child.hasIdentityMatrix()) {
            transformedEvent.transform(child.getInverseMatrix()); <span class="hljs-comment">// åº”ç”¨çŸ©é˜µå˜æ¢</span>
        }

        handled = child.dispatchTouchEvent(transformedEvent); <span class="hljs-comment">// [å…³é”®] åˆ†å‘ç»™å­ View</span>
    }

    <span class="hljs-comment">// Done.</span>
    transformedEvent.recycle(); <span class="hljs-comment">// å›æ”¶ä¸´æ—¶äº‹ä»¶</span>
    <span class="hljs-keyword">return</span> handled;
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">dispatchTouchEvent</span><span class="hljs-params">(MotionEvent event)</span> {
    <span class="hljs-comment">// If the event should be handled by accessibility focus first.</span>
    <span class="hljs-keyword">if</span> (event.isTargetAccessibilityFocus()) {
        <span class="hljs-comment">// We don't have focus or no virtual descendant has it, do not handle the event.</span>
        <span class="hljs-keyword">if</span> (!isAccessibilityFocusedViewOrHost()) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        <span class="hljs-comment">// We have focus and got the event, then use normal event dispatch.</span>
        event.setTargetAccessibilityFocus(<span class="hljs-literal">false</span>);
    }
    <span class="hljs-type">boolean</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;

    <span class="hljs-keyword">if</span> (mInputEventConsistencyVerifier != <span class="hljs-literal">null</span>) {
        mInputEventConsistencyVerifier.onTouchEvent(event, <span class="hljs-number">0</span>);
    }

    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">actionMasked</span> <span class="hljs-operator">=</span> event.getActionMasked();
    <span class="hljs-keyword">if</span> (actionMasked == MotionEvent.ACTION_DOWN) {
        <span class="hljs-comment">// Defensive cleanup for new gesture</span>
        stopNestedScroll();
    }

    <span class="hljs-comment">// &lt;p&gt;</span>
    <span class="hljs-comment">// [æµç¨‹è§£é‡Š] View çš„äº‹ä»¶åˆ†å‘é€»è¾‘</span>
    <span class="hljs-comment">// 1. ä¼˜å…ˆè°ƒç”¨ OnTouchListener (å¦‚æœè®¾ç½®äº†ä¸” View æ˜¯ Enabled çš„)</span>
    <span class="hljs-comment">// 2. å¦‚æœ OnTouchListener è¿”å› falseï¼Œå†è°ƒç”¨ onTouchEvent</span>
    <span class="hljs-keyword">if</span> (onFilterTouchEventForSecurity(event)) {
        <span class="hljs-keyword">if</span> ((mViewFlags &amp; ENABLED_MASK) == ENABLED &amp;&amp; handleScrollBarDragging(event)) {
            result = <span class="hljs-literal">true</span>;
        }
        <span class="hljs-comment">//noinspection SimplifiableIfStatement</span>
        <span class="hljs-type">ListenerInfo</span> <span class="hljs-variable">li</span> <span class="hljs-operator">=</span> mListenerInfo;
        <span class="hljs-keyword">if</span> (li != <span class="hljs-literal">null</span> &amp;&amp; li.mOnTouchListener != <span class="hljs-literal">null</span>
                &amp;&amp; (mViewFlags &amp; ENABLED_MASK) == ENABLED
                &amp;&amp; li.mOnTouchListener.onTouch(<span class="hljs-built_in">this</span>, event)) {
            result = <span class="hljs-literal">true</span>;
        }

        <span class="hljs-keyword">if</span> (!result &amp;&amp; onTouchEvent(event)) {
            result = <span class="hljs-literal">true</span>;
        }
    }

    <span class="hljs-keyword">if</span> (!result &amp;&amp; mInputEventConsistencyVerifier != <span class="hljs-literal">null</span>) {
        mInputEventConsistencyVerifier.onUnhandledEvent(event, <span class="hljs-number">0</span>);
    }

    <span class="hljs-comment">// Clean up after nested scrolls if this is the end of a gesture;</span>
    <span class="hljs-comment">// also cancel it if we tried an ACTION_DOWN but we didn't want the rest</span>
    <span class="hljs-comment">// of the gesture.</span>
    <span class="hljs-keyword">if</span> (actionMasked == MotionEvent.ACTION_UP ||
            actionMasked == MotionEvent.ACTION_CANCEL ||
            (actionMasked == MotionEvent.ACTION_DOWN &amp;&amp; !result)) {
        stopNestedScroll();
    }

    <span class="hljs-keyword">return</span> result;
}
</code></pre>
<p>å…ˆåˆ¤æ–­ OnTouchListener.onTouch()ï¼Œè‹¥è¿”å› true åˆ™æ¶ˆè´¹äº‹ä»¶ï¼Œç»“æŸåˆ†å‘ï¼›è‹¥è¿”å› falseï¼Œåˆ™è°ƒç”¨ onTouchEvent()ã€‚</p>
<p>onTouchEvent: æ ¸å¿ƒäº‹ä»¶å¤„ç† (ç‚¹å‡»ã€é•¿æŒ‰ç­‰ï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">onTouchEvent</span><span class="hljs-params">(MotionEvent event)</span> {
    <span class="hljs-comment">// [é¢è¯•é«˜é¢‘è€ƒç‚¹] CLICKABLE å±æ€§å¯¹äº‹ä»¶æ¶ˆè´¹çš„å½±å“</span>
    <span class="hljs-comment">// åªè¦ View æ˜¯ CLICKABLEã€LONG_CLICKABLE æˆ– CONTEXT_CLICKABLE çš„ï¼Œ</span>
    <span class="hljs-comment">// onTouchEvent å°±ä¼šè¿”å› trueï¼Œè¡¨ç¤ºæ¶ˆè´¹äº†äº‹ä»¶ï¼Œæ— è®ºæ˜¯å¦å®é™…æ‰§è¡Œäº†ç‚¹å‡»é€»è¾‘</span>
    <span class="hljs-comment">// [æºç ç»†èŠ‚] å“ªæ€• View æ˜¯ DISABLED (ä¸å¯ç”¨) çŠ¶æ€ï¼Œåªè¦å®ƒæ˜¯ CLICKABLE çš„ï¼Œå®ƒä¾ç„¶ä¼šæ¶ˆè´¹äº‹ä»¶(è¿”å› true)ï¼Œåªæ˜¯ä¸å“åº”åŠ¨ä½œã€‚</span>
    <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">clickable</span> <span class="hljs-operator">=</span> ((viewFlags &amp; CLICKABLE) == CLICKABLE ...)

    <span class="hljs-comment">// ...</span>

    <span class="hljs-comment">// ACTION_UP: å¤„ç†ç‚¹å‡»äº‹ä»¶</span>
    <span class="hljs-keyword">case</span> MotionEvent.ACTION_UP:
         <span class="hljs-comment">// ...</span>
         <span class="hljs-comment">// [æºç ç»†èŠ‚] æ‰§è¡Œç‚¹å‡»å›è°ƒ</span>
         <span class="hljs-comment">// performClick() ä¼šè°ƒç”¨ OnClickListener.onClick()</span>
         <span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ª Post æ“ä½œï¼Œä¿è¯äº† UI çŠ¶æ€æ›´æ–°ä¼˜å…ˆäºç‚¹å‡»å›è°ƒ</span>
         <span class="hljs-comment">// [é¢è¯•é«˜é¢‘è€ƒç‚¹] onClick æ˜¯åœ¨å“ªé‡Œè°ƒç”¨çš„ï¼Ÿ</span>
         <span class="hljs-comment">// ç­”ï¼šåœ¨ onTouchEvent çš„ ACTION_UP ä¸­ï¼Œä¸”æ²¡æœ‰è§¦å‘é•¿æŒ‰ï¼Œä¸”å¤„äºæŒ‰ä¸‹çŠ¶æ€æ—¶è°ƒç”¨ã€‚</span>
         performClickInternal();

    <span class="hljs-comment">// ACTION_DOWN: å¤„ç†æŒ‰ä¸‹åé¦ˆå’Œé•¿æŒ‰æ£€æµ‹</span>
    <span class="hljs-keyword">case</span> MotionEvent.ACTION_DOWN:
         <span class="hljs-comment">// [æºç ç»†èŠ‚] å»¶è¿Ÿåé¦ˆ (Scrolling Container)</span>
         <span class="hljs-comment">// å¦‚æœ View åœ¨æ»šåŠ¨å®¹å™¨ä¸­ (å¦‚ ListView/ScrollView)ï¼ŒACTION_DOWN ä¸ä¼šç«‹å³æ˜¾ç¤ºæŒ‰ä¸‹çŠ¶æ€ (Pressed)ï¼Œ</span>
         <span class="hljs-comment">// è€Œæ˜¯ä¼šå»¶è¿Ÿä¸€æ®µæ—¶é—´ (TapTimeout)ã€‚è¿™æ˜¯ä¸ºäº†åŒºåˆ†ç”¨æˆ·æ˜¯æƒ³ç‚¹å‡»è¿˜æ˜¯æƒ³æ»‘åŠ¨ã€‚</span>
         <span class="hljs-comment">// å¦‚æœåœ¨ TapTimeout å†…å‘ç”Ÿäº†æ»‘åŠ¨ (ACTION_MOVE)ï¼Œåˆ™å–æ¶ˆç‚¹å‡»åˆ¤å®šã€‚</span>
         <span class="hljs-keyword">if</span> (isInScrollingContainer) {
             <span class="hljs-comment">// ...</span>
         } <span class="hljs-keyword">else</span> {
             setPressed(<span class="hljs-literal">true</span>, x, y);
             <span class="hljs-comment">// [æºç ç»†èŠ‚] æ£€æŸ¥é•¿æŒ‰</span>
             <span class="hljs-comment">// å‘é€ä¸€ä¸ªå»¶è¿Ÿæ¶ˆæ¯ï¼Œå¦‚æœåœ¨ LongPressTimeout æ—¶é—´å†…æ²¡æœ‰ UP æˆ– CANCELï¼Œåˆ™è§¦å‘ onLongClick</span>
             checkForLongClick(...)
         }

    <span class="hljs-comment">// ACTION_MOVE: å¤„ç†ç§»å‡º View</span>
    <span class="hljs-keyword">case</span> MotionEvent.ACTION_MOVE:
         <span class="hljs-keyword">if</span> (!pointInView(x, y, touchSlop)) {
             <span class="hljs-comment">// [æºç ç»†èŠ‚] å¦‚æœæ‰‹æŒ‡ç§»å‡ºäº† View çš„èŒƒå›´ (åŠ ä¸Š touchSlop å®¹å·®)</span>
             <span class="hljs-comment">// åˆ™å–æ¶ˆç‚¹å‡»å’Œé•¿æŒ‰æ£€æµ‹ï¼Œå¹¶å°† Pressed çŠ¶æ€ç½®ä¸º false</span>
             removeTapCallback();
             removeLongPressCallback();
             <span class="hljs-comment">// ...</span>
         }
</code></pre>
<p><code>onClick</code> æ˜¯åœ¨ <code>onTouchEvent</code> çš„ <code>ACTION_UP</code> ä¸­è¢«è§¦å‘çš„ã€‚</p>
<ol>
<li><strong>ä¼˜å…ˆçº§</strong>ï¼š<code>OnTouchListener.onTouch</code> &gt; <code>onTouchEvent</code> &gt; <code>OnClickListener.onClick</code>ã€‚</li>
<li><strong>PerformClick</strong>ï¼šåœ¨ <code>ACTION_UP</code> ä¸­ï¼Œå¦‚æœæ˜¯éé•¿æŒ‰ä¸”åœ¨ View åŒºåŸŸå†…ï¼Œä¼šè°ƒç”¨ <code>performClick()</code>ï¼Œè¿›è€Œå›è°ƒ <code>onClick</code>ã€‚</li>
<li><strong>Clickable çš„å½±å“</strong>ï¼šåªè¦ View æ˜¯ <code>CLICKABLE</code> æˆ– <code>LONG_CLICKABLE</code> çš„ï¼ˆButton é»˜è®¤ä¸º trueï¼ŒImageView é»˜è®¤ä¸º falseï¼‰ï¼Œ<code>onTouchEvent</code> å°±ä¼šè¿”å› <code>true</code>ï¼Œè¡¨ç¤ºæ¶ˆè´¹äº‹ä»¶ã€‚</li>
</ol>
<p>Android å°†è§¦æ§å›è°ƒæ‹†åˆ†ä¸º <strong>OnTouchListener / onTouchEvent / OnClickListener</strong>ï¼Œæœ¬è´¨æ˜¯å¯¹ <strong>â€œäº‹ä»¶æ‹¦æˆªâ€ / â€œäº‹ä»¶å¤„ç†â€ / â€œè¯­ä¹‰å›è°ƒâ€</strong> çš„åˆ†å±‚è§£è€¦è®¾è®¡ï¼š</p>
<ul>
<li><strong>onTouchListener</strong>ï¼šå¤–éƒ¨å¯æ’æ‹”çš„æ‹¦æˆªå±‚</li>
<li><strong>onTouchEvent</strong>ï¼šView å†…éƒ¨çš„è§¦æ§çŠ¶æ€æœº</li>
<li><strong>onClick</strong>ï¼šé«˜å±‚è¯­ä¹‰ç»“æœå›è°ƒ</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SPI åªæ˜¯ä¸ªæ¥å£ï¼Ÿæ­ç§˜èŠ¯ç‰‡é—´çš„é«˜é€Ÿé€šé“ï¼]]></title>    <link>https://juejin.cn/post/7588092534162128896</link>    <guid>https://juejin.cn/post/7588092534162128896</guid>    <pubDate>2025-12-27T16:28:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588092534162128896" data-draft-id="7588004601393938466" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SPI åªæ˜¯ä¸ªæ¥å£ï¼Ÿæ­ç§˜èŠ¯ç‰‡é—´çš„é«˜é€Ÿé€šé“ï¼"/> <meta itemprop="keywords" content="åµŒå…¥å¼,ç‰©è”ç½‘"/> <meta itemprop="datePublished" content="2025-12-27T16:28:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿·äººçš„æ˜Ÿç©º"/> <meta itemprop="url" content="https://juejin.cn/user/977890073916588"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SPI åªæ˜¯ä¸ªæ¥å£ï¼Ÿæ­ç§˜èŠ¯ç‰‡é—´çš„é«˜é€Ÿé€šé“ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/977890073916588/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿·äººçš„æ˜Ÿç©º
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T16:28:38.000Z" title="Sat Dec 27 2025 16:28:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ä¸€ã€æ ¸å¿ƒå®šä¹‰</strong></h2>
<p><strong>SPI</strong>Â æ˜¯ä¸€ç§ç¡¬ä»¶å±‚é¢çš„<strong>åŒæ­¥ã€å…¨åŒå·¥ã€ä¸»ä»å¼</strong>ä¸²è¡Œé€šä¿¡åè®®ã€‚æƒ³è±¡ä¸€ä¸ªé«˜é€Ÿå…¬è·¯ç³»ç»Ÿï¼š</p>
<ul>
<li><strong>äº¤è­¦ä¸­å¿ƒï¼ˆMasterï¼‰</strong> ï¼šç³»ç»Ÿå”¯ä¸€çš„æŒ‡æŒ¥è€…ï¼Œå†³å®šä½•æ—¶å‘è½¦ã€é“è·¯é™é€Ÿï¼ˆæ—¶é’Ÿé¢‘ç‡ï¼‰ã€‚</li>
<li><strong>è´§è¿ä»“åº“ï¼ˆSlavesï¼‰</strong> ï¼šå¤šä¸ªç­‰å¾…æœåŠ¡çš„èŠ‚ç‚¹ï¼Œæ²¡æœ‰äº¤è­¦ç‚¹åï¼Œä¸èƒ½ä¸»åŠ¨å‘è½¦ã€‚</li>
<li><strong>ä¸“ç”¨è½¦é“ï¼ˆæ€»çº¿ï¼‰</strong> ï¼šè¿™æ˜¯ä¸€æ¡é“ºè®¾äº†<strong>åŒå‘åŒæ­¥è½¦é“</strong>çš„é«˜é€Ÿå…¬è·¯ã€‚è½¦è¾†ï¼ˆæ•°æ®ï¼‰åœ¨ç²¾å‡†çš„ç»¿ç¯ä¿¡å·ï¼ˆæ—¶é’Ÿï¼‰æŒ‡æŒ¥ä¸‹ï¼Œ<strong>åŒæ—¶åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šé«˜é€Ÿå¯¹å¼€</strong>ï¼Œæ•ˆç‡æé«˜ã€‚</li>
</ul>
<h2 data-id="heading-1"><strong>äºŒã€å·¥ä½œæœºåˆ¶</strong></h2>
<p>è¿™æ¡â€œé«˜é€Ÿå…¬è·¯â€æœ€å°‘ç”±4æ¡ä¸“ç”¨è½¦é“ï¼ˆä¿¡å·çº¿ï¼‰æ„æˆï¼Œè¿™æ˜¯ç†è§£å…¶æ‰€æœ‰ç‰¹æ€§çš„åŸºç¡€ï¼š</p>
<ul>
<li>
<p><strong>SCLKï¼ˆæ—¶é’Ÿçº¿ï¼‰- åŒæ­¥çº¢ç»¿ç¯</strong></p>
<ul>
<li>ç”±<strong>äº¤è­¦ä¸­å¿ƒï¼ˆä¸»è®¾å¤‡ï¼‰ç‹¬å®¶æ§åˆ¶</strong>ï¼Œäº§ç”Ÿå›ºå®šèŠ‚å¥çš„æ–¹æ³¢ã€‚æ¯ä¸€ä¸ªè„‰å†²ï¼Œéƒ½å‘½ä»¤æ‰€æœ‰è½¦è¾†åŒæ­¥å‰è¿›ä¸€ä½ã€‚</li>
</ul>
</li>
<li>
<p><strong>MOSIä¸MISOï¼ˆæ•°æ®çº¿ï¼‰- åŒå‘è½¦é“</strong></p>
<ul>
<li><strong>MOSI</strong>ï¼š<strong>ä¸»è®¾å¤‡è¾“å‡ºï¼Œä»è®¾å¤‡è¾“å…¥</strong>ã€‚ç›¸å½“äºäº¤è­¦ä¸­å¿ƒå‘ä»“åº“å‘é€æŒ‡ä»¤çš„<strong>ä¸‹è¡Œè½¦é“</strong>ã€‚</li>
<li><strong>MISO</strong>ï¼š<strong>ä¸»è®¾å¤‡è¾“å…¥ï¼Œä»è®¾å¤‡è¾“å‡º</strong>ã€‚ç›¸å½“äºä»“åº“å‘äº¤è­¦ä¸­å¿ƒæ±‡æŠ¥çŠ¶æ€çš„<strong>ä¸Šè¡Œè½¦é“</strong>ã€‚</li>
<li><strong>å…³é”®</strong>ï¼šæ•°æ®åœ¨<strong>æ¯ä¸ªæ—¶é’Ÿå‘¨æœŸå†…åŒæ—¶ã€åŒå‘ä¼ è¾“</strong>ï¼Œè¿™æ˜¯â€œå…¨åŒå·¥â€çš„æ ¸å¿ƒï¼Œä¹Ÿæ˜¯å…¶é«˜é€Ÿçš„åŸå› ã€‚</li>
</ul>
</li>
<li>
<p><strong>CSï¼ˆç‰‡é€‰çº¿ï¼‰- ä»“åº“ç‚¹åå¹¿æ’­</strong></p>
<ul>
<li>è¿™æ˜¯<strong>é€‰æ‹©ä¸è°é€šä¿¡</strong>çš„å…³é”®ã€‚æ¯ä¸ªä»“åº“ï¼ˆä»è®¾å¤‡ï¼‰éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„â€œç‚¹åå¹¿æ’­â€ã€‚</li>
<li>äº¤è­¦ä¸­å¿ƒé€šè¿‡<strong>æ‹‰ä½</strong>ï¼ˆæ¿€æ´»ï¼‰æŸä¸ªä»“åº“çš„å¹¿æ’­ï¼Œé€šçŸ¥å®ƒï¼šâ€œæ¥ä¸‹æ¥å’Œä½ å¯¹è¯â€ã€‚åŒä¸€æ—¶é—´<strong>åªèƒ½æ¿€æ´»ä¸€ä¸ªä»“åº“</strong>ã€‚</li>
</ul>
</li>
</ul>
<p><strong>ä¸€ä¸ªå®Œæ•´é€šä¿¡æµç¨‹ï¼š</strong></p>
<ol>
<li><strong>ç‚¹å</strong>ï¼šäº¤è­¦ä¸­å¿ƒæ‹‰ä½ä»“åº“Açš„<code>CS</code>çº¿ã€‚</li>
<li><strong>åŒæ­¥å‘è½¦</strong>ï¼šäº¤è­¦ä¸­å¿ƒå¼€å¯çº¢ç»¿ç¯(<code>SCLK</code>)ï¼Œå¹¶ç¬¬ä¸€ä¸ªæ—¶é’Ÿè¾¹æ²¿ï¼Œé€šè¿‡<code>MOSI</code>çº¿å‘å‡ºä¸€ä½æŒ‡ä»¤ï¼›åŒæ—¶ï¼Œä»“åº“Aä¹Ÿå¿…é¡»ç«‹å³åœ¨<code>MISO</code>çº¿ä¸Šå‡†å¤‡å¥½ä¸€ä½çŠ¶æ€æ•°æ®ã€‚</li>
<li><strong>å¹¶è¡Œäº¤æ¢</strong>ï¼šåœ¨éšåçš„æ¯ä¸ªæ—¶é’Ÿè¾¹æ²¿ï¼ŒåŒæ–¹éƒ½åŒæ­¥åœ°äº¤æ¢ä¸‹ä¸€ä½æ•°æ®ï¼Œå¦‚åŒåŒå‘è½¦é“ä¸Šå¯¹å‘è¡Œé©¶çš„è½¦æµã€‚</li>
<li><strong>ç»“æŸ</strong>ï¼šé€šä¿¡å®Œæ¯•ï¼Œäº¤è­¦ä¸­å¿ƒæ‹‰é«˜<code>CS</code>çº¿ï¼Œä»“åº“Aé€€å‡ºå¯¹è¯ã€‚</li>
</ol>
<p><strong>æŠ€æœ¯æ·±åŒ–ï¼šæ—¶é’Ÿæ¨¡å¼ï¼ˆCPOLä¸CPHAï¼‰</strong></p>
<p>è¿™æ˜¯åè®®åŒ¹é…çš„<strong>ç”Ÿæ­»çº¿</strong>ã€‚å®ƒå®šä¹‰äº†â€œçº¢ç»¿ç¯â€å…·ä½“çš„é—ªçƒè§„åˆ™ï¼š</p>
<ul>
<li><strong>CPOLï¼ˆæ—¶é’Ÿææ€§ï¼‰</strong> ï¼šçº¢ç»¿ç¯<strong>åˆå§‹æ˜¯äº®ï¼ˆé«˜ç”µå¹³ï¼‰è¿˜æ˜¯ç­ï¼ˆä½ç”µå¹³ï¼‰</strong> ï¼Ÿ</li>
<li><strong>CPHAï¼ˆæ—¶é’Ÿç›¸ä½ï¼‰</strong> ï¼šåœ¨çº¢ç»¿ç¯<strong>ç”±ç­å˜äº®ï¼ˆä¸Šå‡æ²¿ï¼‰è¿˜æ˜¯ç”±äº®å˜ç­ï¼ˆä¸‹é™æ²¿ï¼‰</strong>Â çš„æ—¶åˆ»é‡‡æ ·æ•°æ®ï¼Ÿ</li>
<li>è¿™ä¸¤è€…çš„4ç§ç»„åˆï¼ˆæ¨¡å¼0-3ï¼‰ï¼Œä¸»ä»è®¾å¤‡<strong>å¿…é¡»ç»å¯¹ä¸€è‡´</strong>ï¼Œå¦åˆ™æ•°æ®ä¼šå…¨éƒ¨é”™ä¹±ã€‚<strong>æ¨¡å¼0ï¼ˆCPOL=0ï¼Œ CPHA=0ï¼‰</strong>Â æœ€ä¸ºå¸¸ç”¨ã€‚</li>
</ul>
<h2 data-id="heading-2"><strong>ä¸‰ã€å±€é™æ€§â€</strong></h2>
<p>SPIçš„è®¾è®¡å“²å­¦æ˜¯â€œç”¨ç®€å•æ¢é€Ÿåº¦â€ï¼Œè¿™å¸¦æ¥äº†ä¸€ç³»åˆ—å›ºæœ‰å±€é™ï¼š</p>
<ol>
<li><strong>æ— åº”ç­”æœºåˆ¶ï¼ˆç›²å‘ï¼‰</strong> ï¼šäº¤è­¦åªç®¡å‘è½¦ï¼Œä¸ç¡®è®¤ä»“åº“æ˜¯å¦æ”¶åˆ°ã€æ˜¯å¦æ»¡ä»“ã€‚å¿…é¡»ä¾é <strong>è½¯ä»¶å±‚é¢çš„é¢å¤–åè®®</strong>ï¼ˆå¦‚è¯»å–çŠ¶æ€å¯„å­˜å™¨ï¼‰æ¥ç¡®è®¤ã€‚</li>
<li><strong>å¼•è„šå ç”¨å¤šï¼ˆæˆæœ¬é«˜ï¼‰</strong> ï¼šæ¯å¤šè¿æ¥ä¸€ä¸ªä»“åº“ï¼Œå°±éœ€è¦æ–°å¢ä¸€æ ¹<code>CS</code>çº¿ã€‚è¿æ¥å¤§é‡è®¾å¤‡æ—¶ï¼Œä¼šè¿…é€Ÿè€—å°½ä¸»è®¾å¤‡çš„å¼•è„šèµ„æºã€‚</li>
<li><strong>é€šä¿¡è·ç¦»çŸ­ï¼ˆæœ¬åœ°ç½‘ï¼‰</strong> ï¼šç”±äºé‡‡ç”¨å•ç«¯ä¿¡å·ï¼Œæ˜“å—å¹²æ‰°ï¼Œé€šå¸¸ä»…é€‚ç”¨äº<strong>PCBæ¿çº§æˆ–æœºç®±å†…ï¼ˆ&lt;1ç±³ï¼‰</strong>Â çš„é«˜é€Ÿé€šä¿¡ã€‚</li>
<li><strong>ä»è®¾å¤‡å®æ—¶æ€§å‹åŠ›å¤§</strong>ï¼šä¸»è®¾å¤‡æ—¶é’Ÿä¸€å“ï¼Œä»è®¾å¤‡å¿…é¡»ç«‹åˆ»åœ¨<code>MISO</code>ä¸Šå‡†å¤‡å¥½æ•°æ®ï¼Œæ²¡æœ‰ä»»ä½•ç¼“å†²ä½™åœ°ã€‚å½“ä¸»è®¾å¤‡æ—¶é’Ÿæå¿«æ—¶ï¼Œå¯¹ä»è®¾å¤‡çš„ç¡¬ä»¶æ€§èƒ½æ˜¯å·¨å¤§è€ƒéªŒã€‚</li>
<li><strong>ç¼ºä¹å¤šä¸»èƒ½åŠ›</strong>ï¼šé«˜é€Ÿå…¬è·¯ä¸Šåªèƒ½æœ‰ä¸€ä¸ªäº¤è­¦ä¸­å¿ƒï¼Œæ— æ³•æ„å»ºå¤šä¸ªæŒ‡æŒ¥ä¸­å¿ƒååŒå·¥ä½œçš„å¤æ‚ç½‘ç»œã€‚</li>
</ol>
<h2 data-id="heading-3"><strong>å››ã€å·¥ç¨‹è¾¹ç•Œä¸é€‰å‹å†³ç­–</strong></h2>
<p>ç†è§£äº†å±€é™æ€§ï¼Œå°±åˆ’å®šäº†å®ƒçš„<strong>å·¥ç¨‹åº”ç”¨è¾¹ç•Œ</strong>ï¼Œå¹¶çŸ¥é“ä½•æ—¶è¯¥é€‰æ‹©å®ƒã€‚</p>
<ul>
<li><strong>æ ¸å¿ƒè¾¹ç•Œæ¡ä»¶</strong>
<ul>
<li><strong>é€Ÿç‡ä¸è·ç¦»æˆåæ¯”</strong>ï¼šè¿½æ±‚&gt;50Mbpsçš„é«˜é€Ÿç‡æ—¶ï¼Œé€šä¿¡è·ç¦»åº”æ§åˆ¶åœ¨å˜ç±³çº§ï¼Œå¹¶éœ€ä¸¥æ ¼è€ƒè™‘<strong>ä¿¡å·å®Œæ•´æ€§</strong>ï¼ˆå¦‚é˜»æŠ—åŒ¹é…ã€å‡å°‘è¿‡å­”ï¼‰ã€‚</li>
<li><strong>æ¨¡å¼å¿…é¡»ä¸¥æ ¼åŒ¹é…</strong>ï¼šä¸»ä»è®¾å¤‡å¿…é¡»åœ¨CPOLå’ŒCPHAä¸Š<strong>å®Œå…¨ä¸€è‡´</strong>ã€‚</li>
<li><strong>ä¸»è®¾å¤‡è´Ÿæ‹…å…¨éƒ¨æ§åˆ¶</strong>ï¼šæ‰€æœ‰é€šä¿¡çš„å‘èµ·ã€èŠ‚å¥ã€ç»ˆæ­¢å‡ç”±ä¸»è®¾å¤‡è´Ÿè´£ã€‚</li>
</ul>
</li>
<li><strong>æ¨ªå‘åè®®é€‰å‹å¯¹æ¯”</strong></li>
</ul>
<p>ä½•æ—¶ç”¨SPIï¼Ÿä¸I2Cã€UARTå¯¹æ¯”ä¸€ç›®äº†ç„¶ï¼š</p>















































<table><thead><tr><th>ç‰¹æ€§ç»´åº¦</th><th><strong>SPIï¼ˆé«˜é€Ÿå…¬è·¯ï¼‰</strong></th><th><strong>I2Cï¼ˆåŸå¸‚å…¬äº¤ï¼‰</strong></th><th><strong>UARTï¼ˆç›´æ‹¨ç”µè¯ï¼‰</strong></th></tr></thead><tbody><tr><td><strong>æ ¸å¿ƒç‰¹ç‚¹</strong></td><td><strong>åŒæ­¥ï¼Œå…¨åŒå·¥ï¼Œæé«˜é€Ÿ</strong></td><td>åŒæ­¥ï¼ŒåŠåŒå·¥ï¼Œå¤šè®¾å¤‡ï¼Œçœå¼•è„š</td><td>å¼‚æ­¥ï¼Œå…¨åŒå·¥ï¼Œç®€å•ï¼Œè¿œè·ç¦»</td></tr><tr><td><strong>å…¸å‹é€Ÿåº¦</strong></td><td><strong>10 Mbps - 100+ Mbps</strong></td><td>100 kbps - 3.4 Mbps</td><td>9600 bps - 10 Mbps</td></tr><tr><td><strong>å¼•è„šéœ€æ±‚</strong></td><td>3+<code>N</code>Â (<code>N</code>=ä»æœºæ•°)</td><td><strong>2çº¿ï¼ˆå§‹ç»ˆï¼‰</strong></td><td>2çº¿ (+2æµæ§)</td></tr><tr><td><strong>å¯»å€æ–¹å¼</strong></td><td>ç¡¬ä»¶ç‰‡é€‰(<code>CS</code>)çº¿</td><td><strong>7/10ä½è½¯ä»¶åœ°å€</strong></td><td>æ— åœ°å€ï¼ˆç‚¹å¯¹ç‚¹ï¼‰</td></tr><tr><td><strong>å¤šä¸»æ”¯æŒ</strong></td><td>å›°éš¾</td><td><strong>æ”¯æŒ</strong></td><td>ä¸æ”¯æŒ</td></tr><tr><td><strong>æœ€ä½³åœºæ™¯</strong></td><td>é«˜é€ŸFlashã€å±å¹•ã€ADC</td><td>ä¼ æ„Ÿå™¨ç½‘ç»œã€ä½é€ŸEEPROM</td><td>è°ƒè¯•æ—¥å¿—ã€æ¨¡å—é€ä¼ ã€é•¿è·ç¦»é€šä¿¡</td></tr></tbody></table>
<p><strong>é€‰å‹å£è¯€</strong>ï¼š</p>
<ul>
<li><strong>è¦é€Ÿåº¦ã€ä¸å·®å¼•è„šã€ä¸€å¯¹ä¸€æˆ–å°‘é‡è®¾å¤‡</strong>Â -&gt;Â <strong>é€‰SPI</strong>ã€‚</li>
<li><strong>è®¾å¤‡å¤šã€å¼•è„šçœã€é€Ÿåº¦è¦æ±‚ä¸é«˜</strong>Â -&gt;Â <strong>é€‰I2C</strong>ã€‚</li>
<li><strong>è·ç¦»è¿œã€ç®€å•å¯é ã€ç‚¹å¯¹ç‚¹è°ƒè¯•</strong>Â -&gt;Â <strong>é€‰UART</strong>ã€‚</li>
</ul>
<h2 data-id="heading-4"><strong>äº”ã€åº”ç”¨åœºæ™¯ä¸é«˜çº§è¿›åŒ–</strong></h2>
<ul>
<li>
<p><strong>ç»å…¸åº”ç”¨åœºæ™¯ï¼ˆä¼ ç»Ÿé«˜é€Ÿè·¯ï¼‰</strong></p>
<ul>
<li><strong>å­˜å‚¨å™¨</strong>ï¼šNOR Flashã€EEPROMçš„å¿«é€Ÿè¯»å†™ã€‚</li>
<li><strong>ä¼ æ„Ÿå™¨</strong>ï¼šé«˜é‡‡æ ·ç‡çš„IMUï¼ˆæƒ¯æ€§æµ‹é‡å•å…ƒï¼‰ã€å‹åŠ›ä¼ æ„Ÿå™¨ã€‚</li>
<li><strong>æ˜¾ç¤ºæ¥å£</strong>ï¼šOLEDã€TFTå±å¹•çš„åˆå§‹åŒ–ä¸æ˜¾å­˜åˆ·æ–°ã€‚</li>
<li><strong>æ¨¡æ•°è½¬æ¢</strong>ï¼šé«˜é€Ÿã€é«˜ç²¾åº¦ADC/DACçš„æ•°æ®è¯»å–ä¸é…ç½®ã€‚</li>
<li><strong>å¤„ç†å™¨é—´é€šä¿¡</strong>ï¼šMCUä¸FPGAã€DSPä¹‹é—´çš„æ•°æ®æµé€šé“ã€‚</li>
</ul>
</li>
<li>
<p><strong>åè®®çš„é«˜çº§è¿›åŒ–ï¼ˆæ™ºèƒ½ç«‹ä½“äº¤é€šï¼‰</strong></p>
</li>
</ul>
<p>ä¸ºçªç ´å±€é™ï¼ŒSPIå·²è¡ç”Ÿå‡ºæ›´å¼ºå¤§çš„ç‰ˆæœ¬ï¼š</p>
<ol>
<li><strong>QSPI/OSPI</strong>ï¼šå°†æ•°æ®è½¦é“ä»1æ¡æ‰©å®½è‡³<strong>4æ¡(QPI)æˆ–8æ¡(OPI)</strong> ï¼Œå®ç°â€œè½¦é˜Ÿå¹¶è¡Œâ€ï¼Œååé‡é£™å‡ã€‚å¹¿æ³›ç”¨äº<strong>å¤–æŒ‚Flashæ‰§è¡Œä»£ç (XIP)</strong> ã€‚</li>
<li><strong>åŒå€æ•°æ®é€Ÿç‡(DDR)</strong> ï¼šåœ¨çº¢ç»¿ç¯<strong>äº®èµ·å’Œç†„ç­çš„ç¬é—´éƒ½ä¼ è¾“æ•°æ®</strong>ï¼Œå°†ç†è®ºå¸¦å®½å†ç¿»ä¸€å€ã€‚</li>
<li><strong>å·®åˆ†SPI</strong>ï¼šä½¿ç”¨æŠ—å¹²æ‰°çš„<strong>å·®åˆ†ä¿¡å·å¯¹</strong>ï¼ˆå¦‚D+/D-ï¼‰ä¼ è¾“ï¼Œé€‚ç”¨äºé«˜é€Ÿé•¿è·æˆ–æ¶åŠ£ç”µç£ç¯å¢ƒã€‚</li>
</ol>
<h2 data-id="heading-5"><strong>å…­ã€ç³»ç»Ÿçº§å·¥ç¨‹è€ƒé‡</strong></h2>
<p>åœ¨å®é™…å¤æ‚ç³»ç»Ÿä¸­ï¼Œä½¿ç”¨SPIå¿…é¡»æ€è€ƒä»¥ä¸‹é—®é¢˜ï¼š</p>
<ol>
<li><strong>ç³»ç»ŸéªŒè¯</strong>ï¼šå¦‚ä½•ç¡®ä¿SPIæ§åˆ¶å™¨åœ¨æç«¯æ—¶åºã€æ•°æ®å†²çªä¸‹ä¾ç„¶å¯é ï¼Ÿéœ€é‡‡ç”¨<strong>UVMç­‰é«˜çº§éªŒè¯æ–¹æ³•å­¦</strong>ã€‚</li>
<li><strong>åŠŸè€—ç®¡ç†</strong>ï¼šé«˜é€Ÿæ—¶é’Ÿå¸¸å¼€åŠŸè€—å¤§ï¼Œéœ€ä½¿ç”¨<strong>æ—¶é’Ÿé—¨æ§</strong>æŠ€æœ¯åœ¨ç©ºé—²æ—¶å…³é—­æ—¶é’Ÿã€‚</li>
<li><strong>è½¯ä»¶ä¼˜åŒ–</strong>ï¼šåœ¨Linuxç­‰ç³»ç»Ÿä¸­ï¼Œå¯é€šè¿‡<strong>é¢„ç¼–è¯‘SPIæ¶ˆæ¯</strong>ã€ä½¿ç”¨DMAï¼ˆç›´æ¥å†…å­˜è®¿é—®ï¼‰æ¥è§£æ”¾CPUï¼Œå‡å°‘ä¼ è¾“å»¶è¿Ÿã€‚</li>
</ol>
<h2 data-id="heading-6"><strong>æ€»ç»“</strong></h2>
<p>ä½ å¯ä»¥å°†SPIè§†ä¸ºä¸€ä¸ªÂ <strong>â€œé«˜æ•ˆä½†è‹›åˆ»çš„çŸ­è·‘å¥å°†â€</strong>Â ï¼š</p>
<ul>
<li><strong>å®ƒæ˜¯ä»€ä¹ˆ</strong>ï¼šä¸€ä¸ªè¿½æ±‚<strong>æé€ŸåŒæ­¥å¹¶è¡Œ</strong>çš„èŠ¯ç‰‡çº§é€šä¿¡åè®®ã€‚</li>
<li><strong>å¦‚ä½•å·¥ä½œ</strong>ï¼šåœ¨<strong>å”¯ä¸€ä¸»æ§</strong>å‘å‡ºçš„ç²¾å‡†æ—¶é’Ÿä¸‹ï¼Œé€šè¿‡<strong>ç‚¹åï¼ˆCSï¼‰</strong>Â ä¸é€‰å®šä»æœºè¿›è¡Œ<strong>åŒå‘å®æ—¶ï¼ˆå…¨åŒå·¥ï¼‰</strong>Â æ•°æ®äº¤æ¢ã€‚</li>
<li><strong>å…¶å±€é™æ€§</strong>ï¼š<strong>æ— ç¡®è®¤ã€è´¹å¼•è„šã€è·ç¦»çŸ­ã€æ¨¡å¼éœ€ä¸¥é…</strong>ï¼Œæœ¬è´¨æ˜¯<strong>ç”¨ç¡¬ä»¶å¤æ‚åº¦å’Œæ§åˆ¶æƒæ¢å–é€Ÿåº¦</strong>ã€‚</li>
<li><strong>åº”ç”¨è¾¹ç•Œ</strong>ï¼šå®ƒæ˜¯<strong>æ¿çº§é«˜é€Ÿæ•°æ®æµçš„ç‹è€…</strong>ï¼Œä½†ä¸é€‚åˆæ„å»ºå¤æ‚çš„å¤šèŠ‚ç‚¹ç½‘ç»œæˆ–é•¿è·ç¦»é€šä¿¡ã€‚</li>
<li><strong>å·¥ç¨‹é€‰æ‹©</strong>ï¼šåœ¨é€Ÿåº¦è‡³ä¸Šçš„åœºæ™¯ï¼ˆå¦‚é©±åŠ¨å±å¹•ã€è¯»å–é«˜é€Ÿä¼ æ„Ÿå™¨ï¼‰ä¸­å®ƒæ˜¯é¦–é€‰ï¼Œä½†å¿…é¡»ä¸ºå…¶â€œä¼ºå€™â€å¥½ç¡¬ä»¶æ—¶åºå’Œä¿¡å·å®Œæ•´æ€§ã€‚</li>
</ul>
<p>ä»¥ä¸Šæ˜¯ä¸ªäººçš„ä¸€äº›æµ…è§ï¼Œå¦‚æœ‰ä¸å½“ä¹‹å¤„ï¼Œæ¬¢è¿æ‰¹è¯„æŒ‡æ­£ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python å·¥å…·ç”Ÿæ€æ·±åº¦è§£æï¼šä» Pyright åˆ° Astral å®¶æ—]]></title>    <link>https://juejin.cn/post/7588092534162161664</link>    <guid>https://juejin.cn/post/7588092534162161664</guid>    <pubDate>2025-12-27T16:35:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588092534162161664" data-draft-id="7588093282530558004" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python å·¥å…·ç”Ÿæ€æ·±åº¦è§£æï¼šä» Pyright åˆ° Astral å®¶æ—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-27T16:35:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="moyueheng"/> <meta itemprop="url" content="https://juejin.cn/user/251106837149720"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python å·¥å…·ç”Ÿæ€æ·±åº¦è§£æï¼šä» Pyright åˆ° Astral å®¶æ—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/251106837149720/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    moyueheng
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T16:35:52.000Z" title="Sat Dec 27 2025 16:35:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Python å·¥å…·ç”Ÿæ€æ·±åº¦è§£æï¼šä» Pyright åˆ° Astral å®¶æ—</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>Python å·¥å…·ç”Ÿæ€æ­£åœ¨ç»å†ä¸€åœºå‰æ‰€æœªæœ‰çš„å˜é©ã€‚è¿‘å¹´æ¥ï¼Œæˆ‘ä»¬è§è¯äº†å¤šä¸ªé«˜æ•ˆå·¥å…·çš„æ¶Œç°ï¼šRuff ä»¥ Rust ä¹‹å§¿å¸­å· Lint é¢†åŸŸï¼Œuv é‡å†™äº†åŒ…ç®¡ç†çš„æ¸¸æˆè§„åˆ™ï¼Œty åˆ™æ­£å‡†å¤‡é©æ–°ç±»å‹æ£€æŸ¥ã€‚é¢å¯¹è¿™ä¹ˆå¤šå·¥å…·ï¼Œå¼€å‘è€…éš¾å…ä¼šäº§ç”Ÿå›°æƒ‘ï¼š</p>
<blockquote>
<p>è¿™äº›å·¥å…·çš„å®šä½æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿæˆ‘è¯¥é€‰æ‹©å“ªä¸€ä¸ªï¼Ÿå®ƒä»¬ä¸ä¼šé‡å¤å—ï¼Ÿ</p>
</blockquote>
<p>æœ¬æ–‡å°†æ·±å…¥è§£æå½“å‰ä¸»æµçš„ Python å·¥å…·ï¼Œå¸®åŠ©ä½ å»ºç«‹æ¸…æ™°çš„è®¤çŸ¥æ¡†æ¶ï¼Œå¹¶åšå‡ºæ˜æ™ºçš„é€‰æ‹©ã€‚</p>
<hr/>
<h3 data-id="heading-2">ä¸€ã€æ ¸å¿ƒæ¦‚å¿µï¼šå››ä¸ªå®¹æ˜“æ··æ·†çš„åŸºç¡€æ¦‚å¿µ</h3>
<p>åœ¨æ·±å…¥å„ä¸ªå·¥å…·ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå˜æ¸…å››ä¸ªç»å¸¸è¢«æ··æ·†çš„æ¦‚å¿µã€‚ç†è§£å®ƒä»¬çš„åŒºåˆ«æ˜¯é€‰æ‹©åˆé€‚å·¥å…·çš„åŸºç¡€ã€‚</p>
<h4 data-id="heading-3">1.1 æ¦‚å¿µå¯¹æ¯”æ€»è§ˆ</h4>
<pre><code class="hljs language-arduino" lang="arduino">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                  â”‚
â”‚  ç±»å‹æ£€æŸ¥  â”€â”€â†’  è¿™æ®µä»£ç çš„<span class="hljs-string">"ç±»å‹"</span>å¯¹å—ï¼Ÿ                             â”‚
â”‚                ä¾‹å¦‚: å­—ç¬¦ä¸²èƒ½åŠ æ•°å­—å—ï¼Ÿ                            â”‚
â”‚                                                                  â”‚
â”‚  Linting    â”€â”€â†’  è¿™æ®µä»£ç çš„<span class="hljs-string">"å†™æ³•"</span>å¥½å—ï¼Ÿ                            â”‚
â”‚                ä¾‹å¦‚: å˜é‡åè§„èŒƒå—ï¼Ÿæœ‰æœªä½¿ç”¨çš„ä»£ç å—ï¼Ÿ                 â”‚
â”‚                                                                  â”‚
â”‚  æ ¼å¼åŒ–     â”€â”€â†’  è¿™æ®µä»£ç çš„<span class="hljs-string">"æ ·å­"</span>å¥½çœ‹å—ï¼Ÿ                           â”‚
â”‚                ä¾‹å¦‚: ç¼©è¿›ã€ç©ºæ ¼ã€æ¢è¡Œç»Ÿä¸€å—ï¼Ÿ                        â”‚
â”‚                                                                  â”‚
â”‚  LSP        â”€â”€â†’  ç¼–è¾‘å™¨å¦‚ä½•å’Œè¿™äº›å·¥å…·<span class="hljs-string">"å¯¹è¯"</span>ï¼Ÿ                        â”‚
â”‚                å®ƒæ˜¯é€šä¿¡åè®®ï¼Œä¸æ˜¯å·¥å…·æœ¬èº«                           â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-4">1.2 ç±»å‹æ£€æŸ¥ (Type Checking)</h4>
<p><strong>é—®é¢˜</strong>ï¼šè¿™æ®µä»£ç çš„ç±»å‹æ˜¯å¦æ­£ç¡®ï¼Ÿ</p>
<p>ç±»å‹æ£€æŸ¥å™¨é€šè¿‡é™æ€åˆ†æä»£ç ä¸­çš„ç±»å‹æ³¨è§£ï¼Œåœ¨è¿è¡Œå‰å‘ç°ç±»å‹é”™è¯¯ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç±»å‹æ£€æŸ¥å™¨ä¼šå‘ç°çš„é—®é¢˜</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a: <span class="hljs-built_in">int</span>, b: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:
    <span class="hljs-keyword">return</span> a + b

<span class="hljs-comment"># âœ… æ­£ç¡®</span>
result = add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)

<span class="hljs-comment"># âŒ ç±»å‹é”™è¯¯ï¼å­—ç¬¦ä¸²ä¸èƒ½ä¼ ç»™ int å‚æ•°</span>
result = add(<span class="hljs-string">"hello"</span>, <span class="hljs-string">"world"</span>)

<span class="hljs-comment"># âŒ è¿”å›ç±»å‹ä¸åŒ¹é…</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"Hello, <span class="hljs-subst">{name}</span>"</span>  <span class="hljs-comment"># åº”è¯¥è¿”å› intï¼Œä½†è¿”å›äº† str</span>
</code></pre>
<p><strong>ä»£è¡¨å·¥å…·</strong>ï¼šmypy, pyright, ty, pyre</p>
<h4 data-id="heading-5">1.3 Linting (ä»£ç æ£€æŸ¥)</h4>
<p><strong>é—®é¢˜</strong>ï¼šè¿™æ®µä»£ç çš„å†™æ³•ç¬¦åˆæœ€ä½³å®è·µå—ï¼Ÿ</p>
<p>Linter å…³æ³¨ä»£ç è´¨é‡ã€æ½œåœ¨bugã€ä»£ç é£æ ¼ç­‰é—®é¢˜ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Linter ä¼šå‘ç°çš„é—®é¢˜</span>

<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">import</span> json  <span class="hljs-comment"># âŒ æœªä½¿ç”¨çš„å¯¼å…¥</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate</span>(<span class="hljs-params">x, y</span>):
    result = x + y
    <span class="hljs-keyword">return</span> result

<span class="hljs-comment"># âŒ å˜é‡åå¤ªçŸ­ï¼Œä¸å…·æè¿°æ€§</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">calc</span>(<span class="hljs-params">a, b</span>):
    <span class="hljs-keyword">return</span> a / b  <span class="hljs-comment"># âŒ æ²¡æœ‰å¤„ç†é™¤é›¶é£é™©</span>

<span class="hljs-comment"># âŒ å‡½æ•°ååº”è¯¥ç”¨ snake_case</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">DoSomething</span>():
    <span class="hljs-keyword">pass</span>
</code></pre>
<p><strong>ä»£è¡¨å·¥å…·</strong>ï¼šruff, pylint, flake8, ESLint (JavaScript)</p>
<h4 data-id="heading-6">1.4 æ ¼å¼åŒ– (Formatting)</h4>
<p><strong>é—®é¢˜</strong>ï¼šè¿™æ®µä»£ç çš„æ ·å¼ç»Ÿä¸€å—ï¼Ÿ</p>
<p>æ ¼å¼åŒ–å™¨åªè°ƒæ•´ä»£ç çš„è§†è§‰å‘ˆç°ï¼Œä¸æ”¹å˜ä»£ç é€»è¾‘ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ ¼å¼åŒ–å‰ï¼ˆæ··ä¹±ï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate</span>(<span class="hljs-params">x,y</span>):
    result=x+y
    <span class="hljs-keyword">return</span> result
<span class="hljs-keyword">if</span> <span class="hljs-literal">True</span>:
<span class="hljs-built_in">print</span>(<span class="hljs-string">"hello"</span>)

<span class="hljs-comment"># æ ¼å¼åŒ–åï¼ˆç»Ÿä¸€ï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate</span>(<span class="hljs-params">x, y</span>):
    result = x + y
    <span class="hljs-keyword">return</span> result

<span class="hljs-keyword">if</span> <span class="hljs-literal">True</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"hello"</span>)
</code></pre>
<p>æ ¼å¼åŒ–å™¨å¤„ç†çš„å…ƒç´ ï¼š</p>
<ul>
<li>ç¼©è¿›ï¼ˆç©ºæ ¼ vs tabï¼‰</li>
<li>ç©ºæ ¼æ•°é‡</li>
<li>æ¢è¡Œä½ç½®</li>
<li>å¼•å·é£æ ¼ï¼ˆå•å¼•å· vs åŒå¼•å·ï¼‰</li>
</ul>
<p><strong>ä»£è¡¨å·¥å…·</strong>ï¼šruff, black, prettier (JavaScript), biome (JavaScript)</p>
<h4 data-id="heading-7">1.5 LSP (Language Server Protocol)</h4>
<p><strong>é—®é¢˜</strong>ï¼šç¼–è¾‘å™¨å¦‚ä½•å’Œè¿™äº›å·¥å…·é€šä¿¡ï¼Ÿ</p>
<p>LSP æ˜¯å¾®è½¯æ¨å‡ºçš„å¼€æ”¾åè®®ï¼Œç”¨äºæ ‡å‡†åŒ–ç¼–è¾‘å™¨ä¸è¯­è¨€æœåŠ¡ä¹‹é—´çš„é€šä¿¡ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      LSP æ¶æ„                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      LSP åè®®      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ ç¼–è¾‘å™¨   â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚  Language <span class="hljs-built_in">Server</span>    â”‚  â”‚
â”‚    â”‚ VSCode  â”‚   JSON-RPC <span class="hljs-number">2.0</span>    â”‚                     â”‚  â”‚
â”‚    â”‚ Neovim  â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚  â”‚
â”‚    â”‚ Emacs   â”‚                    â”‚  â”‚ Type Checker   â”‚â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚  â”‚
â”‚                                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚  â”‚
â”‚                                    â”‚  â”‚ Linter         â”‚â”‚  â”‚
â”‚                                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚  â”‚
â”‚                                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚  â”‚
â”‚                                    â”‚  â”‚ Formatter      â”‚â”‚  â”‚
â”‚                                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚
â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>LSP æä¾›çš„åŠŸèƒ½</strong>ï¼š</p>
<ul>
<li>ä»£ç è¡¥å…¨</li>
<li>è·³è½¬åˆ°å®šä¹‰</li>
<li>æ‚¬åœæç¤º</li>
<li>è¯Šæ–­ä¿¡æ¯ï¼ˆé”™è¯¯/è­¦å‘Šï¼‰</li>
<li>ä»£ç åŠ¨ä½œ</li>
<li>é‡å‘½å</li>
</ul>
<h4 data-id="heading-8">1.6 å¯¹æ¯”ç¤ºä¾‹</h4>
<p>çœ‹è¿™æ®µä»£ç ï¼Œä¸åŒå·¥å…·ä¼šå…³æ³¨ä»€ä¹ˆï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a:<span class="hljs-built_in">int</span>,b:<span class="hljs-built_in">int</span></span>)-&gt;<span class="hljs-built_in">int</span>:
    <span class="hljs-keyword">return</span> a+b
<span class="hljs-built_in">print</span>(add(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>))
</code></pre>

























<table><thead><tr><th>å·¥å…·ç±»å‹</th><th>ä¼šè¯´ä»€ä¹ˆ</th></tr></thead><tbody><tr><td><strong>ç±»å‹æ£€æŸ¥å™¨</strong></td><td>ç±»å‹æ­£ç¡® âœ“</td></tr><tr><td><strong>Linter</strong></td><td><code>import os</code> æœªä½¿ç”¨ï¼Œå»ºè®®åˆ é™¤ï¼›å‚æ•°é—´åº”è¯¥æœ‰ç©ºæ ¼</td></tr><tr><td><strong>æ ¼å¼åŒ–å™¨</strong></td><td>åº”è¯¥æ”¹æˆ <code>a: int, b: int</code>ï¼ˆåŠ ç©ºæ ¼ï¼‰</td></tr><tr><td><strong>LSP</strong></td><td>æŠŠæ‰€æœ‰è¿™äº›ä¿¡æ¯ä¼ ç»™ç¼–è¾‘å™¨æ˜¾ç¤º</td></tr></tbody></table>
<h4 data-id="heading-9">1.7 æ¦‚å¿µæ€»ç»“è¡¨</h4>



































<table><thead><tr><th>æ¦‚å¿µ</th><th>å…³æ³¨ç‚¹</th><th>æ”¹å˜ä»£ç é€»è¾‘ï¼Ÿ</th><th>æ ¸å¿ƒé—®é¢˜</th></tr></thead><tbody><tr><td><strong>ç±»å‹æ£€æŸ¥</strong></td><td>ç±»å‹æ­£ç¡®æ€§</td><td>âŒ</td><td>"è¿™æ®µä»£ç èƒ½è¿è¡Œå—ï¼Ÿ"</td></tr><tr><td><strong>Linting</strong></td><td>ä»£ç è´¨é‡</td><td>âŒï¼ˆå¤šæ•°ï¼‰</td><td>"è¿™æ®µä»£ç å†™å¾—å¥½å—ï¼Ÿ"</td></tr><tr><td><strong>æ ¼å¼åŒ–</strong></td><td>ä»£ç æ ·å¼</td><td>âŒ</td><td>"è¿™æ®µä»£ç å¥½çœ‹å—ï¼Ÿ"</td></tr><tr><td><strong>LSP</strong></td><td>é€šä¿¡åè®®</td><td>-</td><td>"ç¼–è¾‘å™¨æ€ä¹ˆè°ƒç”¨è¿™äº›å·¥å…·ï¼Ÿ"</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-10">äºŒã€ä¸»æµå·¥å…·æ·±åº¦è§£æ</h3>
<h4 data-id="heading-11">2.1 å·¥å…·å®šä½æ€»è§ˆ</h4>















































<table><thead><tr><th>å·¥å…·</th><th>ä¸»è¦å®šä½</th><th>ç¼–ç¨‹è¯­è¨€</th><th>LSP æ”¯æŒ</th><th>æˆç†Ÿåº¦</th></tr></thead><tbody><tr><td><strong>pyright</strong></td><td>é™æ€ç±»å‹æ£€æŸ¥å™¨</td><td>TypeScript</td><td>é€šè¿‡ Pylance</td><td>æˆç†Ÿ</td></tr><tr><td><strong>basedpyright</strong></td><td>pyright çš„å¢å¼º fork</td><td>TypeScript</td><td>å†…ç½®</td><td>è¾ƒæˆç†Ÿ</td></tr><tr><td><strong>ruff</strong></td><td>Linter + ä»£ç æ ¼å¼åŒ–</td><td>Rust</td><td>âœ… åŸç”Ÿ</td><td>æˆç†Ÿ</td></tr><tr><td><strong>ty</strong></td><td>é™æ€ç±»å‹æ£€æŸ¥å™¨ + LSP</td><td>Rust</td><td>âœ… å†…ç½®</td><td>æ—©æœŸå¼€å‘</td></tr><tr><td><strong>python-lsp-server</strong></td><td>è¯­è¨€æœåŠ¡å™¨åè®®å®ç°</td><td>Python</td><td>âœ…</td><td>æˆç†Ÿ</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-12">2.2 microsoft/pyright</h4>
<p><strong>å®šä½</strong>ï¼šé™æ€ç±»å‹æ£€æŸ¥å™¨</p>
<p><strong>è¯­è¨€</strong>ï¼šTypeScript ç¼–å†™</p>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>å¾®è½¯å®˜æ–¹å‡ºå“ï¼Œæ€§èƒ½ä¼˜å¼‚ï¼ˆæ¯” mypy å¿« 5 å€ä»¥ä¸Šï¼‰</li>
<li>æ ‡å‡†å…¼å®¹ï¼Œé€‚ç”¨äºå¤§å‹ Python ä»£ç åº“</li>
<li>ä¸¥è°¨çš„ç±»å‹æ¨æ–­å’Œç±»å‹çª„åŒ–èƒ½åŠ›</li>
<li>VSCode ä¸­é€šè¿‡ Pylance æä¾› LSP åŠŸèƒ½</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ VSCode è¿›è¡Œå¼€å‘</li>
<li>éœ€è¦ç¨³å®šå¯é çš„ç±»å‹æ£€æŸ¥</li>
<li>å¤§å‹é¡¹ç›®ä»£ç åº“</li>
</ul>
<hr/>
<h4 data-id="heading-13">2.3 DetachHead/basedpyright</h4>
<p><strong>å®šä½</strong>ï¼špyright çš„å¢å¼ºåˆ†æ”¯</p>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>åœ¨ pyright åŸºç¡€ä¸Šå¢åŠ äº†å¤šç§ç±»å‹æ£€æŸ¥æ”¹è¿›</li>
<li><strong>é›†æˆäº† Pylance çš„ä¸“æœ‰ç‰¹æ€§</strong>ï¼ˆå¼€æºå®ç°ï¼‰</li>
<li>æ”¯æŒ <strong>inlay hints</strong>ï¼ˆå†…è”æç¤ºï¼‰å’Œ <strong>semantic tokens</strong></li>
<li>é»˜è®¤ä½¿ç”¨æ›´ä¸¥æ ¼çš„æ£€æŸ¥æ¨¡å¼ï¼ˆ"all" æ¨¡å¼ï¼‰</li>
<li>æ”¹è¿›äº† VSCode é›†æˆæ”¯æŒ</li>
</ul>
<p><strong>ä¸ pyright çš„å…³é”®åŒºåˆ«</strong>ï¼š</p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>pyright</th><th>basedpyright</th></tr></thead><tbody><tr><td>Inlay Hints</td><td>âŒ</td><td>âœ…</td></tr><tr><td>Semantic Tokens</td><td>âŒ</td><td>âœ…</td></tr><tr><td>é»˜è®¤æ£€æŸ¥æ¨¡å¼</td><td>standard</td><td>allï¼ˆæ›´ä¸¥æ ¼ï¼‰</td></tr><tr><td>å¼€æºç¨‹åº¦</td><td>å®Œå…¨å¼€æº</td><td>å®Œå…¨å¼€æº</td></tr><tr><td>ç¼–è¾‘å™¨æ”¯æŒ</td><td>VSCode ä¼˜å…ˆ</td><td>å¤šç¼–è¾‘å™¨å‹å¥½</td></tr></tbody></table>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ Neovimã€Emacs ç­‰é VSCode ç¼–è¾‘å™¨</li>
<li>éœ€è¦æ›´ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥</li>
<li>éœ€è¦ Pylance åŠŸèƒ½ä½†ä¸æƒ³è¢« VSCode ç»‘å®š</li>
</ul>
<hr/>
<h4 data-id="heading-14">2.4 astral-sh/ruff</h4>
<p><strong>å®šä½</strong>ï¼š<strong>Linter + ä»£ç æ ¼å¼åŒ–å·¥å…·</strong>ï¼ˆä¸æ˜¯ç±»å‹æ£€æŸ¥å™¨ï¼ï¼‰</p>
<p><strong>è¯­è¨€</strong>ï¼šRust ç¼–å†™</p>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>æå¿«çš„é€Ÿåº¦</strong>ï¼ˆæ¯”ä¼ ç»Ÿå·¥å…·å¿«æ•°åå€ï¼‰</li>
<li>ä¸€ä¸ªå·¥å…·æ›¿ä»£å¤šä¸ªï¼šFlake8, isort, black, pydocstyle, pyupgrade ç­‰</li>
<li>ä¸ä»…èƒ½æ£€æµ‹é—®é¢˜ï¼Œè¿˜èƒ½è¿›è¡Œä»£ç è½¬æ¢</li>
<li>å†…ç½®åŸç”Ÿ LSP æœåŠ¡å™¨ï¼ˆ<code>ruff server</code>ï¼‰</li>
</ul>
<p><strong>LSP æ”¯æŒæ¼”å˜</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ruff-lsp (æ—§ç‰ˆï¼Œå·²å¼ƒç”¨)                                 â”‚
â”‚  â””â”€â”€ Python å®ç°çš„ç‹¬ç«‹ LSP æœåŠ¡å™¨                        â”‚
â”‚                                                         â”‚
â”‚  ruff server (æ–°ç‰ˆï¼Œå½“å‰)                                â”‚
â”‚  â””â”€â”€ Rust å®ç°çš„åŸç”Ÿ LSP æœåŠ¡å™¨ï¼Œå†…ç½®åœ¨ ruff ä¸­          â”‚
â”‚      å‘½ä»¤: ruff server                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>é‡è¦è¯´æ˜</strong>ï¼šruff <strong>ä¸è¿›è¡Œç±»å‹æ£€æŸ¥</strong>ï¼Œä½†å¯æ£€æµ‹éƒ¨åˆ†ç±»å‹ç›¸å…³é—®é¢˜ã€‚</p>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>éœ€è¦å¿«é€Ÿçš„ Lint å’Œæ ¼å¼åŒ–</li>
<li>æƒ³ç»Ÿä¸€å·¥å…·é“¾ï¼Œå‡å°‘ä¾èµ–</li>
<li>ä»»ä½•è§„æ¨¡çš„ Python é¡¹ç›®</li>
</ul>
<hr/>
<h4 data-id="heading-15">2.5 astral-sh/ty</h4>
<p><strong>å®šä½</strong>ï¼šé™æ€ç±»å‹æ£€æŸ¥å™¨ + LSP</p>
<p><strong>è¯­è¨€</strong>ï¼šRust ç¼–å†™</p>
<p><strong>çŠ¶æ€</strong>ï¼š<strong>æ—©æœŸå¼€å‘é˜¶æ®µï¼ˆpre-releaseï¼‰ï¼Œä¸å»ºè®®ç”¨äºç”Ÿäº§ç¯å¢ƒ</strong></p>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>æ€§èƒ½æå…¶å¼ºæ‚</strong>ï¼šæ¯” mypy/pyright å¿« 10-60 å€</li>
<li>åŒæ—¶æä¾›ç±»å‹æ£€æŸ¥å’Œè¯­è¨€æœåŠ¡å™¨åŠŸèƒ½</li>
<li>æ¿€è¿›çš„ç±»å‹æ¨æ–­ç­–ç•¥</li>
<li>ä¸ ruff å…±äº«ç›¸åŒçš„ AST å’Œ parser</li>
</ul>
<p><strong>å†å²æ¸Šæº</strong>ï¼š</p>
<p>ty æœ€åˆå« <strong>Red Knot</strong>ï¼Œæ˜¯ä½œä¸º ruff é¡¹ç›®çš„ä¸€éƒ¨åˆ†åœ¨å¼€å‘çš„ï¼Œåæ¥ç‹¬ç«‹æˆå•ç‹¬çš„å·¥å…·ã€‚</p>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ç›®å‰ä»…é€‚åˆå®éªŒæ€§é¡¹ç›®</li>
<li>æƒ³ä½“éªŒå‰æ²¿æŠ€æœ¯çš„å¼€å‘è€…</li>
</ul>
<hr/>
<h4 data-id="heading-16">2.6 python-lsp/python-lsp-server</h4>
<p><strong>å®šä½</strong>ï¼šè¯­è¨€æœåŠ¡å™¨åè®®å®ç°</p>
<p><strong>è¯­è¨€</strong>ï¼šPython ç¼–å†™</p>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>æä¾›å®Œæ•´çš„ LSP åŠŸèƒ½ï¼ˆè‡ªåŠ¨è¡¥å…¨ã€æ‚¬åœæç¤ºã€è·³è½¬å®šä¹‰ç­‰ï¼‰</li>
<li>è½»é‡çº§ã€æ˜“æ‰©å±•</li>
<li>å¯é…ç½®å¤šç§åç«¯ï¼ˆå¦‚ Jediã€ropeï¼‰</li>
<li><strong>ä¸æ˜¯ç±»å‹æ£€æŸ¥å™¨</strong>ï¼Œä¸“æ³¨äºç¼–è¾‘å™¨é›†æˆ</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>éœ€è¦çº¯ Python å®ç°çš„ LSP</li>
<li>ä¸å…¶ä»– Python å·¥å…·é“¾é›†æˆ</li>
<li>è½»é‡çº§ç¼–è¾‘å™¨é…ç½®</li>
</ul>
<hr/>
<h3 data-id="heading-17">ä¸‰ã€Astral å®¶æ—è§£æ</h3>
<p>ä½ å¯èƒ½æ³¨æ„åˆ° ruffã€tyã€uv éƒ½æ¥è‡ªåŒä¸€ä¸ªç»„ç»‡ â€”â€” <strong>Astral</strong>ã€‚è¿™å¹¶éé‡å¤ï¼Œè€Œæ˜¯ç²¾å¿ƒè§„åˆ’çš„å®Œæ•´å·¥å…·é“¾ã€‚</p>
<h4 data-id="heading-18">3.1 Astral äº§å“çŸ©é˜µ</h4>
<pre><code class="hljs language-markdown" lang="markdown">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Astral å®¶æ—                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   uv  â”€â”€â”€â†’  åŒ…ç®¡ç†å·¥å…·                                       â”‚
â”‚            ï¼ˆæ›¿ä»£ pipã€poetryã€pipenv ç­‰ï¼‰                    â”‚
â”‚                                                             â”‚
â”‚   ruff â”€â”€â”€â†’  Linter + Formatter + LSP                       â”‚
â”‚            ï¼ˆæ›¿ä»£ flake8ã€blackã€isort ç­‰ï¼‰                   â”‚
â”‚                                                             â”‚
â”‚   ty   â”€â”€â”€â†’  Type Checker + LSP                             â”‚
â”‚            ï¼ˆæ›¿ä»£ mypyã€pyrightï¼Œå¼€å‘ä¸­ï¼‰                     â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">                    â”‚
                    â–¼
         å…±äº«ç›¸åŒçš„ AST å’Œ Parser
         ï¼ˆRust å®ç°ï¼Œæè‡´æ€§èƒ½ï¼‰
</span></code></pre>
<h4 data-id="heading-19">3.2 ruff å’Œ ty çš„å…³ç³»</h4>






























<table><thead><tr><th>ç»´åº¦</th><th>ruff</th><th>ty</th></tr></thead><tbody><tr><td><strong>ä¸»è¦åŠŸèƒ½</strong></td><td>Linting + æ ¼å¼åŒ–</td><td>ç±»å‹æ£€æŸ¥</td></tr><tr><td><strong>æ£€æŸ¥å†…å®¹</strong></td><td>ä»£ç é£æ ¼ã€æ½œåœ¨bugã€æœ€ä½³å®è·µ</td><td>ç±»å‹æ­£ç¡®æ€§</td></tr><tr><td><strong>LSP ä¾§é‡ç‚¹</strong></td><td>ä»£ç åŠ¨ä½œã€å¿«é€Ÿä¿®å¤ã€æ ¼å¼åŒ–</td><td>ç±»å‹ä¿¡æ¯ã€è¯Šæ–­</td></tr><tr><td><strong>ç±»æ¯”</strong></td><td>åƒ ESLint</td><td>åƒ TypeScript</td></tr></tbody></table>
<p><strong>å®ƒä»¬ä¸é‡å¤çš„åŸå› </strong>ï¼š</p>
<p>è™½ç„¶éƒ½æœ‰ LSPï¼Œä½†æä¾›çš„<strong>æœåŠ¡å†…å®¹ä¸åŒ</strong>ï¼š</p>
<ul>
<li><strong>ruff çš„ LSP</strong>ï¼šæä¾›ä»£ç è´¨é‡ç›¸å…³çš„åŠŸèƒ½ï¼ˆè¯Šæ–­ã€æ ¼å¼åŒ–ã€ä¿®å¤ï¼‰</li>
<li><strong>ty çš„ LSP</strong>ï¼šæä¾›ç±»å‹ç³»ç»Ÿç›¸å…³çš„åŠŸèƒ½ï¼ˆç±»å‹æ¨æ–­ã€ç±»å‹è¯Šæ–­ã€ç±»å‹æç¤ºï¼‰</li>
</ul>
<p>è¿™å°±åƒ VSCode é‡ŒåŒæ—¶æœ‰ ESLintï¼ˆLinterï¼‰å’Œ TypeScriptï¼ˆType Checkerï¼‰ä¸€æ ·ï¼Œä¸¤è€…äº’è¡¥è€Œä¸æ˜¯é‡å¤ã€‚</p>
<hr/>
<h3 data-id="heading-20">å››ã€é€‰æ‹©æŒ‡å—</h3>
<h4 data-id="heading-21">4.1 ç±»å‹æ£€æŸ¥å™¨é€‰æ‹©</h4>
<pre><code class="hljs">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç±»å‹æ£€æŸ¥å™¨é€‰æ‹©                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ä½¿ç”¨ VSCodeï¼Ÿ                                              â”‚
â”‚       â”‚                                                     â”‚
â”‚       â”œâ”€ æ˜¯ â†’ pyright + Pylance                            â”‚
â”‚       â”‚        ï¼ˆå¾®è½¯å®˜æ–¹é›†æˆï¼Œä½“éªŒæœ€ä½³ï¼‰                     â”‚
â”‚       â”‚                                                     â”‚
â”‚       â””â”€ å¦ â†’ basedpyright                                 â”‚
â”‚                ï¼ˆå¼€æºå®Œæ•´ï¼Œå¤šç¼–è¾‘å™¨å‹å¥½ï¼‰                     â”‚
â”‚                                                             â”‚
â”‚  æƒ³å°è¯•å‰æ²¿æŠ€æœ¯ï¼Ÿ                                           â”‚
â”‚       â””â”€ ty ï¼ˆå®éªŒæ€§é¡¹ç›®ï¼Œæ³¨æ„ç¨³å®šæ€§ï¼‰                      â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-22">4.2 Linter/æ ¼å¼åŒ–å·¥å…·é€‰æ‹©</h4>
<pre><code class="hljs language-lua" lang="lua">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Linter/æ ¼å¼åŒ–å·¥å…·é€‰æ‹©                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  éœ€è¦ä»€ä¹ˆï¼Ÿ                                                 â”‚
â”‚                                                             â”‚
â”‚  Linting + æ ¼å¼åŒ– + æè‡´æ€§èƒ½                                 â”‚
â”‚       â””â”€ ruff ï¼ˆæ¨èï¼‰                                     â”‚
â”‚                                                             â”‚
â”‚  ä»…æ ¼å¼åŒ–                                                   â”‚
â”‚       â””â”€ black / ruff <span class="hljs-built_in">format</span>                              â”‚
â”‚                                                             â”‚
â”‚  ä¼ ç»Ÿå·¥å…·é“¾                                                 â”‚
â”‚       â””â”€ flake8 + black + isort                           â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-23">4.3 å…¸å‹é¡¹ç›®é…ç½®</h4>
<h5 data-id="heading-24">Python é¡¹ç›®æ¨èé…ç½®</h5>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># .config/python-tools.yaml</span>
<span class="hljs-string">å·¥å…·é“¾é…ç½®:</span>
  <span class="hljs-string">ç±»å‹æ£€æŸ¥:</span> <span class="hljs-string">pyright</span> <span class="hljs-string">/</span> <span class="hljs-string">basedpyright</span>
  <span class="hljs-attr">Linting:</span>  <span class="hljs-string">ruff</span>
  <span class="hljs-string">æ ¼å¼åŒ–:</span>   <span class="hljs-string">ruff</span> <span class="hljs-string">format</span>
  <span class="hljs-attr">LSP:</span>      <span class="hljs-string">ruff</span> <span class="hljs-string">server</span> <span class="hljs-string">+</span> <span class="hljs-string">pyright/basedpyright</span>
</code></pre>
<h5 data-id="heading-25">Neovim é…ç½®ç¤ºä¾‹</h5>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-comment">-- å¦‚æœä½ ä½¿ç”¨ Neovim</span>
{
  <span class="hljs-comment">-- åŸºäº basedpyright çš„ç±»å‹æ£€æŸ¥</span>
  <span class="hljs-string">"neovim/nvim-lspconfig"</span>,
  opts = {
    servers = {
      basedpyright = {},
      ruff = {
        <span class="hljs-comment">-- ruff LSP æä¾›å¿«é€Ÿ lint å’Œæ ¼å¼åŒ–</span>
      }
    }
  }
}
</code></pre>
<h5 data-id="heading-26">VSCode é…ç½®ç¤ºä¾‹</h5>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// .vscode/settings.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"python.defaultInterpreterPath"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./.venv/bin/python"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"[python]"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"editor.formatOnSave"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"editor.defaultFormatter"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"charliemarsh.ruff"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"editor.codeActionsOnSave"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"source.fixAll.ruff"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"explicit"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"source.organizeImports.ruff"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"explicit"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"ruff.lint.enable"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"python.analysis.typeCheckingMode"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"strict"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h3 data-id="heading-27">äº”ã€æ€§èƒ½å¯¹æ¯”</h3>
<p>æ ¹æ®å…¬å¼€çš„åŸºå‡†æµ‹è¯•æ•°æ®ï¼š</p>
<h4 data-id="heading-28">5.1 Linter æ€§èƒ½</h4>

























<table><thead><tr><th>å·¥å…·</th><th>ç›¸å¯¹æ€§èƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ruff</td><td><strong>100x</strong></td><td>ç›¸æ¯” flake8 ç­‰ä¼ ç»Ÿå·¥å…·</td></tr><tr><td>flake8</td><td>1x</td><td>åŸºå‡†</td></tr><tr><td>pylint</td><td>~0.5x</td><td>æ›´æ…¢</td></tr></tbody></table>
<h4 data-id="heading-29">5.2 ç±»å‹æ£€æŸ¥å™¨æ€§èƒ½</h4>

























<table><thead><tr><th>å·¥å…·</th><th>ç›¸å¯¹æ€§èƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ty</td><td><strong>10-60x</strong></td><td>æ—©æœŸåŸºå‡†ï¼Œä»åœ¨ä¼˜åŒ–</td></tr><tr><td>pyright</td><td><strong>5x</strong></td><td>ç›¸æ¯” mypy</td></tr><tr><td>mypy</td><td>1x</td><td>åŸºå‡†</td></tr></tbody></table>
<p><em>æ³¨ï¼šå®é™…æ€§èƒ½å› é¡¹ç›®è§„æ¨¡å’Œå¤æ‚åº¦è€Œå¼‚</em></p>
<hr/>
<h3 data-id="heading-30">å…­ã€æ€»ç»“</h3>
<h4 data-id="heading-31">6.1 å…³é”®è¦ç‚¹</h4>
<ol>
<li><strong>ç†è§£æ¦‚å¿µå·®å¼‚</strong>ï¼šç±»å‹æ£€æŸ¥ã€Lintingã€æ ¼å¼åŒ–ã€LSP å„å¸å…¶èŒ</li>
<li><strong>å·¥å…·ä¸é‡å¤</strong>ï¼šå³ä½¿éƒ½æ”¯æŒ LSPï¼Œæä¾›çš„åŠŸèƒ½ä¹Ÿä¸åŒ</li>
<li><strong>Astral çš„æ„¿æ™¯</strong>ï¼šæ‰“é€ å®Œæ•´çš„é«˜æ€§èƒ½ Python å·¥å…·é“¾</li>
<li><strong>é€‰æ‹©åŸºäºéœ€æ±‚</strong>ï¼šè€ƒè™‘ç¼–è¾‘å™¨ã€å›¢é˜Ÿã€é¡¹ç›®è§„æ¨¡</li>
</ol>
<h4 data-id="heading-32">6.2 æ¨èç»„åˆ</h4>



































<table><thead><tr><th>å¼€å‘ç¯å¢ƒ</th><th>ç±»å‹æ£€æŸ¥</th><th>Linter/æ ¼å¼åŒ–</th><th>LSP</th></tr></thead><tbody><tr><td>VSCode</td><td>pyright</td><td>ruff</td><td>Pylance + ruff</td></tr><tr><td>Neovim</td><td>basedpyright</td><td>ruff</td><td>basedpyright + ruff server</td></tr><tr><td>Emacs</td><td>basedpyright</td><td>ruff</td><td>basedpyright + ruff server</td></tr><tr><td>å…¶ä»–</td><td>basedpyright</td><td>ruff</td><td>python-lsp-server + ruff</td></tr></tbody></table>
<h4 data-id="heading-33">6.3 å±•æœ›æœªæ¥</h4>
<p>Python å·¥å…·ç”Ÿæ€æ­£åœ¨å¿«é€Ÿæ¼”è¿›ï¼š</p>
<ul>
<li><strong>ty</strong> æœ‰æœ›æˆä¸ºä¸»æµçš„ç±»å‹æ£€æŸ¥å™¨</li>
<li><strong>ruff</strong> å¯èƒ½æ•´åˆæ›´å¤šåŠŸèƒ½</li>
<li><strong>uv</strong> å·²ç»æˆä¸ºåŒ…ç®¡ç†çš„æœ‰åŠ›ç«äº‰è€…</li>
</ul>
<p>ä¿æŒå…³æ³¨ï¼Œä½†è°¨æ…é‡‡ç”¨æ–°å·¥å…· â€”â€” å°¤å…¶æ˜¯ç”Ÿäº§ç¯å¢ƒã€‚</p>
<hr/>
<h3 data-id="heading-34">å‚è€ƒèµ„æ–™</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FDetachHead%2Fbasedpyright" target="_blank" title="https://github.com/DetachHead/basedpyright" ref="nofollow noopener noreferrer">basedpyright GitHub</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.basedpyright.com%2F" target="_blank" title="https://docs.basedpyright.com/" ref="nofollow noopener noreferrer">basedpyright æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fastral-sh%2Fruff" target="_blank" title="https://github.com/astral-sh/ruff" ref="nofollow noopener noreferrer">Ruff GitHub</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.astral.sh%2Fruff%2F" target="_blank" title="https://docs.astral.sh/ruff/" ref="nofollow noopener noreferrer">Ruff æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fastral-sh%2Fty" target="_blank" title="https://github.com/astral-sh/ty" ref="nofollow noopener noreferrer">ty GitHub</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fastral.sh%2Fblog%2Fty" target="_blank" title="https://astral.sh/blog/ty" ref="nofollow noopener noreferrer">ty å®˜æ–¹åšå®¢</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2Fpyright" target="_blank" title="https://github.com/microsoft/pyright" ref="nofollow noopener noreferrer">pyright GitHub</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpython-lsp%2Fpython-lsp-server" target="_blank" title="https://github.com/python-lsp/python-lsp-server" ref="nofollow noopener noreferrer">Python LSP Server</a></li>
</ul>
<hr/>
<p><em>æœ¬æ–‡å‘å¸ƒäº 2025 å¹´ 12 æœˆï¼Œå·¥å…·å‘å±•è¿…é€Ÿï¼Œå»ºè®®å…³æ³¨å®˜æ–¹åŠ¨æ€è·å–æœ€æ–°ä¿¡æ¯ã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C++å¤šæ€]]></title>    <link>https://juejin.cn/post/7588093282530705460</link>    <guid>https://juejin.cn/post/7588093282530705460</guid>    <pubDate>2025-12-27T17:24:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588093282530705460" data-draft-id="7588098335790596096" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C++å¤šæ€"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-27T17:24:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ©˜å­13"/> <meta itemprop="url" content="https://juejin.cn/user/4162084884974491"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C++å¤šæ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4162084884974491/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ©˜å­13
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T17:24:22.000Z" title="Sat Dec 27 2025 17:24:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¤šæ€çš„æ¦‚å¿µ</h2>
<p>é€šä¿—æ¥è¯´ï¼Œå°±æ˜¯å¤šç§å½¢æ€ï¼Œå°±æ˜¯å»å®ŒæˆæŸä¸ªè¡Œä¸ºï¼Œå½“ä¸åŒçš„å¯¹è±¡å»å®Œæˆæ—¶ä¼šäº§ç”Ÿå‡ºä¸åŒçš„çŠ¶æ€ã€‚</p>
<h2 data-id="heading-1">å¤šæ€çš„ä½¿ç”¨</h2>
<p>è¦è§¦å‘ C++ çš„<strong>å¤šæ€è°ƒç”¨ï¼ˆè¿è¡Œæ—¶åŠ¨æ€ç»‘å®šï¼‰</strong>ï¼Œéœ€åŒæ—¶æ»¡è¶³ä»¥ä¸‹ 3 ä¸ªæ ¸å¿ƒæ¡ä»¶ï¼š</p>
<p><strong>æ¡ä»¶1</strong>ï¼š<strong>çˆ¶ç±»å£°æ˜è™šå‡½æ•°</strong>ï¼šåœ¨çˆ¶ç±»ä¸­ï¼Œå°†éœ€è¦å®ç°å¤šæ€çš„æˆå‘˜å‡½æ•°å‰æ·»åŠ virtualå…³é”®å­—ï¼ˆ<strong>ææ„å‡½æ•°ï¼Ÿåæ–‡è¯¦è¯´</strong>ï¼‰ï¼Œè¯¥å‡½æ•°æˆä¸ºè™šå‡½æ•°ã€‚</p>
<p><strong>æ¡ä»¶2</strong>ï¼š<strong>å­ç±»å®Œæˆè™šå‡½æ•°çš„åˆæ³•é‡å†™</strong>ï¼ˆOverrideï¼‰ï¼š1.çˆ¶å­ç±»ä¸­ä¸¤ä¸ªè™šå‡½æ•°ï¼Œä¸‰åŒï¼ˆå‡½æ•°åï¼Œå‚æ•°ï¼Œè¿”å›ï¼‰ï¼ˆç†è§£æˆéšè—çš„ä¸€ä¸ªå­é›†ï¼‰2.ä¾‹å¤–ï¼Œ<strong>åå˜è¿”å›ç±»å‹ï¼Œåæ–‡è¯¦è¯´</strong>ã€‚
æ€»ç»“ä¸ºâ€œ<strong>åŸºæœ¬ä¸‰åŒ+åå˜è¿”å›</strong>â€ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9376a52eeab5437681968798a20c54bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=JeVt7prsSZRTGjmGiwI797AHRr0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>æ¡ä»¶3</strong>ï¼š<strong>çˆ¶ç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨å»è°ƒç”¨è™šå‡½æ•°</strong>ã€‚
<strong>åä¾‹</strong>ï¼šè‹¥ç”¨<strong>å­ç±»</strong>æŒ‡é’ˆ / å¼•ç”¨æŒ‡å‘<strong>å­ç±»å¯¹è±¡</strong>ï¼ˆé™æ€ç±»å‹ = åŠ¨æ€ç±»å‹ï¼‰ï¼Œæˆ–ç”¨çˆ¶ç±»å¯¹è±¡ï¼ˆ<strong>éæŒ‡é’ˆ / éå¼•ç”¨</strong>ï¼‰è°ƒç”¨è™šå‡½æ•°ï¼Œå‡ä¼šè§¦å‘ç¼–è¯‘æœŸé™æ€ç»‘å®šï¼ˆ<strong>æ™®é€šè°ƒç”¨</strong>ï¼‰ï¼Œæ— æ³•å®ç°å¤šæ€ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span>
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">BuyTicket</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"ä¹°ç¥¨-å…¨ä»·"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> :</span> public Person
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">BuyTicket</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"ä¹°ç¥¨-åŠä»·"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
};

<span class="hljs-type">void</span> <span class="hljs-title function_">Func</span><span class="hljs-params">(Person&amp; p)</span>
{
	p.BuyTicket();
}
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	Person ps;
	Student st;

	Func(ps);
	Func(st);
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b773b26669fd4907a63e9628dd3c40e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=wkopeuANBD1FRNpO0VWlqHUWLwI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
æ³¨æ„ï¼šåŸºç±»åŠ virtualï¼Œæ´¾ç”Ÿç±»è‡ªåŠ¨ç»§æ‰¿è™šå‡½æ•°å±æ€§ï¼Œä¸ç”¨æ˜¾å¼å†™virtualã€‚</p>
<h3 data-id="heading-2"><strong>å…³äºæ™®é€šè°ƒç”¨ä¸å¤šæ€è°ƒç”¨</strong></h3>
<p><strong>æ™®é€šè°ƒç”¨ï¼ˆç¼–è¯‘æ—¶é™æ€ç»‘å®šï¼‰</strong>ï¼šæ™®é€šè°ƒç”¨æ˜¯æŒ‡ç¼–è¯‘å™¨åœ¨<strong>ç¼–è¯‘é˜¶æ®µ</strong>ï¼Œ<strong>å°±æ ¹æ®â€œè°ƒç”¨è€…çš„ç±»å‹â€ï¼ˆè€Œéå®é™…å¯¹è±¡ç±»å‹ï¼‰ç¡®å®šè¦è°ƒç”¨çš„å‡½æ•°åœ°å€</strong>ï¼Œç›´æ¥å°†å‡½æ•°è°ƒç”¨æŒ‡ä»¤å†™å…¥ç¼–è¯‘åçš„ä»£ç ä¸­ï¼Œè¿è¡Œæ—¶æ— éœ€é¢å¤–åˆ¤æ–­ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3699748d6c7c4518b50adb0ba54e4829~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=YIP8NSMkMKwAdGGCmqyzDsQ7rpY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>æ™®é€šè°ƒç”¨çš„æ ¸å¿ƒæ˜¯â€œçœ‹ç±»å‹ï¼Œä¸çœ‹å®é™…å¯¹è±¡â€</strong>ã€‚</p>
<p>æ™®é€šè°ƒç”¨è§¦å‘æ¡ä»¶:
è°ƒç”¨éè™šå‡½æ•°æ—¶ï¼ˆæ— è®ºé€šè¿‡å¯¹è±¡ã€æŒ‡é’ˆè¿˜æ˜¯å¼•ç”¨è°ƒç”¨ï¼‰ï¼›
è°ƒç”¨è™šå‡½æ•°ï¼Œä½†é€šè¿‡å¯¹è±¡ç›´æ¥è°ƒç”¨ï¼ˆéæŒ‡é’ˆ / å¼•ç”¨ï¼‰æ—¶ï¼ˆæ­¤æ—¶ä¹Ÿä¼šé€€åŒ–ä¸ºæ™®é€šè°ƒç”¨ï¼‰ã€‚</p>
<p><strong>å¤šæ€è°ƒç”¨ï¼ˆè¿è¡Œæ—¶åŠ¨æ€ç»‘å®šï¼‰</strong>ï¼šå¤šæ€è°ƒç”¨æ˜¯æŒ‡ç¼–è¯‘å™¨åœ¨ç¼–è¯‘é˜¶æ®µæ— æ³•ç¡®å®šå‡½æ•°è°ƒç”¨ç›®æ ‡ï¼Œ<strong>éœ€åœ¨è¿è¡Œé˜¶æ®µï¼Œæ ¹æ® â€œæŒ‡é’ˆ /å¼•ç”¨å®é™…æŒ‡å‘çš„å¯¹è±¡ç±»å‹â€</strong>ï¼ŒåŠ¨æ€æ‰¾åˆ°å¯¹åº”çš„å‡½æ•°åœ°å€å¹¶è°ƒç”¨ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6cf0696b6c4140f6a19a4af797af0b91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=vGnRvsGsl1B08B93I9l817prB7M%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>å¤šæ€è°ƒç”¨çš„æ ¸å¿ƒæ˜¯â€œçœ‹å®é™…å¯¹è±¡çš„ç±»å‹â€</strong>ã€‚</p>
<p>æ»¡è¶³å¤šæ€è°ƒç”¨çš„ä¸‰ä¸ªå¿…å¤‡æ¡ä»¶ï¼ˆä¸‰è€…ç¼ºä¸€ä¸å¯ï¼‰ï¼š
1.<strong>åŸºç±»ä¸­å£°æ˜è™šå‡½æ•°</strong>
2.<strong>æ´¾ç”Ÿç±»é‡å†™è™šå‡½æ•°</strong>
3.<strong>é€šè¿‡åŸºç±»æŒ‡é’ˆ / å¼•ç”¨è°ƒç”¨</strong></p>
<p><strong>æ€»ç»“ï¼šæ™®é€šè°ƒç”¨çœ‹æŒ‡é’ˆ / å¼•ç”¨ç±»å‹ï¼Œå¤šæ€è°ƒç”¨çœ‹æŒ‡å‘å†…å®¹ï¼ˆå®é™…å¯¹è±¡ï¼‰çš„ç±»å‹ã€‚</strong></p>























<table><thead><tr><th>ç»‘å®šæ–¹å¼</th><th>è°ƒç”¨ç±»å‹</th><th>ç»‘å®šæ—¶æœº</th><th>æ ¸å¿ƒç‰¹å¾</th></tr></thead><tbody><tr><td>é™æ€ç»‘å®š</td><td>æ™®é€šè°ƒç”¨</td><td>ç¼–è¯‘æœŸ</td><td>ç¼–è¯‘æ—¶å°±ç¡®å®šè°ƒç”¨å“ªä¸ªå‡½æ•°</td></tr><tr><td>åŠ¨æ€ç»‘å®š</td><td>å¤šæ€è°ƒç”¨</td><td>è¿è¡ŒæœŸ</td><td>è¿è¡Œæ—¶æ‰ç¡®å®šè°ƒç”¨å“ªä¸ªå‡½æ•°</td></tr></tbody></table>
<p><strong>è¡¥å……</strong>ï¼šé™æ€å¤šæ€ä¸åŠ¨æ€å¤šæ€
<strong>åŠ¨æ€å¤šæ€ï¼šè¿è¡ŒæœŸç»‘å®šçš„å¤šæ€</strong>ï¼Œå°±æ˜¯ä¸Šé¢æ‰€è¯´çš„å¤šæ€
<strong>é™æ€å¤šæ€ï¼šç¼–è¯‘æœŸç»‘å®šçš„å¤šæ€</strong>ï¼Œä¹Ÿå« â€œç¼–è¯‘æœŸå¤šæ€â€â€”â€” ç¼–è¯‘å™¨åœ¨ç¼–è¯‘é˜¶æ®µå°±ç¡®å®šè¦è°ƒç”¨çš„å‡½æ•°ã€‚å¸¸è§ä¾‹å­ï¼šå‡½æ•°é‡è½½ï¼Œæ¨¡ç‰ˆ</p>
<h3 data-id="heading-3">è™šå‡½æ•°é‡å†™çš„ä¸¤ä¸ªä¾‹å¤–</h3>
<h4 data-id="heading-4">åå˜è¿”å›å€¼</h4>
<p>1.<strong>åå˜è¿”å›å€¼</strong>ï¼Œçˆ¶ç±»ä¸å­ç±»çš„è™šå‡½æ•°çš„è¿”å›å€¼å¯ä»¥ä¸åŒï¼ˆè¦æ±‚è™šå‡½æ•°çš„è¿”å›å€¼å¿…é¡»æ˜¯çˆ¶å­ç±»å…³ç³»çš„æŒ‡é’ˆæˆ–å¼•ç”¨ï¼‰</p>
<pre><code class="hljs language-c" lang="c">å…ˆå†™ä¸€ä¸ªçˆ¶å­ç±»AB
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span>
{</span>};
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> :</span> public A 
{};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Member</span> 
{</span>
public:
    virtual A* <span class="hljs-title function_">f</span><span class="hljs-params">()</span> <span class="hljs-comment">//è™šå‡½æ•°çš„è¿”å›å€¼å¿…é¡»æ˜¯ä¸€ä¸ªçˆ¶å­ç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨</span>
    {
        <span class="hljs-keyword">return</span> new A;
    }
};
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> :</span> public Member 
{
public:
    virtual B* <span class="hljs-title function_">f</span><span class="hljs-params">()</span> <span class="hljs-comment">//è™šå‡½æ•°çš„è¿”å›å€¼å¿…é¡»æ˜¯ä¸€ä¸ªçˆ¶å­ç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨</span>
    {
        <span class="hljs-keyword">return</span> new B;
    }
};
</code></pre>
<p><strong>æ€»ç»“</strong>ï¼š</p>
<ul>
<li>è¿”å›å€¼å¿…é¡»æ˜¯æŒ‡é’ˆæˆ–å¼•ç”¨ï¼ˆä¸èƒ½æ˜¯å€¼ç±»å‹ï¼Œæ¯”å¦‚A f()å’ŒB f()ä¸æ„æˆåå˜ï¼‰ï¼›</li>
<li><strong>æ´¾ç”Ÿç±»è¿”å›</strong>çš„æŒ‡é’ˆ / å¼•ç”¨ç±»å‹ï¼Œå¿…é¡»æ˜¯<strong>åŸºç±»è¿”å›</strong>ç±»å‹çš„ç›´æ¥ / é—´æ¥æ´¾ç”Ÿç±»ï¼ˆè¿™é‡ŒBç»§æ‰¿Aï¼Œæ»¡è¶³æ¡ä»¶ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-5">ææ„å‡½æ•°çš„é‡å†™</h4>
<p><strong>ææ„å‡½æ•°çš„åå­—ç‰¹æ®Šå¤„ç†ï¼Œæ„æˆéšè—ï¼Œå»ºè®®å‡½æ•°åå‰åŠ virtualã€‚</strong></p>
<p><strong>è¿™å¥è¯æ˜¯å…³é”®</strong>ï¼š<strong>åŸºç±»æŒ‡é’ˆæŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡</strong>æ—¶ï¼Œ<strong>éè™šææ„</strong>ä¼šè§¦å‘<strong>æ™®é€šè°ƒç”¨</strong>ï¼Œ<strong>è™šææ„</strong>ä¼šè§¦å‘<strong>å¤šæ€è°ƒç”¨</strong>
â€‹â€‹</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Member</span> {</span>
public:
	~Member() 
	{ 
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"~Member()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; 
	}
};
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> :</span> public Member {
public:
	~Student() 
	{ 
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"~Student()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; 
	}
};
<span class="hljs-comment">//æ­¤æ—¶ææ„å‡½æ•°æ„æˆéšè—</span>
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	Member* p1 = new Member;
	Member* p2 = new Student;

	delete p1;
	delete p2;
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>ç»“æœä¸ºï¼š
â€‹â€‹â€‹â€‹<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a2168532a424b48b7c9920df2507fc6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=wNtfzrYzpwkDoTUontviFDuM49A%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€‹
<strong>â€‹â€‹â€‹â€‹ç°è±¡</strong>ï¼šè§‚å¯Ÿå‘ç°åœ¨ç¬¬äºŒä¸ªæŒ‡é’ˆææ„æ—¶åªææ„äº†çˆ¶ç±»ï¼Œè€Œæ²¡æœ‰ææ„å­ç±»ï¼Œå¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚</p>
<p><strong>æ ¹æœ¬åŸå› </strong>ï¼šæ˜¯æ™®é€šè°ƒç”¨ï¼Œåªçœ‹æŒ‡é’ˆ\å¼•ç”¨ç±»å‹ï¼Œè€Œä¸çœ‹æŒ‡å‘å†…å®¹çš„ç±»å‹ã€‚</p>
<p>åˆ†æï¼š</p>
<ol>
<li>ä¸¤ä¸ªææ„å‡½æ•°æ„æˆäº†éšè—ï¼ˆ<strong>ææ„å‡½æ•°è™½ç„¶åç§°æ ¼å¼ç‰¹æ®Šï¼ˆ~ç±»å()ï¼‰ï¼Œä½†ç¼–è¯‘å™¨ä¼šå°†å…¶è§†ä¸º â€œåŒåå‡½æ•°â€ï¼Œå› æ­¤Student::~Student()ä¼šéšè—Member::~Member()ã€‚</strong>ï¼‰ï¼Œå®é™…ä¸Šä¹Ÿæ»¡è¶³äº†é‡å†™æ¡ä»¶ï¼ˆç”±äºææ„å‡½æ•°çš„ç‰¹æ®Šè§„åˆ™ï¼Œå¯¼è‡´ä¸èƒ½å«é‡å†™ï¼ŒåŠ ä¸Švirtualåå˜æˆè™šå‡½æ•°åï¼Œè‡ªåŠ¨æ»¡è¶³é‡å†™ï¼‰â€”â€”è¿™æ ·<strong>è¾¾æˆ2ä¸ªæ¡ä»¶</strong> 1.çˆ¶ç±»å£°æ˜è™šå‡½æ•° 2.å­ç±»è™šå‡½æ•°é‡å†™ã€‚</li>
</ol>
<blockquote>
<p><strong>ææ„å‡½æ•°çš„ç‰¹æ®Šè§„åˆ™</strong>ï¼šææ„å‡½æ•°æ˜¯å¦æ„æˆ â€œé‡å†™â€ æˆ– â€œéšè—â€ï¼Œå®Œå…¨å–å†³äºåŸºç±»ææ„å‡½æ•°æ˜¯å¦è¢«å£°æ˜ä¸ºvirtualâ€”â€” <strong>åŸºç±»ææ„</strong>æ˜¯<strong>è™šå‡½æ•°</strong>æ—¶ï¼Œ<strong>æ´¾ç”Ÿç±»ææ„</strong>æ„æˆ â€œ<strong>é‡å†™</strong>â€ï¼›<strong>åŸºç±»ææ„éè™š</strong>æ—¶ï¼Œ<strong>æ´¾ç”Ÿç±»ææ„</strong>æ„æˆ â€œ<strong>éšè—</strong>â€ã€‚</p>
</blockquote>
<ol start="2">
<li><strong>åŸºç±»æŒ‡é’ˆæŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡</strong>æ—¶ï¼ˆ<strong>è¾¾æˆæœ€åä¸€ä¸ªæ¡ä»¶ï¼š3.çˆ¶ç±»çš„æŒ‡é’ˆè°ƒç”¨è™šå‡½æ•°</strong>ï¼‰ï¼Œ<strong>éè™šææ„</strong>ä¼šè§¦å‘<strong>æ™®é€šè°ƒç”¨</strong>ï¼Œ<strong>è™šææ„</strong>ä¼šè§¦å‘<strong>å¤šæ€è°ƒç”¨</strong>(â€œè™šâ€æ»¡è¶³çˆ¶ç±»å£°æ˜è™šå‡½æ•°ï¼Œâ€œææ„â€æ»¡è¶³å­ç±»è™šå‡½æ•°é‡å†™ï¼‰</li>
</ol>
<p><strong>æ€»ç»“ä»¥ä¸Š</strong>ï¼šä¹Ÿå°±æ˜¯è¯´åªè¦åŠ ä¸Švirtualå°±å¯ä»¥è¾¾æˆå¤šæ€è°ƒç”¨çš„3ä¸ªæ¡ä»¶ï¼Œä»è€Œè¿›è¡Œå¤šæ€è°ƒç”¨æ ¹æ®æŒ‡å‘å†…å®¹çš„ç±»å‹ï¼Œè¿›è¡Œå¤šæ€ææ„ã€‚</p>
<p><strong>è§£å†³æ–¹å¼</strong>ï¼š<strong>ææ„å‡½æ•°ç‰¹æ®Šå¤„ç†ï¼Œåœ¨å‡½æ•°åå‰é¢åŠ ä¸Švirtualï¼Œå˜æˆè™šå‡½æ•°</strong>ï¼Œ<strong>ä»è€Œæ»¡è¶³3ä¸ªå¤šæ€è°ƒç”¨çš„æ¡ä»¶</strong>ï¼Œä»è€Œå˜æˆ<strong>å¤šæ€è°ƒç”¨</strong>ï¼ŒæŒ‡å‘å†…å®¹æ˜¯çˆ¶ç±»ç±»å‹è°ƒçˆ¶ç±»ææ„ï¼ŒæŒ‡å‘å†…å®¹æ˜¯å­ç±»ç±»å‹è°ƒå­ç±»ææ„ï¼Œè¿™ä¸ªæ—¶å€™p1 deleteæ—¶å°±è°ƒç”¨Memberçš„ææ„å‡½æ•°ï¼Œp2 delete æ—¶å°±è°ƒç”¨Studentçš„ææ„å‡½æ•°ï¼ˆå­ç±»ææ„å®Œæ—¶è‡ªåŠ¨è°ƒç”¨çˆ¶ç±»ææ„å‡½æ•°ï¼‰ã€‚</p>
<blockquote>
<p><strong>å›é¡¾ï¼šdeleteçš„åº•å±‚</strong>
åˆ†ä¸º<code>p-&gt;destructor() + operator delete(p)</code>è¿™ä¸¤æ­¥
<strong>ç¬¬ä¸€æ­¥</strong>ï¼šææ„å‡½æ•°è°ƒç”¨<code>p-&gt;~ç±»å()</code>
åªæœ‰å½“pæŒ‡å‘çš„æ˜¯ç±»ç±»å‹å¯¹è±¡ï¼ˆåŒ…æ‹¬è‡ªå®šä¹‰ç±»ã€æ ‡å‡†åº“ç±»ç­‰ï¼‰æ—¶ï¼Œè¿™ä¸€æ­¥æ‰ä¼šæ‰§è¡Œï¼›è‹¥pæŒ‡å‘å†…ç½®ç±»å‹ï¼ˆintã€charç­‰ï¼‰ï¼Œåˆ™æ— æ­¤æ­¥éª¤ï¼Œç›´æ¥è¿›å…¥å†…å­˜é‡Šæ”¾é˜¶æ®µã€‚
<strong>ç¬¬äºŒæ­¥</strong>ï¼šå†…å­˜é‡Šæ”¾<code>operator delete(p)</code>
å°†pæŒ‡å‘çš„å†…å­˜å—å½’è¿˜ç»™å †åˆ†é…å™¨ã€‚ æ ‡å‡†åº“é»˜è®¤çš„operator deleteå‡½æ•°ï¼Œå…¶åº•å±‚é€šå¸¸è°ƒç”¨ C è¯­è¨€çš„free()å‡½æ•°ã€‚</p>
</blockquote>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Member</span> {</span>
public:
	virtual ~Member() 
	{ 
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"~Member()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; 
	}
};
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> :</span> public Member {
public:
	~Student()  <span class="hljs-comment">// è‡ªåŠ¨æˆä¸ºè™šææ„ï¼ˆæ— éœ€æ˜¾å¼å†™virtualï¼‰</span>
	{ 
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"~Student()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; 
	}
};
<span class="hljs-comment">// åªæœ‰æ´¾ç”Ÿç±»Studentçš„ææ„å‡½æ•°é‡å†™äº†Personçš„ææ„å‡½æ•°ï¼Œä¸‹é¢çš„deleteå¯¹è±¡è°ƒç”¨ææ„å‡½</span>
<span class="hljs-comment">//æ•°ï¼Œæ‰èƒ½æ„æˆå¤šæ€ï¼Œæ‰èƒ½ä¿è¯p1å’Œp2æŒ‡å‘çš„å¯¹è±¡æ­£ç¡®çš„è°ƒç”¨ææ„å‡½æ•°ã€‚</span>
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	Member* p1 = new Member;
	Member* p2 = new Student;

	delete p1;
	delete p2;
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>ç»“æœå¦‚ä¸‹ï¼šâ€‹â€‹
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c64343fe670146278684dcc3c3d08b78~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=JoZdjjFtSdt%2BvPlWT8a7D9gJiTI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-6">ä¸€é“éš¾é¢˜</h3>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span>
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func</span><span class="hljs-params">(<span class="hljs-type">int</span> val = <span class="hljs-number">1</span>)</span>
	{
		<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"A-&gt;"</span> &lt;&lt; val &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
	}
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> { func(); }
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> :</span> public A
{
public:
	<span class="hljs-type">void</span> <span class="hljs-title function_">func</span><span class="hljs-params">(<span class="hljs-type">int</span> val = <span class="hljs-number">0</span>)</span>
	{
		<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"B-&gt;"</span> &lt;&lt; val &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
	}
};

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	B* p = new B;
	p-&gt;test();
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>â€‹<strong>ç±» A çš„å®šä¹‰</strong>ï¼š
<code>virtual void func(int val = 1)</code>ï¼šè™šå‡½æ•°funcï¼Œé»˜è®¤å‚æ•°ä¸º 1ï¼Œè¾“å‡ºA-&gt;valã€‚
<code>virtual void test() { func(); }</code>ï¼šè™šå‡½æ•°testï¼Œå†…éƒ¨è°ƒç”¨func()ã€‚
<strong>ç±» B çš„å®šä¹‰</strong>ï¼š
<code>void func(int val = 0)</code>ï¼šé‡å†™åŸºç±»Açš„è™šå‡½æ•°funcï¼Œé»˜è®¤å‚æ•°æ”¹ä¸º 0ï¼Œè¾“å‡ºB-&gt;valã€‚
<strong>æ³¨æ„</strong>ï¼š<strong>Bæ²¡æœ‰é‡å†™testå‡½æ•°</strong>ï¼Œå› æ­¤testä»ä½¿ç”¨åŸºç±»Açš„å®ç°ã€‚
<strong>main å‡½æ•°æ‰§è¡Œæµç¨‹</strong>ï¼š
<code>B* p = new B;</code>ï¼šåˆ›å»ºBç±»å‹å¯¹è±¡ï¼ŒæŒ‡é’ˆpçš„é™æ€ç±»å‹æ˜¯B*ï¼Œå®é™…ç±»å‹ä¹Ÿæ˜¯Bã€‚
<code>p-&gt;test();</code>ï¼šè°ƒç”¨testå‡½æ•°ï¼š
<strong>ç¬¬ä¸€æ­¥</strong>ï¼štestå‡½æ•°æœªè¢«Bé‡å†™ï¼Œå› æ­¤æ‰§è¡ŒåŸºç±»Açš„testå‡½æ•°ã€‚
<strong>ç¬¬äºŒæ­¥</strong>ï¼šAçš„testä¸­è°ƒç”¨func()ï¼Œç”±äºfuncæ˜¯è™šå‡½æ•°ï¼ŒåŠ¨æ€ç»‘å®šåˆ°å®é™…å¯¹è±¡ç±»å‹ï¼ˆBï¼‰çš„funcï¼Œå› æ­¤æ‰§è¡ŒB::funcã€‚
<strong>ç¬¬ä¸‰æ­¥</strong>ï¼šfuncçš„é»˜è®¤å‚æ•°éµå¾ªé™æ€ç»‘å®šï¼ˆç”±è°ƒç”¨ç‚¹çš„é™æ€ç±»å‹å†³å®šï¼‰ï¼štestå±äºAç±»ï¼Œå› æ­¤é»˜è®¤å‚æ•°ä½¿ç”¨A::funcçš„1ï¼Œè€ŒéB::funcçš„0ã€‚
<strong>æœ€ç»ˆè¾“å‡º</strong>ï¼šB-&gt;1ã€‚</p>
<h3 data-id="heading-7">C++11 overrideå’Œfinal</h3>
<p><strong>finalï¼šä¿®é¥°è™šå‡½æ•°ï¼Œè¡¨ç¤ºè¯¥è™šå‡½æ•°ä¸èƒ½å†è¢«é‡å†™</strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span>
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func</span><span class="hljs-params">()</span> final
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"A"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> :</span> public A
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func</span><span class="hljs-params">()</span><span class="hljs-comment">//å‡ºé”™ï¼Œä¸å…è®¸é‡å†™</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"B"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
};
</code></pre>
<p>ä¾‹å­ï¼šå®ç°ä¸€ä¸ªç±»ï¼Œè®©è¿™ä¸ªç±»ä¸èƒ½è¢«ç»§æ‰¿</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">//æ³•ä¸€ï¼šå°†æ„é€ å‡½æ•°ç§æœ‰åŒ–</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span>
{</span>
public:
	<span class="hljs-type">int</span> _a;
private:<span class="hljs-comment">//å°†æ„é€ å‡½æ•°ç§æœ‰ï¼Œæ´¾ç”Ÿç±»çš„æ„é€ ï¼Œå¿…é¡»è°ƒç”¨åŸºç±»çš„æ„é€ ï¼Œè¿™é‡Œç»§æ‰¿è¿‡å»ä¸å¯è§ï¼Œæ— æ³•è°ƒç”¨</span>
	A(){}
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> :</span>public A
{
};

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	B bb;
}
</code></pre>
<p><strong>finalï¼šä¿®é¥°ç±»ï¼Œè¿™ä¸ªç±»ä¸èƒ½è¢«ç»§æ‰¿</strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">//æ³•äºŒï¼šç±»ååŠ finalæˆä¸ºæœ€ç»ˆç±»</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> <span class="hljs-keyword">final</span>//åŠ <span class="hljs-keyword">final</span>å…³é”®å­—ï¼Œ<span class="hljs-keyword">final</span>ä¿®é¥°çš„ç±»ä¸ºæœ€ç»ˆç±»ï¼Œä¸èƒ½è¢«ç»§æ‰¿
{</span>
public:
	<span class="hljs-type">int</span> _a;
};
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> :</span> public A<span class="hljs-comment">//å‡ºé”™</span>
{

};
</code></pre>
<p>overrideï¼šæ£€æŸ¥æ´¾ç”Ÿç±»è™šå‡½æ•°æ˜¯å¦é‡å†™äº†åŸºç±»çš„æŸä¸ªè™šå‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰é‡å†™ç¼–è¯‘æŠ¥é”™</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span>
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"A"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> :</span> public A
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func</span><span class="hljs-params">()</span> override<span class="hljs-comment">//åŠ åœ¨æ´¾ç”Ÿç±»çš„æŸä¸ªè™šå‡½æ•°</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"B"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
};
</code></pre>
<h2 data-id="heading-8">æŠ½è±¡ç±»</h2>
<p>æ¦‚å¿µ
åœ¨<strong>è™šå‡½æ•°åé¢å†™ä¸Š = 0</strong>ï¼Œåˆ™è¿™ä¸ªå‡½æ•°ä¸º<strong>çº¯è™šå‡½æ•°</strong>ã€‚
åŒ…å«çº¯è™šå‡½æ•°çš„ç±»å«åš<strong>æŠ½è±¡ç±»</strong>ï¼ˆä¹Ÿå«åš<strong>æ¥å£ç±»</strong>ï¼‰ï¼Œ<strong>æŠ½è±¡ç±»ä¸èƒ½å®ä¾‹åŒ–å‡ºå¯¹è±¡</strong>ã€‚æ´¾ç”Ÿç±»ç»§æ‰¿åä¹Ÿä¸èƒ½å®ä¾‹åŒ–å‡ºå¯¹è±¡ï¼Œåªæœ‰é‡å†™çº¯è™šå‡½æ•°ï¼Œæ´¾ç”Ÿç±»æ‰èƒ½å®ä¾‹åŒ–å‡ºå¯¹è±¡ã€‚
ä¾‹å­ï¼šæŠ½è±¡ç±»ä¸èƒ½å®ä¾‹åŒ–</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Car</span>//æŠ½è±¡ç±»
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">Drive</span><span class="hljs-params">()</span> = <span class="hljs-number">0</span>;<span class="hljs-comment">//çº¯è™šå‡½æ•°</span>
};

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	Car c;<span class="hljs-comment">//å‡ºé”™</span>
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>ä¾‹å­ï¼šæŠ½è±¡ç±»çš„ä¸€ç§ä½¿ç”¨æ–¹å¼</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Car</span>//æŠ½è±¡ç±»
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">Drive</span><span class="hljs-params">()</span> = <span class="hljs-number">0</span>;<span class="hljs-comment">//çº¯è™šå‡½æ•°</span>
};
<span class="hljs-comment">//é—´æ¥å¼ºåˆ¶äº†å­ç±»é‡å†™è™šå‡½æ•°ï¼Œå› ä¸ºä¸é‡å†™çš„è¯ï¼Œå­ç±»ä¾æ—§æ˜¯æŠ½è±¡ç±»ï¼Œä¸èƒ½å®ä¾‹åŒ–å‡ºå¯¹è±¡</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Benz</span> :</span>public Car
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">Drive</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Benz-èˆ’é€‚"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
};
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BMW</span> :</span>public Car
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">Drive</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"BMW-æ“æ§"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
};
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	<span class="hljs-comment">//Car* a = new Benz;æ™®é€šè°ƒç”¨</span>
	<span class="hljs-comment">//a-&gt;Drive();</span>
	<span class="hljs-comment">//Car* b = new BMW;æ™®é€šè°ƒç”¨</span>
	<span class="hljs-comment">//b-&gt;Drive();</span>
	Car* a = new Benz;<span class="hljs-comment">//å¤šæ€è°ƒç”¨</span>
	a-&gt;Drive();
	Car* b = new BMW;<span class="hljs-comment">//å¤šæ€è°ƒç”¨</span>
	b-&gt;Drive();
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>ç»“æœï¼šæ™®é€šè°ƒç”¨ä¸å¤šæ€è°ƒç”¨çš„ç»“æœä¸€æ ·ï¼ˆæ³¨ï¼‰
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/817eac374e1c4cb887095dfdb92b5926~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=4Pw5iI8BUf5dL04%2F760uz1Ka%2FPM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-9">å…³äºæ¥å£ç»§æ‰¿å’Œå®ç°ç»§æ‰¿</h3>
<p><strong>æ™®é€šå‡½æ•°çš„ç»§æ‰¿æ˜¯ä¸€ç§å®ç°ç»§æ‰¿</strong>ï¼šæ´¾ç”Ÿç±»ç»§æ‰¿äº†åŸºç±»å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨å‡½æ•°ï¼Œç»§æ‰¿çš„æ˜¯å‡½æ•°çš„å®ç°ã€‚
<strong>è™šå‡½æ•°çš„ç»§æ‰¿æ˜¯ä¸€ç§æ¥å£ç»§æ‰¿</strong>ï¼šæ´¾ç”Ÿç±»ç»§æ‰¿çš„æ˜¯åŸºç±»å‡½æ•°çš„æ¥å£ï¼Œç›®çš„æ˜¯é‡å†™ï¼Œè¾¾æˆå¤šæ€ï¼Œç»§æ‰¿çš„æ˜¯æ¥å£ã€‚</p>
<h2 data-id="heading-10">å¤šæ€çš„åŸç†</h2>
<blockquote>
<p><strong>å›é¡¾ç»“æ„ä½“å†…å­˜å¯¹é½è§„åˆ™</strong>
<strong>è§„åˆ™ 1ï¼šæˆå‘˜çš„åç§»é‡è§„åˆ™</strong> ç»“æ„ä½“ä¸­æ¯ä¸ªæˆå‘˜çš„ã€Œ<strong>åç§»é‡</strong>ã€ï¼ˆç›¸å¯¹äºç»“æ„ä½“èµ·å§‹åœ°å€çš„å­—èŠ‚æ•°ï¼‰ï¼Œå¿…é¡»æ˜¯è¯¥æˆå‘˜ã€Œ<strong>è‡ªèº«å¤§å°</strong>ã€çš„æ•´æ•°å€ã€‚å¦‚æœä¸å¤Ÿï¼Œç¼–è¯‘å™¨ä¼šåœ¨è¯¥æˆå‘˜å‰å¡«å……ã€Œç©ºå­—èŠ‚ã€ã€‚
<strong>è§„åˆ™ 2ï¼šæ•´ä½“å¤§å°è§„åˆ™</strong> ç»“æ„ä½“çš„æ€»å¤§å°ï¼Œå¿…é¡»æ˜¯ç»“æ„ä½“ã€Œ<strong>æœ€å¤§å¯¹é½æ•°</strong>ã€çš„æ•´æ•°å€ã€‚
<strong>ã€Œæœ€å¤§å¯¹é½æ•°ã€= ç»“æ„ä½“ä¸­æ‰€æœ‰æˆå‘˜çš„è‡ªèº«å¤§å°çš„æœ€å¤§å€¼ï¼ˆæ¯”å¦‚åŒ…å«charå’Œintï¼Œæœ€å¤§å¯¹é½æ•° = 4ï¼‰</strong>ï¼›
<strong>è§„åˆ™ 3ï¼šåµŒå¥—ç»“æ„ä½“è§„åˆ™</strong> å¦‚æœç»“æ„ä½“åµŒå¥—äº†å¦ä¸€ä¸ªç»“æ„ä½“ï¼ŒåµŒå¥—çš„ç»“æ„ä½“çš„åç§»é‡ï¼Œå¿…é¡»æ˜¯ã€ŒåµŒå¥—ç»“æ„ä½“çš„æœ€å¤§å¯¹é½æ•°ã€çš„æ•´æ•°å€ï¼›æœ€ç»ˆæ•´ä½“å¤§å°ä»éµå¾ªè§„åˆ™ 2ã€‚</p>
</blockquote>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Base</span>
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">Func1</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Func1()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
private:
	<span class="hljs-type">int</span> _b = <span class="hljs-number">1</span>;
};

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-keyword">sizeof</span>(Base) &lt;&lt; <span class="hljs-built_in">endl</span>;
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è®¤ä¸ºè¿™ä¸ªç±»å®ä¾‹åŒ–åçš„å¤§å°ä¸º4å­—èŠ‚ï¼ˆæˆå‘˜å‡½æ•°åœ¨å…¬å…±ä»£ç åŒºï¼Œä¸è®¡ç®—å¤§å°ï¼‰ã€‚
ä½†æ˜¯ç»“æœä¸ºï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/907c1100a42a409d934dc47cc6f37e6a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=VxfKke0up5eacSGKr2gHFHFXGCw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€‹å®é™…ä¸Šæœ‰äº†è™šå‡½æ•°ä»¥åï¼Œå¯¹è±¡é‡Œé¢ä¼šå¤šä¸€ä¸ªæŒ‡é’ˆã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d311c09f136b42b4b4e5423d340cc085~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=aZcC3%2FdHb1qmXYMyi46Mw%2BfOqQQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
åœ¨çœ‹ä¸€ä¸ªç¨å¾®å¤æ‚ä¾‹å­</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Base</span>
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">Func1</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Func1()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">Func2</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Func2()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
	<span class="hljs-type">void</span> <span class="hljs-title function_">Func3</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Func3()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
private:
	<span class="hljs-type">int</span> _b = <span class="hljs-number">1</span>;
	<span class="hljs-type">char</span> _ch = <span class="hljs-string">'a'</span>;
};
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Derive</span> :</span> public Base
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">Func1</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Derive::Func1()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
private:
	<span class="hljs-type">int</span> _d = <span class="hljs-number">2</span>;
};
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-keyword">sizeof</span>(Base) &lt;&lt; <span class="hljs-built_in">endl</span>;
	Base bb;

	<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-keyword">sizeof</span>(Derive) &lt;&lt; <span class="hljs-built_in">endl</span>;
	Derive dd;
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>ç»“æœï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ce56a0c94c6434194ccaac44f077385~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=IV6w4GXx49304a7XFJltuDmEjNE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¯¹äºåŸºç±»:
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1233ae3d6fac41eeb089fdfec2788ac7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=OZ%2BYP9HIIf4QovhqOChDDJgF3cs%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>åœ¨Baseç±»ä¸­ï¼Œ<strong>æœ‰ä¸‰ä¸ªå‡½æ•°ï¼šå…¶ä¸­ä¸¤ä¸ªå‡½æ•°æ˜¯è™šå‡½æ•°ï¼Œå¦ä¸€ä¸ªå‡½æ•°æ˜¯æ™®é€šçš„æˆå‘˜å‡½æ•°</strong>ï¼Œæ™®é€šæˆå‘˜å‡½æ•°åœ¨å…¬å…±ä»£ç åŒºä¸ç”¨ç®¡ï¼Œå¦å¤–çš„ä¸¤ä¸ªè™šå‡½æ•°çš„åœ°å€å®é™…ä¸Šè¢«å‚¨å­˜åœ¨ä¸€ä¸ªè™šå‡½æ•°è¡¨ä¸­ï¼Œç”±è™šå‡½æ•°è¡¨çš„æŒ‡é’ˆæŒ‡å‘ï¼Œå®é™…ä¸Šbbè¿™ä¸ªå¯¹è±¡ä¸­ä»…ä»…åŒ…å«è¿™ä¸ªè™šå‡½æ•°è¡¨çš„æŒ‡é’ˆã€‚</p>
<p><strong>æ³¨æ„</strong>ï¼šä»–ä»¬è™šå‡½æ•°è¡¨ä¸­çš„è™šå‡½æ•°çš„é¡ºåºæ˜¯ç±»ä¸­è™šå‡½æ•°å£°æ˜çš„é¡ºåºã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e8b413aaf0a4b5987ec67c5fbc7a27a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=GDZuk9L2SoT9CLBlNOnHiAzLo2Q%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<blockquote>
<p>æ­¤å¤–é¢å¤–å®ä¾‹åŒ–å¯¹è±¡çš„è™šè¡¨æŒ‡é’ˆå®é™…ä¸Šéƒ½æŒ‡å‘<strong>åŒä¸€ä¸ªè™šè¡¨çš„èµ·å§‹åœ°å€ã€‚</strong></p>
<p><code>Base b1; Base b2; Base b3; </code></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0fcf3c6c152448beb3179028c9d73fe6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=53m1HVkXrkkkCKs2VU0sEt9x5gQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
</blockquote>
<p>å¯¹äºæ´¾ç”Ÿç±»ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57920b34353c42e3957e2b20cfdad8a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=%2BNoawUJU37cB323isY69bOZK9dA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>åœ¨Derive ç±»ä¸­ï¼Œå°†func1è¿›è¡Œäº†é‡å†™ï¼Œfunc2æ²¡æœ‰ç®¡ï¼Œå®é™…ä¸Šåœ¨è™šå‡½æ•°è¡¨ä¸­ï¼Œ[0]è¢«é‡å†™ï¼ˆè¢«â€œè¦†ç›–â€æ›´è´´åˆ‡ï¼‰ä¸ºDerive::Func1()ï¼Œ[1]è¿˜æ˜¯åŸæ¥çš„Base::Func2()æ²¡æœ‰åŠ¨ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/90eed6e9c0f2421cadaa04c57bf916be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=fue8IlR9Gw%2BmXTu9t%2FNmHNMIJFU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c21273288ff4c1e95290515720f7afa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=Ginjn7ewDZCUEzhpo3BmCldshDc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<blockquote>
<p><strong>è™šå‡½æ•°çš„é‡å†™ä¹Ÿå«åšè¦†ç›–</strong>ï¼š<strong>é‡å†™</strong>æ˜¯<strong>è¯­æ³•å±‚</strong>çš„æ¦‚å¿µ <strong>è¦†ç›–</strong>æ˜¯<strong>åŸç†å±‚</strong>çš„æ¦‚å¿µ</p>
</blockquote>
<p>ä»å†…å­˜è§†è§’ä¸‹
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ce35ad322204291b8a8aeb89f94d8b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=uhrvl0DNawzoMlOIopD%2B2L9K2dw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-11">æ¢ç©¶å¤šæ€è°ƒç”¨çš„åº•å±‚</h3>
<p>ä¾‹å­ï¼šä¸€æ®µå¤šæ€è°ƒç”¨çš„ä»£ç </p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Base</span>
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">Func1</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Base::Func1()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">Func2</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Base::Func2()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
	<span class="hljs-type">void</span> <span class="hljs-title function_">Func3</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Base::Func3()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
private:
	<span class="hljs-type">int</span> _b = <span class="hljs-number">1</span>;
	<span class="hljs-type">char</span> _ch = <span class="hljs-string">'a'</span>;
};
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Derive</span> :</span> public Base
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">Func1</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Derive::Func1()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
private:
	<span class="hljs-type">int</span> _d = <span class="hljs-number">2</span>;
};

<span class="hljs-type">void</span> <span class="hljs-title function_">f</span><span class="hljs-params">(Base* ptr)</span>
{
	ptr-&gt;Func1();<span class="hljs-comment">//å¤šæ€è°ƒç”¨</span>
}
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-keyword">sizeof</span>(Base) &lt;&lt; <span class="hljs-built_in">endl</span>;
	Base bb;

	<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-keyword">sizeof</span>(Derive) &lt;&lt; <span class="hljs-built_in">endl</span>;
	Derive dd;

	f(&amp;bb);
	f(&amp;dd);
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>ç»“æœï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0e40fcae65a4bdbbc9d859e358edb41~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=E9eBsnAGJrohg7HjtZ767Vr2a28%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>æƒ…å†µ 1ï¼š</strong><code>Base* ptr = &amp;bb</code><strong>ï¼ˆæŒ‡é’ˆæŒ‡å‘çˆ¶ç±»å¯¹è±¡ bbï¼‰</strong></p>
<ol>
<li>ptrå˜é‡é‡Œå­˜çš„æ˜¯<strong>bbå¯¹è±¡ï¼ˆçˆ¶ç±»Baseï¼‰çš„é¦–åœ°å€</strong>ï¼›</li>
<li>bbå¯¹è±¡çš„å†…å­˜å¸ƒå±€é‡Œï¼Œç¬¬ä¸€ä¸ªæˆå‘˜å°±æ˜¯_vfptrï¼ˆè™šè¡¨æŒ‡é’ˆï¼‰â€”â€” <strong>è¿™ä¸ªæŒ‡é’ˆæ˜¯bbä¸“å±çš„ï¼Œå®ƒåªæŒ‡å‘ Base ç±»çš„è™šå‡½æ•°è¡¨</strong>ï¼ˆBase è™šè¡¨çš„ [0] æ˜¯Base::Func1()çš„åœ°å€ï¼‰ï¼›</li>
<li>æ‰§è¡Œptr-&gt;Func1()æ—¶ï¼ŒæŒ‰å›¾é‡Œçš„æ±‡ç¼–æ­¥éª¤ï¼š</li>
</ol>
<ul>
<li>å…ˆä»ptré‡Œå–å‡ºbbçš„é¦–åœ°å€ï¼ˆä¹Ÿå°±æ˜¯_vfptrçš„åœ°å€ï¼‰ï¼›</li>
<li>å†é€šè¿‡_vfptræ‰¾åˆ° Base ç±»çš„è™šè¡¨ï¼›</li>
<li>ä»è™šè¡¨ç¬¬ 0 é¡¹å–å‡ºBase::Func1()çš„åœ°å€ï¼›</li>
<li>æœ€åè°ƒç”¨è¿™ä¸ªåœ°å€çš„å‡½æ•°â†’ æ‰€ä»¥æœ€ç»ˆè°ƒç”¨çš„æ˜¯çˆ¶ç±»çš„è™šå‡½æ•°ã€‚</li>
</ul>
<p><strong>æƒ…å†µ 2ï¼š</strong><code>Base* ptr = &amp;dd</code><strong>ï¼ˆæŒ‡é’ˆæŒ‡å‘å­ç±»å¯¹è±¡ ddï¼‰</strong></p>
<ol>
<li>ptrå˜é‡é‡Œå­˜çš„æ˜¯<strong>ddå¯¹è±¡ï¼ˆæ´¾ç”Ÿç±»Deriveï¼‰çš„é¦–åœ°å€</strong>ï¼ˆ<strong>è™½ç„¶ptrçš„ç±»å‹æ˜¯ Base*ï¼Œä½†å®ƒå®é™…æŒ‡å‘çš„æ˜¯ dd çš„å†…å­˜</strong>ï¼‰ï¼›</li>
<li>ddå¯¹è±¡çš„å†…å­˜å¸ƒå±€é‡Œï¼Œç¬¬ä¸€ä¸ªæˆå‘˜ä¹Ÿæ˜¯_vfptrï¼Œä½†<strong>è¿™ä¸ª_vfptræ˜¯ddä¸“å±çš„ â€”â€” å®ƒæŒ‡å‘ Derive ç±»çš„è™šå‡½æ•°è¡¨</strong>ï¼ˆDerive è™šè¡¨çš„ [0] æ˜¯Derive::Func1()çš„åœ°å€ï¼Œå› ä¸ºå­ç±»é‡å†™äº† Func1ï¼Œè¦†ç›–äº†è™šè¡¨çš„è¿™ä¸€é¡¹ï¼‰ï¼›</li>
<li>æ‰§è¡Œptr-&gt;Func1()æ—¶ï¼Œæ±‡ç¼–æ­¥éª¤å’Œä¸Šé¢å®Œå…¨ä¸€æ ·ï¼ˆå› ä¸ºæŒ‡é’ˆç±»å‹è¿˜æ˜¯ Base*ï¼‰ï¼Œä½†å¯»å€çš„ç›®æ ‡å˜äº†ï¼š</li>
</ol>
<ul>
<li>ä»ptré‡Œå–å‡ºddçš„é¦–åœ°å€ï¼ˆä¹Ÿå°±æ˜¯ddçš„_vfptråœ°å€ï¼‰ï¼›</li>
<li>é€šè¿‡ddçš„_vfptræ‰¾åˆ° Derive ç±»çš„è™šè¡¨ï¼›</li>
<li>ä»è™šè¡¨ç¬¬ 0 é¡¹å–å‡ºDerive::Func1()çš„åœ°å€ï¼›</li>
<li>æœ€åè°ƒç”¨è¿™ä¸ªåœ°å€çš„å‡½æ•°â†’ æ‰€ä»¥æœ€ç»ˆè°ƒç”¨çš„æ˜¯å­ç±»çš„è™šå‡½æ•°ã€‚</li>
</ul>
<p><strong>å¤šæ€è°ƒç”¨</strong>ï¼šè¿è¡Œæ—¶åŒºè™šå‡½æ•°è¡¨ä¸­æ‰¾å‡½æ•°çš„åœ°å€ï¼Œè¿›è¡Œè°ƒç”¨ï¼Œæ‰€ä»¥æŒ‡å‘çˆ¶ç±»è°ƒçš„æ˜¯çˆ¶ç±»è™šå‡½æ•°ï¼ŒæŒ‡å‘å­ç±»è°ƒç”¨çš„æ˜¯å­ç±»çš„è™šå‡½æ•°ã€‚</p>
<p>å¦‚ä¸‹å°±æ˜¯å¤šæ€è°ƒç”¨çš„åº•å±‚åŸç†
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a84d0a1b1ad34a03a07079ccb003c623~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=SMz7WmI8jk7oAUtJQN5vZOAsPyQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-12">å…³äºè™šå‡½æ•°è¡¨ä¸è™šå‡½æ•°çš„ä¸€äº›é—®é¢˜</h3>
<h4 data-id="heading-13"><strong>è™šå‡½æ•°è¡¨æ˜¯å­˜åœ¨å“ªä¸ªåŒºåŸŸï¼Ÿ</strong></h4>
<p>å¦‚ä¸‹ä»£ç è¿›è¡ŒéªŒè¯</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Base</span>
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">Func1</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Base::Func1()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">Func2</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Base::Func2()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
	<span class="hljs-type">void</span> <span class="hljs-title function_">Func3</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Base::Func3()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
private:
	<span class="hljs-type">int</span> _b = <span class="hljs-number">1</span>;
};
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Derive</span> :</span> public Base
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">Func1</span><span class="hljs-params">()</span>
	{
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Derive::Func1()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	}
private:
	<span class="hljs-type">int</span> _d = <span class="hljs-number">2</span>;
};

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	Base bb;
	Derive dd;

	<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;
	<span class="hljs-type">static</span> <span class="hljs-type">int</span> j = <span class="hljs-number">1</span>;
	<span class="hljs-type">int</span>* p1 = new <span class="hljs-type">int</span>;
	<span class="hljs-type">const</span> <span class="hljs-type">char</span>* p2 = <span class="hljs-string">"xxxx"</span>;
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"æ ˆï¼š%p\n"</span>, &amp;i);
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"é™æ€åŒºï¼š%p\n"</span>, &amp;j);
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"å †ï¼š%p\n"</span>, p1);
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"å¸¸é‡åŒºï¼š%p\n"</span>, p2);

	Base* p3 = &amp;bb;
	Derive* p4 = &amp;dd;
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"Baseè™šè¡¨åœ°å€ï¼š%p\n"</span>, *(<span class="hljs-type">int</span>*)p3);<span class="hljs-comment">//å–åˆ°è™šè¡¨æŒ‡é’ˆå¤´å››ä¸ªå­—èŠ‚</span>
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"Deriveè™šè¡¨åœ°å€ï¼š%p\n"</span>, *(<span class="hljs-type">int</span>*)p4);
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/511895a1ae6c46d495127f0e5ba9bfcb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=LN1WUSeNL%2FaLPVTc5%2FxpM%2FCul7Y%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<strong>è™šè¡¨åœ¨å¸¸é‡åŒºå­˜å‚¨ã€‚</strong></p>
<h4 data-id="heading-14"><strong>è™šè¡¨åœ¨ä»€ä¹ˆé˜¶æ®µç”Ÿæˆçš„</strong>ï¼Ÿ</h4>
<p>ç¼–è¯‘çš„æ—¶å€™</p>
<h4 data-id="heading-15"><strong>è™šè¡¨æŒ‡é’ˆä»€ä¹ˆæ—¶å€™åˆå§‹åŒ–çš„</strong>ï¼Ÿ</h4>
<p>æ„é€ å‡½æ•°æ„é€ æ—¶ï¼Œåœ¨å…¶ä»–æˆå‘˜å˜é‡åˆå§‹åŒ–ä¹‹å‰ï¼Œè™šè¡¨æŒ‡é’ˆå°±åˆå§‹åŒ–å¥½äº†ã€‚</p>
<p>æ³¨æ„ï¼šè™šå‡½æ•°è¡¨ä¸­åªæ˜¯å­˜å‚¨è™šå‡½æ•°çš„æŒ‡é’ˆï¼Œè€Œ<strong>è™šå‡½æ•°çš„å®ç°åœ¨ä»£ç æ®µã€‚</strong></p>
<h3 data-id="heading-16">å¤šç»§æ‰¿ä¸‹çš„ç±»åº•å±‚ç»“æ„ï¼ˆå«è™šå‡½æ•°ï¼‰</h3>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Base1</span>
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func1</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Base1::func1"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func2</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Base1::func2"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
private:
	<span class="hljs-type">int</span> b1;
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Base2</span>
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func1</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Base2::func1"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func2</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Base2::func2"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
private:
	<span class="hljs-type">int</span> b2;
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Derive</span> :</span> public Base1, public Base2
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func1</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Derive::func1"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func2</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Derive::func2"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
private:
	<span class="hljs-type">int</span> d1;
};

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-keyword">sizeof</span>(Derive) &lt;&lt; <span class="hljs-built_in">endl</span>;
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b9b763ab9f640efa24c6880d737960d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=RonVB8zFwpvJBk40K5cRZIybWTM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
Base1ä¸­æœ‰ä¸€ä¸ªè™šå‡½æ•°æŒ‡é’ˆå’Œintæˆå‘˜å˜é‡ï¼Œå…±8å­—èŠ‚
Base2ä¸­æœ‰ä¸€ä¸ªè™šå‡½æ•°æŒ‡é’ˆå’Œintæˆå‘˜å˜é‡ï¼Œå…±8å­—èŠ‚
æ‰€ä»¥Deriveä¸­æœ‰è‡ªèº«çš„ä¸€ä¸ªintæˆå‘˜å˜é‡d1ï¼Œå’Œç»§æ‰¿ä¸‹æ¥çš„Base1ä¸Base2å¯¹è±¡ï¼Œå…±4+8+8=20å­—èŠ‚ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/994d6a27db3342cca3eaf6fe557dcb73~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=z2QYt9txXyxOj1wL8WAIqbKZX7M%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>å®é™…ä¸ŠDeriveä¸­æœ‰ä¸¤ä¸ªä¸åŒçš„è™šè¡¨æŒ‡é’ˆï¼ŒæŒ‡å‘ä¸¤ä¸ªä¸åŒçš„è™šè¡¨ã€‚</strong>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f49b9cc0f4c3451a9e265f3f122df9b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=khbBpQaaDzjXXQnrG7si4Kd6QXs%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
åœ¨ä»£ç ä¸­ï¼Œåœ¨Deriveç±»ä¸­ï¼Œæˆ‘ä»¬é‡å†™äº†func1å‡½æ•°ï¼Œå¦‚ä¸‹å¯ä»¥çœ‹å‡ºé‡å†™çš„Derive::func1()è¦†ç›–äº†Base1ä¸Base2çš„è™šè¡¨ä¸­func1()ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/89cb58bf76ea4d689f4494f2d555479a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=kuoZ7EPRAEtQzDTcYBm1oY%2BEp40%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>é‚£ä¹ˆåœ¨ç±»Deriveä¸­ï¼Œä¸æ˜¯é‡å†™çš„è™šå‡½æ•°func3()æ”¾åœ¨å“ªé‡Œäº†ï¼Ÿ
<strong>æ”¾åœ¨ç»§æ‰¿çš„ç¬¬ä¸€ä¸ªç±»Base1çš„è™šè¡¨çš„æœ€åï¼ˆåœ¨è±å½¢ç»§æ‰¿ä¸­ä¹Ÿæœ‰ä¾‹å­ä½“ç°ï¼‰</strong>ï¼ŒéªŒè¯å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-keyword">typedef</span> <span class="hljs-title function_">void</span><span class="hljs-params">(*VF_PTR)</span><span class="hljs-params">()</span>;

<span class="hljs-comment">//æ‰“å°è™šè¡¨ï¼Œæœ¬è´¨æ‰“å°æŒ‡é’ˆï¼ˆè™šå‡½æ•°æŒ‡é’ˆï¼‰æ•°ç»„</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">PrintVFT</span><span class="hljs-params">(VF_PTR vft[])</span>
{
	<span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; vft[i] != nullptr; i++)
	{
		<span class="hljs-built_in">printf</span>(<span class="hljs-string">"[%d]:%p-&gt;"</span>, i, vft[i]);
		VF_PTR f = vft[i];
		f();
	}
}
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	Derive d;

	Base1* ptr1 = &amp;d;
	Base2* ptr2 = &amp;d;
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"Base1è™šè¡¨åœ°å€ï¼š%p\n"</span>,ptr1);
	PrintVFT((VF_PTR*)(*(<span class="hljs-type">int</span>*)ptr1));
	<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"Base2è™šè¡¨åœ°å€ï¼š%p\n"</span>, ptr2);
	PrintVFT((VF_PTR*)(*(<span class="hljs-type">int</span>*)ptr2));
}
</code></pre>
<blockquote>
<p><strong>æ™®é€šå¤šé‡ç»§æ‰¿ä¸­ï¼Œæ–°å¢è™šå‡½æ•°ä¼˜å…ˆæŒ‚åˆ°ç¬¬ä¸€ä¸ªç›´æ¥åŸºç±»çš„è™šè¡¨ï¼ˆå¦‚æœå®ƒæœ‰ vfptr è™šè¡¨æŒ‡é’ˆï¼‰ï¼Œä¸ç®¡æœ‰æ²¡æœ‰é‡å†™å…¶ä»–åŸºç±»çš„è™šå‡½æ•°ã€‚</strong></p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba69322adfb34236820bca927bb90e48~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=47OAh5IICPuq8vnnbCNNwOIGYkw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æ€»ç»“ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a078e8b5774343b3912113556e1c6152~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=WsCA26lhF5FOMh1tlQ255DVmRzQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h4 data-id="heading-17">è±å½¢ç»§æ‰¿ä¸‹çš„ç±»åº•å±‚ç»“æ„ï¼ˆå«è™šå‡½æ•°æƒ…å†µï¼‰</h4>
<p>ä¾‹å­1</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span>
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">funca1</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"A::funca1"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">funca2</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"A::funca2"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">funca3</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"A::funca3"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
public:
	<span class="hljs-type">int</span> a;
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> :</span>virtual public A
{
public:
	<span class="hljs-type">int</span> b;
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">C</span> :</span>virtual public A
{
public:
	<span class="hljs-type">int</span> c;
};
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">D</span> :</span>public B, public C
{
public:
	<span class="hljs-type">int</span> d;
};

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	D dd;
	dd.B::a = <span class="hljs-number">1</span>;
	dd.C::a = <span class="hljs-number">2</span>;
	dd.b = <span class="hljs-number">3</span>;
	dd.c = <span class="hljs-number">4</span>;
	dd.d = <span class="hljs-number">5</span>;
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>åˆ†æå¦‚ä¸‹ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b85ac0505084da3a5bf39e1125934d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=xkO8iat1CH8pn4tw8f9yuArmEZ4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾‹å­2</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span>
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func1</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"A::func1"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func2</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"A::func2"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func3</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"A::func3"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
public:
	<span class="hljs-type">int</span> a;
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> :</span>virtual public A
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func1</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"B::func1"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
public:
	<span class="hljs-type">int</span> b;
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">C</span> :</span>virtual public A
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func2</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"C::func2"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
public:
	<span class="hljs-type">int</span> c;
};
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">D</span> :</span>public B, public C
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func1</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"D::func1"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
public:
	<span class="hljs-type">int</span> d;
};

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	D dd;
	dd.a = <span class="hljs-number">1</span>;
	dd.b = <span class="hljs-number">2</span>;
	dd.c = <span class="hljs-number">3</span>;
	dd.d = <span class="hljs-number">4</span>;
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>å¦‚ä¸Šç±»Bå¯¹ç±»Açš„func1è¿›è¡Œäº†é‡å†™ï¼Œç±»Cå¯¹ç±»Açš„func2è¿›è¡Œäº†é‡å†™ï¼Œè€Œç±»Då¯¹ç±»Bçš„func1è¿›è¡Œäº†é‡å†™ã€‚
Bã€C åªæ˜¯é‡å†™äº† A çš„è™šå‡½æ•°ï¼ˆæ¯”å¦‚ B é‡å†™ A çš„ func1ï¼‰ï¼Œè¿™äº›é‡å†™çš„å‡½æ•°å¯ä»¥å…±äº«è™šåŸºç±» A çš„è™šå‡½æ•°è¡¨ï¼ˆå› ä¸º A çš„è™šè¡¨ä¼šè®°å½•æœ€ç»ˆè¦†ç›–åçš„å‡½æ•°åœ°å€ï¼‰ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fee31c53760a4a0bbc2749ed0913d895~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=Ve5jxkUU6qbPKDkC4cM9n1j61Q8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾‹å­3</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span>
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func1</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"A::func1"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func2</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"A::func2"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func3</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"A::func3"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
public:
	<span class="hljs-type">int</span> a;
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> :</span>virtual public A
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func4</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"B::func4"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func5</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"B::func5"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
public:
	<span class="hljs-type">int</span> b;
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">C</span> :</span>virtual public A
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func6</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"C::func6"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func7</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"C::func7"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
public:
	<span class="hljs-type">int</span> c;
};
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">D</span> :</span>public B, public C
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func8</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"D::func8"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func9</span><span class="hljs-params">()</span> { <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"D::func9"</span> &lt;&lt; <span class="hljs-built_in">endl</span>; }
public:
	<span class="hljs-type">int</span> d;
};

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	D dd;
	dd.a = <span class="hljs-number">1</span>;
	dd.b = <span class="hljs-number">2</span>;
	dd.c = <span class="hljs-number">3</span>;
	dd.d = <span class="hljs-number">4</span>;
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>ç°åœ¨ç»™ B åŠ äº†func4ã€func5ï¼Œç»™ C åŠ äº†func6ã€func7â€”â€” è¿™äº›æ˜¯A æ²¡æœ‰çš„ç‹¬æœ‰çš„è™šå‡½æ•°ï¼Œæ— æ³•å­˜åˆ° A çš„è™šå‡½æ•°è¡¨é‡Œï¼Œæ‰€ä»¥ Bã€C å¿…é¡»å„è‡ªæœ‰ä¸€ä¸ªè‡ªå·±çš„è™šå‡½æ•°è¡¨æŒ‡é’ˆï¼ˆvfptrï¼‰ï¼ŒæŒ‡å‘è‡ªå·±çš„è™šå‡½æ•°è¡¨ï¼ˆç”¨æ¥å­˜è¿™äº›ç‹¬æœ‰çš„è™šå‡½æ•°åœ°å€ï¼‰ã€‚</p>
<p>å¦‚ä¸‹å›¾ï¼Œ<strong>ç±»ä¸­çš„ç»“æ„é¡ºåºä¸ºï¼šè™šå‡½æ•°è¡¨æŒ‡é’ˆï¼Œè™šæœºè¡¨æŒ‡é’ˆï¼Œç±»æˆå‘˜å˜é‡</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c678549cca44b5f860b36be0dc88390~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=ROzOcnkyKP2R3oEErgStqODV57M%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
æ³¨æ„ï¼šè¿™é‡Œç±»Dï¼ˆæœ€ç»ˆç±»ï¼‰ä¸­æœ‰è™šå‡½æ•°ï¼Œä½†æ²¡æœ‰åƒç±»Bï¼Œç±»Cé‚£æ ·æ–°å¢ä¸€ä¸ªè™šå‡½æ•°è¡¨æŒ‡é’ˆå†™åˆ°æˆå‘˜å˜é‡çš„ä¸Šé¢ï¼Œè€Œæ˜¯æŠŠè¿™äº›è™šå‡½æ•°çš„åœ°å€éƒ½æ”¾åˆ°äº†ï¼Œç¬¬ä¸€ä¸ªç±»Bçš„è™šå‡½æ•°è¡¨ä¸­ã€‚</p>
<blockquote>
<p><strong>æ™®é€šå¤šé‡ç»§æ‰¿ä¸­ï¼Œæ–°å¢è™šå‡½æ•°ä¼˜å…ˆæŒ‚åˆ°ç¬¬ä¸€ä¸ªç›´æ¥åŸºç±»çš„è™šè¡¨ï¼ˆå¦‚æœå®ƒæœ‰ vfptr è™šè¡¨æŒ‡é’ˆï¼‰ï¼Œä¸ç®¡æœ‰æ²¡æœ‰é‡å†™å…¶ä»–åŸºç±»çš„è™šå‡½æ•°ã€‚</strong></p>
</blockquote>
<p>è¿™é‡Œä¸¾ä¸€ä¸ªä¾‹å­ï¼šC-&gt;B-&gt;Aï¼ˆé•¿ä¸€ç‚¹çš„ç»§æ‰¿ï¼‰
ç»“æœé¢„æµ‹æ˜¯B,Cä¸­çš„æ–°çš„è™šå‡½æ•°ï¼Œéƒ½æ”¾åœ¨äº†Açš„è™šå‡½æ•°è¡¨ä¸­ï¼ŒBï¼ŒCä¸­å¹¶æ²¡æœ‰æ–°å¢è™šå‡½æ•°è¡¨ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span>
{</span>
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func1</span><span class="hljs-params">()</span>{}
public:
	<span class="hljs-type">int</span> a;
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span>:</span>public A
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func2</span><span class="hljs-params">()</span>{}
public:
	<span class="hljs-type">int</span> b;
};

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">C</span> :</span>public B
{
public:
	virtual <span class="hljs-type">void</span> <span class="hljs-title function_">func3</span><span class="hljs-params">()</span> {}
public:
	<span class="hljs-type">int</span> c;
};

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span>
{
	C cc;
	cc.a = <span class="hljs-number">1</span>;
	cc.b = <span class="hljs-number">2</span>;
	cc.c = <span class="hljs-number">3</span>;
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>ç¡®å®å¦‚æ­¤
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7597a00dd214b578829651daf02ee54~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmY5a2QMTM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767461062&amp;x-signature=dw1Hs08eYnZUaqPin8WrtlSFXyY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>

















<table><thead><tr><th>åœºæ™¯</th><th>æ–°å¢è™šå‡½æ•°çš„æŒ‚é è§„åˆ™</th></tr></thead><tbody><tr><td>æ™®é€šå¤šé‡ç»§æ‰¿ï¼ˆå¦‚ D ç»§æ‰¿ Bã€Cï¼‰</td><td><strong>ä¼˜å…ˆæŒ‚åˆ°ç¬¬ä¸€ä¸ªç›´æ¥åŸºç±»çš„è™šè¡¨</strong></td></tr><tr><td>è±å½¢è™šæ‹Ÿç»§æ‰¿ï¼ˆå¦‚ B è™šæ‹Ÿç»§æ‰¿ Aï¼‰</td><td>å¿…é¡»è‡ªå·±å»ºè™šè¡¨ï¼Œä¸èƒ½æŒ‚ A çš„è™šè¡¨</td></tr></tbody></table>
<p>ç®€å•ç†è§£ï¼šå¯¹äºâ€œå…±äº«ç±»â€ï¼ˆä¾‹å¦‚Aï¼‰ï¼Œä¸èƒ½æŒ‚åˆ°ä»–è‡ªèº«ï¼Œåº”ä¼˜å…ˆæŒ‚åˆ°ä»–ç›´æ¥æ´¾ç”Ÿç±»çš„è™šè¡¨ï¼Œå¯¹äºâ€œæ™®é€šç±»â€ï¼Œå¤šé‡ç»§æ‰¿ä¸­ï¼Œä»–çš„ç›´æ¥æ´¾ç”Ÿç±»ä¼˜å…ˆæŒ‚åˆ°ä»–çš„è™šè¡¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ”¥ Go Gin ä¸åœæœºé‡å¯æŒ‡å—ï¼šè®©æœåŠ¡åœ¨â€œæ´—æ¾¡æ“èƒŒâ€ä¸­æ— ç¼å‡çº§]]></title>    <link>https://juejin.cn/post/7588067055482732553</link>    <guid>https://juejin.cn/post/7588067055482732553</guid>    <pubDate>2025-12-28T00:39:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588067055482732553" data-draft-id="7585948869845205027" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ”¥ Go Gin ä¸åœæœºé‡å¯æŒ‡å—ï¼šè®©æœåŠ¡åœ¨â€œæ´—æ¾¡æ“èƒŒâ€ä¸­æ— ç¼å‡çº§"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-28T00:39:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="golangå­¦ä¹ è®°"/> <meta itemprop="url" content="https://juejin.cn/user/4371313964100990"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ”¥ Go Gin ä¸åœæœºé‡å¯æŒ‡å—ï¼šè®©æœåŠ¡åœ¨â€œæ´—æ¾¡æ“èƒŒâ€ä¸­æ— ç¼å‡çº§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4371313964100990/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    golangå­¦ä¹ è®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T00:39:41.000Z" title="Sun Dec 28 2025 00:39:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>â€œç”¨æˆ·æ­£åœ¨ä¸‹å•ï¼Œä½ å´è¦ <code>Ctrl+C</code> é‡å¯æœåŠ¡ï¼Ÿâ€<br/>
â€œè€æ¿é—®ï¼šâ€˜ä¸Šçº¿æ€ä¹ˆåˆä¸­æ–­äº†ï¼Ÿâ€™ ä½ å¼±å¼±å›ç­”ï¼šâ€˜å°±ä¸‰ç§’â€¦â€¦â€™â€</p>
<p>â€”â€”è¿™ä¸æ˜¯è¿ç»´ï¼Œæ˜¯<strong>äººè´¨åŠ«æŒå¼éƒ¨ç½²</strong>ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬æ•™ Gin æœåŠ¡ï¼š<strong>è¾¹è·‘é©¬æ‹‰æ¾ï¼Œè¾¹æ¢é‹ï¼Œè¿˜ä¸å¸¦å–˜æ°”çš„</strong>ï¼ğŸ‘ŸğŸ’¨</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ğŸ§  ä¸€ã€ä»€ä¹ˆæ˜¯â€œçƒ­é‡å¯â€ï¼Ÿâ€”â€”ä¸æ˜¯é­”æ³•ï¼Œæ˜¯ç§‘å­¦ï¼</h2>
<p>å…ˆæŠ›ä¸ªçµé­‚æ‹·é—®ï¼š</p>
<blockquote>
<p>â“ ä¸ºä»€ä¹ˆ Nginx æ‰§è¡Œ <code>nginx -s reload</code> æ—¶ï¼Œä½ æ­£åœ¨ä¸‹è½½çš„è§†é¢‘<strong>ä¸ä¼šå¡æˆ PPT</strong>ï¼Ÿ</p>
</blockquote>
<h3 data-id="heading-1">ğŸ“Œ æ ¸å¿ƒåŸç†ä¸‰æ¿æ–§ï¼š</h3>





















<table><thead><tr><th>æŠ€æœ¯ç‚¹</th><th>äººç±»ç¿»è¯‘ç‰ˆ</th></tr></thead><tbody><tr><td><strong>1. ç›‘å¬å™¨ç»§æ‰¿</strong></td><td>çˆ¶è¿›ç¨‹æŠŠâ€œé—¨â€ï¼ˆsocket ç›‘å¬å¥—æ¥å­—ï¼‰ä¼ ç»™å­è¿›ç¨‹ï¼Œæ–°è€äº¤æ›¿ï¼Œé—¨å£ä¸ç©ºå²— ğŸ‘®â¡ï¸ğŸ‘®â€â™‚ï¸</td></tr><tr><td><strong>2. ä¼˜é›…é€€å‡º</strong></td><td>æ—§è¿›ç¨‹åœæ­¢æ¥æ–°æ´»ï¼Œä½†æŠŠæ‰‹é‡Œâ€œåŠç¢—é¢â€åƒå®Œï¼ˆå¤„ç†å®Œåœ¨é€”è¯·æ±‚ï¼‰ğŸœ</td></tr><tr><td><strong>3. ä¿¡å·é©±åŠ¨</strong></td><td><code>SIGUSR2</code> ä¸æ˜¯â€œæ€æˆ‘â€ï¼Œæ˜¯â€œæˆ‘è®©ä½ï¼Œä½ ä¸Šï¼â€</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>åº•å±‚çœŸç›¸</strong>ï¼š<br/>
å½“ <code>net.Listen("tcp", ":8080")</code> æˆåŠŸåï¼Œå†…æ ¸å°±ç»‘å®šäº† 1 ä¸ª socket æ–‡ä»¶æè¿°ç¬¦ï¼ˆFD=3ï¼‰ã€‚<br/>
çˆ¶è¿›ç¨‹ <code>fork()</code> + <code>exec()</code> å­è¿›ç¨‹æ—¶ï¼Œ<strong>FD æ˜¯é»˜è®¤ç»§æ‰¿çš„</strong>ï¼ˆé™¤éè®¾ <code>FD_CLOEXEC</code>ï¼‰ã€‚<br/>
â†’ å­è¿›ç¨‹ <code>net.FileListener(os.NewFile(3, ""))</code> ç›´æ¥æ¥ç®¡â€œå¤§é—¨â€ï¼Œç”¨æˆ·è¿æ¥æ¯«æ— æ„ŸçŸ¥ï¼</p>
</blockquote>
<hr/>
<h2 data-id="heading-2">ğŸ’ äºŒã€Go é‡Œæ€ä¹ˆç©ï¼Ÿ5 ç§å§¿åŠ¿å¤§ä¹±æ–—</h2>
<h3 data-id="heading-3">ğŸ¥‡ <strong>å† å†›é€‰æ‰‹ï¼š<code>github.com/fvbock/endless</code></strong></h3>
<blockquote>
<p>â€œç¨³å®šå¦‚è€ç‹—ï¼Œæ–‡æ¡£åƒèœè°±â€</p>
</blockquote>
<h4 data-id="heading-4">âœ… æ ¸å¿ƒäº®ç‚¹ï¼š</h4>
<ul>
<li>å•å‡½æ•°æ›¿æ¢ <code>http.ListenAndServe</code> â†’ <code>endless.ListenAndServe</code></li>
<li>æ”¯æŒ <code>SIGUSR1</code> / <code>SIGUSR2</code> / <code>SIGTERM</code> å¤šä¿¡å·</li>
<li>è‡ªåŠ¨å¤„ç† <code>HammerTime</code>ï¼ˆå¼ºåˆ¶å…³æœºå€’è®¡æ—¶ï¼‰</li>
<li>ä¸€è¡Œä»£ç æ‹¯æ•‘ä¸–ç•Œï¼š</li>
</ul>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// ä» âŒ è„†å¼±æ¨¡å¼</span>
log.Fatal(http.ListenAndServe(<span class="hljs-string">":8080"</span>, router))

<span class="hljs-comment">// ä¸€é”®å‡çº§ â†’ âœ… å¥å£®æ¨¡å¼</span>
endless.ListenAndServe(<span class="hljs-string">":8080"</span>, router)
</code></pre>
<h4 data-id="heading-5">ğŸ›  ç”Ÿäº§çº§é…ç½®ï¼ˆå¸¦é˜²å‘è¡¥ä¸ï¼‰ï¼š</h4>
<pre><code class="hljs language-go" lang="go">server := endless.NewServer(<span class="hljs-string">":8080"</span>, router)

<span class="hljs-comment">// é˜²æ­¢æ…¢å®¢æˆ·ç«¯æ‹–å®æœåŠ¡</span>
server.ReadTimeout = <span class="hljs-number">15</span> * time.Second
server.WriteTimeout = <span class="hljs-number">30</span> * time.Second

<span class="hljs-comment">// å…³é—¨åç­‰å¤šä¹…â€œèµ¶å®¢â€</span>
endless.DefaultHammerTime = <span class="hljs-number">45</span> * time.Second <span class="hljs-comment">// è¶…æ—¶ç›´æ¥ kill -9</span>

<span class="hljs-comment">// ä¼˜é›…æç¤º</span>
server.BeforeBegin = <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(addr <span class="hljs-type">string</span>)</span></span> {
    log.Printf(<span class="hljs-string">"ğŸš€ Gin Server UP on %s | PID: %d"</span>, addr, os.Getpid())
}
</code></pre>
<blockquote>
<p>ğŸ¤¯ <strong>å†·çŸ¥è¯†</strong>ï¼š<code>endless.Kill()</code> å®é™…å‘çš„æ˜¯ <code>SIGQUIT</code>ï¼Œè§¦å‘ <code>fork()</code> + <code>exec()</code> æ–°è¿›ç¨‹ï¼Œå¹¶å…³æ—§é—¨ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">ğŸ¥ˆ <strong>ä¼˜é›…æ´¾ï¼š<code>github.com/gin-contrib/graceful</code></strong></h3>
<blockquote>
<p>â€œGin å®˜æ–¹äº²å„¿å­ï¼Œå¯æƒœæœ€è¿‘æœ‰ç‚¹ä½›â€</p>
</blockquote>
<h4 data-id="heading-7">âš ï¸ æ³¨æ„ï¼š</h4>
<ul>
<li>è¯¥åº“å·²<strong>å¤šå¹´æœªæ›´æ–°</strong>ï¼ˆæœ€å commit æ˜¯ 2018 å¹´ï¼ï¼‰</li>
<li>å…¼å®¹ Go 1.14+ï¼Œä½†æ–°ç‰¹æ€§ï¼ˆå¦‚ <code>http.Server.Shutdown</code> context æ§åˆ¶ï¼‰æ”¯æŒå¼±</li>
</ul>
<pre><code class="hljs language-go" lang="go">router, _ := graceful.Default()
router.GET(<span class="hljs-string">"/ping"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> {
    c.String(<span class="hljs-number">200</span>, <span class="hljs-string">"pong (pid=%d)"</span>, os.Getpid())
})

srv := &amp;http.Server{Addr: <span class="hljs-string">":8080"</span>, Handler: router}
err := router.RunWithContext(srv)
</code></pre>
<blockquote>
<p>ğŸ“Œ <strong>é€‚åˆ</strong>ï¼šè€é¡¹ç›®ç»´æŠ¤ï¼Œä¸æƒ³å¼•å…¥æ–°ä¾èµ–<br/>
ğŸš« <strong>ä¸é€‚åˆ</strong>ï¼šé«˜å¯ç”¨æ–°é¡¹ç›®ï¼Œå»ºè®®ç›´æ¥ <code>endless</code></p>
</blockquote>
<hr/>
<h3 data-id="heading-8">ğŸ¥‰ <strong>æç®€æ´¾ï¼šæ ‡å‡†åº“ <code>http.Server.Shutdown()</code></strong></h3>
<blockquote>
<p>â€œä¸ä¾èµ–ç¬¬ä¸‰æ–¹ï¼Œè‡ªå¸¦äº”é™©ä¸€é‡‘â€</p>
</blockquote>
<pre><code class="hljs language-go" lang="go">srv := &amp;http.Server{Addr: <span class="hljs-string">":8080"</span>, Handler: router}

<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">if</span> err := srv.ListenAndServe(); err != http.ErrServerClosed {
        log.Fatal(err)
    }
}()

<span class="hljs-comment">// ç­‰ä¿¡å·</span>
quit := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> os.Signal, <span class="hljs-number">1</span>)
signal.Notify(quit, syscall.SIGINT, syscall.SIGTERM)
&lt;-quit

<span class="hljs-comment">// å…³é—¨æ¸…åœº</span>
ctx, cancel := context.WithTimeout(context.Background(), <span class="hljs-number">10</span>*time.Second)
<span class="hljs-keyword">defer</span> cancel()
srv.Shutdown(ctx) <span class="hljs-comment">// â† å…³é”®ï¼ç­‰è¯·æ±‚ç»“æŸå† exit</span>
</code></pre>
<blockquote>
<p>âœ… ä¼˜ç‚¹ï¼šé›¶ä¾èµ–ã€å¯æ§æ€§å¼º<br/>
âŒ ç¼ºç‚¹ï¼š<strong>ä¸æ”¯æŒâ€œçƒ­â€é‡å¯</strong>â€”â€”åªèƒ½å…³æ—§å¼€æ–°ï¼Œä¸­é—´æœ‰å‡ ç§’ downtimeï¼</p>
</blockquote>
<hr/>
<h3 data-id="heading-9">ğŸ¥Š <strong>ç¡¬æ ¸æ´¾ï¼šè‡ªå·±æ’¸â€”â€”Master/Worker æ¨¡å¼ï¼ˆä»¿ Nginxï¼‰</strong></h3>
<blockquote>
<p>â€œçœ‹å®Œè¿™æ®µä»£ç ï¼Œä½ å°±æœ‰èµ„æ ¼å«â€˜Go é»‘å®¢â€™â€</p>
</blockquote>
<h4 data-id="heading-10">ä¸ºä»€ä¹ˆéœ€è¦è‡ªå·±å†™ï¼Ÿ</h4>
<ul>
<li>æƒ³æ§åˆ¶å­è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸï¼ˆå´©æºƒè‡ªåŠ¨æ‹‰èµ·ï¼‰</li>
<li>éœ€è¦ç°åº¦å‘å¸ƒã€AB æµ‹è¯•èƒ½åŠ›</li>
<li>è¢«è€æ¿é€¼ç€å†™æŠ€æœ¯æ–¹æ¡ˆ PPT ğŸ˜­</li>
</ul>
<h4 data-id="heading-11">ç²¾ç®€ç‰ˆæ ¸å¿ƒé€»è¾‘ï¼š</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// ä¸»è¿›ç¨‹ï¼šå®ˆé—¨äºº</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">if</span> os.Getenv(<span class="hljs-string">"IS_CHILD"</span>) == <span class="hljs-string">"1"</span> {
        runChild() <span class="hljs-comment">// å­è¿›ç¨‹èµ°è¿™é‡Œ</span>
        <span class="hljs-keyword">return</span>
    }

    listener, _ := net.Listen(<span class="hljs-string">"tcp"</span>, <span class="hljs-string">":8080"</span>)
    
    <span class="hljs-comment">// å¯åŠ¨ç¬¬ä¸€ä¸ªå­è¿›ç¨‹</span>
    startChild(listener)

    <span class="hljs-comment">// ç›‘å¬ä¿¡å·</span>
    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        sig := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> os.Signal, <span class="hljs-number">1</span>)
        signal.Notify(sig, syscall.SIGUSR2)
        <span class="hljs-keyword">for</span> <span class="hljs-keyword">range</span> sig {
            listener2, _ := dupListener(listener) <span class="hljs-comment">// å…‹éš†ç›‘å¬å™¨ï¼</span>
            startChild(listener2) <span class="hljs-comment">// å¯åŠ¨æ–°å­è¿›ç¨‹</span>
            <span class="hljs-comment">// æ—§å­è¿›ç¨‹è‡ªåŠ¨é€€å‡ºï¼ˆé çˆ¶å­è¿›ç¨‹å¿ƒè·³ or SIGTERMï¼‰</span>
        }
    }()

    <span class="hljs-comment">// é˜»å¡ä¸»è¿›ç¨‹</span>
    <span class="hljs-keyword">select</span>{}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">startChild</span><span class="hljs-params">(l net.Listener)</span></span> {
    cmd := exec.Command(os.Args[<span class="hljs-number">0</span>])
    cmd.Env = <span class="hljs-built_in">append</span>(os.Environ(), <span class="hljs-string">"IS_CHILD=1"</span>)
    cmd.ExtraFiles = []*os.File{l.(filer).File()} <span class="hljs-comment">// ä¼  FD=3</span>
    cmd.Start()
}
</code></pre>
<blockquote>
<p>ğŸ”‘ å…³é”®ç‚¹ï¼š</p>
<ul>
<li><code>l.(filer).File()</code> â†’ æ‹¿åˆ°åº•å±‚ <code>*os.File</code></li>
<li><code>cmd.ExtraFiles = [...]</code> â†’ ä¼ ç»™å­è¿›ç¨‹ï¼ˆæˆä¸º FD=3ï¼‰</li>
<li>å­è¿›ç¨‹ä¸­ <code>net.FileListener(os.NewFile(3, ""))</code> æ¥ç®¡</li>
</ul>
</blockquote>
<p>âš ï¸ å®Œæ•´å®ç°è¦è€ƒè™‘ï¼šFD æ³„éœ²ã€åƒµå°¸è¿›ç¨‹å›æ”¶ã€é…ç½®çƒ­é‡è½½â€¦â€¦</p>
<hr/>
<h3 data-id="heading-12">ğŸ® <strong>å¼€å‘æ´¾ï¼š<code>air</code> â€”â€” å†™ä»£ç åƒæ‰“æ¸¸æˆï¼ŒæŒ‰ Ctrl+S=é‡ç”Ÿ</strong></h3>
<blockquote>
<p>â€œæ”¹ä¸€è¡Œä»£ç ï¼ŒæœåŠ¡è‡ªåŠ¨ reloadï¼Œçˆ½è¿‡å–å¯ä¹â€</p>
</blockquote>
<h4 data-id="heading-13">å®‰è£…ï¼ˆä¸‰ç§’æå®šï¼‰ï¼š</h4>
<pre><code class="hljs language-bash" lang="bash">go install github.com/cosmtrek/air@latest
<span class="hljs-comment"># æˆ–ç”¨è„šæœ¬ï¼ˆæ¥è‡ªå®˜æ–¹ install.shï¼‰</span>
curl -sSfL https://raw.githubusercontent.com/cosmtrek/air/master/install.sh | sh -s
</code></pre>
<h4 data-id="heading-14">é…ç½® <code>.air.toml</code>ï¼ˆé‡ç‚¹ï¼ï¼‰ï¼š</h4>
<pre><code class="hljs language-toml" lang="toml"><span class="hljs-section">[build]</span>
<span class="hljs-attr">cmd</span> = <span class="hljs-string">"go build -o ./tmp/app ."</span>
<span class="hljs-attr">bin</span> = <span class="hljs-string">"tmp/app"</span>
<span class="hljs-attr">delay</span> = <span class="hljs-number">1000</span>      <span class="hljs-comment"># æ¯«ç§’ï¼Œé˜²æ‰‹æŠ–è¿ç‚¹</span>
<span class="hljs-attr">send_interrupt</span> = <span class="hljs-literal">true</span>  <span class="hljs-comment"># æ”¹ç”¨ SIGINT è€Œé SIGKILLï¼Œç»™ä¼˜é›…é€€å‡ºæœºä¼šï¼</span>
</code></pre>
<blockquote>
<p>âœ… ä¸ºä»€ä¹ˆ <code>send_interrupt = true</code> å¾ˆé‡è¦ï¼Ÿ<br/>
é»˜è®¤ <code>send_interrupt = false</code> â†’ <code>kill -9</code> ç²—æš´æ€æ­» â†’ <strong>æ•°æ®åº“è¿æ¥æ³„æ¼ï¼</strong><br/>
è®¾ä¸º <code>true</code> â†’ å‘ <code>SIGINT</code> â†’ èµ° <code>Shutdown()</code> é€»è¾‘ â†’ å®‰å…¨ï¼</p>
</blockquote>
<hr/>
<hr/>
<h2 data-id="heading-15">ğŸš¨ å››ã€è¡€æ³ªè¸©å‘å®å½•ï¼ˆé¿é›·æŒ‡å—ï¼‰</h2>



































<table><thead><tr><th>å‘ç‚¹</th><th>ç°è±¡</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>FD æ³„éœ²</strong></td><td>é‡å¯ 10 æ¬¡å <code>lsof -p</code> çˆ†å‡º 30+ ä¸ª socket</td><td>å­è¿›ç¨‹å¯åŠ¨åï¼Œçˆ¶è¿›ç¨‹ <code>f.Close()</code> æ—§ FDï¼</td></tr><tr><td><strong>å…¨å±€å˜é‡æ±¡æŸ“</strong></td><td>é‡å¯åé…ç½®æ²¡æ›´æ–°</td><td>é¿å… <code>var config = loadConf()</code>ï¼Œæ”¹ç”¨ <code>getConfig()</code> å‡½æ•°å¼è¯»å–</td></tr><tr><td><strong>goroutine åƒµå°¸</strong></td><td>æ—§è¯·æ±‚å¡ä½ï¼Œæ–°è¿›ç¨‹èµ·ä¸æ¥</td><td>æ‰€æœ‰è€—æ—¶æ“ä½œå¿…é¡»ä¼  <code>context.WithTimeout</code>ï¼</td></tr><tr><td><strong>Docker ä¿¡å·å¤±æ•ˆ</strong></td><td><code>kill -USR2</code> æ²¡ååº”</td><td>ENTRYPOINT ç”¨ <code>tini</code> æˆ– <code>dumb-init</code> åš PID 1</td></tr><tr><td><strong>TLS è¯ä¹¦ä¸æ›´æ–°</strong></td><td>é‡å¯åè¿˜æ˜¯æ—§è¯ä¹¦</td><td>ç”¨ <code>http.Server.TLSConfig.GetCertificate</code> åŠ¨æ€åŠ è½½</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-16">ğŸŒˆ ç»“è¯­ï¼šä¼˜é›…ï¼Œæ˜¯ç¨‹åºå‘˜çš„ç»ˆææ€§æ„Ÿ</h2>
<blockquote>
<p>ç”¨æˆ·ä¸å…³å¿ƒä½ ç”¨ Go è¿˜æ˜¯ Rustï¼Œ<br/>
ä»–ä»¬åªå…³å¿ƒâ€”â€”<br/>
<strong>â€œæˆ‘ä»˜æ¬¾æ—¶ï¼Œé¡µé¢ä¸ºä»€ä¹ˆå¡äº†ï¼Ÿâ€</strong></p>
<p>çƒ­é‡å¯ä¸æ˜¯ç‚«æŠ€ï¼Œ<br/>
æ˜¯å¯¹ç”¨æˆ·æ—¶é—´çš„å°Šé‡ï¼Œ<br/>
æ˜¯å¯¹çº¿ä¸ŠæœåŠ¡çš„æ•¬ç•ï¼Œ<br/>
æ˜¯æ·±å¤œå€¼ç­æ—¶ï¼Œä½ èƒ½ç¬‘ç€å–å®Œé‚£æ¯å‡‰æ‰çš„å’–å•¡ â˜•ã€‚</p>
</blockquote>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Docker å…¥é—¨å®æˆ˜æ•™ç¨‹ï¼šä»é›¶å¼€å§‹æŒæ¡å®¹å™¨åŒ–æŠ€æœ¯]]></title>    <link>https://juejin.cn/post/7588042910198644786</link>    <guid>https://juejin.cn/post/7588042910198644786</guid>    <pubDate>2025-12-28T01:19:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588042910198644786" data-draft-id="7588073726207442950" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Docker å…¥é—¨å®æˆ˜æ•™ç¨‹ï¼šä»é›¶å¼€å§‹æŒæ¡å®¹å™¨åŒ–æŠ€æœ¯"/> <meta itemprop="keywords" content="Docker"/> <meta itemprop="datePublished" content="2025-12-28T01:19:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ä¸­é£˜è¡çš„è®°å¿†"/> <meta itemprop="url" content="https://juejin.cn/user/694547077666606"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Docker å…¥é—¨å®æˆ˜æ•™ç¨‹ï¼šä»é›¶å¼€å§‹æŒæ¡å®¹å™¨åŒ–æŠ€æœ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547077666606/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ä¸­é£˜è¡çš„è®°å¿†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T01:19:31.000Z" title="Sun Dec 28 2025 01:19:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Docker å…¥é—¨å®æˆ˜æ•™ç¨‹ï¼šä»é›¶å¼€å§‹æŒæ¡å®¹å™¨åŒ–æŠ€æœ¯</h2>
<h3 data-id="heading-1">å¼•è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦ Dockerï¼Ÿ</h3>
<p>åœ¨è½¯ä»¶å¼€å‘çš„ä¸–ç•Œé‡Œï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°è¿™æ ·çš„å›°æ‰°ï¼š"åœ¨æˆ‘çš„ç”µè„‘ä¸Šæ˜æ˜å¯ä»¥è¿è¡Œï¼Œä¸ºä»€ä¹ˆåˆ°æœåŠ¡å™¨ä¸Šå°±æŠ¥é”™äº†ï¼Ÿ"è¿™ä¸ªé—®é¢˜ä¸€ç›´å›°æ‰°ç€æ— æ•°å¼€å‘è€…ã€‚ä¸åŒçš„æ“ä½œç³»ç»Ÿã€ä¸åŒçš„ä¾èµ–åº“ç‰ˆæœ¬ã€ä¸åŒçš„ç¯å¢ƒé…ç½®â€¦â€¦è¿™äº›å·®å¼‚å¯¼è‡´äº†å¼€å‘å’Œéƒ¨ç½²ç¯å¢ƒçš„ä¸ä¸€è‡´ã€‚</p>
<p>è€Œ Docker çš„å‡ºç°ï¼Œå½»åº•æ”¹å˜äº†è¿™ä¸€å±€é¢ã€‚å®ƒè®©åº”ç”¨ç¨‹åºåŠå…¶ä¾èµ–ç¯å¢ƒæ‰“åŒ…æˆä¸€ä¸ªè½»é‡çº§çš„"å®¹å™¨"ï¼Œåœ¨ä»»ä½•æ”¯æŒ Docker çš„å¹³å°ä¸Šéƒ½èƒ½ä»¥ç›¸åŒçš„æ–¹å¼è¿è¡Œã€‚è¿™å°±æ˜¯è‘—åçš„"ä¸€æ¬¡æ„å»ºï¼Œåˆ°å¤„è¿è¡Œ"ï¼ˆBuild Once, Run Anywhereï¼‰ã€‚</p>
<h3 data-id="heading-2">ä¸€ã€Docker æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<h4 data-id="heading-3">1.1 å®¹å™¨æŠ€æœ¯çš„é©å‘½</h4>
<p>Docker æ˜¯ä¸€ä¸ªå¼€æºçš„å®¹å™¨åŒ–å¹³å°ï¼Œå®ƒå¯ä»¥å°†åº”ç”¨ç¨‹åºåŠå…¶ä¾èµ–ç¯å¢ƒæ‰“åŒ…æˆä¸€ä¸ªç‹¬ç«‹çš„å®¹å™¨ã€‚ä¸ä¼ ç»Ÿè™šæ‹Ÿæœºç›¸æ¯”ï¼ŒDocker å®¹å™¨æ›´åŠ è½»é‡ã€å¿«é€Ÿã€é«˜æ•ˆã€‚</p>
<p><strong>ä¼ ç»Ÿè™šæ‹Ÿæœº vs Docker å®¹å™¨ï¼š</strong></p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>è™šæ‹Ÿæœº</th><th>Docker å®¹å™¨</th></tr></thead><tbody><tr><td>å¯åŠ¨é€Ÿåº¦</td><td>åˆ†é’Ÿçº§</td><td>ç§’çº§</td></tr><tr><td>ç£ç›˜å ç”¨</td><td>GB çº§åˆ«</td><td>MB çº§åˆ«</td></tr><tr><td>æ€§èƒ½</td><td>æ¥è¿‘åŸç”Ÿ</td><td>æ¥è¿‘åŸç”Ÿ</td></tr><tr><td>éš”ç¦»æ€§</td><td>å®Œå…¨éš”ç¦»</td><td>è¿›ç¨‹çº§éš”ç¦»</td></tr><tr><td>å¯ç§»æ¤æ€§</td><td>è¾ƒå·®</td><td>ä¼˜ç§€</td></tr></tbody></table>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dd203cf9c7d949b9b8548b6b2e235f41~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767489570&amp;x-signature=OOueUzzcnF79MKFqYbuFjmuS24Q%3D" alt="vm_vs_docker.png" loading="lazy"/></p>
<h4 data-id="heading-4">1.2 Docker çš„æ ¸å¿ƒä¼˜åŠ¿</h4>
<ul>
<li><strong>å¿«é€Ÿéƒ¨ç½²</strong>ï¼šå®¹å™¨å¯åŠ¨åªéœ€å‡ ç§’é’Ÿ</li>
<li><strong>ç¯å¢ƒä¸€è‡´æ€§</strong>ï¼šå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒå®Œå…¨ä¸€è‡´</li>
<li><strong>èµ„æºé«˜æ•ˆ</strong>ï¼šç›¸æ¯”è™šæ‹ŸæœºèŠ‚çœå¤§é‡ç³»ç»Ÿèµ„æº</li>
<li><strong>å¾®æœåŠ¡æ¶æ„</strong>ï¼šå®Œç¾æ”¯æŒå¾®æœåŠ¡éƒ¨ç½²</li>
<li><strong>æŒç»­é›†æˆ/éƒ¨ç½²</strong>ï¼šç®€åŒ– CI/CD æµç¨‹</li>
</ul>
<h3 data-id="heading-5">äºŒã€Docker æ ¸å¿ƒæ¦‚å¿µè¯¦è§£</h3>
<h4 data-id="heading-6">2.1 é•œåƒï¼ˆImageï¼‰</h4>
<p><strong>é•œåƒå°±åƒæ˜¯åº”ç”¨ç¨‹åºçš„"æ¨¡æ¿"æˆ–"è“å›¾"</strong>ã€‚å®ƒæ˜¯ä¸€ä¸ªåªè¯»çš„æ–‡ä»¶åŒ…ï¼ŒåŒ…å«äº†è¿è¡Œåº”ç”¨ç¨‹åºæ‰€éœ€çš„æ‰€æœ‰å†…å®¹ï¼šä»£ç ã€è¿è¡Œæ—¶ã€ç³»ç»Ÿå·¥å…·ã€ç³»ç»Ÿåº“å’Œè®¾ç½®ã€‚</p>
<p><strong>é•œåƒçš„ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>åˆ†å±‚å­˜å‚¨ï¼šæ¯ä¸€å±‚éƒ½æ˜¯åªè¯»çš„</li>
<li>å¯å¤ç”¨ï¼šå¤šä¸ªå®¹å™¨å¯ä»¥å…±äº«åŒä¸€ä¸ªé•œåƒ</li>
<li>ç‰ˆæœ¬ç®¡ç†ï¼šé€šè¿‡æ ‡ç­¾ï¼ˆtagï¼‰ç®¡ç†ä¸åŒç‰ˆæœ¬</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c12e6d2edd44ebaac4ceeedf024515e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767489570&amp;x-signature=uN6%2B3TTV71rXNpPPDvGdsoqj82o%3D" alt="docker_image_layers.png" loading="lazy"/></p>
<p><strong>å¸¸è§é•œåƒç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">nginx:latest          <span class="hljs-comment"># æœ€æ–°ç‰ˆæœ¬çš„ Nginx</span>
python:3.9-slim      <span class="hljs-comment"># Python 3.9 ç²¾ç®€ç‰ˆ</span>
mysql:8.0            <span class="hljs-comment"># MySQL 8.0</span>
ubuntu:20.04         <span class="hljs-comment"># Ubuntu 20.04</span>
</code></pre>
<h4 data-id="heading-7">2.2 å®¹å™¨ï¼ˆContainerï¼‰</h4>
<p><strong>å®¹å™¨æ˜¯é•œåƒçš„è¿è¡Œå®ä¾‹</strong>ã€‚å¦‚æœè¯´é•œåƒæ˜¯"ç±»"ï¼Œé‚£ä¹ˆå®¹å™¨å°±æ˜¯"å¯¹è±¡"ã€‚ä½ å¯ä»¥ä»ä¸€ä¸ªé•œåƒå¯åŠ¨å¤šä¸ªå®¹å™¨ï¼Œæ¯ä¸ªå®¹å™¨éƒ½æ˜¯ç›¸äº’éš”ç¦»çš„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e8b7619961f4ba2948c437b12bc711e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767489570&amp;x-signature=v0y3hNCCVYpznj9qqupNH4scIN8%3D" alt="container_lifecycle.png" loading="lazy"/></p>
<p><strong>å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸï¼š</strong></p>
<ol>
<li><strong>Created</strong>ï¼šå®¹å™¨å·²åˆ›å»ºä½†æœªå¯åŠ¨</li>
<li><strong>Running</strong>ï¼šå®¹å™¨æ­£åœ¨è¿è¡Œ</li>
<li><strong>Paused</strong>ï¼šå®¹å™¨å·²æš‚åœ</li>
<li><strong>Stopped</strong>ï¼šå®¹å™¨å·²åœæ­¢</li>
<li><strong>Deleted</strong>ï¼šå®¹å™¨å·²åˆ é™¤</li>
</ol>
<h4 data-id="heading-8">2.3 ä»“åº“ï¼ˆRegistryï¼‰</h4>
<p><strong>ä»“åº“æ˜¯å­˜æ”¾é•œåƒçš„åœ°æ–¹</strong>ï¼Œå°±åƒä»£ç ä»“åº“å­˜æ”¾ä»£ç ä¸€æ ·ã€‚</p>
<p><strong>å¸¸è§çš„ Docker é•œåƒä»“åº“ï¼š</strong></p>
<ul>
<li><strong>Docker Hub</strong>ï¼šå®˜æ–¹å…¬å…±ä»“åº“ï¼ˆhub.docker.comï¼‰</li>
<li><strong>é˜¿é‡Œäº‘é•œåƒä»“åº“</strong>ï¼šå›½å†…è®¿é—®é€Ÿåº¦å¿«</li>
<li><strong>ç§æœ‰ä»“åº“</strong>ï¼šä¼ä¸šå†…éƒ¨è‡ªå»º</li>
</ul>
<hr/>
<p><strong>Docker æ ¸å¿ƒç»„ä»¶æ¶æ„æ€»è§ˆï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d3dfc756b0514d8686d65a675f44c4c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767489570&amp;x-signature=RWbJAq4Gu01tckxnQeln0vMJIps%3D" alt="docker_architecture.png" loading="lazy"/></p>
<h3 data-id="heading-9">ä¸‰ã€Docker å®‰è£…æŒ‡å—</h3>
<h4 data-id="heading-10">3.1 Windows å®‰è£…</h4>
<p><strong>ç³»ç»Ÿè¦æ±‚ï¼š</strong></p>
<ul>
<li>Windows 10/11 ä¸“ä¸šç‰ˆæˆ–ä¼ä¸šç‰ˆ</li>
<li>å¯ç”¨ Hyper-V å’Œ WSL 2</li>
</ul>
<p><strong>å®‰è£…æ­¥éª¤ï¼š</strong></p>
<ol>
<li>è®¿é—® Docker å®˜ç½‘ä¸‹è½½ Docker Desktop for Windows</li>
<li>åŒå‡»å®‰è£…ç¨‹åºï¼ŒæŒ‰ç…§æç¤ºå®Œæˆå®‰è£…</li>
<li>é‡å¯è®¡ç®—æœº</li>
<li>å¯åŠ¨ Docker Desktop</li>
<li>éªŒè¯å®‰è£…ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">docker --version
docker run hello-world
</code></pre>
<h4 data-id="heading-11">3.2 Linux å®‰è£…ï¼ˆä»¥ Ubuntu ä¸ºä¾‹ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æ›´æ–°åŒ…ç´¢å¼•</span>
sudo apt-get update

<span class="hljs-comment"># 2. å®‰è£…ä¾èµ–åŒ…</span>
sudo apt-get install \
    ca-certificates \
    curl \
    gnupg \
    lsb-release

<span class="hljs-comment"># 3. æ·»åŠ  Docker å®˜æ–¹ GPG å¯†é’¥</span>
sudo <span class="hljs-built_in">mkdir</span> -p /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg

<span class="hljs-comment"># 4. è®¾ç½®ä»“åº“</span>
<span class="hljs-built_in">echo</span> \
  <span class="hljs-string">"deb [arch=<span class="hljs-subst">$(dpkg --print-architecture)</span> signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
  <span class="hljs-subst">$(lsb_release -cs)</span> stable"</span> | sudo <span class="hljs-built_in">tee</span> /etc/apt/sources.list.d/docker.list &gt; /dev/null

<span class="hljs-comment"># 5. å®‰è£… Docker Engine</span>
sudo apt-get update
sudo apt-get install docker-ce docker-ce-cli containerd.io

<span class="hljs-comment"># 6. éªŒè¯å®‰è£…</span>
sudo docker run hello-world
</code></pre>
<p><strong>é…ç½®ç”¨æˆ·ç»„ï¼ˆå… sudoï¼‰ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">sudo usermod -aG docker <span class="hljs-variable">$USER</span>
newgrp docker
</code></pre>
<h3 data-id="heading-12">å››ã€Docker å®æˆ˜æ¼”ç»ƒ</h3>
<h4 data-id="heading-13">4.1 ç¬¬ä¸€ä¸ª Docker å®¹å™¨</h4>
<p>è®©æˆ‘ä»¬ä»æœ€ç®€å•çš„ä¾‹å­å¼€å§‹ï¼Œè¿è¡Œä¸€ä¸ª Nginx Web æœåŠ¡å™¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ‹‰å– Nginx é•œåƒ</span>
docker pull nginx:latest

<span class="hljs-comment"># è¿è¡Œ Nginx å®¹å™¨</span>
docker run -d -p 8080:80 --name my-nginx nginx:latest

<span class="hljs-comment"># æŸ¥çœ‹è¿è¡ŒçŠ¶æ€</span>
docker ps

<span class="hljs-comment"># è®¿é—®æµ‹è¯•</span>
<span class="hljs-comment"># æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:8080</span>
</code></pre>
<p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p>
<ul>
<li><code>-d</code>ï¼šåå°è¿è¡Œ</li>
<li><code>-p 8080:80</code>ï¼šç«¯å£æ˜ å°„ï¼Œå®¿ä¸»æœº8080ç«¯å£æ˜ å°„åˆ°å®¹å™¨80ç«¯å£</li>
<li><code>--name my-nginx</code>ï¼šæŒ‡å®šå®¹å™¨åç§°</li>
</ul>
<h4 data-id="heading-14">4.2 éƒ¨ç½² MySQL æ•°æ®åº“</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿è¡Œ MySQL å®¹å™¨</span>
docker run -d \
  --name mysql-server \
  -e MYSQL_ROOT_PASSWORD=my-secret-pw \
  -e MYSQL_DATABASE=mydb \
  -p 3306:3306 \
  -v mysql-data:/var/lib/mysql \
  mysql:8.0

<span class="hljs-comment"># è¿›å…¥ MySQL å®¹å™¨</span>
docker <span class="hljs-built_in">exec</span> -it mysql-server mysql -uroot -p

<span class="hljs-comment"># æŸ¥çœ‹ MySQL æ—¥å¿—</span>
docker logs mysql-server
</code></pre>
<p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p>
<ul>
<li><code>-e</code>ï¼šè®¾ç½®ç¯å¢ƒå˜é‡</li>
<li><code>-v mysql-data:/var/lib/mysql</code>ï¼šæ•°æ®æŒä¹…åŒ–ï¼Œæ•°æ®å­˜å‚¨åœ¨å‘½åå·ä¸­</li>
</ul>
<h4 data-id="heading-15">4.4 Docker Compose å¤šå®¹å™¨åº”ç”¨</h4>
<p><strong>docker-compose.yml ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3.8'</span>

<span class="hljs-attr">services:</span>
  <span class="hljs-comment"># Web åº”ç”¨</span>
  <span class="hljs-attr">web:</span>
    <span class="hljs-attr">build:</span> <span class="hljs-string">.</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"5000:5000"</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">db</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">DATABASE_URL=mysql://root:my-secret-pw@db:3306/mydb</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">app-network</span>

  <span class="hljs-comment"># æ•°æ®åº“</span>
  <span class="hljs-attr">db:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">mysql:8.0</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">MYSQL_ROOT_PASSWORD:</span> <span class="hljs-string">my-secret-pw</span>
      <span class="hljs-attr">MYSQL_DATABASE:</span> <span class="hljs-string">mydb</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">mysql-data:/var/lib/mysql</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"3306:3306"</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">app-network</span>

  <span class="hljs-comment"># Nginx åå‘ä»£ç†</span>
  <span class="hljs-attr">nginx:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">nginx:latest</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"80:80"</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./nginx.conf:/etc/nginx/nginx.conf</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">web</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">app-network</span>

<span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">mysql-data:</span>

<span class="hljs-attr">networks:</span>
  <span class="hljs-attr">app-network:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">bridge</span>
</code></pre>
<p><strong>å¯åŠ¨æœåŠ¡ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨æ‰€æœ‰æœåŠ¡</span>
docker-compose up -d

<span class="hljs-comment"># æŸ¥çœ‹æœåŠ¡çŠ¶æ€</span>
docker-compose ps

<span class="hljs-comment"># æŸ¥çœ‹æ—¥å¿—</span>
docker-compose logs -f

<span class="hljs-comment"># åœæ­¢æœåŠ¡</span>
docker-compose down
</code></pre>
<h3 data-id="heading-16">äº”ã€Docker å¸¸ç”¨å‘½ä»¤å¤§å…¨</h3>
<h4 data-id="heading-17">5.1 é•œåƒç®¡ç†å‘½ä»¤</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æœç´¢é•œåƒ</span>
docker search nginx

<span class="hljs-comment"># æ‹‰å–é•œåƒ</span>
docker pull nginx:latest

<span class="hljs-comment"># æŸ¥çœ‹æœ¬åœ°é•œåƒ</span>
docker images

<span class="hljs-comment"># åˆ é™¤é•œåƒ</span>
docker rmi nginx:latest

<span class="hljs-comment"># æ„å»ºé•œåƒ</span>
docker build -t myapp:1.0 .

<span class="hljs-comment"># å¯¼å‡ºé•œåƒ</span>
docker save -o myapp.tar myapp:1.0

<span class="hljs-comment"># å¯¼å…¥é•œåƒ</span>
docker load -i myapp.tar

<span class="hljs-comment"># æ ‡è®°é•œåƒ</span>
docker tag myapp:1.0 myapp:latest
</code></pre>
<h4 data-id="heading-18">5.2 å®¹å™¨ç®¡ç†å‘½ä»¤</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿è¡Œå®¹å™¨</span>
docker run [OPTIONS] IMAGE [COMMAND]
docker run -d -p 80:80 --name web nginx

<span class="hljs-comment"># æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨</span>
docker ps

<span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ˆåŒ…æ‹¬å·²åœæ­¢ï¼‰</span>
docker ps -a

<span class="hljs-comment"># åœæ­¢å®¹å™¨</span>
docker stop web

<span class="hljs-comment"># å¯åŠ¨å·²åœæ­¢çš„å®¹å™¨</span>
docker start web

<span class="hljs-comment"># é‡å¯å®¹å™¨</span>
docker restart web

<span class="hljs-comment"># åˆ é™¤å®¹å™¨</span>
docker <span class="hljs-built_in">rm</span> web

<span class="hljs-comment"># å¼ºåˆ¶åˆ é™¤è¿è¡Œä¸­çš„å®¹å™¨</span>
docker <span class="hljs-built_in">rm</span> -f web

<span class="hljs-comment"># æŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯</span>
docker inspect web

<span class="hljs-comment"># æŸ¥çœ‹å®¹å™¨æ—¥å¿—</span>
docker logs web
docker logs -f web  <span class="hljs-comment"># å®æ—¶æŸ¥çœ‹</span>

<span class="hljs-comment"># è¿›å…¥å®¹å™¨</span>
docker <span class="hljs-built_in">exec</span> -it web /bin/bash
</code></pre>
<h4 data-id="heading-19">5.3 æ•°æ®ç®¡ç†å‘½ä»¤</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºæ•°æ®å·</span>
docker volume create my-volume

<span class="hljs-comment"># æŸ¥çœ‹æ•°æ®å·</span>
docker volume <span class="hljs-built_in">ls</span>

<span class="hljs-comment"># æŸ¥çœ‹æ•°æ®å·è¯¦æƒ…</span>
docker volume inspect my-volume

<span class="hljs-comment"># åˆ é™¤æ•°æ®å·</span>
docker volume <span class="hljs-built_in">rm</span> my-volume

<span class="hljs-comment"># åˆ›å»ºå¤‡ä»½</span>
docker run --<span class="hljs-built_in">rm</span> --volumes-from db-container -v $(<span class="hljs-built_in">pwd</span>):/backup \
  ubuntu tar cvf /backup/backup.tar /var/lib/mysql
</code></pre>
<h4 data-id="heading-20">5.4 ç½‘ç»œç®¡ç†å‘½ä»¤</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºç½‘ç»œ</span>
docker network create my-network

<span class="hljs-comment"># æŸ¥çœ‹ç½‘ç»œ</span>
docker network <span class="hljs-built_in">ls</span>

<span class="hljs-comment"># è¿æ¥å®¹å™¨åˆ°ç½‘ç»œ</span>
docker network connect my-network my-container

<span class="hljs-comment"># æ–­å¼€ç½‘ç»œè¿æ¥</span>
docker network disconnect my-network my-container

<span class="hljs-comment"># åˆ é™¤ç½‘ç»œ</span>
docker network <span class="hljs-built_in">rm</span> my-network
</code></pre>
<h3 data-id="heading-21">å…­ã€Docker æ•°æ®æŒä¹…åŒ–</h3>
<h4 data-id="heading-22">6.1 æ•°æ®å·ï¼ˆVolumeï¼‰</h4>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>ç”± Docker ç®¡ç†</li>
<li>å­˜å‚¨åœ¨ Docker ç‰¹å®šç›®å½•</li>
<li>è·¨å¹³å°å…¼å®¹æ€§å¥½</li>
<li>é€‚åˆç”Ÿäº§ç¯å¢ƒ</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºå‘½åå·</span>
docker volume create my-data

<span class="hljs-comment"># ä½¿ç”¨å·</span>
docker run -d -v my-data:/data nginx

<span class="hljs-comment"># æŸ¥çœ‹å·ä¿¡æ¯</span>
docker volume inspect my-data

<span class="hljs-comment"># æ¸…ç†æœªä½¿ç”¨çš„å·</span>
docker volume prune
</code></pre>
<h4 data-id="heading-23">6.2 æŒ‚è½½ç›®å½•ï¼ˆBind Mountï¼‰</h4>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>ç›´æ¥æ˜ å°„å®¿ä¸»æœºç›®å½•</li>
<li>é€‚åˆå¼€å‘ç¯å¢ƒ</li>
<li>å¯ä»¥ç›´æ¥è®¿é—®æ–‡ä»¶</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28ad43036a5646b583e120b08776b66a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767489570&amp;x-signature=55UiLPavgvulyjSBfXL2lSnK3dk%3D" alt="docker_storage_comparison.png" loading="lazy"/></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŒ‚è½½å½“å‰ç›®å½•</span>
docker run -d -v $(<span class="hljs-built_in">pwd</span>)/html:/usr/share/nginx/html nginx

<span class="hljs-comment"># åªè¯»æŒ‚è½½</span>
docker run -d -v $(<span class="hljs-built_in">pwd</span>)/html:/usr/share/nginx/html:ro nginx
</code></pre>
<h3 data-id="heading-24">ä¸ƒã€Docker ç½‘ç»œæ¨¡å¼</h3>
<h4 data-id="heading-25">7.1 ç½‘ç»œæ¨¡å¼ç±»å‹</h4>






























<table><thead><tr><th>æ¨¡å¼</th><th>è¯´æ˜</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>bridge</td><td>é»˜è®¤æ¨¡å¼ï¼Œå®¹å™¨é€šè¿‡è™šæ‹Ÿç½‘æ¡¥é€šä¿¡</td><td>å•æœºå¤šå®¹å™¨é€šä¿¡</td></tr><tr><td>host</td><td>å…±äº«å®¿ä¸»æœºç½‘ç»œ</td><td>é«˜æ€§èƒ½éœ€æ±‚</td></tr><tr><td>none</td><td>æ— ç½‘ç»œé…ç½®</td><td>ç¦»çº¿å¤„ç†ä»»åŠ¡</td></tr><tr><td>container</td><td>å…±äº«å…¶ä»–å®¹å™¨ç½‘ç»œ</td><td>å®¹å™¨é—´åä½œ</td></tr></tbody></table>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9706c9ba65d94e3e959d0c8e44eb2e42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767489570&amp;x-signature=%2B1i0xIx%2Bcdyf30sS6Am5qJ5Zl%2FA%3D" alt="docker_network_modes.png" loading="lazy"/></p>
<h4 data-id="heading-26">7.2 ç½‘ç»œé…ç½®ç¤ºä¾‹</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºè‡ªå®šä¹‰ç½‘ç»œ</span>
docker network create --driver bridge my-network

<span class="hljs-comment"># è¿è¡Œå®¹å™¨å¹¶è¿æ¥åˆ°ç½‘ç»œ</span>
docker run -d --name web1 --network my-network nginx
docker run -d --name web2 --network my-network nginx

<span class="hljs-comment"># å®¹å™¨å¯ä»¥é€šè¿‡å®¹å™¨åäº’ç›¸è®¿é—®</span>
docker <span class="hljs-built_in">exec</span> web1 ping web2
</code></pre>
<h3 data-id="heading-27">å…«ã€Docker å®‰å…¨æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-28">8.1 é•œåƒå®‰å…¨</h4>
<pre><code class="hljs language-dockerfile" lang="dockerfile"># ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬æ ‡ç­¾ï¼Œä¸ä½¿ç”¨ latest
FROM python:3.9-slim

# ä½¿ç”¨é root ç”¨æˆ·
RUN useradd -m myuser
USER myuser

# æœ€å°åŒ–å®‰è£…
RUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends \
    curl \
    &amp;&amp; rm -rf /var/lib/apt/lists/*

# æ‰«æé•œåƒæ¼æ´
# docker scan myapp:1.0
</code></pre>
<h4 data-id="heading-29">8.2 è¿è¡Œæ—¶å®‰å…¨</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é™åˆ¶å®¹å™¨èµ„æº</span>
docker run -d \
  --memory=<span class="hljs-string">"512m"</span> \
  --cpus=<span class="hljs-string">"1.0"</span> \
  --read-only \
  --security-opt=no-new-privileges \
  nginx

<span class="hljs-comment"># ä½¿ç”¨ rootless æ¨¡å¼</span>
<span class="hljs-comment"># é¿å… root ç”¨æˆ·è¿è¡Œå®¹å™¨</span>
</code></pre>
<h3 data-id="heading-30">ä¹ã€å®æˆ˜é¡¹ç›®ï¼šä¸ªäººåšå®¢ç³»ç»Ÿ</h3>
<h4 data-id="heading-31">9.1 é¡¹ç›®æ¶æ„</h4>
<p>æˆ‘ä»¬å°†éƒ¨ç½²ä¸€ä¸ªå®Œæ•´çš„åšå®¢ç³»ç»Ÿï¼ŒåŒ…å«ï¼š</p>
<ul>
<li>WordPressï¼ˆå‰ç«¯ï¼‰</li>
<li>MySQLï¼ˆæ•°æ®åº“ï¼‰</li>
<li>Nginxï¼ˆåå‘ä»£ç†ï¼‰</li>
</ul>
<h4 data-id="heading-32">9.2 docker-compose.yml é…ç½®</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3.8'</span>

<span class="hljs-attr">services:</span>
  <span class="hljs-comment"># æ•°æ®åº“æœåŠ¡</span>
  <span class="hljs-attr">database:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">mysql:8.0</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">blog-mysql</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">MYSQL_ROOT_PASSWORD:</span> <span class="hljs-string">rootpassword</span>
      <span class="hljs-attr">MYSQL_DATABASE:</span> <span class="hljs-string">wordpress</span>
      <span class="hljs-attr">MYSQL_USER:</span> <span class="hljs-string">wpuser</span>
      <span class="hljs-attr">MYSQL_PASSWORD:</span> <span class="hljs-string">wppassword</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">db-data:/var/lib/mysql</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">blog-network</span>

  <span class="hljs-comment"># WordPress æœåŠ¡</span>
  <span class="hljs-attr">wordpress:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">wordpress:latest</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">blog-wordpress</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">database</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">WORDPRESS_DB_HOST:</span> <span class="hljs-string">database:3306</span>
      <span class="hljs-attr">WORDPRESS_DB_USER:</span> <span class="hljs-string">wpuser</span>
      <span class="hljs-attr">WORDPRESS_DB_PASSWORD:</span> <span class="hljs-string">wppassword</span>
      <span class="hljs-attr">WORDPRESS_DB_NAME:</span> <span class="hljs-string">wordpress</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">wp-data:/var/www/html</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"8080:80"</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">blog-network</span>

  <span class="hljs-comment"># phpMyAdminï¼ˆå¯é€‰ï¼‰</span>
  <span class="hljs-attr">phpmyadmin:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">phpmyadmin/phpmyadmin</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">blog-phpmyadmin</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">database</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">PMA_HOST:</span> <span class="hljs-string">database</span>
      <span class="hljs-attr">PMA_PORT:</span> <span class="hljs-number">3306</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"8081:80"</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">blog-network</span>

<span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">db-data:</span>
  <span class="hljs-attr">wp-data:</span>

<span class="hljs-attr">networks:</span>
  <span class="hljs-attr">blog-network:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">bridge</span>
</code></pre>
<h4 data-id="heading-33">9.3 éƒ¨ç½²æ­¥éª¤</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å…‹éš†é…ç½®æ–‡ä»¶</span>
<span class="hljs-built_in">mkdir</span> blog &amp;&amp; <span class="hljs-built_in">cd</span> blog

<span class="hljs-comment"># 2. åˆ›å»º docker-compose.yml</span>
<span class="hljs-comment"># ï¼ˆå°†ä¸Šé¢çš„é…ç½®ä¿å­˜ä¸º docker-compose.ymlï¼‰</span>

<span class="hljs-comment"># 3. å¯åŠ¨æœåŠ¡</span>
docker-compose up -d

<span class="hljs-comment"># 4. æŸ¥çœ‹æœåŠ¡çŠ¶æ€</span>
docker-compose ps

<span class="hljs-comment"># 5. è®¿é—®åšå®¢</span>
<span class="hljs-comment"># æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:8080</span>
<span class="hljs-comment"># é¦–æ¬¡è®¿é—®ä¼šè¿›å…¥ WordPress å®‰è£…å‘å¯¼</span>

<span class="hljs-comment"># 6. è®¿é—® phpMyAdmin</span>
<span class="hljs-comment"># http://localhost:8081</span>
<span class="hljs-comment"># ç”¨æˆ·åï¼šroot</span>
<span class="hljs-comment"># å¯†ç ï¼šrootpassword</span>
</code></pre>
<h3 data-id="heading-34">åã€Docker æ•…éšœæ’æŸ¥</h3>
<h4 data-id="heading-35">10.1 å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</h4>
<p><strong>é—®é¢˜ 1ï¼šå®¹å™¨æ— æ³•å¯åŠ¨</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹å®¹å™¨æ—¥å¿—</span>
docker logs &lt;container-id&gt;

<span class="hljs-comment"># æŸ¥çœ‹å®¹å™¨è¯¦æƒ…</span>
docker inspect &lt;container-id&gt;

<span class="hljs-comment"># å°è¯•äº¤äº’å¼è¿è¡Œ</span>
docker run -it &lt;image&gt; /bin/bash
</code></pre>
<p><strong>é—®é¢˜ 2ï¼šç«¯å£å†²çª</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹ç«¯å£å ç”¨</span>
netstat -tunlp | grep &lt;port&gt;

<span class="hljs-comment"># æ›´æ”¹ç«¯å£æ˜ å°„</span>
docker run -p 8081:80 nginx  <span class="hljs-comment"># ä½¿ç”¨å…¶ä»–ç«¯å£</span>
</code></pre>
<p><strong>é—®é¢˜ 3ï¼šç£ç›˜ç©ºé—´ä¸è¶³</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ¸…ç†æœªä½¿ç”¨çš„é•œåƒ</span>
docker image prune -a

<span class="hljs-comment"># æ¸…ç†æœªä½¿ç”¨çš„å®¹å™¨</span>
docker container prune

<span class="hljs-comment"># æ¸…ç†æœªä½¿ç”¨çš„å·</span>
docker volume prune

<span class="hljs-comment"># ä¸€é”®æ¸…ç†</span>
docker system prune -a --volumes
</code></pre>
<p><strong>é—®é¢˜ 4ï¼šç½‘ç»œè¿æ¥é—®é¢˜</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥ç½‘ç»œé…ç½®</span>
docker network inspect &lt;network-name&gt;

<span class="hljs-comment"># é‡å»ºç½‘ç»œ</span>
docker network <span class="hljs-built_in">rm</span> &lt;network-name&gt;
docker network create &lt;network-name&gt;
</code></pre>
<h4 data-id="heading-36">10.2 è°ƒè¯•æŠ€å·§</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹å®¹å™¨èµ„æºä½¿ç”¨æƒ…å†µ</span>
docker stats

<span class="hljs-comment"># æŸ¥çœ‹å®¹å™¨è¿›ç¨‹</span>
docker top &lt;container-id&gt;

<span class="hljs-comment"># å®æ—¶æŸ¥çœ‹æ—¥å¿—</span>
docker logs -f --<span class="hljs-built_in">tail</span> 100 &lt;container-id&gt;

<span class="hljs-comment"># å¯¼å‡ºå®¹å™¨æ–‡ä»¶ç³»ç»Ÿ</span>
docker <span class="hljs-built_in">export</span> &lt;container-id&gt; &gt; container.tar
</code></pre>
<h3 data-id="heading-37">åä¸€ã€æ€»ç»“</h3>
<p>Docker ä½œä¸ºå®¹å™¨åŒ–æŠ€æœ¯çš„ä»£è¡¨ï¼Œå·²ç»å½»åº•æ”¹å˜äº†è½¯ä»¶å¼€å‘å’Œéƒ¨ç½²çš„æ–¹å¼ã€‚é€šè¿‡æœ¬æ–‡çš„å­¦ä¹ ï¼Œä½ å·²ç»æŒæ¡äº†ï¼š</p>
<p>âœ… Docker çš„æ ¸å¿ƒæ¦‚å¿µï¼ˆé•œåƒã€å®¹å™¨ã€ä»“åº“ï¼‰
âœ… Docker çš„å®‰è£…æ–¹æ³•
âœ… å¸¸ç”¨å‘½ä»¤çš„ä½¿ç”¨
âœ… Dockerfile çš„ç¼–å†™æŠ€å·§
âœ… æ•°æ®æŒä¹…åŒ–å’Œç½‘ç»œé…ç½®
âœ… å®æˆ˜é¡¹ç›®éƒ¨ç½²ç»éªŒ</p>
<p>è®°ä½ï¼š<strong>Docker çš„å­¦ä¹ æ›²çº¿ä¸ç®—é™¡å³­ï¼Œå…³é”®åœ¨äºå¤šåŠ¨æ‰‹å®è·µ</strong>ã€‚æ¯ä¸€ä¸ªå‘½ä»¤ã€æ¯ä¸€ä¸ªé…ç½®ï¼Œéƒ½éœ€è¦åœ¨å®æˆ˜ä¸­æ‰èƒ½çœŸæ­£ç†è§£å’ŒæŒæ¡ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringBoot æ•´åˆ Nacosï¼Œè®©å¾®æœåŠ¡åƒå¤–å–ç‚¹å•ä¸€æ ·ç®€å•]]></title>    <link>https://juejin.cn/post/7588095884070338560</link>    <guid>https://juejin.cn/post/7588095884070338560</guid>    <pubDate>2025-12-28T02:31:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588095884070338560" data-draft-id="7588092534162423808" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringBoot æ•´åˆ Nacosï¼Œè®©å¾®æœåŠ¡åƒå¤–å–ç‚¹å•ä¸€æ ·ç®€å•"/> <meta itemprop="keywords" content="åç«¯,Java,Spring Boot"/> <meta itemprop="datePublished" content="2025-12-28T02:31:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‚Ÿç©ºç å­—"/> <meta itemprop="url" content="https://juejin.cn/user/3139860942296830"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringBoot æ•´åˆ Nacosï¼Œè®©å¾®æœåŠ¡åƒå¤–å–ç‚¹å•ä¸€æ ·ç®€å•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3139860942296830/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‚Ÿç©ºç å­—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T02:31:25.000Z" title="Sun Dec 28 2025 02:31:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°æ‚Ÿã€‚</p>
<h2 data-id="heading-0">ğŸ¤” Nacos æ˜¯ä»€ä¹ˆï¼Ÿè®©æˆ‘ä»¬ç”¨å¤–å–æ¥ç†è§£ï¼</h2>
<p>å‡å¦‚ä½ æ˜¯ä¸ªåƒè´§ï¼ˆç¨‹åºå‘˜ï¼‰ï¼Œåœ¨ç¾é£Ÿå¹¿åœºï¼ˆå¾®æœåŠ¡æ¶æ„ï¼‰é‡Œï¼š</p>
<p><strong>æ²¡æœ‰ Nacos çš„æƒ…å†µï¼š</strong></p>
<ul>
<li>"è€æ¿ï¼Œçº¢çƒ§è‚‰åœ¨å“ªå®¶åº—ï¼Ÿ" "ä¸çŸ¥é“"</li>
<li>"å¥¶èŒ¶åº—ç”µè¯å¤šå°‘ï¼Ÿ" "æˆ‘æ‰¾æ‰¾å°çº¸æ¡..."</li>
<li>"è¿™å®¶åº—æ¬èµ°äº†ï¼Ÿæ€ä¹ˆä¸å‘Šè¯‰æˆ‘ï¼"</li>
</ul>
<p><strong>æœ‰äº† Nacos çš„æƒ…å†µï¼š</strong></p>
<ul>
<li>Nacos å°±åƒç¾é£Ÿå¹¿åœºçš„<strong>æ™ºèƒ½å¤§å±å¹• + å¹¿æ’­ç³»ç»Ÿ</strong></li>
<li>æ‰€æœ‰åº—é“ºï¼ˆæœåŠ¡ï¼‰è‡ªåŠ¨ç™»è®°ï¼š"æˆ‘æ˜¯å–å¥¶èŒ¶çš„ï¼Œä½ç½®åœ¨AåŒº3å·"</li>
<li>æƒ³å–å¥¶èŒ¶ï¼Ÿçœ‹å±å¹•ï¼ˆæœåŠ¡å‘ç°ï¼‰ç›´æ¥å»</li>
<li>åº—é“ºæ‰“çƒŠï¼Ÿè‡ªåŠ¨å¹¿æ’­ï¼ˆæœåŠ¡ä¸‹çº¿ï¼‰é€šçŸ¥å¤§å®¶</li>
<li>è¿˜èƒ½å‘Šè¯‰ä½ ï¼š"ä»Šå¤©å¥¶èŒ¶åŠä»·ï¼"ï¼ˆé…ç½®ç®¡ç†ï¼‰</li>
</ul>
<p>ç®€å•è¯´ï¼Œ<strong>Nacos = æœåŠ¡æ³¨å†Œä¸­å¿ƒ + é…ç½®ä¸­å¿ƒ</strong>ï¼Œå¾®æœåŠ¡çš„"å±…å§”ä¼šå¤§å¦ˆ"â€”â€”å•¥éƒ½çŸ¥é“ï¼Œå•¥éƒ½ç®¡ï¼</p>
<hr/>
<h2 data-id="heading-1">ğŸš€ æ•´åˆæ­¥éª¤ï¼šè®©æˆ‘ä»¬å¼€å§‹"ç»„è£…"å§ï¼</h2>
<h3 data-id="heading-2">ç¬¬1æ­¥ï¼šå…ˆæ¥ç‚¹"å¼€èƒƒèœ"â€”â€”ç¯å¢ƒå‡†å¤‡</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å®‰è£…Nacosï¼ˆæ¯”æ³¡é¢è¿˜ç®€å•ï¼‰</span>
<span class="hljs-comment"># ä¸‹è½½åœ°å€ï¼šhttps://github.com/alibaba/nacos/releases</span>
<span class="hljs-comment"># è§£å‹åï¼Œå•æœºæ¨¡å¼å¯åŠ¨ï¼š</span>
sh nacos/bin/startup.sh -m standalone  <span class="hljs-comment"># Linux/Mac</span>
cmd nacos/bin/startup.cmd -m standalone  <span class="hljs-comment"># Windows</span>

<span class="hljs-comment"># è®¿é—® http://localhost:8848/nacos</span>
<span class="hljs-comment"># è´¦å·/å¯†ç ï¼šnacos/nacos</span>
<span class="hljs-comment"># çœ‹åˆ°ç™»å½•é¡µé¢ï¼Ÿæ­å–œï¼Nacoså¯åŠ¨æˆåŠŸï¼</span>
</code></pre>
<h3 data-id="heading-3">ç¬¬2æ­¥ï¼šåˆ›å»ºSpringBooté¡¹ç›®ï¼ˆæˆ‘ä»¬çš„"ç¾é£Ÿæ‘Šä½"ï¼‰</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- pom.xml æ·»åŠ è¿™äº›ä¾èµ–ï¼ˆæˆ‘ä»¬çš„"é£Ÿææ¸…å•"ï¼‰--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- SpringBootåŸºç¡€å¥—é¤ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- NacosæœåŠ¡å‘ç°ï¼ˆæ‰¾åº—é“ºåŠŸèƒ½ï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2021.0.5.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- Nacosé…ç½®ä¸­å¿ƒï¼ˆçœ‹èœå•åŠŸèƒ½ï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2021.0.5.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å¥åº·æ£€æŸ¥ï¼ˆçœ‹çœ‹æ‘Šä½è¿˜è¥ä¸šå—ï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h3 data-id="heading-4">ç¬¬3æ­¥ï¼šé…ç½®æ–‡ä»¶ï¼ˆæˆ‘ä»¬çš„"æ‘Šä½è£…ä¿®æ–¹æ¡ˆ"ï¼‰</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># bootstrap.ymlï¼ˆä¼˜å…ˆçº§é«˜ï¼Œå…ˆåŠ è½½ï¼‰</span>
<span class="hljs-comment"># è¿™ä¸ªæ–‡ä»¶ä¸“é—¨ç”¨æ¥å’ŒNacos"æ‰“æ‹›å‘¼"</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">application:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">foodie-service</span>  <span class="hljs-comment"># ç»™æœåŠ¡èµ·ä¸ªåï¼Œæˆ‘æ˜¯"åƒè´§æœåŠ¡"</span>
  <span class="hljs-attr">cloud:</span>
    <span class="hljs-attr">nacos:</span>
      <span class="hljs-attr">discovery:</span>
        <span class="hljs-attr">server-addr:</span> <span class="hljs-string">localhost:8848</span>  <span class="hljs-comment"># Nacoså±…å§”ä¼šåœ°å€</span>
        <span class="hljs-attr">group:</span> <span class="hljs-string">DEFAULT_GROUP</span>         <span class="hljs-comment"># é»˜è®¤åˆ†ç»„ï¼ˆå°±åƒ"ä¸­é¤åŒº"ï¼‰</span>
        <span class="hljs-attr">namespace:</span> <span class="hljs-string">public</span>            <span class="hljs-comment"># å‘½åç©ºé—´ï¼ˆ"ç¾é£Ÿå¹¿åœºä¸€æ¥¼"ï¼‰</span>
        <span class="hljs-attr">ephemeral:</span> <span class="hljs-literal">true</span>              <span class="hljs-comment"># ä¸´æ—¶å®ä¾‹ï¼ˆæ‘†æ‘Šçš„ï¼Œéšæ—¶å¯èƒ½æ”¶æ‘Šï¼‰</span>
        
      <span class="hljs-attr">config:</span>
        <span class="hljs-attr">server-addr:</span> <span class="hljs-string">localhost:8848</span>  <span class="hljs-comment"># é…ç½®ä¸­å¿ƒä¹Ÿæ‰¾åŒä¸€ä¸ªNacos</span>
        <span class="hljs-attr">file-extension:</span> <span class="hljs-string">yaml</span>         <span class="hljs-comment"># é…ç½®æ ¼å¼ç”¨yamlï¼ˆèœå•ç”¨ä¸­æ–‡å†™ï¼‰</span>
        <span class="hljs-attr">group:</span> <span class="hljs-string">DEFAULT_GROUP</span>
        <span class="hljs-attr">namespace:</span> <span class="hljs-string">public</span>
        <span class="hljs-attr">refresh-enabled:</span> <span class="hljs-literal">true</span>        <span class="hljs-comment"># åŠ¨æ€åˆ·æ–°ï¼ˆèœå•æ”¹äº†é©¬ä¸ŠçŸ¥é“ï¼‰</span>
        
  <span class="hljs-attr">config:</span>
    <span class="hljs-attr">import:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">optional:nacos:${spring.application.name}.${spring.cloud.nacos.config.file-extension}</span>
      <span class="hljs-comment"># è¿™å¥è¯æ„æ€æ˜¯ï¼š"Nacoså¤§å¦ˆï¼Œæˆ‘è¦è¯»å–æˆ‘çš„é…ç½®æ–‡ä»¶ï¼"</span>

<span class="hljs-comment"># application.ymlï¼ˆå¸¸è§„é…ç½®ï¼‰</span>
<span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span>  <span class="hljs-comment"># æˆ‘çš„æ‘Šä½åœ¨8080å·ä½ç½®</span>

<span class="hljs-attr">management:</span>
  <span class="hljs-attr">endpoints:</span>
    <span class="hljs-attr">web:</span>
      <span class="hljs-attr">exposure:</span>
        <span class="hljs-attr">include:</span> <span class="hljs-string">"*"</span>  <span class="hljs-comment"># æš´éœ²å¥åº·æ£€æŸ¥ç«¯ç‚¹ï¼ˆå‘Šè¯‰å¤§å®¶æˆ‘è¿˜æ´»ç€ï¼‰</span>
</code></pre>
<h3 data-id="heading-5">ç¬¬4æ­¥ï¼šä¸»å¯åŠ¨ç±»ï¼ˆ"æ‘Šä½å¼€å¼ ä»ªå¼"ï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;
<span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;
<span class="hljs-keyword">import</span> org.springframework.cloud.client.discovery.EnableDiscoveryClient;

<span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-meta">@EnableDiscoveryClient  // å¼€å¯æœåŠ¡å‘ç°ï¼ˆä¸¾èµ·ç‰Œå­ï¼š<span class="hljs-string">"æˆ‘å¼€å¼ å•¦ï¼"</span>ï¼‰</span>
public <span class="hljs-keyword">class</span> <span class="hljs-title class_">FoodieApplication</span> {
    public static void main(String[] args) {
        SpringApplication.run(FoodieApplication.<span class="hljs-keyword">class</span>, args);
        System.out.println(<span class="hljs-string">"""
            ğŸ‰ åƒè´§æœåŠ¡å¯åŠ¨æˆåŠŸï¼
            ğŸ“ æ‘Šä½å·ï¼š8080
            ğŸ“¢ å·²å‘Nacoså±…å§”ä¼šç™»è®°
            ğŸ” å¼€å§‹è¥ä¸šï¼
            """</span>);
    }
}
</code></pre>
<h3 data-id="heading-6">ç¬¬5æ­¥ï¼šå†™ä¸ªControllerï¼ˆ"åˆ¶ä½œç¾é£Ÿ"ï¼‰</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> org.springframework.beans.factory.<span class="hljs-keyword">annotation</span>.Value;
<span class="hljs-keyword">import</span> org.springframework.cloud.context.config.<span class="hljs-keyword">annotation</span>.RefreshScope;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.GetMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.RestController;

<span class="hljs-keyword">import</span> javax.<span class="hljs-keyword">annotation</span>.PostConstruct;

<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RefreshScope</span>  <span class="hljs-comment">// è¿™ä¸ªæ³¨è§£è®©é…ç½®åŠ¨æ€åˆ·æ–°ï¼ˆèœå•æ”¹äº†ç«‹å³ç”Ÿæ•ˆï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FoodController</span> {
    
    <span class="hljs-meta">@Value(<span class="hljs-string">"<span class="hljs-subst">${food.special:çº¢çƒ§è‚‰}</span>"</span>)</span>  <span class="hljs-comment">// é»˜è®¤å€¼çº¢çƒ§è‚‰</span>
    <span class="hljs-keyword">private</span> String specialFood;
    
    <span class="hljs-meta">@Value(<span class="hljs-string">"<span class="hljs-subst">${food.price:<span class="hljs-number">25</span>}</span>"</span>)</span>
    <span class="hljs-keyword">private</span> Integer price;
    
    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> void <span class="hljs-keyword">init</span>() {
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"ä»Šæ—¥ç‰¹ä»·ï¼š"</span> + specialFood + <span class="hljs-string">"ï¼Œä»…å”®"</span> + price + <span class="hljs-string">"å…ƒï¼"</span>);
    }
    
    <span class="hljs-meta">@GetMapping(<span class="hljs-string">"/order"</span>)</span>
    <span class="hljs-keyword">public</span> String order() {
        <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"""
            ğŸ½ï¸ è®¢å•è¯¦æƒ…ï¼š
            èœå“ï¼š%s
            ä»·æ ¼ï¼š%då…ƒ
            åˆ¶ä½œä¸­...è¯·ç¨å€™ï¼
            ï¼ˆæœ¬æ¶ˆæ¯æ¥è‡ªæœåŠ¡ï¼š%sï¼‰
            """</span>, specialFood, price, <span class="hljs-string">"åƒè´§æœåŠ¡"</span>);
    }
    
    <span class="hljs-meta">@GetMapping(<span class="hljs-string">"/health"</span>)</span>
    <span class="hljs-keyword">public</span> String health() {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"âœ… æœ¬æ‘Šä½è¥ä¸šä¸­ï¼Œæ¬¢è¿å…‰ä¸´ï¼"</span>;
    }
}
</code></pre>
<h3 data-id="heading-7">ç¬¬6æ­¥ï¼šåœ¨Nacosæ·»åŠ é…ç½®ï¼ˆ"åˆ¶ä½œèœå•"ï¼‰</h3>
<ol>
<li>è®¿é—® <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8848%2Fnacos" target="_blank" title="http://localhost:8848/nacos" ref="nofollow noopener noreferrer">http://localhost:8848/nacos</a></li>
<li>è¿›å…¥ <strong>é…ç½®ç®¡ç† â†’ é…ç½®åˆ—è¡¨</strong></li>
<li>ç‚¹å‡» <strong>+</strong> æ–°å»ºé…ç½®ï¼š</li>
</ol>

<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Data ID:</span> <span class="hljs-string">foodie-service.yaml</span>  <span class="hljs-comment"># å¿…é¡»å’Œbootstrap.ymlé‡Œçš„ä¸€è‡´</span>
<span class="hljs-attr">Group:</span> <span class="hljs-string">DEFAULT_GROUP</span>
<span class="hljs-string">é…ç½®æ ¼å¼:</span> <span class="hljs-string">YAML</span>
<span class="hljs-string">é…ç½®å†…å®¹:</span>
<span class="hljs-attr">food:</span>
  <span class="hljs-attr">special:</span> <span class="hljs-string">"éº»è¾£å°é¾™è™¾"</span>  <span class="hljs-comment"># ä»Šæ—¥ç‰¹ä»·èœ</span>
  <span class="hljs-attr">price:</span> <span class="hljs-number">88</span>             <span class="hljs-comment"># ç‰¹ä»·</span>
  <span class="hljs-attr">discount:</span> <span class="hljs-string">"8æŠ˜"</span>       <span class="hljs-comment"># æŠ˜æ‰£ä¿¡æ¯</span>

<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">profiles:</span>
    <span class="hljs-attr">active:</span> <span class="hljs-string">dev</span>        <span class="hljs-comment"># ç¯å¢ƒé…ç½®</span>
</code></pre>
<h3 data-id="heading-8">ç¬¬7æ­¥ï¼šæµ‹è¯•ä¸€ä¸‹ï¼ˆ"é¡¾å®¢ç‚¹å•"ï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å¯åŠ¨SpringBootåº”ç”¨</span>
<span class="hljs-comment"># 2. æŸ¥çœ‹Nacosæ§åˆ¶å° - æœåŠ¡ç®¡ç† - æœåŠ¡åˆ—è¡¨</span>
<span class="hljs-comment">#    åº”è¯¥èƒ½çœ‹åˆ° foodie-serviceï¼ŒçŠ¶æ€ä¸º"å¥åº·"</span>
<span class="hljs-comment"># 3. è®¿é—®æµ‹è¯•ï¼š</span>
curl http://localhost:8080/order

<span class="hljs-comment"># è¾“å‡ºåº”è¯¥æ˜¾ç¤º"éº»è¾£å°é¾™è™¾"ï¼Œä»·æ ¼88å…ƒ</span>
<span class="hljs-comment"># è€Œä¸æ˜¯é»˜è®¤çš„çº¢çƒ§è‚‰25å…ƒï¼</span>

<span class="hljs-comment"># 4. åŠ¨æ€åˆ·æ–°æµ‹è¯•ï¼š</span>
<span class="hljs-comment">#    å»Nacosä¿®æ”¹é…ç½®ï¼ŒæŠŠpriceæ”¹æˆ66</span>
<span class="hljs-comment">#    ä¸ç”¨é‡å¯æœåŠ¡ï¼Œç›´æ¥å†æ¬¡è®¿é—®ï¼š</span>
curl http://localhost:8080/order
<span class="hljs-comment">#    ä»·æ ¼å·²ç»å˜æˆ66äº†ï¼ç¥å¥‡å§ï¼Ÿ</span>
</code></pre>
<h3 data-id="heading-9">ç¬¬8æ­¥ï¼šæœåŠ¡å‘ç°ï¼ˆ"æ‰¾å…¶ä»–æ‘Šä½"ï¼‰</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> org.springframework.beans.factory.<span class="hljs-keyword">annotation</span>.Autowired;
<span class="hljs-keyword">import</span> org.springframework.cloud.client.discovery.DiscoveryClient;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.GetMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.RestController;
<span class="hljs-keyword">import</span> org.springframework.web.client.RestTemplate;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FindRestaurantController</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> DiscoveryClient discoveryClient;
    
    <span class="hljs-meta">@GetMapping(<span class="hljs-string">"/find/drinks"</span>)</span>
    <span class="hljs-keyword">public</span> String findDrinkShop() {
        <span class="hljs-comment">// å‘ç°æ‰€æœ‰æœåŠ¡</span>
        List&lt;String&gt; services = discoveryClient.getServices();
        
        <span class="hljs-comment">// è¿‡æ»¤å‡ºé¥®æ–™ç›¸å…³çš„æœåŠ¡ï¼ˆå®é™…é¡¹ç›®ä¼šç”¨æ›´å¤æ‚çš„é€»è¾‘ï¼‰</span>
        List&lt;ServiceInstance&gt; instances = discoveryClient.getInstances(<span class="hljs-string">"drink-service"</span>);
        
        <span class="hljs-keyword">if</span> (!instances.isEmpty()) {
            String url = instances.<span class="hljs-keyword">get</span>(<span class="hljs-number">0</span>).getUri() + <span class="hljs-string">"/menu"</span>;
            <span class="hljs-keyword">return</span> new RestTemplate().getForObject(url, String.<span class="hljs-keyword">class</span>);
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-string">"æ²¡æœ‰æ‰¾åˆ°é¥®æ–™åº—ï¼ŒNacoså±…å§”ä¼šä¹Ÿä¸çŸ¥é“åœ¨å“ªğŸ˜¢"</span>;
    }
}
</code></pre>
<h2 data-id="heading-10">ğŸ¯ é«˜çº§ç©æ³•</h2>
<h3 data-id="heading-11">å¤šç¯å¢ƒé…ç½®ï¼ˆ"åˆ†æ¥¼å±‚ç»è¥"ï¼‰</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># Nacosä¸­å¯ä»¥åˆ›å»ºä¸åŒå‘½åç©ºé—´</span>
<span class="hljs-comment"># 1. å‘½åç©ºé—´ç®¡ç† â†’ æ–°å»ºå‘½åç©ºé—´</span>
<span class="hljs-comment">#    dev: å¼€å‘ç¯å¢ƒï¼ˆä¸€æ¥¼è¯•è¥ä¸šï¼‰</span>
<span class="hljs-comment">#    test: æµ‹è¯•ç¯å¢ƒï¼ˆäºŒæ¥¼å†…æµ‹ï¼‰</span>
<span class="hljs-comment">#    prod: ç”Ÿäº§ç¯å¢ƒï¼ˆä¸‰æ¥¼æ­£å¼è¥ä¸šï¼‰</span>

<span class="hljs-comment"># bootstrap.yml åˆ‡æ¢ç¯å¢ƒï¼š</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">cloud:</span>
    <span class="hljs-attr">nacos:</span>
      <span class="hljs-attr">config:</span>
        <span class="hljs-attr">namespace:</span> <span class="hljs-string">dev-id</span>  <span class="hljs-comment"># å¡«Nacosç”Ÿæˆçš„å‘½åç©ºé—´ID</span>
</code></pre>
<h3 data-id="heading-12">é…ç½®å…±äº«ï¼ˆ"é€šç”¨è°ƒæ–™é…æ–¹"ï¼‰</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># åœ¨Nacosåˆ›å»º Data ID: common.yaml</span>
<span class="hljs-comment"># æ‰€æœ‰æœåŠ¡éƒ½å¯ä»¥è¯»å–è¿™ä¸ªå…¬å…±é…ç½®</span>

<span class="hljs-comment"># æœåŠ¡é…ç½®é‡Œå¯ä»¥è¿™æ ·ç”¨ï¼š</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">cloud:</span>
    <span class="hljs-attr">nacos:</span>
      <span class="hljs-attr">config:</span>
        <span class="hljs-attr">shared-configs:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">data-id:</span> <span class="hljs-string">common.yaml</span>
            <span class="hljs-attr">group:</span> <span class="hljs-string">DEFAULT_GROUP</span>
            <span class="hljs-attr">refresh:</span> <span class="hljs-literal">true</span>
</code></pre>
<h2 data-id="heading-13">ğŸ“ æ€»ç»“ï¼šNacoså¸¦ç»™æˆ‘ä»¬çš„"ç¾é£Ÿä½“éªŒ"</h2>
<h3 data-id="heading-14">ä¼˜ç‚¹ï¼ˆ"ä¸ºä»€ä¹ˆé€‰æ‹©è¿™ä¸ªç¾é£Ÿå¹¿åœº"ï¼‰ï¼š</h3>
<ol>
<li><strong>ä¸€ç«™å¼æœåŠ¡</strong>ï¼šæœåŠ¡æ³¨å†Œã€é…ç½®ç®¡ç†ã€æœåŠ¡å‘ç°å…¨æå®šï¼Œä¸ç”¨ä¸œå¥”è¥¿è·‘</li>
<li><strong>åŠ¨æ€åˆ·æ–°</strong>ï¼šæ”¹é…ç½®ä¸ç”¨é‡å¯æœåŠ¡ï¼Œå°±åƒæ¢èœå•ä¸ç”¨å…³åº—</li>
<li><strong>å¥åº·æ£€æŸ¥</strong>ï¼šè‡ªåŠ¨å‰”é™¤"ä¸è¥ä¸šçš„æ‘Šä½"ï¼Œä¿è¯ä½ æ€»èƒ½åƒåˆ°æ–°é²œçƒ­ä¹çš„</li>
<li><strong>å¤šç¯å¢ƒæ”¯æŒ</strong>ï¼šå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒå®Œç¾éš”ç¦»ï¼Œä¸ä¼šæŠŠ"è¯•åƒå“"ç«¯ç»™é¡¾å®¢</li>
<li><strong>æ˜“äºä½¿ç”¨</strong>ï¼šæ§åˆ¶å°å‹å¥½ï¼ŒAPIä¸°å¯Œï¼Œä¸­æ–‡æ–‡æ¡£é½å…¨ï¼ˆé˜¿é‡Œå‡ºå“ï¼Œå¿…å±ç²¾å“ï¼‰</li>
</ol>
<h3 data-id="heading-15">æ³¨æ„äº‹é¡¹ï¼ˆ"ç»è¥é¡»çŸ¥"ï¼‰ï¼š</h3>
<ol>
<li><strong>ç½‘ç»œç¨³å®š</strong>ï¼šNacosæŒ‚äº†ï¼ŒæœåŠ¡å°±"å¤±è”"äº†ï¼Œç¡®ä¿é«˜å¯ç”¨éƒ¨ç½²</li>
<li><strong>æƒé™ç®¡ç†</strong>ï¼šç”Ÿäº§ç¯å¢ƒä¸€å®šè¦é…ç½®æƒé™ï¼Œåˆ«è®©è·¯äººéšä¾¿æ”¹"èœå•"</li>
<li><strong>é…ç½®è§„èŒƒ</strong>ï¼šå‘½åè§„èŒƒè¦ç»Ÿä¸€ï¼Œä¸ç„¶æ‰¾é…ç½®åƒ"æµ·åº•æé’ˆ"</li>
<li><strong>ç‰ˆæœ¬å…¼å®¹</strong>ï¼šSpringCloud Alibabaç‰ˆæœ¬è¦å’ŒSpringBootç‰ˆæœ¬åŒ¹é…ï¼Œä¸ç„¶ä¼š"é£Ÿç‰©ç›¸å…‹"</li>
</ol>
<h3 data-id="heading-16">æœ€åï¼š</h3>
<blockquote>
<p>é—®ï¼šä¸ºä»€ä¹ˆç¨‹åºå‘˜å–œæ¬¢ç”¨Nacosï¼Ÿ
ç­”ï¼šå› ä¸ºä»–ä»¬å†ä¹Ÿä¸ç”¨åœ¨ä»£ç é‡Œå†™æ­»é…ç½®äº†ï¼Œç°åœ¨å¯ä»¥ç†ç›´æ°”å£®åœ°è¯´ï¼š"è¿™ä¸ªé…ç½®Nacosç®¡ï¼Œæˆ‘ä¸çŸ¥é“ï¼"</p>
</blockquote>
<blockquote>
<p>é—®ï¼šNacoså’ŒEurekaæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
ç­”ï¼šEurekaåƒè€å¼ç”µè¯æœ¬ï¼ŒNacosåƒæ™ºèƒ½æ‰‹æœºé€šè®¯å½•â€”â€”è¿˜èƒ½è§†é¢‘é€šè¯ï¼ˆåŠ¨æ€åˆ·æ–°ï¼‰ï¼</p>
</blockquote>
<h2 data-id="heading-17">ğŸ å»ºè®®</h2>
<p>SpringBootæ•´åˆNacoså°±åƒç»™å¤§æ’æ¡£è£…ä¸Šæ™ºèƒ½ç‚¹é¤ç³»ç»Ÿï¼š</p>
<ul>
<li><strong>ç®€å•</strong>ï¼šå‡ è¡Œé…ç½®å°±æå®š</li>
<li><strong>å¼ºå¤§</strong>ï¼šåŠŸèƒ½ä¸°å¯Œï¼Œæ»¡è¶³å„ç§éœ€æ±‚</li>
<li><strong>ç¨³å®š</strong>ï¼šç»è¿‡é˜¿é‡Œå¤§è§„æ¨¡ç”Ÿäº§éªŒè¯</li>
<li><strong>æ´»è·ƒ</strong>ï¼šç¤¾åŒºæ´»è·ƒï¼Œæ›´æ–°åŠæ—¶</li>
</ul>
<p>ç°åœ¨å¯ä»¥è¯•è¯•ï¼Œè®©ä½ çš„å¾®æœåŠ¡åƒå¤–å–ä¸€æ ·ï¼š<strong>éšæ—¶ç‚¹å•ï¼Œå‡†æ—¶é€è¾¾ï¼Œè¿˜èƒ½å®æ—¶è·Ÿè¸ªè¿›åº¦ï¼</strong> ğŸššğŸ’¨</p>
<p>å¥½çš„æ¶æ„å¸ˆå°±åƒå¥½çš„å¨å¸ˆï¼šä¸ä»…è¦ä¼šåšèœï¼Œè¿˜è¦æ‡‚å¾—å¦‚ä½•é«˜æ•ˆç®¡ç†å¨æˆ¿ï¼Nacoså°±æ˜¯ä½ çš„"æ™ºèƒ½å¨æˆ¿ç®¡ç†ç³»ç»Ÿ"ï¼ğŸ‘¨â€ğŸ³ğŸ‘©â€ğŸ³</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82cbe0a7770841318211e7caa65ea9eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767493885&amp;x-signature=pa6mxtBf%2FAEqH0efEmLpcN88dbQ%3D" alt="SpringBoot æ•´åˆ Nacosï¼Œè®©å¾®æœåŠ¡åƒå¤–å–ç‚¹å•ä¸€æ ·ç®€å•.png" loading="lazy"/></p>
<p><strong>è°¢è°¢ä½ çœ‹æˆ‘çš„æ–‡ç« ï¼Œæ—¢ç„¶çœ‹åˆ°è¿™é‡Œäº†ï¼Œå¦‚æœè§‰å¾—ä¸é”™ï¼Œéšæ‰‹ç‚¹ä¸ªèµã€è½¬å‘ã€åœ¨çœ‹ä¸‰è¿å§ï¼Œæ„Ÿè°¢æ„Ÿè°¢ã€‚é‚£æˆ‘ä»¬ï¼Œä¸‹æ¬¡å†è§ã€‚</strong></p>
<p>æ‚¨çš„ä¸€é”®ä¸‰è¿ï¼Œæ˜¯æˆ‘æ›´æ–°çš„æœ€å¤§åŠ¨åŠ›ï¼Œè°¢è°¢</p>
<p>å±±æ°´æœ‰ç›¸é€¢ï¼Œæ¥æ—¥çš†å¯æœŸï¼Œè°¢è°¢é˜…è¯»ï¼Œæˆ‘ä»¬å†ä¼š</p>
<p>æˆ‘æ‰‹ä¸­çš„é‡‘ç®æ£’ï¼Œä¸Šèƒ½é€šå¤©ï¼Œä¸‹èƒ½æ¢æµ·</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vuex è¯¦è§£ï¼šç°ä»£ Vue.js åº”ç”¨çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7588043318359785507</link>    <guid>https://juejin.cn/post/7588043318359785507</guid>    <pubDate>2025-12-27T16:09:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588043318359785507" data-draft-id="7588043318359769123" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vuex è¯¦è§£ï¼šç°ä»£ Vue.js åº”ç”¨çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2025-12-27T16:09:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿›å‡»çš„é‡äºº"/> <meta itemprop="url" content="https://juejin.cn/user/1458425238667008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vuex è¯¦è§£ï¼šç°ä»£ Vue.js åº”ç”¨çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1458425238667008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿›å‡»çš„é‡äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T16:09:07.000Z" title="Sat Dec 27 2025 16:09:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨ç°ä»£å‰ç«¯åº”ç”¨å¼€å‘ä¸­ï¼Œéšç€åº”ç”¨å¤æ‚åº¦çš„ä¸æ–­æå‡ï¼Œç»„ä»¶é—´çš„æ•°æ®å…±äº«å’ŒçŠ¶æ€ç®¡ç†å˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚Vuex ä½œä¸º Vue.js å®˜æ–¹æ¨èçš„çŠ¶æ€ç®¡ç†åº“ï¼Œä¸º Vue åº”ç”¨æä¾›äº†ä¸€ç§é›†ä¸­å¼ã€å¯é¢„æµ‹çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ã€‚æœ¬æ–‡å°†ç»“åˆæä¾›çš„ä»£ç å®ä¾‹ï¼Œæ·±å…¥æ¢è®¨ Vuex çš„æ ¸å¿ƒæ¦‚å¿µã€å·¥ä½œåŸç†ä»¥åŠå®é™…åº”ç”¨ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€Vuex çš„åŸºæœ¬æ¦‚å¿µ</h2>
<p>Vuex æ˜¯ä¸€ä¸ªä¸“é—¨ä¸º Vue.js åº”ç”¨ç¨‹åºå¼€å‘çš„<strong>çŠ¶æ€ç®¡ç†æ¨¡å¼ + åº“</strong>ã€‚å®ƒé‡‡ç”¨é›†ä¸­å¼å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚</p>
<h3 data-id="heading-2">1.1 ä¸ºä»€ä¹ˆéœ€è¦ Vuexï¼Ÿ</h3>
<p>ä»æä¾›çš„ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªç»„ä»¶Â <code>MyCount</code>Â å’ŒÂ <code>MyPersons</code>ï¼Œå®ƒä»¬éƒ½éœ€è¦è®¿é—®å’Œä¿®æ”¹å…±äº«çš„çŠ¶æ€æ•°æ®ï¼š</p>
<ul>
<li><code>MyCount</code>Â ç»„ä»¶éœ€è¦è®¿é—®å’Œä¿®æ”¹Â <code>sum</code>ï¼ˆæ±‚å’Œå€¼ï¼‰</li>
<li><code>MyPersons</code>Â ç»„ä»¶éœ€è¦è®¿é—®å’Œä¿®æ”¹Â <code>persons</code>ï¼ˆäººå‘˜åˆ—è¡¨ï¼‰</li>
<li>ä¸¤ä¸ªç»„ä»¶éƒ½éœ€è¦ç›¸äº’è®¿é—®å¯¹æ–¹çš„çŠ¶æ€æ•°æ®</li>
</ul>
<p>å¦‚æœæ²¡æœ‰ Vuexï¼Œè¿™ç§è·¨ç»„ä»¶çš„æ•°æ®å…±äº«éœ€è¦é€šè¿‡å¤æ‚çš„çˆ¶å­ç»„ä»¶ä¼ å€¼æˆ–äº‹ä»¶æ€»çº¿æ¥å®ç°ï¼Œéšç€åº”ç”¨è§„æ¨¡æ‰©å¤§ï¼Œä»£ç å°†å˜å¾—éš¾ä»¥ç»´æŠ¤ã€‚Vuex é€šè¿‡æä¾›ä¸€ä¸ªå…¨å±€çš„å•ä¾‹çŠ¶æ€æ ‘ï¼Œä¼˜é›…åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<h3 data-id="heading-3">1.2 Vuex çš„æ ¸å¿ƒæ¦‚å¿µ</h3>
<p>ä»Â <code>index.js</code>Â æ–‡ä»¶ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒVuex åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒéƒ¨åˆ†ï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> Vuex.<span class="hljs-built_in">Store</span>({
  actions,
  mutations,
  state,
  getters
})
</code></pre>
<p><strong>Stateï¼ˆçŠ¶æ€ï¼‰</strong> ï¼šåº”ç”¨çš„å•ä¸€çŠ¶æ€æ ‘ï¼ŒåŒ…å«æ‰€æœ‰éœ€è¦å…±äº«çš„æ•°æ®ã€‚</p>
<p><strong>Mutationsï¼ˆå˜æ›´ï¼‰</strong> ï¼šå”¯ä¸€æ›´æ”¹çŠ¶æ€çš„æ–¹æ³•ï¼Œå¿…é¡»æ˜¯åŒæ­¥å‡½æ•°ã€‚</p>
<p><strong>Actionsï¼ˆåŠ¨ä½œï¼‰</strong> ï¼šæäº¤ mutationsï¼Œå¯ä»¥åŒ…å«ä»»æ„å¼‚æ­¥æ“ä½œã€‚</p>
<p><strong>Gettersï¼ˆè·å–å™¨ï¼‰</strong> ï¼šä» state ä¸­æ´¾ç”Ÿå‡ºä¸€äº›çŠ¶æ€ï¼Œç±»ä¼¼äºè®¡ç®—å±æ€§ã€‚</p>
<h2 data-id="heading-4">äºŒã€Vuex çš„åŸºæœ¬ä½¿ç”¨</h2>
<h3 data-id="heading-5">2.1 åˆå§‹åŒ–ä¸é…ç½®</h3>
<p>é¦–å…ˆéœ€è¦åœ¨é¡¹ç›®ä¸­å®‰è£…å’Œé…ç½® Vuexï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vuex</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vuex'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// ä½¿ç”¨æ’ä»¶</span>
<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">Vuex</span>)

<span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>({
  <span class="hljs-comment">// é…ç½®é¡¹</span>
})
</code></pre>
<h3 data-id="heading-6">2.2 ç»„ä»¶ä¸­è®¿é—®çŠ¶æ€</h3>
<p>åœ¨ç»„ä»¶ä¸­ï¼Œå¯ä»¥é€šè¿‡Â <code>$store</code>Â è®¿é—® Vuex çš„çŠ¶æ€ï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨è®¡ç®—å±æ€§ä¸­ç›´æ¥è®¿é—®</span>
<span class="hljs-attr">computed</span>: {
  <span class="hljs-title function_">persons</span>(<span class="hljs-params"/>){
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-property">state</span>.<span class="hljs-property">persons</span>
  },
  <span class="hljs-title function_">sum</span>(<span class="hljs-params"/>){
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-property">state</span>.<span class="hljs-property">sum</span>
  }
}
</code></pre>
<h3 data-id="heading-7">2.3 ç»„ä»¶ä¸­ä¿®æ”¹çŠ¶æ€</h3>
<p>ä¿®æ”¹çŠ¶æ€æœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<p><strong>æ–¹å¼ä¸€ï¼šé€šè¿‡ actionsï¼ˆå¯åŒ…å«å¼‚æ­¥æ“ä½œï¼‰</strong></p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">methods</span>: {
  <span class="hljs-title function_">incrementOdd</span>(<span class="hljs-params"/>){
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-title function_">dispatch</span>(<span class="hljs-string">'jiaOdd'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">n</span>)
  }
}
</code></pre>
<p><strong>æ–¹å¼äºŒï¼šç›´æ¥æäº¤ mutationsï¼ˆåŒæ­¥æ“ä½œï¼‰</strong></p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">methods</span>: {
  <span class="hljs-title function_">add</span>(<span class="hljs-params"/>){
    <span class="hljs-keyword">const</span> personObj = {<span class="hljs-attr">id</span>:<span class="hljs-title function_">nanoid</span>(), <span class="hljs-attr">name</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>};
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-title function_">commit</span>(<span class="hljs-string">'ADD_PERSON'</span>, personObj)
  }
}
</code></pre>
<h2 data-id="heading-8">ä¸‰ã€å››ä¸ª Map è¾…åŠ©å‡½æ•°çš„ä½¿ç”¨</h2>
<p>ä¸ºäº†ç®€åŒ–ä»£ç ï¼ŒVuex æä¾›äº†å››ä¸ªè¾…åŠ©å‡½æ•°ï¼š</p>
<h3 data-id="heading-9">3.1 mapState</h3>
<p>å°† state æ˜ å°„ä¸ºç»„ä»¶çš„è®¡ç®—å±æ€§ï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// æ•°ç»„å†™æ³•ï¼ˆç®€å†™ï¼‰</span>
...<span class="hljs-title function_ invoke__">mapState</span>([<span class="hljs-string">'sum'</span>, <span class="hljs-string">'persons'</span>])

<span class="hljs-comment">// å¯¹è±¡å†™æ³•ï¼ˆå¯é‡å‘½åï¼‰</span>
...<span class="hljs-title function_ invoke__">mapState</span>({<span class="hljs-attr">currentSum</span>: <span class="hljs-string">'sum'</span>, <span class="hljs-attr">personList</span>: <span class="hljs-string">'persons'</span>})
</code></pre>
<h3 data-id="heading-10">3.2 mapGetters</h3>
<p>å°† getters æ˜ å°„ä¸ºç»„ä»¶çš„è®¡ç®—å±æ€§ï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-css" lang="css">..<span class="hljs-selector-class">.mapGetters</span>(<span class="hljs-selector-attr">[<span class="hljs-string">'bigSum'</span>]</span>)
</code></pre>
<h3 data-id="heading-11">3.3 mapMutations</h3>
<p>å°† mutations æ˜ å°„ä¸ºç»„ä»¶çš„æ–¹æ³•ï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// å¯¹è±¡å†™æ³•</span>
...<span class="hljs-title function_ invoke__">mapMutations</span>({<span class="hljs-attr">increment</span>: <span class="hljs-string">'JIA'</span>, <span class="hljs-attr">decrement</span>: <span class="hljs-string">'JIAN'</span>}),

<span class="hljs-comment">// æ•°ç»„å†™æ³•</span>
...<span class="hljs-title function_ invoke__">mapMutations</span>([<span class="hljs-string">'JIA'</span>, <span class="hljs-string">'JIAN'</span>])
</code></pre>
<h3 data-id="heading-12">3.4 mapActions</h3>
<p>å°† actions æ˜ å°„ä¸ºç»„ä»¶çš„æ–¹æ³•ï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-php" lang="php">...<span class="hljs-title function_ invoke__">mapActions</span>({<span class="hljs-attr">incrementOdd</span>: <span class="hljs-string">'jiaOdd'</span>, <span class="hljs-attr">incrementWait</span>: <span class="hljs-string">'jiaWait'</span>})
</code></pre>
<h2 data-id="heading-13">å››ã€Vuex æ¨¡å—åŒ–ä¸å‘½åç©ºé—´</h2>
<p>éšç€åº”ç”¨è§„æ¨¡æ‰©å¤§ï¼Œå°†æ‰€æœ‰çŠ¶æ€é›†ä¸­åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ä¼šå˜å¾—éš¾ä»¥ç»´æŠ¤ã€‚Vuex å…è®¸æˆ‘ä»¬å°† store åˆ†å‰²æˆæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—æ‹¥æœ‰è‡ªå·±çš„ stateã€mutationsã€actionsã€gettersã€‚</p>
<h3 data-id="heading-14">4.1 æ¨¡å—åŒ–é…ç½®</h3>
<p>ä»é‡æ„åçš„ä»£ç å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å°† store æ‹†åˆ†æˆäº†ä¸¤ä¸ªæ¨¡å—ï¼š</p>
<p><strong>count.js</strong>Â - å¤„ç†è®¡æ•°ç›¸å…³çš„çŠ¶æ€<br/>
<strong>person.js</strong>Â - å¤„ç†äººå‘˜ç›¸å…³çš„çŠ¶æ€</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// index.js</span>
<span class="hljs-keyword">import</span> countAbout <span class="hljs-keyword">from</span> <span class="hljs-string">'./count'</span>
<span class="hljs-keyword">import</span> personAbout <span class="hljs-keyword">from</span> <span class="hljs-string">'./person'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>({
  <span class="hljs-attr">modules</span>: {
    countAbout,
    personAbout
  }
})
</code></pre>
<h3 data-id="heading-15">4.2 å‘½åç©ºé—´</h3>
<p>é€šè¿‡è®¾ç½®Â <code>namespaced: true</code>Â å¼€å¯å‘½åç©ºé—´ï¼Œå¯ä»¥é¿å…ä¸åŒæ¨¡å—ä¹‹é—´çš„å‘½åå†²çªï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// count.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  namespaced: <span class="hljs-literal">true</span>,
  <span class="hljs-comment">// ... å…¶ä»–é…ç½®</span>
}
</code></pre>
<h3 data-id="heading-16">4.3 æ¨¡å—åŒ–åçš„è®¿é—®æ–¹å¼</h3>
<p><strong>è®¿é—® stateï¼š</strong></p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç›´æ¥è®¿é—®</span>
<span class="hljs-title function_">persons</span>(<span class="hljs-params"/>){
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-property">state</span>.<span class="hljs-property">personAbout</span>.<span class="hljs-property">persons</span>
}

<span class="hljs-comment">// ä½¿ç”¨ mapStateï¼ˆéœ€è¦æŒ‡å®šå‘½åç©ºé—´ï¼‰</span>
...<span class="hljs-title function_">mapState</span>(<span class="hljs-string">'personAbout'</span>, [<span class="hljs-string">'persons'</span>])
</code></pre>
<p><strong>è®¿é—® gettersï¼š</strong></p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç›´æ¥è®¿é—®</span>
<span class="hljs-title function_">firstPersonName</span>(<span class="hljs-params"/>){
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-property">getters</span>[<span class="hljs-string">'personAbout/firstPersonName'</span>];
}

<span class="hljs-comment">// ä½¿ç”¨ mapGetters</span>
...<span class="hljs-title function_">mapGetters</span>(<span class="hljs-string">'personAbout'</span>, [<span class="hljs-string">'firstPersonName'</span>])
</code></pre>
<p><strong>æäº¤ mutationsï¼š</strong></p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// ç›´æ¥æäº¤</span>
this.<span class="hljs-variable">$store</span>.<span class="hljs-title function_ invoke__">commit</span>(<span class="hljs-string">'personAbout/ADD_PERSON'</span>, personObj);

<span class="hljs-comment">// ä½¿ç”¨ mapMutations</span>
...<span class="hljs-title function_ invoke__">mapMutations</span>(<span class="hljs-string">'countAbout'</span>, {<span class="hljs-attr">increment</span>: <span class="hljs-string">'JIA'</span>, <span class="hljs-attr">decrement</span>: <span class="hljs-string">'JIAN'</span>})
</code></pre>
<p><strong>åˆ†å‘ actionsï¼š</strong></p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// ç›´æ¥åˆ†å‘</span>
this.<span class="hljs-variable">$store</span>.<span class="hljs-title function_ invoke__">dispatch</span>(<span class="hljs-string">'personAbout/addWangPerson'</span>, personObj);

<span class="hljs-comment">// ä½¿ç”¨ mapActions</span>
...<span class="hljs-title function_ invoke__">mapActions</span>(<span class="hljs-string">'countAbout'</span>, {<span class="hljs-attr">incrementOdd</span>: <span class="hljs-string">'jiaOdd'</span>, <span class="hljs-attr">incrementWait</span>: <span class="hljs-string">'jiaWait'</span>})
</code></pre>
<h2 data-id="heading-17">äº”ã€å®é™…åº”ç”¨æ¡ˆä¾‹åˆ†æ</h2>
<h3 data-id="heading-18">5.1 è®¡æ•°å™¨æ¨¡å—ï¼ˆcount.jsï¼‰</h3>
<p>è¿™ä¸ªæ¨¡å—å±•ç¤ºäº†å¦‚ä½•å¤„ç†åŒæ­¥å’Œå¼‚æ­¥çš„çŠ¶æ€æ›´æ–°ï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŒæ­¥æ“ä½œ</span>
<span class="hljs-title function_">JIA</span>(<span class="hljs-params">state, value</span>) {
  state.<span class="hljs-property">sum</span> += value;
},

<span class="hljs-comment">// å¼‚æ­¥æ“ä½œï¼ˆé€šè¿‡ actionï¼‰</span>
<span class="hljs-title function_">jiaWait</span>(<span class="hljs-params">context, value</span>) {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    context.<span class="hljs-title function_">commit</span>(<span class="hljs-string">'JIAWAIT'</span>, value);
  }, <span class="hljs-number">500</span>);
}
</code></pre>
<h3 data-id="heading-19">5.2 äººå‘˜ç®¡ç†æ¨¡å—ï¼ˆperson.jsï¼‰</h3>
<p>è¿™ä¸ªæ¨¡å—å±•ç¤ºäº†æ›´å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¡ä»¶æ€§æäº¤ mutation</span>
<span class="hljs-title function_">addWangPerson</span>(<span class="hljs-params">context, value</span>) {
  <span class="hljs-keyword">if</span> (value.<span class="hljs-property">name</span>.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">'ç‹'</span>) === <span class="hljs-number">0</span>) {
    context.<span class="hljs-title function_">commit</span>(<span class="hljs-string">'ADD_PERSON'</span>, value);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-title function_">alert</span>(<span class="hljs-string">'æ·»åŠ çš„äººå¿…é¡»å§“ç‹ï¼'</span>);
  }
},

<span class="hljs-comment">// å¼‚æ­¥ API è°ƒç”¨</span>
<span class="hljs-title function_">addServer</span>(<span class="hljs-params">context</span>) {
  axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">'https://api.uixsj.cn/hitokoto/get?type=social'</span>).<span class="hljs-title function_">then</span>(
    <span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> word = {<span class="hljs-attr">id</span>: <span class="hljs-title function_">nanoid</span>(), <span class="hljs-attr">name</span>: response.<span class="hljs-property">data</span>};
      context.<span class="hljs-title function_">commit</span>(<span class="hljs-string">'ADD_PERSON'</span>, word);
    },
    <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
      <span class="hljs-title function_">alert</span>(error.<span class="hljs-property">message</span>);
    }
  )
}
</code></pre>
<h2 data-id="heading-20">å…­ã€Vuex çš„æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-21">6.1 ä¸¥æ ¼éµå¾ªæ•°æ®æµ</h3>
<p>Vuex å¼ºåˆ¶å®æ–½ä¸€ç§å•å‘æ•°æ®æµï¼š</p>
<ol>
<li>ç»„ä»¶æ´¾å‘ Action</li>
<li>Action æäº¤ Mutation</li>
<li>Mutation ä¿®æ”¹ State</li>
<li>State å˜åŒ–è§¦å‘ç»„ä»¶æ›´æ–°</li>
</ol>
<h3 data-id="heading-22">6.2 åˆç†ä½¿ç”¨æ¨¡å—åŒ–</h3>
<ul>
<li>æŒ‰åŠŸèƒ½æˆ–ä¸šåŠ¡é€»è¾‘åˆ’åˆ†æ¨¡å—</li>
<li>ä¸ºæ‰€æœ‰æ¨¡å—å¯ç”¨å‘½åç©ºé—´</li>
<li>ä¿æŒæ¨¡å—çš„ç‹¬ç«‹æ€§</li>
</ul>
<h3 data-id="heading-23">6.3 å¼‚æ­¥æ“ä½œçš„å¤„ç†</h3>
<ul>
<li>æ‰€æœ‰å¼‚æ­¥é€»è¾‘æ”¾åœ¨ Actions ä¸­</li>
<li>ä¿æŒ Mutations çš„çº¯ç²¹æ€§ï¼ˆåªåšçŠ¶æ€å˜æ›´ï¼‰</li>
<li>åˆç†å¤„ç†å¼‚æ­¥é”™è¯¯</li>
</ul>
<h3 data-id="heading-24">6.4 è¡¨å•å¤„ç†ç­–ç•¥</h3>
<p>åœ¨Â <code>MyPersons.vue</code>Â ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†å…¸å‹çš„è¡¨å•å¤„ç†æ¨¡å¼ï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-kotlin" lang="kotlin">add(){
  <span class="hljs-keyword">const</span> personObj = {id: nanoid(), name: <span class="hljs-keyword">this</span>.name};
  <span class="hljs-keyword">this</span>.$store.commit(<span class="hljs-string">'personAbout/ADD_PERSON'</span>, personObj);
  <span class="hljs-keyword">this</span>.name = <span class="hljs-string">''</span>; <span class="hljs-comment">// æ¸…ç©ºè¡¨å•</span>
}
</code></pre>
<h2 data-id="heading-25">ä¸ƒã€Vuex çš„ä¼˜ç¼ºç‚¹åˆ†æ</h2>
<h3 data-id="heading-26">7.1 ä¼˜ç‚¹</h3>
<ol>
<li><strong>é›†ä¸­å¼çŠ¶æ€ç®¡ç†</strong>ï¼šæ‰€æœ‰çŠ¶æ€å˜åŒ–éƒ½å¯ä»¥è¿½è¸ªå’Œè°ƒè¯•</li>
<li><strong>ç»„ä»¶é€šä¿¡ç®€åŒ–</strong>ï¼šè·¨ç»„ä»¶æ•°æ®å…±äº«å˜å¾—ç®€å•</li>
<li><strong>å¯é¢„æµ‹çš„çŠ¶æ€å˜åŒ–</strong>ï¼šé€šè¿‡ä¸¥æ ¼çš„è§„åˆ™ä¿è¯çŠ¶æ€å˜åŒ–çš„å¯é¢„æµ‹æ€§</li>
<li><strong>æ’ä»¶ç”Ÿæ€ä¸°å¯Œ</strong>ï¼šæ”¯æŒæ—¶é—´æ—…è¡Œã€çŠ¶æ€å¿«ç…§ç­‰é«˜çº§åŠŸèƒ½</li>
<li><strong>TypeScript æ”¯æŒ</strong>ï¼šæä¾›å®Œæ•´çš„ç±»å‹å®šä¹‰</li>
</ol>
<h3 data-id="heading-27">7.2 ç¼ºç‚¹</h3>
<ol>
<li><strong>å­¦ä¹ æ›²çº¿</strong>ï¼šéœ€è¦ç†è§£ Flux æ¶æ„æ€æƒ³</li>
<li><strong>ä»£ç å†—ä½™</strong>ï¼šç®€å•çš„åº”ç”¨å¯èƒ½ä¸éœ€è¦ Vuex</li>
<li><strong>æ ·æ¿ä»£ç </strong>ï¼šéœ€è¦ç¼–å†™ä¸€å®šé‡çš„æ¨¡æ¿ä»£ç </li>
<li><strong>æ€§èƒ½è€ƒè™‘</strong>ï¼šå¤§å‹çŠ¶æ€æ ‘å¯èƒ½å½±å“æ€§èƒ½</li>
</ol>
<h2 data-id="heading-28">å…«ã€æ›¿ä»£æ–¹æ¡ˆä¸æœªæ¥è¶‹åŠ¿</h2>
<h3 data-id="heading-29">8.1 Vuex çš„æ›¿ä»£æ–¹æ¡ˆ</h3>
<ol>
<li><strong>Pinia</strong>ï¼šVue.js çš„ä¸‹ä¸€ä»£çŠ¶æ€ç®¡ç†åº“ï¼Œæ›´åŠ è½»é‡ä¸”å¯¹ TypeScript å‹å¥½</li>
<li><strong>Composition API</strong>ï¼šä½¿ç”¨Â <code>reactive</code>Â å’ŒÂ <code>provide/inject</code>Â å®ç°ç®€å•çš„çŠ¶æ€å…±äº«</li>
<li><strong>äº‹ä»¶æ€»çº¿</strong>ï¼šé€‚åˆå°å‹åº”ç”¨çš„ç®€å•é€šä¿¡</li>
</ol>
<h3 data-id="heading-30">8.2 Vuex 4 å’Œ Vuex 5</h3>
<ul>
<li>Vuex 4 æ”¯æŒ Vue 3ï¼ŒAPI åŸºæœ¬ä¿æŒä¸å˜</li>
<li>Vuex 5ï¼ˆå¼€å‘ä¸­ï¼‰å°†æä¾›æ›´å¥½çš„ TypeScript æ”¯æŒå’Œæ›´ç®€æ´çš„ API</li>
</ul>
<h2 data-id="heading-31">ç»“è®º</h2>
<p>Vuex ä½œä¸º Vue.js ç”Ÿæ€ä¸­æˆç†Ÿçš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼Œä¸ºæ„å»ºä¸­å¤§å‹ Vue åº”ç”¨æä¾›äº†å¯é çš„æ¶æ„åŸºç¡€ã€‚é€šè¿‡æœ¬æ–‡çš„åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° Vuex å¦‚ä½•ï¼š</p>
<ol>
<li>æä¾›é›†ä¸­å¼çš„çŠ¶æ€ç®¡ç†</li>
<li>é€šè¿‡ä¸¥æ ¼çš„è§„åˆ™ä¿è¯çŠ¶æ€å˜åŒ–çš„å¯é¢„æµ‹æ€§</li>
<li>é€šè¿‡æ¨¡å—åŒ–æ”¯æŒå¤§å‹åº”ç”¨çš„çŠ¶æ€ç®¡ç†</li>
<li>æä¾›ä¸°å¯Œçš„è¾…åŠ©å‡½æ•°ç®€åŒ–å¼€å‘</li>
</ol>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæ˜¯å¦ä½¿ç”¨ Vuex åº”è¯¥æ ¹æ®åº”ç”¨è§„æ¨¡å’Œå¤æ‚åº¦æ¥å†³å®šã€‚å¯¹äºå°å‹åº”ç”¨ï¼Œç®€å•çš„ç»„ä»¶é€šä¿¡å¯èƒ½å°±è¶³å¤Ÿäº†ï¼›ä½†å¯¹äºä¸­å¤§å‹åº”ç”¨ï¼ŒVuex æä¾›çš„ç»“æ„åŒ–çŠ¶æ€ç®¡ç†æ–¹æ¡ˆå°†å¤§å¤§æå‡ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p>
<p>éšç€ Vue 3 çš„æ™®åŠï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥è€ƒè™‘ä½¿ç”¨ Composition API æˆ– Pinia ç­‰æ›´ç°ä»£çš„è§£å†³æ–¹æ¡ˆï¼Œä½† Vuex çš„æ ¸å¿ƒæ€æƒ³å’Œè®¾è®¡æ¨¡å¼ä»ç„¶æ˜¯å€¼å¾—å­¦ä¹ å’Œå€Ÿé‰´çš„å®è´µç»éªŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Single-SPA å­¦ä¹ æ€»ç»“]]></title>    <link>https://juejin.cn/post/7588084804093935654</link>    <guid>https://juejin.cn/post/7588084804093935654</guid>    <pubDate>2025-12-28T02:22:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588084804093935654" data-draft-id="7588139768275124275" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Single-SPA å­¦ä¹ æ€»ç»“"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,å¾®æœåŠ¡"/> <meta itemprop="datePublished" content="2025-12-28T02:22:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹åŒ—æµ·"/> <meta itemprop="url" content="https://juejin.cn/user/1425415102792237"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Single-SPA å­¦ä¹ æ€»ç»“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1425415102792237/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹åŒ—æµ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T02:22:18.000Z" title="Sun Dec 28 2025 02:22:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");margin-left:2px}.markdown-body a[href^="#"]:before{content:"#"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:"â€¢";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:"";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯ Single-SPA</h2>
<p>Single-SPA æ˜¯å¾®å‰ç«¯é¢†åŸŸçš„"é¼»ç¥–"æ¡†æ¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªç”¨äºå‰ç«¯å¾®æœåŠ¡åŒ–çš„ JavaScript æ¡†æ¶ï¼Œå…è®¸ä½ åœ¨åŒä¸€ä¸ªé¡µé¢ä¸­ä½¿ç”¨å¤šä¸ªæ¡†æ¶ï¼ˆReactã€Vueã€Angular ç­‰ï¼‰ï¼Œè€Œä¸éœ€è¦åˆ·æ–°é¡µé¢ã€‚</p>
<h3 data-id="heading-1">æ ¸å¿ƒå®šä½</h3>
<ul>
<li><strong>JS Entry æ–¹æ¡ˆ</strong>ï¼šé€šè¿‡åŠ è½½å­åº”ç”¨çš„ JS å…¥å£æ–‡ä»¶æ¥é›†æˆ</li>
<li><strong>è·¯ç”±é©±åŠ¨</strong>ï¼šåŸºäº URL å˜åŒ–è‡ªåŠ¨æ¿€æ´»/å¸è½½å­åº”ç”¨</li>
<li><strong>æ¡†æ¶æ— å…³</strong>ï¼šæ”¯æŒä»»æ„å‰ç«¯æ¡†æ¶ï¼Œåªè¦å¯¼å‡ºç”Ÿå‘½å‘¨æœŸå‡½æ•°</li>
</ul>
<hr/>
<h2 data-id="heading-2">äºŒã€æ ¸å¿ƒæ¦‚å¿µ</h2>
<h3 data-id="heading-3">1. ä¸‰ç§æ¨¡å—ç±»å‹</h3>





























<table><thead><tr><th>ç±»å‹</th><th>è¯´æ˜</th><th>ç”Ÿå‘½å‘¨æœŸ</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Application</strong></td><td>æœ‰ UI çš„å¾®å‰ç«¯åº”ç”¨</td><td>bootstrap â†’ mount â†’ unmount</td><td>ç‹¬ç«‹é¡µé¢/åŠŸèƒ½æ¨¡å—</td></tr><tr><td><strong>Parcel</strong></td><td>å¯å¤ç”¨çš„ UI ç»„ä»¶</td><td>æ‰‹åŠ¨æŒ‚è½½/å¸è½½</td><td>è·¨åº”ç”¨å…±äº«ç»„ä»¶</td></tr><tr><td><strong>Utility</strong></td><td>æ—  UI çš„å…±äº«æ¨¡å—</td><td>æ— </td><td>å·¥å…·å‡½æ•°ã€API å°è£…ã€çŠ¶æ€ç®¡ç†</td></tr></tbody></table>
<h3 data-id="heading-4">2. ç”Ÿå‘½å‘¨æœŸå‡½æ•°</h3>
<p>æ¯ä¸ª Application å¿…é¡»å¯¼å‡ºä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åº”ç”¨é¦–æ¬¡åŠ è½½æ—¶è°ƒç”¨ï¼ˆåªæ‰§è¡Œä¸€æ¬¡ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params">props</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"åº”ç”¨åˆå§‹åŒ–"</span>);
}

<span class="hljs-comment">// è·¯ç”±åŒ¹é…æ—¶è°ƒç”¨ï¼ˆæ¯æ¬¡æ¿€æ´»éƒ½æ‰§è¡Œï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">mount</span>(<span class="hljs-params">props</span>) {
  <span class="hljs-comment">// æ¸²æŸ“ DOM</span>
  <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(props.<span class="hljs-property">container</span>).<span class="hljs-title function_">render</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>);
}

<span class="hljs-comment">// è·¯ç”±ç¦»å¼€æ—¶è°ƒç”¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">unmount</span>(<span class="hljs-params">props</span>) {
  <span class="hljs-comment">// æ¸…ç† DOM å’Œå‰¯ä½œç”¨</span>
  root.<span class="hljs-title function_">unmount</span>();
}
</code></pre>
<h3 data-id="heading-5">3. ç”Ÿå‘½å‘¨æœŸæµç¨‹</h3>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">é¦–æ¬¡åŠ è½½:  load â†’ bootstrap â†’ mount</span>
<span class="hljs-section">è·¯ç”±åˆ‡æ¢:  unmount â†’ mount (å¦ä¸€ä¸ªåº”ç”¨)</span>
<span class="hljs-section">å®Œå…¨å¸è½½:  unmount â†’ unload (å¯é€‰)</span>
</code></pre>
<hr/>
<h2 data-id="heading-6">ä¸‰ã€æ ¸å¿ƒåŸç†</h2>
<h3 data-id="heading-7">1. è·¯ç”±åŠ«æŒ</h3>
<p>Single-SPA é€šè¿‡åŠ«æŒæµè§ˆå™¨çš„è·¯ç”±äº‹ä»¶æ¥å®ç°åº”ç”¨åˆ‡æ¢ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŠ«æŒ history API</span>
<span class="hljs-keyword">const</span> originalPushState = <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-property">pushState</span>;
<span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-property">pushState</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
  originalPushState.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
  <span class="hljs-comment">// è§¦å‘åº”ç”¨åˆ‡æ¢é€»è¾‘</span>
  <span class="hljs-title function_">reroute</span>();
};

<span class="hljs-comment">// ç›‘å¬ popstate äº‹ä»¶</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"popstate"</span>, reroute);
</code></pre>
<h3 data-id="heading-8">2. åº”ç”¨çŠ¶æ€æœº</h3>
<p>æ¯ä¸ªåº”ç”¨éƒ½æœ‰çŠ¶æ€æµè½¬ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">NOT<span class="hljs-emphasis">_LOADED â†’ LOADING_</span>SOURCE<span class="hljs-emphasis">_CODE â†’ NOT_</span>BOOTSTRAPPED
<span class="hljs-code">    â†’ BOOTSTRAPPING â†’ NOT_MOUNTED â†’ MOUNTING â†’ MOUNTED
    â†’ UNMOUNTING â†’ NOT_MOUNTED
</span></code></pre>
<h3 data-id="heading-9">3. åº”ç”¨åŠ è½½ä¸æ‰§è¡Œ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ³¨å†Œåº”ç”¨</span>
<span class="hljs-title function_">registerApplication</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"app1"</span>,
  <span class="hljs-attr">app</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">"./app1/main.js"</span>), <span class="hljs-comment">// åŠ¨æ€å¯¼å…¥</span>
  <span class="hljs-attr">activeWhen</span>: <span class="hljs-string">"/app1"</span>, <span class="hljs-comment">// æ¿€æ´»æ¡ä»¶</span>
  <span class="hljs-attr">customProps</span>: { <span class="hljs-attr">authToken</span>: <span class="hljs-string">"xxx"</span> }, <span class="hljs-comment">// ä¼ é€’ç»™å­åº”ç”¨çš„ props</span>
});

<span class="hljs-comment">// å¯åŠ¨</span>
<span class="hljs-title function_">start</span>();
</code></pre>
<h3 data-id="heading-10">4. Import Map æ¨¡å—è§£æ</h3>
<p>Single-SPA æ¨èä½¿ç”¨ Import Map æ¥ç®¡ç†æ¨¡å— URLï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"importmap"</span>&gt;</span><span class="javascript">
  {
    <span class="hljs-string">"imports"</span>: {
      <span class="hljs-string">"react"</span>: <span class="hljs-string">"https://cdn.jsdelivr.net/npm/react@18/umd/react.production.min.js"</span>,
      <span class="hljs-string">"@myorg/app1"</span>: <span class="hljs-string">"https://mycdn.com/app1/main.js"</span>
    }
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>æµè§ˆå™¨ä¼šæ ¹æ® Import Map è§£æ <code>import '@myorg/app1'</code> åˆ°å®é™… URLã€‚</p>
<hr/>
<h2 data-id="heading-11">å››ã€Single-SPA ç”Ÿæ€</h2>
<h3 data-id="heading-12">1. æ ¸å¿ƒåŒ…</h3>

















<table><thead><tr><th>åŒ…å</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>single-spa</code></td><td>æ ¸å¿ƒåº“ï¼Œæä¾›æ³¨å†Œã€å¯åŠ¨ã€ç”Ÿå‘½å‘¨æœŸç®¡ç†</td></tr><tr><td><code>single-spa-layout</code></td><td>å£°æ˜å¼å¸ƒå±€å¼•æ“ï¼Œç”¨ HTML å®šä¹‰è·¯ç”±å’Œå¸ƒå±€</td></tr></tbody></table>
<h3 data-id="heading-13">2. æ¡†æ¶é€‚é…å™¨</h3>

























<table><thead><tr><th>é€‚é…å™¨</th><th>æ¡†æ¶</th></tr></thead><tbody><tr><td><code>single-spa-react</code></td><td>React</td></tr><tr><td><code>single-spa-vue</code></td><td>Vue 2/3</td></tr><tr><td><code>single-spa-angular</code></td><td>Angular</td></tr><tr><td><code>single-spa-svelte</code></td><td>Svelte</td></tr></tbody></table>
<h3 data-id="heading-14">3. å¼€å‘å·¥å…·</h3>





















<table><thead><tr><th>å·¥å…·</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>import-map-overrides</code></td><td>è¿è¡Œæ—¶è¦†ç›– Import Mapï¼Œæ–¹ä¾¿æœ¬åœ°è°ƒè¯•</td></tr><tr><td><code>import-map-injector</code></td><td>æ”¯æŒä»è¿œç¨‹ URL åŠ è½½ Import Map</td></tr><tr><td><code>create-single-spa</code></td><td>å®˜æ–¹è„šæ‰‹æ¶ CLI</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-15">äº”ã€é¡¹ç›®ç»“æ„</h2>
<h3 data-id="heading-16">æ¨èçš„ç›®å½•ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">micro-frontends/
â”œâ”€â”€ root-config/              <span class="hljs-comment"># åŸºåº§åº”ç”¨</span>
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ index.ejs         <span class="hljs-comment"># HTML æ¨¡æ¿ + å¸ƒå±€é…ç½®</span>
â”‚   â”‚   â””â”€â”€ root-config.js    <span class="hljs-comment"># åº”ç”¨æ³¨å†Œå’Œå¯åŠ¨</span>
â”‚   â””â”€â”€ webpack.config.js
â”‚
â”œâ”€â”€ navbar/                   <span class="hljs-comment"># å¯¼èˆªæ åº”ç”¨ï¼ˆå§‹ç»ˆæ˜¾ç¤ºï¼‰</span>
â”œâ”€â”€ app1/                     <span class="hljs-comment"># ä¸šåŠ¡åº”ç”¨ 1</span>
â”œâ”€â”€ app2/                     <span class="hljs-comment"># ä¸šåŠ¡åº”ç”¨ 2</span>
â”‚
â”œâ”€â”€ shared/                   <span class="hljs-comment"># å…±äº«æ¨¡å—</span>
â”‚   â”œâ”€â”€ api/                  <span class="hljs-comment"># API å°è£…</span>
â”‚   â””â”€â”€ styleguide/           <span class="hljs-comment"># å…¬å…±æ ·å¼/ç»„ä»¶</span>
â”‚
â””â”€â”€ shared-dependencies/      <span class="hljs-comment"># Import Map é…ç½®</span>
    â””â”€â”€ importmap.json
</code></pre>
<hr/>
<h2 data-id="heading-17">å…­ã€åˆ›å»º Single-SPA é¡¹ç›®</h2>
<h3 data-id="heading-18">æ–¹å¼ä¸€ï¼šä½¿ç”¨å®˜æ–¹è„šæ‰‹æ¶ create-single-spaï¼ˆæ¨èï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…¨å±€å®‰è£…</span>
npm install -g create-single-spa

<span class="hljs-comment"># æˆ–ä½¿ç”¨ npx</span>
npx create-single-spa
</code></pre>
<p>è„šæ‰‹æ¶ä¼šå¼•å¯¼ä½ é€‰æ‹©ï¼š</p>
<ol>
<li>
<p><strong>é¡¹ç›®ç±»å‹</strong>ï¼š</p>
<ul>
<li><code>single-spa root config</code> - åŸºåº§åº”ç”¨</li>
<li><code>single-spa application / parcel</code> - å­åº”ç”¨</li>
<li><code>in-browser utility module</code> - å·¥å…·æ¨¡å—</li>
</ul>
</li>
<li>
<p><strong>æ¡†æ¶</strong>ï¼šReact / Vue / Angular / Svelte / None</p>
</li>
<li>
<p><strong>åŒ…ç®¡ç†å™¨</strong>ï¼šnpm / yarn / pnpm</p>
</li>
</ol>
<h4 data-id="heading-19">åˆ›å»ºåŸºåº§åº”ç”¨</h4>
<pre><code class="hljs language-bash" lang="bash">npx create-single-spa --moduleType root-config
<span class="hljs-comment"># é€‰æ‹©ç»„ç»‡åç§°ï¼Œå¦‚ @myorg</span>
</code></pre>
<h4 data-id="heading-20">åˆ›å»º React å­åº”ç”¨</h4>
<pre><code class="hljs language-bash" lang="bash">npx create-single-spa --moduleType app-parcel --framework react
</code></pre>
<h4 data-id="heading-21">åˆ›å»º Vue å­åº”ç”¨</h4>
<pre><code class="hljs language-bash" lang="bash">npx create-single-spa --moduleType app-parcel --framework vue
</code></pre>
<h3 data-id="heading-22">æ–¹å¼äºŒï¼šæ‰‹åŠ¨é…ç½®</h3>
<p>å¦‚æœéœ€è¦æ›´å¤šæ§åˆ¶ï¼Œå¯ä»¥æ‰‹åŠ¨é…ç½®ï¼š</p>
<h4 data-id="heading-23">1. åŸºåº§åº”ç”¨ (root-config)</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> root-config &amp;&amp; <span class="hljs-built_in">cd</span> root-config
npm init -y
npm install single-spa single-spa-layout
npm install -D webpack webpack-cli webpack-dev-server html-webpack-plugin
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/root-config.js</span>
<span class="hljs-keyword">import</span> { registerApplication, start } <span class="hljs-keyword">from</span> <span class="hljs-string">"single-spa"</span>;
<span class="hljs-keyword">import</span> {
  constructApplications,
  constructRoutes,
  constructLayoutEngine,
} <span class="hljs-keyword">from</span> <span class="hljs-string">"single-spa-layout"</span>;

<span class="hljs-keyword">const</span> routes = <span class="hljs-title function_">constructRoutes</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"#single-spa-layout"</span>));
<span class="hljs-keyword">const</span> applications = <span class="hljs-title function_">constructApplications</span>({
  routes,
  <span class="hljs-attr">loadApp</span>: <span class="hljs-function">(<span class="hljs-params">{ name }</span>) =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackIgnore: true */</span> name),
});

applications.<span class="hljs-title function_">forEach</span>(registerApplication);
<span class="hljs-title function_">constructLayoutEngine</span>({ routes, applications }).<span class="hljs-title function_">activate</span>();
<span class="hljs-title function_">start</span>();
</code></pre>
<h4 data-id="heading-24">2. React å­åº”ç”¨</h4>
<pre><code class="hljs language-bash" lang="bash">npm install single-spa-react react react-dom
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/main.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOMClient</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"react-dom/client"</span>;
<span class="hljs-keyword">import</span> singleSpaReact <span class="hljs-keyword">from</span> <span class="hljs-string">"single-spa-react"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./App"</span>;

<span class="hljs-keyword">const</span> lifecycles = <span class="hljs-title function_">singleSpaReact</span>({
  <span class="hljs-title class_">React</span>,
  <span class="hljs-title class_">ReactDOMClient</span>,
  <span class="hljs-attr">rootComponent</span>: <span class="hljs-title class_">App</span>,
  <span class="hljs-title function_">errorBoundary</span>(<span class="hljs-params">err, info, props</span>) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Error<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  },
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> { bootstrap, mount, unmount } = lifecycles;
</code></pre>
<h4 data-id="heading-25">3. Vue å­åº”ç”¨</h4>
<pre><code class="hljs language-bash" lang="bash">npm install single-spa-vue vue
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/main.js</span>
<span class="hljs-keyword">import</span> { createApp, h } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">import</span> singleSpaVue <span class="hljs-keyword">from</span> <span class="hljs-string">"single-spa-vue"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./App.vue"</span>;

<span class="hljs-keyword">const</span> vueLifecycles = <span class="hljs-title function_">singleSpaVue</span>({
  createApp,
  <span class="hljs-attr">appOptions</span>: {
    <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">h</span>(<span class="hljs-title class_">App</span>);
    },
  },
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> { bootstrap, mount, unmount } = vueLifecycles;
</code></pre>
<h3 data-id="heading-26">æ–¹å¼ä¸‰ï¼šå‚è€ƒå®˜æ–¹ç¤ºä¾‹ä»“åº“</h3>

























<table><thead><tr><th>ç¤ºä¾‹</th><th>åœ°å€</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>React ç¤ºä¾‹</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Freact-microfrontends" target="_blank" title="https://github.com/react-microfrontends" ref="nofollow noopener noreferrer">github.com/react-microâ€¦</a></td><td>å®Œæ•´çš„ React å¾®å‰ç«¯ç¤ºä¾‹</td></tr><tr><td>Vue ç¤ºä¾‹</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvue-microfrontends" target="_blank" title="https://github.com/vue-microfrontends" ref="nofollow noopener noreferrer">github.com/vue-microfrâ€¦</a></td><td>å®Œæ•´çš„ Vue å¾®å‰ç«¯ç¤ºä¾‹</td></tr><tr><td>æ··åˆæ¡†æ¶ç¤ºä¾‹</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpolyglot-microfrontends" target="_blank" title="https://github.com/polyglot-microfrontends" ref="nofollow noopener noreferrer">github.com/polyglot-miâ€¦</a></td><td>React + Vue + Angular æ··åˆ</td></tr></tbody></table>
<p>åœ¨çº¿æ¼”ç¤ºï¼š</p>
<ul>
<li>React: <a href="https://link.juejin.cn?target=https%3A%2F%2Freact.microfrontends.app" target="_blank" title="https://react.microfrontends.app" ref="nofollow noopener noreferrer">react.microfrontends.app</a></li>
<li>Vue: <a href="https://link.juejin.cn?target=https%3A%2F%2Fvue.microfrontends.app" target="_blank" title="https://vue.microfrontends.app" ref="nofollow noopener noreferrer">vue.microfrontends.app</a></li>
</ul>
<hr/>
<h2 data-id="heading-27">ä¸ƒã€å¼€å‘è°ƒè¯•æŠ€å·§</h2>
<h3 data-id="heading-28">1. ä½¿ç”¨ import-map-overrides</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨æµè§ˆå™¨æ§åˆ¶å°å¯ç”¨å¼€å‘å·¥å…·</span>
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">"devtools"</span>, <span class="hljs-literal">true</span>);

<span class="hljs-comment">// åˆ·æ–°é¡µé¢åï¼Œå³ä¸‹è§’ä¼šå‡ºç°å¼€å‘å·¥å…·é¢æ¿</span>
<span class="hljs-comment">// å¯ä»¥å°†ä»»æ„æ¨¡å—æŒ‡å‘æœ¬åœ°å¼€å‘æœåŠ¡å™¨</span>
</code></pre>
<h3 data-id="heading-29">2. æœ¬åœ°å¼€å‘æµç¨‹</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å¯åŠ¨æœ¬åœ°å­åº”ç”¨</span>
<span class="hljs-built_in">cd</span> my-app &amp;&amp; npm start --port 9001

<span class="hljs-comment"># 2. è®¿é—®çº¿ä¸Š/æœ¬åœ°åŸºåº§</span>
<span class="hljs-comment"># 3. ä½¿ç”¨ import-map-overrides å°† @myorg/my-app æŒ‡å‘ localhost:9001</span>
</code></pre>
<h3 data-id="heading-30">3. ç‹¬ç«‹è¿è¡Œå­åº”ç”¨</h3>
<p>å­åº”ç”¨åº”è¯¥èƒ½å¤Ÿç‹¬ç«‹è¿è¡Œï¼Œæ–¹ä¾¿å¼€å‘è°ƒè¯•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦åœ¨ single-spa ç¯å¢ƒä¸­</span>
<span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">window</span>.<span class="hljs-property">singleSpaNavigate</span>) {
  <span class="hljs-comment">// ç‹¬ç«‹è¿è¡Œ</span>
  <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"root"</span>)).<span class="hljs-title function_">render</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>);
}
</code></pre>
<hr/>
<h2 data-id="heading-31">å…«ã€Single-SPA vs å…¶ä»–æ–¹æ¡ˆ</h2>















































<table><thead><tr><th>ç‰¹æ€§</th><th>single-spa</th><th>qiankun</th><th>micro-app</th></tr></thead><tbody><tr><td>Entry ç±»å‹</td><td>JS Entry</td><td>HTML Entry</td><td>HTML Entry</td></tr><tr><td>æ²™ç®±éš”ç¦»</td><td>âŒ æ— å†…ç½®</td><td>âœ… Proxy æ²™ç®±</td><td>âœ… æ²™ç®±éš”ç¦»</td></tr><tr><td>æ ·å¼éš”ç¦»</td><td>âŒ æ— å†…ç½®</td><td>âœ… Shadow DOM / Scoped</td><td>âœ… æ ·å¼éš”ç¦»</td></tr><tr><td>è€é¡¹ç›®æ”¹é€ </td><td>è¾ƒé«˜</td><td>æä½</td><td>æä½</td></tr><tr><td>çµæ´»æ€§</td><td>â˜…â˜…â˜…â˜…â˜…</td><td>â˜…â˜…â˜…â˜…</td><td>â˜…â˜…â˜…</td></tr><tr><td>å­¦ä¹ æ›²çº¿</td><td>è¾ƒé™¡</td><td>ä¸­ç­‰</td><td>è¾ƒå¹³ç¼“</td></tr></tbody></table>
<h3 data-id="heading-32">é€‰æ‹©å»ºè®®</h3>
<ul>
<li><strong>é€‰ single-spa</strong>ï¼šéœ€è¦æœ€å¤§çµæ´»æ€§ã€æ·±å…¥ç†è§£å¾®å‰ç«¯åŸç†ã€æŠ€æœ¯èƒ½åŠ›å¼ºçš„å›¢é˜Ÿ</li>
<li><strong>é€‰ qiankun</strong>ï¼šä¼ä¸šçº§é¡¹ç›®ã€å¤šå†å²ç³»ç»Ÿæ¥å…¥ã€éœ€è¦å¼€ç®±å³ç”¨çš„æ²™ç®±å’Œéš”ç¦»</li>
<li><strong>é€‰ micro-app</strong>ï¼šå¿«é€Ÿä¸Šæ‰‹ã€ç»„ä»¶åŒ–æ€ç»´ã€Vue æŠ€æœ¯æ ˆä¸ºä¸»</li>
</ul>
<hr/>
<h2 data-id="heading-33">ä¹ã€æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-34">1. å…±äº«ä¾èµ–</h3>
<p>é€šè¿‡ Import Map å…±äº«å…¬å…±ä¾èµ–ï¼Œé¿å…é‡å¤åŠ è½½ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"imports"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"react"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://cdn.jsdelivr.net/npm/react@18/..."</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"react-dom"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://cdn.jsdelivr.net/npm/react-dom@18/..."</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-35">2. æ ·å¼éš”ç¦»</h3>
<p>Single-SPA ä¸æä¾›å†…ç½®æ ·å¼éš”ç¦»ï¼Œéœ€è¦è‡ªè¡Œå¤„ç†ï¼š</p>
<ul>
<li>CSS Modules</li>
<li>CSS-in-JS (styled-components, emotion)</li>
<li>BEM å‘½åè§„èŒƒ</li>
<li>æ·»åŠ åº”ç”¨å‰ç¼€</li>
</ul>
<h3 data-id="heading-36">3. å…¨å±€çŠ¶æ€ç®¡ç†</h3>
<ul>
<li>ä½¿ç”¨ Utility æ¨¡å—å…±äº«çŠ¶æ€</li>
<li>å‘å¸ƒè®¢é˜…æ¨¡å¼ (EventBus)</li>
<li>é€šè¿‡ customProps ä¼ é€’</li>
</ul>
<h3 data-id="heading-37">4. é”™è¯¯è¾¹ç•Œ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">singleSpaReact</span>({
  <span class="hljs-comment">// ...</span>
  <span class="hljs-title function_">errorBoundary</span>(<span class="hljs-params">err, info, props</span>) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ErrorPage</span> <span class="hljs-attr">error</span>=<span class="hljs-string">{err}</span> /&gt;</span></span>;
  },
});
</code></pre>
<hr/>
<h2 data-id="heading-38">åã€å­¦ä¹ èµ„æº</h2>
<h3 data-id="heading-39">å®˜æ–¹èµ„æº</h3>
<ul>
<li>å®˜æ–¹æ–‡æ¡£: <a href="https://link.juejin.cn?target=https%3A%2F%2Fsingle-spa.js.org%2Fdocs%2Fgetting-started-overview" target="_blank" title="https://single-spa.js.org/docs/getting-started-overview" ref="nofollow noopener noreferrer">single-spa.js.org/docs/gettinâ€¦</a></li>
<li>æ¨èè®¾ç½®: <a href="https://link.juejin.cn?target=https%3A%2F%2Fsingle-spa.js.org%2Fdocs%2Frecommended-setup" target="_blank" title="https://single-spa.js.org/docs/recommended-setup" ref="nofollow noopener noreferrer">single-spa.js.org/docs/recommâ€¦</a></li>
<li>GitHub: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsingle-spa%2Fsingle-spa" target="_blank" title="https://github.com/single-spa/single-spa" ref="nofollow noopener noreferrer">github.com/single-spa/â€¦</a></li>
</ul>
<h3 data-id="heading-40">è§†é¢‘æ•™ç¨‹</h3>
<ul>
<li>YouTube å®˜æ–¹æ•™ç¨‹: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fplaylist%3Flist%3DPLLUD8RtHvsAOhtHnyGx57EYXoaNsxGrTU" target="_blank" title="https://www.youtube.com/playlist?list=PLLUD8RtHvsAOhtHnyGx57EYXoaNsxGrTU" ref="nofollow noopener noreferrer">www.youtube.com/playlist?liâ€¦</a></li>
<li>B ç«™æ•™ç¨‹: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2Fav83498486%2F" target="_blank" title="https://www.bilibili.com/video/av83498486/" ref="nofollow noopener noreferrer">www.bilibili.com/video/av834â€¦</a></li>
</ul>
<h3 data-id="heading-41">ç›¸å…³è§„èŒƒ</h3>
<ul>
<li>Import Map è§„èŒƒ: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FWICG%2Fimport-maps" target="_blank" title="https://github.com/WICG/import-maps" ref="nofollow noopener noreferrer">github.com/WICG/importâ€¦</a></li>
<li>ES Modules: <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FGuide%2FModules" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules" ref="nofollow noopener noreferrer">developer.mozilla.org/en-US/docs/â€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Retrofit å†…éƒ¨å·¥ä½œåŸç†æ—¶åºå›¾]]></title>    <link>https://juejin.cn/post/7588139768275173427</link>    <guid>https://juejin.cn/post/7588139768275173427</guid>    <pubDate>2025-12-28T02:32:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588139768275173427" data-draft-id="7588084804093820966" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Retrofit å†…éƒ¨å·¥ä½œåŸç†æ—¶åºå›¾"/> <meta itemprop="keywords" content="æ¶æ„,å¼€æº"/> <meta itemprop="datePublished" content="2025-12-28T02:32:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹¾å¤ä¸€æ°”æ€"/> <meta itemprop="url" content="https://juejin.cn/user/4212984289955431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Retrofit å†…éƒ¨å·¥ä½œåŸç†æ—¶åºå›¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984289955431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹¾å¤ä¸€æ°”æ€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T02:32:41.000Z" title="Sun Dec 28 2025 02:32:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Retrofit å†…éƒ¨å·¥ä½œåŸç†æ—¶åºå›¾</h2>
<p>æœ¬æ–‡æ¡£æ·±å…¥å‰–æRetrofitæ¡†æ¶å†…éƒ¨çš„å·¥ä½œæœºåˆ¶ï¼Œå±•ç¤ºå…¶æ ¸å¿ƒç»„ä»¶çš„äº¤äº’æµç¨‹ã€‚</p>
<h3 data-id="heading-1">1. Retrofit æ„å»ºæµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Client as å¼€å‘è€…ä»£ç 
    participant Builder as Retrofit.Builder
    participant Platform as Platform
    participant Executor as Executor
    participant Retrofit as Retrofit

    Client-&gt;&gt;Builder: new Retrofit.Builder()
    activate Builder

    Client-&gt;&gt;Builder: baseUrl(url)
    Builder-&gt;&gt;Builder: éªŒè¯URLæ ¼å¼
    Builder-&gt;&gt;Builder: ä¿å­˜baseUrl

    Client-&gt;&gt;Builder: client(okHttpClient)
    Builder-&gt;&gt;Builder: ä¿å­˜OkHttpClientå®ä¾‹

    Client-&gt;&gt;Builder: addConverterFactory(factory)
    Builder-&gt;&gt;Builder: converterFactories.add(factory)

    Client-&gt;&gt;Builder: addCallAdapterFactory(factory)
    Builder-&gt;&gt;Builder: callAdapterFactories.add(factory)

    Client-&gt;&gt;Builder: build()
    Builder-&gt;&gt;Platform: Platform.get()
    activate Platform
    Platform-&gt;&gt;Platform: æ£€æµ‹è¿è¡Œå¹³å°&lt;br/&gt;(Android/Java8/é»˜è®¤)
    Platform--&gt;&gt;Builder: è¿”å›Platformå®ä¾‹
    deactivate Platform

    Builder-&gt;&gt;Executor: platform.defaultCallbackExecutor()
    activate Executor
    Executor--&gt;&gt;Builder: è¿”å›é»˜è®¤Executor&lt;br/&gt;(Androidä¸ºMainThreadExecutor)
    deactivate Executor

    Builder-&gt;&gt;Builder: æ·»åŠ å¹³å°é»˜è®¤CallAdapterFactory
    Builder-&gt;&gt;Retrofit: new Retrofit(...)
    activate Retrofit
    Retrofit-&gt;&gt;Retrofit: åˆå§‹åŒ–æˆå‘˜å˜é‡
    Retrofit--&gt;&gt;Builder: è¿”å›Retrofitå®ä¾‹
    deactivate Retrofit

    Builder--&gt;&gt;Client: è¿”å›Retrofitå®ä¾‹
    deactivate Builder
</code></pre>
<h3 data-id="heading-2">2. åŠ¨æ€ä»£ç†åˆ›å»º API æ¥å£å®ä¾‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Client as å¼€å‘è€…ä»£ç 
    participant Retrofit as Retrofit
    participant Proxy as Proxy.newProxyInstance
    participant Handler as InvocationHandler
    participant ServiceMethod as ServiceMethod
    participant Cache as serviceMethodCache

    Client-&gt;&gt;Retrofit: create(ApiService.class)
    activate Retrofit

    Retrofit-&gt;&gt;Retrofit: validateServiceInterface(service)
    Retrofit-&gt;&gt;Retrofit: æ£€æŸ¥æ˜¯å¦ä¸ºæ¥å£
    Retrofit-&gt;&gt;Retrofit: æ£€æŸ¥æ¥å£ä¸­çš„æ³›å‹

    Retrofit-&gt;&gt;Proxy: Proxy.newProxyInstance()
    activate Proxy

    Note over Proxy,Handler: åˆ›å»ºåŠ¨æ€ä»£ç†å¯¹è±¡
    Proxy-&gt;&gt;Handler: ä¼ å…¥InvocationHandler
    activate Handler

    Handler-&gt;&gt;Handler: å®šä¹‰invokeæ–¹æ³•é€»è¾‘&lt;br/&gt;- å¤„ç†Objectæ–¹æ³•&lt;br/&gt;- å¤„ç†defaultæ–¹æ³•&lt;br/&gt;- å¤„ç†æ¥å£æ–¹æ³•

    Proxy--&gt;&gt;Retrofit: è¿”å›ä»£ç†å¯¹è±¡
    deactivate Proxy
    deactivate Handler

    Retrofit--&gt;&gt;Client: è¿”å›ApiServiceä»£ç†å®ä¾‹
    deactivate Retrofit

    Note over Client,Cache: å½“è°ƒç”¨æ¥å£æ–¹æ³•æ—¶è§¦å‘
    Client-&gt;&gt;Handler: method.invoke(proxy, args)
    activate Handler

    Handler-&gt;&gt;Cache: serviceMethodCache.get(method)
    activate Cache

    alt ç¼“å­˜å­˜åœ¨
        Cache--&gt;&gt;Handler: è¿”å›ç¼“å­˜çš„ServiceMethod
    else ç¼“å­˜ä¸å­˜åœ¨
        Cache-&gt;&gt;ServiceMethod: ServiceMethod.parseAnnotations()
        activate ServiceMethod
        ServiceMethod-&gt;&gt;ServiceMethod: è§£ææ–¹æ³•æ³¨è§£å’Œå‚æ•°
        ServiceMethod--&gt;&gt;Cache: è¿”å›ServiceMethod
        deactivate ServiceMethod
        Cache-&gt;&gt;Cache: cache.put(method, serviceMethod)
        Cache--&gt;&gt;Handler: è¿”å›æ–°å»ºçš„ServiceMethod
    end
    deactivate Cache

    Handler-&gt;&gt;ServiceMethod: invoke(args)
    Handler--&gt;&gt;Client: è¿”å›Callå¯¹è±¡
    deactivate Handler
</code></pre>
<h3 data-id="heading-3">3. ServiceMethod è§£æè¿‡ç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Handler as InvocationHandler
    participant SMParser as ServiceMethod.parseAnnotations()
    participant RFParser as RequestFactory.parseAnnotations()
    participant HttpMethod as HttpServiceMethod
    participant CallAdapter as CallAdapter.Factory
    participant Converter as Converter.Factory

    Handler-&gt;&gt;SMParser: parseAnnotations(retrofit, method)
    activate SMParser

    SMParser-&gt;&gt;RFParser: RequestFactory.parseAnnotations()
    activate RFParser

    Note over RFParser: è§£ææ–¹æ³•æ³¨è§£
    RFParser-&gt;&gt;RFParser: è§£æHTTPæ–¹æ³•æ³¨è§£&lt;br/&gt;@GET/@POST/@PUT/@DELETEç­‰
    RFParser-&gt;&gt;RFParser: æå–HTTPæ–¹æ³•å’Œç›¸å¯¹URL
    RFParser-&gt;&gt;RFParser: è§£æ@Headersæ³¨è§£
    RFParser-&gt;&gt;RFParser: æ˜¯å¦åŒ…å«body(@Body)
    RFParser-&gt;&gt;RFParser: æ˜¯å¦multipart(@Multipart)
    RFParser-&gt;&gt;RFParser: æ˜¯å¦form-encoded(@FormUrlEncoded)

    Note over RFParser: è§£ææ–¹æ³•å‚æ•°æ³¨è§£
    loop éå†æ¯ä¸ªå‚æ•°
        RFParser-&gt;&gt;RFParser: è§£æå‚æ•°æ³¨è§£&lt;br/&gt;@Path/@Query/@Header&lt;br/&gt;@Body/@Fieldç­‰
        RFParser-&gt;&gt;RFParser: åˆ›å»ºParameterHandler
    end

    RFParser--&gt;&gt;SMParser: è¿”å›RequestFactory
    deactivate RFParser

    SMParser-&gt;&gt;SMParser: è·å–æ–¹æ³•è¿”å›ç±»å‹
    SMParser-&gt;&gt;CallAdapter: æŸ¥æ‰¾åŒ¹é…çš„CallAdapter
    activate CallAdapter

    loop éå†CallAdapterFactories
        CallAdapter-&gt;&gt;CallAdapter: factory.get(returnType, annotations)
        alt æ‰¾åˆ°åŒ¹é…çš„Factory
            CallAdapter--&gt;&gt;SMParser: è¿”å›CallAdapter
        end
    end
    deactivate CallAdapter

    SMParser-&gt;&gt;Converter: æŸ¥æ‰¾å“åº”ä½“Converter
    activate Converter

    Converter-&gt;&gt;Converter: æå–å“åº”ç±»å‹
    loop éå†ConverterFactories
        Converter-&gt;&gt;Converter: factory.responseBodyConverter()
        alt æ‰¾åˆ°åŒ¹é…çš„Converter
            Converter--&gt;&gt;SMParser: è¿”å›Converter
        end
    end
    deactivate Converter

    SMParser-&gt;&gt;HttpMethod: åˆ›å»ºHttpServiceMethod
    activate HttpMethod
    HttpMethod-&gt;&gt;HttpMethod: ä¿å­˜RequestFactory
    HttpMethod-&gt;&gt;HttpMethod: ä¿å­˜CallAdapter
    HttpMethod-&gt;&gt;HttpMethod: ä¿å­˜ResponseConverter
    HttpMethod--&gt;&gt;SMParser: è¿”å›HttpServiceMethod
    deactivate HttpMethod

    SMParser--&gt;&gt;Handler: è¿”å›ServiceMethod
    deactivate SMParser
</code></pre>
<h3 data-id="heading-4">4. OkHttpCall åˆ›å»ºå’Œæ‰§è¡Œæµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Client as å¼€å‘è€…ä»£ç 
    participant ServiceMethod as HttpServiceMethod
    participant OkHttpCall as OkHttpCall
    participant RequestFactory as RequestFactory
    participant RealCall as okhttp3.Call
    participant Callback as Retrofit Callback

    Client-&gt;&gt;ServiceMethod: invoke(args)
    activate ServiceMethod

    ServiceMethod-&gt;&gt;RequestFactory: create(args)
    activate RequestFactory

    Note over RequestFactory: æ„å»ºOkHttp Request
    RequestFactory-&gt;&gt;RequestFactory: åº”ç”¨RequestBuilder
    RequestFactory-&gt;&gt;RequestFactory: æ„å»ºå®Œæ•´URL(baseUrl + ç›¸å¯¹è·¯å¾„)

    loop å¤„ç†æ¯ä¸ªå‚æ•°
        RequestFactory-&gt;&gt;RequestFactory: parameterHandler.apply(requestBuilder, value)
        Note over RequestFactory: @Pathæ›¿æ¢URLè·¯å¾„&lt;br/&gt;@Queryæ·»åŠ æŸ¥è¯¢å‚æ•°&lt;br/&gt;@Headeræ·»åŠ è¯·æ±‚å¤´&lt;br/&gt;@Bodyè®¾ç½®è¯·æ±‚ä½“
    end

    RequestFactory-&gt;&gt;RequestFactory: requestBuilder.build()
    RequestFactory--&gt;&gt;ServiceMethod: è¿”å›okhttp3.Request
    deactivate RequestFactory

    ServiceMethod-&gt;&gt;OkHttpCall: new OkHttpCall(requestFactory, args, callFactory, responseConverter)
    activate OkHttpCall
    OkHttpCall-&gt;&gt;OkHttpCall: ä¿å­˜è¯·æ±‚å‚æ•°
    OkHttpCall--&gt;&gt;ServiceMethod: è¿”å›OkHttpCallå®ä¾‹
    deactivate OkHttpCall

    ServiceMethod-&gt;&gt;ServiceMethod: adapt(okHttpCall, args)
    Note over ServiceMethod: ä½¿ç”¨CallAdapteråŒ…è£…
    ServiceMethod--&gt;&gt;Client: è¿”å›é€‚é…åçš„Call
    deactivate ServiceMethod

    Note over Client,Callback: å¼‚æ­¥æ‰§è¡Œè¯·æ±‚
    Client-&gt;&gt;OkHttpCall: enqueue(callback)
    activate OkHttpCall

    OkHttpCall-&gt;&gt;OkHttpCall: åˆ›å»ºokhttp3.Request
    OkHttpCall-&gt;&gt;RealCall: callFactory.newCall(request)
    activate RealCall
    RealCall--&gt;&gt;OkHttpCall: è¿”å›okhttp3.Call
    deactivate RealCall

    OkHttpCall-&gt;&gt;RealCall: call.enqueue(okhttp3.Callback)
    activate RealCall

    Note over RealCall: OkHttpæ‰§è¡Œç½‘ç»œè¯·æ±‚
    RealCall-&gt;&gt;RealCall: é€šè¿‡æ‹¦æˆªå™¨é“¾æ‰§è¡Œ
    RealCall-&gt;&gt;RealCall: è¿”å›okhttp3.Response

    RealCall--&gt;&gt;OkHttpCall: onResponse(call, response)
    deactivate RealCall

    alt å“åº”æˆåŠŸ(2xx)
        OkHttpCall-&gt;&gt;OkHttpCall: parseResponse(rawResponse)
        OkHttpCall-&gt;&gt;OkHttpCall: converter.convert(responseBody)
        OkHttpCall-&gt;&gt;Callback: callback.onResponse(call, Response.success(body))
    else å“åº”å¤±è´¥(é2xx)
        OkHttpCall-&gt;&gt;OkHttpCall: åˆ›å»ºé”™è¯¯ResponseBody
        OkHttpCall-&gt;&gt;Callback: callback.onResponse(call, Response.error(errorBody))
    end

    deactivate OkHttpCall

    Callback--&gt;&gt;Client: å¤„ç†å“åº”ç»“æœ
</code></pre>
<h3 data-id="heading-5">5. åŒæ­¥è¯·æ±‚æ‰§è¡Œæµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Client as å¼€å‘è€…ä»£ç 
    participant OkHttpCall as OkHttpCall
    participant RealCall as okhttp3.Call
    participant Converter as ResponseConverter

    Client-&gt;&gt;OkHttpCall: execute()
    activate OkHttpCall

    OkHttpCall-&gt;&gt;OkHttpCall: æ£€æŸ¥æ˜¯å¦å·²æ‰§è¡Œ&lt;br/&gt;(executedæ ‡å¿—)

    alt å·²ç»æ‰§è¡Œè¿‡
        OkHttpCall--&gt;&gt;Client: throw IllegalStateException
    end

    OkHttpCall-&gt;&gt;OkHttpCall: executed = true
    OkHttpCall-&gt;&gt;OkHttpCall: åˆ›å»ºokhttp3.Request
    OkHttpCall-&gt;&gt;RealCall: callFactory.newCall(request)
    activate RealCall
    RealCall--&gt;&gt;OkHttpCall: è¿”å›Callå®ä¾‹
    deactivate RealCall

    OkHttpCall-&gt;&gt;RealCall: rawCall.execute()
    activate RealCall

    Note over RealCall: åŒæ­¥é˜»å¡æ‰§è¡Œ
    RealCall-&gt;&gt;RealCall: ç»è¿‡æ‹¦æˆªå™¨é“¾
    RealCall-&gt;&gt;RealCall: å‘é€ç½‘ç»œè¯·æ±‚
    RealCall-&gt;&gt;RealCall: ç­‰å¾…å“åº”

    RealCall--&gt;&gt;OkHttpCall: è¿”å›okhttp3.Response
    deactivate RealCall

    OkHttpCall-&gt;&gt;OkHttpCall: parseResponse(rawResponse)
    activate OkHttpCall

    alt HTTPçŠ¶æ€ç  2xx
        OkHttpCall-&gt;&gt;Converter: convert(response.body())
        activate Converter
        Converter-&gt;&gt;Converter: è§£æå“åº”ä½“&lt;br/&gt;(å¦‚JSONè½¬å¯¹è±¡)
        Converter--&gt;&gt;OkHttpCall: è¿”å›è§£æåçš„å¯¹è±¡
        deactivate Converter
        OkHttpCall-&gt;&gt;OkHttpCall: Response.success(body, rawResponse)
    else HTTPçŠ¶æ€ç é2xx
        OkHttpCall-&gt;&gt;Converter: convert(response.errorBody())
        activate Converter
        Converter--&gt;&gt;OkHttpCall: è¿”å›é”™è¯¯ä½“
        deactivate Converter
        OkHttpCall-&gt;&gt;OkHttpCall: Response.error(errorBody, rawResponse)
    end

    OkHttpCall--&gt;&gt;Client: è¿”å›Response
    deactivate OkHttpCall
</code></pre>
<h3 data-id="heading-6">6. åç¨‹æ”¯æŒæœºåˆ¶ï¼ˆSuspend Functionï¼‰</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Client as å®¢æˆ·ç«¯åç¨‹
    participant Handler as InvocationHandler
    participant ServiceMethod as SuspendForResponse
    participant Call as OkHttpCall
    participant Continuation as Continuation
    participant Dispatcher as åç¨‹è°ƒåº¦å™¨
    participant OkHttp as OkHttpClient
    participant Converter as ResponseConverter

    Note over Client,Handler: è°ƒç”¨suspendå‡½æ•°
    Client-&gt;&gt;Handler: invoke(suspendMethod, args)
    activate Handler

    Handler-&gt;&gt;Handler: æ£€æµ‹åˆ°suspendå‡½æ•°
    Handler-&gt;&gt;Handler: æå–Continuationå‚æ•°
    Handler-&gt;&gt;Continuation: è·å–åç¨‹ä¸Šä¸‹æ–‡
    activate Continuation

    Handler-&gt;&gt;ServiceMethod: loadServiceMethod(method)
    activate ServiceMethod

    Note over ServiceMethod: è¯†åˆ«ä¸ºsuspendå‡½æ•°
    ServiceMethod-&gt;&gt;ServiceMethod: æ£€æŸ¥è¿”å›ç±»å‹
    ServiceMethod-&gt;&gt;ServiceMethod: åˆ›å»ºSuspendForResponse
    ServiceMethod--&gt;&gt;Handler: è¿”å›ServiceMethod
    deactivate ServiceMethod

    Handler-&gt;&gt;ServiceMethod: invoke(args)
    activate ServiceMethod

    ServiceMethod-&gt;&gt;Call: åˆ›å»ºOkHttpCall
    activate Call
    Call--&gt;&gt;ServiceMethod: è¿”å›Callå¯¹è±¡
    deactivate Call

    Note over ServiceMethod: ä¸ä½¿ç”¨CallAdapter
    ServiceMethod-&gt;&gt;Call: awaitResponse()
    activate Call

    Note over Call,Dispatcher: åç¨‹æŒ‚èµ·ç‚¹
    Call-&gt;&gt;Call: suspendCancellableCoroutine
    Call-&gt;&gt;Dispatcher: åˆ‡æ¢åˆ°IOçº¿ç¨‹
    activate Dispatcher

    Dispatcher-&gt;&gt;OkHttp: call.enqueue()
    activate OkHttp

    Note over OkHttp: å¼‚æ­¥æ‰§è¡Œç½‘ç»œè¯·æ±‚
    OkHttp-&gt;&gt;OkHttp: æ‹¦æˆªå™¨é“¾å¤„ç†
    OkHttp-&gt;&gt;OkHttp: å‘é€HTTPè¯·æ±‚
    OkHttp-&gt;&gt;OkHttp: æ¥æ”¶å“åº”

    OkHttp--&gt;&gt;Dispatcher: onResponseå›è°ƒ
    deactivate OkHttp

    Dispatcher-&gt;&gt;Call: æ¢å¤åç¨‹
    deactivate Dispatcher

    Call-&gt;&gt;Call: parseResponse()
    alt HTTP 2xx
        Call-&gt;&gt;Converter: convert(responseBody)
        activate Converter
        Converter-&gt;&gt;Converter: JSONè½¬å¯¹è±¡
        Converter--&gt;&gt;Call: è¿”å›è§£æåçš„å¯¹è±¡
        deactivate Converter
        Call-&gt;&gt;Continuation: resume(result)
    else HTTPé2xx
        Call-&gt;&gt;Call: åˆ›å»ºHttpException
        Call-&gt;&gt;Continuation: resumeWithException(error)
    end

    Call--&gt;&gt;ServiceMethod: è¿”å›ç»“æœ
    deactivate Call

    ServiceMethod--&gt;&gt;Handler: è¿”å›ç»“æœ
    deactivate ServiceMethod

    Handler--&gt;&gt;Client: åç¨‹æ¢å¤æ‰§è¡Œ
    deactivate Handler
    deactivate Continuation

    Client-&gt;&gt;Client: ç»§ç»­æ‰§è¡Œåç»­ä»£ç 
</code></pre>
<h3 data-id="heading-7">7. åç¨‹å–æ¶ˆæœºåˆ¶</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Scope as CoroutineScope
    participant Job as Job
    participant Continuation as CancellableContinuation
    participant Call as OkHttpCall
    participant OkHttp as okhttp3.Call

    Note over Scope,Job: åç¨‹å¯åŠ¨
    Scope-&gt;&gt;Job: launch/async
    activate Job
    Job-&gt;&gt;Call: æ‰§è¡Œsuspendå‡½æ•°
    activate Call

    Call-&gt;&gt;Continuation: suspendCancellableCoroutine
    activate Continuation

    Continuation-&gt;&gt;Continuation: invokeOnCancellationå›è°ƒ
    Note over Continuation: æ³¨å†Œå–æ¶ˆç›‘å¬å™¨

    Call-&gt;&gt;OkHttp: call.enqueue()
    activate OkHttp
    Note over OkHttp: ç½‘ç»œè¯·æ±‚è¿›è¡Œä¸­

    Note over Scope,Job: ç”¨æˆ·å–æ¶ˆåç¨‹
    Scope-&gt;&gt;Job: job.cancel()
    activate Scope
    Job-&gt;&gt;Job: æ ‡è®°ä¸ºå·²å–æ¶ˆ

    Job-&gt;&gt;Continuation: cancel()
    Continuation-&gt;&gt;Continuation: è§¦å‘invokeOnCancellation

    Continuation-&gt;&gt;Call: æ‰§è¡Œå–æ¶ˆå›è°ƒ
    Call-&gt;&gt;OkHttp: call.cancel()
    OkHttp-&gt;&gt;OkHttp: å–æ¶ˆç½‘ç»œè¯·æ±‚
    OkHttp--&gt;&gt;Call: IOException(Canceled)
    deactivate OkHttp

    Call-&gt;&gt;Continuation: resumeWithException(CancellationException)
    Continuation--&gt;&gt;Job: æŠ›å‡ºCancellationException
    deactivate Continuation
    deactivate Call

    Job--&gt;&gt;Scope: åç¨‹å·²å–æ¶ˆ
    deactivate Job
    deactivate Scope
</code></pre>
<h3 data-id="heading-8">8. CallAdapter å·¥ä½œæœºåˆ¶</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Retrofit as Retrofit
    participant Factory as CallAdapter.Factory
    participant Adapter as CallAdapter
    participant TargetType as ç›®æ ‡ç±»å‹å¯¹è±¡

    Note over Retrofit,Factory: ç¬¬ä¸€é˜¶æ®µï¼šæŸ¥æ‰¾CallAdapter
    Retrofit-&gt;&gt;Retrofit: callAdapter(returnType, annotations)
    activate Retrofit

    loop éå†callAdapterFactories
        Retrofit-&gt;&gt;Factory: factory.get(returnType, annotations, retrofit)
        activate Factory
        Factory-&gt;&gt;Factory: æ£€æŸ¥è¿”å›ç±»å‹æ˜¯å¦åŒ¹é…

        alt ç±»å‹åŒ¹é…
            Factory-&gt;&gt;Adapter: åˆ›å»ºCallAdapterå®ä¾‹
            activate Adapter
            Adapter-&gt;&gt;Adapter: è®¾ç½®responseType
            Adapter--&gt;&gt;Factory: è¿”å›Adapter
            deactivate Adapter
            Factory--&gt;&gt;Retrofit: è¿”å›CallAdapter
            Note over Retrofit: æ‰¾åˆ°åŒ¹é…çš„Adapteråœæ­¢éå†
        else ç±»å‹ä¸åŒ¹é…
            Factory--&gt;&gt;Retrofit: è¿”å›null
            Note over Retrofit: ç»§ç»­æŸ¥æ‰¾ä¸‹ä¸€ä¸ªFactory
        end
        deactivate Factory
    end

    Retrofit--&gt;&gt;Retrofit: è¿”å›åŒ¹é…çš„CallAdapter
    deactivate Retrofit

    Note over Adapter,TargetType: ç¬¬äºŒé˜¶æ®µï¼šé€‚é…Callå¯¹è±¡
    Retrofit-&gt;&gt;Adapter: adapt(call)
    activate Adapter

    alt DefaultCallAdapter
        Adapter-&gt;&gt;Adapter: ç›´æ¥è¿”å›Callå¯¹è±¡
        Adapter--&gt;&gt;Retrofit: è¿”å›Call
    else ExecutorCallbackCall
        Adapter-&gt;&gt;TargetType: new ExecutorCallbackCall
        activate TargetType
        Note over TargetType: åŒ…è£…Callåœ¨æŒ‡å®šExecutorå›è°ƒ
        TargetType--&gt;&gt;Adapter: è¿”å›åŒ…è£…åçš„Call
        deactivate TargetType
        Adapter--&gt;&gt;Retrofit: è¿”å›Call
    else CompletableFutureCallAdapter
        Adapter-&gt;&gt;TargetType: new CompletableFutureCallAdapter
        activate TargetType
        Note over TargetType: å°†Callè½¬ä¸ºCompletableFuture
        TargetType--&gt;&gt;Adapter: è¿”å›CompletableFuture
        deactivate TargetType
        Adapter--&gt;&gt;Retrofit: è¿”å›CompletableFuture
    else RxJava3CallAdapter
        Adapter-&gt;&gt;TargetType: åˆ›å»ºObservable/Single
        activate TargetType
        Note over TargetType: å°†Callè½¬ä¸ºRxJavaç±»å‹
        TargetType--&gt;&gt;Adapter: è¿”å›Observable
        deactivate TargetType
        Adapter--&gt;&gt;Retrofit: è¿”å›Observable
    end

    deactivate Adapter
</code></pre>
<h3 data-id="heading-9">9. Converter è½¬æ¢æœºåˆ¶</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Retrofit as Retrofit
    participant Factory as Converter.Factory
    participant Converter as Converter
    participant ResponseBody as ResponseBody
    participant TargetType as ç›®æ ‡å¯¹è±¡

    Note over Retrofit,Factory: ç¬¬ä¸€é˜¶æ®µï¼šæŸ¥æ‰¾ResponseConverter
    Retrofit-&gt;&gt;Retrofit: nextResponseBodyConverter()
    activate Retrofit

    loop éå†converterFactories
        Retrofit-&gt;&gt;Factory: factory.responseBodyConverter()
        activate Factory
        Factory-&gt;&gt;Factory: æ£€æŸ¥æ˜¯å¦æ”¯æŒè¯¥ç±»å‹è½¬æ¢

        alt æ”¯æŒè½¬æ¢
            Factory-&gt;&gt;Converter: åˆ›å»ºConverterå®ä¾‹
            activate Converter
            Converter--&gt;&gt;Factory: è¿”å›Converter
            deactivate Converter
            Factory--&gt;&gt;Retrofit: è¿”å›Converter
            Note over Retrofit: æ‰¾åˆ°åŒ¹é…çš„Converter
        else ä¸æ”¯æŒ
            Factory--&gt;&gt;Retrofit: è¿”å›null
            Note over Retrofit: ç»§ç»­æŸ¥æ‰¾
        end
        deactivate Factory
    end

    Retrofit--&gt;&gt;Retrofit: è¿”å›åŒ¹é…çš„Converter
    deactivate Retrofit

    Note over Converter,TargetType: ç¬¬äºŒé˜¶æ®µï¼šè½¬æ¢å“åº”ä½“
    Retrofit-&gt;&gt;Converter: convert(responseBody)
    activate Converter

    Converter-&gt;&gt;ResponseBody: value.source()
    activate ResponseBody
    ResponseBody--&gt;&gt;Converter: è¿”å›BufferedSource
    deactivate ResponseBody

    alt GsonConverter
        Converter-&gt;&gt;Converter: gson.getAdapter(type)
        Converter-&gt;&gt;Converter: adapter.read(jsonReader)
        Note over Converter: JSON â†’ Javaå¯¹è±¡
    else MoshiConverter
        Converter-&gt;&gt;Converter: moshi.adapter(type)
        Converter-&gt;&gt;Converter: adapter.fromJson(source)
        Note over Converter: JSON â†’ Javaå¯¹è±¡
    else JacksonConverter
        Converter-&gt;&gt;Converter: objectMapper.readValue()
        Note over Converter: JSON â†’ Javaå¯¹è±¡
    else ProtobufConverter
        Converter-&gt;&gt;Converter: adapter.decode(bytes)
        Note over Converter: Protobuf â†’ Javaå¯¹è±¡
    else ScalarsConverter
        Converter-&gt;&gt;Converter: responseBody.string()
        Note over Converter: ç›´æ¥è¿”å›å­—ç¬¦ä¸²
    end

    Converter-&gt;&gt;TargetType: åˆ›å»ºå¯¹è±¡å®ä¾‹
    activate TargetType
    TargetType--&gt;&gt;Converter: è¿”å›å®ä¾‹
    deactivate TargetType

    Converter--&gt;&gt;Retrofit: è¿”å›è½¬æ¢åçš„å¯¹è±¡
    deactivate Converter

    Note over Retrofit,Factory: ç¬¬ä¸‰é˜¶æ®µï¼šè¯·æ±‚ä½“è½¬æ¢
    Retrofit-&gt;&gt;Factory: requestBodyConverter()
    activate Factory
    Factory-&gt;&gt;Converter: åˆ›å»ºRequestConverter
    activate Converter
    Converter--&gt;&gt;Factory: è¿”å›Converter
    deactivate Converter
    Factory--&gt;&gt;Retrofit: è¿”å›Converter
    deactivate Factory

    Retrofit-&gt;&gt;Converter: convert(value)
    activate Converter

    alt GsonConverter
        Converter-&gt;&gt;Converter: gson.toJson(value)
        Note over Converter: Javaå¯¹è±¡ â†’ JSON
        Converter-&gt;&gt;Converter: RequestBody.create()
    else MoshiConverter
        Converter-&gt;&gt;Converter: adapter.toJson(value)
        Converter-&gt;&gt;Converter: RequestBody.create()
    end

    Converter--&gt;&gt;Retrofit: è¿”å›RequestBody
    deactivate Converter
</code></pre>
<h3 data-id="heading-10">10. è¯·æ±‚å‚æ•°å¤„ç†æœºåˆ¶</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant RF as RequestFactory
    participant Builder as RequestBuilder
    participant Handler as ParameterHandler
    participant Request as okhttp3.Request

    RF-&gt;&gt;Builder: new RequestBuilder(httpMethod, baseUrl, relativeUrl)
    activate Builder
    Builder-&gt;&gt;Builder: åˆå§‹åŒ–HttpUrl.Builder
    Builder-&gt;&gt;Builder: åˆå§‹åŒ–Headers
    deactivate Builder

    Note over RF,Handler: åº”ç”¨æ¯ä¸ªå‚æ•°
    loop éå†æ–¹æ³•å‚æ•°
        RF-&gt;&gt;Handler: parameterHandlers[i].apply(builder, args[i])
        activate Handler

        alt @Pathå‚æ•°
            Handler-&gt;&gt;Handler: éªŒè¯å€¼ä¸ä¸ºnull
            Handler-&gt;&gt;Handler: æ›¿æ¢URLè·¯å¾„ä¸­çš„å ä½ç¬¦
            Handler-&gt;&gt;Builder: relativeUrl.replace(&amp;#34;{name}&amp;#34;, value)
            Builder-&gt;&gt;Builder: æ›´æ–°URL
        else @Queryå‚æ•°
            Handler-&gt;&gt;Handler: è½¬æ¢å€¼ä¸ºå­—ç¬¦ä¸²
            Handler-&gt;&gt;Builder: addQueryParam(name, value)
            Builder-&gt;&gt;Builder: urlBuilder.addQueryParameter(name, value)
        else @QueryMapå‚æ•°
            loop éå†Mapæ¡ç›®
                Handler-&gt;&gt;Builder: addQueryParam(key, value)
            end
        else @Headerå‚æ•°
            Handler-&gt;&gt;Handler: è½¬æ¢å€¼ä¸ºå­—ç¬¦ä¸²
            Handler-&gt;&gt;Builder: addHeader(name, value)
            Builder-&gt;&gt;Builder: headersBuilder.add(name, value)
        else @HeaderMapå‚æ•°
            loop éå†Mapæ¡ç›®
                Handler-&gt;&gt;Builder: addHeader(key, value)
            end
        else @Bodyå‚æ•°
            Handler-&gt;&gt;Handler: ä½¿ç”¨Converterè½¬æ¢å¯¹è±¡
            Handler-&gt;&gt;Handler: converter.convert(value)
            Handler-&gt;&gt;Builder: setBody(requestBody)
            Builder-&gt;&gt;Builder: ä¿å­˜RequestBody
        else @Fieldå‚æ•° (FormEncoded)
            Handler-&gt;&gt;Handler: è½¬æ¢å€¼ä¸ºå­—ç¬¦ä¸²
            Handler-&gt;&gt;Builder: addFormField(name, value)
            Builder-&gt;&gt;Builder: formBuilder.add(name, value)
        else @FieldMapå‚æ•°
            loop éå†Mapæ¡ç›®
                Handler-&gt;&gt;Builder: addFormField(key, value)
            end
        else @Partå‚æ•° (Multipart)
            Handler-&gt;&gt;Handler: åˆ›å»ºMultipartBody.Part
            Handler-&gt;&gt;Builder: addPart(part)
            Builder-&gt;&gt;Builder: multipartBuilder.addPart(part)
        else @PartMapå‚æ•°
            loop éå†Mapæ¡ç›®
                Handler-&gt;&gt;Builder: addPart(key, value)
            end
        else @Urlå‚æ•°
            Handler-&gt;&gt;Handler: è§£æå®Œæ•´URL
            Handler-&gt;&gt;Builder: setRelativeUrl(url)
            Builder-&gt;&gt;Builder: è¦†ç›–URL
        end

        Handler--&gt;&gt;RF: å‚æ•°åº”ç”¨å®Œæˆ
        deactivate Handler
    end

    Note over RF,Request: æ„å»ºæœ€ç»ˆRequest
    RF-&gt;&gt;Builder: build()
    activate Builder

    Builder-&gt;&gt;Builder: æ„å»ºå®Œæ•´URL&lt;br/&gt;baseUrl + relativeUrl + queryParams
    Builder-&gt;&gt;Builder: æ„å»ºHeaders

    alt æœ‰RequestBody
        Builder-&gt;&gt;Builder: è®¾ç½®Content-Type
        Builder-&gt;&gt;Builder: æ·»åŠ Body
    else FormEncoded
        Builder-&gt;&gt;Builder: formBuilder.build()
        Builder-&gt;&gt;Builder: è®¾ç½®Content-Type: application/x-www-form-urlencoded
    else Multipart
        Builder-&gt;&gt;Builder: multipartBuilder.build()
        Builder-&gt;&gt;Builder: è®¾ç½®Content-Type: multipart/form-data
    end

    Builder-&gt;&gt;Request: new Request.Builder().url(url).headers(headers).method(httpMethod, body).build()
    activate Request
    Request--&gt;&gt;Builder: è¿”å›Requestå®ä¾‹
    deactivate Request

    Builder--&gt;&gt;RF: è¿”å›okhttp3.Request
    deactivate Builder
</code></pre>
<h3 data-id="heading-11">11. å®Œæ•´çš„å†…éƒ¨è°ƒç”¨é“¾è·¯å›¾</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    Start([è°ƒç”¨APIæ¥å£æ–¹æ³•]) --&gt; ProxyInvoke[åŠ¨æ€ä»£ç†æ‹¦æˆªè°ƒç”¨&lt;br/&gt;InvocationHandler.invoke]

    ProxyInvoke --&gt; CheckCache{ServiceMethod&lt;br/&gt;æ˜¯å¦ç¼“å­˜?}

    CheckCache --&gt;|å·²ç¼“å­˜| GetCached[ä»ç¼“å­˜è·å–]
    CheckCache --&gt;|æœªç¼“å­˜| ParseMethod[è§£ææ–¹æ³•æ³¨è§£&lt;br/&gt;ServiceMethod.parseAnnotations]

    ParseMethod --&gt; ParseRequest[åˆ›å»ºRequestFactory&lt;br/&gt;è§£æHTTPæ–¹æ³•å’Œå‚æ•°æ³¨è§£]
    ParseRequest --&gt; FindCallAdapter[æŸ¥æ‰¾CallAdapter&lt;br/&gt;éå†CallAdapterFactories]
    FindCallAdapter --&gt; FindConverter[æŸ¥æ‰¾Converter&lt;br/&gt;éå†ConverterFactories]
    FindConverter --&gt; CreateSM[åˆ›å»ºHttpServiceMethod&lt;br/&gt;å°è£…è¯·æ±‚ä¿¡æ¯]
    CreateSM --&gt; CacheIt[ç¼“å­˜ServiceMethod]

    CacheIt --&gt; GetCached
    GetCached --&gt; InvokeSM[è°ƒç”¨ServiceMethod.invoke]

    InvokeSM --&gt; CreateRequest[åˆ›å»ºokhttp3.Request&lt;br/&gt;åº”ç”¨æ‰€æœ‰å‚æ•°å¤„ç†å™¨]
    CreateRequest --&gt; CreateOkCall[åˆ›å»ºOkHttpCall&lt;br/&gt;å°è£…OkHttpè°ƒç”¨]
    CreateOkCall --&gt; AdaptCall[ä½¿ç”¨CallAdapter.adapt&lt;br/&gt;è½¬æ¢ä¸ºç›®æ ‡ç±»å‹]

    AdaptCall --&gt; ReturnCall([è¿”å›Callå¯¹è±¡])

    ReturnCall --&gt; ExecuteChoice{æ‰§è¡Œæ–¹å¼?}

    ExecuteChoice --&gt;|enqueue| AsyncExec[å¼‚æ­¥æ‰§è¡Œ&lt;br/&gt;call.enqueue]
    ExecuteChoice --&gt;|execute| SyncExec[åŒæ­¥æ‰§è¡Œ&lt;br/&gt;call.execute]

    AsyncExec --&gt; CreateOkCall2[åˆ›å»ºokhttp3.Call]
    SyncExec --&gt; CreateOkCall2

    CreateOkCall2 --&gt; OkHttpChain[OkHttpæ‹¦æˆªå™¨é“¾]

    OkHttpChain --&gt; Interceptor1[RetryAndFollowUpInterceptor&lt;br/&gt;é‡è¯•å’Œé‡å®šå‘]
    Interceptor1 --&gt; Interceptor2[BridgeInterceptor&lt;br/&gt;æ·»åŠ åŸºç¡€Headers]
    Interceptor2 --&gt; Interceptor3[CacheInterceptor&lt;br/&gt;ç¼“å­˜å¤„ç†]
    Interceptor3 --&gt; Interceptor4[ConnectInterceptor&lt;br/&gt;å»ºç«‹è¿æ¥]
    Interceptor4 --&gt; Interceptor5[CallServerInterceptor&lt;br/&gt;å‘é€è¯·æ±‚]

    Interceptor5 --&gt; Network[ç½‘ç»œæœåŠ¡å™¨]
    Network --&gt; RawResponse[è¿”å›okhttp3.Response]

    RawResponse --&gt; ParseResponse[è§£æå“åº”&lt;br/&gt;OkHttpCall.parseResponse]

    ParseResponse --&gt; CheckStatus{HTTPçŠ¶æ€ç ?}

    CheckStatus --&gt;|2xxæˆåŠŸ| ConvertSuccess[ä½¿ç”¨Converterè½¬æ¢å“åº”ä½“&lt;br/&gt;ResponseBodyConverter.convert]
    CheckStatus --&gt;|é2xx| ConvertError[è½¬æ¢é”™è¯¯ä½“&lt;br/&gt;ä¿ç•™åŸå§‹å“åº”]

    ConvertSuccess --&gt; WrapSuccess[åŒ…è£…ä¸ºResponse.success]
    ConvertError --&gt; WrapError[åŒ…è£…ä¸ºResponse.error]

    WrapSuccess --&gt; Callback[å›è°ƒç»“æœ]
    WrapError --&gt; Callback

    Callback --&gt; End([æ‰§è¡Œå®Œæˆ])

    style Start fill:#e1f5e1
    style End fill:#ffe1e1
    style Network fill:#e1f0ff
    style ProxyInvoke fill:#fff4e1
    style OkHttpChain fill:#f0e1ff
</code></pre>
<h3 data-id="heading-12">æ ¸å¿ƒç±»å…³ç³»è¯´æ˜</h3>
<h4 data-id="heading-13">1. Retrofit</h4>
<ul>
<li><strong>èŒè´£</strong>: æ¡†æ¶å…¥å£ï¼Œç®¡ç†æ‰€æœ‰é…ç½®</li>
<li><strong>æ ¸å¿ƒæ–¹æ³•</strong>:
<ul>
<li><code>create(Class&lt;T&gt; service)</code>: åˆ›å»ºAPIæ¥å£ä»£ç†å®ä¾‹</li>
<li><code>callAdapter(Type returnType, Annotation[] annotations)</code>: æŸ¥æ‰¾åŒ¹é…çš„CallAdapter</li>
<li><code>nextResponseBodyConverter(...)</code>: æŸ¥æ‰¾åŒ¹é…çš„Converter</li>
</ul>
</li>
</ul>
<h4 data-id="heading-14">2. ServiceMethod</h4>
<ul>
<li><strong>èŒè´£</strong>: å°è£…APIæ–¹æ³•çš„æ‰€æœ‰ä¿¡æ¯</li>
<li><strong>å­ç±»</strong>:
<ul>
<li><code>HttpServiceMethod</code>: æ™®é€šHTTPæ–¹æ³•çš„å®ç°</li>
<li><code>SuspendForResponse</code>: suspendå‡½æ•°çš„ç‰¹æ®Šå®ç°</li>
<li><code>SuspendForBody</code>: ç›´æ¥è¿”å›å“åº”ä½“çš„suspendå‡½æ•°</li>
</ul>
</li>
<li><strong>æ ¸å¿ƒä¿¡æ¯</strong>:
<ul>
<li>RequestFactory: è¯·æ±‚å·¥å‚</li>
<li>CallAdapter: è°ƒç”¨é€‚é…å™¨ï¼ˆsuspendå‡½æ•°ä¸ä½¿ç”¨ï¼‰</li>
<li>Converter: å“åº”è½¬æ¢å™¨</li>
</ul>
</li>
<li><strong>suspendå‡½æ•°ç‰¹æ€§</strong>:
<ul>
<li>è‡ªåŠ¨æ£€æµ‹æ–¹æ³•ç­¾åä¸­çš„<code>Continuation</code>å‚æ•°</li>
<li>ä½¿ç”¨<code>suspendCancellableCoroutine</code>å®ç°æŒ‚èµ·</li>
<li>æ”¯æŒåç¨‹å–æ¶ˆä¼ æ’­åˆ°OkHttp Call</li>
</ul>
</li>
</ul>
<h4 data-id="heading-15">3. RequestFactory</h4>
<ul>
<li><strong>èŒè´£</strong>: æ ¹æ®æ–¹æ³•æ³¨è§£å’Œå‚æ•°åˆ›å»ºOkHttp Request</li>
<li><strong>æ ¸å¿ƒæˆå‘˜</strong>:
<ul>
<li><code>httpMethod</code>: HTTPæ–¹æ³•(GET/POSTç­‰)</li>
<li><code>relativeUrl</code>: ç›¸å¯¹URL</li>
<li><code>headers</code>: è¯·æ±‚å¤´</li>
<li><code>parameterHandlers</code>: å‚æ•°å¤„ç†å™¨æ•°ç»„</li>
</ul>
</li>
</ul>
<h4 data-id="heading-16">4. ParameterHandler</h4>
<ul>
<li><strong>èŒè´£</strong>: å¤„ç†å•ä¸ªæ–¹æ³•å‚æ•°ï¼Œåº”ç”¨åˆ°RequestBuilder</li>
<li><strong>å®ç°ç±»</strong>:
<ul>
<li><code>Path</code>: å¤„ç†@Pathæ³¨è§£</li>
<li><code>Query</code>: å¤„ç†@Queryæ³¨è§£</li>
<li><code>Header</code>: å¤„ç†@Headeræ³¨è§£</li>
<li><code>Body</code>: å¤„ç†@Bodyæ³¨è§£</li>
<li><code>Field</code>: å¤„ç†@Fieldæ³¨è§£(FormEncoded)</li>
<li><code>Part</code>: å¤„ç†@Partæ³¨è§£(Multipart)</li>
</ul>
</li>
</ul>
<h4 data-id="heading-17">5. OkHttpCall</h4>
<ul>
<li><strong>èŒè´£</strong>: Retrofitçš„Callå®ç°ï¼Œå†…éƒ¨å§”æ‰˜ç»™OkHttpçš„Call</li>
<li><strong>æ ¸å¿ƒæ–¹æ³•</strong>:
<ul>
<li><code>enqueue(Callback&lt;T&gt; callback)</code>: å¼‚æ­¥æ‰§è¡Œ</li>
<li><code>execute()</code>: åŒæ­¥æ‰§è¡Œ</li>
<li><code>parseResponse(okhttp3.Response rawResponse)</code>: è§£æå“åº”</li>
<li><code>await()</code>: åç¨‹æ‰©å±•ï¼ŒæŒ‚èµ·å¹¶ç­‰å¾…å“åº”</li>
<li><code>awaitResponse()</code>: åç¨‹æ‰©å±•ï¼Œè¿”å›å®Œæ•´Responseå¯¹è±¡</li>
</ul>
</li>
<li><strong>åç¨‹æ”¯æŒ</strong>:
<ul>
<li>ä½¿ç”¨<code>suspendCancellableCoroutine</code>æŒ‚èµ·åç¨‹</li>
<li>æ³¨å†Œ<code>invokeOnCancellation</code>å›è°ƒå¤„ç†åç¨‹å–æ¶ˆ</li>
<li>åç¨‹å–æ¶ˆæ—¶è‡ªåŠ¨è°ƒç”¨<code>call.cancel()</code>å–æ¶ˆç½‘ç»œè¯·æ±‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-18">6. CallAdapter</h4>
<ul>
<li><strong>èŒè´£</strong>: å°†Callè½¬æ¢ä¸ºå…¶ä»–ç±»å‹</li>
<li><strong>å†…ç½®å®ç°</strong>:
<ul>
<li><code>DefaultCallAdapter</code>: ç›´æ¥è¿”å›Call</li>
<li><code>ExecutorCallbackCall</code>: åœ¨æŒ‡å®šExecutorå›è°ƒ</li>
<li><code>CompletableFutureCallAdapter</code>: è½¬æ¢ä¸ºCompletableFuture (Java 8)</li>
</ul>
</li>
<li><strong>ç¬¬ä¸‰æ–¹å®ç°</strong>:
<ul>
<li><code>RxJava3CallAdapter</code>: è½¬æ¢ä¸ºObservable/Single</li>
<li><code>CoroutineCallAdapter</code>: Kotlinåç¨‹æ”¯æŒ</li>
</ul>
</li>
</ul>
<h4 data-id="heading-19">7. Converter</h4>
<ul>
<li><strong>èŒè´£</strong>: å¯¹è±¡ä¸HTTPè¯·æ±‚/å“åº”ä½“ä¹‹é—´çš„è½¬æ¢</li>
<li><strong>å®ç°</strong>:
<ul>
<li><code>GsonConverter</code>: JSON â†” Javaå¯¹è±¡ (Gson)</li>
<li><code>MoshiConverter</code>: JSON â†” Javaå¯¹è±¡ (Moshi)</li>
<li><code>JacksonConverter</code>: JSON â†” Javaå¯¹è±¡ (Jackson)</li>
<li><code>ProtobufConverter</code>: Protobuf â†” Javaå¯¹è±¡</li>
<li><code>ScalarsConverter</code>: åŸå§‹ç±»å‹(String/primitives)</li>
</ul>
</li>
</ul>
<h3 data-id="heading-20">å·¥ä½œæµç¨‹æ€»ç»“</h3>
<h4 data-id="heading-21">æ ‡å‡†æµç¨‹ï¼ˆCall/RxJavaï¼‰</h4>
<ol>
<li><strong>æ„å»ºé˜¶æ®µ</strong>: åˆ›å»ºRetrofitå®ä¾‹ï¼Œé…ç½®baseUrlã€OkHttpClientã€Converterã€CallAdapter</li>
<li><strong>ä»£ç†åˆ›å»º</strong>: ä½¿ç”¨JDKåŠ¨æ€ä»£ç†ä¸ºAPIæ¥å£åˆ›å»ºå®ä¾‹</li>
<li><strong>æ–¹æ³•è§£æ</strong>: é¦–æ¬¡è°ƒç”¨æ—¶è§£ææ–¹æ³•æ³¨è§£ï¼Œåˆ›å»ºServiceMethodå¹¶ç¼“å­˜</li>
<li><strong>è¯·æ±‚æ„å»º</strong>: åº”ç”¨å‚æ•°å¤„ç†å™¨ï¼Œå°†æ–¹æ³•å‚æ•°è½¬æ¢ä¸ºOkHttp Request</li>
<li><strong>ç±»å‹é€‚é…</strong>: ä½¿ç”¨CallAdapterå°†OkHttpCallè½¬æ¢ä¸ºç›®æ ‡è¿”å›ç±»å‹</li>
<li><strong>æ‰§è¡Œè¯·æ±‚</strong>: å§”æ‰˜ç»™OkHttpæ‰§è¡Œç½‘ç»œè¯·æ±‚</li>
<li><strong>å“åº”è½¬æ¢</strong>: ä½¿ç”¨Converterå°†å“åº”ä½“è½¬æ¢ä¸ºJavaå¯¹è±¡</li>
<li><strong>ç»“æœå›è°ƒ</strong>: é€šè¿‡Callbackæˆ–å…¶ä»–æ–¹å¼è¿”å›ç»“æœ</li>
</ol>
<h4 data-id="heading-22">åç¨‹æµç¨‹ï¼ˆSuspend Functionï¼‰</h4>
<ol>
<li><strong>æ„å»ºé˜¶æ®µ</strong>: åŒæ ‡å‡†æµç¨‹</li>
<li><strong>ä»£ç†åˆ›å»º</strong>: åŒæ ‡å‡†æµç¨‹</li>
<li><strong>æ–¹æ³•è§£æ</strong>: è¯†åˆ«suspendå‡½æ•°ï¼Œæå–Continuationå‚æ•°ï¼Œåˆ›å»ºSuspendForResponse</li>
<li><strong>è¯·æ±‚æ„å»º</strong>: åŒæ ‡å‡†æµç¨‹</li>
<li><strong>åç¨‹æŒ‚èµ·</strong>: ä½¿ç”¨suspendCancellableCoroutineæŒ‚èµ·åç¨‹ï¼Œä¸ç»è¿‡CallAdapter</li>
<li><strong>å¼‚æ­¥æ‰§è¡Œ</strong>: åœ¨IOè°ƒåº¦å™¨ä¸Šé€šè¿‡OkHttpå¼‚æ­¥æ‰§è¡Œç½‘ç»œè¯·æ±‚</li>
<li><strong>å“åº”è½¬æ¢</strong>: åŒæ ‡å‡†æµç¨‹ï¼Œä½¿ç”¨Converterè½¬æ¢</li>
<li><strong>åç¨‹æ¢å¤</strong>: é€šè¿‡Continuation.resumeæ¢å¤åç¨‹æ‰§è¡Œ</li>
<li><strong>å–æ¶ˆæ”¯æŒ</strong>: åç¨‹å–æ¶ˆæ—¶è‡ªåŠ¨å–æ¶ˆOkHttpè¯·æ±‚</li>
</ol>
<h4 data-id="heading-23">åç¨‹ vs æ ‡å‡†è°ƒç”¨å¯¹æ¯”</h4>













































<table><thead><tr><th>ç‰¹æ€§</th><th>æ ‡å‡†Call</th><th>Suspendå‡½æ•°</th></tr></thead><tbody><tr><td><strong>è¿”å›ç±»å‹</strong></td><td><code>Call&lt;T&gt;</code></td><td>ç›´æ¥è¿”å›<code>T</code></td></tr><tr><td><strong>è°ƒç”¨æ–¹å¼</strong></td><td><code>enqueue(callback)</code></td><td>ç›´æ¥è°ƒç”¨ï¼Œè‡ªåŠ¨æŒ‚èµ·</td></tr><tr><td><strong>çº¿ç¨‹åˆ‡æ¢</strong></td><td>é€šè¿‡Executor</td><td>é€šè¿‡åç¨‹è°ƒåº¦å™¨</td></tr><tr><td><strong>å–æ¶ˆæœºåˆ¶</strong></td><td>æ‰‹åŠ¨è°ƒç”¨<code>call.cancel()</code></td><td>åç¨‹å–æ¶ˆè‡ªåŠ¨ä¼ æ’­</td></tr><tr><td><strong>é”™è¯¯å¤„ç†</strong></td><td>Callbackå›è°ƒ</td><td>try-catchæˆ–åç¨‹å¼‚å¸¸å¤„ç†</td></tr><tr><td><strong>CallAdapter</strong></td><td>éœ€è¦</td><td>ä¸éœ€è¦</td></tr><tr><td><strong>ç”Ÿå‘½å‘¨æœŸ</strong></td><td>æ‰‹åŠ¨ç®¡ç†</td><td>ç»‘å®šCoroutineScope</td></tr></tbody></table>
<h3 data-id="heading-24">Retrofit vs OkHttp èŒè´£åˆ’åˆ†</h3>

















<table><thead><tr><th>ç»„ä»¶</th><th>èŒè´£</th></tr></thead><tbody><tr><td><strong>Retrofit</strong></td><td>æ³¨è§£è§£æã€ç±»å‹è½¬æ¢ã€åŠ¨æ€ä»£ç†ã€CallAdapteré€‚é…</td></tr><tr><td><strong>OkHttp</strong></td><td>HTTPè¿æ¥ã€è¯·æ±‚å‘é€ã€å“åº”æ¥æ”¶ã€æ‹¦æˆªå™¨é“¾ã€ç¼“å­˜</td></tr></tbody></table>
<p>RetrofitåŸºäºOkHttpæ„å»ºï¼Œä¸“æ³¨äºæä¾›ç±»å‹å®‰å…¨çš„HTTP APIæŠ½è±¡ï¼Œè€Œå°†åº•å±‚ç½‘ç»œé€šä¿¡å§”æ‰˜ç»™OkHttpå¤„ç†ã€‚</p>
<hr/>
<blockquote>
<p>æœ¬æ–‡æ¡£æ·±å…¥å‰–æäº†Retrofitæ¡†æ¶çš„å†…éƒ¨å·¥ä½œæœºåˆ¶ï¼Œæ¶µç›–äº†ä»APIæ¥å£åˆ›å»ºåˆ°è¯·æ±‚æ‰§è¡Œçš„å®Œæ•´æµç¨‹ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Difyã€n8n è¿˜æ˜¯ Cozeï¼Ÿä¸‡å­—é•¿æ–‡è§£æä¸‰å¤§ä¸»æµ AI Agent å¹³å°]]></title>    <link>https://juejin.cn/post/7588095884070289408</link>    <guid>https://juejin.cn/post/7588095884070289408</guid>    <pubDate>2025-12-28T01:55:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588095884070289408" data-draft-id="7588093282530836532" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Difyã€n8n è¿˜æ˜¯ Cozeï¼Ÿä¸‡å­—é•¿æ–‡è§£æä¸‰å¤§ä¸»æµ AI Agent å¹³å°"/> <meta itemprop="keywords" content="Agent,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-28T01:55:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AlanHou"/> <meta itemprop="url" content="https://juejin.cn/user/62022837364253"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Difyã€n8n è¿˜æ˜¯ Cozeï¼Ÿä¸‡å­—é•¿æ–‡è§£æä¸‰å¤§ä¸»æµ AI Agent å¹³å°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/62022837364253/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AlanHou
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T01:55:27.000Z" title="Sun Dec 28 2025 01:55:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»24åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æˆ‘ä»¬æ­£åœ¨è§è¯äººå·¥æ™ºèƒ½åº”ç”¨æ„å»ºæ–¹å¼çš„ä¸€æ¬¡æ ¹æœ¬æ€§è½¬å˜ã€‚è¿‡å»éœ€è¦å¤§é‡æœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆæ‰èƒ½å®Œæˆçš„å·¥ä½œï¼Œå¦‚ä»Šæ­£è¶Šæ¥è¶Šå¤šåœ°é€šè¿‡å¯è§†åŒ–ã€æ‹–æ‹½å¼ç•Œé¢æ¥å®ç°ã€‚<strong>å¹³å°ç»æµå·²ç»æ¥åˆ° AI é¢†åŸŸ</strong>ï¼Œå¹¶éšä¹‹å¸¦æ¥äº†ä¸€ç§è€äººå¯»å‘³çš„èƒ½åŠ›æ°‘ä¸»åŒ–è¿›ç¨‹ã€‚</p>
<p>æ›¾ç»ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹å†™ HTMLã€æ‰‹åŠ¨éƒ¨ç½²æœåŠ¡å™¨ï¼›è€Œç°åœ¨ï¼Œæˆ‘ä»¬ä½¿ç”¨ WordPress å’Œ AWSä¹ƒè‡³Vercelè¿™æ ·çš„éƒ¨ç½²å¹³å°ã€‚åŒæ ·åœ°ï¼Œ<strong>æ„å»ºæ™ºèƒ½ä»£ç†æ­£ä»çº¯ä»£ç ä¼˜å…ˆçš„æ–¹å¼ï¼Œè¿‡æ¸¡åˆ°å¹³å°åŸç”Ÿã€ä½ä»£ç çš„èŒƒå¼</strong>ã€‚</p>
<p>è¿™ç§è½¬å˜å¹¶éå¶ç„¶â€”â€”å®ƒåæ˜ äº†å·¥ç¨‹æˆç†Ÿåº¦çš„ä¸€æ¡æ·±å±‚è§„å¾‹ï¼š<strong>å½“ä¸€é¡¹æŠ€æœ¯å‘å±•åˆ°è¶³å¤Ÿå¤æ‚ä¸”ç¨³å®šçš„é˜¶æ®µï¼Œäººç±»å¿…ç„¶ä¼šå°†å…¶æŠ½è±¡ä¸ºå¯å¤ç”¨çš„å¹³å°</strong>ã€‚ä½ä»£ç  AI å¹³å°ï¼Œæ­£æ˜¯è‡ªä¸»ä»£ç†ä¸ LLM åº”ç”¨èµ°å‘æˆç†Ÿçš„æ ‡å¿—æ€§æ—¶åˆ»ã€‚</p>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆä½ä»£ç å¹³å°åœ¨å½“ä¸‹è‡³å…³é‡è¦</h2>
<p>ä½ä»£ç  AI å¹³å°çš„å•†ä¸šè®ºè¯æå…·è¯´æœåŠ›ï¼Œä½†å…¶ä»·å€¼ä¸»å¼ ä¸ä»…ä»…åœ¨äºç®€å•çš„æ•ˆç‡æŒ‡æ ‡ã€‚</p>
<ul>
<li><strong>é¦–å…ˆæ˜¯å¯è®¿é—®æ€§ï¼ˆæ™®åŠæ€§ï¼‰ã€‚</strong> ä¼ ç»Ÿçš„æ™ºèƒ½ä½“å¼€å‘ï¼ˆå¦‚ ReAct å’Œ Plan-and-Solve æ¡†æ¶ï¼‰è¦æ±‚æ‰å®çš„å·¥ç¨‹åŸºç¡€ã€‚ä½ éœ€è¦ç†è§£ API ç¼–æ’ã€çŠ¶æ€ç®¡ç†ã€é”™è¯¯å¤„ç†å’Œå¹¶å‘æ‰§è¡Œã€‚ä½ä»£ç å¹³å°å°†è¿™äº›å¤æ‚æ€§æŠ½è±¡ä¸ºå¯è§†åŒ–çš„èŠ‚ç‚¹ã€‚äº§å“ç»ç†ã€é¢†åŸŸä¸“å®¶å’Œä¸šåŠ¡åˆ†æå¸ˆç°åœ¨å¯ä»¥å‚ä¸æ„å»ºæ™ºèƒ½ä½“ï¼Œè€Œæ— éœ€ç­‰å¾…æ•°å‘¨çš„å·¥ç¨‹å‘¨æœŸã€‚è¿™å°†åˆ›æ–°çš„äººæ‰æ± æ‰©å±•åˆ°äº†è½¯ä»¶å›¢é˜Ÿä¹‹å¤–ã€‚</li>
<li><strong>å…¶æ¬¡æ˜¯ç”Ÿäº§åŠ›å€å¢å™¨ã€‚</strong> å¯¹äºä¸“ä¸šå¼€å‘äººå‘˜æ¥è¯´ï¼Œè¿™äº›å¹³å°æå¤§åœ°åŠ é€Ÿäº†åŸå‹è®¾è®¡ã€‚ç¼–å†™ä»£ç éœ€è¦ä¸‰å¤©çš„å·¥ä½œâ€”â€”è¿æ¥ APIã€æ„å»ºé‡è¯•é€»è¾‘ã€ç®¡ç†çŠ¶æ€â€”â€”é€šè¿‡å¯è§†åŒ–è®¾è®¡åªéœ€å‡ å°æ—¶å³å¯å®Œæˆã€‚è¿™åœ¨é¡¹ç›®çš„æ—©æœŸé˜¶æ®µå°¤ä¸ºé‡è¦ï¼Œå› ä¸ºæˆ‘ä»¬ä»å¤„äºéªŒè¯æƒ³æ³•é˜¶æ®µã€‚å¹³å°å¤„ç†â€œè„šæ‰‹æ¶â€å·¥ä½œï¼›è€Œä½ åˆ™å¯ä»¥ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘å’Œæç¤ºè¯å·¥ç¨‹ï¼ˆPrompt Engineeringï¼‰ã€‚</li>
<li><strong>ç¬¬ä¸‰æ˜¯å¯è§‚æµ‹æ€§ã€‚</strong> åŸºäºå›¾ï¼ˆGraphï¼‰çš„å¹³å°æä¾›äº†åŸºäºæ–‡æœ¬çš„æ—¥å¿—æ— æ³•æ¯”æ‹Ÿçš„ç«¯åˆ°ç«¯å¯è§æ€§ã€‚ä½ å¯ä»¥çœ‹åˆ°æ•°æ®åœ¨èŠ‚ç‚¹ä¹‹é—´æµåŠ¨ï¼Œå³æ—¶è¯†åˆ«ç“¶é¢ˆï¼Œå¹¶åœ¨ä¸ç¿»é˜…ç»ˆç«¯è¾“å‡ºçš„æƒ…å†µä¸‹è°ƒè¯•å¤±è´¥çš„æ­¥éª¤ã€‚è¿™ä¸ä»…æ˜¯æ–¹ä¾¿â€”â€”å®ƒåŠ é€Ÿäº†ä¼˜åŒ–æ™ºèƒ½ä½“è¡Œä¸ºæ‰€å¿…éœ€çš„åé¦ˆå¾ªç¯ã€‚</li>
<li><strong>æœ€åæ˜¯æ ‡å‡†åŒ–ä¼˜åŠ¿ã€‚</strong> é¢†å…ˆçš„å¹³å°å°†è¡Œä¸šæœ€ä½³å®è·µç›´æ¥åµŒå…¥å…¶è®¾è®¡ä¸­ã€‚çŸ¥è¯†æ£€ç´¢ç®¡é“ã€æ™ºèƒ½ä½“æ¡†æ¶å’Œå·¥å…·è°ƒç”¨æ¨¡å¼â€”â€”è¿™äº›é€šå¸¸éƒ½æ˜¯å†…ç½®çš„ï¼Œé˜²æ­¢å›¢é˜Ÿé‡å¤é€ è½®å­ï¼Œå¹¶ç¡®ä¿è·¨é¡¹ç›®çš„ä¸€è‡´æ€§ã€‚</li>
</ul>
<p><strong>æ ¸å¿ƒæ´å¯Ÿï¼š</strong> ä½ä»£ç å¹³å°å¹¶ä¸ä¼šæ¶ˆé™¤ç¼–ç ã€‚å®ƒä»¬æå‡äº†æŠ½è±¡å±‚çº§ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿå°†å·¥ç¨‹ç²¾åŠ›é›†ä¸­åœ¨æœ€é‡è¦çš„åœ°æ–¹â€”â€”<strong>ä¸šåŠ¡å·®å¼‚åŒ–</strong>ï¼Œè€Œä¸æ˜¯åŸºç¡€è®¾æ–½çš„ç®¡é“é“ºè®¾ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a325ba8239840d2a9321f9895afea9b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQWxhbkhvdQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767491727&amp;x-signature=3vLNOw2EpXG%2Bn%2FYBBw%2BD5KmyK74%3D" alt="ä¸ºä»€ä¹ˆä½ä»£ç å¹³å°åœ¨å½“ä¸‹è‡³å…³é‡è¦" loading="lazy"/></p>
<h2 data-id="heading-1">å½“å‰æ ¼å±€ï¼šä¸‰ç§æˆªç„¶ä¸åŒçš„è·¯å¾„</h2>
<p>ä»Šå¤©çš„æ™ºèƒ½ä½“å¹³å°ç”Ÿæ€ç³»ç»Ÿå¤§è‡´åˆ†ä¸ºä¸‰ä¸ªé˜µè¥ï¼Œæ¯ä¸ªé˜µè¥éƒ½é’ˆå¯¹ä¸åŒçš„ä¼˜å…ˆçº§å’Œç”¨ä¾‹è¿›è¡Œäº†ä¼˜åŒ–ã€‚</p>
<ol>
<li><strong>Dify</strong> å°†è‡ªå·±å®šä½ä¸ºä¼ä¸šçº§çš„ä¸€ç«™å¼æŠ€æœ¯æ ˆã€‚å®ƒå¤„ç†ä»åŸå‹åˆ°ç”Ÿäº§çš„å…¨ç”Ÿå‘½å‘¨æœŸï¼šå·¥ä½œæµã€RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ç®¡é“ã€æ™ºèƒ½ä½“ç¼–æ’ã€æ¨¡å‹ç®¡ç†å’Œå¯è§‚æµ‹æ€§ã€‚å®ƒç‰¹åˆ«é€‚åˆé‚£äº›æ„å»ºéœ€è¦é•¿æœŸç»´æŠ¤å’Œæ‰©å±•çš„åº”ç”¨ç¨‹åºçš„å›¢é˜Ÿã€‚</li>
<li><strong>n8n</strong> ä»¥ä¸åŒçš„æ–¹å¼åº”å¯¹è¿™ä¸ªé—®é¢˜ã€‚å®ƒä»æ ¹æœ¬ä¸Šæ˜¯ä¸€ä¸ª<strong>å¸æ”¶äº† AI èƒ½åŠ›çš„å·¥ä½œæµè‡ªåŠ¨åŒ–å¹³å°</strong>ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå¢åŠ äº†å·¥ä½œæµåŠŸèƒ½çš„ AI å¹³å°ã€‚è¿™ä¸ªåŒºåˆ«å¾ˆé‡è¦ã€‚n8n çš„ä¼˜åŠ¿åœ¨äºå°† AI é›†æˆåˆ°å¤æ‚çš„ä¸šåŠ¡æµç¨‹ä¸­â€”â€”è¿æ¥ CRM ç³»ç»Ÿã€è‡ªåŠ¨åŒ–æ–‡æ¡£å¤„ç†ã€ç¼–æ’å¤šç³»ç»Ÿå·¥ä½œæµï¼Œåœ¨è¿™äº›åœºæ™¯ä¸­ï¼Œè¯­è¨€æ¨¡å‹è™½ç„¶å¼ºå¤§ï¼Œä½†åªæ˜¯ä¼—å¤šç»„ä»¶ä¸­çš„ä¸€ä¸ªã€‚</li>
<li><strong>Coze (æ‰£å­)</strong> ï¼Œå­—èŠ‚è·³åŠ¨çš„å¹³å°ï¼Œé’ˆå¯¹é€Ÿåº¦å’Œå¯è®¿é—®æ€§è¿›è¡Œäº†ä¼˜åŒ–ã€‚å¦‚æœè¯´ Dify æ˜¯ä¸ºå·¥ç¨‹å¸ˆæ„å»ºçš„ï¼Œn8n æ˜¯ä¸ºç³»ç»Ÿé›†æˆå•†æ„å»ºçš„ï¼Œé‚£ä¹ˆ Coze çš„ç›®æ ‡å°±æ˜¯å¿«é€Ÿå®éªŒå’Œè·¨å¹³å°éƒ¨ç½²ã€‚å®ƒçš„ä¼˜åŠ¿åœ¨äºè®©éæŠ€æœ¯ç”¨æˆ·èƒ½å¤Ÿåœ¨æçŸ­çš„æ—¶é—´å†…å°†å¯ç”¨çš„æ™ºèƒ½ä½“å‘å¸ƒåˆ°å¤šä¸ªå¹³å°ã€‚</li>
</ol>
<p>è¿™äº›ä¸ä»…ä»…æ˜¯ UI ä¸Šçš„ç»†å¾®å·®åˆ«ã€‚å®ƒä»¬ä»£è¡¨äº†å…³äºâ€œè¿™äº›å¹³å°åº”è¯¥è§£å†³ä»€ä¹ˆé—®é¢˜â€ä»¥åŠâ€œè°åº”è¯¥æ¥è§£å†³è¿™äº›é—®é¢˜â€çš„æ ¹æœ¬ä¸åŒçš„è®¾è®¡å“²å­¦ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7dc2c9b55bf406c835305f998c3ad11~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQWxhbkhvdQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767491727&amp;x-signature=r5WERKSrPTMlABqRRCwGDN6SHd0%3D" alt="å½“å‰æ ¼å±€ï¼šä¸‰ç§æˆªç„¶ä¸åŒçš„è·¯å¾„" loading="lazy"/></p>
<h2 data-id="heading-2">Difyï¼šä¼ä¸šçº§åŸºçŸ³</h2>
<h3 data-id="heading-3">æ¶æ„ä¸å“²å­¦</h3>
<p>Dify è¯ç”Ÿäºè¿™æ ·ä¸€ç§è®¤è¯†ï¼šLLM åº”ç”¨å¼€å‘éœ€è¦é€‚å½“çš„å·¥å…·ã€‚å®ƒæ˜¯ä¸€ä¸ªå¼€æºå¹³å°ï¼Œå°†å·¥ä½œæµç¼–æ’ã€æ£€ç´¢å¢å¼ºç”Ÿæˆ (RAG)ã€æ™ºèƒ½ä½“èƒ½åŠ›å’Œè¿ç»´åŸºç¡€è®¾æ–½èšåˆæˆä¸€ä¸ªç³»ç»Ÿã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒä»ç¬¬ä¸€å¤©èµ·å°±æ˜¯ä¸º<strong>ç”Ÿäº§å°±ç»ª</strong>ï¼ˆProduction-Readyï¼‰è€Œè®¾è®¡çš„â€”â€”å›¢é˜Ÿæ˜¾ç„¶æ˜¯ä¸ºé‚£äº›éœ€è¦æœåŠ¡çœŸå®ç”¨æˆ·è€Œä¸ä»…ä»…æ˜¯åŸå‹çš„åº”ç”¨ç¨‹åºè®¾è®¡çš„ã€‚</p>
<p>è¯¥å¹³å°ä½¿ç”¨åˆ†å±‚æ¶æ„ï¼šæ•°æ®å±‚å¤„ç†çŸ¥è¯†åº“å’Œä¸Šä¸‹æ–‡ï¼Œå¼€å‘å±‚æä¾›å¯è§†åŒ–å·¥ä½œæµå’Œæç¤ºè¯ IDEï¼Œç¼–æ’å±‚ç®¡ç†æ™ºèƒ½ä½“é€»è¾‘å’Œå·¥å…·è°ƒç”¨ï¼Œä»¥åŠè·¨ä¸åŒ LLM æä¾›å•†çš„åŸºç¡€å±‚æŠ½è±¡ã€‚è¿™ç§å…³æ³¨ç‚¹åˆ†ç¦»å¾ˆé‡è¦ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥æ›´æ¢å‘é‡æ•°æ®åº“ã€æ›´æ”¹ LLM æä¾›å•†æˆ–è°ƒæ•´æ™ºèƒ½ä½“ç­–ç•¥ï¼Œè€Œæ— éœ€é‡æ–°æ¥è¿‡ã€‚</p>
<h3 data-id="heading-4">ç”Ÿæ€ç³»ç»Ÿçš„ç°çŠ¶</h3>
<p>Dify å¸‚åœºä»£è¡¨äº†æ¶æ„ä¸Šçš„é‡å¤§è¿›æ­¥ã€‚æˆªè‡³ 2025 å¹´ 12 æœˆï¼Œè¯¥å¸‚åœºæ‰˜ç®¡äº† 600 å¤šä¸ªæ’ä»¶ï¼Œæ¶µç›–æ¨¡å‹ã€å·¥å…·ã€æ™ºèƒ½ä½“ç­–ç•¥ã€æ‰©å±•å’Œæ•°æ®æºã€‚è¿™ä¸ä»…æ˜¯æ•°é‡çš„é—®é¢˜â€”â€”è¿™æ˜¯ä¸€ç§å‘çœŸæ­£çš„<strong>æ’ä»¶ä¼˜å…ˆæ¶æ„</strong>çš„è½¬å˜ï¼Œæ–°åŠŸèƒ½å¯ä»¥æ¸…æ™°åœ°é›†æˆï¼Œè€Œæ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç ã€‚</p>
<p>æœ€è¿‘çš„å¸‚åœºæ–°å¢åŠŸèƒ½å‡¸æ˜¾äº†å¹³å°çš„è½¨è¿¹ã€‚Bright Data äº 2025 å¹´ 11 æœˆåŠ å…¥ï¼Œæä¾›äº†ç›´æ¥è¾“å…¥çŸ¥è¯†ç®¡é“çš„ç½‘é¡µæŠ“å–åŠŸèƒ½ã€‚Tavily æ·»åŠ äº†ç”¨äºå®æ—¶çŸ¥è¯†é›†æˆçš„ AI ä¼˜åŒ–ç½‘ç»œæœç´¢ã€‚è¿™äº›ä¸æ˜¯äº‹åçš„è¡¥å……æˆ–è¡¥ä¸â€”â€”å®ƒä»¬æ˜¯ä¸å†…ç½®åŠŸèƒ½å¹¶è‚©å·¥ä½œçš„ä¸€ç­‰å…¬æ°‘æ’ä»¶ã€‚</p>
<p>2025 å¹´æ¨å‡ºçš„çŸ¥è¯†ç®¡é“ï¼ˆKnowledge Pipelineï¼‰ä»£è¡¨äº† Dify å¯¹ RAG å·¥ç¨‹æŒ‘æˆ˜çš„å›åº”ã€‚å®ƒä¸å†å°†æ–‡æ¡£å¤„ç†æˆå‘é‡çš„è¿‡ç¨‹è§†ä¸ºé»‘ç›’ï¼Œè€Œæ˜¯è®©æ¯ä¸€æ­¥éƒ½å¯è§ä¸”å¯è°ƒä¼˜ã€‚ä½ å¯ä»¥çœ‹åˆ°æ–‡æ¡£è§£æã€åˆ†å—ã€æ¸…æ´—å’ŒåµŒå…¥ä½œä¸ºç¦»æ•£çš„èŠ‚ç‚¹ï¼Œä½ å¯ä»¥é‡æ–°é…ç½®å®ƒä»¬ã€‚æ–‡æœ¬æå–åœ¨ä½ çš„ PDF ä¸Šå¤±è´¥äº†ï¼Ÿæ¢ä¸€ä¸ªä¸åŒçš„è§£æå™¨ã€‚éœ€è¦è‡ªå®šä¹‰åˆ†å—é€»è¾‘ï¼Ÿç¼–å†™ä¸€ä¸ªä»£ç èŠ‚ç‚¹æ¥å¤„ç†å®ƒã€‚è¿™ç§é€æ˜åº¦çš„ä»·å€¼è¿œè¶…å…¶è¡¨è±¡â€”â€”RAG çš„å¯é æ€§å®Œå…¨å–å†³äºæ­£ç¡®å¤„ç†è¿™äº›å¹³å‡¡çš„ç»†èŠ‚ã€‚</p>
<h3 data-id="heading-5">ç”Ÿäº§åº”ç”¨çš„ä¼˜åŠ¿</h3>
<p><strong>å€¼å¾—å¼ºè°ƒçš„æ˜¯Dify æ”¯æŒå¤š LLMã€‚</strong> ç”¨æˆ·æ²¡æœ‰è¢«é”å®šåœ¨ OpenAI æˆ–ä»»ä½•å•ä¸€æä¾›å•†ä¸­ã€‚Dify æ”¯æŒ GPT æ¨¡å‹ã€Anthropic Claudeã€é€šè¿‡ Ollama çš„å¼€æºé€‰é¡¹ã€åƒ AWS Bedrock è¿™æ ·çš„ä¸“æœ‰æä¾›å•†ï¼Œä»¥åŠå…¼å®¹ OpenAI API çš„è‡ªå®šä¹‰ç«¯ç‚¹ã€‚è¿™ç§çµæ´»æ€§å¯¹äºæˆæœ¬ä¼˜åŒ–å’Œé¿å…ä¾›åº”å•†é”å®šè‡³å…³é‡è¦ã€‚æç¤ºè¯ IDE å…è®¸ä½ åœ¨ä¸åŒæ¨¡å‹ä¹‹é—´å¯è§†åŒ–åœ°æµ‹è¯•å’Œæ¯”è¾ƒæç¤ºè¯â€”â€”è¿™ä¸€åŠŸèƒ½æ˜¾è‘—åŠ é€Ÿäº†ä¼˜åŒ–å·¥ä½œã€‚</p>
<p>ä¼ä¸šå®‰å…¨åŠŸèƒ½éå¸¸å…¨é¢ã€‚Dify æä¾›ç«¯åˆ°ç«¯åŠ å¯†ã€åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ (RBAC)ã€å®¡è®¡æ—¥å¿—è®°å½•ï¼Œå¹¶æ”¯æŒäº‘ SaaS å’Œæœ¬åœ°éƒ¨ç½²ã€‚AWS æä¾›äº† Dify Premium ä½œä¸ºå•ç§Ÿæˆ·éƒ¨ç½²é€‰é¡¹ï¼Œä¾›æ— æ³•ä½¿ç”¨å¤šç§Ÿæˆ·æœåŠ¡çš„å›¢é˜Ÿä½¿ç”¨ã€‚è¿™ç§çµæ´»æ€§â€”â€”äº‘ç«¯ç”¨äºå¼€å‘ä¾¿åˆ©ï¼Œç§æœ‰éƒ¨ç½²ç”¨äºæ•æ„Ÿæ•°æ®â€”â€”æ­£æ—¥ç›Šæˆä¸ºä¼ä¸šé‡‡ç”¨çš„æ ‡é…ã€‚</p>
<h3 data-id="heading-6">ç°å®çš„å±€é™æ€§</h3>
<p>Dify ç¡®å®æœ‰è¾ƒé™¡å³­çš„å­¦ä¹ æ›²çº¿ã€‚è¯¥å¹³å°ä¹‹æ‰€ä»¥å¼ºå¤§ï¼Œæ­£æ˜¯å› ä¸ºå®ƒæš´éœ²äº†å¤æ‚æ€§ã€‚éæŠ€æœ¯ç”¨æˆ·é€šå¸¸éœ€è¦æŒ‡å¯¼æ‰èƒ½æ„å»ºç®€å•çš„èŠå¤©åº”ç”¨ç¨‹åºä»¥å¤–çš„ä¸œè¥¿ã€‚è™½ç„¶å¯è§†åŒ–æ„å»ºå™¨å¾ˆç›´è§‚ï¼Œä½†å¤æ‚çš„é€»è¾‘â€”â€”å¤šæ™ºèƒ½ä½“ç³»ç»Ÿã€è‡ªå®šä¹‰è®°å¿†ç­–ç•¥ã€å¤æ‚çš„å·¥å…·ç¼–æ’â€”â€”éœ€è¦ç†è§£åº•å±‚æ¦‚å¿µã€‚è¿™æœ¬èº«ä¸æ˜¯é™åˆ¶ï¼Œè€Œæ˜¯ä¸€ä¸ªéœ€è¦æ„è¯†åˆ°çš„çº¦æŸã€‚</p>
<p>é«˜å¹¶å‘åœºæ™¯ä¸‹çš„æ€§èƒ½å€¼å¾—ä¸€æã€‚Dify çš„æ ¸å¿ƒæœåŠ¡è¿è¡Œåœ¨ Python ä¸Šï¼Œè¿™åœ¨æœ¬è´¨ä¸Šæ— æ³•åŒ¹é… Go æˆ– Rust ç­‰ç¼–è¯‘è¯­è¨€çš„ååé‡ã€‚å¯¹äºå¤„ç†æ•°ç™¾ä¸ªå¹¶å‘è¯·æ±‚çš„åº”ç”¨ç¨‹åºï¼Œä½ å¯èƒ½éœ€è¦åœ¨ç¼“å­˜ã€é€Ÿç‡é™åˆ¶æˆ–è‡ªå®šä¹‰éƒ¨ç½²ç­–ç•¥æ–¹é¢è¿›è¡Œé¢å¤–çš„å·¥ç¨‹æŠ•èµ„ã€‚å¤§å¤šæ•°ä¸­ç«¯å¸‚åœºå’Œä¼ä¸šåº”ç”¨ç¨‹åºä¸ä¼šè¾¾åˆ°è¿™ä¸€é™åˆ¶ï¼Œä½†æœ€å¥½é’ˆå¯¹é¢„æœŸè§„æ¨¡ä¸‹è¿›è¡Œæµ‹è¯•ã€‚</p>
<p>RAG åŸºç¡€è™½ç„¶æœ‰æ‰€æ”¹è¿›ï¼Œä»éœ€ç»†è‡´çš„å·¥ç¨‹è®¾è®¡ã€‚ç®€å•åœ°ä¸Šä¼ æ–‡æ¡£å¹¶ä¸èƒ½ä¿è¯å¯é çš„æ£€ç´¢ã€‚åˆ†å—ç­–ç•¥éå¸¸é‡è¦ã€‚åµŒå…¥è´¨é‡å› æ¨¡å‹è€Œå¼‚ã€‚æ£€ç´¢è®¾ç½®å½±å“ç›¸å…³æ€§å’Œæˆæœ¬ã€‚Dify æ¶ˆé™¤äº†è®¸å¤šéšœç¢ï¼Œä½†å¹¶æœªæ¶ˆé™¤å¯¹æ·±æ€ç†Ÿè™‘çš„æ•°æ®å‡†å¤‡çš„éœ€æ±‚ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb9b8e7616994d27a5b600b601707d3a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQWxhbkhvdQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767491727&amp;x-signature=N%2FJmumZCPPlsqs4MU3nD06f4A80%3D" alt="Difyï¼š å¼€æºLLMåº”ç”¨å·¥ç¨‹åŒ–å¹³å°æ¶æ„" loading="lazy"/></p>
<h2 data-id="heading-7">n8nï¼šAI é‚‚é€…ä¼ä¸šå·¥ä½œæµè‡ªåŠ¨åŒ–</h2>
<h3 data-id="heading-8">ç‹¬ç‰¹çš„å®šä½</h3>
<p>n8n åœ¨å¹³å°ç”Ÿæ€ç³»ç»Ÿä¸­å æ®ç€ç‹¬ç‰¹çš„åœ°ä½ã€‚å¾ˆæ˜ç¡®å®ƒæ˜¯ä¸€ä¸ª<strong>åŒ…å« AI åŠŸèƒ½çš„å·¥ä½œæµè‡ªåŠ¨åŒ–å·¥å…·</strong>ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª<strong>å¢åŠ äº†è‡ªåŠ¨åŒ–åŠŸèƒ½çš„ AI å¹³å°</strong>ã€‚è¿™ç§åŒºåˆ«â€”â€”ä¸æ˜¯ç®€å•çš„è¯­è¨€æ¸¸æˆâ€”â€”äº§ç”Ÿäº†æ ¹æœ¬ä¸åŒçš„ç‰¹å¾ã€‚</p>
<p>åœ¨å…¶æ ¸å¿ƒï¼Œn8n è¿æ¥å„ç§åº”ç”¨ç¨‹åºã€‚è¯¥å¹³å°åŒ…å«æ•°ç™¾ä¸ªé¢„æ„å»ºèŠ‚ç‚¹ï¼šä» Gmail è§¦å‘äº‹ä»¶ï¼Œä½¿ç”¨ä»£ç èŠ‚ç‚¹è½¬æ¢æ•°æ®ï¼Œæ›´æ–° Salesforce è®°å½•ï¼Œå‘å¸ƒåˆ° Slackï¼Œä»¥åŠæŸ¥è¯¢æ•°æ®åº“ã€‚åœ¨è¿™ä¸ªè‡ªåŠ¨åŒ–æ¡†æ¶å†…ï¼Œä½ åµŒå…¥äº† AI èƒ½åŠ›ã€‚ä¸€ä¸ª LLM èŠ‚ç‚¹æˆä¸ºæ›´å¤§æµç¨‹ä¸­çš„ä¸€ä¸ªç»„ä»¶ã€‚è¿™æ­£æ˜¯ n8n çš„äº®ç‚¹â€”â€”ä½¿ AI æˆä¸ºå¤æ‚ä¸šåŠ¡é€»è¾‘ä¸­è¢«ç¼–æ’çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯æ•´ä¸ªåº”ç”¨ç¨‹åºã€‚</p>
<p>n8n ä¸­çš„å·¥ä½œæµæ¨¡å‹éå¸¸ä¼˜é›…ã€‚æ¯ä¸ªå·¥ä½œæµéƒ½æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªè§¦å‘èŠ‚ç‚¹ï¼ˆä½•æ—¶å¼€å§‹ï¼‰ï¼Œå¹¶å¯ä»¥åŒ…å«å¤šä¸ªå¸¸è§„èŠ‚ç‚¹ï¼ˆåšä»€ä¹ˆï¼‰ã€‚æ•°æ®ä½œä¸ºç»“æ„åŒ–çš„ JSON åœ¨èŠ‚ç‚¹ä¹‹é—´æµåŠ¨ï¼Œæä¾›äº†é€æ˜åº¦å’Œç²¾ç¡®åº¦ã€‚ä½ å¯ä»¥ä½¿ç”¨ If/Else èŠ‚ç‚¹è¿›è¡Œåˆ†æ”¯é€»è¾‘ï¼Œä½¿ç”¨ Loop èŠ‚ç‚¹å¾ªç¯æ•°æ®ï¼Œå¹¶ä½¿ç”¨ Merge èŠ‚ç‚¹èšåˆç»“æœã€‚è¿™ç§æŠ½è±¡å¯¹äºå¤æ‚åœºæ™¯æ¥è¯´è¶³å¤Ÿå¼ºå¤§ï¼Œå¯¹äºå¯è§†åŒ–è®¾è®¡æ¥è¯´åˆè¶³å¤Ÿç®€å•ã€‚</p>
<h3 data-id="heading-9">2025 å¹´çš„ AI é›†æˆ</h3>
<p>n8n çš„ AI é›†æˆæ–¹æ³•å·²ç›¸å½“æˆç†Ÿã€‚è¯¥å¹³å°ç°åœ¨åŒ…æ‹¬ä¸“ç”¨çš„ AI Agent èŠ‚ç‚¹ï¼Œå¤„ç†è‡ªä¸»æ¨ç†å’Œå·¥å…·é€‰æ‹©ã€‚ä¸æ‰‹åŠ¨åœ¨èŠ‚ç‚¹ä¹‹é—´è·¯ç”±ä¸åŒï¼ŒAgent èŠ‚ç‚¹åœ¨å†…éƒ¨åè°ƒå¤šæ­¥æ¨ç†ã€‚å®šä¹‰å¯ç”¨çš„å·¥å…·ï¼Œè®¾å®šç›®æ ‡ï¼Œç„¶åæ™ºèƒ½ä½“å†³å®šæ‰§è¡Œç­–ç•¥ã€‚</p>
<p>ç¤¾åŒºè´¡çŒ®ä¾ç„¶å¼ºåŠ²ã€‚æˆªè‡³ 2025 å¹´ 11 æœˆï¼Œç»è¿‡éªŒè¯çš„ç¤¾åŒºèŠ‚ç‚¹å¼€å§‹å‡ºç°åœ¨ n8n Cloud ä¸Šï¼Œè€Œä¸ä»…ä»…æ˜¯åœ¨è‡ªæ‰˜ç®¡å®ä¾‹ä¸­ã€‚æœ€åˆçš„æ¨å‡ºåŒ…æ‹¬å¤§çº¦ 25 ä¸ªç¤¾åŒºæ„å»ºå’Œåˆä½œä¼™ä¼´æ”¯æŒçš„èŠ‚ç‚¹ã€‚ä» OCR åŠŸèƒ½ï¼ˆä»å›¾åƒä¸­æå–æ–‡æœ¬ï¼‰åˆ°ç½‘é¡µæŠ“å–ï¼ˆFirecrawl, Apifyï¼‰å†åˆ°ä¸“é—¨çš„ AI æœåŠ¡ã€‚è¿™æ ‡å¿—ç€ä¸€ä¸ªæˆç†Ÿçš„ç”Ÿæ€ç³»ç»Ÿï¼Œæœ€å¥½çš„ç¤¾åŒºè´¡çŒ®è·å¾—äº†â€œä¸€ç­‰å…¬æ°‘â€çš„åœ°ä½ã€‚</p>
<h3 data-id="heading-10">å®é™…ä¼˜åŠ¿</h3>
<p><strong>n8n çš„ä¸»è¦ä¼˜åŠ¿æ˜¯é›†æˆå¹¿åº¦ã€‚</strong> å¦‚æœä½ éœ€è¦è‡ªåŠ¨åŒ–æ¶‰åŠå¤šä¸ªç³»ç»Ÿçš„æµç¨‹â€”â€”ä» API æ‹‰å–æ•°æ®ï¼Œè½¬æ¢å®ƒï¼Œç”¨ AI ä¸°å¯Œå®ƒï¼Œå°†ç»“æœå­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œå¹¶é€šè¿‡ç”µå­é‚®ä»¶å’Œ Slack é€šçŸ¥åˆ©ç›Šç›¸å…³è€…â€”â€”n8n ä¸°å¯Œçš„é¢„æ„å»ºèŠ‚ç‚¹ä½¿è¿™å˜å¾—ç®€å•ç›´æ¥ã€‚ä½ ä¸æ˜¯åœ¨ç³»ç»Ÿä¹‹é—´æ­å»ºæ¡¥æ¢ï¼›æ¡¥æ¢å·²ç»å­˜åœ¨äº†ã€‚</p>
<p>æ”¯æŒè‡ªæ‰˜ç®¡çš„å¼€æºæ¶æ„å¯¹è®¸å¤šç»„ç»‡æ¥è¯´å¾ˆé‡è¦ã€‚å¯ä»¥ä¿æŒå¯¹æ•°æ®å’Œæ‰§è¡Œçš„å®Œå…¨æ§åˆ¶ã€‚æ ¸å¿ƒåŠŸèƒ½æ— éœ€å¤–éƒ¨ API è°ƒç”¨ã€‚æ²¡æœ‰ä¾›åº”å•†ä¾èµ–çš„åŸºç¡€è®¾æ–½ã€‚éšç€å…¬å¸ä¼˜å…ˆè€ƒè™‘æ•°æ®å®‰å…¨å’Œè¿è¥ç‹¬ç«‹æ€§ï¼Œè¿™ä¸€ç‚¹è¶Šæ¥è¶Šæœ‰ä»·å€¼ã€‚</p>
<p>å¯¹äºç†Ÿæ‚‰åŸºæœ¬è‡ªåŠ¨åŒ–æ¦‚å¿µçš„ç”¨æˆ·æ¥è¯´ï¼Œå­¦ä¹ æ›²çº¿æ¯” Dify æ›´å®½å®¹ã€‚å¦‚æœä½ ä½¿ç”¨è¿‡ Zapier æˆ– IFTTTï¼Œn8n çš„è§†è§‰èŒƒå¼ä¼šè®©ä½ æ„Ÿè§‰å¾ˆè‡ªç„¶ã€‚å¤§å¤šæ•°äººå¯ä»¥åœ¨å‡ å°æ—¶å†…æ„å»ºæœ‰ç”¨çš„å·¥ä½œæµã€‚</p>
<h3 data-id="heading-11">çœŸæ­£çš„çº¦æŸ</h3>
<p>æœ€æ˜¾è‘—çš„é™åˆ¶æ˜¯<strong>éæŒä¹…åŒ–è®°å¿†é—®é¢˜</strong>ã€‚n8n å†…ç½®çš„ç®€å•è®°å¿†ï¼ˆSimple Memoryï¼‰å’Œç®€å•å‘é‡å­˜å‚¨ï¼ˆSimple Vector Storeï¼‰çº¯ç²¹åœ¨å†…å­˜ä¸­è¿è¡Œã€‚è¿™åœ¨å¼€å‘å’Œæµ‹è¯•æœŸé—´å·¥ä½œæ­£å¸¸ï¼Œä½†ç”Ÿäº§éƒ¨ç½²å¿…é¡»ç”¨å¤–éƒ¨æ•°æ®åº“æ›¿æ¢è¿™äº›â€”â€”Redis ç”¨äºå¯¹è¯å†å²è®°å½•ï¼ŒPinecone æˆ– Milvus ç”¨äºå‘é‡å­˜å‚¨ã€‚è¿™å¢åŠ äº†å‰æœŸå¹¶ä¸æ€»æ˜¯æ˜¾è€Œæ˜“è§çš„è¿è¥å¤æ‚æ€§å’ŒåŸºç¡€è®¾æ–½æˆæœ¬ã€‚</p>
<p>éšç€å·¥ä½œæµå˜å¾—å¤æ‚ï¼Œè°ƒè¯•å˜å¾—å…·æœ‰æŒ‘æˆ˜æ€§ã€‚è™½ç„¶ n8n æä¾›äº†æ‰§è¡Œå†å²è®°å½•å’ŒèŠ‚ç‚¹çº§æ—¥å¿—ï¼Œä½†åœ¨å…·æœ‰åˆ†æ”¯é€»è¾‘çš„äºŒåä¸ªèŠ‚ç‚¹ä¸­è·Ÿè¸ªæ•°æ®æµéœ€è¦ç³»ç»Ÿæ€§çš„è°ƒæŸ¥ã€‚å¤æ‚çš„å·¥ä½œæµå¯èƒ½å˜å¾—éš¾ä»¥ç»´æŠ¤ã€‚</p>
<p>ç‰ˆæœ¬æ§åˆ¶å’Œå¤šç”¨æˆ·åä½œæ— æ³•ä¸ä¼ ç»Ÿä»£ç ä»“åº“çš„æˆç†Ÿåº¦ç›¸åŒ¹é…ã€‚è™½ç„¶ä½ å¯ä»¥å°†å·¥ä½œæµå¯¼å‡ºä¸º JSON æ–‡ä»¶ï¼Œä½†æ¯”è¾ƒç‰ˆæœ¬ä¹‹é—´çš„æ›´æ”¹æ— æ³•æä¾› <code>git diffs</code>Â é‚£æ ·çš„æ¸…æ™°åº¦ã€‚åŒæ—¶ç¼–è¾‘åŒä¸€å·¥ä½œæµçš„å›¢é˜Ÿå¯èƒ½ä¼šæ„å¤–å‘ç”Ÿå†²çªã€‚</p>
<p>æç«¯è§„æ¨¡ï¼ˆæ•°åƒä¸ªå¹¶å‘è¯·æ±‚ï¼‰ä¸‹çš„æ€§èƒ½éœ€è¦ä»”ç»†çš„æ¶æ„è®¾è®¡ã€‚n8n åŸºäºèŠ‚ç‚¹çš„æ‰§è¡Œæ¨¡å‹ä¸ä¸“ç”¨æœåŠ¡ç›¸æ¯”å¢åŠ äº†å¼€é”€ã€‚å¤§å¤šæ•°ä¸šåŠ¡è‡ªåŠ¨åŒ–ç”¨ä¾‹æ°¸è¿œä¸ä¼šè§¦åŠè¿™ä¸ªå¤©èŠ±æ¿ï¼Œä½†å¯¹äºé«˜é¢‘äº¤æ˜“ç³»ç»Ÿã€å¤§è§„æ¨¡æ—¥å¿—å¤„ç†æˆ–ç±»ä¼¼çš„æç«¯è§„æ¨¡åœºæ™¯æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªçœŸæ­£çš„é™åˆ¶ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba2a29fe32764870ad6000570257e07b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQWxhbkhvdQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767491727&amp;x-signature=t2dXJHuKI2BxKqMt3qwjrCjDzh0%3D" alt="n8nï¼šAI é‚‚é€…ä¼ä¸šå·¥ä½œæµè‡ªåŠ¨åŒ–" loading="lazy"/></p>
<h2 data-id="heading-12">Coze (æ‰£å­)ï¼šæ™ºèƒ½ä½“åˆ›ä½œçš„æ°‘ä¸»åŒ–</h2>
<h3 data-id="heading-13">æ™®åŠä¼˜å…ˆçš„æ–¹æ³•</h3>
<p>Coze ä»£è¡¨äº†ä¸€ç§ä¸åŒçš„å“²å­¦ï¼šå¤§å¹…é™ä½å‡†å…¥é—¨æ§›ï¼Œä½¿æŠ€æœ¯èƒŒæ™¯æˆä¸ºå¯é€‰é¡¹ã€‚å­—èŠ‚è·³åŠ¨çš„å¹³å°å¼ºè°ƒè§†è§‰ç¾å­¦å’Œå¿«é€Ÿè¿­ä»£ã€‚ç•Œé¢æ„Ÿè§‰ä¸åƒä¼ ç»Ÿçš„å¼€å‘è€…å·¥å…·ï¼Œæ›´åƒæ˜¯ç§¯æœ¨ï¼Œéç¨‹åºå‘˜ä¹Ÿå¯ä»¥ç›´è§‚åœ°æ“ä½œã€‚</p>
<p>Coze å›¢é˜Ÿæ˜¾ç„¶ä»ä¸­å›½çš„å¸‚åœºåŠ¨æ€ä¸­å¸å–äº†æ•™è®­ã€‚ä»–ä»¬è§‚å¯Ÿåˆ°ï¼Œè™½ç„¶æ¨å‡ºäº†æ•°ä»¥åƒè®¡çš„èŠå¤©æœºå™¨äººå¼åº”ç”¨ï¼Œä½†å¾ˆå°‘æœ‰è·å¾—å¸‚åœºç‰µå¼•åŠ›çš„ã€‚ä»–ä»¬å¾—å‡ºç»“è®ºï¼Œ<strong>åˆ†å‘ï¼ˆDistributionï¼‰</strong> â€”â€”ä»å•ä¸€ç•Œé¢å‘å¸ƒåˆ°å¤šä¸ªå¹³å°çš„èƒ½åŠ›â€”â€”è¢«ä½ä¼°äº†ã€‚å› æ­¤ï¼ŒCoze é’ˆå¯¹è·¨å¹³å°éƒ¨ç½²è¿›è¡Œäº†ä¼˜åŒ–ã€‚ä¸€æ¬¡æ„å»ºï¼Œåªéœ€æå°‘æ­¥éª¤å³å¯å‘å¸ƒåˆ°å¾®ä¿¡ã€é£ä¹¦ã€é’‰é’‰ã€Telegramã€Discord å’Œ Web ç«¯ã€‚</p>
<h3 data-id="heading-14">èƒ½åŠ›ä¸é›†æˆ</h3>
<p>Coze çš„æ’ä»¶ç”Ÿæ€ç³»ç»ŸåŒ…æ‹¬ 400 å¤šä¸ªé¢„æ„å»ºé›†æˆã€‚ä¸ Dify çš„å¸‚åœºï¼ˆå¼ºè°ƒå¯æ‰©å±•æ€§ï¼‰æˆ– n8n çš„èŠ‚ç‚¹ï¼ˆå¼ºè°ƒå¹¿åº¦ï¼‰ä¸åŒï¼ŒCoze çš„æ’ä»¶é’ˆå¯¹äºšæ´²åŠå…¨çƒæ—¥ç›Šç›¸å…³çš„æ¶ˆè´¹è€…å’Œä¼ä¸šç”¨ä¾‹è¿›è¡Œäº†ä¼˜åŒ–ã€‚æœç´¢ APIã€ç¿»è¯‘æœåŠ¡ã€æ–‡æ¡£å¤„ç†ã€ç”µå­å•†åŠ¡ APIâ€”â€”è¿™äº›éƒ½èƒ½æ— ç¼é›†æˆã€‚</p>
<p>è¯¥å¹³å°æœ€è¿‘æ‰©å±•åˆ°äº†å­—èŠ‚è·³åŠ¨æ‰€è°“çš„â€œAI Officeâ€é¢†åŸŸâ€”â€”èƒ½åŠ›ä¸ä»…ä»…å±€é™äºèŠå¤©æœºå™¨äººï¼Œè¿˜å»¶ä¼¸åˆ°äº†å®é™…ç”Ÿäº§åŠ›ã€‚åƒ AI Excelï¼ˆç”µå­è¡¨æ ¼è‡ªåŠ¨åŒ–ï¼‰ã€AI Designï¼ˆè§†è§‰ç”Ÿæˆï¼‰å’Œåä½œå·¥ä½œæµç­‰åŠŸèƒ½è¡¨æ˜å…¶å®šä½è¶…è¶Šäº†åŸºäºèŠå¤©çš„ç•Œé¢ï¼Œè¿›å…¥äº†èµ‹èƒ½å·¥ä½œçš„æ™ºèƒ½ä½“é¢†åŸŸã€‚</p>
<p>çŸ¥è¯†åº“çš„å®ç°ç®€å•ç›´æ¥ã€‚ä¸Šä¼ æ–‡æ¡£ã€PDF ç”šè‡³ç»“æ„åŒ–æ•°æ®ï¼ŒCoze å¤„ç†ç´¢å¼•ã€‚ä¸å·¥ä½œæµçš„é›†æˆæ„å‘³ç€ä½ çš„æ™ºèƒ½ä½“å¯ä»¥åœ¨å¯¹è¯æœŸé—´æ£€ç´¢ç›¸å…³ä¸Šä¸‹æ–‡ã€‚å¤šæ¨¡å‹æ”¯æŒï¼ˆGPT-4, Gemini, Claude, Doubaoï¼‰è®©ä½ èƒ½é’ˆå¯¹æˆæœ¬æˆ–èƒ½åŠ›è¿›è¡Œä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-15">Coze çš„å“è¶Šä¹‹å¤„</h3>
<p>å¯¹äº<strong>å¿«é€ŸåŸå‹è®¾è®¡å’Œå®éªŒ</strong>ï¼ŒCoze æ˜¯çœŸæ­£çš„å¿«ã€‚ä»ä¸€ä¸ªç©ºé¡¹ç›®åˆ°ä¸€ä¸ªå‘å¸ƒçš„æ™ºèƒ½ä½“ï¼Œå¯¹äºç®€å•çš„ç”¨ä¾‹æ¥è¯´ï¼ŒçœŸçš„åªéœ€è¦ 30 åˆ†é’Ÿã€‚ç•Œé¢æ¶ˆé™¤äº†æŠ€æœ¯æ‘©æ“¦ã€‚å¼€å‘è€…ä¸ä¼šè¢«åŸºç¡€è®¾æ–½é—®é¢˜é˜»ç¢ï¼›ä»–ä»¬ä¸“æ³¨äºå®šä¹‰æ™ºèƒ½ä½“è¡Œä¸ºå’Œè°ƒæ•´å“åº”ã€‚</p>
<p><strong>åˆ†å‘å€å¢å™¨</strong>æ˜¯ Coze çš„ç‹¬ç‰¹ä¼˜åŠ¿ã€‚ä»å•ä¸€ç•Œé¢å‘å¸ƒåˆ°å¤šä¸ªå¹³å°è§£å†³äº†ä¸€ä¸ªå®é™…é—®é¢˜ã€‚å¤§å¤šæ•°æˆåŠŸçš„æ™ºèƒ½ä½“åº”ç”¨ç¨‹åºéœ€è¦å‡ºç°åœ¨ç”¨æˆ·å·²ç»èŠ±è´¹æ—¶é—´çš„åœ°æ–¹ã€‚Coze è®©è¿™å˜å¾—ç®€å•ç›´æ¥ã€‚</p>
<p>æˆæœ¬é—¨æ§›æä½ã€‚ä½ å¯ä»¥ç«‹å³å…è´¹æ„å»ºå’Œå‘å¸ƒæ™ºèƒ½ä½“ã€‚å¦‚æœä½ é€‰æ‹©å¯ç”¨å®ƒï¼Œå˜ç°å°±ä¼šå‘ç”Ÿã€‚è¿™ç§â€œå…è´¹å¼€å§‹â€çš„æ¨¡å¼å‡å°‘äº†å†³ç­–æ‘©æ“¦ï¼Œå¹¶å…è®¸åœ¨é¢„ç®—æä½çš„æƒ…å†µä¸‹è¿›è¡Œå®éªŒã€‚</p>
<h3 data-id="heading-16">æ˜¾è‘—çš„å±€é™æ€§</h3>
<p><strong>MCPï¼ˆæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰æ”¯æŒæ˜æ˜¾ç¼ºå¤±ã€‚</strong> è¿™ä¸€æ–°å…´æ ‡å‡†ä½¿æ™ºèƒ½ä½“èƒ½å¤Ÿä»¥æ ‡å‡†åŒ–çš„æ–¹å¼ä¸å¤–éƒ¨å·¥å…·å’Œæ•°æ®æºè¿›è¡Œäº¤äº’ã€‚Coze çš„ä¸“æœ‰æ’ä»¶ç³»ç»Ÿè™½ç„¶å·¥ä½œæ­£å¸¸ï¼Œä½†ä¸æ›´å¹¿æ³›çš„ MCP ç”Ÿæ€ç³»ç»Ÿä¸å…¼å®¹ï¼Œé™åˆ¶äº†äº’æ“ä½œæ€§å’Œæœªæ¥çš„çµæ´»æ€§ã€‚</p>
<p>æ’ä»¶é…ç½®çš„å¤æ‚æ€§ä¸ Coze çš„æ˜“ç”¨æ€§æ‰¿è¯ºç›¸çŸ›ç›¾ã€‚è™½ç„¶ç®€å•çš„æ’ä»¶å¾ˆç›´æ¥ï¼Œä½†é‚£äº›éœ€è¦ API å¯†é’¥ã€OAuth é…ç½®æˆ–å¤šä¸ªå‚æ•°çš„æ’ä»¶é€šå¸¸éœ€è¦æŠ€æœ¯èƒŒæ™¯ã€‚é«˜çº§å·¥ä½œæµç¼–æ’â€”â€”æ¡ä»¶é€»è¾‘ã€é”™è¯¯å¤„ç†ã€å¤æ‚æ•°æ®è½¬æ¢â€”â€”éœ€è¦è®¸å¤šç›®æ ‡ç”¨æˆ·ä¸å…·å¤‡çš„ JavaScript æˆ– Python çŸ¥è¯†ã€‚</p>
<p>å¯¼å‡ºèƒ½åŠ›æœ‰é™ã€‚Coze æœ€è¿‘ä¸ºä»˜è´¹å±‚çº§æ·»åŠ äº†å¯¼å‡ºåŠŸèƒ½ï¼Œä½†æ ¼å¼æ˜¯ä¸“æœ‰çš„ï¼ˆZip æ–‡ä»¶è€Œä¸æ˜¯æ ‡å‡† JSONï¼‰ã€‚è¿™æ„å‘³ç€å·¥ä½œæµæ— æ³•è½»æ˜“è¿ç§»åˆ°å…¶ä»–å¹³å°æˆ–ä¸å¤–éƒ¨ç‰ˆæœ¬æ§åˆ¶é›†æˆã€‚ä½ å®é™…ä¸Šè¢«é”å®šåœ¨ Coze çš„ç”Ÿæ€ç³»ç»Ÿä¸­ã€‚</p>
<p>è¯¥å¹³å°çš„æ¼”è¿›è½¨è¿¹ä¸å­—èŠ‚è·³åŠ¨çš„ä¸šåŠ¡ä¼˜å…ˆçº§ç´§å¯†ç›¸å…³ã€‚è™½ç„¶ç›®å‰çš„æŠ•èµ„çœ‹èµ·æ¥å¾ˆç¨³å›ºï¼Œä½†å…¬å¸çš„åœ°ç¼˜æ”¿æ²»å®šä½å’Œæˆ˜ç•¥è°ƒæ•´å¯èƒ½ä¼šå½±å“é•¿æœŸçš„å¹³å°æ‰¿è¯ºã€‚è¿™ä»£è¡¨äº†ä¸å¼€æºé¡¹ç›®æˆ–æ‹¥æœ‰æ›´å¤šæ ·åŒ–æŠ•èµ„ç»„åˆçš„å¤§å‹å¹³å°å…¬å¸ä¸åŒçš„é£é™©æ¦‚å†µã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42a86c2434b042ca96f99c8287f29233~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQWxhbkhvdQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767491727&amp;x-signature=uMZUMep5ubDJQtr7dyO5SXrCyig%3D" alt="Cozeï¼šè®©ä»£ç†â€œäººäººå¯åšâ€" loading="lazy"/></p>
<h2 data-id="heading-17">æ¯”è¾ƒåˆ†æï¼šé€‰æ‹©åˆé€‚çš„å¹³å°</h2>
<p><strong>ç”¨äºå¿«é€ŸåŸå‹è®¾è®¡å’Œå®éªŒ</strong> Coze çš„é€Ÿåº¦ä¼˜åŠ¿å¾ˆæœ‰æ„ä¹‰ã€‚å¦‚æœä½ ä¸»è¦å…³å¿ƒçš„æ˜¯ä»¥æœ€å°‘çš„è®¾ç½®å¿«é€ŸéªŒè¯æƒ³æ³•ï¼ŒCoze çš„å‡†å…¥é—¨æ§›æœ€ä½ã€‚ä½ ä¼šç«‹å³è·å¾—ç”Ÿäº§åŠ›ã€‚æƒè¡¡æ˜¯é’ˆå¯¹å¤æ‚éœ€æ±‚çš„çµæ´»æ€§é™ä½å’Œä¾›åº”å•†é”å®šé—®é¢˜ã€‚ Dify æä¾›äº†ä¸€ä¸ªä¸­é—´åœ°å¸¦ã€‚è®¾ç½®æ­¥éª¤æ¯” Coze å¤šï¼Œä½†æ¯” n8n å°‘ã€‚å°½ç®¡å­¦ä¹ æ›²çº¿è¾ƒé™¡ï¼Œä½†åŸå‹è®¾è®¡é€Ÿåº¦ä»¤äººå°è±¡æ·±åˆ»ã€‚ä¸€æ—¦ä¸Šæ‰‹ï¼Œä½ å°†ä¿æŒæ›´å¥½çš„çµæ´»æ€§å’Œç”Ÿæ€ç³»ç»Ÿç‹¬ç«‹æ€§ã€‚ n8n çš„è®¾ç½®å¼€é”€æœ€é«˜ï¼Œä½†å‰ææ˜¯ä½ è¿˜æ²¡æœ‰å°†å…¶ç”¨äºå…¶ä»–è‡ªåŠ¨åŒ–éœ€æ±‚ã€‚å¦‚æœä½ çš„ç»„ç»‡å·²ç»åœ¨ä½¿ç”¨ n8n è¿›è¡Œä¸šåŠ¡æµç¨‹è‡ªåŠ¨åŒ–ï¼Œæ·»åŠ  AI èƒ½åŠ›åªéœ€æå°‘çš„é¢å¤–æŠ•èµ„ã€‚æ–°ç»„ç»‡é¢ä¸´æ›´å¤šçš„åˆå§‹å¤æ‚æ€§ã€‚</p>
<p><strong>ç”¨äºä¼ä¸šç”Ÿäº§éƒ¨ç½²ï¼š</strong> ify çš„å…¨é¢åŠŸèƒ½é›†â€”â€”å¤š LLM æ”¯æŒã€ä¼ä¸šå®‰å…¨ã€å®¡è®¡æ—¥å¿—ã€ç§æœ‰éƒ¨ç½²é€‰é¡¹â€”â€”ä½¿å…¶æˆä¸ºç»„ç»‡æ„å»ºè®¡åˆ’ç»´æŠ¤å¤šå¹´çš„åº”ç”¨ç¨‹åºçš„è‡ªç„¶é€‰æ‹©ã€‚ å¦‚æœä½ è¦å°† AI é›†æˆåˆ°ç°æœ‰çš„ä¸šåŠ¡æµç¨‹è‡ªåŠ¨åŒ–ä¸­ï¼Œn8n ä¼šèƒœå‡ºã€‚å®ƒæä¾›äº†å¤æ‚ä¼ä¸šå·¥ä½œæµæ‰€éœ€çš„é›†æˆå¹¿åº¦å’Œå¯æ‰©å±•æ€§ã€‚ç”Ÿæ€ç³»ç»Ÿè¶³å¤Ÿæˆç†Ÿï¼Œå¯ä»¥è¿›è¡Œå¤§è§„æ¨¡ç”Ÿäº§éƒ¨ç½²ï¼Œå°½ç®¡åŸºç¡€è®¾æ–½è§„åˆ’å¾ˆé‡è¦ã€‚ Coze é€šå¸¸ä¸æ˜¯æ­¤ç”¨ä¾‹çš„å¹³å°ã€‚è™½ç„¶æŠ€æœ¯ä¸Šå¯è¡Œï¼Œä½†å…¶è®¾è®¡ç†å¿µä¼˜å…ˆè€ƒè™‘å¿«é€Ÿå®éªŒè€Œéé•¿æœŸå¯ç»´æŠ¤æ€§ã€‚å¯¹äºæ¦‚å¿µéªŒè¯ï¼ˆPoCï¼‰å’Œåˆ†å‘æ¯”æŠ€æœ¯çµæ´»æ€§æ›´é‡è¦çš„é¢å‘å®¢æˆ·çš„åº”ç”¨ç¨‹åºæ¥è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ªæå¥½çš„å¹³å°ã€‚</p>
<p><strong>ç”¨äºè‡ªå®šä¹‰ä¸šåŠ¡é€»è¾‘å’Œé›†æˆå¤æ‚æ€§ï¼š</strong> n8n çš„é›†æˆå¹¿åº¦æ— å¯åŒ¹æ•Œã€‚å¦‚æœä½ éœ€è¦ä»¥å¤æ‚çš„æ¨¡å¼è¿æ¥ APIã€æ•°æ®åº“å’ŒæœåŠ¡ï¼ŒåŒæ—¶åµŒå…¥ AI æ™ºèƒ½ï¼Œn8n æä¾›äº†æœ€ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚è¯¥å¹³å°æœ¬è´¨ä¸Šæ“…é•¿æˆä¸ºä½ æŠ€æœ¯æ ˆä¸­çš„â€œç»“ç¼”ç»„ç»‡â€ã€‚ å¦‚æœä½ çš„å¤æ‚æ€§é›†ä¸­åœ¨ AI é€»è¾‘ä¸Šâ€”â€”å¤æ‚çš„æ™ºèƒ½ä½“ç¼–æ’ã€å¤æ‚çš„ RAG éœ€æ±‚å’Œå¤šæ¨¡å‹ç¼–æ’ï¼ŒDify æ•ˆæœå¾ˆå¥½ã€‚å®ƒçš„å·¥ä½œæµæ„å»ºå™¨å¯ä»¥æœ‰æ•ˆåœ°å¤„ç†è¿™äº›é—®é¢˜ï¼Œå°½ç®¡åœ¨é AI ç³»ç»Ÿçš„é›†æˆå¹¿åº¦ä¸Šæ— æ³•ä¸ n8n åŒ¹æ•Œã€‚ å¦‚æœéœ€è¦è¶…å‡ºå…¶æ’ä»¶ç”Ÿæ€ç³»ç»Ÿçš„å¤æ‚è‡ªå®šä¹‰é€»è¾‘ï¼ŒCoze å°±ä¼šå—åˆ°é™åˆ¶ã€‚å®ƒä¸æ˜¯ä¸ºæ­¤ç”¨ä¾‹è®¾è®¡çš„ã€‚</p>
<p><strong>ç”¨äºå›¢é˜Ÿå’Œæ‰©å±•ï¼š</strong> Dify çš„åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ã€å·¥ä½œåŒºç®¡ç†å’Œå¯è§‚æµ‹æ€§å·¥å…·å¾ˆå¥½åœ°æ”¯æŒå›¢é˜Ÿåä½œã€‚è¯¥å¹³å°éšç»„ç»‡ä»å•ä¸ªå¼€å‘äººå‘˜å‘å±•åˆ°ä¼ä¸šå›¢é˜Ÿè€Œæˆé•¿ã€‚ n8n éœ€è¦æ›´ä»”ç»†çš„åŸºç¡€è®¾æ–½è§„åˆ’ä»¥è¿›è¡Œå›¢é˜Ÿæ‰©å±•ã€‚éšç€å›¢é˜Ÿçš„å‘å±•ï¼Œç‰ˆæœ¬æ§åˆ¶æŒ‘æˆ˜å˜å¾—æ›´åŠ æ˜æ˜¾ã€‚ç„¶è€Œï¼Œå·²ç»è¿è¡Œå¤æ‚è‡ªåŠ¨åŒ–æ ˆçš„ç»„ç»‡å¯ä»¥å°† n8n å·¥ä½œæµé›†æˆåˆ°å…¶ç°æœ‰çš„éƒ¨ç½²å®è·µä¸­ã€‚ Coze çš„åä½œåŠŸèƒ½æ­£åœ¨ä¸æ–­å‘å±•ã€‚å¤šç”¨æˆ·å·¥ä½œåŒºæ”¯æŒæ­£åœ¨å¼€å‘ä¸­ï¼Œä½†ç›®å‰çš„å›¢é˜Ÿæ‰©å±•èƒ½åŠ›æ¯” Dify æ›´æœ‰é™ã€‚</p>
<h2 data-id="heading-18">â€œå°å­©å­æ‰åšé€‰æ‹©ï¼Œå¤§äººå…¨éƒ½è¦â€</h2>
<p>é€šè¿‡æ·±å…¥äº†è§£è¿™ä¸‰ä¸ªå¹³å°å¾—å‡ºçš„ç»“è®ºæ˜¯ï¼šå®ƒä»¬å¹¶éå¤„äºç«äº‰å…³ç³»ï¼Œè€Œæ˜¯åœ¨è§£å†³ AI åº”ç”¨ç”Ÿæ€ç³»ç»Ÿä¸­çš„ä¸åŒé—®é¢˜ã€‚</p>
<p>æœ€æˆç†Ÿçš„ç»„ç»‡æ­£åœ¨é‡‡ç”¨<strong>æ··åˆæ–¹æ³•</strong>ã€‚ä»–ä»¬ä½¿ç”¨ Coze æˆ– Dify è¿›è¡Œå¿«é€Ÿå®éªŒå’Œé¢å‘å®¢æˆ·çš„åº”ç”¨ç¨‹åºã€‚ä»–ä»¬åˆ©ç”¨ n8n å°† AI èƒ½åŠ›é›†æˆåˆ°ç°æœ‰çš„ä¸šåŠ¡æµç¨‹è‡ªåŠ¨åŒ–ä¸­ã€‚ä»–ä»¬ä½¿ç”¨ä»£ç ä¼˜å…ˆå¼€å‘æ¥å¤„ç†å¹³å°æ— æ³•æœ‰æ•ˆå¤„ç†çš„ç‰¹æ®Šéœ€æ±‚ã€‚</p>
<p>è¿™ç§â€œå¤šå¹³å°èåˆâ€ï¼ˆPolyglot Platformï¼‰çš„æ–¹æ³•åæ˜ äº†æˆç†Ÿåº¦ã€‚å®ƒæ‰¿è®¤ä¸åŒçš„å·¥å…·æ“…é•¿è§£å†³ä¸åŒçš„é—®é¢˜ã€‚è§£å†³æ–¹æ¡ˆç©ºé—´è¶³å¤Ÿå¤§ï¼Œæ²¡æœ‰ä»»ä½•å•ä¸€å¹³å°å¯ä»¥ä¸»å®°ã€‚</p>
<p><strong>è€ƒè™‘ä¸€ä¸ªå…·ä½“çš„åœºæ™¯ï¼š</strong> ä¸€å®¶é‡‘èæœåŠ¡å…¬å¸æƒ³è¦æ„å»ºä¸€ä¸ª AI æ™ºèƒ½ä½“æ¥åˆ†æå®¢æˆ·æ•°æ®ã€æ£€ç´¢ç›¸å…³æ³•è§„å¹¶ç”Ÿæˆåˆæ­¥è´·æ¬¾å†³ç­–ã€‚ä»–ä»¬å¯èƒ½ä¼šä½¿ç”¨ <strong>Dify</strong> æ¥æ„å»ºæ ¸å¿ƒæ™ºèƒ½ä½“â€”â€”åˆ©ç”¨å…¶ RAG åŠŸèƒ½è¿›è¡Œæ³•è§„æ£€ç´¢å’Œå¤šæ¨¡å‹æ”¯æŒä»¥ä¼˜åŒ–æˆæœ¬ã€‚åŒæ—¶ï¼Œä»–ä»¬ä½¿ç”¨ <strong>n8n</strong> åˆ›å»ºå·¥ä½œæµï¼Œå½“è´·æ¬¾ç”³è¯·åˆ°è¾¾æ—¶è§¦å‘ Dify çš„æ™ºèƒ½ä½“ï¼Œæå–å†³ç­–è¾“å‡ºï¼Œå¹¶å°†ç»“æœè¾“å…¥å…¶ä¼ ç»Ÿçš„è´·æ¬¾ç®¡ç†ç³»ç»Ÿã€‚ä¸ºäº†å¯¹æ­¤æ™ºèƒ½ä½“è¿›è¡Œå¿«é€Ÿçš„é¢å‘å®¢æˆ·çš„å®éªŒï¼Œä»–ä»¬åœ¨ <strong>Coze</strong> ä¸­æ„å»ºåŸå‹ï¼Œä»¥ä¾¿åœ¨æŠ•èµ„æ›´æ·±åº¦çš„é›†æˆä¹‹å‰éªŒè¯å¸‚åœºååº”ã€‚</p>
<p>è¿™ä¸æ˜¯ä¸ºäº†å¤æ‚è€Œå¤æ‚ã€‚è¿™æ˜¯å®ç”¨ä¸»ä¹‰ã€‚æ¯ä¸ªå¹³å°éƒ½å°†å…¶ç‰¹å®šçš„ä¼˜åŠ¿è´¡çŒ®ç»™æ›´å¤§çš„æ¶æ„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58d22f715fa648509e34cf56a58cd310~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQWxhbkhvdQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767491727&amp;x-signature=hCL2%2BJMenM3ECokbooPrqyZeq0M%3D" alt="é€‰æ‹©åˆé€‚çš„å¹³å°" loading="lazy"/></p>
<h2 data-id="heading-19">å€¼å¾—å…³æ³¨çš„æ–°å…´è¶‹åŠ¿</h2>
<ul>
<li><strong>æ’ä»¶ç”Ÿæ€ç³»ç»Ÿæ­£åœ¨æˆç†Ÿã€‚</strong> Dify çš„ 600+ æ’ä»¶ã€n8n Cloud ä¸Šçš„éªŒè¯ç¤¾åŒºèŠ‚ç‚¹ä»¥åŠ Coze ä¸æ–­æ‰©å±•çš„æ’ä»¶åº“è¡¨æ˜ï¼Œç”Ÿæ€ç³»ç»Ÿæ­£å˜å¾—æ¯”æ ¸å¿ƒå¹³å°åŠŸèƒ½æ›´é‡è¦ã€‚åœ¨ 2025 å¹´åŠä»¥åï¼Œå¹³å°é€‰æ‹©åº”ç€é‡æƒè¡¡ç”Ÿæ€ç³»ç»Ÿçš„å¹¿åº¦å’Œè´¨é‡ã€‚</li>
<li><strong>æ™ºèƒ½ä½“èƒ½åŠ›æ­£åœ¨å¸¸æ€åŒ–ã€‚</strong> æ‰€æœ‰ä¸‰ä¸ªå¹³å°ç°åœ¨éƒ½å°†è‡ªä¸»æ™ºèƒ½ä½“è§†ä¸ºä¸€ç­‰å…¬æ°‘åŠŸèƒ½ï¼Œè€Œä¸æ˜¯é«˜çº§ç”¨ä¾‹ã€‚è¿™åæ˜ äº†å…¨è¡Œä¸šçš„å…±è¯†ï¼Œå³å¤šæ­¥æ¨ç†å’Œå·¥å…·ä½¿ç”¨æ˜¯æœ‰ä»·å€¼çš„ AI åº”ç”¨çš„åŸºç¡€ï¼Œè€Œä¸æ˜¯è¾¹ç¼˜æƒ…å†µã€‚</li>
<li><strong>å¤šæ¨¡å‹ç¼–æ’æ­£åœ¨æˆä¸ºæ ‡å‡†ã€‚</strong> å•ä¸€ LLM æä¾›å•†å¹³å°çš„æ—¶ä»£æ­£åœ¨ç»“æŸã€‚åœ¨åŒä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­æ”¯æŒ GPTã€Claudeã€æœ¬åœ°æ¨¡å‹å’Œä¸“ç”¨æä¾›å•†è¶Šæ¥è¶Šå—åˆ°æœŸå¾…ã€‚å®ç°çœŸæ­£çš„<strong>æ¨¡å‹ä¸­ç«‹æ€§</strong>çš„å¹³å°å°†å…·æœ‰ç«äº‰ä¼˜åŠ¿ã€‚</li>
<li><strong>å®æ—¶æ•°æ®é›†æˆè‡³å…³é‡è¦ã€‚</strong> è¿æ¥åˆ°å®æ—¶æ•°æ®æºï¼ˆå¦‚ Dify çš„ Bright Data å’Œ Tavily é›†æˆï¼‰çš„çŸ¥è¯†ç®¡é“æ¶æ„è¶Šæ¥è¶Šæœ‰ä»·å€¼ã€‚é™æ€çŸ¥è¯†åº“å¾ˆå¿«å°±ä¼šè¿‡æ—¶ï¼›å®æ—¶æ•°æ®è¿æ¥ä½¿æ™ºèƒ½ä½“èƒ½å¤Ÿæä¾›å½“å‰ã€å‡†ç¡®çš„ä¿¡æ¯ã€‚</li>
</ul>
<h2 data-id="heading-20">åšå‡ºä½ çš„å¹³å°é€‰æ‹©</h2>
<p>åœ¨é€‰æ‹©ä½ä»£ç æ™ºèƒ½ä½“å¹³å°æ—¶ï¼Œè¯·æŒ‰é¡ºåºè€ƒè™‘è¿™äº›é—®é¢˜ï¼š</p>
<ol>
<li><strong>ä½ çš„æ—¶é—´èŠ‚ç‚¹ï¼Ÿ</strong> å‡ å¤©æˆ–å‡ å‘¨å»ºè®®ä½¿ç”¨ Cozeã€‚å‡ ä¸ªæœˆå»ºè®®ä½¿ç”¨ Dify æˆ– n8nï¼Œå…·ä½“å–å†³äºå¤æ‚æ€§ã€‚æ›´é•¿çš„æ—¶é—´è¡¨æ”¯æŒæ›´è¯¦ç»†çš„è¯„ä¼°ã€‚</li>
<li><strong>ä½ å›¢é˜Ÿçš„æŠ€æœ¯èƒŒæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ</strong> éæŠ€æœ¯å›¢é˜Ÿå€¾å‘äº Cozeã€‚æ··åˆå›¢é˜Ÿæ›´å–œæ¬¢ Difyã€‚è‡ªåŠ¨åŒ–ä¸“å®¶é’ç n8nã€‚</li>
<li><strong>ä½ å°†å¦‚ä½•è¡¡é‡æˆåŠŸï¼Ÿ</strong> å¸‚åœºé€Ÿåº¦å’Œåˆ†å‘èŒƒå›´æœ‰åˆ©äº Cozeã€‚ç”Ÿäº§å¯é æ€§å’Œå¯æ‰©å±•æ€§æœ‰åˆ©äº Difyã€‚ä¸ç°æœ‰ç³»ç»Ÿçš„é›†æˆæœ‰åˆ©äº n8nã€‚</li>
<li><strong>ä½ å¯¹å¹³å°ä¾èµ–çš„é£é™©æ‰¿å—èƒ½åŠ›å¦‚ä½•ï¼Ÿ</strong> å¼€æºå’Œè‡ªæ‰˜ç®¡é€‰é¡¹ï¼ˆDify å’Œ n8nï¼‰é™ä½äº†ä¾›åº”å•†é”å®šé£é™©ã€‚Coze çš„ä¸“æœ‰ç”Ÿæ€ç³»ç»Ÿå…·æœ‰è¾ƒé«˜çš„è½¬æ¢æˆæœ¬ã€‚</li>
<li><strong>ä½ çš„ç”¨ä¾‹æœ‰å¤šå¤æ‚ï¼Ÿ</strong> ç®€å•çš„èŠå¤©æœºå™¨äººé€‚åˆä»»ä½•å¹³å°ã€‚å¤æ‚çš„å·¥ä½œæµå’Œæ™ºèƒ½ä½“ç¼–æ’æœ‰åˆ©äº Dify æˆ– n8nã€‚è·¨å¹³å°çš„ç®€å•éƒ¨ç½²æœ‰åˆ©äº Cozeã€‚</li>
</ol>
<h3 data-id="heading-21">æˆ‘ä»¬æ­£å¤„äº AI å¹³å°ä¸“ä¸šåŒ–æ—¶ä»£</h3>
<p>æˆ‘ä»¬ä¸å†äº‰è®ºä½ä»£ç  AI å¹³å°æ˜¯å¦è¶³ä»¥ç”¨äºç”Ÿäº§â€”â€”è¿™ä¸ªé—®é¢˜å·²ç»è§£å†³äº†ã€‚æˆ‘ä»¬ç°åœ¨äº‰è®ºçš„æ˜¯<strong>å“ªç§ä¸“ç”¨å¹³å°æœ€èƒ½è§£å†³ä½ çš„ç‰¹å®šé—®é¢˜</strong>ã€‚</p>
<p>åº”ç”¨äº AI æ™ºèƒ½ä½“çš„å¹³å°ç»æµå¹¶ä¸æ˜¯è¦å–ä»£ä¸“ä¸šå·¥ç¨‹ã€‚å®ƒæ˜¯æå‡å·¥ç¨‹å¸ˆç”¨æ›´å°‘çš„ä»£ç å’Œæ›´å°‘çš„åŸºç¡€è®¾æ–½ç®¡é“æ‰€èƒ½å®Œæˆçš„äº‹æƒ…ã€‚ä¸€ä¸ªå°å›¢é˜Ÿç°åœ¨å¯ä»¥æ„å»ºä»¥å‰éœ€è¦æ›´å¤§çš„å·¥ç¨‹éƒ¨é—¨æ‰èƒ½å®Œæˆçš„åº”ç”¨ç¨‹åºã€‚è¿™ä¸æ˜¯å·¥ç¨‹æŠ€è‰ºçš„ä¸§å¤±â€”â€”è¿™æ˜¯åº”ç”¨åœ¨æ›´é«˜æŠ½è±¡å±‚çº§ä¸Šçš„å·¥ç¨‹æŠ€è‰ºã€‚</p>
<p>è¿™é‡Œç ”ç©¶çš„ä¸‰ä¸ªå¹³å°â€”â€”Difyã€n8n å’Œ Cozeâ€”â€”å„è‡ªä»£è¡¨äº†åº”å¯¹è¿™ä¸€æŒ‘æˆ˜çš„æœ‰æ•ˆæ–¹æ³•ã€‚å®ƒä»¬å·²ç»è¶³å¤Ÿæˆç†Ÿï¼Œå¯ä»¥æ”¯æŒå¤§è§„æ¨¡çš„ç”Ÿäº§åº”ç”¨ã€‚æœªæ¥ä¸æ˜¯å…³äºä¸€ä¸ªå¹³å°çš„ä¸€ç»Ÿå¤©ä¸‹ï¼›è€Œæ˜¯å…³äºä¸ºæ¯ä¸ªé—®é¢˜é€‰æ‹©æ­£ç¡®çš„å·¥å…·ï¼Œå¹¶å°†å®ƒä»¬ä½œä¸ºæ›´å¹¿æ³›æŠ€æœ¯æˆ˜ç•¥çš„ä¸€éƒ¨åˆ†è¿›è¡Œé›†æˆã€‚</p>
<p>åœ¨ 2025 å¹´åŠä»¥åï¼Œ<strong>å¹³å°ç´ å…»ï¼ˆPlatform Literacyï¼‰</strong> å°†æˆä¸º AI ä»ä¸šè€…çš„æ ¸å¿ƒæŠ€èƒ½ã€‚äº†è§£æ¯ä¸ªå¹³å°çš„ä¼˜åŠ¿æ‰€åœ¨ï¼Œè¯†åˆ«æ¯ä¸ªå¹³å°èƒ½å¤Ÿå¾ˆå¥½è§£å†³çš„é—®é¢˜ï¼Œå¹¶èƒ½å¤Ÿè¯„ä¼°æ–°å…´ç«äº‰å¯¹æ‰‹ï¼Œå°†æ¯”åœ¨ä»»ä½•å•ä¸€å¹³å°ä¸Šçš„æ·±åšä¸“ä¸šçŸ¥è¯†æ›´é‡è¦ã€‚å¿«é€Ÿæ„å»ºåŸå‹ã€è¯„ä¼°é€‰é¡¹ä»¥åŠåœ¨å¹³å°ä¹‹é—´è¿›è¡Œæ·±æ€ç†Ÿè™‘çš„é›†æˆçš„èƒ½åŠ›ï¼Œå°†åŒºåˆ†æˆåŠŸçš„å›¢é˜Ÿå’Œé‚£äº›ä»åœ¨äº‰è®ºåŸºç¡€é—®é¢˜çš„å›¢é˜Ÿã€‚</p>
<p>â€œ<strong>ä»¥ç¬¬ä¸€æ€§åŸç†è‡ªå·±æ„å»º</strong>â€çš„æ—¶ä»£æ­£åœ¨è®©ä½äºâ€œ<strong>ç”¨å¼ºå¤§çš„å¹³å°æ™ºèƒ½ç»„è£…</strong>â€çš„æ—¶ä»£ã€‚è¿™ä¸ä»…æ˜¯ä¸€ç§å¦¥åâ€”â€”è¿™æ˜¯ä¸€é¡¹æŠ€æœ¯è¾¾åˆ°æˆç†Ÿçš„æ ‡å¿—ã€‚å¯¹äº AI æ™ºèƒ½ä½“è€Œè¨€ï¼Œæˆ‘ä»¬æ˜¾ç„¶å·²ç»åˆ°äº†è¿™ä¸€æ­¥ã€‚</p>
<p>åŸæ–‡é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmedium.com%2Faimonks%2Fthe-rise-of-low-code-ai-agent-platforms-mastering-dify-n8n-and-coze-in-2025-cbd8aad04ae7" target="_blank" title="https://medium.com/aimonks/the-rise-of-low-code-ai-agent-platforms-mastering-dify-n8n-and-coze-in-2025-cbd8aad04ae7" ref="nofollow noopener noreferrer">The Rise of Low-Code AI Agent Platforms: Mastering Dify, n8n, and Coze in 2025</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Transformerå…¥é—¨ï¼šä¸€æ–‡è¯»æ‡‚ã€ŠAttention Is All You Needã€‹]]></title>    <link>https://juejin.cn/post/7588093282530852916</link>    <guid>https://juejin.cn/post/7588093282530852916</guid>    <pubDate>2025-12-28T02:18:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588093282530852916" data-draft-id="7588124225701969960" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Transformerå…¥é—¨ï¼šä¸€æ–‡è¯»æ‡‚ã€ŠAttention Is All You Needã€‹"/> <meta itemprop="keywords" content="ç®—æ³•,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-28T02:18:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰æ–—ç±³"/> <meta itemprop="url" content="https://juejin.cn/user/3157453124416622"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Transformerå…¥é—¨ï¼šä¸€æ–‡è¯»æ‡‚ã€ŠAttention Is All You Needã€‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3157453124416622/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰æ–—ç±³
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T02:18:33.000Z" title="Sun Dec 28 2025 02:18:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å¼•è¨€ï¼šé¢ è¦†NLPé¢†åŸŸçš„æ–°æ¶æ„</h3>
<p>2017å¹´ï¼Œä¸€ç¯‡åä¸ºã€ŠAttention Is All You Needã€‹çš„è®ºæ–‡æ¨ªç©ºå‡ºä¸–ï¼Œæ­£å¦‚å…¶æ ‡é¢˜æ‰€æ­ç¤ºçš„ï¼Œå®ƒå®£å‘Šäº†ä¸€ä¸ªä»…å‡­â€œæ³¨æ„åŠ›æœºåˆ¶â€å°±èƒ½ç‹¬å½“ä¸€é¢çš„æ–°æ—¶ä»£ã€‚è¿™ç¯‡è®ºæ–‡ä»‹ç»çš„Transformeræ¨¡å‹ï¼Œå½»åº•é¢ è¦†äº†å½“æ—¶è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰é¢†åŸŸçš„æ ¼å±€ã€‚</p>
<p>åœ¨Transformerå‡ºç°ä¹‹å‰ï¼Œåºåˆ—å»ºæ¨¡ä»»åŠ¡ï¼ˆå¦‚æœºå™¨ç¿»è¯‘ï¼‰ä¸€ç›´ç”±å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆRNNï¼‰åŠå…¶å˜ä½“ï¼ˆå¦‚é•¿çŸ­æœŸè®°å¿†ç½‘ç»œLSTMï¼‰æ‰€ä¸»å¯¼ã€‚ç„¶è€Œï¼Œè¿™ç±»æ¨¡å‹å­˜åœ¨ä¸€ä¸ªæ ¹æœ¬æ€§çš„ç“¶é¢ˆï¼šå®ƒä»¬çš„è®¡ç®—è¿‡ç¨‹å…·æœ‰â€œå†…åœ¨çš„é¡ºåºæ€§â€ï¼ˆinherently sequential natureï¼‰ã€‚è¿™æ„å‘³ç€æ¨¡å‹å¿…é¡»æŒ‰é¡ºåºå¤„ç†åºåˆ—ä¸­çš„æ¯ä¸€ä¸ªè¯ï¼Œè¿™ç§æœºåˆ¶ä¸¥é‡é™åˆ¶äº†è®¡ç®—çš„å¹¶è¡Œæ€§ï¼Œä¹Ÿä½¿å¾—å­¦ä¹ é•¿è·ç¦»çš„è¯è¯­ä¾èµ–å…³ç³»å˜å¾—å¼‚å¸¸å›°éš¾ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œç ”ç©¶è€…ä»¬æå‡ºäº†Transformerâ€”â€”ä¸€ä¸ªå®Œå…¨æ‘’å¼ƒäº†å¾ªç¯å’Œå·ç§¯ç»“æ„ï¼Œå®Œå…¨åŸºäºæ³¨æ„åŠ›æœºåˆ¶ï¼ˆbased solely on attention mechanismsï¼‰çš„æ–°å‹ç½‘ç»œæ¶æ„ã€‚å®ƒä¸ä»…åœ¨æ€§èƒ½ä¸Šè¶…è¶Šäº†ä»¥å¾€æ‰€æœ‰çš„æ¨¡å‹ï¼Œæ›´å‡­å€Ÿå…¶å‡ºè‰²çš„å¹¶è¡Œè®¡ç®—èƒ½åŠ›ï¼Œæå¤§åœ°ç¼©çŸ­äº†è®­ç»ƒæ—¶é—´ã€‚è®ºæ–‡æŒ‡å‡ºï¼ŒTransformeræ¨¡å‹â€œå¯ä»¥åœ¨å…«å—P100 GPUä¸Šä»…è®­ç»ƒåäºŒä¸ªå°æ—¶â€å°±èƒ½è¾¾åˆ°å½“æ—¶æœ€å…ˆè¿›çš„ç¿»è¯‘è´¨é‡ã€‚</p>
<p>æœ¬æ–‡å°†éµå¾ªåŸè®ºæ–‡çš„è„‰ç»œï¼Œä»æ•´ä½“æ¶æ„ã€æ ¸å¿ƒæœºåˆ¶åˆ°å…³é”®ç»„ä»¶ï¼Œä¸ºæ‚¨æ·±å…¥æµ…å‡ºåœ°è§£æTransformerçš„ç²¾é«“ã€‚</p>
<hr/>
<h3 data-id="heading-1">1. Transformerçš„æ•´ä½“æ¶æ„ï¼šå®è§‚è§†è§’</h3>
<p>ä»å®è§‚ä¸Šçœ‹ï¼ŒTransformeréµå¾ªäº†å½“æ—¶ä¸»æµåºåˆ—å»ºæ¨¡ä»»åŠ¡ä¸­éå¸¸æˆç†Ÿçš„ç¼–ç å™¨-è§£ç å™¨ï¼ˆEncoder-Decoderï¼‰ç»“æ„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c59954b494214dd9b5d14f7b98ab7d4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5paX57Gz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767493113&amp;x-signature=B1c5bHjemTZoSMozINwm3RfGhWc%3D" alt="1.png" loading="lazy"/></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ¨¡å‹çš„å·¦åŠéƒ¨åˆ†æ˜¯ç¼–ç å™¨ï¼Œå³åŠéƒ¨åˆ†æ˜¯è§£ç å™¨ã€‚</p>
<h4 data-id="heading-2">ç¼–ç å™¨ï¼ˆEncoderï¼‰</h4>
<p>ç¼–ç å™¨çš„æ ¸å¿ƒä»»åŠ¡æ˜¯å°†è¾“å…¥çš„ç¬¦å·åºåˆ— <code>(x1, ..., xn)</code> æ˜ å°„æˆä¸€ä¸ªè¿ç»­çš„å‘é‡è¡¨ç¤º <code>z = (z1, ..., zn)</code>ã€‚è¿™ä¸ª <code>z</code> åŒ…å«äº†è¾“å…¥åºåˆ—çš„å…¨éƒ¨ä¿¡æ¯ã€‚</p>
<p>ä¸ºäº†å®ç°è¿™ä¸€ç›®æ ‡ï¼Œç¼–ç å™¨ç”±<code>N=6</code>ä¸ªå®Œå…¨ç›¸åŒçš„å±‚å †å è€Œæˆã€‚æ¯ä¸€å±‚åˆåŒ…å«ä¸¤ä¸ªæ ¸å¿ƒçš„å­å±‚ï¼š</p>
<ol>
<li><strong>å¤šå¤´è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼ˆmulti-head self-attentionï¼‰</strong> ï¼šè´Ÿè´£æ•æ‰è¾“å…¥åºåˆ—å†…éƒ¨çš„ä¾èµ–å…³ç³»ã€‚</li>
<li><strong>ç®€å•çš„ã€æŒ‰ä½ç½®çš„å…¨è¿æ¥å‰é¦ˆç½‘ç»œï¼ˆposition-wise fully connected feed-forward networkï¼‰</strong> ï¼šå¯¹æ³¨æ„åŠ›å±‚çš„è¾“å‡ºè¿›è¡Œéçº¿æ€§å˜æ¢ã€‚</li>
</ol>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨æ¯ä¸ªå­å±‚çš„å‘¨å›´ï¼Œéƒ½ä½¿ç”¨äº†ä¸€ä¸ªæ®‹å·®è¿æ¥ï¼ˆresidual connectionï¼‰å’Œå±‚å½’ä¸€åŒ–ï¼ˆlayer normalizationï¼‰æ“ä½œï¼Œè¿™æœ‰åŠ©äºç¨³å®šè®­ç»ƒè¿‡ç¨‹å¹¶æå‡æ¨¡å‹æ€§èƒ½ã€‚</p>
<h4 data-id="heading-3">è§£ç å™¨ï¼ˆDecoderï¼‰</h4>
<p>è§£ç å™¨çš„ä»»åŠ¡åˆ™æ˜¯åœ¨æ¥æ”¶ç¼–ç å™¨è¾“å‡ºçš„ <code>z</code> ä¹‹åï¼Œç”Ÿæˆä¸€ä¸ªè¾“å‡ºç¬¦å·åºåˆ— <code>(y1, ..., ym)</code>ã€‚å®ƒä¹ŸåŒæ ·ç”±<code>N=6</code>ä¸ªç›¸åŒçš„å±‚å †å è€Œæˆã€‚</p>
<p>è§£ç å™¨çš„æ¯ä¸€å±‚åœ¨ç¼–ç å™¨ä¸¤ä¸ªå­å±‚çš„åŸºç¡€ä¸Šï¼Œé¢å¤–æ’å…¥äº†ç¬¬ä¸‰ä¸ªå­å±‚ï¼š</p>
<ol>
<li><strong>å¸¦æ©ç çš„å¤šå¤´è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼ˆMasked Multi-Head Attentionï¼‰</strong> ï¼šä¸ç¼–ç å™¨ç±»ä¼¼ï¼Œä½†é€šè¿‡æ©ç ï¼ˆmaskingï¼‰æ¥â€œé˜²æ­¢ä½ç½®å…³æ³¨åˆ°åç»­ä½ç½®â€ï¼ˆprevent positions from attending to subsequent positionsï¼‰ã€‚è¿™ç§æ©ç æœºåˆ¶ï¼Œç»“åˆè®­ç»ƒæ—¶å°†è¾“å‡ºåµŒå…¥å‘å³åç§»ä¸€ä¸ªä½ç½®çš„åšæ³•ï¼Œå…±åŒç¡®ä¿äº†åœ¨é¢„æµ‹ç¬¬ <code>i</code> ä¸ªè¯æ—¶ï¼Œåªèƒ½ä¾èµ–äº <code>i</code> ä¹‹å‰çš„è¾“å‡ºï¼Œä»è€Œä¿è¯äº†æ¨¡å‹çš„è‡ªå›å½’ï¼ˆauto-regressiveï¼‰ç‰¹æ€§ã€‚</li>
<li><strong>ç¼–ç å™¨-è§£ç å™¨å¤šå¤´æ³¨æ„åŠ›ï¼ˆEncoder-Decoder Multi-Head Attentionï¼‰</strong> ï¼šè¿™ä¸€å±‚æ‰§è¡Œå¤šå¤´æ³¨æ„åŠ›æœºåˆ¶ï¼Œä½†å…¶æŸ¥è¯¢ï¼ˆqueriesï¼‰æ¥è‡ªå‰ä¸€ä¸ªè§£ç å™¨å­å±‚ï¼Œè€Œé”®ï¼ˆkeysï¼‰å’Œå€¼ï¼ˆvaluesï¼‰åˆ™æ¥è‡ªç¼–ç å™¨çš„æœ€ç»ˆè¾“å‡ºã€‚è¿™ä½¿å¾—è§£ç å™¨åœ¨ç”Ÿæˆæ¯ä¸ªè¯æ—¶éƒ½èƒ½å…³æ³¨åˆ°è¾“å…¥åºåˆ—çš„å…¨éƒ¨ä¿¡æ¯ã€‚</li>
<li><strong>æŒ‰ä½ç½®çš„å…¨è¿æ¥å‰é¦ˆç½‘ç»œ</strong>ï¼šç»“æ„å’Œä½œç”¨ä¸ç¼–ç å™¨ä¸­çš„ç›¸åŒã€‚</li>
</ol>
<p>åŒæ ·ï¼Œè§£ç å™¨ä¸­çš„æ¯ä¸ªå­å±‚ä¹Ÿé‡‡ç”¨äº†æ®‹å·®è¿æ¥å’Œå±‚å½’ä¸€åŒ–ã€‚</p>
<hr/>
<h3 data-id="heading-4">2. æ ¸å¿ƒæœºåˆ¶ï¼šæ·±å…¥ç†è§£æ³¨æ„åŠ›</h3>
<p>æ—¢ç„¶æ³¨æ„åŠ›ï¼ˆAttentionï¼‰æ˜¯Transformerçš„å”¯ä¸€æ ¸å¿ƒï¼Œé‚£ä¹ˆå®ƒç©¶ç«Ÿæ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢ï¼Ÿ</p>
<h4 data-id="heading-5">2.1 ä»€ä¹ˆæ˜¯æ³¨æ„åŠ›ï¼Ÿ</h4>
<p>è®ºæ–‡ä¸­å°†æ³¨æ„åŠ›æœºåˆ¶æè¿°ä¸ºä¸€ä¸ªæ˜ å°„è¿‡ç¨‹ï¼šå®ƒå°†ä¸€ä¸ªæŸ¥è¯¢ï¼ˆQueryï¼‰å’Œä¸€ç»„é”®å€¼å¯¹ï¼ˆKey-Value pairsï¼‰æ˜ å°„åˆ°ä¸€ä¸ªè¾“å‡ºã€‚</p>
<p>å¯ä»¥è¿™æ ·ç†è§£ï¼š</p>
<ul>
<li><strong>Query (Q)</strong> ï¼šä»£è¡¨å½“å‰éœ€è¦å…³æ³¨çš„ç„¦ç‚¹ã€‚</li>
<li><strong>Key (K)</strong> ï¼šä»£è¡¨åºåˆ—ä¸­å¯ä¾›æ³¨æ„çš„å„ä¸ªå…ƒç´ ã€‚</li>
<li><strong>Value (V)</strong> ï¼šä»£è¡¨è¿™äº›å…ƒç´ å®é™…åŒ…å«çš„ä¿¡æ¯ã€‚</li>
</ul>
<p>æ³¨æ„åŠ›çš„è¾“å‡ºæ˜¯æ‰€æœ‰<strong>å€¼ï¼ˆValuesï¼‰</strong> <strong>åŠ æƒå’Œï¼ˆweighted sumï¼‰</strong> ã€‚è€Œæ¯ä¸ªå€¼å¯¹åº”çš„æƒé‡ï¼Œåˆ™æ˜¯ç”±æŸ¥è¯¢ï¼ˆQueryï¼‰<strong>ä¸å®ƒå¯¹åº”çš„</strong>é”®ï¼ˆKeyï¼‰<strong>é€šè¿‡ä¸€ä¸ª</strong>å…¼å®¹æ€§å‡½æ•°ï¼ˆcompatibility functionï¼‰è®¡ç®—å¾—å‡ºçš„ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯Qå’ŒKè¶ŠåŒ¹é…ï¼Œå¯¹åº”Vçš„æƒé‡å°±è¶Šå¤§ã€‚</p>
<h4 data-id="heading-6">2.2 ç¼©æ”¾ç‚¹ç§¯æ³¨æ„åŠ› (Scaled Dot-Product Attention)</h4>
<p>Transformerä¸­ä½¿ç”¨çš„å…·ä½“æ³¨æ„åŠ›å®ç°è¢«ç§°ä¸ºâ€œç¼©æ”¾ç‚¹ç§¯æ³¨æ„åŠ›â€ã€‚</p>
<p>å…¶è®¡ç®—è¿‡ç¨‹å¯ä»¥åˆ†è§£ä¸ºä»¥ä¸‹å››æ­¥ï¼š</p>
<ol>
<li><strong>è®¡ç®—ç‚¹ç§¯</strong>ï¼šè®¡ç®—æŸ¥è¯¢ï¼ˆQï¼‰ä¸æ‰€æœ‰é”®ï¼ˆKï¼‰çš„ç‚¹ç§¯ï¼Œå¾—åˆ°å®ƒä»¬ä¹‹é—´çš„ç›¸ä¼¼åº¦åˆ†æ•°ã€‚</li>
<li><strong>ç¼©æ”¾</strong>ï¼šå°†ä¸Šä¸€æ­¥å¾—åˆ°çš„æ‰€æœ‰åˆ†æ•°é™¤ä»¥ä¸€ä¸ªç¼©æ”¾å› å­ <code>âˆšdk</code>ï¼ˆå…¶ä¸­<code>dk</code>æ˜¯é”®å‘é‡çš„ç»´åº¦ï¼‰ã€‚è®ºæ–‡çš„è„šæ³¨è§£é‡Šäº†ä¸ºä½•éœ€è¦ç¼©æ”¾ï¼šå½“<code>dk</code>çš„å€¼è¾ƒå¤§æ—¶ï¼Œç‚¹ç§¯çš„ç»“æœé‡çº§ä¼šå˜å¾—å¾ˆå¤§ï¼Œè¿™ä¼šå°†Softmaxå‡½æ•°æ¨å‘æ¢¯åº¦æå°çš„åŒºåŸŸï¼Œä¸åˆ©äºæ¨¡å‹è®­ç»ƒã€‚ç¼©æ”¾æ“ä½œå¯ä»¥æœ‰æ•ˆç¼“è§£è¿™ä¸ªé—®é¢˜ã€‚</li>
<li><strong>Softmaxå½’ä¸€åŒ–</strong>ï¼šå°†ç¼©æ”¾åçš„åˆ†æ•°è¾“å…¥Softmaxå‡½æ•°ï¼Œå¾—åˆ°èŒƒå›´åœ¨0åˆ°1ä¹‹é—´çš„æƒé‡ã€‚æ‰€æœ‰æƒé‡ä¹‹å’Œä¸º1ã€‚</li>
<li><strong>åŠ æƒæ±‚å’Œ</strong>ï¼šç”¨è¿™äº›æƒé‡ä¹˜ä»¥å¯¹åº”çš„å€¼ï¼ˆVï¼‰ï¼Œç„¶åå°†å®ƒä»¬ç›¸åŠ ï¼Œå¾—åˆ°æœ€ç»ˆçš„æ³¨æ„åŠ›è¾“å‡ºã€‚</li>
</ol>
<p>æ•´ä¸ªè¿‡ç¨‹å¯ä»¥ç”¨ä¸€ä¸ªç®€æ´çš„å…¬å¼æ¥è¡¨ç¤ºï¼š <code>Attention(Q, K, V) = softmax( (QK^T) / âˆšdk ) V</code></p>
<h4 data-id="heading-7">2.3 å¤šå¤´æ³¨æ„åŠ› (Multi-Head Attention)</h4>
<p>è®ºæ–‡ä½œè€…å‘ç°ï¼Œä¸å…¶ç”¨<code>d_model</code>ï¼ˆæ¨¡å‹ç»´åº¦ï¼Œå¦‚512ï¼‰ç»´åº¦çš„Qã€Kã€Væ‰§è¡Œä¸€æ¬¡æ³¨æ„åŠ›è®¡ç®—ï¼Œä¸å¦‚å°†å®ƒä»¬åˆ†åˆ«è¿›è¡Œ<code>h</code>æ¬¡çº¿æ€§æŠ•å½±ï¼Œå˜æ¢åˆ°æ›´ä½çš„ç»´åº¦ï¼ˆ<code>dk</code>, <code>dk</code>, <code>dv</code>ï¼‰ï¼Œç„¶åå¹¶è¡Œåœ°æ‰§è¡Œ<code>h</code>æ¬¡æ³¨æ„åŠ›è®¡ç®—ã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>å°†åŸå§‹çš„Qã€Kã€Vé€šè¿‡ä¸åŒçš„çº¿æ€§å˜æ¢ï¼ˆæƒé‡çŸ©é˜µä¸åŒï¼‰æŠ•å½±<code>h</code>æ¬¡ã€‚</li>
<li>å¹¶è¡Œåœ°å¯¹è¿™<code>h</code>ç»„æŠ•å½±åçš„Qã€Kã€Våˆ†åˆ«æ‰§è¡Œä¸€æ¬¡â€œç¼©æ”¾ç‚¹ç§¯æ³¨æ„åŠ›â€è®¡ç®—ã€‚</li>
<li>å°†<code>h</code>ä¸ªæ³¨æ„åŠ›è®¡ç®—çš„è¾“å‡ºç»“æœæ‹¼æ¥ï¼ˆconcatenateï¼‰èµ·æ¥ã€‚</li>
<li>å°†æ‹¼æ¥åçš„ç»“æœå†æ¬¡è¿›è¡Œä¸€æ¬¡çº¿æ€§æŠ•å½±ï¼Œå¾—åˆ°æœ€ç»ˆçš„è¾“å‡ºã€‚</li>
</ol>
<p>è¿™ç§æœºåˆ¶çš„å¥½å¤„åœ¨äºï¼Œæ­£å¦‚è®ºæ–‡æ‰€è¯´ï¼šâ€œå¤šå¤´æ³¨æ„åŠ›å…è®¸æ¨¡å‹åœ¨ä¸åŒä½ç½®å…±åŒå…³æ³¨æ¥è‡ªä¸åŒè¡¨ç¤ºå­ç©ºé—´çš„ä¿¡æ¯ã€‚â€ï¼ˆMulti-head attention allows the model to jointly attend to information from different representation subspaces at different positions.ï¼‰æ¢å¥è¯è¯´ï¼Œä¸åŒçš„â€œå¤´â€ï¼ˆheadï¼‰å¯ä»¥å­¦ä¹ å…³æ³¨ä¸åŒæ–¹é¢çš„ä¿¡æ¯ï¼Œæ¯”å¦‚æœ‰çš„å¤´å…³æ³¨è¯­æ³•ç»“æ„ï¼Œæœ‰çš„å¤´å…³æ³¨è¯­ä¹‰å…³è”ï¼Œä»è€Œå¢å¼ºäº†æ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›ã€‚</p>
<p>åœ¨è®ºæ–‡ä¸­ï¼Œä½œè€…ä½¿ç”¨äº†<code>h=8</code>ä¸ªå¹¶è¡Œçš„æ³¨æ„åŠ›å¤´ã€‚å¯¹äºç»´åº¦ä¸º512çš„<code>d_model</code>ï¼Œæ¯ä¸ªå¤´å¤„ç†çš„ç»´åº¦è¢«ç¼©å°ä¸º<code>dk = dv = 512/8 = 64</code>ã€‚è¿™æ¸…æ™°åœ°ä½“ç°äº†å°†ä¸€ä¸ªå¤§é—®é¢˜åˆ†è§£ä¸ºå¤šä¸ªå°é—®é¢˜å¹¶è¡Œå¤„ç†çš„æ€æƒ³ã€‚</p>
<hr/>
<h3 data-id="heading-8">3. æ³¨æ„åŠ›åœ¨Transformerä¸­çš„ä¸‰å¤§åº”ç”¨åœºæ™¯</h3>
<p>å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶åœ¨Transformeræ¨¡å‹ä¸­æœ‰ä¸‰ç§ä¸åŒçš„åº”ç”¨æ–¹å¼ï¼š</p>
<ul>
<li>
<p><strong>ç¼–ç å™¨-è§£ç å™¨æ³¨æ„åŠ› (Encoder-Decoder Attention)</strong></p>
<ul>
<li>è¿™æ˜¯è¿æ¥ç¼–ç å™¨å’Œè§£ç å™¨çš„æ¡¥æ¢ã€‚å®ƒçš„<strong>æŸ¥è¯¢ï¼ˆqueriesï¼‰</strong> æ¥è‡ªå‰ä¸€ä¸ªè§£ç å™¨å±‚ï¼Œè€Œé”®ï¼ˆkeysï¼‰<strong>å’Œ</strong>å€¼ï¼ˆvaluesï¼‰åˆ™æ¥è‡ªç¼–ç å™¨çš„æœ€ç»ˆè¾“å‡ºã€‚</li>
<li>è¿™ä½¿å¾—è§£ç å™¨åœ¨ç”Ÿæˆæ¯ä¸€ä¸ªè¾“å‡ºè¯æ—¶ï¼Œéƒ½èƒ½å¤Ÿå…³æ³¨åˆ°è¾“å…¥åºåˆ—ä¸­çš„æ‰€æœ‰ä½ç½®ï¼Œè¿™ä¸ä¼ ç»Ÿçš„åºåˆ—åˆ°åºåˆ—æ¨¡å‹ä¸­çš„æ³¨æ„åŠ›æœºåˆ¶éå¸¸ç›¸ä¼¼ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç¼–ç å™¨ä¸­çš„è‡ªæ³¨æ„åŠ› (Encoder Self-Attention)</strong></p>
<ul>
<li>åœ¨ç¼–ç å™¨çš„è‡ªæ³¨æ„åŠ›å±‚ä¸­ï¼Œæ‰€æœ‰çš„é”®ã€å€¼å’ŒæŸ¥è¯¢ï¼ˆkeys, values, and queriesï¼‰éƒ½æ¥è‡ªåŒä¸€ä¸ªåœ°æ–¹â€”â€”å³ç¼–ç å™¨ä¸­å‰ä¸€å±‚çš„è¾“å‡ºã€‚</li>
<li>è¿™ä½¿å¾—ç¼–ç å™¨ä¸­çš„æ¯ä¸ªä½ç½®éƒ½èƒ½å…³æ³¨åˆ°å‰ä¸€å±‚è¾“å‡ºçš„æ‰€æœ‰ä½ç½®ï¼Œä»è€Œæ•æ‰è¾“å…¥åºåˆ—å†…éƒ¨çš„ä¾èµ–å…³ç³»ã€‚</li>
</ul>
</li>
<li>
<p><strong>è§£ç å™¨ä¸­çš„è‡ªæ³¨æ„åŠ› (Decoder Self-Attention)</strong></p>
<ul>
<li>è§£ç å™¨ä¸­çš„è‡ªæ³¨æ„åŠ›å±‚å·¥ä½œæ–¹å¼ä¸ç¼–ç å™¨ç±»ä¼¼ï¼Œä½†æœ‰ä¸€ä¸ªå…³é”®åŒºåˆ«ï¼šä¸ºäº†ä¿æŒå…¶è‡ªå›å½’ç‰¹æ€§ï¼Œå¿…é¡»é˜»æ­¢ä¿¡æ¯å‘å·¦æµåŠ¨ã€‚</li>
<li>è¿™æ˜¯é€šè¿‡åœ¨ç¼©æ”¾ç‚¹ç§¯æ³¨æ„åŠ›ä¸­å¼•å…¥æ©ç ï¼ˆmaskingï¼‰å®ç°çš„ã€‚å…·ä½“è€Œè¨€ï¼Œåœ¨è®¡ç®—softmaxä¹‹å‰ï¼Œå®ƒä¼šæŠŠæ‰€æœ‰å¯¹åº”äºéæ³•è¿æ¥ï¼ˆå³å…³æ³¨å½“å‰ä½ç½®ä¹‹åçš„ä½ç½®ï¼‰çš„å€¼è®¾ç½®ä¸ºè´Ÿæ— ç©·ï¼ˆ-âˆï¼‰ã€‚è¿™æ ·ä¸€æ¥ï¼Œè¿™äº›ä½ç½®åœ¨ç»è¿‡softmaxå‡½æ•°åï¼Œå…¶æƒé‡ä¼šå˜ä¸º0ï¼Œä»è€Œç¡®ä¿é¢„æµ‹æ—¶åªèƒ½ä¾èµ–äºå·²ç”Ÿæˆçš„è¾“å‡ºåºåˆ—ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-9">4. ä¸å¯æˆ–ç¼ºçš„è¾…åŠ©ç»„ä»¶</h3>
<p>è™½ç„¶æ³¨æ„åŠ›æ˜¯æ ¸å¿ƒï¼Œä½†Transformerçš„æˆåŠŸä¹Ÿç¦»ä¸å¼€ä¸€äº›å…³é”®çš„è¾…åŠ©ç»„ä»¶ã€‚</p>
<h4 data-id="heading-10">4.1 ä½ç½®ç¼–ç  (Positional Encoding)</h4>
<p>ç”±äºTransformeræ¨¡å‹å®Œå…¨æ‘’å¼ƒäº†å¾ªç¯å’Œå·ç§¯ï¼Œå®ƒæœ¬èº«æ— æ³•æ„ŸçŸ¥åºåˆ—ä¸­è¯è¯­çš„é¡ºåºã€‚ä¾‹å¦‚ï¼Œå¯¹äºæ¨¡å‹æ¥è¯´ï¼Œâ€œæˆ‘çˆ±ä½ â€å’Œâ€œä½ çˆ±æˆ‘â€åœ¨æ²¡æœ‰ä½ç½®ä¿¡æ¯çš„æƒ…å†µä¸‹æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ¨¡å‹å¿…é¡»å¼•å…¥ä¸€äº›å…³äºåºåˆ—é¡ºåºçš„ä¿¡æ¯ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆæ˜¯åœ¨ç¼–ç å™¨å’Œè§£ç å™¨å †æ ˆåº•éƒ¨çš„è¾“å…¥åµŒå…¥ï¼ˆinput embeddingsï¼‰ä¸­åŠ å…¥â€œä½ç½®ç¼–ç â€ã€‚è®ºæ–‡ä¸­ä½¿ç”¨äº†ä¸€ç§åŸºäºä¸åŒé¢‘ç‡çš„æ­£å¼¦ï¼ˆsineï¼‰å’Œä½™å¼¦ï¼ˆcosineï¼‰å‡½æ•°çš„å›ºå®šç¼–ç æ–¹æ³•ã€‚ä½œè€…é€‰æ‹©è¿™ç§å‡½æ•°çš„åŸå› æ˜¯ï¼Œä»–ä»¬å‡è®¾è¿™èƒ½è®©æ¨¡å‹æ›´å®¹æ˜“åœ°å­¦ä¹ é€šè¿‡ç›¸å¯¹ä½ç½®æ¥è¿›è¡Œå…³æ³¨ï¼Œå¹¶ä¸”è¿™ç§æ–¹æ³•å¯èƒ½è®©æ¨¡å‹èƒ½å¤Ÿæ¨å¹¿åˆ°æ¯”è®­ç»ƒæ—¶é‡åˆ°çš„åºåˆ—æ›´é•¿çš„åºåˆ—ã€‚</p>
<h4 data-id="heading-11">4.2 æŒ‰ä½ç½®çš„å‰é¦ˆç½‘ç»œ (Position-wise Feed-Forward Networks)</h4>
<p>åœ¨æ¯ä¸ªç¼–ç å™¨å’Œè§£ç å™¨å±‚ä¸­ï¼Œé™¤äº†æ³¨æ„åŠ›å­å±‚å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªå…¨è¿æ¥çš„å‰é¦ˆç½‘ç»œã€‚è¿™ä¸ªç½‘ç»œè¢«ç‹¬ç«‹ä¸”ç›¸åŒåœ°åº”ç”¨äºåºåˆ—ä¸­çš„æ¯ä¸€ä¸ªä½ç½®ã€‚</p>
<p>å®ƒç”±ä¸¤ä¸ªçº¿æ€§å˜æ¢å’Œä¸€ä¸ªReLUæ¿€æ´»å‡½æ•°ç»„æˆï¼Œå¯ä»¥ç”¨ä»¥ä¸‹å…¬å¼è¡¨ç¤ºï¼š</p>
<p><code>FFN(x) = max(0, xW1 + b1)W2 + b2</code></p>
<p>è¿™ä¸ªç»„ä»¶ä¸ºæ¨¡å‹å¢åŠ äº†éçº¿æ€§å˜æ¢èƒ½åŠ›ï¼Œè¿›ä¸€æ­¥å¢å¼ºäº†æ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›ã€‚åœ¨è®ºæ–‡çš„æ¨¡å‹ä¸­ï¼Œè¾“å…¥å’Œè¾“å‡ºçš„ç»´åº¦<code>d_model</code>æ˜¯512ï¼Œè€Œç½‘ç»œä¸­é—´å±‚çš„ç»´åº¦<code>d_ff</code>æ˜¯2048ã€‚è¿™æ„å‘³ç€å‰é¦ˆç½‘ç»œé¦–å…ˆå°†è¡¨ç¤ºä»512ç»´æ‰©å±•åˆ°2048ç»´ï¼Œç»è¿‡ReLUæ¿€æ´»åå†æŠ•å½±å›512ç»´ï¼Œä»è€Œå¢åŠ äº†æ¨¡å‹çš„è¡¨å¾å®¹é‡ã€‚</p>
<hr/>
<h3 data-id="heading-12">5. ä¸ºä»€ä¹ˆæ˜¯è‡ªæ³¨æ„åŠ›ï¼Ÿ</h3>
<p>ä¸å½“æ—¶ä¸»æµçš„å¾ªç¯å±‚ï¼ˆRecurrent Layerï¼‰ç›¸æ¯”ï¼Œè‡ªæ³¨æ„åŠ›æœºåˆ¶ç©¶ç«Ÿæœ‰ä½•ä¼˜åŠ¿ï¼Ÿè®ºæ–‡ä»ä¸‰ä¸ªæ–¹é¢è¿›è¡Œäº†æ¯”è¾ƒã€‚</p>

























<table><thead><tr><th>ç‰¹æ€§</th><th>è‡ªæ³¨æ„åŠ›å±‚ (Self-Attention)</th><th>å¾ªç¯å±‚ (Recurrent)</th></tr></thead><tbody><tr><td><strong>æ¯å±‚è®¡ç®—å¤æ‚åº¦</strong></td><td>O(nÂ² Â· d)</td><td>O(n Â· dÂ²)</td></tr><tr><td><strong>å¯å¹¶è¡Œè®¡ç®—é‡</strong></td><td>O(1)</td><td>O(n)</td></tr><tr><td><strong>é•¿è·ç¦»ä¾èµ–çš„å­¦ä¹ è·¯å¾„é•¿åº¦</strong></td><td>O(1)</td><td>O(n)</td></tr></tbody></table>
<ul>
<li><strong>è®¡ç®—å¤æ‚åº¦</strong>ï¼šå½“åºåˆ—é•¿åº¦<code>n</code>å°äºè¡¨ç¤ºç»´åº¦<code>d</code>æ—¶ï¼Œè‡ªæ³¨æ„åŠ›å±‚çš„è®¡ç®—é€Ÿåº¦æ¯”å¾ªç¯å±‚æ›´å¿«ã€‚è¿™åœ¨æœ€å…ˆè¿›çš„æœºå™¨ç¿»è¯‘æ¨¡å‹ä¸­æ˜¯éå¸¸å¸¸è§çš„æƒ…å†µã€‚</li>
<li><strong>å¹¶è¡Œåº¦</strong>ï¼šè‡ªæ³¨æ„åŠ›æœºåˆ¶çš„è®¡ç®—æ˜¯å¸¸æ•°çº§åˆ«çš„ï¼ˆO(1)ä¸ªé¡ºåºæ“ä½œï¼‰ï¼Œå› ä¸ºå®ƒä¸€æ¬¡æ€§è®¡ç®—æ‰€æœ‰ä½ç½®çš„æ³¨æ„åŠ›ï¼Œå¯ä»¥å¤§è§„æ¨¡å¹¶è¡Œã€‚è€Œå¾ªç¯å±‚éœ€è¦<code>O(n)</code>ä¸ªé¡ºåºæ“ä½œï¼Œå¿…é¡»æŒ‰æ—¶é—´æ­¥é€ä¸ªè®¡ç®—ï¼Œé™åˆ¶äº†å¹¶è¡Œèƒ½åŠ›ã€‚</li>
<li><strong>é•¿è·ç¦»ä¾èµ–</strong>ï¼šåœ¨è‡ªæ³¨æ„åŠ›ç½‘ç»œä¸­ï¼Œä»»æ„ä¸¤ä¸ªä½ç½®ä¹‹é—´çš„ä¿¡å·ä¼ æ’­è·¯å¾„é•¿åº¦éƒ½æ˜¯<code>O(1)</code>ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥ç›´æ¥äº¤äº’ã€‚è€Œåœ¨å¾ªç¯ç½‘ç»œä¸­ï¼Œä¿¡å·éœ€è¦ä»å¤´åˆ°å°¾ä¾æ¬¡ä¼ æ’­ï¼Œè·¯å¾„é•¿åº¦æ˜¯<code>O(n)</code>ã€‚è·¯å¾„è¶ŠçŸ­ï¼Œå­¦ä¹ é•¿è·ç¦»ä¾èµ–å…³ç³»å°±è¶Šå®¹æ˜“ï¼Œä¹Ÿæ›´èƒ½é¿å…RNNä¸­å¸¸è§çš„æ¢¯åº¦æ¶ˆå¤±æˆ–çˆ†ç‚¸é—®é¢˜ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-13">6. æˆæœä¸ç»“è®º</h3>
<p>Transformeræ¨¡å‹åœ¨ä¸¤ä¸ªä¸»æµçš„æœºå™¨ç¿»è¯‘ä»»åŠ¡ä¸Šå–å¾—äº†å“è¶Šçš„æˆæœã€‚åœ¨WMT 2014è‹±å¾·ç¿»è¯‘ä»»åŠ¡ä¸Šï¼Œå®ƒå–å¾—äº†28.4çš„BLEUåˆ†æ•°ï¼Œæ¯”ä¹‹å‰åŒ…æ‹¬é›†æˆæ¨¡å‹åœ¨å†…çš„æœ€ä½³ç»“æœé«˜å‡ºæ•´æ•´2.0åˆ†ã€‚åŒæ ·åœ°ï¼Œåœ¨WMT 2014è‹±æ³•ç¿»è¯‘ä»»åŠ¡ä¸Šï¼Œè¯¥æ¨¡å‹ä¹Ÿåˆ›é€ äº†æ–°çš„å•æ¨¡å‹SOTAè®°å½•ï¼ŒBLEUåˆ†æ•°è¾¾åˆ°äº†41.8ã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯å®ƒçš„è®­ç»ƒæ•ˆç‡ã€‚è®ºæ–‡æŒ‡å‡ºï¼ŒTransformerçš„è®­ç»ƒé€Ÿåº¦â€œæ˜æ˜¾æ›´å¿«â€ï¼ˆsignificantly fasterï¼‰ï¼Œå…¶è®­ç»ƒæˆæœ¬ä»…ä¸ºå…¶ä»–ç«äº‰æ¨¡å‹çš„ä¸€å°éƒ¨åˆ†ã€‚</p>
<p>æœ€åï¼Œè®ºæ–‡çš„æ ¸å¿ƒè´¡çŒ®å¯ä»¥æ€»ç»“ä¸ºï¼šæå‡ºäº†Transformerï¼Œè¿™æ˜¯ç¬¬ä¸€ä¸ªå®Œå…¨åŸºäºæ³¨æ„åŠ›æœºåˆ¶çš„åºåˆ—è½¬å¯¼æ¨¡å‹ã€‚å®ƒç”¨å¤šå¤´è‡ªæ³¨æ„åŠ›ï¼ˆmulti-headed self-attentionï¼‰å–ä»£äº†ç¼–ç å™¨-è§£ç å™¨æ¶æ„ä¸­æœ€å¸¸ç”¨çš„å¾ªç¯å±‚ï¼Œä¸ºåºåˆ—å»ºæ¨¡é¢†åŸŸå¼€è¾Ÿäº†ä¸€æ¡å…¨æ–°çš„ã€æ›´é«˜æ•ˆçš„é“è·¯ã€‚</p>
<hr/>
<p><strong>è®ºæ–‡ä¿¡æ¯</strong></p>
<ul>
<li><strong>è®ºæ–‡æ ‡é¢˜</strong>: Attention Is All You Need</li>
<li><strong>ä½œè€…</strong>: Ashish Vaswani, Noam Shazeer, Niki Parmar, et al.</li>
<li><strong>å‘è¡¨ä¼šè®®</strong>: NIPS 2017</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ„å»ºAIæ™ºèƒ½ä½“ï¼šå…­åå…­ã€æ™ºèƒ½çš„è¾¹ç•Œï¼šé€šè¿‡åå·®-æ–¹å·®ç†è®ºç†è§£å¤§æ¨¡å‹çš„èƒ½åŠ›ä¸å±€é™]]></title>    <link>https://juejin.cn/post/7588092534162440192</link>    <guid>https://juejin.cn/post/7588092534162440192</guid>    <pubDate>2025-12-28T02:43:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588092534162440192" data-draft-id="7588043318359654435" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ„å»ºAIæ™ºèƒ½ä½“ï¼šå…­åå…­ã€æ™ºèƒ½çš„è¾¹ç•Œï¼šé€šè¿‡åå·®-æ–¹å·®ç†è®ºç†è§£å¤§æ¨¡å‹çš„èƒ½åŠ›ä¸å±€é™"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,Python"/> <meta itemprop="datePublished" content="2025-12-28T02:43:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å½¼å²¸èŠ±å¼€äº†å—"/> <meta itemprop="url" content="https://juejin.cn/user/4153315734334538"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ„å»ºAIæ™ºèƒ½ä½“ï¼šå…­åå…­ã€æ™ºèƒ½çš„è¾¹ç•Œï¼šé€šè¿‡åå·®-æ–¹å·®ç†è®ºç†è§£å¤§æ¨¡å‹çš„èƒ½åŠ›ä¸å±€é™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4153315734334538/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å½¼å²¸èŠ±å¼€äº†å—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T02:43:55.000Z" title="Sun Dec 28 2025 02:43:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>æœ€è¿‘æˆ‘ä»¬åˆ†äº«æ¨¡å‹æ‹Ÿåˆå’Œæ—©åœæœºåˆ¶æ—¶ï¼Œéƒ½æ¶‰åŠåˆ°äº†â€œåå·®-æ–¹å·®æƒè¡¡â€çš„æ¦‚å¿µï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯åå·®ï¼Œä»€ä¹ˆåˆæ˜¯æ–¹å·®ï¼Œéšå«äº†å“ªäº›æ–°å¥‡å·§å¦™çš„çŸ¥è¯†ç‚¹ï¼Œä»Šå¤©æˆ‘ä»¬æ¥ä¸€æ¢ç©¶ç«Ÿã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æ‰¾ä¸€ä¸ªé€šä¿—çš„ä¾‹å­ï¼Œåˆæ­¥ç†è§£åå·®å’Œæ–¹å·®è¡¨è¾¾çš„åŸºç¡€æ¦‚å¿µï¼Œæƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œæˆ‘ä»¬ç­çº§é‡Œæœ‰ä¸‰ç§ç±»å‹çš„å­¦ç”Ÿï¼š</p>
<ul>
<li>Aç±»å­¦ç”Ÿï¼šæ­»è®°ç¡¬èƒŒè¯¾æœ¬å†…å®¹ï¼Œé‡åˆ°åŸé¢˜èƒ½å¾—é«˜åˆ†ï¼Œä½†é¢˜ç›®ç¨ä½œå˜åŒ–å°±ä¸çŸ¥æ‰€æª</li>
<li>Bç±»å­¦ç”Ÿï¼šç†è§£çŸ¥è¯†æœ¬è´¨ï¼Œèƒ½å¤Ÿä¸¾ä¸€åä¸‰ï¼Œåœ¨å„ç§é¢˜å‹ä¸­éƒ½èƒ½ç¨³å®šå‘æŒ¥</li>
<li>Cç±»å­¦ç”Ÿï¼šæ€ç»´è·³è·ƒï¼Œæœ‰æ—¶èƒ½ç»™å‡ºæƒŠè‰³çš„ç­”æ¡ˆï¼Œä½†ç»å¸¸åç¦»æ­£è½¨ï¼Œè¡¨ç°æä¸ç¨³å®š</li>
</ul>
<p>è¿™ä¸‰ç±»å­¦ä¹ å¯¹åº”çš„ä¸‰ç§å­¦ä¹ æ¨¡å¼ï¼Œæ°å¥½å¯¹åº”äº†æœºå™¨å­¦ä¹ ä¸­çš„é«˜åå·®ã€å¹³è¡¡çŠ¶æ€ã€é«˜æ–¹å·®ä¸‰ç§æƒ…å†µã€‚å§‘ä¸”å…ˆæ‘¸ç´¢ç€æœ‰ä¸ªåˆæ­¥çš„ç†è§£ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¯¦ç»†çš„å»æ¢è®¨æ¯ç±»å­¦ç”Ÿå¯¹åº”çš„åå·®-æ–¹å·®åŸç†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/abf8b1b7530c453a985042e821c96869~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767494753&amp;x-signature=bYN%2Fc7uRZJPCyFXqDMXaZaWafRY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">äºŒã€åŸºç¡€æ¦‚å¿µ</h2>
<h3 data-id="heading-2">1. åå·®ï¼ˆBiasï¼‰</h3>
<p>åå·®è¡¡é‡çš„æ˜¯æ¨¡å‹é¢„æµ‹å€¼çš„å¹³å‡å€¼ä¸çœŸå®å€¼ä¹‹é—´çš„å·®å¼‚ï¼Œå®ƒåæ˜ äº†æ¨¡å‹å¯¹æ•°æ®åŸºæœ¬æ¨¡å¼çš„æ•æ‰èƒ½åŠ›ã€‚</p>
<p>**ç®€å•ç†è§£ï¼š**åå·®å°±åƒå°„å‡»æ—¶çš„ç„å‡†è¯¯å·®ã€‚å¦‚æœä½ æ€»æ˜¯å°„å‘é¶å¿ƒçš„å·¦è¾¹ï¼Œé‚£ä¹ˆä½ çš„ç„å‡†ç³»ç»Ÿå°±æœ‰ç³»ç»Ÿæ€§åå·®ã€‚</p>
<p>**é€šä¿—ç†è§£ï¼š**å¥½æ¯”å­¦ç”Ÿçš„å­¦ä¹ æ–¹æ³•ï¼Œå¦‚æœå­¦ç”Ÿåªä¼šæ­»è®°ç¡¬èƒŒï¼Œé‚£ä¹ˆæ— è®ºç»™ä»–å¤šå°‘å­¦ä¹ èµ„æ–™ï¼Œä»–éƒ½æ— æ³•çœŸæ­£ç†è§£çŸ¥è¯†æœ¬è´¨ï¼Œæ€»æ˜¯ç»™å‡ºè¡¨é¢åŒ–çš„ç­”æ¡ˆï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´é«˜åå·®ï¼Œä¸»è¦ä½“ç°ç³»ç»Ÿæ€§è¯¯å·®ã€‚</p>
<p><strong>é«˜åå·®çš„ç‰¹å¾ï¼š</strong></p>
<ul>
<li>æ¨¡å‹è¿‡äºç®€å•</li>
<li>æ— æ³•æ•æ‰æ•°æ®çš„å¤æ‚æ¨¡å¼ï¼Œè¡¨ç°ä¸ºæ¬ æ‹Ÿåˆ</li>
<li>è®­ç»ƒè¯¯å·®å’Œæµ‹è¯•è¯¯å·®éƒ½å¾ˆé«˜</li>
</ul>
<p>**æŠ€æœ¯å®šä¹‰ï¼š**æ¨¡å‹é¢„æµ‹çš„å¹³å‡å€¼ä¸çœŸå®å€¼ä¹‹é—´çš„å·®å¼‚ï¼Œåæ˜ äº†æ¨¡å‹å¯¹æ•°æ®åŸºæœ¬æ¨¡å¼çš„æ•æ‰èƒ½åŠ›ã€‚</p>
<p><strong>å¤§æ¨¡å‹ä¸­çš„è¡¨ç°ï¼š</strong></p>
<ul>
<li>é«˜åå·®æ¨¡å‹ï¼šåªèƒ½ç”Ÿæˆè®­ç»ƒæ•°æ®ä¸­å¸¸è§çš„æ¨¡å¼åŒ–å›ç­”</li>
<li>ä½åå·®æ¨¡å‹ï¼šèƒ½å¤Ÿç†è§£é—®é¢˜æœ¬è´¨ï¼Œç»™å‡ºæœ‰æ·±åº¦çš„è§è§£</li>
</ul>
<h3 data-id="heading-3">2. æ–¹å·®ï¼ˆVarianceï¼‰</h3>
<p>æ–¹å·®è¡¡é‡çš„æ˜¯æ¨¡å‹é¢„æµ‹å€¼çš„æ³¢åŠ¨ç¨‹åº¦ï¼Œå®ƒåæ˜ äº†æ¨¡å‹å¯¹è®­ç»ƒæ•°æ®å¾®å°å˜åŒ–çš„æ•æ„Ÿæ€§ã€‚</p>
<p>**ç®€å•ç†è§£ï¼š**æ–¹å·®å°±åƒå°„å‡»æ—¶çš„æ‰‹éƒ¨ç¨³å®šæ€§ï¼Œå³ä½¿ä½ ç„å‡†æ­£ç¡®ï¼Œä½†æ¯æ¬¡å°„å‡»çš„ä½ç½®éƒ½å¾ˆåˆ†æ•£ï¼Œè¯´æ˜ä½ çš„ç¨³å®šæ€§å·®ï¼ˆæ–¹å·®å¤§ï¼‰ã€‚</p>
<p>**é€šä¿—ç†è§£ï¼š**å¥½æ¯”å­¦ç”Ÿçš„å‘æŒ¥ç¨³å®šæ€§ï¼Œå¦‚æœå­¦ç”Ÿæ€ç»´è¿‡äºå‘æ•£ï¼Œå¯èƒ½å¶å°”ç»™å‡ºå¤©æ‰èˆ¬çš„ç­”æ¡ˆï¼Œä½†ä¹Ÿç»å¸¸ç»™å‡ºå®Œå…¨ç¦»è°±çš„å›ç­”ï¼Œè¿™æ ·ä¼šå¯¼è‡´é«˜æ–¹å·®ï¼Œä¸»è¦ä½“ç°ä¸ç¨³å®šæ€§ã€‚</p>
<p><strong>é«˜æ–¹å·®çš„ç‰¹å¾ï¼š</strong></p>
<ul>
<li>æ¨¡å‹è¿‡äºå¤æ‚</li>
<li>è¿‡åº¦æ‹Ÿåˆè®­ç»ƒæ•°æ®ä¸­çš„å™ªå£°ï¼Œè¡¨ç°ä¸ºè¿‡æ‹Ÿåˆ</li>
<li>è®­ç»ƒè¯¯å·®ä½ä½†æµ‹è¯•è¯¯å·®é«˜</li>
</ul>
<p>**æŠ€æœ¯å®šä¹‰ï¼š**æ¨¡å‹é¢„æµ‹å€¼çš„æ³¢åŠ¨ç¨‹åº¦ï¼Œåæ˜ äº†æ¨¡å‹å¯¹è®­ç»ƒæ•°æ®å˜åŒ–çš„æ•æ„Ÿæ€§ã€‚</p>
<p><strong>å¤§æ¨¡å‹ä¸­çš„è¡¨ç°ï¼š</strong></p>
<ul>
<li>é«˜æ–¹å·®æ¨¡å‹ï¼šç›¸åŒé—®é¢˜å¯èƒ½å¾—åˆ°å®Œå…¨ä¸åŒçš„ç­”æ¡ˆï¼Œè¡¨ç°ä¸ç¨³å®š</li>
<li>ä½æ–¹å·®æ¨¡å‹ï¼šå¯¹ç›¸ä¼¼é—®é¢˜ç»™å‡ºä¸€è‡´çš„å›ç­”ï¼Œè¡¨ç°å¯é </li>
</ul>
<h3 data-id="heading-4">3. å™ªå£°ï¼ˆNoiseï¼‰</h3>
<p>å™ªå£°æ˜¯æ•°æ®ä¸­å›ºæœ‰çš„éšæœºè¯¯å·®ï¼Œæ— æ³•é€šè¿‡ä»»ä½•æ¨¡å‹å‡å°‘ï¼Œå®ƒä»£è¡¨äº†æ•°æ®çš„ä¸å¯çº¦ç®€çš„ä¸ç¡®å®šæ€§ã€‚</p>
<p>**ç®€å•ç†è§£ï¼š**å™ªå£°å°±åƒå°„å‡»æ—¶çªç„¶åˆ®é£æˆ–è€…é¶å­è½»å¾®ç§»åŠ¨ï¼Œè¿™äº›æ˜¯ä½ æ— æ³•æ§åˆ¶çš„å¤–éƒ¨å› ç´ ã€‚</p>
<p>**é€šä¿—ç†è§£ï¼š**å°±åƒé¶å­æœ¬èº«åœ¨ç§»åŠ¨æˆ–æœ‰é£å½±å“ï¼Œå³ä½¿ä½ ç„å‡†æ­£ç¡®ï¼Œå­å¼¹ä¹Ÿå¯èƒ½åç¦»ï¼Œè¿™ä»£è¡¨æ•°æ®ä¸­çš„éšæœºè¯¯å·®ï¼Œæ— æ³•æ§åˆ¶ã€‚</p>
<h2 data-id="heading-5">ä¸‰ã€åå·®-æ–¹å·®åˆ†è§£çš„æ•°å­¦åŸç†</h2>
<h3 data-id="heading-6">1. æ ¸å¿ƒå…¬å¼</h3>
<p>å¯¹äºå›å½’é—®é¢˜ï¼ŒæœŸæœ›é¢„æµ‹è¯¯å·®å¯ä»¥åˆ†è§£ä¸ºï¼š</p>
<p><strong>æ€»è¯¯å·® = åå·®Â² + æ–¹å·® + å™ªå£°</strong></p>
<p>æ•°å­¦è¡¨è¾¾å¼ï¼š</p>
<p><strong>E[(y - Å·)Â²] = [Bias(Å·)]Â² + Var(Å·) + ÏƒÂ²</strong></p>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li>y æ˜¯çœŸå®å€¼</li>
<li>Å· æ˜¯æ¨¡å‹é¢„æµ‹å€¼</li>
<li>ÏƒÂ² æ˜¯å™ªå£°æ–¹å·®</li>
</ul>
<p>å…¬å¼å«ä¹‰è¯¦è§£ï¼š</p>
<ul>
<li>åå·®Â² (BiasÂ²)ï¼š<strong>Bias(Å·) = E[Å·] - y</strong> æ¨¡å‹é¢„æµ‹çš„å¹³å‡å€¼ä¸çœŸå®å€¼çš„å·®å¼‚</li>
<li>æ–¹å·® (Variance)ï¼š<strong>Var(Å·) = E[(Å· - E[Å·])Â²]</strong> æ¨¡å‹é¢„æµ‹å€¼çš„æ³¢åŠ¨ç¨‹åº¦</li>
<li>å™ªå£° (Noise)ï¼š<strong>ÏƒÂ² = E[(y - f(x))Â²]</strong> æ•°æ®ä¸­å›ºæœ‰çš„éšæœºè¯¯å·®</li>
</ul>
<h3 data-id="heading-7">2. å®ä¾‹åŠ©è§£</h3>
<p><strong>2.1 å°„å‡»ç±»æ¯”ï¼Œæƒ³è±¡ä½ åœ¨å­¦ä¹ å°„å‡»ï¼š</strong></p>
<ul>
<li>ä½åå·® + ä½æ–¹å·®ï¼šç¥æªæ‰‹
<ul>
<li>ç„å‡†å‡†ç¡®ï¼ˆä½åå·®ï¼‰</li>
<li>æ‰‹å¾ˆç¨³ï¼ˆä½æ–¹å·®ï¼‰</li>
<li>å¼¹ç€ç‚¹é›†ä¸­åœ¨é¶å¿ƒ</li>
</ul>
</li>
<li>é«˜åå·® + ä½æ–¹å·®ï¼šç³»ç»Ÿæ€§è¯¯å·®
<ul>
<li>ç„å‡†åå·¦ï¼ˆé«˜åå·®ï¼‰</li>
<li>æ‰‹å¾ˆç¨³ï¼ˆä½æ–¹å·®ï¼‰</li>
<li>å¼¹ç€ç‚¹é›†ä¸­åœ¨é¶å¿ƒå·¦ä¾§</li>
</ul>
</li>
<li>ä½åå·® + é«˜æ–¹å·®ï¼šä¸ç¨³å®šå°„æ‰‹
<ul>
<li>ç„å‡†å‡†ç¡®ï¼ˆä½åå·®ï¼‰</li>
<li>æ‰‹ä¸ç¨³ï¼ˆé«˜æ–¹å·®ï¼‰</li>
<li>å¼¹ç€ç‚¹åˆ†æ•£åœ¨é¶å¿ƒå‘¨å›´</li>
</ul>
</li>
<li>é«˜åå·® + é«˜æ–¹å·®ï¼šæ–°æ‰‹
<ul>
<li>ç„å‡†ä¸å‡†ï¼ˆé«˜åå·®ï¼‰</li>
<li>æ‰‹ä¸ç¨³ï¼ˆé«˜æ–¹å·®ï¼‰</li>
<li>å¼¹ç€ç‚¹åˆ†æ•£ä¸”åç¦»é¶å¿ƒ</li>
</ul>
</li>
</ul>
<p><strong>2.2 å­¦ä¹ è€ƒè¯•ç±»æ¯”ï¼Œæƒ³è±¡å­¦ç”Ÿåœ¨å‡†å¤‡è€ƒè¯•ï¼š</strong></p>
<ul>
<li>ä½åå·® + ä½æ–¹å·®ï¼šå­¦éœ¸
<ul>
<li>çœŸæ­£ç†è§£çŸ¥è¯†ï¼ˆä½åå·®ï¼‰</li>
<li>å‘æŒ¥ç¨³å®šï¼ˆä½æ–¹å·®ï¼‰</li>
<li>æ¯æ¬¡è€ƒè¯•éƒ½é«˜åˆ†</li>
</ul>
</li>
<li>é«˜åå·® + ä½æ–¹å·®ï¼šæ­»è®°ç¡¬èƒŒå‹
<ul>
<li>æ²¡æœ‰çœŸæ­£ç†è§£ï¼ˆé«˜åå·®ï¼‰</li>
<li>å‘æŒ¥ç¨³å®šï¼ˆä½æ–¹å·®ï¼‰</li>
<li>æˆç»©ç¨³å®šä½†ä¸é«˜</li>
</ul>
</li>
<li>ä½åå·® + é«˜æ–¹å·®ï¼šèªæ˜ä½†ä¸ç¨³å®š
<ul>
<li>ç†è§£çŸ¥è¯†ï¼ˆä½åå·®ï¼‰</li>
<li>å‘æŒ¥ä¸ç¨³å®šï¼ˆé«˜æ–¹å·®ï¼‰</li>
<li>æœ‰æ—¶é«˜åˆ†æœ‰æ—¶ä½åˆ†</li>
</ul>
</li>
<li>é«˜åå·® + é«˜æ–¹å·®ï¼šå­¦å›°ç”Ÿ
<ul>
<li>ä¸ç†è§£çŸ¥è¯†ï¼ˆé«˜åå·®ï¼‰</li>
<li>å‘æŒ¥ä¸ç¨³å®šï¼ˆé«˜æ–¹å·®ï¼‰</li>
<li>æˆç»©å·®ä¸”æ³¢åŠ¨å¤§</li>
</ul>
</li>
</ul>
<h2 data-id="heading-8">å››ã€å¤§æ¨¡å‹ä¸­çš„ç†è§£å·®å¼‚</h2>
<h3 data-id="heading-9">1. æ•°å­¦è§£é¢˜ä¸­çš„åå·®-æ–¹å·®ç°è±¡</h3>
<p>å¤§æ¨¡å‹åœ¨æ•°å­¦é—®é¢˜ä¸Šä¼šå‡ºç°çš„è¡¨ç°ï¼š</p>
<p><strong>1.1 é«˜åå·®è¡¨ç°ï¼ˆæ­»è®°ç¡¬èƒŒï¼‰ï¼š</strong></p>
<blockquote>
<p>ç”¨æˆ·ï¼šä¸€ä¸ªé•¿æ–¹å½¢çš„é•¿æ˜¯8cmï¼Œå®½æ˜¯5cmï¼Œé¢ç§¯æ˜¯å¤šå°‘ï¼Ÿ<br/>
æ¨¡å‹ï¼šé•¿æ–¹å½¢çš„é¢ç§¯æ˜¯é•¿ä¹˜ä»¥å®½ï¼Œæ‰€ä»¥æ˜¯40å¹³æ–¹å˜ç±³ã€‚</p>
<p>ç”¨æˆ·ï¼šä¸€ä¸ªå¹³è¡Œå››è¾¹å½¢çš„åº•æ˜¯8cmï¼Œé«˜æ˜¯5cmï¼Œé¢ç§¯æ˜¯å¤šå°‘ï¼Ÿ<br/>
æ¨¡å‹ï¼šé•¿æ–¹å½¢çš„é¢ç§¯æ˜¯é•¿ä¹˜ä»¥å®½ï¼Œæ‰€ä»¥æ˜¯40å¹³æ–¹å˜ç±³ã€‚</p>
</blockquote>
<p>æ¨¡å‹æœºæ¢°åœ°å¥—ç”¨"é•¿æ–¹å½¢é¢ç§¯å…¬å¼"ï¼Œæ²¡æœ‰ç†è§£é¢ç§¯è®¡ç®—çš„æœ¬è´¨åŸç†ã€‚</p>
<p><strong>1.2 é«˜æ–¹å·®è¡¨ç°ï¼ˆè¿‡åº¦å‘æ•£ï¼‰ï¼š</strong></p>
<blockquote>
<p>ç”¨æˆ·ï¼šä¸€ä¸ªé•¿æ–¹å½¢çš„é•¿æ˜¯8cmï¼Œå®½æ˜¯5cmï¼Œé¢ç§¯æ˜¯å¤šå°‘ï¼Ÿ<br/>
æ¨¡å‹ï¼šå¯èƒ½æ˜¯40å¹³æ–¹å˜ç±³ï¼Œæˆ–è€…éœ€è¦è€ƒè™‘å•ä½æ¢ç®—ï¼Ÿä¹Ÿè®¸æ˜¯800å¹³æ–¹æ¯«ç±³ï¼Ÿ<br/>
ä¹Ÿå¯èƒ½æ˜¯å‘¨é•¿ï¼Ÿè®©æˆ‘æƒ³æƒ³ï¼Œå‘¨é•¿æ˜¯(8+5)Ã—2=26cm...</p>
</blockquote>
<p>æ¨¡å‹è¿‡åº¦æ€è€ƒï¼Œå¼•å…¥äº†ä¸å¿…è¦çš„å¤æ‚æ€§ï¼Œå¯¼è‡´ç­”æ¡ˆä¸ç¨³å®šã€‚</p>
<p><strong>1.3 å¹³è¡¡çŠ¶æ€ï¼ˆçœŸæ­£ç†è§£ï¼‰ï¼š</strong></p>
<blockquote>
<p>ç”¨æˆ·ï¼šä¸€ä¸ªé•¿æ–¹å½¢çš„é•¿æ˜¯8cmï¼Œå®½æ˜¯5cmï¼Œé¢ç§¯æ˜¯å¤šå°‘ï¼Ÿ<br/>
æ¨¡å‹ï¼šé¢ç§¯=é•¿Ã—å®½=8Ã—5=40å¹³æ–¹å˜ç±³ã€‚</p>
<p>ç”¨æˆ·ï¼šä¸€ä¸ªå¹³è¡Œå››è¾¹å½¢çš„åº•æ˜¯8cmï¼Œé«˜æ˜¯5cmï¼Œé¢ç§¯æ˜¯å¤šå°‘ï¼Ÿ<br/>
æ¨¡å‹ï¼šå¹³è¡Œå››è¾¹å½¢é¢ç§¯=åº•Ã—é«˜=8Ã—5=40å¹³æ–¹å˜ç±³ã€‚</p>
</blockquote>
<p>æ¨¡å‹ç†è§£äº†ä¸åŒå›¾å½¢é¢ç§¯è®¡ç®—çš„æœ¬è´¨åŸç†ï¼Œèƒ½å¤Ÿæ­£ç¡®åº”ç”¨ç›¸åº”å…¬å¼ã€‚</p>
<h3 data-id="heading-10">2. è¯­è¨€ç†è§£ä¸­çš„å±‚æ¬¡å·®å¼‚</h3>
<p><strong>2.1 é«˜åå·®ç†è§£ï¼ˆè¡¨é¢ç†è§£ï¼‰ï¼š</strong></p>
<blockquote>
<p>æ–‡æœ¬ï¼š"ä»–å¿ƒå¦‚åˆ€å‰²"<br/>
æ¨¡å‹ç†è§£ï¼šä»–å¿ƒè„è¢«åˆ€å­åˆ‡å‰²ï¼ˆå­—é¢æ„æ€ï¼‰</p>
</blockquote>
<p><strong>2.2 é«˜æ–¹å·®ç†è§£ï¼ˆè¿‡åº¦è§£è¯»ï¼‰ï¼š</strong></p>
<blockquote>
<p>æ–‡æœ¬ï¼š"ä»–å¿ƒå¦‚åˆ€å‰²"<br/>
æ¨¡å‹ç†è§£ï¼šå¯èƒ½è¡¨ç¤ºä»–ç»å†äº†å¿ƒè„æ‰‹æœ¯ï¼Œæˆ–è€…æ˜¯æŸç§å®—æ•™ä»ªå¼ï¼Œæˆ–è€…æ˜¯...</p>
</blockquote>
<p><strong>2.3 å¹³è¡¡ç†è§£ï¼ˆçœŸæ­£ç†è§£ï¼‰ï¼š</strong></p>
<blockquote>
<p>æ–‡æœ¬ï¼š"ä»–å¿ƒå¦‚åˆ€å‰²"<br/>
æ¨¡å‹ç†è§£ï¼šæ¯”å–»æåº¦ç—›è‹¦çš„å¿ƒæƒ…ï¼ˆæ­£ç¡®ç†è§£æ¯”å–»æ„ä¹‰ï¼‰</p>
</blockquote>
<h2 data-id="heading-11">äº”ã€åå·®-æ–¹å·®åˆ†è§£ç¤ºä¾‹</h2>
<p>æˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªå…·ä½“çš„å¤šé¡¹å¼å›å½’ä¾‹å­æ¥é€æ­¥åˆ†è§£åå·®-æ–¹å·®ï¼Œå¹¶è¯¦ç»†è¯´æ˜æ¯ä¸€æ­¥ã€‚æˆ‘ä»¬å°†ä½¿ç”¨å¤šä¸ªè®­ç»ƒé›†ï¼Œæ¯ä¸ªè®­ç»ƒé›†æ¥è‡ªåŒä¸€ä¸ªçœŸå®å‡½æ•°åŠ ä¸Šå™ªå£°ï¼Œç„¶åè®­ç»ƒä¸åŒå¤æ‚åº¦çš„æ¨¡å‹ï¼Œå¹¶è®¡ç®—åå·®ã€æ–¹å·®å’Œæ€»è¯¯å·®ã€‚</p>
<p><strong>ç¤ºä¾‹æ­¥éª¤ï¼š</strong></p>
<ul>
<li>1. å®šä¹‰çœŸå®å‡½æ•°ï¼ˆä¾‹å¦‚æ­£å¼¦å‡½æ•°ï¼‰å¹¶ç”Ÿæˆå¤šä¸ªè®­ç»ƒæ•°æ®é›†ï¼ˆæ¯ä¸ªæ•°æ®é›†åŠ ä¸Šéšæœºå™ªå£°ï¼‰ã€‚</li>
<li>2. é€‰æ‹©ä¸åŒå¤æ‚åº¦çš„æ¨¡å‹ï¼ˆä¾‹å¦‚ä¸åŒæ¬¡æ•°çš„å¤šé¡¹å¼ï¼‰ã€‚</li>
<li>3. å¯¹æ¯ä¸ªæ¨¡å‹ï¼Œåœ¨å¤šä¸ªæ•°æ®é›†ä¸Šè®­ç»ƒï¼Œå¹¶è®¡ç®—åœ¨æµ‹è¯•é›†ä¸Šçš„é¢„æµ‹ã€‚</li>
<li>4. å¯¹æ¯ä¸ªæµ‹è¯•ç‚¹ï¼Œè®¡ç®—åå·®ã€æ–¹å·®å’Œæ€»è¯¯å·®ã€‚</li>
<li>5. ç»˜åˆ¶å¤šä¸ªå›¾è¡¨æ¥å±•ç¤ºåå·®-æ–¹å·®åˆ†è§£ã€‚</li>
</ul>
<p>æˆ‘ä»¬å°†ä½¿ç”¨ä»¥ä¸‹å…¬å¼ï¼ˆå¯¹äºå›å½’é—®é¢˜çš„å‡æ–¹è¯¯å·®ï¼‰ï¼šæ€»è¯¯å·® = åå·®^2 + æ–¹å·® + å™ªå£°</p>
<p>æ³¨æ„ï¼šæˆ‘ä»¬å‡è®¾å™ªå£°æ˜¯å·²çŸ¥çš„ï¼ˆå› ä¸ºæˆ‘ä»¬ç”Ÿæˆçš„æ•°æ®ï¼Œæˆ‘ä»¬çŸ¥é“å™ªå£°çš„æ–¹å·®ï¼‰ã€‚</p>
<h3 data-id="heading-12">ç¬¬ä¸€æ­¥ï¼šæ•°æ®ç”Ÿæˆå’ŒçœŸå®å‡½æ•°å¯è§†åŒ–</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> PolynomialFeatures
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LinearRegression, Ridge
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> mean_squared_error
<span class="hljs-keyword">from</span> sklearn.pipeline <span class="hljs-keyword">import</span> Pipeline
<span class="hljs-keyword">import</span> seaborn <span class="hljs-keyword">as</span> sns
sns.set_style(<span class="hljs-string">"whitegrid"</span>)
<span class="hljs-comment"># è®¾ç½®ä¸­æ–‡å­—ä½“å’Œæ ·å¼</span>
plt.rcParams[<span class="hljs-string">'font.sans-serif'</span>] = [<span class="hljs-string">'SimHei'</span>]
plt.rcParams[<span class="hljs-string">'axes.unicode_minus'</span>] = <span class="hljs-literal">False</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">70</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ­¥éª¤1: æ•°æ®ç”Ÿæˆå’ŒçœŸå®å‡½æ•°å¯è§†åŒ–"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">70</span>)

<span class="hljs-comment"># å®šä¹‰çœŸå®å‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">true_function</span>(<span class="hljs-params">x</span>):
    <span class="hljs-string">"""çœŸå®çš„ç›®æ ‡å‡½æ•° - ä¸€ä¸ªå¤æ‚çš„éçº¿æ€§å‡½æ•°"""</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">2</span> * np.sin(<span class="hljs-number">1.5</span> * np.pi * x) + <span class="hljs-number">0.5</span> * np.cos(<span class="hljs-number">4</span> * np.pi * x)

<span class="hljs-comment"># ç”Ÿæˆæ•°æ®å‚æ•°</span>
np.random.seed(<span class="hljs-number">42</span>)
n_samples = <span class="hljs-number">50</span>
n_datasets = <span class="hljs-number">100</span>
noise_std = <span class="hljs-number">0.3</span>

<span class="hljs-comment"># ç”Ÿæˆæµ‹è¯•ç‚¹</span>
x_test = np.linspace(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">200</span>)
y_test_true = true_function(x_test)

<span class="hljs-comment"># ç”Ÿæˆä¸€ä¸ªç¤ºä¾‹è®­ç»ƒé›†</span>
x_sample = np.random.uniform(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, n_samples)
y_sample = true_function(x_sample) + np.random.normal(<span class="hljs-number">0</span>, noise_std, n_samples)

<span class="hljs-comment"># å¯è§†åŒ–çœŸå®å‡½æ•°å’Œç¤ºä¾‹æ•°æ®</span>
plt.figure(figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">6</span>))
plt.plot(x_test, y_test_true, <span class="hljs-string">'k-'</span>, linewidth=<span class="hljs-number">3</span>, label=<span class="hljs-string">'çœŸå®å‡½æ•°'</span>)
plt.scatter(x_sample, y_sample, s=<span class="hljs-number">50</span>, alpha=<span class="hljs-number">0.7</span>, color=<span class="hljs-string">'red'</span>, label=<span class="hljs-string">'å¸¦å™ªå£°çš„è®­ç»ƒæ•°æ®'</span>)
plt.xlabel(<span class="hljs-string">'x'</span>)
plt.ylabel(<span class="hljs-string">'y'</span>)
plt.title(<span class="hljs-string">'æ­¥éª¤1: çœŸå®å‡½æ•°å’Œè®­ç»ƒæ•°æ®ç¤ºä¾‹'</span>, fontsize=<span class="hljs-number">14</span>, fontweight=<span class="hljs-string">'bold'</span>)
plt.legend()
plt.grid(<span class="hljs-literal">True</span>, alpha=<span class="hljs-number">0.3</span>)
plt.tight_layout()
plt.show()

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"çœŸå®å‡½æ•°: f(x) = 2*sin(1.5Ï€x) + 0.5*cos(4Ï€x)"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ¯ä¸ªè®­ç»ƒé›†æ ·æœ¬æ•°: <span class="hljs-subst">{n_samples}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å™ªå£°æ ‡å‡†å·®: <span class="hljs-subst">{noise_std}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¤ºä¾‹è®­ç»ƒé›†å·²ç”Ÿæˆï¼ŒåŒ…å« <span class="hljs-subst">{<span class="hljs-built_in">len</span>(x_sample)}</span> ä¸ªæ•°æ®ç‚¹"</span>)
</code></pre>
<p><strong>æ­¥éª¤1åˆ†æï¼š</strong></p>
<ul>
<li>æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå¤æ‚çš„çœŸå®å‡½æ•°ï¼ŒåŒ…å«æ­£å¼¦å’Œä½™å¼¦æˆåˆ†</li>
<li>ç”Ÿæˆäº†å¸¦å™ªå£°çš„è®­ç»ƒæ•°æ®ï¼Œæ¨¡æ‹Ÿç°å®ä¸–ç•Œä¸­çš„æ•°æ®æ”¶é›†è¿‡ç¨‹</li>
<li>å™ªå£°æ ‡å‡†å·®ä¸º0.3ï¼Œè¡¨ç¤ºæ•°æ®ä¸­å­˜åœ¨ä¸­ç­‰ç¨‹åº¦çš„éšæœºè¯¯å·®</li>
<li>è¿™å¼ å›¾å±•ç¤ºäº†æˆ‘ä»¬è¦å­¦ä¹ çš„ç›®æ ‡å‡½æ•°å’Œå…¸å‹è®­ç»ƒæ•°æ®çš„åˆ†å¸ƒ</li>
</ul>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<blockquote>
<p>æ­¥éª¤1: æ•°æ®ç”Ÿæˆå’ŒçœŸå®å‡½æ•°å¯è§†åŒ–<br/>
--------------------------------------------------<br/>
çœŸå®å‡½æ•°: f(x) = 2*sin(1.5Ï€x) + 0.5*cos(4Ï€x)<br/>
æ¯ä¸ªè®­ç»ƒé›†æ ·æœ¬æ•°: 50<br/>
å™ªå£°æ ‡å‡†å·®: 0.3<br/>
ç¤ºä¾‹è®­ç»ƒé›†å·²ç”Ÿæˆï¼ŒåŒ…å« 50 ä¸ªæ•°æ®ç‚¹</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2134b2f26cd4351b1aa938c11c24e9c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767494753&amp;x-signature=WWH9xelPMy7QTbiJ9NDuICtGBtc%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-13">ç¬¬äºŒæ­¥ï¼šå®šä¹‰ä¸åŒå¤æ‚åº¦çš„æ¨¡å‹</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">print</span>("\n" + "=" * <span class="hljs-number">70</span>)
<span class="hljs-built_in">print</span>("æ­¥éª¤<span class="hljs-number">2</span>: å®šä¹‰ä¸åŒå¤æ‚åº¦çš„æ¨¡å‹")
<span class="hljs-built_in">print</span>("=" * <span class="hljs-number">70</span>)

# å®šä¹‰ä¸åŒå¤æ‚åº¦çš„æ¨¡å‹
models = {
    'çº¿æ€§æ¨¡å‹ (é«˜åå·®)': <span class="hljs-built_in">Pipeline</span>([
        (<span class="hljs-string">'poly'</span>, <span class="hljs-built_in">PolynomialFeatures</span>(degree=<span class="hljs-number">1</span>)),
        (<span class="hljs-string">'linear'</span>, <span class="hljs-built_in">LinearRegression</span>())
    ]),
    <span class="hljs-string">'4æ¬¡å¤šé¡¹å¼ (å¹³è¡¡)'</span>: <span class="hljs-built_in">Pipeline</span>([
        (<span class="hljs-string">'poly'</span>, <span class="hljs-built_in">PolynomialFeatures</span>(degree=<span class="hljs-number">4</span>)),
        (<span class="hljs-string">'linear'</span>, <span class="hljs-built_in">LinearRegression</span>())
    ]),
    <span class="hljs-string">'15æ¬¡å¤šé¡¹å¼ (é«˜æ–¹å·®)'</span>: <span class="hljs-built_in">Pipeline</span>([
        (<span class="hljs-string">'poly'</span>, <span class="hljs-built_in">PolynomialFeatures</span>(degree=<span class="hljs-number">15</span>)),
        (<span class="hljs-string">'linear'</span>, <span class="hljs-built_in">LinearRegression</span>())
    ]),
    <span class="hljs-string">'å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼'</span>: <span class="hljs-built_in">Pipeline</span>([
        (<span class="hljs-string">'poly'</span>, <span class="hljs-built_in">PolynomialFeatures</span>(degree=<span class="hljs-number">15</span>)),
        (<span class="hljs-string">'linear'</span>, <span class="hljs-built_in">Ridge</span>(alpha=<span class="hljs-number">0.1</span>))  # æ­£åˆ™åŒ–å‡å°‘æ–¹å·®
    ])
}

<span class="hljs-built_in">print</span>("å®šä¹‰çš„æ¨¡å‹:")
for <span class="hljs-selector-tag">i</span>, (name, model) in <span class="hljs-built_in">enumerate</span>(models.items()):
    <span class="hljs-built_in">print</span>(f<span class="hljs-string">"  {i+1}. {name}"</span>)

# å¯è§†åŒ–æ¨¡å‹å¤æ‚åº¦çš„æ¦‚å¿µ
degrees = [<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">15</span>, <span class="hljs-number">15</span>]  # å¯¹åº”æ¯ä¸ªæ¨¡å‹çš„å¤æ‚åº¦
complexity_names = [<span class="hljs-string">'çº¿æ€§\n(ç®€å•)'</span>, <span class="hljs-string">'4æ¬¡å¤šé¡¹å¼\n(ä¸­ç­‰)'</span>, <span class="hljs-string">'15æ¬¡å¤šé¡¹å¼\n(å¤æ‚)'</span>, <span class="hljs-string">'æ­£åˆ™åŒ–15æ¬¡\n(å¤æ‚+çº¦æŸ)'</span>]

plt.<span class="hljs-built_in">figure</span>(figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">6</span>))
colors = [<span class="hljs-string">'red'</span>, <span class="hljs-string">'orange'</span>, <span class="hljs-string">'blue'</span>, <span class="hljs-string">'green'</span>]
bars = plt.<span class="hljs-built_in">bar</span>(complexity_names, degrees, color=colors, alpha=<span class="hljs-number">0.7</span>)

plt.<span class="hljs-built_in">ylabel</span>(<span class="hljs-string">'å¤šé¡¹å¼æ¬¡æ•°'</span>)
plt.<span class="hljs-built_in">title</span>(<span class="hljs-string">'æ­¥éª¤2: æ¨¡å‹å¤æ‚åº¦å¯¹æ¯”'</span>, fontsize=<span class="hljs-number">14</span>, fontweight=<span class="hljs-string">'bold'</span>)
plt.<span class="hljs-built_in">grid</span>(True, alpha=<span class="hljs-number">0.3</span>, axis=<span class="hljs-string">'y'</span>)

# æ·»åŠ æ•°å€¼æ ‡ç­¾
for bar, degree in <span class="hljs-built_in">zip</span>(bars, degrees):
    plt.<span class="hljs-built_in">text</span>(bar.<span class="hljs-built_in">get_x</span>() + bar.<span class="hljs-built_in">get_width</span>()/<span class="hljs-number">2</span>, bar.<span class="hljs-built_in">get_height</span>() + <span class="hljs-number">0.1</span>, 
             f<span class="hljs-string">'{degree}æ¬¡'</span>, ha=<span class="hljs-string">'center'</span>, va=<span class="hljs-string">'bottom'</span>, fontweight=<span class="hljs-string">'bold'</span>)

plt.<span class="hljs-built_in">tight_layout</span>()
plt.<span class="hljs-built_in">show</span>()

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ¨¡å‹å¤æ‚åº¦è¯´æ˜:"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- çº¿æ€§æ¨¡å‹: æœ€ç®€å•çš„æ¨¡å‹ï¼Œåªèƒ½æ‹Ÿåˆç›´çº¿å…³ç³»"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- 4æ¬¡å¤šé¡¹å¼: ä¸­ç­‰å¤æ‚åº¦ï¼Œå¯ä»¥æ‹Ÿåˆä¸€äº›æ›²çº¿"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- 15æ¬¡å¤šé¡¹å¼: é«˜å¤æ‚åº¦ï¼Œå¯ä»¥æ‹Ÿåˆéå¸¸å¤æ‚çš„æ›²çº¿"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼: é«˜å¤æ‚åº¦ä½†å—çº¦æŸï¼Œå‡å°‘è¿‡æ‹Ÿåˆ"</span>)
</code></pre>
<p><strong>æ­¥éª¤2åˆ†æï¼š</strong></p>
<ul>
<li>æˆ‘ä»¬å®šä¹‰äº†å››ç§ä¸åŒå¤æ‚åº¦çš„æ¨¡å‹æ¥å±•ç¤ºåå·®-æ–¹å·®æƒè¡¡</li>
<li>çº¿æ€§æ¨¡å‹æ˜¯æœ€ç®€å•çš„ï¼Œé¢„æœŸä¼šæœ‰é«˜åå·®ï¼ˆæ¬ æ‹Ÿåˆï¼‰</li>
<li>15æ¬¡å¤šé¡¹å¼æ˜¯æœ€å¤æ‚çš„ï¼Œé¢„æœŸä¼šæœ‰é«˜æ–¹å·®ï¼ˆè¿‡æ‹Ÿåˆï¼‰</li>
<li>å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼å±•ç¤ºäº†å¦‚ä½•é€šè¿‡çº¦æŸæ¥å‡å°‘æ–¹å·®</li>
<li>æ¨¡å‹å¤æ‚åº¦ä»å·¦åˆ°å³é€’å¢ï¼Œå¸®åŠ©æˆ‘ä»¬è§‚å¯Ÿåå·®å’Œæ–¹å·®çš„å˜åŒ–</li>
</ul>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<blockquote>
<p>æ­¥éª¤2: å®šä¹‰ä¸åŒå¤æ‚åº¦çš„æ¨¡å‹<br/>
--------------------------------------------------<br/>
å®šä¹‰çš„æ¨¡å‹:<br/>
1. çº¿æ€§æ¨¡å‹ (é«˜åå·®)<br/>
2. 4æ¬¡å¤šé¡¹å¼ (å¹³è¡¡)<br/>
3. 15æ¬¡å¤šé¡¹å¼ (é«˜æ–¹å·®)<br/>
4. å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼</p>
<p>æ¨¡å‹å¤æ‚åº¦è¯´æ˜:<br/>
- çº¿æ€§æ¨¡å‹: æœ€ç®€å•çš„æ¨¡å‹ï¼Œåªèƒ½æ‹Ÿåˆç›´çº¿å…³ç³»<br/>
- 4æ¬¡å¤šé¡¹å¼: ä¸­ç­‰å¤æ‚åº¦ï¼Œå¯ä»¥æ‹Ÿåˆä¸€äº›æ›²çº¿<br/>
- 15æ¬¡å¤šé¡¹å¼: é«˜å¤æ‚åº¦ï¼Œå¯ä»¥æ‹Ÿåˆéå¸¸å¤æ‚çš„æ›²çº¿<br/>
- å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼: é«˜å¤æ‚åº¦ä½†å—çº¦æŸï¼Œå‡å°‘è¿‡æ‹Ÿåˆ</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a65efd8d03f74d25beb11fc154d591c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767494753&amp;x-signature=g8IpDklpnn%2FtyHAuuDlONXNL39g%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-14">ç¬¬ä¸‰æ­¥ï¼šå•ä¸ªæ•°æ®é›†ä¸Šçš„æ¨¡å‹æ‹Ÿåˆå¯¹æ¯”</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">print</span>("\n" + "=" * <span class="hljs-number">70</span>)
<span class="hljs-built_in">print</span>("æ­¥éª¤<span class="hljs-number">3</span>: å•ä¸ªæ•°æ®é›†ä¸Šçš„æ¨¡å‹æ‹Ÿåˆå¯¹æ¯”")
<span class="hljs-built_in">print</span>("=" * <span class="hljs-number">70</span>)

# è®­ç»ƒæ‰€æœ‰æ¨¡å‹å¹¶åœ¨å•ä¸ªæ•°æ®é›†ä¸Šå¯è§†åŒ–æ‹Ÿåˆæ•ˆæœ
plt<span class="hljs-selector-class">.figure</span>(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">8</span>))

# ä½¿ç”¨ä¹‹å‰ç”Ÿæˆçš„ç¤ºä¾‹æ•°æ®
plt<span class="hljs-selector-class">.scatter</span>(x_sample, y_sample, s=<span class="hljs-number">50</span>, alpha=<span class="hljs-number">0.7</span>, color='green', label='è®­ç»ƒæ•°æ®')
plt<span class="hljs-selector-class">.plot</span>(x_test, y_test_true, 'k-', linewidth=<span class="hljs-number">3</span>, label='çœŸå®å‡½æ•°')

colors = <span class="hljs-selector-attr">[<span class="hljs-string">'red'</span>, <span class="hljs-string">'orange'</span>, <span class="hljs-string">'blue'</span>, <span class="hljs-string">'green'</span>]</span>
line_styles = <span class="hljs-selector-attr">[<span class="hljs-string">'-'</span>, <span class="hljs-string">'--'</span>, <span class="hljs-string">'-.'</span>, <span class="hljs-string">':'</span>]</span>

for <span class="hljs-selector-tag">i</span>, (name, model) in <span class="hljs-built_in">enumerate</span>(models.items()):
    model.<span class="hljs-built_in">fit</span>(x_sample.<span class="hljs-built_in">reshape</span>(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>), y_sample)
    y_pred_sample = model.<span class="hljs-built_in">predict</span>(x_test.<span class="hljs-built_in">reshape</span>(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>))
    
    # è®¡ç®—è¯¥æ¨¡å‹åœ¨æ­¤æ•°æ®é›†ä¸Šçš„è¯¯å·®
    train_error = <span class="hljs-built_in">mean_squared_error</span>(y_sample, model.<span class="hljs-built_in">predict</span>(x_sample.<span class="hljs-built_in">reshape</span>(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)))
    test_error = <span class="hljs-built_in">mean_squared_error</span>(y_test_true, y_pred_sample)
    
    plt.<span class="hljs-built_in">plot</span>(x_test, y_pred_sample, line_styles[i], linewidth=<span class="hljs-number">2</span>, 
             label=f<span class="hljs-string">'{name}\nè®­ç»ƒè¯¯å·®: {train_error:.3f}\næµ‹è¯•è¯¯å·®: {test_error:.3f}'</span>, 
             color=colors[i])

plt.<span class="hljs-built_in">xlabel</span>(<span class="hljs-string">'x'</span>)
plt.<span class="hljs-built_in">ylabel</span>(<span class="hljs-string">'y'</span>)
plt.<span class="hljs-built_in">title</span>(<span class="hljs-string">'æ­¥éª¤3: å•ä¸ªæ•°æ®é›†ä¸Šçš„æ¨¡å‹æ‹Ÿåˆå¯¹æ¯”'</span>, fontsize=<span class="hljs-number">14</span>, fontweight=<span class="hljs-string">'bold'</span>)
plt.<span class="hljs-built_in">legend</span>(bbox_to_anchor=(<span class="hljs-number">1.05</span>, <span class="hljs-number">1</span>), loc=<span class="hljs-string">'upper left'</span>)
plt.<span class="hljs-built_in">grid</span>(True, alpha=<span class="hljs-number">0.3</span>)
plt.<span class="hljs-built_in">tight_layout</span>()
plt.<span class="hljs-built_in">show</span>()

<span class="hljs-built_in">print</span>(<span class="hljs-string">"å•ä¸ªæ•°æ®é›†ä¸Šçš„æ‹Ÿåˆåˆ†æ:"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- çº¿æ€§æ¨¡å‹: è¿‡äºç®€å•ï¼Œæ— æ³•æ•æ‰æ›²çº¿çš„å¤æ‚æ¨¡å¼ï¼Œè®­ç»ƒè¯¯å·®å’Œæµ‹è¯•è¯¯å·®éƒ½è¾ƒé«˜"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- 4æ¬¡å¤šé¡¹å¼: èƒ½å¤Ÿè¾ƒå¥½åœ°æ‹Ÿåˆæ•°æ®ï¼Œè®­ç»ƒè¯¯å·®å’Œæµ‹è¯•è¯¯å·®ç›¸å¯¹å¹³è¡¡"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- 15æ¬¡å¤šé¡¹å¼: è¿‡åº¦æ‹Ÿåˆè®­ç»ƒæ•°æ®ï¼Œè®­ç»ƒè¯¯å·®å¾ˆä½ä½†æµ‹è¯•è¯¯å·®è¾ƒé«˜"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼: é€šè¿‡æ­£åˆ™åŒ–å‡å°‘äº†è¿‡æ‹Ÿåˆï¼Œæµ‹è¯•è¯¯å·®æœ‰æ‰€æ”¹å–„"</span>)
</code></pre>
<p><strong>æ­¥éª¤3åˆ†æï¼š</strong></p>
<ul>
<li>åœ¨å•ä¸ªæ•°æ®é›†ä¸Šï¼Œä¸åŒæ¨¡å‹çš„æ‹Ÿåˆè¡Œä¸ºæœ‰æ˜æ˜¾å·®å¼‚</li>
<li>çº¿æ€§æ¨¡å‹è¿‡äºç®€å•ï¼Œæ— æ³•æ•æ‰çœŸå®å‡½æ•°çš„å¤æ‚æ¨¡å¼ï¼Œè¡¨ç°ä¸ºæ¬ æ‹Ÿåˆ</li>
<li>15æ¬¡å¤šé¡¹å¼è¿‡åº¦æ‹Ÿåˆè®­ç»ƒæ•°æ®ï¼Œå®Œç¾åœ°ç©¿è¿‡äº†æ‰€æœ‰è®­ç»ƒç‚¹ï¼Œä½†åç¦»äº†çœŸå®å‡½æ•°</li>
<li>4æ¬¡å¤šé¡¹å¼åœ¨ç®€å•å’Œå¤æ‚ä¹‹é—´å–å¾—äº†è¾ƒå¥½çš„å¹³è¡¡</li>
<li>å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼é€šè¿‡çº¦æŸå‚æ•°ï¼Œå‡å°‘äº†è¿‡æ‹Ÿåˆç¨‹åº¦</li>
</ul>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<blockquote>
<p>æ­¥éª¤3: å•ä¸ªæ•°æ®é›†ä¸Šçš„æ¨¡å‹æ‹Ÿåˆå¯¹æ¯”<br/>
--------------------------------------------------<br/>
å•ä¸ªæ•°æ®é›†ä¸Šçš„æ‹Ÿåˆåˆ†æ:<br/>
- çº¿æ€§æ¨¡å‹: è¿‡äºç®€å•ï¼Œæ— æ³•æ•æ‰æ›²çº¿çš„å¤æ‚æ¨¡å¼ï¼Œè®­ç»ƒè¯¯å·®å’Œæµ‹è¯•è¯¯å·®éƒ½è¾ƒé«˜<br/>
- 4æ¬¡å¤šé¡¹å¼: èƒ½å¤Ÿè¾ƒå¥½åœ°æ‹Ÿåˆæ•°æ®ï¼Œè®­ç»ƒè¯¯å·®å’Œæµ‹è¯•è¯¯å·®ç›¸å¯¹å¹³è¡¡<br/>
- 15æ¬¡å¤šé¡¹å¼: è¿‡åº¦æ‹Ÿåˆè®­ç»ƒæ•°æ®ï¼Œè®­ç»ƒè¯¯å·®å¾ˆä½ä½†æµ‹è¯•è¯¯å·®è¾ƒé«˜<br/>
- å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼: é€šè¿‡æ­£åˆ™åŒ–å‡å°‘äº†è¿‡æ‹Ÿåˆï¼Œæµ‹è¯•è¯¯å·®æœ‰æ‰€æ”¹å–„</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/956a6418923d40f29c52a854678629d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767494753&amp;x-signature=9KVlP7m3c6TpyVBcx982La6DqDQ%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-15">ç¬¬å››æ­¥ï¼šå¤šä¸ªæ•°æ®é›†ä¸Šçš„é¢„æµ‹åˆ†å¸ƒ</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">print</span>("\n" + "=" * <span class="hljs-number">70</span>)
<span class="hljs-built_in">print</span>("æ­¥éª¤<span class="hljs-number">4</span>: å¤šä¸ªæ•°æ®é›†ä¸Šçš„é¢„æµ‹åˆ†å¸ƒ")
<span class="hljs-built_in">print</span>("=" * <span class="hljs-number">70</span>)

# å­˜å‚¨é¢„æµ‹ç»“æœ
predictions = {name: [] for name in models.<span class="hljs-built_in">keys</span>()}

<span class="hljs-built_in">print</span>("åœ¨å¤šä¸ªæ•°æ®é›†ä¸Šè®­ç»ƒæ¨¡å‹...")
for <span class="hljs-selector-tag">i</span> in <span class="hljs-built_in">range</span>(n_datasets):
    # ç”Ÿæˆæ–°çš„è®­ç»ƒæ•°æ®
    x_train = np.random.<span class="hljs-built_in">uniform</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, n_samples)
    y_train = <span class="hljs-built_in">true_function</span>(x_train) + np.random.<span class="hljs-built_in">normal</span>(<span class="hljs-number">0</span>, noise_std, n_samples)
    
    # å¯¹æ¯ä¸ªæ¨¡å‹è¿›è¡Œè®­ç»ƒå’Œé¢„æµ‹
    for name, model in models.<span class="hljs-built_in">items</span>():
        model.<span class="hljs-built_in">fit</span>(x_train.<span class="hljs-built_in">reshape</span>(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>), y_train)
        y_pred = model.<span class="hljs-built_in">predict</span>(x_test.<span class="hljs-built_in">reshape</span>(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>))
        predictions[name].<span class="hljs-built_in">append</span>(y_pred)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"è®­ç»ƒå®Œæˆ!"</span>)

# é€‰æ‹©ä¸€ä¸ªç‚¹æ¥å±•ç¤ºé¢„æµ‹åˆ†å¸ƒ
x_point = <span class="hljs-number">0.5</span>
y_true_point = <span class="hljs-built_in">true_function</span>(x_point)

# å¯è§†åŒ–åœ¨x=<span class="hljs-number">0.5</span>å¤„çš„é¢„æµ‹åˆ†å¸ƒ
plt.<span class="hljs-built_in">figure</span>(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">8</span>))

for i, (name, preds) in <span class="hljs-built_in">enumerate</span>(predictions.<span class="hljs-built_in">items</span>()):
    point_preds = [pred[np.<span class="hljs-built_in">argmin</span>(np.<span class="hljs-built_in">abs</span>(x_test - x_point))] for pred in preds]
    
    # è®¡ç®—ç»Ÿè®¡é‡
    mean_pred = np.<span class="hljs-built_in">mean</span>(point_preds)
    std_pred = np.<span class="hljs-built_in">std</span>(point_preds)
    bias = mean_pred - y_true_point
    
    # ç»˜åˆ¶é¢„æµ‹åˆ†å¸ƒ
    plt.<span class="hljs-built_in">hist</span>(point_preds, alpha=<span class="hljs-number">0.6</span>, label=f<span class="hljs-string">'{name}\nå‡å€¼: {mean_pred:.3f}\næ ‡å‡†å·®: {std_pred:.3f}\nåå·®: {bias:.3f}'</span>, 
             bins=<span class="hljs-number">20</span>, color=colors[i])

# æ ‡è®°çœŸå®å€¼
plt.<span class="hljs-built_in">axvline</span>(x=y_true_point, color=<span class="hljs-string">'black'</span>, linestyle=<span class="hljs-string">'-'</span>, linewidth=<span class="hljs-number">3</span>, 
            label=f<span class="hljs-string">'çœŸå®å€¼: {y_true_point:.3f}'</span>)

plt.<span class="hljs-built_in">xlabel</span>(f<span class="hljs-string">'åœ¨ x={x_point} å¤„çš„é¢„æµ‹å€¼'</span>)
plt.<span class="hljs-built_in">ylabel</span>(<span class="hljs-string">'é¢‘æ¬¡'</span>)
plt.<span class="hljs-built_in">title</span>(<span class="hljs-string">'æ­¥éª¤4: å¤šä¸ªæ•°æ®é›†ä¸Šçš„é¢„æµ‹åˆ†å¸ƒ (åæ˜ æ–¹å·®)'</span>, fontsize=<span class="hljs-number">14</span>, fontweight=<span class="hljs-string">'bold'</span>)
plt.<span class="hljs-built_in">legend</span>(bbox_to_anchor=(<span class="hljs-number">1.05</span>, <span class="hljs-number">1</span>), loc=<span class="hljs-string">'upper left'</span>)
plt.<span class="hljs-built_in">grid</span>(True, alpha=<span class="hljs-number">0.3</span>)
plt.<span class="hljs-built_in">tight_layout</span>()
plt.<span class="hljs-built_in">show</span>()

<span class="hljs-built_in">print</span>(<span class="hljs-string">"é¢„æµ‹åˆ†å¸ƒåˆ†æ:"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- çº¿æ€§æ¨¡å‹: é¢„æµ‹åˆ†å¸ƒé›†ä¸­ï¼Œæ–¹å·®å°ï¼Œä½†å‡å€¼åç¦»çœŸå®å€¼ï¼ˆé«˜åå·®ï¼‰"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- 4æ¬¡å¤šé¡¹å¼: é¢„æµ‹åˆ†å¸ƒç›¸å¯¹é›†ä¸­ï¼Œå‡å€¼æ¥è¿‘çœŸå®å€¼ï¼ˆåå·®å’Œæ–¹å·®å¹³è¡¡ï¼‰"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- 15æ¬¡å¤šé¡¹å¼: é¢„æµ‹åˆ†å¸ƒåˆ†æ•£ï¼Œæ–¹å·®å¤§ï¼Œä½†å‡å€¼æ¥è¿‘çœŸå®å€¼ï¼ˆé«˜æ–¹å·®ï¼‰"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼: é¢„æµ‹åˆ†å¸ƒæ¯”æ— æ­£åˆ™åŒ–æ›´é›†ä¸­ï¼Œæ–¹å·®å‡å°"</span>)
</code></pre>
<p><strong>æ­¥éª¤4åˆ†æï¼š</strong></p>
<ul>
<li>é€šè¿‡åœ¨å¤šä¸ªæ•°æ®é›†ä¸Šè®­ç»ƒæ¨¡å‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¯ä¸ªæ¨¡å‹çš„ç¨³å®šæ€§ï¼ˆæ–¹å·®ï¼‰</li>
<li>çº¿æ€§æ¨¡å‹çš„é¢„æµ‹åˆ†å¸ƒæœ€é›†ä¸­ï¼Œè¯´æ˜æ–¹å·®æœ€å°ï¼Œä½†å‡å€¼åç¦»çœŸå®å€¼ï¼Œè¯´æ˜åå·®å¤§</li>
<li>15æ¬¡å¤šé¡¹å¼çš„é¢„æµ‹åˆ†å¸ƒæœ€åˆ†æ•£ï¼Œè¯´æ˜æ–¹å·®æœ€å¤§ï¼Œä½†å‡å€¼æ¥è¿‘çœŸå®å€¼ï¼Œè¯´æ˜åå·®å°</li>
<li>4æ¬¡å¤šé¡¹å¼åœ¨åå·®å’Œæ–¹å·®ä¹‹é—´å–å¾—äº†å¹³è¡¡</li>
<li>å¸¦æ­£åˆ™åŒ–çš„æ¨¡å‹å‡å°‘äº†é¢„æµ‹çš„åˆ†æ•£ç¨‹åº¦ï¼Œé™ä½äº†æ–¹å·®</li>
</ul>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<blockquote>
<p>æ­¥éª¤4: å¤šä¸ªæ•°æ®é›†ä¸Šçš„é¢„æµ‹åˆ†å¸ƒ<br/>
--------------------------------------------------<br/>
åœ¨å¤šä¸ªæ•°æ®é›†ä¸Šè®­ç»ƒæ¨¡å‹...<br/>
æ­£åœ¨å¤„ç†ç¬¬ 1/100 ä¸ªæ•°æ®é›†...<br/>
æ­£åœ¨å¤„ç†ç¬¬ 21/100 ä¸ªæ•°æ®é›†...<br/>
æ­£åœ¨å¤„ç†ç¬¬ 41/100 ä¸ªæ•°æ®é›†...<br/>
æ­£åœ¨å¤„ç†ç¬¬ 61/100 ä¸ªæ•°æ®é›†...<br/>
æ­£åœ¨å¤„ç†ç¬¬ 81/100 ä¸ªæ•°æ®é›†...<br/>
è®­ç»ƒå®Œæˆ!<br/>
é¢„æµ‹åˆ†å¸ƒåˆ†æ:<br/>
- çº¿æ€§æ¨¡å‹: é¢„æµ‹åˆ†å¸ƒé›†ä¸­ï¼Œæ–¹å·®å°ï¼Œä½†å‡å€¼åç¦»çœŸå®å€¼ï¼ˆé«˜åå·®ï¼‰<br/>
- 4æ¬¡å¤šé¡¹å¼: é¢„æµ‹åˆ†å¸ƒç›¸å¯¹é›†ä¸­ï¼Œå‡å€¼æ¥è¿‘çœŸå®å€¼ï¼ˆåå·®å’Œæ–¹å·®å¹³è¡¡ï¼‰<br/>
- 15æ¬¡å¤šé¡¹å¼: é¢„æµ‹åˆ†å¸ƒåˆ†æ•£ï¼Œæ–¹å·®å¤§ï¼Œä½†å‡å€¼æ¥è¿‘çœŸå®å€¼ï¼ˆé«˜æ–¹å·®ï¼‰<br/>
- å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼: é¢„æµ‹åˆ†å¸ƒæ¯”æ— æ­£åˆ™åŒ–æ›´é›†ä¸­ï¼Œæ–¹å·®å‡å°</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da7024bd06a841ccaa25d7409a8c6ae8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767494753&amp;x-signature=fMZZ1HEpBQreYF0TPaRc5D1gpKA%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-16">ç¬¬äº”æ­¥ï¼šæ¨¡å‹å¹³å‡é¢„æµ‹ä¸çœŸå®å‡½æ•°å¯¹æ¯”</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">print</span>("\n" + "=" * <span class="hljs-number">70</span>)
<span class="hljs-built_in">print</span>("æ­¥éª¤<span class="hljs-number">5</span>: æ¨¡å‹å¹³å‡é¢„æµ‹ä¸çœŸå®å‡½æ•°å¯¹æ¯”")
<span class="hljs-built_in">print</span>("=" * <span class="hljs-number">70</span>)

# è®¡ç®—æ¯ä¸ªæ¨¡å‹çš„å¹³å‡é¢„æµ‹
plt<span class="hljs-selector-class">.figure</span>(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">8</span>))

plt<span class="hljs-selector-class">.plot</span>(x_test, y_test_true, 'k-', linewidth=<span class="hljs-number">3</span>, label='çœŸå®å‡½æ•°')

for <span class="hljs-selector-tag">i</span>, (name, preds) in <span class="hljs-built_in">enumerate</span>(predictions.items()):
    preds_array = np.<span class="hljs-built_in">array</span>(preds)
    mean_prediction = np.<span class="hljs-built_in">mean</span>(preds_array, axis=<span class="hljs-number">0</span>)
    
    # è®¡ç®—å¹³å‡åå·®
    avg_bias = np.<span class="hljs-built_in">mean</span>(mean_prediction - y_test_true)
    bias_squared = np.<span class="hljs-built_in">mean</span>((mean_prediction - y_test_true) ** <span class="hljs-number">2</span>)
    
    plt.<span class="hljs-built_in">plot</span>(x_test, mean_prediction, line_styles[i], linewidth=<span class="hljs-number">2</span>, 
             label=f<span class="hljs-string">'{name}\nå¹³å‡åå·®: {avg_bias:.3f}\nåå·®å¹³æ–¹: {bias_squared:.3f}'</span>, 
             color=colors[i])

plt.<span class="hljs-built_in">xlabel</span>(<span class="hljs-string">'x'</span>)
plt.<span class="hljs-built_in">ylabel</span>(<span class="hljs-string">'y'</span>)
plt.<span class="hljs-built_in">title</span>(<span class="hljs-string">'æ­¥éª¤5: æ¨¡å‹å¹³å‡é¢„æµ‹ä¸çœŸå®å‡½æ•°å¯¹æ¯” (åæ˜ åå·®)'</span>, fontsize=<span class="hljs-number">14</span>, fontweight=<span class="hljs-string">'bold'</span>)
plt.<span class="hljs-built_in">legend</span>(bbox_to_anchor=(<span class="hljs-number">1.05</span>, <span class="hljs-number">1</span>), loc=<span class="hljs-string">'upper left'</span>)
plt.<span class="hljs-built_in">grid</span>(True, alpha=<span class="hljs-number">0.3</span>)
plt.<span class="hljs-built_in">tight_layout</span>()
plt.<span class="hljs-built_in">show</span>()

<span class="hljs-built_in">print</span>(<span class="hljs-string">"å¹³å‡é¢„æµ‹åˆ†æ:"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- çº¿æ€§æ¨¡å‹: å¹³å‡é¢„æµ‹ä¸çœŸå®å‡½æ•°å·®å¼‚æœ€å¤§ï¼Œè¡¨ç°ä¸ºé«˜åå·®"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- 4æ¬¡å¤šé¡¹å¼: å¹³å‡é¢„æµ‹èƒ½è¾ƒå¥½åœ°è·Ÿè¸ªçœŸå®å‡½æ•°ï¼Œåå·®è¾ƒå°"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- 15æ¬¡å¤šé¡¹å¼: å¹³å‡é¢„æµ‹æœ€æ¥è¿‘çœŸå®å‡½æ•°ï¼Œåå·®æœ€å°"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼: å¹³å‡é¢„æµ‹æ¥è¿‘æ— æ­£åˆ™åŒ–ç‰ˆæœ¬ï¼Œåå·®å¾ˆå°"</span>)
</code></pre>
<p><strong>æ­¥éª¤5åˆ†æï¼š</strong></p>
<ul>
<li>å¹³å‡é¢„æµ‹åæ˜ äº†æ¨¡å‹çš„åå·®ï¼Œå³æ¨¡å‹é¢„æµ‹çš„ç³»ç»Ÿæ€§è¯¯å·®</li>
<li>çº¿æ€§æ¨¡å‹çš„å¹³å‡é¢„æµ‹æ˜¯ä¸€æ¡ç›´çº¿ï¼Œä¸çœŸå®æ›²çº¿å·®å¼‚æ˜æ˜¾ï¼Œè¯´æ˜é«˜åå·®</li>
<li>15æ¬¡å¤šé¡¹å¼çš„å¹³å‡é¢„æµ‹æœ€æ¥è¿‘çœŸå®å‡½æ•°ï¼Œè¯´æ˜ä½åå·®</li>
<li>4æ¬¡å¤šé¡¹å¼çš„å¹³å‡é¢„æµ‹åœ¨å¤§éƒ¨åˆ†åŒºåŸŸèƒ½è¾ƒå¥½åœ°è·Ÿè¸ªçœŸå®å‡½æ•°</li>
<li>è¿™ä¸ªå›¾è¡¨æ¸…æ™°åœ°å±•ç¤ºäº†ä¸åŒæ¨¡å‹çš„åå·®ç‰¹æ€§</li>
</ul>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<blockquote>
<p>æ­¥éª¤5: æ¨¡å‹å¹³å‡é¢„æµ‹ä¸çœŸå®å‡½æ•°å¯¹æ¯”<br/>
--------------------------------------------------<br/>
å¹³å‡é¢„æµ‹åˆ†æ:<br/>
- çº¿æ€§æ¨¡å‹: å¹³å‡é¢„æµ‹ä¸çœŸå®å‡½æ•°å·®å¼‚æœ€å¤§ï¼Œè¡¨ç°ä¸ºé«˜åå·®<br/>
- 4æ¬¡å¤šé¡¹å¼: å¹³å‡é¢„æµ‹èƒ½è¾ƒå¥½åœ°è·Ÿè¸ªçœŸå®å‡½æ•°ï¼Œåå·®è¾ƒå°<br/>
- 15æ¬¡å¤šé¡¹å¼: å¹³å‡é¢„æµ‹æœ€æ¥è¿‘çœŸå®å‡½æ•°ï¼Œåå·®æœ€å°<br/>
- å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼: å¹³å‡é¢„æµ‹æ¥è¿‘æ— æ­£åˆ™åŒ–ç‰ˆæœ¬ï¼Œåå·®å¾ˆå°</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d828bf90b3e24f5f81c0f219414de94f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767494753&amp;x-signature=arM5F00n35eKYnm59QHW9D%2FqCtU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-17">ç¬¬å…­æ­¥ï¼šåå·®-æ–¹å·®åˆ†è§£å¯è§†åŒ–</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">print</span>("\n" + "=" * <span class="hljs-number">70</span>)
<span class="hljs-built_in">print</span>("æ­¥éª¤<span class="hljs-number">6</span>: åå·®-æ–¹å·®åˆ†è§£å¯è§†åŒ–")
<span class="hljs-built_in">print</span>("=" * <span class="hljs-number">70</span>)

# è®¡ç®—åå·®ã€æ–¹å·®å’Œæ€»è¯¯å·®
results = {}
noise = noise_std ** <span class="hljs-number">2</span>

for name, preds in predictions<span class="hljs-selector-class">.items</span>():
    preds_array = np.<span class="hljs-built_in">array</span>(preds)
    mean_prediction = np.<span class="hljs-built_in">mean</span>(preds_array, axis=<span class="hljs-number">0</span>)
    
    # è®¡ç®—åå·®å¹³æ–¹
    bias_squared = np.<span class="hljs-built_in">mean</span>((mean_prediction - y_test_true) ** <span class="hljs-number">2</span>)
    
    # è®¡ç®—æ–¹å·®
    variance = np.<span class="hljs-built_in">mean</span>(np.<span class="hljs-built_in">var</span>(preds_array, axis=<span class="hljs-number">0</span>))
    
    # è®¡ç®—æ€»è¯¯å·®
    total_error = np.<span class="hljs-built_in">mean</span>([<span class="hljs-built_in">mean_squared_error</span>(y_test_true, pred) for pred in preds])
    
    results[name] = {
        'bias_squared': bias_squared,
        <span class="hljs-string">'variance'</span>: variance,
        <span class="hljs-string">'total_error'</span>: total_error,
        <span class="hljs-string">'noise'</span>: noise
    }

# å¯è§†åŒ–åå·®-æ–¹å·®åˆ†è§£
model_names = <span class="hljs-built_in">list</span>(results.keys())
bias_squared_vals = <span class="hljs-selector-attr">[results[name]</span><span class="hljs-selector-attr">[<span class="hljs-string">'bias_squared'</span>]</span> for name in model_names]
variance_vals = <span class="hljs-selector-attr">[results[name]</span><span class="hljs-selector-attr">[<span class="hljs-string">'variance'</span>]</span> for name in model_names]
noise_vals = <span class="hljs-selector-attr">[results[name]</span><span class="hljs-selector-attr">[<span class="hljs-string">'noise'</span>]</span> for name in model_names]
total_error_vals = <span class="hljs-selector-attr">[results[name]</span><span class="hljs-selector-attr">[<span class="hljs-string">'total_error'</span>]</span> for name in model_names]

plt<span class="hljs-selector-class">.figure</span>(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">8</span>))
x_pos = np<span class="hljs-selector-class">.arange</span>(len(model_names))
<span class="hljs-attribute">width</span> = <span class="hljs-number">0.2</span>

plt<span class="hljs-selector-class">.bar</span>(x_pos - <span class="hljs-number">1.5</span>*width, bias_squared_vals, width, label='åå·®å¹³æ–¹', alpha=<span class="hljs-number">0.8</span>, color='red')
plt<span class="hljs-selector-class">.bar</span>(x_pos - <span class="hljs-number">0.5</span>*width, variance_vals, width, label='æ–¹å·®', alpha=<span class="hljs-number">0.8</span>, color='blue')
plt<span class="hljs-selector-class">.bar</span>(x_pos + <span class="hljs-number">0.5</span>*width, noise_vals, width, label='å™ªå£°', alpha=<span class="hljs-number">0.8</span>, color='gray')
plt<span class="hljs-selector-class">.bar</span>(x_pos + <span class="hljs-number">1.5</span>*width, total_error_vals, width, label='æ€»è¯¯å·®', alpha=<span class="hljs-number">0.6</span>, 
        color='black', edgecolor='red', linewidth=<span class="hljs-number">2</span>)

plt<span class="hljs-selector-class">.xlabel</span>('æ¨¡å‹å¤æ‚åº¦')
plt<span class="hljs-selector-class">.ylabel</span>('è¯¯å·®å€¼')
plt<span class="hljs-selector-class">.title</span>('æ­¥éª¤<span class="hljs-number">6</span>: åå·®-æ–¹å·®åˆ†è§£ (æ€»è¯¯å·® = åå·®Â² + æ–¹å·® + å™ªå£°)', fontsize=<span class="hljs-number">14</span>, fontweight='bold')
plt<span class="hljs-selector-class">.xticks</span>(x_pos, model_names, rotation=<span class="hljs-number">45</span>)
plt<span class="hljs-selector-class">.legend</span>()
plt<span class="hljs-selector-class">.grid</span>(True, alpha=<span class="hljs-number">0.3</span>)

# æ·»åŠ æ•°å€¼æ ‡æ³¨
for <span class="hljs-selector-tag">i</span>, v in <span class="hljs-built_in">enumerate</span>(total_error_vals):
    plt.<span class="hljs-built_in">text</span>(i, v + <span class="hljs-number">0.01</span>, f<span class="hljs-string">'{v:.3f}'</span>, ha=<span class="hljs-string">'center'</span>, va=<span class="hljs-string">'bottom'</span>, fontweight=<span class="hljs-string">'bold'</span>)

plt.<span class="hljs-built_in">tight_layout</span>()
plt.<span class="hljs-built_in">show</span>()

<span class="hljs-built_in">print</span>(<span class="hljs-string">"åå·®-æ–¹å·®åˆ†è§£ç»“æœ:"</span>)
for name in model_names:
    bias_sq = results[name][<span class="hljs-string">'bias_squared'</span>]
    var = results[name][<span class="hljs-string">'variance'</span>]
    noise_val = results[name][<span class="hljs-string">'noise'</span>]
    total = results[name][<span class="hljs-string">'total_error'</span>]
    
    <span class="hljs-built_in">print</span>(f<span class="hljs-string">"\n{name}:"</span>)
    <span class="hljs-built_in">print</span>(f<span class="hljs-string">"  åå·®å¹³æ–¹: {bias_sq:.4f} ({bias_sq/total*100:.1f}%)"</span>)
    <span class="hljs-built_in">print</span>(f<span class="hljs-string">"  æ–¹å·®: {var:.4f} ({var/total*100:.1f}%)"</span>)
    <span class="hljs-built_in">print</span>(f<span class="hljs-string">"  å™ªå£°: {noise_val:.4f} ({noise_val/total*100:.1f}%)"</span>)
    <span class="hljs-built_in">print</span>(f<span class="hljs-string">"  æ€»è¯¯å·®: {total:.4f}"</span>)
</code></pre>
<p><strong>æ­¥éª¤6åˆ†æï¼š</strong></p>
<ul>
<li>è¿™å¼ å›¾è¡¨æ¸…æ™°åœ°å±•ç¤ºäº†æ¯ä¸ªæ¨¡å‹çš„è¯¯å·®ç»„æˆ</li>
<li>çº¿æ€§æ¨¡å‹çš„ä¸»è¦è¯¯å·®æ¥æºæ˜¯åå·®ï¼ˆçº¢è‰²éƒ¨åˆ†ï¼‰</li>
<li>15æ¬¡å¤šé¡¹å¼çš„ä¸»è¦è¯¯å·®æ¥æºæ˜¯æ–¹å·®ï¼ˆè“è‰²éƒ¨åˆ†ï¼‰</li>
<li>4æ¬¡å¤šé¡¹å¼åœ¨åå·®å’Œæ–¹å·®ä¹‹é—´å–å¾—äº†è¾ƒå¥½çš„å¹³è¡¡</li>
<li>å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼é€šè¿‡å‡å°‘æ–¹å·®ï¼Œé™ä½äº†æ€»è¯¯å·®</li>
<li>æ‰€æœ‰æ¨¡å‹éƒ½æœ‰ç›¸åŒçš„å™ªå£°æˆåˆ†ï¼ˆç°è‰²éƒ¨åˆ†ï¼‰ï¼Œè¿™æ˜¯æ•°æ®å›ºæœ‰çš„ä¸å¯å‡å°‘è¯¯å·®</li>
</ul>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<blockquote>
<p>æ­¥éª¤6: åå·®-æ–¹å·®åˆ†è§£å¯è§†åŒ–<br/>
--------------------------------------------------<br/>
åå·®-æ–¹å·®åˆ†è§£ç»“æœ:</p>
<p>çº¿æ€§æ¨¡å‹ (é«˜åå·®):<br/>
åå·®å¹³æ–¹: 0.7832 (96.2%)<br/>
æ–¹å·®: 0.0306 (3.8%)<br/>
å™ªå£°: 0.0900 (11.1%)<br/>
æ€»è¯¯å·®: 0.8137</p>
<p>4æ¬¡å¤šé¡¹å¼ (å¹³è¡¡):<br/>
åå·®å¹³æ–¹: 0.0461 (67.5%)<br/>
æ–¹å·®: 0.0222 (32.5%)<br/>
å™ªå£°: 0.0900 (131.6%)<br/>
æ€»è¯¯å·®: 0.0684</p>
<p>15æ¬¡å¤šé¡¹å¼ (é«˜æ–¹å·®):<br/>
åå·®å¹³æ–¹: 7.8403 (0.9%)<br/>
æ–¹å·®: 850.9843 (99.1%)<br/>
å™ªå£°: 0.0900 (0.0%)<br/>
æ€»è¯¯å·®: 858.8245</p>
<p>å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼:<br/>
åå·®å¹³æ–¹: 0.1624 (87.5%)<br/>
æ–¹å·®: 0.0233 (12.5%)<br/>
å™ªå£°: 0.0900 (48.5%)<br/>
æ€»è¯¯å·®: 0.1857</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e983e1baf4f4b1db9ff9e4bdc2b844e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767494753&amp;x-signature=QGeNYntFU68Kbmslv%2BmttrguKlA%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-18">ç¬¬ä¸ƒæ­¥ï¼šå­¦ä¹ æ›²çº¿åˆ†æ</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">print</span>("\n" + "=" * <span class="hljs-number">70</span>)
<span class="hljs-built_in">print</span>("æ­¥éª¤<span class="hljs-number">7</span>: å­¦ä¹ æ›²çº¿åˆ†æ")
<span class="hljs-built_in">print</span>("=" * <span class="hljs-number">70</span>)

# è®¡ç®—è®­ç»ƒè¯¯å·®
train_errors = {name: [] for name in models.<span class="hljs-built_in">keys</span>()}

for name, preds in predictions<span class="hljs-selector-class">.items</span>():
    for i in <span class="hljs-built_in">range</span>(n_datasets):
        # é‡æ–°ç”Ÿæˆè®­ç»ƒæ•°æ®ä»¥è®¡ç®—è®­ç»ƒè¯¯å·®
        x_train = np.random.<span class="hljs-built_in">uniform</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, n_samples)
        y_train = <span class="hljs-built_in">true_function</span>(x_train) + np.random.<span class="hljs-built_in">normal</span>(<span class="hljs-number">0</span>, noise_std, n_samples)
        
        model = models[name]
        model.<span class="hljs-built_in">fit</span>(x_train.<span class="hljs-built_in">reshape</span>(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>), y_train)
        y_pred_train = model.<span class="hljs-built_in">predict</span>(x_train.<span class="hljs-built_in">reshape</span>(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>))
        
        train_errors[name].<span class="hljs-built_in">append</span>(<span class="hljs-built_in">mean_squared_error</span>(y_train, y_pred_train))

# è®¡ç®—å¹³å‡è®­ç»ƒè¯¯å·®å’Œæµ‹è¯•è¯¯å·®
avg_train_errors = [np.<span class="hljs-built_in">mean</span>(train_errors[name]) for name in model_names]
avg_test_errors = [results[name][<span class="hljs-string">'total_error'</span>] for name in model_names]

# å¯è§†åŒ–å­¦ä¹ æ›²çº¿
plt.<span class="hljs-built_in">figure</span>(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">8</span>))
model_complexity = [<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">15</span>, <span class="hljs-number">15</span>]  # å¯¹åº”æ¯ä¸ªæ¨¡å‹çš„å¤æ‚åº¦

plt.<span class="hljs-built_in">plot</span>(model_complexity, avg_train_errors, <span class="hljs-string">'o-'</span>, linewidth=<span class="hljs-number">2</span>, markersize=<span class="hljs-number">8</span>, 
         label=<span class="hljs-string">'è®­ç»ƒè¯¯å·®'</span>, color=<span class="hljs-string">'blue'</span>)
plt.<span class="hljs-built_in">plot</span>(model_complexity, avg_test_errors, <span class="hljs-string">'o-'</span>, linewidth=<span class="hljs-number">2</span>, markersize=<span class="hljs-number">8</span>, 
         label=<span class="hljs-string">'æµ‹è¯•è¯¯å·®'</span>, color=<span class="hljs-string">'red'</span>)

# æ ‡è®°æ¯ä¸ªç‚¹
for i, name in <span class="hljs-built_in">enumerate</span>(model_names):
    plt.<span class="hljs-built_in">annotate</span>(name, (model_complexity[i], avg_test_errors[i]), 
                textcoords=<span class="hljs-string">"offset points"</span>, xytext=(<span class="hljs-number">0</span>,<span class="hljs-number">10</span>), ha=<span class="hljs-string">'center'</span>, fontweight=<span class="hljs-string">'bold'</span>)

plt.<span class="hljs-built_in">xlabel</span>(<span class="hljs-string">'æ¨¡å‹å¤æ‚åº¦ (å¤šé¡¹å¼æ¬¡æ•°)'</span>)
plt.<span class="hljs-built_in">ylabel</span>(<span class="hljs-string">'è¯¯å·®'</span>)
plt.<span class="hljs-built_in">title</span>(<span class="hljs-string">'æ­¥éª¤7: å­¦ä¹ æ›²çº¿ - è®­ç»ƒè¯¯å·® vs æµ‹è¯•è¯¯å·®'</span>, fontsize=<span class="hljs-number">14</span>, fontweight=<span class="hljs-string">'bold'</span>)
plt.<span class="hljs-built_in">legend</span>()
plt.<span class="hljs-built_in">grid</span>(True, alpha=<span class="hljs-number">0.3</span>)
plt.<span class="hljs-built_in">tight_layout</span>()
plt.<span class="hljs-built_in">show</span>()

<span class="hljs-built_in">print</span>(<span class="hljs-string">"å­¦ä¹ æ›²çº¿åˆ†æ:"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- è®­ç»ƒè¯¯å·®éšæ¨¡å‹å¤æ‚åº¦å¢åŠ è€ŒæŒç»­ä¸‹é™"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- æµ‹è¯•è¯¯å·®å…ˆä¸‹é™åä¸Šå‡ï¼Œå½¢æˆå…¸å‹çš„Uå½¢æ›²çº¿"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- æœ€ä¼˜æ¨¡å‹å¤æ‚åº¦åœ¨æµ‹è¯•è¯¯å·®æœ€ä½ç‚¹ï¼Œè¿™é‡Œæ˜¯4æ¬¡å¤šé¡¹å¼"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- 15æ¬¡å¤šé¡¹å¼è¡¨ç°å‡ºæ˜æ˜¾çš„è¿‡æ‹Ÿåˆï¼ˆè®­ç»ƒè¯¯å·®ä½ä½†æµ‹è¯•è¯¯å·®é«˜ï¼‰"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"- æ­£åˆ™åŒ–æœ‰åŠ©äºå‡å°‘è¿‡æ‹Ÿåˆï¼Œä½¿æµ‹è¯•è¯¯å·®é™ä½"</span>)
</code></pre>
<p><strong>æ­¥éª¤7åˆ†æï¼š</strong></p>
<ul>
<li>å­¦ä¹ æ›²çº¿å±•ç¤ºäº†æ¨¡å‹å¤æ‚åº¦ä¸è¯¯å·®ä¹‹é—´çš„å…³ç³»</li>
<li>è®­ç»ƒè¯¯å·®éšå¤æ‚åº¦å¢åŠ è€ŒæŒç»­ä¸‹é™ï¼Œå¤æ‚æ¨¡å‹å¯ä»¥æ›´å¥½åœ°æ‹Ÿåˆè®­ç»ƒæ•°æ®</li>
<li>æµ‹è¯•è¯¯å·®å…ˆä¸‹é™åä¸Šå‡ï¼Œè¡¨æ˜å­˜åœ¨æœ€ä¼˜çš„æ¨¡å‹å¤æ‚åº¦</li>
<li>4æ¬¡å¤šé¡¹å¼ä½äºæµ‹è¯•è¯¯å·®çš„æœ€ä½ç‚¹ï¼Œæ˜¯åå·®-æ–¹å·®æƒè¡¡çš„æœ€ä½³å¹³è¡¡ç‚¹</li>
<li>15æ¬¡å¤šé¡¹å¼è¡¨ç°å‡ºæ˜æ˜¾çš„è¿‡æ‹Ÿåˆç°è±¡</li>
<li>è¿™ä¸ªå›¾è¡¨ç›´è§‚åœ°å±•ç¤ºäº†åå·®-æ–¹å·®æƒè¡¡çš„åŸç†</li>
</ul>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<blockquote>
<p>æ­¥éª¤7: å­¦ä¹ æ›²çº¿åˆ†æ<br/>
--------------------------------------------------<br/>
å­¦ä¹ æ›²çº¿åˆ†æ:<br/>
- è®­ç»ƒè¯¯å·®éšæ¨¡å‹å¤æ‚åº¦å¢åŠ è€ŒæŒç»­ä¸‹é™<br/>
- æµ‹è¯•è¯¯å·®å…ˆä¸‹é™åä¸Šå‡ï¼Œå½¢æˆå…¸å‹çš„Uå½¢æ›²çº¿<br/>
- æœ€ä¼˜æ¨¡å‹å¤æ‚åº¦åœ¨æµ‹è¯•è¯¯å·®æœ€ä½ç‚¹ï¼Œè¿™é‡Œæ˜¯4æ¬¡å¤šé¡¹å¼<br/>
- 15æ¬¡å¤šé¡¹å¼è¡¨ç°å‡ºæ˜æ˜¾çš„è¿‡æ‹Ÿåˆï¼ˆè®­ç»ƒè¯¯å·®ä½ä½†æµ‹è¯•è¯¯å·®é«˜ï¼‰<br/>
- æ­£åˆ™åŒ–æœ‰åŠ©äºå‡å°‘è¿‡æ‹Ÿåˆï¼Œä½¿æµ‹è¯•è¯¯å·®é™ä½</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4be6f7d049f406ba95c99df01bf82c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767494753&amp;x-signature=j98pcRchh7bK4Z0TEl0FwiqIMHU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-19">ç¬¬å…«æ­¥ï¼šç»¼åˆæ€»ç»“ä¸æ¨¡å‹é€‰æ‹©å»ºè®®</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">print</span>("\n" + "=" * <span class="hljs-number">70</span>)
<span class="hljs-built_in">print</span>("æ­¥éª¤<span class="hljs-number">8</span>: ç»¼åˆæ€»ç»“ä¸æ¨¡å‹é€‰æ‹©å»ºè®®")
<span class="hljs-built_in">print</span>("=" * <span class="hljs-number">70</span>)

# æ‰¾å‡ºæœ€ä½³æ¨¡å‹
best_model = <span class="hljs-built_in">min</span>(results.items(), key=lambda x: x[<span class="hljs-number">1</span>][<span class="hljs-string">'total_error'</span>])[<span class="hljs-number">0</span>]
<span class="hljs-built_in">print</span>(f<span class="hljs-string">"æ ¹æ®æ€»è¯¯å·®ï¼Œæœ€ä½³æ¨¡å‹æ˜¯: {best_model}"</span>)

# åˆ›å»ºæ€»ç»“å›¾è¡¨
fig, (ax1, ax2) = plt.<span class="hljs-built_in">subplots</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, figsize=(<span class="hljs-number">15</span>, <span class="hljs-number">6</span>))

# å­å›¾<span class="hljs-number">1</span>: åå·®-æ–¹å·®åˆ†è§£æ€»ç»“
components = [<span class="hljs-string">'åå·®Â²'</span>, <span class="hljs-string">'æ–¹å·®'</span>, <span class="hljs-string">'å™ªå£°'</span>]
model_colors = [<span class="hljs-string">'red'</span>, <span class="hljs-string">'orange'</span>, <span class="hljs-string">'blue'</span>, <span class="hljs-string">'green'</span>]

for i, name in <span class="hljs-built_in">enumerate</span>(model_names):
    bias_ratio = results[name][<span class="hljs-string">'bias_squared'</span>] / results[name][<span class="hljs-string">'total_error'</span>]
    variance_ratio = results[name][<span class="hljs-string">'variance'</span>] / results[name][<span class="hljs-string">'total_error'</span>]
    noise_ratio = results[name][<span class="hljs-string">'noise'</span>] / results[name][<span class="hljs-string">'total_error'</span>]
    
    ratios = [bias_ratio, variance_ratio, noise_ratio]
    
    ax1.<span class="hljs-built_in">bar</span>(np.<span class="hljs-built_in">arange</span>(<span class="hljs-built_in">len</span>(components)) + i*<span class="hljs-number">0.2</span>, ratios, width=<span class="hljs-number">0.2</span>, 
            label=name, color=model_colors[i], alpha=<span class="hljs-number">0.7</span>)

ax1.<span class="hljs-built_in">set_xlabel</span>(<span class="hljs-string">'è¯¯å·®æˆåˆ†'</span>)
ax1.<span class="hljs-built_in">set_ylabel</span>(<span class="hljs-string">'æ¯”ä¾‹'</span>)
ax1.<span class="hljs-built_in">set_title</span>(<span class="hljs-string">'å„æ¨¡å‹è¯¯å·®æˆåˆ†æ¯”ä¾‹'</span>, fontweight=<span class="hljs-string">'bold'</span>)
ax1.<span class="hljs-built_in">set_xticks</span>(np.<span class="hljs-built_in">arange</span>(<span class="hljs-built_in">len</span>(components)) + <span class="hljs-number">0.3</span>)
ax1.<span class="hljs-built_in">set_xticklabels</span>(components)
ax1.<span class="hljs-built_in">legend</span>()
ax1.<span class="hljs-built_in">grid</span>(True, alpha=<span class="hljs-number">0.3</span>)

# å­å›¾<span class="hljs-number">2</span>: æ¨¡å‹é€‰æ‹©å»ºè®®
recommendations = []
for name in model_names:
    bias_ratio = results[name][<span class="hljs-string">'bias_squared'</span>] / results[name][<span class="hljs-string">'total_error'</span>]
    variance_ratio = results[name][<span class="hljs-string">'variance'</span>] / results[name][<span class="hljs-string">'total_error'</span>]
    
    if bias_ratio &gt; <span class="hljs-number">0.6</span>:
        rec = <span class="hljs-string">"é«˜åå·®\nå¢åŠ å¤æ‚åº¦"</span>
        color = <span class="hljs-string">'red'</span>
    elif variance_ratio &gt; <span class="hljs-number">0.6</span>:
        rec = <span class="hljs-string">"é«˜æ–¹å·®\nä½¿ç”¨æ­£åˆ™åŒ–"</span>
        color = <span class="hljs-string">'blue'</span>
    else:
        rec = <span class="hljs-string">"å¹³è¡¡\nè¡¨ç°è‰¯å¥½"</span>
        color = <span class="hljs-string">'green'</span>
    
    recommendations.<span class="hljs-built_in">append</span>(rec)

bars = ax2.<span class="hljs-built_in">bar</span>(model_names, total_error_vals, color=model_colors, alpha=<span class="hljs-number">0.7</span>)
ax2.<span class="hljs-built_in">set_ylabel</span>(<span class="hljs-string">'æ€»è¯¯å·®'</span>)
ax2.<span class="hljs-built_in">set_title</span>(<span class="hljs-string">'æ¨¡å‹é€‰æ‹©å»ºè®® (åŸºäºæ€»è¯¯å·®)'</span>, fontweight=<span class="hljs-string">'bold'</span>)
ax2.<span class="hljs-built_in">set_xticklabels</span>(model_names, rotation=<span class="hljs-number">45</span>)

# æ·»åŠ å»ºè®®æ ‡æ³¨
for i, (bar, rec) in <span class="hljs-built_in">enumerate</span>(<span class="hljs-built_in">zip</span>(bars, recommendations)):
    ax2.<span class="hljs-built_in">text</span>(bar.<span class="hljs-built_in">get_x</span>() + bar.<span class="hljs-built_in">get_width</span>()/<span class="hljs-number">2</span>, bar.<span class="hljs-built_in">get_height</span>() + <span class="hljs-number">0.01</span>, 
             rec, ha=<span class="hljs-string">'center'</span>, va=<span class="hljs-string">'bottom'</span>, fontweight=<span class="hljs-string">'bold'</span>)

ax2.<span class="hljs-built_in">grid</span>(True, alpha=<span class="hljs-number">0.3</span>)

plt.<span class="hljs-built_in">tight_layout</span>()
plt.<span class="hljs-built_in">show</span>()

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ¨¡å‹é€‰æ‹©å»ºè®®:"</span>)
for name in model_names:
    bias_ratio = results[name][<span class="hljs-string">'bias_squared'</span>] / results[name][<span class="hljs-string">'total_error'</span>]
    variance_ratio = results[name][<span class="hljs-string">'variance'</span>] / results[name][<span class="hljs-string">'total_error'</span>]
    
    <span class="hljs-built_in">print</span>(f<span class="hljs-string">"\n{name}:"</span>)
    if bias_ratio &gt; <span class="hljs-number">0.6</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"  â†’ ä¸»è¦é—®é¢˜: é«˜åå·® (æ¬ æ‹Ÿåˆ)"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"  â†’ å»ºè®®: å¢åŠ æ¨¡å‹å¤æ‚åº¦ï¼Œæ·»åŠ æ›´å¤šç‰¹å¾"</span>)
    elif variance_ratio &gt; <span class="hljs-number">0.6</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"  â†’ ä¸»è¦é—®é¢˜: é«˜æ–¹å·® (è¿‡æ‹Ÿåˆ)"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"  â†’ å»ºè®®: ä½¿ç”¨æ­£åˆ™åŒ–ï¼Œå¢åŠ è®­ç»ƒæ•°æ®ï¼Œå‡å°‘ç‰¹å¾"</span>)
    else:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"  â†’ çŠ¶æ€: åå·®å’Œæ–¹å·®ç›¸å¯¹å¹³è¡¡"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"  â†’ å»ºè®®: å½“å‰æ¨¡å‹è¡¨ç°è‰¯å¥½ï¼Œå¯å¾®è°ƒå‚æ•°"</span>)

<span class="hljs-built_in">print</span>(f<span class="hljs-string">"\næœ€ä½³æ¨¡å‹é€‰æ‹©: {best_model}"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ€»è¯¯å·®æœ€å°ï¼Œåœ¨åå·®å’Œæ–¹å·®ä¹‹é—´å–å¾—äº†æœ€ä½³å¹³è¡¡"</span>)
</code></pre>
<p><strong>æ­¥éª¤8åˆ†æï¼š</strong></p>
<ul>
<li>å·¦ä¾§å›¾è¡¨æ˜¾ç¤ºäº†æ¯ä¸ªæ¨¡å‹çš„è¯¯å·®æˆåˆ†æ¯”ä¾‹</li>
<li>å³ä¾§å›¾è¡¨æä¾›äº†åŸºäºåˆ†æç»“æœçš„æ¨¡å‹é€‰æ‹©å»ºè®®</li>
<li>çº¿æ€§æ¨¡å‹ä¸»è¦å—é«˜åå·®å½±å“ï¼Œå»ºè®®å¢åŠ å¤æ‚åº¦</li>
<li>15æ¬¡å¤šé¡¹å¼ä¸»è¦å—é«˜æ–¹å·®å½±å“ï¼Œå»ºè®®ä½¿ç”¨æ­£åˆ™åŒ–</li>
<li>4æ¬¡å¤šé¡¹å¼å’Œå¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼è¡¨ç°ç›¸å¯¹å¹³è¡¡</li>
<li>4æ¬¡å¤šé¡¹å¼æ˜¯æ€»è¯¯å·®æœ€å°çš„æ¨¡å‹ï¼Œæ˜¯æœ€ä½³é€‰æ‹©</li>
</ul>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<blockquote>
<p>æ­¥éª¤8: ç»¼åˆæ€»ç»“ä¸æ¨¡å‹é€‰æ‹©å»ºè®®<br/>
--------------------------------------------------<br/>
æ ¹æ®æ€»è¯¯å·®ï¼Œæœ€ä½³æ¨¡å‹æ˜¯: 4æ¬¡å¤šé¡¹å¼ (å¹³è¡¡)</p>
<p>æ¨¡å‹é€‰æ‹©å»ºè®®:</p>
<p>çº¿æ€§æ¨¡å‹ (é«˜åå·®):<br/>
â†’ ä¸»è¦é—®é¢˜: é«˜åå·® (æ¬ æ‹Ÿåˆ)<br/>
â†’ å»ºè®®: å¢åŠ æ¨¡å‹å¤æ‚åº¦ï¼Œæ·»åŠ æ›´å¤šç‰¹å¾</p>
<p>4æ¬¡å¤šé¡¹å¼ (å¹³è¡¡):<br/>
â†’ ä¸»è¦é—®é¢˜: é«˜åå·® (æ¬ æ‹Ÿåˆ)<br/>
â†’ å»ºè®®: å¢åŠ æ¨¡å‹å¤æ‚åº¦ï¼Œæ·»åŠ æ›´å¤šç‰¹å¾</p>
<p>15æ¬¡å¤šé¡¹å¼ (é«˜æ–¹å·®):<br/>
â†’ ä¸»è¦é—®é¢˜: é«˜æ–¹å·® (è¿‡æ‹Ÿåˆ)<br/>
â†’ å»ºè®®: ä½¿ç”¨æ­£åˆ™åŒ–ï¼Œå¢åŠ è®­ç»ƒæ•°æ®ï¼Œå‡å°‘ç‰¹å¾</p>
<p>å¸¦æ­£åˆ™åŒ–çš„15æ¬¡å¤šé¡¹å¼:<br/>
â†’ ä¸»è¦é—®é¢˜: é«˜åå·® (æ¬ æ‹Ÿåˆ)<br/>
â†’ å»ºè®®: å¢åŠ æ¨¡å‹å¤æ‚åº¦ï¼Œæ·»åŠ æ›´å¤šç‰¹å¾</p>
<p>æœ€ä½³æ¨¡å‹é€‰æ‹©: 4æ¬¡å¤šé¡¹å¼ (å¹³è¡¡)<br/>
æ€»è¯¯å·®æœ€å°ï¼Œåœ¨åå·®å’Œæ–¹å·®ä¹‹é—´å–å¾—äº†æœ€ä½³å¹³è¡¡</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/baa19afe01ec4f42a53b320877fc4ba8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b285bK46Iqx5byA5LqG5ZCX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767494753&amp;x-signature=GRkP2r31nGrP89CjIsksKqTVed8%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-20">ç¤ºä¾‹æ€»ç»“</h3>
<p>é€šè¿‡è¿™8ä¸ªæ­¥éª¤çš„è¯¦ç»†åˆ†æï¼Œæˆ‘ä»¬å…¨é¢ç†è§£äº†åå·®-æ–¹å·®åˆ†è§£ï¼š</p>
<p><strong>1. åå·®ï¼šæ¨¡å‹é¢„æµ‹çš„å¹³å‡å€¼ä¸çœŸå®å€¼ä¹‹é—´çš„å·®å¼‚</strong></p>
<ul>
<li>é«˜åå·®æ¨¡å‹è¿‡äºç®€å•ï¼Œæ— æ³•æ•æ‰æ•°æ®ä¸­çš„å¤æ‚æ¨¡å¼</li>
<li>è¡¨ç°ä¸ºæ¬ æ‹Ÿåˆï¼Œè®­ç»ƒè¯¯å·®å’Œæµ‹è¯•è¯¯å·®éƒ½è¾ƒé«˜</li>
</ul>
<p><strong>2. æ–¹å·®ï¼šæ¨¡å‹å¯¹è®­ç»ƒæ•°æ®å˜åŒ–çš„æ•æ„Ÿæ€§</strong></p>
<ul>
<li>é«˜æ–¹å·®æ¨¡å‹è¿‡äºå¤æ‚ï¼Œè¿‡åº¦æ‹Ÿåˆè®­ç»ƒæ•°æ®ä¸­çš„å™ªå£°</li>
<li>è¡¨ç°ä¸ºè¿‡æ‹Ÿåˆï¼Œè®­ç»ƒè¯¯å·®ä½ä½†æµ‹è¯•è¯¯å·®é«˜</li>
</ul>
<p>**3. å™ªå£°ï¼š**æ•°æ®ä¸­å›ºæœ‰çš„éšæœºè¯¯å·®ï¼Œæ— æ³•é€šè¿‡æ¨¡å‹å‡å°‘</p>
<p><strong>4. åå·®-æ–¹å·®æƒè¡¡ï¼š</strong></p>
<ul>
<li>ç®€å•æ¨¡å‹ï¼šé«˜åå·®ï¼Œä½æ–¹å·®</li>
<li>å¤æ‚æ¨¡å‹ï¼šä½åå·®ï¼Œé«˜æ–¹å·®</li>
<li>ç›®æ ‡ï¼šæ‰¾åˆ°å¹³è¡¡ç‚¹ï¼Œä½¿æ€»è¯¯å·®æœ€å°</li>
</ul>
<p><strong>5. å®é™…åº”ç”¨ï¼š</strong></p>
<ul>
<li>è¯Šæ–­æ¨¡å‹é—®é¢˜æ˜¯æ¬ æ‹Ÿåˆè¿˜æ˜¯è¿‡æ‹Ÿåˆ</li>
<li>æŒ‡å¯¼æ¨¡å‹é€‰æ‹©å’Œè°ƒä¼˜ç­–ç•¥</li>
<li>è®¾ç½®åˆç†çš„æ€§èƒ½æœŸæœ›</li>
</ul>
<p>è¿™ä¸ªé€æ­¥åˆ†æè¿‡ç¨‹å±•ç¤ºäº†å¦‚ä½•é€šè¿‡åå·®-æ–¹å·®åˆ†è§£æ¥æ·±å…¥ç†è§£æ¨¡å‹è¡Œä¸ºï¼Œå¹¶åšå‡ºæ›´æ˜æ™ºçš„å»ºæ¨¡å†³ç­–ã€‚</p>
<h2 data-id="heading-21">å…­ã€åå·®-æ–¹å·®æƒè¡¡</h2>
<p>è¯´æ˜åå·®-æ–¹å·®æƒè¡¡ä¹‹å‰ï¼Œå…ˆè¦äº†è§£æ¸…æ¥šå®ƒä¸åå·®-æ–¹å·®åˆ†è§£çš„åŒºåˆ«ï¼Œä¸¤è€…æ˜¯å®Œå…¨ä¸åŒçš„æ¦‚å¿µã€‚</p>
<h3 data-id="heading-22">1. æ ¸å¿ƒåŒºåˆ«</h3>
<p><strong>1.1 åå·®-æ–¹å·®åˆ†è§£ï¼š</strong></p>
<ul>
<li>**åŸºç¡€ç†è§£ï¼š**æ˜¯ä¸€ä¸ªæ•°å­¦å®šç†æˆ–åˆ†ææ¡†æ¶</li>
<li>**ä½œç”¨ï¼š**å°†æ¨¡å‹çš„æœŸæœ›è¯¯å·®åˆ†è§£ä¸ºä¸‰ä¸ªæ˜ç¡®ç»„æˆéƒ¨åˆ†</li>
<li>**å…³æ³¨ç‚¹ï¼š**è¯¯å·®çš„æ¥æºåˆ†æå’Œå®šé‡è®¡ç®—</li>
</ul>
<p><strong>1.2 åå·®-æ–¹å·®æƒè¡¡ï¼š</strong></p>
<ul>
<li>**åŸºç¡€ç†è§£ï¼š**æ˜¯ä¸€ä¸ªç°è±¡æˆ–è®¾è®¡åŸåˆ™</li>
<li>**ä½œç”¨ï¼š**æè¿°æ¨¡å‹å¤æ‚åº¦ä¸æ³›åŒ–æ€§èƒ½ä¹‹é—´çš„æƒè¡¡å…³ç³»</li>
<li>**å…³æ³¨ç‚¹ï¼š**æ¨¡å‹é€‰æ‹©çš„ç­–ç•¥æŒ‡å¯¼</li>
</ul>
<h3 data-id="heading-23">2. æ·±å…¥ç†è§£</h3>
<p><strong>2.1 åå·®-æ–¹å·®åˆ†è§£ï¼š</strong></p>
<ul>
<li>**å…¬å¼è¡¨è¾¾ï¼š**æ€»è¯¯å·® = åå·®Â² + æ–¹å·® + å™ªå£°</li>
<li>**æ ¸å¿ƒæ€æƒ³ï¼š**ä»»ä½•ç›‘ç£å­¦ä¹ æ¨¡å‹çš„æœŸæœ›æ³›åŒ–è¯¯å·®éƒ½å¯ä»¥è¢«åˆ†è§£ä¸ºè¿™ä¸‰ä¸ªä¸å¯çº¦ç®€çš„ç»„æˆéƒ¨åˆ†ã€‚</li>
<li><strong>åº”ç”¨åœºæ™¯ï¼š</strong>
<ul>
<li>è¯Šæ–­æ¨¡å‹é—®é¢˜çš„å…·ä½“æ¥æº</li>
<li>å®šé‡åˆ†æä¸åŒè¯¯å·®æˆåˆ†çš„è´¡çŒ®åº¦</li>
<li>ç†è§£æ¨¡å‹çš„ç†è®ºæ€§èƒ½ç•Œé™</li>
</ul>
</li>
</ul>
<p><strong>2.2 åå·®-æ–¹å·®æƒè¡¡ï¼š</strong></p>
<ul>
<li><strong>æ ¸å¿ƒç°è±¡ï¼š</strong>
<ul>
<li>éšç€æ¨¡å‹å¤æ‚åº¦å¢åŠ ï¼š</li>
<li>- åå·® â†“ (æ¨¡å‹æ›´èƒ½æ‹Ÿåˆè®­ç»ƒæ•°æ®)</li>
<li>- æ–¹å·® â†‘ (æ¨¡å‹å¯¹æ•°æ®å˜åŒ–æ›´æ•æ„Ÿ)</li>
<li>- æ€»è¯¯å·®å…ˆâ†“åâ†‘ (å­˜åœ¨æœ€ä¼˜å¤æ‚åº¦ç‚¹)</li>
</ul>
</li>
<li><strong>åº”ç”¨åœºæ™¯ï¼š</strong>
<ul>
<li>æŒ‡å¯¼æ¨¡å‹å¤æ‚åº¦é€‰æ‹©</li>
<li>åˆ¶å®šæ­£åˆ™åŒ–ç­–ç•¥</li>
<li>å¹³è¡¡è¿‡æ‹Ÿåˆä¸æ¬ æ‹Ÿåˆ</li>
</ul>
</li>
</ul>
<h3 data-id="heading-24">3. å…³ç³»å›¾ç¤º</h3>
<pre><code class="hljs language-scss" lang="scss">åå·®-æ–¹å·®åˆ†è§£
    â†“ (æä¾›ç†è®ºåŸºç¡€)
è¯¯å·®æˆåˆ†åˆ†æ
    â†“ (æ­ç¤ºå†…åœ¨è§„å¾‹)  
åå·®-æ–¹å·®æƒè¡¡ç°è±¡
    â†“ (æŒ‡å¯¼å®è·µåº”ç”¨)
æ¨¡å‹é€‰æ‹©ä¸ä¼˜åŒ–
</code></pre>
<h3 data-id="heading-25">4. åœºæ™¯å‰–æ</h3>
<h4 data-id="heading-26">1. å¤šé¡¹å¼å›å½’</h4>
<p><strong>1.1 ä½¿ç”¨åå·®-æ–¹å·®åˆ†è§£ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># åˆ†æä¸€ä¸ª15æ¬¡å¤šé¡¹å¼æ¨¡å‹çš„è¯¯å·®æ¥æº</span>
biasÂ² = 0.02    <span class="hljs-comment"># åå·®å¹³æ–¹ï¼šæ¨¡å‹å¹³å‡é¢„æµ‹ä¸çœŸå®å‡½æ•°çš„å·®å¼‚</span>
<span class="hljs-attr">variance</span> = <span class="hljs-number">0.35</span> <span class="hljs-comment"># æ–¹å·®ï¼šä¸åŒè®­ç»ƒé›†ä¸Šé¢„æµ‹çš„æ³¢åŠ¨</span>
<span class="hljs-attr">noise</span> = <span class="hljs-number">0.09</span>    <span class="hljs-comment"># å™ªå£°ï¼šæ•°æ®ä¸­çš„éšæœºè¯¯å·®</span>
<span class="hljs-attr">total_error</span> = <span class="hljs-number">0.46</span>  <span class="hljs-comment"># æ€»è¯¯å·® = 0.02 + 0.35 + 0.09</span>
</code></pre>
<p>**ç»“è®ºï¼š**è¯¥æ¨¡å‹ä¸»è¦é—®é¢˜æ˜¯é«˜æ–¹å·®ï¼ˆè¿‡æ‹Ÿåˆï¼‰</p>
<p><strong>1.2 ä½¿ç”¨åå·®-æ–¹å·®æƒè¡¡ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># æ¯”è¾ƒä¸åŒå¤æ‚åº¦æ¨¡å‹çš„æƒè¡¡å…³ç³»</span>
æ¨¡å‹å¤æ‚åº¦: <span class="hljs-section">[1æ¬¡, 4æ¬¡, 15æ¬¡]</span>
åå·®:      <span class="hljs-section">[0.45, 0.08, 0.02]</span>  <span class="hljs-comment"># éšå¤æ‚åº¦å¢åŠ è€Œå‡å°‘</span>
æ–¹å·®:      <span class="hljs-section">[0.04, 0.12, 0.35]</span>  <span class="hljs-comment"># éšå¤æ‚åº¦å¢åŠ è€Œå¢åŠ </span>
æ€»è¯¯å·®:    <span class="hljs-section">[0.58, 0.29, 0.46]</span>  <span class="hljs-comment"># å…ˆå‡å°‘åå¢åŠ </span>
</code></pre>
<p>**ç»“è®ºï¼š**4æ¬¡å¤šé¡¹å¼åœ¨åå·®å’Œæ–¹å·®ä¹‹é—´å–å¾—äº†æœ€ä½³å¹³è¡¡</p>
<h4 data-id="heading-27">2. å¤§æ¨¡å‹çš„è®­ç»ƒ</h4>
<p><strong>2.1 åå·®-æ–¹å·®åˆ†è§£è§†è§’ï¼š</strong></p>
<ul>
<li>åˆ†ææ¨¡å‹åœ¨ç‰¹å®šä»»åŠ¡ä¸Šçš„é”™è¯¯ç±»å‹</li>
<li>ç¡®å®šé”™è¯¯ä¸»è¦æ˜¯ç”±äºçŸ¥è¯†ç¼ºä¹ï¼ˆé«˜åå·®ï¼‰è¿˜æ˜¯ä¸ä¸€è‡´æ€§ï¼ˆé«˜æ–¹å·®ï¼‰</li>
<li>ä¸ºé’ˆå¯¹æ€§æ”¹è¿›æä¾›ä¾æ®</li>
</ul>
<p><strong>2.2 åå·®-æ–¹å·®æƒè¡¡è§†è§’ï¼š</strong></p>
<ul>
<li>å†³å®šé¢„è®­ç»ƒçš„æ•°æ®é‡å’Œæ¨¡å‹å‚æ•°é‡</li>
<li>è°ƒæ•´å¾®è°ƒé˜¶æ®µçš„å­¦ä¹ ç‡å’Œæ­£åˆ™åŒ–å¼ºåº¦</li>
<li>åœ¨æ¨¡å‹èƒ½åŠ›å’Œæ³›åŒ–æ€§èƒ½ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ç‚¹</li>
</ul>
<h3 data-id="heading-28">5. å·®å¼‚æ€»ç»“</h3>
<ul>
<li>åå·®-æ–¹å·®åˆ†è§£æ˜¯"è§£å‰–åˆ†æ"â€”â€”æŠŠè¯¯å·®æ‹†å¼€çœ‹çœ‹é‡Œé¢æœ‰ä»€ä¹ˆ</li>
<li>åå·®-æ–¹å·®æƒè¡¡æ˜¯"å¯¼èˆªæŒ‡å¯¼"â€”â€”å‘Šè¯‰ä½ åº”è¯¥å¾€å“ªä¸ªæ–¹å‘èµ°</li>
</ul>
<h2 data-id="heading-29">ä¸ƒã€æ€»ç»“</h2>
<p>é€šè¿‡åå·®-æ–¹å·®çš„è§†è§’ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ¸…æ™°åœ°çœ‹åˆ°å¤§æ¨¡å‹ä»æ­»è®°ç¡¬èƒŒåˆ°çœŸæ­£ç†è§£çš„æ¼”è¿›è·¯å¾„ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸æ˜¯ç®€å•çš„çº¿æ€§è¿›æ­¥ï¼Œè€Œæ˜¯åœ¨ä¸åŒå­¦ä¹ æ¨¡å¼é—´çš„åŠ¨æ€å¹³è¡¡ã€‚çœŸæ­£ç†è§£çš„æœ¬è´¨ï¼Œæ˜¯åœ¨ä¿æŒå¯¹åŸºç¡€çŸ¥è¯†å‡†ç¡®æŒæ¡ï¼ˆä½åå·®ï¼‰çš„åŒæ—¶ï¼Œå…·å¤‡çµæ´»åº”ç”¨å’Œåˆ›é€ æ€§æ€ç»´çš„èƒ½åŠ›ï¼ˆé€‚åº¦æ–¹å·®ï¼‰ã€‚è¿™å°±åƒä¸€ä½ä¼˜ç§€çš„å­¦è€…ï¼Œæ—¢è¦æœ‰æ‰å®çš„ä¸“ä¸šåŸºç¡€ï¼Œåˆè¦æœ‰åˆ›æ–°çš„æ€ç»´æ–¹å¼ã€‚</p>
<p>å½“æˆ‘ä»¬è®­ç»ƒå’Œä½¿ç”¨å¤§æ¨¡å‹æ—¶ï¼Œåº”è¯¥æ—¶åˆ»å…³æ³¨è¿™ä¸ªå¹³è¡¡ç‚¹ï¼š</p>
<ul>
<li>é¿å…æ¨¡å‹é™·å…¥æœºæ¢°è®°å¿†çš„é™·é˜±ï¼ˆé«˜åå·®ï¼‰</li>
<li>é˜²æ­¢æ¨¡å‹èµ°å‘è¿‡åº¦å‘æ•£çš„æç«¯ï¼ˆé«˜æ–¹å·®ï¼‰</li>
<li>è¿½æ±‚æ·±åº¦ç†è§£ä¸ç¨³å®šè¡¨ç°çš„ç»Ÿä¸€ï¼ˆæœ€ä½³å¹³è¡¡ï¼‰</li>
</ul>
<p>åœ¨è¿™ä¸ªæ„ä¹‰ä¸Šï¼Œåå·®-æ–¹å·®ç†è®ºä¸ä»…æ˜¯ä¸€ä¸ªæŠ€æœ¯æ¡†æ¶ï¼Œæ›´æ˜¯ä¸€ç§ç†è§£æ™ºèƒ½æœ¬è´¨çš„å“²å­¦è§†è§’ã€‚å®ƒå‘Šè¯‰æˆ‘ä»¬ï¼ŒçœŸæ­£çš„æ™ºèƒ½æ—¢ä¸æ˜¯ç®€å•çš„æ¨¡å¼è¯†åˆ«ï¼Œä¹Ÿä¸æ˜¯æ— çº¦æŸçš„éšæœºå‘æ•£ï¼Œè€Œæ˜¯åœ¨çº¦æŸä¸è‡ªç”±ã€ç¡®å®šä¸ä¸ç¡®å®šä¹‹é—´æ‰¾åˆ°çš„å¾®å¦™å¹³è¡¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸æ­¢æ˜¯ä»£ç å †æ”¾ï¼šå¸¦ä½ å…¨é¢æŒæ¡ Monorepo æ ¸å¿ƒæŠ€æœ¯ä¸é€‰å‹]]></title>    <link>https://juejin.cn/post/7588109656041144366</link>    <guid>https://juejin.cn/post/7588109656041144366</guid>    <pubDate>2025-12-28T03:43:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588109656041144366" data-draft-id="7588080521445851182" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸æ­¢æ˜¯ä»£ç å †æ”¾ï¼šå¸¦ä½ å…¨é¢æŒæ¡ Monorepo æ ¸å¿ƒæŠ€æœ¯ä¸é€‰å‹"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-28T03:43:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜æœˆ_æ¸…é£"/> <meta itemprop="url" content="https://juejin.cn/user/1081575170131006"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸æ­¢æ˜¯ä»£ç å †æ”¾ï¼šå¸¦ä½ å…¨é¢æŒæ¡ Monorepo æ ¸å¿ƒæŠ€æœ¯ä¸é€‰å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1081575170131006/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜æœˆ_æ¸…é£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T03:43:26.000Z" title="Sun Dec 28 2025 03:43:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‰ç«¯å·¥ç¨‹åŒ–æ—¥ç›Šå¤æ‚çš„ä»Šå¤©ï¼Œå¾ˆå¤šå¼€å‘è€…å¯¹ <strong>Monorepo</strong> çš„ç¬¬ä¸€å°è±¡å¾€å¾€æ˜¯ï¼šâ€œä¸å°±æ˜¯æŠŠå¥½å‡ ä¸ªé¡¹ç›®çš„ä»£ç å¡è¿›ä¸€ä¸ª Git ä»“åº“å—ï¼Ÿâ€</p>
<p>å¦‚æœä»…ä»…æ˜¯â€œç‰©ç†å †æ”¾â€ï¼Œé‚£ä¸ä»…ä¸èƒ½ææ•ˆï¼Œåè€Œä¼šå¸¦æ¥æƒé™æ··ä¹±å’Œæ„å»ºç¼“æ…¢çš„ç¾éš¾ã€‚çœŸæ­£çš„ Monorepo æ˜¯ä¸€å¥—<strong>å·¥ç¨‹åŒ–ç®¡ç†æ–¹æ¡ˆ</strong>ï¼Œå®ƒé€šè¿‡ç²¾å¦™çš„å·¥å…·é“¾ï¼Œè§£å†³äº†å¤šé¡¹ç›®åä½œä¸­ä»£ç å¤ç”¨ã€ä¾èµ–åŒæ­¥å’Œç‰ˆæœ¬ç®¡ç†çš„ç—›ç‚¹ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ Monorepoï¼Ÿ</h2>
<p>åœ¨ä¼ ç»Ÿçš„ <strong>Multirepo</strong>ï¼ˆå¤šä»“åº“ï¼‰æ¨¡å¼ä¸‹ï¼Œå¦‚æœä½ ç»´æŠ¤ç€ä¸€ä¸ªç»„ä»¶åº“ <code>UI-Lib</code> å’Œä¸‰ä¸ªä¸šåŠ¡é¡¹ç›®ï¼Œæµç¨‹é€šå¸¸æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>ä¿®æ”¹ <code>UI-Lib</code> çš„ä»£ç ã€‚</li>
<li>æ›´æ–°ç‰ˆæœ¬å·ï¼Œå‘å¸ƒåˆ° npmã€‚</li>
<li>åˆ°ä¸‰ä¸ªä¸šåŠ¡é¡¹ç›®ä¸­åˆ†åˆ«æ‰§è¡Œ <code>npm update</code>ã€‚</li>
<li>å¦‚æœå‘ç° Bugï¼Œé‡å¤ä¸Šè¿°æ­¥éª¤â€¦â€¦</li>
</ol>
<p>è¿™ç§â€œå‘å¸ƒ-æ‹‰å–â€çš„å¾ªç¯æå¤§åœ°æµªè´¹äº†å¼€å‘æ—¶é—´ã€‚è€Œ <strong>Monorepo</strong> å°†å®ƒä»¬ç½®äºåŒä¸€å·¥ä½œåŒºï¼š</p>
<ul>
<li><strong>å®æ—¶åé¦ˆ</strong>ï¼šä¿®æ”¹ç»„ä»¶åº“ï¼Œä¸šåŠ¡é¡¹ç›®ç«‹å³ç”Ÿæ•ˆï¼Œæ— éœ€å‘å¸ƒ npmã€‚</li>
<li><strong>åŸå­é‡æ„</strong>ï¼šå½“ä½ éœ€è¦æ”¹åŠ¨ä¸€ä¸ªæ ¸å¿ƒæ¥å£æ—¶ï¼Œå¯ä»¥åœ¨åŒä¸€ä¸ª Commit ä¸­ä¿®æ”¹æ‰€æœ‰å—å½±å“çš„å­é¡¹ç›®ï¼Œç¡®ä¿ç³»ç»Ÿå§‹ç»ˆå¤„äºå¯ç”¨çŠ¶æ€ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-1">äºŒã€ æ ¸å¿ƒæŠ€æœ¯ï¼šæ”¯æ’‘ Monorepo çš„ä¸‰æ ¹æ”¯æŸ±</h2>
<p>è¦ç©è½¬ Monorepoï¼Œä½ å¿…é¡»æŒæ¡ä»¥ä¸‹ä¸‰ä¸ªå±‚é¢çš„æŠ€æœ¯é€‰å‹ï¼š</p>
<h3 data-id="heading-2">1. ä¾èµ–ç®¡ç†å±‚ï¼ˆWorkspacesï¼‰</h3>
<p>è¿™æ˜¯ Monorepo çš„å¿ƒè„ã€‚å®ƒè´Ÿè´£å°†ä»“åº“å†…çš„å„ä¸ª Package äº’ç›¸â€œè½¯é“¾æ¥â€ï¼Œå¹¶ç»Ÿä¸€ç®¡ç†ç¬¬ä¸‰æ–¹ä¾èµ–ã€‚</p>
<ul>
<li><strong>pnpm Workspaces (é¦–é€‰)</strong> ï¼šé€šè¿‡å†…å®¹å¯»å€å­˜å‚¨ï¼Œæå¤§èŠ‚çœç£ç›˜ç©ºé—´ï¼Œå¹¶èƒ½ä¸¥æ ¼ç¦æ­¢æœªå£°æ˜çš„ä¾èµ–è®¿é—®ï¼ˆè§£å†³å¹»å½±ä¾èµ–é—®é¢˜ï¼‰ã€‚</li>
<li><strong>Yarn Workspaces</strong>ï¼šè€ç‰Œæ–¹æ¡ˆï¼Œç”Ÿæ€å®Œå–„ã€‚</li>
</ul>
<h3 data-id="heading-3">2. ä»»åŠ¡ç¼–æ’å±‚ï¼ˆBuild Pipelineï¼‰</h3>
<p>å½“ä»“åº“é‡Œæœ‰å‡ åä¸ªé¡¹ç›®æ—¶ï¼Œè¿è¡Œ <code>npm run build</code> å¦‚æœè¦ç­‰åŠå°æ—¶ï¼Œé‚£æ˜¯ä¸å¯æ¥å—çš„ã€‚æˆ‘ä»¬éœ€è¦â€œèªæ˜â€çš„å·¥å…·ï¼š</p>
<ul>
<li><strong>Turborepo</strong>ï¼šç”± Vercel å‡ºå“ã€‚æ ¸å¿ƒèƒ½åŠ›æ˜¯ <strong>æŒ‡çº¹ç¼“å­˜ï¼ˆHashingï¼‰</strong> â€”â€”å¦‚æœä»£ç æ²¡å˜ï¼Œç›´æ¥ä»ç¼“å­˜è¯»å–ç»“æœï¼›ä»¥åŠ <strong>å¹¶è¡Œæ‰§è¡Œ</strong>â€”â€”è‡ªåŠ¨åˆ†æä¾èµ–å›¾è°±ï¼Œè®©äº’ä¸å½±å“çš„é¡¹ç›®åŒæ—¶æ„å»ºã€‚</li>
<li><strong>Nx</strong>ï¼šåŠŸèƒ½æ›´å…¨é¢çš„â€œé‡å‹æ­¦å™¨â€ï¼Œæ”¯æŒå¯è§†åŒ–ä¾èµ–å›¾è°±åˆ†æï¼Œé€‚åˆå¯¹æ„å»ºæµç¨‹æœ‰æè‡´å®šåˆ¶åŒ–éœ€æ±‚çš„å¤§å‚ã€‚</li>
</ul>
<h3 data-id="heading-4">3. å‘å¸ƒä¸ç‰ˆæœ¬å±‚ï¼ˆVersioningï¼‰</h3>
<p>å¦‚ä½•å†³å®šå“ªä¸ªåŒ…éœ€è¦å‘ç‰ˆï¼Ÿå¦‚ä½•è‡ªåŠ¨ç”Ÿæˆ Changelogï¼Ÿ</p>
<ul>
<li><strong>Changesets</strong>ï¼šéå¸¸æ¨èã€‚å®ƒé€šè¿‡åœ¨ PR ä¸­æ·»åŠ æè¿°æ–‡ä»¶ï¼Œè‡ªåŠ¨åŒ–å¤„ç†ç‰ˆæœ¬æ›´æ–°å’Œå‘å¸ƒæµç¨‹ï¼Œå°¤å…¶é€‚åˆå¼€æºé¡¹ç›®æˆ–å¤šäººåä½œã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€ é€‰å‹æŒ‡å—ï¼šä½ çœŸçš„éœ€è¦å®ƒå—ï¼Ÿ</h2>
<p>Monorepo ä¸æ˜¯é“¶å¼¹ï¼Œå®ƒä¹Ÿæœ‰è‡ªå·±çš„â€œé€‚ç”¨è¾¹ç•Œâ€ï¼š</p>






























<table><thead><tr><th><strong>ç»´åº¦</strong></th><th><strong>å»ºè®®ä½¿ç”¨ Monorepo</strong></th><th><strong>å»ºè®®ä¿æŒ Multirepo</strong></th></tr></thead><tbody><tr><td><strong>é¡¹ç›®å…³è”åº¦</strong></td><td>å­˜åœ¨å¤§é‡å…±äº«ç»„ä»¶ã€å·¥å…·ç±»ã€ç±»å‹å®šä¹‰ã€‚</td><td>å„é¡¹ç›®ä¸šåŠ¡ç‹¬ç«‹ï¼Œå‡ ä¹æ²¡æœ‰ä»£ç äº¤é›†ã€‚</td></tr><tr><td><strong>æŠ€æœ¯æ ˆ</strong></td><td>ç»Ÿä¸€ä½¿ç”¨ React æˆ– Vueï¼Œè§„èŒƒä¸€è‡´ã€‚</td><td>æ··åˆäº†å¤šç§æ¡†æ¶æˆ–ä¸åŒå¹´ä»£çš„è€æ—§é¡¹ç›®ã€‚</td></tr><tr><td><strong>å›¢é˜Ÿè§„æ¨¡</strong></td><td>ä¸­å°å‹å›¢é˜Ÿï¼Œè¿½æ±‚å¿«é€Ÿè¿­ä»£ä¸ä½æ²Ÿé€šæˆæœ¬ã€‚</td><td>è·¨éƒ¨é—¨è¶…å¤§å‹å›¢é˜Ÿï¼Œå¯¹ä»£ç æƒé™æœ‰æå…¶ä¸¥æ ¼é™åˆ¶ã€‚</td></tr><tr><td><strong>æ„å»ºå‹åŠ›</strong></td><td>å…·å¤‡é…ç½® Turborepo ç­‰å·¥å…·çš„èƒ½åŠ›ã€‚</td><td>æ²¡æœ‰ä¸“äººç»´æŠ¤é…ç½®ï¼Œä¸æ„¿å¢åŠ æ„å»ºå·¥å…·å¤æ‚åº¦ã€‚</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-6">å››ã€ è½åœ°å»ºè®®ï¼šä» 0 åˆ° 1 çš„æœ€ä¼˜è·¯å¾„</h2>
<p>å¦‚æœä½ å‡†å¤‡åœ¨å›¢é˜Ÿè½åœ° Monorepoï¼Œå»ºè®®é‡‡ç”¨è¿™å¥—**â€œé»„é‡‘ç»„åˆâ€**ï¼š</p>
<ol>
<li><strong>åŒ…ç®¡ç†</strong>ï¼šä½¿ç”¨ <strong>pnpm</strong>ã€‚å®ƒçš„é€Ÿåº¦å’Œä¾èµ–å¤„ç†èƒ½åŠ›æ˜¯ç›®å‰ç¤¾åŒºçš„å…±è¯†ã€‚</li>
<li><strong>è„šæ‰‹æ¶</strong>ï¼šä½¿ç”¨ <strong>Turborepo</strong>ã€‚å®ƒçš„å­¦ä¹ æ›²çº¿æœ€å¹³ç¼“ï¼Œåªéœ€ä¸€ä¸ª <code>turbo.json</code> å°±èƒ½è®©æ„å»ºé€Ÿåº¦èµ·é£ã€‚</li>
<li><strong>è¯­è¨€</strong>ï¼šå…¨é‡å¼€å¯ <strong>TypeScript</strong>ã€‚Monorepo çš„æœ€å¤§ä¼˜åŠ¿ä¹‹ä¸€å°±æ˜¯è·¨é¡¹ç›®çš„ç±»å‹å®‰å…¨â€”â€”ä½ ä¿®æ”¹äº† A åŒ…çš„æ¥å£å®šä¹‰ï¼ŒB åŒ…åœ¨ç¼–è¯‘é˜¶æ®µå°±ä¼šç›´æ¥æŠ¥é”™ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-7">ç»“è¯­</h3>
<p>Monorepo çš„æœ¬è´¨æ˜¯å°†<strong>ç®¡ç†å¤æ‚åº¦</strong>è½¬åŒ–ä¸ºäº†<strong>å·¥å…·é“¾å¤æ‚åº¦</strong>ã€‚è™½ç„¶åˆæœŸé…ç½®éœ€è¦ä¸€å®šæˆæœ¬ï¼Œä½†å®ƒå¸¦æ¥çš„ååŒæ•ˆç‡å’Œä»£ç å¤ç”¨ç‡æ˜¯æ— å¯æ¯”æ‹Ÿçš„ã€‚</p>
<p><strong>ä½ æƒ³äº†è§£å¦‚ä½•ç”¨ pnpm + Turborepo æ­å»ºä¸€ä¸ªæœ€å°å¯è¿è¡Œçš„ Monorepo æ¨¡æ¿å—ï¼Ÿæˆ‘å¯ä»¥ä¸ºä½ æä¾›å…·ä½“çš„é…ç½®æ­¥éª¤ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangChain äºŒï¼šè¾“å‡ºç»“æœå®šåˆ¶ä¸å†å²ç®¡ç†èƒ½åŠ›è¯¦è§£]]></title>    <link>https://juejin.cn/post/7588084804093886502</link>    <guid>https://juejin.cn/post/7588084804093886502</guid>    <pubDate>2025-12-28T02:11:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588084804093886502" data-draft-id="7588069469516234793" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangChain äºŒï¼šè¾“å‡ºç»“æœå®šåˆ¶ä¸å†å²ç®¡ç†èƒ½åŠ›è¯¦è§£"/> <meta itemprop="keywords" content="LangChain,OpenAI,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-28T02:11:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xiaoxue_"/> <meta itemprop="url" content="https://juejin.cn/user/4065372122398027"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangChain äºŒï¼šè¾“å‡ºç»“æœå®šåˆ¶ä¸å†å²ç®¡ç†èƒ½åŠ›è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4065372122398027/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xiaoxue_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T02:11:10.000Z" title="Sun Dec 28 2025 02:11:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">LangChain äºŒï¼šè¾“å‡ºç»“æœå®šåˆ¶ä¸å†å²ç®¡ç†èƒ½åŠ›å¤§æ­ç§˜ âœ¨</h2>
<p>åœ¨ AI åº”ç”¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸é¢ä¸´ä¸¤ä¸ªæ ¸å¿ƒé—®é¢˜ï¼šå¦‚ä½•è®©å¤§æ¨¡å‹è¾“å‡ºç»“æ„åŒ–çš„å†…å®¹ï¼Ÿå¦‚ä½•è®©æ¨¡å‹è®°ä½ä¸Šä¸‹æ–‡å®ç°å¤šè½®å¯¹è¯ï¼Ÿä»Šå¤©å°±æ¥æ·±å…¥æ¢è®¨ LangChain å¦‚ä½•è½»æ¾è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œç»“åˆå®æˆ˜ä»£ç å¸¦ä½ æŒæ¡è¾“å‡ºç»“æœå®šåˆ¶ä¸å†å²ç®¡ç†çš„æ ¸å¿ƒæŠ€èƒ½ï¼</p>
<h3 data-id="heading-1">ç¬¬ä¸€éƒ¨åˆ†ï¼šJsonOutputParser ç»“æœå®šåˆ¶èƒ½åŠ› ğŸ§©</h3>
<p>å½“æˆ‘ä»¬è°ƒç”¨å¤§æ¨¡å‹æ—¶ï¼Œç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„å°´å°¬ï¼šæ¨¡å‹è¿”å›çš„å†…å®¹æ˜¯ä¸€æ®µè‡ªç”±æ–‡æœ¬ï¼Œè€Œæˆ‘ä»¬éœ€è¦çš„æ˜¯ç»“æ„åŒ–çš„ JSON æ•°æ®ï¼ˆæ¯”å¦‚æå–ç”¨æˆ·ä¿¡æ¯ã€è§£æå•†å“å‚æ•°ç­‰ï¼‰ã€‚è¿™æ—¶å€™ï¼Œ<code>JsonOutputParser</code>Â å°±æˆäº†æˆ‘ä»¬çš„å¾—åŠ›åŠ©æ‰‹ï¼</p>
<h4 data-id="heading-2">1. å®‰è£…ç›¸å…³ä¾èµ– ğŸ“¦</h4>
<p>è¦ä½¿ç”¨è¾“å‡ºå®šåˆ¶èƒ½åŠ›ï¼Œé¦–å…ˆéœ€è¦å®‰è£…å¿…è¦çš„ä¾èµ–åŒ…ï¼š</p>
<p>bash</p>
<pre><code class="hljs language-bash" lang="bash">pnpm i langchain @langchain/deepseek @langchain/core zod
</code></pre>
<p>ğŸ’¡ å‘½ä»¤è§£æï¼š</p>
<ul>
<li><code>langchain</code>ï¼šLangChain æ ¸å¿ƒæ¡†æ¶ï¼Œæä¾›åŸºç¡€èƒ½åŠ›</li>
<li><code>@langchain/deepseek</code>ï¼šDeepSeek æ¨¡å‹çš„ LangChain é›†æˆåŒ…</li>
<li><code>@langchain/core</code>ï¼šåŒ…å«æ ¸å¿ƒç»„ä»¶ï¼ˆå¦‚è§£æå™¨ã€æç¤ºæ¨¡æ¿ç­‰ï¼‰</li>
<li><code>zod</code>ï¼šç”¨äºå®šä¹‰å’Œæ ¡éªŒæ•°æ®ç»“æ„çš„å·¥å…·åº“ï¼Œæ˜¯å®ç°ç»“æ„åŒ–è¾“å‡ºçš„å…³é”®</li>
</ul>
<h4 data-id="heading-3">2. å¯¼å…¥è¾“å‡ºç»“æœå®šåˆ¶èƒ½åŠ›çš„å…³é”®æ¨¡å— ğŸ”§</h4>
<p>javascript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¯¼å…¥ JSON è¾“å‡ºè§£æå™¨ï¼šè´Ÿè´£å°†æ¨¡å‹è¾“å‡ºè½¬æ¢ä¸º JSON å¹¶æ ¡éªŒæ ¼å¼</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">JsonOutputParser</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/output_parsers'</span>;

<span class="hljs-comment">// å¯¼å…¥ zodï¼šç”¨äºå®šä¹‰æ•°æ®ç»“æ„è§„åˆ™ï¼ˆSchemaï¼‰ï¼Œç¡®ä¿è¾“å‡ºç¬¦åˆé¢„æœŸæ ¼å¼</span>
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">'zod'</span>;
</code></pre>
<p>ğŸ“ æ¨¡å—ä½œç”¨è¯¦è§£ï¼š</p>
<ul>
<li><code>JsonOutputParser</code>ï¼šæ¥æ”¶æ¨¡å‹çš„åŸå§‹è¾“å‡ºæ–‡æœ¬ï¼Œå°†å…¶è§£æä¸º JSON å¯¹è±¡ï¼ŒåŒæ—¶ä¼šæ ¹æ®é¢„å®šä¹‰çš„è§„åˆ™æ ¡éªŒæ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œè‹¥ä¸ç¬¦åˆåˆ™æŠ›å‡ºé”™è¯¯</li>
<li><code>zod</code>ï¼šä¸€ä¸ªæ¨¡å¼éªŒè¯åº“ï¼Œæˆ‘ä»¬ç”¨å®ƒæ¥å®šä¹‰ã€Œæ¨¡å‹åº”è¯¥è¾“å‡ºä»€ä¹ˆæ ·çš„æ•°æ®ç»“æ„ã€ï¼ˆæ¯”å¦‚å¿…é¡»åŒ…å«å“ªäº›å­—æ®µã€å­—æ®µç±»å‹æ˜¯ä»€ä¹ˆï¼‰</li>
</ul>
<h4 data-id="heading-4">3. Zodã€Schema è§„åˆ™ä¸ Prompt æç¤ºè¯çš„å…³ç³» ğŸ¤</h4>
<p>è¦å®ç°ç»“æ„åŒ–è¾“å‡ºï¼Œéœ€è¦ä¸‰ä¸ªæ ¸å¿ƒè¦ç´ ååŒå·¥ä½œï¼š</p>
<ul>
<li><strong>Zod</strong>ï¼šå·¥å…·æœ¬èº«ï¼Œæä¾›äº†å®šä¹‰æ•°æ®ç»“æ„çš„è¯­æ³•ï¼ˆæ¯”å¦‚Â <code>z.object()</code>Â å®šä¹‰å¯¹è±¡ã€<code>z.string()</code>Â å®šä¹‰å­—ç¬¦ä¸²ç±»å‹ï¼‰</li>
<li><strong>Schema</strong>ï¼šåŸºäº Zod å®šä¹‰çš„å…·ä½“è§„åˆ™ã€‚ä¾‹å¦‚ï¼š<code>const UserSchema = z.object({ name: z.string(), age: z.number() })</code>Â å°±å®šä¹‰äº†ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯çš„ç»“æ„è§„åˆ™ï¼ˆå¿…é¡»æœ‰å­—ç¬¦ä¸²ç±»å‹çš„ name å’Œæ•°å­—ç±»å‹çš„ ageï¼‰</li>
<li><strong>Prompt æç¤ºè¯</strong>ï¼šå°† Schema è§„åˆ™ã€Œç¿»è¯‘ã€æˆæ¨¡å‹èƒ½ç†è§£çš„æŒ‡ä»¤ï¼Œå‘Šè¯‰æ¨¡å‹ã€Œè¯·æŒ‰ç…§è¿™ä¸ªç»“æ„è¾“å‡º JSON æ•°æ®ã€</li>
</ul>
<p>ä¸‰è€…å½¢æˆå®Œç¾é—­ç¯ï¼š<code>ç”¨ Zod å®šä¹‰ Schema è§„åˆ™ â†’ åœ¨ Prompt ä¸­å‘ŠçŸ¥æ¨¡å‹è§„åˆ™ â†’ æ¨¡å‹æŒ‰è§„åˆ™è¾“å‡º â†’ JsonOutputParser ç”¨ Zod æ ¡éªŒå¹¶è§£æä¸º JSON</code></p>
<h4 data-id="heading-5">4. ä»£ç å®æˆ˜ï¼šå®ç°ç»“æ„åŒ–è¾“å‡ºğŸ“</h4>
<p>javascript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¯¼å…¥æ‰€éœ€æ¨¡å—</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatDeepSeek</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/deepseek'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatPromptTemplate</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/prompts'</span>
<span class="hljs-comment">// å°† llm ç”Ÿæˆçš„å†…å®¹è§£æä¸º json æ ¼å¼</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">JsonOutputParser</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/output_parsers'</span>
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">'zod'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'dotenv/config'</span> <span class="hljs-comment">// ä½ çš„key</span>

<span class="hljs-comment">// 1. å®šä¹‰è¾“å‡ºæ•°æ®çš„ç»“æ„è§„åˆ™ï¼ˆåŸºäº Zodï¼‰</span>
<span class="hljs-comment">// è¿™é‡Œè¦æ±‚æ¨¡å‹è¾“å‡ºç”¨æˆ·ä¿¡æ¯ï¼ŒåŒ…å«å§“åï¼ˆå­—ç¬¦ä¸²ï¼‰å’Œçˆ±å¥½ï¼ˆå­—ç¬¦ä¸²æ•°ç»„ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">UserInfoSchema</span> = z.<span class="hljs-title function_">object</span>({
  <span class="hljs-attr">name</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"ç”¨æˆ·çš„å§“å"</span>), <span class="hljs-comment">// describe ç”¨äºåœ¨æç¤ºè¯ä¸­è¯´æ˜å­—æ®µå«ä¹‰</span>
  <span class="hljs-attr">hobbies</span>: z.<span class="hljs-title function_">array</span>(z.<span class="hljs-title function_">string</span>()).<span class="hljs-title function_">describe</span>(<span class="hljs-string">"ç”¨æˆ·çš„çˆ±å¥½åˆ—è¡¨ï¼Œæ¯ä¸ªçˆ±å¥½æ˜¯å­—ç¬¦ä¸²"</span>)
});

<span class="hljs-comment">// 2. åˆ›å»º JSON è¾“å‡ºè§£æå™¨ï¼Œä¼ å…¥å®šä¹‰å¥½çš„ Schema</span>
<span class="hljs-keyword">const</span> parser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonOutputParser</span>({ <span class="hljs-attr">schema</span>: <span class="hljs-title class_">UserInfoSchema</span> });

<span class="hljs-comment">// 3. æ„å»ºæç¤ºæ¨¡æ¿ï¼šå‘Šè¯‰æ¨¡å‹éœ€è¦è¾“å‡ºç¬¦åˆ Schema çš„ JSON</span>
<span class="hljs-comment">// {format_instructions} ä¼šè¢«è‡ªåŠ¨æ›¿æ¢ä¸º parser ç”Ÿæˆçš„æ ¼å¼è¯´æ˜</span>
<span class="hljs-keyword">const</span> prompt = <span class="hljs-title class_">ChatPromptTemplate</span>.<span class="hljs-title function_">fromMessages</span>([
  [<span class="hljs-string">"system"</span>, <span class="hljs-string">"è¯·è§£æç”¨æˆ·è¾“å…¥çš„ä¿¡æ¯ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ ¼å¼è¾“å‡º JSONï¼š\n{format_instructions}"</span>],
  [<span class="hljs-string">"human"</span>, <span class="hljs-string">"{input}"</span>]
]);

<span class="hljs-comment">// 4. ç”Ÿæˆæ ¼å¼è¯´æ˜ï¼ˆç”± parser è‡ªåŠ¨ç”Ÿæˆï¼Œå‘Šè¯‰æ¨¡å‹å…·ä½“è¦æ€ä¹ˆè¾“å‡ºï¼‰</span>
<span class="hljs-keyword">const</span> formatInstructions = parser.<span class="hljs-title function_">getFormatInstructions</span>();

<span class="hljs-comment">// 5. æ„å»ºå®Œæ•´çš„è°ƒç”¨é“¾ï¼šæç¤ºæ¨¡æ¿ â†’ æ¨¡å‹ â†’ è§£æå™¨</span>
<span class="hljs-keyword">const</span> chain = prompt.<span class="hljs-title function_">pipe</span>(model).<span class="hljs-title function_">pipe</span>(parser);

<span class="hljs-comment">// 6. æ‰§è¡Œè°ƒç”¨ï¼šè§£æç”¨æˆ·è¾“å…¥çš„ä¿¡æ¯</span>
<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> chain.<span class="hljs-title function_">invoke</span>({
  <span class="hljs-attr">input</span>: <span class="hljs-string">"æˆ‘å«æå››ï¼Œå¹³æ—¶å–œæ¬¢æ‰“ç¯®çƒã€å¬éŸ³ä¹ï¼Œå¶å°”ä¹Ÿä¼šçˆ¬å±±"</span>,
  <span class="hljs-attr">format_instructions</span>: formatInstructions
});

<span class="hljs-comment">// 7. è¾“å‡ºç»“æœï¼ˆæ­¤æ—¶ result å·²ç»æ˜¯ç¬¦åˆ Schema çš„ JSON å¯¹è±¡ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è§£æç»“æœï¼š"</span>, result);
</code></pre>
<p>ğŸ’¡ ä»£ç å…³é”®æ­¥éª¤è§£æï¼š</p>
<ul>
<li>æ­¥éª¤ 1ï¼šç”¨Â <code>z.object()</code>Â å®šä¹‰è¾“å‡ºå¿…é¡»åŒ…å«Â <code>name</code>ï¼ˆå­—ç¬¦ä¸²ï¼‰å’ŒÂ <code>hobbies</code>ï¼ˆå­—ç¬¦ä¸²æ•°ç»„ï¼‰ï¼Œ<code>describe</code>Â è®©æ¨¡å‹æ›´æ¸…æ¥šæ¯ä¸ªå­—æ®µçš„å«ä¹‰</li>
<li>æ­¥éª¤ 2ï¼š<code>JsonOutputParser</code>Â ç»‘å®š Schema åï¼Œä¼šè‡ªåŠ¨æ ¡éªŒæ¨¡å‹è¾“å‡ºæ˜¯å¦ç¬¦åˆè§„åˆ™</li>
<li>æ­¥éª¤ 3ï¼šæç¤ºæ¨¡æ¿ä¸­å¿…é¡»åŒ…å«Â <code>{format_instructions}</code>ï¼Œå¦åˆ™æ¨¡å‹ä¸çŸ¥é“è¦è¾“å‡º JSON</li>
<li>æ­¥éª¤ 6ï¼šè°ƒç”¨æ—¶ä¼ å…¥ç”¨æˆ·è¾“å…¥å’Œæ ¼å¼è¯´æ˜ï¼Œé“¾ä¼šè‡ªåŠ¨å®Œæˆã€Œæç¤ºç”Ÿæˆ â†’ æ¨¡å‹è°ƒç”¨ â†’ è§£ææ ¡éªŒã€å…¨æµç¨‹</li>
</ul>
<h4 data-id="heading-6">5. æ•ˆæœå±•ç¤º âœ¨</h4>
<p>å½“æˆ‘ä»¬è¾“å…¥ã€Œæˆ‘å«æå››ï¼Œå¹³æ—¶å–œæ¬¢æ‰“ç¯®çƒã€å¬éŸ³ä¹ï¼Œå¶å°”ä¹Ÿä¼šçˆ¬å±±ã€åï¼Œæ¨¡å‹ä¼šè¾“å‡ºæ ‡å‡†çš„ JSON ç»“æ„ï¼š</p>
<p>json</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æå››"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"hobbies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"æ‰“ç¯®çƒ"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"å¬éŸ³ä¹"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"çˆ¬å±±"</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de235635ce5349e98327c764933b1e6c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3h1ZV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767492669&amp;x-signature=ulbyYeBv9EuFzW9wAFvzS2271Ek%3D" alt="QQ20251227-142706.png" loading="lazy"/></p>
<p>å†ä¹Ÿä¸ç”¨æ‰‹åŠ¨å¤„ç†å­—ç¬¦ä¸²åˆ‡å‰²æˆ–æ­£åˆ™åŒ¹é…äº†ï¼å¦‚æœæ¨¡å‹è¾“å‡ºä¸ç¬¦åˆæ ¼å¼ï¼ˆæ¯”å¦‚å°‘äº†Â <code>hobbies</code>Â å­—æ®µï¼‰ï¼Œ<code>JsonOutputParser</code>Â ä¼šç›´æ¥æŠ›å‡ºé”™è¯¯ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¿«é€Ÿæ’æŸ¥é—®é¢˜ã€‚</p>
<h3 data-id="heading-7">ç¬¬äºŒéƒ¨åˆ†ï¼šLLM å†å²ç®¡ç†èƒ½åŠ› ğŸ“œ</h3>
<p>å¤§æ¨¡å‹çš„ API è°ƒç”¨å’Œ HTTP è¯·æ±‚ä¸€æ ·ï¼Œæœ¬è´¨æ˜¯ã€Œæ— çŠ¶æ€ã€çš„ â€”â€” æ¯æ¬¡è°ƒç”¨éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæ¨¡å‹ä¸ä¼šè®°ä½ä¸Šä¸€æ¬¡çš„å¯¹è¯å†…å®¹ã€‚è¿™å°±å¯¼è‡´å¦‚æœä¸åšç‰¹æ®Šå¤„ç†ï¼Œæ¨¡å‹æ— æ³•è¿›è¡Œå¤šè½®å¯¹è¯ï¼ˆæ¯”å¦‚ä½ å…ˆå‘Šè¯‰å®ƒã€Œæˆ‘å«å¼ ä¸‰ã€ï¼Œå†é—®ã€Œæˆ‘å«ä»€ä¹ˆã€ï¼Œå®ƒä¼šå›ç­”ã€Œä¸çŸ¥é“ã€ï¼‰ã€‚</p>
<h4 data-id="heading-8">ä¸ºä»€ä¹ˆéœ€è¦å†å²ç®¡ç†ï¼Ÿä¸¾ä¸ªä¾‹å­ ğŸŒ°</h4>
<p>å¦‚æœç›´æ¥è°ƒç”¨æ¨¡å‹ï¼Œæ²¡æœ‰å†å²ç®¡ç†çš„è¯ï¼Œä¼šæ˜¯è¿™æ ·çš„æ•ˆæœï¼š</p>
<p>javascript</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// æ— å†å²ç®¡ç†çš„å•è½®è°ƒç”¨</span>
<span class="hljs-type">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-built_in">ChatDeepSeek</span>({ model: <span class="hljs-string">'deepseek-chat'</span> });

<span class="hljs-comment">// ç¬¬ä¸€è½®ï¼šå‘Šè¯‰æ¨¡å‹å§“å</span>
<span class="hljs-type">const</span> res1 = await model.<span class="hljs-built_in">invoke</span>([[<span class="hljs-string">"human"</span>, <span class="hljs-string">"æˆ‘å«å¼ ä¸‰"</span>]]);
console.<span class="hljs-built_in">log</span>(res1.content); <span class="hljs-comment">// è¾“å‡ºï¼šä½ å¥½ï¼Œå¼ ä¸‰ï¼å¾ˆé«˜å…´è®¤è¯†ä½ ~</span>

<span class="hljs-comment">// ç¬¬äºŒè½®ï¼šè¯¢é—®å§“åï¼ˆæ¨¡å‹å·²å¿˜è®°ï¼‰</span>
<span class="hljs-type">const</span> res2 = await model.<span class="hljs-built_in">invoke</span>([[<span class="hljs-string">"human"</span>, <span class="hljs-string">"æˆ‘å«ä»€ä¹ˆï¼Ÿ"</span>]]);
console.<span class="hljs-built_in">log</span>(res2.content); <span class="hljs-comment">// è¾“å‡ºï¼šæŠ±æ­‰ï¼Œæˆ‘ä¸çŸ¥é“ä½ å«ä»€ä¹ˆåå­—ï¼Œå¯ä»¥å‘Šè¯‰æˆ‘å—ï¼Ÿ</span>
</code></pre>
<p><strong>è¾“å‡ºç»“æœ:</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e176e31b6f5c45b590c86d22694852f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3h1ZV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767492669&amp;x-signature=LhAqoXFQ585%2Bp2n4nbcczDl0j7M%3D" alt="QQ20251228-094758.png" loading="lazy"/></p>
<p>è¿™æ˜¾ç„¶ä¸ç¬¦åˆæˆ‘ä»¬å¯¹ã€Œå¯¹è¯ã€çš„é¢„æœŸã€‚è§£å†³åŠæ³•å¾ˆç®€å•ï¼š<strong>ç»´æŠ¤ä¸€ä»½å¯¹è¯å†å²ï¼Œæ¯æ¬¡è°ƒç”¨æ¨¡å‹æ—¶éƒ½æŠŠå†å²è®°å½•ä¸€èµ·ä¼ ç»™å®ƒ</strong>ã€‚</p>
<h4 data-id="heading-9">1. å¯¼å…¥å†å²ç®¡ç†èƒ½åŠ›çš„å…³é”®æ¨¡å— ğŸ”§</h4>
<p>LangChain æä¾›äº†ä¸“é—¨çš„ç»„ä»¶æ¥ç®€åŒ–å†å²ç®¡ç†ï¼Œæ ¸å¿ƒæ¨¡å—å¦‚ä¸‹ï¼š</p>
<p>javascript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æç¤ºæ¨¡æ¿å·¥å…·ï¼šç”¨äºæ„å»ºåŒ…å«å†å²è®°å½•çš„å¯¹è¯æç¤º</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatPromptTemplate</span>, <span class="hljs-title class_">MessagesPlaceholder</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/prompts'</span>;

<span class="hljs-comment">// å¸¦å†å²çš„å¯è¿è¡Œå¯¹è±¡ï¼šæ ¸å¿ƒç»„ä»¶ï¼Œè‡ªåŠ¨ç®¡ç†å¯¹è¯å†å²ä¸æ¨¡å‹è°ƒç”¨çš„ç»“åˆ</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">RunnableWithMessageHistory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/runnables'</span>;

<span class="hljs-comment">// å†…å­˜å‹å†å²å­˜å‚¨ï¼šä¸´æ—¶ä¿å­˜å¯¹è¯å†å²ï¼ˆè¿›ç¨‹ç»“æŸåä¸¢å¤±ï¼‰</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">InMemoryChatMessageHistory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/chat_history'</span>;
</code></pre>
<p>ğŸ“ æ¨¡å—ä½œç”¨è¯¦è§£ï¼š</p>
<ul>
<li><code>ChatPromptTemplate</code>ï¼šæ„å»ºå¯¹è¯æ¨¡æ¿ï¼Œæ”¯æŒç³»ç»Ÿæ¶ˆæ¯ã€ç”¨æˆ·æ¶ˆæ¯ã€AI æ¶ˆæ¯ç­‰å¤šè§’è‰²å®šä¹‰</li>
<li><code>MessagesPlaceholder</code>ï¼šæç¤ºæ¨¡æ¿ä¸­çš„ã€Œå†å²æ¶ˆæ¯å ä½ç¬¦ã€ï¼Œè¿è¡Œæ—¶ä¼šè‡ªåŠ¨æ›¿æ¢ä¸ºçœŸå®çš„å¯¹è¯å†å²</li>
<li><code>RunnableWithMessageHistory</code>ï¼šå°†åŸºç¡€å¯¹è¯é“¾ä¸å†å²å­˜å‚¨å…³è”ï¼Œè‡ªåŠ¨å®Œæˆã€ŒåŠ è½½å†å² â†’ æ‹¼æ¥æç¤º â†’ è°ƒç”¨æ¨¡å‹ â†’ ä¿å­˜å†å²ã€çš„å…¨æµç¨‹</li>
<li><code>InMemoryChatMessageHistory</code>ï¼šå†…å­˜ä¸­çš„å†å²å­˜å‚¨å®¹å™¨ï¼Œç®€å•æ˜“ç”¨ä½†ä¸é€‚åˆç”Ÿäº§ç¯å¢ƒï¼ˆæ•°æ®ä¸æŒä¹…åŒ–ï¼‰</li>
</ul>
<h4 data-id="heading-10">2. ä»£ç å®æˆ˜ï¼šå®ç°å¤šè½®å¯¹è¯è®°å¿†ğŸ“</h4>
<p>ä¸‹é¢æ˜¯åŸºäº DeepSeek æ¨¡å‹çš„å®Œæ•´å¤šè½®å¯¹è¯ä»£ç ï¼š</p>
<p>javascript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ– DeepSeek æ¨¡å‹</span>
<span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({
  <span class="hljs-attr">model</span>: <span class="hljs-string">'deepseek-chat'</span>, <span class="hljs-comment">// æŒ‡å®šæ¨¡å‹ç‰ˆæœ¬</span>
  <span class="hljs-attr">temperature</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// 0 è¡¨ç¤ºè¾“å‡ºæ›´ç¨³å®šã€ç¡®å®šï¼ˆé€‚åˆéœ€è¦å‡†ç¡®è®°å¿†çš„åœºæ™¯ï¼‰</span>
});

<span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šæ„å»ºåŒ…å«å†å²å ä½ç¬¦çš„æç¤ºæ¨¡æ¿</span>
<span class="hljs-keyword">const</span> prompt = <span class="hljs-title class_">ChatPromptTemplate</span>.<span class="hljs-title function_">fromMessages</span>([
  [<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæœ‰è®°å¿†çš„åŠ©æ‰‹ï¼Œä¼šè®°ä½ä¹‹å‰çš„å¯¹è¯å†…å®¹"</span>], <span class="hljs-comment">// ç³»ç»Ÿè§’è‰²å®šä¹‰</span>
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">MessagesPlaceholder</span>(<span class="hljs-string">"history"</span>), <span class="hljs-comment">// å†å²æ¶ˆæ¯å ä½ç¬¦ï¼ˆå…³é”®ï¼ä¼šè‡ªåŠ¨å¡«å……å†å²ï¼‰</span>
  [<span class="hljs-string">"human"</span>, <span class="hljs-string">"{input}"</span>] <span class="hljs-comment">// ç”¨æˆ·å½“å‰è¾“å…¥çš„å ä½ç¬¦</span>
]);

<span class="hljs-comment">// ç¬¬ä¸‰æ­¥ï¼šæ„å»ºåŸºç¡€å¯¹è¯é“¾ï¼ˆæç¤ºæ¨¡æ¿ â†’ æ¨¡å‹ï¼‰</span>
<span class="hljs-keyword">const</span> runnable = prompt.<span class="hljs-title function_">pipe</span>(model);

<span class="hljs-comment">// ç¬¬å››æ­¥ï¼šåˆå§‹åŒ–å†…å­˜å‹å†å²å­˜å‚¨ï¼ˆä¿å­˜å¯¹è¯è®°å½•ï¼‰</span>
<span class="hljs-keyword">const</span> messageHistory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">InMemoryChatMessageHistory</span>();

<span class="hljs-comment">// ç¬¬äº”æ­¥ï¼šç”¨ RunnableWithMessageHistory åŒ…è£…å¯¹è¯é“¾ï¼Œå®ç°å†å²ç®¡ç†</span>
<span class="hljs-keyword">const</span> chain = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RunnableWithMessageHistory</span>({
  <span class="hljs-attr">runnable</span>: runnable, <span class="hljs-comment">// åŸºç¡€å¯¹è¯é“¾</span>
  <span class="hljs-attr">getMessageHistory</span>: <span class="hljs-keyword">async</span> () =&gt; messageHistory, <span class="hljs-comment">// æä¾›å†å²å­˜å‚¨å®ä¾‹</span>
  <span class="hljs-attr">inputMessagesKey</span>: <span class="hljs-string">'input'</span>, <span class="hljs-comment">// ç»‘å®šç”¨æˆ·è¾“å…¥çš„å‚æ•°åï¼ˆå¯¹åº” prompt ä¸­çš„ {input}ï¼‰</span>
  <span class="hljs-attr">historyMessagesKey</span>: <span class="hljs-string">'history'</span> <span class="hljs-comment">// ç»‘å®šå†å²å ä½ç¬¦çš„åç§°ï¼ˆå¯¹åº” MessagesPlaceholder çš„ "history"ï¼‰</span>
});

<span class="hljs-comment">// ç¬¬å…­æ­¥ï¼šæ‰§è¡Œå¤šè½®å¯¹è¯</span>
<span class="hljs-comment">// ç¬¬ä¸€è½®ï¼šå‘ŠçŸ¥å§“åå’Œå–œå¥½</span>
<span class="hljs-keyword">const</span> res1 = <span class="hljs-keyword">await</span> chain.<span class="hljs-title function_">invoke</span>(
  { <span class="hljs-attr">input</span>: <span class="hljs-string">'æˆ‘å«å¼ ä¸‰ï¼Œå–œæ¬¢å–ç™½å…°åœ°'</span> }, <span class="hljs-comment">// ç”¨æˆ·è¾“å…¥</span>
  { <span class="hljs-attr">configurable</span>: { <span class="hljs-attr">sessionId</span>: <span class="hljs-string">'makefriend'</span> } } <span class="hljs-comment">// ä¼šè¯ IDï¼ˆç”¨äºåŒºåˆ†ä¸åŒå¯¹è¯ï¼‰</span>
);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'AI å›å¤ 1ï¼š'</span>, res1.<span class="hljs-property">content</span>); <span class="hljs-comment">// è¾“å‡ºï¼šä½ å¥½ï¼Œå¼ ä¸‰ï¼çœ‹æ¥ä½ å–œæ¬¢å–ç™½å…°åœ°å‘¢~</span>

<span class="hljs-comment">// ç¬¬äºŒè½®ï¼šéªŒè¯æ˜¯å¦è®°ä½å§“å</span>
<span class="hljs-keyword">const</span> res2 = <span class="hljs-keyword">await</span> chain.<span class="hljs-title function_">invoke</span>(
  { <span class="hljs-attr">input</span>: <span class="hljs-string">'æˆ‘å«ä»€ä¹ˆï¼Ÿ'</span> }, <span class="hljs-comment">// åŸºäºå†å²çš„æé—®</span>
  { <span class="hljs-attr">configurable</span>: { <span class="hljs-attr">sessionId</span>: <span class="hljs-string">'makefriend'</span> } } <span class="hljs-comment">// åŒä¸€ä¼šè¯ IDï¼Œå¤ç”¨å†å²</span>
);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'AI å›å¤ 2ï¼š'</span>, res2.<span class="hljs-property">content</span>); <span class="hljs-comment">// è¾“å‡ºï¼šä½ å«å¼ ä¸‰å‘€ï¼Œåˆšæ‰ä½ è¯´å–œæ¬¢å–ç™½å…°åœ°å‘¢~</span>
</code></pre>
<p>ğŸ’¡ æ ¸å¿ƒé€»è¾‘è§£æï¼š</p>
<ul>
<li>
<p>å½“è°ƒç”¨Â <code>chain.invoke()</code>Â æ—¶ï¼Œ<code>RunnableWithMessageHistory</code>Â ä¼šè‡ªåŠ¨åšä¸‰ä»¶äº‹ï¼š</p>
<ol>
<li>ä»Â <code>messageHistory</code>Â ä¸­åŠ è½½è¯¥Â <code>sessionId</code>Â å¯¹åº”çš„å†å²è®°å½•</li>
<li>å°†å†å²è®°å½•å¡«å……åˆ°Â <code>MessagesPlaceholder("history")</code>Â ä½ç½®ï¼Œä¸å½“å‰è¾“å…¥æ‹¼æ¥æˆå®Œæ•´æç¤º</li>
<li>è°ƒç”¨æ¨¡å‹åï¼Œè‡ªåŠ¨å°†ã€Œç”¨æˆ·è¾“å…¥ã€å’Œã€ŒAI å›å¤ã€ä¿å­˜åˆ°Â <code>messageHistory</code>Â ä¸­</li>
</ol>
</li>
<li>
<p><code>sessionId</code>Â çš„ä½œç”¨ï¼šå¦‚æœæœ‰å¤šä¸ªç”¨æˆ·åŒæ—¶å¯¹è¯ï¼Œç”¨Â <code>sessionId</code>Â åŒºåˆ†ä¸åŒä¼šè¯çš„å†å²è®°å½•ï¼ˆæ¯”å¦‚ç”¨æˆ· A å’Œç”¨æˆ· B åˆ†åˆ«æœ‰è‡ªå·±çš„Â <code>sessionId</code>ï¼‰</p>
</li>
</ul>
<h4 data-id="heading-11">3. æ•ˆæœå±•ç¤º âœ¨</h4>
<p>è¿è¡Œä¸Šè¿°ä»£ç åï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°è¿™æ ·çš„è¾“å‡ºï¼š</p>
<pre><code class="hljs">AI å›å¤ 1ï¼šä½ å¥½ï¼Œå¼ ä¸‰ï¼çœ‹æ¥ä½ å–œæ¬¢å–ç™½å…°åœ°å‘¢~
AI å›å¤ 2ï¼šä½ å«å¼ ä¸‰å‘€ï¼Œåˆšæ‰ä½ è¯´å–œæ¬¢å–ç™½å…°åœ°å‘¢~
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e08369f75bf493ba81701dc25022398~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3h1ZV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767492669&amp;x-signature=3xl%2BwdIjQrlLZD4iMTYdArJgz%2Fk%3D" alt="QQ20251228-095706.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ¨¡å‹æˆåŠŸè®°ä½äº†ç¬¬ä¸€è½®å¯¹è¯ä¸­æåˆ°çš„å§“åï¼Œå®ç°äº†å¸¦è®°å¿†çš„å¤šè½®å¯¹è¯ï¼</p>
<h3 data-id="heading-12">é¢è¯•å®˜å¯èƒ½ä¼šé—®è¿™äº›é—®é¢˜ ğŸ¤”</h3>
<ul>
<li><strong>1.å¦‚ä½•è®© LLM è¾“å‡ºå›ºå®šæ ¼å¼çš„ JSON æ•°æ®ï¼Ÿ</strong></li>
</ul>
<p>ç­”ï¼šä½¿ç”¨ LangChain çš„Â <code>JsonOutputParser</code>Â ç»“åˆ Zod åº“ã€‚å…ˆç”¨ Zod å®šä¹‰æ•°æ®ç»“æ„ï¼ˆSchemaï¼‰ï¼Œå†é€šè¿‡æç¤ºæ¨¡æ¿å‘Šè¯‰æ¨¡å‹æŒ‰ Schema è¾“å‡ºï¼Œæœ€åç”¨Â <code>JsonOutputParser</code>Â è§£æå¹¶æ ¡éªŒç»“æœï¼Œå½¢æˆã€Œå®šä¹‰è§„åˆ™â†’ä¼ è¾¾è§„åˆ™â†’æ ¡éªŒè§„åˆ™ã€çš„é—­ç¯ã€‚</p>
<ul>
<li><strong>2.InMemoryChatMessageHistory æœ‰ä»€ä¹ˆå±€é™æ€§ï¼Ÿç”Ÿäº§ç¯å¢ƒä¸­å¦‚ä½•æ›¿ä»£ï¼Ÿ</strong></li>
</ul>
<p>ç­”ï¼šå±€é™æ€§æ˜¯æ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè¿›ç¨‹é‡å¯åä¸¢å¤±ï¼Œä¸”ä¸æ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½²ã€‚ç”Ÿäº§ç¯å¢ƒå¯ä½¿ç”¨æŒä¹…åŒ–å­˜å‚¨ï¼Œæ¯”å¦‚Â <code>RedisChatMessageHistory</code>ï¼ˆåŸºäº Redisï¼‰ã€<code>MongoDBChatMessageHistory</code>ï¼ˆåŸºäº MongoDBï¼‰ç­‰ï¼Œè¿™äº›ç»„ä»¶ä¼šå°†å†å²è®°å½•å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ã€‚</p>
<ul>
<li><strong>3.RunnableWithMessageHistory çš„æ ¸å¿ƒä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</strong></li>
</ul>
<p>ç­”ï¼šå®ƒæ˜¯è¿æ¥ã€Œå¯¹è¯é“¾ã€å’Œã€Œå†å²å­˜å‚¨ã€çš„æ¡¥æ¢ï¼Œè‡ªåŠ¨å®Œæˆå†å²è®°å½•çš„åŠ è½½ã€æç¤ºæ‹¼æ¥ã€æ¨¡å‹è°ƒç”¨å’Œå†å²ä¿å­˜ï¼Œç®€åŒ–äº†å¤šè½®å¯¹è¯çš„å®ç°æµç¨‹ï¼Œæ— éœ€æ‰‹åŠ¨ç®¡ç†å†å²è®°å½•çš„ä¼ é€’ä¸å­˜å‚¨ã€‚</p>
<ul>
<li><strong>4.å¤šè½®å¯¹è¯ä¸­ï¼Œå¯¹è¯å†å²æ˜¯å¦‚ä½•ä¼ é€’ç»™æ¨¡å‹çš„ï¼Ÿ</strong></li>
</ul>
<p>ç­”ï¼šé€šè¿‡Â <code>MessagesPlaceholder</code>Â åœ¨æç¤ºæ¨¡æ¿ä¸­é¢„ç•™ä½ç½®ï¼Œ<code>RunnableWithMessageHistory</code>Â ä¼šåœ¨è°ƒç”¨æ—¶å°†å†å²è®°å½•å¡«å……åˆ°è¯¥ä½ç½®ï¼Œä¸ç³»ç»Ÿæ¶ˆæ¯ã€å½“å‰è¾“å…¥æ‹¼æ¥æˆå®Œæ•´æç¤ºï¼Œå†ä¼ é€’ç»™æ¨¡å‹ï¼Œè®©æ¨¡å‹ã€Œçœ‹åˆ°ã€æ‰€æœ‰å†å²å¯¹è¯ã€‚</p>
<ul>
<li><strong>5.å¦‚æœå¯¹è¯å†å²å¾ˆé•¿ï¼Œä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ</strong></li>
</ul>
<p>ç­”ï¼šé—®é¢˜æ˜¯å¯èƒ½è¶…è¿‡æ¨¡å‹çš„ä¸Šä¸‹æ–‡çª—å£é•¿åº¦ï¼ˆToken é™åˆ¶ï¼‰ï¼Œå¯¼è‡´æ¨¡å‹æ— æ³•å¤„ç†ã€‚è§£å†³åŠæ³•ï¼šâ‘  ç”¨Â <code>ConversationSummaryMemory</code>Â å¯¹å†å²è¿›è¡Œæ€»ç»“å‹ç¼©ï¼›â‘¡ æŒ‰æ—¶é—´æˆ–é‡è¦æ€§æˆªæ–­å†å²è®°å½•ï¼›â‘¢ é€‰æ‹©æ”¯æŒæ›´é•¿ä¸Šä¸‹æ–‡çª—å£çš„æ¨¡å‹ã€‚</p>
<h3 data-id="heading-13">ç»“è¯­ ğŸŒŸ</h3>
<p>é€šè¿‡ LangChain çš„Â <code>JsonOutputParser</code>Â å’Œå†å²ç®¡ç†ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾å®ç°ã€Œç»“æ„åŒ–è¾“å‡ºã€å’Œã€Œå¤šè½®å¯¹è¯è®°å¿†ã€è¿™ä¸¤ä¸ªæ ¸å¿ƒåŠŸèƒ½ã€‚ç»“æ„åŒ–è¾“å‡ºè®© AI ç»“æœæ›´æ˜“è¢«ç¨‹åºå¤„ç†ï¼Œå†å²ç®¡ç†è®©å¯¹è¯æ›´è‡ªç„¶æµç•… â€”â€” è¿™ä¸¤è€…ç»“åˆèµ·æ¥ï¼Œèƒ½å¤§å¹…æå‡ AI åº”ç”¨çš„å®ç”¨æ€§å’Œç”¨æˆ·ä½“éªŒã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®ä½ æŒæ¡ LangChain çš„è¿›é˜¶æŠ€å·§ï¼Œå¿«å»åŠ¨æ‰‹å®è·µå§ï¼å¦‚æœæœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµå“¦ï½ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘ç”¨AIå†™äº†ä¸ªå°ç¨‹åºï¼Œå´è¢«äººè¯´æ²¡æœ‰åº•çº¿â€¦]]></title>    <link>https://juejin.cn/post/7588152122187137078</link>    <guid>https://juejin.cn/post/7588152122187137078</guid>    <pubDate>2025-12-28T02:23:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588152122187137078" data-draft-id="7588004376868241443" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘ç”¨AIå†™äº†ä¸ªå°ç¨‹åºï¼Œå´è¢«äººè¯´æ²¡æœ‰åº•çº¿â€¦"/> <meta itemprop="keywords" content="å¾®ä¿¡å°ç¨‹åº,å‰ç«¯,äº¤äº’è®¾è®¡"/> <meta itemprop="datePublished" content="2025-12-28T02:23:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§å¤§èŠ±çŒ«"/> <meta itemprop="url" content="https://juejin.cn/user/3051900006309096"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘ç”¨AIå†™äº†ä¸ªå°ç¨‹åºï¼Œå´è¢«äººè¯´æ²¡æœ‰åº•çº¿â€¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3051900006309096/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§å¤§èŠ±çŒ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T02:23:26.000Z" title="Sun Dec 28 2025 02:23:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¤§å®¶å¥½ï¼</h2>
<p>ä»Šå¤©æƒ³å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹æˆ‘ç”¨AIå¼€å‘çš„ä¸€æ¬¾å¾®ä¿¡å°ç¨‹åºâ€”â€”ã€<strong>ç ´å†°ç¥å™¨</strong>ã€‘ã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªå–œæ¬¢å’Œæœ‹å‹èšä¼šä½†åˆç»å¸¸<strong>é¢ä¸´â€œå†·åœºâ€å°´å°¬çš„iäºº</strong>ï¼Œæˆ‘ä¸€ç›´åœ¨å¯»æ‰¾ä¸€æ¬¾èƒ½å¤Ÿæ´»è·ƒèšä¼šæ°›å›´çš„å°ç¨‹åºã€‚ä½†å¸‚é¢ä¸Šçš„åº”ç”¨è¦ä¹ˆåšå·¥ç²—ç³™åŠŸèƒ½å•ä¸€ï¼Œè¦ä¹ˆä¸€å †å¹¿å‘Šæ²¡æ³•ç©ã€‚äºæ˜¯ï¼Œæˆ‘å†³å®šè‡ªå·±åŠ¨æ‰‹ï¼ˆå…¶å®åªåŠ¨äº†å˜´ï¼Œæ˜¯AIåŠ¨çš„æ‰‹ï¼‰ï¼Œå¼€å‘ä¸€æ¬¾å¥½ç”¨ã€åŠŸèƒ½ä¸°å¯Œçš„â€œç ´å†°ç¥å™¨â€ã€‚</p>
<p><strong>å…ˆæ‰£ä¸€ä¸‹æ–‡ç« æ ‡é¢˜</strong>ï¼Œä¸ºä»€ä¹ˆä¼šè¢«äººè¯´æ²¡æœ‰åº•çº¿ï¼Œä¸»è¦è¿˜æ˜¯ä¸€äº›äººå¯¹çœŸå¿ƒè¯å¤§å†’é™©çš„åˆ»æ¿å°è±¡å§ï¼Œæ˜¯æ·»åŠ äº†ä¸€äº›äº²å¯†äº’åŠ¨å’Œæƒ…ä¾£æ¨¡å¼ï¼Œä¸è¿‡ä¹Ÿæ˜¯å¤§å®¶å„å–æ‰€éœ€ï¼Œç‰©å°½å…¶ç”¨å§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1dcc864098bb4eabaff850a4742a6075~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5aSn6Iqx54yr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767493405&amp;x-signature=wI6Zccj5ZLhChqoWXmKH7czfOpk%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-1">å¥½äº†ï¼Œå…ˆç»™å¤§å®¶å±•ç¤ºä¸€ä¸‹è¿™æ¬¾å°ç¨‹åºçš„ä¸»è¦ç•Œé¢</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b22ee3a2501e47d3aa1307d768d40cd6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5aSn6Iqx54yr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767493405&amp;x-signature=2FHeH3X3jGx2PvxGe2IflU8CCf0%3D" alt="WechatIMG67.jpg" loading="lazy"/></p>
<h6 data-id="heading-2">å¯æƒœæ˜é‡‘è¿™é‡Œå‘è§†é¢‘ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥ç§»æ­¥å¾®ä¿¡å°ç¨‹åºä½“éªŒä¸€ä¸‹ã€‚</h6>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53abd9968f354618bd0835fc4f33ea98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5aSn6Iqx54yr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767493405&amp;x-signature=sPoMY1Ko%2BkzkxeeYh8E0eSFOIMU%3D" alt="card_qrcode.jpg" loading="lazy"/></p>
<h3 data-id="heading-3">ğŸ’¡ å¼€å‘åˆè¡·</h3>
<p>åœ¨æœ‹å‹èšä¼šã€å›¢å»ºç ´å†°æˆ–è€…KTVå”±æ­Œæ—¶ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ä¸€äº›å°é“å…·æ¥æ´»è·ƒæ°”æ°›ã€‚æ¯”å¦‚ï¼š</p>
<ul>
<li>æƒ³ç©çœŸå¿ƒè¯å¤§å†’é™©ï¼Œä½†æƒ³ä¸å‡ºå¥½é¢˜ç›®ï¼Ÿ</li>
<li>æƒ³ç©æ‘‡éª°å­ï¼Œä½†æ‰¾ä¸åˆ°å®ä½“éª°å­ï¼Ÿ</li>
<li>æƒ³æŠ½æ‰‘å…‹ç‰Œæ¯”å¤§å°ï¼Œä½†æ²¡å¸¦ç‰Œï¼Ÿ</li>
<li>å–é…’æ—¶æƒ³ç©ä¸ªç®€å•çš„çŒœæ•°å­—æ¸¸æˆï¼Ÿ
ã€ç ´å†°ç¥å™¨ã€‘å°±æ˜¯ä¸ºäº†è§£å†³è¿™äº›åœºæ™¯è€Œç”Ÿçš„ã€‚</li>
</ul>
<h3 data-id="heading-4">ğŸš€ åŠŸèƒ½äº®ç‚¹ä»‹ç»</h3>
<h4 data-id="heading-5">1. çœŸå¿ƒè¯å¤§å†’é™© (Truth or Dare)</h4>
<p>è¿™æ˜¯å°ç¨‹åºçš„æ ¸å¿ƒåŠŸèƒ½ã€‚ä¸ºäº†ä¿è¯é¢˜ç›®çš„è¶£å‘³æ€§å’Œå¤šæ ·æ€§ï¼Œæˆ‘æ¥å…¥äº† LeanCloud ä½œä¸ºåç«¯æ•°æ®åº“ï¼Œè¿™æ ·å¯ä»¥åŠ¨æ€æ›´æ–°é¢˜ç›®åº“ï¼Œè€Œä¸éœ€è¦é¢‘ç¹å‘ç‰ˆã€‚ï¼ˆå·²ç»å½•å…¥äº†å‡ ç™¾é“é¢˜äº†ï¼‰</p>
<ul>
<li>å¤šæ¨¡å¼æ”¯æŒ ï¼šä¸ä»…æœ‰ä¼ ç»Ÿçš„â€œçœŸå¿ƒè¯â€å’Œâ€œå¤§å†’é™©â€ï¼Œæˆ‘è¿˜åŠ å…¥äº†â€œè°æ¥å–â€ã€â€œå¥½è¿å¡â€ã€â€œäº²å¯†äº’åŠ¨â€ä»¥åŠâ€œæƒ…ä¾£æ¨¡å¼â€œã€‚</li>
<li>è‡ªå®šä¹‰æ¦‚ç‡ ï¼šä¸ºäº†æ»¡è¶³ä¸åŒåœºåˆçš„è¯‰æ±‚å·®å¼‚ï¼Œå¯ä»¥è‡ªç”±è°ƒæ•´æ¯ç§æ¨¡å¼çš„å‡ºç°æ¦‚ç‡ã€‚</li>
<li>äº¤äº’ä½“éªŒ ï¼šå¡ç‰‡åˆ‡æ¢ä½¿ç”¨äº†å¹³æ»‘çš„åŠ¨ç”»æ•ˆæœï¼Œé…åˆæ‰‹æœºçš„éœ‡åŠ¨åé¦ˆï¼ŒæŠ½å¡çš„æ„Ÿè§‰éå¸¸çœŸå®ã€‚</li>
</ul>
<h4 data-id="heading-6">2. æ‘‡éª°å­ (Dice)</h4>
<p>æ¨¡æ‹ŸçœŸå®çš„éª°å­ä½“éªŒã€‚</p>
<ul>
<li>å¤šéª°å­æ”¯æŒ ï¼šæœ€å¤šæ”¯æŒ 5 é¢—éª°å­åŒæ—¶æ‘‡åŠ¨ã€‚</li>
<li>çœŸå®æ‰‹æ„Ÿ ï¼šæ”¯æŒâ€œé•¿æŒ‰è“„åŠ›â€å’Œâ€œç‚¹å‡»â€ä¸¤ç§æ¨¡å¼ï¼Œé…åˆéœ‡åŠ¨åé¦ˆï¼Œè¿˜åŸçœŸå®çš„åšå¼ˆæ„Ÿã€‚</li>
<li>é®ç½©æ¨¡å¼ ï¼šæ‘‡å®Œåé»˜è®¤å¯ä»¥è¦†ç›–ç»“æœï¼Œå¢åŠ ç¥ç§˜æ„Ÿï¼Œå¤§å®¶çŒœå®Œåå†æ­æ™“ã€‚</li>
</ul>
<h4 data-id="heading-7">3. æ‰‘å…‹ç‰Œ (Poker)</h4>
<p>ä¸€ä¸ªæç®€çš„æŠ½ç‰Œå·¥å…·ã€‚</p>
<ul>
<li>è‡ªå®šä¹‰å¼ æ•° ï¼šé»˜è®¤æŠ½3å¼ ï¼Œä¹Ÿå¯ä»¥æ ¹æ®è§„åˆ™è°ƒæ•´ã€‚</li>
<li>å¤§å°ç‹å¼€å…³ ï¼šæ”¯æŒé…ç½®æ˜¯å¦åŒ…å«å¤§å°ç‹ã€‚</li>
</ul>
<h4 data-id="heading-8">4. çŒœæ•°å­— (Guess Number)</h4>
<p>ç»å…¸çš„â€œé«˜ä½çŒœâ€æ¸¸æˆï¼Œéå¸¸é€‚åˆä½œä¸ºé…’æ¡Œæƒ©ç½šæ¸¸æˆã€‚</p>
<ul>
<li>èŒƒå›´è®¾å®š ï¼šæ”¯æŒ 1-99 å’Œ 1-999 ä¸¤ç§éš¾åº¦ã€‚</li>
<li>èƒœåˆ©ç‰¹æ•ˆ ï¼šçŒœä¸­æ•°å­—åä¼šæœ‰å…¨å±çƒŸèŠ±ç‰¹æ•ˆï¼Œåº†ç¥èƒœåˆ©ï¼ˆæˆ–è€…è¿æ¥æƒ©ç½šï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-9">ğŸ›  æŠ€æœ¯å®ç°åˆ†äº«</h3>
<h4 data-id="heading-10">0. å¼€å‘å·¥å…·é€‰æ‹©</h4>
<ul>
<li>AIå¼€å‘å·¥å…·æˆ‘é€‰ç”¨äº†TRAEï¼Œç¡®å®åœ¨å›½å†…ç”¨èµ·æ¥æ–¹ä¾¿å¤ªå¤šäº†ã€‚</li>
<li>å¤§æ¨¡å‹æˆ‘é€‰æ‹©è°·æ­Œçš„gemini3proï¼Œå®ƒå®ç°UIçš„èƒ½åŠ›è®©æˆ‘çœ¼å‰ä¸€äº®ï¼Œå·²ç»ç¦»ä¸å¼€äº†ã€‚</li>
</ul>
<h4 data-id="heading-11">1. æŠ€æœ¯æ ˆé€‰æ‹©</h4>
<ul>
<li>å‰ç«¯ ï¼šåŸç”Ÿå¾®ä¿¡å°ç¨‹åº (WXML, WXSS, JS)ã€‚åŸç”Ÿå¼€å‘è™½ç„¶ç¹çï¼Œä½†åœ¨æ€§èƒ½å’Œä½“éªŒä¸Šæ˜¯æœ€ä¼˜çš„ï¼Œç‰¹åˆ«æ˜¯å¯¹äºéœ€è¦é¢‘ç¹åŠ¨ç”»äº¤äº’çš„æ¸¸æˆç±»åº”ç”¨ã€‚</li>
<li>åç«¯ ï¼š LeanCloud (Serverless) ã€‚å¯¹äºè¿™ç§è½»é‡çº§çš„å°ç¨‹åºï¼ŒServerless æ˜¯ç»ä½³é€‰æ‹©ã€‚æˆ‘ä¸éœ€è¦ç»´æŠ¤æœåŠ¡å™¨ï¼Œåªéœ€è¦é€šè¿‡ API è·å–é¢˜ç›®æ•°æ®ï¼Œçœå¿ƒçœåŠ›ã€‚</li>
<li>å›½é™…åŒ– ï¼šå†…ç½®äº† i18n æ¨¡å—ï¼Œä¸ºæœªæ¥çš„å¤šè¯­è¨€æ”¯æŒåšå¥½äº†å‡†å¤‡ã€‚</li>
</ul>
<h4 data-id="heading-12">2. æ²‰æµ¸å¼ UI è®¾è®¡</h4>
<p>ä¸ºäº†æ‰“é€ â€œå¤œé—´æ¨¡å¼â€çš„èšä¼šæ°›å›´ï¼Œæˆ‘å°†æ•´ä½“ UI é£æ ¼å®šè°ƒä¸ºæ·±è‰²ç³»ã€‚</p>
<ul>
<li>è‡ªå®šä¹‰å¯¼èˆªæ  ï¼šä¸ºäº†æœ€å¤§åŒ–å¯è§†é¢ç§¯å’Œç»Ÿä¸€è§†è§‰é£æ ¼ï¼Œæˆ‘å–æ¶ˆäº†åŸç”Ÿå¯¼èˆªæ ï¼Œå®ç°äº†è‡ªå®šä¹‰ Navigation Barï¼Œå®Œç¾é€‚é…å„ç§åˆ˜æµ·å±æœºå‹ã€‚</li>
<li>è§¦æ„Ÿåé¦ˆ ï¼šåœ¨ç”¨æˆ·äº¤äº’çš„å…³é”®èŠ‚ç‚¹ï¼ˆå¦‚æŠ½å¡ã€æ‘‡éª°å­ã€æŒ‰é’®ç‚¹å‡»ï¼‰éƒ½åŠ å…¥äº† wx.vibrateShortçš„è½»å¾®éœ‡åŠ¨åé¦ˆï¼Œæå‡æ“ä½œçš„ç¡®è®¤æ„Ÿã€‚</li>
</ul>
<h4 data-id="heading-13">3. åŠ¨ç”»ä¸æ€§èƒ½</h4>
<ul>
<li>Canvas çƒŸèŠ± ï¼šçŒœæ•°å­—èƒœåˆ©æ—¶çš„çƒŸèŠ±æ•ˆæœä½¿ç”¨äº† Canvas ç»˜åˆ¶ï¼Œä¿è¯äº†æµç•…åº¦ã€‚</li>
<li>CSS3 åŠ¨ç”» ï¼šå¡ç‰‡çš„ç¿»è½¬ã€å…¥åœºåŠ¨ç”»ä¸»è¦ä¾èµ– CSS3 transform å’Œ transition ï¼Œå‡å°‘ JS çº¿ç¨‹çš„å‹åŠ›ã€‚</li>
<li>ç²’å­çˆ†ç‚¸æ•ˆæœï¼šå¼•å…¥äº†three.jsçš„åº“ï¼Œå¤ªå¥½ç”¨äº†åªèƒ½è¯´ï¼</li>
</ul>
<h3 data-id="heading-14">ğŸ”® æœªæ¥å±•æœ›</h3>
<p>ç›®å‰çš„ã€ç ´å†°ç¥å™¨ã€‘å·²ç»èƒ½æ»¡è¶³åŸºç¡€çš„èšä¼šéœ€æ±‚ï¼Œä½†æˆ‘è¿˜æœ‰å¾ˆå¤šæƒ³æ³•ï¼š</p>
<ul>
<li>æ›´å¤šæ¸¸æˆ ï¼šæ¯”å¦‚â€œè°æ˜¯å§åº•â€ã€â€œä½ ç”»æˆ‘çŒœâ€ç­‰å¤šäººåœ¨çº¿äº’åŠ¨æ¸¸æˆã€‚</li>
<li>é¢˜åº“å…±å»º ï¼šå…è®¸ç”¨æˆ·æäº¤è‡ªå·±çš„çœŸå¿ƒè¯å¤§å†’é™©é¢˜ç›®ã€å®¡æ ¸é¢˜ç›®ã€è‡ªå®šä¹‰å¡ç»„ç­‰ã€‚</li>
<li>è”æœºæ¨¡å¼ ï¼šä¸ä»…ä»…æ˜¯çº¿ä¸‹ä¼ æ‰‹æœºç©ï¼Œæœªæ¥å¸Œæœ›èƒ½æ”¯æŒé¢å¯¹é¢å»ºæˆ¿ï¼Œå¤§å®¶åœ¨è‡ªå·±çš„æ‰‹æœºä¸Šæ“ä½œã€‚</li>
</ul>
<h5 data-id="heading-15">æ„Ÿè°¢å¤§å®¶ä½¿ç”¨ã€ç ´å†°ç¥å™¨ã€‘ï¼Œå¦‚æœä½ æœ‰ä»»ä½•å»ºè®®æˆ–å‘ç°äº† Bugï¼Œæ¬¢è¿åœ¨å°ç¨‹åºé‡Œç»™æˆ‘ç•™è¨€ï¼</h5></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CryptoAiAdminé¡¹ç›®æ•°æ®åº“è¡¨è‡ªåŠ¨åˆ›å»ºå’Œåˆå§‹åŒ–]]></title>    <link>https://juejin.cn/post/7588086766248706099</link>    <guid>https://juejin.cn/post/7588086766248706099</guid>    <pubDate>2025-12-27T12:55:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588086766248706099" data-draft-id="7588067055482355721" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CryptoAiAdminé¡¹ç›®æ•°æ®åº“è¡¨è‡ªåŠ¨åˆ›å»ºå’Œåˆå§‹åŒ–"/> <meta itemprop="keywords" content="åç«¯,Python,FastAPI"/> <meta itemprop="datePublished" content="2025-12-27T12:55:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆ›æ–°æŠ€æœ¯é˜"/> <meta itemprop="url" content="https://juejin.cn/user/4361127086785497"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CryptoAiAdminé¡¹ç›®æ•°æ®åº“è¡¨è‡ªåŠ¨åˆ›å»ºå’Œåˆå§‹åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4361127086785497/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆ›æ–°æŠ€æœ¯é˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T12:55:57.000Z" title="Sat Dec 27 2025 12:55:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. æ¦‚è¿°</h2>
<p>æœ¬ç³»ç»Ÿé‡‡ç”¨äº†åŸºäº SQLAlchemy 2.0 çš„å¼‚æ­¥æ•°æ®åº“æ¶æ„ï¼Œå®ç°äº†è‡ªåŠ¨åŒ–çš„æ•°æ®åº“è¡¨åˆ›å»ºå’ŒåŸºç¡€æ•°æ®åˆå§‹åŒ–ã€‚æ•´ä¸ªåˆå§‹åŒ–è¿‡ç¨‹ç”± <code>InitializeData</code> ç±»ï¼ˆä½äº <code>app/scripts/initialize.py</code>ï¼‰ç»Ÿä¸€ç®¡ç†ï¼Œéµå¾ª"å…ˆåˆ›å»ºè¡¨ç»“æ„ï¼Œå†åˆå§‹åŒ–æ•°æ®"çš„åŸåˆ™ï¼Œç¡®ä¿æ•°æ®å®Œæ•´æ€§å’Œä¾èµ–å…³ç³»æ­£ç¡®æ€§ã€‚</p>
<h2 data-id="heading-1">2. æ•°æ®åº“è¿æ¥é…ç½®</h2>
<h3 data-id="heading-2">2.1 è¿æ¥ç®¡ç†</h3>
<p>ç³»ç»Ÿä½¿ç”¨ <code>app/core/database.py</code> ä¸­çš„å‡½æ•°åˆ›å»ºæ•°æ®åº“è¿æ¥ï¼š</p>
<ul>
<li><code>create_engine_and_session()</code>: åˆ›å»ºåŒæ­¥æ•°æ®åº“å¼•æ“å’Œä¼šè¯å·¥å‚</li>
<li><code>create_async_engine_and_session()</code>: åˆ›å»ºå¼‚æ­¥æ•°æ®åº“å¼•æ“å’Œä¼šè¯å·¥å‚</li>
</ul>
<p>è¿™äº›å‡½æ•°ä»é…ç½®æ–‡ä»¶ä¸­è¯»å–æ•°æ®åº“è¿æ¥å‚æ•°ï¼Œæ”¯æŒå¤šç§æ•°æ®åº“ç±»å‹ï¼ˆSQLiteã€MySQLã€PostgreSQLï¼‰ã€‚</p>
<h3 data-id="heading-3">2.2 æ ¸å¿ƒé…ç½®å‚æ•°</h3>
<ul>
<li>æ•°æ®åº“è¿æ¥URL: <code>settings.DB_URI</code>ï¼ˆåŒæ­¥ï¼‰å’Œ <code>settings.ASYNC_DB_URI</code>ï¼ˆå¼‚æ­¥ï¼‰</li>
<li>è¿æ¥æ± é…ç½®: åŒ…æ‹¬è¿æ¥æ± å¤§å°ã€å›æ”¶æ—¶é—´ã€é¢„æ£€æŸ¥ç­‰</li>
<li>æ—¥å¿—é…ç½®: æ§åˆ¶æ˜¯å¦è¾“å‡ºSQLè¯­å¥</li>
</ul>
<h2 data-id="heading-4">3. æ¨¡å‹å®šä¹‰æ¶æ„</h2>
<h3 data-id="heading-5">3.1 åŸºç¡€æ¨¡å‹è®¾è®¡</h3>
<p>ç³»ç»Ÿé‡‡ç”¨äº†Mixinæ¨¡å¼å®ç°æ¨¡å‹çš„å¤ç”¨å’Œæ‰©å±•ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MappedBase</span>(AsyncAttrs, DeclarativeBase):
    __abstract__: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">True</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ModelMixin</span>(<span class="hljs-title class_ inherited__">MappedBase</span>):
    __abstract__: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">True</span>
    <span class="hljs-comment"># æä¾›é€šç”¨å­—æ®µï¼šidã€uuidã€statusã€descriptionã€created_timeã€updated_time</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserMixin</span>(<span class="hljs-title class_ inherited__">MappedBase</span>):
    __abstract__: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">True</span>
    <span class="hljs-comment"># æä¾›ç”¨æˆ·å®¡è®¡å­—æ®µï¼šcreated_idã€updated_id</span>
</code></pre>
<h3 data-id="heading-6">3.2 ä¸šåŠ¡æ¨¡å‹å®šä¹‰</h3>
<p>ä¸šåŠ¡æ¨¡å‹é€šè¿‡ç»§æ‰¿åŸºç¡€æ¨¡å‹å®ç°ï¼Œä¾‹å¦‚ç”¨æˆ·æ¨¡å‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">UserModel</span>(ModelMixin, UserMixin):
    __tablename__: <span class="hljs-built_in">str</span> = <span class="hljs-string">"sys_user"</span>
    __table_args__: <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-built_in">str</span>] = ({<span class="hljs-string">'comment'</span>: <span class="hljs-string">'ç”¨æˆ·è¡¨'</span>})
    
    username: Mapped[<span class="hljs-built_in">str</span>] = mapped_column(String(<span class="hljs-number">32</span>), nullable=<span class="hljs-literal">False</span>, unique=<span class="hljs-literal">True</span>, comment=<span class="hljs-string">"ç”¨æˆ·å/ç™»å½•è´¦å·"</span>)
    password: Mapped[<span class="hljs-built_in">str</span>] = mapped_column(String(<span class="hljs-number">255</span>), nullable=<span class="hljs-literal">False</span>, comment=<span class="hljs-string">"å¯†ç å“ˆå¸Œ"</span>)
    <span class="hljs-comment"># å…¶ä»–å­—æ®µ...</span>
    
    <span class="hljs-comment"># å…³è”å…³ç³»</span>
    dept: Mapped[<span class="hljs-string">"DeptModel | None"</span>] = relationship(back_populates=<span class="hljs-string">"users"</span>, lazy=<span class="hljs-string">"selectin"</span>)
    roles: Mapped[<span class="hljs-built_in">list</span>[<span class="hljs-string">"RoleModel"</span>]] = relationship(secondary=<span class="hljs-string">"sys_user_roles"</span>, back_populates=<span class="hljs-string">"users"</span>, lazy=<span class="hljs-string">"selectin"</span>)
</code></pre>
<h2 data-id="heading-7">4. è¡¨åˆ›å»ºè¿‡ç¨‹</h2>
<h3 data-id="heading-8">4.1 æ¨¡å‹åŠ è½½ä¸ä¾èµ–æ’åº</h3>
<p>åœ¨ <code>InitializeData</code> ç±»ä¸­ï¼Œæ¨¡å‹æŒ‰ç…§ä¾èµ–å…³ç³»æ’åºï¼š</p>
<pre><code class="hljs language-python" lang="python">self.prepare_init_models = [
    MenuModel,
    ParamsModel,
    DeptModel,
    RoleModel,
    DictTypeModel,
    DictDataModel,
    PositionModel,
    UserModel,
    UserRolesModel,
]
</code></pre>
<h3 data-id="heading-9">4.2 è¡¨åˆ›å»ºå®ç°</h3>
<p>è¡¨åˆ›å»ºé€šè¿‡ SQLAlchemy çš„ <code>metadata.create_all()</code> æ–¹æ³•å®ç°ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init_create_table</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-literal">None</span>:
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> async_engine.begin() <span class="hljs-keyword">as</span> conn:
            <span class="hljs-keyword">await</span> conn.run_sync(MappedBase.metadata.create_all)
        log.info(<span class="hljs-string">"âœ…ï¸ æ•°æ®åº“è¡¨ç»“æ„åˆå§‹åŒ–å®Œæˆ"</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        log.error(<span class="hljs-string">f"âŒï¸ æ•°æ®åº“è¡¨ç»“æ„åˆå§‹åŒ–å¤±è´¥: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)
        <span class="hljs-keyword">raise</span>
</code></pre>
<p>è¿™ä¸ªæ–¹æ³•ä¼šè‡ªåŠ¨åˆ›å»ºæ‰€æœ‰ç»§æ‰¿è‡ª <code>MappedBase</code> çš„æ¨¡å‹å¯¹åº”çš„æ•°æ®åº“è¡¨ï¼Œå¹¶å¤„ç†è¡¨ä¹‹é—´çš„å¤–é”®å…³ç³»ã€‚</p>
<h2 data-id="heading-10">5. æ•°æ®åˆå§‹åŒ–è¿‡ç¨‹</h2>
<h3 data-id="heading-11">5.1 åˆå§‹åŒ–æ•°æ®å­˜å‚¨</h3>
<p>åŸºç¡€æ•°æ®å­˜å‚¨åœ¨ <code>app/scripts/data/</code> ç›®å½•ä¸‹çš„ JSON æ–‡ä»¶ä¸­ï¼Œæ¯ä¸ªæ–‡ä»¶å¯¹åº”ä¸€ä¸ªè¡¨ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">data</span>/
â”œâ”€â”€ sys_dept.json
â”œâ”€â”€ sys_dict_data.json
â”œâ”€â”€ sys_dict_type.json
â”œâ”€â”€ sys_menu.json
â”œâ”€â”€ sys_param.json
â”œâ”€â”€ sys_role.json
â”œâ”€â”€ sys_user.json
â””â”€â”€ sys_user_roles.json
</code></pre>
<h3 data-id="heading-12">5.2 æ•°æ®åŠ è½½ä¸æ’å…¥</h3>
<p>æ•°æ®åˆå§‹åŒ–è¿‡ç¨‹åŒ…æ‹¬ä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li><strong>æ£€æŸ¥è¡¨æ˜¯å¦å·²æœ‰æ•°æ®</strong>ï¼šé¿å…é‡å¤åˆå§‹åŒ–</li>
<li><strong>è¯»å–åˆå§‹åŒ–æ•°æ®æ–‡ä»¶</strong>ï¼šä» JSON æ–‡ä»¶ä¸­åŠ è½½æ•°æ®</li>
<li><strong>ç‰¹æ®Šæ•°æ®å¤„ç†</strong>ï¼š
<ul>
<li>åµŒå¥—æ•°æ®å¤„ç†ï¼ˆå¦‚éƒ¨é—¨å’Œèœå•çš„æ ‘å½¢ç»“æ„ï¼‰</li>
<li>å…³è”æ•°æ®å¤„ç†ï¼ˆå¦‚å­—å…¸æ•°æ®ä¸å­—å…¸ç±»å‹çš„å…³è”ï¼‰</li>
</ul>
</li>
<li><strong>æ‰¹é‡æ’å…¥æ•°æ®</strong>ï¼šä½¿ç”¨ <code>db.add_all()</code> å’Œ <code>db.flush()</code> æ‰¹é‡æ’å…¥</li>
</ol>
<h3 data-id="heading-13">5.3 ç‰¹æ®Šæ•°æ®å¤„ç†å®ç°</h3>
<h4 data-id="heading-14">5.3.1 åµŒå¥—æ•°æ®å¤„ç†</h4>
<p>å¯¹äºå…·æœ‰æ ‘å½¢ç»“æ„çš„æ•°æ®ï¼ˆå¦‚éƒ¨é—¨å’Œèœå•ï¼‰ï¼Œç³»ç»Ÿä½¿ç”¨é€’å½’å‡½æ•°åˆ›å»ºå¯¹è±¡ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">__create_objects_with_children</span>(<span class="hljs-params">self, data: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">dict</span>], model_class</span>) -&gt; <span class="hljs-built_in">list</span>:
    objs = []
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">create_object</span>(<span class="hljs-params">obj_data: <span class="hljs-built_in">dict</span></span>):
        children_data = obj_data.pop(<span class="hljs-string">'children'</span>, [])
        obj = model_class(**obj_data)
        <span class="hljs-keyword">if</span> children_data:
            obj.children = [create_object(child) <span class="hljs-keyword">for</span> child <span class="hljs-keyword">in</span> children_data]
        <span class="hljs-keyword">return</span> obj
    
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> data:
        objs.append(create_object(item))
    
    <span class="hljs-keyword">return</span> objs
</code></pre>
<h4 data-id="heading-15">5.3.2 å…³è”æ•°æ®å¤„ç†</h4>
<p>å¯¹äºå­˜åœ¨å…³è”å…³ç³»çš„æ•°æ®ï¼ˆå¦‚ç”¨æˆ·ä¸è§’è‰²ï¼‰ï¼Œç³»ç»Ÿå…ˆåˆå§‹åŒ–ä¸»è¡¨æ•°æ®ï¼Œå†åˆå§‹åŒ–å…³è”è¡¨æ•°æ®ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¤„ç†å­—å…¸ç±»å‹è¡¨ï¼Œä¿å­˜ç±»å‹æ˜ å°„</span>
<span class="hljs-keyword">elif</span> table_name == <span class="hljs-string">"sys_dict_type"</span>:
    objs = []
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> data:
        obj = model(**item)
        objs.append(obj)
        dict_type_mapping[item[<span class="hljs-string">'dict_type'</span>]] = obj
<span class="hljs-comment"># å¤„ç†å­—å…¸æ•°æ®è¡¨ï¼Œæ·»åŠ dict_type_idå…³è”</span>
<span class="hljs-keyword">elif</span> table_name == <span class="hljs-string">"sys_dict_data"</span>:
    objs = []
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> data:
        dict_type = item.get(<span class="hljs-string">'dict_type'</span>)
        <span class="hljs-keyword">if</span> dict_type <span class="hljs-keyword">in</span> dict_type_mapping:
            item[<span class="hljs-string">'dict_type_id'</span>] = dict_type_mapping[dict_type].<span class="hljs-built_in">id</span>
        <span class="hljs-keyword">else</span>:
            log.warning(<span class="hljs-string">f"âš ï¸  æœªæ‰¾åˆ°å­—å…¸ç±»å‹ <span class="hljs-subst">{dict_type}</span>ï¼Œè·³è¿‡è¯¥å­—å…¸æ•°æ®"</span>)
            <span class="hljs-keyword">continue</span>
        objs.append(model(**item))
</code></pre>
<h2 data-id="heading-16">6. å®Œæ•´åˆå§‹åŒ–æµç¨‹</h2>
<p>æ•°æ®åº“åˆå§‹åŒ–çš„å®Œæ•´æµç¨‹ç”± <code>init_db()</code> æ–¹æ³•ç»Ÿä¸€åè°ƒï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">init_db</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-literal">None</span>:
    <span class="hljs-comment"># å…ˆåˆ›å»ºè¡¨ç»“æ„</span>
    <span class="hljs-keyword">await</span> self.__init_create_table()
    
    <span class="hljs-comment"># å†åˆå§‹åŒ–æ•°æ®</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> async_db_session() <span class="hljs-keyword">as</span> session:
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> session.begin():
            <span class="hljs-keyword">await</span> self.__init_data(session)
            <span class="hljs-keyword">await</span> session.commit()
</code></pre>
<h2 data-id="heading-17">8. æ€»ç»“</h2>
<p>æœ¬ç³»ç»Ÿçš„æ•°æ®åº“åˆå§‹åŒ–è¿‡ç¨‹æ˜¯ä¸€ä¸ªé«˜åº¦è‡ªåŠ¨åŒ–ã€å¯æ‰©å±•çš„æ¶æ„ï¼Œé€šè¿‡ SQLAlchemy 2.0 çš„å¼‚æ­¥ç‰¹æ€§å®ç°äº†é«˜æ•ˆçš„æ•°æ®åº“æ“ä½œã€‚æ•´ä¸ªè¿‡ç¨‹éµå¾ªäº†"å…ˆåˆ›å»ºè¡¨ç»“æ„ï¼Œå†åˆå§‹åŒ–æ•°æ®"çš„åŸåˆ™ï¼Œç¡®ä¿äº†æ•°æ®çš„å®Œæ•´æ€§å’Œä¾èµ–å…³ç³»çš„æ­£ç¡®æ€§ã€‚åŒæ—¶ï¼Œç³»ç»Ÿé‡‡ç”¨äº†Mixinæ¨¡å¼å®ç°æ¨¡å‹çš„å¤ç”¨å’Œæ‰©å±•ï¼Œæé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[NestJS å¦‚ä½•é…ç½®ç¯å¢ƒå˜é‡]]></title>    <link>https://juejin.cn/post/7588080521445261358</link>    <guid>https://juejin.cn/post/7588080521445261358</guid>    <pubDate>2025-12-27T12:56:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588080521445261358" data-draft-id="7588080521445244974" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="NestJS å¦‚ä½•é…ç½®ç¯å¢ƒå˜é‡"/> <meta itemprop="keywords" content="NestJS"/> <meta itemprop="datePublished" content="2025-12-27T12:56:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å½“æ—¶åªé“å¯»å¸¸"/> <meta itemprop="url" content="https://juejin.cn/user/48816529358711"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            NestJS å¦‚ä½•é…ç½®ç¯å¢ƒå˜é‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/48816529358711/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å½“æ—¶åªé“å¯»å¸¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T12:56:06.000Z" title="Sat Dec 27 2025 12:56:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    26
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ‰€éœ€ä¾èµ–</h2>
<pre><code class="hljs language-bash" lang="bash">pnpm i @nestjs/config js-yaml lodash
pnpm i @types/js-yaml @types/lodash cross-env -D
</code></pre>
<h2 data-id="heading-1">ç›®å½•ç»“æ„</h2>
<pre><code class="hljs language-bash" lang="bash">|- config
| |- config.yaml <span class="hljs-comment"># é€šç”¨é…ç½®æ–‡ä»¶</span>
| |- config.local.yaml <span class="hljs-comment"># é€šç”¨é…ç½®æ–‡ä»¶æœ¬åœ°ç‰ˆï¼ˆä¸ä¼šè¢« Git è®°å½•ï¼‰</span>
| |- config.development.yaml <span class="hljs-comment"># å¼€å‘ç¯å¢ƒé…ç½®æ–‡ä»¶ç‰ˆ</span>
| |- config.development.local.yaml <span class="hljs-comment"># å¼€å‘ç¯å¢ƒé…ç½®æ–‡ä»¶ç‰ˆï¼ˆä¸ä¼šè¢« Git è®°å½•ï¼‰</span>
| |- config.production.yaml <span class="hljs-comment"># ç”Ÿäº§é…ç½®æ–‡ä»¶æœ¬åœ°ç‰ˆ</span>
| |- config.production.local.yaml <span class="hljs-comment"># ç”Ÿäº§é…ç½®æ–‡ä»¶æœ¬åœ°ç‰ˆï¼ˆä¸ä¼šè¢« Git è®°å½•ï¼‰</span>
|- src
| |- common
|   |- config.module.ts <span class="hljs-comment"># è‡ªå®šä¹‰çš„ç¯å¢ƒé…ç½®æ¨¡å—</span>
| |- app.module.ts
|- .gitignore
|- nest-cli.json
</code></pre>
<h2 data-id="heading-2">æ¶‰åŠæ–‡ä»¶</h2>
<h3 data-id="heading-3">1ã€package.json</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cross-env NODE_ENV=production nest build"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cross-env NODE_ENV=development nest start"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"start:dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cross-env NODE_ENV=development nest start --watch"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"start:debug"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cross-env NODE_ENV=development nest start --debug --watch"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"start:prod"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node dist/main"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"start:deploy"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node main.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"@nestjs/config"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.0.2"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"js-yaml"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.1.1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"lodash"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.17.21"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"@types/js-yaml"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.0.9"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"@types/lodash"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.17.21"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"cross-env"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^10.1.0"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-4">2ã€config.module.ts</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { join } <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>
<span class="hljs-keyword">import</span> jsYaml <span class="hljs-keyword">from</span> <span class="hljs-string">'js-yaml'</span>
<span class="hljs-keyword">import</span> { merge } <span class="hljs-keyword">from</span> <span class="hljs-string">'lodash'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>
<span class="hljs-keyword">import</span> { readFileSync, existsSync } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ConfigModule</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">NestConfigModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/config'</span>

<span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">imports</span>: [
    <span class="hljs-title class_">NestConfigModule</span>.<span class="hljs-title function_">forRoot</span>({
      <span class="hljs-attr">load</span>: [configuration],
      <span class="hljs-attr">isGlobal</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">cache</span>: <span class="hljs-literal">true</span>,
    }),
  ],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConfigModule</span> {}

<span class="hljs-comment">/**
 * è¯»å–æŒ‡å®šè·¯å¾„çš„ YAML é…ç½®æ–‡ä»¶å¹¶è½¬ä¸ºå¯¹è±¡ç±»å‹
 * <span class="hljs-doctag">@param</span> filePath YAML é…ç½®æ–‡ä»¶çš„è·¯å¾„
 * <span class="hljs-doctag">@returns</span> è§£æåçš„é…ç½®å¯¹è±¡ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™è¿”å›ç©ºå¯¹è±¡
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">loadConfig</span>(<span class="hljs-params">filePath: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">existsSync</span>(filePath) ? (jsYaml.<span class="hljs-title function_">load</span>(<span class="hljs-title function_">readFileSync</span>(filePath, <span class="hljs-string">'utf-8'</span>)) <span class="hljs-keyword">as</span> <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;) : {}
}

<span class="hljs-comment">/**
 * é…ç½®åŠ è½½æ ¸å¿ƒå‡½æ•°ï¼šè¯»å–å¹¶åˆå¹¶å¤šç¯å¢ƒ YAML é…ç½®æ–‡ä»¶
 *
 * åŠŸèƒ½è¯´æ˜ï¼š
 *  - æ ¹æ® NODE_ENV åŒºåˆ†å¼€å‘/ç”Ÿäº§ç¯å¢ƒï¼Œç¡®å®šé…ç½®æ–‡ä»¶å­˜æ”¾ç›®å½•
 *  - æŒ‰ä¼˜å…ˆçº§è¯»å–4ç±» YAML é…ç½®æ–‡ä»¶ï¼ˆé€šç”¨â†’é€šç”¨æœ¬åœ°â†’ç¯å¢ƒâ†’ç¯å¢ƒæœ¬åœ°ï¼‰
 *  - æ·±åº¦åˆå¹¶é…ç½®å¯¹è±¡ï¼Œåç»­é…ç½®ä¼šè¦†ç›–å‰é¢çš„åŒååµŒå¥—å±æ€§
 *  - æœ€ç»ˆè¿”å›åˆå¹¶åçš„å®Œæ•´é…ç½®ï¼Œä¾› NestJS ConfigModule ä½¿ç”¨
 *
 * é…ç½®ä¼˜å…ˆçº§ï¼ˆä»ä½åˆ°é«˜ï¼Œåé¢è¦†ç›–å‰é¢ï¼‰ï¼š
 *  - config.yaml &lt; config.local.yaml &lt; config.{NODE_ENV}.yaml &lt; config.{NODE_ENV}.local.yaml
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">configuration</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ä»ç¯å¢ƒå˜é‡ä¸­è·å–å½“å‰è¿è¡Œç¯å¢ƒï¼Œé»˜è®¤ä¸ºå¼€å‘ç¯å¢ƒ</span>
  <span class="hljs-keyword">const</span> { <span class="hljs-variable constant_">NODE_ENV</span> = <span class="hljs-string">'development'</span> } = process.<span class="hljs-property">env</span>

  <span class="hljs-comment">// ç¡®å®šé…ç½®æ–‡ä»¶çš„å­˜æ”¾ç›®å½•</span>
  <span class="hljs-comment">//  - å¼€å‘ç¯å¢ƒ: è¯»å–é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ config æ–‡ä»¶å¤¹</span>
  <span class="hljs-comment">//  - ç”Ÿäº§ç¯å¢ƒ: ç›´æ¥è¯»å–å½“å‰æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•</span>
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CONFIG_DIR_PATH</span> = <span class="hljs-variable constant_">NODE_ENV</span> === <span class="hljs-string">'development'</span> ? <span class="hljs-title function_">join</span>(process.<span class="hljs-title function_">cwd</span>(), <span class="hljs-string">'config'</span>) : __dirname

  <span class="hljs-comment">// å®šä¹‰å„ç±»é…ç½®æ–‡ä»¶çš„è·¯å¾„</span>
  <span class="hljs-comment">// é€šç”¨é…ç½®æ–‡ä»¶ï¼ˆæ‰€æœ‰ç¯å¢ƒå…±äº«çš„åŸºç¡€é…ç½®ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">YAML_COMMON_CONFIG_PATH</span> = <span class="hljs-title function_">join</span>(<span class="hljs-variable constant_">CONFIG_DIR_PATH</span>, <span class="hljs-string">'config.yaml'</span>)
  <span class="hljs-comment">// é€šç”¨æœ¬åœ°é…ç½®æ–‡ä»¶ï¼ˆæœ¬åœ°å¼€å‘è¦†ç›–é€šç”¨é…ç½®çš„ä¸ªæ€§åŒ–è®¾ç½®ï¼Œä¸åº”æäº¤åˆ°ä»£ç ä»“åº“ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">YAML_COMMON_CONFIG_LOCAL_PATH</span> = <span class="hljs-title function_">join</span>(<span class="hljs-variable constant_">CONFIG_DIR_PATH</span>, <span class="hljs-string">'config.local.yaml'</span>)
  <span class="hljs-comment">// ç‰¹å®šç¯å¢ƒçš„é…ç½®æ–‡ä»¶ï¼ˆé’ˆå¯¹å½“å‰ç¯å¢ƒçš„ä¸“ç”¨é…ç½®ï¼Œå¦‚å¼€å‘/ç”Ÿäº§ç¯å¢ƒçš„å·®å¼‚é…ç½®ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">YAML_ENV_CONFIG_PATH</span> = <span class="hljs-title function_">join</span>(<span class="hljs-variable constant_">CONFIG_DIR_PATH</span>, <span class="hljs-string">`config.<span class="hljs-subst">${NODE_ENV || <span class="hljs-string">'development'</span>}</span>.yaml`</span>)
  <span class="hljs-comment">// ç‰¹å®šç¯å¢ƒçš„æœ¬åœ°é…ç½®æ–‡ä»¶ï¼ˆæœ¬åœ°è¦†ç›–å½“å‰ç¯å¢ƒé…ç½®çš„ä¸ªæ€§åŒ–è®¾ç½®ï¼Œä¸åº”æäº¤åˆ°ä»£ç ä»“åº“ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">YAML_ENV_CONFIG_LOCAL_PATH</span> = <span class="hljs-title function_">join</span>(<span class="hljs-variable constant_">CONFIG_DIR_PATH</span>, <span class="hljs-string">`config.<span class="hljs-subst">${NODE_ENV || <span class="hljs-string">'development'</span>}</span>.local.yaml`</span>)

  <span class="hljs-comment">// è¯»å–å„ç±»é…ç½®æ–‡ä»¶çš„å†…å®¹</span>
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">COMMON_CONFIG</span> = <span class="hljs-title function_">loadConfig</span>(<span class="hljs-variable constant_">YAML_COMMON_CONFIG_PATH</span>)
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">COMMON_CONFIG_LOCAL</span> = <span class="hljs-title function_">loadConfig</span>(<span class="hljs-variable constant_">YAML_COMMON_CONFIG_LOCAL_PATH</span>)
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">ENV_CONFIG</span> = <span class="hljs-title function_">loadConfig</span>(<span class="hljs-variable constant_">YAML_ENV_CONFIG_PATH</span>)
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">ENV_CONFIG_LOCAL</span> = <span class="hljs-title function_">loadConfig</span>(<span class="hljs-variable constant_">YAML_ENV_CONFIG_LOCAL_PATH</span>)

  <span class="hljs-comment">// æ·±åº¦åˆå¹¶é…ç½®ï¼Œåé¢çš„é…ç½®ä¼šè¦†ç›–å‰é¢çš„åŒåé…ç½®</span>
  <span class="hljs-comment">// è¿™æ ·æ—¢ä¿è¯äº†åŸºç¡€é…ç½®çš„é€šç”¨æ€§ï¼Œåˆå…è®¸ç¯å¢ƒå’Œæœ¬åœ°é…ç½®è¿›è¡Œä¸ªæ€§åŒ–å®šåˆ¶</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">merge</span>(<span class="hljs-variable constant_">COMMON_CONFIG</span>, <span class="hljs-variable constant_">COMMON_CONFIG_LOCAL</span>, <span class="hljs-variable constant_">ENV_CONFIG</span>, <span class="hljs-variable constant_">ENV_CONFIG_LOCAL</span>)
}
</code></pre>
<h3 data-id="heading-5">3ã€app.module.ts</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ConfigModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./common/config.module.ts'</span>

<span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">ConfigModule</span>]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppModule</span> {}
</code></pre>
<h3 data-id="heading-6">4ã€.gitignore</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># dotenv environment variable files</span>
.env.local
*.local.yaml
</code></pre>
<h3 data-id="heading-7">5ã€nest-cli.json</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"$schema"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://json.schemastore.org/nest-cli"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"collection"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"@nestjs/schematics"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"sourceRoot"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"src"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"assets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span> <span class="hljs-attr">"include"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"../package.json"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"outDir"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/package.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span> <span class="hljs-attr">"include"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"../pnpm-lock.yaml"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"outDir"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist/pnpm-lock.yaml"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span> <span class="hljs-attr">"include"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"../config/config.yaml"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"outDir"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist"</span> <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"deleteOutDir"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"builder"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"webpack"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"generateOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"flat"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"spec"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-8">ä½¿ç”¨ä»‹ç»</h2>
<h3 data-id="heading-9">1ã€service æœåŠ¡ä½¿ç”¨</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ConfigService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/config'</span>

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> configService: ConfigService</span>) {}
  
  <span class="hljs-keyword">public</span> <span class="hljs-title function_">testEnvConfig</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> dbHost = <span class="hljs-variable language_">this</span>.<span class="hljs-property">configService</span>.<span class="hljs-property">get</span>&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">'database.host'</span>,<span class="hljs-string">'localhost'</span>)
  }
}
</code></pre>
<h3 data-id="heading-10">2ã€main.ts ä¸­ä½¿ç”¨</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.module'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ConfigService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/config'</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">await</span> <span class="hljs-title class_">NestFactory</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">AppModule</span>)
  
  <span class="hljs-comment">// ä»åº”ç”¨å®¹å™¨ä¸­è·å–é…ç½®æœåŠ¡å®ä¾‹ï¼Œç”±äº ConfigModule è¢«è®¾ç½®ä¸ºå…¨å±€æ¨¡å—ï¼Œè¿™é‡Œå¯ä»¥ç›´æ¥è·å–</span>
  <span class="hljs-keyword">const</span> configService = app.<span class="hljs-title function_">get</span>(<span class="hljs-title class_">ConfigService</span>)
  <span class="hljs-keyword">const</span> serverPort = configService.<span class="hljs-property">get</span>&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-string">'server.port'</span>, <span class="hljs-number">3000</span>)
  
  <span class="hljs-comment">// å¯åŠ¨åº”ç”¨å¹¶ç›‘å¬é…ç½®ä¸­æŒ‡å®šçš„ç«¯å£</span>
  <span class="hljs-comment">// è¿™ä¸€æ­¥ä¼šå¯åŠ¨ HTTP æœåŠ¡å™¨ï¼Œä½¿åº”ç”¨å¼€å§‹æ¥æ”¶å¤–éƒ¨è¯·æ±‚</span>
  <span class="hljs-keyword">await</span> app.<span class="hljs-title function_">listen</span>(serverPort)
  
  <span class="hljs-comment">// æ‰“å°æœåŠ¡å¯åŠ¨ä¿¡æ¯ï¼Œæ–¹ä¾¿å¼€å‘è€…åœ¨ç»ˆç«¯æŸ¥çœ‹è®¿é—®åœ°å€</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'\n--------------------------------------------------'</span>)
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`âœ  Local:    http://localhost:<span class="hljs-subst">${serverPort}</span>`</span>)
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'--------------------------------------------------'</span>)
}

<span class="hljs-comment">// è°ƒç”¨å¯åŠ¨å‡½æ•°ï¼Œå¯åŠ¨åº”ç”¨</span>
<span class="hljs-title function_">bootstrap</span>()
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[openrestyç›‘æ§]]></title>    <link>https://juejin.cn/post/7588080521445294126</link>    <guid>https://juejin.cn/post/7588080521445294126</guid>    <pubDate>2025-12-27T13:41:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588080521445294126" data-draft-id="7588149079416913974" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="openrestyç›‘æ§"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-27T13:41:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£çš„å½’å®¿55"/> <meta itemprop="url" content="https://juejin.cn/user/2840793779297303"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            openrestyç›‘æ§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2840793779297303/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£çš„å½’å®¿55
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T13:41:03.000Z" title="Sat Dec 27 2025 13:41:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1å°æ—¶+
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">ä»‹ç»</h4>
<p>è¿™ç¯‡æ–‡ç« ä¸»è¦è®²è§£äº†openrestyçš„ç›‘æ§ç•Œé¢ï¼ŒåŒ…æ‹¬ç›‘æ§ç•Œé¢çš„å®‰è£…ï¼Œå±•ç¤ºï¼Œä»¥åŠä½¿ç”¨ã€‚è¿™é‡Œæ¨èçš„openrestyçš„ç›‘æ§ä¸»è¦æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯qpsï¼ŒçŠ¶æ€ç ï¼Œupstreamè¿æ¥æ•°ç­‰nginxæŒ‡æ ‡çš„ç›‘æ§å¤§å±ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯luaçš„å¼‚å¸¸æ—¥å¿—çš„ç›‘æ§å±•ç¤ºã€‚å‰è€…è®©æˆ‘ä»¬å¯ä»¥æŒæ¡nginxæ•´ä½“çš„å¥åº·çŠ¶æ€ï¼Œåè€…åˆ™ä»ä¸šåŠ¡è§’åº¦å‘Šè¯‰æˆ‘ä»¬ï¼Œå½“å‰ä»€ä¹ˆåœ¨å‡ºé”™ã€‚</p>
<h4 data-id="heading-1">æˆæœå±•ç¤º</h4>
<p>è¿™é‡Œè´´ä¸€ä¸‹grafanaæœ€ç»ˆå±•ç¤ºå‡ºæ¥çš„ç›‘æ§æ•ˆæœ</p>
<h6 data-id="heading-2">ç›‘æ§å¤§å±</h6>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d755ab8b53a242e78490a19d76182596~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO55qE5b2S5a6_NTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767447665&amp;x-signature=d%2FAK1RJHE4C0pWGsyoUr6Wg%2FJ3g%3D" alt="openresty_1.jpg" loading="lazy"/></p>
<h6 data-id="heading-3">å¼‚å¸¸ç›‘æ§</h6>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96d275d52b6046adba82e0dab7ce9ec4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO55qE5b2S5a6_NTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767447665&amp;x-signature=HP%2B%2FnTQep43Kk6c47Tg142OprZ0%3D" alt="openresty_2.jpg" loading="lazy"/></p>
<br/>
<h4 data-id="heading-4">ç›‘æ§å¤§å±</h4>
<p>è¿™ä¸ªç›‘æ§å¤§å±ä¸»è¦æ˜¯é€šè¿‡openrestyçš„prometheusåº“æ¥æ”¶é›†æ•°æ®çš„ï¼Œæœ‰å…´è¶£çš„å¯ä»¥çœ‹ä¸‹è¿™ä¸ªå®˜æ–¹æ–‡æ¡£ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fknyar%2Fnginx-lua-prometheus" target="_blank" title="https://github.com/knyar/nginx-lua-prometheus" ref="nofollow noopener noreferrer">github.com/knyar/nginxâ€¦</a> ã€‚è¿™ä¸ªåº“é‡Œé¢æä¾›äº†ä¸€äº›åŠŸèƒ½çš„å‡½æ•°ï¼Œå¯ä»¥é€šè¿‡è¿™äº›å‡½æ•°å¯¼å‡ºè‡ªå·±æ„Ÿå…´è¶£çš„æŒ‡æ ‡å¹¶å±•ç¤ºï¼Œæœ¬æ–‡å°±é¢å¤–å¯¼å‡ºäº†nginxä¸­çš„upstreamçš„è¿æ¥æ•°è¿™ä¸€æŒ‡æ ‡ï¼Œç”¨äºååŠ©æ’æŸ¥é—®é¢˜ã€‚å½“ç„¶ï¼Œè¿™ä¸ªåº“å·²ç»é»˜è®¤å¯¼å‡ºäº†qpsï¼Œè¿æ¥æ•°ï¼Œå»¶è¿Ÿç­‰é‡è¦ä¿¡æ¯ã€‚</p>
<h6 data-id="heading-5">å®‰è£…</h6>
<p>é¦–å…ˆä»è¿™ä¸ªgité¡¹ç›®è·å–åº“æ–‡ä»¶è¿›è¡Œå®‰è£…ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fknyar%2Fnginx-lua-prometheus" target="_blank" title="https://github.com/knyar/nginx-lua-prometheus" ref="nofollow noopener noreferrer">github.com/knyar/nginxâ€¦</a> ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªåº“æ–‡ä»¶ç”Ÿæ•ˆçš„å‰ææ˜¯éœ€è¦nginxå·²ç»å®‰è£…äº†ngx_luaæ¨¡å—ï¼Œä¸è¿‡å¯¹äºopenrestyæ¥è¯´ï¼Œè¿™æ˜¯è‡ªå¸¦çš„ï¼Œä¸éœ€è¦é¢å¤–å®‰è£…ã€‚ç„¶åå¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤è¿›è¡Œå®‰è£…ï¼š</p>
<ol>
<li>å°†gité¡¹ç›®ä¸­çš„prometheus.luaï¼Œprometheus_keys.luaï¼Œprometheus_resty_counter.lua è¿™å‡ ä¸ªåº“æ–‡ä»¶æ”¾ç½®åˆ°luaçš„lua_package_path æŒ‡å‘çš„æ–‡ä»¶è·¯å¾„</li>
<li>åœ¨nginxé¡¹ç›®å¯åŠ¨æ—¶åˆå§‹åŒ–prometheusåº“ï¼Œå³åœ¨nginx.confé…ç½®æ–‡ä»¶ä¸­å¢åŠ ä»¥ä¸‹å†…å®¹ï¼š</li>
</ol>

<pre><code class="hljs language-csharp" lang="csharp">lua_shared_dict prometheus_metrics <span class="hljs-number">10</span>M;
lua_package_path <span class="hljs-string">"/path/to/nginx-lua-prometheus/?.lua;;"</span>;

init_worker_by_lua_block {
  prometheus = require(<span class="hljs-string">"prometheus"</span>).<span class="hljs-keyword">init</span>(<span class="hljs-string">"prometheus_metrics"</span>)

  metric_requests = prometheus:counter(
    <span class="hljs-string">"nginx_http_requests_total"</span>, <span class="hljs-string">"Number of HTTP requests"</span>, {<span class="hljs-string">"host"</span>, <span class="hljs-string">"status"</span>})
  metric_latency = prometheus:histogram(
    <span class="hljs-string">"nginx_http_request_duration_seconds"</span>, <span class="hljs-string">"HTTP request latency"</span>, {<span class="hljs-string">"host"</span>})
  metric_connections = prometheus:gauge(
    <span class="hljs-string">"nginx_http_connections"</span>, <span class="hljs-string">"Number of HTTP connections"</span>, {<span class="hljs-string">"state"</span>})
}

log_by_lua_block {
  metric_requests:inc(<span class="hljs-number">1</span>, {ngx.<span class="hljs-keyword">var</span>.server_name, ngx.<span class="hljs-keyword">var</span>.status})
  metric_latency:observe(tonumber(ngx.<span class="hljs-keyword">var</span>.request_time), {ngx.<span class="hljs-keyword">var</span>.server_name})
}
</code></pre>
<p>3.  å¢åŠ ä¸€ä¸ªè·¯ç”±ï¼Œå°†nginxçš„ç›‘æ§æ•°æ®å¯¼å‡ºï¼Œæ”¯æŒprometheusæŠ“å–ï¼Œå¯ä»¥åœ¨nginx.confä¸­å¢åŠ ä»¥ä¸‹é…ç½®ï¼š</p>

<pre><code class="hljs language-csharp" lang="csharp">server {
  listen <span class="hljs-number">9145</span>;
  allow <span class="hljs-number">192.168</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>/<span class="hljs-number">16</span>;
  deny all;
  location /metrics {
    content_by_lua_block {
      metric_connections:<span class="hljs-keyword">set</span>(ngx.<span class="hljs-keyword">var</span>.connections_reading, {<span class="hljs-string">"reading"</span>})
      metric_connections:<span class="hljs-keyword">set</span>(ngx.<span class="hljs-keyword">var</span>.connections_waiting, {<span class="hljs-string">"waiting"</span>})
      metric_connections:<span class="hljs-keyword">set</span>(ngx.<span class="hljs-keyword">var</span>.connections_writing, {<span class="hljs-string">"writing"</span>})
      prometheus:collect()
    }
  }
}
</code></pre>
<p>4.  ä¸Šé¢å‡ ä¸ªäº‹å®˜æ–¹çš„å®‰è£…æ­¥éª¤ï¼Œæˆ‘è¿™é‡ŒåŠ äº†ä¸€ä¸ªå¯¼å‡ºupstreamä¿¡æ¯çš„è·¯ç”±ï¼Œå¯ä»¥å†™åœ¨/metrics è¿™ä¸ªè·¯ç”±ä¸‹é¢</p>

<pre><code class="hljs language-lua" lang="lua">location = /upstreams_metrics {
            default_type text/plain;
            content_by_lua_block {
                <span class="hljs-keyword">local</span> <span class="hljs-built_in">concat</span> = <span class="hljs-built_in">table</span>.<span class="hljs-built_in">concat</span>
                <span class="hljs-keyword">local</span> upstream = <span class="hljs-built_in">require</span> <span class="hljs-string">"ngx.upstream"</span>
                <span class="hljs-keyword">local</span> get_servers = upstream.get_servers
                <span class="hljs-keyword">local</span> get_upstreams = upstream.get_upstreams
                <span class="hljs-keyword">local</span> get_primary_peers = upstream.get_primary_peers

                <span class="hljs-keyword">local</span> us = get_upstreams()
                <span class="hljs-keyword">for</span> _, u <span class="hljs-keyword">in</span> <span class="hljs-built_in">ipairs</span>(us) <span class="hljs-keyword">do</span>
                    <span class="hljs-keyword">local</span> srvs, err = get_primary_peers(u)
                    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> srvs <span class="hljs-keyword">then</span>
                        ngx.say(<span class="hljs-string">"#failed to get servers in upstream "</span>, u)
                    <span class="hljs-keyword">else</span>
                        <span class="hljs-keyword">for</span> _, server <span class="hljs-keyword">in</span> <span class="hljs-built_in">ipairs</span>(srvs) <span class="hljs-keyword">do</span>
                            <span class="hljs-keyword">local</span> message = <span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">'nginx_upstream_conn_total{upstream="%s",server="%s"} %s'</span>,<span class="hljs-built_in">tostring</span>(u),<span class="hljs-built_in">tostring</span>(server.name),<span class="hljs-built_in">tostring</span>(server.conns <span class="hljs-keyword">or</span> <span class="hljs-number">0</span>))
                            ngx.say(message)
                        <span class="hljs-keyword">end</span>
                    <span class="hljs-keyword">end</span>
                <span class="hljs-keyword">end</span>
            }
        }
</code></pre>
<p>5.  è¿™é‡Œnginxå°±å¯ä»¥æŠŠç›‘æ§æ•°æ®å¯¼å‡ºäº†ï¼Œæ¥ä¸‹æ¥éœ€è¦é…ç½®prometheusæŠ“å–è¿™éƒ¨åˆ†æ•°æ®ï¼Œè¿™é‡Œåˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œå¦‚æœæ˜¯éƒ¨ç½²çš„prometheuså®ä¾‹çš„è¯ï¼Œå¯ä»¥ç›´æ¥æŠ“å–å¯¹åº”nginxå®ä¾‹çš„ç«¯å£</p>

<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">'nginx-moniter'</span>
  <span class="hljs-attr">static_configs:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">'10.10.1.123:9145'</span>]
    <span class="hljs-attr">labels:</span>
      <span class="hljs-attr">exporter:</span> <span class="hljs-string">'nginx'</span>
</code></pre>
<p>6.  å¦‚æœæ˜¯ä½¿ç”¨k8séƒ¨ç½²çš„nginxï¼Œå¹¶ä¸”prometheusæ˜¯ä½¿ç”¨operatoréƒ¨ç½²çš„ï¼Œé‚£å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼å¯¼å‡º</p>

<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">k8sçš„nginx</span> <span class="hljs-string">serviceé…ç½®ï¼š</span>

<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span>
  <span class="hljs-attr">labels:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span>
    <span class="hljs-attr">group:</span> <span class="hljs-string">default</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">ClusterIP</span>
  <span class="hljs-attr">ports:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">metrics</span>
      <span class="hljs-attr">port:</span> <span class="hljs-number">9145</span>
      <span class="hljs-attr">targetPort:</span> <span class="hljs-number">9145</span>
      <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span>
    <span class="hljs-attr">group:</span> <span class="hljs-string">default</span>
    
    
<span class="hljs-string">k8sçš„nginxçš„deploymentè®°å¾—åœ¨é…ç½®ä¸­åŠ ä¸‹ç«¯å£ï¼š</span>

<span class="hljs-attr">containers:</span>
  <span class="hljs-attr">ports:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">9023</span>


<span class="hljs-string">æœ€åæ˜¯prometheusçš„serviceMonitorçš„é…ç½®ï¼š</span>

<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">monitoring.coreos.com/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">ServiceMonitor</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">monitoring</span>
  <span class="hljs-attr">labels:</span>
    <span class="hljs-attr">app.kubernetes.io/component:</span> <span class="hljs-string">monitor</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">endpoints:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">port:</span> <span class="hljs-string">metrics</span>
    <span class="hljs-attr">path:</span> <span class="hljs-string">/metrics</span>
    <span class="hljs-attr">interval:</span> <span class="hljs-string">30s</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">port:</span> <span class="hljs-string">metrics</span>
    <span class="hljs-attr">path:</span> <span class="hljs-string">/upstreams_metrics</span>
    <span class="hljs-attr">interval:</span> <span class="hljs-string">30s</span>
  <span class="hljs-attr">namespaceSelector:</span>
    <span class="hljs-attr">matchNames:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">default</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">matchExpressions:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">key:</span> <span class="hljs-string">name</span>
      <span class="hljs-attr">operator:</span> <span class="hljs-string">In</span>
      <span class="hljs-attr">values:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">nginx</span>
</code></pre>
<p>7.  è¿™æ ·prometheuså°±æŠ“å–åˆ°nginxçš„ç›‘æ§æ•°æ®äº†ï¼Œæ¥ä¸‹æ¥çš„å°±æ˜¯åœ¨grafanaä¸­é…ç½®å¤§å±è¿›è¡Œå±•ç¤ºï¼Œè¿™ä¸ªå¯ä»¥åœ¨grafana dashboardç½‘é¡µä¸Šæ‰¾å–œæ¬¢çš„ç•Œé¢ï¼Œæ¯”å¦‚10223è¿™ä¸ªidï¼Œæˆ‘è¿™è¾¹æ˜¯ä½¿ç”¨åŸå§‹çš„ç•Œé¢ç„¶åæ”¹é€ äº†ä¸‹ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffengdeguisu%2Farticle%2Fblob%2Fmain%2Fopenresty%25E7%259B%2591%25E6%258E%25A7%2Fnginx%25E7%259B%2591%25E6%258E%25A7%25E5%25A4%25A7%25E5%25B1%258F.json" target="_blank" title="https://github.com/fengdeguisu/article/blob/main/openresty%E7%9B%91%E6%8E%A7/nginx%E7%9B%91%E6%8E%A7%E5%A4%A7%E5%B1%8F.json" ref="nofollow noopener noreferrer">å¯ä»¥é€šè¿‡æ­¤é“¾æ¥ä¸‹è½½jsonæ–‡ä»¶</a>ï¼Œéœ€è¦çš„å¯ä»¥åœ¨grafanaçš„å¯¼å…¥æŒ‰é’®ä¸­è¾“å…¥jsonæ ¼å¼çš„æ•°æ®æ¥å¯¼å…¥ç•Œé¢ã€‚</p>
<h6 data-id="heading-6">ä½¿ç”¨ä»‹ç»</h6>
<p>å®‰è£…å®Œä¹‹åï¼Œå°±å¯ä»¥çœ‹åˆ°ä¸Šé¢æˆæœä»‹ç»ä¸­çš„nginxç›‘æ§å¤§å±çš„æ•ˆæœäº†ï¼Œä»–å¯ä»¥åŒæ—¶ç›‘æ§å¤šä¸ªnginxå®ä¾‹ï¼Œä¸ŠåŠéƒ¨åˆ†çš„å…¨ç«™ç›‘æ§æ•°æ®ï¼Œå±•ç¤ºäº†æ‰€æœ‰nginxå®ä¾‹æ±‡æ€»è¿‡åçš„qpsï¼Œè¿æ¥æ•°ï¼Œé”™è¯¯æ•°ï¼Œå»¶è¿Ÿç­‰ä¿¡æ¯ï¼Œä¸‹åŠéƒ¨åˆ†æ˜¯æŒ‰ç…§ä¸»æœºç»´åº¦æˆ–è€…podç»´åº¦æ±‡æ€»çš„å¯¹åº”æ•°æ®ã€‚ä¸‹é¢ç®€å•çš„ä»‹ç»ä¸‹ï¼š</p>
<p><strong>qps</strong>ï¼š å¯ä»¥ç”¨äºæŸ¥çœ‹æ¯ç§’çš„è¯·æ±‚æ•°ï¼Œç¡®è®¤æ˜¯å¦æœ‰çªå¢è¯·æ±‚</p>
<p><strong>å¹³å‡æ´»è·ƒè¿æ¥æ•°</strong>ï¼š ç”¨äºæŸ¥çœ‹å®¢æˆ·ç«¯çš„è¿æ¥æ•°ï¼Œå¦‚æœçªå¢ï¼Œå¯èƒ½æ˜¯å†…éƒ¨å¤„ç†æ…¢äº†ï¼Œéœ€è¦æŸ¥çœ‹æ˜¯å¦æœ‰ç“¶é¢ˆ</p>
<p><strong>å¹³å‡è¯·æ±‚å“åº”æ—¶é—´</strong>ï¼š ç”¨äºæŸ¥çœ‹å“åº”æ—¶é—´ï¼Œå¦‚æœå¤ªé«˜ï¼Œè¯´æ˜å®¢æˆ·ä½“éªŒä¼šæ”¶åˆ°ä¸¥é‡å½±å“ï¼Œéœ€è¦è¿›è¡Œæ’æŸ¥</p>
<p><strong>5xxé”™è¯¯ç‡</strong>ï¼š 500çŠ¶æ€ç çš„å æ¯”ï¼Œè¿™ä¸ªå€¼å‡é«˜çš„è¯ï¼Œè¯´æ˜æœåŠ¡å™¨å†…éƒ¨å‡ºç°äº†é—®é¢˜ï¼Œæ— æ³•å¤„ç†è¯·æ±‚ï¼Œ<strong>å¯ä»¥é’ˆå¯¹è¿™ä¸ªå€¼å¢åŠ ç›‘æ§é¢„è­¦ï¼ŒåŠæ—¶å‘ç°é—®é¢˜å¹¶å¤„ç†</strong>ã€‚</p>
<p><strong>upstreamå¹³å‡æ´»è·ƒè¿æ¥æ•°</strong>ï¼š  å±•ç¤ºäº†ä»¥upstreamæ¥è¿›è¡Œæ±‡æ€»çš„æ´»è·ƒè¿æ¥æ•°é‡ï¼Œå¦‚æœæŸä¸ªæ›²çº¿æ¯”è¾ƒé«˜ï¼Œè¯´æ˜å¯¹åº”çš„åç«¯æœåŠ¡å™¨å¤„ç†æ…¢ï¼Œå¯¼è‡´è¿æ¥æ± æº¢å‡ºäº†ï¼Œéœ€è¦è¿›è¡Œå¤„ç†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„å‰ææ˜¯ä½¿ç”¨nginxçš„upstreamæ¥ä»£ç†åç«¯ï¼Œå¹¶ä¸”å¯ç”¨keepalive è¿™ä¸ªé…ç½®çš„è¿æ¥æ± åŠŸèƒ½ï¼Œè¿™ä¹Ÿæ˜¯æ¨èçš„åšæ³•ï¼Œèƒ½é€šè¿‡å¤ç”¨åç«¯ä»£ç†è¿æ¥æé«˜æ€§èƒ½ã€‚</p>
<h6 data-id="heading-7">ç›‘æ§å¤§å±è®¾ç½®äº†å‡ ä¸ªé€‰é¡¹ï¼Œè¿™é‡Œä¹Ÿä»‹ç»ä¸‹ï¼š</h6>
<p><strong>upstreamæ±‡æ€»ç±»å‹</strong>ï¼š ç”¨äºè®¾ç½®ä¸‹åŠéƒ¨åˆ†çš„upstreamæ´»è·ƒè¿æ¥æ•°ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®ä¸ºpodæ¥æŸ¥çœ‹æ¯ä¸ªnginxå®ä¾‹çš„æ±‡æ€»ä»£ç†è¿æ¥æ•°ï¼Œå¦‚æœè¿™ä¸ªå€¼çªå¢ï¼Œé‚£ä»£è¡¨å¯¹åº”çš„nginxå®ä¾‹çš„åç«¯ä»£ç†æœ‰é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨upstreamé€‰é¡¹æ¥æŸ¥çœ‹æ˜¯å“ªä¸ªåç«¯æœåŠ¡ç»„æœ‰é—®é¢˜
<strong>qpsåˆ†ç»„ç»´åº¦</strong>ï¼š ç”¨äºè®¾ç½®ä¸‹åŠéƒ¨åˆ†çš„å„ä¸ªæŒ‡æ ‡çš„åˆ†ç»„ç»´åº¦ï¼Œç”±podå’Œinstantä¸¤ç§é€‰é¡¹ï¼Œåˆ†åˆ«æŒ‰ç…§nginxå®ä¾‹æˆ–è€…ä¸»æœºæ±‡æ€»ï¼Œåœ¨å‡ºç°çªå¢æƒ…å†µæ—¶ï¼Œå¯ä»¥ç”¨äºç¡®å®šæ˜¯å“ªä¸ªå®ä¾‹æœ‰é—®é¢˜ã€‚
<strong>upstream podå’Œupstream</strong>ï¼š ç”¨äºæŒ‡å®šæŸä¸ªå®ä¾‹æˆ–è€…åç«¯ä»£ç†æ¥æŸ¥çœ‹å¯¹åº”æ•°æ®</p>
<h6 data-id="heading-8">æ’æŸ¥é—®é¢˜æ–¹å¼</h6>
<p>æ¨èå¯ä»¥å…ˆçœ‹ä¸‹ä¸ŠåŠéƒ¨åˆ†çš„æ•´ä½“æ•°æ®ï¼Œç¡®è®¤é›†ç¾¤æ˜¯å¦æ­£å¸¸ï¼Œç„¶åå†æŸ¥çœ‹ä¸‹åŠéƒ¨åˆ†ï¼Œç¡®è®¤å‡ºé—®é¢˜çš„å®ä¾‹ã€‚</p>
<p>å‡ºé—®é¢˜çš„ç»´åº¦æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯éƒ¨åˆ†nginxå®ä¾‹æœ‰é—®é¢˜ï¼Œæ­¤æ—¶å¯ä»¥é€šè¿‡æŒ‰ç…§podåˆ†ç»„æŸ¥çœ‹ç›‘æ§æ‰¾åˆ°é—®é¢˜å®ä¾‹ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯æŸä¸ªåç«¯ä»£ç†æœåŠ¡æœ‰é—®é¢˜ï¼Œæ­¤æ—¶å¯ä»¥é€šè¿‡upstreamåˆ†ç»„æŸ¥çœ‹å‡ºé—®é¢˜çš„å…·ä½“åç«¯æœåŠ¡ã€‚</p>
<p>å¦‚æœæ˜¯æŸä¸ªåç«¯æœåŠ¡æœ‰é—®é¢˜ï¼Œæ¯”å¦‚å¤„ç†è¯·æ±‚å¾ˆæ…¢ï¼Œå°±ä¼šå‡ºç°nginxä¸­çš„å¯¹åº”çš„åç«¯ä»£ç†è¿æ¥æ•°æ¿€å¢ï¼Œç„¶åå› ä¸ºè¿æ¥æ•°å¤ªå¤šï¼Œå¯¼è‡´nginxæ•´ä½“å‡ºç°cpuä½¿ç”¨ç‡é«˜ï¼ŒæœåŠ¡æŠ¥é”™ç­‰æƒ…å†µï¼Œé€šè¿‡è¿™ä¸ªupstreamè¿æ¥æ•°çš„ç›‘æ§å°±å¯ä»¥è¯†åˆ«å‡º æœ‰é—®é¢˜çš„åç«¯æœåŠ¡ï¼Œå¿«é€ŸæŸ¥å‡ºé—®é¢˜ã€‚</p>
<br/>
<h4 data-id="heading-9">å¼‚å¸¸ç›‘æ§</h4>
<p>å¼‚å¸¸ç›‘æ§æ˜¯æŒ‡åœ¨ä½¿ç”¨luaå¤„ç†è¯·æ±‚æ—¶ï¼Œå¦‚æœæœ‰å€¼å¾—éœ€è¦æ³¨æ„çš„æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨errorçº§åˆ«è¿›è¡Œæ‰“å°ï¼ŒåŒæ—¶é€šè¿‡æ—¥å¿—æ”¶é›†ç³»ç»Ÿå°†errorçº§åˆ«çš„æ—¥å¿—è¿‡æ»¤å‡ºæ¥ï¼Œå¯¼å‡ºåˆ°prometheusä¸­ä½œä¸ºç›‘æ§ã€‚ è¿™æ ·ï¼Œä¸šåŠ¡çš„luaå¼‚å¸¸å’Œç³»ç»Ÿçš„å¼‚å¸¸å°±éƒ½å¯¼å…¥åˆ°prometheusä¸­äº†ï¼Œå¯ä»¥é€šè¿‡æŸ¥çœ‹è¿™éƒ¨åˆ†æœ€æ–°çš„æ•°æ®æ¥æ’æŸ¥å½“å‰ç³»ç»Ÿæ˜¯å¦æœ‰é—®é¢˜ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¢åŠ ç›‘æ§æ¥åŠæ—¶å‘ç°é—®é¢˜ã€‚</p>
<p>å…³äºæ­¤éƒ¨åˆ†ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹ç¬”è€…çš„å¦ä¸€ç¯‡æ–‡ç« <a href="https://juejin.cn/post/7580287891274186815" target="_blank" title="https://juejin.cn/post/7580287891274186815">ç›‘æ§åˆ©å™¨ï¼šjavaå¼‚å¸¸ç›‘æ§</a>ï¼Œè¿™ç¯‡æ–‡ç« å…·ä½“ä»‹ç»äº†å¯¼å‡ºjavaå¼‚å¸¸ç›‘æ§çš„ä¼˜åŠ¿å’Œå®ç°æ–¹å¼ã€‚</p>
<h6 data-id="heading-10">å®‰è£…</h6>
<ol>
<li>å¯ä»¥åœ¨éœ€è¦å…³æ³¨çš„åœ°æ–¹æ‰‹åŠ¨åŠ å…¥æ‰“å°ï¼Œä½¿ç”¨errorçº§åˆ«çš„æ—¥å¿—æ‰“å°ï¼Œå¦‚ ngx.log(ngx.ERR, "there is an error")</li>
<li>errorçº§åˆ«çš„æ—¥å¿—åœ¨æ‰“å°æ—¶ä¼šè‡ªå¸¦[error]çš„å­—ç¬¦ï¼Œåœ¨æ—¥å¿—æ”¶é›†ç«¯å°†nginxæ—¥å¿—ä¸­å¸¦æœ‰[error]å­—ç¬¦çš„æ—¥å¿—ç»Ÿä¸€è½¬å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­çš„æ—¥å¿—å°±éƒ½æ˜¯erroræ—¥å¿—ï¼ŒåŒ…æ‹¬ç”¨æˆ·æ‰“å°çš„å’Œnginxçš„ç³»ç»Ÿå¼‚å¸¸æ—¥å¿—ã€‚</li>
<li>ä½¿ç”¨mtailè§£æå¼‚å¸¸æ—¥å¿—æ–‡ä»¶ï¼Œå°†nginxçš„å¼‚å¸¸æ—¥å¿—å¯¼å‡ºåˆ°prometheusä¸­</li>
<li>grafanaå¢åŠ ç•Œé¢æ˜¾ç¤ºæœ€æ–°çš„nginxå¼‚å¸¸ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffengdeguisu%2Farticle%2Fblob%2Fmain%2Fopenresty%25E7%259B%2591%25E6%258E%25A7%2Fnginx%25E5%25BC%2582%25E5%25B8%25B8%25E7%259B%2591%25E6%258E%25A7.json" target="_blank" title="https://github.com/fengdeguisu/article/blob/main/openresty%E7%9B%91%E6%8E%A7/nginx%E5%BC%82%E5%B8%B8%E7%9B%91%E6%8E%A7.json" ref="nofollow noopener noreferrer">è¿™æ˜¯jsonæ–‡ä»¶çš„é“¾æ¥</a>,å¯ä»¥é€šè¿‡å¤åˆ¶jsonæ–‡ä»¶çš„å†…å®¹ï¼Œåœ¨grafanaçš„å¯¼å…¥ç•Œé¢å¯¼å…¥ã€‚</li>
</ol>
<h6 data-id="heading-11">ä½¿ç”¨æ–¹å¼</h6>
<p>å¯ä»¥åœ¨ç•Œé¢ç›´æ¥æŸ¥çœ‹ï¼Œæ ¹æ®é€‰æ‹©çš„æ—¥æœŸåŒºé—´ï¼Œä¼šæ˜¾ç¤ºæŒ‡å®šæ—¶é—´èŒƒå›´å†…çš„nginxå¼‚å¸¸ã€‚è¿™ä¸ªç›‘æ§ä¸»è¦æœ‰ä¸‰ç§ç”¨æ³•ï¼š</p>
<ol>
<li>åœ¨prometheusä¸­å¢åŠ ç›‘æ§è§„åˆ™ï¼Œå½“æŸä¸€æ—¶åˆ»çªç„¶å‡ºç°å¾ˆå¤šå¼‚å¸¸æ—¶è§¦å‘æŠ¥è­¦ï¼Œç”¨äºåŠæ—¶å‘ç°é—®é¢˜</li>
<li>åœ¨æ’æŸ¥nginxçš„é—®é¢˜æ—¶ï¼ŒæŸ¥çœ‹æ­¤ç›‘æ§ï¼Œå¯èƒ½ä¼šå‘ç°ä¸€äº›ç³»ç»Ÿå¼‚å¸¸ï¼Œè¯´ä¸å®šå°±èƒ½ç›´æ¥æ‰¾åˆ°é—®é¢˜åŸå› </li>
<li>åœ¨æ’æŸ¥é—®é¢˜ç»“æŸåï¼ŒæŸ¥çœ‹æ­¤ç›‘æ§ï¼Œåªæœ‰ç¡®ä¿è¿™ä¸ªç›‘æ§ä¸­çš„æœ€è¿‘å‡ åˆ†é’Ÿå·²ç»ç¡®å®æ²¡æœ‰æ–°å¼‚å¸¸äº†ï¼Œæ‰èƒ½å¤§æ¦‚ç‡è¯´æ˜nginxçš„é—®é¢˜è¢«è§£å†³äº†ï¼Œåªè¦è¿˜æœ‰ä¸æ–­åœ°æ–°å¢å¼‚å¸¸ï¼Œè¯´æ˜é—®é¢˜å¹¶æœªå½»åº•è§£å†³ã€‚</li>
</ol>
<h4 data-id="heading-12">ç»“è¯­</h4>
<p>ä»¥ä¸Šå°±æ˜¯è¿™ç¯‡æ–‡ç« çš„å†…å®¹ï¼Œä¸»è¦ä»‹ç»äº†ä¸¤ç§openrestyçš„ç›‘æ§æ–¹å¼ï¼Œå¸Œæœ›å¯¹å¤§å®¶ç›‘æ§å’Œæ’æŸ¥nginxé—®é¢˜æœ‰å¸®åŠ©ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redisson å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7588104741610323978</link>    <guid>https://juejin.cn/post/7588104741610323978</guid>    <pubDate>2025-12-27T14:44:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588104741610323978" data-draft-id="7588067055481913353" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redisson å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-27T14:44:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GKunLi"/> <meta itemprop="url" content="https://juejin.cn/user/430664725579725"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redisson å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/430664725579725/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GKunLi
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T14:44:59.000Z" title="Sat Dec 27 2025 14:44:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»33åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Redissonï¼šåˆ†å¸ƒå¼ç³»ç»Ÿçš„Javaç¥å™¨ ğŸš€</h2>
<p>Redissonæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ã€è®¾è®¡ä¼˜é›…çš„Redis Javaå®¢æˆ·ç«¯ï¼Œå®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªç®€å•çš„Redisè¿æ¥å™¨ï¼Œæ›´æ˜¯ä¸€ä¸ªå®Œæ•´çš„åˆ†å¸ƒå¼è§£å†³æ–¹æ¡ˆï¼æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœä½ æ­£åœ¨æ„å»ºä¸€ä¸ªé«˜å¹¶å‘çš„ç”µå•†å¹³å°ï¼Œéœ€è¦å¤„ç†å¤§é‡ç”¨æˆ·çš„ç§’æ€è¯·æ±‚ï¼Œæˆ–è€…éœ€è¦åœ¨å¤šä¸ªæœåŠ¡å®ä¾‹ä¹‹é—´å…±äº«ä¼šè¯çŠ¶æ€ï¼ŒRedissonå°±æ˜¯ä½ çš„å¾—åŠ›åŠ©æ‰‹ã€‚</p>
<p><strong>Redissonçš„æ ¸å¿ƒç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>ğŸ¯ <strong>ä¸°å¯Œçš„åˆ†å¸ƒå¼å¯¹è±¡</strong>ï¼šæä¾›åˆ†å¸ƒå¼é”ã€é›†åˆã€è®¡æ•°å™¨ç­‰Javaå¸¸ç”¨å¯¹è±¡</li>
<li>âš¡ <strong>é«˜æ€§èƒ½</strong>ï¼šåŸºäºNettyå®ç°ï¼Œæ€§èƒ½å“è¶Š</li>
<li>ğŸ”’ <strong>åˆ†å¸ƒå¼é”</strong>ï¼šæ”¯æŒå¯é‡å…¥é”ã€å…¬å¹³é”ã€è”é”ç­‰å¤šç§é”ç±»å‹</li>
<li>ğŸ“Š <strong>åˆ†å¸ƒå¼é›†åˆ</strong>ï¼šæä¾›Mapã€Setã€Listã€Queueç­‰åˆ†å¸ƒå¼é›†åˆç±»å‹</li>
<li>ğŸª <strong>é«˜çº§åŠŸèƒ½</strong>ï¼šæ”¯æŒå¸ƒéš†è¿‡æ»¤å™¨ã€å»¶è¿Ÿé˜Ÿåˆ—ã€åˆ†å¸ƒå¼æœåŠ¡ç­‰</li>
<li>ğŸŒ <strong>å¤šRedisæ¨¡å¼</strong>ï¼šæ”¯æŒå•æœºã€ä¸»ä»ã€å“¨å…µã€é›†ç¾¤ç­‰å¤šç§Rediséƒ¨ç½²æ¨¡å¼</li>
</ul>
<p>Redissonè®©åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¼€å‘å˜å¾—ç®€å•è€Œæœ‰è¶£ï¼Œè®©ä½ çš„ä»£ç åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ä¹Ÿèƒ½åƒå•æœºåº”ç”¨ä¸€æ ·ä¼˜é›…åœ°è¿è¡Œã€‚</p>
<h2 data-id="heading-1">é«˜çº§åŠŸèƒ½å®æˆ˜</h2>
<h3 data-id="heading-2">1. åˆ†å¸ƒå¼é”</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RLock;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;
<span class="hljs-keyword">import</span> java.util.concurrent.locks.Lock;

<span class="hljs-comment">/**
 * åˆ†å¸ƒå¼é”ç”Ÿäº§çº§ä½¿ç”¨ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistributedLockExample</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DistributedLockExample</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }
    
    <span class="hljs-comment">/**
     * å¸¦è¶…æ—¶æ§åˆ¶çš„åˆ†å¸ƒå¼é”
     * 
     * <span class="hljs-doctag">@param</span> lockKey é”çš„key
     * <span class="hljs-doctag">@param</span> leaseTime è‡ªåŠ¨é‡Šæ”¾æ—¶é—´
     * <span class="hljs-doctag">@param</span> unit æ—¶é—´å•ä½
     * <span class="hljs-doctag">@param</span> task éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡
     * <span class="hljs-doctag">@return</span> ä»»åŠ¡æ‰§è¡Œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">executeWithLock</span><span class="hljs-params">(String lockKey, <span class="hljs-type">long</span> leaseTime, TimeUnit unit, Runnable task)</span> {
        <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> redissonClient.getLock(lockKey);
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// å°è¯•è·å–é”ï¼Œæœ€å¤šç­‰å¾…10ç§’ï¼Œé”è‡ªåŠ¨é‡Šæ”¾æ—¶é—´ä¸ºleaseTime</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">acquired</span> <span class="hljs-operator">=</span> lock.tryLock(<span class="hljs-number">10</span>, leaseTime, unit);
            <span class="hljs-keyword">if</span> (acquired) {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-comment">// æ‰§è¡Œä¸šåŠ¡é€»è¾‘</span>
                    task.run();
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                } <span class="hljs-keyword">finally</span> {
                    <span class="hljs-comment">// ç¡®ä¿é”è¢«é‡Šæ”¾ï¼Œé˜²æ­¢æ­»é”</span>
                    <span class="hljs-keyword">if</span> (lock.isHeldByCurrentThread()) {
                        lock.unlock();
                    }
                }
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"è·å–é”å¤±è´¥ï¼Œé”å·²è¢«å…¶ä»–çº¿ç¨‹æŒæœ‰: "</span> + lockKey);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
            System.err.println(<span class="hljs-string">"è·å–é”è¿‡ç¨‹ä¸­è¢«ä¸­æ–­: "</span> + e.getMessage());
            <span class="hljs-comment">// æ¢å¤ä¸­æ–­çŠ¶æ€</span>
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * çœ‹é—¨ç‹—æ¨¡å¼é” - è‡ªåŠ¨ç»­æœŸ
     * 
     * <span class="hljs-doctag">@param</span> lockKey é”çš„key
     * <span class="hljs-doctag">@param</span> task éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">executeWithWatchdogLock</span><span class="hljs-params">(String lockKey, Runnable task)</span> {
        <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> redissonClient.getLock(lockKey);
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä½¿ç”¨çœ‹é—¨ç‹—æ¨¡å¼ï¼ŒRedissonä¼šè‡ªåŠ¨ç»­æœŸ</span>
            lock.lock(<span class="hljs-number">30</span>, TimeUnit.SECONDS);
            <span class="hljs-keyword">try</span> {
                task.run();
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            } <span class="hljs-keyword">finally</span> {
                <span class="hljs-comment">// ç¡®ä¿é”è¢«é‡Šæ”¾</span>
                <span class="hljs-keyword">if</span> (lock.isHeldByCurrentThread()) {
                    lock.unlock();
                }
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ‰§è¡Œå¸¦é”ä»»åŠ¡æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
}
</code></pre>
<h3 data-id="heading-3">2. åˆ†å¸ƒå¼é›†åˆ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RList;
<span class="hljs-keyword">import</span> org.redisson.api.RMap;
<span class="hljs-keyword">import</span> org.redisson.api.RSet;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> java.util.Collection;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-comment">/**
 * åˆ†å¸ƒå¼é›†åˆç”Ÿäº§çº§ä½¿ç”¨ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistributedCollectionsExample</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DistributedCollectionsExample</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }
    
    <span class="hljs-comment">/**
     * åˆ†å¸ƒå¼åˆ—è¡¨æ“ä½œ
     * 
     * <span class="hljs-doctag">@param</span> listName åˆ—è¡¨åç§°
     * <span class="hljs-doctag">@param</span> items è¦æ·»åŠ çš„é¡¹ç›®
     * <span class="hljs-doctag">@return</span> æ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">operateList</span><span class="hljs-params">(String listName, Collection&lt;String&gt; items)</span> {
        <span class="hljs-keyword">try</span> {
            RList&lt;String&gt; list = redissonClient.getList(listName);
            
            <span class="hljs-comment">// æ·»åŠ å¤šä¸ªå…ƒç´ </span>
            list.addAll(items);
            
            <span class="hljs-comment">// è·å–åˆ—è¡¨å¤§å°</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> list.size();
            System.out.println(<span class="hljs-string">"åˆ—è¡¨ "</span> + listName + <span class="hljs-string">" çš„å¤§å°: "</span> + size);
            
            <span class="hljs-comment">// è·å–æŒ‡å®šèŒƒå›´çš„å…ƒç´ </span>
            <span class="hljs-keyword">if</span> (size &gt; <span class="hljs-number">0</span>) {
                <span class="hljs-type">int</span> <span class="hljs-variable">endIndex</span> <span class="hljs-operator">=</span> Math.min(<span class="hljs-number">10</span>, size); <span class="hljs-comment">// æœ€å¤šå–10ä¸ªå…ƒç´ </span>
                java.util.List&lt;String&gt; subList = list.subList(<span class="hljs-number">0</span>, endIndex);
                System.out.println(<span class="hljs-string">"åˆ—è¡¨å‰"</span> + endIndex + <span class="hljs-string">"ä¸ªå…ƒç´ : "</span> + subList);
            }
            
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ“ä½œåˆ—è¡¨æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * åˆ†å¸ƒå¼Mapæ“ä½œ
     * 
     * <span class="hljs-doctag">@param</span> mapName Mapåç§°
     * <span class="hljs-doctag">@param</span> data è¦å­˜å‚¨çš„æ•°æ®
     * <span class="hljs-doctag">@return</span> æ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">operateMap</span><span class="hljs-params">(String mapName, Map&lt;String, Object&gt; data)</span> {
        <span class="hljs-keyword">try</span> {
            RMap&lt;String, Object&gt; map = redissonClient.getMap(mapName);
            
            <span class="hljs-comment">// æ‰¹é‡æ·»åŠ æ•°æ®</span>
            map.putAll(data);
            
            <span class="hljs-comment">// åŸå­æ€§æ“ä½œç¤ºä¾‹ï¼šä»…å½“keyä¸å­˜åœ¨æ—¶æ‰æ·»åŠ </span>
            map.putIfAbsent(<span class="hljs-string">"newKey"</span>, <span class="hljs-string">"newValue"</span>);
            
            <span class="hljs-comment">// è·å–æ‰€æœ‰é”®å€¼å¯¹</span>
            System.out.println(<span class="hljs-string">"Map "</span> + mapName + <span class="hljs-string">" çš„æ‰€æœ‰é”®å€¼å¯¹: "</span> + map.readAllMap());
            
            <span class="hljs-comment">// è·å–Mapå¤§å°</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> map.size();
            System.out.println(<span class="hljs-string">"Map "</span> + mapName + <span class="hljs-string">" çš„å¤§å°: "</span> + size);
            
            <span class="hljs-comment">// å®‰å…¨åˆ é™¤é”®å€¼å¯¹</span>
            <span class="hljs-type">Object</span> <span class="hljs-variable">removedValue</span> <span class="hljs-operator">=</span> map.remove(<span class="hljs-string">"tempKey"</span>);
            System.out.println(<span class="hljs-string">"åˆ é™¤çš„é”®å€¼å¯¹: "</span> + removedValue);
            
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ“ä½œMapæ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * åˆ†å¸ƒå¼Setæ“ä½œ
     * 
     * <span class="hljs-doctag">@param</span> setName Setåç§°
     * <span class="hljs-doctag">@param</span> elements è¦æ·»åŠ çš„å…ƒç´ 
     * <span class="hljs-doctag">@return</span> æ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">operateSet</span><span class="hljs-params">(String setName, Collection&lt;String&gt; elements)</span> {
        <span class="hljs-keyword">try</span> {
            RSet&lt;String&gt; set = redissonClient.getSet(setName);
            
            <span class="hljs-comment">// æ·»åŠ å…ƒç´ å¹¶è¿”å›æ˜¯å¦æˆåŠŸæ·»åŠ ï¼ˆtrueè¡¨ç¤ºå…ƒç´ ä¸å­˜åœ¨ï¼Œfalseè¡¨ç¤ºå·²å­˜åœ¨ï¼‰</span>
            <span class="hljs-keyword">for</span> (String element : elements) {
                <span class="hljs-type">boolean</span> <span class="hljs-variable">added</span> <span class="hljs-operator">=</span> set.add(element);
                <span class="hljs-keyword">if</span> (!added) {
                    System.out.println(<span class="hljs-string">"å…ƒç´ å·²å­˜åœ¨: "</span> + element);
                }
            }
            
            <span class="hljs-comment">// æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">contains</span> <span class="hljs-operator">=</span> set.contains(<span class="hljs-string">"checkElement"</span>);
            System.out.println(<span class="hljs-string">"Set "</span> + setName + <span class="hljs-string">" åŒ…å« 'checkElement': "</span> + contains);
            
            <span class="hljs-comment">// è·å–Setå¤§å°</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> set.size();
            System.out.println(<span class="hljs-string">"Set "</span> + setName + <span class="hljs-string">" çš„å¤§å°: "</span> + size);
            
            <span class="hljs-comment">// è·å–æ‰€æœ‰å…ƒç´ </span>
            java.util.Set&lt;String&gt; allElements = set.readAll();
            System.out.println(<span class="hljs-string">"Set "</span> + setName + <span class="hljs-string">" çš„æ‰€æœ‰å…ƒç´ : "</span> + allElements);
            
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ“ä½œSetæ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
}
</code></pre>
<h3 data-id="heading-4">3. åˆ†å¸ƒå¼è®¡æ•°å™¨</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RAtomicLong;
<span class="hljs-keyword">import</span> org.redisson.api.RCountDownLatch;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * åˆ†å¸ƒå¼è®¡æ•°å™¨ç”Ÿäº§çº§ä½¿ç”¨ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistributedCountersExample</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DistributedCountersExample</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }
    
    <span class="hljs-comment">/**
     * åŸå­é•¿æ•´å‹è®¡æ•°å™¨æ“ä½œ
     * 
     * <span class="hljs-doctag">@param</span> counterName è®¡æ•°å™¨åç§°
     * <span class="hljs-doctag">@return</span> å½“å‰è®¡æ•°å€¼
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">operateAtomicCounter</span><span class="hljs-params">(String counterName)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">RAtomicLong</span> <span class="hljs-variable">atomicLong</span> <span class="hljs-operator">=</span> redissonClient.getAtomicLong(counterName);
            
            <span class="hljs-comment">// åŸå­é€’å¢å¹¶è¿”å›æ–°å€¼</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">newValue</span> <span class="hljs-operator">=</span> atomicLong.incrementAndGet();
            System.out.println(<span class="hljs-string">"è®¡æ•°å™¨ "</span> + counterName + <span class="hljs-string">" é€’å¢åå€¼: "</span> + newValue);
            
            <span class="hljs-comment">// åŸå­é€’å‡å¹¶è¿”å›æ–°å€¼</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">decrementedValue</span> <span class="hljs-operator">=</span> atomicLong.decrementAndGet();
            System.out.println(<span class="hljs-string">"è®¡æ•°å™¨ "</span> + counterName + <span class="hljs-string">" é€’å‡åå€¼: "</span> + decrementedValue);
            
            <span class="hljs-comment">// è·å–å½“å‰å€¼</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">currentValue</span> <span class="hljs-operator">=</span> atomicLong.get();
            System.out.println(<span class="hljs-string">"è®¡æ•°å™¨ "</span> + counterName + <span class="hljs-string">" å½“å‰å€¼: "</span> + currentValue);
            
            <span class="hljs-comment">// æ¡ä»¶æ›´æ–° - CASæ“ä½œ</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">updated</span> <span class="hljs-operator">=</span> atomicLong.compareAndSet(currentValue, currentValue + <span class="hljs-number">10</span>);
            <span class="hljs-keyword">if</span> (updated) {
                System.out.println(<span class="hljs-string">"è®¡æ•°å™¨ "</span> + counterName + <span class="hljs-string">" CASæ›´æ–°æˆåŠŸ"</span>);
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"è®¡æ•°å™¨ "</span> + counterName + <span class="hljs-string">" CASæ›´æ–°å¤±è´¥"</span>);
            }
            
            <span class="hljs-keyword">return</span> atomicLong.get();
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ“ä½œåŸå­è®¡æ•°å™¨æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * åˆ†å¸ƒå¼CountDownLatchæ“ä½œ
     * 
     * <span class="hljs-doctag">@param</span> latchName å€’è®¡æ—¶å™¨åç§°
     * <span class="hljs-doctag">@param</span> count åˆå§‹è®¡æ•°
     * <span class="hljs-doctag">@param</span> task å¾…æ‰§è¡Œçš„ä»»åŠ¡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operateCountDownLatch</span><span class="hljs-params">(String latchName, <span class="hljs-type">int</span> count, Runnable task)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">RCountDownLatch</span> <span class="hljs-variable">latch</span> <span class="hljs-operator">=</span> redissonClient.getCountDownLatch(latchName);
            
            <span class="hljs-comment">// è®¾ç½®åˆå§‹è®¡æ•°ï¼ˆä»…åœ¨è®¡æ•°ä¸º0æ—¶æœ‰æ•ˆï¼‰</span>
            <span class="hljs-keyword">if</span> (latch.getCount() == <span class="hljs-number">0</span>) {
                latch.trySetCount(count);
            }
            
            System.out.println(<span class="hljs-string">"å€’è®¡æ—¶å™¨ "</span> + latchName + <span class="hljs-string">" åˆå§‹è®¡æ•°: "</span> + latch.getCount());
            
            <span class="hljs-comment">// å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œä»»åŠ¡å¹¶å€’è®¡æ—¶</span>
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
                <span class="hljs-keyword">try</span> {
                    task.run();
                    <span class="hljs-comment">// ä»»åŠ¡å®Œæˆï¼Œå€’è®¡æ—¶</span>
                    latch.countDown();
                    System.out.println(<span class="hljs-string">"ä»»åŠ¡å®Œæˆï¼Œå€’è®¡æ—¶å™¨ "</span> + latchName + <span class="hljs-string">" å‡1"</span>);
                } <span class="hljs-keyword">catch</span> (Exception e) {
                    System.err.println(<span class="hljs-string">"æ‰§è¡Œä»»åŠ¡æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
                }
            }).start();
            
            <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆï¼ˆå¸¦è¶…æ—¶ï¼‰</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">completed</span> <span class="hljs-operator">=</span> latch.await(<span class="hljs-number">30</span>, TimeUnit.SECONDS);
            <span class="hljs-keyword">if</span> (completed) {
                System.out.println(<span class="hljs-string">"æ‰€æœ‰ä»»åŠ¡å·²å®Œæˆ"</span>);
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"ç­‰å¾…è¶…æ—¶ï¼Œä»»åŠ¡å¯èƒ½æœªå®Œæˆ"</span>);
            }
            
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
            System.err.println(<span class="hljs-string">"ç­‰å¾…å€’è®¡æ—¶å™¨æ—¶è¢«ä¸­æ–­: "</span> + e.getMessage());
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ“ä½œå€’è®¡æ—¶å™¨æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
        }
    }
}
</code></pre>
<h3 data-id="heading-5">4. ä¿¡å·é‡ (Semaphore)</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RSemaphore;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * ä¿¡å·é‡ç”Ÿäº§çº§ä½¿ç”¨ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SemaphoreExample</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SemaphoreExample</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }
    
    <span class="hljs-comment">/**
     * ä¿¡å·é‡èµ„æºè®¿é—®æ§åˆ¶
     * 
     * <span class="hljs-doctag">@param</span> semaphoreName ä¿¡å·é‡åç§°
     * <span class="hljs-doctag">@param</span> permits åˆå§‹è®¸å¯è¯æ•°é‡
     * <span class="hljs-doctag">@param</span> task éœ€è¦é™åˆ¶å¹¶å‘çš„ä»»åŠ¡
     * <span class="hljs-doctag">@return</span> æ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">controlAccessWithSemaphore</span><span class="hljs-params">(String semaphoreName, <span class="hljs-type">int</span> <span class="hljs-keyword">permits</span>, Runnable task)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">RSemaphore</span> <span class="hljs-variable">semaphore</span> <span class="hljs-operator">=</span> redissonClient.getSemaphore(semaphoreName);
            
            <span class="hljs-comment">// åˆå§‹åŒ–è®¸å¯è¯æ•°é‡ï¼ˆä»…åœ¨è®¸å¯è¯ä¸º0æ—¶è®¾ç½®ï¼‰</span>
            semaphore.trySetPermits(<span class="hljs-keyword">permits</span>);
            
            <span class="hljs-comment">// è·å–è®¸å¯è¯ï¼ˆå¸¦è¶…æ—¶ï¼‰</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">acquired</span> <span class="hljs-operator">=</span> semaphore.tryAcquire(<span class="hljs-number">5</span>, TimeUnit.SECONDS);
            <span class="hljs-keyword">if</span> (acquired) {
                <span class="hljs-keyword">try</span> {
                    System.out.println(<span class="hljs-string">"è·å–åˆ°è®¸å¯è¯ï¼Œå¼€å§‹æ‰§è¡Œä»»åŠ¡"</span>);
                    task.run();
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                } <span class="hljs-keyword">finally</span> {
                    <span class="hljs-comment">// é‡Šæ”¾è®¸å¯è¯</span>
                    semaphore.release();
                    System.out.println(<span class="hljs-string">"ä»»åŠ¡å®Œæˆï¼Œé‡Šæ”¾è®¸å¯è¯"</span>);
                }
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"è·å–è®¸å¯è¯è¶…æ—¶ï¼Œèµ„æºè®¿é—®å—é™"</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
            System.err.println(<span class="hljs-string">"è·å–è®¸å¯è¯æ—¶è¢«ä¸­æ–­: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"ä½¿ç”¨ä¿¡å·é‡æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * æ‰¹é‡è·å–å’Œé‡Šæ”¾è®¸å¯è¯
     * 
     * <span class="hljs-doctag">@param</span> semaphoreName ä¿¡å·é‡åç§°
     * <span class="hljs-doctag">@param</span> permitsToAcquire è¦è·å–çš„è®¸å¯è¯æ•°é‡
     * <span class="hljs-doctag">@param</span> permitsToRelease è¦é‡Šæ”¾çš„è®¸å¯è¯æ•°é‡
     * <span class="hljs-doctag">@return</span> æ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">batchOperateSemaphore</span><span class="hljs-params">(String semaphoreName, <span class="hljs-type">int</span> permitsToAcquire, <span class="hljs-type">int</span> permitsToRelease)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">RSemaphore</span> <span class="hljs-variable">semaphore</span> <span class="hljs-operator">=</span> redissonClient.getSemaphore(semaphoreName);
            
            <span class="hljs-comment">// æ‰¹é‡è·å–è®¸å¯è¯</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">acquired</span> <span class="hljs-operator">=</span> semaphore.tryAcquire(permitsToAcquire, <span class="hljs-number">10</span>, TimeUnit.SECONDS);
            <span class="hljs-keyword">if</span> (acquired) {
                <span class="hljs-keyword">try</span> {
                    System.out.println(<span class="hljs-string">"æ‰¹é‡è·å– "</span> + permitsToAcquire + <span class="hljs-string">" ä¸ªè®¸å¯è¯æˆåŠŸ"</span>);
                    <span class="hljs-comment">// æ‰§è¡Œéœ€è¦å¤šè®¸å¯è¯çš„ä»»åŠ¡</span>
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                } <span class="hljs-keyword">finally</span> {
                    <span class="hljs-comment">// æ‰¹é‡é‡Šæ”¾è®¸å¯è¯</span>
                    semaphore.release(permitsToRelease);
                    System.out.println(<span class="hljs-string">"æ‰¹é‡é‡Šæ”¾ "</span> + permitsToRelease + <span class="hljs-string">" ä¸ªè®¸å¯è¯"</span>);
                }
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"æ‰¹é‡è·å– "</span> + permitsToAcquire + <span class="hljs-string">" ä¸ªè®¸å¯è¯å¤±è´¥"</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
            System.err.println(<span class="hljs-string">"æ‰¹é‡è·å–è®¸å¯è¯æ—¶è¢«ä¸­æ–­: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ‰¹é‡æ“ä½œä¿¡å·é‡æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
}
</code></pre>
<h3 data-id="heading-6">5. åˆ†å¸ƒå¼é˜Ÿåˆ—</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RBlockingQueue;
<span class="hljs-keyword">import</span> org.redisson.api.RQueue;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * åˆ†å¸ƒå¼é˜Ÿåˆ—ç”Ÿäº§çº§ä½¿ç”¨ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistributedQueueExample</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DistributedQueueExample</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }
    
    <span class="hljs-comment">/**
     * æ™®é€šé˜Ÿåˆ—æ“ä½œ
     * 
     * <span class="hljs-doctag">@param</span> queueName é˜Ÿåˆ—åç§°
     * <span class="hljs-doctag">@param</span> items è¦æ·»åŠ çš„é¡¹ç›®
     * <span class="hljs-doctag">@return</span> æ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">operateQueue</span><span class="hljs-params">(String queueName, java.util.List&lt;String&gt; items)</span> {
        <span class="hljs-keyword">try</span> {
            RQueue&lt;String&gt; queue = redissonClient.getQueue(queueName);
            
            <span class="hljs-comment">// æ·»åŠ å¤šä¸ªå…ƒç´ åˆ°é˜Ÿåˆ—</span>
            <span class="hljs-keyword">for</span> (String item : items) {
                <span class="hljs-type">boolean</span> <span class="hljs-variable">added</span> <span class="hljs-operator">=</span> queue.offer(item);
                <span class="hljs-keyword">if</span> (!added) {
                    System.out.println(<span class="hljs-string">"é˜Ÿåˆ—å·²æ»¡ï¼Œæ— æ³•æ·»åŠ å…ƒç´ : "</span> + item);
                }
            }
            
            <span class="hljs-comment">// è·å–é˜Ÿåˆ—å¤§å°</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> queue.size();
            System.out.println(<span class="hljs-string">"é˜Ÿåˆ— "</span> + queueName + <span class="hljs-string">" å½“å‰å¤§å°: "</span> + size);
            
            <span class="hljs-comment">// éé˜»å¡è·å–å…ƒç´ </span>
            <span class="hljs-type">String</span> <span class="hljs-variable">element</span> <span class="hljs-operator">=</span> queue.poll(); <span class="hljs-comment">// è·å–å¹¶ç§»é™¤é˜Ÿé¦–å…ƒç´ ï¼Œå¦‚æœé˜Ÿåˆ—ä¸ºç©ºè¿”å›null</span>
            <span class="hljs-keyword">if</span> (element != <span class="hljs-literal">null</span>) {
                System.out.println(<span class="hljs-string">"ä»é˜Ÿåˆ—è·å–å…ƒç´ : "</span> + element);
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"é˜Ÿåˆ—ä¸ºç©º"</span>);
            }
            
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ“ä½œé˜Ÿåˆ—æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
}
</code></pre>
<h3 data-id="heading-7">6. å»¶è¿Ÿé˜Ÿåˆ— (Delayed Queue)</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RBlockingQueue;
<span class="hljs-keyword">import</span> org.redisson.api.RDelayedQueue;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * å»¶è¿Ÿé˜Ÿåˆ—ç”Ÿäº§çº§ä½¿ç”¨ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DelayedQueueExample</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DelayedQueueExample</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }
    
    <span class="hljs-comment">/**
     * å»¶è¿Ÿé˜Ÿåˆ—æ“ä½œ
     * 
     * <span class="hljs-doctag">@param</span> queueName é˜Ÿåˆ—åç§°
     * <span class="hljs-doctag">@param</span> delayedItems å»¶è¿Ÿé¡¹ç›®åˆ—è¡¨ï¼ŒåŒ…å«é¡¹ç›®å’Œå»¶è¿Ÿæ—¶é—´
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operateDelayedQueue</span><span class="hljs-params">(String queueName, java.util.List&lt;DelayedItem&gt; delayedItems)</span> {
        RBlockingQueue&lt;String&gt; queue = redissonClient.getBlockingQueue(queueName);
        RDelayedQueue&lt;String&gt; delayedQueue = redissonClient.getDelayedQueue(queue);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ·»åŠ å»¶è¿Ÿå…ƒç´ </span>
            <span class="hljs-keyword">for</span> (DelayedItem item : delayedItems) {
                delayedQueue.offer(item.item, item.delay, item.unit);
                System.out.println(<span class="hljs-string">"æ·»åŠ å»¶è¿Ÿå…ƒç´ : "</span> + item.item + 
                                 <span class="hljs-string">"ï¼Œå»¶è¿Ÿæ—¶é—´: "</span> + item.delay + <span class="hljs-string">" "</span> + item.unit);
            }
            
            <span class="hljs-comment">// å¯åŠ¨æ¶ˆè´¹è€…çº¿ç¨‹å¤„ç†å»¶è¿Ÿå…ƒç´ </span>
            <span class="hljs-type">Thread</span> <span class="hljs-variable">consumerThread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-keyword">while</span> (!Thread.currentThread().isInterrupted()) {
                        <span class="hljs-comment">// é˜»å¡ç­‰å¾…å»¶è¿Ÿæ—¶é—´åˆ°è¾¾çš„å…ƒç´ </span>
                        <span class="hljs-type">String</span> <span class="hljs-variable">item</span> <span class="hljs-operator">=</span> queue.take();
                        System.out.println(<span class="hljs-string">"è·å–åˆ°å»¶è¿Ÿå…ƒç´ : "</span> + item + 
                                         <span class="hljs-string">"ï¼Œåˆ°è¾¾æ—¶é—´: "</span> + System.currentTimeMillis());
                        
                        <span class="hljs-comment">// å¤„ç†å»¶è¿Ÿå…ƒç´ </span>
                        processDelayedItem(item);
                    }
                } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                    Thread.currentThread().interrupt();
                    System.out.println(<span class="hljs-string">"æ¶ˆè´¹è€…çº¿ç¨‹è¢«ä¸­æ–­"</span>);
                } <span class="hljs-keyword">catch</span> (Exception e) {
                    System.err.println(<span class="hljs-string">"å¤„ç†å»¶è¿Ÿå…ƒç´ æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
                }
            });
            
            consumerThread.start();
            
            <span class="hljs-comment">// ç­‰å¾…ä¸€æ®µæ—¶é—´è§‚å¯Ÿç»“æœ</span>
            Thread.sleep(<span class="hljs-number">10000</span>);
            
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
            System.err.println(<span class="hljs-string">"ä¸»çº¿ç¨‹è¢«ä¸­æ–­: "</span> + e.getMessage());
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ“ä½œå»¶è¿Ÿé˜Ÿåˆ—æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// é‡è¦ï¼šä½¿ç”¨å®Œå»¶è¿Ÿé˜Ÿåˆ—åå¿…é¡»é”€æ¯</span>
            delayedQueue.destroy();
        }
    }
    
    <span class="hljs-comment">/**
     * å¤„ç†å»¶è¿Ÿå…ƒç´ çš„ä¸šåŠ¡é€»è¾‘
     * 
     * <span class="hljs-doctag">@param</span> item å»¶è¿Ÿå…ƒç´ 
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processDelayedItem</span><span class="hljs-params">(String item)</span> {
        System.out.println(<span class="hljs-string">"å¤„ç†å»¶è¿Ÿå…ƒç´ : "</span> + item);
        <span class="hljs-comment">// å®é™…ä¸šåŠ¡å¤„ç†é€»è¾‘</span>
    }
    
    <span class="hljs-comment">/**
     * å»¶è¿Ÿå…ƒç´ å°è£…ç±»
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DelayedItem</span> {
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> String item;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> delay;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> TimeUnit unit;
        
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">DelayedItem</span><span class="hljs-params">(String item, <span class="hljs-type">long</span> delay, TimeUnit unit)</span> {
            <span class="hljs-built_in">this</span>.item = item;
            <span class="hljs-built_in">this</span>.delay = delay;
            <span class="hljs-built_in">this</span>.unit = unit;
        }
    }
}
</code></pre>
<h3 data-id="heading-8">7. å‘å¸ƒ/è®¢é˜…æ¨¡å¼</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RTopic;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> org.redisson.api.listener.MessageListener;
<span class="hljs-keyword">import</span> java.util.concurrent.CompletableFuture;
<span class="hljs-keyword">import</span> java.util.concurrent.ExecutorService;
<span class="hljs-keyword">import</span> java.util.concurrent.Executors;

<span class="hljs-comment">/**
 * å‘å¸ƒ/è®¢é˜…æ¨¡å¼ç”Ÿäº§çº§ä½¿ç”¨ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PubSubExample</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ExecutorService executorService;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">PubSubExample</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
        <span class="hljs-built_in">this</span>.executorService = Executors.newCachedThreadPool();
    }
    
    <span class="hljs-comment">/**
     * è®¢é˜…æ¶ˆæ¯å¹¶å¤„ç†
     * 
     * <span class="hljs-doctag">@param</span> topicName ä¸»é¢˜åç§°
     * <span class="hljs-doctag">@param</span> messageHandler æ¶ˆæ¯å¤„ç†å™¨
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">subscribeTopic</span><span class="hljs-params">(String topicName, java.util.function.Consumer&lt;String&gt; messageHandler)</span> {
        <span class="hljs-type">RTopic</span> <span class="hljs-variable">topic</span> <span class="hljs-operator">=</span> redissonClient.getTopic(topicName);
        
        <span class="hljs-comment">// æ·»åŠ æ¶ˆæ¯ç›‘å¬å™¨</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">listenerId</span> <span class="hljs-operator">=</span> topic.addListener(String.class, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageListener</span>&lt;String&gt;() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(CharSequence channel, String msg)</span> {
                System.out.println(<span class="hljs-string">"æ”¶åˆ°æ¶ˆæ¯ - é¢‘é“: "</span> + channel + <span class="hljs-string">"ï¼Œå†…å®¹: "</span> + msg);
                
                <span class="hljs-comment">// åœ¨ç‹¬ç«‹çº¿ç¨‹ä¸­å¤„ç†æ¶ˆæ¯ï¼Œé¿å…é˜»å¡Redissonçš„æ¶ˆæ¯å¤„ç†çº¿ç¨‹</span>
                executorService.submit(() -&gt; {
                    <span class="hljs-keyword">try</span> {
                        messageHandler.accept(msg);
                    } <span class="hljs-keyword">catch</span> (Exception e) {
                        System.err.println(<span class="hljs-string">"å¤„ç†æ¶ˆæ¯æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
                    }
                });
            }
        });
        
        System.out.println(<span class="hljs-string">"å·²è®¢é˜…ä¸»é¢˜: "</span> + topicName + <span class="hljs-string">"ï¼Œç›‘å¬å™¨ID: "</span> + listenerId);
    }
    
    <span class="hljs-comment">/**
     * å‘å¸ƒæ¶ˆæ¯
     * 
     * <span class="hljs-doctag">@param</span> topicName ä¸»é¢˜åç§°
     * <span class="hljs-doctag">@param</span> message æ¶ˆæ¯å†…å®¹
     * <span class="hljs-doctag">@return</span> å‘å¸ƒçš„æ¶ˆæ¯æ•°é‡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">publishMessage</span><span class="hljs-params">(String topicName, String message)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">RTopic</span> <span class="hljs-variable">topic</span> <span class="hljs-operator">=</span> redissonClient.getTopic(topicName);
            
            <span class="hljs-comment">// å‘å¸ƒæ¶ˆæ¯</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">receivers</span> <span class="hljs-operator">=</span> topic.publish(message);
            System.out.println(<span class="hljs-string">"æ¶ˆæ¯å·²å‘å¸ƒåˆ°ä¸»é¢˜: "</span> + topicName + 
                             <span class="hljs-string">"ï¼Œæ¥æ”¶è€…æ•°é‡: "</span> + receivers + 
                             <span class="hljs-string">"ï¼Œæ¶ˆæ¯å†…å®¹: "</span> + message);
            
            <span class="hljs-keyword">return</span> receivers;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"å‘å¸ƒæ¶ˆæ¯æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * å¼‚æ­¥å‘å¸ƒæ¶ˆæ¯
     * 
     * <span class="hljs-doctag">@param</span> topicName ä¸»é¢˜åç§°
     * <span class="hljs-doctag">@param</span> message æ¶ˆæ¯å†…å®¹
     * <span class="hljs-doctag">@return</span> CompletableFutureè¡¨ç¤ºå‘å¸ƒç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> CompletableFuture&lt;Long&gt; <span class="hljs-title function_">publishMessageAsync</span><span class="hljs-params">(String topicName, String message)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">RTopic</span> <span class="hljs-variable">topic</span> <span class="hljs-operator">=</span> redissonClient.getTopic(topicName);
            
            <span class="hljs-comment">// å¼‚æ­¥å‘å¸ƒæ¶ˆæ¯</span>
            <span class="hljs-keyword">return</span> topic.publishAsync(message)
                      .toCompletableFuture()
                      .whenComplete((result, throwable) -&gt; {
                          <span class="hljs-keyword">if</span> (throwable != <span class="hljs-literal">null</span>) {
                              System.err.println(<span class="hljs-string">"å¼‚æ­¥å‘å¸ƒæ¶ˆæ¯å¤±è´¥: "</span> + throwable.getMessage());
                          } <span class="hljs-keyword">else</span> {
                              System.out.println(<span class="hljs-string">"å¼‚æ­¥å‘å¸ƒæ¶ˆæ¯æˆåŠŸï¼Œæ¥æ”¶è€…æ•°é‡: "</span> + result);
                          }
                      });
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"å¼‚æ­¥å‘å¸ƒæ¶ˆæ¯æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> CompletableFuture.completedFuture(<span class="hljs-number">0L</span>);
        }
    }
    
    <span class="hljs-comment">/**
     * å…³é—­èµ„æº
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">shutdown</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (executorService != <span class="hljs-literal">null</span> &amp;&amp; !executorService.isShutdown()) {
            executorService.shutdown();
        }
    }
}
</code></pre>
<h3 data-id="heading-9">8. å¸ƒéš†è¿‡æ»¤å™¨ (Bloom Filter)</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RBloomFilter;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> java.util.Collection;

<span class="hljs-comment">/**
 * å¸ƒéš†è¿‡æ»¤å™¨ç”Ÿäº§çº§ä½¿ç”¨ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BloomFilterExample</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">BloomFilterExample</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }
    
    <span class="hljs-comment">/**
     * åˆ›å»ºå¹¶åˆå§‹åŒ–å¸ƒéš†è¿‡æ»¤å™¨
     * 
     * <span class="hljs-doctag">@param</span> filterName è¿‡æ»¤å™¨åç§°
     * <span class="hljs-doctag">@param</span> expectedInsertions é¢„æœŸæ’å…¥å…ƒç´ æ•°é‡
     * <span class="hljs-doctag">@param</span> falseProbability è¯¯åˆ¤ç‡
     * <span class="hljs-doctag">@return</span> å¸ƒéš†è¿‡æ»¤å™¨å®ä¾‹
     */</span>
    <span class="hljs-keyword">public</span> RBloomFilter&lt;String&gt; <span class="hljs-title function_">createBloomFilter</span><span class="hljs-params">(String filterName, 
                                                  <span class="hljs-type">long</span> expectedInsertions, 
                                                  <span class="hljs-type">double</span> falseProbability)</span> {
        <span class="hljs-keyword">try</span> {
            RBloomFilter&lt;String&gt; bloomFilter = redissonClient.getBloomFilter(filterName);
            
            <span class="hljs-comment">// åˆå§‹åŒ–å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆä»…åœ¨æœªåˆå§‹åŒ–æ—¶è®¾ç½®ï¼‰</span>
            <span class="hljs-keyword">if</span> (!bloomFilter.isExists()) {
                <span class="hljs-type">boolean</span> <span class="hljs-variable">initialized</span> <span class="hljs-operator">=</span> bloomFilter.tryInit(expectedInsertions, falseProbability);
                <span class="hljs-keyword">if</span> (initialized) {
                    System.out.println(<span class="hljs-string">"å¸ƒéš†è¿‡æ»¤å™¨ "</span> + filterName + 
                                     <span class="hljs-string">" åˆå§‹åŒ–æˆåŠŸï¼Œé¢„æœŸæ’å…¥æ•°é‡: "</span> + expectedInsertions + 
                                     <span class="hljs-string">"ï¼Œè¯¯åˆ¤ç‡: "</span> + falseProbability);
                } <span class="hljs-keyword">else</span> {
                    System.out.println(<span class="hljs-string">"å¸ƒéš†è¿‡æ»¤å™¨ "</span> + filterName + <span class="hljs-string">" å·²å­˜åœ¨ï¼Œè·³è¿‡åˆå§‹åŒ–"</span>);
                }
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"å¸ƒéš†è¿‡æ»¤å™¨ "</span> + filterName + <span class="hljs-string">" å·²å­˜åœ¨"</span>);
            }
            
            <span class="hljs-keyword">return</span> bloomFilter;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"åˆ›å»ºå¸ƒéš†è¿‡æ»¤å™¨æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"åˆ›å»ºå¸ƒéš†è¿‡æ»¤å™¨å¤±è´¥"</span>, e);
        }
    }
    
    <span class="hljs-comment">/**
     * æ‰¹é‡æ·»åŠ å…ƒç´ åˆ°å¸ƒéš†è¿‡æ»¤å™¨
     * 
     * <span class="hljs-doctag">@param</span> filterName è¿‡æ»¤å™¨åç§°
     * <span class="hljs-doctag">@param</span> elements è¦æ·»åŠ çš„å…ƒç´ é›†åˆ
     * <span class="hljs-doctag">@return</span> æˆåŠŸæ·»åŠ çš„å…ƒç´ æ•°é‡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">batchAddElements</span><span class="hljs-params">(String filterName, Collection&lt;String&gt; elements)</span> {
        <span class="hljs-keyword">try</span> {
            RBloomFilter&lt;String&gt; bloomFilter = redissonClient.getBloomFilter(filterName);
            
            <span class="hljs-keyword">if</span> (!bloomFilter.isExists()) {
                System.out.println(<span class="hljs-string">"å¸ƒéš†è¿‡æ»¤å™¨ "</span> + filterName + <span class="hljs-string">" ä¸å­˜åœ¨ï¼Œæ— æ³•æ·»åŠ å…ƒç´ "</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
            }
            
            <span class="hljs-type">int</span> <span class="hljs-variable">addedCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
            <span class="hljs-keyword">for</span> (String element : elements) {
                <span class="hljs-type">boolean</span> <span class="hljs-variable">added</span> <span class="hljs-operator">=</span> bloomFilter.add(element);
                <span class="hljs-keyword">if</span> (added) {
                    addedCount++;
                }
            }
            
            System.out.println(<span class="hljs-string">"æ‰¹é‡æ·»åŠ å…ƒç´ å®Œæˆï¼ŒæˆåŠŸæ·»åŠ : "</span> + addedCount + <span class="hljs-string">" ä¸ªå…ƒç´ "</span>);
            <span class="hljs-keyword">return</span> addedCount;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ‰¹é‡æ·»åŠ å…ƒç´ åˆ°å¸ƒéš†è¿‡æ»¤å™¨æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * æ£€æŸ¥å…ƒç´ æ˜¯å¦å¯èƒ½å­˜åœ¨äºå¸ƒéš†è¿‡æ»¤å™¨ä¸­
     * 
     * <span class="hljs-doctag">@param</span> filterName è¿‡æ»¤å™¨åç§°
     * <span class="hljs-doctag">@param</span> element è¦æ£€æŸ¥çš„å…ƒç´ 
     * <span class="hljs-doctag">@return</span> trueè¡¨ç¤ºå¯èƒ½å­˜åœ¨ï¼Œfalseè¡¨ç¤ºä¸€å®šä¸å­˜åœ¨
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">mightContain</span><span class="hljs-params">(String filterName, String element)</span> {
        <span class="hljs-keyword">try</span> {
            RBloomFilter&lt;String&gt; bloomFilter = redissonClient.getBloomFilter(filterName);
            
            <span class="hljs-keyword">if</span> (!bloomFilter.isExists()) {
                System.out.println(<span class="hljs-string">"å¸ƒéš†è¿‡æ»¤å™¨ "</span> + filterName + <span class="hljs-string">" ä¸å­˜åœ¨"</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
            
            <span class="hljs-type">boolean</span> <span class="hljs-variable">mightContain</span> <span class="hljs-operator">=</span> bloomFilter.contains(element);
            System.out.println(<span class="hljs-string">"å…ƒç´  '"</span> + element + <span class="hljs-string">"' åœ¨è¿‡æ»¤å™¨ "</span> + filterName + 
                             <span class="hljs-string">" ä¸­å¯èƒ½å­˜åœ¨: "</span> + mightContain);
            
            <span class="hljs-keyword">return</span> mightContain;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ£€æŸ¥å¸ƒéš†è¿‡æ»¤å™¨æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨é˜²æ­¢ç¼“å­˜ç©¿é€çš„å®Œæ•´ç¤ºä¾‹
     * 
     * <span class="hljs-doctag">@param</span> userId ç”¨æˆ·ID
     * <span class="hljs-doctag">@return</span> ç”¨æˆ·ä¿¡æ¯ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">preventCachePenetration</span><span class="hljs-params">(String userId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">filterName</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user_exists_filter"</span>;
        <span class="hljs-type">String</span> <span class="hljs-variable">cacheKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user_cache:"</span> + userId;
        
        <span class="hljs-comment">// åˆ›å»ºå¸ƒéš†è¿‡æ»¤å™¨</span>
        RBloomFilter&lt;String&gt; bloomFilter = createBloomFilter(filterName, <span class="hljs-number">1000000</span>, <span class="hljs-number">0.03</span>);
        
        <span class="hljs-comment">// é¦–å…ˆæ£€æŸ¥å¸ƒéš†è¿‡æ»¤å™¨</span>
        <span class="hljs-keyword">if</span> (!bloomFilter.contains(userId)) {
            <span class="hljs-comment">// å¸ƒéš†è¿‡æ»¤å™¨ç¡®è®¤å…ƒç´ ä¸å­˜åœ¨ï¼Œç›´æ¥è¿”å›ï¼Œé¿å…æŸ¥è¯¢ç¼“å­˜å’Œæ•°æ®åº“</span>
            System.out.println(<span class="hljs-string">"å¸ƒéš†è¿‡æ»¤å™¨ç¡®è®¤ç”¨æˆ·ä¸å­˜åœ¨: "</span> + userId);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        
        <span class="hljs-comment">// å¸ƒéš†è¿‡æ»¤å™¨è®¤ä¸ºå¯èƒ½å­˜åœ¨ï¼Œç»§ç»­æŸ¥è¯¢ç¼“å­˜</span>
        <span class="hljs-comment">// è¿™é‡Œåº”è¯¥æŸ¥è¯¢å®é™…ç¼“å­˜ï¼Œä½†ä¸ºäº†ç¤ºä¾‹ï¼Œæˆ‘ä»¬æ¨¡æ‹Ÿ</span>
        System.out.println(<span class="hljs-string">"å¸ƒéš†è¿‡æ»¤å™¨è®¤ä¸ºç”¨æˆ·å¯èƒ½å­˜åœ¨ï¼Œç»§ç»­æŸ¥è¯¢ç¼“å­˜/æ•°æ®åº“: "</span> + userId);
        
        <span class="hljs-comment">// æ¨¡æ‹ŸæŸ¥è¯¢ç¼“å­˜å’Œæ•°æ®åº“çš„é€»è¾‘</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">userInfo</span> <span class="hljs-operator">=</span> queryUserInfo(userId);
        
        <span class="hljs-keyword">if</span> (userInfo == <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// å¦‚æœæ•°æ®åº“ä¸­ç¡®å®ä¸å­˜åœ¨ï¼Œå¯ä»¥è€ƒè™‘å°†è¯¥IDåŠ å…¥å¸ƒéš†è¿‡æ»¤å™¨</span>
            <span class="hljs-comment">// ä½†éœ€è¦è°¨æ…å¤„ç†ï¼Œå› ä¸ºç”¨æˆ·å¯èƒ½åœ¨ç¨ååˆ›å»º</span>
            System.out.println(<span class="hljs-string">"ç”¨æˆ·åœ¨æ•°æ®åº“ä¸­ä¸å­˜åœ¨: "</span> + userId);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// å¦‚æœç”¨æˆ·å­˜åœ¨ï¼Œå°†ä¿¡æ¯å­˜å‚¨åˆ°ç¼“å­˜</span>
            System.out.println(<span class="hljs-string">"ç”¨æˆ·å­˜åœ¨ï¼Œæ›´æ–°ç¼“å­˜: "</span> + userId);
        }
        
        <span class="hljs-keyword">return</span> userInfo;
    }
    
    <span class="hljs-comment">/**
     * æ¨¡æ‹ŸæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">queryUserInfo</span><span class="hljs-params">(String userId)</span> {
        <span class="hljs-comment">// å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šæŸ¥è¯¢ç¼“å­˜æˆ–æ•°æ®åº“</span>
        <span class="hljs-comment">// ä¸ºäº†ç¤ºä¾‹ï¼Œæˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸ªç®€å•çš„é€»è¾‘</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"valid_user"</span>.equals(userId)) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"ç”¨æˆ·ä¿¡æ¯: "</span> + userId;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
}
</code></pre>
<h3 data-id="heading-10">6. åˆ†å¸ƒå¼å¯¹è±¡</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RBucket;
<span class="hljs-keyword">import</span> org.redisson.api.RSet;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistributedObjectsExample</span> {
    <span class="hljs-comment">// è‡ªå®šä¹‰å¯¹è±¡</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
        <span class="hljs-keyword">private</span> String name;
        <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;
        
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> {
            <span class="hljs-built_in">this</span>.name = name;
            <span class="hljs-built_in">this</span>.age = age;
        }
        
        <span class="hljs-comment">// getterå’Œsetteræ–¹æ³•</span>
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> name; }
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> { <span class="hljs-built_in">this</span>.name = name; }
        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> age; }
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> { <span class="hljs-built_in">this</span>.age = age; }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">objectsExample</span><span class="hljs-params">(RedissonClient redisson)</span> {
        <span class="hljs-comment">// å­˜å‚¨å•ä¸ªå¯¹è±¡</span>
        RBucket&lt;Person&gt; bucket = redisson.getBucket(<span class="hljs-string">"person"</span>);
        bucket.set(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-number">30</span>));
        
        <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> bucket.get(); <span class="hljs-comment">// è·å–å¯¹è±¡</span>
        System.out.println(person.getName()); <span class="hljs-comment">// è¾“å‡º: å¼ ä¸‰</span>
        
        <span class="hljs-comment">// å­˜å‚¨å¯¹è±¡é›†åˆ</span>
        RSet&lt;Person&gt; personSet = redisson.getSet(<span class="hljs-string">"personSet"</span>);
        personSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"æå››"</span>, <span class="hljs-number">25</span>));
        personSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"ç‹äº”"</span>, <span class="hljs-number">35</span>));
    }
}
</code></pre>
<h2 data-id="heading-11">å®é™…åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-12">1. åˆ†å¸ƒå¼é” - é˜²æ­¢é‡å¤æ“ä½œ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RLock;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;
<span class="hljs-keyword">import</span> java.util.concurrent.CompletableFuture;

<span class="hljs-comment">/**
 * åˆ†å¸ƒå¼é”ç”Ÿäº§çº§åº”ç”¨åœºæ™¯ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistributedLockScenario</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">DEFAULT_LEASE_TIME</span> <span class="hljs-operator">=</span> <span class="hljs-number">30</span>; <span class="hljs-comment">// é»˜è®¤ç§Ÿçº¦æ—¶é—´30ç§’</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">DEFAULT_WAIT_TIME</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;  <span class="hljs-comment">// é»˜è®¤ç­‰å¾…æ—¶é—´10ç§’</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DistributedLockScenario</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }
    
    <span class="hljs-comment">/**
     * å®‰å…¨çš„åˆ†å¸ƒå¼é”æ“ä½œ
     * 
     * <span class="hljs-doctag">@param</span> lockKey é”çš„key
     * <span class="hljs-doctag">@param</span> businessLogic ä¸šåŠ¡é€»è¾‘
     * <span class="hljs-doctag">@return</span> æ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">executeWithDistributedLock</span><span class="hljs-params">(String lockKey, Runnable businessLogic)</span> {
        <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">try</span> {
            lock = redissonClient.getLock(lockKey);
            
            <span class="hljs-comment">// å°è¯•è·å–é”ï¼Œæœ€å¤šç­‰å¾…DEFAULT_WAIT_TIMEç§’ï¼Œé”è‡ªåŠ¨é‡Šæ”¾æ—¶é—´ä¸ºDEFAULT_LEASE_TIMEç§’</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">acquired</span> <span class="hljs-operator">=</span> lock.tryLock(DEFAULT_WAIT_TIME, DEFAULT_LEASE_TIME, TimeUnit.SECONDS);
            <span class="hljs-keyword">if</span> (acquired) {
                <span class="hljs-keyword">try</span> {
                    System.out.println(<span class="hljs-string">"è·å–åˆ°åˆ†å¸ƒå¼é”: "</span> + lockKey + 
                                     <span class="hljs-string">"ï¼Œçº¿ç¨‹: "</span> + Thread.currentThread().getName());
                    
                    <span class="hljs-comment">// æ‰§è¡Œä¸šåŠ¡é€»è¾‘</span>
                    businessLogic.run();
                    
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                } <span class="hljs-keyword">finally</span> {
                    <span class="hljs-comment">// ç¡®ä¿é”è¢«é‡Šæ”¾ï¼Œé˜²æ­¢æ­»é”</span>
                    <span class="hljs-keyword">if</span> (lock != <span class="hljs-literal">null</span> &amp;&amp; lock.isHeldByCurrentThread()) {
                        lock.unlock();
                        System.out.println(<span class="hljs-string">"é‡Šæ”¾åˆ†å¸ƒå¼é”: "</span> + lockKey);
                    }
                }
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"è·å–åˆ†å¸ƒå¼é”å¤±è´¥ï¼Œé”å·²è¢«å…¶ä»–çº¿ç¨‹æŒæœ‰: "</span> + lockKey);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
            System.err.println(<span class="hljs-string">"è·å–åˆ†å¸ƒå¼é”è¿‡ç¨‹ä¸­è¢«ä¸­æ–­: "</span> + e.getMessage());
            
            <span class="hljs-comment">// æ¢å¤ä¸­æ–­çŠ¶æ€å¹¶å°è¯•é‡Šæ”¾é”</span>
            <span class="hljs-keyword">if</span> (lock != <span class="hljs-literal">null</span> &amp;&amp; lock.isHeldByCurrentThread()) {
                <span class="hljs-keyword">try</span> {
                    lock.unlock();
                } <span class="hljs-keyword">catch</span> (Exception unlockException) {
                    System.err.println(<span class="hljs-string">"é‡Šæ”¾é”æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + unlockException.getMessage());
                }
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ‰§è¡Œå¸¦é”æ“ä½œæ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * å¼‚æ­¥æ‰§è¡Œå¸¦é”æ“ä½œ
     * 
     * <span class="hljs-doctag">@param</span> lockKey é”çš„key
     * <span class="hljs-doctag">@param</span> businessLogic ä¸šåŠ¡é€»è¾‘
     * <span class="hljs-doctag">@return</span> CompletableFutureè¡¨ç¤ºæ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> CompletableFuture&lt;Boolean&gt; <span class="hljs-title function_">executeWithDistributedLockAsync</span><span class="hljs-params">(String lockKey, Runnable businessLogic)</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; {
            <span class="hljs-keyword">return</span> executeWithDistributedLock(lockKey, businessLogic);
        });
    }
    
    <span class="hljs-comment">/**
     * è®¢å•å¤„ç†åœºæ™¯ - é˜²æ­¢é‡å¤ä¸‹å•
     * 
     * <span class="hljs-doctag">@param</span> userId ç”¨æˆ·ID
     * <span class="hljs-doctag">@param</span> orderId è®¢å•ID
     * <span class="hljs-doctag">@return</span> å¤„ç†ç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">processOrder</span><span class="hljs-params">(String userId, String orderId)</span> {
        <span class="hljs-comment">// ä½¿ç”¨ç”¨æˆ·IDå’Œè®¢å•IDä½œä¸ºé”çš„keyï¼Œé˜²æ­¢åŒä¸€ç”¨æˆ·é‡å¤ä¸‹å•</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">lockKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"order_lock:"</span> + userId + <span class="hljs-string">":"</span> + orderId;
        
        <span class="hljs-keyword">return</span> executeWithDistributedLock(lockKey, () -&gt; {
            <span class="hljs-comment">// æ£€æŸ¥è®¢å•æ˜¯å¦å·²å­˜åœ¨</span>
            <span class="hljs-keyword">if</span> (isOrderExists(orderId)) {
                System.out.println(<span class="hljs-string">"è®¢å•å·²å­˜åœ¨ï¼Œè·³è¿‡å¤„ç†: "</span> + orderId);
                <span class="hljs-keyword">return</span>;
            }
            
            <span class="hljs-comment">// æ‰§è¡Œè®¢å•åˆ›å»ºé€»è¾‘</span>
            System.out.println(<span class="hljs-string">"å¼€å§‹å¤„ç†è®¢å•: "</span> + orderId + <span class="hljs-string">"ï¼Œç”¨æˆ·: "</span> + userId);
            
            <span class="hljs-comment">// æ¨¡æ‹Ÿè®¢å•å¤„ç†æ—¶é—´</span>
            <span class="hljs-keyword">try</span> {
                Thread.sleep(<span class="hljs-number">2000</span>);
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                Thread.currentThread().interrupt();
            }
            
            <span class="hljs-comment">// ä¿å­˜è®¢å•</span>
            saveOrder(orderId, userId);
            System.out.println(<span class="hljs-string">"è®¢å•å¤„ç†å®Œæˆ: "</span> + orderId);
        });
    }
    
    <span class="hljs-comment">/**
     * æ¨¡æ‹Ÿæ£€æŸ¥è®¢å•æ˜¯å¦å­˜åœ¨
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isOrderExists</span><span class="hljs-params">(String orderId)</span> {
        <span class="hljs-comment">// å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šæŸ¥è¯¢æ•°æ®åº“æˆ–ç¼“å­˜</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
    <span class="hljs-comment">/**
     * æ¨¡æ‹Ÿä¿å­˜è®¢å•
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveOrder</span><span class="hljs-params">(String orderId, String userId)</span> {
        <span class="hljs-comment">// å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šä¿å­˜åˆ°æ•°æ®åº“</span>
        System.out.println(<span class="hljs-string">"è®¢å•å·²ä¿å­˜ - è®¢å•ID: "</span> + orderId + <span class="hljs-string">"ï¼Œç”¨æˆ·ID: "</span> + userId);
    }
}
</code></pre>
<h3 data-id="heading-13">2. ä¿¡å·é‡ - é™åˆ¶å¹¶å‘è®¿é—®</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RSemaphore;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> java.util.concurrent.CompletableFuture;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * ä¿¡å·é‡ç”Ÿäº§çº§åº”ç”¨åœºæ™¯ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SemaphoreScenario</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">RESOURCE_ACCESS_PREFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">"resource_access:"</span>;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SemaphoreScenario</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }
    
    <span class="hljs-comment">/**
     * èµ„æºè®¿é—®æ§åˆ¶
     * 
     * <span class="hljs-doctag">@param</span> resourceId èµ„æºID
     * <span class="hljs-doctag">@param</span> maxConcurrent æœ€å¤§å¹¶å‘æ•°
     * <span class="hljs-doctag">@param</span> accessTask è®¿é—®ä»»åŠ¡
     * <span class="hljs-doctag">@return</span> è®¿é—®ç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">controlResourceAccess</span><span class="hljs-params">(String resourceId, <span class="hljs-type">int</span> maxConcurrent, Runnable accessTask)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">semaphoreKey</span> <span class="hljs-operator">=</span> RESOURCE_ACCESS_PREFIX + resourceId;
        <span class="hljs-type">RSemaphore</span> <span class="hljs-variable">semaphore</span> <span class="hljs-operator">=</span> redissonClient.getSemaphore(semaphoreKey);
        
        <span class="hljs-keyword">try</span> {

            semaphore.trySetPermits(maxConcurrent);
            
            System.out.println(<span class="hljs-string">"èµ„æº "</span> + resourceId + <span class="hljs-string">" å½“å‰å¯ç”¨è®¸å¯è¯æ•°: "</span> + semaphore.availablePermits());
            
            <span class="hljs-comment">// å°è¯•è·å–è®¸å¯è¯ï¼Œæœ€å¤šç­‰å¾…5ç§’</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">acquired</span> <span class="hljs-operator">=</span> semaphore.tryAcquire(<span class="hljs-number">5</span>, TimeUnit.SECONDS);
            <span class="hljs-keyword">if</span> (acquired) {
                <span class="hljs-keyword">try</span> {
                    System.out.println(<span class="hljs-string">"è·å–åˆ°èµ„æº "</span> + resourceId + <span class="hljs-string">" çš„è®¿é—®æƒé™ï¼Œæ‰§è¡Œè®¿é—®ä»»åŠ¡"</span>);
                    
                    <span class="hljs-comment">// æ‰§è¡Œèµ„æºè®¿é—®ä»»åŠ¡</span>
                    accessTask.run();
                    
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                } <span class="hljs-keyword">finally</span> {
                    <span class="hljs-comment">// é‡Šæ”¾è®¸å¯è¯</span>
                    semaphore.release();
                    System.out.println(<span class="hljs-string">"é‡Šæ”¾èµ„æº "</span> + resourceId + <span class="hljs-string">" çš„è®¿é—®æƒé™"</span>);
                }
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"è·å–èµ„æº "</span> + resourceId + <span class="hljs-string">" è®¿é—®æƒé™è¶…æ—¶ï¼Œå½“å‰å¯ç”¨è®¸å¯è¯æ•°: "</span> + 
                                 semaphore.availablePermits());
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
            System.err.println(<span class="hljs-string">"è·å–è®¸å¯è¯æ—¶è¢«ä¸­æ–­: "</span> + e.getMessage());
            
            <span class="hljs-comment">// å°è¯•é‡Šæ”¾è®¸å¯è¯</span>
            <span class="hljs-keyword">try</span> {
                semaphore.release();
            } <span class="hljs-keyword">catch</span> (Exception releaseException) {
                System.err.println(<span class="hljs-string">"é‡Šæ”¾è®¸å¯è¯æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + releaseException.getMessage());
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"èµ„æºè®¿é—®æ§åˆ¶æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * ç§’æ€ç³»ç»Ÿä¸­çš„å¹¶å‘æ§åˆ¶
     * 
     * <span class="hljs-doctag">@param</span> productId å•†å“ID
     * <span class="hljs-doctag">@param</span> userId ç”¨æˆ·ID
     * <span class="hljs-doctag">@return</span> ç§’æ€ç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">flashSale</span><span class="hljs-params">(String productId, String userId)</span> {
        <span class="hljs-comment">// ä½¿ç”¨å•†å“IDä½œä¸ºä¿¡å·é‡keyï¼Œé™åˆ¶åŒæ—¶è®¿é—®è¯¥å•†å“çš„ç”¨æˆ·æ•°é‡</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">semaphoreKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"flash_sale:"</span> + productId;
        <span class="hljs-type">RSemaphore</span> <span class="hljs-variable">semaphore</span> <span class="hljs-operator">=</span> redissonClient.getSemaphore(semaphoreKey);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// è®¾ç½®ç§’æ€æ´»åŠ¨çš„å¹¶å‘é™åˆ¶ï¼ˆä¾‹å¦‚ï¼Œæœ€å¤šå…è®¸100ä¸ªç”¨æˆ·åŒæ—¶å‚ä¸ï¼‰</span>
            semaphore.trySetPermits(<span class="hljs-number">100</span>);
            
            <span class="hljs-comment">// å°è¯•è·å–ç§’æ€èµ„æ ¼</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">hasQualification</span> <span class="hljs-operator">=</span> semaphore.tryAcquire(<span class="hljs-number">2</span>, TimeUnit.SECONDS);
            <span class="hljs-keyword">if</span> (!hasQualification) {
                System.out.println(<span class="hljs-string">"ç”¨æˆ· "</span> + userId + <span class="hljs-string">" ç§’æ€å¤±è´¥ï¼Œç§’æ€èµ„æ ¼å·²æ»¡"</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
            
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// æ£€æŸ¥åº“å­˜</span>
                <span class="hljs-keyword">if</span> (checkStock(productId) &gt; <span class="hljs-number">0</span>) {
                    <span class="hljs-comment">// æ‰£å‡åº“å­˜</span>
                    <span class="hljs-keyword">if</span> (decreaseStock(productId)) {
                        <span class="hljs-comment">// åˆ›å»ºè®¢å•</span>
                        createOrder(productId, userId);
                        System.out.println(<span class="hljs-string">"ç”¨æˆ· "</span> + userId + <span class="hljs-string">" ç§’æ€æˆåŠŸï¼Œå•†å“: "</span> + productId);
                        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                    } <span class="hljs-keyword">else</span> {
                        System.out.println(<span class="hljs-string">"ç”¨æˆ· "</span> + userId + <span class="hljs-string">" ç§’æ€å¤±è´¥ï¼Œåº“å­˜æ‰£å‡å¤±è´¥"</span>);
                    }
                } <span class="hljs-keyword">else</span> {
                    System.out.println(<span class="hljs-string">"ç”¨æˆ· "</span> + userId + <span class="hljs-string">" ç§’æ€å¤±è´¥ï¼Œåº“å­˜ä¸è¶³"</span>);
                }
            } <span class="hljs-keyword">finally</span> {
                <span class="hljs-comment">// é‡Šæ”¾ç§’æ€èµ„æ ¼</span>
                semaphore.release();
            }
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
            System.err.println(<span class="hljs-string">"ç§’æ€è¿‡ç¨‹ä¸­è¢«ä¸­æ–­: "</span> + e.getMessage());
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"ç§’æ€è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
    <span class="hljs-comment">/**
     * æ¨¡æ‹Ÿæ£€æŸ¥åº“å­˜
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">checkStock</span><span class="hljs-params">(String productId)</span> {
        <span class="hljs-comment">// å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šæŸ¥è¯¢æ•°æ®åº“æˆ–ç¼“å­˜</span>
        <span class="hljs-keyword">return</span> <span class="hljs-number">10</span>; <span class="hljs-comment">// æ¨¡æ‹Ÿæœ‰10ä¸ªåº“å­˜</span>
    }
    
    <span class="hljs-comment">/**
     * æ¨¡æ‹Ÿæ‰£å‡åº“å­˜
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">decreaseStock</span><span class="hljs-params">(String productId)</span> {
        <span class="hljs-comment">// å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šæ›´æ–°æ•°æ®åº“</span>
        System.out.println(<span class="hljs-string">"æ‰£å‡å•†å“ "</span> + productId + <span class="hljs-string">" çš„åº“å­˜"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-comment">/**
     * æ¨¡æ‹Ÿåˆ›å»ºè®¢å•
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">(String productId, String userId)</span> {
        <span class="hljs-comment">// å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šåˆ›å»ºè®¢å•è®°å½•</span>
        System.out.println(<span class="hljs-string">"ä¸ºç”¨æˆ· "</span> + userId + <span class="hljs-string">" åˆ›å»ºå•†å“ "</span> + productId + <span class="hljs-string">" çš„è®¢å•"</span>);
    }
    
    <span class="hljs-comment">/**
     * å¼‚æ­¥èµ„æºè®¿é—®
     */</span>
    <span class="hljs-keyword">public</span> CompletableFuture&lt;Boolean&gt; <span class="hljs-title function_">asyncResourceAccess</span><span class="hljs-params">(String resourceId, <span class="hljs-type">int</span> maxConcurrent, Runnable accessTask)</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; {
            <span class="hljs-keyword">return</span> controlResourceAccess(resourceId, maxConcurrent, accessTask);
        });
    }
}
</code></pre>
<h3 data-id="heading-14">3. å¸ƒéš†è¿‡æ»¤å™¨ - é«˜æ•ˆå»é‡å’Œæ’æŸ¥</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RBloomFilter;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> java.util.Collection;

<span class="hljs-comment">/**
 * å¸ƒéš†è¿‡æ»¤å™¨ç”Ÿäº§çº§åº”ç”¨åœºæ™¯ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BloomFilterScenario</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">BloomFilterScenario</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }
    
    <span class="hljs-comment">/**
     * é˜²æ­¢ç¼“å­˜ç©¿é€çš„å¸ƒéš†è¿‡æ»¤å™¨
     * 
     * <span class="hljs-doctag">@param</span> key è¦æ£€æŸ¥çš„é”®
     * <span class="hljs-doctag">@return</span> å¦‚æœé”®å¯èƒ½å­˜åœ¨åˆ™è¿”å›trueï¼Œå¦‚æœç¡®å®šä¸å­˜åœ¨åˆ™è¿”å›false
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preventCachePenetration</span><span class="hljs-params">(String key)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">filterName</span> <span class="hljs-operator">=</span> <span class="hljs-string">"cache_penetration_filter"</span>;
        RBloomFilter&lt;String&gt; bloomFilter = redissonClient.getBloomFilter(filterName);
        
        <span class="hljs-comment">// åˆå§‹åŒ–å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆé¢„è®¡100ä¸‡ä¸ªå…ƒç´ ï¼Œ3%è¯¯åˆ¤ç‡ï¼‰</span>
        <span class="hljs-keyword">if</span> (!bloomFilter.isExists()) {
            bloomFilter.tryInit(<span class="hljs-number">1000000</span>, <span class="hljs-number">0.03</span>);
            System.out.println(<span class="hljs-string">"ç¼“å­˜ç©¿é€é˜²æŠ¤å¸ƒéš†è¿‡æ»¤å™¨å·²åˆå§‹åŒ–"</span>);
        }
        
        <span class="hljs-comment">// é¦–å…ˆæ£€æŸ¥å¸ƒéš†è¿‡æ»¤å™¨</span>
        <span class="hljs-keyword">if</span> (!bloomFilter.contains(key)) {
            <span class="hljs-comment">// å¸ƒéš†è¿‡æ»¤å™¨ç¡®è®¤å…ƒç´ ä¸å­˜åœ¨ï¼Œç›´æ¥è¿”å›ï¼Œé¿å…æŸ¥è¯¢ç¼“å­˜å’Œæ•°æ®åº“</span>
            System.out.println(<span class="hljs-string">"å¸ƒéš†è¿‡æ»¤å™¨ç¡®è®¤é”®ä¸å­˜åœ¨ï¼Œè·³è¿‡ç¼“å­˜å’Œæ•°æ®åº“æŸ¥è¯¢: "</span> + key);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        
        System.out.println(<span class="hljs-string">"å¸ƒéš†è¿‡æ»¤å™¨è®¤ä¸ºé”®å¯èƒ½å­˜åœ¨ï¼Œç»§ç»­æŸ¥è¯¢ç¼“å­˜/æ•°æ®åº“: "</span> + key);
        <span class="hljs-comment">// ç»§ç»­æŸ¥è¯¢ç¼“å­˜å’Œæ•°æ®åº“...</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-comment">/**
     * URLå»é‡åœºæ™¯
     * 
     * <span class="hljs-doctag">@param</span> url è¦æ£€æŸ¥çš„URL
     * <span class="hljs-doctag">@return</span> å¦‚æœURLæ˜¯æ–°çš„åˆ™è¿”å›trueï¼Œå¦‚æœæ˜¯é‡å¤çš„åˆ™è¿”å›false
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">urlDeduplication</span><span class="hljs-params">(String url)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">filterName</span> <span class="hljs-operator">=</span> <span class="hljs-string">"visited_urls_filter"</span>;
        RBloomFilter&lt;String&gt; bloomFilter = redissonClient.getBloomFilter(filterName);
        
        <span class="hljs-comment">// åˆå§‹åŒ–å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆé¢„è®¡1000ä¸‡ä¸ªURLï¼Œ1%è¯¯åˆ¤ç‡ï¼‰</span>
        <span class="hljs-keyword">if</span> (!bloomFilter.isExists()) {
            bloomFilter.tryInit(<span class="hljs-number">10000000</span>, <span class="hljs-number">0.01</span>);
            System.out.println(<span class="hljs-string">"URLå»é‡å¸ƒéš†è¿‡æ»¤å™¨å·²åˆå§‹åŒ–"</span>);
        }
        
        <span class="hljs-keyword">if</span> (!bloomFilter.contains(url)) {
            <span class="hljs-comment">// é¦–æ¬¡è®¿é—®ï¼Œæ·»åŠ åˆ°è¿‡æ»¤å™¨</span>
            bloomFilter.add(url);
            System.out.println(<span class="hljs-string">"é¦–æ¬¡è®¿é—®URLï¼Œå·²æ·»åŠ åˆ°å¸ƒéš†è¿‡æ»¤å™¨: "</span> + url);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">else</span> {
            System.out.println(<span class="hljs-string">"URLå·²è®¿é—®è¿‡ï¼Œè·³è¿‡å¤„ç†: "</span> + url);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * æ‰¹é‡æ·»åŠ å…ƒç´ åˆ°å¸ƒéš†è¿‡æ»¤å™¨
     * 
     * <span class="hljs-doctag">@param</span> filterName è¿‡æ»¤å™¨åç§°
     * <span class="hljs-doctag">@param</span> elements è¦æ·»åŠ çš„å…ƒç´ é›†åˆ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">batchAddToBloomFilter</span><span class="hljs-params">(String filterName, Collection&lt;String&gt; elements)</span> {
        RBloomFilter&lt;String&gt; bloomFilter = redissonClient.getBloomFilter(filterName);
        
        <span class="hljs-comment">// å¦‚æœè¿‡æ»¤å™¨ä¸å­˜åœ¨ï¼Œä½¿ç”¨é»˜è®¤å‚æ•°åˆ›å»º</span>
        <span class="hljs-keyword">if</span> (!bloomFilter.isExists()) {
            <span class="hljs-comment">// æ ¹æ®å…ƒç´ æ•°é‡ä¼°ç®—å‚æ•°</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">expectedElements</span> <span class="hljs-operator">=</span> Math.max(elements.size() * <span class="hljs-number">2</span>, <span class="hljs-number">100000L</span>);
            bloomFilter.tryInit(expectedElements, <span class="hljs-number">0.03</span>);
            System.out.println(<span class="hljs-string">"å¸ƒéš†è¿‡æ»¤å™¨ "</span> + filterName + <span class="hljs-string">" å·²åˆå§‹åŒ–ï¼Œé¢„æœŸå…ƒç´ æ•°: "</span> + expectedElements);
        }
        
        <span class="hljs-type">int</span> <span class="hljs-variable">addedCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (String element : elements) {
            <span class="hljs-keyword">if</span> (bloomFilter.add(element)) {
                addedCount++;
            }
        }
        
        System.out.println(<span class="hljs-string">"æ‰¹é‡æ·»åŠ å®Œæˆï¼Œæ–°å¢ "</span> + addedCount + <span class="hljs-string">" ä¸ªå…ƒç´ åˆ°è¿‡æ»¤å™¨: "</span> + filterName);
    }
    
    <span class="hljs-comment">/**
     * ç”¨æˆ·IDå­˜åœ¨æ€§æ£€æŸ¥
     * 
     * <span class="hljs-doctag">@param</span> userId ç”¨æˆ·ID
     * <span class="hljs-doctag">@return</span> å¦‚æœç”¨æˆ·å¯èƒ½å­˜åœ¨åˆ™è¿”å›true
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">checkUserExists</span><span class="hljs-params">(String userId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">filterName</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user_exists_filter"</span>;
        RBloomFilter&lt;String&gt; bloomFilter = redissonClient.getBloomFilter(filterName);
        
        <span class="hljs-comment">// åˆå§‹åŒ–å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆé¢„è®¡1000ä¸‡ä¸ªç”¨æˆ·ï¼Œ3%è¯¯åˆ¤ç‡ï¼‰</span>
        <span class="hljs-keyword">if</span> (!bloomFilter.isExists()) {
            bloomFilter.tryInit(<span class="hljs-number">10000000</span>, <span class="hljs-number">0.03</span>);
            System.out.println(<span class="hljs-string">"ç”¨æˆ·å­˜åœ¨æ€§æ£€æŸ¥å¸ƒéš†è¿‡æ»¤å™¨å·²åˆå§‹åŒ–"</span>);
        }
        
        <span class="hljs-type">boolean</span> <span class="hljs-variable">mightExist</span> <span class="hljs-operator">=</span> bloomFilter.contains(userId);
        System.out.println(<span class="hljs-string">"ç”¨æˆ· "</span> + userId + <span class="hljs-string">" å¯èƒ½å­˜åœ¨: "</span> + mightExist);
        <span class="hljs-keyword">return</span> mightExist;
    }
}
</code></pre>
<h3 data-id="heading-15">4. å»¶è¿Ÿé˜Ÿåˆ— - å®šæ—¶ä»»åŠ¡å¤„ç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RBlockingQueue;
<span class="hljs-keyword">import</span> org.redisson.api.RDelayedQueue;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> java.util.concurrent.ExecutorService;
<span class="hljs-keyword">import</span> java.util.concurrent.Executors;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * å»¶è¿Ÿé˜Ÿåˆ—ç”Ÿäº§çº§åº”ç”¨åœºæ™¯ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DelayedQueueScenario</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ExecutorService executorService;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DelayedQueueScenario</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
        <span class="hljs-built_in">this</span>.executorService = Executors.newFixedThreadPool(<span class="hljs-number">10</span>);
    }
    
    <span class="hljs-comment">/**
     * è®¢å•è¶…æ—¶å¤„ç†åœºæ™¯
     * 
     * <span class="hljs-doctag">@param</span> orderId è®¢å•ID
     * <span class="hljs-doctag">@param</span> timeout è¶…æ—¶æ—¶é—´
     * <span class="hljs-doctag">@param</span> unit æ—¶é—´å•ä½
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleOrderTimeout</span><span class="hljs-params">(String orderId, <span class="hljs-type">long</span> timeout, TimeUnit unit)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">queueName</span> <span class="hljs-operator">=</span> <span class="hljs-string">"order_timeout_queue"</span>;
        RBlockingQueue&lt;String&gt; queue = redissonClient.getBlockingQueue(queueName);
        RDelayedQueue&lt;String&gt; delayedQueue = redissonClient.getDelayedQueue(queue);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// è®¢å•åˆ›å»ºåtimeoutæ—¶é—´å¦‚æœä»æœªæ”¯ä»˜ï¼Œåˆ™è§¦å‘è¶…æ—¶å¤„ç†</span>
            delayedQueue.offer(orderId, timeout, unit);
            System.out.println(<span class="hljs-string">"è®¢å• "</span> + orderId + <span class="hljs-string">" å·²æ·»åŠ åˆ°å»¶è¿Ÿé˜Ÿåˆ—ï¼Œè¶…æ—¶æ—¶é—´: "</span> + timeout + <span class="hljs-string">" "</span> + unit);
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// æ³¨æ„ï¼šåœ¨å®é™…åº”ç”¨ä¸­ï¼Œå»¶è¿Ÿé˜Ÿåˆ—é€šå¸¸åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºç”Ÿå‘½å‘¨æœŸå†…ä¿æŒ</span>
            <span class="hljs-comment">// è¿™é‡Œä¸ºäº†ç¤ºä¾‹ç®€åŒ–ï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¸åº”ç«‹å³é”€æ¯</span>
        }
    }
    
    <span class="hljs-comment">/**
     * å¯åŠ¨å»¶è¿Ÿé˜Ÿåˆ—æ¶ˆè´¹è€…çº¿ç¨‹
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">startDelayedQueueConsumer</span><span class="hljs-params">()</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">queueName</span> <span class="hljs-operator">=</span> <span class="hljs-string">"order_timeout_queue"</span>;
        RBlockingQueue&lt;String&gt; queue = redissonClient.getBlockingQueue(queueName);
        RDelayedQueue&lt;String&gt; delayedQueue = redissonClient.getDelayedQueue(queue);
        
        <span class="hljs-comment">// å¯åŠ¨æ¶ˆè´¹è€…çº¿ç¨‹</span>
        executorService.submit(() -&gt; {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">while</span> (!Thread.currentThread().isInterrupted()) {
                    <span class="hljs-comment">// é˜»å¡ç­‰å¾…è¶…æ—¶è®¢å•</span>
                    <span class="hljs-type">String</span> <span class="hljs-variable">timeoutOrderId</span> <span class="hljs-operator">=</span> queue.take();
                    System.out.println(<span class="hljs-string">"è®¢å•è¶…æ—¶ï¼Œæ‰§è¡Œå–æ¶ˆæ“ä½œ: "</span> + timeoutOrderId);
                    
                    <span class="hljs-comment">// åœ¨ç‹¬ç«‹çº¿ç¨‹ä¸­å¤„ç†è¶…æ—¶è®¢å•ï¼Œé¿å…é˜»å¡é˜Ÿåˆ—æ¶ˆè´¹</span>
                    executorService.submit(() -&gt; {
                        processTimeoutOrder(timeoutOrderId);
                    });
                }
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                Thread.currentThread().interrupt();
                System.out.println(<span class="hljs-string">"å»¶è¿Ÿé˜Ÿåˆ—æ¶ˆè´¹è€…çº¿ç¨‹è¢«ä¸­æ–­"</span>);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                System.err.println(<span class="hljs-string">"å»¶è¿Ÿé˜Ÿåˆ—æ¶ˆè´¹è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            }
        });
        
        System.out.println(<span class="hljs-string">"å»¶è¿Ÿé˜Ÿåˆ—æ¶ˆè´¹è€…å·²å¯åŠ¨"</span>);
    }
    
    <span class="hljs-comment">/**
     * å¤„ç†è¶…æ—¶è®¢å•
     * 
     * <span class="hljs-doctag">@param</span> orderId è¶…æ—¶è®¢å•ID
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processTimeoutOrder</span><span class="hljs-params">(String orderId)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ‰§è¡Œå–æ¶ˆè®¢å•ã€é‡Šæ”¾åº“å­˜ç­‰æ“ä½œ</span>
            System.out.println(<span class="hljs-string">"æ­£åœ¨å¤„ç†è¶…æ—¶è®¢å•: "</span> + orderId);
            
            <span class="hljs-comment">// æ¨¡æ‹Ÿä¸šåŠ¡å¤„ç†</span>
            cancelOrder(orderId);
            releaseInventory(orderId);
            
            System.out.println(<span class="hljs-string">"è¶…æ—¶è®¢å•å¤„ç†å®Œæˆ: "</span> + orderId);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"å¤„ç†è¶…æ—¶è®¢å•æ—¶å‘ç”Ÿå¼‚å¸¸ï¼Œè®¢å•ID: "</span> + orderId + <span class="hljs-string">"ï¼Œå¼‚å¸¸: "</span> + e.getMessage());
        }
    }
    
    <span class="hljs-comment">/**
     * è®¢å•æ”¯ä»˜æˆåŠŸåå–æ¶ˆå»¶è¿Ÿä»»åŠ¡
     * 
     * <span class="hljs-doctag">@param</span> orderId è®¢å•ID
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">cancelOrderTimeout</span><span class="hljs-params">(String orderId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">queueName</span> <span class="hljs-operator">=</span> <span class="hljs-string">"order_timeout_queue"</span>;
        RBlockingQueue&lt;String&gt; queue = redissonClient.getBlockingQueue(queueName);
        RDelayedQueue&lt;String&gt; delayedQueue = redissonClient.getDelayedQueue(queue);
        
        <span class="hljs-comment">// ä»å»¶è¿Ÿé˜Ÿåˆ—ä¸­ç§»é™¤ï¼Œé¿å…è¶…æ—¶å¤„ç†</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">removed</span> <span class="hljs-operator">=</span> delayedQueue.remove(orderId);
        <span class="hljs-keyword">if</span> (removed) {
            System.out.println(<span class="hljs-string">"å·²å–æ¶ˆè®¢å•è¶…æ—¶å¤„ç†: "</span> + orderId);
        } <span class="hljs-keyword">else</span> {
            System.out.println(<span class="hljs-string">"è®¢å•ä¸åœ¨å»¶è¿Ÿé˜Ÿåˆ—ä¸­ï¼Œå¯èƒ½å·²è¶…æ—¶å¤„ç†: "</span> + orderId);
        }
        
        <span class="hljs-keyword">return</span> removed;
    }
    
    <span class="hljs-comment">/**
     * å…³é—­èµ„æº
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">shutdown</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (executorService != <span class="hljs-literal">null</span> &amp;&amp; !executorService.isShutdown()) {
            executorService.shutdown();
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">if</span> (!executorService.awaitTermination(<span class="hljs-number">5</span>, TimeUnit.SECONDS)) {
                    executorService.shutdownNow();
                }
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                executorService.shutdownNow();
                Thread.currentThread().interrupt();
            }
        }
    }
    
    <span class="hljs-comment">/**
     * æ¨¡æ‹Ÿå–æ¶ˆè®¢å•
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cancelOrder</span><span class="hljs-params">(String orderId)</span> {
        <span class="hljs-comment">// å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šæ›´æ–°è®¢å•çŠ¶æ€</span>
        System.out.println(<span class="hljs-string">"è®¢å•å·²å–æ¶ˆ: "</span> + orderId);
    }
    
    <span class="hljs-comment">/**
     * æ¨¡æ‹Ÿé‡Šæ”¾åº“å­˜
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">releaseInventory</span><span class="hljs-params">(String orderId)</span> {
        <span class="hljs-comment">// å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šé‡Šæ”¾å ç”¨çš„åº“å­˜</span>
        System.out.println(<span class="hljs-string">"å·²é‡Šæ”¾è®¢å•åº“å­˜: "</span> + orderId);
    }
}
</code></pre>
<h3 data-id="heading-16">5. åˆ†å¸ƒå¼è®¡æ•°å™¨ - ç»Ÿè®¡å’Œé™æµ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RAtomicLong;
<span class="hljs-keyword">import</span> org.redisson.api.RRateLimiter;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> org.redisson.api.RateIntervalUnit;
<span class="hljs-keyword">import</span> org.redisson.api.RateType;
<span class="hljs-keyword">import</span> java.util.concurrent.CompletableFuture;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * åˆ†å¸ƒå¼è®¡æ•°å™¨ç”Ÿäº§çº§åº”ç”¨åœºæ™¯ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CounterScenario</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CounterScenario</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }
    
    <span class="hljs-comment">/**
     * æ¥å£è®¿é—®é™æµ
     * 
     * <span class="hljs-doctag">@param</span> interfaceName æ¥å£åç§°
     * <span class="hljs-doctag">@param</span> maxRequests æœ€å¤§è¯·æ±‚æ•°
     * <span class="hljs-doctag">@param</span> timeUnit æ—¶é—´å•ä½
     * <span class="hljs-doctag">@return</span> æ˜¯å¦å…è®¸è®¿é—®
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">interfaceRateLimiting</span><span class="hljs-params">(String interfaceName, <span class="hljs-type">long</span> maxRequests, TimeUnit timeUnit)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">rateLimiterKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"api_rate_limiter:"</span> + interfaceName;
        <span class="hljs-type">RRateLimiter</span> <span class="hljs-variable">rateLimiter</span> <span class="hljs-operator">=</span> redissonClient.getRateLimiter(rateLimiterKey);
        
        <span class="hljs-comment">// é…ç½®é™æµå™¨ï¼šåœ¨æŒ‡å®šæ—¶é—´é—´éš”å†…æœ€å¤šå…è®¸maxRequestsä¸ªè¯·æ±‚</span>
        <span class="hljs-keyword">if</span> (!rateLimiter.isExists()) {
            RateIntervalUnit intervalUnit;
            <span class="hljs-type">long</span> <span class="hljs-variable">rateInterval</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
            
            <span class="hljs-keyword">switch</span> (timeUnit) {
                <span class="hljs-keyword">case</span> SECONDS:
                    intervalUnit = RateIntervalUnit.SECONDS;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> MINUTES:
                    intervalUnit = RateIntervalUnit.MINUTES;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> HOURS:
                    intervalUnit = RateIntervalUnit.HOURS;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">default</span>:
                    intervalUnit = RateIntervalUnit.SECONDS;
            }
            
            rateLimiter.trySetRate(RateType.OVERALL, maxRequests, rateInterval, intervalUnit);
            System.out.println(<span class="hljs-string">"æ¥å£ "</span> + interfaceName + <span class="hljs-string">" é™æµå™¨å·²è®¾ç½®: "</span> + maxRequests + 
                             <span class="hljs-string">" æ¬¡/"</span> + timeUnit);
        }
        
        <span class="hljs-comment">// å°è¯•è·å–ä»¤ç‰Œ</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">allowed</span> <span class="hljs-operator">=</span> rateLimiter.tryAcquire();
        <span class="hljs-keyword">if</span> (allowed) {
            System.out.println(<span class="hljs-string">"æ¥å£ "</span> + interfaceName + <span class="hljs-string">" è®¿é—®è¢«å…è®¸"</span>);
        } <span class="hljs-keyword">else</span> {
            System.out.println(<span class="hljs-string">"æ¥å£ "</span> + interfaceName + <span class="hljs-string">" è®¿é—®è¢«é™æµ"</span>);
        }
        
        <span class="hljs-keyword">return</span> allowed;
    }
    
    <span class="hljs-comment">/**
     * æ¥å£è®¿é—®ç»Ÿè®¡
     * 
     * <span class="hljs-doctag">@param</span> interfaceName æ¥å£åç§°
     * <span class="hljs-doctag">@return</span> å½“å‰è®¿é—®æ¬¡æ•°
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">countApiAccess</span><span class="hljs-params">(String interfaceName)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">counterKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"api_access_counter:"</span> + interfaceName;
        <span class="hljs-type">RAtomicLong</span> <span class="hljs-variable">counter</span> <span class="hljs-operator">=</span> redissonClient.getAtomicLong(counterKey);
        
        <span class="hljs-comment">// åŸå­é€’å¢è®¡æ•°å™¨</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> counter.incrementAndGet();
        System.out.println(<span class="hljs-string">"æ¥å£ "</span> + interfaceName + <span class="hljs-string">" è®¿é—®æ¬¡æ•°: "</span> + count);
        
        <span class="hljs-keyword">return</span> count;
    }
    
    <span class="hljs-comment">/**
     * åˆ†å¸ƒå¼IDç”Ÿæˆå™¨
     * 
     * <span class="hljs-doctag">@param</span> generatorName ç”Ÿæˆå™¨åç§°
     * <span class="hljs-doctag">@param</span> step æ­¥é•¿
     * <span class="hljs-doctag">@return</span> ä¸‹ä¸€ä¸ªID
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">generateDistributedId</span><span class="hljs-params">(String generatorName, <span class="hljs-type">long</span> step)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">counterKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"distributed_id_generator:"</span> + generatorName;
        <span class="hljs-type">RAtomicLong</span> <span class="hljs-variable">idGenerator</span> <span class="hljs-operator">=</span> redissonClient.getAtomicLong(counterKey);
        
        <span class="hljs-comment">// åŸå­æ€§åœ°å¢åŠ stepå¹¶è¿”å›æ–°å€¼</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">nextId</span> <span class="hljs-operator">=</span> idGenerator.addAndGet(step);
        System.out.println(generatorName + <span class="hljs-string">" ç”Ÿæˆçš„ä¸‹ä¸€ä¸ªID: "</span> + nextId);
        
        <span class="hljs-keyword">return</span> nextId;
    }
    
    <span class="hljs-comment">/**
     * ç®€å•çš„åˆ†å¸ƒå¼IDç”Ÿæˆå™¨
     * 
     * <span class="hljs-doctag">@param</span> generatorName ç”Ÿæˆå™¨åç§°
     * <span class="hljs-doctag">@return</span> ä¸‹ä¸€ä¸ªID
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">generateNextId</span><span class="hljs-params">(String generatorName)</span> {
        <span class="hljs-keyword">return</span> generateDistributedId(generatorName, <span class="hljs-number">1</span>);
    }
    
    <span class="hljs-comment">/**
     * è·å–è®¡æ•°å™¨å½“å‰å€¼
     * 
     * <span class="hljs-doctag">@param</span> counterName è®¡æ•°å™¨åç§°
     * <span class="hljs-doctag">@return</span> å½“å‰è®¡æ•°å€¼
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getCurrentCount</span><span class="hljs-params">(String counterName)</span> {
        <span class="hljs-type">RAtomicLong</span> <span class="hljs-variable">counter</span> <span class="hljs-operator">=</span> redissonClient.getAtomicLong(counterName);
        <span class="hljs-keyword">return</span> counter.get();
    }
    
    <span class="hljs-comment">/**
     * é‡ç½®è®¡æ•°å™¨
     * 
     * <span class="hljs-doctag">@param</span> counterName è®¡æ•°å™¨åç§°
     * <span class="hljs-doctag">@param</span> newValue æ–°å€¼
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">resetCounter</span><span class="hljs-params">(String counterName, <span class="hljs-type">long</span> newValue)</span> {
        <span class="hljs-type">RAtomicLong</span> <span class="hljs-variable">counter</span> <span class="hljs-operator">=</span> redissonClient.getAtomicLong(counterName);
        counter.set(newValue);
        System.out.println(<span class="hljs-string">"è®¡æ•°å™¨ "</span> + counterName + <span class="hljs-string">" å·²é‡ç½®ä¸º: "</span> + newValue);
    }
    
    <span class="hljs-comment">/**
     * å¸¦æ¡ä»¶æ›´æ–°çš„è®¡æ•°å™¨æ“ä½œ
     * 
     * <span class="hljs-doctag">@param</span> counterName è®¡æ•°å™¨åç§°
     * <span class="hljs-doctag">@param</span> expectedValue æœŸæœ›å€¼
     * <span class="hljs-doctag">@param</span> newValue æ–°å€¼
     * <span class="hljs-doctag">@return</span> æ›´æ–°æ˜¯å¦æˆåŠŸ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">conditionalUpdate</span><span class="hljs-params">(String counterName, <span class="hljs-type">long</span> expectedValue, <span class="hljs-type">long</span> newValue)</span> {
        <span class="hljs-type">RAtomicLong</span> <span class="hljs-variable">counter</span> <span class="hljs-operator">=</span> redissonClient.getAtomicLong(counterName);
        
        <span class="hljs-type">boolean</span> <span class="hljs-variable">updated</span> <span class="hljs-operator">=</span> counter.compareAndSet(expectedValue, newValue);
        <span class="hljs-keyword">if</span> (updated) {
            System.out.println(<span class="hljs-string">"è®¡æ•°å™¨ "</span> + counterName + <span class="hljs-string">" æ¡ä»¶æ›´æ–°æˆåŠŸ: "</span> + expectedValue + <span class="hljs-string">" -&gt; "</span> + newValue);
        } <span class="hljs-keyword">else</span> {
            System.out.println(<span class="hljs-string">"è®¡æ•°å™¨ "</span> + counterName + <span class="hljs-string">" æ¡ä»¶æ›´æ–°å¤±è´¥ï¼Œå½“å‰å€¼: "</span> + counter.get());
        }
        
        <span class="hljs-keyword">return</span> updated;
    }
    
    <span class="hljs-comment">/**
     * å¼‚æ­¥è·å–è®¡æ•°å™¨å€¼
     * 
     * <span class="hljs-doctag">@param</span> counterName è®¡æ•°å™¨åç§°
     * <span class="hljs-doctag">@return</span> CompletableFutureè¡¨ç¤ºè®¡æ•°å€¼
     */</span>
    <span class="hljs-keyword">public</span> CompletableFuture&lt;Long&gt; <span class="hljs-title function_">getCounterValueAsync</span><span class="hljs-params">(String counterName)</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; {
            <span class="hljs-type">RAtomicLong</span> <span class="hljs-variable">counter</span> <span class="hljs-operator">=</span> redissonClient.getAtomicLong(counterName);
            <span class="hljs-keyword">return</span> counter.get();
        });
    }
}
</code></pre>
<h3 data-id="heading-17">6. åˆ†å¸ƒå¼é›†åˆ - å…±äº«æ•°æ®å­˜å‚¨</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.*;
<span class="hljs-keyword">import</span> org.redisson.api.mapreduce.RCollectionMapReduce;
<span class="hljs-keyword">import</span> java.util.Collection;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-comment">/**
 * åˆ†å¸ƒå¼é›†åˆå¹¶å‘çº§åº”ç”¨åœºæ™¯ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CollectionsScenario</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CollectionsScenario</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }
    
    <span class="hljs-comment">/**
     * åˆ†å¸ƒå¼ç¼“å­˜Mapæ“ä½œ
     * 
     * <span class="hljs-doctag">@param</span> cacheName ç¼“å­˜åç§°
     * <span class="hljs-doctag">@param</span> key é”®
     * <span class="hljs-doctag">@param</span> value å€¼
     * <span class="hljs-doctag">@param</span> ttl ç¼“å­˜è¿‡æœŸæ—¶é—´
     * <span class="hljs-doctag">@return</span> æ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">operateDistributedCache</span><span class="hljs-params">(String cacheName, String key, Object value, <span class="hljs-type">long</span> ttl, TimeUnit timeUnit)</span> {
        <span class="hljs-keyword">try</span> {
            RMap&lt;String, Object&gt; cache = redissonClient.getMap(cacheName);
            
            <span class="hljs-comment">// è®¾ç½®å¸¦è¿‡æœŸæ—¶é—´çš„é”®å€¼å¯¹</span>
            <span class="hljs-type">Object</span> <span class="hljs-variable">oldValue</span> <span class="hljs-operator">=</span> cache.put(key, value, ttl, timeUnit);
            
            System.out.println(<span class="hljs-string">"åœ¨ç¼“å­˜ "</span> + cacheName + <span class="hljs-string">" ä¸­è®¾ç½®: "</span> + key + <span class="hljs-string">" = "</span> + value + 
                             <span class="hljs-string">"ï¼Œè¿‡æœŸæ—¶é—´: "</span> + ttl + <span class="hljs-string">" "</span> + timeUnit);
            
            <span class="hljs-keyword">if</span> (oldValue != <span class="hljs-literal">null</span>) {
                System.out.println(<span class="hljs-string">"æ›¿æ¢çš„æ—§å€¼: "</span> + oldValue);
            }
            
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ“ä½œåˆ†å¸ƒå¼ç¼“å­˜æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * åœ¨çº¿ç”¨æˆ·ç®¡ç†
     * 
     * <span class="hljs-doctag">@param</span> userId ç”¨æˆ·ID
     * <span class="hljs-doctag">@return</span> æ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">manageOnlineUsers</span><span class="hljs-params">(String userId)</span> {
        <span class="hljs-keyword">try</span> {
            RSet&lt;String&gt; onlineUsers = redissonClient.getSet(<span class="hljs-string">"online_users"</span>);
            
            <span class="hljs-comment">// æ·»åŠ ç”¨æˆ·åˆ°åœ¨çº¿ç”¨æˆ·é›†åˆ</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">added</span> <span class="hljs-operator">=</span> onlineUsers.add(userId);
            <span class="hljs-keyword">if</span> (added) {
                System.out.println(<span class="hljs-string">"ç”¨æˆ· "</span> + userId + <span class="hljs-string">" å·²ä¸Šçº¿"</span>);
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"ç”¨æˆ· "</span> + userId + <span class="hljs-string">" å·²åœ¨çº¿"</span>);
            }
            
            <span class="hljs-comment">// è·å–å½“å‰åœ¨çº¿ç”¨æˆ·æ•°</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">onlineCount</span> <span class="hljs-operator">=</span> onlineUsers.size();
            System.out.println(<span class="hljs-string">"å½“å‰åœ¨çº¿ç”¨æˆ·æ•°: "</span> + onlineCount);
            
            <span class="hljs-keyword">return</span> added;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"ç®¡ç†åœ¨çº¿ç”¨æˆ·æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * ç§»é™¤åœ¨çº¿ç”¨æˆ·
     * 
     * <span class="hljs-doctag">@param</span> userId ç”¨æˆ·ID
     * <span class="hljs-doctag">@return</span> æ˜¯å¦æˆåŠŸç§»é™¤
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">removeOnlineUser</span><span class="hljs-params">(String userId)</span> {
        <span class="hljs-keyword">try</span> {
            RSet&lt;String&gt; onlineUsers = redissonClient.getSet(<span class="hljs-string">"online_users"</span>);
            
            <span class="hljs-type">boolean</span> <span class="hljs-variable">removed</span> <span class="hljs-operator">=</span> onlineUsers.remove(userId);
            <span class="hljs-keyword">if</span> (removed) {
                System.out.println(<span class="hljs-string">"ç”¨æˆ· "</span> + userId + <span class="hljs-string">" å·²ä¸‹çº¿"</span>);
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"ç”¨æˆ· "</span> + userId + <span class="hljs-string">" ä¸åœ¨åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ä¸­"</span>);
            }
            
            <span class="hljs-keyword">return</span> removed;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"ç§»é™¤åœ¨çº¿ç”¨æˆ·æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * è·å–æ‰€æœ‰åœ¨çº¿ç”¨æˆ·
     * 
     * <span class="hljs-doctag">@return</span> åœ¨çº¿ç”¨æˆ·åˆ—è¡¨
     */</span>
    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">getOnlineUsers</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            RSet&lt;String&gt; onlineUsers = redissonClient.getSet(<span class="hljs-string">"online_users"</span>);
            <span class="hljs-keyword">return</span> onlineUsers.readAllSet().stream().toList();
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"è·å–åœ¨çº¿ç”¨æˆ·åˆ—è¡¨æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> List.of();
        }
    }
    
    <span class="hljs-comment">/**
     * æ“ä½œåˆ†å¸ƒå¼åˆ—è¡¨
     * 
     * <span class="hljs-doctag">@param</span> listName åˆ—è¡¨åç§°
     * <span class="hljs-doctag">@param</span> elements è¦æ·»åŠ çš„å…ƒç´ 
     * <span class="hljs-doctag">@return</span> æ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">operateDistributedList</span><span class="hljs-params">(String listName, List&lt;String&gt; elements)</span> {
        <span class="hljs-keyword">try</span> {
            RList&lt;String&gt; list = redissonClient.getList(listName);
            
            <span class="hljs-comment">// æ‰¹é‡æ·»åŠ å…ƒç´ </span>
            list.addAll(elements);
            System.out.println(<span class="hljs-string">"å‘åˆ—è¡¨ "</span> + listName + <span class="hljs-string">" æ·»åŠ  "</span> + elements.size() + <span class="hljs-string">" ä¸ªå…ƒç´ "</span>);
            
            <span class="hljs-comment">// è·å–åˆ—è¡¨å¤§å°</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> list.size();
            System.out.println(<span class="hljs-string">"åˆ—è¡¨ "</span> + listName + <span class="hljs-string">" å½“å‰å¤§å°: "</span> + size);
            
            <span class="hljs-comment">// è·å–åˆ—è¡¨å†…å®¹ï¼ˆé™åˆ¶æ•°é‡ä»¥é¿å…å¤§é‡æ•°æ®ä¼ è¾“ï¼‰</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">maxElementsToShow</span> <span class="hljs-operator">=</span> Math.min(<span class="hljs-number">10</span>, size);
            <span class="hljs-keyword">if</span> (size &gt; <span class="hljs-number">0</span>) {
                java.util.List&lt;String&gt; subList = list.subList(<span class="hljs-number">0</span>, maxElementsToShow);
                System.out.println(<span class="hljs-string">"åˆ—è¡¨å‰ "</span> + maxElementsToShow + <span class="hljs-string">" ä¸ªå…ƒç´ : "</span> + subList);
                <span class="hljs-keyword">if</span> (size &gt; maxElementsToShow) {
                    System.out.println(<span class="hljs-string">"... è¿˜æœ‰ "</span> + (size - maxElementsToShow) + <span class="hljs-string">" ä¸ªå…ƒç´ "</span>);
                }
            }
            
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ“ä½œåˆ†å¸ƒå¼åˆ—è¡¨æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * æ‰¹é‡æ“ä½œMap
     * 
     * <span class="hljs-doctag">@param</span> mapName Mapåç§°
     * <span class="hljs-doctag">@param</span> data æ‰¹é‡æ•°æ®
     * <span class="hljs-doctag">@return</span> æ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">batchOperateMap</span><span class="hljs-params">(String mapName, Map&lt;String, Object&gt; data)</span> {
        <span class="hljs-keyword">try</span> {
            RMap&lt;String, Object&gt; map = redissonClient.getMap(mapName);
            
            <span class="hljs-comment">// æ‰¹é‡æ·»åŠ æ•°æ®</span>
            map.putAll(data);
            System.out.println(<span class="hljs-string">"å‘Map "</span> + mapName + <span class="hljs-string">" æ‰¹é‡æ·»åŠ  "</span> + data.size() + <span class="hljs-string">" ä¸ªé”®å€¼å¯¹"</span>);
            
            <span class="hljs-comment">// è·å–Mapå¤§å°</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> map.size();
            System.out.println(<span class="hljs-string">"Map "</span> + mapName + <span class="hljs-string">" å½“å‰å¤§å°: "</span> + size);
            
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"æ‰¹é‡æ“ä½œMapæ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * è·å–Mapçš„æ‰€æœ‰é”®å€¼å¯¹
     * 
     * <span class="hljs-doctag">@param</span> mapName Mapåç§°
     * <span class="hljs-doctag">@return</span> æ‰€æœ‰é”®å€¼å¯¹
     */</span>
    <span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title function_">getAllMapEntries</span><span class="hljs-params">(String mapName)</span> {
        <span class="hljs-keyword">try</span> {
            RMap&lt;String, Object&gt; map = redissonClient.getMap(mapName);
            <span class="hljs-keyword">return</span> map.readAllMap();
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"è·å–Mapæ‰€æœ‰é”®å€¼å¯¹æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> Map.of();
        }
    }
    
    <span class="hljs-comment">/**
     * å®‰å…¨åˆ é™¤Mapä¸­çš„é”®å€¼å¯¹
     * 
     * <span class="hljs-doctag">@param</span> mapName Mapåç§°
     * <span class="hljs-doctag">@param</span> key è¦åˆ é™¤çš„é”®
     * <span class="hljs-doctag">@return</span> æ˜¯å¦æˆåŠŸåˆ é™¤
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">safeRemoveFromMap</span><span class="hljs-params">(String mapName, String key)</span> {
        <span class="hljs-keyword">try</span> {
            RMap&lt;String, Object&gt; map = redissonClient.getMap(mapName);
            
            <span class="hljs-type">Object</span> <span class="hljs-variable">removedValue</span> <span class="hljs-operator">=</span> map.remove(key);
            <span class="hljs-keyword">if</span> (removedValue != <span class="hljs-literal">null</span>) {
                System.out.println(<span class="hljs-string">"ä»Map "</span> + mapName + <span class="hljs-string">" ä¸­åˆ é™¤é”®: "</span> + key + <span class="hljs-string">"ï¼Œå€¼: "</span> + removedValue);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"é”® "</span> + key + <span class="hljs-string">" åœ¨Map "</span> + mapName + <span class="hljs-string">" ä¸­ä¸å­˜åœ¨"</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"å®‰å…¨åˆ é™¤Mapé”®å€¼å¯¹æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
}
</code></pre>
<h3 data-id="heading-18">7. å‘å¸ƒ/è®¢é˜… - å®æ—¶æ¶ˆæ¯é€šçŸ¥</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RTopic;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> org.redisson.api.listener.MessageListener;
<span class="hljs-keyword">import</span> java.util.concurrent.CompletableFuture;
<span class="hljs-keyword">import</span> java.util.concurrent.ExecutorService;
<span class="hljs-keyword">import</span> java.util.concurrent.Executors;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * å‘å¸ƒ/è®¢é˜…ç”Ÿäº§çº§åº”ç”¨åœºæ™¯ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PubSubScenario</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ExecutorService executorService;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">PubSubScenario</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
        <span class="hljs-built_in">this</span>.executorService = Executors.newCachedThreadPool();
    }
    
    <span class="hljs-comment">/**
     * è®¢é˜…ç³»ç»Ÿé€šçŸ¥
     * 
     * <span class="hljs-doctag">@param</span> topicName ä¸»é¢˜åç§°
     * <span class="hljs-doctag">@param</span> notificationHandler é€šçŸ¥å¤„ç†å™¨
     * <span class="hljs-doctag">@return</span> ç›‘å¬å™¨ID
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">subscribeSystemNotifications</span><span class="hljs-params">(String topicName, java.util.function.Consumer&lt;String&gt; notificationHandler)</span> {
        <span class="hljs-type">RTopic</span> <span class="hljs-variable">topic</span> <span class="hljs-operator">=</span> redissonClient.getTopic(topicName);
        
        <span class="hljs-comment">// æ·»åŠ æ¶ˆæ¯ç›‘å¬å™¨</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">listenerId</span> <span class="hljs-operator">=</span> topic.addListener(String.class, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageListener</span>&lt;String&gt;() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(CharSequence channel, String message)</span> {
                System.out.println(<span class="hljs-string">"æ”¶åˆ°ç³»ç»Ÿé€šçŸ¥ - é¢‘é“: "</span> + channel + <span class="hljs-string">"ï¼Œæ¶ˆæ¯: "</span> + message);
                
                <span class="hljs-comment">// åœ¨ç‹¬ç«‹çº¿ç¨‹ä¸­å¤„ç†æ¶ˆæ¯ï¼Œé¿å…é˜»å¡Redissonçš„æ¶ˆæ¯å¤„ç†çº¿ç¨‹</span>
                executorService.submit(() -&gt; {
                    <span class="hljs-keyword">try</span> {
                        notificationHandler.accept(message);
                    } <span class="hljs-keyword">catch</span> (Exception e) {
                        System.err.println(<span class="hljs-string">"å¤„ç†ç³»ç»Ÿé€šçŸ¥æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
                    }
                });
            }
        });
        
        System.out.println(<span class="hljs-string">"å·²è®¢é˜…ç³»ç»Ÿé€šçŸ¥ä¸»é¢˜: "</span> + topicName + <span class="hljs-string">"ï¼Œç›‘å¬å™¨ID: "</span> + listenerId);
        <span class="hljs-keyword">return</span> listenerId;
    }
    
    <span class="hljs-comment">/**
     * å‘å¸ƒç³»ç»Ÿé€šçŸ¥
     * 
     * <span class="hljs-doctag">@param</span> topicName ä¸»é¢˜åç§°
     * <span class="hljs-doctag">@param</span> message é€šçŸ¥æ¶ˆæ¯
     * <span class="hljs-doctag">@return</span> æ¥æ”¶è€…æ•°é‡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">publishSystemNotification</span><span class="hljs-params">(String topicName, String message)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">RTopic</span> <span class="hljs-variable">topic</span> <span class="hljs-operator">=</span> redissonClient.getTopic(topicName);
            
            <span class="hljs-comment">// å‘å¸ƒæ¶ˆæ¯</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">receivers</span> <span class="hljs-operator">=</span> topic.publish(message);
            System.out.println(<span class="hljs-string">"ç³»ç»Ÿé€šçŸ¥å·²å‘å¸ƒ - ä¸»é¢˜: "</span> + topicName + 
                             <span class="hljs-string">"ï¼Œæ¶ˆæ¯: "</span> + message + 
                             <span class="hljs-string">"ï¼Œæ¥æ”¶è€…æ•°é‡: "</span> + receivers);
            
            <span class="hljs-keyword">return</span> receivers;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"å‘å¸ƒç³»ç»Ÿé€šçŸ¥æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * å¼‚æ­¥å‘å¸ƒç³»ç»Ÿé€šçŸ¥
     * 
     * <span class="hljs-doctag">@param</span> topicName ä¸»é¢˜åç§°
     * <span class="hljs-doctag">@param</span> message é€šçŸ¥æ¶ˆæ¯
     * <span class="hljs-doctag">@return</span> CompletableFutureè¡¨ç¤ºå‘å¸ƒç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> CompletableFuture&lt;Long&gt; <span class="hljs-title function_">publishSystemNotificationAsync</span><span class="hljs-params">(String topicName, String message)</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; {
            <span class="hljs-keyword">return</span> publishSystemNotification(topicName, message);
        }, executorService);
    }
    
    <span class="hljs-comment">/**
     * è®¢å•çŠ¶æ€å˜æ›´é€šçŸ¥åœºæ™¯
     * 
     * <span class="hljs-doctag">@param</span> orderId è®¢å•ID
     * <span class="hljs-doctag">@param</span> newStatus æ–°çŠ¶æ€
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">notifyOrderStatusChange</span><span class="hljs-params">(String orderId, String newStatus)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">topicName</span> <span class="hljs-operator">=</span> <span class="hljs-string">"order_status_change"</span>;
        <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> String.format(<span class="hljs-string">"è®¢å• %s çŠ¶æ€å˜æ›´ä¸º %s"</span>, orderId, newStatus);
        
        publishSystemNotification(topicName, message);
    }
    
    <span class="hljs-comment">/**
     * ç”¨æˆ·ç™»å½•é€šçŸ¥åœºæ™¯
     * 
     * <span class="hljs-doctag">@param</span> userId ç”¨æˆ·ID
     * <span class="hljs-doctag">@param</span> loginTime ç™»å½•æ—¶é—´
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">notifyUserLogin</span><span class="hljs-params">(String userId, <span class="hljs-type">long</span> loginTime)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">topicName</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user_login"</span>;
        <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> String.format(<span class="hljs-string">"ç”¨æˆ· %s äº %d ç™»å½•"</span>, userId, loginTime);
        
        publishSystemNotification(topicName, message);
    }
    
    <span class="hljs-comment">/**
     * ç³»ç»Ÿç»´æŠ¤é€šçŸ¥åœºæ™¯
     * 
     * <span class="hljs-doctag">@param</span> maintenanceTime ç»´æŠ¤æ—¶é—´
     * <span class="hljs-doctag">@param</span> duration ç»´æŠ¤æ—¶é•¿
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">notifySystemMaintenance</span><span class="hljs-params">(<span class="hljs-type">long</span> maintenanceTime, <span class="hljs-type">long</span> duration)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">topicName</span> <span class="hljs-operator">=</span> <span class="hljs-string">"system_maintenance"</span>;
        <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> String.format(<span class="hljs-string">"ç³»ç»Ÿå°†äº %d å¼€å§‹ç»´æŠ¤ï¼Œé¢„è®¡æŒç»­ %d ç§’"</span>, maintenanceTime, duration);
        
        publishSystemNotification(topicName, message);
    }
    
    <span class="hljs-comment">/**
     * ç§»é™¤æ¶ˆæ¯ç›‘å¬å™¨
     * 
     * <span class="hljs-doctag">@param</span> topicName ä¸»é¢˜åç§°
     * <span class="hljs-doctag">@param</span> listenerId ç›‘å¬å™¨ID
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeMessageListener</span><span class="hljs-params">(String topicName, <span class="hljs-type">int</span> listenerId)</span> {
        <span class="hljs-type">RTopic</span> <span class="hljs-variable">topic</span> <span class="hljs-operator">=</span> redissonClient.getTopic(topicName);
        topic.removeListener(listenerId);
        System.out.println(<span class="hljs-string">"å·²ç§»é™¤ç›‘å¬å™¨ï¼ŒID: "</span> + listenerId + <span class="hljs-string">"ï¼Œä¸»é¢˜: "</span> + topicName);
    }
    
    <span class="hljs-comment">/**
     * å…³é—­èµ„æº
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">shutdown</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (executorService != <span class="hljs-literal">null</span> &amp;&amp; !executorService.isShutdown()) {
            executorService.shutdown();
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">if</span> (!executorService.awaitTermination(<span class="hljs-number">5</span>, TimeUnit.SECONDS)) {
                    executorService.shutdownNow();
                }
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                executorService.shutdownNow();
                Thread.currentThread().interrupt();
            }
        }
    }
}
</code></pre>
<h2 data-id="heading-19">åº•å±‚åŸç†è¯¦è§£</h2>
<h3 data-id="heading-20">1. åˆ†å¸ƒå¼é”å®ç°åŸç† ğŸ§©</h3>
<p>Redissonçš„åˆ†å¸ƒå¼é”å°±åƒä¸€ä¸ªæ™ºèƒ½"é—¨å«"ï¼Œå®ƒçš„å®ç°åŸç†éå¸¸å·§å¦™ï¼š</p>
<ul>
<li><strong>è·å–é”</strong>: ä½¿ç”¨Redisçš„<code>SET key value NX EX seconds</code>å‘½ä»¤ï¼Œå°±åƒä¸€ä¸ª"å…ˆåˆ°å…ˆå¾—"çš„æœºåˆ¶ï¼Œç¡®ä¿åªæœ‰åœ¨keyä¸å­˜åœ¨æ—¶æ‰è®¾ç½®æˆåŠŸï¼Œå®ç°åŸå­æ€§æ“ä½œ</li>
<li><strong>Watchdogæœºåˆ¶</strong>: Redissonä½¿ç”¨åå°å®šæ—¶ä»»åŠ¡ï¼ˆçœ‹é—¨ç‹—ï¼‰ï¼Œæ¯è¿‡é”è¿‡æœŸæ—¶é—´çš„1/3å°±è‡ªåŠ¨ç»­æœŸï¼Œå°±åƒç»™é”è£…äº†"æ°¸ä¸æ–­ç”µ"çš„ç”µæ± ï¼Œé˜²æ­¢ä¸šåŠ¡æ‰§è¡Œæ—¶é—´è¿‡é•¿å¯¼è‡´é”æ„å¤–é‡Šæ”¾</li>
<li><strong>å¯é‡å…¥æ€§</strong>: é€šè¿‡Redis Hashç»“æ„è®°å½•çº¿ç¨‹IDå’Œé‡å…¥æ¬¡æ•°ï¼Œè®©åŒä¸€ä¸ª"å®¢äºº"å¯ä»¥å¤šæ¬¡è¿›å…¥"æˆ¿é—´"</li>
<li><strong>åŸå­æ€§æ“ä½œ</strong>: ä½¿ç”¨Luaè„šæœ¬ä¿è¯å¤šä¸ªRediså‘½ä»¤çš„åŸå­æ‰§è¡Œï¼Œå°±åƒä¸€ä¸ª"å¯†é—­æˆ¿é—´"ï¼Œç¡®ä¿æ“ä½œçš„å®Œæ•´æ€§</li>
<li><strong>é”é‡Šæ”¾</strong>: åªæœ‰é”çš„æŒæœ‰è€…æ‰èƒ½é‡Šæ”¾é”ï¼ˆé€šè¿‡Luaè„šæœ¬éªŒè¯ï¼‰ï¼Œé˜²æ­¢"å¼ å† ææˆ´"</li>
<li><strong>RedLockç®—æ³•</strong>: åœ¨å¤šRedisèŠ‚ç‚¹ç¯å¢ƒä¸‹ï¼Œéœ€è¦åŠæ•°ä»¥ä¸ŠèŠ‚ç‚¹è·å–é”æ‰ç®—æˆåŠŸï¼Œå°±åƒ"å°‘æ•°æœä»å¤šæ•°"çš„æ°‘ä¸»æœºåˆ¶</li>
</ul>
<h3 data-id="heading-21">2. ä¿¡å·é‡å®ç°åŸç† ğŸš¦</h3>
<p>ä¿¡å·é‡å°±åƒä¸€ä¸ªæ™ºèƒ½"äº¤é€šç¯"æ§åˆ¶å™¨ï¼š</p>
<ul>
<li><strong>è®¸å¯è¯ç®¡ç†</strong>: ä½¿ç”¨Redisçš„åŸå­æ“ä½œæ¥ç®¡ç†è®¸å¯è¯æ•°é‡ï¼Œç¡®ä¿è®¸å¯è¯è®¡æ•°çš„å‡†ç¡®æ€§</li>
<li><strong>é˜»å¡è·å–</strong>: å½“è®¸å¯è¯ä¸è¶³æ—¶ï¼Œä½¿ç”¨Redisçš„å‘å¸ƒ/è®¢é˜…æœºåˆ¶å®ç°ä¼˜é›…çš„é˜»å¡ç­‰å¾…ï¼Œå°±åƒ"æ’é˜Ÿç­‰åº§"ä¸€æ ·</li>
<li><strong>é‡Šæ”¾è®¸å¯è¯</strong>: å½“è®¸å¯è¯è¢«é‡Šæ”¾æ—¶ï¼Œè‡ªåŠ¨é€šçŸ¥ç­‰å¾…çš„çº¿ç¨‹ï¼Œå®ç°èµ„æºçš„æœ‰æ•ˆåˆ†é…</li>
</ul>
<h3 data-id="heading-22">3. å»¶è¿Ÿé˜Ÿåˆ—å®ç°åŸç† â°</h3>
<p>å»¶è¿Ÿé˜Ÿåˆ—å°±åƒä¸€ä¸ªæ™ºèƒ½"é—¹é’Ÿ"ï¼š</p>
<ul>
<li><strong>æ—¶é—´è½®ç®—æ³•</strong>: Redissonä½¿ç”¨Sorted Set (ZSET) æŒ‰æ—¶é—´æˆ³é¡ºåºå­˜å‚¨å»¶è¿Ÿå…ƒç´ ï¼Œå°±åƒæŒ‰ç…§"é—¹é’Ÿæ—¶é—´"æ’åˆ—çš„é—¹é’Ÿé˜µåˆ—</li>
<li><strong>åå°è½®è¯¢</strong>: ç»´æŠ¤ä¸€ä¸ªåå°çº¿ç¨‹ä¸æ–­è½®è¯¢ZSETï¼Œå°†åˆ°æœŸå…ƒç´ è½¬ç§»åˆ°åº•å±‚é˜Ÿåˆ—ï¼Œå°±åƒ"æ—¶é—´å®ˆæŠ¤è€…"æ—¶åˆ»ç›‘æµ‹</li>
<li><strong>åŸå­è½¬ç§»</strong>: ä½¿ç”¨Luaè„šæœ¬ç¡®ä¿å»¶è¿Ÿå…ƒç´ åˆ°æ™®é€šé˜Ÿåˆ—çš„è½¬ç§»æ˜¯åŸå­æ“ä½œï¼Œé¿å…"æ—¶é—´é”™ä¹±"</li>
</ul>
<h3 data-id="heading-23">4. å¸ƒéš†è¿‡æ»¤å™¨å®ç°åŸç† ğŸ§º</h3>
<p>å¸ƒéš†è¿‡æ»¤å™¨å°±åƒä¸€ä¸ªç¥å¥‡çš„"ç­›å­"ï¼š</p>
<ul>
<li><strong>å¤šHashå‡½æ•°</strong>: ä½¿ç”¨å¤šä¸ªHashå‡½æ•°å¯¹å…ƒç´ è¿›è¡Œè®¡ç®—ï¼Œå°±åƒç”¨å¤šä¸ª"ç­›å­”"å®šä½å…ƒç´ ä½ç½®</li>
<li><strong>BitSetå­˜å‚¨</strong>: ä½¿ç”¨Redisçš„Stringç±»å‹æ¨¡æ‹ŸBitSetï¼Œæ¯ä¸ªbitä½ä»£è¡¨ä¸€ä¸ªå¯èƒ½çš„å…ƒç´ ä½ç½®</li>
<li><strong>è¯¯åˆ¤ç‡æ§åˆ¶</strong>: é€šè¿‡è°ƒæ•´Hashå‡½æ•°ä¸ªæ•°å’ŒBitSetå¤§å°æ¥æ§åˆ¶è¯¯åˆ¤ç‡ï¼Œå°±åƒè°ƒæ•´"ç­›å­ç²¾åº¦"</li>
<li><strong>ç©ºé—´æ•ˆç‡</strong>: ç›¸æ¯”ä¼ ç»Ÿé›†åˆï¼Œå¸ƒéš†è¿‡æ»¤å™¨å ç”¨ç©ºé—´æå°ï¼Œä½†å­˜åœ¨å°‘é‡è¯¯åˆ¤ï¼Œæ˜¯"ç©ºé—´æ¢æ—¶é—´"çš„å…¸å‹åº”ç”¨</li>
</ul>
<h3 data-id="heading-24">5. å‘å¸ƒ/è®¢é˜…æœºåˆ¶ ğŸ“¡</h3>
<p>å‘å¸ƒ/è®¢é˜…å°±åƒä¸€ä¸ªé«˜æ•ˆçš„"å¹¿æ’­ç«™"ï¼š</p>
<ul>
<li><strong>Redis PUB/SUB</strong>: åŸºäºRedisçš„åŸç”Ÿå‘å¸ƒ/è®¢é˜…åŠŸèƒ½å®ç°ï¼Œæä¾›å®æ—¶æ¶ˆæ¯ä¼ é€’</li>
<li><strong>æ¨¡å¼åŒ¹é…</strong>: æ”¯æŒä½¿ç”¨é€šé…ç¬¦è¿›è¡Œé¢‘é“æ¨¡å¼åŒ¹é…ï¼Œè®©æ¶ˆæ¯ä¼ é€’æ›´çµæ´»</li>
<li><strong>æ¶ˆæ¯å¯é æ€§</strong>: æä¾›åŒæ­¥å’Œå¼‚æ­¥ä¸¤ç§æ¶ˆæ¯å¤„ç†æ–¹å¼ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯éœ€æ±‚</li>
<li><strong>è¿æ¥ç®¡ç†</strong>: è‡ªåŠ¨å¤„ç†è¿æ¥æ–­å¼€å’Œé‡è¿ï¼Œç¡®ä¿æ¶ˆæ¯ä¼ é€’çš„å¯é æ€§</li>
</ul>
<h3 data-id="heading-25">6. åºåˆ—åŒ–ä¸ååºåˆ—åŒ– ğŸ“¦</h3>
<p>åºåˆ—åŒ–å°±åƒæ•°æ®çš„"å˜èº«æœ¯"ï¼š</p>
<ul>
<li><strong>é»˜è®¤ç­–ç•¥</strong>: ä½¿ç”¨Jackson JSONåºåˆ—åŒ–ï¼Œä¿è¯æ•°æ®çš„å¯è¯»æ€§å’Œè·¨è¯­è¨€å…¼å®¹æ€§</li>
<li><strong>å¤šç§ç­–ç•¥</strong>: æ”¯æŒKryoã€FSTã€Smileã€CBORç­‰å¤šç§åºåˆ—åŒ–æ–¹å¼ï¼Œæ»¡è¶³ä¸åŒæ€§èƒ½éœ€æ±‚</li>
<li><strong>æ€§èƒ½å¯¹æ¯”</strong>: Kryoå’ŒFSTåºåˆ—åŒ–é€Ÿåº¦å¿«ã€ä½“ç§¯å°ï¼Œä½†Jacksonå…¼å®¹æ€§æ›´å¥½</li>
<li><strong>è‡ªå®šä¹‰åºåˆ—åŒ–</strong>: å¯é€šè¿‡é…ç½®è‡ªå®šä¹‰åºåˆ—åŒ–ç­–ç•¥ï¼Œæ»¡è¶³ç‰¹æ®Šä¸šåŠ¡éœ€æ±‚</li>
</ul>
<h2 data-id="heading-26">æ€§èƒ½ä¼˜åŒ–å»ºè®® ğŸš€</h2>
<ol>
<li>
<p><strong>åˆç†è®¾ç½®è¿æ¥æ± å¤§å°</strong> ğŸ’§ - å°±åƒç»™æ°´ç®¡è®¾ç½®åˆé€‚çš„å£å¾„ï¼Œè¿æ¥æ± å¤ªå°ä¼šé€ æˆ"ä¾›æ°´ä¸è¶³"ï¼ˆè¯·æ±‚æ’é˜Ÿï¼‰ï¼Œå¤ªå¤§åˆ™ä¼šé€ æˆ"èµ„æºæµªè´¹"ï¼ˆè¿æ¥é—²ç½®ï¼‰ï¼Œéœ€è¦æ ¹æ®å®é™…ä¸šåŠ¡æµé‡æ¥"ç²¾ç¡®è°ƒèŠ‚"</p>
</li>
<li>
<p><strong>ä½¿ç”¨æœ¬åœ°ç¼“å­˜å‡å°‘Redisè®¿é—®</strong> ğŸ  - å°±åƒåœ¨å®¶ä¸­å‚¨å¤‡æ—¥å¸¸ç”¨å“ä¸€æ ·ï¼Œé¢‘ç¹è®¿é—®çš„æ•°æ®å¯ä»¥æ”¾åœ¨æœ¬åœ°ç¼“å­˜ä¸­ï¼Œå‡å°‘ç½‘ç»œå¾€è¿”çš„å¼€é”€ï¼Œè®©è®¿é—®å¦‚"è¿‘æ°´æ¥¼å°å…ˆå¾—æœˆ"</p>
</li>
<li>
<p><strong>æ‰¹é‡æ“ä½œæé«˜æ•ˆç‡</strong> ğŸ“¦ - å°±åƒè´­ç‰©æ—¶ä¸€æ¬¡æ€§è´­ä¹°å¤šä»¶å•†å“æ¯”å¤šæ¬¡å•ç‹¬è´­ä¹°æ›´é«˜æ•ˆä¸€æ ·ï¼Œæ‰¹é‡æ“ä½œå¯ä»¥æ˜¾è‘—å‡å°‘ç½‘ç»œé€šä¿¡æ¬¡æ•°ï¼Œæå‡æ•´ä½“æ€§èƒ½</p>
</li>
<li>
<p><strong>åˆç†è®¾ç½®é”çš„è¶…æ—¶æ—¶é—´</strong> â±ï¸ - å°±åƒåœè½¦åœºçš„è®¡æ—¶æ”¶è´¹ä¸€æ ·ï¼Œé”çš„è¶…æ—¶æ—¶é—´è®¾ç½®è¦æ°åˆ°å¥½å¤„ï¼Œå¤ªçŸ­å¯èƒ½å¯¼è‡´ä¸šåŠ¡æœªå®Œæˆå°±è¢«é‡Šæ”¾ï¼Œå¤ªé•¿åˆ™å¯èƒ½é€ æˆèµ„æºé•¿æ—¶é—´å ç”¨</p>
</li>
<li>
<p><strong>é€‰æ‹©åˆé€‚çš„åºåˆ—åŒ–æ–¹å¼</strong> ğŸ“ - å°±åƒé€‰æ‹©ä¸åŒçš„ä¿¡å°ä¸€æ ·ï¼Œä¸åŒçš„åºåˆ—åŒ–æ–¹å¼æœ‰ä¸åŒçš„ç‰¹ç‚¹ï¼šJacksonå…¼å®¹æ€§å¥½ä½†ä½“ç§¯å¤§ï¼ŒKryoå’ŒFSTé€Ÿåº¦å¿«ä½†é€‚ç”¨èŒƒå›´æœ‰é™ï¼Œè¦æ ¹æ®åœºæ™¯é€‰æ‹©</p>
</li>
</ol>
<h2 data-id="heading-27">å¸¸è§é—®é¢˜ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-28">1. é”çš„å¯é‡å…¥æ€§</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RLock;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * åˆ†å¸ƒå¼é”å¯é‡å…¥æ€§ç”Ÿäº§çº§ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReentrantLockExample</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ReentrantLockExample</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }
    
    <span class="hljs-comment">/**
     * æ¼”ç¤ºåˆ†å¸ƒå¼é”çš„å¯é‡å…¥æ€§
     * 
     * <span class="hljs-doctag">@param</span> lockKey é”çš„key
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">demonstrateReentrantLock</span><span class="hljs-params">(String lockKey)</span> {
        <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> redissonClient.getLock(lockKey);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ç¬¬ä¸€æ¬¡è·å–é”</span>
            lock.lock(<span class="hljs-number">30</span>, TimeUnit.SECONDS);
            System.out.println(<span class="hljs-string">"ç¬¬ä¸€æ¬¡è·å–é”æˆåŠŸ: "</span> + lockKey);
            
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// åŒä¸€çº¿ç¨‹å¯ä»¥å¤šæ¬¡è·å–åŒä¸€æŠŠé”ï¼ˆå¯é‡å…¥ï¼‰</span>
                lock.lock(<span class="hljs-number">30</span>, TimeUnit.SECONDS);
                System.out.println(<span class="hljs-string">"ç¬¬äºŒæ¬¡è·å–é”æˆåŠŸï¼ˆå¯é‡å…¥ï¼‰: "</span> + lockKey);
                
                <span class="hljs-keyword">try</span> {
                    lock.lock(<span class="hljs-number">30</span>, TimeUnit.SECONDS);
                    System.out.println(<span class="hljs-string">"ç¬¬ä¸‰æ¬¡è·å–é”æˆåŠŸï¼ˆå¯é‡å…¥ï¼‰: "</span> + lockKey);
                    
                    <span class="hljs-comment">// æ‰§è¡Œä¸šåŠ¡é€»è¾‘</span>
                    System.out.println(<span class="hljs-string">"æ‰§è¡Œä¸šåŠ¡é€»è¾‘..."</span>);
                    
                } <span class="hljs-keyword">finally</span> {
                    <span class="hljs-comment">// éœ€è¦å¯¹åº”æ¬¡æ•°çš„unlockæ“ä½œ</span>
                    lock.unlock();
                    System.out.println(<span class="hljs-string">"ç¬¬ä¸‰æ¬¡é‡Šæ”¾é”: "</span> + lockKey + <span class="hljs-string">"ï¼Œé”ä»è¢«æŒæœ‰: "</span> + lock.isLocked());
                }
                
            } <span class="hljs-keyword">finally</span> {
                <span class="hljs-comment">// ç¬¬äºŒæ¬¡é‡Šæ”¾é”</span>
                lock.unlock();
                System.out.println(<span class="hljs-string">"ç¬¬äºŒæ¬¡é‡Šæ”¾é”: "</span> + lockKey + <span class="hljs-string">"ï¼Œé”ä»è¢«æŒæœ‰: "</span> + lock.isLocked());
            }
            
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// æœ€åä¸€æ¬¡é‡Šæ”¾é”ï¼ŒçœŸæ­£é‡Šæ”¾é”</span>
            <span class="hljs-keyword">if</span> (lock.isHeldByCurrentThread()) {
                lock.unlock();
                System.out.println(<span class="hljs-string">"ç¬¬ä¸€æ¬¡é‡Šæ”¾é”: "</span> + lockKey + <span class="hljs-string">"ï¼Œé”å·²å®Œå…¨é‡Šæ”¾: "</span> + !lock.isLocked());
            }
        }
    }
    
    <span class="hljs-comment">/**
     * å®‰å…¨çš„å¯é‡å…¥é”æ“ä½œ
     * 
     * <span class="hljs-doctag">@param</span> lockKey é”çš„key
     * <span class="hljs-doctag">@param</span> businessLogic ä¸šåŠ¡é€»è¾‘
     * <span class="hljs-doctag">@return</span> æ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">safeReentrantOperation</span><span class="hljs-params">(String lockKey, Runnable businessLogic)</span> {
        <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> redissonClient.getLock(lockKey);
        <span class="hljs-type">int</span> <span class="hljs-variable">lockCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// è®°å½•åŠ é”æ¬¡æ•°</span>
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// è·å–ä¸»é”</span>
            lock.lock(<span class="hljs-number">30</span>, TimeUnit.SECONDS);
            lockCount++;
            
            <span class="hljs-comment">// åœ¨ä¸šåŠ¡é€»è¾‘ä¸­å¯èƒ½éœ€è¦å†æ¬¡è·å–é”</span>
            executeNestedOperation(lock, businessLogic);
            
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"å¯é‡å…¥é”æ“ä½œå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// é‡Šæ”¾æ‰€æœ‰å±‚çº§çš„é”</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; lockCount; i++) {
                <span class="hljs-keyword">if</span> (lock.isHeldByCurrentThread()) {
                    lock.unlock();
                }
            }
        }
    }
    
    <span class="hljs-comment">/**
     * åµŒå¥—æ“ä½œï¼Œå¯èƒ½éœ€è¦å†æ¬¡è·å–é”
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">executeNestedOperation</span><span class="hljs-params">(RLock lock, Runnable businessLogic)</span> {
        <span class="hljs-comment">// æ¨¡æ‹Ÿåœ¨ä¸šåŠ¡é€»è¾‘ä¸­éœ€è¦å†æ¬¡è·å–é”çš„æƒ…å†µ</span>
        <span class="hljs-keyword">if</span> (lock.isHeldByCurrentThread()) {
            <span class="hljs-comment">// åŒä¸€çº¿ç¨‹å¯ä»¥å†æ¬¡è·å–é”</span>
            lock.lock();
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// æ‰§è¡Œä¸šåŠ¡é€»è¾‘</span>
                businessLogic.run();
            } <span class="hljs-keyword">finally</span> {
                lock.unlock(); <span class="hljs-comment">// å¯¹åº”çš„è§£é”æ“ä½œ</span>
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-29">2. æ­»é”é¢„é˜²ä¸è¶…æ—¶å¤„ç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.api.RLock;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> java.util.concurrent.CompletableFuture;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * æ­»é”é¢„é˜²ä¸è¶…æ—¶å¤„ç†ç”Ÿäº§çº§ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeadlockPreventionExample</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedissonClient redissonClient;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DeadlockPreventionExample</span><span class="hljs-params">(RedissonClient redissonClient)</span> {
        <span class="hljs-built_in">this</span>.redissonClient = redissonClient;
    }
    
    <span class="hljs-comment">/**
     * ä½¿ç”¨å¸¦è¶…æ—¶çš„é”è·å–ï¼Œé˜²æ­¢æ­»é”
     * 
     * <span class="hljs-doctag">@param</span> lockKey é”çš„key
     * <span class="hljs-doctag">@param</span> businessLogic ä¸šåŠ¡é€»è¾‘
     * <span class="hljs-doctag">@return</span> æ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preventDeadlockWithTimeout</span><span class="hljs-params">(String lockKey, Runnable businessLogic)</span> {
        <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> redissonClient.getLock(lockKey);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä½¿ç”¨tryLockè®¾ç½®ç­‰å¾…æ—¶é—´å’Œé”æŒæœ‰æ—¶é—´ï¼Œé˜²æ­¢æ— é™ç­‰å¾…å’Œæ­»é”</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">acquired</span> <span class="hljs-operator">=</span> lock.tryLock(<span class="hljs-number">10</span>, <span class="hljs-number">30</span>, TimeUnit.SECONDS);
            <span class="hljs-keyword">if</span> (acquired) {
                <span class="hljs-keyword">try</span> {
                    System.out.println(<span class="hljs-string">"è·å–é”æˆåŠŸ: "</span> + lockKey);
                    
                    <span class="hljs-comment">// æ‰§è¡Œä¸šåŠ¡é€»è¾‘</span>
                    businessLogic.run();
                    
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                } <span class="hljs-keyword">finally</span> {
                    <span class="hljs-comment">// ç¡®ä¿é”è¢«é‡Šæ”¾</span>
                    <span class="hljs-keyword">if</span> (lock.isHeldByCurrentThread()) {
                        lock.unlock();
                        System.out.println(<span class="hljs-string">"é‡Šæ”¾é”: "</span> + lockKey);
                    }
                }
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"è·å–é”è¶…æ—¶: "</span> + lockKey);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
            System.err.println(<span class="hljs-string">"è·å–é”æ—¶è¢«ä¸­æ–­: "</span> + e.getMessage());
            
            <span class="hljs-comment">// æ¢å¤ä¸­æ–­çŠ¶æ€å¹¶ç¡®ä¿é”è¢«é‡Šæ”¾</span>
            <span class="hljs-keyword">if</span> (lock != <span class="hljs-literal">null</span> &amp;&amp; lock.isHeldByCurrentThread()) {
                <span class="hljs-keyword">try</span> {
                    lock.unlock();
                } <span class="hljs-keyword">catch</span> (Exception unlockException) {
                    System.err.println(<span class="hljs-string">"é‡Šæ”¾é”æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + unlockException.getMessage());
                }
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"é”æ“ä½œå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * å¼‚æ­¥é”æ“ä½œä¸è¶…æ—¶å¤„ç†
     * 
     * <span class="hljs-doctag">@param</span> lockKey é”çš„key
     * <span class="hljs-doctag">@param</span> businessLogic ä¸šåŠ¡é€»è¾‘
     * <span class="hljs-doctag">@param</span> timeoutSeconds è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
     * <span class="hljs-doctag">@return</span> CompletableFutureè¡¨ç¤ºæ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> CompletableFuture&lt;Boolean&gt; <span class="hljs-title function_">asyncLockOperation</span><span class="hljs-params">(String lockKey, 
                                                         Runnable businessLogic, 
                                                         <span class="hljs-type">long</span> timeoutSeconds)</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; {
            <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> redissonClient.getLock(lockKey);
            
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// ä½¿ç”¨çœ‹é—¨ç‹—æœºåˆ¶ï¼Œè‡ªåŠ¨ç»­æœŸ</span>
                lock.lock(timeoutSeconds, TimeUnit.SECONDS);
                
                <span class="hljs-keyword">try</span> {
                    System.out.println(<span class="hljs-string">"å¼‚æ­¥æ“ä½œè·å–é”æˆåŠŸ: "</span> + lockKey);
                    businessLogic.run();
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                } <span class="hljs-keyword">finally</span> {
                    <span class="hljs-keyword">if</span> (lock != <span class="hljs-literal">null</span> &amp;&amp; lock.isHeldByCurrentThread()) {
                        lock.unlock();
                        System.out.println(<span class="hljs-string">"å¼‚æ­¥æ“ä½œé‡Šæ”¾é”: "</span> + lockKey);
                    }
                }
            } <span class="hljs-keyword">catch</span> (Exception e) {
                System.err.println(<span class="hljs-string">"å¼‚æ­¥é”æ“ä½œå¼‚å¸¸: "</span> + e.getMessage());
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        });
    }
    
    <span class="hljs-comment">/**
     * å¤šé‡é”çš„å®‰å…¨æ“ä½œ
     * 
     * <span class="hljs-doctag">@param</span> lockKeys é”çš„keys
     * <span class="hljs-doctag">@param</span> businessLogic ä¸šåŠ¡é€»è¾‘
     * <span class="hljs-doctag">@return</span> æ“ä½œç»“æœ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">multiLockOperation</span><span class="hljs-params">(String[] lockKeys, Runnable businessLogic)</span> {
        <span class="hljs-keyword">if</span> (lockKeys == <span class="hljs-literal">null</span> || lockKeys.length == <span class="hljs-number">0</span>) {
            System.out.println(<span class="hljs-string">"æ²¡æœ‰æä¾›é”keys"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        
        java.util.List&lt;RLock&gt; locks = <span class="hljs-keyword">new</span> <span class="hljs-title class_">java</span>.util.ArrayList&lt;&gt;();
        <span class="hljs-keyword">for</span> (String lockKey : lockKeys) {
            locks.add(redissonClient.getLock(lockKey));
        }
        
        <span class="hljs-type">RLock</span> <span class="hljs-variable">multiLock</span> <span class="hljs-operator">=</span> redissonClient.getMultiLock(locks.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RLock</span>[<span class="hljs-number">0</span>]));
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// è·å–å¤šé‡é”ï¼Œè®¾ç½®ç­‰å¾…æ—¶é—´å’ŒæŒæœ‰æ—¶é—´</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">acquired</span> <span class="hljs-operator">=</span> multiLock.tryLock(<span class="hljs-number">10</span>, <span class="hljs-number">30</span>, TimeUnit.SECONDS);
            <span class="hljs-keyword">if</span> (acquired) {
                <span class="hljs-keyword">try</span> {
                    System.out.println(<span class="hljs-string">"è·å–å¤šé‡é”æˆåŠŸ: "</span> + String.join(<span class="hljs-string">", "</span>, lockKeys));
                    businessLogic.run();
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                } <span class="hljs-keyword">finally</span> {
                    <span class="hljs-comment">// é‡Šæ”¾å¤šé‡é”</span>
                    <span class="hljs-keyword">if</span> (multiLock.isHeldByCurrentThread()) {
                        multiLock.unlock();
                        System.out.println(<span class="hljs-string">"é‡Šæ”¾å¤šé‡é”: "</span> + String.join(<span class="hljs-string">", "</span>, lockKeys));
                    }
                }
            } <span class="hljs-keyword">else</span> {
                System.out.println(<span class="hljs-string">"è·å–å¤šé‡é”è¶…æ—¶: "</span> + String.join(<span class="hljs-string">", "</span>, lockKeys));
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
            System.err.println(<span class="hljs-string">"è·å–å¤šé‡é”æ—¶è¢«ä¸­æ–­: "</span> + e.getMessage());
            
            <span class="hljs-keyword">if</span> (multiLock != <span class="hljs-literal">null</span> &amp;&amp; multiLock.isHeldByCurrentThread()) {
                <span class="hljs-keyword">try</span> {
                    multiLock.unlock();
                } <span class="hljs-keyword">catch</span> (Exception unlockException) {
                    System.err.println(<span class="hljs-string">"é‡Šæ”¾å¤šé‡é”æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + unlockException.getMessage());
                }
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"å¤šé‡é”æ“ä½œå¼‚å¸¸: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
}
</code></pre>
<h3 data-id="heading-30">3. å®¢æˆ·ç«¯èµ„æºç®¡ç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.redisson.Redisson;
<span class="hljs-keyword">import</span> org.redisson.api.RedissonClient;
<span class="hljs-keyword">import</span> org.redisson.config.Config;
<span class="hljs-keyword">import</span> java.util.concurrent.ExecutorService;
<span class="hljs-keyword">import</span> java.util.concurrent.Executors;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * Redissonå®¢æˆ·ç«¯èµ„æºç®¡ç†ç”Ÿäº§çº§ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResourceManagerExample</span> {
    
    <span class="hljs-comment">/**
     * æ­£ç¡®çš„Redissonå®¢æˆ·ç«¯åˆ›å»ºå’Œå…³é—­
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedissonClientManager</span> {
        <span class="hljs-keyword">private</span> RedissonClient redissonClient;
        <span class="hljs-keyword">private</span> ExecutorService executorService;
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initialize</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-type">Config</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Config</span>();
                config.useSingleServer()
                      .setAddress(<span class="hljs-string">"redis://127.0.0.1:6379"</span>)
                      .setConnectionPoolSize(<span class="hljs-number">100</span>)
                      .setMinimumIdle(<span class="hljs-number">10</span>)
                      .setConnectTimeout(<span class="hljs-number">10000</span>)
                      .setTimeout(<span class="hljs-number">3000</span>);
                
                config.setNettyThreads(<span class="hljs-number">32</span>);
                
                <span class="hljs-comment">// åˆ›å»ºRedissonå®¢æˆ·ç«¯</span>
                <span class="hljs-built_in">this</span>.redissonClient = Redisson.create(config);
                <span class="hljs-built_in">this</span>.executorService = Executors.newCachedThreadPool();
                
                System.out.println(<span class="hljs-string">"Redissonå®¢æˆ·ç«¯å·²åˆå§‹åŒ–"</span>);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                System.err.println(<span class="hljs-string">"åˆå§‹åŒ–Redissonå®¢æˆ·ç«¯å¤±è´¥: "</span> + e.getMessage());
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"Redissonå®¢æˆ·ç«¯åˆå§‹åŒ–å¤±è´¥"</span>, e);
            }
        }
        
        <span class="hljs-keyword">public</span> RedissonClient <span class="hljs-title function_">getRedissonClient</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">if</span> (redissonClient == <span class="hljs-literal">null</span> || redissonClient.isShutdown()) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">"Redissonå®¢æˆ·ç«¯æœªåˆå§‹åŒ–æˆ–å·²å…³é—­"</span>);
            }
            <span class="hljs-keyword">return</span> redissonClient;
        }
        
        <span class="hljs-comment">/**
         * å®‰å…¨å…³é—­Redissonå®¢æˆ·ç«¯
         */</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">shutdown</span><span class="hljs-params">()</span> {
            <span class="hljs-comment">// é¦–å…ˆå…³é—­çº¿ç¨‹æ± </span>
            <span class="hljs-keyword">if</span> (executorService != <span class="hljs-literal">null</span> &amp;&amp; !executorService.isShutdown()) {
                executorService.shutdown();
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-keyword">if</span> (!executorService.awaitTermination(<span class="hljs-number">5</span>, TimeUnit.SECONDS)) {
                        executorService.shutdownNow();
                        <span class="hljs-keyword">if</span> (!executorService.awaitTermination(<span class="hljs-number">5</span>, TimeUnit.SECONDS)) {
                            System.err.println(<span class="hljs-string">"çº¿ç¨‹æ± æœªèƒ½æ­£å¸¸å…³é—­"</span>);
                        }
                    }
                } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                    executorService.shutdownNow();
                    Thread.currentThread().interrupt();
                }
            }
            
            <span class="hljs-comment">// ç„¶åå…³é—­Redissonå®¢æˆ·ç«¯</span>
            <span class="hljs-keyword">if</span> (redissonClient != <span class="hljs-literal">null</span> &amp;&amp; !redissonClient.isShutdown()) {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-comment">// ä¼˜é›…å…³é—­ï¼Œç­‰å¾…æ‰€æœ‰æ“ä½œå®Œæˆ</span>
                    redissonClient.shutdown(<span class="hljs-number">2</span>, <span class="hljs-number">5</span>, TimeUnit.SECONDS);
                    System.out.println(<span class="hljs-string">"Redissonå®¢æˆ·ç«¯å·²å…³é—­"</span>);
                } <span class="hljs-keyword">catch</span> (Exception e) {
                    System.err.println(<span class="hljs-string">"å…³é—­Redissonå®¢æˆ·ç«¯æ—¶å‘ç”Ÿå¼‚å¸¸: "</span> + e.getMessage());
                }
            }
        }
    }
    
    <span class="hljs-comment">/**
     * ä½¿ç”¨ç¤ºä¾‹
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">RedissonClientManager</span> <span class="hljs-variable">manager</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedissonClientManager</span>();
        
        <span class="hljs-keyword">try</span> {
            manager.initialize();
            
            <span class="hljs-comment">// ä½¿ç”¨Redissonå®¢æˆ·ç«¯</span>
            <span class="hljs-type">RedissonClient</span> <span class="hljs-variable">redisson</span> <span class="hljs-operator">=</span> manager.getRedissonClient();
            System.out.println(<span class="hljs-string">"Redissonå®¢æˆ·ç«¯çŠ¶æ€: "</span> + (redisson.isShutdown() ? <span class="hljs-string">"å·²å…³é—­"</span> : <span class="hljs-string">"è¿è¡Œä¸­"</span>));
            
            <span class="hljs-comment">// æ‰§è¡Œä¸šåŠ¡æ“ä½œ...</span>
            
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// ç¡®ä¿åœ¨åº”ç”¨ç»“æŸæ—¶å…³é—­å®¢æˆ·ç«¯</span>
            manager.shutdown();
        }
    }
}
</code></pre>
<p>Redissonå°±åƒåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„"ç‘å£«å†›åˆ€"ï¼Œæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”æ˜“äºä½¿ç”¨çš„Redis Javaå®¢æˆ·ç«¯ï¼å®ƒç‰¹åˆ«é€‚åˆåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­è§£å†³å¹¶å‘æ§åˆ¶ã€æ•°æ®å…±äº«ç­‰å¤æ‚é—®é¢˜ã€‚é€šè¿‡åˆç†ä½¿ç”¨å…¶æä¾›çš„å„ç§åˆ†å¸ƒå¼å¯¹è±¡å’ŒåŠŸèƒ½ï¼Œå¹¶éµå¾ªç”Ÿäº§çº§æœ€ä½³å®è·µï¼Œå°±åƒæœ‰äº†"åˆ†å¸ƒå¼å¼€å‘çš„è¶…çº§åŠ©æ‰‹"ï¼Œå¯ä»¥å¤§å¤§ç®€åŒ–åˆ†å¸ƒå¼åº”ç”¨çš„å¼€å‘ï¼ŒåŒæ—¶ç¡®ä¿ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚è®©æˆ‘ä»¬ä¸€èµ·ç”¨Redissonæ‰“é€ æ›´ç¨³å®šã€æ›´é«˜æ•ˆçš„åˆ†å¸ƒå¼ç³»ç»Ÿå§ï¼ ğŸ‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Anaconda]]></title>    <link>https://juejin.cn/post/7588095884070076416</link>    <guid>https://juejin.cn/post/7588095884070076416</guid>    <pubDate>2025-12-27T15:46:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588095884070076416" data-draft-id="7588092534162014208" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Anaconda"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-27T15:46:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¾œæœˆå"/> <meta itemprop="url" content="https://juejin.cn/user/2872336891512350"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Anaconda
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2872336891512350/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¾œæœˆå
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T15:46:59.000Z" title="Sat Dec 27 2025 15:46:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="xcode">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#000}.xml .hljs-meta{color:silver}.hljs-comment,.hljs-quote{color:#007400}.hljs-attribute,.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-tag{color:#aa0d91}.hljs-template-variable,.hljs-variable{color:#3f6e74}.hljs-code,.hljs-meta-string,.hljs-string{color:#c41a16}.hljs-link,.hljs-regexp{color:#0e0eff}.hljs-bullet,.hljs-number,.hljs-symbol,.hljs-title{color:#1c00cf}.hljs-meta,.hljs-section{color:#643820}.hljs-built_in,.hljs-builtin-name,.hljs-class .hljs-title,.hljs-params,.hljs-type{color:#5c2699}.hljs-attr{color:#836c28}.hljs-subst{color:#000}.hljs-formula{background-color:#eee;font-style:italic}.hljs-addition{background-color:#baeeba}.hljs-deletion{background-color:#ffc8bd}.hljs-selector-class,.hljs-selector-id{color:#9b703f}.hljs-doctag,.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}</style><h2 data-id="heading-0">ğŸ“¦Anacondaä¸Condaçš„æ ¸å¿ƒæ¦‚å¿µ</h2>
<p>Anacondaæ˜¯ä¸€ä¸ªæµè¡Œçš„<code>Pythonæ•°æ®ç§‘å­¦å‘è¡Œç‰ˆ</code>ï¼Œå®ƒé›†æˆäº†Condaã€Pythonä»¥åŠè¶…è¿‡180ä¸ªç§‘å­¦è®¡ç®—å’Œæ•°æ®å¤„ç†çš„å¸¸ç”¨åŒ…ã€‚å®ƒçš„å¼ºå¤§ä¹‹å¤„åœ¨äºèƒ½å¤Ÿé«˜æ•ˆåœ°ç®¡ç†åŒ…å’Œç¯å¢ƒï¼Œå°¤å…¶é€‚åˆå¤„ç†å¤æ‚çš„ä¾èµ–å…³ç³»ã€‚</p>
<p>Condaæ˜¯å…¶æ ¸å¿ƒç»„ä»¶ï¼Œå®ƒèº«å…¼ä¸¤èŒï¼š</p>
<ul>
<li><strong>åŒ…ç®¡ç†å™¨</strong>ï¼šç±»ä¼¼äº<code>pip</code>ï¼Œå¯ä»¥å®‰è£…ã€æ›´æ–°ã€å¸è½½PythonåŒ…ï¼Œä½†ä¼˜åŠ¿åœ¨äºèƒ½è‡ªåŠ¨å¤„ç†å¤æ‚çš„ä¾èµ–å…³ç³»ã€‚</li>
<li><strong>ç¯å¢ƒç®¡ç†å™¨</strong>ï¼šå¯ä»¥åˆ›å»ºç›¸äº’éš”ç¦»çš„è™šæ‹Ÿç¯å¢ƒï¼Œä»¥ä¾¿ä¸åŒé¡¹ç›®å¯ä»¥ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„Pythonå’Œåº“ï¼Œå½»åº•é¿å…ç‰ˆæœ¬å†²çªã€‚</li>
</ul>
<blockquote>
<p><strong>é‡è¦æç¤º</strong>ï¼šä½¿ç”¨è™šæ‹Ÿç¯å¢ƒæ˜¯<strong>æœ€ä½³å®è·µ</strong>ï¼Œèƒ½ä¸ºæ¯ä¸ªé¡¹ç›®åˆ›å»ºç‹¬ç«‹ã€çº¯å‡€çš„è¿è¡Œç©ºé—´ï¼Œå¼ºçƒˆæ¨èä½ ä¸ºæ¯ä¸€ä¸ªæ–°é¡¹ç›®éƒ½è¿™æ ·åšã€‚</p>
</blockquote>
<h2 data-id="heading-1">ğŸŒ Anaconda æ›´æ¢é•œåƒæº</h2>
<p>æ›´æ¢é•œåƒæºä¸»è¦æ˜¯é€šè¿‡ä¿®æ”¹ Conda çš„é…ç½®æ–‡ä»¶ï¼ˆ<code>.condarc</code>ï¼‰æ¥å®ç°ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†æ­¥éª¤å’Œå‘½ä»¤ã€‚</p>








































<table><thead><tr><th>ä»»åŠ¡</th><th>å‘½ä»¤ / æ“ä½œ</th><th>è¯´æ˜ä¸ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>æŸ¥çœ‹å½“å‰é…ç½®</strong></td><td><code>conda config --show channels</code></td><td>æŸ¥çœ‹å½“å‰å·²æ·»åŠ çš„é¢‘é“ï¼ˆé•œåƒæºï¼‰ä¼˜å…ˆçº§åˆ—è¡¨ï¼Œé å‰çš„ä¼˜å…ˆçº§é«˜ã€‚</td></tr><tr><td><strong>æ·»åŠ é•œåƒé¢‘é“</strong></td><td>æ·»åŠ <strong>æ¸…åå¤§å­¦</strong>æºï¼š <code>conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/</code> <code>conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/</code> <code>conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/</code>  <br/>æ·»åŠ <strong>é˜¿é‡Œäº‘</strong>æºï¼š <code>conda config --add channels https://mirrors.aliyun.com/anaconda/pkgs/main/</code> <code>conda config --add channels https://mirrors.aliyun.com/anaconda/pkgs/free/</code>  <br/>æ·»åŠ <strong>ä¸­ç§‘å¤§</strong>æºï¼ˆ<strong>å·²åœç”¨ï¼Œä»…ä½œå‚è€ƒ</strong>ï¼‰ï¼š <code>conda config --add channels https://mirrors.ustc.edu.cn/anaconda/pkgs/main/</code> <code>conda config --add channels https://mirrors.ustc.edu.cn/anaconda/pkgs/free/</code></td><td><strong>å‘½ä»¤ä¼šæŒ‰æ‰§è¡Œé¡ºåºå åŠ </strong>ï¼Œåæ·»åŠ çš„æºä¼šå‡ºç°åœ¨åˆ—è¡¨æ›´é å‰çš„ä½ç½®ï¼Œæ‹¥æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚<strong>è¯·å‹¿æ·»åŠ å·²åœç”¨çš„ä¸­ç§‘å¤§æºã€‚</strong></td></tr><tr><td><strong>è®¾ç½®æ˜¾ç¤ºé¢‘é“URL</strong></td><td><code>conda config --set show_channel_urls yes</code></td><td>æ‰§è¡ŒÂ <code>conda install</code>Â æ—¶ï¼Œä¼šæ˜¾ç¤ºåŒ…æ˜¯ä»å“ªä¸ªé•œåƒé¢‘é“ä¸‹è½½çš„ï¼Œä¾¿äºç¡®è®¤æ¥æºã€‚</td></tr><tr><td><strong>ç§»é™¤æŒ‡å®šé•œåƒé¢‘é“</strong></td><td><code>conda config --remove channels &lt;å®Œæ•´çš„é¢‘é“URL&gt;</code></td><td>å½“æŸä¸ªé•œåƒå¤±æ•ˆæ—¶ï¼Œå¯å°†å…¶ç§»é™¤ã€‚ä¾‹å¦‚ç§»é™¤ä¸€ä¸ªå¤±æ•ˆçš„æ¸…åæºï¼š<code>conda config --remove channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/</code></td></tr><tr><td><strong>æ¢å¤é»˜è®¤æº</strong></td><td><code>conda config --remove-key channels</code></td><td><strong>ä¸€é”®ç§»é™¤æ‰€æœ‰è‡ªå®šä¹‰é¢‘é“</strong>ï¼Œæ¢å¤ä¸º Conda å®˜æ–¹é»˜è®¤æº (<code>defaults</code>)ã€‚</td></tr><tr><td><strong>æ‰‹åŠ¨ç¼–è¾‘é…ç½®æ–‡ä»¶</strong></td><td>é…ç½®æ–‡ä»¶é€šå¸¸ä½äºï¼š <code>D:\Environment\Anaconda/.condarc</code>Â (Windows) <code>~/.condarc</code>Â (Mac/Linux)</td><td>ç›´æ¥ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€æ­¤æ–‡ä»¶ï¼ŒæŒ‰Â <strong>YAMLæ ¼å¼</strong>Â è¿›è¡Œæ›´çµæ´»çš„ç¼–è¾‘ï¼ˆä¾‹å¦‚ç›´æ¥è°ƒæ•´æºçš„å…ˆåé¡ºåºï¼‰ã€‚</td></tr></tbody></table>
<ol>
<li>
<ul>
<li><code>channels</code>Â åˆ—è¡¨<strong>è‡ªä¸Šè€Œä¸‹ä¼˜å…ˆçº§é€’å‡</strong>ã€‚ä½ å¯ä»¥é€šè¿‡è°ƒæ•´é¡ºåºæ¥ä¼˜å…ˆä½¿ç”¨æœ€å¿«çš„æºã€‚ç¼–è¾‘Â <code>.condarc</code>Â æ–‡ä»¶ï¼Œå°†é˜¿é‡Œäº‘æ”¾åœ¨æœ€ä¸Šé¢ä»¥è·å¾—ä¼˜å…ˆä½¿ç”¨ã€‚
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">channels:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">https://mirrors.aliyun.com/anaconda/pkgs/main/</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">https://mirrors.aliyun.com/anaconda/pkgs/free/</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">defaults</span>
<span class="hljs-attr">show_channel_urls:</span> <span class="hljs-literal">true</span>
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>ä¸´æ—¶ä½¿ç”¨ç‰¹å®šæº</strong></p>
<ul>
<li>å¦‚æœä¸æƒ³ä¿®æ”¹å…¨å±€é…ç½®ï¼Œå¯ä»¥åœ¨å®‰è£…å‘½ä»¤ä¸­ä¸´æ—¶æŒ‡å®šé¢‘é“ã€‚ä¾‹å¦‚ï¼Œä¸´æ—¶ä»æ¸…åçš„Â <code>conda-forge</code>Â é¢‘é“å®‰è£…æŸä¸ªåŒ…ï¼š
<pre><code class="hljs language-bash" lang="bash">conda install -c https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge &lt;package_name&gt;
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>æµ‹è¯•ä¸æ¸…ç†</strong></p>
<ul>
<li>é…ç½®å®Œæˆåï¼Œå¯ä»¥è¿è¡ŒÂ <code>conda clean -i</code>Â æ¸…é™¤ç´¢å¼•ç¼“å­˜ï¼Œç„¶åå°è¯•å®‰è£…ä¸€ä¸ªåŒ…Â <code>conda install numpy</code>æ¥æµ‹è¯•æ–°æºçš„ä¸‹è½½é€Ÿåº¦ã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-2">ğŸŒ±å‘½ä»¤å¤§å…¨</h2>
<h3 data-id="heading-3">âš™ï¸ç¯å¢ƒç®¡ç†ä¸æ–°ç¯å¢ƒ</h3>













































<table><thead><tr><th>ä»»åŠ¡</th><th>å‘½ä»¤</th><th>è¯´æ˜ä¸ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>åˆ›å»ºç¯å¢ƒ</strong></td><td><code>conda create --name &lt;ç¯å¢ƒå&gt; python=&lt;ç‰ˆæœ¬å·&gt;</code></td><td>åˆ›å»ºä¸€ä¸ªæŒ‡å®šPythonç‰ˆæœ¬çš„æ–°ç¯å¢ƒã€‚ä¾‹ï¼š<code>conda create --name my_project python=3.9</code></td></tr><tr><td><strong>æ¿€æ´»ç¯å¢ƒ</strong></td><td><code>conda activate &lt;ç¯å¢ƒå&gt;</code></td><td>è¿›å…¥æŸä¸ªç¯å¢ƒï¼Œåç»­æ“ä½œå‡åœ¨æ­¤ç¯å¢ƒä¸­è¿›è¡Œã€‚Windowsçš„æ—§ç‰ˆAnacondaå¯èƒ½éœ€è¦ä½¿ç”¨Â <code>activate &lt;ç¯å¢ƒå&gt;</code>ã€‚</td></tr><tr><td><strong>é€€å‡ºç¯å¢ƒ</strong></td><td><code>conda deactivate</code></td><td>é€€å‡ºå½“å‰ç¯å¢ƒï¼Œå›åˆ°åŸºç¡€ï¼ˆbaseï¼‰ç¯å¢ƒã€‚</td></tr><tr><td><strong>åˆ—å‡ºæ‰€æœ‰ç¯å¢ƒ</strong></td><td><code>conda env list</code>Â æˆ–Â <code>conda info --envs</code></td><td>æŸ¥çœ‹å·²åˆ›å»ºçš„æ‰€æœ‰ç¯å¢ƒï¼Œå½“å‰æ¿€æ´»çš„ç¯å¢ƒå‰ä¼šç”¨æ˜Ÿå·<code>*</code>æ ‡è®°ã€‚</td></tr><tr><td><strong>åˆ é™¤ç¯å¢ƒ</strong></td><td><code>conda remove --name &lt;ç¯å¢ƒå&gt; --all</code></td><td><strong>è°¨æ…æ“ä½œ</strong>ï¼Œä¼šåˆ é™¤è¯¥ç¯å¢ƒåŠå…¶æ‰€æœ‰åŒ…ã€‚</td></tr><tr><td><strong>å…‹éš†ç¯å¢ƒ</strong></td><td><code>conda create --name &lt;æ–°å&gt; --clone &lt;è¢«å…‹éš†å&gt;</code>[]</td><td>å¤åˆ¶ä¸€ä¸ªç°æœ‰ç¯å¢ƒï¼Œç”¨äºå¤‡ä»½æˆ–åˆ›å»ºç›¸ä¼¼ç¯å¢ƒã€‚</td></tr><tr><td><strong>å¯¼å‡º/å¯¼å…¥ç¯å¢ƒ</strong></td><td>å¯¼å‡ºï¼š<code>conda env export &gt; environment.yml</code> å¯¼å…¥ï¼š<code>conda env create -f environment.yml</code></td><td>å°†ç¯å¢ƒçš„ç²¾ç¡®é…ç½®å¯¼å‡ºä¸ºYAMLæ–‡ä»¶ï¼Œä¾¿äºåœ¨å…¶ä»–æœºå™¨ä¸Šå¤ç°ç›¸åŒç¯å¢ƒã€‚</td></tr></tbody></table>
<h3 data-id="heading-4">ğŸ“¦ åŒ…ç®¡ç†ï¼šå®‰è£…ä¸ç»´æŠ¤å·¥å…·</h3>
<p>åœ¨æ¿€æ´»çš„è™šæ‹Ÿç¯å¢ƒä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨Condaæ¥ç®¡ç†æ‰€æœ‰åŒ…ã€‚</p>








































<table><thead><tr><th>ä»»åŠ¡</th><th>å‘½ä»¤</th><th>è¯´æ˜ä¸ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>å®‰è£…åŒ…</strong></td><td><code>conda install &lt;åŒ…å&gt;</code></td><td>å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„åŒ…ã€‚ä¾‹ï¼š<code>conda install pandas</code>ã€‚ å¯æŒ‡å®šç‰ˆæœ¬ï¼š<code>conda install numpy=1.19.5</code>ã€‚ å¯ä»ç‰¹å®šé¢‘é“å®‰è£…ï¼š<code>conda install -c conda-forge scikit-learn</code>ã€‚</td></tr><tr><td><strong>åˆ—å‡ºå·²å®‰è£…åŒ…</strong></td><td><code>conda list</code></td><td>æŸ¥çœ‹å½“å‰ç¯å¢ƒä¸­æ‰€æœ‰å·²å®‰è£…çš„åŒ…åŠå…¶ç‰ˆæœ¬ã€‚</td></tr><tr><td><strong>æœç´¢åŒ…</strong></td><td><code>conda search &lt;åŒ…å&gt;</code></td><td>åœ¨Condaä»“åº“ä¸­æœç´¢å¯ç”¨çš„åŒ…ã€‚åŠ <code>--info</code>å¯æŸ¥çœ‹è¯¦ç»†ç‰ˆæœ¬ä¿¡æ¯ã€‚</td></tr><tr><td><strong>æ›´æ–°åŒ…</strong></td><td><code>conda update &lt;åŒ…å&gt;</code></td><td>æ›´æ–°æŒ‡å®šåŒ…ã€‚ æ›´æ–°æ‰€æœ‰åŒ…ï¼š<code>conda update --all</code>ï¼ˆéœ€è°¨æ…ï¼Œå¯èƒ½å¼•å‘ä¾èµ–é—®é¢˜ï¼‰ã€‚</td></tr><tr><td><strong>å¸è½½åŒ…</strong></td><td><code>conda remove &lt;åŒ…å&gt;</code></td><td>ä»å½“å‰ç¯å¢ƒä¸­ç§»é™¤æŒ‡å®šåŒ…ã€‚</td></tr><tr><td><strong>æ¸…ç†ç¼“å­˜</strong></td><td><code>conda clean --all</code></td><td>åˆ é™¤ä¸å†ä½¿ç”¨çš„åŒ…ç¼“å­˜å’Œä¸´æ—¶æ–‡ä»¶ï¼Œé‡Šæ”¾ç£ç›˜ç©ºé—´ã€‚</td></tr></tbody></table>
<h2 data-id="heading-5">ğŸ› ï¸ é…ç½®ã€æ£€æŸ¥ä»¥åŠä½¿ç”¨æŠ€å·§</h2>
<h3 data-id="heading-6">åŸºç¡€ä¸é…ç½®</h3>
<ul>
<li><strong>æ£€æŸ¥ä¿¡æ¯</strong>ï¼šä½¿ç”¨Â <code>conda info</code>Â æŸ¥çœ‹Condaçš„å®‰è£…è·¯å¾„ã€ç¯å¢ƒåˆ—è¡¨ç­‰åŸºç¡€ä¿¡æ¯ã€‚</li>
<li><strong>æ›´æ–°è‡ªèº«</strong>ï¼šä½¿ç”¨Â <code>conda update conda</code>Â å’ŒÂ <code>conda update anaconda</code>Â æ¥æ›´æ–°Condaå·¥å…·å’Œæ•´ä¸ªAnacondaå‘è¡Œç‰ˆã€‚</li>
<li><strong>é…ç½®é•œåƒæº</strong>ï¼šå›½å†…ç”¨æˆ·å¯ä»¥å°†é»˜è®¤ä»“åº“ï¼ˆchannelï¼‰æ›¿æ¢ä¸ºå›½å†…é•œåƒï¼ˆå¦‚æ¸…åæºï¼‰ä»¥æ˜¾è‘—æå‡ä¸‹è½½é€Ÿåº¦ã€‚ä¸è¿‡é…ç½®æ–¹æ³•å¯èƒ½éšæ—¶é—´å˜åŒ–ï¼Œå»ºè®®æœç´¢â€œAnaconda æ¸…åæº æœ€æ–°â€è·å–å½“å‰å¯ç”¨çš„é…ç½®æŒ‡ä»¤ã€‚</li>
<li><strong>ç¯å¢ƒç‰ˆæœ¬å›æ»š</strong>ï¼šCondaæœ‰è®°å½•ç¯å¢ƒå˜æ›´çš„åŠŸèƒ½ã€‚ä½¿ç”¨Â <code>conda list --revisions</code>Â æŸ¥çœ‹å†å²ç‰ˆæœ¬ï¼Œä½¿ç”¨Â <code>conda install --revision &lt;ç‰ˆæœ¬å·&gt;</code>Â å¯ä»¥å›æ»šåˆ°æŸä¸€çŠ¶æ€ã€‚</li>
</ul>
<h3 data-id="heading-7">æ•´åˆä¸å·¥ä½œæµå»ºè®®</h3>
<ul>
<li><strong>ä¸PyCharmç­‰IDEç»“åˆ</strong>ï¼šåœ¨PyCharmä¸­ï¼Œä½ å¯ä»¥åœ¨Â <code>File &gt; Settings &gt; Project: &lt;é¡¹ç›®å&gt; &gt; Python Interpreter</code>Â ä¸­æ·»åŠ Anacondaè™šæ‹Ÿç¯å¢ƒä¸­çš„Pythonè§£é‡Šå™¨è·¯å¾„ï¼ˆé€šå¸¸ä½äºÂ <code>Anacondaå®‰è£…ç›®å½•/envs/&lt;ç¯å¢ƒå&gt;/python.exe</code>ï¼‰ï¼Œå³å¯åœ¨è¯¥é¡¹ç›®ä¸­ä½¿ç”¨è¯¥ç¯å¢ƒã€‚</li>
<li><strong>Condaä¸Pipæ··ç”¨</strong>ï¼šè™½ç„¶æ¨èä¼˜å…ˆä½¿ç”¨Â <code>conda install</code>ï¼Œä½†å¦‚æœæŸä¸ªåŒ…åœ¨Condaä»“åº“ä¸­æ‰¾ä¸åˆ°ï¼Œå¯ä»¥åœ¨æ¿€æ´»çš„Condaç¯å¢ƒä¸­ä½¿ç”¨Â <code>pip install</code>ã€‚é€šå¸¸ä¸ä¼šæœ‰å¤§é—®é¢˜ï¼Œä½†æç«¯æƒ…å†µä¸‹å¯èƒ½å‡ºç°ä¾èµ–å†²çªã€‚</li>
<li><strong>é¡¹ç›®å·¥ä½œæµå»ºè®®</strong>ï¼š
<ol>
<li>å¯åŠ¨æ–°é¡¹ç›®æ—¶ï¼Œå…ˆåˆ›å»ºä¸“å±è™šæ‹Ÿç¯å¢ƒã€‚</li>
<li>åœ¨ç¯å¢ƒä¸­å®‰è£…æ‰€æœ‰å¿…è¦çš„ä¾èµ–ã€‚</li>
<li>é¡¹ç›®å®Œæˆåï¼Œä½¿ç”¨Â <code>conda env export &gt; environment.yml</code>Â å¯¼å‡ºç¯å¢ƒé…ç½®ï¼Œå¹¶å’Œé¡¹ç›®ä»£ç ä¸€èµ·ä¿å­˜æˆ–åˆ†äº«ã€‚</li>
<li>å¯¹äºä¸éœ€è¦çš„ç¯å¢ƒï¼ŒåŠæ—¶åˆ é™¤ä»¥èŠ‚çœç©ºé—´ã€‚</li>
</ol>
</li>
</ul>
<h2 data-id="heading-8">ğŸ’ æ ¸å¿ƒè¦ç‚¹æ€»ç»“</h2>
<ul>
<li><strong>éš”ç¦»æ˜¯å…³é”®</strong>ï¼šä¸ºæ¯ä¸ªé¡¹ç›®åˆ›å»ºç‹¬ç«‹çš„è™šæ‹Ÿç¯å¢ƒï¼Œè¿™æ˜¯ä½¿ç”¨Anacondaæœ€é‡è¦çš„å¥½ä¹ æƒ¯ã€‚</li>
<li><strong>å‘½ä»¤æœ‰å±‚æ¬¡</strong>ï¼šå…ˆç®¡ç†å¥½ç¯å¢ƒï¼ˆ<code>create</code>,Â <code>activate</code>ï¼‰ï¼Œå†åœ¨ç¯å¢ƒä¸­ç®¡ç†åŒ…ï¼ˆ<code>install</code>,Â <code>list</code>ï¼‰ã€‚</li>
<li><strong>åˆ©ç”¨å¯¼å‡ºåŠŸèƒ½</strong>ï¼šç”¨Â <code>environment.yml</code>Â æ–‡ä»¶è®°å½•ç¯å¢ƒï¼Œç¡®ä¿é¡¹ç›®å¯å¤ç°ã€‚</li>
<li><strong>å–„ç”¨é•œåƒåŠ é€Ÿ</strong>ï¼šåœ¨å›½å†…é…ç½®é•œåƒæºå¯ä»¥æå¤§æå‡åŒ…ä¸‹è½½æ•ˆç‡ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¢è¯•å®˜: â€œ è¯´ä¸€ä¸‹ä½ å¯¹ Cookie çš„ç†è§£ ? â€]]></title>    <link>https://juejin.cn/post/7588043318359146531</link>    <guid>https://juejin.cn/post/7588043318359146531</guid>    <pubDate>2025-12-27T11:32:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588043318359146531" data-draft-id="7588095884069535744" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¢è¯•å®˜: â€œ è¯´ä¸€ä¸‹ä½ å¯¹ Cookie çš„ç†è§£ ? â€"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2025-12-27T11:32:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åƒå¯»girling"/> <meta itemprop="url" content="https://juejin.cn/user/2276467567770442"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¢è¯•å®˜: â€œ è¯´ä¸€ä¸‹ä½ å¯¹ Cookie çš„ç†è§£ ? â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2276467567770442/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åƒå¯»girling
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T11:32:30.000Z" title="Sat Dec 27 2025 11:32:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1.Â <strong>ä»€ä¹ˆæ˜¯ Cookie</strong></h2>
<p><strong>Cookie</strong>ï¼ˆå°ç”œé¥¼ï¼‰æ˜¯Â <strong>æœåŠ¡å™¨å‘é€ç»™æµè§ˆå™¨å¹¶ä¿å­˜åœ¨å®¢æˆ·ç«¯çš„ä¸€å°æ®µæ•°æ®</strong>ï¼Œç”¨äºï¼š</p>
<ul>
<li>è®°å½•ç”¨æˆ·çŠ¶æ€ï¼ˆå¦‚ç™»å½•ä¿¡æ¯ã€è´­ç‰©è½¦å†…å®¹ï¼‰</li>
<li>è·Ÿè¸ªç”¨æˆ·è¡Œä¸ºï¼ˆå¦‚æµè§ˆå†å²ã€å¹¿å‘Šæ¨é€ï¼‰</li>
<li>å­˜å‚¨å°‘é‡é…ç½®ä¿¡æ¯ï¼ˆå¦‚ä¸»é¢˜åå¥½ã€è¯­è¨€è®¾ç½®ï¼‰</li>
</ul>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>å¤§å°é™åˆ¶ï¼šé€šå¸¸æ¯ä¸ª Cookie æœ€å¤§ 4KB</li>
<li>æ•°é‡é™åˆ¶ï¼šæ¯ä¸ªåŸŸåä¸€èˆ¬æœ€å¤š 50 ä¸ª Cookie</li>
<li>è‡ªåŠ¨æºå¸¦ï¼šæµè§ˆå™¨åœ¨è®¿é—®åŒä¸€åŸŸåæ—¶ä¼šè‡ªåŠ¨å°† Cookie é™„åŠ åœ¨è¯·æ±‚å¤´ä¸­å‘é€ç»™æœåŠ¡å™¨</li>
</ul>
<hr/>
<h2 data-id="heading-1">2.Â <strong>Cookie çš„ç»“æ„</strong></h2>
<p>ä¸€ä¸ª Cookie é€šå¸¸åŒ…å«ä»¥ä¸‹å­—æ®µï¼š</p>









































<table><thead><tr><th>å­—æ®µå</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>Name</strong></td><td>Cookie çš„åç§°</td></tr><tr><td><strong>Value</strong></td><td>Cookie çš„å€¼ï¼ˆé€šå¸¸ç»è¿‡ URL ç¼–ç ï¼‰</td></tr><tr><td><strong>Domain</strong></td><td>å¯ä»¥è®¿é—®è¯¥ Cookie çš„åŸŸå</td></tr><tr><td><strong>Path</strong></td><td>å¯ä»¥è®¿é—®è¯¥ Cookie çš„è·¯å¾„</td></tr><tr><td><strong>Expires / Max-Age</strong></td><td>Cookie çš„è¿‡æœŸæ—¶é—´ï¼ˆExpires æ˜¯å…·ä½“æ—¥æœŸï¼ŒMax-Age æ˜¯ç§’æ•°ï¼‰</td></tr><tr><td><strong>HttpOnly</strong></td><td>å¦‚æœè®¾ç½®ï¼ŒCookie ä¸èƒ½é€šè¿‡ JavaScript è®¿é—®ï¼ˆé˜²æ­¢ XSS æ”»å‡»ï¼‰</td></tr><tr><td><strong>Secure</strong></td><td>å¦‚æœè®¾ç½®ï¼ŒCookie åªèƒ½é€šè¿‡ HTTPS ä¼ è¾“</td></tr><tr><td><strong>SameSite</strong></td><td>æ§åˆ¶è·¨ç«™è¯·æ±‚æ—¶æ˜¯å¦å‘é€ Cookieï¼ˆé˜²æ­¢ CSRF æ”»å‡»ï¼‰</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-2">3.Â <strong>Cookie çš„å·¥ä½œæµç¨‹</strong></h2>
<ol>
<li>
<p><strong>æœåŠ¡å™¨å‘é€ Cookie</strong> : å½“æµè§ˆå™¨ç¬¬ä¸€æ¬¡è®¿é—®æœåŠ¡å™¨æ—¶ï¼ŒæœåŠ¡å™¨åœ¨å“åº”å¤´ä¸­æ·»åŠ ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Set-Cookie: <span class="hljs-attr">username</span>=Tom<span class="hljs-comment">; Path=/; HttpOnly; Secure</span>
</code></pre>
<p>æµè§ˆå™¨æ”¶åˆ°åä¼šå°†è¯¥ Cookie ä¿å­˜åˆ°æœ¬åœ°ã€‚</p>
</li>
<li>
<p><strong>æµè§ˆå™¨å­˜å‚¨ Cookie</strong>: Cookie ä¼šè¢«ä¿å­˜åœ¨æµè§ˆå™¨çš„æŸä¸ªæ–‡ä»¶æˆ–å†…å­˜ä¸­ï¼Œæ ¹æ®Â <code>Domain</code>Â å’ŒÂ <code>Path</code>Â æ¥åŒºåˆ†ã€‚</p>
</li>
<li>
<p><strong>æµè§ˆå™¨å‘é€è¯·æ±‚æ—¶æºå¸¦ Cookie</strong> : ä¹‹åæ¯æ¬¡è®¿é—®åŒä¸€åŸŸåå’Œè·¯å¾„æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Cookie: <span class="hljs-attr">username</span>=Tom
</code></pre>
<p>æœåŠ¡å™¨é€šè¿‡è¯»å–è¿™ä¸ª Cookie æ¥è¯†åˆ«ç”¨æˆ·ã€‚</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-3">4.Â <strong>Cookie çš„åˆ†ç±»</strong></h2>
<h3 data-id="heading-4">ï¼ˆ1ï¼‰<strong>ä¼šè¯ Cookieï¼ˆSession Cookieï¼‰</strong></h3>
<ul>
<li>æ²¡æœ‰è®¾ç½®Â <code>Expires</code>Â æˆ–Â <code>Max-Age</code></li>
<li>æµè§ˆå™¨å…³é—­åè‡ªåŠ¨åˆ é™¤</li>
<li>å¸¸ç”¨äºä¿å­˜çŸ­æœŸä¼šè¯ä¿¡æ¯ï¼ˆå¦‚ç™»å½•çŠ¶æ€ï¼‰</li>
</ul>
<h3 data-id="heading-5">ï¼ˆ2ï¼‰<strong>æŒä¹… Cookieï¼ˆPersistent Cookieï¼‰</strong></h3>
<ul>
<li>è®¾ç½®äº†Â <code>Expires</code>Â æˆ–Â <code>Max-Age</code></li>
<li>åœ¨è¿‡æœŸæ—¶é—´å‰ä¸€ç›´æœ‰æ•ˆï¼Œå³ä½¿æµè§ˆå™¨å…³é—­</li>
<li>å¸¸ç”¨äºä¿å­˜é•¿æœŸä¿¡æ¯ï¼ˆå¦‚è®°ä½ç™»å½•ã€ç”¨æˆ·åå¥½ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-6">5.Â <strong>Cookie çš„ä¼˜ç¼ºç‚¹</strong></h2>
<h3 data-id="heading-7">ä¼˜ç‚¹</h3>
<ul>
<li><strong>ç®€å•æ˜“ç”¨</strong>ï¼šæœåŠ¡å™¨å’Œæµè§ˆå™¨éƒ½åŸç”Ÿæ”¯æŒ</li>
<li><strong>è‡ªåŠ¨æºå¸¦</strong>ï¼šæ— éœ€æ‰‹åŠ¨å¤„ç†</li>
<li><strong>è½»é‡çº§</strong>ï¼šé€‚åˆå­˜å‚¨å°‘é‡æ•°æ®</li>
</ul>
<h3 data-id="heading-8">ç¼ºç‚¹</h3>
<ul>
<li>
<p><strong>å®¹é‡å°</strong>ï¼šæ¯ä¸ª Cookie æœ€å¤§ 4KB</p>
</li>
<li>
<p><strong>å®‰å…¨æ€§å·®</strong>ï¼š</p>
<ul>
<li>å®¹æ˜“è¢«çªƒå–ï¼ˆXSS æ”»å‡»ï¼‰</li>
<li>å®¹æ˜“è¢«ä¼ªé€ ï¼ˆCSRF æ”»å‡»ï¼‰</li>
</ul>
</li>
<li>
<p><strong>æ€§èƒ½å½±å“</strong>ï¼š</p>
<ul>
<li>æ¯æ¬¡è¯·æ±‚éƒ½ä¼šæºå¸¦ï¼Œå¢åŠ å¸¦å®½æ¶ˆè€—</li>
<li>è¿‡å¤š Cookie ä¼šå½±å“é¡µé¢åŠ è½½é€Ÿåº¦</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-9">6.Â <strong>Cookie çš„å®‰å…¨è®¾ç½®</strong></h2>
<p>ä¸ºäº†æé«˜å®‰å…¨æ€§ï¼Œå»ºè®®è®¾ç½®ä»¥ä¸‹å±æ€§ï¼š</p>
<ul>
<li>
<p><strong>HttpOnly</strong>ï¼šé˜²æ­¢ JavaScript è®¿é—®ï¼ˆå‡å°‘ XSS é£é™©ï¼‰</p>
</li>
<li>
<p><strong>Secure</strong>ï¼šåªåœ¨ HTTPS è¿æ¥ä¸­ä¼ è¾“</p>
</li>
<li>
<p><strong>SameSite</strong>ï¼š</p>
<ul>
<li><code>Strict</code>ï¼šä»…åœ¨åŒç«™è¯·æ±‚æ—¶å‘é€</li>
<li><code>Lax</code>ï¼šå…è®¸éƒ¨åˆ†è·¨ç«™è¯·æ±‚ï¼ˆå¦‚ GET è¡¨å•æäº¤ï¼‰</li>
</ul>
</li>
<li>
<p><strong>åˆç†çš„è¿‡æœŸæ—¶é—´</strong>ï¼šçŸ­æœŸ Cookie å‡å°‘è¢«ç›—é£é™©</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-10">7.Â <strong>ç¤ºä¾‹ï¼šä½¿ç”¨ Cookie</strong></h2>
<h3 data-id="heading-11">ï¼ˆ1ï¼‰æœåŠ¡å™¨è®¾ç½® Cookieï¼ˆNode.js + Expressï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();

app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/login'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  <span class="hljs-comment">// è®¾ç½®ä¸€ä¸ªä¼šè¯ Cookie</span>
  res.<span class="hljs-title function_">cookie</span>(<span class="hljs-string">'username'</span>, <span class="hljs-string">'Tom'</span>, {
    <span class="hljs-attr">httpOnly</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">secure</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'production'</span>,
    <span class="hljs-attr">sameSite</span>: <span class="hljs-string">'Strict'</span>,
    <span class="hljs-attr">maxAge</span>: <span class="hljs-number">3600000</span> <span class="hljs-comment">// 1 å°æ—¶</span>
  });
  res.<span class="hljs-title function_">send</span>(<span class="hljs-string">'ç™»å½•æˆåŠŸ'</span>);
});

app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/profile'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  <span class="hljs-comment">// è¯»å– Cookie</span>
  <span class="hljs-keyword">const</span> username = req.<span class="hljs-property">cookies</span>.<span class="hljs-property">username</span>;
  <span class="hljs-keyword">if</span> (username) {
    res.<span class="hljs-title function_">send</span>(<span class="hljs-string">`æ¬¢è¿ä½ ï¼Œ<span class="hljs-subst">${username}</span>`</span>);
  } <span class="hljs-keyword">else</span> {
    res.<span class="hljs-title function_">send</span>(<span class="hljs-string">'è¯·å…ˆç™»å½•'</span>);
  }
});

app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>);
</code></pre>
<h3 data-id="heading-12">ï¼ˆ2ï¼‰æµè§ˆå™¨æŸ¥çœ‹ Cookie</h3>
<ul>
<li>Chromeï¼š<code>F12</code>Â â†’Â <strong>Application</strong>Â â†’Â <strong>Cookies</strong></li>
<li>Firefoxï¼š<code>F12</code>Â â†’Â <strong>Storage</strong>Â â†’Â <strong>Cookies</strong></li>
</ul>
<hr/>
<h2 data-id="heading-13">8.Â <strong>Cookie ä¸ Token çš„åŒºåˆ«</strong></h2>



































<table><thead><tr><th>ç‰¹æ€§</th><th>Cookie</th><th>Token</th></tr></thead><tbody><tr><td>å­˜å‚¨ä½ç½®</td><td>æµè§ˆå™¨</td><td>æµè§ˆå™¨ï¼ˆLocalStorage/SessionStorageï¼‰æˆ– App</td></tr><tr><td>ä¼ è¾“æ–¹å¼</td><td>è‡ªåŠ¨åœ¨ HTTP è¯·æ±‚å¤´ä¸­å‘é€</td><td>éœ€è¦æ‰‹åŠ¨åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ ï¼ˆå¦‚Â <code>Authorization: Bearer &lt;token&gt;</code>ï¼‰</td></tr><tr><td>å®¹é‡é™åˆ¶</td><td>æ¯ä¸ª Cookie æœ€å¤§ 4KB</td><td>æ— å›ºå®šé™åˆ¶ï¼ˆä½†è¿‡å¤§å½±å“æ€§èƒ½ï¼‰</td></tr><tr><td>å®‰å…¨æ€§</td><td>è¾ƒä½ï¼ˆæ˜“å— XSS/CSRF æ”»å‡»ï¼‰</td><td>è¾ƒé«˜ï¼ˆå¯ç»“åˆ HttpOnlyã€Secureã€SameSiteï¼‰</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>ç®€å•ä¼šè¯ç®¡ç†ã€çŸ­æœŸçŠ¶æ€å­˜å‚¨</td><td>å¤æ‚è®¤è¯æˆæƒã€è·¨åŸŸè¯·æ±‚ã€ç§»åŠ¨åº”ç”¨</td></tr></tbody></table>
<hr/>
<p>âœ…Â <strong>æ€»ç»“</strong>ï¼š</p>
<ul>
<li><strong>Cookie</strong>Â æ˜¯æœåŠ¡å™¨ä¿å­˜åœ¨æµè§ˆå™¨çš„ä¸€å°æ®µæ•°æ®ï¼Œç”¨äºè®°å½•çŠ¶æ€å’Œè·Ÿè¸ªç”¨æˆ·</li>
<li>è‡ªåŠ¨æºå¸¦åœ¨è¯·æ±‚å¤´ä¸­ï¼Œæ–¹ä¾¿ä½†æœ‰å®¹é‡å’Œå®‰å…¨é™åˆ¶</li>
<li>å¸¸ç”¨äºç®€å•ä¼šè¯ç®¡ç†ï¼Œç°ä»£ Web å¼€å‘ä¸­æ›´å¤šä¸ Token ç»“åˆä½¿ç”¨</li>
<li>å®‰å…¨ä½¿ç”¨éœ€è®¾ç½®Â <code>HttpOnly</code>ã€<code>Secure</code>ã€<code>SameSite</code>Â ç­‰å±æ€§</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[nextjsä¸­ï¼Œå…³äºLayoutç»„ä»¶å’ŒPageç»„ä»¶çš„è®¤çŸ¥]]></title>    <link>https://juejin.cn/post/7588084804093165606</link>    <guid>https://juejin.cn/post/7588084804093165606</guid>    <pubDate>2025-12-27T11:55:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588084804093165606" data-draft-id="7588086766248165427" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="nextjsä¸­ï¼Œå…³äºLayoutç»„ä»¶å’ŒPageç»„ä»¶çš„è®¤çŸ¥"/> <meta itemprop="keywords" content="å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2025-12-27T11:55:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RedHeartWWW"/> <meta itemprop="url" content="https://juejin.cn/user/3263006243293768"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            nextjsä¸­ï¼Œå…³äºLayoutç»„ä»¶å’ŒPageç»„ä»¶çš„è®¤çŸ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3263006243293768/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RedHeartWWW
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T11:55:29.000Z" title="Sat Dec 27 2025 11:55:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€Layoutâ€”â€”é¡µé¢çš„å¸ƒå±€ç»“æ„</h2>
<p>å½“ç”¨æˆ·è®¿é—®nexté¡¹ç›®ä¸­çš„ä¸€ä¸ªé¡µé¢ï¼Œå¦‚æœè¿™ä¸ªé¡µé¢çš„è·¯ç”±å¯¹åº”æ–‡ä»¶å¤¹ä¸‹é¢æœ‰layout.tsxï¼Œé‚£ä¹ˆnextå°±ä¼šåŸºäºè¿™ä¸ªæ–‡ä»¶é‡Œé¢çš„domç»“æ„ï¼Œæ¸²æŸ“å½“å‰é¡µé¢ç»“æ„ã€‚Layoutçš„é€šå¸¸ä¼ å‚éå¸¸ç®€å•ï¼Œå› ä¸ºå®ƒè´Ÿè´£çš„ä»…ä»…åªæœ‰<strong>è´Ÿè´£å½“å‰é¡µé¢çš„å¸ƒå±€</strong>è¿™ä¸€é¡¹å·¥ä½œã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// ä¸€èˆ¬è·¯ç”±æ–‡ä»¶å¤¹ä¸‹çš„layout.tsxåªéœ€è¦æ¸²æŸ“childrenå³å¯</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">LayoutProps</span> {
    <span class="hljs-attr">children</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span> 
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Layout</span>(<span class="hljs-params">{ children }: LayoutProps</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"min-h-screen w-full"</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}

</code></pre>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// appé¡¶å±‚æ–‡ä»¶å¤¹çš„layouté™¤äº†childrenï¼Œè¿˜éœ€è¦æ¸²æŸ“htmlå’Œbody</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RootLayout</span>(<span class="hljs-params">{
  children,
}: {
  children: React.ReactNode;
}</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>
  );
}
</code></pre>
<p>é€šå¸¸å½“ç”¨æˆ·è®¿é—®é¡µé¢è·¯ç”±ï¼Œnextä¼šå…ˆåŒ¹é…å¯¹åº”æ–‡ä»¶å¤¹ä¸‹é¢çš„page.tsxï¼Œç„¶åå†â€œ<strong>è‡ªä¸‹è€Œä¸Š</strong>â€å¯»æ‰¾Layout.tsxã€‚</p>
<p>ä¾‹å¦‚ç”¨æˆ·è®¿é—®/blogè¿™ä¸ªé¡µé¢çš„æ—¶å€™ï¼Œä¼šå…ˆå¯»æ‰¾é™æ€è·¯ç”±å¯¹åº”çš„æ–‡ä»¶å¤¹blogï¼ŒåŒ¹é…åˆ°<code>app/blog/page.tsx</code>ä¹‹åï¼Œå¦‚æœå½“å‰æ–‡ä»¶å¤¹ä¸­æ²¡æœ‰layoutï¼Œé‚£å°±é€çº§å¾€ä¸Šå¯»æ‰¾layoutï¼Œç›´åˆ°åŒ¹é…åˆ°<code>app/layout.tsx</code>ã€‚</p>
<pre><code class="hljs language-plaintext" lang="plaintext">app/
 â”œâ”€â”€ (marketing)/  --&gt; å¸¦æ‹¬å·ï¼Œæ˜¯è·¯ç”±ç»„ï¼Œç»§ç»­å¾€ä¸‹æ‰¾
 â”‚    â””â”€â”€ page.tsx --&gt; å¯¹åº”è·¯å¾„ "/"
 â”‚
 â”œâ”€â”€ blog/  --&gt; å¯¹åº”è·¯å¾„ "/blog"
 â”‚    â””â”€â”€ page.tsx --&gt; æ‰¾åˆ°ç›®æ ‡ï¼Œä½†æ˜¯å½“å‰æ–‡ä»¶å¤¹é‡Œé¢æ²¡æœ‰layout.tsx
 â”‚
 â””â”€â”€ Layout.tsx  --&gt; å¦‚æœblogä¸Šçº§æ–‡ä»¶å¤¹ä¸­æœ‰layout.tsxï¼Œé‚£å°±ç”¨è¿™ä¸ªlayout.tsxæ¥æ¸²æŸ“blog/page.tsx
</code></pre>
<h2 data-id="heading-1">äºŒã€Pageâ€”â€”é¡µé¢çš„ä¸šåŠ¡å†…å®¹</h2>
<p>Layout.tsxè´Ÿè´£å½“å‰é¡µé¢çš„ç»“æ„ï¼Œé€šå¸¸é‡Œé¢çš„ä»£ç éƒ½æ˜¯æ²¡æœ‰å¤æ‚ä¸šåŠ¡é€»è¾‘çš„é™æ€çº¯ç»„ä»¶ï¼Œæ‰¿æ‹…ä¸šåŠ¡é€»è¾‘çš„éƒ½æ˜¯Page.tsxã€‚</p>
<p>Pageæœ‰paramså’ŒsearchParamsä¸¤ä¸ªé»˜è®¤å‚æ•°ã€‚<code>params</code>ç”¨äºè·å– <strong>åŠ¨æ€è·¯ç”±</strong>ï¼ˆDynamic Routesï¼‰ä¸­çš„å‚æ•°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„æ–‡ä»¶è·¯å¾„æ˜¯ <code>app/blog/[slug]/page.tsx</code>ï¼Œé‚£ä¹ˆ <code>params</code> å°±ä¼šåŒ…å« <code>slug</code>ã€‚
<code>searchParams</code>ç”¨äºè·å– URL ä¸­ <strong>é—®å·åé¢çš„æŸ¥è¯¢å‚æ•°</strong>ï¼ˆQuery Parametersï¼‰ã€‚ä¾‹å¦‚ <code>?query=nextjs&amp;page=1</code>ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">Page</span> = <span class="hljs-keyword">async</span>(<span class="hljs-params">{
    params,
    searchParams
}:{
    params:<span class="hljs-built_in">Promise</span>&lt;{slug:<span class="hljs-built_in">string</span>}&gt;, 
    searchParams:<span class="hljs-built_in">Promise</span>&lt;{[key: <span class="hljs-built_in">string</span>]:<span class="hljs-built_in">string</span> | <span class="hljs-built_in">string</span>[] | <span class="hljs-literal">undefined</span>}&gt;
}</span>) =&gt;{
    <span class="hljs-keyword">const</span> {slug} = <span class="hljs-keyword">await</span> params;
    <span class="hljs-keyword">const</span> urlParams = <span class="hljs-keyword">await</span> searchParams;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(slug, urlParams);
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Nav</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Hello, I'm the blog page<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Page</span>
</code></pre>
<p>å½“è®¿é—®<code>/blog/a?query=11111&amp;query=222222&amp;b=5</code>æ—¶ï¼Œconsoleä¼šè¾“å‡ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05ea5fc9b608487c8f9d8d9c687458fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUmVkSGVhcnRXV1c=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767441343&amp;x-signature=5IbaBvIimCN51cIP3rK6TRdi1fs%3D" alt="image.png" loading="lazy"/>
å…¶ä¸­<code>['a']</code>æ˜¯åªæœ‰è®¿é—®åŠ¨æ€è·¯ç”±æ‰ä¼šæœ‰è¾“å‡ºï¼Œå¦‚æœè®¿é—®ä¸€ä¸ªé™æ€è·¯ç”±åœ°å€ï¼Œparamsè¾“å‡ºå°±æ˜¯undefinedï¼ŒsearchParamsåˆ™ä¼šä»¥é”®å€¼å¯¹çš„å½¢å¼å±•ç¤ºå‡ºæ¥</p>
<h2 data-id="heading-2">ä¸‰ã€è·¯ç”±ç»„åˆ’åˆ†å¤šæ ¹æ¨¡æ¿</h2>
<p>nextjsé€šè¿‡<code>(folder)</code>çš„æ–¹å¼åˆ’åˆ†è·¯ç”±ç»„ï¼Œè·¯ç”±ç»„æœ¬èº«å¹¶ä¸ä¼šè¢«nextè¯†åˆ«ä¸ºè·¯ç”±ï¼Œæ¯”å¦‚æ–‡ä»¶ç»“æ„å¦‚æœæ˜¯<code>/app/(marketing)/blog/page.tsx</code>ï¼Œé‚£ä¹ˆåªéœ€è¦è®¿é—®<code>/blog</code>å°±èƒ½è®¿é—®åˆ°è¿™ä¸ªpage.tsxã€‚<br/>è·¯ç”±ç»„è™½ç„¶ä¸ä¼šè¢«è¯†åˆ«ä¸ºè·¯ç”±ï¼Œä½†ç”±äºä¸Šé¢æåˆ°çš„pageâ€œ<strong>ä»å†…è€Œå¤–</strong>â€åŒ¹é…layoutæ¸²æŸ“çš„æœºåˆ¶ï¼Œä¸åŒçš„æ¨¡å—éƒ½å¯ä»¥æœ‰è‡ªå·±çš„rootlayoutï¼š</p>
<pre><code class="hljs language-plaintext" lang="plaintext">app/
 â”œâ”€â”€ (marketing)/  --&gt; marketingæ¨¡å—å¯¹åº”è·¯ç”±ç»„
 â”‚    â””â”€â”€ page.tsx --&gt; å¯¹åº”è·¯å¾„ "/"
 |    â””â”€â”€ layout.tsx --&gt; marketingæ¨¡å—ä¸‹æ‰€æœ‰pageçš„æ ¹layout 
 |
 â”œâ”€â”€ (dashboard)/  --&gt; 
 â”‚    â””â”€â”€ dashboard/
 â”‚         â””â”€â”€ page.tsx --&gt; å¯¹åº”è·¯å¾„ "/dashboard"
 â”‚         â””â”€â”€ layout.tsx --&gt; dashboardæ¨¡å—ä¸‹æ‰€æœ‰pageçš„æ ¹layout
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é‚£äº›è®©ä½  debug åˆ°å‡Œæ™¨çš„é™·é˜±ï¼Œæˆ‘å¸®ä½ è¸©å¹³äº†ï¼šReact Hooks é¿å‘æŒ‡å—]]></title>    <link>https://juejin.cn/post/7588069469517594665</link>    <guid>https://juejin.cn/post/7588069469517594665</guid>    <pubDate>2025-12-27T12:03:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588069469517594665" data-draft-id="7587062584165384230" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é‚£äº›è®©ä½  debug åˆ°å‡Œæ™¨çš„é™·é˜±ï¼Œæˆ‘å¸®ä½ è¸©å¹³äº†ï¼šReact Hooks é¿å‘æŒ‡å—"/> <meta itemprop="keywords" content="React.js,å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-27T12:03:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£æ­¢ä½•å®‰å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/2517239724512420"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é‚£äº›è®©ä½  debug åˆ°å‡Œæ™¨çš„é™·é˜±ï¼Œæˆ‘å¸®ä½ è¸©å¹³äº†ï¼šReact Hooks é¿å‘æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2517239724512420/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£æ­¢ä½•å®‰å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T12:03:25.000Z" title="Sat Dec 27 2025 12:03:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#444;background-image:linear-gradient(90deg,rgba(59,59,59,.1) 3%,transparent 0),linear-gradient(1turn,rgba(122,120,121,.1) 3%,transparent 0);background-size:30px 30px;background-position:50%;letter-spacing:1px;word-spacing:1px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;margin-top:34px;margin-bottom:16px;font-weight:700;line-height:1.3;cursor:text;color:#444;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body h1{font-size:41px;margin-bottom:34px;line-height:1.5}.markdown-body h1:before{content:""}.markdown-body h2{font-size:30px;padding-left:.4em;border-left:.4em solid #5e5e5e;border-bottom:1px solid #444}.markdown-body h2:after{content:"ğŸ•›";position:absolute;top:0;right:0;transition:all;animation:rotate 10s linear infinite}@keyframes rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.markdown-body h3{border-left:.4em solid #8d8d8d;font-size:24px;padding-left:.4em}.markdown-body h4{font-size:20px}.markdown-body h5{font-size:16px}.markdown-body h6{font-size:14px}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body table,.markdown-body ul{margin:.8em 0}.markdown-body strong{font-weight:1000;position:relative;color:#444;padding:0 3px}.markdown-body em{font-weight:inherit}.markdown-body a{box-sizing:border-box;color:grey;position:relative}.markdown-body a:before{position:absolute;box-sizing:border-box;content:"Go -&gt;";left:0;width:100%;max-width:0;color:#fff;background-color:hsla(0,0%,50.2%,.8);white-space:nowrap;transition:.2s ease;pointer-events:none;overflow:hidden}.markdown-body a:after{content:"";position:absolute;bottom:0;left:0;width:100%;height:1px;background-color:grey}.markdown-body a:active:before,.markdown-body a:hover:before{max-width:100%;padding-left:8px;border-radius:5px}.markdown-body hr{position:relative;width:100%;height:1px;border:none;margin-top:36px;margin-bottom:36px;background:linear-gradient(90deg,grey,#f1f1f1,#444,#444,#f1f1f1,grey);overflow:visible}.markdown-body ol,.markdown-body ul{padding-left:32px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px;list-style:inherit}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol{counter-reset:my-counter}.markdown-body ol&gt;li{padding-left:6px;list-style:none;counter-increment:my-counter;position:relative}.markdown-body ol&gt;li:before{position:absolute;left:-1.5em;content:counter(my-counter);font-weight:700}.markdown-body ol&gt;li:first-child:before{content:"1ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(2):before{content:"2ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(3):before{content:"3ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(4):before{content:"4ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(5):before{content:"5ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(6):before{content:"6ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(7):before{content:"7ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(8):before{content:"8ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(9):before{content:"9ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(10):before{content:"ğŸ”Ÿ"}.markdown-body ul&gt;li{list-style:none;position:relative}.markdown-body ul&gt;li:before{z-index:10;position:absolute;left:-1.57em;content:"ğŸ”¹";margin-right:12px}.markdown-body ul&gt;li input{margin-left:8px!important}.markdown-body blockquote{position:relative;background-color:#d3d3d3;padding:5px 10px;border-left:.2em solid #000;border-radius:3px;transition:all .8s ease}.markdown-body blockquote:hover{opacity:.7}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(69,69,77,.8);color:#fff;font-size:.87em;padding:.07em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:7px;overflow:hidden}.markdown-body pre:before{z-index:10;position:absolute;top:14px;left:14px;width:12px;height:12px;border-radius:50%;background:#fc625d;-webkit-box-shadow:20px 0 #fdbc40,40px 0 #35cd4b;box-shadow:20px 0 #fdbc40,40px 0 #35cd4b;content:" "}.markdown-body pre:after{z-index:9;content:"";position:absolute;width:100%;height:40px;top:0;background-color:#1a1a1a}.markdown-body pre&gt;code{display:block;font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#171717;color:#bababa;font-size:14px;padding:40px 20px 20px}.markdown-body del{color:grey}.markdown-body table{margin-bottom:1.25rem;border-collapse:collapse}.markdown-body table td,.markdown-body table th{margin:0;padding:8px;line-height:20px;vertical-align:middle;border:1px solid #ddd}.markdown-body table thead,.markdown-body table tr:nth-child(2n){background-color:#fcfcfc}.markdown-body table thead th,.markdown-body table tr:nth-child(2n) th{font-weight:700;vertical-align:middle;color:#444}.markdown-body table tbody tr td{font-weight:400;color:#444}.markdown-body table tbody tr:hover{background-color:#d3d3d3}.markdown-body table tbody tr:hover td{color:#fff}.markdown-body img{max-width:100%;margin:0 12px}@media (max-width:720px){.markdown-body h1{font-size:32.8px}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:19.2px}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:12.8px}}</style><style data-highlight="" data-highlight-key="hybrid">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1d1f21}.hljs::selection,.hljs span::selection{background:#373b41}.hljs::-moz-selection,.hljs span::-moz-selection{background:#373b41}.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#c5c8c6}.hljs-name,.hljs-title{color:#f0c674}.hljs-comment,.hljs-meta,.hljs-meta .hljs-keyword{color:#707880}.hljs-deletion,.hljs-link,.hljs-literal,.hljs-number,.hljs-symbol{color:#c66}.hljs-addition,.hljs-doctag,.hljs-regexp,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string{color:#b5bd68}.hljs-attribute,.hljs-code,.hljs-selector-id{color:#b294bb}.hljs-bullet,.hljs-keyword,.hljs-selector-tag,.hljs-tag{color:#81a2be}.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-variable{color:#8abeb7}.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-selector-class,.hljs-type{color:#de935f}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨ <strong>React å‡½æ•°ç»„ä»¶</strong>çš„ä¸–ç•Œé‡Œï¼Œ<code>Hooks</code> æ— ç–‘æ˜¯ <strong>â€œæ•ˆç‡ç¥å™¨â€</strong>â€”â€” å®ƒç”¨æç®€çš„ API å°è£…äº†çŠ¶æ€ç®¡ç†ä¸ç”Ÿå‘½å‘¨æœŸé€»è¾‘ï¼Œè®©æˆ‘ä»¬å‘Šåˆ«äº†ç±»ç»„ä»¶çš„ç¹çã€‚ä½†å°±åƒç«¥è¯é‡Œè—åœ¨ç³–æœå±‹åçš„é™·é˜±ï¼Œè¿™äº›çœ‹ä¼¼å‹å¥½çš„ API èƒŒåï¼Œè—ç€ä¸å°‘å›  <strong>â€œé—­åŒ…ç‰¹æ€§â€â€œä¾èµ–é€»è¾‘â€â€œå¼‚æ­¥å¤„ç†â€</strong> å¼•å‘çš„<strong>å‘</strong>ã€‚å¾ˆå¤šå¼€å‘è€…åˆšä¸Šæ‰‹æ—¶ï¼Œæ€»åœ¨ â€œå†™å¾—é€šâ€ å’Œ â€œå†™å¾—å¯¹â€ ä¹‹é—´åå¤è¸©å‘ï¼Œ<code>debug</code> åˆ°æ€€ç–‘äººç”Ÿã€‚</p>
<p>æˆ‘åœ¨åˆšå…¥æ‰‹æ—¶è¸©äº†ä¸å°‘ <strong>â€œå‘â€</strong>ï¼Œæ‰€ä»¥æˆ‘å°†ç”¨æˆ‘çš„äº²èº«ç»å†å¸®ä½ ä»¬å¡«å¹³ã€‚æœ¬æ–‡å…ˆå¿«é€Ÿæ¢³ç† <code>Hooks</code> æ ¸å¿ƒåŸºç¡€ï¼Œå†èšç„¦é‚£äº›æœ€å®¹æ˜“ä¸­æ‹›çš„ â€œé™·é˜±â€ï¼Œç”¨ä»£ç æ¡ˆä¾‹æ‹†è§£å‘å› ã€ç»™å‡ºé¿å‘æ–¹æ¡ˆï¼Œå¸®ä½ é¿å¼€ Hooks è·¯ä¸Šçš„ <strong>â€œè¿ç¯é›·â€</strong>!</p>
<h3 data-id="heading-1">ä¸€ã€å…ˆæ­ä¸ª Hooks å°èˆå°</h3>
<p><code>React Hooks</code> å°±åƒç»™å‡½æ•°ç»„ä»¶å¼€äº†æŒ‚ â€”â€” ä¸ç”¨å†™ç±»å°±èƒ½æ‹¥æœ‰çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸï¼Œå…ˆæ¥å¿«é€Ÿå›é¡¾ä¸‹ <strong>â€œåŸºç¡€ä¸‰ä»¶å¥—â€</strong>ï¼š</p>
<h4 data-id="heading-2">1. useState:çŠ¶æ€ç®¡ç†çš„ â€œå…¥é—¨é’¥åŒ™â€</h4>
<p>å®ƒèƒ½æ¥æ”¶<strong>å€¼</strong>æˆ–<strong>åŒæ­¥å‡½æ•°</strong>ï¼ˆæ³¨æ„ï¼šå¼‚æ­¥ä»£ç ä¼šç¿»è½¦ï¼ï¼‰ï¼Œè¿”å› â€œçŠ¶æ€ + ä¿®æ”¹çŠ¶æ€çš„æ–¹æ³•â€ã€‚ä¿®æ”¹çŠ¶æ€æ—¶ï¼Œ<code>setXxx</code>Â æ—¢å¯ä»¥ç›´æ¥ä¼ å€¼ï¼Œä¹Ÿèƒ½ä¼ ä¸€ä¸ª â€œæ¥æ”¶æ—§çŠ¶æ€ã€è¿”å›æ–°çŠ¶æ€â€ çš„å‡½æ•°ï¼ˆè¿™ä¸ªç»†èŠ‚æ˜¯é¿å‘å…³é”®ï¼ï¼‰ã€‚</p>
<p>æ¯”å¦‚<code>State.jsx</code>é‡Œçš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getDate</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> { <span class="hljs-title function_">resolve</span>(<span class="hljs-number">100</span>) }, <span class="hljs-number">1000</span>)
    })
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">State</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// âŒ é”™è¯¯ç¤ºèŒƒï¼šuseStateä¸æ”¯æŒå¼‚æ­¥å‡½æ•°</span>
    <span class="hljs-comment">// const [num, setNum] = useState(async () =&gt; {</span>
    <span class="hljs-comment">//   const res = await getDate();</span>
    <span class="hljs-comment">//   return res;</span>
    <span class="hljs-comment">// });</span>

    <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šåŒæ­¥å‡½æ•°åˆå§‹åŒ–çŠ¶æ€</span>
    <span class="hljs-keyword">const</span> [num, setNum] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    });

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// âœ… ç”¨å‡½æ•°å½¢å¼è·å–â€œä¿®æ”¹å‰çš„æ—§çŠ¶æ€â€</span>
        <span class="hljs-title function_">setNum</span>(<span class="hljs-function">(<span class="hljs-params">prev</span>) =&gt;</span> {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(prev); <span class="hljs-comment">// ç‚¹å‡»æ—¶æ‰“å°å½“å‰numï¼ˆä¿®æ”¹å‰ï¼‰</span>
            <span class="hljs-keyword">return</span> prev + <span class="hljs-number">1</span>;
        })
    }
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{add}</span>&gt;</span>{num}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<h4 data-id="heading-3">2. useEffectï¼šç”Ÿå‘½å‘¨æœŸçš„ â€œä¼ªè£…è€…â€</h4>
<p>å®ƒåƒä¸ª â€œå¤šé¢æ‰‹â€ï¼Œèƒ½æ¨¡æ‹Ÿç»„ä»¶çš„ â€œæŒ‚è½½ã€æ›´æ–°ã€å¸è½½â€ï¼Œä½†ç”¨æ³•ä¸å¯¹å°±ä¼šè¸©å‘ï¼š</p>
<ul>
<li><code>useEffect(() =&gt; {})</code>ï¼šç»„ä»¶<strong>åˆæ¬¡åŠ è½½ + æ¯æ¬¡é‡æ¸²æŸ“</strong>éƒ½è§¦å‘</li>
<li><code>useEffect(() =&gt; {}, [])</code>ï¼šåªåœ¨<strong>åˆæ¬¡åŠ è½½</strong>æ—¶è§¦å‘</li>
<li><code>useEffect(() =&gt; {}, [x])</code>ï¼šåˆæ¬¡åŠ è½½ +Â <code>x</code>Â å˜åŒ–æ—¶è§¦å‘</li>
<li>è¿”å›çš„å‡½æ•°ï¼šç»„ä»¶<strong>å¸è½½å‰</strong>æ‰§è¡Œï¼ˆç”¨æ¥åšæ¸…ç†ï¼Œæ¯”å¦‚æ¸…å®šæ—¶å™¨ï¼‰</li>
</ul>
<p>çœ‹<code>Effect.jsx</code>é‡Œçš„å®šæ—¶å™¨ä¾‹å­ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getData</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> { <span class="hljs-title function_">resolve</span>(<span class="hljs-number">100</span>) }, <span class="hljs-number">1000</span>)
    })
    <span class="hljs-keyword">return</span> data;
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Effect</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> [num, setNum] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> { <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>; });
    <span class="hljs-keyword">const</span> [age, setAge] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">18</span>);

    <span class="hljs-comment">// ğŸŒ° ä¾èµ–é¡¹çš„å‘ï¼ˆåé¢ç»†è¯´ï¼‰</span>
    <span class="hljs-comment">// useEffect(() =&gt; {</span>
    <span class="hljs-comment">//   getData().then((data) =&gt; {</span>
    <span class="hljs-comment">//     console.log(data);</span>
    <span class="hljs-comment">//     setNum(data);</span>
    <span class="hljs-comment">//   })</span>
    <span class="hljs-comment">// }, [age]) // ä¾èµ–ageï¼Œä½†å®é™…ä¿®æ”¹çš„æ˜¯numâ€¦</span>

    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// å¯åŠ¨å®šæ—¶å™¨</span>
        <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-comment">// setNum(num + 1); // âŒ è¿™é‡Œæœ‰å‘ï¼åé¢è®²</span>
        }, <span class="hljs-number">1000</span>)
        <span class="hljs-comment">// ç»„ä»¶å¸è½½å‰æ¸…ç†å®šæ—¶å™¨ï¼ˆé¿å…å†…å­˜æ³„æ¼ï¼‰</span>
        <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
            <span class="hljs-built_in">clearInterval</span>(timer);
        }
    })

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params"/>) {
        <span class="hljs-title function_">setNum</span>(<span class="hljs-function">(<span class="hljs-params">prev</span>) =&gt;</span> {
            <span class="hljs-keyword">return</span> prev + <span class="hljs-number">1</span>;
        })
    }
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{add}</span>&gt;</span>{num}---{age}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<h4 data-id="heading-4">3. useReducerï¼šå¤æ‚çŠ¶æ€çš„ â€œè°ƒåº¦å‘˜â€</h4>
<p>å½“çŠ¶æ€é€»è¾‘æ¯”è¾ƒå¤æ‚æ—¶ï¼Œ<code>useReducer</code>æ¯”<code>useState</code>æ›´æ¸…æ™° â€”â€” å®ƒæŠŠ â€œçŠ¶æ€ä¿®æ”¹é€»è¾‘â€ æŠ½æˆ<code>reducer</code>å‡½æ•°ï¼Œé€šè¿‡<code>dispatch</code>è§¦å‘ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useReducer } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>
<span class="hljs-comment">// çŠ¶æ€ä¿®æ”¹çš„â€œè§„åˆ™å‡½æ•°â€</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">reducer</span>(<span class="hljs-params">state, action</span>) {
    <span class="hljs-keyword">switch</span>(action.<span class="hljs-property">type</span>) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">'add'</span>:
            <span class="hljs-keyword">return</span> state + action.<span class="hljs-property">num</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'minus'</span>:
            <span class="hljs-keyword">return</span> state - action.<span class="hljs-property">num</span>;
        <span class="hljs-attr">default</span>:
            <span class="hljs-keyword">return</span> state;
    }
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Trap</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// åˆå§‹åŒ–çŠ¶æ€ä¸º0ï¼Œdispatchç”¨æ¥è§¦å‘reducer</span>
    <span class="hljs-keyword">const</span> [count, dispatch] = <span class="hljs-title function_">useReducer</span>(reducer, <span class="hljs-number">0</span>);
    
    <span class="hljs-comment">// è§¦å‘â€œaddâ€æ“ä½œï¼Œä¼ å‚num=1</span>
    <span class="hljs-title function_">dispatch</span>({<span class="hljs-attr">type</span>: <span class="hljs-string">'add'</span>, <span class="hljs-attr">num</span>: <span class="hljs-number">1</span>});
    
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{count}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<p>ä»¥ä¸Šæˆ‘ä»¬å°±å¤§è‡´å›é¡¾äº†<code>hooks</code>çš„ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼Œå¦‚æœæƒ³çœ‹æ›´å…·ä½“çš„è¯·çœ‹æˆ‘çš„æ–‡ç« ï¼š</p>
<blockquote>
<p><a href="https://juejin.cn/post/7584370833703911439" target="_blank" title="https://juejin.cn/post/7584370833703911439">ä¸€åœºç»„ä»¶çš„è¿›åŒ–è„±å£ç§€â€”â€”Reactä» â€œç±»â€ åˆ° â€œhooksâ€ çš„ â€œæ”¹å¤´æ¢é¢â€</a></p>
</blockquote>
<h3 data-id="heading-5">äºŒã€é‡ç‚¹æ¥äº†ï¼šHooks çš„ â€œé™·é˜±â€</h3>
<p>å‰é¢éƒ½æ˜¯é“ºå«ï¼Œ<strong>è¿™äº›çœ‹ä¼¼ç®€å•çš„ Hooksï¼Œè—ç€èƒ½è®©ä½  debug åˆ°å¤©äº®çš„å‘</strong>â€”â€” æ¥ä¸‹æ¥é€ä¸ªæ‹†è§£ï¼š</p>
<h4 data-id="heading-6">é™·é˜± 1ï¼š useState çš„ â€œå¼‚æ­¥æ›´æ–°â€+â€œé—­åŒ…é™·é˜±â€</h4>
<p>çœ‹<code>Effect.jsx</code>é‡Œçš„å®šæ—¶å™¨ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">setNum</span>(num + <span class="hljs-number">1</span>); <span class="hljs-comment">// âŒ è¿™é‡Œæœ‰é—®é¢˜ï¼</span>
    }, <span class="hljs-number">1000</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(timer);
})
</code></pre>
<p><strong>å‘åœ¨å“ªï¼Ÿ</strong></p>
<p><code>useEffect</code>é»˜è®¤æ²¡æœ‰ä¾èµ–é¡¹ï¼Œä¼šåœ¨ç»„ä»¶æ¯æ¬¡é‡æ¸²æŸ“æ—¶é‡æ–°æ‰§è¡Œ â€”â€” ä½†å®šæ—¶å™¨é‡Œçš„<code>num</code>æ˜¯ â€œé—­åŒ…æ•è·çš„æ—§å€¼â€ï¼Œå¯¼è‡´<code>num + 1</code>æ°¸è¿œåªåœ¨åˆå§‹å€¼<code>1</code>çš„åŸºç¡€ä¸ŠåŠ ï¼Œé¡µé¢ä¸ä¼šæ›´æ–°ã€‚</p>
<p><strong>æ€ä¹ˆå¡«å‘ï¼Ÿ</strong></p>
<p>ç”¨<code>setNum</code>çš„ â€œå‡½æ•°å½¢å¼â€ï¼Œå®ƒèƒ½æ‹¿åˆ°æœ€æ–°çš„æ—§çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-title function_">setNum</span>(<span class="hljs-function">(<span class="hljs-params">prev</span>) =&gt;</span> prev + <span class="hljs-number">1</span>); <span class="hljs-comment">// âœ… ä¸ç®¡é—­åŒ…ï¼Œç›´æ¥æ‹¿æœ€æ–°prev</span>
</code></pre>
<h4 data-id="heading-7">é™·é˜± 2ï¼šuseEffect çš„ â€œä¾èµ–é¡¹è¿·è·¯â€</h4>
<p>å†çœ‹<code>Effect.jsx</code>é‡Œè¢«æ³¨é‡Šçš„ä»£ç ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">getData</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
        <span class="hljs-title function_">setNum</span>(data); <span class="hljs-comment">// ä¿®æ”¹num</span>
    })
}, [age]) <span class="hljs-comment">// âŒ ä¾èµ–é¡¹å†™äº†ageï¼Œä½†å®é™…æ²¡ç”¨åˆ°age</span>
</code></pre>
<p><strong>å‘åœ¨å“ªï¼Ÿ</strong></p>
<p><code>useEffect</code>çš„ä¾èµ–é¡¹æ•°ç»„å¿…é¡»åŒ…å« â€œå›è°ƒé‡Œç”¨åˆ°çš„æ‰€æœ‰å¤–éƒ¨å˜é‡â€â€”â€” è¿™é‡Œå›è°ƒé‡Œæ²¡ç”¨åˆ°<code>age</code>ï¼Œå´æŠŠ<code>age</code>å½“ä¾èµ–ï¼Œä¼šå¯¼è‡´<code>age</code>å˜åŒ–æ—¶é‡å¤è¯·æ±‚ï¼›åè¿‡æ¥ï¼Œå¦‚æœç”¨åˆ°äº†æŸä¸ªå˜é‡å´æ²¡å†™è¿›ä¾èµ–ï¼Œå°±ä¼šæ‹¿åˆ°æ—§å€¼ <strong>ï¼ˆé—­åŒ…é™·é˜±ï¼‰</strong>ã€‚</p>
<p><strong>æ€ä¹ˆå¡«å‘ï¼Ÿ</strong></p>
<p>ä¾èµ–é¡¹è¦ <strong>â€œè¯šå®â€</strong>ï¼šç”¨åˆ°å•¥å°±å†™å•¥ï¼Œæ²¡ç”¨åˆ°å°±åˆ«å†™ã€‚æ¯”å¦‚ä¸Šé¢çš„ä»£ç ï¼Œè¦ä¹ˆæŠŠ<code>age</code>ä»ä¾èµ–é‡Œåˆ æ‰ï¼Œè¦ä¹ˆåœ¨å›è°ƒé‡ŒçœŸæ­£ç”¨åˆ°<code>age</code>ã€‚</p>
<h4 data-id="heading-8">é™·é˜± 3ï¼šuseReducer çš„ â€œdispatch ä¸æ˜¯ä¸‡èƒ½è¯â€</h4>
<p>çœ‹<code>Trap.jsx</code>é‡Œçš„å®šæ—¶å™¨æ³¨é‡Šï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// console.log(count); // âŒ æ°¸è¿œæ‰“å°åˆå§‹å€¼0</span>
        <span class="hljs-comment">// setCount(count + 1); // åŒæ ·çš„é—­åŒ…å‘</span>
        <span class="hljs-comment">// setCount((prev) =&gt; prev + 1) // âœ… ç”¨å‡½æ•°å½¢å¼æ‰å¯¹</span>
    }, <span class="hljs-number">1000</span>)
}, [])
</code></pre>
<p><strong>å‘åœ¨å“ªï¼Ÿ</strong></p>
<p>å“ªæ€•ç”¨äº†<code>useReducer</code>ï¼Œå¦‚æœåœ¨<code>useEffect</code>ï¼ˆä¾èµ–ä¸ºç©ºï¼‰é‡Œç”¨<code>count</code>ï¼Œè¿˜æ˜¯ä¼šå› ä¸ºé—­åŒ…æ•è·æ—§å€¼ï¼Œå¯¼è‡´æ‹¿åˆ°çš„<code>count</code>æ°¸è¿œæ˜¯åˆå§‹å€¼ã€‚</p>
<p><strong>æ€ä¹ˆå¡«å‘ï¼Ÿ</strong></p>
<p>å’Œ<code>useState</code>ä¸€æ ·ï¼Œä¿®æ”¹çŠ¶æ€æ—¶ç”¨ â€œå‡½æ•°å½¢å¼â€ï¼›æˆ–è€…æŠŠ<code>count</code>åŠ å…¥<code>useEffect</code>çš„ä¾èµ–é¡¹ï¼ˆä½†è¦æ³¨æ„é‡å¤è§¦å‘çš„é—®é¢˜ï¼‰ã€‚</p>
<h4 data-id="heading-9">é™·é˜± 4ï¼šuseState çš„ â€œå¼‚æ­¥åˆå§‹åŒ–â€</h4>
<p>çœ‹<code>State.jsx</code>é‡Œçš„æ³¨é‡Šï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// âŒ useStateä¸æ”¯æŒå¼‚æ­¥å‡½æ•°åˆå§‹åŒ–</span>
<span class="hljs-comment">// const [num, setNum] = useState(async () =&gt; {</span>
<span class="hljs-comment">//     const res = await getDate();</span>
<span class="hljs-comment">//     return res;</span>
<span class="hljs-comment">// });</span>
</code></pre>
<p><strong>å‘åœ¨å“ªï¼Ÿ</strong></p>
<p><code>useState</code>çš„åˆå§‹åŒ–å‡½æ•°å¿…é¡»æ˜¯åŒæ­¥çš„ â€”â€” å¼‚æ­¥ä»£ç ä¼šç›´æ¥è¿”å›ä¸€ä¸ª<code>Promise</code>ï¼Œè€Œä¸æ˜¯ä½ æƒ³è¦çš„ç»“æœã€‚</p>
<p><strong>æ€ä¹ˆå¡«å‘ï¼Ÿ</strong></p>
<p>æŠŠå¼‚æ­¥åˆå§‹åŒ–é€»è¾‘æ”¾åˆ°<code>useEffect</code>é‡Œï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> [num, setNum] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">getDate</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-title function_">setNum</span>(res));
}, [])
</code></pre>
<h3 data-id="heading-10">ä¸‰ã€é¿å‘æ€»ç»“ï¼š Hooks çš„ â€œç”Ÿå­˜æ³•åˆ™â€</h3>
<ol>
<li><strong>useState ä¿®æ”¹çŠ¶æ€ï¼Œä¼˜å…ˆç”¨å‡½æ•°å½¢å¼</strong>ï¼š<code>setXxx(prev =&gt; prev + 1)</code>ï¼Œé¿å…é—­åŒ…æ—§å€¼ã€‚</li>
<li><strong>useEffect ä¾èµ–é¡¹è¦ â€œå®Œæ•´ä¸”è¯šå®â€</strong> ï¼šå›è°ƒé‡Œç”¨åˆ°çš„å˜é‡ï¼Œå¿…é¡»å†™è¿›ä¾èµ–æ•°ç»„ï¼›æ²¡ç”¨åˆ°çš„ï¼Œåˆ«çå†™ã€‚</li>
<li><strong>å¼‚æ­¥é€»è¾‘åˆ«å¾€ useState åˆå§‹åŒ–é‡Œå¡</strong>ï¼šäº¤ç»™<code>useEffect</code>ï¼ˆä¾èµ–ä¸ºç©ºï¼‰æ¥åšã€‚</li>
<li><strong>å®šæ—¶å™¨ / è®¢é˜…è¦è®°å¾—æ¸…ç†</strong>ï¼šåœ¨<code>useEffect</code>çš„è¿”å›å‡½æ•°é‡Œåšå¸è½½å‰çš„æ¸…ç†ï¼ˆæ¯”å¦‚æ¸…å®šæ—¶å™¨ï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-11">ç»“è¯­</h2>
<p><code>Hooks</code> çš„é™·é˜±ï¼Œæœ¬è´¨ä¸Šå¤§å¤šæ˜¯å¯¹ <strong>â€œé—­åŒ…â€ â€œReact æ¸²æŸ“æœºåˆ¶â€ å’Œ â€œHooks è®¾è®¡è§„åˆ™â€</strong> ç†è§£ä¸é€å½»çš„ç»“æœã€‚<strong>æ²¡æœ‰ç»å¯¹ â€œä¸‡èƒ½â€ çš„ APIï¼Œåªæœ‰ â€œç”¨å¯¹åœºæ™¯â€ çš„ç”¨æ³•</strong> â€”â€” æ¯”å¦‚ useState çš„å‡½æ•°å¼æ›´æ–°ã€useEffect çš„ä¾èµ–é¡¹è§„èŒƒï¼Œè¿™äº›çœ‹ä¼¼ç»†èŠ‚çš„ç‚¹ï¼Œæ°æ°æ˜¯é¿å¼€é™·é˜±çš„å…³é”®ã€‚å¸Œæœ›æœ¬æ–‡çš„æ¡ˆä¾‹èƒ½å¸®ä½ è·³å‡º â€œè¸©å‘ - debug - å†è¸©å‘â€ çš„å¾ªç¯ï¼Œåœ¨ä½¿ç”¨ Hooks æ—¶æ›´ä»å®¹ã€æ›´ç²¾å‡†ã€‚</p>
<p>è®°ä½:</p>
<blockquote>
<p>å¥½çš„ä»£ç <strong>ä¸æ˜¯ â€œå†™å‡ºæ¥çš„â€ï¼Œè€Œæ˜¯ â€œé¿å‘é¿å‡ºæ¥çš„â€</strong>ï¼Œå¤šç†è§£åº•å±‚é€»è¾‘ï¼Œå°‘ä¾èµ– â€œç»éªŒä¸»ä¹‰â€ï¼Œæ‰èƒ½çœŸæ­£æŒæ¡ <code>Hooks</code> çš„ç²¾é«“</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäº Microsoft Graph API ä¸ React Email æ„å»ºç°ä»£åŒ–é‚®ä»¶å‘é€ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7588300640598638598</link>    <guid>https://juejin.cn/post/7588300640598638598</guid>    <pubDate>2025-12-27T12:43:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588300640598638598" data-draft-id="7588152122186481718" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäº Microsoft Graph API ä¸ React Email æ„å»ºç°ä»£åŒ–é‚®ä»¶å‘é€ç³»ç»Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,React.js,Microsoft"/> <meta itemprop="datePublished" content="2025-12-27T12:43:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ˜äºŒä»£"/> <meta itemprop="url" content="https://juejin.cn/user/2349018966401277"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäº Microsoft Graph API ä¸ React Email æ„å»ºç°ä»£åŒ–é‚®ä»¶å‘é€ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2349018966401277/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ˜äºŒä»£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T12:43:34.000Z" title="Sat Dec 27 2025 12:43:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>åœ¨ä¼ ç»Ÿçš„ Node.js æœåŠ¡ç«¯å¼€å‘ä¸­ï¼Œä½¿ç”¨ Nodemailer é…åˆ SMTP åè®®æ˜¯å‘é€é‚®ä»¶çš„æ ‡å‡†åšæ³•ã€‚ç„¶è€Œï¼Œéšç€å®‰å…¨æ ‡å‡†çš„æå‡ï¼Œå¾®è½¯å·²å®£å¸ƒå°†åœ¨ 2026 å¹´å½»åº•åœæ­¢ Outlook/Microsoft 365 å¯¹ SMTP åŸºç¡€èº«ä»½éªŒè¯ï¼ˆBasic Authï¼‰çš„æ”¯æŒã€‚</p>
<p>ä¸ºäº†åº”å¯¹è¿™ä¸€å˜åŒ–ï¼Œæˆ‘ä»¬éœ€è¦è½¬å‘ Microsoft Graph APIã€‚åŒæ—¶ï¼Œä¸ºäº†è§£å†³é‚®ä»¶æ¨¡æ¿å¼€å‘ä¸­æ ·å¼éš¾ä»¥è°ƒè¯•ã€å…¼å®¹æ€§å·®çš„ç—›ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥ React Emailã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ç»“åˆè¿™ä¸¤è€…ï¼Œæ„å»ºä¸€å¥—ç¬¦åˆ Shadcn UI å®¡ç¾é£æ ¼ä¸”å…·å¤‡é«˜åº¦å¯é æ€§çš„é‚®ä»¶å‘é€ç³»ç»Ÿã€‚</p>
<hr/>
<h2 data-id="heading-1">æŠ€æœ¯æ ˆ</h2>
<ul>
<li><strong>React Email</strong>: ä½¿ç”¨ React ç»„ä»¶ç¼–å†™é‚®ä»¶æ¨¡æ¿ï¼Œæ”¯æŒ Tailwind CSSã€‚</li>
<li><strong>Nodemailer</strong>: æˆç†Ÿçš„ Node.js é‚®ä»¶å‘é€åº“ã€‚</li>
<li><strong>Microsoft Graph API</strong>: å¾®è½¯æä¾›çš„ç°ä»£åŒ– API æ¥å£ï¼Œç”¨äºæ›¿ä»£ä¼ ç»Ÿ SMTPã€‚</li>
<li><strong>MSAL Node</strong>: å¾®è½¯å®˜æ–¹æä¾›çš„èº«ä»½éªŒè¯åº“ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-2">1. æ¶æ„è®¾è®¡</h3>
<p>ç³»ç»Ÿåˆ†ä¸ºä¸‰å±‚ï¼šæ¨¡æ¿å±‚ã€é€»è¾‘å±‚å’Œä¼ è¾“å±‚ã€‚</p>
<ul>
<li><strong>æ¨¡æ¿å±‚</strong>ï¼šåˆ©ç”¨ React Email å®šä¹‰ UIï¼Œç¡®ä¿æ ·å¼åœ¨å„é‚®ä»¶å®¢æˆ·ç«¯ï¼ˆå¦‚ Gmailã€Outlookã€iOS Mailï¼‰ä¸­è¡¨ç°ä¸€è‡´ã€‚</li>
<li><strong>ä¼ è¾“å±‚</strong>ï¼šé€šè¿‡è‡ªå®šä¹‰ Nodemailer çš„ <code>Transport</code> æ¥å£ï¼Œå°†åº•å±‚çš„é‚®ä»¶å‘é€è¯·æ±‚å¯¼å‘ Microsoft Graph APIã€‚</li>
<li><strong>è®¤è¯å±‚</strong>ï¼šä½¿ç”¨ Azure åº”ç”¨æ³¨å†Œï¼ˆApp Registrationï¼‰è·å– OAuth2 ä»¤ç‰Œã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-3">2. å®ç° Microsoft Graph ä¼ è¾“å™¨</h3>
<p>æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªè‡ªå®šä¹‰çš„ <code>AzureTransport</code> ç±»ã€‚å®ƒçš„æ ¸å¿ƒé€»è¾‘æ˜¯ï¼šåœ¨å‘é€é‚®ä»¶å‰æ£€æŸ¥ä»¤ç‰Œæ˜¯å¦è¿‡æœŸï¼Œè‹¥è¿‡æœŸåˆ™é€šè¿‡å®¢æˆ·ç«¯å‡­æ®æµï¼ˆClient Credentials Flowï¼‰è·å–æ–°ä»¤ç‰Œï¼Œéšåè°ƒç”¨ Graph API çš„ <code>/sendMail</code> æ¥å£ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> msal <span class="hljs-keyword">from</span> <span class="hljs-string">'@azure/msal-node'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SentMessageInfo</span>, <span class="hljs-title class_">Transport</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'nodemailer'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">MailMessage</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'nodemailer/lib/mailer/mail-message'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AzureTransport</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Transport</span>&lt;<span class="hljs-title class_">SentMessageInfo</span>&gt; {
  name = <span class="hljs-string">'Azure'</span>;
  version = <span class="hljs-string">'0.1'</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">msalClient</span>: msal.<span class="hljs-property">ConfidentialClientApplication</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">tokenInfo</span>: msal.<span class="hljs-property">AuthenticationResult</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> config: <span class="hljs-built_in">any</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">msalClient</span> = <span class="hljs-keyword">new</span> msal.<span class="hljs-title class_">ConfidentialClientApplication</span>({
      <span class="hljs-attr">auth</span>: {
        <span class="hljs-attr">clientId</span>: config.<span class="hljs-property">clientId</span>,
        <span class="hljs-attr">clientSecret</span>: config.<span class="hljs-property">clientSecret</span>,
        <span class="hljs-attr">authority</span>: <span class="hljs-string">`https://login.microsoftonline.com/<span class="hljs-subst">${config.tenantId}</span>`</span>
      }
    });
  }

  <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">getAccessToken</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">tokenInfo</span> || (<span class="hljs-variable language_">this</span>.<span class="hljs-property">tokenInfo</span>.<span class="hljs-property">expiresOn</span> &amp;&amp; <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">tokenInfo</span>.<span class="hljs-property">expiresOn</span>.<span class="hljs-title function_">getTime</span>())) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">tokenInfo</span> = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">msalClient</span>.<span class="hljs-title function_">acquireTokenByClientCredential</span>({
        <span class="hljs-attr">scopes</span>: [<span class="hljs-string">'https://graph.microsoft.com/.default'</span>]
      });
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">tokenInfo</span>!.<span class="hljs-property">accessToken</span>;
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">send</span>(<span class="hljs-params">mail: MailMessage, callback: <span class="hljs-built_in">any</span></span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> { subject, <span class="hljs-keyword">from</span>, to, html, text } = mail.<span class="hljs-property">data</span>;
      <span class="hljs-keyword">const</span> accessToken = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAccessToken</span>();

      <span class="hljs-keyword">const</span> mailMessage = {
        <span class="hljs-attr">message</span>: {
          subject,
          <span class="hljs-attr">body</span>: { <span class="hljs-attr">content</span>: html || text, <span class="hljs-attr">contentType</span>: html ? <span class="hljs-string">'HTML'</span> : <span class="hljs-string">'Text'</span> },
          <span class="hljs-attr">toRecipients</span>: (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(to) ? to : [to]).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">addr: <span class="hljs-built_in">any</span></span>) =&gt;</span> ({
            <span class="hljs-attr">emailAddress</span>: { <span class="hljs-attr">address</span>: <span class="hljs-keyword">typeof</span> addr === <span class="hljs-string">'string'</span> ? addr : addr.<span class="hljs-property">address</span> }
          })),
        }
      };

      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`https://graph.microsoft.com/v1.0/users/<span class="hljs-subst">${<span class="hljs-keyword">from</span>}</span>/sendMail`</span>, {
        <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
        <span class="hljs-attr">headers</span>: { <span class="hljs-title class_">Authorization</span>: <span class="hljs-string">`Bearer <span class="hljs-subst">${accessToken}</span>`</span>, <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> },
        <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(mailMessage)
      });

      <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-keyword">await</span> response.<span class="hljs-title function_">text</span>());
      <span class="hljs-title function_">callback</span>(<span class="hljs-literal">null</span>, { <span class="hljs-attr">messageId</span>: response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'request-id'</span>) });
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-title function_">callback</span>(error, <span class="hljs-literal">null</span>);
    }
  }
}

</code></pre>
<hr/>
<h4 data-id="heading-4">3. ä½¿ç”¨ React Email ç¼–å†™ Shadcn é£æ ¼æ¨¡æ¿</h4>
<p>Shadcn UI çš„æ ¸å¿ƒåœ¨äºç®€æ´çš„ Zinc è‰²è°ƒå’Œè‰¯å¥½çš„é—´è·ã€‚ä»¥ä¸‹æ˜¯ä¸ºç”¨æˆ·ç¡®è®¤è®¾è®¡çš„é€šç”¨æ¨¡æ¿ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Body</span>, <span class="hljs-title class_">Container</span>, <span class="hljs-title class_">Head</span>, <span class="hljs-title class_">Heading</span>, <span class="hljs-title class_">Html</span>, <span class="hljs-title class_">Preview</span>, <span class="hljs-title class_">Text</span>, <span class="hljs-title class_">Tailwind</span>, <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@react-email/components"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">RequestReceivedEmail</span> = (<span class="hljs-params"/>) =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Html</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Head</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Preview</span>&gt;</span>Confirmation of your request<span class="hljs-tag">&lt;/<span class="hljs-name">Preview</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Tailwind</span> <span class="hljs-attr">config</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">theme:</span> { <span class="hljs-attr">extend:</span> { <span class="hljs-attr">colors:</span> { <span class="hljs-attr">brand:</span> "#<span class="hljs-attr">09090b</span>" } } } }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Body</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-white font-sans text-zinc-950"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Container</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"border border-zinc-200 rounded-lg my-10 mx-auto p-8 max-w-[465px]"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Heading</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-2xl font-semibold tracking-tight"</span>&gt;</span>Request Received<span class="hljs-tag">&lt;/<span class="hljs-name">Heading</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-sm leading-6 text-zinc-600 mt-4"</span>&gt;</span>
            We have successfully received your information. Our team will review the details and respond accordingly.
          <span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-zinc-950 rounded-md text-white text-sm font-medium px-6 py-3 mt-4 no-underline inline-block"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://app.aands.ai"</span>&gt;</span>
            Access Portal
          <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Container</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Body</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Tailwind</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">Html</span>&gt;</span></span>
);

</code></pre>
<hr/>
<h3 data-id="heading-5">4. ä¸šåŠ¡é€»è¾‘æ•´åˆ</h3>
<p>æœ€åï¼Œæˆ‘ä»¬å°†ä¸Šè¿°æ¨¡å—æ•´åˆåˆ°ä¸€ä¸ªæœåŠ¡å‡½æ•°ä¸­ã€‚è¯¥å‡½æ•°ä¼šåŒæ—¶å‘ç”¨æˆ·å‘é€å›æ‰§ï¼Œå¹¶å‘è¿è¥å›¢é˜Ÿå‘é€å†…éƒ¨é€šçŸ¥ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { render } <span class="hljs-keyword">from</span> <span class="hljs-string">"@react-email/components"</span>;
<span class="hljs-keyword">import</span> nodemailer <span class="hljs-keyword">from</span> <span class="hljs-string">"nodemailer"</span>;

<span class="hljs-keyword">const</span> transporter = nodemailer.<span class="hljs-title function_">createTransport</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">AzureTransport</span>({
  <span class="hljs-attr">clientId</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">AZURE_CLIENT_ID</span>,
  <span class="hljs-attr">clientSecret</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">AZURE_CLIENT_SECRET</span>,
  <span class="hljs-attr">tenantId</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">AZURE_TENANT_ID</span>
}));

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">sendNotification</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">userData: <span class="hljs-built_in">any</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> userHtml = <span class="hljs-keyword">await</span> <span class="hljs-title function_">render</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">RequestReceivedEmail</span> /&gt;</span></span>);
  
  <span class="hljs-keyword">await</span> transporter.<span class="hljs-title function_">sendMail</span>({
    <span class="hljs-attr">from</span>: <span class="hljs-string">"noreply@yourdomain.com"</span>,
    <span class="hljs-attr">to</span>: userData.<span class="hljs-property">email</span>,
    <span class="hljs-attr">subject</span>: <span class="hljs-string">"Request Confirmation"</span>,
    <span class="hljs-attr">html</span>: userHtml
  });
};

</code></pre>
<hr/>
<h2 data-id="heading-6">æ€»ç»“</h2>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬ä¸ä»…è§£å†³äº† SMTP è®¤è¯å³å°†è¿‡æœŸçš„åˆè§„æ€§é—®é¢˜ï¼Œè¿˜æå‡äº†é‚®ä»¶çš„è§†è§‰è´¨é‡ã€‚Microsoft Graph API æä¾›äº†æ¯”ä¼ ç»Ÿ SMTP æ›´å¼ºçš„å¯ç›‘æ§æ€§å’Œå®‰å…¨æ€§ï¼Œè€Œ React Email åˆ™æå¤§åœ°æ”¹å–„äº†é‚®ä»¶å¼€å‘çš„å¼€å‘è€…ä½“éªŒã€‚</p>
<p>åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¯·ç¡®ä¿åœ¨ Azure é—¨æˆ·ä¸­ä¸ºä½ çš„åº”ç”¨æˆäºˆäº† <code>Mail.Send</code> æƒé™ï¼Œå¹¶æ ¹æ®ä¸šåŠ¡éœ€æ±‚é…ç½®ç¯å¢ƒå˜é‡ã€‚</p>
<h2 data-id="heading-7">å‚è€ƒèµ„æ–™</h2>
<ol>
<li><a href="https://juejin.cn/post/7157980257155285005" target="_blank" title="https://juejin.cn/post/7157980257155285005">æ„å»ºå’Œå‘é€ç”µå­é‚®ä»¶çš„Reactç»„ä»¶çš„å®ä¾‹æ•™ç¨‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.to%2Fgevik%2Fsending-emails-via-outlook-with-nodemailer-and-microsoft-graph-b74" target="_blank" title="https://dev.to/gevik/sending-emails-via-outlook-with-nodemailer-and-microsoft-graph-b74" ref="nofollow noopener noreferrer">Sending Emails via Outlook with Nodemailer and Microsoft Graph</a></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨ Vue 3 æ„å»ºä»»åŠ¡æ¸…å•ï¼šå“åº”å¼ç¼–ç¨‹çš„ä¼˜é›…å®è·µ]]></title>    <link>https://juejin.cn/post/7588042910198317106</link>    <guid>https://juejin.cn/post/7588042910198317106</guid>    <pubDate>2025-12-27T13:14:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588042910198317106" data-draft-id="7588080521445277742" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨ Vue 3 æ„å»ºä»»åŠ¡æ¸…å•ï¼šå“åº”å¼ç¼–ç¨‹çš„ä¼˜é›…å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-27T13:14:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Zyx2007"/> <meta itemprop="url" content="https://juejin.cn/user/3924597867554890"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨ Vue 3 æ„å»ºä»»åŠ¡æ¸…å•ï¼šå“åº”å¼ç¼–ç¨‹çš„ä¼˜é›…å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3924597867554890/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Zyx2007
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T13:14:45.000Z" title="Sat Dec 27 2025 13:14:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œä»»åŠ¡æ¸…å•ï¼ˆTodosï¼‰æ˜¯ä¸€ä¸ªç»å…¸ç»ƒä¹ é¡¹ç›®ã€‚å®ƒè™½åŠŸèƒ½ç®€å•ï¼Œå´èƒ½å®Œæ•´ä½“ç°æ•°æ®é©±åŠ¨ã€çŠ¶æ€ç®¡ç†ä¸ç”¨æˆ·äº¤äº’çš„æ ¸å¿ƒæ€æƒ³ã€‚è‹¥ç”¨ä¼ ç»Ÿ DOM æ“ä½œå®ç°ï¼Œä»£ç å¾€å¾€å†—é•¿ä¸”éš¾ä»¥ç»´æŠ¤ï¼›è€Œå€ŸåŠ© Vue 3 çš„ç»„åˆå¼ API ä¸å“åº”å¼ç³»ç»Ÿï¼Œæˆ‘ä»¬åªéœ€å…³æ³¨â€œæ•°æ®å¦‚ä½•å˜åŒ–â€ï¼Œç•Œé¢ä¾¿ä¼šè‡ªåŠ¨åŒæ­¥æ›´æ–°ã€‚è¿™ç§å£°æ˜å¼å¼€å‘èŒƒå¼ï¼Œä¸ä»…æå‡äº†å¼€å‘æ•ˆç‡ï¼Œä¹Ÿè®©ä»£ç é€»è¾‘æ›´æ¸…æ™°ã€æ›´æ˜“æµ‹è¯•ã€‚</p>
<h2 data-id="heading-0">ä»å‘½ä»¤å¼åˆ°å£°æ˜å¼ï¼šæ€ç»´çš„è½¬å˜</h2>
<p>ä¼ ç»Ÿ JavaScript å¼€å‘é€šå¸¸é‡‡ç”¨<strong>å‘½ä»¤å¼ç¼–ç¨‹</strong>ï¼šå…ˆè·å– DOM å…ƒç´ ï¼Œå†ç›‘å¬äº‹ä»¶ï¼Œæœ€åæ‰‹åŠ¨ä¿®æ”¹å†…å®¹ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">app</span> = document.getElementById(<span class="hljs-string">'app'</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">input</span> = document.getElementById(<span class="hljs-string">'todo-input'</span>)<span class="hljs-comment">;</span>
input.addEventListener('change', (e) =&gt; {
  <span class="hljs-attr">app.innerHTML</span> = e.target.value.trim()<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™ç§æ–¹å¼ç›´æ¥æ“ä½œæ¸²æŸ“å¼•æ“ï¼Œæ¯ä¸€æ­¥éƒ½éœ€ç²¾ç¡®æ§åˆ¶ã€‚ä¸€æ—¦é€»è¾‘å¤æ‚ï¼ˆå¦‚å¢åˆ æ”¹æŸ¥ã€ç­›é€‰ã€å…¨é€‰ï¼‰ï¼Œä»£ç ä¼šè¿…é€Ÿè†¨èƒ€ï¼Œä¸”å®¹æ˜“å› çŠ¶æ€ä¸ä¸€è‡´å¯¼è‡´ bugã€‚</p>
<p>è€Œ Vue çš„æ ¸å¿ƒç†å¿µæ˜¯<strong>å“åº”å¼æ•°æ®é©±åŠ¨</strong>ï¼šä½ ä¸å†æ“ä½œ DOMï¼Œè€Œæ˜¯å®šä¹‰æ•°æ®ï¼›å½“æ•°æ®å˜åŒ–æ—¶ï¼Œæ¡†æ¶è‡ªåŠ¨æ›´æ–°è§†å›¾ã€‚å¼€å‘è€…åªéœ€æ€è€ƒâ€œä¸šåŠ¡çŠ¶æ€æ˜¯ä»€ä¹ˆâ€ï¼Œè€Œéâ€œé¡µé¢è¯¥æ€ä¹ˆæ”¹â€ã€‚</p>
<h2 data-id="heading-1">å“åº”å¼çŠ¶æ€ï¼šç”¨ <code>ref</code> ç®¡ç†æ•°æ®</h2>
<p>åœ¨ Vue 3 çš„ <code>&lt;script setup&gt;</code> ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>ref</code> åˆ›å»ºå“åº”å¼å˜é‡ï¼š</p>
<pre><code class="hljs language-php" lang="php">&lt;script setup&gt;
import { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">title</span> = <span class="hljs-title function_ invoke__">ref</span>(<span class="hljs-string">'Todos ä»»åŠ¡æ¸…å•'</span>)
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">todos</span> = <span class="hljs-title function_ invoke__">ref</span>([
  { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'æ‰“ç‹è€…'</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'åƒé¥­'</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">true</span> }
])
&lt;/script&gt;
</code></pre>
<p><code>title</code> å’Œ <code>todos</code> éƒ½æ˜¯å“åº”å¼å¼•ç”¨å¯¹è±¡ã€‚é€šè¿‡ <code>title.value = 'æ–°æ ‡é¢˜'</code> ä¿®æ”¹å€¼åï¼Œæ¨¡æ¿ä¸­æ‰€æœ‰ä½¿ç”¨ <code>{{ title }}</code> çš„åœ°æ–¹éƒ½ä¼šè‡ªåŠ¨åˆ·æ–°ã€‚è¿™ç§æœºåˆ¶å°† UI ä¸çŠ¶æ€ç´§å¯†ç»‘å®šï¼Œæ¶ˆé™¤äº†æ‰‹åŠ¨ DOM æ“ä½œçš„ç¹çã€‚</p>
<h2 data-id="heading-2">æ¨¡æ¿æŒ‡ä»¤ï¼šç®€æ´è¡¨è¾¾é€»è¾‘</h2>
<p>Vue æä¾›ä¸€ç³»åˆ—æŒ‡ä»¤ï¼Œä»¥å£°æ˜æ–¹å¼æè¿° UI è¡Œä¸ºï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;input <span class="hljs-attr">v-model</span>=<span class="hljs-string">"title"</span> @keyup.enter=<span class="hljs-string">"addTodo"</span> /&gt;
&lt;ul <span class="hljs-attr">v-if</span>=<span class="hljs-string">"todos.length"</span>&gt;
  &lt;li <span class="hljs-attr">v-for</span>=<span class="hljs-string">"todo in todos"</span> :key=<span class="hljs-string">"todo.id"</span>&gt;
    &lt;input <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> v-model=<span class="hljs-string">"todo.done"</span> /&gt;
    &lt;span :<span class="hljs-attr">class</span>=<span class="hljs-string">"{ 'done': todo.done }"</span>&gt;{{ todo.title }}&lt;/span&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</code></pre>
<ul>
<li><code>v-model</code> å®ç°åŒå‘ç»‘å®šï¼Œè¾“å…¥æ¡†å†…å®¹ä¸ <code>title</code> åŒæ­¥ï¼›</li>
<li><code>@keyup.enter</code> ç›‘å¬å›è½¦é”®ï¼Œè§¦å‘æ·»åŠ ä»»åŠ¡ï¼›</li>
<li><code>v-for</code> å¾ªç¯æ¸²æŸ“åˆ—è¡¨ï¼Œæ— éœ€æ‰‹åŠ¨æ‹¼æ¥ HTMLï¼›</li>
<li><code>:class</code> åŠ¨æ€ç»‘å®šæ ·å¼ï¼Œå®Œæˆé¡¹æ˜¾ç¤ºåˆ é™¤çº¿ï¼›</li>
<li><code>v-if</code> æ§åˆ¶â€œæš‚æ— ä»»åŠ¡â€æç¤ºçš„æ˜¾ç¤ºæ—¶æœºã€‚</li>
</ul>
<p>è¿™äº›æŒ‡ä»¤å°†å¸¸è§äº¤äº’æ¨¡å¼å°è£…æˆè¯­ä¹‰åŒ–è¯­æ³•ï¼Œå¤§å¹…é™ä½æ ·æ¿ä»£ç é‡ã€‚</p>
<h2 data-id="heading-3">è®¡ç®—å±æ€§ï¼šé«˜æ•ˆæ´¾ç”ŸçŠ¶æ€</h2>
<p>ä»»åŠ¡æ¸…å•éœ€è¦å®æ—¶æ˜¾ç¤ºâ€œæœªå®Œæˆä»»åŠ¡æ•°â€å’Œâ€œå…¨é€‰â€çŠ¶æ€ã€‚è‹¥åœ¨æ¨¡æ¿ä¸­ç›´æ¥å†™ <code>todos.filter(...).length</code>ï¼Œæ¯æ¬¡æ¸²æŸ“éƒ½ä¼šé‡æ–°è®¡ç®—ï¼Œå½±å“æ€§èƒ½ã€‚Vue çš„ <strong><code>computed</code></strong> æä¾›äº†ç¼“å­˜æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">active</span> = computed(() =&gt; {
  return todos.value.filter(<span class="hljs-attr">todo</span> =&gt; !todo.done).length
})
</code></pre>
<p><code>active</code> æ˜¯ä¸€ä¸ªè®¡ç®—å±æ€§ï¼Œåªæœ‰å½“ <code>todos</code> å‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šé‡æ–°æ±‚å€¼ã€‚æ¨¡æ¿ä¸­ä½¿ç”¨ <code>{{ active }}</code> å³å¯è·å¾—æœ€æ–°ç»“æœï¼Œä¸”æ€§èƒ½æœ€ä¼˜ã€‚</p>
<p>æ›´å·§å¦™çš„æ˜¯ï¼Œ<code>computed</code> æ”¯æŒ <strong>getter/setter</strong>ï¼Œå¯ç”¨äºå®ç°â€œå…¨é€‰â€åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> allDone = <span class="hljs-title function_">computed</span>({
  <span class="hljs-title function_">get</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> todos.<span class="hljs-property">value</span>.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">done</span>)
  },
  <span class="hljs-title function_">set</span>(<span class="hljs-params">value</span>) {
    todos.<span class="hljs-property">value</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">done</span> = value)
  }
})
</code></pre>
<p>å½“ç”¨æˆ·å‹¾é€‰â€œå…¨é€‰â€å¤é€‰æ¡†æ—¶ï¼Œ<code>set</code> è¢«è°ƒç”¨ï¼Œæ‰¹é‡æ›´æ–°æ‰€æœ‰ä»»åŠ¡çŠ¶æ€ï¼›åä¹‹ï¼Œè‹¥éƒ¨åˆ†ä»»åŠ¡è¢«å–æ¶ˆï¼Œ<code>get</code> è¿”å› <code>false</code>ï¼Œå¤é€‰æ¡†è‡ªåŠ¨å–æ¶ˆã€‚è¿™ç§åŒå‘è”åŠ¨ä»…éœ€å‡ è¡Œä»£ç ï¼Œå´è¦†ç›–äº†å¤æ‚çš„äº¤äº’é€»è¾‘ã€‚</p>
<h2 data-id="heading-4">æ·»åŠ ä»»åŠ¡ï¼šèšç„¦æ•°æ®å˜æ›´</h2>
<p>æ–°å¢ä»»åŠ¡çš„æœ¬è´¨æ˜¯å‘ <code>todos</code> æ•°ç»„è¿½åŠ ä¸€é¡¹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">addTodo</span> = () =&gt; {
  <span class="hljs-keyword">if</span> (!title.value.<span class="hljs-title function_ invoke__">trim</span>()) <span class="hljs-keyword">return</span>
  todos.value.<span class="hljs-title function_ invoke__">push</span>({
    <span class="hljs-attr">id</span>: Date.<span class="hljs-title function_ invoke__">now</span>(),
    <span class="hljs-attr">title</span>: title.value,
    <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span>
  })
  title.value = <span class="hljs-string">''</span>
}
</code></pre>
<p>è¿™é‡Œæ²¡æœ‰ <code>createElement</code>ã€<code>appendChild</code> æˆ– <code>innerHTML</code>ï¼Œåªæœ‰å¯¹æ•°æ®çš„æ“ä½œã€‚Vue ä¼šè‡ªåŠ¨æ£€æµ‹æ•°ç»„å˜æ›´ï¼Œå¹¶é«˜æ•ˆæ›´æ–° DOMã€‚è¿™ç§â€œæ•°æ®å³ UIâ€çš„æ€æƒ³ï¼Œè®©ä¸šåŠ¡é€»è¾‘ä¸è§†å›¾å®Œå…¨è§£è€¦ã€‚</p>
<h2 data-id="heading-5">æ ·å¼ä¸ä½“éªŒä¼˜åŒ–</h2>
<p>é€šè¿‡åŠ¨æ€ç±»åï¼Œè½»æ¾å®ç°è§†è§‰åé¦ˆï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.done</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;
  <span class="hljs-attribute">text-decoration</span>: line-through;
}
</code></pre>
<p>é…åˆ <code>:class="{ 'done': todo.done }"</code>ï¼Œå®Œæˆçš„ä»»åŠ¡è‡ªåŠ¨å˜ç°å¹¶åŠ åˆ é™¤çº¿ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p>
<h2 data-id="heading-6">æ€»ç»“</h2>
<p>è¿™ä¸ª Todos åº”ç”¨è™½å°ï¼Œå´å®Œæ•´å±•ç¤ºäº† Vue 3 çš„æ ¸å¿ƒä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>å“åº”å¼ç³»ç»Ÿ</strong>è®©çŠ¶æ€ä¸è§†å›¾è‡ªåŠ¨åŒæ­¥ï¼›</li>
<li><strong>ç»„åˆå¼ API</strong> æä¾›çµæ´»ã€å¯å¤ç”¨çš„é€»è¾‘ç»„ç»‡æ–¹å¼ï¼›</li>
<li><strong>æ¨¡æ¿æŒ‡ä»¤</strong> å°†å¸¸è§äº¤äº’æŠ½è±¡ä¸ºç®€æ´è¯­æ³•ï¼›</li>
<li><strong>è®¡ç®—å±æ€§</strong> åœ¨ä¿è¯æ€§èƒ½çš„åŒæ—¶ç®€åŒ–æ´¾ç”ŸçŠ¶æ€ç®¡ç†ã€‚</li>
</ul>
<p>ç›¸æ¯”ä¼ ç»Ÿ DOM æ“ä½œï¼ŒVue è®©å¼€å‘è€…ä»â€œå¦‚ä½•æ”¹é¡µé¢â€è½¬å‘â€œæ•°æ®è¯¥æ˜¯ä»€ä¹ˆæ ·â€ï¼Œæå¤§é™ä½äº†å¿ƒæ™ºè´Ÿæ‹…ã€‚å¯¹äºåˆå­¦è€…ï¼Œè¿™æ˜¯å¿«é€Ÿä¸Šæ‰‹ç°ä»£å‰ç«¯å¼€å‘çš„æ·å¾„ï¼›å¯¹äºèµ„æ·±å·¥ç¨‹å¸ˆï¼Œè¿™æ˜¯æ„å»ºå¯ç»´æŠ¤ã€å¯æ‰©å±•åº”ç”¨çš„åšå®åŸºç¡€ã€‚æ­£å¦‚é‚£å¥è€è¯ï¼šâ€œå½“ä½ ä¸“æ³¨äºæ•°æ®ï¼ŒUI è‡ªä¼šè·Ÿéšã€‚â€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[wxå¾®ä¿¡å°ç¨‹åºéƒ¨åˆ†é€»è¾‘]]></title>    <link>https://juejin.cn/post/7588092534161833984</link>    <guid>https://juejin.cn/post/7588092534161833984</guid>    <pubDate>2025-12-27T13:53:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588092534161833984" data-draft-id="7399604686989656075" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="wxå¾®ä¿¡å°ç¨‹åºéƒ¨åˆ†é€»è¾‘"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-27T13:53:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·27965604270"/> <meta itemprop="url" content="https://juejin.cn/user/317130507551981"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            wxå¾®ä¿¡å°ç¨‹åºéƒ¨åˆ†é€»è¾‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/317130507551981/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·27965604270
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T13:53:47.000Z" title="Sat Dec 27 2025 13:53:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"w-main"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">text</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"w-title"</span>&gt;</span>{{title}}<span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">text</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"w-desc"</span>&gt;</span>{{desc}}<span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">block</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å¤´åƒé€‰æ‹©æŒ‰é’®ï¼Œæ ¹æ®éœ€è¦å†³å®šæ˜¯å¦æ˜¾ç¤º --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nickname-wrapper"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">text</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nickname-label"</span>&gt;</span>å¤´åƒ<span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"avatar-wrapper"</span> <span class="hljs-attr">open-type</span>=<span class="hljs-string">"chooseAvatar"</span> <span class="hljs-attr">bind:chooseavatar</span>=<span class="hljs-string">"onChooseAvatar"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">image</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"avatar"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"{{userInfo.avatarUrl}}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">image</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nickname-wrapper"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">text</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nickname-label"</span>&gt;</span>æ˜µç§°<span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"nickname"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nickname-input"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥æ˜µç§°"</span> <span class="hljs-attr">bind:change</span>=<span class="hljs-string">"onInputChange"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">block</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">block</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">bindtap</span>=<span class="hljs-string">"onAuthLogin"</span> <span class="hljs-attr">open-type</span>=<span class="hljs-string">"getUserInfo"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"w-login-btn"</span> <span class="hljs-attr">theme</span>=<span class="hljs-string">'primary'</span>&gt;</span>
      ç¡®è®¤æˆæƒç™»å½•
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">block</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">getApp</span>(); <span class="hljs-comment">//é€šè¿‡getApp()æ–¹æ³•ï¼Œèƒ½å¤Ÿè·å–Appçš„å®ä¾‹ï¼Œä»è€Œè·å–app.jsæ–‡ä»¶ä¸­å®šä¹‰çš„å…¬å…±æ•°æ®globalData</span>
<span class="hljs-comment">// const defaultAvatarUrl = '../../images/no-login.png' // å…ˆå°†avatarUrlè®¾ç½®ä¸ºä¸€ä¸ªå¸¸é‡</span>
<span class="hljs-keyword">const</span> defaultAvatarUrl = <span class="hljs-string">'https://mmbiz.qpic.cn/mmbiz/icTdbqWNOwNRna42FI242Lcia07jQodd2FJGIYQfG0LAJGFxM4FbnQP6yfMxBgJ0F3YRqJCJ1aPAK2dQagdusBZg/0'</span>

<span class="hljs-title class_">Page</span>({
  <span class="hljs-comment">/**
   * é¡µé¢çš„åˆå§‹æ•°æ®
   */</span>
  <span class="hljs-attr">data</span>: {
    <span class="hljs-attr">title</span>: <span class="hljs-string">'ç™»å½•ç¡®è®¤'</span>,
    <span class="hljs-attr">desc</span>: <span class="hljs-string">'ä¸ºä¿éšœæ‚¨çš„è´¦æˆ·å®‰å…¨ï¼Œè¯·ç¡®è®¤æ˜¯æœ¬äººç™»å½•'</span>,
    <span class="hljs-attr">openId</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">sessionKey</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">scene</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">userInfo</span>: {
      <span class="hljs-attr">avatarUrl</span>: defaultAvatarUrl,
      <span class="hljs-attr">nickName</span>: <span class="hljs-string">''</span>,
      <span class="hljs-attr">avatarUrlBase64</span>: <span class="hljs-string">''</span>
    },
    <span class="hljs-attr">hasUserInfo</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">canIUseNicknameComp</span>: wx.<span class="hljs-title function_">canIUse</span>(<span class="hljs-string">'input.type.nickname'</span>),
  },

  <span class="hljs-comment">/**
   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åŠ è½½
   */</span>
  <span class="hljs-title function_">onLoad</span>(<span class="hljs-params">options</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>({
      <span class="hljs-attr">scene</span>: <span class="hljs-built_in">decodeURIComponent</span>(options.<span class="hljs-property">scene</span>)
    })
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getOpenId</span>();
  },

  <span class="hljs-title function_">getOpenId</span>(<span class="hljs-params"/>) {
    wx.<span class="hljs-title function_">login</span>({
      <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç”¨æˆ·ç™»å½•çš„ä¸´æ—¶å‡­è¯æ˜¯ï¼š"</span> + res.<span class="hljs-property">code</span>);
        <span class="hljs-comment">// ä¿å­˜thisåˆ°å˜é‡thatä¸­</span>
        <span class="hljs-keyword">const</span> that = <span class="hljs-variable language_">this</span>;
        wx.<span class="hljs-title function_">request</span>({
          <span class="hljs-attr">url</span>: <span class="hljs-string">'https://juejin.plus/prod-api/wx/public/getOpenId'</span>,
          <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
          <span class="hljs-attr">data</span>: {
            <span class="hljs-attr">code</span>: res.<span class="hljs-property">code</span>,
            <span class="hljs-attr">scene</span>: that.<span class="hljs-property">data</span>.<span class="hljs-property">scene</span> ? that.<span class="hljs-property">data</span>.<span class="hljs-property">scene</span> : <span class="hljs-string">'-1'</span> <span class="hljs-comment">// ä½¿ç”¨thatä»£æ›¿this</span>
          },
          <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) {
            <span class="hljs-keyword">if</span> (res.<span class="hljs-property">data</span>.<span class="hljs-property">code</span> == <span class="hljs-number">200</span>) {
              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç”¨æˆ·openidï¼š"</span>, res);
              <span class="hljs-comment">// ä½¿ç”¨å˜é‡thatæ¥å¼•ç”¨é¡µé¢å®ä¾‹</span>
              that.<span class="hljs-title function_">setData</span>({
                <span class="hljs-attr">openId</span>: res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">openId</span>,
                <span class="hljs-attr">sessionKey</span>: res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">sessionKey</span>
              });
            } <span class="hljs-keyword">else</span> {
              wx.<span class="hljs-title function_">showToast</span>({
                <span class="hljs-attr">title</span>: <span class="hljs-string">"ç”¨æˆ·openidè·å–å¤±è´¥"</span>,
                <span class="hljs-attr">duration</span>: <span class="hljs-number">1000</span>,
                <span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span>,
                <span class="hljs-attr">mask</span>: <span class="hljs-literal">true</span>
              })
            }
          },
          <span class="hljs-attr">fail</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å¤±è´¥"</span>)
          }
        });
      }
    });
  },

  <span class="hljs-title function_">onAuthLogin</span>(<span class="hljs-params">e</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">userInfo</span>.<span class="hljs-property">avatarUrlBase64</span> === <span class="hljs-string">''</span>) {
      wx.<span class="hljs-title function_">showToast</span>({
        <span class="hljs-attr">title</span>: <span class="hljs-string">"è¯·é€‰æ‹©å¤´åƒ"</span>,
        <span class="hljs-attr">duration</span>: <span class="hljs-number">1000</span>,
        <span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span>,
        <span class="hljs-attr">mask</span>: <span class="hljs-literal">true</span>
      })
      <span class="hljs-keyword">return</span>
    }
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">userInfo</span>.<span class="hljs-property">nickName</span> === <span class="hljs-string">''</span>) {
      wx.<span class="hljs-title function_">showToast</span>({
        <span class="hljs-attr">title</span>: <span class="hljs-string">"è¯·è¾“å…¥æ˜µç§°"</span>,
        <span class="hljs-attr">duration</span>: <span class="hljs-number">1000</span>,
        <span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span>,
        <span class="hljs-attr">mask</span>: <span class="hljs-literal">true</span>
      })
      <span class="hljs-keyword">return</span>
    }
    wx.<span class="hljs-title function_">getUserProfile</span>({
      <span class="hljs-attr">desc</span>: <span class="hljs-string">'ç”¨äºå®Œå–„ç”¨æˆ·èµ„æ–™'</span>,
      <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> that = <span class="hljs-variable language_">this</span>;
        that.<span class="hljs-title function_">setData</span>({
          <span class="hljs-attr">isLogin</span>: <span class="hljs-literal">true</span>
        });
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç”¨æˆ·ä¿¡æ¯ï¼š"</span>, res)
        <span class="hljs-keyword">var</span> params = {
          <span class="hljs-string">'openId'</span>: that.<span class="hljs-property">data</span>.<span class="hljs-property">openId</span>,
          <span class="hljs-string">'sessionKey'</span>: that.<span class="hljs-property">data</span>.<span class="hljs-property">sessionKey</span>,
          <span class="hljs-string">'encryptedData'</span>: res.<span class="hljs-property">encryptedData</span>,
          <span class="hljs-string">'rawData'</span>: res.<span class="hljs-property">rawData</span>,
          <span class="hljs-string">'signature'</span>: res.<span class="hljs-property">signature</span>,
          <span class="hljs-string">'iv'</span>: res.<span class="hljs-property">iv</span>,
          <span class="hljs-string">'scene'</span>: that.<span class="hljs-property">data</span>.<span class="hljs-property">scene</span> ? that.<span class="hljs-property">data</span>.<span class="hljs-property">scene</span> : <span class="hljs-string">'-1'</span>,
          <span class="hljs-string">'nickName'</span>: that.<span class="hljs-property">data</span>.<span class="hljs-property">userInfo</span>.<span class="hljs-property">nickName</span>,
          <span class="hljs-string">'avatarUrlBase64'</span>: that.<span class="hljs-property">data</span>.<span class="hljs-property">userInfo</span>.<span class="hljs-property">avatarUrlBase64</span>,
        }
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"param:"</span>, params)
        wx.<span class="hljs-title function_">request</span>({
          <span class="hljs-attr">url</span>: <span class="hljs-string">'https://juejin.plus/prod-api/wx/public/getWxUserInfo'</span>,
          <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
          <span class="hljs-attr">data</span>: params,
          <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) {
            <span class="hljs-keyword">if</span> (res.<span class="hljs-property">data</span>.<span class="hljs-property">code</span> == <span class="hljs-number">200</span>) {
              that.<span class="hljs-title function_">setData</span>({
                <span class="hljs-attr">isLogin</span>: <span class="hljs-literal">true</span>
              });
              app.<span class="hljs-property">globalData</span>.<span class="hljs-property">loginState</span> = <span class="hljs-literal">true</span>;
              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç™»å½•çŠ¶æ€ä¿®æ”¹æˆåŠŸ"</span>)
              wx.<span class="hljs-title function_">showToast</span>({
                <span class="hljs-attr">title</span>: <span class="hljs-string">'ç™»å½•æˆåŠŸ!'</span>,
                <span class="hljs-attr">icon</span>: <span class="hljs-string">'success'</span>,
                <span class="hljs-attr">duration</span>: <span class="hljs-number">3000</span>,
                <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
                  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
                    wx.<span class="hljs-title function_">reLaunch</span>({
                      <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/home/home'</span>,
                    })
                  }, <span class="hljs-number">2000</span>)
                },
              })
            } <span class="hljs-keyword">else</span> {
              wx.<span class="hljs-title function_">showToast</span>({
                <span class="hljs-attr">title</span>: <span class="hljs-string">"ç™»å½•å¤±è´¥"</span>,
                <span class="hljs-attr">duration</span>: <span class="hljs-number">1000</span>,
                <span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span>,
                <span class="hljs-attr">mask</span>: <span class="hljs-literal">true</span>
              })
            }
          }
        })
      }
    })
  },

  <span class="hljs-title function_">onChooseAvatar</span>(<span class="hljs-params">e</span>) {
    <span class="hljs-keyword">const</span> {
      avatarUrl
    } = e.<span class="hljs-property">detail</span>

    <span class="hljs-comment">//å¯¹ä¸´æ—¶å›¾ç‰‡é“¾æ¥è¿›è¡Œbase64ç¼–ç </span>
    <span class="hljs-keyword">var</span> avatarUrl_base64 = <span class="hljs-string">'data:image/jpeg;base64,'</span> + wx.<span class="hljs-title function_">getFileSystemManager</span>().<span class="hljs-title function_">readFileSync</span>(avatarUrl, <span class="hljs-string">'base64'</span>)
    <span class="hljs-keyword">const</span> {
      nickName
    } = <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">userInfo</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>({
      <span class="hljs-string">"userInfo.avatarUrl"</span>: avatarUrl,
      <span class="hljs-string">"userInfo.avatarUrlBase64"</span>: avatarUrl_base64,
      <span class="hljs-attr">hasUserInfo</span>: nickName &amp;&amp; avatarUrl &amp;&amp; avatarUrl !== defaultAvatarUrl,
    })
  },
  <span class="hljs-title function_">onInputChange</span>(<span class="hljs-params">e</span>) {
    <span class="hljs-keyword">const</span> nickName = e.<span class="hljs-property">detail</span>.<span class="hljs-property">value</span>
    <span class="hljs-keyword">const</span> {
      avatarUrl
    } = <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">userInfo</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setData</span>({
      <span class="hljs-string">"userInfo.nickName"</span>: nickName,
      <span class="hljs-attr">hasUserInfo</span>: nickName &amp;&amp; avatarUrl &amp;&amp; avatarUrl !== defaultAvatarUrl,
    })
  },
  <span class="hljs-comment">/**
   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆ
   */</span>
  <span class="hljs-title function_">onReady</span>(<span class="hljs-params"/>) {

  },

  <span class="hljs-comment">/**
   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢æ˜¾ç¤º
   */</span>
  <span class="hljs-title function_">onShow</span>(<span class="hljs-params"/>) {

  },

  <span class="hljs-comment">/**
   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢éšè—
   */</span>
  <span class="hljs-title function_">onHide</span>(<span class="hljs-params"/>) {

  },

  <span class="hljs-comment">/**
   * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢å¸è½½
   */</span>
  <span class="hljs-title function_">onUnload</span>(<span class="hljs-params"/>) {

  },

  <span class="hljs-comment">/**
   * é¡µé¢ç›¸å…³äº‹ä»¶å¤„ç†å‡½æ•°--ç›‘å¬ç”¨æˆ·ä¸‹æ‹‰åŠ¨ä½œ
   */</span>
  <span class="hljs-title function_">onPullDownRefresh</span>(<span class="hljs-params"/>) {

  },

  <span class="hljs-comment">/**
   * é¡µé¢ä¸Šæ‹‰è§¦åº•äº‹ä»¶çš„å¤„ç†å‡½æ•°
   */</span>
  <span class="hljs-title function_">onReachBottom</span>(<span class="hljs-params"/>) {

  },

  <span class="hljs-comment">/**
   * ç”¨æˆ·ç‚¹å‡»å³ä¸Šè§’åˆ†äº«
   */</span>
  <span class="hljs-title function_">onShareAppMessage</span>(<span class="hljs-params"/>) {

  },
})
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[eslintåŒ¹é…è§„åˆ™é€Ÿé€š]]></title>    <link>https://juejin.cn/post/7588152122186809398</link>    <guid>https://juejin.cn/post/7588152122186809398</guid>    <pubDate>2025-12-27T14:15:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588152122186809398" data-draft-id="7588149079417110582" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="eslintåŒ¹é…è§„åˆ™é€Ÿé€š"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-27T14:15:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="sujiu"/> <meta itemprop="url" content="https://juejin.cn/user/282996947551584"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            eslintåŒ¹é…è§„åˆ™é€Ÿé€š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/282996947551584/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    sujiu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T14:15:06.000Z" title="Sat Dec 27 2025 14:15:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">eslintåŒ¹é…è§„åˆ™é€Ÿé€š</h2>
<h3 data-id="heading-1">åŒ¹é…è§„åˆ™</h3>
<p>åœ¨ <code>eslint.config.js</code> é‡Œï¼Œ<strong>â€œå½“å‰æ–‡ä»¶â€</strong> åˆ°åº•ä¼šè¢«å“ªä¸€ä¸ªï¼ˆæˆ–å“ªå‡ ä¸ªï¼‰é…ç½®å¯¹è±¡å‘½ä¸­ï¼Œæ˜¯æŒ‰ä¸‹è¿°æµç¨‹é€æ¡è®¡ç®—çš„ã€‚
åªè¦è®°ä½ä¸€å¥è¯ï¼š</p>
<blockquote>
<p><strong>ESLint ä¼šæŠŠæ–‡ä»¶è·¯å¾„ä¾æ¬¡è·Ÿæ¯ä¸ªé…ç½®å¯¹è±¡çš„ <code>files</code>/<code>ignores</code> åš glob åŒ¹é…ï¼Œå‘½ä¸­ä¸”æœªè¢«å¿½ç•¥çš„å°±ç”Ÿæ•ˆï¼›å¤šä¸ªå¯¹è±¡éƒ½å‘½ä¸­å°±å±‚å±‚åˆå¹¶ã€‚</strong></p>
</blockquote>
<p>ä¸‹é¢æŠŠâ€œåŒ¹é…â€è¿™ä»¶äº‹æ‹†æˆ 5 ä¸ªå…·ä½“é—®é¢˜ï¼Œä¸€æ¬¡æ€§è®²é€ã€‚</p>
<hr/>
<ol>
<li>
<p>æ‹¿è°æ¥åŒ¹é…ï¼Ÿ
æ–‡ä»¶åœ¨ç£ç›˜é‡Œçš„<strong>ç»å¯¹è·¯å¾„</strong>ï¼ˆWindows å¸¦ç›˜ç¬¦ï¼ŒUnix ä»¥ <code>/</code> å¼€å¤´ï¼‰ã€‚
ä¾‹ï¼š
<code>/home/me/proj/src/utils/is-empty.js</code>
<code>D:\repo\src\utils\is-empty.js</code></p>
</li>
<li>
<p>è·Ÿè°åŒ¹é…ï¼Ÿ
æ¯ä¸ªé…ç½®å¯¹è±¡é‡Œå¯èƒ½å‡ºç°çš„ä¸¤ç»„ glob æ¨¡å¼ï¼š</p>
<ul>
<li><code>files</code> æ•°ç»„ â€”â€” ç™½åå•</li>
<li><code>ignores</code> æ•°ç»„ â€”â€” é»‘åå•ï¼ˆæ”¯æŒ <code>!</code> å¦å®šï¼‰</li>
</ul>
</li>
<li>
<p>åŒ¹é…é¡ºåºï¼ˆçº§è”ï¼‰
å¯¹<strong>æ¯ä¸€ä¸ª</strong>é…ç½®å¯¹è±¡ï¼š</p>
<ol>
<li>è‹¥å¯¹è±¡<strong>æ²¡æœ‰</strong> <code>files</code>ï¼Œè§†ä¸º <code>files:["**/*"]</code>ï¼ˆå…¨é€‰ï¼‰ã€‚</li>
<li>æ‹¿æ–‡ä»¶è·¯å¾„å»è·Ÿ <code>files</code> é‡Œæ¯ä¸€é¡¹åš <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fisaacs%2Fminimatch" target="_blank" title="https://github.com/isaacs/minimatch" ref="nofollow noopener noreferrer">minimatch</a>ï¼ˆç±» <code>.gitignore</code> è¯­æ³•ï¼‰ã€‚
<ul>
<li>åªè¦<strong>æœ‰ä¸€é¡¹å‘½ä¸­</strong>å°±è®¤ä¸ºè¯¥å¯¹è±¡â€œé€‚ç”¨äºâ€æ­¤æ–‡ä»¶ã€‚</li>
</ul>
</li>
<li>è‹¥å¯¹è±¡è¿˜æœ‰ <code>ignores</code>ï¼Œå†è·Ÿè¿™äº›æ¨¡å¼æ¯”å¯¹ï¼š
<ul>
<li>å‘½ä¸­ä»»ä½• <code>ignores</code> å°±<strong>ç«‹å³æŠŠè¯¥å¯¹è±¡æ’é™¤</strong>ï¼Œä¸å†å‚ä¸åç»­åˆå¹¶ã€‚</li>
<li>æ”¯æŒå¦å®šå†™æ³• <code>"!xxx"</code>ï¼Œå¯å†æŠŠæ–‡ä»¶â€œæå›æ¥â€ã€‚</li>
</ul>
</li>
<li>å…¨å±€å¿½ç•¥è§„åˆ™ï¼ˆå¯¹è±¡é‡Œåªæœ‰ <code>ignores</code>ï¼Œæ²¡æœ‰ <code>files</code> ç­‰å…¶ä»–é”®ï¼‰ä¼šåœ¨<strong>æ‰€æœ‰å¯¹è±¡</strong>ä¹‹å‰å…ˆç®—ä¸€æ¬¡ï¼ŒåŸç†ç›¸åŒã€‚</li>
</ol>
</li>
<li>
<p>åˆå¹¶ç»“æœ
ç»è¿‡ä¸Šé¢ç­›é€‰åï¼Œå¯èƒ½ 0 ï½ N ä¸ªå¯¹è±¡å¯¹å½“å‰æ–‡ä»¶ç”Ÿæ•ˆã€‚</p>
<ul>
<li>0 ä¸ª â†’ ESLint æŠ¥é”™ â€œNo configuration provided for â€¦â€</li>
<li>â‰¥1 ä¸ª â†’ æŒ‰æ•°ç»„é¡ºåº<strong>æµ…åˆå¹¶</strong>ï¼ˆé åçš„è¦†ç›–é å‰çš„ï¼‰ï¼š
<code>languageOptions</code>/<code>linterOptions</code>/<code>plugins</code>/<code>settings</code> é€’å½’åˆå¹¶ï¼›
<code>rules</code> ç›´æ¥è¦†ç›–åŒåé”®ã€‚</li>
</ul>
</li>
<li>
<p>å¿«é€ŸéªŒè¯
å‘½ä»¤è¡Œçœ‹ä¸€çœ¼åˆ°åº•å“ªæ¡é…ç½®å‘½ä¸­ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npx eslint --inspect-config src/utils/is-empty.js
</code></pre>
<p>ä¼šæ‰“å°å‡ºæœ€ç»ˆåˆå¹¶åçš„å®Œæ•´é…ç½®ä»¥åŠâ€œæ¥è‡ªå“ªå‡ ä¸ªå¯¹è±¡â€ï¼Œè°ƒè¯•ç¥å™¨ã€‚</p>
</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> [
  {                           <span class="hljs-comment">// å¯¹è±¡ A</span>
    <span class="hljs-attr">ignores</span>: [<span class="hljs-string">"**/*.config.js"</span>]   <span class="hljs-comment">// å…¨å±€å¿½ç•¥</span>
  },
  {                           <span class="hljs-comment">// å¯¹è±¡ B</span>
    <span class="hljs-attr">files</span>: [<span class="hljs-string">"src/**/*.js"</span>],
    <span class="hljs-attr">ignores</span>: [<span class="hljs-string">"**/*.test.js"</span>],
    <span class="hljs-attr">rules</span>: { <span class="hljs-attr">semi</span>: <span class="hljs-string">"warn"</span> }
  },
  {                           <span class="hljs-comment">// å¯¹è±¡ C</span>
    <span class="hljs-attr">files</span>: [<span class="hljs-string">"**/*.test.js"</span>],
    <span class="hljs-attr">rules</span>: { <span class="hljs-attr">semi</span>: <span class="hljs-string">"off"</span> }
  }
]
</code></pre>
<p>ç°åœ¨ lint æ–‡ä»¶
<code>/proj/src/utils/is-empty.js</code></p>
<ol>
<li>å…¨å±€å¿½ç•¥ A å…ˆç®— â€”â€” æ–‡ä»¶åä¸æ˜¯ <code>*.config.js</code>ï¼Œ<strong>æœªè¢«å¿½ç•¥</strong>ï¼Œç»§ç»­ã€‚</li>
<li>å¯¹è±¡ Bï¼š<code>files</code> å‘½ä¸­ <code>src/**/*.js</code>ï¼Œä¸”ä¸åœ¨ <code>ignores</code> é‡Œ â†’ <strong>ç”Ÿæ•ˆ</strong>ã€‚</li>
<li>å¯¹è±¡ Cï¼š<code>files</code> å‘½ä¸­ <code>**/*.test.js</code>ï¼Œä½†å½“å‰æ–‡ä»¶ä¸æ˜¯æµ‹è¯• â†’ <strong>è·³è¿‡</strong>ã€‚</li>
</ol>
<p>æœ€ç»ˆåªæœ‰ B ç”Ÿæ•ˆï¼Œ<code>semi: "warn"</code>ã€‚</p>
<p>å†æŠŠ
<code>/proj/src/utils/is-empty.test.js</code>
èµ°ä¸€éï¼š</p>
<ol>
<li>å…¨å±€å¿½ç•¥ A åŒä¸Šï¼Œæœªå¿½ç•¥ã€‚</li>
<li>å¯¹è±¡ Bï¼šè™½ç„¶å‘½ä¸­ <code>src/**/*.js</code>ï¼Œä½†ç´§æ¥ç€è¢« <code>**/*.test.js</code> å¿½ç•¥ â†’ <strong>å¯¹è±¡ B è¢«æ’é™¤</strong>ã€‚</li>
<li>å¯¹è±¡ Cï¼šå‘½ä¸­ <code>**/*.test.js</code> â†’ <strong>ç”Ÿæ•ˆ</strong>ï¼Œ<code>semi: "off"</code>ã€‚</li>
</ol>
<h3 data-id="heading-2">åˆå¹¶è§„åˆ™</h3>
<p>flat Config çš„â€œåˆå¹¶â€å¹¶ä¸æ˜¯æ·±åº¦åˆå¹¶ï¼ˆdeep mergeï¼‰ï¼Œè€Œæ˜¯<strong>æŒ‰æ•°ç»„é¡ºåºã€ä¸€çº§ä¸€çº§åœ°â€œè¦†ç›– + ç´¯åŠ â€</strong>ï¼Œè§„åˆ™éå¸¸å¹²è„†ï¼š</p>
<ol>
<li><strong>æ•°ç»„é¡ºåº = ä¼˜å…ˆçº§</strong>
åå‡ºç°çš„ config å¯¹è±¡å¦‚æœå’Œå‰é¢çš„<strong>åŒå­—æ®µåŒå</strong>ï¼Œå°±<strong>æ•´å€¼è¦†ç›–</strong>ï¼›ä¸åŒåå°±ç´¯åŠ ã€‚</li>
<li><strong>å‘½ä¸­èŒƒå›´ï¼ˆfiles / ignoresï¼‰ç‹¬ç«‹åˆ¤æ–­</strong>
å¯¹å•ä¸ªæ–‡ä»¶æ¥è¯´ï¼ŒESLint ä¼šæŠŠ<strong>æ‰€æœ‰è·¯å¾„å‘½ä¸­</strong>çš„ config å¯¹è±¡æ”¶é›†èµ·æ¥ï¼Œå†æŒ‰é¡ºåºåˆå¹¶ï¼›
åªè¦æŸä¸€æ®µ config çš„ <code>ignores</code> åŒ¹é…äº†ï¼Œè¿™æ®µåŠåé¢åŒè·¯å¾„çš„ config å°±è¢«æ•´æ®µè·³è¿‡ã€‚</li>
<li><strong>åˆå¹¶ç²’åº¦åªåˆ°â€œå­—æ®µâ€ä¸€çº§</strong>
<ul>
<li><code>languageOptions</code>ã€<code>plugins</code>ã€<code>rules</code> éƒ½æ˜¯<strong>æ•´å¯¹è±¡æ›¿æ¢</strong>ï¼Œä¸ä¼šé€’å½’åˆå¹¶å†…éƒ¨å­é”®ã€‚</li>
<li>æƒ³â€œå¢é‡â€å°±å¿…é¡»æŠŠå‰é¢é‚£æ®µå†æŠ„ä¸€éï¼Œæˆ–è€…åˆ©ç”¨å±•å¼€è¿ç®—ç¬¦è‡ªå·±æ‹¼è£…ã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-3">çœ‹ä¸€æ®µä»£ç å°±æ‡‚</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> [
  {                                                    <span class="hljs-comment">// â‘ </span>
    <span class="hljs-attr">files</span>: [<span class="hljs-string">'**/*.ts'</span>],
    <span class="hljs-attr">languageOptions</span>: { <span class="hljs-attr">parser</span>: ts.<span class="hljs-property">parser</span>, <span class="hljs-attr">ecmaVersion</span>: <span class="hljs-number">2022</span> },
    <span class="hljs-attr">rules</span>: { <span class="hljs-string">'@typescript-eslint/no-explicit-any'</span>: <span class="hljs-string">'warn'</span>, <span class="hljs-string">'no-console'</span>: <span class="hljs-string">'off'</span> }
  },
  {                                                    <span class="hljs-comment">// â‘¡</span>
    <span class="hljs-attr">files</span>: [<span class="hljs-string">'**/*.ts'</span>],
    <span class="hljs-attr">rules</span>: { <span class="hljs-string">'no-console'</span>: <span class="hljs-string">'error'</span> }                   <span class="hljs-comment">// æ•´å¯¹è±¡è¦†ç›–ï¼Œç»“æœåªå‰© no-console:error</span>
  }
];
</code></pre>
<p>å¯¹ä»»æ„ <code>.ts</code> æ–‡ä»¶ï¼š</p>
<ul>
<li>å…ˆæ”¶é›† â‘  â†’ å†æ”¶é›† â‘¡</li>
<li>â‘¡ çš„ <code>rules</code> æ˜¯å…¨æ–°å¯¹è±¡ï¼Œç›´æ¥æŠŠ â‘  çš„ <code>rules</code> æ•´ä»½æ›¿æ¢æ‰ï¼›<code>languageOptions</code> ä¿ç•™ â‘  çš„ï¼Œå› ä¸º â‘¡ æ²¡å†™ã€‚</li>
</ul>
<p>æœ€ç»ˆç”Ÿæ•ˆçš„åªæœ‰ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-attr">languageOptions</span>: { <span class="hljs-attr">parser</span>: ts.<span class="hljs-property">parser</span>, <span class="hljs-attr">ecmaVersion</span>: <span class="hljs-number">2022</span> }
<span class="hljs-attr">rules</span>: { <span class="hljs-string">'no-console'</span>: <span class="hljs-string">'error'</span> }
</code></pre>
<p><code>@typescript-eslint/no-explicit-any</code> è¿™æ¡è§„åˆ™è¢«â€œè¦†ç›–æ²¡â€äº†â€”â€”<strong>ä¸ä¼šè‡ªåŠ¨ä¿ç•™</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python åŸºç¡€å†å‡çº§ï¼5 ä¸ªè¶…å®ç”¨å°æŠ€å·§ï¼Œå†™ä»£ç å¿«äººä¸€æ­¥]]></title>    <link>https://juejin.cn/post/7588042910198382642</link>    <guid>https://juejin.cn/post/7588042910198382642</guid>    <pubDate>2025-12-27T14:16:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588042910198382642" data-draft-id="7588084804093427750" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python åŸºç¡€å†å‡çº§ï¼5 ä¸ªè¶…å®ç”¨å°æŠ€å·§ï¼Œå†™ä»£ç å¿«äººä¸€æ­¥"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2025-12-27T14:16:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AAAç®€å•ç©è½¬ç¨‹åºè®¾è®¡"/> <meta itemprop="url" content="https://juejin.cn/user/4294056357689099"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python åŸºç¡€å†å‡çº§ï¼5 ä¸ªè¶…å®ç”¨å°æŠ€å·§ï¼Œå†™ä»£ç å¿«äººä¸€æ­¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4294056357689099/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AAAç®€å•ç©è½¬ç¨‹åºè®¾è®¡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T14:16:18.000Z" title="Sat Dec 27 2025 14:16:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åˆšå…¥é—¨ Python èƒ½å®ç°åŠŸèƒ½ï¼Œä½†æƒ³è®©ä»£ç æ›´ç®€æ´ã€æ›´é«˜æ•ˆï¼Ÿè¿™ 5 ä¸ªè¿›é˜¶ååŸºç¡€çš„å°æŠ€å·§ï¼Œçœ‹ä¼¼ç®€å•å´èƒ½å¤§å¹…æå‡ç¼–ç ä½“éªŒï¼Œæ¯ä¸ªéƒ½é™„å¯ç›´æ¥è¿è¡Œçš„ç¤ºä¾‹ï¼Œæ–°æ‰‹ä¹Ÿèƒ½è½»æ¾æŒæ¡ï½</p>
<h2 data-id="heading-0">1. å·§ç”¨ enumerateï¼šéå†åˆ—è¡¨åŒæ—¶è·å–ç´¢å¼•</h2>
<p>éå†åˆ—è¡¨æ—¶æƒ³çŸ¥é“å…ƒç´ çš„ä½ç½®ï¼Œä¸ç”¨æ‰‹åŠ¨åŠ è®¡æ•°å™¨ï¼Œ<code>enumerate()</code>Â èƒ½ç›´æ¥è¿”å›ç´¢å¼•å’Œå…ƒç´ ï¼Œè¿˜èƒ½è‡ªå®šä¹‰èµ·å§‹ç´¢å¼•ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¾…éå†çš„åˆ—è¡¨</span>
fruits = [<span class="hljs-string">"è‹¹æœ"</span>, <span class="hljs-string">"é¦™è•‰"</span>, <span class="hljs-string">"æ©™å­"</span>, <span class="hljs-string">"è‘¡è„"</span>]

<span class="hljs-comment"># åŸºç¡€ç”¨æ³•ï¼šé»˜è®¤ä»0å¼€å§‹</span>
<span class="hljs-keyword">for</span> idx, fruit <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(fruits):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç´¢å¼•<span class="hljs-subst">{idx}</span>ï¼š<span class="hljs-subst">{fruit}</span>"</span>)

<span class="hljs-comment"># è¿›é˜¶ç”¨æ³•ï¼šæŒ‡å®šèµ·å§‹ç´¢å¼•ï¼ˆæ¯”å¦‚ä»1å¼€å§‹ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\næŒ‡å®šèµ·å§‹ç´¢å¼•ï¼š"</span>)
<span class="hljs-keyword">for</span> idx, fruit <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(fruits, start=<span class="hljs-number">1</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬<span class="hljs-subst">{idx}</span>ä¸ªæ°´æœï¼š<span class="hljs-subst">{fruit}</span>"</span>)

<span class="hljs-comment"># è¾“å‡ºï¼š</span>
<span class="hljs-comment"># ç´¢å¼•0ï¼šè‹¹æœ</span>
<span class="hljs-comment"># ç´¢å¼•1ï¼šé¦™è•‰</span>
<span class="hljs-comment"># ç´¢å¼•2ï¼šæ©™å­</span>
<span class="hljs-comment"># ç´¢å¼•3ï¼šè‘¡è„</span>
<span class="hljs-comment"># </span>
<span class="hljs-comment"># æŒ‡å®šèµ·å§‹ç´¢å¼•ï¼š</span>
<span class="hljs-comment"># ç¬¬1ä¸ªæ°´æœï¼šè‹¹æœ</span>
<span class="hljs-comment"># ç¬¬2ä¸ªæ°´æœï¼šé¦™è•‰</span>
<span class="hljs-comment"># ç¬¬3ä¸ªæ°´æœï¼šæ©™å­</span>
<span class="hljs-comment"># ç¬¬4ä¸ªæ°´æœï¼šè‘¡è„</span>
</code></pre>
<h2 data-id="heading-1">2. zip () å‡½æ•°ï¼šå¤šåˆ—è¡¨åŒæ­¥éå†ï¼Œè¶…çœå¿ƒ</h2>
<p>éœ€è¦åŒæ—¶éå†å¤šä¸ªåˆ—è¡¨çš„å¯¹åº”å…ƒç´ æ—¶ï¼Œ<code>zip()</code>Â èƒ½æŠŠå¤šä¸ªå¯è¿­ä»£å¯¹è±¡æ‰“åŒ…æˆå…ƒç»„ï¼Œé¿å…æ‰‹åŠ¨å¤„ç†ç´¢å¼•ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¤šä¸ªå…³è”åˆ—è¡¨</span>
names = [<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"æå››"</span>, <span class="hljs-string">"ç‹äº”"</span>]
scores = [<span class="hljs-number">85</span>, <span class="hljs-number">92</span>, <span class="hljs-number">78</span>]
subjects = [<span class="hljs-string">"æ•°å­¦"</span>, <span class="hljs-string">"è¯­æ–‡"</span>, <span class="hljs-string">"è‹±è¯­"</span>]

<span class="hljs-comment"># åŒæ­¥éå†ä¸‰ä¸ªåˆ—è¡¨</span>
<span class="hljs-keyword">for</span> name, score, subject <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(names, scores, subjects):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{name}</span>çš„<span class="hljs-subst">{subject}</span>æˆç»©ï¼š<span class="hljs-subst">{score}</span>åˆ†"</span>)

<span class="hljs-comment"># è¾“å‡ºï¼š</span>
<span class="hljs-comment"># å¼ ä¸‰çš„æ•°å­¦æˆç»©ï¼š85åˆ†</span>
<span class="hljs-comment"># æå››çš„è¯­æ–‡æˆç»©ï¼š92åˆ†</span>
<span class="hljs-comment"># ç‹äº”çš„è‹±è¯­æˆç»©ï¼š78åˆ†</span>
</code></pre>
<h2 data-id="heading-2">3. ç”¨ set å¿«é€Ÿå»é‡ï¼šæ¯”åˆ—è¡¨éå†é«˜æ•ˆ N å€</h2>
<p>åˆ—è¡¨å»é‡ä¸ç”¨å†™å¾ªç¯åˆ¤æ–­ï¼Œè½¬æˆé›†åˆï¼ˆsetï¼‰å†è½¬å›åˆ—è¡¨ï¼Œä¸€è¡Œå°±èƒ½æå®šï¼Œä¸”æ—¶é—´å¤æ‚åº¦æ›´ä½ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å«é‡å¤å…ƒç´ çš„åˆ—è¡¨</span>
nums = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]

<span class="hljs-comment"># å¿«é€Ÿå»é‡</span>
unique_nums = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">set</span>(nums))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å»é‡åï¼š"</span>, unique_nums)  <span class="hljs-comment"># è¾“å‡ºï¼šå»é‡åï¼š[1, 2, 3, 4, 5]</span>

<span class="hljs-comment"># æ‹“å±•ï¼šä¿æŒåŸåˆ—è¡¨é¡ºåºï¼ˆPython 3.7+ï¼‰</span>
unique_nums_ordered = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">dict</span>.fromkeys(nums))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å»é‡ä¸”ä¿åºï¼š"</span>, unique_nums_ordered)  <span class="hljs-comment"># è¾“å‡ºï¼šå»é‡ä¸”ä¿åºï¼š[1, 2, 3, 4, 5]</span>
</code></pre>
<h2 data-id="heading-3">4. ä¸‰å…ƒè¡¨è¾¾å¼ï¼šç®€åŒ–ç®€å•çš„æ¡ä»¶åˆ¤æ–­</h2>
<p>ç®€å•çš„ if-else èµ‹å€¼é€»è¾‘ï¼Œç”¨ä¸‰å…ƒè¡¨è¾¾å¼èƒ½ç²¾ç®€ä»£ç ï¼Œä¿æŒå¯è¯»æ€§çš„åŒæ—¶å‡å°‘è¡Œæ•°ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># éœ€æ±‚ï¼šåˆ¤æ–­æˆç»©æ˜¯å¦åŠæ ¼ï¼Œè¿”å›å¯¹åº”æç¤º</span>
score = <span class="hljs-number">88</span>

<span class="hljs-comment"># ä¼ ç»Ÿif-elseå†™æ³•</span>
<span class="hljs-keyword">if</span> score &gt;= <span class="hljs-number">60</span>:
    result = <span class="hljs-string">"åŠæ ¼"</span>
<span class="hljs-keyword">else</span>:
    result = <span class="hljs-string">"ä¸åŠæ ¼"</span>

<span class="hljs-comment"># ä¸‰å…ƒè¡¨è¾¾å¼å†™æ³•</span>
result = <span class="hljs-string">"åŠæ ¼"</span> <span class="hljs-keyword">if</span> score &gt;= <span class="hljs-number">60</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"ä¸åŠæ ¼"</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æˆç»©<span class="hljs-subst">{score}</span>ï¼š<span class="hljs-subst">{result}</span>"</span>)  <span class="hljs-comment"># è¾“å‡ºï¼šæˆç»©88ï¼šåŠæ ¼</span>

<span class="hljs-comment"># è¿›é˜¶ï¼šåµŒå¥—ä¸‰å…ƒè¡¨è¾¾å¼ï¼ˆé€‚ç”¨äºç®€å•åœºæ™¯ï¼‰</span>
score = <span class="hljs-number">95</span>
result = <span class="hljs-string">"ä¼˜ç§€"</span> <span class="hljs-keyword">if</span> score &gt;= <span class="hljs-number">90</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"è‰¯å¥½"</span> <span class="hljs-keyword">if</span> score &gt;= <span class="hljs-number">80</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"åŠæ ¼"</span> <span class="hljs-keyword">if</span> score &gt;= <span class="hljs-number">60</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"ä¸åŠæ ¼"</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æˆç»©<span class="hljs-subst">{score}</span>ï¼š<span class="hljs-subst">{result}</span>"</span>)  <span class="hljs-comment"># è¾“å‡ºï¼šæˆç»©95ï¼šä¼˜ç§€</span>
</code></pre>
<h2 data-id="heading-4">5. with è¯­å¥ï¼šè‡ªåŠ¨ç®¡ç†æ–‡ä»¶ / èµ„æºï¼Œå‘Šåˆ«å¿˜è®° close ()</h2>
<p>æ“ä½œæ–‡ä»¶æ—¶ç”¨<code>with</code>è¯­å¥ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨<code>close()</code>ï¼Œä»£ç å—æ‰§è¡Œå®Œä¼šè‡ªåŠ¨å…³é—­æ–‡ä»¶ï¼Œé¿å…èµ„æºæ³„éœ²ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¼ ç»Ÿå†™æ³•ï¼ˆéœ€æ‰‹åŠ¨closeï¼‰</span>
f = <span class="hljs-built_in">open</span>(<span class="hljs-string">"test.txt"</span>, <span class="hljs-string">"w"</span>, encoding=<span class="hljs-string">"utf-8"</span>)
f.write(<span class="hljs-string">"PythonåŸºç¡€è¿›é˜¶æŠ€å·§"</span>)
f.close()

<span class="hljs-comment"># withè¯­å¥å†™æ³•ï¼ˆæ¨èï¼‰</span>
<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">"test.txt"</span>, <span class="hljs-string">"r"</span>, encoding=<span class="hljs-string">"utf-8"</span>) <span class="hljs-keyword">as</span> f:
    content = f.read()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡ä»¶å†…å®¹ï¼š"</span>, content)  <span class="hljs-comment"># è¾“å‡ºï¼šæ–‡ä»¶å†…å®¹ï¼šPythonåŸºç¡€è¿›é˜¶æŠ€å·§</span>

<span class="hljs-comment"># æ³¨ï¼šwithè¯­å¥å—ç»“æŸåï¼Œæ–‡ä»¶ä¼šè‡ªåŠ¨å…³é—­ï¼Œå³ä½¿æŠ¥é”™ä¹Ÿä¸å½±å“</span>
</code></pre>
<hr/>
<h3 data-id="heading-5">æ€»ç»“</h3>
<ol>
<li><code>enumerate()</code>Â éå†å¸¦ç´¢å¼•ã€<code>zip()</code>Â åŒæ­¥éå†å¤šåˆ—è¡¨ï¼Œè§£å†³éå†åœºæ™¯çš„å¸¸è§ç—›ç‚¹ï¼›</li>
<li>é›†åˆï¼ˆsetï¼‰å¿«é€Ÿå»é‡æ•ˆç‡é«˜ï¼Œä¸‰å…ƒè¡¨è¾¾å¼ç®€åŒ–ç®€å•æ¡ä»¶èµ‹å€¼ï¼›</li>
<li><code>with</code>Â è¯­å¥è‡ªåŠ¨ç®¡ç†èµ„æºï¼Œæ“ä½œæ–‡ä»¶ / ç½‘ç»œè¿æ¥æ—¶æ›´å®‰å…¨ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸå­åŒ– CSS ä¸ Fragmentï¼šç°ä»£å‰ç«¯å¼€å‘çš„é«˜æ•ˆå®è·µ]]></title>    <link>https://juejin.cn/post/7588080521445343278</link>    <guid>https://juejin.cn/post/7588080521445343278</guid>    <pubDate>2025-12-27T14:33:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588080521445343278" data-draft-id="7588086766248820787" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸå­åŒ– CSS ä¸ Fragmentï¼šç°ä»£å‰ç«¯å¼€å‘çš„é«˜æ•ˆå®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-27T14:33:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ohyeah"/> <meta itemprop="url" content="https://juejin.cn/user/740446536480618"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸå­åŒ– CSS ä¸ Fragmentï¼šç°ä»£å‰ç«¯å¼€å‘çš„é«˜æ•ˆå®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/740446536480618/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ohyeah
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T14:33:53.000Z" title="Sat Dec 27 2025 14:33:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼Œæå‡å¼€å‘æ•ˆç‡ã€ä¼˜åŒ–æ€§èƒ½ä»¥åŠä¿æŒä»£ç å¯ç»´æŠ¤æ€§æ˜¯å¼€å‘è€…æŒç»­è¿½æ±‚çš„ç›®æ ‡ã€‚è¿‘å¹´æ¥ï¼ŒåŸå­åŒ– CSSï¼ˆAtomic CSSï¼‰ç†å¿µä¸ React ä¸­çš„ Fragment æ¨¡å¼é€æ¸æˆä¸ºä¸»æµå®è·µï¼Œå®ƒä»¬åˆ†åˆ«ä»æ ·å¼ç®¡ç†å’Œ DOM ç»“æ„ä¸¤ä¸ªç»´åº¦ï¼Œä¸ºå¼€å‘è€…æä¾›äº†æ›´ä¼˜é›…ã€é«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚æœ¬æ–‡å°†å›´ç»•è¿™ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µå±•å¼€ï¼Œç»“åˆ Tailwind CSS çš„ä½¿ç”¨æ–¹å¼å’ŒåŸç”Ÿ JavaScript ä¸ React ä¸­çš„ Fragment åº”ç”¨ï¼Œæ¢è®¨å¦‚ä½•æ„å»ºé«˜æ€§èƒ½ã€é«˜å¤ç”¨æ€§çš„å‰ç«¯é¡¹ç›®ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä¼ ç»Ÿ CSS çš„å±€é™ä¸åŸå­åŒ– CSS çš„å…´èµ·</h2>
<p>ä¼ ç»Ÿçš„ CSS ç¼–å†™æ–¹å¼é€šå¸¸ä»¥â€œè¯­ä¹‰åŒ–ç±»åâ€ä¸ºæ ¸å¿ƒï¼Œä¾‹å¦‚ <code>.article-card</code>ã€<code>.user-profile</code> ç­‰ã€‚è¿™ç±»ç±»åè™½ç„¶å…·æœ‰è‰¯å¥½çš„ä¸šåŠ¡å«ä¹‰ï¼Œä½†å¾€å¾€å¯¼è‡´æ ·å¼é«˜åº¦è€¦åˆäºå…·ä½“ç»„ä»¶ï¼Œéš¾ä»¥è·¨é¡¹ç›®æˆ–è·¨ç»„ä»¶å¤ç”¨ã€‚ä¸€ä¸ªå…¸å‹çš„ç—›ç‚¹æ˜¯ï¼šå³ä½¿ä¸¤ä¸ªç»„ä»¶éœ€è¦ç›¸åŒçš„å†…è¾¹è·æˆ–æ–‡å­—é¢œè‰²ï¼Œå¼€å‘è€…ä»éœ€é‡å¤ç¼–å†™ç›¸ä¼¼çš„æ ·å¼è§„åˆ™ï¼Œæˆ–è€…é€šè¿‡å¤æ‚çš„ç»§æ‰¿ç»“æ„æ¥å…±äº«æ ·å¼ï¼Œè¿™ä¸ä»…å¢åŠ äº†ç»´æŠ¤æˆæœ¬ï¼Œä¹Ÿé™ä½äº†å¼€å‘æ•ˆç‡ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œ<strong>åŸå­åŒ– CSS</strong>ï¼ˆAtomic CSSï¼‰åº”è¿è€Œç”Ÿã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯å°† CSS è§„åˆ™æ‹†è§£ä¸ºæœ€å°ã€ä¸å¯å†åˆ†çš„â€œåŸå­ç±»â€ï¼Œæ¯ä¸ªç±»åªè´Ÿè´£å•ä¸€çš„æ ·å¼å±æ€§ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li><code>p-4</code> è¡¨ç¤º <code>padding: 1rem</code>ï¼ˆé»˜è®¤ 16pxï¼‰</li>
<li><code>flex</code> è¡¨ç¤º <code>display: flex</code></li>
<li><code>text-gray-500</code> è¡¨ç¤ºç‰¹å®šçš„ç°è‰²æ–‡å­—é¢œè‰²</li>
</ul>
<p>è¿™ç§å†™æ³•çœ‹ä¼¼â€œå†—é•¿â€ï¼Œå®åˆ™å¸¦æ¥äº†æé«˜çš„<strong>å¤ç”¨æ€§</strong>å’Œ<strong>ä¸€è‡´æ€§</strong>ã€‚å¼€å‘è€…ä¸å†éœ€è¦ä¸ºæ¯ä¸ªæ–°ç»„ä»¶åˆ›å»ºæ–°çš„ CSS æ–‡ä»¶æˆ–ç±»åï¼Œè€Œæ˜¯ç›´æ¥ç»„åˆå·²æœ‰çš„åŸå­ç±»å³å¯å¿«é€Ÿæ„å»º UIã€‚</p>
<h3 data-id="heading-1">é¢å‘å¯¹è±¡çš„ CSS æ€ç»´</h3>
<p>åŸå­åŒ– CSS å¹¶éå®Œå…¨æŠ›å¼ƒé¢å‘å¯¹è±¡çš„æ€æƒ³ï¼Œè€Œæ˜¯å°†å…¶é‡æ–°è¯ é‡Šï¼š</p>
<ul>
<li><strong>å°è£…</strong>ï¼šåŸå­ç±»æœ¬èº«å°±æ˜¯å¯¹å•ä¸€æ ·å¼è§„åˆ™çš„å°è£…ï¼›</li>
<li><strong>å¤šæ€</strong>ï¼šé€šè¿‡ä¸åŒç±»çš„ç»„åˆï¼ŒåŒä¸€åŸå­ç±»å¯åœ¨ä¸åŒä¸Šä¸‹æ–‡ä¸­å‘ˆç°ä¸åŒæ•ˆæœï¼›</li>
<li><strong>ç»„åˆä¼˜äºç»§æ‰¿</strong>ï¼šé¿å…æ·±å±‚åµŒå¥—å’Œå¤æ‚é€‰æ‹©å™¨ï¼Œé€šè¿‡ç±»åç»„åˆå®ç°æ ·å¼å åŠ ã€‚</li>
</ul>
<p>è¿™ç§æ¨¡å¼å°¤å…¶é€‚åˆå¿«é€ŸåŸå‹å¼€å‘å’Œå›¢é˜Ÿåä½œï¼Œå› ä¸ºæ‰€æœ‰å¼€å‘è€…éƒ½åŸºäºåŒä¸€å¥—â€œè®¾è®¡ç³»ç»Ÿâ€è¿›è¡Œæ„å»ºï¼Œå‡å°‘äº†é£æ ¼ä¸ä¸€è‡´çš„é—®é¢˜ã€‚</p>
<hr/>
<h2 data-id="heading-2">äºŒã€Tailwind CSSï¼šåŸå­åŒ– CSS çš„æœ€ä½³å®è·µ</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Ftailwindcss.com%2F" target="_blank" title="https://tailwindcss.com/" ref="nofollow noopener noreferrer">Tailwind CSS</a> æ˜¯ç›®å‰æœ€æµè¡Œçš„åŸå­åŒ– CSS æ¡†æ¶ã€‚å®ƒæä¾›äº†ä¸€å¥—é«˜åº¦å¯é…ç½®çš„å®ç”¨ç±»ï¼ˆutility classesï¼‰ï¼Œå‡ ä¹æ— éœ€æ‰‹å†™è‡ªå®šä¹‰ CSS å³å¯å®Œæˆå¤æ‚ç•Œé¢çš„æ­å»ºã€‚</p>
<h3 data-id="heading-3">å¿«é€Ÿä¸Šæ‰‹ Tailwind + Vite</h3>
<p>åœ¨ç°ä»£å‰ç«¯å·¥ç¨‹ä¸­ï¼ŒTailwind é€šå¸¸ä¸æ„å»ºå·¥å…·å¦‚ Vite é…åˆä½¿ç”¨ã€‚å®‰è£…æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">npm install -D tailwindcss postcss autoprefixer
npx tailwindcss <span class="hljs-keyword">init</span> -p
</code></pre>
<p>ç„¶ååœ¨ <code>vite.config.js</code> ä¸­å¼•å…¥æ’ä»¶ï¼ˆè‹¥ä½¿ç”¨å®˜æ–¹æ¨¡æ¿ï¼Œé€šå¸¸å·²è‡ªåŠ¨é›†æˆï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
<span class="hljs-keyword">import</span> react <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-react'</span>
<span class="hljs-keyword">import</span> tailwindcss <span class="hljs-keyword">from</span> <span class="hljs-string">'tailwindcss'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">react</span>(), <span class="hljs-title function_">tailwindcss</span>()]
})
</code></pre>
<p>æ¥ç€åœ¨å…¥å£ CSS æ–‡ä»¶ä¸­å¼•å…¥ Tailwind çš„åŸºç¡€æ ·å¼ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@tailwind</span> base;
<span class="hljs-variable">@tailwind</span> components;
<span class="hljs-variable">@tailwind</span> utilities;
</code></pre>
<p>è‡³æ­¤ï¼Œå³å¯åœ¨ JSX æˆ– HTML ä¸­ç›´æ¥ä½¿ç”¨ Tailwind ç±»åã€‚</p>
<h3 data-id="heading-4">ç¤ºä¾‹ï¼šæ„å»ºä¸€ä¸ªå¡ç‰‡ç»„ä»¶</h3>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ Tailwind æ„å»ºçš„ç®€å•æ–‡ç« å¡ç‰‡ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">ArticleCard</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"p-4 bg-white rounded-xl shadow hover:shadow-lg transition"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-lg font-bold"</span>&gt;</span>Tailwindcss<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-gray-500 mt-2"</span>&gt;</span>
        ç”¨ utility class å¿«é€Ÿæ„å»º UI
      <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ‰€æœ‰æ ·å¼å‡é€šè¿‡ç±»åå†…è”å£°æ˜ï¼Œæ— éœ€é¢å¤– CSS æ–‡ä»¶ã€‚<code>p-4</code> æ§åˆ¶å†…è¾¹è·ï¼Œ<code>rounded-xl</code> è®¾ç½®åœ†è§’ï¼Œ<code>shadow</code> å’Œ <code>hover:shadow-lg</code> å®ç°æ‚¬åœé˜´å½±æ•ˆæœï¼Œ<code>transition</code> æ·»åŠ è¿‡æ¸¡åŠ¨ç”»ã€‚è¿™ç§å†™æ³•ç›´è§‚ã€é«˜æ•ˆï¼Œä¸”å¤©ç„¶æ”¯æŒå“åº”å¼ã€‚</p>
<h3 data-id="heading-5">å“åº”å¼å¸ƒå±€ï¼šç§»åŠ¨ç«¯ä¼˜å…ˆ</h3>
<p>Tailwind é»˜è®¤é‡‡ç”¨ <strong>Mobile First</strong>ï¼ˆç§»åŠ¨ç«¯ä¼˜å…ˆï¼‰ç­–ç•¥ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;div <span class="hljs-attr">className</span>=<span class="hljs-string">"flex flex-col md:flex-row gap-4"</span>&gt;
  &lt;main <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-blue-100 p-4 md:w-2/3"</span>&gt;ä¸»å†…å®¹&lt;/main&gt;
  &lt;aside <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-green-100 p-4 md:w-1/3"</span>&gt;ä¾§è¾¹æ &lt;/aside&gt;
&lt;/div&gt;
</code></pre>
<ul>
<li>åœ¨å°å±è®¾å¤‡ä¸Šï¼Œå®¹å™¨ä¸ºå‚ç›´å¸ƒå±€ï¼ˆ<code>flex-col</code>ï¼‰ï¼›</li>
<li>å½“å±å¹•å®½åº¦ â‰¥ 768pxï¼ˆ<code>md</code> æ–­ç‚¹ï¼‰æ—¶ï¼Œåˆ‡æ¢ä¸ºæ°´å¹³å¸ƒå±€ï¼ˆ<code>md:flex-row</code>ï¼‰ï¼Œå¹¶è®¾ç½®ä¸»å†…å®¹å  2/3ï¼Œä¾§è¾¹æ å  1/3ã€‚</li>
</ul>
<p>è¿™ç§å£°æ˜å¼å“åº”å¼è¯­æ³•æå¤§ç®€åŒ–äº†åª’ä½“æŸ¥è¯¢çš„ç¼–å†™ï¼Œä½¿å¸ƒå±€é€»è¾‘ä¸€ç›®äº†ç„¶ã€‚</p>
<hr/>
<h2 data-id="heading-6">ä¸‰ã€Fragmentï¼šä¼˜é›…è§£å†³ DOM ç»“æ„å†—ä½™</h2>
<p>åœ¨ React å¼€å‘ä¸­ï¼Œç»„ä»¶å¿…é¡»è¿”å›å•ä¸ªæ ¹å…ƒç´ ã€‚æ—©æœŸå¼€å‘è€…å¸¸è¢«è¿«åŒ…è£¹ä¸€å±‚æ— æ„ä¹‰çš„ <code>&lt;div&gt;</code>ï¼Œè¿™ä¸ä»…æ±¡æŸ“ DOM ç»“æ„ï¼Œè¿˜å¯èƒ½å½±å“ CSS å¸ƒå±€ï¼ˆå¦‚ Flex å®¹å™¨çš„å­é¡¹æ•°é‡å˜åŒ–ï¼‰ã€‚</p>
<p>React æä¾›äº† <strong>Fragment</strong> æ¥è§£å†³è¿™ä¸€é—®é¢˜ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ ‡é¢˜1<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>æ ‡é¢˜2<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"</span>&gt;</span>
        æäº¤
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ArticleCard</span> /&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}
</code></pre>
<p>è¿™é‡Œçš„ <code>&lt;&gt;...&lt;/&gt;</code> æ˜¯ <code>&lt;React.Fragment&gt;</code> çš„ç®€å†™è¯­æ³•ã€‚å®ƒåœ¨æ¸²æŸ“æ—¶<strong>ä¸ä¼šç”Ÿæˆä»»ä½•å®é™… DOM èŠ‚ç‚¹</strong>ï¼Œä»…ä½œä¸ºé€»è¾‘å®¹å™¨å­˜åœ¨ï¼Œä»è€Œä¿æŒ DOM æ ‘çš„ç®€æ´æ€§ã€‚</p>
<h3 data-id="heading-7">åŸç”Ÿ JavaScript ä¸­çš„ DocumentFragment</h3>
<p>Fragment çš„æ€æƒ³ä¸ä»…å­˜åœ¨äº Reactï¼Œåœ¨åŸç”Ÿ DOM æ“ä½œä¸­åŒæ ·é‡è¦ã€‚å½“éœ€è¦æ‰¹é‡æ’å…¥å¤šä¸ªèŠ‚ç‚¹æ—¶ï¼Œé¢‘ç¹è°ƒç”¨ <code>appendChild</code> ä¼šè§¦å‘å¤šæ¬¡<strong>é‡æ’ï¼ˆreflowï¼‰<strong>å’Œ</strong>é‡ç»˜ï¼ˆrepaintï¼‰</strong> ï¼Œä¸¥é‡å½±å“æ€§èƒ½ã€‚</p>
<p>æ­¤æ—¶å¯ä½¿ç”¨ <code>DocumentFragment</code>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;script&gt;
  const <span class="hljs-attr">container</span> = document.querySelector(<span class="hljs-string">'.container'</span>)
  const <span class="hljs-attr">p1</span> = document.createElement(<span class="hljs-string">'p'</span>)
  <span class="hljs-attr">p1.textContent</span> = <span class="hljs-string">'111'</span>
  const <span class="hljs-attr">p2</span> = document.createElement(<span class="hljs-string">'p'</span>)
  <span class="hljs-attr">p2.textContent</span> = <span class="hljs-string">'222'</span>

  const <span class="hljs-attr">fragment</span> = document.createDocumentFragment()
  fragment.appendChild(p1)
  fragment.appendChild(p2)

  container.appendChild(fragment) // ä»…ä¸€æ¬¡ DOM æ“ä½œ
&lt;/script&gt;
</code></pre>
<p><code>DocumentFragment</code> æ˜¯ä¸€ä¸ª<strong>è„±ç¦»æ–‡æ¡£æµçš„å†…å­˜èŠ‚ç‚¹</strong>ï¼Œåœ¨å…¶ä¸Šæ“ä½œä¸ä¼šè§¦å‘æµè§ˆå™¨æ¸²æŸ“ã€‚åªæœ‰æœ€ç»ˆå°†å…¶æ’å…¥çœŸå® DOM æ—¶ï¼Œæ‰ä¼šä¸€æ¬¡æ€§å°†æ‰€æœ‰å­èŠ‚ç‚¹æŒ‚è½½ï¼Œä»è€Œå°† N æ¬¡ DOM æ“ä½œä¼˜åŒ–ä¸º 1 æ¬¡ã€‚</p>
<blockquote>
<p>å…³é”®ä¼˜åŠ¿ï¼š<strong>å‡å°‘é‡æ’/é‡ç»˜æ¬¡æ•°ï¼Œæ˜¾è‘—æå‡æ€§èƒ½</strong>ï¼Œå°¤å…¶åœ¨å¤„ç†å¤§é‡åŠ¨æ€å†…å®¹ï¼ˆå¦‚åˆ—è¡¨æ¸²æŸ“ã€è¡¨æ ¼ç”Ÿæˆï¼‰æ—¶æ•ˆæœæ˜æ˜¾ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-8">å››ã€ååŒå¢æ•ˆï¼šåŸå­åŒ– CSS + Fragment çš„ç°ä»£å¼€å‘èŒƒå¼</h2>
<p>å°†åŸå­åŒ– CSS ä¸ Fragment ç»“åˆï¼Œæ„æˆäº†ç°ä»£å‰ç«¯å¼€å‘çš„é«˜æ•ˆå·¥ä½œæµï¼š</p>
<ul>
<li><strong>æ ·å¼å±‚é¢</strong>ï¼šé€šè¿‡ Tailwind çš„åŸå­ç±»ï¼Œå¼€å‘è€…åœ¨ JSX ä¸­ç›´æ¥å£°æ˜æ ·å¼ï¼Œæ— éœ€åˆ‡æ¢æ–‡ä»¶ä¸Šä¸‹æ–‡ï¼Œæå‡å¼€å‘è¿è´¯æ€§ï¼›</li>
<li><strong>ç»“æ„å±‚é¢</strong>ï¼šä½¿ç”¨ Fragment é¿å…æ— æ„ä¹‰çš„åŒ…è£…å…ƒç´ ï¼Œä¿æŒè¯­ä¹‰æ¸…æ™°ã€DOM ç²¾ç®€ï¼›</li>
<li><strong>æ€§èƒ½å±‚é¢</strong>ï¼šDocumentFragment ä¼˜åŒ–åŸç”Ÿ DOM æ“ä½œï¼ŒReact Fragment ä¼˜åŒ–è™šæ‹Ÿ DOM æ¸²æŸ“ï¼Œä¸¤è€…å…±åŒä¿éšœåº”ç”¨æµç•…æ€§ã€‚</li>
</ul>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œè¿™ç§ç»„åˆå¤©ç„¶å¥‘åˆ <strong>AI è¾…åŠ©ç¼–ç¨‹</strong> çš„è¶‹åŠ¿ã€‚å½“ä½¿ç”¨è‡ªç„¶è¯­è¨€æè¿° UIï¼ˆå¦‚â€œä¸€ä¸ªå¸¦é˜´å½±çš„ç™½è‰²å¡ç‰‡ï¼ŒåŒ…å«æ ‡é¢˜å’Œç°è‰²æè¿°æ–‡æœ¬â€ï¼‰ï¼ŒLLM æ›´å®¹æ˜“ç”Ÿæˆè¯­ä¹‰æ˜ç¡®ã€ç»“æ„è§„èŒƒçš„ Tailwind ä»£ç ï¼Œè€Œæ— éœ€ç†è§£å¤æ‚çš„ CSS é€‰æ‹©å™¨é€»è¾‘ã€‚</p>
<hr/>
<h2 data-id="heading-9">ç»“è¯­</h2>
<p>åŸå­åŒ– CSS ä¸ Fragment å¹¶éç‚«æŠ€ï¼Œè€Œæ˜¯å¯¹â€œ<strong>å…³æ³¨ç‚¹åˆ†ç¦»</strong>â€å’Œâ€œ<strong>æ€§èƒ½ä¼˜å…ˆ</strong>â€åŸåˆ™çš„åŠ¡å®ä½“ç°ã€‚å‰è€…è®©æ ·å¼å›å½’ç»„åˆä¸å¤ç”¨ï¼Œåè€…è®©ç»“æ„å›å½’è¯­ä¹‰ä¸æ•ˆç‡ã€‚åœ¨ Tailwind CSS å’Œ React ç­‰ç°ä»£å·¥å…·é“¾çš„æ”¯æŒä¸‹ï¼Œå¼€å‘è€…å¯ä»¥æ›´ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘æœ¬èº«ï¼Œè€Œéè¢«ç¹ççš„æ ·å¼ç®¡ç†å’Œ DOM å†—ä½™æ‰€å›°æ‰°ã€‚</p>
<p>æ— è®ºæ˜¯ä¸ªäººé¡¹ç›®è¿˜æ˜¯å¤§å‹å›¢é˜Ÿåä½œï¼Œæ‹¥æŠ±è¿™äº›å®è·µéƒ½å°†å¸¦æ¥æ›´æ¸…çˆ½çš„ä»£ç ã€æ›´å¿«çš„è¿­ä»£é€Ÿåº¦å’Œæ›´ä½³çš„ç”¨æˆ·ä½“éªŒã€‚æ­£å¦‚å‰ç«¯ç”Ÿæ€ä¸æ–­æ¼”è¿›ï¼Œæˆ‘ä»¬çš„å¼€å‘æ–¹å¼ä¹Ÿåº”éšä¹‹ç²¾è¿›â€”â€”å°‘å†™ CSSï¼Œå°‘é€  divï¼Œå¤šç»„åˆï¼Œå¤šä¼˜åŒ–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter å®ç°ä¸€ä¸ªå®¹å™¨å†…éƒ¨å…ƒç´ å¯å¹³ç§»ã€ç¼©æ”¾å’Œæ—‹è½¬ç­‰åŠŸèƒ½ï¼ˆä¹ï¼‰]]></title>    <link>https://juejin.cn/post/7588149079417159734</link>    <guid>https://juejin.cn/post/7588149079417159734</guid>    <pubDate>2025-12-27T14:45:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588149079417159734" data-draft-id="7588146449005740068" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter å®ç°ä¸€ä¸ªå®¹å™¨å†…éƒ¨å…ƒç´ å¯å¹³ç§»ã€ç¼©æ”¾å’Œæ—‹è½¬ç­‰åŠŸèƒ½ï¼ˆä¹ï¼‰"/> <meta itemprop="keywords" content="Flutter,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-27T14:45:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åå­—è¢«ä½ ä»¬æƒ³å®Œäº†"/> <meta itemprop="url" content="https://juejin.cn/user/3065854916834782"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter å®ç°ä¸€ä¸ªå®¹å™¨å†…éƒ¨å…ƒç´ å¯å¹³ç§»ã€ç¼©æ”¾å’Œæ—‹è½¬ç­‰åŠŸèƒ½ï¼ˆä¹ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3065854916834782/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åå­—è¢«ä½ ä»¬æƒ³å®Œäº†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T14:45:21.000Z" title="Sat Dec 27 2025 14:45:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Flutter å®ç°ä¸€ä¸ªå®¹å™¨å†…éƒ¨å…ƒç´ å¯å¹³ç§»ã€ç¼©æ”¾å’Œæ—‹è½¬ç­‰åŠŸèƒ½ï¼ˆä¹ï¼‰</h2>
<p>Flutter: 3.35.7</p>
<p>ä»Šå¤©çš„åŠŸèƒ½å®Œæˆé‚£åŸºæœ¬åŠŸèƒ½å°±å®Œæˆäº†ï¼Œæ‰€ä»¥ç»™å‡ºgithubé“¾æ¥ï¼š</p>
<pre><code class="hljs language-text" lang="text">https://github.com/yhtqw/FrontEndDemo/tree/main/flutter_demo/lib/pages/transform_use/widgets/multiple_transform
</code></pre>
<p>å‰é¢æˆ‘ä»¬ç®€å•å®ç°äº†å›¾ç‰‡å…ƒç´ å’Œæ–‡æœ¬å…ƒç´ çš„æ–°å¢ï¼Œä¼˜å…ˆå®ç°çš„åŠŸèƒ½ï¼Œå¾ˆå¤šåœ°æ–¹è¿˜å¯ä»¥ä¼˜åŒ–ã€‚ä»Šå¤©æˆ‘æ¥è®¨è®ºä¸€ä¸‹æ–‡æœ¬å…ƒç´ çš„æ‹–åŠ¨ç¼©æ”¾ã€‚</p>
<p>å¯¹äºæ–‡æœ¬å…ƒç´ ï¼Œæ–‡æœ¬å…ƒç´ çš„é«˜åº¦æ˜¯ç”±æ–‡æœ¬è‡ªèº«çš„æ ·å¼æ¥å†³å®šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬é™åˆ¶æ–‡æœ¬å…ƒç´ åªèƒ½ç¼©æ”¾å®½åº¦ï¼Œé«˜åº¦è‡ªåŠ¨è®¡ç®—ã€‚è¿™æ ·å°±ä¼šå¯¹ç¼©æ”¾åŒºåŸŸè¿›è¡Œå…ƒç´ ç±»å‹åˆ¤æ–­ï¼Œå¦‚æœæ˜¯æ–‡æœ¬å…ƒç´ ï¼Œé‚£ä¹ˆåªç¼©æ”¾å®½åº¦ï¼Œé«˜åº¦è‡ªé€‚åº”ï¼›å¦‚æœæ˜¯å…¶ä»–å…ƒç´ ï¼Œåˆ™åŒä¸Šå¯¹å®½åº¦é«˜åº¦è¿›è¡Œç¼©æ”¾ã€‚æ—¢ç„¶åŠŸèƒ½åˆåŒºåˆ«ï¼Œé‚£ä¹ˆiconä¹Ÿè¦æœ‰åŒºåˆ«ï¼Œé‚£ä¹ˆä¹‹å‰çš„å…ƒç´ æ“ä½œåŒºåŸŸå¾—åšå‡ºæ›´æ”¹ï¼Œæ–°å¢è¿™ç§ç‰¹æ®ŠåŠŸèƒ½åŒºåˆ†å…ƒç´ ç±»å‹å¯¹åº”å›¾æ ‡ä¸ä¸€æ ·çš„é…ç½®ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ResponseAreaModel</span> </span>{
  <span class="hljs-comment">// å…¶ä»–çœç•¥...</span>

  <span class="hljs-comment">/// <span class="markdown">å…ƒç´ ç±»å‹ä¸åŒå±•ç¤ºä¸åŒçš„æ“ä½œicon</span></span>
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">String</span>&gt;? iconConfig;

  <span class="hljs-comment">// å…¶ä»–çœç•¥...</span>
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConstantsConfig</span> </span>{
  <span class="hljs-comment">// å…¶ä»–çœç•¥...</span>

  <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-built_in">List</span>&lt;ResponseAreaModel&gt; baseAreaList = [
    <span class="hljs-comment">// å…¶ä»–çœç•¥...</span>

    <span class="hljs-comment">// ç¼©æ”¾</span>
    ResponseAreaModel(
      areaWidth: <span class="hljs-number">20</span>,
      areaHeight: <span class="hljs-number">20</span>,
      xRatio: <span class="hljs-number">1</span>,
      yRatio: <span class="hljs-number">1</span>,
      status: ElementStatus.scale.value,
      icon: <span class="hljs-string">'assets/images/icon_scale.png'</span>,
      trigger: TriggerMethod.move,
      iconConfig: {
        ElementType.textType.type: <span class="hljs-string">'assets/images/icon_scale_text.png'</span>,
      },
    ),

    <span class="hljs-comment">// å…¶ä»–çœç•¥...</span>
  ],

  <span class="hljs-comment">// å…¶ä»–çœç•¥...</span>
}

<span class="hljs-comment">// å…¶ä»–çœç•¥...</span>

<span class="hljs-comment">// å¦‚æœé€‰ä¸­ï¼Œåˆ™å±•ç¤ºæ“ä½œåŒºåŸŸ</span>
<span class="hljs-keyword">if</span> (selected) ...areaList.map((item) =&gt; Positioned(
  top: elementItem.elementHeight * item.yRatio - item.areaHeight / <span class="hljs-number">2</span>,
  left: elementItem.elementWidth * item.xRatio - item.areaWidth / <span class="hljs-number">2</span>,
  child: Container(
    width: item.areaWidth,
    height: item.areaHeight,
    alignment: Alignment.center,
    decoration: BoxDecoration(
      color: Colors.blueAccent,
      borderRadius: BorderRadius.circular(item.areaWidth / <span class="hljs-number">2</span>),
    ),
    child: Image.asset(
      <span class="hljs-comment">// åˆ¤æ–­å¯¹åº”ç±»å‹çš„å›¾ç‰‡æ˜¯å¦å•ç‹¬å­˜åœ¨</span>
      item.iconConfig?[elementItem.type] ?? item.icon,
      width: item.areaWidth - ConstantsConfig.areaIconMargin,
      height: item.areaHeight - ConstantsConfig.areaIconMargin,
      fit: BoxFit.scaleDown,
      color: Colors.white,
    ),
  ),
)),
</code></pre>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/600d8604918640c8b86a3dc7bcd9965c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCN5a2X6KKr5L2g5Lus5oOz5a6M5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767451521&amp;x-signature=O51Ojk40bc%2BzwMhvyZIbHnbPN%2F8%3D" alt="image01.gif" loading="lazy"/></p>
<p>è¿™æ ·æˆ‘ä»¬å°±é€šè¿‡å…ƒç´ çŠ¶æ€åŒºåˆ†äº†ç‰¹æ®ŠåŠŸèƒ½çš„å›¾æ ‡å±•ç¤ºï¼Œç°åœ¨å°±æ˜¯åŠŸèƒ½çš„å®ç°äº†ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">/// <span class="markdown">å¤„ç†å…ƒç´ ç¼©æ”¾</span></span>
<span class="hljs-comment">///</span>
<span class="hljs-comment">/// <span class="markdown">é€šè¿‡ç§»åŠ¨ç‚¹åæ ‡[x]å’Œ[y]ä¸æŒ‰ä¸‹çš„åˆå§‹åæ ‡ï¼Œ</span></span>
<span class="hljs-keyword">void</span> _onScale({<span class="hljs-keyword">required</span> <span class="hljs-built_in">double</span> x, <span class="hljs-keyword">required</span> <span class="hljs-built_in">double</span> y}) {
  <span class="hljs-keyword">if</span> (_currentElement?.type == ElementType.textType.type) {
    _onScaleText(x: x, y: y);
  } <span class="hljs-keyword">else</span> {
    _onScaleBase(x: x, y: y);
  }
}

<span class="hljs-comment">/// <span class="markdown">æŠ½å–è·å–ç¼©æ”¾éœ€è¦çš„åŸºç¡€å‚æ•°</span></span>
(<span class="hljs-built_in">double</span>, <span class="hljs-built_in">double</span>, <span class="hljs-built_in">double</span>, <span class="hljs-built_in">double</span>, <span class="hljs-built_in">double</span>) _getScaleParams({<span class="hljs-keyword">required</span> <span class="hljs-built_in">double</span> x, <span class="hljs-keyword">required</span> <span class="hljs-built_in">double</span> y}) {
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> oWidth = _temporary!.width;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> oHeight = _temporary!.height;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> oX = _temporary!.x;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> oY = _temporary!.y;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> resizeRatio = _calcResizeRatio(x: x, y: y);

  <span class="hljs-keyword">return</span> (oWidth, oHeight, oX, oY, resizeRatio);
}

<span class="hljs-comment">/// <span class="markdown">å¤„ç†éæ–‡æœ¬å…ƒç´ çš„ç¼©æ”¾</span></span>
<span class="hljs-keyword">void</span> _onScaleBase({<span class="hljs-keyword">required</span> <span class="hljs-built_in">double</span> x, <span class="hljs-keyword">required</span> <span class="hljs-built_in">double</span> y}) {
  <span class="hljs-keyword">if</span> (_currentElement == <span class="hljs-keyword">null</span> || _temporary == <span class="hljs-keyword">null</span>) <span class="hljs-keyword">return</span>;
  
  <span class="hljs-keyword">final</span> (oWidth, oHeight, oX, oY, resizeRatio) = _getScaleParams(x: x, y: y);
  <span class="hljs-built_in">double</span> newW = oWidth * resizeRatio;
  <span class="hljs-built_in">double</span> newH = oHeight * resizeRatio;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> minSize = ConstantsConfig.minSize;

  <span class="hljs-comment">// ä»¥çŸ­è¾¹ä¸ºåŸºå‡†æ¥è®¡ç®—æœ€å°å®½é«˜</span>
  <span class="hljs-keyword">if</span> (oWidth &lt;= oHeight &amp;&amp; newW &lt; minSize) {
    newW = minSize;
    newH = minSize * oHeight / oWidth;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (oHeight &lt; oWidth &amp;&amp; newH &lt; minSize) {
    newH = minSize;
    newW = minSize * oWidth / oHeight;
  }

  <span class="hljs-comment">// ä»¥é•¿è¾¹ä¸ºåŸºå‡†æ¥è®¡ç®—æœ€å¤§å®½é«˜</span>
  <span class="hljs-keyword">if</span> (oWidth &gt;= oHeight &amp;&amp; newW &gt;= _transformWidth) {
    newW = _transformWidth;
    newH = _transformWidth * oHeight / oWidth;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (oHeight &gt; oWidth &amp;&amp; newH &gt;= _transformHeight) {
    newH = _transformHeight;
    newW = _transformHeight * oWidth / oHeight;
  }

  <span class="hljs-keyword">if</span> (
    newW == _currentElement?.elementWidth &amp;&amp;
      newH == _currentElement?.elementHeight
  ) {
    <span class="hljs-keyword">return</span>;
  }

  _currentElement = _currentElement?.copyWith(
    elementWidth: newW,
    elementHeight: newH,
    x: oX - (newW - oWidth) / <span class="hljs-number">2</span>,
    y: oY - (newH - oHeight) / <span class="hljs-number">2</span>,
  );
  _onChange();
}

<span class="hljs-comment">/// <span class="markdown">æ–‡æœ¬å…ƒç´ çš„ç¼©æ”¾</span></span>
<span class="hljs-keyword">void</span> _onScaleText({<span class="hljs-keyword">required</span> <span class="hljs-built_in">double</span> x, <span class="hljs-keyword">required</span> <span class="hljs-built_in">double</span> y}) {
  <span class="hljs-keyword">if</span> (_currentElement == <span class="hljs-keyword">null</span> || _temporary == <span class="hljs-keyword">null</span>) <span class="hljs-keyword">return</span>;
  
  <span class="hljs-keyword">final</span> (oWidth, oHeight, oX, oY, resizeRatio) = _getScaleParams(x: x, y: y);
  <span class="hljs-built_in">double</span> newW = oWidth * resizeRatio;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> minSize = ConstantsConfig.minSize;

  <span class="hljs-comment">// ä»¥çŸ­è¾¹ä¸ºåŸºå‡†æ¥è®¡ç®—æœ€å°å®½é«˜</span>
  <span class="hljs-keyword">if</span> (oWidth &lt;= oHeight &amp;&amp; newW &lt; minSize) {
    newW = minSize;
  }

  <span class="hljs-comment">// ä»¥é•¿è¾¹ä¸ºåŸºå‡†æ¥è®¡ç®—æœ€å¤§å®½é«˜</span>
  <span class="hljs-keyword">if</span> (oWidth &gt;= oHeight &amp;&amp; newW &gt;= _transformWidth) {
    newW = _transformWidth;
  }

  <span class="hljs-keyword">final</span> TextStyle style = _getTextStyle(_currentElement!.textOptions!);
  <span class="hljs-keyword">final</span> (tempWidth, tempHeight) = TransformUtils.calculateTextSize(
    text: _currentElement!.textOptions!.text,
    style: style,
    maxWidth: newW,
  );

  _currentElement = _currentElement?.copyWith(
    elementWidth: newW,
    elementHeight: tempHeight,
    x: oX - (newW - oWidth) / <span class="hljs-number">2</span>,
    y: oY - (tempHeight - oHeight) / <span class="hljs-number">2</span>,
  );
  _onChange();
}
</code></pre>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/20381b3d80ea432c8bf64ad405ac9823~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCN5a2X6KKr5L2g5Lus5oOz5a6M5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767451521&amp;x-signature=k4NYzMkI7lU%2FQwO61AIKsspaaoA%3D" alt="image02.gif" loading="lazy"/></p>
<p>è¿™æ ·æˆ‘ä»¬å°±å®ç°äº†æ–‡æœ¬å…ƒç´ çš„æ‹‰ä¼¸æ•ˆæœã€‚å¯ä»¥çœ‹åˆ°ï¼Œéšç€åŠŸèƒ½çš„å¢åŠ ï¼Œå¯èƒ½å°±éœ€è¦å¯¹ä¹‹å‰çš„é€»è¾‘åšæ›´æ”¹ï¼Œä¸è¿‡å› ä¸ºæŠ½å–äº†é…ç½®ï¼Œå¾ˆå¤šåœ°æ–¹å°±åªéœ€è¦åŠ å…¥å°‘é‡çš„ä»£ç å³å¯å®ç°éƒ¨åˆ†åŠŸèƒ½ã€‚</p>
<p>åŸºç¡€çš„åŠŸèƒ½å·®ä¸å¤šå°±å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥ä¸»åŠŸèƒ½å°±è¿˜æœ‰ä¸€ä¸ªï¼Œé‚£å°±æ˜¯ä¿å­˜ï¼Œæˆ‘ä»¬ä¸çŸ¥é“è¿™ä¸ªåŠŸèƒ½æ˜¯å¦è¿˜å­˜åœ¨ç¼–è¾‘ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œç›´æ¥å°†è¯¥ç»“æ„è½¬æˆå›¾ç‰‡è¿”å›å³å¯ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¿å­˜å°±ç›´æ¥å°†æ•°æ®å’Œå›¾ç‰‡éƒ½ä¼ é€’è¿‡å»å³å¯ã€‚ä¸€èˆ¬è¿™ç§å¤§é‡æ•°æ®å­˜åç«¯éƒ½æ˜¯JSONå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥è½¬æˆjsonå­—ç¬¦ä¸²å­˜å‚¨ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">Future&lt;<span class="hljs-keyword">void</span>&gt; _onSave() <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">if</span> (_isLoading) <span class="hljs-keyword">return</span>;
  _isLoading = <span class="hljs-keyword">true</span>;

  <span class="hljs-keyword">if</span> (_currentElement != <span class="hljs-keyword">null</span>) {
    setState(() {
      _currentElement = <span class="hljs-keyword">null</span>;
    });
  }

  <span class="hljs-keyword">if</span> (_currentElement == <span class="hljs-keyword">null</span>) {
    <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> imagePath = <span class="hljs-keyword">await</span> _getImagePath();
    <span class="hljs-keyword">final</span> <span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt;&gt; tempStringList = _elementList.map((item) =&gt; ElementModel.toJson(item)).toList();

    widget.onSave(imgSrc: imagePath, data: jsonEncode(tempStringList));

    _isLoading = <span class="hljs-keyword">false</span>;
  } <span class="hljs-keyword">else</span> {
    _isLoading = <span class="hljs-keyword">false</span>;
    _onSave();
  }
}
</code></pre>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/748f17a3018a49ba9d0ff1e5f5c2b255~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCN5a2X6KKr5L2g5Lus5oOz5a6M5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767451521&amp;x-signature=B6r1hNHSSOFgtXUEILCAwe5wbmg%3D" alt="image03.gif" loading="lazy"/></p>
<p>è¿™æ ·æˆ‘ä»¬å°±ç®€å•å®ç°äº†å›¾ç‰‡çš„ç”Ÿæˆï¼Œå¹¶ä¸”å°†æ•°æ®è½¬æ¢æˆJSONå­—ç¬¦ä¸²ä¼ é€’ç»™åç«¯ä¿å­˜ï¼Œåç»­åç«¯è¿”å›è¿™ä¸ªå­—ç¬¦ä¸²å†è¿˜åŸå°±å¯ä»¥è¿›è¡Œç¼–è¾‘ã€‚è¿™æ ·å°±ç®€å•å®ç°äº†åŸºç¡€çš„åŠŸèƒ½ï¼Œåç»­å°±å®ç°è¾…åŠ©çš„åŠŸèƒ½ã€‚</p>
<p>æ„Ÿå…´è¶£çš„ä¹Ÿå¯ä»¥å…³æ³¨æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·ã€å‰ç«¯å­¦ä¹ å°è¥åœ°ã€‘ï¼Œä¸å®šæ—¶ä¼šåˆ†äº«ä¸€äº›å°åŠŸèƒ½ï½</p>
<p>å¥½äº†ï¼Œä»Šå¤©çš„åˆ†äº«åˆ°æ­¤ç»“æŸï¼Œæ„Ÿè°¢é˜…è¯»ï½æ‹œæ‹œï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[static å’Œ lib/assetsèµ„æºåŒºåˆ«]]></title>    <link>https://juejin.cn/post/7588149079417208886</link>    <guid>https://juejin.cn/post/7588149079417208886</guid>    <pubDate>2025-12-27T14:50:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588149079417208886" data-draft-id="7588149079417192502" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="static å’Œ lib/assetsèµ„æºåŒºåˆ«"/> <meta itemprop="keywords" content="å‰ç«¯,Svelte"/> <meta itemprop="datePublished" content="2025-12-27T14:50:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Robet"/> <meta itemprop="url" content="https://juejin.cn/user/193141028175320"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            static å’Œ lib/assetsèµ„æºåŒºåˆ«
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/193141028175320/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Robet
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T14:50:05.000Z" title="Sat Dec 27 2025 14:50:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸å…³é”®çš„é—®é¢˜ï¼åœ¨ <strong>SvelteKit</strong> é¡¹ç›®ä¸­ï¼Œ<code>static/</code> ç›®å½•å’Œ <code>src/lib/assets/</code>ï¼ˆæˆ–ä»»ä½• <code>src/</code> ä¸‹çš„èµ„æºï¼‰å¤„ç†æ–¹å¼<strong>å®Œå…¨ä¸åŒ</strong>ï¼Œç›´æ¥å½±å“åˆ°ï¼š</p>
<ul>
<li>èµ„æºæ˜¯å¦è¢« <strong>æ„å»ºå·¥å…·å¤„ç†</strong></li>
<li>æ˜¯å¦æ”¯æŒ <strong>å“ˆå¸Œæ–‡ä»¶åï¼ˆç¼“å­˜ä¼˜åŒ–ï¼‰</strong></li>
<li>å¦‚ä½• <strong>å¼•ç”¨èµ„æºè·¯å¾„</strong></li>
<li>æ˜¯å¦èƒ½ä½¿ç”¨ <strong>ESM å¯¼å…¥è¯­æ³•</strong></li>
</ul>
<hr/>
<h2 data-id="heading-0">âœ… æ ¸å¿ƒåŒºåˆ«æ€»ç»“</h2>



































<table><thead><tr><th>ç‰¹æ€§</th><th><code>static/</code> ç›®å½•</th><th><code>src/lib/assets/</code>ï¼ˆæˆ–å…¶ä»– <code>src/</code> ä¸‹ï¼‰</th></tr></thead><tbody><tr><td><strong>æ˜¯å¦ç»è¿‡ Vite æ„å»º</strong></td><td>âŒ ä¸å¤„ç†ï¼ŒåŸæ ·å¤åˆ¶</td><td>âœ… ä¼šç»è¿‡ Vite å¤„ç†ï¼ˆå‹ç¼©ã€å“ˆå¸Œã€ä¼˜åŒ–ï¼‰</td></tr><tr><td><strong>è¾“å‡ºä½ç½®</strong></td><td>ç›´æ¥å¤åˆ¶åˆ° <code>build/</code> æ ¹ç›®å½•</td><td>æ‰“åŒ…è¿› <code>build/_app/assets/...</code></td></tr><tr><td><strong>å¼•ç”¨æ–¹å¼</strong></td><td>ç»å¯¹è·¯å¾„ <code>/image.png</code></td><td>å¿…é¡»é€šè¿‡ <strong>ESM å¯¼å…¥</strong>ï¼š<code>import img from '$lib/assets/image.png'</code></td></tr><tr><td><strong>æ–‡ä»¶åå“ˆå¸Œ</strong></td><td>âŒ æ— ï¼ˆä¸åˆ©äºé•¿æœŸç¼“å­˜ï¼‰</td><td>âœ… æœ‰ï¼ˆå¦‚ <code>image.abc123.png</code>ï¼Œåˆ©äº CDN ç¼“å­˜ï¼‰</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>robots.txtã€favicon.icoã€sitemap.xml ç­‰<strong>é™æ€ Web èµ„æº</strong></td><td>åº”ç”¨å†…ä½¿ç”¨çš„å›¾ç‰‡ã€å›¾æ ‡ã€å­—ä½“ç­‰<strong>æ¨¡å—åŒ–èµ„æº</strong></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-1">ğŸ” è¯¦ç»†è§£é‡Š</h2>
<h3 data-id="heading-2">1. <strong><code>static/</code> ç›®å½• â€”â€” â€œçº¯é™æ€ Web æ ¹ç›®å½•â€</strong></h3>
<ul>
<li>
<p>SvelteKit åœ¨æ„å»ºæ—¶ï¼Œä¼š<strong>åŸå°ä¸åŠ¨åœ°å°† <code>static/</code> å†…å®¹å¤åˆ¶åˆ°è¾“å‡ºç›®å½•ï¼ˆ<code>build/</code>ï¼‰çš„æ ¹éƒ¨</strong>ã€‚</p>
</li>
<li>
<p>è¿™äº›æ–‡ä»¶<strong>ä¸ä¼šè¢« Vite å¤„ç†</strong>ï¼ˆä¸å‹ç¼©ã€ä¸é‡å‘½åã€ä¸å“ˆå¸Œï¼‰ã€‚</p>
</li>
<li>
<p>æµè§ˆå™¨é€šè¿‡ <strong>ç»å¯¹è·¯å¾„</strong> è®¿é—®ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- åœ¨ +layout.svelte æˆ– app.html ä¸­ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"icon"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/favicon.ico"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/images/logo.png"</span> /&gt;</span>
</code></pre>
</li>
<li>
<p><strong>å…¸å‹ç”¨é€”</strong>ï¼š</p>
<ul>
<li><code>favicon.ico</code></li>
<li><code>robots.txt</code></li>
<li><code>sitemap.xml</code></li>
<li>ç¬¬ä¸‰æ–¹éªŒè¯æ–‡ä»¶ï¼ˆå¦‚ <code>google-site-verification=xxx.html</code>ï¼‰</li>
<li>éœ€è¦å›ºå®š URL çš„å…¬å¼€èµ„æº</li>
</ul>
</li>
</ul>
<blockquote>
<p>âš ï¸ å¦‚æœä½ æŠŠåº”ç”¨å†…çš„å›¾ç‰‡æ”¾è¿™é‡Œï¼ˆå¦‚ <code>/static/product.jpg</code>ï¼‰ï¼Œä¼šå¯¼è‡´ï¼š</p>
<ul>
<li>æ— æ³•åˆ©ç”¨å†…å®¹å“ˆå¸Œ â†’ ç”¨æˆ·å¯èƒ½çœ‹åˆ°æ—§å›¾ï¼ˆç¼“å­˜é—®é¢˜ï¼‰</li>
<li>æ— æ³• tree-shaking æœªä½¿ç”¨çš„å›¾ç‰‡</li>
<li>æ— æ³•ä½¿ç”¨ç°ä»£å›¾åƒæ ¼å¼è‡ªåŠ¨è½¬æ¢ï¼ˆå¦‚ WebPï¼‰</li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-3">2. <strong><code>src/lib/assets/</code> â€”â€” â€œæ¨¡å—åŒ–èµ„æºâ€</strong></h3>
<ul>
<li>
<p>è¿™äº›æ–‡ä»¶è¢«è§†ä¸º <strong>JavaScript æ¨¡å—ä¾èµ–</strong>ã€‚</p>
</li>
<li>
<p>å¿…é¡»é€šè¿‡ <strong>ESM <code>import</code> è¯­å¥</strong> å¼•ç”¨ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- åœ¨ .svelte æˆ– .js æ–‡ä»¶ä¸­ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">import</span> logo <span class="hljs-keyword">from</span> <span class="hljs-string">'$lib/assets/logo.png'</span>;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{logo}</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"Logo"</span> /&gt;</span>
</code></pre>
</li>
<li>
<p>Vite ä¼šï¼š</p>
<ul>
<li>ä¸ºæ–‡ä»¶ç”Ÿæˆ <strong>å”¯ä¸€å“ˆå¸Œå</strong>ï¼ˆå¦‚ <code>logo.a1b2c3.png</code>ï¼‰</li>
<li>è‡ªåŠ¨ä¼˜åŒ–ï¼ˆå‹ç¼©ã€è½¬ WebP ç­‰ï¼Œéœ€é…ç½®ï¼‰</li>
<li>åªæ‰“åŒ…<strong>å®é™…è¢«å¼•ç”¨çš„èµ„æº</strong></li>
<li>æ”¯æŒåŠ¨æ€ <code>import()</code>ï¼ˆæŒ‰éœ€åŠ è½½ï¼‰</li>
</ul>
</li>
<li>
<p>è¾“å‡ºè·¯å¾„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs">build/
â””â”€â”€ _app/
    â””â”€â”€ assets/
        â””â”€â”€ logo.a1b2c3.png
</code></pre>
</li>
</ul>
<blockquote>
<p>âœ… <strong>è¿™æ˜¯ SvelteKit æ¨èçš„åº”ç”¨å†…èµ„æºç®¡ç†æ–¹å¼ï¼</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-4">ğŸ§ª å¯¹æ¯”ç¤ºä¾‹</h2>
<h3 data-id="heading-5">åœºæ™¯ï¼šåœ¨é¡µé¢ä¸­æ˜¾ç¤ºä¸€å¼  logo</h3>
<h4 data-id="heading-6">âŒ é”™è¯¯åšæ³•ï¼ˆæŠŠåº”ç”¨å›¾ç‰‡æ”¾ staticï¼‰</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- src/routes/+page.svelte --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/logo.png"</span> /&gt;</span>  <span class="hljs-comment">&lt;!-- æ¥è‡ª static/logo.png --&gt;</span>
</code></pre>
<ul>
<li>é—®é¢˜ï¼šURL å›ºå®šä¸º <code>/logo.png</code>ï¼Œæµè§ˆå™¨ç¼“å­˜åæ›´æ–°å›°éš¾ã€‚</li>
</ul>
<h4 data-id="heading-7">âœ… æ­£ç¡®åšæ³•ï¼ˆç”¨ <code>$lib/assets/</code>ï¼‰</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- src/routes/+page.svelte --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">import</span> logo <span class="hljs-keyword">from</span> <span class="hljs-string">'$lib/assets/logo.png'</span>;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{logo}</span> /&gt;</span>
</code></pre>
<ul>
<li>æ¸²æŸ“ç»“æœï¼š<code>&lt;img src="/_app/assets/logo.a1b2c3.png" /&gt;</code></li>
<li>ä¼˜åŠ¿ï¼šæ–‡ä»¶åå«å“ˆå¸Œï¼Œæ›´æ–°å³å¤±æ•ˆç¼“å­˜ï¼ŒCDN å‹å¥½ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-8">ğŸ“ æ¨èç›®å½•ç»“æ„</h2>
<pre><code class="hljs language-scss" lang="scss">project/
â”œâ”€â”€ static/
â”‚   â”œâ”€â”€ favicon<span class="hljs-selector-class">.ico</span>        â† å¿…é¡»æ”¾è¿™é‡Œï¼ˆæµè§ˆå™¨å›ºå®šè¯·æ±‚ /favicon<span class="hljs-selector-class">.ico</span>ï¼‰
â”‚   â”œâ”€â”€ robots<span class="hljs-selector-class">.txt</span>         â† å¿…é¡»æ”¾è¿™é‡Œ
â”‚   â””â”€â”€ vercel<span class="hljs-selector-class">.svg</span>         â† ç¬¬ä¸‰æ–¹éªŒè¯æ–‡ä»¶
â””â”€â”€ <span class="hljs-attribute">src</span>/
    â””â”€â”€ lib/
        â””â”€â”€ assets/
            â”œâ”€â”€ images/
            â”‚   â”œâ”€â”€ logo<span class="hljs-selector-class">.png</span>
            â”‚   â””â”€â”€ hero<span class="hljs-selector-class">.jpg</span>
            â””â”€â”€ icons/
                â””â”€â”€ star<span class="hljs-selector-class">.svg</span>
</code></pre>
<hr/>
<h2 data-id="heading-9">ğŸ’¡ ç‰¹æ®Šæƒ…å†µï¼šä»€ä¹ˆæ—¶å€™ç”¨ <code>static/</code> å­˜å›¾ç‰‡ï¼Ÿ</h2>
<p>ä»…å½“ä½ <strong>éœ€è¦å›ºå®š URL ä¸”ä¸å¸Œæœ›è¢«æ„å»ºå·¥å…·å¤„ç†</strong>æ—¶ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>ä¸€ä¸ªå…¬å¼€çš„åˆ†äº«å›¾ï¼ŒURL å¿…é¡»æ˜¯ <code>https://yoursite.com/share-banner.jpg</code></li>
<li>ç¬¬ä¸‰æ–¹å¹³å°è¦æ±‚ç‰¹å®šè·¯å¾„çš„å›¾ç‰‡ï¼ˆå¦‚å¾®ä¿¡å…¬ä¼—å·ç´ æï¼‰</li>
<li>éå¸¸å¤§çš„èƒŒæ™¯å›¾ï¼Œä¸æƒ³è¢«æ‰“åŒ…ï¼ˆä½†é€šå¸¸ä»å»ºè®®ç”¨ ESM + åŠ¨æ€å¯¼å…¥ï¼‰</li>
</ul>
<p>å¦åˆ™ï¼Œ<strong>ä¸€å¾‹ä½¿ç”¨ <code>$lib/assets/</code> + <code>import</code></strong>ã€‚</p>
<hr/>
<h2 data-id="heading-10">âœ… æ€»ç»“ä¸€å¥è¯</h2>
<blockquote>
<p><strong><code>static/</code> æ˜¯ç»™â€œWeb æœåŠ¡å™¨â€çœ‹çš„é™æ€æ–‡ä»¶ï¼›<br/>
<code>src/lib/assets/</code> æ˜¯ç»™â€œä½ çš„åº”ç”¨ä»£ç â€ç”¨çš„æ¨¡å—åŒ–èµ„æºã€‚</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘Šåˆ«é‡å¤ä¼ å‚ï¼ç”¨æŸ¯é‡ŒåŒ–æå‡ä»£ç ä¼˜é›…åº¦]]></title>    <link>https://juejin.cn/post/7588146449005838372</link>    <guid>https://juejin.cn/post/7588146449005838372</guid>    <pubDate>2025-12-27T15:54:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588146449005838372" data-draft-id="7588191506606129158" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘Šåˆ«é‡å¤ä¼ å‚ï¼ç”¨æŸ¯é‡ŒåŒ–æå‡ä»£ç ä¼˜é›…åº¦"/> <meta itemprop="keywords" content="JavaScript,é¢è¯•,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-27T15:54:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é±¼é±¼å—"/> <meta itemprop="url" content="https://juejin.cn/user/4302802432307224"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘Šåˆ«é‡å¤ä¼ å‚ï¼ç”¨æŸ¯é‡ŒåŒ–æå‡ä»£ç ä¼˜é›…åº¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4302802432307224/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é±¼é±¼å—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T15:54:39.000Z" title="Sat Dec 27 2025 15:54:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æŸ¯é‡ŒåŒ–ï¼šè®©å‡½æ•°â€œæ…¢æ…¢æ¥â€ï¼Œä¸€æ¬¡åªåƒä¸€å£</h2>
<p>åœ¨ç¼–ç¨‹ä¸–ç•Œé‡Œï¼Œæˆ‘ä»¬å¸¸å¸¸ä¼šé‡åˆ°è¿™æ ·ä¸€ç§åœºæ™¯ï¼šä¸€ä¸ªå‡½æ•°éœ€è¦å¤šä¸ªå‚æ•°æ‰èƒ½å®Œæˆä»»åŠ¡ã€‚ä½†æœ‰æ—¶å€™ï¼Œè¿™äº›å‚æ•°å¹¶ä¸ä¼šä¸€ä¸‹å­å…¨éƒ¨å‡†å¤‡å¥½â€”â€”å¯èƒ½ä»Šå¤©çŸ¥é“ç¬¬ä¸€ä¸ªï¼Œæ˜å¤©æ‹¿åˆ°ç¬¬äºŒä¸ªï¼Œåå¤©æ‰å‡‘é½å…¨éƒ¨ã€‚</p>
<p>è¿™æ—¶å€™ï¼Œ<strong>æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰</strong> å°±æ´¾ä¸Šç”¨åœºäº†ã€‚å®ƒå°±åƒä¸€ä½è€å¿ƒçš„å¨å¸ˆï¼Œä¸æ€¥ç€æŠŠæ•´é“èœåšå®Œï¼Œè€Œæ˜¯å…ˆè®°ä½ä½ å·²ç»ç»™çš„é£Ÿæï¼Œç­‰ä½ æŠŠå‰©ä¸‹çš„ææ–™é™†ç»­é€æ¥ï¼Œå†ä¸€é”…ç‚’å¥½ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä»æœ€ç®€å•çš„åŠ æ³•è¯´èµ·</h3>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ™®é€šçš„åŠ æ³•å‡½æ•°ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) {
  <span class="hljs-keyword">return</span> a + b;
}
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)); <span class="hljs-comment">// è¾“å‡º 3</span>
</code></pre>
<p>è¿™å¾ˆç›´æ¥ï¼šä¸¤ä¸ªæ•°ä¸€èµ·ä¼ è¿›å»ï¼Œç«‹åˆ»å‡ºç»“æœã€‚ä½†å¦‚æœæˆ‘åªèƒ½å…ˆç»™ä½  <code>a</code>ï¼Œè¿‡ä¸€ä¼šå„¿å†å‘Šè¯‰ä½  <code>b</code> å‘¢ï¼Ÿæ™®é€šå‡½æ•°å°±æ— èƒ½ä¸ºåŠ›äº†ã€‚</p>
<p>äºæ˜¯æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨â€œæŸ¯é‡ŒåŒ–â€ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">b</span>) {
    <span class="hljs-keyword">return</span> a + b;
  };
}
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>)(<span class="hljs-number">2</span>)); <span class="hljs-comment">// è¾“å‡º 3</span>
</code></pre>
<p>ä½ çœ‹ï¼Œç°åœ¨ <code>add(1)</code> è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°â€œè®°å¾—â€äº† <code>a = 1</code>ï¼Œç­‰ä½ å†è°ƒç”¨å®ƒä¼ å…¥ <code>b</code>ï¼Œå°±èƒ½ç®—å‡ºç»“æœã€‚è¿™èƒŒåé çš„æ˜¯ <strong>é—­åŒ…</strong>â€”â€”å†…éƒ¨å‡½æ•°å¯ä»¥â€œè®°ä½â€å¤–éƒ¨å‡½æ•°çš„å˜é‡ï¼Œå³ä½¿å¤–éƒ¨å‡½æ•°å·²ç»æ‰§è¡Œå®Œäº†ã€‚</p>
<p>è¿™ç§å†™æ³•è™½ç„¶å¯è¡Œï¼Œä½†åªé€‚ç”¨äºå›ºå®šä¸¤ä¸ªå‚æ•°çš„æƒ…å†µã€‚å¦‚æœå‡½æ•°æœ‰ä¸‰ä¸ªã€å››ä¸ªç”šè‡³æ›´å¤šå‚æ•°ï¼Œæ‰‹åŠ¨åµŒå¥—å†™èµ·æ¥ä¼šéå¸¸ç¹çï¼Œè€Œä¸”éš¾ä»¥å¤ç”¨</p>
<hr/>
<h3 data-id="heading-2">è‡ªåŠ¨æŸ¯é‡ŒåŒ–ï¼šé€šç”¨è§£å†³æ–¹æ¡ˆ</h3>
<p>æ‰‹åŠ¨ä¸ºæ¯ä¸ªå‡½æ•°å†™æŸ¯é‡ŒåŒ–ç‰ˆæœ¬å¤ªéº»çƒ¦äº†ã€‚æœ‰æ²¡æœ‰åŠæ³•å†™ä¸€ä¸ªâ€œä¸‡èƒ½å·¥å…·â€ï¼Œè‡ªåŠ¨æŠŠä»»æ„å¤šå‚å‡½æ•°å˜æˆå¯é€æ­¥ä¼ å‚çš„å½¢å¼ï¼Ÿ</p>
<p>å½“ç„¶æœ‰ï¼æ¥çœ‹è¿™ä¸ªé€šç”¨çš„ <code>curry</code> å‡½æ•°ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b, c, d</span>) {
  <span class="hljs-keyword">return</span> a + b + c + d;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">curry</span>(<span class="hljs-params">fn</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">curried</span>(<span class="hljs-params">...args</span>) {
    <span class="hljs-keyword">if</span> (args.<span class="hljs-property">length</span> &gt;= fn.<span class="hljs-property">length</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">fn</span>(...args); <span class="hljs-comment">// å‚æ•°å¤Ÿäº†ï¼Œç›´æ¥æ‰§è¡Œ</span>
    }
    <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">...rest</span>) =&gt;</span> <span class="hljs-title function_">curried</span>(...args, ...rest); <span class="hljs-comment">// ä¸å¤Ÿï¼Ÿç»§ç»­æ”¶</span>
  };
}

<span class="hljs-keyword">const</span> curriedAdd = <span class="hljs-title function_">curry</span>(add);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">curriedAdd</span>(<span class="hljs-number">1</span>)(<span class="hljs-number">2</span>)(<span class="hljs-number">3</span>)(<span class="hljs-number">4</span>)); <span class="hljs-comment">// 10</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">curriedAdd</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)); <span class="hljs-comment">// 10ï¼Œä¹Ÿå¯ä»¥ä¸€æ¬¡ä¼ å¤šä¸ª</span>
</code></pre>
<h4 data-id="heading-3">å®ƒæ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ</h4>
<ul>
<li><code>fn.length</code> æ˜¯ JavaScript ä¸­å‡½æ•°çš„ä¸€ä¸ªå±æ€§ï¼Œè¡¨ç¤ºè¯¥å‡½æ•°<strong>å£°æ˜æ—¶å®šä¹‰çš„å‚æ•°ä¸ªæ•°</strong>ï¼ˆä¸åŒ…æ‹¬å‰©ä½™å‚æ•°ï¼‰ã€‚</li>
<li>æ¯æ¬¡è°ƒç”¨ <code>curried</code>ï¼Œéƒ½ä¼šæ”¶é›†å½“å‰ä¼ å…¥çš„å‚æ•°ï¼ˆé€šè¿‡ <code>...args</code>ï¼‰ã€‚</li>
<li>å¦‚æœå½“å‰å‚æ•°æ•°é‡ â‰¥ åŸå‡½æ•°æ‰€éœ€å‚æ•°æ•°é‡ï¼Œå°±ç«‹å³æ‰§è¡Œ <code>fn(...args)</code>ã€‚</li>
<li>å¦åˆ™ï¼Œè¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œè¿™ä¸ªæ–°å‡½æ•°ä¼šæŠŠå·²æœ‰çš„ <code>args</code> å’Œåç»­ä¼ å…¥çš„ <code>rest</code> åˆå¹¶ï¼Œå†æ¬¡è°ƒç”¨ <code>curried</code> â€”â€” è¿™å°±æ˜¯é€’å½’çš„æ€æƒ³ã€‚</li>
</ul>
<p>åªè¦æ”¶é›†åˆ°è¶³å¤Ÿæ•°é‡çš„å‚æ•°ï¼Œå°±ç«‹åˆ»æ‰§è¡Œï¼›å¦åˆ™ï¼Œè¿”å›ä¸€ä¸ªæ–°å‡½æ•°ç»§ç»­ç­‰å¾…ã€‚</p>
<blockquote>
<p>ğŸ” <strong>æ³¨æ„</strong>ï¼šè¿™ä¸ªå®ç°åˆ©ç”¨äº† <strong>é—­åŒ… + é€’å½’</strong> çš„æ€æƒ³ã€‚æ¯æ¬¡è°ƒç”¨éƒ½æŠŠå·²æœ‰çš„å‚æ•°â€œå­˜èµ·æ¥â€ï¼Œç›´åˆ°æ”’å¤Ÿä¸ºæ­¢ã€‚è€Œé—­åŒ…ä¿è¯äº†è¿™äº›ä¸­é—´å‚æ•°ä¸ä¼šä¸¢å¤±ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-4">å®æˆ˜ï¼šæ—¥å¿—å‡½æ•°çš„æŸ¯é‡ŒåŒ–å¦™ç”¨</h3>
<p>æŸ¯é‡ŒåŒ–ä¸åªæ˜¯ç‚«æŠ€ï¼Œå®ƒåœ¨å®é™…å¼€å‘ä¸­éå¸¸æœ‰ç”¨ã€‚æ¯”å¦‚å¤„ç†æ—¥å¿—ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">log</span> = type =&gt; <span class="hljs-function"><span class="hljs-params">message</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${type}</span>: <span class="hljs-subst">${message}</span>`</span>);
};

<span class="hljs-keyword">const</span> errorLog = <span class="hljs-title function_">log</span>(<span class="hljs-string">'ERROR'</span>);
<span class="hljs-keyword">const</span> infoLog = <span class="hljs-title function_">log</span>(<span class="hljs-string">'info'</span>);

<span class="hljs-title function_">errorLog</span>(<span class="hljs-string">'æ¥å£å¼‚å¸¸'</span>);        <span class="hljs-comment">// è¾“å‡º: ERROR: æ¥å£å¼‚å¸¸</span>
<span class="hljs-title function_">infoLog</span>(<span class="hljs-string">'é¡µé¢åŠ è½½å®Œæˆ'</span>);     <span class="hljs-comment">// è¾“å‡º: info: é¡µé¢åŠ è½½å®Œæˆ</span>
</code></pre>
<p>è¿™é‡Œï¼Œ<code>log</code> æ˜¯ä¸€ä¸ªæŸ¯é‡ŒåŒ–å‡½æ•°ã€‚æˆ‘ä»¬å…ˆå›ºå®šæ—¥å¿—ç±»å‹ï¼ˆå¦‚ <code>'ERROR'</code>ï¼‰ï¼Œå¾—åˆ°ä¸€ä¸ªä¸“é—¨æ‰“é”™è¯¯æ—¥å¿—çš„å‡½æ•° <code>errorLog</code>ã€‚ä»¥ååªè¦ä¼ æ¶ˆæ¯å†…å®¹å°±è¡Œï¼Œä¸ç”¨æ¯æ¬¡éƒ½å†™ç±»å‹ã€‚</p>
<h4 data-id="heading-5">ä¼˜åŠ¿åœ¨å“ªé‡Œï¼Ÿ</h4>
<ol>
<li><strong>å‡å°‘é‡å¤ä»£ç </strong>ï¼šä¸éœ€è¦æ¯æ¬¡å†™ <code>log('error', 'xxx')</code>ã€‚</li>
<li><strong>æé«˜å¯è¯»æ€§</strong>ï¼š<code>errorLog('xxx')</code> æ¯” <code>log('error', 'xxx')</code> æ›´ç›´è§‚ã€‚</li>
<li><strong>ä¾¿äºç»„åˆä¸å¤ç”¨</strong>ï¼šå¯ä»¥è½»æ¾åˆ›å»ºä¸åŒçº§åˆ«çš„æ—¥å¿—å™¨ï¼Œå¹¶åœ¨å¤šä¸ªæ¨¡å—ä¸­å…±äº«ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-6">æ€»ç»“ï¼šæŸ¯é‡ŒåŒ–çš„ä¸‰å¤§æ ¸å¿ƒ</h3>
<ol>
<li><strong>é—­åŒ…</strong>ï¼šä¿å­˜å·²ä¼ å…¥çš„å‚æ•°ï¼Œä¸ä¼šè¢«åƒåœ¾å›æ”¶ã€‚</li>
<li><strong>é€’å½’/é“¾å¼è°ƒç”¨</strong>ï¼šæ¯æ¬¡è¿”å›æ–°å‡½æ•°ï¼Œç»§ç»­æ¥æ”¶å‰©ä½™å‚æ•°ã€‚</li>
<li><strong>é€€å‡ºæ¡ä»¶</strong>ï¼šå½“å‚æ•°æ•°é‡è¾¾åˆ°åŸå‡½æ•°è¦æ±‚ï¼ˆ<code>fn.length</code>ï¼‰ï¼Œå°±æ‰§è¡Œå¹¶è¿”å›ç»“æœã€‚</li>
</ol>
<p>æŸ¯é‡ŒåŒ–ä¸æ˜¯å¿…é¡»ç”¨çš„æŠ€æœ¯ï¼Œä½†å®ƒèƒ½è®©ä½ çš„å‡½æ•°æ›´çµæ´»ã€æ›´å…·ç»„åˆæ€§ã€‚å°±åƒä¹é«˜ç§¯æœ¨â€”â€”ä½ å¯ä»¥å…ˆæ‹¼å¥½ä¸€éƒ¨åˆ†ï¼Œç­‰éœ€è¦æ—¶å†æ¥ä¸Šå…¶ä»–æ¨¡å—ï¼Œæœ€ç»ˆæ­å‡ºå®Œæ•´ä½œå“ã€‚</p>
<p>ä¸‹æ¬¡å½“ä½ å‘ç°æŸä¸ªå‡½æ•°æ€»æ˜¯åœ¨ä¸åŒåœ°æ–¹ä¼ ç›¸åŒçš„å‰å‡ ä¸ªå‚æ•°æ—¶ï¼Œä¸å¦¨è¯•è¯•æŸ¯é‡ŒåŒ–â€”â€”è®©å‡½æ•°å­¦ä¼šâ€œç­‰ä¸€ç­‰â€ï¼Œè¯´ä¸å®šä»£ç ä¼šå˜å¾—æ›´ä¼˜é›…ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI Agents]]></title>    <link>https://juejin.cn/post/7588042910198038578</link>    <guid>https://juejin.cn/post/7588042910198038578</guid>    <pubDate>2025-12-27T10:35:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588042910198038578" data-draft-id="7536182225327718442" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI Agents"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-27T10:35:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜­ç‰§Deç¢ç¢å¿µ"/> <meta itemprop="url" content="https://juejin.cn/user/2718458506388391"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI Agents
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2718458506388391/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜­ç‰§Deç¢ç¢å¿µ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T10:35:56.000Z" title="Sat Dec 27 2025 10:35:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">AI Agent å®šä¹‰ã€åŸç†</h2>
<blockquote>
<p>å…ˆæŠ“ä½æ ¸å¿ƒåŸç†ã€å®šä¹‰å’Œå…³é”®ç‰¹å¾ï¼Œé¿å…è¢«ç»†èŠ‚æ·¹æ²¡ã€‚</p>
</blockquote>
<h3 data-id="heading-1">å‘å±•å†å²</h3>
<p>AI Agent ä¸æ˜¯æŸä¸€ä¸ªäººåœ¨æŸä¸€åˆ»å‘æ˜çš„ä¸“åˆ©æ¦‚å¿µï¼Œè€Œæ˜¯å‡ åå¹´é‡Œéšç€äººå·¥æ™ºèƒ½é¢†åŸŸçš„å‘å±•é€æ¸æ¼”å˜ï¼Œç”±è¡Œä¸šæ€»ç»“å‡ºæ¥çš„</p>

























<table><thead><tr><th>æ—¶é—´</th><th>äº‹ä»¶/äººç‰©</th><th>è´¡çŒ®</th></tr></thead><tbody><tr><td>1960s-1990s</td><td>äººå·¥æ™ºèƒ½ç ”ç©¶å‘å±•ï¼Œäº§ç”Ÿè‡ªåŠ¨æ¨ç†ã€ä¸“å®¶ç³»ç»Ÿã€æ™ºèƒ½æœºå™¨äººã€æœºå™¨å­¦ä¹ ç­‰ç ”ç©¶æ–¹å‘ã€‚å…·æœ‰ä»£è¡¨æ€§çš„æ˜¯ ELIZAï¼ŒELIZA é€šè¿‡"å…³é”®è¯åŒ¹é…"+"æ¨¡ç‰ˆæ›¿æ¢"çš„æ–¹å¼ï¼Œå°†ç”¨æˆ·é™ˆè¿°è½¬åŒ–ä¸ºé—®é¢˜ï¼Œå¼•å¯¼å¯¹è¯å»¶ç»­æ¥æ¨¡æ‹Ÿå¿ƒç†æ²»ç–—å¸ˆã€‚        <a href="https://link.juejin.cn?target=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FELIZA" target="_blank" title="https://en.wikipedia.org/wiki/ELIZA" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53cefc04bc5742d49bf308c67fe1c845~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pit54mnRGXnoo7noo7lv7U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767436556&amp;x-signature=fYbT99B3iSSRvdvs4LDBguiFW9g%3D" alt="image.png" loading="lazy"/></a></td><td>è™½æ— çœŸæ­£çš„æ™ºèƒ½ï¼Œå´ç”¨æœ€ç®€å•çš„æŠ€æœ¯å¯¹æ™ºèƒ½ä½œå‡ºäº†æ¢ç´¢</td></tr><tr><td>1995å¹´</td><td>ã€Š Artificial Intelligence: A Modern Approach ã€‹å‡ºç‰ˆ ï¼Œç»Ÿä¸€äº† AI ç ”ç©¶æ–¹å‘ï¼Œæ— è®ºç¬¦å·ä¸»ä¹‰ã€è¿æ¥ä¸»ä¹‰è¿˜æ˜¯æ¦‚ç‡æ–¹æ³•ï¼Œæœ€ç»ˆéƒ½å¯å½’ä¸ºï¼Œè®¾è®¡ç†æ€§æ™ºèƒ½ä½“ï¼ˆRational Agentï¼‰çš„ä¸åŒå®ç°æ–¹å¼ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fpeople.eecs.berkeley.edu%2F~russell%2Faima1e%2Fchapter02.pdf" target="_blank" title="https://people.eecs.berkeley.edu/~russell/aima1e/chapter02.pdf" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe802f6aa71849178b105caeb2c0f8b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pit54mnRGXnoo7noo7lv7U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767436556&amp;x-signature=tsXns2DYUxldtEtuNGmdMNQ%2BoSE%3D" alt="image.png" loading="lazy"/></a></td><td>æå‡º Agent çš„ç»å…¸å®šä¹‰ï¼Œé€šè¿‡æ„ŸçŸ¥ç¯å¢ƒã€è‡ªä¸»å†³ç­–å¹¶æ‰§è¡Œè¡ŒåŠ¨ä»¥æœ€å¤§åŒ–ç›®æ ‡è¾¾æˆçš„å®ä½“</td></tr><tr><td>2020å¹´ä»£</td><td>OpenAIã€Google DeepMindã€Anthropic ç­‰å…¬å¸æ ¹æ®è¡Œä¸šå®è·µå’Œç ”ç©¶é€æ­¥æ€»ç»“å‡ºæ¥ AI Agent çš„å®šä¹‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fbytebytego.com%2Fguides%2Fwhat-is-an-ai-agent%2F" target="_blank" title="https://bytebytego.com/guides/what-is-an-ai-agent/" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c9da32a871341a8b3df0e809ff5b293~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pit54mnRGXnoo7noo7lv7U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767436556&amp;x-signature=qXJmzR2xqPwtutT1Bkrq7PpUVVk%3D" alt="image.png" loading="lazy"/></a></td><td>åŸºäº AI çš„å¿«é€Ÿå‘å±•ï¼Œå’Œå·²æœ‰çš„ Agent æ¦‚å¿µï¼Œæ€»ç»“å‡º AI Agent</td></tr></tbody></table>
<h3 data-id="heading-2">å®šä¹‰</h3>
<p>AI Agent æ˜¯ä¸€ä¸ªèƒ½è®© <strong>å¤§æ¨¡å‹ï¼ˆLLMï¼‰</strong> é€šè¿‡ <strong>è®¿é—®å·¥å…·ï¼ˆAccess To Toolsï¼‰</strong> ã€<strong>è®°å¿†å’ŒçŸ¥è¯†ï¼ˆMemory Knowledgeï¼‰</strong> ï¼Œå» <strong>æ‰§è¡Œæ“ä½œï¼ˆPerform Actionsï¼‰</strong> çš„ç³»ç»Ÿã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2Fai-agents-for-beginners%2Fblob%2Fmain%2F01-intro-to-ai-agents%2FREADME.md" target="_blank" title="https://github.com/microsoft/ai-agents-for-beginners/blob/main/01-intro-to-ai-agents/README.md" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3eaaaae77faa43f386c02abbc63fc572~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pit54mnRGXnoo7noo7lv7U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767436556&amp;x-signature=jQqEwqGRaQij1FDlslvJn9iv6hw%3D" alt="image.png" loading="lazy"/></a></p>
<ul>
<li>
<p><strong>LLM Large Language Model</strong>ï¼Œå¤§è¯­è¨€æ¨¡å‹ï¼Œä¾‹å¦‚ GPT-4ã€Claudeã€Geminiã€‚Agent çš„æ¦‚å¿µåœ¨ LLM è¯ç”Ÿä¹‹å‰å°±å·²ç»å­˜åœ¨ï¼Œä½¿ç”¨ LLM å»æ„å»º AI Agent çš„ä¼˜åŠ¿åœ¨äºï¼ŒLLM èƒ½æ›´å¥½çš„ç†è§£å’Œè§£é‡Šäººç±»è¯­è¨€ã€‚</p>
</li>
<li>
<p><strong>è®¿é—®å·¥å…·(Access To Tools)</strong> è®¿é—®å·¥å…·æ˜¯æŒ‡ AI Agent è¢«æˆäºˆä½¿ç”¨å¤–éƒ¨èµ„æºæˆ–åŠŸèƒ½çš„èƒ½åŠ›ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li>çŸ¥è¯†è·å–ç±»ï¼šå¦‚æµè§ˆå™¨ã€æœç´¢å¼•æ“ã€æ•°æ®åº“æŸ¥è¯¢å™¨ç­‰ï¼Œç”¨äºè·å–ä¿¡æ¯</li>
<li>è¡Œä¸ºæ‰§è¡Œç±»ï¼šå¦‚ API è°ƒç”¨ã€ç”µå­é‚®ä»¶å‘é€ã€è¡¨å•å¡«å†™ç­‰ï¼Œç”¨äºè®© Agent å¯¹å¤–éƒ¨ç¯å¢ƒäº§ç”Ÿå½±å“</li>
</ul>
</li>
</ul>
<p>LLM å¯ä»¥è®¿é—®å“ªäº›å·¥å…·ç”± AI Agent å¼€å‘è€… æ˜¾ç¤ºæ·»åŠ /å®šä¹‰ã€‚å‡è®¾æ˜¯ä¸ªæ—…æ¸¸ AI Agentï¼Œè¿™ä¸ª AI Agent å…è®¸åœ¨æºç¨‹çš„é¢„å®šç³»ç»Ÿä¸­ï¼Œé‚£å¼€å‘è€…å°±éœ€è¦åœ¨åˆå§‹åŒ–Agentæ—¶ï¼Œé€šè¿‡å£°æ˜ tools çš„æè¿°ã€å‚æ•°ç»“æ„ï¼Œå°†è®¿é—®èˆªç­ä¿¡æ¯çš„å·¥å…·æ³¨å†Œç»™LLMã€‚LLM æ ¹æ®ç”¨æˆ·è¾“å…¥å†…å®¹ä¸ tools æè¿°çš„åŒ¹é…ç¨‹åº¦ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦ç”Ÿæˆ req è°ƒç”¨è¿™ä¸ª toolsã€‚</p>
<ul>
<li><strong>æ‰§è¡Œæ“ä½œ(Perform Actions)</strong>ã€‚å¦‚æœæ²¡æœ‰ AI Agent è¿™ä¸ªç³»ç»Ÿï¼ŒLLM åªèƒ½åŸºäºç”¨æˆ·ç»™çš„ prompt ç”Ÿæˆå†…å®¹ã€‚æœ‰äº† AI Agent åï¼ŒLLM å°±å¯ä»¥åŸºäºå¯¹ç”¨æˆ·è¯·æ±‚çš„ç†è§£ï¼Œå»ä½¿ç”¨ç¯èŠ‚ä¸­å¯ç”¨çš„å·¥å…·å®Œæˆä»»åŠ¡ã€‚</li>
</ul>
<blockquote>
<p>Perform Actions æŒ‡çš„æ˜¯å†³ç­–å¹¶ä½¿ç”¨å·¥å…·æ‰§è¡Œå…·ä½“æ“ä½œçš„è¿‡ç¨‹ï¼Œåœ¨ LangChain ç­‰æ¡†æ¶ä¸­ï¼Œå¯¹åº”AgentExecutorçš„æ¥å£å®šä¹‰ï¼Œç”± Agents æ¡†æ¶ ç»“åˆ Tools æœºåˆ¶ç›´æ¥å®ç°ï¼Œæ²¡æœ‰å•ç‹¬å®šä¹‰æ¨¡å—åã€‚</p>
</blockquote>
<ul>
<li>
<p><strong>è®°å¿†å’ŒçŸ¥è¯†(Memory+Knowledge)</strong></p>
<ul>
<li>è®°å¿†(Memory)æ˜¯ Agent åœ¨å’Œç”¨æˆ·äº¤äº’è¿‡ç¨‹ä¸­æ‰€è®°ä½çš„å†…å®¹ï¼Œå¦‚:ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œè¿‡å»çš„ç»éªŒç­‰ï¼Œåä¸ªæ€§åŒ–ã€‚æ¯”å¦‚ï¼Œç”¨æˆ·åœ¨æ—…æ¸¸ AI Agent æœŸæœ›çš„å‡ºè¡Œæ—¶é—´ã€å‡ºè¡Œåœ°ç‚¹ã€‚</li>
<li>çŸ¥è¯†(Knowledge)æ˜¯ç”¨æˆ·åœ¨å½“å‰ AI Agent ç¯å¢ƒä»¥å¤–èƒ½è·å–çš„ä¿¡æ¯ã€‚æ¯”å¦‚ï¼Œä»Šå¹´å¤å­£ç”±äºåŒ—äº¬å¤šé›¨ï¼Œåˆ°åŒ—äº¬æ—…æ¸¸äººå€¾å‘äºåšç‰©é¦†ç­‰å®¤å†…æ´»åŠ¨è€Œä¸æ˜¯æˆ·å¤–æ´»åŠ¨ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-3">ç±»æ¯”</h3>
<blockquote>
<p>ç”¨ç±»æ¯”åŠ é€Ÿç†è§£</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ecc3b7e9b7ac4d5397cbf2e0a2c3222d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pit54mnRGXnoo7noo7lv7U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767436556&amp;x-signature=g5EdkeELh6rfNQGdgfLCGu9X1bk%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥å°† Agent ç±»æ¯”ä¸º PC ç”µè„‘ï¼Œä¸€å¼€å§‹æœ‰äº† CPU ä¸å¤Ÿï¼Œå¤§å¤šæ•°äººæ²¡æ³•ç›´æ¥ç”¨ CPU åŠ æ³•å™¨å’Œå‡æ³•å™¨å®Œæˆä»»åŠ¡ï¼Œéœ€è¦å¾ˆå¤šçš„å¤–å›´è®¾å¤‡+æ“ä½œç³»ç»Ÿæ‰èƒ½æ­å»ºå‡ºç»™äººèƒ½ä½¿ç”¨çš„å·¥å…·</p>
<p>å¯ä»¥æŠŠ Agent ç±»æ¯”ä¸ºä¸€å° PCã€‚ä¸€å¼€å§‹åªæœ‰ CPUï¼ˆå¯¹åº” LLMï¼‰ï¼Œè¿˜è¿œè¿œä¸å¤Ÿã€‚å¤§å¤šæ•°ç”¨æˆ·å¹¶ä¸ä¼šç›´æ¥æ“æ§ CPU çš„åŠ æ³•å™¨æˆ–å‡æ³•å™¨æ¥å®Œæˆä»»åŠ¡â€”â€”ä»–ä»¬ä¾èµ–æ“ä½œç³»ç»Ÿè¿›è¡Œä»»åŠ¡è°ƒåº¦ï¼Œä¾é å·¥å…·æ¥å£è°ƒç”¨å¤–éƒ¨æœåŠ¡ï¼Œè¿˜è¦ä¾èµ–ä¸åŒå±‚çº§çš„å­˜å‚¨ï¼ˆå¦‚ RAMã€ç¡¬ç›˜ï¼‰æ¥æ”¯æ’‘æµç¨‹ã€‚ç±»ä¼¼åœ°ï¼ŒAI Agent ä¹Ÿæ— æ³•ä»…é  LLMã€‚å®ƒéœ€è¦ï¼š</p>
<ul>
<li>ä¸€ä¸ª <strong>è§„åˆ’æ¨¡å—ï¼ˆPlannerï¼‰</strong> æ¥æ‹†è§£ä¸è°ƒåº¦ä»»åŠ¡ã€‚ç±»ä¼¼äºæ“ä½œç³»ç»Ÿï¼Œè°ƒåº¦èµ„æºã€åŠ è½½ç¨‹åºã€ç®¡ç†å†…å­˜ï¼›</li>
<li>å¤šå±‚æ¬¡çš„ <strong>å†…å­˜ï¼ˆMemoryï¼‰</strong> ï¼ŒåŒ…æ‹¬çŸ­æœŸè®°å¿†ã€å·¥ä½œè®°å¿† scratchpad å’Œé•¿æœŸè®°å¿†ï¼Œæ¥ç®¡ç†ä¸Šä¸‹æ–‡ä¸æŒä¹…çŸ¥è¯†ã€‚ç±»ä¼¼äº RAM + ç¡¬ç›˜å­˜å‚¨æ¶æ„ï¼Œæä¾›ä¸åŒæŒä¹…æ€§å’Œè®¿é—®é€Ÿåº¦ï¼›</li>
<li>å„ç§ <strong>å·¥å…·ï¼ˆToolsï¼‰</strong> ï¼ŒåŒ…æ‹¬å„ç±»æ’ä»¶ã€å¤–éƒ¨ APIã€æ•°æ®åº“ç­‰ï¼Œæ‰èƒ½å®Œæˆå…·ä½“æ“ä½œï¼Œç±»ä¼¼äºç”µè„‘é€šè¿‡ç½‘çº¿ã€USBè®¿é—®å¤–è®¾æˆ–å¤–éƒ¨èµ„æºã€‚</li>
</ul>
<h3 data-id="heading-4">æ¶‰åŠçš„æŠ€æœ¯</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.bytebytego.com%2Fp%2Fep169-rag-vs-agentic-rag" target="_blank" title="https://blog.bytebytego.com/p/ep169-rag-vs-agentic-rag" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2378dc506bed46b59fb7820479a9914a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pit54mnRGXnoo7noo7lv7U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767436556&amp;x-signature=GRrJlubBCA8eHwIrN1sx1%2B6wsfU%3D" alt="image.png" loading="lazy"/></a></p>
<p>LLM å‡ºç°åï¼Œä¸ºäº†è§£å†³LLMå‡ ä¸ªå¤©ç„¶çš„é—®é¢˜ï¼Œè¯ç”Ÿäº† RAGã€CoTã€Function Callingã€ReActã€Long term ç­‰çš„æŠ€æœ¯ï¼Œæœ€ç»ˆè¿™äº›æŠ€æœ¯éƒ½è¢«å½’çº³åˆ°äº† Toolsã€Planã€Memory è¿™å‡ ä¸ªæ¨¡å—ã€‚</p>



































<table><thead><tr><th>é—®é¢˜</th><th>åŸå› </th><th>è§£å†³åŠæ³•</th></tr></thead><tbody><tr><td>æ— å®æ—¶ä¿¡æ¯</td><td>LLM çš„çŸ¥è¯†æ¥è‡ªè®­ç»ƒè¯­æ–™ï¼Œæ˜¯é™æ€çš„ã€è¿‡å»çš„ã€‚è®­ç»ƒå®Œæˆåï¼Œé™¤éé‡æ–°è®­ç»ƒï¼Œå¦åˆ™å®ƒä¸ä¼šæ›´æ–°è®¤çŸ¥ã€‚æ–°çš„æ³•å¾‹ã€æ”¿ç­–ã€æ–°é—»ï¼Œç”¨æˆ·ç§æœ‰æ–‡æ¡£ï¼Œå®ƒéƒ½ä¸çŸ¥é“</td><td>å¼•å…¥ RAGï¼ˆ2020å¹´ï¼‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fshorts%2F4jYZg6pkXyc" target="_blank" title="https://www.youtube.com/shorts/4jYZg6pkXyc" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/942a358b2d3b4fa5bf087758390af756~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pit54mnRGXnoo7noo7lv7U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767436556&amp;x-signature=0sXu3M1BLcxG14Xip49yh4DV2iY%3D" alt="image.png" loading="lazy"/></a></td></tr><tr><td>é€»è¾‘æ¨ç†èƒ½åŠ›ä¸ä½³</td><td>LLM çš„æ ¸å¿ƒæœºåˆ¶æ˜¯åŸºäºè®­ç»ƒé›†ä¸­çš„å­¦ä¹ åˆ°çš„æ¨¡å¼é¢„æµ‹ä¸‹ä¸€è¯ï¼Œè€Œä¸æ˜¯ç†è§£é—®é¢˜èƒŒåçš„æ¦‚å¿µæˆ–ç»“æ„ï¼Œæ›´ä¸å­˜åœ¨é€»è¾‘æ¨ç†èƒ½åŠ›ï¼Œä¸èƒ½å®Œæˆéœ€è¦ç²¾ç¡®è®¡ç®—æˆ–å¤æ‚è®¡ç®—/æ¨ç†çš„ä»»åŠ¡ã€‚å¦‚: æ•°å­¦é¢˜</td><td>å¼•å…¥ CoTï¼ˆ2022å¹´ï¼‰ï¼Œå¸®åŠ© LLM åœ¨å¤šä¸ªä¸­é—´æ­¥éª¤é—´ç»´æŒè¿è´¯é€»è¾‘ï¼Œæé«˜å‡†ç¡®ç‡ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgonzoml.substack.com%2Fp%2Fchain-of-thought-tree-of-thought" target="_blank" title="https://gonzoml.substack.com/p/chain-of-thought-tree-of-thought" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76a3f7b7e8754aa79eb24732ace48427~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pit54mnRGXnoo7noo7lv7U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767436556&amp;x-signature=aUGSB41OkzjfqYIeeijluxpCee4%3D" alt="image.png" loading="lazy"/></a></td></tr><tr><td>æ— è¡ŒåŠ¨èƒ½åŠ›</td><td>åªèƒ½è¾“å‡ºæ–‡å­—ï¼Œä¸èƒ½çœŸæ­£å»è®¿é—®å·¥å…·ã€æ‰§è¡Œæ“ä½œ</td><td>å¼•å…¥ Function Callingï¼ˆ2023å¹´ï¼‰-   2023 å¹´ 6 æœˆ 13 æ—¥ï¼ŒOpenAI å‘å¸ƒäº†é¢˜ä¸º â€œFunction calling and other API updatesâ€ çš„å…¬å‘Šï¼Œå®£å¸ƒæ¨å‡ºæ–°çš„ function calling åŠŸèƒ½ï¼Œå…è®¸å¼€å‘è€…å‘æ¨¡å‹æè¿°å‡½æ•°ï¼Œå¹¶è®©æ¨¡å‹åœ¨åˆé€‚çš„æ—¶å€™è¾“å‡ºä¸€ä¸ª JSON æ ¼å¼çš„å‡½æ•°è°ƒç”¨å‚æ•°ã€‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Fzilliz.com%2Fblog%2Ffunction-calling-vs-mcp-vs-a2a-developers-guide-to-ai-agent-protocols" target="_blank" title="https://zilliz.com/blog/function-calling-vs-mcp-vs-a2a-developers-guide-to-ai-agent-protocols" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d7fe1f68ccd49a28a38127cbf93ba7a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pit54mnRGXnoo7noo7lv7U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767436556&amp;x-signature=krEkk1E8xteGByWU0RjiJOp8ACE%3D" alt="image.png" loading="lazy"/></a></td></tr><tr><td>æ¨ç†å­¤ç«‹ï¼ˆReasoning Onlyï¼‰éš¾ä»¥çº æ­£</td><td>å•çº¯ä¾èµ– Chain-of-Thought æ¨ç†ï¼Œä¼šéšç€å¤šæ­¥æ¨ç†ç´¯ç§¯é”™è¯¯ï¼Œé€ æˆè¯¯å¯¼æˆ–æœ€ç»ˆç»“æœå‡ºé”™ï¼Œä¸”éš¾ä»¥çº æ­£ã€‚</td><td>å¼•å…¥ ReActï¼ˆ2023å¹´ï¼‰ï¼Œé€šè¿‡ Reasoning + Action å¾ªç¯äº¤æ›¿ï¼ˆThought â†’ Action â†’ Observation â†’ Thoughtâ€¦ï¼‰åœ¨æ¨ç†è¿‡ç¨‹ä¸­æ›´æ–°è®¡åˆ’ï¼Œå¤„ç†å¼‚å¸¸ï¼Œå¹¶å€ŸåŠ©è§‚å¯Ÿä¿®æ­£è·¯å¾„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.philschmid.de%2Flanggraph-gemini-2-5-react-agent" target="_blank" title="https://www.philschmid.de/langgraph-gemini-2-5-react-agent" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/678a0c9dedad4031ab0212369311a116~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pit54mnRGXnoo7noo7lv7U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767436556&amp;x-signature=j873XmrCudvDd5%2FygzkAqMrw2qw%3D" alt="image.png" loading="lazy"/></a></td></tr><tr><td>ä¸Šä¸‹æ–‡åªèƒ½ä¿ç•™æœ‰é™token</td><td>LLM çš„ä¸Šä¸‹æ–‡çª—å£æœ‰ä¸¥æ ¼ä¸Šé™ï¼Œå³ä¾¿å¦‚ä»ŠæŸäº›æ¨¡å‹å·²æ”¯æŒåˆ°ç™¾ä¸‡ tokenï¼Œéƒ½æ„å‘³ç€ä¿¡æ¯é‡ä¾ç„¶å—åˆ°é™åˆ¶ã€‚åœ¨å¤šè½®å¯¹è¯æˆ–é•¿ä»»åŠ¡ä¸­ï¼Œè€æ—§æˆ–ä¸é‡è¦çš„ä¿¡æ¯å¾€å¾€è¢«æˆªæ–­æˆ–é—å¿˜ï¼Œå¯¼è‡´è¿è´¯æ€§å’Œæ•´ä½“ç†è§£èƒ½åŠ›ä¸‹é™</td><td>å¼•å…¥ Long-Term Memory(2023å¹´)ï¼Œ "<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F%2F2306.07174" target="_blank" title="https://arxiv.org/abs//2306.07174" ref="nofollow noopener noreferrer">Augmenting Language Models with Long-Term Memory</a>"</td></tr></tbody></table>
<h3 data-id="heading-5">å®ç°æ‹†è§£</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Flilianweng.github.io%2Fposts%2F2023-06-23-agent%2F%3Futm_source%3Dchatgpt.com%23scientific-discovery-agent" target="_blank" title="https://lilianweng.github.io/posts/2023-06-23-agent/?utm_source=chatgpt.com#scientific-discovery-agent" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a76ad40a9f474d63914b77051b3ae9ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pit54mnRGXnoo7noo7lv7U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767436556&amp;x-signature=zcJ2qyijsIpSel%2FEOBc8fK6yas0%3D" alt="image.png" loading="lazy"/></a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fnewsletter.maartengrootendorst.com%2Fp%2Fa-visual-guide-to-llm-agents" target="_blank" title="https://newsletter.maartengrootendorst.com/p/a-visual-guide-to-llm-agents" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49cba25fa2914992b7af28d0c871dbe3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pit54mnRGXnoo7noo7lv7U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767436556&amp;x-signature=ooidQ7HF%2FKvGgO1mh0XHSfzxk8g%3D" alt="image.png" loading="lazy"/></a></p>
<h4 data-id="heading-6">Tools</h4>
<p><strong>Toolsçš„å®šä¹‰</strong></p>
<p>Tools æ˜¯ä¸€ç§æŠ½è±¡ï¼Œå°†ä¸€ä¸ªå‡½æ•°ï¼ˆæˆ–å…¶ä»–å®ç°ï¼‰åŒ…è£…æˆLLM å¯ä»¥è°ƒç”¨çš„å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«åç§°ã€æè¿°ï¼ˆç”¨äºæç¤ºæ¨¡å‹ï¼‰ä»¥åŠè¾“å…¥å‚æ•°çš„ JSON schema æè¿°</p>
<p><strong>Tools åœ¨ Agent çš„ä½¿ç”¨</strong></p>
<ul>
<li>Agent ä¼šæ ¹æ® Tools æä¾›çš„åç§°ã€æè¿°å’Œå‚æ•° schemaï¼Œæ‹¼è¿›prompt å†…ï¼Œé€šè¿‡ prompt è®© LLM çŸ¥é“ä½•æ—¶å¯ä»¥è°ƒç”¨å“ªä¸ªå·¥å…·</li>
</ul>
<pre><code class="hljs language-python" lang="python">Â  Â  Tool(
Â  Â  Â  Â  name=<span class="hljs-string">"Calculator"</span>,
Â  Â  Â  Â  func=calculator_function,
Â  Â  Â  Â  description=<span class="hljs-string">"Use this tool to perform calculations."</span>
Â  Â  )
</code></pre>
<p>åœ¨ LLM ç”Ÿæˆç»“æœæ—¶ï¼Œå¦‚æœ LLM è®¤ä¸ºæŸä¸ªå·¥å…·çš„è°ƒç”¨æ˜¯å¿…è¦çš„ï¼Œä¼šåœ¨ç»“æœä¸­åŒ…å«ä¸€ä¸ª tool_calls å­—æ®µï¼ŒæŒ‡ç¤ºéœ€è¦è°ƒç”¨çš„å·¥å…·åŠå…¶å‚æ•°ã€‚è¿™ä¸ªç»“æ„åŒ–çš„è¾“å‡ºä½¿å¾— Agent èƒ½å¤Ÿå‡†ç¡®åœ°è§£æå·¥å…·è°ƒç”¨ï¼Œå¹¶æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"tool_calls"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"call_1"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"function"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"arguments"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"{\"a\": 2, \"b\": 3}"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"multiply"</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"function"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li>Agent åˆ†æ LLM ç”Ÿæˆçš„å†…å®¹ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨ Toolï¼Œåˆ™è°ƒç”¨å…·ä½“çš„ Tool å¹¶å°†ç»“æœåé¦ˆç»™æ¨¡å‹ï¼Œå½¢æˆâ€œæ¨¡å‹â†’å·¥å…·â†’æ¨¡å‹â€çš„å¾ªç¯ç»“æ„ã€‚</li>
</ul>
<p>å½“ Agent å†³å®šéœ€è¦è°ƒç”¨æŸä¸ª Tool æ—¶ï¼Œå®ƒä¼šç”Ÿæˆä¸€ä¸ªç»“æ„åŒ–çš„ ToolCall å¯¹è±¡ã€‚è¯¥å¯¹è±¡åŒ…å«ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>

Â  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"multiply"</span><span class="hljs-punctuation">,</span>
Â  <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"a"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"b"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
Â  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"call_1"</span><span class="hljs-punctuation">,</span>
Â  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tool_call"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>Agent æ‰§è¡Œ Tool å¹¶è·å–ç»“æœ</p>
<pre><code class="hljs language-python" lang="python">tool_output = multiply.invoke({<span class="hljs-string">"a"</span>: <span class="hljs-number">2</span>, <span class="hljs-string">"b"</span>: <span class="hljs-number">3</span>})
</code></pre>
<p>Agent å°† Tool ç»“æœåé¦ˆç»™ LLM</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># tool_output ç»“æœä¸º </span>
tool_message = ToolMessage(
Â  Â  content=<span class="hljs-string">"The result is 42."</span>,
Â  Â  tool_call_id=<span class="hljs-string">"call_1"</span>
)

<span class="hljs-comment"># å‡è®¾ chat_history æ˜¯ä¸€ä¸ªçŸ­æœŸè®°å¿†çš„å®ä¾‹ï¼Œæ›´æ–°å¯¹è¯å†å², æ”¯æŒLLMå¤šè½®å¯¹è¯æ—¶å¯ä»¥åˆ©ç”¨ä¹‹å‰çš„ tool ç»“æœï¼Œé¿å…é‡å¤è°ƒç”¨</span>
chat_history.add_messages([tool_message])

<span class="hljs-comment"># å‡è®¾ user_input æ˜¯ç”¨æˆ·çš„è¾“å…¥</span>
messages = [
Â  Â  (<span class="hljs-string">"human"</span>, user_input),
Â  Â  (<span class="hljs-string">"tool"</span>, tool_message.content)
]

<span class="hljs-comment"># å°† tool çš„è¾“å‡ºä½œä¸ºä¸Šä¸‹æ–‡ä¿¡æ¯æä¾›ç»™ LLMï¼Œç”Ÿæˆæœ€ç»ˆçš„ç»“æœ</span>
ai_message = llm_with_tools.invoke(messages)
</code></pre>
<h4 data-id="heading-7">Planning</h4>
<p>PlanningÂ æ˜¯æŒ‡è®© LLM å…·å¤‡åˆ†è§£å¤æ‚ä»»åŠ¡ã€è§„åˆ’æ‰§è¡Œæ­¥éª¤ã€åŠ¨æ€è°ƒæ•´ç­–ç•¥çš„èƒ½åŠ›ï¼Œä»¥è§£å†³éœ€è¦å¤šæ­¥æ¨ç†æˆ–å¤šå·¥å…·åä½œçš„å¤æ‚é—®é¢˜ã€‚æ¨¡æ‹Ÿäº†äººç±»è§£å†³é—®é¢˜æ—¶ï¼Œæ‹†åˆ†ç›®æ ‡-&gt;åˆ¶å®šæ­¥éª¤-&gt;æ‰§è¡Œè°ƒæ•´çš„æ€ç»´è¿‡ç¨‹ã€‚</p>
<p>Planningçš„å®ç°æœ‰ä¸‰ç§</p>
<ol>
<li>æç¤ºè¯ï¼ˆPrompt-basedï¼‰
é€šè¿‡ç²¾å¿ƒè®¾è®¡çš„æç¤ºè¯å¼•å¯¼ LLM è‡ªä¸»å®Œæˆä»»åŠ¡æ‹†è§£å’Œæ­¥éª¤è§„åˆ’ï¼Œé€‚ç”¨äºé€»è¾‘ç›¸å¯¹å›ºå®šã€æ— éœ€å¤æ‚å·¥å…·è°ƒç”¨çš„åœºæ™¯ã€‚</li>
<li>Chain ç»“æ„åŒ–è§„åˆ’
é€šè¿‡ é“¾ï¼ˆChainï¼‰ å°†å¤šä¸ªå­ä»»åŠ¡æŒ‰å›ºå®šæµç¨‹ä¸²è”ï¼Œé€‚ç”¨äºæ­¥éª¤æ˜ç¡®ã€ä¾èµ–å…³ç³»å›ºå®šçš„åœºæ™¯ï¼Œæœ¬è´¨æ˜¯ç¡¬ç¼–ç è§„åˆ’ã€‚é¢„å…ˆå®šä¹‰å­ä»»åŠ¡çš„æ‰§è¡Œé¡ºåºï¼ˆå¦‚: æ•°æ®é‡‡é›†-&gt;æ¸…æ´—-&gt;åˆ†æ-&gt;è¾“å‡ºï¼‰ï¼Œç”¨ Chain ç»„ä»¶å°†æ¯ä¸ªæ­¥éª¤çš„è¾“å…¥è¾“å‡ºè¡”æ¥ï¼Œå½¢æˆæµæ°´çº¿å¼è§„åˆ’ã€‚</li>
<li>Agent åŠ¨æ€è§„åˆ’
Agent è‡ªä¸»æ‹†è§£ä»»åŠ¡ã€è°ƒæ•´æ­¥éª¤ã€æ‰§è¡Œå·¥å…·ä»¥å®Œæˆå¤æ‚ç›®æ ‡ã€‚å…·ä½“å®ç°æ–¹å¼æœ‰ ReAct(æ€è€ƒReason-&gt;è¡ŒåŠ¨Act-&gt;è§‚å¯ŸObserve)ã€Plan and Executeã€Self Reflective</li>
</ol>
<p>å°æ€è€ƒ:</p>
<ul>
<li>Agentå¦‚ä½•ä»å¤±è´¥Planä¸­å­¦ä¹ ç»éªŒ?</li>
<li>CoT å’Œ WorkFlow çš„å…³ç³»æ˜¯ä»€ä¹ˆ?</li>
</ul>
<h4 data-id="heading-8">Memory</h4>
<p>Memory æ”¯æ’‘ Agent å®ç°ä¸Šä¸‹æ–‡æ„ŸçŸ¥ã€å†å²ç»éªŒå¤ç”¨ã€é•¿æœŸå†³ç­–è¿è´¯æ€§ã€‚
ä¸åŒç±»å‹çš„ Memory å¯¹åº”ä¸åŒçš„åº”ç”¨åœºæ™¯ï¼Œå…¶å®ç°æ–¹æ¡ˆå·®å¼‚æ˜¾è‘—ã€‚æœ€ç»å…¸çš„åˆ†ç±»æ–¹å¼æ˜¯æŒ‰æ—¶é—´è·¨åº¦åˆ’åˆ†ï¼š</p>























<table><thead><tr><th>ç±»å‹</th><th>æ ¸å¿ƒåœºæ™¯</th><th>æ•°æ®ç‰¹ç‚¹</th><th>å­˜å‚¨å‘¨æœŸ</th></tr></thead><tbody><tr><td><strong>çŸ­æœŸè®°å¿†ï¼ˆSTMï¼‰</strong></td><td>ä¼šè¯å†…äº¤äº’ã€å®æ—¶å†³ç­–</td><td>æ•°æ®é‡å°ã€æ—¶æ•ˆæ€§å¼ºã€å®Œæ•´åº¦é«˜</td><td>å•æ¬¡ä¼šè¯ / åˆ†é’Ÿçº§</td></tr><tr><td><strong>é•¿æœŸè®°å¿†ï¼ˆLTMï¼‰</strong></td><td>è·¨ä¼šè¯å¤ç”¨ã€ç»éªŒç§¯ç´¯</td><td>æ•°æ®é‡å¤§ã€éœ€æç‚¼ã€é•¿æœŸæœ‰æ•ˆ</td><td>è·¨ä¼šè¯ / æ°¸ä¹…çº§</td></tr></tbody></table>
<p><strong>çŸ­æœŸè®°å¿†ï¼ˆSTMï¼‰å®ç°</strong></p>
<p>ç”¨é˜Ÿåˆ—ï¼ˆdequeï¼‰å®ç°ï¼Œé™åˆ¶æœ€å¤§é•¿åº¦ï¼ˆé¿å…å†…å­˜æº¢å‡ºï¼‰</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ShortTermMemory</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, max_length=<span class="hljs-number">10</span></span>):
        self.memory = deque(maxlen=max_length)  <span class="hljs-comment"># å›ºå®šé•¿åº¦é˜Ÿåˆ—ï¼Œè‡ªåŠ¨FIFO</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">store</span>(<span class="hljs-params">self, content, source</span>):
        <span class="hljs-string">"""å­˜å‚¨æ–°çš„ä¼šè¯ä¿¡æ¯"""</span>
        entry = {
            <span class="hljs-string">"entry_id"</span>: <span class="hljs-string">f"stm-<span class="hljs-subst">{<span class="hljs-built_in">len</span>(self.memory)}</span>"</span>,
            <span class="hljs-string">"content"</span>: content,
            <span class="hljs-string">"metadata"</span>: {<span class="hljs-string">"source"</span>: source, <span class="hljs-string">"timestamp"</span>: self._get_current_time()}
        }
        self.memory.append(entry)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">retrieve_all</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""æ£€ç´¢æ‰€æœ‰çŸ­æœŸè®°å¿†ï¼ˆç”¨äºå½“å‰ä¼šè¯å†³ç­–ï¼‰"""</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">list</span>(self.memory)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_get_current_time</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">import</span> datetime
        <span class="hljs-keyword">return</span> datetime.datetime.now().strftime(<span class="hljs-string">"%Y-%m-%d %H:%M:%S"</span>)
</code></pre>
<p><strong>é•¿æœŸè®°å¿†ï¼ˆLTMï¼‰å®ç°</strong></p>
<p>é‡‡ç”¨ SQLite å­˜å…ƒæ•°æ® + FAISS å­˜å‘é‡ çš„æ··åˆæ–¹æ¡ˆï¼Œæ”¯æŒè¯­ä¹‰æ£€ç´¢</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> sqlite3
<span class="hljs-keyword">import</span> faiss
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> sentence_transformers <span class="hljs-keyword">import</span> SentenceTransformer

<span class="hljs-comment"># 1. åˆå§‹åŒ– Embedding æ¨¡å‹ï¼ˆç”¨äºç”Ÿæˆå†…å®¹å‘é‡ï¼‰</span>
emb_model = SentenceTransformer(<span class="hljs-string">'all-MiniLM-L6-v2'</span>)
emb_dim = <span class="hljs-number">384</span>  <span class="hljs-comment"># all-MiniLM-L6-v2 çš„è¾“å‡ºç»´åº¦</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">LongTermMemory</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, db_path=<span class="hljs-string">"ltm.db"</span>, faiss_index_path=<span class="hljs-string">"ltm_index.faiss"</span></span>):
        <span class="hljs-comment"># åˆå§‹åŒ– SQLite æ•°æ®åº“ï¼ˆå­˜å…ƒæ•°æ®ï¼‰</span>
        self.conn = sqlite3.connect(db_path)
        self._create_table()
        <span class="hljs-comment"># åˆå§‹åŒ– FAISS ç´¢å¼•ï¼ˆå­˜å‘é‡ï¼‰</span>
        self.faiss_index = self._load_faiss_index(faiss_index_path)
        self.faiss_index_path = faiss_index_path
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_create_table</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""åˆ›å»ºå…ƒæ•°æ®è¡¨"""</span>
        cursor = self.conn.cursor()
        cursor.execute(<span class="hljs-string">'''
            CREATE TABLE IF NOT EXISTS memory_entries (
                entry_id TEXT PRIMARY KEY,
                content TEXT,
                memory_type TEXT,
                timestamp TEXT,
                source TEXT,
                relevance_score REAL
            )
        '''</span>)
        self.conn.commit()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_load_faiss_index</span>(<span class="hljs-params">self, path</span>):
        <span class="hljs-string">"""åŠ è½½æˆ–åˆ›å»º FAISS ç´¢å¼•"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">return</span> faiss.read_index(path)
        <span class="hljs-keyword">except</span>:
            index = faiss.IndexFlatL2(emb_dim)  <span class="hljs-comment"># ç®€å•çš„L2è·ç¦»ç´¢å¼•ï¼ˆé€‚åˆå°æ•°æ®ï¼‰</span>
            faiss.write_index(index, path)
            <span class="hljs-keyword">return</span> index
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">store</span>(<span class="hljs-params">self, content, memory_type, source, relevance_score=<span class="hljs-number">0.5</span></span>):
        <span class="hljs-string">"""å­˜å‚¨é•¿æœŸè®°å¿†ï¼ˆå…ƒæ•°æ®â†’SQLiteï¼Œå‘é‡â†’FAISSï¼‰"""</span>
        <span class="hljs-comment"># ç”Ÿæˆ Entry ID å’Œå‘é‡</span>
        entry_id = <span class="hljs-string">f"ltm-<span class="hljs-subst">{self._get_next_id()}</span>"</span>
        embedding = emb_model.encode([content])[<span class="hljs-number">0</span>].astype(np.float32)
        
        <span class="hljs-comment"># 1. å­˜å…¥ SQLite</span>
        cursor = self.conn.cursor()
        cursor.execute(INSERT INTO memory_entries)
        self.conn.commit()
        
        <span class="hljs-comment"># 2. å­˜å…¥ FAISSï¼ˆéœ€å°†å‘é‡æ·»åŠ åˆ°ç´¢å¼•ï¼Œå¹¶ç”¨IDæ˜ å°„ï¼‰</span>
        self.faiss_index.add(np.array([embedding]))
        faiss.write_index(self.faiss_index, self.faiss_index_path)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">retrieve_semantic</span>(<span class="hljs-params">self, query, top_k=<span class="hljs-number">3</span></span>):
        <span class="hljs-string">"""è¯­ä¹‰æ£€ç´¢ï¼šæ‰¾å’Œ query æœ€ç›¸å…³çš„ top_k æ¡è®°å¿†"""</span>
        <span class="hljs-comment"># 1. ç”ŸæˆæŸ¥è¯¢å‘é‡</span>
        query_emb = emb_model.encode([query])[<span class="hljs-number">0</span>].astype(np.float32)
        <span class="hljs-comment"># 2. FAISS æ£€ç´¢ï¼ˆè¿”å›è·ç¦»å’Œç´¢å¼•ï¼‰</span>
        distances, indices = self.faiss_index.search(np.array([query_emb]), top_k)
        <span class="hljs-comment"># 3. ä» SQLite ä¸­è·å–å¯¹åº”å…ƒæ•°æ®</span>
        cursor = self.conn.cursor()
        results = []
        <span class="hljs-keyword">for</span> idx, dist <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(indices[<span class="hljs-number">0</span>], distances[<span class="hljs-number">0</span>]):
            <span class="hljs-comment"># å‡è®¾ FAISS ç´¢å¼•çš„ idx ä¸ SQLite çš„ entry_id æŒ‰é¡ºåºå¯¹åº”ï¼ˆç®€åŒ–å¤„ç†ï¼‰</span>
            entry_id = <span class="hljs-string">f"ltm-<span class="hljs-subst">{idx+<span class="hljs-number">1</span>}</span>"</span>  <span class="hljs-comment"># éœ€æ ¹æ®å®é™…IDæ˜ å°„è°ƒæ•´</span>
            cursor.execute(<span class="hljs-string">'SELECT * FROM memory_entries WHERE entry_id = ?'</span>, (entry_id,))
            entry = cursor.fetchone()
            <span class="hljs-keyword">if</span> entry:
                results.append({
                    <span class="hljs-string">"entry_id"</span>: entry[<span class="hljs-number">0</span>],
                    <span class="hljs-string">"content"</span>: entry[<span class="hljs-number">1</span>],
                    <span class="hljs-string">"similarity"</span>: <span class="hljs-number">1</span> - dist/<span class="hljs-number">2</span>  <span class="hljs-comment"># å°†L2è·ç¦»è½¬ä¸ºç›¸ä¼¼åº¦ï¼ˆ0~1ï¼‰</span>
                })
        <span class="hljs-keyword">return</span> results
</code></pre>
<h3 data-id="heading-9">å°æ€è€ƒ</h3>
<ul>
<li>AI Agent çš„å®šä¹‰è¿™ä¹ˆå®½æ³›ï¼Œæ˜¯å¦æ‰€æœ‰çš„AIåº”ç”¨éƒ½æ˜¯ AI Agentï¼ŒåŒ…æ‹¬å¯¹è¯æœºå™¨äºº</li>
</ul>
<h2 data-id="heading-10">Agent æ¶æ„&amp;&amp;æµç¨‹å›¾</h2>
<h3 data-id="heading-11">å¸¸è§ Agent æ¶æ„</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fk7v4GMrutHRuTzliZwFH1A" target="_blank" title="https://mp.weixin.qq.com/s/k7v4GMrutHRuTzliZwFH1A" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/k7v4GMrutâ€¦</a></p>
<ul>
<li>åæ€æ¨¡å¼ï¼ˆReflection Patternï¼‰</li>
<li>å·¥å…·æ¨¡å¼ï¼ˆTool Use Patternï¼‰</li>
<li>ReAct æ¨ç†ä¸è¡ŒåŠ¨æ¨¡å¼ï¼ˆReasoning &amp; Actingï¼‰</li>
<li>è§„åˆ’æ¨¡å¼ï¼ˆPlanning Patternï¼‰</li>
<li>å¤šæ™ºèƒ½ä½“æ¨¡å¼ï¼ˆMulti - agent Patternï¼‰</li>
</ul>
<h3 data-id="heading-12">AI Agent æ—¶åºå›¾</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmedium.com%2Faingineer%2Fa-comprehensive-reference-guide-to-building-agentic-ai-systems-823319cb282a" target="_blank" title="https://medium.com/aingineer/a-comprehensive-reference-guide-to-building-agentic-ai-systems-823319cb282a" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5631250996941d2869a3884e8e8e3b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pit54mnRGXnoo7noo7lv7U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767436556&amp;x-signature=ml99M6yUfIbuKCHUr2l8RT%2BVa9Q%3D" alt="image.png" loading="lazy"/></a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Sidecarä¸å°±æ˜¯åœ¨Podé‡Œå¤šè·‘ä¸€ä¸ªå®¹å™¨å—ï¼]]></title>    <link>https://juejin.cn/post/7588146449005445156</link>    <guid>https://juejin.cn/post/7588146449005445156</guid>    <pubDate>2025-12-27T11:15:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588146449005445156" data-draft-id="7588149079416750134" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Sidecarä¸å°±æ˜¯åœ¨Podé‡Œå¤šè·‘ä¸€ä¸ªå®¹å™¨å—ï¼"/> <meta itemprop="keywords" content="Linux,Kubernetes"/> <meta itemprop="datePublished" content="2025-12-27T11:15:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ydswin"/> <meta itemprop="url" content="https://juejin.cn/user/536217403032472"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Sidecarä¸å°±æ˜¯åœ¨Podé‡Œå¤šè·‘ä¸€ä¸ªå®¹å™¨å—ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/536217403032472/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ydswin
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T11:15:18.000Z" title="Sat Dec 27 2025 11:15:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ·±å…¥ç†è§£äº‘åŸç”Ÿæ—¶ä»£çš„æ ¸å¿ƒè®¾è®¡æ¨¡å¼</p>
</blockquote>
<p>ä¹çœ‹ä¹‹ä¸‹ï¼ŒSidecar æ¨¡å¼ç¡®å®åªæ˜¯åœ¨ Pod é‡Œå¤šè¿è¡Œä¸€ä¸ªå®¹å™¨è€Œå·²ã€‚ä½†è¿™ç§è¡¨é¢ç†è§£ï¼Œå°±åƒè¯´â€œäº’è”ç½‘ä¸è¿‡æ˜¯ä¸€å †ç”µç¼†å’ŒæœåŠ¡å™¨â€ä¸€æ ·ï¼Œå¿½ç•¥äº†å…¶èƒŒåçš„ç²¾å¦™è®¾è®¡æ€æƒ³å’Œé©å‘½æ€§ä»·å€¼ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥æ·±å…¥æ¢è®¨è¿™ä¸ªçœ‹ä¼¼ç®€å•å´æå…·å¨åŠ›çš„äº‘åŸç”Ÿæ ¸å¿ƒæ¨¡å¼ã€‚</p>
<h2 data-id="heading-0">ä»ä¸€ä¸ªè®¤çŸ¥è¯¯åŒºè¯´èµ·</h2>
<p><strong>"Pod å°±æ˜¯å®¹å™¨"</strong>â€”â€”è¿™æ˜¯è®¸å¤š Kubernetes åˆå­¦è€…æœ€å¸¸è§çš„è¯¯è§£ã€‚äº‹å®ä¸Šï¼ŒPod å¹¶ä¸æ˜¯å®¹å™¨ï¼Œè€Œæ˜¯<strong>å®¹å™¨çš„å®¹å™¨</strong>ï¼Œæ˜¯ä¸€ä¸ªå¯ä»¥å®¹çº³ä¸€ä¸ªæˆ–å¤šä¸ªç´§å¯†å…³è”å®¹å™¨çš„â€œé€»è¾‘ä¸»æœºâ€ã€‚</p>
<p>å½“æˆ‘ä»¬è¯´â€œåœ¨ Pod é‡Œå¤šè·‘ä¸€ä¸ªå®¹å™¨â€æ—¶ï¼Œè¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿæ„å‘³ç€è¿™ä¸ªé¢å¤–çš„å®¹å™¨ä¸ä¸»åº”ç”¨å®¹å™¨å…±äº«ç€å‡ ä¹æ‰€æœ‰å…³é”®èµ„æºï¼š<strong>ç½‘ç»œå‘½åç©ºé—´</strong>ï¼ˆåŒä¸€ IPï¼Œé€šè¿‡ localhost ç›´æ¥é€šä¿¡ï¼‰ã€<strong>å­˜å‚¨å·</strong>ï¼ˆVolumeï¼‰ä»¥åŠ<strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼ˆåŒç”Ÿå…±æ­»ï¼‰ã€‚</p>
<p>è¿™ç§å…±äº«å…³ç³»ï¼Œæ­£æ˜¯ Sidecar é­”åŠ›çš„æºæ³‰ã€‚</p>
<h2 data-id="heading-1">Sidecar çš„æœ¬è´¨ï¼šä¸åªæ˜¯â€œå¤šä¸€ä¸ªå®¹å™¨â€</h2>
<h3 data-id="heading-2">è®¾è®¡æ¨¡å¼è€ŒéæŠ€æœ¯å®ç°</h3>
<p>Sidecar æœ¬è´¨ä¸Šæ˜¯ä¸€ç§<strong>å®¹å™¨è®¾è®¡æ¨¡å¼</strong>ï¼Œè€Œä¸æ˜¯ç®€å•çš„æŠ€æœ¯å®ç°ã€‚å®ƒä»£è¡¨äº†ä¸€ç§æ¶æ„å“²å­¦ï¼šå°†è¾…åŠ©åŠŸèƒ½ä»ä¸»ä¸šåŠ¡é€»è¾‘ä¸­è§£è€¦ï¼Œè®©ä¸“ä¸šå®¹å™¨åšä¸“ä¸šäº‹ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œæƒ³è±¡ä¸€ä½ä¸»å¨ï¼ˆä¸»åº”ç”¨å®¹å™¨ï¼‰åœ¨å¨æˆ¿å·¥ä½œã€‚ä¸»å¨ä¸“æ³¨ç‚’èœï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰ï¼Œè€Œé…èœã€æ‰“æ‰«ã€èœå•æ›´æ–°ç­‰æ‚äº‹ç”±åŠ©æ‰‹ï¼ˆSidecar å®¹å™¨ï¼‰å®Œæˆã€‚è¿™ç§åˆ†å·¥åä½œå¤§å¤§æå‡äº†æ•ˆç‡å’Œä¸“ä¸šæ€§ã€‚</p>
<h3 data-id="heading-3">äº‘åŸç”Ÿæ—¶ä»£çš„â€œåŠŸèƒ½æ‰©å±•æ§½â€</h3>
<p>åœ¨äº‘åŸç”Ÿæ¶æ„ä¸­ï¼ŒSidecar å¦‚åŒè®¡ç®—æœºä¸»æ¿ä¸Šçš„<strong>æ‰©å±•æ§½</strong>ï¼Œå…è®¸æˆ‘ä»¬ä¸ºåº”ç”¨åŠ¨æ€æ·»åŠ å„ç§èƒ½åŠ›è€Œæ— é¡»ä¿®æ”¹åº”ç”¨æœ¬èº«ã€‚</p>
<ul>
<li><strong>æ—¥å¿—æ”¶é›†</strong>ï¼šä¸»å®¹å™¨å†™æ—¥å¿—åˆ°å…±äº«å·ï¼ŒSidecar å®¹å™¨è´Ÿè´£æ”¶é›†å’Œå‘é€åˆ°æ—¥å¿—ç³»ç»Ÿ</li>
<li><strong>æœåŠ¡ç½‘æ ¼</strong>ï¼šå¦‚ Istio ä½¿ç”¨ Envoy ä½œä¸º Sidecar ä»£ç†ï¼Œå®ç°æœåŠ¡é—´é€šä¿¡çš„ç›‘æ§ã€å®‰å…¨å’Œæ§åˆ¶</li>
<li><strong>é…ç½®ç®¡ç†</strong>ï¼šSidecar ç›‘å¬é…ç½®ä¸­å¿ƒï¼ŒåŠ¨æ€æ›´æ–°é…ç½®æ–‡ä»¶ï¼Œä¸»å®¹å™¨åªéœ€è¯»å–æœ¬åœ°æ–‡ä»¶</li>
<li><strong>å®‰å…¨ä»£ç†</strong>ï¼šå¦‚ Vault Agent Sidecarï¼Œè´Ÿè´£ä¸å¯†é’¥ç®¡ç†ç³»ç»Ÿäº¤äº’ï¼Œä¸»åº”ç”¨æ— æ„ŸçŸ¥</li>
</ul>
<h2 data-id="heading-4">ä¸ºä»€ä¹ˆâ€œå¤šè·‘ä¸€ä¸ªå®¹å™¨â€å¦‚æ­¤é‡è¦ï¼Ÿ</h2>
<h3 data-id="heading-5">1. æ— ä¾µå…¥å¼æ¶æ„è®¾è®¡</h3>
<p>ä¼ ç»Ÿåšæ³•ä¸­ï¼Œè¦ä¸ºåº”ç”¨æ·»åŠ ç›‘æ§ã€å®‰å…¨æˆ–é€šä¿¡åŠŸèƒ½ï¼Œé€šå¸¸éœ€è¦ä¿®æ”¹åº”ç”¨ä»£ç ã€‚è€Œ Sidecar æ¨¡å¼é€šè¿‡â€œå¤šè·‘ä¸€ä¸ªå®¹å™¨â€å®ç°äº†<strong>é›¶ä¾µå…¥</strong>çš„åŠŸèƒ½å¢å¼ºã€‚</p>
<p>ä»¥æœåŠ¡ç½‘æ ¼ä¸ºä¾‹ï¼Œåº”ç”¨ä»£ç æ— éœ€å…³å¿ƒæœåŠ¡å‘ç°ã€ç†”æ–­ã€é‡è¯•ç­‰å¤æ‚é€»è¾‘ï¼Œæ‰€æœ‰è¿™äº›éƒ½ç”± Sidecar ä»£ç†é€æ˜å¤„ç†ã€‚</p>
<h3 data-id="heading-6">2. æŠ€æœ¯æ ˆæ— å…³æ€§</h3>
<p>Sidecar å®¹å™¨å¯ä»¥ç”¨ä»»ä½•è¯­è¨€ç¼–å†™ï¼Œä¸ä¸»åº”ç”¨å®¹å™¨çš„æŠ€æœ¯æ ˆæ— å…³ã€‚ä¸€ä¸ª Java åº”ç”¨å¯ä»¥æ­é…ä¸€ä¸ª Go æˆ– Rust ç¼–å†™çš„ Sidecarï¼Œå……åˆ†å‘æŒ¥å„è¯­è¨€ä¼˜åŠ¿ã€‚</p>
<h3 data-id="heading-7">3. ç‹¬ç«‹æ€§å’Œå¯å¤ç”¨æ€§</h3>
<p>Sidecar å®¹å™¨å¯ä»¥<strong>ç‹¬ç«‹å¼€å‘ã€å‡çº§å’Œéƒ¨ç½²</strong>ã€‚ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„æ—¥å¿—æ”¶é›† Sidecar å¯ä»¥è¢«å…¨å…¬å¸æ‰€æœ‰æœåŠ¡å¤ç”¨ï¼Œå¤§å¤§é™ä½å¼€å‘ç»´æŠ¤æˆæœ¬ã€‚</p>
<h2 data-id="heading-8">å®æˆ˜ç¤ºä¾‹ï¼šSidecar å¦‚ä½•å·¥ä½œ</h2>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå…·ä½“ä¾‹å­çœ‹çœ‹â€œå¤šè·‘ä¸€ä¸ªå®¹å™¨â€å¦‚ä½•å®é™…è¿ä½œï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Pod</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-with-logger</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">volumes:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-logs</span>
    <span class="hljs-attr">emptyDir:</span> {}  <span class="hljs-comment"># ä¸´æ—¶å…±äº«ç›®å½•</span>

  <span class="hljs-attr">containers:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">nginx</span>
    <span class="hljs-attr">volumeMounts:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-logs</span>
      <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/var/log/nginx</span>

  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">log-sidecar</span>  <span class="hljs-comment"># è¿™å°±æ˜¯â€œå¤šè·‘â€çš„å®¹å™¨</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">busybox</span>
    <span class="hljs-attr">command:</span> [<span class="hljs-string">"/bin/sh"</span>, <span class="hljs-string">"-c"</span>]
    <span class="hljs-attr">args:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">while</span> <span class="hljs-literal">true</span><span class="hljs-string">;</span> <span class="hljs-string">do</span>
        <span class="hljs-string">if</span> [ <span class="hljs-string">-f</span> <span class="hljs-string">/var/log/nginx/access.log</span> ]<span class="hljs-string">;</span> <span class="hljs-string">then</span>
          <span class="hljs-string">tail</span> <span class="hljs-string">-n</span> <span class="hljs-number">10</span> <span class="hljs-string">/var/log/nginx/access.log;</span>
        <span class="hljs-string">fi;</span>
        <span class="hljs-string">sleep</span> <span class="hljs-number">5</span><span class="hljs-string">;</span>
      <span class="hljs-string">done</span>
    <span class="hljs-attr">volumeMounts:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-logs</span>
      <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/var/log/nginx</span>
</code></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š</p>
<ul>
<li><strong>nginx å®¹å™¨</strong>ï¼šä¸“æ³¨æä¾› Web æœåŠ¡ï¼Œå°†æ—¥å¿—å†™å…¥ <code>/var/log/nginx</code></li>
<li><strong>log-sidecar å®¹å™¨</strong>ï¼šè´Ÿè´£è¯»å–æ—¥å¿—å¹¶å¤„ç†ï¼ˆç¤ºä¾‹ä¸­åªæ˜¯æ‰“å°ï¼Œå®é™…å¯å‘é€åˆ°æ—¥å¿—ç³»ç»Ÿï¼‰</li>
</ul>
<p>ä¸¤ä¸ªå®¹å™¨é€šè¿‡ <strong>emptyDir å·</strong>å…±äº«æ—¥å¿—ç›®å½•ï¼Œé€šè¿‡ <strong>localhost</strong> é€šä¿¡ï¼ˆå¦‚æœéœ€è¦ï¼‰ï¼Œå…±åŒæ„æˆä¸€ä¸ªå®Œæ•´çš„ Web æœåŠ¡å•å…ƒã€‚</p>
<h2 data-id="heading-9">è¶…è¶Šâ€œå¤šä¸€ä¸ªå®¹å™¨â€ï¼šSidecar çš„é«˜çº§æ¨¡å¼</h2>
<h3 data-id="heading-10">æœåŠ¡ç½‘æ ¼ä¸­çš„ Sidecar</h3>
<p>åœ¨æœåŠ¡ç½‘æ ¼ï¼ˆå¦‚ Istioï¼‰ä¸­ï¼ŒSidecar æ¨¡å¼å‘æŒ¥åˆ°æè‡´ã€‚æ¯ä¸ª Pod ä¸­æ³¨å…¥çš„ Envoy ä»£ç†å®¹å™¨é€æ˜åœ°æ‹¦æˆªå’Œå¤„ç†æ‰€æœ‰è¿›å‡ºæµé‡ï¼Œå®ç°ç²¾ç»†åŒ–çš„æµé‡ç®¡ç†ã€å®‰å…¨åŠ å¯†å’Œå¯è§‚æµ‹æ€§ã€‚</p>
<p>è¿™æ—¶ï¼Œâ€œå¤šè·‘çš„å®¹å™¨â€ä¸å†æ˜¯ç®€å•çš„è¾…åŠ©è§’è‰²ï¼Œè€Œæ˜¯æ„æˆäº†<strong>åˆ†å¸ƒå¼ç³»ç»Ÿçš„é€šä¿¡åŸºç¡€è®¾æ–½</strong>ã€‚</p>
<h3 data-id="heading-11">é€‚é…å™¨æ¨¡å¼</h3>
<p>Sidecar å¯ä»¥ä½œä¸º<strong>é€‚é…å™¨</strong>ï¼Œåœ¨ä¸åŒæ¥å£æˆ–åè®®é—´è¿›è¡Œè½¬æ¢ã€‚ä¾‹å¦‚ï¼Œä¸»å®¹å™¨æš´éœ² <code>/metrics</code> æ¥å£ï¼Œè€Œç›‘æ§ç³»ç»Ÿéœ€è¦ <code>/health</code> æ¥å£ï¼ŒSidecar å®¹å™¨è´Ÿè´£åè®®è½¬æ¢ï¼Œæ— éœ€ä¿®æ”¹ä¸»åº”ç”¨ã€‚</p>
<h2 data-id="heading-12">æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹</h2>
<p>è™½ç„¶ Sidecar åŠŸèƒ½å¼ºå¤§ï¼Œä½†ä¹Ÿéœ€è¦è°¨æ…ä½¿ç”¨ï¼š</p>
<h3 data-id="heading-13">å¯åŠ¨é¡ºåºåè°ƒ</h3>
<p>Kubernetes ä¸ä¿è¯å®¹å™¨å¯åŠ¨é¡ºåºï¼Œå¦‚æœ Sidecar éœ€è¦å…ˆäºä¸»å®¹å™¨å°±ç»ªï¼ˆå¦‚é…ç½®åŒæ­¥ Sidecarï¼‰ï¼Œéœ€è¦é€šè¿‡ initContainers æˆ–å¥åº·æ£€æŸ¥æœºåˆ¶åè°ƒã€‚</p>
<h3 data-id="heading-14">èµ„æºç®¡ç†</h3>
<p>ä¸º Sidecar è®¾ç½®åˆç†çš„èµ„æºè¯·æ±‚å’Œé™åˆ¶ï¼Œé¿å…ä¸ä¸»å®¹å™¨èµ„æºäº‰æŠ¢ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">resources:</span>
  <span class="hljs-attr">requests:</span>
    <span class="hljs-attr">cpu:</span> <span class="hljs-string">100m</span>
    <span class="hljs-attr">memory:</span> <span class="hljs-string">128Mi</span>
  <span class="hljs-attr">limits:</span>
    <span class="hljs-attr">cpu:</span> <span class="hljs-string">200m</span>
    <span class="hljs-attr">memory:</span> <span class="hljs-string">256Mi</span>
</code></pre>
<h3 data-id="heading-15">é¿å…è¿‡åº¦ä½¿ç”¨</h3>
<p>ä¸æ˜¯æ‰€æœ‰åŠŸèƒ½éƒ½é€‚åˆ Sidecar æ¨¡å¼ã€‚å¦‚æœæ¶æ„ä¸å¤æ‚ï¼Œç›´æ¥ä½¿ç”¨ API ç½‘å…³æˆ–ä¼ ç»Ÿä¸­é—´ä»¶å¯èƒ½æ›´ç®€å•ã€‚</p>
<h2 data-id="heading-16">ä¸å…¶ä»–æ¨¡å¼çš„å…³ç³»</h2>
<h3 data-id="heading-17">Sidecar vs Init å®¹å™¨</h3>
<ul>
<li><strong>Init å®¹å™¨</strong>ï¼šåœ¨ Pod å¯åŠ¨å‰è¿è¡Œï¼Œå®Œæˆå³é€€å‡ºï¼Œç”¨äºåˆå§‹åŒ–å·¥ä½œ</li>
<li><strong>Sidecar å®¹å™¨</strong>ï¼šä¸ä¸»å®¹å™¨å¹¶è¡Œè¿è¡Œï¼Œåœ¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…æä¾›è¾…åŠ©åŠŸèƒ½</li>
</ul>
<h3 data-id="heading-18">Sidecar vs DaemonSet</h3>
<ul>
<li><strong>Sidecar</strong>ï¼šæ¯ä¸ªåº”ç”¨å®ä¾‹ä¸€ä¸ªï¼Œä¸ç‰¹å®šåº”ç”¨ç´§å¯†ç»‘å®š</li>
<li><strong>DaemonSet</strong>ï¼šæ¯ä¸ªèŠ‚ç‚¹ä¸€ä¸ªï¼Œæä¾›èŠ‚ç‚¹çº§åˆ«æœåŠ¡</li>
</ul>
<h2 data-id="heading-19">æ€»ç»“ï¼šç®€å•æ¦‚å¿µèƒŒåçš„æ·±è¿œå½±å“</h2>
<p>å›åˆ°æœ€åˆçš„é—®é¢˜ï¼šâ€œSidecar ä¸å°±æ˜¯ Pod é‡Œå¤šè·‘ä¸€ä¸ªå®¹å™¨å—ï¼Ÿâ€â€”â€”<strong>æ˜¯ï¼Œä½†è¿œä¸æ­¢äºæ­¤</strong>ã€‚</p>
<p>è¿™ä¸ªçœ‹ä¼¼ç®€å•çš„â€œå¤šè·‘ä¸€ä¸ªå®¹å™¨â€è®¾è®¡ï¼Œå®é™…ä¸Šä»£è¡¨äº†äº‘åŸç”Ÿæ¶æ„çš„æ ¸å¿ƒæ€æƒ³ï¼š<strong>å…³æ³¨ç‚¹åˆ†ç¦»ã€æ¾æ•£è€¦åˆã€å¯å¤ç”¨æ€§</strong>ã€‚å®ƒè®©åº”ç”¨å¼€å‘è€…ä¸“æ³¨ä¸šåŠ¡é€»è¾‘ï¼Œè€Œå°†é€šç”¨èƒ½åŠ›ä¸‹æ²‰åˆ°åŸºç¡€è®¾æ–½å±‚ã€‚</p>
<p>ä»ç®€å•çš„æ—¥å¿—æ”¶é›†åˆ°å¤æ‚çš„æœåŠ¡ç½‘æ ¼ï¼Œä»é…ç½®ç®¡ç†åˆ°å®‰å…¨ä»£ç†ï¼ŒSidecar æ¨¡å¼å·²ç»æˆä¸ºç°ä»£äº‘åŸç”Ÿæ¶æ„ä¸å¯æˆ–ç¼ºçš„ç»„æˆéƒ¨åˆ†ã€‚å®ƒä¸æ˜¯ä»€ä¹ˆé“¶å¼¹ï¼Œä½†å½“åˆç†ä½¿ç”¨æ—¶ï¼Œç¡®å®èƒ½å¤Ÿæå¤§åœ°æå‡ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ã€å¯è§‚æµ‹æ€§å’Œçµæ´»æ€§ã€‚</p>
<p>æ‰€ä»¥ï¼Œéœ€è¦ç†è§£è¿™ç®€å•è¡¨è±¡èƒŒåè•´å«çš„æ·±åšæ¶æ„æ™ºæ…§ã€‚</p>
<p><em>æ˜¯çš„ï¼Œå®ƒå°±æ˜¯å¤šè·‘ä¸€ä¸ªå®¹å™¨ï¼Œä½†æ­£æ˜¯è¿™ä¸ªâ€œå¤šè·‘â€çš„å®¹å™¨ï¼Œè®©äº‘åŸç”Ÿåº”ç”¨æ¶æ„å˜å¾—å¦‚æ­¤å¼ºå¤§è€Œä¼˜é›…ã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä» Haskell åˆ° Goï¼šè®°ä¸€æ¬¡ RSA åŠ å¯†åè®®ç§»æ¤ä¸â€œå­—èŠ‚é™·é˜±â€æ’æŸ¥å®å½•]]></title>    <link>https://juejin.cn/post/7588093282530754612</link>    <guid>https://juejin.cn/post/7588093282530754612</guid>    <pubDate>2025-12-28T01:04:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588093282530754612" data-draft-id="7588092534162309120" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä» Haskell åˆ° Goï¼šè®°ä¸€æ¬¡ RSA åŠ å¯†åè®®ç§»æ¤ä¸â€œå­—èŠ‚é™·é˜±â€æ’æŸ¥å®å½•"/> <meta itemprop="keywords" content="Go,Haskell"/> <meta itemprop="datePublished" content="2025-12-28T01:04:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lupino"/> <meta itemprop="url" content="https://juejin.cn/user/3051900006579256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä» Haskell åˆ° Goï¼šè®°ä¸€æ¬¡ RSA åŠ å¯†åè®®ç§»æ¤ä¸â€œå­—èŠ‚é™·é˜±â€æ’æŸ¥å®å½•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3051900006579256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lupino
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T01:04:45.000Z" title="Sun Dec 28 2025 01:04:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. èƒŒæ™¯ä¸ç›®æ ‡</h2>
<p>æœ¬æ¬¡ä»»åŠ¡çš„ç›®æ ‡æ˜¯å°†ä¸€ä¸ªç”¨ Haskell ç¼–å†™çš„åŠ å¯†ä¼ è¾“åè®®ï¼ˆ<code>Metro.TP.RSA</code>ï¼‰ç§»æ¤åˆ° Go è¯­è¨€ä¸­ï¼Œå¹¶å°è£…ä¸ºæ ‡å‡†çš„ <code>net.Conn</code> æ¥å£ï¼Œä»¥ä¾¿æ›¿æ¢åŸæœ‰çš„ <code>XORConn</code> å®ç°ã€‚</p>
<p>è¯¥åè®®ä¸ä»…ä»…æ˜¯ç®€å•çš„åŠ å¯†ï¼Œè¿˜æ˜¯ä¸€ä¸ªå¸¦æœ‰çŠ¶æ€åå•†çš„æ··åˆåè®®ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹ç‰¹æ€§ï¼š</p>
<ul>
<li>
<p><strong>èº«ä»½æ¡æ‰‹</strong>ï¼šåŸºäº RSA å…¬ç§é’¥äº¤æ¢æŒ‡çº¹ï¼ˆSHA256ï¼‰ï¼ŒéªŒè¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„åˆæ³•æ€§ã€‚</p>
</li>
<li>
<p><strong>æ¨¡å¼åå•†</strong>ï¼šæ”¯æŒä¸‰ç§ä¼ è¾“æ¨¡å¼ï¼š</p>
<ul>
<li><code>Plain</code> (0): æ˜æ–‡ç›´è¿ã€‚</li>
<li><code>RSA</code> (1): å…¨ç¨‹ä½¿ç”¨ RSA-OAEP åŠ å¯†ï¼ˆä¼ ç»Ÿ/å…¼å®¹æ¨¡å¼ï¼‰ã€‚</li>
<li><code>AES</code> (2): ä½¿ç”¨åå•†å‡ºçš„ Session Key è¿›è¡Œ AES-256-CTR åŠ å¯†ï¼ˆé«˜æ€§èƒ½æ¨¡å¼ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-1">2. é‡åˆ°çš„æ ¸å¿ƒé—®é¢˜</h2>
<p>åœ¨åˆæ­¥ç§»æ¤å®Œæˆåï¼Œæˆ‘ä»¬é‡åˆ°äº†ä¸€ä¸ªéå¸¸è¯¡å¼‚çš„ç°è±¡ï¼š</p>
<ul>
<li><strong>Plain æ¨¡å¼</strong>ï¼šä¸€åˆ‡æ­£å¸¸ï¼Œæ¡æ‰‹æˆåŠŸï¼Œæ•°æ®ä¼ è¾“æµç•…ã€‚</li>
<li><strong>AES/RSA æ¨¡å¼</strong>ï¼šæ¡æ‰‹çœ‹ä¼¼å®Œæˆï¼Œä½†éšåè¿æ¥é™·å…¥â€œå‡æ­»â€çŠ¶æ€ï¼ˆHangï¼‰ï¼Œæ— æ³•è¯»å–æ•°æ®ã€‚</li>
</ul>
<p>é€šå¸¸å¦‚æœæ˜¯åŠ å¯†ç®—æ³•é”™è¯¯ï¼ˆå¦‚ IV é”™è¯¯ã€Padding é”™è¯¯ï¼‰ï¼Œç¨‹åºå¾€å¾€ä¼šç›´æ¥æŠ¥é”™ï¼ˆDecryption Failedï¼‰ã€‚è¿™ç§â€œå¡ä½â€çš„ç°è±¡é€šå¸¸æ„å‘³ç€<strong>åè®®çŠ¶æ€æœºä¸åŒæ­¥</strong>æˆ–**æ•°æ®åˆ†åŒ…ï¼ˆFramingï¼‰**å‡ºäº†é—®é¢˜ã€‚</p>
<h2 data-id="heading-2">3. æ·±åº¦æ’æŸ¥ï¼šå­—èŠ‚çº§â€œè„‘è£‚â€</h2>
<p>ç»è¿‡æ’æŸ¥ï¼Œé—®é¢˜çš„æ ¹æºéšè—åœ¨ Haskell å’Œ Go å¯¹æšä¸¾ç±»å‹ï¼ˆEnumï¼‰é»˜è®¤åºåˆ—åŒ–è¡Œä¸ºçš„å·®å¼‚ä¸­ã€‚</p>
<h3 data-id="heading-3">3.1 åè®®å·®å¼‚åˆ†æ</h3>
<ul>
<li>
<p>Haskell ç«¯ (Data.Binary)ï¼š</p>
<p>RSAMode æ´¾ç”Ÿè‡ª Genericã€‚å¯¹äºè¿™ç§ç®€å•çš„ Sum Typeï¼ˆæšä¸¾ï¼‰ï¼ŒHaskell çš„æ ‡å‡†äºŒè¿›åˆ¶åº“å°†å…¶ç¼–ç ä¸º 1 ä¸ªå­—èŠ‚ çš„ç´¢å¼•å€¼ï¼ˆ0, 1, 2ï¼‰ã€‚</p>
</li>
<li>
<p>Go ç«¯ (æ—§ä»£ç )ï¼š</p>
<p>æˆ‘ä»¬åœ¨å‘é€æ¨¡å¼æ—¶ï¼Œä¹ æƒ¯æ€§åœ°ä½¿ç”¨äº† binary.BigEndian.PutUint64ï¼Œå‘é€äº† 8 ä¸ªå­—èŠ‚ã€‚</p>
</li>
</ul>
<h3 data-id="heading-4">3.2 æ•…éšœé‡ç°</h3>
<p>å½“ Go å®¢æˆ·ç«¯è¯·æ±‚ <strong>AES æ¨¡å¼ (2)</strong> æ—¶ï¼Œå‘ç”Ÿäº†ä»¥ä¸‹äº¤äº’ï¼š</p>
<ol>
<li>
<p><strong>Go å‘é€</strong>ï¼š<code>00 00 00 00 00 00 00 02</code> (8å­—èŠ‚)ã€‚</p>
</li>
<li>
<p><strong>Haskell æ¥æ”¶</strong>ï¼šè¯»å– <strong>1ä¸ªå­—èŠ‚</strong>ï¼Œè¯»åˆ°äº† <code>00</code>ã€‚</p>
</li>
<li>
<p><strong>Haskell çŠ¶æ€</strong>ï¼š<code>00</code> å¯¹åº” <code>Plain</code> æ¨¡å¼ã€‚Haskell è®¤ä¸ºåå•†ç»“æŸï¼Œè¿›å…¥æ˜æ–‡æ¥æ”¶çŠ¶æ€ã€‚</p>
</li>
<li>
<p><strong>Go çŠ¶æ€</strong>ï¼šå‘é€å®Œæ¯•ï¼Œè®¤ä¸ºåå•†æˆåŠŸï¼Œè¿›å…¥ AES æ¨¡å¼ï¼Œå¼€å§‹å‘é€åŠ å¯†åçš„ Session Keyã€‚</p>
</li>
<li>
<p><strong>ç»“æœï¼ˆè„‘è£‚ï¼‰</strong> ï¼š</p>
<ul>
<li>Haskell åœ¨ç­‰æ˜æ–‡åº”ç”¨æ•°æ®ã€‚</li>
<li>Go å‘é€äº†ä¸€å †åŠ å¯†çš„äºŒè¿›åˆ¶æµï¼ˆSession Keyï¼‰ã€‚</li>
<li>Haskell è¯»å…¥è¿™äº›ä¹±ç è¯•å›¾å¤„ç†ï¼Œå¯¼è‡´é€»è¾‘é”™ä¹±æˆ–åœ¨ç­‰å¾…åç»­æ•°æ®åŒ…å¤´ï¼ˆLength Headerï¼‰æ—¶æ— é™é˜»å¡ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-5">3.3 ä¸ºä»€ä¹ˆ Plain æ¨¡å¼èƒ½è·‘é€šï¼Ÿ</h3>
<p>è¿™æ˜¯ä¸€ä¸ªæå…·è¿·æƒ‘æ€§çš„å·§åˆã€‚</p>
<p>å½“ Go è¯·æ±‚ Plain (0) æ—¶ï¼Œå‘é€çš„æ˜¯ 00 00 00 00 00 00 00 00ã€‚</p>
<p>Haskell è¯»å–ç¬¬ä¸€ä¸ªå­—èŠ‚ 00ï¼Œè§£æä¸º Plainã€‚</p>
<p>è™½ç„¶ Go å¤šå‘äº†7ä¸ªå­—èŠ‚çš„ 00ï¼Œä½†å› ä¸ºåç»­æ˜¯æ˜æ–‡ä¼ è¾“ï¼Œè¿™å‡ ä¸ªç©ºå­—èŠ‚å¯èƒ½è¢«åº”ç”¨å±‚å¿½ç•¥æˆ–æ°å¥½æœªé€ æˆä¸¥é‡ç ´åï¼ˆè§†å…·ä½“åº”ç”¨å±‚åè®®è€Œå®šï¼‰ï¼Œä»è€Œæ©ç›–äº† bugã€‚</p>
<h2 data-id="heading-6">4. è§£å†³æ–¹æ¡ˆä¸æœ€ç»ˆå®ç°</h2>
<h3 data-id="heading-7">4.1 ä¿®å¤åºåˆ—åŒ–</h3>
<p>å°† Go ä»£ç ä¸­çš„æ¨¡å¼å‘é€ä¸æ¥æ”¶ä¸¥æ ¼é™åˆ¶ä¸º <strong>1 å­—èŠ‚</strong>ï¼š</p>
<p>Go</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// å‘é€ (Client)</span>
modeByte := []<span class="hljs-type">byte</span>{<span class="hljs-type">byte</span>(mode)}
c.sendDataOAEP(modeByte)

<span class="hljs-comment">// æ¥æ”¶ (Server)</span>
modeBytes, _ := c.recvDataOAEP()
mode := <span class="hljs-type">int</span>(modeBytes[<span class="hljs-number">0</span>])
</code></pre>
<h3 data-id="heading-8">4.2 å®Œå–„æµå¼å¤„ç†</h3>
<p>ç”±äº AES-CTR æ˜¯æµåŠ å¯†ï¼Œä½†åè®®å®šä¹‰äº† <code>[Length][IV][Body]</code> çš„å°åŒ…æ ¼å¼ï¼Œè€Œ <code>net.Conn.Read</code> æ˜¯æµå¼çš„ã€‚ä¸ºäº†é˜²æ­¢ TCP ç²˜åŒ…æˆ–æ–­åŒ…å¯¼è‡´è§£å¯†å¤±è´¥ï¼Œæˆ‘ä»¬åœ¨ Go ç»“æ„ä½“ä¸­å¼•å…¥äº† <code>bytes.Buffer</code>ï¼š</p>
<p>Go</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> RSAConn <span class="hljs-keyword">struct</span> {
    net.Conn
    <span class="hljs-comment">// ... keys ...</span>
    readBuf bytes.Buffer <span class="hljs-comment">// å…³é”®ï¼šå†…éƒ¨ç¼“å†²</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *RSAConn)</span></span> Read(b []<span class="hljs-type">byte</span>) (n <span class="hljs-type">int</span>, err <span class="hljs-type">error</span>) {
    <span class="hljs-comment">// ä¼˜å…ˆä»ç¼“å†²åŒºåå‡ºå·²è§£å¯†æ•°æ®</span>
    <span class="hljs-keyword">if</span> c.readBuf.Len() &gt; <span class="hljs-number">0</span> {
        <span class="hljs-keyword">return</span> c.readBuf.Read(b)
    }
    <span class="hljs-comment">// ç¼“å†²åŒºç©ºï¼Œä»ç½‘ç»œè¯»å–å®Œæ•´çš„ä¸€ä¸ªåŠ å¯†åŒ…ï¼Œè§£å¯†åå¡«å…¥ç¼“å†²åŒº</span>
    <span class="hljs-comment">// ... recvDataAES logic ...</span>
}
</code></pre>
<h2 data-id="heading-9">5. æ€»ç»“ä¸ç»éªŒ</h2>
<ol>
<li><strong>è·¨è¯­è¨€åè®®å¿…é¡»ç²¾ç¡®åˆ°å­—èŠ‚</strong>ï¼šä¸è¦å‡è®¾ <code>Int</code> æ˜¯ 4 å­—èŠ‚è¿˜æ˜¯ 8 å­—èŠ‚ï¼Œä¹Ÿä¸è¦ä¾èµ–è¯­è¨€ç‰¹å®šçš„åºåˆ—åŒ–åº“ï¼ˆå¦‚ Haskell çš„ <code>Generic</code> æˆ– Go çš„ <code>gob</code>ï¼‰ï¼Œé™¤éä½ å®Œå…¨æŒæ§ä¸¤ç«¯çš„å®ç°ã€‚æ˜ç¡®è§„å®š <code>uint8</code>ã€<code>uint64</code> (BigEndian) æ˜¯æœ€ç¨³å¦¥çš„ã€‚</li>
<li><strong>è­¦æƒ•â€œéƒ¨åˆ†æ­£å¸¸â€çš„ Bug</strong>ï¼šPlain æ¨¡å¼çš„æ­£å¸¸è¿è¡Œæ˜¯æœ€å¤§çš„å¹²æ‰°é¡¹ï¼Œå®ƒè®©æˆ‘ä»¬è¯¯ä»¥ä¸ºæ¡æ‰‹é€»è¾‘æ˜¯å®Œç¾çš„ï¼Œä»è€Œå°†æ’æŸ¥æ–¹å‘å¼•å‘äº†å¤æ‚çš„åŠ å¯†ç®—æ³•æœ¬èº«ï¼Œå®é™…ä¸Šé—®é¢˜åªæ˜¯ç®€å•çš„ç±»å‹å®½åº¦ä¸åŒ¹é…ã€‚</li>
<li><strong>æµå¼æ¥å£çš„é€‚é…</strong>ï¼šå°†åŸºäºåŒ…ï¼ˆPacket-basedï¼‰çš„åè®®é€‚é…åˆ°æµï¼ˆStream-basedï¼‰æ¥å£ï¼ˆå¦‚ <code>io.Reader</code>ï¼‰æ—¶ï¼Œ<strong>å¿…é¡»</strong>å®ç°å†…éƒ¨ç¼“å†²æœºåˆ¶ï¼Œå¦åˆ™ææ˜“å‡ºç°ç²˜åŒ…å¤„ç†ä¸å½“çš„é—®é¢˜ã€‚</li>
</ol>
<p>é€šè¿‡è¿™æ¬¡ä¿®å¤ï¼Œæˆ‘ä»¬æˆåŠŸå®ç°äº†ä¸€ä¸ªå…¼å®¹ Haskell åç«¯ã€æ”¯æŒ RSA èº«ä»½éªŒè¯å’Œ AES é«˜é€ŸåŠ å¯†çš„ Go è¯­è¨€ä¼ è¾“å±‚æ¨¡å—ï¼Œä¸ºåç»­çš„æœåŠ¡ç«¯åŠŸèƒ½æ‰©å±•ï¼ˆå¦‚ CS2 å¼€ç®±æœåŠ¡ï¼‰æ‰“ä¸‹äº†åšå®åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çŸ­æ€è€ƒç¬¬266å¤©ï¼Œç©IPè·¯ä¸Šçš„å‡ ç‚¹æ„Ÿæ‚Ÿï¼Œè¿™å‡ ç‚¹å¾ˆé‡è¦ï¼]]></title>    <link>https://juejin.cn/post/7588300640599146502</link>    <guid>https://juejin.cn/post/7588300640599146502</guid>    <pubDate>2025-12-28T00:57:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588300640599146502" data-draft-id="7588191506606374918" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çŸ­æ€è€ƒç¬¬266å¤©ï¼Œç©IPè·¯ä¸Šçš„å‡ ç‚¹æ„Ÿæ‚Ÿï¼Œè¿™å‡ ç‚¹å¾ˆé‡è¦ï¼"/> <meta itemprop="keywords" content="åˆ›ä¸š,å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2025-12-28T00:57:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜ç æ­Œ"/> <meta itemprop="url" content="https://juejin.cn/user/764915820529831"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çŸ­æ€è€ƒç¬¬266å¤©ï¼Œç©IPè·¯ä¸Šçš„å‡ ç‚¹æ„Ÿæ‚Ÿï¼Œè¿™å‡ ç‚¹å¾ˆé‡è¦ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/764915820529831/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜ç æ­Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T00:57:58.000Z" title="Sun Dec 28 2025 00:57:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>1ã€ç æ‰æ— å¤åˆ©æˆ–è€…å¤åˆ©ä¸é«˜çš„é¡¹ç›®ï¼Œåˆ æ‰æ— ä»·å€¼çš„å¥½å‹ï¼Œåšå‡æ³•ã€‚ä¸“æ³¨æœ‰é•¿çº¿ç§¯ç´¯çš„çŸ­æ–‡å†™ä½œã€å…¬ä¼—å·ä¸“æ ã€ç¤¾ç¾¤åˆä¼™äººç­‰</p>
<p>2ã€ç©IPï¼Œ ä¸€å®šè¦å¿˜äº†é˜…è¯»é‡æŒ‡æ ‡ï¼Œç”¨å¤„ä¸å¤§ã€‚æ ¸å¿ƒæ˜¯æ–‡ç« è·å–çš„ç²¾å‡†ç”¨æˆ·ï¼Œç‚¹èµã€æ”¶è—ã€å’¨è¯¢ã€å¯¼ç§åŸŸã€æˆäº¤ç­‰æ•°æ®</p>
<p>3ã€â€œæ—¥å…¥800â€ï¼Œæ€»èƒ½çœ‹åˆ°ç±»ä¼¼çš„ç®€ä»‹å¼•æµï¼Œå»å¸å¼•å‰¯ä¸šå°ç™½ä»˜è´¹å­¦ä¹ ã€‚ç±»ä¼¼è¿™æ ·çš„ï¼Œä¸€å¾‹åˆ«ç†ï¼Œæ™®é€šäººå‡ ä¹ä¸å¯èƒ½ï¼Œå¤§æ¦‚ç‡æ˜¯èµšä½ å­¦è´¹</p>
<p>4ã€å¯¹å®Œå…¨æ²¡åŸºç¡€çš„åŒå­¦ç©å‰¯ä¸šIPï¼Œ è¦åšå¥½3å¹´ä¹‹å†…æ”¶å…¥ä¸ç¨³å®šçš„å¿ƒç†å‡†å¤‡ï¼Œæ„å‘³ç€ä½ å¿…é¡»æœ‰ä¸€ä»½ä¸»ä¸šï¼Œç¡®ä¿æœ‰åŸºç¡€çš„æ”¶å…¥æ¥æºï¼Œåˆ«ç›²ç›®è£¸è¾ã€‚ä¸€äººä¼ä¸šæ¢ç´¢éœ€è¦æ—¶é—´å‘¨æœŸï¼Œå¾ˆé•¿ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å“åº”å¼ç¼–ç¨‹ä¸åªæœ‰æ¦‚å¿µï¼ä¸‡å­—é•¿æ–‡ + ä»£ç ç¤ºä¾‹ï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ ç©è½¬ RxJava]]></title>    <link>https://juejin.cn/post/7588095884070273024</link>    <guid>https://juejin.cn/post/7588095884070273024</guid>    <pubDate>2025-12-28T01:07:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588095884070273024" data-draft-id="7588093282530770996" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å“åº”å¼ç¼–ç¨‹ä¸åªæœ‰æ¦‚å¿µï¼ä¸‡å­—é•¿æ–‡ + ä»£ç ç¤ºä¾‹ï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ ç©è½¬ RxJava"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-28T01:07:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaéšæƒ³å½•"/> <meta itemprop="url" content="https://juejin.cn/user/2837192913204935"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å“åº”å¼ç¼–ç¨‹ä¸åªæœ‰æ¦‚å¿µï¼ä¸‡å­—é•¿æ–‡ + ä»£ç ç¤ºä¾‹ï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ ç©è½¬ RxJava
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2837192913204935/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaéšæƒ³å½•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T01:07:20.000Z" title="Sun Dec 28 2025 01:07:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»29åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡å·²æ”¶å½•è‡³GitHubï¼Œæ¨èé˜…è¯» ğŸ‘‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FBookSea4j%2FJavaRecord" target="_blank" title="https://github.com/BookSea4j/JavaRecord" ref="nofollow noopener noreferrer">Javaéšæƒ³å½•</a></p>
<p>å¾®ä¿¡å…¬ä¼—å·ï¼šJavaéšæƒ³å½•</p>
<h2 data-id="heading-0">Reactive Streams ä»‹ç»</h2>
<p>åœ¨èŠ Reactive Streams ä¹‹å‰ï¼Œå…ˆäº†è§£ä¸€ä¸‹ Reactive Programmingï¼ˆååº”å¼/å“åº”å¼ç¼–ç¨‹ï¼‰ã€‚ä¸ºäº†è§£å†³å¼‚æ­¥ç¼–ç¨‹ä¸­å‡ºç°çš„å„ç§é—®é¢˜ï¼Œç¨‹åºå‘˜ä»¬æå‡ºäº†å„ç§çš„æ€è·¯å»è§£å†³è¿™äº›é—®é¢˜ï¼Œè¿™äº›è§£å†³é—®é¢˜çš„æ–¹å¼ã€æ–¹æ³•ï¼Œæ‰‹æ®µå°±å¯ä»¥å«åš Reactive Programmingã€‚</p>
<p>Reactive Programming æ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œç±»ä¼¼é¢å‘å¯¹è±¡ï¼Œå‡½æ•°å¼ç¼–ç¨‹ã€‚</p>
<p>æœ¬è´¨ä¸Šæ˜¯å¯¹æ•°æ®æµæˆ–æŸç§å˜åŒ–åšå‡ºçš„ååº”ï¼Œè¿™ä¸ªå˜åŒ–ä»€ä¹ˆæ—¶å€™è§¦å‘æ˜¯æœªçŸ¥çš„ï¼Œæ‰€ä»¥ä»–æ˜¯ä¸€ç§åŸºäºå¼‚æ­¥ã€å›è°ƒçš„æ–¹å¼åœ¨å¤„ç†é—®é¢˜ã€‚</p>
<p>å½“è¶Šæ¥è¶Šå¤šçš„ç¨‹åºå‘˜ï¼Œå¼€å§‹ä½¿ç”¨è¿™ç§ç¼–ç¨‹æ€æƒ³æ—¶ï¼Œéœ€è¦ä¸€äº›å¤§ä½¬æ¥ç»Ÿä¸€ä¸€ä¸ªæ€æƒ³è§„èŒƒã€‚æ‰€ä»¥å›½å¤–çš„å‡ ä¸ªå¤§ä½¬å…¬å¸å¯åŠ¨äº† Reactive Streams é¡¹ç›®ã€‚Netflixã€Pivotalã€Lightbend è”åˆæ¥ä¸ºå¼‚æ­¥æµå¤„ç†æä¾›æ ‡å‡†ï¼Œè§„èŒƒã€‚</p>
<p>Reactive Streams ç¿»è¯‘è¿‡æ¥å°±æ˜¯å“åº”å¼/ååº”å¼æµã€‚<strong>å…¶å®æ˜¯ä¸€ç§åŸºäºå¼‚æ­¥æµå¤„ç†çš„æ ‡å‡†åŒ–è§„èŒƒï¼Œç›®çš„æ˜¯åœ¨ä½¿ç”¨æµå¤„ç†æ—¶æ›´åŠ å¯é ï¼Œé«˜æ•ˆå’Œå“åº”å¼ã€‚</strong></p>
<h2 data-id="heading-1">Java å±‚é¢çš„ Reactive Streams</h2>
<p>åŸºäºè¿™ä¸ªè§„èŒƒçš„å®ç°å¾ˆå¤šï¼Œæ¯”å¦‚ä¸‰æ–¹åº“ä¸­æ¯”è¾ƒå‡ºåçš„ RxJavaï¼ŒReactor ç­‰ç­‰ã€‚</p>
<p>ä½†æ˜¯ JDK8 ç‰ˆæœ¬ä¸­ï¼ŒJava å·²ç»æœ‰äº† CompletableFuture çš„æ”¯æ’‘ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¤§é‡çš„å¼‚æ­¥ä»»åŠ¡åšå¥½ç¼–æ’ã€‚ä½†æ˜¯åœ¨ JDK8 ç‰ˆæœ¬ä¸­çš„ CompletableFuture ä¾ç„¶æœ‰å¾ˆå¤šç‰¹æ€§æ— æ³•æ”¯æ’‘ã€‚æ‰€ä»¥åœ¨ JDK9ï¼ŒCompletableFuture åšäº†å¾ˆå¤šçš„æ›´æ–°ï¼Œæ¯”å¦‚æ”¯æŒå»¶è¿Ÿï¼Œè¶…æ—¶ï¼Œå­ç±»åŒ–ä¹‹ç±»çš„åŠŸèƒ½ã€‚</p>
<p>è¿™æ—¶ï¼Œå’±ä»¬ä¼šå‘ç°ï¼Œå…¶å® CompletableFuture å·²ç»å¯ä»¥å»æ”¯æ’‘åšä¸€äº›å¼‚æ­¥ç¼–ç¨‹çš„æ“ä½œäº†ã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤šå¤§å…¬å¸ä¾ç„¶è¿˜æ˜¯ä½¿ç”¨ RxJavaï¼ŒReactor è¿™ç§ä¸‰æ–¹ä¾èµ–åº“å‘¢ï¼Ÿ</p>
<p>é—®é¢˜åœ¨äºï¼Œå¤§å¤šæ•°çš„æ—¶å€™ï¼Œå’±ä»¬é‡‡ç”¨å¼‚æ­¥ç¼–ç¨‹å¤„ç†çš„ä»»åŠ¡å¹¶ä¸æ˜¯éå¸¸å¤æ‚çš„ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå’±ä»¬ç¡®å®ä¸éœ€è¦å»ä½¿ç”¨ Reactive Streams ååº”æµçš„æ¡†æ¶ã€‚å¦‚æœç³»ç»Ÿè¶Šæ¥è¶Šå¤æ‚ï¼Œæˆ–è€…ä½ å¤„ç†çš„ä¸šåŠ¡æœ¬èº«å°±æ˜¯åŠå…¶å¤æ‚çš„é‚£ç§ï¼Œä½ å°±è¦å»å†™ä¸€ä¸ªè®©äººå¤´çš®å‘éº»çš„ä»£ç äº†ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œè¿™ç§ä»£ç ä¼šå˜æˆéå¸¸éš¾ä»¥ç»´æŠ¤ã€‚</p>
<p>å…¶æ¬¡ CompletableFuture å¹¶ä¸æ˜¯çœŸæ­£çš„åŸºäº Reactive Streams å»å®ç°ã€‚CompletableFuture æè¿°çš„æ˜¯å•æ¬¡æ‰§è¡Œçš„ç»“æœã€‚å°½ç®¡å¯ä»¥é€šè¿‡å„ç§æ–¹æ³•å°†å¼‚æ­¥ä»»åŠ¡ä¹‹é—´æ„å»ºæˆä¸€ä¸²ä»»åŠ¡ç»„æˆçš„æµç¨‹å›¾ï¼Œæœ¬è´¨ä¸Šä¾ç„¶æ˜¯å•æ¬¡çš„ç»“æœã€‚</p>
<p>ååº”å¼æµï¼Œé¢å‘çš„æ˜¯ Streamã€‚ å’±ä»¬ Java ä¸­çš„ Stream API æ›´ç±»ä¼¼ Reactive Streams çš„æ€æƒ³ã€‚Stream API æ˜¯åŒæ­¥é˜»å¡çš„ã€‚</p>
<p>æœ€ç»å…¸çš„å°±æ˜¯ CompletableFuture æ— æ³•å¤„ç† Reactive Streams ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼ŒBack Pressureï¼ˆèƒŒå‹ï¼Œåå‹ï¼Œå›å‹ï¼‰ï¼Œæ¯”å¦‚åœ¨ä¸Šä¸‹æ¸¸æ‰¿è½½èƒ½åŠ›ä¸åŒæ—¶ï¼Œæ¯”å¦‚ä¸‹æ¸¸ç©ä¸è½¬äº†ï¼Œéœ€è¦å‘ŠçŸ¥ä¸Šæ¸¸é‡‡å–ä¸€äº›ç­–ç•¥å»è§£å†³ã€‚CompletableFuture æ˜æ˜¾æ— æ³•å¤„ç†è¿™ç§ã€‚</p>
<p>å…¶æ¬¡è¿˜æœ‰ Java ä¸­æä¾›çš„å›è°ƒï¼ŒFuture æœºåˆ¶åœ¨å®ç°å“åº”å¼ç¼–ç¨‹ä¸­ï¼Œé—®é¢˜å’Œç¼ºç‚¹éƒ½æ¯”è¾ƒéš¾å¤„ç†ã€‚æœ‰ä¸ªæ¯”è¾ƒå‡ºåçš„æ¦‚å¿µå«åš Callback Hellï¼ˆå›è°ƒåœ°ç‹±ï¼‰ã€‚ç®€å•æ¥è¯´å°±æ˜¯å›è°ƒé‡Œé¢å¥—å›è°ƒï¼Œè™½ç„¶å°†å­è¿‡ç¨‹åšåˆ°è§£è€¦ï¼Œä½†æ˜¯éšç€ä¸šåŠ¡çš„è´Ÿè´£ï¼Œå›è°ƒä»£ç çš„å¯è¯»æ€§ã€å¤æ‚æ€§å°±å¤§å¤§çš„å¢åŠ ï¼Œè¿™ä¸ªå°±æ˜¯å›è°ƒåœ°ç‹±ã€‚</p>
<p>æ‰€ä»¥ï¼Œå’±ä»¬éœ€è¦ä¸€å¥—æ¡†æ¶æˆ–è€…è¯´ç±»åº“æ¥å®ç°çœŸæ­£å“åº”å¼æµï¼Œå¤§æ¦‚éœ€è¦å‡ ä¸ªç‰¹æ€§ï¼š</p>
<ul>
<li>æ”¯æŒå°†å¼‚æ­¥ä»»åŠ¡åšå°è£…ä»¥åŠç»„è£…ï¼Œéœ€è¦ API å¯¹å¼‚æ­¥ä»»åŠ¡è¿›è¡ŒåŒ…è£…ï¼Œå¹¶ä¸”éœ€è¦å¾ˆå¤šå­ä»»åŠ¡æ¥å¯¹å¼‚æ­¥æ“ä½œè¿›è¡Œé“¾å¼ç»„è£…ï¼Œè¿‡ç¨‹ä¸­åŒ…æ‹¬è¿‡æ»¤ï¼Œå¼‚å¸¸å¤„ç†ï¼Œè¶…æ—¶ç­‰ç­‰æ“ä½œã€‚</li>
<li>å‡å°‘å¼‚æ­¥ä»»åŠ¡çš„åµŒå¥—ï¼Œå‡å°‘ä»£ç çš„å¤æ‚æ€§ï¼Œå¢åŠ å¯è¯»æ€§ï¼Œé¿å… Callback Hell è¿™ç§åŠå…¶å¤æ‚æ¶å¿ƒçš„ä»£ç ã€‚</li>
<li>æ”¯æŒèƒŒå‹ Back Pressureï¼Œä¹Ÿå°±éœ€è¦æœ‰ä¸Šæ¸¸å’Œä¸‹æ¸¸çš„æ¦‚å¿µï¼Œå¯ä»¥åšåˆ°åå•†å¤„ç†æ•°æ®æµçš„é€Ÿåº¦ã€‚</li>
</ul>
<h2 data-id="heading-2">Java å±‚é¢ Reactive Steams çš„ API</h2>
<p>é¦–å…ˆ Reactive Steams å“åº”æµå®ç°æ–¹å¼å…¶å®æ˜¯åŸºäºè§‚å¯Ÿè€…æ¨¡å¼çš„æ‰©å±•ï¼ŒåŒæ—¶ä¹Ÿèƒ½çœ‹åˆ°å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œè´£ä»»é“¾æ¨¡å¼ç­‰ç­‰ã€‚</p>
<p>æ•´ä¸ª Reactive Steams æµç¨‹å¤§è‡´å¦‚ä¸‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9592c871e5e40f1be90efcf888187cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yemaj-aDs-W9lQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767488840&amp;x-signature=TSgTt3xeOZBxptm6EuAjG8vQSSg%3D" alt="" loading="lazy"/></p>
<p>ç›´æ¥åœ¨ JDK9 ç‰ˆæœ¬ä¹‹ä¸ŠæŸ¥çœ‹ Doug Lee æä¾›çš„ Flow ç±»ã€‚</p>
<p>åœ¨ Flow ç±»ä¸­ï¼Œæä¾›äº†æ ¸å¿ƒçš„å››ä¸ªæ¥å£ï¼šPublisherï¼ŒSubscriberï¼ŒSubscriptionï¼ŒProcessor</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09f5138c2bb440098f904bb47b27b6ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yemaj-aDs-W9lQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767488840&amp;x-signature=7316XjMXvFoj2HFpvI5fx5Tv08I%3D" alt="" loading="lazy"/></p>
<p>Publisherï¼šPublisher æ˜¯å‡½æ•°å¼æ¥å£ï¼Œè´Ÿè´£å‘å¸ƒæ•°æ®çš„ã€‚ Publisher å†…éƒ¨æœ‰ä¸€ä¸ªæ–¹æ³• subscribe æ–¹æ³•ï¼Œå»å’Œå…·ä½“çš„è®¢é˜…è€…ç»‘å®šå…³ç³»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4bd5da1cce0a48768a6c10bd3325c266~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yemaj-aDs-W9lQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767488840&amp;x-signature=0yFzU%2FEhU6cf%2FLDc%2FhYGO%2FgDKY8%3D" alt="" loading="lazy"/></p>
<p>Subscriberï¼šSubscriber æ˜¯è®¢é˜…è€…ï¼Œè´Ÿè´£è®¢é˜…ï¼Œæ¶ˆè´¹æ•°æ®ã€‚å››ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li>onSubscribeï¼šè®¢é˜…æˆåŠŸåè§¦å‘ï¼Œå¹¶ä¸”è¡¨æ˜å¯ä»¥å¼€å§‹æ¥æ”¶å‘å¸ƒè€…çš„æ•°æ®å…ƒç´ äº†ã€‚</li>
<li>onNextï¼šæ¯æ¬¡è·å–åˆ°å‘å¸ƒè€…çš„æ•°æ®å…ƒç´ éƒ½ä¼šæ‰§è¡Œ onNextã€‚</li>
<li>onErrorï¼šæ¥æ”¶æ•°æ®å…ƒç´ æ—¶ï¼Œå‡ºç°å¼‚å¸¸ç­‰é—®é¢˜æ—¶ï¼Œèµ° onErrorã€‚</li>
<li>onCompleteï¼šå½“æŒ‡å®šæ¥æ”¶çš„å…ƒç´ ä¸ªæ•°æå®šåï¼Œè§¦å‘ onCompleteã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b00cfd018c9e4d6d9eab9109a953eac6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yemaj-aDs-W9lQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767488840&amp;x-signature=KN1vhpT34Ny2FvK3c39OX73WOuI%3D" alt="" loading="lazy"/></p>
<p>Subscriptionï¼šå‘å¸ƒè€…å’Œè®¢é˜…è€…æ˜¯åŸºäº Subscription å…³è”çš„ã€‚å½“å»ºç«‹äº†è®¢é˜…çš„å…³ç³»åï¼Œå‘å¸ƒè€…ä¼šå°† Subscription ä¼ é€’ç»™è®¢é˜…è€…ã€‚è®¢é˜…è€…æŒ‡å®šè·å–å…ƒç´ çš„æ•°é‡å’Œå–æ¶ˆè®¢é˜…æ“ä½œï¼Œéƒ½è¦åŸºäº Subscription å»æ“ä½œã€‚æä¾›äº†ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li>requestï¼šè®¢é˜…è€…è¦è·å–çš„å…ƒç´ ä¸ªæ•°ã€‚</li>
<li>cancelï¼šå–æ¶ˆè®¢é˜…ï¼Œå½“å‰çš„è®¢é˜…è€…ä¸æ¥æ”¶å½“å‰å‘å¸ƒè€…çš„å…ƒç´ ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c68ad044b9374c3eab14b2f3b49f13c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yemaj-aDs-W9lQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767488840&amp;x-signature=Jpp0h1Y6ZxFtnBsdj86KdC4YnpI%3D" alt="" loading="lazy"/></p>
<p>Processorï¼šProcessor ç»§æ‰¿äº† Publisher å’Œ Subscriberï¼Œå³æ˜¯å‘å¸ƒè€…ä¹Ÿæ˜¯è®¢é˜…è€…ã€‚Processor ä¸€èˆ¬ä½œä¸ºæ•°æ®çš„ä¸­è½¬ï¼Œè®¢é˜…è€…å¤„ç†å®Œæ•°æ®å…ƒç´ ï¼Œå¯ä»¥å†æ¬¡å‘ç»™ä¸‹ä¸€ä¸ªè®¢é˜…è€…ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a42047a535c9423995491f68ce606ee3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yemaj-aDs-W9lQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767488840&amp;x-signature=xtE0ChJLm8qslq46IFzHStHC4YA%3D" alt="" loading="lazy"/></p>
<p>è¿™å››ä¸ªæ¥å£å¾ˆé‡è¦ï¼Œæ˜¯ Reactive Streams çš„è§„èŒƒï¼Œä½†æ˜¯å¯ä»¥æ˜æ˜¾çš„çœ‹åˆ°ï¼Œå†…éƒ¨æ²¡æœ‰å…·ä½“çš„å†…å®¹å®ç°ã€‚</p>
<p>è¿™é‡Œå°±ç±»ä¼¼ JDBC è¿™ç§è§„èŒƒï¼Œè§„èŒƒåœ¨ JDK9 ä¸­æå‡ºæ¥äº†ï¼Œæƒ³å®ç°ï¼Œå¯ä»¥åŸºäºå½“å‰çš„è¿™å››ä¸ªæ¥å£å†åšå…·ä½“çš„é€»è¾‘å¤„ç†ä»¥åŠå®ç°çš„ç»†èŠ‚ã€‚</p>
<h2 data-id="heading-3">Java å±‚é¢ Reactive Steams åŸºæœ¬æ“ä½œ</h2>
<p>å’±ä»¬æµ‹è¯• Java ä¸­çš„ Flow é‡Œæä¾›çš„ API æ—¶ï¼Œå°±æ˜¯èµ°æœ€åŸºæœ¬çš„æ“ä½œã€‚</p>
<p>å…¶ä¸­ Processor ä¸éœ€è¦é‡å†™ï¼Œç©æœ€åŸºæœ¬çš„æ“ä½œï¼Œä¸å»åšè®¢é˜…è€…å’Œå‘å¸ƒè€…çš„è½¬æ¢ã€‚</p>
<p>å…¶æ¬¡ Subscription ä¹Ÿä¸éœ€è¦é‡å†™ï¼Œè¿™ä¸œè¥¿å°±æ˜¯æä¾›äº†è®¢é˜…è€…æŒ‡å®šè®¢é˜…çš„æ¶ˆæ¯ä¸ªæ•°ï¼Œä»¥åŠå–æ¶ˆçš„æ“ä½œã€‚</p>
<p>ç„¶å Publisher éœ€è¦é‡å†™ï¼Œä½†æ˜¯ JDK ä¸­å·²ç»æä¾›äº†ä¸€ä¸ª Publisher çš„å®ç°ï¼ŒSubmissionPublisherï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p>
<p>æœ€åï¼ŒSubscriber éœ€è¦å’±ä»¬è‡ªå·±é‡å†™ï¼ŒæŒ‡å®šå¥½è®¢é˜…æ¶ˆæ¯çš„ä¸ªæ•°ï¼Œå·²ç»æ¶ˆè´¹çš„ä¸€äº›é€»è¾‘</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.concurrent.Flow;


<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MySubscriber</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Flow</span>.Subscriber&lt;Integer&gt; {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-comment">// ç»‘å®šå¥½è®¢é˜…å…³ç³»åï¼Œå°±ä¼šè§¦å‘è¿™ä¸ªæ–¹æ³•</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSubscribe</span><span class="hljs-params">(Flow.Subscription subscription)</span> {
        subscription.request(<span class="hljs-number">10</span>);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onNext</span><span class="hljs-params">(Integer item)</span> {
        System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š"</span> + item);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Throwable throwable)</span> {
        System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"ï¼šæ¥æ”¶æ¶ˆæ¯å‡ºç°å¼‚å¸¸ï¼š"</span> + throwable.getMessage());
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onComplete</span><span class="hljs-params">()</span> {
        System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"ï¼šå½“å‰è®¢é˜…è€…è¦æ±‚æ¥æ”¶çš„æ¶ˆæ¯å…¨éƒ¨å¤„ç†å®Œæ¯•ã€‚"</span>);
    }
}
</code></pre>
<p>ç›´æ¥ä½¿ç”¨ SubmissionPublisher æµ‹è¯•æ•´ä½“æ•ˆæœ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
    <span class="hljs-comment">// åªæœ‰ä¸€ä¸ªå·¥ä½œçº¿ç¨‹çš„çº¿ç¨‹æ± </span>
    <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">1</span>);
    <span class="hljs-comment">// æŒ‡å®šç¼“å†²åŒºçš„å¤§å°</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">maxBufferCapacity</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span>;

    <span class="hljs-comment">// éœ€è¦æŒ‡å®šä¸¤ä¸ªå‚æ•°</span>
    <span class="hljs-comment">// ç¬¬ä¸€ä¸ªå‚æ•°éœ€è¦ä¼ é€’ä¸€ä¸ªçº¿ç¨‹æ± ï¼ŒæŒ‡å®šè®¢é˜…è€…ä½¿ç”¨çš„çº¿ç¨‹</span>
    <span class="hljs-comment">// ç¬¬äºŒä¸ªå‚æ•°ï¼Œéœ€è¦æŒ‡å®šä¸€ä¸ªç¼“å†²åŒºï¼Œå‘å¸ƒè€…å‘å¸ƒæ¶ˆæ¯åï¼Œæ¶ˆæ¯ä¼šæ‰”åˆ°ç¼“å†²åŒºé‡Œã€‚</span>
    SubmissionPublisher&lt;Integer&gt; publisher = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SubmissionPublisher</span>&lt;&gt;(executor,maxBufferCapacity);

    <span class="hljs-comment">// ç»‘å®šè®¢é˜…è€…</span>
    <span class="hljs-type">MySubscriber</span> <span class="hljs-variable">subscriber</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MySubscriber</span>();
    publisher.subscribe(subscriber);

    <span class="hljs-comment">// å‘å¸ƒæ¶ˆæ¯</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
        System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š"</span> + i);
        publisher.submit(i);
    }

    <span class="hljs-comment">// é‡Šæ”¾èµ„æº</span>
    publisher.close();
    executor.shutdown();
}
</code></pre>
<p>ç»“æœè¾“å‡ºå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">0</span>
<span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">1</span>
<span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">2</span>
<span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">3</span>
<span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">4</span>
<span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">5</span>
<span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">6</span>
<span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">7</span>
<span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">8</span>
<span class="hljs-selector-tag">main</span>ï¼šå‘å¸ƒæ¶ˆæ¯ï¼š<span class="hljs-number">9</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">0</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">1</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">2</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">3</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">4</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">5</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">6</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">7</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">8</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šæ¥æ”¶åˆ°æ•°æ®æµï¼š<span class="hljs-number">9</span>
pool-<span class="hljs-number">1</span>-thread-<span class="hljs-number">1</span>ï¼šå½“å‰è®¢é˜…è€…è¦æ±‚æ¥æ”¶çš„æ¶ˆæ¯å…¨éƒ¨å¤„ç†å®Œæ¯•ã€‚
</code></pre>
<ul>
<li><strong>ç¼“å†²åŒºï¼š</strong> ç¼“å†²åŒºå°±æ˜¯å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¹‹é—´çš„ä¸€å—å†…å­˜ï¼Œç±»ä¼¼çº¿ç¨‹æ± ä¸­çš„é˜»å¡é˜Ÿåˆ—ï¼Œå¯ä»¥å°†æ¶ˆæ¯æ‰”åˆ°è¿™ä¸ªç¼“å­˜åŒºé‡Œã€‚å…¶æ¬¡å’±ä»¬è®¾ç½®çš„ç¼“å†²åŒºå¤§å°æ˜¯ 5ï¼Œä½†æ˜¯å‘ç° get å‡ºæ¥çš„æ—¶å€™ï¼Œ5 è¢«æ›¿æ¢ä¸ºäº† 8ã€‚è¿™æ˜¯å› ä¸º SubmissionPublisher ä¸ºäº†æ›´æœ‰æ•ˆçš„ä½¿ç”¨å†…å­˜ï¼Œé»˜è®¤ä¼šåŸºäº roundCapacity æ–¹æ³•å°†ä¼ é€’çš„ç¼“å†²åŒºå¤§å°æ›¿æ¢ä¸º 2 çš„ n æ¬¡å¹‚ã€‚</li>
<li><strong>èƒŒå‹æ•ˆæœï¼š</strong> å½“è®¢é˜…è€…æŒ‡å®šçš„æ¶ˆæ¯å·²ç»å…¨éƒ¨å¤„ç†å®Œæ¯•åï¼Œå‘å¸ƒè€…æœ€å¤šåªèƒ½å‘å¸ƒç¼“å†²åŒºå¤§å°ä¸ªæ•°çš„æ¶ˆæ¯ï¼Œå‰©ä¸‹çš„å†…å®¹ä¼šåŸºäºèƒŒå‹çš„æ•ˆæœç›´æ¥æš‚æ—¶ä¸å‘é€ã€‚</li>
<li><strong>onCompleteï¼š</strong> éœ€è¦å‘å¸ƒè€…åšäº†close æ“ä½œï¼Œç¡®è®¤äº†å‘å¸ƒè€…å·²ç»å°†æ¶ˆæ¯å…¨éƒ¨å‘é€ï¼Œå¹¶ä¸”è®¢é˜…è€…ä¹Ÿå·²ç»å°†å…¨éƒ¨çš„æ¶ˆæ¯å¤„ç†å®Œæ¯•åï¼Œæ‰ä¼šè§¦å‘ onCompleteã€‚</li>
<li><strong>Subscriptionï¼š</strong> è®¢é˜…è€…å¯ä»¥åœ¨ onNext æˆ–è€…å…¶ä»–æ–¹æ³•ä¸­åŠ¨æ€çš„ä½¿ç”¨ subscription å»æŒ‡å®šåç»­éœ€è¦å‡ ä¸ªæ¶ˆæ¯è®¢é˜…ï¼Œä»¥åŠæ˜¯å¦éœ€è¦å–æ¶ˆè®¢é˜…æ¶ˆæ¯ç­‰æ“ä½œã€‚</li>
</ul>
<h2 data-id="heading-4">Reactive Steams è½åœ°ä½“éªŒ</h2>
<h3 data-id="heading-5">å›è°ƒåœ°ç‹±é—®é¢˜</h3>
<p>å‰é¢çš„æ–¹å¼å¤§è‡´äº†è§£äº† JDK9 ä¸­æ›´æ–°çš„ Reactive Streams çš„è§„èŒƒï¼Œå’±ä»¬å®ç°ä¹Ÿä»…ä»…æ˜¯çœ‹åˆ°äº†å‘å¸ƒè®¢é˜…å’Œå›å‹çš„æ•ˆæœã€‚å¹¶æ²¡æœ‰çœ‹åˆ°å¦‚ä½•è§£å†³å›è°ƒåœ°ç‹±çš„é—®é¢˜ã€‚å’±ä»¬å¯ä»¥é€šè¿‡ Spring5 å®˜ç½‘æä¾›çš„ä¸€ä¸ªä¾‹å­ï¼Œæ¥ä½“éªŒä¸€ä¸‹ CallBack Hell å›è°ƒåœ°ç‹±å¸¦æ¥çš„é—®é¢˜ã€‚åé¢å†æ ¹æ®ä¸‰æ–¹çš„å®ç°æ¥çœ‹ä¸€ä¸‹åŸºäº Reactive Streams å®ç°åæ•ˆæœå¦‚ä½•ã€‚è¿™é‡ŒåŸºæœ¬æ˜¯æ ¹æ®ä¼ªä»£ç èµ°çš„ã€‚</p>
<p>ä¾‹å­ï¼šåœ¨ç”¨æˆ·çš„ UI é¡µé¢ä¸Šï¼Œå±•ç¤ºå½“å‰ç”¨æˆ·æœ€å–œæ¬¢çš„ Top5 çš„å•†å“è¯¦æƒ…ã€‚è¿™é‡Œä¼šæ ¹æ®ç”¨æˆ·çš„ ID å»æŸ¥è¯¢å½“å‰ç”¨æˆ· Top5 å•†å“çš„IDï¼Œå¦‚æœ ID å¯ä»¥æŸ¥è¯¢åˆ°ä¹‹åå†æ ¹æ®å•†å“çš„ ID å»æŸ¥è¯¢å•†å“çš„è¯¦æƒ…ã€‚å¦‚æœå½“å‰ç”¨æˆ· ID æŸ¥è¯¢çš„ç»“æœä¸å­˜åœ¨å–œæ¬¢çš„ Top å•†å“ï¼Œæ²¡æœ‰çš„è¯ï¼Œé€šè¿‡æ¨èæœåŠ¡æŸ¥è¯¢ Top5 çš„å•†å“ä¿¡æ¯ã€‚å±•ç¤ºç»™ç”¨æˆ·ã€‚</p>
<p>å½“å‰ä¾‹å­éœ€è¦ä¸‰ä¸ªæœåŠ¡çš„æ”¯æ’‘ï¼š</p>
<ul>
<li>æ ¹æ®ç”¨æˆ· ID æŸ¥è¯¢ç”¨æˆ·çš„ Top5 å•†å“IDã€‚</li>
<li>æ ¹æ® Top5 å•†å“IDæŸ¥è¯¢å•†å“è¯¦æƒ…ã€‚</li>
<li>è°ƒç”¨æ¨èæœåŠ¡ï¼Œè·å–5ä¸ªå•†å“è¯¦æƒ…ã€‚</li>
</ul>
<p>åŸºäº Java æœ€åŸç”Ÿçš„å¼‚æ­¥ç¼–ç¨‹æ–¹å¼ï¼Œå®ç°ä¸Šè¿°æ“ä½œï¼Œæ¥çœ‹çœ‹åˆ°åº•ä»€ä¹ˆæ˜¯å›è°ƒåœ°ç‹±ã€‚ã€‚ã€‚</p>
<p>å•†å“è¯¦æƒ…å®ä½“ç±»ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Fav</span> {

    <span class="hljs-keyword">private</span> String itemId;

    <span class="hljs-keyword">private</span> String itemName;

    <span class="hljs-keyword">private</span> String itemDetail;

}
</code></pre>
<p>å‡†å¤‡å›è°ƒæ–¹æ³•ï¼Œæ‹¿åˆ°ç»“æœåè§¦å‘</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Callback</span>&lt;T&gt; {

    <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">(T t)</span>;

    <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Throwable throwable)</span>;

}
</code></pre>
<p>å‡†å¤‡äº†è®¿é—®ä¸‰ä¸ªæœåŠ¡çš„ Service æ¥å£</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserService</span> {

    <span class="hljs-comment">/**
     * æ ¹æ®ç”¨æˆ·IdæŸ¥è¯¢ç”¨æˆ·çš„Top5å•†å“Id
     * <span class="hljs-doctag">@param</span> userId
     * <span class="hljs-doctag">@param</span> list
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">getFav</span><span class="hljs-params">(String userId, Callback&lt;List&lt;String&gt;&gt; list)</span>;

}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ItemService</span> {
    
    <span class="hljs-comment">/**
     * æ ¹æ®å•†å“IdæŸ¥è¯¢å•†å“çš„è¯¦æƒ…
     *
     * <span class="hljs-doctag">@param</span> itemId
     * <span class="hljs-doctag">@param</span> callback
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">getDetail</span><span class="hljs-params">(String itemId, Callback&lt;Fav&gt; callback)</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">SuggestionService</span> {

    <span class="hljs-comment">/**
     * è°ƒç”¨æ¨èæœåŠ¡ï¼Œè·å–æ¨èå•†å“
     * <span class="hljs-doctag">@param</span> favs
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">getSuggestion</span><span class="hljs-params">(Callback&lt;List&lt;Fav&gt;&gt; favs)</span>;
}
</code></pre>
<p>å‡†å¤‡äº†å“åº”æ•°æ®çš„ UI çº¿ç¨‹å·¥å…·ä»¥åŠå“åº”æ–¹æ³•</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UiUtils</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">submitOnUiThread</span><span class="hljs-params">(Runnable runnable)</span>{
        <span class="hljs-comment">// çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹åšå“åº”çš„æ“ä½œâ€¦â€¦â€¦â€¦â€¦â€¦</span>
    }


    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">(Object obj)</span>{
        <span class="hljs-comment">// åˆ©ç”¨UIçº¿ç¨‹å±•ç¤ºå…·ä½“æ•°æ®</span>
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">error</span><span class="hljs-params">(Object obj)</span>{
        <span class="hljs-comment">// å‡ºç°é”™è¯¯å“åº”çš„å†…å®¹</span>
    }

}
</code></pre>
<p>å®Œæˆäº† Controller ä¸­çš„å¼‚æ­¥ç¼–ç¨‹æ•ˆæœ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CallBackHellController</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserService userService;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ItemService itemService;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> SuggestionService suggestionService;


    <span class="hljs-meta">@GetMapping("/callbackhell")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">callbackHell</span><span class="hljs-params">(String userId)</span>{
        <span class="hljs-comment">//1ã€è°ƒç”¨ç”¨æˆ·æœåŠ¡ï¼ŒæŸ¥è¯¢Top5å•†å“Id</span>
        userService.getFav(userId, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Callback</span>&lt;List&lt;String&gt;&gt;() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">(List&lt;String&gt; list)</span> {
                <span class="hljs-comment">// å·²ç»æŸ¥è¯¢åˆ°å•†å“Idï¼Œä½†æ˜¯ä¸çŸ¥é“æ˜¯å¦æœ‰å€¼</span>
                <span class="hljs-keyword">if</span> (list.isEmpty()){
                    <span class="hljs-comment">// 3ã€ç”¨æˆ·æ²¡æœ‰Top5å•†å“Idï¼Œé€šè¿‡æ¨èæœåŠ¡æŸ¥è¯¢æ¨èå•†å“è¯¦æƒ…</span>
                    suggestionService.getSuggestion(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Callback</span>&lt;List&lt;Fav&gt;&gt;(){
                        <span class="hljs-meta">@Override</span>
                        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">(List&lt;Fav&gt; favs)</span> {
                            <span class="hljs-comment">// æ¨èæœåŠ¡æŸ¥è¯¢åˆ°äº†å•†å“è¯¦æƒ…ï¼Œå“åº”å³å¯</span>
                            UiUtils.submitOnUiThread(() -&gt; {
                                favs.stream().limit(<span class="hljs-number">5</span>).forEach(UiUtils::show);
                            });
                        }
                        <span class="hljs-meta">@Override</span>
                        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Throwable throwable)</span> {
                            UiUtils.error(throwable);
                        }
                    });

                }
                <span class="hljs-keyword">else</span>{
                    <span class="hljs-comment">// 2ã€é€šè¿‡ç”¨æˆ·æŸ¥è¯¢åˆ°äº†Top5å•†å“Idï¼Œé€šè¿‡å•†å“IdæŸ¥è¯¢å•†å“è¯¦æƒ…</span>
                    list.stream().limit(<span class="hljs-number">5</span>).forEach(itemId -&gt; itemService.getDetail(itemId,<span class="hljs-keyword">new</span> <span class="hljs-title class_">Callback</span>&lt;Fav&gt;(){

                        <span class="hljs-meta">@Override</span>
                        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">(Fav fav)</span> {
                            <span class="hljs-comment">// æŸ¥è¯¢åˆ°äº†å•†å“è¯¦æƒ…ï¼Œåˆ©ç”¨UIçº¿ç¨‹ï¼Œç»™å®¢æˆ·ç«¯å“åº”æ•°æ®</span>
                            UiUtils.submitOnUiThread(() -&gt; UiUtils.show(fav));
                        }

                        <span class="hljs-meta">@Override</span>
                        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Throwable throwable)</span> {
                            <span class="hljs-comment">// å‡ºç°å¼‚å¸¸äº†ã€‚</span>
                            UiUtils.error(throwable);
                        }
                    }));
                }
            }
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Throwable throwable)</span> {
                <span class="hljs-comment">// å‡ºç°å¼‚å¸¸äº†ã€‚</span>
                UiUtils.error(throwable);
            }
        });


    }

}
</code></pre>
<h3 data-id="heading-6">è§£å†³å›è°ƒåœ°ç‹±é—®é¢˜</h3>
<p>è¿™é‡Œä¸ºäº†è§£å†³å›è°ƒåœ°ç‹±é—®é¢˜ï¼Œéœ€è¦ä¸€ä¸ª Reactor çš„ä¾èµ–æ¥å¸®åŠ©å’±ä»¬å®ç°å¼‚æ­¥ç¼–ç¨‹ã€‚</p>
<p>éœ€è¦å¯¼å…¥ä¾èµ–</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!--reactorçš„æ ¸å¿ƒä¾èµ–--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.projectreactor<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>reactor-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.7.7<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>ä¸èƒ½å†ä½¿ç”¨ä¹‹å‰çš„ Callback æ–¹å¼äº†ã€‚éœ€è¦ä½¿ç”¨ reactor æä¾›çš„ Fluxï¼Œå¹¶ä¸”è¿™ç§é“¾å¼æ“ä½œä¼šæ›´ç›´è§‚ï¼Œä¹Ÿæ›´å¥½ç»´æŠ¤ã€‚å°±åªéœ€è¦ä¿®æ”¹ä¸‰ä¸ªæœåŠ¡å¯¹åº”çš„ Serviceã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserService</span> {

    <span class="hljs-comment">/**
     * æ ¹æ®ç”¨æˆ·IDæŸ¥è¯¢Top5å•†å“ID
     * <span class="hljs-doctag">@param</span> userId
     * <span class="hljs-doctag">@return</span>
     */</span>
    Flux&lt;List&lt;String&gt;&gt; <span class="hljs-title function_">getFav</span><span class="hljs-params">(String userId)</span>;

}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ItemService</span> {


    <span class="hljs-comment">/**
     * æ ¹æ®å•†å“IDæŸ¥è¯¢å•†å“è¯¦æƒ…
     * <span class="hljs-doctag">@param</span> itemId
     * <span class="hljs-doctag">@return</span>
     */</span>
    Flux&lt;Fav&gt; <span class="hljs-title function_">getDetail</span><span class="hljs-params">(String itemId)</span>;

}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">SuggestionService</span> {

    <span class="hljs-comment">/**
     * è·å–æ¨èçš„å•†å“è¯¦æƒ…
     * <span class="hljs-doctag">@return</span>
     */</span>
    Flux&lt;List&lt;Fav&gt;&gt; <span class="hljs-title function_">getSuggestion</span><span class="hljs-params">()</span>;

}
</code></pre>
<p>ç„¶åå°±å¯ä»¥åˆ©ç”¨ Flux æä¾›çš„ API æ¥è§£å†³ä¹‹å‰å›è°ƒåœ°ç‹±çš„é—®é¢˜ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReactorCallbackController</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserService userService;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ItemService itemService;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> SuggestionService suggestionService;


    <span class="hljs-meta">@GetMapping("reactorcallback")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">reactorCallback</span><span class="hljs-params">(String userId)</span>{
        userService
                .getFav(userId)   <span class="hljs-comment">// æ ¹æ®ç”¨æˆ·IdæŸ¥è¯¢Top5å•†å“Id</span>
                .flatMap(itemService::getDetail)  <span class="hljs-comment">// æ ¹æ®å•†å“IDæŸ¥è¯¢å•†å“è¯¦æƒ…</span>
                .switchIfEmpty(suggestionService.getSuggestion())  <span class="hljs-comment">// å¦‚æœå‰é¢ä¸ºnullï¼Œè¿™é‡Œé€šè¿‡æ¨èæœåŠ¡æŸ¥è¯¢å•†å“è¯¦æƒ…</span>
                .take(<span class="hljs-number">5</span>)    <span class="hljs-comment">// è·å–å‰5ä¸ªæ•°æ®</span>
                .publishOn(UiUtils.reactorOnUiThread())    <span class="hljs-comment">// ä½¿ç”¨Uiçº¿ç¨‹</span>
                .subscribe(UiUtils::show,UiUtils::error);   <span class="hljs-comment">// æˆåŠŸèµ°showï¼Œå¤±è´¥èµ°error</span>
    }

}
</code></pre>
<h3 data-id="heading-7">CompletableFuture çš„å¼‚æ­¥ç¼–ç¨‹</h3>
<p>Future çš„å½¢å¼ç›¸æ¯” Callback Hell æ•ˆæœè¦å¥½ä¸€äº›ï¼Œè™½ç„¶ JDK8 å’Œ 9 éƒ½å¯¹ CompletableFuture åšäº†å„ç§ä¼˜åŒ–ï¼Œä½†æ˜¯ä»–çš„è¡¨ç°è¿˜æ˜¯ä¸å¤ªå¥½ã€‚å¤šä¸ªFutureåœ¨åµŒå¥—æ—¶ï¼Œå¯è¯»æ€§è¿˜æ˜¯æ¯”è¾ƒå·®çš„ã€‚å¹¶ä¸” CompletableFuture ä¸å­˜åœ¨ä»€ä¹ˆå›å‹ï¼Œæˆ–è€…æ˜¯å»¶è¿Ÿè°ƒç”¨çš„åŠŸèƒ½ã€‚</p>
<p>ç°åœ¨å€ŸåŠ© CompletableFuture æ¥å®ç°ä¸€ä¸ªåœºæ™¯ã€‚</p>
<ol>
<li>è·å–ä¸€ä¸ªç”¨æˆ·IDçš„åˆ—è¡¨ã€‚</li>
<li>é€šè¿‡ç”¨æˆ·IDåˆ†åˆ«è·å–ä»–çš„åå­—ä»¥åŠç»Ÿè®¡ä¿¡æ¯ã€‚ï¼ˆå¸Œæœ›è¿™ä¸¤ä¸ªæ“ä½œæ˜¯å¹¶è¡Œæ‰§è¡Œçš„ï¼‰</li>
<li>å½“ä¸¤ä¸ªä¿¡æ¯éƒ½è·å–åˆ°ä¹‹åï¼Œå°è£…æˆä¸€ä¸ªæ™®é€šå­—ç¬¦ä¸²å³å¯ã€‚</li>
<li>å“åº”æ•°æ®ï¼Œæœ€åæ‹¿åˆ°ç»“æœï¼ˆè¾“å‡ºä¸€ä¸‹ï¼‰ã€‚</li>
</ol>
<p>å®ç°ä»£ç </p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GetNameAndStatTestByCF</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// 1ã€è·å–ä¸€ç»„ç”¨æˆ·IDåˆ—è¡¨</span>
        CompletableFuture&lt;List&lt;String&gt;&gt; idList = getID();
        CompletableFuture&lt;List&lt;String&gt;&gt; dataCompletableFuture = idList.thenComposeAsync(ids -&gt; {
            Stream&lt;CompletableFuture&lt;String&gt;&gt; resultStream = ids.stream().map(id -&gt; {
                <span class="hljs-comment">// 2ã€å¹¶è¡ŒåŸºäºIDæŸ¥è¯¢åç§°ä¿¡æ¯</span>
                CompletableFuture&lt;String&gt; nameTask = getName();
                <span class="hljs-comment">// 2ã€å¹¶è¡ŒåŸºäºIDæŸ¥è¯¢ç»Ÿè®¡ä¿¡æ¯</span>
                CompletableFuture&lt;Integer&gt; statTask = getStat();
                <span class="hljs-comment">// è®©ä¸¤ä¸ªæŸ¥è¯¢åç§°ä¿¡æ¯å’ŒæŸ¥è¯¢ç»Ÿè®¡ä¿¡æ¯æ“ä½œå¹¶è¡Œæ‰§è¡Œ</span>
                <span class="hljs-keyword">return</span> nameTask.thenCombineAsync(statTask, (name, stat) -&gt; {
                    <span class="hljs-comment">// 3ã€æ‹¿åˆ°ä¿¡æ¯ç»„è£…</span>
                    <span class="hljs-keyword">return</span> <span class="hljs-string">"Nameï¼š"</span> + name + <span class="hljs-string">"ï¼ŒStatï¼š"</span> + stat;
                });
            });
            <span class="hljs-comment">// å°†resultStreamè½¬æ¢æˆä¸€ä¸ªæ•°ç»„</span>
            List&lt;CompletableFuture&lt;String&gt;&gt; resultList = resultStream.toList();
            <span class="hljs-comment">// å…¨éƒ¨çš„ä»»åŠ¡å°è£…èµ·æ¥</span>
            CompletableFuture&lt;Void&gt; allDone = CompletableFuture.allOf(resultList.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CompletableFuture</span>[]{}));
            <span class="hljs-comment">// æ‰§è¡Œå…¨éƒ¨ä»»åŠ¡</span>
            <span class="hljs-keyword">return</span> allDone.thenApplyAsync(v -&gt; resultList.stream()
                    .map(CompletableFuture::join)
                    .collect(Collectors.toList()));
        });

        <span class="hljs-comment">// 4ã€è·å–å…¨éƒ¨çš„ç»„ä»¶ä¿¡æ¯åå“åº”å®¢æˆ·ç«¯ï¼ˆè¾“å‡ºï¼‰</span>
        List&lt;String&gt; data = dataCompletableFuture.join();
        System.out.println(data);
    }

    <span class="hljs-comment">// æ¨¡æ‹ŸzzæœåŠ¡è·å–ç»Ÿè®¡ä¿¡æ¯</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> CompletableFuture&lt;Integer&gt; <span class="hljs-title function_">getStat</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; <span class="hljs-number">666</span>);
    }

    <span class="hljs-comment">// æ¨¡æ‹ŸyyæœåŠ¡è·å–åç§°ä¿¡æ¯</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> CompletableFuture&lt;String&gt; <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; <span class="hljs-string">"å¼ ä¸‰"</span>);
    }

    <span class="hljs-comment">// æ¨¡æ‹ŸxxæœåŠ¡ï¼Œè·å–ä¸€ç»„ç”¨æˆ·ID</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> CompletableFuture&lt;List&lt;String&gt;&gt; <span class="hljs-title function_">getID</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; {
            <span class="hljs-comment">// æ¨¡æ‹ŸæŸ¥è¯¢ä¸‰æ–¹æœåŠ¡</span>
            List&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
            list.add(<span class="hljs-string">"1"</span>);
            list.add(<span class="hljs-string">"2"</span>);
            list.add(<span class="hljs-string">"3"</span>);
            <span class="hljs-keyword">return</span> list;
        });
    }

}
</code></pre>
<h3 data-id="heading-8">è§£å†³ CompletableFuture çš„é—®é¢˜</h3>
<p>CompletableFuture å¯ä»¥å®ç°ä¸€äº›ç®€å•çš„å¼‚æ­¥ç¼–ç¨‹ï¼Œä½†æ˜¯å¯çœ‹æ€§å’Œç»´æŠ¤æ€§ä»¥ååæœŸçš„æ‰©å±•éƒ½éœ€è¦å¯¹æ•´ä½“ä»£ç åšæ¯”è¾ƒå¤§æˆæœ¬çš„ç»´æŠ¤ã€‚ä¾ç„¶é‡‡ç”¨ Reactor æ¥å®ç°ä¸€ä¸ªä¸€æ¨¡ä¸€æ ·çš„é€»è¾‘ï¼Œå†çœ‹ä»£ç æ•ˆæœã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GetNameAndStatByReactor</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// 1ã€è·å–ä¸€ç»„ç”¨æˆ·IDåˆ—è¡¨</span>
        Flux&lt;String&gt; idFlux = getId();

        Flux&lt;String&gt; result = idFlux.flatMap(id -&gt; {
            <span class="hljs-comment">// 2ã€å¹¶è¡ŒåŸºäºIDæŸ¥è¯¢åç§°ä¿¡æ¯</span>
            Flux&lt;String&gt; nameFlux = getName(id);
            <span class="hljs-comment">// 2ã€å¹¶è¡ŒåŸºäºIDæŸ¥è¯¢ç»Ÿè®¡ä¿¡æ¯</span>
            Flux&lt;Integer&gt; statFlux = getStat(id);
            <span class="hljs-comment">// ä¿©ä»»åŠ¡å¹¶è¡Œå¤„ç†å®Œæ¯•ï¼Œè§¦å‘3</span>
            <span class="hljs-keyword">return</span> nameFlux.zipWith(statFlux, (name, stat) -&gt; {
                <span class="hljs-comment">// 3ã€æ‹¿åˆ°ä¿¡æ¯ç»„è£…</span>
                <span class="hljs-keyword">return</span> <span class="hljs-string">"Nameï¼š"</span> + name + <span class="hljs-string">"ï¼ŒStatï¼š"</span> + stat;
            });
        });
        Mono&lt;List&lt;String&gt;&gt; listMono = result.collectList();
        List&lt;String&gt; info = listMono.block();
        <span class="hljs-comment">// 4ã€è·å–å…¨éƒ¨çš„ç»„ä»¶ä¿¡æ¯åå“åº”å®¢æˆ·ç«¯ï¼ˆè¾“å‡ºï¼‰</span>
        System.out.println(info);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Flux&lt;Integer&gt; <span class="hljs-title function_">getStat</span><span class="hljs-params">(String id)</span> {
        <span class="hljs-comment">// ä¼šæŸ¥è¯¢ä¸‰æ–¹æœåŠ¡ï¼Œç„¶åå°è£…ç»“æœ</span>
        <span class="hljs-keyword">return</span> Flux.just(<span class="hljs-number">888</span>);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Flux&lt;String&gt; <span class="hljs-title function_">getName</span><span class="hljs-params">(String id)</span> {
        <span class="hljs-comment">// ä¼šæŸ¥è¯¢ä¸‰æ–¹æœåŠ¡ï¼Œç„¶åå°è£…ç»“æœ</span>
        <span class="hljs-keyword">return</span> Flux.just(<span class="hljs-string">"å¼ ä¸‰"</span>);
    }


    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Flux&lt;String&gt; <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ä¼šæŸ¥è¯¢ä¸‰æ–¹æœåŠ¡ï¼Œç„¶åå°è£…ç»“æœ</span>
        <span class="hljs-keyword">return</span> Flux.just(<span class="hljs-string">"1"</span>,<span class="hljs-string">"2"</span>,<span class="hljs-string">"3"</span>);
    }
}
</code></pre>
<h2 data-id="heading-9">RxJava2 å®ç°å¼‚æ­¥ç¼–ç¨‹</h2>
<p>RxJava æ˜¯ä¸€ä¸ªå°æ¡†æ¶ï¼Œæˆ–è€…æ˜¯ä¾èµ–åº“ã€‚åœ¨ RxJava çš„1.xç‰ˆæœ¬ä¸­ï¼Œå®ƒå¹¶ä¸åŸºäº Reactive Streams å»å®ç°çš„ã€‚æ²¡æœ‰å…³ç³»ï¼Œå› ä¸º RxJava çš„ 2 ç‰ˆæœ¬ï¼Œå°±æ˜¯åŸºäºReactive Streams å®ç°çš„äº†ã€‚</p>
<p>ä½¿ç”¨ RxJava å·¨ç®€å•ï¼Œå› ä¸ºä½œè€…æƒ³å°† RxJava å°½é‡åšåˆ°è½»é‡çº§ï¼Œå°±ä¸€ä¸ªä¾èµ–ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!--RxJava2çš„ä¾èµ–--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.reactivex.rxjava2<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>rxjava<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2.21<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h3 data-id="heading-10">RxJava2 çš„å…¥é—¨æ“ä½œ</h3>
<p>è·å–ä¸€ä¸ª Person å¯¹è±¡çš„é›†åˆï¼Œå°† Person é›†åˆä¸­çš„æ‰€æœ‰å¹´é¾„å¤§äº10å²çš„ Person å¯¹è±¡ç­›é€‰å‡ºæ¥ï¼Œå¹¶è¾“å‡ºä»–çš„åå­—ã€‚</p>
<p>é‡‡ç”¨ RxJava æ¥å®ç°ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">//1ã€è·å–Personå¯¹è±¡é›†åˆ</span>
        List&lt;Person&gt; personList = getPersonList();

        <span class="hljs-comment">//2ã€å®Œæˆä¸Šé¢è¦æ±‚çš„æ“ä½œ</span>
        <span class="hljs-comment">//2.1ã€å°†personé›†åˆè½¬æ¢ä¸ºRxJavaçš„æµ</span>
        Flowable.fromArray(personList.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>[]{}))
                <span class="hljs-comment">//2.2 è¿‡æ»¤å¹´é¾„å¤§äº10å²çš„</span>
                .filter(person -&gt; person.getAge() &gt; <span class="hljs-number">10</span>)
                <span class="hljs-comment">//2.3 è·å–ç­›é€‰åçš„Personåç§°</span>
                .map(person -&gt; person.getName())
                <span class="hljs-comment">//2.4 è¾“å‡ºName</span>
                .subscribe(System.out::println);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> List&lt;Person&gt; <span class="hljs-title function_">getPersonList</span><span class="hljs-params">()</span> {
        List&lt;Person&gt; personList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        personList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"å¤§å¨ƒ"</span>,<span class="hljs-number">5</span>));
        personList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"äºŒå¨ƒ"</span>,<span class="hljs-number">7</span>));
        personList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"ä¸‰å¨ƒ"</span>,<span class="hljs-number">9</span>));
        personList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"å››å¨ƒ"</span>,<span class="hljs-number">11</span>));
        personList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"äº”å¨ƒ"</span>,<span class="hljs-number">13</span>));
        <span class="hljs-keyword">return</span> personList;
    }
}
</code></pre>
<h3 data-id="heading-11">RxJava2 çš„åŸºç¡€å¤„ç†æµç¨‹</h3>
<p>åœ¨ RxJava ä¸­æœ‰ä¸‰ä¸ªæ ¸å¿ƒçš„è§’è‰²</p>
<ul>
<li>è¢«è§‚å¯Ÿè€…ï¼ˆObservableï¼‰</li>
<li>è§‚å¯Ÿè€…ï¼ˆObserverï¼‰</li>
<li>è®¢é˜…ï¼ˆSubscribeï¼‰</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo2</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">//1ã€æ„å»ºObservable</span>
        Observable&lt;String&gt; observable = Observable.create(emitter -&gt; {
            emitter.onNext(<span class="hljs-string">"Hello"</span>);
            emitter.onNext(<span class="hljs-string">"World"</span>);
            emitter.onComplete();
        });

        <span class="hljs-comment">//2ã€æ„å»ºObserver</span>
        Observer&lt;String&gt; observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Observer</span>&lt;&gt;() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSubscribe</span><span class="hljs-params">(Disposable d)</span> {
                System.out.println(<span class="hljs-string">"å¼€å§‹è®¢é˜…"</span>);
            }

            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onNext</span><span class="hljs-params">(String s)</span> {
                System.out.println(<span class="hljs-string">"è§‚å¯Ÿè€…ï¼š"</span> + s);
            }

            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Throwable e)</span> {
                e.printStackTrace();
            }

            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onComplete</span><span class="hljs-params">()</span> {
                System.out.println(<span class="hljs-string">"è®¢é˜…ç»“æŸ"</span>);
            }
        };

        <span class="hljs-comment">//3ã€è®¢é˜…</span>
        observable.subscribe(observer);
    }

}
</code></pre>
<h3 data-id="heading-12">åˆ›å»ºæ“ä½œç¬¦</h3>
<h4 data-id="heading-13">create</h4>
<p>Observable.create() æ˜¯æ‰‹åŠ¨åˆ›å»º Observable çš„æ–¹æ³•ï¼Œå…è®¸å®Œå…¨æ§åˆ¶æ•°æ®çš„å‘å°„ã€å®Œæˆå’Œé”™è¯¯å¤„ç†ã€‚</p>
<pre><code class="hljs language-java" lang="java">Observable&lt;String&gt; observable = Observable.create(emitter -&gt; {
    emitter.onNext(<span class="hljs-string">"Hello"</span>);
    emitter.onNext(<span class="hljs-string">"World"</span>);
    emitter.onComplete();
});

observable.subscribe(
    item -&gt; System.out.println(<span class="hljs-string">"æ”¶åˆ°: "</span> + item),
    error -&gt; System.err.println(<span class="hljs-string">"é”™è¯¯: "</span> + error),
    () -&gt; System.out.println(<span class="hljs-string">"å®Œæˆ"</span>)
);

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// æ”¶åˆ°: Hello</span>
<span class="hljs-comment">// æ”¶åˆ°: World</span>
<span class="hljs-comment">// å®Œæˆ</span>
</code></pre>
<h4 data-id="heading-14">just</h4>
<p>just ç”¨äºåˆ›å»ºä¸€ä¸ªå‘å°„å›ºå®šæ•°æ®çš„ Observableï¼Œæ•°æ®æ˜¯é¢„å®šä¹‰çš„ï¼Œå‘å°„åç«‹å³å®Œæˆã€‚</p>
<pre><code class="hljs language-java" lang="java">Observable.just(<span class="hljs-string">"Hello"</span>)
    .subscribe(item -&gt; 
        System.out.println(<span class="hljs-string">"æ”¶åˆ°: "</span> + item)
    );

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// æ”¶åˆ°: Hello</span>
</code></pre>
<h4 data-id="heading-15">fromArray</h4>
<p>fromArray ç”¨äºä»æ•°ç»„åˆ›å»ºä¸€ä¸ª Observableï¼ŒæŒ‰æ•°ç»„é¡ºåºå‘å°„æ‰€æœ‰å…ƒç´ ã€‚</p>
<pre><code class="hljs language-java" lang="java">String[] fruits = {<span class="hljs-string">"Apple"</span>, <span class="hljs-string">"Banana"</span>, <span class="hljs-string">"Cherry"</span>, <span class="hljs-string">"Date"</span>};
Observable.fromArray(fruits)
    .subscribe(fruit -&gt; 
        System.out.print(fruit + <span class="hljs-string">" "</span>)
    );

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// Apple Banana Cherry Date</span>
</code></pre>
<h4 data-id="heading-16">fromCallable</h4>
<p>fromCallable ç”¨äºä» Callable åˆ›å»º Observableï¼ŒCallable çš„è¿”å›å€¼ä¼šè¢«åŒ…è£…æˆ Observable å‘å°„ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.fromCallable(() -&gt; <span class="hljs-string">"è®¡ç®—ç»“æœ: "</span> + System.currentTimeMillis())
                .subscribe(System.out::println);

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// è®¡ç®—ç»“æœ: 1620000000000</span>
    }
</code></pre>
<h4 data-id="heading-17">timer</h4>
<p>timer ç”¨äºåˆ›å»ºä¸€ä¸ªå»¶è¿ŸæŒ‡å®šæ—¶é—´åå‘å°„å•ä¸ªæ•°æ®çš„ Observableï¼Œé€šå¸¸æ˜¯ 0Lï¼Œç„¶åç»“æŸã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
        System.out.println(<span class="hljs-string">"å¼€å§‹æ—¶é—´: "</span> + System.currentTimeMillis());

        Observable.timer(<span class="hljs-number">2</span>, TimeUnit.SECONDS)
                .subscribe(tick -&gt;
                        System.out.println(<span class="hljs-string">"è§¦å‘æ—¶é—´: "</span> + System.currentTimeMillis() + <span class="hljs-string">"ï¼Œå€¼: "</span> + tick)
                );

        Thread.sleep(<span class="hljs-number">3000</span>);
    }
</code></pre>
<p>é»˜è®¤ä½¿ç”¨ <code>Schedulers.computation()</code>çº¿ç¨‹æ± è®¡ç®—ï¼Œçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼Œå¦‚æœä¸»çº¿ç¨‹ç»“æŸå®ˆæŠ¤çº¿ç¨‹ä¹Ÿä¼šéšä¹‹ç»ˆæ­¢ã€‚</p>
<h4 data-id="heading-18">interval</h4>
<p>interval() æ–¹æ³•ç”¨äºåˆ›å»ºä¸€ä¸ª å‘¨æœŸæ€§å®šæ—¶å‘å°„çš„ Observableï¼Œå®ƒä¼šæŒ‰ç…§æŒ‡å®šçš„æ—¶é—´é—´éš”æ— é™æœŸåœ°å‘å°„é€’å¢çš„æ•°å­—åºåˆ—ï¼ˆä»0å¼€å§‹ï¼‰ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException {
        Observable.interval(<span class="hljs-number">2</span>, TimeUnit.SECONDS)
                .subscribe(aLong -&gt; System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"ï¼š"</span> + aLong));

        System.in.read();
    }
</code></pre>
<h4 data-id="heading-19">intervalRange</h4>
<p>intervalRange() æ˜¯ interval() çš„å¢å¼ºç‰ˆæœ¬ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ªæœ‰é™æ¬¡æ•°çš„å‘¨æœŸæ€§å‘å°„çš„ Observableã€‚å®ƒå…è®¸ä½ æŒ‡å®šèµ·å§‹å€¼ã€å‘å°„æ¬¡æ•°ã€åˆå§‹å»¶è¿Ÿå’Œé—´éš”æ—¶é—´ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException {
        Observable.intervalRange(<span class="hljs-number">100</span>, <span class="hljs-number">4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, TimeUnit.SECONDS)
                .subscribe(aLong -&gt; System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"ï¼š"</span> + aLong));
        System.in.read();
    }
</code></pre>
<h4 data-id="heading-20">range &amp; rangeLong</h4>
<p>è¿™ä¸¤ä¸ªæ–¹æ³•ç”¨äºåˆ›å»ºä¸€ä¸ªå‘å°„è¿ç»­æ•´æ•°åºåˆ—çš„ Observableï¼š</p>
<ul>
<li><code>range(start, count)</code>ï¼šå‘å°„ Integer ç±»å‹çš„è¿ç»­æ•´æ•°ã€‚</li>
<li><code>rangeLong(start, count)</code>ï¼šå‘å°„ Long ç±»å‹çš„è¿ç»­æ•´æ•°ã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException {
        Observable.range(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>)
                .subscribe(integer -&gt; System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"ï¼š"</span> + integer));
        System.in.read();
    }
</code></pre>
<h4 data-id="heading-21">neverã€errorã€empty</h4>
<p>è¿™ä¸‰ä¸ªæ–¹æ³•éƒ½æ˜¯åˆ›å»ºç‰¹æ®Šçš„ Observable çš„å·¥å‚æ–¹æ³•ï¼Œç”¨äºç‰¹å®šçš„åœºæ™¯ã€‚</p>
<ul>
<li>neverï¼šåˆ›å»ºä¸€ä¸ªæ°¸è¿œä¸ä¼šå‘å°„ä»»ä½•æ•°æ®ï¼Œä¹Ÿä¸ä¼šç»ˆæ­¢çš„ Observableã€‚</li>
<li>errorï¼šåˆ›å»ºä¸€ä¸ªç«‹å³å‘å°„é”™è¯¯çš„ Observableã€‚</li>
<li>emptyï¼šåˆ›å»ºä¸€ä¸ªç«‹å³å®Œæˆä½†ä¸å‘å°„ä»»ä½•æ•°æ®çš„ Observableã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// Observable.never()</span>
        <span class="hljs-comment">// Observable.error(new RuntimeException("erroräº‹ä»¶"))</span>
        Observable.empty()
                .subscribe(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Observer</span>() {
                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSubscribe</span><span class="hljs-params">(Disposable d)</span> {
                        System.out.println(<span class="hljs-string">"å¼€å§‹è®¢é˜…"</span>);
                    }

                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onNext</span><span class="hljs-params">(Object s)</span> {
                        System.out.println(<span class="hljs-string">"è§‚å¯Ÿè€…ï¼š"</span> + s);
                    }

                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Throwable e)</span> {
                        System.out.println(<span class="hljs-string">"å‡ºç°å¼‚å¸¸ï¼š"</span> + e.getMessage());
                    }

                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onComplete</span><span class="hljs-params">()</span> {
                        System.out.println(<span class="hljs-string">"è®¢é˜…ç»“æŸ"</span>);
                    }
                });
    }
</code></pre>
<h3 data-id="heading-22">è½¬æ¢æ“ä½œç¬¦</h3>
<p>è½¬æ¢æ“ä½œç¬¦æ˜¯ RxJava ä¸­ç”¨äºå¯¹ Observable å‘å°„çš„æ•°æ®è¿›è¡Œå˜æ¢ã€å¤„ç†ã€ç»„åˆçš„æ“ä½œç¬¦ï¼Œç”¨äºå®ç°æ•°æ®æµçš„å„ç§è½¬æ¢é€»è¾‘ã€‚</p>
<h4 data-id="heading-23">map</h4>
<p>map() æ˜¯ RxJava ä¸­æœ€åŸºæœ¬ã€æœ€å¸¸ç”¨çš„è½¬æ¢æ“ä½œç¬¦ï¼Œç”¨äºå¯¹ Observable å‘å°„çš„æ¯ä¸ªå…ƒç´ è¿›è¡Œä¸€å¯¹ä¸€è½¬æ¢ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼šè¾“å…¥ä¸€ä¸ªå€¼ï¼Œè¾“å‡ºå¦ä¸€ä¸ªå€¼ï¼ˆ1è¿›1å‡ºï¼‰ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
                .map(number -&gt; <span class="hljs-string">"æ•°å­—: "</span> + number)
                .subscribe(text -&gt; System.out.println(text));
    }
</code></pre>
<h4 data-id="heading-24">flatMap</h4>
<p>flatMap() ç”¨äºå°†æ¯ä¸ªå‘å°„é¡¹è½¬æ¢ä¸º Observableï¼Œç„¶å"æ‰å¹³åŒ–"åˆå¹¶æˆä¸€ä¸ª Observableã€‚
ç®€å•æ¥è¯´ï¼šè¾“å…¥ä¸€ä¸ªå€¼ï¼Œå¯ä»¥è¾“å‡ºä»»æ„å¤šä¸ªå€¼ï¼ˆ1è¿›Nå‡ºï¼‰ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>)
                .map(letter -&gt; letter + <span class="hljs-string">"1"</span>)
                .subscribe(result -&gt; System.out.print(result + <span class="hljs-string">" "</span>));
        <span class="hljs-comment">// è¾“å‡º: A1 B1</span>

        <span class="hljs-comment">// flatMap: 1å¯¹å¤šè½¬æ¢</span>
        Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>)
                .flatMap(letter -&gt;
                        Observable.just(letter + <span class="hljs-string">"1"</span>, letter + <span class="hljs-string">"2"</span>, letter + <span class="hljs-string">"3"</span>)
                )
                .subscribe(result -&gt; System.out.print(result + <span class="hljs-string">" "</span>));
        <span class="hljs-comment">// è¾“å‡º: A1 A2 A3 B1 B2 B3</span>
    }
</code></pre>
<h4 data-id="heading-25">concatMap</h4>
<p>concatMap() æ˜¯ flatMap() çš„é¡ºåºä¿æŒç‰ˆæœ¬ï¼Œå®ƒä¼šä¸¥æ ¼æŒ‰ç…§åŸå§‹é¡ºåºä¾æ¬¡å¤„ç†æ¯ä¸ªå…ƒç´ ï¼Œåªæœ‰å‰ä¸€ä¸ªå…ƒç´ çš„ Observable å®Œæˆä¹‹åï¼Œæ‰ä¼šå¤„ç†ä¸‹ä¸€ä¸ªã€‚
ç®€å•æ¥è¯´ï¼šflatMapæ˜¯å¹¶å‘å¤„ç†ï¼ŒconcatMapæ˜¯ä¸²è¡Œå¤„ç†ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException {
        Observable.just(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>)  <span class="hljs-comment">// æ³¨æ„é¡ºåºï¼š3, 1, 2</span>
                .flatMap(num -&gt;
                        Observable.just(num)
                                .delay(num, TimeUnit.SECONDS)  <span class="hljs-comment">// å»¶è¿Ÿå¯¹åº”çš„ç§’æ•°</span>
                )
                .subscribe(num -&gt; System.out.println(<span class="hljs-string">"flatMap: "</span> + num));
        <span class="hljs-comment">// è¾“å‡ºé¡ºåºï¼š1 2 3ï¼ˆè°å…ˆå®Œæˆè°å…ˆè¾“å‡ºï¼‰</span>

        Observable.just(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>)
                .concatMap(num -&gt;
                        Observable.just(num)
                                .delay(num, TimeUnit.SECONDS)
                )
                .subscribe(num -&gt; System.out.println(<span class="hljs-string">"concatMap: "</span> + num));
        <span class="hljs-comment">// è¾“å‡ºé¡ºåºï¼š3 1 2ï¼ˆä¸¥æ ¼ä¿æŒåŸå§‹é¡ºåºï¼‰</span>
        System.in.read();
    }
</code></pre>
<h4 data-id="heading-26">buffer</h4>
<p>buffer() ç”¨äºå°† Observable å‘å°„çš„æ•°æ®é¡¹æ”¶é›†åˆ°é›†åˆä¸­ï¼Œç„¶åä¸€æ¬¡æ€§å‘å°„è¿™äº›é›†åˆï¼Œè€Œä¸æ˜¯å•ä¸ªå‘å°„ã€‚
ç®€å•æ¥è¯´ï¼šæŠŠå¤šä¸ªå•ç‹¬çš„æ•°æ®"æ‰“åŒ…"æˆä¸€æ‰¹ä¸€èµ·å‘å°„ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.range(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)  <span class="hljs-comment">// å‘å°„1-10</span>
                .buffer(<span class="hljs-number">3</span>)           <span class="hljs-comment">// æ¯3ä¸ªä¸€æ‰¹</span>
                .subscribe(batch -&gt;
                        System.out.println(<span class="hljs-string">"æ‰¹æ¬¡: "</span> + batch)
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æ‰¹æ¬¡: [1, 2, 3]</span>
        <span class="hljs-comment">// æ‰¹æ¬¡: [2, 4, 6]</span>
        <span class="hljs-comment">// æ‰¹æ¬¡: [7, 8, 9]</span>
        <span class="hljs-comment">// æ‰¹æ¬¡: [10]           â† æœ€åä¸€æ‰¹ä¸è¶³3ä¸ª</span>
    }
</code></pre>
<h4 data-id="heading-27">scan</h4>
<p>scan() ç”¨äºå¯¹ Observable å‘å°„çš„æ•°æ®è¿›è¡Œç´¯ç§¯è®¡ç®—ï¼Œå¹¶å‘å°„æ¯ä¸ªä¸­é—´ç»“æœã€‚
ç®€å•æ¥è¯´ï¼šåƒ Excel é‡Œçš„ç´¯è®¡æ±‚å’Œï¼Œæ¯æ¥ä¸€ä¸ªæ–°æ•°æ®ï¼Œå°±ä¸å‰ä¸€ä¸ªç»“æœè®¡ç®—ï¼Œå¹¶è¾“å‡ºå½“å‰ç´¯è®¡å€¼ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
                .scan(Integer::sum)
                .subscribe(result -&gt; System.out.print(result + <span class="hljs-string">" "</span>));

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// 1 3 6 10 15</span>

        <span class="hljs-comment">// è®¡ç®—è¿‡ç¨‹ï¼š</span>
        <span class="hljs-comment">// åˆå§‹ï¼šæ— ç§å­å€¼ï¼Œç¬¬ä¸€æ¬¡ç›´æ¥å‘å°„1</span>
        <span class="hljs-comment">// 1 + 2 = 3</span>
        <span class="hljs-comment">// 3 + 3 = 6</span>
        <span class="hljs-comment">// 6 + 4 = 10</span>
        <span class="hljs-comment">// 10 + 5 = 15</span>
    }
</code></pre>
<h4 data-id="heading-28">window</h4>
<p>window() ç”¨äºå°† Observable å‘å°„çš„æ•°æ®åˆ†ç»„åˆ°å¤šä¸ªå­ Observable ä¸­ï¼Œç„¶åå‘å°„è¿™äº›å­ Observable è€Œä¸æ˜¯å•ä¸ªæ•°æ®é¡¹ã€‚
ç®€å•æ¥è¯´ï¼šåˆ›å»ºå¤šä¸ª"çª—å£"ï¼Œæ¯ä¸ªçª—å£æ˜¯ä¸€ä¸ª Observableï¼Œå°†æ•°æ®åˆ†é…åˆ°ä¸åŒçª—å£ä¸­ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// buffer: ç›´æ¥å‘å°„List</span>
        Observable.range(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>)
                .buffer(<span class="hljs-number">2</span>)
                .subscribe(list -&gt;
                        System.out.println(<span class="hljs-string">"bufferè¾“å‡ºList: "</span> + list)
                );

        <span class="hljs-comment">// window: å‘å°„Observableï¼Œéœ€è¦è¿›ä¸€æ­¥å¤„ç†</span>
        Observable.range(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>)
                .window(<span class="hljs-number">2</span>)
                .flatMapSingle(Observable::toList  <span class="hljs-comment">// éœ€è¦æ‰‹åŠ¨è½¬æ¢</span>
                )
                .subscribe(list -&gt;
                        System.out.println(<span class="hljs-string">"windowè¾“å‡ºList: "</span> + list)
                );

        <span class="hljs-comment">// ä¸¤è€…è¾“å‡ºç›¸åŒï¼Œä½†windowæ›´çµæ´»ï¼š</span>
        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// [1, 2]</span>
        <span class="hljs-comment">// [3, 4]</span>
        <span class="hljs-comment">// [5]</span>
    }
</code></pre>
<p>window å’Œ buffer çš„åŒºåˆ«å°±æ˜¯ï¼š</p>
<ul>
<li>window è¿”å›çš„æ˜¯è¢«è§‚å¯Ÿè€…çš„é›†åˆã€‚</li>
<li>buffer è¿”å›çš„æ˜¯æ•°æ®çš„é›†åˆã€‚</li>
</ul>
<h3 data-id="heading-29">è¿‡æ»¤æ“ä½œç¬¦</h3>
<p>è¿‡æ»¤æ“ä½œç¬¦ç”¨äºä»æ•°æ®æµä¸­ç­›é€‰å‡ºéœ€è¦çš„æ•°æ®ï¼Œè¿‡æ»¤æ‰ä¸éœ€è¦çš„æ•°æ®ã€‚</p>
<h4 data-id="heading-30">filter</h4>
<p>filter() æ˜¯ RxJava ä¸­æœ€åŸºæœ¬çš„è¿‡æ»¤æ“ä½œç¬¦ï¼Œç”¨äºæ ¹æ®æŒ‡å®šæ¡ä»¶ç­›é€‰ Observable å‘å°„çš„æ•°æ®ï¼Œåªè®©æ»¡è¶³æ¡ä»¶çš„æ•°æ®é€šè¿‡ï¼Œä¸æ»¡è¶³æ¡ä»¶çš„è¢«è¿‡æ»¤æ‰ã€‚</p>
<p>å¯¹æ¯ä¸ªæ•°æ®é¡¹è¿›è¡Œåˆ¤æ–­ï¼Œè¿”å› trueåˆ™é€šè¿‡ï¼Œè¿”å› falseåˆ™ä¸¢å¼ƒã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.range(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)  <span class="hljs-comment">// å‘å°„1-10</span>
                .filter(number -&gt; number % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>)  <span class="hljs-comment">// åªä¿ç•™å¶æ•°</span>
                .subscribe(even -&gt; System.out.print(even + <span class="hljs-string">" "</span>));

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// 2 4 6 8 10</span>
    }
</code></pre>
<h4 data-id="heading-31">ofType</h4>
<p>ofType() æ˜¯ä¸€ä¸ªç±»å‹è¿‡æ»¤æ“ä½œç¬¦ï¼Œç”¨äºè¿‡æ»¤ Observable å‘å°„çš„æ•°æ®ï¼Œåªä¿ç•™æŒ‡å®šç±»å‹çš„æ•°æ®ï¼Œå…¶ä»–ç±»å‹çš„æ•°æ®ä¼šè¢«è¿‡æ»¤æ‰ã€‚
æ ¸å¿ƒæ€æƒ³ï¼šåªè®©æŒ‡å®šç±»å‹çš„æ•°æ®é€šè¿‡ï¼Œç›¸å½“äº filter(item -&gt; item instanceof TargetType) çš„ç®€åŒ–ç‰ˆã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable&lt;Object&gt; mixedObservable = Observable.just(
                <span class="hljs-string">"Hello"</span>,      <span class="hljs-comment">// String</span>
                <span class="hljs-number">123</span>,          <span class="hljs-comment">// Integer</span>
                <span class="hljs-number">45.6</span>,         <span class="hljs-comment">// Double</span>
                <span class="hljs-string">"World"</span>,      <span class="hljs-comment">// String</span>
                <span class="hljs-literal">true</span>,         <span class="hljs-comment">// Boolean</span>
                <span class="hljs-number">789</span>           <span class="hljs-comment">// Integer</span>
        );

        <span class="hljs-comment">// åªä¿ç•™å­—ç¬¦ä¸²ç±»å‹</span>
        mixedObservable
                .ofType(String.class)
                .subscribe(str -&gt;
                        System.out.println(<span class="hljs-string">"å­—ç¬¦ä¸²: "</span> + str)
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// å­—ç¬¦ä¸²: Hello</span>
        <span class="hljs-comment">// å­—ç¬¦ä¸²: World</span>
    }
</code></pre>
<h4 data-id="heading-32">distinct</h4>
<p>distinct() ç”¨äºè¿‡æ»¤ Observable ä¸­é‡å¤çš„æ•°æ®é¡¹ï¼Œç¡®ä¿æ¯ä¸ªæ•°æ®é¡¹åªå‘å°„ä¸€æ¬¡ã€‚
æ ¸å¿ƒæ€æƒ³ï¼šå»é‡ï¼Œä¿è¯å‘å°„çš„æ•°æ®åºåˆ—ä¸­ä¸åŒ…å«é‡å¤å…ƒç´ ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>)
                .distinct()
                .subscribe(num -&gt; System.out.print(num + <span class="hljs-string">" "</span>));

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// 1 2 3 4 5</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šæœ€åçš„ 1 ä¹Ÿè¢«å»é‡äº†</span>
    }
</code></pre>
<h4 data-id="heading-33">skip &amp; skipLast</h4>
<ul>
<li>skip(n)ï¼šè·³è¿‡ Observable å‘å°„çš„å‰ n ä¸ªæ•°æ®é¡¹ã€‚</li>
<li>skipLast(n)ï¼šè·³è¿‡ Observable å‘å°„çš„å n ä¸ªæ•°æ®é¡¹ã€‚</li>
</ul>
<p>æ ¸å¿ƒæ€æƒ³ï¼šskipæ˜¯"è·³è¿‡å¼€å¤´"ï¼ŒskipLastæ˜¯"è·³è¿‡ç»“å°¾"ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.create(emitter -&gt; {
                    emitter.onNext(<span class="hljs-number">1</span>);
                    emitter.onNext(<span class="hljs-number">2</span>);
                    emitter.onError(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ä¸­é—´å‡ºé”™"</span>));
                })
                .skipLast(<span class="hljs-number">1</span>) 
                .subscribe(
                        num -&gt; System.out.println(<span class="hljs-string">"æ•°æ®: "</span> + num),
                        error -&gt; System.err.println(<span class="hljs-string">"é”™è¯¯: "</span> + error.getMessage()),
                        () -&gt; System.out.println(<span class="hljs-string">"å®Œæˆ"</span>)
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æ•°æ®: 1</span>
        <span class="hljs-comment">// é”™è¯¯: ä¸­é—´å‡ºé”™</span>
    }
</code></pre>
<h4 data-id="heading-34">distinctUntilChanged</h4>
<p>distinctUntilChanged() ç”¨äºè¿‡æ»¤æ‰è¿ç»­é‡å¤çš„æ•°æ®ï¼Œåªä¿ç•™å‘ç”Ÿå˜åŒ–çš„æ•°æ®ã€‚
æ ¸å¿ƒæ€æƒ³ï¼šå»é‡ï¼Œä½†åªå»é‡è¿ç»­ç›¸åŒçš„å€¼ï¼Œä¸è¿ç»­å‡ºç°çš„ç›¸åŒå€¼ä¼šè¢«ä¿ç•™ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>)
                .distinctUntilChanged()
                .subscribe(num -&gt; System.out.print(num + <span class="hljs-string">" "</span>));

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// 1 2 1 3 2 1</span>

        <span class="hljs-comment">// è§£é‡Šï¼š</span>
        <span class="hljs-comment">// åŸå§‹: 1, 1, 2, 2, 1, 3, 3, 2, 2, 1</span>
        <span class="hljs-comment">// å»é‡è¿ç»­é‡å¤å: 1, 2, 1, 3, 2, 1</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šä¸­é—´çš„ 1 è™½ç„¶å‡ºç°è¿‡ï¼Œä½†å› ä¸ºä¸è¿ç»­ï¼Œæ‰€ä»¥ä¿ç•™äº†</span>
    }
</code></pre>
<h4 data-id="heading-35">take</h4>
<p>take() ç”¨äºä» Observable çš„å¼€å¤´å–å‡ºæŒ‡å®šæ•°é‡çš„æ•°æ®ï¼Œç„¶åå®Œæˆã€‚
æ ¸å¿ƒæ€æƒ³ï¼šåªå–å‰ N ä¸ªæ•°æ®ï¼Œä¹‹åçš„æ•°æ®å¿½ç•¥ï¼ŒObservable æå‰å®Œæˆã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.range(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)  <span class="hljs-comment">// å‘å°„1-10</span>
                .take(<span class="hljs-number">3</span>)             <span class="hljs-comment">// åªå–å‰3ä¸ª</span>
                .subscribe(
                        num -&gt; System.out.print(num + <span class="hljs-string">" "</span>),
                        error -&gt; {
                        },
                        () -&gt; System.out.println(<span class="hljs-string">"\nå·²å®Œæˆ"</span>)
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// 1 2 3</span>
        <span class="hljs-comment">// å·²å®Œæˆ</span>
        <span class="hljs-comment">// æ³¨æ„ï¼š4-10 ä¸ä¼šè¢«å‘å°„</span>
    }
</code></pre>
<h4 data-id="heading-36">firstElement &amp; lastElement &amp; elementAt</h4>
<p>è¿™ä¸‰ä¸ªæ“ä½œç¬¦éƒ½ç”¨äºä» Observable ä¸­å–å‡ºç‰¹å®šä½ç½®çš„å•ä¸ªå…ƒç´ ï¼š</p>
<ul>
<li><strong><code>firstElement()</code></strong>ï¼šå–ç¬¬ä¸€ä¸ªå…ƒç´ </li>
<li><strong><code>lastElement()</code></strong>ï¼šå–æœ€åä¸€ä¸ªå…ƒç´ </li>
<li><strong><code>elementAt(index)</code></strong>ï¼šå–æŒ‡å®šç´¢å¼•ä½ç½®çš„å…ƒç´ </li>
</ul>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.range(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>)  <span class="hljs-comment">// 1,2,3,4,5</span>
                .firstElement()      <span class="hljs-comment">// å–ç¬¬ä¸€ä¸ª</span>
                .subscribe(
                        num -&gt; System.out.println(<span class="hljs-string">"ç¬¬ä¸€ä¸ª: "</span> + num),
                        error -&gt; {
                        },
                        () -&gt; System.out.println(<span class="hljs-string">"æ²¡æœ‰ç¬¬ä¸€ä¸ªå…ƒç´ "</span>)
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// ç¬¬ä¸€ä¸ª: 1</span>
    }
</code></pre>
<h3 data-id="heading-37">ç»„åˆæ“ä½œç¬¦</h3>
<p>ç»„åˆæ“ä½œç¬¦æ˜¯ RxJava ä¸­ç”¨äºå°†å¤šä¸ª Observable ç»„åˆæˆä¸€ä¸ª Observable çš„æ“ä½œç¬¦ã€‚å®ƒä»¬å¤„ç†å¤šä¸ªæ•°æ®æµä¹‹é—´çš„å…³ç³»ï¼Œå®ç°æµçš„åˆå¹¶ã€è¿æ¥ã€ç»„åˆç­‰æ“ä½œã€‚</p>
<h4 data-id="heading-38">concat</h4>
<p>concat() ç”¨äºé¡ºåºè¿æ¥å¤šä¸ª Observableï¼Œå‰ä¸€ä¸ª Observable å®Œæˆåï¼Œæ‰å¼€å§‹å‘å°„ä¸‹ä¸€ä¸ª Observable çš„æ•°æ®ã€‚
æ ¸å¿ƒæ€æƒ³ï¼šä¸²è¡Œè¿æ¥ï¼Œä¿æŒé¡ºåºï¼Œåƒæ’é˜Ÿä¸€æ ·ä¸€ä¸ªæ¥ä¸€ä¸ªã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable&lt;String&gt; first = Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>);
        Observable&lt;String&gt; second = Observable.just(<span class="hljs-string">"D"</span>, <span class="hljs-string">"E"</span>, <span class="hljs-string">"F"</span>);
        Observable&lt;String&gt; third = Observable.just(<span class="hljs-string">"G"</span>, <span class="hljs-string">"H"</span>);

        Observable.concat(first, second, third)
                .subscribe(
                        letter -&gt; System.out.print(letter + <span class="hljs-string">" "</span>),
                        error -&gt; {
                        },
                        () -&gt; System.out.println(<span class="hljs-string">"\nå…¨éƒ¨å®Œæˆ"</span>)
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// A B C D E F G H</span>
        <span class="hljs-comment">// å…¨éƒ¨å®Œæˆ</span>
        <span class="hljs-comment">// ä¸¥æ ¼æŒ‰ç…§ first â†’ second â†’ third çš„é¡ºåº</span>
    }
</code></pre>
<h4 data-id="heading-39">concatArray</h4>
<p>concatArray() æ˜¯ concat() çš„æ•°ç»„ç‰ˆæœ¬ï¼Œç”¨äºé¡ºåºè¿æ¥å¤šä¸ª Observableï¼ˆä»¥æ•°ç»„å½¢å¼æä¾›ï¼‰ï¼ŒåŠŸèƒ½ä¸ concat() å®Œå…¨ç›¸åŒï¼Œåªæ˜¯å‚æ•°å½¢å¼ä¸åŒã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// åˆ›å»ºObservableæ•°ç»„</span>
        Observable&lt;String&gt;[] observables = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Observable</span>[]{
                Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>),
                Observable.just(<span class="hljs-string">"C"</span>, <span class="hljs-string">"D"</span>, <span class="hljs-string">"E"</span>),
                Observable.just(<span class="hljs-string">"F"</span>, <span class="hljs-string">"G"</span>)
        };

        <span class="hljs-comment">// ä½¿ç”¨ concatArray è¿æ¥</span>
        Observable.concatArray(observables)
                .subscribe(letter -&gt; System.out.print(letter + <span class="hljs-string">" "</span>));

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// A B C D E F G</span>
        <span class="hljs-comment">// é¡ºåºè¿æ¥æ‰€æœ‰æ•°ç»„ä¸­çš„Observable</span>
    }
</code></pre>
<h4 data-id="heading-40">merge</h4>
<p>merge() ç”¨äºå¹¶å‘åˆå¹¶å¤šä¸ª Observableï¼Œå°†æ‰€æœ‰æ•°æ®æŒ‰å®é™…åˆ°è¾¾æ—¶é—´é¡ºåºæ··åˆå‘å°„ã€‚</p>
<p>æ ¸å¿ƒæ€æƒ³ï¼šå¹¶è¡Œæ‰§è¡Œï¼Œè°å…ˆåˆ°è°å…ˆå‡ºï¼Œåƒå¤šè½¦é“åˆå¹¶æˆå•è½¦é“ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
        Observable&lt;Long&gt; fast = Observable.interval(<span class="hljs-number">100</span>, TimeUnit.MILLISECONDS)
                .map(i -&gt; i + <span class="hljs-number">100</span>)  <span class="hljs-comment">// 100, 101, 102...</span>
                .take(<span class="hljs-number">3</span>);
        Observable&lt;Long&gt; slow = Observable.interval(<span class="hljs-number">200</span>, TimeUnit.MILLISECONDS)
                .map(i -&gt; i + <span class="hljs-number">200</span>)  <span class="hljs-comment">// 200, 201, 202...</span>
                .take(<span class="hljs-number">3</span>);

        Observable.merge(fast, slow)
                .subscribe(num -&gt; System.out.print(num + <span class="hljs-string">" "</span>));

        Thread.sleep(<span class="hljs-number">1000</span>);

        <span class="hljs-comment">// è¾“å‡ºï¼ˆå®é™…æ—¶é—´é¡ºåºï¼‰ï¼š</span>
        <span class="hljs-comment">// 100 101 200 102 201 202</span>
        <span class="hljs-comment">// è§£é‡Šï¼š</span>
        <span class="hljs-comment">// 100ms: fastå‘å°„100</span>
        <span class="hljs-comment">// 200ms: slowå‘å°„200, fastå‘å°„101</span>
        <span class="hljs-comment">// 300ms: fastå‘å°„102</span>
        <span class="hljs-comment">// 400ms: slowå‘å°„201</span>
        <span class="hljs-comment">// 600ms: slowå‘å°„202</span>
    }
</code></pre>
<h4 data-id="heading-41">zip</h4>
<p>zip() ç”¨äºå°†å¤šä¸ª Observable çš„æ•°æ®æŒ‰ç´¢å¼•é…å¯¹ç»„åˆï¼Œåƒæ‹‰é“¾ä¸€æ ·ä¸€ä¸€å¯¹åº”ã€‚</p>
<p>æ ¸å¿ƒæ€æƒ³ï¼šç­‰å¾…æ‰€æœ‰Observableéƒ½æœ‰æ•°æ®ï¼Œç„¶åé…å¯¹å‘å°„ï¼Œä»¥æœ€çŸ­çš„Observableä¸ºå‡†ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable&lt;String&gt; letters = Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>, <span class="hljs-string">"D"</span>);
        Observable&lt;Integer&gt; numbers = Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);

        Observable.zip(
                        letters,
                        numbers,
                        (letter, number) -&gt; letter + number
                )
                .subscribe(result -&gt; System.out.print(result + <span class="hljs-string">" "</span>));

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// A1 B2 C3</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šD è¢«ä¸¢å¼ƒäº†ï¼Œå› ä¸º numbers åªæœ‰3ä¸ª</span>

    }
</code></pre>
<h4 data-id="heading-42">startWith &amp; startWithArray</h4>
<p>è¿™ä¸¤ä¸ªæ“ä½œç¬¦éƒ½ç”¨äºåœ¨ Observable å‘å°„æ•°æ®ä¹‹å‰ï¼Œå…ˆå‘å°„ä¸€äº›æŒ‡å®šçš„æ•°æ®ï¼Œå°±åƒç»™æ•°æ®æµæ·»åŠ "å¼€åœºç™½"ã€‚</p>
<ul>
<li>startWith()ï¼šæ·»åŠ å•ä¸ªå…ƒç´ æˆ– Observableã€‚</li>
<li>startWithArray()ï¼šæ·»åŠ å¤šä¸ªå…ƒç´ ï¼ˆå¯å˜å‚æ•°ï¼‰ã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// startWith: æ·»åŠ å•ä¸ªå…ƒç´ </span>
        Observable.just(<span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>)
                .startWith(<span class="hljs-string">"A"</span>)
                .subscribe(letter -&gt; System.out.print(<span class="hljs-string">"startWith: "</span> + letter + <span class="hljs-string">" "</span>));

        <span class="hljs-comment">// startWithArray: æ·»åŠ å¤šä¸ªå…ƒç´ </span>
        Observable.just(<span class="hljs-string">"D"</span>, <span class="hljs-string">"E"</span>)
                .startWithArray(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>)
                .subscribe(letter -&gt; System.out.print(<span class="hljs-string">"startWithArray: "</span> + letter + <span class="hljs-string">" "</span>));

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// startWith: A B C</span>
        <span class="hljs-comment">// startWithArray: A B C D E</span>
    }
</code></pre>
<h4 data-id="heading-43">count</h4>
<p>count() ç”¨äºç»Ÿè®¡ Observable å‘å°„çš„å…ƒç´ æ•°é‡ï¼Œè¿”å›ä¸€ä¸ªå‘å°„å•ä¸ªè®¡æ•°å€¼çš„ Observableã€‚</p>
<p>æ ¸å¿ƒæ€æƒ³ï¼šæ•°ä¸€æ•°å‘å°„äº†å¤šå°‘ä¸ªå…ƒç´ ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>, <span class="hljs-string">"D"</span>, <span class="hljs-string">"E"</span>)
                .count()
                .subscribe(count -&gt;
                        System.out.println(<span class="hljs-string">"å…ƒç´ æ•°é‡: "</span> + count)
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// å…ƒç´ æ•°é‡: 5</span>
    }
</code></pre>
<h3 data-id="heading-44">åŠŸèƒ½æ“ä½œç¬¦</h3>
<p>åŠŸèƒ½æ“ä½œç¬¦æ˜¯ RxJava ä¸­ç”¨äºè¾…åŠ©è°ƒè¯•ã€ç›‘æ§ã€é”™è¯¯å¤„ç†ã€èµ„æºç®¡ç†å’Œå·¥å…·æ€§åŠŸèƒ½çš„æ“ä½œç¬¦ã€‚å®ƒä»¬ä¸ç›´æ¥å¤„ç†æ•°æ®æµï¼Œè€Œæ˜¯æä¾›è¾…åŠ©åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-45">delay</h4>
<p>delay() ç”¨äºå»¶è¿Ÿå‘å°„ Observable çš„æ•°æ®ï¼Œå¯ä»¥å»¶è¿Ÿæ•´ä¸ªæµï¼Œä¹Ÿå¯ä»¥å»¶è¿Ÿæ¯ä¸ªå…ƒç´ ã€‚
æ ¸å¿ƒæ€æƒ³ï¼šè®©æ•°æ®"ç­‰ä¸€ä¼šå„¿"å†å‘å°„ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
        System.out.println(<span class="hljs-string">"å¼€å§‹æ—¶é—´: "</span> + System.currentTimeMillis());

        Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>)
                .delay(<span class="hljs-number">1</span>, TimeUnit.SECONDS)  <span class="hljs-comment">// å»¶è¿Ÿ1ç§’</span>
                .subscribe(item -&gt;
                        System.out.println(System.currentTimeMillis() + <span class="hljs-string">": "</span> + item)
                );

        Thread.sleep(<span class="hljs-number">2000</span>);

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// å¼€å§‹æ—¶é—´: 1766569373459</span>
        <span class="hljs-comment">// 1766569374574: A</span>
        <span class="hljs-comment">// 1766569374580: B</span>
        <span class="hljs-comment">// 1766569374580: C</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šA,B,Cå‡ ä¹åŒæ—¶å‘å°„ï¼Œéƒ½å»¶è¿Ÿäº†1ç§’</span>
    }
</code></pre>
<h4 data-id="heading-46">subscribeOn &amp; observerOn</h4>
<p>è¿™ä¸¤ä¸ªæ“ä½œç¬¦ç”¨äºæ§åˆ¶ Observable åœ¨å“ªä¸ªçº¿ç¨‹ä¸Šæ‰§è¡Œå’Œè§‚å¯Ÿï¼Œæ˜¯ RxJava çº¿ç¨‹è°ƒåº¦çš„æ ¸å¿ƒã€‚</p>
<ul>
<li><strong><code>subscribeOn()</code></strong>ï¼šæŒ‡å®š Observable æ‰§è¡Œåœ¨å“ªä¸ªçº¿ç¨‹</li>
<li><strong><code>observeOn()</code></strong>ï¼šæŒ‡å®š Observer è§‚å¯Ÿåœ¨å“ªä¸ªçº¿ç¨‹</li>
</ul>
<p>subscribeOn ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
        Observable.create(emitter -&gt; {
                    System.out.println(<span class="hljs-string">"æ‰§è¡Œçº¿ç¨‹: "</span> + Thread.currentThread().getName());
                    emitter.onNext(<span class="hljs-string">"æ•°æ®"</span>);
                    emitter.onComplete();
                })
                .subscribeOn(Schedulers.io())  <span class="hljs-comment">// åœ¨IOçº¿ç¨‹æ‰§è¡Œ</span>
                .subscribe(data -&gt;
                        System.out.println(<span class="hljs-string">"æ¥æ”¶çº¿ç¨‹: "</span> + Thread.currentThread().getName())
                );

        Thread.sleep(<span class="hljs-number">1000</span>);

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æ‰§è¡Œçº¿ç¨‹: RxCachedThreadScheduler-1</span>
        <span class="hljs-comment">// æ¥æ”¶çº¿ç¨‹: RxCachedThreadScheduler-1</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šæ‰§è¡Œå’Œæ¥æ”¶éƒ½åœ¨IOçº¿ç¨‹</span>
    }
</code></pre>
<p>observeOn ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
        Observable.create(emitter -&gt; {
                    System.out.println(<span class="hljs-string">"æ‰§è¡Œçº¿ç¨‹: "</span> + Thread.currentThread().getName());
                    emitter.onNext(<span class="hljs-string">"æ•°æ®"</span>);
                    emitter.onComplete();
                })
                .observeOn(Schedulers.io())  <span class="hljs-comment">// åœ¨IOçº¿ç¨‹æ¥æ”¶</span>
                .subscribe(data -&gt;
                        System.out.println(<span class="hljs-string">"æ¥æ”¶çº¿ç¨‹: "</span> + Thread.currentThread().getName())
                );

        Thread.sleep(<span class="hljs-number">1000</span>);

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æ‰§è¡Œçº¿ç¨‹: main</span>
        <span class="hljs-comment">// æ¥æ”¶çº¿ç¨‹: RxCachedThreadScheduler-1</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šæ‰§è¡Œåœ¨ä¸»çº¿ç¨‹ï¼Œæ¥æ”¶åœ¨IOçº¿ç¨‹</span>
    }
</code></pre>
<h4 data-id="heading-47">retry</h4>
<p>retry ç”¨äºåœ¨ Observable å‘ç”Ÿé”™è¯¯æ—¶è‡ªåŠ¨é‡è¯•ï¼Œå®ç°é”™è¯¯æ¢å¤æœºåˆ¶ï¼Œç›´åˆ°æˆåŠŸæˆ–è¾¾åˆ°é‡è¯•ä¸Šé™ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">attempt</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>();

        Observable.create(emitter -&gt; {
                    attempt.getAndIncrement();
                    System.out.println(<span class="hljs-string">"ç¬¬"</span> + attempt + <span class="hljs-string">"æ¬¡å°è¯•"</span>);
                    <span class="hljs-keyword">if</span> (attempt.get() &lt; <span class="hljs-number">3</span>) {
                        emitter.onError(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"éšæœºå¤±è´¥"</span>));
                    } <span class="hljs-keyword">else</span> {
                        emitter.onNext(<span class="hljs-string">"æˆåŠŸ"</span>);
                        emitter.onComplete();
                    }
                })
                .retry(<span class="hljs-number">2</span>)  <span class="hljs-comment">// æœ€å¤šé‡è¯•2æ¬¡</span>
                .subscribe(
                        data -&gt; System.out.println(<span class="hljs-string">"ç»“æœ: "</span> + data),
                        error -&gt; System.err.println(<span class="hljs-string">"æœ€ç»ˆå¤±è´¥: "</span> + error.getMessage())
                );

    <span class="hljs-comment">// è¾“å‡ºï¼š</span>
    <span class="hljs-comment">// ç¬¬1æ¬¡å°è¯•</span>
    <span class="hljs-comment">// ç¬¬2æ¬¡å°è¯•</span>
    <span class="hljs-comment">// ç¬¬3æ¬¡å°è¯•</span>
    <span class="hljs-comment">// ç»“æœ: æˆåŠŸ</span>
    <span class="hljs-comment">// å°è¯•3æ¬¡åæˆåŠŸï¼ˆåˆå§‹1æ¬¡+é‡è¯•2æ¬¡ï¼‰</span>
    }
</code></pre>
<h4 data-id="heading-48">retryUntil</h4>
<p>retryUntil ç”¨äºè‡ªå®šä¹‰é‡è¯•åœæ­¢æ¡ä»¶ï¼Œå½“æ¡ä»¶æ»¡è¶³æ—¶åœæ­¢é‡è¯•ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">attempt</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(<span class="hljs-number">0</span>);
        Observable.create(emitter -&gt; {
                    <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> attempt.incrementAndGet();
                    System.out.println(<span class="hljs-string">"ç¬¬"</span> + count + <span class="hljs-string">"æ¬¡å°è¯•"</span>);
                    <span class="hljs-keyword">if</span> (count &lt; <span class="hljs-number">3</span>) {
                        emitter.onError(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"å¤±è´¥"</span>));
                    } <span class="hljs-keyword">else</span> {
                        emitter.onNext(<span class="hljs-string">"æˆåŠŸ"</span>);
                        emitter.onComplete();
                    }
                })
                .retryUntil(() -&gt; {
                    <span class="hljs-comment">// è¿”å› true æ—¶åœæ­¢é‡è¯•</span>
                    <span class="hljs-keyword">return</span> attempt.get() &gt;= <span class="hljs-number">3</span>;  <span class="hljs-comment">// å°è¯•3æ¬¡ååœæ­¢</span>
                })
                .subscribe(
                        data -&gt; System.out.println(<span class="hljs-string">"ç»“æœ: "</span> + data),
                        error -&gt; System.err.println(<span class="hljs-string">"æœ€ç»ˆå¤±è´¥: "</span> + error.getMessage())
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// ç¬¬1æ¬¡å°è¯•</span>
        <span class="hljs-comment">// ç¬¬2æ¬¡å°è¯•</span>
        <span class="hljs-comment">// ç¬¬3æ¬¡å°è¯•</span>
        <span class="hljs-comment">// ç»“æœ: æˆåŠŸ</span>
    }
</code></pre>
<h3 data-id="heading-49">ç”Ÿå‘½å‘¨æœŸçš„åŠŸèƒ½æ“ä½œç¬¦</h3>
<p>å¾ˆå¤šåŠŸèƒ½æ“ä½œç¬¦è´¯ç©¿æ•´ä¸ªå‘å¸ƒè®¢é˜…çš„ç”Ÿå‘½å‘¨æœŸä¸­ã€‚</p>
<h4 data-id="heading-50">doOnSubscribe- è®¢é˜…æ—¶</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>)
                .doOnSubscribe(disposable -&gt;
                        System.out.println(<span class="hljs-string">"æœ‰äººè®¢é˜…äº†ï¼"</span>)
                )
                .subscribe();
        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æœ‰äººè®¢é˜…äº†ï¼</span>
    }
</code></pre>
<h4 data-id="heading-51">doOnNext - å‘å°„æ¯ä¸ªå…ƒç´ æ—¶</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.range(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>)
                .doOnNext(num -&gt;
                        System.out.println(<span class="hljs-string">"å³å°†å‘å°„: "</span> + num)
                )
                .map(num -&gt; num * <span class="hljs-number">2</span>)
                .doOnNext(num -&gt;
                        System.out.println(<span class="hljs-string">"å‘å°„å: "</span> + num)
                )
                .subscribe();

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// å³å°†å‘å°„: 1</span>
        <span class="hljs-comment">// å‘å°„å: 2</span>
        <span class="hljs-comment">// å³å°†å‘å°„: 2</span>
        <span class="hljs-comment">// å‘å°„å: 4</span>
        <span class="hljs-comment">// å³å°†å‘å°„: 3</span>
        <span class="hljs-comment">// å‘å°„å: 6</span>
    }
</code></pre>
<h4 data-id="heading-52">doAfterNext - å‘å°„åæ‰§è¡Œ</h4>
<pre><code class="hljs language-java" lang="java">Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>)
    .doOnNext(item -&gt; 
        System.out.println(<span class="hljs-string">"å‘å°„å‰: "</span> + item)
    )
    .doAfterNext(item -&gt; 
        System.out.println(<span class="hljs-string">"å‘å°„å: "</span> + item)
    )
    .subscribe(item -&gt; 
        System.out.println(<span class="hljs-string">"æ¥æ”¶: "</span> + item)
    );

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// å‘å°„å‰: A</span>
<span class="hljs-comment">// æ¥æ”¶: A</span>
<span class="hljs-comment">// å‘å°„å: A</span>
<span class="hljs-comment">// å‘å°„å‰: B</span>
<span class="hljs-comment">// æ¥æ”¶: B</span>
<span class="hljs-comment">// å‘å°„å: B</span>
<span class="hljs-comment">// å‘å°„å‰: C</span>
<span class="hljs-comment">// æ¥æ”¶: C</span>
<span class="hljs-comment">// å‘å°„å: C</span>
</code></pre>
<h4 data-id="heading-53">doOnError - å‡ºé”™æ—¶</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.error(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æµ‹è¯•é”™è¯¯"</span>))
                .doOnError(error -&gt;
                        System.err.println(<span class="hljs-string">"æ•è·åˆ°é”™è¯¯: "</span> + error.getMessage())
                )
                .onErrorReturnItem(<span class="hljs-string">"é»˜è®¤å€¼"</span>)
                .subscribe();

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æ•è·åˆ°é”™è¯¯: æµ‹è¯•é”™è¯¯</span>
    }
</code></pre>
<h4 data-id="heading-54">doOnComplete - å®Œæˆæ—¶</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-string">"ä»»åŠ¡1"</span>, <span class="hljs-string">"ä»»åŠ¡2"</span>)
                .doOnComplete(() -&gt;
                        System.out.println(<span class="hljs-string">"æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆäº†ï¼"</span>)
                )
                .subscribe();

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆäº†ï¼</span>
    }
</code></pre>
<h4 data-id="heading-55">doOnTerminate - å®Œæˆ/é”™è¯¯å‰æ‰§è¡Œ</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// æ­£å¸¸å®Œæˆçš„æƒ…å†µ</span>
        Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>)
                .doOnTerminate(() -&gt;
                        System.out.println(<span class="hljs-string">"å³å°†å®Œæˆ/å‡ºé”™"</span>)
                )
                .doOnComplete(() -&gt;
                        System.out.println(<span class="hljs-string">"doOnComplete"</span>)
                )
                .subscribe(
                        item -&gt; System.out.println(<span class="hljs-string">"æ¥æ”¶: "</span> + item),
                        error -&gt; {
                        },
                        () -&gt; System.out.println(<span class="hljs-string">"onComplete"</span>)
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æ¥æ”¶: A</span>
        <span class="hljs-comment">// æ¥æ”¶: B</span>
        <span class="hljs-comment">// å³å°†å®Œæˆ/å‡ºé”™</span>
        <span class="hljs-comment">// doOnComplete</span>
        <span class="hljs-comment">// onComplete</span>

        <span class="hljs-comment">// å‡ºé”™çš„æƒ…å†µ</span>
        Observable.error(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æµ‹è¯•"</span>))
                .doOnTerminate(() -&gt;
                        System.out.println(<span class="hljs-string">"å³å°†å®Œæˆ/å‡ºé”™"</span>)
                )
                .doOnError(error -&gt;
                        System.out.println(<span class="hljs-string">"doOnError: "</span> + error.getMessage())
                )
                .subscribe(
                        item -&gt; {
                        },
                        error -&gt; System.out.println(<span class="hljs-string">"onError: "</span> + error.getMessage())
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// å³å°†å®Œæˆ/å‡ºé”™</span>
        <span class="hljs-comment">// doOnError: æµ‹è¯•</span>
        <span class="hljs-comment">// onError: æµ‹è¯•</span>

    }
</code></pre>
<h4 data-id="heading-56">doAfterTerminate - å®Œæˆ/é”™è¯¯åæ‰§è¡Œ</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// æ­£å¸¸å®Œæˆçš„æƒ…å†µ</span>
        Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>)
                .doAfterTerminate(() -&gt;
                        System.out.println(<span class="hljs-string">"å®Œæˆ/å‡ºé”™åæ‰§è¡Œ"</span>)
                )
                .doOnComplete(() -&gt;
                        System.out.println(<span class="hljs-string">"doOnComplete"</span>)
                )
                .subscribe(
                        item -&gt; System.out.println(<span class="hljs-string">"æ¥æ”¶: "</span> + item),
                        error -&gt; {
                        },
                        () -&gt; System.out.println(<span class="hljs-string">"onComplete"</span>)
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æ¥æ”¶: A</span>
        <span class="hljs-comment">// æ¥æ”¶: B</span>
        <span class="hljs-comment">// doOnComplete</span>
        <span class="hljs-comment">// onComplete</span>
        <span class="hljs-comment">// å®Œæˆ/å‡ºé”™åæ‰§è¡Œ</span>

        <span class="hljs-comment">// å‡ºé”™çš„æƒ…å†µ</span>
        Observable.error(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æµ‹è¯•"</span>))
                .doAfterTerminate(() -&gt;
                        System.out.println(<span class="hljs-string">"å®Œæˆ/å‡ºé”™åæ‰§è¡Œ"</span>)
                )
                .doOnError(error -&gt;
                        System.out.println(<span class="hljs-string">"doOnError: "</span> + error.getMessage())
                )
                .subscribe(
                        item -&gt; {
                        },
                        error -&gt; System.out.println(<span class="hljs-string">"onError: "</span> + error.getMessage())
                );

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// doOnError: æµ‹è¯•</span>
        <span class="hljs-comment">// onError: æµ‹è¯•</span>
        <span class="hljs-comment">// å®Œæˆ/å‡ºé”™åæ‰§è¡Œ</span>
    }
</code></pre>
<h4 data-id="heading-57">doOnDispose - å–æ¶ˆè®¢é˜…æ—¶</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
        <span class="hljs-type">Disposable</span> <span class="hljs-variable">disposable</span> <span class="hljs-operator">=</span> Observable.interval(<span class="hljs-number">1</span>, TimeUnit.SECONDS)
                .doOnDispose(() -&gt;
                        System.out.println(<span class="hljs-string">"è®¢é˜…è¢«å–æ¶ˆäº†"</span>)
                )
                .subscribe(num -&gt;
                        System.out.println(<span class="hljs-string">"è®¡æ•°: "</span> + num)
                );

        Thread.sleep(<span class="hljs-number">3500</span>);
        disposable.dispose();

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// è®¡æ•°: 0</span>
        <span class="hljs-comment">// è®¡æ•°: 1</span>
        <span class="hljs-comment">// è®¡æ•°: 2</span>
        <span class="hljs-comment">// è®¢é˜…è¢«å–æ¶ˆäº†</span>
    }
</code></pre>
<h4 data-id="heading-58">doFinally - æœ€ç»ˆæ‰§è¡Œ</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-string">"æ•°æ®"</span>)
                .doFinally(() -&gt;
                        System.out.println(<span class="hljs-string">"æ— è®ºå¦‚ä½•éƒ½ä¼šæ‰§è¡Œ"</span>)
                )
                .subscribe();

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// æ— è®ºå¦‚ä½•éƒ½ä¼šæ‰§è¡Œ</span>
    }
</code></pre>
<h4 data-id="heading-59">doOnEach - æ¯ä¸ªäº‹ä»¶æ—¶</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Observable.just(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>)
                .doOnEach(notification -&gt; {
                    <span class="hljs-keyword">if</span> (notification.isOnNext()) {
                        System.out.println(<span class="hljs-string">"å‘å°„: "</span> + notification.getValue());
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (notification.isOnComplete()) {
                        System.out.println(<span class="hljs-string">"å®Œæˆ"</span>);
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (notification.isOnError()) {
                        System.out.println(<span class="hljs-string">"é”™è¯¯: "</span> + notification.getError());
                    }
                })
                .subscribe();

        <span class="hljs-comment">// è¾“å‡ºï¼š</span>
        <span class="hljs-comment">// å‘å°„: A</span>
        <span class="hljs-comment">// å‘å°„: B</span>
        <span class="hljs-comment">// å‘å°„: C</span>
        <span class="hljs-comment">// å®Œæˆ</span>
    }
</code></pre>
<h4 data-id="heading-60">doOnRequest - è¯·æ±‚æ—¶ï¼ˆèƒŒå‹ç›¸å…³ï¼‰</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Flowable.range(<span class="hljs-number">1</span>, <span class="hljs-number">100</span>)
                .doOnRequest(requested -&gt;
                        System.out.println(<span class="hljs-string">"ä¸‹æ¸¸è¯·æ±‚äº† "</span> + requested + <span class="hljs-string">" ä¸ªå…ƒç´ "</span>)
                )
                .subscribe(
                        num -&gt; System.out.println(<span class="hljs-string">"æ¥æ”¶: "</span> + num),
                        error -&gt; {
                        },
                        () -&gt; System.out.println(<span class="hljs-string">"å®Œæˆ"</span>)
                );

    }
</code></pre>
<h2 data-id="heading-61">ç»“æŸ</h2>
<p>å“åº”å¼ç¼–ç¨‹ç¡®å®éœ€è¦ä¸€äº›æ—¶é—´æ¥æŒæ¡ï¼Œä½†ä¸€æ—¦ç†è§£æ ¸å¿ƒæ¦‚å¿µï¼Œä½ å°±ä¼šå‘ç°å®ƒåœ¨å¤„ç†å¼‚æ­¥æ•°æ®æµæ—¶çš„å¼ºå¤§ä¹‹å¤„ã€‚</p>
<p>ä»å›è°ƒåœ°ç‹±åˆ°æµç•…çš„é“¾å¼è°ƒç”¨ï¼Œä»æ‰‹å¿™è„šä¹±çš„èµ„æºç®¡ç†åˆ°æ™ºèƒ½çš„èƒŒå‹æ§åˆ¶ï¼Œå“åº”å¼ç¼–ç¨‹è®©å¤æ‚å¼‚æ­¥æ“ä½œå˜å¾—æ¸…æ™°å¯æ§ã€‚è™½ç„¶å­¦ä¹ æ›²çº¿å­˜åœ¨ï¼Œä½†æŠ•å…¥æ˜¯å€¼å¾—çš„ã€‚</p>
<p>è®°ä½ï¼Œä¸æ˜¯æ‰€æœ‰åœºæ™¯éƒ½éœ€è¦å“åº”å¼ã€‚åœ¨åˆé€‚çš„ä¸šåŠ¡åœºæ™¯ä¸‹ä½¿ç”¨ï¼Œæ‰èƒ½å‘æŒ¥æœ€å¤§ä»·å€¼ã€‚å»ºè®®ä»å®é™…é¡¹ç›®çš„å°æ¨¡å—å¼€å§‹å°è¯•ï¼Œé€æ­¥ç§¯ç´¯ç»éªŒã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡å†…å®¹èƒ½ä¸ºä½ æ‰“å¼€å“åº”å¼ç¼–ç¨‹çš„å¤§é—¨ã€‚ç¼–ç¨‹ä¹‹è·¯å°±æ˜¯ä¸æ–­å­¦ä¹ çš„è¿‡ç¨‹ï¼Œä¿æŒå¥½å¥‡ï¼Œç»§ç»­æ¢ç´¢å§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SPAé¦–å±åŠ è½½é€Ÿåº¦ä¼˜åŒ–ï¼]]></title>    <link>https://juejin.cn/post/7588043318360014883</link>    <guid>https://juejin.cn/post/7588043318360014883</guid>    <pubDate>2025-12-28T01:29:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588043318360014883" data-draft-id="7588092534162374656" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SPAé¦–å±åŠ è½½é€Ÿåº¦ä¼˜åŒ–ï¼"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-28T01:29:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§çŸ¥é—²é—²i"/> <meta itemprop="url" content="https://juejin.cn/user/3799545205237111"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SPAé¦–å±åŠ è½½é€Ÿåº¦ä¼˜åŒ–ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3799545205237111/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§çŸ¥é—²é—²i
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T01:29:58.000Z" title="Sun Dec 28 2025 01:29:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">âš¡ é¦–å±åŠ è½½é€Ÿåº¦ä¸ºä½•å¦‚æ­¤é‡è¦ï¼Ÿ</h2>
<p>é¦–å±åŠ è½½æ—¶é—´ï¼ˆFirst Contentful Paintï¼‰æ˜¯å†³å®šç”¨æˆ·ç•™å­˜ç‡çš„å…³é”®æŒ‡æ ‡ã€‚æ®ç»Ÿè®¡ï¼š</p>
<ul>
<li>
<p><strong>53%çš„ç”¨æˆ·</strong> ä¼šåœ¨3ç§’å†…æ”¾å¼ƒåŠ è½½ç¼“æ…¢çš„ç§»åŠ¨ç½‘ç«™</p>
</li>
<li>
<p><strong>æ¯æé«˜1ç§’</strong> çš„åŠ è½½é€Ÿåº¦ï¼Œè½¬åŒ–ç‡æå‡7%</p>
</li>
<li>
<p>Googleå·²å°†é¡µé¢é€Ÿåº¦çº³å…¥æœç´¢æ’åå› ç´ </p>
</li>
</ul>
<h2 data-id="heading-1">ğŸ” ç²¾å‡†è¯Šæ–­ï¼šä½ çš„åº”ç”¨åˆ°åº•"æ…¢"åœ¨å“ªé‡Œï¼Ÿ</h2>
<h3 data-id="heading-2">é¦–å±æ—¶é—´è®¡ç®—æ–¹æ³•</h3>
<pre><code class="hljs language-ini" lang="ini">// ç°ä»£æµè§ˆå™¨API
const <span class="hljs-attr">getFirstContentfulPaint</span> = () =&gt; {
  const <span class="hljs-section">[entry]</span> = performance.getEntriesByName('first-contentful-paint')<span class="hljs-comment">;</span>
  return entry.startTime<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
â€‹
// ä¼ ç»Ÿè®¡ç®—æ–¹æ³•
const <span class="hljs-attr">firstScreenTime</span> = () =&gt; {
  return performance.timing.domContentLoadedEventEnd - 
         performance.timing.navigationStart<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-3">ğŸš€ ä¸ƒå¤§æ ¸å¿ƒç†å¿µï¼šä»æ ¹æºè§£å†³åŠ è½½é—®é¢˜</h2>
<h3 data-id="heading-4">ä¸€ã€ä»£ç åˆ†å‰²ï¼šæ™ºèƒ½åŠ è½½çš„è‰ºæœ¯</h3>
<h4 data-id="heading-5">åŠ¨æ€å¯¼å…¥ + è·¯ç”±æ‡’åŠ è½½</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¼ ç»Ÿæ–¹å¼ï¼ˆä¸æ¨èï¼‰</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@/views/Home.vue'</span>;
â€‹
<span class="hljs-comment">// ç°ä»£åŒ–æ‡’åŠ è½½ï¼ˆå¼ºçƒˆæ¨èï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Home</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackChunkName: "home" */</span> <span class="hljs-string">'@/views/Home.vue'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title function_">About</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackChunkName: "about" */</span> <span class="hljs-string">'@/views/About.vue'</span>);
â€‹
<span class="hljs-comment">// Vue Routeré…ç½®</span>
<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/Home.vue'</span>),
    <span class="hljs-attr">meta</span>: { <span class="hljs-attr">preload</span>: <span class="hljs-literal">true</span> } <span class="hljs-comment">// å…³é”®è·¯ç”±é¢„åŠ è½½æ ‡è®°</span>
  }
];
â€‹
<span class="hljs-comment">// é¢„åŠ è½½ç­–ç•¥</span>
router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> preloadList = to.<span class="hljs-property">matched</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">meta</span>.<span class="hljs-property">preload</span>);
  preloadList.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">route</span> =&gt;</span> {
    route.<span class="hljs-property">components</span>.<span class="hljs-title function_">default</span>().<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> {});
  });
  <span class="hljs-title function_">next</span>();
});
</code></pre>
<h3 data-id="heading-6">äºŒã€Tree Shakingï¼šå‰”é™¤æ— ç”¨ä»£ç </h3>
<h4 data-id="heading-7">Webpacké…ç½®ä¼˜åŒ–</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">//</span> <span class="hljs-string">webpack.config.js</span>
<span class="hljs-string">module.exports</span> <span class="hljs-string">=</span> {
  <span class="hljs-attr">mode:</span> <span class="hljs-string">'production'</span>,
  <span class="hljs-attr">optimization:</span> {
    <span class="hljs-attr">usedExports:</span> <span class="hljs-literal">true</span>, <span class="hljs-string">//</span> <span class="hljs-string">æ ‡è®°æœªä½¿ç”¨ä»£ç </span>
    <span class="hljs-attr">minimize:</span> <span class="hljs-literal">true</span>,
    <span class="hljs-attr">splitChunks:</span> {
      <span class="hljs-attr">chunks:</span> <span class="hljs-string">'all'</span>,
      <span class="hljs-attr">minSize:</span> <span class="hljs-number">20000</span>,
      <span class="hljs-attr">maxSize:</span> <span class="hljs-number">244000</span>,
      <span class="hljs-attr">cacheGroups:</span> {
        <span class="hljs-attr">vendor:</span> {
          <span class="hljs-attr">test:</span> <span class="hljs-string">/</span>[<span class="hljs-string">\\/</span>]<span class="hljs-string">node_modules</span>[<span class="hljs-string">\\/</span>]<span class="hljs-string">/</span>,
          <span class="hljs-attr">name:</span> <span class="hljs-string">'vendors'</span>,
          <span class="hljs-attr">chunks:</span> <span class="hljs-string">'all'</span>,
          <span class="hljs-attr">priority:</span> <span class="hljs-number">10</span>,
          <span class="hljs-attr">reuseExistingChunk:</span> <span class="hljs-literal">true</span>
        },
        <span class="hljs-attr">common:</span> {
          <span class="hljs-attr">minChunks:</span> <span class="hljs-number">2</span>,
          <span class="hljs-attr">priority:</span> <span class="hljs-number">5</span>,
          <span class="hljs-attr">reuseExistingChunk:</span> <span class="hljs-literal">true</span>
        }
      }
    }
  }
}<span class="hljs-string">;</span>
</code></pre>
<h3 data-id="heading-8">ä¸‰ã€UIæ¡†æ¶æŒ‰éœ€åŠ è½½ï¼šå‘Šåˆ«"å…¨é‡"åŒ…è¢±</h3>
<h4 data-id="heading-9">Element-UIä¼˜åŒ–ç¤ºä¾‹</h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// .babelrc é…ç½®</span>
{
  <span class="hljs-string">"plugins"</span>: [
    [
      <span class="hljs-string">"component"</span>,
      {
        <span class="hljs-string">"libraryName"</span>: <span class="hljs-string">"element-ui"</span>,
        <span class="hljs-string">"styleLibraryName"</span>: <span class="hljs-string">"theme-chalk"</span>
      }
    ]
  ]
}
â€‹
<span class="hljs-comment">// æŒ‰éœ€å¼•å…¥ç»„ä»¶</span>
import Vue <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
import { Button, Select, Pagination } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-ui'</span>;
â€‹
Vue.<span class="hljs-keyword">use</span>(Button);
Vue.<span class="hljs-keyword">use</span>(Select);
Vue.<span class="hljs-keyword">use</span>(Pagination);
</code></pre>
<h3 data-id="heading-10">å››ã€å›¾ç‰‡èµ„æºé©å‘½çº§ä¼˜åŒ–</h3>
<h4 data-id="heading-11">ç°ä»£å›¾ç‰‡å¤„ç†æ–¹æ¡ˆ</h4>
<pre><code class="hljs language-ini" lang="ini">// Vueå›¾ç‰‡æ‡’åŠ è½½æŒ‡ä»¤
Vue.directive('lazy', {
  inserted: (el, binding) =&gt; {
    const <span class="hljs-attr">observer</span> = new IntersectionObserver((entries) =&gt; {
      entries.forEach(<span class="hljs-attr">entry</span> =&gt; {
        if (entry.isIntersecting) {
          const <span class="hljs-attr">img</span> = new Image()<span class="hljs-comment">;</span>
          <span class="hljs-attr">img.src</span> = binding.value<span class="hljs-comment">;</span>
          <span class="hljs-attr">img.onload</span> = () =&gt; {
            <span class="hljs-attr">el.src</span> = binding.value<span class="hljs-comment">;</span>
            el.classList.add('loaded')<span class="hljs-comment">;</span>
          }<span class="hljs-comment">;</span>
          observer.unobserve(el)<span class="hljs-comment">;</span>
        }
      })<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>
    observer.observe(el)<span class="hljs-comment">;</span>
  }
})<span class="hljs-comment">;</span>
â€‹
// WebPè‡ªåŠ¨é™çº§æ–¹æ¡ˆ
&lt;picture&gt;
  &lt;source <span class="hljs-attr">srcset</span>=<span class="hljs-string">"image.webp"</span> type=<span class="hljs-string">"image/webp"</span>&gt;
  &lt;source <span class="hljs-attr">srcset</span>=<span class="hljs-string">"image.jpg"</span> type=<span class="hljs-string">"image/jpeg"</span>&gt;
  &lt;img <span class="hljs-attr">src</span>=<span class="hljs-string">"image.jpg"</span> alt=<span class="hljs-string">"Description"</span>&gt;
&lt;/picture&gt;
</code></pre>
<h3 data-id="heading-12">äº”ã€ç¼“å­˜ç­–ç•¥ï¼šæè‡´åˆ©ç”¨æµè§ˆå™¨èƒ½åŠ›</h3>
<h4 data-id="heading-13">å¤šçº§ç¼“å­˜ä½“ç³»</h4>
<pre><code class="hljs language-ini" lang="ini">// Service Worker ç¼“å­˜ç­–ç•¥
const <span class="hljs-attr">CACHE_NAME</span> = <span class="hljs-string">'v1'</span><span class="hljs-comment">;</span>
const <span class="hljs-attr">urlsToCache</span> = [<span class="hljs-string">'/'</span>, <span class="hljs-string">'/styles/main.css'</span>, <span class="hljs-string">'/scripts/main.js'</span>]<span class="hljs-comment">;</span>
â€‹
self.addEventListener('install', <span class="hljs-attr">event</span> =&gt; {
  event.waitUntil(
    caches.open(CACHE_NAME)
      .then(<span class="hljs-attr">cache</span> =&gt; cache.addAll(urlsToCache))
  )<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
â€‹
self.addEventListener('fetch', <span class="hljs-attr">event</span> =&gt; {
  event.respondWith(
    caches.match(event.request)
      .then(<span class="hljs-attr">response</span> =&gt; {
        if (response) return response<span class="hljs-comment">;</span>
        
        return fetch(event.request).then(<span class="hljs-attr">response</span> =&gt; {
          // åŠ¨æ€ç¼“å­˜é‡è¦èµ„æº
          if (event.request.url.includes('/api/critical')) {
            const <span class="hljs-attr">responseClone</span> = response.clone()<span class="hljs-comment">;</span>
            caches.open(CACHE_NAME).then(<span class="hljs-attr">cache</span> =&gt; {
              cache.put(event.request, responseClone)<span class="hljs-comment">;</span>
            })<span class="hljs-comment">;</span>
          }
          return response<span class="hljs-comment">;</span>
        })<span class="hljs-comment">;</span>
      })
  )<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-14">å…­ã€æ„å»ºä¼˜åŒ–ï¼šå‘å¸ƒå‰çš„æœ€åå†²åˆº</h3>
<h4 data-id="heading-15">Webpacké«˜çº§é…ç½®</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// vue.config.js</span>
<span class="hljs-type">const</span> CompressionPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">'compression-webpack-plugin'</span>);
<span class="hljs-type">const</span> BundleAnalyzerPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack-bundle-analyzer'</span>).BundleAnalyzerPlugin;
â€‹
<span class="hljs-keyword">module</span>.exports = {
  chainWebpack: config =&gt; {
    <span class="hljs-comment">// æ‰“åŒ…åˆ†æ</span>
    config.<span class="hljs-built_in">plugin</span>(<span class="hljs-string">'analyzer'</span>).<span class="hljs-built_in">use</span>(BundleAnalyzerPlugin);
    
    <span class="hljs-comment">// ç§»é™¤ prefetch/preload</span>
    config.plugins.<span class="hljs-built_in">delete</span>(<span class="hljs-string">'prefetch'</span>);
    config.plugins.<span class="hljs-built_in">delete</span>(<span class="hljs-string">'preload'</span>);
    
    <span class="hljs-comment">// å‹ç¼©é…ç½®</span>
    config.optimization.<span class="hljs-built_in">minimize</span>(<span class="hljs-literal">true</span>);
    
    <span class="hljs-comment">// Gzipå‹ç¼©</span>
    config.<span class="hljs-built_in">plugin</span>(<span class="hljs-string">'compression'</span>).<span class="hljs-built_in">use</span>(CompressionPlugin, [{
      algorithm: <span class="hljs-string">'gzip'</span>,
      test: /\.(js|css)$/,
      threshold: <span class="hljs-number">10240</span>,
      minRatio: <span class="hljs-number">0.8</span>
    }]);
    
    <span class="hljs-comment">// Brotliå‹ç¼©ï¼ˆæ›´é«˜æ•ˆï¼‰</span>
    config.<span class="hljs-built_in">plugin</span>(<span class="hljs-string">'brotli'</span>).<span class="hljs-built_in">use</span>(CompressionPlugin, [{
      algorithm: <span class="hljs-string">'brotliCompress'</span>,
      filename: <span class="hljs-string">'[path].br[query]'</span>,
      test: /\.(js|css|html|svg)$/,
      compressionOptions: { level: <span class="hljs-number">11</span> },
      threshold: <span class="hljs-number">10240</span>,
      minRatio: <span class="hljs-number">0.8</span>
    }]);
  }
};
</code></pre>
<h3 data-id="heading-16">ä¸ƒã€æœåŠ¡ç«¯ä¼˜åŒ–ï¼šå…¨é“¾è·¯æ€§èƒ½æå‡</h3>
<h4 data-id="heading-17">Nginxé…ç½®ä¼˜åŒ–</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Gzipå‹ç¼©é…ç½®</span>
gzip on;
gzip_vary on;
gzip_min_length 1024;
gzip_types 
    text/plain
    text/css
    text/xml
    text/javascript
    application/javascript
    application/xml+rss
    application/json
    image/svg+xml;
â€‹
<span class="hljs-comment"># ç¼“å­˜ç­–ç•¥</span>
location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
    expires 1y;
    add_header Cache-Control <span class="hljs-string">"public, immutable"</span>;
}
â€‹
<span class="hljs-comment"># Brotliå‹ç¼©ï¼ˆéœ€è¦é¢å¤–æ¨¡å—ï¼‰</span>
brotli on;
brotli_comp_level 6;
brotli_types text/plain text/css application/json application/javascript;
</code></pre>
<h4 data-id="heading-18">Node.js Expressä¼˜åŒ–</h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">express</span> = <span class="hljs-keyword">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">compression</span> = <span class="hljs-keyword">require</span>(<span class="hljs-string">'compression'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">helmet</span> = <span class="hljs-keyword">require</span>(<span class="hljs-string">'helmet'</span>);
â€‹
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">app</span> = <span class="hljs-title function_ invoke__">express</span>();
â€‹
<span class="hljs-comment">// å®‰å…¨å¤´éƒ¨</span>
app.<span class="hljs-keyword">use</span>(<span class="hljs-title function_ invoke__">helmet</span>({
  <span class="hljs-attr">contentSecurityPolicy</span>: <span class="hljs-literal">false</span>,
}));
â€‹
<span class="hljs-comment">// å‹ç¼©ä¸­é—´ä»¶</span>
app.<span class="hljs-keyword">use</span>(<span class="hljs-title function_ invoke__">compression</span>({
  <span class="hljs-attr">level</span>: <span class="hljs-number">6</span>,
  <span class="hljs-attr">threshold</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">filter</span>: (req, res) =&gt; {
    <span class="hljs-keyword">if</span> (req.headers[<span class="hljs-string">'x-no-compression'</span>]) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> compression.<span class="hljs-title function_ invoke__">filter</span>(req, res);
  }
}));
â€‹
<span class="hljs-comment">// é™æ€èµ„æºç¼“å­˜</span>
app.<span class="hljs-keyword">use</span>(express.<span class="hljs-built_in">static</span>(<span class="hljs-string">'dist'</span>, {
  maxAge: <span class="hljs-string">'1y'</span>,
  setHeaders: (res, path) =&gt; {
    <span class="hljs-keyword">if</span> (path.<span class="hljs-title function_ invoke__">endsWith</span>(<span class="hljs-string">'.html'</span>)) {
      res.<span class="hljs-title function_ invoke__">setHeader</span>(<span class="hljs-string">'Cache-Control'</span>, <span class="hljs-string">'public, max-age=0'</span>);
    }
  }
}));
</code></pre>
<h2 data-id="heading-19">ğŸ¯ è¿›é˜¶æ–¹æ¡ˆï¼šçªç ´æ€§èƒ½ç“¶é¢ˆ</h2>
<h3 data-id="heading-20">1. SSRï¼ˆæœåŠ¡ç«¯æ¸²æŸ“ï¼‰</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">//</span> <span class="hljs-string">Nuxt.jsé…ç½®ç¤ºä¾‹</span>
<span class="hljs-string">export</span> <span class="hljs-string">default</span> {
  <span class="hljs-attr">target:</span> <span class="hljs-string">'server'</span>,
  <span class="hljs-attr">render:</span> {
    <span class="hljs-string">//</span> <span class="hljs-string">å¼€å¯HTTP/2æ¨é€</span>
    <span class="hljs-attr">http2:</span> {
      <span class="hljs-attr">push:</span> <span class="hljs-literal">true</span>
    },
    <span class="hljs-string">//</span> <span class="hljs-string">èµ„æºæç¤º</span>
    <span class="hljs-attr">resourceHints:</span> <span class="hljs-literal">true</span>
  },
  <span class="hljs-attr">build:</span> {
    <span class="hljs-string">//</span> <span class="hljs-string">æå–CSS</span>
    <span class="hljs-attr">extractCSS:</span> <span class="hljs-literal">true</span>,
    <span class="hljs-string">//</span> <span class="hljs-string">ä¼˜åŒ–é…ç½®</span>
    <span class="hljs-attr">optimization:</span> {
      <span class="hljs-attr">splitChunks:</span> {
        <span class="hljs-attr">chunks:</span> <span class="hljs-string">'all'</span>,
        <span class="hljs-attr">automaticNameDelimiter:</span> <span class="hljs-string">'.'</span>,
        <span class="hljs-attr">name:</span> <span class="hljs-literal">true</span>,
        <span class="hljs-attr">maxSize:</span> <span class="hljs-number">256000</span>
      }
    }
  }
}<span class="hljs-string">;</span>
</code></pre>
<h3 data-id="heading-21">2. é¢„æ¸²æŸ“å…³é”®è·¯å¾„</h3>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// ä½¿ç”¨prerender-spa-plugin</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PrerenderSPAPlugin</span> = <span class="hljs-keyword">require</span>(<span class="hljs-string">'prerender-spa-plugin'</span>);
â€‹
module.exports = {
  plugins: [
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrerenderSPAPlugin</span>({
      staticDir: path.<span class="hljs-title function_ invoke__">join</span>(__dirname, <span class="hljs-string">'dist'</span>),
      routes: [<span class="hljs-string">'/'</span>, <span class="hljs-string">'/about'</span>, <span class="hljs-string">'/contact'</span>],
      renderer: <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrerenderSPAPlugin</span>.<span class="hljs-title function_ invoke__">PuppeteerRenderer</span>({
        <span class="hljs-attr">inject</span>: {},
        <span class="hljs-attr">renderAfterDocumentEvent</span>: <span class="hljs-string">'render-event'</span>
      })
    })
  ]
};
</code></pre>
<h3 data-id="heading-22">3. CDNåŠ¨æ€åŠ é€Ÿ</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- æ™ºèƒ½CDNé€‰æ‹© --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">const</span> cdnList = [
    <span class="hljs-string">'https://cdn1.example.com'</span>,
    <span class="hljs-string">'https://cdn2.example.com'</span>,
    <span class="hljs-string">'https://cdn3.example.com'</span>
  ];
  
  <span class="hljs-comment">// æµ‹é€Ÿé€‰æ‹©æœ€å¿«çš„CDN</span>
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getFastestCDN</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> promises = cdnList.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">url</span> =&gt;</span> 
      <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`<span class="hljs-subst">${url}</span>/ping.txt`</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> ({
        url,
        <span class="hljs-attr">time</span>: performance.<span class="hljs-title function_">now</span>()
      })).<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-literal">null</span>)
    );
    
    <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(promises);
    <span class="hljs-keyword">const</span> valid = results.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r !== <span class="hljs-literal">null</span>);
    valid.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a.<span class="hljs-property">time</span> - b.<span class="hljs-property">time</span>);
    <span class="hljs-keyword">return</span> valid[<span class="hljs-number">0</span>].<span class="hljs-property">url</span>;
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 data-id="heading-23">ğŸ“Š ç›‘æ§ä¸æŒç»­ä¼˜åŒ–</h2>
<h3 data-id="heading-24">æ€§èƒ½ç›‘æ§ä»ªè¡¨æ¿</h3>
<pre><code class="hljs language-ini" lang="ini">// å®æ—¶æ€§èƒ½ç›‘æ§
const <span class="hljs-attr">metrics</span> = {}<span class="hljs-comment">;</span>
â€‹
// æ”¶é›†æ€§èƒ½æ•°æ®
const <span class="hljs-attr">collectMetrics</span> = () =&gt; {
  const <span class="hljs-attr">paintMetrics</span> = performance.getEntriesByType(<span class="hljs-string">'paint'</span>)<span class="hljs-comment">;</span>
  const <span class="hljs-attr">navigationMetrics</span> = performance.getEntriesByType(<span class="hljs-string">'navigation'</span>)[<span class="hljs-number">0</span>]<span class="hljs-comment">;</span>
  
  <span class="hljs-attr">metrics.FCP</span> = paintMetrics.find(m =&gt; m.name === <span class="hljs-string">'first-contentful-paint'</span>)<span class="hljs-comment">;</span>
  <span class="hljs-attr">metrics.LCP</span> = performance.getEntriesByName(<span class="hljs-string">'largest-contentful-paint'</span>)[<span class="hljs-number">0</span>]<span class="hljs-comment">;</span>
  <span class="hljs-attr">metrics.FID</span> = performance.getEntriesByName(<span class="hljs-string">'first-input'</span>)[<span class="hljs-number">0</span>]<span class="hljs-comment">;</span>
  
  // å‘é€åˆ°ç›‘æ§ç³»ç»Ÿ
  sendToAnalytics(metrics)<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
â€‹
// ç”¨æˆ·è¡Œä¸ºå…³è”åˆ†æ
const <span class="hljs-attr">correlateWithUserActions</span> = () =&gt; {
  // å…³è”åŠ è½½æ€§èƒ½ä¸ç”¨æˆ·è½¬åŒ–ç‡
}<span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-25">ğŸ æ€»ç»“ï¼šæ„å»ºä½ çš„ä¼˜åŒ–æ¸…å•</h2>
<h3 data-id="heading-26">ç«‹å³æ‰§è¡Œï¼ˆä»Šå¤©å°±èƒ½åšï¼‰</h3>
<ul>
<li>å¯ç”¨è·¯ç”±æ‡’åŠ è½½</li>
<li>é…ç½®Webpackä»£ç åˆ†å‰²</li>
<li>å¼€å¯Gzip/Brotliå‹ç¼©</li>
<li>ä¼˜åŒ–å›¾ç‰‡æ ¼å¼å’Œå°ºå¯¸</li>
<li>è®¾ç½®åˆé€‚çš„HTTPç¼“å­˜å¤´</li>
</ul>
<h3 data-id="heading-27">çŸ­æœŸè§„åˆ’ï¼ˆ1-2å‘¨ï¼‰</h3>
<ul>
<li>å®ç°Service Workerç¦»çº¿ç¼“å­˜</li>
<li>UIæ¡†æ¶æŒ‰éœ€åŠ è½½ä¼˜åŒ–</li>
<li>å…³é”®èµ„æºé¢„åŠ è½½</li>
<li>éƒ¨ç½²CDNåŠ é€Ÿ</li>
<li>æ·»åŠ æ€§èƒ½ç›‘æ§</li>
</ul>
<h3 data-id="heading-28">é•¿æœŸæˆ˜ç•¥ï¼ˆ1-3ä¸ªæœˆï¼‰</h3>
<ul>
<li>å®æ–½SSR/SSGæ–¹æ¡ˆ</li>
<li>å»ºç«‹æ€§èƒ½é¢„ç®—æœºåˆ¶</li>
<li>å¼€å‘æ¸è¿›å¼Webåº”ç”¨ç‰¹æ€§</li>
<li>å»ºç«‹è‡ªåŠ¨åŒ–çš„æ€§èƒ½æµ‹è¯•æµæ°´çº¿</li>
</ul>
<h2 data-id="heading-29">ğŸ’¡ ç»ˆææ€è€ƒ</h2>
<p>é¦–å±ä¼˜åŒ–ä¸æ˜¯ä¸€æ¬¡æ€§ä»»åŠ¡ï¼Œè€Œæ˜¯<strong>æŒç»­çš„è¿‡ç¨‹</strong>ã€‚éšç€åº”ç”¨å‘å±•ï¼Œéœ€è¦ï¼š</p>
<ol>
<li>
<p><strong>å»ºç«‹æ€§èƒ½æ–‡åŒ–</strong> - è®©æ¯ä¸ªå¼€å‘è€…éƒ½æœ‰æ€§èƒ½æ„è¯†</p>
</li>
<li>
<p><strong>è®¾ç½®æ€§èƒ½é¢„ç®—</strong> - ä¸ºæ¯ä¸ªå…³é”®æŒ‡æ ‡è®¾ç½®ä¸Šé™</p>
</li>
<li>
<p><strong>è‡ªåŠ¨åŒ–ç›‘æ§</strong> - å®æ—¶å‘ç°é—®é¢˜ï¼Œå¿«é€Ÿå“åº”</p>
</li>
<li>
<p><strong>A/Bæµ‹è¯•</strong> - ç”¨æ•°æ®é©±åŠ¨ä¼˜åŒ–å†³ç­–</p>
</li>
</ol>
<p>è®°ä½ï¼š<strong>æ¯ä¸€æ¯«ç§’éƒ½å€¼å¾—äº‰å–</strong>ï¼Œå› ä¸ºå¯¹äºç”¨æˆ·æ¥è¯´ï¼Œé€Ÿåº¦ä¸ä»…æ˜¯ä¸€ç§åŠŸèƒ½ï¼Œæ›´æ˜¯ä¸€ç§ä½“éªŒçš„ä¿è¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MyBatis åŠ¨æ€ SQL ä¸ºä»€ä¹ˆè¿™ä¹ˆçµæ´»ï¼ŸèƒŒåé çš„æ˜¯ OGNL]]></title>    <link>https://juejin.cn/post/7588042910198087730</link>    <guid>https://juejin.cn/post/7588042910198087730</guid>    <pubDate>2025-12-27T11:01:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588042910198087730" data-draft-id="7588104741610061834" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MyBatis åŠ¨æ€ SQL ä¸ºä»€ä¹ˆè¿™ä¹ˆçµæ´»ï¼ŸèƒŒåé çš„æ˜¯ OGNL"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-27T11:01:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JavaEdgeåœ¨æ˜é‡‘"/> <meta itemprop="url" content="https://juejin.cn/user/26044012176424"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MyBatis åŠ¨æ€ SQL ä¸ºä»€ä¹ˆè¿™ä¹ˆçµæ´»ï¼ŸèƒŒåé çš„æ˜¯ OGNL
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/26044012176424/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JavaEdgeåœ¨æ˜é‡‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T11:01:05.000Z" title="Sat Dec 27 2025 11:01:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡å·²æ”¶å½•åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FJava-Edge%2FJava-Interview-Tutorial" target="_blank" title="https://github.com/Java-Edge/Java-Interview-Tutorial" ref="nofollow noopener noreferrer">Github</a>ï¼Œ<strong>å…³æ³¨æˆ‘ï¼Œç´§è·Ÿæœ¬ç³»åˆ—ä¸“æ æ–‡ç« ï¼Œå’±ä»¬ä¸‹ç¯‡å†ç»­ï¼</strong></p>
<ul>
<li>ğŸš€ é­”éƒ½æ¶æ„å¸ˆ | å…¨ç½‘30WæŠ€æœ¯è¿½éšè€…</li>
<li>ğŸ”§ å¤§å‚åˆ†å¸ƒå¼ç³»ç»Ÿ/æ•°æ®ä¸­å°å®æˆ˜ä¸“å®¶</li>
<li>ğŸ† ä¸»å¯¼äº¤æ˜“ç³»ç»Ÿç™¾ä¸‡çº§æµé‡è°ƒä¼˜ &amp; è½¦è”ç½‘å¹³å°æ¶æ„</li>
<li>ğŸ§  AIGCåº”ç”¨å¼€å‘å…ˆè¡Œè€… | åŒºå—é“¾è½åœ°å®è·µè€…</li>
<li>ğŸŒ ä»¥æŠ€æœ¯é©±åŠ¨åˆ›æ–°ï¼Œæˆ‘ä»¬çš„å¾é€”æ˜¯æ”¹å˜ä¸–ç•Œï¼</li>
<li>ğŸ‘‰ å®æˆ˜å¹²è´§ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.javaedge.cn%2F" target="_blank" title="http://www.javaedge.cn/" ref="nofollow noopener noreferrer">ç¼–ç¨‹ä¸¥é€‰ç½‘</a></li>
</ul>
<h2 data-id="heading-0">0 å‰è¨€</h2>
<p><strong>OGNLï¼ˆObject Graph Navigation Languageï¼Œå¯¹è±¡å›¾å¯¼èˆªè¯­è¨€ï¼‰</strong>ï¼Œåœ¨ Struts2 æ—¶ä»£æ˜¯ç»å¯¹çš„æ ¸å¿ƒï¼Œè€Œåœ¨å¦‚ä»Š Spring Boot å’Œ MyBatis æ¶æ„ï¼Œä¾ç„¶åœ¨å¹•åæ‰®æ¼”ç€æå…¶å…³é”®çš„è§’è‰²ã€‚</p>
<h2 data-id="heading-1">1 å•¥æ˜¯ OGNLï¼Ÿ</h2>
<p>å¦‚æœæŠŠä½ çš„ Java ç¨‹åºæ¯”ä½œä¸€åº§å·¨å¤§çš„åŸå¸‚ï¼Œé‡Œé¢çš„å¯¹è±¡å°±æ˜¯ä¸€æ ‹æ ‹å¤§æ¥¼ï¼Œè€Œå¯¹è±¡çš„å±æ€§å°±æ˜¯å¤§æ¥¼é‡Œçš„æˆ¿é—´ã€‚</p>
<h3 data-id="heading-2">1.1 ä¼ ç»Ÿæ–¹å¼</h3>
<p>ä½ æƒ³å»æŸä¸ªæˆ¿é—´ï¼Œå¾—äº²è‡ªèµ°æ¥¼æ¢¯ã€å¼€é—¨ï¼ˆæ‰‹åŠ¨ç¼–å†™ <code>getUser().getAddress().getCity()</code>ï¼‰ã€‚å¦‚æœä¸­é—´æœ‰ä¸€ä¸ªé—¨é”äº†ï¼ˆä¸º <code>null</code>ï¼‰ï¼Œä½ å°±æ‘”å€’äº†ï¼ˆNullPointerExceptionï¼‰ã€‚</p>
<h3 data-id="heading-3">1.2 OGNL æ–¹å¼</h3>
<p>ä½ åªéœ€è¦è¾“å…¥ä¸€ä¸ªåœ°å€å­—ç¬¦ä¸² <code>"user.address.city"</code>ï¼ŒOGNL å°±åƒä¸€ä¸ª<strong>æ™ºèƒ½å¯¼èˆªä»ª</strong>ï¼Œè‡ªåŠ¨å¸®ä½ ç©¿æ¢­åœ¨å¤§æ¥¼ä¹‹é—´ï¼Œæ‰¾åˆ°é‚£ä¸ªæˆ¿é—´å¹¶å–å‡ºä¸œè¥¿ã€‚</p>
<p>æ ¸å¿ƒå®šä¹‰ï¼šOGNL æ˜¯ä¸€ç§è¡¨è¾¾å¼è¯­è¨€ï¼ˆELï¼‰ï¼Œé€šè¿‡ç®€å•çš„å­—ç¬¦ä¸²è¯­æ³•ï¼Œå°±å¯å­˜å– Java å¯¹è±¡æ ‘ä¸­çš„ä»»æ„å±æ€§ã€è°ƒç”¨æ–¹æ³•ã€ç”šè‡³è¿›è¡Œç®€å•çš„é€»è¾‘è¿ç®—ã€‚</p>
<h2 data-id="heading-4">2 MyBatis ä¸­çš„åŠ¨æ€ SQL</h2>
<p>OGNL æ˜¯ MyBatis åŠ¨æ€ SQL çš„çµé­‚ã€‚</p>
<h3 data-id="heading-5">2.1 ä¸šåŠ¡èƒŒæ™¯</h3>
<p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª<strong>ç”µå•†å¹³å°çš„è®¢å•æœç´¢åŠŸèƒ½</strong>ã€‚ç”¨æˆ·å¯æŒ‰è®¢å•çŠ¶æ€ã€æ—¶é—´èŒƒå›´ã€å…³é”®è¯è¿›è¡Œç­›é€‰ã€‚ä¸ç”¨ OGNLï¼Œå¯èƒ½è¦å†™æ— æ•°ä¸ª <code>if-else</code>ã€‚</p>
<h3 data-id="heading-6">2.2 è½åœ°å®ç°</h3>
<p>MyBatis XML çœ‹åˆ°çš„ test è¡¨è¾¾å¼å°±æ˜¯ OGNLï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;select <span class="hljs-attr">id</span>=<span class="hljs-string">"findOrders"</span> resultType=<span class="hljs-string">"Order"</span>&gt;
   SELECT * FROM orders
   WHERE <span class="hljs-attr">1</span>=<span class="hljs-number">1</span>
   &lt;if <span class="hljs-attr">test</span>=<span class="hljs-string">"status != null and status != ''"</span>&gt;
     AND status = <span class="hljs-comment">#{status}</span>
   &lt;/if&gt;
   &lt;if <span class="hljs-attr">test</span>=<span class="hljs-string">"keywords != null and keywords.length() &gt; 0"</span>&gt;
     AND title LIKE CONCAT('%', <span class="hljs-comment">#{keywords}, '%')</span>
   &lt;/if&gt;
 &lt;/select&gt;
</code></pre>
<p>ä¸ºå•¥è¿™è¦ç”¨ OGNLï¼Ÿå› ä¸ºå®ƒè§£è€¦â€œé€»è¾‘åˆ¤æ–­â€å’Œâ€œSQLâ€ã€‚ä½ æ— éœ€åœ¨ Java ä»£ç é‡Œæ‹¼è£…å­—ç¬¦ä¸²ï¼Œåªéœ€åœ¨ XML é‡Œå†™ç®€å•çš„â€œå¯¼èˆªå…¬å¼â€ï¼ŒOGNL è‡ªåŠ¨å¸®ä½ è§£æå‚æ•°å¯¹è±¡é‡Œçš„å€¼ã€‚</p>
<h2 data-id="heading-7">3 â€œçƒ­ä¿®æ”¹â€ä¸çº¿ä¸Šæ’æŸ¥</h2>
<h3 data-id="heading-8">3.1 ä¸šåŠ¡èƒŒæ™¯</h3>
<p>ä½ çš„å¾®æœåŠ¡å·²ä¸Šçº¿ï¼Œçªç„¶å‘ç°æŸæ¥å£è¿”å›æ•°æ®å¼‚å¸¸ã€‚ä½ æƒ³çŸ¥ï¼š<strong>ç°åœ¨å†…å­˜é‡ŒæŸä¸ªå…¨å±€é…ç½®å˜é‡çš„å€¼åˆ°åº•æ˜¯å¤šå°‘ï¼Ÿ</strong> æˆ–æƒ³åœ¨ä¸é‡å¯æœåŠ¡æ—¶ï¼Œ<strong>ä¸´æ—¶ä¿®æ”¹ä¸€ä¸‹æŸä¸ª Bean çš„å¼€å…³çŠ¶æ€</strong>ã€‚</p>
<h3 data-id="heading-9">3.2 è½åœ°å®ç°ï¼šç»“åˆ Arthas</h3>
<p>Java è¯Šæ–­åˆ©å™¨ <strong>Arthas</strong> æ·±åº¦é›†æˆ OGNLã€‚å¯ç›´æ¥åœ¨å‘½ä»¤è¡Œè¾“å…¥ OGNL è¡¨è¾¾å¼æ¥â€œçª¥æ¢â€è¿è¡Œä¸­çš„ç³»ç»Ÿã€‚</p>
<h4 data-id="heading-10">æŸ¥çœ‹é™æ€å˜é‡çš„å€¼</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹ç±»ä¸­é™æ€å˜é‡çš„å€¼</span>
 ognl <span class="hljs-string">'@com.example.ConfigManager@getConfig().getTimeout()'</span>
</code></pre>
<h4 data-id="heading-11">çº¿ä¸Šâ€œå¼€æŒ‚â€ä¿®æ”¹é…ç½®</h4>
<pre><code class="hljs language-swift" lang="swift"># åŠ¨æ€ä¿®æ”¹çº¿ä¸Šè¿è¡Œä¸­çš„æŸä¸ªå¼€å…³
 ognl '#config<span class="hljs-operator">=</span><span class="hljs-meta">@com</span>.example.<span class="hljs-type">ConfigManager</span><span class="hljs-meta">@instance</span>, #config.setEnableDebug(<span class="hljs-literal">true</span>)'
</code></pre>
<p>å¾®æœåŠ¡æ¶æ„ä¸‹ï¼ŒèŠ‚ç‚¹ä¼—å¤šï¼Œé‡å¯ä»£ä»·å¤§ã€‚åˆ©ç”¨ OGNL çš„<strong>åŠ¨æ€æ‰§è¡Œèƒ½åŠ›</strong>ï¼Œå¯åœ¨ä¸è§¦åŠ¨ä»£ç å‰æä¸‹ï¼Œç²¾å‡†è§‚å¯Ÿå’Œå¹²é¢„ç”Ÿäº§ç¯å¢ƒçš„å¯¹è±¡çŠ¶æ€ã€‚</p>
<h2 data-id="heading-12">4 é¿å‘</h2>
<p>è™½ç„¶ OGNL å¾ˆå¼ºå¤§ï¼Œä½†åœ¨åˆ†å¸ƒå¼è®¾è®¡æ„ï¼š</p>
<h3 data-id="heading-13">æ€§èƒ½æŸè€—</h3>
<p>OGNL æ¯•ç«Ÿæ˜¯åŸºäºåå°„å’Œè§£æçš„ã€‚åœ¨é«˜æ€§èƒ½ã€é«˜å¹¶å‘çš„å†…å±‚å¾ªç¯ä¸­ï¼Œé¢‘ç¹ä½¿ç”¨å¤æ‚çš„è¡¨è¾¾å¼ä¼šå¯¼è‡´ CPU æŠ–åŠ¨ã€‚<strong>æœ€ä½³å®è·µ</strong>ï¼šå¤æ‚çš„é€»è¾‘å°½é‡åœ¨ Java ä»£ç ä¸­å¤„ç†å¥½ï¼Œä¼ ç»™ OGNL çš„åº”è¯¥æ˜¯â€œç»“æœâ€ã€‚</p>
<h3 data-id="heading-14">å®‰å…¨é£é™©</h3>
<p>è¿™å°±æ˜¯è‘—åçš„â€œStruts2 æ¼æ´â€æ ¹æºã€‚å¦‚æœä½ çš„ç³»ç»Ÿå…è®¸ç”¨æˆ·è¾“å…¥ OGNL è¡¨è¾¾å¼å¹¶åœ¨åå°æ‰§è¡Œï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡æ„é€ ç‰¹æ®Šçš„å­—ç¬¦ä¸²ï¼ˆå¦‚æ‰§è¡Œ <code>Runtime.getRuntime().exec("rm -rf /")</code>ï¼‰æ¥æ§åˆ¶ä½ çš„æœåŠ¡å™¨ã€‚<strong>æœ€ä½³å®è·µ</strong>ï¼šç»ä¸è¦å°†ç”¨æˆ·è¾“å…¥çš„å‚æ•°ç›´æ¥ä½œä¸º OGNL è¡¨è¾¾å¼æ‰§è¡Œã€‚</p>
<h2 data-id="heading-15">5 æ€»ç»“</h2>
<p>OGNL ä¸æ˜¯ä»€ä¹ˆæ·±å¥¥çš„æ•°å­¦æ¨¡å‹ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ª**â€œèƒ¶æ°´å·¥å…·â€<strong>ã€‚å®ƒè®©</strong>å­—ç¬¦ä¸²<strong>å’Œ</strong>å†…å­˜å¯¹è±¡**ä¹‹é—´å»ºç«‹äº†ä¸€åº§æ¡¥æ¢ï¼š</p>
<ul>
<li>åœ¨ <strong>MyBatis</strong> é‡Œï¼Œå®ƒæ˜¯ SQL çš„â€œæŒ‡æŒ¥å®˜â€ã€‚</li>
<li>åœ¨ <strong>Arthas</strong> é‡Œï¼Œå®ƒæ˜¯çº¿ä¸Šçš„â€œé€è§†é•œâ€ã€‚</li>
<li>åœ¨ <strong>æ•°æ®æ ¡éªŒ</strong> é‡Œï¼Œå®ƒæ˜¯çµæ´»çš„â€œè§„åˆ™å¼•æ“â€ã€‚</li>
</ul>
<p>æŒæ¡äº† OGNLï¼Œä½ ä¸ä»…èƒ½å†™å‡ºæ›´ä¼˜é›…çš„åŠ¨æ€ SQLï¼Œæ›´èƒ½åœ¨ç³»ç»Ÿå‡ºé—®é¢˜æ—¶ï¼Œé€šè¿‡è¡¨è¾¾å¼ç›´æ¥ä¸å†…å­˜å¯¹è¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RBACä»‹ç»ä»¥åŠå¦‚ä½•è®¾è®¡ä¸€ä¸ªç®€æ˜“ä¸”é«˜å¯ç”¨çš„RBAC1çš„é‰´æƒç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7588146449005461540</link>    <guid>https://juejin.cn/post/7588146449005461540</guid>    <pubDate>2025-12-27T11:32:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588146449005461540" data-draft-id="7588152122186416182" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RBACä»‹ç»ä»¥åŠå¦‚ä½•è®¾è®¡ä¸€ä¸ªç®€æ˜“ä¸”é«˜å¯ç”¨çš„RBAC1çš„é‰´æƒç³»ç»Ÿ"/> <meta itemprop="keywords" content="åç«¯,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-27T11:32:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Thanwinde"/> <meta itemprop="url" content="https://juejin.cn/user/634833993739484"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RBACä»‹ç»ä»¥åŠå¦‚ä½•è®¾è®¡ä¸€ä¸ªç®€æ˜“ä¸”é«˜å¯ç”¨çš„RBAC1çš„é‰´æƒç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/634833993739484/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Thanwinde
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T11:32:52.000Z" title="Sat Dec 27 2025 11:32:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">RBACä»‹ç»ä»¥åŠå¦‚ä½•è®¾è®¡ä¸€ä¸ªç®€æ˜“ä¸”é«˜å¯ç”¨çš„RBAC1çš„é‰´æƒç³»ç»Ÿ</h2>
<h3 data-id="heading-1">ä¸€.RBAC0,RBAC1,RBAC2,RBAC3</h3>
<p>RBACï¼Œå³ä¸º<strong>ä»¥è§’è‰²ä¸ºåŸºç¡€çš„è®¿é—®æ§åˆ¶</strong>ï¼Œä¸åŒäºæŠŠæƒé™èµ‹äºˆç”¨æˆ·ï¼Œè€Œæ˜¯æŠŠæƒé™èµ‹ç»™è§’è‰²ï¼Œç”¨æˆ·è·å¾—è§’è‰²ï¼Œæ˜¯ä¸€ç§éå¸¸çµæ´»çš„é‰´æƒè®¾è®¡</p>
<p>å…¶è®¾è®¡å›´ç»•ç€ <strong>ç”¨æˆ· è§’è‰² æƒé™ï¼ˆåŠŸèƒ½ï¼‰</strong> å±•å¼€</p>
<h4 data-id="heading-2">ï¼ˆä¸€ï¼‰RBAC0</h4>
<p>RBAC0åˆå«<strong>æ‰å¹³ RBACï¼ˆFlat RBACï¼‰</strong> ï¼Œç”¨æˆ·é€šè¿‡è§’è‰²è·å–æƒé™ï¼›é€šè¿‡å¤šå¯¹å¤šåˆ†é…ï¼›ç”¨æˆ·å¯åŒæ—¶ä½¿ç”¨å¤šä¸ªè§’è‰²çš„æƒé™ ï¼›æœ‰ç”¨æˆ·-è§’è‰²å®¡æŸ¥ï¼ˆèƒ½çŸ¥é“ä¸€ä¸ªç”¨æˆ·æœ‰å¤šå°‘è§’è‰²ï¼‰</p>
<p>å‡å¦‚æœ‰è¿™ä¹ˆä¸€ä¸ªæ¶æ„ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5874e142e5234e80b98a95c07e10ae02~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVGhhbndpbmRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767439971&amp;x-signature=lXtHx%2BBpXkLWDpO03JlHXNJmbOo%3D" alt="image-20251227163700084.png" loading="lazy"/></p>
<p>éœ€è¦ç”¨RBAC0å¯¹å…¶è¿›è¡Œé‰´æƒï¼Œç»“æœä¼šæ˜¯è¿™æ ·ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98ccd5c6747f4eeabf31c62f70ef2b0e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVGhhbndpbmRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767439971&amp;x-signature=scddnskH2VTxVi6zJMlsh89Th1M%3D" alt="image-20251227164146052.png" loading="lazy"/></p>
<p>å¦‚ä½ æ‰€è§ï¼Œéå¸¸ä¸‘é™‹ä¸”å¤æ‚</p>
<p><strong>RBAC0ä¸é€‚ç”¨äºå¤„ç†æƒé™å¤ç”¨çš„æƒ…å†µ</strong>ï¼Œæ›´é€‚åº”<strong>æ¯ä¸ªè§’è‰²çš„æƒé™éƒ½ä¸åŒ</strong>çš„æƒ…å†µ</p>
<h4 data-id="heading-3">ï¼ˆäºŒï¼‰RBAC1</h4>
<p>RBAC1åˆå«<strong>å±‚æ¬¡ RBAC(Hierarchical RBAC)</strong> ,<strong>åŒ…å«æ‰å¹³ RBAC</strong> ï¼Œæ”¯æŒè§’è‰²å±‚æ¬¡ç»“æ„ï¼ˆååºå…³ç³»ï¼‰ï¼Œæ”¯æŒä»»æ„å±‚æ¬¡ç»“æ„(2aå‹)ï¼Œæ”¯æŒå—é™å±‚æ¬¡ç»“æ„ï¼ˆå¦‚æ ‘çŠ¶ï¼‰ï¼ˆ2bå‹ï¼‰</p>
<p>ç¿»è¯‘æˆäººè¯å°±æ˜¯åœ¨RBAC0åŠ å…¥äº†<strong>ç»§æ‰¿ç³»ç»Ÿ</strong>ï¼Œä¸¾ä¸ªä¾‹å­ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a8dcef9412045af924d70d95ab9511b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVGhhbndpbmRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767439971&amp;x-signature=0f%2FFdqc%2BbTcIQ%2BaFWswF1QKEYXY%3D" alt="image-20251227164925444.png" loading="lazy"/></p>
<p>è¿™å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„2bå‹çš„RBAC1ç³»ç»Ÿï¼Œè§’è‰²ä¹‹é—´æœ‰<strong>ååº</strong>å…³ç³»ï¼Œå¯ä»¥<strong>ç»§æ‰¿</strong>ï¼šä¸€ä¸ªè§’è‰²å¯ä»¥åŒæ—¶ç»§æ‰¿å¤šä¸ªçˆ¶è§’è‰²çš„æƒé™ï¼Œè·å¾—äº†ç®¡ç†å‘˜æƒé™å°±è·å¾—äº†å•†å®¶ï¼Œç”¨æˆ·çš„æƒé™</p>
<h4 data-id="heading-4">ï¼ˆä¸‰ï¼‰RBAC2</h4>
<p>RBAC2åˆå«<strong>å—é™ RBAC (Constrained RBAC)</strong> ,<strong>åŒ…å«å±‚æ¬¡ RBAC</strong>, å¿…é¡»å¼ºåˆ¶æ‰§è¡ŒèŒè´£åˆ†ç¦»ï¼ˆSODï¼‰,<strong>3a/3b:</strong> åˆ†åˆ«å¯¹åº”ä»»æ„æˆ–å—é™å±‚æ¬¡ç»“æ„ ã€‚</p>
<p>SODé€šè¿‡å°†è¡ŒåŠ¨æˆ–ä»»åŠ¡çš„è´£ä»»å’Œæƒé™åˆ†æ•£ç»™å¤šä¸ªç”¨æˆ·ï¼Œæ¥å‡å°‘æ¬ºè¯ˆå’Œæ„å¤–æŸå®³çš„å¯èƒ½æ€§ ,ä¹Ÿå°±æ˜¯è¯´ä¸èƒ½<strong>å½“é€‰æ‰‹åˆå½“è£åˆ¤</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e731ca0931949e08cf35e404c1356f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVGhhbndpbmRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767439971&amp;x-signature=94ekHgZgXLhQNibGaKHskaDEO4Q%3D" alt="image-20251227165737822.png" loading="lazy"/></p>
<p>æœ¬è´¨ä¸Šå°±æ˜¯RBAC1 + SOD,è¦æ±‚è¦ä¹ˆå…·æœ‰<strong>SSD(é™æ€èŒè´£åˆ†ç¦»ï¼Œç›´æ¥ç¦æ­¢ä½ å½“é€‰æ‰‹åˆå½“è£åˆ¤)</strong> ï¼Œè¦ä¹ˆå…·æœ‰<strong>DSD(åŠ¨æ€èŒè´£åˆ†ç¦»ï¼Œå…è®¸ä½ å½“é€‰æ‰‹åˆå½“è£åˆ¤ï¼Œä½†ä¸èƒ½åŒæ—¶å½“)</strong></p>
<p>è¾ƒä¸ºå¤æ‚ï¼ŒSODé ä¸šåŠ¡å®ç°</p>
<h4 data-id="heading-5">ï¼ˆå››ï¼‰RBAC3</h4>
<p>RBAC3åˆå«<strong>å¯¹ç§° RBAC(Symmetric RBAC)</strong> ,<strong>åŒ…å«å—é™ RBAC</strong> ,æ”¯æŒæƒé™-è§’è‰²å®¡æŸ¥ï¼ˆPermission-Role Reviewï¼‰ï¼Œå…¶æ€§èƒ½éœ€ä¸ç”¨æˆ·-è§’è‰²å®¡æŸ¥ç›¸å½“</p>
<p>ç±»ä¼¼äºRBAC0çš„ç”¨æˆ·-è§’è‰²å®¡æŸ¥ã€‚ç³»ç»Ÿå¿…é¡»èƒ½å¤ŸçŸ¥é“<strong>ç‰¹å®šè§’è‰²åˆ†é…äº†å“ªäº›æƒé™</strong>ï¼Œä»¥åŠ<strong>ç‰¹å®šæƒé™è¢«åˆ†é…ç»™äº†å“ªäº›è§’è‰²</strong></p>
<p>ä¹Ÿå°±æ˜¯åŠ å…¥äº†ä¸€ä¸ª<strong>åæ¨</strong>çš„æ“ä½œï¼Œä¸”æ€§èƒ½è¦ç›¸å½“</p>
<p>æ—¢èƒ½<strong>role-&gt;perms</strong>ï¼Œä¹Ÿèƒ½<strong>perm-&gt;roles</strong></p>
<p>ä¸ºä»€ä¹ˆè¿™é‡Œä¼šå•ç‹¬æå‡ºä¸€ä¸ªåæ¨çš„åŠŸèƒ½ï¼Ÿ</p>
<p>å› ä¸ºå®ƒ<strong>åœ¨å¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æœ¬è´¨ä¸Šå¾ˆéš¾å®ç°</strong>ã€‚</p>
<ul>
<li><strong>éå¯¹ç§°æ€§ï¼š</strong> å¤§å¤šæ•°è®¿é—®æ§åˆ¶ç³»ç»Ÿæ˜¯ä¸ºäº†å¿«é€Ÿå›ç­”â€œç”¨æˆ· X èƒ½åšä»€ä¹ˆï¼Ÿâ€œè€Œä¼˜åŒ–çš„ï¼Œä»¥ä¾¿åœ¨ç”¨æˆ·ç™»å½•æˆ–è®¿é—®èµ„æºæ—¶å¿«é€Ÿé‰´æƒã€‚</li>
<li><strong>åå‘æŸ¥è¯¢æ˜‚è´µï¼š</strong> è¦å›ç­”â€œè°æ‹¥æœ‰æƒé™ Yï¼Ÿâ€ï¼Œé€šå¸¸éœ€è¦åå‘éå†æ•´ä¸ªæƒé™æ˜ å°„è¡¨ã€‚åœ¨æ‹¥æœ‰æˆåƒä¸Šä¸‡ä¸ªæƒé™å’Œè§’è‰²çš„ç³»ç»Ÿä¸­ï¼Œå¦‚æœç³»ç»Ÿæ¶æ„ä¸æ”¯æŒåŒå‘ç´¢å¼•ï¼Œè¿™ç§æŸ¥è¯¢çš„æ€§èƒ½æ¶ˆè€—å·¨å¤§ï¼Œç±»ä¼¼äºæ•°æ®åº“ä¸­çš„å…¨è¡¨æ‰«æã€‚</li>
</ul>
<h3 data-id="heading-6">å¦‚ä½•è®¾è®¡ä¸€ä¸ªé«˜å¯ç”¨çš„RBAC1ç³»ç»Ÿ</h3>
<p>é¦–å…ˆï¼Œåœ¨ä½ è¦è®¾è®¡å‰ï¼Œä½ åº”å½“çŸ¥é“ä½ ä»¬ä¸šåŠ¡çš„éœ€æ±‚æ¥å†³å®šåº”è¯¥é€‰ç”¨å“ªä¸€ä¸ªçº§åˆ«çš„RBAC</p>
<p>å®é™…ä¸Šï¼Œåœ¨çœŸæ­£çš„ç”Ÿäº§åº”ç”¨é˜¶æ®µï¼Œ<strong>ç»å¤§å¤šæ•°ä¼ä¸šéƒ½æ˜¯é‡‡ç”¨åŸºäºRBAC1ï¼ŒRBAC0æˆ–å…¶å˜ç§å†åŠ ä¸ŠRBAC3çš„åæ¨</strong>ï¼Œå› ä¸º<strong>SODï¼Œå±‚çº§å…¶å®å¾ˆéš¾å®ç°</strong></p>
<p>ä½†æ— è®ºå¦‚ä½•ï¼ŒRBACé‰´æƒç³»ç»Ÿçš„æ€è·¯å…¶å®å¤§å·®ä¸å·®ï¼š<strong>è®¿é—®å¿«é€Ÿï¼Œèƒ½æ‰¿å—ä¸€å®šå‹åŠ›ï¼Œå†…å­˜å ç”¨ä¸å¤§ï¼Œæ”¯æŒçƒ­ä¿®æ”¹ï¼Œæ”¯æŒåˆ†å¸ƒå¼</strong></p>
<p>è¿™é‡Œæˆ‘ä»¥ä¸€ä¸ªæ ‡å‡†çš„RBAC1è¿›è¡Œæ¼”ç¤º</p>
<h4 data-id="heading-7">ï¼ˆä¸€ï¼‰ç³»ç»Ÿåˆ†æ</h4>
<p>è¿™é‡Œä»¥Javaä¸ºä¾‹</p>
<p>é¦–å…ˆï¼Œé‰´æƒç³»ç»Ÿå¿…é¡»å¤„äºç³»ç»Ÿ<strong>æœ€å‰æ–¹</strong>ï¼Œä½†æ˜¯æœ‰äº›æ¥å£å¹¶ä¸éœ€è¦é‰´æƒï¼Œå¦‚ä½•å®ç°ï¼Ÿæˆ‘ä»¬å¤§å¯ä»¥æŠŠé‰´æƒæ”¾åœ¨<strong>æ‹¦æˆªå™¨</strong>ï¼Œç„¶ååƒSpringSecurityé‚£æ ·ç»´æŠ¤ä¸€ä¸ª<strong>åŒ¹é…è¡¨åŒ¹é…å“ªäº›URLè¦é‰´æƒ</strong>ï¼Œ<strong>å“ªäº›URLè¦ä»€ä¹ˆè§’è‰²æ¥è®¿é—®</strong>ï¼Œä½†æ—¢ç„¶å¼•å…¥äº†RBACï¼Œæœ¬èº«å°±æ˜¯ä¸ºäº†<strong>æ›´æ–¹ä¾¿æ›´ç»†ç²’åº¦</strong>çš„å»é‰´æƒã€‚è¿™é‡Œæˆ‘ç»™å‡ºçš„æ–¹æ³•æ˜¯è®¾è®¡ä¸€ä¸ª<strong>æ³¨è§£</strong>ï¼Œ<strong>æ³¨è§£å‚æ•°</strong>æ˜¯è®¿é—®æ­¤æ¥å£æ‰€éœ€çš„æƒé™ï¼Œç”¨<strong>AOP</strong>æ‹¦æˆªå…·æœ‰è¿™ä¸ªæ³¨é‡Šçš„æ–¹æ³•ï¼Œæ£€æŸ¥è®¿é—®çš„Useræœ‰æ²¡æœ‰æƒé™</p>
<p>ä¸ºäº†è·å¾—è®¿é—®çš„userIdï¼Œå¯ä»¥é‡‡ç”¨ThreadLocalæ¥å­˜å‚¨ï¼Œåœ¨ç½‘å…³æˆªå–Tokenæ”¾å…¥Threadlocal</p>
<p>ä½†æˆ‘è¿™é‡Œå»ºè®®ä¸è¦ç”¨ThreadLocalï¼Œç›´æ¥åœ¨è¯·æ±‚ä¸­æ³¨å…¥userIdåˆ°è¯·æ±‚å‚æ•°ä¸­ï¼ŒAOPä¸­å°±ä»è¯·æ±‚å‚æ•°ä¸­æ‹¿å¸¦userIdï¼Œè¿™æ ·ç”¨ç€æ›´åŠ æ–¹ä¾¿ï¼Œä¹Ÿé¿å…äº†ThreadLocal<strong>å†…å­˜æ³„æ¼</strong>çš„é£é™©ï¼ˆæ¦‚ç‡æä½ï¼‰</p>
<p>å…·ä½“æ¥è¯´ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Target</span>(ElementType.PARAMETER)
<span class="hljs-variable">@Retention</span>(RetentionPolicy.RUNTIME)
public <span class="hljs-variable">@interface</span> CurrentUserId {
}
</code></pre>
<p>è¿™ä¸ªæ³¨é‡Šç”¨æ¥æ”¾åœ¨userIdå‰ï¼Œç”¨äºAOPæ‹¿åˆ°userIdï¼Œå¦åˆ™å°±éœ€è¦ä»å…ƒæ•°æ®ä¸­æ‹¿ï¼Œéå¸¸ä¸ä¾¿</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Target</span>(ElementType.METHOD) <span class="hljs-comment">// ä½œç”¨åœ¨æ–¹æ³•ä¸Š</span>
<span class="hljs-variable">@Retention</span>(RetentionPolicy.RUNTIME) <span class="hljs-comment">// è¿è¡Œæ—¶æœ‰æ•ˆ</span>
public <span class="hljs-variable">@interface</span> RequirePermission {
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * éœ€è¦çš„æƒé™æ ‡è¯†ï¼Œä¾‹å¦‚: {"user:add", "user:edit"}
 Â  Â  */</span>
 Â  Â <span class="hljs-selector-tag">String</span><span class="hljs-selector-attr">[]</span> <span class="hljs-selector-tag">value</span>();
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * æ ¡éªŒé€»è¾‘ï¼šAND (æ‰€æœ‰æƒé™éƒ½è¦æœ‰) / OR (åªè¦æœ‰ä¸€ä¸ªæƒé™å³å¯)
 Â  Â  * é»˜è®¤ä¸º AND
 Â  Â  */</span>
 Â  Â <span class="hljs-selector-tag">Logical</span> <span class="hljs-selector-tag">logical</span>() <span class="hljs-selector-tag">default</span> <span class="hljs-selector-tag">Logical</span><span class="hljs-selector-class">.AND</span>;
â€‹
 Â  Â <span class="hljs-selector-tag">enum</span> <span class="hljs-selector-tag">Logical</span> {
 Â  Â  Â  Â <span class="hljs-selector-tag">AND</span>, <span class="hljs-selector-tag">OR</span>
 Â   }
}
</code></pre>
<p>è¿™é‡Œæ”¯æŒ æˆ–ï¼Œä¸</p>
<pre><code class="hljs language-ini" lang="ini">@Before("@annotation(top.twindworld.treeauthority.demos.aop.annotation.RequirePermission)")
public void checkPermission(JoinPoint point) {
 Â  Â // 1. è·å–æ³¨è§£è¯¦æƒ…
 Â  Â MethodSignature <span class="hljs-attr">signature</span> = (MethodSignature) point.getSignature()<span class="hljs-comment">;</span>
 Â  Â Method <span class="hljs-attr">method</span> = signature.getMethod()<span class="hljs-comment">;</span>
 Â  Â RequirePermission <span class="hljs-attr">annotation</span> = method.getAnnotation(RequirePermission.class)<span class="hljs-comment">;</span>
 Â  Â if (<span class="hljs-attr">annotation</span> == null) {
 Â  Â  Â  Â return<span class="hljs-comment">;</span>
 Â   }
â€‹
 Â  Â // 2. è·å–å½“å‰ç™»å½•ç”¨æˆ·æ‹¥æœ‰çš„æƒé™é›†åˆ (ä» è¯·æ±‚ ä¸­æ‹¿)
â€‹
 Â  Â Annotation<span class="hljs-section">[]</span><span class="hljs-section">[]</span> <span class="hljs-attr">paramAnnotations</span> = method.getParameterAnnotations()<span class="hljs-comment">;</span>
 Â  Â // è·å–æ‰€æœ‰å‚æ•°å€¼
 Â  Â Object<span class="hljs-section">[]</span> <span class="hljs-attr">args</span> = point.getArgs()<span class="hljs-comment">;</span>
 Â  Â Long <span class="hljs-attr">currentUserId</span> = null<span class="hljs-comment">;</span>
 Â  Â for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; paramAnnotations.length; i++) {</span>
 Â  Â  Â  Â for (Annotation a : paramAnnotations<span class="hljs-section">[i]</span>) {
 Â  Â  Â  Â  Â  Â if (a instanceof CurrentUserId) {
 Â  Â  Â  Â  Â  Â  Â  Â // æ‰¾åˆ°äº†ï¼è¿”å›å¯¹åº”çš„å‚æ•°å€¼
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">currentUserId</span> = (Long) args[i]<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â break<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
 Â   }
 Â  Â if (<span class="hljs-attr">currentUserId</span> == null) {
 Â  Â  Â  Â throw new NoAuthorityException(401,"æ— æ³•è·å–å½“å‰ç”¨æˆ· IDï¼Œæƒé™æ ¡éªŒå¤±è´¥")<span class="hljs-comment">;</span>
 Â   }
 Â  Â Set&lt;String&gt; <span class="hljs-attr">roleKeys</span> = redisAuthorityService.getUserRoleKeys(currentUserId)<span class="hljs-comment">;</span>
 Â  Â if (<span class="hljs-attr">roleKeys</span> == null || roleKeys.isEmpty()) {
 Â  Â  Â  Â throw new NoAuthorityException(403, "ç”¨æˆ·æš‚æ— è§’è‰²æƒé™")<span class="hljs-comment">;</span>
 Â   }
â€‹
 Â  Â // 3. è·å–æ¥å£è¦æ±‚çš„æƒé™
 Â  Â String<span class="hljs-section">[]</span> <span class="hljs-attr">requiredPerms</span> = annotation.value()<span class="hljs-comment">;</span>
 Â  Â RequirePermission.Logical <span class="hljs-attr">logical</span> = annotation.logical()<span class="hljs-comment">;</span>
â€‹
 Â  Â // 4. å¼€å§‹æ ¡éªŒ
 Â  Â HashSet&lt;String&gt; <span class="hljs-attr">functionSet</span> = new HashSet&lt;&gt;()<span class="hljs-comment">;</span>
 Â  Â for (String roleKey : roleKeys) {
 Â  Â  Â  Â functionSet.addAll(redisAuthorityService.getRoleFunctionKeys(roleKey))<span class="hljs-comment">;</span>
 Â   }
 Â  Â check(functionSet, requiredPerms, logical)<span class="hljs-comment">;</span>
}
</code></pre>
<p>ç”¨çš„æ—¶å€™å°±åªéœ€è¦è¿™æ ·ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@GetMapping</span>(<span class="hljs-string">"/hello"</span>)
<span class="hljs-variable">@RequirePermission</span>(value = {<span class="hljs-string">"user:manage"</span>}, logical = RequirePermission.Logical.<span class="hljs-keyword">AND</span>)
public String <span class="hljs-built_in">hello</span>(<span class="hljs-variable">@CurrentUserId</span> Long userId) {
 Â  Â <span class="hljs-selector-tag">return</span> Â "<span class="hljs-selector-tag">hello</span>";
}
</code></pre>
<p>éå¸¸çš„ç®€å•æ–¹ä¾¿ï¼</p>
<h4 data-id="heading-8">ï¼ˆäºŒï¼‰é‰´æƒæµç¨‹åˆ†æ</h4>
<p>é‰´æƒéœ€è¦æœ‰ <strong>è®¿é—®å¿«é€Ÿï¼Œèƒ½æ‰¿å—ä¸€å®šå‹åŠ›ï¼Œå†…å­˜å ç”¨ä¸å¤§ï¼Œæ”¯æŒçƒ­ä¿®æ”¹ï¼Œæ”¯æŒåˆ†å¸ƒå¼</strong>çš„ç‰¹ç‚¹ï¼Œé‚£<strong>Redis</strong>ä¾¿æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„ä¸€ä¸ªé€‰æ‹©</p>
<p>æˆ‘ä»¬ç»´æŠ¤ <strong>user:{userId} = Set(roleKey)</strong> å’Œ <strong>role:{roleKey} = Set(functionKey)</strong></p>
<p>å‡å¦‚æœ‰ä¸€ä¸ªç”¨æˆ·è¿›æ¥ï¼Œæˆ‘ä»¬æ ¹æ®å…¶userIdåˆ°RedisæŸ¥å…¶roleï¼Œå†æ ¹æ®å…¶roleå»æ‹¿åˆ°å¯¹åº”çš„functionKey,ç„¶åæ¯”å¯¹è¯¥æ³¨é‡Šä¸­è¦æ±‚çš„åŠŸèƒ½ï¼ˆæƒé™ï¼‰è¿™ä¸ªç”¨æˆ·æ»¡ä¸æ»¡è¶³ï¼Œæ»¡è¶³çš„è¯å°±æ”¾è¡Œï¼Œåä¹‹æ‹¦æˆª</p>
<p>æ€è·¯å¾ˆç®€å•ï¼Œä½†æœ‰å¾ˆå¤šç»†èŠ‚ï¼š<strong>ç”¨æˆ·çš„roleæ˜¯æœ‰ç»§æ‰¿å…³ç³»çš„</strong>ï¼Œå‡å¦‚ä¸€ç”¨æˆ·æœ‰ä¸€ä¸ªroleæ˜¯adminï¼Œä»–å¯èƒ½ç»§æ‰¿äº†æ¥ç€å•†å®¶ï¼Œç”¨æˆ·çš„ä¼—å¤šfunctionsï¼ŒRedisé‡Œé¢çš„role-&gt;functionsä¹Ÿå¿…é¡»æ˜¯<strong>å·±ç»§æ‰¿</strong>çš„ï¼Œä¸ç„¶æ¯ä¸€æ¬¡é‰´æƒéƒ½è¦å»<strong>é€’å½’ç»§æ‰¿</strong></p>
<p>è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ä¸ºäº†è¯»è€Œç‰ºç‰²å†™ï¼Œä½†é‰´æƒæœ¬èº«å°±æ˜¯æ›´å€¾å‘äºè¯»</p>
<p>åœ¨<strong>ä¿®æ”¹roleçš„functions</strong>æ—¶ï¼Œéœ€è¦é€’å½’çš„ä¿®æ”¹å…¶<strong>çˆ¶è§’è‰²ï¼ˆç»§æ‰¿å®ƒçš„è§’è‰²ï¼‰</strong> çš„functionsï¼Œè¿™æ˜¯ä¸€ä¸ªè¾ƒä¸ºæ¶ˆè€—æ€§èƒ½çš„æ“ä½œï¼Œä½†æ˜¯roleæœ¬èº«æ•°æ®<strong>ä¸å¤š</strong>ï¼Œè¿˜èƒ½æ¥å—</p>
<p>ä¸é‡‡ç”¨<strong>user-&gt;functions</strong>çš„ç†ç”±æ˜¯ï¼Œéšå»äº†roleï¼Œå¯¼è‡´ä¿®æ”¹roleçš„æ—¶å€™éœ€è¦æœ‰ä¸€ä¸ª<strong>åå‘ç´¢å¼•</strong>å»æ‰¾åˆ°è¯¥roleçš„userï¼Œè¿™æå…¶æ¶ˆè€—æ€§èƒ½ï¼Œè€Œä¸”useræ•°é‡ä¼—å¤šï¼Œ<strong>å¾ˆå ç”¨å†…å­˜</strong>ï¼Œè¿™ä¹Ÿå°±æ˜¯RBAC3çš„é—®é¢˜</p>
<p>è€Œä¸”ä¸ºäº†èŠ‚çœå†…å­˜ï¼Œ<strong>user-&gt;role</strong>ä¹Ÿåº”è¯¥é‡‡ç”¨æ‡’åŠ è½½ï¼Œä¸ç„¶ç”¨æˆ·æ•°ä¸€å¤šï¼Œä¸€æ¬¡åŠ è½½ç›´æ¥å¡æ­»</p>
<p>å¯¹äºTTLï¼Œ<strong>user-&gt;role</strong>åº”è¯¥æœ‰TTLï¼Œä¸€å¤©åŠå¤©éƒ½å¯ï¼Œ<strong>role-&gt;functions</strong>å¯ä»¥æŠŠTTLè®¾ä¸ºè¾ƒé•¿ï¼Œå› ä¸ºè¿™ä¸ªæ•°æ®æœ¬èº«ä¿®æ”¹çš„é¢‘ç‡ä¸å¤§ï¼Œåœ¨ä¿®æ”¹çš„æ—¶å€™ä¿®æ”¹å³å¯</p>
<p>ä¸‹é¢æ˜¯æµç¨‹å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/25549a17e18b4002a2bde2c7115c4a00~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVGhhbndpbmRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767439971&amp;x-signature=iF0f6O2beo2Lzho8QU9mf%2BAgh9E%3D" alt="image-20251227190322808.png" loading="lazy"/></p>
<p>ä¿®æ”¹æµç¨‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82f1e18f1caa46bbb78e9d7a9e5949a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVGhhbndpbmRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767439971&amp;x-signature=WUY6ELUfdCzW%2BCYa1lvTEOxyBJk%3D" alt="image-20251227191152465.png" loading="lazy"/></p>
<hr/>
<p>å¤§è‡´æµç¨‹ä¾¿æ˜¯å¦‚æ­¤ï¼Œå¯¹äºRBACçš„æ›´è¯¦ç»†çš„ä»‹ç»å¯ä»¥çœ‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fcsrc.nist.gov%2FCSRC%2Fmedia%2FPublications%2Fconference-paper%2F2000%2F07%2F26%2Fthe-nist-model-for-role-based-access-control-towards-a-unified-%2Fdocuments%2Fsandhu-ferraiolo-kuhn-00.pdf" target="_blank" title="https://csrc.nist.gov/CSRC/media/Publications/conference-paper/2000/07/26/the-nist-model-for-role-based-access-control-towards-a-unified-/documents/sandhu-ferraiolo-kuhn-00.pdf" ref="nofollow noopener noreferrer">The NIST Model for Role-Based Access Control: Towards a Unified Standard</a></p>
<p>ä¹Ÿå¯ä»¥çœ‹æˆ‘åœ¨githubä¸­çš„å°demoï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FThanwinde%2Ftree-authority" target="_blank" title="https://github.com/Thanwinde/tree-authority" ref="nofollow noopener noreferrer">Thanwinde/tree-authority: ä¸€ä¸ªç®€å•çš„åŸºäºRBAC1çš„é‰´æƒç³»ç»Ÿ</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ‰ TRAE ä¸€å¹´ä½¿ç”¨çš„è¿‡ç¨‹ä½“éªŒ ğŸ‰]]></title>    <link>https://juejin.cn/post/7588124225701953576</link>    <guid>https://juejin.cn/post/7588124225701953576</guid>    <pubDate>2025-12-28T01:48:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588124225701953576" data-draft-id="7588043318360031267" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ‰ TRAE ä¸€å¹´ä½¿ç”¨çš„è¿‡ç¨‹ä½“éªŒ ğŸ‰"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-28T01:48:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§çŸ¥é—²é—²i"/> <meta itemprop="url" content="https://juejin.cn/user/3799545205237111"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ‰ TRAE ä¸€å¹´ä½¿ç”¨çš„è¿‡ç¨‹ä½“éªŒ ğŸ‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3799545205237111/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§çŸ¥é—²é—²i
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T01:48:37.000Z" title="Sun Dec 28 2025 01:48:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€ï¼šç¼–è¯‘é©å‘½ï¼Œæ™ºé€ æœªæ¥</h2>
<p>åœ¨2025å¹´çš„æ•°å­—æµªæ½®ä¸­ï¼Œæˆ‘ä»¬è¿æ¥äº†ä¸€åœºç¼–ç¨‹èŒƒå¼çš„é©å‘½â€”â€”TRAE AIç¼–è¯‘å™¨ï¼Œè¿™ä¸æ˜¯ä¸€æ¬¡ç®€å•çš„æŠ€æœ¯è¿­ä»£ï¼Œè€Œæ˜¯ä¸€æ¬¡å¼€å‘è€…ä½“éªŒçš„é‡å­é£è·ƒï¼è®©æˆ‘ä»¬æ­å¼€è¿™åœºæ™ºèƒ½ç¼–è¯‘é©å‘½çš„ç¥ç§˜é¢çº±ã€‚</p>
<h2 data-id="heading-1">1.TRAE AIç¼–è¯‘å™¨æ™ºèƒ½ç†è§£å¼•æ“</h2>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// 2025å¹´ä½ çš„é«˜å…‰æ—¶åˆ»</span>
<span class="hljs-keyword">const</span> yourMilestones = {
  <span class="hljs-attr">fastestCompile</span>: {
    <span class="hljs-attr">date</span>: <span class="hljs-string">"2025-03-15"</span>,
    <span class="hljs-attr">project</span>: <span class="hljs-string">"xxxxæ¡†æ¶"</span>,
    <span class="hljs-attr">time</span>: <span class="hljs-string">"0.8ç§’"</span>,
    <span class="hljs-attr">achievement</span>: <span class="hljs-string">"ğŸš€ æ‰“ç ´ä¸ªäººæœ€å¿«ç¼–è¯‘è®°å½•"</span>
  },
  <span class="hljs-attr">biggestOptimization</span>: {
    <span class="hljs-attr">date</span>: <span class="hljs-string">"2025-07-22"</span>, 
    <span class="hljs-attr">project</span>: <span class="hljs-string">"æ•°æ®å¯è§†åŒ–å¹³å°"</span>,
    <span class="hljs-attr">improvement</span>: <span class="hljs-string">"ç¼–è¯‘æ—¶é—´å‡å°‘76%"</span>,
    <span class="hljs-attr">memory</span>: <span class="hljs-string">"å†…å­˜å ç”¨é™ä½62%"</span>
  },
  <span class="hljs-attr">mostComplexProject</span>: {
    <span class="hljs-attr">date</span>: <span class="hljs-string">"2025-10-30"</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">"æ™ºèƒ½åŸå¸‚ç®¡ç†ç³»ç»Ÿ"</span>,
    <span class="hljs-attr">languages</span>: [<span class="hljs-string">"TypeScript"</span>, <span class="hljs-string">"Python"</span>, <span class="hljs-string">"Rust"</span>],
    <span class="hljs-attr">modules</span>: <span class="hljs-number">89</span>,
    <span class="hljs-attr">lines</span>: <span class="hljs-string">"42,317è¡Œ"</span>
  }
  <span class="hljs-comment">//åœ¨å†™æ•°æ®çš„æ—¶å€™TRAEæ™ºèƒ½æ¨èï¼šç®€æ´é«˜æ•ˆ âœ…</span>
};

<span class="hljs-comment">// TRAEç‹¬æœ‰çš„è·¨è¯­è¨€æ™ºèƒ½ä¼˜åŒ–</span>
<span class="hljs-comment">// è‡ªåŠ¨è¯†åˆ«å„è¯­è¨€æœ€ä½³ç‰¹æ€§å¹¶èåˆ</span>
â€‹
<span class="hljs-comment">// TypeScript + Pythoné£æ ¼æ··åˆï¼ˆTRAEæ™ºèƒ½æ¡¥æ¥ï¼‰</span>
<span class="hljs-meta">@decorator</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> processData&lt;T&gt;(<span class="hljs-attr">data</span>: T[]): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Result</span>&gt; {
    <span class="hljs-comment">// è‡ªåŠ¨ç±»å‹æ¨æ–­ + Pythonå¼åˆ—è¡¨æ¨å¯¼</span>
    <span class="hljs-keyword">const</span> filtered = data.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> <span class="hljs-title function_">isValid</span>(x))
                         .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> <span class="hljs-title function_">transform</span>(x));
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">processBatch</span>(filtered);
}
</code></pre>
<p><strong>ç”¨æˆ·å¿ƒå£°ï¼š</strong></p>
<blockquote>
<p>"å°±åƒæœ‰ä¸ªç¼–ç¨‹å¤§å¸ˆåœ¨æ—è¾¹æŒ‡å¯¼ï¼ŒTRAEèƒ½ç†è§£æˆ‘çš„æ„å›¾ï¼Œè€Œä¸ä»…ä»…æ˜¯æ‰§è¡ŒæŒ‡ä»¤ï¼"</p>
<p>åŸæœ¬è‡ªå·±æ•´ç†æ•°æ®æ„å»º45åˆ†é’Ÿï¼Œç°åœ¨å¹³å‡åªè¦25åˆ†é’Ÿã€‚æ•ˆç‡ç›´æ¥ç¿»å€ï¼"</p>
</blockquote>
<pre><code class="hljs language-markdown" lang="markdown">TRAEæ™ºèƒ½ç¼–è¯‘æ¨¡å¼ï¼š
  æ™ºèƒ½æ¨¡å¼:
<span class="hljs-bullet">    -</span> è‡ªåŠ¨åˆ†æé¡¹ç›®ç»“æ„
<span class="hljs-bullet">    -</span> åŠ¨æ€è°ƒæ•´ä¼˜åŒ–ç­–ç•¥
<span class="hljs-bullet">    -</span> å­¦ä¹ å›¢é˜Ÿåä½œæ¨¡å¼
  
  æ€§èƒ½æ¨¡å¼:
<span class="hljs-bullet">    -</span> æé™é€Ÿåº¦ä¼˜åŒ–
<span class="hljs-bullet">    -</span> æ¿€è¿›ç¼“å­˜ç­–ç•¥
<span class="hljs-bullet">    -</span> å¹¶è¡Œç¼–è¯‘åŠ é€Ÿ
<span class="hljs-code">    
  èŠ‚èƒ½æ¨¡å¼:
    - æ™ºèƒ½èµ„æºç®¡ç†
    - åå°é™é»˜ç¼–è¯‘
    - ç”µæ± å‹å¥½ä¼˜åŒ–
</span></code></pre>
<h2 data-id="heading-2">âš¡ æ•ˆç‡æå‡æ—¶é—´çº¿</h2>
<h3 data-id="heading-3">ğŸ“… 2025å¹´æˆé•¿è½¨è¿¹</h3>
<h3 data-id="heading-4">ğŸ“¸ å¹´åº¦æ—¶åˆ»å›é¡¾</h3>
<pre><code class="hljs language-markdown" lang="markdown">âœ¨ éš¾å¿˜çš„ç¼–è¯‘ç¬é—´ï¼š
<span class="hljs-bullet">1.</span> æœ€å¤æ‚çš„ç¼–è¯‘ï¼šæ¶‰åŠ89ä¸ªæ¨¡å—ï¼Œ42ç§’å®Œæˆ
<span class="hljs-bullet">2.</span> æœ€ç¥å¥‡çš„ä¼˜åŒ–ï¼šä¸€è¡Œå»ºè®®èŠ‚çœ3å°æ—¶å·¥ä½œé‡  
<span class="hljs-bullet">3.</span> æœ€åŠæ—¶çš„é¢„è­¦ï¼šé˜»æ­¢äº†çº¿ä¸Šé‡å¤§æ•…éšœ
<span class="hljs-bullet">4.</span> æœ€è‡ªè±ªçš„é¡¹ç›®ï¼šä¸ºå¼€æºç¤¾åŒºè´¡çŒ®æ ¸å¿ƒä¼˜åŒ–
</code></pre>
<blockquote>
<p><strong>"ä¼˜é›…çš„ä»£ç ä¸ä»…è¦èƒ½è¿è¡Œï¼Œæ›´è¦ä¼šæ€è€ƒ"</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React 18 æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š5ä¸ªè¢«ä½ä¼°çš„Hooksç”¨æ³•è®©ä½ çš„åº”ç”¨å¿«30%]]></title>    <link>https://juejin.cn/post/7588093282530721844</link>    <guid>https://juejin.cn/post/7588093282530721844</guid>    <pubDate>2025-12-28T00:16:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588093282530721844" data-draft-id="7588092534162276352" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React 18 æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š5ä¸ªè¢«ä½ä¼°çš„Hooksç”¨æ³•è®©ä½ çš„åº”ç”¨å¿«30%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-28T00:16:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React 18 æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š5ä¸ªè¢«ä½ä¼°çš„Hooksç”¨æ³•è®©ä½ çš„åº”ç”¨å¿«30%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T00:16:45.000Z" title="Sun Dec 28 2025 00:16:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>React 18 æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š5ä¸ªè¢«ä½ä¼°çš„Hooksç”¨æ³•è®©ä½ çš„åº”ç”¨å¿«30%</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>React 18å¸¦æ¥äº†è®¸å¤šä»¤äººå…´å¥‹çš„æ–°ç‰¹æ€§ï¼Œå°¤å…¶æ˜¯å¹¶å‘æ¸²æŸ“ï¼ˆConcurrent Renderingï¼‰å’Œè‡ªåŠ¨æ‰¹å¤„ç†ï¼ˆAutomatic Batchingï¼‰ç­‰èƒ½åŠ›ï¼Œè¿›ä¸€æ­¥æå‡äº†åº”ç”¨çš„æ€§èƒ½ã€‚ç„¶è€Œï¼Œè®¸å¤šå¼€å‘è€…åœ¨ä½¿ç”¨Hooksæ—¶ä»åœç•™åœ¨åŸºç¡€å±‚é¢ï¼Œæœªèƒ½å……åˆ†åˆ©ç”¨å…¶æ½œåŠ›ã€‚äº‹å®ä¸Šï¼ŒReact Hooksçš„è®¾è®¡åˆè¡·ä¸ä»…æ˜¯ä¸ºäº†ç®€åŒ–çŠ¶æ€é€»è¾‘çš„å¤ç”¨ï¼Œè¿˜éšè—äº†è®¸å¤šå¯ä»¥æ˜¾è‘—æå‡æ€§èƒ½çš„æŠ€å·§ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨5ä¸ªè¢«ä½ä¼°çš„Hooksç”¨æ³•ï¼Œç»“åˆå®æˆ˜æ¡ˆä¾‹å’Œæ€§èƒ½åˆ†æï¼Œå¸®åŠ©ä½ è§£é”Reactåº”ç”¨çš„é¢å¤–æ€§èƒ½æ½œåŠ›ã€‚è¿™äº›æŠ€å·§ç»è¿‡å®é™…é¡¹ç›®éªŒè¯ï¼Œåˆç†ä½¿ç”¨åç”šè‡³èƒ½è®©åº”ç”¨é€Ÿåº¦æå‡30%ä»¥ä¸Šã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸»ä½“</h2>
<h3 data-id="heading-3">1. <code>useMemo</code> + <code>useCallback</code>ï¼šé¿å…ä¸å¿…è¦çš„å­ç»„ä»¶é‡æ¸²æŸ“</h3>
<h4 data-id="heading-4">é—®é¢˜èƒŒæ™¯</h4>
<p>åœ¨Reactä¸­ï¼Œçˆ¶ç»„ä»¶çš„çŠ¶æ€æ›´æ–°ä¼šå¯¼è‡´æ‰€æœ‰å­ç»„ä»¶é»˜è®¤é‡æ–°æ¸²æŸ“ï¼Œå³ä½¿å­ç»„ä»¶çš„propså¹¶æœªå˜åŒ–ã€‚è¿™ç§â€œè¿‡åº¦æ¸²æŸ“â€åœ¨å¤æ‚åº”ç”¨ä¸­ä¼šå¸¦æ¥æ˜æ˜¾çš„æ€§èƒ½æŸè€—ã€‚</p>
<h4 data-id="heading-5">ä¼˜åŒ–æ–¹æ¡ˆ</h4>
<p>é€šè¿‡<code>useMemo</code>å’Œ<code>useCallback</code>ç¼“å­˜å€¼å’Œå‡½æ•°ï¼Œå¯ä»¥é¿å…å­ç»„ä»¶çš„æ— æ•ˆæ¸²æŸ“ï¼š</p>
<ul>
<li><code>useMemo</code>ï¼šç¼“å­˜è®¡ç®—ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—ã€‚</li>
<li><code>useCallback</code>ï¼šç¼“å­˜å‡½æ•°å¼•ç”¨ï¼Œé¿å…å› å‡½æ•°é‡æ–°åˆ›å»ºå¯¼è‡´çš„å­ç»„ä»¶æ›´æ–°ã€‚</li>
</ul>
<h4 data-id="heading-6">ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">ExpensiveComponent</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">memo</span>(<span class="hljs-function">(<span class="hljs-params">{ compute, data }</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">compute</span>(data);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{result}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
});

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> data = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], []); <span class="hljs-comment">// ç¼“å­˜æ•°æ®</span>
  <span class="hljs-keyword">const</span> compute = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> data.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b), []); <span class="hljs-comment">// ç¼“å­˜å‡½æ•°</span>

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(c =&gt; c + 1)}&gt;Click {count}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ExpensiveComponent</span> <span class="hljs-attr">compute</span>=<span class="hljs-string">{compute}</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-7">æ€§èƒ½æ”¶ç›Š</h4>
<ul>
<li><strong>å‡å°‘å­ç»„ä»¶æ¸²æŸ“æ¬¡æ•°</strong>ï¼šé€šè¿‡<code>React.memo</code>é…åˆ<code>useCallback</code>å’Œ<code>useMemo</code>ï¼Œå¯ä»¥é¿å…å› çˆ¶ç»„ä»¶æ— å…³çŠ¶æ€æ›´æ–°å¯¼è‡´çš„å­ç»„ä»¶é‡æ¸²æŸ“ã€‚</li>
<li><strong>é™ä½è®¡ç®—å¼€é”€</strong>ï¼šå¯¹äºå¤æ‚è®¡ç®—æˆ–å¤§æ•°æ®å¤„ç†ï¼Œ<code>useMemo</code>èƒ½æ˜¾è‘—å‡å°‘é‡å¤è®¡ç®—çš„å¼€é”€ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-8">2. <code>useTransition</code>ï¼šä¼˜å…ˆå¤„ç†é«˜ä¼˜å…ˆçº§æ›´æ–°</h3>
<h4 data-id="heading-9">Reactå¹¶å‘ç‰¹æ€§çš„æ ¸å¿ƒHook</h4>
<p>Reactå¼•å…¥å¹¶å‘æ¨¡å¼çš„æ ¸å¿ƒç›®æ ‡ä¹‹ä¸€æ˜¯è®©åº”ç”¨èƒ½å¤ŸåŒºåˆ†â€œç´§æ€¥â€å’Œâ€œéç´§æ€¥â€æ›´æ–°ã€‚ä¾‹å¦‚ï¼šç”¨æˆ·åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥æ˜¯ç´§æ€¥ä»»åŠ¡ï¼›è€Œæœç´¢ç»“æœçš„è¿‡æ»¤å¯èƒ½æ˜¯éç´§æ€¥ä»»åŠ¡ã€‚</p>
<h4 data-id="heading-10"><code>useTransition</code>çš„ä½œç”¨</h4>
<p>å®ƒå…è®¸ä½ å°†æŸäº›çŠ¶æ€æ ‡è®°ä¸ºâ€œä½ä¼˜å…ˆçº§â€ï¼Œä»è€Œä¸é˜»å¡ç”¨æˆ·äº¤äº’ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> [isPending, startTransition] = <span class="hljs-title function_">useTransition</span>();

<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleChange</span>(<span class="hljs-params">e</span>) {
   <span class="hljs-title function_">setInput</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>); <span class="hljs-comment">// High-priority update</span>
   <span class="hljs-title function_">startTransition</span>(<span class="hljs-function">() =&gt;</span> {
     <span class="hljs-title function_">setFilteredData</span>(<span class="hljs-title function_">filter</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>)); <span class="hljs-comment">// Low-priority update</span>
   });
}
</code></pre>
<h4 data-id="heading-11"><strong>é€‚ç”¨åœºæ™¯</strong></h4>
<ul>
<li><strong>æœç´¢/è¿‡æ»¤å¤§åˆ—è¡¨</strong></li>
<li><strong>åŠ¨æ€åŠ è½½è·¯ç”±</strong></li>
</ul>
<hr/>
<p>###3ï¼å·§ç”¨Deferred Values (<code>defer</code>)
åœ¨æŸäº›æƒ…å†µä¸‹æˆ‘ä»¬å¸Œæœ›å»¶è¿ŸæŸäº›UIå†…å®¹çš„å±•ç¤ºä»¥é¿å…é—ªçƒæˆ–å¡é¡¿ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> deferredValue=<span class="hljs-title function_">unstable_deferredValue</span>(value)
</code></pre>
<p>å½“valueå˜åŒ–æ—¶reactä¼šå°è¯•å»¶è¿Ÿæ–°uiå†…å®¹çš„å±•ç¤ºç›´åˆ°æµè§ˆå™¨ç©ºé—²æ—¶æ‰å®Œæˆç»˜åˆ¶ã€‚</p>
<hr/>
<p>##æ€»ç»“</p>
<p>æœ¬æ–‡ä»‹ç»äº†äº”ä¸ªå…³é”®ä½†å¸¸è¢«å¿½è§†çš„react hooksæŠ€å·§ï¼š</p>
<p>1ï¼åˆ©ç”¨memoization hooks(<code> usememo</code>,<code>usecallback</code>)å‡å°‘æ— æ•ˆé‡æ¸²æŸ’
2ï¼é€šè¿‡transitionç®¡ç†æ›´æ–°ä¼˜å…ˆçº§ä»¥æå‡äº¤äº’æµç•…åº¦
3ï¼ä½¿ç”¨deferred valuesæ¨è¿Ÿéå…³é”®å†…å®¹åŠ è½½</p>
<p>æ­£ç¡®è¿ç”¨è¿™äº›æŠ€æœ¯ä¸ä»…èƒ½æé«˜ç¨‹åºè¿è¡Œæ•ˆç‡è¿˜èƒ½æ˜¾è‘—æ”¹å–„ç”¨æˆ·ä½“éªŒã€‚</p>
<p>å¸Œæœ›ä½ èƒ½å°†è¿™äº›æ–¹æ³•åº”ç”¨åˆ°å®é™…é¡¹ç›®ä¸­å¹¶è§è¯æ˜¾è‘—çš„æ€§èƒ½æå‡ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰åç«¯åˆ†ç¦»æ¡†æ¶ CatchAdmin V5 beta.2 å‘å¸ƒ æ’ä»¶åŒ–ä¸å¼€å‘æ•ˆç‡çš„è¿›ä¸€æ­¥æå‡]]></title>    <link>https://juejin.cn/post/7588146449005936676</link>    <guid>https://juejin.cn/post/7588146449005936676</guid>    <pubDate>2025-12-28T00:23:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588146449005936676" data-draft-id="7588300640599130118" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰åç«¯åˆ†ç¦»æ¡†æ¶ CatchAdmin V5 beta.2 å‘å¸ƒ æ’ä»¶åŒ–ä¸å¼€å‘æ•ˆç‡çš„è¿›ä¸€æ­¥æå‡"/> <meta itemprop="keywords" content="åç«¯,PHP,å¼€æº"/> <meta itemprop="datePublished" content="2025-12-28T00:23:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BingoGo"/> <meta itemprop="url" content="https://juejin.cn/user/993614242266077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰åç«¯åˆ†ç¦»æ¡†æ¶ CatchAdmin V5 beta.2 å‘å¸ƒ æ’ä»¶åŒ–ä¸å¼€å‘æ•ˆç‡çš„è¿›ä¸€æ­¥æå‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/993614242266077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BingoGo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T00:23:07.000Z" title="Sun Dec 28 2025 00:23:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰åç«¯åˆ†ç¦»æ¡†æ¶ CatchAdmin V5 beta.2 å‘å¸ƒ æ’ä»¶åŒ–ä¸å¼€å‘æ•ˆç‡çš„è¿›ä¸€æ­¥æå‡</h2>
<h3 data-id="heading-1">å…³äº CatchAdmin</h3>
<p>CatchAdmin æ˜¯ä¸€æ¬¾åŸºäº Laravel å’Œ Element Plus äºŒæ¬¡å¼€å‘è€Œæˆåå°ç®¡ç†ç³»ç»Ÿã€‚Laravel ç¤¾åŒºä¹Ÿæœ‰è®¸å¤šéå¸¸ä¼˜ç§€çš„åå°ç®¡ç†ç³»ç»Ÿï¼Œä¾‹å¦‚ Novaï¼Œå®˜æ–¹å‡ºå“ï¼Œå½“ç„¶æ˜¯æ”¶è´¹çš„ï¼Œå…è´¹çš„æœ‰åŸºäº Livewire çš„ Filamentï¼Œè¿˜æœ‰ä¸å¾—ä¸è¯´çš„ Laravel Adminã€‚å®ƒé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼ŒCatchAdmin é›†æˆäº† Token é‰´æƒã€æƒé™ç®¡ç†ã€åŠ¨æ€è·¯ç”±ã€åŠ¨æ€è¡¨æ ¼ã€åˆ†é¡µå°è£…ã€èµ„æºæƒé™ã€ä¸Šä¼ ä¸‹è½½ã€ä»£ç ç”Ÿæˆå™¨æ”¯æŒä¸€é”®å¯¼å‡ºå¯¼å…¥ï¼Œæ•°æ®å›æ”¶ç«™ï¼Œé™„ä»¶ç®¡ç†çš„ä¸€æ¬¾æ¨¡å—åŒ–æ¡†æ¶ã€‚Laravel æ¡†æ¶ä»…ä»…ä½œä¸º Api è¾“å‡ºã€‚å°†ç®¡ç†ç³»ç»Ÿæ¨¡å—ä¹‹é—´çš„è€¦åˆé™åˆ°äº†æœ€ä½é™åº¦ã€‚æ¯ä¸ªæ¨¡å—ä¹‹é—´éƒ½æœ‰ç‹¬ç«‹çš„æ§åˆ¶å™¨ï¼Œè·¯ç”±ï¼Œæ¨¡å‹ï¼Œæ•°æ®è¡¨ã€‚åœ¨å¼€å‘ä¸Šå°½å¯èƒ½å°†æ¨¡å—ä¹‹é—´çš„å½±å“é™åˆ°æœ€ä½ï¼Œé™ä½äº†å¼€å‘ä¸Šçš„éš¾åº¦ã€‚åŸºäº CatchAdmin å¯ä»¥å¼€å‘ CMSï¼ŒCRMï¼ŒOA ç­‰ç­‰ç³»ç»Ÿã€‚ä¹Ÿå°è£…äº†å¾ˆå¤šå®ç”¨çš„å·¥å…·ï¼Œæå‡å¼€å‘ä½“éªŒã€‚</p>
<h3 data-id="heading-2">æœ¬æ¬¡æ›´æ–°äº®ç‚¹</h3>
<h4 data-id="heading-3">å¯¼å…¥å¯¼å‡ºåŠŸèƒ½å¢å¼º</h4>
<p>Beta.3 ç‰ˆæœ¬å¯¹æ•°æ®å¯¼å…¥å¯¼å‡ºåŠŸèƒ½è¿›è¡Œäº†æ ¸å¿ƒå±‚é¢çš„å¢å¼ºã€‚åœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œæ‰¹é‡å¯¼å…¥ç”¨æˆ·ã€è®¢å•ã€å•†å“ç­‰æ•°æ®æ˜¯é«˜é¢‘éœ€æ±‚ã€‚æ­¤æ¬¡æ›´æ–°ä¼˜åŒ–äº†å¯¼å…¥å¯¼å‡ºçš„åº•å±‚é€»è¾‘ï¼Œæ”¯æŒæ›´å¤§æ•°æ®é‡çš„å¤„ç†ï¼Œå¹¶æä¾›äº†æ›´çµæ´»çš„å­—æ®µæ˜ å°„é…ç½®ã€‚åœ¨ä»£ç ç”Ÿæˆå™¨ä¸­å‹¾é€‰"æ”¯æŒå¯¼å…¥å¯¼å‡º"ï¼Œå³å¯ä¸ºæ¨¡å—è‡ªåŠ¨ç”Ÿæˆå®Œæ•´çš„å¯¼å…¥å¯¼å‡ºåŠŸèƒ½ï¼Œæ— éœ€æ‰‹å†™ Excel å¤„ç†ä»£ç ã€‚</p>
<h4 data-id="heading-4">æ’ä»¶ç³»ç»Ÿæ­£å¼æ”¯æŒ</h4>
<p>æ’ä»¶ç³»ç»Ÿæ˜¯ v5.0 çš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ã€‚CatchAdmin æ²¡æœ‰è‡ªå·±å‘æ˜ä¸€å¥—æ’ä»¶æœºåˆ¶ï¼Œè€Œæ˜¯ç›´æ¥ç»‘å®š Composer ç”Ÿæ€â€”â€”ä»»ä½•ç¬¦åˆ Laravel Package è§„èŒƒçš„ Composer åŒ…éƒ½å¯ä»¥ä½œä¸º CatchAdmin æ’ä»¶ä½¿ç”¨ã€‚</p>
<p>æœ¬æ¬¡æ›´æ–°å¢å¼ºäº†æ’ä»¶å®‰è£…çš„ Hook åŠŸèƒ½ï¼Œå¼€å‘è€…å¯ä»¥åœ¨æ’ä»¶å®‰è£…ã€å¸è½½æ—¶æ‰§è¡Œè‡ªå®šä¹‰é€»è¾‘ï¼ˆå¦‚åˆå§‹åŒ–é…ç½®ã€åˆ›å»ºæ•°æ®è¡¨ç­‰ï¼‰ã€‚åŒæ—¶ä¼˜åŒ–äº†æ’ä»¶å®‰è£…é¡µé¢ï¼Œæ”¯æŒåœ¨åå°å¯è§†åŒ–ç®¡ç†æ’ä»¶çš„å¯ç”¨ã€ç¦ç”¨ä¸å¸è½½ã€‚</p>
<p>è¿™ç§è®¾è®¡è®© CatchAdmin å¯ä»¥æ— ç¼é›†æˆç¬¬ä¸‰æ–¹æœåŠ¡ï¼ˆæ”¯ä»˜ã€çŸ­ä¿¡ã€OSS ç­‰ï¼‰ï¼Œä¹Ÿæ–¹ä¾¿å°†ä¸šåŠ¡é€»è¾‘å°è£…æˆæ’ä»¶åœ¨ä¸åŒé¡¹ç›®é—´å¤ç”¨ã€‚</p>
<h4 data-id="heading-5">SFC è¿œç¨‹åŠ è½½æ€§èƒ½ä¼˜åŒ–</h4>
<p>CatchAdmin çš„å‰ç«¯æ”¯æŒ"å³æ—¶æ¸²æŸ“"ï¼Œå³æ— éœ€ç¼–è¯‘å³å¯ç›´æ¥åŠ è½½ Vue å•æ–‡ä»¶ç»„ä»¶ï¼ˆSFCï¼‰ã€‚è¿™åœ¨å¼€å‘é˜¶æ®µéå¸¸æ–¹ä¾¿ï¼Œä½†è¿œç¨‹åŠ è½½ä¼šå½±å“é¦–å±æ¸²æŸ“é€Ÿåº¦ã€‚</p>
<p>Beta.3 ç‰ˆæœ¬ä¼˜åŒ–äº† SFC çš„åŠ è½½æœºåˆ¶ï¼Œé€šè¿‡ç¼“å­˜ç­–ç•¥å’ŒæŒ‰éœ€åŠ è½½ï¼Œæ˜¾è‘—æå‡äº†é¡µé¢æ¸²æŸ“é€Ÿåº¦ã€‚åœ¨å®é™…æµ‹è¯•ä¸­ï¼Œåˆ—è¡¨é¡µçš„é¦–æ¬¡åŠ è½½æ—¶é—´ç¼©çŸ­äº†çº¦ 30%ã€‚</p>
<h4 data-id="heading-6">å®‰è£…ä½“éªŒä¼˜åŒ–</h4>
<p>ç®€åŒ–äº†é¡¹ç›®åˆå§‹åŒ–æµç¨‹ï¼Œä¿®å¤äº†å›  Composer ä¾èµ–å†²çªå¯¼è‡´çš„å®‰è£…å¤±è´¥é—®é¢˜ã€‚ç°åœ¨ä»åˆ›å»ºé¡¹ç›®åˆ°å¯åŠ¨åå°ï¼Œæ•´ä¸ªè¿‡ç¨‹æ›´åŠ æµç•…ï¼ŒåŸºæœ¬ä¸éœ€è¦æ‰‹åŠ¨å¹²é¢„ã€‚</p>
<p>æ­¤å¤–ï¼Œå·¦ä¾§èœå•ç°åœ¨æ”¯æŒè‡ªåŠ¨æ›´æ–°â€”â€”å®‰è£…æ–°æ¨¡å—æˆ–æ’ä»¶åï¼Œåˆ·æ–°é¡µé¢å³å¯çœ‹åˆ°å¯¹åº”çš„èœå•é¡¹ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®è·¯ç”±ã€‚</p>
<h3 data-id="heading-7">æ’ä»¶å¸‚åœºå·²æ­£å¼ä¸Šçº¿</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcatchadmin.vip%2Fplugins" target="_blank" title="https://catchadmin.vip/plugins" ref="nofollow noopener noreferrer">CatchAdmin æ’ä»¶å¸‚åœº</a></p>
<h3 data-id="heading-8">å¿«é€Ÿå¼€å§‹</h3>
<pre><code class="hljs language-shell" lang="shell">composer global -W require catchadmin/installer
<span class="hljs-meta prompt_">
# </span><span class="bash">æ–°å»ºé¡¹ç›®</span>
catch new catchadmin
<span class="hljs-meta prompt_">
# </span><span class="bash">å®‰è£…é¡¹ç›®</span>
cd catchadmin &amp;&amp; php artisan catch:install
<span class="hljs-meta prompt_">
# </span><span class="bash">å¯åŠ¨é¡¹ç›®</span>
composer run dev
</code></pre>
<h3 data-id="heading-9">åŠŸèƒ½</h3>
<ul>
<li>â˜‘ï¸<strong>ç”¨æˆ·ç®¡ç†</strong> å®Œæˆç”¨æˆ·æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤é…ç½®ï¼Œæ”¯æŒä¸åŒç”¨æˆ·ç™»å½•åå°çœ‹åˆ°ä¸åŒçš„é¦–é¡µ</li>
<li>â˜‘ï¸<strong>éƒ¨é—¨ç®¡ç†</strong> éƒ¨é—¨ç»„ç»‡æœºæ„ï¼ˆå…¬å¸ã€éƒ¨é—¨ã€å°ç»„ï¼‰ï¼Œæ ‘ç»“æ„å±•ç°</li>
<li>â˜‘ï¸<strong>å²—ä½ç®¡ç†</strong> å¯ä»¥ç»™ç”¨æˆ·é…ç½®æ‰€æ‹…ä»»èŒåŠ¡</li>
<li>â˜‘ï¸<strong>è§’è‰²ç®¡ç†</strong> æ ‘ç»“æ„è®¾è®¡ï¼Œæ”¯æŒè§’è‰²èœå•å’ŒæŒ‰é’®æƒé™åˆ†é…ï¼Œæ”¯æŒè§’è‰²æ•°æ®æƒé™åˆ†é…ã€å¼ºå¤§çš„è§’è‰²ç®¡ç†ä½“ç³»</li>
<li>â˜‘ï¸<strong>èœå•ç®¡ç†</strong> é…ç½®ç³»ç»Ÿèœå•å’ŒæŒ‰é’®ç­‰</li>
<li>â˜‘ï¸<strong>å­—å…¸ç®¡ç†</strong> å¯¹ç³»ç»Ÿä¸­ç»å¸¸ä½¿ç”¨å¹¶ä¸”å›ºå®šçš„æ•°æ®å¯ä»¥é‡å¤ä½¿ç”¨å’Œç»´æŠ¤</li>
<li>â˜‘ï¸<strong>ç³»ç»Ÿé…ç½®</strong> ç³»ç»Ÿçš„ä¸€äº›å¸¸ç”¨è®¾ç½®ç®¡ç†</li>
<li>â˜‘ï¸<strong>æ“ä½œæ—¥å¿—</strong> ç”¨æˆ·å¯¹ç³»ç»Ÿçš„ä¸€äº›æ­£å¸¸æ“ä½œçš„æŸ¥è¯¢</li>
<li>â˜‘ï¸<strong>ç™»å½•æ—¥å¿—</strong> ç”¨æˆ·ç™»å½•ç³»ç»Ÿçš„è®°å½•æŸ¥è¯¢</li>
<li>â˜‘ï¸<strong>æ–‡ä»¶ä¸Šä¼ </strong> æ”¯æŒ<code>æœ¬åœ°</code>ã€<code>ä¸ƒç‰›äº‘</code>ã€<code>é˜¿é‡Œäº‘</code>ã€<code>è…¾è®¯äº‘</code></li>
<li>â˜‘ï¸<strong>é™„ä»¶ç®¡ç†</strong> ç®¡ç†å½“å‰ç³»ç»Ÿä¸Šä¼ çš„æ–‡ä»¶åŠå›¾ç‰‡ç­‰ä¿¡æ¯</li>
<li>â˜‘ï¸<strong>æ•°æ®è¡¨ç»´æŠ¤</strong> å¯¹ç³»ç»Ÿçš„æ•°æ®è¡¨å¯ä»¥è¿›è¡Œæ¸…ç†ç¢ç‰‡å’Œä¼˜åŒ–ï¼Œå¹¶ä¸”ç®¡ç†æ‰€æœ‰æ•°æ®çš„å›æ”¶å’Œé”€æ¯</li>
<li>â˜‘ï¸<strong>ä»£ç ç”Ÿæˆ</strong> å‰åç«¯ä»£ç çš„ç”Ÿæˆï¼ˆphpã€vueã€ æ•°æ®åº“è¿ç§»ï¼‰ï¼Œæ”¯æŒä¸€é”®ç”Ÿæˆåˆ°æ¨¡å—</li>
<li>â˜‘ï¸<strong>æ”¯æŒ Vue å³æ—¶æ¸²æŸ“</strong> æ”¯æŒå‰ç«¯ Vue å³æ—¶æ¸²æŸ“ æ— éœ€ç¼–è¯‘</li>
<li>â˜‘ï¸<strong>æ”¯æŒæ’ä»¶ç³»ç»Ÿ</strong> CatchAdmin æ’ä»¶å³ Composer åŒ…ï¼Œæ— éœ€å†å­¦ä¸€æ¬¡æ’ä»¶å¼€å‘ï¼Œå®Œå…¨ç»‘å®š Composer ç”Ÿæ€</li>
</ul>
<h3 data-id="heading-10">åœ¨çº¿ä½“éªŒ</h3>
<ul>
<li>æ¼”ç¤ºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpro.catchadmin.com" target="_blank" title="https://pro.catchadmin.com" ref="nofollow noopener noreferrer">pro.catchadmin.com</a></li>
<li>è´¦æˆ·ï¼š<code>catch@admin.com</code></li>
<li>å¯†ç ï¼š<code>catchadmin</code></li>
</ul>
<h3 data-id="heading-11">é¡¹ç›®åœ°å€</h3>
<ul>
<li>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FJaguarJack%2Fcatch-admin" target="_blank" title="https://github.com/JaguarJack/catch-admin" ref="nofollow noopener noreferrer">github.com/JaguarJack/â€¦</a></li>
<li>Giteeï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fcatchadmin%2Fcatchadmin" target="_blank" title="https://gitee.com/catchadmin/catchadmin" ref="nofollow noopener noreferrer">gitee.com/catchadmin/â€¦</a></li>
</ul>
<h3 data-id="heading-12">ç•Œé¢é¢„è§ˆ</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22ee6d61947949968475529847960b10~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmluZ29Hbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486187&amp;x-signature=uVOz8TqSnNI%2B6GWQ1gworl5LlbI%3D" alt="CatchAdmin v5.0 Beta æ¬¢è¿é¡µ" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb362fcd7e3c48c59b7d84eecc518065~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmluZ29Hbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486187&amp;x-signature=Wfz%2FYZH1Vy4OAaA6Mu3%2F2KiVMb0%3D" alt="CatchAdmin v5.0 Beta æ•°æ®é¢æ¿" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc174d54e85a48119ad7980ab173deab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmluZ29Hbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486187&amp;x-signature=Z9kJN6qRbScmi4IaSPDAQAb5GiA%3D" alt="CatchAdmin v5.0 Beta ç”¨æˆ·ç®¡ç†" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c13ea608179b40529a6b16839966a644~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmluZ29Hbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486187&amp;x-signature=ePYKf%2Bxi%2Ffwt4XYHV8gmKAQ7%2FY4%3D" alt="CatchAdmin v5.0 Beta ä»£ç ç”Ÿæˆ" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcatchadmin.com%2Fpost%2F2025-12%2Fcatchadmin-v5-beta" target="_blank" title="https://catchadmin.com/post/2025-12/catchadmin-v5-beta" ref="nofollow noopener noreferrer">åŸæ–‡- å‰åç«¯åˆ†ç¦»æ¡†æ¶ CatchAdmin V5 beta.2 å‘å¸ƒ æ’ä»¶åŒ–ä¸å¼€å‘æ•ˆç‡çš„è¿›ä¸€æ­¥æå‡</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€é‡‘ä»“æ•°æ®åº“ã€‘ksql æŒ‡å—ï¼ˆäº”ï¼‰ â€”â€” åˆ›å»ºä¸ç®¡ç†ç´¢å¼•å’Œè§†å›¾ï¼ˆKingbaseES æŸ¥è¯¢ä¼˜åŒ–æ ¸å¿ƒï¼‰]]></title>    <link>https://juejin.cn/post/7588086766249132083</link>    <guid>https://juejin.cn/post/7588086766249132083</guid>    <pubDate>2025-12-28T00:31:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588086766249132083" data-draft-id="7588104741610569738" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€é‡‘ä»“æ•°æ®åº“ã€‘ksql æŒ‡å—ï¼ˆäº”ï¼‰ â€”â€” åˆ›å»ºä¸ç®¡ç†ç´¢å¼•å’Œè§†å›¾ï¼ˆKingbaseES æŸ¥è¯¢ä¼˜åŒ–æ ¸å¿ƒï¼‰"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-12-28T00:31:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å€”å¼ºçš„çŸ³å¤´_"/> <meta itemprop="url" content="https://juejin.cn/user/3168119757484368"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€é‡‘ä»“æ•°æ®åº“ã€‘ksql æŒ‡å—ï¼ˆäº”ï¼‰ â€”â€” åˆ›å»ºä¸ç®¡ç†ç´¢å¼•å’Œè§†å›¾ï¼ˆKingbaseES æŸ¥è¯¢ä¼˜åŒ–æ ¸å¿ƒï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3168119757484368/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å€”å¼ºçš„çŸ³å¤´_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T00:31:10.000Z" title="Sun Dec 28 2025 00:31:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc9cfc399d0f419985382edb3f07627a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=AVxDGNXwajtU%2BvM%2F5fUFSVnn7Ys%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p>æŒæ¡è¡¨çš„åŸºæœ¬è¿ä½œä¹‹åï¼Œè‹¥æƒ³ä¼˜åŒ–æŸ¥è¯¢æ•ˆç‡å¹¶ç®€åŒ–æ•°æ®è®¿é—®ï¼Œå°±è¦å»å­¦ä¹ â€œç´¢å¼•â€å’Œâ€œè§†å›¾â€çš„è¿ç”¨ï¼Œç´¢å¼•ç±»ä¼¼äºâ€œä¹¦ç±ç›®å½•â€ï¼Œå¯ä»¥æå¤§åœ°åŠ å¿«æŸ¥è¯¢é€Ÿåº¦ï¼›è§†å›¾ç±»ä¼¼â€œæ•°æ®çª—å£â€ï¼Œèƒ½å¤Ÿéšè—å¤æ‚çš„æŸ¥è¯¢é€»è¾‘ï¼Œè¿˜èƒ½æ§åˆ¶æ•°æ®çš„å¯è§æ€§ã€‚æœ¬æ–‡å°±â€œksqlå‘½ä»¤è¡Œæ“ä½œç´¢å¼•ä¸è§†å›¾â€å±•å¼€è®ºè¿°ï¼ŒæŠŠä»â€œä½œç”¨åˆ°åˆ›å»ºï¼Œå†åˆ°æŸ¥çœ‹ï¼Œç»´æŒç›´è‡³åˆ é™¤â€çš„å…¨è¿‡ç¨‹æ‹†è§£æˆå®é™…æ“ä½œæ­¥éª¤ï¼Œå¹¶ç»“åˆä¾‹å­å’Œé¿å‘æç¤ºï¼Œä»¥ä½¿åˆå­¦è€…èƒ½å¤Ÿé¢†æ‚Ÿå¹¶ä»˜è¯¸å®è¡Œã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/083024ed594c4e09b9016a8c2b6ae714~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=UALdp3zTq4EqYHTIjbevxhKh5oY%3D" alt="" loading="lazy"/>
@[toc]</p>
<h3 data-id="heading-1">ä¸€ã€å‰ç½®å‡†å¤‡ï¼šç¡®è®¤æ“ä½œåŸºç¡€ï¼ˆè¡”æ¥å‰æ–‡ï¼Œç¡®ä¿è¿è´¯ï¼‰</h3>
<p>ç´¢å¼•å’Œè§†å›¾è¦ä¾æ‰˜å·²æœ‰çš„è¡¨ï¼Œæ‰€ä»¥å¾—å…ˆåšå¥½å¦‚ä¸‹é¢„å¤‡å·¥ä½œï¼ˆå‚ç…§ç¬¬å››ç¯‡â€œè¡¨çš„è¿ä½œâ€ç›¸å…³å†…å®¹ï¼‰ï¼Œä»¥é˜²æ­¢åœ¨æ“ä½œè¿‡ç¨‹ä¸­å› ä¸ºä¾èµ–ç¼ºå¤±è€Œå‡ºç°é”™è¯¯æç¤ºã€‚</p>
<h4 data-id="heading-2">1.1 1. è¿æ¥æ•°æ®åº“å¹¶åˆ‡æ¢ç›®æ ‡æ¨¡å¼</h4>
<p>åˆ©ç”¨ ksql å»ºç«‹ä¸æœ¬åœ° KingbaseES æ•°æ®åº“çš„è”ç³»ï¼Œè½¬åˆ°å…ˆå‰æ‰€åˆ›å»ºçš„ <code>test_schema</code> æ¨¡å¼å½“ä¸­ï¼Œæ£€æŸ¥ç›®æ ‡è¡¨æ˜¯å¦ç¡®å®å­˜åœ¨ï¼ˆæ‹¿ <code>sys_user</code> è¡¨æ¥è¯´ï¼Œè¦æ˜¯æ²¡æœ‰å°±å†æ¬¡åˆ›å»ºå®ƒï¼Œæˆ–è€…ç”¨ä¸€ä¸ªæ–°çš„ä¾‹å­ï¼‰ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ç¡®ä¿åç»­æ“ä½œèƒ½å¤Ÿé¡ºåˆ©æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- 1. è¿æ¥æ•°æ®åº“ï¼ˆè‹¥æœªè¿æ¥ï¼‰</span>
ksql <span class="hljs-operator">-</span>d kingbase <span class="hljs-operator">-</span>U <span class="hljs-keyword">system</span>
<span class="hljs-comment">-- 2. åˆ‡æ¢åˆ° test_schema æ¨¡å¼</span>
<span class="hljs-keyword">SET</span> search_path <span class="hljs-keyword">TO</span> test_schema, public;
<span class="hljs-comment">-- 3. ç¡®è®¤ç›®æ ‡è¡¨å­˜åœ¨ï¼ˆå¦‚ sys_user è¡¨ï¼‰</span>
\dt sys_user;
<span class="hljs-comment">-- è‹¥ä¸å­˜åœ¨ï¼Œåˆ›å»ºç¤ºä¾‹è¡¨ï¼ˆç”¨äºåç»­ç´¢å¼•/è§†å›¾æ“ä½œï¼‰</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> sys_user (
    id SERIAL <span class="hljs-keyword">PRIMARY</span> KEY,
    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    phone <span class="hljs-type">CHAR</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">UNIQUE</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    email <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">UNIQUE</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    create_time <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
) TABLESPACE test_ts;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6b5c243932443dc8cbbe5de8c694016~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=G0tY%2BgoaAjKp%2BF1KfEyucsXbhIc%3D" alt="image.png" loading="lazy"/></p>
<p>æ‰§è¡Œåè‹¥æ˜¾ç¤º <code>Table "test_schema.sys_user" does not exist</code>ï¼Œåˆ™å…ˆæ‰§è¡Œä¸Šè¿° <code>CREATE TABLE</code> è¯­å¥åˆ›å»ºè¡¨ï¼Œç¡®ä¿åç»­æ“ä½œæœ‰è½½ä½“ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e52d9913afa04d62bf8f7261fa9de948~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=N77MBA7G%2F%2B2aBjWlCDMeN4axOrU%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-3">1.2 2. æ’å…¥æµ‹è¯•æ•°æ®ï¼ˆç”¨äºéªŒè¯ç´¢å¼• / è§†å›¾æ•ˆæœï¼‰</h4>
<p>ä¸ºäº†åç»­å¯ä»¥æ£€æµ‹ç´¢å¼•çš„æŸ¥è¯¢é€Ÿåº¦ï¼Œå¹¶æŸ¥çœ‹è§†å›¾çš„æ•°æ®å±•ç¤ºæƒ…å†µï¼Œè¦ç»™ <code>sys_user</code> è¡¨å¢æ·»å¤§é‡æ¨¡æ‹Ÿæ•°æ®æ¥åšæµ‹è¯•ï¼ˆèƒ½å¤Ÿæ·»åŠ ä¸Šåƒæ¡è®°å½•ä»¥æ¨¡æ‹ŸçœŸå®åœºæ™¯ï¼‰ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ‰¹é‡æ’å…¥10æ¡æµ‹è¯•æ•°æ®ï¼ˆå¯å¤åˆ¶æ‰©å±•ï¼‰</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> test_schema.sys_user (name, phone, email)
<span class="hljs-keyword">VALUES</span> 
(<span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-string">'13800138000'</span>, <span class="hljs-string">'zhangsan@test.com'</span>),
(<span class="hljs-string">'æå››'</span>, <span class="hljs-string">'13900139000'</span>, <span class="hljs-string">'lisi@test.com'</span>),
(<span class="hljs-string">'ç‹äº”'</span>, <span class="hljs-string">'13700137000'</span>, <span class="hljs-string">'wangwu@test.com'</span>),
(<span class="hljs-string">'èµµå…­'</span>, <span class="hljs-string">'13600136000'</span>, <span class="hljs-string">'zhaoliu@test.com'</span>),
(<span class="hljs-string">'å­™ä¸ƒ'</span>, <span class="hljs-string">'13500135000'</span>, <span class="hljs-string">'sunqi@test.com'</span>),
(<span class="hljs-string">'å‘¨å…«'</span>, <span class="hljs-string">'13400134000'</span>, <span class="hljs-string">'zhouba@test.com'</span>),
(<span class="hljs-string">'å´ä¹'</span>, <span class="hljs-string">'13300133000'</span>, <span class="hljs-string">'wuj iu@test.com'</span>),
(<span class="hljs-string">'éƒ‘å'</span>, <span class="hljs-string">'13200132000'</span>, <span class="hljs-string">'zhengshi@test.com'</span>),
(<span class="hljs-string">'é’±ä¸€'</span>, <span class="hljs-string">'13100131000'</span>, <span class="hljs-string">'qianyi@test.com'</span>),
(<span class="hljs-string">'å†¯äºŒ'</span>, <span class="hljs-string">'1300130000'</span>, <span class="hljs-string">'fenger@test.com'</span>);
</code></pre>
<p>æ‰§è¡Œåæç¤º <code>INSERT 0 10</code>ï¼Œè¡¨ç¤ºæ•°æ®æ’å…¥æˆåŠŸï¼Œä¸ºåç»­æ“ä½œæä¾›æµ‹è¯•åŸºç¡€ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/59643bed5b884fa09303c9fc83ac42c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=iTjCqhECFdFCdPVi5bQevD7gOgg%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-4">äºŒã€ç´¢å¼•ç®¡ç†ï¼šç»™è¡¨ â€œåŠ ç›®å½•â€ï¼ŒåŠ é€ŸæŸ¥è¯¢</h3>
<p>ç´¢å¼•æ˜¯ KingbaseES ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½çš„æ ¸å¿ƒæ‰‹æ®µ â€”â€” å½“è¡¨æ•°æ®é‡è¾ƒå¤§æ—¶ï¼ˆå¦‚ 10 ä¸‡æ¡ +ï¼‰ï¼Œæ— ç´¢å¼•çš„æŸ¥è¯¢ä¼š â€œå…¨è¡¨æ‰«æâ€ï¼ˆé€è¡ŒæŸ¥æ‰¾ï¼‰ï¼Œè€Œæœ‰ç´¢å¼•çš„æŸ¥è¯¢ä¼šé€šè¿‡ â€œç´¢å¼•ç›®å½•â€ ç›´æ¥å®šä½æ•°æ®ï¼Œé€Ÿåº¦æå‡æˆç™¾ä¸Šåƒå€ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æŒ‰ â€œåˆ›å»ºâ†’æŸ¥çœ‹â†’ç»´æŠ¤â†’åˆ é™¤â€ å±•å¼€è®²è§£</p>
<h4 data-id="heading-5">2.1 1. å…ˆæ‡‚åŸºç¡€ï¼šç´¢å¼•çš„ç±»å‹ä¸é€‚ç”¨åœºæ™¯</h4>
<p>æ–°æ‰‹éœ€å…ˆæ˜ç¡®ä¸åŒç´¢å¼•çš„ä½œç”¨ï¼Œé¿å…ç›²ç›®åˆ›å»ºï¼ˆç´¢å¼•å¹¶éè¶Šå¤šè¶Šå¥½ï¼Œä¼šå¢åŠ æ›´æ–° / æ’å…¥çš„å¼€é”€ï¼‰ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3218ac55b8574a06b17704a0c38641ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=kLVGjxmrzyf8qmSLBew%2FUIHJ6UI%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-6">2.2 2. åˆ›å»ºç´¢å¼•ï¼šç”¨ CREATE INDEX è¯­å¥</h4>
<h5 data-id="heading-7">2.2.1 ç¤ºä¾‹ 1ï¼šåˆ›å»ºæ™®é€šç´¢å¼•ï¼ˆåŠ é€Ÿå•å­—æ®µæŸ¥è¯¢ï¼‰</h5>
<p>ç»™ <code>sys_user</code> è¡¨çš„ <code>phone</code> åˆ—å»ºæ™®é€šç´¢å¼•ï¼ˆé¢‘ç¹æŒ‰æ‰‹æœºå·æŸ¥ç”¨æˆ·æ—¶ç”¨ï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¯­æ³•ï¼šCREATE INDEX ç´¢å¼•å ON è¡¨å(å­—æ®µå);</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_sys_user_phone <span class="hljs-keyword">ON</span> test_schema.sys_user(phone);
</code></pre>
<ul>
<li>
<p><strong>ç´¢å¼•åè§„èŒƒ</strong>æè®®é‡‡ç”¨â€œidx_è¡¨å_å­—æ®µåâ€æ ¼å¼ï¼Œè¿™æ ·ä¾¿äºè¯†åˆ«ï¼Œæ¯”å¦‚â€œidx_sys_user_phoneâ€å°±è¡¨ç¤ºâ€œsys_userâ€è¡¨ä¸­â€œphoneâ€åˆ—çš„ç´¢å¼•ã€‚</p>
</li>
<li>
<p><strong>æˆåŠŸéªŒè¯</strong>ï¼šæ‰§è¡Œåæç¤º <code>CREATE INDEX</code>ï¼Œè¡¨ç¤ºç´¢å¼•åˆ›å»ºæˆåŠŸã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/527b8aecc1de4ab5be6cb6960a4936ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=oT6oM8BhRa7lGD8VM7jXFvc5Dhg%3D" alt="image.png" loading="lazy"/></p>
</li>
</ul>
<h5 data-id="heading-8">2.2.2 ç¤ºä¾‹ 2ï¼šåˆ›å»ºå”¯ä¸€ç´¢å¼•ï¼ˆç¡®ä¿å­—æ®µå”¯ä¸€ + åŠ é€ŸæŸ¥è¯¢ï¼‰</h5>
<p>ç»™ <code>sys_user</code> è¡¨çš„ <code>email</code> åˆ—å»ºå”¯ä¸€ç´¢å¼•ï¼ˆæ—¢ç¡®ä¿é‚®ç®±ä¸é‡å¤ï¼ŒåˆåŠ é€Ÿé‚®ç®±æŸ¥è¯¢ï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¯­æ³•ï¼šCREATE UNIQUE INDEX ç´¢å¼•å ON è¡¨å(å­—æ®µå);</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">UNIQUE</span> INDEX idx_sys_user_email <span class="hljs-keyword">ON</span> test_schema.sys_user(email);
</code></pre>
<ul>
<li><strong>ä¸ UNIQUE çº¦æŸçš„åŒºåˆ«</strong>ï¼šå”¯ä¸€ç´¢å¼•åªä¿è¯å€¼å”¯ä¸€ï¼ŒUNIQUE çº¦æŸåŒ…å«çº¦æŸå’Œå”¯ä¸€ç´¢å¼•ï¼Œå¦‚æœè¡¨å·²æœ‰ <code>email</code> çš„ UNIQUE çº¦æŸï¼Œåˆ™ä¸å¿…å†åˆ›å»º <code>email</code> çš„å”¯ä¸€ç´¢å¼•ï¼Œå› ä¸ºçº¦æŸæœ¬èº«å°±ä¼šç”Ÿæˆç´¢å¼•ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/228788c91e354239973e35dfbcb69567~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=jN3w8ln%2BrX3TTj6Qs2G%2F61B833w%3D" alt="image.png" loading="lazy"/></li>
</ul>
<h5 data-id="heading-9">2.2.3 ç¤ºä¾‹ 3ï¼šåˆ›å»ºå¤åˆç´¢å¼•ï¼ˆåŠ é€Ÿå¤šå­—æ®µç»„åˆæŸ¥è¯¢ï¼‰</h5>
<p>ä¸º<code>sys_user</code>è¡¨çš„<code>name</code>å’Œ<code>create_time</code>åˆ—åˆ›å»ºå¤åˆç´¢å¼•ï¼Œå½“ç»å¸¸ä¾ç…§â€œå§“å+åˆ›å»ºæ—¶é—´èŒƒå›´â€æ‰§è¡ŒæŸ¥è¯¢çš„æ—¶å€™ä¼šç”¨åˆ°è¿™ä¸ªç´¢å¼•ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¯­æ³•ï¼šCREATE INDEX ç´¢å¼•å ON è¡¨å(å­—æ®µ1, å­—æ®µ2);</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_sys_user_name_createtime <span class="hljs-keyword">ON</span> test_schema.sys_user(name, create_time);
</code></pre>
<ul>
<li><strong>å­—æ®µé¡ºåºæ³¨æ„</strong>ï¼šå¤åˆç´¢å¼•ä¾ç…§â€œæœ€å·¦ç¬¦åˆåŸåˆ™â€ï¼Œç´¢å¼•(name, create - time)å¯åŠ å¼º name å•å­—æ®µæŸ¥è¯¢ï¼Œä¹Ÿå¯åŠ å¼º name + create - time ç»¼åˆæŸ¥è¯¢ï¼Œä½†æ— æ³•åŠ å¼º create - time å•å­—æ®µæŸ¥è¯¢ï¼Œè¦æŒ‰ç…§æŸ¥è¯¢ä¹ æƒ¯æ¥ç¡®å®šå­—æ®µé¡ºåºã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91afcbbf23744aacabd6644e54c78b99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=zpxIFWw%2FiFrNNV5nSbASD0SW9qg%3D" alt="image.png" loading="lazy"/></li>
</ul>
<h4 data-id="heading-10">2.3 3. æŸ¥çœ‹ç´¢å¼•ï¼šç¡®è®¤ç´¢å¼•å­˜åœ¨ä¸å…³è”è¡¨</h4>
<p>åˆ›å»ºç´¢å¼•åï¼Œéœ€é€šè¿‡ ksql å‘½ä»¤æŸ¥çœ‹ç´¢å¼•åˆ—è¡¨ã€å…³è”è¡¨åŠè¯¦æƒ…ï¼Œæ¨è <code>\di</code> å’Œ <code>\dt+</code> å‘½ä»¤ï¼š</p>
<h5 data-id="heading-11">2.3.1 ç¤ºä¾‹ 1ï¼šæŸ¥çœ‹æ‰€æœ‰ç´¢å¼•ï¼ˆ\di å‘½ä»¤ï¼‰</h5>
<p>æ‰§è¡Œ <code>\di</code> å¯åˆ—å‡ºå½“å‰æ¨¡å¼ä¸‹çš„æ‰€æœ‰ç´¢å¼•ï¼Œç¡®è®¤ç´¢å¼•æ˜¯å¦åˆ›å»ºæˆåŠŸï¼š</p>
<pre><code class="hljs language-sql" lang="sql">\di
</code></pre>
<p><strong>æ‰§è¡Œç»“æœç¤ºä¾‹ï¼š</strong></p>
<p><strong>å…³é”®ä¿¡æ¯è§£è¯»ï¼š</strong></p>
<ul>
<li><code>Table</code>ï¼šç´¢å¼•å…³è”çš„è¡¨ï¼ˆç¡®è®¤æ˜¯ <code>sys_user</code>ï¼‰ï¼›</li>
<li><code>Columns</code>ï¼šç´¢å¼•å¯¹åº”çš„å­—æ®µï¼ˆå•å­—æ®µ / å¤šå­—æ®µï¼‰ï¼›</li>
<li><code>sys_user_pkey</code>ï¼šä¸»é”®è‡ªåŠ¨åˆ›å»ºçš„ç´¢å¼•ï¼ˆæ— éœ€æ‰‹åŠ¨åˆ›å»ºï¼‰ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56541cf7d7d64c03b258768b3382b26a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=MOsNGgrmRvYTucwMhVc0zmpV90A%3D" alt="image.png" loading="lazy"/></li>
</ul>
<h5 data-id="heading-12">2.3.2 ç¤ºä¾‹ 2ï¼šæŸ¥çœ‹è¡¨å…³è”çš„ç´¢å¼•ï¼ˆ\dt+ è¡¨åï¼‰</h5>
<p>è‹¥éœ€æŸ¥çœ‹æŸå¼ è¡¨çš„æ‰€æœ‰ç´¢å¼•ï¼ˆå¦‚ <code>sys_user</code>ï¼‰ï¼Œæ‰§è¡Œ <code>\d+ è¡¨å</code>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">\d<span class="hljs-operator">+</span> test_schema.sys_user
</code></pre>
<p><strong>æ‰§è¡Œç»“æœç¤ºä¾‹ï¼ˆç´¢å¼•éƒ¨åˆ†ï¼‰ï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bccf956d98dd4763ad219001dbdf466b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=4h4ZhOa7304PY%2F5wnmph5m7%2B63E%3D" alt="463bec18ca0d0e9375930d3460bbb07c.png" loading="lazy"/></p>
<p>ç›´æ¥å±•ç¤ºè¡¨å…³è”çš„æ‰€æœ‰ç´¢å¼•ï¼ŒåŒ…æ‹¬ç±»å‹ï¼ˆPRIMARY KEY/UNIQUE/ æ™®é€šï¼‰å’Œå­—æ®µï¼Œæ¸…æ™°ç›´è§‚ã€‚</p>
<h4 data-id="heading-13">2.4 4. ç´¢å¼•ç»´æŠ¤ï¼šä¼˜åŒ–æ€§èƒ½ä¸è°ƒæ•´ç»“æ„</h4>
<p>ç´¢å¼•ç»è¿‡ä¸€å®šæ—¶é—´çš„ä½¿ç”¨ä¹‹åï¼Œæœ‰å¯èƒ½ä¼šå‡ºç°ç”±äºæ•°æ®é¢‘ç¹è¢«åˆ é™¤æˆ–è€…æ›´æ–°è€Œé€ æˆçš„â€œç¢ç‰‡åŒ–â€ç°è±¡ï¼Œå³ç´¢å¼•æ–‡ä»¶ä¸­å­˜åœ¨è®¸å¤šç©ºç™½ç©ºé—´ï¼Œè¿™ç§æƒ…å†µä¸‹è¦å€ŸåŠ©é‡å»ºç´¢å¼•æ¥æ”¹å–„è¿™ç§æƒ…å†µï¼Œè€Œä¸”æŒ‰ç…§ä¸ªäººéœ€æ±‚ä¹Ÿå¯ä»¥é‡æ–°å‘½åæˆ–è€…ç›´æ¥åˆ é™¤ç´¢å¼•ã€‚</p>
<h5 data-id="heading-14">2.4.1 ç¤ºä¾‹ 1ï¼šé‡å»ºç´¢å¼•ï¼ˆè§£å†³ç¢ç‰‡åŒ–ï¼Œæå‡æŸ¥è¯¢é€Ÿåº¦ï¼‰</h5>
<p>å½“ç´¢å¼•æŸ¥è¯¢é€Ÿåº¦å˜æ…¢æ—¶ï¼Œé‡å»ºç´¢å¼•å¯æ•´ç†ç¢ç‰‡ï¼Œæ¢å¤æ€§èƒ½ï¼ˆè¡¨å¤§æ—¶å»ºè®®ç¦»çº¿æ‰§è¡Œï¼Œé¿å…å½±å“ä¸šåŠ¡ï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¯­æ³•ï¼šREINDEX INDEX ç´¢å¼•å;</span>
REINDEX INDEX idx_sys_user_phone;
<span class="hljs-comment">-- è¿›é˜¶ï¼šé‡å»ºè¡¨çš„æ‰€æœ‰ç´¢å¼•ï¼ˆæ›´é«˜æ•ˆï¼‰</span>
REINDEX <span class="hljs-keyword">TABLE</span> sys_user;
</code></pre>
<ul>
<li><strong>æˆåŠŸéªŒè¯</strong>ï¼šæ‰§è¡Œåæç¤º <code>REINDEX</code>ï¼Œè¡¨ç¤ºé‡å»ºå®Œæˆã€‚</li>
</ul>
<h5 data-id="heading-15">2.4.2 ç¤ºä¾‹ 2ï¼šé‡å‘½åç´¢å¼•ï¼ˆè§„èŒƒå‘½åï¼‰</h5>
<p>ç´¢å¼•åè‹¥ä¸ç¬¦åˆè§„èŒƒï¼Œå¯ä»¥é‡æ–°å‘½åï¼Œå¯ä»¥æŠŠ<code>idx_sys_user_phone</code>æ”¹ä¸º<code>idx_sys_user_mobile</code>ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¯­æ³•ï¼šALTER INDEX æ—§ç´¢å¼•å RENAME TO æ–°ç´¢å¼•å;</span>
<span class="hljs-keyword">ALTER</span> INDEX idx_sys_user_phone RENAME <span class="hljs-keyword">TO</span> idx_sys_user_mobile;
</code></pre>
<ul>
<li><strong>éªŒè¯</strong>ï¼šæ‰§è¡Œ <code>\d+ test_schema.sys_user</code> å¯çœ‹åˆ°ç´¢å¼•åå·²æ›´æ–°ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e8979bd27dc4ef49a996e146018f802~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=S1iUE%2BoaO3pWzk0noAv8QvNWpnc%3D" alt="6a3f5aa361f83070f3ae48b8f04c2a75.png" loading="lazy"/></li>
</ul>
<h5 data-id="heading-16">2.4.3 ç¤ºä¾‹ 3ï¼šåˆ é™¤ç´¢å¼•ï¼ˆæ— ç”¨ç´¢å¼•æ¸…ç†ï¼‰</h5>
<p>æŸå­—æ®µæŸ¥è¯¢é¢‘ç‡é™ä½æˆ–è€…ç´¢å¼•è‡´ä½¿æ’å…¥/æ›´æ–°å˜æ…¢çš„æ—¶å€™ï¼Œè¦åˆ é™¤æ— ç”¨ç´¢å¼•ï¼ˆè¦æ³¨æ„çš„æ˜¯ï¼Œä¸»é”®ç´¢å¼•ä»¥åŠä¸å”¯ä¸€çº¦æŸç›¸å…³è”çš„ç´¢å¼•ä¸èƒ½ç›´æ¥åˆ ï¼Œåº”å½“å…ˆåˆ çº¦æŸï¼‰ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¯­æ³•ï¼šDROP INDEX IF EXISTS ç´¢å¼•å;</span>
<span class="hljs-keyword">DROP</span> INDEX IF <span class="hljs-keyword">EXISTS</span> idx_sys_user_name_createtime;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c368996dc523453e90de69be67e22b92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=DdBnqlQ77Rh%2BUWelwD1vGqzT6o4%3D" alt="532407218768843c859b33c2822afad1.png" loading="lazy"/></p>
<ul>
<li><code>IF EXISTS</code>ï¼šé¿å…ç´¢å¼•ä¸å­˜åœ¨æ—¶æŠ¥é”™ï¼Œä»…æç¤ºè­¦å‘Šï¼›</li>
<li><strong>éªŒè¯</strong>ï¼šæ‰§è¡Œ <code>\d+ test_schema.sys_user</code> ç¡®è®¤ç´¢å¼•å·²ç§»é™¤ã€‚</li>
</ul>
<h4 data-id="heading-17">2.5 5. ç´¢å¼•ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼ˆæ–°æ‰‹é¿å‘æŒ‡å—ï¼‰</h4>
<ol>
<li><strong>ç´¢å¼•å¹¶éè¶Šå¤šè¶Šå¥½</strong>ï¼Œç´¢å¼•ä¼šåŠ é‡æ’å…¥ï¼Œæ›´æ–°å’Œåˆ é™¤æ—¶çš„å¼€é”€ï¼Œå› ä¸ºæ¯å½“æ•°æ®å‘ç”Ÿå˜åŠ¨çš„æ—¶å€™ï¼Œéƒ½è¦åŒæ­¥æ›´æ–°ç´¢å¼•ã€‚æ‰€ä»¥ä¸€å¼ è¡¨çš„ç´¢å¼•æœ€å¥½åˆ«è¶…è¿‡5ä¸ªã€‚</li>
<li><strong>å°è¡¨ä¸éœ€è¦åˆ›å»ºç´¢å¼•</strong>ï¼Œå½“æ•°æ®é‡å°äº1ä¸‡æ¡æ—¶ï¼Œå…¨è¡¨æ‰«ææ¯”ç´¢å¼•æŸ¥è¯¢é€Ÿåº¦æ›´å¿«ï¼Œå› ä¸ºç´¢å¼•æŸ¥è¯¢è¦å…ˆæŸ¥æ‰¾ç´¢å¼•å†æŸ¥æ‰¾æ•°æ®ï¼Œè¿™å°±å¤šäº†ä¸€æ¬¡IOæ“ä½œã€‚</li>
<li><strong>åˆ—å¦‚æœç»å¸¸æ›´æ–°å°±ä¸è¦åˆ›å»ºç´¢å¼•</strong>ï¼Œæ¯”å¦‚â€œè®¢å•çŠ¶æ€â€è¿™ä¸ªå­—æ®µï¼ˆå…¶å€¼æ¯ç§’éƒ½åœ¨å˜ï¼‰ï¼Œç»™å®ƒåˆ›å»ºç´¢å¼•ä¹‹åï¼Œç´¢å¼•å°±ä¼šé¢‘ç¹åœ°æ‰§è¡ŒåŒæ­¥æ“ä½œï¼Œä»è€Œå½±å“åˆ°æ•´ä½“çš„æ€§èƒ½è¡¨ç°ã€‚</li>
<li><strong>è¦é¿å¼€å¯¹å‡½æ•°æ‰§è¡Œç´¢å¼•å­—æ®µ</strong>ï¼Œåƒ <code>WHERE SUBSTR(phone,1,3) = '138'</code> è¿™ç§æƒ…å†µä¼šä½¿ç´¢å¼•å¤±æ•ˆï¼Œåº”è¯¥æ”¹æˆ <code>WHERE phone LIKE '138%'</code>ï¼ˆå‰ç¼€ç¬¦åˆèƒ½å¤Ÿåˆ©ç”¨ç´¢å¼•ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-18">ä¸‰ã€è§†å›¾ç®¡ç†ï¼šç»™æ•°æ® â€œå¼€çª—å£â€ï¼Œç®€åŒ–æŸ¥è¯¢ä¸æ§åˆ¶æƒé™</h3>
<p>è§†å›¾å±äºâ€œè™šæ‹Ÿè¡¨â€ï¼Œå®ƒä¾é SQLæŸ¥è¯¢ç»“æœç”Ÿæˆï¼Œå¹¶æœªå‚¨å­˜å®é™…æ•°æ®ï¼ˆæ•°æ®ä»æ—§ä¿å­˜åœ¨åŸå§‹è¡¨å½“ä¸­ï¼‰ï¼Œå…¶å…³é”®æ„ä¹‰åœ¨äºâ€œéšåŒ¿å¤æ‚æŸ¥è¯¢é€»è¾‘â€ä»¥åŠâ€œè°ƒæ§æ•°æ®å¯è§èŒƒå›´â€ï¼ˆè­¬å¦‚ä»…ä»…å‘ç”¨æˆ·æ˜¾ç¤ºæŸäº›åˆ—ï¼‰ï¼Œæˆ‘ä»¬æŒ‰ç…§â€œåˆ›å»º - æŸ¥çœ‹ - æ“ä½œ - åˆ é™¤â€çš„é¡ºåºæ¥æ‰§è¡Œã€‚</p>
<h4 data-id="heading-19">3.1 1. å…ˆæ‡‚åŸºç¡€ï¼šè§†å›¾çš„æ ¸å¿ƒä½œç”¨ï¼ˆæ–°æ‰‹å¿…çŸ¥ï¼‰</h4>
<p>æ–°æ‰‹å®¹æ˜“æ··æ·† â€œè¡¨â€ å’Œ â€œè§†å›¾â€ï¼Œç”¨é€šä¿—æ¯”å–»ç†è§£ï¼š</p>
<ul>
<li>è¡¨ï¼šâ€œä»“åº“â€ï¼Œå­˜å‚¨å®é™…æ•°æ®ï¼›</li>
<li>è§†å›¾åä¸ºâ€œä»“åº“çª—å£â€ï¼Œæ­¤è§†å›¾ä»…æ˜¾ç¤ºæŒ‡å®šåŒºåŸŸçš„è´§ç‰©ï¼ˆæ•°æ®ï¼‰ï¼Œæ— æ³•çœ‹åˆ°æ•´ä¸ªä»“åº“çš„æ¦‚è²Œï¼Œè€Œä¸”è¯¥çª—å£ä¸å¯ç›´æ¥è¢«ä¿®æ”¹ï¼Œè¦ç»è¿‡æ­¤çª—å£å»æ›´æ”¹ä»“åº“çš„æ•°æ®ï¼Œä¸è¿‡å­˜åœ¨ä¸€äº›é™åˆ¶ã€‚</li>
</ul>
<p>è§†å›¾çš„æ ¸å¿ƒåœºæ™¯ï¼š</p>
<ol>
<li><strong>ç®€åŒ–å¤æ‚æŸ¥è¯¢</strong>ï¼Œå¤šè¡¨å…³è”æŸ¥è¯¢ï¼ˆJOINï¼‰å¯ä»¥è¢«å°è£…æˆè§†å›¾ï¼Œä¹‹åçš„æŸ¥è¯¢ç›´æ¥é’ˆå¯¹è¯¥è§†å›¾å±•å¼€ï¼Œä¸å¿…å†æ¬¡ä¹¦å†™å¤æ‚çš„ SQL è¯­å¥ã€‚</li>
<li><strong>æ•°æ®æƒé™æ§åˆ¶æ–¹é¢</strong>ï¼Œå¯ä»¥å‘æ™®é€šç”¨æˆ·å±•ç¤º <code>sys_user</code> è¡¨ä¸­ <code>name</code> å’Œ <code>phone</code> å­—æ®µçš„å†…å®¹ï¼Œè€Œå°† <code>email</code> è¿™ç±»æ•æ„Ÿä¿¡æ¯é®ç›–èµ·æ¥ï¼Œè¿™è¦ä¾é è§†å›¾æ¥è¾¾æˆã€‚</li>
<li><strong>æ•°æ®ä¸€è‡´æ€§</strong>ï¼šå¤šç³»ç»Ÿå…±ç”¨åŒä¸€æŸ¥è¯¢é€»è¾‘æ—¶ï¼Œè§†å›¾å¯ç¡®ä¿æ‰€æœ‰ç³»ç»Ÿä½¿ç”¨ç›¸åŒçš„ç­›é€‰æ¡ä»¶ã€‚</li>
</ol>
<h4 data-id="heading-20">3.2 2. åˆ›å»ºè§†å›¾ï¼šç”¨ CREATE VIEW è¯­å¥</h4>
<h5 data-id="heading-21">3.2.1 ç¤ºä¾‹ 1ï¼šåŸºç¡€è§†å›¾ï¼ˆç®€åŒ–å•è¡¨æŸ¥è¯¢ï¼‰</h5>
<p>åˆ›å»º â€œç”¨æˆ·åŸºç¡€ä¿¡æ¯è§†å›¾ <code>vw_sys_user_basic</code>â€ï¼ŒåªåŒ…å« <code>id</code>ã€<code>name</code>ã€<code>phone</code> åˆ—ï¼ˆéšè— <code>email</code> æ•æ„Ÿä¿¡æ¯ï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¯­æ³•ï¼šCREATE VIEW è§†å›¾å AS SELECT è¯­å¥;</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> vw_sys_user_basic <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> id, name, phone 
<span class="hljs-keyword">FROM</span> test_schema.sys_user;
</code></pre>
<ul>
<li><strong>æˆåŠŸéªŒè¯</strong>ï¼šæ‰§è¡Œåæç¤º <code>CREATE VIEW</code>ï¼Œè¡¨ç¤ºè§†å›¾åˆ›å»ºæˆåŠŸã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05ca57890de246bb85db7ed9f73923ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=oGrrH6dR5%2FucFT6g4JyG%2B6VY4O0%3D" alt="9c263f90-f43a-4c65-bd61-18968f051c79.png" loading="lazy"/></li>
</ul>
<h5 data-id="heading-22">3.2.2 ç¤ºä¾‹ 2ï¼šè¿›é˜¶è§†å›¾ï¼ˆå¸¦ç­›é€‰æ¡ä»¶çš„å¤æ‚æŸ¥è¯¢ï¼‰</h5>
<p>åˆ›å»º â€œ2024 å¹´åˆ›å»ºçš„ç”¨æˆ·è§†å›¾ <code>vw_sys_user_2024</code>â€ï¼Œç­›é€‰ <code>create_time</code> åœ¨ 2024 å¹´çš„ç”¨æˆ·ï¼ŒåŒ…å« <code>name</code>ã€<code>email</code>ã€<code>create_time</code> åˆ—ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> vw_sys_user_2024 <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> name, email, create_time 
<span class="hljs-keyword">FROM</span> test_schema.sys_user 
<span class="hljs-keyword">WHERE</span> create_time <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2024-01-01 00:00:00'</span> 
  <span class="hljs-keyword">AND</span> create_time <span class="hljs-operator">&lt;</span> <span class="hljs-string">'2025-01-01 00:00:00'</span>;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e6a23dc074d4ef09e80dbdf141b4a85~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=n85fvsOHRJn%2BemSkdr%2FYtN0Z4FE%3D" alt="b96dd12a-d747-4511-a1e9-210afc759dd3.png" loading="lazy"/></p>
<ul>
<li><strong>åŠ¨æ€æ€§</strong>ï¼šè§†å›¾æ•°æ®ä¼šéšåŸè¡¨å˜åŒ–è‡ªåŠ¨æ›´æ–°ï¼ˆå¦‚åŸè¡¨æ–°å¢ 2024 å¹´ç”¨æˆ·ï¼Œè§†å›¾ä¼šè‡ªåŠ¨åŒ…å«è¯¥æ•°æ®ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-23">3.2.3 ç¤ºä¾‹ 3ï¼šåªè¯»è§†å›¾ï¼ˆç¦æ­¢ä¿®æ”¹æ•°æ®ï¼‰</h5>
<p>è‹¥éœ€ç¡®ä¿è§†å›¾æ•°æ®ä¸è¢«ä¿®æ”¹ï¼ˆå¦‚æŠ¥è¡¨è§†å›¾ï¼‰ï¼Œå¯æ·»åŠ  <code>WITH READ ONLY</code> é€‰é¡¹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> vw_sys_user_report <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> name, phone, create_time 
<span class="hljs-keyword">FROM</span> test_schema.sys_user 
<span class="hljs-keyword">WITH</span> READ <span class="hljs-keyword">ONLY</span>;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac6edd45c0444862aeaa079aad4fb989~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=fT4ClO1pAb7%2F9hzLM1RSd2vm8Po%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>æ•ˆæœ</strong>ï¼šåç»­è‹¥å°è¯•é€šè¿‡è§†å›¾ä¿®æ”¹æ•°æ®ï¼ˆå¦‚ <code>UPDATE vw_sys_user_report SET name='å¼ ä¸‰'</code>ï¼‰ï¼Œä¼šæŠ¥é”™ â€œcannot update a read-only viewâ€ã€‚</li>
</ul>
<h4 data-id="heading-24">3.3 3. æŸ¥çœ‹è§†å›¾ï¼šç¡®è®¤è§†å›¾å®šä¹‰ä¸å…³è”è¡¨</h4>
<p>åˆ›å»ºè§†å›¾ä¹‹åï¼Œè¦åˆ©ç”¨ ksql å‘½ä»¤æ¥æŸ¥çœ‹è§†å›¾åˆ—è¡¨ï¼Œå®šä¹‰ä»¥åŠç›¸å…³è”çš„è¡¨ï¼Œå»ºè®®ä½¿ç”¨ <code>\dv</code> å’Œ <code>\d+</code> è¿™ä¸¤ä¸ªå‘½ä»¤ã€‚</p>
<h5 data-id="heading-25">3.3.1 ç¤ºä¾‹ 1ï¼šæŸ¥çœ‹æ‰€æœ‰è§†å›¾ï¼ˆ\dv å‘½ä»¤ï¼‰</h5>
<p>æ‰§è¡Œ <code>\dv</code> å¯åˆ—å‡ºå½“å‰æ¨¡å¼ä¸‹çš„æ‰€æœ‰è§†å›¾ï¼Œç¡®è®¤è§†å›¾æ˜¯å¦åˆ›å»ºæˆåŠŸï¼š</p>
<p><strong>æ‰§è¡Œç»“æœç¤ºä¾‹ï¼š</strong>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a400e2bd015e4b5799c9e6bf13ac4aeb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=nyfJoWN%2BDYSdNXhqQ3zH92q5SAo%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-26">3.3.2 ç¤ºä¾‹ 2ï¼šæŸ¥çœ‹è§†å›¾å®šä¹‰ï¼ˆ\d+ è§†å›¾åï¼‰</h5>
<p>è‹¥éœ€ç¡®è®¤è§†å›¾çš„åº•å±‚ SQLï¼ˆå¦‚å¿˜è®°è§†å›¾ç­›é€‰æ¡ä»¶ï¼‰ï¼Œæ‰§è¡Œ <code>\d+ è§†å›¾å</code>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">\d<span class="hljs-operator">+</span> vw_sys_user_2024
</code></pre>
<p><strong>æ‰§è¡Œç»“æœç¤ºä¾‹ï¼ˆå®šä¹‰éƒ¨åˆ†ï¼‰ï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6a6f06047d040c6b0112b3af6eb9428~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=jEBLtQrZwBeDNunk0pGdh7DzbOg%3D" alt="image.png" loading="lazy"/></p>
<p>ç›´æ¥å±•ç¤ºè§†å›¾çš„å®Œæ•´ SQL å®šä¹‰ï¼Œä¾¿äºåç»­ä¿®æ”¹æˆ–éªŒè¯é€»è¾‘ã€‚</p>
<h4 data-id="heading-27">3.4 4. è§†å›¾æ“ä½œï¼šæŸ¥è¯¢ã€ä¿®æ”¹ä¸åˆ é™¤</h4>
<p>è§†å›¾çš„æ ¸å¿ƒæ“ä½œæ˜¯ â€œæŸ¥è¯¢â€ï¼Œä¿®æ”¹å’Œåˆ é™¤éœ€éµå¾ªç‰¹å®šè§„åˆ™</p>
<h5 data-id="heading-28">3.4.1 ç¤ºä¾‹ 1ï¼šæŸ¥è¯¢è§†å›¾æ•°æ®ï¼ˆä¸è¡¨æŸ¥è¯¢ä¸€è‡´ï¼‰</h5>
<p>æŸ¥è¯¢è§†å›¾æ•°æ®çš„è¯­æ³•å’ŒæŸ¥è¯¢è¡¨å®Œå…¨ç›¸åŒï¼Œæ— éœ€é¢å¤–å­¦ä¹ ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥è¯¢åŸºç¡€è§†å›¾æ•°æ®</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> vw_sys_user_basic;
<span class="hljs-comment">-- æŸ¥è¯¢2024å¹´ç”¨æˆ·è§†å›¾ï¼ŒæŒ‰åˆ›å»ºæ—¶é—´æ’åº</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> vw_sys_user_2024 <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> create_time <span class="hljs-keyword">DESC</span>;
</code></pre>
<ul>
<li><strong>æ•ˆæœ</strong>ï¼šè¿”å›ç»“æœä¸æŸ¥è¯¢åŸè¡¨ç­›é€‰åçš„æ•°æ®ä¸€è‡´ï¼Œä½†çœ‹ä¸åˆ°éšè—çš„åˆ—ï¼ˆå¦‚ <code>email</code> åœ¨ <code>vw_sys_user_basic</code> ä¸­ä¸å¯è§ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-29">3.4.2 ç¤ºä¾‹ 2ï¼šä¿®æ”¹è§†å›¾å®šä¹‰ï¼ˆCREATE OR REPLACEï¼‰</h5>
<p>è‹¥éœ€è°ƒæ•´è§†å›¾çš„ç­›é€‰æ¡ä»¶æˆ–åˆ—ï¼ˆå¦‚ <code>vw_sys_user_2024</code> æ”¹ä¸ºåŒ…å« 2023 å¹´æ•°æ®ï¼‰ï¼Œæ— éœ€åˆ é™¤è§†å›¾ï¼Œç›´æ¥ç”¨ <code>CREATE OR REPLACE</code> ä¿®æ”¹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE <span class="hljs-keyword">VIEW</span> vw_sys_user_2024 <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> name, email, create_time 
<span class="hljs-keyword">FROM</span> test_schema.sys_user 
<span class="hljs-keyword">WHERE</span> create_time <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2023-01-01 00:00:00'</span> 
  <span class="hljs-keyword">AND</span> create_time <span class="hljs-operator">&lt;</span> <span class="hljs-string">'2025-01-01 00:00:00'</span>;
</code></pre>
<ul>
<li><strong>éªŒè¯</strong>ï¼šæ‰§è¡Œ <code>\d+ vw_sys_user_2024</code> ç¡®è®¤å®šä¹‰å·²æ›´æ–°ã€‚</li>
</ul>
<h5 data-id="heading-30">3.4.3 ç¤ºä¾‹ 3ï¼šåˆ é™¤è§†å›¾ï¼ˆDROP VIEWï¼‰</h5>
<p>å½“è§†å›¾ä¸å†ä½¿ç”¨æ—¶ï¼Œæ‰§è¡Œåˆ é™¤å‘½ä»¤ï¼ˆ<strong>åˆ é™¤è§†å›¾ä¸å½±å“åŸè¡¨æ•°æ®</strong>ï¼Œä»…åˆ é™¤è§†å›¾å®šä¹‰ï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¯­æ³•ï¼šDROP VIEW IF EXISTS è§†å›¾å;</span>
<span class="hljs-keyword">DROP</span> <span class="hljs-keyword">VIEW</span> IF <span class="hljs-keyword">EXISTS</span> vw_sys_user_report;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5db1de87c1814f35b1c307739b2d7462~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767486670&amp;x-signature=SZSaEVKxDZzT0owYyL9PPyLRCXw%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>éªŒè¯</strong>ï¼šæ‰§è¡Œ <code>\dv</code> ç¡®è®¤è§†å›¾å·²ç§»é™¤ã€‚</li>
</ul>
<h4 data-id="heading-31">3.5 5. è§†å›¾ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼ˆæ–°æ‰‹é¿å‘æŒ‡å—ï¼‰</h4>
<ol>
<li><strong>è§†å›¾ä¿®æ”¹é™åˆ¶</strong>ï¼šå«ä»¥ä¸‹æƒ…å†µçš„è§†å›¾æ— æ³•ä¿®æ”¹æ•°æ®ï¼ˆå³ä½¿æœªåŠ  <code>READ ONLY</code>ï¼‰ï¼š
<ul>
<li>è§†å›¾æ¶µç›– <code>DISTINCT</code>ï¼ˆå»é‡ï¼‰ï¼Œ<code>GROUP BY</code>ï¼ˆåˆ†ç»„ï¼‰ï¼Œ<code>HAVING</code>ï¼ˆç­›é€‰åˆ†ç»„ï¼‰ã€‚</li>
<li>è§†å›¾åŒ…å«èšåˆå‡½æ•°ï¼ˆå¦‚ <code>COUNT</code>ã€<code>SUM</code>ï¼‰ï¼›</li>
<li>è§†å›¾æ¥è‡ªå¤šè¡¨å…³è”ï¼ˆ<code>JOIN</code>ï¼‰ï¼›</li>
</ul>
</li>
<li><strong>åŸè¡¨åˆ é™¤å½±å“</strong>ï¼šè‹¥åŸè¡¨ï¼ˆæ¯”å¦‚ <code>sys_user</code> è¡¨ï¼‰è¢«åˆ é™¤ï¼Œåˆ™è¯¥è§†å›¾å°±ä¼šæˆä¸ºâ€œæ— æ•ˆè§†å›¾â€ï¼Œåœ¨æ‰§è¡ŒæŸ¥è¯¢çš„æ—¶å€™ï¼Œä¼šæ”¶åˆ°â€œrelation does not existâ€çš„é”™è¯¯æç¤ºã€‚</li>
<li><strong>æ€§èƒ½æ³¨æ„</strong>ï¼šå¤æ‚è§†å›¾åŒ…å«å¤šè¡¨å…³è”æˆ–è€…èšåˆæƒ…å†µæ—¶ï¼Œå…¶æŸ¥è¯¢æ•ˆç‡ä¾é åŸè¡¨ç´¢å¼•ï¼Œæ‰€ä»¥è¦ä¿è¯åŸè¡¨ä¸­ç›¸å…³è”çš„å­—æ®µå·²æœ‰ç´¢å¼•ï¼Œæ¯”å¦‚åœ¨å¤šè¡¨ <code>JOIN</code> æ“ä½œé‡Œæ¶‰åŠçš„å…³è”åˆ—å°±éœ€è¦äº‹å…ˆåˆ›å»ºå¥½ç´¢å¼•ã€‚</li>
</ol>
<h3 data-id="heading-32">å››ã€å¸¸è§é—®é¢˜æ’æŸ¥ï¼šç´¢å¼•ä¸è§†å›¾çš„é«˜é¢‘æŠ¥é”™</h3>
<h4 data-id="heading-33">é—®é¢˜ 1ï¼šåˆ›å»ºç´¢å¼•æŠ¥é”™ â€œé‡å¤çš„é”®åâ€</h4>
<p><strong>æŠ¥é”™ä¿¡æ¯</strong>ï¼š</p>
<pre><code class="hljs language-plaintext" lang="plaintext">ERROR:  duplicate key name "idx_sys_user_phone"
</code></pre>
<p><strong>åŸå› </strong>ï¼šåŒåç´¢å¼•å·²å­˜åœ¨ï¼ˆå¦‚ä¹‹å‰å·²åˆ›å»º <code>idx_sys_user_phone</code>ï¼‰ã€‚<br/>
<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>æ‰§è¡Œ <code>\di</code> æŸ¥çœ‹ç´¢å¼•åï¼Œç¡®è®¤æ˜¯å¦é‡å¤ï¼›</li>
<li>è‹¥éœ€é‡æ–°å»ºç´¢å¼•ï¼Œå…ˆåˆ é™¤æ—§ç´¢å¼•ï¼ˆ<code>DROP INDEX idx_sys_user_phone;</code>ï¼‰ï¼Œå†åˆ›å»ºæ–°ç´¢å¼•ã€‚</li>
</ul>
<h4 data-id="heading-34">é—®é¢˜ 2ï¼šæŸ¥è¯¢è§†å›¾æŠ¥é”™ â€œå…³ç³»å¯¹è±¡ä¸å­˜åœ¨â€</h4>
<p><strong>æŠ¥é”™ä¿¡æ¯</strong>ï¼š</p>
<pre><code class="hljs language-plaintext" lang="plaintext">ERROR:  relation "vw_sys_user_basic" does not exist
</code></pre>
<p><strong>åŸå› </strong>ï¼š</p>
<ol>
<li>è§†å›¾åæ‹¼å†™é”™è¯¯ï¼ˆå¦‚ <code>vw_sys_user_basci</code>ï¼‰ï¼›</li>
<li>è§†å›¾æ‰€åœ¨æ¨¡å¼ä¸åœ¨æœç´¢è·¯å¾„ä¸­ï¼ˆå¦‚è§†å›¾åœ¨ <code>test_schema</code>ï¼Œä½†å½“å‰æœç´¢è·¯å¾„æ˜¯ <code>public</code>ï¼‰ã€‚<br/>
<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</li>
</ol>
<ul>
<li>æ£€æŸ¥è§†å›¾åæ‹¼å†™ï¼ˆæ‰§è¡Œ <code>\dv</code> ç¡®è®¤æ­£ç¡®åç§°ï¼‰ï¼›</li>
<li>åˆ‡æ¢åˆ°è§†å›¾æ‰€åœ¨æ¨¡å¼ï¼ˆ<code>SET search_path TO test_schema, public;</code>ï¼‰ï¼Œæˆ–ç”¨ â€œæ¨¡å¼åã€‚è§†å›¾åâ€ å…¨ç§°æŸ¥è¯¢ï¼ˆ<code>SELECT * FROM test_schema.vw_sys_user_basic;</code>ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-35">é—®é¢˜ 3ï¼šé€šè¿‡è§†å›¾ä¿®æ”¹æ•°æ®æŠ¥é”™ â€œæ— æ³•æ›´æ–°åªè¯»è§†å›¾â€</h4>
<p><strong>æŠ¥é”™ä¿¡æ¯</strong>ï¼š</p>
<pre><code class="hljs language-plaintext" lang="plaintext">ERROR:  cannot update a read-only view "vw_sys_user_report"
</code></pre>
<p><strong>åŸå› </strong>ï¼šè§†å›¾åˆ›å»ºæ—¶åŠ äº† <code>WITH READ ONLY</code> é€‰é¡¹ï¼Œç¦æ­¢ä¿®æ”¹ã€‚<br/>
<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>
<p>è‹¥éœ€å…è®¸ä¿®æ”¹ï¼Œé‡æ–°åˆ›å»ºè§†å›¾ï¼ˆå»æ‰ <code>WITH READ ONLY</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE <span class="hljs-keyword">VIEW</span> vw_sys_user_report <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> name, phone, create_time <span class="hljs-keyword">FROM</span> sys_user;
</code></pre>
</li>
<li>
<p>æ³¨æ„ï¼šé‡æ–°åˆ›å»ºå‰éœ€ç¡®è®¤è§†å›¾æ— ä¿®æ”¹é™åˆ¶ï¼ˆå¦‚ä¸å« <code>GROUP BY</code>ã€èšåˆå‡½æ•°ç­‰ï¼‰ã€‚</p>
</li>
</ul>
<h3 data-id="heading-36">äº”ã€æ€»ç»“ï¼šç´¢å¼•ä¸è§†å›¾çš„é…åˆä½¿ç”¨</h3>
<p>æœ¬æ–‡å®Œæ•´è¦†ç›–äº†ç´¢å¼•å’Œè§†å›¾çš„æ ¸å¿ƒæ“ä½œï¼Œæ ¸å¿ƒè¦ç‚¹å¯æ€»ç»“ä¸ºï¼š</p>
<p>1.<strong>ç®¡ç†</strong>â€œæŸ¥è¯¢é€Ÿåº¦â€æ—¶ï¼Œä¾ç…§æŸ¥è¯¢åœºæ™¯æ¥æŒ‘é€‰æ™®é€š/å”¯ä¸€/å¤åˆç´¢å¼•ï¼Œä¸è¦è¿‡åº¦åˆ›å»ºï¼Œè¦å®šæ—¶æ‰§è¡Œé‡å»ºå¹¶æ”¹å–„æ€§èƒ½ã€‚
2. <strong>è§†å›¾</strong>ï¼šç®¡ â€œæŸ¥è¯¢ç®€åŒ–ä¸æƒé™â€ï¼Œå°è£…å¤æ‚é€»è¾‘ã€éšè—æ•æ„Ÿæ•°æ®ï¼Œæ³¨æ„ä¿®æ”¹é™åˆ¶å’ŒåŸè¡¨ä¾èµ–ï¼›</p>
<ol start="3">
<li><strong>é…åˆä½¿ç”¨</strong>ï¼šè§†å›¾çš„æŸ¥è¯¢é€Ÿåº¦ä¸åŸè¡¨ç´¢å¼•ç›¸å…³ï¼Œç»™<code>vw_sys_user_2024</code>è§†å›¾å¯¹åº”çš„<code>sys_user</code>åŸè¡¨åˆ›å»º<code>create - time</code>ç´¢å¼•ä¹‹åï¼Œå…¶æŸ¥è¯¢æ•ˆç‡ä¼šå¾—åˆ°å¾ˆå¤§çš„æ”¹å–„ã€‚</li>
</ol>
<p>æŒæ¡äº†ç´¢å¼•å’Œè§†å›¾ä¹‹åï¼Œä½ å°±å…·æœ‰äº† KingbaseES é«˜æ•ˆæŸ¥è¯¢çš„å…³é”®èƒ½åŠ›ï¼Œä¸‹ç¯‡æ–‡ç« æˆ‘ä»¬ä¼šå­¦ä¹ â€œç”¨æˆ·ä¸æƒé™ç®¡ç†â€ï¼Œä»è€Œä¿éšœæ•°æ®åº“è®¿é—®çš„å®‰å…¨ï¼Œå¹¶åšåˆ°â€œä¸åŒç”¨æˆ·è®¿é—®ä¸åŒæ•°æ®â€è¿™æ ·ç»†è‡´çš„æ§åˆ¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ7ï¼‰Hibernateçš„Sessionæ˜¯ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7588680081325686826</link>    <guid>https://juejin.cn/post/7588680081325686826</guid>    <pubDate>2025-12-27T23:14:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588680081325686826" data-draft-id="7588191506606276614" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ7ï¼‰Hibernateçš„Sessionæ˜¯ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-27T23:14:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ7ï¼‰Hibernateçš„Sessionæ˜¯ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T23:14:28.000Z" title="Sat Dec 27 2025 23:14:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Hibernateçš„<code>Session</code>æ˜¯ä¸€ä¸ªæ ¸å¿ƒæ¥å£ï¼Œå®ƒè¡¨ç¤ºä¸æ•°æ®åº“çš„å•ä¸ªä¼šè¯ã€‚<code>Session</code>å¯¹è±¡è´Ÿè´£æ‰§è¡ŒCRUDï¼ˆåˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤ï¼‰æ“ä½œï¼Œå¹¶å°†æŒä¹…åŒ–å¯¹è±¡çš„çŠ¶æ€ä¸æ•°æ®åº“åŒæ­¥ã€‚æ¯ä¸ª<code>Session</code>å¯¹è±¡éƒ½æ˜¯çŸ­æš‚çš„ï¼Œå¹¶ä¸”ä¸åº”è¯¥åœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´å…±äº«ã€‚</p>
<h3 data-id="heading-0">ä¸»è¦åŠŸèƒ½</h3>
<ol>
<li><strong>CRUDæ“ä½œ</strong>ï¼šä½¿ç”¨<code>save</code>ã€<code>update</code>ã€<code>delete</code>ç­‰æ–¹æ³•è¿›è¡ŒæŒä¹…åŒ–æ“ä½œã€‚</li>
<li><strong>æŸ¥è¯¢æ“ä½œ</strong>ï¼šé€šè¿‡HQLï¼ˆHibernate Query Languageï¼‰æˆ–Criteria APIæ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢ã€‚</li>
<li><strong>äº‹åŠ¡ç®¡ç†</strong>ï¼šé€šè¿‡<code>beginTransaction</code>ã€<code>getTransaction</code>ç­‰æ–¹æ³•ç®¡ç†äº‹åŠ¡ã€‚</li>
<li><strong>ç¼“å­˜ç®¡ç†</strong>ï¼šç®¡ç†ä¸€çº§ç¼“å­˜ï¼ˆSessionç¼“å­˜ï¼‰ï¼Œå‡å°‘æ•°æ®åº“è®¿é—®æ¬¡æ•°ã€‚</li>
</ol>
<h3 data-id="heading-1">è¯¦ç»†æ·±å…¥ç»“åˆä»£ç </h3>
<h4 data-id="heading-2">1. è·å–Session</h4>
<p>é€šå¸¸ï¼Œé€šè¿‡<code>SessionFactory</code>è·å–<code>Session</code>å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateUtil</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// åˆ›å»ºSessionFactory</span>
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SessionFactory <span class="hljs-title function_">getSessionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> sessionFactory;
    }
}
</code></pre>
<h4 data-id="heading-3">2. ä½¿ç”¨Sessionè¿›è¡ŒCRUDæ“ä½œ</h4>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä»£ç ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨<code>Session</code>è¿›è¡ŒCRUDæ“ä½œã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// è·å–SessionFactory</span>
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory();
        <span class="hljs-comment">// æ‰“å¼€ä¸€ä¸ªæ–°çš„Session</span>
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();

        <span class="hljs-comment">// å¯åŠ¨äº‹åŠ¡</span>
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();

        <span class="hljs-comment">// åˆ›å»ºå¹¶ä¿å­˜Studentå¯¹è±¡</span>
        <span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"John Doe"</span>, <span class="hljs-number">20</span>);
        session.save(student); <span class="hljs-comment">// ä¿å­˜å¯¹è±¡</span>

        <span class="hljs-comment">// æäº¤äº‹åŠ¡</span>
        transaction.commit();

        <span class="hljs-comment">// é‡æ–°å¼€å§‹ä¸€ä¸ªæ–°çš„äº‹åŠ¡</span>
        transaction = session.beginTransaction();

        <span class="hljs-comment">// è¯»å–Studentå¯¹è±¡</span>
        <span class="hljs-type">Student</span> <span class="hljs-variable">retrievedStudent</span> <span class="hljs-operator">=</span> session.get(Student.class, student.getId());
        System.out.println(<span class="hljs-string">"Retrieved Student: "</span> + retrievedStudent.getName() + <span class="hljs-string">", Age: "</span> + retrievedStudent.getAge());

        <span class="hljs-comment">// æ›´æ–°Studentå¯¹è±¡</span>
        retrievedStudent.setAge(<span class="hljs-number">21</span>);
        session.update(retrievedStudent); <span class="hljs-comment">// æ›´æ–°å¯¹è±¡</span>

        <span class="hljs-comment">// åˆ é™¤Studentå¯¹è±¡</span>
        session.delete(retrievedStudent); <span class="hljs-comment">// åˆ é™¤å¯¹è±¡</span>

        <span class="hljs-comment">// æäº¤äº‹åŠ¡</span>
        transaction.commit();

        <span class="hljs-comment">// å…³é—­Session</span>
        session.close();
        <span class="hljs-comment">// å…³é—­SessionFactory</span>
        sessionFactory.close();
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> {
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> {}

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.age = age;
    }

    <span class="hljs-comment">// getters å’Œ setters</span>
    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> age;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.age = age;
    }
}
</code></pre>
<h3 data-id="heading-4">è¯¦ç»†è§£é‡Š</h3>
<ol>
<li><strong>è·å–SessionFactory</strong>ï¼šé€šè¿‡<code>HibernateUtil.getSessionFactory()</code>è·å–<code>SessionFactory</code>ã€‚</li>
<li><strong>æ‰“å¼€Session</strong>ï¼šé€šè¿‡<code>sessionFactory.openSession()</code>æ‰“å¼€ä¸€ä¸ªæ–°çš„<code>Session</code>ã€‚</li>
<li><strong>å¼€å§‹äº‹åŠ¡</strong>ï¼šé€šè¿‡<code>session.beginTransaction()</code>å¼€å§‹ä¸€ä¸ªäº‹åŠ¡ã€‚</li>
<li><strong>CRUDæ“ä½œ</strong>ï¼š
<ul>
<li><strong>åˆ›å»ºå¹¶ä¿å­˜å¯¹è±¡</strong>ï¼šä½¿ç”¨<code>session.save(student)</code>æ–¹æ³•å°†å¯¹è±¡æŒä¹…åŒ–åˆ°æ•°æ®åº“ä¸­ã€‚</li>
<li><strong>è¯»å–å¯¹è±¡</strong>ï¼šä½¿ç”¨<code>session.get(Student.class, student.getId())</code>æ–¹æ³•ä»æ•°æ®åº“ä¸­è¯»å–å¯¹è±¡ã€‚</li>
<li><strong>æ›´æ–°å¯¹è±¡</strong>ï¼šä¿®æ”¹å¯¹è±¡å±æ€§åï¼Œä½¿ç”¨<code>session.update(retrievedStudent)</code>æ–¹æ³•æ›´æ–°æ•°æ®åº“ä¸­çš„è®°å½•ã€‚</li>
<li><strong>åˆ é™¤å¯¹è±¡</strong>ï¼šä½¿ç”¨<code>session.delete(retrievedStudent)</code>æ–¹æ³•ä»æ•°æ®åº“ä¸­åˆ é™¤å¯¹è±¡ã€‚</li>
</ul>
</li>
<li><strong>æäº¤äº‹åŠ¡</strong>ï¼šé€šè¿‡<code>transaction.commit()</code>æäº¤äº‹åŠ¡ï¼Œå°†æ‰€æœ‰æ›´æ”¹åŒæ­¥åˆ°æ•°æ®åº“ã€‚</li>
<li><strong>å…³é—­Session</strong>ï¼šé€šè¿‡<code>session.close()</code>å…³é—­<code>Session</code>ã€‚</li>
<li><strong>å…³é—­SessionFactory</strong>ï¼šé€šè¿‡<code>sessionFactory.close()</code>å…³é—­<code>SessionFactory</code>ã€‚</li>
</ol>
<h3 data-id="heading-5">äº‹åŠ¡ç®¡ç†</h3>
<p>åœ¨ä»¥ä¸Šç¤ºä¾‹ä¸­ï¼Œäº‹åŠ¡ç®¡ç†æ˜¯ä¸€ä¸ªå…³é”®éƒ¨åˆ†ã€‚äº‹åŠ¡ç”¨äºç¡®ä¿ä¸€ç»„æ•°æ®åº“æ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å›æ»šï¼Œä»¥ä¿æŒæ•°æ®çš„ä¸€è‡´æ€§ã€‚Hibernateé€šè¿‡<code>Session</code>å¯¹è±¡æä¾›äº†å¯¹äº‹åŠ¡çš„ç®¡ç†ã€‚</p>
<h4 data-id="heading-6">äº‹åŠ¡ç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
<span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;

<span class="hljs-keyword">try</span> {
    transaction = session.beginTransaction();
    <span class="hljs-comment">// æ‰§è¡Œä¸€ç»„æ•°æ®åº“æ“ä½œ</span>
    session.save(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"John Doe"</span>, <span class="hljs-number">20</span>));
    transaction.commit(); <span class="hljs-comment">// æäº¤äº‹åŠ¡</span>
} <span class="hljs-keyword">catch</span> (Exception e) {
    <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
        transaction.rollback(); <span class="hljs-comment">// å›æ»šäº‹åŠ¡</span>
    }
    e.printStackTrace();
} <span class="hljs-keyword">finally</span> {
    session.close(); <span class="hljs-comment">// å…³é—­Session</span>
}
</code></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœåœ¨äº‹åŠ¡ä¸­å‘ç”Ÿä»»ä½•å¼‚å¸¸ï¼Œäº‹åŠ¡å°†è¢«å›æ»šï¼Œç¡®ä¿æ•°æ®åº“çŠ¶æ€ä¸å—å½±å“ã€‚</p>
<h3 data-id="heading-7">æ€»ç»“</h3>
<p>Hibernateçš„<code>Session</code>æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„æ¥å£ï¼Œç”¨äºå¤„ç†æŒä¹…åŒ–å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚å®ƒæä¾›äº†CRUDæ“ä½œã€æŸ¥è¯¢ã€äº‹åŠ¡ç®¡ç†å’Œç¼“å­˜ç®¡ç†ç­‰åŠŸèƒ½ï¼Œæ˜¯Hibernateä¸æ•°æ®åº“äº¤äº’çš„æ ¸å¿ƒç»„ä»¶ã€‚é€šè¿‡æ­£ç¡®ä½¿ç”¨<code>Session</code>ï¼Œå¼€å‘è€…å¯ä»¥é«˜æ•ˆåœ°è¿›è¡Œæ•°æ®åº“æ“ä½œï¼ŒåŒæ—¶ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>