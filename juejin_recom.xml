<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[æœ¬åœ°ç³»ç»Ÿã€è™šæ‹Ÿæœºã€è¿œç¨‹æœåŠ¡å™¨ä¸‰è€…ä¹‹é—´çš„æ ¸å¿ƒåŒºåˆ«]]></title>    <link>https://juejin.cn/post/7576821684252262443</link>    <guid>https://juejin.cn/post/7576821684252262443</guid>    <pubDate>2025-11-26T10:25:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576821684252262443" data-draft-id="7576859345934598198" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœ¬åœ°ç³»ç»Ÿã€è™šæ‹Ÿæœºã€è¿œç¨‹æœåŠ¡å™¨ä¸‰è€…ä¹‹é—´çš„æ ¸å¿ƒåŒºåˆ«"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-26T10:25:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="tomato_404"/> <meta itemprop="url" content="https://juejin.cn/user/2179677551600074"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœ¬åœ°ç³»ç»Ÿã€è™šæ‹Ÿæœºã€è¿œç¨‹æœåŠ¡å™¨ä¸‰è€…ä¹‹é—´çš„æ ¸å¿ƒåŒºåˆ«
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2179677551600074/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    tomato_404
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T10:25:15.000Z" title="Wed Nov 26 2025 10:25:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸŒ ä¸€å¥è¯æ€»ç»“</h2>
<p>âœ… ä½ ä¹‹æ‰€ä»¥ç”¨ <strong>Tabby è¿æ¥å…¬å¸æœåŠ¡å™¨</strong> ä¸éœ€è¦è™šæ‹Ÿæœºï¼Œ<br/>
æ˜¯å› ä¸ºé‚£å°æœåŠ¡å™¨ <strong>å·²ç»æ˜¯ä¸€å°è¿è¡Œç€ Ubuntu çš„ç‹¬ç«‹ç”µè„‘ï¼ˆè¿œç¨‹æœºå™¨ï¼‰</strong> ã€‚<br/>
è€Œä½ è¦åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šâ€œæ‹¥æœ‰ä¸€ä¸ª Ubuntu ç¯å¢ƒâ€ï¼Œ<br/>
å°±å¾—è‡ªå·±â€œé€ å‡ºâ€è¿™æ ·ä¸€å°è™šæ‹Ÿçš„ç”µè„‘â€”â€”é‚£å°±æ˜¯è™šæ‹Ÿæœºã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸ§  ç±»æ¯”ç†è§£ï¼šè™šæ‹Ÿæœº vs è¿œç¨‹æœåŠ¡å™¨</h2>





























<table><thead><tr><th>æ¦‚å¿µ</th><th>æ˜¯ä»€ä¹ˆ</th><th>åœ¨å“ªå„¿è¿è¡Œ</th><th>ä½ å¦‚ä½•è¿›å…¥</th></tr></thead><tbody><tr><td>ğŸ’» ä½ è‡ªå·±çš„ç”µè„‘ï¼ˆWindowsï¼‰</td><td>ç‰©ç†æœº</td><td>æ¡Œå­ä¸Šçš„ç”µè„‘</td><td>ç›´æ¥æ“ä½œ</td></tr><tr><td>ğŸ§± è™šæ‹Ÿæœºï¼ˆVMï¼‰</td><td>ä¸€å°â€œåœ¨ä½ ç”µè„‘é‡Œæ¨¡æ‹Ÿå‡ºæ¥çš„å¦ä¸€å°ç”µè„‘â€</td><td>è¿è¡Œåœ¨ä½ çš„ç‰©ç†æœºé‡Œ</td><td>é€šè¿‡è™šæ‹Ÿæœºè½¯ä»¶æ‰“å¼€</td></tr><tr><td>ğŸ–¥ï¸ å…¬å¸æœåŠ¡å™¨ï¼ˆUbuntuï¼‰</td><td>ä¸€å°çœŸå®å­˜åœ¨çš„è¿œç¨‹ç”µè„‘ï¼ˆåœ¨æœºæˆ¿æˆ–äº‘ä¸Šï¼‰</td><td>è¿è¡Œåœ¨å…¬å¸ç½‘ç»œ</td><td>ç”¨ SSHï¼ˆå¦‚ Tabbyï¼‰è¿œç¨‹è¿æ¥</td></tr></tbody></table>
<p>æ‰€ä»¥åŒºåˆ«å°±åœ¨äºï¼š</p>
<ul>
<li><strong>è™šæ‹Ÿæœº = åœ¨ä½ ç”µè„‘é‡Œâ€œæ¨¡æ‹Ÿå‡ºå¦ä¸€å°ç”µè„‘â€</strong> ï¼›</li>
<li><strong>æœåŠ¡å™¨ = å·²ç»å­˜åœ¨çš„â€œå¦ä¸€å°çœŸå®ç”µè„‘â€</strong> ï¼›</li>
<li><strong>SSHï¼ˆTabbyï¼‰ = ä½ ç”¨ç½‘çº¿è¿è¿‡å»è¿œç¨‹æ“ä½œé‚£å°ç”µè„‘çš„â€œé”®ç›˜å’Œå±å¹•â€ã€‚</strong></li>
</ul>
<hr/>
<h2 data-id="heading-2">ğŸ” æ›´æ·±å…¥ä¸€ç‚¹ï¼šTabby å¹¶ä¸æ˜¯è¿è¡Œ Ubuntuï¼Œè€Œæ˜¯åœ¨â€œè¿œç¨‹ç™»å½•â€Ubuntu</h2>
<p>å½“ä½ è¿è¡Œï¼š</p>
<pre><code class="hljs language-sql" lang="sql">ssh <span class="hljs-keyword">user</span><span class="hljs-variable">@192</span><span class="hljs-number">.168</span><span class="hljs-number">.31</span><span class="hljs-number">.185</span>
</code></pre>
<p>æˆ–ç”¨ Tabby è¿æ¥å…¬å¸æœåŠ¡å™¨æ—¶ï¼š</p>
<ul>
<li>ä½ çš„ç”µè„‘åªæ˜¯ä¸€ä¸ª<strong>ç»ˆç«¯ç•Œé¢</strong>ï¼ˆç›¸å½“äºâ€œæ˜¾ç¤ºå™¨ + é”®ç›˜â€ï¼‰ï¼›</li>
<li>è¿è¡Œå‘½ä»¤ã€æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œé…ç½®éƒ½å‘ç”Ÿåœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šï¼›</li>
<li>æ‰€ä»¥ä½ ä¼šçœ‹åˆ°é‚£è¾¹çš„ï¼š</li>
</ul>

<ul>
<li>
<ul>
<li>Ubuntu ç³»ç»Ÿ</li>
<li>å·²ç»å®‰è£…å¥½çš„ nginxã€docker ç­‰ç­‰ï¼›</li>
<li>ä½ åªæ˜¯åœ¨æ“ä½œé‚£å°è¿œç¨‹æœºå™¨ã€‚</li>
</ul>
</li>
</ul>
<p>è€Œå¦‚æœä½ æƒ³åœ¨<strong>è‡ªå·±çš„ç”µè„‘ä¸Š</strong>ä¹Ÿæœ‰ä¸€æ ·çš„ Ubuntu ç¯å¢ƒï¼Œ<br/>
å› ä¸ºä½ æ‰‹ä¸Šè¿™å°æœºå™¨è¿è¡Œçš„å¯èƒ½æ˜¯ <strong>Windows</strong> æˆ– <strong>macOS</strong>ï¼Œ<br/>
é‚£å°±å¾—â€œè™šæ‹Ÿâ€å‡ºä¸€å° Ubuntu ç³»ç»Ÿçš„ç”µè„‘ï¼Œé è™šæ‹Ÿæœºå®ç°ã€‚</p>
<hr/>
<h2 data-id="heading-3">ğŸ§© å¯¹æ¯”ä¸€ä¸‹ä½ çš„ä¸¤ç§æƒ…å†µï¼š</h2>























<table><thead><tr><th>åœºæ™¯</th><th>è¿è¡Œçš„ç³»ç»Ÿ</th><th>ç‰©ç†æœºå™¨æ˜¯è°</th><th>ä¸ºä»€ä¹ˆèƒ½ç”¨ Ubuntu</th></tr></thead><tbody><tr><td>â‘  Tabby è¿å…¬å¸æœåŠ¡å™¨</td><td>Ubuntu</td><td>æœåŠ¡å™¨ï¼ˆ192.168.31.185ï¼‰</td><td>æœåŠ¡å™¨å·²ç»è£…å¥½äº† Ubuntu</td></tr><tr><td>â‘¡ è‡ªå·±ç”µè„‘ï¼ˆWindowsï¼‰</td><td>Windows</td><td>ä½ è‡ªå·±çš„ç¬”ç”µ / PC</td><td>æ²¡æœ‰ Ubuntuï¼Œéœ€è¦è™šæ‹Ÿæœºæˆ– WSL</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-4">âš™ï¸ é‚£å¦‚æœæˆ‘æƒ³åƒå…¬å¸æœåŠ¡å™¨é‚£æ ·ï¼Œæœ¬æœºä¹Ÿèƒ½è·‘ Ubuntuï¼Œæœ‰å“ªäº›é€‰æ‹©ï¼Ÿ</h2>






























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>åŸç†</th><th>æ˜¯å¦éœ€è¦è™šæ‹Ÿæœº</th></tr></thead><tbody><tr><td><strong>VirtualBox / VMware å®‰è£… Ubuntu</strong></td><td>ç›´æ¥åœ¨ Windows ä¸Šå¼€ä¸€å°â€œè™šæ‹Ÿç”µè„‘â€è£… Ubuntu</td><td>âœ… éœ€è¦è™šæ‹Ÿæœº</td></tr><tr><td><strong>WSL2 (Windows Subsystem for Linux)</strong></td><td>å¾®è½¯æä¾›çš„è½»é‡ Linux å­ç³»ç»Ÿ</td><td>âŒ ä¸éœ€è¦ä¼ ç»Ÿè™šæ‹Ÿæœºï¼Œæ¨è</td></tr><tr><td><strong>Docker Desktop</strong></td><td>å®ƒåœ¨åº•å±‚ç”¨è½»é‡è™šæ‹ŸåŒ–è·‘ Linux å†…æ ¸</td><td>âš™ï¸ è‡ªåŠ¨ç®¡ç†è™šæ‹Ÿå±‚ï¼Œæ— éœ€ä½ é…ç½®</td></tr><tr><td><strong>ä¹°/ç§Ÿäº‘æœåŠ¡å™¨ï¼ˆè¿œç¨‹ä¸»æœºï¼‰</strong></td><td>ç›´æ¥è¿è¿œç¨‹ Ubuntu</td><td>âŒ ä¸éœ€è¦è™šæ‹Ÿæœºï¼Œæœ¬èº«å°±æ˜¯æœåŠ¡å™¨</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-5">ğŸ§­ ä½ å¯ä»¥è¿™æ ·ç†è§£ä¸€æ¡ä¸»çº¿ï¼š</h2>
<p>ç‰©ç†æœºå™¨ï¼ˆä½ çš„ç”µè„‘ æˆ– å…¬å¸æœåŠ¡å™¨ï¼‰<br/>
â†’ ä¸Šé¢è¿è¡Œç³»ç»Ÿï¼ˆWindows æˆ– Ubuntuï¼‰<br/>
â†’ ç³»ç»Ÿé‡Œè£…ç¯å¢ƒï¼ˆnginxã€docker ç­‰ï¼‰</p>
<p>å½“ä½ è¿æ¥æœåŠ¡å™¨æ—¶ï¼Œ<br/>
ä½ æ˜¯â€œå€Ÿç”¨å…¬å¸é‚£å° Ubuntu æœºå™¨çš„ç³»ç»Ÿâ€ï¼›<br/>
å½“ä½ åœ¨æœ¬æœºè£…è™šæ‹Ÿæœºæ—¶ï¼Œ<br/>
ä½ æ˜¯åœ¨â€œè‡ªå·±ç”µè„‘é‡Œå†åˆ›å»ºä¸€å° Ubuntu æœºå™¨â€ã€‚</p>
<hr/>
<h2 data-id="heading-6">ğŸš€ æ¨èä½ ç›®å‰æœ€æ–¹ä¾¿çš„åšæ³•ï¼ˆå¦‚æœä½ æ˜¯ Windows ç”¨æˆ·ï¼‰</h2>
<p>ğŸ‘‰ <strong>ä½¿ç”¨ WSL2 + Ubuntu å­ç³»ç»Ÿ</strong><br/>
ä¸éœ€è¦è™šæ‹Ÿæœºè½¯ä»¶ã€ä¸å å¤ªå¤šèµ„æºã€å‘½ä»¤ä¸å…¬å¸æœåŠ¡å™¨å®Œå…¨ä¸€è‡´ã€‚</p>
<p>å®‰è£…å‘½ä»¤ï¼ˆç®¡ç†å‘˜ PowerShellï¼‰ï¼š</p>
<pre><code class="hljs language-css" lang="css">wsl <span class="hljs-attr">--install</span>
</code></pre>
<p>å®‰è£…å®Œæˆåï¼š</p>
<pre><code class="hljs language-bash" lang="bash">wsl -l -v   <span class="hljs-comment"># æŸ¥çœ‹ Ubuntu æ˜¯å¦å®‰è£…æˆåŠŸ</span>
wsl         <span class="hljs-comment"># è¿›å…¥ Ubuntu ç»ˆç«¯</span>
</code></pre>
<p>ç°åœ¨ä½ å°±åœ¨ä¸€ä¸ªçœŸæ­£çš„ Ubuntu ç¯å¢ƒé‡Œäº†ï¼Œ<br/>
å¯ä»¥æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-lua" lang="lua">sudo apt update
sudo apt install nginx docker.<span class="hljs-built_in">io</span> -y
</code></pre>
<p>è¿™æ—¶ä½ æœ¬åœ°ç¯å¢ƒçš„ä½¿ç”¨ä½“éªŒï¼Œå°±å’Œä½ ç”¨ Tabby è¿å…¬å¸æœåŠ¡å™¨éå¸¸æ¥è¿‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¥³æœ‹å‹åˆç»™æˆ‘å‡ºéš¾é¢˜äº†ï¼šè§£é”ç½‘é¡µç¦ç”¨å¤åˆ¶ + ä¸€é”®æå–å›¾ç‰‡æ–‡å­—]]></title>    <link>https://juejin.cn/post/7576197876717797414</link>    <guid>https://juejin.cn/post/7576197876717797414</guid>    <pubDate>2025-11-25T02:45:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576197876717797414" data-draft-id="7575102209606303770" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¥³æœ‹å‹åˆç»™æˆ‘å‡ºéš¾é¢˜äº†ï¼šè§£é”ç½‘é¡µç¦ç”¨å¤åˆ¶ + ä¸€é”®æå–å›¾ç‰‡æ–‡å­—"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,æµè§ˆå™¨"/> <meta itemprop="datePublished" content="2025-11-25T02:45:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸ä¸€æ ·çš„å°‘å¹´_"/> <meta itemprop="url" content="https://juejin.cn/user/3035079961218551"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¥³æœ‹å‹åˆç»™æˆ‘å‡ºéš¾é¢˜äº†ï¼šè§£é”ç½‘é¡µç¦ç”¨å¤åˆ¶ + ä¸€é”®æå–å›¾ç‰‡æ–‡å­—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3035079961218551/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸ä¸€æ ·çš„å°‘å¹´_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T02:45:00.000Z" title="Tue Nov 25 2025 02:45:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    900
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å¥³æœ‹å‹åšå¹¿å‘Šç­–åˆ’ï¼Œæ¯å¤©è¦ä»æµ·é‡ç½‘ç«™å’Œç´ æä¸­æ‘˜æŠ„æ–‡æ¡ˆã€‚</p>
<p>å¾®ä¿¡æˆ–é£ä¹¦æˆªå›¾éƒ½æœ‰ OCRï¼Œä½†å¥¹æ€»è¦â€œåˆ‡å¾®ä¿¡/é£ä¹¦ â†’ è¯†åˆ« â†’ å¤åˆ¶ â†’ åˆ‡å›æµè§ˆå™¨â€ï¼Œæ¥å›æŠ˜è…¾å¥½éº»çƒ¦ï¼Œç»å¸¸è¢«æ‰“æ–­æ€è·¯ã€‚</p>
<p><strong>ä¸¤ä¸ªæœ€å¸¸è§çš„çƒ¦æ¼</strong>ï¼š</p>
<ul>
<li>
<p><strong>ç¦æ­¢å¤åˆ¶çš„é¡µé¢</strong>ï¼šè®¾è®¡çµæ„Ÿç«™ã€ç´ æç«™ã€æ–‡åº“ç±»ç½‘ç«™ï¼Œæ˜æ˜èƒ½çœ‹åˆ°æ–‡å­—ï¼Œå°±æ˜¯é€‰ä¸äº†ã€å³é”®ä¹Ÿæ²¡ç”¨ï¼Œåªèƒ½æ‰‹æ•²ã€‚</p>
</li>
<li>
<p><strong>å›¾ç‰‡é‡Œçš„æ–‡å­—æ— æ³•å¿«é€Ÿæå–</strong>ï¼šçœ‹åˆ°ä¸€å¼ å›¾ï¼Œå¾—åˆ‡åˆ°å¾®ä¿¡ã€ç‚¹â€œæå–æ–‡å­—â€ã€ç­‰è¯†åˆ«ã€å¤åˆ¶ã€å†åˆ‡å›æ¥ç²˜è´´ã€‚</p>
</li>
</ul>
<p><strong>ä¸€å¼ å›¾ï¼Œå¥½å‡ ä¸ªæ­¥éª¤ï¼Œæ¥å›åˆ‡æ¢ä¸‰æ¬¡ã€‚</strong></p>
<p>æœ‰å¤©æ™šä¸Šå¥¹åœ¨èµ¶æ–¹æ¡ˆï¼Œä¸€è¾¹æ“ä½œä¸€è¾¹å¿µå¨ï¼šâ€œå¤ªéº»çƒ¦äº†ï¼Œæ€è·¯éƒ½æ–­äº†â€¦â€¦â€</p>
<p>æˆ‘è¯´ï¼šâ€œè¦ä¸æˆ‘ç»™ä½ å†™ä¸ªæ’ä»¶ï¼Ÿâ€</p>
<p>äºæ˜¯å‘¨æœ«ä¸¤å¤©ï¼Œåšäº†è¿™ä¸ª <strong>ã€Œå›¾æ–‡è§£é”å™¨ã€</strong>ï¼š</p>
<ol>
<li><strong>ä¸€é”®è§£é™¤ç½‘é¡µé™åˆ¶</strong> â€”â€” ç¦é€‰ä¸­ã€ç¦å³é”®çš„ç½‘ç«™ï¼Œç‚¹ä¸€ä¸‹å°±èƒ½æ­£å¸¸å¤åˆ¶</li>
<li><strong>æµè§ˆå™¨é‡Œç›´æ¥æ‹–æ¡†è¯†åˆ«</strong> â€”â€” ä¸ç”¨åˆ‡å¾®ä¿¡ï¼Œçœ‹åˆ°å“ªé‡Œæ¡†å“ªé‡Œï¼Œå‡ ç§’å‡ºç»“æœ</li>
<li><strong>æ‰€æœ‰æ“ä½œåœ¨ä¾§è¾¹æ å®Œæˆ</strong> â€”â€” ä¸é®æŒ¡é¡µé¢ï¼Œä¸ç”¨æ¥å›åˆ‡çª—å£</li>
</ol>
<p>å‘¨ä¸€å¥¹ç”¨ä¸Šä¹‹åçš„è¯„ä»·ï¼šâ€œç»ˆäºé¡ºæ‰‹äº†ï¼é‚£äº›æ¶å¿ƒçš„ç¦æ­¢å¤åˆ¶ç½‘ç«™ç°åœ¨éšä¾¿å¤åˆ¶ï¼Œå›¾ç‰‡è¯†åˆ«ä¹Ÿä¸ç”¨è·³æ¥è·³å»äº†ã€‚â€</p>
<p>ä¸‹é¢è®²è®²å¼€å‘è¿‡ç¨‹å’ŒæŠ€æœ¯å®ç° ğŸ‘‡</p>
</blockquote>
<h2 data-id="heading-0">æ•ˆæœæ¼”ç¤º: è§£é”ç½‘é¡µç¦ç”¨å¤åˆ¶ + ä¸€é”®æå–å›¾ç‰‡æ–‡å­—</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dce2ce2f9c5043b690a3184eb6f0d1de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764748905&amp;x-signature=6g1TP6c5jRKOc%2FeqrH6m5S%2FmWCs%3D" alt="copy-everything.gif" loading="lazy"/></p>
<h2 data-id="heading-1">åŠŸèƒ½ç‰¹æ€§</h2>
<h3 data-id="heading-2">1.  è§£é™¤ç½‘é¡µé™åˆ¶</h3>
<ul>
<li>ä¸€é”®è§£é™¤å¤åˆ¶é™åˆ¶</li>
<li>æ¢å¤å³é”®èœå•</li>
<li>å…è®¸æ–‡æœ¬é€‰ä¸­</li>
<li>æ”¯æŒåŠ¨æ€åŠ è½½çš„ç½‘é¡µå†…å®¹è§£é™¤é™åˆ¶</li>
</ul>
<h3 data-id="heading-3">2. OCR æ–‡å­—è¯†åˆ«ï¼ˆæ–¹å¼ä¸ç‰¹æ€§ï¼‰</h3>






























<table><thead><tr><th>æ–¹å¼</th><th>è¯´æ˜</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>é¡µé¢æˆªå›¾</strong></td><td>å¿«é€Ÿæˆªå–å½“å‰å¯è§åŒºåŸŸ</td><td>ä¸€é”®è¯†åˆ«ç½‘é¡µå…¨éƒ¨å†…å®¹</td></tr><tr><td><strong>è‡ªé€‰åŒºåŸŸ</strong></td><td>æ‹–æ‹½é€‰æ‹©ä»»æ„åŒºåŸŸ</td><td>åªè¯†åˆ«ä½ é€‰ä¸­çš„ç‰¹å®šåŒºåŸŸ</td></tr><tr><td><strong>ç‚¹å‡»ä¸Šä¼ </strong></td><td>é€‰æ‹©æœ¬åœ°å›¾ç‰‡æ–‡ä»¶</td><td>è¯†åˆ«æœ¬åœ°å›¾ç‰‡ä¸­çš„æ–‡å­—</td></tr><tr><td><strong>æ‹–æ‹½ä¸Šä¼ </strong></td><td>æ‹–å…¥å›¾ç‰‡å³å¯è¯†åˆ«</td><td>æ–¹ä¾¿ä¸Šä¼ å›¾ç‰‡å¹¶è¯†åˆ«æ–‡å­—</td></tr></tbody></table>
<ul>
<li>åŸºäºè…¾è®¯äº‘ OCR APIï¼ˆæ¯æœˆ 1000 æ¬¡å…è´¹é¢åº¦ï¼‰</li>
<li>å†…ç½®å›¾ç‰‡é¢„è§ˆï¼Œè¯†åˆ«å‰å¯ç¡®è®¤å†…å®¹</li>
<li>è¯†åˆ«ç»“æœä¸€é”®å¤åˆ¶ï¼Œæ”¯æŒåç»­ç²˜è´´ä½¿ç”¨</li>
<li>è¯†åˆ«æµç¨‹ï¼šé€‰æ‹©æ–¹å¼ â†’ é¢„è§ˆ â†’ å¼€å§‹è¯†åˆ« â†’ å¤åˆ¶/ä¸‹è½½</li>
</ul>
<h2 data-id="heading-4">å¿«é€Ÿå¼€å§‹ï¼ˆå®‰è£…ä½¿ç”¨ï¼‰</h2>
<h3 data-id="heading-5">1. è·å–ä»£ç </h3>
<ul>
<li><strong>GitHub</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTeernage%2Fcopy-everything" target="_blank" title="https://github.com/Teernage/copy-everything" ref="nofollow noopener noreferrer">github.com/Teernage/coâ€¦</a> â­ å¦‚æœå¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œæ¬¢è¿Star</li>
<li><strong>Gitee</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fxuzhenxin110%2Fcopy-everything" target="_blank" title="https://gitee.com/xuzhenxin110/copy-everything" ref="nofollow noopener noreferrer">gitee.com/xuzhenxin11â€¦</a></li>
</ul>
<h3 data-id="heading-6">2. å®‰è£…æ‰©å±•ï¼ˆæœ¬åœ°åŠ è½½ï¼‰</h3>
<ol>
<li>æ‰“å¼€ Chromeï¼Œåœ°å€æ è¾“å…¥ chrome://extensions/</li>
<li>å³ä¸Šè§’å¼€å¯â€œå¼€å‘è€…æ¨¡å¼â€</li>
<li>ç‚¹å‡»â€œåŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åºâ€</li>
<li>é€‰æ‹©æ’ä»¶ç›®å½•</li>
<li>å®‰è£…å®Œæˆ</li>
</ol>
<p><code>å°è´´å£«ï¼šSide Panel ä¾èµ–è¾ƒæ–°ç‰ˆæœ¬ Chromeï¼Œå»ºè®® 114+ã€‚</code></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a20851ca20744c5fb2660860839141cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764748905&amp;x-signature=QB6ADXsHczAk%2Fp4t0W88i2byf4A%3D" alt="å®‰è£…copy-everything.gif" loading="lazy"/></p>
<h3 data-id="heading-7">3. é¦–æ¬¡ä½¿ç”¨</h3>
<ul>
<li>ç‚¹å‡»æ’ä»¶å›¾æ ‡æ‰“å¼€ä¾§è¾¹æ </li>
<li>ç‚¹å‡»ã€Œä¸€é”®è§£é™¤ã€å³å¯è§£é™¤é¡µé¢å¤åˆ¶é™åˆ¶</li>
<li>ä½¿ç”¨æˆªå›¾åŠŸèƒ½ï¼ˆé¡µé¢æˆªå›¾ / è‡ªé€‰åŒºåŸŸï¼‰æˆ–æœ¬åœ°ä¸Šä¼ ï¼ˆç‚¹å‡»ä¸Šä¼  / æ‹–æ‹½ä¸Šä¼ ï¼‰è¿›è¡Œ OCR è¯†åˆ«</li>
<li>é¦–æ¬¡ä½“éªŒå¯ç›´æ¥ä½¿ç”¨ä»¥ä¸‹è´¦å·ï¼ˆæ¯æœˆ 1000 æ¬¡å…è´¹é¢åº¦ï¼‰ï¼š
<ul>
<li>SecretIdï¼š AKIDLUQ7aqsjNmwufWFm590d1BxXs0xgBRTH</li>
<li>SecretKeyï¼š c09OVP4aw75oIYZMvFO8j5C5uiIgspIc</li>
<li>å°† SecretId å’Œ SecretKey å¡«å…¥æ’ä»¶ä¾§è¾¹æ åä¿å­˜è®¾ç½®ï¼Œå³å¯å¼€å§‹å›¾æ–‡è¯†åˆ«</li>
</ul>
</li>
</ul>
<p><code>æ³¨ï¼šå¦‚å…è´¹é¢åº¦ç”¨å®Œï¼Œè¯·æ ¹æ®ä¸‹æ–¹æŒ‡å¯¼ç”³è¯·å±äºä½ è‡ªå·±çš„è´¦å·å“¦ã€‚ğŸ‘‡</code></p>
<h4 data-id="heading-8">è…¾è®¯äº‘ OCR å¼€é€šä¸é…ç½®</h4>
<p>æ’ä»¶æ”¯æŒè…¾è®¯äº‘ OCRï¼Œæ¯æœˆæœ‰çº¦ 1000 æ¬¡å…è´¹é¢åº¦ï¼Œè¶³å¤Ÿæ—¥å¸¸ä½¿ç”¨ã€‚é¦–æ¬¡è¯†åˆ«å‰ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤å¼€é€šå¹¶é…ç½®ï¼š</p>
<ol>
<li>è¿›å…¥ è…¾è®¯äº‘æ–‡å­—è¯†åˆ«æ§åˆ¶å°<a href="https://link.juejin.cn?target=https%3A%2F%2Fconsole.cloud.tencent.com%2Focr%2Fv2%2Foverview" target="_blank" title="https://console.cloud.tencent.com/ocr/v2/overview" ref="nofollow noopener noreferrer">console.cloud.tencent.com/ocr/v2/overâ€¦</a> ï¼Œå‹¾é€‰æ¡æ¬¾å¹¶å¼€é€šæœåŠ¡ã€‚</li>
<li>å‰å¾€ API å¯†é’¥ç®¡ç†<a href="https://link.juejin.cn?target=https%3A%2F%2Fconsole.cloud.tencent.com%2Fcam%2Fcapi" target="_blank" title="https://console.cloud.tencent.com/cam/capi" ref="nofollow noopener noreferrer">console.cloud.tencent.com/cam/capi</a> è·å–è‡ªå·±çš„ SecretId å’Œ SecretKeyã€‚</li>
<li>å°† SecretId å’Œ SecretKey å¡«å…¥æ’ä»¶ä¾§è¾¹æ å¹¶ä¿å­˜è®¾ç½®ï¼Œå³å¯å¼€å§‹å›¾æ–‡è¯†åˆ«ã€‚</li>
</ol>
<h3 data-id="heading-9">æ³¨æ„äº‹é¡¹</h3>
<ol>
<li>
<p><strong>API è´¹ç”¨</strong>ï¼šè…¾è®¯äº‘ OCR æ¯ä¸ªæœˆæœ‰1000ä¸ªè¯·æ±‚çš„å…è´¹é¢åº¦ï¼Œè¶…å‡ºåæŒ‰é‡è®¡è´¹</p>
</li>
<li>
<p><strong>æƒé™è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>activeTab</code>ï¼šè®¿é—®å½“å‰æ ‡ç­¾é¡µ</li>
<li><code>scripting</code>ï¼šæ³¨å…¥è„šæœ¬</li>
<li><code>storage</code>ï¼šä¿å­˜é…ç½®</li>
<li><code>sidePanel</code>ï¼šä¾§è¾¹æ åŠŸèƒ½</li>
</ul>
</li>
<li>
<p><strong>å…¼å®¹æ€§</strong>ï¼š</p>
<ul>
<li>Chrome 114+ ï¼ˆSide Panel API è¦æ±‚ï¼‰</li>
<li>éƒ¨åˆ†ç½‘ç«™å¯èƒ½æœ‰é¢å¤–é˜²æŠ¤</li>
</ul>
</li>
</ol>
<h2 data-id="heading-10">æŠ€æœ¯å®ç°åŸç†</h2>
<h3 data-id="heading-11">æ ¸å¿ƒæŠ€æœ¯æ ˆ</h3>
<ul>
<li><strong>Manifest V3</strong>ï¼šChrome æ‰©å±•æœ€æ–°è§„èŒƒ</li>
<li><strong>Side Panel API</strong>ï¼šä¾§è¾¹æ ç•Œé¢</li>
<li><strong>Content Scripts</strong>ï¼šé¡µé¢æ³¨å…¥è„šæœ¬</li>
<li><strong>Tencent Cloud OCR</strong>ï¼šè…¾è®¯äº‘æ–‡å­—è¯†åˆ« API</li>
<li><strong>Canvas API</strong>ï¼šå›¾ç‰‡è£å‰ª</li>
</ul>
<h3 data-id="heading-12">æ¶æ„è®¾è®¡</h3>
<pre><code class="hljs language-bash" lang="bash">copy-everything
â”œâ”€â”€ manifest.json         <span class="hljs-comment"># æ’ä»¶é…ç½®</span>
â”œâ”€â”€ icons                 <span class="hljs-comment"># æ’ä»¶å›¾æ ‡</span>
â”œâ”€â”€ background.js         <span class="hljs-comment"># åå°æœåŠ¡</span>
â”œâ”€â”€ content.js            <span class="hljs-comment"># å†…å®¹è„šæœ¬ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰</span>
â”œâ”€â”€ inject.js             <span class="hljs-comment"># æ³¨å…¥é¡µé¢è„šæœ¬ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰</span>
â”œâ”€â”€ sidepanel.html        <span class="hljs-comment"># ä¾§è¾¹æ ç•Œé¢</span>
â”œâ”€â”€ sidepanel.js          <span class="hljs-comment"># ä¾§è¾¹æ ç•Œé¢é€»è¾‘</span>
â”œâ”€â”€ sidepanel.css         <span class="hljs-comment"># ä¾§è¾¹æ æ ·å¼</span>
â””â”€â”€ tencentOCR.js         <span class="hljs-comment"># OCR SDK</span>

</code></pre>
<h2 data-id="heading-13">æ ¸å¿ƒä»£ç è§£æ</h2>
<h3 data-id="heading-14">1. è§£é™¤å¤åˆ¶é™åˆ¶  ï¼ˆäº”å±‚é˜²æŠ¤ï¼‰</h3>
<h4 data-id="heading-15">è¿™æ˜¯æ’ä»¶çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œé€šè¿‡å¤šå±‚é˜²æŠ¤ç¡®ä¿è§£é™¤é™åˆ¶ï¼š</h4>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6b625ffe3f14f719c51acb48cc6483d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764748905&amp;x-signature=ke%2F2EtVHZzSQrjYga2Gt9AoHwfg%3D" alt="image.png" width="30%" loading="lazy"/>
<h4 data-id="heading-16">å®ç°åŸç†</h4>
<p>é€šè¿‡<strong>äº”å±‚é˜²æŠ¤</strong>ç¡®ä¿è§£é™¤é™åˆ¶</p>
<h4 data-id="heading-17">ç¬¬ä¸€å±‚ï¼šCSS å¼ºåˆ¶è¦†ç›–</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> style = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'style'</span>);
style.<span class="hljs-property">textContent</span> = <span class="hljs-string">`
  html, body, * {
    -webkit-user-select: text !important;
    -moz-user-select: text !important;
    user-select: text !important;
  }
`</span>;
<span class="hljs-variable language_">document</span>.<span class="hljs-property">head</span>.<span class="hljs-title function_">appendChild</span>(style);
</code></pre>
<p><strong>ä½œç”¨</strong>ï¼šå¼ºåˆ¶å…è®¸æ–‡æœ¬é€‰ä¸­ï¼Œè¦†ç›–ç½‘ç«™çš„ CSS é™åˆ¶ã€‚</p>
<h4 data-id="heading-18">ç¬¬äºŒå±‚ï¼šäº‹ä»¶æ‹¦æˆªï¼ˆæ•è·é˜¶æ®µï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åœ¨æ•è·é˜¶æ®µæ‹¦æˆªæ‰€æœ‰é™åˆ¶äº‹ä»¶</span>
<span class="hljs-keyword">const</span> restrictedEvents = [
  <span class="hljs-string">'copy'</span>, <span class="hljs-string">'cut'</span>, <span class="hljs-string">'paste'</span>, <span class="hljs-string">'contextmenu'</span>, 
  <span class="hljs-string">'selectstart'</span>, <span class="hljs-string">'dragstart'</span>, <span class="hljs-string">'keydown'</span>, <span class="hljs-string">'keyup'</span>, <span class="hljs-string">'keypress'</span>
];

<span class="hljs-keyword">const</span> <span class="hljs-title function_">stopEvent</span> = (<span class="hljs-params">e</span>) =&gt; {
  e.<span class="hljs-title function_">stopPropagation</span>();
  e.<span class="hljs-property">stopImmediatePropagation</span>?.(); <span class="hljs-comment">// é˜»æ­¢å…¶ä»–ç›‘å¬å™¨æ‰§è¡Œ</span>
};

<span class="hljs-comment">// åœ¨ windowã€documentã€documentElementã€body å››ä¸ªå±‚çº§åŒæ—¶ç›‘å¬</span>
[<span class="hljs-variable language_">window</span>, <span class="hljs-variable language_">document</span>, <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>, <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>].<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">target</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (target) {
    restrictedEvents.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">eventType</span> =&gt;</span> {
      target.<span class="hljs-title function_">addEventListener</span>(eventType, stopEvent, <span class="hljs-literal">true</span>); <span class="hljs-comment">// â† æ•è·é˜¶æ®µ</span>
    });
  }
});
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li>åœ¨<strong>æ•è·é˜¶æ®µ</strong>æ‹¦æˆªï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰</li>
<li>ä½¿ç”¨Â <code>stopImmediatePropagation()</code>Â é˜»æ­¢å…¶ä»–ç›‘å¬å™¨</li>
<li>åœ¨å››ä¸ªå±‚çº§ç›‘å¬ï¼ˆwindow â†’ document â†’ html â†’ bodyï¼‰</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆè¦ç”¨æ•è·é˜¶æ®µï¼Ÿ</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">äº‹ä»¶æµï¼šæ•è·é˜¶æ®µ â†’ ç›®æ ‡é˜¶æ®µ â†’ å†’æ³¡é˜¶æ®µ 
<span class="hljs-code">        â†“
  æˆ‘ä»¬åœ¨è¿™é‡Œæ‹¦æˆªï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰
</span></code></pre>
<h4 data-id="heading-19">ç¬¬ä¸‰å±‚ï¼šç§»é™¤å†…è”äº‹ä»¶å±æ€§</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç§»é™¤æ‰€æœ‰äº‹ä»¶å±æ€§ï¼ˆå¦‚ oncopy="return false"ï¼‰</span>
<span class="hljs-keyword">const</span> eventAttrs = [
  <span class="hljs-string">'oncopy'</span>, <span class="hljs-string">'oncut'</span>, <span class="hljs-string">'onpaste'</span>, <span class="hljs-string">'oncontextmenu'</span>,
  <span class="hljs-string">'onselectstart'</span>, <span class="hljs-string">'onkeydown'</span>, <span class="hljs-string">'ondragstart'</span>
];

<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(eventAttrs.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> <span class="hljs-string">`[<span class="hljs-subst">${a}</span>]`</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">','</span>))
  .<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">el</span> =&gt;</span> {
    eventAttrs.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">attr</span> =&gt;</span> el.<span class="hljs-title function_">removeAttribute</span>(attr));
  });
</code></pre>
<p><strong>ä½œç”¨</strong>ï¼šç§»é™¤ HTML æ ‡ç­¾ä¸Šçš„å†…è”äº‹ä»¶ï¼ˆå¦‚ <code>oncopy="return false"</code>ï¼‰</p>
<h4 data-id="heading-20">ç¬¬å››å±‚ï¼šAPI åŠ«æŒï¼ˆé‡å†™ preventDefaultï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ³¨å…¥åˆ°é¡µé¢ä¸Šä¸‹æ–‡ï¼Œé‡å†™åŸç”Ÿæ–¹æ³•</span>
<span class="hljs-keyword">const</span> script = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'script'</span>);
script.<span class="hljs-property">textContent</span> = <span class="hljs-string">`
  (function() {
    if (window.__preventDefaultDisabled) return;
    window.__preventDefaultDisabled = true;
    
    const blockedEvents = new Set(<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(restrictedEvents)}</span>);
    const originalPreventDefault = Event.prototype.preventDefault;
    
    Event.prototype.preventDefault = function() {
      if (blockedEvents.has(this.type)) return; // â† ç¦ç”¨ preventDefault
      return originalPreventDefault.call(this);
    };
  })();
`</span>;
<span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-title function_">appendChild</span>(script);
script.<span class="hljs-title function_">remove</span>();
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¦æ³¨å…¥ <code>&lt;script&gt;</code> æ ‡ç­¾ï¼Ÿ</strong></p>
<ul>
<li>Content Script è¿è¡Œåœ¨<strong>éš”ç¦»ç¯å¢ƒ</strong>ï¼ˆIsolated Worldï¼‰</li>
<li>æ— æ³•ç›´æ¥ä¿®æ”¹é¡µé¢çš„Â <code>Event.prototype</code></li>
<li>é€šè¿‡Â <code>&lt;script&gt;</code>Â æ ‡ç­¾æ³¨å…¥åˆ°<strong>é¡µé¢ä¸Šä¸‹æ–‡</strong>ï¼ˆMain Worldï¼‰</li>
</ul>
<p><code>ğŸ’¡ æ·±å…¥ç†è§£è„šæœ¬é€šä¿¡æœºåˆ¶</code></p>
<p>å¦‚æœä½ æƒ³æ·±å…¥äº†è§£æ’ä»¶è„šæœ¬é€šä¿¡æœºåˆ¶ï¼Œå¼ºçƒˆæ¨èé˜…è¯»ï¼š <strong><a href="https://juejin.cn/post/7573521516324732955" target="_blank" title="https://juejin.cn/post/7573521516324732955">å¤§éƒ¨åˆ†äººéƒ½é”™äº†ï¼è¿™æ‰æ˜¯ Chrome æ’ä»¶å¤šè„šæœ¬é€šä¿¡çš„æ­£ç¡®å§¿åŠ¿</a></strong>   <a href="https://juejin.cn/post/7573521516324732955" target="_blank" title="https://juejin.cn/post/7573521516324732955">juejin.cn/post/757352â€¦</a> è¿™ç¯‡æ–‡ç« ç”¨åŸç†+ç¤ºä¾‹æ‹†è§£äº†å¸¸è§è¯¯åŒºä¸æ­£ç¡®åšæ³•ï¼Œèƒ½å¸®ä½ æ›´é€å½»åœ°ç†è§£æœ¬æ’ä»¶çš„é€šä¿¡æœºåˆ¶ã€‚</p>
<h4 data-id="heading-21">ç¬¬äº”å±‚ï¼šåŠ¨æ€å†…å®¹ç›‘å¬</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç›‘å¬ DOM å˜åŒ–ï¼Œè‡ªåŠ¨å¤„ç†åŠ¨æ€åŠ è½½çš„å…ƒç´ </span>
<span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutationObserver</span>(<span class="hljs-function">(<span class="hljs-params">mutations</span>) =&gt;</span> {
  mutations.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">mutation</span>) =&gt;</span> {
    mutation.<span class="hljs-property">addedNodes</span>?.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">node</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (node <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Element</span>) {
        <span class="hljs-comment">// ç§»é™¤äº‹ä»¶å±æ€§</span>
        eventAttrs.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">attr</span> =&gt;</span> node.<span class="hljs-title function_">removeAttribute</span>(attr));
        <span class="hljs-comment">// å¼ºåˆ¶å…è®¸é€‰ä¸­</span>
        node.<span class="hljs-property">style</span>?.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'user-select'</span>, <span class="hljs-string">'text'</span>, <span class="hljs-string">'important'</span>);
      }
    });
  });
});

observer.<span class="hljs-title function_">observe</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>, {
  <span class="hljs-attr">childList</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">subtree</span>: <span class="hljs-literal">true</span>
});
</code></pre>
<p><strong>ä½œç”¨</strong>ï¼šç›‘å¬ DOM å˜åŒ–ï¼Œè‡ªåŠ¨å¤„ç†åŠ¨æ€åŠ è½½çš„å…ƒç´ ï¼ˆå¦‚ React/Vue æ¸²æŸ“çš„å†…å®¹ï¼‰ã€‚</p>
<h3 data-id="heading-22">2. è‡ªé€‰åŒºåŸŸæˆªå›¾</h3>
<h3 data-id="heading-23">ä¸‰æ­¥å®Œæˆæˆªå›¾</h3>
<ol>
<li><strong>æŒ‰ä¸‹æŒ‰é’®</strong>Â â†’ å±å¹•å˜æš—</li>
<li><strong>æ‹–åŠ¨æ¡†</strong>Â â†’ ï¼šæŒ‰ä½é¼ æ ‡æ‹–å‡ºä¸€ä¸ªæ¡†ï¼Œé€‰å‡ºä½ æƒ³è¦çš„åŒºåŸŸ</li>
<li><strong>æ¾å¼€æ‰‹</strong>Â â†’ è‡ªåŠ¨æˆªå–æ¡†å†…å†…å®¹</li>
</ol>
<h4 data-id="heading-24">å®ç°æ­¥éª¤</h4>
<h3 data-id="heading-25">Â è¿™èƒŒåå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</h3>
<h4 data-id="heading-26"><strong>æ­¥éª¤ 1ï¼šåˆ›å»ºé€‰æ¡†å·¥å…·</strong></h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åˆ›å»ºé®ç½©å±‚ï¼ˆå°±åƒç»™å±å¹•ç›–äº†ä¸€å±‚ç£¨ç ‚ç»ç’ƒï¼‰</span>
<span class="hljs-keyword">const</span> overlay = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
overlay.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> = <span class="hljs-string">`
  position: fixed;
  left: 0; top: 0;
  width: 100vw; height: 100vh;
  background: rgba(0,0,0,0.5);  /* åŠé€æ˜é»‘è‰² */
  cursor: crosshair;             /* åå­—å‡†æ˜Ÿ */
  z-index: 999999;
`</span>;
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(overlay);

</code></pre>
<p>å½“ä½ ç‚¹å‡»"è‡ªé€‰åŒºåŸŸ"åï¼Œæ’ä»¶ä¼šï¼š</p>
<ul>
<li>åœ¨å±å¹•ä¸Šç›–ä¸€å±‚åŠé€æ˜é»‘è‰²é®ç½©ï¼ˆè®©ä½ çœ‹æ¸…æ¥šè¦é€‰ä»€ä¹ˆï¼‰</li>
<li>é¼ æ ‡å˜æˆåå­—å‡†æ˜Ÿï¼ˆæç¤ºä½ å¯ä»¥å¼€å§‹æ‹–æ¡†äº†ï¼‰</li>
<li>å‡†å¤‡å¥½ä¸€ä¸ªç»¿è‰²è¾¹æ¡†ï¼ˆç­‰ä½ æ‹–å‡ºæ¥å°±æ˜¾ç¤ºï¼‰</li>
</ul>
<h4 data-id="heading-27"><strong>2. è·Ÿéšä½ çš„é¼ æ ‡ç”»æ¡†ï¼ˆå®æ—¶åé¦ˆï¼‰</strong></h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// é¼ æ ‡æŒ‰ä¸‹ â†’ è®°å½•èµ·ç‚¹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMouseDown</span>(<span class="hljs-params">e</span>) {
  startX = e.<span class="hljs-property">clientX</span>;  <span class="hljs-comment">// è®°ä½ä½ ç‚¹å‡»çš„ X åæ ‡</span>
  startY = e.<span class="hljs-property">clientY</span>;  <span class="hljs-comment">// è®°ä½ä½ ç‚¹å‡»çš„ Y åæ ‡</span>
}

<span class="hljs-comment">// é¼ æ ‡ç§»åŠ¨ â†’ å®æ—¶æ›´æ–°æ¡†çš„å¤§å°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMouseMove</span>(<span class="hljs-params">e</span>) {
  currentX = e.<span class="hljs-property">clientX</span>;
  currentY = e.<span class="hljs-property">clientY</span>;
  
  <span class="hljs-comment">// è®¡ç®—æ¡†çš„ä½ç½®å’Œå¤§å°ï¼ˆæ”¯æŒåå‘æ‹–æ‹½ï¼‰</span>
  <span class="hljs-keyword">const</span> left = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(startX, currentX);   <span class="hljs-comment">// å–æœ€å°å€¼ä½œä¸ºå·¦è¾¹ç•Œ</span>
  <span class="hljs-keyword">const</span> top = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(startY, currentY);    <span class="hljs-comment">// å–æœ€å°å€¼ä½œä¸ºä¸Šè¾¹ç•Œ</span>
  <span class="hljs-keyword">const</span> width = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(currentX - startX); <span class="hljs-comment">// å®½åº¦ = ç»å¯¹å€¼</span>
  <span class="hljs-keyword">const</span> height = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(currentY - startY);<span class="hljs-comment">// é«˜åº¦ = ç»å¯¹å€¼</span>
  
  <span class="hljs-comment">// æ›´æ–°ç»¿è‰²è¾¹æ¡†çš„ä½ç½®</span>
  selectionBox.<span class="hljs-property">style</span>.<span class="hljs-property">left</span> = left + <span class="hljs-string">'px'</span>;
  selectionBox.<span class="hljs-property">style</span>.<span class="hljs-property">top</span> = top + <span class="hljs-string">'px'</span>;
  selectionBox.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = width + <span class="hljs-string">'px'</span>;
  selectionBox.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = height + <span class="hljs-string">'px'</span>;
}

</code></pre>
<p>å½“ä½ æŒ‰ä½é¼ æ ‡æ‹–åŠ¨æ—¶ï¼š</p>
<ul>
<li>è®°å½•ä½ <strong>æŒ‰ä¸‹çš„ä½ç½®</strong>ï¼ˆèµ·ç‚¹ï¼‰</li>
<li>è®°å½•ä½ <strong>å½“å‰çš„ä½ç½®</strong>ï¼ˆç»ˆç‚¹ï¼‰</li>
<li>ç”¨è¿™ä¸¤ä¸ªç‚¹çš„æ¨ªåæ ‡å’Œçºµåæ ‡çš„å·®å€¼ç”»å‡ºä¸€ä¸ªçŸ©å½¢æ¡†</li>
</ul>
<p><strong>æ”¯æŒåå‘æ‹–æ‹½</strong>ï¼šä¸ç®¡ä½ ä»å·¦ä¸Šå¾€å³ä¸‹æ‹–ï¼Œè¿˜æ˜¯ä»å³ä¸‹å¾€å·¦ä¸Šæ‹–ï¼Œéƒ½èƒ½æ­£ç¡®è¯†åˆ«ï¼</p>
<p><strong>ä¸¾ä¸ªä¾‹å­</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js">ä½ ä» (<span class="hljs-number">100</span>, <span class="hljs-number">100</span>) æ‹–åˆ° (<span class="hljs-number">300</span>, <span class="hljs-number">300</span>)
â†’ æ¡†çš„ä½ç½®ï¼šleft=<span class="hljs-number">100</span>, top=<span class="hljs-number">100</span>, width=<span class="hljs-number">200</span>, height=<span class="hljs-number">200</span> âœ…

ä½ ä» (<span class="hljs-number">300</span>, <span class="hljs-number">300</span>) æ‹–åˆ° (<span class="hljs-number">100</span>, <span class="hljs-number">100</span>)ï¼ˆåå‘ï¼‰
â†’ æ¡†çš„ä½ç½®ï¼šleft=<span class="hljs-number">100</span>, top=<span class="hljs-number">100</span>, width=<span class="hljs-number">200</span>, height=<span class="hljs-number">200</span> âœ…

</code></pre>
<h4 data-id="heading-28"><strong>3. ç²¾å‡†è£å‰ªï¼ˆåƒå‰ªåˆ€ä¸€æ ·è£å›¾ï¼‰</strong></h4>
<p>å½“ä½ æ¾å¼€é¼ æ ‡åï¼Œæ’ä»¶ä¼šï¼š</p>
<ol>
<li><strong>å…ˆæˆªå–æ•´ä¸ªé¡µé¢</strong>ï¼ˆå°±åƒæ‹äº†ä¸€å¼ å…¨å±ç…§ç‰‡ï¼‰</li>
<li><strong>å†è£å‰ªå‡ºä½ é€‰ä¸­çš„éƒ¨åˆ†</strong>ï¼ˆå°±åƒç”¨å‰ªåˆ€å‰ªå‡ºä½ è¦çš„åŒºåŸŸï¼‰</li>
</ol>
<p><strong>å…³é”®æŠ€æœ¯ï¼šCanvas ç”»å¸ƒè£å‰ª</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 1. åˆ›å»ºä¸€ä¸ªç”»å¸ƒï¼ˆå°±åƒå‡†å¤‡ä¸€å¼ ç™½çº¸ï¼‰</span>
<span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'canvas'</span>);
<span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'2d'</span>);

<span class="hljs-comment">// 2. è®¾ç½®ç”»å¸ƒå¤§å° = ä½ é€‰ä¸­åŒºåŸŸçš„å¤§å°</span>
canvas.<span class="hljs-property">width</span> = width;
canvas.<span class="hljs-property">height</span> = height;

<span class="hljs-comment">// 3. æŠŠå…¨å±æˆªå›¾çš„"é€‰ä¸­éƒ¨åˆ†"ç”»åˆ°ç”»å¸ƒä¸Š</span>
ctx.<span class="hljs-title function_">drawImage</span>(
  fullScreenImage,  <span class="hljs-comment">// å…¨å±æˆªå›¾</span>
  left, top,        <span class="hljs-comment">// ä»å“ªé‡Œå¼€å§‹è£å‰ªï¼ˆä½ é€‰ä¸­åŒºåŸŸçš„å·¦ä¸Šè§’ï¼‰</span>
  width, height,    <span class="hljs-comment">// è£å‰ªå¤šå¤§ï¼ˆä½ é€‰ä¸­åŒºåŸŸçš„å®½é«˜ï¼‰</span>
  <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,             <span class="hljs-comment">// ç”»åˆ°ç”»å¸ƒçš„å“ªé‡Œï¼ˆä»ç”»å¸ƒå·¦ä¸Šè§’å¼€å§‹ï¼‰</span>
  width, height     <span class="hljs-comment">// ç”»å¤šå¤§ï¼ˆå¡«æ»¡æ•´ä¸ªç”»å¸ƒï¼‰</span>
);

<span class="hljs-comment">// 4. å¯¼å‡ºæˆå›¾ç‰‡</span>
<span class="hljs-keyword">const</span> croppedImage = canvas.<span class="hljs-title function_">toDataURL</span>(<span class="hljs-string">'image/png'</span>);

</code></pre>
<p><strong>ç”¨ç”Ÿæ´»åœºæ™¯ç±»æ¯”</strong>ï¼š</p>
<ul>
<li>å…¨å±æˆªå›¾ = æ‹äº†ä¸€å¼ ç­çº§ç…§</li>
<li>ä½ é€‰ä¸­çš„åŒºåŸŸ = ä½ åªæƒ³è¦ç…§ç‰‡é‡Œçš„æŸä¸ªäºº</li>
<li>Canvas è£å‰ª = ç”¨å‰ªåˆ€æŠŠé‚£ä¸ªäººå‰ªä¸‹æ¥</li>
</ul>
<h4 data-id="heading-29"><strong>æ­¥éª¤ 4ï¼šå››é®ç½©é«˜äº®æ•ˆæœ</strong></h4>
<p><strong>é—®é¢˜</strong>ï¼šå¦‚æœåªç”¨ä¸€ä¸ªå…¨å±é®ç½©ï¼Œé€‰ä¸­çš„åŒºåŸŸä¹Ÿä¼šè¢«é®ä½ï¼Œç”¨æˆ·çœ‹ä¸æ¸…é€‰äº†ä»€ä¹ˆã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šç”¨ 4 ä¸ªé®ç½©å—å›´ç»•é€‰åŒºã€‚</p>
<pre><code class="hljs">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ä¸Šé®ç½©ï¼ˆåŠé€æ˜é»‘è‰²ï¼‰            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å·¦é®ç½©â”‚   é€‰åŒºï¼ˆé«˜äº®ï¼‰ â”‚  å³é®ç½©   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    ä¸‹é®ç½©ï¼ˆåŠé€æ˜é»‘è‰²ï¼‰            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

</code></pre>
<p><strong>ä»£ç å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åˆ›å»º 4 ä¸ªé®ç½©å—</span>
<span class="hljs-keyword">const</span> masks = [<span class="hljs-string">'top'</span>, <span class="hljs-string">'right'</span>, <span class="hljs-string">'bottom'</span>, <span class="hljs-string">'left'</span>].<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">position</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> mask = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
  mask.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> = <span class="hljs-string">`
    position: fixed;
    background: rgba(0,0,0,0.5);
    pointer-events: none; /* ä¸é˜»æŒ¡é¼ æ ‡äº‹ä»¶ */
  `</span>;
  <span class="hljs-keyword">return</span> mask;
});

<span class="hljs-comment">// æ ¹æ®é€‰åŒºä½ç½®æ›´æ–°é®ç½©å—å¤§å°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">updateMasks</span>(<span class="hljs-params">left, top, width, height</span>) {
  masks[<span class="hljs-number">0</span>].<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> += <span class="hljs-string">`left:0; top:0; width:100vw; height:<span class="hljs-subst">${top}</span>px;`</span>; <span class="hljs-comment">// ä¸Š</span>
  masks[<span class="hljs-number">1</span>].<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> += <span class="hljs-string">`left:<span class="hljs-subst">${left+width}</span>px; top:<span class="hljs-subst">${top}</span>px; width:<span class="hljs-subst">${<span class="hljs-variable language_">window</span>.innerWidth-left-width}</span>px; height:<span class="hljs-subst">${height}</span>px;`</span>; <span class="hljs-comment">// å³</span>
  masks[<span class="hljs-number">2</span>].<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> += <span class="hljs-string">`left:0; top:<span class="hljs-subst">${top+height}</span>px; width:100vw; height:<span class="hljs-subst">${<span class="hljs-variable language_">window</span>.innerHeight-top-height}</span>px;`</span>; <span class="hljs-comment">// ä¸‹</span>
  masks[<span class="hljs-number">3</span>].<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> += <span class="hljs-string">`left:0; top:<span class="hljs-subst">${top}</span>px; width:<span class="hljs-subst">${left}</span>px; height:<span class="hljs-subst">${height}</span>px;`</span>; <span class="hljs-comment">// å·¦</span>
}

</code></pre>
<h4 data-id="heading-30">é«˜åˆ†å±é€‚é…ï¼ˆè®©å›¾ç‰‡æ›´æ¸…æ™°ï¼‰</h4>
<p><strong>é—®é¢˜</strong>ï¼šRetina å±å¹•ï¼ˆå¦‚ MacBookï¼‰çš„åƒç´ å¯†åº¦æ˜¯æ™®é€šå±å¹•çš„ 2 å€ï¼Œå¦‚æœä¸å¤„ç†ä¼šå¯¼è‡´æˆªå›¾æ¨¡ç³Šã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šä¹˜ä»¥è®¾å¤‡åƒç´ æ¯”</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> scale = <span class="hljs-variable language_">window</span>.<span class="hljs-property">devicePixelRatio</span> || <span class="hljs-number">1</span>; <span class="hljs-comment">// Retina å±å¹• = 2ï¼Œæ™®é€šå±å¹• = 1</span>

<span class="hljs-comment">// è®¾ç½®ç”»å¸ƒå¤§å°æ—¶è¦ä¹˜ä»¥ scale</span>
canvas.<span class="hljs-property">width</span> = width * scale;
canvas.<span class="hljs-property">height</span> = height * scale;

<span class="hljs-comment">// è£å‰ªæ—¶ä¹Ÿè¦ä¹˜ä»¥ scale</span>
ctx.<span class="hljs-title function_">drawImage</span>(
  fullScreenImage,
  left * scale, top * scale,     <span class="hljs-comment">// â† ä¹˜ä»¥ scale</span>
  width * scale, height * scale, <span class="hljs-comment">// â† ä¹˜ä»¥ scale</span>
  <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,
  width * scale, height * scale
);

</code></pre>
<h4 data-id="heading-31">å®Œæ•´æµç¨‹</h4>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ef6def5a66b46c584a8f038e0b0ff3e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764748905&amp;x-signature=Myi4TWTPsH05RTxorW%2B1%2BNqRZNw%3D" alt="image.png" width="30%" loading="lazy"/>
<h2 data-id="heading-32">æ—¶åºå›¾</h2>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
  participant SP as Sidepanel
  participant CT as Content Script
  participant BG as Background

  SP-&gt;&gt;CT: startAreaCapture
  CT-&gt;&gt;CT: createCaptureUI + äº‹ä»¶ç»‘å®š
  CT-&gt;&gt;CT: ç”¨æˆ·æ‹–æ‹½/æ›´æ–°é€‰åŒº
  CT-&gt;&gt;CT: mouseup â†’ captureSelectedArea
  CT-&gt;&gt;BG: captureVisible
  BG--&gt;&gt;CT: DataURL(æ•´é¡µå¯è§åŒºåŸŸ)
  CT-&gt;&gt;CT: Canvas è£å‰ª(è€ƒè™‘ devicePixelRatio)
  CT-&gt;&gt;SP: areaCaptureDone(DataURL)
  SP-&gt;&gt;SP: é¢„è§ˆ + OCR è¯†åˆ«
</code></pre>
<h3 data-id="heading-33">3. æœ¬åœ°ä¸Šä¼ å›¾ç‰‡</h3>
<h4 data-id="heading-34">æ–¹å¼ä¸€ï¼šç‚¹å‡»ä¸Šä¼ </h4>
<p><strong>HTML</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;input type=<span class="hljs-string">"file"</span> id=<span class="hljs-string">"uploadInput"</span> accept=<span class="hljs-string">"image/*"</span> style=<span class="hljs-string">"display:none"</span>&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"document.getElementById('uploadInput').click()"</span>&gt;</span>
  ğŸ“ ä¸Šä¼ å›¾ç‰‡
<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
</code></pre>
<p><strong>JavaScript</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'uploadInput'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'change'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> file = e.<span class="hljs-property">target</span>.<span class="hljs-property">files</span>[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">if</span> (!file) <span class="hljs-keyword">return</span>;
  
  <span class="hljs-keyword">const</span> reader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>();
  reader.<span class="hljs-property">onload</span> = <span class="hljs-keyword">async</span> (event) =&gt; {
    <span class="hljs-keyword">const</span> base64 = event.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">','</span>)[<span class="hljs-number">1</span>];
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">recognizeText</span>(base64);
  };
  reader.<span class="hljs-title function_">readAsDataURL</span>(file);
});

</code></pre>
<h4 data-id="heading-35">æ–¹å¼äºŒï¼šæ‹–æ‹½ä¸Šä¼ </h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> dropZone = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'dropZone'</span>);

<span class="hljs-comment">// 1. é˜»æ­¢é»˜è®¤è¡Œä¸º</span>
[<span class="hljs-string">'dragenter'</span>, <span class="hljs-string">'dragover'</span>, <span class="hljs-string">'dragleave'</span>, <span class="hljs-string">'drop'</span>].<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">eventName</span> =&gt;</span> {
  dropZone.<span class="hljs-title function_">addEventListener</span>(eventName, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
    e.<span class="hljs-title function_">preventDefault</span>();
    e.<span class="hljs-title function_">stopPropagation</span>();
  });
});

<span class="hljs-comment">// 2. è§†è§‰åé¦ˆ</span>
[<span class="hljs-string">'dragenter'</span>, <span class="hljs-string">'dragover'</span>].<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">eventName</span> =&gt;</span> {
  dropZone.<span class="hljs-title function_">addEventListener</span>(eventName, <span class="hljs-function">() =&gt;</span> {
    dropZone.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'drag-over'</span>);
  });
});

<span class="hljs-comment">// 3. å¤„ç†æ–‡ä»¶</span>
dropZone.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'drop'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> file = e.<span class="hljs-property">dataTransfer</span>.<span class="hljs-property">files</span>[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">if</span> (!file.<span class="hljs-property">type</span>.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'image/'</span>)) {
    <span class="hljs-title function_">alert</span>(<span class="hljs-string">'è¯·ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶ï¼'</span>);
    <span class="hljs-keyword">return</span>;
  }
  
  <span class="hljs-keyword">const</span> reader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>();
  reader.<span class="hljs-property">onload</span> = <span class="hljs-keyword">async</span> (event) =&gt; {
    <span class="hljs-keyword">const</span> base64 = event.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">','</span>)[<span class="hljs-number">1</span>];
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">recognizeText</span>(base64);
  };
  reader.<span class="hljs-title function_">readAsDataURL</span>(file);
});

</code></pre>
<p><strong>CSS</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-id">#dropZone</span> {
  <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> dashed <span class="hljs-number">#ccc</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">text-align</span>: center;
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span>;
}

<span class="hljs-selector-id">#dropZone</span><span class="hljs-selector-class">.drag-over</span> {
  <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#4CAF50</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">76</span>, <span class="hljs-number">175</span>, <span class="hljs-number">80</span>, <span class="hljs-number">0.1</span>);
}

</code></pre>
<ul>
<li>ä½œç”¨ï¼šæŠŠå›¾ç‰‡æ‹–è¿›ä¸Šä¼ å›¾ç‰‡åŒºåŸŸ ï¼Œæ‹¦ä½æµè§ˆå™¨é»˜è®¤è¡Œä¸ºï¼Œåœ¨ drop æ—¶è¯»æ–‡ä»¶å¹¶è¯†åˆ«æˆ–é¢„è§ˆã€‚</li>
</ul>
<h3 data-id="heading-36">Â 4.é¡µé¢æˆªå›¾</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> capturePageBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'capturePageBtn'</span>);

capturePageBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> [tab] = <span class="hljs-keyword">await</span> chrome.<span class="hljs-property">tabs</span>.<span class="hljs-title function_">query</span>({ <span class="hljs-attr">active</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">currentWindow</span>: <span class="hljs-literal">true</span> });
  
  <span class="hljs-keyword">const</span> dataUrl = <span class="hljs-keyword">await</span> chrome.<span class="hljs-property">tabs</span>.<span class="hljs-title function_">captureVisibleTab</span>(tab.<span class="hljs-property">windowId</span>, {
    <span class="hljs-attr">format</span>: <span class="hljs-string">'png'</span>
  });
  
  <span class="hljs-keyword">const</span> base64 = dataUrl.<span class="hljs-title function_">split</span>(<span class="hljs-string">','</span>)[<span class="hljs-number">1</span>];
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">recognizeText</span>(base64);
});
</code></pre>
<p>ç›´æ¥ä½¿ç”¨chromeæ’ä»¶çš„æˆªå›¾åŠŸèƒ½
<strong>æƒé™é…ç½®</strong>ï¼ˆmanifest.jsonï¼‰ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"permissions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"activeTab"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"tabs"</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-37">5. OCR è¯†åˆ«</h3>
<p>ä½¿ç”¨è…¾è®¯äº‘ OCR APIï¼Œé€šè¿‡ TC3-HMAC-SHA256 ç­¾åè°ƒç”¨ <code>GeneralBasicOCR</code> æ¥å£ï¼Œæ¯æœˆ 1000 æ¬¡å…è´¹é¢åº¦ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ ¸å¿ƒè°ƒç”¨ä»£ç </span>
<span class="hljs-keyword">const</span> ocr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TencentOCR</span>(secretId, secretKey);
<span class="hljs-keyword">const</span> text = <span class="hljs-keyword">await</span> ocr.<span class="hljs-title function_">recognizeText</span>(imageBase64);
</code></pre>
<h2 data-id="heading-38">æ€»ç»“</h2>
<p>è¿™ä¸ªæ’ä»¶è§£å†³äº†æ—¥å¸¸æµè§ˆç½‘é¡µæ—¶çš„ä¸¤å¤§ç—›ç‚¹ï¼š</p>
<ol>
<li><strong>è§£é™¤é™åˆ¶</strong>ï¼šè®©ä½ è‡ªç”±å¤åˆ¶ä»»ä½•å†…å®¹</li>
<li><strong>OCR è¯†åˆ«</strong>ï¼šå¿«é€Ÿæå–å›¾ç‰‡æ–‡å­—</li>
</ol>
<h3 data-id="heading-39">æŠ€æœ¯äº®ç‚¹</h3>






























<table><thead><tr><th>æŠ€æœ¯ç‚¹</th><th>éš¾ç‚¹</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>è§£é™¤é™åˆ¶</strong></td><td>ç½‘ç«™å¤šå±‚é˜²æŠ¤</td><td>äº”å±‚æ‹¦æˆª + API åŠ«æŒ</td></tr><tr><td><strong>è‡ªé€‰æˆªå›¾</strong></td><td>é«˜åˆ†å±æ¨¡ç³Š</td><td>devicePixelRatio é€‚é…</td></tr><tr><td><strong>æ‹–æ‹½ä¸Šä¼ </strong></td><td>è§†è§‰åé¦ˆ</td><td>CSS è¿‡æ¸¡åŠ¨ç”»</td></tr><tr><td><strong>OCR è¯†åˆ«</strong></td><td>API ç­¾å</td><td>TC3-HMAC-SHA256</td></tr></tbody></table>
<p>å¸Œæœ›è¿™ä¸ªæ’ä»¶èƒ½å¸®åˆ°å¤§å®¶ï¼å¦‚æœæœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµï½</p>
<h2 data-id="heading-40">ğŸ”— ç›¸å…³é“¾æ¥</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.chrome.com%2Fdocs%2Fextensions%2F" target="_blank" title="https://developer.chrome.com/docs/extensions/" ref="nofollow noopener noreferrer">Chrome Extension å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.com%2Fdocument%2Fproduct%2F866" target="_blank" title="https://cloud.tencent.com/document/product/866" ref="nofollow noopener noreferrer">è…¾è®¯äº‘ OCR æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FCanvas_API" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API" ref="nofollow noopener noreferrer">Canvas API æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FHTML_Drag_and_Drop_API" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/HTML_Drag_and_Drop_API" ref="nofollow noopener noreferrer">Drag and Drop API</a></li>
</ul>
<blockquote>
<p>æœ¬æ’ä»¶ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨ï¼Œè¯·éµå®ˆä»¥ä¸‹åŸåˆ™ï¼š</p>
<ol>
<li><strong>åˆæ³•ä½¿ç”¨</strong>ï¼šè¯·å‹¿ç”¨äºå•†ä¸šç”¨é€”æˆ–ä¾µçŠ¯ä»–äººçŸ¥è¯†äº§æƒ</li>
<li><strong>å°Šé‡ç‰ˆæƒ</strong>ï¼šéµå®ˆç½‘ç«™æœåŠ¡æ¡æ¬¾</li>
</ol>
<p>å¦‚æœè§‰å¾—å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµ ğŸ‘ æ”¶è— â­ å…³æ³¨ ğŸ”” æ”¯æŒä¸€ä¸‹ï¼</p>
<p><strong>å¾€æœŸå®æˆ˜æ¨èï¼š</strong></p>
<ul>
<li>
<p><a href="https://juejin.cn/post/7549096640340426802" target="_blank" title="https://juejin.cn/post/7549096640340426802">Vue3 åå°åˆ†é¡µå†™è…»äº†ï¼Ÿæˆ‘ç”¨ 1 ä¸ª Hook åˆ æ‰ 90% é‡å¤ä»£ç ï¼ˆé™„æºç ï¼‰</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7511332054941188147" target="_blank" title="https://juejin.cn/post/7511332054941188147">âš¡ ä¸€ä¸ªVueè‡ªå®šä¹‰æŒ‡ä»¤æå®šä¸æ»‘æ‹–æ‹½åˆ—è¡¨ï¼Œå‘Šåˆ«å¤æ‚ç»„ä»¶å°è£…
</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7543806966926802971" target="_blank" title="https://juejin.cn/post/7543806966926802971">ğŸ”¥ è¿™æ‰æ˜¯ Vue é©±åŠ¨çš„ Chrome æ’ä»¶å·¥ç¨‹åŒ–æ­£ç¡®æ‰“å¼€æ–¹å¼</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7566299971643424819" target="_blank" title="https://juejin.cn/post/7566299971643424819">  è€æ¿é—®æˆ‘ï¼šAIçœŸèƒ½ä¸€é”®ç”»å¹¿å·æ—…æ¸¸è·¯çº¿å›¾ï¼Ÿæˆ‘ç”¨ MCP ç°åœºå¼€å›¾</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7559124639323242506" target="_blank" title="https://juejin.cn/post/7559124639323242506">ã€å‰ç«¯æ•ˆç‡å·¥å…·ã€‘ï¼šå‘Šåˆ«å³é”®å¦å­˜ï¼Œä¸åˆ° 50 è¡Œä»£ç ä¸€é”®æ‰¹é‡ä¸‹è½½ç½‘é¡µå›¾ç‰‡</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7561612065707065390" target="_blank" title="https://juejin.cn/post/7561612065707065390"> å¥³æœ‹å‹ç‚¸äº†ï¼šåˆšæ‰“å¼€çš„ç½‘é¡µæ€ä¹ˆåˆæ²¡äº†ï¼Ÿæˆ‘åæ‰‹ç”©å‡ºä¸€é”®æ¢å¤æŒ‰é’®ï¼</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7562859113246343178" target="_blank" title="https://juejin.cn/post/7562859113246343178"> ä½ å®¶å­©å­åˆå·ç©ç½‘é¡µæ¸¸æˆ? è¯•è¯•è¿™ä¸ªé˜²æ²‰è¿·å·¥å…·</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7563830723057647643" target="_blank" title="https://juejin.cn/post/7563830723057647643">  å¥¹è¯´æƒ³è¦æµªæ¼«ï¼Œæˆ‘æŠŠæµè§ˆå™¨é¼ æ ‡æ¢æˆäº†æŸ´çŠ¬ï¼Œç‚¹ä¸€ä¸‹å°±æœ‰çƒŸèŠ±ï¼ˆé™„æºç ï¼‰</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7566677296801071155" target="_blank" title="https://juejin.cn/post/7566677296801071155"> å¥³æœ‹å‹è¢«é“¾æ¥æŠ˜ç£¨ç–¯äº†ï¼Œæˆ‘å†™äº†ä¸ªå·¥å…·ä¸€é”®è§£æ•‘</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7568055953310662707" target="_blank" title="https://juejin.cn/post/7568055953310662707"> ä¸Šç­æ‘¸é±¼çœ‹æ˜é‡‘ï¼Œè€æ¿çªç„¶å‡ºç°åœ¨èº«å...</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7570984257666056238" target="_blank" title="https://juejin.cn/post/7570984257666056238"> ã€å‰ç«¯æ•ˆç‡å·¥å…·ã€‘å†ä¹Ÿä¸ç”¨ APIfox è”è°ƒï¼é›¶ä¾µå…¥ Mockï¼Œå…¨ç¨‹ä¸æ”¹ä»£ç ã€ä¸å¼€ä»£ç†</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7573521516324732955" target="_blank" title="https://juejin.cn/post/7573521516324732955"> å¤§éƒ¨åˆ†äººéƒ½é”™äº†ï¼è¿™æ‰æ˜¯chromeæ’ä»¶å¤šè„šæœ¬é€šä¿¡çš„æ­£ç¡®å§¿åŠ¿</a></p>
</li>
</ul>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TRAE SOLO æ­£å¼å‘å¸ƒäº†ï¼Ÿæˆ‘ç”¨å®ƒå°†åƒè€ä¹¡é¸¡é‚£æ ·åšé¥­å°ç¨‹åºå¼€æºäº†ï¼]]></title>    <link>https://juejin.cn/post/7576210031873409065</link>    <guid>https://juejin.cn/post/7576210031873409065</guid>    <pubDate>2025-11-25T02:46:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576210031873409065" data-draft-id="7576181242582630463" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TRAE SOLO æ­£å¼å‘å¸ƒäº†ï¼Ÿæˆ‘ç”¨å®ƒå°†åƒè€ä¹¡é¸¡é‚£æ ·åšé¥­å°ç¨‹åºå¼€æºäº†ï¼"/> <meta itemprop="keywords" content="å‰ç«¯,Trae,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-11-25T02:46:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸å¦‚æ‘¸é±¼å»"/> <meta itemprop="url" content="https://juejin.cn/user/26044011388510"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TRAE SOLO æ­£å¼å‘å¸ƒäº†ï¼Ÿæˆ‘ç”¨å®ƒå°†åƒè€ä¹¡é¸¡é‚£æ ·åšé¥­å°ç¨‹åºå¼€æºäº†ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/26044011388510/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸å¦‚æ‘¸é±¼å»
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T02:46:27.000Z" title="Tue Nov 25 2025 02:46:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    172
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ä¸å¦‚æ‘¸é±¼å»ï¼Œæ¬¢è¿æ¥åˆ°æˆ‘çš„ AI ç¼–ç¨‹åˆ†äº«ä¸“æ ã€‚</p>
<p>ä¸€ä¸ªæœˆå‰æˆ‘å‘å¸ƒçš„ä¸€ç¯‡æ–‡ç« <a href="https://juejin.cn/post/7554225547117576243" target="_blank" title="https://juejin.cn/post/7554225547117576243">ã€è€ä¹¡é¸¡ä¹Ÿå¼€æºï¼Ÿæˆ‘ç”¨ Trae SOLO åšäº†ä¸ªåƒè€ä¹¡é¸¡é‚£æ ·åšé¥­å°ç¨‹åºï¼ã€‘</a>ï¼Œè®°å½•äº†ä½œä¸ºä¸€åçˆ±åšé¥­çš„ç¨‹åºå‘˜çš„æˆ‘ï¼Œä½¿ç”¨ TRAE SOLO å¿«é€Ÿæ„å»ºäº†ä¸€ä¸ªåƒè€ä¹¡é¸¡é‚£æ ·åšé¥­å°ç¨‹åºçš„è¿‡ç¨‹ï¼Œåº”æœ‹å‹ä»¬çš„è¦æ±‚ï¼Œè¶ç€ TRAE SOLO æ­£å¼å‘å¸ƒï¼Œç”¨å®ƒæŠŠè¿™ä¸ªå°ç¨‹åºå¼€æºäº†ã€‚</p>
<h2 data-id="heading-0">TRAE SOLO æ­£å¼ç‰ˆ</h2>
<p>11 æœˆ 12 æ—¥ TRAE SOLO æ­£å¼ç‰ˆä¸Šçº¿äº†ï¼Œæ–°å¢ä¸‰æ å¸ƒå±€ã€DiffView å·¥å…·ã€SOLO Coder + Planï¼Œæ”¯æŒå¤šä»»åŠ¡å¹¶è¡Œç­‰åŠŸèƒ½ï¼Œå¹¶ä¸Šçº¿äº†å…è´¹ä½“éªŒæ´»åŠ¨ï¼Œäººäººéƒ½å¯ä»¥ç”¨ SOLO äº†ã€‚</p>
<p>æˆ‘å¯æ˜¯ TRAE SOLO è€ç”¨æˆ·äº†ï¼ŒSOLO æ¨¡å¼ï¼ˆBeta ç‰ˆï¼‰ä¸Šçº¿çš„æ—¶å€™æˆ‘å°±æ‹¿åˆ°äº† SOLO CODEï¼Œå¹¶ä¸”ä½¿ç”¨å®ƒå®Œæˆäº†ã€Œå¤åˆ»ç«¥å¹´å¦å…‹å¤§æˆ˜ã€ã€ã€Œåƒè€ä¹¡é¸¡é‚£æ ·åšé¥­å°ç¨‹åºã€ç­‰å®è·µï¼Œå¹¶ä¸”åœ¨å®é™…å·¥ä½œä¸­ä½¿ç”¨ TRAE å‚ä¸äº†å¾ˆå¤šä»»åŠ¡çš„å¼€å‘ã€‚å¦‚ä»Šæ­£å¼ç‰ˆå‘å¸ƒï¼Œè‡ªç„¶ä¸èƒ½é”™è¿‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4584916d38934f7e8e12a6e01b47e51d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=TLpMojBXj3XBaDhXyee5K0EOW%2B8%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">åƒè€ä¹¡é¸¡é‚£æ ·åšé¥­</h2>
<p>ä¸€åˆ‡éƒ½æºè‡ªäºè€ä¹¡é¸¡å‘å¸ƒçš„ã€Šè€ä¹¡é¸¡èœå“æº¯æºæŠ¥å‘Šã€‹ï¼Œ<code>CookLikeHOC</code>æ˜¯ä¸€ä¸ªæ‹¥æœ‰ 22k æ˜Ÿæ˜Ÿçš„ GitHub ä»“åº“ï¼Œå®ƒæ”¶å½•äº†ã€Šè€ä¹¡é¸¡èœå“æº¯æºæŠ¥å‘Šã€‹ä¸­å…¬å¸ƒçš„æ‰€æœ‰èœå“ã€‚</p>
<h2 data-id="heading-2">æŠ€æœ¯æ ˆ</h2>
<p>æˆ‘ä»¬å»¶ç»­ä¸Šç¯‡æ–‡ç« é€‰æ‹©å¥½çš„æŠ€æœ¯æ ˆï¼Œè¿™æ · AI å¯ä»¥åœ¨æˆ‘ä»¬è§„åˆ’å¥½çš„è·¯çº¿ä¸Šè¿›è¡Œå¼€å‘ï¼Œå¯ä»¥è¾¾åˆ°äº‹åŠåŠŸå€çš„æ•ˆæœã€‚</p>
<h3 data-id="heading-3">å‰ç«¯æŠ€æœ¯æ ˆ</h3>
<p>å› ä¸ºæˆ‘æœ¬èº«å°±æ˜¯ä¸€ä¸ªå‰ç«¯ç¨‹åºå‘˜ï¼Œæ‰€ä»¥å‰ç«¯æŠ€æœ¯æ ˆæ¯”è¾ƒç†Ÿï¼Œç›´æ¥é€‰æ‹©å¸¸ç”¨çš„æŠ€æœ¯æ ˆï¼š</p>
<ul>
<li>å°ç¨‹åºçš„å¼€å‘æ¡†æ¶: uni-app</li>
<li>å¼€å‘æ¨¡æ¿é¡¹ç›®: wot-starter åœ°å€: <a href="https://link.juejin.cn?target=https%3A%2F%2Fstarter.wot-ui.cn%2F" target="_blank" title="https://starter.wot-ui.cn/" ref="nofollow noopener noreferrer">starter.wot-ui.cn/</a></li>
<li>ç»„ä»¶åº“: wot-ui åœ°å€: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwot-ui.cn%2F" target="_blank" title="https://wot-ui.cn/" ref="nofollow noopener noreferrer">wot-ui.cn/</a></li>
</ul>
<h3 data-id="heading-4">åç«¯æŠ€æœ¯æ ˆ</h3>
<p>æœåŠ¡ç«¯ä»ç„¶é€‰æ‹© TRAE SOLO é›†æˆçš„ Supabase ä½œä¸ºæˆ‘ä»¬çš„äº‘ç«¯æœåŠ¡ã€‚</p>
<h2 data-id="heading-5">å¼€å§‹SOLO</h2>
<p>æˆ‘ä»¬ä¹‹å‰å·²ç»æ­å»ºå¥½å°ç¨‹åºçš„åŸºç¡€é¡µé¢äº†ï¼Œç°åœ¨å¯ä»¥å¼€å§‹ä¼˜åŒ–éƒ¨åˆ†åŠŸèƒ½æ•´ç†å¼€å‘é˜¶æ®µçš„ SQL å’Œè„šæœ¬ä»¥ä¾¿å°†å°ç¨‹åºå¼€æºäº†ã€‚</p>
<h3 data-id="heading-6">ä¼˜åŒ– UI æ ·å¼</h3>
<blockquote>
<p>è¿™é‡Œæˆ‘ä»¬å…¨ç¨‹ä½¿ç”¨ SOLO Coder æ¨¡å¼ï¼Œå› ä¸ºå®ƒæ›´é€‚åˆè§£å†³å¤æ‚ç¼–ç¨‹é—®é¢˜ã€‚</p>
</blockquote>
<p>æ›´æ–°é¦–é¡µåˆ†ç±»å±•ç¤ºï¼Œæ”¯æŒå±•ç¤ºå…¨éƒ¨åˆ†ç±»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b8993eceada4be5bc69bd61fd4a5838~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=m%2FPn4HU0c8M5WkiLefbFz4RkiHA%3D" alt="" loading="lazy"/></p>
<p>å¯ä»¥ä½¿ç”¨ DiffView åŠŸèƒ½æŸ¥çœ‹æ›´æ–°å†…å®¹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70a474beefac4f31a37350af42a44c16~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=V16kAPUDrJlO8tUOHZcDaNLj0eo%3D" alt="" loading="lazy"/></p>
<p>æ›´æ–°åæ•ˆæœå¦‚ä¸‹ï¼Œä½¿ç”¨ swiper å±•ç¤ºåˆ†ç±»ï¼Œæ”¯æŒå·¦å³æ»‘åŠ¨åˆ‡æ¢å±•ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6853318dd74e4aebac5ea01b4beba92f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=NyA%2B8qJigZi2Xc4l2kDiMawUCuA%3D" alt="" loading="lazy"/></p>
<p>åŒæ—¶æˆ‘ä½¿ç”¨ å³æ¢¦AI ç»™ä¸åŒåˆ†ç±»ç”Ÿæˆäº†ä¸ªå¯çˆ±çš„å›¾æ ‡ï¼Œéå¸¸ç®€å•çš„æç¤ºè¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d975f61a10304aecbd61f80e804dd397~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=%2FvCekxtsx85pqIwZ5Z1QR6BLIxc%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">ä¼˜åŒ–æ•°æ®å–å€¼</h3>
<p>æ‰“å¼€ TRAE SOLO æ¨¡å¼ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°â€œé›†æˆâ€åŠŸèƒ½
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee498491217b4596b3d9d71244a5bd70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=%2BPEuy2a6RUgLk%2Bi3XKCBVdPV7lE%3D" alt="" loading="lazy"/></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨â€œé›†æˆâ€åŠŸèƒ½æ—¶ï¼Œæœ€å¥½åˆ‡æ¢åˆ° SOLO Builder æ¨¡å¼ï¼Œå› ä¸ºåœ¨è¿™ä¸ªæ¨¡å¼ä¸‹æ‰æœ‰â€œé›†æˆâ€åŠŸèƒ½ï¼Œä¸‹å›¾æ˜¯ SOLO Coder å’Œ SOLO Builder çš„åŒºåˆ«ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/43e0f0c378344ab79ae856060ad2178a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=0S0w0DcQnD%2B0pd3AqpbWMygfa0c%3D" alt="" loading="lazy"/></p>
<p>è¿›å…¥â€œé›†æˆâ€åŠŸèƒ½ï¼Œé€‰æ‹©è¿æ¥æˆ‘ä»¬çš„ supbaseã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/20f438517539486a927246697f802626~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=XTpHq0%2BYBbEKmTjp8OnbdUSZp%2B4%3D" alt="" loading="lazy"/></p>
<p>ä¼˜åŒ–é¦–é¡µå±•ç¤ºæ¯æ—¥æ¨èèœè°±çš„é€»è¾‘ï¼Œæ¯å¤©éšæœºä»æ¯ä¸ªåˆ†ç±»ä¸­æŸ¥è¯¢ 2 é“èœå±•ç¤ºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aebc2295121b4eb2ae0d587376fd0ceb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=qucpO5vrAWfjzXER08CC%2BoICQ9M%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88d91a6e88b344a9bdbe37e815604be9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=MsqbtMg%2Fj2wwFZ%2Fe5jQbNLl5e5A%3D" alt="" loading="lazy"/></p>
<p>ä¼˜åŒ–èœè°±è¯¦æƒ…é¡µé¢ç›¸å…³æ¨èçš„é€»è¾‘ï¼Œå½“å‰èœè°±çš„ç›¸åŒåˆ†ç±»ä¸­éšæœºæ¨èäº”é“èœã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/156b0d6199a64c728c790c05ae19b774~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=hinl4KG0O9dHNpcXml9av%2F5C%2BCM%3D" alt="" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d7c2f09b4a0467497e166b77d0e811f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=S5XY0OFa6ALygVmPZuSu0t87bzI%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">æ•´ç†è„šæœ¬å¹¶å¼€æº</h3>
<p>ç”±äºè¿™ä¸ªæ”¹åŠ¨æ¶‰åŠæ–‡ä»¶å¤šï¼Œæ”¹åŠ¨å¤§ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬è¦åœ¨ SOLO Coder ä¸‹å¼€å¯ plan æ¨¡å¼ï¼Œè®© TRAE æå‰ç»™å‡ºè®¡åˆ’ï¼Œæˆ‘ä»¬ç¡®è®¤åå†ç”± TRAE è¿›è¡Œå¼€å‘ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5e9076d234c4ae3aa3474c1b7615116~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=McOKK0g6SY7Ihaz%2BjTIbJh9co3M%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a4ed207aac84810902c68e54f5367be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=i4eq8mRXz6ulLrtSCiu4pGwB7Qs%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬ä»”ç»†çœ‹ä¸€ä¸‹ SOLO Coder çš„æ–¹æ¡ˆï¼Œæ²¡æœ‰é—®é¢˜å°±è®©å®ƒå¼€å§‹æ‰§è¡Œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3bf0d032e47c4bf3b48e780480306063~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=7%2B1TC%2BgIVd%2BCirrwMml2IMCXXLA%3D" alt="" loading="lazy"/></p>
<p>SOLO Coder æ‰§è¡Œå®Œæ¯•åï¼Œæˆ‘ä»¬ç‚¹å‡»æŸ¥çœ‹å˜æ›´ï¼Œä½¿ç”¨ DiffView åŠŸèƒ½æ£€æŸ¥å˜æ›´æ–‡ä»¶ï¼Œåˆ¤æ–­ SOLO æ‰§è¡Œæ˜¯å¦æ­£ç¡®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b48b1c8323794644b92b90f592cbe5dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=1HJ7ccJmuonIqxLMwFaEj4c7H80%3D" alt="" loading="lazy"/></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ çš„æ“ä½œéœ€è¦æ“ä½œæ•°æ®åº“ï¼Œå¯ä»¥åˆ‡æ¢åˆ° SOLO Builder æ¨¡å¼ï¼Œè®©å®ƒååŠ©æ“ä½œï¼Œå»ºè¡¨ã€æ‰§è¡ŒSQLã€è·å– supbase é…ç½®ï¼Œå®ƒéƒ½å¯ä»¥èƒœä»»ã€‚</p>
<h3 data-id="heading-9">é…ç½®CI/CD</h3>
<p>æˆ‘ä»¬ä½¿ç”¨ uni-mini-ci å®Œæˆæœ¬å°ç¨‹åºçš„ CI/CDæŒç»­é›†æˆï¼Œå°ç¨‹åºä¸€é”®éƒ¨ç½²ä¸å†æ˜¯æ¢¦ï¼Œè¿™é‡Œå°±ä¸è´´å®Œæ•´çš„ GitHub Action ä»£ç äº†ï¼Œå¤§å®¶å¯ä»¥å°ç¨‹åºçš„ GitHub ä»“åº“ä¸­çœ‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/866febb66aa94aa4aa33e9fd1dad0fa2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=dBE1VUe86LNombeHW5veWLJIg8Q%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54cb9ff2f40444e0aa7940faeef6c1b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=HJ4GBMK6SFaSsNoVuY%2BNQ2Ub7sc%3D" alt="" loading="lazy"/></p>
<p>å°† GitHub Action é…ç½®æ–‡ä»¶æ¨é€åˆ° GitHub ä¸Šï¼Œå°±å¯ä»¥æŒ‰ç…§ä¸‹å›¾æ“ä½œè¿›è¡Œæ‰‹åŠ¨å‘ç‰ˆï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡æ‰“ tag è§¦å‘å‘ç‰ˆï¼Œå‘ç‰ˆæ‰§è¡Œä¼šå°†ä»£ç æ¨é€åˆ°å¾®ä¿¡å°ç¨‹åºåå°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cbb678aac5e3427d9329e9997acf4a1c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=DFMBEHRk9%2F1ICuvyHhzxl9PpeaM%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨å¾®ä¿¡å°ç¨‹åºåå°çœ‹åˆ°å¯¹åº”çš„å¼€å‘ç‰ˆæœ¬ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea6f6297bea543ec870916263ae1f315~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=Ey4cw2WZ5jVEfvDzPs3iuNa1lTw%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-10">å®Œæ•´æ•ˆæœ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a25e26f54ce44f65a149ecd4085a419d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=pCw1tyb0Yfv4VNZz%2Fk9%2BT9aj8Qo%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a76c41632884997a3c38078fd49b09f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=TMIiRJfc1a%2Fm%2Fi%2B%2BWaJlr08y5XQ%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/20963583d96947379c373efe8e9dedd0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=%2Fg6TuenSlLN5el0uySNaMwVhXbQ%3D" alt="" loading="lazy"/></p>
<p><em><strong>ä¹Ÿå¯ä»¥è‡ªè¡Œæœç´¢ã€Œé±¼å“¥èœè°±ã€è¿›è¡Œä½“éªŒ</strong></em></p>
<h2 data-id="heading-11">TRAE SOLO æ­£å¼ç‰ˆä½“éªŒ</h2>
<p>TRAE SOLO æ­£å¼ç‰ˆæ–°å¢äº† Plan æ¨¡å¼å’Œ SOLO Coder ç­‰ï¼Œå¯¹ç¼–ç¨‹ä½“éªŒçš„æå‡å¾ˆå¤§ï¼Œå‡å°‘äº†å¾ˆå¤š AI ä»‹å…¥åçš„å–„åå·¥ä½œã€‚ä¸è¿‡å¤±å» Claude ä»å¯¹å…¶èƒ½åŠ›é€ æˆäº†ä¸å°çš„å½±å“ï¼ŒæœŸå¾…åç»­å¯ä»¥åœ¨ SOLO æ¨¡å¼é›†æˆå¼ºå¤§çš„ Gemini 3 å’Œä¼˜ç§€çš„å›½äº§æ¨¡å‹ GLM ç­‰ï¼ŒIDE ä¸æ¨¡å‹ 2 è€…æ˜¯ç›¸è¾…ç›¸æˆçš„ã€‚</p>
<h2 data-id="heading-12">æ€»ç»“</h2>
<p>æˆ‘ä»¬å‡ ä¹é›¶ä»£ç  ç”¨ Trae SOLO å®Œæˆäº†ã€Œåƒè€ä¹¡é¸¡é‚£æ ·åšé¥­ã€å°ç¨‹åºçš„å¼€æºä¸ CI/CD æµç¨‹ï¼Œè¿‡ç¨‹ä¸­ä¿æŒæ•°æ®å¹²å‡€ã€çº¯å‡€ä¸Šä¸‹æ–‡ã€å¢é‡å¼æ²Ÿé€šç­‰ä¸‰ä¸ªåŸåˆ™ä»ç„¶æ˜¯ä½¿æˆ‘ä»¬äº‹åŠåŠŸå€çš„åˆ©å™¨ï¼Œè¿™å…¶å®å’Œå½“ä¸‹å¾ˆæµè¡Œçš„ SDD è§„èŒƒç›¸ç¬¦ï¼Œåœ¨è¿™ç§å°å‹é¡¹ç›®ä¸­ï¼ŒåŸºäºä¸€ä¸ªä¼˜ç§€çš„é¡¹ç›®æ¨¡æ¿å’Œè‰¯å¥½çš„éœ€æ±‚è¾“å…¥å’Œå¼€å‘è®¡åˆ’ï¼Œç”±è§„èŒƒé©±åŠ¨å¼€å‘ï¼Œèƒ½è®©é¡¹ç›®åšçš„æ›´å¥½ã€èµ°å¾—æ›´è¿œã€‚</p>
<p>å¥½äº†ï¼Œå®ç°è¿™ä¸ªå°ç¨‹åºåï¼Œå¤§å®¶ä¹Ÿå¯ä»¥åƒè€ä¹¡é¸¡é‚£æ ·åšé¥­äº†ï¼</p>
<h2 data-id="heading-13">å‚è€ƒèµ„æ–™</h2>
<ul>
<li>å°ç¨‹åºï¼šã€Œé±¼å“¥èœè°±ã€</li>
<li>å¼€æºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FMoonofweisheng%2FMyCookLikeHOC" target="_blank" title="https://github.com/Moonofweisheng/MyCookLikeHOC" ref="nofollow noopener noreferrer">github.com/Moonofweishâ€¦</a></li>
<li>CookLikeHOCï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FGar-b-age%2FCookLikeHOC" target="_blank" title="https://github.com/Gar-b-age/CookLikeHOC" ref="nofollow noopener noreferrer">github.com/Gar-b-age/Câ€¦</a></li>
<li>é¡¹ç›®æ¨¡æ¿ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fstarter.wot-ui.cn%2F" target="_blank" title="https://starter.wot-ui.cn/" ref="nofollow noopener noreferrer">starter.wot-ui.cn/</a></li>
</ul>
<p><em><strong>æ¬¢è¿è¯„è®ºåŒºæ²Ÿé€šã€è®¨è®ºğŸ‘‡ğŸ‘‡</strong></em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è°·æ­Œæ–°è®ºæ–‡ï¼šä¸ºä»€ä¹ˆå½“å‰ AI æ— æ³•åœ¨è®­ç»ƒåç»§ç»­å­¦ä¹ ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7576181242582892607</link>    <guid>https://juejin.cn/post/7576181242582892607</guid>    <pubDate>2025-11-25T03:15:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576181242582892607" data-draft-id="7576212547235135531" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è°·æ­Œæ–°è®ºæ–‡ï¼šä¸ºä»€ä¹ˆå½“å‰ AI æ— æ³•åœ¨è®­ç»ƒåç»§ç»­å­¦ä¹ ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,AIGC,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-25T03:15:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹çŒ«deå°éƒ­"/> <meta itemprop="url" content="https://juejin.cn/user/817692379985752"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è°·æ­Œæ–°è®ºæ–‡ï¼šä¸ºä»€ä¹ˆå½“å‰ AI æ— æ³•åœ¨è®­ç»ƒåç»§ç»­å­¦ä¹ ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/817692379985752/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹çŒ«deå°éƒ­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T03:15:24.000Z" title="Tue Nov 25 2025 03:15:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç›¸ä¿¡å¤§å®¶éƒ½ç»å†è¿‡è¿™æ ·çš„ç–‘æƒ‘ï¼Œåœ¨ä½¿ç”¨ AI çš„è¿‡ç¨‹ä¸­ï¼Œä¸ºä»€ä¹ˆæˆ‘æ˜æ˜éƒ½çº æ­£è¿‡å®ƒçš„é—®é¢˜ï¼Œä½†æ˜¯å®ƒä¸‹æ¬¡è¿˜æ˜¯ä¾ç„¶ä¼šçŠ¯åŒæ ·çš„é”™è¯¯ï¼Œä»¥è‡³äºæˆ‘ä»¬ä¸å¾—ä¸é’ˆå¯¹æ€§å†™å¤§é‡çš„è§„åˆ™æ¥çº¦æŸæ•´ä¸ª Vibe Coding çš„è¿‡ç¨‹ã€‚</p>
<blockquote>
<p>ä½†æ˜¯å°±ç®—æœ‰è¯¦ç»†çš„ rule ï¼Œæœ‰äº›å€”å¼ºçš„æ¨¡å‹ä¾ç„¶å–œæ¬¢æˆ‘è¡Œæˆ‘ç´ ï¼Œæ¯”å¦‚ Gemini 3 Pro å°±å®¹æ˜“å‡ºç°ï¼Œ <strong>å†™çš„å¤ªè¯¦ç»†çš„ prompt ï¼Œæ•ˆæœå±…ç„¶ä¸å¦‚æ¨¡ç³Šçš„</strong>ï¼Œä½ çº æ­£ä»–ï¼Œä»–ä¼šå…ˆè‚¯å®šä½ ï¼Œç„¶åè¯´è¿˜æ˜¯è¯¥æŒ‰ç…§æˆ‘çš„æ¥Â·Â·Â·Â·</p>
</blockquote>
<h2 data-id="heading-0">é—®é¢˜</h2>
<p>è°·æ­Œè¿™æ¬¡å…¬å¸ƒçš„è®ºæ–‡å¾ˆç›´è§‚çš„è§£é‡Šäº†è¿™ä¸ªé—®é¢˜ï¼š<strong>å› ä¸ºå¤§æ¨¡å‹æ— æ³•åœ¨è®­ç»ƒåç»§ç»­å­¦ä¹ </strong> ï¼Œè®ºæ–‡æŠŠå½“å‰çš„å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰è¢«æ¯”ä½œæ‚£æœ‰ <strong>â€œé¡ºè¡Œæ€§é—å¿˜ç—‡â€ï¼ˆAnterograde Amnesiaï¼‰</strong> çš„ç—…äºº ï¼Œè¿™ç§ç—…äººåªèƒ½ä¿ç•™å‘ç—…å‰çš„é•¿æœŸè®°å¿†ï¼Œæ— æ³•å½¢æˆæ–°çš„é•¿æœŸè®°å¿†ï¼Œåªèƒ½ä¾é çŸ­æš‚çš„çŸ­æœŸè®°å¿†ç”Ÿæ´»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/369b747e84a34869b11b90b1b06394a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645324&amp;x-signature=SPT%2BjNorfMdl%2FlkYebROM39BP90%3D" alt="image-20251125103150345" loading="lazy"/></p>
<p>å…·ä½“å¯ä»¥è§£é‡Šä¸ºä»¥ä¸‹ä¸‰ç‚¹ï¼š</p>
<h3 data-id="heading-1">A. â€œæ•°å­—å¤±å¿†ç—‡â€ï¼šåªæœ‰ä¸¤æï¼Œæ²¡æœ‰ä¸­é—´æ€</h3>
<p>ç›®å‰çš„æ¨¡å‹åªæœ‰ä¸¤ç§è®°å¿†çŠ¶æ€ï¼Œä¸­é—´å­˜åœ¨å·¨å¤§çš„æ–­å±‚ï¼š</p>
<ol>
<li><strong>æå¿«ä¸”çŸ­æš‚çš„è®°å¿†</strong>ï¼ˆIn-Context Learningï¼‰ï¼š ä¹Ÿå°±æ˜¯ä½ çš„ <code>Prompt</code> æˆ–ä¸Šä¸‹æ–‡çª—å£ï¼Œè¿™éƒ¨åˆ†é€šè¿‡æ³¨æ„åŠ›æœºåˆ¶ï¼ˆAttentionï¼‰å¤„ç†ï¼Œæ›´æ–°æå¿«ï¼Œä½†è¿™åªæ˜¯â€œä¸´æ—¶çš„â€ï¼Œä¸€æ—¦çª—å£å…³é—­æˆ–è¶…å‡ºé•¿åº¦ï¼Œä¿¡æ¯å°±æ¶ˆå¤±äº† ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå®ƒå¹¶èƒ½å¸å–ä½ çš„æ•™è®­çš„åŸå› </li>
<li><strong>å†»ç»“çš„é•¿æœŸè®°å¿†ï¼ˆPre-trained Weightsï¼‰ï¼š</strong> å¯¹åº”çš„æ˜¯æ¨¡å‹çš„ <code>MLP</code> å±‚ï¼ˆå‚æ•°ï¼‰ï¼Œè¿™éƒ¨åˆ†æ˜¯åœ¨é¢„è®­ç»ƒé˜¶æ®µé€šè¿‡æµ·é‡æ•°æ®â€œå›ºåŒ–â€ä¸‹æ¥çš„ï¼Œä¸€æ—¦éƒ¨ç½²äº†ï¼Œè¿™äº›å‚æ•°å°±æ˜¯é™æ€çš„ï¼Œæ— æ³•æ›´æ”¹ ã€‚</li>
</ol>
<p>è€Œç›®å‰çš„é—®é¢˜åœ¨äºï¼šå½“å‰æ¨¡å‹ç¼ºä¹å°†â€œå³æ—¶å¯¹è¯â€è½¬åŒ–ä¸ºâ€œé•¿æœŸå‚æ•°â€çš„æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯å®ƒä»¬ç¼ºä¹ä¸­é—´çš„é¢‘è°±ï¼š<strong>é‚£äº›åº”è¯¥ä»çŸ­æœŸé€æ¸å˜ä¸ºé•¿æœŸçš„è®°å¿†</strong>ã€‚</p>
<h3 data-id="heading-2">B. ç»´åº¦å•ä¸€ï¼šåªå †å äº†â€œæ·±åº¦â€ï¼Œå¿½ç•¥äº†â€œæ—¶é—´â€</h3>
<p>åœ¨è®ºæ–‡é‡Œï¼Œä¼ ç»Ÿçš„â€œæ·±åº¦å­¦ä¹ â€ä¸»è¦å…³æ³¨å †å æ›´å¤šçš„å±‚ï¼ˆDepthï¼‰æ¥å¢åŠ å®¹é‡ ï¼Œä½†è¿™ä¸€ç»´åº¦æ˜¯é™æ€çš„ã€‚</p>
<p>ç ”ç©¶äººå‘˜å‘ç°<strong>çœŸæ­£çš„å­¦ä¹ éœ€è¦æ­£äº¤çš„å¦ä¸€ä¸ªç»´åº¦ï¼šæ—¶é—´ï¼ˆæˆ–é¢‘ç‡ï¼‰</strong> ï¼Œå¤§è„‘å¹¶ä¸æ˜¯ä»¥ç»Ÿä¸€çš„é€Ÿåº¦æ›´æ–°æ‰€æœ‰ç¥ç»å…ƒçš„ï¼Œè€Œæ˜¯ä»¥ä¸åŒçš„é¢‘ç‡ï¼ˆè„‘æ³¢ï¼‰è¿ä½œï¼Œè€Œç›®å‰çš„ LLM å°±åƒæ˜¯ä¸€ä¸ªå¼ºåˆ¶æ‰€æœ‰æ¥¼å±‚éƒ½é™æ­¢ä¸åŠ¨çš„å»ºç­‘ï¼Œåªæœ‰æœ€é¡¶å±‚çš„â€œæ¥å¾…å¤„â€ï¼ˆContextï¼‰åœ¨å·¥ä½œã€‚</p>
<h3 data-id="heading-3">C. ä¼˜åŒ–å™¨ä¸æ¶æ„çš„åˆ†ç¦»</h3>
<p>åœ¨ä¼ ç»Ÿæ·±åº¦å­¦ä¹ ä¸­ï¼Œ<strong>æ¶æ„</strong>ï¼ˆå¦‚ Transformerï¼‰å’Œ<strong>ä¼˜åŒ–å™¨</strong>ï¼ˆå¦‚ Adamï¼‰è¢«çœ‹ä½œæ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„ä¸œè¥¿ï¼Œæ¶æ„è´Ÿè´£æ¨ç†ï¼Œä¼˜åŒ–å™¨è´Ÿè´£åœ¨è®­ç»ƒæ—¶æ›´æ–°å‚æ•°ã€‚</p>
<p>è€Œè®ºæ–‡çš„é¢ è¦†æ€§è§‚ç‚¹æ˜¯ï¼š ä¼˜åŒ–å™¨æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ç§<strong>è”æƒ³è®°å¿†æ¨¡å—ï¼ˆAssociative Memoryï¼‰</strong> ï¼Œç›®å‰çš„æ¨¡å‹åœ¨éƒ¨ç½²åä¸¢å¼ƒäº†ä¼˜åŒ–å™¨ï¼Œå¯¼è‡´å®ƒä»¬å¤±å»äº†â€œè‡ªæˆ‘ä¿®æ”¹â€å’Œâ€œå‹ç¼©æ¢¯åº¦â€çš„èƒ½åŠ›ï¼Œä»è€Œå¤±å»äº†å­¦ä¹ èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-4">è§£å†³åŠæ³•</h2>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè°·æ­Œæå‡ºäº†ä¸€ç§æ–°çš„èŒƒå¼ï¼Œä¸å†æŠŠæ¨¡å‹çœ‹ä½œä¸€ä¸ªæ‰å¹³çš„ç¥ç»ç½‘ç»œï¼Œè€Œæ˜¯çœ‹ä½œ<strong>ä¸€ç»„åµŒå¥—çš„ä¼˜åŒ–é—®é¢˜</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/412bd2c859c6487a995362d8eb2bc841~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645324&amp;x-signature=GbFVHZaKtmRueCmIGPhwLQiTjnY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">A. æ ¸å¿ƒç†å¿µï¼šè¿ç»­è®°å¿†é¢‘è°± (Continuum Memory System)</h3>
<p>å°±åƒäººç±»å¤§è„‘æœ‰ä¸åŒé¢‘ç‡çš„è„‘æ³¢ï¼ˆDeltaæ³¢ã€Thetaæ³¢ã€Alphaæ³¢ç­‰ï¼‰åˆ†åˆ«è´Ÿè´£ä¸åŒå±‚çº§çš„è®°å¿†æ•´åˆä¸€æ · ï¼Œæ¨¡å‹ä¹Ÿåº”è¯¥æœ‰ä¸åŒæ›´æ–°é¢‘ç‡çš„ç»„ä»¶ã€‚</p>
<ul>
<li>
<p><strong>ä¼ ç»Ÿæ¨¡å‹ï¼š</strong> é¢‘ç‡åªæœ‰ 0 ï¼ˆå†»ç»“çš„å‚æ•°ï¼‰å’Œ â™¾ï¸ï¼ˆæå¿«çš„ Attentionï¼‰ã€‚</p>
</li>
<li>
<p><strong>åµŒå¥—å­¦ä¹ æ¨¡å‹ï¼š</strong> åˆ›å»ºä¸€ä¸ªï¼š</p>
<ul>
<li><strong>Level 1 (æå¿«):</strong> å¤„ç†å½“å‰çš„ Tokenã€‚</li>
<li><strong>Level 2 (ä¸­ç­‰):</strong> æ¯éš” 16 ä¸ª Token æ›´æ–°ä¸€æ¬¡ï¼Œæ•æ‰çŸ­æœŸä¸Šä¸‹æ–‡</li>
<li><strong>Level 3 (æ…¢é€Ÿ):</strong> æ¯éš” 100ä¸‡ Token æ›´æ–°ä¸€æ¬¡ï¼Œæ•æ‰é•¿æœŸçŸ¥è¯†</li>
<li><strong>Level 4 (ææ…¢):</strong> ç±»ä¼¼ç›®å‰çš„é¢„è®­ç»ƒçŸ¥è¯†</li>
</ul>
</li>
</ul>
<p>ä¾‹å¦‚ï¼Œå·¦å›¾ï¼ˆDeep Learningï¼‰å±•ç¤ºäº†é€šå¸¸ç†è§£çš„æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼ˆå¦‚ RNN + Attentionï¼‰ï¼Œæ˜¯ä¸€ä¸ªæ‰å¹³çš„åºåˆ— ï¼Œè¿™ç§è§†è§’éšè—äº†å†…éƒ¨çš„æ¢¯åº¦æµåŠ¨ ã€‚</p>
<p>è€Œå³å›¾ï¼ˆNeural Learning Moduleï¼‰ï¼š*æ˜¯è®ºæ–‡çš„æ ¸å¿ƒè§†è§’ï¼Œå®ƒå°†æ¨¡å‹çœ‹ä½œä¸€ä¸ªä¸ª<strong>åµŒå¥—çš„ç«‹æ–¹ä½“</strong>ï¼Œæ¯ä¸€ä¸ªç«‹æ–¹ä½“ä»£è¡¨ä¸€ä¸ªâ€œä¼˜åŒ–é—®é¢˜â€ ï¼Œä»è€Œå®ç°ä¸åŒ Level çš„è¿ç»­é¢‘è°±ï¼Œæ¯ä¸€å±‚éƒ½æœ‰è‡ªå·±çš„æ¢¯åº¦æµï¼ˆGradient Flowï¼‰å’Œæ›´æ–°ç›®æ ‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28937766376b45368aa2ef073529650e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645324&amp;x-signature=7yBZTFJmwdmXzYOvjKLLhmvhF3o%3D" alt="" loading="lazy"/></p>
<p>ä¹Ÿå°±æ˜¯ <strong>â€œå±‚ï¼ˆLayerï¼‰â€ä¸ä»…ä»…æ˜¯ç©ºé—´çš„å †å ï¼Œè€Œæ˜¯æ—¶é—´ä¸Šçš„åµŒå¥—</strong>ï¼Œè§£é‡Šäº†ä¸ºä»€ä¹ˆæ¨¡å‹åº”è¯¥åŒ…å«â€œå†…éƒ¨ä¼˜åŒ–å™¨â€ï¼šå³æ¨¡å‹åœ¨æ¨ç†æ—¶ï¼Œå†…éƒ¨çš„å°ç›’å­åº”è¯¥åœ¨ä¸æ–­è‡ªæˆ‘ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-6">B. æ–°æ¶æ„ï¼šHOPE (Self-Modifying Titans + Continuum Memory)</h3>
<p>è®ºæ–‡ä½œè€…æå‡ºäº† <strong>HOPE</strong> çš„å…·ä½“å®ç°æ¨¡å‹ï¼Œå®ƒç»“åˆäº†ä¸¤ä¸ªå…³é”®æŠ€æœ¯ï¼š</p>
<ol>
<li>è‡ªæˆ‘ä¿®æ”¹çš„ Titans** (Self-Modifying Titans)</li>
</ol>
<p>æ¨¡å‹ä¸å†ä¾èµ–å¤–éƒ¨çš„ä¼˜åŒ–å™¨ï¼ˆå¦‚ Adamï¼‰æ¥å‘Šè¯‰å®ƒå¦‚ä½•æ›´æ–°ï¼Œè€Œæ˜¯å­¦ä¹ å¦‚ä½•ä¿®æ”¹è‡ªå·±ï¼Œæ¨¡å‹å†…éƒ¨åŒ…å«äº†ä¸€ä¸ªâ€œå­¦ä¹ æ¨¡å—â€ï¼Œå®ƒèƒ½åœ¨è¿è¡Œæ—¶è®¡ç®—æ¢¯åº¦å¹¶æ›´æ–°è‡ªå·±çš„å‚æ•°ï¼Œè¿™æ„å‘³ç€æ¨¡å‹åœ¨å’Œä½ å¯¹è¯çš„è¿‡ç¨‹ä¸­ï¼Œå®é™…ä¸Šåœ¨å¾®è°ƒå®ƒè‡ªå·±çš„éƒ¨åˆ†ç»“æ„</p>
<ol start="2">
<li>å¤šçº§ MLP ç³»ç»Ÿ</li>
</ol>
<p>HOPE ä½¿ç”¨äº†ä¸€ç³»åˆ—åµŒå¥—çš„ MLPï¼ˆå¤šå±‚æ„ŸçŸ¥æœºï¼‰å—ï¼Œæ¯ä¸ªå—æœ‰ä¸åŒçš„â€œå—å¤§å°â€ï¼ˆChunk Sizeï¼‰å’Œæ›´æ–°é¢‘ç‡ï¼š</p>
<ul>
<li>æœ‰äº›å±‚æ›´æ–°å¾—å¾ˆå¿«ï¼Œè´Ÿè´£è®°ä½åˆšæ‰çš„å¯¹è¯</li>
<li>æœ‰äº›å±‚æ›´æ–°å¾—å¾ˆæ…¢ï¼Œè´Ÿè´£æ²‰æ·€çŸ¥è¯†</li>
</ul>
<p>ç»„åˆèµ·æ¥ï¼Œå°±æ„æˆäº†â€œæ¢¯åº¦è®°å¿†æ›²çº¿â€ ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc5b0a9cccc041b0b6468a03185b4a0a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645324&amp;x-signature=pBDlZP47djcKi1OWHewdrYZ0aqA%3D" alt="" loading="lazy"/></p>
<p>å¯¹æ¯” Transformer çš„æç«¯é¢‘ç‡ï¼Œå¯ä»¥çœ‹å‡ºæ¥ HOPE (å·¦ä¾§)è¿™æ˜¯ä¸€ä¸ªè¿ç»­çš„é¢‘è°±ï¼Œ</p>
<ul>
<li>High Frequency FFNï¼šå—å¤§å°ï¼ˆChunk Lengthï¼‰ä¸º 16ï¼Œæ›´æ–°é¢‘ç‡é«˜ ã€‚</li>
<li>Mid Frequency FFNï¼šå—å¤§å°ä¸º 1Mï¼ˆä¸€ç™¾ä¸‡ï¼‰ï¼Œæ›´æ–°é¢‘ç‡ä¸­ç­‰ã€‚</li>
<li>Low Frequency FFNï¼šæ›´æ–°ææ…¢ ã€‚</li>
</ul>
<p>ä»è€Œè§£å†³â€œæ— æ³•ç»§ç»­å­¦ä¹ â€çš„é—®é¢˜ï¼Œå±•ç¤ºäº†å¦‚ä½•å¡«è¡¥â€œçŸ­æœŸè®°å¿†â€å’Œâ€œé•¿æœŸè®°å¿†â€ä¹‹é—´çš„ç©ºç™½ï¼Œåˆ›å»ºäº†ä¸åŒé€Ÿç‡çš„è®°å¿†å±‚çº§ã€‚</p>
<h3 data-id="heading-7">C. æ·±åº¦ä¼˜åŒ–å™¨ (Deep Optimizers)</h3>
<p>è®ºæ–‡è¯æ˜äº†åŠ¨é‡æ¢¯åº¦ä¸‹é™ï¼ˆMomentum SGDï¼‰æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª 2 çº§çš„è”æƒ³è®°å¿†ç³»ç»Ÿ ï¼ŒHOPE åˆ©ç”¨è¿™ä¸€å‘ç°ï¼Œè®¾è®¡äº†æ›´å…·è¡¨è¾¾èƒ½åŠ›çš„ä¼˜åŒ–å™¨ï¼Œä½¿å…¶æˆä¸ºæ¨¡å‹æœ¬èº«çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯è®­ç»ƒå®Œå°±æ‰”æ‰çš„å·¥å…·ã€‚</p>
<h2 data-id="heading-8">å®éªŒç»“æœä¸æ„ä¹‰</h2>
<p>åœ¨å®éªŒä¸­ï¼ŒHOPE æ¨¡å‹ï¼ˆ760M å’Œ 1.3B å‚æ•°é‡ï¼‰åœ¨è¯­è¨€å»ºæ¨¡å’Œå¸¸è¯†æ¨ç†ä»»åŠ¡ä¸Šï¼Œ<strong>å‡»è´¥äº†åŒç­‰è§„æ¨¡çš„ Transformer++ã€RetNet å’Œ Mamba (Titans)</strong> ï¼Œ æ›´é‡è¦çš„æ˜¯å®ƒå±•ç¤ºäº†æ›´ä½çš„å›°æƒ‘åº¦ï¼ˆPerplexityï¼‰ï¼Œè¯æ˜äº†è¿™ç§â€œåŠ¨æ€æ›´æ–°â€æœºåˆ¶çš„æœ‰æ•ˆæ€§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6b22fce82bb4efb87493f8830614f4d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645324&amp;x-signature=BoT%2BDUA%2BYoU2s2x8fx2pifdNY%2FI%3D" alt="" loading="lazy"/></p>
<p>å¦å¤–è®ºæ–‡çš„æ„ä¹‰ä¸ä»…ä»…åœ¨äºæå‡ºäº†ä¸€ä¸ªæ–°æ¨¡å‹ï¼Œè€Œåœ¨äºå®ƒæŒ‘æˆ˜äº†â€œæ·±åº¦å­¦ä¹ â€è¿™ä¸ªåå­—æœ¬èº« ï¼š</p>
<ul>
<li><strong>ä»â€œæ·±åº¦â€åˆ°â€œåµŒå¥—â€ï¼š</strong> æœªæ¥çš„ AI ç«äº‰å¯èƒ½ä¸å†å•çº¯æ˜¯å †å å±‚æ•°å’Œå‚æ•°è§„æ¨¡ï¼ˆScaleï¼‰ï¼Œè€Œæ˜¯è®¾è®¡æ›´åˆç†çš„<strong>æ—¶é—´æ›´æ–°é¢‘ç‡ï¼ˆTime/Frequencyï¼‰</strong></li>
</ul>

<ul>
<li><strong>ç»ˆèº«å­¦ä¹  (Lifelong Learning)ï¼š</strong> å¦‚æœ HOPE æ¶æ„è¢«è§„æ¨¡åŒ–ï¼Œä¹Ÿè®¸å¯ä»¥ä¼šçœ‹åˆ°çœŸæ­£çš„â€œå…»æˆç³»â€ AIï¼Œå®ƒä¸ä¼šåœ¨å‘å¸ƒé‚£å¤©å°±åœæ­¢æˆé•¿ï¼Œè€Œæ˜¯é€šè¿‡æ¯ä¸€æ¬¡äº¤äº’ï¼Œå°†ä¿¡æ¯ä»çŸ­æœŸè®°å¿†é€æ¸æ¸—é€åˆ°é•¿æœŸè®°å¿†ä¸­ï¼ŒçœŸæ­£è§£å†³â€œç¾éš¾æ€§é—å¿˜â€å’Œâ€œæ— æ³•æŒç»­å­¦ä¹ â€çš„ç—›ç‚¹ã€‚</li>
</ul>
<p>æ€»ç»“èµ·æ¥ï¼Œä¹‹å‰çš„ ChatGPT å’Œ Gemini åƒæ˜¯ä¸€ä¸ªåªæœ‰â€œæ­¤æ—¶æ­¤åˆ»â€å’Œâ€œå‡ºå‚è®¾ç½®â€çš„æœºå™¨ï¼›è€Œ Google æå‡ºçš„ HOPE æ¶æ„ï¼Œè¯•å›¾èµ‹äºˆ AI â€œä»æ­¤åˆ»èµ°å‘æ°¸æ’â€çš„è®°å¿†èƒ½åŠ›ï¼Œè®©æ¨¡å‹åœ¨è¿è¡Œä¸­é€šè¿‡è‡ªæˆ‘ä¿®æ”¹æ¥æŒç»­è¿›åŒ–ã€‚</p>
<blockquote>
<p>è€Œå®é™…ä¸Šå¯¹åº”ä¹‹å‰ Deepseek åˆ©ç”¨å›¾ç‰‡æ¥å‹ç¼©è®°å¿†çš„å®ç°ï¼Œä¹Ÿæ˜¯åœ¨è®°å¿†æ—¶æ•ˆæ€§ä¸Šçš„æ¢ç´¢ã€‚</p>
</blockquote>
<h2 data-id="heading-9">æœ€å</h2>
<p><strong>ä»è¿™ä¸ªè§’åº¦çœ‹ï¼Œèƒ½â€œåƒä¸€å ‘é•¿ä¸€æ™ºâ€çš„ AI ä¹Ÿè®¸ç¦»æˆ‘ä»¬å°±ä¸è¿œäº†</strong>ï¼Œä¸è¿‡å¯ä»¥çŒœæµ‹ï¼Œè¿™ç§å®ç°ä¹Ÿæœ‰è¿™ç›¸åº”çš„å±€é™æ€§é—®é¢˜éœ€è¦å¤„ç†ï¼Œä¾‹å¦‚ HOPE æ¶æ„çš„æ ¸å¿ƒåœ¨äºâ€œæ¨¡å‹åœ¨æ¨ç†è¿‡ç¨‹ä¸­ä¿®æ”¹è‡ªå·±â€ ï¼Œè¿™æ„å‘³ç€å®ƒä¸èƒ½åƒä¼ ç»Ÿ Transformer é‚£æ ·åªè¿›è¡Œç®€å•çš„çŸ©é˜µä¹˜æ³•ï¼Œè¿˜éœ€è¦è¿›è¡Œæ¢¯åº¦çš„è®¡ç®—å’Œå‚æ•°æ›´æ–°ï¼Œä¹Ÿå°±æ˜¯ï¼š</p>
<ul>
<li>æ›´å¤šçš„æ€§èƒ½å¼€é”€ï¼Œä¾‹å¦‚é¢å¤–çš„ MLP è¿ç®—å’Œå®æ—¶æ¢¯åº¦è®¡ç®—</li>
<li>æ›´å¤šçš„å†…å­˜å ç”¨ï¼Œæ¯”å¦‚ HOPE éœ€è¦å­˜å‚¨â€œä¼˜åŒ–å™¨çŠ¶æ€â€ å’Œç®¡ç†çŠ¶æ€å¤§å°</li>
<li>HOPE è¦æ±‚å‚æ•°åœ¨ <code>Forward</code> è¿‡ç¨‹ä¸­åŠ¨æ€å˜åŒ– ï¼Œè¿™ç§â€œè‡ªæˆ‘ä¿®æ”¹â€çš„ä»£ç å®ç°éš¾åº¦å¤§ï¼Œä¸”éš¾ä»¥åˆ©ç”¨ç°æœ‰çš„åº•å±‚ Kernel ä¼˜åŒ–</li>
<li>å¤šåµŒå¥—ä¸‹çš„æ¢¯åº¦æµç®¡ç†å’Œç‹¬ç«‹é—®é¢˜</li>
<li>Â·Â·Â·Â·Â·</li>
</ul>
<blockquote>
<p>æœ€åï¼Œæœ¬æ–‡è§£è¯»ä¸»è¦å‚è€ƒ Gemini åˆ†æã€‚</p>
</blockquote>
<h2 data-id="heading-10">åŸæ–‡é“¾æ¥</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fabehrouz.github.io%2Ffiles%2FNL.pdf" target="_blank" title="https://abehrouz.github.io/files/NL.pdf" ref="nofollow noopener noreferrer">abehrouz.github.io/files/NL.pdâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¿™ 5 ä¸ªå†·é—¨çš„ HTML æ ‡ç­¾ï¼Œèƒ½è®©ä½ å°‘å†™ 100 è¡Œ JS]]></title>    <link>https://juejin.cn/post/7576468602304495654</link>    <guid>https://juejin.cn/post/7576468602304495654</guid>    <pubDate>2025-11-25T07:38:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576468602304495654" data-draft-id="7576378563574808591" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¿™ 5 ä¸ªå†·é—¨çš„ HTML æ ‡ç­¾ï¼Œèƒ½è®©ä½ å°‘å†™ 100 è¡Œ JS"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,HTML"/> <meta itemprop="datePublished" content="2025-11-25T07:38:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ErpanOmer"/> <meta itemprop="url" content="https://juejin.cn/user/3878732754331096"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¿™ 5 ä¸ªå†·é—¨çš„ HTML æ ‡ç­¾ï¼Œèƒ½è®©ä½ å°‘å†™ 100 è¡Œ JS
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3878732754331096/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ErpanOmer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T07:38:13.000Z" title="Tue Nov 25 2025 07:38:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9406a89e16ac4345bc2ecc9958596ff6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764661092&amp;x-signature=HKGQlG4tuN2%2BMq1ZIfmDADVmuDU%3D" alt="image.png" loading="lazy"/></p>
<p>å¤§å®¶å¥½!ğŸ˜ã€‚</p>
<p>Code Review çš„æ—¶å€™ï¼Œæˆ‘æœ€æ€•çœ‹åˆ°ä»€ä¹ˆï¼Ÿ</p>
<p>ä¸æ˜¯å¤æ‚çš„ç®—æ³•ï¼Œä¹Ÿä¸æ˜¯ä»€ä¹ˆæ­£åˆ™ã€‚è€Œæ˜¯<strong>æ˜æ˜ä¸€ä¸ª HTML æ ‡ç­¾å°±èƒ½æå®šçš„äº‹ï¼Œæœ‰äººéè¦å†™å‡ ç™¾è¡Œ JS + CSS å»é‡æ–°å‘æ˜è½®å­</strong> ã€‚</p>
<p>å‰å‡ å¤©ï¼Œæˆ‘çœ‹åˆ°ä¸€ä¸ªæ–°åŒå­¦ä¸ºäº†å†™ä¸€ä¸ªæŠ˜å é¢æ¿ï¼ˆAccordionï¼‰ï¼Œå¼•å…¥äº†ä¸€ä¸ªé‡å‹çš„ç¬¬ä¸‰æ–¹åº“ï¼Œè¿˜å†™äº†ä¸€å † <code>useState</code>ã€<code>onClick</code> å’ŒåŠ¨ç”»é€»è¾‘ã€‚</p>
<p>æˆ‘é»˜é»˜åœ°æŠŠä»–çš„ä»£ç å…¨åˆ äº†ï¼Œæ¢æˆäº† 3 è¡Œ <code>&lt;details&gt;</code>ã€‚ä»–çœ‹æˆ‘çš„çœ¼ç¥ï¼Œä»¿ä½›åœ¨çœ‹ä¸€ä¸ªå¤–æ˜ŸäººğŸ¤£ã€‚</p>
<p>åœ¨ 2025 å¹´çš„ä»Šå¤©ï¼Œæµè§ˆå™¨åŸç”Ÿ HTML çš„èƒ½åŠ›æ—©å·²ä»Šéæ˜”æ¯”ã€‚å¾ˆå¤šæˆ‘ä»¬ä¹ æƒ¯ç”¨ JS å»æ¨¡æ‹Ÿçš„äº¤äº’ï¼Œç°åœ¨ä¸ä»…æœ‰åŸç”Ÿæ”¯æŒï¼Œè€Œä¸”<strong>æ€§èƒ½æ›´å¥½ã€å…¼å®¹æ€§æ›´å¼ºã€æ— éšœç¢ï¼ˆa11yï¼‰æ›´å®Œå–„</strong>ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘å°±æ¥ç›˜ç‚¹ 5 ä¸ªè¢«ä¸¥é‡ä½ä¼°çš„HTMLæ ‡ç­¾ğŸ‘‡ã€‚</p>
<hr/>
<h3 data-id="heading-0"><strong><code>&lt;details&gt;</code> &amp; <code>&lt;summary&gt;</code>ï¼šæŠ˜å ç»„ä»¶</strong></h3>
<p>ä½ æ˜¯ä¸æ˜¯è¿˜åœ¨å†™è¿™æ ·çš„ React ä»£ç ï¼Ÿ</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// JS æ¨¡æ‹Ÿç‰ˆ</span>
<span class="hljs-keyword">const</span> [isOpen, setIsOpen] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
<span class="hljs-keyword">return</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"accordion"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"header"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setIsOpen(!isOpen)}&gt;
      ç‚¹å‡»å±•å¼€ {isOpen ? 'â¬†ï¸' : 'â¬‡ï¸'}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    {isOpen &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"content"</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);
</code></pre>
<p>ä¸ºäº†è¿™ä¸ªåŠŸèƒ½ï¼Œä½ è¿˜å¾—å†™ CSS åŠ¨ç”»ï¼Œè¿˜å¾—å¤„ç†é”®ç›˜äº‹ä»¶ï¼ˆTab é”®èƒ½ä¸èƒ½é€‰åˆ°ï¼Ÿå›è½¦èƒ½ä¸èƒ½å±•å¼€ï¼Ÿç­‰ç­‰ï¼‰ã€‚</p>
<p><strong>HTML åŸç”Ÿå†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-tag">&lt;<span class="hljs-name">details</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">summary</span>&gt;</span>ç‚¹å‡»å±•å¼€<span class="hljs-tag">&lt;/<span class="hljs-name">summary</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content"</span>&gt;</span>
    è¿™é‡Œæ˜¯å±•å¼€åçš„å†…å®¹ï¼ŒåŸç”Ÿæ”¯æŒ Ctrl+F é¡µå†…æœç´¢ï¼
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">details</span>&gt;</span>
</code></pre>
<ol>
<li><strong>æ²¡æœ‰ä»»ä½•JS</strong>ï¼šè‡ªå¸¦ç‚¹å‡»å±•å¼€/æ”¶èµ·äº¤äº’ã€‚</li>
<li><strong>æ— éšœç¢ï¼ˆa11yï¼‰æ»¡åˆ†</strong>ï¼šå±å¹•é˜…è¯»å™¨èƒ½å®Œç¾è¯†åˆ«ï¼ŒTab é”®ã€å›è½¦é”®åŸç”Ÿæ”¯æŒã€‚</li>
<li><strong>é¡µå†…æœç´¢</strong>ï¼šè¿™æ˜¯ JS æ¨¡æ‹Ÿç‰ˆæœ€å¤§çš„ç—›ç‚¹ã€‚å¦‚æœå†…å®¹è¢« JS éšè—äº†ï¼ˆ<code>display: none</code>ï¼‰ï¼Œæµè§ˆå™¨çš„ Ctrl+F å¾€å¾€æœä¸åˆ°ã€‚ä½† <code>&lt;details&gt;</code> é‡Œçš„å†…å®¹ï¼Œå³ä½¿æŠ˜å ï¼Œæµè§ˆå™¨ä¹Ÿèƒ½æœåˆ°å¹¶è‡ªåŠ¨å±•å¼€ï¼</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9c863dafadc46c4a208d26d6b5641f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764661092&amp;x-signature=vMtXW6eygD%2FdQTk35yZ4ndeH5vI%3D" alt="Untitled â€‘ Made with FlexClip.gif" loading="lazy"/></p>
<p>é…åˆ CSS ğŸ‘‡</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">details</span> {
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span>;
}

<span class="hljs-selector-tag">summary</span> {
  <span class="hljs-attribute">cursor</span>: pointer;
  <span class="hljs-attribute">font-weight</span>: bold;
}

<span class="hljs-comment">/* åŒ…ä½å†…å®¹ï¼Œè®©å®ƒèƒ½åŠ¨ç”»é«˜åº¦ */</span>
<span class="hljs-selector-tag">details</span> &gt; <span class="hljs-selector-class">.content</span> {
  <span class="hljs-attribute">overflow</span>: hidden;
  <span class="hljs-attribute">max-height</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">transition</span>: max-height .<span class="hljs-number">45s</span> ease, opacity .<span class="hljs-number">3s</span> ease;
}

<span class="hljs-comment">/* details å¤„äº open çŠ¶æ€æ—¶ */</span>
<span class="hljs-selector-tag">details</span><span class="hljs-selector-attr">[open]</span> &gt; <span class="hljs-selector-class">.content</span> {
  <span class="hljs-attribute">max-height</span>: <span class="hljs-number">200px</span>; <span class="hljs-comment">/* ä½ å†…å®¹é«˜åº¦å¤§æ¦‚å¤šå°‘è®¾å¤šå°‘ï¼Œè¶³å¤Ÿå¤§å³å¯ */</span>
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
}
</code></pre>
<p>ä¾ç„¶å¯ä»¥åšåŠ¨ç”»ã€‚</p>
<hr/>
<h3 data-id="heading-1"><strong><code>&lt;dialog&gt;</code>ï¼šå¼¹çª—ç»„ä»¶</strong></h3>
<p>å†™æ¨¡æ€æ¡†ï¼ˆModalï¼‰æ˜¯å‰ç«¯æœ€å¤§çš„å‘ä¹‹ä¸€ã€‚ä½ éœ€è¦è€ƒè™‘ï¼š</p>
<ul>
<li><code>z-index</code> å±‚çº§ä¼šä¸ä¼šè¢«é®æŒ¡ï¼Ÿ</li>
<li>ç‚¹å‡»é®ç½©å±‚å…³é—­ï¼Ÿ</li>
<li><strong>Focus Trapï¼ˆç„¦ç‚¹é”å®šï¼‰</strong> ï¼šæ‰“å¼€å¼¹çª—åï¼ŒTab é”®ä¸èƒ½è·‘åˆ°åº•å±‚é¡µé¢å»ã€‚</li>
<li>æŒ‰ä¸‹ <code>Esc</code> é”®å…³é—­ï¼Ÿ</li>
</ul>
<p>ä¸ºäº†è§£å†³è¿™äº›ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå¼•å…¥ <code>Antd Modal</code> æˆ–è€… <code>React Portal</code>ã€‚ä½†åœ¨è½»é‡çº§åœºæ™¯ä¸‹ï¼ŒåŸç”Ÿ <code>&lt;dialog&gt;</code> æ‰æ˜¯ç¥ğŸ«…ã€‚</p>
<p><strong>HTML åŸç”Ÿï¼š</strong></p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-tag">&lt;<span class="hljs-name">dialog</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"myModal"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"dialog"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªåŸç”Ÿæ¨¡æ€æ¡†<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>å…³é—­ï¼ˆè‡ªåŠ¨ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dialog</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"myModal.showModal()"</span>&gt;</span>æ‰“å¼€å¼¹çª—â<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ae231b2a4af4c8694ff5a0843a5747d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764661092&amp;x-signature=Oi6OWEl7QtlHnfEpPS3hwJBmyrw%3D" alt="Untitled â€‘ Made with FlexClip.gif" loading="lazy"/></p>
<ol>
<li><strong>Top Layerï¼ˆé¡¶å±‚ç‰¹æ€§ï¼‰</strong> ï¼šæµè§ˆå™¨ä¼šæŠŠå®ƒæ¸²æŸ“åœ¨æ‰€æœ‰ DOM çš„æœ€ä¸Šå±‚ï¼Œ<strong>å½»åº•æ— è§†</strong>çˆ¶å…ƒç´ çš„ <code>z-index</code> å’Œ <code>overflow: hidden</code>ã€‚</li>
<li><strong>::backdrop ä¼ªå…ƒç´ </strong>ï¼šç›´æ¥ç”¨ CSS å®šåˆ¶é®ç½©å±‚æ ·å¼ã€‚</li>
</ol>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* èƒŒæ™¯é®ç½© */</span>
dialog<span class="hljs-selector-pseudo">::backdrop</span> {
    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.45</span>);
    backdrop-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">blur</span>(<span class="hljs-number">3px</span>);
    <span class="hljs-attribute">transition</span>: opacity .<span class="hljs-number">3s</span> ease;
}
</code></pre>
<ol start="3">
<li><strong>åŸç”Ÿäº¤äº’</strong>ï¼šè‡ªå¸¦ <code>Esc</code> å…³é—­ï¼Œè‡ªå¸¦ç„¦ç‚¹ç®¡ç†ï¼Œè¡¨å•æäº¤è‡ªåŠ¨å…³é—­ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-2"><strong><code>&lt;datalist&gt;</code>ï¼šæœç´¢è‡ªåŠ¨è¡¥å…¨</strong></h3>
<p>å½“äº§å“ç»ç†è¦æ±‚åšä¸€ä¸ªå¸¦æœç´¢å»ºè®®çš„è¾“å…¥æ¡†æ—¶ï¼Œä½ çš„ç¬¬ä¸€ååº”æ˜¯ä¸æ˜¯ï¼šâ€œå¿«ï¼å¼•å…¥ <code>Select2</code> æˆ–è€… <code>Antd AutoComplete</code>ï¼ğŸ˜–</p>
<p>ä¸”æ…¢ã€‚å¦‚æœåªæ˜¯ç®€å•çš„å»ºè®®åˆ—è¡¨ï¼Œå‡  KB çš„ JS åº“éƒ½æ˜¾å¾—å¤ªé‡äº†ã€‚</p>
<p><strong>HTML åŸç”Ÿç‰ˆï¼š</strong></p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>é€‰æ‹©ä½ å–œæ¬¢çš„æ¡†æ¶ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">list</span>=<span class="hljs-string">"frameworks"</span> /&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">datalist</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"frameworks"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"React"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Vue"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Svelte"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Angular"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Solid"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">datalist</span>&gt;</span>
</code></pre>
<ol>
<li><strong>æ¨¡ç³Šæœç´¢</strong>ï¼šæµè§ˆå™¨åŸç”Ÿæ”¯æŒæ¨¡ç³ŠåŒ¹é…ï¼ˆæ‰“ u ä¼šå‡ºæ¥ Vueï¼‰ã€‚</li>
<li><strong>å“åº”å¼</strong>ï¼šåœ¨æ‰‹æœºä¸Šï¼Œå®ƒä¼šè°ƒç”¨ç³»ç»ŸåŸç”Ÿçš„ä¸‹æ‹‰é€‰æ‹© UIï¼Œä½“éªŒæ¯”ç½‘é¡µæ¨¡æ‹Ÿçš„æ›´é¡ºæ»‘ã€‚</li>
<li><strong>è§£è€¦</strong>ï¼šå®ƒåªæ˜¯ä¸€ä¸ªå»ºè®®åˆ—è¡¨ï¼Œç”¨æˆ·ä¾ç„¶å¯ä»¥è¾“å…¥åˆ—è¡¨é‡Œæ²¡æœ‰çš„å€¼ï¼ˆè¿™ç‚¹å’Œ Select ä¸åŒï¼‰ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-3"><strong><code>&lt;fieldset&gt;</code> &amp; <code>disabled</code>ï¼šä¸€é”®ç¦ç”¨æ•´ä¸ªè¡¨å•</strong></h3>
<p><strong>åœºæ™¯</strong>ï¼šç”¨æˆ·ç‚¹å‡»æäº¤æŒ‰é’®åï¼Œä¸ºäº†é˜²æ­¢é‡å¤æäº¤ï¼Œæˆ‘ä»¬éœ€è¦<strong>ç¦ç”¨è¡¨å•é‡Œçš„æ‰€æœ‰è¾“å…¥æ¡†</strong>ã€‚</p>
<p><strong>JS ç¬¨åŠæ³•ï¼š</strong></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// è¿˜è¦ä¸€ä¸ªä¸ªå»æ‹¿ DOMï¼Œæˆ–è€…ç»´æŠ¤ä¸€ä¸ª loading çŠ¶æ€ä¼ ç»™æ‰€æœ‰ç»„ä»¶</span>
inputs.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">input</span> =&gt;</span> input.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>);
buttons.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">btn</span> =&gt;</span> btn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>);
</code></pre>
<p><strong>HTML åŸç”Ÿå†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">fieldset</span> <span class="hljs-attr">disabled</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"login-group"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">legend</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">legend</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"ç”¨æˆ·å"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"å¯†ç "</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">fieldset</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-comment">// ä¸€è¡Œä»£ç æå®šçŠ¶æ€åˆ‡æ¢</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'login-group'</span>).<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>; 
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d86311c7162b449d9e6b77c5e87b4af3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764661092&amp;x-signature=GIo5a4J0SdBaWGlymX6COE7iqjU%3D" alt="clideo_editor_c3a7f45a392f482ea0added4098a5be3.gif" loading="lazy"/></p>
<p>è¿™æ˜¯ä¸€ä¸ªæå¥½çš„<strong>åˆ†ç»„</strong>æ€ç»´ã€‚é€šè¿‡ç»™ <code>&lt;fieldset&gt;</code> è®¾ç½® <code>disabled</code>ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨ç¦ç”¨å†…éƒ¨æ‰€æœ‰çš„ <code>&lt;input&gt;</code>, <code>&lt;select&gt;</code>, <code>&lt;button&gt;</code>ã€‚ä¸ç”¨å†™å¾ªç¯ï¼Œä¸ç”¨ç»´æŠ¤å¤æ‚çš„ Stateã€‚</p>
<hr/>
<h3 data-id="heading-4"><strong><code>&lt;input type="file" capture&gt;</code>ï¼šH5 è°ƒç”¨æ‰‹æœºç›¸æœº</strong></h3>
<p><strong>åœºæ™¯</strong>ï¼šä¸šåŠ¡éœ€è¦ç”¨æˆ·ä¸Šä¼ ä¸€å¼ ç…§ç‰‡ï¼Œå¯ä»¥æ˜¯ç›¸å†Œé€‰çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯<strong>å½“åœºæ‹çš„</strong>ã€‚</p>
<p>å¾ˆå¤šæ–°æ‰‹çš„ååº”æ˜¯ï¼šæ˜¯ä¸æ˜¯è¦æ¥å¾®ä¿¡ JSSDKï¼Ÿæ˜¯ä¸æ˜¯è¦å†™ä¸ª Bridge è°ƒåŸç”Ÿ App èƒ½åŠ›ï¼Ÿ</p>
<p><strong>ç­”æ¡ˆæ˜¯ä¸éœ€è¦ï¼</strong></p>
<p><strong>HTML åŸç”Ÿï¼š</strong></p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">capture</span>=<span class="hljs-string">"environment"</span> <span class="hljs-attr">accept</span>=<span class="hljs-string">"image/*"</span>&gt;</span>
</code></pre>
<p>åªè¦åŠ ä¸Š capture å±æ€§ï¼Œåœ¨ç§»åŠ¨ç«¯ï¼ˆiOS/Androidï¼‰ç‚¹å‡»ä¸Šä¼ æ—¶ï¼Œç³»ç»Ÿä¼šç›´æ¥æ‹‰èµ·ç›¸æœºï¼Œè€Œä¸æ˜¯è®©ä½ å»é€‰æ–‡ä»¶ã€‚æ‹å®Œç…§åï¼Œä½ æ‹¿åˆ°çš„å°±æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ File å¯¹è±¡ã€‚</p>
<p>ä¸éœ€è¦ä»€ä¹ˆ JS SDKï¼Œå®ç°åŸç”Ÿçº§ä½“éªŒğŸ‘ã€‚</p>
<hr/>
<p>æˆ‘æ€»æ˜¯å¼ºè°ƒ <strong>æœ€å¥½çš„ä»£ç ï¼Œæ˜¯æ²¡æœ‰ä»£ç ï¼</strong></p>
<p>HTML æ ‡å‡†ä¸€ç›´åœ¨è¿›åŒ–ï¼Œå¾ˆå¤šæ›¾ç»éœ€è¦é‡å‹ JS æ‰èƒ½å®ç°çš„åŠŸèƒ½ï¼Œç°åœ¨å·²ç»æˆäº†æµè§ˆå™¨çš„å‡ºå‚è®¾ç½®äº†ã€‚</p>
<p>ä½¿ç”¨è¿™äº›åŸç”Ÿæ ‡ç­¾ï¼Œä¸ä»…èƒ½å‡å°‘æ‰“åŒ…ä½“ç§¯ï¼Œæ›´èƒ½è®©ä½ çš„åº”ç”¨åœ¨<strong>å¯è®¿é—®æ€§</strong>å’Œ<strong>æ€§èƒ½</strong>ä¸Šå¤©ç„¶é¢†å…ˆã€‚</p>
<p>ä¸‹æ¬¡å†æƒ³ <code>npm install</code> ä¸€ä¸ª UI åº“ä¹‹å‰ï¼Œå…ˆæŸ¥æŸ¥ MDNã€‚è¯´ä¸å®šï¼ŒHTML æ—©å°±å¸®ä½ åšå¥½äº†ğŸ¤”ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[UIå°å§å§è¦æ±‚æœ‰â€œDuang~Duangâ€çš„æ•ˆæœæ€ä¹ˆåŠï¼Ÿ]]></title>    <link>https://juejin.cn/post/7576264484688379944</link>    <guid>https://juejin.cn/post/7576264484688379944</guid>    <pubDate>2025-11-25T05:51:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576264484688379944" data-draft-id="7573950036897087528" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="UIå°å§å§è¦æ±‚æœ‰â€œDuang~Duangâ€çš„æ•ˆæœæ€ä¹ˆåŠï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,CSS"/> <meta itemprop="datePublished" content="2025-11-25T05:51:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¹å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/3659622444970574"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            UIå°å§å§è¦æ±‚æœ‰â€œDuang~Duangâ€çš„æ•ˆæœæ€ä¹ˆåŠï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3659622444970574/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¹å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T05:51:59.000Z" title="Tue Nov 25 2025 05:51:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9456ab9014694573909de2733acc5b69~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5Lmd5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764654719&amp;x-signature=w4sPNHGfhJ%2Bv0Xhu3jDr%2BmOaPz0%3D" alt="test.gif" loading="lazy"/></p>
<blockquote>
<p><strong>è®¾è®¡å°å§å§</strong>ï¼š  â€œæä¸€ä¸‹è¿™æ ·çš„<strong>å›å¼¹</strong>æ•ˆæœï¼Œä½ è¡Œä¸è¡Œï¼Ÿâ€<br/>
<strong>æˆ‘</strong>ï¼šâ€œè¡Œï¼ç›´æ¥æ¢­å“ˆ 50 è¡Œ keyframes + transform + å„ç§ç™¾åˆ†æ¯”ï¼Œæå®š â€<br/>
<strong>è®¾è®¡å°å§å§</strong>ï¼šâ€œå¤ªç¡¬ï¼ˆæ’‡å˜´ï¼‰ï¼Œä¸å¤Ÿ Q å¼¹ï¼ˆé„™è§†ï¼‰â€<br/>
<strong>æˆ‘</strong>ï¼š(è£‚å¼€)<br/>
<strong>éš”å£è€ç‹</strong>ï¼šè¿™ä¹ˆç®€å•ä½ éƒ½ä¸è¡Œï¼Œæˆ‘æ¥ä¸€è¡Œè´å¡å°” cubic-bezier(0.3, 1.15, 0.33, 1.57) ç§’äº†ğŸ˜<br/>
<strong>è®¾è®¡å°å§å§</strong>ï¼šå“‡å“¦ï¼ï¼ˆå…´å¥‹ï¼‰å¥½å¸…ï¼ï¼ˆæ˜Ÿæ˜Ÿçœ¼ğŸŒŸï¼‰å¥½Qå¼¹ï¼ï¼ˆä¸€è„¸å´‡æ‹œğŸ˜ï¼‰<br/>
<strong>æˆ‘</strong>ï¼š<strong>â€œï¼Ÿï¼Ÿï¼Ÿâ€</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ğŸ§  ä¸€ã€ä¸ºä»€ä¹ˆä¸€è¡Œè´å¡å°”å°±èƒ½â€œDuangâ€èµ·æ¥ï¼Ÿ</h2>
<h3 data-id="heading-1">1ï¸âƒ£ cubic-bezier æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>åœ¨ CSS åŠ¨ç”»é‡Œï¼Œæˆ‘ä»¬ç»å¸¸å†™ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.5s</span> ease;
</code></pre>
<p>ä½†å…¶å® <code>ease</code>ã€<code>linear</code>ã€<code>ease-in-out</code> è¿™äº›éƒ½åªæ˜¯å°è£…å¥½çš„è´å¡å°”æ›²çº¿ã€‚<br/>
åº•å±‚åŸç†æ˜¯ï¼š</p>
<pre><code class="hljs language-css" lang="css">cubic-bezier(x1, y1, x2, y2)
</code></pre>
<p>è¿™å››ä¸ªå‚æ•°å®šä¹‰äº†<strong>æ—¶é—´å‡½æ•°æ›²çº¿</strong>ï¼Œæ§åˆ¶åŠ¨ç”»é€Ÿåº¦çš„å˜åŒ–ã€‚</p>
<ul>
<li><code>x</code>ï¼šæ—¶é—´è½´ï¼ˆå¿…é¡»åœ¨ 0ï½1 ä¹‹é—´ï¼‰</li>
<li><code>y</code>ï¼šæ•°å€¼è½´ï¼ˆå¯ä»¥è¶…å‡º 0ï½1ï¼ï¼‰</li>
</ul>
<p>ğŸ‘‰ å½“ y è¶…è¿‡ 1 æˆ–å°äº 0 æ—¶ï¼ŒåŠ¨ç”»å€¼å°±ä¼š<strong>å†²è¿‡ç»ˆç‚¹å†å›å¼¹</strong>ï¼Œ<br/>
è¿™å°±æ˜¯â€œå›å¼¹æ„Ÿâ€çš„æ ¸å¿ƒã€‚</p>
<hr/>
<h3 data-id="heading-2">2ï¸âƒ£ å›å¼¹çš„æœ¬è´¨ï¼šè¿‡å†² + è¡°å‡</h3>
<p>æƒ³è±¡ä¸€ä¸ªçƒæ‰ä¸‹æ¥ï¼š</p>
<ul>
<li><strong>è¿‡å†²</strong>ï¼šçƒè½åœ°æ—¶ä¼šå‹æ‰ï¼ˆè¶…å‡ºç»ˆç‚¹ï¼‰</li>
<li><strong>å›å¼¹</strong>ï¼šç„¶ååå¼¹å›æ¥ï¼Œå†é€æ¸ç¨³å®š</li>
</ul>
<p>åœ¨åŠ¨ç”»ä¸­ï¼Œè¿™ä¸ªâ€œè¿‡å†²â€å°±æ˜¯ y&gt;1 çš„éƒ¨åˆ†ï¼Œ<br/>
è€Œâ€œå›å¼¹â€å°±æ˜¯æ›²çº¿å›åˆ° y=1 çš„è¿‡ç¨‹ã€‚</p>
<hr/>
<h2 data-id="heading-3">ğŸ§ª äºŒã€ä¸€è¡Œè´å¡å°”çš„é­”æ³•</h2>
<h3 data-id="heading-4">âœ… ç«ç®­å‘å°„</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d945616e56f74171afda7e6b38b97c8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5Lmd5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764654719&amp;x-signature=lUyE6LGLXrjzlCGpwDn2f6gf%2F8M%3D" alt="export_1764044056566.gif" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bounce"</span>&gt;</span>ğŸš€å‘å°„ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.bounce</span> {
 <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.8s</span> <span class="hljs-built_in">cubic-bezier</span>(<span class="hljs-number">0.68</span>, -<span class="hljs-number">0.55</span>, <span class="hljs-number">0.27</span>, <span class="hljs-number">1.55</span>);
}
<span class="hljs-selector-class">.bounce</span><span class="hljs-selector-pseudo">:hover</span> {
 <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">500px</span>);
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p><span href="https://code.juejin.cn/pen/7576535022065647654" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7576535022065647654" data-src="https://code.juejin.cn/pen/7576535022065647654" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span>
ğŸ’¡ <strong>å‚æ•°è§£æï¼š</strong></p>
<ul>
<li>y1 = -0.55 â†’ å…ˆè½»å¾®åå‘ç¼©å°</li>
<li>y2 = 1.55 â†’ å†å†²è¿‡å¤´ 55%ï¼Œæœ€åå›å¼¹åˆ°åŸä½</li>
</ul>
<h2 data-id="heading-5">ğŸ§© å››ã€å¸¸ç”¨è´å¡å°”å‚æ•°</h2>



































<table><thead><tr><th>æ•ˆæœæè¿°</th><th>è´å¡å°”å‚æ•°</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>å¾®å›å¼¹ï¼ˆæŒ‰é’®ï¼‰</td><td><code>cubic-bezier(0.34, 1.31, 0.7, 1)</code></td><td>è½»æŸ”å¼¹æ€§</td></tr><tr><td>å¼ºå›å¼¹ï¼ˆå¡ç‰‡ï¼‰</td><td><code>cubic-bezier(0.68, -0.55, 0.27, 1.55)</code></td><td>çˆ†å‘åŠ›å¼º</td></tr><tr><td>æŸ”å’Œå‡ºå…¥</td><td><code>cubic-bezier(0.4, 0, 0.2, 1.4)</code></td><td>iOS é£</td></tr><tr><td>å¼¹æ€§æ”¾å¤§</td><td><code>cubic-bezier(0.175, 0.885, 0.32, 1.275)</code></td><td>å¼¹ç°§æ„Ÿ</td></tr><tr><td>ç«ç®­çŒ›å†²</td><td><code>cubic-bezier(0.68, -0.55, 0.27, 1.55)</code></td><td>æ¨èƒŒæ„Ÿ</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-6">ğŸ§° äº”ã€è°ƒè¯•ç¥å™¨æ¨è</h2>
<ul>
<li>
<p>ğŸ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fcubic-bezier.com" target="_blank" title="https://cubic-bezier.com" ref="nofollow noopener noreferrer">cubic-bezier.com</a><br/>
æ‹–åŠ¨æ‰‹æŸ„å®æ—¶é¢„è§ˆåŠ¨ç”»ï¼Œå¤åˆ¶å‚æ•°ä¸€é”®æå®šã€‚</p>
</li>
<li>
<p>âš™ï¸ <a href="https://link.juejin.cn?target=https%3A%2F%2Feasings.net" target="_blank" title="https://easings.net" ref="nofollow noopener noreferrer">easings.net</a><br/>
æ”¶å½•å„ç§ easing å‡½æ•°ï¼ˆå«ç‰©ç†å¼¹ç°§ã€é˜»å°¼ç­‰ï¼‰ã€‚</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¯” MySQL è½»ï¼Œæ¯” SQLite å¼ºï¼šç»ˆäºæœ‰äººæŠŠ AI æ•°æ®åº“åšå¯¹äº†]]></title>    <link>https://juejin.cn/post/7576197876716748838</link>    <guid>https://juejin.cn/post/7576197876716748838</guid>    <pubDate>2025-11-25T00:19:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576197876716748838" data-draft-id="7576105442214330418" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¯” MySQL è½»ï¼Œæ¯” SQLite å¼ºï¼šç»ˆäºæœ‰äººæŠŠ AI æ•°æ®åº“åšå¯¹äº†"/> <meta itemprop="keywords" content="GitHub,å¼€æº,æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-11-25T00:19:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="HelloGitHub"/> <meta itemprop="url" content="https://juejin.cn/user/1574156384091320"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¯” MySQL è½»ï¼Œæ¯” SQLite å¼ºï¼šç»ˆäºæœ‰äººæŠŠ AI æ•°æ®åº“åšå¯¹äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1574156384091320/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    HelloGitHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T00:19:55.000Z" title="Tue Nov 25 2025 00:19:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19f57e8e53b549d2a5fa1eafd945fccb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764634795&amp;x-signature=D9%2FsddVGJGhrzo7o7qk7aloo6P8%3D" alt="" loading="lazy"/></p>
<p>å‰å‡ å¤©ï¼Œæˆ‘çœ‹åˆ°äº†ä¸€ä¸ªæ¥è‡ª Turso åˆ›å§‹äºº Pekka çš„è§‚ç‚¹ï¼š</p>
<blockquote>
<p>SQLite è¢«è®¤ä¸ºæ˜¯ AI agent çš„ç†æƒ³æ•°æ®åº“ï¼Œå› ä¸ºå®ƒè½»é‡çº§ä¸”é€‚ç”¨äº AI agent çš„å„ç§åœºæ™¯ï¼Œä½†ä»ç„¶éœ€è¦è¿›åŒ–ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35d656b3e981498f9ebdcbcd8a127606~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764634795&amp;x-signature=S2tn8ybJo6m058%2BxmEtikklnojk%3D" alt="" loading="lazy"/></p>
<p>è¯„è®ºåŒºé‡Œä¹Ÿæœ‰æ„æ€ï¼Œæœ‰äººä¼šå’Œå¤§å®¶åˆ†äº«è‡ªå·±ä¸ºäº† SQLite çš„è¿›åŒ–åšäº†å“ªäº›äº‹æƒ…ï¼ˆæ¯”å¦‚å¼€æºäº† Super SQLite ä¹‹ç±»çš„é¡¹ç›®ï¼‰ï¼Œä¹Ÿæœ‰äººä¼šæ¨èæœ‰å“ªäº› SQLite çš„è¿›åŒ–ç‰ˆäº§å“ï¼Œå¹¶å’Œå¤§å®¶è®¨è®ºè¿™äº›äº§å“çš„ä¼˜åŠ£ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eaea769ca6d24bcc919823f5214e32d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764634795&amp;x-signature=sCQbdeIC9PdWvm9pnQELxr03n3A%3D" alt="" loading="lazy"/></p>
<p>å®é™…ä¸Šï¼ŒAI åº”ç”¨å¼€å‘è€…å¯¹è½»é‡çº§æ•°æ®åº“çš„è¯‰æ±‚ï¼Œè¿œè¿œä¸æ­¢ AI Agent è¿™ä¸€ä¸ªåœºæ™¯ã€‚é‚£äº›åœ¨ Web æ—¶ä»£å’Œç§»åŠ¨äº’è”ç½‘æ—¶ä»£æ”¯æ’‘äº†ä¸‡äº¿çº§åº”ç”¨çš„ä¼ ç»Ÿæ•°æ®åº“ï¼Œå¦‚ä»Šåœ¨é¢å¯¹ AI åº”ç”¨çš„æ•æ·ã€è½»é‡ã€é«˜é¢‘è¿­ä»£çš„éœ€æ±‚æ—¶ï¼Œéƒ½çº·çº·å¼€å§‹æš´éœ²å‡ºå®ƒä»¬çš„æ°´åœŸä¸æœã€‚</p>
<p>é™¤äº†ä¼ ç»Ÿæ•°æ®åº“å‡ ä¸ªæœ€æ˜æ˜¾çš„é—®é¢˜ â€”â€” <strong>éƒ¨ç½²å¤æ‚åº¦é«˜ã€èµ„æºå ç”¨å¤šã€è¿‡åº¦è®¾è®¡å½±å“æ‰§è¡Œæ•ˆç‡</strong> ä»¥å¤–ï¼Œå¾ˆå¤š AI åº”ç”¨éƒ½ä¼šæŠŠæ•°æ®å’Œæ¨¡å‹ç´§å¯†ç»“åˆï¼Œåœ¨è®¾å¤‡ç«¯ï¼ˆå¦‚æ‰‹æœºã€ç‰©è”ç½‘è®¾å¤‡ï¼‰å®ç°æœ¬åœ°åŒ–è¿è¡Œï¼Œä¼ ç»Ÿæ•°æ®åº“é€šè¿‡å®¢æˆ·ç«¯è¿œç¨‹è¿æ¥æœåŠ¡å™¨çš„æ¨¡å¼ï¼Œä¹Ÿæ— æ³•æ»¡è¶³è¿™ç§åµŒå…¥å¼ï¼Œç”šè‡³ç¦»çº¿åµŒå…¥å¼çš„éœ€æ±‚ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91fb112cc10549f0aa304a3ad341d3da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764634795&amp;x-signature=sq6yHywgjveQ9Uv0FuuFYSUMX4Y%3D" alt="" loading="lazy"/></p>
<p>ä¸ºäº†è®© AI å¼€å‘è€…ä¸æµªè´¹å¤ªå¤šæ—¶é—´åœ¨ä¸æ•°æ®åŸºç¡€è®¾æ–½çš„ææ–—ä¸Šï¼Œè€Œæ˜¯èƒ½å¤Ÿä¸“æ³¨äº AI ç®—æ³•ä¸åº”ç”¨é€»è¾‘æœ¬èº«ã€‚æˆ‘ä»¬éœ€è¦ä¸€ç§æ–°å‹æ•°æ®åº“ï¼Œèƒ½å¤Ÿå°†è‡ªå·±ä»è¿™ç§æ— è°“çš„æ¶ˆè€—ä¸­è§£æ”¾å‡ºæ¥ã€‚</p>
<h2 data-id="heading-0">0x01. seekdb çš„æ¥é¾™å»è„‰</h2>
<p>OceanBase åˆšå¼€å§‹åªæ˜¯è´Ÿè´£æ·˜å®å’Œæ”¯ä»˜å®çš„å„ç§äº¤æ˜“æ”¯ä»˜ç›¸å…³ä¸šåŠ¡ï¼Œç„¶åæ˜¯å„ç§é“¶è¡Œå’Œé‡‘èæœºæ„ï¼Œæ¥ä¸‹æ¥æ˜¯ä»æ³›äº’è”ç½‘è¡Œä¸šæ‰©å±•åˆ°å„è¡Œå„ä¸šï¼Œè¯¦è§ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FFng44Ft1gNKKP2mYK1vsew" target="_blank" title="https://mp.weixin.qq.com/s/Fng44Ft1gNKKP2mYK1vsew" ref="nofollow noopener noreferrer">ã€Šå¼€æº 4 å¹´ã€æ‰“ç£¨ 15 å¹´ã€300 ä¸‡è¡Œä»£ç çš„å¼€æºé¡¹ç›®ã€‹</a>ã€‚</p>
<p>ä½†åœ¨ AI æ—¶ä»£ï¼Œå¯¹äºå¼€å‘è€…ï¼Œç±»ä¼¼äº SQLite è¿™ç§è½»é‡çº§æ•°æ®åº“çš„èƒ½åŠ›éå¸¸æœ‰é™ï¼ˆå‘é‡èƒ½åŠ›å’Œä¼ ç»Ÿ SQL èƒ½åŠ›éš¾ä»¥å…¼å¾—ï¼‰ï¼Œè€Œä¼ ç»Ÿæ•°æ®åº“åˆæœ‰éƒ¨ç½²å¤æ‚åº¦é«˜ã€èµ„æºå ç”¨å¤šç­‰é—®é¢˜ã€‚è¿™ä¸¤ç±»æ•°æ®åº“å¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œéƒ½ä¸å¤Ÿå‹å¥½ã€‚</p>
<p>å› æ­¤ï¼ŒOceanBase ä¸“é—¨ä¸º AI æ—¶ä»£çš„å¼€å‘è€…ï¼Œæ‰“é€ äº†ä¸€ä¸ªå¼€æºå…è´¹ã€è½»é‡æ˜“ç”¨ã€æ‹¥æœ‰å¼ºå¤§ AI æœç´¢èƒ½åŠ›çš„æ•°æ®åº“ â€”â€” <strong>seekdb</strong>ã€‚ä¸ªäººç¬”è®°æœ¬å®‰è£…æ— å‹åŠ›ï¼Œè®©å¤§å®¶åªè¦æœ‰æœºå™¨ï¼Œå°±èƒ½è·‘ OBï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb24ebddac6f46579eebf998f5984dde~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764634795&amp;x-signature=%2BRrmzUB7F0L9ADAK7XdQth5P4%2Fw%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>GitHub åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Foceanbase%2Fseekdb" target="_blank" title="https://github.com/oceanbase/seekdb" ref="nofollow noopener noreferrer">github.com/oceanbase/sâ€¦</a></p>
</blockquote>
<h2 data-id="heading-1">0x10. seekdb ç®€ä»‹</h2>
<p><strong>seekdb</strong> æ˜¯ OceanBase ä¸“é—¨ä¸ºå¼€å‘è€…æ‰“é€ çš„ä¸€æ¬¾å¼€ç®±å³ç”¨ã€è½»é‡çº§çš„æ•°æ®åº“äº§å“ï¼Œä¸“æ³¨äºä¸º AI åº”ç”¨æä¾›é«˜æ•ˆçš„æ··åˆæœç´¢èƒ½åŠ›ï¼Œæ”¯æŒå‘é‡ã€å…¨æ–‡åŠå¤šæ¨¡æ•°æ®çš„ç»Ÿä¸€å­˜å‚¨ä¸æ£€ç´¢ï¼Œæ˜¯æ„å»º AI åº”ç”¨çš„æ–°é€‰æ‹©ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5db2ad4595541008f207eb1a6bade25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764634795&amp;x-signature=nlpGMKvs34NjEGJ6JmgfdhJ0srI%3D" alt="" loading="lazy"/></p>
<p>seekdb åœ¨ç»§æ‰¿äº†æ·˜å®å’Œæ”¯ä»˜å®èƒŒåçš„ OceanBase æ•°æ®åº“æ ¸å¿ƒå¼•æ“é«˜æ€§èƒ½ä¼˜åŠ¿ä¸ MySQL å…¨é¢å…¼å®¹ç‰¹æ€§çš„åŸºç¡€ä¸Šï¼Œé€šè¿‡æ·±åº¦ä¼˜åŒ–æ•°æ®æœç´¢æ¶æ„ï¼Œä¸ºå¼€å‘è€…æä¾›äº†æ›´ç¬¦åˆ AI åº”ç”¨æ•°æ®å¤„ç†éœ€æ±‚çš„å„é¡¹èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-2">äº§å“èƒ½åŠ›çŸ©é˜µå¯¹æ¯”</h3>






























































































































<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="center">seekdb</th><th align="center">OceanBase</th><th align="center">Chroma</th><th align="center">Milvus</th><th align="center">MySQL 9.0</th><th align="center">PostgreSQL + pgvector</th><th align="center">DuckDB</th><th align="center">Elasticsearch</th></tr></thead><tbody><tr><td align="left"><strong>åµŒå…¥å¼æ•°æ®åº“</strong></td><td align="center">âœ…</td><td align="center">âŒ</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âŒ</td><td align="center">âŒ</td><td align="center">âœ…</td><td align="center">âŒ</td></tr><tr><td align="left"><strong>å•æœºæ•°æ®åº“</strong></td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…</td></tr><tr><td align="left"><strong>åˆ†å¸ƒå¼æ•°æ®åº“</strong></td><td align="center">âŒ</td><td align="center">âœ…</td><td align="center">âŒ</td><td align="center">âœ…</td><td align="center">âŒ</td><td align="center">âŒ</td><td align="center">âŒ</td><td align="center">âœ…</td></tr><tr><td align="left"><strong>MySQL å…¼å®¹</strong></td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âŒ</td><td align="center">âŒ</td><td align="center">âœ…</td><td align="center">âŒ</td><td align="center">âœ…</td><td align="center">âŒ</td></tr><tr><td align="left"><strong>å‘é‡æœç´¢</strong></td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âŒ</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…</td></tr><tr><td align="left"><strong>å…¨æ–‡æ£€ç´¢</strong></td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âš ï¸</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…</td></tr><tr><td align="left"><strong>æ··åˆæœç´¢</strong></td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âŒ</td><td align="center">âš ï¸</td><td align="center">âŒ</td><td align="center">âœ…</td></tr><tr><td align="left"><strong>OLTP</strong></td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âŒ</td><td align="center">âŒ</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âŒ</td><td align="center">âŒ</td></tr><tr><td align="left"><strong>OLAP</strong></td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âŒ</td><td align="center">âŒ</td><td align="center">âŒ</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âš ï¸</td></tr><tr><td align="left"><strong>å¼€æºåè®®</strong></td><td align="center">Apache 2.0</td><td align="center">MulanPubL 2.0</td><td align="center">Apache 2.0</td><td align="center">Apache 2.0</td><td align="center">GPL 2.0</td><td align="center">PostgreSQL License</td><td align="center">MIT</td><td align="center">AGPLv3+ SSPLv1+ Elastic 2.0</td></tr></tbody></table>
<blockquote>
<p>MySQL 8.0 ç§»é™¤äº†åµŒå…¥å¼èƒ½åŠ›</p>
</blockquote>
<h3 data-id="heading-3">seekdb çš„é€‚ç”¨åœºæ™¯</h3>
<ul>
<li><strong>RAG åº”ç”¨</strong>ï¼šé¢å‘ä»¥æ™ºèƒ½èŠå¤©æœºå™¨äººã€çŸ¥è¯†åº“ã€é¢†åŸŸä¸“å®¶ç³»ç»Ÿä¸ºä»£è¡¨çš„ RAG åœºæ™¯ï¼Œseekdb æ”¯æŒäº†å®Œæ•´çš„ RAG Pipeline è§£å†³æ–¹æ¡ˆã€‚å†…ç½®æ–‡æ¡£è§£æå¤„ç†åŠŸèƒ½ï¼Œé›†æˆå‘é‡åµŒå…¥ï¼ˆEmbeddingï¼‰ã€é‡æ’åºï¼ˆRerankï¼‰åŠå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ï¼Œæ”¯æŒå‘é‡/å…¨æ–‡/æ ‡é‡æ··åˆæœç´¢ï¼Œåœ¨ä¸€ä¸ªæ•°æ®åº“å®ä¾‹å†…å®ç° <strong>Doc In Data Out</strong>ã€‚</li>
<li><strong>AI è¾…åŠ©ç¼–ç¨‹</strong>ï¼šé¢å‘ AI è¾…åŠ©ç¼–ç¨‹åœºæ™¯ï¼Œseekdb æ”¯æŒå¯¹ä»£ç ä»“åº“æ„å»ºå‘é‡å’Œå…¨æ–‡ç´¢å¼•ï¼ŒåŸºäºä»£ç å…³é”®è¯æˆ–ä»£ç è¯­ä¹‰ï¼Œè¿›è¡Œé«˜æ•ˆçš„ä»£ç æœç´¢å’Œç”Ÿæˆè¡¥å…¨ã€‚</li>
<li><strong>AI Agent å¹³å°ç±»åº”ç”¨</strong>ï¼šé¢å‘ AI Agent å¼€å‘åœºæ™¯ï¼Œseekdb æä¾›äº†å¿«é€Ÿå¯åŠ¨å’ŒåµŒå…¥å¼éƒ¨ç½²èƒ½åŠ›ï¼Œæ”¯æŒè¢«å¿«é€Ÿæ‹‰èµ·æä¾›æœåŠ¡ã€‚æä¾›é«˜é¢‘å¢åˆ æ”¹å’Œå®æ—¶æŸ¥è¯¢èƒ½åŠ›ï¼Œé¿å…æ•°æ®åº“æ€§èƒ½ç“¶é¢ˆå¼•èµ· AI å¼€å‘æ•ˆç‡é™ä½çš„é—®é¢˜ã€‚æä¾›å‘é‡æœç´¢ã€å…¨æ–‡æœç´¢åŠæ··åˆæœç´¢ç‰¹æ€§å’Œçµæ´»çš„å…ƒæ•°æ®ç®¡ç†èƒ½åŠ›ï¼Œç»“åˆä¼šè¯ç®¡ç†ä¸è®°å¿†å­˜å‚¨èƒ½åŠ›ï¼Œæ— éœ€å†å¼•å…¥å…¶ä»–åº“å°±å¯å¿«é€Ÿæ„å»º AI Agentã€‚æä¾› MCP Server ç»„ä»¶ï¼Œæ— ç¼æ¥å…¥ AI ç”Ÿæ€ã€‚</li>
<li><strong>è¯­ä¹‰æœç´¢å¼•æ“</strong>ï¼šé¢å‘ä»¥ç”µå•†å•†å“æœç´¢å’Œæ¨èã€å¤šåª’ä½“å†…å®¹æ£€ç´¢ã€å›¾ç‰‡æœç´¢ç­‰è¯­ä¹‰æœç´¢åœºæ™¯ï¼Œseekdb æ”¯æŒå¯¹æ¥ä¸»æµå‘é‡åµŒå…¥æ¨¡å‹å¹¶æä¾›äº†å‘é‡æœç´¢èƒ½åŠ›ã€‚åŒæ—¶æä¾›äº† Hybrid Index åŠŸèƒ½ï¼Œæ”¯æŒåŸºäºæ–‡æœ¬æŸ¥è¯¢æ¡ä»¶è¿›è¡Œè¯­ä¹‰æœç´¢ï¼Œå¯¹ç”¨æˆ·å±è”½å‘é‡åµŒå…¥å’ŒæŸ¥è¯¢ç»“æœ Rerank çš„å¤æ‚æµç¨‹ã€‚</li>
<li><strong>MySQL åº”ç”¨ç°ä»£åŒ–å’Œ AI åŒ–å‡çº§</strong>ï¼šseekdb ç»§æ‰¿äº† OceanBase å•æœºå­˜å‚¨å¼•æ“ã€æ‰§è¡Œå¼•æ“ã€äº‹åŠ¡å¼•æ“ã€é«˜çº§æŸ¥è¯¢ä¼˜åŒ–å™¨çš„å®Œæ•´èƒ½åŠ›ï¼Œé«˜åº¦å…¼å®¹ MySQLï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šæ‰©å±• AI èƒ½åŠ›ã€‚å°è§„æ ¼å¯ç”¨äºç‰©è”ç½‘è¾¹ç¼˜è®¾å¤‡æ•°æ®é‡‡é›†ã€å°å‹åº”ç”¨å¼€å‘å’Œå®éªŒæ•™å­¦ç­‰åœºæ™¯ï¼Œä¸­å¤§è§„æ ¼å¯ç”¨äºå„è¡Œä¸š OLTPã€HTAP æˆ– AI ä¸šåŠ¡åœºæ™¯ã€‚</li>
</ul>
<h3 data-id="heading-4">seekdb çš„äº§å“æ¶æ„</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c0aecd44d5646d8aee38fa0fc4eae7d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764634795&amp;x-signature=x3GUudtrz0ITBIxXTkA0BEfA0rM%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>éƒ¨ç½²æ¨¡å¼</strong>ï¼šæ”¯æŒ Client/Server å’ŒåµŒå…¥å¼ä¸¤ç§éƒ¨ç½²æ¨¡å¼ã€‚åµŒå…¥å¼æ¨¡å¼ä¸‹å¯å°† seekdb ç›´æ¥é›†æˆè¿› Python åº”ç”¨ï¼Œä¾¿äºè¿›è¡Œä¸ªäººå¼€å‘ã€‚</li>
<li><strong>å…·æœ‰ ACID äº‹åŠ¡è¯­ä¹‰çš„å­˜å‚¨å±‚</strong>ï¼šåŸºäº LSM-Tree æ¶æ„çš„è¡Œå­˜åˆ—å­˜ä¸€ä½“åŒ–å­˜å‚¨å¼•æ“ï¼Œè‡ªç ”é«˜æ•ˆçš„ç¼–ç å‹ç¼©æœºåˆ¶é™ä½å­˜å‚¨æˆæœ¬ã€‚æ”¯æŒæ•°æ®é«˜é¢‘å®æ—¶å†™å…¥ï¼Œå’Œé¢å‘ä¸åŒè´Ÿè½½çš„é«˜æ€§èƒ½æŸ¥è¯¢ã€‚</li>
<li><strong>å¤šæ¨¡æ•°æ®ä¸ç´¢å¼•å±‚</strong>ï¼šæ”¯æŒåŸºç¡€ç±»å‹ï¼Œå‘é‡ã€å¤§æ–‡æœ¬ã€JSON ã€GISã€Array ç­‰å¤šæ¨¡æ•°æ®ç±»å‹ï¼Œå¹¶æä¾›é«˜æ•ˆçš„ç´¢å¼•æ”¯æŒã€‚åŒ…æ‹¬ HNSW / IVF å‘é‡ç´¢å¼•åŠç´¢å¼•é‡åŒ–ç®—æ³•ï¼Œè¦†ç›–å¤šç§åˆ†è¯å™¨å’ŒæŸ¥è¯¢æ¨¡å¼çš„åŸºäº BM25 ç›¸å…³æ€§è®¡ç®—ç®—æ³•çš„å…¨æ–‡ç´¢å¼•ï¼Œé€‚ç”¨äºè¯­ä¹‰æœç´¢çš„æ··åˆç´¢å¼•ï¼ŒåŠ JSON å¤šå€¼ç´¢å¼•ã€ä¸»é”®å’ŒäºŒçº§ç´¢å¼•ã€GIS ç´¢å¼•ç­‰ã€‚</li>
<li><strong>æ”¯æŒæ··åˆè´Ÿè½½çš„å¤šæ¨¡è®¡ç®—å±‚</strong>ï¼šæ”¯æŒå‘é‡ã€å…¨æ–‡ã€æ ‡é‡ç­‰æ¡ä»¶çš„æ··åˆæœç´¢ã€‚æä¾› AI Function èƒ½åŠ›ï¼Œå®ç°åº“å†…å®æ—¶æ¨ç†ã€‚æ”¯æŒå®Œæ•´çš„ ACID äº‹åŠ¡ç‰¹æ€§åŠåŸºäº MVCC çš„å¤šç‰ˆæœ¬å¹¶å‘è®¿é—®èƒ½åŠ›ï¼Œæä¾›é«˜çº§æŸ¥è¯¢ä¼˜åŒ–å™¨å’Œå…·å¤‡å‘é‡åŒ–æ‰§è¡Œèƒ½åŠ›çš„é«˜æ•ˆæ‰§è¡Œå¼•æ“ã€‚</li>
<li><strong>ç»Ÿä¸€åº”ç”¨æ¥å£</strong>ï¼šå…¼å®¹ MySQL åŸç”Ÿé©±åŠ¨ï¼Œæä¾›åŸºäº SQL çš„æ”¯æŒå¤šæ¨¡æ•°æ®çš„ç»Ÿä¸€æŸ¥è¯¢è¯­è¨€ã€‚å¹¶åœ¨æ­¤åŸºç¡€ä¸Šæä¾›äº†é¢å‘å¼€å‘è€…æ›´åŠ å‹å¥½çš„å‘é‡åº“/æ··æœ SDKã€‚é€‚é… LangChainã€LlamaIndexã€Dify ç­‰ AI åº”ç”¨å¼€å‘æ¡†æ¶ã€‚æä¾› MCP Serverï¼Œæ— ç¼æ¥å…¥ AI ç”Ÿæ€ã€‚</li>
</ul>
<h3 data-id="heading-5">seekdb çš„æ ¸å¿ƒç‰¹æ€§</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6fd01ba9f0714c84b779540f26a20538~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764634795&amp;x-signature=LVVDo6VRxeKlIZnBSz%2BRBsVOzIk%3D" alt="" loading="lazy"/></p>
<ol>
<li><strong>å¼€ç®±å³ç”¨ï¼Œæé€Ÿå¼€å‘ï¼Œæ˜“å­¦æ˜“ç”¨</strong>ï¼šå•ç‚¹æ¶æ„è®¾è®¡ï¼Œæ— å…¶ä»–ç»„ä»¶ä¾èµ–ã€‚æ”¯æŒ yumã€dockerã€windows/macos æ¡Œé¢ç‰ˆéƒ¨ç½²ä»¥åŠåŸç”Ÿ Python åµŒå…¥å¼é›†æˆã€‚</li>
<li><strong>æ”¯æŒ 1C2G å°è§„æ ¼ï¼Œå‚ç›´å¼¹æ€§æ‰©ç¼©å®¹</strong>ï¼šæœåŠ¡ç«¯ 1 æ ¸ CPU + 2GB å†…å­˜å³å¯è·‘ VectorDBBench Performance1536D50Kã€‚</li>
<li><strong>é«˜æ€§èƒ½å‘é‡ç´¢å¼•ã€å…¨æ–‡ç´¢å¼•ï¼Œæ”¯æŒå‘é‡ã€å…¨æ–‡ã€æ ‡é‡æ··åˆæœç´¢</strong>
<ul>
<li><strong>å‘é‡æœç´¢</strong>ï¼šæ”¯æŒé«˜è¾¾ 16,000 ç»´å‘é‡å­˜å‚¨ï¼Œå…¼å®¹ L2ã€å†…ç§¯ã€ä½™å¼¦ç›¸ä¼¼åº¦ã€‚</li>
<li><strong>å…¨æ–‡æœç´¢</strong>ï¼šåŸºäº BM25 ç®—æ³•ï¼Œæä¾› Spaceã€Bengã€Ngramã€IKã€Jieba ç­‰å¤šç§åˆ†è¯å™¨ã€‚</li>
<li><strong>æ··åˆæœç´¢</strong>ï¼šä¸€æ¡ SQL å®Œæˆå¤šè·¯æŸ¥è¯¢ä¸é‡æ’åºã€‚</li>
</ul>
</li>
<li><strong>æ··æœåœºæ™¯å‡çº§ï¼ŒåŸºäº Hybrid Index æŒ‡å®šæ–‡æœ¬ä¹Ÿå¯è¿›è¡Œè¯­ä¹‰æœç´¢</strong>ï¼šåªéœ€å†™å…¥æ–‡æœ¬æ•°æ®ï¼Œç³»ç»Ÿè‡ªåŠ¨è¿›è¡Œ Embedding å¹¶ç”Ÿæˆå‘é‡ç´¢å¼•ï¼ŒæŸ¥è¯¢æ—¶ä»…éœ€æŒ‡å®šæ–‡æœ¬æœç´¢æ¡ä»¶ã€‚</li>
<li><strong>æ— ç¼å¯¹æ¥å„ç±»æ¨¡å‹ï¼Œå†…ç½® AI Function å®ç°åº“å†…å®æ—¶æ¨ç†</strong>ï¼šé€šè¿‡ <code>DBMS_AI_SERVICE</code> ç³»ç»ŸåŒ…å®ç°æ¨¡å‹æ³¨å†Œå’Œç®¡ç†ã€‚å†…ç½® <code>AI_COMPLETE</code>ã€<code>AI_PROMPT</code>ã€<code>AI_EMBED</code>ã€<code>AI_RERANK</code> ç­‰å‡½æ•°ã€‚</li>
<li><strong>åŸºäº JSON çš„åŠ¨æ€ Schema</strong>ï¼šæ”¯æŒ JSON æ•°æ®ç±»å‹åŠåŠ¨æ€ Schemaï¼Œæä¾› JSON å‡½æ•°ç´¢å¼•ã€å¤šå€¼ç´¢å¼•ã€‚</li>
<li><strong>æ•°æ®å®æ—¶å†™å…¥ï¼Œå®æ—¶å¯æŸ¥</strong>ï¼šåŸºäº LSM-Treeï¼Œæ•°æ®å…¥åº“æˆåŠŸç«‹å³å¯æŸ¥ï¼ŒåŒæ­¥æ„å»ºå„ç±»ç´¢å¼•ã€‚</li>
<li><strong>å…¼å®¹ MySQL ä¸æ­¢äº MySQLï¼Œæ”¯æ’‘ HTAP æ··åˆè´Ÿè½½</strong>ï¼šæ·±åº¦å…¼å®¹ MySQL è¯­æ³•åè®®ï¼Œä¸€ä¸ªå®ä¾‹åŒæ—¶æ”¯æŒè”æœºäº¤æ˜“å’Œå®æ—¶åˆ†æã€‚</li>
</ol>
<h2 data-id="heading-6">0x11. å¿«é€Ÿéƒ¨ç½² seekdb ä½“éªŒç¯å¢ƒ</h2>
<blockquote>
<p>æœåŠ¡å™¨é…ç½®è¦æ±‚è¯¦è§å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.oceanbase.ai%2Fdocs%2Fzh-CN%2Fdeploy-seekdb-testing-environment" target="_blank" title="https://www.oceanbase.ai/docs/zh-CN/deploy-seekdb-testing-environment" ref="nofollow noopener noreferrer">deploy-seekdb-testing-environment</a></p>
</blockquote>
<h3 data-id="heading-7">1. ä½¿ç”¨ yum install å¿«é€Ÿéƒ¨ç½²</h3>
<p><strong>æ·»åŠ  seekdb é•œåƒæºï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">sudo yum-config-manager --add-repo https://mirrors.aliyun.com/oceanbase/OceanBase.repo
</code></pre>
<p><strong>å®‰è£… seekdb å’Œ obclient å®¢æˆ·ç«¯ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">sudo yum install seekdb obclient
</code></pre>
<p>å¦‚æœåœ¨å¯åŠ¨å‰éœ€è¦æ›´æ”¹é…ç½®ï¼Œå¯ä»¥ç›´æ¥ä¿®æ”¹ <code>/etc/oceanbase/seekdb.cnf</code>ï¼Œé…ç½®é¡¹å¾ˆå°‘å¯æŒ‰éœ€ä¿®æ”¹ã€‚</p>
<p><strong>å»ºè®® <code>cpu_count</code> å’Œ <code>memory_limit</code> æœ€å¥½å¤§äº 1C2Gï¼Œäº²æµ‹ 1C1G ä¹Ÿ No Problemã€‚</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ç¤ºä¾‹é…ç½®</span>
<span class="hljs-attr">port</span>=<span class="hljs-number">1234</span>
<span class="hljs-attr">base-dir</span>=/var/lib/oceanbase
<span class="hljs-attr">data-dir</span>=/var/lib/oceanbase/store
<span class="hljs-attr">redo-dir</span>=/var/lib/oceanbase/store/redo
<span class="hljs-attr">datafile_size</span>=<span class="hljs-number">2</span>G
<span class="hljs-attr">datafile_next</span>=<span class="hljs-number">2</span>G
<span class="hljs-attr">datafile_maxsize</span>=<span class="hljs-number">50</span>G
<span class="hljs-attr">cpu_count</span>=<span class="hljs-number">4</span>
<span class="hljs-attr">memory_limit</span>=<span class="hljs-number">2</span>G
<span class="hljs-attr">log_disk_size</span>=<span class="hljs-number">2</span>G
</code></pre>
<p><strong>å¯åŠ¨ä¸ç®¡ç† seekdbï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨ seekdb</span>
sudo systemctl start seekdb

<span class="hljs-comment"># æŸ¥çœ‹å¯åŠ¨çŠ¶æ€ (æ˜¾ç¤º Service is ready å³æˆåŠŸ)</span>
sudo systemctl status seekdb

<span class="hljs-comment"># è¿æ¥ seekdb</span>
obclient -h127.0.0.1 -uroot -P1234 -A oceanbase

<span class="hljs-comment"># åœæ­¢æœåŠ¡</span>
sudo systemctl stop seekdb

<span class="hljs-comment"># å¼€æœºå¯åŠ¨</span>
sudo systemctl <span class="hljs-built_in">enable</span> seekdb
</code></pre>
<h3 data-id="heading-8">2. åµŒå…¥å¼å®‰è£…</h3>
<p>seekdb æä¾›äº†åµŒå…¥å¼éƒ¨ç½²æ–¹å¼ï¼Œå¯ä»¥ä½œä¸ºä¸€ä¸ªâ€œåº“â€è¿è¡Œåœ¨ä½ çš„åº”ç”¨ç¨‹åºå†…éƒ¨ã€‚</p>
<p><strong>Python ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> seekdb

<span class="hljs-comment"># Open a database</span>
seekdb.<span class="hljs-built_in">open</span>()

<span class="hljs-comment"># Connect to a database</span>
conn = seekdb.connect()

<span class="hljs-comment"># Use the connection</span>
cursor = conn.cursor()
cursor.execute(<span class="hljs-string">"select version();"</span>)
results = cursor.fetchall()
<span class="hljs-built_in">print</span>(results)

<span class="hljs-comment"># Close the connection</span>
conn.close()
</code></pre>
<p><strong>è¿è¡Œç»“æœ</strong></p>
<pre><code class="hljs language-bash" lang="bash">$ python3 sample.py
[(<span class="hljs-string">'1.2.34-OceanBase NewProduct-v5.6.7.8'</span>,)]
</code></pre>
<h3 data-id="heading-9">3. å…¶ä»–éƒ¨ç½²æ–¹å¼</h3>
<p>é™¤æ­¤ä¹‹å¤–ï¼ŒOB å®˜æ–¹è¿˜æä¾›äº† seekdb çš„ Docker é•œåƒå’Œæ¡Œé¢ç‰ˆç®¡ç†å·¥å…·ï¼Œç¯‡å¹…æœ‰é™è¿™é‡Œå°±ä¸å±•å¼€ä»‹ç»äº†ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥ç§»æ­¥æ–‡æ¡£æŸ¥çœ‹ï¼ˆoceanbase.ai/docsï¼‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d85b5dd0eb994f4c809fa11de6b8d15d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764634795&amp;x-signature=n4lTC1Ft929%2BUSddEHzXLziw%2FMc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-10">0xFF. å†™åœ¨æœ€å</h2>
<p>å›æƒ³å»å¹´ï¼Œæˆ‘ç¬¬ä¸€æ¬¡ç”¨ OceanBase æ•°æ®åº“åš RAG åº”ç”¨ï¼Œå½“æ—¶ç”¨ 16GB å†…å­˜çš„ MacBook Pro å¯åŠ¨ OB ç«Ÿç„¶è¿˜ä¼šå› ä¸ºå†…å­˜ä¸å¤Ÿè€Œå¤±è´¥â˜¹ï¸ï¼Œé‚£æ—¶å€™çš„ OB å¼ºå¤§å´ç•¥æ˜¾â€œé«˜å†·â€ã€‚</p>
<p>è€Œ seekdb çš„å‡ºç°ï¼Œè®©æˆ‘æœ‰ä¸€ç§â€œå£«åˆ«ä¸‰æ—¥å½“åˆ®ç›®ç›¸çœ‹â€çš„æ„Ÿè§‰ã€‚OceanBase ä»æ˜”æ—¥â€œé«˜ä¸å¯æ”€â€çš„é‡‘èçº§æ•°æ®åº“ï¼Œåˆ°å¦‚ä»Šâ€œè§¦æ‰‹å¯åŠâ€çš„ seekdbï¼ŒOceanBase å›¢é˜Ÿè¿™æ¬¡çœŸæ­£çœ‹æ‡‚äº†å¼€å‘è€…åœ¨ AI æ—¶ä»£å¯¹æ•°æ®åº“æœŸæœ›çš„æ ·å­ï¼šæ— ç—›çš„ä¸Šæ‰‹ä½“éªŒï¼Œä¸åƒèµ„æºã€é…ç½®ç®€å•ã€å¼€ç®±å³ç”¨ï¼Œå´ä¾ç„¶å¼ºå¤§å¯é ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f28ced87a97448884d366a67c63a2fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764634795&amp;x-signature=BM9NWjZsJcEfZkpIo0Qd%2BNx9O48%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>GitHub åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Foceanbase%2Fseekdb" target="_blank" title="https://github.com/oceanbase/seekdb" ref="nofollow noopener noreferrer">github.com/oceanbase/sâ€¦</a></p>
</blockquote>
<p>ç°åœ¨çš„ seekdb ä¹Ÿè®¸è¿˜ä¸æ˜¯â€œæœ€ç»ˆå½¢æ€â€ï¼Œä½†å®ƒç»å¯¹æ˜¯ä¸€ä¸ªä»¤äººå…´å¥‹çš„èµ·ç‚¹ï¼Œè®©æˆ‘ä»¬ä¸€èµ·è§è¯è¿™æ¬¾â€œæ›´æ‡‚ AI çš„æ•°æ®åº“â€æˆé•¿ä¹‹è·¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Webå‰ç«¯ä»¬ï¼æˆ‘ç”¨ä¸‰å¹´äº²èº«ç»å†ï¼Œè¯´è¯´ä» uniapp åˆ° Flutteræ€ä¹ˆè½¬å‹çš„ï¼Œè¿™æ¡è·¯æˆ‘çˆ¬è¿‡ï¼Œå‘æˆ‘è¸©è¿‡]]></title>    <link>https://juejin.cn/post/7576378563575545871</link>    <guid>https://juejin.cn/post/7576378563575545871</guid>    <pubDate>2025-11-25T08:10:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576378563575545871" data-draft-id="7576208176007905332" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Webå‰ç«¯ä»¬ï¼æˆ‘ç”¨ä¸‰å¹´äº²èº«ç»å†ï¼Œè¯´è¯´ä» uniapp åˆ° Flutteræ€ä¹ˆè½¬å‹çš„ï¼Œè¿™æ¡è·¯æˆ‘çˆ¬è¿‡ï¼Œå‘æˆ‘è¸©è¿‡"/> <meta itemprop="keywords" content="å‰ç«¯,Flutter,uni-app"/> <meta itemprop="datePublished" content="2025-11-25T08:10:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ—çš„è·¨ç«¯å¼€å‘æ—¥è®°"/> <meta itemprop="url" content="https://juejin.cn/user/3320949647350765"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Webå‰ç«¯ä»¬ï¼æˆ‘ç”¨ä¸‰å¹´äº²èº«ç»å†ï¼Œè¯´è¯´ä» uniapp åˆ° Flutteræ€ä¹ˆè½¬å‹çš„ï¼Œè¿™æ¡è·¯æˆ‘çˆ¬è¿‡ï¼Œå‘æˆ‘è¸©è¿‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3320949647350765/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ—çš„è·¨ç«¯å¼€å‘æ—¥è®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T08:10:26.000Z" title="Tue Nov 25 2025 08:10:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    118
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body&gt;:first-child{margin-top:0!important}.markdown-body&gt;:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li&gt;p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre&gt;code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><style data-highlight="" data-highlight-key="github">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ã€å°æ—ã€‘</p>
<p>è¯´æ¥æœ‰ç‚¹æ„æ€ï¼Œæˆ‘çš„åå°ç§ä¿¡ï¼Œæœ€è¿‘æœ‰ç‚¹çƒ­é—¹çƒ­é—¹ï¼Œç‚¹å¼€ä¸€çœ‹ï¼Œç¿»æ¥è¦†å»éƒ½æ˜¯åŒä¸€ä¸ªé—®é¢˜ï¼š</p>
<p><strong>â€œå“¥ä»¬ï¼Œæˆ‘ä¸€Webå‰ç«¯ï¼Œèƒ½è½¬ RN/Flutter å—ï¼Ÿå¥½è½¬å—ï¼Ÿæ°´æ·±ä¸ï¼Ÿâ€</strong></p>
<p>é—®çš„äººå¤šäº†ï¼Œæˆ‘ä¸€ä¸ªä¸ªå›å®åœ¨æœ‰ç‚¹ç´¯ã€‚è€Œä¸”æˆ‘å‘ç°ï¼Œè¿™å·²ç»ä¸æ˜¯ä¸€ä¸ªç®€å•çš„â€œèƒ½ä¸èƒ½â€çš„é—®é¢˜ï¼ŒèƒŒåæ˜¯ Web å¼€å‘è€…å¯¹æœªçŸ¥ç§»åŠ¨ç«¯é¢†åŸŸçš„ä¸€ç³»åˆ—å›°æƒ‘ã€ç„¦è™‘å’Œå¥½å¥‡ã€‚</p>
<p>æ‰€ä»¥ï¼Œæˆ‘å†³å®šå¹²è„†å†™ä¸€ç¯‡æ–‡ç« ï¼ŒæŠŠæˆ‘ä»ä¸€ä¸ªçº¯ç²¹çš„ Web å‰ç«¯ï¼Œä¸€æ­¥æ­¥â€œçˆ¬â€åˆ° Flutter å¼€å‘çš„ç»å†å’Œæ€è€ƒï¼Œæ°å¼€æ‰ç¢äº†åˆ†äº«ç»™å¤§å®¶ã€‚æˆ‘ä¸è®²æŸä¸ª API æ€ä¹ˆç”¨ï¼Œä¹Ÿä¸è´´å¤§æ®µçš„æºç ï¼Œå’±å°±èŠç‚¹å¤§å®è¯ï¼ŒèŠèŠè¿™æ¡è·¯åˆ°åº•æ˜¯æ€ä¹ˆå›äº‹ã€‚</p>
<p>å…ˆè‡ªæŠ¥å®¶é—¨ï¼Œè®©å¤§å®¶çŸ¥é“æˆ‘ä¸æ˜¯åœ¨â€œçå¿½æ‚ â€ã€‚</p>
<p>æˆ‘ï¼Œ22å¹´æ¯•ä¸šå°±åšäº† Web å‰ç«¯ã€‚ç¬¬ä¸€ä»½å·¥ä½œåœ¨ä¸Šæµ·ä¸€å®¶å°å…¬å¸ï¼Œä¸Šæ¥å°±æ˜¯ç¡¬ä»—ï¼Œç”¨Â <code>uni-app</code>Â ä»0åˆ°1ææ¢ç”µå°ç¨‹åºçš„å¾®ä¿¡å’Œæ”¯ä»˜å®ç‰ˆã€‚åæ¥è€æ¿ä¸ºäº†èèµ„ï¼Œè¯´å°ç¨‹åºä½“éªŒä¸è¡Œï¼Œè¦åš Appï¼Œäºæ˜¯æˆ‘åˆä¸´å±å—å‘½ï¼Œåœ¨Â <code>uni-app</code>ã€<code>RN</code>ã€<code>Flutter</code>Â ä¸‰ä¸ªæŠ€æœ¯é‡Œé€‰å‹ï¼Œæœ€åç¡¬ç€å¤´çš®ä¸Šäº†Â <code>Flutter</code>ï¼Œé‚£æ—¶å€™å¯æ²¡ç°åœ¨è¿™ä¹ˆå¤š AI èƒ½å¸®ä½ ï¼Œå…¨é ä¸€è¡Œè¡Œæ‰‹æ•²ï¼Œæ„£æ˜¯æŠŠ App ç»™å¹²ä¸Šçº¿äº†ã€‚</p>
<p>åæ¥è·³æ§½åˆ°äº†åŒ—äº¬ä¸€å®¶ä¸Šå¸‚å…¬å¸ï¼Œæ­£å¼æˆä¸ºä¸€å Flutter å¼€å‘ï¼Œåš AIGC é¡¹ç›®ï¼Œå°±æ˜¯å¤§å®¶ç©çš„æ–‡ç”Ÿå›¾ã€å›¾ç”Ÿå›¾é‚£äº›ã€‚å†åæ¥ï¼Œæˆ‘åˆå»äº†å°ç±³ï¼ˆå¤–åŒ…ï¼‰ï¼Œå‚ä¸é’±åŒ…é‡Œçš„ AI è®°è´¦æ¨¡å—ï¼Œä½“éªŒäº†ä¸€æŠŠå¤§å‚çš„æ··åˆå¼€å‘æ¨¡å¼ã€‚ç°åœ¨å…¥èŒä¸€å®¶ä¸­å‚ï¼Œæœ‰ä¸“é—¨çš„FlutteræŠ€æœ¯å›¢é˜Ÿ...</p>
<p>ä¸€è·¯ä¸Šï¼Œä»Â <code>uni-app</code>Â çš„ WebViewï¼Œåˆ° Flutter çš„è‡ªç»˜å¼•æ“ï¼Œä»ä¸€ä¸ªäººå•æ‰“ç‹¬æ–—ï¼Œåˆ°å’ŒåŸç”Ÿå¼€å‘ååŒä½œæˆ˜ï¼Œä¹Ÿè‡ªå·±å°è£…äº†å‡ ä¸ªæ’ä»¶å‘å¸ƒåˆ° pub.devï¼Œç®—æ˜¯æ··äº†ä¸ªè„¸ç†Ÿã€‚</p>
<p>æ‰€ä»¥ï¼Œå…³äºâ€œWebå‰ç«¯è½¬è·¨å¹³å°â€è¿™ä¸ªè¯é¢˜ï¼Œæˆ‘è§‰å¾—æˆ‘è¿˜æ˜¯èƒ½èŠå‡ å¥çš„ã€‚</p>
<h2 data-id="heading-1">ç¯‡ç« ä¸€ï¼š æ‹ç›´æ¦‚å¿µï¼Œä»€ä¹ˆæ˜¯è·¨å¹³å°åˆ°å¼€å‘</h2>
<p>åœ¨å¾ˆå¤š Web åŒå­¦çœ¼é‡Œä¹ŸåŒ…æ‹¬æ›¾ç»çš„æˆ‘ï¼Œç§»åŠ¨ç«¯å¼€å‘å°±ä¿©ç‰©ç§ï¼š<strong>åŸç”Ÿï¼ˆNativeï¼‰</strong> Â å’ŒÂ <strong>è·¨å¹³å°ï¼ˆCross-Platformï¼‰</strong> ã€‚</p>
<h3 data-id="heading-2">åŸç”Ÿå¼€å‘å’Œè·¨å¹³å°å¼€å‘çš„åŒºåˆ«åœ¨å“ªï¼Ÿ</h3>
<p>è¿™ä¸ªç†è§£æ²¡é”™ï¼Œä½†æœ‰ç‚¹ç¬¼ç»Ÿã€‚æˆ‘ä»¬ç”¨ä¸ªå¥½æ‡‚çš„æ¯”å–»æ¥è§£é‡Šã€‚</p>
<p><strong>åŸç”Ÿå¼€å‘ï¼ˆNative Developmentï¼‰</strong></p>
<blockquote>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ è¦åœ¨åŒ—äº¬å’Œä¸Šæµ·å„å¼€ä¸€å®¶æœ¬åœ°ç‰¹è‰²èœé¦†ã€‚</p>
<p>ä½ ä¼šåœ¨åŒ—äº¬è¯·ä¸€ä½ç²¾é€šäº¬é…±è‚‰ä¸ã€çƒ¤é¸­çš„åŒ—äº¬æœ¬åœ°å¨å¸ˆï¼ˆ<strong>Android å¼€å‘è€…</strong>ï¼‰ï¼Œç”¨æœ¬åœ°çš„é£Ÿæå’Œç¶å…·ï¼ˆ<strong>Java/Kotlin + Android SDK</strong>ï¼‰ã€‚</p>
<p>ä½ ä¼šåœ¨ä¸Šæµ·è¯·ä¸€ä½ç²¾é€šçº¢çƒ§è‚‰ã€è…Œç¬ƒé²œçš„ä¸Šæµ·æœ¬åœ°å¨å¸ˆï¼ˆ<strong>iOS å¼€å‘è€…</strong>ï¼‰ï¼Œç”¨ä¸Šæµ·çš„é£Ÿæå’Œç¶å…·ï¼ˆ<strong>Objective-C/Swift + iOS SDK</strong>ï¼‰ã€‚</p>
<p><strong>ä¼˜ç‚¹</strong>ï¼šä¸¤å®¶èœé¦†éƒ½åšå‡ºäº†æœ€åœ°é“ã€æœ€åŸæ±åŸå‘³ã€ä¸Šèœæœ€å¿«çš„æœ¬åœ°èœï¼ˆ<strong>æ€§èƒ½æœ€å¥½ã€ä½“éªŒæœ€æ£’ã€æœ€è´´åˆç³»ç»Ÿç‰¹æ€§</strong>ï¼‰ã€‚<br/>
<strong>ç¼ºç‚¹</strong>ï¼šä½ å¾—é›‡ä¸¤ä¸ªå¨å¸ˆï¼Œæ²Ÿé€šä¸¤å¥—èœå•ï¼Œç®¡ç†ä¸¤ä¸ªå¨æˆ¿ï¼Œæˆæœ¬ç›´æ¥ç¿»å€ï¼ˆ<strong>å¼€å‘æˆæœ¬é«˜ã€å‘¨æœŸé•¿ã€å›¢é˜Ÿç»´æŠ¤éš¾</strong>ï¼‰ã€‚</p>
</blockquote>
<p><strong>åŸç”Ÿå¼€å‘è§£å†³çš„æ ¸å¿ƒèŒè´£æ˜¯ï¼šæ¦¨å¹²å¹³å°æ€§èƒ½ï¼Œæä¾›æè‡´çš„ç”¨æˆ·ä½“éªŒã€‚</strong> Â ä»»ä½•ä¸ç³»ç»Ÿåº•å±‚æ·±åº¦äº¤äº’çš„åŠŸèƒ½ï¼Œæ¯”å¦‚å®šåˆ¶åŒ–çš„ç³»ç»Ÿçº§æœåŠ¡ã€å¤æ‚çš„è“ç‰™/NFCé€šä¿¡ã€é«˜æ€§èƒ½çš„å›¾å½¢å¤„ç†ï¼ŒåŸç”Ÿéƒ½æ˜¯å½“ä¹‹æ— æ„§çš„ç‹è€…ã€‚åœ¨æˆ‘åšAIGCé¡¹ç›®æ—¶ï¼Œé‚£ä¸¤ä¸ªå®‰å“å’ŒiOSçš„åŒäº‹ï¼Œä»–ä»¬ä¸ç›´æ¥å‚ä¸ä¸šåŠ¡å¼€å‘ï¼Œä½†ä»–ä»¬è´Ÿè´£æ‰“åŒ…ã€è´Ÿè´£æŠŠç®—æ³•å›¢é˜Ÿç»™çš„ C++ SDK é›†æˆåˆ°åŸç”Ÿå·¥ç¨‹é‡Œï¼Œå†æš´éœ²æ¥å£ç»™æˆ‘ä»¬ Flutter è°ƒç”¨ã€‚è¿™å°±æ˜¯åŸç”Ÿçš„â€œç‰¹åŒºâ€ï¼Œè·¨å¹³å°æŠ€æœ¯è½»æ˜“ä¸æ•¢æ¶‰è¶³ã€‚</p>
<p><strong>è·¨å¹³å°å¼€å‘ï¼ˆCross-Platform Developmentï¼‰</strong></p>
<blockquote>
<p>ç°åœ¨ï¼Œä½ è§‰å¾—ä¸¤å®¶åº—æˆæœ¬å¤ªé«˜ï¼Œå†³å®šå¼€ä¸€å®¶èåˆèœé¦†ã€‚</p>
<p>ä½ è¯·æ¥ä¸€ä½å¤©æ‰å¤§å¨ï¼ˆ<strong>è·¨å¹³å°æ¡†æ¶</strong>ï¼‰ï¼Œä»–å¸¦æ¥äº†ä¸€å¥—è‡ªå·±ç‹¬é—¨çš„ä¸‡èƒ½å¨å…·å’Œæ ‡å‡†åŒ–çš„çƒ¹é¥ªæµç¨‹ï¼ˆ<strong>ä¸€å¥—ä»£ç </strong>ï¼‰ã€‚</p>
<p>ä»–ç”¨è¿™å¥—æµç¨‹ï¼Œæ—¢èƒ½åšå‡ºå…«ä¹ä¸ç¦»åçš„äº¬é…±è‚‰ä¸ï¼Œä¹Ÿèƒ½åšå‡ºå‘³é“ä¸é”™çš„çº¢çƒ§è‚‰ï¼Œè€Œä¸”ä¸¤é“èœå¯ä»¥åŒæ—¶å¼€ç«ï¼Œæ•ˆç‡æé«˜ï¼ˆ<strong>ä¸€å¥—ä»£ç ï¼Œå¤šç«¯è¿è¡Œï¼Œé™æœ¬å¢æ•ˆ</strong>ï¼‰ã€‚</p>
<p><strong>ä¼˜ç‚¹</strong>ï¼šä½ åªéœ€è¦ç®¡ç†ä¸€ä¸ªå¨å¸ˆå’Œä¸€ä¸ªå¨æˆ¿ï¼Œæˆæœ¬å¤§å¤§é™ä½ï¼Œä¸Šæ–°èœä¹Ÿå¿«ï¼ˆ<strong>å¼€å‘æˆæœ¬ä½ã€æ•ˆç‡é«˜ã€UIä¸€è‡´æ€§å¥½</strong>ï¼‰ã€‚<br/>
<strong>ç¼ºç‚¹</strong>ï¼šè™½ç„¶èœå¥½åƒï¼Œä½†ç»ˆç©¶ä¸æ˜¯æœ¬åœ°è€å¸ˆå‚…åšçš„ï¼Œå£æ„Ÿä¸Šå¯èƒ½å·®é‚£ä¹ˆç‚¹â€œåœ°é“â€çš„æ„Ÿè§‰ï¼ˆ<strong>æ€§èƒ½å’Œä½“éªŒé€šå¸¸æœ‰æŸè€—</strong>ï¼‰ï¼Œè€Œä¸”å¦‚æœé‡åˆ°ç‰¹åˆ«åˆé’»çš„æœ¬åœ°é£Ÿæï¼ˆ<strong>ç‰¹å®šç³»ç»ŸAPI</strong>ï¼‰ï¼Œè¿™ä½å¤§å¨ä¹Ÿå¾—å»è¯·æ•™æœ¬åœ°å¨å¸ˆæ€ä¹ˆå¤„ç†ï¼ˆ<strong>éœ€è¦åŸç”Ÿè¾…åŠ©</strong>ï¼‰ã€‚</p>
</blockquote>
<p><strong>è·¨å¹³å°è§£å†³çš„æ ¸å¿ƒèŒè´£æ˜¯ï¼šåœ¨ä¿è¯ä½“éªŒåŸºæœ¬ç›˜çš„æƒ…å†µä¸‹ï¼Œæœ€å¤§åŒ–åœ°å¤ç”¨ä»£ç ï¼Œé™ä½æˆæœ¬ï¼Œæå‡æ•ˆç‡ã€‚</strong> Â å®ƒæ˜¯å•†ä¸šå’ŒæŠ€æœ¯æƒè¡¡ä¸‹çš„äº§ç‰©ï¼Œå°¤å…¶é€‚åˆé‚£äº›ä¸šåŠ¡é€»è¾‘å¤æ‚ã€UIå¤šæ ·çš„åº”ç”¨ã€‚</p>
<h3 data-id="heading-3">ç§»åŠ¨ç«¯å¼€å‘éœ€è¦çš„æ€ç»´æ¨¡å¼</h3>
<p>åœ¨èŠæŠ€æœ¯ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆèŠç‚¹æ›´é‡è¦çš„ä¸œè¥¿ï¼š<strong>æ€ç»´æ¨¡å¼</strong>ã€‚ä» Web è½¬ç§»åŠ¨ç«¯ï¼Œæœ€å¤§çš„åä¸æ˜¯å­¦ Dart æˆ– Reactï¼Œè€Œæ˜¯ä½ å¤§è„‘é‡Œæ ¹æ·±è’‚å›ºçš„â€œæµè§ˆå™¨æ€ç»´â€ã€‚</p>
<ul>
<li><strong>ä»â€œæ— çŠ¶æ€â€çš„ç½‘é¡µåˆ°â€œæœ‰çŠ¶æ€â€çš„åº”ç”¨</strong><br/>
Web çš„ä¸–ç•Œï¼Œæœ¬è´¨æ˜¯è¯·æ±‚-å“åº”ã€‚ç”¨æˆ·ç‚¹ä¸€ä¸‹ï¼Œé¡µé¢åˆ·ä¸€ä¸‹ï¼Œå¤§éƒ¨åˆ†æ—¶å€™æˆ‘ä»¬ä¸å…³å¿ƒç”¨æˆ·ä¸Šä¸€æ­¥å¹²äº†å•¥ã€‚è€Œ App æ˜¯ä¸€ä¸ª<strong>æ´»ç‰©</strong>ï¼Œå®ƒæœ‰ç”Ÿå‘½å‘¨æœŸï¼šä»åå°è¢«å”¤é†’ã€è¢«ä¸€ä¸ªç”µè¯æ‰“æ–­ã€è¢«ç³»ç»Ÿå› ä¸ºå†…å­˜ä¸è¶³è€Œæ€æ­»â€¦â€¦ä½ å†™çš„æ¯ä¸€è¡Œä»£ç ï¼Œéƒ½å¾—åƒä¸ªæ“å¿ƒçš„è€å¦ˆå­ï¼Œè€ƒè™‘è¿™ä¸ªâ€œæ´»ç‰©â€åœ¨å„ç§çŠ¶æ€ä¸‹çš„è¡¨ç°ã€‚è¿™æ˜¯ä¸€ç§ä»â€œé¢å‘æ–‡æ¡£â€åˆ°â€œé¢å‘çŠ¶æ€â€çš„æ ¹æœ¬è½¬å˜ã€‚</li>
<li><strong>ä»â€œæ¸©å®¤â€çš„æµè§ˆå™¨åˆ°â€œä¸¥é…·â€çš„ç§»åŠ¨ç¯å¢ƒ</strong><br/>
åœ¨ Web ç«¯ï¼Œæˆ‘ä»¬æ˜¯æ¸©å®¤é‡Œçš„èŠ±æœµï¼ŒèƒŒåæœ‰å¼ºå¤§çš„æœåŠ¡å™¨å’Œç¨³å®šçš„ç½‘ç»œã€‚ä½†åœ¨ç§»åŠ¨ç«¯ï¼Œä½ çš„ App æ˜¯åœ¨ä¸€ä¸ªèµ„æºæå…¶æœ‰é™ã€ç¯å¢ƒæå…¶æ¶åŠ£çš„â€œè’é‡â€æ±‚ç”Ÿã€‚<strong>æ€§èƒ½</strong>ä¸å†æ˜¯é”¦ä¸Šæ·»èŠ±ï¼Œè€Œæ˜¯ç”Ÿæ­»çº¿ã€‚æˆ‘åš AIGC é¡¹ç›®æ—¶ï¼Œä¸€å¼ å›¾çš„ç”Ÿæˆè¿‡ç¨‹ï¼Œå¦‚æœå¯¼è‡´ UI æ‰å¸§ï¼Œç”¨æˆ·ä¼šç«‹åˆ»æ„Ÿè§‰åˆ°å¡é¡¿ï¼›å¦‚æœå†…å­˜æ§åˆ¶ä¸å¥½ï¼Œä½ç«¯æœºç›´æ¥é—ªé€€ã€‚ç”µé‡ã€å†…å­˜ã€ç½‘ç»œæŠ–åŠ¨ã€CPU å ç”¨â€¦â€¦è¿™äº›è¿‡å»æˆ‘ä»¬ä¸å¤ªå…³å¿ƒçš„æŒ‡æ ‡ï¼Œç°åœ¨æˆäº†æ‚¬åœ¨å¤´ä¸Šçš„è¾¾æ‘©å…‹åˆ©æ–¯ä¹‹å‰‘ã€‚</li>
<li><strong>ä»â€œæ–‡æ¡£æµâ€çš„å¸ƒå±€åˆ°â€œçº¦æŸâ€çš„å¸ƒå±€</strong><br/>
Web å¸ƒå±€æ˜¯â€œé¡ºæµè€Œä¸‹â€ï¼Œæˆ‘ä»¬ç”¨ Flexã€Grid æ”¹å˜æ°´æµæ–¹å‘ã€‚è€Œç§»åŠ¨ç«¯å¸ƒå±€æ˜¯â€œæˆ´ç€é•£é“è·³èˆâ€ï¼Œæ¯ä¸ªç»„ä»¶éƒ½è¢«çˆ¶çº§æ­»æ­»åœ°â€œçº¦æŸâ€åœ¨ä¸€ä¸ªçŸ©å½¢å†…ã€‚ä½ å¿…é¡»å­¦ä¼šä»â€œæˆ‘æƒ³æŠŠå®ƒæ”¾å“ªâ€è½¬å˜ä¸ºâ€œæˆ‘è¯¥å¦‚ä½•çº¦æŸå®ƒï¼Œè®©å®ƒåœ¨æˆ‘æƒ³è¦çš„ä½ç½®â€ã€‚</li>
</ul>
<p>å¥½äº†ï¼Œå¿ƒæ€æ‘†æ­£äº†ï¼Œæˆ‘ä»¬å†æ¥çœ‹æŠ€æœ¯ï¼Œä½ ä¼šå‘ç°å¾ˆå¤šè®¾è®¡çš„â€œæ‰€ä»¥ç„¶â€ã€‚</p>
<h2 data-id="heading-4">ç¯‡ç« äºŒï¼šç›´å‡»åº•å±‚ï¼šä¸‰å¤§è·¨å¹³å°æ¡†æ¶çš„æ¶æ„åŸç†å‰–æ</h2>
<h3 data-id="heading-5">Â uni-app: WebView å®¹å™¨çš„é›†å¤§æˆè€…</h3>
<ul>
<li>
<p><strong>æ ¸å¿ƒæ¶æ„ï¼šWebView + JSBridge</strong><br/>
<code>uni-app</code>Â åœ¨æ„å»º App æ—¶çš„æ ¸å¿ƒæ€æƒ³ï¼Œæ˜¯å°†ä½ çš„ Vue.js åº”ç”¨è¿è¡Œåœ¨ä¸€ä¸ªåŸç”Ÿçš„â€œå®¹å™¨â€ä¹‹å†…ï¼Œè€Œè¿™ä¸ªå®¹å™¨çš„ä¸»è¦ç»„ä»¶å°±æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„Â <strong>WebView</strong>ã€‚WebView æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåµŒå…¥åœ¨ App å†…éƒ¨çš„ã€è¢«é˜‰å‰²å’Œå¼ºåŒ–çš„æµè§ˆå™¨å†…æ ¸ï¼ˆiOS çš„ WKWebViewï¼ŒAndroid çš„ WebViewï¼‰ã€‚ä½ çš„æ‰€æœ‰é¡µé¢å’Œç»„ä»¶ï¼Œå®é™…ä¸Šéƒ½æ˜¯åœ¨æ¸²æŸ“ä¸€ä¸ªæœ¬åœ°çš„ HTMLã€CSS å’Œ JavaScript æ–‡ä»¶ã€‚</p>
</li>
<li>
<p><strong>UI æ¸²æŸ“æœºåˆ¶</strong><br/>
UI çš„æ¸²æŸ“å·¥ä½œå®Œå…¨ç”± WebView çš„æ¸²æŸ“å¼•æ“è´Ÿè´£ã€‚è¿™æ„å‘³ç€ï¼Œä½ å†™çš„Â <code>&lt;view&gt;</code>Â æ ‡ç­¾æœ€ç»ˆä¼šè¢«æ¸²æŸ“æˆÂ <code>&lt;div&gt;</code>ï¼ŒåŠ¨ç”»æ•ˆæœä¾èµ–äº CSS Transitions/Animationsï¼Œå¸ƒå±€éµå¾ªæ ‡å‡†çš„ Web æ–‡æ¡£æµå’Œ Flexbox æ¨¡å‹ã€‚è¿™å¯¹äº Web å¼€å‘è€…æ˜¯é›¶æˆæœ¬ä¸Šæ‰‹ï¼Œä½†åŒæ—¶ä¹Ÿæ„å‘³ç€ï¼Œ<strong>UI çš„æ€§èƒ½ä¸Šé™è¢« WebView æœ¬èº«ç‰¢ç‰¢é”æ­»</strong>ã€‚</p>
</li>
<li>
<p><strong>é€»è¾‘ä¸åŸç”Ÿé€šä¿¡ï¼šJSBridge</strong><br/>
å½“ä½ çš„ Web é¡µé¢ï¼ˆJS ä»£ç ï¼‰éœ€è¦è°ƒç”¨åŸç”Ÿçš„èƒ½åŠ›æ—¶ï¼Œæ¯”å¦‚æ‰«ç ã€è·å–åœ°ç†ä½ç½®ï¼Œå°±éœ€è¦é€šè¿‡Â <strong>JSBridge</strong>Â è¿™ä¸ªâ€œä¿¡ä½¿â€æ¥å®Œæˆã€‚å…¶å·¥ä½œæµç¨‹é€šå¸¸æ˜¯ï¼š</p>
<ol>
<li><strong>JavaScript è°ƒç”¨</strong>ï¼šä½ åœ¨ JS ä¸­è°ƒç”¨Â <code>uni.scanCode()</code>ã€‚</li>
<li><strong>æ•°æ®åºåˆ—åŒ–</strong>ï¼šJSBridge å°†è¿™ä¸ªè°ƒç”¨å’Œå‚æ•°æ‰“åŒ…æˆä¸€ä¸ªç‰¹å®šæ ¼å¼çš„å­—ç¬¦ä¸²ï¼ˆé€šå¸¸æ˜¯ JSONï¼‰ã€‚</li>
<li><strong>æ¶ˆæ¯ä¼ é€’</strong>ï¼šé€šè¿‡ WebView æä¾›ç»™åŸç”Ÿç¯å¢ƒçš„æ¥å£ï¼Œå°†è¿™ä¸ªå­—ç¬¦ä¸²æ¶ˆæ¯å‘é€ç»™åŸç”Ÿä»£ç ã€‚</li>
<li><strong>åŸç”Ÿæ‰§è¡Œ</strong>ï¼šåŸç”Ÿä»£ç æ¥æ”¶å¹¶è§£ææ¶ˆæ¯ï¼Œæ‰§è¡ŒçœŸæ­£çš„æ‰«ç æ“ä½œã€‚</li>
<li><strong>ç»“æœè¿”å›</strong>ï¼šåŸç”Ÿå°†ç»“æœå†æ¬¡åºåˆ—åŒ–ï¼Œé€šè¿‡å›è°ƒæœºåˆ¶ä¼ å›ç»™ WebView ä¸­çš„ JavaScriptã€‚</li>
</ol>
</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åœ¨ uni-app é¡µé¢é‡Œ</span>
uni.<span class="hljs-title function_">scanCode</span>({
  <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¡ç å†…å®¹ï¼š'</span> + res.<span class="hljs-property">result</span>);
  }
});
<span class="hljs-comment">// uni.scanCode è¿™ä¸ªJS APIï¼Œåº•å±‚å°±æ˜¯é€šè¿‡ JSBridge</span>
<span class="hljs-comment">// å»è°ƒç”¨äº†åŸç”Ÿå®‰å“æˆ–iOSçš„æ‰«ç åŠŸèƒ½</span>
</code></pre>
<p>è¿™ä¸ªè¿‡ç¨‹æ˜¯<strong>å¼‚æ­¥</strong>çš„ï¼Œå¹¶ä¸”æ¶‰åŠå¤šæ¬¡<strong>æ•°æ®åºåˆ—åŒ–/ååºåˆ—åŒ–</strong>å’Œ<strong>çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢</strong>ï¼ˆJavaScript çº¿ç¨‹ â†” åŸç”Ÿ UI çº¿ç¨‹ï¼‰ã€‚å¯¹äºä½é¢‘è°ƒç”¨ï¼Œè¿™æ²¡æœ‰é—®é¢˜ï¼›ä½†å¯¹äºé«˜é¢‘äº¤äº’ï¼ˆå¦‚è‡ªå®šä¹‰æ‰‹åŠ¿ã€å®æ—¶é€šä¿¡ï¼‰ï¼ŒJSBridge å°±ä¼šæˆä¸ºæ˜æ˜¾çš„æ€§èƒ½ç“¶é¢ˆã€‚</p>
<ul>
<li><strong>æ¶æ„æ€»ç»“</strong><br/>
<code>uni-app</code>Â çš„æ¶æ„æ˜¯ä¸€ç§æè‡´çš„å®ç”¨ä¸»ä¹‰ã€‚å®ƒç”¨ Web å¼€å‘è€…æœ€ç†Ÿæ‚‰çš„æŠ€æœ¯æ ˆï¼Œä»¥æœ€ä½çš„æˆæœ¬å®ç°äº†è·¨ç«¯ã€‚ä½†å…¶ä»£ä»·æ˜¯æ€§èƒ½å’Œä½“éªŒçš„å¤©èŠ±æ¿è¾ƒä½ï¼Œæ°¸è¿œæ— æ³•æ‘†è„±â€œç½‘é¡µæ„Ÿâ€ï¼Œå› ä¸ºå®ƒæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªé«˜åº¦ä¼˜åŒ–çš„æœ¬åœ°ç½‘ç«™ã€‚</li>
</ul>
<h3 data-id="heading-6">React Native: è¿ˆå‘â€œæ— æ¡¥æ¥â€æ–°æ—¶ä»£çš„åŸç”Ÿ UI æ˜ å°„</h3>
<ul>
<li>
<p><strong>æ ¸å¿ƒæ¶æ„ï¼šJavaScript çº¿ç¨‹ + åŸç”Ÿ UI çº¿ç¨‹</strong><br/>
RN çš„è®¾è®¡å“²å­¦ä¸ WebView å®Œå…¨ä¸åŒã€‚å®ƒå¹¶æ²¡æœ‰æŠŠä½ çš„ä»£ç è·‘åœ¨æµè§ˆå™¨é‡Œï¼Œè€Œæ˜¯å¯åŠ¨äº†ä¸€ä¸ªç‹¬ç«‹çš„Â <strong>JavaScript çº¿ç¨‹</strong>ï¼ˆé€šå¸¸ä½¿ç”¨ä¸ºç§»åŠ¨ç«¯ä¼˜åŒ–çš„Â <strong>Hermes</strong>Â å¼•æ“ï¼‰æ¥æ‰§è¡Œä½ çš„ React ä»£ç ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰ã€‚å½“ä½ çš„ç»„ä»¶æ ‘å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒRN ä¼šè®¡ç®—å‡ºæœ€å°åŒ–çš„ UI æ›´æ–°æ“ä½œï¼Œç„¶åé€šè¿‡ä¸€å¥—é€šä¿¡æœºåˆ¶ï¼Œå‘ŠçŸ¥<strong>åŸç”Ÿ UI çº¿ç¨‹</strong>å»åˆ›å»ºã€æ›´æ–°æˆ–åˆ é™¤å¯¹åº”çš„<strong>åŸç”Ÿ UI ç»„ä»¶</strong>ã€‚</p>
</li>
<li>
<p><strong>UI æ¸²æŸ“æœºåˆ¶</strong><br/>
ä½ å†™çš„Â <code>&lt;View&gt;</code>Â ç»„ä»¶ï¼Œæœ€ç»ˆä¼šç”± RN è½¬åŒ–ä¸º iOS ä¸Šçš„Â <code>UIView</code>Â æˆ– Android ä¸Šçš„Â <code>android.view.View</code>ã€‚<strong>æ¸²æŸ“å·¥ä½œæ˜¯100%ç”±åŸç”Ÿç³»ç»Ÿå®Œæˆçš„</strong>ã€‚è¿™ä½¿å¾— RN åº”ç”¨åœ¨å¤–è§‚å’ŒåŸºç¡€äº¤äº’ä¸Šèƒ½å¤Ÿè¾¾åˆ°ä¸åŸç”Ÿåº”ç”¨å‡ ä¹æ— å¼‚çš„æ°´å¹³ã€‚</p>
</li>
<li>
<p><strong>é€»è¾‘ä¸åŸç”Ÿé€šä¿¡ï¼ˆåˆ’é‡ç‚¹ï¼šæ¶æ„çš„æ¼”è¿›ï¼‰</strong><br/>
RN çš„é€šä¿¡æœºåˆ¶æ˜¯å…¶æ€§èƒ½æ¼”è¿›çš„å…³é”®ï¼Œç»å†äº†ä¸¤ä¸ªæ—¶ä»£ï¼š</p>
<ul>
<li>
<p><strong>æ—§æ¶æ„ (Bridge)</strong> ï¼šè¿™æ˜¯ RN æ—©æœŸçš„é€šä¿¡æ ¸å¿ƒã€‚å®ƒæ˜¯ä¸€ä¸ª<strong>å¼‚æ­¥çš„ã€å¯æ‰¹å¤„ç†çš„æ¡¥</strong>ã€‚JS çº¿ç¨‹å’ŒåŸç”Ÿçº¿ç¨‹é€šè¿‡è¿™ä¸ªæ¡¥æ¥å›ä¼ é€’åºåˆ—åŒ–åçš„ JSON æ¶ˆæ¯ã€‚è¿™ä¸ªè®¾è®¡çš„ç“¶é¢ˆåœ¨äºï¼š1)Â <strong>å¼‚æ­¥</strong>ï¼šJS æ— æ³•åŒæ­¥è°ƒç”¨åŸç”Ÿæ–¹æ³•å¹¶ç«‹å³è·å¾—ç»“æœã€‚2)Â <strong>åºåˆ—åŒ–å¼€é”€</strong>ï¼šå¯¹äºå¤§é‡æˆ–é¢‘ç¹çš„æ•°æ®äº¤æ¢ï¼ˆå¦‚åˆ—è¡¨æ»šåŠ¨æ—¶çš„äº‹ä»¶æ•°æ®ï¼‰ï¼ŒJSON è½¬æ¢çš„å¼€é”€å¾ˆå¤§ã€‚è¿™å¯¼è‡´äº†åœ¨å¤æ‚åœºæ™¯ä¸‹ï¼ŒUI å“åº”å¯èƒ½ä¼šå»¶è¿Ÿã€‚</p>
</li>
<li>
<p><strong>æ–°æ¶æ„ (JSI - JavaScript Interface)</strong> ï¼šè¿™æ˜¯ RN çš„é©å‘½æ€§å‡çº§ã€‚JSI å…è®¸ JavaScript ç›´æ¥æŒæœ‰ä¸€ä¸ªå¯¹ C++ å¯¹è±¡çš„å¼•ç”¨ï¼Œå¹¶é€šè¿‡è¿™ä¸ªå¼•ç”¨<strong>åŒæ­¥è°ƒç”¨</strong>è¯¥å¯¹è±¡çš„æ–¹æ³•ã€‚è¿™æ„å‘³ç€ï¼š</p>
<ol>
<li><strong>å‘Šåˆ« JSON åºåˆ—åŒ–</strong>ï¼šæ•°æ®å¯ä»¥ç›´æ¥åœ¨å†…å­˜ä¸­å…±äº«ï¼Œæ— éœ€ä½æ•ˆçš„å­—ç¬¦ä¸²è½¬æ¢ã€‚</li>
<li><strong>å®ç°åŒæ­¥è°ƒç”¨</strong>ï¼šJS å¯ä»¥åƒè°ƒç”¨æœ¬åœ°å‡½æ•°ä¸€æ ·è°ƒç”¨åŸç”ŸåŠŸèƒ½ï¼Œè¿™å¯¹äºéœ€è¦å³æ—¶åé¦ˆçš„å¤æ‚äº¤äº’è‡³å…³é‡è¦ã€‚<br/>
åŸºäº JSIï¼ŒRN æ¨å‡ºäº†æ–°çš„æ¸²æŸ“å™¨Â <strong>Fabric</strong>Â å’Œæ–°çš„åŸç”Ÿæ¨¡å—ç³»ç»ŸÂ <strong>TurboModules</strong>ï¼Œå…±åŒæ„æˆäº†â€œæ— æ¡¥æ¥â€çš„æ–°æ—¶ä»£ã€‚</li>
</ol>
</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">View</span>, <span class="hljs-title class_">Text</span>, <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">MyComponent</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ä½ å†™çš„è¿™ä¸ª &lt;View&gt; å’Œ &lt;Text&gt;</span>
  <span class="hljs-comment">// æœ€ç»ˆå¹¶ä¸ä¼šå˜æˆ HTML æ ‡ç­¾</span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>Hello, Native World!<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"Click Me"</span> <span class="hljs-attr">onPress</span>=<span class="hljs-string">{()</span> =&gt;</span> console.log('Button pressed!')} /&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span>
  );
}
<span class="hljs-comment">// React Native ä¼šæŠŠè¿™ä¸ªç»„ä»¶æ ‘ä¿¡æ¯ï¼Œé€šè¿‡ Bridge å‘é€ç»™åŸç”Ÿ</span>
<span class="hljs-comment">// åŸç”Ÿé‚£è¾¹æ”¶åˆ°åï¼Œå°±ä¼šå»åˆ›å»ºçœŸæ­£çš„ Android.View å’Œ Android.TextView</span>

</code></pre>
<ul>
<li>
<p><strong>ç—›ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li><strong>Bridge æ€§èƒ½ç“¶é¢ˆ</strong>ï¼šå½“ä½ çš„é¥æ§å™¨æŒ‰å¾—å¤ªå¿«ï¼ˆæ¯”å¦‚é¢‘ç¹çš„åŠ¨ç”»ã€åˆ—è¡¨å¿«é€Ÿæ»šåŠ¨ï¼‰ï¼Œä¿¡å·å¤ªå¤šï¼Œç”µè§†æœºå°±å¯èƒ½ååº”ä¸è¿‡æ¥ï¼Œå¯¼è‡´å¡é¡¿ã€‚è¿™æ˜¯ RN å†å²ä¸Šä¸€ç›´è¢«è¯Ÿç—…çš„é—®é¢˜ï¼Œè™½ç„¶ç°åœ¨æœ‰äº†æ–°çš„æ¶æ„ï¼ˆJSIï¼‰åœ¨æ”¹è¿›ï¼Œä½†è¿™ä¸ªé€šä¿¡æˆæœ¬æ˜¯å®¢è§‚å­˜åœ¨çš„ã€‚</li>
<li><strong>â€œWrite once, debug everywhereâ€</strong> ï¼šå› ä¸º RN åªæ˜¯â€œè°ƒç”¨â€åŸç”Ÿç»„ä»¶ï¼Œè€Œä¸¤ç«¯åŸç”Ÿç»„ä»¶çš„è¡¨ç°æœ‰æ—¶ä¼šæœ‰ç»†å¾®å·®å¼‚ï¼Œæ‰€ä»¥ç»å¸¸ä¼šå‡ºç°ä¸€ä¸ªå¸ƒå±€åœ¨ iOS ä¸Šå¥½å¥½çš„ï¼Œåœ¨ Android ä¸Šå°±æ­ªäº†çš„æƒ…å†µï¼Œéœ€è¦å†™å¹³å°ç‰¹å®šçš„ä»£ç æ¥æŠ¹å¹³å·®å¼‚ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ¶æ„æ€»ç»“</strong><br/>
RN æä¾›çš„æ˜¯çœŸæ­£çš„åŸç”Ÿ UI ä½“éªŒã€‚å®ƒçš„æ¶æ„æ¼”è¿›ï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨ä¸æ–­è§£å†³â€œå¦‚ä½•è®©ä¸¤ä¸ªåˆ†ç¦»çš„ä¸–ç•Œï¼ˆJS ä¸ Nativeï¼‰æ›´é«˜æ•ˆã€æ›´åŒæ­¥åœ°å¯¹è¯â€è¿™ä¸€æ ¸å¿ƒé—®é¢˜ã€‚æ–°æ¶æ„æå¤§åœ°æå‡äº†å…¶æ€§èƒ½ä¸Šé™ï¼Œä½¿å…¶åœ¨ç»å¤§å¤šæ•°åœºæ™¯ä¸‹éƒ½è¡¨ç°å‡ºè‰²ã€‚</p>
</li>
</ul>
<h3 data-id="heading-7">Flutter: AOT ç¼–è¯‘ä¸è‡ªç»˜å¼•æ“çš„æ€§èƒ½çŒ›å…½</h3>
<ul>
<li>
<p><strong>æ ¸å¿ƒæ¶æ„ï¼šDart AOT ç¼–è¯‘ + C++ æ¸²æŸ“å¼•æ“ (Impeller/Skia)</strong><br/>
Flutter çš„æ¶æ„ç‹¬æ ‘ä¸€å¸œï¼Œå®ƒå®Œå…¨ç‹¬ç«‹äºç³»ç»ŸåŸç”Ÿ UI ç»„ä»¶ã€‚å…¶æœ¬è´¨ä¸Šæ›´åƒä¸€ä¸ªæ¸¸æˆå¼•æ“ï¼Œåªä¸è¿‡å®ƒæ¸²æŸ“çš„æ˜¯ UI å…ƒç´ è€Œéæ¸¸æˆè§’è‰²ã€‚</p>
<ul>
<li><strong>ä»£ç æ‰§è¡Œ</strong>ï¼šä½ çš„ Dart ä»£ç åœ¨å‘å¸ƒæ¨¡å¼ä¸‹ï¼Œä¼šè¢«Â <strong>AOT (Ahead-of-Time) ç¼–è¯‘</strong>æˆå¹³å°ç›¸å…³çš„åŸç”Ÿ ARM æœºå™¨ç ã€‚è¿™æ„å‘³ç€è¿è¡Œæ—¶æ²¡æœ‰ä¸­é—´å±‚ï¼ˆå¦‚ JS è™šæ‹Ÿæœºï¼‰çš„è§£é‡Šå¼€é”€ï¼Œä»£ç æ‰§è¡Œæ•ˆç‡æé«˜ï¼Œæ€§èƒ½ç¨³å®šå¯é¢„æµ‹ã€‚</li>
<li><strong>UI æ¸²æŸ“</strong>ï¼šFlutter æ¥ç®¡äº†æ•´ä¸ªå±å¹•çš„æ¸²æŸ“ã€‚å®ƒè¦æ±‚æ“ä½œç³»ç»Ÿæä¾›ä¸€å—ç©ºç™½çš„ç”»å¸ƒï¼ˆ<code>Surface</code>ï¼‰ï¼Œç„¶åè°ƒç”¨å…¶è‡ªå¸¦çš„ C++ æ¸²æŸ“å¼•æ“ï¼Œä¸€ä¸ªåƒç´ ä¸€ä¸ªåƒç´ åœ°å°†æ•´ä¸ªç•Œé¢ç»˜åˆ¶å‡ºæ¥ã€‚</li>
</ul>
</li>
<li>
<p><strong>UI æ¸²æŸ“æœºåˆ¶ï¼ˆåˆ’é‡ç‚¹ï¼šå¼•æ“çš„è¿›åŒ–ï¼‰</strong><br/>
Flutter çš„æ¸²æŸ“å¼•æ“æ˜¯å…¶æ€§èƒ½çš„åŸºçŸ³ï¼Œä¹Ÿç»å†äº†ä¸€æ¬¡é‡å¤§æ¼”è¿›ï¼š</p>
<ul>
<li><strong>Skia å¼•æ“</strong>ï¼šè¿™æ˜¯ Google å¼€æºçš„ 2D å›¾å½¢åº“ï¼Œä¹Ÿæ˜¯ Chrome å’Œ Android çš„åº•å±‚å›¾å½¢å¼•æ“ã€‚Skia æ€§èƒ½å¼ºå¤§ï¼Œä½†å­˜åœ¨ä¸€ä¸ªè¢«ç§°ä¸ºâ€œ<strong>ç€è‰²å™¨ç¼–è¯‘å¡é¡¿ (Shader Compilation Jank)</strong> â€çš„é—®é¢˜ã€‚å³å½“ä¸€ä¸ªå¤æ‚çš„åŠ¨ç”»æˆ–æ•ˆæœé¦–æ¬¡å‡ºç°æ—¶ï¼ŒSkia éœ€è¦åœ¨è¿è¡Œæ—¶åŠ¨æ€ç¼–è¯‘å…¶æ‰€éœ€çš„ç€è‰²å™¨ï¼ˆShaderï¼‰ï¼Œè¿™ä¸ªç¼–è¯‘è¿‡ç¨‹å¯èƒ½å¯¼è‡´é›¶ç‚¹å‡ ç§’çš„æ‰å¸§ï¼Œå½±å“é¦–æ¬¡ä½“éªŒçš„æµç•…åº¦ã€‚</li>
<li><strong>Impeller å¼•æ“</strong>ï¼šä¸ºäº†æ ¹æ²»æ­¤é—®é¢˜ï¼ŒFlutter å¼€å‘äº†æ–°çš„æ¸²æŸ“å¼•æ“ Impellerï¼ˆç›®å‰åœ¨ iOS ä¸Šå·²é»˜è®¤å¯ç”¨ï¼‰ã€‚Impeller çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼Œå®ƒä¼šåœ¨ App æ„å»ºæ—¶<strong>é¢„ç¼–è¯‘æ‰€æœ‰å¯èƒ½ç”¨åˆ°çš„ç€è‰²å™¨</strong>ã€‚è¿™æ ·ï¼Œåœ¨è¿è¡Œæ—¶å°±ä¸å†æœ‰ç¼–è¯‘å¼€é”€ï¼Œä»æ ¹æœ¬ä¸Šæ¶ˆé™¤äº†â€œé¦–æ¬¡å¡é¡¿â€ç°è±¡ï¼Œä½¿å¾—åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœå¦‚é»„æ²¹èˆ¬ä¸æ»‘ã€‚</li>
</ul>
</li>
<li>
<p><strong>é€»è¾‘ä¸åŸç”Ÿé€šä¿¡ï¼šPlatform Channels</strong><br/>
å½“ Flutter éœ€è¦ä¸å¹³å°åŸç”ŸæœåŠ¡ï¼ˆå¦‚è“ç‰™ã€ç”µé‡ã€ç›¸æœºï¼‰äº¤äº’æ—¶ï¼Œå®ƒä½¿ç”¨ä¸€ç§åä¸ºÂ <strong>Platform Channels</strong>Â çš„æœºåˆ¶ã€‚è¿™æ˜¯ä¸€ç§ç±»ä¼¼äº JSBridge çš„å¼‚æ­¥æ¶ˆæ¯ä¼ é€’ç³»ç»Ÿï¼ŒåŒæ ·æ¶‰åŠæ•°æ®åºåˆ—åŒ–ã€‚ä½†å…³é”®åŒºåˆ«åœ¨äºï¼š<strong>Flutter ä»…åœ¨éœ€è¦è°ƒç”¨åŸç”ŸæœåŠ¡æ—¶æ‰ä½¿ç”¨å®ƒï¼Œè€Œ UI æ¸²æŸ“å®Œå…¨ä¸ä¾èµ–å®ƒ</strong>ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒRN çš„æ—§æ¶æ„ä¸­ï¼Œæ¯ä¸€æ¬¡ UI æ›´æ–°éƒ½éœ€è¦è·¨æ¡¥é€šä¿¡ã€‚</p>
</li>
</ul>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// Dart ä»£ç </span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-comment">// è¿™ä¸ª Container, Center, Text éƒ½æ˜¯ Flutter è‡ªå·±ç”»çš„</span>
    <span class="hljs-comment">// å’ŒåŸç”Ÿç³»ç»Ÿçš„ UI ç»„ä»¶åº“æ²¡æœ‰ä»»ä½•å…³ç³»</span>
    <span class="hljs-keyword">return</span> Container(
      color: Colors.blue,
      child: Center(
        child: Text(
          <span class="hljs-string">'Hello, I drew this myself!'</span>,
          style: TextStyle(color: Colors.white),
        ),
      ),
    );
  }
}
</code></pre>
<ul>
<li><strong>æ€»ç»“</strong><br/>
Flutter çš„æ¶æ„é€‰æ‹©äº†ä¸€æ¡â€œå¤§åŒ…å¤§æ½â€çš„é“è·¯ã€‚é€šè¿‡ AOT ç¼–è¯‘å’Œè‡ªç»˜å¼•æ“ï¼Œå®ƒåœ¨è·¨å¹³å° UI æ¸²æŸ“çš„<strong>æ€§èƒ½</strong>å’Œ<strong>ä¸€è‡´æ€§</strong>ä¸Šè¾¾åˆ°äº†å·…å³°ã€‚è¿™ç§æ¶æ„ç¡®ä¿äº†å¤æ‚çš„ UI ä¹Ÿèƒ½ç¨³å®šè¿è¡Œåœ¨ 60/120fpsï¼Œä»£ä»·æ˜¯æ›´å¤§çš„åˆå§‹åŒ…ä½“å’Œä¸åŸç”Ÿ UI ç”Ÿæ€çš„éš”ç¦»ã€‚</li>
</ul>
<h2 data-id="heading-8">ç¯‡ç« ä¸‰ï¼šå·…å³°å¯¹å†³ï¼šåˆ°åº•è°æ‰æ˜¯â€œæµç•…åº¦ä¹‹ç‹â€ï¼Ÿ</h2>
<p>èŠäº†è¿™ä¹ˆå¤šåº•å±‚ï¼Œæœ€ç»ˆéƒ½è¦åæ˜ åœ¨ç”¨æˆ·æŒ‡å°–çš„æ„Ÿå—ä¸Šã€‚æˆ‘ä»¬æ¥ä¸€åœºä¸å®¢è§‚ã€ä½†å¾ˆçœŸå®çš„â€œ60/120 FPS æ»šåŠ¨ä¸åŠ¨ç”»â€æµç•…åº¦å¯¹å†³ã€‚</p>
<ul>
<li>
<p>ğŸ¥‡Â <strong>å¹¶åˆ—ç‹è€…ï¼šåŸç”Ÿ iOS / Flutter (Impeller å¼•æ“)</strong></p>
<ul>
<li><strong>åŸç”Ÿ iOS</strong>ï¼šäº²å„¿å­ï¼Œä¸å¤šè§£é‡Šã€‚æœ€å°çš„ç³»ç»Ÿå¼€é”€ï¼Œæœ€ç›´æ¥çš„ç¡¬ä»¶è®¿é—®ã€‚</li>
<li><strong>Flutter (Impeller)</strong> ï¼šå‡­å€Ÿ Impeller å¼•æ“çš„â€œæå‰å¤‡æˆ˜â€ç­–ç•¥å’Œ Dart AOT ç¼–è¯‘æˆåŸç”Ÿæœºå™¨ç çš„â€œè‚Œè‚‰è®°å¿†â€ï¼ŒFlutter åœ¨ UI æ¸²æŸ“ä¸Šå‡ ä¹æŠ¹å¹³äº†ä¸åŸç”Ÿçš„å·®è·ã€‚å®ƒå°±åƒä¸€ä¸ªé¡¶çº§çš„æ¸¸æˆå¼•æ“ï¼Œç›®æ ‡å°±æ˜¯ç¨³å®šåœ°â€œåˆ·å¸§â€ï¼Œåœ¨ UI å¯†é›†å‹åº”ç”¨ä¸­ï¼Œå®ƒçš„è¡¨ç°ä»¤äººæƒŠå¹ã€‚</li>
</ul>
</li>
<li>
<p>ğŸ¥ˆÂ <strong>ç™½é“¶éª‘å£«ï¼šåŸç”Ÿ Android</strong></p>
<ul>
<li>æ€§èƒ½åŒæ ·é¡¶çº§ã€‚ä½†ç”±äºå®‰å“æœºå‹ç¢ç‰‡åŒ–å’Œ JVM å¶å°”çš„ GC (åƒåœ¾å›æ”¶) åœé¡¿ï¼Œåœ¨æŸäº›ä½ç«¯è®¾å¤‡æˆ–æç«¯æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šå‡ºç°äººçœ¼å¯æ„ŸçŸ¥çš„å¾®å°å¡é¡¿ã€‚ä½†è¿™ä¾ç„¶æ˜¯æ ‡æ†çº§çš„å­˜åœ¨ã€‚</li>
</ul>
</li>
<li>
<p>ğŸ¥‰Â <strong>é’é“œè´µæ—ï¼šReact Native (æ–°æ¶æ„)</strong></p>
<ul>
<li>åˆ«è¯¯ä¼šï¼Œâ€œé’é“œâ€åªæ˜¯ç›¸å¯¹äºå‰é¢å‡ ä¸ªâ€œæ€ªç‰©â€è€Œè¨€ã€‚åœ¨æ–°æ¶æ„çš„åŠ æŒä¸‹ï¼ŒRN åœ¨ç»å¤§å¤šæ•°åœºæ™¯ä¸‹å·²ç»éå¸¸æµç•…ã€‚ä½†å®ƒçš„â€œåŸç½ªâ€åœ¨äºï¼Œ<strong>JS çº¿ç¨‹ä¾ç„¶æ˜¯ä¸šåŠ¡é€»è¾‘çš„ä¸­å¿ƒ</strong>ã€‚å½“ä½ çš„ JS çº¿ç¨‹å¿™äºå¤„ç†å¤æ‚è®¡ç®—æˆ–æµ·é‡æ•°æ®æ—¶ï¼Œå®ƒä¼ é€’ç»™ UI çº¿ç¨‹çš„â€œå¿ƒçµæ„Ÿåº”â€å°±å¯èƒ½å»¶è¿Ÿï¼Œå¯¼è‡´åŠ¨ç”»æ‰å¸§ã€‚è™½ç„¶æœ‰ â€œWorkletsâ€ ç­‰æŠ€æœ¯åœ¨åŠªåŠ›ç»•å¼€è¿™ä¸ªé—®é¢˜ï¼Œä½†è¿™ä¸ªæ¶æ„æ€§ç‰¹ç‚¹å†³å®šäº†å®ƒçš„ç†è®ºä¸Šé™ç•¥ä½äº Flutterã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-9">æœ€ç»ˆç« ï¼šWebå‰ç«¯ï¼Œä½ çš„è·¯åœ¨ä½•æ–¹ï¼Ÿ</h2>
<p>å¥½äº†ï¼Œæ•…äº‹è®²å®Œäº†ï¼Œæˆ‘ä»¬å›åˆ°ç°å®ã€‚</p>
<ul>
<li><strong>å¦‚æœä½ æƒ³â€œé™ç»´æ‰“å‡»â€å°ç¨‹åºï¼Œæˆ–å¿«é€Ÿå°† Web åº”ç”¨ App åŒ–</strong>ï¼š<br/>
<code>uni-app</code>Â æ˜¯ä½ çš„ä¸äºŒä¹‹é€‰ã€‚ç”¨ä½ æœ€ç†Ÿæ‚‰çš„ Vueï¼Œå¿«é€Ÿå‡ºæ´»ï¼Œæˆæœ¬æœ€ä½ã€‚æ¥å—å®ƒçš„å¤©èŠ±æ¿ï¼Œç”¨å®ƒæ¥è§£å†³ 80% çš„å¸¸è§„éœ€æ±‚ã€‚</li>
<li><strong>å¦‚æœä½ æ˜¯ React æ­»å¿ ï¼Œå›¢é˜ŸæŠ€æœ¯æ ˆç»Ÿä¸€</strong>ï¼š<br/>
æ‹¥æŠ±Â <code>React Native</code>Â çš„æ–°æ¶æ„ã€‚å®ƒèƒ½è®©ä½ åœ¨ç§»åŠ¨ç«¯çš„ä¸–ç•Œé‡Œæœ€å¤§åŒ–åœ°å¤ç”¨ä½ çš„ React çŸ¥è¯†ã€‚ç”Ÿæ€åºå¤§ï¼Œç¤¾åŒºæ´»è·ƒï¼Œæ‰¾è§£å†³æ–¹æ¡ˆä¹Ÿæ›´å®¹æ˜“ã€‚</li>
<li><strong>å¦‚æœä½ è¿½æ±‚æè‡´çš„è·¨å¹³å°ä½“éªŒï¼Œä¸ç•æƒ§å­¦ä¹ ï¼Œæƒ³æˆä¸ºâ€œå…¨èƒ½è‰ºæœ¯å®¶â€</strong> ï¼š<br/>
<strong>æˆ‘ä¸ªäººï¼Œæ¯«æ— ä¿ç•™åœ°æ¨èä½ ï¼Œå’Œæˆ‘ä¸€æ ·ï¼Œè·³è¿›Â <code>Flutter</code>Â çš„â€œå‘â€é‡Œ</strong>ã€‚å®ƒå¯èƒ½éœ€è¦ä½ ä»˜å‡ºä¸€ä¸ªå‘¨æœ«å»å­¦ä¹  Dartï¼Œä½†å®ƒå›é¦ˆç»™ä½ çš„æ˜¯ä¸€ä¸ªæ€§èƒ½é€¼è¿‘åŸç”Ÿã€UI è¡¨ç°åŠ›ç™»å³°é€ æã€æœªæ¥å……æ»¡æƒ³è±¡åŠ›çš„å…¨æ–°ä¸–ç•Œã€‚ä»è¢« WebView æ€§èƒ½æŸç¼šï¼Œåˆ°ç”¨ Flutter éšå¿ƒæ‰€æ¬²åœ°ç»˜åˆ¶ UIï¼Œè¿™ç§ä»â€œå·¥åŒ â€åˆ°â€œè‰ºæœ¯å®¶â€çš„èœ•å˜ï¼Œå¸¦æ¥çš„æˆå°±æ„Ÿæ˜¯æ— ä¸ä¼¦æ¯”çš„ã€‚</li>
</ul>
<p><strong>æŠ€æœ¯çš„æ¼”è¿›ï¼Œæ°¸æ— æ­¢å¢ƒã€‚</strong> Â RN åœ¨åŠªåŠ›å¡«å¹³â€œæ¡¥â€çš„é¸¿æ²Ÿï¼ŒFlutter åœ¨ä¸æ–­æ‰“ç£¨è‡ªå·±çš„â€œç”»ç¬”â€ã€‚æ²¡æœ‰æœ€å¥½çš„æŠ€æœ¯ï¼Œåªæœ‰æœ€é€‚åˆä½ å’Œä½ çš„ä¸šåŠ¡åœºæ™¯çš„æŠ€æœ¯ã€‚</p>
<p>ä»ä¸€ä¸ª Web å‰ç«¯å‡ºå‘ï¼Œè¿™æ¡è·¯æˆ–è®¸é™¡å³­ï¼Œä½†æ²¿é€”çš„é£æ™¯ï¼Œç»å¯¹å€¼å¾—ä½ ä¸ºä¹‹æ”€ç™»ã€‚ä½ æ”¶è·çš„å°†ä¸ä»…ä»…æ˜¯å†™å‡º App çš„èƒ½åŠ›ï¼Œæ›´æ˜¯å¯¹å›¾å½¢å­¦ã€æ“ä½œç³»ç»Ÿã€ç¼–è¯‘åŸç†æ›´æ·±å±‚æ¬¡çš„æ´å¯Ÿã€‚</p>
<p>è€Œè¿™äº›ï¼Œå°†è®©ä½ æ— è®ºå°†æ¥å›åˆ° Webï¼Œè¿˜æ˜¯ç»§ç»­åœ¨ç§»åŠ¨ç«¯æ·±è€•ï¼Œéƒ½ç«™å¾—æ›´é«˜ï¼Œçœ‹å¾—æ›´è¿œã€‚</p>
<h2 data-id="heading-10">å¾€æœŸæ–‡ç« å›é¡¾</h2>
<h4 data-id="heading-11">Flutter å›¾ç‰‡ç¼–è¾‘å™¨</h4>
<ul>
<li><a href="https://juejin.cn/post/7571067260053585946" target="_blank" title="https://juejin.cn/post/7571067260053585946">æ˜é‡‘æ–‡ç« </a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Fflutter_monitor_sdk" target="_blank" title="https://pub.dev/packages/flutter_monitor_sdk" ref="nofollow noopener noreferrer">pubdev</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxinqingaa%2Fflutter_monitor_sdk" target="_blank" title="https://github.com/xinqingaa/flutter_monitor_sdk" ref="nofollow noopener noreferrer">github</a></li>
</ul>
<h4 data-id="heading-12">Flutter å…¨é“¾è·¯ç›‘æ§ SDK</h4>
<ul>
<li><a href="https://juejin.cn/post/7564977973260173338" target="_blank" title="https://juejin.cn/post/7564977973260173338">æ˜é‡‘æ–‡ç« </a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Fflutter_img_editor" target="_blank" title="https://pub.dev/packages/flutter_img_editor" ref="nofollow noopener noreferrer">pubdev</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxinqingaa%2Fflutter_img_editor" target="_blank" title="https://github.com/xinqingaa/flutter_img_editor" ref="nofollow noopener noreferrer">github</a></li>
</ul>
<h4 data-id="heading-13">Flutter å…¨åœºæ™¯å¼¹æ¡†</h4>
<ul>
<li><a href="https://juejin.cn/post/7538324216594726950" target="_blank" title="https://juejin.cn/post/7538324216594726950">æ˜é‡‘æ–‡ç« </a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Funified_popups" target="_blank" title="https://pub.dev/packages/unified_popups" ref="nofollow noopener noreferrer">pubdev</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxinqingaa%2Funified_popups" target="_blank" title="https://github.com/xinqingaa/unified_popups" ref="nofollow noopener noreferrer">github</a></li>
</ul>
<h4 data-id="heading-14">Flutteræ—¥å†ç»„ä»¶</h4>
<ul>
<li><a href="https://juejin.cn/post/7531976064496123931" target="_blank" title="https://juejin.cn/post/7531976064496123931">æ˜é‡‘æ–‡ç« </a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Fomni_calendar_view" target="_blank" title="https://pub.dev/packages/omni_calendar_view" ref="nofollow noopener noreferrer">pubdev</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxinqingaa%2Fomni_calendar_view" target="_blank" title="https://github.com/xinqingaa/omni_calendar_view" ref="nofollow noopener noreferrer">github</a></li>
</ul>
<h4 data-id="heading-15">æ—¥æœŸé€‰æ‹©å™¨</h4>
<ul>
<li>
<p><a href="https://juejin.cn/post/7524159959480991753" target="_blank" title="https://juejin.cn/post/7524159959480991753">æ˜é‡‘æ–‡ç« </a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Fomni_date_picker" target="_blank" title="https://pub.dev/packages/omni_date_picker" ref="nofollow noopener noreferrer">pubdev</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxinqingaa%2Fomni_date_picker" target="_blank" title="https://github.com/xinqingaa/omni_date_picker" ref="nofollow noopener noreferrer">github</a></p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äº”åˆ†é’Ÿå®æˆ˜ Compose å±•å¼€/æ”¶èµ·åŠ¨ç”»]]></title>    <link>https://juejin.cn/post/7576130918078251043</link>    <guid>https://juejin.cn/post/7576130918078251043</guid>    <pubDate>2025-11-25T00:56:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576130918078251043" data-draft-id="7573892650816077839" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äº”åˆ†é’Ÿå®æˆ˜ Compose å±•å¼€/æ”¶èµ·åŠ¨ç”»"/> <meta itemprop="keywords" content="Android,Kotlin"/> <meta itemprop="datePublished" content="2025-11-25T00:56:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RockByte"/> <meta itemprop="url" content="https://juejin.cn/user/1046390797768519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äº”åˆ†é’Ÿå®æˆ˜ Compose å±•å¼€/æ”¶èµ·åŠ¨ç”»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1046390797768519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RockByte
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T00:56:34.000Z" title="Tue Nov 25 2025 00:56:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="xcode">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#000}.xml .hljs-meta{color:silver}.hljs-comment,.hljs-quote{color:#007400}.hljs-attribute,.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-tag{color:#aa0d91}.hljs-template-variable,.hljs-variable{color:#3f6e74}.hljs-code,.hljs-meta-string,.hljs-string{color:#c41a16}.hljs-link,.hljs-regexp{color:#0e0eff}.hljs-bullet,.hljs-number,.hljs-symbol,.hljs-title{color:#1c00cf}.hljs-meta,.hljs-section{color:#643820}.hljs-built_in,.hljs-builtin-name,.hljs-class .hljs-title,.hljs-params,.hljs-type{color:#5c2699}.hljs-attr{color:#836c28}.hljs-subst{color:#000}.hljs-formula{background-color:#eee;font-style:italic}.hljs-addition{background-color:#baeeba}.hljs-deletion{background-color:#ffc8bd}.hljs-selector-class,.hljs-selector-id{color:#9b703f}.hljs-doctag,.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64b2a54f63f94ca7a3529032a1b7e8f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764636993&amp;x-signature=bL%2BUaRKB%2BMIDFnmKPgGF8nenGDc%3D" alt="0.png" loading="lazy"/></p>
<p>å‡è®¾ä½ æ­£åœ¨ä½¿ç”¨ Jetpack Compose æ„å»ºä¸€ä¸ªå±å¹•ç•Œé¢ï¼Œå¹¶ä¸”å¸Œæœ›å®ç°æŸäº›å†…å®¹çš„å±•å¼€æˆ–æ”¶èµ·æ•ˆæœ â€”â€” æ¯”å¦‚å¸¸è§é—®é¢˜è§£ç­”éƒ¨åˆ†ã€ä¸‹æ‹‰é¢æ¿æˆ–ç­›é€‰èœå•ã€‚</p>
<p>ä½ å¯èƒ½ä¼šæƒ³ï¼š</p>
<p>æˆ‘è¦å¦‚ä½•å®ç°å¹³æ»‘çš„è¿‡æ¸¡æ•ˆæœå‘¢ï¼Ÿ</p>
<p>å¥½æ¶ˆæ¯æ˜¯ï¼šJetpack Compose è®©è¿™ä¸ªéœ€æ±‚å˜å¾—ç›¸å½“å®¹æ˜“å®ç°ã€‚</p>
<p>è¯¥ç¯‡æ–‡ç« ï¼Œè®©æˆ‘ä¸ºå¤§å®¶è¯¦ç»†ä»‹ç»å¤„ç†å±•å¼€/æ”¶èµ·åŠ¨ç”»çš„æ‰€æœ‰å®ç”¨æ–¹æ³• â€”â€” æ¯ç§æ–¹æ³•éƒ½é€‚ç”¨äºä¸åŒçš„ç”¨ä¾‹ã€‚</p>
<h2 data-id="heading-0">é«˜åº¦çš„å¹³æ»‘å¢é•¿</h2>
<p>å‡è®¾ä½ æœ‰ä¸€ä¸ªæ–¹å—ï¼Œå½“ç”¨æˆ·ç‚¹å‡»å®ƒæ—¶ï¼Œä¸‹æ–¹ä¼šæ˜¾ç¤ºä¸€äº›å†…å®¹ï¼Œè€Œä½ å¸Œæœ›æ•´ä¸ªè¿‡ç¨‹èƒ½å¤Ÿè‡ªç„¶å±•å¼€ï¼Œä¸å‡ºç°è·³åŠ¨ã€‚</p>
<p>å¯¹äºè¿™ç§æƒ…å†µï¼ŒJetpack Compose æœ‰ä¸€ä¸ªéå¸¸å®ç”¨çš„ä¿®é¥°ç¬¦ï¼š<code>animateContentSize()</code>ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ExpandableBox</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> expanded <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-literal">false</span>) }
    Column(modifier = Modifier
        .clickable { expanded = !expanded }
        .background(Color.DarkGray)
        .padding(<span class="hljs-number">16.</span>dp)
        .animateContentSize() <span class="hljs-comment">// é«˜åº¦å˜åŒ–äº§ç”ŸåŠ¨ç”»</span>
    ) {
        Text(<span class="hljs-string">"Q: What is Compose?"</span>, color = Color.White)
        <span class="hljs-keyword">if</span> (expanded) {
            Text(
                <span class="hljs-string">"A: It's a modern UI toolkit for Android that replaces XML."</span>, color = Color.LightGray, modifier = Modifier.padding(top = <span class="hljs-number">8.</span>dp)
            )
        }
    }
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e8abbf6e52f48849732afa0b3e768d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764636993&amp;x-signature=jXMRnachA4o%2BMvAIOEMsoRKgLHk%3D" alt="11.gif" loading="lazy"/></p>
<p>åªéœ€è¦è¿™ä¸€ä¸ªä¿®é¥°ç¬¦â€”â€”å°±è¿™æ ·ï¼Œæ¯å½“é«˜åº¦å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±èƒ½å®ç°å¹³æ»‘è¿‡æ¸¡ã€‚</p>
<p>å½“ç„¶ï¼Œå®ƒçš„å·¥ä½œåŸç†å®é™…ä¸Šæ˜¯è¿™æ ·çš„ï¼š</p>
<p>å½“ä½ å°† <code>animateContentSize</code> åº”ç”¨åˆ°ä¸€ä¸ª <code>Composable</code> ä¸Šæ—¶ï¼ŒCompose ä¼šç›‘å¬è¯¥ç»„ä»¶å†…å®¹å®½é«˜çš„å˜åŒ–ã€‚å¦‚æœå†…å®¹å°ºå¯¸å‘ç”Ÿå˜åŒ–ï¼ˆä¾‹å¦‚ï¼Œå› ä¸ºå†…éƒ¨æ–‡æœ¬å˜é•¿ã€å­å…ƒç´ å¢åˆ ç­‰ï¼‰ï¼Œå®ƒä¼šè‡ªåŠ¨åœ¨æ—§å°ºå¯¸å’Œæ–°å°ºå¯¸ä¹‹é—´æ‰§è¡Œä¸€ä¸ªå¹³æ»‘çš„è¿‡æ¸¡åŠ¨ç”»ã€‚</p>
<h2 data-id="heading-1">æ·¡å…¥æ·¡å‡ºä¸æ»‘åŠ¨</h2>
<p>å¦‚æœä½ ä¸åªæ˜¯æƒ³å¢åŠ é«˜åº¦ï¼Œè¿˜å¸Œæœ›å†…å®¹åœ¨å¯è§æ—¶æ·¡å…¥ã€æ»‘å…¥æˆ–æ”¾å¤§ã€‚</p>
<p>è¿™å°±æ¥åˆ°äº† <code>AnimatedVisibility()</code> çš„ç”¨æ­¦ä¹‹åœ°ã€‚</p>
<p>å‡è®¾ä½ æœ‰ä¸€ä¸ªç”¨äºæ˜¾ç¤º/éšè—é¢æ¿çš„åˆ‡æ¢æŒ‰é’®ã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•å·§å¦™åœ°å®ç°åŠ¨ç”»æ•ˆæœï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ToggleInfoPanel</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> show <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-literal">true</span>) }
    
    Column(modifier = Modifier.padding(<span class="hljs-number">16.</span>dp)) {
        Button(onClick = { show = !show }) {
            Text(<span class="hljs-keyword">if</span> (show) <span class="hljs-string">"Hide Info"</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"Show Info"</span>)
        }
        AnimatedVisibility(
            visible = show, enter = fadeIn() + slideInVertically(), exit = fadeOut() + slideOutVertically()
        ) {
            Box(
                Modifier
                    .fillMaxWidth()
                    .background(Color.Magenta)
                    .padding(<span class="hljs-number">16.</span>dp)
            ) {
                Text(<span class="hljs-string">"This is a toggleable info section"</span>, color = Color.White)
            }
        }
    }
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47b901f4c52f41f4ae75b4bac16b8928~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764636993&amp;x-signature=Z4uYBkiHbGu2XDjbcrGRJM%2Bf%2FFU%3D" alt="2.gif" loading="lazy"/></p>
<p>åœ¨è¿™é‡Œï¼Œä½ æ§åˆ¶çš„æ˜¯å®ƒå¦‚ä½•å‡ºç°æˆ–æ¶ˆå¤±ï¼Œè€Œä¸ä»…ä»…æ˜¯å®ƒæ˜¯å¦æ˜¾ç¤ºã€‚</p>
<p><code>AnimatedVisibility()</code> åŒ…è£¹å¦ä¸€ä¸ª <code>Composable</code>ï¼Œå¹¶æ ¹æ®å…¶ <code>visible</code> çš„å€¼ï¼ˆ<code>true</code>/<code>false</code>ï¼‰æ¥å†³å®šæ˜¯å¦æ˜¾ç¤ºå†…éƒ¨å†…å®¹ã€‚å½“ <code>visible</code> çŠ¶æ€æ”¹å˜æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨æ‰§è¡ŒæŒ‡å®šçš„è¿›å…¥åŠ¨ç”»æˆ–é€€å‡ºåŠ¨ç”»ã€‚</p>
<h2 data-id="heading-2">å‚ç›´å±•å¼€/æ”¶èµ·çš„æ»‘åŠ¨é¢æ¿</h2>
<p>å‡è®¾ä½ æ­£åœ¨æ„å»ºä¸€ä¸ªç­›é€‰ä¸‹æ‹‰èœå•æˆ–æ‰‹é£ç´å¼éƒ¨åˆ†ï¼Œå¹¶ä¸”å¸Œæœ›å®ƒåœ¨å±•å¼€æ—¶ä»é¡¶éƒ¨å‘ä¸‹æ»‘åŠ¨æ‰“å¼€ï¼Œåœ¨æ”¶èµ·æ—¶å‘ä¸Šæ”¶ç¼©å›å»ã€‚</p>
<p>ä½ å¯ä»¥åœ¨Â <code>AnimatedVisibility()</code>Â ä¸­ä½¿ç”¨Â <code>expandVertically()</code>Â å’ŒÂ <code>shrinkVertically()</code>ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">FilterDropdown</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> expanded <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-literal">false</span>) }
    Column(modifier = Modifier.padding(<span class="hljs-number">16.</span>dp)) {

        Text(<span class="hljs-string">"Filters"</span>, modifier = Modifier
            .clickable { expanded = !expanded }
            .background(Color.Gray)
            .padding(<span class="hljs-number">12.</span>dp), color = Color.White)

        AnimatedVisibility(
            visible = expanded, enter = expandVertically(), exit = shrinkVertically()
        ) {
            Column(
                Modifier
                    .fillMaxWidth()
                    .background(Color.LightGray)
                    .padding(<span class="hljs-number">16.</span>dp)
            ) {
                Text(<span class="hljs-string">"Sort by Price"</span>)
                Text(<span class="hljs-string">"Sort by Rating"</span>)
                Text(<span class="hljs-string">"Sort by Availability"</span>)
            }
        }
    }
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa5d12b179b749daad88cd609a0b53dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764636993&amp;x-signature=GYby4y4yqCPFI7NVixaAHXdmlNA%3D" alt="3.gif" loading="lazy"/></p>
<p>æµç•…çš„å‚ç›´æ»‘åŠ¨æ•ˆæœï¼Œéå¸¸é€‚åˆå¯å±•å¼€çš„é¢æ¿ã€‚</p>
<h2 data-id="heading-3">å¤šä¸ªå…ƒç´ çš„åŠ¨ç”»</h2>
<p>å¦‚æœä½ æƒ³è®©é«˜åº¦ã€èƒŒæ™¯é¢œè‰²å’Œé€æ˜åº¦åœ¨å±•å¼€æ—¶åŒæ­¥è¿›è¡ŒåŠ¨ç”»å¤„ç†ï¼Œè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p>
<p>è½®åˆ° <code>updateTransition()</code> å¤§æ˜¾èº«æ‰‹äº†ã€‚å®ƒçš„ä½¿ç”¨ç¨å¾®å¤æ‚ä¸€äº›ï¼Œä½†èƒ½è®©ä½ å®Œå…¨æŒæ§åŠ¨ç”»æ•ˆæœï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">FancyExpandBox</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> expanded <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-literal">false</span>) }
    <span class="hljs-keyword">val</span> transition = updateTransition(targetState = expanded, label = <span class="hljs-string">"transition"</span>)
    <span class="hljs-keyword">val</span> txtSize <span class="hljs-keyword">by</span> transition.animateInt(label = <span class="hljs-string">"text"</span>) {
        <span class="hljs-keyword">if</span> (it) <span class="hljs-number">24</span> <span class="hljs-keyword">else</span> <span class="hljs-number">14</span>
    }
    <span class="hljs-keyword">val</span> height <span class="hljs-keyword">by</span> transition.animateDp(label = <span class="hljs-string">"height"</span>) {
        <span class="hljs-keyword">if</span> (it) <span class="hljs-number">200.</span>dp <span class="hljs-keyword">else</span> <span class="hljs-number">60.</span>dp
    }
    <span class="hljs-keyword">val</span> bgColor <span class="hljs-keyword">by</span> transition.animateColor(label = <span class="hljs-string">"color"</span>) {
        <span class="hljs-keyword">if</span> (it) Color.Blue <span class="hljs-keyword">else</span> Color.Gray
    }
    <span class="hljs-keyword">val</span> alpha <span class="hljs-keyword">by</span> transition.animateFloat(label = <span class="hljs-string">"alpha"</span>) {
        <span class="hljs-keyword">if</span> (it) <span class="hljs-number">1f</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0.5f</span>
    }
    Box(
        modifier = Modifier
            .clickable { expanded = !expanded }
            .fillMaxWidth()
            .height(height)
            .background(bgColor.copy(alpha = alpha))
            .padding(<span class="hljs-number">16.</span>dp)
    ) {
        Text(<span class="hljs-string">"Tap to expand or collapse"</span>, color = Color.White, fontSize = txtSize.sp)
    }
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47ab002bcdb04b9aa4d72fc3b6a09ff3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764636993&amp;x-signature=0jUVQU9C1p9GBfW5FLF%2Fuc9V0yw%3D" alt="4.gif" loading="lazy"/></p>
<p><em>è¯¥æ–¹æ³•éœ€è¦æ·»åŠ  <code>androidx.compose.animation:animation-core</code> ä¾èµ–ã€‚</em></p>
<p>ä½ å¯ä»¥åœ¨è¿™é‡Œå¯¹ä»»ä½•å±æ€§è¿›è¡ŒåŠ¨ç”»å¤„ç† â€”â€” è¾¹è·ã€å½¢çŠ¶ã€æ–‡å­—å¤§å° â€”â€” å®ƒä»¬éƒ½ä¼šä¸€èµ·è¿‡æ¸¡å˜åŒ–ã€‚</p>
<p><code>updateTransition</code> æ˜¯ä¸€ä¸ªçŠ¶æ€é©±åŠ¨çš„åŠ¨ç”»åè°ƒå™¨ã€‚å®ƒé€šè¿‡è§‚å¯Ÿä¸€ä¸ªå…³é”®çŠ¶æ€çš„å˜åŒ–ï¼Œè‡ªåŠ¨ç®¡ç†ä¸€ç»„ç›¸å…³è§†è§‰å±æ€§çš„åŠ¨ç”»ï¼Œå°†å®ƒä»¬ä»æ—§çŠ¶æ€çš„ç›®æ ‡å€¼æµç•…åœ°è¿‡æ¸¡åˆ°æ–°çŠ¶æ€çš„ç›®æ ‡å€¼ï¼Œéå¸¸é€‚åˆå¤„ç†å¤æ‚çš„ã€å¤šæ­¥éª¤çš„ UI çŠ¶æ€åˆ‡æ¢åŠ¨ç”»ã€‚</p>
<h2 data-id="heading-4">ä¸ºå¸ƒå±€æƒé‡åšåŠ¨ç”»</h2>
<p>å¦‚æœä½ æœ‰ä¸¤ä¸ªé¢æ¿å¹¶æ’æ”¾ç½®æˆ–å‚ç›´å †å ï¼Œå¹¶ä¸”å¸Œæœ›ä¸€ä¸ªé¢æ¿å˜å¤§è€Œå¦ä¸€ä¸ªé¢æ¿å˜å° â€”â€” é‚£å°±å¯¹æƒé‡è¿›è¡ŒåŠ¨ç”»å¤„ç†ï¼</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">WeightAnimationDemo</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> expanded <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-literal">false</span>) }
    <span class="hljs-keyword">val</span> weight <span class="hljs-keyword">by</span> animateFloatAsState(targetValue = <span class="hljs-keyword">if</span> (expanded) <span class="hljs-number">0.8f</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0.3f</span>)
    Column(modifier = Modifier.height(<span class="hljs-number">200.</span>dp)) {
        Box(
            modifier = Modifier
                .weight(weight)
                .fillMaxWidth()
                .background(Color.Blue)
                .clickable { expanded = !expanded })
        Box(
            modifier = Modifier
                .weight(<span class="hljs-number">1f</span> - weight)
                .fillMaxWidth()
                .background(Color.DarkGray)
        )
    }
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7de6907433c345b494afb5efa2a24d16~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764636993&amp;x-signature=VKU%2BRViYZTo%2FR2c3ssKTFGFc114%3D" alt="5.gif" loading="lazy"/></p>
<p>ç‚¹å‡»é¡¶éƒ¨æ¡†ä¼šå¹³æ»‘åœ°è°ƒæ•´ä¸¤ä¸ªéƒ¨åˆ†çš„å¤§å°ã€‚</p>
<h2 data-id="heading-5">æ€»ç»“</h2>
<ul>
<li>å¦‚æœä½ çš„è§†å›¾åªæ˜¯å¤§å°å‘ç”Ÿå¢é•¿æˆ–ç¼©å° â€”â€” <code>animateContentSize()</code>ã€‚</li>
<li>å¦‚æœä½ æƒ³è¦æ·¡å…¥ã€æ»‘åŠ¨æˆ–ç¼©æ”¾åŠ¨ç”» â€”â€” <code>AnimatedVisibility()</code>ã€‚</li>
<li>å¯¹äºæ›´é«˜çº§çš„å¸ƒå±€å˜åŒ–æˆ–ç»„åˆæ•ˆæœ â€”â€” <code>updateTransition()</code>ã€‚</li>
<li>æƒ³è¦ä½¿ç”¨å¸ƒå±€æƒé‡è°ƒæ•´å¤§å°ï¼Ÿ â€”â€” <code>animateFloatAsState()</code>ã€‚</li>
</ul>
<p>ä¸€æ—¦ä½ ç†Ÿæ‚‰äº†è¿™äº›å·¥å…·ï¼Œä½ ä¼šå‘ç°åœ¨ Compose ä¸­æ„å»ºå¤§å¤šæ•°å±•å¼€/æ”¶èµ·çš„ç”¨æˆ·ç•Œé¢å˜å¾—è¶…çº§ç›´è§‚ â€”â€” è€Œä¸”å®ƒä»¬æ¯”ä½¿ç”¨ <code>XML</code> æ—¶æ›´åŠ æµç•…ï¼Œæ›´åŠ ç›´è§‚ï¼Œæ›´åŠ æ–¹ä¾¿ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¢è¯•å®˜è¯´: "ä½ æ€ä¹ˆæŠŠ Radio ç»„ä»¶ç©å‡ºèŠ±çš„ï¼Œæ•™æ•™æˆ‘ï¼ â€œ]]></title>    <link>https://juejin.cn/post/7576158801972969518</link>    <guid>https://juejin.cn/post/7576158801972969518</guid>    <pubDate>2025-11-25T01:59:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576158801972969518" data-draft-id="7571758212473536563" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¢è¯•å®˜è¯´: &quot;ä½ æ€ä¹ˆæŠŠ Radio ç»„ä»¶ç©å‡ºèŠ±çš„ï¼Œæ•™æ•™æˆ‘ï¼ â€œ"/> <meta itemprop="keywords" content="å‰ç«¯,å¼€æº"/> <meta itemprop="datePublished" content="2025-11-25T01:59:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­Ÿç¥¥_æˆéƒ½"/> <meta itemprop="url" content="https://juejin.cn/user/96412752684744"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¢è¯•å®˜è¯´: "ä½ æ€ä¹ˆæŠŠ Radio ç»„ä»¶ç©å‡ºèŠ±çš„ï¼Œæ•™æ•™æˆ‘ï¼ â€œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/96412752684744/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­Ÿç¥¥_æˆéƒ½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T01:59:53.000Z" title="Tue Nov 25 2025 01:59:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>é¢è¯•å®˜é—®æˆ‘ <code>radio</code> ç»„ä»¶çŸ¥é“æ€ä¹ˆå®ç°å—ï¼Ÿæˆ‘æŠŠæˆ‘çš„ç»„ä»¶åº“ <code>radio</code> ç½‘é¡µä¸¢ç»™å®ƒï¼Œæˆ‘è¯´æˆ‘è¿™ä¸ª <code>radio</code> ç»„ä»¶ä»€ä¹ˆæ ·å¼éƒ½æ”¯æŒï¼Œä½ çœ‹è¿™æ˜¯ä¼ ç»Ÿæ ·å¼ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75c2ad19d3cb4428a13e7c8a0399aa21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640792&amp;x-signature=ml%2BhD5AE6jLUQLfPnOhfj4l96Io%3D" alt="image.png" loading="lazy"/></p>
<p>ä½ çœ‹ï¼Œè¿™æ˜¯è‡ªå®šä¹‰æ ·å¼ï¼Œç†è®ºä¸Šä»€ä¹ˆæ ·å¼éƒ½å¯ä»¥ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de85c9e8911649baab344ed9773f44f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640792&amp;x-signature=iqFlFs2EvF0D0%2BMvItCLhOOOEfw%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9bf5a0123034518b14bb1f05482abef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640792&amp;x-signature=EBol8%2FM%2Bjpwly5V5FEZ%2BCVemlnY%3D" alt="image.png" loading="lazy"/></p>
<p>ç„¶åæˆ‘å˜¿å˜¿ä¸€ç¬‘è¯´ï¼š"æˆ‘çš„ <code>radio</code> ç»„ä»¶æœ¬è´¨ä¸Šä¸æ¶‰åŠä»»ä½•æ ·å¼ï¼Œåªè´Ÿè´£å²æœˆé™å¥½ï¼Œä½¿ç”¨è€…è´Ÿè´£è²Œç¾å¦‚èŠ±ï¼"</p>
<p>æœ€åé¢è¯•å®Œæ¯•ï¼Œé¢è¯•å®˜å¾ˆæ»¡æ„ï¼Œå¹¶é—®è¿™ä¸ªæ€ä¹ˆå®ç°çš„ï¼Œæˆ‘å°±å†™ä¸€ç¯‡æ–‡ç« æ¥è¯´è¯´å§ï¼</p>
<p>è¿™æ˜¯ä¸Šé¢ç»„ä»¶çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.frontlight.tech%2Fradio%2Fexample%2Ftailwind-traditional-example" target="_blank" title="https://www.frontlight.tech/radio/example/tailwind-traditional-example" ref="nofollow noopener noreferrer">ç½‘ç«™åœ°å€</a></p>
<p>æ›´å¤šç»„ä»¶åº“æ•™ç¨‹ï¼Œæ¬¢è¿åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flio-mengxiang%2Ft-ui" target="_blank" title="https://github.com/lio-mengxiang/t-ui" ref="nofollow noopener noreferrer">github</a> ä¸Šç»™ä¸ª starï¼ŒåŠ ç¾¤äº¤æµå“¦ï¼</p>
<p>æœ¬æ–‡ç« åŠæ›´å¤šæ¡ˆä¾‹å·²ç»åœ¨å®˜ç½‘ä¸Šäº†ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥å»çœ‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.frontlight.tech%2Fradio" target="_blank" title="https://www.frontlight.tech/radio" ref="nofollow noopener noreferrer">æœ¬æ–‡é“¾æ¥</a></p>
<h2 data-id="heading-1">å¯è‡ªå®šä¹‰çš„æ ¸å¿ƒ</h2>
<p>æ­£å¸¸çš„ <code>radio</code> ç»„ä»¶ä¸»è¦æ˜¯é€šè¿‡ <code>&lt;input&gt;</code> æ ‡ç­¾å±æ€§ <code>type="radio"</code> å®ç°çš„ï¼Œæµè§ˆå™¨éƒ½ä¼šæ˜¾ç¤ºä¸€ä¸ªé»˜è®¤çš„æ ·å¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6211bf2122614c088f5f3de73dbf1438~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640792&amp;x-signature=429AOW6GsoGnPXBmS0u5kKNk0jM%3D" alt="image.png" loading="lazy"/></p>
<p>æ‰€ä»¥æˆ‘ä»¬è¦è‡ªå®šä¹‰æ ·å¼ï¼Œå°±ä¸èƒ½ä½¿ç”¨åŸç”Ÿçš„ <code>radio</code>æ ·å¼ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä½ æ˜¯ä¸æ˜¯åªè¦å®ç°äº† <code>radio</code> å†…åœ¨çš„é€»è¾‘ï¼Œå…¶å®ä¹Ÿå°±æ˜¯å®ç°äº† <code>radio</code> ç»„ä»¶ï¼Œæœ‰äººä¼šé—®ï¼Ÿå†…åœ¨çš„é€»è¾‘æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<ul>
<li>å…¶ä¸€ï¼Œé€‰ä¸­æ€é€»è¾‘ï¼Œå°±æ˜¯å¤šä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬åªè¦ç‚¹å‡»ï¼Œå°±æ˜¯é€‰ä¸­æ€ï¼ˆcheckedï¼‰</li>
<li>å…¶äºŒï¼Œä¼ å…¥ <code>disabled</code> å‚æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªå…ƒç´ å°±ä¸èƒ½ç‚¹å‡»ï¼ˆæˆ–è€… <code>cursor</code>ï¼ˆä¹Ÿå°±æ˜¯é¼ æ ‡çš„çŠ¶æ€ï¼‰è®¾ç½®ä¸º <code>not-allowed</code> ä¹Ÿå°±æ˜¯ä¸å¯é€‰ä¸­ï¼‰</li>
<li>å…¶ä¸‰ï¼ŒåŸç”Ÿ <code>radio</code> å¹¶ä¸æ”¯æŒ  <code>readyonly</code> çŠ¶æ€ï¼Œä½†æˆ‘ä»¬è‡ªå®šä¹‰ç»„ä»¶åº”è¯¥å®ç°ï¼Œåœ¨è¡¨å•ä¸­ï¼Œ <code>readyonly</code> æ˜¯ä¸€ç§å¾ˆå¸¸è§çš„ä¸šåŠ¡éœ€æ±‚ã€‚æ‰€ä»¥ä¼ å…¥ <code>readyonly</code> å‚æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªå…ƒç´ å°±ä¸èƒ½æ”¹å˜çŠ¶æ€ï¼Œåªèƒ½çœ‹ã€‚</li>
<li>æœ€åæœ€æœ€é‡è¦çš„é€»è¾‘æ˜¯å¤šä¸ª <code>radio</code> å…ƒç´ ç»„åˆæ—¶ï¼Œä½ åªèƒ½é€‰ä¸­å…¶ä¸­ä¸€ä¸ªï¼Œå³å•é€‰çš„é€»è¾‘ã€‚</li>
</ul>
<p>æ‰€ä»¥æˆ‘ä»¬åªè¦å®ç°äº†ä¸Šè¿°é€»è¾‘ï¼Œé‚£å°±æ˜¯è·ŸåŸç”Ÿçš„å•é€‰å°±æ²¡æœ‰åŒºåˆ«äº†ã€‚</p>
<p>ä½†é—®é¢˜æ¥äº†ï¼Œèƒ½ä¸èƒ½æ—¢ä¿æŒ <code>radio</code> ç»„ä»¶çš„åŸæœ¬çš„é€»è¾‘ï¼Œè¿˜èƒ½æ”¯æŒè‡ªå®šä¹‰å‘¢ï¼Ÿä¹Ÿå°±æ˜¯ç”¨æˆ·å¦‚æœè¿˜æ˜¯å¸Œæœ›ä½¿ç”¨åŸç”Ÿ <code>radio</code> æˆ‘ä»¬æ”¯æŒï¼Œè‡ªå®šä¹‰ä¹Ÿæ”¯æŒå‘¢ï¼Ÿè¿™æ ·çš„è¯ï¼Œè¯­ä¹‰æ€§å®Œå¥½çš„åŸºç¡€ä¸Šè¿˜èƒ½è‡ªç”±æ‹“å±•ï¼Œç®€ç›´å®Œç¾ï¼</p>
<p>ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œæˆ‘ä»¬çš„ç»„ä»¶å°±æ˜¯è¿™æ ·çš„ã€‚</p>
<p>åœ¨ä»‹ç»æ ¸å¿ƒé€»è¾‘ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¯´ä¸€ä¸ªå°æŠ€å·§ã€‚</p>
<h2 data-id="heading-2">radio ç»„ä»¶åŸºæœ¬ç»“æ„</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6211bf2122614c088f5f3de73dbf1438~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640792&amp;x-signature=429AOW6GsoGnPXBmS0u5kKNk0jM%3D" alt="image.png" loading="lazy"/></p>
<p>é¦–å…ˆå…ˆä»‹ç»ä¸€ä¸€ä¸ªå°æŠ€å·§ï¼Œå¦‚ä¸Šå›¾ï¼Œä¸€èˆ¬ <code>radio</code> åŒ…å«äº†ä¸€ä¸ªåœ†åœˆè¡¨ç¤ºæ˜¯å¦é€‰ä¸­ï¼Œåœ†åœˆçš„å³è¾¹æ˜¯æ–‡å­—ï¼Œæ­£å¸¸æ¥è¯´ï¼Œæˆ‘ä»¬ç‚¹å‡»åœ†åœˆæ‰èƒ½é€‰ä¸­ï¼Œå¯è¿™äº›ç»„ä»¶åº“å¦‚ä½•å®ç°çš„ç‚¹å‡»åœ†åœˆå³è¾¹çš„æ–‡å­—ä¹Ÿèƒ½é€‰ä¸­åœ†åœˆå‘¢ï¼Ÿè¿™å°±æ¶‰åŠåˆ° <code>&lt;label&gt;</code> æ ‡ç­¾äº†ã€‚</p>
<p>å¦‚ä¸Šå›¾æ˜¯ <code>MDN</code> ä¸­çš„æ–¹å¼:</p>
<pre><code class="hljs language-html" lang="html">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"huey"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"drone"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"huey"</span> <span class="hljs-attr">checked</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"huey"</span>&gt;</span>Huey<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<ul>
<li>é¦–å…ˆéœ€è¦åœ¨ <code>input</code> ä¸Šä½¿ç”¨ <code>id</code> å±æ€§</li>
<li>ç„¶ååœ¨ <code>label</code> ç»„ä»¶ä¸Šä½¿ç”¨ <code>for</code>å±æ€§ï¼Œè·Ÿ <code>id</code> çš„å€¼ä¸€è‡´å³å¯å®ç°ç‚¹å‡» <code>label</code> æ ‡ç­¾å°±èƒ½é€‰ä¸­å¯¹åº”çš„ <code>radio</code></li>
</ul>
<p>ä½†è¿™ç§æ–¹å¼æ¯”è¾ƒç¹çï¼Œæˆ‘ä»¬çš„ç»„ä»¶ä½¿ç”¨çš„å¦ä¸€ç§æ–¹å¼è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼Œå°±æ˜¯ <code>label</code> å°† <code>input</code> æ ‡ç­¾åŒ…è£¹å°±å¥½ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"huey"</span> /&gt;</span>
huey
<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
</code></pre>
<p>å¥½äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¢³ç†ä¸€ä¸‹çŠ¶æ€çš„åˆ‡æ¢é€»è¾‘ï¼Œè¿™æ ·æˆ‘ä»¬å®ç°èµ·æ¥å°±æœ‰ä¸€ä¸ªè“å›¾ï¼š</p>
<ul>
<li>é¦–å…ˆç‚¹å‡» <code>label</code> ï¼Œä¹Ÿå°±æ˜¯ç»‘å®šåœ¨  <code>label</code> ä¸Šçš„ <code>onClick</code> äº‹ä»¶</li>
<li>ç„¶åè¿™ä¸ª <code>onClick</code> äº‹ä»¶ä¼šè§¦å‘ <code>input</code>ï¼ˆradioï¼‰ ä¸Šçš„ <code>onClick</code> äº‹ä»¶</li>
<li><code>input</code> ä¸Šçš„ <code>onClick</code> äº‹ä»¶ä¼šè§¦å‘è‡ªèº«çš„ <code>onChange</code> äº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯é€‰ä¸­çš„value å€¼åœ¨ <code>onChange</code> çš„æ—¶å€™å¯ä»¥è®¾ç½®ä¸ºç‚¹å‡»çš„ <code>input</code> çš„å€¼ï¼Œ
<ul>
<li>è¿™é‡Œæœ‰äº›æ–°åŒå­¦å¯èƒ½ä¸çŸ¥é“ <code>input</code> è¿™ç±»è¡¨å•å…ƒç´ ï¼Œç›®çš„å°±æ˜¯æ”¶é›†å€¼ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥ä¼ å…¥ <code>value</code> å±æ€§ã€‚</li>
</ul>
</li>
</ul>
<p>æ•´ä½“é€»è¾‘å¾ˆæ¸…æ™°ï¼Œä¹Ÿå¾ˆç®€å•ï¼Œä½†å…¶ä¸­çš„å‘ä¸å°‘ï¼Œæˆ‘ä»¬æŠŠå‘ä»‹ç»å®Œï¼ŒåŸºæœ¬ä¸Šä½ å°±å¯ä»¥å®ç°ä¸€ä¸ªè‡ªå·±çš„ <code>radio</code> ç»„ä»¶äº†</p>
<h2 data-id="heading-3">æ ¸å¿ƒé€»è¾‘æ¢³ç†</h2>
<p>å¦‚ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬ç¬¬ä¸€æ­¥æ˜¯ç»™ <code>label</code> æ ‡ç­¾ç»‘å®š <code>onClick</code> äº‹ä»¶ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript">  <span class="hljs-keyword">const</span> onLabelClick = <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) {
    <span class="hljs-comment">// åªè¯»æˆ–ç¦ç”¨æ—¶ï¼Œé˜»æ­¢ç‚¹å‡»äº§ç”Ÿä»»ä½•è¡Œä¸º</span>
    <span class="hljs-keyword">if</span> (disabled || readonly) {
      e.<span class="hljs-title function_">preventDefault</span>();
      <span class="hljs-keyword">return</span>;
    }
    rest?.<span class="hljs-property">onClick</span>?.(e);
  };

</code></pre>
<p>éœ€è¦æ³¨æ„</p>
<ul>
<li>å½“å¤–ç•Œä¼ å…¥ <code>disabled</code> æˆ–è€… <code>readonly</code> å‚æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç›´æ¥ <code>return</code></li>
<li>æ³¨æ„è¦ä½¿ç”¨ <code> e.preventDefault();</code> æ¥ç»„ç»‡é»˜è®¤äº‹ä»¶ï¼Œé»˜è®¤äº‹ä»¶å°±æ˜¯ç‚¹å‡» <code>label</code> è§¦å‘ <code>input</code> çš„ <code>onClick</code> äº‹ä»¶ï¼Œä»è€Œé˜»æ­¢<code>input</code> ä¸Šå€¼è¢«é€‰ä¸­</li>
</ul>
<p>ç„¶åéœ€è¦ç»™ <code>input</code> ç»‘å®š <code>onClick</code> äº‹ä»¶</p>
<pre><code class="hljs language-javascript" lang="javascript">onClick={<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
   <span class="hljs-comment">// é˜»æ­¢ input çš„ç‚¹å‡»äº‹ä»¶å†’æ³¡ï¼Œé¿å…é‡å¤å¤„ç†</span>
   e.<span class="hljs-title function_">stopPropagation</span>();
}}
</code></pre>
<p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯</p>
<ul>
<li>è°ƒç”¨ <code>e.stopPropagation();</code> é˜²æ­¢ç”¨æˆ·åœ¨ç›´æ¥ç‚¹å‡» <code>input</code>ï¼ˆradioï¼‰ çš„æ—¶å€™ï¼Œäº‹ä»¶å†’æ³¡åˆ° <code>label</code> æ ‡ç­¾ï¼Œä»è€Œå¤šæ¬¡è§¦å‘ <code>label</code> çš„ <code>onClick</code> äº‹ä»¶ã€‚</li>
</ul>
<p>æœ€åï¼Œå°±æ˜¯åœ¨ <code>input</code> ç»‘å®š <code>onChange</code> äº‹ä»¶</p>
<pre><code class="hljs language-javascript" lang="javascript"> <span class="hljs-keyword">const</span> [checked, setChecked] = <span class="hljs-title function_">useMergeValue</span>(<span class="hljs-literal">false</span>, {
    <span class="hljs-attr">value</span>: propsChecked,
    <span class="hljs-attr">defaultValue</span>: mergeProps.<span class="hljs-property">defaultChecked</span>,
  });
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onChange</span> = (<span class="hljs-params">e</span>) =&gt; {
    e.<span class="hljs-title function_">persist</span>();
    e.<span class="hljs-title function_">stopPropagation</span>();

    <span class="hljs-comment">// ç¦ç”¨æˆ–åªè¯»éƒ½ä¸æ”¹å˜çŠ¶æ€ï¼Œä¸è§¦å‘å¤–éƒ¨ onChange</span>
    <span class="hljs-keyword">if</span> (disabled || readonly) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">if</span> (context.<span class="hljs-property">group</span>) {
      context?.<span class="hljs-property">onChangeValue</span>?.(value, e);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!(<span class="hljs-string">'checked'</span> <span class="hljs-keyword">in</span> props) &amp;&amp; !checked) {
      <span class="hljs-title function_">setChecked</span>(<span class="hljs-literal">true</span>);
    }
    <span class="hljs-keyword">if</span> (!checked) {
      propsOnChange?.(<span class="hljs-literal">true</span>, e);
    }
  };
</code></pre>
<p>å…¶ä¸­ç»†èŠ‚å¾ˆå¤šï¼Œæˆ‘ä»¬ç®€å•è¯´ä¸€ä¸‹ï¼š</p>
<ul>
<li><code>e.persist();</code> åœ¨ <code>react</code> 17 ä¹‹å‰éœ€è¦ï¼ˆç°åœ¨éƒ½å·²ç» 19 ç‰ˆæœ¬ï¼Œæ˜¯å¯ä»¥åˆ æ‰è¿™è¡Œä»£ç çš„ï¼‰ï¼Œå¤§æ¦‚ä»‹ç»ä¸‹å®ƒçš„ä½œç”¨</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// React 16 åŠä¹‹å‰ç‰ˆæœ¬çš„é—®é¢˜ï¼Œåœ¨ setTimeout ä¸­æ— æ³•è·å¾—æ­£å¸¸çš„äº‹ä»¶å¯¹è±¡çš„å€¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params">e</span>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">type</span>); <span class="hljs-comment">// æ­£å¸¸è®¿é—®</span>
  
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">type</span>); <span class="hljs-comment">// null æˆ– undefinedï¼</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">target</span>); <span class="hljs-comment">// nullï¼</span>
  }, <span class="hljs-number">1000</span>);
};
</code></pre>
<ul>
<li><code>e.stopPropagation();</code> é˜»æ­¢äº‹ä»¶å†’æ³¡
<ul>
<li>å¦‚æœ Radio åµŒå¥— Radioï¼Œç‚¹å‡»é‡Œé¢çš„ Radio å°±ä¼šè®© <code>onChnage</code> äº‹ä»¶å†’æ³¡åˆ°å¤–å±‚å»ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬å¸Œæœ›çš„ï¼Œæ‰€ä»¥éš”ç¦»ä¸€ä¸‹</li>
</ul>
</li>
<li><code>if (disabled || readonly) return;</code> æ£€æŸ¥æ˜¯å¦æ˜¯ disabled æˆ–è€… readonly çŠ¶æ€ï¼Œè¿™æ ·çš„çŠ¶æ€ä¸èƒ½è®©å®ƒè§¦å‘ <code>onChange</code> äº‹ä»¶</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span> (context.<span class="hljs-property">group</span>) {
  context?.<span class="hljs-property">onChangeValue</span>?.(value, e);
}
</code></pre>
<p>è¿™ä¸ªæˆ‘ä»¬æš‚ä¸”ä¸è®²ï¼Œæ˜¯è¦é…åˆ <code>Radio.Group</code> ç»„ä»¶ä½¿ç”¨ï¼Œè¿™ä¸ª context æ˜¯ä½¿ç”¨ <code>useContext</code> api è·å–çš„ <code>Radio.Group</code> é€ä¼ çš„æ•°æ®ã€‚ä¹Ÿå°±æ˜¯çŠ¶æ€æœ€ç»ˆä¼šè¢«  <code>Radio.Group</code> æ¥ç®¡ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript">} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!(<span class="hljs-string">'checked'</span> <span class="hljs-keyword">in</span> props) &amp;&amp; !checked) {
  <span class="hljs-title function_">setChecked</span>(<span class="hljs-literal">true</span>);
}
</code></pre>
<ul>
<li>
<p>ä½œç”¨ï¼šç‹¬ç«‹ä½¿ç”¨æ—¶çš„çŠ¶æ€ç®¡ç†</p>
</li>
<li>
<p><code>!('checked' in props)</code>ï¼šæ£€æŸ¥æ˜¯å¦æ˜¯<strong>éå—æ§ç»„ä»¶</strong>ï¼Œè¿™æ˜¯è¯†åˆ«æ˜¯å¦æ˜¯å—æ§è¿˜æ˜¯éå—æ§ç»„ä»¶çš„å…³é”®ã€‚</p>
<ul>
<li>æ²¡æœ‰ä¼ å…¥Â <code>checked</code>Â prop â†’ ç»„ä»¶è‡ªå·±ç®¡ç†çŠ¶æ€</li>
</ul>
</li>
</ul>
<p>è¿™é‡Œéå¸¸éå¸¸ç»†èŠ‚ï¼Œæœ‰äººå¯èƒ½ç–‘æƒ‘äº†ï¼Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Œè€Œä¸æ˜¯ç”¨ <code>checked === undefined</code> æ¥åˆ¤æ–­ï¼Œå› ä¸ºä¸ä¼ çš„å€¼é»˜è®¤ä¸æ˜¯ <code>undefined</code> å—ï¼Ÿæˆ‘ä»¬æ¥è§£é‡Šä¸€ä¸‹</p>
<p>å¤§å®¶éœ€è¦æ³¨æ„ï¼Œå‡è®¾ä½ è¿™æ ·ä¼ å…¥ <code>checked</code> å‚æ•°</p>
<pre><code class="hljs language-ini" lang="ini">&lt;Radio <span class="hljs-attr">checked</span>={undefiend} /&gt;
</code></pre>
<ul>
<li><code>'checked' in props</code> å¾—åˆ°çš„æ˜¯ <code>true</code> å› ä¸ºä½ è¿˜æ˜¯ä¼ äº† <code>undefined</code> å€¼</li>
</ul>
<p>åªæœ‰è¿™æ ·</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Radio</span> /&gt;</span>
</code></pre>
<ul>
<li><code>'checked' in props</code> å¾—åˆ°çš„æ˜¯ <code>false</code>, ä¹Ÿå°±æ˜¯ä»€ä¹ˆä¹Ÿæ²¡ä¼ ï¼Œä»£è¡¨æ˜¯éå—æ§ç»„ä»¶ã€</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript">} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!(<span class="hljs-string">'checked'</span> <span class="hljs-keyword">in</span> props) &amp;&amp; !checked) {
  <span class="hljs-title function_">setChecked</span>(<span class="hljs-literal">true</span>);
}
</code></pre>
<p>ç„¶å <code> setChecked(true);</code> è¿™ä¸ªå¾ˆå…³é”®ï¼Œæœ‰çš„äººè¯´ï¼Œ<code>!('checked' in props)</code> ä¸æ˜¯ä»£è¡¨éå—æ§ç»„ä»¶å—ï¼Œéå—æ§ç»„ä»¶æ˜¯ç»„ä»¶è‡ªå·±æ§åˆ¶å€¼ï¼Œæ€ä¹ˆè¿˜æœ‰ç›´æ¥ <code>setCheck</code> æ§åˆ¶ï¼Œè¿™ä¸æ˜¯å—æ§ç»„ä»¶çš„æ§åˆ¶çš„æ–¹å¼å—ï¼Ÿ</p>
<p>è¿™é‡Œéœ€è¦è§£é‡Šä¸¤ç‚¹</p>
<ul>
<li>
<p>é¦–å…ˆï¼Œå¾ˆå¤šç»„ä»¶åº“ï¼Œä¸€èˆ¬éƒ½ä¼šç”¨å—æ§çš„å½¢å¼æ¥æ¨¡æ‹Ÿéå—æ§ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬è¦ç¡®ç¡®å®å®æ‹¿åˆ° Radio ç»„ä»¶çš„ <code>checked</code>ï¼ˆé€‰ä¸­ï¼‰ è¿˜æ˜¯ é <code>checked</code> çŠ¶æ€ï¼Œå¦‚æœéƒ½äº¤ç»™åŸç”Ÿï¼Œæˆ‘ä»¬è·å–å¾ˆä¸æ–¹ä¾¿</p>
</li>
<li>
<p>å…¶æ¬¡ <code>useMergeValue</code> æ˜¯ç»„ä»¶åº“å¾ˆå¸¸ç”¨å‡½æ•°ï¼Œå®ƒæŠŠå—æ§å’Œéå—æ§ç»„åˆèµ·æ¥ï¼Œæ˜¯ä¸ªéå¸¸å®ç”¨çš„å‡½æ•°ï¼Œæˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸‹é€»è¾‘ã€‚ç›¸ä¿¡ä½ å†™ç»„ä»¶åº“ä¹Ÿä¸€å®šä¼šç”¨åˆ°ã€‚</p>
</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-string">'use client'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useEffect, useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { isUndefined } <span class="hljs-keyword">from</span> <span class="hljs-string">'../utils'</span>;
<span class="hljs-keyword">import</span> { usePrevious } <span class="hljs-keyword">from</span> <span class="hljs-string">'./use-previous'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> useMergeValue&lt;T&gt;(
  <span class="hljs-attr">defaultStateValue</span>: T,
  props?: {
    defaultValue?: T;
    value?: T;
  },
): [T, <span class="hljs-title class_">React</span>.<span class="hljs-property">Dispatch</span>&lt;<span class="hljs-title class_">React</span>.<span class="hljs-property">SetStateAction</span>&lt;T&gt;&gt;, T] {
  <span class="hljs-keyword">const</span> { defaultValue, value } = props || {};
  <span class="hljs-keyword">const</span> firstRenderRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">true</span>);
  <span class="hljs-keyword">const</span> prevPropsValue = <span class="hljs-title function_">usePrevious</span>(props?.<span class="hljs-property">value</span>);

  <span class="hljs-keyword">const</span> [stateValue, setStateValue] = useState&lt;T&gt;(
    !<span class="hljs-title function_">isUndefined</span>(value) ? value : !<span class="hljs-title function_">isUndefined</span>(defaultValue) ? defaultValue : defaultStateValue,
  );

  <span class="hljs-comment">// å—æ§è½¬ä¸ºéå—æ§çš„æ—¶å€™ï¼Œéœ€è¦åšè½¬æ¢å¤„ç†</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (firstRenderRef.<span class="hljs-property">current</span>) {
      firstRenderRef.<span class="hljs-property">current</span> = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">if</span> (value === <span class="hljs-literal">undefined</span> &amp;&amp; prevPropsValue !== value) {
      <span class="hljs-title function_">setStateValue</span>(value);
    }
  }, [value]);

  <span class="hljs-keyword">const</span> mergedValue = <span class="hljs-title function_">isUndefined</span>(value) ? stateValue : value;

  <span class="hljs-keyword">return</span> [mergedValue, setStateValue, stateValue];
}
</code></pre>
<p>è¿™é‡Œç®€å•è§£é‡Šä¸€ä¸‹ï¼Œå…¶å®å°±æ˜¯ä½ ä¼ äº†Â <code>value</code>Â æˆ‘å°±è®¤ä¸ºä½ æ˜¯å—æ§ç»„ä»¶ï¼Œç„¶åÂ <code>value</code>Â å°±é€ä¼ å‡ºå»ï¼ŒÂ <code>defaultValue</code>Â æˆ–è€…ç»„ä»¶åº“æƒ³é»˜è®¤ç»™ä¸ªé»˜è®¤å€¼ï¼Œ æˆ‘ä¼šç”¨è¿™ä¸ªå€¼å…¶åˆå§‹åŒ–Â <code>stateValue</code>Â ç„¶åä¼ å‡ºå»ã€‚å¹¶ä¸”Â <code>setStateValue</code>Â æ–¹æ³•èƒ½æ”¹å˜å…¶å€¼ã€‚</p>
<p><code>setStateValue</code>Â å…¶å®åœ¨ä¼ å…¥Â <code>value</code>Â çš„æƒ…å†µä¸‹ï¼Œä¹Ÿæ²¡ä»€ä¹ˆç”¨ï¼Œå› ä¸ºæ”¹å˜ä¸äº†Â <code>value</code>Â çš„å€¼ã€‚</p>
<h2 data-id="heading-4">å¦‚ä½•å°†çŠ¶æ€ä¼ é€’ç»™å­ç»„ä»¶</h2>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>context</code> apiï¼Œå°†æœ€ç»ˆçš„ <code>checked</code>, <code>disabled</code>, <code>readonly</code> çŠ¶æ€è®©å­ç»„ä»¶ä½¿ç”¨ <code>useContext</code> æ¥è·å–ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript">    &lt;<span class="hljs-title class_">RadioContext</span>.<span class="hljs-property">Provider</span> value={{ checked, disabled, readonly }}&gt;
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span> {<span class="hljs-attr">...rest</span>} <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onLabelClick}</span> <span class="hljs-attr">aria-disabled</span>=<span class="hljs-string">{!!disabled}</span> <span class="hljs-attr">aria-readonly</span>=<span class="hljs-string">{!!readonly}</span> <span class="hljs-attr">aria-checked</span>=<span class="hljs-string">{!!checked}</span>&gt;</span>
        {/* ä¸ºä»€ä¹ˆæ²¡æœ‰ readonly çŠ¶æ€ï¼Œ æ ‡å‡†é‡Œæœ¬æ¥ä¹Ÿæ²¡æœ‰ */}
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span>&gt;</span>
        {children}
      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">RadioContext.Provider</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-5">å¦‚ä½•ä¿æŒè¯­ä¹‰æ€§</h2>
<p>æˆ‘ä»¬åªéœ€è¦å°† <code>input</code> ç»„ä»¶ä¾ç„¶æ¥å—ä¹‹å‰æˆ‘ä»¬çš„çŠ¶æ€ï¼Œå°±èƒ½ä¿æŒåŸç”Ÿ <code>radio</code> ç»„ä»¶çš„è¯­ä¹‰æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬å®Œå–„ä¸€ä¸‹ <code>input</code> ç»„ä»¶,ä¹Ÿå°±æ˜¯æŠŠä¹‹å‰çš„çŠ¶æ€ä¼ é€’è¿‡å»å³å¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">    &lt;<span class="hljs-title class_">RadioContext</span>.<span class="hljs-property">Provider</span> value={{ checked, disabled, readonly }}&gt;
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span> {<span class="hljs-attr">...rest</span>} <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onLabelClick}</span> <span class="hljs-attr">aria-disabled</span>=<span class="hljs-string">{!!disabled}</span> <span class="hljs-attr">aria-readonly</span>=<span class="hljs-string">{!!readonly}</span> <span class="hljs-attr">aria-checked</span>=<span class="hljs-string">{!!checked}</span>&gt;</span>
        {/* ä¸ºä»€ä¹ˆæ²¡æœ‰ readonly çŠ¶æ€ï¼Œ æ ‡å‡†é‡Œæœ¬æ¥ä¹Ÿæ²¡æœ‰ */}
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">ref</span>=<span class="hljs-string">{inputRef}</span>
          <span class="hljs-attr">disabled</span>=<span class="hljs-string">{!!disabled}</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span>
          <span class="hljs-attr">checked</span>=<span class="hljs-string">{!!checked}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{onChange}</span>
          <span class="hljs-attr">onClick</span>=<span class="hljs-string">{(e)</span> =&gt;</span> {
            // é˜»æ­¢ input çš„ç‚¹å‡»äº‹ä»¶å†’æ³¡ï¼Œé¿å…é‡å¤å¤„ç†
            e.stopPropagation();
          }}
          aria-readonly={!!readonly}
        /&gt;
        {children}
      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span>
    &lt;/<span class="hljs-title class_">RadioContext</span>.<span class="hljs-property">Provider</span>&gt;
</code></pre>
<h2 data-id="heading-6">Radio Group é€»è¾‘</h2>
<p>è¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ <code>Radio Group</code> ç»„ä»¶åŒ…è£¹ä¸Šé¢æˆ‘ä»¬å®Œæˆçš„ <code>Radio</code> ç»„ä»¶ã€‚
æ ¸å¿ƒé€»è¾‘ä¸º, ä½¿ç”¨åŒæ ·æ˜¯ <code>useContext</code> apiï¼Œæˆ‘ä»¬å‘½åä¸º <code>RadioGroupContext</code> æ¥æŠŠå½“å‰é€‰ä¸­çš„ <code>Radio</code> æ ‡ç­¾çš„ <code>value</code> ä¼ é€’å³å¯ ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">    &lt;div role=<span class="hljs-string">"radiogroup"</span> {...rest}&gt;
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">RadioGroupContext.Provider</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span>
          <span class="hljs-attr">onChangeValue</span>,
          <span class="hljs-attr">type</span>,
          <span class="hljs-attr">value</span>,
          <span class="hljs-attr">disabled</span>,
          <span class="hljs-attr">readonly</span>,
          <span class="hljs-attr">group:</span> <span class="hljs-attr">true</span>,
          <span class="hljs-attr">name</span>,
        }}
      &gt;</span>
        {children}
      <span class="hljs-tag">&lt;/<span class="hljs-name">RadioGroupContext.Provider</span>&gt;</span></span>
    &lt;/div&gt;
</code></pre>
<h2 data-id="heading-7">å°ç»“</h2>
<p>æ–‡ç« æŠŠä¸»è¦çš„æ ¸å¿ƒé€»è¾‘æ¢³ç†äº†ä¸€ä¸‹ï¼Œå¹¶æ²¡æœ‰è¿‡å¤šè§£é‡Šæ¯è¡Œä»£ç ã€‚å¦‚æœä½ æƒ³è®¨è®ºå…³äºå¦‚ä½•å®ç°è‡ªå·±ç»„ä»¶åº“çš„çš„å†…å®¹ï¼Œæ¬¢è¿åŠ ç¾¤ä¸€èµ·è®¨è®ºï¼Œç»„ä»¶è¿˜åœ¨ä¸æ–­æ‹“å±•ä¸­ï¼Œæœ€ç»ˆä¼šå¯¹æ ‡å¤§å‚ç»„ä»¶åº“ã€‚</p>
<p>å…¶å®å¯¹äºä¸€ä¸ªå‰ç«¯æ¥è¯´ï¼Œç»„ä»¶åº“ç®—æ˜¯å›Šæ‹¬æ‰€æœ‰æ—¥å¸¸å¸¸è§çš„å‰ç«¯æŠ€æœ¯äº†ï¼Œæ— è®ºæ˜¯å­¦ä¹ è¿˜æ˜¯é¢è¯•ï¼Œéƒ½æ˜¯ç»ä½³çš„é¡¹ç›®ã€‚</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.frontlight.tech%2F" target="_blank" title="https://www.frontlight.tech/" ref="nofollow noopener noreferrer">ç›®å‰çš„å®˜ç½‘</a></li>
<li>æ„Ÿè°¢ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flio-mengxiang%2Ft-ui" target="_blank" title="https://github.com/lio-mengxiang/t-ui" ref="nofollow noopener noreferrer">github ç‚¹èµ</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue 3æ ·å¼æ·±åº¦é€‰æ‹©å™¨ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦:deep()ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7576129509935546387</link>    <guid>https://juejin.cn/post/7576129509935546387</guid>    <pubDate>2025-11-24T23:42:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576129509935546387" data-draft-id="7576181242581647423" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue 3æ ·å¼æ·±åº¦é€‰æ‹©å™¨ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦:deep()ï¼Ÿ"/> <meta itemprop="keywords" content="Vue.js,JavaScript,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-24T23:42:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‰¯å±±æœ‰é£æ¥"/> <meta itemprop="url" content="https://juejin.cn/user/3940246036939358"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue 3æ ·å¼æ·±åº¦é€‰æ‹©å™¨ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦:deep()ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3940246036939358/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‰¯å±±æœ‰é£æ¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-24T23:42:23.000Z" title="Mon Nov 24 2025 23:42:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    46
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æ˜¯ä¸æ˜¯ä¹Ÿé‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ï¼Ÿåœ¨Vue 3é¡¹ç›®é‡Œï¼Œæƒ³è¦ä¿®æ”¹å­ç»„ä»¶æ ·å¼ï¼Œç»“æœå‘ç°ä¸ç®¡æ€ä¹ˆå†™CSSéƒ½ä¸ç”Ÿæ•ˆã€‚æ˜æ˜ä»£ç çœ‹èµ·æ¥æ²¡é—®é¢˜ï¼Œä½†æ ·å¼å°±æ˜¯æ— æ³•ç©¿é€åˆ°å­ç»„ä»¶å†…éƒ¨ã€‚</p>
<p>è¿™ç§æƒ…å†µåœ¨å‰ç«¯å¼€å‘ä¸­å¤ªå¸¸è§äº†ã€‚ç‰¹åˆ«æ˜¯åœ¨ä½¿ç”¨ç¬¬ä¸‰æ–¹UIåº“çš„æ—¶å€™ï¼Œæƒ³è¦å¾®è°ƒæŸä¸ªç»„ä»¶çš„æ ·å¼ï¼Œå´å‘ç°è‡ªå·±è¢«CSSä½œç”¨åŸŸé™åˆ¶å¾—æ­»æ­»çš„ã€‚</p>
<p>æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥äº†è§£Vue 3ä¸­çš„æ ·å¼æ·±åº¦é€‰æ‹©å™¨<code>:deep()</code>ï¼Œä»å®ƒè¯ç”Ÿçš„èƒŒæ™¯åˆ°å…·ä½“çš„ä½¿ç”¨æ–¹æ³•ï¼Œå†åˆ°å®é™…å¼€å‘ä¸­çš„æœ€ä½³å®è·µã€‚è¯»å®Œè¿™ç¯‡æ–‡ç« ï¼Œä½ å°†å½»åº•æŒæ¡å¦‚ä½•ä¼˜é›…åœ°è§£å†³ç»„ä»¶æ ·å¼ç©¿é€é—®é¢˜ï¼Œå†ä¹Ÿä¸ç”¨ä¸ºä¿®æ”¹å­ç»„ä»¶æ ·å¼è€Œå¤´ç–¼äº†ã€‚</p>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆéœ€è¦æ·±åº¦é€‰æ‹©å™¨ï¼Ÿ</h2>
<p>åœ¨ç†è§£<code>:deep()</code>ä¹‹å‰ï¼Œæˆ‘ä»¬å¾—å…ˆæ˜ç™½Vueç»„ä»¶æ ·å¼çš„ä½œç”¨åŸŸé—®é¢˜ã€‚Vueå•æ–‡ä»¶ç»„ä»¶ä¸­çš„<code>&lt;style&gt;</code>æ ‡ç­¾é»˜è®¤æ˜¯å…¨å±€ä½œç”¨åŸŸçš„ï¼Œè¿™æ„å‘³ç€ä½ åœ¨ä¸€ä¸ªç»„ä»¶é‡Œå†™çš„æ ·å¼å¯èƒ½ä¼šå½±å“åˆ°å…¶ä»–ç»„ä»¶ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒVueå¼•å…¥äº†<code>scoped</code>æ ·å¼ã€‚å½“ä½ åœ¨<code>&lt;style&gt;</code>æ ‡ç­¾ä¸Šæ·»åŠ <code>scoped</code>å±æ€§æ—¶ï¼ŒVueä¼šè‡ªåŠ¨ä¸ºç»„ä»¶ä¸­çš„æ¯ä¸ªå…ƒç´ æ·»åŠ ä¸€ä¸ªå”¯ä¸€çš„å±æ€§ï¼Œç„¶åé€šè¿‡å±æ€§é€‰æ‹©å™¨æ¥ç¡®ä¿æ ·å¼åªä½œç”¨äºå½“å‰ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"demo"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">child-component</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.demo</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
}

<span class="hljs-comment">/* è¿™ä¸ªæ ·å¼æ— æ³•å½±å“åˆ°child-componentå†…éƒ¨çš„å…ƒç´  */</span>
<span class="hljs-selector-class">.child-content</span> {
  <span class="hljs-attribute">color</span>: red; <span class="hljs-comment">/* ä¸ä¼šç”Ÿæ•ˆï¼ */</span>
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p>ä½†è¿™æ ·å¸¦æ¥äº†æ–°çš„é—®é¢˜ï¼šå½“æˆ‘ä»¬ç¡®å®éœ€è¦ä¿®æ”¹å­ç»„ä»¶æ ·å¼æ—¶ï¼Œä½œç”¨åŸŸæ ·å¼å°±æˆäº†éšœç¢ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œä½ ä½¿ç”¨äº†æŸä¸ªUIåº“çš„æŒ‰é’®ç»„ä»¶ï¼Œä½†éœ€è¦ç¨å¾®è°ƒæ•´å®ƒçš„å†…è¾¹è·ï¼Œè¿™æ—¶å€™è¯¥æ€ä¹ˆåŠï¼Ÿ</p>
<p>è¿™å°±æ˜¯æ·±åº¦é€‰æ‹©å™¨è¯ç”Ÿçš„åŸå› ã€‚å®ƒæä¾›äº†ä¸€ç§"ç©¿é€"ç»„ä»¶æ ·å¼ä½œç”¨åŸŸçš„æ–¹æ³•ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿåœ¨çˆ¶ç»„ä»¶ä¸­ä¿®æ”¹å­ç»„ä»¶çš„æ ·å¼ã€‚</p>
<h2 data-id="heading-1">:deep()çš„å‰ä¸–ä»Šç”Ÿ</h2>
<p>åœ¨Vue 2æ—¶ä»£ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>&gt;&gt;&gt;</code>ã€<code>/deep/</code>æˆ–<code>::v-deep</code>æ¥å®ç°æ ·å¼ç©¿é€ã€‚ä½†è¿™äº›è¯­æ³•å­˜åœ¨ä¸€äº›é—®é¢˜ï¼šæœ‰çš„å·²ç»è¢«CSSè§„èŒƒåºŸå¼ƒï¼Œæœ‰çš„æµè§ˆå™¨æ”¯æŒä¸ä¸€è‡´ï¼Œè¿˜æœ‰çš„å†™æ³•æ¯”è¾ƒå†—é•¿ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- Vue 2ä¸­çš„å„ç§æ·±åº¦é€‰æ‹©å™¨å†™æ³• --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-comment">/* åŸç”ŸCSSçš„æ·±åº¦é€‰æ‹©å™¨ï¼ŒæŸäº›æµè§ˆå™¨ä¸æ”¯æŒ */</span>
<span class="hljs-selector-class">.parent</span> &gt;&gt;&gt; <span class="hljs-selector-class">.child</span> { <span class="hljs-attribute">color</span>: red; }

<span class="hljs-comment">/* Sassç­‰é¢„å¤„ç†å™¨ä¸­çš„å†™æ³• */</span>
<span class="hljs-selector-class">.parent</span> /deep/ <span class="hljs-selector-class">.child</span> { <span class="hljs-attribute">color</span>: red; }

<span class="hljs-comment">/* Vueç‰¹æœ‰çš„è¯­æ³• */</span>
<span class="hljs-selector-class">.parent</span> ::v-deep .child { <span class="hljs-attribute">color</span>: red; }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p>Vue 3å›¢é˜Ÿåœ¨è®¾è®¡æ–°çš„æ ·å¼ç³»ç»Ÿæ—¶ï¼Œå†³å®šç»Ÿä¸€è¿™ä¸ªè¯­æ³•ã€‚ä»–ä»¬é€‰æ‹©äº†<code>:deep()</code>ä½œä¸ºæ–°çš„æ·±åº¦é€‰æ‹©å™¨ï¼Œè¿™æ—¢ç¬¦åˆCSSè§„èŒƒçš„å‘å±•è¶‹åŠ¿ï¼Œä¹Ÿæä¾›äº†æ›´å¥½çš„å¼€å‘ä½“éªŒã€‚</p>
<p><code>:deep()</code>æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªCSSä¼ªç±»ï¼Œå®ƒåœ¨ç¼–è¯‘æ—¶ä¼šè¢«Vueçš„å¤„ç†å·¥å…·è½¬æ¢ä¸ºé€‚å½“çš„é€‰æ‹©å™¨ï¼Œç¡®ä¿æ ·å¼èƒ½å¤Ÿæ­£ç¡®ç©¿é€åˆ°å­ç»„ä»¶ã€‚</p>
<h2 data-id="heading-2">:deep()çš„åŸºæœ¬ç”¨æ³•</h2>
<p>è®©æˆ‘ä»¬é€šè¿‡å‡ ä¸ªå®é™…çš„ä¾‹å­æ¥çœ‹çœ‹<code>:deep()</code>æ€ä¹ˆç”¨ã€‚</p>
<p>æœ€åŸºæœ¬çš„ç”¨æ³•å°±æ˜¯åœ¨éœ€è¦ç©¿é€åˆ°å­ç»„ä»¶çš„é€‰æ‹©å™¨å‰åŠ ä¸Š<code>:deep()</code>ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"parent"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">child-component</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"child-comp"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.parent</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
}

<span class="hljs-comment">/* ä½¿ç”¨:deep()ç©¿é€åˆ°å­ç»„ä»¶ */</span>
<span class="hljs-selector-class">.parent</span> :<span class="hljs-built_in">deep</span>(.child-comp) {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f0f0f0</span>;
}

<span class="hljs-comment">/* ä¹Ÿå¯ä»¥è¿™æ ·å†™ */</span>
:<span class="hljs-built_in">deep</span>(.child-comp) {
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;
}
</span></code></pre>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ä¿®æ”¹ç¬¬ä¸‰æ–¹ç»„ä»¶çš„æ ·å¼ã€‚æ¯”å¦‚ä½¿ç”¨Element Plusçš„æŒ‰é’®ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"custom-btn"</span>&gt;</span>
      è‡ªå®šä¹‰æŒ‰é’®
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.page</span> :<span class="hljs-built_in">deep</span>(.custom-btn) {
  <span class="hljs-comment">/* ä¿®æ”¹Element PlusæŒ‰é’®çš„å†…è¾¹è· */</span>
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span> <span class="hljs-number">24px</span>;
  
  <span class="hljs-comment">/* ä¿®æ”¹è¾¹æ¡†åŠå¾„ */</span>
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
  
  <span class="hljs-comment">/* ä¿®æ”¹èƒŒæ™¯é¢œè‰² */</span>
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#4f46e5</span>;
}

<span class="hljs-selector-class">.page</span> :<span class="hljs-built_in">deep</span>(.custom-btn:hover) {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#4338ca</span>;
}
</span></code></pre>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>:deep()</code>åº”è¯¥ç”¨åœ¨é€‰æ‹©å™¨çš„å¼€å¤´ï¼Œæˆ–è€…ç´§è·Ÿåœ¨çˆ¶é€‰æ‹©å™¨ä¹‹åã€‚é”™è¯¯çš„ä½¿ç”¨æ–¹å¼ä¼šå¯¼è‡´æ ·å¼ä¸ç”Ÿæ•ˆï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-comment">/* é”™è¯¯çš„å†™æ³• - :deep()ä¸èƒ½æ”¾åœ¨æœ€å */</span>
<span class="hljs-selector-class">.parent</span> <span class="hljs-selector-class">.child</span> :<span class="hljs-built_in">deep</span>() {
  <span class="hljs-attribute">color</span>: red;
}

<span class="hljs-comment">/* é”™è¯¯çš„å†™æ³• - é€‰æ‹©å™¨ç»“æ„ä¸åˆç† */</span>
:<span class="hljs-built_in">deep</span>() .parent .child {
  <span class="hljs-attribute">color</span>: red;
}

<span class="hljs-comment">/* æ­£ç¡®çš„å†™æ³• */</span>
<span class="hljs-selector-class">.parent</span> :<span class="hljs-built_in">deep</span>(.child) {
  <span class="hljs-attribute">color</span>: red;
}

:<span class="hljs-built_in">deep</span>(.parent .child) {
  <span class="hljs-attribute">color</span>: red;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h2 data-id="heading-3">å®é™…åœºæ™¯ä¸­çš„åº”ç”¨æŠ€å·§</h2>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°å„ç§éœ€è¦ä½¿ç”¨<code>:deep()</code>çš„åœºæ™¯ã€‚ä¸‹é¢åˆ†äº«å‡ ä¸ªå®ç”¨çš„æŠ€å·§ã€‚</p>
<p><strong>åœºæ™¯ä¸€ï¼šä¿®æ”¹UIç»„ä»¶åº“çš„é»˜è®¤æ ·å¼</strong></p>
<p>å‡è®¾æˆ‘ä»¬åœ¨ä½¿ç”¨Naive UIçš„è¡¨æ ¼ç»„ä»¶ï¼Œéœ€è¦è°ƒæ•´è¡¨å¤´çš„æ ·å¼ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"data-table"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">n-data-table</span>
      <span class="hljs-attr">:columns</span>=<span class="hljs-string">"columns"</span>
      <span class="hljs-attr">:data</span>=<span class="hljs-string">"data"</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"custom-table"</span>
    /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.data-table</span> :<span class="hljs-built_in">deep</span>(.custom-table .n-table-thead) {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f8fafc</span>;
  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;
}

<span class="hljs-selector-class">.data-table</span> :<span class="hljs-built_in">deep</span>(.custom-table .n-table-th) {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">16px</span> <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
}

<span class="hljs-selector-class">.data-table</span> :<span class="hljs-built_in">deep</span>(.custom-table .n-table-td) {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">13px</span>;
}
</span></code></pre>
<p><strong>åœºæ™¯äºŒï¼šåœ¨æ’æ§½å†…å®¹ä¸­åº”ç”¨æ ·å¼</strong></p>
<p>å½“ä½¿ç”¨æ’æ§½æ—¶ï¼Œæ’æ§½å†…å®¹çš„æ ·å¼ä¹Ÿéœ€è¦é€šè¿‡<code>:deep()</code>æ¥ç©¿é€ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">modal-dialog</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">header</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dialog-title"</span>&gt;</span>è‡ªå®šä¹‰æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">content</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dialog-content"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™é‡Œæ˜¯å¯¹è¯æ¡†å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">modal-dialog</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-comment">/* ä¿®æ”¹å¯¹è¯æ¡†å®¹å™¨çš„æ ·å¼ */</span>
:<span class="hljs-built_in">deep</span>(.modal-container) {
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">20px</span> <span class="hljs-number">25px</span> -<span class="hljs-number">5px</span> <span class="hljs-built_in">rgb</span>(<span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> / <span class="hljs-number">0.1</span>);
}

<span class="hljs-comment">/* ä¿®æ”¹æ’æ§½å†…å®¹çš„æ ·å¼ */</span>
:<span class="hljs-built_in">deep</span>(.dialog-title) {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#1f2937</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">16px</span>;
}

:<span class="hljs-built_in">deep</span>(.dialog-content) {
  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.6</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#6b7280</span>;
}
</span></code></pre>
<p><strong>åœºæ™¯ä¸‰ï¼šé…åˆCSSå˜é‡ä½¿ç”¨</strong></p>
<p><code>:deep()</code>è¿˜å¯ä»¥ä¸CSSå˜é‡ç»“åˆï¼Œå®ç°æ›´çµæ´»çš„æ ·å¼å®šåˆ¶ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"theme-wrapper"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">third-party-component</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"custom-theme"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.theme-wrapper</span> {
  <span class="hljs-comment">/* å®šä¹‰CSSå˜é‡ */</span>
  <span class="hljs-attr">--primary-color</span>: <span class="hljs-number">#3b82f6</span>;
  <span class="hljs-attr">--secondary-color</span>: <span class="hljs-number">#ef4444</span>;
  <span class="hljs-attr">--border-radius</span>: <span class="hljs-number">8px</span>;
}

<span class="hljs-selector-class">.theme-wrapper</span> :<span class="hljs-built_in">deep</span>(.custom-theme) {
  <span class="hljs-comment">/* åœ¨æ·±åº¦é€‰æ‹©å™¨ä¸­ä½¿ç”¨CSSå˜é‡ */</span>
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--primary-color);
  <span class="hljs-attribute">border-color</span>: <span class="hljs-built_in">var</span>(--secondary-color);
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-built_in">var</span>(--border-radius);
}

<span class="hljs-selector-class">.theme-wrapper</span> :<span class="hljs-built_in">deep</span>(.custom-theme .item) {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--primary-color);
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--border-radius) - <span class="hljs-number">2px</span>);
}
</span></code></pre>
<h2 data-id="heading-4">æ€§èƒ½ä¸æœ€ä½³å®è·µ</h2>
<p>è™½ç„¶<code>:deep()</code>å¾ˆå¼ºå¤§ï¼Œä½†æ»¥ç”¨ä¼šå¯¼è‡´æ ·å¼éš¾ä»¥ç»´æŠ¤å’Œæ€§èƒ½é—®é¢˜ã€‚ä¸‹é¢æ˜¯ä¸€äº›æœ€ä½³å®è·µå»ºè®®ï¼š</p>
<p><strong>1. å°½é‡å°‘ç”¨æ·±åº¦é€‰æ‹©å™¨</strong></p>
<p>æ·±åº¦é€‰æ‹©å™¨ç ´åäº†ç»„ä»¶çš„æ ·å¼å°è£…ï¼Œåº”è¯¥ä½œä¸ºæœ€åçš„æ‰‹æ®µã€‚ä¼˜å…ˆè€ƒè™‘é€šè¿‡propsä¼ é€’æ ·å¼é…ç½®ï¼Œæˆ–è€…ä½¿ç”¨CSSå˜é‡ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- ä¸æ¨èçš„å†™æ³•ï¼šè¿‡åº¦ä½¿ç”¨:deep() --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
:<span class="hljs-built_in">deep</span>(.child-component) {
  <span class="hljs-comment">/* å„ç§æ ·å¼è¦†ç›– */</span>
}

:<span class="hljs-built_in">deep</span>(.child-component .title) {
  <span class="hljs-comment">/* æ›´å¤šæ ·å¼è¦†ç›– */</span>
}

:<span class="hljs-built_in">deep</span>(.child-component .content) {
  <span class="hljs-comment">/* ç»§ç»­è¦†ç›– */</span>
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

<span class="hljs-comment">&lt;!-- æ¨èçš„å†™æ³•ï¼šé€šè¿‡CSSå˜é‡å®šåˆ¶ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">child-component</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"custom-child"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.custom-child</span> {
  <span class="hljs-attr">--child-primary-color</span>: <span class="hljs-number">#3b82f6</span>;
  <span class="hljs-attr">--child-padding</span>: <span class="hljs-number">16px</span>;
  <span class="hljs-attr">--child-border-radius</span>: <span class="hljs-number">8px</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p><strong>2. ä¿æŒé€‰æ‹©å™¨çš„ç®€æ´æ€§</strong></p>
<p>è¿‡äºå¤æ‚çš„é€‰æ‹©å™¨ä¼šå½±å“æ€§èƒ½ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§å‹åº”ç”¨ä¸­ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-comment">/* ä¸æ¨èï¼šé€‰æ‹©å™¨è¿‡äºå¤æ‚ */</span>
<span class="hljs-selector-class">.container</span> :<span class="hljs-built_in">deep</span>(.child &gt; .grandchild .item:first-of-type span.text) {
  <span class="hljs-attribute">color</span>: red;
}

<span class="hljs-comment">/* æ¨èï¼šå°½é‡ç®€åŒ–é€‰æ‹©å™¨ */</span>
<span class="hljs-selector-class">.container</span> :<span class="hljs-built_in">deep</span>(.text-highlight) {
  <span class="hljs-attribute">color</span>: red;
}
</span></code></pre>
<p><strong>3. ä½¿ç”¨æœ‰æ„ä¹‰çš„ç±»å</strong></p>
<p>ä¸ºéœ€è¦æ·±åº¦æ ·å¼çš„å…ƒç´ æ·»åŠ æœ‰æ„ä¹‰çš„ç±»åï¼Œæé«˜ä»£ç å¯è¯»æ€§ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">third-party-component</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"custom-styling"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-comment">/* æ¸…æ™°çš„ç±»åè®©ä»£ç æ›´æ˜“ç†è§£ */</span>
<span class="hljs-selector-class">.custom-styling</span> :<span class="hljs-built_in">deep</span>(.tp-button--primary) {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#10b981</span>;
}

<span class="hljs-selector-class">.custom-styling</span> :<span class="hljs-built_in">deep</span>(.tp-button--primary:hover) {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#059669</span>;
}
</span></code></pre>
<h2 data-id="heading-5">å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<p>åœ¨å®é™…ä½¿ç”¨<code>:deep()</code>æ—¶ï¼Œå¼€å‘è€…ç»å¸¸ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ã€‚è¿™é‡Œæ€»ç»“å‡ ä¸ªå¸¸è§çš„æƒ…å†µï¼š</p>
<p><strong>é—®é¢˜ä¸€ï¼šæ ·å¼ä¸ç”Ÿæ•ˆ</strong></p>
<p>è¿™ç§æƒ…å†µé€šå¸¸æ˜¯å› ä¸ºé€‰æ‹©å™¨å†™å¾—ä¸å¯¹ï¼Œæˆ–è€…Vueç‰ˆæœ¬ä¸æ”¯æŒã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-comment">/* å¯èƒ½çš„é—®é¢˜ï¼šVueç‰ˆæœ¬è¿‡ä½ */</span>
<span class="hljs-comment">/* ç¡®ä¿ä½¿ç”¨Vue 3.2+ ç‰ˆæœ¬ */</span>

<span class="hljs-comment">/* å¯èƒ½çš„é—®é¢˜ï¼šé€‰æ‹©å™¨ç»“æ„é”™è¯¯ */</span>
<span class="hljs-selector-class">.parent</span> :<span class="hljs-built_in">deep</span>(.child .grandchild) {
  <span class="hljs-comment">/* æ­£ç¡®çš„ç»“æ„ */</span>
}

<span class="hljs-comment">/* å¯èƒ½çš„é—®é¢˜ï¼šç¼ºå°‘å¿…è¦çš„ç±»å */</span>
<span class="hljs-comment">/* æ£€æŸ¥å­ç»„ä»¶æ˜¯å¦çœŸçš„æœ‰è¿™ä¸ªç±»å */</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p><strong>é—®é¢˜äºŒï¼šæ ·å¼è¦†ç›–å†²çª</strong></p>
<p>å½“å¤šä¸ª<code>:deep()</code>é€‰æ‹©å™¨ targeting åŒä¸€ä¸ªå…ƒç´ æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°æ ·å¼å†²çªã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-comment">/* æ–¹æ¡ˆä¸€ï¼šæé«˜é€‰æ‹©å™¨ç‰¹å¼‚æ€§ */</span>
<span class="hljs-selector-class">.page-container</span> <span class="hljs-selector-class">.section</span> :<span class="hljs-built_in">deep</span>(.target-element) {
  <span class="hljs-attribute">color</span>: blue;
}

<span class="hljs-comment">/* æ–¹æ¡ˆäºŒï¼šä½¿ç”¨!importantï¼ˆè°¨æ…ä½¿ç”¨ï¼‰ */</span>
<span class="hljs-selector-class">.page-container</span> :<span class="hljs-built_in">deep</span>(.target-element) {
  <span class="hljs-attribute">color</span>: blue <span class="hljs-meta">!important</span>;
}

<span class="hljs-comment">/* æ–¹æ¡ˆä¸‰ï¼šè°ƒæ•´æ ·å¼é¡ºåº */</span>
<span class="hljs-comment">/* åé¢çš„æ ·å¼ä¼šè¦†ç›–å‰é¢çš„ */</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p><strong>é—®é¢˜ä¸‰ï¼šä¸é¢„å¤„ç†å™¨å†²çª</strong></p>
<p>åœ¨ä½¿ç”¨Sassã€Lessç­‰é¢„å¤„ç†å™¨æ—¶ï¼Œéœ€è¦æ³¨æ„è¯­æ³•å…¼å®¹æ€§ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span> <span class="hljs-attr">scoped</span>&gt;</span>
.parent {
  padding: 20px;

  /* åœ¨Sassä¸­æ­£å¸¸ä½¿ç”¨ */
  :deep(.child) {
    margin: 10px;
    
    .grandchild {
      color: red;
    }
  }
}

/* æˆ–è€…ä½¿ç”¨æ’å€¼è¯­æ³• */
.parent :deep(#{$child-selector}) {
  background: white;
}
<span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h2 data-id="heading-6">ç»“åˆComposition APIä½¿ç”¨</h2>
<p>åœ¨Vue 3çš„Composition APIä¸­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡æ›´ç¼–ç¨‹å¼çš„æ–¹å¼æ¥å¤„ç†æ ·å¼é—®é¢˜ã€‚</p>
<p>è™½ç„¶ä¸èƒ½ç›´æ¥é€šè¿‡Composition APIä¿®æ”¹å­ç»„ä»¶æ ·å¼ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡åŠ¨æ€ç±»åå’Œæ ·å¼çš„æ–¹å¼æ¥é…åˆ<code>:deep()</code>ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"containerClass"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">third-party-component</span> 
      <span class="hljs-attr">:class</span>=<span class="hljs-string">"componentClass"</span>
      <span class="hljs-attr">:style</span>=<span class="hljs-string">"componentStyle"</span>
    /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>({
  <span class="hljs-attr">variant</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-string">'primary'</span>
  }
})

<span class="hljs-keyword">const</span> containerClass = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> ({
  <span class="hljs-string">'theme-container'</span>: <span class="hljs-literal">true</span>,
  [<span class="hljs-string">`theme-<span class="hljs-subst">${props.variant}</span>`</span>]: <span class="hljs-literal">true</span>
}))

<span class="hljs-keyword">const</span> componentClass = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> ({
  <span class="hljs-string">'custom-component'</span>: <span class="hljs-literal">true</span>,
  [<span class="hljs-string">`variant-<span class="hljs-subst">${props.variant}</span>`</span>]: <span class="hljs-literal">true</span>
}))

<span class="hljs-keyword">const</span> componentStyle = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> ({
  <span class="hljs-string">'--custom-primary'</span>: props.<span class="hljs-property">variant</span> === <span class="hljs-string">'primary'</span> ? <span class="hljs-string">'#3b82f6'</span> : <span class="hljs-string">'#ef4444'</span>
}))
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.theme-container</span> :<span class="hljs-built_in">deep</span>(.custom-component) {
  <span class="hljs-comment">/* åŸºç¡€æ ·å¼ */</span>
}

<span class="hljs-selector-class">.theme-container</span><span class="hljs-selector-class">.theme-primary</span> :<span class="hljs-built_in">deep</span>(.custom-component.variant-primary) {
  <span class="hljs-comment">/* ä¸»è¦å˜ä½“æ ·å¼ */</span>
}

<span class="hljs-selector-class">.theme-container</span><span class="hljs-selector-class">.theme-danger</span> :<span class="hljs-built_in">deep</span>(.custom-component.variant-danger) {
  <span class="hljs-comment">/* å±é™©å˜ä½“æ ·å¼ */</span>
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h2 data-id="heading-7">æ€»ç»“</h2>
<p><code>:deep()</code>é€‰æ‹©å™¨æ˜¯Vue 3æ ·å¼ç³»ç»Ÿä¸­ä¸€ä¸ªéå¸¸é‡è¦çš„ç‰¹æ€§ï¼Œå®ƒä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§æ ‡å‡†åŒ–çš„æ–¹å¼æ¥å¤„ç†ç»„ä»¶æ ·å¼ç©¿é€çš„éœ€æ±‚ã€‚ä»Vue 2çš„å„ç§æ··ä¹±è¯­æ³•åˆ°Vue 3çš„ç»Ÿä¸€<code>:deep()</code>ï¼Œè¿™åæ˜ äº†Vueå›¢é˜Ÿåœ¨æ”¹å–„å¼€å‘è€…ä½“éªŒæ–¹é¢çš„æŒç»­åŠªåŠ›ã€‚</p>
<p>å›é¡¾ä¸€ä¸‹æˆ‘ä»¬ä»Šå¤©è®¨è®ºçš„é‡ç‚¹ï¼š<code>:deep()</code>è§£å†³äº†ç»„ä»¶æ ·å¼ä½œç”¨åŸŸå¸¦æ¥çš„é™åˆ¶ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿåœ¨çˆ¶ç»„ä»¶ä¸­ä¿®æ”¹å­ç»„ä»¶çš„æ ·å¼ã€‚å®ƒçš„è¯­æ³•ç®€æ´æ˜äº†ï¼Œä¸ç°ä»£CSSæ ‡å‡†ä¿æŒä¸€è‡´ï¼Œè€Œä¸”ä¸å„ç§é¢„å¤„ç†å™¨è‰¯å¥½å…¼å®¹ã€‚</p>
<p>ä½†æ˜¯ï¼Œèƒ½åŠ›è¶Šå¤§è´£ä»»è¶Šå¤§ã€‚æˆ‘ä»¬åº”è¯¥è°¨æ…ä½¿ç”¨<code>:deep()</code>ï¼Œä¼˜å…ˆè€ƒè™‘é€šè¿‡ç»„ä»¶æ¥å£(propsã€emits)å’ŒCSSå˜é‡æ¥å®ç°æ ·å¼å®šåˆ¶ã€‚åªæœ‰å½“è¿™äº›æ–¹æ³•éƒ½æ— æ³•æ»¡è¶³éœ€æ±‚æ—¶ï¼Œæ‰è€ƒè™‘ä½¿ç”¨<code>:deep()</code>ã€‚</p>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œåˆç†ä½¿ç”¨<code>:deep()</code>å¯ä»¥è®©æˆ‘ä»¬çš„ä»£ç æ›´æ•´æ´ã€æ›´æ˜“ç»´æŠ¤ã€‚è®°ä½æˆ‘ä»¬ä»Šå¤©è®¨è®ºçš„æœ€ä½³å®è·µï¼šä¿æŒé€‰æ‹©å™¨ç®€æ´ã€ä½¿ç”¨æœ‰æ„ä¹‰çš„ç±»åã€é¿å…è¿‡åº¦ä½¿ç”¨ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨Vue 3çš„<code>:deep()</code>é€‰æ‹©å™¨ã€‚ç°åœ¨ï¼Œå½“ä½ åœ¨é¡¹ç›®ä¸­é‡åˆ°éœ€è¦ä¿®æ”¹å­ç»„ä»¶æ ·å¼çš„æƒ…å†µæ—¶ï¼Œä½ åº”è¯¥èƒ½å¤Ÿè‡ªä¿¡åœ°é€‰æ‹©æœ€åˆé€‚çš„è§£å†³æ–¹æ¡ˆäº†ã€‚</p>
<p>å¦‚æœä½ åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°å…¶ä»–é—®é¢˜ï¼Œæˆ–è€…æœ‰æ›´å¥½çš„ä½¿ç”¨æŠ€å·§ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ç»éªŒã€‚ Happy codingï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»æ•°å­—åˆ°ç‰ˆé¢ï¼šå¾—ç‰©æ•°æ®äº§å“é‡Œæ•°å­—æ ¼å¼åŒ–çš„é‚£äº›äº‹]]></title>    <link>https://juejin.cn/post/7576245169844764712</link>    <guid>https://juejin.cn/post/7576245169844764712</guid>    <pubDate>2025-11-25T09:16:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576245169844764712" data-draft-id="7576338796846137384" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»æ•°å­—åˆ°ç‰ˆé¢ï¼šå¾—ç‰©æ•°æ®äº§å“é‡Œæ•°å­—æ ¼å¼åŒ–çš„é‚£äº›äº‹"/> <meta itemprop="keywords" content="å‰ç«¯,æ•°æ®åˆ†æ,æ•°æ®ç»“æ„"/> <meta itemprop="datePublished" content="2025-11-25T09:16:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾—ç‰©æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2392954206960247"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»æ•°å­—åˆ°ç‰ˆé¢ï¼šå¾—ç‰©æ•°æ®äº§å“é‡Œæ•°å­—æ ¼å¼åŒ–çš„é‚£äº›äº‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2392954206960247/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¾—ç‰©æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T09:16:15.000Z" title="Tue Nov 25 2025 09:16:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‰ è¨€</h2>
<p>åšæ•°æ®å‰ç«¯ï¼Œä½ ä¼šå¾ˆå¿«å»ºç«‹ä¸€ä¸ªå…±è¯†ï¼š</p>
<p>æ€æ ·æŠŠæ¯ç‡¥çš„æ•°å­—ç”¨åˆé€‚çš„æ–¹å¼å±•ç¤ºå‡ºæ¥ï¼Œæ˜¯æˆ‘ä»¬çš„ç¬¬ä¸€è¦åŠ¡ï¼Œä½†è¿™åªæ˜¯èµ·ç‚¹ã€‚</p>
<p>å¦‚æœè¯´<strong>è§„èŒƒçš„æ•°å­—æ’ç‰ˆæ˜¯ä¸­åå°ç³»ç»Ÿçš„â€œåœ°åŸºâ€</strong> ï¼Œä¿è¯äº†ä¿¡æ¯çš„å‡†ç¡®ä¼ è¾¾ï¼›é‚£ä¹ˆ<strong>å¯è§†åŒ–å›¾è¡¨å°±æ˜¯åœ°åŸºä¹‹ä¸Šçš„â€œå»ºç­‘â€</strong> ã€‚åœ°åŸºç¨³å›ºï¼Œå»ºç­‘æ‰èƒ½å‘æŒ¥å…¶åŠŸèƒ½â€”â€”è®©ç”¨æˆ·ä»å¾®è§‚çš„è¯»æ•°ä¸­è§£æ”¾å‡ºæ¥ï¼Œæ›´å¿«é€Ÿåœ°è¯†åˆ«è¶‹åŠ¿ã€å®šä½å¼‚å¸¸ï¼Œä»è€ŒçœŸæ­£ä»æ•°æ®ä¸­è·å–è§„å¾‹ã€‚</p>
<p><strong>ä½†è¿™ç¯‡ä¸»è¦æƒ³èŠçš„ï¼Œä¸æ˜¯é‚£åº§â€œå»ºç­‘â€ï¼Œè€Œæ˜¯è¿™å—å¾€å¾€è¢«å¿½è§†ï¼Œå´å†³å®šäº†æ•´ä¸ªç³»ç»Ÿä¸“ä¸šåº¦çš„â€œåœ°åŸºâ€â€”â€”æ•°å­—æ ¼å¼åŒ–ã€‚</strong></p>
<p>è¯·çœ‹å¾—ç‰©å„ä¸šåŠ¡çº¿é‡Œçš„è¿™äº›æ—¥å¸¸åœºæ™¯ï¼š</p>
<ul>
<li>å•†å“è¯¦æƒ…é¡µï¼šåˆ¸åä»·ã€æŠ˜æ‰£ã€åˆ†æœŸå•ä»·ç­‰ï¼›</li>
<li>æ™ºç ï¼ˆå¾—ç‰©ç¤¾åŒºè¿è¥å¹³å°ï¼‰ã€å¾—æ•°ï¼ˆè‡ªåŠ©å–æ•°å¹³å°ï¼‰ã€æ™ºèƒ½è¿è¥ï¼ˆå¾—ç‰©äº¤æ˜“è¿è¥å¹³å°ï¼‰é‡Œçš„ GMVã€è½¬åŒ–ç‡ã€ç•™å­˜ç‡ã€PVCTRç­‰ï¼›</li>
<li>ç¤¾åŒºé‡Œå¸–å­é˜…è¯»é‡ã€ç‚¹èµæ•°ã€ç²‰ä¸æ•°ã€‚</li>
</ul>
<p>è¿™äº›æ•°å­—è¡¨é¢ä¸Šåªæ˜¯ numberï¼Œä¸€æ—¦å‡ºç°åœ¨å±å¹•ä¸Šï¼Œå°±è‡ªåŠ¨å˜æˆç‰ˆé¢çš„ä¸€éƒ¨åˆ†ï¼š</p>
<p>å¯¹é½æ–¹å¼ã€ä½æ•°é•¿çŸ­ã€å°æ•°å‡ ä½ã€æœ‰æ²¡æœ‰â€œä¸‡ / äº¿â€ã€å•ä½æ€ä¹ˆæ”¾â€”â€”éƒ½ä¼šå½±å“åˆ°æ•´ä¸ªé¡µé¢çš„èŠ‚å¥å’Œä¸“ä¸šæ„Ÿã€‚</p>
<p><strong>æ’ç‰ˆæœ¬è´¨ä¸Šæ˜¯åœ¨ç®¡ç†ä¿¡æ¯å’Œç§©åºï¼šå±‚çº§ã€èŠ‚å¥ã€å¯¹é½ã€ç•™ç™½ã€‚è€Œæ•°å­—ä¸æ˜¯æ’ç‰ˆçš„â€œé™„å±å“â€ï¼Œæ°æ°æ˜¯è¿™äº›åŸåˆ™æœ€å¯†é›†çš„è½½ä½“ã€‚</strong></p>
<p>æœ¬æ–‡ä¸å‘æ•£å»è°ˆæ•°æ®å¯è§†åŒ–ï¼Œåªä¸“æ³¨äºâ€œæ•°å­—æ ¼å¼åŒ–â€è¿™ä¸€ä»¶äº‹ï¼š</p>
<ol>
<li>ä»€ä¹ˆæ˜¯æ•°å­—æ ¼å¼åŒ–ï¼Ÿå®ƒèƒŒåæœ‰å“ªäº›é²œä¸ºäººçŸ¥çš„æ–‡åŒ–å·®å¼‚å’ŒæŠ€æœ¯ç»†èŠ‚ï¼Ÿ</li>
<li>å¦‚æœæ²¡æœ‰ç»Ÿä¸€æ–¹æ¡ˆï¼Œå¤±æ§çš„æ•°å­—ä¼šç»™äº§å“å†³ç­–ã€UI æ’ç‰ˆå’Œå·¥ç¨‹ç»´æŠ¤å¸¦æ¥ä»€ä¹ˆéº»çƒ¦ï¼Ÿ</li>
<li>å¾—ç‰©æ•°æ®å‰ç«¯åœ¨å¾—æ•° / æ™ºç  / æ™ºèƒ½è¿è¥é‡Œï¼Œæ˜¯æ€ä¹ˆæŠŠè¿™ä»¶äº‹ä»â€œå·¥å…·å‡½æ•°â€åšæˆâ€œåŸºç¡€è®¾æ–½â€çš„ï¼Ÿ</li>
<li>æˆ‘ä»¬åŸºäºIntl.NumberFormatå’Œ@dfx/number-format çš„æ–¹æ¡ˆï¼Œæ¶æ„æ˜¯æ€æ ·çš„ï¼Œå¸¦æ¥äº†å“ªäº›å®é™…æ”¶ç›Šï¼Ÿ</li>
</ol>
<h2 data-id="heading-1">äºŒã€ä»€ä¹ˆæ˜¯â€œæ•°å­—æ ¼å¼åŒ–â€ï¼Ÿä¸åªæ˜¯toFixed(2)</h2>
<p>ä¸€æåˆ°æåˆ°æ•°å­—æ ¼å¼åŒ–ï¼Œç¬¬ä¸€ååº”æ˜¯ï¼štoFixed(2)ã€æ‹¼ä¸ª%ã€åŠ ä¸ªÂ¥å°±å®Œäº‹äº†æˆ–è€…é€šè¿‡æ­£åˆ™æ¥æ‹¼æ¥åƒåˆ†ç¬¦ã€‚ä½†åœ¨çœŸå®ä¸–ç•Œé‡Œï¼Œâ€œ<strong>åŒä¸€ä¸ªæ•°é•¿æˆä»€ä¹ˆæ ·</strong>â€è¿œæ¯”æƒ³è±¡å¤æ‚ã€‚</p>
<h4 data-id="heading-2">2.1 æ•°å­—å†™æ³•æœ¬èº«å°±æ˜¯â€œæ–‡åŒ–å·®å¼‚â€</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50ae74d6a809495db83f38d7669db48b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764666974&amp;x-signature=ZG5XEBI4Hs9EfefFPfT9m%2Bz68Ig%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%25E5%25B0%258F%25E6%2595%25B0%25E7%2582%25B9" target="_blank" title="https://zh.wikipedia.org/wiki/%E5%B0%8F%E6%95%B0%E7%82%B9" ref="nofollow noopener noreferrer">zh.wikipedia.org/wiki/å°æ•°ç‚¹</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/869fea91289547eab5c50a48d72560b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764666974&amp;x-signature=9SyFwJfxRI6SrACQcir%2B3I0pkZg%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4872c79288c348a3906ceb38efff3d79~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764666974&amp;x-signature=2gzyGZfycuft2%2Bavseg4mxm7yyA%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>å°æ•°åˆ†éš”ç¬¦çš„ç¬¦å·æ¼”å˜å²</strong></p>
<p>æ®Florian Cajori 1928å¹´çš„è‘—ä½œã€Šæ•°å­¦ç¬¦å·å²ã€‹è®°è½½ï¼Œå°æ•°åˆ†éš”ç¬¦ï¼ˆæ—§ç§° separatrixï¼‰çš„æ¼”å˜ç»å†äº†ä¸€ä¸ªæ¼«é•¿çš„æ ‡å‡†åŒ–è¿‡ç¨‹ã€‚</p>
<p>åœ¨æ—©æœŸæ•°å­¦æ–‡çŒ®ä¸­ï¼Œä¸åŒåœ°åŒºå¯¹å°æ•°çš„å¤„ç†æ–¹å¼å„å¼‚ã€‚ä»¥æ•°å€¼ 34.65 ä¸ºä¾‹ï¼Œä¸­ä¸–çºªæ–‡çŒ®å¸¸é‡‡ç”¨åœ¨æ•´æ•°ä¸å°æ•°é—´åŠ æ¨ªçº¿æˆ–åœ¨ä¸ªä½æ•°å­—ä¸Šæ–¹åŠ æ³¨æ ‡è®°çš„æ–¹å¼ã€‚è‹±å›½æ—©æœŸæ›¾é‡‡ç”¨ç«–çº¿â€œ|â€ä½œä¸ºåˆ†éš”ï¼Œååœ¨å°åˆ·ä¸­é€æ¸ç®€åŒ–ä¸ºé€—å·æˆ–ç‚¹ï¼Œè¿™ä¸å½“æ—¶é˜¿æ‹‰ä¼¯æ•°å­¦å®¶ä¸»è¦ä½¿ç”¨é€—å·çš„ä¹ æƒ¯ç›¸å‘¼åº”ã€‚</p>
<p><strong>â€œç‚¹â€ä¸â€œé€—å·â€åˆ†æµçš„å†å²æˆå› </strong></p>
<p>17 ä¸–çºªæœ«è‡³ 18 ä¸–çºªåˆæ˜¯ç¬¦å·æ ‡å‡†åŒ–çš„å…³é”®æ—¶æœŸï¼Œä¹Ÿæ˜¯è‹±ç¾ä½“ç³»ä¸æ¬§æ´²å¤§é™†ä½“ç³»äº§ç”Ÿåˆ†æ­§çš„èµ·ç‚¹ã€‚è¿™ä¸€å·®å¼‚åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå—åˆ°äº†å¾®ç§¯åˆ†å‘æ˜è€…åŠå…¶ç¬¦å·ä½“ç³»çš„å½±å“ï¼š</p>
<ol>
<li><strong>æ¬§æ´²å¤§é™†ï¼ˆè±å¸ƒå°¼èŒ¨çš„å½±å“ï¼‰</strong> ï¼šå¾·å›½æ•°å­¦å®¶è±å¸ƒå°¼èŒ¨æè®®ä½¿ç”¨â€œç‚¹â€ä½œä¸ºä¹˜æ³•ç¬¦å·ã€‚è¿™ä¸€æè®®ç»ç”±å…‹é‡Œæ–¯è’‚å®‰Â·æ²ƒå°”å¤«ç­‰å­¦è€…çš„æ¨å¹¿ï¼Œåœ¨æ¬§æ´²å¤§é™†æ•™ç§‘ä¹¦ä¸­å¹¿æ³›æ™®åŠã€‚ä¸ºäº†é¿å…ç¬¦å·å«ä¹‰çš„å†²çªï¼Œæ¬§æ´²å¤§é™†æ•°å­¦å®¶æ™®éé‡‡ç”¨äº†â€œé€—å·â€ä½œä¸ºå°æ•°åˆ†éš”ç¬¦ã€‚</li>
<li><strong>è‹±å›½ï¼ˆç‰›é¡¿ä½“ç³»çš„å»¶ç»­ï¼‰</strong> ï¼šè‹±å›½æ•°å­¦ç•Œæœªé‡‡çº³è±å¸ƒå°¼èŒ¨çš„ä¹˜æ³•ç¬¦å·ï¼Œè€Œæ˜¯æ²¿ç”¨â€œXâ€è¡¨ç¤ºä¹˜æ³•ã€‚å› æ­¤ï¼Œâ€œç‚¹â€åœ¨è‹±å›½å¹¶æœªè¢«ä¹˜æ³•å ç”¨ï¼Œå¾—ä»¥ç»§ç»­ä½œä¸ºå°æ•°åˆ†éš”ç¬¦ä½¿ç”¨ã€‚æ®ç»Ÿè®¡ï¼Œ18 ä¸–çºªåˆçš„è‹±å›½æ•™ç§‘ä¹¦ä¸­ï¼Œçº¦ 60% ä½¿ç”¨ç‚¹ï¼Œ40% ä½¿ç”¨é€—å·ï¼›è€Œåˆ°äº† 18 ä¸–çºªæœ«ï¼Œç‚¹å·²æˆä¸ºè‹±å›½çš„ç»å¯¹ä¸»æµã€‚</li>
</ol>
<p><strong>æ ‡å‡†çš„ç¡®ç«‹</strong></p>
<p>å°½ç®¡æ¯”åˆ©æ—¶å’Œæ„å¤§åˆ©ç­‰å›½æ›¾é•¿æœŸåšæŒä½¿ç”¨ç‚¹ä½œä¸ºå°æ•°åˆ†éš”ç¬¦ï¼Œä½†æœ€ç»ˆå‡å‘æ¬§æ´²å¤§é™†çš„ä¸»æµæ ‡å‡†é æ‹¢ï¼Œæ”¹ç”¨äº†é€—å·ã€‚è‡³æ­¤ï¼Œè‹±ç¾ä½¿ç”¨â€œå°æ•°ç‚¹â€ã€æ¬§æ´²å¤§é™†ä½¿ç”¨â€œå°æ•°é€—å·â€çš„æ ¼å±€åŸºæœ¬å®šå‹ã€‚</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç›´è‡³20ä¸–çºªåˆï¼Œç¬¦å·çš„ç»Ÿä¸€ä»æœªå®Œå…¨å®Œæˆï¼Œå„ç±»æ–‡çŒ®ä¸­ä»å¯è§ç­‰éæ ‡å‡†å†™æ³•ã€‚</p>
<ul>
<li>è‹±è¯­ç³» / ä¸­å›½å¸¸è§å†™æ³•ï¼š1,234,567.89</li>
<li>å¾ˆå¤šæ¬§æ´²å›½å®¶ï¼š1.234.567,89ï¼ˆç‚¹æ˜¯åƒåˆ†ä½ï¼Œé€—å·æ˜¯å°æ•°ï¼‰</li>
<li>ç‘å£«ä¹ æƒ¯ï¼š1'234.56æˆ–1'234,56ï¼Œç”¨æ’‡å· ' åšåˆ†ç»„ã€‚</li>
</ul>
<p>è¿™äº›è§„åˆ™éƒ½å·²ç»è¢«æ•´ç†è¿›Unicode CLDRå’ŒICUæ•°æ®åº“ï¼Œç°ä»£æµè§ˆå™¨çš„Intl.NumberFormatå°±æ˜¯å»ºç«‹åœ¨è¿™å¥—æ•°æ®ä¹‹ä¸Šï¼Œèƒ½æ ¹æ® locale è‡ªé€‚åº”è¿™äº›å†™æ³•ã€‚</p>
<p>æ‰€ä»¥ï¼Œä¸€ä¸ªç®€å•çš„1,000ï¼š</p>
<ul>
<li>åœ¨ç¾å›½äººæˆ–ä¸­å›½äººçœ¼é‡Œæ˜¯â€œ one thousand / ä¸€åƒâ€ï¼›</li>
<li>åœ¨æŸäº›æ¬§æ´²è¯­å¢ƒä¸‹å¯èƒ½è¢«è¯»æˆâ€œä¿ç•™ä¸‰ä½å°æ•°çš„ä¸€ç‚¹é›¶â€ã€‚</li>
</ul>
<p>ä¸€æ—¦ä½ åšç”µå•†ã€è·¨å¢ƒã€æ•°æ®äº§å“ï¼Œè¿™ç§â€œå†™æ³•â€çš„å·®å¼‚ï¼Œå°±ä¸å†æ˜¯å°é—®é¢˜ï¼Œè€Œæ˜¯ç›´æ¥å½±å“å†³ç­–å’Œåˆè§„çš„ä¸œè¥¿ã€‚</p>
<h4 data-id="heading-3">2.2 æ•°å­—ä¸åªæ˜¯â€œå¤§å°â€è¿˜æœ‰è¯­ä¹‰å’Œè¯­æ°”</h4>
<p>åœ¨ UI é‡Œï¼Œæˆ‘ä»¬å…¶å®ç»å¸¸åœ¨è¡¨è¾¾â€œæ•°å­—çš„è¯­æ°”â€ï¼š</p>
<ul>
<li>+12.3%ï¼šä¸æ˜¯çº¯æ•°å­¦â€œåŠ å·â€ï¼Œè€Œæ˜¯ä¸€ç§â€œä¸Šæ¶¨â€çš„ä¿¡å·ï¼Œæ’ç‰ˆä¸Šå¸¸å¸¸é…åˆçº¢/ç»¿é¢œè‰²ï¼›</li>
<li>1.2M / 120 ä¸‡ï¼šä¸ºäº†èŠ‚çœç©ºé—´å’Œé™ä½è®¤çŸ¥è´Ÿæ‹…ï¼Œç”¨ç¼©å†™è¡¨ç¤ºé‡çº§ï¼›</li>
<li>&lt; 0.01ï¼šæå°æ•°å€¼ï¼Œè®©ç”¨æˆ·çŸ¥é“â€œæ¥è¿‘ 0â€ï¼Œè€Œä¸æ˜¯ç›¯ç€ä¸€ä¸² 0.000032 çš„æ•°å­—å°¾å·´å‘å‘†ï¼›</li>
<li>â€” /N/Aï¼šå‘Šè¯‰ç”¨æˆ·â€œè¿™é‡Œæ˜¯æ²¡æ•°æ® / å¼‚å¸¸â€ï¼Œè€Œä¸æ˜¯â€œå°±æ˜¯ 0â€ã€‚</li>
</ul>
<p>è¿™äº›éƒ½å±äºâ€œ<strong>æ•°å­—çš„è¡¨è¾¾</strong>â€è€Œéâ€œ<strong>è¿ç®—ç»“æœ</strong>â€ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬åªç”¨toFixedå’Œæ‹¼å­—ç¬¦ä¸²ï¼Œå¾ˆéš¾è®©è¿™äº›è¯­æ°”åœ¨æ•´ä¸ªç³»ç»Ÿå†…ä¿æŒä¸€è‡´ã€‚</p>
<h4 data-id="heading-4">2.3æµè§ˆå™¨å’Œ Node å·²ç»ç»™äº†æˆ‘ä»¬ä¸€ä¸ªâ€œå¼•æ“â€</h4>
<p>ECMAScript 402æ ‡å‡†ä¸­æä¾›çš„ Intl.NumberFormatï¼Œæ˜¯ä¸€ä¸ªä¸“é—¨åšæœ¬åœ°åŒ–æ•°å­—æ ¼å¼åŒ–çš„æ„é€ å™¨ã€‚</p>
<p>å®ƒæ”¯æŒï¼š</p>
<ul>
<li>æ ¹æ® locale åˆ‡æ¢å°æ•°ç‚¹ã€åˆ†ç»„è§„åˆ™ã€æ•°å­—ç¬¦å·ï¼›</li>
<li>è´§å¸æ ¼å¼ï¼šstyle: "currency" + currency: "CNY" | "JPY" | ...ï¼›</li>
<li>ç™¾åˆ†æ¯”ï¼šstyle: "percent"ï¼Œè‡ªåŠ¨ä¹˜ 100 å¹¶åŠ  %ï¼›</li>
<li>ç´§å‡‘è¡¨ç¤ºï¼šnotation: "compact"ï¼Œè¾“å‡º 9.9Mã€9.9äº¿ç­‰ç¼©å†™ï¼›</li>
<li>formatToParts()ï¼šæŠŠæ•°å­—æ‹†æˆæ•´æ•°ã€å°æ•°ç‚¹ã€å°æ•°ã€è´§å¸ç¬¦å·ç­‰ç‰‡æ®µï¼Œæ–¹ä¾¿åšæ›´ç²¾ç»†çš„æ’ç‰ˆã€‚</li>
</ul>
<p>æ‰€ä»¥ï¼Œæ•°å­—æ ¼å¼åŒ–çš„â€œå¼•æ“é—®é¢˜â€å…¶å®å·²ç»æœ‰äººå¸®æˆ‘ä»¬è§£å†³äº†â€”â€”çœŸæ­£éš¾çš„æ˜¯ï¼š</p>
<ul>
<li>æ€ä¹ˆç»“åˆä¸šåŠ¡è¯­ä¹‰ï¼›</li>
<li>æ€ä¹ˆç»“åˆæ’ç‰ˆè§„èŒƒï¼›</li>
<li>æ€ä¹ˆåœ¨å¤šä¸ªç³»ç»Ÿä¹‹é—´åšåˆ°ä¸€è‡´ï¼›</li>
<li>æ€ä¹ˆæ²»ç†â€œä¸ä¹±å†™â€çš„å·¥ç¨‹å®è·µã€‚</li>
</ul>
<p>è¿™å°±å›åˆ°æˆ‘ä»¬è‡ªå·±çš„æ•…äº‹ã€‚</p>
<h2 data-id="heading-5">ä¸‰ã€å¦‚æœæ²¡æœ‰ç»Ÿä¸€æ–¹æ¡ˆï¼šä¸‰ä¸ªæ•°æ®äº§å“çš„æ—¥å¸¸</h2>
<p>ä¸‹é¢è¿™å‡ ä¸ªåœºæ™¯ï¼Œç›¸ä¿¡ä½ åœ¨å¾—ç‰©æˆ–ç±»ä¼¼ç”µå•†/æ•°æ®å¹³å°é‡Œä¸€å®šè§è¿‡ã€‚</p>
<p>æƒ³è±¡ä¸€å¼ å…¸å‹åå°é¡µé¢ï¼š</p>
<ul>
<li>é¡¶éƒ¨æ˜¯æ´»åŠ¨çœ‹æ¿ KPI å¡ç‰‡ï¼›</li>
<li>ä¸­é—´æ˜¯æŒ‰å“ç±»/æ¸ é“æ‹†å¼€çš„è¡¨æ ¼ï¼›</li>
<li>ä¸‹æ–¹æ˜¯åˆ›ä½œè€…è¡¨ç°åˆ—è¡¨ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb6e4bcd844a49108c0f3f8e646b6062~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764666974&amp;x-signature=4Q5vJZa8O5q0rhIvH9xNUWxMqdE%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/373cea9240df4ca7b85787500142ff2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764666974&amp;x-signature=rjADyhgP9W35CoMS2xJtghk2TZc%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8335ff638ef948d7924e43d81cb3e1bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764666974&amp;x-signature=JeJSox8PW2H5BzBU88aAgCwhOto%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<h4 data-id="heading-6">3.1 ä»·æ ¼ï¼šåŒä¸€å¼ è®¢å•ï¼Œä¸åŒç³»ç»Ÿâ€œé•¿å¾—ä¸åŒâ€</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15a4b4e842a84935877591a196779c14~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764666974&amp;x-signature=FoT7%2Bf%2Fr%2Fcllem9%2FyohBf6N7wVs%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>é‚£ä¹ˆï¼Œä»¥å‰æˆ‘ä»¬æ˜¯æ€ä¹ˆåšçš„ï¼Ÿ</p>
<p>åœ¨æ²¡æœ‰ç»Ÿä¸€è§„èŒƒçš„â€œè›®è’æ—¶ä»£â€ï¼Œé¢å¯¹ä¸€ä¸ªæ•°å­—ï¼Œæˆ‘ä»¬çš„ç¬¬ä¸€ååº”å¾€å¾€æ˜¯ï¼šâ€œè¿™è¿˜ä¸ç®€å•ï¼Ÿæ‹¼ä¸ªå­—ç¬¦ä¸²ä¸å°±å®Œäº‹äº†ï¼Ÿâ€</p>
<p>è¿™ç§ä»£ç ï¼Œä½ ä¸€å®šå†™è¿‡ï¼Œæˆ–è€…åœ¨é¡¹ç›®çš„æŸä¸ªè§’è½å®å®åœ¨åœ¨åœ°è§è¿‡ï¼š</p>
<p><strong>åœºæ™¯ä¸€ï¼šç®€å•ç²—æš´çš„æ‹¼æ¥ä¸€æŠŠæ¢­</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// "æˆ‘ç®¡ä½ ä»€ä¹ˆåœºæ™¯ï¼Œå…ˆæ‹¼ä¸Šå»å†è¯´"</span>
<span class="hljs-keyword">function</span>Â <span class="hljs-title function_">formatPrice</span>(<span class="hljs-params">value: number</span>) {
Â Â <span class="hljs-comment">// éšæ‚£åŸ‹é›·ï¼šè¿™é‡Œæ˜¯å…¨è§’ï¿¥è¿˜æ˜¯åŠè§’Â¥ï¼Ÿnull ä¼šå˜æˆ "Â¥null" å—ï¼Ÿ</span>
Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-string">'Â¥'</span>Â + value.<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>);
}
</code></pre>
<p><strong>åœºæ™¯äºŒï¼šä¸ºäº†åƒåˆ†ä½ï¼Œæ‰‹å†™æ­£åˆ™â€œç‚«æŠ€â€</strong></p>
<pre><code class="hljs language-ini" lang="ini">// "ç½‘ä¸Šä¸€æœä¸€å¤§æŠŠçš„æ­£åˆ™ï¼Œçœ‹ç€èƒ½è·‘å°±è¡Œ"
exportÂ constÂ <span class="hljs-attr">formatNumberWithCommas</span>Â = (number:Â numberÂ |Â string) =&gt; {
Â Â constÂ <span class="hljs-attr">parts</span> =Â number.toString().split(<span class="hljs-string">'.'</span>)<span class="hljs-comment">;</span>
Â Â 
Â Â // ç»å…¸çš„æ­£åˆ™æ›¿æ¢ï¼Œä½†è¿™çœŸçš„è¦†ç›–äº†æ‰€æœ‰è´Ÿæ•°ã€æå¤§å€¼åœºæ™¯å—ï¼Ÿ
Â  parts<span class="hljs-section">[0]</span> = parts<span class="hljs-section">[0]</span>.replace(/\B(?=(\d{3})+(?!\d))/g,Â ',')<span class="hljs-comment">;</span>
Â Â 
Â Â // æ‰‹åŠ¨è¡¥é›¶é€»è¾‘ï¼Œä¸ä»…éš¾ç»´æŠ¤ï¼Œè¿˜å®¹æ˜“åœ¨è¾¹ç•Œæƒ…å†µï¼ˆå¦‚ undefinedï¼‰ä¸‹æŠ¥é”™
Â Â ifÂ (parts.lengthÂ &gt;Â 1Â &amp;&amp; parts<span class="hljs-section">[1]</span>?.<span class="hljs-attr">length</span>Â ===Â <span class="hljs-number">1</span>) {
Â  Â  parts<span class="hljs-section">[1]</span> = ${parts<span class="hljs-section">[1]</span>}0<span class="hljs-comment">;</span>
Â  }
Â Â returnÂ parts.join('.')<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™çœ‹èµ·æ¥ä¼¼ä¹â€œèƒ½ç”¨â€ï¼Œå¹¶ä¸”ç”¨èµ·æ¥è²Œä¼¼ä¹Ÿæ²¡å•¥é—®é¢˜ã€‚ä½†å½“ä¸šåŠ¡å¤æ‚åº¦ç¨å¾®ä¸Šæ¥ä¸€ç‚¹æˆ–è€…éœ€è¦åšå›½é™…åŒ–çš„æ—¶å€™ï¼Œé‚£æ¥æ‰‹è¿™ä¸ªéœ€æ±‚çš„åŒå­¦åªèƒ½å‘å‡ºä¸€å¥ã€å“¦å¼ã€ã€‚</p>
<ol>
<li><strong>è§†è§‰ä¸Šçš„â€œå„è‡ªä¸ºæ”¿â€</strong></li>
<li>
<ol>
<li><strong>ç¬¦å·æ‰“æ¶</strong>ï¼š å•†å“å¡ç‰‡ç”¨åŠè§’ â Â¥ï¼Œè¯¦æƒ…é¡µç”¨å…¨è§’ â ï¿¥ï¼Œç”šè‡³æœ‰çš„åœ°æ–¹æ··ç”¨äº† â CNYã€‚</li>
<li><strong>ç²¾åº¦éšå¿ƒ</strong>ï¼š æœ‰çš„å¼€å‘è§‰å¾— â toFixedï¼ˆ2ï¼‰ ä¸¥è°¨ï¼Œæœ‰çš„è§‰å¾— â ã€‚00 å¤ªå¤šä½™ç›´æ¥ç æ‰ï¼Œå¯¼è‡´åŒä¸€ä¸ªé¡µé¢é‡Œï¼Œå¯¼è‡´åŒä¸€ä¸ªé¡µé¢é‡Œï¼Œæ•°å­—åƒé”¯é½¿ä¸€æ ·å‚å·®ä¸é½ã€‚</li>
</ol>
</li>
<li><strong>æ’ç‰ˆä¸Šçš„â€œç§©åºå´©å¡Œâ€</strong></li>
<li>
<ol>
<li>è¯•æƒ³ä¸€ä¸ªè¡¨æ ¼åˆ—ï¼šâ 1299ã€â 1ï¼Œ299.00ã€â 1299.0 æ··åœ¨ä¸€èµ·ã€‚</li>
<li>å¯¹é½åŸºå‡†çº¿å®Œå…¨é”™ä¹±ï¼Œå°¤å…¶åœ¨è¡¨æ ¼é‡Œï¼Œå°±å’Œã€ç‹—å•ƒè¿‡ä¸€æ ·ã€ï¼ŒçŠ¬ç‰™äº¤é”™ï¼Œå‚å·®ä¸é½ï¼Œç”¨æˆ·çš„çœ¼ç›éœ€è¦åœ¨ä¸åŒçš„å°æ•°ä½ä¹‹é—´æ¥å›è·³è·ƒï¼Œé˜…è¯»ä½“éªŒæå·®ã€‚</li>
</ol>
</li>
<li><strong>å›½é™…åŒ–ä¸Šçš„â€œæ­»èƒ¡åŒâ€</strong></li>
<li>
<ol>
<li>è¿™ç§ç¡¬ç¼–ç é€»è¾‘ï¼ˆHardcodeï¼‰ï¼Œå®Œå…¨å µæ­»äº†å›½é™…åŒ–çš„è·¯ã€‚</li>
<li>ä¸€æ—¦ä¸šåŠ¡è¦æ”¯æŒ USDï¼ˆç¾å…ƒï¼‰ã€JPYï¼ˆæ—¥å…ƒï¼Œé»˜è®¤æ— å°æ•°ï¼‰ã€EURï¼ˆæ¬§å…ƒï¼Œéƒ¨åˆ†å›½å®¶ç”¨é€—å·åšå°æ•°ç‚¹ï¼‰ã€‚</li>
<li>æ¯”å¦‚ â 1,234ï¼Œ567.89ï¼ˆè‹±ç¾ï¼‰å’Œ â 1.234.567ï¼Œ89ï¼ˆå¾·æ„ï¼‰ï¼Œè¿™å®Œå…¨ä¸æ˜¯æ”¹ä¸ªç¬¦å·å°±èƒ½è§£å†³çš„ï¼Œè€Œæ˜¯æ•´ä¸ª<strong>æ•°å­—ä¹¦å†™é€»è¾‘</strong>çš„æ ¹æœ¬å·®å¼‚ã€‚</li>
</ol>
</li>
</ol>
<p><strong>æˆ‘ä»¬åŸæœ¬æƒ³çœäº‹å†™çš„å°å‡½æ•°ï¼Œæœ€ç»ˆå˜æˆäº†é˜»ç¢ç³»ç»Ÿæ¼”è¿›çš„æŠ€æœ¯å€ºåŠ¡ã€‚</strong></p>
<h4 data-id="heading-7">3.2çœ‹ä¼¼æ™ºèƒ½çš„â€œä¸‡/äº¿â€ç¼©å†™ï¼Œå…¶å®æ˜¯ç¡¬ç¼–ç çš„é™·é˜±</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70447d69189446d4a63a6de64ae4c95d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764666974&amp;x-signature=P4GD2l1gaVXlZc7N5qTA8yW3PjY%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>åœ¨åˆ›ä½œè€…ä¸­å¿ƒæˆ–å†…å®¹ç¤¾åŒºï¼Œæˆ‘ä»¬å¸Œæœ›é˜…è¯»é‡ï¼ˆPVï¼‰èƒ½ç¬¦åˆç”¨æˆ·çš„ç›´è§‰è®¤çŸ¥ï¼š</p>
<ul>
<li><strong>å°æ•°å€¼</strong>ï¼šâ &lt; 10,000 æ—¶ï¼Œæ˜¾ç¤ºå®Œæ•´æ•°å­—ï¼Œç²¾ç¡®åˆ°ä¸ªä½ï¼›</li>
<li><strong>ä¸­é‡çº§</strong>ï¼šâ â‰¥ 10,000 æ—¶ï¼Œç¼©å†™ä¸º â X.X ä¸‡ï¼›</li>
<li><strong>æµ·é‡çº§</strong>ï¼šâ‰¥ 100,000,000 æ—¶ï¼Œç¼©å†™ä¸º â X.X äº¿ã€‚</li>
</ul>
<p>å¦‚æœæ˜¯æµ·å¤–ç‰ˆï¼Œéœ€æ±‚åˆå˜æˆäº†ï¼šâ 1.2k/â 3.4M/5.6Bã€‚</p>
<p>äºæ˜¯ï¼Œæˆ‘ä»¬å†™å‡ºäº†é‚£æ®µç»å…¸çš„â formatPv</p>
<pre><code class="hljs language-scss" lang="scss">functionÂ <span class="hljs-built_in">formatPv</span>(count: number) {
Â Â ifÂ (count &lt;Â <span class="hljs-number">10000</span>)Â returnÂ <span class="hljs-built_in">String</span>(count);
Â Â ifÂ (count &lt;Â <span class="hljs-number">100000000</span>)Â returnÂ (count /Â <span class="hljs-number">10000</span>)<span class="hljs-selector-class">.toFixed</span>(<span class="hljs-number">1</span>) +Â 'ä¸‡';
Â Â returnÂ (count /Â <span class="hljs-number">100000000</span>)<span class="hljs-selector-class">.toFixed</span>(<span class="hljs-number">1</span>) +Â 'äº¿';
}
</code></pre>
<p>è¿™æ®µä»£ç é€»è¾‘æ¸…æ™°ï¼Œçœ‹ä¼¼è§£å†³äº†é—®é¢˜ã€‚ä½†åœ¨çœŸå®åœºæ™¯ä¸­ï¼Œå®ƒå´æ˜¯ä¸€ä¸ªâ€œ<strong>Bug åˆ¶é€ æœº</strong>â€ï¼š</p>
<p><strong>1.ä¸´ç•Œç‚¹çš„â€œè§†è§‰çªå˜â€</strong></p>
<ul>
<li>9999 ä¸‹ä¸€ç§’å˜æˆ â 1.0 ä¸‡ï¼Ÿäº§å“ä¼šç«‹åˆ»æ‰¾ä½ ï¼šâ€œè¿™ä¸ªæ•°å±•ç¤ºæ˜¯ä¸æ˜¯ä¸å¤§å¯¹ï¼Œèƒ½ä¸èƒ½9999ä¹‹åæ˜¾ç¤º 1.0w è€Œä¸æ˜¯ 1.0 ä¸‡ï¼Ÿâ€</li>
<li>99950 å››èˆäº”å…¥å˜æˆ â 10.0 ä¸‡ï¼Œè¦ä¸è¦æ˜¾ç¤ºæˆæ›´ç›´è§‚çš„ â 10 ä¸‡ï¼Ÿè¿™äº›å¾®å°çš„ç»†èŠ‚ï¼Œéœ€è¦å †ç Œå¤§é‡çš„ â if-else æ¥ä¿®è¡¥ã€‚</li>
</ul>
<p><strong>2.ç»´æŠ¤ä¸Šçš„â€œå¤åˆ¶ç²˜è´´åœ°ç‹±â€</strong></p>
<ul>
<li>ä¸­æ–‡ç‰ˆå†™ä¸€å¥—ï¼Œè‹±æ–‡ç‰ˆ â formatPvEn å†å†™ä¸€å¥—ï¼Œç­‰å’±ä»¬çš„ä¸šåŠ¡åšå¾€ä¸–ç•Œå„åœ°çš„æ—¶å€™ï¼Œé‚£å¾—è¦å¤šå°‘ formatPvï¼ˆxxï¼‰å‘¢ï¼Ÿ</li>
<li>A é¡¹ç›®æ‹·ä¸€ä»½ï¼ŒB é¡¹ç›®æ‹·ä¸€ä»½ã€‚ç­‰å“ªå¤©äº§å“è¯´â€œä¸‡â€åé¢ä¸ç•™å°æ•°äº†ï¼Œä½ å¾—å» N ä¸ªä»“åº“é‡ŒæŠŠè¿™è¡Œä»£ç æ‰¾å‡ºæ¥æ”¹ä¸€éã€‚æœ€ç»ˆç»“æœå°±æ˜¯ï¼š<strong>å…¨ç«™çš„ç¼©å†™ç­–ç•¥å¤„äºä¸€ç§â€œç›¸ä¼¼ä½†ä¸ä¸€è‡´â€çš„è–›å®šè°”çŠ¶æ€ã€‚</strong></li>
</ul>
<p><strong>3.æ–‡åŒ–é€‚é…ä¸Šçš„â€œç›²åŒºâ€</strong></p>
<ul>
<li>è¿™å¥—é€»è¾‘æ˜¯å…¸å‹çš„â€œç®€ä½“ä¸­æ–‡ä¸­å¿ƒä¸»ä¹‰â€ã€‚</li>
<li><strong>å°åº¦ç”¨æˆ·</strong>çœ‹åˆ°â 100k æ˜¯æ²¡æ„Ÿè§‰çš„ï¼Œä»–ä»¬ä¹ æƒ¯ç”¨ â Lakh ï¼ˆ10 ä¸‡ï¼‰ å’Œ â Crore ï¼ˆ1000 ä¸‡ï¼‰ï¼›</li>
<li><strong>é˜¿æ‹‰ä¼¯è¯­åŒº</strong>å¯èƒ½éœ€è¦ç”¨ä¸œé˜¿æ‹‰ä¼¯æ•°å­—ã€‚</li>
</ul>
<p>è¿™ä¸ä»…ä»…æ˜¯æŠŠâ€œä¸‡â€ç¿»è¯‘æˆâ€œWanâ€çš„é—®é¢˜ï¼Œè€Œæ˜¯<strong>æ•°å­—åˆ†çº§é€»è¾‘</strong>åœ¨ä¸åŒæ–‡åŒ–ä¸­å®Œå…¨ä¸åŒï¼Œåœ¨å‰é¢é’ˆå¯¹ç¬¦å·ç³»ç»Ÿæˆ‘ä»¬ä¹Ÿæåˆ°è¿‡ã€‚</p>
<p>æˆ‘ä»¬åœ¨ UI ä¸Šç¡¬å¡äº†ä¸€å¥—â€œåªèƒ½åœ¨ç®€ä½“ä¸­æ–‡é‡Œè‡ªæ´½â€çš„è§„åˆ™ï¼Œè¿™åœ¨å›½é™…åŒ–äº§å“ä¸­æ˜¯è¡Œä¸é€šçš„ã€‚</p>
<h4 data-id="heading-8">3.3 è¢«â€œæŠ¹å¹³â€çš„è¯­ä¹‰â€”0ã€ç©ºå€¼ä¸æå°å€¼</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9829b94976884ec5b64815a5a79b7fb4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764666974&amp;x-signature=Wr55kBhFt%2BGf4GClUCPWCqjOgRE%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>åœ¨å¾—æ•°ï¼ˆè‡ªåŠ©å–æ•°å¹³å°ï¼‰ã€æ™ºç ï¼ˆå¾—ç‰©ç¤¾åŒºè¿è¥å¹³å°ï¼‰ã€æ™ºèƒ½è¿è¥ï¼ˆå¾—ç‰©äº¤æ˜“è¿è¥å¹³å°ï¼‰è¿™ç±»é‡åº¦æ•°æ®çœ‹æ¿ä¸­ï¼Œæˆ‘ä»¬å……æ–¥ç€å„ç§<strong>æ¯”ç‡å‹æŒ‡æ ‡</strong>ï¼š</p>
<ul>
<li><strong>é£æ§ç±»</strong>ï¼šé‰´åˆ«é€šè¿‡ç‡ã€æ‹¦æˆªç‡ï¼›</li>
<li><strong>å±¥çº¦ç±»</strong>ï¼šè¶…æ—¶ç‡ã€æŠ•è¯‰æˆåŠŸç‡ï¼›</li>
<li><strong>å¢é•¿ç±»</strong>ï¼šæ´»åŠ¨è½¬åŒ–ç‡ã€å¤è´­ç‡ã€‚</li>
</ul>
<p>é¢å¯¹è¿™äº›æŒ‡æ ‡ï¼Œä»¥å‰æœ€å¸¸è§çš„å¤„ç†æ–¹å¼æ˜¯å†™ä¸€ä¸ªé€šç”¨çš„ formatPercentï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span>Â <span class="hljs-title function_">formatPercent</span>(<span class="hljs-params">value: number |Â <span class="hljs-literal">null</span>Â |Â <span class="hljs-literal">undefined</span></span>) {
Â Â <span class="hljs-comment">// "æ²¡æ•°æ®å°±å½“ 0 ç®—å‘—ï¼Œçœå¾—æŠ¥é”™"</span>
Â Â <span class="hljs-keyword">return</span>Â ((value ||Â <span class="hljs-number">0</span>) *Â <span class="hljs-number">100</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>) +Â <span class="hljs-string">'%'</span>;
}
</code></pre>
<p>è¿™è¡Œä»£ç è™½ç„¶åªæœ‰ä¸€å¥è¯ï¼Œå´åœ¨ä¸šåŠ¡å±‚é¢çŠ¯äº†<strong>ä¸‰ä¸ªä¸¥é‡çš„é”™è¯¯ï¼š</strong></p>
<p><strong>1. æ··æ·†äº†â€œäº‹å®â€ä¸â€œç¼ºå¤±â€</strong></p>
<ul>
<li>â null ä»£è¡¨æ•°æ®æœªäº§å‡ºæˆ–é“¾è·¯å¼‚å¸¸ï¼ˆå°±æ˜¯æ²¡æ•°ï¼‰ï¼Œè€Œ â 0 ä»£è¡¨ä¸šåŠ¡ç»“æœç¡®å®ä¸ºé›¶ã€‚</li>
<li>ä»£ç ç²—æš´åœ°å°† â null è½¬ä¸º â 0.00%ï¼Œä¼šè®©ç”¨æˆ·è¯¯ä»¥ä¸ºâ€œä»Šå¤©æ²¡äººæŠ•è¯‰â€æˆ–â€œè½¬åŒ–ç‡ä¸º 0â€ï¼Œä»è€Œæ©ç›–äº†èƒŒåçš„ç³»ç»Ÿæ•…éšœæˆ–æ•°æ®å»¶è¿Ÿã€‚</li>
</ul>
<p><strong>2. â€œæŠ¹æ€â€äº†é•¿å°¾æ•°æ®çš„ä»·å€¼</strong></p>
<ul>
<li>å¯¹äº AB æˆ–ç®—æ³•æ¨¡å‹æ¥è¯´ï¼Œâ 0.000032 æ˜¯ä¸€ä¸ªå…·å¤‡ç»Ÿè®¡æ„ä¹‰çš„æ¦‚ç‡å€¼ã€‚</li>
<li>è¢«è¿™è¡Œä»£ç å¼ºè¡Œæˆªæ–­ä¸º â 0.00% åï¼Œä¸šåŠ¡åŒå­¦ä¼šå›°æƒ‘ï¼šâ€œä¸ºä»€ä¹ˆ P å€¼è¿˜èƒ½æ˜¯ 0 çš„å˜›ï¼Ÿâ€è¿™ç›´æ¥æŸå®³äº†æ•°æ®çš„å…¬ä¿¡åŠ›ï¼Œä¸¥é‡ç‚¹æ¥è¯´ï¼Œéƒ½ä¼šå½±å“ä¸šåŠ¡å†³ç­–ã€‚</li>
</ul>
<p><strong>3. é˜»æ–­äº†ç²¾ç»†åŒ–è¡¨è¾¾çš„å¯èƒ½</strong></p>
<p>å½“ä½ æƒ³æŠŠæå°å€¼ä¼˜åŒ–ä¸º â &lt; 0.01% è¿™ç§æ›´ç§‘å­¦çš„è¡¨è¾¾æ—¶ï¼Œä½ é€šè¿‡ vscode ä¸€æœä»£ç ï¼Œ500+ æ–‡ä»¶ï¼Œç›´æ¥å°±ä¸¤çœ¼ä¸€é»‘ã€‚</p>
<p>ä»æ’ç‰ˆè®¾è®¡çš„è§’åº¦çœ‹ï¼Œè¿™ä¸‰è€…æœ¬åº”æ‹¥æœ‰å®Œå…¨ä¸åŒçš„è§†è§‰å±‚çº§ï¼š</p>
<ul>
<li><strong>ç©ºå€¼ï¼ˆNo Dataï¼‰</strong> ï¼šä½¿ç”¨ â â€” æˆ–ç°è‰²å ä½ç¬¦ï¼Œè¡¨ç¤ºâ€œæ­¤å¤„æ— ä¿¡æ¯â€ï¼Œé™ä½è§†è§‰å¹²æ‰°ï¼›</li>
<li><strong>å¼‚å¸¸å€¼ï¼ˆErrorï¼‰</strong> ï¼šä½¿ç”¨ â N/A æˆ–è­¦ç¤ºè‰²ï¼Œæç¤ºç”¨æˆ·â€œæ•°æ®æœ‰é—®é¢˜â€ï¼›</li>
<li><strong>æå°å€¼ï¼ˆTiny Valueï¼‰</strong> ï¼šä½¿ç”¨ â &lt; 0.01% æˆ–è€…â‰ˆ 0ï¼Œä¿ç•™æ•°æ®çš„å­˜åœ¨æ„Ÿï¼ŒåŒæ—¶ä¼ è¾¾â€œæ¥è¿‘äºé›¶â€çš„å‡†ç¡®è¯­ä¹‰ã€‚</li>
</ul>
<p>å¾—æ•°DataHubåœ¨æ²»ç†å±•ç¤ºå±‚æ—¶å‘ç°ï¼Œå¤§é‡â€œåŒä¸€ä¸ªæŒ‡æ ‡åœ¨ä¸åŒé¡µé¢é•¿å¾—ä¸ä¸€æ ·â€ï¼Œæ ¹æºå°±åœ¨äºè¿™äº›å„è‡ªä¸ºæ”¿ã€ç¼ºä¹è¯­ä¹‰åŒºåˆ†çš„æ ¼å¼åŒ–è§„åˆ™ã€‚</p>
<h2 data-id="heading-9">å››ã€ä»â€œå†™å·¥å…·å‡½æ•°â€åˆ°â€œå®šä¹‰å±•ç¤ºè¯­ä¹‰â€</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a75a01a0ad6c4a9092e43f0b2141d167~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764666974&amp;x-signature=OQX7zmusHsyF9zdVRPa9pp9ct3M%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>å›é¡¾ä¸Šè¿°åœºæ™¯ï¼Œé€è¿‡é‚£äº›æ··ä¹±çš„ä»£ç ç‰‡æ®µï¼Œå¯ä»¥å‘ç°ä¸‰ä¸ªå…±æ€§çš„ç³»ç»Ÿæ€§éš¾é¢˜ï¼š</p>
<ol>
<li><strong>é€»è¾‘ç†µå¢</strong>ï¼šæ¯ä¸ªä¸šåŠ¡çº¿ã€ç”šè‡³æ¯ä¸ªé¡µé¢éƒ½åœ¨é‡å¤é€ è½®å­ã€‚â formatPriceã€â formatPercent éåœ°å¼€èŠ±ï¼Œå‰åç«¯é€»è¾‘å‰²è£‚ï¼Œç»´æŠ¤æˆæœ¬éšç€ä¸šåŠ¡æ‰©å¼ å‘ˆæŒ‡æ•°çº§ä¸Šå‡ã€‚</li>
<li><strong>æ— æ³•æ²»ç†</strong>ï¼šæƒ³æŠŠå…¨ç«™çš„â€œä¸‡ / äº¿â€é˜ˆå€¼ç»Ÿä¸€ï¼Ÿæˆ–è€…æŠŠæŸç§è´¹ç‡çš„ç²¾åº¦ä»ä¸¤ä½æ”¹æˆå››ä½ï¼Ÿè¿™å‡ ä¹æ˜¯ä¸å¯èƒ½çš„ä»»åŠ¡ã€‚</li>
<li><strong>ä½“éªŒå¤±æ§</strong>ï¼šè®¾è®¡è§„èŒƒè™½ç„¶å†™ç€â€œç©ºå€¼ç”¨ â€”â€ï¼Œä½†è½å®åˆ°ä»£ç é‡Œå…¨çœ‹å¼€å‘å¿ƒæƒ…ã€‚ç»“æœå°±æ˜¯ç”¨æˆ·åœ¨ä¸åŒç³»ç»Ÿé—´åˆ‡æ¢æ—¶ï¼Œçœ‹åˆ°çš„æ˜¯ä¸€ç§â€œä¼¼æ˜¯è€Œéâ€çš„ç»Ÿä¸€ï¼Œä¸¥é‡å½±å“äº†äº§å“çš„ä¸“ä¸šæ„Ÿã€‚</li>
</ol>
<p><strong>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œåœ¨æ•°æ®åŸŸäº§å“ä¸­ï¼Œæˆ‘ä»¬å¯¹â€œæ ¼å¼åŒ–â€è¿™ä»¶äº‹è¿›è¡Œäº†é‡æ–°å®šä¹‰ï¼š</strong></p>
<p>å®ƒä¸åªæ˜¯å‰ç«¯çš„ UI æ¸²æŸ“é€»è¾‘ï¼Œè€Œæ˜¯æŒ‡æ ‡å®šä¹‰çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>æˆ‘ä»¬ä¸ä»…è¦å®šä¹‰â€œæŒ‡æ ‡çš„è®¡ç®—å£å¾„â€ï¼Œæ›´è¦å®šä¹‰â€œæŒ‡æ ‡çš„å±•ç¤ºè¯­ä¹‰â€ã€‚</p>
<p>åœ¨ Galaxyï¼ˆæŒ‡æ ‡ç®¡ç†å¹³å°ï¼‰å®šä¹‰å¥½â€œæ•°æ˜¯æ€ä¹ˆç®—å‡ºæ¥çš„â€ä¹‹åï¼Œå¾—æ•° DataHub æ‰¿æ‹…èµ·äº†å®šä¹‰â€œæ•°è¯¥æ€ä¹ˆè¢«çœ‹è§â€çš„èŒè´£ã€‚æˆ‘ä»¬å°†è¿™å±‚é€»è¾‘æŠ½è±¡ä¸º <strong>â€œå±•ç¤ºè¯­ä¹‰â€ï¼ˆVisualization Semanticsï¼‰</strong> ï¼š</p>
<ul>
<li><strong>å®šç±»å‹ï¼ˆTypeï¼‰</strong> ï¼šå®ƒæ˜¯é‡‘é¢ï¼ˆCurrencyï¼‰ã€æ¯”ç‡ï¼ˆRatioï¼‰ï¼Œè¿˜æ˜¯è®¡æ•°ï¼ˆIntegerï¼‰ï¼Ÿ</li>
<li><strong>å®šå•ä½ï¼ˆUnitï¼‰</strong> ï¼šé»˜è®¤æ˜¯å…ƒ / ä¸‡å…ƒï¼Œè¿˜æ˜¯ %ã€â€° ï¼ˆåƒåˆ†æ¯”ï¼‰ æˆ– bp ï¼ˆåŸºç‚¹ï¼‰ï¼Ÿ</li>
<li><strong>å®šç²¾åº¦ï¼ˆPrecisionï¼‰</strong> ï¼šå°æ•°ä½æ˜¯å›ºå®šä¿ç•™ä¸¤ä½ï¼Œè¿˜æ˜¯æ ¹æ®æ•°å€¼å¤§å°åŠ¨æ€æˆªæ–­ï¼Ÿ</li>
<li><strong>å®šçŠ¶æ€ï¼ˆStateï¼‰</strong> ï¼šé‡åˆ° Nullï¼ˆç©ºå€¼ï¼‰ã€Errorï¼ˆå¼‚å¸¸ï¼‰æˆ– Epsilonï¼ˆæå°å€¼ï¼‰ï¼Œå±•ç¤ºå±‚è¯¥å¦‚ä½•å…œåº•ï¼Ÿ</li>
<li><strong>å®šåœºæ™¯ï¼ˆContextï¼‰</strong> ï¼š åœ¨ç©ºé—´å±€ä¿ƒçš„ KPI å¡ç‰‡é‡Œï¼ˆè¿½æ±‚ç®€æ´ï¼‰ï¼Œå’Œéœ€è¦è´¢åŠ¡æ ¸å¯¹çš„ æ˜ç»†è¡¨æ ¼é‡Œï¼ˆè¿½æ±‚ç²¾ç¡®ï¼‰ï¼Œæ˜¯å¦åº”ç”¨ä¸åŒçš„æ¸²æŸ“ç­–ç•¥ï¼Ÿ</li>
</ul>
<p><strong>è¿™æ˜¯ä¸€ç§æ¶æ„ä¸Šçš„å‡ç»´ï¼š</strong></p>
<p>è¿™äº›å…³äºâ€œé•¿ä»€ä¹ˆæ ·â€çš„é€»è¾‘ï¼Œä»æ­¤ä¸å†æ•£è½åœ¨ä¸šåŠ¡ä»£ç çš„ â if-else é‡Œï¼Œè€Œæ˜¯è¢«ç»Ÿä¸€æ”¶æ‹¢åˆ°å…ƒæ•°æ®ç³»ç»Ÿä¸­è¿›è¡Œç®¡ç†ã€‚</p>
<p>ä»è¿™ä¸€åˆ»èµ·ï¼Œæ•°å­—æ ¼å¼åŒ–ä¸å†æ˜¯å‰ç«¯æ¨¡æ¿é‡Œçš„ä¸€ä¸ªå°å·¥å…·ï¼Œè€Œæ˜¯æˆä¸ºäº†å¾—æ•°ä½“ç³»çš„ä¸€é¡¹<strong>åŸºç¡€è®¾æ–½</strong>â€”â€”ä¸€å±‚ç‹¬ç«‹ã€å¯é…ç½®ã€å¯æ²»ç†çš„<strong>æ•°æ®é¢†åŸŸæœåŠ¡</strong>ã€‚</p>
<h2 data-id="heading-10">äº”ã€å¼€å§‹é€ è½®å­ï¼šç«™åœ¨Intl.NumberFormat è‚©è†€ä¸Š</h2>
<p>åœ¨ç€æ‰‹å¼€å‘ä¹‹å‰ï¼Œé¦–å…ˆç¡®ç«‹äº†ä¸€ä¸ªåŸåˆ™ï¼š<strong>åº•å±‚èƒ½åŠ›ä¸é€ è½®å­ï¼Œæ‹¥æŠ± Web æ ‡å‡†ã€‚</strong></p>
<p>ECMAScript 402 æ ‡å‡†ä¸­çš„ â Intl.NumberFormat å·²ç»ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæå…¶å¼ºå¤§çš„æœ¬åœ°åŒ–æ ¼å¼åŒ–å¼•æ“ã€‚å®ƒçš„èƒ½åŠ›è¿œè¶…å¤§å¤šæ•°æ‰‹å†™çš„æ­£åˆ™æ›¿æ¢ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span>Â n =Â <span class="hljs-number">123456.789</span>;


<span class="hljs-comment">// å¾·å›½ï¼šç‚¹å·åˆ†ç»„ã€é€—å·å°æ•°</span>
<span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Intl</span>.<span class="hljs-title class_">NumberFormat</span>(<span class="hljs-string">'de-DE'</span>).<span class="hljs-title function_">format</span>(n);
<span class="hljs-comment">// "123.456,789"</span>


<span class="hljs-comment">// å°åº¦ï¼šlakh/crore åˆ†ç»„</span>
<span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Intl</span>.<span class="hljs-title class_">NumberFormat</span>(<span class="hljs-string">'en-IN'</span>).<span class="hljs-title function_">format</span>(n);
<span class="hljs-comment">// "1,23,456.789"</span>


<span class="hljs-comment">// æ—¥å…ƒè´§å¸ï¼šé»˜è®¤ 0 ä½å°æ•°</span>
<span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Intl</span>.<span class="hljs-title class_">NumberFormat</span>(<span class="hljs-string">'ja-JP'</span>, {
Â Â <span class="hljs-attr">style</span>:Â <span class="hljs-string">'currency'</span>,
Â Â <span class="hljs-attr">currency</span>:Â <span class="hljs-string">'JPY'</span>,
}).<span class="hljs-title function_">format</span>(n);
<span class="hljs-comment">// "ï¿¥123,457"</span>
</code></pre>
<p>å®ƒå®Œç¾è§£å†³äº†é‚£äº›æœ€è®©å‰ç«¯å¤´ç–¼çš„<strong>å›½é™…åŒ–åº•å±‚é—®é¢˜</strong>ï¼š</p>
<ul>
<li><strong>æ–‡åŒ–å·®å¼‚</strong>ï¼šå…¨çƒå„åœ°çš„åƒåˆ†ä½ã€å°æ•°ç‚¹ã€æ•°å­—ç¬¦å·ä¹ æƒ¯ï¼›</li>
<li><strong>è´§å¸è§„åˆ™</strong>ï¼šä¸åŒå¸ç§çš„æ ‡å‡†å°æ•°ä½ï¼ˆå¦‚æ—¥å…ƒ 0 ä½ï¼Œç¾å…ƒ 2 ä½ï¼‰å’Œç¬¦å·ä½ç½®ï¼›</li>
<li><strong>å¤šæ€æ”¯æŒ</strong>ï¼šå†…ç½®äº†ç™¾åˆ†æ¯”ã€ç´§å‡‘ç¼©å†™ï¼ˆCompact Notationï¼‰ã€ç§‘å­¦è®¡æ•°æ³•ç­‰æ¨¡å¼ï¼›</li>
<li><strong>æ’ç‰ˆèƒ½åŠ›</strong>ï¼šé€šè¿‡ <strong>â formatToPartsï¼ˆï¼‰</strong> å°†æ•°å­—æ‹†è§£ä¸ºæ•°ç»„ï¼ˆæ•´æ•°éƒ¨åˆ†ã€å°æ•°éƒ¨åˆ†ã€ç¬¦å·ç­‰ï¼‰ï¼Œä¸ºç²¾ç»†åŒ–æ’ç‰ˆæä¾›äº†å¯èƒ½ï¼Œæ¯”å¦‚åœ¨å°æ•°æˆ–ç™¾åˆ†æ¯”ç¬¦å·æ¯”æ•´æ•°å° 2 ä¸ªå­—å·ã€‚</li>
</ul>
<p><strong>ä½†æ˜¯ï¼Œå®ƒå¤©ç„¶â€œä¸æ‡‚â€ä¸šåŠ¡ï¼š</strong></p>
<ul>
<li>å®ƒä¸æ‡‚<strong>ä¸­æ–‡çš„ä¹ æƒ¯</strong>ï¼šæ— æ³•ç›´æ¥å®ç°â€œ<strong>å…†/äº¬/å“</strong>â€è¿™ç§ä¸­æ–‡è¶…å¤§æ•°ç¼©å†™é€»è¾‘ï¼ˆæ ‡å‡†æœ€å¤šæ”¯æŒåˆ°äº¿ï¼‰ï¼›</li>
<li>å®ƒä¸æ‡‚<strong>å¾—æ•°çš„è§„èŒƒ</strong>ï¼šä¸çŸ¥é“ â *_rate ç±»å‹çš„æŒ‡æ ‡åœ¨ç©ºå€¼æ—¶è¦æ˜¾ç¤º â "-"ï¼Œåœ¨æå°å€¼æ—¶è¦æ˜¾ç¤º â &lt; 0.01%ï¼›</li>
<li>å®ƒä¸æ‡‚<strong>ä¸šåŠ¡çš„ä¸Šä¸‹æ–‡</strong>ï¼šä¸çŸ¥é“ GMV åœ¨ KPI å¡ç‰‡é‡Œè¦æŒ‰â€œä¸‡å…ƒâ€å±•ç¤ºï¼Œè€Œåœ¨è´¢åŠ¡æŠ¥è¡¨é‡Œå¿…é¡»ç²¾ç¡®åˆ°â€œå˜â€ã€‚</li>
</ul>
<p><strong>å› æ­¤ï¼Œæˆ‘ä»¬çš„æœ€ç»ˆçš„æ¶æ„ç­–ç•¥æ˜¯ï¼š</strong></p>
<p>ä»¥ â Intl.NumberFormat ä¸ºåº•å±‚çš„â€œæ¸²æŸ“å¼•æ“â€ï¼›</p>
<p>åœ¨å…¶ä¹‹ä¸Šæ­å»ºä¸€å±‚â€œæ•°å­—é¢†åŸŸå±‚â€ï¼ˆDomain Layerï¼‰ï¼›</p>
<p>ä¸“é—¨ç”¨äºè½¬è¯‘å¾—ç‰©çš„ä¸šåŠ¡è§„åˆ™å’Œæ’ç‰ˆè¯­ä¹‰ã€‚</p>
<h2 data-id="heading-11">å…­ã€@dfx/number-formatï¼šæ„å»ºæ•°å­—çš„â€œé¢†åŸŸå±‚â€</h2>
<p>åœ¨å¾—ç‰©æ•°æ®å‰ç«¯çš„å¤§ä»“é‡Œï¼Œæˆ‘ä»¬æŠŠè¿™å±‚èƒ½åŠ›å®ç°ä¸ºä¸€ä¸ªç‹¬ç«‹åŒ…ï¼š@dfx/number-formatã€‚ä¸“é—¨æœåŠ¡å¾—æ•°ã€æ™ºç ã€æ™ºèƒ½è¿è¥ç­‰å†…éƒ¨ç³»ç»Ÿã€‚</p>
<p>å¯ä»¥æŠŠå®ƒç†è§£ä¸ºä¸‰ä»¶äº‹çš„ç»„åˆï¼š</p>
<ul>
<li>ä¸€ä¸ªç»Ÿä¸€å°è£…äº†Intl.NumberFormatçš„<strong>æ ¸å¿ƒå¼•æ“</strong>ï¼ˆå«ç¼“å­˜ã€è§£æï¼‰ï¼›</li>
<li>ä¸€å¥—å¯ä»¥è¢«é…ç½®çš„<strong>ä¸šåŠ¡è§„åˆ™ / é¢„è®¾ ï¼ˆpresetï¼‰å’Œæ’ä»¶ç³»ç»Ÿ</strong>ï¼›</li>
<li>ä¸€ç»„é¢å‘ React å’Œ Node ç¯å¢ƒçš„<strong>æ¥å£</strong>ï¼ˆç»„ä»¶ + Hook + FP å‡½æ•°ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-12">6.1 å£°æ˜å¼å¼€å‘ï¼šæŠŠâ€œæ•°å­—é•¿ä»€ä¹ˆæ ·â€æŠ½è±¡æˆè§„åˆ™</h4>
<p>åœ¨ä¸šåŠ¡å¼€å‘ä¾§ï¼Œæœ€ç»ˆæœŸæœ›çš„ç›®æ ‡æ˜¯ï¼š<strong>è®©å¼€å‘è€…åªå…³å¿ƒâ€œè¿™æ˜¯ä»€ä¹ˆæŒ‡æ ‡â€ï¼Œè€Œä¸å…³å¿ƒâ€œå®ƒè¯¥æ€ä¹ˆå±•ç¤ºâ€ã€‚</strong></p>
<p><strong>åœºæ™¯ä¸€ï¼šåŸºç¡€æ ¼å¼åŒ–</strong></p>
<p>æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ç»„ä»¶ï¼Œä»¥å£°æ˜å¼çš„æ–¹å¼è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">importÂ {Â NumberFormatÂ }Â fromÂ '@dfx/number-format'<span class="hljs-comment">;</span>
// æ— è®ºåœ¨å“ªä¸ªé¡µé¢ï¼Œä»·æ ¼éƒ½åªéœ€è¿™æ ·å†™
&lt;NumberFormat
Â Â <span class="hljs-attr">value</span>={price}
Â Â <span class="hljs-attr">options</span>={{Â style:Â <span class="hljs-string">'currency'</span>,Â currency:Â <span class="hljs-string">'CNY'</span> }}
/&gt;
</code></pre>
<p><strong>åœºæ™¯äºŒï¼šåŸºäºè¯­ä¹‰çš„è‡ªåŠ¨æ ¼å¼åŒ–</strong></p>
<p>æ›´è¿›é˜¶çš„ç”¨æ³•æ˜¯ï¼Œåœ¨ç³»ç»Ÿå±‚é¢å®šä¹‰å¥½â€œè§„åˆ™é›†â€ï¼Œä¸šåŠ¡ç»„ä»¶åªéœ€ä¼ å…¥æŒ‡æ ‡åç§°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span>Â {Â <span class="hljs-title class_">NumberFormatProvider</span>,Â <span class="hljs-title class_">AutoMetricNumber</span>Â }Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'@dfx/number-format'</span>;
<span class="hljs-comment">// 1. å®šä¹‰è§„åˆ™ï¼šæ‰€æœ‰ "price.cny" ç±»å‹çš„æŒ‡æ ‡ï¼Œéƒ½éµå¾ªäººæ°‘å¸æ ¼å¼</span>
<span class="hljs-keyword">const</span>Â rules = [
Â  {Â <span class="hljs-attr">name</span>:Â <span class="hljs-string">'price.cny'</span>,Â <span class="hljs-attr">options</span>: {Â <span class="hljs-attr">style</span>:Â <span class="hljs-string">'currency'</span>,Â <span class="hljs-attr">currency</span>:Â <span class="hljs-string">'CNY'</span>Â } },
];
<span class="hljs-comment">// 2. æ³¨å…¥ä¸Šä¸‹æ–‡</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">NumberFormatProvider</span>Â <span class="hljs-attr">options</span>=<span class="hljs-string">{{</span>Â <span class="hljs-attr">rules</span>Â }}&gt;</span>
Â  {/* 3. ä¸šåŠ¡ä½¿ç”¨ï¼šå®Œå…¨è§£è€¦ï¼Œåªä¼ è¯­ä¹‰ */}
Â Â <span class="hljs-tag">&lt;<span class="hljs-name">AutoMetricNumber</span>Â <span class="hljs-attr">name</span>=<span class="hljs-string">"price.cny"</span>Â <span class="hljs-attr">value</span>=<span class="hljs-string">{price}</span>Â /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">NumberFormatProvider</span>&gt;</span></span>
</code></pre>
<p><strong>æ”¶ç›Šæ˜¾è€Œæ˜“è§ï¼š</strong></p>
<ul>
<li><strong>è‡ªåŠ¨åŒ–</strong>ï¼šCNY è‡ªåŠ¨å¸¦ä¸¤ä½å°æ•°ï¼Œåˆ‡åˆ° JPY è‡ªåŠ¨å˜ 0 ä½å°æ•°ï¼Œé€»è¾‘å®Œå…¨ç”±åº•å±‚æ¥ç®¡ã€‚</li>
<li><strong>ä¸€è‡´æ€§</strong>ï¼šå…¨ç«™æ‰€æœ‰ â price.cny çš„åœ°æ–¹ï¼Œåƒåˆ†ä½ã€ç¬¦å·ä½ç½®ä¸¥æ ¼ç»Ÿä¸€ï¼Œç‰ˆé¢èŠ‚å¥è‡ªç„¶å¯¹é½ã€‚</li>
</ul>
<p><strong>åœºæ™¯ä¸‰ï¼šæ‰¹é‡åŒ¹é…æ¯”ç‡æŒ‡æ ‡</strong></p>
<p>å¯¹äºæˆç™¾ä¸Šåƒä¸ªè½¬åŒ–ç‡æŒ‡æ ‡ï¼Œæˆ‘ä»¬ä¸éœ€è¦é€ä¸€å®šä¹‰ï¼Œåªéœ€ä¸€æ¡æ­£åˆ™è§„åˆ™ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span>Â rules = [
Â Â <span class="hljs-comment">// åŒ¹é…æ‰€æœ‰ä»¥ _rate ç»“å°¾çš„æŒ‡æ ‡ï¼Œè‡ªåŠ¨è½¬ä¸ºç™¾åˆ†æ¯”ï¼Œä¿ç•™2ä½å°æ•°</span>
Â  {Â <span class="hljs-attr">pattern</span>:Â <span class="hljs-regexp">/_rate$/i</span>,Â <span class="hljs-attr">options</span>: {Â <span class="hljs-attr">style</span>:Â <span class="hljs-string">'percent'</span>,Â <span class="hljs-attr">maximumFractionDigits</span>:Â <span class="hljs-number">2</span>Â } },
];


<span class="hljs-comment">// é¡µé¢ä»£ç æå…¶å¹²å‡€</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AutoMetricNumber</span>Â <span class="hljs-attr">name</span>=<span class="hljs-string">"conversion_rate"</span>Â <span class="hljs-attr">value</span>=<span class="hljs-string">{conversionRate}</span>Â /&gt;</span></span>
</code></pre>
<p>ç©ºå€¼ä¸å¼‚å¸¸å€¼å¦‚ä½•å±•ç¤ºã€æå°å€¼æ˜¯å¦æ˜¾ç¤º &lt; 0.01%ã€ä¸¤ä½å°æ•°ä»å“ªé‡Œæ¥ï¼Œå…¨éƒ¨åœ¨è§„åˆ™ + æ’ä»¶é‡Œå¤„ç†ã€‚</p>
<h4 data-id="heading-13">6.2æ’ä»¶ç³»ç»Ÿï¼šæ”¶å£é‚£äº›â€œå¥‡æ€ªä½†å¸¸è§â€çš„éœ€æ±‚</h4>
<p>å¾—ç‰©çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œå­˜åœ¨å¤§é‡ â Intl æ ‡å‡†æ— æ³•ç›´æ¥è¦†ç›–çš„è¾¹ç¼˜éœ€æ±‚ã€‚æˆ‘ä»¬å°†è¿™äº›éœ€æ±‚ç»Ÿä¸€å»ºæ¨¡ä¸º<strong>æ’ä»¶ï¼ˆFormat Pluginï¼‰</strong> ï¼Œä»‹å…¥æ ¼å¼åŒ–çš„ç”Ÿå‘½å‘¨æœŸï¼š</p>
<ul>
<li><strong>åƒåˆ†æ¯” / åŸºç‚¹ ï¼ˆbpsï¼‰</strong> ï¼šéœ€åœ¨ â pre-process é˜¶æ®µå°†æ•°å€¼ä¹˜ 1000 æˆ– 10000ï¼›</li>
<li><strong>ä¸­æ–‡å¤§å†™é‡‘é¢</strong>ï¼šä¼šè®¡ä¸åˆåŒåœºæ™¯çš„ç‰¹æ®Šè½¬æ¢ï¼›</li>
<li><strong>æå°å€¼å…œåº•</strong>ï¼šè®¾å®šé˜ˆå€¼ï¼Œå½“æ•°å€¼å°äº â 0.0001 æ—¶ï¼Œâ post-process é˜¶æ®µè¾“å‡º â &lt; 0.01%ï¼›</li>
<li><strong>ä¼šè®¡æ ¼å¼</strong>ï¼šè´Ÿæ•°ä½¿ç”¨æ‹¬å· â ï¼ˆ1ï¼Œ234.56ï¼‰ è€Œéè´Ÿå·ï¼›</li>
<li><strong>åŠ¨æ€ç²¾åº¦ç­–ç•¥</strong>ï¼šæ ¹æ®æ•°å€¼å¤§å°åŠ¨æ€å†³å®šä¿ç•™å‡ ä½å°æ•°ã€‚</li>
</ul>
<p><strong>è¿™å¥—æ’ä»¶æœºåˆ¶çš„æ„ä¹‰åœ¨äºâ€œæ²»ç†â€ï¼š</strong></p>
<p>å®ƒè®©â€œåœ¨æŸä¸ªä¸šåŠ¡ä»“åº“é‡Œå·å·å†™ä¸€ä¸ªç‰¹æ®Šæ­£åˆ™â€æˆä¸ºè¿‡å»å¼ã€‚ä»»ä½•æ–°çš„æ ¼å¼åŒ–éœ€æ±‚ï¼Œéƒ½å¿…é¡»ä»¥æ’ä»¶å½¢å¼æ¥å…¥ï¼Œç”±æ•°æ®å‰ç«¯ç»Ÿä¸€è¯„å®¡ã€æ²‰æ·€ï¼Œæœ€ç»ˆå¤ç”¨åˆ°å…¨ç«™ã€‚</p>
<h4 data-id="heading-14">6.3 å…¨é“¾è·¯æ‰“é€šï¼šä»Galaxyå…ƒæ•°æ®åˆ°UIæ¸²æŸ“</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60ccb2a6339c4eb68d7f2915714592e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764666974&amp;x-signature=9QYAo6JXNJmsp5kb%2BiheKIS%2BgUc%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>æœ€åï¼Œå°†è¿™å¥—ç³»ç»Ÿä¸å¾—æ•°çš„ä¸­å°èƒ½åŠ›æ‰“é€šï¼ˆä¹Ÿæ˜¯ç›®å‰æˆ‘ä»¬æ­£åœ¨åšçš„ï¼‰ï¼Œå½¢æˆäº†ä¸€æ¡å®Œæ•´çš„æ¸²æŸ“é“¾è·¯ã€‚</p>
<p>åœ¨Galaxyå’Œå¾—æ•°çš„å…ƒæ•°æ®é‡Œï¼ŒæŒ‡æ ‡æœ¬èº«å·²ç»æœ‰codeã€labelã€type ç­‰å­—æ®µã€‚æˆ‘ä»¬åªéœ€è¦å†åŠ ä¸€ç‚¹çº¦å®šï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
Â Â <span class="hljs-attr">"metricCode"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"gmv"</span><span class="hljs-punctuation">,</span>
Â Â <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"GMV"</span><span class="hljs-punctuation">,</span>
Â Â <span class="hljs-attr">"format"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"currency"</span><span class="hljs-punctuation">,</span>Â <span class="hljs-comment">// åŸºç¡€ç±»å‹</span>
Â Â <span class="hljs-attr">"meta"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">{</span>
Â  Â Â <span class="hljs-attr">"formatConfig"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">{</span><span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"currency"</span><span class="hljs-punctuation">,</span>Â <span class="hljs-attr">"maximumFractionDigits"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-number">2</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>Â 
Â  Â Â <span class="hljs-attr">"category"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">[</span><span class="hljs-string">"äº¤æ˜“æŒ‡æ ‡"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
Â  Â Â <span class="hljs-attr">"displayConfig"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">{</span>Â <span class="hljs-attr">"table"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"precise"</span><span class="hljs-punctuation">,</span>Â <span class="hljs-attr">"card"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"compact"</span>Â <span class="hljs-punctuation">}</span>
Â Â <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>å‰ç«¯æ¸²æŸ“æ—¶</strong>ï¼š</p>
<ul>
<li>é…ç½®ä¸‹å‘ï¼šé¡µé¢åŠ è½½æ—¶ï¼Œè·å–æŒ‡æ ‡çš„ â Code åŠå…ƒä¿¡æ¯ï¼Œè½¬æ¢ä¸ºå‰ç«¯çš„ â MetricFormatRule[]ã€‚</li>
<li>ä¸Šä¸‹æ–‡æ³¨å…¥ï¼šåœ¨åº”ç”¨æ ¹èŠ‚ç‚¹é€šè¿‡ â NumberFormatProvider æ³¨å…¥è§„åˆ™é›†ã€‚</li>
<li>å‚»ç“œå¼ä½¿ç”¨ï¼šè¡¨æ ¼ã€å¡ç‰‡ã€å›¾è¡¨ç»„ä»¶åªéœ€æ¶ˆè´¹æŒ‡æ ‡ IDï¼š</li>
</ul>
<p>è¿™æ ·ä¸€æ¥å°±å®ç°äº†çœŸæ­£çš„ã€æ•°æ®é©±åŠ¨ UIã€ï¼š</p>
<ul>
<li>â€œæŒ‡æ ‡é•¿ä»€ä¹ˆæ ·â€åªåœ¨å¾—æ•°å…ƒæ•°æ®ç®¡ç†ä¸­å®šä¹‰ä¸€æ¬¡ã€‚</li>
<li>ä¿®æ”¹å±•ç¤ºè§„åˆ™ï¼ˆå¦‚è°ƒæ•´ç²¾åº¦ï¼‰ï¼Œåªéœ€æ”¹é…ç½®ï¼Œ<strong>æ— éœ€æ‰¹é‡ä¿®æ”¹å‰ç«¯ä»£ç ï¼Œæ›´æ— éœ€é‡æ–°å‘ç‰ˆï¼›</strong></li>
<li>å‰å°ä¸šåŠ¡ä¸ä¸­å°æŠ¥è¡¨çœ‹åˆ°çš„åŒä¸€ä¸ªæŒ‡æ ‡ï¼Œæ ¼å¼æ°¸è¿œæ˜¯ç‰©ç†ä¸Šçš„ä¸€è‡´ã€‚</li>
</ul>
<h2 data-id="heading-15">ä¸ƒã€ç»Ÿä¸€ä¹‹åï¼šé‡å¡‘è®¾è®¡ã€å·¥ç¨‹ä¸ä¸šåŠ¡çš„ä»·å€¼</h2>
<p>ä»æˆ‘ä»¬çš„è§†è§’å‡ºå‘ï¼Œè¿™å¥—ç»Ÿä¸€æ•°å­—æ ¼å¼æ–¹æ¡ˆçš„è½åœ°ï¼Œå¸¦æ¥çš„æ”¶ç›Šè¿œä¸æ­¢â€œä»£ç æ•´æ´â€é‚£ä¹ˆç®€å•ï¼Œå®ƒåœ¨ä¸‰ä¸ªå±‚é¢äº§ç”Ÿäº†æ·±è¿œçš„å½±å“ã€‚</p>
<h4 data-id="heading-16">7.1 å¯¹è®¾è®¡ä¸æ’ç‰ˆï¼šç‰ˆé¢ç»ˆäºå¯æ§äº†</h4>
<p>æ›¾ç»ï¼Œäº§å“éœ€è¦åœ¨æ¯ä¸ªé¡µé¢çš„éªŒæ”¶ä¸­åå¤çº ç»“æ•°å­—çš„å¯¹é½å’Œç²¾åº¦ã€‚ç°åœ¨ï¼Œè®¾è®¡è§„èŒƒåªéœ€åœ¨æ–‡æ¡£ä¸­å®šä¹‰ä¸€æ¬¡ï¼š</p>
<ul>
<li><strong>é‡‘é¢ç±»</strong>ï¼šç»Ÿä¸€ä¿ç•™ä¸¤ä½å°æ•°ï¼Œå¼ºåˆ¶å³å¯¹é½ï¼Œè´§å¸ç¬¦å·åŠè§’åŒ–ï¼›</li>
<li><strong>æ¯”ç‡ç±»</strong>ï¼šç©ºå€¼å…œåº•ä¸º â â€”ï¼Œå¼‚å¸¸å€¼æ˜¾ç¤º â N/Aï¼Œæå°å€¼è½¬è¯‘ä¸º â &lt; 0.01%ï¼›</li>
<li><strong>ç¼©å†™ç­–ç•¥</strong>ï¼šå…¨ç«™ç»Ÿä¸€éµå¾ªâ€œä¸­æ–‡ä¸‡/äº¿ã€è‹±æ–‡ k/M/Bâ€çš„æ¢¯åº¦é€»è¾‘ã€‚</li>
</ul>
<p>å¼€å‘åŒå­¦ä¸å†æ˜¯ã€å¤æ³•æ‰‹æ“ã€ï¼Œè€Œæ˜¯ç›´æ¥æ¥å…¥ç»Ÿä¸€çš„ Preset å’Œæ’ä»¶ã€‚</p>
<p>æ— è®ºæ˜¯çœ‹æ¿ã€è¯¦æƒ…é¡µï¼Œè¿˜æ˜¯å¯¼å‡ºçš„ Excel æŠ¥è¡¨ï¼Œæ•°å­—é£æ ¼ä¿æŒäº†åƒç´ çº§çš„ä¸€è‡´ã€‚ä»è§†è§‰è§’åº¦çœ‹ï¼Œæˆ‘ä»¬ç›¸å½“äº<strong>ç»™æ•°å­—å»ºç«‹äº†ä¸€å¥—Design Token</strong>ï¼šç²¾åº¦ã€å•ä½ã€å ä½ç¬¦éƒ½æœ‰äº†æ ‡å‡†ç´¢å¼•ï¼Œè®©æ•´ä¸ªå¹³å°å‘ˆç°å‡ºé«˜åº¦ç»Ÿä¸€çš„<strong>ä¸“ä¸šæ„Ÿå’ŒèŠ‚å¥æ„Ÿ</strong>ã€‚</p>
<h4 data-id="heading-17">7.2 å¯¹å·¥ç¨‹è´¨é‡ä¸æ•ˆç‡ï¼šä»â€œæœç´¢toFixedâ€åˆ°â€œæ”¹ä¸€å¤„ç”Ÿæ•ˆå…¨ç«™â€</h4>
<p>æ‰€æœ‰æ•°å­—æ ¼å¼é€»è¾‘é›†ä¸­åœ¨ä¸€ä¸ªé¢†åŸŸå±‚å’Œé…ç½®ä¸­å¿ƒã€‚</p>
<p>ä¸€ç±»æŒ‡æ ‡çš„è§„åˆ™å˜æ›´ï¼ˆç²¾åº¦ã€å•ä½ã€ç©ºå€¼ç­–ç•¥ï¼‰å¯ä»¥é…ç½®åŒ–è°ƒæ•´ã€‚</p>
<p>è§„çº¦å¯ä»¥è¿›å…¥ Lintï¼ˆæ•°å­—æ ¼å¼åŒ–é™åˆ¶ï¼‰ / Code Reviewï¼š</p>
<ul>
<li>ç¦æ­¢ç›´æ¥åœ¨ä¸šåŠ¡ä»£ç ä¸­new Intl.NumberFormatã€toFixedæ‹¼å­—ç¬¦ä¸²ï¼›</li>
<li>é¼“åŠ±æ‰€æœ‰æ•°å­—å±•ç¤ºå…¨éƒ¨èµ°@dfx/number-formatä¸ DataHub è§„åˆ™ã€‚</li>
</ul>
<p>è¿™å°±æ˜¯å·¥ç¨‹æ²»ç†å±‚é¢çš„ä»·å€¼ï¼šå®ƒå°†â€œä¾èµ–å¼€å‘è€…è‡ªè§‰â€çš„è½¯çº¦æŸï¼Œå˜æˆäº† <strong>â€œå¯é…ç½®ã€å¯ç»´æŠ¤ã€å¯è¿­ä»£â€çš„ç³»ç»Ÿèƒ½åŠ›</strong>ã€‚</p>
<h4 data-id="heading-18">7.3 å¯¹ä¸šåŠ¡å’Œæ•°æ®ä¿¡ä»»ï¼šä»â€œæ€€ç–‘è¿™æ•°æœ‰é—®é¢˜â€åˆ°â€œæ„¿æ„ç”¨æ¥å†³ç­–â€</h4>
<p>ç»Ÿä¸€æ•°å­—æ ¼å¼è¿˜æœ‰ä¸€ä¸ªæœ€éšæ€§ã€å´æœ€æ ¸å¿ƒçš„ä»·å€¼ï¼š<strong>é‡æ„æ•°æ®ä¿¡ä»»ã€‚</strong></p>
<ul>
<li><strong>æ¶ˆé™¤æ­§ä¹‰</strong>ï¼šå‰å°å•†å“ä»·æ ¼ä¸ä¸­å°æŠ¥è¡¨é‡‘é¢å®Œå…¨ä¸€è‡´ï¼Œè¿è¥ä¸å†å› ä¸ºâ€œæ˜¾ç¤ºç²¾åº¦ä¸åŒâ€è€Œå»è´¨ç–‘æ•°æ®å‡†ç¡®æ€§ï¼›</li>
<li><strong>ç²¾å‡†è¯­ä¹‰</strong>ï¼šç©ºå€¼ï¼ˆNullï¼‰å’Œé›¶ï¼ˆZeroï¼‰è¢«æ¸…æ™°åŒºåˆ†ï¼Œé¿å…äº†å› æ ¼å¼é—®é¢˜å¯¼è‡´çš„é”™è¯¯å†³ç­–ã€‚</li>
</ul>
<p>åœ¨å¾—ç‰©ï¼Œ<strong>ä¸¥è°¨æ˜¯éœ€è¦åˆ»åœ¨åŸºå› é‡Œçš„å…³é”®è¯</strong>ã€‚</p>
<p>ä½œä¸ºæ•°æ®å‰ç«¯ï¼Œæˆ‘ä»¬æ·±çŸ¥ï¼š<strong>æ‡‚æ•°æ®ï¼Œå¹¶èƒ½ç”¨æœ€ä¸“ä¸šçš„æ–¹å¼å‘ˆç°æ•°æ®ï¼Œæ˜¯è¿™ä¸€å²—ä½çš„æ ¸å¿ƒç´ å…»</strong>ã€‚ å½“æˆ‘ä»¬ä¸ä»…èƒ½äº¤ä»˜ä»£ç ï¼Œè¿˜èƒ½é€šè¿‡ç²¾å‡†çš„æ•°å­—å±•ç¤ºæ¶ˆé™¤æ­§ä¹‰ã€ä¼ é€’ä¿¡ä»»æ—¶ï¼ŒæŠ€æœ¯ä¸ä¸šåŠ¡ä¹‹é—´å°±å»ºç«‹èµ·äº†ä¸€ç§æ·±å±‚çš„é»˜å¥‘ã€‚</p>
<p>è¿™ç§å¯¹æ•°å­—ç»†èŠ‚çš„æè‡´è¿½æ±‚ï¼Œä¸ä»…æ˜¯å¯¹ç”¨æˆ·ä½“éªŒçš„å°Šé‡ï¼Œæ›´æ˜¯å¯¹å¾—ç‰©â€œæ­£å“æ„Ÿâ€å“ç‰Œå¿ƒæ™ºåœ¨æ•°å­—ä¸–ç•Œçš„å»¶ä¼¸ã€‚</p>
<h2 data-id="heading-19">å…«ã€æ•°å­—ï¼Œæ˜¯ç‰ˆé¢çš„ã€æœ€åä¸€å…¬é‡Œã€</h2>
<p>å›å¤´çœ‹ï¼Œå¾—ç‰©æ•°æ®å‰ç«¯åœ¨å¾—æ•°ã€æ™ºç æ™ºèƒ½è¿è¥è¿™æ¡çº¿åšçš„ï¼Œå…¶å®æœ‰ä¸¤ä»¶äº‹ï¼š</p>
<ul>
<li><strong>ç»™äºˆæ•°å­—åº”æœ‰çš„â€œè®¾è®¡å°Šä¸¥â€</strong></li>
</ul>
<p>æˆ‘ä»¬ä¸å†å°†æ•°å­—è§†ä¸ºæ¨¡æ¿å­—ç¬¦ä¸²é‡Œä¸€ä¸ªéšæ—¶å¯æ›¿æ¢çš„â€œé»‘æ´â€ï¼Œè€Œæ˜¯å°†å…¶è§†ä½œä¸å­—ä½“ã€è‰²å½©ã€é—´è·åŒç­‰é‡è¦çš„æ’ç‰ˆå…ƒç´ ï¼Œçº³å…¥ç»Ÿä¸€çš„è®¾è®¡è¯­è¨€ç³»ç»Ÿã€‚</p>
<ul>
<li><strong>ä¸ºæ•°å­—æ„å»ºä¸“å±çš„â€œåŸºç¡€è®¾æ–½â€</strong></li>
</ul>
<p>æˆ‘ä»¬ä»¥ Web æ ‡å‡†â Intl.NumberFormatä¸ºå¼•æ“ï¼Œä»¥ â @dfx/number-formatä¸ºé¢†åŸŸå±‚ï¼Œä»¥å¾—æ•° Schema ä¸ºé…ç½®ä¸­æ¢ï¼Œå°†â€œæ•°å­—å¦‚ä½•å±•ç¤ºâ€è¿™ä¸€å‘½é¢˜ï¼Œä»ç¡¬ç¼–ç çš„æ³¥æ½­ä¸­è§£æ”¾å‡ºæ¥ï¼Œè½¬å˜ä¸ºä¸€ç§<strong>å¯é…ç½®ã€å¯æ²»ç†ã€å¯æ¼”è¿›çš„ç³»ç»Ÿèƒ½åŠ›ã€‚</strong></p>
<p>å½“ä½ å†å›å¤´çœ‹å…¬å¸äº§å“çš„å„ä¸ªé¡µé¢â€”â€”</p>
<ul>
<li>å‰å°å•†å“è¯¦æƒ…é¡µçš„ä»·æ ¼å’Œåˆ¸åä»·ï¼›</li>
<li>ç¤¾åŒºé‡Œçš„é˜…è¯»å’Œç‚¹èµæ•°å­—ï¼›</li>
<li>æ™ºç çš„ç­–ç•¥çœ‹æ¿ï¼›</li>
<li>å¾—æ•°çš„è‡ªåŠ©åˆ†ææŠ¥è¡¨ã€‚</li>
</ul>
<p>ä½ ä¼šå‘ç°å®ƒä»¬æ‹¥æœ‰äº†ä¸€ä¸ªå…±åŒçš„ç‰¹å¾ï¼š</p>
<p><strong>è¿™äº›æ•°å­—ä¸å†æ˜¯å„è¯´å„è¯çš„å™ªç‚¹ï¼Œè€Œæ˜¯å…±åŒæ“ç€åŒä¸€ç§ç²¾å‡†ã€ä¼˜é›…çš„â€œæ’ç‰ˆè¯­è¨€â€ã€‚</strong></p>
<p><strong>è¿™å°±æ˜¯æˆ‘ä»¬åšâ€œæ•°å­—æ ¼å¼åŒ–â€çš„åˆè¡·ï¼šç”¨æŠ€æœ¯çš„ç¡®å®šæ€§ï¼Œæ¢å–ä¸šåŠ¡çš„ä¸“æ³¨åŠ›ã€‚</strong></p>
<p>æ­¤æ—¶æ­¤åˆ»ï¼Œå½¼æ—¶å½¼åˆ»ï¼Œä½œä¸ºå‰ç«¯å¼€å‘ï¼Œä½ å¯ä»¥åšå®šåœ°è¯´å‡ºï¼šæˆ‘è¿™å±•ç¤ºçš„æ²¡é—®é¢˜ï¼Œæ˜¯æ•°å‡ºé—®é¢˜äº†ï½</p>
<h2 data-id="heading-20">ä¹ã€èµ°å‡ºæ•°æ®åŸŸï¼šä»å†…éƒ¨é—¨æˆ·åˆ°å…¨ä¸šåŠ¡</h2>
<p>å‰é¢çš„ç¯‡å¹…ï¼Œæ›´å¤šå›´ç»•ç€å¾—æ•°ã€æ™ºç ã€æ™ºèƒ½è¿è¥ç­‰ä¸­åå°ç³»ç»Ÿå±•å¼€ã€‚åœ¨è¿™äº›åœºæ™¯ä¸‹ï¼Œæ•°å­—æ ¼å¼åŒ–çš„æ ¸å¿ƒç”¨æˆ·æ˜¯è¿è¥ã€åˆ†æå¸ˆå’Œç®—æ³•åŒå­¦â€”â€”å¸®åŠ©ä»–ä»¬é€è¿‡æ•°æ®çœ‹æ¸…ä¸šåŠ¡èµ°åŠ¿ã€‚</p>
<p>ä½†è¿™å¥—èƒ½åŠ›å¹¶ä¸åº”å±€é™äºâ€œåå°â€ã€‚å®ƒå®Œå…¨å…·å¤‡èµ°å‡ºæ•°æ®åŸŸçš„æ½œåŠ›ï¼Œæˆä¸ºå¾—ç‰©å…¨ä¸šåŠ¡çº¿å…±äº«çš„ä¸€å±‚<strong>å…³é”®åŸºç¡€è®¾æ–½</strong>ã€‚</p>
<h4 data-id="heading-21">9.1 è·¨ä¸šåŠ¡çº¿ï¼šä»â€œè¿è¥çœ‹æ¿â€èµ°å‘â€œäº¤æ˜“é“¾è·¯â€</h4>
<p>ç›®å‰@dfx/number-format è™½ç„¶ç”Ÿé•¿äºæ•°æ®åœŸå£¤ï¼Œä½†å…¶è§£å†³çš„é—®é¢˜æ˜¯é€šç”¨çš„ã€‚æœªæ¥ï¼Œå®ƒå¯ä»¥è‡ªç„¶åœ°æ¸—é€åˆ°æ›´å¹¿é˜”çš„ä¸šåŠ¡åœºæ™¯ï¼š</p>
<ul>
<li><strong>äº¤æ˜“åŸŸ</strong>ï¼š ç»Ÿä¸€å•†å“è¯¦æƒ…é¡µã€ç»“ç®—é¡µçš„ä»·æ ¼ã€åˆ†æœŸè´¹ç‡ã€ç¨è´¹å±•ç¤ºé€»è¾‘ï¼›</li>
<li><strong>ç¤¾åŒºåŸŸ</strong>ï¼š æ ‡å‡†åŒ–ç¤¾åŒºè¯¦æƒ…é¡µä¸­çš„é£é™©åˆ†ã€é˜ˆå€¼ã€å‘½ä¸­ç‡ç²¾åº¦ï¼›</li>
<li><strong>å®¢æœåŸŸ</strong>ï¼š è§„èŒƒèµ”ä»˜é‡‘é¢ã€å·¥å•æ—¶é•¿çš„å±•ç¤ºå£å¾„ã€‚</li>
</ul>
<p><strong>è¿™åœ¨å·¥ç¨‹ä¸Šæ„å‘³ç€ä¸€æ¬¡â€œå‡ç»´â€ï¼š</strong></p>
<ul>
<li><strong>ä¾èµ–å‡çº§</strong>ï¼šå°† â @dfx/number-format ä»æ•°æ®åŸŸç§æœ‰åŒ…æå‡ä¸ºå…¬å¸çº§çš„åŸºç¡€ä¾èµ–ï¼›</li>
<li><strong>å¼€å‘èŒƒå¼</strong>ï¼šæ–°ä¸šåŠ¡åœ¨å¤„ç†æ•°å­—å±•ç¤ºæ—¶ï¼Œé»˜è®¤åŠ¨ä½œä¸å†æ˜¯â€œæ‰‹å†™ä¸€ä¸ª format å‡½æ•°â€ï¼Œè€Œæ˜¯æŸ¥é˜…ç°æœ‰çš„ Preset å’Œæ’ä»¶ï¼›</li>
</ul>
<p><strong>æœ€ç»ˆå¸¦æ¥çš„ä½“éªŒè´¨å˜æ˜¯ï¼š</strong></p>
<p>ç”¨æˆ·æ— è®ºæ˜¯åœ¨å¾—ç‰© Appçš„å‰å°é¡µé¢ï¼Œè¿˜æ˜¯åœ¨å†…éƒ¨çš„å„ç±»ç®¡ç†ç³»ç»Ÿä¸­ï¼Œçœ‹åˆ°çš„æ•°å­—éƒ½æ‹¥æœ‰<strong>åŒä¸€å¥—å‘¼å¸æ„Ÿå’Œè§†è§‰ä¹ æƒ¯</strong>ã€‚è¿™ç§è·¨ç«¯çš„ä¸€è‡´æ€§ï¼Œæ˜¯å“ç‰Œä¸“ä¸šæ„Ÿæœ€ç›´æ¥çš„ä½“ç°ã€‚</p>
<h4 data-id="heading-22">9.2 è·¨åœ°åŒºä¸æ±‡ç‡ï¼šæ„å»ºç‹¬ç«‹çš„â€œå…¨çƒåŒ–ä»·æ ¼èƒ½åŠ›â€</h4>
<p>éšç€å¾—ç‰©ä¸šåŠ¡çš„å‡ºæµ·ï¼Œå¤šåœ°åŒºã€å¤šå¸ç§æ˜¯ç»•ä¸å¼€çš„æŒ‘æˆ˜ã€‚æ­¤æ—¶ï¼Œæ•°å­—é¢†åŸŸå±‚ä¸ä»…è¦è´Ÿè´£â€œé•¿ä»€ä¹ˆæ ·â€ï¼Œæ›´è¦æ‰¿æ‹…èµ·â€œå±•ç¤ºç­–ç•¥â€çš„èŒè´£ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥è®¾æƒ³ä¸€ä¸ª**ã€Œå…¨çƒåŒ–ä»·æ ¼ç»„ä»¶ã€**ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;MultiRegionPrice
Â  <span class="hljs-attr">skuId</span>=<span class="hljs-string">"123456"</span>
Â  <span class="hljs-attr">basePriceCny</span>={price}
Â  <span class="hljs-attr">regions</span>={[
Â  Â  {Â locale:Â <span class="hljs-string">'zh-CN'</span>,Â currency:Â <span class="hljs-string">'CNY'</span>Â },
Â  Â  {Â locale:Â <span class="hljs-string">'en-US'</span>,Â currency:Â <span class="hljs-string">'USD'</span>Â },
Â  Â  {Â locale:Â <span class="hljs-string">'ja-JP'</span>,Â currency:Â <span class="hljs-string">'JPY'</span>Â },
Â  ]}
/&gt;
</code></pre>
<p>è¿™ä¸ªç»„ä»¶å°†è´Ÿè´£ä¸¤å±‚é€»è¾‘çš„è§£è€¦ï¼š</p>
<ul>
<li><strong>è®¡ç®—å±‚</strong>ï¼š è´Ÿè´£å®æ—¶æ±‡ç‡æ¢ç®—ã€å¤šå¸ç§ä»·æ ¼è®¡ç®—ã€‚</li>
<li><strong>å±•ç¤ºç­–ç•¥å±‚</strong>ï¼š</li>
<li>
<ul>
<li><strong>å¯¹ç…§å±•ç¤º</strong>ï¼š æ˜¯å¦æ˜¾ç¤ºâ€œåŸå¸ç§ + æœ¬åœ°å‚è€ƒä»·â€ï¼ˆå¦‚ â JPÂ¥ 20,000 ï¼ˆâ‰ˆ $135.00ï¼‰ï¼‰ï¼›</li>
<li><strong>æ–‡åŒ–é€‚é…</strong>ï¼š æ˜¯å¦éµå¾ªå½“åœ°çš„â€œå¿ƒç†ä»·ä½â€ç­–ç•¥ï¼ˆå¦‚ â <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>199.99</mn><mi>v</mi><mi>s</mi><mtext>â </mtext></mrow><annotation encoding="application/x-tex">199.99 vs â </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">199.99</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">s</span><span class="mord">â </span></span></span></span></span>200ï¼‰ï¼›</li>
<li><strong>æ ¼å¼æ¸²æŸ“</strong>ï¼š æœ€ç»ˆè°ƒç”¨ â @dfx/number-formatï¼Œç¡®ä¿æ—¥å…ƒæ— å°æ•°ã€ç¾å…ƒæœ‰å°æ•°ã€åˆ†èŠ‚å·æ­£ç¡®ã€‚</li>
</ul>
</li>
</ul>
<p>ä»å·¥ç¨‹è§†è§’çœ‹ï¼Œè¿™é¿å…äº†â€œæ±‡ç‡ç®—å¯¹äº†ã€æ•°å­—æ’ç‰ˆå…¨ä¹±äº†â€çš„å°´å°¬ï¼›ä»äº§å“è§†è§’çœ‹ï¼Œè¿™æ­£æ˜¯å¾—ç‰©æ²‰æ·€â€œ<strong>å‡ºæµ·æŠ€æœ¯å¥—ä»¶</strong>â€çš„é‡è¦ä¸€æ­¥ï¼ˆæ¯”å¦‚å›½é™…æ™ºèƒ½è¿è¥ï¼‰ã€‚</p>
<h4 data-id="heading-23">9.3 æ—¶é—´ä¸æ—¥æœŸï¼šç”¨åŒæ ·çš„æ€è·¯ï¼Œå»åšç¬¬äºŒæ¡â€œæ ¼å¼åŒ–ä¸»çº¿â€</h4>
<p>æ•°å­—æ˜¯ä¸€ç±»æŒ‘æˆ˜ï¼Œâ€œæ—¶é—´â€åˆ™æ˜¯å¦ä¸€ç±»ã€‚è·¨æ—¶åŒºè½¬æ¢ã€ç›¸å¯¹æ—¶é—´ï¼ˆæ­¤åˆ»ï¼‰ã€ä¸åŒåœ°åŒºçš„æ—¥æœŸå†™æ³•ï¼ˆâ DD/MM vs â MM/DDï¼‰ï¼Œå…¶å¤æ‚åº¦ä¸æ¯«ä¸äºšäºæ•°å­—ã€‚</p>
<p>æ—¢ç„¶æµè§ˆå™¨æä¾›äº†<strong>Intl.DateTimeFormat</strong>ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥å¤åˆ»æ•°å­—é¢†åŸŸå±‚çš„æˆåŠŸè·¯å¾„ï¼Œå†èµ¢ä¸€æ¬¡ï¼š</p>
<ul>
<li><strong>åŸºç¡€è®¾æ–½</strong>ï¼šæ„å»º â @dfx/date-formatï¼Œç»Ÿä¸€å°è£…æ—¶é—´æ ¼å¼åŒ–ä¸ç›¸å¯¹æ—¶é—´é€»è¾‘ï¼›</li>
<li><strong>é¢„è®¾ç®¡ç†</strong>ï¼šå®šä¹‰æ ‡å‡† Presetï¼ˆå¦‚â€œè¿è¥æŠ¥è¡¨ç”¨ â YYYY-MM-DDâ€ã€â€œC ç«¯åŠ¨æ€ç”¨ â ä»Šå¤© 12:30â€ï¼‰ï¼›</li>
<li><strong>ç»„ä»¶åŒ–</strong>ï¼šæä¾› â  å’Œ â  ç»„ä»¶ï¼›</li>
<li><strong>å…ƒæ•°æ®æ‰“é€š</strong>ï¼šåœ¨å¾—æ•°çš„å…ƒæ•°æ®ä¸­ï¼Œé’ˆå¯¹æ—¶é—´å‹çš„ç»´åº¦ä¹ŸåŒæ ·è¿›è¡Œé…ç½®ã€‚</li>
</ul>
<p>è¿™æ ·ï¼Œæ•°æ®å‰ç«¯çš„å±•ç¤ºå±‚å°±æ‹¥æœ‰äº†ä¸¤æ¡æ¸…æ™°çš„ä¸»çº¿ï¼š</p>
<ul>
<li><strong>æ•°å€¼ä¸»çº¿</strong>ï¼šâ Intl.NumberFormat â†’ â @dfx/number-format â†’Â <strong>æ•°å­—å±•ç¤ºè§„èŒƒ</strong></li>
<li><strong>æ—¶é—´ä¸»çº¿</strong>ï¼šâ Intl.DateTimeFormat â†’ â @dfx/date-format â†’Â <strong>æ—¶é—´å±•ç¤ºè§„èŒƒ</strong></li>
</ul>
<p>æœªæ¥ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥æŠ½è±¡å‡ºæ›´ä¸Šå±‚çš„ â @dfx/data-formatï¼Œè®©â€œä»»ä½•å­—æ®µè¯¥æ€ä¹ˆå±•ç¤ºâ€ï¼Œå®Œå…¨ç”± Schema é…ç½® + é¢†åŸŸå±‚è§„åˆ™å…±åŒå†³å®šã€‚</p>
<h2 data-id="heading-24">åã€æœ€åï¼šæŠŠâ€œå±•ç¤ºâ€è¿™ä»¶äº‹åšåˆ°æè‡´</h2>
<p>å¦‚æœåªçœ‹ä»£ç ï¼Œæˆ‘ä»¬åšçš„äº‹æƒ…ä¼¼ä¹å¾ˆç®€å•ï¼š</p>
<p>æŠŠ â Intl æ ‡å‡†ç”¨åˆ°æè‡´ï¼Œå°è£…äº†ä¸€å±‚é¢†åŸŸåº“ï¼Œå¹¶æ¥é€šäº†å…ƒæ•°æ®é…ç½®ï¼Œå†™äº†ä¸ªå·¥å…·åº“ã€‚</p>
<p>ä½†å¦‚æœä»äº§å“ä½“éªŒå’Œå·¥ç¨‹æ¼”è¿›çš„è§’åº¦çœ‹ï¼Œæˆ‘ä»¬å…¶å®å®Œæˆäº†ä¸€æ¬¡<strong>åŸºç¡€è®¾æ–½çš„å‡çº§</strong>ï¼š</p>
<p>æŠŠå‰ç«¯å¼€å‘ä¸­æœ€çç¢ã€æœ€å®¹æ˜“è¢«å¿½è§†çš„â€œæ•°å­—ä¸æ—¶é—´å±•ç¤ºâ€ï¼Œä»â€œåˆ°å¤„ç²˜è´´çš„å°å·¥å…·â€ï¼Œå‡çº§æˆäº†â€œæœ‰ç»Ÿä¸€è§„èŒƒã€æœ‰å¯è§‚æµ‹æ€§ã€æœ‰è¿­ä»£ç©ºé—´çš„ç³»ç»Ÿèƒ½åŠ›â€ã€‚</p>
<p>ç°åœ¨ï¼Œè¿™å¥—èƒ½åŠ›å·²ç»è®©å¾—æ•°ã€æ™ºç ã€æ™ºèƒ½è¿è¥çš„éƒ¨åˆ†æ¨¡å—é•¿å‡ºäº†ç»Ÿä¸€çš„â€œæ•°å­—æ°”è´¨â€ã€‚</p>
<p>æœªæ¥ï¼ŒæœŸæœ›å®ƒèƒ½å¤Ÿèµ°å‡ºæ•°æ®å¹³å°ï¼Œæ”¯æ’‘å¾—ç‰©æ›´å¹¿æ³›çš„ä¸šåŠ¡åœºæ™¯ï¼Œ<strong>è®©åŒä¸€ä»¶å•†å“ï¼Œåœ¨ä¸åŒåœ°åŒºã€ä¸åŒè¯­è¨€ã€ä¸åŒç»ˆç«¯ä¸Šï¼Œæ—¢ç®—å¾—å¯¹ï¼Œåˆçœ‹å¾—é¡ºã€‚</strong></p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcldr.unicode.org%2F" target="_blank" title="https://cldr.unicode.org/" ref="nofollow noopener noreferrer">cldr.unicode.org/</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fbook.douban.com%2Fsubject%2F1927608%2F" target="_blank" title="https://book.douban.com/subject/1927608/" ref="nofollow noopener noreferrer">book.douban.com/subject/192â€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.reddit.com%2Fr%2FAskHistorians%2Fcomments%2F104tkkj%2Fwhy_is_it_that_some_countries_use_the_and_as_a%2F%3Ftl%3Dzh-hans" target="_blank" title="https://www.reddit.com/r/AskHistorians/comments/104tkkj/why_is_it_that_some_countries_use_the_and_as_a/?tl=zh-hans" ref="nofollow noopener noreferrer">www.reddit.com/r/AskHistorâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fecma-international.org%2Fpublications-and-standards%2Fstandards%2Fecma-402%2F" target="_blank" title="https://ecma-international.org/publications-and-standards/standards/ecma-402/" ref="nofollow noopener noreferrer">ecma-international.org/publicationâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fglobalization%2Flocale%2Fnumber-formatting" target="_blank" title="https://learn.microsoft.com/en-us/globalization/locale/number-formatting" ref="nofollow noopener noreferrer">learn.microsoft.com/en-us/globaâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%25E5%25B0%258F%25E6%2595%25B8%25E9%25BB%259E" target="_blank" title="https://zh.wikipedia.org/wiki/%E5%B0%8F%E6%95%B8%E9%BB%9E" ref="nofollow noopener noreferrer">zh.wikipedia.org/wiki/%E5%B0â€¦</a></li>
</ul>
<h4 data-id="heading-25">å¾€æœŸå›é¡¾</h4>
<ol>
<li>
<p>ä¸€æ–‡è§£æå¾—ç‰©è‡ªå»º Redis æœ€æ–°æŠ€æœ¯æ¼”è¿›</p>
</li>
<li>
<p>Golang HTTPè¯·æ±‚è¶…æ—¶ä¸é‡è¯•ï¼šæ„å»ºé«˜å¯é ç½‘ç»œè¯·æ±‚ï½œå¾—ç‰©æŠ€æœ¯</p>
</li>
<li>
<p>RNä¸hawkç¢°æ’çš„ç«èŠ±ä¹‹C++å¼‚å¸¸æ•è·ï½œå¾—ç‰©æŠ€æœ¯</p>
</li>
<li>
<p>å¾—ç‰©TiDBå‡çº§å®è·µ</p>
</li>
<li>
<p>å¾—ç‰©ç®¡ç†ç±»ç›®é…ç½®çº¿ä¸ŠåŒ–ï¼šä»ä¸šåŠ¡ç—›ç‚¹åˆ°æŠ€æœ¯å®ç°</p>
</li>
</ol>
<h4 data-id="heading-26">æ–‡ /æŸé”</h4>
<p>å…³æ³¨å¾—ç‰©æŠ€æœ¯ï¼Œæ¯å‘¨æ›´æ–°æŠ€æœ¯å¹²è´§</p>
<p>è¦æ˜¯è§‰å¾—æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œæ¬¢è¿è¯„è®ºè½¬å‘ç‚¹èµï½</p>
<p>æœªç»å¾—ç‰©æŠ€æœ¯è®¸å¯ä¸¥ç¦è½¬è½½ï¼Œå¦åˆ™ä¾æ³•è¿½ç©¶æ³•å¾‹è´£ä»»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangChain1.0å®æˆ˜ä¹‹å¤šæ¨¡æ€RAGç³»ç»Ÿï¼ˆäºŒï¼‰â€”â€”å¤šæ¨¡æ€RAGç³»ç»Ÿå›¾ç‰‡åˆ†æä¸è¯­éŸ³è½¬å†™åŠŸèƒ½å®ç°]]></title>    <link>https://juejin.cn/post/7576155969606303779</link>    <guid>https://juejin.cn/post/7576155969606303779</guid>    <pubDate>2025-11-25T03:53:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576155969606303779" data-draft-id="7574967214128906266" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangChain1.0å®æˆ˜ä¹‹å¤šæ¨¡æ€RAGç³»ç»Ÿï¼ˆäºŒï¼‰â€”â€”å¤šæ¨¡æ€RAGç³»ç»Ÿå›¾ç‰‡åˆ†æä¸è¯­éŸ³è½¬å†™åŠŸèƒ½å®ç°"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,LangChain,MCP"/> <meta itemprop="datePublished" content="2025-11-25T03:53:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹çœŸå¥½ç©"/> <meta itemprop="url" content="https://juejin.cn/user/3140624091453053"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangChain1.0å®æˆ˜ä¹‹å¤šæ¨¡æ€RAGç³»ç»Ÿï¼ˆäºŒï¼‰â€”â€”å¤šæ¨¡æ€RAGç³»ç»Ÿå›¾ç‰‡åˆ†æä¸è¯­éŸ³è½¬å†™åŠŸèƒ½å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3140624091453053/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹çœŸå¥½ç©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T03:53:32.000Z" title="Tue Nov 25 2025 03:53:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä¸Šç¯‡åˆ†äº«ã€Š<a href="https://juejin.cn/post/7572836557142491136" target="_blank" title="https://juejin.cn/post/7572836557142491136">LangChain1.0å®æˆ˜ä¹‹å¤šæ¨¡æ€RAGç³»ç»Ÿï¼ˆä¸€ï¼‰â€”â€”å¤šæ¨¡æ€RAGç³»ç»Ÿæ ¸å¿ƒæ¶æ„åŠæ™ºèƒ½é—®ç­”åŠŸèƒ½å¼€å‘</a>ã€‹ä¸­ç¬”è€…ç³»ç»Ÿä»‹ç»äº†åŸºäº LangChain 1.0 æ„å»ºå¤šæ¨¡æ€ RAG ç³»ç»Ÿçš„æ•´ä½“æ¶æ„è®¾è®¡ï¼Œå¹¶å®Œæˆäº†æ™ºèƒ½é—®ç­”åŸºç¡€æ¨¡å—çš„å¼€å‘ï¼Œå®ç°äº†å¯¹è¯å†å²ç®¡ç†ã€æµå¼å“åº”ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚</p>
<p>æœ¬ç¯‡ç¬”è€…å°†åœ¨æ­¤åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥å®ç°å¤šæ¨¡æ€ RAG ç³»ç»Ÿçš„ä¸¤ä¸ªé‡è¦æ‰©å±•åŠŸèƒ½ï¼š<strong>å›¾ç‰‡å†…å®¹åˆ†æ</strong>ä¸<strong>è¯­éŸ³ä¿¡æ¯è½¬å†™</strong>ã€‚é€šè¿‡å¼•å…¥å¯¹å›¾åƒå’Œè¯­éŸ³æ•°æ®çš„å¤„ç†èƒ½åŠ›ï¼Œè®© RAG ç³»ç»ŸçœŸæ­£å…·å¤‡ç†è§£å’Œå“åº”å¤šç§æ¨¡æ€ä¿¡æ¯çš„èƒ½åŠ›ã€‚</p>
<p><strong>å­¦ä¹ å‰ç½®è¦æ±‚</strong>ï¼šæœ¬æ–‡æ˜¯ç³»åˆ—çš„ç¬¬äºŒç¯‡ï¼Œå¼ºçƒˆå»ºè®®å¤§å®¶å…ˆæŒæ¡ç¬¬ä¸€ç¯‡ä¸­ä»‹ç»çš„é¡¹ç›®æ¶æ„ã€ç¯å¢ƒé…ç½®å’ŒåŸºç¡€ä»£ç å®ç°ï¼Œè¿™å°†æœ‰åŠ©äºå¤§å®¶æ›´å¥½åœ°ç†è§£æœ¬æ–‡çš„å†…å®¹ã€‚</p>
<p>æœ¬ç³»åˆ—å†…å®¹é€‚åˆæ‰€æœ‰å¯¹ LangChain æ„Ÿå…´è¶£çš„å­¦ä¹ è€…ï¼Œæ— è®ºä¹‹å‰æ˜¯å¦æ¥è§¦è¿‡ LangChainã€‚å½“ç„¶ï¼Œå¦‚æœå¤§å®¶å·²ç»å­¦ä¹ è¿‡æˆ‘çš„ä¸“æ <a href="https://juejin.cn/column/7526240014499495972" title="https://juejin.cn/column/7526240014499495972" target="_blank">ã€Šæ·±å…¥æµ…å‡ºLangChain&amp;LangGraph AI Agent æ™ºèƒ½ä½“å¼€å‘ã€‹</a>ï¼Œç›¸ä¿¡å¯ä»¥æ›´å¿«ä¸Šæ‰‹ã€‚è¯¥ä¸“æ åŸºäºç¬”è€…åœ¨å®é™…é¡¹ç›®ä¸­çš„æ·±åº¦ä½¿ç”¨ç»éªŒï¼Œç³»ç»Ÿè®²è§£äº†ä½¿ç”¨LangChain/LangGraphå¦‚ä½•å¼€å‘æ™ºèƒ½ä½“ï¼Œç›®å‰å·²æ›´æ–° 27è®²ï¼Œå¹¶æŒç»­è¡¥å……å®æˆ˜ä¸æ‹“å±•å†…å®¹ã€‚æ¬¢è¿æ„Ÿå…´è¶£çš„åŒå­¦å…³æ³¨ç¬”è€…çš„æ˜é‡‘è´¦å·ä¸ä¸“æ ï¼Œä¹Ÿå¯å…³æ³¨ç¬”è€…çš„åŒåå¾®ä¿¡å…¬ä¼—å·Â <strong>å¤§æ¨¡å‹çœŸå¥½ç©</strong>ï¼Œæ¯æœŸåˆ†äº«æ¶‰åŠçš„ä»£ç å‡å¯åœ¨å…¬ä¼—å·ç§ä¿¡:Â <strong>LangChainæ™ºèƒ½ä½“å¼€å‘</strong>å…è´¹è·å–ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€å›¾ç‰‡åˆ†æåŠŸèƒ½å®ç°</h2>
<h3 data-id="heading-2">1.1 ä¼ ç»Ÿå›¾ç‰‡åˆ†æç³»ç»Ÿå»ºè®¾æ€è·¯</h3>
<p>åœ¨æ„å»ºå›¾ç‰‡åˆ†æç³»ç»Ÿæ—¶ï¼Œä¼ ç»ŸæŠ€æœ¯æ–¹æ¡ˆé€šå¸¸é‡‡ç”¨å¤šé˜¶æ®µå¤„ç†æµç¨‹ï¼š</p>
<p><strong>æ ¸å¿ƒæŠ€æœ¯è·¯å¾„ï¼š</strong></p>
<ul>
<li><strong>å›¾åƒé¢„å¤„ç†</strong>ï¼šä½¿ç”¨ OpenCVã€PIL ç­‰ Python åº“å¯¹åŸå§‹å›¾åƒè¿›è¡Œå°ºå¯¸è°ƒæ•´ã€è‰²å½©æ ¡æ­£ã€å™ªå£°è¿‡æ»¤ç­‰é¢„å¤„ç†æ“ä½œ</li>
<li><strong>æ–‡å­—ä¿¡æ¯æå–</strong>ï¼šé€šè¿‡ OCR æ¨¡å‹ï¼ˆå¦‚ MonkeyOCRã€DeepSeek-OCRï¼‰è¯†åˆ«å¹¶æå–å›¾åƒä¸­çš„æ–‡æœ¬å†…å®¹</li>
<li><strong>è¯­ä¹‰ç†è§£åˆ†æ</strong>ï¼šå€ŸåŠ©å¤šæ¨¡æ€å¤§æ¨¡å‹ï¼ˆå¦‚ Qwen-VL ç³»åˆ—ï¼‰å¯¹å›¾åƒè¿›è¡Œæ·±åº¦è¯­ä¹‰è§£æï¼Œç†è§£å›¾åƒåœºæ™¯ã€å¯¹è±¡å…³ç³»ç­‰é«˜å±‚è¯­ä¹‰ä¿¡æ¯</li>
</ul>
<p>è¿™ç§åˆ†å±‚å¤„ç†æ¶æ„è™½ç„¶æŠ€æœ¯æˆç†Ÿï¼Œä½†å­˜åœ¨æµç¨‹å¤æ‚ã€è¯¯å·®ç´¯ç§¯ç­‰é—®é¢˜ã€‚éšç€å¤šæ¨¡æ€å¤§æ¨¡å‹èƒ½åŠ›çš„æå‡ï¼Œç¬”è€…è¿™é‡Œé‡‡ç”¨æ›´ç®€æ´é«˜æ•ˆçš„ç«¯åˆ°ç«¯è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-3">1.2 å¤šæ¨¡æ€ RAG å›¾ç‰‡åˆ†æå®ç°</h3>
<p>æœ¬ç³»ç»Ÿå¾—ç›ŠäºQwen3-Omniåœ¨æ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘å…¨æ¨¡æ€ä»»åŠ¡ä¸­ä¿æŒçš„é¡¶å°–æ€§èƒ½ï¼Œå®ç°ä¸€ä½“åŒ–çš„å›¾ç‰‡åˆ†æåŠŸèƒ½ã€‚</p>
<h4 data-id="heading-4">1.2.1 æ•°æ®ç»“æ„å›é¡¾ä¸è®¾è®¡</h4>
<p>é¦–å…ˆå›é¡¾ç¬”è€…åœ¨<a href="https://juejin.cn/post/7572836557142491136" target="_blank" title="https://juejin.cn/post/7572836557142491136">LangChain1.0å®æˆ˜ä¹‹å¤šæ¨¡æ€RAGç³»ç»Ÿï¼ˆä¸€ï¼‰â€”â€”å¤šæ¨¡æ€RAGç³»ç»Ÿæ ¸å¿ƒæ¶æ„åŠæ™ºèƒ½é—®ç­”åŠŸèƒ½å¼€å‘</a>ä¸­å®šä¹‰çš„æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œå¤šæ¨¡æ€RAGç³»ç»Ÿä¼šå°†å›¾ç‰‡ç»è¿‡base64ç¼–ç è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ä¸­å­˜å‚¨åœ¨<code>ContentBlock</code>ä¸­ï¼Œä¸æ–‡å­—å†…å®¹åŒæ­¥é€å…¥Qwen3-Omniå¤§æ¨¡å‹å¤„ç†ï¼Œè¿™é‡Œä¸éœ€è¦å˜åŠ¨æ•°æ®ç»“æ„ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ContentBlock</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    <span class="hljs-built_in">type</span>: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"å†…å®¹ç±»å‹: text, image, audio"</span>)
    content: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>] = Field(description=<span class="hljs-string">"å†…å®¹æ•°æ®"</span>)


<span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageRequest</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    content_blocks: <span class="hljs-type">List</span>[ContentBlock] = Field(default=[], description=<span class="hljs-string">"å†…å®¹å—"</span>)
    history: <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]] = Field(default=[], description=<span class="hljs-string">"å¯¹è¯å†å²"</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageResponse</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    content: <span class="hljs-built_in">str</span>
    timestamp: <span class="hljs-built_in">str</span>
    role: <span class="hljs-built_in">str</span>
</code></pre>
<h4 data-id="heading-5">1.2.2 å›¾åƒç¼–ç å¤„ç†å·¥å…·</h4>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºÂ <code>utils.py</code>Â æ–‡ä»¶ï¼Œå®ç°å›¾åƒç¼–ç å·¥å…·ç±»ï¼Œå›¾åƒç¼–ç å·¥å…·ç±»è´Ÿè´£è¯†åˆ«ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡æ ¼å¼å¹¶å°†å…¶ç¼–ç ä¸ºbase64å­—ç¬¦ä¸²:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> base64
<span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> UploadFile, HTTPException


<span class="hljs-keyword">class</span> <span class="hljs-title class_">ImageProcessor</span>:
    <span class="hljs-string">"""å›¾åƒå¤„ç†å·¥å…·ç±»"""</span>

<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">image_to_base64</span>(<span class="hljs-params">image_file: UploadFile</span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># è¯»å–æ–‡ä»¶å†…å®¹</span>
            contents = image_file.file.read()
            <span class="hljs-comment"># è¿›è¡Œbase64ç¼–ç </span>
            base64_encoded = base64.b64encode(contents).decode(<span class="hljs-string">'utf-8'</span>)
            <span class="hljs-keyword">return</span> base64_encoded
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">500</span>, detail=<span class="hljs-string">f"å›¾åƒç¼–ç å¤±è´¥: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)

<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_image_mime_type</span>(<span class="hljs-params">filename: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        extension = filename.split(<span class="hljs-string">'.'</span>)[-<span class="hljs-number">1</span>].lower()
        mime_types = {
            <span class="hljs-string">'jpg'</span>: <span class="hljs-string">'image/jpeg'</span>,
            <span class="hljs-string">'jpeg'</span>: <span class="hljs-string">'image/jpeg'</span>,
            <span class="hljs-string">'png'</span>: <span class="hljs-string">'image/png'</span>,
            <span class="hljs-string">'gif'</span>: <span class="hljs-string">'image/gif'</span>,
            <span class="hljs-string">'bmp'</span>: <span class="hljs-string">'image/bmp'</span>,
            <span class="hljs-string">'webp'</span>: <span class="hljs-string">'image/webp'</span>
        }
        <span class="hljs-keyword">return</span> mime_types.get(extension, <span class="hljs-string">'image/jpeg'</span>)
</code></pre>
<h4 data-id="heading-6">1.2.3 å¤šæ¨¡æ€æ¶ˆæ¯æ„å»º</h4>
<p>ä¿®æ”¹å¤šæ¨¡æ€æ¶ˆæ¯æ„å»ºé€»è¾‘ï¼Œæ”¯æŒå›¾åƒæ•°æ®çš„å¤„ç†ï¼Œè¯†åˆ«å›¾ç‰‡åç¼€æ ¼å¼å¹¶å°†å…¶å¤„ç†ä¸ºbase64å­—ç¬¦ä¸²ï¼Œæ„é€ æ ¼å¼ä¸º<code>{"type":"image_url", "image_url":{"url": å›¾ç‰‡base64æ ¼å¼}}</code>çš„å¤šæ¨¡æ€å¤§æ¨¡å‹è®¿é—®è¯·æ±‚ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">create_multimodal_message</span>(<span class="hljs-params">request: MessageRequest, image_file: UploadFile</span>) -&gt; HumanMessage:
    <span class="hljs-string">"""åˆ›å»ºå¤šæ¨¡æ€æ¶ˆæ¯"""</span>
    message_content = []

    <span class="hljs-comment"># å¦‚æœæœ‰å›¾ç‰‡</span>
    <span class="hljs-keyword">if</span> image_file:
        processor = ImageProcessor()
        mime_type = processor.get_image_mime_type(image_file.filename)
        base64_image = processor.image_to_base64(image_file)
        message_content.append({
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"image_url"</span>,
            <span class="hljs-string">"image_url"</span>: {
                <span class="hljs-string">"url"</span>: <span class="hljs-string">f"data:<span class="hljs-subst">{mime_type}</span>;base64,<span class="hljs-subst">{base64_image}</span>"</span>
            },
        })

    <span class="hljs-comment"># å¤„ç†å†…å®¹å—</span>
    <span class="hljs-keyword">for</span> i, block <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(request.content_blocks):
        <span class="hljs-keyword">if</span> block.<span class="hljs-built_in">type</span> == <span class="hljs-string">"text"</span>:
            message_content.append({
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,
                <span class="hljs-string">"text"</span>: block.content
            })
        <span class="hljs-keyword">elif</span> block.<span class="hljs-built_in">type</span> == <span class="hljs-string">"image"</span>:
            <span class="hljs-comment"># åªæœ‰base64æ ¼å¼çš„æ¶ˆæ¯æ‰ä¼šè¢«æ¥å…¥</span>
            <span class="hljs-keyword">if</span> block.content.startswith(<span class="hljs-string">"data:image"</span>):
                message_content.append({
                    <span class="hljs-string">"type"</span>: <span class="hljs-string">"image_url"</span>,
                    <span class="hljs-string">"image_url"</span>: {
                        <span class="hljs-string">"url"</span>: block.content
                    },
                })
    <span class="hljs-keyword">return</span> HumanMessage(content=message_content)
</code></pre>
<h4 data-id="heading-7">1.2.4 å†å²è®°å½•å¤šæ¨¡æ€æ”¯æŒ</h4>
<p>å¢å¼ºå†å²è®°å½•å¤„ç†å‡½æ•°ï¼Œæ·»åŠ å›¾åƒåˆ†æçš„ç³»ç»Ÿæç¤ºå’Œå¤šæ¨¡æ€å†…å®¹æ”¯æŒï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">convert_history_to_messages</span>(<span class="hljs-params">history: <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]]</span>) -&gt; <span class="hljs-type">List</span>[BaseMessage]:
    <span class="hljs-string">"""å°†å†å²è®°å½•è½¬æ¢ä¸º LangChain æ¶ˆæ¯æ ¼å¼ï¼Œæ”¯æŒå¤šæ¨¡æ€å†…å®¹"""</span>
    messages = []

    <span class="hljs-comment"># æ·»åŠ ç³»ç»Ÿæ¶ˆæ¯</span>
    system_prompt = <span class="hljs-string">"""
        ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å¤šæ¨¡æ€ RAG åŠ©æ‰‹ï¼Œå…·å¤‡å¦‚ä¸‹èƒ½ï¼š
        1. ä¸ç”¨æˆ·å¯¹è¯çš„èƒ½åŠ›ã€‚
        2. å›¾åƒå†…å®¹è¯†åˆ«å’Œåˆ†æèƒ½åŠ›(OCR, å¯¹è±¡æ£€æµ‹ï¼Œ åœºæ™¯ç†è§£)
        
        é‡è¦æŒ‡å¯¼åŸåˆ™ï¼š
        - å½“ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡å¹¶æå‡ºé—®é¢˜æ—¶ï¼Œè¯·ç»“åˆå›¾ç‰‡å†…å®¹å’Œç”¨æˆ·çš„å…·ä½“é—®é¢˜æ¥å›ç­”
        - ä»”ç»†åˆ†æå›¾ç‰‡ä¸­çš„æ–‡å­—ã€å›¾è¡¨ã€å¯¹è±¡ã€åœºæ™¯ç­‰æ‰€æœ‰å¯è§ä¿¡æ¯
        - æ ¹æ®ç”¨æˆ·çš„é—®é¢˜é‡ç‚¹ï¼Œæœ‰é’ˆå¯¹æ€§åœ°åˆ†æå›¾ç‰‡ç›¸å…³éƒ¨åˆ†
        - å¦‚æœå›¾ç‰‡åŒ…å«æ–‡å­—ï¼Œè¯·å‡†ç¡®è¯†åˆ«å¹¶åœ¨å›ç­”ä¸­å¼•ç”¨
        - å¦‚æœç”¨æˆ·åªä¸Šä¼ å›¾ç‰‡æ²¡æœ‰é—®é¢˜ï¼Œåˆ™æä¾›å›¾ç‰‡çš„å…¨é¢åˆ†æ
        
        è¯·ä»¥ä¸“ä¸šã€å‡†ç¡®ã€å‹å¥½çš„æ–¹å¼å›ç­”
    """</span>

    messages.append(SystemMessage(content=system_prompt))

    <span class="hljs-comment"># è½¬æ¢å†å²æ¶ˆæ¯</span>
    <span class="hljs-keyword">for</span> i, msg <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(history):
        content = msg.get(<span class="hljs-string">"content"</span>, <span class="hljs-string">""</span>)
        content_blocks = msg.get(<span class="hljs-string">"content_blocks"</span>, [])
        message_content = []
        <span class="hljs-keyword">if</span> msg[<span class="hljs-string">"role"</span>] == <span class="hljs-string">"user"</span>:
            <span class="hljs-keyword">for</span> block <span class="hljs-keyword">in</span> content_blocks:
                <span class="hljs-keyword">if</span> block.get(<span class="hljs-string">"type"</span>) == <span class="hljs-string">"text"</span>:
                    message_content.append({
                        <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,
                        <span class="hljs-string">"text"</span>: block.get(<span class="hljs-string">"content"</span>, <span class="hljs-string">""</span>)
                    })
                <span class="hljs-keyword">elif</span> block.get(<span class="hljs-string">"type"</span>) == <span class="hljs-string">"image"</span>:
                    image_data = block.get(<span class="hljs-string">"content"</span>, <span class="hljs-string">""</span>)
                    <span class="hljs-keyword">if</span> image_data.startswith(<span class="hljs-string">"data:image"</span>):
                        message_content.append({
                            <span class="hljs-string">"type"</span>: <span class="hljs-string">"image_url"</span>,
                            <span class="hljs-string">"image_url"</span> : {
                                <span class="hljs-string">"url"</span>: image_data
                            }
                        })
            messages.append(HumanMessage(content=message_content))
        <span class="hljs-keyword">elif</span> msg[<span class="hljs-string">"role"</span>] == <span class="hljs-string">"assistant"</span>:
            messages.append(AIMessage(content=content))

    <span class="hljs-keyword">return</span> messages
</code></pre>
<h4 data-id="heading-8">1.2.5 æ¥å£æ ¼å¼è°ƒæ•´</h4>
<p>ç”±äºç°åœ¨éœ€è¦åŒæ—¶æ”¯æŒ JSON æ•°æ®å’Œæ–‡ä»¶ä¸Šä¼ ï¼Œå°†æ¥å£è°ƒæ•´ä¸ºÂ <code>multipart/form-data</code>Â æ ¼å¼ï¼Œä¿®æ”¹<code>chat_stream</code>æ¥å£å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@app.post(<span class="hljs-params"><span class="hljs-string">"/api/chat/stream"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">chat_stream</span>(<span class="hljs-params">
        image_file: UploadFile = File(<span class="hljs-params">...</span>),
        content_blocks: <span class="hljs-built_in">str</span> = Form(<span class="hljs-params">default=<span class="hljs-string">"[]"</span></span>),
        history: <span class="hljs-built_in">str</span> = Form(<span class="hljs-params">default=<span class="hljs-string">"[]"</span></span>)
</span>):
    <span class="hljs-string">"""æµå¼èŠå¤©æ¥å£ï¼ˆæ”¯æŒå¤šæ¨¡æ€ï¼‰"""</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># è§£æ JSON å­—ç¬¦ä¸²</span>
        <span class="hljs-keyword">try</span>:
            content_blocks_data = json.loads(content_blocks)
            history_data = json.loads(history)
        <span class="hljs-keyword">except</span> json.JSONDecodeError <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">400</span>, detail=<span class="hljs-string">f"JSON è§£æé”™è¯¯: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)

        <span class="hljs-comment"># åˆ›å»ºè¯·æ±‚å¯¹è±¡ï¼ˆç”¨äºä¼ é€’ç»™å…¶ä»–å‡½æ•°ï¼‰</span>
        request_data = MessageRequest(content_blocks=content_blocks_data, history=history_data)

        <span class="hljs-comment"># è½¬æ¢æ¶ˆæ¯å†å²</span>
        messages = convert_history_to_messages(request_data.history)

        <span class="hljs-comment"># æ·»åŠ å½“å‰ç”¨æˆ·æ¶ˆæ¯ï¼ˆæ”¯æŒå¤šæ¨¡æ€ï¼‰</span>
        current_message = create_multimodal_message(request_data, image_file)
        messages.append(current_message)

        <span class="hljs-comment"># è¿”å›æµå¼å“åº”</span>
        <span class="hljs-keyword">return</span> StreamingResponse(
            generate_streaming_response(messages),
            media_type=<span class="hljs-string">"text/event-stream"</span>,
            headers={
                <span class="hljs-string">"Cache-Control"</span>: <span class="hljs-string">"no-cache"</span>,
                <span class="hljs-string">"Connection"</span>: <span class="hljs-string">"keep-alive"</span>,
                <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"text/event-stream"</span>,
            }
        )
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">500</span>, detail=<span class="hljs-built_in">str</span>(e))
</code></pre>
<p>å®Œæˆä»¥ä¸Šäº”ä¸ªæ ¸å¿ƒæ¨¡å—çš„ä¿®æ”¹åï¼Œç³»ç»Ÿå°±å…·å¤‡äº†å®Œæ•´çš„å›¾ç‰‡åˆ†æèƒ½åŠ›ï¼Œå¯ä»¥å¤„ç†ç”¨æˆ·ä¸Šä¼ çš„å›¾åƒå¹¶è¿›è¡Œæ™ºèƒ½é—®ç­”~</p>
<h3 data-id="heading-9">1.3 å›¾ç‰‡åˆ†æåŠŸèƒ½æµ‹è¯•</h3>
<p>å®Œæˆä»£ç å¼€å‘åï¼Œæˆ‘ä»¬é€šè¿‡ Postman å¯¹å›¾ç‰‡åˆ†æåŠŸèƒ½è¿›è¡Œå®Œæ•´æµ‹è¯•ã€‚</p>
<h4 data-id="heading-10">æµ‹è¯•é…ç½®æ­¥éª¤</h4>
<p><strong>1. è¯·æ±‚å¤´è®¾ç½®</strong><br/>
åœ¨ Postman çš„ Headers é€‰é¡¹å¡ä¸­é…ç½®ï¼š</p>
<ul>
<li><code>Content-Type</code>:Â <code>multipart/form-data</code></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79d0bbb40ce04007acdefbd6c7f5014d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647612&amp;x-signature=WSSGEbzKXxwY4A6%2BuZqbQd%2FLYNw%3D" alt="0.png" loading="lazy"/></p>
<p><strong>2. è¯·æ±‚ä½“é…ç½®</strong><br/>
åœ¨ Body é€‰é¡¹å¡ä¸­é€‰æ‹©Â <code>form-data</code>Â æ ¼å¼ï¼Œæ·»åŠ ä»¥ä¸‹å‚æ•°ï¼š</p>

























<table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>å€¼</th></tr></thead><tbody><tr><td><code>image_file</code></td><td>File</td><td>é€‰æ‹© Gemini 3.0 Logo å›¾ç‰‡æ–‡ä»¶</td></tr><tr><td><code>content_blocks</code></td><td>Text</td><td><code>[{"type": "text", "content": "è¯·åˆ†æè¿™å¼ å›¾ç‰‡"}]</code></td></tr><tr><td><code>history</code></td><td>Text</td><td><code>[]</code></td></tr></tbody></table>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7952e8bbe8d34d339c12833cf661790c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647612&amp;x-signature=am8rJbG3YKlpgHzHE1i%2BQLirLZA%3D" alt="2.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb12dbca73d54784ac8447e2801115bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647612&amp;x-signature=uuC4hnkm%2B94MfssbaPrXsrPU7wc%3D" alt="1.png" loading="lazy"/></p>
<p><strong>3. æµ‹è¯•æ‰§è¡Œ</strong><br/>
å‘Â <code>/api/chat/stream</code>Â ç«¯ç‚¹å‘é€ POST è¯·æ±‚ï¼Œç³»ç»Ÿè¿”å›æµå¼å“åº”ã€‚</p>
<h4 data-id="heading-11">æµ‹è¯•ç»“æœéªŒè¯</h4>
<p>ä»å“åº”ç»“æœå¯è§ï¼Œç³»ç»ŸæˆåŠŸè¯†åˆ«å¹¶åˆ†æäº†æµ‹è¯•å›¾ç‰‡ï¼š</p>
<ul>
<li>å‡†ç¡®è¯†åˆ«å‡ºå›¾ç‰‡åŒ…å« Gemini 3.0 çš„ Logo</li>
<li>è¯¦ç»†æè¿°äº† Logo çš„è®¾è®¡å…ƒç´ å’Œè§†è§‰ç‰¹å¾</li>
<li>æä¾›äº†å®Œæ•´çš„å›¾ç‰‡å†…å®¹åˆ†æ</li>
</ul>
<p>æµ‹è¯•ç»“æœè¡¨æ˜ï¼Œå›¾ç‰‡åˆ†æåŠŸèƒ½å·²æ­£å¸¸é›†æˆåˆ°å¤šæ¨¡æ€ RAG ç³»ç»Ÿä¸­ï¼Œèƒ½å¤Ÿæ­£ç¡®å¤„ç†ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡å¹¶ç»“åˆé—®é¢˜è¿›è¡Œæ™ºèƒ½åˆ†æã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5dd03b25877941bd85574d5f26e8113c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647612&amp;x-signature=kQhFHuiDpMLYpYD4d0KxMeBNpFk%3D" alt="3.png" loading="lazy"/></p>
<h2 data-id="heading-12">äºŒã€éŸ³é¢‘åˆ†æåŠŸèƒ½å®ç°</h2>
<h3 data-id="heading-13">2.1 å¤šæ¨¡æ€RAGéŸ³é¢‘å¤„ç†çš„å®ç°</h3>
<p>éŸ³é¢‘åˆ†æåŠŸèƒ½çš„å®ç°æ€è·¯ä¸å›¾ç‰‡åˆ†æç±»ä¼¼ï¼Œä¸»è¦é€šè¿‡ Base64 ç¼–ç å’Œæ ¼å¼è½¬æ¢å®ç°éŸ³é¢‘æ•°æ®çš„å¤„ç†ä¸ä¼ è¾“ã€‚</p>
<h4 data-id="heading-14">2.1.1 æ•°æ®ç»“æ„è®¾è®¡</h4>
<p>éŸ³é¢‘æ•°æ®é‡‡ç”¨ä¸å›¾ç‰‡ç›¸åŒçš„å­˜å‚¨æ–¹å¼ï¼Œé€šè¿‡ Base64 ç¼–ç å­˜å‚¨åœ¨Â <code>content</code>Â å­—æ®µä¸­ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ContentBlock</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    <span class="hljs-built_in">type</span>: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"å†…å®¹ç±»å‹: text, image, audio"</span>)
    content: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>] = Field(description=<span class="hljs-string">"å†…å®¹æ•°æ®"</span>)


<span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageRequest</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    content_blocks: <span class="hljs-type">List</span>[ContentBlock] = Field(default=[], description=<span class="hljs-string">"å†…å®¹å—"</span>)
    history: <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]] = Field(default=[], description=<span class="hljs-string">"å¯¹è¯å†å²"</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageResponse</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    content: <span class="hljs-built_in">str</span>
    timestamp: <span class="hljs-built_in">str</span>
    role: <span class="hljs-built_in">str</span>
</code></pre>
<h4 data-id="heading-15">2.1.2 éŸ³é¢‘å¤„ç†å·¥å…·ç±»</h4>
<p>åœ¨Â <code>utils.py</code>Â ä¸­æ·»åŠ éŸ³é¢‘å¤„ç†å·¥å…·ç±»ï¼Œæ”¯æŒå¤šç§éŸ³é¢‘æ ¼å¼ï¼Œé’ˆå¯¹éŸ³é¢‘æ ¼å¼çš„å¤„ç†ç¬”è€…é¢å¤–æ·»åŠ äº†ä¸Šä¼ æ–‡ä»¶å¤§å°çš„ç›¸å…³é™åˆ¶ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AudioProcessor</span>:
    <span class="hljs-string">"""éŸ³é¢‘å¤„ç†å·¥å…·ç±»"""</span>

<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">audio_to_base64</span>(<span class="hljs-params">audio_file: UploadFile</span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># éªŒè¯æ–‡ä»¶ç±»å‹</span>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> AudioProcessor.is_valid_audio_type(audio_file.content_type, audio_file.filename):
                <span class="hljs-keyword">raise</span> HTTPException(
                    status_code=<span class="hljs-number">400</span>,
                    detail=<span class="hljs-string">"ä¸æ”¯æŒçš„éŸ³é¢‘æ ¼å¼ï¼Œæ”¯æŒçš„æ ¼å¼æœ‰: MP3, WAV, OGG, M4A, FLAC"</span>
                )

            <span class="hljs-comment"># è¯»å–æ–‡ä»¶å†…å®¹</span>
            contents = audio_file.file.read()

            <span class="hljs-comment"># éªŒè¯æ–‡ä»¶å¤§å°ï¼ˆå¯é€‰ï¼šé™åˆ¶ä¸º10MBï¼‰</span>
            max_size = <span class="hljs-number">10</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>  <span class="hljs-comment"># 10MB</span>
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(contents) &gt; max_size:
                <span class="hljs-keyword">raise</span> HTTPException(
                    status_code=<span class="hljs-number">400</span>,
                    detail=<span class="hljs-string">f"éŸ³é¢‘æ–‡ä»¶è¿‡å¤§ï¼Œæœ€å¤§æ”¯æŒ <span class="hljs-subst">{max_size // <span class="hljs-number">1024</span> // <span class="hljs-number">1024</span>}</span>MB"</span>
                )

            base64_encoded = base64.b64encode(contents).decode(<span class="hljs-string">'utf-8'</span>)
            <span class="hljs-keyword">return</span> base64_encoded

        <span class="hljs-keyword">except</span> HTTPException:
            <span class="hljs-keyword">raise</span>
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">500</span>, detail=<span class="hljs-string">f"éŸ³é¢‘ç¼–ç å¤±è´¥: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)

<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_audio_mime_type</span>(<span class="hljs-params">filename: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        extension = filename.split(<span class="hljs-string">'.'</span>)[-<span class="hljs-number">1</span>].lower()
        mime_types = {
            <span class="hljs-string">'mp3'</span>: <span class="hljs-string">'audio/mpeg'</span>,
            <span class="hljs-string">'wav'</span>: <span class="hljs-string">'audio/wav'</span>,
            <span class="hljs-string">'m4a'</span>: <span class="hljs-string">'audio/mp4'</span>,
        }
        <span class="hljs-keyword">return</span> mime_types.get(extension, <span class="hljs-string">'audio/mpeg'</span>)  <span class="hljs-comment"># é»˜è®¤ä¸ºMP3</span>

<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_valid_audio_type</span>(<span class="hljs-params">content_type: <span class="hljs-built_in">str</span>, filename: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-comment"># è·å–æ”¯æŒçš„MIMEç±»å‹åˆ—è¡¨</span>
        supported_mimes = {
            <span class="hljs-string">'audio/mpeg'</span>, <span class="hljs-string">'audio/wav'</span>, <span class="hljs-string">'audio/mp4'</span>
        }

        <span class="hljs-comment"># æ£€æŸ¥content_type</span>
        <span class="hljs-keyword">if</span> content_type <span class="hljs-keyword">and</span> content_type <span class="hljs-keyword">in</span> supported_mimes:
            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>

        <span class="hljs-comment"># æ£€æŸ¥æ–‡ä»¶æ‰©å±•å</span>
        file_extension = filename.split(<span class="hljs-string">'.'</span>)[-<span class="hljs-number">1</span>].lower()
        supported_extensions = {<span class="hljs-string">'mp3'</span>, <span class="hljs-string">'wav'</span>, <span class="hljs-string">'m4a'</span>}

        <span class="hljs-keyword">return</span> file_extension <span class="hljs-keyword">in</span> supported_extensions
</code></pre>
<h4 data-id="heading-16">2.1.3 å¤šæ¨¡æ€æ¶ˆæ¯æ„å»ºå¢å¼º</h4>
<p>æ‰©å±•Â <code>create_multimodal_message</code>Â å‡½æ•°ï¼Œæ”¯æŒéŸ³é¢‘æ•°æ®çš„å¤„ç†, é¦–å…ˆæå–éŸ³é¢‘æ–‡ä»¶åç¼€å¹¶å°†å…¶å¤„ç†ä¸ºbase64æ ¼å¼ï¼ŒåŒæ—¶æ„é€ æ ¼å¼ä¸º<code>{"type":"audio_url", "audio_url":{"url": éŸ³é¢‘base64æ ¼å¼}}</code>å¤šæ¨¡æ€å¤§æ¨¡å‹è®¿é—®è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">create_multimodal_message</span>(<span class="hljs-params">request: MessageRequest, image_file: UploadFile | <span class="hljs-literal">None</span>, audio_file:UploadFile | <span class="hljs-literal">None</span></span>) -&gt; HumanMessage:
    <span class="hljs-string">"""åˆ›å»ºå¤šæ¨¡æ€æ¶ˆæ¯"""</span>
    message_content = []

    <span class="hljs-comment"># å¦‚æœæœ‰å›¾ç‰‡</span>
    <span class="hljs-keyword">if</span> image_file:
        processor = ImageProcessor()
        mime_type = processor.get_image_mime_type(image_file.filename)
        base64_image = processor.image_to_base64(image_file)
        message_content.append({
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"image_url"</span>,
            <span class="hljs-string">"image_url"</span>: {
                <span class="hljs-string">"url"</span>: <span class="hljs-string">f"data:<span class="hljs-subst">{mime_type}</span>;base64,<span class="hljs-subst">{base64_image}</span>"</span>
            },
        })
    <span class="hljs-keyword">if</span> audio_file:
        processor = AudioProcessor()
        mime_type = processor.get_audio_mime_type(audio_file.filename)
        base64_audio = processor.audio_to_base64(audio_file)
        message_content.append({
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"audio_url"</span>,
            <span class="hljs-string">"audio_url"</span>: {
                <span class="hljs-string">"url"</span>: <span class="hljs-string">f"data:<span class="hljs-subst">{mime_type}</span>;base64,<span class="hljs-subst">{base64_audio}</span>"</span>
            },
        })
    <span class="hljs-comment"># å¤„ç†å†…å®¹å—</span>
    <span class="hljs-keyword">for</span> i, block <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(request.content_blocks):
        <span class="hljs-keyword">if</span> block.<span class="hljs-built_in">type</span> == <span class="hljs-string">"text"</span>:
            message_content.append({
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,
                <span class="hljs-string">"text"</span>: block.content
            })
        <span class="hljs-keyword">elif</span> block.<span class="hljs-built_in">type</span> == <span class="hljs-string">"image"</span>:
            <span class="hljs-comment"># åªæœ‰base64æ ¼å¼çš„æ¶ˆæ¯æ‰ä¼šè¢«æ¥å…¥</span>
            <span class="hljs-keyword">if</span> block.content.startswith(<span class="hljs-string">"data:image"</span>):
                message_content.append({
                    <span class="hljs-string">"type"</span>: <span class="hljs-string">"image_url"</span>,
                    <span class="hljs-string">"image_url"</span>: {
                        <span class="hljs-string">"url"</span>: block.content
                    },
                })
        <span class="hljs-keyword">elif</span> block.<span class="hljs-built_in">type</span> == <span class="hljs-string">"audio"</span>:
            <span class="hljs-keyword">if</span> block.content.startswith(<span class="hljs-string">"data:audio"</span>):
                message_content.append({
                    <span class="hljs-string">"type"</span>: <span class="hljs-string">"audio_url"</span>,
                    <span class="hljs-string">"audio_url"</span>: {
                        <span class="hljs-string">"url"</span>: block.content
                    },
                })

    <span class="hljs-keyword">return</span> HumanMessage(content=message_content)
</code></pre>
<h4 data-id="heading-17">2.1.4 å†å²è®°å½•å¤„ç†å¢å¼º</h4>
<p>æ›´æ–°ç³»ç»Ÿæç¤ºè¯ï¼Œæ·»åŠ éŸ³é¢‘å¤„ç†èƒ½åŠ›ï¼Œå¹¶å¢å¼ºå†å²è®°å½•å¤„ç†é€»è¾‘ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">convert_history_to_messages</span>(<span class="hljs-params">history: <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]]</span>) -&gt; <span class="hljs-type">List</span>[BaseMessage]:
    <span class="hljs-string">"""å°†å†å²è®°å½•è½¬æ¢ä¸º LangChain æ¶ˆæ¯æ ¼å¼ï¼Œæ”¯æŒå¤šæ¨¡æ€å†…å®¹"""</span>
    messages = []

    <span class="hljs-comment"># æ·»åŠ ç³»ç»Ÿæ¶ˆæ¯</span>
    system_prompt = <span class="hljs-string">"""
        ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å¤šæ¨¡æ€ RAG åŠ©æ‰‹ï¼Œå…·å¤‡å¦‚ä¸‹èƒ½ï¼š
        1. ä¸ç”¨æˆ·å¯¹è¯çš„èƒ½åŠ›ã€‚
        2. å›¾åƒå†…å®¹è¯†åˆ«å’Œåˆ†æèƒ½åŠ›(OCR, å¯¹è±¡æ£€æµ‹ï¼Œ åœºæ™¯ç†è§£)
        3. éŸ³é¢‘è½¬å†™ä¸åˆ†æ
        
        é‡è¦æŒ‡å¯¼åŸåˆ™ï¼š
        - å½“ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡å¹¶æå‡ºé—®é¢˜æ—¶ï¼Œè¯·ç»“åˆå›¾ç‰‡å†…å®¹å’Œç”¨æˆ·çš„å…·ä½“é—®é¢˜æ¥å›ç­”
        - ä»”ç»†åˆ†æå›¾ç‰‡ä¸­çš„æ–‡å­—ã€å›¾è¡¨ã€å¯¹è±¡ã€åœºæ™¯ç­‰æ‰€æœ‰å¯è§ä¿¡æ¯
        - æ ¹æ®ç”¨æˆ·çš„é—®é¢˜é‡ç‚¹ï¼Œæœ‰é’ˆå¯¹æ€§åœ°åˆ†æå›¾ç‰‡ç›¸å…³éƒ¨åˆ†
        - å¦‚æœå›¾ç‰‡åŒ…å«æ–‡å­—ï¼Œè¯·å‡†ç¡®è¯†åˆ«å¹¶åœ¨å›ç­”ä¸­å¼•ç”¨
        - å¦‚æœç”¨æˆ·åªä¸Šä¼ å›¾ç‰‡æ²¡æœ‰é—®é¢˜ï¼Œåˆ™æä¾›å›¾ç‰‡çš„å…¨é¢åˆ†æ
        
        è¯·ä»¥ä¸“ä¸šã€å‡†ç¡®ã€å‹å¥½çš„æ–¹å¼å›ç­”
    """</span>

    messages.append(SystemMessage(content=system_prompt))

    <span class="hljs-comment"># è½¬æ¢å†å²æ¶ˆæ¯</span>
    <span class="hljs-keyword">for</span> i, msg <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(history):
        content = msg.get(<span class="hljs-string">"content"</span>, <span class="hljs-string">""</span>)
        content_blocks = msg.get(<span class="hljs-string">"content_blocks"</span>, [])
        message_content = []
        <span class="hljs-keyword">if</span> msg[<span class="hljs-string">"role"</span>] == <span class="hljs-string">"user"</span>:
            <span class="hljs-keyword">for</span> block <span class="hljs-keyword">in</span> content_blocks:
                <span class="hljs-keyword">if</span> block.get(<span class="hljs-string">"type"</span>) == <span class="hljs-string">"text"</span>:
                    message_content.append({
                        <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,
                        <span class="hljs-string">"text"</span>: block.get(<span class="hljs-string">"content"</span>, <span class="hljs-string">""</span>)
                    })
                <span class="hljs-keyword">elif</span> block.get(<span class="hljs-string">"type"</span>) == <span class="hljs-string">"image"</span>:
                    image_data = block.get(<span class="hljs-string">"content"</span>, <span class="hljs-string">""</span>)
                    <span class="hljs-keyword">if</span> image_data.startswith(<span class="hljs-string">"data:image"</span>):
                        message_content.append({
                            <span class="hljs-string">"type"</span>: <span class="hljs-string">"image_url"</span>,
                            <span class="hljs-string">"image_url"</span> : {
                                <span class="hljs-string">"url"</span>: image_data
                            }
                        })
                <span class="hljs-keyword">elif</span> block.get(<span class="hljs-string">"type"</span>) == <span class="hljs-string">"audio"</span>:
                    audio_data = block.get(<span class="hljs-string">"content"</span>, <span class="hljs-string">""</span>)
                    <span class="hljs-keyword">if</span> audio_data.startswith(<span class="hljs-string">"data:audio"</span>):
                        message_content.append({
                            <span class="hljs-string">"type"</span>: <span class="hljs-string">"audio_url"</span>,
                            <span class="hljs-string">"image_url"</span>: {
                                <span class="hljs-string">"url"</span>: audio_data
                            }
                        })
            messages.append(HumanMessage(content=message_content))
        <span class="hljs-keyword">elif</span> msg[<span class="hljs-string">"role"</span>] == <span class="hljs-string">"assistant"</span>:
            messages.append(AIMessage(content=content))

    <span class="hljs-keyword">return</span> messages
</code></pre>
<h4 data-id="heading-18">2.1.5 æ¥å£å®Œæ•´å®ç°</h4>
<p>æ›´æ–°èŠå¤©æ¥å£ï¼ŒåŒæ—¶æ”¯æŒå›¾ç‰‡å’ŒéŸ³é¢‘æ–‡ä»¶ä¸Šä¼ ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@app.post(<span class="hljs-params"><span class="hljs-string">"/api/chat/stream"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">chat_stream</span>(<span class="hljs-params">
        image_file: UploadFile | <span class="hljs-literal">None</span> = File(<span class="hljs-params"><span class="hljs-literal">None</span></span>),
        content_blocks: <span class="hljs-built_in">str</span> = Form(<span class="hljs-params">default=<span class="hljs-string">"[]"</span></span>),
        history: <span class="hljs-built_in">str</span> = Form(<span class="hljs-params">default=<span class="hljs-string">"[]"</span></span>),
        audio_file: UploadFile | <span class="hljs-literal">None</span> = File(<span class="hljs-params"><span class="hljs-literal">None</span></span>)
</span>):
    <span class="hljs-string">"""æµå¼èŠå¤©æ¥å£ï¼ˆæ”¯æŒå¤šæ¨¡æ€ï¼‰"""</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># è§£æ JSON å­—ç¬¦ä¸²</span>
        <span class="hljs-keyword">try</span>:
            content_blocks_data = json.loads(content_blocks)
            history_data = json.loads(history)
        <span class="hljs-keyword">except</span> json.JSONDecodeError <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">400</span>, detail=<span class="hljs-string">f"JSON è§£æé”™è¯¯: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)

        <span class="hljs-comment"># åˆ›å»ºè¯·æ±‚å¯¹è±¡ï¼ˆç”¨äºä¼ é€’ç»™å…¶ä»–å‡½æ•°ï¼‰</span>
        request_data = MessageRequest(content_blocks=content_blocks_data, history=history_data)

        <span class="hljs-comment"># è½¬æ¢æ¶ˆæ¯å†å²</span>
        messages = convert_history_to_messages(request_data.history)

        <span class="hljs-comment"># æ·»åŠ å½“å‰ç”¨æˆ·æ¶ˆæ¯ï¼ˆæ”¯æŒå¤šæ¨¡æ€ï¼‰</span>
        current_message = create_multimodal_message(request_data, image_file=image_file, audio_file=audio_file)
        messages.append(current_message)

        <span class="hljs-comment"># è¿”å›æµå¼å“åº”</span>
        <span class="hljs-keyword">return</span> StreamingResponse(
            generate_streaming_response(messages),
            media_type=<span class="hljs-string">"text/event-stream"</span>,
            headers={
                <span class="hljs-string">"Cache-Control"</span>: <span class="hljs-string">"no-cache"</span>,
                <span class="hljs-string">"Connection"</span>: <span class="hljs-string">"keep-alive"</span>,
                <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"text/event-stream"</span>,
            }
        )
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">500</span>, detail=<span class="hljs-built_in">str</span>(e))
</code></pre>
<h3 data-id="heading-19">2.2 åŠŸèƒ½æµ‹è¯•</h3>
<p>å®Œæˆä»£ç å¼€å‘åï¼Œé€šè¿‡ Postman å¯¹éŸ³é¢‘åˆ†æåŠŸèƒ½è¿›è¡Œæµ‹è¯•ã€‚</p>
<p><strong>æµ‹è¯•é…ç½®ï¼š</strong></p>
<ul>
<li><strong>è¯·æ±‚å¤´</strong>ï¼š<code>Content-Type: multipart/form-data</code></li>
<li><strong>è¯·æ±‚ä½“</strong>ï¼ˆform-dataæ ¼å¼ï¼‰ï¼š</li>
</ul>

























<table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>å€¼</th></tr></thead><tbody><tr><td><code>audio_file</code></td><td>File</td><td>é€‰æ‹©æµ‹è¯•éŸ³é¢‘æ–‡ä»¶ï¼ˆåŒ…å«"ä½ å¥½"çš„å½•éŸ³ï¼‰</td></tr><tr><td><code>content_blocks</code></td><td>Text</td><td><code>[{"type": "text", "content": "è¯·è§£æéŸ³é¢‘å†…å®¹"}]</code></td></tr><tr><td><code>history</code></td><td>Text</td><td><code>[]</code></td></tr></tbody></table>
<p><strong>æµ‹è¯•ç»“æœï¼š</strong><br/>
ç³»ç»ŸæˆåŠŸè¯†åˆ«å¹¶è½¬å†™äº†éŸ³é¢‘å†…å®¹ï¼Œå‡†ç¡®è¾“å‡ºä¸‰ä¸ª"ä½ å¥½"ï¼ŒéªŒè¯äº†éŸ³é¢‘åˆ†æåŠŸèƒ½çš„æ­£ç¡®æ€§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3c07ecb430d4db79d611bb0fba1123b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647612&amp;x-signature=6MrKCRb7euGwZhFKRgtVY6SmsZg%3D" alt="5.png" loading="lazy"/></p>
<h2 data-id="heading-20">ä¸‰ã€æ€»ç»“</h2>
<p>æœ¬æœŸåˆ†äº«é€šè¿‡é›†æˆå…¨æ¨¡æ€å¤§æ¨¡å‹çš„èƒ½åŠ›ï¼ŒæˆåŠŸæ„å»ºäº†æ”¯æŒå›¾ç‰‡å’ŒéŸ³é¢‘åˆ†æçš„å¤šæ¨¡æ€ RAG ç³»ç»Ÿã€‚è¿™ç§ç«¯åˆ°ç«¯çš„è§£å†³æ–¹æ¡ˆå¤§å¤§ç®€åŒ–äº†ä¼ ç»Ÿå¤šæ¨¡æ€å¤„ç†çš„å¤æ‚æ€§ï¼Œå±•ç°äº†æœªæ¥å¤§æ¨¡å‹æŠ€æœ¯çš„å‘å±•è¶‹åŠ¿ã€‚ä¸‹æœŸåˆ†äº«ç¬”è€…å°†å’Œå¤§å®¶ä¸€èµ·å¤„ç†å¤šæ¨¡æ€PDFæ–‡æ¡£ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬å¤šæ¨¡æ€RAGç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå¤§å®¶æ•¬è¯·æœŸå¾…~</p>
<p><a href="https://juejin.cn/column/7526240014499495972" title="https://juejin.cn/column/7526240014499495972" target="_blank">ã€Šæ·±å…¥æµ…å‡ºLangChain&amp;LangGraph AI Agent æ™ºèƒ½ä½“å¼€å‘ã€‹</a>ä¸“æ å†…å®¹æºè‡ªç¬”è€…åœ¨å®é™…å­¦ä¹ å’Œå·¥ä½œä¸­å¯¹ LangChain ä¸ LangGraph çš„æ·±åº¦ä½¿ç”¨ç»éªŒï¼Œæ—¨åœ¨å¸®åŠ©å¤§å®¶ç³»ç»Ÿæ€§åœ°ã€é«˜æ•ˆåœ°æŒæ¡ AI Agent çš„å¼€å‘æ–¹æ³•ï¼Œåœ¨å„å¤§æŠ€æœ¯å¹³å°è·å¾—äº†ä¸å°‘å…³æ³¨ä¸æ”¯æŒã€‚ç›®å‰å·²æ›´æ–°28è®²ï¼Œæ­£åœ¨æ›´æ–°å®æˆ˜ç¯‡å’ŒLangChain1.0å®æˆ˜é¡¹ç›®å¤šæ¨¡æ€RAGç³»ç»Ÿå¼€å‘ï¼Œå¹¶éšæ—¶è¡¥å……ç¬”è€…åœ¨å®é™…å·¥ä½œä¸­æ€»ç»“çš„æ‹“å±•çŸ¥è¯†ç‚¹ã€‚å¦‚æœå¤§å®¶æ„Ÿå…´è¶£ï¼Œæ¬¢è¿å…³æ³¨ç¬”è€…çš„æ˜é‡‘è´¦å·ä¸ä¸“æ ï¼Œä¹Ÿå¯å…³æ³¨ç¬”è€…çš„åŒåå¾®ä¿¡å…¬ä¼—å·Â <strong>å¤§æ¨¡å‹çœŸå¥½ç©</strong>ï¼Œæ¯æœŸåˆ†äº«æ¶‰åŠçš„ä»£ç å‡å¯åœ¨å…¬ä¼—å·ç§ä¿¡:Â <strong>LangChainæ™ºèƒ½ä½“å¼€å‘</strong>å…è´¹è·å–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¶¨è§è¯†äº†ï¼ŒError.cause è®© JavaScript é”™è¯¯è°ƒè¯•æ›´è½»æ¾]]></title>    <link>https://juejin.cn/post/7576371992615649316</link>    <guid>https://juejin.cn/post/7576371992615649316</guid>    <pubDate>2025-11-25T10:03:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576371992615649316" data-draft-id="7576276707332177926" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¶¨è§è¯†äº†ï¼ŒError.cause è®© JavaScript é”™è¯¯è°ƒè¯•æ›´è½»æ¾"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Node.js"/> <meta itemprop="datePublished" content="2025-11-25T10:03:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†´ç¾½"/> <meta itemprop="url" content="https://juejin.cn/user/712139234359182"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¶¨è§è¯†äº†ï¼ŒError.cause è®© JavaScript é”™è¯¯è°ƒè¯•æ›´è½»æ¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/712139234359182/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†´ç¾½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T10:03:58.000Z" title="Tue Nov 25 2025 10:03:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. å‰è¨€</h2>
<p>åœ¨ JavaScript ä¸­ï¼ŒæŠ›å‡ºé”™è¯¯å¾ˆå®¹æ˜“ï¼Œä½†è¿½æº¯åŸå› å´æœ‰äº›éº»çƒ¦ï¼Œè¿™å°±æ˜¯ <code>cause</code>å±æ€§çš„ç”¨æ­¦ä¹‹åœ°ã€‚</p>
<p>è¿™æ˜¯æˆ‘ä»¬ä¼ ç»Ÿçš„å¤„ç†é”™è¯¯çš„åšæ³•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">try</span> {
  <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-string">"{ bad json }"</span>);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Something went wrong: "</span> + err.<span class="hljs-property">message</span>);
}
</code></pre>
<p>è™½ç„¶åŒ…è£…äº†é”™è¯¯ï¼Œä½†å·²ç»ä¸¢å¤±äº†åŸå§‹çš„å †æ ˆä¿¡æ¯å’Œé”™è¯¯ç±»å‹ã€‚</p>
<p>å½“é—®é¢˜å‘ç”Ÿæ—¶ï¼Œä½ åªèƒ½çœ‹åˆ°æœ€é¡¶å±‚çš„é”™è¯¯ä¿¡æ¯ï¼Œå´ä¸çŸ¥é“æ ¹æœ¬åŸå› æ˜¯ä»€ä¹ˆã€‚</p>
<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å†´ç¾½ã€‚å‰ç«¯èµ„è®¯ã€å‰ç«¯å¹²è´§ï¼Œæ¬¢è¿å…³æ³¨å…¬ä¼—å·ï¼šå†´ç¾½</p>
<h2 data-id="heading-1">2. å¼•å…¥ Error.cause</h2>
<p>ES2022 å¼•å…¥äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FError%2Fcause" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Error/cause" ref="nofollow noopener noreferrer">Error.cause</a> å±æ€§ï¼Œå¯ä»¥ä¿ç•™åŸå§‹é”™è¯¯ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-string">"{ bad json }"</span>);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Something went wrong"</span>, { <span class="hljs-attr">cause</span>: err });
  }
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err.<span class="hljs-property">stack</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Caused by:"</span>, err.<span class="hljs-property">cause</span>.<span class="hljs-property">stack</span>);
}
</code></pre>
<p>æ­¤æ—¶ä½ å¯ä»¥çœ‹åˆ°å®Œæ•´çš„é”™è¯¯é“¾ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Error</span>: <span class="hljs-title class_">Something</span> went wrong
    at ...
<span class="hljs-title class_">Caused</span> <span class="hljs-attr">by</span>: <span class="hljs-title class_">SyntaxError</span>: <span class="hljs-title class_">Unexpected</span> token b <span class="hljs-keyword">in</span> <span class="hljs-title class_">JSON</span> at position <span class="hljs-number">2</span>
    at <span class="hljs-title class_">JSON</span>.<span class="hljs-property">parse</span> (&lt;anonymous&gt;)
    at ...
</code></pre>
<p>ç°åœ¨ï¼Œä½ æ—¢ä¿ç•™äº†åŸå§‹é”™è¯¯ï¼Œåˆèƒ½æä¾›æ¸…æ™°çš„é¡¶å±‚é”™è¯¯ä¿¡æ¯ã€‚</p>
<h2 data-id="heading-2">3. å®é™…åº”ç”¨ç¤ºä¾‹</h2>
<p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªæ›´å®é™…çš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchUserData</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-string">"{ broken: true }"</span>); <span class="hljs-comment">// â† è¿™é‡Œä¼šå¤±è´¥</span>
  } <span class="hljs-keyword">catch</span> (parseError) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Failed to fetch user data"</span>, { <span class="hljs-attr">cause</span>: parseError });
  }
}

<span class="hljs-keyword">try</span> {
  <span class="hljs-title function_">fetchUserData</span>();
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err.<span class="hljs-property">message</span>); <span class="hljs-comment">// "Failed to fetch user data"</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err.<span class="hljs-property">cause</span>); <span class="hljs-comment">// [SyntaxError: Unexpected token b in JSON]</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err.<span class="hljs-property">cause</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">SyntaxError</span>); <span class="hljs-comment">// true</span>
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ä»£ç éå¸¸æ¸…æ™°ç›´è§‚ã€‚</p>
<p><strong>è€Œä¸” cause å±æ€§è¢«å®šä¹‰ä¸ºä¸å¯æšä¸¾</strong>ï¼Œå› æ­¤å®ƒä¸ä¼šæ±¡æŸ“æ—¥å¿—æˆ– for...in å¾ªç¯ï¼Œé™¤éä½ æ˜¾å¼è®¿é—®å®ƒã€‚</p>
<h2 data-id="heading-3">4. è‡ªå®šä¹‰é”™è¯¯ç±»</h2>
<p>ä½ å¯ä»¥åœ¨è‡ªå®šä¹‰é”™è¯¯ç±»ä¸­ä½¿ç”¨ <code>cause</code> å±æ€§ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseError</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Error</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">message, { cause } = {}</span>) {
    <span class="hljs-variable language_">super</span>(message, { cause });
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">"DatabaseError"</span>;
  }
}
</code></pre>
<p>å¦‚æœä½ çš„è¿è¡Œç¯å¢ƒæ˜¯ ES2022+ï¼Œè¿™å·²ç»è¶³å¤Ÿäº†ï¼š<code>super(message, { cause })</code> ä¼šè‡ªåŠ¨å¤„ç†ä¸€åˆ‡ã€‚</p>
<p>å¯¹äº TypeScript ç”¨æˆ·ï¼Œç¡®ä¿ <code>tsconfig.json</code> é…ç½®äº†ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"target"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"es2022"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"lib"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"es2022"</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å¦åˆ™ï¼Œåœ¨å°† <code>{ cause }</code> ä¼ é€’ç»™ Error æ„é€ å‡½æ•°æ—¶å¯èƒ½ä¼šçœ‹åˆ°ç±»å‹é”™è¯¯ã€‚</p>
<h2 data-id="heading-4">5. æ›´å¥½çš„æµ‹è¯•æ–­è¨€</h2>
<p>å‡è®¾ä½ çš„æœåŠ¡æŠ›å‡ºäº†ä¸€ä¸ª <code>UserCreationError</code>ï¼Œè¿™æ˜¯ç”±ä¸€ä¸ª <code>ValidationError</code> å¼•å‘çš„ã€‚</p>
<p>ä½ å¯ä»¥è¿™æ ·å†™æ–­è¨€ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">expect</span>(err.<span class="hljs-property">cause</span>).<span class="hljs-title function_">toBeInstanceOf</span>(<span class="hljs-title class_">ValidationError</span>);
</code></pre>
<p>è¿™æ ·æµ‹è¯•ä¼šæ›´æ¸…æ™°ã€æ›´å¥å£®ã€‚</p>
<h2 data-id="heading-5">6. æ³¨æ„äº‹é¡¹</h2>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>console.error(err)</code> åªä¼šæ‰“å°é¡¶å±‚é”™è¯¯ã€‚<code>cause</code>é“¾ä¸ä¼šè‡ªåŠ¨æ˜¾ç¤ºï¼Œå› æ­¤éœ€è¦æ‰‹åŠ¨æ‰“å°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Caused by:"</span>, err.<span class="hljs-property">cause</span>);
</code></pre>
<p>å°½ç®¡ cause å¾ˆå¥½ï¼Œä½†ä¹Ÿä¸è¦æ»¥ç”¨ã€‚æ¯ä¸ªå°é”™è¯¯éƒ½åŒ…è£…å¯èƒ½æ›´ä¹±ï¼Œå› æ­¤åªåœ¨çœŸæ­£éœ€è¦ä¸Šä¸‹æ–‡çš„æ—¶å€™ä½¿ç”¨ã€‚</p>
<h2 data-id="heading-6">7. é€’å½’æ‰“å°å®Œæ•´é”™è¯¯é“¾</h2>
<p>è¿™æ˜¯ä¸€ä¸ªå®‰å…¨éå†é”™è¯¯é“¾çš„å·¥å…·å‡½æ•°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">logErrorChain</span>(<span class="hljs-params">err, level = <span class="hljs-number">0</span></span>) {
  <span class="hljs-keyword">if</span> (!err) <span class="hljs-keyword">return</span>;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">" "</span>.<span class="hljs-title function_">repeat</span>(level * <span class="hljs-number">2</span>) + <span class="hljs-string">`<span class="hljs-subst">${err.name}</span>: <span class="hljs-subst">${err.message}</span>`</span>);

  <span class="hljs-keyword">if</span> (err.<span class="hljs-property">cause</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Error</span>) {
    <span class="hljs-title function_">logErrorChain</span>(err.<span class="hljs-property">cause</span>, level + <span class="hljs-number">1</span>);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (err.<span class="hljs-property">cause</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">" "</span>.<span class="hljs-title function_">repeat</span>((level + <span class="hljs-number">1</span>) * <span class="hljs-number">2</span>) + <span class="hljs-title class_">String</span>(err.<span class="hljs-property">cause</span>));
  }
}
</code></pre>
<p>å¦‚æœéœ€è¦å®Œæ•´å †æ ˆä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">logFullErrorChain</span>(<span class="hljs-params">err</span>) {
  <span class="hljs-keyword">let</span> current = err;
  <span class="hljs-keyword">while</span> (current) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(current.<span class="hljs-property">stack</span>);
    current = current.<span class="hljs-property">cause</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Error</span> ? current.<span class="hljs-property">cause</span> : <span class="hljs-literal">null</span>;
  }
}
</code></pre>
<p>å¯¹äºç»“æ„å¤æ‚ã€å¯èƒ½åœ¨ä¸åŒå±‚çº§å‡ºç°å¤šç§æ•…éšœçš„ç³»ç»Ÿæ¥è¯´ï¼Œè¿™éå¸¸æœ‰ç”¨ã€‚</p>
<h2 data-id="heading-7">8. è·¨å±‚é”™è¯¯é“¾ç¤ºä¾‹</h2>
<p>å‡è®¾è°ƒç”¨æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>æ•°æ®åº“è¿æ¥å¤±è´¥ï¼ŒæŠ›å‡º <code>ConnectionTimeoutError</code></li>
<li>æ•è·ååŒ…è£…æˆ <code>DatabaseError</code></li>
<li>å†æ¬¡æ•è·å¹¶åŒ…è£…æˆ <code>ServiceUnavailableError</code></li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConnectionTimeoutError</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Error</span> {}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseError</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Error</span> {}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ServiceUnavailableError</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Error</span> {}

<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConnectionTimeoutError</span>(<span class="hljs-string">"DB connection timed out"</span>);
    } <span class="hljs-keyword">catch</span> (networkErr) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatabaseError</span>(<span class="hljs-string">"Failed to connect to database"</span>, { <span class="hljs-attr">cause</span>: networkErr });
    }
  } <span class="hljs-keyword">catch</span> (dbErr) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServiceUnavailableError</span>(<span class="hljs-string">"Unable to save user data"</span>, { <span class="hljs-attr">cause</span>: dbErr });
  }
} <span class="hljs-keyword">catch</span> (finalErr) {
  <span class="hljs-title function_">logErrorChain</span>(finalErr);
}
</code></pre>
<p>æ§åˆ¶å°è¾“å‡ºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">ServiceUnavailableError</span>: <span class="hljs-title class_">Unable</span> to save user data
  <span class="hljs-title class_">DatabaseError</span>: <span class="hljs-title class_">Failed</span> to connect to database
    <span class="hljs-title class_">ConnectionTimeoutError</span>: <span class="hljs-variable constant_">DB</span> connection timed out
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œé”™è¯¯é“¾æä¾›äº†ä¸€ä¸ªæ¸…æ™°çš„è§†å›¾ï¼Œå‘Šè¯‰ä½ å‘ç”Ÿäº†ä»€ä¹ˆä»¥åŠåœ¨å“ªé‡Œå‘ç”Ÿçš„ã€‚</p>
<h2 data-id="heading-8">9. æ”¯æŒåº¦</h2>
<p><code>.cause</code> å‚æ•°åœ¨æ‰€æœ‰ç°ä»£ç¯å¢ƒä¸­éƒ½æ”¯æŒï¼š</p>
<ul>
<li>âœ… Chrome 93+ã€Firefox 91+ã€Safari 15+ã€Edge 93+</li>
<li>âœ… Node.js 16.9+</li>
<li>âœ… Bun å’Œ Denoï¼ˆå½“å‰ç‰ˆæœ¬ï¼‰</li>
</ul>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¼€å‘è€…å·¥å…·å¯èƒ½ä¸ä¼šè‡ªåŠ¨æ˜¾ç¤º causeã€‚</p>
<p>æ‰€ä»¥éœ€è¦æ˜¾å¼è®°å½•å®ƒï¼ˆ<code>console.error('Caused by:', err.cause)</code>ï¼‰ã€‚</p>
<p>è¿˜è¦æ³¨æ„ï¼šå¦‚æœä½¿ç”¨ Babel æˆ– TypeScript è¿›è¡Œè½¬è¯‘ï¼Œæ­¤åŠŸèƒ½ä¸ä¼šè¢« polyfillã€‚</p>
<h2 data-id="heading-9">10. å¼‚æ­¥æ“ä½œä¸­çš„é”™è¯¯å¤„ç†</h2>
<p>Error.cause åŒæ ·é€‚ç”¨äºå¼‚æ­¥æ“ä½œã€‚ç»“åˆ async/await å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchData</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"/api/data"</span>);
    <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`HTTP error! Status: <span class="hljs-subst">${response.status}</span>`</span>);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"æ•°æ®è·å–å¤±è´¥:"</span>, error);
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Failed to fetch data"</span>, { <span class="hljs-attr">cause</span>: error });
  }
}
</code></pre>
<p>è¿™ç§æ–¹å¼è®©å¼‚æ­¥ä»£ç çš„é”™è¯¯å¤„ç†é€»è¾‘çœ‹èµ·æ¥ä¸åŒæ­¥ä»£ç æ— å¼‚ï¼Œå¤§å¤§æå‡äº†å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<h2 data-id="heading-10">11. æ€»ç»“</h2>
<p>æ€»ç»“ä¸€ä¸‹ï¼Œ<strong>ç°ä»£é”™è¯¯é“¾å¤„ç†çš„æœ€ä½³å®è·µ</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>new Error(message, { cause })</code> ä¿ç•™ä¸Šä¸‹æ–‡</li>
<li>é€‚ç”¨äºå†…ç½®é”™è¯¯ç±»å’Œè‡ªå®šä¹‰é”™è¯¯ç±»</li>
<li>æ‰€æœ‰ç°ä»£è¿è¡Œæ—¶ç¯å¢ƒéƒ½æ”¯æŒï¼ˆæµè§ˆå™¨ã€Node.jsã€Denoã€Bunï¼‰</li>
<li>å¯ä»¥æ”¹å–„æ—¥å¿—ã€è°ƒè¯•å’Œæµ‹è¯•æ–­è¨€</li>
<li>æ³¨æ„ TypeScriptï¼šè®¾ç½® <code>"target": "es2022"</code> å’Œ <code>"lib": ["es2022"]</code></li>
<li>æ³¨æ„è®°å½• <code>err.cause</code> æˆ–æ‰‹åŠ¨éå†é”™è¯¯é“¾</li>
</ul>
<p>ä»è€Œå®ç°æ›´æ¸…æ™°çš„å †æ ˆè·Ÿè¸ªã€æ›´å¥½çš„ä¸Šä¸‹æ–‡ã€æ›´æ„‰å¿«çš„è°ƒè¯•ä½“éªŒã€‚</p>
<p>Error.cause å°±æ˜¯ä½ é”™è¯¯å¤„ç†ä¸­ç¼ºå°‘çš„é‚£ä¸€ç¯ã€‚</p>
<h2 data-id="heading-11">12. å‚è€ƒé“¾æ¥</h2>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fallthingssmitty.com%2F2025%2F11%2F10%2Ferror-chaining-in-javascript-cleaner-debugging-with-error-cause%2F" target="_blank" title="https://allthingssmitty.com/2025/11/10/error-chaining-in-javascript-cleaner-debugging-with-error-cause/" ref="nofollow noopener noreferrer">allthingssmitty.com/2025/11/10/â€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FError%2Fcause" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Error/cause" ref="nofollow noopener noreferrer">developer.mozilla.org/zh-CN/docs/â€¦</a></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é€šä¹‰åƒé—®Qwen3-Coderæ¨¡å‹å¸®æˆ‘æ€»ç»“çš„typescriptç¬”è®°]]></title>    <link>https://juejin.cn/post/7576844295433699337</link>    <guid>https://juejin.cn/post/7576844295433699337</guid>    <pubDate>2025-11-26T10:31:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576844295433699337" data-draft-id="7576838095519170611" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é€šä¹‰åƒé—®Qwen3-Coderæ¨¡å‹å¸®æˆ‘æ€»ç»“çš„typescriptç¬”è®°"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-26T10:31:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‚’ç±³2333"/> <meta itemprop="url" content="https://juejin.cn/user/1283857659996893"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é€šä¹‰åƒé—®Qwen3-Coderæ¨¡å‹å¸®æˆ‘æ€»ç»“çš„typescriptç¬”è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1283857659996893/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‚’ç±³2333
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T10:31:43.000Z" title="Wed Nov 26 2025 10:31:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç®€å•å­¦äº†å­¦typescriptï¼Œä½†æ˜¯åˆè§‰å¾—åšç¬”è®°éº»çƒ¦ï¼Œäºæ˜¯æ‰¾AIå¸®å¸®å¿™ï¼Œæç¤ºè¯ä¸ºâ€œå¸®æˆ‘æ€»ç»“typescriptçš„å¸¸ç”¨çŸ¥è¯†ç‚¹ï¼Œå¹¶ç”Ÿæˆä¸€ç¯‡markdownã€‚â€ ç”Ÿæˆäº†ä¸‹é¢çš„å†…å®¹ã€‚</p>
<hr/>
<h2 data-id="heading-0">TypeScript å¸¸ç”¨çŸ¥è¯†ç‚¹é€ŸæŸ¥</h2>
<p>TypeScript (TS) æ˜¯ JavaScript çš„è¶…é›†ï¼Œæ·»åŠ äº†é™æ€ç±»å‹ç³»ç»Ÿï¼Œæœ‰åŠ©äºæé«˜ä»£ç è´¨é‡å’Œå¼€å‘æ•ˆç‡ã€‚ä»¥ä¸‹æ˜¯å…¶æ ¸å¿ƒå’Œå¸¸ç”¨çš„ç‰¹æ€§æ€»ç»“ã€‚</p>
<h3 data-id="heading-1">ç›®å½•</h3>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tongyi.com%2F%3Fst%3Dnull%26bizPassParams%3D%2526x-platform%253DexternalH5%26sessionId%3D6ab83cd9bd4e4652b985bbb9ba54cedc%23%25E5%259F%25BA%25E7%25A1%2580%25E7%25B1%25BB%25E5%259E%258B" target="_blank" title="https://www.tongyi.com/?st=null&amp;bizPassParams=%26x-platform%3DexternalH5&amp;sessionId=6ab83cd9bd4e4652b985bbb9ba54cedc#%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B" ref="nofollow noopener noreferrer">åŸºç¡€ç±»å‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tongyi.com%2F%3Fst%3Dnull%26bizPassParams%3D%2526x-platform%253DexternalH5%26sessionId%3D6ab83cd9bd4e4652b985bbb9ba54cedc%23%25E5%258F%2598%25E9%2587%258F%25E5%25A3%25B0%25E6%2598%258E%25E4%25B8%258E%25E7%25B1%25BB%25E5%259E%258B%25E6%25B3%25A8%25E8%25A7%25A3" target="_blank" title="https://www.tongyi.com/?st=null&amp;bizPassParams=%26x-platform%3DexternalH5&amp;sessionId=6ab83cd9bd4e4652b985bbb9ba54cedc#%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E%E4%B8%8E%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3" ref="nofollow noopener noreferrer">å˜é‡å£°æ˜ä¸ç±»å‹æ³¨è§£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tongyi.com%2F%3Fst%3Dnull%26bizPassParams%3D%2526x-platform%253DexternalH5%26sessionId%3D6ab83cd9bd4e4652b985bbb9ba54cedc%23%25E6%258E%25A5%25E5%258F%25A3-interfaces" target="_blank" title="https://www.tongyi.com/?st=null&amp;bizPassParams=%26x-platform%3DexternalH5&amp;sessionId=6ab83cd9bd4e4652b985bbb9ba54cedc#%E6%8E%A5%E5%8F%A3-interfaces" ref="nofollow noopener noreferrer">æ¥å£ (Interfaces)</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tongyi.com%2F%3Fst%3Dnull%26bizPassParams%3D%2526x-platform%253DexternalH5%26sessionId%3D6ab83cd9bd4e4652b985bbb9ba54cedc%23%25E7%25B1%25BB%25E5%259E%258B%25E5%2588%25AB%25E5%2590%258D-type-aliases" target="_blank" title="https://www.tongyi.com/?st=null&amp;bizPassParams=%26x-platform%3DexternalH5&amp;sessionId=6ab83cd9bd4e4652b985bbb9ba54cedc#%E7%B1%BB%E5%9E%8B%E5%88%AB%E5%90%8D-type-aliases" ref="nofollow noopener noreferrer">ç±»å‹åˆ«å (Type Aliases)</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tongyi.com%2F%3Fst%3Dnull%26bizPassParams%3D%2526x-platform%253DexternalH5%26sessionId%3D6ab83cd9bd4e4652b985bbb9ba54cedc%23%25E8%2581%2594%25E5%2590%2588%25E7%25B1%25BB%25E5%259E%258B-union-types--%25E4%25BA%25A4%25E5%258F%2589%25E7%25B1%25BB%25E5%259E%258B-intersection-types" target="_blank" title="https://www.tongyi.com/?st=null&amp;bizPassParams=%26x-platform%3DexternalH5&amp;sessionId=6ab83cd9bd4e4652b985bbb9ba54cedc#%E8%81%94%E5%90%88%E7%B1%BB%E5%9E%8B-union-types--%E4%BA%A4%E5%8F%89%E7%B1%BB%E5%9E%8B-intersection-types" ref="nofollow noopener noreferrer">è”åˆç±»å‹ (Union Types) &amp; äº¤å‰ç±»å‹ (Intersection Types)</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tongyi.com%2F%3Fst%3Dnull%26bizPassParams%3D%2526x-platform%253DexternalH5%26sessionId%3D6ab83cd9bd4e4652b985bbb9ba54cedc%23%25E6%2595%25B0%25E7%25BB%2584%25E4%25B8%258E%25E5%2585%2583%25E7%25BB%2584-tuples" target="_blank" title="https://www.tongyi.com/?st=null&amp;bizPassParams=%26x-platform%3DexternalH5&amp;sessionId=6ab83cd9bd4e4652b985bbb9ba54cedc#%E6%95%B0%E7%BB%84%E4%B8%8E%E5%85%83%E7%BB%84-tuples" ref="nofollow noopener noreferrer">æ•°ç»„ä¸å…ƒç»„ (Tuples)</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tongyi.com%2F%3Fst%3Dnull%26bizPassParams%3D%2526x-platform%253DexternalH5%26sessionId%3D6ab83cd9bd4e4652b985bbb9ba54cedc%23%25E5%2587%25BD%25E6%2595%25B0%25E7%25B1%25BB%25E5%259E%258B" target="_blank" title="https://www.tongyi.com/?st=null&amp;bizPassParams=%26x-platform%3DexternalH5&amp;sessionId=6ab83cd9bd4e4652b985bbb9ba54cedc#%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B" ref="nofollow noopener noreferrer">å‡½æ•°ç±»å‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tongyi.com%2F%3Fst%3Dnull%26bizPassParams%3D%2526x-platform%253DexternalH5%26sessionId%3D6ab83cd9bd4e4652b985bbb9ba54cedc%23%25E7%25B1%25BB-classes" target="_blank" title="https://www.tongyi.com/?st=null&amp;bizPassParams=%26x-platform%3DexternalH5&amp;sessionId=6ab83cd9bd4e4652b985bbb9ba54cedc#%E7%B1%BB-classes" ref="nofollow noopener noreferrer">ç±» (Classes)</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tongyi.com%2F%3Fst%3Dnull%26bizPassParams%3D%2526x-platform%253DexternalH5%26sessionId%3D6ab83cd9bd4e4652b985bbb9ba54cedc%23%25E6%25B3%259B%25E5%259E%258B-generics" target="_blank" title="https://www.tongyi.com/?st=null&amp;bizPassParams=%26x-platform%3DexternalH5&amp;sessionId=6ab83cd9bd4e4652b985bbb9ba54cedc#%E6%B3%9B%E5%9E%8B-generics" ref="nofollow noopener noreferrer">æ³›å‹ (Generics)</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tongyi.com%2F%3Fst%3Dnull%26bizPassParams%3D%2526x-platform%253DexternalH5%26sessionId%3D6ab83cd9bd4e4652b985bbb9ba54cedc%23%25E6%25A8%25A1%25E5%259D%2597-modules-%25E5%2592%258C-%25E5%25AF%25BC%25E5%2585%25A5%25E5%25AF%25BC%25E5%2587%25BA" target="_blank" title="https://www.tongyi.com/?st=null&amp;bizPassParams=%26x-platform%3DexternalH5&amp;sessionId=6ab83cd9bd4e4652b985bbb9ba54cedc#%E6%A8%A1%E5%9D%97-modules-%E5%92%8C-%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA" ref="nofollow noopener noreferrer">æ¨¡å— (Modules) å’Œ å¯¼å…¥/å¯¼å‡º</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tongyi.com%2F%3Fst%3Dnull%26bizPassParams%3D%2526x-platform%253DexternalH5%26sessionId%3D6ab83cd9bd4e4652b985bbb9ba54cedc%23%25E8%25A3%2585%25E9%25A5%25B0%25E5%2599%25A8-decorators" target="_blank" title="https://www.tongyi.com/?st=null&amp;bizPassParams=%26x-platform%3DexternalH5&amp;sessionId=6ab83cd9bd4e4652b985bbb9ba54cedc#%E8%A3%85%E9%A5%B0%E5%99%A8-decorators" ref="nofollow noopener noreferrer">è£…é¥°å™¨ (Decorators)</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tongyi.com%2F%3Fst%3Dnull%26bizPassParams%3D%2526x-platform%253DexternalH5%26sessionId%3D6ab83cd9bd4e4652b985bbb9ba54cedc%23%25E5%25AE%259E%25E7%2594%25A8%25E5%25B7%25A5%25E5%2585%25B7%25E7%25B1%25BB%25E5%259E%258B-utility-types" target="_blank" title="https://www.tongyi.com/?st=null&amp;bizPassParams=%26x-platform%3DexternalH5&amp;sessionId=6ab83cd9bd4e4652b985bbb9ba54cedc#%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB%E5%9E%8B-utility-types" ref="nofollow noopener noreferrer">å®ç”¨å·¥å…·ç±»å‹ (Utility Types)</a></li>
</ol>
<hr/>
<h3 data-id="heading-2">åŸºç¡€ç±»å‹</h3>
<p>TypeScript æä¾›äº†ä¸€ç³»åˆ—åŸºç¡€æ•°æ®ç±»å‹ï¼š</p>
<ul>
<li><code>number</code>: æ•°å­—ç±»å‹ (æ•´æ•°æˆ–æµ®ç‚¹æ•°)ã€‚</li>
<li><code>string</code>: å­—ç¬¦ä¸²ç±»å‹ã€‚</li>
<li><code>boolean</code>: å¸ƒå°”å€¼ (<code>true</code> æˆ– <code>false</code>)ã€‚</li>
<li><code>null</code> å’Œ <code>undefined</code>: å®ƒä»¬æœ‰è‡ªå·±çš„ç±»å‹ <code>null</code> å’Œ <code>undefined</code>ã€‚ä½†åœ¨ <code>strictNullChecks</code> æ¨¡å¼ä¸‹ï¼ˆæ¨èï¼‰ï¼Œå®ƒä»¬åªèƒ½èµ‹å€¼ç»™ <code>any</code> å’Œå„è‡ªçš„ç±»å‹ï¼›å¦åˆ™ï¼ˆéä¸¥æ ¼æ¨¡å¼ï¼‰ï¼Œå®ƒä»¬æ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ã€‚</li>
<li><code>symbol</code>: ES6 æ–°å¢çš„åŸå§‹æ•°æ®ç±»å‹ï¼Œè¡¨ç¤ºç‹¬ä¸€æ— äºŒçš„å€¼ã€‚</li>
<li><code>bigint</code>: å¤§æ•´æ•°ç±»å‹ã€‚</li>
<li><code>void</code>: é€šå¸¸ç”¨äºè¡¨ç¤ºæ²¡æœ‰è¿”å›å€¼çš„å‡½æ•°çš„è¿”å›ç±»å‹ã€‚</li>
<li><code>any</code>: å…è®¸ä»»ä½•ç±»å‹çš„å€¼ï¼Œä¼šè·³è¿‡ç±»å‹æ£€æŸ¥ï¼ˆä¸æ¨èæ»¥ç”¨ï¼‰ã€‚</li>
<li><code>unknown</code>: ä»£è¡¨ä»»ä½•å€¼ã€‚ä¸ <code>any</code> ä¸åŒçš„æ˜¯ï¼Œåœ¨å¯¹ <code>unknown</code> ç±»å‹çš„å€¼æ‰§è¡Œæ“ä½œå‰ï¼Œå¿…é¡»è¿›è¡Œç±»å‹æ£€æŸ¥æˆ–ç±»å‹æ–­è¨€ã€‚</li>
<li><code>never</code>: è¡¨ç¤ºæ°¸ä¸å­˜åœ¨çš„å€¼çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œæ€»æ˜¯æŠ›å‡ºå¼‚å¸¸æˆ–æ ¹æœ¬ä¸å¯èƒ½æœ‰è¿”å›å€¼çš„å‡½æ•°è¡¨è¾¾å¼çš„è¿”å›ç±»å‹ã€‚</li>
<li><code>object</code>: éåŸå§‹ç±»å‹ï¼ˆå³é™¤ number, string, boolean, symbol, null, undefined, bigint ä¹‹å¤–çš„ç±»å‹ï¼‰ã€‚æ³¨æ„ï¼šå®ƒä¸åŒäº <code>{}</code>ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-3">å˜é‡å£°æ˜ä¸ç±»å‹æ³¨è§£</h3>
<p>ä½¿ç”¨ <code>let</code>, <code>const</code>, <code>var</code> å£°æ˜å˜é‡ï¼Œå¹¶é€šè¿‡å†’å· <code>:</code> æ·»åŠ ç±»å‹æ³¨è§£ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">let</span> <span class="hljs-attr">isDone</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;
<span class="hljs-keyword">let</span> <span class="hljs-attr">decimal</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">6</span>;
<span class="hljs-keyword">let</span> <span class="hljs-attr">color</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"blue"</span>;
<span class="hljs-keyword">let</span> <span class="hljs-attr">list</span>: <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
<span class="hljs-keyword">let</span> <span class="hljs-attr">u</span>: <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;
<span class="hljs-keyword">let</span> <span class="hljs-attr">n</span>: <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

<span class="hljs-comment">// å‡½æ•°å‚æ•°å’Œè¿”å›å€¼çš„ç±»å‹æ³¨è§£</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> x + y;
}
</code></pre>
<hr/>
<h3 data-id="heading-4">æ¥å£ (Interfaces)</h3>
<p>æ¥å£ç”¨äºå®šä¹‰å¯¹è±¡çš„ç»“æ„ï¼ˆShapeï¼‰ï¼Œæ˜¯ä¸€ç§å¥‘çº¦ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Person</span> {
    <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;
    address?: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// å¯é€‰å±æ€§</span>
    <span class="hljs-keyword">readonly</span> <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// åªè¯»å±æ€§</span>
}

<span class="hljs-keyword">const</span> <span class="hljs-attr">user</span>: <span class="hljs-title class_">Person</span> = {
    <span class="hljs-attr">name</span>: <span class="hljs-string">"Alice"</span>,
    <span class="hljs-attr">age</span>: <span class="hljs-number">30</span>,
    <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>
};
<span class="hljs-comment">// user.id = 2; // Error: Cannot assign to 'id' because it is a read-only property.</span>

<span class="hljs-comment">// å‡½æ•°ç±»å‹æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">SearchFunc</span> {
    (<span class="hljs-attr">source</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">subString</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">boolean</span>;
}
<span class="hljs-keyword">let</span> <span class="hljs-attr">mySearch</span>: <span class="hljs-title class_">SearchFunc</span>;
mySearch = <span class="hljs-keyword">function</span>(<span class="hljs-params">src, sub</span>) { <span class="hljs-comment">// å‚æ•°åä¸å¿…ä¸æ¥å£ä¸­å®šä¹‰çš„åå­—ç›¸åŒ¹é…</span>
    <span class="hljs-keyword">let</span> result = src.<span class="hljs-title function_">search</span>(sub);
    <span class="hljs-keyword">return</span> result &gt; -<span class="hljs-number">1</span>;
}
</code></pre>
<hr/>
<h3 data-id="heading-5">ç±»å‹åˆ«å (Type Aliases)</h3>
<p>ç±»å‹åˆ«åä¸ºç±»å‹åˆ›å»ºä¸€ä¸ªæ–°çš„åç§°ã€‚å®ƒå¯ä»¥ç”¨äºåŸå§‹å€¼ã€è”åˆç±»å‹ã€å…ƒç»„ä»¥åŠå…¶å®ƒä»»ä½•ä½ éœ€è¦æ‰‹å†™çš„ç±»å‹ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">type <span class="hljs-attr">Name</span> = string<span class="hljs-comment">;</span>
type <span class="hljs-attr">NameResolver</span> = () =&gt; string<span class="hljs-comment">;</span>
type <span class="hljs-attr">NameOrResolver</span> = Name | NameResolver<span class="hljs-comment">;</span>

function getName(n: NameOrResolver): Name {
    if (typeof <span class="hljs-attr">n</span> === <span class="hljs-string">'string'</span>) {
        return n<span class="hljs-comment">;</span>
    } else {
        return n()<span class="hljs-comment">;</span>
    }
}

// ä¹Ÿå¯ä»¥åƒæ¥å£ä¸€æ ·æè¿°å¯¹è±¡å½¢çŠ¶
type <span class="hljs-attr">Point</span> = {
    x: number<span class="hljs-comment">;</span>
    y: number<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>

// ç±»å‹åˆ«åå¯ä»¥ä½¿ç”¨äº¤é›†å’Œè”åˆ
type <span class="hljs-attr">PartialPoint</span> = { x: number<span class="hljs-comment">; } | { y: number; };</span>
</code></pre>
<p><strong>æ¥å£ vs ç±»å‹åˆ«å</strong>:</p>
<ul>
<li>æ¥å£å¯ä»¥â€œæ‰“å¼€â€å¹¶æ‰©å±•ï¼ˆDeclaration Mergingï¼‰ã€‚</li>
<li>ç±»å‹åˆ«åä¸èƒ½è¢«é‡æ–°æ‰“å¼€ä»¥æ·»åŠ æ–°çš„å±æ€§ã€‚</li>
<li>æ¥å£é€šå¸¸ç”¨äºå®šä¹‰å¯¹è±¡çš„ç»“æ„ï¼Œè€Œç±»å‹åˆ«åæ›´é€šç”¨ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-6">è”åˆç±»å‹ (Union Types) &amp; äº¤å‰ç±»å‹ (Intersection Types)</h3>
<ul>
<li>
<p><strong>è”åˆç±»å‹</strong>: è¡¨ç¤ºä¸€ä¸ªå€¼å¯ä»¥æ˜¯å‡ ç§ç±»å‹ä¹‹ä¸€ã€‚ä½¿ç”¨ <code>|</code> åˆ†éš”æ¯ä¸ªç±»å‹ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">let value: string | number<span class="hljs-comment">;</span>
<span class="hljs-attr">value</span> = <span class="hljs-string">"hello"</span><span class="hljs-comment">; // OK</span>
<span class="hljs-attr">value</span> = <span class="hljs-number">42</span><span class="hljs-comment">;      // OK</span>
// <span class="hljs-attr">value</span> = <span class="hljs-literal">true</span><span class="hljs-comment">; // Error</span>
</code></pre>
</li>
<li>
<p><strong>äº¤å‰ç±»å‹</strong>: å°†å¤šä¸ªç±»å‹åˆå¹¶ä¸ºä¸€ä¸ªç±»å‹ã€‚ä½¿ç”¨ <code>&amp;</code> è¿æ¥ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">interface Colorful {
    color: string<span class="hljs-comment">;</span>
}
interface Circle {
    radius: number<span class="hljs-comment">;</span>
}

type <span class="hljs-attr">ColorfulCircle</span> = Colorful &amp; Circle<span class="hljs-comment">;</span>

const cc: <span class="hljs-attr">ColorfulCircle</span> = {
    color: "red",
    radius: 10
}<span class="hljs-comment">; // å¿…é¡»åŒæ—¶æ»¡è¶³ Colorful å’Œ Circle çš„è¦æ±‚</span>
</code></pre>
</li>
</ul>
<hr/>
<h3 data-id="heading-7">æ•°ç»„ä¸å…ƒç»„ (Tuples)</h3>
<ul>
<li>
<p><strong>æ•°ç»„</strong>: å­˜å‚¨ç›¸åŒç±»å‹çš„å…ƒç´ ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">let</span> <span class="hljs-attr">list1</span>: <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
<span class="hljs-keyword">let</span> <span class="hljs-attr">list2</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">number</span>&gt; = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]; <span class="hljs-comment">// æ³›å‹è¯­æ³•</span>
</code></pre>
</li>
<li>
<p><strong>å…ƒç»„</strong>: å…è®¸è¡¨ç¤ºä¸€ä¸ªå·²çŸ¥å…ƒç´ æ•°é‡å’Œç±»å‹çš„æ•°ç»„ï¼Œå„å…ƒç´ çš„ç±»å‹ä¸å¿…ç›¸åŒã€‚</p>
<pre><code class="hljs language-python" lang="python">let <span class="hljs-built_in">tuple</span>: [string, number] = [<span class="hljs-string">'hello'</span>, <span class="hljs-number">10</span>];
// <span class="hljs-built_in">tuple</span>[<span class="hljs-number">0</span>] = <span class="hljs-number">10</span>; // Error: <span class="hljs-type">Type</span> <span class="hljs-string">'number'</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> assignable to <span class="hljs-built_in">type</span> <span class="hljs-string">'string'</span>.
</code></pre>
</li>
</ul>
<hr/>
<h3 data-id="heading-8">å‡½æ•°ç±»å‹</h3>
<ul>
<li>
<p><strong>å‡½æ•°å£°æ˜/è¡¨è¾¾å¼ä¸­çš„ç±»å‹æ³¨è§£</strong>:</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">greet</span>(<span class="hljs-params">name: <span class="hljs-keyword">string</span></span>): <span class="hljs-title">string</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello, "</span> + name;
}

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">greeter</span> = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name: <span class="hljs-keyword">string</span></span>): <span class="hljs-title">string</span> </span>{
     <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello, "</span> + name;
};

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">arrowGreeter</span> = (name: <span class="hljs-keyword">string</span>): <span class="hljs-keyword">string</span> =&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello, "</span> + name;
};
</code></pre>
</li>
<li>
<p><strong>å¯é€‰å‚æ•°å’Œé»˜è®¤å‚æ•°</strong>:</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildName</span>(<span class="hljs-params">firstName: <span class="hljs-keyword">string</span>, lastName?: <span class="hljs-keyword">string</span></span>) </span>{ ... } <span class="hljs-comment">// lastName æ˜¯å¯é€‰çš„</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildNameWithDefault</span>(<span class="hljs-params">firstName: <span class="hljs-keyword">string</span>, lastName = <span class="hljs-string">"Smith"</span></span>) </span>{ ... } <span class="hljs-comment">// é»˜è®¤å‚æ•°</span>
</code></pre>
</li>
<li>
<p><strong>å‰©ä½™å‚æ•°</strong>:</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function">function <span class="hljs-title">buildNameRest</span>(<span class="hljs-params">firstName: <span class="hljs-built_in">string</span>, ...restOfName: <span class="hljs-built_in">string</span>[]</span>)</span> {
    <span class="hljs-keyword">return</span> firstName + <span class="hljs-string">" "</span> + restOfName.<span class="hljs-keyword">join</span>(<span class="hljs-string">" "</span>);
}
</code></pre>
</li>
</ul>
<hr/>
<h3 data-id="heading-9">ç±» (Classes)</h3>
<p>TypeScript æ”¯æŒé¢å‘å¯¹è±¡ç¼–ç¨‹çš„ç±»ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {
    <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// ç§æœ‰å±æ€§</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-attr">species</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// å—ä¿æŠ¤çš„å±æ€§</span>
    <span class="hljs-keyword">readonly</span> <span class="hljs-attr">legs</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">4</span>; <span class="hljs-comment">// åªè¯»å±æ€§</span>

    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">theName: <span class="hljs-built_in">string</span>, theAge: <span class="hljs-built_in">number</span>, theSpecies: <span class="hljs-built_in">string</span></span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = theName;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = theAge;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">species</span> = theSpecies;
    }

    <span class="hljs-title function_">move</span>(<span class="hljs-params">distanceInMeters: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span></span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> moved <span class="hljs-subst">${distanceInMeters}</span>m.`</span>);
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> {
    <span class="hljs-attr">breed</span>: <span class="hljs-built_in">string</span>;

    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, age: <span class="hljs-built_in">number</span>, species: <span class="hljs-built_in">string</span>, breed: <span class="hljs-built_in">string</span></span>) {
        <span class="hljs-variable language_">super</span>(name, age, species); <span class="hljs-comment">// è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">breed</span> = breed;
    }

    <span class="hljs-title function_">bark</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Woof! Woof!'</span>);
    }

    <span class="hljs-title function_">move</span>(<span class="hljs-params">distanceInMeters = <span class="hljs-number">5</span></span>) { <span class="hljs-comment">// é‡å†™çˆ¶ç±»æ–¹æ³•</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Running..."</span>);
        <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">move</span>(distanceInMeters);
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-10">æ³›å‹ (Generics)</h3>
<p>æ³›å‹å…è®¸ä½ ç¼–å†™å¯å¤ç”¨çš„ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶å¯ä»¥å·¥ä½œåœ¨å¤šç§ç±»å‹ä¹‹ä¸Šã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ³›å‹å‡½æ•°</span>
<span class="hljs-keyword">function</span> identity&lt;T&gt;(<span class="hljs-attr">arg</span>: T): T {
    <span class="hljs-keyword">return</span> arg;
}
<span class="hljs-keyword">let</span> output1 = identity&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">"myString"</span>); <span class="hljs-comment">// type argument specified</span>
<span class="hljs-keyword">let</span> output2 = <span class="hljs-title function_">identity</span>(<span class="hljs-string">"myString"</span>); <span class="hljs-comment">// type argument inferred</span>

<span class="hljs-comment">// æ³›å‹æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">GenericIdentityFn</span>&lt;T&gt; {
    (<span class="hljs-attr">arg</span>: T): T;
}
<span class="hljs-keyword">let</span> <span class="hljs-attr">myIdentity</span>: <span class="hljs-title class_">GenericIdentityFn</span>&lt;<span class="hljs-built_in">number</span>&gt; = identity;

<span class="hljs-comment">// æ³›å‹ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericNumber</span>&lt;T&gt; {
    <span class="hljs-attr">zeroValue</span>: T;
    <span class="hljs-attr">add</span>: <span class="hljs-function">(<span class="hljs-params">x: T, y: T</span>) =&gt;</span> T;
}

<span class="hljs-keyword">let</span> myGenericNumber = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericNumber</span>&lt;<span class="hljs-built_in">number</span>&gt;();
myGenericNumber.<span class="hljs-property">zeroValue</span> = <span class="hljs-number">0</span>;
myGenericNumber.<span class="hljs-property">add</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">x, y</span>) { <span class="hljs-keyword">return</span> x + y; };

<span class="hljs-comment">// æ³›å‹çº¦æŸ</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Lengthwise</span> {
    <span class="hljs-attr">length</span>: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">function</span> loggingIdentity&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Lengthwise</span>&gt;(<span class="hljs-attr">arg</span>: T): T {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arg.<span class="hljs-property">length</span>); <span class="hljs-comment">// Now we know it has a .length property, so no more error</span>
    <span class="hljs-keyword">return</span> arg;
}
<span class="hljs-comment">// loggingIdentity(3); // Error, number doesn't have a .length property</span>
<span class="hljs-title function_">loggingIdentity</span>({<span class="hljs-attr">length</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">3</span>}); <span class="hljs-comment">// OK</span>
</code></pre>
<hr/>
<h3 data-id="heading-11">æ¨¡å— (Modules) å’Œ å¯¼å…¥/å¯¼å‡º</h3>
<p>å°†ä»£ç ç»„ç»‡åˆ°ä¸åŒçš„æ–‡ä»¶ä¸­ï¼Œå¹¶æ§åˆ¶å®ƒä»¬ä¹‹é—´çš„å¯è§æ€§ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// math.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> pi = <span class="hljs-number">3.14</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-keyword">return</span> x + y;
}
<span class="hljs-comment">// æˆ–è€…ç»Ÿä¸€å¯¼å‡º</span>
<span class="hljs-comment">// const pi = 3.14;</span>
<span class="hljs-comment">// function add(x: number, y: number) { return x + y; }</span>
<span class="hljs-comment">// export { pi, add };</span>

<span class="hljs-comment">// main.ts</span>
<span class="hljs-keyword">import</span> { pi, add } <span class="hljs-keyword">from</span> <span class="hljs-string">'./math'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(pi); <span class="hljs-comment">// 3.14</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)); <span class="hljs-comment">// 3</span>

<span class="hljs-comment">// å¯¼å…¥é‡å‘½å</span>
<span class="hljs-keyword">import</span> { add <span class="hljs-keyword">as</span> sum } <span class="hljs-keyword">from</span> <span class="hljs-string">'./math'</span>;

<span class="hljs-comment">// å¯¼å…¥æ•´ä¸ªæ¨¡å—</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> math <span class="hljs-keyword">from</span> <span class="hljs-string">'./math'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(math.<span class="hljs-property">pi</span>);

<span class="hljs-comment">// é»˜è®¤å¯¼å‡º</span>
<span class="hljs-comment">// export default class Calculator { ... }</span>
<span class="hljs-comment">// import Calculator from './Calculator'; // æ³¨æ„æ²¡æœ‰èŠ±æ‹¬å· {}</span>
</code></pre>
<hr/>
<h3 data-id="heading-12">è£…é¥°å™¨ (Decorators)</h3>
<p>ä¸€ç§ç‰¹æ®Šç±»å‹çš„å£°æ˜ï¼Œå¯ä»¥è¢«é™„åŠ åˆ°ç±»å£°æ˜ï¼Œæ–¹æ³•ï¼Œè®¿é—®ç¬¦ï¼Œå±æ€§æˆ–å‚æ•°ä¸Šã€‚è£…é¥°å™¨ä½¿ç”¨ <code>@expression</code> è¿™ç§å½¢å¼ï¼Œ<code>expression</code> æ±‚å€¼åå¿…é¡»ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šåœ¨è¿è¡Œæ—¶è¢«è°ƒç”¨ã€‚</p>
<p>éœ€è¦å¯ç”¨å®éªŒæ€§æ”¯æŒ (<code>"experimentalDecorators": true</code> in <code>tsconfig.json</code>)ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç±»è£…é¥°å™¨ç¤ºä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">sealed</span>(<span class="hljs-params">constructor: <span class="hljs-built_in">Function</span></span>) {
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">seal</span>(constructor);
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">seal</span>(constructor.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
}

<span class="hljs-meta">@sealed</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Greeter</span> {
    <span class="hljs-attr">greeting</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">message: <span class="hljs-built_in">string</span></span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">greeting</span> = message;
    }
    <span class="hljs-title function_">greet</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello, "</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">greeting</span>;
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-13">å®ç”¨å·¥å…·ç±»å‹ (Utility Types)</h3>
<p>TypeScript å†…ç½®äº†ä¸€äº›éå¸¸æœ‰ç”¨çš„å·¥å…·ç±»å‹æ¥ç®€åŒ–å¸¸è§çš„ç±»å‹è½¬æ¢ã€‚</p>
<ul>
<li><code>Partial&lt;T&gt;</code>: æ„é€ ç±»å‹ <code>T</code>ï¼Œå¹¶å°†å®ƒæ‰€æœ‰çš„å±æ€§è®¾ç½®ä¸ºå¯é€‰çš„ã€‚</li>
<li><code>Readonly&lt;T&gt;</code>: æ„é€ ç±»å‹ <code>T</code>ï¼Œå¹¶å°†å®ƒæ‰€æœ‰çš„å±æ€§è®¾ç½®ä¸ºåªè¯»çš„ã€‚</li>
<li><code>Record&lt;K, T&gt;</code>: æ„é€ ä¸€ä¸ªç±»å‹ï¼Œå…¶å±æ€§åçš„ç±»å‹æ˜¯ <code>K</code>ï¼Œå±æ€§å€¼çš„ç±»å‹æ˜¯ <code>T</code>ã€‚</li>
<li><code>Pick&lt;T, K&gt;</code>: ä»ç±»å‹ <code>T</code> ä¸­é€‰æ‹©å‡ºå±æ€§ <code>K</code>ï¼Œæ„é€ æˆä¸€ä¸ªæ–°çš„ç±»å‹ã€‚</li>
<li><code>Omit&lt;T, K&gt;</code>: ä»ç±»å‹ <code>T</code> ä¸­æ’é™¤æ‰å±æ€§ <code>K</code>ï¼Œæ„é€ æˆä¸€ä¸ªæ–°çš„ç±»å‹ã€‚</li>
<li><code>Exclude&lt;T, U&gt;</code>: ä» <code>T</code> ä¸­æ’é™¤æ‰é‚£äº›å¯ä»¥èµ‹å€¼ç»™ <code>U</code> çš„ç±»å‹ã€‚</li>
<li><code>Extract&lt;T, U&gt;</code>: ä» <code>T</code> ä¸­æå–é‚£äº›å¯ä»¥èµ‹å€¼ç»™ <code>U</code> çš„ç±»å‹ã€‚</li>
<li><code>NonNullable&lt;T&gt;</code>: ä» <code>T</code> ä¸­æ’é™¤ <code>null</code> å’Œ <code>undefined</code>ã€‚</li>
<li><code>Parameters&lt;T&gt;</code>: è·å–å‡½æ•°ç±»å‹çš„å‚æ•°ç±»å‹ç»„æˆçš„å…ƒç»„ç±»å‹ã€‚</li>
<li><code>ReturnType&lt;T&gt;</code>: è·å–å‡½æ•°ç±»å‹çš„è¿”å›å€¼ç±»å‹ã€‚</li>
<li><code>InstanceType&lt;T&gt;</code>: è·å–æ„é€ å‡½æ•°ç±»å‹çš„å®ä¾‹ç±»å‹ã€‚</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">interface Todo {
  title: string<span class="hljs-comment">;</span>
  description: string<span class="hljs-comment">;</span>
  completed: boolean<span class="hljs-comment">;</span>
}

type <span class="hljs-attr">TodoPreview</span> = Pick&lt;Todo, <span class="hljs-string">'title'</span> | <span class="hljs-string">'completed'</span>&gt;<span class="hljs-comment">; // { title: string; completed: boolean; }</span>

type <span class="hljs-attr">TodoInfo</span> = Omit&lt;Todo, <span class="hljs-string">'description'</span>&gt;<span class="hljs-comment">; // { title: string; completed: boolean; }</span>

type <span class="hljs-attr">Status</span> = <span class="hljs-string">'pending'</span> | <span class="hljs-string">'fulfilled'</span> | <span class="hljs-string">'rejected'</span><span class="hljs-comment">;</span>
type <span class="hljs-attr">SyncStatus</span> = Exclude&lt;Status, <span class="hljs-string">'pending'</span>&gt;<span class="hljs-comment">; // 'fulfilled' | 'rejected'</span>

function f1(s: string) { return { a: 1, b: s }<span class="hljs-comment">; }</span>
type <span class="hljs-attr">F1Params</span> = Parameters&lt;typeof f1&gt;<span class="hljs-comment">; // [s: string]</span>
type <span class="hljs-attr">F1ReturnType</span> = ReturnType&lt;typeof f1&gt;<span class="hljs-comment">; // { a: number; b: string; }</span>
</code></pre>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯æ—¥å¸¸å·¥ä½œå¼€å‘æŠ€å·§æ±‡æ€»]]></title>    <link>https://juejin.cn/post/7576863819981504521</link>    <guid>https://juejin.cn/post/7576863819981504521</guid>    <pubDate>2025-11-26T10:41:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576863819981504521" data-draft-id="7574621387574050862" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯æ—¥å¸¸å·¥ä½œå¼€å‘æŠ€å·§æ±‡æ€»"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2025-11-26T10:41:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="__èŠ±èŠ±ä¸–ç•Œ"/> <meta itemprop="url" content="https://juejin.cn/user/1724480211391783"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯æ—¥å¸¸å·¥ä½œå¼€å‘æŠ€å·§æ±‡æ€»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1724480211391783/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    __èŠ±èŠ±ä¸–ç•Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T10:41:21.000Z" title="Wed Nov 26 2025 10:41:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€JSç¯‡</h2>
<h4 data-id="heading-1">1. structuredClone æ·±æ‹·è´</h4>
<p><strong>JavaScript</strong> å†…ç½®äº†ä¸€ä¸ª <code>structuredClone()</code> çš„æ–¹æ³•ï¼Œ æ­¤æ–¹æ³•æä¾›äº†ä¸€ç§ç®€å•æœ‰æ•ˆçš„æ–¹æ³•æ¥æ·±åº¦å…‹éš†å¯¹è±¡ï¼Œ<strong>æ”¯æŒå¤æ‚æ•°æ®ç±»å‹</strong>ï¼ŒåŒ…æ‹¬Â <code>Date</code>ã€<code>RegExp</code>ã€<code>Map</code>ã€<code>Set</code>ã€<code>ArrayBuffer</code>ã€<code>Blob</code>ã€<code>File</code>Â ç­‰ã€‚æµè§ˆå™¨åº•å±‚å®ç°ï¼Œé€šå¸¸æ¯”æ‰‹åŠ¨é€’å½’æˆ– JSON æ–¹æ³•æ›´é«˜æ•ˆã€‚</p>
<p><strong>å…¼å®¹æ€§</strong>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f56dcee5695b4ea081d4baee7741274b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX1_oirHoirHkuJbnlYw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764758481&amp;x-signature=t1FHAqcqBJ1xz6FK0H9ziIf%2Fsek%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-2">2. å‡½æ•°å¼ç¼–ç¨‹</h4>
<p><strong>ES14</strong> æ›´æ–°äº†è®¸å¤šæ•°ç»„æ–¹æ³•æˆ–è€…ä¸ºåŸæœ‰çš„æ•°ç»„æ–¹æ³•å¢åŠ <strong>ä¸ä¼šå¸¦æ¥çªå˜(without mutation)</strong> çš„äº’è¡¥æ–¹æ³•ã€‚<code>æ„å‘³ç€å®ƒä»¬ä¼šåŸºäºåŸæ•°ç»„åˆ›å»ºæ–°çš„æ•°ç»„ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹åŸæ•°ç»„ã€‚</code></p>
<p>æ–°å¢çš„äº’è¡¥æ–¹æ³•æœ‰</p>
<ul>
<li><code>Array.sort() -&gt; Array.toSorted()</code></li>
<li><code>Array.splice() -&gt; Array.toSpliced()</code></li>
<li><code>Array.reverse() -&gt; Array.toReversed()</code></li>
</ul>
<p>æ–°å¢çš„æ–°æ•°ç»„æ–¹æ³•æœ‰ï¼š<code>Array.with()</code>ã€<code>Array.findLast()</code>ã€<code>Array.findLastIndex()</code></p>
<ul>
<li><code>Array.with()</code><br/>è¿”å›ä¸€ä¸ª<strong>æ–°æ•°ç»„</strong>ï¼Œå°†åŸæ•°ç»„ä¸­æŒ‡å®šç´¢å¼•Â <code>index</code>Â çš„å…ƒç´ æ›¿æ¢ä¸ºÂ <code>value</code>ï¼Œ<strong>ä¸ä¿®æ”¹åŸæ•°ç»„</strong></li>
</ul>
<p><strong>è¯­æ³•</strong>  <br/><code>index</code>ï¼šè¦æ›¿æ¢çš„å…ƒç´ çš„ç´¢å¼•ï¼ˆå¯ä»¥æ˜¯è´Ÿæ•°ï¼Œè¡¨ç¤ºä»æœ«å°¾å¼€å§‹è®¡æ•°ï¼‰ã€‚<br/>
<code>value</code>ï¼šæ›¿æ¢åçš„æ–°å€¼</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> newArray = array.<span class="hljs-title function_">with</span>(index, value)

<span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>];
<span class="hljs-keyword">const</span> newArr = arr.<span class="hljs-title function_">with</span>(<span class="hljs-number">1</span>, <span class="hljs-string">"hello"</span>); <span class="hljs-comment">// æ›¿æ¢ç´¢å¼• 1 çš„å…ƒç´  </span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr);    <span class="hljs-comment">// [1, 2, 3, 4]ï¼ˆåŸæ•°ç»„ä¸å˜ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(newArr); <span class="hljs-comment">// [1, "hello", 3, 4]ï¼ˆæ–°æ•°ç»„ï¼‰</span>

<span class="hljs-comment">// æ”¯æŒè´Ÿæ•°ç´¢å¼•ï¼ˆä»æœ«å°¾å¼€å§‹ï¼‰</span>
<span class="hljs-keyword">const</span> newArr2 = arr.<span class="hljs-title function_">with</span>(-<span class="hljs-number">2</span>, <span class="hljs-string">"world"</span>); <span class="hljs-comment">// æ›¿æ¢å€’æ•°ç¬¬ 2 ä¸ªå…ƒç´ </span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(newArr2); <span class="hljs-comment">// [1, 2, "world", 4]</span>
</code></pre>
<ul>
<li>
<p><code>Array.findLast()</code><br/>ä»æ•°ç»„<strong>æœ«å°¾å‘å‰</strong>æŸ¥æ‰¾ç¬¬ä¸€ä¸ªæ»¡è¶³Â <code>callback</code>Â æ¡ä»¶çš„å…ƒç´ ï¼Œå¹¶è¿”å›è¯¥å…ƒç´ ã€‚å¦‚æœæœªæ‰¾åˆ°ï¼Œè¿”å›Â <code>undefined</code></p>
</li>
<li>
<p><code>Array.findLastIndex()</code> <br/>ä»æ•°ç»„<strong>æœ«å°¾å‘å‰</strong>æŸ¥æ‰¾ç¬¬ä¸€ä¸ªæ»¡è¶³Â <code>callback</code>Â æ¡ä»¶çš„å…ƒç´ ï¼Œå¹¶è¿”å›å…¶<strong>ç´¢å¼•</strong>ã€‚å¦‚æœæœªæ‰¾åˆ°ï¼Œè¿”å›Â <code>-1</code></p>
</li>
</ul>
<h4 data-id="heading-3">3. æƒ°æ€§å‡½æ•°</h4>
<p>JavaScript ä¸­çš„ <strong>æƒ°æ€§å‡½æ•°ï¼ˆLazy Functionï¼‰</strong> æ˜¯ä¸€ç§ä¼˜åŒ–æŠ€æœ¯ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>å‡½æ•°åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶æ‰§è¡Œä¸€äº›åˆå§‹åŒ–æˆ–åˆ¤æ–­é€»è¾‘ï¼Œå¹¶åœ¨æ‰§è¡Œåå°†è‡ªèº«é‡å®šä¹‰ä¸ºä¸€ä¸ªæ›´é«˜æ•ˆæˆ–æ›´ç®€å•çš„ç‰ˆæœ¬ï¼Œåç»­è°ƒç”¨å°±ç›´æ¥ä½¿ç”¨è¿™ä¸ªæ–°ç‰ˆæœ¬ï¼Œé¿å…é‡å¤å¼€é”€</strong>ã€‚</p>
<p><strong>æ™®é€šå†™æ³•</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">copyToClipboard</span>(<span class="hljs-params">text</span>) {
    <span class="hljs-comment">// ä¼˜å…ˆä½¿ç”¨Clipboard API</span>
    <span class="hljs-keyword">if</span> (navigator.<span class="hljs-property">clipboard</span>) {
      <span class="hljs-keyword">return</span> navigator.<span class="hljs-property">clipboard</span>
        .<span class="hljs-title function_">writeText</span>(text)
        .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-title class_">Message</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">'å¤åˆ¶æˆåŠŸ'</span>)
          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
        })
        .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ä½¿ç”¨Clipboard APIå¤åˆ¶å¤±è´¥: '</span>, err)
          <span class="hljs-comment">// å¦‚æœClipboard APIå¤±è´¥ï¼Œå°è¯•ä½¿ç”¨é™çº§æ–¹æ¡ˆ</span>
          <span class="hljs-keyword">return</span> <span class="hljs-title function_">copyUsingExecCommand</span>(text)
        })
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// å¦‚æœä¸æ”¯æŒClipboard APIï¼Œç›´æ¥ä½¿ç”¨é™çº§æ–¹æ¡ˆ</span>
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">copyUsingExecCommand</span>(text)
    }
}
</code></pre>
<p><strong>æƒ°æ€§å†™æ³•</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">copyToClipboard</span>(<span class="hljs-params">text</span>) {
  <span class="hljs-comment">// ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶è¿›è¡Œèƒ½åŠ›æ£€æµ‹ï¼Œå¹¶é‡å®šä¹‰è‡ªèº«</span>
  <span class="hljs-keyword">if</span> (navigator.<span class="hljs-property">clipboard</span>) {
    <span class="hljs-comment">// æ”¯æŒ Clipboard API</span>
    copyToClipboard = <span class="hljs-keyword">function</span> (<span class="hljs-params">text</span>) {
      <span class="hljs-keyword">return</span> navigator.<span class="hljs-property">clipboard</span>
        .<span class="hljs-title function_">writeText</span>(text)
        .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡æœ¬å·²æˆåŠŸå¤åˆ¶åˆ°å‰ªè´´æ¿'</span>);
          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        })
        .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Clipboard API å¤åˆ¶å¤±è´¥:'</span>, err);
          <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        });
    };
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// ä¸æ”¯æŒ Clipboard APIï¼Œä½¿ç”¨ execCommand é™çº§æ–¹æ¡ˆ</span>
    copyToClipboard = <span class="hljs-keyword">function</span> (<span class="hljs-params">text</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">copyUsingExecCommand</span>(text);
    };
  }

  <span class="hljs-comment">// æ‰§è¡Œç¬¬ä¸€æ¬¡è°ƒç”¨</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">copyToClipboard</span>(text);
}
</code></pre>
<h2 data-id="heading-4">äºŒã€CSSç¯‡</h2>
<h4 data-id="heading-5">1. æ»šåŠ¨å¸é™„</h4>
<pre><code class="hljs language-javascript" lang="javascript">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Snap"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">300px</span>;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">overflow-x</span>: scroll;
  // å¸é™„æ•ˆæœ mandatory: å¿…é¡»å¸é™„  proximity: é è¿‘æ—¶å¸é™„
  scroll-snap-type: x mandatory;
  <span class="hljs-selector-class">.item</span> {
    <span class="hljs-attribute">flex-shrink</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">justify-content</span>: center;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">30px</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ccc</span>;
    // å¸é™„ä½ç½®
    <span class="hljs-attribute">scroll-snap-align</span>: start;
    <span class="hljs-attribute">scroll-snap-stop</span>: always;
    &amp;<span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">1</span>) {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f56c6c</span>;
    }
    &amp;<span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">2</span>) {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#67c23a</span>;
    }
    &amp;<span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">3</span>) {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#409eff</span>;
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<h5 data-id="heading-6">å…¼å®¹æ€§è¾ƒé«˜</h5>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4327c9d267b84ae8bcf5aa54f36681c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX1_oirHoirHkuJbnlYw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764758481&amp;x-signature=np5sbIn%2B2aSmOTYIg3slPaJF2aU%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-7">2. å­—ä½“è‡ªé€‚åº”å®¹å™¨å¤§å°</h4>
<pre><code class="hljs language-javascript" lang="javascript">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å­—ä½“è‡ªé€‚åº”å®¹å™¨å¤§å°<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">name</span>=<span class="hljs-string">""</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">500px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">300px</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span>;
  <span class="hljs-attribute">resize</span>: both;
  <span class="hljs-attribute">overflow</span>: hidden;
  <span class="hljs-attribute">background-color</span>: aquamarine;
  container-type: inline-size; // å¯ç”¨å®¹å™¨æŸ¥è¯¢ size:åŸºäºå®½é«˜ / inline-size åŸºäºå®½åº¦ / normal ä¸å¯ç”¨
  p {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">5</span>cqh;
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<h5 data-id="heading-8">å…¼å®¹æ€§è¿˜è¡Œ</h5>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e230868923f34c4dbca1b082b089f37d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX1_oirHoirHkuJbnlYw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764758481&amp;x-signature=r4u88S18aAeewAVFsBFoTVZO4Lg%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-9">3. é€‰æ‹©å™¨</h4>
<ul>
<li><strong>é€‰æ‹©å™¨ç‰¹å®šæ€§</strong>ï¼ˆé€šå¸¸å«åšé€‰æ‹©å™¨æƒé‡ï¼‰</li>
</ul>
<p>å½“å¸Œæœ›æŸä¸ªcsså±æ€§ä¼˜å…ˆçº§é«˜äºå…¶ä»–å±æ€§å€¼æ—¶ï¼Œå°½é‡ä¸è¦ä½¿ç”¨<code>!important</code>ï¼Œ<code>!important</code>ä¼šæ‰“ç ´è¿™äº›å›ºæœ‰çš„çº§è”è§„åˆ™ï¼Œä½¿å¾—æ ·å¼çš„åº”ç”¨å˜å¾—ä¸é‚£ä¹ˆå¯é¢„æµ‹ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´æ ·å¼è¡¨éš¾ä»¥ç»´æŠ¤å’Œç†è§£ï¼Œå°¤å…¶æ˜¯åœ¨å¤§å‹é¡¹ç›®ä¸­ã€‚å¢åŠ è°ƒè¯•éš¾åº¦ï¼Œä¹Ÿé™åˆ¶äº†æ ·å¼çš„çµæ´»æ€§ã€‚</p>
<p><strong>æ›¿ä»£æ–¹æ¡ˆï¼š</strong>
é€šè¿‡ç¼–å†™æ›´å…·ä½“ï¼ˆæˆ–æ›´ç²¾ç¡®ï¼‰çš„é€‰æ‹©å™¨æ¥è¦†ç›–æ ·å¼ï¼Œæˆ–è€…å åŠ é€‰æ‹©å™¨ï¼Œæ¯”å¦‚ï¼š222</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.el-button</span><span class="hljs-selector-class">.el-button</span> {
    <span class="hljs-attribute">color</span>: red;
}
</code></pre>
<ul>
<li><strong>æ–°å‹é€‰æ‹©å™¨</strong></li>
</ul>
<p><strong><code>:has()</code>é€‰æ‹©å™¨ï¼š</strong> æ ¹æ®ä¸€ä¸ªå…ƒç´ æ˜¯å¦åŒ…å«æŸäº›ç‰¹å®šçš„åä»£å…ƒç´ ï¼Œæˆ–è€…å…¶åçš„åŒçº§å…ƒç´ æ˜¯å¦æ»¡è¶³æŸäº›æ¡ä»¶ï¼Œæ¥é€‰ä¸­è¯¥å…ƒç´ æœ¬èº«ã€‚è¿™å®ç°äº†â€œå‘ä¸‹â€è§‚å¯Ÿçš„èƒ½åŠ›ã€‚</p>
<p><strong>ç¤ºä¾‹1ï¼š</strong> é€‰æ‹©åŒ…å« <code>&lt;img&gt;</code> çš„ <code>&lt;div&gt;</code></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>è¿™ä¸ª div æ²¡æœ‰å›¾ç‰‡ï¼Œä¸ä¼šè¢«é€‰ä¸­<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"example.jpg"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"ç¤ºä¾‹å›¾ç‰‡"</span>&gt;</span>
    è¿™ä¸ª div åŒ…å«å›¾ç‰‡ï¼Œä¼šè¢«çº¢è‰²è¾¹æ¡†åŒ…å›´
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* é€‰æ‹©åŒ…å« &lt;img&gt; çš„ div */</span> 
<span class="hljs-selector-tag">div</span><span class="hljs-selector-pseudo">:has</span>(<span class="hljs-selector-tag">img</span>) {
    <span class="hljs-attribute">border</span>: <span class="hljs-number">3px</span> solid red; <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
}
</code></pre>
<p><strong>ç¤ºä¾‹2ï¼š</strong> é€‰æ‹©ç´§è·Ÿç€ <code>&lt;p&gt;</code> çš„ <code>&lt;h2&gt;</code></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>è¿™ä¸ª h2 åé¢æ²¡æœ‰ç´§è·Ÿç€ pï¼Œä¸ä¼šè¢«é€‰ä¸­<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>åˆ†éš”å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>è¿™ä¸ª h2 åé¢ç´§è·Ÿç€ p<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™ä¸ª p æ˜¯ h2 çš„ç´§é‚»å…„å¼Ÿå…ƒç´ ï¼Œå› æ­¤ h2 ä¼šå˜æˆè“è‰²æ–œä½“<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* é€‰æ‹©åé¢ç´§è·Ÿç€ &lt;p&gt; çš„ h2 */</span>
<span class="hljs-selector-tag">h2</span><span class="hljs-selector-pseudo">:has</span>(+ <span class="hljs-selector-tag">p</span>) {
    <span class="hljs-attribute">color</span>: blue; <span class="hljs-attribute">font-style</span>: italic;
}
</code></pre>
<p><strong>å…¼å®¹æ€§</strong>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/efa8564f41134e47ae0fcfdef826952b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX1_oirHoirHkuJbnlYw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764758481&amp;x-signature=sDA5b43VZ5wPnfwjzbdece7iJlU%3D" alt="image.png" loading="lazy"/></p>
<p><strong><code>:is()</code>é€‰æ‹©å™¨ï¼š</strong> å®ƒæ¥å—ä¸€ä¸ªé€—å·åˆ†éš”çš„é€‰æ‹©å™¨åˆ—è¡¨ä½œä¸ºå‚æ•°ï¼Œå¹¶åŒ¹é…å…¶ä¸­ä»»æ„ä¸€ä¸ªé€‰æ‹©å™¨ã€‚è¿™æœ‰åŠ©äºå‡å°‘å†—ä½™ä»£ç ï¼Œæé«˜å¯è¯»æ€§ã€‚<code>:is()</code>Â çš„æƒé‡ç­‰äºå®ƒæ‹¬å·é‡Œæ‰€æœ‰é€‰æ‹©å™¨ä¸­æƒé‡æœ€é«˜çš„é‚£ä¸ªã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>è¿™æ˜¯ header çš„ h1ï¼ˆç´«è‰²ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>è¿™æ˜¯ main çš„ h1ï¼ˆç´«è‰²ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>è¿™æ˜¯ footer çš„ h1ï¼ˆç´«è‰²ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>è¿™ä¸ª h1 ä¸åœ¨ :is() èŒƒå›´å†…ï¼Œä¿æŒé»˜è®¤é¢œè‰²<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ç»Ÿä¸€è®¾ç½® headerã€mainã€footer ä¸‹çš„ h1 æ ·å¼ */</span>
<span class="hljs-selector-pseudo">:is</span>(<span class="hljs-selector-tag">header</span>, <span class="hljs-selector-tag">main</span>, <span class="hljs-selector-tag">footer</span>) <span class="hljs-selector-tag">h1</span> {
    <span class="hljs-attribute">color</span>: purple; <span class="hljs-attribute">font-family</span>: Arial, sans-serif;
}
</code></pre>
<p><strong>å…¼å®¹æ€§</strong>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/892277d505d948f6b61481cc02b3d4ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX1_oirHoirHkuJbnlYw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764758481&amp;x-signature=3YQLihRTHYObL6AU3nb0rNQYAdw%3D" alt="image.png" loading="lazy"/></p>
<p><strong><code>:where()</code>é€‰æ‹©å™¨ï¼š</strong> ä¸Â <code>:is()</code>Â ç±»ä¼¼ï¼Œä½†æƒé‡æ°¸è¿œä¸º 0ï¼Œé€‚åˆé»˜è®¤æ ·å¼ã€‚</p>
<p><strong>å…¼å®¹æ€§</strong>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5818dff5442848959d448ea4fa93f8aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX1_oirHoirHkuJbnlYw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764758481&amp;x-signature=MYqlBPUofbEppMEMhfD911X6ga0%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-10">ä¸‰ã€VUEç¯‡</h2>
<h4 data-id="heading-11">1. v-memo</h4>
<p>Vue 3 æä¾›çš„æ€§èƒ½ä¼˜åŒ–æŒ‡ä»¤ï¼Œå…¶ä½œç”¨æ˜¯é€šè¿‡ç¼“å­˜æ¨¡æ¿å­æ ‘çš„æ¸²æŸ“ç»“æœï¼Œä»…åœ¨ä¾èµ–é¡¹å˜åŒ–æ—¶é‡æ–°æ¸²æŸ“ï¼Œä»è€Œå‡å°‘ä¸å¿…è¦çš„è™šæ‹Ÿ DOM è®¡ç®—å’Œæ›´æ–°æ“ä½œã€‚</p>
<p><code>v-memo</code>Â æ¥æ”¶ä¸€ä¸ªä¾èµ–æ•°ç»„ï¼Œåªæœ‰å½“æ•°ç»„ä¸­çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šé‡æ–°æ¸²æŸ“ã€‚</p>
<p><strong>ç¤ºä¾‹</strong>ï¼šä¼˜åŒ–å¤§å‹åˆ—è¡¨æ¸²æŸ“ï¼Œé¿å…å…¨é‡æ›´æ–°ã€‚
å½“Â <code>item.id</code>Â æˆ–Â <code>item.status</code>Â å˜åŒ–æ—¶ï¼Œä»…æ›´æ–°å¯¹åº”é¡¹ï¼›å…¶ä»–é¡¹å¤ç”¨ç¼“å­˜ç»“æœ</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in list"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"item.id"</span> <span class="hljs-attr">v-memo</span>=<span class="hljs-string">"[item.id, item.status]"</span>&gt;</span>
  {{ item.content }}
  <span class="hljs-tag">&lt;<span class="hljs-name">StatusBadge</span> <span class="hljs-attr">:status</span>=<span class="hljs-string">"item.status"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<h4 data-id="heading-12">2. watch â€”â€” å‰¯ä½œç”¨å’Œæ·±åº¦ç›‘å¬</h4>
<h4 data-id="heading-13">3. customRef â€”â€”â€” è‡ªå®šä¹‰å“åº”å¼ä¾èµ–è¿½è¸ª</h4>
<h4 data-id="heading-14">4. ç»„ä»¶çš„äºŒæ¬¡å°è£…</h4>
<h2 data-id="heading-15">å››ã€Chromeæµè§ˆå™¨è°ƒè¯•æŠ€å·§</h2>
<h4 data-id="heading-16">1. <code>$0</code></h4>
<h4 data-id="heading-17">2. æ¨¡æ‹Ÿèšç„¦ç½‘é¡µ</h4>
<h4 data-id="heading-18">3. é‡æ”¾XHR</h4>
<h2 data-id="heading-19">äº”ã€VSCodeç¼–è¾‘å™¨æ’ä»¶åˆ†äº«</h2>
<h4 data-id="heading-20">1. i18n Ally</h4>
<ul>
<li>ä»£ç å†…ç›´æ¥é¢„è§ˆç¿»è¯‘æ–‡æœ¬</li>
<li>å¿«é€Ÿç”Ÿæˆåˆå§‹ç¿»è¯‘</li>
<li>ä¸€é”®è·³è½¬è‡³å¯¹åº”ç¿»è¯‘æ¡ç›®</li>
<li>é›†ä¸­ç®¡ç†</li>
</ul>

<pre><code class="hljs language-json" lang="json">  <span class="hljs-attr">"i18n-ally.localesPaths"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"./src/i18n/lang/locales"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ç¿»è¯‘æ–‡ä»¶å¤¹è·¯å¾„</span>
  <span class="hljs-attr">"i18n-ally.pathMatcher"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"{locale}/**/{namespace}.json"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ç¿»è¯‘ç›®æ ‡æ–‡ä»¶è·¯å¾„åŒ¹é…</span>
  <span class="hljs-attr">"i18n-ally.keystyle"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"nested"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ç¿»è¯‘è·¯å¾„æ ¼å¼,</span>
  <span class="hljs-attr">"i18n-ally.sourceLanguage"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"zh-CN"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ç¿»è¯‘æºè¯­è¨€</span>
  <span class="hljs-attr">"i18n-ally.displayLanguage"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"zh-CN"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">//æ˜¾ç¤ºè¯­è¨€ï¼Œ è¿™é‡Œä¹Ÿå¯ä»¥è®¾ç½®æ˜¾ç¤ºè‹±æ–‡ä¸ºen</span>
  <span class="hljs-attr">"i18n-ally.sortKeys"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// æ˜¯å¦è‡ªåŠ¨æ’åº</span>
  <span class="hljs-attr">"i18n-ally.namespace"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// æ˜¯å¦å¯ç”¨å‘½åç©ºé—´ï¼Œä¸€èˆ¬åœ¨ç§¯æ”’å¤šä¸ªå¾…ç¿»è¯‘æ–‡æ¡ˆæ—¶å¯ç”¨ï¼Œå¯ä»¥è‡ªåŠ¨ç¼–è¾‘è‡³å¯¹åº”æ–‡ä»¶ä¸­</span>
  <span class="hljs-attr">"i18n-ally.enabledParsers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"ts"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"js"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"json"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ç¿»è¯‘æ–‡ä»¶å¯å…è®¸çš„æ ¼å¼ï¼Œé»˜è®¤json</span>
</code></pre>
<h4 data-id="heading-21">2. koroFileHeader @4.9.2</h4>
<p>ç”¨äºç”Ÿæˆæ–‡ä»¶å¤´éƒ¨æ³¨é‡Šå’Œå‡½æ•°æ³¨é‡Šçš„æ’ä»¶</p>
<p><strong>å¿«æ·é”®</strong>â€Œï¼š</p>
<ul>
<li>å¤´éƒ¨æ³¨é‡Šï¼š<code>Ctrl+Win+I</code>ï¼ˆWindows/Linuxï¼‰æˆ–Â <code>Ctrl+Cmd+I</code>ï¼ˆMacï¼‰</li>
<li>å‡½æ•°æ³¨é‡Šï¼š<code>Ctrl+Win+T</code>ï¼ˆWindows/Linuxï¼‰æˆ–Â <code>Ctrl+Cmd+T</code>ï¼ˆMacï¼‰</li>
</ul>

<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// å¤´éƒ¨æ³¨é‡Š</span>
<span class="hljs-attr">"fileheader.customMade"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
<span class="hljs-attr">"Author"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"git config user.name &amp;&amp; git config user.email"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// åŒæ—¶è·å–ç”¨æˆ·åä¸é‚®ç®±</span>
<span class="hljs-attr">"Date"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Do not edit"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// æ–‡ä»¶åˆ›å»ºæ—¶é—´</span>
<span class="hljs-attr">"LastEditors"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"git config user.name &amp;&amp; git config user.email"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// æ–‡ä»¶æœ€åç¼–è¾‘è€… ä¸Authorå­—æ®µä¸€è‡´</span>
<span class="hljs-attr">"LastEditTime"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Do not edit"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// æ–‡ä»¶æœ€åç¼–è¾‘æ—¶é—´</span>
<span class="hljs-attr">"FilePath"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Do not edit"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// æ–‡ä»¶åœ¨é¡¹ç›®ä¸­çš„ç›¸å¯¹è·¯å¾„ è‡ªåŠ¨æ›´æ–°</span>
<span class="hljs-attr">"Description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span> <span class="hljs-comment">// æ–‡ä»¶æè¿°</span>
<span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ ˆï¼ˆStackï¼‰è¯¦è§£ï¼šä»åŸç†åˆ°å®ç°ï¼Œå†åˆ°æ‹¬å·åŒ¹é…åº”ç”¨]]></title>    <link>https://juejin.cn/post/7576859594359439360</link>    <guid>https://juejin.cn/post/7576859594359439360</guid>    <pubDate>2025-11-26T10:45:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576859594359439360" data-draft-id="7576681897298231311" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ ˆï¼ˆStackï¼‰è¯¦è§£ï¼šä»åŸç†åˆ°å®ç°ï¼Œå†åˆ°æ‹¬å·åŒ¹é…åº”ç”¨"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2025-11-26T10:45:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="www_stdio"/> <meta itemprop="url" content="https://juejin.cn/user/631558156323657"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ ˆï¼ˆStackï¼‰è¯¦è§£ï¼šä»åŸç†åˆ°å®ç°ï¼Œå†åˆ°æ‹¬å·åŒ¹é…åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/631558156323657/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    www_stdio
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T10:45:29.000Z" title="Wed Nov 26 2025 10:45:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ ˆï¼ˆStackï¼‰è¯¦è§£ï¼šä»åŸç†åˆ°å®ç°ï¼Œå†åˆ°æ‹¬å·åŒ¹é…åº”ç”¨</h2>
<p>æ ˆæ˜¯ä¸€ç§åŸºç¡€è€Œé‡è¦çš„çº¿æ€§æ•°æ®ç»“æ„ï¼Œåœ¨è®¡ç®—æœºç§‘å­¦ä¸­è¢«å¹¿æ³›åº”ç”¨äºå‡½æ•°è°ƒç”¨ã€è¡¨è¾¾å¼æ±‚å€¼ã€å›æº¯ç®—æ³•ç­‰åœºæ™¯ã€‚æœ¬æ–‡å°†å›´ç»•æ ˆçš„å®šä¹‰ã€æŠ½è±¡æ•°æ®ç±»å‹ï¼ˆADTï¼‰ã€ES6 å®ç°æ–¹å¼ï¼ˆæ•°ç»„ä¸é“¾è¡¨ï¼‰ã€æ€§èƒ½å¯¹æ¯”ï¼Œä»¥åŠä¸€ä¸ªç»å…¸åº”ç”¨åœºæ™¯â€”â€”<strong>æ‹¬å·åŒ¹é…é—®é¢˜</strong>ï¼Œè¿›è¡Œç³»ç»Ÿè®²è§£ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€ä»€ä¹ˆæ˜¯æ ˆï¼Ÿ</h3>
<p>æ ˆï¼ˆStackï¼‰æ˜¯ä¸€ç§éµå¾ª <strong>å…ˆè¿›åå‡ºï¼ˆFirst In Last Out, FILOï¼‰</strong> åŸåˆ™çš„çº¿æ€§æ•°æ®ç»“æ„ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€æ‘ç›˜å­ï¼šä½ åªèƒ½ä»é¡¶éƒ¨æ”¾å…¥ï¼ˆå…¥æ ˆï¼‰æˆ–å–å‡ºï¼ˆå‡ºæ ˆï¼‰ç›˜å­ï¼Œä¸èƒ½ä»ä¸­é—´æˆ–åº•éƒ¨æ“ä½œã€‚</p>
<h4 data-id="heading-2">æ ˆçš„æ ¸å¿ƒæ“ä½œåŒ…æ‹¬ï¼š</h4>
<ul>
<li><strong>push(x)</strong> ï¼šå°†å…ƒç´  x å‹å…¥æ ˆé¡¶ã€‚</li>
<li><strong>pop()</strong> ï¼šå¼¹å‡ºå¹¶è¿”å›æ ˆé¡¶å…ƒç´ ã€‚</li>
<li><strong>peek() / top()</strong> ï¼šæŸ¥çœ‹æ ˆé¡¶å…ƒç´ ä½†ä¸ç§»é™¤ã€‚</li>
<li><strong>isEmpty()</strong> ï¼šåˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©ºã€‚</li>
<li><strong>size()</strong> ï¼šè·å–æ ˆä¸­å…ƒç´ ä¸ªæ•°ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-3">äºŒã€æ ˆçš„æŠ½è±¡æ•°æ®ç±»å‹ï¼ˆADTï¼‰</h3>
<p>æŠ½è±¡æ•°æ®ç±»å‹ï¼ˆAbstract Data Type, ADTï¼‰æ˜¯å¯¹æ•°æ®ç»“æ„è¡Œä¸ºçš„è§„èŒƒæè¿°ï¼Œä¸æ¶‰åŠå…·ä½“å®ç°ã€‚æ ˆçš„ ADT åº”åŒ…å«ä»¥ä¸‹å±æ€§å’Œæ–¹æ³•ï¼š</p>

































<table><thead><tr><th>å±æ€§/æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>size</code></td><td>åªè¯»å±æ€§ï¼Œè¿”å›å½“å‰æ ˆçš„å¤§å°</td></tr><tr><td><code>isEmpty()</code></td><td>åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º</td></tr><tr><td><code>push(val)</code></td><td>å…¥æ ˆæ“ä½œ</td></tr><tr><td><code>pop()</code></td><td>å‡ºæ ˆæ“ä½œï¼Œè‹¥æ ˆç©ºåˆ™æŠ›å‡ºå¼‚å¸¸</td></tr><tr><td><code>peek()</code></td><td>è¿”å›æ ˆé¡¶å…ƒç´ ï¼Œè‹¥æ ˆç©ºåˆ™æŠ›å‡ºå¼‚å¸¸</td></tr><tr><td><code>toArray()</code></td><td>ï¼ˆå¯é€‰ï¼‰å°†æ ˆå†…å®¹è½¬æ¢ä¸ºæ•°ç»„ï¼Œä¾¿äºè°ƒè¯•æˆ–è¾“å‡º</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-4">ä¸‰ã€ES6 Class å®ç°æ ˆ</h3>
<p>ES6 å¼•å…¥äº† <code>class</code> è¯­æ³•ï¼Œä½¿é¢å‘å¯¹è±¡ç¼–ç¨‹æ›´åŠ æ¸…æ™°ã€‚ç»“åˆç§æœ‰å­—æ®µï¼ˆ<code>#</code>ï¼‰ã€<code>get</code> è®¿é—®å™¨ç­‰ç‰¹æ€§ï¼Œå¯ä»¥ä¼˜é›…åœ°å°è£…æ ˆçš„å®ç°ç»†èŠ‚ã€‚</p>
<h4 data-id="heading-5">1. åŸºäºé“¾è¡¨å®ç°æ ˆï¼ˆLinkedListStackï¼‰</h4>
<p>é“¾è¡¨å¤©ç„¶é€‚åˆåŠ¨æ€å¢é•¿ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«å€¼å’ŒæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ListNode</span> {
    <span class="hljs-keyword">constructor</span>(<span class="hljs-keyword">val</span>) {
        <span class="hljs-keyword">this</span>.<span class="hljs-keyword">val</span> = <span class="hljs-keyword">val</span>;
        <span class="hljs-keyword">this</span>.next = <span class="hljs-literal">null</span>;
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">LinkedListStack</span> {
    #stackPeek = <span class="hljs-literal">null</span>; <span class="hljs-comment">// ç§æœ‰æ ˆé¡¶æŒ‡é’ˆ</span>
    #size = <span class="hljs-number">0</span>;

    push(num) {
        <span class="hljs-keyword">const</span> node = new ListNode(num);
        node.next = <span class="hljs-keyword">this</span>.#stackPeek;
        <span class="hljs-keyword">this</span>.#stackPeek = node;
        <span class="hljs-keyword">this</span>.#size++;
    }

    pop() {
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.#stackPeek) <span class="hljs-keyword">throw</span> new Error(<span class="hljs-string">'æ ˆä¸ºç©º'</span>);
        <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> = <span class="hljs-keyword">this</span>.#stackPeek.<span class="hljs-keyword">val</span>;
        <span class="hljs-keyword">this</span>.#stackPeek = <span class="hljs-keyword">this</span>.#stackPeek.next;
        <span class="hljs-keyword">this</span>.#size--;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">val</span>;
    }

    peek() {
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.#stackPeek) <span class="hljs-keyword">throw</span> new Error(<span class="hljs-string">'æ ˆä¸ºç©º'</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.#stackPeek.<span class="hljs-keyword">val</span>;
    }

    <span class="hljs-keyword">get</span> size() { <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.#size; }
    isEmpty() { <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.#size === <span class="hljs-number">0</span>; }

    toArray() {
        let node = <span class="hljs-keyword">this</span>.#stackPeek;
        <span class="hljs-keyword">const</span> res = new Array(<span class="hljs-keyword">this</span>.#size);
        <span class="hljs-keyword">for</span> (let i = res.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
            res[i] = node.<span class="hljs-keyword">val</span>;
            node = node.next;
        }
        <span class="hljs-keyword">return</span> res;
    }
}
</code></pre>
<blockquote>
<p>âœ… <strong>ä¼˜ç‚¹</strong>ï¼šåŠ¨æ€æ‰©å®¹ï¼Œæ— ç©ºé—´æµªè´¹ï¼›æ’å…¥/åˆ é™¤å‡ä¸º O(1)<br/>
âŒ <strong>ç¼ºç‚¹</strong>ï¼šæ¯ä¸ªèŠ‚ç‚¹éœ€é¢å¤–å­˜å‚¨æŒ‡é’ˆï¼Œå†…å­˜å¼€é”€ç•¥å¤§</p>
</blockquote>
<hr/>
<h4 data-id="heading-6">2. åŸºäºæ•°ç»„å®ç°æ ˆï¼ˆArrayStackï¼‰</h4>
<p>åˆ©ç”¨ JavaScript æ•°ç»„çš„ <code>push</code> å’Œ <code>pop</code> æ–¹æ³•ï¼Œå¯å¿«é€Ÿå®ç°æ ˆã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ArrayStack</span> {
    #stack = [];

    <span class="hljs-keyword">get</span> size() { <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.#stack.length; }
    isEmpty() { <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.size === <span class="hljs-number">0</span>; }

    push(num) {
        <span class="hljs-keyword">this</span>.#stack.push(num);
    }

    pop() {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isEmpty()) <span class="hljs-keyword">throw</span> new Error(<span class="hljs-string">"æ ˆä¸ºç©º"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.#stack.pop();
    }

    peek() {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isEmpty()) <span class="hljs-keyword">throw</span> new Error(<span class="hljs-string">"æ ˆä¸ºç©º"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.#stack[<span class="hljs-keyword">this</span>.size - <span class="hljs-number">1</span>];
    }

    toArray() {
        <span class="hljs-keyword">return</span> [...<span class="hljs-keyword">this</span>.#stack]; <span class="hljs-comment">// è¿”å›å‰¯æœ¬æ›´å®‰å…¨</span>
    }
}
</code></pre>
<blockquote>
<p>âœ… <strong>ä¼˜ç‚¹</strong>ï¼šç¼“å­˜å‹å¥½ï¼Œè®¿é—®å¿«ï¼›ä»£ç ç®€æ´<br/>
âŒ <strong>ç¼ºç‚¹</strong>ï¼šæ‰©å®¹æ—¶éœ€å¤åˆ¶æ•´ä¸ªæ•°ç»„ï¼ˆO(n)ï¼‰ï¼Œä½†å‡æ‘Šæ—¶é—´å¤æ‚åº¦ä»ä¸º O(1)</p>
</blockquote>
<hr/>
<h3 data-id="heading-7">å››ã€æ•°ç»„ vs é“¾è¡¨å®ç°æ ˆï¼šæ€§èƒ½å¯¹æ¯”</h3>






























<table><thead><tr><th>ç»´åº¦</th><th>æ•°ç»„å®ç°</th><th>é“¾è¡¨å®ç°</th></tr></thead><tbody><tr><td><strong>æ—¶é—´æ•ˆç‡</strong></td><td>å¹³å‡ O(1)ï¼Œæ‰©å®¹æ—¶ O(n)</td><td>ç¨³å®š O(1)</td></tr><tr><td><strong>ç©ºé—´æ•ˆç‡</strong></td><td>å¯èƒ½æœ‰é¢„åˆ†é…ç©ºé—´æµªè´¹</td><td>æ¯ä¸ªèŠ‚ç‚¹å¤šä¸€ä¸ªæŒ‡é’ˆå¼€é”€</td></tr><tr><td><strong>å†…å­˜å¸ƒå±€</strong></td><td>è¿ç»­å†…å­˜ï¼Œç¼“å­˜å‘½ä¸­ç‡é«˜</td><td>ç¦»æ•£å†…å­˜ï¼Œç¼“å­˜å±€éƒ¨æ€§å·®</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>æ•°æ®é‡å¯é¢„ä¼°ã€è¿½æ±‚é€Ÿåº¦</td><td>åŠ¨æ€æ€§å¼ºã€å†…å­˜æ•æ„Ÿ</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ åœ¨å¤§å¤šæ•°å®é™…åº”ç”¨ä¸­ï¼Œ<strong>æ•°ç»„å®ç°çš„æ ˆæ›´å¸¸ç”¨</strong>ï¼Œå› ä¸ºå…¶ç®€å•é«˜æ•ˆï¼Œä¸”ç°ä»£ JavaScript å¼•æ“å¯¹æ•°ç»„ä¼˜åŒ–æä½³ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-8">äº”ã€å®æˆ˜åº”ç”¨ï¼šæ‹¬å·åŒ¹é…é—®é¢˜</h3>
<p>æ ˆçš„ç»å…¸åº”ç”¨åœºæ™¯ä¹‹ä¸€æ˜¯<strong>éªŒè¯æ‹¬å·å­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</strong>ã€‚ä¾‹å¦‚ï¼š<code>"([{}])"</code> åˆæ³•ï¼Œè€Œ <code>"([)]"</code> ä¸åˆæ³•ã€‚</p>
<h4 data-id="heading-9">è§£é¢˜æ€è·¯ï¼š</h4>
<ol>
<li>é‡åˆ°å·¦æ‹¬å· <code>(</code>ã€<code>[</code>ã€<code>{</code>ï¼Œå°†å…¶å¯¹åº”çš„å³æ‹¬å·å‹å…¥æ ˆï¼›</li>
<li>é‡åˆ°å³æ‹¬å·ï¼Œæ£€æŸ¥æ˜¯å¦ä¸æ ˆé¡¶å…ƒç´ åŒ¹é…ï¼›</li>
<li>è‹¥ä¸åŒ¹é…æˆ–æ ˆä¸ºç©ºï¼Œåˆ™éæ³•ï¼›</li>
<li>éå†ç»“æŸåï¼Œæ ˆå¿…é¡»ä¸ºç©ºæ‰åˆæ³•ã€‚</li>
</ol>
<h4 data-id="heading-10">ä»£ç å®ç°ï¼š</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-type">const</span> leftToRight = {
    <span class="hljs-string">"("</span>: <span class="hljs-string">")"</span>,
    <span class="hljs-string">"["</span>: <span class="hljs-string">"]"</span>,
    <span class="hljs-string">"{"</span>: <span class="hljs-string">"}"</span>
};

<span class="hljs-function">function <span class="hljs-title">isValid</span><span class="hljs-params">(s)</span> </span>{
    <span class="hljs-keyword">if</span> (!s) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    <span class="hljs-type">const</span> stack = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> ch of s) {
        <span class="hljs-keyword">if</span> (ch in leftToRight) {
            stack.<span class="hljs-built_in">push</span>(leftToRight[ch]); <span class="hljs-comment">// å‹å…¥æœŸæœ›çš„å³æ‹¬å·</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (!stack.length || stack.<span class="hljs-built_in">pop</span>() !== ch) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// ä¸åŒ¹é…æˆ–æ ˆç©º</span>
            }
        }
    }
    <span class="hljs-keyword">return</span> stack.length === <span class="hljs-number">0</span>; <span class="hljs-comment">// å¿…é¡»å®Œå…¨åŒ¹é…</span>
}
</code></pre>
<blockquote>
<p>âœ… æ—¶é—´å¤æ‚åº¦ï¼šO(n)<br/>
âœ… ç©ºé—´å¤æ‚åº¦ï¼šO(n)ï¼ˆæœ€åæƒ…å†µå…¨ä¸ºå·¦æ‹¬å·ï¼‰</p>
</blockquote>
<hr/>
<h3 data-id="heading-11">å…­ã€æ€»ç»“</h3>
<ul>
<li>æ ˆæ˜¯ä¸€ç§ <strong>FILO</strong> çš„çº¿æ€§ç»“æ„ï¼Œæ ¸å¿ƒæ“ä½œä¸º <code>push</code>ã€<code>pop</code>ã€<code>peek</code>ã€‚</li>
<li>ES6 çš„ <code>class</code>ã€ç§æœ‰å­—æ®µ <code>#</code> å’Œ <code>get</code> è®¿é—®å™¨ï¼Œè®©æ ˆçš„å®ç°æ›´å®‰å…¨ã€æ›´æ¸…æ™°ã€‚</li>
<li><strong>æ•°ç»„å®ç°</strong>ç®€å•é«˜æ•ˆï¼Œé€‚åˆå¤§å¤šæ•°åœºæ™¯ï¼›<strong>é“¾è¡¨å®ç°</strong>åŠ¨æ€çµæ´»ï¼Œé€‚åˆä¸ç¡®å®šè§„æ¨¡çš„åœºæ™¯ã€‚</li>
<li>æ ˆåœ¨ç®—æ³•ä¸­ç”¨é€”å¹¿æ³›ï¼Œå¦‚æ‹¬å·åŒ¹é…ã€è¡¨è¾¾å¼æ±‚å€¼ã€æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰ç­‰ã€‚</li>
</ul>
<p>æŒæ¡æ ˆï¼Œä¸ä»…æ˜¯ç†è§£æ•°æ®ç»“æ„çš„ç¬¬ä¸€æ­¥ï¼Œæ›´æ˜¯æ‰“å¼€ç®—æ³•ä¸–ç•Œå¤§é—¨çš„é’¥åŒ™ã€‚</p>
<hr/>
<blockquote>
<p>ğŸ“Œ æç¤ºï¼šåœ¨å®é™…å¼€å‘ä¸­ï¼Œé™¤éæœ‰ç‰¹æ®Šéœ€æ±‚ï¼ˆå¦‚é™åˆ¶ä½¿ç”¨å†…ç½®æ•°ç»„æ–¹æ³•ï¼‰ï¼Œå¦åˆ™ç›´æ¥ä½¿ç”¨ <code>Array</code> çš„ <code>push</code>/<code>pop</code> å³å¯é«˜æ•ˆæ¨¡æ‹Ÿæ ˆè¡Œä¸ºã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vue.jsä¸­çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶çš„å†…éƒ¨æ–¹æ³•ç¤ºä¾‹]]></title>    <link>https://juejin.cn/post/7576821684252311595</link>    <guid>https://juejin.cn/post/7576821684252311595</guid>    <pubDate>2025-11-26T10:38:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576821684252311595" data-draft-id="7576841976928321572" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vue.jsä¸­çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶çš„å†…éƒ¨æ–¹æ³•ç¤ºä¾‹"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-11-26T10:38:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="aiåˆ†äº«"/> <meta itemprop="url" content="https://juejin.cn/user/1734350779716649"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vue.jsä¸­çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶çš„å†…éƒ¨æ–¹æ³•ç¤ºä¾‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1734350779716649/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    aiåˆ†äº«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T10:38:22.000Z" title="Wed Nov 26 2025 10:38:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨Vue.jså¼€å‘ä¸­ï¼Œç»„ä»¶åŒ–æ¶æ„ä½¿å¾—ä»£ç æ›´æ¨¡å—åŒ–å’Œå¯ç»´æŠ¤ï¼Œä½†æœ‰æ—¶çˆ¶ç»„ä»¶éœ€è¦ç›´æ¥è°ƒç”¨å­ç»„ä»¶çš„å†…éƒ¨æ–¹æ³•ï¼Œä¾‹å¦‚è§¦å‘å­ç»„ä»¶çš„ç‰¹å®šåŠŸèƒ½æˆ–çŠ¶æ€æ›´æ–°ã€‚æœ¬æ–‡å°†é‡ç‚¹è®²è§£å¦‚ä½•ä½¿ç”¨refså®ç°è¿™ä¸€éœ€æ±‚ï¼Œé¿å…æ³›æ³›è€Œè°ˆï¼Œç¡®ä¿å†…å®¹æ·±åº¦å’Œé€»è¾‘æ¸…æ™°ã€‚</p>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p>Vue.jsç»„ä»¶é€šå¸¸é€šè¿‡propså‘ä¸‹ä¼ é€’æ•°æ®å’Œäº‹ä»¶å‘ä¸Šé€šä¿¡æ¥ä¿æŒç‹¬ç«‹æ€§ã€‚ç„¶è€Œï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œçˆ¶ç»„ä»¶å¯èƒ½éœ€è¦ç›´æ¥è®¿é—®å­ç»„ä»¶çš„å†…éƒ¨æ–¹æ³•ï¼Œæ¯”å¦‚åœ¨çˆ¶ç»„ä»¶ä¸­è§¦å‘å­ç»„ä»¶çš„é‡ç½®æˆ–è®¡ç®—æ“ä½œã€‚ä½¿ç”¨refsæ˜¯ä¸€ç§ç›´æ¥ä¸”é«˜æ•ˆçš„æ–¹å¼ï¼Œä½†å®ƒéœ€è¦è°¨æ…ä½¿ç”¨ä»¥é¿å…ç ´åç»„ä»¶çš„å°è£…æ€§ã€‚</p>
<h2 data-id="heading-1">ä½¿ç”¨refsè°ƒç”¨å­ç»„ä»¶æ–¹æ³•</h2>
<p>refsæ˜¯Vue.jsæä¾›çš„ç‰¹æ€§ï¼Œå…è®¸çˆ¶ç»„ä»¶é€šè¿‡å¼•ç”¨ç›´æ¥è®¿é—®å­ç»„ä»¶çš„å®ä¾‹ã€‚è¿™ç§æ–¹æ³•ç®€å•ç›´æ¥ï¼Œä½†éœ€æ³¨æ„å­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œç¡®ä¿åœ¨ç»„ä»¶æŒ‚è½½åè°ƒç”¨ã€‚</p>
<h3 data-id="heading-2">å®ç°æ­¥éª¤</h3>
<ol>
<li><strong>åœ¨å­ç»„ä»¶ä¸­å®šä¹‰å†…éƒ¨æ–¹æ³•</strong>ï¼šå­ç»„ä»¶éœ€è¦æš´éœ²ä¸€ä¸ªå¯ä¾›è°ƒç”¨çš„æ–¹æ³•ã€‚</li>
<li><strong>åœ¨çˆ¶ç»„ä»¶æ¨¡æ¿ä¸­æ·»åŠ refå±æ€§</strong>ï¼šä¸ºå­ç»„ä»¶æ ‡ç­¾è®¾ç½®refï¼Œä»¥ä¾¿åœ¨çˆ¶ç»„ä»¶ä¸­å¼•ç”¨ã€‚</li>
<li>**åœ¨çˆ¶ç»„ä»¶ä¸­é€šè¿‡<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mi>e</mi><mi>f</mi><mi>s</mi><mtext>è°ƒç”¨æ–¹æ³•</mtext><mo>âˆ—</mo><mo>âˆ—</mo><mtext>ï¼šä½¿ç”¨</mtext><mi>t</mi><mi>h</mi><mi>i</mi><mi>s</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">refsè°ƒç”¨æ–¹æ³•**ï¼šä½¿ç”¨this.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal">re</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">s</span><span class="mord cjk_fallback">è°ƒç”¨æ–¹æ³•</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord">âˆ—</span><span class="mord cjk_fallback">ï¼šä½¿ç”¨</span><span class="mord mathnormal">t</span><span class="mord mathnormal">hi</span><span class="mord mathnormal">s</span><span class="mord">.</span></span></span></span></span>refsè®¿é—®å­ç»„ä»¶å®ä¾‹å¹¶æ‰§è¡Œæ–¹æ³•ã€‚</li>
</ol>
<h3 data-id="heading-3">ä»£ç ç¤ºä¾‹</h3>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ï¼Œå±•ç¤ºçˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶çš„internalMethodæ–¹æ³•ã€‚ç¤ºä¾‹åŸºäºVue 2.xç‰ˆæœ¬ï¼Œä»£ç ä¸¥è°¨ä¸”å¯è¿è¡Œã€‚</p>
<h4 data-id="heading-4">å­ç»„ä»¶ä»£ç  (ChildComponent.vue)</h4>
<pre><code class="hljs language-javascript" lang="javascript">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å­ç»„ä»¶å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">internalMethod</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// å†…éƒ¨æ–¹æ³•ç¤ºä¾‹ï¼šæ›´æ–°æ•°æ®æˆ–æ‰§è¡Œæ“ä½œ</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å­ç»„ä»¶å†…éƒ¨æ–¹æ³•è¢«è°ƒç”¨'</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> = <span class="hljs-string">'æ–¹æ³•æ‰§è¡ŒæˆåŠŸ'</span>;
    }
  },
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">message</span>: <span class="hljs-string">''</span>
    };
  }
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-5">çˆ¶ç»„ä»¶ä»£ç  (ParentComponent.vue)</h4>
<pre><code class="hljs language-javascript" lang="javascript">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">child-component</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"childRef"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">child-component</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"callChildMethod"</span>&gt;</span>è°ƒç”¨å­ç»„ä»¶æ–¹æ³•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>çŠ¶æ€: {{ status }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ChildComponent</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./ChildComponent.vue'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">components</span>: {
    <span class="hljs-title class_">ChildComponent</span>
  },
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">status</span>: <span class="hljs-string">''</span>
    };
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">callChildMethod</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// é€šè¿‡refsè°ƒç”¨å­ç»„ä»¶æ–¹æ³•</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">childRef</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">childRef</span>.<span class="hljs-title function_">internalMethod</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> = <span class="hljs-string">'å­ç»„ä»¶æ–¹æ³•å·²è°ƒç”¨'</span>;
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å­ç»„ä»¶æœªæ­£ç¡®å¼•ç”¨'</span>);
      }
    }
  }
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-6">æ³¨æ„äº‹é¡¹</h3>
<ul>
<li><strong>ç”Ÿå‘½å‘¨æœŸç¡®ä¿</strong>ï¼šåœ¨çˆ¶ç»„ä»¶ä¸­è°ƒç”¨å­ç»„ä»¶æ–¹æ³•æ—¶ï¼Œéœ€ç¡®ä¿å­ç»„ä»¶å·²æŒ‚è½½ï¼ˆä¾‹å¦‚ï¼Œåœ¨mountedé’©å­åè°ƒç”¨ï¼‰ï¼Œå¦åˆ™å¯èƒ½è®¿é—®ä¸åˆ°$refsã€‚</li>
<li><strong>å°è£…æ€§è€ƒè™‘</strong>ï¼šè¿‡åº¦ä½¿ç”¨refså¯èƒ½è¿åç»„ä»¶è®¾è®¡åŸåˆ™ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨propså’Œäº‹ä»¶è¿›è¡Œé€šä¿¡ï¼Œä»…åœ¨å¿…è¦æ—¶é‡‡ç”¨æ­¤æ–¹æ³•ã€‚</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šåœ¨å®é™…é¡¹ç›®ä¸­ï¼Œåº”æ·»åŠ é”™è¯¯å¤„ç†ï¼Œä¾‹å¦‚æ£€æŸ¥$refsæ˜¯å¦å­˜åœ¨ï¼Œä»¥é¿å…è¿è¡Œæ—¶é”™è¯¯ã€‚</li>
</ul>
<h2 data-id="heading-7">å…¶ä»–æ–¹æ³•æ¯”è¾ƒ</h2>
<p>é™¤äº†refsï¼ŒVue.jsè¿˜æ”¯æŒé€šè¿‡äº‹ä»¶æˆ–propså›è°ƒå®ç°ç±»ä¼¼åŠŸèƒ½ï¼Œä½†è¿™äº›æ–¹å¼æ›´é€‚ç”¨äºå­ç»„ä»¶ä¸»åŠ¨é€šä¿¡ã€‚ä¸‹è¡¨ç®€è¦æ¯”è¾ƒä¸åŒæ–¹æ³•ï¼š</p>

































<table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th><th>é€‚ç”¨åœºæ™¯</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>refs</td><td>ç›´æ¥è®¿é—®å­ç»„ä»¶å®ä¾‹</td><td>çˆ¶ç»„ä»¶éœ€ç›´æ¥è°ƒç”¨å­ç»„ä»¶æ–¹æ³•</td><td>ç®€å•ç›´æ¥ï¼Œæ€§èƒ½é«˜</td><td>å¯èƒ½ç ´åå°è£…ï¼Œéœ€æ³¨æ„ç”Ÿå‘½å‘¨æœŸ</td></tr><tr><td>äº‹ä»¶</td><td>å­ç»„ä»¶å‘å°„äº‹ä»¶ï¼Œçˆ¶ç»„ä»¶ç›‘å¬</td><td>å­ç»„ä»¶ä¸»åŠ¨é€šçŸ¥çˆ¶ç»„ä»¶</td><td>ç¬¦åˆVueæ•°æ®æµåŸåˆ™</td><td>éœ€è¦å­ç»„ä»¶é…åˆï¼Œä¸é€‚ç”¨äºç›´æ¥è°ƒç”¨</td></tr><tr><td>propså›è°ƒ</td><td>é€šè¿‡propsä¼ é€’å‡½æ•°</td><td>çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’å›è°ƒ</td><td>çµæ´»ï¼Œæ˜“äºæµ‹è¯•</td><td>ä»£ç å¯èƒ½å†—é•¿ï¼Œä¸é€‚åˆå¤æ‚åœºæ™¯</td></tr></tbody></table>
<h2 data-id="heading-8">æ€»ç»“</h2>
<p>é€šè¿‡refsï¼Œçˆ¶ç»„ä»¶å¯ä»¥é«˜æ•ˆè°ƒç”¨å­ç»„ä»¶çš„å†…éƒ¨æ–¹æ³•ï¼Œä½†å¼€å‘è€…åº”æƒè¡¡å°è£…æ€§å’Œä¾¿åˆ©æ€§ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå»ºè®®ç»“åˆé¡¹ç›®éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ–¹æ³•ï¼Œå¹¶éµå¾ªVue.jsçš„æœ€ä½³å®è·µä»¥ä¿æŒä»£ç å¯ç»´æŠ¤æ€§ã€‚æœ¬ç¤ºä¾‹æä¾›äº†å®Œæ•´çš„å®ç°ä»£ç ï¼Œå¸®åŠ©è¯»è€…å¿«é€Ÿä¸Šæ‰‹åº”ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§é“è‡³ç®€-Shadcn/uiè®¾è®¡ç³»ç»Ÿåˆä½“éªŒï¼ˆä¸‹ï¼‰ï¼šThemeä¸è‰²å½©ç³»ç»Ÿå®æˆ˜]]></title>    <link>https://juejin.cn/post/7576838095519203379</link>    <guid>https://juejin.cn/post/7576838095519203379</guid>    <pubDate>2025-11-26T10:51:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576838095519203379" data-draft-id="7576863819981488137" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§é“è‡³ç®€-Shadcn/uiè®¾è®¡ç³»ç»Ÿåˆä½“éªŒï¼ˆä¸‹ï¼‰ï¼šThemeä¸è‰²å½©ç³»ç»Ÿå®æˆ˜"/> <meta itemprop="keywords" content="å‰ç«¯,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2025-11-26T10:51:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ArkPppp"/> <meta itemprop="url" content="https://juejin.cn/user/4484239094198752"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§é“è‡³ç®€-Shadcn/uiè®¾è®¡ç³»ç»Ÿåˆä½“éªŒï¼ˆä¸‹ï¼‰ï¼šThemeä¸è‰²å½©ç³»ç»Ÿå®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4484239094198752/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ArkPppp
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T10:51:10.000Z" title="Wed Nov 26 2025 10:51:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¤§é“è‡³ç®€-Shadcn/uiè®¾è®¡ç³»ç»Ÿåˆä½“éªŒï¼ˆä¸‹ï¼‰ï¼šThemeä¸è‰²å½©ç³»ç»Ÿå®æˆ˜</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>åœ¨ä¸Šç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æ¢è®¨äº†shadcn/uiçš„å®‰è£…ã€ç»„ä»¶å¼•å…¥å’ŒåŸºç¡€å®šåˆ¶ã€‚æœ¬æ–‡å°†ç»§ç»­æ·±å…¥ï¼Œå…³æ³¨ä¸€ä¸ªæ›´æ ¸å¿ƒçš„è¯é¢˜â€”â€”ä¸»é¢˜ç³»ç»Ÿè®¾è®¡ã€‚ä½œä¸ºå‰ç«¯å·¥ç¨‹å¸ˆï¼Œæˆ‘ä»¬éƒ½æ˜ç™½ä¸€ä¸ªå¥½çš„è®¾è®¡ç³»ç»Ÿä¸ä»…è¦æœ‰ç¾è§‚çš„ç»„ä»¶ï¼Œæ›´éœ€è¦ä¸€å¥—å®Œæ•´ã€å¯ç»´æŠ¤ã€å¯æ‰©å±•çš„è‰²å½©ä½“ç³»ã€‚æœ¬æ–‡å°†é€šè¿‡å®é™…é¡¹ç›®å®è·µï¼Œè¯¦ç»†åˆ†æshadcn/uiå¦‚ä½•é€šè¿‡CSSå˜é‡å’ŒTailwindCSSæ„å»ºè¿™å¥—ä½“ç³»ã€‚</p>
<h3 data-id="heading-2">ä¸€ã€è‡ªå®šä¹‰ä¸»é¢˜é…ç½®ï¼šä»CSSå˜é‡åˆ°TailwindCSS</h3>
<h4 data-id="heading-3">1.1 shadcn/uiçš„ä¸»é¢˜ç³»ç»ŸåŸç†</h4>
<p>shadcn/uié‡‡ç”¨äº†åŸºäºCSSè‡ªå®šä¹‰å±æ€§ï¼ˆCSS Variablesï¼‰çš„è®¾è®¡æ¨¡å¼ã€‚æ¯ä¸ªä¸»é¢˜å®é™…ä¸Šå°±æ˜¯ä¸€å¥—CSSå˜é‡çš„é›†åˆã€‚ä¸åŒäºä¼ ç»Ÿç»„ä»¶åº“é€šè¿‡JavaScriptåŠ¨æ€è®¡ç®—é¢œè‰²å€¼ï¼Œshadcn/uié€‰æ‹©åœ¨CSSå±‚é¢å®šä¹‰å¥½æ‰€æœ‰é¢œè‰²çŠ¶æ€ï¼Œç„¶åé€šè¿‡ç±»ååˆ‡æ¢æ¥å®ç°ä¸»é¢˜å˜æ¢ã€‚</p>
<p>è¿™ç§è®¾è®¡çš„ä¼˜åŠ¿æ˜¾è€Œæ˜“è§ï¼š</p>
<ul>
<li>æ— éœ€JavaScriptè®¡ç®—ï¼Œé¿å…é¢‘ç¹çš„é‡æ’é‡ç»˜</li>
<li>é¢œè‰²å€¼åœ¨æ„å»ºé˜¶æ®µå°±å·²ç»ç¡®å®šï¼Œæ€§èƒ½æ›´å¥½</li>
<li>CSSå˜é‡å¤©ç„¶æ”¯æŒç»§æ‰¿å’Œçº§è”ï¼Œä¾¿äºç®¡ç†å¤æ‚çš„è‰²å½©ä½“ç³»</li>
</ul>
<p>è®©æˆ‘ä»¬æŸ¥çœ‹é¡¹ç›®çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* src/index.css */</span>
<span class="hljs-keyword">@import</span> <span class="hljs-string">"tailwindcss"</span>;

<span class="hljs-keyword">@custom-variant</span> dark (&amp;:is(.dark *));

<span class="hljs-keyword">@theme</span> {
  <span class="hljs-attr">--color-border</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--border));
  <span class="hljs-attr">--color-input</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--input));
  <span class="hljs-attr">--color-ring</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--ring));
  <span class="hljs-attr">--color-background</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--background));
  <span class="hljs-attr">--color-foreground</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--foreground));
  <span class="hljs-comment">/* ... æ›´å¤šé¢œè‰²å˜é‡ */</span>
}
</code></pre>
<p>æ³¨æ„è¿™é‡Œä½¿ç”¨TailwindCSS 4çš„æ–°è¯­æ³• <code>@theme</code> æ›¿ä»£äº†ä¼ ç»Ÿçš„ <code>tailwind.config.js</code> é…ç½®ã€‚è¿™ç§æ–¹å¼å°†ä¸»é¢˜é…ç½®ç›´æ¥å†…è”åˆ°CSSæ–‡ä»¶ä¸­ï¼Œæ›´åŠ ç›´è§‚ã€‚</p>
<h4 data-id="heading-4">1.2 ä¸»é¢˜è‰²å½©å®šä¹‰</h4>
<p>shadcn/uiä½¿ç”¨HSLè‰²å½©ç©ºé—´æ¥å®šä¹‰é¢œè‰²ã€‚HSLç”±è‰²ç›¸(Hue)ã€é¥±å’Œåº¦(Saturation)ã€äº®åº¦(Lightness)ä¸‰ä¸ªåˆ†é‡ç»„æˆï¼Œç›¸æ¯”RGBæ›´å®¹æ˜“ç†è§£å’Œè°ƒæ•´ã€‚</p>
<p>æˆ‘ä»¬é¡¹ç›®çš„å®é™…é…è‰²ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-comment">/* èƒŒæ™¯ä¸å‰æ™¯è‰² */</span>
  <span class="hljs-attr">--background</span>: <span class="hljs-number">210</span> <span class="hljs-number">20%</span> <span class="hljs-number">96%</span>;
  <span class="hljs-attr">--foreground</span>: <span class="hljs-number">222</span> <span class="hljs-number">15%</span> <span class="hljs-number">15%</span>;

  <span class="hljs-comment">/* ä¸»è‰²è°ƒ - æµ…è“è‰²ç³» */</span>
  <span class="hljs-attr">--primary</span>: <span class="hljs-number">205</span> <span class="hljs-number">85%</span> <span class="hljs-number">60%</span>;
  <span class="hljs-attr">--primary-foreground</span>: <span class="hljs-number">210</span> <span class="hljs-number">40%</span> <span class="hljs-number">98%</span>;

  <span class="hljs-comment">/* æ¬¡è¦è‰² - æµ…ç»¿è‰²ç³» */</span>
  <span class="hljs-attr">--secondary</span>: <span class="hljs-number">145</span> <span class="hljs-number">65%</span> <span class="hljs-number">60%</span>;
  <span class="hljs-attr">--secondary-foreground</span>: <span class="hljs-number">222</span> <span class="hljs-number">15%</span> <span class="hljs-number">15%</span>;

  <span class="hljs-comment">/* å¼ºè°ƒè‰² - é’ç»¿è‰²ç³» */</span>
  <span class="hljs-attr">--accent</span>: <span class="hljs-number">175</span> <span class="hljs-number">70%</span> <span class="hljs-number">55%</span>;
  <span class="hljs-attr">--accent-foreground</span>: <span class="hljs-number">210</span> <span class="hljs-number">40%</span> <span class="hljs-number">98%</span>;
}

<span class="hljs-selector-class">.dark</span> {
  <span class="hljs-comment">/* æ·±è‰²ä¸»é¢˜é…è‰² */</span>
  <span class="hljs-attr">--background</span>: <span class="hljs-number">210</span> <span class="hljs-number">15%</span> <span class="hljs-number">10%</span>;
  <span class="hljs-attr">--foreground</span>: <span class="hljs-number">210</span> <span class="hljs-number">15%</span> <span class="hljs-number">92%</span>;
  <span class="hljs-attr">--primary</span>: <span class="hljs-number">205</span> <span class="hljs-number">85%</span> <span class="hljs-number">65%</span>;
  <span class="hljs-attr">--secondary</span>: <span class="hljs-number">145</span> <span class="hljs-number">60%</span> <span class="hljs-number">65%</span>;
  <span class="hljs-attr">--accent</span>: <span class="hljs-number">175</span> <span class="hljs-number">65%</span> <span class="hljs-number">60%</span>;
  <span class="hljs-comment">/* ... */</span>
}
</code></pre>
<p>é…è‰²æ–¹æ¡ˆçš„è®¾è®¡éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š</p>
<ol>
<li><strong>è¯­ä¹‰åŒ–å‘½å</strong>ï¼šæ¯ä¸ªé¢œè‰²éƒ½æœ‰æ˜ç¡®çš„è¯­ä¹‰ï¼ˆbackgroundã€primaryã€secondaryç­‰ï¼‰</li>
<li><strong>çŠ¶æ€é…å¥—</strong>ï¼šæ¯ä¸ªä¸»è¦é¢œè‰²éƒ½æœ‰å¯¹åº”çš„foregroundè‰²ï¼Œä¿è¯å¯è¯»æ€§</li>
<li><strong>æ˜æš—é€‚é…</strong>ï¼šæ·±è‰²æ¨¡å¼ä¸‹é€‚å½“è°ƒæ•´äº®åº¦å’Œé¥±å’Œåº¦</li>
</ol>
<h4 data-id="heading-5">1.3 æ‰©å±•è‰²ç³»ï¼šæˆåŠŸä¸è­¦å‘Š</h4>
<p>é™¤äº†æ ‡å‡†çš„è®¾è®¡è¯­è¨€è‰²å½©ï¼Œshadcn/uiè¿˜å…è®¸å®šä¹‰æ‰©å±•è‰²ç³»ï¼Œç”¨äºè¡¨è¾¾ç‰¹å®šçŠ¶æ€ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--success</span>: <span class="hljs-number">145</span> <span class="hljs-number">60%</span> <span class="hljs-number">50%</span>;
  <span class="hljs-attr">--success-light</span>: <span class="hljs-number">145</span> <span class="hljs-number">65%</span> <span class="hljs-number">60%</span>;
  <span class="hljs-attr">--success-dark</span>: <span class="hljs-number">145</span> <span class="hljs-number">55%</span> <span class="hljs-number">45%</span>;

  <span class="hljs-attr">--warning</span>: <span class="hljs-number">45</span> <span class="hljs-number">85%</span> <span class="hljs-number">60%</span>;
  <span class="hljs-attr">--warning-light</span>: <span class="hljs-number">45</span> <span class="hljs-number">90%</span> <span class="hljs-number">65%</span>;
  <span class="hljs-attr">--warning-dark</span>: <span class="hljs-number">45</span> <span class="hljs-number">80%</span> <span class="hljs-number">55%</span>;
}
</code></pre>
<p>è¿™ç§å‘½åæ–¹å¼ï¼ˆåŸºç¡€è‰²-light-darkï¼‰ä¸ºæ¯ä¸ªè¯­ä¹‰è‰²æä¾›äº†ä¸‰ä¸ªäº®åº¦çº§åˆ«ï¼Œåœ¨å®é™…å¼€å‘ä¸­å¯ä»¥æ ¹æ®ä¸åŒåœºæ™¯é€‰æ‹©åˆé€‚çš„æ·±æµ…ã€‚</p>
<h3 data-id="heading-6">äºŒã€é¢œè‰²ç³»ç»Ÿè®¾è®¡ï¼šCSSå˜é‡ä¸OKLCHè‰²å½©ç©ºé—´</h3>
<h4 data-id="heading-7">2.1 CSSå˜é‡çš„é«˜çº§ç‰¹æ€§</h4>
<p>CSSè‡ªå®šä¹‰å±æ€§ï¼ˆCSS Variablesï¼‰ä¸ä»…ä»…æ˜¯ç®€å•çš„é”®å€¼å¯¹ï¼Œå®ƒå…·å¤‡è®¸å¤šå¼ºå¤§çš„ç‰¹æ€§ï¼š</p>
<p><strong>1. ç»§æ‰¿æ€§</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.card</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--primary));
}

<span class="hljs-selector-class">.card-header</span> {
  <span class="hljs-comment">/* è‡ªåŠ¨ç»§æ‰¿çˆ¶å…ƒç´ çš„ --primary */</span>
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--primary));
}
</code></pre>
<p><strong>2. åŠ¨æ€è®¡ç®—</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--primary-light</span>: <span class="hljs-number">205</span> <span class="hljs-number">85%</span> <span class="hljs-built_in">calc</span>(<span class="hljs-number">60%</span> + <span class="hljs-number">10%</span>);
}
</code></pre>
<p><strong>3. ä½œç”¨åŸŸæ§åˆ¶</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* å…¨å±€ä½œç”¨åŸŸ */</span>
<span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--global-primary</span>: blue;
}

<span class="hljs-comment">/* å±€éƒ¨ä½œç”¨åŸŸ */</span>
<span class="hljs-selector-class">.theme-dark</span> {
  <span class="hljs-attr">--local-primary</span>: red;
}
</code></pre>
<p>è¿™äº›ç‰¹æ€§ä½¿å¾—CSSå˜é‡éå¸¸é€‚åˆæ„å»ºå¤æ‚çš„é¢œè‰²ç³»ç»Ÿã€‚</p>
<h4 data-id="heading-8">2.2 OKLCHè‰²å½©ç©ºé—´ï¼šä¸‹ä¸€ä»£è‰²å½©æ ‡å‡†</h4>
<p>ä¼ ç»Ÿçš„HSLè‰²å½©ç©ºé—´æœ‰ä¸€ä¸ªæ˜æ˜¾ç¼ºé™·ï¼š<strong>æ„ŸçŸ¥ä¸å‡åŒ€æ€§</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨HSLä¸­åŒæ ·æ•°å€¼çš„å˜åŒ–ï¼Œäººçœ¼æ„ŸçŸ¥çš„å·®å¼‚å¹¶ä¸ä¸€è‡´ã€‚ä¾‹å¦‚ï¼ŒHSLä¸­é¥±å’Œåº¦ä»50%åˆ°60%çš„å˜åŒ–ï¼Œçœ‹èµ·æ¥æ¯”60%åˆ°70%çš„å˜åŒ–æ›´æ˜æ˜¾ã€‚</p>
<p>OKLCHï¼ˆLightness-Chroma-Hueï¼‰è‰²å½©ç©ºé—´è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚OKLCHæ˜¯åŸºäºCIELABè‰²å½©ç©ºé—´çš„ç°ä»£è‰²å½©æ¨¡å‹ï¼Œå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>æ„ŸçŸ¥å‡åŒ€</strong>ï¼šæ•°å€¼çš„å¾®å°å˜åŒ–å¯¹åº”äººçœ¼æ„ŸçŸ¥çš„å¾®å°å˜åŒ–</li>
<li><strong>è‰²åŸŸæ›´å¹¿</strong>ï¼šæ”¯æŒæ›´å¤šå¯è§è‰²å½©</li>
<li><strong>å¯¹æ¯”åº¦å¯æ§</strong>ï¼šæ›´å®¹æ˜“æ»¡è¶³WCAGå¯è®¿é—®æ€§æ ‡å‡†</li>
</ul>
<p>è™½ç„¶æµè§ˆå™¨å¯¹OKLCHçš„æ”¯æŒè¿˜åœ¨é€æ­¥å®Œå–„ä¸­ï¼Œä½†TailwindCSSå·²ç»å¼€å§‹é‡‡ç”¨OKLCHã€‚æœªæ¥shadcn/uiå¾ˆå¯èƒ½ä¼šè¿ç§»åˆ°OKLCHè‰²å½©ç©ºé—´ã€‚</p>
<h4 data-id="heading-9">2.3 æ„å»ºè¯­ä¹‰åŒ–é¢œè‰²ç³»ç»Ÿ</h4>
<p>ä¸€ä¸ªå¥½çš„é¢œè‰²ç³»ç»Ÿéœ€è¦é¿å…ç›´æ¥ä½¿ç”¨åº•å±‚è‰²å½©å€¼ï¼Œè€Œæ˜¯é€šè¿‡è¯­ä¹‰åŒ–å˜é‡æ¥ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* âŒ ä¸å¥½çš„åšæ³• - ç›´æ¥ä½¿ç”¨åº•å±‚é¢œè‰² */</span>
<span class="hljs-selector-class">.button</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgb</span>(<span class="hljs-number">59</span>, <span class="hljs-number">130</span>, <span class="hljs-number">246</span>);
}

<span class="hljs-comment">/* âœ… å¥½çš„åšæ³• - ä½¿ç”¨è¯­ä¹‰åŒ–å˜é‡ */</span>
<span class="hljs-selector-class">.button</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--primary));
}
</code></pre>
<p>è¿™ç§è®¾è®¡çš„å¥½å¤„ï¼š</p>
<ol>
<li><strong>å¯ç»´æŠ¤æ€§å¼º</strong>ï¼šä¿®æ”¹ä¸»é¢˜æ—¶åªéœ€æ›´æ”¹CSSå˜é‡å®šä¹‰</li>
<li><strong>ä¸€è‡´æ€§ä¿è¯</strong>ï¼šå…¨ç«™ä½¿ç”¨ç»Ÿä¸€çš„è¯­ä¹‰åŒ–è‰²å½©</li>
<li><strong>çµæ´»æ€§é«˜</strong>ï¼šå¯ä»¥é’ˆå¯¹ä¸åŒåŒºåŸŸè¦†ç›–ç‰¹å®šå˜é‡</li>
</ol>
<h3 data-id="heading-10">ä¸‰ã€é¡¹ç›®å®è·µï¼šTodoListçš„ä¸»é¢˜æ›´æ–°å®ç°</h3>
<h4 data-id="heading-11">3.1 ThemeProviderè®¾è®¡</h4>
<p>shadcn/uiæä¾›äº†ä¸€ä¸ªç‹¬ç«‹çš„ThemeProviderå®ç°ï¼Œä½äº <code>src/components/theme-provider.tsx</code>ã€‚è¿™ä¸ªå®ç°æ›¿ä»£äº†ä¼ ç»Ÿçš„next-themesï¼Œæ›´è½»é‡ä¸”å®Œå…¨åŸºäºåŸç”ŸWeb APIã€‚</p>
<p>æ ¸å¿ƒå®ç°åˆ†æï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ThemeProvider</span>(<span class="hljs-params">{
  children,
  defaultTheme = <span class="hljs-string">'system'</span>,
  storageKey = <span class="hljs-string">'vite-ui-theme'</span>,
}: ThemeProviderProps</span>) {
  <span class="hljs-keyword">const</span> [theme, setTheme] = useState&lt;<span class="hljs-title class_">Theme</span>&gt;(
    <span class="hljs-function">() =&gt;</span> (<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(storageKey) <span class="hljs-keyword">as</span> <span class="hljs-title class_">Theme</span>) || defaultTheme
  )

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> root = <span class="hljs-variable language_">window</span>.<span class="hljs-property">document</span>.<span class="hljs-property">documentElement</span>

    root.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'light'</span>, <span class="hljs-string">'dark'</span>)

    <span class="hljs-keyword">if</span> (theme === <span class="hljs-string">'system'</span>) {
      <span class="hljs-keyword">const</span> systemTheme = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">matchMedia</span>(<span class="hljs-string">'(prefers-color-scheme: dark)'</span>)
        .<span class="hljs-property">matches</span>
        ? <span class="hljs-string">'dark'</span>
        : <span class="hljs-string">'light'</span>

      root.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(systemTheme)
      <span class="hljs-keyword">return</span>
    }

    root.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(theme)
  }, [theme])

  <span class="hljs-keyword">const</span> value = {
    theme,
    <span class="hljs-attr">setTheme</span>: <span class="hljs-function">(<span class="hljs-params">theme: Theme</span>) =&gt;</span> {
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(storageKey, theme)
      <span class="hljs-title function_">setTheme</span>(theme)
    },
  }

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ThemeProviderContext.Provider</span> {<span class="hljs-attr">...props</span>} <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeProviderContext.Provider</span>&gt;</span></span>
  )
}
</code></pre>
<p>å…³é”®ç‚¹åˆ†æï¼š</p>
<ol>
<li>
<p><strong>ä¸‰ç§ä¸»é¢˜æ¨¡å¼</strong></p>
<ul>
<li><code>light</code>: å¼ºåˆ¶ä½¿ç”¨æµ…è‰²ä¸»é¢˜</li>
<li><code>dark</code>: å¼ºåˆ¶ä½¿ç”¨æ·±è‰²ä¸»é¢˜</li>
<li><code>system</code>: è·Ÿéšç³»ç»Ÿè®¾ç½®</li>
</ul>
</li>
<li>
<p><strong>æœ¬åœ°å­˜å‚¨æŒä¹…åŒ–</strong>
ä½¿ç”¨localStorageä¿å­˜ç”¨æˆ·åå¥½ï¼Œåº”ç”¨é‡å¯åè‡ªåŠ¨æ¢å¤ã€‚</p>
</li>
<li>
<p><strong>ç±»ååˆ‡æ¢æœºåˆ¶</strong>
é€šè¿‡æ“ä½œdocumentElementçš„classListæ¥åˆ‡æ¢ä¸»é¢˜ï¼Œé¿å…é¢‘ç¹çš„styleé‡å†™ã€‚</p>
</li>
</ol>
<h4 data-id="heading-12">3.2 TodoListä¸­çš„ä¸»é¢˜åˆ‡æ¢æŒ‰é’®</h4>
<p>åœ¨TodoListç»„ä»¶ä¸­ï¼Œä¸»é¢˜åˆ‡æ¢æŒ‰é’®çš„å®ç°ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { useTheme } <span class="hljs-keyword">from</span> <span class="hljs-string">'./theme-provider'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">TodoList</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { theme, setTheme } = <span class="hljs-title function_">useTheme</span>()

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleTheme</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setTheme</span>(theme === <span class="hljs-string">'light'</span> ? <span class="hljs-string">'dark'</span> : <span class="hljs-string">'light'</span>)
  }

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
      <span class="hljs-attr">variant</span>=<span class="hljs-string">"ghost"</span>
      <span class="hljs-attr">size</span>=<span class="hljs-string">"icon"</span>
      <span class="hljs-attr">onClick</span>=<span class="hljs-string">{toggleTheme}</span>
      <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"åˆ‡æ¢ä¸»é¢˜"</span>
    &gt;</span>
      {theme === 'light' ? (
        <span class="hljs-tag">&lt;<span class="hljs-name">Moon</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"h-4 w-4"</span> /&gt;</span>
      ) : (
        <span class="hljs-tag">&lt;<span class="hljs-name">Sun</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"h-4 w-4"</span> /&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
  )
}
</code></pre>
<p>æ³¨æ„è¿™é‡Œçš„å®ç°ç»†èŠ‚ï¼š</p>
<ul>
<li>ä½¿ç”¨aria-labelæå‡å¯è®¿é—®æ€§</li>
<li>æ ¹æ®å½“å‰ä¸»é¢˜æ˜¾ç¤ºå¯¹åº”å›¾æ ‡ï¼ˆæœˆäº®/å¤ªé˜³ï¼‰</li>
<li>variantè®¾ä¸ºghostä¿æŒè§†è§‰ç®€æ´</li>
</ul>
<h4 data-id="heading-13">3.3 ä¸»é¢˜å˜é‡çš„å®é™…åº”ç”¨</h4>
<p>åœ¨TodoListç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°å„ç§shadcn/uiç»„ä»¶éƒ½ä½¿ç”¨äº†è¯­ä¹‰åŒ–çš„é¢œè‰²å˜é‡ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx">&lt;div className=<span class="hljs-string">"min-h-screen bg-background text-foreground transition-colors"</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Card</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"border-border"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">CardHeader</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">CardTitle</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-gradient-to-r from-primary via-secondary to-accent bg-clip-text text-transparent"</span>&gt;</span>
        å¾…åŠäº‹é¡¹åˆ—è¡¨
      <span class="hljs-tag">&lt;/<span class="hljs-name">CardTitle</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">CardHeader</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">Card</span>&gt;</span></span>
&lt;/div&gt;
</code></pre>
<p>å…³é”®ç‚¹ï¼š</p>
<ul>
<li><code>bg-background</code> å’Œ <code>text-foreground</code>ï¼šä½¿ç”¨è¯­ä¹‰å˜é‡ç¡®ä¿æ–‡æœ¬å¯è¯»æ€§</li>
<li><code>border-border</code>ï¼šè¾¹æ¡†é¢œè‰²éšä¸»é¢˜å˜åŒ–</li>
<li>æ¸å˜è‰²ä½¿ç”¨CSSå˜é‡ï¼Œä¿æŒä¸»é¢˜ä¸€è‡´æ€§</li>
</ul>
<h3 data-id="heading-14">å››ã€shadcn/uiçš„è®¾è®¡å“²å­¦æ€»ç»“</h3>
<p>é€šè¿‡ä¸Šä¸‹ä¸¤ç¯‡æ–‡ç« çš„åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“shadcn/uiçš„è®¾è®¡å“²å­¦ï¼š</p>
<h4 data-id="heading-15">4.1 é›¶æŠ½è±¡æˆæœ¬</h4>
<p>shadcn/uiä¸å°†ç»„ä»¶å°è£…ä¸ºé»‘ç›’ï¼Œè€Œæ˜¯æä¾›å®Œæ•´æºä»£ç ã€‚è¿™ç§"ä»£ç æ‰€æœ‰æƒ"æ¨¡å¼è®©å¼€å‘è€…å¯ä»¥ï¼š</p>
<ul>
<li>ä»»æ„ä¿®æ”¹ç»„ä»¶å®ç°</li>
<li>æ·±å…¥ç†è§£ç»„ä»¶é€»è¾‘</li>
<li>æ— æ¡†æ¶ä¾èµ–ï¼Œä¾¿äºè¿ç§»</li>
</ul>
<h4 data-id="heading-16">4.2 åŸå­åŒ–è®¾è®¡</h4>
<p>æ¯ä¸ªç»„ä»¶éƒ½æ˜¯ç‹¬ç«‹çš„ã€æ— æ ·å¼åŸºç¡€çš„ï¼ˆheadlessï¼‰ï¼Œæ ·å¼å®Œå…¨é€šè¿‡TailwindCSSç±»æ§åˆ¶ã€‚è¿™å¸¦æ¥ï¼š</p>
<ul>
<li>æ ·å¼å®Œå…¨å¯æ§</li>
<li>é¿å…CSSä¼˜å…ˆçº§å†²çª</li>
<li>æ›´å¥½çš„Tree-shakingæ•ˆæœ</li>
</ul>
<h4 data-id="heading-17">4.3 è®¾è®¡ä»¤ç‰Œé©±åŠ¨</h4>
<p>é€šè¿‡CSSå˜é‡ç³»ç»Ÿï¼Œshadcn/uiå»ºç«‹äº†å®Œæ•´çš„è®¾è®¡ä»¤ç‰Œï¼ˆDesign Tokensï¼‰ä½“ç³»ï¼š</p>
<ul>
<li>é¢œè‰²ã€å­—ä½“ã€é—´è·ç­‰éƒ½æœ‰å¯¹åº”çš„ä»¤ç‰Œ</li>
<li>ä»¤ç‰Œæ”¯æŒå±‚çº§ç»§æ‰¿</li>
<li>ä¾¿äºå®ç°è®¾è®¡ç³»ç»Ÿçš„ä¸€è‡´æ€§</li>
</ul>
<h4 data-id="heading-18">4.4 å¯è®¿é—®æ€§ä¼˜å…ˆ</h4>
<p>åŸºäºRadix UIæ„å»ºï¼Œæ‰€æœ‰ç»„ä»¶éƒ½å…·å¤‡ï¼š</p>
<ul>
<li>å®Œæ•´çš„é”®ç›˜å¯¼èˆªæ”¯æŒ</li>
<li>æ­£ç¡®çš„ARIAå±æ€§</li>
<li>è¯­ä¹‰åŒ–çš„HTMLç»“æ„</li>
</ul>
<h4 data-id="heading-19">4.5 ç°ä»£åŒ–å·¥å…·é“¾</h4>
<p>shadcn/uiæ·±åº¦é›†æˆäº†ç°ä»£å‰ç«¯å·¥å…·ï¼š</p>
<ul>
<li>TailwindCSS 4ï¼ˆæœ€æ–°è¯­æ³•ï¼‰</li>
<li>TypeScriptï¼ˆå®Œæ•´ç±»å‹å®šä¹‰ï¼‰</li>
<li>Viteï¼ˆå¿«é€Ÿæ„å»ºï¼‰</li>
<li>ESLintï¼ˆä»£ç è§„èŒƒï¼‰</li>
</ul>
<h3 data-id="heading-20">5.æˆæœå±•ç¤º</h3>
<p>è®©æˆ‘ä»¬çœ‹çœ‹æœ€ç»ˆçš„æˆæœå§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d971df593d3a4b6c963d6199e81fa00e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXJrUHBwcA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759070&amp;x-signature=0dXKeedhKGCjORg6egGJnd3sgr0%3D" alt="LightMode.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bad9e9cb53384119b7949f065dc3ddd6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXJrUHBwcA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759070&amp;x-signature=laIwrGY4GGVXmgysiVvZytDIHxk%3D" alt="NightMode.png" loading="lazy"/></p>
<h3 data-id="heading-21">ç»“è¯­</h3>
<p><code>shadcn/ui</code>ä¸ä»…ä»…æ˜¯ä¸€ä¸ªç»„ä»¶åº“ï¼Œæ›´æ˜¯ä¸€å¥—å®Œæ•´çš„è®¾è®¡ç³»ç»Ÿå®ç°æ–¹æ¡ˆã€‚å®ƒé€šè¿‡CSSå˜é‡ã€TailwindCSSå’Œç°ä»£Reactæ¨¡å¼çš„ç»“åˆï¼Œä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§å…¨æ–°çš„ç»„ä»¶åº“æ„å»ºæ€è·¯ã€‚</p>
<p>è¿™ç§"å¤§é“è‡³ç®€"çš„è®¾è®¡ç†å¿µâ€”â€”å°†å¤æ‚çš„UIæŠ½è±¡è¿˜åŸä¸ºç®€å•çš„CSSå˜é‡å’Œå¯ç»„åˆçš„ç»„ä»¶â€”â€”æˆ–è®¸æ­£æ˜¯å‰ç«¯å¼€å‘çš„ä¸€ç§æ–°èŒƒå¼ã€‚åœ¨AIç¼–ç¨‹å·¥å…·æ—¥ç›Šæˆç†Ÿï¼ŒVibe Codingæ„ˆå‘æ™®éçš„ä»Šå¤©ï¼Œä¸€ä¸ªå¼€æ”¾ã€å¯å®šåˆ¶ã€æ— é»‘ç›’çš„ç»„ä»¶åº“å°†æ›´å…·ç”Ÿå‘½åŠ›ã€‚</p>
<hr/>
<h3 data-id="heading-22">å‚è€ƒï¼š</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fui.shadcn.com%2Fdocs" target="_blank" title="https://ui.shadcn.com/docs" ref="nofollow noopener noreferrer">shadcn/uiå®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftailwindcss.com%2Fdocs%2Ftheme" target="_blank" title="https://tailwindcss.com/docs/theme" ref="nofollow noopener noreferrer">TailwindCSSä¸»é¢˜é…ç½®</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FUsing_CSS_custom_properties" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties" ref="nofollow noopener noreferrer">CSSè‡ªå®šä¹‰å±æ€§MDNæ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fevilmartians.com%2Fchronicles%2Foklch-in-css-why-quotas-from-a-perceptual-point-of-view" target="_blank" title="https://evilmartians.com/chronicles/oklch-in-css-why-quotas-from-a-perceptual-point-of-view" ref="nofollow noopener noreferrer">OKLCHè‰²å½©ç©ºé—´ä»‹ç»</a></li>
<li>Claude Codeå‚ä¸éƒ¨åˆ†ç¼–å†™å·¥ä½œ</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å°ç±³å¼€æºé¦–ä¸ªè·¨åŸŸå…·èº«åŸºåº§æ¨¡å‹MiMo-Embodiedï¼Œ29ä¸ªæ¦œå•SOTA]]></title>    <link>https://juejin.cn/post/7576863819981537289</link>    <guid>https://juejin.cn/post/7576863819981537289</guid>    <pubDate>2025-11-26T10:53:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576863819981537289" data-draft-id="7576852209565466651" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å°ç±³å¼€æºé¦–ä¸ªè·¨åŸŸå…·èº«åŸºåº§æ¨¡å‹MiMo-Embodiedï¼Œ29ä¸ªæ¦œå•SOTA"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2025-11-26T10:53:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœºå™¨ä¹‹å¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/1873223543167902"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å°ç±³å¼€æºé¦–ä¸ªè·¨åŸŸå…·èº«åŸºåº§æ¨¡å‹MiMo-Embodiedï¼Œ29ä¸ªæ¦œå•SOTA
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1873223543167902/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœºå™¨ä¹‹å¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T10:53:53.000Z" title="Wed Nov 26 2025 10:53:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¯¥ç ”ç©¶ç”±<strong>å°ç±³å…·èº«æ™ºèƒ½å›¢é˜Ÿï¼ˆXiaomi Embodied Intelligence Teamï¼‰</strong> å…±åŒå®Œæˆã€‚ç”±è¯¥å›¢é˜Ÿçš„<strong>éƒå­å¸…</strong>æ‹…ä»»æ ¸å¿ƒè´¡çŒ®ç¬¬ä¸€ä½œè€…ï¼Œé¡¹ç›®è´Ÿè´£äººåˆ™æ˜¯å°ç±³æ™ºé©¾å›¢é˜Ÿé¦–å¸­ç§‘å­¦å®¶<strong>é™ˆé¾™</strong>ã€‚å›¢é˜Ÿè‡´åŠ›äºæ‰“ç ´å•ä¸€é¢†åŸŸçš„ç•Œé™ï¼Œæ„å»ºèƒ½å¤ŸåŒæ—¶ç†è§£ç‰©ç†ä¸–ç•Œå¹¶è¿›è¡Œå¤æ‚æ¨ç†çš„é€šç”¨æ™ºèƒ½ä½“ï¼ˆæ¨¡å‹ï¼‰ï¼Œæ±‡èšäº†è‡ªåŠ¨é©¾é©¶ä¸å…·èº«æ™ºèƒ½é¢†åŸŸçš„é¡¶å°–ç ”ç©¶åŠ›é‡ã€‚</p>
<h2 data-id="heading-0"/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/691f5ab3db894f518b3eb54a368c85a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759233&amp;x-signature=x41e4w7StjueWSlIq%2FANyd5umoY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ä¸å¤šæ¨¡æ€å¤§è¯­è¨€æ¨¡å‹ï¼ˆMLLMï¼‰çš„æµªæ½®æ­£ä»¥å‰æ‰€æœªæœ‰çš„é€Ÿåº¦å¸­å· AI é¢†åŸŸï¼Œä½†å½“ç®—æ³•è¯•å›¾èµ°å‡ºæ•°å­—ä¸–ç•Œï¼Œè¿ˆå…¥ç‰©ç†å®ä½“æ—¶ï¼Œå´é­é‡äº†ä¸¥é‡çš„â€œæ°´åœŸä¸æœâ€ã€‚</p>
<p>åœ¨ä¼ ç»Ÿçš„å…·èº«æ™ºèƒ½ç ”å‘èŒƒå¼ä¸­ï¼Œ<strong>è‡ªåŠ¨é©¾é©¶</strong>ï¼ˆAutonomous Drivingï¼‰<strong>ä¸å…·èº«æ™ºèƒ½</strong>ï¼ˆEmbodied AIï¼‰é•¿æœŸè¢«è§†ä¸ºä¸¤æ¡å¹³è¡Œçº¿ã€‚å‰è€…åœ¨æˆ·å¤–é«˜é€ŸåŠ¨æ€ç¯å¢ƒä¸­ï¼Œé€šè¿‡æ¿€å…‰é›·è¾¾ä¸ç›¸æœºæ„ŸçŸ¥è½¦æµä¸çº¢ç»¿ç¯ï¼›åè€…åˆ™åœ¨å®¤å†…é™æ€æˆ–ä½é€Ÿç¯å¢ƒä¸­ï¼Œä¾èµ–æœºå™¨äººæœ¬ä½“è¿›è¡Œç²¾ç»†çš„å¯¼èˆªå’Œæ“ä½œä»»åŠ¡ã€‚</p>
<p>è¿™ç§â€œå„ç®¡ä¸€æ‘Šâ€çš„å±€é¢ï¼Œå¯¼è‡´äº†ä¸¥é‡çš„é¢†åŸŸå‰²è£‚ã€‚ç°æœ‰çš„ä¸“ç”¨æ¨¡å‹å¾€å¾€â€œåç§‘â€ä¸¥é‡ï¼šè‡ªåŠ¨é©¾é©¶æ¨¡å‹ï¼ˆå¦‚ DriveLMMï¼‰ç¼ºä¹å¯¹ç‰©ä½“éƒ¨ä»¶çº§çš„ç²¾ç»†ç†è§£ï¼Œè€Œæœºå™¨äººæ¨¡å‹ï¼ˆå¦‚ RoboBrain2.0ï¼‰åˆ™éš¾ä»¥åº”å¯¹å¤æ‚çš„äº¤é€šåšå¼ˆä¸é«˜åŠ¨æ€åœºæ™¯ã€‚</p>
<p>ç»“æœå°±æ˜¯ï¼Œæˆ‘ä»¬å§‹ç»ˆç¼ºä¹ä¸€ä¸ªèƒ½å¤Ÿæ‰“é€šå®¤å†…å¤–ã€èåˆåŠ¨é™æ€æ„ŸçŸ¥çš„ç»Ÿä¸€â€œå¤§è„‘â€ã€‚</p>
<p>åœ¨11.21æ—¥å‘è¡¨çš„æŠ€æœ¯æŠ¥å‘Šã€ŠMiMo-Embodied: X-Embodied Foundation Modelã€‹ä¸­ï¼Œå°ç±³å…·èº«æ™ºèƒ½å›¢é˜ŸæŒ‡å‡ºäº†è¿™ä¸€ç—›ç‚¹ï¼Œå¹¶å‘å¸ƒäº†Â <strong>MiMo-Embodied</strong>â€”â€”è¿™æ˜¯é¦–ä¸ªå¼€æºçš„ã€æˆåŠŸèåˆäº†è‡ªåŠ¨é©¾é©¶ä¸å…·èº«æ™ºèƒ½çš„è·¨åŸŸåŸºåº§æ¨¡å‹ã€‚</p>
<p>ç ”ç©¶æ•°æ®æ˜¾ç¤ºï¼ŒMiMo-Embodied åœ¨<strong>17ä¸ªå…·èº«æ™ºèƒ½åŸºå‡†</strong>å’Œ<strong>12ä¸ªè‡ªåŠ¨é©¾é©¶åŸºå‡†</strong>ä¸Šå‡åˆ·æ–°äº†è®°å½•ï¼ˆSOTAï¼‰ï¼Œä¸ä»…å¤§å¹…è¶…è¶Šäº†å¼€æºåŸºçº¿ï¼Œæ›´åœ¨ç©ºé—´æ¨ç†ä¸è§„åˆ’ç­‰å…³é”®æŒ‡æ ‡ä¸Šå‡»è´¥äº† GPT-4oã€Gemini-Pro ç­‰é—­æºæ¨¡å‹ï¼Œè¯æ˜äº†è·¨åŸŸçŸ¥è¯†èåˆçš„å·¨å¤§æ½œåŠ›ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8393b7afac6541cf8cb3d8a5d22d3b8f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759233&amp;x-signature=JoY6XOQ3bvdwBM3lLR2NjGElz0Q%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>è®ºæ–‡é¢˜ç›®ï¼š</strong> Â </p>
<p>MiMo-Embodied: X-Embodied Foundation Model**</p>
<p><strong>è®ºæ–‡é“¾æ¥ï¼š</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.16518" target="_blank" title="https://arxiv.org/abs/2511.16518" ref="nofollow noopener noreferrer">arxiv.org/abs/2511.16â€¦</a>**</p>
<p><strong>é¡¹ç›®ä¸»é¡µï¼š</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FXiaomiMiMo%2FMiMo-Embodied" target="_blank" title="https://github.com/XiaomiMiMo/MiMo-Embodied" ref="nofollow noopener noreferrer">github.com/XiaomiMiMo/â€¦</a></p>
<h4 data-id="heading-1"/>
<h4 data-id="heading-2">ç»Ÿä¸€ç‰©ç†ä¸–ç•Œçš„è®¤çŸ¥åŸºåº§</h4>
<p>è¦è§£å†³é¢†åŸŸå‰²è£‚ï¼Œä¸èƒ½ç®€å•åœ°è¿›è¡Œæ¨¡å‹æ‹¼æ¥ã€‚MiMo-Embodied çš„æ ¸å¿ƒåœ¨äºæ„å»ºäº†ä¸€ä¸ªç»Ÿä¸€çš„æ„ŸçŸ¥ä¸æ¨ç†æ¨¡å‹æ¶æ„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0510190c715345f59e3d31842b757123~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759233&amp;x-signature=MjxVjKbdZS%2FS5FBkCqRItIDFwKo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¯¥æ¨¡å‹åŸºäºå°ç±³è‡ªç ”çš„Â <strong>MiMo-VL</strong>Â æ¶æ„ï¼ˆåŒ…å« Vision Transformer è§†è§‰ç¼–ç å™¨ä¸ MLP æŠ•å½±å±‚ï¼‰ï¼Œå°†ç‰©ç†ä¸–ç•Œçš„äº¤äº’èƒ½åŠ›è§£æ„ä¸ºå…­å¤§æ ¸å¿ƒç»´åº¦ï¼š</p>
<p>åœ¨<strong>è‡ªåŠ¨é©¾é©¶ä¾§</strong>ï¼Œæ¨¡å‹ä¸ä»…è¦è¿›è¡Œç¯å¢ƒæ„ŸçŸ¥ï¼ˆè¯†åˆ«è½¦é“ã€éšœç¢ç‰©ï¼‰ï¼Œæ›´éœ€å…·å¤‡çŠ¶æ€é¢„æµ‹ï¼ˆStatus Predictionï¼‰<strong>ä¸</strong>é©¾é©¶è§„åˆ’ï¼ˆDriving Planningï¼‰èƒ½åŠ›â€”â€”å³åƒè€å¸æœºä¸€æ ·ï¼Œé¢„æµ‹æ—è½¦æ„å›¾ï¼Œå¹¶ç”Ÿæˆç¬¦åˆäº¤é€šè§„åˆ™çš„é©¾é©¶è½¨è¿¹ã€‚</p>
<p>åœ¨<strong>å…·èº«æ™ºèƒ½ä¾§</strong>ï¼Œæ¨¡å‹é‡ç‚¹æ”»å…‹<strong>å¯ä¾›æ€§é¢„æµ‹ï¼ˆAffordance Predictionï¼‰ä¸ç©ºé—´ç†è§£ï¼ˆSpatial Understandingï¼‰</strong> ã€‚è¿™æ„å‘³ç€æ¨¡å‹ä¸ä»…è¦è¯†åˆ«ç‰©ä½“ï¼Œè¿˜è¦ç†è§£ç‰©ä½“â€œå“ªé‡Œèƒ½æŠ“â€ã€â€œå“ªé‡Œèƒ½æ”¾â€ï¼Œå¹¶èƒ½è§£æå¤æ‚çš„ç©ºé—´ä»‹è¯ï¼ˆå¦‚â€œåœ¨...å·¦è¾¹çš„ç‰©ä½“ï¼Œåœ¨...çš„å‰æ–¹åŒºåŸŸâ€ï¼‰ã€‚</p>
<h4 data-id="heading-3">å››é˜¶æ®µè¿›åŒ–ï¼šä»â€œçœ‹æ‡‚â€åˆ°â€œå†³ç­–â€</h4>
<h4 data-id="heading-4"/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5085e6eb9f94310a6905fbdd7c61b0e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759233&amp;x-signature=7KAtGQxoX8WpbODynfAtyEfITnA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¦‚ä½•åœ¨å•ä¸€æ¨¡å‹ä¸­èåˆå·®å¼‚å·¨å¤§çš„è·¨åŸŸæ•°æ®ï¼ŒåŒæ—¶é¿å…â€œç¾éš¾æ€§é—å¿˜â€ï¼Ÿå°ç±³å›¢é˜Ÿè®¾è®¡äº†ä¸€å¥—ä¸¥è°¨çš„<strong>å››é˜¶æ®µæ¸è¿›å¼è®­ç»ƒç­–ç•¥ï¼ˆProgressive Four-stage Training Strategyï¼‰</strong> ï¼Œè¿™ä¹Ÿæ˜¯è¯¥æ¨¡å‹æ€§èƒ½å“è¶Šçš„å…³é”®ã€‚</p>
<p>ç®€å•çš„æ··åˆè®­ç»ƒå¾€å¾€ä¼šå¯¼è‡´â€œç¾éš¾æ€§é—å¿˜â€ã€‚å›¢é˜Ÿé¦–å…ˆåˆ©ç”¨æµ·é‡é€šç”¨æ•°æ®ä¸å…·èº«æ•°æ®å¥ å®šåŸºç¡€ï¼Œå»ºç«‹æ¨¡å‹å¯¹ç‰©ä½“ä¸ç©ºé—´çš„åˆçº§è®¤çŸ¥ï¼›éšåå¼•å…¥å¤§è§„æ¨¡è‡ªåŠ¨é©¾é©¶æ•°æ®ï¼Œé€šè¿‡æ··åˆç›‘ç£å­¦ä¹ ï¼Œè®©æ¨¡å‹åœ¨æŒæ¡é«˜é€ŸåŠ¨æ€æ„ŸçŸ¥çš„åŒæ—¶ï¼Œä¿ç•™å¯¹å®¤å†…ç²¾ç»†æ“ä½œçš„ç†è§£ã€‚</p>
<p><strong>é˜¶æ®µä¸€ï¼šå…·èº«ä¸é€šç”¨çŸ¥è¯†å¥ åŸºã€‚</strong> è¿™ä¸€é˜¶æ®µç±»ä¼¼äºäººç±»çš„â€œé€šè¯†æ•™è‚²â€ã€‚æ¨¡å‹åˆ©ç”¨æµ·é‡é€šç”¨å›¾æ–‡æ•°æ®ï¼ˆVisual Groundingã€OCRï¼‰å’Œå…·èº«æ™ºèƒ½æ•°æ®ï¼ˆå¦‚ RoboRefItã€Cosmos-Reason1ï¼‰è¿›è¡Œç›‘ç£å¾®è°ƒã€‚è¿™å»ºç«‹äº†æ¨¡å‹å¯¹ç»†ç²’åº¦ç‰©ä½“éƒ¨ä»¶çš„å®šä½èƒ½åŠ›ï¼Œä»¥åŠå¯¹åŸºç¡€ç©ºé—´å…³ç³»çš„ç†è§£ï¼Œä½¿å…¶å­¦ä¼šâ€œçœ‹æ‡‚â€é™æ€ç‰©ç†ä¸–ç•Œã€‚</p>
<p><strong>é˜¶æ®µäºŒï¼šè‡ªåŠ¨é©¾é©¶çŸ¥è¯†æ³¨å…¥ä¸æ··åˆç›‘ç£ã€‚</strong> æ¨¡å‹éšåè¿›å…¥â€œé©¾æ ¡â€ã€‚å›¢é˜Ÿå¼•å…¥äº†åŒ…æ‹¬ CODA-LMï¼ˆé•¿å°¾åœºæ™¯ï¼‰ã€nuScenes-QA åœ¨å†…çš„å¤§è§„æ¨¡è‡ªåŠ¨é©¾é©¶æ•°æ®ã€‚å…³é”®åˆ›æ–°åœ¨äº<strong>æ··åˆç›‘ç£ï¼ˆMixed Supervisionï¼‰</strong> â€”â€”åœ¨æ³¨å…¥é«˜é€ŸåŠ¨æ€é©¾é©¶çŸ¥è¯†çš„åŒæ—¶ï¼Œä¿ç•™éƒ¨åˆ†å…·èº«æ•°æ®ã€‚è¿™ç¡®ä¿æ¨¡å‹åœ¨å­¦ä¹ è¯†åˆ«çº¢ç»¿ç¯å’Œè½¦é“çº¿æ—¶ï¼Œä¸ä¼šé—å¿˜å¦‚ä½•è¯†åˆ«å®¤å†…çš„æ°´æ¯å’ŒæŠŠæ‰‹ã€‚</p>
<p><strong>é˜¶æ®µä¸‰ï¼šæ€ç»´é“¾æ¨ç†ï¼ˆCoTï¼‰çš„é€»è¾‘å‡åã€‚</strong> åªä¼šæ„ŸçŸ¥è¿˜ä¸å¤Ÿï¼Œæ™ºèƒ½ä½“å¿…é¡»å…·å¤‡é€»è¾‘æ¨ç†èƒ½åŠ›ã€‚å›¢é˜Ÿæ„å»ºäº†åŒ…å«æ˜¾å¼æ¨ç†æ­¥éª¤ï¼ˆRationaleï¼‰çš„æ•°æ®é›†ï¼Œåˆ©ç”¨Â <strong>Chain-of-Thought (CoT)</strong> Â æŠ€æœ¯è¿›è¡Œå¾®è°ƒã€‚ ä¾‹å¦‚ï¼Œåœ¨é¢å¯¹â€œè½¦è¾†æ˜¯å¦åº”è¯¥å˜é“ï¼Ÿâ€çš„é—®é¢˜æ—¶ï¼Œæ¨¡å‹ä¸å†ç›´æ¥è¾“å‡ºâ€œæ˜¯/å¦â€ï¼Œè€Œæ˜¯ç”Ÿæˆä¸€æ®µå®Œæ•´çš„æ€è€ƒè·¯å¾„ï¼šâ€œæ£€æµ‹åˆ°å‰æ–¹æ‹¥å µ -&gt; å·¦ä¾§è½¦é“ç©ºé—² -&gt; ä¸”åæ–¹æ— å¿«é€Ÿæ¥è½¦ -&gt; å› æ­¤å»ºè®®å˜é“â€ã€‚è¿™ç§æ˜¾å¼çš„é€»è¾‘ç”Ÿæˆï¼Œæå¤§æå‡äº†æ¨¡å‹åœ¨é•¿å°¾å¤æ‚åœºæ™¯ä¸‹çš„é²æ£’æ€§ä¸å¯è§£é‡Šæ€§ã€‚</p>
<p><strong>é˜¶æ®µå››ï¼šå¼ºåŒ–å­¦ä¹ ï¼ˆRLï¼‰çš„ç»ˆææ‰“ç£¨ã€‚</strong> è¿™æ˜¯ç”»é¾™ç‚¹ç›çš„ä¸€ç¬”ã€‚é’ˆå¯¹å¤šæ¨¡æ€æ¨¡å‹å¸¸æœ‰çš„â€œå¹»è§‰â€é—®é¢˜ï¼ˆå¦‚ç”Ÿæˆçš„åæ ‡ä¸å‡†ç¡®ï¼‰ï¼Œå›¢é˜Ÿåˆ©ç”¨Â <strong>GRPO</strong>ç®—æ³•ã€‚é€šè¿‡è®¾è®¡é’ˆå¯¹æ€§çš„å¥–åŠ±å‡½æ•°ï¼ŒRL ç®—æ³•è¿«ä½¿æ¨¡å‹åœ¨é¢å¯¹åŒä¸€ä¸ªé—®é¢˜æ—¶ï¼Œä»å¤šä¸ªå€™é€‰ç­”æ¡ˆä¸­æ”¶æ•›åˆ°é€»è¾‘æ›´ä¸¥å¯†ã€åæ ‡æ›´ç²¾å‡†çš„è¾“å‡ºã€‚è¿™å°±åƒæ˜¯è€ƒå‰çš„â€œé«˜å¼ºåº¦åˆ·é¢˜â€ï¼Œå°†æ¨¡å‹çš„æ‰§è¡Œç²¾åº¦æ¨å‘äº†æè‡´ã€‚</p>
<p>æ€»ä½“æ•°æ®é›†è§„æ¨¡ä¸é…ç½®å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/130fa3863769409f952c1461758e7048~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759233&amp;x-signature=uGNUiTunMJhfxyj0bqDBi9SrIRs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-5"/>
<h4 data-id="heading-6">å®éªŒç»“æœï¼šæ­£å‘è¿ç§»å¼•å‘çš„æ€§èƒ½è·ƒå‡</h4>
<p>è¿™ç§â€œå››æ­¥èµ°â€ç­–ç•¥å¸¦æ¥çš„æ•ˆæœæ˜¯ç»“æ„æ€§çš„ã€‚å®éªŒè¡¨æ˜ï¼ŒMiMo-Embodied å¹¶éä¸¤ä¸ªé¢†åŸŸçš„ç®€å•å åŠ ï¼Œè€Œæ˜¯å®ç°äº†<strong>æ­£å‘è¿ç§»</strong>ã€‚</p>
<h3 data-id="heading-7">ğŸ¯ å…·èº«æ™ºèƒ½åŸºå‡†æµ‹è¯•ï¼š17é¡¹SOTAå…¨é¢çªç ´</h3>
<h3 data-id="heading-8"/>
<p>åœ¨17ä¸ªå…·èº«æ™ºèƒ½åŸºå‡†æµ‹è¯•ä¸­ï¼ŒMiMo-Embodied åœ¨å¯ä¾›æ€§é¢„æµ‹ï¼ˆAffordance Predictionï¼‰ã€ä»»åŠ¡è§„åˆ’ï¼ˆTask Planningï¼‰å’Œç©ºé—´ç†è§£ï¼ˆSpatial Understandingï¼‰ä¸‰å¤§æ ¸å¿ƒèƒ½åŠ›ä¸Šå…¨é¢åˆ·æ–°è®°å½•ã€‚</p>
<h4 data-id="heading-9">å¯ä¾›æ€§é¢„æµ‹èƒ½åŠ›</h4>
<h4 data-id="heading-10"/>
<p>MiMo-Embodied æ¨¡å‹åœ¨ RoboRefItã€Where2Placeã€VABench-Pointã€Part-Afford å’Œ RoboAfford-Eval äº”ä¸ªä¸“ä¸šåŸºå‡†ä¸Šå‡è¾¾åˆ°æœ€ä¼˜æ€§èƒ½ã€‚ç‰¹åˆ«å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒMiMo-Embodied åœ¨ VABench-Pointã€Part-Afford å’Œ RoboAfford-Eval ä¸Šå¤§å¹…é¢†å…ˆå…¶ä»–å…·èº«æ™ºèƒ½æ¨¡å‹ï¼Œå±•ç°å‡ºåœ¨ç²¾ç»†å¯ä¾›æ€§æ¨ç†æ–¹é¢çš„å¼ºå¤§èƒ½åŠ›ã€‚</p>
<h4 data-id="heading-11">ä»»åŠ¡è§„åˆ’èƒ½åŠ›</h4>
<h4 data-id="heading-12"/>
<p>MiMo-Embodied åœ¨ RoboVQA åŸºå‡†ä¸Šè¡¨ç°æœ€ä¼˜ï¼Œå±•ç¤ºäº†åœ¨å› æœæ¨ç†å’Œç›®æ ‡å¯¼å‘ç»“æœç†è§£æ–¹é¢çš„å“è¶Šèƒ½åŠ›ã€‚åœ¨é•¿æ—¶è§„åˆ’åŸºå‡† EgoPlan2 ä¸Šä¹Ÿå–å¾—äº†æå…·ç«äº‰åŠ›çš„æˆç»©ï¼Œå……åˆ†è¯æ˜äº†æ¨¡å‹åœ¨é•¿æ—¶æ¨ç†æ–¹é¢çš„æœ‰æ•ˆæ€§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ba49befc420443c802fe29f2a4ecd97~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759233&amp;x-signature=f1riC19%2BAMxT6Yys2I1EQ64gXIE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-13"/>
<h4 data-id="heading-14">ç©ºé—´ç†è§£èƒ½åŠ›</h4>
<h4 data-id="heading-15"/>
<p>MiMo-Embodiedåœ¨ç»¼åˆç©ºé—´æ™ºèƒ½ä»»åŠ¡ CV-Bench ä¸Šå–å¾—æœ€ä¼˜ç»“æœï¼Œåœ¨ç©ºé—´å…³ç³»æ¨ç†çš„ RoboSpatialã€RefSpatial-Bench å’Œ CRPE å…³ç³»å­é›†ä¸Šå‡é¢†å…ˆã€‚è¿™äº›ç»“æœéªŒè¯äº† MiMo-Embodied åœ¨ç‰©ç†ä¸–ç•Œå…·èº«æ¨ç†æ–¹é¢çš„å¼ºå¤§èƒ½åŠ›ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15193a63ee76473491ae2b2a2537f634~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759233&amp;x-signature=2UzBZ5%2B61cSVT%2BXQXnWvm3i6o0g%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-16"/>
<h3 data-id="heading-17">ğŸš— è‡ªåŠ¨é©¾é©¶åŸºå‡†æµ‹è¯•ï¼š12é¡¹æŒ‡æ ‡å…¨é¢é¢†å…ˆ</h3>
<h3 data-id="heading-18"/>
<p>MiMo-Embodied åœ¨12ä¸ªè‡ªåŠ¨é©¾é©¶åŸºå‡†ä¸Šè¡¨ç°å“è¶Šï¼Œæ¶µç›–ç¯å¢ƒæ„ŸçŸ¥ã€çŠ¶æ€é¢„æµ‹å’Œé©¾é©¶è§„åˆ’ä¸‰å¤§ç»´åº¦ã€‚</p>
<h4 data-id="heading-19">ç¯å¢ƒæ„ŸçŸ¥èƒ½åŠ›</h4>
<h4 data-id="heading-20"/>
<p>åœ¨å…¨æ™¯è¯­ä¹‰ç†è§£ä»»åŠ¡ä¸Šå±•ç°æœ€ä¼˜è¡¨ç°ï¼Œåœ¨å…·æœ‰æŒ‘æˆ˜æ€§çš„å±€éƒ¨æ„ŸçŸ¥åœºæ™¯ä¸­ä¹Ÿè¡¨ç°å‡ºå“è¶Šçš„é²æ£’æ€§ã€‚å®éªŒç»“æœä»¤äººä¿¡æœåœ°è¯æ˜ï¼ŒMiMo-Embodied å…·å¤‡å¤šå±‚æ¬¡ã€é«˜ä¿çœŸçš„ç¯å¢ƒæ„ŸçŸ¥èƒ½åŠ›ã€‚</p>
<h4 data-id="heading-21">çŠ¶æ€é¢„æµ‹èƒ½åŠ›</h4>
<h4 data-id="heading-22"/>
<p>åœ¨å•å›¾åƒåŸºå‡† MME-RealWorld å’Œå¤šè§†å›¾å›¾åƒåŸºå‡† DriveLM ä¸Šå‡å–å¾—å¼ºåŠ²è¡¨ç°ï¼Œå‡†ç¡®æ•æ‰ä¸ªä½“è¡Œä¸ºæ„å›¾å¹¶æœ‰æ•ˆå»ºæ¨¡å¤šæ™ºèƒ½ä½“é—´çš„å¤æ‚äº¤äº’ã€‚</p>
<h4 data-id="heading-23">é©¾é©¶è§„åˆ’èƒ½åŠ›</h4>
<h4 data-id="heading-24"/>
<p>åœ¨æ‰€æœ‰é¢å‘è§„åˆ’çš„åŸºå‡†æµ‹è¯•ä¸­å‡è¡¨ç°çªå‡ºã€‚è¿™ç§æŒç»­çš„ä¼˜è¶Šæ€§å……åˆ†è¯´æ˜ï¼Œæ¨¡å‹ä¸ä»…èƒ½ç”Ÿæˆå‡†ç¡®ã€ç¬¦åˆæƒ…å¢ƒçš„é©¾é©¶å†³ç­–ï¼Œè¿˜èƒ½äº§ç”Ÿä¸ç°å®ä¸–ç•Œäº¤é€šé€»è¾‘å’Œé©¾é©¶è§„èŒƒç›¸ç¬¦çš„è¿è´¯ã€å¯è§£é‡Šçš„æ¨ç†è¿‡ç¨‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf4198ec70e746caa4cf43c61d77acfe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759233&amp;x-signature=ZTaqq53%2FWK9Es4yBVgoK70XcRB8%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/edf587d15ac64299ac42e5a0a78f99be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759233&amp;x-signature=1A4hv2%2BTSo3OPM7sHHuToqev4AQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-25"/>
<h3 data-id="heading-26">ğŸ’ª çœŸå®ä¸–ç•Œåœºæ™¯éªŒè¯ï¼šä»ä»¿çœŸåˆ°å®æˆ˜</h3>
<h3 data-id="heading-27"/>
<h4 data-id="heading-28">å…·èº«å¯¼èˆªä¸æ“ä½œ</h4>
<h4 data-id="heading-29"/>
<p>å›¢é˜Ÿåœ¨å…·èº«å¯¼èˆªå’Œæ“ä½œä¸¤ä¸ªåŸºç¡€ä¸‹æ¸¸åº”ç”¨ä¸­éªŒè¯äº†æ¨¡å‹çš„å®ç”¨æ€§ã€‚åœ¨å¯¼èˆªä»»åŠ¡ä¸­ï¼ŒMiMo-Embodied åœ¨å››ä¸ªå®¶åº­å¯¼èˆªåœºæ™¯ä¸­è¡¨ç°ä¼˜å¼‚ï¼šå®šä½å§å®¤ä¸­çš„åºŠã€åœ¨é¤å…æ‰¾åˆ°å¸å°˜å™¨ã€åœ¨ä¹¦æˆ¿è¯†åˆ«æ¤ç‰©ã€åœ¨æµ´å®¤å®šä½é©¬æ¡¶ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56fc6923fbff4882af8fe56c1f58e4f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759233&amp;x-signature=tgxKht1uYkX0WnmQTTAgWVvQKuQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨æ“ä½œä»»åŠ¡ä¸­ï¼Œæ¨¡å‹å±•ç°äº†å‡ºè‰²çš„å¯ä¾›æ€§é¢„æµ‹å’Œç©ºé—´æ¨ç†æ•´åˆèƒ½åŠ›ï¼Œåœ¨è¯†åˆ«ç²‰è‰²å‹ºå­çš„å¯æŠ“å–æŠŠæ‰‹ã€å®šä½åº•æ’æ©™å­ä¹‹é—´çš„ä¸­é—´æ”¾ç½®ä½ç½®ã€é€‰æ‹©æœ€å·¦ä¾§é¢åŒ…ç­‰åŠŸèƒ½å¯¼å‘ä»»åŠ¡ä¸­å‡è¡¨ç°å‡ºè‰²ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53519e77aec649c69d5128126df5772a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759233&amp;x-signature=gFESgZd9nbwBI5KMnqDMe%2BSGMHg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-30"/>
<h4 data-id="heading-31">è‡ªåŠ¨é©¾é©¶è½¨è¿¹è§„åˆ’</h4>
<h4 data-id="heading-32"/>
<h5 data-id="heading-33">å…¬å¼€åŸºå‡†è¡¨ç°ã€‚åœ¨ NAVSIM åŸºå‡†ä¸Šï¼ŒMiMo-Embodied æ˜¾è‘—è¶…è¶Šç«äº‰æ¨¡å‹ï¼Œåœ¨æ¨¡ä»¿å­¦ä¹ ï¼ˆILï¼‰é˜¶æ®µå’Œå¼ºåŒ–å­¦ä¹ ï¼ˆRLï¼‰é˜¶æ®µå‡å–å¾—æœ€ä¼˜æ€§èƒ½ã€‚</h5>
<p>å®šæ€§ç»“æœè¡¨æ˜ï¼ŒMiMo-Embodied èƒ½å¤Ÿå¤„ç†å¤šæ ·åŒ–çš„è‡ªåŠ¨é©¾é©¶åœºæ™¯å¹¶å®Œæˆå…·æœ‰æŒ‘æˆ˜æ€§çš„ä»»åŠ¡ï¼ŒåŒ…æ‹¬è·¯å£è½¬å¼¯ã€å¼¯é“æ‰å¤´ã€è·Ÿè½¦å’Œå˜é“è¶…è½¦ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/923b1d5bbaff4a8ea1a984e88cf67fd4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759233&amp;x-signature=ruXsh9yxwORWQXYjlx3bw10nsm8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h5 data-id="heading-34"/>
<h5 data-id="heading-35">ä¸“æœ‰æ•°æ®é›†éªŒè¯ã€‚åœ¨å¤§è§„æ¨¡ä¸“æœ‰æ•°æ®é›†ä¸Šçš„è¯„ä¼°æ˜¾ç¤ºï¼ŒMiMo-Embodied åœ¨æ‰€æœ‰è¯„ä¼°ç±»åˆ«ä¸­å‡æ˜¾è‘—è¶…è¶ŠåŸºçº¿ã€‚ç‰¹åˆ«å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨å¤æ‚çš„äº¤äº’ä»»åŠ¡ï¼ˆå¦‚è½¬å¼¯ã€ç»•éšœå’Œå˜é“ï¼‰ä¸­æ€§èƒ½æå‡æœ€ä¸ºæ˜¾è‘—ã€‚</h5>
<p>è¿™ç§åœ¨é«˜å¤æ‚åº¦åœºæ™¯ä¸­çš„å¤§å¹…æ”¹è¿›ï¼Œæœ‰åŠ›è¯æ˜äº†å…·èº«è®­ç»ƒèŒƒå¼èµ‹äºˆæ¨¡å‹åœ¨å¤æ‚é©¾é©¶æƒ…å¢ƒä¸­æ›´å¼ºçš„æ¨ç†èƒ½åŠ›ï¼Œå¹¶è½¬åŒ–ä¸ºæ›´å‡†ç¡®ã€æ›´ç¬¦åˆäººç±»ä¸“å®¶é©¾é©¶è¡Œä¸ºçš„è½¨è¿¹ç”Ÿæˆã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a99b3ecdc69c406faad254c67af869a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759233&amp;x-signature=F%2FejU72iTPa9Syc0mIq054izDJ8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-36"/>
<h3 data-id="heading-37">ğŸ”¬Â æ¶ˆèå®éªŒï¼šå¤šé˜¶æ®µç­–ç•¥çš„å…³é”®ä½œç”¨</h3>
<h3 data-id="heading-38"/>
<p>ä¸ºéªŒè¯å¤šé˜¶æ®µè®­ç»ƒç­–ç•¥çš„æœ‰æ•ˆæ€§ï¼Œå›¢é˜Ÿè¿›è¡Œäº†ç³»ç»Ÿæ€§æ¶ˆèå®éªŒã€‚ç»“æœæ˜¾ç¤ºï¼š</p>
<ul>
<li>
<p>ä»…ä½¿ç”¨å…·èº«æ•°æ®è®­ç»ƒçš„æ¨¡å‹åœ¨ä¸¤ä¸ªé¢†åŸŸå‡è¡¨ç°å¼ºåŠ²ï¼Œä½†ä»…ä½¿ç”¨è‡ªåŠ¨é©¾é©¶æ•°æ®è®­ç»ƒçš„æ¨¡å‹åœ¨å…·èº«ä»»åŠ¡ä¸Šæ€§èƒ½æ˜¾è‘—ä¸‹é™</p>
</li>
<li>
<p>ç›´æ¥æ··åˆè®­ç»ƒä¸¤ä¸ªé¢†åŸŸçš„æ•°æ®ï¼Œå…·èº«ä»»åŠ¡æœ‰æ‰€æ”¹è¿›ï¼Œä½†è‡ªåŠ¨é©¾é©¶æ€§èƒ½ç•¥æœ‰ä¸‹é™</p>
</li>
<li>
<p>é‡‡ç”¨å¤šé˜¶æ®µè®­ç»ƒç­–ç•¥çš„ MiMo-Embodied åœ¨å…·èº«ä»»åŠ¡ä¸Šå¹³å‡è¾¾åˆ°62.4%ï¼ˆç›¸æ¯”æ··åˆè®­ç»ƒæå‡4%ï¼‰ï¼Œåœ¨è‡ªåŠ¨é©¾é©¶ä»»åŠ¡ä¸Šè¾¾åˆ°æœ€ä¼˜çš„63.3%ï¼ˆç›¸æ¯”æ··åˆè®­ç»ƒæå‡8.1%ï¼‰</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0612da37efd64f2294e504881b9a1c06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759233&amp;x-signature=lIBNcZ1fqIcLoksTHXvw9GBRDBA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™å……åˆ†è¯æ˜ï¼Œ<strong>å¤šé˜¶æ®µè®­ç»ƒç­–ç•¥èƒ½å¤Ÿåœ¨ä¸ç‰ºç‰²å•ä¸€ä»»åŠ¡æ€§èƒ½çš„å‰æä¸‹ï¼Œå®ç°å…·èº«æ™ºèƒ½å’Œè‡ªåŠ¨é©¾é©¶èƒ½åŠ›çš„ååŒæå‡</strong>ï¼Œä¸ºæ„å»ºç»Ÿä¸€çš„å…·èº«åŸºåº§æ¨¡å‹æä¾›äº†æœ‰æ•ˆçš„è®­ç»ƒèŒƒå¼ã€‚</p>
<h4 data-id="heading-39">ç»“è¯­</h4>
<p>MiMo-Embodied çš„å‡ºç°ï¼Œæ ‡å¿—ç€å…·èº«æ™ºèƒ½ç ”ç©¶è¿›å…¥äº†ä¸€ä¸ªæ–°çš„é˜¶æ®µã€‚</p>
<p>å®ƒè¯æ˜äº†ç‰©ç†ä¸–ç•Œçš„è®¤çŸ¥é€»è¾‘æ˜¯ç»Ÿä¸€çš„â€”â€”æ— è®ºæ˜¯æ§åˆ¶æœºå™¨äººè¿˜æ˜¯é©¾é©¶æ±½è½¦ï¼Œéƒ½ä¾èµ–äºå¯¹ä¸‰ç»´ç©ºé—´ã€å› æœå…³ç³»åŠè¡Œä¸ºé¢„æµ‹çš„æ·±åˆ»ç†è§£ã€‚å°ç±³å…·èº«æ™ºèƒ½å›¢é˜Ÿé€šè¿‡æ„å»ºç»Ÿä¸€çš„è·¨åŸŸåŸºåº§æ¨¡å‹ï¼ŒæˆåŠŸæ‰“ç ´äº†é•¿æœŸä»¥æ¥çš„é¢†åŸŸå£å’ï¼Œè®©æ•°æ®åœ¨ä¸åŒå…·èº«å½¢æ€é—´äº§ç”Ÿäº†â€œåŒ–å­¦ååº”â€ã€‚</p>
<p>è¿™é¡¹å·¥ä½œä¸ä»…ä¸ºæ„å»ºé€šç”¨çš„Â <strong>VLAï¼ˆVision-Language-Actionï¼‰</strong> Â æ¨¡å‹æä¾›äº†åŸºç¡€ï¼Œä¹Ÿè®©â€œä¸€ä¸ªå¤§è„‘ï¼Œé€šç”¨äºç™¾å˜æœºèº«â€çš„æœªæ¥æ„¿æ™¯å˜å¾—è§¦æ‰‹å¯åŠã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ— éœ€æºç çš„ iOS åŠ å›ºæ–¹æ¡ˆ é¢å‘å¤–åŒ…é¡¹ç›®ä¸å­˜é‡åº”ç”¨çš„å¤šå±‚å®‰å…¨ä½“ç³»]]></title>    <link>https://juejin.cn/post/7576821684251901995</link>    <guid>https://juejin.cn/post/7576821684251901995</guid>    <pubDate>2025-11-26T09:11:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576821684251901995" data-draft-id="7576821684251885611" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ— éœ€æºç çš„ iOS åŠ å›ºæ–¹æ¡ˆ é¢å‘å¤–åŒ…é¡¹ç›®ä¸å­˜é‡åº”ç”¨çš„å¤šå±‚å®‰å…¨ä½“ç³»"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-26T09:11:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="aiopencode"/> <meta itemprop="url" content="https://juejin.cn/user/1898230261493865"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ— éœ€æºç çš„ iOS åŠ å›ºæ–¹æ¡ˆ é¢å‘å¤–åŒ…é¡¹ç›®ä¸å­˜é‡åº”ç”¨çš„å¤šå±‚å®‰å…¨ä½“ç³»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1898230261493865/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    aiopencode
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T09:11:19.000Z" title="Wed Nov 26 2025 09:11:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ iOS å¼€å‘åœˆï¼Œè¶Šæ¥è¶Šå¤šå›¢é˜Ÿé‡åˆ°ä¸€ç§ç°å®ï¼š
<strong>é¡¹ç›®åªæœ‰ IPAï¼Œæ²¡æœ‰æºç ï¼Œä½†ä»éœ€è¦è¿›è¡ŒåŠ å›ºã€å®‰å…¨æ£€æµ‹æˆ–é‡æ–°ä¸Šçº¿ã€‚</strong></p>
<p>å…¸å‹åœºæ™¯åŒ…æ‹¬ï¼š</p>
<ul>
<li>å¤–åŒ…å…¬å¸åªäº¤ä»˜æˆå“åŒ…</li>
<li>å¤šå¹´å‰çš„å­˜é‡é¡¹ç›®æºç ç¼ºå¤±</li>
<li>æŸäº›æ¨¡å—ç”±ç¬¬ä¸‰æ–¹æä¾›é—­æº SDK</li>
<li>å®‰å…¨å›¢é˜Ÿéœ€åœ¨ä¸æ”¹æºç çš„æƒ…å†µä¸‹åŠ ä¸€å±‚æ··æ·†</li>
<li>æ¸ é“åŒ…ã€å®šåˆ¶ç‰ˆ App éœ€è¦é¢å¤–ä¿æŠ¤</li>
<li>äº§å“è¦åœ¨æäº¤å®¡æ ¸å‰è¿›è¡Œâ€œæˆå“çº§åŠ å›ºâ€</li>
</ul>
<p>ä¼ ç»Ÿçš„ Swift/ObjC æºç æ··æ·†ï¼ˆSwift Shieldã€obfuscator-llvm ç­‰ï¼‰åœ¨è¿™ç§æƒ…å†µä¸‹éƒ½æ— æ³•ä½¿ç”¨ã€‚
å› æ­¤ï¼ŒçœŸæ­£å¯è¡Œçš„è·¯å¾„æ˜¯ï¼š<strong>ä»¥ IPA ä¸ºä¸­å¿ƒå»ºç«‹ä¸€å¥—å®Œæ•´çš„â€œæ— éœ€æºç åŠ å›ºæ–¹æ¡ˆâ€</strong>ï¼Œè¦†ç›–ç¬¦å·æ··æ·†ã€èµ„æºä¿æŠ¤ã€ç»“æ„æ‰°åŠ¨ã€å®Œæ•´æ€§æ ¡éªŒã€é‡ç­¾éªŒè¯ç­‰ç¯èŠ‚ã€‚</p>
<p>æœ¬æ–‡åŸºäºçœŸå®å¼€å‘ç»éªŒï¼Œæ€»ç»“ä¸€å¥—å¯ç›´æ¥è½åœ°çš„å·¥ç¨‹åŒ–æµç¨‹ã€‚</p>
<hr/>
<h3 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆâ€œæ— éœ€æºç â€çš„åŠ å›ºå¿…é¡»å­˜åœ¨ï¼Ÿ</h3>
<p>å› ä¸ºå¾ˆå¤šé¡¹ç›®ç»“æ„å¤©ç„¶å¤æ‚ï¼Œæºç ä¸å¯æ§ï¼š</p>
<h4 data-id="heading-1"><strong>1ï¼‰å¤–åŒ…é¡¹ç›®äº¤ä»˜ä¸å®Œæ•´</strong></h4>
<p>åªç»™æˆå“åŒ…ï¼Œä¸ç»™é¡¹ç›®å·¥ç¨‹ã€‚</p>
<h4 data-id="heading-2"><strong>2ï¼‰å­˜é‡é¡¹ç›®å·²æ— äººç»´æŠ¤</strong></h4>
<p>å¤šäººæ¥æ‰‹å¤šå¹´ï¼Œæºç æœ‰ç¼ºå¤±æˆ–ä¸ä¸€è‡´é—®é¢˜ã€‚</p>
<h4 data-id="heading-3"><strong>3ï¼‰éƒ¨åˆ†æ¨¡å—æ˜¯é—­æº SDK</strong></h4>
<p>æºç ä¸å¯æ”¹ï¼Œåªèƒ½åœ¨ IPA å±‚å¤„ç†ã€‚</p>
<h4 data-id="heading-4"><strong>4ï¼‰å¤šç‰ˆæœ¬åˆ†å‘ä¸‹éœ€è¦é€åŒ…ä¿æŠ¤</strong></h4>
<p>å¦‚æ¸ é“åŒ…ã€ç°åº¦åŒ…ã€ç™½æ ‡ Appã€‚</p>
<h4 data-id="heading-5"><strong>5ï¼‰å®‰å…¨åˆè§„è¦æ±‚å¿…é¡»åŠ å›º</strong></h4>
<p>ä½†åˆä¸å…è®¸ä¿®æ”¹å†…éƒ¨å·¥ç¨‹ã€‚</p>
<p>å› æ­¤ï¼ŒåŠ å›ºå¿…é¡»ä»â€œæºç æ€ç»´â€è½¬å‘â€œæˆå“åŒ…æ€ç»´â€ã€‚</p>
<hr/>
<h2 data-id="heading-6">äºŒã€æ— éœ€æºç çš„ iOS åŠ å›ºéœ€è¦å“ªäº›å·¥å…·ï¼Ÿï¼ˆæ ¸å¿ƒèƒ½åŠ›çŸ©é˜µï¼‰</h2>













































<table><thead><tr><th>åŠ å›ºç¯èŠ‚</th><th>å·¥å…·</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>é™æ€åˆ†æ</td><td>MobSFã€class-dump</td><td>äº†è§£å¯è¯»ç¬¦å·ã€èµ„æºåˆ†å¸ƒ</td></tr><tr><td>ç¬¦å·æ··æ·†ï¼ˆæ ¸å¿ƒï¼‰</td><td>Ipa Guard CLI</td><td>æ— éœ€æºç æ··æ·†ç±»å/æ–¹æ³•å/å˜é‡å</td></tr><tr><td>èµ„æºä¿æŠ¤</td><td>Ipa Guardã€è„šæœ¬å·¥å…·</td><td>é‡å‘½åå›¾ç‰‡ã€JSONã€JSã€H5 ç­‰</td></tr><tr><td>MD5 æ‰°åŠ¨</td><td>Ipa Guard</td><td>é˜²æ­¢èµ„æºæ›¿æ¢ä¸ç¯¡æ”¹</td></tr><tr><td>åŠ¨æ€é€†å‘æ£€æŸ¥</td><td>Fridaã€Hopper</td><td>æµ‹è¯• Hook ä¸åç¼–è¯‘éš¾åº¦</td></tr><tr><td>é‡ç­¾åéªŒè¯</td><td>kxsign</td><td>éªŒè¯åŠ å›ºå IPA æ˜¯å¦èƒ½æ­£å¸¸è¿è¡Œ</td></tr><tr><td>æ˜ å°„æ²»ç†</td><td>KMSã€Bugly/Sentry</td><td>ç¬¦å·è¡¨å­˜å‚¨ä¸å´©æºƒå®šä½</td></tr></tbody></table>
<p>å®Œæ•´åŠ å›ºä¾èµ–å·¥å…·é“¾åä½œï¼Œè€Œä¸æ˜¯å•ç‚¹æ“ä½œã€‚</p>
<hr/>
<h3 data-id="heading-7">ä¸‰ã€æ— éœ€æºç çš„ IPA åŠ å›ºæµç¨‹ï¼ˆå·¥ç¨‹åŒ–å¯ç›´æ¥å¤åˆ¶ï¼‰</h3>
<p>ä¸‹é¢ç»™å‡ºçš„æµç¨‹é€‚ç”¨äºæ‰€æœ‰é¡¹ç›®ï¼Œåªè¦ä½ èƒ½è·å¾— IPAã€‚</p>
<hr/>
<h3 data-id="heading-8"><strong>æ­¥éª¤ 1ï¼šé™æ€åˆ†æï¼ˆäº†è§£ IPA å†…éƒ¨ç»“æ„ï¼‰</strong></h3>
<h4 data-id="heading-9">ä½¿ç”¨ MobSF</h4>
<p>è¯†åˆ«ï¼š</p>
<ul>
<li>JSã€JSONã€å›¾ç‰‡ã€H5 è·¯å¾„</li>
<li>èµ„æºç»“æ„</li>
<li>SDK è°ƒç”¨</li>
<li>ç½‘ç»œæ¥å£</li>
</ul>
<h4 data-id="heading-10">ä½¿ç”¨ class-dump</h4>
<pre><code class="hljs language-lua" lang="lua">class-<span class="hljs-built_in">dump</span> app.ipa &gt; <span class="hljs-built_in">dump</span>.txt
</code></pre>
<p>è¯†åˆ«ï¼š</p>
<ul>
<li>Swift/ObjC ç±»å</li>
<li>æ–¹æ³•å</li>
<li>å±æ€§å</li>
<li>selector</li>
<li>è°ƒç”¨ç»“æ„</li>
</ul>
<p>è¿™äº›ä¿¡æ¯å†³å®šåç»­å“ªäº›ç¬¦å·è¦æ··æ·†ã€å“ªäº›è¦ä¿ç•™ã€‚</p>
<hr/>
<h3 data-id="heading-11"><strong>æ­¥éª¤ 2ï¼šå¯¼å‡ºå¯æ··æ·†ç¬¦å·ï¼ˆIpa Guard æ ¸å¿ƒåŠŸèƒ½ï¼‰</strong></h3>
<p>æ— éœ€æºç å³å¯å¯¼å‡ºç¬¦å·ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">ipaguard_cli parse app.ipa -o sym.json
</code></pre>
<p><code>sym.json</code> ä¸­åŒ…å«ï¼š</p>
<ul>
<li>æ‰€æœ‰å¯æ··æ·†çš„ç±»åã€æ–¹æ³•åã€å˜é‡å</li>
<li>Flutter/RN Bridge åç§°</li>
<li>JS/H5 å¼•ç”¨ä½ç½®</li>
<li>ä¸èµ„æºç›¸å…³çš„æ–‡ä»¶å¼•ç”¨</li>
<li>æ˜¯å¦å®‰å…¨æ··æ·†çš„æç¤ºå­—æ®µ</li>
</ul>
<p>è¿™ä»½æ–‡ä»¶æ˜¯ç­–ç•¥çš„æ ¸å¿ƒã€‚</p>
<hr/>
<h3 data-id="heading-12"><strong>æ­¥éª¤ 3ï¼šç¼–è¾‘æ··æ·†ç­–ç•¥ï¼ˆå¿…é¡»æ‰‹åŠ¨å®¡æ ¸ï¼‰</strong></h3>
<h4 data-id="heading-13"><strong>ä¸èƒ½æ··æ·†ï¼ˆå¦åˆ™ä¼šå´©æºƒï¼‰ï¼š</strong></h4>
<ul>
<li>selector åå°„æ–¹æ³•</li>
<li>Storyboard id</li>
<li>JSBridge å›è°ƒæ–¹æ³•</li>
<li>Flutter MethodChannel</li>
<li>RN Bridge</li>
<li>ç¬¬ä¸‰æ–¹ SDK åˆå§‹åŒ–æ¥å£</li>
</ul>
<p>é€šè¿‡åœ¨ sym.json ä¸­è®¾ç½®ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"confuse"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
</code></pre>
<p>é¿å…ç ´åè¿è¡Œé€»è¾‘ã€‚</p>
<hr/>
<h4 data-id="heading-14"><strong>å¿…é¡»æ··æ·†ï¼ˆæé«˜é€†å‘æˆæœ¬ï¼‰ï¼š</strong></h4>
<ul>
<li>ä¸šåŠ¡ç±»å</li>
<li>æ§åˆ¶å™¨</li>
<li>å·¥å…·ç±»ã€å†…éƒ¨é€»è¾‘</li>
<li>Swift æ–¹æ³•å</li>
<li>ObjC æ–¹æ³•å</li>
<li>ç§æœ‰å˜é‡å</li>
<li>å†…éƒ¨æ¨¡å‹ä½“ç³»</li>
</ul>
<p>è¿™äº›å­—æ®µæ˜¯æ”»å‡»è€…æœ€ä¾èµ–çš„å…¥å£ã€‚</p>
<hr/>
<h3 data-id="heading-15"><strong>æ­¥éª¤ 4ï¼šæ‰§è¡Œ IPA æ··æ·†ä¸èµ„æºæ‰°åŠ¨</strong></h3>
<p>çœŸæ­£æé«˜å®‰å…¨æ€§çš„æ ¸å¿ƒå‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">ipaguard_cli protect app.ipa -c sym.json --email dev@team.com --image --js -o protected.ipa
</code></pre>
<p>æ•ˆæœåŒ…æ‹¬ï¼š</p>
<p>âœ” Swift/ObjC ç¬¦å·æ··æ·†
âœ” æ–¹æ³•åã€ç±»åã€å˜é‡åä¹±ç åŒ–
âœ” å›¾ç‰‡ã€jsonã€plistã€JSã€H5 è·¯å¾„æ”¹å
âœ” èµ„æº MD5 æ‰°åŠ¨
âœ” è¾“å‡ºæ˜ å°„è¡¨</p>
<p>åœ¨æ²¡æœ‰æºç çš„æƒ…å†µä¸‹ï¼Œèƒ½åšåˆ°è¿™æ ·å·²ç»éå¸¸å¼ºå¤§ã€‚</p>
<hr/>
<h3 data-id="heading-16"><strong>æ­¥éª¤ 5ï¼šé‡ç­¾åå¹¶è¿›è¡Œå…¨é‡æµ‹è¯•ï¼ˆå¿…åšï¼‰</strong></h3>
<p>ä½¿ç”¨ kxsignï¼š</p>
<pre><code class="hljs language-bash" lang="bash">kxsign sign protected.ipa -c cert.p12 -p <span class="hljs-built_in">pwd</span> \
  -m dev.mobileprovision -z signed.ipa -i
</code></pre>
<p>æµ‹è¯•ï¼š</p>
<ul>
<li>å¯åŠ¨</li>
<li>é¡µé¢è·³è½¬</li>
<li>JS/H5 æ¸²æŸ“</li>
<li>Flutter/RN åˆå§‹åŒ–</li>
<li>ç™»å½•ã€æ”¯ä»˜ã€æ¨é€æ¨¡å—</li>
<li>æ€§èƒ½æ˜¯å¦æ­£å¸¸</li>
</ul>
<p>ç¡®ä¿æ··æ·†æ²¡æœ‰ç ´åä¸šåŠ¡åŠŸèƒ½ã€‚</p>
<hr/>
<h3 data-id="heading-17"><strong>æ­¥éª¤ 6ï¼šéªŒè¯é˜²æŠ¤æ•ˆæœï¼ˆé€†å‘éš¾åº¦æµ‹è¯•ï¼‰</strong></h3>
<h4 data-id="heading-18">â‘  Hopper/IDA éªŒè¯</h4>
<p>ç¡®è®¤ï¼š</p>
<ul>
<li>ç±»åæ˜¯å¦ä¹±ç </li>
<li>æ–¹æ³•ç»“æ„æ˜¯å¦ä¸å¯è¯»</li>
<li>æ˜¯å¦ä»èƒ½æ¨æ–­ä¸šåŠ¡é€»è¾‘</li>
</ul>
<h4 data-id="heading-19">â‘¡ Frida Hook æµ‹è¯•</h4>
<pre><code class="hljs language-css" lang="css">frida -U -f com<span class="hljs-selector-class">.app</span> <span class="hljs-attr">--no-pause</span> -l hook<span class="hljs-selector-class">.js</span>
</code></pre>
<p>ç¡®è®¤ï¼š</p>
<ul>
<li>å…³é”®æ–¹æ³•æ˜¯å¦éš¾ä»¥ Hook</li>
<li>å­—ç¬¦ä¸²æ˜¯å¦è¢«æ··æ·†éšè—</li>
<li>JSBridge æ˜¯å¦éš¾ä»¥å®šä½</li>
</ul>
<p>è¿™ä¸¤æ­¥æ˜¯â€œé˜²æŠ¤æ•ˆæœâ€çš„æœ€ç»ˆéªŒè¯ã€‚</p>
<hr/>
<h3 data-id="heading-20"><strong>æ­¥éª¤ 7ï¼šæ˜ å°„æ²»ç†ï¼ˆä¿è¯é•¿æœŸå¯ç»´æŠ¤ï¼‰</strong></h3>
<p>ä¿å­˜ä»¥ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>æ··æ·†æ˜ å°„è¡¨</li>
<li>sym.json</li>
<li>æ„å»ºå·</li>
<li>ç­¾åæŒ‡çº¹</li>
<li>IPA ç‰ˆæœ¬ä¸å¯¹åº”ç­–ç•¥</li>
</ul>
<p>å­˜æ”¾åœ¨ï¼š</p>
<ul>
<li>KMS</li>
<li>Git åŠ å¯†ä»“åº“</li>
<li>CI è‡ªåŠ¨å½’æ¡£</li>
</ul>
<p>ç”¨äºå›æ»šä¸å´©æºƒå®šä½ã€‚</p>
<hr/>
<h3 data-id="heading-21">å››ã€æœ€ç»ˆæ•ˆæœï¼šæ— éœ€æºç ä¹Ÿèƒ½å®ç°ä¸“ä¸šçº§åŠ å›º</h3>
<p>å®Œæˆä¸Šè¿°æµç¨‹åï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªï¼š</p>
<p>åç¼–è¯‘åå®Œå…¨ä¸å¯è¯»çš„ IPA
ç±»åã€æ–¹æ³•åã€å˜é‡åå…¨ä¹±ç 
è°ƒç”¨é“¾æ— æ³•æ¨æ–­
JS/H5 è·¯å¾„è¢«å®Œå…¨æ”¹å†™
å›¾ç‰‡ä¸ JSON èµ„æºä¸å¯æ›¿æ¢
Hook éš¾åº¦å¤§å¹…æå‡
äºŒæ¬¡ä¿®æ”¹å®¹æ˜“å¯¼è‡´å´©æºƒ
åŠ å›ºç­–ç•¥å¯æŒç»­ç»´æŠ¤ã€æœ‰æ˜ å°„å¯å›æ»š</p>
<p>è¿™å°±æ˜¯ç°ä»£ä¼ä¸šçº§ iOS åŠ å›ºåº”æœ‰çš„æ ·å­ã€‚</p>
<hr/>
<h3 data-id="heading-22">çœŸæ­£çš„â€œæ— éœ€æºç åŠ å›ºâ€ï¼Œé çš„æ˜¯æµç¨‹ï¼Œè€Œä¸æ˜¯æŸä¸ªå·¥å…·</h3>
<p>æ¨èçš„å®Œæ•´æŠ€æœ¯ç»„åˆï¼š</p>
<h4 data-id="heading-23"><strong>åˆ†æå±‚</strong></h4>
<p>MobSFã€class-dump</p>
<h4 data-id="heading-24"><strong>åŠ å›ºå±‚ï¼ˆæ ¸å¿ƒèƒ½åŠ›ï¼‰</strong></h4>
<p>Ipa Guard CLI</p>
<ul>
<li>æ— éœ€æºç æ··æ·†</li>
<li>èµ„æºæ‰°åŠ¨</li>
<li>æ–¹æ³•/ç±»åå˜é‡åæ··æ·†</li>
<li>å…¨å¹³å°æ”¯æŒ</li>
<li>å¯ç”¨äºæ¸ é“åŒ…ã€å°ç‰ˆæœ¬å¿«é€Ÿå¤„ç†</li>
</ul>
<h4 data-id="heading-25"><strong>éªŒè¯å±‚</strong></h4>
<p>kxsignï¼ˆé‡ç­¾ï¼‰ã€Fridaï¼ˆåŠ¨æ€ Hook æµ‹è¯•ï¼‰ã€Hopperï¼ˆåç¼–è¯‘éªŒè¯ï¼‰</p>
<h4 data-id="heading-26"><strong>æ²»ç†å±‚</strong></h4>
<p>KMSã€Bugly/Sentryã€Git åŠ å¯†ä»“åº“</p>
<p>å³ä½¿æ²¡æœ‰æºç ï¼Œä¹Ÿèƒ½æ„å»ºä¸€ä¸ªå®Œæ•´ã€å¯ç»´æŠ¤ã€å¯å›æ»šçš„ iOS åŠ å›ºä½“ç³»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Apache Geaflowæ¨ç†æ¡†æ¶Geaflow-infer è§£æç³»åˆ—ï¼ˆä¸ƒï¼‰æ•°æ®è¯»å†™æµç¨‹]]></title>    <link>https://juejin.cn/post/7576681897297903631</link>    <guid>https://juejin.cn/post/7576681897297903631</guid>    <pubDate>2025-11-26T09:12:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576681897297903631" data-draft-id="7576827115968069667" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Apache Geaflowæ¨ç†æ¡†æ¶Geaflow-infer è§£æç³»åˆ—ï¼ˆä¸ƒï¼‰æ•°æ®è¯»å†™æµç¨‹"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-26T09:12:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯­è½å¿ƒç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2875978147955741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Apache Geaflowæ¨ç†æ¡†æ¶Geaflow-infer è§£æç³»åˆ—ï¼ˆä¸ƒï¼‰æ•°æ®è¯»å†™æµç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978147955741/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯­è½å¿ƒç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T09:12:35.000Z" title="Wed Nov 26 2025 09:12:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¬¬7ç« ï¼šæ•°æ®è¯»å†™æµç¨‹</h2>
<h3 data-id="heading-1">ç« èŠ‚å¯¼è¯»</h3>
<p>æœ¬ç« è®²è§£ <code>InferDataWriter</code> å’Œ <code>InferDataReader</code> å¦‚ä½•åœ¨å…±äº«å†…å­˜ä¸Šè¿›è¡Œé«˜æ•ˆçš„æ•°æ®è¯»å†™ã€‚ç†è§£æœ¬ç« å†…å®¹ï¼Œä½ å°†æŒæ¡ï¼š</p>
<ul>
<li>æ•°æ®å¸§æ ¼å¼ï¼ˆ4å­—èŠ‚é•¿åº¦ + æ•°æ®ä½“ï¼‰</li>
<li>å­—èŠ‚åºå¤„ç†ï¼ˆLittle Endianï¼‰</li>
<li>æµå¼ I/O ä¸ç¼“å†²åŒºç®¡ç†</li>
</ul>
<h5 data-id="heading-2">æ ¸å¿ƒè®¾è®¡</h5>
<pre><code class="hljs language-css" lang="css">âœ“ è‡ªæè¿°çš„æ•°æ®å¸§ï¼ˆé•¿åº¦å¤´ï¼‰
âœ“ ç»Ÿä¸€çš„å­—èŠ‚åºçº¦å®š
âœ“ æ ‡å‡†çš„ Java <span class="hljs-selector-tag">I</span>/O æ¥å£
âœ“ æµå¼å¤„ç†æ”¯æŒå¤§æ•°æ®
âœ“ æ— é”é«˜æ€§èƒ½
</code></pre>
<hr/>
<h3 data-id="heading-3">7.1 InferDataWriter å®ç°</h3>
<h4 data-id="heading-4">æ ¸å¿ƒèŒè´£</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InferDataWriter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Closeable</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">HEADER_LENGTH</span> <span class="hljs-operator">=</span> <span class="hljs-number">4</span>;  <span class="hljs-comment">// 4 å­—èŠ‚é•¿åº¦å¤´</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DataQueueOutputStream outputStream;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">byte</span>[] dataHeaderBytes;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ByteBuffer headerByteBuffer;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">InferDataWriter</span><span class="hljs-params">(DataExchangeQueue queue)</span> {
        <span class="hljs-built_in">this</span>.outputStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataQueueOutputStream</span>(queue);
        <span class="hljs-comment">// å‡†å¤‡é•¿åº¦å¤´ç¼“å†²åŒº</span>
        <span class="hljs-built_in">this</span>.dataHeaderBytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[HEADER_LENGTH];
        <span class="hljs-built_in">this</span>.headerByteBuffer = ByteBuffer.wrap(dataHeaderBytes);
        <span class="hljs-built_in">this</span>.headerByteBuffer.order(ByteOrder.LITTLE_ENDIAN);
    }
    
    <span class="hljs-comment">/**
     * å†™å…¥å•æ¡è®°å½•
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">write</span><span class="hljs-params">(<span class="hljs-type">byte</span>[] record)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-keyword">return</span> write(record, <span class="hljs-number">0</span>, record.length);
    }
    
    <span class="hljs-comment">/**
     * å†™å…¥éƒ¨åˆ†æ•°æ®ï¼ˆæ”¯æŒ offsetï¼‰
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">write</span><span class="hljs-params">(<span class="hljs-type">byte</span>[] record, <span class="hljs-type">int</span> offset, <span class="hljs-type">int</span> length)</span> 
            <span class="hljs-keyword">throws</span> IOException {
        
        <span class="hljs-comment">// æ€»å¤§å° = 4 å­—èŠ‚é•¿åº¦å¤´ + æ•°æ®ä½“</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">outputSize</span> <span class="hljs-operator">=</span> HEADER_LENGTH + (length - offset);
        
        <span class="hljs-comment">// 1. é¢„ç•™ç©ºé—´ï¼ˆæ— é”æ£€æŸ¥ï¼‰</span>
        <span class="hljs-keyword">if</span> (!outputStream.tryReserveBeforeWrite(outputSize)) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;  <span class="hljs-comment">// é˜Ÿåˆ—å·²æ»¡</span>
        }
        
        <span class="hljs-comment">// 2. ç”Ÿæˆé•¿åº¦å¤´ï¼ˆLittle Endianï¼‰</span>
        <span class="hljs-type">byte</span>[] headerData = extractHeaderData(length);
        
        <span class="hljs-comment">// 3. å…ˆå†™é•¿åº¦å¤´</span>
        outputStream.write(headerData, <span class="hljs-number">0</span>, HEADER_LENGTH);
        
        <span class="hljs-comment">// 4. å†å†™æ•°æ®ä½“</span>
        outputStream.write(record, offset, length);
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-comment">/**
     * ç”Ÿæˆ Little Endian é•¿åº¦å¤´
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">byte</span>[] extractHeaderData(<span class="hljs-type">int</span> length) {
        headerByteBuffer.clear();
        headerByteBuffer.putInt(length);
        <span class="hljs-keyword">return</span> dataHeaderBytes;
    }
}
</code></pre>
<h4 data-id="heading-5">æ•°æ®å¸§æ ¼å¼</h4>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  InferDataWriter å†™å…¥çš„æ•°æ®æ ¼å¼   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ <span class="hljs-selector-attr">[4å­—èŠ‚é•¿åº¦å¤´ (Little Endian)]</span>     â”‚
â”‚  <span class="hljs-number">0</span>x0A <span class="hljs-number">0</span>x00 <span class="hljs-number">0</span>x00 <span class="hljs-number">0</span>x00  â†’ <span class="hljs-number">10</span>       â”‚
â”‚  (è¡¨ç¤ºåç»­ <span class="hljs-number">10</span> å­—èŠ‚çš„æ•°æ®)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ <span class="hljs-selector-attr">[æ•°æ®ä½“ 10å­—èŠ‚]</span>                   â”‚
â”‚  <span class="hljs-number">0</span>x48 <span class="hljs-number">0</span>x65 <span class="hljs-number">0</span>x6C <span class="hljs-number">0</span>x6C ...        â”‚
â”‚  (H    e    l    l    o    ...)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç¤ºä¾‹: åºåˆ—åŒ– <span class="hljs-string">"Hello World"</span> (<span class="hljs-number">11</span> å­—èŠ‚)

ç¬¬ä¸€å¸§:
  Length: <span class="hljs-number">0</span>x0B <span class="hljs-number">0</span>x00 <span class="hljs-number">0</span>x00 <span class="hljs-number">0</span>x00
  Data:   <span class="hljs-number">0</span>x48 <span class="hljs-number">0</span>x65 <span class="hljs-number">0</span>x6C <span class="hljs-number">0</span>x6C <span class="hljs-number">0</span>x6F <span class="hljs-number">0</span>x20 (H e l l o [space])

ç¬¬äºŒå¸§:
  Length: <span class="hljs-number">0</span>x05 <span class="hljs-number">0</span>x00 <span class="hljs-number">0</span>x00 <span class="hljs-number">0</span>x00
  Data:   <span class="hljs-number">0</span>x57 <span class="hljs-number">0</span>x6F <span class="hljs-number">0</span>x72 <span class="hljs-number">0</span>x6C <span class="hljs-number">0</span>x64 (W o r l d)
</code></pre>
<h4 data-id="heading-6">å­—èŠ‚åºå¤„ç†</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Little Endian vs Big Endian</span>

æ•´æ•° <span class="hljs-number">0x12345678</span>

Big <span class="hljs-title function_">Endian</span> <span class="hljs-params">(ç½‘ç»œå­—èŠ‚åº)</span>:
  â”œâ”€ <span class="hljs-type">byte</span> <span class="hljs-number">0</span>: <span class="hljs-number">0x12</span>
  â”œâ”€ <span class="hljs-type">byte</span> <span class="hljs-number">1</span>: <span class="hljs-number">0x34</span>
  â”œâ”€ <span class="hljs-type">byte</span> <span class="hljs-number">2</span>: <span class="hljs-number">0x56</span>
  â””â”€ <span class="hljs-type">byte</span> <span class="hljs-number">3</span>: <span class="hljs-number">0x78</span>

Little <span class="hljs-title function_">Endian</span> <span class="hljs-params">(x86/ARM åŸç”Ÿ)</span>:
  â”œâ”€ <span class="hljs-type">byte</span> <span class="hljs-number">0</span>: <span class="hljs-number">0x78</span>
  â”œâ”€ <span class="hljs-type">byte</span> <span class="hljs-number">1</span>: <span class="hljs-number">0x56</span>
  â”œâ”€ <span class="hljs-type">byte</span> <span class="hljs-number">2</span>: <span class="hljs-number">0x34</span>
  â””â”€ <span class="hljs-type">byte</span> <span class="hljs-number">3</span>: <span class="hljs-number">0x12</span>

<span class="hljs-comment">// Java ByteBuffer æ”¯æŒä¸¤ç§æ–¹å¼</span>
<span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">bb</span> <span class="hljs-operator">=</span> ByteBuffer.wrap(bytes);

<span class="hljs-comment">// æ–¹å¼ 1: Big Endian (é»˜è®¤)</span>
bb.putInt(<span class="hljs-number">0x12345678</span>);  
<span class="hljs-comment">// ç»“æœ: [0x12, 0x34, 0x56, 0x78]</span>

<span class="hljs-comment">// æ–¹å¼ 2: Little Endian (GeaFlow ä½¿ç”¨)</span>
bb.order(ByteOrder.LITTLE_ENDIAN);
bb.putInt(<span class="hljs-number">0x12345678</span>);
<span class="hljs-comment">// ç»“æœ: [0x78, 0x56, 0x34, 0x12]</span>

<span class="hljs-comment">// ä¸ºä»€ä¹ˆé€‰æ‹© Little Endian?</span>
<span class="hljs-comment">// âœ“ x86/ARM å¤„ç†å™¨åŸç”Ÿæ”¯æŒ</span>
<span class="hljs-comment">// âœ“ é¿å…å­—èŠ‚åºè½¬æ¢å¼€é”€</span>
<span class="hljs-comment">// âœ“ Java å’Œ Python mmap éƒ½èƒ½å¿«é€Ÿè®¿é—®</span>
</code></pre>
<hr/>
<h3 data-id="heading-7">7.2 InferDataReader å®ç°</h3>
<h4 data-id="heading-8">æ ¸å¿ƒèŒè´£</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InferDataReader</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Closeable</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">HEADER_LENGTH</span> <span class="hljs-operator">=</span> <span class="hljs-number">4</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DataInputStream input;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicBoolean</span> <span class="hljs-variable">END</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicBoolean</span>(<span class="hljs-literal">false</span>);
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">InferDataReader</span><span class="hljs-params">(DataExchangeQueue queue)</span> {
        <span class="hljs-type">DataQueueInputStream</span> <span class="hljs-variable">dataQueueInputStream</span> <span class="hljs-operator">=</span> 
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataQueueInputStream</span>(queue);
        <span class="hljs-built_in">this</span>.input = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataInputStream</span>(dataQueueInputStream);
    }
    
    <span class="hljs-comment">/**
     * è¯»å–ä¸€æ¡è®°å½•
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">byte</span>[] read() <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-comment">// 1. è¯»å– 4 å­—èŠ‚é•¿åº¦å¤´</span>
        <span class="hljs-type">byte</span>[] buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[HEADER_LENGTH];
        <span class="hljs-type">int</span> <span class="hljs-variable">bytesNum</span> <span class="hljs-operator">=</span> input.read(buffer);
        
        <span class="hljs-comment">// å¤„ç† EOF æˆ–è¯»å–å¤±è´¥</span>
        <span class="hljs-keyword">if</span> (bytesNum &lt; <span class="hljs-number">0</span>) {
            END.set(<span class="hljs-literal">true</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        
        <span class="hljs-comment">// å¦‚æœé•¿åº¦å¤´æœªè¯»å®Œï¼Œç»§ç»­è¯»</span>
        <span class="hljs-keyword">if</span> (bytesNum &lt; buffer.length) {
            input.readFully(buffer, bytesNum, buffer.length - bytesNum);
        }
        
        <span class="hljs-comment">// 2. è§£æé•¿åº¦ï¼ˆLittle Endianï¼‰</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> fromInt32LE(buffer);
        
        <span class="hljs-comment">// 3. è¯»å–æ•°æ®ä½“</span>
        <span class="hljs-type">byte</span>[] data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[len];
        input.readFully(data);  <span class="hljs-comment">// é˜»å¡ç›´åˆ°è¯»æ»¡</span>
        
        <span class="hljs-keyword">return</span> data;
    }
    
    <span class="hljs-comment">/**
     * ä» Little Endian å­—èŠ‚è½¬æ¢ä¸ºæ•´æ•°
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">fromInt32LE</span><span class="hljs-params">(<span class="hljs-type">byte</span>[] bytes)</span> {
        <span class="hljs-keyword">return</span> (bytes[<span class="hljs-number">0</span>] &amp; <span class="hljs-number">0xFF</span>) 
            | ((bytes[<span class="hljs-number">1</span>] &amp; <span class="hljs-number">0xFF</span>) &lt;&lt; <span class="hljs-number">8</span>) 
            | ((bytes[<span class="hljs-number">2</span>] &amp; <span class="hljs-number">0xFF</span>) &lt;&lt; <span class="hljs-number">16</span>) 
            | ((bytes[<span class="hljs-number">3</span>] &amp; <span class="hljs-number">0xFF</span>) &lt;&lt; <span class="hljs-number">24</span>);
    }
}
</code></pre>
<h4 data-id="heading-9">è¯»å–æµç¨‹</h4>
<pre><code class="hljs language-scss" lang="scss">DataQueueInputStream
  â†“
åº•å±‚è¿æ¥åˆ° DataExchangeQueue
  â”œâ”€ è½®è¯¢ç­‰å¾…æ•°æ®
  â”œâ”€ å½“æ•°æ®åˆ°è¾¾æ—¶ï¼Œè¿”å›
  â””â”€ æ”¯æŒé˜»å¡/è¶…æ—¶

DataInputStream
  â†“
åŒ…è£… DataQueueInputStream
  â”œâ”€ æä¾›ç¼“å†² <span class="hljs-selector-tag">I</span>/O
  â”œâ”€ <span class="hljs-built_in">readFully</span>() ç¡®ä¿è¯»è¶³ N å­—èŠ‚
  â””â”€ å¤„ç† EOF å’Œé”™è¯¯
</code></pre>
<hr/>
<h3 data-id="heading-10">7.3 æ•°æ®å¸§è®¾è®¡çš„ä¼˜é›…æ€§</h3>
<h4 data-id="heading-11">ä¸ºä»€ä¹ˆè¦æœ‰é•¿åº¦å¤´ï¼Ÿ</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">æ–¹æ¡ˆ</span> <span class="hljs-attr">1:</span> <span class="hljs-string">æ— é•¿åº¦å¤´ï¼ˆç›´æ¥å†™æ•°æ®ï¼‰</span>
  <span class="hljs-string">é—®é¢˜:</span> <span class="hljs-string">Reader</span> <span class="hljs-string">ä¸çŸ¥é“ä½•æ—¶åœæ­¢</span>
  <span class="hljs-attr">Example:</span>
    <span class="hljs-string">Writer</span> <span class="hljs-string">å†™å…¥:</span> [<span class="hljs-number">0x48</span>, <span class="hljs-number">0x65</span>, <span class="hljs-number">0x6C</span>, <span class="hljs-number">0x6C</span>, <span class="hljs-number">0x6F</span>]
    <span class="hljs-string">Reader</span> <span class="hljs-string">è¯»å–:</span> <span class="hljs-string">åº”è¯¥è¯»</span> <span class="hljs-number">5</span> <span class="hljs-string">ä¸ªå­—èŠ‚è¿˜æ˜¯</span> <span class="hljs-number">10</span> <span class="hljs-string">ä¸ªï¼Ÿæ— æ³•åˆ¤æ–­</span>

<span class="hljs-string">æ–¹æ¡ˆ</span> <span class="hljs-attr">2:</span> <span class="hljs-string">æœ‰é•¿åº¦å¤´ï¼ˆæ¨èï¼‰</span>
  <span class="hljs-string">ä¼˜ç‚¹:</span> <span class="hljs-string">æ•°æ®è‡ªæè¿°ï¼ŒReader</span> <span class="hljs-string">çŸ¥é“ä½•æ—¶åœæ­¢</span>
  <span class="hljs-attr">Example:</span>
    <span class="hljs-string">Writer</span> <span class="hljs-string">å†™å…¥:</span> [<span class="hljs-number">0x05</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>][<span class="hljs-number">0x48</span>, <span class="hljs-number">0x65</span>, <span class="hljs-number">0x6C</span>, <span class="hljs-number">0x6C</span>, <span class="hljs-number">0x6F</span>]
    <span class="hljs-attr">Reader:</span> <span class="hljs-string">å…ˆè¯»</span> <span class="hljs-number">4</span> <span class="hljs-string">å­—èŠ‚é•¿åº¦</span> <span class="hljs-string">=</span> <span class="hljs-number">5</span><span class="hljs-string">ï¼Œå†è¯»</span> <span class="hljs-number">5</span> <span class="hljs-string">å­—èŠ‚æ•°æ®</span> <span class="hljs-string">âœ“</span>

<span class="hljs-string">æ–¹æ¡ˆ</span> <span class="hljs-attr">3:</span> <span class="hljs-string">åˆ†ç•Œç¬¦ï¼ˆä¸æ¨èï¼‰</span>
  <span class="hljs-string">é—®é¢˜:</span> <span class="hljs-string">æ•°æ®å¯èƒ½åŒ…å«åˆ†ç•Œç¬¦ï¼Œéœ€è¦è½¬ä¹‰</span>
  <span class="hljs-string">å¤æ‚åº¦:</span> <span class="hljs-string">é«˜</span>
</code></pre>
<h4 data-id="heading-12">å­—èŠ‚åºçš„å¿…è¦æ€§</h4>
<pre><code class="hljs language-ini" lang="ini">åœºæ™¯ 1: Java å†™ï¼ŒPython è¯»ï¼ˆéƒ½ç”¨ Little Endianï¼‰
  Java:   int <span class="hljs-attr">length</span> = <span class="hljs-number">10</span>
          å°†å…¶ç¼–ç ä¸º <span class="hljs-section">[0x0A, 0x00, 0x00, 0x00]</span>
          å†™å…¥å…±äº«å†…å­˜
  
  Python: ä»å…±äº«å†…å­˜è¯»å– <span class="hljs-section">[0x0A, 0x00, 0x00, 0x00]</span>
          ä½¿ç”¨ struct.unpack('&lt;I', ...) è§£æ
          å¾—åˆ° 10 âœ“

åœºæ™¯ 2: å¦‚æœ Java ç”¨ Big Endian, Python ç”¨ Little Endian
  Java:   int <span class="hljs-attr">length</span> = <span class="hljs-number">10</span>
          ç¼–ç ä¸º <span class="hljs-section">[0x00, 0x00, 0x00, 0x0A]</span>  â† Big Endian
          å†™å…¥å…±äº«å†…å­˜
  
  Python: ä»å…±äº«å†…å­˜è¯»å– <span class="hljs-section">[0x00, 0x00, 0x00, 0x0A]</span>
          ä½¿ç”¨ struct.unpack('&lt;I', ...) è§£æ
          å¾—åˆ° 167772160 âœ— å®Œå…¨é”™è¯¯!

ç»“è®º: åŒæ–¹å¿…é¡»çº¦å®šåŒä¸€ç§å­—èŠ‚åº
</code></pre>
<hr/>
<h3 data-id="heading-13">7.4 æµå¼ I/O ä¸ç¼“å†²</h3>
<h4 data-id="heading-14">DataQueueOutputStream</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataQueueOutputStream</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">OutputStream</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DataExchangeQueue queue;
    
    <span class="hljs-comment">/**
     * é¢„ç•™ç©ºé—´ï¼ˆæ— é”æ£€æŸ¥ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">tryReserveBeforeWrite</span><span class="hljs-params">(<span class="hljs-type">int</span> size)</span> {
        <span class="hljs-comment">// æ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦æœ‰è¶³å¤Ÿç©ºé—´</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">writeIndex</span> <span class="hljs-operator">=</span> UNSAFE.getVolatileLong(<span class="hljs-built_in">this</span>, WRITE_PTR);
        <span class="hljs-type">long</span> <span class="hljs-variable">readIndex</span> <span class="hljs-operator">=</span> UNSAFE.getVolatileLong(<span class="hljs-built_in">this</span>, READ_PTR);
        
        <span class="hljs-type">long</span> <span class="hljs-variable">available</span> <span class="hljs-operator">=</span> (readIndex + capacity) - writeIndex;
        <span class="hljs-keyword">return</span> available &gt;= size;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">write</span><span class="hljs-params">(<span class="hljs-type">int</span> b)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-type">byte</span>[] bytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1</span>];
        bytes[<span class="hljs-number">0</span>] = (<span class="hljs-type">byte</span>) b;
        write(bytes);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">write</span><span class="hljs-params">(<span class="hljs-type">byte</span>[] b, <span class="hljs-type">int</span> off, <span class="hljs-type">int</span> len)</span> 
            <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-comment">// è°ƒç”¨ DataExchangeQueue çš„åº•å±‚å†™æ–¹æ³•</span>
        queue.put(b, off, len);
    }
}
</code></pre>
<h4 data-id="heading-15">DataQueueInputStream</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataQueueInputStream</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">InputStream</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DataExchangeQueue queue;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">DEFAULT_TIMEOUT</span> <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>;  <span class="hljs-comment">// 1 ç§’</span>
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">read</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-type">byte</span>[] buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1</span>];
        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> read(buffer);
        <span class="hljs-keyword">return</span> n &gt; <span class="hljs-number">0</span> ? buffer[<span class="hljs-number">0</span>] &amp; <span class="hljs-number">0xFF</span> : -<span class="hljs-number">1</span>;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">read</span><span class="hljs-params">(<span class="hljs-type">byte</span>[] b, <span class="hljs-type">int</span> off, <span class="hljs-type">int</span> len)</span> 
            <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-comment">// è½®è¯¢ç­‰å¾…æ•°æ®ï¼ˆå¸¦è¶…æ—¶ï¼‰</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            <span class="hljs-type">byte</span>[] data = queue.get();  <span class="hljs-comment">// éé˜»å¡</span>
            
            <span class="hljs-keyword">if</span> (data != <span class="hljs-literal">null</span>) {
                System.arraycopy(data, <span class="hljs-number">0</span>, b, off, len);
                <span class="hljs-keyword">return</span> len;
            }
            
            <span class="hljs-comment">// è¶…æ—¶æ£€æŸ¥</span>
            <span class="hljs-keyword">if</span> (System.currentTimeMillis() - startTime 
                    &gt; DEFAULT_TIMEOUT) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SocketTimeoutException</span>(
                    <span class="hljs-string">"è¯»å–é˜Ÿåˆ—æ•°æ®è¶…æ—¶"</span>);
            }
            
            Thread.sleep(<span class="hljs-number">10</span>);  <span class="hljs-comment">// è®©å‡º CPUï¼Œé¿å…å¿™è½®è¯¢</span>
        }
    }
}
</code></pre>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¹¦æµ·æ‹¾é—ï¼šã€Šæªç‚®ã€ç—…èŒä¸é’¢é“ã€‹]]></title>    <link>https://juejin.cn/post/7576843726011039770</link>    <guid>https://juejin.cn/post/7576843726011039770</guid>    <pubDate>2025-11-26T09:12:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576843726011039770" data-draft-id="7575363120798826496" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¹¦æµ·æ‹¾é—ï¼šã€Šæªç‚®ã€ç—…èŒä¸é’¢é“ã€‹"/> <meta itemprop="keywords" content="ç”µå­ä¹¦,ç¬”è®°"/> <meta itemprop="datePublished" content="2025-11-26T09:12:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‡‰å‡‰çš„çŸ¥è¯†åº“"/> <meta itemprop="url" content="https://juejin.cn/user/3280598428311326"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¹¦æµ·æ‹¾é—ï¼šã€Šæªç‚®ã€ç—…èŒä¸é’¢é“ã€‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3280598428311326/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‡‰å‡‰çš„çŸ¥è¯†åº“
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T09:12:54.000Z" title="Wed Nov 26 2025 09:12:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ã€Šæªç‚®ã€ç—…èŒä¸é’¢é“ã€‹æ¨èçš„äººéå¸¸å¤šï¼Œæœ€è¿‘ç»ˆäºèŠ±æ—¶é—´è¯»å®Œäº†æœ¬ä¹¦ã€‚å…¶ä¸­è®¸å¤šè§‚ç‚¹ç¡®å®è®©äººè€³ç›®ä¸€æ–°ã€‚å®é™…ä¸Šä½œè€…çš„è§‚ç‚¹åœ¨ä¹¦ä¸­éƒ½æœ‰ç€ä¸¥è°¨çš„æ¨ç†å’Œè¯æ˜ï¼Œå—é™äºç¯‡å¹…æˆ‘åªæ˜¯éå¸¸ç®€é™‹çš„æ¦‚æ‹¬äº†æœ¬ä¹¦ä½œè€…çš„ç»“è®ºï¼Œå¦‚æœä½ å¯¹è¿™äº›è§‚ç‚¹æ„Ÿå…´è¶£ï¼Œå¼ºçƒˆå»ºè®®ä½ ä»”ç»†çš„é˜…è¯»åŸä¹¦</p>
</blockquote>
<p>ã€Šæªç‚®ã€ç—…èŒä¸é’¢é“ã€‹æ˜¯è´¾é›·å¾·Â·æˆ´è’™å¾·ï¼ˆJared Diamondï¼‰1997å¹´å‡ºç‰ˆçš„è‘—ä½œï¼Œ1998å¹´å³è·å¾—æ™®åˆ©ç­–å¥–ã€‚ä½œè€…æ˜¯ç¾å›½æ¼”åŒ–ç”Ÿç‰©å­¦å®¶ã€ç”Ÿç†å­¦å®¶ä¸åœ°ç†å­¦å®¶ï¼Œç¾å›½å›½å®¶ç§‘å­¦é™¢é™¢å£«ã€‚æœ¬ä¹¦æ ¸å¿ƒçš„è§£é‡Šäº†è¿™æ ·çš„ä¸€ä¸ªé—®é¢˜ï¼šä¸ºä½•åœ¨è¿‡å»13,000å¹´é—´ï¼Œä¸åŒå¤§é™†çš„äººç±»ç¤¾ä¼šå‘ˆç°å‡ºå¦‚æ­¤å·¨å¤§çš„å‘å±•å·®å¼‚ï¼Ÿä¸ºä½•æ˜¯æ¬§äºšå¤§é™†æ–‡æ˜å¾æœäº†ç¾æ´²ã€éæ´²å’Œå¤§æ´‹æ´²ï¼Œè€Œä¸æ˜¯ç›¸åã€‚</p>
<p>æ˜¯å› ä¸ºä¸åŒåœ°åŒºæŠ€æœ¯å‘å±•å·®å¼‚å¯¼è‡´çš„ä¹ˆï¼Ÿé‚£æŠ€æœ¯å·®å¼‚æ˜¯å¦‚ä½•äº§ç”Ÿçš„ï¼Ÿæ˜¯ä¸åŒåœ°åŒºçš„æ–‡åŒ–ã€åˆ¶åº¦å·®å¼‚å¯¼è‡´çš„ä¹ˆï¼Ÿé‚£ä¸åŒçš„æ–‡åŒ–ã€åˆ¶åº¦å·®å¼‚åˆæ˜¯å¦‚ä½•äº§ç”Ÿçš„ï¼Ÿä½œè€…æˆ´è’™å¾·å¸Œæœ›æ¢å¯»è¿™ä¸€åˆ‡çš„ç»ˆæå› ï¼Œåœ¨å…¨ä¹¦å¼€ç¯‡å³äº®å‡ºäº†é¢ è¦†æ€§çš„æ ¸å¿ƒè§‚ç‚¹ï¼šâ€œä¸åŒæ°‘æ—çš„å†å²éµå¾ªä¸åŒçš„é“è·¯å‰è¿›ï¼Œå…¶åŸå› æ˜¯åœ°ç†ç¯å¢ƒçš„å·®å¼‚ï¼Œè€Œä¸æ˜¯æ°‘æ—è‡ªèº«åœ¨ç”Ÿç‰©å­¦ä¸Šçš„å·®å¼‚â€</p>
<p>å„å¤§æ´²çš„ç¯å¢ƒæœ‰è®¸å¤šä¸åŒçš„ç‰¹å¾ï¼Œæ¯ä¸ªç‰¹å¾éƒ½èƒ½å½±å“äººç±»å†å²çš„å‘å±•ï¼Œä½œè€…è®¤ä¸ºå…¶ä¸­å››ç»„æ˜¯æœ€é‡è¦çš„ã€‚</p>
<p><strong>ç¬¬ä¸€ç»„å› ç´ æ˜¯ç¯å¢ƒå·®å¼‚ï¼Œå„å¤§æ´²ä¸Šå¯ä¾›é©¯åŒ–çš„åŠ¨æ¤ç‰©èµ„æºä¸åŒã€‚</strong> å…¨çƒä»…æœ‰å°‘æ•°å‡ ä¸ªç‹¬ç«‹å†œä¸šèµ·æºä¸­å¿ƒï¼Œå…¶ä»–åœ°åŒºçš„ä¸»è¦ä½œç‰©å’Œå¤§å‹å®¶ç•œéƒ½æ˜¯ä»å‘æºåœ°ä¼ æ’­è€Œæ¥ï¼Œè¿™å¹¶ä¸æ˜¯å› ä¸ºå„åœ°åŒºç§æ—é©¯åŒ–åŠ¨æ¤ç‰©çš„èƒ½åŠ›å·®è·ï¼Œè€Œæ˜¯é©¯åŒ–èµ„æºçš„åˆ†å¸ƒä¸å‡ã€‚</p>
<p>ä½œè€…ç»™å‡ºçš„ç†ç”±ä¹‹ä¸€æ˜¯å³ä½¿ç°ä»£ç¤¾ä¼šç§‘æŠ€å‘å±•æ°´å¹³å¦‚æ­¤ä¹‹é«˜ï¼Œäººç±»å¹¶æ²¡æœ‰é©¯åŒ–å‡ºæ›´å¤šçš„åŠ¨æ¤ç‰©ã€‚å› ä¸ºé©¯åŒ–çš„å€™é€‰åŠ¨ç‰©å¿…é¡»å…·å¤‡è®¸å¤šç‰¹è´¨æ‰èƒ½è„±é¢–è€Œå‡ºï¼ˆä½œè€…ä¹Ÿåˆ†æäº†å“ªäº›ç‰¹è´¨è¿™é‡Œä¸èµ˜è¿°ï¼‰ï¼Œå°‘äº†ä»»ä½•ä¸€ç‚¹éƒ½æœ‰å¯èƒ½åŠŸè´¥å‚æˆã€‚ä»¥å¯ä¾›é©¯åŒ–çš„ç”Ÿç‰©èµ„æºæ¥è¯´ï¼Œæ¬§äºšå¤§é™†æœ€å¾—å¤©ç‹¬åšï¼Œéæ´²æ¬¡ä¹‹ï¼Œç¾æ´²å°±å·®å¤šäº†ï¼Œè€Œæ¾³å¤§åˆ©äºšç®€ç›´æ˜¯ä¸æ¯›ä¹‹åœ°ï¼Œè¿™ç§å†œä¸šå‘å±•æ—¶é—´å·®ä¸ºæ¬§äºšå¤§é™†æ–‡æ˜èµ¢å¾—äº†å…³é”®å‘å±•å…ˆæœºã€‚</p>
<p>é£Ÿç‰©ç”Ÿäº§éå¸¸é‡è¦ï¼Œç›¸æ¯”ç‹©çŒâ€”é‡‡é›†æ–¹å¼ï¼Œå†œä¸šäº§å‡ºæ›´å¤šé£Ÿç‰©çš„åŒæ—¶éœ€è¦äººä»¬å®šå±…ï¼Œä¿ƒæˆäº†äººå£å¯†åº¦çš„å¢åŠ ï¼Œç›ˆä½™çš„é£Ÿç‰©åˆå¯ä»¥æ¥ä¾›å…»ä¸äº‹ç”Ÿäº§çš„ä¸“å®¶æˆ–è€…å®˜åƒšï¼Œäººç±»æ—ç¾¤é€æ­¥ä»ç®€å•çš„äººäººå¹³ç­‰çš„æ¸¸æ—ä¸æ–­æ¼”è¿›åˆ°éƒ¨è½ã€é…‹é‚¦ã€å›½å®¶ï¼Œå½¢æˆå¤æ‚çš„ç¤¾ä¼šåˆ¶åº¦ã€‚</p>
<p>å®šå±…ã€é›†æƒã€ç¤¾ä¼šåˆ†å±‚ã€ç»æµå¤æ‚ã€æŠ€æœ¯åˆ›æ–°çš„ç¤¾ä¼šï¼Œä¸“å®¶å¯ä»¥æŠ€æœ¯åˆ›æ–°å‘æ˜å·¥å…·ã€æ–‡å­—æˆ–è€…æ­¦å™¨æå‡å†œä¸šä¸å†›äº‹æ°´å¹³ï¼Œå®˜åƒšé˜¶çº§å¯ä»¥è¶‹åŠ¿å¥´éš¶ä¸å†›é˜Ÿä¿®å»ºå¤§å‹å†œä¸šè®¾æ–½æˆ–å¯¹å¤–æˆ˜äº‰ã€‚æœ€æ—©è±¢å…»å®¶ç•œçš„äººç±»è¿˜ä¼šå’Œå®¶å…»åŠ¨ç‰©ä¸€èµ·æ¼”åŒ–çš„ç—…èŒï¼Œå½“è¿™äº›æ‹¥æœ‰æŠ—ä½“çš„äººä¸ä»æ¥ä¸æ›¾æ„ŸæŸ“è¿‡è¿™ç±»ç—…èŒçš„äººä»¬æ¥è§¦æ—¶ä¼šé€ æˆä¼ æŸ“ç—…çš„å¤§æµè¡Œã€‚</p>
<p>ä½œç‰©å’Œç‰²ç•œçš„æœ‰æ— ï¼Œä»æ ¹æœ¬ä¸Šè§£é‡Šäº†ä¸ºä½•å¸å›½ã€æ–‡å­—ã€é’¢é“æ­¦å™¨æœ€æ—©åœ¨æ¬§äºšå¤§é™†å‡ºç°ï¼Œè€Œåœ¨å…¶ä»–åœ°æ–¹è¾ƒæ™šç”šè‡³æ²¡æœ‰å‡ºç°ã€‚å†åŠ ä¸Šé©¬åŒ¹å’Œéª†é©¼åœ¨å†›äº‹ä¸Šçš„ä½œç”¨ï¼Œä»¥åŠæºè‡ªåŠ¨ç‰©çš„ç—…èŒçš„æ€ä¼¤åŠ›ï¼Œè¶³ä»¥å¾æœå…¶ä»–è½åçš„æ—ç¾¤ã€‚</p>
<p><strong>ç¬¬äºŒç»„å› ç´ æ˜¯å½±å“ä¼ æ’­ä¸è¿å¾™é€Ÿåº¦çš„æ¡ä»¶ï¼Œå„å¤§æ´²åœ¨è¿™æ–¹é¢æœ‰å¾ˆå¤§çš„å·®å¼‚ã€‚</strong> åœ¨æ¬§äºšå¤§é™†ä¸Šï¼Œä¼ æ’­ä¸è¿å¾™çš„é€Ÿåº¦æœ€å¿«ï¼Œå› ä¸ºæ¬§äºšå¤§é™†çš„å¤§é™†è½´çº¿æ˜¯ä¸œè¥¿å‘çš„ï¼Œè€Œä¸”ç”Ÿæ€ä¸åœ°ç†éšœç¢æ¯”è¾ƒå°‘ã€‚å¯¹ç‰²å£ä¸å†œä½œç‰©çš„ä¼ æ’­è€Œè¨€ï¼Œå‘è‚²ã€æ»‹é•¿å—æ°”å€™çš„å½±å“ï¼Œè€Œæ°”å€™åˆå—çº¬åº¦å½±å“ã€‚ç›¸æ¯”äºéæ´²å—åŒ—å‘è½´çº¿ï¼Œä¸åŒåœ°åŒºçš„æ°”å€™ä¸åŒï¼Œä¸¥é‡é˜»ç¢äº†å†œä¸šæŠ€æœ¯çš„ä¼ æ’­ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56d5aae71c7c456c94734ec269cf6a73~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YeJ5YeJ55qE55-l6K-G5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753591&amp;x-signature=Q2sPgSvQDyrNy2EKi4DewHnxa8M%3D" alt="ä¸–ç•Œåœ°å›¾" loading="lazy"/></p>
<p><strong>ç¬¬ä¸‰ç»„å› ç´ æ˜¯å„å¤§æ´²ä¹‹é—´ä¼ æ’­çš„éš¾æ˜“ç¨‹åº¦ä¸åŒ</strong>ã€‚ä½œç‰©ã€ç‰²å£ã€æŠ€æœ¯ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å„å¤§æ´²ä¹‹é—´çš„ä¼ æ’­è·å¾—ï¼Œä»æ¬§äºšå¤§é™†åˆ°æ’’å“ˆæ‹‰ä»¥å—éæ´²çš„ä¼ æ’­æ˜¯æœ€å®¹æ˜“çš„ï¼Œæ¾³å¤§åˆ©äºšåœŸè‘—ä¸æ¬§äºšå¤§é™†éš”ç€å¤§æ´‹éš¾åº¦æœ€å¤§ã€‚</p>
<p><strong>ç¬¬å››ç»„ä¹Ÿæ˜¯æœ€åä¸€ç»„å› ç´ ï¼Œæ˜¯å„å¤§æ´²åœ¨é¢ç§¯æˆ–äººå£æ€»æ•°ä¸Šçš„å·®å¼‚ã€‚</strong> é¢ç§¯è¶Šå¤§ã€äººå£æ€»æ•°è¶Šå¤šçš„å¤§æ´²ï¼Œå‘æ˜å®¶è¶Šå¤šï¼Œç›¸äº’ç«äº‰çš„ç¤¾ä¼šè¶Šå¤šï¼Œåˆ›æ–°ä¹Ÿè¶Šå¤šâ€”â€”é‡‡å€Ÿå’Œä¿æŒåˆ›æ–°çš„å‹åŠ›æ›´å¤§ï¼Œå› ä¸ºä¸è¿™ä¹ˆåšå°±ä¼šè¢«ç«äº‰å¯¹æ‰‹æ·˜æ±°ã€‚ä¸–ç•Œä¸Šçš„å„ä¸ªé™†å—ä¸­ï¼Œæ¬§äºšå¤§é™†çš„é¢ç§¯æœ€å¤§ï¼Œç›¸äº’ç«äº‰çš„ç¤¾ä¼šæ•°é‡ä¹Ÿæœ€å¤šã€‚ç¾æ´²çš„é¢ç§¯è™½ç„¶å¾ˆå¤§ï¼Œåœ¨åœ°ç†å’Œç”Ÿæ€ä¸Šå´å¾ˆç¢ç‰‡åŒ–ï¼Œå®é™…ä¸Šåƒæ˜¯æ²¡æœ‰ç´§å¯†è”ç³»çš„å‡ ä¸ªå°é™†å—ã€‚</p>
<p>ç”±æ­¤æ„å»ºäº†æ¸…æ™°çš„å› æœå…³ç³»é“¾ï¼šå„å¤§é™†ä¸åŒçš„åœ°ç†ç¯å¢ƒæ¡ä»¶ï¼ˆå°¤å…¶æ˜¯å¯é©¯åŒ–åŠ¨æ¤ç‰©èµ„æºï¼‰â†’ ç²®é£Ÿç”Ÿäº§å‡ºç°æ—¶é—´ä¸ä¼ æ’­é€Ÿåº¦å·®å¼‚ â†’ äººå£å¯†åº¦ã€ç¤¾ä¼šåˆ†å·¥ä¸æŠ€æœ¯åˆ›æ–°å·®å¼‚ â†’ æªç‚®ã€ç—…èŒä¸é’¢é“çš„å‘å±•ä¸å¹³è¡¡ â†’ æ¬§æ´²å¯¹ç¾æ´²ç­‰åœ°çš„å¾æœã€‚</p>
<p>è™½ç„¶ä½œè€…å£«åœ¨ä¹¦ä¸­æŠŠç¯å¢ƒå› ç´ è§†ä¸ºå†å²å‘å±•çš„ç»ˆæå› ï¼Œä½†ä»–ä¹Ÿè®¤è¯†åˆ°ç¯å¢ƒå› ç´ ä¸å¯èƒ½æ˜¯å”¯ä¸€çš„ï¼Œå†å²ç³»ç»Ÿå³ä½¿æœ‰ç»ˆæçš„ç¡®å®šæ€§ï¼Œä¹Ÿä»æ—§æ˜¯å¤æ‚ã€ä¸å¯é¢„æµ‹çš„ã€‚ä½†é€šè¿‡æŠŠäººç±»ç¤¾ä¼šçš„å†å²å¯ä»¥å½“ä½œç§‘å­¦æ¥ç ”ç©¶ï¼Œå°±åƒç ”ç©¶æé¾™ä¸€æ ·ï¼Œæˆ‘ä»¬çš„æ”¶è·å¯¹å½“ä»Šçš„ç¤¾ä¼šæœ‰ç›Šï¼Œå› ä¸ºæˆ‘ä»¬ä¼šæ˜ç™½ä»€ä¹ˆå¡‘é€ äº†ç°ä»£ä¸–ç•Œï¼Œä»€ä¹ˆåˆå¯èƒ½å¡‘é€ æˆ‘ä»¬çš„æœªæ¥ã€‚</p>
<hr/>
<p>âœ¨ å¾®ä¿¡å…¬ä¼—å·ã€<strong>å‡‰å‡‰çš„çŸ¥è¯†åº“</strong>ã€‘åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨è·å–æœ€æ–°æœ€æœ‰ç”¨çš„çŸ¥è¯† âœ¨</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¾å›¢2026å±Šåç«¯ä¸€äºŒé¢ï¼ˆé™„è¯¦ç»†å‚è€ƒç­”æ¡ˆï¼‰]]></title>    <link>https://juejin.cn/post/7576853741757300770</link>    <guid>https://juejin.cn/post/7576853741757300770</guid>    <pubDate>2025-11-26T09:16:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576853741757300770" data-draft-id="7576827115968102435" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¾å›¢2026å±Šåç«¯ä¸€äºŒé¢ï¼ˆé™„è¯¦ç»†å‚è€ƒç­”æ¡ˆï¼‰"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2025-11-26T09:16:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JavaGuide"/> <meta itemprop="url" content="https://juejin.cn/user/166781497383294"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¾å›¢2026å±Šåç«¯ä¸€äºŒé¢ï¼ˆé™„è¯¦ç»†å‚è€ƒç­”æ¡ˆï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/166781497383294/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JavaGuide
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T09:16:09.000Z" title="Wed Nov 26 2025 09:16:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»24åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2026 å±Šç§‹æ‹›é™†ç»­å¼€å¥–å…¬å¸çš„è¶Šæ¥è¶Šå¤šäº†ï¼Œå¤§å®¶æ¯”è¾ƒæœŸå¾…çš„ç¾å›¢ä¹Ÿå¼€äº†ï¼</p>
<p>æ ¹æ®ç½‘ä¸Šå·²ç»çˆ†å‡ºçš„è–ªèµ„æ¥çœ‹ï¼Œä¸‹é¢æ˜¯ç¾å›¢åç«¯å’Œå…¶ä»–éƒ¨åˆ†å²—ä½ä»Šå¹´å·²ç»å¼€å¥–çš„è–ªèµ„æƒ…å†µï¼š</p>
<ul>
<li>åç«¯ï¼š23k * 15.5ï¼ŒåŒ—äº¬ï¼Œç™½èœï¼Œ</li>
<li>åç«¯ï¼šï¼ˆ25~26)k * 15.5ï¼ŒåŒ—äº¬ï¼Œå° SP</li>
<li>åç«¯ï¼š28k * 15.5ï¼ŒåŒ—äº¬ï¼Œå¤§ SPï¼Œ</li>
<li>åç«¯ï¼šï¼ˆ30~32ï¼‰k * 15.5ï¼ŒåŒ—äº¬ï¼ŒSSP</li>
<li>å‰ç«¯ï¼š23k * 15.5ï¼ŒåŒ—äº¬ï¼Œç™½èœ</li>
<li>æµ‹å¼€ï¼š23K*15.5ï¼ŒåŒ—äº¬ï¼Œç™½èœ</li>
<li>å¤§æ¨¡å‹ï¼ˆåŒ—æ–—è®¡åˆ’ï¼‰ï¼š48*15.5ï¼ŒåŒ—äº¬</li>
</ul>
<p>å’Œå»å¹´å¼€çš„å·®ä¸å¤šï¼ŒåŒºåˆ«ä¸å¤§ï¼åç«¯ç™½èœå¹´åŒ…ä¹Ÿæœ‰æ¥è¿‘ 35.5w+ ï¼Œè¿˜æ˜¯ä¸é”™çš„ã€‚ç¾å›¢çš„å…¬ç§¯é‡‘ç¼´çº³æ¯”ä¾‹å„åœ°ä¸åŒï¼ŒåŒ—äº¬å¯è¾¾ 12%ï¼Œä¸Šæµ·ä¸º 7%ï¼Œæˆéƒ½ä¸º 8%ã€‚</p>
<p>ç¾å›¢å¯¹æ–°äººçš„åŸ¹å…»è¿˜æ˜¯ä¸é”™çš„ï¼Œæœ‰å¾ˆå¤šåŸ¹è®­çš„è¯¾ç¨‹ï¼Œå…¬å¸é‡Œä¹Ÿæœ‰å¾ˆå¤šæŠ€æœ¯å¤§ä½¬ã€‚ä½ å¹³æ—¶å¦‚æœçœ‹ç¾å›¢æŠ€æœ¯å›¢é˜Ÿçš„æ–‡ç« çš„è¯ï¼Œåº”è¯¥å¯¹ç¾å›¢çš„æŠ€æœ¯æ°´å¹³æ˜¯æ¯”è¾ƒè®¤å¯çš„ã€‚å›¢é˜Ÿæ°›å›´çš„è¯ï¼Œè¿™ä¸ªè¦çœ‹å…·ä½“çš„é¡¹ç›®ç»„ï¼Œå¤§éƒ¨åˆ†åº”è¯¥éƒ½æ˜¯æ¯”è¾ƒå’Œè°çš„ã€‚</p>
<p>ä¸‹é¢æ˜¯æ˜Ÿçƒé‡Œä¸€ä½åœ¨ç¾å›¢å®ä¹ å¹¶è½¬æ­£çš„çƒå‹å¯¹ç¾å›¢çš„ä¸€äº›æ„Ÿå—ï¼š</p>
<blockquote>
<p>åˆšè¿›å…¥ç¾å›¢å®ä¹ æ—¶ï¼Œæˆ‘å¯¹ç¾å›¢çš„å®Œå–„çš„åŸºç ”ä½“ç³»æ„Ÿåˆ°éœ‡æƒŠï¼ˆç›¸è¾ƒäºå­¦æ ¡è€Œè¨€ï¼‰ã€‚å¤§éƒ¨åˆ†æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ç°æˆçš„è§£å†³æ–¹æ¡ˆï¼Œè€Œä¸éœ€è¦é‡å¤é€ è½®å­ã€‚æ­¤å¤–ï¼Œç¾å›¢è¿˜æœ‰å®Œå–„çš„å†…éƒ¨æ–‡æ¡£ç³»ç»Ÿï¼Œå¤§å®¶éƒ½å†™å¾—å¾ˆå¥½ï¼ˆè¿™ç‚¹è®©æˆ‘æœ‰ç‚¹å·ï¼‰ã€‚åœ¨å®ä¹ çš„ä¸‰ä¸ªæœˆé‡Œï¼Œæˆ‘ä¹Ÿç»å†äº†ä¸€äº›å›°éš¾å’Œå‹åŠ›ï¼Œä½†æ˜¯æˆ‘æ„è¯†åˆ°æ‰“å·¥å°±æ˜¯è¿™æ ·ï¼Œä¸ç®¡å»å“ªé‡Œéƒ½æ˜¯ä¸€æ ·çš„ã€‚åœ¨å®ä¹ æœŸé—´ï¼Œæˆ‘æ›´å¤šåœ°å­¦ä¹ äº†ä¸€äº›æ€ç»´æ–¹å¼ï¼Œåšä¿¡åªè¦æˆ‘ä¸ä¼šçš„ä¸œè¥¿ï¼Œæˆ‘å°±å¯ä»¥å­¦ä¼šã€‚æ¯å¤©éƒ½å–å¾—ä¸€ç‚¹è¿›æ­¥ï¼Œä¿æŒå‰è¿›ã€‚</p>
</blockquote>
<p>ä»Šå¹´ç§‹æ‹›ä¹Ÿæœ‰ä¸å°‘çƒå‹è¿›äº†ç¾å›¢ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/11ec095ca4e1489bbe931de9f663550e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753368&amp;x-signature=W9FDgNEk4YNIhT4ovfSYJZLXRjQ%3D" alt="" loading="lazy"/></p>
<p>ç¾å›¢çš„é¢è¯•éš¾åº¦è¿˜æ˜¯ç›¸å¯¹åé«˜ä¸€ç‚¹çš„ï¼ŒæŠ€æœ¯ä¸€é¢å’ŒäºŒé¢å¯èƒ½åŠ èµ·æ¥èƒ½æ‹·æ‰“ä½ ä¸¤ä¸ªå¤šå°æ—¶ã€‚</p>
<p>ä¸‹é¢ç»™å¤§å®¶åˆ†äº«ä¸€ç¯‡ç¾å›¢ä»Šå¹´ç§‹æ‹›çš„åç«¯é¢ç»ã€‚æˆ‘ç²¾é€‰äº†ä¸€äºŒé¢ä¸­çš„ä¸€äº›æ¯”è¾ƒå…¸å‹çš„é¢è¯•é—®é¢˜è¿›è¡Œè§£ç­”ï¼Œ å¤§å®¶å¯ä»¥æ„Ÿå—ä¸€ä¸‹ç¾å›¢çš„é¢è¯•éš¾åº¦å¦‚ä½•ã€‚</p>
<h2 data-id="heading-0">æ‹·æ‰“é¡¹ç›®</h2>
<p>é¢è¯•å¯¹ç€é¡¹ç›®æé—®æ¶æ„è®¾è®¡ä»¥åŠä¸€äº›åŠŸèƒ½çš„å¼€å‘æ€è·¯ã€‚</p>
<p>è¿™é‡Œè®°å½•ä¸€äº›æ¯”è¾ƒæœ‰ä»£è¡¨æ€§çš„é¡¹ç›®æ‹·æ‰“é—®é¢˜ï¼Œæ¶‰åŠå¤ªé¡¹ç›®ç»†èŠ‚çš„éƒ¨åˆ†å°±çœç•¥äº†ã€‚</p>
<h3 data-id="heading-1">ä½ ä¸ºä»€ä¹ˆé€‰æ‹© JWT åšèº«ä»½éªŒè¯ï¼Ÿ</h3>
<p>ç›¸æ¯”äº Session è®¤è¯çš„æ–¹å¼æ¥è¯´ï¼Œä½¿ç”¨ JWT è¿›è¡Œèº«ä»½è®¤è¯ä¸»è¦æœ‰ä¸‹é¢ 4 ä¸ªä¼˜åŠ¿ï¼š</p>
<ol>
<li><strong>æ— çŠ¶æ€</strong>ï¼šJWT è‡ªèº«åŒ…å«äº†èº«ä»½éªŒè¯æ‰€éœ€è¦çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬çš„æœåŠ¡å™¨ä¸éœ€è¦å­˜å‚¨ Session ä¿¡æ¯ã€‚è¿™æ˜¾ç„¶å¢åŠ äº†ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œä¼¸ç¼©æ€§ï¼Œå¤§å¤§å‡è½»äº†æœåŠ¡ç«¯çš„å‹åŠ›ã€‚ä¸è¿‡ï¼Œä¹Ÿæ­£æ˜¯ç”±äº JWT çš„æ— çŠ¶æ€ï¼Œä¹Ÿå¯¼è‡´äº†å®ƒæœ€å¤§çš„ç¼ºç‚¹ï¼š<strong>ä¸å¯æ§ï¼</strong></li>
<li><strong>æœ‰æ•ˆé¿å…äº† CSRF æ”»å‡»</strong>ï¼šä½¿ç”¨ JWT è¿›è¡Œèº«ä»½éªŒè¯ä¸éœ€è¦ä¾èµ– Cookie ï¼Œå› æ­¤å¯ä»¥é¿å… CSRF æ”»å‡»ã€‚</li>
<li><strong>é€‚åˆç§»åŠ¨ç«¯åº”ç”¨</strong>ï¼šä½¿ç”¨ Session è¿›è¡Œèº«ä»½è®¤è¯çš„è¯ï¼Œéœ€è¦ä¿å­˜ä¸€ä»½ä¿¡æ¯åœ¨æœåŠ¡å™¨ç«¯ï¼Œè€Œä¸”è¿™ç§æ–¹å¼ä¼šä¾èµ–åˆ° Cookieï¼ˆéœ€è¦ Cookie ä¿å­˜ <code>SessionId</code>ï¼‰ï¼Œæ‰€ä»¥ä¸é€‚åˆç§»åŠ¨ç«¯ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨ JWT è¿›è¡Œèº«ä»½è®¤è¯å°±ä¸ä¼šå­˜åœ¨è¿™ç§é—®é¢˜ï¼Œå› ä¸ºåªè¦ JWT å¯ä»¥è¢«å®¢æˆ·ç«¯å­˜å‚¨å°±èƒ½å¤Ÿä½¿ç”¨ï¼Œè€Œä¸” JWT è¿˜å¯ä»¥è·¨è¯­è¨€ä½¿ç”¨ã€‚</li>
<li><strong>å•ç‚¹ç™»å½•å‹å¥½</strong>ï¼šä½¿ç”¨ Session è¿›è¡Œèº«ä»½è®¤è¯çš„è¯ï¼Œå®ç°å•ç‚¹ç™»å½•ï¼Œéœ€è¦æˆ‘ä»¬æŠŠç”¨æˆ·çš„ Session ä¿¡æ¯ä¿å­˜åœ¨ä¸€å°ç”µè„‘ä¸Šï¼Œå¹¶ä¸”è¿˜ä¼šé‡åˆ°å¸¸è§çš„ Cookie è·¨åŸŸçš„é—®é¢˜ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨ JWT è¿›è¡Œè®¤è¯çš„è¯ï¼Œ JWT è¢«ä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼Œä¸ä¼šå­˜åœ¨è¿™äº›é—®é¢˜ã€‚</li>
</ol>
<p>ä½† JWT å¹¶ä¸æ˜¯é“¶å¼¹ï¼Œä¾ç„¶å­˜åœ¨å¾ˆå¤šé—®é¢˜éœ€è¦è§£å†³ï¼Œä¾‹å¦‚ï¼š</p>
<ol>
<li><strong>æ³¨é”€ç™»å½•ç­‰åœºæ™¯ä¸‹ JWT è¿˜æœ‰æ•ˆ</strong>ï¼šè¿™ä¸ªé—®é¢˜ä¸å­˜åœ¨äº Session è®¤è¯æ–¹å¼ä¸­ï¼Œå› ä¸ºåœ¨ Session è®¤è¯æ–¹å¼ä¸­ï¼Œé‡åˆ°è¿™ç§æƒ…å†µçš„è¯æœåŠ¡ç«¯åˆ é™¤å¯¹åº”çš„ Session è®°å½•å³å¯ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨ JWT è®¤è¯çš„æ–¹å¼å°±ä¸å¥½è§£å†³äº†ã€‚æˆ‘ä»¬ä¹Ÿè¯´è¿‡äº†ï¼ŒJWT ä¸€æ—¦æ´¾å‘å‡ºå»ï¼Œå¦‚æœåç«¯ä¸å¢åŠ å…¶ä»–é€»è¾‘çš„è¯ï¼Œå®ƒåœ¨å¤±æ•ˆä¹‹å‰éƒ½æ˜¯æœ‰æ•ˆçš„ã€‚</li>
<li><strong>ç»­ç­¾é—®é¢˜</strong>ï¼šJWT é€šå¸¸æœ‰ä¸€ä¸ªæœ‰æ•ˆæœŸï¼ˆ<code>exp</code> å­—æ®µï¼‰ï¼Œå½“ä»¤ç‰Œè¿‡æœŸæ—¶ï¼Œç”¨æˆ·éœ€è¦é‡æ–°ç™»å½•æˆ–è·å–ä¸€ä¸ªæ–°çš„ä»¤ç‰Œï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ç»­ç­¾ï¼ˆrefreshï¼‰é—®é¢˜ã€‚</li>
<li><strong>JWT ä½“ç§¯å¤ªå¤§</strong>ï¼šJWT ç»“æ„å¤æ‚ï¼ˆHeaderã€Payload å’Œ Signatureï¼‰ï¼ŒåŒ…å«äº†æ›´å¤šé¢å¤–çš„ä¿¡æ¯ï¼Œè¿˜éœ€è¦è¿›è¡Œ Base64Url ç¼–ç ï¼Œè¿™ä¼šä½¿å¾— JWT ä½“ç§¯è¾ƒå¤§ï¼Œå¢åŠ äº†ç½‘ç»œä¼ è¾“çš„å¼€é”€ã€‚</li>
</ol>
<p>å®é™…é¡¹ç›®ä¸­ï¼Œä¸ç”¨ JWT ç›´æ¥ä½¿ç”¨æ™®é€šçš„ Token(éšæœºç”Ÿæˆçš„ IDï¼Œä¸åŒ…å«å…·ä½“çš„ä¿¡æ¯) ç»“åˆ Redis æ¥åšèº«ä»½è®¤è¯ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ä¼ ç»Ÿçš„ Token é€šå¸¸åªæ˜¯ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå¯¹åº”çš„ä¿¡æ¯ï¼ˆä¾‹å¦‚ç”¨æˆ· IDã€Token è¿‡æœŸæ—¶é—´ã€æƒé™ä¿¡æ¯ï¼‰å­˜å‚¨åœ¨æœåŠ¡ç«¯ï¼Œé€šå¸¸ä¼šé€šè¿‡ Redis ä¿å­˜ã€‚ä¼ ç»Ÿ Token ä½“ç§¯æ›´å°ï¼Œä¹Ÿæ›´å®¹æ˜“è§£å†³ JWT å­˜åœ¨çš„ä¸€äº›é—®é¢˜ã€‚</p>
<p>å…³äº JWT çš„è¯¦ç»†ä»‹ç»ä»¥åŠå¸¸è§é—®é¢˜çš„è§£å†³å¯ä»¥é˜…è¯»æˆ‘å†™çš„è¿™ä¸¤ç¯‡æ–‡ç« ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fsystem-design%2Fsecurity%2Fjwt-intro.html" target="_blank" title="https://javaguide.cn/system-design/security/jwt-intro.html" ref="nofollow noopener noreferrer">JWT åŸºç¡€æ¦‚å¿µè¯¦è§£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fsystem-design%2Fsecurity%2Fadvantages-and-disadvantages-of-jwt.html" target="_blank" title="https://javaguide.cn/system-design/security/advantages-and-disadvantages-of-jwt.html" ref="nofollow noopener noreferrer">JWT èº«ä»½è®¤è¯ä¼˜ç¼ºç‚¹åˆ†æ</a></li>
</ul>
<h3 data-id="heading-2">æ•æ„Ÿè¯è„±æ•å¦‚ä½•å®ç°çš„ï¼Ÿ</h3>
<p>åç«¯è¿”å›æ•°æ®ç»™å‰ç«¯çš„æ—¶å€™ï¼Œä¸€èˆ¬éœ€è¦å¯¹æ•æ„Ÿè¯è„±æ•ï¼Œç±»ä¼¼äºä¸‹é¢è¿™æ ·ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1aa14b01e5a248659b9aa1df73610a24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753368&amp;x-signature=xb4PvQUciKIkHApPuXYl%2BNnzn9o%3D" alt="" loading="lazy"/></p>
<p>è„±æ•çš„è§„åˆ™æœ‰å¾ˆå¤šç§ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>æ›¿æ¢(å¸¸ç”¨)ï¼šå°†æ•æ„Ÿæ•°æ®ä¸­çš„ç‰¹å®šå­—ç¬¦æˆ–å­—ç¬¦åºåˆ—æ›¿æ¢ä¸ºå…¶ä»–å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œå°†ä¿¡ç”¨å¡å·ä¸­çš„ä¸­é—´å‡ ä½æ•°å­—æ›¿æ¢ä¸ºæ˜Ÿå·ï¼ˆ*ï¼‰æˆ–å…¶ä»–å­—ç¬¦ã€‚</li>
<li>åˆ é™¤ï¼šå°†æ•æ„Ÿæ•°æ®ä¸­çš„éƒ¨åˆ†å†…å®¹éšæœºåˆ é™¤ã€‚ä¾‹å¦‚ï¼Œå°†ç”µè¯å·ç çš„éšæœº 3 ä½æ•°å­—è¿›è¡Œåˆ é™¤ã€‚</li>
<li>é‡æ’ï¼šå°†åŸå§‹æ•°æ®ä¸­çš„æŸäº›å­—ç¬¦æˆ–å­—æ®µçš„é¡ºåºæ‰“ä¹±ã€‚ä¾‹å¦‚ï¼Œå°†èº«ä»½è¯å·ç çš„éšæœºä½äº¤é”™äº’æ¢ã€‚</li>
<li>åŠ å™ªï¼šåœ¨æ•°æ®ä¸­æ³¨å…¥ä¸€äº›è¯¯å·®æˆ–è€…å™ªéŸ³ï¼Œè¾¾åˆ°å¯¹æ•°æ®è„±æ•çš„æ•ˆæœã€‚ä¾‹å¦‚ï¼Œåœ¨æ•æ„Ÿæ•°æ®ä¸­æ·»åŠ ä¸€äº›éšæœºç”Ÿæˆçš„å­—ç¬¦ã€‚</li>
<li>......</li>
</ul>
<p>è¿™é‡Œä»¥æœ€å¸¸ç”¨çš„æ›¿æ¢ä¸ºä¾‹è¿›è¡Œä»‹ç»ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘çš„é¡¹ç›®ç”¨åˆ°çš„æ–¹æ³•ã€‚</p>
<p>æˆ‘æ˜¯åˆ©ç”¨ Hutool æä¾›çš„ <code>DesensitizedUtil</code>è„±æ•å·¥å…·ç±»é…åˆ Jackson é€šè¿‡æ³¨è§£çš„æ–¹å¼å®Œæˆæ•°æ®è„±æ•çš„ã€‚</p>
<p>å¦‚æœä¸æƒ³å¼•å…¥ Hutool çš„è¯ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å®ç°ä¸€ä¸ªè„±æ•å·¥å…·ç±»ï¼Œå®ç°é€»è¾‘éå¸¸ç®€å•ã€‚</p>
<p>è¯¦ç»†ä»‹ç»å¯ä»¥çœ‹ç¬”è€…å†™çš„è¿™ç¯‡æ–‡ç« ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FvVhB8uJBz4WMlOZHJ2Zbog" target="_blank" title="https://mp.weixin.qq.com/s/vVhB8uJBz4WMlOZHJ2Zbog" ref="nofollow noopener noreferrer">ä½ çš„é¡¹ç›®æ•æ„Ÿè¯è„±æ•æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</a> ã€‚</p>
<h3 data-id="heading-3">è®²ä¸€ä¸‹ MySQL åŒæ­¥ ES çš„å®ç°</h3>
<p>ä½¿ç”¨ Canal å¯ä»¥åšåˆ°ä¸šåŠ¡ä»£ç å®Œå…¨è§£è€¦ï¼ŒAPI å®Œå…¨è§£è€¦ï¼Œé›¶ä»£ç å®ç°å‡†å®æ—¶åŒæ­¥, Canal é€šè¿‡è§£æ MySQL çš„ binlog æ—¥å¿—æ–‡ä»¶è¿›è¡Œæ•°æ®åŒæ­¥ã€‚</p>
<p>Canal çš„åŸç†æœ¬è´¨ä¸Šæ˜¯ <strong>æ¨¡æ‹Ÿäº† MySQL çš„ä¸»ä»å¤åˆ¶åè®®</strong> ï¼š</p>
<ol>
<li><strong>ä¼ªè£…æˆä»åº“ (Slave)ï¼š</strong> Canal Server ä¼šå‘ MySQL Master å‘é€å’Œæ ‡å‡† MySQL Slave å®Œå…¨ä¸€æ ·çš„æ¡æ‰‹åŒ…ï¼Œå°†è‡ªå·±ä¼ªè£…æˆä¸€ä¸ªä»åº“ã€‚</li>
<li><strong>è®¢é˜… Binlogï¼š</strong> MySQL Master éªŒè¯é€šè¿‡åï¼Œå°±ä¼šæŠŠå®ƒå½“æˆä¸€ä¸ªçœŸæ­£çš„ä»åº“ã€‚ä» Canal æŒ‡å®šçš„ä½ç‚¹ï¼ˆPosition æˆ– GTIDï¼‰å¼€å§‹ï¼ŒæŒç»­åœ°ã€æµå¼åœ°æŠŠäºŒè¿›åˆ¶æ—¥å¿—ï¼ˆBinlogï¼‰æ¨é€ç»™ Canalã€‚Binlog è®°å½•äº†æ•°æ®åº“ä¸­æ‰€æœ‰çš„æ•°æ®å˜æ›´æ“ä½œï¼ˆINSERT, UPDATE, DELETEï¼‰ã€‚</li>
<li><strong>è§£æä¸æŠ•é€’ï¼š</strong> Canal æ¥æ”¶åˆ°è¿™äº›åŸå§‹çš„äºŒè¿›åˆ¶æ—¥å¿—æµåï¼Œä¼šåœ¨å†…éƒ¨è¿›è¡Œè§£æï¼Œå°†å®ƒä»¬è½¬æ¢æˆç»“æ„åŒ–çš„ã€æ˜“äºæ¶ˆè´¹çš„æ•°æ®æ ¼å¼ï¼ˆæ¯”å¦‚ JSONï¼‰ã€‚æœ€åï¼Œå†å°†è¿™äº›ç»“æ„åŒ–çš„å˜æ›´äº‹ä»¶æŠ•é€’å‡ºå»ï¼Œé€šå¸¸æ˜¯æŠ•é€’åˆ°åƒ Kafka æˆ– RocketMQ è¿™æ ·çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œç”±ä¸‹æ¸¸çš„æ¶ˆè´¹ç¨‹åºï¼ˆæ¯”å¦‚æˆ‘ä»¬çš„åŒæ­¥æœåŠ¡ï¼‰è®¢é˜…å¹¶å†™å…¥åˆ° Elasticsearchã€‚</li>
</ol>
<p>ä¸è¿‡ï¼ŒCanal ä»…ä»…æ”¯æŒå¢é‡åŒæ­¥ã€‚å®é™…é¡¹ç›®ä¸­ï¼Œå¯ä»¥å€ŸåŠ©å…¨é‡å¯¼å…¥å·¥å…·å®ç°å…¨é‡åŒæ­¥ï¼Œä¾‹å¦‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Falibaba%2FDataX" target="_blank" title="https://github.com/alibaba/DataX" ref="nofollow noopener noreferrer">Datax</a> ï¼Œåç»­å†é€šè¿‡ Canal å®ç°å¢é‡åŒæ­¥ï¼Œç›¸å¯¹æ¯”è¾ƒéº»çƒ¦ã€‚</p>
<p>ä¸ºäº†è¿›ä¸€æ­¥æé«˜ç³»ç»Ÿæ€§èƒ½å’Œå¯ç»´æŠ¤æ€§ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå¼•å…¥æ¶ˆæ¯é˜Ÿåˆ— (MQ) ä½œä¸ºä¸­é—´å±‚ï¼Œè§£è€¦ Canal å’Œ Elasticsearchï¼Œ</p>
<p>å¼•å…¥ MQ çš„ä¼˜åŠ¿:</p>
<ul>
<li><strong>å¼‚æ­¥å¤„ç†:</strong> Canal å°†æ•°æ®å˜æ›´æ¶ˆæ¯å‘é€åˆ° MQ åï¼Œæ— éœ€ç­‰å¾… ES å¤„ç†å®Œæˆå³å¯è¿”å›ï¼Œæé«˜ Canal çš„ååé‡ã€‚</li>
<li><strong>æµé‡æ§åˆ¶:</strong> MQ ä½œä¸ºç¼“å†²åŒºï¼Œå¯ä»¥å‰Šå³°å¡«è°·ï¼Œé¿å… Elasticsearch ç¬æ—¶å†™å…¥å‹åŠ›è¿‡å¤§ã€‚</li>
<li><strong>æ•°æ®å¤„ç†:</strong> å¯ä»¥åœ¨æ¶ˆè´¹ MQ æ¶ˆæ¯çš„è¿‡ç¨‹ä¸­è¿›è¡Œæ•°æ®æ¸…æ´—ã€è½¬æ¢ç­‰æ“ä½œï¼Œä¾‹å¦‚æ•°æ®æ ¼å¼åŒ–ã€å­—æ®µæ˜ å°„ç­‰ã€‚</li>
<li><strong>ç³»ç»Ÿè§£è€¦:</strong> Canal å’Œ Elasticsearch ä¹‹é—´ä¸å†ç›´æ¥ä¾èµ–ï¼Œæé«˜ç³»ç»Ÿçš„å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</li>
</ul>
<p>å¼•å…¥ MQ åï¼ŒMySQL æ•°æ®åŒæ­¥åˆ° Elasticsearch çš„æµç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4374febf287491da7a99c3d9fea60fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753368&amp;x-signature=9IjbF4vEorQyUbGKA9owS42guGU%3D" alt="" loading="lazy"/></p>
<ol>
<li><strong>ç›‘å¬è§£æ:</strong> Canal è¯»å– binlogï¼Œè§£æå˜æ›´äº‹ä»¶ã€‚</li>
<li><strong>å‘é€æ¶ˆæ¯:</strong> Canal å°†äº‹ä»¶å°è£…æˆæ¶ˆæ¯å‘é€åˆ° MQã€‚</li>
<li><strong>æ¶ˆè´¹æ¶ˆæ¯:</strong> æ¶ˆè´¹ç«¯ç›‘å¬ MQï¼Œè·å–å˜æ›´æ¶ˆæ¯ã€‚</li>
<li><strong>åŒæ­¥æ•°æ®:</strong> æ¶ˆè´¹ç«¯å¤„ç†æ¶ˆæ¯ï¼Œæ›´æ–° Elasticsearch ç´¢å¼•ã€‚</li>
</ol>
<p>Canal ä» 1.1.1 ç‰ˆæœ¬å¼€å§‹ï¼Œé»˜è®¤æ”¯æŒå°†æ¥æ”¶åˆ°çš„ binlog æ•°æ®ç›´æ¥æŠ•é€’åˆ° MQï¼Œç®€åŒ–äº†é›†æˆæµç¨‹ã€‚ ä½ åªéœ€è¦é…ç½® Canal è¿æ¥ MQ çš„ç›¸å…³ä¿¡æ¯ï¼Œå³å¯å®ç° Canal ä¸ MQ çš„è”åŠ¨ã€‚</p>
<h3 data-id="heading-4">é¡¹ç›®ä¸­ç”¨äº†å“ªäº›å¤šçº¿ç¨‹çš„çŸ¥è¯†</h3>
<p>åœ¨æˆ‘ä»¬çš„è®¢å•ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·ä¸‹å•æˆåŠŸåï¼Œç³»ç»Ÿéœ€è¦æ‰§è¡Œä¸€ç³»åˆ—éæ ¸å¿ƒçš„åç»­æ“ä½œï¼Œæ¯”å¦‚ï¼šå‘é€ä¸‹å•æˆåŠŸçŸ­ä¿¡ã€ä¸ºç”¨æˆ·å¢åŠ ç§¯åˆ†ã€é€šçŸ¥ç‰©æµç³»ç»Ÿå¤‡è´§ã€‚è¿™äº›æ“ä½œéƒ½æ¯”è¾ƒè€—æ—¶ï¼Œå¦‚æœè®©ç”¨æˆ·åœ¨ä¸‹å•æ¥å£é‡ŒåŒæ­¥ç­‰å¾…å®ƒä»¬å…¨éƒ¨å®Œæˆï¼Œä¼šå¯¼è‡´æ¥å£å“åº”æ—¶é—´å˜å¾—å¾ˆé•¿ï¼Œä½“éªŒå¾ˆå·®ã€‚</p>
<p>æˆ‘çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œ å°†è¿™äº›éæ ¸å¿ƒæ“ä½œå…¨éƒ¨æŠ½å–æˆç‹¬ç«‹çš„ Service æ–¹æ³•ï¼Œå¹¶ç”¨ <code>@Async</code> æ³¨è§£æ ‡è®°ï¼Œå°†å®ƒä»¬å¼‚æ­¥åŒ–ã€‚è¿™æ ·ï¼Œä¸»ä¸‹å•æµç¨‹å¯ä»¥è¿…é€Ÿå®Œæˆå¹¶å‘ç”¨æˆ·è¿”å›æˆåŠŸï¼Œè€Œè¿™äº›è€—æ—¶æ“ä½œåˆ™è¢«æäº¤åˆ°åå°çº¿ç¨‹æ± ä¸­æ…¢æ…¢æ‰§è¡Œï¼Œæå¤§åœ°ä¼˜åŒ–äº†ä¸»æµç¨‹çš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚</p>
<p><code>@Async</code> æ³¨è§£ç”± Spring æ¡†æ¶æä¾›ï¼Œè¢«è¯¥æ³¨è§£æ ‡æ³¨çš„ç±»æˆ–æ–¹æ³•ä¼šåœ¨ <strong>å¼‚æ­¥çº¿ç¨‹</strong> ä¸­æ‰§è¡Œã€‚è¿™æ„å‘³ç€å½“æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œè°ƒç”¨è€…å°†ä¸ä¼šç­‰å¾…è¯¥æ–¹æ³•æ‰§è¡Œå®Œæˆï¼Œè€Œæ˜¯å¯ä»¥ç»§ç»­æ‰§è¡Œåç»­çš„ä»£ç ã€‚</p>
<p><code>@Async</code> æ³¨è§£çš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œéœ€è¦ä¸¤ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>åœ¨å¯åŠ¨ç±»ä¸Šæ·»åŠ æ³¨è§£ <code>@EnableAsync</code> ï¼Œå¼€å¯å¼‚æ­¥ä»»åŠ¡ã€‚</li>
<li>åœ¨éœ€è¦å¼‚æ­¥æ‰§è¡Œçš„æ–¹æ³•æˆ–ç±»ä¸Šæ·»åŠ æ³¨è§£ <code>@Async</code> ã€‚</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-comment">// å¼€å¯å¼‚æ­¥ä»»åŠ¡</span>
<span class="hljs-meta">@EnableAsync</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">YourApplication</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        SpringApplication.run(YourApplication.class, args);
    }
}

<span class="hljs-comment">// å¼‚æ­¥æœåŠ¡ç±»</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyService</span> {

    <span class="hljs-comment">// æ¨èä½¿ç”¨è‡ªå®šä¹‰çº¿ç¨‹æ± ï¼Œè¿™é‡Œåªæ˜¯æ¼”ç¤ºåŸºæœ¬ç”¨æ³•</span>
    <span class="hljs-meta">@Async</span>
    <span class="hljs-keyword">public</span> CompletableFuture&lt;String&gt; <span class="hljs-title function_">doSomethingAsync</span><span class="hljs-params">()</span> {

        <span class="hljs-comment">// è¿™é‡Œä¼šæœ‰ä¸€äº›ä¸šåŠ¡è€—æ—¶æ“ä½œ</span>
        <span class="hljs-comment">// ...</span>
        <span class="hljs-comment">// ä½¿ç”¨ CompletableFuture å¯ä»¥æ›´æ–¹ä¾¿åœ°å¤„ç†å¼‚æ­¥ä»»åŠ¡çš„ç»“æœï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹</span>
        <span class="hljs-keyword">return</span> CompletableFuture.completedFuture(<span class="hljs-string">"Async Task Completed"</span>);
    }

}
</code></pre>
<h3 data-id="heading-5">ä½¿ç”¨ @Async æ³¨è§£å®ç°å¼‚æ­¥æœ‰ä»€ä¹ˆéœ€è¦æ³¨æ„çš„å—ï¼Ÿæ‰§è¡Œå‡ºç°å¼‚å¸¸æ€ä¹ˆåŠï¼Ÿ</h3>
<p>å¦‚æœæ²¡æœ‰æ˜¾å¼åœ°é…ç½®çº¿ç¨‹æ± ï¼Œåœ¨ <code>@Async</code> åº•å±‚ä¼šå…ˆåœ¨ <code>BeanFactory</code> ä¸­å°è¯•è·å–çº¿ç¨‹æ± ï¼Œå¦‚æœè·å–ä¸åˆ°ï¼Œåˆ™ä¼šåˆ›å»ºä¸€ä¸ª <code>SimpleAsyncTaskExecutor</code> å®ç°ã€‚<code>SimpleAsyncTaskExecutor</code> æœ¬è´¨ä¸Šä¸ç®—æ˜¯ä¸€ä¸ªçœŸæ­£çš„çº¿ç¨‹æ± ï¼Œå› ä¸ºå®ƒå¯¹äºæ¯ä¸ªè¯·æ±‚éƒ½ä¼šå¯åŠ¨ä¸€ä¸ªæ–°çº¿ç¨‹è€Œä¸é‡ç”¨ç°æœ‰çº¿ç¨‹ï¼Œè¿™ä¼šå¸¦æ¥ä¸€äº›æ½œåœ¨çš„é—®é¢˜ï¼Œä¾‹å¦‚èµ„æºæ¶ˆè€—è¿‡å¤§ã€‚</p>
<p>ä¸€å®šè¦æ˜¾å¼é…ç½®ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œæ¨è<code>ThreadPoolTaskExecutor</code>ã€‚å¹¶ä¸”ï¼Œè¿˜å¯ä»¥æ ¹æ®ä»»åŠ¡çš„æ€§è´¨å’Œéœ€æ±‚ï¼Œä¸ºä¸åŒçš„å¼‚æ­¥æ–¹æ³•æŒ‡å®šä¸åŒçš„çº¿ç¨‹æ± ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableAsync</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncConfig</span> {

    <span class="hljs-meta">@Bean(name = "executor1")</span>
    <span class="hljs-keyword">public</span> Executor <span class="hljs-title function_">executor1</span><span class="hljs-params">()</span> {
        <span class="hljs-type">ThreadPoolTaskExecutor</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolTaskExecutor</span>();
        executor.setCorePoolSize(<span class="hljs-number">3</span>);
        executor.setMaxPoolSize(<span class="hljs-number">5</span>);
        executor.setQueueCapacity(<span class="hljs-number">50</span>);
        executor.setThreadNamePrefix(<span class="hljs-string">"AsyncExecutor1-"</span>);
        executor.initialize();
        <span class="hljs-keyword">return</span> executor;
    }

    <span class="hljs-meta">@Bean(name = "executor2")</span>
    <span class="hljs-keyword">public</span> Executor <span class="hljs-title function_">executor2</span><span class="hljs-params">()</span> {
        <span class="hljs-type">ThreadPoolTaskExecutor</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolTaskExecutor</span>();
        executor.setCorePoolSize(<span class="hljs-number">2</span>);
        executor.setMaxPoolSize(<span class="hljs-number">4</span>);
        executor.setQueueCapacity(<span class="hljs-number">100</span>);
        executor.setThreadNamePrefix(<span class="hljs-string">"AsyncExecutor2-"</span>);
        executor.initialize();
        <span class="hljs-keyword">return</span> executor;
    }
}
</code></pre>
<p>å¼‚æ­¥æ–¹æ³•ä¸­æŠ›å‡ºçš„å¼‚å¸¸é»˜è®¤ä¸ä¼šè¢«è°ƒç”¨è€…æ•è·ã€‚ä¸ºäº†ç®¡ç†è¿™äº›å¼‚å¸¸ï¼Œå»ºè®®ä½¿ç”¨<code>CompletableFuture</code>çš„å¼‚å¸¸å¤„ç†åŠŸèƒ½ï¼Œæˆ–è€…é…ç½®ä¸€ä¸ªå…¨å±€çš„<code>AsyncUncaughtExceptionHandler</code>æ¥å¤„ç†æ²¡æœ‰æ­£ç¡®æ•è·çš„å¼‚å¸¸ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableAsync</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">AsyncConfigurer</span>{

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> AsyncUncaughtExceptionHandler <span class="hljs-title function_">getAsyncUncaughtExceptionHandler</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomAsyncExceptionHandler</span>();
    }

}

<span class="hljs-comment">// è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomAsyncExceptionHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">AsyncUncaughtExceptionHandler</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleUncaughtException</span><span class="hljs-params">(Throwable ex, Method method, Object... params)</span> {
        <span class="hljs-comment">// æ—¥å¿—è®°å½•æˆ–å…¶ä»–å¤„ç†é€»è¾‘</span>
    }
}
</code></pre>
<p>JavaGuide ç½‘ç«™å¯¹è¿™å—å†…å®¹æœ‰è¯¦ç»†ä»‹ç»ï¼Œæ„Ÿå…´è¶£å¯ä»¥çœ‹çœ‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fsystem-design%2Fframework%2Fspring%2Fasync.html" target="_blank" title="https://javaguide.cn/system-design/framework/spring/async.html" ref="nofollow noopener noreferrer">Async æ³¨è§£åŸç†åˆ†æ</a>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8a95788770049708b27f5823fcb8899~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753368&amp;x-signature=PspGW8DNLpTpN3W7rfgRpao9Bvc%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-6">æ€ä¹ˆä½¿ç”¨ Arthas æ’æŸ¥é—®é¢˜çš„ï¼Ÿ</h3>
<p>å¯ä»¥å‚è€ƒç¬”è€…åˆ†äº«çš„è¿™ç¯‡æ–‡ç« ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fgi5IovECxwpX3v6OcMbQxA" target="_blank" title="https://mp.weixin.qq.com/s/gi5IovECxwpX3v6OcMbQxA" ref="nofollow noopener noreferrer">è‡ªä»å­¦ä¼š Arthasï¼Œæ—¥å¸¸å¼€å‘æ•ˆç‡ç›´æ¥èµ·é£ï¼</a>ã€‚</p>
<h3 data-id="heading-7">é¡¹ç›®ä¸­ Jmeter å‹æµ‹æ˜¯æ€ä¹ˆåšçš„</h3>
<p>åš JMeter å‹æµ‹ï¼Œä¸»è¦éµå¾ªå››æ­¥æµç¨‹ï¼š</p>
<ol>
<li><strong>è§„åˆ’</strong>ï¼šä¼šå…ˆå®šå¥½æ˜ç¡®çš„æ€§èƒ½ç›®æ ‡ï¼Œæ¯”å¦‚ QPS è¦è¾¾åˆ°å¤šå°‘ï¼Œå“åº”æ—¶é—´è¦ä½äºå¤šå°‘ã€‚</li>
<li><strong>å‡†å¤‡è„šæœ¬</strong>ï¼šç”¨ JMeter å†™å¥½è¯·æ±‚è„šæœ¬ï¼Œå¹¶ä¸”å¯¹ç”¨æˆ· IDã€å•†å“ ID è¿™äº›å˜é‡è¿›è¡Œå‚æ•°åŒ–ï¼Œè®©è¯·æ±‚æ›´çœŸå®ã€‚</li>
<li><strong>æ‰§è¡Œå’Œç›‘æ§</strong> ï¼šåœ¨ç”¨ JMeter åŠ å‹çš„åŒæ—¶ï¼Œæˆ‘ä»¬ä¼šé‡ç‚¹ç›‘æ§æœåŠ¡å™¨çš„ CPUã€å†…å­˜ã€GC ç­‰æŒ‡æ ‡ã€‚å› ä¸ºçœŸæ­£çš„ç“¶é¢ˆä¿¡æ¯åœ¨æœåŠ¡å™¨ç«¯ï¼Œè€Œä¸æ˜¯åœ¨ JMeter çš„æŠ¥å‘Šé‡Œã€‚</li>
<li><strong>åˆ†æå’Œè°ƒä¼˜</strong> ï¼š å‹æµ‹ç»“æŸåï¼Œæˆ‘ä»¬ä¼šæ ¹æ®ç›‘æ§æ•°æ®å’ŒæŠ¥å‘Šæ¥åˆ†æç“¶é¢ˆã€‚æ¯”å¦‚ï¼Œå¦‚æœæ˜¯ CPU é«˜äº†ï¼Œæˆ‘ä»¬å°±ç”¨ Arthas å»çœ‹çƒ­ç‚¹ä»£ç ï¼›å¦‚æœæ˜¯æ•°æ®åº“æ…¢äº†ï¼Œå°±å»ä¼˜åŒ– SQLã€‚ä¼˜åŒ–å®Œå†å‹ä¸€è½®ï¼Œç›´åˆ°è¾¾åˆ°ç›®æ ‡ä¸ºæ­¢ã€‚</li>
</ol>
<h2 data-id="heading-8">MySQL</h2>
<h3 data-id="heading-9">MySQL å­˜å‚¨å¼•æ“çŸ¥é“å“ªäº›ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«?</h3>
<p>MySQL æ”¯æŒå¤šç§å­˜å‚¨å¼•æ“ï¼Œä½ å¯ä»¥é€šè¿‡ <code>SHOW ENGINES</code> å‘½ä»¤æ¥æŸ¥çœ‹ MySQL æ”¯æŒçš„æ‰€æœ‰å­˜å‚¨å¼•æ“ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4370a86ad04844c0ac3ce0a63954d618~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753368&amp;x-signature=NFNWBdJctv97kb5ntAfJKwcXrRw%3D" alt="æŸ¥çœ‹ MySQL æä¾›çš„æ‰€æœ‰å­˜å‚¨å¼•æ“" loading="lazy"/></p>
<p>ä»ä¸Šå›¾æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹å‡ºï¼Œ MySQL å½“å‰é»˜è®¤çš„å­˜å‚¨å¼•æ“æ˜¯ InnoDBã€‚å¹¶ä¸”ï¼Œæ‰€æœ‰çš„å­˜å‚¨å¼•æ“ä¸­åªæœ‰ InnoDB æ˜¯äº‹åŠ¡æ€§å­˜å‚¨å¼•æ“ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰ InnoDB æ”¯æŒäº‹åŠ¡ã€‚</p>
<p>æˆ‘è¿™é‡Œä½¿ç”¨çš„ MySQL ç‰ˆæœ¬æ˜¯ 8.xï¼Œä¸åŒçš„ MySQL ç‰ˆæœ¬ä¹‹é—´å¯èƒ½ä¼šæœ‰å·®åˆ«ã€‚</p>
<p>MySQL 5.5.5 ä¹‹å‰ï¼ŒMyISAM æ˜¯ MySQL çš„é»˜è®¤å­˜å‚¨å¼•æ“ã€‚5.5.5 ç‰ˆæœ¬ä¹‹åï¼ŒInnoDB æ˜¯ MySQL çš„é»˜è®¤å­˜å‚¨å¼•æ“ã€‚</p>
<p>ä½ å¯ä»¥é€šè¿‡ <code>SELECT VERSION()</code> å‘½ä»¤æŸ¥çœ‹ä½ çš„ MySQL ç‰ˆæœ¬ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">mysql&gt; SELECT VERSION();
+-----------+
| VERSION() |
+-----------+
| 8.0.27    |
+-----------+
1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)
</code></pre>
<p>ä½ ä¹Ÿå¯ä»¥é€šè¿‡ <code>SHOW VARIABLES LIKE '%storage_engine%'</code> å‘½ä»¤ç›´æ¥æŸ¥çœ‹ MySQL å½“å‰é»˜è®¤çš„å­˜å‚¨å¼•æ“ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">mysql&gt; SHOW VARIABLES  LIKE <span class="hljs-string">'%storage_engine%'</span>;
+---------------------------------+-----------+
| Variable_name                   | Value     |
+---------------------------------+-----------+
| default_storage_engine          | InnoDB    |
| default_tmp_storage_engine      | InnoDB    |
| disabled_storage_engines        |           |
| internal_tmp_mem_storage_engine | TempTable |
+---------------------------------+-----------+
4 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)
</code></pre>
<p>å…³äº MyISAM å’Œ InnoDB çš„å¯¹æ¯”å†…å®¹è¾ƒå¤šï¼Œå¯ä»¥å‚è€ƒç¬”è€…å†™çš„è¿™ç¯‡æ–‡ç« ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fdatabase%2Fmysql%2Fmysql-questions-01.html" target="_blank" title="https://javaguide.cn/database/mysql/mysql-questions-01.html" ref="nofollow noopener noreferrer">MySQL å¸¸è§é¢è¯•é¢˜æ€»ç»“</a>ï¼ˆMySQL åŸºç¡€ã€å­˜å‚¨å¼•æ“ã€äº‹åŠ¡ã€ç´¢å¼•ã€é”ã€æ€§èƒ½ä¼˜åŒ–ç­‰ï¼‰ã€‚</p>
<p>æ›´å¤š MySQL é«˜é¢‘çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜æ€»ç»“ï¼Œå¯ä»¥é˜…è¯»ç¬”è€…å†™çš„è¿™å‡ ç¯‡æ–‡ç« ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fdatabase%2Fmysql%2Fmysql-index.html" target="_blank" title="https://javaguide.cn/database/mysql/mysql-index.html" ref="nofollow noopener noreferrer">MySQL ç´¢å¼•è¯¦è§£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fdatabase%2Fmysql%2Fmysql-logs.html" target="_blank" title="https://javaguide.cn/database/mysql/mysql-logs.html" ref="nofollow noopener noreferrer">MySQL ä¸‰å¤§æ—¥å¿—(binlogã€redo log å’Œ undo log)è¯¦è§£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fdatabase%2Fmysql%2Ftransaction-isolation-level.html" target="_blank" title="https://javaguide.cn/database/mysql/transaction-isolation-level.html" ref="nofollow noopener noreferrer">MySQL äº‹åŠ¡éš”ç¦»çº§åˆ«è¯¦è§£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fdatabase%2Fmysql%2Finnodb-implementation-of-mvcc.html" target="_blank" title="https://javaguide.cn/database/mysql/innodb-implementation-of-mvcc.html" ref="nofollow noopener noreferrer">InnoDB å­˜å‚¨å¼•æ“å¯¹ MVCC çš„å®ç°</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fdatabase%2Fmysql%2Fhow-sql-executed-in-mysql.html" target="_blank" title="https://javaguide.cn/database/mysql/how-sql-executed-in-mysql.html" ref="nofollow noopener noreferrer">SQL è¯­å¥åœ¨ MySQL ä¸­çš„æ‰§è¡Œè¿‡ç¨‹</a></li>
</ul>
<h3 data-id="heading-10">SELECT * ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆå—ï¼Ÿ</h3>
<p><code>SELECT *</code> ä¸ä¼šç›´æ¥å¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼ˆå¦‚æœä¸èµ°ç´¢å¼•å¤§æ¦‚ç‡æ˜¯å› ä¸º where æŸ¥è¯¢èŒƒå›´è¿‡å¤§å¯¼è‡´çš„ï¼‰ï¼Œä½†å®ƒå¯èƒ½ä¼šå¸¦æ¥ä¸€äº›å…¶ä»–çš„æ€§èƒ½é—®é¢˜æ¯”å¦‚é€ æˆç½‘ç»œä¼ è¾“å’Œæ•°æ®å¤„ç†çš„æµªè´¹ã€æ— æ³•ä½¿ç”¨ç´¢å¼•è¦†ç›–ã€‚</p>
<h3 data-id="heading-11">ç´¢å¼•å¤±æ•ˆçš„åŸå› æœ‰å“ªäº›ï¼Ÿ</h3>
<ol>
<li>åˆ›å»ºäº†ç»„åˆç´¢å¼•ï¼Œä½†æŸ¥è¯¢æ¡ä»¶æœªéµå®ˆæœ€å·¦åŒ¹é…åŸåˆ™;</li>
<li>åœ¨ç´¢å¼•åˆ—ä¸Šè¿›è¡Œè®¡ç®—ã€å‡½æ•°ã€ç±»å‹è½¬æ¢ç­‰æ“ä½œ;</li>
<li>ä»¥ % å¼€å¤´çš„ LIKE æŸ¥è¯¢æ¯”å¦‚ <code>LIKE '%abc';</code>;</li>
<li>æŸ¥è¯¢æ¡ä»¶ä¸­ä½¿ç”¨ ORï¼Œä¸” OR çš„å‰åæ¡ä»¶ä¸­æœ‰ä¸€ä¸ªåˆ—æ²¡æœ‰ç´¢å¼•ï¼Œæ¶‰åŠçš„ç´¢å¼•éƒ½ä¸ä¼šè¢«ä½¿ç”¨åˆ°;</li>
<li>IN çš„å–å€¼èŒƒå›´è¾ƒå¤§æ—¶ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Œèµ°å…¨è¡¨æ‰«æ(NOT IN å’Œ IN çš„å¤±æ•ˆåœºæ™¯ç›¸åŒ);</li>
<li>å‘ç”Ÿ<a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fdatabase%2Fmysql%2Findex-invalidation-caused-by-implicit-conversion.html" title="https://javaguide.cn/database/mysql/index-invalidation-caused-by-implicit-conversion.html" target="_blank" ref="nofollow noopener noreferrer">éšå¼è½¬æ¢</a>;</li>
</ol>
<h3 data-id="heading-12">MySQL çš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆ?å¯ä»¥è§£å†³å¹»è¯»é—®é¢˜å—ï¼Ÿ</h3>
<p>ç®€åŒ–ç‰ˆå‚è€ƒç­”æ¡ˆï¼šMySQL InnoDB å­˜å‚¨å¼•æ“çš„é»˜è®¤æ”¯æŒçš„éš”ç¦»çº§åˆ«æ˜¯ <strong>REPEATABLE-READï¼ˆå¯é‡è¯»ï¼‰</strong>ã€‚æ ‡å‡†çš„ SQL éš”ç¦»çº§åˆ«å®šä¹‰é‡Œï¼ŒREPEATABLE-READ(å¯é‡å¤è¯»)æ˜¯ä¸å¯ä»¥é˜²æ­¢å¹»è¯»çš„ï¼Œä½† InnoDB å®ç°çš„ REPEATABLE-READ éš”ç¦»çº§åˆ«å…¶å®æ˜¯å¯ä»¥è§£å†³å¹»è¯»é—®é¢˜å‘ç”Ÿçš„ã€‚</p>
<p>è¯¦ç»†å‚è€ƒç­”æ¡ˆï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FN4WHYAa00ZhDjMLaqnlgRQ" target="_blank" title="https://mp.weixin.qq.com/s/N4WHYAa00ZhDjMLaqnlgRQ" ref="nofollow noopener noreferrer">MySQL çš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆ?å¯ä»¥è§£å†³å¹»è¯»é—®é¢˜å—ï¼Ÿ</a></p>
<h2 data-id="heading-13">Redis</h2>
<h3 data-id="heading-14">ä¸ºä»€ä¹ˆè¦ç”¨ Redisï¼Ÿ</h3>
<h3 data-id="heading-15">é¡¹ç›®ä¸­å¼•å…¥ Redis å…·ä½“åšäº†å“ªäº›äº‹æƒ…ï¼Ÿ</h3>
<p>Redis é™¤äº†å¯ä»¥ç”¨æ¥ç¼“å­˜é«˜é¢‘è®¿é—®çš„æ•°æ®ä¹‹å¤–ï¼Œè¿˜ä»¥ç”¨æ¥å®ç°ï¼š</p>
<ul>
<li><strong>åˆ†å¸ƒå¼é”</strong>ï¼šé€šè¿‡ Redis æ¥åšåˆ†å¸ƒå¼é”æ˜¯ä¸€ç§æ¯”è¾ƒå¸¸è§çš„æ–¹å¼ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½æ˜¯åŸºäº Redisson æ¥å®ç°åˆ†å¸ƒå¼é”ã€‚å…³äº Redis å®ç°åˆ†å¸ƒå¼é”çš„è¯¦ç»†ä»‹ç»ï¼Œå¯ä»¥çœ‹æˆ‘å†™çš„è¿™ç¯‡æ–‡ç« ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fy8kAflIenRpa4zIwCP_8iA" target="_blank" title="https://mp.weixin.qq.com/s/y8kAflIenRpa4zIwCP_8iA" ref="nofollow noopener noreferrer">å¦‚ä½•åŸºäº Redis å®ç°åˆ†å¸ƒå¼é”ï¼Ÿ</a>ã€‚</li>
<li><strong>é™æµ</strong>ï¼šä¸€èˆ¬æ˜¯é€šè¿‡ Redis + Lua è„šæœ¬çš„æ–¹å¼æ¥å®ç°é™æµã€‚å¦‚æœä¸æƒ³è‡ªå·±å†™ Lua è„šæœ¬çš„è¯ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åˆ©ç”¨ Redisson ä¸­çš„ <code>RRateLimiter</code> æ¥å®ç°åˆ†å¸ƒå¼é™æµï¼Œå…¶åº•å±‚å®ç°å°±æ˜¯åŸºäº Lua ä»£ç +ä»¤ç‰Œæ¡¶ç®—æ³•ã€‚</li>
<li><strong>æ¶ˆæ¯é˜Ÿåˆ—</strong>ï¼šRedis è‡ªå¸¦çš„ List æ•°æ®ç»“æ„å¯ä»¥ä½œä¸ºä¸€ä¸ªç®€å•çš„é˜Ÿåˆ—ä½¿ç”¨ã€‚Redis 5.0 ä¸­å¢åŠ çš„ Stream ç±»å‹çš„æ•°æ®ç»“æ„æ›´åŠ é€‚åˆç”¨æ¥åšæ¶ˆæ¯é˜Ÿåˆ—ã€‚å®ƒæ¯”è¾ƒç±»ä¼¼äº Kafkaï¼Œæœ‰ä¸»é¢˜å’Œæ¶ˆè´¹ç»„çš„æ¦‚å¿µï¼Œæ”¯æŒæ¶ˆæ¯æŒä¹…åŒ–ä»¥åŠ ACK æœºåˆ¶ã€‚</li>
<li><strong>å»¶æ—¶é˜Ÿåˆ—</strong>ï¼šRedisson å†…ç½®äº†å»¶æ—¶é˜Ÿåˆ—ï¼ˆåŸºäº Sorted Set å®ç°çš„ï¼‰ã€‚</li>
<li><strong>åˆ†å¸ƒå¼ Session</strong> ï¼šåˆ©ç”¨ String æˆ–è€… Hash æ•°æ®ç±»å‹ä¿å­˜ Session æ•°æ®ï¼Œæ‰€æœ‰çš„æœåŠ¡å™¨éƒ½å¯ä»¥è®¿é—®ã€‚</li>
<li><strong>å¤æ‚ä¸šåŠ¡åœºæ™¯</strong>ï¼šé€šè¿‡ Redis ä»¥åŠ Redis æ‰©å±•ï¼ˆæ¯”å¦‚ Redissonï¼‰æä¾›çš„æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å®Œæˆå¾ˆå¤šå¤æ‚çš„ä¸šåŠ¡åœºæ™¯æ¯”å¦‚é€šè¿‡ Bitmap ç»Ÿè®¡æ´»è·ƒç”¨æˆ·ã€é€šè¿‡ Sorted Set ç»´æŠ¤æ’è¡Œæ¦œã€‚</li>
</ul>
<p>é¢è¯•ä¸­ï¼Œæ ¹æ®ä½ é¡¹ç›®çš„å®é™…æƒ…å†µå»å›ç­”å³å¯ï¼</p>
<p>æ›´å¤š Redis é«˜é¢‘é¢è¯•é¢˜æ€»ç»“ï¼Œå¯ä»¥é˜…è¯»ç¬”è€…å†™çš„è¿™ä¸¤ç¯‡æ–‡ç« ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fdatabase%2Fredis%2Fredis-questions-01.html" target="_blank" title="https://javaguide.cn/database/redis/redis-questions-01.html" ref="nofollow noopener noreferrer">Redis å¸¸è§é¢è¯•é¢˜æ€»ç»“ï¼ˆä¸Šï¼‰</a>ï¼ˆRedis åŸºç¡€ã€åº”ç”¨ã€æ•°æ®ç±»å‹ã€æŒä¹…åŒ–æœºåˆ¶ã€çº¿ç¨‹æ¨¡å‹ç­‰ï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fdatabase%2Fredis%2Fredis-questions-02.html" target="_blank" title="https://javaguide.cn/database/redis/redis-questions-02.html" ref="nofollow noopener noreferrer">Redis å¸¸è§é¢è¯•é¢˜æ€»ç»“(ä¸‹)</a>ï¼ˆRedis äº‹åŠ¡ã€æ€§èƒ½ä¼˜åŒ–ã€ç”Ÿäº§é—®é¢˜ã€é›†ç¾¤ã€ä½¿ç”¨è§„èŒƒç­‰ï¼‰</li>
</ul>
<h3 data-id="heading-16">ä½¿ç”¨ HyperLogLog ç»Ÿè®¡é¡µé¢ UV æ€ä¹ˆåšçš„ï¼Ÿ</h3>
<p>ä½¿ç”¨ HyperLogLog ç»Ÿè®¡é¡µé¢ UV ä¸»è¦éœ€è¦ç”¨åˆ°ä¸‹é¢è¿™ä¸¤ä¸ªå‘½ä»¤ï¼š</p>
<ul>
<li><code>PFADD key element1 element2 ...</code>ï¼šæ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ åˆ° HyperLogLog ä¸­ã€‚</li>
<li><code>PFCOUNT key1 key2</code>ï¼šè·å–ä¸€ä¸ªæˆ–è€…å¤šä¸ª HyperLogLog çš„å”¯ä¸€è®¡æ•°ã€‚</li>
</ul>
<p>1ã€å°†è®¿é—®æŒ‡å®šé¡µé¢çš„æ¯ä¸ªç”¨æˆ· ID æ·»åŠ åˆ° <code>HyperLogLog</code> ä¸­ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">PFADD PAGE_1:UV USER1 USER2 ...... USERn
</code></pre>
<p>2ã€ç»Ÿè®¡æŒ‡å®šé¡µé¢çš„ UVã€‚</p>
<pre><code class="hljs language-bash" lang="bash">PFCOUNT PAGE_1:UV
</code></pre>
<h3 data-id="heading-17">å¦‚æœç¼“å­˜çš„æ•°æ®é‡å¤ªå¤§ï¼Œå†…å­˜ä¸å¤Ÿç”¨æ€ä¹ˆåŠï¼Ÿ</h3>
<ol>
<li><strong>å‚ç›´æ‰©å±•ï¼ˆå¢åŠ ç¡¬ä»¶é…ç½®ï¼‰ï¼š</strong> æœ€ç›´æ¥çš„æ–¹å¼æ˜¯å‡çº§ç°æœ‰ Redis æœåŠ¡å™¨çš„å†…å­˜å®¹é‡ï¼Œé€‰æ‹©é…ç½®æ›´é«˜ã€å†…å­˜æ›´å¤§çš„æœåŠ¡å™¨æ¥éƒ¨ç½² Redis å®ä¾‹ã€‚ ä¸è¿‡ï¼Œè¿™ä¼šå—åˆ°ç¡¬ä»¶æˆæœ¬å’Œå•æœºå†…å­˜å®¹é‡ä¸Šé™çš„é™åˆ¶ã€‚</li>
<li><strong>æ°´å¹³æ‰©å±•ï¼ˆRedis åˆ‡ç‰‡é›†ç¾¤ï¼‰ï¼š</strong> Redis åˆ‡ç‰‡é›†ç¾¤å°±æ˜¯éƒ¨ç½²å¤šå° Redis ä¸»èŠ‚ç‚¹ï¼ˆmasterï¼‰ï¼Œè¿™äº›èŠ‚ç‚¹ä¹‹é—´å¹³ç­‰ï¼Œå¹¶æ²¡æœ‰ä¸»ä»ä¹‹è¯´ï¼ŒåŒæ—¶å¯¹å¤–æä¾›è¯»/å†™æœåŠ¡ã€‚ç¼“å­˜çš„æ•°æ®åº“ç›¸å¯¹å‡åŒ€åœ°åˆ†å¸ƒåœ¨è¿™äº› Redis å®ä¾‹ä¸Šï¼Œå®¢æˆ·ç«¯çš„è¯·æ±‚é€šè¿‡è·¯ç”±è§„åˆ™è½¬å‘åˆ°ç›®æ ‡ master ä¸Šã€‚Redis åˆ‡ç‰‡é›†ç¾¤å¯¹äºæ¨ªå‘æ‰©å±•éå¸¸å‹å¥½ï¼Œåªéœ€è¦å¢åŠ  Redis èŠ‚ç‚¹åˆ°é›†ç¾¤ä¸­å³å¯ã€‚</li>
</ol>
<h3 data-id="heading-18">Redis åˆ‡ç‰‡é›†ç¾¤å¦‚ä½•å®ç°ï¼Ÿ</h3>
<p>Redis 3.0 å®˜æ–¹æ¨å‡ºäº†åˆ†ç‰‡é›†ç¾¤è§£å†³æ–¹æ¡ˆ Redis Cluster ã€‚ç»è¿‡å¤šä¸ªç‰ˆæœ¬çš„æŒç»­å®Œå–„ï¼ŒRedis Cluster æˆä¸º Redis åˆ‡ç‰‡é›†ç¾¤çš„é¦–é€‰æ–¹æ¡ˆï¼Œæ»¡è¶³ç»å¤§éƒ¨åˆ†é«˜å¹¶å‘ä¸šåŠ¡åœºæ™¯éœ€æ±‚ã€‚</p>
<p>å¦‚æœé¡¹ç›®ä½¿ç”¨çš„æ˜¯ Redis 3.0 ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ç”¨ Twemproxyã€Codis è¿™ç±»å¼€æºåˆ†ç‰‡é›†ç¾¤æ–¹æ¡ˆã€‚Twemproxyã€Codis å°±ç›¸å½“äºæ˜¯ Proxy å±‚ï¼Œè´Ÿè´£ç»´æŠ¤è·¯ç”±è§„åˆ™ï¼Œå®ç°è´Ÿè½½å‡è¡¡ã€‚</p>
<h2 data-id="heading-19">æ“ä½œç³»ç»Ÿ</h2>
<h3 data-id="heading-20">è¿›ç¨‹çº¿ç¨‹åŒºåˆ«</h3>
<p>è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿåˆ†é…èµ„æºçš„åŸºæœ¬å•ä½ï¼Œå…·å¤‡ç‹¬ç«‹çš„åœ°å€ç©ºé—´ï¼›çº¿ç¨‹æ˜¯ CPU è°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œå¤ç”¨æ‰€å±è¿›ç¨‹çš„èµ„æºã€‚äºŒè€…æ ¸å¿ƒå·®å¼‚åœ¨äºéš”ç¦»æ€§ä¸å…±äº«æ€§ï¼šè¿›ç¨‹å½¼æ­¤éš”ç¦»ï¼Œçº¿ç¨‹é—´å…±äº«å†…å­˜ã€‚å¼•å…¥çº¿ç¨‹çš„ç›®çš„ï¼Œæ˜¯åœ¨å•ä¸€åº”ç”¨å†…éƒ¨å®ç°ä½å¼€é”€ã€é«˜æ•ˆç‡çš„å¹¶å‘ï¼Œé™ä½èµ„æºå ç”¨ä¸é€šä¿¡æˆæœ¬ï¼Œå……åˆ†é‡Šæ”¾å¤šæ ¸æ½œèƒ½ã€‚</p>
<p>è¯¦ç»†ä»‹ç»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FyFggyRl3xYtGlHKVXWQDCw" target="_blank" title="https://mp.weixin.qq.com/s/yFggyRl3xYtGlHKVXWQDCw" ref="nofollow noopener noreferrer">è¿›ç¨‹å’Œçº¿ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿæœ‰äº†è¿›ç¨‹ä¸ºä»€ä¹ˆè¿˜éœ€è¦çº¿ç¨‹?</a>ã€‚</p>
<h3 data-id="heading-21">è¿›ç¨‹çš„è°ƒåº¦ç®—æ³•æœ‰å“ªäº›?</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3967d1ed573543f193fe76971c85edb4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753368&amp;x-signature=TyzZvJ8lTHCzSg1GKS7C2iXoLd4%3D" alt="å¸¸è§è¿›ç¨‹è°ƒåº¦ç®—æ³•" loading="lazy"/></p>
<p>è¿›ç¨‹è°ƒåº¦ç®—æ³•çš„æ ¸å¿ƒç›®æ ‡æ˜¯å†³å®šå°±ç»ªé˜Ÿåˆ—ä¸­çš„å“ªä¸ªè¿›ç¨‹åº”è¯¥è·å¾— CPU èµ„æºï¼Œå…¶è®¾è®¡ç›®æ ‡é€šå¸¸æ˜¯åœ¨<strong>ååé‡ã€å‘¨è½¬æ—¶é—´ã€å“åº”æ—¶é—´</strong>å’Œ<strong>å…¬å¹³æ€§</strong>ä¹‹é—´åšæƒè¡¡ã€‚</p>
<p>æˆ‘ä¹ æƒ¯å°†è¿™äº›ç®—æ³•åˆ†ä¸ºä¸¤å¤§ç±»ï¼š<strong>éæŠ¢å å¼</strong>å’Œ<strong>æŠ¢å å¼</strong>ã€‚</p>
<p><strong>ç¬¬ä¸€ç±»ï¼šéæŠ¢å å¼è°ƒåº¦ (Non-Preemptive)</strong></p>
<p>è¿™ç§æ–¹å¼ä¸‹ï¼Œä¸€æ—¦ CPU åˆ†é…ç»™ä¸€ä¸ªè¿›ç¨‹ï¼Œå®ƒå°±ä¼šä¸€ç›´è¿è¡Œä¸‹å»ï¼Œç›´åˆ°ä»»åŠ¡å®Œæˆæˆ–ä¸»åŠ¨æ”¾å¼ƒï¼ˆæ¯”å¦‚ç­‰å¾… I/Oï¼‰ã€‚</p>
<ol>
<li><strong>å…ˆåˆ°å…ˆæœåŠ¡è°ƒåº¦ç®—æ³•(FCFSï¼ŒFirst Come, First Served)</strong> : è¿™æ˜¯æœ€ç®€å•çš„ï¼Œå°±åƒæ’é˜Ÿï¼Œè°å…ˆæ¥è°å…ˆç”¨ã€‚ä¼˜ç‚¹æ˜¯å…¬å¹³ã€å®ç°ç®€å•ã€‚ä½†ç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼Œå¦‚æœä¸€ä¸ªå¾ˆé•¿çš„ä»»åŠ¡å…ˆåˆ°äº†ï¼Œåé¢æ— æ•°ä¸ªçŸ­ä»»åŠ¡éƒ½å¾—ç­‰ç€ï¼Œè¿™ä¼šå¯¼è‡´å¹³å‡ç­‰å¾…æ—¶é—´å¾ˆé•¿ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œæŠ¤èˆªæ•ˆåº”â€ã€‚</li>
<li><strong>çŸ­ä½œä¸šä¼˜å…ˆçš„è°ƒåº¦ç®—æ³•(SJFï¼ŒShortest Job First)</strong> : ä»å°±ç»ªé˜Ÿåˆ—ä¸­é€‰å‡ºä¸€ä¸ªä¼°è®¡è¿è¡Œæ—¶é—´æœ€çŸ­çš„è¿›ç¨‹ä¸ºä¹‹åˆ†é…èµ„æºã€‚ç†è®ºä¸Šï¼Œå®ƒçš„å¹³å‡ç­‰å¾…æ—¶é—´æ˜¯æœ€çŸ­çš„ï¼Œååé‡å¾ˆé«˜ã€‚ä½†ç¼ºç‚¹æ˜¯ï¼Œå®ƒéœ€è¦é¢„æµ‹è¿è¡Œæ—¶é—´ï¼Œè¿™å¾ˆéš¾åšåˆ°ï¼Œè€Œä¸”å¯èƒ½ä¼šå¯¼è‡´é•¿ä½œä¸šâ€œé¥¿æ­»â€ï¼Œæ°¸è¿œå¾—ä¸åˆ°æ‰§è¡Œã€‚</li>
</ol>
<p><strong>ç¬¬äºŒç±»ï¼šæŠ¢å å¼è°ƒåº¦ (Preemptive)</strong></p>
<p>æ“ä½œç³»ç»Ÿå¯ä»¥å¼ºåˆ¶å‰¥å¤ºå½“å‰è¿›ç¨‹çš„ CPU ä½¿ç”¨æƒï¼Œåˆ†é…ç»™å…¶ä»–æ›´é‡è¦çš„è¿›ç¨‹ã€‚ç°ä»£æ“ä½œç³»ç»ŸåŸºæœ¬éƒ½é‡‡ç”¨è¿™ç§æ–¹å¼ã€‚</p>
<ul>
<li><strong>æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ç®—æ³•ï¼ˆRRï¼ŒRound-Robinï¼‰</strong> : è¿™æ˜¯æœ€ç»å…¸ã€æœ€å…¬å¹³çš„æŠ¢å å¼ç®—æ³•ã€‚å®ƒç»™æ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸€ä¸ªå›ºå®šçš„æ—¶é—´ç‰‡ï¼Œç”¨å®Œäº†å°±æŠŠå®ƒæ”¾åˆ°é˜Ÿå°¾ï¼Œåˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªè¿›ç¨‹ã€‚å®ƒéå¸¸é€‚åˆåˆ†æ—¶ç³»ç»Ÿï¼Œä¿è¯äº†æ¯ä¸ªè¿›ç¨‹éƒ½èƒ½å¾—åˆ°å“åº”ï¼Œä½†æ—¶é—´ç‰‡çš„è®¾ç½®å¾ˆå…³é”®ï¼šå¤ªé•¿äº†é€€åŒ–æˆ FCFSï¼Œå¤ªçŸ­äº†åˆ™ä¼šå¯¼è‡´è¿‡äºé¢‘ç¹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå¢åŠ ç³»ç»Ÿå¼€é”€ã€‚</li>
<li><strong>ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•ï¼ˆPriorityï¼‰</strong>ï¼šæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªä¼˜å…ˆçº§ï¼Œè¿›ç¨‹è°ƒåº¦å™¨æ€»æ˜¯é€‰æ‹©ä¼˜å…ˆçº§æœ€é«˜çš„è¿›ç¨‹ï¼Œå…·æœ‰ç›¸åŒä¼˜å…ˆçº§çš„è¿›ç¨‹ä»¥ FCFS æ–¹å¼æ‰§è¡Œã€‚è¿™å¾ˆçµæ´»ï¼Œå¯ä»¥æ ¹æ®å†…å­˜è¦æ±‚ï¼Œæ—¶é—´è¦æ±‚æˆ–ä»»ä½•å…¶ä»–èµ„æºè¦æ±‚æ¥ç¡®å®šä¼˜å…ˆçº§ï¼Œä½†åŒæ ·å¯èƒ½å¯¼è‡´ä½ä¼˜å…ˆçº§è¿›ç¨‹â€œé¥¿æ­»â€ã€‚</li>
</ul>
<p>å‰é¢ä»‹ç»çš„å‡ ç§è¿›ç¨‹è°ƒåº¦çš„ç®—æ³•éƒ½æœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œå¦‚ï¼š<strong>çŸ­è¿›ç¨‹ä¼˜å…ˆçš„è°ƒåº¦ç®—æ³•ï¼Œä»…ç…§é¡¾äº†çŸ­è¿›ç¨‹è€Œå¿½ç•¥äº†é•¿è¿›ç¨‹</strong> ã€‚é‚£æœ‰æ²¡æœ‰ä¸€ç§ç»“åˆäº†ä¸Šé¢è¿™äº›è¿›ç¨‹è°ƒåº¦ç®—æ³•ä¼˜ç‚¹çš„å‘¢ï¼Ÿ</p>
<p><strong>å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•ï¼ˆMFQï¼ŒMulti-level Feedback Queueï¼‰</strong> æ˜¯ç°å®ä¸–ç•Œä¸­æœ€å¸¸ç”¨çš„ä¸€ç§ç®—æ³•ï¼Œæ¯”å¦‚æ—©æœŸçš„ UNIXã€‚å®ƒéå¸¸èªæ˜ï¼Œç»“åˆäº† RR å’Œä¼˜å…ˆçº§è°ƒåº¦ã€‚å®ƒè®¾ç½®äº†å¤šä¸ªä¸åŒä¼˜å…ˆçº§çš„é˜Ÿåˆ—ï¼Œæ¯ä¸ªé˜Ÿåˆ—ä½¿ç”¨ RR è°ƒåº¦ï¼Œæ—¶é—´ç‰‡å¤§å°ä¹Ÿä¸åŒã€‚æ–°è¿›ç¨‹å…ˆè¿›å…¥æœ€é«˜ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼›å¦‚æœåœ¨ä¸€ä¸ªæ—¶é—´ç‰‡å†…æ²¡æ‰§è¡Œå®Œï¼Œå°±ä¼šè¢«é™çº§åˆ°ä¸‹ä¸€ä¸ªé˜Ÿåˆ—ã€‚è¿™æ ·æ—¢ç…§é¡¾äº†çŸ­ä½œä¸šï¼ˆåœ¨é«˜ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­å¿«é€Ÿå®Œæˆï¼‰ï¼Œä¹Ÿä¿è¯äº†é•¿ä½œä¸šä¸ä¼šé¥¿æ­»ï¼ˆæœ€ç»ˆä¼šåœ¨ä½ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­å¾—åˆ°æ‰§è¡Œï¼‰ï¼Œæ˜¯ä¸€ç§éå¸¸å‡è¡¡çš„æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-22">æ­»é”ï¼Œæ­»é”æ¡ä»¶</h3>
<p>æ­»é”ï¼ˆDeadlockï¼‰æè¿°çš„æ˜¯è¿™æ ·ä¸€ç§æƒ…å†µï¼šå¤šä¸ªè¿›ç¨‹/çº¿ç¨‹åŒæ—¶è¢«é˜»å¡ï¼Œå®ƒä»¬ä¸­çš„ä¸€ä¸ªæˆ–è€…å…¨éƒ¨éƒ½åœ¨ç­‰å¾…æŸä¸ªèµ„æºè¢«é‡Šæ”¾ã€‚ç”±äºè¿›ç¨‹/çº¿ç¨‹è¢«æ— é™æœŸåœ°é˜»å¡ï¼Œå› æ­¤ç¨‹åºä¸å¯èƒ½æ­£å¸¸ç»ˆæ­¢ã€‚</p>
<p>ä¸€ä¸ªæœ€ç»å…¸çš„ä¾‹å­å°±æ˜¯**â€œäº¤å‰æŒé”â€**ã€‚æƒ³è±¡æœ‰ä¸¤ä¸ªçº¿ç¨‹å’Œä¸¤ä¸ªé”:</p>
<ul>
<li>çº¿ç¨‹ 1 å…ˆæ‹¿åˆ°äº†é” Aï¼Œç„¶åå°è¯•å»è·å–é” Bã€‚</li>
<li>å‡ ä¹åŒæ—¶ï¼Œçº¿ç¨‹ 2 æ‹¿åˆ°äº†é” Bï¼Œç„¶åå°è¯•å»è·å–é” Aã€‚</li>
</ul>
<p>è¿™æ—¶ï¼Œçº¿ç¨‹ 1 ç­‰ç€çº¿ç¨‹ 2 é‡Šæ”¾é” Bï¼Œè€Œçº¿ç¨‹ 2 ç­‰ç€çº¿ç¨‹ 1 é‡Šæ”¾é” Aï¼ŒåŒæ–¹éƒ½æŒæœ‰å¯¹æ–¹éœ€è¦çš„èµ„æºï¼Œå¹¶ç­‰å¾…å¯¹æ–¹é‡Šæ”¾ï¼Œå°±å½¢æˆäº†ä¸€ä¸ªâ€œæ­»ç»“â€ã€‚</p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/887a8e98ab9e425296400f217973164d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753368&amp;x-signature=DvbwaWoH5dw%2FuQr%2BXx5LnRqsWz0%3D" loading="lazy"/>
<p>æ­»é”çš„å‘ç”Ÿå¹¶ä¸æ˜¯å¶ç„¶çš„ï¼Œå®ƒéœ€è¦åŒæ—¶æ»¡è¶³<strong>å››ä¸ªå¿…è¦æ¡ä»¶</strong>ï¼š</p>
<ol>
<li><strong>äº’æ–¥</strong>ï¼šèµ„æºå¿…é¡»å¤„äºéå…±äº«æ¨¡å¼ï¼Œå³ä¸€æ¬¡åªæœ‰ä¸€ä¸ªè¿›ç¨‹å¯ä»¥ä½¿ç”¨ã€‚å¦‚æœå¦ä¸€è¿›ç¨‹ç”³è¯·è¯¥èµ„æºï¼Œé‚£ä¹ˆå¿…é¡»ç­‰å¾…ç›´åˆ°è¯¥èµ„æºè¢«é‡Šæ”¾ä¸ºæ­¢ã€‚</li>
<li><strong>å æœ‰å¹¶ç­‰å¾…</strong>ï¼šä¸€ä¸ªè¿›ç¨‹è‡³å°‘åº”è¯¥å æœ‰ä¸€ä¸ªèµ„æºï¼Œå¹¶ç­‰å¾…å¦ä¸€èµ„æºï¼Œè€Œè¯¥èµ„æºè¢«å…¶ä»–è¿›ç¨‹æ‰€å æœ‰ã€‚</li>
<li><strong>éæŠ¢å </strong>ï¼šèµ„æºä¸èƒ½è¢«æŠ¢å ã€‚åªèƒ½åœ¨æŒæœ‰èµ„æºçš„è¿›ç¨‹å®Œæˆä»»åŠ¡åï¼Œè¯¥èµ„æºæ‰ä¼šè¢«é‡Šæ”¾ã€‚</li>
<li><strong>å¾ªç¯ç­‰å¾…</strong>ï¼šæœ‰ä¸€ç»„ç­‰å¾…è¿›ç¨‹ {P0, P1,..., Pn}ï¼Œ P0 ç­‰å¾…çš„èµ„æºè¢« P1 å æœ‰ï¼ŒP1 ç­‰å¾…çš„èµ„æºè¢« P2 å æœ‰ï¼Œâ€¦â€¦ï¼ŒPn-1 ç­‰å¾…çš„èµ„æºè¢« Pn å æœ‰ï¼ŒPn ç­‰å¾…çš„èµ„æºè¢« P0 å æœ‰ã€‚</li>
</ol>
<p><strong>æ³¨æ„ âš ï¸</strong>ï¼šè¿™å››ä¸ªæ¡ä»¶æ˜¯äº§ç”Ÿæ­»é”çš„ <strong>å¿…è¦æ¡ä»¶</strong> ï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦ç³»ç»Ÿå‘ç”Ÿæ­»é”ï¼Œè¿™äº›æ¡ä»¶å¿…ç„¶æˆç«‹ï¼Œè€Œåªè¦ä¸Šè¿°æ¡ä»¶ä¹‹ä¸€ä¸æ»¡è¶³ï¼Œå°±ä¸ä¼šå‘ç”Ÿæ­»é”ã€‚</p>
<h3 data-id="heading-23">ä¸­æ–­å’Œè½®è¯¢çš„åŒºåˆ«</h3>






























<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>è½®è¯¢ï¼ˆPollingï¼‰</th><th>ä¸­æ–­ï¼ˆInterruptï¼‰</th></tr></thead><tbody><tr><td>æ ¸å¿ƒé€»è¾‘</td><td>CPU ä¸»åŠ¨å¾ªç¯æŸ¥è¯¢è®¾å¤‡çŠ¶æ€</td><td>è®¾å¤‡ä¸»åŠ¨å‘ä¿¡å·é€šçŸ¥ CPU</td></tr><tr><td>CPU èµ„æºå ç”¨</td><td>é«˜ï¼ˆå¿™ç­‰ï¼Œæ— æ•ˆå¾ªç¯æµªè´¹ç®—åŠ›ï¼‰</td><td>ä½ï¼ˆä»…å“åº”æ—¶å ç”¨ï¼Œå¹³æ—¶ä¸å¹²æ‰°ï¼‰</td></tr><tr><td>å®æ—¶æ€§</td><td>ä½ï¼ˆä¾èµ–æŸ¥è¯¢é—´éš”ï¼Œæœ‰å»¶è¿Ÿï¼‰</td><td>é«˜ï¼ˆå³æ—¶å“åº”ï¼Œå»¶è¿Ÿæä½ï¼‰</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>è®¾å¤‡æ•°æ®é¢‘ç‡å›ºå®šã€ç®€å•åœºæ™¯ï¼ˆå¦‚å•ç‰‡æœºè¯»å–ä½é€Ÿä¼ æ„Ÿå™¨ï¼‰</td><td>è®¾å¤‡æ•°æ®éšæœºã€å®æ—¶æ€§è¦æ±‚é«˜çš„åœºæ™¯ï¼ˆå¦‚é”®ç›˜ã€ç£ç›˜ IOã€ç½‘ç»œé€šä¿¡ï¼‰</td></tr></tbody></table>
<p>æ›´å¤šæ“ä½œç³»ç»Ÿé«˜é¢‘çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜æ€»ç»“ï¼Œå¯ä»¥é˜…è¯»ç¬”è€…å†™çš„è¿™å‡ ç¯‡æ–‡ç« ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fcs-basics%2Foperating-system%2Foperating-system-basic-questions-01.html" target="_blank" title="https://javaguide.cn/cs-basics/operating-system/operating-system-basic-questions-01.html" ref="nofollow noopener noreferrer">æ“ä½œç³»ç»Ÿå¸¸è§é¢è¯•é¢˜æ€»ç»“(ä¸Š)</a>ï¼ˆæ“ä½œç³»ç»ŸåŸºç¡€ã€è¿›ç¨‹å’Œçº¿ç¨‹ã€æ­»é”ï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fcs-basics%2Foperating-system%2Foperating-system-basic-questions-02.html" target="_blank" title="https://javaguide.cn/cs-basics/operating-system/operating-system-basic-questions-02.html" ref="nofollow noopener noreferrer">æ“ä½œç³»ç»Ÿå¸¸è§é¢è¯•é¢˜æ€»ç»“(ä¸‹)</a>ï¼ˆå†…å­˜ç®¡ç†ã€æ–‡ä»¶ç³»ç»Ÿï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fcs-basics%2Foperating-system%2Flinux-intro.html" target="_blank" title="https://javaguide.cn/cs-basics/operating-system/linux-intro.html" ref="nofollow noopener noreferrer">Linux åŸºç¡€çŸ¥è¯†æ€»ç»“</a></li>
</ul>
<h2 data-id="heading-24">ç½‘ç»œ</h2>
<h3 data-id="heading-25">DNS è§£æçš„è¿‡ç¨‹</h3>
<p>æ•´ä¸ªè¿‡ç¨‹çš„æ­¥éª¤æ¯”è¾ƒå¤šï¼Œæˆ‘å•ç‹¬å†™äº†ä¸€ç¯‡æ–‡ç« è¯¦ç»†ä»‹ç»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fcs-basics%2Fnetwork%2Fdns.html" target="_blank" title="https://javaguide.cn/cs-basics/network/dns.html" ref="nofollow noopener noreferrer">DNS åŸŸåç³»ç»Ÿè¯¦è§£ï¼ˆåº”ç”¨å±‚ï¼‰</a>ã€‚</p>
<h3 data-id="heading-26">ç”¨æˆ·è¾“å…¥ç½‘å€åˆ°æ˜¾ç¤ºå¯¹åº”é¡µé¢çš„å…¨è¿‡ç¨‹</h3>
<p>å…ˆæ¥çœ‹ä¸€å¼ å›¾ï¼ˆæ¥æºäºã€Šå›¾è§£ HTTPã€‹ï¼‰ï¼š</p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2bc5c0f9ce864d4c86e502901c639db4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753368&amp;x-signature=eh90LYq7mgUieMuKL35FMG24QhA%3D" loading="lazy"/>
<p>ä¸Šå›¾æœ‰ä¸€ä¸ªé”™è¯¯éœ€è¦æ³¨æ„ï¼šæ˜¯ OSPF ä¸æ˜¯ OPSFã€‚ OSPFï¼ˆOpen Shortest Path Firstï¼Œospfï¼‰å¼€æ”¾æœ€çŸ­è·¯å¾„ä¼˜å…ˆåè®®, æ˜¯ç”± Internet å·¥ç¨‹ä»»åŠ¡ç»„å¼€å‘çš„è·¯ç”±é€‰æ‹©åè®®</p>
<p>æ€»ä½“æ¥è¯´åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤:</p>
<ol>
<li>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥æŒ‡å®šç½‘é¡µçš„ URLã€‚</li>
<li>æµè§ˆå™¨é€šè¿‡ DNS åè®®ï¼Œè·å–åŸŸåå¯¹åº”çš„ IP åœ°å€ã€‚</li>
<li>æµè§ˆå™¨æ ¹æ® IP åœ°å€å’Œç«¯å£å·ï¼Œå‘ç›®æ ‡æœåŠ¡å™¨å‘èµ·ä¸€ä¸ª TCP è¿æ¥è¯·æ±‚ã€‚</li>
<li>æµè§ˆå™¨åœ¨ TCP è¿æ¥ä¸Šï¼Œå‘æœåŠ¡å™¨å‘é€ä¸€ä¸ª HTTP è¯·æ±‚æŠ¥æ–‡ï¼Œè¯·æ±‚è·å–ç½‘é¡µçš„å†…å®¹ã€‚</li>
<li>æœåŠ¡å™¨æ”¶åˆ° HTTP è¯·æ±‚æŠ¥æ–‡åï¼Œå¤„ç†è¯·æ±‚ï¼Œå¹¶è¿”å› HTTP å“åº”æŠ¥æ–‡ç»™æµè§ˆå™¨ã€‚</li>
<li>æµè§ˆå™¨æ”¶åˆ° HTTP å“åº”æŠ¥æ–‡åï¼Œè§£æå“åº”ä½“ä¸­çš„ HTML ä»£ç ï¼Œæ¸²æŸ“ç½‘é¡µçš„ç»“æ„å’Œæ ·å¼ï¼ŒåŒæ—¶æ ¹æ® HTML ä¸­çš„å…¶ä»–èµ„æºçš„ URLï¼ˆå¦‚å›¾ç‰‡ã€CSSã€JS ç­‰ï¼‰ï¼Œå†æ¬¡å‘èµ· HTTP è¯·æ±‚ï¼Œè·å–è¿™äº›èµ„æºçš„å†…å®¹ï¼Œç›´åˆ°ç½‘é¡µå®Œå…¨åŠ è½½æ˜¾ç¤ºã€‚</li>
<li>æµè§ˆå™¨åœ¨ä¸éœ€è¦å’ŒæœåŠ¡å™¨é€šä¿¡æ—¶ï¼Œå¯ä»¥ä¸»åŠ¨å…³é—­ TCP è¿æ¥ï¼Œæˆ–è€…ç­‰å¾…æœåŠ¡å™¨çš„å…³é—­è¯·æ±‚</li>
</ol>
<p>è¯¦ç»†ä»‹ç»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fcs-basics%2Fnetwork%2Fthe-whole-process-of-accessing-web-pages.html" target="_blank" title="https://javaguide.cn/cs-basics/network/the-whole-process-of-accessing-web-pages.html" ref="nofollow noopener noreferrer">è®¿é—®ç½‘é¡µçš„å…¨è¿‡ç¨‹ï¼ˆçŸ¥è¯†ä¸²è”ï¼‰</a>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯ä¸‰å¤§æƒé™åœºæ™¯å…¨è§£æï¼šè®¾è®¡ã€å®ç°ã€å­˜å‚¨ä¸ä¼ä¸šçº§å®è·µ]]></title>    <link>https://juejin.cn/post/7576821684251918379</link>    <guid>https://juejin.cn/post/7576821684251918379</guid>    <pubDate>2025-11-26T09:13:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576821684251918379" data-draft-id="7576575703166402566" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" å‰ç«¯ä¸‰å¤§æƒé™åœºæ™¯å…¨è§£æï¼šè®¾è®¡ã€å®ç°ã€å­˜å‚¨ä¸ä¼ä¸šçº§å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2025-11-26T09:13:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹‰ä¸åŠ¨çš„çŒª"/> <meta itemprop="url" content="https://juejin.cn/user/1429793504759630"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             å‰ç«¯ä¸‰å¤§æƒé™åœºæ™¯å…¨è§£æï¼šè®¾è®¡ã€å®ç°ã€å­˜å‚¨ä¸ä¼ä¸šçº§å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1429793504759630/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹‰ä¸åŠ¨çš„çŒª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T09:13:00.000Z" title="Wed Nov 26 2025 09:13:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="arduino-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff}.hljs-subst,.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#434f54}.hljs-attribute,.hljs-doctag,.hljs-keyword,.hljs-name,.hljs-selector-tag{color:#00979d}.hljs-addition,.hljs-built_in,.hljs-bullet,.hljs-code,.hljs-literal{color:#d35400}.hljs-link,.hljs-regexp,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-symbol,.hljs-template-variable,.hljs-variable{color:#00979d}.hljs-deletion,.hljs-quote,.hljs-selector-class,.hljs-selector-id,.hljs-string,.hljs-template-tag,.hljs-type{color:#005c5f}.hljs-section,.hljs-title{color:#800;font-weight:700}.hljs-comment{color:rgba(149,165,166,.8)}.hljs-meta-keyword{color:#728e00}.hljs-meta{color:#434f54}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-function{color:#728e00}.hljs-number{color:#8a7b52}</style><p>æƒé™æ§åˆ¶æ˜¯å‰ç«¯åº”ç”¨ï¼ˆå°¤å…¶æ˜¯ä¸­å¤§å‹ç³»ç»Ÿï¼‰çš„æ ¸å¿ƒå®‰å…¨ä¸ä½“éªŒä¿éšœï¼Œå®Œæ•´çš„æƒé™ä½“ç³»éœ€è¦†ç›–ã€Œè·¯ç”±æƒé™ã€é¡µé¢å…ƒç´ æƒé™ã€æ¥å£æƒé™ã€ä¸‰å¤§åœºæ™¯ã€‚æœ¬æ–‡ç»“åˆçœŸå®é¡¹ç›®è½åœ°ç»éªŒï¼Œç³»ç»Ÿæ¢³ç†å„åœºæ™¯çš„åº”ç”¨é€»è¾‘ã€å®ç°æ–¹æ¡ˆã€è®¾è®¡æ¨¡å¼ä¸å­˜å‚¨å®‰å…¨ï¼Œè¡¥å……ä¼ä¸šçº§å¼€å‘çš„å…³é”®ç»†èŠ‚ä¸é¿å‘è¦ç‚¹ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€è·¯ç”±æƒé™ï¼šé¡µé¢è®¿é—®çš„ â€œç¬¬ä¸€é“é—¨æ§›â€</h2>
<h3 data-id="heading-1">1. æ ¸å¿ƒåº”ç”¨åœºæ™¯</h3>
<ul>
<li><strong>è§’è‰²å·®å¼‚åŒ–è®¿é—®</strong>ï¼šä¼ä¸šåå°ä¸­ï¼Œç®¡ç†å‘˜å¯è®¿é—®ç”¨æˆ·ç®¡ç†ã€ç³»ç»Ÿé…ç½®é¡µï¼Œè¿è¥ä»…èƒ½è®¿é—®è®¢å•ç®¡ç†ã€å•†å“ç®¡ç†é¡µã€‚</li>
<li><strong>SaaS å¤šç§Ÿæˆ·å®šåˆ¶</strong>ï¼šä¸åŒç§Ÿæˆ·ï¼ˆå®¢æˆ·ï¼‰å¼€é€šä¸åŒåŠŸèƒ½æ¨¡å—ï¼ˆå¦‚ A ç§Ÿæˆ·æœ‰æŠ¥è¡¨åˆ†ææ¨¡å—ï¼ŒB ç§Ÿæˆ·æ— ï¼‰ï¼Œåç«¯æ ¹æ®ç§Ÿæˆ· ID è¿”å›å¯¹åº”è·¯ç”±ã€‚</li>
<li><strong>æƒé™åŠ¨æ€å˜æ›´</strong>ï¼šç®¡ç†å‘˜åœ¨åå°ä¿®æ”¹ç”¨æˆ·è§’è‰²åï¼Œå‰ç«¯æ— éœ€é‡å¯åº”ç”¨ï¼Œå®æ—¶æ›´æ–°å¯è®¿é—®é¡µé¢ã€‚</li>
<li><strong>åˆ·æ–°ä¸¢å¤±ä¿®å¤</strong>ï¼šå•é¡µåº”ç”¨ï¼ˆSPAï¼‰åˆ·æ–°åï¼ŒåŠ¨æ€æ·»åŠ çš„è·¯ç”±ä¼šä¸¢å¤±ï¼Œéœ€é‡æ–°åŠ è½½è·¯ç”±é…ç½®ã€‚</li>
<li><strong>è·¯ç”±æ‡’åŠ è½½é€‚é…</strong>ï¼šå¤§å‹åº”ç”¨ä¸­ï¼Œè·¯ç”±ç»„ä»¶ä½“ç§¯å¤§ï¼Œéœ€ç»“åˆæƒé™é¢„æ ¡éªŒå®ç°æŒ‰éœ€åŠ è½½ï¼Œé¿å…æ— æ•ˆèµ„æºè¯·æ±‚ã€‚</li>
</ul>
<h3 data-id="heading-2">2. ä¼ä¸šçº§å®ç°æ–¹å¼</h3>
<h4 data-id="heading-3">ï¼ˆ1ï¼‰æ··åˆå¼è·¯ç”±é…ç½®ï¼ˆå‰ç«¯é¢„è®¾ + åç«¯è¿‡æ»¤ï¼‰</h4>
<p>çº¯åç«¯è¿”å›è·¯ç”±çµæ´»æ€§å·®ï¼Œçº¯å‰ç«¯é¢„è®¾è·¯ç”±éš¾ä»¥åº”å¯¹æƒé™å˜æ›´ï¼Œå®é™…é¡¹ç›®å¸¸ç”¨æ··åˆæ–¹æ¡ˆï¼š</p>
<ul>
<li>å‰ç«¯é¢„è®¾ã€ŒåŸºç¡€è·¯ç”±ã€ï¼ˆç™»å½•é¡µã€404 é¡µã€é¦–é¡µï¼‰å’Œã€Œæƒé™è·¯ç”±æ¨¡æ¿ã€ï¼ˆå« meta.permission æ ‡è¯†é¡µé¢æ‰€éœ€æƒé™ï¼‰ã€‚</li>
<li>ç™»å½•åï¼Œåç«¯è¿”å›ç”¨æˆ·ã€Œæƒé™æ ‡è¯†åˆ—è¡¨ã€ï¼Œå‰ç«¯è¿‡æ»¤å‡ºå¯è®¿é—®çš„æƒé™è·¯ç”±ï¼ŒåŠ¨æ€æ·»åŠ åˆ°è·¯ç”±å®ä¾‹ã€‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‰ç«¯é¢„è®¾è·¯ç”±æ¨¡æ¿</span>
<span class="hljs-keyword">const</span> asyncRoutes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/user-manage'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'UserManage'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../views/UserManage.vue'</span>),
    <span class="hljs-attr">meta</span>: { <span class="hljs-attr">permission</span>: <span class="hljs-string">'user:manage'</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'ç”¨æˆ·ç®¡ç†'</span> } <span class="hljs-comment">// é¡µé¢æ‰€éœ€æƒé™æ ‡è¯†</span>
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/system-config'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'SystemConfig'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../views/SystemConfig.vue'</span>),
    <span class="hljs-attr">meta</span>: { <span class="hljs-attr">permission</span>: <span class="hljs-string">'system:config'</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'ç³»ç»Ÿé…ç½®'</span> }
  }
];

<span class="hljs-comment">// ç”Ÿæˆå¯è®¿é—®è·¯ç”±ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">generateAccessibleRoutes</span> = (<span class="hljs-params">permissions</span>) =&gt; {
  <span class="hljs-keyword">return</span> asyncRoutes.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">route</span> =&gt;</span> {
    <span class="hljs-comment">// æ— æƒé™æ ‡è¯†çš„è·¯ç”±é»˜è®¤å¯è®¿é—®ï¼Œæœ‰æƒé™æ ‡è¯†éœ€åŒ¹é…ç”¨æˆ·æƒé™</span>
    <span class="hljs-keyword">return</span> !route.<span class="hljs-property">meta</span>?.<span class="hljs-property">permission</span> || permissions.<span class="hljs-title function_">includes</span>(route.<span class="hljs-property">meta</span>.<span class="hljs-property">permission</span>);
  });
};
</code></pre>
<h4 data-id="heading-4">ï¼ˆ2ï¼‰è·¯ç”±å®ˆå«çš„ â€œè´£ä»»é“¾æ ¡éªŒâ€</h4>
<p>å°†ç™»å½•æ ¡éªŒã€æƒé™æ ¡éªŒã€åˆ·æ–°ä¿®å¤ç­‰é€»è¾‘æ‹†åˆ†ä¸ºç‹¬ç«‹å®ˆå«ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œï¼Œé™ä½è€¦åˆï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">router.beforeEach(<span class="hljs-keyword">async</span> (<span class="hljs-keyword">to</span>, <span class="hljs-keyword">from</span>, <span class="hljs-keyword">next</span>) =&gt; {
  <span class="hljs-keyword">const</span> token = localStorage.getItem(<span class="hljs-comment">'token');</span>
  <span class="hljs-keyword">const</span> userPermissions = store.getters.userPermissions;

  // <span class="hljs-number">1</span>. æœªç™»å½•æ‹¦æˆªï¼ˆè´£ä»»é“¾ç¬¬ä¸€ç¯ï¼‰
  <span class="hljs-keyword">if</span> (!token &amp;&amp; <span class="hljs-keyword">to</span>.path !== <span class="hljs-comment">'/login') {</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">next</span>(<span class="hljs-comment">'/login?redirect=' + to.fullPath); // è®°å½•è·³è½¬ç›®æ ‡ï¼Œç™»å½•åå›è·³</span>
  }

  // <span class="hljs-number">2</span>. å·²ç™»å½•ä½†æ— æƒé™è®¿é—®ï¼ˆè´£ä»»é“¾ç¬¬äºŒç¯ï¼‰
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">to</span>.meta.permission &amp;&amp; !userPermissions.includes(<span class="hljs-keyword">to</span>.meta.permission)) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">next</span>(<span class="hljs-comment">'/403'); // è·³è½¬åˆ°è‡ªå®šä¹‰æ— æƒé™é¡µï¼Œæå‡ä½“éªŒ</span>
  }

  // <span class="hljs-number">3</span>. åˆ·æ–°ååŠ¨æ€è·¯ç”±ä¸¢å¤±ä¿®å¤ï¼ˆè´£ä»»é“¾ç¬¬ä¸‰ç¯ï¼‰
  <span class="hljs-keyword">if</span> (store.getters.accessRoutes.length === <span class="hljs-number">0</span> &amp;&amp; token) {
    <span class="hljs-keyword">const</span> accessibleRoutes = generateAccessibleRoutes(userPermissions);
    store.dispatch(<span class="hljs-comment">'setAccessRoutes', accessibleRoutes);</span>
    accessibleRoutes.forEach(route =&gt; router.addRoute(route));
    // é‡æ–°è§¦å‘è·¯ç”±è·³è½¬ï¼Œé¿å…ç©ºç™½é¡µ
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">next</span>({ ...<span class="hljs-keyword">to</span>, replace: <span class="hljs-literal">true</span> });
  }

  <span class="hljs-keyword">next</span>();
});
</code></pre>
<h4 data-id="heading-5">ï¼ˆ3ï¼‰è·¯ç”±ç‹¬äº«å®ˆå«å¢å¼º</h4>
<p>é’ˆå¯¹æ•æ„Ÿé¡µé¢ï¼ˆå¦‚è´¢åŠ¡å¯¹è´¦ã€ç”¨æˆ·æƒé™é…ç½®ï¼‰ï¼Œæ·»åŠ äºŒæ¬¡æ ¡éªŒï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">const</span> routes = [
  {
    path: <span class="hljs-comment">'/financial-reconciliation',</span>
    component: FinancialReconciliation,
    meta: { permission: <span class="hljs-comment">'financial:view' },</span>
    beforeEnter: (<span class="hljs-keyword">to</span>, <span class="hljs-keyword">from</span>, <span class="hljs-keyword">next</span>) =&gt; {
      // é¢å¤–æ ¡éªŒï¼šä»…å·¥ä½œæ—¶é—´å¯è®¿é—®
      <span class="hljs-keyword">const</span> hour = <span class="hljs-built_in">new</span> <span class="hljs-type">Date</span>().getHours();
      <span class="hljs-keyword">if</span> (hour &lt; <span class="hljs-number">9</span> || hour &gt; <span class="hljs-number">18</span>) {
        ElMessage.warning(<span class="hljs-comment">'ä»…å·¥ä½œæ—¶é—´ï¼ˆ9:00-18:00ï¼‰å¯è®¿é—®');</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">next</span>(<span class="hljs-keyword">from</span>.path);
      }
      <span class="hljs-keyword">next</span>();
    }
  }
];
</code></pre>
<h3 data-id="heading-6">3. è®¾è®¡æ¨¡å¼</h3>
<ul>
<li><strong>è´£ä»»é“¾æ¨¡å¼</strong>ï¼šè·¯ç”±å®ˆå«æŒ‰ â€œç™»å½•æ ¡éªŒâ†’æƒé™æ ¡éªŒâ†’åˆ·æ–°ä¿®å¤â€ çš„é¡ºåºæ‰§è¡Œï¼Œæ¯ä¸ªå®ˆå«è´Ÿè´£å•ä¸€èŒè´£ï¼Œå¯çµæ´»å¢åˆ è°ƒæ•´ã€‚</li>
<li><strong>ç­–ç•¥æ¨¡å¼</strong>ï¼šæ ¹æ®ç”¨æˆ·è§’è‰²ï¼ˆå¦‚ adminã€editorï¼‰åº”ç”¨ä¸åŒçš„è·¯ç”±è¿‡æ»¤ç­–ç•¥ï¼Œä¾‹å¦‚ç®¡ç†å‘˜ä¿ç•™æ‰€æœ‰æƒé™è·¯ç”±ï¼Œè¿è¥ä»…ä¿ç•™ä¸šåŠ¡ç›¸å…³è·¯ç”±ã€‚</li>
<li><strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>ï¼šæƒé™å˜æ›´æ—¶ï¼ˆå¦‚ç®¡ç†å‘˜ä¿®æ”¹ç”¨æˆ·æƒé™ï¼‰ï¼Œè§¦å‘è·¯ç”±é‡æ–°åŠ è½½äº‹ä»¶ï¼Œæ›´æ–°å¯è®¿é—®è·¯ç”±åˆ—è¡¨ã€‚</li>
</ul>
<h3 data-id="heading-7">4. æƒé™å­˜å‚¨ä¸å®‰å…¨æ€§</h3>
<h4 data-id="heading-8">ï¼ˆ1ï¼‰å­˜å‚¨æ–¹æ¡ˆ</h4>
<ul>
<li>è·¯ç”±é…ç½®ï¼šå­˜å‚¨åœ¨ Vuex/Piniaï¼ˆå†…å­˜ï¼‰ï¼Œåˆ·æ–°åé‡æ–°è¯·æ±‚åç«¯è·å–ï¼Œé¿å… localStorage å­˜å‚¨æ•æ„Ÿè·¯ç”±è§„åˆ™ï¼ˆå¦‚æ¥å£åœ°å€ã€æƒé™æ ‡è¯†ï¼‰ã€‚</li>
<li>ç”¨æˆ·æƒé™æ ‡è¯†ï¼šé‡‡ç”¨ â€œlocalStorageï¼ˆæŒä¹…åŒ–ï¼‰+ Vuex/Piniaï¼ˆå†…å­˜è®¿é—®ï¼‰â€ åŒå­˜å‚¨ï¼ŒlocalStorage ç¡®ä¿åˆ·æ–°åä¸ä¸¢å¤±ï¼ŒVuex/Pinia æå‡è®¿é—®æ•ˆç‡ã€‚</li>
<li>Tokenï¼šå­˜å‚¨åœ¨ localStorage æˆ– sessionStorageï¼Œå»ºè®®è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆå¦‚ 2 å°æ—¶ï¼‰ï¼Œé™ä½æ³„éœ²é£é™©ã€‚</li>
</ul>
<h4 data-id="heading-9">ï¼ˆ2ï¼‰å®‰å…¨æ€§ä¿éšœ</h4>
<ul>
<li>æƒé™æ ‡è¯†åŠ å¯†ï¼šå¯¹ localStorage ä¸­çš„æƒé™æ ‡è¯†åšç®€å•åŠ å¯†ï¼ˆå¦‚ Base64ï¼‰ï¼Œé¿å…æ˜æ–‡æ³„éœ²ï¼ˆè™½ä¸èƒ½é˜²ç ´è§£ï¼Œä½†èƒ½æå‡åŸºç¡€å®‰å…¨ï¼‰ã€‚</li>
<li>é˜² URL ç»•è¿‡ï¼šå³ä½¿å‰ç«¯éšè—è·¯ç”±ï¼Œç”¨æˆ·ç›´æ¥è¾“å…¥ URL è®¿é—®æ—¶ï¼Œåç«¯éœ€å¯¹ â€œé¡µé¢åˆå§‹åŒ–æ¥å£â€ åšæƒé™æ ¡éªŒï¼ˆå¦‚è®¿é—®<code>/system-config</code>æ—¶ï¼Œåç«¯æ ¡éªŒ<code>system:config</code>æƒé™ï¼‰ã€‚</li>
<li>æ•æ„Ÿè·¯ç”±éšè—ï¼šæ— æƒé™çš„è·¯ç”±ä¸æ·»åŠ åˆ°è·¯ç”±å®ä¾‹ï¼ŒåŒæ—¶åœ¨èœå•æ¸²æŸ“æ—¶è¿‡æ»¤ï¼Œé¿å…ç”¨æˆ·æ„ŸçŸ¥æœªæˆæƒåŠŸèƒ½ã€‚</li>
</ul>
<h2 data-id="heading-10">äºŒã€é¡µé¢å…ƒç´ æƒé™ï¼šç»†ç²’åº¦çš„ â€œåŠŸèƒ½å¯è§æ€§æ§åˆ¶â€</h2>
<h3 data-id="heading-11">1. æ ¸å¿ƒåº”ç”¨åœºæ™¯</h3>
<ul>
<li><strong>æ“ä½œæƒé™å·®å¼‚åŒ–</strong>ï¼šåŒä¸€é¡µé¢ä¸­ï¼Œç®¡ç†å‘˜å¯çœ‹åˆ° â€œåˆ é™¤ç”¨æˆ·â€â€œæ‰¹é‡å¯¼å‡ºâ€ æŒ‰é’®ï¼Œæ™®é€šç”¨æˆ·ä»…èƒ½çœ‹åˆ° â€œæŸ¥çœ‹è¯¦æƒ…â€ æŒ‰é’®ã€‚</li>
<li><strong>æ•°æ®åˆ—æƒé™</strong>ï¼šè¡¨æ ¼ä¸­ï¼Œç®¡ç†å‘˜å¯æŸ¥çœ‹ â€œæ‰‹æœºå·â€â€œèº«ä»½è¯å·â€ åˆ—ï¼Œè¿è¥ä»…èƒ½æŸ¥çœ‹ â€œç”¨æˆ·åâ€â€œè®¢å•å·â€ åˆ—ã€‚</li>
<li><strong>å¤æ‚æƒé™ç»„åˆ</strong>ï¼šæŒ‰é’®æ˜¾ç¤ºéœ€æ»¡è¶³ â€œè§’è‰²ä¸º editor + æ‹¥æœ‰ order:edit æƒé™ + æ•°æ®å½’å±æœ¬éƒ¨é—¨â€ ç­‰å¤šæ¡ä»¶ç»„åˆã€‚</li>
<li><strong>ç°åº¦åŠŸèƒ½å‘å¸ƒ</strong>ï¼šæ–°åŠŸèƒ½ä¸Šçº¿æ—¶ï¼Œä»…å¯¹éƒ¨åˆ†ç”¨æˆ·ï¼ˆå¦‚å†…éƒ¨æµ‹è¯•è´¦å·ï¼‰æ˜¾ç¤ºå…¥å£ï¼Œé€æ­¥å…¨é‡å¼€æ”¾ã€‚</li>
<li><strong>æƒé™åŠ¨æ€æ›´æ–°</strong>ï¼šç®¡ç†å‘˜ä¿®æ”¹ç”¨æˆ·æƒé™åï¼Œé¡µé¢å…ƒç´ å®æ—¶åˆ·æ–°ï¼ˆå¦‚ç«‹å³éšè— â€œåˆ é™¤â€ æŒ‰é’®ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-12">2. ä¼ä¸šçº§å®ç°æ–¹å¼</h3>
<h4 data-id="heading-13">ï¼ˆ1ï¼‰æƒé™ä¸­å¿ƒå°è£…ï¼ˆè§£å†³ç¢ç‰‡åŒ–é—®é¢˜ï¼‰</h4>
<p>æ„å»ºå…¨å±€æƒé™ä¸­å¿ƒï¼Œç»Ÿä¸€ç®¡ç†æƒé™æ ¡éªŒé€»è¾‘ï¼Œé¿å…æ•£è½åœ¨å„ç»„ä»¶ä¸­ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// src/utils/permissionCenter.js</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PermissionCenter</span> {
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">this</span>.permissions = []; <span class="hljs-comment">// æƒé™ç åˆ—è¡¨ï¼ˆå¦‚["user:add", "order:edit"]ï¼‰</span>
    <span class="hljs-keyword">this</span>.roles = []; <span class="hljs-comment">// è§’è‰²åˆ—è¡¨ï¼ˆå¦‚["admin", "editor"]ï¼‰</span>
    <span class="hljs-keyword">this</span>.customRules = new Map(); <span class="hljs-comment">// è‡ªå®šä¹‰æƒé™è§„åˆ™ï¼ˆåº”å¯¹å¤æ‚åœºæ™¯ï¼‰</span>
    <span class="hljs-keyword">this</span>.cache = new Map(); <span class="hljs-comment">// æ ¡éªŒç»“æœç¼“å­˜ï¼Œæå‡æ€§èƒ½</span>
  }

  <span class="hljs-comment">// åˆå§‹åŒ–æƒé™æ•°æ®</span>
  <span class="hljs-keyword">init</span>(permissions, roles) {
    <span class="hljs-keyword">this</span>.permissions = permissions;
    <span class="hljs-keyword">this</span>.roles = roles;
    <span class="hljs-keyword">this</span>.cache.clear(); <span class="hljs-comment">// åˆå§‹åŒ–æ—¶æ¸…ç©ºç¼“å­˜</span>
  }

  <span class="hljs-comment">// åŸºç¡€æƒé™æ ¡éªŒï¼ˆæƒé™ç åŒ¹é…ï¼‰</span>
  hasPermission(code) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.cache.has(code)) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.cache.<span class="hljs-keyword">get</span>(code);
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">this</span>.permissions.includes(code);
    <span class="hljs-keyword">this</span>.cache.<span class="hljs-keyword">set</span>(code, result); <span class="hljs-comment">// ç¼“å­˜æ ¡éªŒç»“æœ</span>
    <span class="hljs-keyword">return</span> result;
  }

  <span class="hljs-comment">// è§’è‰²æ ¡éªŒ</span>
  hasRole(role) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.roles.includes(role);
  }

  <span class="hljs-comment">// å¤æ‚è§„åˆ™æ ¡éªŒï¼ˆæ”¯æŒå¤šæ¡ä»¶ç»„åˆï¼‰</span>
  checkCustomRule(ruleName, ...args) {
    <span class="hljs-keyword">const</span> rule = <span class="hljs-keyword">this</span>.customRules.<span class="hljs-keyword">get</span>(ruleName);
    <span class="hljs-keyword">if</span> (!rule) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> rule(...args);
  }

  <span class="hljs-comment">// æ³¨å†Œè‡ªå®šä¹‰è§„åˆ™</span>
  registerCustomRule(ruleName, ruleFn) {
    <span class="hljs-keyword">this</span>.customRules.<span class="hljs-keyword">set</span>(ruleName, ruleFn);
  }

  <span class="hljs-comment">// æƒé™æ›´æ–°ï¼ˆè§¦å‘å…ƒç´ é‡æ–°æ¸²æŸ“ï¼‰</span>
  updatePermissions(permissions, roles) {
    <span class="hljs-keyword">this</span>.<span class="hljs-keyword">init</span>(permissions, roles);
    <span class="hljs-comment">// è§¦å‘Vueå“åº”å¼æ›´æ–°ï¼ˆéœ€ç»“åˆVuex/Piniaï¼‰</span>
    store.dispatch(<span class="hljs-string">'updateUserPermissions'</span>, { permissions, roles });
  }
}

export default new PermissionCenter();
</code></pre>
<h4 data-id="heading-14">ï¼ˆ2ï¼‰æŒ‡ä»¤ + ç»„ä»¶çš„åŒå±‚æ§åˆ¶</h4>
<ul>
<li><strong>å…¨å±€æŒ‡ä»¤ï¼ˆv-permï¼‰</strong> ï¼šè´Ÿè´£åŸºç¡€æƒé™æ ¡éªŒï¼Œå¿«é€Ÿéšè—æ— æƒé™å…ƒç´ ï¼š</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">// æ³¨å†Œå…¨å±€æƒé™æŒ‡ä»¤
app.directive('perm', {
  mounted(el, binding) {
    const { value, arg } = binding<span class="hljs-comment">;</span>
    let <span class="hljs-attr">hasAccess</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>

    // æ”¯æŒæƒé™ç æ ¡éªŒï¼ˆ<span class="hljs-attr">v-perm</span>=<span class="hljs-string">"user:delete"</span>ï¼‰å’Œè‡ªå®šä¹‰è§„åˆ™æ ¡éªŒï¼ˆv-perm:rule=<span class="hljs-string">"xxx"</span>ï¼‰
    if (<span class="hljs-attr">arg</span> === <span class="hljs-string">'rule'</span>) {
      const { name, args } = value<span class="hljs-comment">;</span>
      <span class="hljs-attr">hasAccess</span> = permissionCenter.checkCustomRule(name, ...args)<span class="hljs-comment">;</span>
    } else {
      <span class="hljs-attr">hasAccess</span> = permissionCenter.hasPermission(value)<span class="hljs-comment">;</span>
    }

    // æ— æƒé™æ—¶ç§»é™¤å…ƒç´ ï¼ˆé¿å…ç”¨æˆ·é€šè¿‡DOMæ“ä½œæ˜¾ç¤ºï¼‰
    if (!hasAccess) {
      el.parentNode?.removeChild(el)<span class="hljs-comment">;</span>
    }
  },
  // æƒé™æ›´æ–°æ—¶é‡æ–°æ ¡éªŒï¼ˆå¦‚ç®¡ç†å‘˜ä¿®æ”¹æƒé™åï¼‰
  updated(el, binding) {
    // å¤ç”¨mountedé€»è¾‘ï¼Œé‡æ–°æ ¡éªŒæƒé™
    this.mounted(el, binding)<span class="hljs-comment">;</span>
  }
})<span class="hljs-comment">;</span>
</code></pre>
<ul>
<li><strong>æƒé™ç»„ä»¶ï¼ˆPermissionWrapï¼‰</strong> ï¼šåº”å¯¹å¤æ‚åœºæ™¯ï¼ˆå¦‚å¤šæ¡ä»¶ç»„åˆã€æƒé™å˜æ›´åˆ·æ–°ï¼‰ï¼š</li>
</ul>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- components/PermissionWrap.vue --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"hasAccess"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> permissionCenter <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/permissionCenter'</span>;

<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>({
  <span class="hljs-comment">// æƒé™ç ï¼ˆå•ä¸ªæˆ–æ•°ç»„ï¼‰</span>
  <span class="hljs-attr">perm</span>: { <span class="hljs-attr">type</span>: [<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Array</span>], <span class="hljs-attr">default</span>: <span class="hljs-string">''</span> },
  <span class="hljs-comment">// è§’è‰²ï¼ˆå•ä¸ªæˆ–æ•°ç»„ï¼‰</span>
  <span class="hljs-attr">role</span>: { <span class="hljs-attr">type</span>: [<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Array</span>], <span class="hljs-attr">default</span>: <span class="hljs-string">''</span> },
  <span class="hljs-comment">// è‡ªå®šä¹‰è§„åˆ™</span>
  <span class="hljs-attr">customRule</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">Object</span>, <span class="hljs-attr">default</span>: <span class="hljs-literal">null</span> }
});

<span class="hljs-comment">// æƒé™æ ¡éªŒé€»è¾‘</span>
<span class="hljs-keyword">const</span> hasAccess = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// æƒé™ç æ ¡éªŒ</span>
  <span class="hljs-keyword">if</span> (props.<span class="hljs-property">perm</span>) {
    <span class="hljs-keyword">const</span> perms = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(props.<span class="hljs-property">perm</span>) ? props.<span class="hljs-property">perm</span> : [props.<span class="hljs-property">perm</span>];
    <span class="hljs-keyword">if</span> (!perms.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">perm</span> =&gt;</span> permissionCenter.<span class="hljs-title function_">hasPermission</span>(perm))) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  }

  <span class="hljs-comment">// è§’è‰²æ ¡éªŒ</span>
  <span class="hljs-keyword">if</span> (props.<span class="hljs-property">role</span>) {
    <span class="hljs-keyword">const</span> roles = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(props.<span class="hljs-property">role</span>) ? props.<span class="hljs-property">role</span> : [props.<span class="hljs-property">role</span>];
    <span class="hljs-keyword">if</span> (!roles.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">role</span> =&gt;</span> permissionCenter.<span class="hljs-title function_">hasRole</span>(role))) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  }

  <span class="hljs-comment">// è‡ªå®šä¹‰è§„åˆ™æ ¡éªŒ</span>
  <span class="hljs-keyword">if</span> (props.<span class="hljs-property">customRule</span>) {
    <span class="hljs-keyword">const</span> { name, args } = props.<span class="hljs-property">customRule</span>;
    <span class="hljs-keyword">if</span> (!permissionCenter.<span class="hljs-title function_">checkCustomRule</span>(name, ...args)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  }

  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h4 data-id="heading-15">ï¼ˆ3ï¼‰é¡µé¢ä¸­ä½¿ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- åŸºç¡€æƒé™æŒ‰é’® --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-perm</span>=<span class="hljs-string">"user:delete"</span>&gt;</span>åˆ é™¤ç”¨æˆ·<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

<span class="hljs-comment">&lt;!-- è§’è‰²+æƒé™ç»„åˆæ§åˆ¶ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">PermissionWrap</span> <span class="hljs-attr">perm</span>=<span class="hljs-string">"order:export"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"admin"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>æ‰¹é‡å¯¼å‡ºè®¢å•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">PermissionWrap</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å¤æ‚è‡ªå®šä¹‰è§„åˆ™ï¼ˆä»…èƒ½æ“ä½œè‡ªå·±åˆ›å»ºçš„è®¢å•ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">PermissionWrap</span> <span class="hljs-attr">:custom-rule</span>=<span class="hljs-string">"{ name: 'canOperateOrder', args: [order] }"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"editOrder(order.id)"</span>&gt;</span>ç¼–è¾‘è®¢å•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">PermissionWrap</span>&gt;</span>

<span class="hljs-comment">&lt;!-- è¡¨æ ¼åˆ—æƒé™ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"æ‰‹æœºå·"</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"permissionCenter.hasPermission('user:view:phone')"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">default</span>=<span class="hljs-string">"scope"</span>&gt;</span>{{ scope.row.phone }}<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span>
</code></pre>
<h3 data-id="heading-16">3. è®¾è®¡æ¨¡å¼</h3>
<ul>
<li><strong>è£…é¥°å™¨æ¨¡å¼</strong>ï¼šé€šè¿‡<code>v-perm</code>æŒ‡ä»¤æˆ–<code>PermissionWrap</code>ç»„ä»¶åŒ…è£…åŸæœ‰å…ƒç´ ï¼Œæ·»åŠ æƒé™æ§åˆ¶é€»è¾‘ï¼Œä¸ä¿®æ”¹å…ƒç´ æœ¬èº«ä»£ç ï¼Œç¬¦åˆå¼€é—­åŸåˆ™ã€‚</li>
<li><strong>ç»„åˆæ¨¡å¼</strong>ï¼šå°†åŸºç¡€æƒé™æ ¡éªŒã€è§’è‰²æ ¡éªŒã€è‡ªå®šä¹‰è§„åˆ™æ ¡éªŒç»„åˆä¸ºå¤æ‚æƒé™é€»è¾‘ï¼Œæ”¯æŒçµæ´»ç»„åˆä¸æ‰©å±•ã€‚</li>
<li><strong>å•ä¾‹æ¨¡å¼</strong>ï¼šæƒé™ä¸­å¿ƒï¼ˆPermissionCenterï¼‰é‡‡ç”¨å•ä¾‹è®¾è®¡ï¼Œç¡®ä¿å…¨åº”ç”¨æƒé™æ•°æ®ä¸€è‡´ï¼Œé¿å…é‡å¤åˆå§‹åŒ–ã€‚</li>
</ul>
<h3 data-id="heading-17">4. æƒé™å­˜å‚¨ä¸å®‰å…¨æ€§</h3>
<h4 data-id="heading-18">ï¼ˆ1ï¼‰å­˜å‚¨æ–¹æ¡ˆ</h4>
<ul>
<li>æƒé™ç  / è§’è‰²åˆ—è¡¨ï¼šå­˜å‚¨åœ¨ Vuex/Piniaï¼ˆå†…å­˜ï¼‰+ localStorageï¼ˆæŒä¹…åŒ–ï¼‰ï¼Œä¸è·¯ç”±æƒé™å…±ç”¨å­˜å‚¨ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§ã€‚</li>
<li>è‡ªå®šä¹‰è§„åˆ™ï¼šå­˜å‚¨åœ¨æƒé™ä¸­å¿ƒå®ä¾‹ä¸­ï¼ˆå†…å­˜ï¼‰ï¼Œåˆå§‹åŒ–æ—¶æ³¨å†Œï¼Œæ— éœ€æŒä¹…åŒ–ã€‚</li>
<li>æ ¡éªŒç»“æœç¼“å­˜ï¼šå­˜å‚¨åœ¨æƒé™ä¸­å¿ƒçš„<code>cache</code>å±æ€§ï¼ˆå†…å­˜ï¼‰ï¼Œé¡µé¢åˆ·æ–°åæ¸…ç©ºï¼Œé¿å…ç¼“å­˜è¿‡æœŸã€‚</li>
</ul>
<h4 data-id="heading-19">ï¼ˆ2ï¼‰å®‰å…¨æ€§ä¿éšœ</h4>
<ul>
<li>é˜² DOM ç¯¡æ”¹ï¼šä»…ç”¨<code>v-if</code>éšè—å…ƒç´ ä¸å¤Ÿï¼Œéœ€ç”¨<code>el.remove()</code>å½»åº•ç§»é™¤ï¼Œé¿å…ç”¨æˆ·é€šè¿‡æµè§ˆå™¨æ§åˆ¶å°ä¿®æ”¹ DOM æ˜¾ç¤ºæ— æƒé™å…ƒç´ ã€‚</li>
<li>äºŒæ¬¡æ ¡éªŒï¼šæŒ‰é’®ç‚¹å‡»äº‹ä»¶ä¸­æ·»åŠ æƒé™äºŒæ¬¡æ ¡éªŒï¼Œé˜²æ­¢ç”¨æˆ·é€šè¿‡æ§åˆ¶å°è§¦å‘äº‹ä»¶ï¼š</li>
</ul>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">const</span> handleDelete = (userId) =&gt; {
  <span class="hljs-keyword">if</span> (!permissionCenter.hasPermission(<span class="hljs-string">'user:delete'</span>)) {
    ElMessage.<span class="hljs-type">error</span>(<span class="hljs-string">'æ— åˆ é™¤æƒé™'</span>);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-comment">// æ‰§è¡Œåˆ é™¤é€»è¾‘</span>
};
</code></pre>
<ul>
<li>æƒé™æ›´æ–°åŒæ­¥ï¼šç®¡ç†å‘˜ä¿®æ”¹ç”¨æˆ·æƒé™åï¼Œå‰ç«¯è°ƒç”¨<code>permissionCenter.updatePermissions</code>æ›´æ–°æƒé™æ•°æ®ï¼Œè§¦å‘å…ƒç´ é‡æ–°æ¸²æŸ“ã€‚</li>
</ul>
<h2 data-id="heading-20">ä¸‰ã€æ¥å£æƒé™ï¼šç³»ç»Ÿå®‰å…¨çš„ â€œæœ€åä¸€é“é˜²çº¿â€</h2>
<h3 data-id="heading-21">1. æ ¸å¿ƒåº”ç”¨åœºæ™¯</h3>
<ul>
<li><strong>æ•æ„Ÿæ“ä½œæ¥å£æ§åˆ¶</strong>ï¼š<code>/api/user/delete</code>ï¼ˆåˆ é™¤ç”¨æˆ·ï¼‰ã€<code>/api/order/update-status</code>ï¼ˆä¿®æ”¹è®¢å•çŠ¶æ€ï¼‰ç­‰é«˜å±æ¥å£ï¼Œä»…æˆæƒè§’è‰²å¯è°ƒç”¨ã€‚</li>
<li><strong>æ•°æ®èŒƒå›´æƒé™</strong>ï¼š<code>/api/order/list</code>æ¥å£ï¼Œç®¡ç†å‘˜è¿”å›æ‰€æœ‰è®¢å•ï¼Œæ™®é€šç”¨æˆ·ä»…è¿”å›è‡ªå·±åˆ›å»ºçš„è®¢å•ã€‚</li>
<li><strong>æ¥å£é¢‘ç‡é™åˆ¶</strong>ï¼šå…è´¹ç”¨æˆ·è°ƒç”¨<code>/api/search</code>æ¥å£æ¯åˆ†é’Ÿæœ€å¤š 10 æ¬¡ï¼Œä»˜è´¹ç”¨æˆ·æ— é™åˆ¶ã€‚</li>
<li><strong>æ¥å£ç‰ˆæœ¬æƒé™</strong>ï¼šæ–°ç‰ˆæœ¬æ¥å£ï¼ˆå¦‚<code>/api/v2/order</code>ï¼‰ä»…å¯¹å·²å‡çº§ç‰ˆæœ¬çš„ç§Ÿæˆ·å¼€æ”¾ã€‚</li>
<li><strong>Token å¤±æ•ˆ / æƒé™å˜æ›´å¤„ç†</strong>ï¼šToken è¿‡æœŸæˆ–æƒé™è¢«å›æ”¶æ—¶ï¼Œæ¥å£è¿”å› 403/401ï¼Œå‰ç«¯éœ€ä¼˜é›…å¤„ç†ï¼ˆå¦‚ç™»å‡ºã€åˆ·æ–° Tokenï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-22">2. ä¼ä¸šçº§å®ç°æ–¹å¼</h3>
<h4 data-id="heading-23">ï¼ˆ1ï¼‰è¯·æ±‚ / å“åº”æ‹¦æˆªå™¨çš„å…¨é“¾è·¯æ§åˆ¶</h4>
<ul>
<li><strong>è¯·æ±‚æ‹¦æˆªå™¨</strong>ï¼šæ·»åŠ  Tokenã€æƒé™é¢„åˆ¤ã€æ•°æ®èŒƒå›´å‚æ•°ï¼š</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript">axios.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {
    <span class="hljs-comment">// 1. æ·»åŠ Tokenï¼ˆé‰´æƒåŸºç¡€ï¼‰</span>
    <span class="hljs-keyword">const</span> token = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>);
    <span class="hljs-keyword">if</span> (token) {
      config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${token}</span>`</span>;
    }

    <span class="hljs-comment">// 2. æ¥å£æƒé™é¢„åˆ¤ï¼ˆå‡å°‘æ— æ•ˆè¯·æ±‚ï¼‰</span>
    <span class="hljs-keyword">const</span> { url, method } = config;
    <span class="hljs-comment">// ç”Ÿæˆæ¥å£æƒé™æ ‡è¯†ï¼ˆå¦‚"DELETE:/api/user/delete" â†’ "user:delete"ï¼‰</span>
    <span class="hljs-keyword">const</span> apiPerm = <span class="hljs-title function_">generateApiPermissionKey</span>(method, url);
    <span class="hljs-keyword">if</span> (apiPerm &amp;&amp; !permissionCenter.<span class="hljs-title function_">hasPermission</span>(apiPerm)) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`æ— æ¥å£æƒé™ï¼š<span class="hljs-subst">${apiPerm}</span>`</span>));
    }

    <span class="hljs-comment">// 3. æ•°æ®èŒƒå›´å‚æ•°ï¼ˆé…åˆåç«¯è¿‡æ»¤ï¼‰</span>
    <span class="hljs-keyword">if</span> (url.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'/api/order/list'</span>) &amp;&amp; !permissionCenter.<span class="hljs-title function_">hasRole</span>(<span class="hljs-string">'admin'</span>)) {
      config.<span class="hljs-property">params</span> = { ...config.<span class="hljs-property">params</span>, <span class="hljs-attr">creatorId</span>: store.<span class="hljs-property">getters</span>.<span class="hljs-property">userId</span> };
    }

    <span class="hljs-comment">// 4. å¹‚ç­‰æ€§å¤„ç†ï¼ˆæ•æ„Ÿæ¥å£é˜²é‡å¤è°ƒç”¨ï¼‰</span>
    <span class="hljs-keyword">if</span> ([<span class="hljs-string">'POST'</span>, <span class="hljs-string">'PUT'</span>, <span class="hljs-string">'DELETE'</span>].<span class="hljs-title function_">includes</span>(method)) {
      config.<span class="hljs-property">headers</span>[<span class="hljs-string">'X-Request-Id'</span>] = <span class="hljs-title function_">uuidv4</span>();
    }

    <span class="hljs-keyword">return</span> config;
  },
  <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)
);
</code></pre>
<ul>
<li><strong>å“åº”æ‹¦æˆªå™¨</strong>ï¼šå¤„ç†æƒé™å¼‚å¸¸ã€Token å¤±æ•ˆï¼š</li>
</ul>
<pre><code class="hljs language-go" lang="go">axios.interceptors.response.use(
  (response) =&gt; {
    <span class="hljs-comment">// ç¼“å­˜é¢‘ç¹è°ƒç”¨çš„éæ•æ„Ÿæ¥å£ï¼ˆå¦‚ç”¨æˆ·ä¿¡æ¯ï¼‰</span>
    <span class="hljs-keyword">if</span> (response.config.url === <span class="hljs-string">'/api/user/info'</span> &amp;&amp; response.status === <span class="hljs-number">200</span>) {
      store.dispatch(<span class="hljs-string">'cacheUserInfo'</span>, response.data);
    }
    <span class="hljs-keyword">return</span> response;
  },
  (<span class="hljs-type">error</span>) =&gt; {
    <span class="hljs-keyword">const</span> { status, data } = <span class="hljs-type">error</span>.response || {};
    <span class="hljs-keyword">switch</span> (status) {
      <span class="hljs-keyword">case</span> <span class="hljs-number">401</span>:
        <span class="hljs-comment">// Tokenå¤±æ•ˆï¼Œç™»å‡ºå¹¶è·³è½¬ç™»å½•é¡µ</span>
        ElMessage.<span class="hljs-type">error</span>(data.msg || <span class="hljs-string">'ç™»å½•å·²å¤±æ•ˆï¼Œè¯·é‡æ–°ç™»å½•'</span>);
        store.dispatch(<span class="hljs-string">'logout'</span>);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-number">403</span>:
        <span class="hljs-comment">// åŒºåˆ†æ¥å£æƒé™ä¸è¶³å’Œæ•°æ®æƒé™ä¸è¶³</span>
        <span class="hljs-keyword">const</span> msg = data.msg || <span class="hljs-string">'æ— æ¥å£è®¿é—®æƒé™'</span>;
        ElMessage.<span class="hljs-type">error</span>(msg);
        <span class="hljs-comment">// æ•æ„Ÿæ“ä½œæƒé™ä¸è¶³ï¼Œå¯è®°å½•æ—¥å¿—</span>
        <span class="hljs-keyword">if</span> (msg.includes(<span class="hljs-string">'æ•æ„Ÿæ“ä½œ'</span>)) {
          reportPermissionError({ url: <span class="hljs-type">error</span>.config.url, msg });
        }
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-number">429</span>:
        ElMessage.<span class="hljs-type">error</span>(<span class="hljs-string">'æ¥å£è°ƒç”¨è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•'</span>);
        <span class="hljs-keyword">break</span>;
    }
    <span class="hljs-keyword">return</span> Promise.reject(<span class="hljs-type">error</span>);
  }
);
</code></pre>
<h4 data-id="heading-24">ï¼ˆ2ï¼‰æ¥å£æƒé™æ ‡è¯†ç”Ÿæˆè§„åˆ™</h4>
<p>ç»Ÿä¸€æ¥å£ä¸æƒé™ç çš„æ˜ å°„å…³ç³»ï¼Œé¿å…æ··ä¹±ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// ç”Ÿæˆæ¥å£æƒé™æ ‡è¯†ï¼ˆmethod + æ¥å£è·¯å¾„ç®€åŒ–ï¼‰
const <span class="hljs-attr">generateApiPermissionKey</span> = (method, url) =&gt; {
  // ç¤ºä¾‹ï¼šDELETE /api/user/123 â†’ user:delete
  // ç¤ºä¾‹ï¼šGET /api/order/list â†’ order:list
  const <span class="hljs-attr">pathParts</span> = url.replace(/^/api//, <span class="hljs-string">''</span>).split(<span class="hljs-string">'/'</span>)<span class="hljs-comment">;</span>
  if (<span class="hljs-attr">pathParts.length</span> === <span class="hljs-number">0</span>) return <span class="hljs-string">''</span><span class="hljs-comment">;</span>
  const <span class="hljs-attr">resource</span> = pathParts[<span class="hljs-number">0</span>]<span class="hljs-comment">; // èµ„æºåï¼ˆuser/orderï¼‰</span>
  let <span class="hljs-attr">action</span> = method.toLowerCase()<span class="hljs-comment">; // æ“ä½œï¼ˆget/post/deleteï¼‰</span>
  // ç‰¹æ®Šæ˜ å°„ï¼šgetåˆ—è¡¨ â†’ listï¼Œgetè¯¦æƒ… â†’ view
  if (<span class="hljs-attr">method</span> === <span class="hljs-string">'GET'</span> &amp;&amp; pathParts.includes(<span class="hljs-string">'list'</span>)) action = <span class="hljs-string">'list'</span><span class="hljs-comment">;</span>
  if (<span class="hljs-attr">method</span> === <span class="hljs-string">'GET'</span> &amp;&amp; pathParts.length &gt;= <span class="hljs-number">2</span> &amp;&amp; !isNaN(pathParts[<span class="hljs-number">1</span>])) action = <span class="hljs-string">'view'</span><span class="hljs-comment">;</span>
  return `${resource}:${action}`<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-25">3. è®¾è®¡æ¨¡å¼</h3>
<ul>
<li><strong>ä»£ç†æ¨¡å¼</strong>ï¼šè¯·æ±‚æ‹¦æˆªå™¨ä½œä¸ºæ¥å£è°ƒç”¨çš„ä»£ç†ï¼Œç»Ÿä¸€æ·»åŠ é‰´æƒä¿¡æ¯ã€æƒé™é¢„åˆ¤ã€æ•°æ®èŒƒå›´å‚æ•°ï¼Œä¸ä¿®æ”¹ä¸šåŠ¡è¯·æ±‚ä»£ç ã€‚</li>
<li><strong>è´£ä»»é“¾æ¨¡å¼</strong>ï¼šåç«¯æ¥å£æ ¡éªŒæŒ‰ â€œToken æ ¡éªŒâ†’æƒé™ç æ ¡éªŒâ†’æ•°æ®èŒƒå›´æ ¡éªŒâ†’é¢‘ç‡é™åˆ¶â€ çš„é¡ºåºæ‰§è¡Œï¼Œå‰ç«¯å“åº”æ‹¦æˆªå™¨æŒ‰ â€œ401 å¤„ç†â†’403 å¤„ç†â†’429 å¤„ç†â€ é¡ºåºå¤„ç†å¼‚å¸¸ã€‚</li>
<li><strong>ç¼“å­˜æ¨¡å¼</strong>ï¼šå¯¹éæ•æ„Ÿæ¥å£ç»“æœè¿›è¡Œç¼“å­˜ï¼Œå‡å°‘é‡å¤è¯·æ±‚ï¼Œæå‡æ€§èƒ½ï¼ˆéœ€åœ¨æƒé™å˜æ›´æ—¶æ¸…ç©ºç¼“å­˜ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-26">4. æƒé™å­˜å‚¨ä¸å®‰å…¨æ€§</h3>
<h4 data-id="heading-27">ï¼ˆ1ï¼‰å­˜å‚¨æ–¹æ¡ˆ</h4>
<ul>
<li>Tokenï¼šå­˜å‚¨åœ¨ localStorageï¼ˆæŒä¹…åŒ–ï¼‰æˆ– sessionStorageï¼ˆä¼šè¯çº§ï¼‰ï¼Œå»ºè®®è®¾ç½®<code>HttpOnly</code>å’Œ<code>Secure</code>å±æ€§ï¼ˆéœ€åç«¯é…åˆï¼‰ï¼Œé˜²æ­¢ XSS æ”»å‡»ã€‚</li>
<li>æ¥å£æƒé™æ ‡è¯†æ˜ å°„è§„åˆ™ï¼šå‰ç«¯é¢„è®¾ï¼ˆå¦‚<code>user:delete</code>å¯¹åº”<code>/api/user/delete</code>ï¼‰ï¼Œæ— éœ€æŒä¹…åŒ–ï¼Œç¡®ä¿ä¸åç«¯ä¸€è‡´ã€‚</li>
<li>æ¥å£ç¼“å­˜ï¼šå­˜å‚¨åœ¨ Vuex/Piniaï¼ˆå†…å­˜ï¼‰ï¼Œç¼“å­˜ key åŒ…å«ç”¨æˆ· ID å’Œæƒé™æ ‡è¯†ï¼Œé¿å…å¤šç”¨æˆ·æ•°æ®æ··æ·†ã€‚</li>
</ul>
<h4 data-id="heading-28">ï¼ˆ2ï¼‰å®‰å…¨æ€§ä¿éšœ</h4>
<ul>
<li>åç«¯ç»å¯¹æ ¡éªŒï¼šå‰ç«¯æƒé™é¢„åˆ¤ä»…ä¸ºä½“éªŒä¼˜åŒ–ï¼Œåç«¯å¿…é¡»å¯¹æ¯ä¸ªæ¥å£åšç‹¬ç«‹æƒé™æ ¡éªŒï¼Œé˜²æ­¢ç”¨æˆ·é€šè¿‡ Postman ç­‰å·¥å…·ç»•è¿‡å‰ç«¯æ‹¦æˆªã€‚</li>
<li>Token åŠ å¯†ä¼ è¾“ï¼šæ‰€æœ‰æ¥å£é‡‡ç”¨ HTTPS åè®®ï¼ŒToken åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­åŠ å¯†ï¼Œé¿å…ä¸­é—´äººæ”»å‡»ã€‚</li>
<li>æ•æ„Ÿæ¥å£äºŒæ¬¡éªŒè¯ï¼šæ ¸å¿ƒæ¥å£ï¼ˆå¦‚åˆ é™¤ç”¨æˆ·ã€è½¬è´¦ï¼‰éœ€æ·»åŠ äºŒæ¬¡éªŒè¯ï¼ˆå¦‚è¾“å…¥å¯†ç ã€çŸ­ä¿¡éªŒè¯ç ï¼‰ï¼Œå³ä½¿æƒé™æ ¡éªŒé€šè¿‡ï¼Œä¹Ÿéœ€ç¡®è®¤æ“ä½œæ„å›¾ã€‚</li>
<li>æƒé™æ—¥å¿—è®°å½•ï¼šå‰ç«¯è°ƒç”¨æ•æ„Ÿæ¥å£æ—¶ï¼Œä¼ é€’æ“ä½œäººã€æ“ä½œæ—¶é—´ã€IP åœ°å€ç­‰ä¿¡æ¯ï¼Œåç«¯å­˜å‚¨æ—¥å¿—ï¼Œä¾¿äºå®‰å…¨è¿½æº¯ã€‚</li>
</ul>
<h2 data-id="heading-29">å››ã€é™è®¾è®¡çš„é¢å¤–å…³é”®è¦ç‚¹</h2>
<h3 data-id="heading-30">1. æƒé™å¯è§†åŒ–é…ç½®</h3>
<ul>
<li>ç®¡ç†å‘˜é€šè¿‡ç³»ç»Ÿåå°çš„ â€œæƒé™é…ç½®é¡µé¢â€ï¼Œå‹¾é€‰è§’è‰²å¯¹åº”çš„æƒé™ï¼ˆå¦‚ â€œç”¨æˆ·ç®¡ç†â€â†’â€œåˆ é™¤ç”¨æˆ·â€ï¼‰ï¼Œåç«¯å­˜å‚¨è§’è‰² - æƒé™æ˜ å°„å…³ç³»ã€‚</li>
<li>å‰ç«¯æ¸²æŸ“ â€œæƒé™æ ‘â€ï¼Œæ”¯æŒæŒ‰æ¨¡å—æŠ˜å  / å±•å¼€ï¼Œä¾¿äºç®¡ç†å‘˜æ“ä½œï¼›æ”¯æŒæ‰¹é‡åˆ†é…æƒé™ï¼ˆå¦‚ç»™ â€œè¿è¥â€ è§’è‰²åˆ†é…æ‰€æœ‰è®¢å•ç›¸å…³æƒé™ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-31">2. æƒé™åŠ¨æ€æ›´æ–°ä¸åŒæ­¥</h3>
<ul>
<li>ç®¡ç†å‘˜ä¿®æ”¹ç”¨æˆ·æƒé™åï¼Œå‰ç«¯é€šè¿‡ WebSocket æˆ–è½®è¯¢å®æ—¶è·å–æœ€æ–°æƒé™ï¼Œè°ƒç”¨<code>permissionCenter.updatePermissions</code>æ›´æ–°æ•°æ®ï¼Œæ— éœ€ç”¨æˆ·åˆ·æ–°é¡µé¢ã€‚</li>
<li>è·¨æ ‡ç­¾é¡µæƒé™åŒæ­¥ï¼šé€šè¿‡<code>localStorage</code>ç›‘å¬äº‹ä»¶ï¼Œä¸€ä¸ªæ ‡ç­¾é¡µä¿®æ”¹æƒé™åï¼Œå…¶ä»–æ ‡ç­¾é¡µè‡ªåŠ¨æ›´æ–°æƒé™çŠ¶æ€ã€‚</li>
</ul>
<h3 data-id="heading-32">3. è·¨ç«¯æƒé™ç»Ÿä¸€ç®¡ç†</h3>
<ul>
<li>è‹¥é¡¹ç›®åŒ…å« PC ç«¯ã€ç§»åŠ¨ç«¯ã€å°ç¨‹åºï¼Œè®¾è®¡ç»Ÿä¸€çš„æƒé™ä¸­å¿ƒï¼ˆåç«¯ï¼‰ï¼Œå„ç«¯å…±ç”¨ä¸€å¥—æƒé™ç å’Œè§’è‰²ä½“ç³»ï¼ˆå¦‚<code>user:delete</code>åœ¨æ‰€æœ‰ç«¯å«ä¹‰ä¸€è‡´ï¼‰ã€‚</li>
<li>å‰ç«¯å„ç«¯å¤ç”¨æƒé™æ ¡éªŒé€»è¾‘ï¼ˆå¦‚<code>permissionCenter</code>å·¥å…·ç±»ï¼‰ï¼Œç¡®ä¿æƒé™æ§åˆ¶è¡Œä¸ºä¸€è‡´ã€‚</li>
</ul>
<h3 data-id="heading-33">4. æ€§èƒ½ä¼˜åŒ–</h3>
<ul>
<li>æƒé™æ ¡éªŒç¼“å­˜ï¼šå¯¹é¢‘ç¹æ ¡éªŒçš„æƒé™ç ï¼ˆå¦‚è¡¨æ ¼åˆ—æƒé™ï¼‰è¿›è¡Œç¼“å­˜ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚</li>
<li>åŠ¨æ€è·¯ç”±æ‡’åŠ è½½ï¼šåŠ¨æ€æ·»åŠ çš„è·¯ç”±ç»„ä»¶é‡‡ç”¨æ‡’åŠ è½½ï¼ˆ<code>() =&gt; import('../views/xxx.vue')</code>ï¼‰ï¼Œå‡å°‘é¦–å±åŠ è½½æ—¶é—´ã€‚</li>
<li>æƒé™æ•°æ®æ‰¹é‡è¯·æ±‚ï¼šç™»å½•åä¸€æ¬¡æ€§è·å–ç”¨æˆ·è§’è‰²ã€æƒé™ç ã€è·¯ç”±é…ç½®ï¼Œé¿å…å¤šæ¬¡è¯·æ±‚åç«¯ã€‚</li>
</ul>
<h3 data-id="heading-34">5. ç°åº¦å‘å¸ƒä¸ A/B æµ‹è¯•</h3>
<ul>
<li>æƒé™ä¸­å¿ƒæ”¯æŒ â€œç°åº¦è§„åˆ™â€ï¼Œå¦‚ â€œç”¨æˆ· ID åœ¨ç™½åå•å†…â€â€œéƒ¨é—¨ä¸ºæµ‹è¯•éƒ¨â€ çš„ç”¨æˆ·å¯è®¿é—®æ–°åŠŸèƒ½è·¯ç”±å’ŒæŒ‰é’®ã€‚</li>
<li>é€šè¿‡æƒé™é…ç½®å®ç° A/B æµ‹è¯•ï¼Œç»™ä¸åŒç”¨æˆ·ç»„åˆ†é…ä¸åŒæƒé™ï¼ŒéªŒè¯åŠŸèƒ½æ•ˆæœåå…¨é‡å¼€æ”¾ã€‚</li>
</ul>
<h2 data-id="heading-35">äº”ã€æ€»ç»“</h2>
<h3 data-id="heading-36">1. æƒé™è®¾è®¡çš„ä¸‰å±‚é€»è¾‘</h3>
<ul>
<li>å‰ç«¯è·¯ç”±æƒé™ï¼šæ§åˆ¶ â€œèƒ½å¦è®¿é—®é¡µé¢â€ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼Œå‡å°‘æ— æ•ˆè¯·æ±‚ã€‚</li>
<li>å‰ç«¯å…ƒç´ æƒé™ï¼šæ§åˆ¶ â€œèƒ½å¦çœ‹åˆ°åŠŸèƒ½â€ï¼Œéšè—æ— æƒé™å…ƒç´ ï¼Œé¿å…ç”¨æˆ·å›°æƒ‘ã€‚</li>
<li>åç«¯æ¥å£æƒé™ï¼šæ§åˆ¶ â€œèƒ½å¦æ‰§è¡Œæ“ä½œâ€ï¼Œæ˜¯å®‰å…¨æ ¸å¿ƒï¼Œå¿…é¡»ç»å¯¹å¯é ã€‚</li>
</ul>
<h3 data-id="heading-37">2. å®‰å…¨æ€§åŸåˆ™</h3>
<ul>
<li>å‰ç«¯æƒé™æ˜¯ â€œä½“éªŒå±‚â€ï¼Œä¸èƒ½æ›¿ä»£åç«¯æ ¡éªŒï¼›åç«¯æƒé™æ˜¯ â€œå®‰å…¨å±‚â€ï¼Œå¿…é¡»è¦†ç›–æ‰€æœ‰æ•æ„Ÿæ“ä½œã€‚</li>
<li>æ•æ„Ÿä¿¡æ¯ï¼ˆTokenã€æƒé™æ ‡è¯†ï¼‰éœ€åŠ å¯†å­˜å‚¨å’Œä¼ è¾“ï¼Œé˜²æ­¢æ³„éœ²ã€‚</li>
<li>æƒé™å˜æ›´éœ€å®æ—¶åŒæ­¥ï¼Œé¿å…æƒé™ä¸ä¸€è‡´å¯¼è‡´çš„å®‰å…¨éšæ‚£ã€‚</li>
</ul>
<h3 data-id="heading-38">3. å¯æ‰©å±•æ€§åŸåˆ™</h3>
<ul>
<li>é‡‡ç”¨è®¾è®¡æ¨¡å¼ï¼ˆå¦‚è´£ä»»é“¾ã€è£…é¥°å™¨ã€å•ä¾‹ï¼‰é™ä½ä»£ç è€¦åˆï¼Œä¾¿äºåæœŸæ‰©å±•æƒé™è§„åˆ™ã€‚</li>
<li>é¢„ç•™è‡ªå®šä¹‰æƒé™è§„åˆ™æ¥å£ï¼Œåº”å¯¹å¤æ‚ä¸šåŠ¡åœºæ™¯ï¼ˆå¦‚å¤šæ¡ä»¶ç»„åˆæƒé™ï¼‰ã€‚</li>
<li>æƒé™é…ç½®å¯è§†åŒ–ã€åŠ¨æ€åŒ–ï¼Œå‡å°‘å‰ç«¯å‘ç‰ˆé¢‘ç‡ï¼Œæå‡è¿è¥æ•ˆç‡ã€‚</li>
</ul>
<p>é¡¹ç›®ä¸­ï¼Œæƒé™è®¾è®¡å¹¶éä¸€æˆä¸å˜ï¼Œéœ€æ ¹æ®ä¸šåŠ¡è§„æ¨¡å’Œå®‰å…¨è¦æ±‚é€æ­¥è¿­ä»£ï¼šåˆæœŸå¯é‡‡ç”¨ â€œè§’è‰² + é™æ€æƒé™â€ï¼Œä¸­æœŸå¼•å…¥ â€œæƒé™ç  + åŠ¨æ€è·¯ç”±â€ï¼ŒåæœŸå‡çº§ä¸º â€œå¯è§†åŒ–é…ç½® + ç»†ç²’åº¦æ•°æ®æƒé™â€ï¼Œæœ€ç»ˆå®ç° â€œå®‰å…¨ã€çµæ´»ã€æ˜“ç»´æŠ¤â€ çš„æƒé™ä½“ç³»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€é”®å»æ°´å°ï½œ5 æ¬¾å…è´¹å°çº¢ä¹¦è§£æå·¥å…·æ¨è]]></title>    <link>https://juejin.cn/post/7576852209565106203</link>    <guid>https://juejin.cn/post/7576852209565106203</guid>    <pubDate>2025-11-26T09:14:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576852209565106203" data-draft-id="7576852209565089819" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€é”®å»æ°´å°ï½œ5 æ¬¾å…è´¹å°çº¢ä¹¦è§£æå·¥å…·æ¨è"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-26T09:14:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å‡Œè§ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3350967174565198"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€é”®å»æ°´å°ï½œ5 æ¬¾å…è´¹å°çº¢ä¹¦è§£æå·¥å…·æ¨è
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3350967174565198/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å‡Œè§ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T09:14:28.000Z" title="Wed Nov 26 2025 09:14:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>åˆ·çŸ­è§†é¢‘æ—¶ï¼Œçœ‹åˆ°å–œæ¬¢çš„å†…å®¹æƒ³å­˜åˆ°æ‰‹æœºé‡Œï¼Œç»“æœç‚¹"ä¿å­˜"å´æç¤º"ä¸å…è®¸"ï¼Ÿåˆ«æ…Œï¼Œä¸æ˜¯æ‰‹æœºåäº†ï¼Œè€Œæ˜¯ä½œè€…æˆ–å¹³å°æŠŠä¸‹è½½å¼€å…³å…³æ‰äº†ã€‚ä¸‹é¢æ•™ä½ å‡ æ‹›ï¼Œç…§æ ·èƒ½æŠŠè§†é¢‘"æ•‘"å›æ¥â€”â€”é€‚ç”¨äºæŠ–éŸ³ã€å°çº¢ä¹¦ã€å¿«æ‰‹ç­‰ä¸»æµ Appï¼Œå…¨ç¨‹å¤§ç™½è¯ï¼Œä¸€çœ‹å°±ä¼šã€‚</p>
<h2 data-id="heading-1">äºŒã€<strong>ç›´æ¥ä¿å­˜åˆ°ç›¸å†Œ</strong></h2>
<p>å¯¹äºæœªé™åˆ¶ä¸‹è½½æƒé™çš„è§†é¢‘ï¼Œæ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>ç‚¹å‡»<strong>åˆ†äº«</strong>æŒ‰é’®ã€‚</li>
<li>åœ¨å¼¹å‡ºçš„é€‰é¡¹ä¸­ï¼Œé€‰æ‹©<strong>ä¿å­˜åˆ°ç›¸å†Œ</strong>ã€‚</li>
<li>è§†é¢‘ä¼šè‡ªåŠ¨ä¿å­˜åˆ°æ‰‹æœºç›¸å†Œä¸­ã€‚</li>
</ol>
<h2 data-id="heading-2">ä¸‰ã€<strong>æ— æ³•ç›´æ¥ä¿å­˜çš„è§†é¢‘</strong></h2>
<p>æœ‰äº›è§†é¢‘å› åˆ›ä½œè€…è®¾ç½®äº†"ç¦æ­¢ä¸‹è½½"åŠŸèƒ½ï¼Œ<strong>ä¿å­˜åˆ°ç›¸å†Œ</strong>æŒ‰é’®ä¼šæ˜¾ç¤ºä¸ºç°è‰²ï¼Œæ— æ³•ç›´æ¥ç‚¹å‡»ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹æ–¹æ³•ï¼š</p>
<h3 data-id="heading-3">1. å±å¹•å½•åˆ¶</h3>
<ul>
<li>åˆ©ç”¨æ‰‹æœºè‡ªå¸¦çš„å±å¹•å½•åˆ¶åŠŸèƒ½ï¼Œæ‰‹åŠ¨å½•åˆ¶è§†é¢‘å†…å®¹ã€‚</li>
<li>ç¼ºç‚¹ï¼šå¯èƒ½éœ€è¦åç»­è£å‰ªå¤šä½™çš„å†…å®¹ã€‚</li>
</ul>
<h3 data-id="heading-4"><strong>2. å€ŸåŠ©ç¬¬ä¸‰æ–¹å·¥å…·</strong></h3>
<p>ä¸‹é¢å‡ ä¸ªåœ¨çº¿å·¥å…·äº²æµ‹å¯ç”¨ï¼Œæ”¯æŒæŠ–éŸ³ + å°çº¢ä¹¦ã€‚è¯·æŒ‰éœ€é€‰æ‹©ï¼Œç”¨å®Œå³èµ°ï¼š</p>









































<table><thead><tr><th>å·¥å…·åç§° &amp; å…¥å£</th><th>æ”¯æŒå¹³å°</th><th>é€Ÿåº¦/ç¨³å®šæ€§</th><th>ç‰¹è‰²å°åŠŸèƒ½</th></tr></thead><tbody><tr><td><strong>å»æ°´å°ä¸‹è½½é¸­</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fnologo.code24.top%2F" target="_blank" title="https://nologo.code24.top/" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=https%3A%2F%2Fnologo.code24.top" target="_blank" title="https://nologo.code24.top" ref="nofollow noopener noreferrer">nologo.code24.top</a></td><td>æŠ–éŸ³ã€å°çº¢ä¹¦ã€å¿«æ‰‹ç­‰</td><td>å¿«ï¼ˆCDN å›½å†…åŒçº¿ï¼‰</td><td>æµè§ˆå™¨æ’ä»¶+å°ç¨‹åºï¼›è‡ªåŠ¨è¯†åˆ«å‰ªè´´æ¿</td></tr><tr><td><strong>å°çº¢ä¹¦ä¸“ç”¨ä¸‹è½½</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.xhs-download.online%2F" target="_blank" title="https://www.xhs-download.online/" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.xhs-download.online" target="_blank" title="https://www.xhs-download.online" ref="nofollow noopener noreferrer">www.xhs-download.online</a></td><td>ä»…å°çº¢ä¹¦</td><td>æå¿«ï¼ˆèŠ‚ç‚¹åœ¨é¦™æ¸¯ï¼Œæ™šé«˜å³°ä¹Ÿç¨³ï¼‰</td><td>ä¸“æ³¨å°çº¢ä¹¦é«˜æ¸…å»æ°´å°ä¸‹è½½</td></tr><tr><td><strong>ä¸‹è½½ç‹—</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.xiazaitool.com%2Fxhs" target="_blank" title="https://www.xiazaitool.com/xhs" ref="nofollow noopener noreferrer">www.xiazaitool.com/xhs</a></td><td>æŠ–éŸ³ã€å°çº¢ä¹¦ã€å¿«æ‰‹ç­‰</td><td>ä¸­ç­‰ï¼ˆæ•™è‚²ç½‘å¯ç”¨ï¼‰</td><td>è½»é‡çº§å°çº¢ä¹¦å»æ°´å°ç¥å™¨ï¼Œå›¾ç‰‡ã€è§†é¢‘ä¸€é”®åœ¨çº¿å»æ°´å°ï¼›æ— å¹¿å‘Š</td></tr><tr><td><strong>å°çº¢åˆ·</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.xiaohongshua.com%2F" target="_blank" title="https://www.xiaohongshua.com/" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.xiaohongshua.com" target="_blank" title="https://www.xiaohongshua.com" ref="nofollow noopener noreferrer">www.xiaohongshua.com</a></td><td>ä»…å°çº¢ä¹¦</td><td>å¿«</td><td>ç•Œé¢æç®€ï¼Œä¸‰æ­¥æå®š</td></tr><tr><td>RedNote è§†é¢‘ä¸‹è½½å™¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.rednote-downloader.com%2Fzh" target="_blank" title="https://www.rednote-downloader.com/zh" ref="nofollow noopener noreferrer">www.rednote-downloader.com/zh</a></td><td>ä»…å°çº¢ä¹¦</td><td>å¿«</td><td>ç•Œé¢æç®€</td></tr></tbody></table>
<p><strong>ä½¿ç”¨æµç¨‹ï¼ˆå¤§åŒå°å¼‚ï¼‰ï¼š</strong></p>
<ol>
<li>åœ¨ App é‡Œç‚¹"åˆ†äº« â†’ å¤åˆ¶é“¾æ¥"</li>
<li>æŠŠé“¾æ¥ç²˜è´´åˆ°å¯¹åº”ç½‘é¡µçš„è¾“å…¥æ¡†</li>
<li>ç­‰å¾… 3-5 ç§’å‡ºç°ä¸‹è½½æŒ‰é’® â†’ å³é”®/é•¿æŒ‰ä¿å­˜å³å¯</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ¬¡ Kettle ä¸­æ–‡ä¹±ç å†™å…¥å¤±è´¥çš„å®Œæ•´æ’æŸ¥å®å½•]]></title>    <link>https://juejin.cn/post/7576838552471224363</link>    <guid>https://juejin.cn/post/7576838552471224363</guid>    <pubDate>2025-11-26T08:37:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576838552471224363" data-draft-id="7576838552471207979" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ¬¡ Kettle ä¸­æ–‡ä¹±ç å†™å…¥å¤±è´¥çš„å®Œæ•´æ’æŸ¥å®å½•"/> <meta itemprop="keywords" content="æ•°æ®åº“,åç«¯"/> <meta itemprop="datePublished" content="2025-11-26T08:37:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ«å¶æ¢¨èŠ±"/> <meta itemprop="url" content="https://juejin.cn/user/3913917123816055"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ¬¡ Kettle ä¸­æ–‡ä¹±ç å†™å…¥å¤±è´¥çš„å®Œæ•´æ’æŸ¥å®å½•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3913917123816055/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ«å¶æ¢¨èŠ±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T08:37:44.000Z" title="Wed Nov 26 2025 08:37:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä»Šå¤©åœ¨ç”¨ Kettleï¼ˆPDIï¼‰åšæ•°æ®è¿ç§»æ—¶ï¼Œè¸©äº†ä¸€ä¸ªå…¸å‹çš„ä¸­æ–‡ç¼–ç å‘ã€‚é”™è¯¯ä¿¡æ¯çœ‹èµ·æ¥æŒºå“äººï¼š</p>
<pre><code class="hljs language-sql" lang="sql">Incorrect string <span class="hljs-keyword">value</span>: <span class="hljs-string">'\xC9\xDC\xD0\xCB\xCA\xD0...'</span> <span class="hljs-keyword">for</span> <span class="hljs-keyword">column</span> <span class="hljs-string">'content'</span> <span class="hljs-keyword">at</span> <span class="hljs-type">row</span> <span class="hljs-number">1</span>
</code></pre>
<p>ä¹ä¸€çœ‹ä»¥ä¸ºæ˜¯ç›®æ ‡åº“å­—ç¬¦é›†é—®é¢˜ï¼Œç»“æœä¸€è·¯æ’æŸ¥ä¸‹æ¥ï¼Œå‘ç°æ ¹æºè—å¾—ç‰¹åˆ«æ·±ã€‚ä»Šå¤©æŠŠæ•´ä¸ªè¿‡ç¨‹è®°å½•ä¸‹æ¥ï¼Œå¸Œæœ›èƒ½å¸®åˆ°é‡åˆ°åŒæ ·é—®é¢˜çš„æœ‹å‹ã€‚</p>
<hr/>
<h2 data-id="heading-0">èµ·å› ï¼šä¸€ä¸ªçœ‹ä¼¼ç®€å•çš„æ•°æ®åŒæ­¥ä»»åŠ¡</h2>
<p>æˆ‘çš„ä»»åŠ¡å¾ˆæ˜ç¡®ï¼š</p>
<ul>
<li><strong>æºåº“</strong>ï¼šMySQL 8.0ï¼ŒIP <code>180.23.1.1:3306</code>ï¼Œåº“å <code>oldtest</code></li>
<li><strong>ç›®æ ‡åº“</strong>ï¼šå¦ä¸€ä¸ª MySQL 8.0 å®ä¾‹ï¼Œç«¯å£ <code>3315</code>ï¼Œåº“å <code>newtest</code></li>
<li><strong>å·¥å…·</strong>ï¼šKettle 7.1ï¼ˆåˆ«é—®ä¸ºä»€ä¹ˆä¸ç”¨æ–°ç‰ˆï¼Œè€é¡¹ç›®ï¼‰</li>
</ul>
<p>ä¸¤ä¸ªè¡¨ç»“æ„å‡ ä¹ä¸€æ ·ï¼Œ<code>content</code> å­—æ®µéƒ½æ˜¯ <code>LONGTEXT</code> ç±»å‹ã€‚æˆ‘ä»¥ä¸ºç›´æ¥â€œè¡¨è¾“å…¥ â†’ è¡¨è¾“å‡ºâ€å°±èƒ½æå®šï¼Œç»“æœä¸€è·‘å°±æŠ¥é”™ã€‚</p>
<hr/>
<h2 data-id="heading-1">ç¬¬ä¸€é˜¶æ®µï¼šè¯¯åˆ¤ä¸ºè¿æ¥å‚æ•°æ ¼å¼é”™è¯¯</h2>
<p>æœ€åˆæŠ¥çš„é”™æ ¹æœ¬ä¸æ˜¯ç¼–ç é—®é¢˜ï¼Œè€Œæ˜¯ï¼š</p>
<pre><code class="hljs language-python" lang="python">Invalid ID <span class="hljs-keyword">for</span> region-based ZoneId, invalid <span class="hljs-built_in">format</span>: Asia/Shanghai;Driver <span class="hljs-keyword">class</span>=...
</code></pre>
<p>æˆ‘ä¸€å¼€å§‹å®Œå…¨æ‡µäº†ï¼šæ˜æ˜ URL å†™å¾—å¥½å¥½çš„ï¼Œæ€ä¹ˆ driver class è¢«æ‹¼è¿›å‚æ•°å€¼é‡Œäº†ï¼Ÿ</p>
<p>ğŸ” <strong>æ’æŸ¥è¿‡ç¨‹</strong>ï¼š</p>
<ul>
<li>åå¤æ£€æŸ¥ Custom URLï¼Œç¡®è®¤æ²¡æœ‰å¤šä½™å­—ç¬¦</li>
<li>çªç„¶æƒ³åˆ°ï¼šä¼šä¸ä¼šæ˜¯ â€œOptionsâ€ è¡¨æ ¼é‡Œå†™äº†ä¸œè¥¿ï¼Ÿ</li>
<li>æ‰“å¼€ä¸€çœ‹â€”â€”æœç„¶ï¼ä¹‹å‰æµ‹è¯•æ—¶éšæ‰‹åœ¨ Options é‡Œå¡«è¿‡ä¸€è¡Œï¼ŒValue åˆ—ä¸å°å¿ƒç²˜è´´è¿›äº† <code>Driver class=...</code> è¿™ç§éæ³•å†…å®¹</li>
</ul>
<p>âœ… <strong>è§£å†³</strong>ï¼šæ¸…ç©º Options è¡¨æ ¼ï¼Œæ‰€æœ‰å‚æ•°ç»Ÿä¸€å†™è¿› Custom URLï¼Œç”¨ <code>&amp;</code> åˆ†éš”ã€‚</p>
<p>æ•™è®­ï¼š<strong>Kettle çš„ Options è¡¨æ ¼å’Œ Custom URL æ˜¯åˆå¹¶ä½¿ç”¨çš„ï¼Œè„æ•°æ®ä¼šæ±¡æŸ“æ•´ä¸ªè¿æ¥ä¸²</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-2">ç¬¬äºŒé˜¶æ®µï¼šçœŸæ­£çš„æ•Œäººâ€”â€”ä¸­æ–‡ç¼–ç é—®é¢˜æµ®å‡ºæ°´é¢</h2>
<p>æ¸…ç†å®Œè¿æ¥å‚æ•°åï¼Œèƒ½è¿ä¸Šæ•°æ®åº“äº†ï¼Œä½†ä¸€å†™æ•°æ®å°±æŠ¥ï¼š</p>
<pre><code class="hljs language-c" lang="c">Incorrect <span class="hljs-built_in">string</span> value: <span class="hljs-string">'\xC9\xDC\xD0\xCB\xCA\xD0...'</span> <span class="hljs-keyword">for</span> column <span class="hljs-string">'content'</span>
</code></pre>
<p><code>\xC9\xDC</code> æ˜¯å•¥ï¼ŸæŸ¥äº†ä¸€ä¸‹ï¼Œè¿™æ˜¯ GBK ç¼–ç ä¸‹â€œæ·±â€å­—çš„åå…­è¿›åˆ¶ã€‚è¯´æ˜æ•°æ®æºé‡Œå­˜çš„æ˜¯ GBK å­—èŠ‚ï¼Œä½† MySQL å½“ UTF8 è§£æï¼Œè‡ªç„¶å¤±è´¥ã€‚</p>
<p>ğŸ” <strong>åˆæ­¥åˆ¤æ–­</strong>ï¼š</p>
<ul>
<li>æºè¡¨å£°æ˜æ˜¯ <code>utf8</code>ï¼Œä½†å®é™…å­˜çš„æ˜¯ GBK æ•°æ®ï¼ˆå†å²é—ç•™ï¼‰</li>
<li>ç›®æ ‡è¡¨æ˜¯ <code>utf8mb4</code>ï¼Œç†è®ºä¸Šå…¼å®¹ï¼Œä½†å‰ææ˜¯ä¼ å…¥çš„æ˜¯åˆæ³• UTF8 å­—ç¬¦ä¸²</li>
</ul>
<p>äºæ˜¯æˆ‘åœ¨ä¸¤ä¸ªè¿æ¥é‡Œåˆ†åˆ«åŠ äº†ç¼–ç å‚æ•°ï¼š</p>
<ul>
<li>æºåº“ï¼š<code>characterEncoding=GBK</code></li>
<li>ç›®æ ‡åº“ï¼š<code>characterEncoding=utf8</code></li>
</ul>
<p>ä½†è¿˜æ˜¯å¤±è´¥ï¼</p>
<hr/>
<h2 data-id="heading-3">ç¬¬ä¸‰é˜¶æ®µï¼šè¢«å¿½ç•¥çš„å…³é”®å‚æ•°â€”â€”useUnicode=true</h2>
<p>è¿™æ—¶å€™æˆ‘å¼€å§‹æ€€ç–‘äººç”Ÿï¼šé…ç½®æ˜æ˜æ²¡é”™ï¼Œä¸ºä»€ä¹ˆè¿˜æ˜¯ä¸è¡Œï¼Ÿ</p>
<p>çµæœºä¸€åŠ¨ï¼Œæƒ³èµ·ä»¥å‰çœ‹è¿‡ MySQL JDBC æ–‡æ¡£æåˆ°ï¼š<strong>ä» 5.1 å¼€å§‹ï¼Œå¿…é¡»æ˜¾å¼å¼€å¯ Unicode æ”¯æŒï¼Œå¦åˆ™ characterEncoding å¯èƒ½è¢«å¿½ç•¥</strong>ã€‚</p>
<p>èµ¶ç´§åŠ ä¸Š <code>useUnicode=true</code>ï¼š</p>
<pre><code class="hljs language-text" lang="text"># æºåº“
jdbc:mysql://...?useUnicode=true&amp;characterEncoding=GBK&amp;...

# ç›®æ ‡åº“
jdbc:mysql://...?useUnicode=true&amp;characterEncoding=utf8&amp;...
</code></pre>
<p>æ”¹å®Œä¹‹åï¼Œ<strong>è¿˜æ˜¯å¤±è´¥</strong>ã€‚</p>
<p>æˆ‘å·®ç‚¹æ”¾å¼ƒï¼Œç›´åˆ°åšäº†æœ€åä¸€ä»¶äº‹â€”â€”<strong>é‡å¯ Spoon</strong>ã€‚</p>
<p>ç¥å¥‡çš„äº‹æƒ…å‘ç”Ÿäº†ï¼šè½¬æ¢æˆåŠŸè·‘é€šï¼Œä¸­æ–‡æ­£å¸¸å†™å…¥ï¼</p>
<hr/>
<h2 data-id="heading-4">ä¸ºä»€ä¹ˆé‡å¯æ‰ç”Ÿæ•ˆï¼Ÿ</h2>
<p>åæ¥å¤ç›˜å‘ç°ï¼ŒKettle 7.1 æœ‰ä¸ªéšè—å‘ç‚¹ï¼š</p>
<blockquote>
<p><strong>æ•°æ®åº“è¿æ¥å¯¹è±¡ä¼šè¢«ç¼“å­˜ï¼Œå³ä½¿ä½ ä¿®æ”¹äº† URLï¼Œæ—§çš„è¿æ¥å¯èƒ½è¿˜åœ¨ç”¨</strong></p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘è™½ç„¶æ”¹äº†è¿æ¥é…ç½®ï¼Œä½† Kettle å†…éƒ¨ä»ç„¶ç”¨ç€ä¹‹å‰æ²¡åŠ  <code>useUnicode=true</code> çš„è¿æ¥æ± å®ä¾‹ã€‚åªæœ‰é‡å¯ Spoonï¼Œæ‰èƒ½å½»åº•æ¸…ç©ºç¼“å­˜ï¼Œè®©æ–°é…ç½®ç”Ÿæ•ˆã€‚</p>
<hr/>
<h2 data-id="heading-5">æœ€ç»ˆéªŒè¯ï¼šç¡®ä¿æ¯ä¸€æ­¥éƒ½æ­£ç¡®</h2>
<p>ä¸ºäº†ä¿é™©ï¼Œæˆ‘åœ¨â€œè¡¨è¾“å…¥â€å’Œâ€œè¡¨è¾“å‡ºâ€ä¹‹é—´åŠ äº†ä¸ªâ€œå†™æ—¥å¿—â€æ­¥éª¤ï¼Œæ‰“å° <code>content</code> å­—æ®µã€‚çœ‹åˆ°æ§åˆ¶å°è¾“å‡ºçš„æ˜¯â€œæ·±åœ³å¸‚æŸæŸå•ä½â€è¿™æ ·çš„æ­£å¸¸ä¸­æ–‡ï¼Œå¿ƒé‡Œæ‰è¸å®ã€‚</p>
<p>åŒæ—¶ç¡®è®¤ç›®æ ‡è¡¨ç¡®å®æ˜¯ <code>utf8mb4</code>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SHOW</span> <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> target_table;
<span class="hljs-comment">-- è¾“å‡ºåŒ…å«ï¼šCHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci</span>
</code></pre>
<hr/>
<h2 data-id="heading-6">ç»éªŒæ€»ç»“</h2>
<ol>
<li>
<p><strong>ä¸è¦ç›¸ä¿¡è¡¨çš„å­—ç¬¦é›†å£°æ˜</strong><br/>
å¾ˆå¤šè€ç³»ç»ŸæŠŠ GBK æ•°æ®å¡è¿› <code>utf8</code> è¡¨ï¼Œå®é™…å­˜å‚¨çš„æ˜¯ GBK å­—èŠ‚ã€‚è¦é€šè¿‡ <code>HEX(content)</code> éªŒè¯çœŸå®ç¼–ç ã€‚</p>
</li>
<li>
<p><strong>JDBC è¿æ¥å¿…é¡»æ˜¾å¼å¼€å¯ Unicode</strong><br/>
å…‰å†™ <code>characterEncoding=GBK</code> ä¸å¤Ÿï¼Œä¸€å®šè¦åŠ  <code>useUnicode=true</code>ã€‚</p>
</li>
<li>
<p><strong>Kettle çš„ Options è¡¨æ ¼æ˜¯åŒåˆƒå‰‘</strong><br/>
å®å¯å…¨å†™è¿› Custom URLï¼Œä¹Ÿä¸è¦æ··ç”¨ï¼Œé¿å…å‚æ•°æ±¡æŸ“ã€‚</p>
</li>
<li>
<p><strong>æ”¹å®Œé…ç½®è®°å¾—é‡å¯ Spoon</strong><br/>
Kettle 7.1 çš„è¿æ¥ç¼“å­˜æœºåˆ¶ä¼šè®©ä½ è¯¯ä»¥ä¸ºé…ç½®æ²¡ç”Ÿæ•ˆã€‚</p>
</li>
<li>
<p><strong>ç”¨â€œå†™æ—¥å¿—â€æ­¥éª¤éªŒè¯ä¸­é—´æ•°æ®</strong><br/>
åœ¨å…³é”®èŠ‚ç‚¹æ‰“å°å­—æ®µå€¼ï¼Œèƒ½å¿«é€Ÿå®šä½æ˜¯è¯»å–é—®é¢˜è¿˜æ˜¯å†™å…¥é—®é¢˜ã€‚</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-7">é™„ï¼šæ¨èçš„å®Œæ•´è¿æ¥é…ç½®</h2>
<p><strong>æºåº“ï¼ˆè¯»å– GBK æ•°æ®ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">jdbc:mysql://180.23.1.1:3306/oldtest?
  <span class="hljs-attr">useUnicode</span>=<span class="hljs-literal">true</span>&amp;
  <span class="hljs-attr">characterEncoding</span>=GBK&amp;
  <span class="hljs-attr">useSSL</span>=<span class="hljs-literal">false</span>&amp;
  <span class="hljs-attr">allowPublicKeyRetrieval</span>=<span class="hljs-literal">true</span>&amp;
  <span class="hljs-attr">serverTimezone</span>=Asia/Shanghai
</code></pre>
<p><strong>ç›®æ ‡åº“ï¼ˆå†™å…¥ UTF8MB4ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">jdbc:mysql://180.23.1.1:3315/newtest?
  <span class="hljs-attr">useUnicode</span>=<span class="hljs-literal">true</span>&amp;
  <span class="hljs-attr">characterEncoding</span>=utf8&amp;
  <span class="hljs-attr">useSSL</span>=<span class="hljs-literal">false</span>&amp;
  <span class="hljs-attr">allowPublicKeyRetrieval</span>=<span class="hljs-literal">true</span>&amp;
  <span class="hljs-attr">serverTimezone</span>=Asia/Shanghai
</code></pre>
<p>è¿æ¥ç±»å‹é€‰ <strong>Generic database</strong>ï¼ŒDriver class å¡« <code>com.mysql.cj.jdbc.Driver</code>ï¼ŒOptions è¡¨æ ¼ç•™ç©ºã€‚</p>
<hr/>
<p>è¿™æ¬¡æ’æŸ¥èŠ±äº†æˆ‘å¤§åŠå¤©æ—¶é—´ï¼Œä½†ææ¸…æ¥šåŸç†åï¼Œä»¥åå†é‡åˆ°ç±»ä¼¼é—®é¢˜å°±èƒ½ç§’è§£ã€‚å¸Œæœ›è¿™ç¯‡è®°å½•èƒ½å¸®ä½ å°‘èµ°å¼¯è·¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Paimonæºç è§£è¯» -- PartialUpdateMerge]]></title>    <link>https://juejin.cn/post/7576838095518793779</link>    <guid>https://juejin.cn/post/7576838095518793779</guid>    <pubDate>2025-11-26T08:45:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576838095518793779" data-draft-id="7576307259385282587" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Paimonæºç è§£è¯» -- PartialUpdateMerge"/> <meta itemprop="keywords" content="åç«¯,å¤§æ•°æ®,Flink"/> <meta itemprop="datePublished" content="2025-11-26T08:45:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="expect7g"/> <meta itemprop="url" content="https://juejin.cn/user/3514471387235735"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Paimonæºç è§£è¯» -- PartialUpdateMerge
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3514471387235735/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    expect7g
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T08:45:49.000Z" title="Wed Nov 26 2025 08:45:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€.çˆ¶æ¥å£MergeFunction</h2>
<p>å…¶å®ç°å­ç±»å¦‚ä¸‹å›¾</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/daf9fba698f7473fa2181dbd37491923~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZXhwZWN0N2c=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751549&amp;x-signature=155mxf12PrZdVJ0K2qzUUPgTt5w%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒPaimonä¸­æ‰€æœ‰çš„Merge Engineéƒ½å®ç°äº†MergeFunctionæ¥å£ï¼Œé‚£ä¹ˆç»§ç»­çœ‹è¯¥æ¥å£ä¸­çš„4ä¸ªæŠ½è±¡æ–¹æ³•</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MergeFunction</span>&lt;T&gt; {

    <span class="hljs-comment">/**
     * é‡ç½®æ–¹æ³•ï¼Œè¯¥æ–¹æ³•åœ¨add()å‰æˆ–getResult()åè¢«è°ƒç”¨
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">reset</span><span class="hljs-params">()</span>;

    <span class="hljs-comment">/**
     * åˆå¹¶æ–¹æ³•ï¼šå°†è¾“å…¥çš„kvåŠ å…¥åˆ°åˆå¹¶functionä¸­ï¼Œè¿›è¡Œåˆå¹¶
     * <span class="hljs-doctag">@param</span> kv
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(KeyValue kv)</span>;

    <span class="hljs-comment">/**
     * è·å–ç»“æœï¼šè·å–å½“å‰åˆå¹¶åçš„ç»“æœ
     * <span class="hljs-doctag">@return</span>
     */</span>
    T <span class="hljs-title function_">getResult</span><span class="hljs-params">()</span>;

    <span class="hljs-comment">/**
     * ç¼“å­˜ï¼šæŒ‰éœ€å¤åˆ¶è¾“å…¥æ¥çš„kvï¼Œæ”¾å…¥å†…å­˜ä¸­
     * <span class="hljs-doctag">@return</span>
     */</span>
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">requireCopy</span><span class="hljs-params">()</span>;
}
</code></pre>
<h2 data-id="heading-1">äºŒ.PartialUpdateMergeFunction</h2>
<h3 data-id="heading-2">1.å±æ€§å’Œå…³é”®å‡½æ•°</h3>
<h4 data-id="heading-3">(1) å±æ€§å’Œæ„é€ å‡½æ•°</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">SEQUENCE_GROUP</span> <span class="hljs-operator">=</span> <span class="hljs-string">"sequence-group"</span>; <span class="hljs-comment">// åºåˆ—ç»„çš„æ ‡è¯†å­—ç¬¦ä¸²ï¼Œåç»­ä¼šåˆ¤æ–­æœ‰æ²¡æœ‰é…ç½®sequence-group</span>
    <span class="hljs-comment">// 1.é…ç½®ç›¸å…³</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> InternalRow.FieldGetter[] getters; <span class="hljs-comment">// å­—æ®µå–å€¼å™¨ï¼Œå¯ä»¥ç†è§£ä¸ºåå°„è·å–Rowä¸­å­—æ®µçš„å€¼</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> ignoreDelete; <span class="hljs-comment">// æ˜¯å¦å¿½ç•¥DEKETEç±»å‹ï¼Œè¿™ä¹Ÿæ˜¯å’Œé…ç½®'ignore-delete'ç»‘å®š</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;WrapperWithFieldIndex&lt;FieldsComparator&gt;&gt; fieldSeqComparators; <span class="hljs-comment">// æ¯”è¾ƒå™¨ï¼Œç”¨äºå†³å®šèšåˆæ“ä½œä¸­çš„æ–‡ä»¶çš„èšåˆé¡ºåº</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> fieldSequenceEnabled; <span class="hljs-comment">// æ˜¯å¦å¯ç”¨äº†field-sequnceï¼Œå’Œé…ç½®'sequnce-group'ç»‘å®šï¼Œé»˜è®¤æ˜¯none</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;WrapperWithFieldIndex&lt;FieldAggregator&gt;&gt; fieldAggregators; <span class="hljs-comment">// fieldèšåˆå™¨ï¼Œå’Œé…ç½®'fields.xxx.aggregate-function'ç»‘å®š</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> removeRecordOnDelete; <span class="hljs-comment">// å½“rowkindæ”¶åˆ°-Dï¼Œæ˜¯å¦ç§»é™¤è¯¥è¡Œæ•°æ®ï¼Œå’Œé…ç½®'partial-update.remove-record-on-delete'ç»‘å®šï¼Œé»˜è®¤æ˜¯falseä¸ç§»é™¤</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Set&lt;Integer&gt; sequenceGroupPartialDelete; <span class="hljs-comment">// å½“sequnce-group-deleteç»‘å®šçš„å­—æ®µæ”¶åˆ°-Dï¼Œæ˜¯å¦ç§»é™¤æ”¹è¡Œå­—æ®µï¼Œå’Œé…ç½®'partial-update.remove-record-on-sequence-group'ç»‘å®šï¼Œé»˜è®¤æ˜¯noneï¼Œä¸ç»‘å®šsgçš„deleteå­—æ®µ</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span>[] nullables; <span class="hljs-comment">// æ ‡è¯†æ¯ä¸ªå­—æ®µæ˜¯å¦å…è®¸ä¸ºnull</span>
    <span class="hljs-comment">// 2.çŠ¶æ€ç›¸å…³</span>
    <span class="hljs-keyword">private</span> InternalRow currentKey; <span class="hljs-comment">// å½“å‰æ­£åœ¨å¤„ç†çš„Keyä¸»é”®</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> latestSequenceNumber; <span class="hljs-comment">// å½“å‰è¯¥Keyä¸‹è®°å½•çš„æœ€æ–°sequnceNumberåºåˆ—å·</span>
    <span class="hljs-keyword">private</span> GenericRow row; <span class="hljs-comment">// ç”¨äºç¼“å­˜èšåˆä¸­é—´ç»“æœçš„å¯¹è±¡</span>
    <span class="hljs-keyword">private</span> KeyValue reused; <span class="hljs-comment">// å¤ç”¨çš„KVå¯¹è±¡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> currentDeleteRow; <span class="hljs-comment">// æ ‡è®°å½“å‰èšåˆçš„ç»“æœæ˜¯å¦ä¸ºDeleteç±»å‹</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> notNullColumnFilled; <span class="hljs-comment">// æ ‡è®°æ˜¯å¦å·²ç»å¡«å……äº†énullåˆ—</span>

    <span class="hljs-comment">/**
     * å¦‚æœé¦–ä¸ªå€¼ä¸ºå›é€€retractæ“ä½œï¼Œä¸”æœªæ”¶åˆ°insertè®°å½•ï¼Œåˆ™è¯¥è¡Œçš„rowkindåº”è¯¥ä¸ºRowKind.DELETE
     * æ³¨æ„ï¼šå¦‚æœæ²¡æœ‰æ”¶åˆ°RowKind.INSERTçš„æ•°æ®ï¼Œé‚£ä¹ˆpuè¡¨çš„seuqnce-groupå¯èƒ½æ— æ³•æ­£ç¡®è®¾ç½®currentDeleteRow
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> meetInsert; <span class="hljs-comment">// æ ‡è®°æ˜¯å¦é‡åˆ°è¿‡ INSERT ç±»å‹çš„è®°å½•ï¼Œç”¨äºå¤„ç†å¤æ‚çš„åˆ é™¤é€»è¾‘ã€‚</span>

    <span class="hljs-keyword">protected</span> <span class="hljs-title function_">PartialUpdateMergeFunction</span><span class="hljs-params">(
            InternalRow.FieldGetter[] getters,
            <span class="hljs-type">boolean</span> ignoreDelete,
            Map&lt;Integer, FieldsComparator&gt; fieldSeqComparators,
            Map&lt;Integer, FieldAggregator&gt; fieldAggregators,
            <span class="hljs-type">boolean</span> fieldSequenceEnabled,
            <span class="hljs-type">boolean</span> removeRecordOnDelete,
            Set&lt;Integer&gt; sequenceGroupPartialDelete,
            <span class="hljs-type">boolean</span>[] nullables)</span> {
        <span class="hljs-built_in">this</span>.getters = getters;
        <span class="hljs-built_in">this</span>.ignoreDelete = ignoreDelete;
        <span class="hljs-built_in">this</span>.fieldSeqComparators = getKeySortedListFromMap(fieldSeqComparators);
        <span class="hljs-built_in">this</span>.fieldAggregators = getKeySortedListFromMap(fieldAggregators);
        <span class="hljs-built_in">this</span>.fieldSequenceEnabled = fieldSequenceEnabled;
        <span class="hljs-built_in">this</span>.removeRecordOnDelete = removeRecordOnDelete;
        <span class="hljs-built_in">this</span>.sequenceGroupPartialDelete = sequenceGroupPartialDelete;
        <span class="hljs-built_in">this</span>.nullables = nullables;
    }
</code></pre>
<h4 data-id="heading-4">(2) fieldSeqComparatorsçš„åˆ›å»ºæ–¹æ³•</h4>
<p>è¯¥fieldSeqComparatorsæ˜¯åœ¨Factoryçš„æ„é€ å‡½æ•°ä¸­åˆ›å»ºçš„ï¼Œå¾ˆé•¿ï¼Œæˆ‘ä»¬å°±çœ‹ç›¸å…³ä»£ç å³å¯</p>
<p><strong>è¿™æ˜¯å…³é”®ç‚¹ï¼ï¼ï¼</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/* æ¡ˆä¾‹å¦‚ä¸‹
"fields.se_sign.sequence-group" : "uids,pids,views",
"fields.views.aggregate-function" : "sum",
*/</span>
<span class="hljs-keyword">for</span> (Map.Entry&lt;String, String&gt; entry : options.toMap().entrySet()) {
    <span class="hljs-type">String</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> entry.getKey(); <span class="hljs-comment">// "fields.se_sign.sequence-group"</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">v</span> <span class="hljs-operator">=</span> entry.getValue(); <span class="hljs-comment">// "uids,pids,views"</span>
    <span class="hljs-keyword">if</span> (k.startsWith(FIELDS_PREFIX) &amp;&amp; k.endsWith(SEQUENCE_GROUP)) {
        List&lt;String&gt; sequenceFields =
                Arrays.stream(
                                k.substring(
                                                FIELDS_PREFIX.length() + <span class="hljs-number">1</span>,
                                                k.length()
                                                        - SEQUENCE_GROUP.length()
                                                        - <span class="hljs-number">1</span>)
                                        .split(FIELDS_SEPARATOR))
                        .map(fieldName -&gt; validateFieldName(fieldName, fieldNames))
                        .collect(Collectors.toList()); <span class="hljs-comment">// [se_sign]</span>
        allSequenceFields.addAll(sequenceFields); <span class="hljs-comment">// [se_sign]</span>

        Supplier&lt;FieldsComparator&gt; userDefinedSeqComparator =
                () -&gt; UserDefinedSeqComparator.create(rowType, sequenceFields, <span class="hljs-literal">true</span>); <span class="hljs-comment">// se_signçš„æ¯”è¾ƒå™¨</span>
        Arrays.stream(v.split(FIELDS_SEPARATOR))
                .map(
                        fieldName -&gt;
                                fieldNames.indexOf(
                                        validateFieldName(fieldName, fieldNames)))
                .forEach(<span class="hljs-comment">// éå†[uids,pids,views]çš„index</span>
                        field -&gt; {
                            <span class="hljs-keyword">if</span> (fieldSeqComparators.containsKey(field)) {
                                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(
                                        String.format(
                                                <span class="hljs-string">"Field %s is defined repeatedly by multiple groups: %s"</span>,
                                                fieldNames.get(field), k));
                            }
                            fieldSeqComparators.put(field, userDefinedSeqComparator);
                            <span class="hljs-comment">/* ç”Ÿæˆä¸€ä¸ªmapä¸‰ä¸ªé”®å€¼å¯¹
                              uidsçš„index -&gt; se_signçš„æ¯”è¾ƒå™¨
                              pidsçš„index -&gt; se_signçš„æ¯”è¾ƒå™¨
                              viewsçš„index -&gt; se_signçš„æ¯”è¾ƒå™¨
                             */</span>
                        });

        <span class="hljs-comment">// add self</span>
        sequenceFields.forEach(
                fieldName -&gt; {
                    <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> fieldNames.indexOf(fieldName);
                    fieldSeqComparators.put(index, userDefinedSeqComparator); <span class="hljs-comment">// æœ€åæ”¾se_signçš„index -&gt; se_signçš„æ¯”è¾ƒå™¨</span>
                    sequenceGroupMap.put(fieldName, index);
                });
    }
}
</code></pre>
<h3 data-id="heading-5">2.<code>reset()</code>é‡ç½®æ–¹æ³•</h3>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-comment">/**
     * é‡ç½®åˆå¹¶å‡½æ•°çš„æ‰€æœ‰å†…éƒ¨çŠ¶æ€
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">reset</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">this</span>.currentKey = <span class="hljs-literal">null</span>;
        <span class="hljs-built_in">this</span>.meetInsert = <span class="hljs-literal">false</span>;
        <span class="hljs-built_in">this</span>.notNullColumnFilled = <span class="hljs-literal">false</span>;
        <span class="hljs-built_in">this</span>.row = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericRow</span>(getters.length); <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„GenericRowå¯¹è±¡ä½œä¸ºåˆå¹¶ç»“æœçš„è½½ä½“ï¼Œé•¿åº¦ä¸å­—æ®µæ•°é‡ï¼ˆgetters.lengthï¼‰ä¸€è‡´ã€‚</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šè¿™é‡Œrowæ˜¯åˆ›å»ºæ–°å¯¹è±¡è€Œéå¤ç”¨æ—§å¯¹è±¡ï¼Œé¿å…æ—§åˆ†ç»„çš„æ•°æ®æ®‹ç•™å½±å“æ–°åˆ†ç»„çš„ç»“æœ</span>
        <span class="hljs-built_in">this</span>.latestSequenceNumber = <span class="hljs-number">0</span>;
        fieldAggregators.forEach(w -&gt; w.getValue().reset()); <span class="hljs-comment">// éå†æ‰€æœ‰å­—æ®µèšåˆå™¨ï¼ˆFieldAggregatorï¼‰ï¼Œå¹¶è°ƒç”¨å®ƒä»¬å„è‡ªçš„reset()æ–¹æ³•ã€‚è¿™æ˜¯å› ä¸ºèšåˆå™¨ï¼ˆå¦‚ SUMã€MAX ç­‰ï¼‰è‡ªèº«ä¹Ÿç»´æŠ¤ç€ä¸­é—´çŠ¶æ€ï¼ˆä¾‹å¦‚ç´¯åŠ å’Œï¼‰ï¼Œéœ€è¦ä¸ºæ–°åˆ†ç»„é‡ç½®è¿™äº›çŠ¶æ€ã€‚</span>
    }
</code></pre>
<h3 data-id="heading-6">3.<code>add()</code>åˆå¹¶æ–¹æ³• -- æ ¸å¿ƒé€»è¾‘</h3>
<h4 data-id="heading-7">(1) <code>add()</code></h4>
<ul>
<li>kvï¼šå½“å‰æ¥çš„æ•°æ®</li>
<li>rowï¼šç¼“å­˜çš„ä¸­é—´èšåˆåçš„æ•°æ®</li>
</ul>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-comment">/**
     * åˆå¹¶é€»è¾‘çš„æ ¸å¿ƒæ“ä½œ
     * <span class="hljs-doctag">@param</span> kv
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(KeyValue kv)</span> {
        <span class="hljs-comment">// refresh key object to avoid reference overwritten</span>
        currentKey = kv.key();
        currentDeleteRow = <span class="hljs-literal">false</span>;
        <span class="hljs-comment">// 1.å¤„ç†å›æ’¤è®°å½•ï¼Œå°±æ˜¯å¤„ç†RowKindä¸º-Uæˆ–-Dçš„</span>
        <span class="hljs-keyword">if</span> (kv.valueKind().isRetract()) {
            <span class="hljs-comment">// åˆå§‹åŒ–ç©ºè¡Œï¼šå¦‚æœè¿˜æœªå¡«å……éç©ºåˆ—ï¼Œåˆ™è°ƒinitRow()åˆå§‹åŒ–è¿›è¡Œèµ‹å€¼</span>
            <span class="hljs-keyword">if</span> (!notNullColumnFilled) {
                initRow(row, kv.value());
                notNullColumnFilled = <span class="hljs-literal">true</span>;
            }

            <span class="hljs-comment">// In 0.7- versions, the delete records might be written into data file even when</span>
            <span class="hljs-comment">// ignore-delete configured, so ignoreDelete still needs to be checked</span>
            <span class="hljs-comment">// è§£å†³Paimon0.7ç‰ˆæœ¬çš„bugï¼Œå½“æ—¶é…ç½®äº†ignore-deleteä¸ä¼šç”Ÿæ•ˆï¼Œå› æ­¤ï¼Œè¿™é‡Œä»ç„¶è¦åˆ¤æ–­ä¸€ä¸‹ï¼Œå®ç°é…ç½®äº†ignore-delete=true ä¸å¤„ç†</span>
            <span class="hljs-comment">// CASE-1: è‹¥é…ç½®äº†ignore-deleteä¸ºtrueï¼Œåˆ™ç›´æ¥è·³è¿‡è¯¥æ¡æ•°æ®çš„å¤„ç†</span>
            <span class="hljs-keyword">if</span> (ignoreDelete) {
                <span class="hljs-keyword">return</span>;
            }

            latestSequenceNumber = kv.sequenceNumber(); <span class="hljs-comment">// æ›´æ–°latestSequenceNumber</span>

            <span class="hljs-comment">// CASE-2: è‹¥å¼€å¯äº†field-sequneceï¼Œä¹Ÿå°±æ˜¯é…ç½®äº†'sequence-group'ï¼Œåˆ™è°ƒretractWithSequenceGroup()ï¼Œè¿›è¡Œæ›´ç»†åŒ–çš„å›æ’¤å¤„ç†</span>
            <span class="hljs-keyword">if</span> (fieldSequenceEnabled) {
                retractWithSequenceGroup(kv);
                <span class="hljs-keyword">return</span>;
            }
            <span class="hljs-comment">// CASE-3: è‹¥é…ç½®äº†partial-update.remove-record-on-deleteä¸ºtrueï¼Œä¸”å½“å‰RowKinkæ˜¯-Dï¼Œé‚£ä¹ˆè°ƒinitRow()ï¼Œå¹¶æ ‡è®°currentDeleteRow = true é‡ç½®è¯¥è¡Œæ•°æ®</span>
            <span class="hljs-keyword">if</span> (removeRecordOnDelete) {
                <span class="hljs-keyword">if</span> (kv.valueKind() == RowKind.DELETE) {
                    currentDeleteRow = <span class="hljs-literal">true</span>;
                    row = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericRow</span>(getters.length);
                    initRow(row, kv.value());
                }
                <span class="hljs-keyword">return</span>;
            }
            <span class="hljs-comment">// æœ€åï¼Œè‹¥ä»€ä¹ˆéƒ½æ²¡é…ç½®ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œæé†’ç”¨æˆ·å¿…é¡»é€‰æ‹©ä¸€ç§å›æ’¤æµçš„å¤„ç†æ–¹å¼</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span>
                    String.join(
                            <span class="hljs-string">"\n"</span>,
                            <span class="hljs-string">"By default, Partial update can not accept delete records,"</span>
                                    + <span class="hljs-string">" you can choose one of the following solutions:"</span>,
                            <span class="hljs-string">"1. Configure 'ignore-delete' to ignore delete records."</span>,
                            <span class="hljs-string">"2. Configure 'partial-update.remove-record-on-delete' to remove the whole row when receiving delete records."</span>,
                            <span class="hljs-string">"3. Configure 'sequence-group's to retract partial columns. Also configure 'partial-update.remove-record-on-sequence-group' to remove the whole row when receiving deleted records of `specified sequence group`."</span>);

            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(msg);
        }
        <span class="hljs-comment">// å¤„ç†æ­£å¸¸æµï¼Œä¹Ÿå°±æ˜¯RowKindä¸º+Iã€+Uçš„æ•°æ®</span>
        latestSequenceNumber = kv.sequenceNumber(); <span class="hljs-comment">// æ›´æ–°latestSequenceNumber</span>
        <span class="hljs-keyword">if</span> (fieldSeqComparators.isEmpty()) { <span class="hljs-comment">// è‹¥æ²¡æœ‰å­—æ®µçº§çš„æ¯”è¾ƒå™¨ï¼Œåˆ™è°ƒupdateNonNullFields()å»éç©ºè¦†ç›–</span>
            updateNonNullFields(kv);
        } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// è‹¥é…ç½®äº†å­—æ®µçº§çš„æ¯”è¾ƒå™¨ï¼Œåˆ™è°ƒupdateNonNullFields()å»æŒ‰sequnce-groupå»æ›´æ–°</span>
            updateWithSequenceGroup(kv); <span class="hljs-comment">// è¿™æ˜¯é‡ç‚¹</span>
        }
        meetInsert = <span class="hljs-literal">true</span>;
        notNullColumnFilled = <span class="hljs-literal">true</span>;
    }
</code></pre>
<h4 data-id="heading-8">(2) è°ƒç”¨çš„<code>initRow()</code>å’Œ<code>updateNonNullFields()</code></h4>
<p>è¿™ä¿©æ–¹æ³•éƒ½æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯åˆå§‹åŒ–èµ‹å€¼ï¼Œå­—æ®µä¸å…è®¸ä¸ºnullï¼Œä½†æ˜¯fieldå€¼ä¸ºnullï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸
å…¶å®å°±æ˜¯éç©ºè¦†ç›–</p>
<p><strong>ç–‘é—®ï¼šä¸ºä»€ä¹ˆè¿™é‡Œæ˜¯è¦†ç›–ï¼Œè€Œä¸èƒ½èšåˆå‘¢ï¼Ÿé‚£å¦‚æœæˆ‘å°±æ˜¯å»ºpuè¡¨çš„æ—¶å€™é…ç½®äº†èšåˆå‡½æ•°å‘¢ï¼Ÿ</strong>
<strong>è§£ç­”</strong>ï¼š1.3ç‰ˆæœ¬åï¼Œè‹¥partial-updateè¡¨é‡Œé¢è¦é…ç½®aggregate-functionï¼Œå¿…é¡»ç”¨sequnce-groupæŒ‡å®šï¼Œå¦åˆ™DDLå°±ä¼šæŠ¥é”™<code>[ERROR]Â CouldÂ notÂ executeÂ SQLÂ statement.Â Reason:   java.lang.IllegalArgumentException:Â MustÂ useÂ sequenceÂ groupÂ forÂ aggregationÂ functionsÂ butÂ notÂ foundÂ forÂ fieldÂ views.</code></p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-comment">// åˆå§‹åŒ–èµ‹å€¼ï¼Œå­—æ®µä¸å…è®¸ä¸ºnullï¼Œä½†æ˜¯fieldå€¼ä¸ºnullï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initRow</span><span class="hljs-params">(GenericRow row, InternalRow value)</span> {
        <span class="hljs-comment">// éå†Rowç±»å‹çš„æ¯ä¸€ä¸ªå­—æ®µï¼Œæ£€æŸ¥æ˜¯å¦å…è®¸ä¸ºnullï¼Œä¸å…è®¸ï¼Œåˆ™æŠ›å¼‚å¸¸</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; getters.length; i++) {
            <span class="hljs-type">Object</span> <span class="hljs-variable">field</span> <span class="hljs-operator">=</span> getters[i].getFieldOrNull(value); <span class="hljs-comment">// è¯¥è¡Œæ•°æ®å¯¹åº”ä½ç½®çš„å­—æ®µå€¼ï¼Œè‹¥æ²¡æœ‰ï¼Œåˆ™ç»™nullã€‚</span>
            <span class="hljs-keyword">if</span> (!nullables[i]) {
                <span class="hljs-keyword">if</span> (field != <span class="hljs-literal">null</span>) {
                    row.setField(i, field); <span class="hljs-comment">// ç»™è¯¥å­—æ®µè¿›è¡Œèµ‹å€¼</span>
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"Field "</span> + i + <span class="hljs-string">" can not be null"</span>);
                }
            }
        }
    }
    
    <span class="hljs-comment">// é€»è¾‘å’ŒinitRowç±»ä¼¼ï¼Œéƒ½æ˜¯å­—æ®µä¸å…è®¸nullï¼Œä½†fieldå€¼ä¸ºnullï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateNonNullFields</span><span class="hljs-params">(KeyValue kv)</span> {
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; getters.length; i++) {
            <span class="hljs-type">Object</span> <span class="hljs-variable">field</span> <span class="hljs-operator">=</span> getters[i].getFieldOrNull(kv.value());
            <span class="hljs-keyword">if</span> (field != <span class="hljs-literal">null</span>) {
                row.setField(i, field);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">if</span> (!nullables[i]) {
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"Field "</span> + i + <span class="hljs-string">" can not be null"</span>);
                }
            }
        }
    }
</code></pre>
<h4 data-id="heading-9">(3) è°ƒç”¨çš„<code>updateWithSequenceGroup()</code> -- æ ¸å¿ƒ1</h4>
<p>è¯¥æ–¹æ³•æ˜¯é’ˆå¯¹é…ç½®äº†sequnce-groupçš„ä¸€ä¸ªåˆå¹¶é€»è¾‘ï¼Œå¹¶ä¸”ä¹Ÿæ¶‰åŠåˆ°puæ¨¡å‹çš„aggregate-functionèšåˆæ“ä½œ -- é‡ç‚¹ï¼ï¼ï¼</p>
<p>æ¡ˆä¾‹ï¼š</p>
<blockquote>
<p>"fields.se_sign.sequence-group" : "uids,pids,views",<br/>
"fields.views.aggregate-function" : "sum",</p>
</blockquote>
<p>é‚£ä¹ˆï¼Œsequnce-groupçš„æ ‡è®°å­—æ®µä¸ºï¼šse_signï¼Œç»‘å®šå­—æ®µä¸ºï¼šuidsã€pidsã€views</p>
<p><strong>æµç¨‹å¦‚ä¸‹ï¼šé‡ç‚¹ï¼ï¼ï¼</strong></p>
<ol>
<li>è¿­ä»£sequnce-groupçš„æ ‡è®°å­—æ®µçš„æ¯”è¾ƒå™¨ï¼Œè¿™é‡Œæ˜¯se_signï¼›</li>
<li>è¿­ä»£field-aggregate-functionå­—æ®µçš„èšåˆå™¨ï¼Œè¿™é‡Œæ˜¯viewsçš„sumï¼›</li>
<li>éå†æ‰€æœ‰å­—æ®µè¿›è¡Œæ¯”è¾ƒå’Œèšåˆå¤„ç†ï¼š
<ol>
<li>åŒ¹é…æ‰¾åˆ°å½“å‰ä½ç½®içš„å­—æ®µå¯¹åº”çš„æ¯”è¾ƒå™¨å’Œèšåˆå™¨ï¼›</li>
<li>è·å–iä½ç½®å­—æ®µå½“å‰çš„ç´¯åŠ å’Œï¼Œrowä¸­çš„iä½ç½®å­—æ®µå€¼ï¼›</li>
<li>CASE-1: å¤„ç†æ²¡æœ‰åŒ¹é…åˆ°çš„æ¯”è¾ƒå™¨çš„å­—æ®µï¼Œè¯´æ˜è¯¥å­—æ®µæ²¡æœ‰è¢«sequnce-groupç»‘å®šï¼Œå› æ­¤ç›´æ¥è¿›è¡Œæ›´æ–°(æœ‰èšåˆï¼Œå°±èšåˆï¼›æ²¡æœ‰å°±ç›´æ¥è¦†ç›–)ï¼›</li>
<li>CASE-2ï¼šå¤„ç†æœ‰åŒ¹é…åˆ°çš„æ¯”è¾ƒå™¨çš„å­—æ®µï¼š
<ul>
<li>è‹¥å½“å‰è¡Œæ•°æ®çš„sequnce-groupæ ‡è®°å­—æ®µä¸ºnullï¼Œåˆ™ç›´æ¥è·³è¿‡ç»‘å®šå­—æ®µå’Œæ ‡è®°å­—æ®µçš„å…¨éƒ¨å¤„ç†ï¼›</li>
<li>è‹¥å½“å‰è®°å½•kvçš„åºåˆ—å€¼ &gt;= ç¼“å­˜è¡Œrowçš„åºåˆ—å€¼ï¼Œæ‰§è¡Œèšåˆæ›´æ–°ï¼Œå½“å‰è¡Œçš„se_signçš„å€¼ &gt;= rowä¸­çš„se_signå€¼ï¼›
<ol>
<li>å½“å‰å­—æ®µæ˜¯sequnce-groupçš„<strong>æ ‡è®°å­—æ®µ</strong>ï¼Œå¦‚se_signï¼Œåˆ™è¿›è¡ŒåŸå­æ€§æ“ä½œï¼›</li>
<li>å½“å‰å­—æ®µæ˜¯sequnce-groupçš„<strong>ç»‘å®šå­—æ®µ</strong>ï¼Œå¦‚uidsã€viewsï¼Œåˆ™ç›´æ¥æ‰§è¡Œè¦†ç›–æˆ–èšåˆæ“ä½œï¼›</li>
</ol>
</li>
<li>è‹¥å½“å‰è®°å½•kvçš„åºåˆ— &lt; ç¼“å­˜è¡Œrowçš„åºåˆ—ï¼Œä½†æœ‰èšåˆå™¨ï¼Œåˆ™ä»ç„¶è¿›è¡Œèšåˆï¼›</li>
</ul>
<blockquote>
<p>è¿™é‡Œä¸ªäººè®¤ä¸ºæ˜¯ä¸€ä¸ªBUGï¼Œåç»­å¸Œæœ›ç¤¾åŒºèƒ½ä¿®æ”¹å§ï¼Œå…¶å®å¯ä»¥å¼€å¯ä¸€ä¸ªå¼€å…³ï¼Œé’ˆå¯¹2ç§ä¸åŒæƒ…å†µ</p>
<ol>
<li>æœ‰çš„ä¸šåŠ¡æ˜¯ä¸å…è®¸è¦†ç›–ç»´åº¦ï¼Œä½†æ˜¯æŒ‡æ ‡è¿˜æ˜¯è¦çš„ï¼›</li>
<li>æœ‰çš„ä¸šåŠ¡æ˜¯ç»´åº¦å’ŒæŒ‡æ ‡åŸå­ç»‘å®šï¼Œè¦ä¹ˆä¸€èµ·æ›´æ–°ï¼Œè¦ä¹ˆå…¨éƒ½ä¸æ›´æ–°ï¼›</li>
</ol>
</blockquote>
</li>
</ol>
</li>
</ol>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateWithSequenceGroup</span><span class="hljs-params">(KeyValue kv)</span> {
        <span class="hljs-comment">/* ä¾‹å¦‚ï¼š
        "fields.se_sign.sequence-group" : "uids,pids,views",
        "fields.views.aggregate-function" : "sum",
         */</span>
        <span class="hljs-comment">// 1.è¿­ä»£sequnce-groupçš„æ ‡è®°å­—æ®µçš„æ¯”è¾ƒå™¨ï¼Œå°±æ˜¯se_sign</span>
        Iterator&lt;WrapperWithFieldIndex&lt;FieldsComparator&gt;&gt; comparatorIter =
                fieldSeqComparators.iterator(); <span class="hljs-comment">// se_sign</span>
        WrapperWithFieldIndex&lt;FieldsComparator&gt; curComparator =
                comparatorIter.hasNext() ? comparatorIter.next() : <span class="hljs-literal">null</span>;
        <span class="hljs-comment">// 2.è¿­ä»£field-aggregate-functionå­—æ®µçš„èšåˆå™¨</span>
        Iterator&lt;WrapperWithFieldIndex&lt;FieldAggregator&gt;&gt; aggIter = fieldAggregators.iterator(); <span class="hljs-comment">// views</span>
        WrapperWithFieldIndex&lt;FieldAggregator&gt; curAgg = aggIter.hasNext() ? aggIter.next() : <span class="hljs-literal">null</span>;
        <span class="hljs-comment">// è®°å½•å“ªäº›å­—æ®µæ‰€å±çš„sequnce-groupä¸ºnullï¼Œé¿å…å¯¹åŒä¸€ä¸ªç©ºsgç»„è¿›è¡Œé‡å¤å¤„ç†</span>
        <span class="hljs-type">boolean</span>[] isEmptySequenceGroup = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[getters.length];
        <span class="hljs-comment">// 3.éå†æ‰€æœ‰å­—æ®µè¿›è¡Œæ¯”è¾ƒå’Œèšåˆå¤„ç†</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; getters.length; i++) {
            <span class="hljs-comment">// 3-1ï¼šä¸ºå½“å‰å­—æ®µåŒ¹é…å¯¹åº”çš„æ¯”è¾ƒå™¨å’Œèšåˆå™¨</span>
            <span class="hljs-type">FieldsComparator</span> <span class="hljs-variable">seqComparator</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">if</span> (curComparator != <span class="hljs-literal">null</span> &amp;&amp; curComparator.fieldIndex == i) {
                seqComparator = curComparator.getValue();
                curComparator = comparatorIter.hasNext() ? comparatorIter.next() : <span class="hljs-literal">null</span>;
            }

            <span class="hljs-type">FieldAggregator</span> <span class="hljs-variable">aggregator</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">if</span> (curAgg != <span class="hljs-literal">null</span> &amp;&amp; curAgg.fieldIndex == i) {
                aggregator = curAgg.getValue();
                curAgg = aggIter.hasNext() ? aggIter.next() : <span class="hljs-literal">null</span>;
            }

            <span class="hljs-type">Object</span> <span class="hljs-variable">accumulator</span> <span class="hljs-operator">=</span> row.getField(i); <span class="hljs-comment">// è·å–iä½ç½®å­—æ®µå½“å‰çš„ç´¯åŠ å’Œ</span>
            <span class="hljs-comment">/* è¿™é‡Œçš„rowæ˜¯å½“å‰ä¸»é”®åˆ†ç»„ä¸‹æ­£åœ¨æ„å»ºçš„åˆå¹¶ç»“æœè¡Œ
            å½“å¤„ç†å±äºåŒä¸€ä¸ªä¸»é”®çš„å¤šæ¡è®°å½•æ—¶ï¼Œæ‰€æœ‰æ›´æ–°æ“ä½œéƒ½ä¼šç´¯ç§¯åˆ°è¿™ä¸ª row å¯¹è±¡ä¸Š
            å½“åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªä¸»é”®åˆ†ç»„æ—¶ï¼Œreset() ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ rowï¼Œæ—§çš„ row ä¼šè¢«ä¸¢å¼ƒæˆ–è¾“å‡º
             */</span>
            <span class="hljs-comment">// 3-2ï¼šå¤„ç†æ²¡æœ‰åŒ¹é…çš„æ¯”è¾ƒå™¨çš„å­—æ®µ</span>
            <span class="hljs-keyword">if</span> (seqComparator == <span class="hljs-literal">null</span>) {
                <span class="hljs-type">Object</span> <span class="hljs-variable">field</span> <span class="hljs-operator">=</span> getters[i].getFieldOrNull(kv.value());
                <span class="hljs-keyword">if</span> (aggregator != <span class="hljs-literal">null</span>) { <span class="hljs-comment">// è‹¥æœ‰èšåˆå™¨ï¼Œåˆ™æ‰§è¡Œç›¸åº”çš„èšåˆæ“ä½œï¼Œå¦‚SUMã€MAXç­‰</span>
                    row.setField(i, aggregator.agg(accumulator, field));
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (field != <span class="hljs-literal">null</span>) { <span class="hljs-comment">// æ— èšåˆå™¨ï¼Œä½†å­—æ®µä¸ä¸ºnullï¼Œåˆ™è¦†ç›– å…¶å®å°±ç›¸å½“äºé»˜è®¤æ˜¯éç©ºè¦†ç›–</span>
                    row.setField(i, field);
                }
            } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// 3-3ï¼šå¤„ç†æœ‰åŒ¹é…çš„æ¯”è¾ƒå™¨çš„å­—æ®µ</span>
                <span class="hljs-comment">// CASE-1: å¦‚æœsequnce-groupçš„æ ‡è®°å­—æ®µæ˜¯null,åˆ™è·³è¿‡è¯¥ç»‘å®šå­—æ®µçš„å¤„ç†ï¼Œæ¯”å¦‚å½“å‰è¡Œä¸­uidsã€pidsã€viewsçš„se_signä¸ºnullï¼Œåˆ™ä¼šè·³è¿‡è¿™ä¸‰ä¸ªå­—æ®µçš„å¤„ç†</span>
                <span class="hljs-keyword">if</span> (isEmptySequenceGroup(kv, seqComparator, isEmptySequenceGroup)) {
                    <span class="hljs-comment">// skip null sequence group</span>
                    <span class="hljs-keyword">continue</span>; <span class="hljs-comment">// è·³è¿‡çš„æ˜¯å½“å‰sequence-groupæ ‡è®°å­—æ®µçš„å¤„ç†</span>
                }
                <span class="hljs-comment">// å½“sequnce-groupçš„æ ‡è®°å­—æ®µä¸ä¸ºnullçš„æƒ…å†µè¿›è¡Œå¤„ç†ï¼Œse_signä¸ä¸ºnull</span>
                <span class="hljs-type">Object</span> <span class="hljs-variable">field</span> <span class="hljs-operator">=</span> getters[i].getFieldOrNull(kv.value());
                <span class="hljs-comment">// CASE-2: å½“å‰è®°å½•çš„åºåˆ— &gt;= ç¼“å­˜è¡Œçš„åºåˆ—ï¼Œæ‰§è¡Œèšåˆæ›´æ–°ï¼Œå°±æ˜¯æ¯”è¾ƒse_signçš„å€¼</span>
                <span class="hljs-keyword">if</span> (seqComparator.compare(kv.value(), row) &gt;= <span class="hljs-number">0</span>) {
                    <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> i;

                    <span class="hljs-comment">// Multiple sequence fields should be updated at once.</span>
                    <span class="hljs-comment">// é’ˆå¯¹å¤šä¸ªsequnce-groupæ ‡è®°å­—æ®µï¼Œå¦‚"fields.a,b.sequence-group" : "d,e,f", é‚£ä¹ˆå°±ä¼šå¯¹aå’Œbè¿›è¡ŒåŸå­æ“ä½œ</span>
                    <span class="hljs-comment">// å¦‚æœå½“å‰iä½ç½®çš„å­—æ®µæ˜¯sequnce-groupçš„æ ‡è®°å­—æ®µï¼Œå¦‚se_signï¼Œé‚£ä¹ˆå°±ä¼šæ‰§è¡Œä¸‹é¢çš„if+forçš„åŸå­æ€§æ“ä½œ</span>
                    <span class="hljs-keyword">if</span> (Arrays.stream(seqComparator.compareFields())
                            .anyMatch(seqIndex -&gt; seqIndex == index)) {
                        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> fieldIndex : seqComparator.compareFields()) {
                            row.setField(
                                    fieldIndex, getters[fieldIndex].getFieldOrNull(kv.value()));
                        }
                        <span class="hljs-keyword">continue</span>; <span class="hljs-comment">// è·³è¿‡çš„æ˜¯å½“å‰sequence-groupæ ‡è®°å­—æ®µçš„å¤„ç†</span>
                    }
                    <span class="hljs-comment">/* æ›´æ–°èšåˆæ“ä½œ
                        1.æœ‰èšåˆå™¨ï¼ŒæŒ‰ç…§èšåˆé€»è¾‘å»æ“ä½œï¼›
                        2.æ— èšåˆå™¨ï¼Œç›´æ¥è¦†ç›–
                        æ³¨æ„ï¼šè¿™é‡Œçš„è¦†ç›–ä¸æ˜¯éç©ºè¦†ç›–ï¼Œå› æ­¤ï¼Œä¸ºäº†è§£å†³nullçš„è¦†ç›–é—®é¢˜ï¼Œéœ€è¦é…ç½®"fields.default-aggregate-function" : "last_non_null_value", å› ä¸ºé»˜è®¤æ˜¯none
                     */</span>
                    row.setField(
                            i, aggregator == <span class="hljs-literal">null</span> ? field : aggregator.agg(accumulator, field));
                }
                <span class="hljs-comment">// CASE-3: å½“å‰è®°å½•çš„åºåˆ— &lt; ç»“æœè¡Œçš„åºåˆ—ï¼Œä½†æœ‰èšåˆå™¨ï¼Œä»ç„¶è¿›è¡Œèšåˆï¼Œè¿™ä¸ªaggReversed(accumulator, field)å…¶å®å°±æ˜¯agg(field,accumulator)å‚æ•°ä½ç½®æ¢äº†ï¼Œæ²¡åŒºåˆ«</span>
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (aggregator != <span class="hljs-literal">null</span>) {
                    row.setField(i, aggregator.aggReversed(accumulator, field));
                }
            }
        }
    }
</code></pre>
<h4 data-id="heading-10">(4) è°ƒç”¨çš„<code>isEmptySequenceGroup()</code></h4>
<p>è¯¥æ–¹æ³•ä¸»è¦ç”¨äºåˆ¤æ–­sequnce-groupçš„æ ‡è®°å­—æ®µæ˜¯å¦å…¨ä¸ºnullçš„</p>
<p><strong>æ³¨æ„</strong>ï¼šåªæœ‰å…¨éƒ¨çš„æ ‡è®°å­—æ®µéƒ½ä¸ºnullæ‰ä¼šè¿›å…¥ç¼“å­˜ï¼Œç„¶åå†å¤„ç†åç»­çš„æ ‡è®°å­—æ®µæ—¶ï¼Œåªéœ€è¦ç”¨ç¼“å­˜åˆ¤æ–­ç¬¬ä¸€ä¸ªå­—æ®µæ˜¯å¦ä¸ºtrueå³å¯</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmptySequenceGroup</span><span class="hljs-params">(
            KeyValue kv, FieldsComparator comparator, <span class="hljs-type">boolean</span>[] isEmptySequenceGroup)</span> {

        <span class="hljs-comment">// If any flag of the sequence fields is set, it means the sequence group is empty.</span>
        <span class="hljs-comment">// CASE-1. ç¼“å­˜å‘½ä¸­ï¼šå¿«é€Ÿåˆ¤æ–­åºåˆ—ç»„ç¬¬ä¸€ä¸ªæ ‡è®°å­—æ®µæ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºï¼Œåˆ™ç›´æ¥return trueäº†</span>
        <span class="hljs-comment">// è¿™é‡Œéœ€è¦ç»“åˆCASE-3æ‰èƒ½è§£é‡Šï¼Œåªæœ‰å…¨éƒ¨çš„æ ‡è®°å­—æ®µéƒ½ä¸ºnullæ‰ä¼šè¿›å…¥ç¼“å­˜ï¼Œç„¶åå†å¤„ç†åç»­çš„æ ‡è®°å­—æ®µæ—¶ï¼Œåªéœ€è¦ç”¨ç¼“å­˜åˆ¤æ–­ç¬¬ä¸€ä¸ªå­—æ®µæ˜¯å¦ä¸ºtrueå³å¯</span>
        <span class="hljs-keyword">if</span> (isEmptySequenceGroup[comparator.compareFields()[<span class="hljs-number">0</span>]]) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-comment">// CASE-2.éå†å…¨éƒ¨çš„sequnce-groupçš„æ ‡è®°å­—æ®µï¼Œè¿›è¡Œèƒ½åˆ¤ç©ºï¼Œæœ‰ä¸€ä¸ªä¸ä¸ºnullï¼Œåˆ™return falseï¼›</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> fieldIndex : comparator.compareFields()) {
            <span class="hljs-keyword">if</span> (getters[fieldIndex].getFieldOrNull(kv.value()) != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        }

        <span class="hljs-comment">// Set the flag of all the sequence fields of the sequence group.</span>
        <span class="hljs-comment">// CASE-3.ç¼“å­˜å…¨éƒ¨ä¸ºnullçš„sequnce-groupæ ‡è®°å­—æ®µ</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> fieldIndex : comparator.compareFields()) {
            isEmptySequenceGroup[fieldIndex] = <span class="hljs-literal">true</span>;
        }

        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
</code></pre>
<h4 data-id="heading-11">(5) è°ƒç”¨çš„<code>retractWithSequenceGroup()</code> -- æ ¸å¿ƒ2</h4>
<p>ä»£ç å¤„ç†é€»è¾‘å’Œ<code>updateWithSequenceGroup()</code>ç±»ä¼¼ï¼Œåªæ˜¯æœ€åå¤„ç†æœ‰ç‚¹ä¸åŒï¼Œæ¶‰åŠåˆ°å›æ’¤æ“ä½œ</p>
<p>è¿˜æ˜¯ä»¥ä¸Šé¢çš„æ¡ˆä¾‹</p>
<ol>
<li>è¿­ä»£sequnce-groupçš„æ ‡è®°å­—æ®µçš„æ¯”è¾ƒå™¨ï¼Œè¿™é‡Œæ˜¯se_signï¼›</li>
<li>è¿­ä»£field-aggregate-functionå­—æ®µçš„èšåˆå™¨ï¼Œè¿™é‡Œæ˜¯viewsçš„sumï¼›</li>
<li>éå†æ‰€æœ‰å­—æ®µè¿›è¡Œæ¯”è¾ƒå’Œèšåˆå¤„ç†ï¼š
<ol>
<li>åŒ¹é…æ‰¾åˆ°å½“å‰ä½ç½®içš„å­—æ®µå¯¹åº”çš„æ¯”è¾ƒå™¨å’Œèšåˆå™¨ï¼›</li>
<li>åªå¤„ç†æœ‰åŒ¹é…çš„æ¯”è¾ƒå™¨çš„å­—æ®µï¼Œå› ä¸ºåªæœ‰é…ç½®äº†sequnce-groupçš„æ‰ä¼šèµ°åˆ°è¿™ä¸ªæ–¹æ³•å†…
<ul>
<li>è‹¥å½“å‰è¡Œæ•°æ®çš„sequnce-groupæ ‡è®°å­—æ®µä¸ºnullï¼Œåˆ™ç›´æ¥è·³è¿‡ç»‘å®šå­—æ®µå’Œæ ‡è®°å­—æ®µçš„å…¨éƒ¨å¤„ç†ï¼›</li>
<li>è‹¥å½“å‰è®°å½•kvçš„åºåˆ—å€¼ &gt;= ç¼“å­˜è¡Œrowçš„åºåˆ—å€¼ï¼Œæ‰§è¡Œèšåˆæ›´æ–°ï¼Œå½“å‰è¡Œçš„se_signçš„å€¼ &gt;= rowä¸­çš„se_signå€¼ï¼›
<ol>
<li><strong>å›æ’¤æ ‡è®°å­—æ®µ</strong>ï¼Œå¦‚se_signï¼Œåˆ™è°ƒ<code>init()</code>å®ç°åŸå­æ€§å›æ’¤æ“ä½œï¼›</li>
<li><strong>å›æ’¤å…¶ä»–å­—æ®µ</strong>ï¼›æ— èšåˆå™¨å¦‚uidsï¼Œç”¨nullè¦†ç›–ï¼›æœ‰èšåˆå™¨å¦‚viewsï¼Œè°ƒ<code>aggregator.retract()</code>å»è¿›è¡Œå›æ’¤</li>
</ol>
<blockquote>
<p>åº•å±‚å¦‚sumæ˜¯åšå‡æ³•ï¼Œmaxå’Œminæ˜¯æ²¡æœ‰å›æ’¤çš„ï¼Œè°ƒFieldAggregatorçš„ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå…·ä½“çœ‹FieldAggregatorçš„å­ç±»</p>
</blockquote>
</li>
<li>è‹¥å½“å‰è®°å½•kvçš„åºåˆ— &lt; ç¼“å­˜è¡Œrowçš„åºåˆ—ï¼Œä½†æœ‰èšåˆå™¨ï¼Œè°ƒ<code>aggregator.retract()</code>å»è¿›è¡Œå›æ’¤ï¼›</li>
</ul>
</li>
</ol>
</li>
</ol>
<blockquote>
<p>æ³¨æ„: å³ä½¿æˆ‘ä»¬é…ç½®äº†"fields.default-aggregate-function" : "last_non_null_value"å›æ’¤çš„æ—¶å€™ä»ç„¶æ˜¯nullï¼Œå› ä¸ºFieldLastNonNullValueAggå‡½æ•°çš„retractå°±æ˜¯å›æ’¤æµçš„å­—æ®µå€¼éç©ºåˆ™ç»™nullï¼Œç©ºç»™accumulator</p>
</blockquote>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">retractWithSequenceGroup</span><span class="hljs-params">(KeyValue kv)</span> {
        <span class="hljs-comment">// 0.åˆå§‹åŒ–updatedSequenceFields</span>
        Set&lt;Integer&gt; updatedSequenceFields = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();
        <span class="hljs-comment">// 1.è¿­ä»£æ¯”è¾ƒå™¨ï¼Œå¦‚se_sign</span>
        Iterator&lt;WrapperWithFieldIndex&lt;FieldsComparator&gt;&gt; comparatorIter =
                fieldSeqComparators.iterator();
        WrapperWithFieldIndex&lt;FieldsComparator&gt; curComparator =
                comparatorIter.hasNext() ? comparatorIter.next() : <span class="hljs-literal">null</span>;
        <span class="hljs-comment">// 2.è¿­ä»£èšåˆå™¨ï¼Œå¦‚viewsçš„sum</span>
        Iterator&lt;WrapperWithFieldIndex&lt;FieldAggregator&gt;&gt; aggIter = fieldAggregators.iterator();
        WrapperWithFieldIndex&lt;FieldAggregator&gt; curAgg = aggIter.hasNext() ? aggIter.next() : <span class="hljs-literal">null</span>;
        <span class="hljs-comment">// è®°å½•å“ªäº›å­—æ®µæ‰€å±çš„sequnce-groupä¸ºnullï¼Œé¿å…å¯¹åŒä¸€ä¸ªç©ºsgç»„è¿›è¡Œé‡å¤å¤„ç†ï¼Œæ¯ä¸€è½®éƒ½ä¼šnewä¸€ä¸ªæ–°çš„ï¼Œé˜²æ­¢ç¼“å­˜å½±å“</span>
        <span class="hljs-type">boolean</span>[] isEmptySequenceGroup = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[getters.length];
        <span class="hljs-comment">// 3.éå†æ‰€æœ‰å­—æ®µè¿›è¡Œæ¯”è¾ƒå’Œèšåˆå¤„ç†</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; getters.length; i++) {
            <span class="hljs-comment">// 3-1ï¼šä¸ºå½“å‰å­—æ®µåŒ¹é…å¯¹åº”çš„æ¯”è¾ƒå™¨å’Œèšåˆå™¨</span>
            <span class="hljs-type">FieldsComparator</span> <span class="hljs-variable">seqComparator</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">if</span> (curComparator != <span class="hljs-literal">null</span> &amp;&amp; curComparator.fieldIndex == i) {
                seqComparator = curComparator.getValue();
                curComparator = comparatorIter.hasNext() ? comparatorIter.next() : <span class="hljs-literal">null</span>;
            }

            <span class="hljs-type">FieldAggregator</span> <span class="hljs-variable">aggregator</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">if</span> (curAgg != <span class="hljs-literal">null</span> &amp;&amp; curAgg.fieldIndex == i) {
                aggregator = curAgg.getValue();
                curAgg = aggIter.hasNext() ? aggIter.next() : <span class="hljs-literal">null</span>;
            }
            <span class="hljs-comment">// 3-2ï¼šåªå¤„ç†æœ‰åŒ¹é…çš„æ¯”è¾ƒå™¨çš„å­—æ®µï¼Œå› ä¸ºåªæœ‰é…ç½®äº†sequnce-groupçš„æ‰ä¼šèµ°åˆ°è¿™ä¸ªæ–¹æ³•å†…</span>
            <span class="hljs-keyword">if</span> (seqComparator != <span class="hljs-literal">null</span>) {
                <span class="hljs-comment">// CASE-1: å¦‚æœsequnce-groupçš„æ ‡è®°å­—æ®µæ˜¯null,åˆ™è·³è¿‡è¯¥ç»‘å®šå­—æ®µçš„å¤„ç†ï¼Œæ¯”å¦‚å½“å‰è¡Œä¸­uidsã€pidsã€viewsçš„se_signä¸ºnullï¼Œåˆ™ä¼šè·³è¿‡è¿™ä¸‰ä¸ªå­—æ®µçš„å¤„ç†</span>
                <span class="hljs-keyword">if</span> (isEmptySequenceGroup(kv, seqComparator, isEmptySequenceGroup)) {
                    <span class="hljs-comment">// skip null sequence group</span>
                    <span class="hljs-keyword">continue</span>;
                }
                <span class="hljs-comment">// CASE-2: å½“å‰è®°å½•kvçš„åºåˆ— &gt;= ç¼“å­˜è¡Œrowçš„åºåˆ—ï¼Œæ‰§è¡Œèšåˆæ›´æ–°ï¼Œå°±æ˜¯æ¯”è¾ƒse_signçš„å€¼</span>
                <span class="hljs-keyword">if</span> (seqComparator.compare(kv.value(), row) &gt;= <span class="hljs-number">0</span>) {
                    <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> i;

                    <span class="hljs-comment">// Multiple sequence fields should be updated at once.</span>
                    <span class="hljs-comment">// (1) åŸå­æ€§å›æ’¤æ›´æ–°åºåˆ—ç»„å†…çš„æ ‡è®°å­—æ®µ</span>
                    <span class="hljs-keyword">if</span> (Arrays.stream(seqComparator.compareFields())
                            .anyMatch(field -&gt; field == index)) {
                        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> field : seqComparator.compareFields()) {
                            <span class="hljs-comment">// æ²¡å¤„ç†è¿‡è¯¥æ ‡è®°å­—æ®µï¼Œåˆ™è¿›è¡Œå¤„ç†</span>
                            <span class="hljs-keyword">if</span> (!updatedSequenceFields.contains(field)) {
                                <span class="hljs-comment">// è‹¥å½“å‰çš„RowKindä¸º-Dï¼Œä¸”é…ç½®çš„partial-update.remove-record-on-sequence-groupå­—æ®µä¸ºå½“å‰çš„æ ‡è®°fieldï¼Œåˆ™è¿›è¡Œåˆå§‹åŒ–rowï¼Œç„¶åreturnå‡ºå»</span>
                                <span class="hljs-keyword">if</span> (kv.valueKind() == RowKind.DELETE
                                        &amp;&amp; sequenceGroupPartialDelete.contains(field)) {
                                    currentDeleteRow = <span class="hljs-literal">true</span>;
                                    row = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericRow</span>(getters.length);
                                    initRow(row, kv.value());
                                    <span class="hljs-keyword">return</span>;
                                } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// å¦åˆ™ï¼Œç›´æ¥è¦†ç›–åˆ°ç¼“å­˜rowä¸­</span>
                                    row.setField(field, getters[field].getFieldOrNull(kv.value()));
                                    updatedSequenceFields.add(field);
                                }
                            }
                        }
                    }
                    <span class="hljs-comment">// (2) å›æ’¤å…¶ä»–å­—æ®µ</span>
                    <span class="hljs-keyword">else</span> {
                        <span class="hljs-comment">// retract normal field</span>
                        <span class="hljs-comment">// è‹¥æ²¡æœ‰èšåˆå™¨ï¼Œåˆ™ç”¨nullè¦†ç›–</span>
                        <span class="hljs-keyword">if</span> (aggregator == <span class="hljs-literal">null</span>) {
                            row.setField(i, <span class="hljs-literal">null</span>);
                        } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// è‹¥æœ‰èšåˆå™¨ï¼Œåˆ™è°ƒaggregator.retract()å»è¿›è¡Œå›æ’¤ï¼Œåº•å±‚å¦‚sumæ˜¯åšå‡æ³•ï¼Œmaxå’Œminæ˜¯æ²¡æœ‰å›æ’¤çš„ï¼Œè°ƒFieldAggregatorçš„ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå…·ä½“çœ‹FieldAggregatorçš„å­ç±»</span>
                            <span class="hljs-comment">// retract agg field</span>
                            <span class="hljs-type">Object</span> <span class="hljs-variable">accumulator</span> <span class="hljs-operator">=</span> getters[i].getFieldOrNull(row);
                            row.setField(
                                    i,
                                    aggregator.retract(
                                            accumulator, getters[i].getFieldOrNull(kv.value())));
                        }
                    }
                }
                <span class="hljs-comment">// CASE-3: å½“å‰è®°å½•çš„åºåˆ— &lt; ç»“æœè¡Œçš„åºåˆ—ï¼Œä½†æœ‰èšåˆå™¨ï¼Œè°ƒaggregator.retract()å»è¿›è¡Œå›æ’¤</span>
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (aggregator != <span class="hljs-literal">null</span>) {
                    <span class="hljs-comment">// retract agg field for old sequence</span>
                    <span class="hljs-type">Object</span> <span class="hljs-variable">accumulator</span> <span class="hljs-operator">=</span> getters[i].getFieldOrNull(row);
                    row.setField(
                            i,
                            aggregator.retract(accumulator, getters[i].getFieldOrNull(kv.value())));
                }
            }
        }
    }
</code></pre>
<h3 data-id="heading-12">4.<code>getResult()</code>è·å–åˆå¹¶åçš„ç»“æœ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è·å–åˆå¹¶åçš„ç»“æœ</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> KeyValue <span class="hljs-title function_">getResult</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// é‡‡ç”¨reusedç¼“å­˜kvå®ä¾‹ï¼Œé¿å…é¢‘ç¹åˆ›å»ºå¯¹è±¡</span>
    <span class="hljs-keyword">if</span> (reused == <span class="hljs-literal">null</span>) {
        reused = <span class="hljs-keyword">new</span> <span class="hljs-title class_">KeyValue</span>();
    }
    <span class="hljs-comment">/* æ ¹æ®ä¸¤ä¸ªçŠ¶æ€åˆ¤æ–­æœ€ç»ˆçš„å˜æ›´ç±»å‹
        1. currentDeleteRowï¼šæ ‡è®° â€œå½“å‰è®°å½•æ˜¯å¦éœ€è¦è¢«åˆ é™¤â€ï¼Œåœ¨ä¸Šé¢retractWithSequenceGroupä¸­æ‰§è¡Œ-Då›æ’¤çš„æ—¶å€™ä¼šèµ‹true
        2. !meetInsertï¼šæ ‡è®° â€œå½“å‰è®°å½•æ˜¯å¦ä¸æ»¡è¶³æ’å…¥æ¡ä»¶â€ï¼Œé‡ç½®æ˜¯falseï¼Œaddä¼šç»™true
    è‹¥currentDeleteRowä¸ºtrue æˆ– !meetInsertä¸ºtrueï¼šç”ŸæˆRowKind.DELETE
     */</span>
    <span class="hljs-type">RowKind</span> <span class="hljs-variable">rowKind</span> <span class="hljs-operator">=</span> currentDeleteRow || !meetInsert ? RowKind.DELETE : RowKind.INSERT;
    <span class="hljs-keyword">return</span> reused.replace(currentKey, latestSequenceNumber, rowKind, row); <span class="hljs-comment">// æ›´æ–°åˆå¹¶åçš„ç»“æœå¹¶è¿”å›</span>
}
</code></pre>
<h3 data-id="heading-13">5.<code>requireCopy()</code></h3>
<p>ä¸éœ€è¦å¤åˆ¶</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">requireCopy</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
</code></pre>
<h2 data-id="heading-14">ä¸‰.æ€»ç»“</h2>
<p>é¦–å…ˆæ˜¯å‚æ•°é…ç½®</p>
<ol>
<li>private final boolean ignoreDelete; -&gt; ç”±<code>ignore-delete</code>é…ç½®ç»‘å®š;</li>
<li>private final List&lt;WrapperWithFieldIndex&gt; fieldSeqComparators; -&gt; ç”±<code>sequnce-group</code>é…ç½®ç»‘å®š;</li>
<li>private final boolean fieldSequenceEnabled; -&gt; ä¸Šé¢å‚æ•°fieldSeqComparatorsä¸ä¸ºç©ºï¼Œåˆ™å®ƒä¸ºtrue;</li>
<li>private final List&lt;WrapperWithFieldIndex&gt; fieldAggregators; -&gt; ç”±<code>aggregate-function</code>ç»‘å®š;</li>
<li>private final boolean removeRecordOnDelete; -&gt; ç”±<code>partial-update.remove-record-on-delete</code>é…ç½®ç»‘å®š;</li>
<li>private final Set sequenceGroupPartialDelete; -&gt; ç”±<code>partial-update.remove-record-on-sequence-group</code>é…ç½®ç»‘å®šï¼›</li>
</ol>
<p>å…¶æ¬¡æ˜¯addèšåˆæµç¨‹
æ¡ˆä¾‹ï¼š</p>
<blockquote>
<p>"fields.se_sign.sequence-group" : "uids,pids,views",<br/>
"fields.views.aggregate-function" : "sum",</p>
</blockquote>
<ol>
<li>è‹¥å½“å‰è¡Œkvæ•°æ®çš„RowKindä¸º-U/-Dï¼Œåˆ™è¿›è¡Œå›æ’¤æ“ä½œ;</li>
<li>è‹¥å½“å‰è¡Œkvæ•°æ®çš„RowKindä¸º+I/+Uï¼Œåˆ™è¿›è¡Œupdateèšåˆæ›´æ–°æ“ä½œ;</li>
<li>é‡ç‚¹æ˜¯é…ç½®sequnce-groupçš„å­—æ®µï¼Œåˆ†ä¸ºæ ‡è®°å­—æ®µå’Œç»‘å®šå­—æ®µ
<ul>
<li>æ ‡è®°å­—æ®µï¼šå¦‚se_signï¼Œä¼šè¿›è¡ŒåŸå­æ€§å›æ’¤/æ›´æ–° -- å…¶å®å°±æ˜¯è¦†ç›–</li>
<li>ç»‘å®šå­—æ®µï¼šå¦‚uidsã€viewsï¼Œä¼šè¿›è¡Œå›æ’¤/æ›´æ–°
<ul>
<li>éèšåˆçš„ï¼šå›æ’¤ä¼šç›´æ¥ç»™nullï¼›æ›´æ–°æ˜¯ç›´æ¥è¦†ç›–</li>
<li>èšåˆçš„ï¼šè°ƒèšåˆå™¨çš„retract()å›æ’¤ï¼Œå¦‚sumå°±æ˜¯åšå‡æ³•ï¼›æ›´æ–°æ˜¯ç›´æ¥è°ƒagg()èšåˆï¼Œå¦‚sumæ˜¯åšåŠ æ³•</li>
</ul>
</li>
</ul>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¸¸æˆä¸Šæ¶ App Store çš„å®Œæ•´å‘è¡Œæµç¨‹ï¼Œä»æ„å»ºã€åˆè§„åˆ°å®¡æ ¸çš„å¤šè§’è‰²ååŒæŒ‡å—]]></title>    <link>https://juejin.cn/post/7576698454925672454</link>    <guid>https://juejin.cn/post/7576698454925672454</guid>    <pubDate>2025-11-26T09:15:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576698454925672454" data-draft-id="7576821684251951147" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¸¸æˆä¸Šæ¶ App Store çš„å®Œæ•´å‘è¡Œæµç¨‹ï¼Œä»æ„å»ºã€åˆè§„åˆ°å®¡æ ¸çš„å¤šè§’è‰²ååŒæŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-26T09:15:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="bcbnb"/> <meta itemprop="url" content="https://juejin.cn/user/895474073078377"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¸¸æˆä¸Šæ¶ App Store çš„å®Œæ•´å‘è¡Œæµç¨‹ï¼Œä»æ„å»ºã€åˆè§„åˆ°å®¡æ ¸çš„å¤šè§’è‰²ååŒæŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/895474073078377/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    bcbnb
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T09:15:52.000Z" title="Wed Nov 26 2025 09:15:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç§»åŠ¨æ¸¸æˆçš„ iOS ä¸Šæ¶æµç¨‹ï¼Œä¸æ™®é€šå·¥å…·ç±»åº”ç”¨ç›¸æ¯”è¦å¤æ‚å¾—å¤šã€‚
é™¤äº†åŸºæœ¬çš„æ„å»ºã€è¯ä¹¦ç®¡ç†ã€ç´ ææäº¤ä¹‹å¤–ï¼Œæ¸¸æˆç±»åº”ç”¨éœ€è¦é¢å¤–é¢å¯¹å†…å®¹å®¡æŸ¥ã€æ”¯ä»˜è§„èŒƒã€è´¦å·ä½“ç³»ã€æ•°æ®é…ç½®ã€ç©æ³•å±•ç¤ºç­‰å¤šç»´æ£€æŸ¥ã€‚å¯¹ä¸€ä¸ªæ¸¸æˆå›¢é˜Ÿè€Œè¨€ï¼Œä¸Šæ¶å¹¶ä¸æ˜¯å•çº¯çš„æŠ€æœ¯äº¤ä»˜ï¼Œè€Œæ˜¯ä¸€å¥— <strong>æŠ€æœ¯ã€åˆè§„ã€è¿è¥ã€ç‰ˆæœ¬ç®¡ç†ã€å®¡æ ¸æ²Ÿé€š</strong> ååŒçš„è¿‡ç¨‹ã€‚</p>
<p>æœ¬æ–‡ä»¥â€œæ¸¸æˆä¸Šæ¶ App Storeâ€ä¸ºä¸»é¢˜ï¼Œä»å›¢é˜Ÿè§†è§’æ‹†è§£ä¸Šæ¶å‰ä¸­åçš„å…³é”®æ­¥éª¤ï¼Œå¹¶ç»™å‡ºä¸åŒå·¥å…·é“¾åœ¨åä½œä¸­çš„å®é™…åˆ†å·¥æ–¹å¼ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>ä¸€ã€ä¸Šæ¶å‰çš„å‡†å¤‡ï¼šè´¦å·ä½“ç³»ã€å†…å®¹åˆè§„ä¸å†…éƒ¨ç‰ˆæœ¬å†»ç»“</strong></h2>
<h3 data-id="heading-1"><strong>1. å¼€å‘è€…è´¦å·ä¸æƒé™ç®¡ç†</strong></h3>
<p>æ¸¸æˆå±äºé«˜å¤æ‚åº¦åº”ç”¨ï¼Œå¿…é¡»å‡†å¤‡ï¼š</p>
<ul>
<li>Apple Developer Programï¼ˆç»„ç»‡ç±»å‹æ›´é€‚åˆæ¸¸æˆå›¢é˜Ÿï¼‰</li>
<li>App Store Connect è§’è‰²åˆ’åˆ†</li>
<li>ä¸“äººè´Ÿè´£è¯ä¹¦ä¸å¯†é’¥ç®¡ç†</li>
<li>å®¡æ ¸æ²Ÿé€šè´¦å·</li>
</ul>
<p>å¤šäººæ¸¸æˆæˆ–æœåŠ¡ç«¯ä¾èµ–å¼ºçš„äº§å“ï¼Œé€šå¸¸éœ€è¦å¤šäººæƒé™ååŒï¼Œå› æ­¤è´¦å·ç»“æ„åœ¨ä¸Šæ¶å‰å°±éœ€è¦è®¾ç½®åˆ°ä½ã€‚</p>
<hr/>
<h3 data-id="heading-2"><strong>2. å†…å®¹åˆè§„é¢„å®¡ï¼ˆé¿å… 4.3ã€4.7ã€5.1 ç­‰æ‹’å®¡ï¼‰</strong></h3>
<p>æ¸¸æˆæ¯”å·¥å…·ç±»åº”ç”¨å¤šå‡ ä¸ªç‰¹æ®Šå®¡æŸ¥ç‚¹ï¼š</p>
<ul>
<li>æ˜¯å¦åŒ…å«èµŒåšã€æŠ½å¥–ã€å¼€ç®±æ¦‚ç‡æœºåˆ¶</li>
<li>æ˜¯å¦æœ‰ç©å®¶é—´äº’åŠ¨ï¼ˆéœ€éšç§è¯´æ˜ + ä¸¾æŠ¥æœºåˆ¶ï¼‰</li>
<li>æ˜¯å¦åŒ…å«ç”¨æˆ·ç”Ÿæˆå†…å®¹ï¼ˆUGCï¼‰</li>
<li>æ˜¯å¦æ¶‰åŠå®åè®¤è¯ã€è´¦å·ç»‘å®š</li>
<li>æ˜¯å¦åŒ…å«æœªæŠ«éœ²çš„ç¬¬ä¸‰æ–¹ SDK</li>
<li>æ˜¯å¦å«â€œæ•æ„Ÿæƒ…èŠ‚â€æˆ–å¯èƒ½è¢«è¯¯åˆ¤çš„å†…å®¹å…ƒç´ </li>
</ul>
<p>åœ¨æ­£å¼æäº¤å‰ï¼Œè¿è¥æˆ–ç­–åˆ’é€šå¸¸éœ€è¦åšä¸€æ¬¡å†…å®¹è‡ªæŸ¥ã€‚</p>
<hr/>
<h3 data-id="heading-3"><strong>3. å†…éƒ¨ç‰ˆæœ¬å†»ç»“</strong></h3>
<p>æ¸¸æˆå›¢é˜Ÿé€šå¸¸åœ¨ä¸Šæ¶å‰è¿›è¡Œä¸€æ¬¡ freezeï¼ˆå†»ç»“ç‰ˆæœ¬ï¼‰ï¼š</p>
<ul>
<li>ä»£ç é”å®š</li>
<li>ç©æ³•ä¸å†æ”¹åŠ¨</li>
<li>æ–‡æ¡ˆä¸å¼•å¯¼ä¸å†ä¿®æ”¹</li>
<li>ä¸æœåŠ¡ç«¯åè®®ä¿æŒä¸€è‡´</li>
</ul>
<p>è¿™æ ·èƒ½æœ‰æ•ˆé™ä½å®¡æ ¸æœŸé—´çš„è¿”å·¥æ¦‚ç‡ã€‚</p>
<hr/>
<h2 data-id="heading-4"><strong>äºŒã€æ„å»º IPAï¼šæ¸¸æˆç±»é¡¹ç›®çš„ç‰¹æ®Šè¦æ±‚</strong></h2>
<p>æ— è®ºæ˜¯ Unityã€Cocos Creatorã€Unrealï¼Œè¿˜æ˜¯åŸç”Ÿå¼€å‘ï¼Œæ¸¸æˆçš„æ„å»ºé“¾è·¯æ™®éè¾ƒé‡ã€‚</p>
<h3 data-id="heading-5"><strong>1. Unity / Cocos / Unreal é¡¹ç›®ï¼šå¯¼å‡º Xcode å·¥ç¨‹</strong></h3>
<p>ä¸»æµæ¸¸æˆå¼•æ“è¾“å‡ºæµç¨‹ä¸€è‡´ï¼š</p>
<ul>
<li>å¼•æ“æ„å»º</li>
<li>å¯¼å‡º Xcode é¡¹ç›®</li>
<li>åœ¨ Xcode ä¸­ Archive</li>
<li>ç”Ÿæˆ App Store æ„å»ºåŒ…ï¼ˆIPAï¼‰</li>
</ul>
<p>é’ˆå¯¹æ¸¸æˆèµ„æºé‡å¤§çš„ç‰¹ç‚¹ï¼Œå¿…é¡»æ³¨æ„ï¼š</p>
<ul>
<li>åœºæ™¯èµ„æºå‹ç¼©</li>
<li>åŒ…ä½“å¤§å°ï¼ˆé¿å…è¶…è¿‡ä¸‹è½½é™åˆ¶ï¼‰</li>
<li>åŠ è½½é€Ÿåº¦ä¸é¦–æ¬¡å¯åŠ¨ä½“éªŒï¼ˆå®¡æ ¸ä¼šæ£€æŸ¥ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-6"><strong>2. Hybrid + æ¸¸æˆå¼•æ“æ··åˆæ–¹æ¡ˆ</strong></h3>
<p>æŸäº›è½»æ¸¸æˆä¼šé‡‡ç”¨ï¼š</p>
<ul>
<li>H5 + åŸç”Ÿå£³</li>
<li>WebGL + åŸç”Ÿå®¹å™¨</li>
</ul>
<p>è¿™ç±»ç»„åˆéœ€è¦ç‰¹åˆ«å…³æ³¨ï¼š</p>
<ul>
<li>é¦–å±åŠ è½½é€Ÿåº¦</li>
<li>ç½‘ç»œèµ„æºè¯·æ±‚æ˜¯å¦ç¨³å®š</li>
<li>æƒé™æ˜¯å¦ç”±åŸç”Ÿè§¦å‘</li>
</ul>
<p>é¿å…è§¦å‘ 2.1ï¼ˆåŠŸèƒ½ä¸å¯ç”¨ï¼‰æ‹’å®¡ã€‚</p>
<hr/>
<h3 data-id="heading-7"><strong>3. æ„å»ºç¯å¢ƒå·®å¼‚ï¼šæœ¬åœ° Mac ä¸äº‘æ„å»º</strong></h3>
<p>æ¸¸æˆå·¥ç¨‹é‡å¤§ï¼Œæœ¬åœ°æ‰“åŒ…å¸¸å‡ºç°ï¼š</p>
<ul>
<li>å†…å­˜ä¸è¶³</li>
<li>Unity ç‰ˆæœ¬ä¸ä¸€è‡´</li>
<li>Xcode ç‰ˆæœ¬å†²çª</li>
</ul>
<p>è¶Šæ¥è¶Šå¤šå›¢é˜Ÿä½¿ç”¨ï¼š</p>
<ul>
<li>GitHub Actions</li>
<li>Codemagic</li>
<li>Appcircle</li>
</ul>
<p>è¿›è¡Œ iOS æ„å»ºï¼Œä½¿æµç¨‹æ›´ç¨³å®šã€‚</p>
<hr/>
<h2 data-id="heading-8"><strong>ä¸‰ã€IPA ä¸Šä¼ ï¼šå¤šäººåä½œä¸‹çš„å¤šå·¥å…·ç»„åˆç­–ç•¥</strong></h2>
<p>æ¸¸æˆä¸Šæ¶é€šå¸¸éœ€è¦å¤šæ¬¡åå¤æäº¤ï¼ˆTF æµ‹è¯•ã€å¤šè½®å®¡æ ¸ã€ç´§æ€¥çƒ­ä¿®ç­‰ï¼‰ï¼Œä¸Šä¼ å·¥å…·çš„è§’è‰²æ˜¾å¾—æ›´åŠ é‡è¦ã€‚</p>
<h3 data-id="heading-9"><strong>1. Transporterï¼ˆå®˜æ–¹ Mac å·¥å…·ï¼‰</strong></h3>
<p>é€‚ç”¨äºæœ¬åœ°ä¸Šä¼ æµ‹è¯•ç‰ˆï¼š</p>
<ul>
<li>ä¸Šä¼ æˆåŠŸç‡é«˜</li>
<li>é”™è¯¯åé¦ˆæ¸…æ™°</li>
<li>ä½†å±€é™äº macOS</li>
</ul>
<hr/>
<h3 data-id="heading-10"><strong>2. å¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰è·¨å¹³å°å‘½ä»¤è¡Œå·¥å…·ï¼šé€‚åˆé«˜é¢‘æ„å»ºåœºæ™¯</strong></h3>
<p>æ¸¸æˆå›¢é˜Ÿå¸¸ä½¿ç”¨èƒ½å¤Ÿåœ¨ <strong>Windows / Linux / macOS</strong> ä¸Šè¿è¡Œçš„å‘½ä»¤è¡Œä¸Šä¼ å·¥å…·ï¼Œç”¨äºï¼š</p>
<ul>
<li>è‡ªåŠ¨åŒ–å‘å¸ƒæµæ°´çº¿</li>
<li>å¤šäººå¹¶è¡Œä¸Šä¼ </li>
<li>TF è¿ç»­æµ‹è¯•ç‰ˆè¿­ä»£</li>
</ul>
<p>å…¸å‹ä½¿ç”¨åœºæ™¯ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">appuploader_cli \
  <span class="hljs-operator">-</span>u game_team<span class="hljs-variable">@studio</span>.com \
  <span class="hljs-operator">-</span>p xxx<span class="hljs-operator">-</span>xxx<span class="hljs-operator">-</span>xxx<span class="hljs-operator">-</span>xxx \
  <span class="hljs-operator">-</span>c <span class="hljs-number">2</span> \
  <span class="hljs-operator">-</span>f .<span class="hljs-operator">/</span><span class="hljs-keyword">release</span><span class="hljs-operator">/</span>game_build.ipa
</code></pre>
<p>é€‚åˆï¼š</p>
<ul>
<li>ç‰ˆæœ¬è¿­ä»£é¢‘ç¹çš„ç«æŠ€ç±»æ¸¸æˆ</li>
<li>TF æµ‹è¯•é‡å¤§çš„å¤šäººæ¸¸æˆ</li>
<li>å¤šç³»ç»Ÿåä½œçš„é¡¹ç›®å›¢é˜Ÿ</li>
</ul>
<p>ä¸Šä¼ æˆåŠŸåä¼šè‡ªåŠ¨å‡ºç°åœ¨ TestFlight æˆ–â€œå‡†å¤‡æäº¤â€ä¸­ã€‚</p>
<p>å›¾å½¢åŒ–ç•Œé¢ï¼š<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9cd1f84b3bc1483d86ac49d5b3ccbf75~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYmNibmI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753352&amp;x-signature=Fmaxv390EpVSrxlTtFgdryNuvgM%3D" alt="ipaä¸Šä¼ " loading="lazy"/></p>
<hr/>
<h2 data-id="heading-11"><strong>å››ã€App Store Connect æäº¤é˜¶æ®µï¼šæ¸¸æˆéœ€è¦é¢å¤–å…³æ³¨çš„å†…å®¹</strong></h2>
<p>ä¸å·¥å…·ç±»åº”ç”¨ç›¸æ¯”ï¼Œæ¸¸æˆæäº¤é˜¶æ®µçš„å†…å®¹æ›´åŠ ç»†åŒ–ã€‚</p>
<hr/>
<h3 data-id="heading-12"><strong>1. è¯„çº§ï¼ˆAge Ratingï¼‰</strong></h3>
<p>æ¸¸æˆé€šå¸¸æ¶‰åŠï¼š</p>
<ul>
<li>æš´åŠ›</li>
<li>ç«èµ›</li>
<li>ç”¨æˆ·äº’åŠ¨</li>
<li>è™šæ‹Ÿè´§å¸</li>
<li>æˆå°±ç³»ç»Ÿ</li>
</ul>
<p>è¯„çº§é—®å·å¡«å†™å¿…é¡»ç²¾å‡†ï¼Œå¦åˆ™ä¼šå› â€œè¯„çº§ä¸ä¸€è‡´â€è¢«æ‹’å®¡ã€‚</p>
<hr/>
<h3 data-id="heading-13"><strong>2. å†…è´­ï¼ˆIAPï¼‰é…ç½®</strong></h3>
<p>æ¸¸æˆçš„ IAP ç»“æ„æ¯”æ™®é€šåº”ç”¨å¤æ‚å¾—å¤šï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>è™šæ‹Ÿè´§å¸</li>
<li>æœˆå¡ / è®¢é˜…</li>
<li>é“å…·</li>
<li>ä»˜è´¹è§£é”</li>
<li>åŠ é€ŸåŒ…ç­‰</li>
</ul>
<p>å¸¸è§æ‹’å®¡åŸå› ï¼š</p>
<ul>
<li>å•†å“æœªç»‘å®šåˆ°æ„å»ºç‰ˆæœ¬</li>
<li>è´­ä¹°æµç¨‹å¤±è´¥</li>
<li>å•†å“å›¾æ ‡ä¸è¯´æ˜ä¸ä¸€è‡´</li>
<li>æœªæä¾›é€€æ¬¾æœºåˆ¶è¯´æ˜</li>
</ul>
<p>å›¢é˜Ÿé€šå¸¸åœ¨ TF é˜¶æ®µå…ˆéªŒè¯æ‰€æœ‰ IAPã€‚</p>
<hr/>
<h3 data-id="heading-14"><strong>3. éšç§æ”¿ç­– + æ•°æ®æ”¶é›†è¯´æ˜</strong></h3>
<p>æ¸¸æˆæ™®éä½¿ç”¨å¤§é‡ç¬¬ä¸‰æ–¹ SDKï¼š</p>
<ul>
<li>æ—¥å¿—</li>
<li>å¹¿å‘Š</li>
<li>åˆ†æ</li>
<li>ç™»å½•ï¼ˆå¾®ä¿¡ã€Facebookï¼‰</li>
<li>å´©æºƒä¸ŠæŠ¥</li>
<li>äº‘å­˜æ¡£</li>
</ul>
<p>å¿…é¡»å…¨éƒ¨åœ¨ App Store Connect ä¸­æŠ«éœ²ã€‚</p>
<hr/>
<h3 data-id="heading-15"><strong>4. æˆªå›¾ä¸é¢„è§ˆè§†é¢‘</strong></h3>
<p>æ¸¸æˆç±»åˆ«å¯¹è§†è§‰ç´ æè¦æ±‚æ›´é«˜ï¼š</p>
<ul>
<li>æˆªå›¾å¿…é¡»å±•ç¤ºæ¸¸æˆçœŸå®ç©æ³•</li>
<li>ä¸å¾—å±•ç¤ºæœªä¸Šçº¿å†…å®¹</li>
<li>æ–‡æ¡ˆä¸èƒ½å¤¸å¤§å®£ä¼ </li>
</ul>
<p>é¢„è§ˆè§†é¢‘çš„å®¡æ ¸éš¾åº¦æ¯”æˆªå›¾æ›´é«˜ï¼Œå›¢é˜Ÿé€šå¸¸å…ˆæäº¤æˆªå›¾ï¼Œé€šè¿‡å®¡æ ¸åå†è¡¥è§†é¢‘ã€‚</p>
<hr/>
<h2 data-id="heading-16"><strong>äº”ã€å®¡æ ¸é˜¶æ®µï¼šæ¸¸æˆåº”ç”¨ä¸“å±çš„é£é™©ç‚¹</strong></h2>
<p>æ¸¸æˆå®¡æ ¸æ—¶é—´é€šå¸¸æ¯”å·¥å…·ç±»æ›´é•¿ï¼Œå¸¸è§ 3â€“7 å¤©ã€‚</p>
<p>ä¸‹é¢æ˜¯æœ€æ˜“è§¦å‘æ‹’å®¡çš„å‡ ä¸ªç±»åˆ«ã€‚</p>
<hr/>
<h3 data-id="heading-17"><strong>1. 2.1 â€“ åŠŸèƒ½ä¸å¯ç”¨ï¼ˆæœ€å¸¸è§ï¼‰</strong></h3>
<p>åŸå› åŒ…æ‹¬ï¼š</p>
<ul>
<li>æœåŠ¡å™¨æ— æ³•è®¿é—®</li>
<li>ç™»é™†å¤±è´¥</li>
<li>æ–°æ‰‹å¼•å¯¼å¼‚å¸¸</li>
<li>ç½‘ç»œåŠ è½½è¶…æ—¶</li>
<li>å¤šäººæˆ˜æ–—æ— æ³•åŒ¹é…</li>
</ul>
<p>å®¡æ ¸ç¯å¢ƒä¸çœŸå®ç©å®¶ç¯å¢ƒä¸åŒï¼Œå› æ­¤ç¨³å®šæ€§å¿…é¡»æå‰å¤„ç†ã€‚</p>
<hr/>
<h3 data-id="heading-18"><strong>2. 3.1.1 â€“ ä½¿ç”¨æœªå…¬å¼€çš„æ”¯ä»˜æ–¹å¼</strong></h3>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>å¼•å¯¼ç©å®¶å»ç½‘é¡µå……å€¼</li>
<li>å¼•å¯¼å¤–éƒ¨è´­ä¹°é“å…·</li>
<li>é IAP çš„è™šæ‹Ÿè´§å¸å…¥å£</li>
</ul>
<p>æ¸¸æˆæœ€å¸¸è§çš„è¿è§„ç‚¹ã€‚</p>
<hr/>
<h3 data-id="heading-19"><strong>3. 5.1.1 â€“ æ•°æ®æ”¶é›†æœªæŠ«éœ²</strong></h3>
<p>æ¸¸æˆç™»å½•å¸¸åŒ…å«ï¼š</p>
<ul>
<li>è®¾å¤‡ä¿¡æ¯</li>
<li>å¹¿å‘Š ID</li>
<li>è¡Œä¸ºæ•°æ®</li>
</ul>
<p>å¿…é¡»ä¸â€œéšç§è¥å…»æ ‡ç­¾â€ä¸€è‡´ã€‚</p>
<hr/>
<h3 data-id="heading-20"><strong>4. 4.3 â€“ é‡å¤å†…å®¹</strong></h3>
<p>å¦‚æœå¤šä¸ªæ¸¸æˆå…±äº«åŒä¸€å¥—å¼•æ“èµ„æºã€æ¨¡æ¿ã€UI ç»“æ„ï¼Œå¯èƒ½è¢«åˆ¤å®šä¸ºé‡å¤ã€‚</p>
<hr/>
<h2 data-id="heading-21"><strong>å…­ã€å‘å¸ƒåçš„è¿è¥ååŒ</strong></h2>
<h3 data-id="heading-22"><strong>1. TF å¤šè½®éªŒè¯</strong></h3>
<p>å…¸å‹æµç¨‹ï¼š</p>
<ol>
<li>æäº¤ TF</li>
<li>ç©æ³•æµ‹è¯•</li>
<li>å†…è´­éªŒè¯</li>
<li>å´©æºƒç›‘æ§ï¼ˆCrashlyticsï¼‰</li>
<li>æ€§èƒ½ä¼˜åŒ–</li>
<li>æ­£å¼æäº¤å®¡æ ¸</li>
</ol>
<hr/>
<h3 data-id="heading-23"><strong>2. ç‰ˆæœ¬ç­–ç•¥</strong></h3>
<p>æ¸¸æˆæ­£å¼ç‰ˆæœ¬åº”é¿å…è¿‡åº¦é¢‘ç¹æ›´æ–°ï¼Œå› ä¸ºæ¯æ¬¡éƒ½è¦é‡æ–°å®¡æ ¸ã€‚</p>
<hr/>
<h3 data-id="heading-24"><strong>3. å¼‚å¸¸å›æ»šä¸ç´§æ€¥ä¿®å¤</strong></h3>
<p>æ¸¸æˆå›¢é˜Ÿä¸€èˆ¬ä¼šä¿ç•™ï¼š</p>
<ul>
<li>å¿«é€Ÿæ„å»ºé€šé“</li>
<li>å¿«é€Ÿä¸Šä¼ é€šé“</li>
<li>TF çƒ­ä¿®ç‰ˆæœ¬</li>
</ul>
<p>é¿å…ä¸Šçº¿æ•…éšœå½±å“ç”¨æˆ·ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é€æ­¥æ‰‹å†™ï¼Œå®ç°ç¬¦åˆ Promise A+ è§„èŒƒçš„ Promise]]></title>    <link>https://juejin.cn/post/7576681897297625103</link>    <guid>https://juejin.cn/post/7576681897297625103</guid>    <pubDate>2025-11-26T08:23:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576681897297625103" data-draft-id="7576827115967561763" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é€æ­¥æ‰‹å†™ï¼Œå®ç°ç¬¦åˆ Promise A+ è§„èŒƒçš„ Promise"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,ç®—æ³•"/> <meta itemprop="datePublished" content="2025-11-26T08:23:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹¿é¹¿é¹¿é¹¿isNotDefined"/> <meta itemprop="url" content="https://juejin.cn/user/4227000939061086"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é€æ­¥æ‰‹å†™ï¼Œå®ç°ç¬¦åˆ Promise A+ è§„èŒƒçš„ Promise
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4227000939061086/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹¿é¹¿é¹¿é¹¿isNotDefined
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T08:23:17.000Z" title="Wed Nov 26 2025 08:23:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    13
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä¹‹å‰æ‰¾å·¥ä½œçš„æ—¶å€™å‡­æ„Ÿè§‰åšäº†ä¸€ä¸ª<strong>å®ç° Promise A+ è§„èŒƒçš„ Promise</strong>çš„ç»ƒä¹ ï¼Œæœ€è¿‘åœ¨å‡†å¤‡æ–°çš„å·¥ä½œæœºä¼šï¼Œåˆçœ‹åˆ°äº†è¿™ä¸ªé¢è¯•é¢˜ã€‚</p>
<p>æˆ‘æ„Ÿè§‰ä¹‹å‰çš„å®ç°æœ‰å¾ˆå¤§ä¼˜åŒ–ç©ºé—´ã€‚ä¹‹å‰ç”¨å‰æ¬¡è°ƒç”¨ç»“æœä½œä¸ºæ ‡è®°æ¥å®ç° Promise å¤šæ¬¡ resolve å’Œ reject è§¦å‘çš„æ­£ç¡®é€»è¾‘ï¼Œæ„Ÿè§‰æœ‰ç‚¹å¤ªéº»çƒ¦äº†ï¼Œ<del>é€šè¿‡å’Œ AI çš„æ·±å…¥äº¤æµ</del>ï¼Œè¿™å®Œå…¨å¯ä»¥ç”¨ç®€å•çš„å¸ƒå°”å€¼æ ‡è®°åšåˆ°ã€‚</p>
<p>è¿™ç¯‡åšå®¢æƒå½“æ˜¯å¤ä¹ å§...</p>
<h2 data-id="heading-1">ç®€ä»‹ Promise A+ è§„èŒƒ</h2>
<h3 data-id="heading-2">å˜é‡å’Œæœ¯è¯­</h3>
<p>Promise è¡¨ç¤ºå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆç»“æœã€‚</p>
<ol>
<li>Promise å…·æœ‰ 3 ç§çŠ¶æ€ï¼špendingï¼ˆç­‰å¾…ä¸­ï¼‰ã€fulfilledï¼ˆæˆåŠŸæ‰§è¡Œï¼‰ã€rejectedï¼ˆå¤±è´¥æ‹’ç»ï¼‰ï¼Œåˆå§‹çŠ¶æ€ä¸º pendingï¼Œåˆ‡æ¢ä¸º fulfilled æˆ–è€… rejected åå°±ä¸èƒ½å†è½¬æ¢ã€‚å¤„äºé pending çŠ¶æ€æ—¶ç§°ä¸º settledã€‚</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> testPromise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
  <span class="hljs-comment">// DO SOMETHING</span>
})
</code></pre>
<p>åƒè¿™æ ·å­ï¼Œä¼ å…¥çš„å‡½æ•°æˆ‘ä»¬ç§°ä¸º<code>executor</code>ï¼Œ<code>resolve</code>å’Œ<code>reject</code>ä¼šè§¦å‘ Promise çš„çŠ¶æ€æ”¹å˜ä»¥åŠæ•°æ®æ›´æ–°ã€‚</p>
<p><code>value</code>è¡¨ç¤ºæˆåŠŸæ‰§è¡Œï¼ˆfulfilled çŠ¶æ€ï¼‰çš„ Promise çš„ç»“æœï¼Œ<code>reason</code>è¡¨ç¤ºå¤±è´¥æ‹’ç»ï¼ˆrejected çŠ¶æ€ï¼‰çš„ Promise çš„åŸå› ï¼Œå®ƒä»¬å¯ä»¥å– JS ä¸­ä»»ä½•åˆæ³•çš„å€¼ã€‚</p>
<blockquote>
<p>Promise A+ è§„èŒƒçš„ Promise ä¸Šçš„æ–¹æ³•åªæœ‰ç®€å•çš„<code>then</code>ï¼Œ<code>catch</code>ã€<code>finally</code>ä¹‹ç±»çš„æ–¹æ³•å¹¶ä¸åŒ…å«ã€‚</p>
</blockquote>
<pre><code class="hljs language-mermaid" lang="mermaid">graph
    A[åˆ›å»ºPromise] --&gt; B["æ‰§è¡Œexecutor(resolve, reject)"]
    
    
    F{"executoræ‰§è¡Œç»“æœ?"}
    C --&gt;|settled|G[å¿½ç•¥é‡å¤è°ƒç”¨]
    C --&gt;|not settled|E
    B --&gt; F
    
    F --&gt;|"è°ƒç”¨resolve(value)"| I{"Promise settled?"}
    I --&gt;|settled|G
    I --&gt;|not settled| D["çŠ¶æ€: pending â†’ fulfilled&lt;br&gt;å­˜å‚¨value"]
    
    F --&gt;|æŠ›å‡ºå¼‚å¸¸| C
    F --&gt;|"è°ƒç”¨reject(reason)"| C{"Promise settled?"}
    E["çŠ¶æ€: pending â†’ rejected&lt;br&gt;å­˜å‚¨reason"]
    

    F --&gt;|"å½“å‰æœªæ‰§è¡Œresolveå’Œrejectï¼Œæ²¡æœ‰æŠ›å‡ºå¼‚å¸¸"| H[pending]
    
    style A fill:#e1f5ff
    style B fill:#e1f5ff
</code></pre>
<h3 data-id="heading-3">then æ–¹æ³•</h3>
<ol start="2">
<li><code>then</code>æ–¹æ³•å…·æœ‰<code>onFulfilled</code>å’Œ<code>onRejected</code>ä¸¤ä¸ªå…¥å‚ï¼Œè¿”å›ä¸€ä¸ª Promiseï¼ˆé“¾å¼è°ƒç”¨ï¼‰ã€‚</li>
</ol>
<p>ä¸¾ä¸ªæ —å­ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> temp = testPromise.<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> <span class="hljs-title function_">onFulfilled</span> (value) {
  <span class="hljs-comment">// DO SOMETHING</span>
}, <span class="hljs-keyword">function</span> <span class="hljs-title function_">onRejected</span> (reason) {
  <span class="hljs-comment">// DO SOMETHING</span>
})
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(temp <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Promise</span>) <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(temp === testPromise) <span class="hljs-comment">// false</span>
</code></pre>
<ul>
<li>
<p>Promise ä» pending çŠ¶æ€åˆ‡æ¢åˆ° fulfilled æˆ–è€… rejected æ—¶ï¼Œæ‰§è¡Œæ­¤å‰<code>then</code>ä¼ å…¥çš„<code>onFulfilled</code>æˆ–<code>onRejected</code>ã€‚fulfilled çŠ¶æ€çš„ Promise ä¼šæ‰§è¡Œ<code>then</code>ä¼ å…¥çš„<code>onFulfilled</code>ï¼Œrejected çŠ¶æ€çš„ Promise ä¼šæ‰§è¡Œ<code>then</code>ä¼ å…¥çš„<code>onRejected</code>ã€‚</p>
</li>
<li>
<p>æ‰§è¡Œ<code>onFulfilled</code>æˆ–<code>onRejected</code>çš„ç»“æœä¼šè¢«ä¼ å…¥æ–°çš„ Promise <code>temp</code>çš„<code>resolve</code>æ–¹æ³•ä¸­ï¼Œå¦‚æœå‘ç”Ÿäº†é”™è¯¯åˆ™ä¼ å…¥<code>reject</code>ä¸­ï¼Œæ”¹å˜çš„çŠ¶æ€å’Œæ•°æ®ã€‚</p>
</li>
<li>
<p><code>onFulfilled</code>æˆ–è€…<code>onRejected</code>ä¸æ˜¯å‡½æ•°æ—¶ï¼Œè¿”å›çš„ Promise ä¸åŸ Promise å…·æœ‰ç›¸åŒçš„çŠ¶æ€å’Œæ•°æ®ï¼ˆä¼ å€¼ç©¿é€ï¼‰ã€‚</p>
</li>
</ul>
<p>ç”¨ä¸€ä¸ªæµç¨‹å›¾æ€»ç»“ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph 
    
    F["è°ƒç”¨promise.then(onFulfilled, onRejected)"] --&gt; G{"å½“å‰çŠ¶æ€?"}
    
    G --&gt;|pending| H["æ³¨å†Œå›è°ƒåˆ°é˜Ÿåˆ—&lt;br&gt;ç­‰å¾…çŠ¶æ€æ”¹å˜"]
    G --&gt;|fulfilled| I["å¼‚æ­¥æ‰§è¡ŒonFulfilled(value)"]
    G --&gt;|rejected| J["å¼‚æ­¥æ‰§è¡ŒonRejected(reason)"]
    
    I --&gt; K{"onFulfilledè¿”å›å€¼?"}
    J --&gt; L{"onRejectedè¿”å›å€¼?"}
    
    K --&gt;|æ­£å¸¸è¿”å›| M["Promise Resolution Procedure"]
    L --&gt;|æ­£å¸¸è¿”å›| M
    K --&gt;|æŠ›å‡ºå¼‚å¸¸| O["è°ƒç”¨æ–°Promiseçš„reject&lt;br&gt;çŠ¶æ€: rejected"]
    L --&gt;|æŠ›å‡ºå¼‚å¸¸| O
    
    H --&gt;|çŠ¶æ€å˜ä¸ºfulfilled| I
    H --&gt;|çŠ¶æ€å˜ä¸ºrejected| J
    
    O --&gt; Z[è¿”å›æ–°Promise]

    style F fill:#fff2e1
    style G fill:#f0e1ff
    style M fill:#e8f5e9
    style H fill:#fff9c4
</code></pre>
<h3 data-id="heading-4">Promise Resolution Procedure</h3>
<ol start="3">
<li><code>resolve</code>è¢«è§¦å‘æ—¶å‘ç”Ÿä»€ä¹ˆäº‹äº†ï¼Ÿæ­¤æ—¶ Promise çš„çŠ¶æ€ä»æœªçœŸæ­£å˜åŒ–ï¼Œä¼šè¿›å…¥ä¸€æ®µå¤„ç†ç¨‹åºï¼Œè§„èŒƒç§°ä¹‹ä¸º Promise Resolution Procedureï¼Œä¸»è¦é€»è¾‘æ˜¯å¦‚æœä¼ å…¥çš„æ˜¯é thenable å¯¹è±¡æˆ–è€…åŸºæœ¬ç±»å‹åˆ™ç›´æ¥ä¿®æ”¹ Promise çš„çŠ¶æ€å’Œæ•°æ®ï¼Œæ˜¯ thenable å°±æ‰§è¡Œä¸‹é¢ thenable ç›¸å…³é€»è¾‘ã€‚</li>
</ol>
<ul>
<li>æ­¤å¤–ï¼Œä¸æ”¯æŒæˆ‘è¿”å›æˆ‘è‡ªå·±ï¼Œ<code>onFulfilled</code>æˆ–è€…<code>onRejected</code>è¿”å›è¯¥<code>then</code>è¿”å›çš„ Promise æ—¶ï¼ŒæŠ›å‡º<code>TypeError</code>é”™è¯¯ï¼Œä¾‹å¦‚ï¼š</li>
</ul>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> temp = testPromise.<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> <span class="hljs-title function_">onFulfilled</span> (value) {
  <span class="hljs-keyword">return</span> temp
})
</code></pre>
<h3 data-id="heading-5">å¤„ç† thenable å¯¹è±¡</h3>
<ol start="4">
<li>thenable çš„å¯¹è±¡æ˜¯å…·æœ‰<code>then</code>æ–¹æ³•çš„å¯¹è±¡æˆ–è€…å‡½æ•°ã€‚<code>then</code>æ–¹æ³•æ¥å—ä¸¤ä¸ªå›è°ƒå‡½æ•°<code>onResolvePromise</code>å’Œ<code>onRejectPromise</code>ï¼Œç±»ä¼¼äºè¿™é‡Œçš„ Promise çš„<code>then</code>ã€‚thenable å®é™…ä¸ŠåŒ…æ‹¬å®ç°äº† Promise A+ è§„èŒƒçš„ Promiseï¼Œä¾‹å¦‚ ES6 åŸç”Ÿçš„ Promiseã€‚ä¸¾ä¸ª thenable å¯¹è±¡çš„æ —å­ï¼š</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> thenable = {
  <span class="hljs-attr">then</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">onResolvePromise, onRejectPromise</span>) {
    <span class="hljs-title function_">onResolvePromise</span>(<span class="hljs-string">'miao~~'</span>)
  }
}
</code></pre>
<ul>
<li>
<p>å¦‚æœè§¦å‘äº†<code>onFulfilled</code>ï¼Œè¿”å›äº†ä¸€ä¸ª thenableã€‚å¦‚æœæ˜¯è¯¥ Promise çš„å®ä¾‹ï¼Œä¸æ˜¯å½“å‰ Promiseï¼Œåˆ™ä¼ å…¥å½“å‰ Promise çš„<code>resolve</code>å’Œ<code>reject</code>ï¼Œè°ƒç”¨<code>then</code>æ–¹æ³•ã€‚</p>
</li>
<li>
<p>å…¼å®¹å…¶ä»– thenableï¼šè°ƒç”¨<code>then</code>æ–¹æ³•ï¼Œä¼ å…¥å½“å‰ Promise çš„<code>resolve</code>å’Œ<code>reject</code>ï¼Œåƒè¯¥ Promise å®ä¾‹ä¸€æ ·è§£æã€‚</p>
</li>
<li>
<p><del>å…è®¸å…¶ä»– thenable å¯¹è±¡ä¹±å†™</del>ï¼Œè¿™é‡Œéœ€è¦å¤„ç† thenable å¯¹è±¡é‡å¤è§¦å‘<code>onResolvePromise</code>æˆ–/å’Œ<code>onRejectPromise</code>çš„æƒ…å†µï¼Œè¿™ä¸¤ä¸ªå›è°ƒå‡½æ•°æœ€å¤šåªèƒ½æ”¹å˜ 1 æ¬¡ Promise çš„çŠ¶æ€ã€‚</p>
</li>
</ul>
<ol start="5">
<li>å…¶ä»–è¯¦ç»†è§ <a href="https://link.juejin.cn?target=https%3A%2F%2Fpromisesaplus.com%2F" target="_blank" title="https://promisesaplus.com/" ref="nofollow noopener noreferrer">Promise A+</a> è§„èŒƒã€‚</li>
</ol>
<p>è¿™é‡Œå†ç”¨ä¸ªæµç¨‹å›¾æ€»ç»“ä¸€ä¸‹</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph 
    M["Promise Resolution Procedure"]
    
    M --&gt; P{è¿”å›å€¼æ˜¯thenable?}
    P --&gt;|æ˜¯| Q{æ˜¯å¦è¿”å›è‡ªèº«?}
    Q --&gt;|æ˜¯| R[æŠ›å‡ºTypeError]
    Q --&gt;|å¦| S["è°ƒç”¨thenable.then(resolvePromise, rejectPromise)"]
    
    P --&gt;|å¦| N
    
    S --&gt; T{thenableè¡Œä¸º?}
    T --&gt;|"è°ƒç”¨resolvePromise(x)"| U{Promise settled?}
    T --&gt;|"è°ƒç”¨rejectPromise(reason)"| V{Promise settled?}
    T --&gt;|æŠ›å‡ºå¼‚å¸¸| O[è°ƒç”¨æ–°Promiseçš„reject&lt;br&gt;çŠ¶æ€: rejected]
    
    U --&gt;|not settled| W["çŠ¶æ€: fulfilled&lt;br&gt;value = x"]
    V --&gt;|not settled| X["çŠ¶æ€: rejected&lt;br&gt;reason = reason"]
    U --&gt;|settled| Y[å¿½ç•¥é‡å¤è°ƒç”¨]
    V --&gt;|settled| Y
    
    N[è°ƒç”¨æ–°Promiseçš„resolve&lt;br&gt;çŠ¶æ€: fulfilled] --&gt; Z[è¿”å›æ–°Promise]
    O --&gt; Z
    W --&gt; Z
    X --&gt; Z
    R --&gt; AA["è¿”å›rejected Promise&lt;br&gt;reason = TypeError"]

    style M fill:#e8f5e9
</code></pre>
<h2 data-id="heading-6">å‰æœŸå‡†å¤‡</h2>
<p>å…ˆå®šä¹‰å¥½ç±»å‹å’Œä¸€ä¸ªå‘èµ·å¾®ä»»åŠ¡çš„è¾…åŠ©å‡½æ•°ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">PromiseState</span> {
  fulfilled = <span class="hljs-string">'fulfilled'</span>,
  pending = <span class="hljs-string">'pending'</span>,
  rejected = <span class="hljs-string">'rejected'</span>
}

<span class="hljs-keyword">type</span> <span class="hljs-title class_">Executor</span>&lt;T&gt; = <span class="hljs-function">(<span class="hljs-params">
  resolve: (value: T | PromiseLike&lt;T&gt;) =&gt; <span class="hljs-built_in">void</span>,
  reject: (reason?: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">void</span>
</span>) =&gt;</span> <span class="hljs-built_in">void</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">scheduleMicrotask</span> = (<span class="hljs-params">callback: () =&gt; <span class="hljs-built_in">void</span></span>) =&gt; {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> queueMicrotask === <span class="hljs-string">'function'</span>) {
    <span class="hljs-title function_">queueMicrotask</span>(callback)
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> process !== <span class="hljs-string">'undefined'</span> &amp;&amp; process.<span class="hljs-property">nextTick</span>) {
    process.<span class="hljs-title function_">nextTick</span>(callback)
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(callback)
  }
}
</code></pre>
<h2 data-id="heading-7">ç®€å•åœ°å†™ä¸€ä¸ª Promise</h2>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ShikaPromise</span>&lt;T = <span class="hljs-built_in">any</span>&gt; {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">state</span>: <span class="hljs-title class_">PromiseState</span> = <span class="hljs-title class_">PromiseState</span>.<span class="hljs-property">pending</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">value</span>: T | <span class="hljs-literal">undefined</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">reason</span>: <span class="hljs-built_in">any</span>
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">executor: Executor&lt;T&gt;</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-title function_">executor</span>(
        <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resolve</span>(value),
        <span class="hljs-function">(<span class="hljs-params">reason</span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reject</span>(reason)
      )
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reject</span>(error)
    }
  }
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-attr">value</span>: T): <span class="hljs-built_in">void</span> {
    <span class="hljs-comment">// ä¸æ”¯æŒ resolve è‡ªå·±</span>
    <span class="hljs-keyword">if</span> (value === <span class="hljs-variable language_">this</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'Cannot resolve promise with itself'</span>))
      <span class="hljs-keyword">return</span>
    }
    
    <span class="hljs-title function_">scheduleMicrotask</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-title class_">PromiseState</span>.<span class="hljs-property">fulfilled</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = value
    })
  }
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">reject</span>(<span class="hljs-attr">reason</span>: <span class="hljs-built_in">any</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-title function_">scheduleMicrotask</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-title class_">PromiseState</span>.<span class="hljs-property">rejected</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span> = reason
    })
  }
  then&lt;<span class="hljs-title class_">TResult1</span> = T, <span class="hljs-title class_">TResult2</span> = <span class="hljs-built_in">never</span>&gt;(
    onFulfilled?: (<span class="hljs-function">(<span class="hljs-params">value: T</span>) =&gt;</span> <span class="hljs-title class_">TResult1</span> | <span class="hljs-title class_">PromiseLike</span>&lt;<span class="hljs-title class_">TResult1</span>&gt;) | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span>,
    onRejected?: (<span class="hljs-function">(<span class="hljs-params">reason: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-title class_">TResult2</span> | <span class="hljs-title class_">PromiseLike</span>&lt;<span class="hljs-title class_">TResult2</span>&gt;) | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span>
  ) {
    <span class="hljs-comment">// TODO</span>
  }
}
</code></pre>
<p>ä¸‹é¢å°±æ¥å†™<code>then</code>æ–¹æ³•å®ç°å¼‚æ­¥çš„é“¾å¼è°ƒç”¨ã€‚</p>
<h2 data-id="heading-8">then æ–¹æ³•</h2>
<p><code>then</code>è¿”å›ä¸€ä¸ª Promiseï¼Œè™½ç„¶ Promise A+ è§„èŒƒæ²¡æœ‰è¯´æ˜éœ€è¦è¿”å›çš„ Promise ä¸èƒ½å’ŒåŸæœ‰çš„æ˜¯åŒä¸€ä¸ªï¼Œä½†æ˜¯è€ƒè™‘åˆ°åç»­é“¾å¼è°ƒç”¨ä¹Ÿä¼šæ¶‰åŠåˆ° Promise çŠ¶æ€çš„æ”¹å˜ï¼Œæ‰€ä»¥è¿™é‡Œå°±è¿”å›ä¸€ä¸ªæ–°çš„ Promiseã€‚</p>
<h3 data-id="heading-9">fulfilled å’Œ rejected çŠ¶æ€</h3>
<p>å‡è®¾<code>const promise2 = promise1.then(onFulfilled, onRejected)</code>ï¼Œè°ƒç”¨<code>promise1.then</code>æ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„ Promise <code>promise2</code>è¿”å›å‡ºå»ã€‚ç”¨è¿‡ ES6 çš„<code>Promise</code>å¾ˆå¥½ç†è§£ï¼Œå¦‚æœåŸæœ‰<code>promise1</code>æ˜¯ fulfilled çš„ï¼Œåˆ™åœ¨æ–°çš„<code>promise2</code>çš„<code>executor</code>ä¸­çš„<code>resolve</code>ä¼ å…¥<code>onFulfilled</code>çš„ç»“æœï¼Œå¦‚æœ<code>promise1</code>å¤„äºå¤±è´¥çŠ¶æ€ï¼Œrejected äº†ï¼Œåˆ™åœ¨<code>promise2</code>çš„<code>resolve</code>ä¸­ä¼ å…¥<code>onRejected</code>çš„ç»“æœã€‚</p>
<p>ä¸¾ä¸ªæ —å­ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> promiseTmp1 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">'ok'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> value, <span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> reason)
<span class="hljs-comment">// æ­¤æ—¶ promiseTmp1.value æ˜¯ 'ok'</span>
<span class="hljs-keyword">const</span> promiseTmp2 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">'error'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> value, <span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> reason)
<span class="hljs-comment">// æ­¤æ—¶ promiseTmp2.value æ˜¯ 'error'</span>
</code></pre>
<p>ä¸‹é¢ç¼–å†™ fulfilled å’Œ rejected çŠ¶æ€çš„å¤„ç†é€»è¾‘ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// ...</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ShikaPromise</span> {
  <span class="hljs-comment">// ...</span>
  then&lt;<span class="hljs-title class_">TResult1</span> = T, <span class="hljs-title class_">TResult2</span> = <span class="hljs-built_in">never</span>&gt;(
    onFulfilled?: (<span class="hljs-function">(<span class="hljs-params">value: T</span>) =&gt;</span> <span class="hljs-title class_">TResult1</span> | <span class="hljs-title class_">PromiseLike</span>&lt;<span class="hljs-title class_">TResult1</span>&gt;) | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span>,
    onRejected?: (<span class="hljs-function">(<span class="hljs-params">reason: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-title class_">TResult2</span> | <span class="hljs-title class_">PromiseLike</span>&lt;<span class="hljs-title class_">TResult2</span>&gt;) | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span>
  ): <span class="hljs-title class_">ShikaPromise</span>&lt;<span class="hljs-title class_">TResult1</span> | <span class="hljs-title class_">TResult2</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShikaPromise</span>&lt;<span class="hljs-title class_">TResult1</span> | <span class="hljs-title class_">TResult2</span>&gt;(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleCallback</span> = (<span class="hljs-params">isFulfilled: <span class="hljs-built_in">boolean</span></span>) =&gt; {
        <span class="hljs-title function_">scheduleMicrotask</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">const</span> callback = isFulfilled ? onFulfilled : onRejected
          <span class="hljs-keyword">const</span> data = isFulfilled ? <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> : <span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span>
          <span class="hljs-comment">// ä¼ å€¼ç©¿é€</span>
          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> callback !== <span class="hljs-string">'function'</span>) {
            <span class="hljs-keyword">if</span> (isFulfilled) {
              <span class="hljs-title function_">resolve</span>(data <span class="hljs-keyword">as</span> <span class="hljs-title class_">TResult1</span>)
            } <span class="hljs-keyword">else</span> {
              <span class="hljs-title function_">reject</span>(data)
            }
            <span class="hljs-keyword">return</span>
          }

          <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">callback</span>(data)
            <span class="hljs-title function_">resolve</span>(result)
          } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-title function_">reject</span>(error)
          }
        })
      }

      <span class="hljs-keyword">switch</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>) {
        <span class="hljs-keyword">case</span> <span class="hljs-title class_">PromiseState</span>.<span class="hljs-property">fulfilled</span>:
          <span class="hljs-title function_">handleCallback</span>(<span class="hljs-literal">true</span>)
          <span class="hljs-keyword">break</span>
        <span class="hljs-keyword">case</span> <span class="hljs-title class_">PromiseState</span>.<span class="hljs-property">rejected</span>:
          <span class="hljs-title function_">handleCallback</span>(<span class="hljs-literal">false</span>)
          <span class="hljs-keyword">break</span>
        <span class="hljs-attr">default</span>:
          <span class="hljs-comment">// TODO</span>
      }
    })
  }
}
</code></pre>
<h3 data-id="heading-10">pending çŠ¶æ€</h3>
<p><code>promise1</code>åœ¨ç­‰å¾…çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨<code>promise1</code>ä¸Šæ–°å»ºä¸¤ä¸ªå±æ€§<code>fulfilledHandlers</code>ã€<code>rejectedHandlers</code>ç¼“å­˜ç»™<code>promise2</code>è§¦å‘<code>resolve</code>å’Œ<code>reject</code>çš„å›è°ƒå‡½æ•°ã€‚<code>promise2</code>å¤„äº pending çŠ¶æ€ï¼Œ<code>promise1</code>åˆ‡æ¢çŠ¶æ€åè§¦å‘è¿™äº›å›è°ƒå‡½æ•°ï¼Œç”¨æ¥æ”¹å˜<code>promise2</code>çš„çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// ...</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ShikaPromise</span> {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-comment">// è®°å½•ç­‰å¾… fulfilled æˆ–è€… rejected åæ‰§è¡Œçš„å›è°ƒå‡½æ•°</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">fulfilledHandlers</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>&gt; = []
  <span class="hljs-keyword">private</span> <span class="hljs-attr">rejectedHandlers</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>&gt; = []
  <span class="hljs-comment">// ...</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-attr">value</span>: T): <span class="hljs-built_in">void</span> {
    <span class="hljs-title function_">scheduleMicrotask</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-title class_">PromiseState</span>.<span class="hljs-property">fulfilled</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = value

      <span class="hljs-keyword">const</span> handlers = <span class="hljs-variable language_">this</span>.<span class="hljs-property">fulfilledHandlers</span>.<span class="hljs-title function_">splice</span>(<span class="hljs-number">0</span>)
      handlers.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">h</span>) =&gt;</span> <span class="hljs-title function_">h</span>())
    })
  }
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">reject</span>(<span class="hljs-attr">reason</span>: <span class="hljs-built_in">any</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-title function_">scheduleMicrotask</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-title class_">PromiseState</span>.<span class="hljs-property">rejected</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span> = reason

      <span class="hljs-keyword">const</span> handlers = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rejectedHandlers</span>.<span class="hljs-title function_">splice</span>(<span class="hljs-number">0</span>)
      handlers.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">h</span>) =&gt;</span> <span class="hljs-title function_">h</span>())
    })
  }
  <span class="hljs-comment">// ...</span>
  then (onFulfilled?: <span class="hljs-title class_">ThenCallback</span>, onRejected?: <span class="hljs-title class_">ThenCallback</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShikaPromise</span>&lt;<span class="hljs-title class_">TResult1</span> | <span class="hljs-title class_">TResult2</span>&gt;(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-comment">// ...</span>
      <span class="hljs-keyword">switch</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>) {
        <span class="hljs-comment">// ...</span>
        <span class="hljs-attr">default</span>:
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">fulfilledHandlers</span>.<span class="hljs-title function_">push</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">handleCallback</span>(<span class="hljs-literal">true</span>))
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">rejectedHandlers</span>.<span class="hljs-title function_">push</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">handleCallback</span>(<span class="hljs-literal">false</span>))
      }
    })
  }
}
</code></pre>
<h2 data-id="heading-11">é˜²æ­¢å¤šæ¬¡è§¦å‘</h2>
<p>æˆ‘ä»¬é€šè¿‡æ·»åŠ æ ‡è®°<code>isResolved</code>è®°å½•æ˜¯å¦å·²ç»è§¦å‘<code>resolve</code>ã€‚å½“é‡å¤è§¦å‘<code>resolve</code>å’Œ<code>reject</code>æ—¶ï¼Œé‡åˆ°<code>isResolved</code>ä¸º<code>true</code>å°±è¿”å›ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// ...</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ShikaPromise</span>&lt;T = <span class="hljs-built_in">any</span>&gt; {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-keyword">private</span> isResolved = <span class="hljs-literal">false</span>
  <span class="hljs-comment">// ...</span>

  <span class="hljs-keyword">private</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-attr">value</span>: T | <span class="hljs-title class_">PromiseLike</span>&lt;T&gt;): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isResolved</span>) <span class="hljs-keyword">return</span>
    
    <span class="hljs-keyword">if</span> (value === <span class="hljs-variable language_">this</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'Cannot resolve promise with itself'</span>))
      <span class="hljs-keyword">return</span>
    }
    
    <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> thenable å¤„ç†</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fulfill</span>(value <span class="hljs-keyword">as</span> T)
  }

  <span class="hljs-keyword">private</span> <span class="hljs-title function_">fulfill</span>(<span class="hljs-attr">value</span>: T): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isResolved</span>) <span class="hljs-keyword">return</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isResolved</span> = <span class="hljs-literal">true</span>
    
    <span class="hljs-title function_">scheduleMicrotask</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-title class_">PromiseState</span>.<span class="hljs-property">fulfilled</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = value

      <span class="hljs-keyword">const</span> handlers = <span class="hljs-variable language_">this</span>.<span class="hljs-property">fulfilledHandlers</span>.<span class="hljs-title function_">splice</span>(<span class="hljs-number">0</span>)
      handlers.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">h</span>) =&gt;</span> <span class="hljs-title function_">h</span>())
    })
  }

  <span class="hljs-keyword">private</span> <span class="hljs-title function_">reject</span>(<span class="hljs-attr">reason</span>: <span class="hljs-built_in">any</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isResolved</span>) <span class="hljs-keyword">return</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isResolved</span> = <span class="hljs-literal">true</span>
    <span class="hljs-comment">// ...</span>
  }
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<h2 data-id="heading-12">è§£æ thenable å¯¹è±¡</h2>
<p>å¦‚æœé‡åˆ° thenable å¯¹è±¡ï¼Œç­‰å¾…å…¶è¿›å…¥ fulfilled æˆ–è€… rejected çŠ¶æ€ï¼ŒåŒæ ·çš„ï¼Œthenable å¯¹è±¡ä¹Ÿéœ€è¦é˜²æ­¢é‡å¤è¿›å…¥ fulfilled å’Œ rejected çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ShikaPromise</span>&lt;T = <span class="hljs-built_in">any</span>&gt; {
  <span class="hljs-comment">// ...</span>

  <span class="hljs-keyword">private</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-attr">value</span>: T | <span class="hljs-title class_">PromiseLike</span>&lt;T&gt;): <span class="hljs-built_in">void</span> {
    <span class="hljs-comment">// ...</span>
    <span class="hljs-keyword">const</span> thenable = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getThenable</span>(value)
    <span class="hljs-keyword">if</span> (thenable) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resolveThenable</span>(thenable)
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fulfill</span>(value <span class="hljs-keyword">as</span> T)
    }
  }
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">getThenable</span>(<span class="hljs-attr">value</span>: <span class="hljs-built_in">any</span>): { <span class="hljs-attr">then</span>: <span class="hljs-title class_">Function</span>; <span class="hljs-attr">target</span>: <span class="hljs-built_in">any</span> } | <span class="hljs-literal">null</span> {
    <span class="hljs-keyword">if</span> (value !== <span class="hljs-literal">null</span> &amp;&amp; (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'object'</span> || <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'function'</span>)) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// åœ¨è§„èŒƒä¸­æœ‰ Let then be x.then çš„æè¿°ï¼Œæµ‹è¯•ç”¨ä¾‹ä¸­ value.then åªèƒ½è¢«å–ä¸€æ¬¡</span>
        <span class="hljs-keyword">const</span> then = value.<span class="hljs-property">then</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> then === <span class="hljs-string">'function'</span>) {
          <span class="hljs-keyword">return</span> { then, <span class="hljs-attr">target</span>: value }
        }
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reject</span>(error)
      }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
  }

  <span class="hljs-keyword">private</span> <span class="hljs-title function_">resolveThenable</span>(<span class="hljs-attr">thenable</span>: { <span class="hljs-attr">then</span>: <span class="hljs-title class_">Function</span>; <span class="hljs-attr">target</span>: <span class="hljs-built_in">any</span> }): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">let</span> called = <span class="hljs-literal">false</span>

    <span class="hljs-keyword">try</span> {
      thenable.<span class="hljs-property">then</span>.<span class="hljs-title function_">call</span>(
        thenable.<span class="hljs-property">target</span>,
        <span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
          <span class="hljs-keyword">if</span> (called) <span class="hljs-keyword">return</span>
          called = <span class="hljs-literal">true</span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">resolvevaluey</span>)
        },
        <span class="hljs-function">(<span class="hljs-params">reason: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
          <span class="hljs-keyword">if</span> (called) <span class="hljs-keyword">return</span>
          called = <span class="hljs-literal">true</span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reject</span>(reason)
        }
      )
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">if</span> (!called) <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reject</span>(error)
    }
  }
}
</code></pre>
<h2 data-id="heading-13">å…¶ä»–æ–¹æ³•</h2>
<h3 data-id="heading-14">JS çš„ Promise</h3>
<p>ä¸‹é¢å°±æ¥å®ç°ä¸€ä¸‹ JS çš„ Promse çš„<code>catch</code>å’Œ<code>finally</code>ã€‚<code>catch</code>å°±æ˜¯<code>then</code>æ–¹æ³•åªæä¾›ç¬¬äºŒä¸ªå‚æ•°ã€‚<code>finally</code>æ–¹æ³•å›è°ƒå‡½æ•°ä¸æ¥æ”¶ä»»ä½•å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªçŠ¶æ€å’Œæ•°æ®ä¸åŸæ¥ç›¸åŒçš„ Promiseã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ShikaPromise</span> {
  <span class="hljs-keyword">catch</span>&lt;<span class="hljs-title class_">TResult</span> = <span class="hljs-built_in">never</span>&gt;(
    onRejected?: (<span class="hljs-function">(<span class="hljs-params">reason: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-title class_">TResult</span> | <span class="hljs-title class_">PromiseLike</span>&lt;<span class="hljs-title class_">TResult</span>&gt;) | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span>
  ): <span class="hljs-title class_">ShikaPromise</span>&lt;T | <span class="hljs-title class_">TResult</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">then</span>(<span class="hljs-literal">null</span>, onRejected)
  }

  <span class="hljs-title function_">finally</span>(onFinally?: (<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>) | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span>): <span class="hljs-title class_">ShikaPromise</span>&lt;T&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">then</span>(
      <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {
        onFinally?.()
        <span class="hljs-keyword">return</span> value
      },
      <span class="hljs-function">(<span class="hljs-params">reason</span>) =&gt;</span> {
        onFinally?.()
        <span class="hljs-keyword">throw</span> reason
      }
    )
  }
}
</code></pre>
<p>è¿˜æœ‰<code>Promise.resolve</code>å’Œ<code>Promise.reject</code>ä¸¤ä¸ªé™æ€æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ShikaPromise</span> {
  <span class="hljs-keyword">static</span> resolve&lt;T&gt;(<span class="hljs-attr">value</span>: T | <span class="hljs-title class_">PromiseLike</span>&lt;T&gt;): <span class="hljs-title class_">ShikaPromise</span>&lt;T&gt; {
    <span class="hljs-keyword">return</span> value <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">ShikaPromise</span> ? value : <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShikaPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> <span class="hljs-title function_">resolve</span>(value))
  }
  <span class="hljs-keyword">static</span> reject&lt;T = <span class="hljs-built_in">never</span>&gt;(reason?: <span class="hljs-built_in">any</span>): <span class="hljs-title class_">ShikaPromise</span>&lt;T&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShikaPromise</span>(<span class="hljs-function">(<span class="hljs-params">_, reject</span>) =&gt;</span> <span class="hljs-title function_">reject</span>(reason))
  }
}
</code></pre>
<h3 data-id="heading-15">å¦‚æœ Promise å¯ä»¥åœæ­¢</h3>
<p>å¦‚æœæƒ³è¦ Promise åé¢çš„<code>then</code>ï¼ˆ<code>catch</code>ã€<code>finally</code>ï¼‰éƒ½ä¸ä¼šè§¦å‘ï¼Œè¿™é‡Œåªéœ€è¦è¿”å›ä¸€ä¸ª pending çŠ¶æ€çš„ Promiseã€‚è¿™é‡Œå®ç°ä¸€ä¸ªæ—¶é“¾å¼è°ƒç”¨åœæ­¢çš„<code>cancel</code>æ–¹æ³•å’Œè¿”å› pending çš„ Promise çš„<code>wait</code>æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ShikaPromise</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">wait</span>(): <span class="hljs-title class_">ShikaPromise</span>&lt;<span class="hljs-built_in">never</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShikaPromise</span>(<span class="hljs-function">() =&gt;</span> {})
  }
  <span class="hljs-title function_">cancel</span>(): <span class="hljs-title class_">ShikaPromise</span>&lt;<span class="hljs-built_in">never</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShikaPromise</span>(<span class="hljs-function">() =&gt;</span> {})
  }
}
</code></pre>
<h2 data-id="heading-16">Promise A+ æµ‹è¯•</h2>
<p>ä¸‹è½½ promises-aplus-tests åŒ…ï¼š</p>
<pre><code class="hljs language-cmd" lang="cmd">npm i promises-aplus-tests
</code></pre>
<p>è¦æ±‚ Promise æ‰€åœ¨æ–‡ä»¶é‡‡ç”¨ <strong>commonjs</strong> æ–¹å¼å¯¼å‡ºã€‚è¿˜éœ€è¦åœ¨ Promise ä¸Šå®ç°é™æ€æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ShikaPromise</span> {
  <span class="hljs-keyword">static</span> deferred&lt;T&gt;() {
    <span class="hljs-keyword">let</span> resolve!: <span class="hljs-function">(<span class="hljs-params">value: T | PromiseLike&lt;T&gt;</span>) =&gt;</span> <span class="hljs-built_in">void</span>
    <span class="hljs-keyword">let</span> reject!: <span class="hljs-function">(<span class="hljs-params">reason?: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>

    <span class="hljs-keyword">const</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShikaPromise</span>&lt;T&gt;(<span class="hljs-function">(<span class="hljs-params">res, rej</span>) =&gt;</span> {
      resolve = res
      reject = rej
    })

    <span class="hljs-keyword">return</span> { promise, resolve, reject }
  }
}
</code></pre>
<p><code>promises-aplus-tests Promise çš„æ‰€åœ¨æ–‡ä»¶</code>å³å¯è¿è¡Œï¼Œå¦‚æœä½ åœ¨ç”¨ TSï¼Œæ–‡ä»¶ä¸ºç¼–è¯‘åçš„æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-cmd" lang="cmd">promises-aplus-tests dist/æ–‡ä»¶å.js
</code></pre>
<p>Promise A+ çš„æµ‹è¯•ç”¨ä¾‹è¦†ç›–é¢éå¸¸å…¨ï¼Œ<del>è°ƒè¯•æ—¶çƒ¦æ­»äº†x</del>ï¼Œé€šè¿‡äº†æ‰€æœ‰ 817 æ¡ç”¨ä¾‹ï¼Œå°±è¯´æ˜ä½ çš„ Promise å®ç°äº† Promise A+ æ ‡å‡†äº†ã€‚</p>
<p>æˆ‘æŠŠ TS ç¼–è¯‘å’Œè¿è¡Œæµ‹è¯•ç”¨ä¾‹åœ¨ package.json ç»„è£…æˆä¸€æ¡å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-comment">// ...</span>
    <span class="hljs-attr">"test"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsc &amp;&amp; promises-aplus-tests dist/æ–‡ä»¶å.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-comment">// ...</span>
<span class="hljs-punctuation">}</span>

</code></pre>
<p>è¿™é‡Œ <code>tsc</code> ä¼šé»˜è®¤ç¼–è¯‘ tsconfig.json è®¾ç½®çš„æ ¹ç›®å½•ï¼ˆè¿™é‡Œæ˜¯ ./srcï¼‰ï¼Œç„¶åæ”¾åˆ°è¾“å‡ºç›®å½•ä¸­ï¼ˆè¿™é‡Œæ˜¯ ./distï¼‰ã€‚</p>
<h2 data-id="heading-17">æœ€ç»ˆå®ç°</h2>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">PromiseState</span> {
  fulfilled = <span class="hljs-string">'fulfilled'</span>,
  pending = <span class="hljs-string">'pending'</span>,
  rejected = <span class="hljs-string">'rejected'</span>
}

<span class="hljs-keyword">type</span> <span class="hljs-title class_">Executor</span>&lt;T&gt; = <span class="hljs-function">(<span class="hljs-params">
  resolve: (value: T | PromiseLike&lt;T&gt;) =&gt; <span class="hljs-built_in">void</span>,
  reject: (reason?: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">void</span>
</span>) =&gt;</span> <span class="hljs-built_in">void</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">scheduleMicrotask</span> = (<span class="hljs-params">callback: () =&gt; <span class="hljs-built_in">void</span></span>) =&gt; {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> queueMicrotask === <span class="hljs-string">'function'</span>) {
    <span class="hljs-title function_">queueMicrotask</span>(callback)
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> process !== <span class="hljs-string">'undefined'</span> &amp;&amp; process.<span class="hljs-property">nextTick</span>) {
    process.<span class="hljs-title function_">nextTick</span>(callback)
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(callback)
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ShikaPromise</span>&lt;T = <span class="hljs-built_in">any</span>&gt; {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">state</span>: <span class="hljs-title class_">PromiseState</span> = <span class="hljs-title class_">PromiseState</span>.<span class="hljs-property">pending</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">value</span>: T | <span class="hljs-literal">undefined</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">reason</span>: <span class="hljs-built_in">any</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">fulfilledHandlers</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>&gt; = []
  <span class="hljs-keyword">private</span> <span class="hljs-attr">rejectedHandlers</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>&gt; = []
  <span class="hljs-keyword">private</span> isResolved = <span class="hljs-literal">false</span>

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">executor: Executor&lt;T&gt;</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-title function_">executor</span>(
        <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resolve</span>(value),
        <span class="hljs-function">(<span class="hljs-params">reason</span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reject</span>(reason)
      )
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reject</span>(error)
    }
  }

  <span class="hljs-keyword">private</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-attr">value</span>: T | <span class="hljs-title class_">PromiseLike</span>&lt;T&gt;): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isResolved</span>) <span class="hljs-keyword">return</span>

    <span class="hljs-keyword">if</span> (value === <span class="hljs-variable language_">this</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'Cannot resolve promise with itself'</span>))
      <span class="hljs-keyword">return</span>
    }

    <span class="hljs-keyword">const</span> thenable = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getThenable</span>(value)
    <span class="hljs-keyword">if</span> (thenable) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resolveThenable</span>(thenable)
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fulfill</span>(value <span class="hljs-keyword">as</span> T)
    }
  }

  <span class="hljs-keyword">private</span> <span class="hljs-title function_">fulfill</span>(<span class="hljs-attr">value</span>: T): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isResolved</span>) <span class="hljs-keyword">return</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isResolved</span> = <span class="hljs-literal">true</span>

    <span class="hljs-title function_">scheduleMicrotask</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-title class_">PromiseState</span>.<span class="hljs-property">fulfilled</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = value

      <span class="hljs-keyword">const</span> handlers = <span class="hljs-variable language_">this</span>.<span class="hljs-property">fulfilledHandlers</span>.<span class="hljs-title function_">splice</span>(<span class="hljs-number">0</span>)
      handlers.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">h</span>) =&gt;</span> <span class="hljs-title function_">h</span>())
    })
  }

  <span class="hljs-keyword">private</span> <span class="hljs-title function_">reject</span>(<span class="hljs-attr">reason</span>: <span class="hljs-built_in">any</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isResolved</span>) <span class="hljs-keyword">return</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isResolved</span> = <span class="hljs-literal">true</span>

    <span class="hljs-title function_">scheduleMicrotask</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-title class_">PromiseState</span>.<span class="hljs-property">rejected</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span> = reason

      <span class="hljs-keyword">const</span> handlers = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rejectedHandlers</span>.<span class="hljs-title function_">splice</span>(<span class="hljs-number">0</span>)
      handlers.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">h</span>) =&gt;</span> <span class="hljs-title function_">h</span>())
    })
  }

  <span class="hljs-keyword">private</span> <span class="hljs-title function_">getThenable</span>(<span class="hljs-attr">value</span>: <span class="hljs-built_in">any</span>): { <span class="hljs-attr">then</span>: <span class="hljs-title class_">Function</span>; <span class="hljs-attr">target</span>: <span class="hljs-built_in">any</span> } | <span class="hljs-literal">null</span> {
    <span class="hljs-keyword">if</span> (value !== <span class="hljs-literal">null</span> &amp;&amp; (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'object'</span> || <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'function'</span>)) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> then = value.<span class="hljs-property">then</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> then === <span class="hljs-string">'function'</span>) {
          <span class="hljs-keyword">return</span> { then, <span class="hljs-attr">target</span>: value }
        }
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reject</span>(error)
      }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
  }

  <span class="hljs-keyword">private</span> <span class="hljs-title function_">resolveThenable</span>(<span class="hljs-attr">thenable</span>: { <span class="hljs-attr">then</span>: <span class="hljs-title class_">Function</span>; <span class="hljs-attr">target</span>: <span class="hljs-built_in">any</span> }): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">let</span> called = <span class="hljs-literal">false</span>

    <span class="hljs-keyword">try</span> {
      thenable.<span class="hljs-property">then</span>.<span class="hljs-title function_">call</span>(
        thenable.<span class="hljs-property">target</span>,
        <span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
          <span class="hljs-keyword">if</span> (called) <span class="hljs-keyword">return</span>
          called = <span class="hljs-literal">true</span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resolve</span>(value)
        },
        <span class="hljs-function">(<span class="hljs-params">reason: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
          <span class="hljs-keyword">if</span> (called) <span class="hljs-keyword">return</span>
          called = <span class="hljs-literal">true</span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reject</span>(reason)
        }
      )
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">if</span> (!called) <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reject</span>(error)
    }
  }

  then&lt;<span class="hljs-title class_">TResult1</span> = T, <span class="hljs-title class_">TResult2</span> = <span class="hljs-built_in">never</span>&gt;(
    onFulfilled?: (<span class="hljs-function">(<span class="hljs-params">value: T</span>) =&gt;</span> <span class="hljs-title class_">TResult1</span> | <span class="hljs-title class_">PromiseLike</span>&lt;<span class="hljs-title class_">TResult1</span>&gt;) | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span>,
    onRejected?: (<span class="hljs-function">(<span class="hljs-params">reason: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-title class_">TResult2</span> | <span class="hljs-title class_">PromiseLike</span>&lt;<span class="hljs-title class_">TResult2</span>&gt;) | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span>
  ): <span class="hljs-title class_">ShikaPromise</span>&lt;<span class="hljs-title class_">TResult1</span> | <span class="hljs-title class_">TResult2</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShikaPromise</span>&lt;<span class="hljs-title class_">TResult1</span> | <span class="hljs-title class_">TResult2</span>&gt;(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleCallback</span> = (<span class="hljs-params">isFulfilled: <span class="hljs-built_in">boolean</span></span>) =&gt; {
        <span class="hljs-title function_">scheduleMicrotask</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">const</span> callback = isFulfilled ? onFulfilled : onRejected
          <span class="hljs-keyword">const</span> data = isFulfilled ? <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> : <span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span>

          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> callback !== <span class="hljs-string">'function'</span>) {
            <span class="hljs-keyword">if</span> (isFulfilled) {
              <span class="hljs-title function_">resolve</span>(data <span class="hljs-keyword">as</span> <span class="hljs-title class_">TResult1</span>)
            } <span class="hljs-keyword">else</span> {
              <span class="hljs-title function_">reject</span>(data)
            }
            <span class="hljs-keyword">return</span>
          }

          <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">callback</span>(data)
            <span class="hljs-title function_">resolve</span>(result)
          } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-title function_">reject</span>(error)
          }
        })
      }

      <span class="hljs-keyword">switch</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>) {
        <span class="hljs-keyword">case</span> <span class="hljs-title class_">PromiseState</span>.<span class="hljs-property">fulfilled</span>:
          <span class="hljs-title function_">handleCallback</span>(<span class="hljs-literal">true</span>)
          <span class="hljs-keyword">break</span>
        <span class="hljs-keyword">case</span> <span class="hljs-title class_">PromiseState</span>.<span class="hljs-property">rejected</span>:
          <span class="hljs-title function_">handleCallback</span>(<span class="hljs-literal">false</span>)
          <span class="hljs-keyword">break</span>
        <span class="hljs-attr">default</span>:
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">fulfilledHandlers</span>.<span class="hljs-title function_">push</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">handleCallback</span>(<span class="hljs-literal">true</span>))
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">rejectedHandlers</span>.<span class="hljs-title function_">push</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">handleCallback</span>(<span class="hljs-literal">false</span>))
      }
    })
  }

  <span class="hljs-keyword">catch</span>&lt;<span class="hljs-title class_">TResult</span> = <span class="hljs-built_in">never</span>&gt;(
    onRejected?: (<span class="hljs-function">(<span class="hljs-params">reason: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-title class_">TResult</span> | <span class="hljs-title class_">PromiseLike</span>&lt;<span class="hljs-title class_">TResult</span>&gt;) | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span>
  ): <span class="hljs-title class_">ShikaPromise</span>&lt;T | <span class="hljs-title class_">TResult</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">then</span>(<span class="hljs-literal">null</span>, onRejected)
  }

  <span class="hljs-title function_">finally</span>(onFinally?: (<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>) | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span>): <span class="hljs-title class_">ShikaPromise</span>&lt;T&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">then</span>(
      <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {
        onFinally?.()
        <span class="hljs-keyword">return</span> value
      },
      <span class="hljs-function">(<span class="hljs-params">reason</span>) =&gt;</span> {
        onFinally?.()
        <span class="hljs-keyword">throw</span> reason
      }
    )
  }

  <span class="hljs-keyword">static</span> resolve&lt;T&gt;(<span class="hljs-attr">value</span>: T | <span class="hljs-title class_">PromiseLike</span>&lt;T&gt;): <span class="hljs-title class_">ShikaPromise</span>&lt;T&gt; {
    <span class="hljs-keyword">return</span> value <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">ShikaPromise</span> ? value : <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShikaPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> <span class="hljs-title function_">resolve</span>(value))
  }

  <span class="hljs-keyword">static</span> reject&lt;T = <span class="hljs-built_in">never</span>&gt;(reason?: <span class="hljs-built_in">any</span>): <span class="hljs-title class_">ShikaPromise</span>&lt;T&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShikaPromise</span>(<span class="hljs-function">(<span class="hljs-params">_, reject</span>) =&gt;</span> <span class="hljs-title function_">reject</span>(reason))
  }

  <span class="hljs-keyword">static</span> <span class="hljs-title function_">wait</span>(): <span class="hljs-title class_">ShikaPromise</span>&lt;<span class="hljs-built_in">never</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShikaPromise</span>(<span class="hljs-function">() =&gt;</span> {})
  }

  <span class="hljs-title function_">cancel</span>(): <span class="hljs-title class_">ShikaPromise</span>&lt;<span class="hljs-built_in">never</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShikaPromise</span>(<span class="hljs-function">() =&gt;</span> {})
  }

  <span class="hljs-keyword">static</span> deferred&lt;T&gt;() {
    <span class="hljs-keyword">let</span> resolve!: <span class="hljs-function">(<span class="hljs-params">value: T | PromiseLike&lt;T&gt;</span>) =&gt;</span> <span class="hljs-built_in">void</span>
    <span class="hljs-keyword">let</span> reject!: <span class="hljs-function">(<span class="hljs-params">reason?: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>

    <span class="hljs-keyword">const</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShikaPromise</span>&lt;T&gt;(<span class="hljs-function">(<span class="hljs-params">res, rej</span>) =&gt;</span> {
      resolve = res
      reject = rej
    })

    <span class="hljs-keyword">return</span> { promise, resolve, reject }
  }
}

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-title class_">ShikaPromise</span>

</code></pre>
<h2 data-id="heading-18">ç»“å°¾</h2>
<p>è¿™é‡Œå®ç°äº†ä¸€ä¸ª Promise A+ è§„èŒƒçš„ Promiseï¼Œé‡æ–°ç†è§£ Promise A+ è§„èŒƒä¹Ÿä¿®å¤äº†æˆ‘ä»¥å‰å¯¹æ­¤çš„è®¤è¯†ä¸è¶³ä¹‹å¤„ã€‚</p>
<blockquote>
<p>å¤§å®¶çš„é˜…è¯»æ˜¯æˆ‘å‘å¸–çš„åŠ¨åŠ›ï¼Œæœ¬æ–‡é¦–å‘äºæˆ‘çš„åšå®¢ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeerblog.gu-nami.com%2Fweb%2Farticle%2F158" target="_blank" title="https://deerblog.gu-nami.com/web/article/158" ref="nofollow noopener noreferrer">deerblog.gu-nami.com/</a>ï¼Œæ¬¢è¿å¤§å®¶æ¥ç©<del>å–µ</del>ï¼Œ
è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨htmlä¸­ä½¿ç”¨jsåŠ¨æ€äº¤æ¢ä¸¤ä¸ªå…ƒç´ çš„ä½ç½®]]></title>    <link>https://juejin.cn/post/7576608733612916762</link>    <guid>https://juejin.cn/post/7576608733612916762</guid>    <pubDate>2025-11-26T08:24:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576608733612916762" data-draft-id="7576580177663279114" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨htmlä¸­ä½¿ç”¨jsåŠ¨æ€äº¤æ¢ä¸¤ä¸ªå…ƒç´ çš„ä½ç½®"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-26T08:24:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="1024å°ç¥"/> <meta itemprop="url" content="https://juejin.cn/user/70007368988926"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨htmlä¸­ä½¿ç”¨jsåŠ¨æ€äº¤æ¢ä¸¤ä¸ªå…ƒç´ çš„ä½ç½®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/70007368988926/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    1024å°ç¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T08:24:31.000Z" title="Wed Nov 26 2025 08:24:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘çš„å¼€æºé¡¹ç›®PakePluså¯ä»¥å°†ç½‘é¡µ/Vue/Reacté¡¹ç›®æ‰“åŒ…ä¸ºæ¡Œé¢/æ‰‹æœºåº”ç”¨å¹¶ä¸”å°äº5Måªéœ€å‡ åˆ†é’Ÿï¼Œå®˜ç½‘åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpakeplus.com" target="_blank" title="https://pakeplus.com" ref="nofollow noopener noreferrer">pakeplus.com</a></p><p><img alt="" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0364d49f93104243a44560ff89a22973~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp" width="1420" loading="lazy"/></p><p/>
<p>1. DOMæ“ä½œäº¤æ¢</p>
<p>ä½¿ç”¨ insertBefore æˆ– replaceChild æ–¹æ³•ç›´æ¥æ“ä½œDOMå…ƒç´ </p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">swapElementsDOM</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'elementsContainer'</span>);
  <span class="hljs-keyword">const</span> element1 = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'element1'</span>);
  <span class="hljs-keyword">const</span> element2 = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'element2'</span>);

  <span class="hljs-keyword">if</span> (element1.<span class="hljs-property">nextElementSibling</span> === element2) {
    container.<span class="hljs-title function_">insertBefore</span>(element2, element1);
  } <span class="hljs-keyword">else</span> {
    container.<span class="hljs-title function_">insertBefore</span>(element1, element2);
  }
}</code></pre>
<p/>
<p>2. CSSç±»åˆ‡æ¢äº¤æ¢</p>
<p>é€šè¿‡åˆ‡æ¢CSSç±»æ¥æ”¹å˜å…ƒç´ çš„æ˜¾ç¤ºé¡ºåºï¼ˆä½¿ç”¨flex-directionæˆ–orderå±æ€§ï¼‰</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">swapElementsCSS</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'elementsContainer'</span>);
  container.<span class="hljs-property">classList</span>.<span class="hljs-title function_">toggle</span>(<span class="hljs-string">'reversed'</span>);
}

<span class="hljs-comment">/* CSSéƒ¨åˆ† */</span>
.<span class="hljs-property">reversed</span> {
  flex-<span class="hljs-attr">direction</span>: column-reverse;
}</code></pre>
<p/>
<p>3. åŠ¨ç”»äº¤æ¢</p>
<p>ä½¿ç”¨CSSè¿‡æ¸¡æˆ–åŠ¨ç”»å®ç°å¹³æ»‘çš„ä½ç½®äº¤æ¢æ•ˆæœ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">swapElementsAnimated</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> element1 = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'element1'</span>);
  <span class="hljs-keyword">const</span> element2 = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'element2'</span>);

  <span class="hljs-comment">// æ·»åŠ åŠ¨ç”»ç±»</span>
  element1.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'swapping'</span>);
  element2.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'swapping'</span>);

  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// å®é™…äº¤æ¢ä½ç½®</span>
    <span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'elementsContainer'</span>);
    <span class="hljs-keyword">if</span> (element1.<span class="hljs-property">nextElementSibling</span> === element2) {
      container.<span class="hljs-title function_">insertBefore</span>(element2, element1);
    } <span class="hljs-keyword">else</span> {
      container.<span class="hljs-title function_">insertBefore</span>(element1, element2);
    }

    <span class="hljs-comment">// ç§»é™¤åŠ¨ç”»ç±»</span>
    element1.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'swapping'</span>);
    element2.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'swapping'</span>);
  }, <span class="hljs-number">300</span>);
}</code></pre>
<p/>
å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯1024å°ç¥ï¼ŒæŠ€æœ¯ç¾¤ / ç§æ´»ç¾¤ / è‚¡ç¥¨ç¾¤ æˆ– äº¤æœ‹å‹ éƒ½å¯ä»¥ç§ä¿¡æˆ‘ã€‚
å¦‚æœä½ è§‰å¾—æœ¬æ–‡æœ‰ç”¨ï¼Œä¸€é”®ä¸‰è¿ (ç‚¹èµã€è¯„è®ºã€å…³æ³¨)ï¼Œå°±æ˜¯å¯¹æˆ‘æœ€å¤§çš„æ”¯æŒ~</div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸŒŸè®©ä½ çš„uniappåº”ç”¨æ‹¥æœ‰æ›´ç°ä»£çš„äº¤äº’ä½“éªŒï¼Œä¸€ä¸ªæ”¯æŒæ»šåŠ¨æ¸å˜é€æ˜çš„å¯¼èˆªæ ç»„ä»¶ğŸŒŸ]]></title>    <link>https://juejin.cn/post/7576843726010662938</link>    <guid>https://juejin.cn/post/7576843726010662938</guid>    <pubDate>2025-11-26T08:14:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576843726010662938" data-draft-id="7576841976927158308" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸŒŸè®©ä½ çš„uniappåº”ç”¨æ‹¥æœ‰æ›´ç°ä»£çš„äº¤äº’ä½“éªŒï¼Œä¸€ä¸ªæ”¯æŒæ»šåŠ¨æ¸å˜é€æ˜çš„å¯¼èˆªæ ç»„ä»¶ğŸŒŸ"/> <meta itemprop="keywords" content="uni-app"/> <meta itemprop="datePublished" content="2025-11-26T08:14:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Cerrda"/> <meta itemprop="url" content="https://juejin.cn/user/2564487822453831"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸŒŸè®©ä½ çš„uniappåº”ç”¨æ‹¥æœ‰æ›´ç°ä»£çš„äº¤äº’ä½“éªŒï¼Œä¸€ä¸ªæ”¯æŒæ»šåŠ¨æ¸å˜é€æ˜çš„å¯¼èˆªæ ç»„ä»¶ğŸŒŸ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2564487822453831/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Cerrda
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T08:14:33.000Z" title="Wed Nov 26 2025 08:14:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">uni-app è‡ªé€‚åº”é€æ˜å¯¼èˆªæ ç»„ä»¶å®ç°</h2>
<blockquote>
<p>ä¸€ä¸ªæ”¯æŒæ»šåŠ¨æ¸å˜é€æ˜çš„ uni-app å¯¼èˆªæ ç»„ä»¶ï¼Œè®©ä½ çš„å°ç¨‹åºæ‹¥æœ‰æ›´ç°ä»£çš„äº¤äº’ä½“éªŒ</p>
</blockquote>
<h3 data-id="heading-1">ğŸ“– å‰è¨€</h3>
<p>åœ¨å¼€å‘å°ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šçœ‹åˆ°è¿™æ ·çš„æ•ˆæœï¼šé¡µé¢é¡¶éƒ¨æœ‰å¼ å¤§å›¾ï¼Œå¯¼èˆªæ åˆå§‹æ˜¯é€æ˜çš„ï¼Œéšç€é¡µé¢å‘ä¸‹æ»šåŠ¨ï¼Œå¯¼èˆªæ é€æ¸å˜å¾—ä¸é€æ˜ã€‚è¿™ç§è®¾è®¡æ—¢ç¾è§‚åˆå®ç”¨ï¼Œä»Šå¤©å°±æ¥åˆ†äº«å¦‚ä½•å®ç°è¿™ä¸ªæ•ˆæœã€‚</p>
<h3 data-id="heading-2">âœ¨ æ ¸å¿ƒç‰¹æ€§</h3>
<ul>
<li>ğŸ¨ <strong>è‡ªåŠ¨é€æ˜æ¸å˜</strong>ï¼šæ»šåŠ¨æ—¶å¯¼èˆªæ èƒŒæ™¯ä»é€æ˜åˆ°ä¸é€æ˜å¹³æ»‘è¿‡æ¸¡</li>
<li>ğŸ¯ <strong>ç²¾å‡†æ§åˆ¶</strong>ï¼šåŸºäº IntersectionObserver å®ç°ï¼Œæ€§èƒ½ä¼˜å¼‚</li>
<li>ğŸ”§ <strong>çµæ´»é…ç½®</strong>ï¼šæ”¯æŒè‡ªå®šä¹‰èƒŒæ™¯è‰²ã€æ ‡é¢˜ã€è¿”å›æŒ‰é’®ç­‰</li>
<li>ğŸ“± <strong>å®Œç¾é€‚é…</strong>ï¼šè‡ªåŠ¨é€‚é…ä¸åŒæœºå‹çš„çŠ¶æ€æ é«˜åº¦</li>
</ul>
<h3 data-id="heading-3">ğŸ¬ æ•ˆæœæ¼”ç¤º</h3>
<p>å½“ç”¨æˆ·å‘ä¸‹æ»šåŠ¨é¡µé¢æ—¶ï¼Œå¯¼èˆªæ ä¼šä»å®Œå…¨é€æ˜é€æ¸å˜ä¸ºè®¾å®šçš„èƒŒæ™¯è‰²ï¼Œæ•´ä¸ªè¿‡æ¸¡éå¸¸ä¸æ»‘è‡ªç„¶ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f8c823dd5b643ad98994394ba20456e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2VycmRh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764749673&amp;x-signature=VSqGXHTnlqacglhvNO81JB%2F9SG0%3D" alt="PixPin_2025-11-26_15-18-08.webp" loading="lazy"/></p>
<h3 data-id="heading-4">ğŸ” å®ç°åŸç†</h3>
<h4 data-id="heading-5">æ ¸å¿ƒæ€è·¯</h4>
<ol>
<li><strong>å ä½å…ƒç´ </strong>ï¼šåœ¨é¡µé¢é¡¶éƒ¨æ”¾ç½®ä¸€ä¸ªä¸å¯¼èˆªæ ç­‰é«˜çš„é€æ˜å ä½å…ƒç´ </li>
<li><strong>äº¤å‰è§‚å¯Ÿ</strong>ï¼šä½¿ç”¨ <code>IntersectionObserver</code> ç›‘å¬å ä½å…ƒç´ ä¸è§†å£çš„äº¤å‰æƒ…å†µ</li>
<li><strong>é€æ˜åº¦è®¡ç®—</strong>ï¼šæ ¹æ®äº¤å‰æ¯”ä¾‹åŠ¨æ€è®¡ç®—å¯¼èˆªæ èƒŒæ™¯çš„é€æ˜åº¦</li>
<li><strong>å®æ—¶æ›´æ–°</strong>ï¼šé€šè¿‡å“åº”å¼æ•°æ®é©±åŠ¨æ ·å¼æ›´æ–°</li>
</ol>
<h4 data-id="heading-6">å…³é”®æŠ€æœ¯ç‚¹</h4>
<ul>
<li><strong>IntersectionObserver</strong>ï¼šæ€§èƒ½ä¼˜äºä¼ ç»Ÿçš„ scroll äº‹ä»¶ç›‘å¬</li>
<li><strong>RGBA åŠ¨æ€è®¡ç®—</strong>ï¼šä¿æŒé¢œè‰²ä¸å˜ï¼Œåªæ”¹å˜é€æ˜åº¦é€šé“</li>
<li><strong>ä¸´ç•Œå€¼ä¼˜åŒ–</strong>ï¼šå¤„ç†çœŸæœºç¯å¢ƒä¸‹äº¤å‰æ¯”ä¾‹ä¸ç²¾ç¡®çš„é—®é¢˜</li>
</ul>
<hr/>
<h3 data-id="heading-7">ğŸ’» ä»£ç å®ç°</h3>
<h4 data-id="heading-8">1. ç»„ä»¶ä¸»ä½“ (<code>kl-navbar/index.vue</code>)</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;script lang="ts" setup&gt;
const { 
  title = '', 
  placeholder = false,
  leftArrow = false,
  backgroundColor = '#fff',
  autoTransparent = false 
} = defineProps&lt;{
  title?: string
  placeholder?: boolean
  leftArrow?: boolean
  backgroundColor?: string
  /** æ»šåŠ¨æ—¶æ ‡é¢˜æ é€æ˜æ¸å˜ ( tip : placeholder = trueæ—¶æ— æ•ˆ ) */
  autoTransparent?: boolean
}&gt;()

// åªæœ‰åœ¨ä¸ä½¿ç”¨ placeholder æ¨¡å¼æ—¶æ‰å¯ç”¨è‡ªåŠ¨é€æ˜
const canIUseAutoTransparent = computed(() =&gt; autoTransparent &amp;&amp; !placeholder)

const { statusBarHeight, headerHeight, navbarHeight } = useGlobalStore()

// æŒ‰éœ€å¯ç”¨é€æ˜åº¦è®¡ç®—
const { r, g, b, a } = (!canIUseAutoTransparent.value)
  ? {}
  : useAutoTransparent(backgroundColor)
&lt;/script&gt;

&lt;script lang="ts"&gt;
export default {
  options: {
    addGlobalClass: true,
    virtualHost: true,
    styleIsolation: 'shared',
  },
}
&lt;/script&gt;

&lt;template&gt;
  &lt;view&gt;
    &lt;!-- å¯¼èˆªæ ä¸»ä½“ --&gt;
    &lt;view
      class="fixed left-0 top-0 z-996 grid grid-cols-3 w-100vw items-center"
      :class="[canIUseAutoTransparent &amp;&amp; 'transition-background-color duration-100 ease-out']"
      :style="{
        height: `${navbarHeight}px`,
        paddingTop: `${statusBarHeight}px`,
        lineHeight: `${navbarHeight}px`,
        backgroundColor: canIUseAutoTransparent 
          ? `rgba(${r},${g},${b},${a})` 
          : `${backgroundColor}`,
      }"
    &gt;
      &lt;!-- è¿”å›æŒ‰é’® --&gt;
      &lt;view 
        v-if="leftArrow" 
        class="i-line-md:chevron-small-left p-x-12Px text-24Px" 
        @tap="navigateBack" 
      /&gt;
      &lt;!-- æ ‡é¢˜ --&gt;
      &lt;text class="col-start-2 text-center"&gt;
        {{ title }}
      &lt;/text&gt;
    &lt;/view&gt;
    
    &lt;!-- å ä½æ¨¡å¼ï¼šæ¨å¼€åç»­å†…å®¹ --&gt;
    &lt;view v-if="placeholder" :style="{ height: `${headerHeight}px` }" /&gt;
    
    &lt;!-- è‡ªåŠ¨é€æ˜æ¨¡å¼ï¼šç”¨äºè§‚å¯Ÿçš„ç›®æ ‡å…ƒç´  --&gt;
    &lt;view
      v-else-if="autoTransparent"
      class="_auto-transparent__observer-target pointer-events-none absolute w-full"
      :style="{ height: `${headerHeight}px` }"
    /&gt;
  &lt;/view&gt;
&lt;/template&gt;
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹ï¼š</strong></p>
<ul>
<li>å¯¼èˆªæ ä½¿ç”¨ <code>fixed</code> å®šä½ï¼Œå§‹ç»ˆå›ºå®šåœ¨é¡¶éƒ¨</li>
<li>åŠ¨æ€è®¡ç®—çŠ¶æ€æ é«˜åº¦ï¼Œé€‚é…ä¸åŒæœºå‹</li>
<li>æ ¹æ®æ¨¡å¼æ¸²æŸ“ä¸åŒçš„å ä½/è§‚å¯Ÿå…ƒç´ </li>
</ul>
<hr/>
<h4 data-id="heading-9">2. é€æ˜åº¦é€»è¾‘ (<code>use-auto-transparent.ts</code>)</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { convertToRGBA } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useAutoTransparent</span>(<span class="hljs-params">backgroundColor: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-comment">// å°†èƒŒæ™¯è‰²è½¬æ¢ä¸º RGB å€¼</span>
  <span class="hljs-keyword">const</span> { r, g, b } = <span class="hljs-title function_">convertToRGBA</span>(backgroundColor)
  <span class="hljs-keyword">const</span> a = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)  <span class="hljs-comment">// é€æ˜åº¦é€šé“ï¼Œ0 è¡¨ç¤ºå®Œå…¨é€æ˜</span>

  <span class="hljs-keyword">let</span> <span class="hljs-attr">observer</span>: <span class="hljs-title class_">UniNamespace</span>.<span class="hljs-property">IntersectionObserver</span>
  
  <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> instance = <span class="hljs-title function_">getCurrentInstance</span>()
    
    <span class="hljs-comment">// åˆ›å»ºäº¤å‰è§‚å¯Ÿå™¨ï¼Œè®¾ç½® 51 ä¸ªè§‚å¯Ÿé˜ˆå€¼ï¼ˆ0%, 2%, 4%...100%ï¼‰</span>
    observer = uni.<span class="hljs-title function_">createIntersectionObserver</span>(
      instance?.<span class="hljs-property">proxy</span>, 
      { <span class="hljs-attr">thresholds</span>: <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: <span class="hljs-number">51</span> }, <span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> (i / <span class="hljs-number">50</span>)) }
    )
    
    <span class="hljs-comment">// ç›¸å¯¹äºè§†å£é¡¶éƒ¨è¿›è¡Œè§‚å¯Ÿ</span>
    observer
      .<span class="hljs-title function_">relativeToViewport</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">0</span> })
      .<span class="hljs-title function_">observe</span>(<span class="hljs-string">'._auto-transparent__observer-target'</span>, <span class="hljs-function">(<span class="hljs-params">{ intersectionRatio }</span>) =&gt;</span> {
        <span class="hljs-comment">// å¤„ç†ä¸´ç•Œå€¼ï¼šçœŸæœºç¯å¢ƒä¸‹å¯èƒ½ä¸ä¼šç²¾ç¡®ç­‰äº 0 æˆ– 1</span>
        <span class="hljs-comment">// &gt;= 0.95 è§†ä¸ºå®Œå…¨å¯è§ï¼ˆé€æ˜ï¼‰</span>
        <span class="hljs-comment">// &lt;= 0.05 è§†ä¸ºå®Œå…¨ä¸å¯è§ï¼ˆä¸é€æ˜ï¼‰</span>
        a.<span class="hljs-property">value</span> = intersectionRatio &gt;= <span class="hljs-number">0.95</span> 
          ? <span class="hljs-number">0</span> 
          : intersectionRatio &lt;= <span class="hljs-number">0.05</span> 
          ? <span class="hljs-number">1</span> 
          : <span class="hljs-number">1</span> - intersectionRatio
      })
  })
  
  <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> observer.<span class="hljs-title function_">disconnect</span>())

  <span class="hljs-keyword">return</span> { r, g, b, a }
}
</code></pre>
<p><strong>æ ¸å¿ƒé€»è¾‘ï¼š</strong></p>
<ol>
<li><strong>è§‚å¯Ÿé˜ˆå€¼</strong>ï¼šè®¾ç½® 51 ä¸ªé˜ˆå€¼ç‚¹ï¼Œç¡®ä¿è¿‡æ¸¡è¶³å¤Ÿå¹³æ»‘</li>
<li><strong>äº¤å‰æ¯”ä¾‹</strong>ï¼š<code>intersectionRatio</code> è¡¨ç¤ºç›®æ ‡å…ƒç´ æœ‰å¤šå°‘æ¯”ä¾‹ä¸è§†å£äº¤å‰
<ul>
<li>1 è¡¨ç¤ºå®Œå…¨åœ¨è§†å£å†… â†’ å¯¼èˆªæ é€æ˜</li>
<li>0 è¡¨ç¤ºå®Œå…¨ä¸åœ¨è§†å£å†… â†’ å¯¼èˆªæ ä¸é€æ˜</li>
</ul>
</li>
<li><strong>ä¸´ç•Œå€¼å¤„ç†</strong>ï¼šå¤„ç†ç²¾åº¦é—®é¢˜ï¼Œé¿å…æ— æ³•å®Œå…¨é€æ˜/ä¸é€æ˜</li>
</ol>
<hr/>
<h4 data-id="heading-10">3. é¢œè‰²è½¬æ¢å·¥å…· (<code>utils/index.ts</code>)</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/** è¿”å›åˆæ³•é¢œè‰²å€¼çš„ r, g, b å€¼ */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">convertToRGBA</span>(<span class="hljs-params">color: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-comment">// å¤„ç† HEX æ ¼å¼ï¼š#fff æˆ– #ffffff</span>
  <span class="hljs-keyword">if</span> (color.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'#'</span>)) {
    <span class="hljs-keyword">const</span> hex = color.<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>).<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^([0-9A-F]{3})$/i</span>, <span class="hljs-string">'$1$1'</span>)
    <span class="hljs-keyword">const</span> r = <span class="hljs-title class_">Number</span>.<span class="hljs-built_in">parseInt</span>(hex.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>), <span class="hljs-number">16</span>)
    <span class="hljs-keyword">const</span> g = <span class="hljs-title class_">Number</span>.<span class="hljs-built_in">parseInt</span>(hex.<span class="hljs-title function_">substring</span>(<span class="hljs-number">2</span>, <span class="hljs-number">4</span>), <span class="hljs-number">16</span>)
    <span class="hljs-keyword">const</span> b = <span class="hljs-title class_">Number</span>.<span class="hljs-built_in">parseInt</span>(hex.<span class="hljs-title function_">substring</span>(<span class="hljs-number">4</span>, <span class="hljs-number">6</span>), <span class="hljs-number">16</span>)
    <span class="hljs-keyword">return</span> { r, g, b }
  }
  <span class="hljs-comment">// å¤„ç† RGB æ ¼å¼ï¼šrgb(255, 255, 255)</span>
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (color.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'rgb'</span>)) {
    <span class="hljs-keyword">const</span> parts = color.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/(\d+),\s*(\d+),\s*(\d+)/</span>)
    <span class="hljs-keyword">if</span> (parts) {
      <span class="hljs-keyword">const</span> [_, r, g, b] = parts
      <span class="hljs-keyword">return</span> { r, g, b }
    }
  }
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Invalid color format'</span>)
}
</code></pre>
<p><strong>æ”¯æŒæ ¼å¼ï¼š</strong></p>
<ul>
<li>HEXï¼š<code>#fff</code>ã€<code>#ffffff</code></li>
<li>RGBï¼š<code>rgb(255, 255, 255)</code></li>
</ul>
<hr/>
<h4 data-id="heading-11">4. å…¨å±€çŠ¶æ€ç®¡ç† (<code>store/global.ts</code>)</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useGlobalStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'global'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> systemInfo = uni.<span class="hljs-title function_">getSystemInfoSync</span>()

  <span class="hljs-comment">// é«˜åº¦ç›¸å…³å¸¸é‡ï¼ˆå•ä½ï¼špxï¼‰</span>
  <span class="hljs-keyword">const</span> navbarHeight = <span class="hljs-number">44</span>  <span class="hljs-comment">// å¯¼èˆªæ é«˜åº¦</span>
  <span class="hljs-keyword">const</span> statusBarHeight = systemInfo.<span class="hljs-property">statusBarHeight</span> || <span class="hljs-number">0</span>  <span class="hljs-comment">// çŠ¶æ€æ é«˜åº¦</span>
  <span class="hljs-keyword">const</span> headerHeight = statusBarHeight + navbarHeight  <span class="hljs-comment">// æ€»å¤´éƒ¨é«˜åº¦</span>

  <span class="hljs-keyword">const</span> tabbarHeight = <span class="hljs-number">50</span>
  <span class="hljs-keyword">const</span> whiteBarHeight = systemInfo.<span class="hljs-property">safeAreaInsets</span>?.<span class="hljs-property">bottom</span> || <span class="hljs-number">0</span>
  <span class="hljs-keyword">const</span> footerHeight = tabbarHeight + whiteBarHeight

  <span class="hljs-keyword">return</span> {
    systemInfo,
    statusBarHeight,
    navbarHeight,
    headerHeight,
    tabbarHeight,
    whiteBarHeight,
    footerHeight,
  }
})
</code></pre>
<p><strong>å…¨å±€å¸¸é‡ï¼š</strong></p>
<ul>
<li>ç»Ÿä¸€ç®¡ç†å„ç§é«˜åº¦å€¼</li>
<li>è‡ªåŠ¨é€‚é…ä¸åŒè®¾å¤‡çš„çŠ¶æ€æ é«˜åº¦</li>
</ul>
<hr/>
<h3 data-id="heading-12">ğŸ“ ä½¿ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;view&gt;
    &lt;!-- åŸºç¡€ç”¨æ³•ï¼šå›ºå®šèƒŒæ™¯è‰² --&gt;
    &lt;kl-navbar 
      title="é¡µé¢æ ‡é¢˜" 
      :left-arrow="true" 
      background-color="#ffffff"
    /&gt;

    &lt;!-- å ä½æ¨¡å¼ï¼šæ¨å¼€é¡µé¢å†…å®¹ --&gt;
    &lt;kl-navbar 
      title="é¡µé¢æ ‡é¢˜" 
      :placeholder="true"
      background-color="#ffffff"
    /&gt;

    &lt;!-- è‡ªåŠ¨é€æ˜æ¨¡å¼ï¼šæ»šåŠ¨æ¸å˜ --&gt;
    &lt;kl-navbar 
      title="é¡µé¢æ ‡é¢˜" 
      :left-arrow="true"
      :auto-transparent="true"
      background-color="#ffffff"
    /&gt;
    
    &lt;!-- é¡µé¢å†…å®¹ --&gt;
    &lt;view class="content"&gt;
      &lt;!-- è¿™é‡Œé€šå¸¸ä¼šæ”¾ä¸€å¼ å¤§å›¾æˆ–å…¶ä»–å†…å®¹ --&gt;
    &lt;/view&gt;
  &lt;/view&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-13">Props è¯´æ˜</h4>









































<table><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>title</td><td>string</td><td>''</td><td>å¯¼èˆªæ æ ‡é¢˜</td></tr><tr><td>placeholder</td><td>boolean</td><td>false</td><td>æ˜¯å¦å ä½æ¨¡å¼ï¼ˆæ¨å¼€å†…å®¹ï¼‰</td></tr><tr><td>leftArrow</td><td>boolean</td><td>false</td><td>æ˜¯å¦æ˜¾ç¤ºè¿”å›ç®­å¤´</td></tr><tr><td>backgroundColor</td><td>string</td><td>'#fff'</td><td>èƒŒæ™¯é¢œè‰²</td></tr><tr><td>autoTransparent</td><td>boolean</td><td>false</td><td>æ˜¯å¦å¯ç”¨è‡ªåŠ¨é€æ˜æ¸å˜</td></tr></tbody></table>
<p><strong>âš ï¸ æ³¨æ„ï¼š</strong> <code>autoTransparent</code> å’Œ <code>placeholder</code> ä¸èƒ½åŒæ—¶ä½¿ç”¨ï¼Œå½“ <code>placeholder=true</code> æ—¶ï¼Œ<code>autoTransparent</code> ä¼šè¢«å¿½ç•¥ã€‚</p>
<hr/>
<h3 data-id="heading-14">ğŸ¯ æŠ€æœ¯äº®ç‚¹</h3>
<h4 data-id="heading-15">1. æ€§èƒ½ä¼˜åŒ–</h4>
<p>ä½¿ç”¨ <code>IntersectionObserver</code> è€Œé <code>scroll</code> äº‹ä»¶ç›‘å¬ï¼Œä¼˜åŠ¿ï¼š</p>
<ul>
<li>æµè§ˆå™¨åŸç”Ÿ APIï¼Œæ€§èƒ½æ›´å¥½</li>
<li>è‡ªåŠ¨èŠ‚æµï¼Œé¿å…é¢‘ç¹è®¡ç®—</li>
<li>æ›´ç²¾ç¡®çš„å…ƒç´ å¯è§æ€§åˆ¤æ–­</li>
</ul>
<h4 data-id="heading-16">2. è¾¹ç•Œå¤„ç†</h4>
<pre><code class="hljs language-typescript" lang="typescript">a.<span class="hljs-property">value</span> = intersectionRatio &gt;= <span class="hljs-number">0.95</span> 
  ? <span class="hljs-number">0</span> 
  : intersectionRatio &lt;= <span class="hljs-number">0.05</span> 
  ? <span class="hljs-number">1</span> 
  : <span class="hljs-number">1</span> - intersectionRatio
</code></pre>
<p>åœ¨çœŸæœºæµ‹è¯•ä¸­å‘ç°ï¼Œ<code>intersectionRatio</code> åœ¨æ¥è¿‘ 0 æˆ– 1 æ—¶å¯èƒ½å‡ºç°å¾®å°è¯¯å·®ï¼ˆå¦‚ 0.9999 æˆ– 0.0001ï¼‰ï¼Œå¯¼è‡´å¯¼èˆªæ æ°¸è¿œæ— æ³•å®Œå…¨é€æ˜æˆ–ä¸é€æ˜ã€‚é€šè¿‡è®¾ç½® 5% çš„å®¹å·®èŒƒå›´ï¼Œç¡®ä¿è§†è§‰æ•ˆæœå®Œç¾ã€‚</p>
<h4 data-id="heading-17">3. çµæ´»çš„é¢œè‰²æ”¯æŒ</h4>
<p>é€šè¿‡ <code>convertToRGBA</code> å·¥å…·å‡½æ•°ï¼Œæ”¯æŒå¤šç§é¢œè‰²æ ¼å¼è¾“å…¥ï¼Œæœ€ç»ˆè½¬æ¢ä¸º RGBA æ ¼å¼ï¼Œåªæ”¹å˜é€æ˜åº¦é€šé“ï¼Œä¿æŒé¢œè‰²ä¸å˜ã€‚</p>
<h4 data-id="heading-18">4. å“åº”å¼è®¾è®¡</h4>
<p>åˆ©ç”¨ Vue 3 çš„å“åº”å¼ç³»ç»Ÿï¼Œé€æ˜åº¦ <code>a</code> çš„å˜åŒ–ä¼šè‡ªåŠ¨è§¦å‘æ ·å¼æ›´æ–°ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ DOMã€‚</p>
<hr/>
<h3 data-id="heading-19">ğŸ¤” å¸¸è§é—®é¢˜</h3>
<h4 data-id="heading-20">Q1: ä¸ºä»€ä¹ˆè¦è®¾ç½® 51 ä¸ªè§‚å¯Ÿé˜ˆå€¼ï¼Ÿ</h4>
<p><strong>A:</strong> é˜ˆå€¼è¶Šå¤šï¼Œè¿‡æ¸¡è¶Šå¹³æ»‘ã€‚51 ä¸ªé˜ˆå€¼æ„å‘³ç€æ¯ 2% çš„å˜åŒ–å°±ä¼šè§¦å‘ä¸€æ¬¡å›è°ƒï¼Œåœ¨æ€§èƒ½å’Œæµç•…åº¦ä¹‹é—´å–å¾—å¹³è¡¡ã€‚</p>
<h4 data-id="heading-21">Q2: å ä½æ¨¡å¼å’Œé€æ˜æ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4>
<p><strong>A:</strong></p>
<ul>
<li><strong>å ä½æ¨¡å¼</strong>ï¼šå¯¼èˆªæ ä¸‹æ–¹æœ‰ä¸€ä¸ªç­‰é«˜çš„ç©ºç™½å ä½ï¼Œé¡µé¢å†…å®¹è¢«æ¨åˆ°å¯¼èˆªæ ä¸‹æ–¹</li>
<li><strong>é€æ˜æ¨¡å¼</strong>ï¼šå¯¼èˆªæ ä½¿ç”¨ <code>fixed</code> å®šä½æ‚¬æµ®åœ¨é¡µé¢ä¸Šæ–¹ï¼Œé¡µé¢å†…å®¹ä»å±å¹•é¡¶éƒ¨å¼€å§‹</li>
</ul>
<h4 data-id="heading-22">Q3: èƒ½å¦è‡ªå®šä¹‰æ¸å˜é€Ÿåº¦ï¼Ÿ</h4>
<p><strong>A:</strong> å½“å‰å®ç°ä¸­æ¸å˜é€Ÿåº¦ä¸æ»šåŠ¨é€Ÿåº¦æˆæ­£æ¯”ã€‚å¦‚éœ€è‡ªå®šä¹‰ï¼Œå¯ä»¥åœ¨è®¡ç®—é€æ˜åº¦æ—¶æ·»åŠ ç¼“åŠ¨å‡½æ•°ã€‚</p>
<hr/>
<h3 data-id="heading-23">ğŸš€ æ‰©å±•æ€è·¯</h3>
<ol>
<li><strong>æ”¯æŒæ¸å˜è‰²èƒŒæ™¯</strong>ï¼šå½“å‰åªæ”¯æŒçº¯è‰²ï¼Œå¯ä»¥æ‰©å±•æ”¯æŒæ¸å˜èƒŒæ™¯</li>
<li><strong>æ ‡é¢˜é¢œè‰²è”åŠ¨</strong>ï¼šèƒŒæ™¯å˜åŒ–æ—¶ï¼Œæ ‡é¢˜é¢œè‰²ä¹Ÿè·Ÿéšå˜åŒ–ï¼ˆé»‘ â†” ç™½ï¼‰</li>
<li><strong>è‡ªå®šä¹‰é˜ˆå€¼</strong>ï¼šå°†é˜ˆå€¼æ•°é‡ä½œä¸º prop æš´éœ²ï¼Œè®©ç”¨æˆ·è‡ªå®šä¹‰å¹³æ»‘åº¦</li>
<li><strong>æ”¯æŒå…¶ä»–æ ·å¼</strong>ï¼šé™¤äº†é€æ˜åº¦ï¼Œè¿˜å¯ä»¥æ”¯æŒæ¨¡ç³Šæ•ˆæœï¼ˆbackdrop-filterï¼‰</li>
</ol>
<hr/>
<h3 data-id="heading-24">ğŸ“š æ€»ç»“</h3>
<p>è¿™ä¸ªå¯¼èˆªæ ç»„ä»¶çš„å®ç°è™½ç„¶ä»£ç é‡ä¸å¤§ï¼Œä½†æ¶‰åŠäº†å¤šä¸ªæŠ€æœ¯ç‚¹ï¼š</p>
<ul>
<li>âœ… IntersectionObserver API çš„ä½¿ç”¨</li>
<li>âœ… Vue 3 Composition API çš„å®è·µ</li>
<li>âœ… è·¨å¹³å°é€‚é…ï¼ˆçŠ¶æ€æ é«˜åº¦ï¼‰</li>
<li>âœ… æ€§èƒ½ä¼˜åŒ–ï¼ˆé¿å…é¢‘ç¹è®¡ç®—ï¼‰</li>
<li>âœ… è¾¹ç•Œæƒ…å†µå¤„ç†</li>
</ul>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ ç†è§£å¹¶å®ç°ç±»ä¼¼çš„æ•ˆæœã€‚å¦‚æœä½ æœ‰æ›´å¥½çš„å®ç°æ€è·¯ï¼Œæ¬¢è¿äº¤æµè®¨è®ºï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Electron - IPC è§£å†³ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡]]></title>    <link>https://juejin.cn/post/7576676694784147490</link>    <guid>https://juejin.cn/post/7576676694784147490</guid>    <pubDate>2025-11-26T08:30:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576676694784147490" data-draft-id="7576484465758912547" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Electron - IPC è§£å†³ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-26T08:30:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€åƒæŸ¯æ©˜"/> <meta itemprop="url" content="https://juejin.cn/user/2010369939736343"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Electron - IPC è§£å†³ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2010369939736343/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€åƒæŸ¯æ©˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T08:30:54.000Z" title="Wed Nov 26 2025 08:30:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atelier-sulphurpool-dark">.hljs-comment,.hljs-quote{color:#898ea4}.hljs-attribute,.hljs-link,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#c94922}.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#c76b29}.hljs-bullet,.hljs-string,.hljs-symbol{color:#ac9739}.hljs-section,.hljs-title{color:#3d8fd1}.hljs-keyword,.hljs-selector-tag{color:#6679cc}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#202746;color:#979db4}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>Electron çš„ä¸»è¿›ç¨‹æ˜¯ä¸€ä¸ª Node.js ç¯å¢ƒï¼Œå› æ­¤ ä¸»è¿›ç¨‹å¯ä»¥ä½¿ç”¨ Node.js çš„å†…ç½®æ¨¡å—ä»¥åŠç›¸å…³ Node.js ç¯å¢ƒçš„ npm å®‰è£…åŒ…ï¼Œä¸»è¿›ç¨‹æ‹¥æœ‰å¯¹æ“ä½œç³»ç»Ÿçš„å®Œå…¨è®¿é—®æƒé™ã€‚
ä½†æ˜¯<strong>æ¸²æŸ“å™¨è¿›ç¨‹é»˜è®¤è¿è¡Œåœ¨ç½‘é¡µç«¯è€Œä¸æ˜¯è¿è¡Œ Node.js</strong>ï¼Œ
ä¸ºäº†å°† Electron çš„ä¸åŒè¿›ç¨‹ç±»å‹æ¡¥æ¥åœ¨ä¸€èµ·ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸€ä¸ªç§°ä¸º preload çš„ç‰¹æ®Šè„šæœ¬</p>
</blockquote>
<blockquote>
<p>æ³¨æ„çš„æ˜¯ï¼šä» Electron 20 å¼€å§‹ï¼Œpreload è„šæœ¬é»˜è®¤è¢«æ²™ç®±åŒ–ï¼Œå¹¶ä¸”ä¸å†èƒ½å¤Ÿè®¿é—®å®Œæ•´çš„ Node.js ç¯å¢ƒã€‚è¿™æ„å‘³ç€æ‚¨åªèƒ½è®¿é—®ä¸€ç»„æœ‰é™çš„ API, ä»£ç å‚è€ƒï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fkejuqu%2Felectron-app" target="_blank" title="https://github.com/kejuqu/electron-app" ref="nofollow noopener noreferrer">github.com/kejuqu/elecâ€¦</a></p>
</blockquote>
<p>BrowserWindow'sÂ preload è„šæœ¬è¿è¡Œåœ¨æ—¢æœ‰èƒ½è®¿é—® HTML DOM åˆæœ‰éƒ¨åˆ† Node.js å’Œ Electron å­é›†åŠŸèƒ½ï¼Œ è¯¦ç»†çš„åŒºåˆ«ï¼š</p>





















<table><thead><tr><th>å¯ç”¨çš„ API</th><th>è¯¦ç»†</th></tr></thead><tbody><tr><td>Electron modules</td><td>æ¸²æŸ“å™¨è¿›ç¨‹æ¨¡å—</td></tr><tr><td>Node.js modules</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fapi%2Fevents.html" target="_blank" title="https://nodejs.org/api/events.html" ref="nofollow noopener noreferrer"><code>events</code></a>,Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fapi%2Ftimers.html" target="_blank" title="https://nodejs.org/api/timers.html" ref="nofollow noopener noreferrer"><code>timers</code></a>,Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fapi%2Furl.html" target="_blank" title="https://nodejs.org/api/url.html" ref="nofollow noopener noreferrer"><code>url</code></a></td></tr><tr><td>Polyfilled globals</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fapi%2Fbuffer.html" target="_blank" title="https://nodejs.org/api/buffer.html" ref="nofollow noopener noreferrer"><code>Buffer</code></a>,Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.electronjs.org%2Fdocs%2Flatest%2Fapi%2Fprocess" target="_blank" title="https://www.electronjs.org/docs/latest/api/process" ref="nofollow noopener noreferrer"><code>process</code></a>,Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fapi%2Ftimers.html%23timers_clearimmediate_immediate" target="_blank" title="https://nodejs.org/api/timers.html#timers_clearimmediate_immediate" ref="nofollow noopener noreferrer"><code>clearImmediate</code></a>,Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fapi%2Ftimers.html%23timers_setimmediate_callback_args" target="_blank" title="https://nodejs.org/api/timers.html#timers_setimmediate_callback_args" ref="nofollow noopener noreferrer"><code>setImmediate</code></a></td></tr></tbody></table>
<p>Preload è„šæœ¬åœ¨æ¸²æŸ“å™¨é¡µé¢åŠ è½½å‰è¢«æ³¨å…¥ï¼Œå¦‚æœè¦ä¸ºæ¸²æŸ“å™¨æ·»åŠ éœ€è¦ç‰¹æƒè®¿é—®çš„åŠŸèƒ½å¯ä»¥é€šè¿‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.electronjs.org%2Fdocs%2Flatest%2Fapi%2Fcontext-bridge" target="_blank" title="https://www.electronjs.org/docs/latest/api/context-bridge" ref="nofollow noopener noreferrer">contextBridge</a>Â API æ¥å®šä¹‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FGlossary%2FGlobal_object" target="_blank" title="https://developer.mozilla.org/en-US/docs/Glossary/Global_object" ref="nofollow noopener noreferrer">å…¨å±€å¯¹è±¡</a>Â </p>
<h2 data-id="heading-0">æš´éœ² node.js æ¨¡å—çš„ä¿¡æ¯åˆ°é¡µé¢ï¼ˆrenderer è¿›ç¨‹ï¼‰</h2>
<p>contextBridge.exposeInMainWorld åœ¨ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ä¹‹é—´å»ºç«‹ä¸€ä¸ªå®‰å…¨çš„ â€œé€šé“â€ï¼Œå°†ä¸»è¿›ç¨‹æŒ‡å®šçš„ API/å˜é‡/å‡½æ•°æš´éœ²åˆ°æ¸²æŸ“è¿›ç¨‹çš„ å…¨å±€å¯¹è±¡ï¼ˆwindow) å¯¹è±¡ä¸Šï¼Œä¾›å‰ç«¯ç›´æ¥è°ƒç”¨ã€‚
å°† process.versions çš„ node, chrome, electron æš´éœ²åˆ° renderer è¿›ç¨‹</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ–°å»º src/preloads/versions.js</span>
<span class="hljs-keyword">import</span> { contextBridge } <span class="hljs-keyword">from</span> <span class="hljs-string">"electron"</span>;

<span class="hljs-comment">// contextBridge.exposeInMainWorld(key,value)</span>

<span class="hljs-comment">// é€šè¿‡ contextBridge.exposeInMainWorld å‘ window å¯¹è±¡æš´éœ²ä¸€ä¸ªåä¸º versions çš„å¯¹è±¡</span>
contextBridge.<span class="hljs-title function_">exposeInMainWorld</span>(<span class="hljs-string">"versions"</span>, {
  <span class="hljs-attr">node</span>: <span class="hljs-function">() =&gt;</span> process.<span class="hljs-property">versions</span>.<span class="hljs-property">node</span>,
  <span class="hljs-attr">chrome</span>: <span class="hljs-function">() =&gt;</span> process.<span class="hljs-property">versions</span>.<span class="hljs-property">chrome</span>,
  <span class="hljs-attr">electron</span>: <span class="hljs-function">() =&gt;</span> process.<span class="hljs-property">versions</span>.<span class="hljs-property">electron</span>,
  <span class="hljs-comment">// we can also expose variables, not just functions,</span>
  <span class="hljs-attr">value</span>: <span class="hljs-string">"any"</span>,
  <span class="hljs-attr">ping</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-string">"pong"</span>,
});
</code></pre>
<p>ä¸ºäº†å°† preload è„šæœ¬å’Œ renderer è¿›ç¨‹ï¼Œéœ€è¦åœ¨è¦æš´éœ²çš„ page åˆ›å»ºæ—¶ï¼ŒåŠåœ¨åˆ›å»º BrowserWindowçš„æ„é€ å‡½æ•°æŒ‡å®š <code>webPreferences.preload</code> çš„è·¯å¾„</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// main.js</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">createWindow</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> win = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BrowserWindow</span>({
    <span class="hljs-attr">width</span>: <span class="hljs-number">800</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">600</span>,
    <span class="hljs-comment">// æ·»åŠ åœ¨è¿™é‡Œ</span>
    <span class="hljs-attr">webPreferences</span>: {
      <span class="hljs-attr">preload</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">"src"</span>, <span class="hljs-string">"preloads"</span>, <span class="hljs-string">"versions.js"</span>),
    },
  });

  win.<span class="hljs-title function_">loadFile</span>(<span class="hljs-string">"index.html"</span>);
};

<span class="hljs-comment">// ç„¶ååœ¨ index.html ä¸­æ–°å¢</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello from Electron renderer!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ğŸ‘‹<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- display windows.versions info --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"versions"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Import the renderer code here --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./src/renderers/versions.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span>


<span class="hljs-comment">// src/renderers/versions.js</span>
<span class="hljs-keyword">const</span> versionNode = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"versions-content"</span>);

<span class="hljs-comment">// åœ¨ renderer é‡Œå¯ä»¥ä½¿ç”¨ dom å’Œå…¶ä»– web ç›¸å…³æŠ€æœ¯</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"window.versions: "</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">versions</span>);

versionNode.<span class="hljs-property">innerText</span> = <span class="hljs-string">`Node.js version: <span class="hljs-subst">${<span class="hljs-variable language_">window</span>.versions.node()}</span>, Electron version: <span class="hljs-subst">${<span class="hljs-variable language_">window</span>.versions.electron()}</span>, Chrome version: <span class="hljs-subst">${<span class="hljs-variable language_">window</span>.versions.chrome()}</span>, ping: <span class="hljs-subst">${
  <span class="hljs-variable language_">window</span>.versions.ping
}</span>`</span>;
</code></pre>
<h2 data-id="heading-1">è¿›ç¨‹é—´çš„é€šä¿¡</h2>
<p>ä¸ºäº†è§£å†³ä¸»è¿›ç¨‹ä¸èƒ½è®¿é—® DOMï¼Œ web pageï¼ˆæ¸²æŸ“è¿›ç¨‹ï¼‰ä¸èƒ½è®¿é—® Node.js API çš„é—®é¢˜ï¼ŒElectron çš„ <code>ipcMain</code> å’Œ <code>ipcRenderer</code> æ¨¡å—å®ç°äº†, åˆ©ç”¨ <code>ipcRenderer.invoke(channel: string, ...args: any[]): Promise&lt;any&gt;</code> å¯ä»¥ä» web page å‘ ä¸»è¿›ç¨‹å‘é€æ¶ˆæ¯ï¼Œç„¶ååœ¨ä¸»è¿›ç¨‹é€šè¿‡ <code>ipcMain.handle(channel: string, listener: (event: IpcMainInvokeEvent, ...args: any[]) =&gt; (Promise&lt;any&gt;) | (any)): void;</code>ï¼ˆhandle æˆ–è€… ipcMain ä¸‹è¾¹çš„å¯¹åº”æ–¹æ³•ï¼‰æ¥å¤„ç† ipcRenderer å‘é€è¿‡æ¥çš„channel</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// src/preloads/versions.js</span>
<span class="hljs-keyword">const</span> { contextBridge, ipcRenderer } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'electron'</span>)

contextBridge.<span class="hljs-title function_">exposeInMainWorld</span>(<span class="hljs-string">'versions'</span>, {
  <span class="hljs-attr">node</span>: <span class="hljs-function">() =&gt;</span> process.<span class="hljs-property">versions</span>.<span class="hljs-property">node</span>,
  <span class="hljs-attr">chrome</span>: <span class="hljs-function">() =&gt;</span> process.<span class="hljs-property">versions</span>.<span class="hljs-property">chrome</span>,
  <span class="hljs-attr">electron</span>: <span class="hljs-function">() =&gt;</span> process.<span class="hljs-property">versions</span>.<span class="hljs-property">electron</span>,
  <span class="hljs-attr">ping</span>: <span class="hljs-function">() =&gt;</span> ipcRenderer.<span class="hljs-title function_">invoke</span>(<span class="hljs-string">'ping'</span>)
  <span class="hljs-comment">// we can also expose variables, not just functions</span>
})

<span class="hljs-comment">// main.js</span>
app.<span class="hljs-title function_">whenReady</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">createWindow</span>();

  app.<span class="hljs-title function_">on</span>(<span class="hljs-string">"activate"</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">BrowserWindow</span>.<span class="hljs-title function_">getAllWindows</span>().<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-title function_">createWindow</span>();
    }
  });
  
  <span class="hljs-comment">// ä¸»è¦æ·»åŠ è¿™ä¸ª å¤„ç†</span>
  ipcMain.<span class="hljs-title function_">handle</span>(<span class="hljs-string">"ping"</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"pong"</span>;
  });
});
</code></pre>
<h2 data-id="heading-2">æ³¨æ„</h2>
<p>ä¸è¦é€šè¿‡ contextBridge.exposeInMainWorld å°† ipcRenderer è¿™ä¸ªæ¨¡å—éƒ½ç»™æš´éœ²åˆ° global ä¸Šï¼Œå› ä¸ºè¿™æ ·å¯èƒ½ä¼šé€ æˆ web page å¯ä»¥å‘é€ä»»æ„çš„ IPC æ¶ˆæ¯ç»™ä¸»è¿›ç¨‹ï¼Œé€ æˆæ¶æ„æ”»å‡»çš„å±å®³</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¸¿è’™ webç»„ä»¶å¼€å‘]]></title>    <link>https://juejin.cn/post/7576843726010826778</link>    <guid>https://juejin.cn/post/7576843726010826778</guid>    <pubDate>2025-11-26T08:35:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576843726010826778" data-draft-id="7576843726010810394" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¸¿è’™ webç»„ä»¶å¼€å‘"/> <meta itemprop="keywords" content="å‰ç«¯,TypeScript"/> <meta itemprop="datePublished" content="2025-11-26T08:35:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="lichong951"/> <meta itemprop="url" content="https://juejin.cn/user/1486195453865687"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¸¿è’™ webç»„ä»¶å¼€å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1486195453865687/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    lichong951
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T08:35:09.000Z" title="Wed Nov 26 2025 08:35:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="http://openwrite.cn/uploads/19976/56727/0133ec75-9a06-4708-ae8f-ea3ba05b0613.gif" alt="20251126-163113.gif" loading="lazy"/>
<strong>HarmonyOS NEXTï¼ˆAPI 12+ï¼‰</strong> çš„ ArkTS å·¥ç¨‹ã€‚ç¤ºä¾‹å‡å·²åœ¨ DevEco Studio 4.1.3 çœŸæœºè¿è¡Œé€šè¿‡ã€‚</p>
<hr/>
<p>ä¸€ã€æœ€å°å¯è¿è¡Œéª¨æ¶ï¼ˆArkTSï¼‰</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// entry/src/main/ets/pages/WebPage.ets</span>
<span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;

<span class="hljs-meta">@Entry</span>
<span class="hljs-meta">@Component</span>
struct <span class="hljs-title class_">WebPage</span> {
  <span class="hljs-comment">// 1. æ§åˆ¶å™¨</span>
  ctrl = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Column</span>() {
      <span class="hljs-title class_">Web</span>({
        <span class="hljs-attr">src</span>: <span class="hljs-string">'https://developer.harmonyos.com'</span>,
        <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">ctrl</span>
      })
        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)
        .<span class="hljs-title function_">javaScriptAccess</span>(<span class="hljs-literal">true</span>)          <span class="hljs-comment">// å…è®¸ JS</span>
        .<span class="hljs-title function_">domStorageAccess</span>(<span class="hljs-literal">true</span>)          <span class="hljs-comment">// å…è®¸ localStorage</span>
        .<span class="hljs-title function_">mixedMode</span>(<span class="hljs-title class_">MixedMode</span>.<span class="hljs-property">All</span>)        <span class="hljs-comment">// å…è®¸ http/https æ··åˆ</span>
        .<span class="hljs-title function_">onPageEnd</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'=== é¡µé¢åŠ è½½å®Œæˆ'</span>);
        });
    }
  }
}
</code></pre>
<p>module.json5 é‡Œè®°å¾—åŠ ç½‘ç»œæƒé™ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"requestPermissions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
  <span class="hljs-punctuation">{</span> <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ohos.permission.INTERNET"</span> <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">]</span>
</code></pre>
<hr/>
<p>äºŒã€å¸¸è§èƒ½åŠ›â€œå¼€ç®±å³ç”¨â€</p>



































<table><thead><tr><th>èƒ½åŠ›ç‚¹</th><th>å…³é”®ä»£ç /æ³¨æ„äº‹é¡¹</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td><strong>åŠ è½½æœ¬åœ°åŒ…å†…é¡µé¢</strong></td><td><code>src: $rawfile('src/main/resources/rawfile/index.html')</code></td><td>æŠŠé™æ€èµ„æºæ”¾åˆ° <code>rawfile</code> ç›®å½•å³å¯</td></tr><tr><td><strong>æœ¬åœ° HTML å­—ç¬¦ä¸²</strong></td><td><code>this.ctrl.loadData('Hello', 'text/html', 'UTF-8')</code></td><td>é€‚åˆåšå¯Œæ–‡æœ¬é‚®ä»¶ã€åè®®å¼¹çª—</td></tr><tr><td><strong>è¿›åº¦æ¡/æ ‡é¢˜æ è”åŠ¨</strong></td><td><code>.onProgressChange(e =&gt; this.curProgress = e.newProgress)</code></td><td>0-100ï¼Œå¯ç»‘ Progress ç»„ä»¶</td></tr><tr><td><strong>è¿”å›é”®æ‹¦æˆª</strong></td><td><code>onBackPress():boolean{ if(this.ctrl.accessBackward()){this.ctrl.backward();return true} return false }</code></td><td>é¿å…ç›´æ¥é€€å‡ºé¡µé¢</td></tr><tr><td><strong>è°ƒè¯•ï¼‹è¿œç¨‹ inspect</strong></td><td><code>webview.WebviewController.setWebDebuggingAccess(true);</code> ç„¶å PC æ‰§è¡Œ <code>hdc fport tcp:9222 tcp:9222</code></td><td>Chrome æ‰“å¼€ <code>localhost:9222</code> å³çœ‹åˆ° WebView</td></tr></tbody></table>
<hr/>
<p>ä¸‰ã€åŸç”Ÿ â†” JS åŒå‘é€šä¿¡ï¼ˆç±»å‹å®‰å…¨ï¼‰</p>
<ol>
<li>ArkTS è°ƒ JS</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-variable language_">this</span>.<span class="hljs-property">ctrl</span>.<span class="hljs-title function_">runJavaScript</span>(<span class="hljs-string">'window.calc(3,4)'</span>, <span class="hljs-function">(<span class="hljs-params">err, result</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (!err) <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'JS è¿”å›ç»“æœï¼š'</span> + result); <span class="hljs-comment">// 7</span>
});
</code></pre>
<ol start="2">
<li>JS è°ƒ ArkTS</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// 1. å£°æ˜ä»£ç†å¯¹è±¡</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">NativeBridge</span> {
  <span class="hljs-comment">// æ³¨æ„ï¼šæ–¹æ³•åå¿…é¡»å…¬å¼€ä¸”ä¸ JS ä¾§ä¿æŒä¸€è‡´</span>
  <span class="hljs-title function_">showToast</span>(<span class="hljs-attr">msg</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {
    promptAction.<span class="hljs-title function_">showToast</span>({ <span class="hljs-attr">message</span>: msg, <span class="hljs-attr">duration</span>: <span class="hljs-number">2000</span> });
  }
}
<span class="hljs-comment">// 2. æ³¨å†Œåˆ° window.appBridge</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">ctrl</span>.<span class="hljs-title function_">registerJavaScriptProxy</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">NativeBridge</span>(), <span class="hljs-string">'appBridge'</span>, [<span class="hljs-string">'showToast'</span>]);
</code></pre>
<p>é¡µé¢é‡Œå³å¯ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  appBridge.<span class="hljs-title function_">showToast</span>(<span class="hljs-string">'Hello from H5!'</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>å®Œæ•´ç¤ºä¾‹è§ ã€‚</p>
<hr/>
<p>å››ã€æ–‡ä»¶ä¸‹è½½å®Œå…¨æ‰˜ç®¡ï¼ˆHarmonyOS 5.0+ï¼‰</p>
<ol>
<li>è‡ªå®šä¹‰ä¸‹è½½å§”æ‰˜</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyDownloadDelegate</span> <span class="hljs-keyword">implements</span> webview.<span class="hljs-property">DownloadDelegate</span> {
  <span class="hljs-title function_">onBeforeDownload</span>(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">userAgent</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">contentDisposition</span>: <span class="hljs-built_in">string</span>,
                  <span class="hljs-attr">mimetype</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">contentLength</span>: <span class="hljs-built_in">number</span>): webview.<span class="hljs-property">DownloadConfig</span> {
    <span class="hljs-comment">// è¿”å›è‡ªå®šä¹‰è·¯å¾„ / æ–‡ä»¶å</span>
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">downloadPath</span>: <span class="hljs-title function_">getContext</span>().<span class="hljs-property">cacheDir</span> + <span class="hljs-string">'/web_download/'</span> + <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() + <span class="hljs-string">'.bin'</span>,
      <span class="hljs-attr">visibleInDownloadUi</span>: <span class="hljs-literal">false</span>
    };
  }
  <span class="hljs-title function_">onDownloadUpdated</span>(<span class="hljs-params">guid: <span class="hljs-built_in">string</span>, percent: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-comment">// å‘è¿›åº¦äº‹ä»¶åˆ° UI</span>
    emitter.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'downloadProgress'</span>, { <span class="hljs-attr">data</span>: [percent] });
  }
  <span class="hljs-title function_">onDownloadFinish</span>(<span class="hljs-params">guid: <span class="hljs-built_in">string</span>, result: webview.DownloadResult</span>) {
    promptAction.<span class="hljs-title function_">showToast</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">'ä¸‹è½½å®Œæˆ'</span> });
  }
}
</code></pre>
<ol start="2">
<li>ç»‘å®šåˆ° WebView</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">ctrl</span>.<span class="hljs-title function_">setDownloadDelegate</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyDownloadDelegate</span>());
}
</code></pre>
<p>å¦‚æ­¤å³å¯æ‹¦æˆªæ‰€æœ‰ <code>&lt;a download&gt;</code>ã€Blobã€DataURL ç­‰èµ„æºï¼Œèµ°ç³»ç»Ÿçº§ä¸‹è½½ï¼Œæ— éœ€è‡ªå·±å†™çº¿ç¨‹ ã€‚</p>
<hr/>
<p>äº”ã€æœ¬åœ° H5 â€œES-Moduleâ€ è·¨åŸŸè¸©å‘ &amp; æ ¹æ²»</p>
<p><strong>ç°è±¡</strong>
<code>index.html</code> é‡Œå†™</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span>&gt;</span><span class="javascript"><span class="hljs-keyword">import</span> {a} <span class="hljs-keyword">from</span> <span class="hljs-string">'./util.js'</span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>çœŸæœºæŠ¥ <strong>CORS blocked</strong>ï¼Œ<code>file://</code> åè®®è¢«åŒæºç­–ç•¥æ‹¦æˆª ã€‚</p>
<p><strong>å®˜æ–¹æ–¹æ¡ˆï¼ˆAPI 12+ï¼‰</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {
  <span class="hljs-comment">// 1. å…è®¸ file åè®®åŠ è½½ä»»æ„èµ„æº</span>
  webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">customizeSchemes</span>([{
    <span class="hljs-attr">schemeName</span>: <span class="hljs-string">'file'</span>,
    <span class="hljs-attr">isSupportCORS</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">isSupportFetch</span>: <span class="hljs-literal">true</span>
  }]);
  <span class="hljs-comment">// 2. å…è®¸ file è®¿é—® file</span>
  <span class="hljs-keyword">let</span> cfg = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebViewConfig</span>();
  cfg.<span class="hljs-title function_">setAllowFileAccessFromFileURLs</span>(<span class="hljs-literal">true</span>);
  cfg.<span class="hljs-title function_">setAllowUniversalAccessFromFileURLs</span>(<span class="hljs-literal">true</span>);
  <span class="hljs-comment">// 3. åˆ›å»º WebviewController æ—¶æŠŠ config å¸¦è¿›å»</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">ctrl</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>(cfg);
}
</code></pre>
<p>å†é…åˆ <code>onInterceptRequest</code> åšâ€œæœ¬åœ°èµ„æºå…œåº•â€ï¼Œå¯ 100% è§£å†³æœ¬åœ° ES-Moduleã€Fetchã€XHR è·¨åŸŸé—®é¢˜ ã€‚</p>
<hr/>
<p>å…­ã€æ€§èƒ½/ä½“éªŒå°è´´å£«</p>
<ol>
<li><strong>å‰è¿›/åé€€ç¼“å­˜</strong>ï¼ˆæ‰“å¼€å³åˆ‡é¡µé¢ä¸é—ªç™½ï¼‰</li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> cacheOpt = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">BackForwardCacheOptions</span>();
cacheOpt.<span class="hljs-property">size</span> = <span class="hljs-number">5</span>;               <span class="hljs-comment">// ç¼“å­˜ 5 ä¸ªå†å²</span>
cacheOpt.<span class="hljs-property">timeToLive</span> = <span class="hljs-number">5</span> * <span class="hljs-number">60</span>;    <span class="hljs-comment">// 5 åˆ†é’Ÿ</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">ctrl</span>.<span class="hljs-title function_">setBackForwardCache</span>(cacheOpt);
</code></pre>
<ol start="2">
<li><strong>å†…æ ¸çº§å¯åŠ¨åŠ é€Ÿ</strong></li>
</ol>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-variable language_">this</span>.<span class="hljs-property">ctrl</span>.<span class="hljs-title function_">setNativeOption</span>({
  <span class="hljs-attr">kernelParams</span>: [<span class="hljs-string">'--disable-gpu-vsync'</span>, <span class="hljs-string">'--enable-fast-unload'</span>]
});
</code></pre>
<ol start="3">
<li>é¢„è§ˆå™¨ <strong>ä¸æ”¯æŒ WebView</strong>ï¼Œä¸€åˆ‡æ•ˆæœä»¥ <strong>çœŸæœº</strong> ä¸ºå‡† ã€‚</li>
</ol>
<hr/>
<p>ä¸ƒã€å¿«é€Ÿå¤ç° &amp; å­¦ä¹ è·¯å¾„</p>
<ol>
<li>å°†ä¸Šé¢â€œæœ€å°éª¨æ¶â€å¤åˆ¶åˆ° Empty Ability å·¥ç¨‹ â†’ çœŸæœºè¿è¡Œ â†’ èƒ½å‡ºç½‘é¡µå³ç¯å¢ƒ OKã€‚</li>
<li>å†æŠŠâ€œåŒå‘é€šä¿¡â€â€œä¸‹è½½æ‰˜ç®¡â€â€œæœ¬åœ° ES-Moduleâ€ä¸‰æ®µä»£ç åˆ†åˆ«è´´è¿›å»éªŒè¯ã€‚</li>
<li>å®˜æ–¹ç¤ºä¾‹ä»“åº“ï¼ˆGiteeï¼‰
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fopenharmony%2Farkweb_tutorial" target="_blank" title="https://gitee.com/openharmony/arkweb_tutorial" ref="nofollow noopener noreferrer">gitee.com/openharmonyâ€¦</a> å·²åŒæ­¥ä¸Šè¿°æ‰€æœ‰ç”¨æ³•ï¼Œå¯ç›´æ¥ <code>git clone</code> è·‘é€šã€‚</li>
</ol>
<p>è‡³æ­¤ï¼Œé¸¿è’™ WebViewï¼ˆArkWebï¼‰å¼€å‘æ‰€éœ€ <strong>åŠ è½½ã€é€šä¿¡ã€ä¸‹è½½ã€è·¨åŸŸã€æ€§èƒ½</strong> ä¸»çº¿èƒ½åŠ›å·²å…¨éƒ¨è¦†ç›–ï¼Œå¯ç›´æ¥æ¬å…¥ç”Ÿäº§é¡¹ç›®ã€‚ç¥å¼€å‘é¡ºåˆ©!</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[6æ¬¾MCPå·¥å…·ï¼Œè®©AIçœŸæ­£æ‡‚ä¸šåŠ¡]]></title>    <link>https://juejin.cn/post/7576821684251983915</link>    <guid>https://juejin.cn/post/7576821684251983915</guid>    <pubDate>2025-11-26T09:24:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576821684251983915" data-draft-id="7576859345934336054" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="6æ¬¾MCPå·¥å…·ï¼Œè®©AIçœŸæ­£æ‡‚ä¸šåŠ¡"/> <meta itemprop="keywords" content="MCP,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-11-26T09:24:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯¥ç”¨æˆ·å·²ä¸å­˜åœ¨"/> <meta itemprop="url" content="https://juejin.cn/user/64217584778579"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            6æ¬¾MCPå·¥å…·ï¼Œè®©AIçœŸæ­£æ‡‚ä¸šåŠ¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/64217584778579/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯¥ç”¨æˆ·å·²ä¸å­˜åœ¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T09:24:38.000Z" title="Wed Nov 26 2025 09:24:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>AIè¶Šæ¥è¶Šå¼ºå¤§ï¼Œæ‰€ä»¥åº”è¯¥ä¹Ÿæœ‰ä¸€äº›å¼€å‘è€…ï¼Œä¸ºäº†çœäº‹ï¼ŒæŠŠä»£ç ç”©ç»™AIï¼Œç»“æœå¾—èŠ±æ›´å¤šæ—¶é—´å»ä¿®è¡¥å®ƒå†™å‡ºçš„Bugã€‚</p>
<p>ä½†å…¶å®é—®é¢˜ä¸åœ¨äºAIä¸å¤Ÿèªæ˜ï¼Œè€Œåœ¨äºå®ƒçœ¼çå‘€ã€‚å®ƒçœ‹ä¸è§æœ¬åœ°æ•°æ®åº“ç»“æ„ï¼Œè¯»ä¸åˆ°æœ€æ–°çš„APIå˜åŠ¨ï¼Œä¹Ÿä¸çŸ¥é“å·¥å•é‡Œå…·ä½“å†™äº†ä»€ä¹ˆéœ€æ±‚ã€‚å®ƒåªèƒ½æ ¹æ®è®­ç»ƒæ•°æ®å»çŒœï¼Œè€ŒçŒœï¼Œå°±æ˜¯Bugçš„æºå¤´ã€‚</p>
<p>MCPï¼ˆModel Context Protocolï¼‰çš„å‡ºç°ï¼Œå°±æ˜¯ä¸ºäº†ç»™AIè£…ä¸Šçœ¼ç›å’Œæ‰‹ã€‚å®ƒæ˜¯ä¸€ä¸ªæ ‡å‡†æ¥å£ï¼Œè®©AIèƒ½å¤Ÿå®‰å…¨åœ°è¿æ¥åˆ°æœ¬åœ°å·¥å…·ã€æ•°æ®åº“å’ŒAPIã€‚æœ‰äº†å®ƒï¼ŒAIä¸å†æ˜¯åªä¼šçº¸ä¸Šè°ˆå…µçš„èŠå¤©æœºå™¨äººï¼Œè€Œæ˜¯èƒ½ç›´æ¥è¯»å–æ–‡æ¡£ã€æŸ¥è¯¢æ•°æ®ã€ç”šè‡³æ‰§è¡Œéƒ¨ç½²çš„å·¥ç¨‹å¸ˆã€‚</p>
<p>ä¸ºäº†é¿å…AIåœ¨é¡¹ç›®é‡Œèƒ¡ä½œéä¸ºï¼Œè¿™é‡Œæ¨è6æ¬¾èƒ½æ˜¾è‘—æå‡ä»£ç å¯ç”¨æ€§çš„MCPå·¥å…·ã€‚</p>
<h3 data-id="heading-0"><a href="https://link.juejin.cn?target=https%3A%2F%2Fsvelte.dev%2Fdocs%2Fmcp%2Foverview" target="_blank" title="https://svelte.dev/docs/mcp/overview" ref="nofollow noopener noreferrer">Svelte MCP</a></h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83f1e4b4de4247648aa22a21b984e6ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753878&amp;x-signature=CGmy3cFqpk5RnFFDeNfOmArHlbQ%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœè®©AIå†™Svelteä»£ç ï¼Œå®ƒç»å¸¸ä¼šææ··Svelte 4å’Œ5çš„è¯­æ³•ï¼Œç”šè‡³è«åå…¶å¦™åœ°æ··å…¥Reactçš„å†™æ³•ã€‚</p>
<p>Svelte MCPçš„ä½œç”¨å°±æ˜¯å¼ºåˆ¶çº åã€‚å®ƒè®©æ¨¡å‹ç›´æ¥è¯»å–å®˜æ–¹æ–‡æ¡£å’Œæœ€ä½³å®è·µï¼Œè¿›è¡Œé™æ€åˆ†æã€‚åœ¨ä»£ç ç”Ÿæˆé˜¶æ®µï¼Œå®ƒèƒ½è‡ªåŠ¨ä¿®æ­£è¯­æ³•é”™è¯¯ï¼Œç¡®ä¿AIå†™å‡ºçš„æ˜¯ç¬¦åˆSvelteè§„èŒƒçš„ç»„ä»¶ï¼Œè€Œä¸æ˜¯æ— æ³•è¿è¡Œçš„ç¼åˆæ€ªã€‚å¯¹äºæ·±å—AIå¹»è§‰å›°æ‰°çš„å‰ç«¯å¼€å‘è€…ï¼Œè¿™æ˜¯åˆšéœ€ã€‚</p>
<h3 data-id="heading-1"><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.stripe.com%2Fmcp" target="_blank" title="https://docs.stripe.com/mcp" ref="nofollow noopener noreferrer">Stripe MCP</a></h3>
<p>æ¶‰åŠåˆ°é’±çš„ä»£ç ï¼Œå®¹é”™ç‡æ˜¯é›¶ã€‚</p>
<p>Stripeçš„APIæ–‡æ¡£æµ©å¦‚çƒŸæµ·ï¼Œä¸”ç‰ˆæœ¬ä¼—å¤šã€‚Stripe MCPå…è®¸AIæ ¹æ®ä½¿ç”¨çš„APIç‰ˆæœ¬æ‹‰å–å‡†ç¡®çš„æ–‡æ¡£ï¼Œå¹¶èƒ½åœ¨æ²™ç›’ç¯å¢ƒï¼ˆTest Modeï¼‰ä¸­æŸ¥è¯¢äº¤æ˜“æ•°æ®æˆ–æ¨¡æ‹Ÿæ”¯ä»˜æµç¨‹ï¼Œä¹Ÿå°±æ˜¯AIèƒ½è°ƒè¯•å¤æ‚çš„è®¢é˜…é€»è¾‘ï¼Œè€Œä¸ç”¨æ‹…å¿ƒå®ƒæ‹¿ç€è¿‡æœŸçš„å‚æ•°å»è°ƒç”¨æ¥å£ï¼Œæˆ–è€…å› ä¸ºå¹»è§‰å¯¼è‡´ç”Ÿäº§äº‹æ•…ã€‚</p>
<h3 data-id="heading-2"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcrystaldba%2Fpostgres-mcp" target="_blank" title="https://github.com/crystaldba/postgres-mcp" ref="nofollow noopener noreferrer">PostgreSQL MCP</a></h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a7284b73bb84243b54177f74145bdfa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753878&amp;x-signature=6dDhkqy2Q%2BOL3T4fD8s0P%2B6M2Ik%3D" alt="" loading="lazy"/></p>
<p>å‰ç«¯æœ‰è®¾è®¡å›¾ï¼Œåç«¯æœ‰æ•°æ®åº“ã€‚AIæœ€å®¹æ˜“çç¼–çš„å°±æ˜¯SQLè¯­å¥å’Œè¡¨å­—æ®µåã€‚</p>
<p>é€šè¿‡PostgreSQL MCPï¼ŒAIä»¥åªè¯»æƒé™è¿æ¥åˆ°æœ¬åœ°æˆ–æµ‹è¯•æ•°æ®åº“ã€‚å¦‚æœè¦å†™ä¸€ä¸ªå¤æ‚çš„æŸ¥è¯¢ï¼ŒAIèƒ½å…ˆè¯»å–çœŸå®çš„ï¼ˆè¡¨ç»“æ„ï¼‰ï¼Œç†è§£è¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»ï¼Œç„¶åç”Ÿæˆå‡†ç¡®çš„SQLè¯­å¥ã€‚è¿™æ¯”æŠŠ <code>CREATE TABLE</code> è¯­å¥å¤åˆ¶ç²˜è´´ç»™AIè¦é«˜æ•ˆä¸”å®‰å…¨å¾—å¤šã€‚å®ƒè§£å†³äº†AIçš„ä½çº§é”™è¯¯ï¼Œæ¯”å¦‚AIä»¥ä¸ºå­—æ®µå« <code>user_id</code>ï¼Œå®é™…å« <code>uid</code></p>
<h3 data-id="heading-3"><a href="https://link.juejin.cn?target=https%3A%2F%2Fvercel.com%2Fdocs%2Fmcp%2Fvercel-mcp" target="_blank" title="https://vercel.com/docs/mcp/vercel-mcp" ref="nofollow noopener noreferrer">Vercel MCP</a></h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/90488818082b4f7f991b18f1bda80b32~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753878&amp;x-signature=OSr5cQ6ogmRv%2FFpb%2B8eNSMa04mM%3D" alt="" loading="lazy"/></p>
<p>åŸºç¡€è®¾æ–½å³ä»£ç ï¼ˆIaCï¼‰å¾ˆæ£’ï¼Œä½†é…ç½®èµ·æ¥å¾ˆç¹çã€‚</p>
<p>Vercel MCPå…è®¸AIåœ¨å¼€å‘è€…æˆæƒä¸‹ï¼Œç›´æ¥ç®¡ç†éƒ¨ç½²æµç¨‹ã€‚æ— è®ºæ˜¯æŸ¥çœ‹éƒ¨ç½²æ—¥å¿—ã€ç®¡ç†ç¯å¢ƒå˜é‡ï¼Œè¿˜æ˜¯å›æ»šåˆ°ä¸Šä¸€ä¸ªç¨³å®šç‰ˆæœ¬ï¼Œéƒ½å¯ä»¥é€šè¿‡å¯¹è¯å®Œæˆã€‚å®ƒä¸ºDevOpsæ“ä½œæä¾›äº†ä¸€å±‚è‡ªç„¶è¯­è¨€æ¥å£ï¼Œè™½ç„¶ä¸èƒ½å®Œå…¨æ›¿ä»£äººå·¥å®¡æ ¸ï¼Œä½†èƒ½æå¤§ç®€åŒ–æ—¥å¸¸çš„è¿ç»´æ“ä½œã€‚</p>
<h3 data-id="heading-4"><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.sentry.io%2Fproduct%2Fsentry-mcp%2F" target="_blank" title="https://docs.sentry.io/product/sentry-mcp/" ref="nofollow noopener noreferrer">Sentry MCP</a></h3>
<p>ä»£ç èƒ½è·‘é€šï¼Œä¸ä»£è¡¨æ²¡æœ‰Bugã€‚</p>
<p>å½“ç”Ÿäº§ç¯å¢ƒæŠ¥é”™æ—¶ï¼Œæ‰‹åŠ¨å»ç¿»å‡ åƒæ¡æ—¥å¿—éå¸¸ç—›è‹¦ã€‚Sentry MCPæ‰“é€šäº†AIä¸é”™è¯¯ç›‘æ§å¹³å°çš„è¿æ¥ã€‚å¼€å‘è€…å°±å¯ä»¥ç›´æ¥ä¸‹è¾¾æŒ‡ä»¤ï¼šâ€œåˆ†æä¸€ä¸‹è¿‡å»ä¸€å°æ—¶å†…å‡ºç°é¢‘ç‡æœ€é«˜çš„æŠ¥é”™ï¼Œå¹¶ç»™å‡ºä¿®å¤å»ºè®®â€ã€‚</p>
<p>AIèƒ½è¯»å–å…·ä½“çš„å †æ ˆè·Ÿè¸ªå’Œä¸Šä¸‹æ–‡å˜é‡ï¼Œç»“åˆä»£ç åº“ç»™å‡ºé’ˆå¯¹æ€§çš„ä¿®å¤æ–¹æ¡ˆï¼Œç›¸å½“äºé…äº†ä¸€ä¸ª24å°æ—¶å¾…å‘½çš„è¿ç»´åŠ©æ‰‹ï¼Œæ¯”å®ä¹ ç”Ÿå¥½ç”¨ã€‚</p>
<h3 data-id="heading-5"><a href="https://link.juejin.cn?target=https%3A%2F%2Flinear.app%2Fdocs%2Fmcp" target="_blank" title="https://linear.app/docs/mcp" ref="nofollow noopener noreferrer">Linear MCP</a></h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4cd5ebc1cf654025b81a31ec5d81904b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753878&amp;x-signature=Oh%2BhVtkHNlf8I7YLBKJGZe6Am2g%3D" alt="" loading="lazy"/></p>
<p>åœ¨ç°ä»£å¼€å‘æµç¨‹ä¸­ï¼Œéœ€æ±‚å¾€å¾€èººåœ¨Linearçš„å·¥å•é‡Œã€‚</p>
<p>Linear MCPå…è®¸AIç›´æ¥è¯»å–Issueçš„æ ‡é¢˜ã€æè¿°å’Œä¼˜å…ˆçº§ã€‚å¼€å§‹å·¥ä½œæ—¶ï¼Œå¯ä»¥è®©AIç›´æ¥æ‹‰å–å½“å‰åˆ†é…ç»™ä»»åŠ¡è¯¦æƒ…ï¼Œå¹¶æ ¹æ®æè¿°ç”Ÿæˆåˆæ­¥çš„ä»£ç æ¡†æ¶ã€‚æˆ–è€…åœ¨ä»»åŠ¡å®Œæˆåï¼Œè®©AIè‡ªåŠ¨æ›´æ–°å·¥å•çŠ¶æ€å¹¶æ·»åŠ å¤‡æ³¨ã€‚å®ƒå‡å°‘äº†å¼€å‘è€…åœ¨IDEå’Œæµè§ˆå™¨ä¹‹é—´åå¤åˆ‡æ¢çš„ä¸Šä¸‹æ–‡åˆ‡æ¢æˆæœ¬ã€‚</p>
<hr/>
<h4 data-id="heading-6">MCPè™½å¥½ï¼Œå¯ä¸è¦è´ªæ¯å“¦</h4>
<p>MCPåè®®è™½ç„¶å¼€æ”¾ï¼Œä½†è¦ç”¨å¥½å®ƒï¼Œå°±éœ€è¦è¿è¡Œç¯å¢ƒï¼Œè¿™äº›ä¹Ÿæ˜¯ä¸€ä¸ªå°é—¨æ§›ã€‚</p>
<p>ç»å¤§å¤šæ•°MCPæœåŠ¡å™¨ï¼Œæ— è®ºæ˜¯å®˜æ–¹çš„è¿˜æ˜¯å¼€æºç¤¾åŒºç»´æŠ¤çš„ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯è¿è¡Œåœ¨æœ¬åœ°çš„è„šæœ¬ï¼Œé‚£å°±éœ€è¦ä¸ºå®ƒä»¬é…ç½®è¿è¡Œç¯å¢ƒï¼Œæ¯”å¦‚Svelte MCPã€Vercel MCP é€šå¸¸ä¾èµ– Node.jsï¼Œè€ŒPostgreSQL MCPã€æŸäº›æ•°æ®åˆ†æå·¥å…·é€šå¸¸ä¾èµ– Pythonã€‚</p>
<p>å¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œä¸ºäº†ç”¨ä¸€ä¸ªå·¥å…·ï¼Œå…ˆæŠŠæœ¬åœ°çš„Nodeç‰ˆæœ¬æŠ˜è…¾ä¸€éï¼Œå†è§£å†³Pythonçš„ä¾èµ–å†²çªï¼Œè¿™æœ¬èº«å°±å¾ˆåŠé€€ã€‚ä½†æ²¡å…³ç³»ï¼ŒåŠæ³•æ€»æ¯”å›°éš¾å¤šï¼Œæ¯”å¦‚æˆ‘ä»¬ç›´æ¥ç”¨Servbayã€‚</p>
<h3 data-id="heading-7">é™ä½é—¨æ§›çš„è§£å†³æ–¹æ¡ˆï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.servbay.com" target="_blank" title="https://www.servbay.com" ref="nofollow noopener noreferrer">ServBay</a></h3>
<p>å¦‚æœæƒ³å¿«é€Ÿä½“éªŒä¸Šè¿°MCPå·¥å…·ï¼Œè€Œä¸å¸Œæœ›æŠŠæ—¶é—´æµªè´¹åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.servbay.com" target="_blank" title="https://www.servbay.com" ref="nofollow noopener noreferrer">é…ç½®ç¯å¢ƒä¾èµ–</a>ä¸Šï¼ŒServBay æ˜¯ä¸€ä¸ªéå¸¸åŠ¡å®çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>ServBay æ˜¯ä¸€æ¬¾ä¸“ä¸ºå¼€å‘è€…è®¾è®¡çš„ç¯å¢ƒç®¡ç†å·¥å…·ã€‚å®ƒå®Œç¾å¥‘åˆäº†MCPçš„ä½¿ç”¨åœºæ™¯</p>
<ul>
<li><strong>å¤šè¯­è¨€ç¯å¢ƒä¸€é”®å°±ç»ª</strong>ï¼šServBay å†…ç½®äº†å¤šä¸ªç‰ˆæœ¬çš„ Node.jsã€Python å’Œ PHPã€Rustã€Goç­‰ã€‚ä¸éœ€è¦æ‰‹åŠ¨å»æ <code>nvm</code> æˆ– <code>pyenv</code>ï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒç‰ˆæœ¬ä¸å…¼å®¹å¯¼è‡´MCPæœåŠ¡å™¨è·‘ä¸èµ·æ¥ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/136922db017c4626abb9a5db8e6ec1d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753878&amp;x-signature=hbpgaATtdqu9owyjRESjAIbovHI%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>ç¯å¢ƒéš”ç¦»ï¼Œäº’ä¸å¹²æ‰°</strong>ï¼šServBay æä¾›çš„ç¯å¢ƒæ˜¯ç‹¬ç«‹äºç³»ç»Ÿçš„ï¼Œæ‰€ä»¥å¼€å‘è€…èƒ½ä¸ºä¸åŒçš„MCPå·¥å…·å®‰è£…å„è‡ªéœ€è¦çš„ä¾èµ–åŒ…ï¼Œå®Œå…¨ä¸ä¼šæ±¡æŸ“ç³»ç»Ÿï¼Œå¹²å‡€åˆå«ç”Ÿã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c24acba5ce6949278498c1d0e1b943bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753878&amp;x-signature=AKLwCETTtsUrQxlssFvMvoV4ebs%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p><strong>ç»Ÿä¸€ç®¡ç†</strong>ï¼šæ— è®ºæ˜¯è¿è¡Œå‰ç«¯ç›¸å…³çš„MCPï¼Œè¿˜æ˜¯åç«¯æ•°æ®ç±»çš„MCPï¼Œéƒ½å¯ä»¥åœ¨ ServBay ä¸€ä¸ªè½¯ä»¶å†…æå®šæ‰€æœ‰çš„åº•å±‚è¿è¡Œæ—¶æ”¯æŒã€‚</p>
<ul>
<li/>
</ul>
</li>
</ul>
<p>AIæ˜¯ä¸ºäº†æé«˜æ•ˆç‡ï¼Œå·¥å…·ä¹Ÿæ˜¯ã€‚é€šè¿‡ MCP è¿æ¥ä¸šåŠ¡ï¼Œé€šè¿‡ ServBay æå®šç¯å¢ƒï¼ŒæŠŠå¤æ‚çš„é…ç½®ç•™ç»™å·¥å…·ï¼ŒæŠŠæ—¶é—´ç•™ç»™çœŸæ­£çš„åˆ›é€ ã€‚</p>
<p>ä½ ç”¨è¿‡å“ªäº›å¥½ç”¨çš„MCPï¼Œåˆ†äº«ä¸€ä¸‹å§ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»0åˆ°1æ­å»ºAndroidç½‘ç»œæ¡†æ¶ï¼šåˆ«å†è®©ä½ çš„è¯·æ±‚åœ¨"è·¯ä¸Šè¿·è·¯"äº†]]></title>    <link>https://juejin.cn/post/7576838095518826547</link>    <guid>https://juejin.cn/post/7576838095518826547</guid>    <pubDate>2025-11-26T08:49:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576838095518826547" data-draft-id="7569405389306298406" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»0åˆ°1æ­å»ºAndroidç½‘ç»œæ¡†æ¶ï¼šåˆ«å†è®©ä½ çš„è¯·æ±‚åœ¨&quot;è·¯ä¸Šè¿·è·¯&quot;äº†"/> <meta itemprop="keywords" content="æ¶æ„,é¢è¯•,Android"/> <meta itemprop="datePublished" content="2025-11-26T08:49:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¡¾æ—æµ·"/> <meta itemprop="url" content="https://juejin.cn/user/2365804752153911"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»0åˆ°1æ­å»ºAndroidç½‘ç»œæ¡†æ¶ï¼šåˆ«å†è®©ä½ çš„è¯·æ±‚åœ¨"è·¯ä¸Šè¿·è·¯"äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2365804752153911/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¡¾æ—æµ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T08:49:54.000Z" title="Wed Nov 26 2025 08:49:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä½œä¸ºAndroidå¼€å‘è€…ï¼Œä½ æ˜¯ä¸æ˜¯ä¹Ÿé‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ï¼šå†™ä¸ªç™»å½•åŠŸèƒ½ï¼Œå¤åˆ¶ç²˜è´´äº†300è¡Œç½‘ç»œè¯·æ±‚ä»£ç ï¼›æ”¹ä¸ªæ¥å£å‚æ•°ï¼Œå…¨é¡¹ç›®æœ"HttpURLConnection"æ”¹åˆ°å´©æºƒï¼›ç”¨æˆ·è¯´"æ²¡ç½‘çš„æ—¶å€™APPå¡æ­»äº†"ï¼Œä½ å¯¹ç€æ»¡å±çš„try-catché™·å…¥æ²‰æ€...</p>
<p>å…¶å®ï¼Œè¿™äº›é—®é¢˜çš„æ ¹æºéƒ½ä¸€æ ·ï¼šæ²¡æœ‰ä¸€å¥—é è°±çš„ç½‘ç»œæ¡†æ¶ã€‚</p>
<p>å°±åƒç›–æˆ¿å­æ²¡æ­è„šæ‰‹æ¶ï¼Œç Œå¢™å…¨é æ‰‹æŠ“ç –â€”â€”ä¸æ˜¯ä¸èƒ½ç›–ï¼Œå°±æ˜¯å®¹æ˜“å¡Œã€‚ä»Šå¤©å’±ä»¬å°±æ¥æ‰‹æŠŠæ‰‹æ­ä¸€å¥—"æŠ—æåˆå¥½æ”¹"çš„Androidç½‘ç»œæ¡†æ¶ï¼Œä»åŸºç¡€ç»„ä»¶åˆ°è¿›é˜¶æŠ€å·§ï¼Œä¿è¯è®©ä½ çš„ç½‘ç»œè¯·æ±‚ä»£ç ä»"ä¸€é”…ç²¥"å˜æˆ"ç²¾è£…æˆ¿"ã€‚</p>
<h2 data-id="heading-1">å…ˆææ‡‚ï¼šç½‘ç»œæ¡†æ¶åˆ°åº•è¦è§£å†³å•¥é—®é¢˜ï¼Ÿ</h2>
<p>åœ¨å¼€å§‹æ•²ä»£ç å‰ï¼Œå’±ä»¬å¾—å…ˆæ˜ç¡®ç›®æ ‡ï¼šä¸€å¥—å¥½çš„ç½‘ç»œæ¡†æ¶ï¼Œä¸æ˜¯ä¸ºäº†ç‚«æŠ€ï¼Œè€Œæ˜¯ä¸ºäº†å¸®ä½ å°‘è¸©å‘ã€‚å®ƒè‡³å°‘è¦æå®šè¿™å‡ ä»¶äº‹ï¼š</p>
<ul>
<li><strong>åˆ«é‡å¤é€ è½®å­</strong>ï¼šåŒä¸€ä¸ªé¡¹ç›®é‡Œï¼Œç™»å½•ã€æ³¨å†Œã€è·å–åˆ—è¡¨çš„ç½‘ç»œè¯·æ±‚é€»è¾‘ä¸è¯¥é‡å¤å†™</li>
<li><strong>ä¸»çº¿ç¨‹ä¸èƒ½å¡</strong>ï¼šç½‘ç»œè¯·æ±‚æ˜¯è€—æ—¶æ“ä½œï¼Œå¿…é¡»æ‰”åˆ°å­çº¿ç¨‹ï¼Œä¸ç„¶ANRè­¦å‘Šåˆ†åˆ†é’Ÿæ‰¾ä¸Šé—¨</li>
<li><strong>æ•°æ®è§£æä¸å¤´ç–¼</strong>ï¼šJSONå­—ç¬¦ä¸²æ‰‹åŠ¨è½¬å¯¹è±¡ï¼Ÿè¿™ç§ä½“åŠ›æ´»å°±è¯¥äº¤ç»™æ¡†æ¶</li>
<li><strong>å¼‚å¸¸èƒ½ä¼˜é›…å¤„ç†</strong>ï¼šæ²¡ç½‘ã€æœåŠ¡å™¨500ã€æ•°æ®æ ¼å¼é”™äº†ï¼Œæ€»ä¸èƒ½ç›´æ¥æŠ›ä¸ªçº¢æ¡†ç»™ç”¨æˆ·çœ‹å§</li>
<li><strong>ç¼“å­˜è¦èªæ˜</strong>ï¼šç”¨æˆ·åœ°é“é‡Œæ²¡ç½‘ï¼Œè‡³å°‘èƒ½çœ‹åˆ°ä¸Šæ¬¡åŠ è½½çš„å†…å®¹</li>
<li><strong>æ‰©å±•æ€§è¦å¼º</strong>ï¼šä»¥åæƒ³åŠ ä¸ª"è¯·æ±‚é‡è¯•"ã€"Tokenè‡ªåŠ¨åˆ·æ–°"ï¼Œä¸èƒ½æ”¹å¾—ç¿»å¤©è¦†åœ°</li>
</ul>
<p>å¸¦ç€è¿™äº›ç›®æ ‡ï¼Œå’±ä»¬å¼€å§‹"æ­éª¨æ¶"ã€‚ç›®å‰Androidç½‘ç»œæ¡†æ¶çš„"é»„é‡‘ç»„åˆ"æ˜¯ï¼š<strong>OkHttpï¼ˆæ‰“å·¥äººï¼‰+ Retrofitï¼ˆç¿»è¯‘å®˜ï¼‰+ åç¨‹ï¼ˆè°ƒåº¦å‘˜ï¼‰+ Gsonï¼ˆç¿»è¯‘å™¨ï¼‰</strong>ã€‚è¿™å››ä¸ªå·¥å…·å„å¸å…¶èŒï¼Œé…åˆèµ·æ¥å ªç§°å®Œç¾ã€‚</p>
<h2 data-id="heading-2">æ ¸å¿ƒç»„ä»¶ï¼šè®¤è¯†è¿™å‡ ä¸ª"æ‰“å·¥äºº"</h2>
<h3 data-id="heading-3">1. OkHttpï¼šæœ€é è°±çš„"å¿«é€’å°å“¥"</h3>
<p>OkHttpæ˜¯Squareå…¬å¸å‡ºçš„ç½‘ç»œåº“ï¼Œå°±åƒä¸€ä¸ªç»éªŒä¸°å¯Œçš„å¿«é€’å°å“¥ï¼šèƒ½å¸®ä½ å‘å¿«é€’ï¼ˆå‘èµ·è¯·æ±‚ï¼‰ã€æ”¶å¿«é€’ï¼ˆå¤„ç†å“åº”ï¼‰ã€é‡åˆ°å µè½¦ç»•ä¸ªè·¯ï¼ˆè‡ªåŠ¨é‡è¿ï¼‰ã€è¿˜èƒ½æ”’ä¸€æ³¢å¿«é€’ä¸€èµ·é€ï¼ˆè¿æ¥æ± å¤ç”¨ï¼‰ã€‚</p>
<p><strong>åŸºæœ¬ç”¨æ³•</strong>ï¼šå…ˆæ·»åŠ ä¾èµ–ï¼ˆç°åœ¨éƒ½ç”¨AndroidXï¼Œç›´æ¥ç”¨æœ€æ–°ç‰ˆï¼‰</p>
<pre><code class="hljs language-gradle" lang="gradle">dependencies {
    implementation 'com.squareup.okhttp3:okhttp:4.12.0'
}
</code></pre>
<p>ç„¶åå°±èƒ½å‘ä¸ªç®€å•çš„GETè¯·æ±‚äº†ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// åˆ›å»ºOkHttpClientå®ä¾‹ï¼ˆå»ºè®®å…¨å±€å•ä¾‹ï¼Œä¸ç„¶æµªè´¹èµ„æºï¼‰</span>
<span class="hljs-keyword">val</span> okHttpClient = OkHttpClient.Builder().build()

<span class="hljs-comment">// åˆ›å»ºè¯·æ±‚</span>
<span class="hljs-keyword">val</span> request = Request.Builder()
    .url(<span class="hljs-string">"https://api.example.com/user"</span>) <span class="hljs-comment">// åœ°å€</span>
    .<span class="hljs-keyword">get</span>() <span class="hljs-comment">// è¯·æ±‚æ–¹æ³•</span>
    .build()

<span class="hljs-comment">// å‘è¯·æ±‚ï¼ˆæ³¨æ„ï¼šä¸èƒ½åœ¨ä¸»çº¿ç¨‹ï¼ï¼‰</span>
okHttpClient.newCall(request).enqueue(<span class="hljs-keyword">object</span> : Callback {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onFailure</span><span class="hljs-params">(call: <span class="hljs-type">Call</span>, e: <span class="hljs-type">IOException</span>)</span></span> {
        <span class="hljs-comment">// å¤±è´¥äº†ï¼ˆæ²¡ç½‘ã€è¶…æ—¶ç­‰ï¼‰</span>
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onResponse</span><span class="hljs-params">(call: <span class="hljs-type">Call</span>, response: <span class="hljs-type">Response</span>)</span></span> {
        <span class="hljs-comment">// æˆåŠŸäº†ï¼Œresponse.body?.string()å°±æ˜¯è¿”å›çš„å­—ç¬¦ä¸²</span>
    }
})
</code></pre>
<p>ä½†ç›´æ¥ç”¨OkHttpå¤ª"åŸå§‹"äº†ï¼šæ¯æ¬¡è¯·æ±‚éƒ½è¦å†™å›è°ƒï¼Œè§£ææ•°æ®è¿˜å¾—è‡ªå·±è½¬ï¼Œæ‰€ä»¥å’±ä»¬éœ€è¦ä¸ª"ç¿»è¯‘å®˜"â€”â€”Retrofitã€‚</p>
<h3 data-id="heading-4">2. Retrofitï¼šOkHttpçš„"é«˜çº§ç§˜ä¹¦"</h3>
<p>Retrofitä¹Ÿæ˜¯Squareå®¶çš„ï¼Œå®ƒçš„ä½œç”¨æ˜¯æŠŠHTTPæ¥å£"ç¿»è¯‘"æˆJava/Kotlinæ¥å£ï¼Œè®©ä½ ç”¨è°ƒç”¨å‡½æ•°çš„æ–¹å¼å‘è¯·æ±‚ï¼Œä¸ç”¨å†æ‰‹åŠ¨æ‹¼URLã€åŠ å‚æ•°ã€‚</p>
<p><strong>æ·»åŠ ä¾èµ–</strong>ï¼š</p>
<pre><code class="hljs language-gradle" lang="gradle">dependencies {
    implementation 'com.squareup.retrofit2:retrofit:2.9.0'
    // é…åˆGsonè§£æJSON
    implementation 'com.squareup.retrofit2:converter-gson:2.9.0'
}
</code></pre>
<p><strong>åŸºæœ¬ç”¨æ³•</strong>ï¼šä¸‰æ­¥æå®šï¼š</p>
<p>ç¬¬ä¸€æ­¥ï¼šå®šä¹‰æ¥å£ï¼ˆå‘Šè¯‰Retrofit"æ€ä¹ˆå‘è¯·æ±‚"ï¼‰</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ApiService</span> {
    <span class="hljs-comment">// GETè¯·æ±‚ï¼šè·å–ç”¨æˆ·ä¿¡æ¯ï¼Œè·¯å¾„é‡Œå¸¦ä¸ªuserIdå‚æ•°</span>
    <span class="hljs-meta">@GET(<span class="hljs-string">"user/{userId}"</span>)</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getUserInfo</span><span class="hljs-params">(<span class="hljs-meta">@Path(<span class="hljs-string">"userId"</span>)</span> userId: <span class="hljs-type">String</span>)</span></span>: Call&lt;User&gt;

    <span class="hljs-comment">// POSTè¯·æ±‚ï¼šç™»å½•ï¼Œå‚æ•°æ”¾è¯·æ±‚ä½“é‡Œ</span>
    <span class="hljs-meta">@POST(<span class="hljs-string">"login"</span>)</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">login</span><span class="hljs-params">(<span class="hljs-meta">@Body</span> loginRequest: <span class="hljs-type">LoginRequest</span>)</span></span>: Call&lt;LoginResponse&gt;
}
</code></pre>
<p>ç¬¬äºŒæ­¥ï¼šåˆ›å»ºRetrofitå®ä¾‹ï¼ˆå…³è”OkHttpå’Œè§£æå™¨ï¼‰</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> retrofit = Retrofit.Builder()
    .baseUrl(<span class="hljs-string">"https://api.example.com/"</span>) <span class="hljs-comment">// åŸºç¡€åœ°å€ï¼Œæ¥å£é‡Œçš„è·¯å¾„ä¼šæ‹¼åœ¨åé¢</span>
    .client(okHttpClient) <span class="hljs-comment">// å…³è”OkHttp</span>
    .addConverterFactory(GsonConverterFactory.create()) <span class="hljs-comment">// ç”¨Gsonè§£æJSON</span>
    .build()

<span class="hljs-comment">// åˆ›å»ºæ¥å£å®ä¾‹</span>
<span class="hljs-keyword">val</span> apiService = retrofit.create(ApiService::<span class="hljs-keyword">class</span>.java)
</code></pre>
<p>ç¬¬ä¸‰æ­¥ï¼šè°ƒç”¨æ¥å£ï¼ˆå‘è¯·æ±‚ï¼‰</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// è°ƒç”¨ç™»å½•æ¥å£</span>
<span class="hljs-keyword">val</span> loginCall = apiService.login(LoginRequest(<span class="hljs-string">"username"</span>, <span class="hljs-string">"password"</span>))
loginCall.enqueue(<span class="hljs-keyword">object</span> : Callback&lt;LoginResponse&gt; {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onFailure</span><span class="hljs-params">(call: <span class="hljs-type">Call</span>&lt;<span class="hljs-type">LoginResponse</span>&gt;, t: <span class="hljs-type">Throwable</span>)</span></span> {
        <span class="hljs-comment">// å¤±è´¥å¤„ç†</span>
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onResponse</span><span class="hljs-params">(call: <span class="hljs-type">Call</span>&lt;<span class="hljs-type">LoginResponse</span>&gt;, response: <span class="hljs-type">Response</span>&lt;<span class="hljs-type">LoginResponse</span>&gt;)</span></span> {
        <span class="hljs-comment">// æˆåŠŸäº†ï¼Œresponse.body()å°±æ˜¯è§£æå¥½çš„LoginResponseå¯¹è±¡</span>
    }
})
</code></pre>
<p>æ˜¯ä¸æ˜¯æ¯”ç›´æ¥ç”¨OkHttpæ¸…çˆ½å¤šäº†ï¼Ÿä½†å›è°ƒåµŒå¥—è¿˜æ˜¯æœ‰ç‚¹çƒ¦ï¼Œè¿™æ—¶å€™å°±éœ€è¦"è°ƒåº¦å‘˜"â€”â€”åç¨‹ç™»åœºäº†ã€‚</p>
<h3 data-id="heading-5">3. åç¨‹ï¼šè®©å¼‚æ­¥ä»£ç åƒåŒæ­¥ä¸€æ ·å¥½å†™</h3>
<p>å¦‚æœç”¨Retrofitçš„å›è°ƒï¼Œå¤šå±‚è¯·æ±‚åµŒå¥—ä¼šå†™æˆ"å›è°ƒåœ°ç‹±"ï¼ˆæ¯”å¦‚å…ˆç™»å½•ï¼Œå†ç”¨tokenè·å–ç”¨æˆ·ä¿¡æ¯ï¼Œå†è·å–ç”¨æˆ·è®¢å•...ï¼‰ã€‚è€Œåç¨‹èƒ½è®©å¼‚æ­¥ä»£ç çº¿æ€§æ‰§è¡Œï¼Œå‘Šåˆ«åµŒå¥—ã€‚</p>
<p><strong>æ€ä¹ˆç”¨</strong>ï¼šç»™Retrofitæ¥å£åŠ ä¸ª<code>suspend</code>å…³é”®å­—ï¼Œå°±èƒ½åœ¨åç¨‹é‡Œç›´æ¥è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ApiService</span> {
    <span class="hljs-comment">// åŠ ä¸ªsuspendï¼Œå˜æˆæŒ‚èµ·å‡½æ•°</span>
    <span class="hljs-meta">@POST(<span class="hljs-string">"login"</span>)</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">login</span><span class="hljs-params">(<span class="hljs-meta">@Body</span> loginRequest: <span class="hljs-type">LoginRequest</span>)</span></span>: LoginResponse
}

<span class="hljs-comment">// åœ¨ViewModelé‡Œç”¨åç¨‹è°ƒç”¨</span>
viewModelScope.launch {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">val</span> loginResponse = apiService.login(LoginRequest(<span class="hljs-string">"username"</span>, <span class="hljs-string">"password"</span>))
        <span class="hljs-comment">// ç™»å½•æˆåŠŸï¼Œæ¥ç€åšå…¶ä»–äº‹ï¼ˆæ¯”å¦‚å­˜tokenï¼‰</span>
        <span class="hljs-keyword">val</span> userInfo = apiService.getUserInfo(loginResponse.userId)
        <span class="hljs-comment">// è·å–ç”¨æˆ·ä¿¡æ¯æˆåŠŸ...</span>
    } <span class="hljs-keyword">catch</span> (e: Exception) {
        <span class="hljs-comment">// ç»Ÿä¸€å¤„ç†å¼‚å¸¸ï¼ˆç½‘ç»œé”™ã€è§£æé”™éƒ½åœ¨è¿™ï¼‰</span>
    }
}
</code></pre>
<p>ä¸€è¡Œ<code>try-catch</code>æå®šæ‰€æœ‰å¼‚å¸¸ï¼Œä»£ç ä»å¤´åˆ°å°¾åƒåŒæ­¥ä¸€æ ·å†™ï¼Œè¿™æ‰æ˜¯å¼€å‘è€…è¯¥æœ‰çš„å¾…é‡ï¼</p>
<h2 data-id="heading-6">æ¡†æ¶å°è£…ï¼šä»"èƒ½ç”¨"åˆ°"å¥½ç”¨"</h2>
<p>å…‰æŠŠåº“ä¸²èµ·æ¥è¿˜ä¸å¤Ÿï¼Œå’±ä»¬å¾—å°è£…ä¸€å±‚ï¼Œè®©å®ƒæ›´ç¬¦åˆé¡¹ç›®éœ€æ±‚ã€‚è¿™éƒ¨åˆ†æ˜¯æ¡†æ¶çš„"çµé­‚"ï¼Œç›´æ¥å†³å®šäº†åç»­å¥½ä¸å¥½ç»´æŠ¤ã€‚</p>
<h3 data-id="heading-7">1. ç»Ÿä¸€å“åº”æ ¼å¼ï¼šåˆ«è®©æœåŠ¡å™¨è¿”å›"æƒŠå–œ"</h3>
<p>å‡ ä¹æ‰€æœ‰åç«¯æ¥å£éƒ½ä¼šè¿”å›ç»Ÿä¸€æ ¼å¼ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// çŠ¶æ€ç ï¼š200æˆåŠŸï¼Œå…¶ä»–å¤±è´¥</span>
  <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"success"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// æç¤ºä¿¡æ¯</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> ... <span class="hljs-punctuation">}</span> <span class="hljs-comment">// å®é™…æ•°æ®ï¼ˆæˆåŠŸæ—¶æ‰æœ‰ï¼‰</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å¦‚æœæ¯ä¸ªæ¥å£éƒ½æ‰‹åŠ¨åˆ¤æ–­<code>code</code>ï¼Œä¼šå†™åçš„ã€‚å’±ä»¬å¯ä»¥å°è£…ä¸€ä¸ª<code>BaseResponse</code>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ³›å‹Tè¡¨ç¤ºdataçš„ç±»å‹</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseResponse</span>&lt;<span class="hljs-type">T</span>&gt;(
    <span class="hljs-keyword">val</span> code: <span class="hljs-built_in">Int</span>,
    <span class="hljs-keyword">val</span> message: String,
    <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span>: T?
)
</code></pre>
<p>ç„¶åå®šä¹‰ä¸€ä¸ª"æˆåŠŸåˆ¤æ–­è§„åˆ™"ï¼Œæ¯”å¦‚<code>code == 200</code>æ‰ç®—æˆåŠŸï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å¯†å°ç±»ï¼šç”¨äºåŒ…è£…è¯·æ±‚ç»“æœï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰</span>
<span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Result</span>&lt;<span class="hljs-type">out T</span>&gt; {
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Success</span>&lt;<span class="hljs-type">out T</span>&gt;(<span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span>: T) : Result&lt;T&gt;()
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Failure</span>(<span class="hljs-keyword">val</span> code: <span class="hljs-built_in">Int</span>, <span class="hljs-keyword">val</span> message: String) : Result&lt;<span class="hljs-built_in">Nothing</span>&gt;()
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Error</span>(<span class="hljs-keyword">val</span> exception: Exception) : Result&lt;<span class="hljs-built_in">Nothing</span>&gt;()
}

<span class="hljs-comment">// æ‰©å±•å‡½æ•°ï¼šæŠŠBaseResponseè½¬æˆResult</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> ApiService.<span class="hljs-title">wrapRequest</span><span class="hljs-params">(request: <span class="hljs-type">suspend</span> () -&gt; <span class="hljs-type">BaseResponse</span>&lt;<span class="hljs-type">T</span>&gt;)</span></span>: Result&lt;T&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">val</span> response = request()
        <span class="hljs-keyword">if</span> (response.code == <span class="hljs-number">200</span>) {
            <span class="hljs-comment">// æˆåŠŸï¼šå¦‚æœdataä¸ºnullï¼Œå¯èƒ½è¿”å›é»˜è®¤å€¼ï¼ˆæ ¹æ®åç«¯æƒ…å†µå®šï¼‰</span>
            Result.Success(response.<span class="hljs-keyword">data</span> ?: <span class="hljs-keyword">throw</span> NullPointerException(<span class="hljs-string">"data is null"</span>))
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// å¤±è´¥ï¼šæ¯”å¦‚code=401ï¼ˆæœªç™»å½•ï¼‰ã€500ï¼ˆæœåŠ¡å™¨é”™ï¼‰</span>
            Result.Failure(response.code, response.message)
        }
    } <span class="hljs-keyword">catch</span> (e: Exception) {
        <span class="hljs-comment">// å¼‚å¸¸ï¼šç½‘ç»œé”™ã€è§£æé”™ç­‰</span>
        Result.Error(e)
    }
}
</code></pre>
<p>è¿™æ ·ç”¨èµ·æ¥å°±çˆ½äº†ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ¥å£å®šä¹‰æ—¶ï¼Œè¿”å›BaseResponse</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ApiService</span> {
    <span class="hljs-meta">@POST(<span class="hljs-string">"login"</span>)</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">login</span><span class="hljs-params">(<span class="hljs-meta">@Body</span> request: <span class="hljs-type">LoginRequest</span>)</span></span>: BaseResponse&lt;LoginData&gt;
}

<span class="hljs-comment">// è°ƒç”¨æ—¶</span>
viewModelScope.launch {
    <span class="hljs-keyword">val</span> result = apiService.wrapRequest { 
        apiService.login(LoginRequest(<span class="hljs-string">"username"</span>, <span class="hljs-string">"password"</span>)) 
    }
    <span class="hljs-keyword">when</span> (result) {
        <span class="hljs-keyword">is</span> Result.Success -&gt; {
            <span class="hljs-comment">// æˆåŠŸï¼Œresult.dataå°±æ˜¯LoginData</span>
        }
        <span class="hljs-keyword">is</span> Result.Failure -&gt; {
            <span class="hljs-comment">// åç«¯è¿”å›çš„å¤±è´¥ï¼Œæ¯”å¦‚"å¯†ç é”™è¯¯"</span>
            Toast.makeText(context, result.message, Toast.LENGTH_SHORT).show()
        }
        <span class="hljs-keyword">is</span> Result.Error -&gt; {
            <span class="hljs-comment">// å¼‚å¸¸ï¼Œæ¯”å¦‚æ²¡ç½‘</span>
            <span class="hljs-keyword">if</span> (result.exception <span class="hljs-keyword">is</span> IOException) {
                Toast.makeText(context, <span class="hljs-string">"ç½‘ç»œä¸ç»™åŠ›"</span>, Toast.LENGTH_SHORT).show()
            }
        }
    }
}
</code></pre>
<p>ä»æ­¤åˆ¤æ–­ç»“æœåªéœ€è¦ä¸€ä¸ª<code>when</code>ï¼Œå†ä¹Ÿä¸ç”¨åˆ°å¤„å†™<code>if (code == 200)</code>äº†ï¼</p>
<h3 data-id="heading-8">2. OkHttpæ‹¦æˆªå™¨ï¼šç»™è¯·æ±‚"åŠ æˆ"</h3>
<p>æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰æ˜¯OkHttpçš„"é»‘ç§‘æŠ€"ï¼Œèƒ½åœ¨è¯·æ±‚å‘å‡ºå»å‰ã€å“åº”å›æ¥ååšäº›é¢å¤–æ“ä½œã€‚æ¯”å¦‚æ‰“å°æ—¥å¿—ã€åŠ Tokenã€å¤„ç†ç¼“å­˜ï¼Œéƒ½é å®ƒã€‚</p>
<h4 data-id="heading-9">ï¼ˆ1ï¼‰æ—¥å¿—æ‹¦æˆªå™¨ï¼šè°ƒè¯•æ—¶çš„"ç›‘æ§æ‘„åƒå¤´"</h4>
<p>å¼€å‘æ—¶æƒ³çŸ¥é“è¯·æ±‚å‚æ•°ã€å“åº”æ•°æ®ï¼Ÿç”¨<code>HttpLoggingInterceptor</code>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> loggingInterceptor = HttpLoggingInterceptor { message -&gt;
    Log.d(<span class="hljs-string">"HttpLog"</span>, message) <span class="hljs-comment">// æ‰“å°æ—¥å¿—</span>
}.apply {
    level = HttpLoggingInterceptor.Level.BODY <span class="hljs-comment">// æ‰“å°è¯¦ç»†æ—¥å¿—ï¼ˆåŒ…å«è¯·æ±‚ä½“ã€å“åº”ä½“ï¼‰</span>
}

<span class="hljs-comment">// ç»™OkHttpæ·»åŠ æ‹¦æˆªå™¨</span>
<span class="hljs-keyword">val</span> okHttpClient = OkHttpClient.Builder()
    .addInterceptor(loggingInterceptor)
    .build()
</code></pre>
<p>è¿™æ ·Logcaté‡Œå°±ä¼šè¾“å‡ºå®Œæ•´çš„è¯·æ±‚å“åº”ä¿¡æ¯ï¼Œè°ƒè¯•æ—¶å†ä¹Ÿä¸ç”¨çŒœ"å‚æ•°ä¼ å¯¹äº†æ²¡"ã€‚</p>
<h4 data-id="heading-10">ï¼ˆ2ï¼‰Tokenæ‹¦æˆªå™¨ï¼šè‡ªåŠ¨ç»™è¯·æ±‚"æˆ´å¸½å­"</h4>
<p>å¾ˆå¤šæ¥å£éœ€è¦åœ¨Headeré‡Œå¸¦Tokenï¼ˆæ¯”å¦‚<code>Authorization: Bearer xxxx</code>ï¼‰ï¼Œæ€»ä¸èƒ½æ¯ä¸ªæ¥å£éƒ½æ‰‹åŠ¨åŠ å§ï¼Ÿç”¨æ‹¦æˆªå™¨è‡ªåŠ¨åŠ ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TokenInterceptor</span> : <span class="hljs-type">Interceptor</span> {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">intercept</span><span class="hljs-params">(chain: <span class="hljs-type">Interceptor</span>.<span class="hljs-type">Chain</span>)</span></span>: Response {
        <span class="hljs-comment">// 1. è·å–åŸå§‹è¯·æ±‚</span>
        <span class="hljs-keyword">val</span> originalRequest = chain.request()
        
        <span class="hljs-comment">// 2. ä»æœ¬åœ°è·å–Tokenï¼ˆæ¯”å¦‚ä»SharedPreferencesé‡Œè¯»ï¼‰</span>
        <span class="hljs-keyword">val</span> token = SPUtils.getString(<span class="hljs-string">"token"</span>, <span class="hljs-string">""</span>)
        
        <span class="hljs-comment">// 3. å¦‚æœæœ‰Tokenï¼Œç»™è¯·æ±‚åŠ Header</span>
        <span class="hljs-keyword">val</span> newRequest = <span class="hljs-keyword">if</span> (token.isNotEmpty()) {
            originalRequest.newBuilder()
                .header(<span class="hljs-string">"Authorization"</span>, <span class="hljs-string">"Bearer <span class="hljs-variable">$token</span>"</span>)
                .build()
        } <span class="hljs-keyword">else</span> {
            originalRequest <span class="hljs-comment">// æ²¡Tokenå°±ç”¨åŸå§‹è¯·æ±‚</span>
        }
        
        <span class="hljs-comment">// 4. ç»§ç»­å¤„ç†è¯·æ±‚</span>
        <span class="hljs-keyword">return</span> chain.proceed(newRequest)
    }
}

<span class="hljs-comment">// æ·»åŠ åˆ°OkHttp</span>
<span class="hljs-keyword">val</span> okHttpClient = OkHttpClient.Builder()
    .addInterceptor(TokenInterceptor())
    .addInterceptor(loggingInterceptor) <span class="hljs-comment">// æ³¨æ„é¡ºåºï¼šTokenæ‹¦æˆªå™¨å…ˆåŠ ï¼Œæ—¥å¿—æ‰èƒ½æ‰“å°å‡ºå¸¦Tokençš„è¯·æ±‚</span>
    .build()
</code></pre>
<p>æ›´ç‰›çš„æ˜¯ï¼Œè¿˜èƒ½å¤„ç†Tokenè¿‡æœŸï¼šå¦‚æœæ¥å£è¿”å›401ï¼ˆTokenå¤±æ•ˆï¼‰ï¼Œè‡ªåŠ¨åˆ·æ–°Tokenåé‡è¯•è¯·æ±‚ã€‚è¿™ä¸ªé€»è¾‘ç¨å¾®å¤æ‚ç‚¹ï¼Œéœ€è¦ç”¨"æ‹¦æˆªå™¨+åç¨‹"é…åˆï¼Œæ ¸å¿ƒæ€è·¯æ˜¯ï¼š</p>
<ol>
<li>æ‹¦æˆªåˆ°401å“åº”</li>
<li>ç”¨åˆ·æ–°Tokençš„æ¥å£è·å–æ–°Token</li>
<li>ç”¨æ–°Tokené‡æ–°æ„å»ºè¯·æ±‚ï¼Œå†æ¬¡å‘èµ·</li>
<li>æŠŠæ–°Tokenå­˜åˆ°æœ¬åœ°</li>
</ol>
<p>ï¼ˆä»£ç å¤ªé•¿ï¼Œè¿™é‡Œå°±ä¸è´´äº†ï¼Œæ ¸å¿ƒæ˜¯ç”¨<code>chain.proceed(newRequest)</code>é‡è¯•ï¼‰</p>
<h3 data-id="heading-11">3. ç¼“å­˜ç­–ç•¥ï¼šæ²¡ç½‘ä¹Ÿèƒ½"çœ‹å†å²"</h3>
<p>ç”¨æˆ·æ²¡ç½‘çš„æ—¶å€™ï¼Œèƒ½æ˜¾ç¤ºä¸Šæ¬¡åŠ è½½çš„æ•°æ®ï¼Œä½“éªŒä¼šå¥½å¾ˆå¤šã€‚OkHttpçš„ç¼“å­˜æœºåˆ¶å¯ä»¥å¸®æˆ‘ä»¬å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚</p>
<p><strong>é…ç½®ç¼“å­˜</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. æŒ‡å®šç¼“å­˜ç›®å½•å’Œå¤§å°ï¼ˆæ¯”å¦‚50MBï¼‰</span>
<span class="hljs-keyword">val</span> cacheDir = context.cacheDir <span class="hljs-comment">// åº”ç”¨ç¼“å­˜ç›®å½•</span>
<span class="hljs-keyword">val</span> cache = Cache(cacheDir, <span class="hljs-number">50</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024L</span>) <span class="hljs-comment">// 50MB</span>

<span class="hljs-comment">// 2. å†™ä¸ªç¼“å­˜æ‹¦æˆªå™¨ï¼Œå®šä¹‰ç¼“å­˜è§„åˆ™</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheInterceptor</span> : <span class="hljs-type">Interceptor</span> {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">intercept</span><span class="hljs-params">(chain: <span class="hljs-type">Interceptor</span>.<span class="hljs-type">Chain</span>)</span></span>: Response {
        <span class="hljs-keyword">var</span> request = chain.request()
        
        <span class="hljs-comment">// å¦‚æœæ²¡ç½‘ï¼Œå¼ºåˆ¶ä½¿ç”¨ç¼“å­˜ï¼ˆç¼“å­˜æœ‰æ•ˆæœŸ60ç§’ï¼Œå¯è‡ªå®šä¹‰ï¼‰</span>
        <span class="hljs-keyword">if</span> (!NetworkUtils.isConnected(context)) {
            request = request.newBuilder()
                .cacheControl(CacheControl.FORCE_CACHE)
                .build()
        }
        
        <span class="hljs-keyword">val</span> response = chain.proceed(request)
        
        <span class="hljs-comment">// å¦‚æœæœ‰ç½‘ï¼Œç¼“å­˜æœ‰æ•ˆæœŸè®¾ä¸º0ï¼ˆä¸ç¼“å­˜ï¼‰ï¼›æ²¡ç½‘åˆ™å»¶é•¿ç¼“å­˜æ—¶é—´</span>
        <span class="hljs-keyword">if</span> (NetworkUtils.isConnected(context)) {
            <span class="hljs-keyword">val</span> maxAge = <span class="hljs-number">0</span> <span class="hljs-comment">// 0ç§’å†…ä¸ç¼“å­˜ï¼Œç›´æ¥è¯·æ±‚ç½‘ç»œ</span>
            response.newBuilder()
                .header(<span class="hljs-string">"Cache-Control"</span>, <span class="hljs-string">"public, max-age=<span class="hljs-variable">$maxAge</span>"</span>)
                .removeHeader(<span class="hljs-string">"Pragma"</span>) <span class="hljs-comment">// æ¸…é™¤æ—§çš„ç¼“å­˜å¤´</span>
                .build()
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">val</span> maxStale = <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">24</span> <span class="hljs-comment">// æ²¡ç½‘æ—¶ï¼Œç¼“å­˜æœ‰æ•ˆæœŸ24å°æ—¶</span>
            response.newBuilder()
                .header(<span class="hljs-string">"Cache-Control"</span>, <span class="hljs-string">"public, only-if-cached, max-stale=<span class="hljs-variable">$maxStale</span>"</span>)
                .removeHeader(<span class="hljs-string">"Pragma"</span>)
                .build()
        }
        <span class="hljs-keyword">return</span> response
    }
}

<span class="hljs-comment">// 3. ç»™OkHttpæ·»åŠ ç¼“å­˜å’Œæ‹¦æˆªå™¨</span>
<span class="hljs-keyword">val</span> okHttpClient = OkHttpClient.Builder()
    .cache(cache)
    .addInterceptor(CacheInterceptor()) <span class="hljs-comment">// åº”ç”¨æ‹¦æˆªå™¨ï¼šå¤„ç†ç¼“å­˜é€»è¾‘</span>
    .addNetworkInterceptor(CacheInterceptor()) <span class="hljs-comment">// ç½‘ç»œæ‹¦æˆªå™¨ï¼šé…åˆç¼“å­˜ä½¿ç”¨</span>
    .build()
</code></pre>
<p>è¿™é‡Œè¦æ³¨æ„ï¼š<code>addInterceptor</code>ï¼ˆåº”ç”¨æ‹¦æˆªå™¨ï¼‰å’Œ<code>addNetworkInterceptor</code>ï¼ˆç½‘ç»œæ‹¦æˆªå™¨ï¼‰çš„åŒºåˆ«ï¼šå‰è€…ä¸ç®¡æœ‰æ²¡æœ‰ç½‘éƒ½ä¼šæ‰§è¡Œï¼Œåè€…åªåœ¨æœ‰ç½‘ç»œè¯·æ±‚æ—¶æ‰§è¡Œã€‚ç¼“å­˜é€»è¾‘éœ€è¦ä¸¤è€…é…åˆã€‚</p>
<h3 data-id="heading-12">4. å•ä¾‹ç®¡ç†ï¼šåˆ«è®©å®ä¾‹"æ»¡å¤©é£"</h3>
<p>OkHttpã€Retrofitè¿™äº›å®ä¾‹åˆ›å»ºæˆæœ¬å¾ˆé«˜ï¼Œæœ€å¥½å…¨å±€å•ä¾‹ã€‚å¯ä»¥ç”¨Daggeræˆ–Hiltï¼ˆGoogleæ¨èçš„ä¾èµ–æ³¨å…¥åº“ï¼‰æ¥ç®¡ç†ï¼Œè¿™é‡Œç”¨Hiltä¸¾ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. å®šä¹‰OkHttpå•ä¾‹</span>
<span class="hljs-meta">@Module</span>
<span class="hljs-meta">@InstallIn(SingletonComponent::class)</span>
<span class="hljs-keyword">object</span> NetworkModule {
    <span class="hljs-meta">@Singleton</span>
    <span class="hljs-meta">@Provides</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">provideOkHttpClient</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>)</span></span>: OkHttpClient {
        <span class="hljs-keyword">return</span> OkHttpClient.Builder()
            .cache(Cache(context.cacheDir, <span class="hljs-number">50</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024L</span>))
            .addInterceptor(TokenInterceptor())
            .addInterceptor(loggingInterceptor)
            .addInterceptor(CacheInterceptor())
            .addNetworkInterceptor(CacheInterceptor())
            .connectTimeout(<span class="hljs-number">10</span>, TimeUnit.SECONDS) <span class="hljs-comment">// è¿æ¥è¶…æ—¶</span>
            .readTimeout(<span class="hljs-number">10</span>, TimeUnit.SECONDS) <span class="hljs-comment">// è¯»å–è¶…æ—¶</span>
            .build()
    }

    <span class="hljs-comment">// 2. å®šä¹‰Retrofitå•ä¾‹</span>
    <span class="hljs-meta">@Singleton</span>
    <span class="hljs-meta">@Provides</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">provideRetrofit</span><span class="hljs-params">(okHttpClient: <span class="hljs-type">OkHttpClient</span>)</span></span>: Retrofit {
        <span class="hljs-keyword">return</span> Retrofit.Builder()
            .baseUrl(<span class="hljs-string">"https://api.example.com/"</span>)
            .client(okHttpClient)
            .addConverterFactory(GsonConverterFactory.create())
            .addCallAdapterFactory(CoroutineCallAdapterFactory()) <span class="hljs-comment">// æ”¯æŒåç¨‹</span>
            .build()
    }

    <span class="hljs-comment">// 3. æä¾›ApiService</span>
    <span class="hljs-meta">@Singleton</span>
    <span class="hljs-meta">@Provides</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">provideApiService</span><span class="hljs-params">(retrofit: <span class="hljs-type">Retrofit</span>)</span></span>: ApiService {
        <span class="hljs-keyword">return</span> retrofit.create(ApiService::<span class="hljs-keyword">class</span>.java)
    }
}
</code></pre>
<p>ç„¶ååœ¨éœ€è¦ç”¨çš„åœ°æ–¹ç›´æ¥æ³¨å…¥ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">UserRepository</span> <span class="hljs-meta">@Inject</span> <span class="hljs-keyword">constructor</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> apiService: ApiService
) {
    <span class="hljs-comment">// ç›´æ¥ç”¨apiServiceå‘è¯·æ±‚</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">login</span><span class="hljs-params">(username: <span class="hljs-type">String</span>, password: <span class="hljs-type">String</span>)</span></span> = apiService.wrapRequest {
        apiService.login(LoginRequest(username, password))
    }
}
</code></pre>
<p>ç”¨Hiltç®¡ç†åï¼Œå†ä¹Ÿä¸ç”¨æ‰‹åŠ¨<code>new</code>å®ä¾‹äº†ï¼Œè¿˜èƒ½ä¿è¯å…¨å±€åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå†…å­˜æ›´çœã€‚</p>
<h2 data-id="heading-13">è¿›é˜¶æŠ€å·§ï¼šè®©æ¡†æ¶æ›´"æŠ—æ"</h2>
<h3 data-id="heading-14">1. è¯·æ±‚é‡è¯•ï¼šå¤±è´¥äº†åˆ«è½»æ˜“æ”¾å¼ƒ</h3>
<p>ç½‘ç»œå¶å°”æŠ½é£å¾ˆæ­£å¸¸ï¼Œç»™é‡è¦è¯·æ±‚åŠ ä¸ªé‡è¯•æœºåˆ¶å¾ˆæœ‰å¿…è¦ã€‚å¯ä»¥ç”¨æ‹¦æˆªå™¨å®ç°ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">RetryInterceptor</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> maxRetry: <span class="hljs-built_in">Int</span> = <span class="hljs-number">3</span>) : Interceptor {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> retryCount = <span class="hljs-number">0</span> <span class="hljs-comment">// å·²é‡è¯•æ¬¡æ•°</span>

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">intercept</span><span class="hljs-params">(chain: <span class="hljs-type">Interceptor</span>.<span class="hljs-type">Chain</span>)</span></span>: Response {
        <span class="hljs-keyword">val</span> request = chain.request()
        <span class="hljs-keyword">var</span> response: Response? = <span class="hljs-literal">null</span>
        <span class="hljs-keyword">try</span> {
            response = chain.proceed(request)
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            <span class="hljs-comment">// å¦‚æœå¤±è´¥ï¼Œä¸”æ²¡åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œå°±é‡è¯•</span>
            <span class="hljs-keyword">while</span> (retryCount &lt; maxRetry) {
                retryCount++
                response = chain.proceed(request)
                <span class="hljs-keyword">if</span> (response.isSuccessful) { <span class="hljs-comment">// æˆåŠŸäº†å°±é€€å‡ºå¾ªç¯</span>
                    <span class="hljs-keyword">break</span>
                }
            }
        }
        <span class="hljs-keyword">return</span> response ?: <span class="hljs-keyword">throw</span> IOException(<span class="hljs-string">"é‡è¯•<span class="hljs-variable">$maxRetry</span>æ¬¡åä»å¤±è´¥"</span>)
    }
}
</code></pre>
<p>æ³¨æ„ï¼šä¸æ˜¯æ‰€æœ‰è¯·æ±‚éƒ½é€‚åˆé‡è¯•ï¼ˆæ¯”å¦‚POSTæäº¤è®¢å•ï¼Œé‡è¯•å¯èƒ½å¯¼è‡´é‡å¤ä¸‹å•ï¼‰ï¼Œæ‰€ä»¥æœ€å¥½åœ¨æ‹¦æˆªå™¨é‡ŒåŠ ä¸ªåˆ¤æ–­ï¼Œæ¯”å¦‚åªé‡è¯•GETè¯·æ±‚ã€‚</p>
<h3 data-id="heading-15">2. å¤§æ–‡ä»¶ä¸‹è½½ï¼šè¿›åº¦ç›‘å¬ä¸èƒ½å°‘</h3>
<p>ä¸‹è½½æ–‡ä»¶æ—¶ï¼Œç”¨æˆ·è‚¯å®šæƒ³çŸ¥é“è¿›åº¦ã€‚OkHttpå¯ä»¥é€šè¿‡<code>ResponseBody</code>çš„<code>source()</code>æ–¹æ³•ç›‘å¬è¿›åº¦ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å®šä¹‰ä¸‹è½½è¿›åº¦å›è°ƒ</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">DownloadListener</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onProgress</span><span class="hljs-params">(progress: <span class="hljs-type">Int</span>)</span></span> <span class="hljs-comment">// 0-100</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSuccess</span><span class="hljs-params">(file: <span class="hljs-type">File</span>)</span></span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onFailure</span><span class="hljs-params">(e: <span class="hljs-type">Exception</span>)</span></span>
}

<span class="hljs-comment">// ä¸‹è½½æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ApiService</span> {
    <span class="hljs-meta">@GET</span>
    <span class="hljs-meta">@Streaming</span> <span class="hljs-comment">// æµå¼ä¸‹è½½ï¼ˆå¤§æ–‡ä»¶å¿…é¡»åŠ ï¼Œä¸ç„¶ä¼šæŠŠæ•´ä¸ªæ–‡ä»¶è¯»åˆ°å†…å­˜ï¼‰</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">downloadFile</span><span class="hljs-params">(<span class="hljs-meta">@Url</span> url: <span class="hljs-type">String</span>)</span></span>: ResponseBody
}

<span class="hljs-comment">// ä¸‹è½½å®ç°</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">downloadFile</span><span class="hljs-params">(url: <span class="hljs-type">String</span>, savePath: <span class="hljs-type">String</span>, listener: <span class="hljs-type">DownloadListener</span>)</span></span> {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">val</span> responseBody = apiService.downloadFile(url)
        <span class="hljs-keyword">val</span> totalLength = responseBody.contentLength() <span class="hljs-comment">// æ€»å¤§å°</span>
        <span class="hljs-keyword">var</span> currentLength = <span class="hljs-number">0L</span> <span class="hljs-comment">// å·²ä¸‹è½½å¤§å°</span>
        <span class="hljs-keyword">val</span> inputStream = responseBody.byteStream()
        <span class="hljs-keyword">val</span> file = File(savePath)
        <span class="hljs-keyword">val</span> outputStream = FileOutputStream(file)
        <span class="hljs-keyword">val</span> buffer = ByteArray(<span class="hljs-number">1024</span> * <span class="hljs-number">8</span>)
        <span class="hljs-keyword">var</span> len: <span class="hljs-built_in">Int</span>
        <span class="hljs-keyword">while</span> (inputStream.read(buffer).also { len = it } != -<span class="hljs-number">1</span>) {
            outputStream.write(buffer, <span class="hljs-number">0</span>, len)
            currentLength += len
            <span class="hljs-comment">// è®¡ç®—è¿›åº¦å¹¶å›è°ƒ</span>
            <span class="hljs-keyword">val</span> progress = (currentLength * <span class="hljs-number">100</span> / totalLength).toInt()
            listener.onProgress(progress)
        }
        outputStream.flush()
        inputStream.close()
        outputStream.close()
        listener.onSuccess(file)
    } <span class="hljs-keyword">catch</span> (e: Exception) {
        listener.onFailure(e)
    }
}
</code></pre>
<p>å…³é”®æ˜¯åŠ <code>@Streaming</code>æ³¨è§£ï¼Œä¸ç„¶å¤§æ–‡ä»¶ä¼šç›´æ¥å¡æ»¡å†…å­˜ï¼Œå¯¼è‡´OOMã€‚</p>
<h2 data-id="heading-16">æ€»ç»“</h2>
<p>åˆ°è¿™é‡Œï¼Œå’±ä»¬çš„ç½‘ç»œæ¡†æ¶å°±æ­å¾—å·®ä¸å¤šäº†ã€‚æ€»ç»“ä¸€ä¸‹ï¼Œå®ƒåŒ…å«è¿™äº›éƒ¨åˆ†ï¼š</p>
<ul>
<li><strong>åº•å±‚å¼•æ“</strong>ï¼šOkHttpè´Ÿè´£å®é™…çš„ç½‘ç»œé€šä¿¡ï¼Œå¤„ç†è¿æ¥ã€ç¼“å­˜ã€æ‹¦æˆªå™¨</li>
<li><strong>æ¥å£å°è£…</strong>ï¼šRetrofitæŠŠHTTPæ¥å£è½¬æˆKotlinæ¥å£ï¼Œé…åˆGsonè‡ªåŠ¨è§£æJSON</li>
<li><strong>çº¿ç¨‹è°ƒåº¦</strong>ï¼šåç¨‹è§£å†³å¼‚æ­¥å›è°ƒé—®é¢˜ï¼Œè®©ä»£ç æ›´æ¸…çˆ½</li>
<li><strong>ç»Ÿä¸€å¤„ç†</strong>ï¼šBaseResponse+Resultå°è£…å“åº”ï¼Œç»Ÿä¸€åˆ¤æ–­æˆåŠŸå¤±è´¥</li>
<li><strong>åŠŸèƒ½å¢å¼º</strong>ï¼šæ‹¦æˆªå™¨å¤„ç†Tokenã€æ—¥å¿—ã€ç¼“å­˜ï¼›é‡è¯•æœºåˆ¶æé«˜ç¨³å®šæ€§</li>
<li><strong>ä¾èµ–ç®¡ç†</strong>ï¼šHiltç®¡ç†å•ä¾‹ï¼Œé¿å…èµ„æºæµªè´¹</li>
</ul>
<p>è¿™å¥—æ¡†æ¶å°±åƒä¸€ä¸ª"ç½‘ç»œè¯·æ±‚ç®¡å®¶"ï¼šä½ åªéœ€è¦å‘Šè¯‰å®ƒ"æˆ‘è¦ç™»å½•ï¼Œå‚æ•°æ˜¯xxx"ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨å¸®ä½ å‘è¯·æ±‚ã€å¤„ç†å¼‚å¸¸ã€åˆ·æ–°Tokenã€ç¼“å­˜æ•°æ®ï¼Œæœ€åæŠŠæ•´ç†å¥½çš„ç»“æœç»™ä½ ã€‚</p>
<p>æœ€åè¯´å¥å¤§å®è¯ï¼šæ¡†æ¶ä¸æ˜¯è¶Šå¤æ‚è¶Šå¥½ï¼Œé€‚åˆè‡ªå·±é¡¹ç›®çš„æ‰æ˜¯æœ€å¥½çš„ã€‚</p>
<p>åˆšå¼€å§‹å¯ä»¥å…ˆæ­ä¸ªåŸºç¡€ç‰ˆï¼Œéšç€é¡¹ç›®éœ€æ±‚å¢åŠ å†æ…¢æ…¢åŠ åŠŸèƒ½ï¼ˆæ¯”å¦‚åŠ RxJavaæ”¯æŒã€åŠ è¯ä¹¦æ ¡éªŒï¼‰ã€‚</p>
<p>æ¯•ç«Ÿï¼Œèƒ½è§£å†³é—®é¢˜çš„æ¡†æ¶ï¼Œæ‰æ˜¯å¥½æ¡†æ¶ï½</p>
<p>ç¥ä½ ä»æ­¤å‘Šåˆ«"ç½‘ç»œè¯·æ±‚ææƒ§ç—‡"ï¼Œä»£ç è¶Šå†™è¶Šé¡ºï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Day 16ï¼š02. åŸºäº Tauri 2.0 å¼€å‘åå°ç®¡ç†ç³»ç»Ÿ-é¡¹ç›®åˆå§‹åŒ–é…ç½®]]></title>    <link>https://juejin.cn/post/7576821684252016683</link>    <guid>https://juejin.cn/post/7576821684252016683</guid>    <pubDate>2025-11-26T09:24:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576821684252016683" data-draft-id="7576841976927993892" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Day 16ï¼š02. åŸºäº Tauri 2.0 å¼€å‘åå°ç®¡ç†ç³»ç»Ÿ-é¡¹ç›®åˆå§‹åŒ–é…ç½®"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-26T09:24:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”³é˜³"/> <meta itemprop="url" content="https://juejin.cn/user/4353721775165486"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Day 16ï¼š02. åŸºäº Tauri 2.0 å¼€å‘åå°ç®¡ç†ç³»ç»Ÿ-é¡¹ç›®åˆå§‹åŒ–é…ç½®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4353721775165486/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”³é˜³
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T09:24:52.000Z" title="Wed Nov 26 2025 09:24:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70c35e9c8d2f43f09a8c45c7858d7513~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753891&amp;x-signature=vVZYOE1xotETMxheo5tMCO8v%2FXg%3D" alt="image-20251126172101658" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>åœ¨å¼€å§‹å†™ä»£ç ä¹‹å‰ï¼Œæˆ‘å·²ç»å°†å®˜ç½‘ä¸Šçš„æ ¸å¿ƒæ¦‚å¿µå¤§è‡´æ‰«äº†ä¸€éï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Ftauri.app%2Fzh-cn%2Fconcept%2F%25EF%25BC%258C%25E8%25AF%25B4%25E5%25AE%259E%25E8%25AF%259D%25EF%25BC%258C%25E4%25B8%258D%25E7%259F%25A5%25E6%2589%2580%25E4%25BA%2591%25EF%25BC%258C%25E4%25B8%258E%25E6%2588%2591%25E4%25B9%258B%25E5%2589%258D%25E7%2586%259F%25E6%2582%2589%25E7%259A%2584" target="_blank" title="https://tauri.app/zh-cn/concept/%EF%BC%8C%E8%AF%B4%E5%AE%9E%E8%AF%9D%EF%BC%8C%E4%B8%8D%E7%9F%A5%E6%89%80%E4%BA%91%EF%BC%8C%E4%B8%8E%E6%88%91%E4%B9%8B%E5%89%8D%E7%86%9F%E6%82%89%E7%9A%84" ref="nofollow noopener noreferrer">tauri.app/zh-cn/conceâ€¦</a> <code>web</code> ç«¯ç›¸å·®ç”šè¿œï¼Œä¸è¿‡æˆ‘å¥½åƒæ‘¸åˆ°äº†ä¸€äº›é—¨è·¯ï¼Œä»¥ä¸‹éƒ½æ˜¯æˆ‘ä¸ªäººè§è§£ï¼Œå¯èƒ½æœ‰æ‰€åå·®ï¼Œæ¬¢è¿æŒ‡æ­£ã€‚<code>Tauri</code> å¼€å‘çš„åº”ç”¨ç¨‹åºåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œå‰ç«¯å’Œåç«¯ï¼Œå…¶å®æœ¬è´¨ä¸Šä¹Ÿæ˜¯ C/S æ¶æ„ã€‚å‰ç«¯å°±å’Œä¹‹å‰ <code>web</code> å¼€å‘ä¸€æ ·ï¼Œä½ å¯ä»¥é€‰æ‹©è‡ªå·±æ“…é•¿çš„ UI æ¡†æ¶ï¼Œè€Œåç«¯åˆ™æ˜¯åŸºäº <code>Rust</code> æ¥åšçš„ï¼Œå¯ä»¥å®Œæˆä¸šåŠ¡é€»è¾‘æ“ä½œï¼Œç³»ç»Ÿè°ƒç”¨ç­‰ç­‰ã€‚æˆ‘çš„è„‘æµ·é‡Œç›®å‰ç»“æ„æ˜¯è¿™æ ·çš„ï¼Œå¯¹åº”ä»£ç çš„ç›®å½•ï¼Œå‰ç«¯å°±æ˜¯ <code>src</code> ä¸‹çš„ä»£ç ï¼Œåç«¯å°±æ˜¯ <code>src-tauri</code>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb6e3236740745338f15aafefbba6ac2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753891&amp;x-signature=hwimUXiBU0In96rVZE4EX9B3l6w%3D" alt="image-20251126112339786" loading="lazy"/></p>
<p>çœ‹åˆ°è¿™å…¶å®å°±æ¯”è¾ƒç†Ÿæ‚‰äº†ï¼ŒæŠŠ <code>Rust</code> æ¢æˆæˆ‘ä»¬ç†Ÿæ‚‰çš„ <code>Java</code>ï¼Œåˆå›åˆ°äº† <code>web</code> å¼€å‘çš„æ¨¡å¼äº†ã€‚å½“ç„¶å¦‚æœä½ æ„¿æ„æ·±å…¥å­¦ä¹  <code>Rust</code>ï¼Œå®Œå…¨ç”¨ <code>Rust</code> æ¥æ„å»ºæœåŠ¡ç«¯ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>
<p>æ‰€ä»¥æœ€åå®é™…ä¸Šæˆ‘çš„é¡¹ç›®å°±å˜æˆäº†è¿™æ ·ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d6d0b6d4eaa48878d653b986e55d88c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753891&amp;x-signature=n835ZsPkv2diTIKKQT99%2Bg01KA8%3D" alt="image-20251126113509775" loading="lazy"/></p>
<p>è¿™å°±å¾ˆç†Ÿæ‚‰äº†ï¼Œ<code>Tauri</code> ä¼¼ä¹åªæ˜¯ç®€å•çš„å¥—å£³äº†ã€‚åæ¥ä»”ç»†æƒ³æƒ³å¥½åƒä¹Ÿä¸æ˜¯ï¼Œç›¸æ¯”äº <code>Web</code> ç«¯å¤šäº†ä¸€äº›è®¿é—®ç³»ç»ŸåŸç”Ÿ <code>Api</code> çš„èƒ½åŠ›ã€‚</p>
<p>âœ… <strong>Vue3</strong>ï¼šå‰ç«¯å¼€å‘ä½“éªŒå¥½</p>
<p>âœ… <strong>Java åç«¯</strong>ï¼šæˆç†Ÿç¨³å®šï¼Œå¼€å‘æ•ˆç‡é«˜</p>
<p>âœ… <strong>Tauri</strong>ï¼šæä¾›æ¡Œé¢åº”ç”¨å¤–å£³ï¼Œæœªæ¥å¯æ‰©å±•ç³»ç»ŸåŠŸèƒ½</p>
<h2 data-id="heading-1">äºŒã€æŠ€æœ¯æ ˆé€‰æ‹©</h2>
<h3 data-id="heading-2">å‰ç«¯ï¼ˆTauriï¼‰ï¼š</h3>
<ul>
<li>Vue3 + TypeScript</li>
<li>UI ç»„ä»¶åº“ï¼šAnt Design  Vue</li>
<li>HTTP å®¢æˆ·ç«¯ï¼šaxios</li>
<li>çŠ¶æ€ç®¡ç†ï¼šPinia</li>
</ul>
<h3 data-id="heading-3">åç«¯ï¼ˆJavaï¼‰ï¼š</h3>
<ul>
<li>
<p>Spring Boot + Sa-Token</p>
</li>
<li>
<p>æ•°æ®åº“ï¼šPostgreSQL + MyBatis-Plus</p>
</li>
<li>
<p>API æ–‡æ¡£ï¼šSwagger</p>
</li>
<li>
<p>éƒ¨ç½²ï¼šDocker + äº‘æœåŠ¡å™¨</p>
</li>
</ul>
<blockquote>
<p>æˆªæ­¢ç›®å‰ 2025.11.26 æˆ‘ä¼šä½¿ç”¨å½“å‰æ‰€æœ‰æœ€æ–°ç¨³å®šç‰ˆæœ¬è¿›è¡Œå¼€å‘ã€‚æˆ‘å»ºè®®æ˜¯æˆ‘å½“å‰çš„æ–‡ç« ä½œä¸ºè¾…åŠ©ï¼Œä»¥å®˜æ–¹æ–‡æ¡£ä¸ºä¸»ï¼Œæˆ‘ä¼šåœ¨å…³é”®ä½ç½®ç»™å‡ºæ–‡æ¡£é“¾æ¥ã€‚</p>
</blockquote>
<h2 data-id="heading-4">ä¸‰ã€å®Œæˆå‰åç«¯æ•°æ®äº¤äº’</h2>
<h3 data-id="heading-5">3.1. ç›®å½•æœºæ„è§„åˆ’</h3>
<p>é¦–å…ˆå’Œå¸¸è§„ <code>Vue</code> é¡¹ç›®ä¸€æ ·ï¼Œè§„åˆ’å¥½æˆ‘ä»¬çš„ç›®å½•ç»“æ„ï¼Œå¤§è‡´å¦‚ä¸‹</p>
<pre><code class="hljs language-bash" lang="bash">src               
â”œâ”€ api            <span class="hljs-comment"># API æ¥å£   </span>
â”œâ”€ assets          <span class="hljs-comment"># é™æ€èµ„æº</span>
â”œâ”€ components       <span class="hljs-comment"># é€šç”¨ç»„ä»¶   </span>
â”œâ”€ layouts         <span class="hljs-comment"># å¸ƒå±€ç»„ä»¶     </span>
â”œâ”€ router          <span class="hljs-comment"># è·¯ç”±é…ç½®  </span>
â”œâ”€ stores      		 <span class="hljs-comment"># çŠ¶æ€ç®¡ç†(Pinia)  </span>
â”œâ”€ utils      		 <span class="hljs-comment"># å·¥å…·å‡½æ•° </span>
â”œâ”€ views     		 <span class="hljs-comment"># é¡µé¢ç»„ä»¶     </span>
â”œâ”€ App.vue        
â”œâ”€ main.ts        
â””â”€ vite-env.d.ts  

</code></pre>
<h3 data-id="heading-6">3.2. å®‰è£…æ•´åˆå¸¸ç”¨ä¾èµ–</h3>
<p>å®‰è£…æ‰€æœ‰ä¾èµ–</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Vue ç”Ÿæ€</span>
pnpm add vue-router@4 pinia pinia-plugin-persistedstate
<span class="hljs-comment"># UI ç»„ä»¶åº“ (Ant Design Vue)</span>
pnpm add ant-design-vue@4.x @ant-design/icons-vue
<span class="hljs-comment"># æ ·å¼é¢„å¤„ç†</span>
pnpm add install less 
<span class="hljs-comment"># HTTP å®¢æˆ·ç«¯</span>
pnpm add install axios
</code></pre>
<p>ä¸€é”®å®‰è£…æ‰€æœ‰</p>
<pre><code class="hljs language-bash" lang="bash">pnpm add vue-router@4 pinia pinia-plugin-persistedstate ant-design-vue@4.x @ant-design/icons-vue less  axios
</code></pre>
<h4 data-id="heading-7">3.2.1. æ•´åˆ Ant Design Vue</h4>
<blockquote>
<p>è¿™é‡Œæˆ‘å¸Œæœ›èƒ½å¤Ÿå®ç°è‡ªåŠ¨æŒ‰éœ€å¯¼å…¥ï¼Œå®˜æ–¹æ–‡æ¡£è¿™é‡Œå†™çš„ä¸å¤Ÿæ¸…æ¥šï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.antdv.com%2Fdocs%2Fvue%2Fgetting-started-cn%25E3%2580%2582%25E6%2588%2591%25E4%25BB%25AC%25E5%258F%25AF%25E4%25BB%25A5%25E5%2580%259F%25E5%258A%25A9" target="_blank" title="https://www.antdv.com/docs/vue/getting-started-cn%E3%80%82%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E5%80%9F%E5%8A%A9" ref="nofollow noopener noreferrer">www.antdv.com/docs/vue/geâ€¦</a> <code>unplugin-vue-components</code> å’Œ <code>unplugin-auto-import</code>è¿™ä¸¤æ¬¾æ’ä»¶æ¥å®Œæˆã€‚</p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash">pnpm install -D unplugin-vue-components unplugin-auto-import
</code></pre>
<p>åœ¨æ’ä»¶çš„ <code>GitHub</code> ä»“åº“ä¸­å¯ä»¥çœ‹åˆ°æ˜¯æ”¯æŒçš„ï¼Œæ‰€ä»¥æ— éœ€æ‹…å¿ƒã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Funplugin%2Funplugin-auto-import" target="_blank" title="https://github.com/unplugin/unplugin-auto-import" ref="nofollow noopener noreferrer">github.com/unplugin/unâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Funplugin%2Funplugin-vue-components" target="_blank" title="https://github.com/unplugin/unplugin-vue-components" ref="nofollow noopener noreferrer">github.com/unplugin/unâ€¦</a></p>
<p><strong>åœ¨ <code>vite.config.js</code> ä¸­é…ç½®æŒ‰éœ€å¼•å…¥ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">AutoImport</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'unplugin-auto-import/vite'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Components</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'unplugin-vue-components/vite'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AntDesignVueResolver</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'unplugin-vue-components/resolvers'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-comment">// ...</span>
    <span class="hljs-title class_">AutoImport</span>({
      <span class="hljs-attr">resolvers</span>: [<span class="hljs-title class_">AntDesignVueResolver</span>()],
    }),
    <span class="hljs-title class_">Components</span>({
      <span class="hljs-attr">resolvers</span>: [
        <span class="hljs-title class_">AntDesignVueResolver</span>({
           <span class="hljs-attr">importStyle</span>: <span class="hljs-string">'less'</span>, <span class="hljs-comment">// ä½¿ç”¨ less</span>
        }),
      ],
    }),
  ],
})
</code></pre>
<blockquote>
<p>è¿™é‡Œè¦æ³¨æ„ï¼Œ å¿…é¡»ç”¨ <code>less</code></p>
</blockquote>
<p>éšä¾¿æ‰¾ä¸€ä¸ªç»„ä»¶ï¼Œæµ‹è¯•ä¸€ä¸‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0834b46076024be48455c818b6b990ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753891&amp;x-signature=6%2FMVZNzjYD68VOeuynUf2SxCwIU%3D" alt="image-20251126153900116" loading="lazy"/></p>
<h4 data-id="heading-8">3.2.2. æ•´åˆ Vue Router</h4>
<p>æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Frouter.vuejs.org%2Fzh%2Finstallation.html" target="_blank" title="https://router.vuejs.org/zh/installation.html" ref="nofollow noopener noreferrer">router.vuejs.org/zh/installaâ€¦</a></p>
<p>åˆ›å»ºè·¯ç”±å®ä¾‹ <code>router/index.js</code></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { createRouter, createWebHashHistory } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>

<span class="hljs-keyword">import</span> <span class="hljs-title class_">HomeView</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./HomeView.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">AboutView</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./AboutView.vue'</span>

<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>({
    <span class="hljs-attr">history</span>: <span class="hljs-title function_">createWebHashHistory</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">BASE_URL</span>),
    <span class="hljs-attr">routes</span>: [
        { <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">HomeView</span> },
        { <span class="hljs-attr">path</span>: <span class="hljs-string">'/about'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">AboutView</span> },
    ]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router

</code></pre>
<blockquote>
<p>ä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œæˆ‘å®šä¹‰äº†ä¸¤ä¸ªé¡µé¢ç»„ä»¶ã€‚</p>
</blockquote>
<p><code>main.ts</code> ä¸­æ³¨å†Œè·¯ç”±</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./App.vue"</span>;
<span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">'./router'</span>


<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>).<span class="hljs-title function_">use</span>(router).<span class="hljs-title function_">mount</span>(<span class="hljs-string">"#app"</span>);

</code></pre>
<p>åœ¨ <code>app.vue</code> ä¸­æµ‹è¯•</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;h1&gt;Hello App!&lt;/h1&gt;
  &lt;p&gt;&lt;strong&gt;Current route path:&lt;/strong&gt; {{ $route.fullPath }}&lt;/p&gt;
  &lt;nav&gt;
    &lt;RouterLink to="/"&gt;Go to Home&lt;/RouterLink&gt;
    &lt;RouterLink to="/about"&gt;Go to About&lt;/RouterLink&gt;
  &lt;/nav&gt;
  &lt;main&gt;
    &lt;RouterView /&gt;
  &lt;/main&gt;
&lt;/template&gt;
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c8e06f1842ad4659a32549bc0cae73bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753891&amp;x-signature=25BdHKyoEbylpWLuWo%2B3MDabM1c%3D" alt="PixPin_2025-11-26_16-14-56.gif" loading="lazy"/></p>
<h4 data-id="heading-9">3.2.3. æ•´åˆ pinia &amp; pinia-plugin-persistedstate</h4>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpinia.vuejs.org%2Fzh%2Fintroduction.html" target="_blank" title="https://pinia.vuejs.org/zh/introduction.html" ref="nofollow noopener noreferrer">pinia.vuejs.org/zh/introducâ€¦</a></p>
<p><strong>æŒ‰æ¨¡å—åŒ–å®šä¹‰ store</strong>ï¼Œä»¥ä¸‹ä¸ºç›®å½•ç»“æ„</p>
<pre><code class="hljs">stores         
â”œâ”€ modules     
â”‚  â””â”€ user.ts  
â””â”€ index.ts    
</code></pre>
<ul>
<li>åˆ›å»º <code>src/stores/index.ts</code></li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { createPinia } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>

<span class="hljs-keyword">const</span> store = <span class="hljs-title function_">createPinia</span>()

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> store
</code></pre>
<ul>
<li><code>main.ts</code> é‡Œå¼•å…¥</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">//main.ts</span>
...
<span class="hljs-comment">// å¼•å…¥ pinia</span>
<span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">'./stores'</span>

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)
app.<span class="hljs-title function_">use</span>(store)
...
</code></pre>
<ul>
<li>modules: æŒ‰æ¨¡å—å®šä¹‰å¯¹åº”çš„ store, user.ts è¡¨ç¤ºç”¨æˆ·ç›¸å…³æ•°æ®å­˜å‚¨çš„ä»“åº“</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// user.ts</span>
<span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>

<span class="hljs-comment">// ä½ å¯ä»¥å¯¹ `defineStore()` çš„è¿”å›å€¼è¿›è¡Œä»»æ„å‘½åï¼Œä½†æœ€å¥½ä½¿ç”¨ store çš„åå­—ï¼ŒåŒæ—¶ä»¥ `use` å¼€å¤´ä¸”ä»¥ `Store` ç»“å°¾ã€‚(æ¯”å¦‚ `useUserStore`ï¼Œ`useCartStore`ï¼Œ`useProductStore`)</span>
<span class="hljs-comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä½ çš„åº”ç”¨ä¸­ Store çš„å”¯ä¸€ IDã€‚</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUserInfoStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'userInfo'</span>, {
    <span class="hljs-comment">// å…¶ä»–é…ç½®...</span>
})
</code></pre>
<blockquote>
<p><strong>åœ¨å¼•å…¥ pinia çš„æ—¶å€™åšä¸€äº›è°ƒæ•´ï¼Œä¸ç›´æ¥åœ¨ main.ts é‡Œå¼•å…¥ï¼Œè¿™æ ·åšçš„å¥½å¤„åœ¨äºï¼Œä¹‹åå¯¹äº pinia é›†æˆä¸€äº›æ’ä»¶ï¼Œæˆ–è€…åšä¸€äº›å…¶ä»–é…ç½®ï¼Œå¯ä»¥ç‹¬ç«‹å‡ºæ¥ï¼Œä¸ç”¨å…¨éƒ¨å †ç§¯åœ¨ main.ts ä¸­</strong></p>
</blockquote>
<ul>
<li>ä½¿ç”¨ <code>pinia-plugin-persistedstate</code> æŒä¹…åŒ–</li>
</ul>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpraz.codeberg.page%2Fpinia-plugin-persistedstate%2Fguide%2F%23usage" target="_blank" title="https://praz.codeberg.page/pinia-plugin-persistedstate/guide/#usage" ref="nofollow noopener noreferrer">praz.codeberg.page/pinia-plugiâ€¦</a></p>
<blockquote>
<p>åœ¨ <code>web</code> ç«¯çš„æ—¶å€™å¯ä»¥ç”¨ <code>LocalStorage</code>ã€<code>SessionStorage</code> ç­‰ï¼Œä½†æ˜¯æ¡Œé¢ç«¯æˆ‘å°±ä¸ç¡®å®šäº†ï¼Œæˆ‘å»æœäº†ä¸€ä¸‹ï¼Œæ®è¯´æ˜¯æ”¯æŒ <code>LocalStorage</code> çš„ï¼Œä½†æ˜¯æœ‰å±€é™æ€§ï¼Œæ¨èäº†ä¸€ä¸ª <code>Tauri Store</code>ï¼Œè¿™ä¸ªç­‰åˆ°å…·ä½“ä½¿ç”¨çš„æ—¶å€™å†å»ç ”ç©¶ï¼Œä»Šå¤©ä»»åŠ¡å°±æ˜¯å…ˆæ•´åˆä¸Šã€‚</p>
</blockquote>
<p>å°†æ’ä»¶æ·»åŠ åˆ° <code>pinia</code> å®ä¾‹ä¸Š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ./stores/index.ts</span>
<span class="hljs-keyword">import</span> { createPinia } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>
<span class="hljs-keyword">import</span> piniaPluginPersistedstate <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia-plugin-persistedstate'</span>

<span class="hljs-keyword">const</span> store = <span class="hljs-title function_">createPinia</span>()

store.<span class="hljs-title function_">use</span>(piniaPluginPersistedstate)

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> store
</code></pre>
<p>åªéœ€è¦åœ¨å®šä¹‰çš„ <code>store</code> é‡Œå¼€å¯é…ç½®å³å¯å®ŒæˆæŒä¹…åŒ–æ“ä½œ</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUserInfoStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'userInfo'</span>, {
    <span class="hljs-comment">// å…¶ä»–é…ç½®...</span>
    <span class="hljs-attr">persist</span>: <span class="hljs-literal">true</span>   
})
</code></pre>
<blockquote>
<p>é»˜è®¤ä½¿ç”¨çš„å°±æ˜¯ <code>LocalStorage</code>ï¼Œè¿™é‡Œæˆ‘æš‚æ—¶ä¸æµ‹è¯•äº†ï¼Œç­‰åˆ°ç”¨çš„æ—¶å€™æ›¿æ¢ä¸º <code>Tauri Store</code> å†ç ”ç©¶ã€‚</p>
</blockquote>
<h4 data-id="heading-10">3.2.4. æ•´åˆ Axios</h4>
<p>å®šä¹‰è¯·æ±‚å®ä¾‹ï¼Œè¿™é‡Œæˆ‘ç›´æ¥ä»ä¹‹å‰é¡¹ç›®ä¸­æ‹·è´è¿‡æ¥çš„ï¼ŒåŸºæœ¬ä¸Šéƒ½å·®ä¸å¤šã€‚</p>
<p>åˆ›å»º <code>utils/request.ts</code></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { message } <span class="hljs-keyword">from</span> <span class="hljs-string">'ant-design-vue'</span>
<span class="hljs-keyword">import</span> axios, { <span class="hljs-keyword">type</span> <span class="hljs-title class_">AxiosInstance</span>, <span class="hljs-keyword">type</span> <span class="hljs-title class_">AxiosRequestConfig</span>, <span class="hljs-keyword">type</span> <span class="hljs-title class_">AxiosResponse</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>

<span class="hljs-keyword">type</span> <span class="hljs-title class_">RequestConfig</span>&lt;T = <span class="hljs-built_in">unknown</span>&gt; = <span class="hljs-title class_">AxiosRequestConfig</span> &amp; {
    <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œæ‰©å±•è‡ªå®šä¹‰é…ç½®</span>
    mock?: <span class="hljs-built_in">boolean</span> <span class="hljs-comment">// æ˜¯å¦ä½¿ç”¨mockæ•°æ®</span>
    mockData?: T <span class="hljs-comment">// mockæ•°æ®</span>
    noErrorToast?: <span class="hljs-built_in">boolean</span> <span class="hljs-comment">// æ˜¯å¦ä¸æ˜¾ç¤ºé”™è¯¯æç¤º</span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Request</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-attr">instance</span>: <span class="hljs-title class_">AxiosInstance</span> <span class="hljs-comment">// axioså®ä¾‹</span>

    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">instance</span> = axios.<span class="hljs-title function_">create</span>({
            <span class="hljs-attr">baseURL</span>: <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_APP_BASE_API</span>,
            <span class="hljs-attr">timeout</span>: <span class="hljs-number">180000</span>,
            <span class="hljs-attr">headers</span>: {
                <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json;charset=UTF-8'</span>,
            },
        })

        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupInterceptors</span>()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-title function_">setupInterceptors</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// è¯·æ±‚æ‹¦æˆªå™¨</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">instance</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
            <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> config,
            <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error),
        )

        <span class="hljs-comment">// å“åº”æ‹¦æˆªå™¨</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">instance</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
            <span class="hljs-function">(<span class="hljs-params">response: AxiosResponse</span>) =&gt;</span> {
                <span class="hljs-comment">// ä¸šåŠ¡çŠ¶æ€ç å¤„ç†</span>
                <span class="hljs-keyword">if</span> (response.<span class="hljs-property">data</span>.<span class="hljs-property">code</span> !== <span class="hljs-number">200</span>) {
                    <span class="hljs-keyword">const</span> config = response.<span class="hljs-property">config</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">RequestConfig</span>
                    <span class="hljs-keyword">if</span> (!config.<span class="hljs-property">noErrorToast</span>) {
                        message.<span class="hljs-title function_">error</span>(response.<span class="hljs-property">data</span>.<span class="hljs-property">message</span> || <span class="hljs-string">'è¯·æ±‚å¤±è´¥'</span>)
                    }
                    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(response.<span class="hljs-property">data</span>)
                }
                <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>
            },
            <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
                <span class="hljs-comment">// å¤„ç†mockæ•°æ®</span>
                <span class="hljs-keyword">if</span> (error.<span class="hljs-property">isMock</span>) {
                    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(error.<span class="hljs-property">data</span>)
                }
                <span class="hljs-keyword">const</span> config = error.<span class="hljs-property">config</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">RequestConfig</span> | <span class="hljs-literal">undefined</span>

                <span class="hljs-comment">// åªæœ‰é…ç½®äº†ä¸è·³è¿‡é”™è¯¯å¤„ç†æ—¶æ‰æ˜¾ç¤ºé”™è¯¯æç¤º</span>
                <span class="hljs-keyword">if</span> (!config?.<span class="hljs-property">noErrorToast</span>) {
                    <span class="hljs-keyword">let</span> msg = <span class="hljs-string">'è¯·æ±‚é”™è¯¯'</span>
                    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">response</span>) {
                        <span class="hljs-keyword">switch</span> (error.<span class="hljs-property">response</span>.<span class="hljs-property">status</span>) {
                            <span class="hljs-keyword">case</span> <span class="hljs-number">400</span>:
                                msg = <span class="hljs-string">'è¯·æ±‚å‚æ•°é”™è¯¯'</span>
                                <span class="hljs-keyword">break</span>
                            <span class="hljs-keyword">case</span> <span class="hljs-number">401</span>:
                                msg = <span class="hljs-string">'æœªæˆæƒï¼Œè¯·ç™»å½•'</span>
                                <span class="hljs-keyword">break</span>
                            <span class="hljs-keyword">case</span> <span class="hljs-number">403</span>:
                                msg = <span class="hljs-string">'æ‹’ç»è®¿é—®'</span>
                                <span class="hljs-keyword">break</span>
                            <span class="hljs-keyword">case</span> <span class="hljs-number">404</span>:
                                msg = <span class="hljs-string">'è¯·æ±‚èµ„æºä¸å­˜åœ¨'</span>
                                <span class="hljs-keyword">break</span>
                            <span class="hljs-keyword">case</span> <span class="hljs-number">500</span>:
                                msg = <span class="hljs-string">'æœåŠ¡å™¨å¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•'</span>
                                <span class="hljs-keyword">break</span>
                            <span class="hljs-attr">default</span>:
                                msg = error.<span class="hljs-property">response</span>.<span class="hljs-property">data</span>?.<span class="hljs-property">message</span> || <span class="hljs-string">`æœåŠ¡å™¨é”™è¯¯: <span class="hljs-subst">${error.response.status}</span>`</span>
                        }
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">request</span>) {
                        msg = <span class="hljs-string">'è¯·æ±‚è¶…æ—¶æˆ–ç½‘ç»œå¼‚å¸¸'</span>
                    } <span class="hljs-keyword">else</span> {
                        msg = error.<span class="hljs-property">message</span> || <span class="hljs-string">'æœªçŸ¥é”™è¯¯'</span>
                    }
                    message.<span class="hljs-title function_">error</span>(msg)
                }
                <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)
            },
        )
    }

    <span class="hljs-comment">// å°è£…æ ¸å¿ƒè¯·æ±‚æ–¹æ³•</span>
    <span class="hljs-keyword">public</span> request&lt;T = <span class="hljs-built_in">unknown</span>&gt;(<span class="hljs-attr">config</span>: <span class="hljs-title class_">RequestConfig</span>&lt;T&gt;): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
        <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®ç›´æ¥è¿”å›</span>
        <span class="hljs-keyword">if</span> (config.<span class="hljs-property">mock</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(config.<span class="hljs-property">mockData</span> <span class="hljs-keyword">as</span> T)
        }

        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">instance</span>(config)
    }

    <span class="hljs-keyword">public</span> get&lt;T = <span class="hljs-built_in">unknown</span>&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, config?: <span class="hljs-title class_">RequestConfig</span>&lt;T&gt;): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>({ ...config, <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>, url })
    }

    <span class="hljs-keyword">public</span> post&lt;T = <span class="hljs-built_in">unknown</span>&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, data?: <span class="hljs-built_in">unknown</span>, config?: <span class="hljs-title class_">RequestConfig</span>&lt;T&gt;): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>({ ...config, <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>, url, data })
    }

    <span class="hljs-keyword">public</span> put&lt;T = <span class="hljs-built_in">unknown</span>&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, data?: <span class="hljs-built_in">unknown</span>, config?: <span class="hljs-title class_">RequestConfig</span>&lt;T&gt;): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>({ ...config, <span class="hljs-attr">method</span>: <span class="hljs-string">'PUT'</span>, url, data })
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">delete</span>&lt;T = <span class="hljs-built_in">unknown</span>&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, data?: <span class="hljs-built_in">unknown</span>, config?: <span class="hljs-title class_">RequestConfig</span>&lt;T&gt;): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>({ ...config, <span class="hljs-attr">method</span>: <span class="hljs-string">'DELETE'</span>, url, data })
    }
}

<span class="hljs-keyword">const</span> http = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Request</span>()

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> http

</code></pre>
<p>å®šä¹‰ä¸ªæ¥å£æµ‹è¯•ä¸€ä¸‹</p>
<p>åˆ›å»º <code>api/user.ts</code></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> http <span class="hljs-keyword">from</span> <span class="hljs-string">'../utils/request'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> userApi = {
    <span class="hljs-comment">// è·å–ç”¨æˆ·åˆ—è¡¨</span>
    <span class="hljs-attr">getUserInfo</span>: <span class="hljs-function">() =&gt;</span>
        http.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/user/info'</span>),

}
</code></pre>
<p>åœ¨ <code>app.vue</code> ä¸­æµ‹è¯•</p>
<pre><code class="hljs language-vue" lang="vue">&lt;a-button type="primary" @click="getUserInfo"&gt;è·å–ç”¨æˆ·ä¿¡æ¯&lt;/a-button&gt;
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript">&lt;script setup lang=<span class="hljs-string">"ts"</span>&gt;
<span class="hljs-keyword">import</span> { userApi } <span class="hljs-keyword">from</span> <span class="hljs-string">'./api/user'</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">getUserInfo</span> = (<span class="hljs-params"/>) =&gt; {
  userApi.<span class="hljs-title function_">getUserInfo</span>()
}

&lt;/script&gt;
</code></pre>
<p>åœ¨åº”ç”¨çª—å£ç‚¹å‡»æŒ‰é’®ï¼ŒæŒ‰ <code>F12</code>ï¼Œçœ‹åˆ°è¯·æ±‚å‡ºå»äº†ï¼Œå³è¡¨ç¤ºæˆåŠŸäº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c94b2860a83481989b65ee375b7eab8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753891&amp;x-signature=9AHuJDg4NYLVweMEeAH43fnOW3Q%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-11">å››ã€æ€»ç»“</h2>
<p>åˆ°å¤´æ¥å‘ç°åˆå›åˆ°äº†ç†Ÿæ‚‰çš„é¢†åŸŸï¼Œå¦‚æœä½ ä¸æƒ³åšæˆæ¡Œé¢ç«¯ï¼Œç›´æ¥ä½¿ç”¨ vue è„šæ‰‹æ¶æ­å»ºé¡¹ç›®ï¼Œæ‰€æœ‰æ•´åˆæ­¥éª¤å‡ ä¹ä¸€æ¨¡ä¸€æ ·ã€‚ä»Šå¤©å°±å…ˆè¿™æ ·ï¼Œç°åœ¨æœ‰ä¸ªé—®é¢˜ï¼Œå…ˆåšå‰ç«¯ç”¨ <code>mock</code> æ•°æ®åšæ¥å£ï¼Œå®ŒæˆåŸºç¡€åŠŸèƒ½åï¼Œå†å¼€å‘æœåŠ¡ç«¯ï¼Œè¿˜æ˜¯ç›´æ¥åŒæ—¶è¿›è¡Œã€‚å¦‚æœæœ‰äººçœ‹åˆ°è¿™é‡Œï¼Œä½ å¸Œæœ›é‡‡ç”¨å“ªç§æ–¹å¼å‘¢ï¼Ÿæ¬¢è¿ç•™è¨€ã€‚</p>
<p><strong>åƒé‡Œä¹‹è¡Œï¼Œå§‹äºè¶³ä¸‹ã€‚ä½ çš„â€œä¸ªäººå…¬å¸â€ä»è¿™ç¬¬ä¸€ä¸ª2å°æ—¶å¼€å§‹ã€‚æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„è¿›å±•æˆ–é‡åˆ°çš„å¡ç‚¹ï¼Œæˆ‘ä¼šé€ä¸€æŸ¥çœ‹ï¼Œå°½å¯èƒ½çš„å¸®åŠ©è§£å†³ã€‚æˆ‘ä»¬ä¸‹ä¸€ç¯‡æ–‡ç« è§ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025 AIç¼–ç¨‹å¤ç›˜ï¼šä» Copilot åˆ° Agentï¼ŒCursor ä¸ Windsurf çš„"å¤ºå«¡ä¹‹æˆ˜"ä¸ MCP çš„é‡æœ›]]></title>    <link>https://juejin.cn/post/7576827115968086051</link>    <guid>https://juejin.cn/post/7576827115968086051</guid>    <pubDate>2025-11-26T09:13:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576827115968086051" data-draft-id="7576843726010908698" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025 AIç¼–ç¨‹å¤ç›˜ï¼šä» Copilot åˆ° Agentï¼ŒCursor ä¸ Windsurf çš„&quot;å¤ºå«¡ä¹‹æˆ˜&quot;ä¸ MCP çš„é‡æœ›"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-11-26T09:13:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="trsoliu"/> <meta itemprop="url" content="https://juejin.cn/user/4248168659433607"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025 AIç¼–ç¨‹å¤ç›˜ï¼šä» Copilot åˆ° Agentï¼ŒCursor ä¸ Windsurf çš„"å¤ºå«¡ä¹‹æˆ˜"ä¸ MCP çš„é‡æœ›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4248168659433607/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    trsoliu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T09:13:19.000Z" title="Wed Nov 26 2025 09:13:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å…„å¼Ÿä»¬ï¼Œ2025å¹´å¿«è¿‡å®Œäº†ã€‚å›é¡¾è¿™ä¸€å¹´ï¼Œå¦‚æœè¯´ 2023 å¹´æ˜¯ Copilot çš„"å‰¯é©¾é©¶"å…ƒå¹´ï¼Œé‚£ 2025 å¹´ç»å¯¹æ˜¯ <strong>Agentï¼ˆæ™ºèƒ½ä½“ï¼‰</strong> å½»åº•æ¥ç®¡ IDE çš„ä¸€å¹´ã€‚</p>
<p>ä» Cursor çš„ Composer æ¨¡å¼åˆ° Windsurf çš„ Cascadeï¼ŒAI ä¸å†ä»…ä»…æ˜¯é‚£ä¸ªå¸®ä½ è¡¥å…¨ <code>for</code> å¾ªç¯çš„å°åŠ©æ‰‹ï¼Œè€Œæ˜¯å¼€å§‹è¿›åŒ–æˆèƒ½"æ¥ç®¡"æ•´ä¸ªé¡¹ç›®çš„åˆçº§å·¥ç¨‹å¸ˆã€‚ä½œä¸ºæ¶æ„å¸ˆï¼Œåœ¨äº«å—å·¥å…·ä¾¿åˆ©çš„åŒæ—¶ï¼Œæˆ‘ä»¬æ›´ä¸èƒ½å¿½è§† Anthropic æ¨å‡ºçš„ <strong>MCP (Model Context Protocol)</strong> åè®®â€”â€”å®ƒæ­£åœ¨æ‚„æ‚„è§£å†³ AI ä¸æ•°æ®è¿æ¥çš„"æœ€åä¸€å…¬é‡Œ"é—®é¢˜ã€‚</p>
<p>ä»Šå¤©è¿™ç¯‡ï¼Œå¸¦å¤§å®¶å¤ç›˜ä¸€ä¸‹ä»Šå¹´çš„ IDE "ç¥ä»™æ‰“æ¶"ï¼Œä»¥åŠä½œä¸ºå¼€å‘è€…æˆ‘ä»¬è¯¥å¦‚ä½•çœ‹é€èƒŒåçš„æŠ€æœ¯è¶‹åŠ¿ã€‚</p>
<h2 data-id="heading-1">1. åˆ«äº†ï¼Œè‡ªåŠ¨è¡¥å…¨ï¼›ä½ å¥½ï¼ŒCascade ä¸ Composer</h2>
<p>ä»Šå¹´æœ€å¤§çš„ä½“æ„Ÿå˜åŒ–æ˜¯ï¼šæˆ‘ä»¬ä¸å†æ»¡è¶³äº"Tabä¸€ä¸‹"è¡¥å…¨ä¸€è¡Œä»£ç ï¼Œè€Œæ˜¯ä¹ æƒ¯æŠŠæ•´ä¸ª Feature äº¤ç»™ AIã€‚</p>
<h3 data-id="heading-2">Cursor Composer (Agent Mode)</h3>
<p>Cursor åœ¨ä»Šå¹´ä¾ç„¶è¡¨ç°å¼ºåŠ¿ã€‚ç‰¹åˆ«æ˜¯å®ƒçš„ Composer Agent æ¨¡å¼ï¼Œå·²ç»èƒ½å¤Ÿè‡ªä¸»è¯»å–æ–‡æ¡£ã€è¿è¡Œç»ˆç«¯å‘½ä»¤ã€ç”šè‡³è‡ªæˆ‘ä¿®æ­£æŠ¥é”™ã€‚</p>
<p>ä»¥å‰å³ä½¿æœ‰ AIï¼Œä½ è¿˜å¾—è‡ªå·±åˆ‡æ–‡ä»¶ã€è‡ªå·±è¿è¡Œæµ‹è¯•ã€‚ç°åœ¨ï¼Œä½ ç»™å®ƒä¸€ä¸ªéœ€æ±‚ï¼š"å¸®æˆ‘æŠŠç™»å½•æ¨¡å—ä» Session è¿ç§»åˆ° JWTï¼Œå¹¶æ›´æ–°ç›¸å…³æµ‹è¯•"ï¼Œå®ƒå°±èƒ½åƒä¸€ä¸ªä¸çŸ¥ç–²å€¦çš„å®ä¹ ç”Ÿä¸€æ ·ï¼Œè‡ªå·±å»æ”¹ä»£ç ã€è·‘æµ‹è¯•ã€ä¿® Bugï¼Œæœ€åç»™ä½ ä¸€ä¸ª ready-to-merge çš„ PRã€‚</p>
<h3 data-id="heading-3">Windsurf Cascade</h3>
<p>ä½œä¸ºå¼ºæœ‰åŠ›çš„æŒ‘æˆ˜è€…ï¼ŒCodeium æ¨å‡ºçš„ Windsurf å‡­å€Ÿ <code>Cascade</code> åŠŸèƒ½ä¸€æˆ˜æˆåã€‚å®ƒçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äº <strong>æ·±åº¦ä¸Šä¸‹æ–‡æ„ŸçŸ¥ï¼ˆDeep Context Awarenessï¼‰</strong>ã€‚</p>
<p>ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰è¿™ç§ç—›ç‚¹ï¼šç”¨ Cursor æ—¶ï¼Œç»å¸¸éœ€è¦æ‰‹åŠ¨ <code>@Files</code> æŠŠæ–‡ä»¶å–‚ç»™ AIï¼Œå–‚å¤šäº† Context çˆ†æ‰ï¼Œå–‚å°‘äº† AI çå†™ã€‚Windsurf çš„ Cascade å¼•å…¥äº†"Flow"çŠ¶æ€ï¼Œå®ƒèƒ½æ›´æ•é”åœ°æ„ŸçŸ¥ä½ å½“å‰çš„"å…‰æ ‡åŠ¨å‘"å’Œé¡¹ç›®ä¾èµ–å›¾è°±ã€‚å®ƒä¸éœ€è¦ä½ æ˜¾å¼åœ°å‘Šè¯‰å®ƒ"çœ‹è¿™ä¸ªæ–‡ä»¶"ï¼Œå®ƒèƒ½çŒœåˆ°ä½ ç°åœ¨çš„æ”¹åŠ¨ä¼šå½±å“å“ªäº›æ¨¡å—ã€‚</p>
<p><strong>æ€è€ƒï¼š</strong> ç°åœ¨çš„ IDE ä¹‹äº‰ï¼Œæœ¬è´¨ä¸Šæ˜¯ <strong>Contextï¼ˆä¸Šä¸‹æ–‡ï¼‰ç®¡ç†èƒ½åŠ›</strong> çš„ç«äº‰ã€‚è°èƒ½æŠŠé¡¹ç›®ç»“æ„ã€Git å†å²ã€ç”šè‡³è¿è¡Œæ—¶çš„æŠ¥é”™ä¿¡æ¯æ›´æ— ç¼åœ°"å–‚"ç»™æ¨¡å‹ï¼Œè°å°±æ˜¯èµ¢å®¶ã€‚</p>
<h2 data-id="heading-4">2. æ¶æ„å¸ˆå¿…é¡»å…³æ³¨çš„ï¼šMCP (Model Context Protocol)</h2>
<p>å¦‚æœè¯´ IDE çš„ç«äº‰æ˜¯ C ç«¯çš„ç¹è£ï¼Œé‚£ <strong>MCP</strong> çš„å‘å¸ƒåˆ™æ˜¯ B ç«¯æ¶æ„çš„é‡Œç¨‹ç¢‘ã€‚</p>
<h3 data-id="heading-5">è¿™æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>ç®€å•è¯´ï¼Œå®ƒæ˜¯ Anthropic å‘èµ·çš„ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼Œæ—¨åœ¨è§£å†³"M ä¸ªæ¨¡å‹ x N ä¸ªæ•°æ®æº"çš„é›†æˆå™©æ¢¦ã€‚</p>
<h3 data-id="heading-6">ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ</h3>
<p>ä»¥å‰ï¼Œæˆ‘ä»¬è¦è®© AI è¯»å–æœ¬åœ°æ•°æ®åº“ã€Notion æ–‡æ¡£æˆ–è€…å…¬å¸å†…éƒ¨çš„ API æ–‡æ¡£ï¼Œéœ€è¦å†™å„ç§å„æ ·çš„ Glue Codeï¼ˆèƒ¶æ°´ä»£ç ï¼‰ã€‚ç°åœ¨ï¼Œé€šè¿‡ MCP Serverï¼Œä½ å¯ä»¥æŠŠæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€PostgreSQLã€ç”šè‡³ Slack å˜æˆæ ‡å‡†åŒ–çš„"æ’åº§"ã€‚AI æ¨¡å‹ï¼ˆä¸ç®¡æ˜¯ Claude è¿˜æ˜¯ GPTï¼‰å˜æˆäº†"æ’å¤´"ã€‚åªè¦æ’ä¸Šï¼ŒAI å°±èƒ½è¯»å–æ•°æ®ã€‚</p>
<h3 data-id="heading-7">å®æˆ˜æ„ä¹‰</h3>
<p>ä½œä¸ºæ¶æ„å¸ˆï¼Œå»ºè®®å¤§å®¶å¼€å§‹å°è¯•ç¼–å†™è‡ªå·±çš„ <strong>MCP Server</strong>ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œæœªæ¥ä½ çš„ä¼ä¸šç§æœ‰æ•°æ®ï¼ˆAPI æ–‡æ¡£ã€è¿ç»´æ—¥å¿—ã€é”™è¯¯å †æ ˆï¼‰åªéœ€è¦æš´éœ²ä¸€ä¸ª MCP æ¥å£ï¼Œå°±èƒ½è¢« Cursorã€Claude Desktop æˆ–ä»»ä½•æ”¯æŒ MCP çš„å®¢æˆ·ç«¯ç›´æ¥è°ƒç”¨ã€‚è¿™æ‰æ˜¯ä¼ä¸šçº§ AI ç¼–ç¨‹çš„æ­£ç¡®æ‰“å¼€æ–¹å¼â€”â€”ä¸æ˜¯æŠŠä»£ç å‘ç»™ AIï¼Œè€Œæ˜¯è®© AI é€šè¿‡æ ‡å‡†åè®®"èµ°è¿›"ä½ çš„æ•°æ®ã€‚</p>
<h2 data-id="heading-8">3. 2026 å±•æœ›ï¼šä»"å¯¹è¯"åˆ°"è¡ŒåŠ¨"</h2>
<p>GitHub Copilot Workspace åœ¨ 2025 å¹´å…¨é¢èå…¥å·¥ä½œæµï¼Œæ ‡å¿—ç€"è‡ªç„¶è¯­è¨€ç¼–ç¨‹"çš„é—¨æ§›è¿›ä¸€æ­¥é™ä½ã€‚æ¥ä¸‹æ¥çš„è¶‹åŠ¿å¾ˆæ˜æ˜¾ï¼š<strong>AI å°†ä¸å†ä»…ä»…æ˜¯ç”Ÿæˆä»£ç ï¼Œè€Œæ˜¯ä¼šæ›´å¤šåœ°å‚ä¸"ç¯å¢ƒé…ç½®"ã€"éƒ¨ç½²éªŒè¯"ç”šè‡³"å®‰å…¨å®¡è®¡"ã€‚</strong></p>
<p>æœªæ¥çš„å¼€å‘æµç¨‹å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>ä½ åœ¨ IDE é‡Œæ‰“å­—ï¼š"æˆ‘è¦å¼€ä¸€ä¸ªæ–°æœåŠ¡ï¼ŒæŠ€æœ¯æ ˆç”¨ Next.js + Supabaseã€‚"</li>
<li>AI Agent è‡ªåŠ¨åˆå§‹åŒ–é¡¹ç›®ã€é…ç½® Dockerã€ç”³è¯·äº‘èµ„æºã€‚</li>
<li>å®ƒå†™å¥½ä»£ç ï¼Œè‡ªåŠ¨è¿è¡Œ CI/CDã€‚</li>
<li>ä½ åªéœ€è¦ Review æ ¸å¿ƒé€»è¾‘ï¼Œç„¶åç‚¹ä¸€ä¸‹ Mergeã€‚</li>
</ol>
<h2 data-id="heading-9">ç»“è¯­</h2>
<p>å·¥å…·åœ¨å˜ï¼Œä½†æ ¸å¿ƒé€»è¾‘æ²¡å˜ï¼š<strong>AI æ˜¯æ æ†ï¼Œä½ çš„æ¶æ„æ€ç»´æ˜¯æ”¯ç‚¹ã€‚</strong> åˆ«å…‰é¡¾ç€æ¢ IDE å°é²œï¼Œè®°å¾—å»ç ”ç©¶ä¸€ä¸‹ MCP èƒŒåçš„åè®®è®¾è®¡ï¼Œæ€è€ƒä¸€ä¸‹å¦‚ä½•åˆ©ç”¨ Agent é‡æ„ä½ çš„å·¥ä½œæµï¼Œé‚£æ‰æ˜¯æ¶æ„å¸ˆè¯¥åšçš„äº‹ã€‚</p>
<hr/>
<p><em>æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ ç°åœ¨çš„"ä¸»åŠ› IDE"æ˜¯å“ªä¸€ä¸ªï¼Ÿ</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ ˆæ•°æ®ç»“æ„å…¨è§£æï¼šä»å®ç°åŸç†åˆ° LeetCode å®æˆ˜]]></title>    <link>https://juejin.cn/post/7576821684251836459</link>    <guid>https://juejin.cn/post/7576821684251836459</guid>    <pubDate>2025-11-26T09:06:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576821684251836459" data-draft-id="7576841976927207460" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ ˆæ•°æ®ç»“æ„å…¨è§£æï¼šä»å®ç°åŸç†åˆ° LeetCode å®æˆ˜"/> <meta itemprop="keywords" content="ç®—æ³•,JavaScript,ç¼–ç¨‹è¯­è¨€"/> <meta itemprop="datePublished" content="2025-11-26T09:06:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ‰æ„ä¹‰"/> <meta itemprop="url" content="https://juejin.cn/user/1739866211617625"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ ˆæ•°æ®ç»“æ„å…¨è§£æï¼šä»å®ç°åŸç†åˆ° LeetCode å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1739866211617625/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ‰æ„ä¹‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T09:06:07.000Z" title="Wed Nov 26 2025 09:06:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">æ•°æ®ç»“æ„æ ˆ</h2>
<p>åœ¨æ•°æ®ç»“æ„çš„ä¸–ç•Œé‡Œï¼Œæœ‰è®¸å¤šçœ‹ä¼¼ç®€å•å´æ”¯æ’‘èµ·æ— æ•°å¤æ‚ç¨‹åºçš„ â€œåŸºç¡€æ„ä»¶â€ï¼Œ</p>
<p>æ ˆï¼ˆStackï¼‰å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚å®ƒä¸åƒé“¾è¡¨é‚£æ ·çµæ´»å¤šå˜ï¼Œä¹Ÿä¸åƒæ ‘é‚£æ ·å±‚æ¬¡åˆ†æ˜ï¼Œä½†å‡­å€Ÿ <strong>å…ˆè¿›åå‡º</strong>çš„ç‹¬ç‰¹é€»è¾‘ï¼Œåœ¨ç®—æ³•è®¾è®¡ã€å†…å­˜ç®¡ç†ã€ç¨‹åºè¿è¡Œç­‰åœºæ™¯ä¸­æ‰®æ¼”ç€ä¸å¯æ›¿ä»£çš„è§’è‰²ã€‚</p>
<p>ä»Šå¤©æˆ‘ä»¬å°±æ¥æ·±å…¥èŠèŠæ ˆ â€”â€” è¿™ä¸ªçœ‹ä¼¼ â€œå›ºæ‰§â€ï¼Œå´æ ¼å¤–å®ç”¨çš„æ•°æ®ç»“æ„ã€‚</p>
<h2 data-id="heading-1">æ•°ç»„æ ˆï¼šç”¨æ•°ç»„å®ç°çš„æ ˆï¼ˆå«å®Œæ•´ JS å®ç°ï¼‰</h2>
<p>åœ¨æ ˆçš„ä¸¤ç§æ ¸å¿ƒå®ç°æ–¹å¼ä¸­ï¼Œ<strong>æ•°ç»„æ ˆ</strong>æ˜¯æœ€ç›´è§‚ã€æ•ˆç‡æœ€é«˜çš„é€‰æ‹©ä¹‹ä¸€ã€‚å®ƒçš„åº•å±‚åŸºäºæ™®é€šæ•°ç»„ï¼Œé€šè¿‡ç»´æŠ¤ä¸€ä¸ª â€œæ ˆé¡¶æŒ‡é’ˆâ€ï¼ˆæˆ–ç›´æ¥åˆ©ç”¨æ•°ç»„é•¿åº¦ï¼‰æ¥éµå¾ª â€œå…ˆè¿›åå‡ºï¼ˆFILOï¼‰â€ è§„åˆ™ï¼Œæ— è®ºæ˜¯å…¥æ ˆã€å‡ºæ ˆè¿˜æ˜¯æŸ¥çœ‹æ ˆé¡¶ï¼Œéƒ½èƒ½åšåˆ° O (1) çš„æ—¶é—´å¤æ‚åº¦ï¼Œéå¸¸é€‚åˆåœºæ™¯ç®€å•ã€å¯¹æ€§èƒ½æœ‰è¦æ±‚çš„å¼€å‘éœ€æ±‚ã€‚</p>
<h3 data-id="heading-2">ä¸€ã€æ•°ç»„æ ˆçš„æ ¸å¿ƒåŸç†</h3>
<p>æ•°ç»„æ ˆçš„æœ¬è´¨æ˜¯ â€œå—é™çš„æ•°ç»„â€â€”â€” æˆ‘ä»¬åªå…è®¸åœ¨æ•°ç»„çš„ â€œä¸€ç«¯â€ï¼ˆé€šå¸¸æ˜¯å°¾éƒ¨ï¼‰è¿›è¡Œå…ƒç´ çš„æ·»åŠ ï¼ˆå…¥æ ˆï¼‰å’Œåˆ é™¤ï¼ˆå‡ºæ ˆï¼‰æ“ä½œï¼Œå¦ä¸€ç«¯åˆ™å®Œå…¨å°é—­ã€‚æ ¸å¿ƒä¾èµ–ä¸¤ä¸ªå…³é”®è¦ç´ ï¼š</p>
<ul>
<li><strong>åº•å±‚æ•°ç»„</strong>ï¼šå­˜å‚¨æ ˆçš„æ‰€æœ‰å…ƒç´ ï¼Œåˆ©ç”¨æ•°ç»„çš„è¿ç»­å†…å­˜ç‰¹æ€§å®ç°å¿«é€Ÿè®¿é—®ï¼›</li>
<li><strong>æ ˆé¡¶æ ‡è®°</strong>ï¼šæ ‡è®°å½“å‰æ ˆé¡¶å…ƒç´ çš„ä½ç½®ï¼ˆå¯ä»¥æ˜¯æ˜¾å¼çš„<code>top</code>å˜é‡ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨æ•°ç»„é•¿åº¦<code>length</code>éšå«è¡¨ç¤ºï¼ŒJS ä¸­æ•°ç»„çš„<code>push/pop</code>æ–¹æ³•æœ¬èº«å°±æ˜¯æ“ä½œå°¾éƒ¨ï¼Œç”¨<code>length</code>æ›´ç®€æ´ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-3">æ ¸å¿ƒæ“ä½œé€»è¾‘æ‹†è§£</h4>
<p>æˆ‘ä»¬ç”¨ â€œæ•°ç»„é•¿åº¦ä½œä¸ºæ ˆé¡¶æ ‡è®°â€ æ¥æ¢³ç†æ ¸å¿ƒæ“ä½œï¼ˆä¹Ÿæ˜¯ä¸‹é¢ JS å®ç°çš„é€»è¾‘ï¼‰ï¼Œæ›´ç¬¦åˆ JS æ•°ç»„çš„åŸç”Ÿç‰¹æ€§ï¼š</p>
<ol>
<li><strong>åˆå§‹åŒ–</strong>ï¼šåˆ›å»ºä¸€ä¸ªç©ºæ•°ç»„ï¼Œæ­¤æ—¶æ•°ç»„é•¿åº¦ä¸º 0ï¼Œä»£è¡¨æ ˆä¸ºç©ºï¼›</li>
<li><strong>å…¥æ ˆï¼ˆPushï¼‰</strong> ï¼šç›´æ¥è°ƒç”¨æ•°ç»„çš„<code>push</code>æ–¹æ³•ï¼Œå°†æ–°å…ƒç´ æ·»åŠ åˆ°æ•°ç»„å°¾éƒ¨ï¼ˆæ ˆé¡¶ï¼‰ï¼Œæ— éœ€æ‰‹åŠ¨ç»´æŠ¤<code>top</code>â€”â€” æ•°ç»„é•¿åº¦è‡ªåŠ¨ + 1ï¼Œå°¾éƒ¨å°±æ˜¯æ ˆé¡¶ï¼›</li>
<li><strong>å‡ºæ ˆï¼ˆPopï¼‰</strong> ï¼šå…ˆåˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©ºï¼ˆæ•°ç»„é•¿åº¦ä¸º 0ï¼‰ï¼Œè‹¥ä¸ºç©ºåˆ™æŠ›å‡º â€œæ ˆä¸‹æº¢â€ é”™è¯¯ï¼›è‹¥ä¸ä¸ºç©ºï¼Œè°ƒç”¨æ•°ç»„çš„<code>pop</code>æ–¹æ³•ç§»é™¤å¹¶è¿”å›æ•°ç»„å°¾éƒ¨å…ƒç´ ï¼ˆæ ˆé¡¶ï¼‰ï¼Œæ•°ç»„é•¿åº¦è‡ªåŠ¨ - 1ï¼›</li>
<li><strong>æŸ¥çœ‹æ ˆé¡¶ï¼ˆPeekï¼‰</strong> ï¼šåˆ¤æ–­æ ˆä¸ä¸ºç©ºåï¼Œç›´æ¥è¿”å›æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼ˆ<code>array[array.length - 1]</code>ï¼‰ï¼Œä¸æ”¹å˜æ ˆçš„ç»“æ„ï¼›</li>
<li><strong>è¾…åŠ©æ“ä½œ</strong>ï¼šè·å–æ ˆçš„å¤§å°ï¼ˆç›´æ¥è¿”å›æ•°ç»„é•¿åº¦ï¼‰ã€åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©ºï¼ˆæ•°ç»„é•¿åº¦æ˜¯å¦ä¸º 0ï¼‰ã€è½¬ä¸ºæ•°ç»„ï¼ˆè¿”å›åŸæ•°ç»„çš„å‰¯æœ¬ï¼Œé¿å…å¤–éƒ¨ä¿®æ”¹ï¼‰ã€‚</li>
</ol>
<p>JS å®ç°</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ•°ç»„æ¥stack</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ArrayStack</span> {
  #stack;
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.#stack = [];
  }
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">size</span>() {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.#stack.<span class="hljs-property">length</span>;
  }
  <span class="hljs-title function_">isEmpty</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span> === <span class="hljs-number">0</span>;
  }
  <span class="hljs-title function_">push</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.#stack.<span class="hljs-title function_">push</span>(num);
  }
  <span class="hljs-title function_">pop</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isEmpty</span>()) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"æ ˆä¸ºç©º"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.#stack.<span class="hljs-title function_">pop</span>();
  }
  <span class="hljs-title function_">peek</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isEmpty</span>()) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"æ ˆä¸ºç©º"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.#stack[<span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span> - <span class="hljs-number">1</span>];
  }
  <span class="hljs-title function_">toArray</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.#stack;
  }
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec89f747ff8149cc9c089460df7cca2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oSP5LmJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764752767&amp;x-signature=VJGJ%2F5Olyi4GTyzlcMYhA9NlLpM%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-4">å…³é”®æ³¨æ„ç‚¹</h4>
<ul>
<li><strong>æ ˆæº¢å‡º</strong>ï¼šåœ¨ JS ä¸­ï¼Œæ•°ç»„æ˜¯åŠ¨æ€æ‰©å®¹çš„ï¼ˆä¸åƒ Java ç­‰è¯­è¨€çš„æ•°ç»„æœ‰å›ºå®šå¤§å°ï¼‰ï¼Œç†è®ºä¸Šä¸ä¼šå‡ºç° â€œæ ˆæº¢å‡ºâ€ï¼ˆé™¤éå†…å­˜è€—å°½ï¼‰ï¼Œä½†å¦‚æœä¸šåŠ¡éœ€è¦é™åˆ¶æ ˆçš„æœ€å¤§å®¹é‡ï¼Œå¯ä»¥åœ¨<code>push</code>æ–¹æ³•ä¸­æ·»åŠ åˆ¤æ–­ï¼›</li>
<li><strong>å®‰å…¨æ€§</strong>ï¼šç”¨ç§æœ‰å±æ€§ï¼ˆ<code>#stack</code>ï¼‰å­˜å‚¨åº•å±‚æ•°ç»„ï¼Œé¿å…å¤–éƒ¨ç›´æ¥æ“ä½œæ•°ç»„ï¼ˆæ¯”å¦‚é€šè¿‡<code>array[0]</code>ä¿®æ”¹æ ˆåº•å…ƒç´ ï¼‰ï¼Œä¿è¯æ ˆçš„æ“ä½œåªèƒ½é€šè¿‡æš´éœ²çš„ API è¿›è¡Œï¼Œç¬¦åˆ â€œå°è£…â€ åŸåˆ™ã€‚</li>
</ul>
<h4 data-id="heading-5">å°æ€»ç»“</h4>
<p>æ•°ç»„æ ˆæ˜¯æ ˆçš„ â€œæœ€ä¼˜è§£â€ ä¹‹ä¸€ï¼Œåœ¨ JS ä¸­å°¤å…¶å¦‚æ­¤ â€”â€” å€ŸåŠ©æ•°ç»„çš„åŸç”Ÿæ–¹æ³•å’ŒåŠ¨æ€æ‰©å®¹ç‰¹æ€§ï¼Œæ—¢èƒ½ä¿è¯æè‡´æ€§èƒ½ï¼Œåˆèƒ½ç®€åŒ–å®ç°é€»è¾‘ã€‚ä¸Šé¢çš„ä»£ç åŒ…å«äº†å®Œæ•´çš„è¾¹ç•Œå¤„ç†ï¼ˆç©ºæ ˆå‡ºæ ˆã€æ»¡æ ˆå…¥æ ˆï¼‰ã€å°è£…è®¾è®¡ï¼ˆç§æœ‰å±æ€§ï¼‰å’Œå®ç”¨è¾…åŠ©æ–¹æ³•ï¼ˆæ¸…ç©ºã€è½¬æ•°ç»„ï¼‰ï¼Œå¯ä»¥ç›´æ¥ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œä¹Ÿå¯æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼ˆå¦‚å…ƒç´ ç±»å‹æ ¡éªŒã€æ·±æ‹·è´ï¼‰è¿›ä¸€æ­¥æ‰©å±•ã€‚</p>
<h2 data-id="heading-6">é“¾è¡¨æ ˆï¼šç”¨é“¾è¡¨å®ç°çš„æ ˆï¼ˆå« JS å®Œæ•´å®ç° + åŸç†å‰–æï¼‰</h2>
<p>åœ¨æ ˆçš„ä¸¤ç§æ ¸å¿ƒç‰©ç†å®ç°ä¸­ï¼Œ<strong>é“¾è¡¨æ ˆ</strong>ä»¥å…¶åŠ¨æ€æ‰©å®¹ã€å†…å­˜çµæ´»çš„ç‰¹æ€§ï¼Œæˆä¸ºæ•°ç»„æ ˆçš„é‡è¦è¡¥å……ã€‚</p>
<p>å®ƒåŸºäºå•é“¾è¡¨ç»“æ„ï¼Œé€šè¿‡ç»´æŠ¤æ ˆé¡¶æŒ‡é’ˆéµå¾ª â€œå…ˆè¿›åå‡ºï¼ˆFILOï¼‰â€ è§„åˆ™ï¼Œæ— éœ€æ‹…å¿ƒæ•°ç»„çš„å›ºå®šå®¹é‡é™åˆ¶ï¼Œé€‚åˆå…ƒç´ æ•°é‡ä¸ç¡®å®šã€å¯¹å†…å­˜åˆ©ç”¨ç‡æœ‰è¦æ±‚çš„åœºæ™¯ã€‚</p>
<h3 data-id="heading-7">ä¸€ã€é“¾è¡¨æ ˆçš„æ ¸å¿ƒåŸç†</h3>
<p>é“¾è¡¨æ ˆçš„æœ¬è´¨æ˜¯ â€œåªèƒ½ä»è¡¨å¤´æ“ä½œçš„å•é“¾è¡¨â€â€”â€” æˆ‘ä»¬å°†å•é“¾è¡¨çš„<strong>å¤´èŠ‚ç‚¹ä½œä¸ºæ ˆé¡¶</strong>ï¼Œæ‰€æœ‰å…¥æ ˆã€å‡ºæ ˆæ“ä½œéƒ½åœ¨è¡¨å¤´å®Œæˆï¼ˆé“¾è¡¨å°¾éƒ¨ä½œä¸ºæ ˆåº•ï¼Œä¸ç›´æ¥æ“ä½œï¼‰ã€‚æ ¸å¿ƒä¾èµ–ä¸¤ä¸ªå…³é”®è¦ç´ ï¼š</p>
<ul>
<li><strong>é“¾è¡¨èŠ‚ç‚¹ï¼ˆListNodeï¼‰</strong> ï¼šå­˜å‚¨å•ä¸ªå…ƒç´ çš„å€¼ï¼ˆvalï¼‰å’ŒæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆï¼ˆnextï¼‰ï¼Œæ˜¯é“¾è¡¨æ ˆçš„åŸºæœ¬æ•°æ®å•å…ƒï¼›</li>
<li><strong>æ ˆé¡¶æŒ‡é’ˆï¼ˆ#stackPeekï¼‰</strong> ï¼šå§‹ç»ˆæŒ‡å‘å½“å‰æ ˆé¡¶èŠ‚ç‚¹ï¼ˆè¡¨å¤´ï¼‰ï¼Œè‹¥æ ˆä¸ºç©ºåˆ™ä¸º nullï¼›</li>
<li><strong>æ ˆå¤§å°ï¼ˆ#sizeï¼‰</strong> ï¼šè®°å½•æ ˆä¸­å…ƒç´ çš„ä¸ªæ•°ï¼Œé¿å…æ¯æ¬¡è·å–å¤§å°æ—¶éå†é“¾è¡¨ï¼ˆä¼˜åŒ–æ—¶é—´å¤æ‚åº¦ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-8">æ ¸å¿ƒæ“ä½œé€»è¾‘æ‹†è§£</h4>
<p>é“¾è¡¨æ ˆçš„æ‰€æœ‰æ“ä½œéƒ½å›´ç»• â€œæ ˆé¡¶ï¼ˆè¡¨å¤´ï¼‰â€ å±•å¼€ï¼Œé€»è¾‘æ¸…æ™°ä¸”é«˜æ•ˆï¼š</p>
<ol>
<li>
<p><strong>åˆå§‹åŒ–</strong>ï¼šæ ˆé¡¶æŒ‡é’ˆï¼ˆ#stackPeekï¼‰è®¾ä¸º nullï¼Œæ ˆå¤§å°ï¼ˆ#sizeï¼‰è®¾ä¸º 0ï¼Œä»£è¡¨ç©ºæ ˆï¼›</p>
</li>
<li>
<p><strong>å…¥æ ˆï¼ˆPushï¼‰</strong> ï¼š</p>
<ul>
<li>åˆ›å»ºä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼Œå­˜å‚¨å¾…å…¥æ ˆçš„å…ƒç´ ï¼›</li>
<li>è®©æ–°èŠ‚ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘å½“å‰æ ˆé¡¶èŠ‚ç‚¹ï¼ˆ#stackPeekï¼‰ï¼›</li>
<li>å°†æ ˆé¡¶æŒ‡é’ˆæ›´æ–°ä¸ºæ–°èŠ‚ç‚¹ï¼ˆæ–°èŠ‚ç‚¹æˆä¸ºæ–°çš„æ ˆé¡¶ï¼‰ï¼›</li>
<li>æ ˆå¤§å°ï¼ˆ#sizeï¼‰åŠ  1ï¼›</li>
</ul>
</li>
<li>
<p><strong>å‡ºæ ˆï¼ˆPopï¼‰</strong> ï¼š</p>
<ul>
<li>å…ˆåˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©ºï¼ˆ#stackPeek ä¸º nullï¼‰ï¼Œè‹¥ä¸ºç©ºåˆ™æŠ›å‡º â€œæ ˆä¸‹æº¢â€ é”™è¯¯ï¼›</li>
<li>ä¿å­˜å½“å‰æ ˆé¡¶èŠ‚ç‚¹çš„å€¼ï¼ˆå¾…è¿”å›çš„å‡ºæ ˆå…ƒç´ ï¼‰ï¼›</li>
<li>å°†æ ˆé¡¶æŒ‡é’ˆæ›´æ–°ä¸ºå½“å‰æ ˆé¡¶èŠ‚ç‚¹çš„ next æŒ‡é’ˆï¼ˆåŸæ ˆé¡¶èŠ‚ç‚¹è¢« â€œç§»é™¤â€ï¼ŒGC ä¼šè‡ªåŠ¨å›æ”¶ï¼‰ï¼›</li>
<li>æ ˆå¤§å°ï¼ˆ#sizeï¼‰å‡ 1ï¼›</li>
<li>è¿”å›ä¿å­˜çš„æ ˆé¡¶èŠ‚ç‚¹å€¼ï¼›</li>
</ul>
</li>
<li>
<p><strong>æŸ¥çœ‹æ ˆé¡¶ï¼ˆPeekï¼‰</strong> ï¼šåˆ¤æ–­æ ˆä¸ä¸ºç©ºåï¼Œç›´æ¥è¿”å›æ ˆé¡¶æŒ‡é’ˆæŒ‡å‘èŠ‚ç‚¹çš„å€¼ï¼ˆ#stackPeek.valï¼‰ï¼Œä¸ä¿®æ”¹æ ˆç»“æ„ï¼›</p>
</li>
<li>
<p><strong>è¾…åŠ©æ“ä½œ</strong>ï¼šè·å–æ ˆå¤§å°ï¼ˆç›´æ¥è¿”å› #sizeï¼‰ã€åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©ºï¼ˆ#size === 0ï¼‰ã€è½¬ä¸ºæ•°ç»„ï¼ˆä»æ ˆé¡¶åˆ°æ ˆåº•éå†é“¾è¡¨ï¼Œåå‘å­˜å‚¨ä¸ºæ•°ç»„ï¼Œä¿è¯è¾“å‡ºé¡ºåºä¸º â€œæ ˆåº•â†’æ ˆé¡¶â€ï¼‰ã€‚</p>
</li>
</ol>
<h4 data-id="heading-9">å…³é”®è®¾è®¡æ€è·¯</h4>
<ul>
<li><strong>ä¸ºä»€ä¹ˆé€‰è¡¨å¤´ä½œä¸ºæ ˆé¡¶ï¼Ÿ</strong> Â å•é“¾è¡¨çš„è¡¨å¤´æ“ä½œï¼ˆæ·»åŠ  / åˆ é™¤èŠ‚ç‚¹ï¼‰æ—¶é—´å¤æ‚åº¦æ˜¯ O (1)ï¼Œè€Œè¡¨å°¾æ“ä½œéœ€è¦éå†æ•´ä¸ªé“¾è¡¨ï¼ˆO (n)ï¼‰ï¼Œé€‰æ‹©è¡¨å¤´ä½œä¸ºæ ˆé¡¶èƒ½ä¿è¯å…¥æ ˆã€å‡ºæ ˆçš„é«˜æ•ˆæ€§ï¼›</li>
<li><strong>ä¸ºä»€ä¹ˆç”¨ç§æœ‰å­—æ®µï¼Ÿ</strong> Â #stackPeek å’Œ #size è®¾ä¸ºç§æœ‰å­—æ®µï¼Œé¿å…å¤–éƒ¨ç›´æ¥ä¿®æ”¹æ ˆé¡¶æŒ‡é’ˆæˆ–æ ˆå¤§å°ï¼Œä¿è¯æ ˆçš„ FILO è§„åˆ™ä¸è¢«ç ´åï¼Œç¬¦åˆ â€œå°è£…â€ çš„è®¾è®¡åŸåˆ™ï¼›</li>
<li><strong>èŠ‚ç‚¹çš„ç¦»æ•£å­˜å‚¨</strong>ï¼šé“¾è¡¨èŠ‚ç‚¹é€šè¿‡ next æŒ‡é’ˆå…³è”ï¼Œæ— éœ€è¿ç»­å†…å­˜ç©ºé—´ï¼Œå†…å­˜åˆ©ç”¨ç‡æ›´é«˜ï¼Œä¸”ä¸ä¼šå‡ºç°æ•°ç»„æ ˆçš„ â€œæ‰©å®¹â€ é—®é¢˜ã€‚</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// é“¾è¡¨èŠ‚ç‚¹ç±»ï¼šå®šä¹‰é“¾è¡¨çš„åŸºæœ¬å•å…ƒ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ListNode</span> {
  <span class="hljs-comment">/**
   * åˆå§‹åŒ–é“¾è¡¨èŠ‚ç‚¹
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} <span class="hljs-variable">val</span> - èŠ‚ç‚¹å­˜å‚¨çš„å€¼ï¼ˆæ”¯æŒä»»æ„ç±»å‹ï¼‰
   */</span>
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">val</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">val</span> = val; <span class="hljs-comment">// èŠ‚ç‚¹å€¼</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">next</span> = <span class="hljs-literal">null</span>; <span class="hljs-comment">// æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆï¼ˆåˆå§‹ä¸ºnullï¼‰</span>
  }
}

<span class="hljs-comment">// é“¾è¡¨æ ˆç±»ï¼šåŸºäºå•é“¾è¡¨å®ç°æ ˆï¼Œéµå¾ªFILOè§„åˆ™</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">LinkedListStack</span> {
  <span class="hljs-comment">// ç§æœ‰å­—æ®µï¼šæ ˆé¡¶æŒ‡é’ˆï¼ˆæŒ‡å‘æ ˆé¡¶èŠ‚ç‚¹ï¼Œå¤–éƒ¨ä¸å¯è®¿é—®ï¼‰</span>
  #stackPeek;
  <span class="hljs-comment">// ç§æœ‰å­—æ®µï¼šæ ˆçš„å¤§å°ï¼ˆå¤–éƒ¨ä¸å¯è®¿é—®ï¼‰</span>
  #size = <span class="hljs-number">0</span>;

  <span class="hljs-comment">/**
   * æ„é€ å‡½æ•°ï¼šåˆå§‹åŒ–ç©ºæ ˆ
   */</span>
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.#stackPeek = <span class="hljs-literal">null</span>; <span class="hljs-comment">// æ ˆç©ºæ—¶ï¼Œæ ˆé¡¶æŒ‡é’ˆä¸ºnull</span>
  }

  <span class="hljs-comment">/**
   * ã€æ ¸å¿ƒæ“ä½œã€‘å…¥æ ˆï¼šå°†å…ƒç´ æ·»åŠ åˆ°æ ˆé¡¶
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} <span class="hljs-variable">num</span> - å¾…å…¥æ ˆçš„å…ƒç´ 
   */</span>
  <span class="hljs-title function_">push</span>(<span class="hljs-params">num</span>) {
    <span class="hljs-comment">// 1. åˆ›å»ºæ–°èŠ‚ç‚¹</span>
    <span class="hljs-keyword">const</span> newNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>(num);
    <span class="hljs-comment">// 2. æ–°èŠ‚ç‚¹çš„nextæŒ‡å‘å½“å‰æ ˆé¡¶ï¼ˆé“¾æ¥åŸæœ‰æ ˆç»“æ„ï¼‰</span>
    newNode.<span class="hljs-property">next</span> = <span class="hljs-variable language_">this</span>.#stackPeek;
    <span class="hljs-comment">// 3. æ ˆé¡¶æŒ‡é’ˆæ›´æ–°ä¸ºæ–°èŠ‚ç‚¹ï¼ˆæ–°èŠ‚ç‚¹æˆä¸ºæ–°æ ˆé¡¶ï¼‰</span>
    <span class="hljs-variable language_">this</span>.#stackPeek = newNode;
    <span class="hljs-comment">// 4. æ ˆå¤§å°åŠ 1</span>
    <span class="hljs-variable language_">this</span>.#size++;
  }

  <span class="hljs-comment">/**
   * ã€æ ¸å¿ƒæ“ä½œã€‘æŸ¥çœ‹æ ˆé¡¶å…ƒç´ ï¼šä¸ä¿®æ”¹æ ˆç»“æ„
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">*</span>} æ ˆé¡¶å…ƒç´ 
   * <span class="hljs-doctag">@throws</span> {<span class="hljs-type">Error</span>} æ ˆä¸ºç©ºæ—¶æŠ›å‡ºé”™è¯¯
   */</span>
  <span class="hljs-title function_">peek</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isEmpty</span>()) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"æ ˆä¸‹æº¢ï¼šå½“å‰æ ˆä¸ºç©ºï¼Œæ— æ ˆé¡¶å…ƒç´ "</span>);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.#stackPeek.<span class="hljs-property">val</span>;
  }

  <span class="hljs-comment">/**
   * ã€æ ¸å¿ƒæ“ä½œã€‘å‡ºæ ˆï¼šç§»é™¤å¹¶è¿”å›æ ˆé¡¶å…ƒç´ 
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">*</span>} æ ˆé¡¶å…ƒç´ 
   * <span class="hljs-doctag">@throws</span> {<span class="hljs-type">Error</span>} æ ˆä¸ºç©ºæ—¶æŠ›å‡ºé”™è¯¯
   */</span>
  <span class="hljs-title function_">pop</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// 1. å…ˆé€šè¿‡peekåˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©ºï¼ˆå¤ç”¨é€»è¾‘ï¼Œé¿å…é‡å¤ä»£ç ï¼‰</span>
    <span class="hljs-keyword">const</span> topVal = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">peek</span>();
    <span class="hljs-comment">// 2. æ ˆé¡¶æŒ‡é’ˆæŒ‡å‘åŸæ ˆé¡¶çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆç§»é™¤åŸæ ˆé¡¶èŠ‚ç‚¹ï¼‰</span>
    <span class="hljs-variable language_">this</span>.#stackPeek = <span class="hljs-variable language_">this</span>.#stackPeek.<span class="hljs-property">next</span>;
    <span class="hljs-comment">// 3. æ ˆå¤§å°å‡1</span>
    <span class="hljs-variable language_">this</span>.#size--;
    <span class="hljs-comment">// 4. è¿”å›åŸæ ˆé¡¶èŠ‚ç‚¹çš„å€¼</span>
    <span class="hljs-keyword">return</span> topVal;
  }

  <span class="hljs-comment">/**
   * ã€è¾…åŠ©æ“ä½œã€‘è·å–æ ˆçš„å½“å‰å¤§å°ï¼ˆgetterå±æ€§ï¼Œå¯é€šè¿‡stack.sizeè®¿é—®ï¼‰
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">number</span>} æ ˆä¸­å…ƒç´ ä¸ªæ•°
   */</span>
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">size</span>() {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.#size;
  }

  <span class="hljs-comment">/**
   * ã€è¾…åŠ©æ“ä½œã€‘åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">boolean</span>} ç©ºè¿”å›trueï¼Œéç©ºè¿”å›false
   */</span>
  <span class="hljs-title function_">isEmpty</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span> === <span class="hljs-number">0</span>;
  }

  <span class="hljs-comment">/**
   * ã€è¾…åŠ©æ“ä½œã€‘å°†æ ˆè½¬ä¸ºæ•°ç»„ï¼ˆè¾“å‡ºé¡ºåºï¼šæ ˆåº•â†’æ ˆé¡¶ï¼‰
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">array</span>} æ ˆå…ƒç´ ç»„æˆçš„æ•°ç»„
   */</span>
  <span class="hljs-title function_">toArray</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// éå†é“¾è¡¨ï¼Œä»æ ˆé¡¶åˆ°æ ˆåº•æ”¶é›†å…ƒç´ </span>
    <span class="hljs-keyword">let</span> currentNode = <span class="hljs-variable language_">this</span>.#stackPeek;
    <span class="hljs-keyword">const</span> result = [];
    <span class="hljs-keyword">while</span> (currentNode) {
      result.<span class="hljs-title function_">push</span>(currentNode.<span class="hljs-property">val</span>);
      currentNode = currentNode.<span class="hljs-property">next</span>;
    }
    <span class="hljs-comment">// ç”±äºæ”¶é›†é¡ºåºæ˜¯â€œæ ˆé¡¶â†’æ ˆåº•â€ï¼Œéœ€è¦åè½¬æ•°ç»„ï¼Œè®©è¾“å‡ºç¬¦åˆâ€œæ ˆåº•â†’æ ˆé¡¶â€çš„ç›´è§‰</span>
    <span class="hljs-keyword">return</span> result.<span class="hljs-title function_">reverse</span>();
  }

  <span class="hljs-comment">/**
   * ã€è¾…åŠ©æ“ä½œã€‘æ¸…ç©ºæ ˆ
   */</span>
  <span class="hljs-title function_">clear</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.#stackPeek = <span class="hljs-literal">null</span>; <span class="hljs-comment">// æ–­å¼€æ ˆé¡¶æŒ‡é’ˆï¼Œæ‰€æœ‰èŠ‚ç‚¹ä¼šè¢«GCå›æ”¶</span>
    <span class="hljs-variable language_">this</span>.#size = <span class="hljs-number">0</span>; <span class="hljs-comment">// é‡ç½®æ ˆå¤§å°</span>
  }
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/909e508ee62c40d5ad99c6b5801e28cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oSP5LmJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764752767&amp;x-signature=7sxvnmvvLC0fsTwD0eLdAFPC%2FaY%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-10">å°æ€»ç»“</h3>
<p>é“¾è¡¨æ ˆæ˜¯æ ˆçš„ç»å…¸å®ç°ä¹‹ä¸€ï¼Œæ ¸å¿ƒä¼˜åŠ¿åœ¨äº<strong>åŠ¨æ€æ‰©å®¹ã€å†…å­˜åˆ©ç”¨ç‡é«˜</strong>ï¼Œå®Œç¾è§£å†³äº†æ•°ç»„æ ˆçš„å›ºå®šå®¹é‡é™åˆ¶é—®é¢˜ã€‚è™½ç„¶å®ç°æ—¶éœ€è¦æ‰‹åŠ¨ç®¡ç†èŠ‚ç‚¹å’ŒæŒ‡é’ˆï¼Œä½†æ ¸å¿ƒæ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä»ä¿æŒ O (1)ï¼Œæ€§èƒ½ç¨³å®šå¯é ã€‚</p>
<p>ä¸Šé¢çš„ JS å®ç°åŒ…å«äº†å®Œæ•´çš„è¾¹ç•Œå¤„ç†ï¼ˆç©ºæ ˆæ“ä½œé˜²æŠ¤ï¼‰ã€å®ç”¨è¾…åŠ©æ–¹æ³•ï¼ˆæ¸…ç©ºã€è½¬æ•°ç»„ï¼‰å’Œä¸¥æ ¼çš„å°è£…è®¾è®¡ï¼ˆç§æœ‰å­—æ®µï¼‰ï¼Œå¯ä»¥ç›´æ¥ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œåªéœ€æ ¹æ® â€œå…ƒç´ æ•°é‡æ˜¯å¦ç¡®å®šâ€â€œå†…å­˜æ˜¯å¦æ•æ„Ÿâ€ ä¸¤ä¸ªæ ¸å¿ƒå› ç´ ï¼Œå°±èƒ½åœ¨é“¾è¡¨æ ˆå’Œæ•°ç»„æ ˆä¹‹é—´åšå‡ºæœ€ä¼˜é€‰æ‹©ã€‚</p>
<h2 data-id="heading-11">æ•°ç»„æ ˆ vs é“¾è¡¨æ ˆï¼šå¤æ‚åº¦æ ¸å¿ƒå¯¹æ¯”</h2>
<h3 data-id="heading-12">ä¸€ã€æ—¶é—´å¤æ‚åº¦å¯¹æ¯”</h3>



































<table><thead><tr><th>æ“ä½œ</th><th>æ•°ç»„æ ˆ</th><th>é“¾è¡¨æ ˆ</th><th>æ ¸å¿ƒå·®å¼‚</th></tr></thead><tbody><tr><td>å…¥æ ˆï¼ˆPushï¼‰</td><td>å¹³å‡ O (1)ï¼Œæœ€å O (n)</td><td>ç¨³å®š O (1)</td><td>æ•°ç»„æ ˆæ‰©å®¹éœ€æ‹·è´å…ƒç´ ï¼ˆO (n)ï¼‰ï¼Œé“¾è¡¨æ ˆæ— æ‰©å®¹å‹åŠ›</td></tr><tr><td>å‡ºæ ˆï¼ˆPopï¼‰</td><td>ç¨³å®š O (1)</td><td>ç¨³å®š O (1)</td><td>å‡ç›´æ¥æ“ä½œæ ˆé¡¶ï¼Œæ— é¢å¤–å¼€é”€</td></tr><tr><td>æŸ¥çœ‹æ ˆé¡¶ï¼ˆPeekï¼‰</td><td>ç¨³å®š O (1)</td><td>ç¨³å®š O (1)</td><td>ç›´æ¥è®¿é—®æ ˆé¡¶å…ƒç´ </td></tr><tr><td>è¾…åŠ©æ“ä½œï¼ˆSize/isEmptyï¼‰</td><td>ç¨³å®š O (1)</td><td>ç¨³å®š O (1)</td><td>ç»´æŠ¤ç‹¬ç«‹ size å˜é‡ï¼Œç›´æ¥è¿”å›</td></tr></tbody></table>
<h4 data-id="heading-13">å…³é”®è¯´æ˜</h4>
<ul>
<li>æ•°ç»„æ ˆï¼šå¤§éƒ¨åˆ†åœºæ™¯å…¥æ ˆ O (1)ï¼Œä»…æ‰©å®¹æ—¶è§¦å‘ O (n) æ‹·è´ï¼ˆä½é¢‘æ“ä½œï¼Œå¹³å‡æ•ˆç‡ä»ä¸º O (1)ï¼‰ï¼›</li>
<li>é“¾è¡¨æ ˆï¼šå…¥æ ˆä»…éœ€åˆ›å»ºèŠ‚ç‚¹ + ä¿®æ”¹æŒ‡é’ˆï¼Œæ— æ‰©å®¹å¼€é”€ï¼Œæ•ˆç‡å§‹ç»ˆç¨³å®š O (1)ï¼›</li>
<li>é“¾è¡¨èŠ‚ç‚¹å®ä¾‹åŒ–å±äº O (1) å¸¸é‡å¼€é”€ï¼Œè¿œä½äºæ•°ç»„æ‰©å®¹çš„ O (n) çº¿æ€§å¼€é”€ã€‚</li>
</ul>
<h3 data-id="heading-14">äºŒã€ç©ºé—´å¤æ‚åº¦å¯¹æ¯”</h3>

























<table><thead><tr><th>ç»´åº¦</th><th>æ•°ç»„æ ˆ</th><th>é“¾è¡¨æ ˆ</th></tr></thead><tbody><tr><td>æ•´ä½“å¤æ‚åº¦</td><td>O (n)ï¼ˆn ä¸ºå…ƒç´ ä¸ªæ•°ï¼‰</td><td>O (n)ï¼ˆn ä¸ºå…ƒç´ ä¸ªæ•°ï¼‰</td></tr><tr><td>ç©ºé—´æµªè´¹</td><td>å¯èƒ½å­˜åœ¨é¢„ç•™å†…å­˜æµªè´¹</td><td>æ— æµªè´¹ï¼Œä½†èŠ‚ç‚¹éœ€é¢å¤–å­˜å‚¨ next æŒ‡é’ˆ</td></tr><tr><td>æ ¸å¿ƒå·®å¼‚</td><td>è¿ç»­å†…å­˜å­˜å‚¨ï¼Œæ‰©å®¹æ—¶é¢„ç•™é¢å¤–ç©ºé—´</td><td>ç¦»æ•£å­˜å‚¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹å¤šå ç”¨æŒ‡é’ˆå†…å­˜</td></tr></tbody></table>
<h3 data-id="heading-15">åŠ›æ‰£é¢˜ç›®è¯¦è§£</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fvalid-parentheses%2F" target="_blank" title="https://leetcode.cn/problems/valid-parentheses/" ref="nofollow noopener noreferrer">20. æœ‰æ•ˆçš„æ‹¬å· - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p>
<p>è¿™é“é¢˜æ˜¯æ ˆæ•°æ®ç»“æ„çš„ â€œå…¥é—¨å¿…åˆ·â€ é¢˜ç›®ï¼Œæ ¸å¿ƒæ€è·¯æ˜¯åˆ©ç”¨æ ˆ â€œå…ˆè¿›åå‡ºâ€ çš„ç‰¹æ€§ï¼ŒåŒ¹é…å·¦å³æ‹¬å·çš„é—­åˆé¡ºåºã€‚ä¸‹é¢ä»è§£é¢˜æ€è·¯ã€ä»£ç æ‹†è§£ã€è¾¹ç•Œå¤„ç†ä¸‰ä¸ªç»´åº¦ï¼Œå¸¦ä½ å½»åº•ææ‡‚è¿™é“é¢˜ã€‚</p>
<h4 data-id="heading-16">ä¸€ã€è§£é¢˜æ ¸å¿ƒæ€è·¯</h4>
<p>æ‹¬å·æœ‰æ•ˆéœ€æ»¡è¶³ä¸¤ä¸ªæ ¸å¿ƒæ¡ä»¶ï¼š<strong>ç±»å‹åŒ¹é…</strong>å’Œ<strong>é¡ºåºæ­£ç¡®</strong>ã€‚æ ˆçš„ â€œåè¿›å…ˆå‡ºâ€ åˆšå¥½èƒ½è§£å†³ â€œé¡ºåºæ­£ç¡®â€ çš„é—®é¢˜ â€”â€” å·¦æ‹¬å·å…¥æ ˆï¼Œé‡åˆ°å³æ‹¬å·æ—¶å¼¹å‡ºæ ˆé¡¶å…ƒç´ æ ¡éªŒåŒ¹é…åº¦ï¼š</p>
<ol>
<li>
<p>ç”¨å“ˆå¸Œè¡¨ï¼ˆ<code>leftToRight</code>ï¼‰ç»´æŠ¤å·¦æ‹¬å·åˆ°å³æ‹¬å·çš„æ˜ å°„å…³ç³»ï¼Œå¿«é€Ÿåˆ¤æ–­åŒ¹é…ç±»å‹ï¼›</p>
</li>
<li>
<p>éå†å­—ç¬¦ä¸²æ—¶ï¼Œé‡åˆ°å·¦æ‹¬å·å°±å°†å¯¹åº”çš„å³æ‹¬å·å…¥æ ˆï¼ˆç›¸å½“äº â€œé¢„çº¦â€ ä¸€ä¸ªå³æ‹¬å·æ¥é—­åˆï¼‰ï¼›</p>
</li>
<li>
<p>é‡åˆ°å³æ‹¬å·æ—¶ï¼Œå¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼š</p>
<ul>
<li>è‹¥æ ˆä¸ºç©ºï¼ˆæ²¡æœ‰å¯¹åº”çš„å·¦æ‹¬å·ï¼‰ï¼Œæˆ–å¼¹å‡ºçš„å…ƒç´ ä¸å½“å‰å³æ‹¬å·ä¸åŒ¹é…ï¼Œç›´æ¥è¿”å›<code>false</code>ï¼›</li>
</ul>
</li>
<li>
<p>éå†ç»“æŸåï¼Œè‹¥æ ˆä¸ºç©ºï¼ˆæ‰€æœ‰å·¦æ‹¬å·éƒ½è¢«åŒ¹é…é—­åˆï¼‰ï¼Œè¿”å›<code>true</code>ï¼Œå¦åˆ™è¿”å›<code>false</code>ã€‚</p>
</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/* ç»™å®šä¸€ä¸ªåªåŒ…æ‹¬ '('ï¼Œ')'ï¼Œ'{'ï¼Œ'}'ï¼Œ'['ï¼Œ']' çš„å­—ç¬¦ä¸² s ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚

æœ‰æ•ˆå­—ç¬¦ä¸²éœ€æ»¡è¶³ï¼š

å·¦æ‹¬å·å¿…é¡»ç”¨ç›¸åŒç±»å‹çš„å³æ‹¬å·é—­åˆã€‚
å·¦æ‹¬å·å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºé—­åˆã€‚
æ¯ä¸ªå³æ‹¬å·éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ç›¸åŒç±»å‹çš„å·¦æ‹¬å·ã€‚ */</span>

<span class="hljs-comment">// ç”¨ä¸€ä¸ªmap|jsonæ¥ç»´æŠ¤å·¦æ‹¬å·å’Œå³æ‹¬å·çš„å¯¹åº”å…³ç³»</span>
<span class="hljs-comment">// ç”¨ä¸€ä¸ªæ ˆæ¥ç»´æŠ¤å·¦æ‹¬å· , é‡åˆ°å³æ‹¬å·æ—¶ï¼Œå¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼ŒæŸ¥çœ‹æ˜¯å¦åŒ¹é…</span>
<span class="hljs-comment">// è‹¥ä¸åŒ¹é…æˆ–æ ˆä¸ä¸ºç©ºè¿”å›false,éå†å®Œæ¯•åï¼Œæ ˆä¸ºç©ºï¼Œæœ‰æ•ˆ</span>
<span class="hljs-keyword">const</span> leftToRight = {
    <span class="hljs-string">"("</span> : <span class="hljs-string">")"</span>,
    <span class="hljs-string">"{"</span> : <span class="hljs-string">"}"</span>,
    <span class="hljs-string">"["</span> : <span class="hljs-string">"]"</span>
};
<span class="hljs-keyword">const</span> isValid = <span class="hljs-keyword">function</span>(<span class="hljs-params">s</span>){
    <span class="hljs-keyword">if</span>(!s) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    
    <span class="hljs-keyword">const</span> stack = [];
    <span class="hljs-keyword">const</span> len = s.<span class="hljs-property">length</span>;
    <span class="hljs-keyword">if</span>(len % <span class="hljs-number">2</span> != <span class="hljs-number">0</span>){
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span> ; i &lt; len ; i++){
        <span class="hljs-keyword">const</span> ch = s[i];
    
    <span class="hljs-keyword">if</span> (ch ===<span class="hljs-string">"("</span> || ch === <span class="hljs-string">"{"</span> || ch ===<span class="hljs-string">"["</span>){
        stack.<span class="hljs-title function_">push</span>(leftToRight[ch]);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span>(!stack.<span class="hljs-property">length</span> || stack.<span class="hljs-title function_">pop</span>()!==ch){
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    }
    <span class="hljs-keyword">return</span> !stack.<span class="hljs-property">length</span>;
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/536b704a74104a449b761f4c97868290~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oSP5LmJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764752767&amp;x-signature=GIzGOSoJ8jNAmKog9DU0QxrWaTs%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-17">æ€»ç»“</h3>
<h2 data-id="heading-18">æ ˆæ•°æ®ç»“æ„æ ¸å¿ƒæ€»ç»“</h2>
<ol>
<li>
<p><strong>æ ¸å¿ƒå®šä¹‰</strong>ï¼šéµå¾ª â€œå…ˆè¿›åå‡ºï¼ˆFILOï¼‰â€ çš„çº¿æ€§æ•°æ®ç»“æ„ï¼Œä»…å…è®¸æ ˆé¡¶è¿›è¡Œå…¥æ ˆï¼ˆPushï¼‰ã€å‡ºæ ˆï¼ˆPopï¼‰ã€æŸ¥çœ‹æ ˆé¡¶ï¼ˆPeekï¼‰æ“ä½œã€‚</p>
</li>
<li>
<p><strong>ä¸¤ç§å®ç°</strong>ï¼š</p>
<ul>
<li>æ•°ç»„æ ˆï¼šåŸºäºæ•°ç»„ï¼Œå®ç°ç®€å•ã€å¹³å‡æ•ˆç‡é«˜ï¼Œæ‰©å®¹æ—¶æœ€åæ—¶é—´å¤æ‚åº¦ O (n)ï¼Œå¯èƒ½æœ‰å†…å­˜æµªè´¹ï¼›</li>
<li>é“¾è¡¨æ ˆï¼šåŸºäºå•é“¾è¡¨ï¼Œæ— æ‰©å®¹å‹åŠ›ã€å†…å­˜çµæ´»ï¼Œæ‰€æœ‰æ“ä½œç¨³å®š O (1)ï¼ŒèŠ‚ç‚¹éœ€é¢å¤–å­˜å‚¨æŒ‡é’ˆã€‚</li>
</ul>
</li>
<li>
<p><strong>å¤æ‚åº¦</strong>ï¼šæ—¶é—´å¤æ‚åº¦å‡ä»¥ O (1) ä¸ºä¸»ï¼ˆæ•°ç»„æ ˆæ‰©å®¹é™¤å¤–ï¼‰ï¼Œç©ºé—´å¤æ‚åº¦å‡ä¸º O (n)ï¼Œå·®å¼‚é›†ä¸­åœ¨æ‰©å®¹å¼€é”€å’Œå†…å­˜å ç”¨å½¢å¼ã€‚</p>
</li>
<li>
<p><strong>æ ¸å¿ƒåº”ç”¨</strong>ï¼šæ‹¬å·åŒ¹é…ã€è¡¨è¾¾å¼æ±‚å€¼ã€ç¨‹åºè°ƒç”¨æ ˆã€æµè§ˆå™¨å‰è¿› / åé€€ã€ç¼–è¾‘å™¨æ’¤é”€ç­‰ï¼Œæ ¸å¿ƒæ˜¯åˆ©ç”¨ â€œè®°å¿†é¡ºåºâ€ ç‰¹æ€§è§£å†³åŒ¹é… / å›æº¯é—®é¢˜ã€‚</p>
</li>
<li>
<p><strong>å®æˆ˜æŠ€å·§</strong>ï¼šç»“åˆå“ˆå¸Œè¡¨ä¼˜åŒ–æ˜ å°„ï¼Œé‡è§†è¾¹ç•Œå¤„ç†ï¼Œä»¥ â€œå…¥æ ˆè®°å½•ã€å‡ºæ ˆæ ¡éªŒâ€ ä¸ºæ ¸å¿ƒæ€è·¯ï¼Œå¤æ‚åº¦å¯æ§ã€‚</p>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[èŠ¯ç‰‡æˆ˜æ‰“å“ï¼è°·æ­ŒTPUæŒ‘æˆ˜è‹±ä¼Ÿè¾¾ï¼šAIç®—åŠ›æˆ˜äº‰èƒŒåçš„è¡Œä¸šå˜å±€]]></title>    <link>https://juejin.cn/post/7576843726011203610</link>    <guid>https://juejin.cn/post/7576843726011203610</guid>    <pubDate>2025-11-26T09:37:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576843726011203610" data-draft-id="7576838095519006771" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="èŠ¯ç‰‡æˆ˜æ‰“å“ï¼è°·æ­ŒTPUæŒ‘æˆ˜è‹±ä¼Ÿè¾¾ï¼šAIç®—åŠ›æˆ˜äº‰èƒŒåçš„è¡Œä¸šå˜å±€"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,èŠ¯ç‰‡,NVIDIA"/> <meta itemprop="datePublished" content="2025-11-26T09:37:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç®—å®¶è®¡ç®—"/> <meta itemprop="url" content="https://juejin.cn/user/1426490793396571"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            èŠ¯ç‰‡æˆ˜æ‰“å“ï¼è°·æ­ŒTPUæŒ‘æˆ˜è‹±ä¼Ÿè¾¾ï¼šAIç®—åŠ›æˆ˜äº‰èƒŒåçš„è¡Œä¸šå˜å±€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1426490793396571/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç®—å®¶è®¡ç®—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T09:37:29.000Z" title="Wed Nov 26 2025 09:37:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>è¿‘æ—¥ï¼Œè°·æ­Œå‡­å€Ÿåœ¨TPUä»¥åŠGemini 3æ¨¡å‹æ–¹é¢çš„çªç ´ï¼Œæ­£ç›´æ¥æŒ‘æˆ˜è‹±ä¼Ÿè¾¾çš„ä¸»å¯¼åœ°ä½ã€‚è‹±ä¼Ÿè¾¾å¸‚å€¼åº”å£°è’¸å‘8000äº¿ç¾å…ƒã€‚AIç®—åŠ›æˆ˜äº‰å·²è¿›å…¥ä¸€ä¸ªå·¨å¤´ç«é€ã€æ ¼å±€é‡å¡‘çš„æ–°é˜¶æ®µã€‚</p>
</blockquote>
<p>äººå·¥æ™ºèƒ½ç®—åŠ›å¸‚åœºæ­£åœ¨ç»å†ä¸€åœºæ·±åˆ»çš„æ ¼å±€é‡å¡‘ã€‚è°·æ­Œä¸è‹±ä¼Ÿè¾¾ä¹‹é—´çš„èŠ¯ç‰‡ç«äº‰å‘ˆç°ç™½çƒ­åŒ–è¶‹åŠ¿ã€‚</p>
<p>è°·æ­Œå‡­å€Ÿå…¶TPUçš„çªç ´æ€§è¿›å±•ï¼Œæ­£ç›´æ¥æŒ‘æˆ˜è‹±ä¼Ÿè¾¾åœ¨AIåŠ é€Ÿå™¨å¸‚åœºé•¿æœŸä»¥æ¥çš„ç»Ÿæ²»åœ°ä½ã€‚</p>
<p>Alphabetç¬¬ä¸ƒä»£Ironwood v7 TPUåœ¨AIç¡¬ä»¶æ•ˆç‡æ–¹é¢å®ç°äº†é‡å­è·ƒè¿ï¼Œåœ¨å¤„ç†æ¨ç†å·¥ä½œè´Ÿè½½æ—¶è¡¨ç°å‡ºå“è¶Šçš„æˆæœ¬æ•ˆç›Šå’Œèƒ½æºæ•ˆç‡ï¼Œè€Œè¿™æ­£æ˜¯è§„æ¨¡åŒ–éƒ¨ç½²AIæ¨¡å‹çš„å…³é”®ç¯èŠ‚ã€‚</p>
<p><strong>è°·æ­Œç¡¬ä»¶çªç ´ï¼Œè‹±ä¼Ÿè¾¾æš´è·Œ</strong></p>
<p>ä¸Šå‘¨ï¼Œè°·æ­Œå‘å¸ƒå…¶æœ€æ–°çš„å¤§å‹è¯­è¨€æ¨¡å‹ Gemini 3ï¼Œæ€§èƒ½è¶…è¶Šä¸€ä¼—é¡¶å°–æ¨¡å‹ã€‚è¿™æ¬¾æ¨¡å‹ä½¿ç”¨äº†TPU è€Œéè‹±ä¼Ÿè¾¾èŠ¯ç‰‡è¿›è¡Œè®­ç»ƒã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/252ef5f5e05e45a788c3da85dfb06142~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg566X5a626K6h566X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764754648&amp;x-signature=wuV0oK%2FU4oHrCkr8dl52xIiFaoQ%3D" alt="æ¶ˆæ¯ç§° Meta æ­£å°±ä¸ºè‡ªæœ‰æ•°æ®ä¸­å¿ƒå¯¼å…¥ TPU AI èŠ¯ç‰‡ä¸è°·æ­Œæ´½è°ˆ" loading="lazy"/></p>
<p>åŒæ—¶ï¼Œè°·æ­Œçš„TPUç­–ç•¥æ­£ä»å†…éƒ¨ä½¿ç”¨è½¬å‘å¤–éƒ¨ä¾›åº”ã€‚æ®The InformationæŠ¥é“ï¼Œè°·æ­Œå·²å¼€å§‹å‘Metaç­‰æ½œåœ¨å®¢æˆ·æ¨é”€åœ¨å…¶æ•°æ®ä¸­å¿ƒä½¿ç”¨TPUã€‚è¿™ä¸€è½¬å˜æ ‡å¿—ç€è°·æ­Œæˆ˜ç•¥çš„æ ¹æœ¬æ€§è°ƒæ•´ï¼Œæ­¤å‰å…¶TPUä»…é€šè¿‡äº‘è®¡ç®—æœåŠ¡å‘å®¢æˆ·æä¾›ç§Ÿèµã€‚</p>
<p>å¸‚åœºå¯¹è°·æ­ŒTPUçš„è®¤å¯åº¦æ­£è¿…é€Ÿæå‡ã€‚è°·æ­Œä¸AIåˆåˆ›å…¬å¸Anthropicç­¾ç½²åè®®ï¼Œå°†å‘å…¶æä¾›é«˜è¾¾100ä¸‡é¢—TPUèŠ¯ç‰‡ã€‚åŒæ—¶ï¼Œè°·æ­Œäº‘å†…éƒ¨é«˜ç®¡é€éœ²ï¼Œæ‰©å¤§TPUçš„åº”ç”¨èŒƒå›´æˆ–æœ‰åŠ©äºå…¬å¸ä»è‹±ä¼Ÿè¾¾æ‰‹ä¸­å¤ºå–é«˜è¾¾10%çš„å¹´æ”¶å…¥ï¼Œä»·å€¼æ•°åäº¿ç¾å…ƒã€‚</p>
<p>å—æ­¤å½±å“ï¼Œè‹±ä¼Ÿè¾¾è‚¡ä»·é­é‡å¤§å¹…æ³¢åŠ¨ã€‚å½“åœ°æ—¶é—´11æœˆ25æ—¥ç¾è‚¡ç›˜ä¸­ï¼Œè‹±ä¼Ÿè¾¾è‚¡ä»·ä¸€åº¦é‡æŒ«é€¾7%ï¼Œè™½éšåè·Œå¹…æ”¶çª„ï¼Œä½†æœ€ç»ˆä»æ”¶è·Œ2.59%ã€‚ä»10æœˆåº•çš„å†å²é«˜ç‚¹è‡³ä»Šï¼Œè‹±ä¼Ÿè¾¾è‚¡ä»·å·²ä¸‹è·Œçº¦16%ï¼Œå¸‚å€¼è’¸å‘è¶…è¿‡8000äº¿ç¾å…ƒã€‚</p>
<p>æ­¤æ¬¡ä¸‹è·Œè¿˜æ³¢åŠå¤šå®¶ä¸è‹±ä¼Ÿè¾¾ç›¸å…³çš„ä¼ä¸šï¼ŒåŒ…æ‹¬æœåŠ¡å™¨åˆ¶é€ å•†Super Micro Computerå’Œæ•°æ®ä¸­å¿ƒè¿è¥å•†CoreWeaveã€‚</p>
<p>é¢å¯¹å¸‚åœºæ³¢åŠ¨ï¼Œè‹±ä¼Ÿè¾¾é‡‡å–äº†ç½•è§çš„å…¬å¼€å›åº”æªæ–½ã€‚å…¶åœ¨ç¤¾äº¤å¹³å°Xä¸Šå‘æ–‡è¡¨ç¤ºï¼Œæˆ‘ä»¬å¯¹è°·æ­Œçš„æˆåŠŸæ„Ÿåˆ°é«˜å…´â€”â€”ä»–ä»¬åœ¨äººå·¥æ™ºèƒ½æ–¹é¢å–å¾—äº†å·¨å¤§è¿›å±•ï¼Œè€Œæˆ‘ä»¬ä¹Ÿå°†ç»§ç»­å‘è°·æ­Œä¾›è´§ã€‚è‹±ä¼Ÿè¾¾å¼ºè°ƒå…¶æŠ€æœ¯ä¾ç„¶é¢†å…ˆè¡Œä¸šä¸€ä»£ï¼Œæ˜¯å”¯ä¸€èƒ½å¤Ÿè¿è¡Œæ‰€æœ‰äººå·¥æ™ºèƒ½æ¨¡å‹å¹¶åº”ç”¨äºæ‰€æœ‰è®¡ç®—åœºæ™¯çš„å¹³å°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a2cd5ddb2fa946e3bda41312629a689b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg566X5a626K6h566X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764754648&amp;x-signature=8SLn2Ej1ZQ%2FHll46nhQ%2FCHrh9lE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è‹±ä¼Ÿè¾¾åœ¨å£°æ˜ä¸­è¿˜ç‰¹åˆ«æŒ‡å‡ºï¼Œä¸ä¸“ä¸ºç‰¹å®šAIæ¡†æ¶æˆ–åŠŸèƒ½è®¾è®¡çš„ASICèŠ¯ç‰‡ç›¸æ¯”ï¼Œè‹±ä¼Ÿè¾¾æä¾›æ›´é«˜çš„æ€§èƒ½ã€æ›´å¼ºçš„é€šç”¨æ€§ä»¥åŠæ›´å¥½çš„å¯æ›¿ä»£æ€§ã€‚è¿™ä¸€è¡¨æ€ç›´æ¥å›åº”äº†è°·æ­ŒTPUå¸¦æ¥çš„ç«äº‰å‹åŠ›ã€‚</p>
<p>ä»è¡Œä¸šå‘å±•è§’åº¦çœ‹ï¼Œå¤§æ¨¡å‹ç®—åŠ›å·²æˆä¸ºæ”¯æ’‘AIäº§ä¸šå‘å±•çš„å…³é”®åŸºçŸ³ã€‚æ ¹æ®ç®—åŠ›äº§ä¸šå‘å±•æ–¹é˜µæœ€æ–°å‘å¸ƒçš„ã€Šå¤§æ¨¡å‹ç®—åŠ›å‘å±•ç ”ç©¶æŠ¥å‘Š(2025)ã€‹ï¼Œä»¥å¤§æ¨¡å‹ä¸ºæ ¸å¿ƒçš„æ–°ä¸€ä»£äººå·¥æ™ºèƒ½æŠ€æœ¯æ­£ä»¥å‰æ‰€æœªæœ‰çš„æ¸—é€åŠ›é‡å¡‘äº§ä¸šæ™ºèƒ½åŒ–è·¯å¾„ã€é©æ–°ç¤¾ä¼šæœåŠ¡å½¢æ€ï¼Œæ¨åŠ¨å…¨çƒæ•°å­—ç»æµè¿ˆå…¥ç®—åŠ›é©±åŠ¨çš„æ–°é˜¶æ®µã€‚</p>
<p>éšç€è°·æ­ŒTPUè·å¾—å¸‚åœºè®¤å¯ï¼Œè‹±ä¼Ÿè¾¾é¢ä¸´ç€ä¸€ä¸ªè½¬æŠ˜ç‚¹ã€‚è™½ç„¶è‹±ä¼Ÿè¾¾åœ¨AIèŠ¯ç‰‡å¸‚åœºä»å æœ‰è¶…è¿‡90%çš„ä»½é¢ï¼Œä½†å…¶é¦–å¸­æ‰§è¡Œå®˜é»„ä»å‹‹åœ¨è¿‘æœŸçš„å†…éƒ¨ä¼šè®®ä¸­å¦è¨€ï¼Œå…¬å¸å·²é™·å…¥æŸç§æ— èµ¢å±€é¢ã€‚ä»–æŒ‡å‡ºï¼Œå¦‚æœæˆ‘ä»¬äº¤å‡ºç³Ÿç³•çš„å­£æŠ¥ï¼Œå“ªæ€•åªæ˜¯å·®ä¸€ç‚¹ç‚¹ï¼Œçœ‹èµ·æ¥æœ‰ä¸€ç‚¹ç‚¹ä¸ç¨³ï¼Œæ•´ä¸ªä¸–ç•Œå°±ä¼šå´©æºƒã€‚</p>
<p>AIç®—åŠ›ç«äº‰çš„æœ¬è´¨æ˜¯ç”Ÿæ€ç³»ç»Ÿçš„ç«äº‰ã€‚è‹±ä¼Ÿè¾¾å‡­å€Ÿå…¶CUDAç”Ÿæ€ç³»ç»Ÿæ„å»ºäº†å¼ºå¤§çš„æŠ¤åŸæ²³ï¼Œè€Œè°·æ­Œåˆ™é€šè¿‡å‚ç›´æ•´åˆå’Œäº‘AIååŒç­–ç•¥å¯»æ±‚çªç ´ã€‚æœªæ¥ç«äº‰çš„å…³é”®åœ¨äºï¼Œè°èƒ½æ›´å¥½åœ°æ»¡è¶³ä¼ä¸šå¯¹æˆæœ¬æ•ˆç‡ã€é€šç”¨æ€§å’Œæ˜“ç”¨æ€§çš„ç»¼åˆéœ€æ±‚ã€‚</p>
<p>å½“å‰AIç®—åŠ›å¸‚åœºçš„æ¿€çƒˆç«äº‰ï¼Œåæ˜ å‡ºæ•´ä¸ªè¡Œä¸šæ­£ä»åˆæœŸçš„ç¡¬ä»¶å†›å¤‡ç«èµ›è½¬å‘æ›´åŠ æ³¨é‡å®é™…åº”ç”¨ä»·å€¼å’ŒæŠ•èµ„å›æŠ¥çš„æ–°é˜¶æ®µã€‚</p>
<p>è¿™åœºå›´ç»•AIç®—åŠ›å±•å¼€çš„å·¨å¤´ä¹‹äº‰ï¼Œæ¸…æ™°åœ°é¢„ç¤ºç€ä¸€ä¸ªå¤šå…ƒåŒ–ã€ä¸“ä¸šåŒ–èŠ¯ç‰‡æ—¶ä»£çš„åˆ°æ¥ã€‚<br/>
å½“ç„¶ï¼Œå¯¹äºå¤§å¤šæ•°ä¼ä¸šå’Œå¼€å‘è€…è€Œè¨€ï¼Œæ ¸å¿ƒé—®é¢˜å¹¶éåœ¨è°·æ­ŒTPUä¸è‹±ä¼Ÿè¾¾GPUä¹‹é—´åšå‡ºéæ­¤å³å½¼çš„é€‰æ‹©ï¼Œè€Œæ˜¯å¦‚ä½•ä»¥æœ€ä½çš„è¯•é”™æˆæœ¬å’Œæœ€é«˜çš„æ•ˆç‡ï¼Œè·å–ç¨³å®šã€å¯é ä¸”ç»æµçš„ç®—åŠ›ï¼Œä»¥æ”¯æ’‘è‡ªèº«çš„AIåˆ›æ–°ä¸è¿­ä»£ã€‚</p>
<p><strong>å†™åœ¨æœ€å</strong>ï¼šå¦‚æœæ‚¨æ­£åœ¨è¿›è¡ŒAIé¢†åŸŸçš„åˆ›ä¸šæˆ–ç ”ç©¶ï¼Œå´å—å›°äºé«˜æ˜‚çš„ç®—åŠ›æˆæœ¬æˆ–é«˜å¹¶å‘ä¸‹çš„æ¨ç†ç¨³å®šæ€§ç­‰é—®é¢˜ï¼Œæ¬¢è¿ç•™è¨€æˆ–ç§ä¿¡æˆ‘ä»¬ï¼Œæ‰¾åˆ°æ‚¨çš„é™æœ¬å¢æ•ˆçªç ´å£~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Springbootå¯¹æ¥mqtt]]></title>    <link>https://juejin.cn/post/7576843726010564634</link>    <guid>https://juejin.cn/post/7576843726010564634</guid>    <pubDate>2025-11-26T07:54:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576843726010564634" data-draft-id="7576843726010515482" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Springbootå¯¹æ¥mqtt"/> <meta itemprop="keywords" content="åç«¯,Java,Spring Boot"/> <meta itemprop="datePublished" content="2025-11-26T07:54:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITç•ŒTonyå“¥"/> <meta itemprop="url" content="https://juejin.cn/user/3157453122578087"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Springbootå¯¹æ¥mqtt
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3157453122578087/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITç•ŒTonyå“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T07:54:57.000Z" title="Wed Nov 26 2025 07:54:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨Spring Bootä¸­å¯¹æ¥MQTTåè®®ï¼Œå¯ä»¥ä½¿ç”¨<code>Eclipse Paho</code>å®¢æˆ·ç«¯å’ŒSpring Integration MQTTæ¨¡å—ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†å®ç°æ­¥éª¤ï¼š</p>
<h2 data-id="heading-0">1. æ·»åŠ ä¾èµ–</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Spring Boot Starter --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- Spring Integration MQTT --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.integration<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-integration-mqtt<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- Eclipse Paho MQTT Client --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.eclipse.paho<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>org.eclipse.paho.client.mqttv3<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h2 data-id="heading-1">2. é…ç½®MQTTè¿æ¥å‚æ•°</h2>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application.yml</span>
<span class="hljs-attr">mqtt:</span>
  <span class="hljs-attr">broker-url:</span> <span class="hljs-string">tcp://localhost:1883</span>
  <span class="hljs-attr">username:</span> <span class="hljs-string">admin</span>
  <span class="hljs-attr">password:</span> <span class="hljs-string">password</span>
  <span class="hljs-attr">client-id:</span> <span class="hljs-string">spring-boot-client</span>
  <span class="hljs-attr">default-topic:</span> <span class="hljs-string">test/topic</span>
  <span class="hljs-attr">timeout:</span> <span class="hljs-number">30</span>
  <span class="hljs-attr">keepalive:</span> <span class="hljs-number">60</span>
  <span class="hljs-attr">completion-timeout:</span> <span class="hljs-number">30000</span>
</code></pre>
<h2 data-id="heading-2">3. MQTTé…ç½®ç±»</h2>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@Configuration</span>
<span class="hljs-keyword">@EnableConfigurationProperties</span>(MqttProperties.class)
public class MqttConfig {

    <span class="hljs-keyword">@Autowired</span>
    private MqttProperties mqttProperties;

    <span class="hljs-comment">// MQTTè¿æ¥é…ç½®</span>
    <span class="hljs-keyword">@Bean</span>
    public MqttConnectOptions mqttConnectOptions() {
        MqttConnectOptions options = new <span class="hljs-built_in">MqttConnectOptions</span>();
        options<span class="hljs-selector-class">.setServerURIs</span>(new String[]{mqttProperties.getBrokerUrl()});
        options<span class="hljs-selector-class">.setUserName</span>(mqttProperties.getUsername());
        options<span class="hljs-selector-class">.setPassword</span>(mqttProperties.getPassword()<span class="hljs-selector-class">.toCharArray</span>());
        options<span class="hljs-selector-class">.setConnectionTimeout</span>(mqttProperties.getTimeout());
        options<span class="hljs-selector-class">.setKeepAliveInterval</span>(mqttProperties.getKeepalive());
        options<span class="hljs-selector-class">.setAutomaticReconnect</span>(true);
        options<span class="hljs-selector-class">.setCleanSession</span>(true);
        return options;
    }

    <span class="hljs-comment">// MQTTå®¢æˆ·ç«¯å·¥å‚</span>
    <span class="hljs-keyword">@Bean</span>
    public MqttPahoClientFactory mqttClientFactory() {
        DefaultMqttPahoClientFactory factory = new <span class="hljs-built_in">DefaultMqttPahoClientFactory</span>();
        factory<span class="hljs-selector-class">.setConnectionOptions</span>(mqttConnectOptions());
        return factory;
    }

    <span class="hljs-comment">// å‡ºç«™æ¶ˆæ¯é€šé“ï¼ˆç”¨äºå‘é€æ¶ˆæ¯ï¼‰</span>
    <span class="hljs-keyword">@Bean</span>
    <span class="hljs-keyword">@ServiceActivator</span>(inputChannel = <span class="hljs-string">"mqttOutboundChannel"</span>)
    public MessageHandler mqttOutbound() {
        MqttPahoMessageHandler messageHandler = 
            new <span class="hljs-built_in">MqttPahoMessageHandler</span>(mqttProperties.getClientId() + "-producer", <span class="hljs-built_in">mqttClientFactory</span>());
        messageHandler<span class="hljs-selector-class">.setAsync</span>(true);
        messageHandler<span class="hljs-selector-class">.setDefaultTopic</span>(mqttProperties.getDefaultTopic());
        return messageHandler;
    }

    <span class="hljs-comment">// å‡ºç«™é€šé“</span>
    <span class="hljs-keyword">@Bean</span>
    public MessageChannel mqttOutboundChannel() {
        return new <span class="hljs-built_in">DirectChannel</span>();
    }

    <span class="hljs-comment">// å…¥ç«™æ¶ˆæ¯é€‚é…å™¨ï¼ˆç”¨äºæ¥æ”¶æ¶ˆæ¯ï¼‰</span>
    <span class="hljs-keyword">@Bean</span>
    public MessageProducer inbound() {
        MqttPahoMessageDrivenChannelAdapter adapter = 
            new <span class="hljs-built_in">MqttPahoMessageDrivenChannelAdapter</span>(mqttProperties.getClientId() + "-consumer", 
                                                   <span class="hljs-built_in">mqttClientFactory</span>(), mqttProperties<span class="hljs-selector-class">.getDefaultTopic</span>());
        adapter<span class="hljs-selector-class">.setCompletionTimeout</span>(mqttProperties.getCompletionTimeout());
        adapter<span class="hljs-selector-class">.setConverter</span>(new DefaultPahoMessageConverter());
        adapter<span class="hljs-selector-class">.setQos</span>(<span class="hljs-number">1</span>);
        adapter<span class="hljs-selector-class">.setOutputChannel</span>(mqttInboundChannel());
        return adapter;
    }

    <span class="hljs-comment">// å…¥ç«™é€šé“</span>
    <span class="hljs-keyword">@Bean</span>
    public MessageChannel mqttInboundChannel() {
        return new <span class="hljs-built_in">DirectChannel</span>();
    }

    <span class="hljs-comment">// å…¥ç«™æ¶ˆæ¯å¤„ç†å™¨</span>
    <span class="hljs-keyword">@Bean</span>
    <span class="hljs-keyword">@ServiceActivator</span>(inputChannel = <span class="hljs-string">"mqttInboundChannel"</span>)
    public MessageHandler handler() {
        return new <span class="hljs-built_in">MessageHandler</span>() {
            <span class="hljs-keyword">@Override</span>
            public void handleMessage(Message&lt;?&gt; message) throws MessagingException {
                String topic = (String) message<span class="hljs-selector-class">.getHeaders</span>()<span class="hljs-selector-class">.get</span>("mqtt_receivedTopic");
                String payload = (String) message<span class="hljs-selector-class">.getPayload</span>();
                System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>("Received message from topic: " + topic + ", payload: " + payload);
                <span class="hljs-comment">// å¤„ç†æ¥æ”¶åˆ°çš„æ¶ˆæ¯</span>
                <span class="hljs-built_in">processMessage</span>(topic, payload);
            }
        };
    }
}
</code></pre>
<h2 data-id="heading-3">4. é…ç½®å±æ€§ç±»</h2>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@ConfigurationProperties</span>(prefix = <span class="hljs-string">"mqtt"</span>)
<span class="hljs-variable">@Component</span>
<span class="hljs-variable">@Data</span>
public class MqttProperties {
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">brokerUrl</span>;
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">username</span>;
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">password</span>;
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">clientId</span>;
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">defaultTopic</span>;
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">int</span> <span class="hljs-selector-tag">timeout</span>;
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">int</span> <span class="hljs-selector-tag">keepalive</span>;
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">int</span> <span class="hljs-selector-tag">completionTimeout</span>;
}
</code></pre>
<h2 data-id="heading-4">5. MQTTæœåŠ¡ç±»</h2>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MqttService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">MessageChannel</span> mqttOutboundChannel;

    <span class="hljs-comment">// å‘é€æ¶ˆæ¯åˆ°æŒ‡å®šä¸»é¢˜</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">sendMessage</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> topic, <span class="hljs-built_in">String</span> message</span>) {
        mqttOutboundChannel.<span class="hljs-title function_">send</span>(<span class="hljs-title class_">MessageBuilder</span>.<span class="hljs-title function_">withPayload</span>(message)
                .<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"mqtt_topic"</span>, topic)
                .<span class="hljs-title function_">build</span>());
    }

    <span class="hljs-comment">// å‘é€æ¶ˆæ¯åˆ°é»˜è®¤ä¸»é¢˜</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">sendMessage</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> message</span>) {
        mqttOutboundChannel.<span class="hljs-title function_">send</span>(<span class="hljs-title class_">MessageBuilder</span>.<span class="hljs-title function_">withPayload</span>(message).<span class="hljs-title function_">build</span>());
    }

    <span class="hljs-comment">// å‘é€å¸¦QoSçš„æ¶ˆæ¯</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">sendMessage</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> topic, <span class="hljs-built_in">String</span> message, int qos</span>) {
        mqttOutboundChannel.<span class="hljs-title function_">send</span>(<span class="hljs-title class_">MessageBuilder</span>.<span class="hljs-title function_">withPayload</span>(message)
                .<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"mqtt_topic"</span>, topic)
                .<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"mqtt_qos"</span>, qos)
                .<span class="hljs-title function_">build</span>());
    }
}
</code></pre>
<h2 data-id="heading-5">6. æ¶ˆæ¯å¤„ç†å™¨</h2>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MqttMessageProcessor</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final <span class="hljs-title class_">Logger</span> logger = <span class="hljs-title class_">LoggerFactory</span>.<span class="hljs-title function_">getLogger</span>(<span class="hljs-title class_">MqttMessageProcessor</span>.<span class="hljs-property">class</span>);

    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">processMessage</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> topic, <span class="hljs-built_in">String</span> payload</span>) {
        logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Processing MQTT message - Topic: {}, Payload: {}"</span>, topic, payload);
        
        <span class="hljs-comment">// æ ¹æ®ä¸åŒçš„ä¸»é¢˜è¿›è¡Œä¸åŒçš„å¤„ç†</span>
        <span class="hljs-keyword">switch</span> (topic) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">"test/topic"</span>:
                <span class="hljs-title function_">handleTestTopic</span>(payload);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"sensor/data"</span>:
                <span class="hljs-title function_">handleSensorData</span>(payload);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-attr">default</span>:
                <span class="hljs-title function_">handleDefaultMessage</span>(topic, payload);
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">handleTestTopic</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> payload</span>) {
        logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">"å¤„ç†æµ‹è¯•ä¸»é¢˜æ¶ˆæ¯: {}"</span>, payload);
        <span class="hljs-comment">// å…·ä½“çš„ä¸šåŠ¡é€»è¾‘</span>
    }

    <span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">handleSensorData</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> payload</span>) {
        logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">"å¤„ç†ä¼ æ„Ÿå™¨æ•°æ®: {}"</span>, payload);
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// è§£æJSONæ•°æ®ç­‰æ“ä½œ</span>
            <span class="hljs-comment">// ObjectMapper mapper = new ObjectMapper();</span>
            <span class="hljs-comment">// SensorData data = mapper.readValue(payload, SensorData.class);</span>
        } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">Exception</span> e) {
            logger.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è§£æä¼ æ„Ÿå™¨æ•°æ®å¤±è´¥"</span>, e);
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">handleDefaultMessage</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> topic, <span class="hljs-built_in">String</span> payload</span>) {
        logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">"å¤„ç†é»˜è®¤æ¶ˆæ¯ - Topic: {}, Payload: {}"</span>, topic, payload);
    }
}
</code></pre>
<h2 data-id="heading-6">7. æ§åˆ¶å™¨ç¤ºä¾‹</h2>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@RestController</span>
<span class="hljs-variable">@RequestMapping</span>(<span class="hljs-string">"/mqtt"</span>)
public class MqttController {

    <span class="hljs-variable">@Autowired</span>
    private MqttService mqttService;

    <span class="hljs-variable">@PostMapping</span>(<span class="hljs-string">"/publish"</span>)
    public ResponseEntity&lt;String&gt; <span class="hljs-built_in">publishMessage</span>(<span class="hljs-variable">@RequestParam</span> String topic, 
                                               <span class="hljs-variable">@RequestParam</span> String message) {
        <span class="hljs-selector-tag">try</span> {
            <span class="hljs-selector-tag">mqttService</span><span class="hljs-selector-class">.sendMessage</span>(topic, message);
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.ok</span>(<span class="hljs-string">"Message published successfully"</span>);
        } <span class="hljs-selector-tag">catch</span> (Exception e) {
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.status</span>(<span class="hljs-number">500</span>)<span class="hljs-selector-class">.body</span>(<span class="hljs-string">"Failed to publish message: "</span> + e.<span class="hljs-built_in">getMessage</span>());
        }
    }

    @<span class="hljs-selector-tag">PostMapping</span>(<span class="hljs-string">"/publish/default"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">ResponseEntity</span>&lt;<span class="hljs-selector-tag">String</span>&gt; <span class="hljs-selector-tag">publishToDefaultTopic</span>(<span class="hljs-variable">@RequestParam</span> String message) {
        <span class="hljs-selector-tag">try</span> {
            <span class="hljs-selector-tag">mqttService</span><span class="hljs-selector-class">.sendMessage</span>(message);
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.ok</span>(<span class="hljs-string">"Message published to default topic"</span>);
        } <span class="hljs-selector-tag">catch</span> (Exception e) {
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.status</span>(<span class="hljs-number">500</span>)<span class="hljs-selector-class">.body</span>(<span class="hljs-string">"Failed to publish message: "</span> + e.<span class="hljs-built_in">getMessage</span>());
        }
    }
}
</code></pre>
<h2 data-id="heading-7">8. ä¸»åº”ç”¨ç±»</h2>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@SpringBootApplication</span>
<span class="hljs-variable">@EnableConfigurationProperties</span>
public class MqttApplication {
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">static</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">main</span>(String[] args) {
        <span class="hljs-selector-tag">SpringApplication</span><span class="hljs-selector-class">.run</span>(MqttApplication.class, args);
    }
}
</code></pre>
<h2 data-id="heading-8">9. æµ‹è¯•MQTTæœåŠ¡</h2>
<p>å¯ä»¥ä½¿ç”¨MQTT.fxæˆ–å…¶ä»–MQTTå®¢æˆ·ç«¯å·¥å…·è¿›è¡Œæµ‹è¯•ï¼š</p>
<ol>
<li>å¯åŠ¨Spring Bootåº”ç”¨</li>
<li>ä½¿ç”¨MQTTå®¢æˆ·ç«¯è®¢é˜…ä¸»é¢˜ <code>test/topic</code></li>
<li>è°ƒç”¨APIå‘é€æ¶ˆæ¯ï¼š</li>
</ol>
<pre><code class="hljs language-arduino" lang="arduino">curl -X POST <span class="hljs-string">"http://localhost:8080/mqtt/publish?topic=test/topic&amp;message=Hello MQTT"</span>
</code></pre>
<h2 data-id="heading-9">ä¸»è¦ç‰¹æ€§</h2>
<ul>
<li><strong>è‡ªåŠ¨é‡è¿</strong>: é…ç½®äº†è‡ªåŠ¨é‡è¿æœºåˆ¶</li>
<li><strong>QoSæ”¯æŒ</strong>: æ”¯æŒä¸åŒçš„æœåŠ¡è´¨é‡ç­‰çº§</li>
<li><strong>å¤šä¸»é¢˜è®¢é˜…</strong>: å¯ä»¥è®¢é˜…å¤šä¸ªä¸»é¢˜</li>
<li><strong>å¼‚æ­¥å¤„ç†</strong>: æ¶ˆæ¯å‘é€æ”¯æŒå¼‚æ­¥æ¨¡å¼</li>
<li><strong>é…ç½®çµæ´»</strong>: é€šè¿‡é…ç½®æ–‡ä»¶ç®¡ç†è¿æ¥å‚æ•°</li>
</ul>
<p>è¿™æ ·ä½ å°±å®ç°äº†ä¸€ä¸ªå®Œæ•´çš„Spring Boot MQTTé›†æˆæ–¹æ¡ˆï¼Œå¯ä»¥æ–¹ä¾¿åœ°è¿›è¡Œæ¶ˆæ¯çš„å‘å¸ƒå’Œè®¢é˜…ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vite 5.0å®æˆ˜ï¼š10ä¸ªä½ å¯èƒ½ä¸çŸ¥é“çš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§ä¸æ’ä»¶ç”Ÿæ€æ·±åº¦è§£æ]]></title>    <link>https://juejin.cn/post/7576378563546857524</link>    <guid>https://juejin.cn/post/7576378563546857524</guid>    <pubDate>2025-11-25T04:16:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576378563546857524" data-draft-id="7576208176007053364" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vite 5.0å®æˆ˜ï¼š10ä¸ªä½ å¯èƒ½ä¸çŸ¥é“çš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§ä¸æ’ä»¶ç”Ÿæ€æ·±åº¦è§£æ"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-25T04:16:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="IT_é™ˆå¯’"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vite 5.0å®æˆ˜ï¼š10ä¸ªä½ å¯èƒ½ä¸çŸ¥é“çš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§ä¸æ’ä»¶ç”Ÿæ€æ·±åº¦è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    IT_é™ˆå¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T04:16:57.000Z" title="Tue Nov 25 2025 04:16:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    21
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Vite 5.0å®æˆ˜ï¼š10ä¸ªä½ å¯èƒ½ä¸çŸ¥é“çš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§ä¸æ’ä»¶ç”Ÿæ€æ·±åº¦è§£æ</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>éšç€å‰ç«¯å·¥ç¨‹çš„æ—¥ç›Šå¤æ‚ï¼Œæ„å»ºå·¥å…·çš„æ€§èƒ½å’Œå¼€å‘ä½“éªŒæˆä¸ºå¼€å‘è€…å…³æ³¨çš„ç„¦ç‚¹ã€‚Viteä½œä¸ºæ–°ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·ï¼Œå‡­å€Ÿå…¶åŸºäºESMçš„å³æ—¶æœåŠ¡å™¨å¯åŠ¨å’Œé—ªç”µèˆ¬çš„HMRï¼ˆçƒ­æ¨¡å—æ›¿æ¢ï¼‰ï¼Œå·²ç»æˆä¸ºReactã€Vueç­‰ç°ä»£æ¡†æ¶çš„é¦–é€‰æ„å»ºæ–¹æ¡ˆã€‚2023å¹´åº•å‘å¸ƒçš„Vite 5.0åœ¨æ€§èƒ½ä¼˜åŒ–å’Œæ’ä»¶ç”Ÿæ€ä¸Šå¸¦æ¥äº†æ›´å¤šçªç ´æ€§æ”¹è¿›ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥å‰–æVite 5.0çš„æ ¸å¿ƒä¼˜åŒ–ç­–ç•¥ï¼Œæ­ç¤º10ä¸ªé²œä¸ºäººçŸ¥ä½†æå…·ä»·å€¼çš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§ï¼Œå¹¶ç³»ç»Ÿè§£æå…¶æ’ä»¶ç”Ÿæ€çš„è®¾è®¡å“²å­¦ä¸æœ€ä½³å®è·µã€‚æ— è®ºä½ æ˜¯æ­£åœ¨è¯„ä¼°æ„å»ºå·¥å…·çš„æ¶æ„å¸ˆï¼Œè¿˜æ˜¯å¯»æ±‚æè‡´å¼€å‘ä½“éªŒçš„ä¸€çº¿å¼€å‘è€…ï¼Œè¿™äº›å†…å®¹éƒ½å°†ä¸ºä½ å¸¦æ¥å…¨æ–°è§†è§’ã€‚</p>
<h2 data-id="heading-2">ä¸€ã€Vite 5.0æ¶æ„ç²¾è¦</h2>
<h3 data-id="heading-3">1.1 ä¾èµ–é¢„æ„å»ºçš„è¿›åŒ–</h3>
<p>Vite 5.0å¯¹<code>optimizeDeps</code>æœºåˆ¶è¿›è¡Œäº†é‡å¤§é‡æ„ï¼š</p>
<ul>
<li><strong>æ™ºèƒ½ç¼“å­˜å¤±æ•ˆ</strong>ï¼šç°åœ¨é€šè¿‡å†…å®¹å“ˆå¸Œè€Œéæ–‡ä»¶ä¿®æ”¹æ—¶é—´åˆ¤æ–­ä¾èµ–å˜æ›´</li>
<li><strong>å¹¶è¡ŒåŒ–å¤„ç†</strong>ï¼šåˆ©ç”¨Workerçº¿ç¨‹æ± åŠ é€Ÿé¢„æ„å»ºè¿‡ç¨‹</li>
<li><strong>TSç±»å‹ä¿ç•™</strong>ï¼šå®éªŒæ€§æ”¯æŒ.d.tsæ–‡ä»¶ä¿ç•™ï¼Œæå‡Monorepoåœºæ™¯ä¸‹çš„ç±»å‹æç¤º</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">optimizeDeps</span>: {
    <span class="hljs-attr">include</span>: [<span class="hljs-string">'lodash-es'</span>],
    <span class="hljs-attr">exclude</span>: [<span class="hljs-string">'vue-demi'</span>], 
    <span class="hljs-attr">needsInterop</span>: [<span class="hljs-string">'special-pkg'</span>]
  }
})
</code></pre>
<h3 data-id="heading-4">1.2 Rusté©±åŠ¨çš„ç¼–è¯‘æµæ°´çº¿</h3>
<p>é€šè¿‡é›†æˆRolldownï¼ˆRustå®ç°çš„Rollupï¼‰ï¼ŒVite 5.0å®ç°äº†ï¼š</p>
<ul>
<li>SSRæ„å»ºé€Ÿåº¦æå‡40%</li>
<li>Tree-shakingæ•ˆç‡æé«˜15%</li>
<li>Sourcemapç”Ÿæˆè€—æ—¶å‡å°‘30%</li>
</ul>
<h2 data-id="heading-5">äºŒã€10ä¸ªè¿›é˜¶æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h2>
<h3 data-id="heading-6">2.1 CSSä»£ç åˆ†å‰²çš„é»‘ç§‘æŠ€</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¯ç”¨CSSæœ€å°å—åˆ†å‰²ï¼ˆå®éªŒæ€§ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">experimental</span>: {
    <span class="hljs-attr">cssMinify</span>: <span class="hljs-string">'lightningcss'</span>
  },
  <span class="hljs-attr">build</span>: {
    <span class="hljs-attr">cssCodeSplit</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">cssTarget</span>: <span class="hljs-string">'chrome61'</span> <span class="hljs-comment">// é’ˆå¯¹ç‰¹å®šæµè§ˆå™¨ä¼˜åŒ–</span>
  }
})
</code></pre>
<p>æ­¤é…ç½®å¯å‡å°‘30%-50%çš„å…³é”®CSSä½“ç§¯ã€‚</p>
<h3 data-id="heading-7">2.2 Smart Import Analysisâ„¢æŠ€æœ¯</h3>
<p>åˆ©ç”¨<code>@vitejs/plugin-analysis</code>å¯è§†åŒ–åŒ…ä¾èµ–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install @vitejs/plugin-analysis --save-dev
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { visualizer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-analysis'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
 <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">visualizer</span>({ 
   <span class="hljs-attr">template</span>: <span class="hljs-string">'treemap'</span>, <span class="hljs-comment">// sunburst|network|raw...</span>
   <span class="hljs-attr">open</span>: <span class="hljs-literal">true</span> 
 })]
})
</code></pre>
<h3 data-id="heading-8">2.3 PWAæé€Ÿæ¨¡å¼</h3>
<p>ç»“åˆ<code>vite-plugin-pwa</code>ä¸Workboxçš„è¿è¡Œæ—¶ç¼“å­˜ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">VitePWA</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite-plugin-pwa'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
 <span class="hljs-attr">plugins</span>: [<span class="hljs-title class_">VitePWA</span>({
   <span class="hljs-attr">strategies</span>: <span class="hljs-string">'injectManifest'</span>,
   <span class="hljs-attr">srcDir</span>: <span class="hljs-string">'src'</span>,
   <span class="hljs-attr">filename</span>: <span class="hljs-string">'sw.ts'</span>,
   <span class="hljs-attr">registerType</span>: <span class="hljs-string">'autoUpdate'</span>,
   <span class="hljs-attr">workbox</span>: {
     <span class="hljs-attr">maximumFileSizeToCacheInBytes</span>: <span class="hljs-number">10</span> *<span class="hljs-number">1024</span>*<span class="hljs-number">1024</span>,
     <span class="hljs-attr">runtimeCaching</span>: [...] <span class="hljs-comment">// AIé©±åŠ¨çš„ç¼“å­˜ç­–ç•¥å»ºè®®å·²é›†æˆï¼</span>
   }
 })]
})
</code></pre>
<h3 data-id="heading-9">...ï¼ˆå…¶ä»–7ä¸ªæŠ€å·§å› ç¯‡å¹…é™åˆ¶ç•¥å»ï¼‰...</h3>
<p>##ä¸‰ã€æ’ä»¶ç”Ÿæ€æ·±åº¦è§£æ</p>
<p>###3.1 Viteæ’ä»¶è®¾è®¡å“²å­¦</p>
<p>####åˆ†å±‚æ¶æ„è®¾è®¡ï¼š</p>
<ol>
<li><strong>æ ¸å¿ƒå±‚</strong>ï¼šè·¯å¾„è§£æã€æ¨¡å—è½¬æ¢ç­‰åŸºç¡€èƒ½åŠ›</li>
<li><strong>æ¡†æ¶å±‚</strong>ï¼š@vitejs/plugin-vueç­‰å®˜æ–¹é€‚é…å™¨</li>
<li><strong>ä¸šåŠ¡å±‚</strong>ï¼šç”¨æˆ·è‡ªå®šä¹‰æ’ä»¶</li>
</ol>
<p>####ç”Ÿå‘½å‘¨æœŸé’©å­å¢å¼ºï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">VitePlugin</span> {
 <span class="hljs-attr">name</span>:<span class="hljs-built_in">string</span>;
 <span class="hljs-comment">//æ–°å¢preTransformé’©å­ </span>
 preTransform?(<span class="hljs-attr">code</span>:<span class="hljs-built_in">string</span>, <span class="hljs-attr">id</span>:<span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt;;
 <span class="hljs-comment">//buildEndæ”¯æŒå¼‚æ­¥æ¸…ç† </span>
 buildEnd?(err?: <span class="hljs-title class_">Error</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;;  
}
</code></pre>
<p>###3.2 Top5å¿…å¤‡ç”Ÿäº§çº§æ’ä»¶è¯„æµ‹</p>














































<table><thead><tr><th>Plugin</th><th align="right">Bundle Impact</th><th align="right">HMR Speed</th><th align="right">SSR Support</th><th>Special Feature</th></tr></thead><tbody><tr><td>unplugin-auto-import</td><td align="right">-5kb</td><td align="right">âš¡âš¡âš¡âš¡</td><td align="right">âœ…</td><td>TSç±»å‹è‡ªåŠ¨ç”Ÿæˆ</td></tr><tr><td>vite-plugin-compression</td><td align="right">+30ms/-40%</td><td align="right">âš¡âš¡</td><td align="right">âœ…</td><td>Brotli11é¢„è®¾</td></tr><tr><td>vite-plugin-checker</td><td align="right">+200ms</td><td align="right">âš¡âš¡âš¡</td><td align="right">âŒ</td><td>ESLint/WASMåŠ é€Ÿ</td></tr><tr><td>@originjs/vitest-mock-server</td><td align="right">+1s/-0kb</td><td align="right">âš¡âš¡âš¡âš¡âš¡ï¸ï¸ï¸ï¸ï¸ï¸ï¸âœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…â—â—â—</td><td align="right"/><td>AI Mockç”Ÿæˆ</td></tr><tr><td/><td align="right"/><td align="right"/><td align="right"/></tr></tbody></table>
<p>##å››ã€æ€§èƒ½è°ƒä¼˜å®æˆ˜æ¡ˆä¾‹</p>
<p>æŸç”µå•†é¡¹ç›®é‡‡ç”¨ä»¥ä¸‹ç»„åˆæ–¹æ¡ˆåLCPæå‡62%ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD;
 A[è·¯ç”±çº§ä»£ç åˆ†å‰²] --&gt; B[å…³é”®CSSæå–];
 B --&gt; C[å›¾ç‰‡æ‡’åŠ è½½æŒ‡ä»¤];
 C --&gt; D[äº§ç‰©åˆ†æ];
 D --&gt; E[åŠ¨æ€Polyfill];   
 E --&gt; F[SWæŒä¹…ç¼“å­˜];
</code></pre>
<p>å…³é”®é…ç½®æ‘˜å½•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//åŠ¨æ€åŠ è½½Polyfillï¼ˆæŒ‰UAé€‚é…ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
 <span class="hljs-attr">legacy</span>:{ 
   <span class="hljs-attr">polyfills</span>:[...],
   <span class="hljs-attr">modernPolyfills</span>:[...] 
 },
 <span class="hljs-attr">plugins</span>:[{
   <span class="hljs-attr">name</span>:<span class="hljs-string">'dynamic-polyfill'</span>,
   <span class="hljs-title function_">transformIndexHtml</span>(<span class="hljs-params">html</span>){
     <span class="hljs-keyword">return</span> html.<span class="hljs-title function_">replace</span>(
       <span class="hljs-string">'&lt;head&gt;'</span>, 
       <span class="hljs-string">`&lt;head&gt;
        &lt;script&gt;
         if(!('IntersectionObserver' in window)){
           import('/polyfills/io.js')  
         }
        &lt;/script&gt;`</span>
     )
   }
 }]
})
</code></pre>
<p>##äº”ã€æœªæ¥å±•æœ›</p>
<p>éšç€Bunç­‰JavaScriptè¿è¡Œæ—¶çš„å´›èµ·ï¼ŒViteå›¢é˜Ÿå·²åœ¨Roadmapä¸­æŠ«éœ²ï¼š</p>
<p>1.WASIé›†æˆè®¡åˆ’ï¼ˆWebAssembly System Interfaceï¼‰<br/>
2.SWCæ›¿ä»£Babelçš„å®éªŒåˆ†æ”¯<br/>
3.Virtual Moduleç¼–è¯‘ç¼“å­˜æŒä¹…åŒ–</p>
<p>è¿™äº›ç‰¹æ€§é¢„è®¡å°†åœ¨2024å¹´çš„5.xç‰ˆæœ¬ä¸­é€æ­¥è½åœ°ã€‚</p>
<hr/>
<p>æœ¬æ–‡ä»…æ­ç¤ºäº†éƒ¨åˆ†æŠ€æœ¯ç»†èŠ‚ï¼Œå»ºè®®è¯»è€…ç»“åˆå®˜æ–¹æ–‡æ¡£å’Œé¡¹ç›®å®é™…éœ€æ±‚è¿›è¡ŒéªŒè¯ã€‚è®°ä½ï¼šæ²¡æœ‰æ”¾ä¹‹å››æµ·è€Œçš†å‡†çš„æœ€ä½³å®è·µï¼ŒçœŸæ­£çš„"ä¼˜åŒ–"æ°¸è¿œæ˜¯æ•°æ®é©±åŠ¨ä¸‹çš„é’ˆå¯¹æ€§æ”¹è¿›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringCloud å¾®æœåŠ¡ç§’æ€åœºæ™¯ä¸‹å‘å·å™¨æ·±åº¦è®¾è®¡ä¸å®ç°]]></title>    <link>https://juejin.cn/post/7576210031872753705</link>    <guid>https://juejin.cn/post/7576210031872753705</guid>    <pubDate>2025-11-25T01:48:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576210031872753705" data-draft-id="7576210031872720937" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringCloud å¾®æœåŠ¡ç§’æ€åœºæ™¯ä¸‹å‘å·å™¨æ·±åº¦è®¾è®¡ä¸å®ç°"/> <meta itemprop="keywords" content="Spring"/> <meta itemprop="datePublished" content="2025-11-25T01:48:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringCloud å¾®æœåŠ¡ç§’æ€åœºæ™¯ä¸‹å‘å·å™¨æ·±åº¦è®¾è®¡ä¸å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T01:48:13.000Z" title="Tue Nov 25 2025 01:48:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ç§’æ€åœºæ™¯ä¸‹å‘å·å™¨çš„æ ¸å¿ƒä»·å€¼</h2>
<p>åœ¨ç§’æ€ç­‰é«˜å¹¶å‘åœºæ™¯ä¸­ï¼Œä¼ ç»Ÿçš„æ•°æ®åº“é”å’Œäº‹åŠ¡æœºåˆ¶ä¼šæˆä¸ºç³»ç»Ÿç“¶é¢ˆã€‚å‘å·å™¨é€šè¿‡é¢„ç”Ÿæˆå”¯ä¸€IDçš„æ–¹å¼ï¼Œå°†<strong>èµ„æºç«äº‰</strong>è½¬åŒ–ä¸º<strong>IDåˆ†é…</strong>ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³å¹¶å‘å†²çªé—®é¢˜ã€‚</p>
<h3 data-id="heading-1">1.1 å‘å·å™¨ vs ä¼ ç»Ÿæ–¹æ¡ˆå¯¹æ¯”</h3>

































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>å¹¶å‘èƒ½åŠ›</th><th>å¤æ‚åº¦</th><th>æ•°æ®ä¸€è‡´æ€§</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>æ•°æ®åº“æ‚²è§‚é”</strong>â€‹</td><td>ä½ï¼ˆ~1000 TPSï¼‰</td><td>ä½</td><td>å¼ºä¸€è‡´æ€§</td><td>ä½å¹¶å‘ä¸šåŠ¡</td></tr><tr><td><strong>Redisåˆ†å¸ƒå¼é”</strong>â€‹</td><td>ä¸­ï¼ˆ~5000 TPSï¼‰</td><td>ä¸­</td><td>å¼ºä¸€è‡´æ€§</td><td>ä¸­ç­‰å¹¶å‘</td></tr><tr><td><strong>å‘å·å™¨æ–¹æ¡ˆ</strong>â€‹</td><td>é«˜ï¼ˆ~10ä¸‡+ TPSï¼‰</td><td>é«˜</td><td>æœ€ç»ˆä¸€è‡´æ€§</td><td>é«˜å¹¶å‘ç§’æ€</td></tr></tbody></table>
<h2 data-id="heading-2">äºŒã€å‘å·å™¨æ¶æ„è®¾è®¡</h2>
<h3 data-id="heading-3">2.1 ç³»ç»Ÿæ¶æ„å›¾</h3>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯è´Ÿè½½å‡è¡¡    â”‚    â”‚   API Gateway    â”‚
â”‚    (Nginx)      â”‚â”€â”€â”€â”€â”‚   (Spring Cloud)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              å‘å·å™¨æœåŠ¡é›†ç¾¤                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  å‘å·å™¨å®ä¾‹<span class="hljs-number">1</span> â”‚  â”‚  å‘å·å™¨å®ä¾‹<span class="hljs-number">2</span> â”‚  ...     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Redisé›†ç¾¤    â”‚    â”‚   æ³¨å†Œä¸­å¿ƒ       â”‚
â”‚               â”‚    â”‚   (Nacos)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-4">2.2 æ ¸å¿ƒè®¾è®¡æ€è·¯</h3>
<ol>
<li><strong>IDé¢„ç”Ÿæˆ</strong>ï¼šæå‰æ‰¹é‡ç”ŸæˆIDï¼Œå‡å°‘å®æ—¶ç”Ÿæˆå‹åŠ›</li>
<li><strong>åˆ†æ®µéš”ç¦»</strong>ï¼šä¸åŒä¸šåŠ¡ä½¿ç”¨ä¸åŒå·æ®µï¼Œé¿å…ç›¸äº’å½±å“</li>
<li><strong>å®¹ç¾é™çº§</strong>ï¼šæ”¯æŒæœ¬åœ°æ¨¡å¼ã€Redisæ¨¡å¼ã€DBæ¨¡å¼å¤šçº§é™çº§</li>
<li><strong>ç›‘æ§å‘Šè­¦</strong>ï¼šå®æ—¶ç›‘æ§å·æ®µä½¿ç”¨æƒ…å†µï¼Œæå‰é¢„è­¦</li>
</ol>
<h2 data-id="heading-5">ä¸‰ã€è¯¦ç»†ä»£ç å®ç°</h2>
<h3 data-id="heading-6">3.1 Maven ä¾èµ–é…ç½®</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.7.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.example<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>id-generator-service<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">spring-cloud.version</span>&gt;</span>2021.0.3<span class="hljs-tag">&lt;/<span class="hljs-name">spring-cloud.version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- Spring Cloud åŸºç¡€ä¾èµ– --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- æœåŠ¡å‘ç° --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2021.0.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- Redis ä¾èµ– --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>redis.clients<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jedis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- æ•°æ®åº“ä¾èµ–ï¼ˆé™çº§æ–¹æ¡ˆï¼‰ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- ç›‘æ§ç›¸å…³ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.micrometer<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>micrometer-registry-prometheus<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- å·¥å…·ç±» --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.commons<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>commons-lang3<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.12.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.google.guava<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>guava<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>31.1-jre<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<h3 data-id="heading-7">3.2 åº”ç”¨é…ç½®</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application.yml</span>
<span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8081</span>

<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">application:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">id-generator-service</span>
  
  <span class="hljs-comment"># Redis é…ç½®ï¼ˆä¸»æ¨¡å¼ï¼‰</span>
  <span class="hljs-attr">redis:</span>
    <span class="hljs-attr">host:</span> <span class="hljs-string">${REDIS_HOST:127.0.0.1}</span>
    <span class="hljs-attr">port:</span> <span class="hljs-string">${REDIS_PORT:6379}</span>
    <span class="hljs-attr">password:</span> <span class="hljs-string">${REDIS_PASSWORD:}</span>
    <span class="hljs-attr">database:</span> <span class="hljs-number">0</span>
    <span class="hljs-attr">jedis:</span>
      <span class="hljs-attr">pool:</span>
        <span class="hljs-attr">max-active:</span> <span class="hljs-number">100</span>
        <span class="hljs-attr">max-idle:</span> <span class="hljs-number">20</span>
        <span class="hljs-attr">min-idle:</span> <span class="hljs-number">5</span>
        <span class="hljs-attr">max-wait:</span> <span class="hljs-string">3000ms</span>
    <span class="hljs-attr">lettuce:</span>
      <span class="hljs-attr">shutdown-timeout:</span> <span class="hljs-string">100ms</span>
  
  <span class="hljs-comment"># æ•°æ®åº“é…ç½®ï¼ˆé™çº§æ¨¡å¼ï¼‰</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://${DB_HOST:127.0.0.1}:3306/id_generator?useUnicode=true&amp;characterEncoding=utf8&amp;serverTimezone=Asia/Shanghai</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">${DB_USERNAME:root}</span>
    <span class="hljs-attr">password:</span> <span class="hljs-string">${DB_PASSWORD:123456}</span>
    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
    <span class="hljs-attr">hikari:</span>
      <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">20</span>
      <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">5</span>
  
  <span class="hljs-comment"># Nacos æœåŠ¡å‘ç°</span>
  <span class="hljs-attr">cloud:</span>
    <span class="hljs-attr">nacos:</span>
      <span class="hljs-attr">discovery:</span>
        <span class="hljs-attr">server-addr:</span> <span class="hljs-string">${NACOS_HOST:127.0.0.1}:8848</span>

<span class="hljs-comment"># å‘å·å™¨é…ç½®</span>
<span class="hljs-attr">id-generator:</span>
  <span class="hljs-comment"># å·æ®µé…ç½®</span>
  <span class="hljs-attr">segment:</span>
    <span class="hljs-attr">step:</span> <span class="hljs-number">1000</span>  <span class="hljs-comment"># æ¯æ¬¡ä»Redisè·å–çš„æ­¥é•¿</span>
    <span class="hljs-attr">retry-times:</span> <span class="hljs-number">3</span>  <span class="hljs-comment"># è·å–å·æ®µé‡è¯•æ¬¡æ•°</span>
    <span class="hljs-attr">timeout-ms:</span> <span class="hljs-number">5000</span>  <span class="hljs-comment"># è·å–å·æ®µè¶…æ—¶æ—¶é—´</span>
    
  <span class="hljs-comment"># é›ªèŠ±ç®—æ³•é…ç½®ï¼ˆæœ¬åœ°æ¨¡å¼ï¼‰</span>
  <span class="hljs-attr">snowflake:</span>
    <span class="hljs-attr">datacenter-id:</span> <span class="hljs-string">${DATACENTER_ID:1}</span>  <span class="hljs-comment"># æ•°æ®ä¸­å¿ƒID</span>
    <span class="hljs-attr">worker-id:</span> <span class="hljs-string">${WORKER_ID:1}</span>  <span class="hljs-comment"># å·¥ä½œæœºå™¨ID</span>
    
  <span class="hljs-comment"># æ¨¡å¼é…ç½®ï¼šlocal(æœ¬åœ°é›ªèŠ±ç®—æ³•)/redis(Rediså·æ®µ)/db(æ•°æ®åº“å·æ®µ)</span>
  <span class="hljs-attr">mode:</span> <span class="hljs-string">${ID_GENERATOR_MODE:redis}</span>
  
<span class="hljs-comment"># ç›‘æ§ç«¯ç‚¹</span>
<span class="hljs-attr">management:</span>
  <span class="hljs-attr">endpoints:</span>
    <span class="hljs-attr">web:</span>
      <span class="hljs-attr">exposure:</span>
        <span class="hljs-attr">include:</span> <span class="hljs-string">health,info,metrics,prometheus</span>
  <span class="hljs-attr">endpoint:</span>
    <span class="hljs-attr">health:</span>
      <span class="hljs-attr">show-details:</span> <span class="hljs-string">always</span>
</code></pre>
<h3 data-id="heading-8">3.3 æ ¸å¿ƒé¢†åŸŸæ¨¡å‹</h3>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// IDç±»å‹æšä¸¾</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">IdType</span> {
    <span class="hljs-built_in">ORDER</span>(<span class="hljs-string">"ORDER"</span>, <span class="hljs-string">"è®¢å•ID"</span>, <span class="hljs-number">1</span>),
    <span class="hljs-built_in">SECKILL</span>(<span class="hljs-string">"SECKILL"</span>, <span class="hljs-string">"ç§’æ€æ´»åŠ¨ID"</span>, <span class="hljs-number">2</span>),
    <span class="hljs-built_in">USER</span>(<span class="hljs-string">"USER"</span>, <span class="hljs-string">"ç”¨æˆ·ID"</span>, <span class="hljs-number">3</span>),
    <span class="hljs-built_in">PRODUCT</span>(<span class="hljs-string">"PRODUCT"</span>, <span class="hljs-string">"å•†å“ID"</span>, <span class="hljs-number">4</span>);
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> code;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> desc;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> bizType;
    
    <span class="hljs-built_in">IdType</span>(<span class="hljs-type">String</span> code, <span class="hljs-type">String</span> desc, <span class="hljs-type">int</span> bizType) {
        <span class="hljs-keyword">this</span>.code = code;
        <span class="hljs-keyword">this</span>.desc = desc;
        <span class="hljs-keyword">this</span>.bizType = bizType;
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-title">getCode</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> code; }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-title">getDesc</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> desc; }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title">getBizType</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> bizType; }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> IdType <span class="hljs-title">getByCode</span><span class="hljs-params">(<span class="hljs-type">String</span> code)</span> </span>{
        <span class="hljs-keyword">for</span> (IdType type : <span class="hljs-built_in">values</span>()) {
            <span class="hljs-keyword">if</span> (type.code.<span class="hljs-built_in">equals</span>(code)) {
                <span class="hljs-keyword">return</span> type;
            }
        }
        <span class="hljs-keyword">return</span> null;
    }
}

<span class="hljs-comment">// IDç”Ÿæˆç»“æœ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IdResult</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> success;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> id;
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> message;
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> mode; <span class="hljs-comment">// ç”Ÿæˆæ¨¡å¼ï¼šlocal/redis/db</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> timestamp;
    
    <span class="hljs-comment">// æ„é€ æ–¹æ³•ã€getterã€setter</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> IdResult <span class="hljs-title">success</span><span class="hljs-params">(<span class="hljs-type">long</span> id, <span class="hljs-type">String</span> mode)</span> </span>{
        IdResult result = <span class="hljs-keyword">new</span> <span class="hljs-built_in">IdResult</span>();
        result.<span class="hljs-built_in">setSuccess</span>(<span class="hljs-literal">true</span>);
        result.<span class="hljs-built_in">setId</span>(id);
        result.<span class="hljs-built_in">setMode</span>(mode);
        result.<span class="hljs-built_in">setTimestamp</span>(System.<span class="hljs-built_in">currentTimeMillis</span>());
        result.<span class="hljs-built_in">setMessage</span>(<span class="hljs-string">"IDç”ŸæˆæˆåŠŸ"</span>);
        <span class="hljs-keyword">return</span> result;
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> IdResult <span class="hljs-title">fail</span><span class="hljs-params">(<span class="hljs-type">String</span> message)</span> </span>{
        IdResult result = <span class="hljs-keyword">new</span> <span class="hljs-built_in">IdResult</span>();
        result.<span class="hljs-built_in">setSuccess</span>(<span class="hljs-literal">false</span>);
        result.<span class="hljs-built_in">setMessage</span>(message);
        result.<span class="hljs-built_in">setTimestamp</span>(System.<span class="hljs-built_in">currentTimeMillis</span>());
        <span class="hljs-keyword">return</span> result;
    }
}

<span class="hljs-comment">// å·æ®µä¿¡æ¯</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IdSegment</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> current;  <span class="hljs-comment">// å½“å‰å€¼</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> max;      <span class="hljs-comment">// æœ€å¤§å€¼</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> step;     <span class="hljs-comment">// æ­¥é•¿</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> version; <span class="hljs-comment">// ç‰ˆæœ¬å·ï¼ˆç”¨äºä¹è§‚é”ï¼‰</span>
    <span class="hljs-keyword">private</span> IdType idType; <span class="hljs-comment">// IDç±»å‹</span>
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title">hasMore</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> current &lt;= max;
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title">getAndIncrement</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (current &gt; max) {
            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
        }
        <span class="hljs-keyword">return</span> current++;
    }
    
    <span class="hljs-comment">// getterã€setter</span>
}
</code></pre>
<h3 data-id="heading-9">3.4 é›ªèŠ±ç®—æ³•å®ç°ï¼ˆæœ¬åœ°æ¨¡å¼ï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * åˆ†å¸ƒå¼é›ªèŠ±ç®—æ³•IDç”Ÿæˆå™¨
 * ç»“æ„ï¼š0(1ä½ç¬¦å·ä½) + æ—¶é—´æˆ³(41ä½) + æ•°æ®ä¸­å¿ƒID(5ä½) + å·¥ä½œæœºå™¨ID(5ä½) + åºåˆ—å·(12ä½)
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SnowflakeIdGenerator</span> {
    
    <span class="hljs-comment">// èµ·å§‹æ—¶é—´æˆ³ï¼ˆ2023-01-01ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">START_TIMESTAMP</span> <span class="hljs-operator">=</span> <span class="hljs-number">1672531200000L</span>;
    
    <span class="hljs-comment">// ä½åˆ†é…</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">SEQUENCE_BITS</span> <span class="hljs-operator">=</span> <span class="hljs-number">12L</span>;      <span class="hljs-comment">// åºåˆ—å·å ç”¨ä½æ•°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">WORKER_ID_BITS</span> <span class="hljs-operator">=</span> <span class="hljs-number">5L</span>;      <span class="hljs-comment">// å·¥ä½œæœºå™¨IDå ç”¨ä½æ•°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">DATACENTER_ID_BITS</span> <span class="hljs-operator">=</span> <span class="hljs-number">5L</span>; <span class="hljs-comment">// æ•°æ®ä¸­å¿ƒIDå ç”¨ä½æ•°</span>
    
    <span class="hljs-comment">// æœ€å¤§å€¼è®¡ç®—</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">MAX_SEQUENCE</span> <span class="hljs-operator">=</span> ~(-<span class="hljs-number">1L</span> &lt;&lt; SEQUENCE_BITS);
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">MAX_WORKER_ID</span> <span class="hljs-operator">=</span> ~(-<span class="hljs-number">1L</span> &lt;&lt; WORKER_ID_BITS);
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">MAX_DATACENTER_ID</span> <span class="hljs-operator">=</span> ~(-<span class="hljs-number">1L</span> &lt;&lt; DATACENTER_ID_BITS);
    
    <span class="hljs-comment">// ç§»ä½åç§»é‡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">WORKER_ID_SHIFT</span> <span class="hljs-operator">=</span> SEQUENCE_BITS;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">DATACENTER_ID_SHIFT</span> <span class="hljs-operator">=</span> SEQUENCE_BITS + WORKER_ID_BITS;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">TIMESTAMP_SHIFT</span> <span class="hljs-operator">=</span> SEQUENCE_BITS + WORKER_ID_BITS + DATACENTER_ID_BITS;
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> workerId;       <span class="hljs-comment">// å·¥ä½œæœºå™¨ID</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> datacenterId;   <span class="hljs-comment">// æ•°æ®ä¸­å¿ƒID</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-variable">sequence</span> <span class="hljs-operator">=</span> <span class="hljs-number">0L</span>; <span class="hljs-comment">// åºåˆ—å·</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-variable">lastTimestamp</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1L</span>; <span class="hljs-comment">// ä¸Šæ¬¡ç”Ÿæˆæ—¶é—´æˆ³</span>
    
    <span class="hljs-comment">// ç›‘æ§æŒ‡æ ‡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicLong</span> <span class="hljs-variable">generateCount</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicLong</span> <span class="hljs-variable">exceptionCount</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(<span class="hljs-number">0</span>);
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SnowflakeIdGenerator</span><span class="hljs-params">(
            <span class="hljs-meta">@Value("${id-generator.snowflake.worker-id:1}")</span> <span class="hljs-type">long</span> workerId,
            <span class="hljs-meta">@Value("${id-generator.snowflake.datacenter-id:1}")</span> <span class="hljs-type">long</span> datacenterId)</span> {
        
        <span class="hljs-comment">// å‚æ•°æ ¡éªŒ</span>
        <span class="hljs-keyword">if</span> (workerId &gt; MAX_WORKER_ID || workerId &lt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(
                String.format(<span class="hljs-string">"worker Id å¿…é¡»åœ¨ 0 åˆ° %d ä¹‹é—´"</span>, MAX_WORKER_ID));
        }
        <span class="hljs-keyword">if</span> (datacenterId &gt; MAX_DATACENTER_ID || datacenterId &lt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(
                String.format(<span class="hljs-string">"datacenter Id å¿…é¡»åœ¨ 0 åˆ° %d ä¹‹é—´"</span>, MAX_DATACENTER_ID));
        }
        
        <span class="hljs-built_in">this</span>.workerId = workerId;
        <span class="hljs-built_in">this</span>.datacenterId = datacenterId;
        
        log.info(<span class="hljs-string">"é›ªèŠ±ç®—æ³•åˆå§‹åŒ–æˆåŠŸ: workerId={}, datacenterId={}"</span>, workerId, datacenterId);
    }
    
    <span class="hljs-comment">/**
     * ç”Ÿæˆä¸‹ä¸€ä¸ªIDï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-type">long</span> <span class="hljs-title function_">nextId</span><span class="hljs-params">()</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">currentTimestamp</span> <span class="hljs-operator">=</span> timeGen();
        
        <span class="hljs-comment">// æ—¶é’Ÿå›æ‹¨æ£€æŸ¥</span>
        <span class="hljs-keyword">if</span> (currentTimestamp &lt; lastTimestamp) {
            <span class="hljs-type">long</span> <span class="hljs-variable">offset</span> <span class="hljs-operator">=</span> lastTimestamp - currentTimestamp;
            exceptionCount.incrementAndGet();
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(
                String.format(<span class="hljs-string">"æ—¶é’Ÿå›æ‹¨å¼‚å¸¸ï¼Œæ‹’ç»ç”ŸæˆIDã€‚å›æ‹¨æ—¶é—´: %d æ¯«ç§’"</span>, offset));
        }
        
        <span class="hljs-comment">// åŒä¸€æ¯«ç§’å†…ç”Ÿæˆ</span>
        <span class="hljs-keyword">if</span> (lastTimestamp == currentTimestamp) {
            sequence = (sequence + <span class="hljs-number">1</span>) &amp; MAX_SEQUENCE;
            <span class="hljs-comment">// åºåˆ—å·æº¢å‡ºï¼Œç­‰å¾…ä¸‹ä¸€æ¯«ç§’</span>
            <span class="hljs-keyword">if</span> (sequence == <span class="hljs-number">0</span>) {
                currentTimestamp = tilNextMillis(lastTimestamp);
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// æ–°çš„æ¯«ç§’ï¼Œåºåˆ—å·ä»0å¼€å§‹</span>
            sequence = <span class="hljs-number">0L</span>;
        }
        
        lastTimestamp = currentTimestamp;
        generateCount.incrementAndGet();
        
        <span class="hljs-comment">// ç»„åˆç”Ÿæˆæœ€ç»ˆID</span>
        <span class="hljs-keyword">return</span> ((currentTimestamp - START_TIMESTAMP) &lt;&lt; TIMESTAMP_SHIFT)
                | (datacenterId &lt;&lt; DATACENTER_ID_SHIFT)
                | (workerId &lt;&lt; WORKER_ID_SHIFT)
                | sequence;
    }
    
    <span class="hljs-comment">/**
     * é˜»å¡åˆ°ä¸‹ä¸€æ¯«ç§’
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-title function_">tilNextMillis</span><span class="hljs-params">(<span class="hljs-type">long</span> lastTimestamp)</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">timestamp</span> <span class="hljs-operator">=</span> timeGen();
        <span class="hljs-keyword">while</span> (timestamp &lt;= lastTimestamp) {
            timestamp = timeGen();
        }
        <span class="hljs-keyword">return</span> timestamp;
    }
    
    <span class="hljs-comment">/**
     * è·å–å½“å‰æ—¶é—´æˆ³
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-title function_">timeGen</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> System.currentTimeMillis();
    }
    
    <span class="hljs-comment">/**
     * è§£æIDä¿¡æ¯ï¼ˆç”¨äºè°ƒè¯•å’Œç›‘æ§ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title function_">parseId</span><span class="hljs-params">(<span class="hljs-type">long</span> id)</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">timestamp</span> <span class="hljs-operator">=</span> (id &gt;&gt; TIMESTAMP_SHIFT) + START_TIMESTAMP;
        <span class="hljs-type">long</span> <span class="hljs-variable">datacenterId</span> <span class="hljs-operator">=</span> (id &gt;&gt; DATACENTER_ID_SHIFT) &amp; MAX_DATACENTER_ID;
        <span class="hljs-type">long</span> <span class="hljs-variable">workerId</span> <span class="hljs-operator">=</span> (id &gt;&gt; WORKER_ID_SHIFT) &amp; MAX_WORKER_ID;
        <span class="hljs-type">long</span> <span class="hljs-variable">sequence</span> <span class="hljs-operator">=</span> id &amp; MAX_SEQUENCE;
        
        Map&lt;String, Object&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        result.put(<span class="hljs-string">"timestamp"</span>, timestamp);
        result.put(<span class="hljs-string">"datacenterId"</span>, datacenterId);
        result.put(<span class="hljs-string">"workerId"</span>, workerId);
        result.put(<span class="hljs-string">"sequence"</span>, sequence);
        result.put(<span class="hljs-string">"generateTime"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(timestamp));
        
        <span class="hljs-keyword">return</span> result;
    }
    
    <span class="hljs-comment">// ç›‘æ§æŒ‡æ ‡è·å–</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getGenerateCount</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> generateCount.get();
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getExceptionCount</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> exceptionCount.get();
    }
}
</code></pre>
<h3 data-id="heading-10">3.5 Rediså·æ®µç”Ÿæˆå™¨</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * åŸºäºRedisçš„å·æ®µæ¨¡å¼IDç”Ÿæˆå™¨
 * ä¼˜ç‚¹ï¼šé«˜æ€§èƒ½ã€å¯æ‰©å±•ã€æ”¯æŒæ‰¹é‡è·å–
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisSegmentIdGenerator</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedisTemplate&lt;String, String&gt; redisTemplate;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> StringRedisTemplate stringRedisTemplate;
    
    <span class="hljs-comment">// æœ¬åœ°ç¼“å­˜ï¼ˆå‡å°‘Redisè®¿é—®ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, IdSegment&gt; segmentCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    
    <span class="hljs-comment">// é…ç½®å‚æ•°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> defaultStep;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> retryTimes;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> timeoutMs;
    
    <span class="hljs-comment">// ç›‘æ§æŒ‡æ ‡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicLong</span> <span class="hljs-variable">redisSuccessCount</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicLong</span> <span class="hljs-variable">redisFailCount</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicLong</span> <span class="hljs-variable">cacheHitCount</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(<span class="hljs-number">0</span>);
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RedisSegmentIdGenerator</span><span class="hljs-params">(
            RedisTemplate&lt;String, String&gt; redisTemplate,
            StringRedisTemplate stringRedisTemplate,
            <span class="hljs-meta">@Value("${id-generator.segment.step:1000}")</span> <span class="hljs-type">int</span> defaultStep,
            <span class="hljs-meta">@Value("${id-generator.segment.retry-times:3}")</span> <span class="hljs-type">int</span> retryTimes,
            <span class="hljs-meta">@Value("${id-generator.segment.timeout-ms:5000}")</span> <span class="hljs-type">long</span> timeoutMs)</span> {
        
        <span class="hljs-built_in">this</span>.redisTemplate = redisTemplate;
        <span class="hljs-built_in">this</span>.stringRedisTemplate = stringRedisTemplate;
        <span class="hljs-built_in">this</span>.defaultStep = defaultStep;
        <span class="hljs-built_in">this</span>.retryTimes = retryTimes;
        <span class="hljs-built_in">this</span>.timeoutMs = timeoutMs;
    }
    
    <span class="hljs-comment">/**
     * ç”Ÿæˆä¸‹ä¸€ä¸ªIDï¼ˆå·æ®µæ¨¡å¼ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">nextId</span><span class="hljs-params">(IdType idType)</span> {
        <span class="hljs-keyword">return</span> nextId(idType, defaultStep);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">nextId</span><span class="hljs-params">(IdType idType, <span class="hljs-type">int</span> step)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">cacheKey</span> <span class="hljs-operator">=</span> buildCacheKey(idType);
        <span class="hljs-type">IdSegment</span> <span class="hljs-variable">segment</span> <span class="hljs-operator">=</span> segmentCache.get(cacheKey);
        
        <span class="hljs-comment">// ä»ç¼“å­˜è·å–å¯ç”¨ID</span>
        <span class="hljs-keyword">if</span> (segment != <span class="hljs-literal">null</span> &amp;&amp; segment.hasMore()) {
            cacheHitCount.incrementAndGet();
            <span class="hljs-type">long</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> segment.getAndIncrement();
            <span class="hljs-keyword">if</span> (id != -<span class="hljs-number">1</span>) {
                <span class="hljs-keyword">return</span> buildFinalId(id, idType);
            }
        }
        
        <span class="hljs-comment">// ç¼“å­˜è€—å°½ï¼Œä»Redisè·å–æ–°å·æ®µ</span>
        <span class="hljs-keyword">return</span> getNewSegmentAndId(idType, step);
    }
    
    <span class="hljs-comment">/**
     * ä»Redisè·å–æ–°å·æ®µ
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getNewSegmentAndId</span><span class="hljs-params">(IdType idType, <span class="hljs-type">int</span> step)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">redisKey</span> <span class="hljs-operator">=</span> buildRedisKey(idType);
        
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; retryTimes; i++) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// ä½¿ç”¨RedisåŸå­æ“ä½œè·å–å·æ®µ</span>
                <span class="hljs-type">Long</span> <span class="hljs-variable">newMax</span> <span class="hljs-operator">=</span> stringRedisTemplate.opsForValue()
                    .increment(redisKey, step);
                
                <span class="hljs-keyword">if</span> (newMax != <span class="hljs-literal">null</span>) {
                    redisSuccessCount.incrementAndGet();
                    
                    <span class="hljs-type">long</span> <span class="hljs-variable">current</span> <span class="hljs-operator">=</span> newMax - step + <span class="hljs-number">1</span>;
                    <span class="hljs-type">long</span> <span class="hljs-variable">max</span> <span class="hljs-operator">=</span> newMax;
                    
                    <span class="hljs-comment">// æ›´æ–°æœ¬åœ°ç¼“å­˜</span>
                    <span class="hljs-type">IdSegment</span> <span class="hljs-variable">newSegment</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IdSegment</span>();
                    newSegment.setCurrent(current);
                    newSegment.setMax(max);
                    newSegment.setStep(step);
                    newSegment.setIdType(idType);
                    
                    <span class="hljs-type">String</span> <span class="hljs-variable">cacheKey</span> <span class="hljs-operator">=</span> buildCacheKey(idType);
                    segmentCache.put(cacheKey, newSegment);
                    
                    log.debug(<span class="hljs-string">"è·å–æ–°å·æ®µæˆåŠŸ: type={}, current={}, max={}"</span>, 
                             idType, current, max);
                    
                    <span class="hljs-keyword">return</span> buildFinalId(current, idType);
                }
            } <span class="hljs-keyword">catch</span> (Exception e) {
                redisFailCount.incrementAndGet();
                log.error(<span class="hljs-string">"è·å–Rediså·æ®µå¤±è´¥ï¼Œé‡è¯•æ¬¡æ•°: {}/{}"</span>, i + <span class="hljs-number">1</span>, retryTimes, e);
                
                <span class="hljs-keyword">if</span> (i == retryTimes - <span class="hljs-number">1</span>) {
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"Rediså·æ®µè·å–å¤±è´¥ï¼Œå·²è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°"</span>, e);
                }
                
                <span class="hljs-comment">// æŒ‡æ•°é€€é¿</span>
                <span class="hljs-keyword">try</span> {
                    Thread.sleep(Math.min(<span class="hljs-number">1000L</span> * (<span class="hljs-number">1</span> &lt;&lt; i), <span class="hljs-number">5000L</span>));
                } <span class="hljs-keyword">catch</span> (InterruptedException ie) {
                    Thread.currentThread().interrupt();
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"çº¿ç¨‹è¢«ä¸­æ–­"</span>, ie);
                }
            }
        }
        
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æ— æ³•ä»Redisè·å–å·æ®µ"</span>);
    }
    
    <span class="hljs-comment">/**
     * æ„å»ºæœ€ç»ˆIDï¼ˆåŒ…å«ä¸šåŠ¡ç±»å‹ä¿¡æ¯ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-title function_">buildFinalId</span><span class="hljs-params">(<span class="hljs-type">long</span> baseId, IdType idType)</span> {
        <span class="hljs-comment">// IDç»“æ„ï¼šä¸šåŠ¡ç±»å‹(8ä½) + åŸºç¡€ID(56ä½)</span>
        <span class="hljs-keyword">return</span> ((<span class="hljs-type">long</span>) idType.getBizType() &lt;&lt; <span class="hljs-number">56</span>) | (baseId &amp; <span class="hljs-number">0x00FFFFFFFFFFFFFFL</span>);
    }
    
    <span class="hljs-comment">/**
     * è§£æIDè·å–ä¸šåŠ¡ç±»å‹
     */</span>
    <span class="hljs-keyword">public</span> IdType <span class="hljs-title function_">parseIdType</span><span class="hljs-params">(<span class="hljs-type">long</span> id)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">bizType</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) ((id &gt;&gt; <span class="hljs-number">56</span>) &amp; <span class="hljs-number">0xFF</span>);
        <span class="hljs-keyword">for</span> (IdType type : IdType.values()) {
            <span class="hljs-keyword">if</span> (type.getBizType() == bizType) {
                <span class="hljs-keyword">return</span> type;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    
    <span class="hljs-comment">/**
     * è·å–åŸºç¡€IDï¼ˆå»é™¤ä¸šåŠ¡ç±»å‹ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getBaseId</span><span class="hljs-params">(<span class="hljs-type">long</span> id)</span> {
        <span class="hljs-keyword">return</span> id &amp; <span class="hljs-number">0x00FFFFFFFFFFFFFFL</span>;
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">buildRedisKey</span><span class="hljs-params">(IdType idType)</span> {
        <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"id:generator:%s"</span>, idType.getCode().toLowerCase());
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">buildCacheKey</span><span class="hljs-params">(IdType idType)</span> {
        <span class="hljs-keyword">return</span> idType.getCode().toLowerCase();
    }
    
    <span class="hljs-comment">// ç›‘æ§æ–¹æ³•</span>
    <span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title function_">getMetrics</span><span class="hljs-params">()</span> {
        Map&lt;String, Object&gt; metrics = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        metrics.put(<span class="hljs-string">"redisSuccessCount"</span>, redisSuccessCount.get());
        metrics.put(<span class="hljs-string">"redisFailCount"</span>, redisFailCount.get());
        metrics.put(<span class="hljs-string">"cacheHitCount"</span>, cacheHitCount.get());
        metrics.put(<span class="hljs-string">"cacheSize"</span>, segmentCache.size());
        metrics.put(<span class="hljs-string">"cacheKeys"</span>, segmentCache.keySet());
        <span class="hljs-keyword">return</span> metrics;
    }
    
    <span class="hljs-comment">/**
     * é¢„åŠ è½½å·æ®µï¼ˆå¯åŠ¨æ—¶é¢„çƒ­ï¼‰
     */</span>
    <span class="hljs-meta">@EventListener</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">preloadSegments</span><span class="hljs-params">(ContextRefreshedEvent event)</span> {
        log.info(<span class="hljs-string">"å¼€å§‹é¢„åŠ è½½å·æ®µ..."</span>);
        
        <span class="hljs-keyword">for</span> (IdType idType : IdType.values()) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// é¢„çƒ­åŠ è½½ä¸€ä¸ªå·æ®µ</span>
                nextId(idType, <span class="hljs-number">100</span>);
                log.info(<span class="hljs-string">"é¢„åŠ è½½å·æ®µæˆåŠŸ: {}"</span>, idType);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                log.warn(<span class="hljs-string">"é¢„åŠ è½½å·æ®µå¤±è´¥: {}"</span>, idType, e);
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-11">3.6 æ•°æ®åº“å·æ®µç”Ÿæˆå™¨ï¼ˆé™çº§æ–¹æ¡ˆï¼‰</h3>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">/**
 * åŸºäºæ•°æ®åº“çš„å·æ®µæ¨¡å¼IDç”Ÿæˆå™¨ï¼ˆé™çº§æ–¹æ¡ˆï¼‰
 */</span>
@Component
@Slf4j
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseSegmentIdGenerator</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> JdbcTemplate jdbcTemplate;
    
    <span class="hljs-comment">// SQLè¯­å¥</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> UPDATE_SQL = 
        <span class="hljs-string">"UPDATE id_segments SET current_value = current_value + ?, version = version + 1 "</span> +
        <span class="hljs-string">"WHERE biz_type = ? AND version = ?"</span>;
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> SELECT_SQL = 
        <span class="hljs-string">"SELECT current_value, step, version FROM id_segments WHERE biz_type = ?"</span>;
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> INSERT_SQL = 
        <span class="hljs-string">"INSERT INTO id_segments(biz_type, current_value, step, version) VALUES (?, ?, ?, 1) "</span> +
        <span class="hljs-string">"ON DUPLICATE KEY UPDATE current_value = VALUES(current_value)"</span>;
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">DatabaseSegmentIdGenerator</span><span class="hljs-params">(JdbcTemplate jdbcTemplate)</span> </span>{
        <span class="hljs-keyword">this</span>.jdbcTemplate = jdbcTemplate;
    }
    
    <span class="hljs-comment">/**
     * ä»æ•°æ®åº“è·å–å·æ®µï¼ˆä¹è§‚é”å®ç°ï¼‰
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> IdSegment <span class="hljs-title">getSegment</span><span class="hljs-params">(IdType idType, <span class="hljs-type">int</span> step)</span> </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) { <span class="hljs-comment">// ä¹è§‚é”é‡è¯•</span>
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// æŸ¥è¯¢å½“å‰å·æ®µä¿¡æ¯</span>
                List&lt;IdSegment&gt; segments = jdbcTemplate.<span class="hljs-built_in">query</span>(SELECT_SQL, 
                    <span class="hljs-keyword">new</span> Object[]{idType.<span class="hljs-built_in">getBizType</span>()}, 
                    (rs, rowNum) -&gt; {
                        IdSegment segment = <span class="hljs-keyword">new</span> <span class="hljs-built_in">IdSegment</span>();
                        segment.<span class="hljs-built_in">setCurrent</span>(rs.<span class="hljs-built_in">getLong</span>(<span class="hljs-string">"current_value"</span>));
                        segment.<span class="hljs-built_in">setStep</span>(rs.<span class="hljs-built_in">getInt</span>(<span class="hljs-string">"step"</span>));
                        segment.<span class="hljs-built_in">setVersion</span>(rs.<span class="hljs-built_in">getLong</span>(<span class="hljs-string">"version"</span>));
                        segment.<span class="hljs-built_in">setIdType</span>(idType);
                        <span class="hljs-keyword">return</span> segment;
                    });
                
                <span class="hljs-keyword">if</span> (segments.<span class="hljs-built_in">isEmpty</span>()) {
                    <span class="hljs-comment">// åˆå§‹åŒ–å·æ®µ</span>
                    <span class="hljs-built_in">initializeSegment</span>(idType, step);
                    <span class="hljs-keyword">continue</span>;
                }
                
                IdSegment segment = segments.<span class="hljs-built_in">get</span>(<span class="hljs-number">0</span>);
                <span class="hljs-type">long</span> oldVersion = segment.<span class="hljs-built_in">getVersion</span>();
                <span class="hljs-type">long</span> newCurrent = segment.<span class="hljs-built_in">getCurrent</span>() + step;
                
                <span class="hljs-comment">// ä¹è§‚é”æ›´æ–°</span>
                <span class="hljs-type">int</span> updated = jdbcTemplate.<span class="hljs-built_in">update</span>(UPDATE_SQL, step, idType.<span class="hljs-built_in">getBizType</span>(), oldVersion);
                
                <span class="hljs-keyword">if</span> (updated &gt; <span class="hljs-number">0</span>) {
                    segment.<span class="hljs-built_in">setCurrent</span>(segment.<span class="hljs-built_in">getCurrent</span>());
                    segment.<span class="hljs-built_in">setMax</span>(newCurrent - <span class="hljs-number">1</span>);
                    <span class="hljs-keyword">return</span> segment;
                }
                
            } <span class="hljs-built_in">catch</span> (Exception e) {
                log.<span class="hljs-built_in">error</span>(<span class="hljs-string">"è·å–æ•°æ®åº“å·æ®µå¤±è´¥ï¼Œé‡è¯•æ¬¡æ•°: {}"</span>, i + <span class="hljs-number">1</span>, e);
            }
        }
        
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RuntimeException</span>(<span class="hljs-string">"æ•°æ®åº“å·æ®µè·å–å¤±è´¥"</span>);
    }
    
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-type">void</span> <span class="hljs-title">initializeSegment</span><span class="hljs-params">(IdType idType, <span class="hljs-type">int</span> step)</span> </span>{
        <span class="hljs-keyword">try</span> {
            jdbcTemplate.<span class="hljs-built_in">update</span>(INSERT_SQL, idType.<span class="hljs-built_in">getBizType</span>(), step, step);
        } <span class="hljs-built_in">catch</span> (Exception e) {
            log.<span class="hljs-built_in">warn</span>(<span class="hljs-string">"åˆå§‹åŒ–å·æ®µå¤±è´¥ï¼Œå¯èƒ½å·²å­˜åœ¨: {}"</span>, idType, e);
        }
    }
}
</code></pre>
<h3 data-id="heading-12">3.7 ç»Ÿä¸€IDç”ŸæˆæœåŠ¡</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * ç»Ÿä¸€IDç”ŸæˆæœåŠ¡ï¼ˆæ”¯æŒå¤šæ¨¡å¼åˆ‡æ¢å’Œé™çº§ï¼‰
 */</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UnifiedIdGeneratorService</span> {
    
    <span class="hljs-comment">// ç”Ÿæˆæ¨¡å¼æšä¸¾</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">GenerateMode</span> {
        LOCAL, REDIS, DATABASE
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> SnowflakeIdGenerator snowflakeGenerator;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedisSegmentIdGenerator redisGenerator;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DatabaseSegmentIdGenerator databaseGenerator;
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">GenerateMode</span> <span class="hljs-variable">currentMode</span> <span class="hljs-operator">=</span> GenerateMode.REDIS;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicLong</span> <span class="hljs-variable">modeSwitchCount</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(<span class="hljs-number">0</span>);
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">UnifiedIdGeneratorService</span><span class="hljs-params">(
            SnowflakeIdGenerator snowflakeGenerator,
            RedisSegmentIdGenerator redisGenerator,
            DatabaseSegmentIdGenerator databaseGenerator,
            <span class="hljs-meta">@Value("${id-generator.mode:redis}")</span> String configMode)</span> {
        
        <span class="hljs-built_in">this</span>.snowflakeGenerator = snowflakeGenerator;
        <span class="hljs-built_in">this</span>.redisGenerator = redisGenerator;
        <span class="hljs-built_in">this</span>.databaseGenerator = databaseGenerator;
        <span class="hljs-built_in">this</span>.currentMode = parseMode(configMode);
        
        log.info(<span class="hljs-string">"IDç”Ÿæˆå™¨åˆå§‹åŒ–å®Œæˆï¼Œå½“å‰æ¨¡å¼: {}"</span>, currentMode);
    }
    
    <span class="hljs-comment">/**
     * ç”Ÿæˆä¸‹ä¸€ä¸ªIDï¼ˆè‡ªåŠ¨é™çº§ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> IdResult <span class="hljs-title function_">nextId</span><span class="hljs-params">(IdType idType)</span> {
        <span class="hljs-keyword">return</span> nextId(idType, currentMode, <span class="hljs-literal">true</span>);
    }
    
    <span class="hljs-keyword">public</span> IdResult <span class="hljs-title function_">nextId</span><span class="hljs-params">(IdType idType, GenerateMode preferredMode, <span class="hljs-type">boolean</span> fallback)</span> {
        <span class="hljs-type">GenerateMode</span> <span class="hljs-variable">usedMode</span> <span class="hljs-operator">=</span> preferredMode;
        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">switch</span> (preferredMode) {
                <span class="hljs-keyword">case</span> REDIS:
                    <span class="hljs-keyword">try</span> {
                        <span class="hljs-type">long</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> redisGenerator.nextId(idType);
                        <span class="hljs-keyword">return</span> IdResult.success(result, <span class="hljs-string">"redis"</span>);
                    } <span class="hljs-keyword">catch</span> (Exception e) {
                        log.warn(<span class="hljs-string">"Redisæ¨¡å¼ç”ŸæˆIDå¤±è´¥ï¼Œå°è¯•é™çº§"</span>, e);
                        <span class="hljs-keyword">if</span> (fallback) {
                            usedMode = GenerateMode.LOCAL;
                            <span class="hljs-keyword">return</span> nextId(idType, GenerateMode.LOCAL, <span class="hljs-literal">false</span>);
                        }
                        <span class="hljs-keyword">throw</span> e;
                    }
                    
                <span class="hljs-keyword">case</span> DATABASE:
                    <span class="hljs-keyword">try</span> {
                        <span class="hljs-comment">// æ•°æ®åº“æ¨¡å¼å®ç°</span>
                        <span class="hljs-type">IdSegment</span> <span class="hljs-variable">segment</span> <span class="hljs-operator">=</span> databaseGenerator.getSegment(idType, <span class="hljs-number">100</span>);
                        <span class="hljs-type">long</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> buildFinalId(segment.getAndIncrement(), idType);
                        <span class="hljs-keyword">return</span> IdResult.success(result, <span class="hljs-string">"database"</span>);
                    } <span class="hljs-keyword">catch</span> (Exception e) {
                        log.warn(<span class="hljs-string">"æ•°æ®åº“æ¨¡å¼ç”ŸæˆIDå¤±è´¥ï¼Œå°è¯•é™çº§"</span>, e);
                        <span class="hljs-keyword">if</span> (fallback) {
                            usedMode = GenerateMode.LOCAL;
                            <span class="hljs-keyword">return</span> nextId(idType, GenerateMode.LOCAL, <span class="hljs-literal">false</span>);
                        }
                        <span class="hljs-keyword">throw</span> e;
                    }
                    
                <span class="hljs-keyword">case</span> LOCAL:
                <span class="hljs-keyword">default</span>:
                    <span class="hljs-keyword">try</span> {
                        <span class="hljs-type">long</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> snowflakeGenerator.nextId();
                        <span class="hljs-keyword">return</span> IdResult.success(buildFinalId(result, idType), <span class="hljs-string">"local"</span>);
                    } <span class="hljs-keyword">catch</span> (Exception e) {
                        log.error(<span class="hljs-string">"æ‰€æœ‰IDç”Ÿæˆæ¨¡å¼å‡å¤±è´¥"</span>, e);
                        <span class="hljs-keyword">return</span> IdResult.fail(<span class="hljs-string">"IDç”ŸæˆæœåŠ¡ä¸å¯ç”¨: "</span> + e.getMessage());
                    }
            }
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-type">long</span> <span class="hljs-variable">cost</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - startTime;
            <span class="hljs-keyword">if</span> (cost &gt; <span class="hljs-number">100</span>) {
                log.warn(<span class="hljs-string">"IDç”Ÿæˆè€—æ—¶è¿‡é•¿: {}ms, mode: {}"</span>, cost, usedMode);
            }
        }
    }
    
    <span class="hljs-comment">/**
     * æ‰¹é‡ç”ŸæˆID
     */</span>
    <span class="hljs-keyword">public</span> List&lt;Long&gt; <span class="hljs-title function_">batchNextId</span><span class="hljs-params">(IdType idType, <span class="hljs-type">int</span> count)</span> {
        <span class="hljs-keyword">if</span> (count &lt;= <span class="hljs-number">0</span> || count &gt; <span class="hljs-number">10000</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"æ‰¹é‡ç”Ÿæˆæ•°é‡å¿…é¡»åœ¨1-10000ä¹‹é—´"</span>);
        }
        
        List&lt;Long&gt; results = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(count);
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; count; i++) {
            <span class="hljs-type">IdResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> nextId(idType);
            <span class="hljs-keyword">if</span> (result.isSuccess()) {
                results.add(result.getId());
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æ‰¹é‡ç”ŸæˆIDå¤±è´¥: "</span> + result.getMessage());
            }
        }
        <span class="hljs-keyword">return</span> results;
    }
    
    <span class="hljs-comment">/**
     * åˆ‡æ¢ç”Ÿæˆæ¨¡å¼
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">switchMode</span><span class="hljs-params">(GenerateMode newMode)</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.currentMode != newMode) {
            <span class="hljs-built_in">this</span>.currentMode = newMode;
            modeSwitchCount.incrementAndGet();
            log.info(<span class="hljs-string">"IDç”Ÿæˆæ¨¡å¼å·²åˆ‡æ¢: {}"</span>, newMode);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-title function_">buildFinalId</span><span class="hljs-params">(<span class="hljs-type">long</span> baseId, IdType idType)</span> {
        <span class="hljs-comment">// ç»Ÿä¸€IDæ ¼å¼ï¼šä¸šåŠ¡ç±»å‹(8ä½) + åŸºç¡€ID(56ä½)</span>
        <span class="hljs-keyword">return</span> ((<span class="hljs-type">long</span>) idType.getBizType() &lt;&lt; <span class="hljs-number">56</span>) | (baseId &amp; <span class="hljs-number">0x00FFFFFFFFFFFFFFL</span>);
    }
    
    <span class="hljs-keyword">private</span> GenerateMode <span class="hljs-title function_">parseMode</span><span class="hljs-params">(String modeStr)</span> {
        <span class="hljs-keyword">switch</span> (modeStr.toLowerCase()) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">"local"</span>: <span class="hljs-keyword">return</span> GenerateMode.LOCAL;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"redis"</span>: <span class="hljs-keyword">return</span> GenerateMode.REDIS;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"db"</span>: <span class="hljs-keyword">case</span> <span class="hljs-string">"database"</span>: <span class="hljs-keyword">return</span> GenerateMode.DATABASE;
            <span class="hljs-keyword">default</span>: <span class="hljs-keyword">return</span> GenerateMode.REDIS;
        }
    }
    
    <span class="hljs-comment">// è·å–å½“å‰çŠ¶æ€</span>
    <span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title function_">getStatus</span><span class="hljs-params">()</span> {
        Map&lt;String, Object&gt; status = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        status.put(<span class="hljs-string">"currentMode"</span>, currentMode);
        status.put(<span class="hljs-string">"modeSwitchCount"</span>, modeSwitchCount.get());
        status.put(<span class="hljs-string">"snowflakeGenerateCount"</span>, snowflakeGenerator.getGenerateCount());
        
        <span class="hljs-keyword">try</span> {
            status.put(<span class="hljs-string">"redisMetrics"</span>, redisGenerator.getMetrics());
        } <span class="hljs-keyword">catch</span> (Exception e) {
            status.put(<span class="hljs-string">"redisMetrics"</span>, <span class="hljs-string">"è·å–å¤±è´¥: "</span> + e.getMessage());
        }
        
        <span class="hljs-keyword">return</span> status;
    }
}
</code></pre>
<h3 data-id="heading-13">3.8 RESTful API æ§åˆ¶å™¨</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">/**
 * IDç”ŸæˆHTTPæ¥å£
 */</span>
<span class="hljs-variable">@RestController</span>
<span class="hljs-variable">@RequestMapping</span>(<span class="hljs-string">"/api/id"</span>)
<span class="hljs-variable">@Slf4j</span>
public class IdGeneratorController {
    
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">final</span> <span class="hljs-selector-tag">UnifiedIdGeneratorService</span> <span class="hljs-selector-tag">idGenerator</span>;
    
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">IdGeneratorController</span>(UnifiedIdGeneratorService idGenerator) {
        <span class="hljs-selector-tag">this</span><span class="hljs-selector-class">.idGenerator</span> = <span class="hljs-selector-tag">idGenerator</span>;
    }
    
    <span class="hljs-comment">/**
     * ç”Ÿæˆå•ä¸ªID
     */</span>
    @<span class="hljs-selector-tag">PostMapping</span>(<span class="hljs-string">"/generate"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">ResponseEntity</span>&lt;<span class="hljs-selector-tag">Map</span>&lt;<span class="hljs-selector-tag">String</span>, <span class="hljs-selector-tag">Object</span>&gt;&gt; <span class="hljs-selector-tag">generateId</span>(
            <span class="hljs-variable">@RequestParam</span> String type,
            <span class="hljs-variable">@RequestParam</span>(required = false) String mode) {
        
        <span class="hljs-selector-tag">try</span> {
            <span class="hljs-selector-tag">IdType</span> <span class="hljs-selector-tag">idType</span> = <span class="hljs-selector-tag">IdType</span><span class="hljs-selector-class">.getByCode</span>(type.<span class="hljs-built_in">toUpperCase</span>());
            <span class="hljs-selector-tag">if</span> (idType == null) {
                <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.badRequest</span>()<span class="hljs-selector-class">.body</span>(
                    Map.<span class="hljs-built_in">of</span>(<span class="hljs-string">"success"</span>, false, <span class="hljs-string">"message"</span>, <span class="hljs-string">"ä¸æ”¯æŒçš„IDç±»å‹: "</span> + type));
            }
            
            <span class="hljs-selector-tag">UnifiedIdGeneratorService</span><span class="hljs-selector-class">.GenerateMode</span> <span class="hljs-selector-tag">generateMode</span> = 
                <span class="hljs-selector-tag">parseMode</span>(mode, UnifiedIdGeneratorService.GenerateMode.REDIS);
            
            <span class="hljs-selector-tag">IdResult</span> <span class="hljs-selector-tag">result</span> = <span class="hljs-selector-tag">idGenerator</span><span class="hljs-selector-class">.nextId</span>(idType, generateMode, true);
            
            <span class="hljs-selector-tag">Map</span>&lt;<span class="hljs-selector-tag">String</span>, <span class="hljs-selector-tag">Object</span>&gt; <span class="hljs-selector-tag">response</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">HashMap</span>&lt;&gt;();
            <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"success"</span>, result.<span class="hljs-built_in">isSuccess</span>());
            <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"id"</span>, result.<span class="hljs-built_in">getId</span>());
            <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"mode"</span>, result.<span class="hljs-built_in">getMode</span>());
            <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"timestamp"</span>, result.<span class="hljs-built_in">getTimestamp</span>());
            
            <span class="hljs-selector-tag">if</span> (!result.<span class="hljs-built_in">isSuccess</span>()) {
                <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"message"</span>, result.<span class="hljs-built_in">getMessage</span>());
                <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.status</span>(<span class="hljs-number">503</span>)<span class="hljs-selector-class">.body</span>(response);
            }
            
            <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.debug</span>(<span class="hljs-string">"IDç”ŸæˆæˆåŠŸ: type={}, id={}, mode={}"</span>, type, result.<span class="hljs-built_in">getId</span>(), result.<span class="hljs-built_in">getMode</span>());
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.ok</span>(response);
            
        } <span class="hljs-selector-tag">catch</span> (Exception e) {
            <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.error</span>(<span class="hljs-string">"IDç”Ÿæˆå¼‚å¸¸"</span>, e);
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.status</span>(<span class="hljs-number">500</span>)<span class="hljs-selector-class">.body</span>(
                Map.<span class="hljs-built_in">of</span>(<span class="hljs-string">"success"</span>, false, <span class="hljs-string">"message"</span>, <span class="hljs-string">"æœåŠ¡å†…éƒ¨é”™è¯¯: "</span> + e.<span class="hljs-built_in">getMessage</span>()));
        }
    }
    
    <span class="hljs-comment">/**
     * æ‰¹é‡ç”ŸæˆID
     */</span>
    @<span class="hljs-selector-tag">PostMapping</span>(<span class="hljs-string">"/batch-generate"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">ResponseEntity</span>&lt;<span class="hljs-selector-tag">Map</span>&lt;<span class="hljs-selector-tag">String</span>, <span class="hljs-selector-tag">Object</span>&gt;&gt; <span class="hljs-selector-tag">batchGenerateId</span>(
            <span class="hljs-variable">@RequestParam</span> String type,
            <span class="hljs-variable">@RequestParam</span>(defaultValue = <span class="hljs-string">"10"</span>) int count) {
        
        <span class="hljs-selector-tag">if</span> (count &lt; <span class="hljs-number">1</span> || count &gt; <span class="hljs-number">1000</span>) {
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.badRequest</span>()<span class="hljs-selector-class">.body</span>(
                Map.<span class="hljs-built_in">of</span>(<span class="hljs-string">"success"</span>, false, <span class="hljs-string">"message"</span>, <span class="hljs-string">"æ•°é‡å¿…é¡»åœ¨1-1000ä¹‹é—´"</span>));
        }
        
        <span class="hljs-selector-tag">try</span> {
            <span class="hljs-selector-tag">IdType</span> <span class="hljs-selector-tag">idType</span> = <span class="hljs-selector-tag">IdType</span><span class="hljs-selector-class">.getByCode</span>(type.<span class="hljs-built_in">toUpperCase</span>());
            <span class="hljs-selector-tag">if</span> (idType == null) {
                <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.badRequest</span>()<span class="hljs-selector-class">.body</span>(
                    Map.<span class="hljs-built_in">of</span>(<span class="hljs-string">"success"</span>, false, <span class="hljs-string">"message"</span>, <span class="hljs-string">"ä¸æ”¯æŒçš„IDç±»å‹: "</span> + type));
            }
            
            <span class="hljs-selector-tag">List</span>&lt;<span class="hljs-selector-tag">Long</span>&gt; <span class="hljs-selector-tag">ids</span> = <span class="hljs-selector-tag">idGenerator</span><span class="hljs-selector-class">.batchNextId</span>(idType, count);
            
            <span class="hljs-selector-tag">Map</span>&lt;<span class="hljs-selector-tag">String</span>, <span class="hljs-selector-tag">Object</span>&gt; <span class="hljs-selector-tag">response</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">HashMap</span>&lt;&gt;();
            <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"success"</span>, true);
            <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"ids"</span>, ids);
            <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"count"</span>, ids.<span class="hljs-built_in">size</span>());
            <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"timestamp"</span>, System.<span class="hljs-built_in">currentTimeMillis</span>());
            
            <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.info</span>(<span class="hljs-string">"æ‰¹é‡IDç”ŸæˆæˆåŠŸ: type={}, count={}"</span>, type, count);
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.ok</span>(response);
            
        } <span class="hljs-selector-tag">catch</span> (Exception e) {
            <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.error</span>(<span class="hljs-string">"æ‰¹é‡IDç”Ÿæˆå¼‚å¸¸"</span>, e);
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.status</span>(<span class="hljs-number">500</span>)<span class="hljs-selector-class">.body</span>(
                Map.<span class="hljs-built_in">of</span>(<span class="hljs-string">"success"</span>, false, <span class="hljs-string">"message"</span>, <span class="hljs-string">"æ‰¹é‡ç”Ÿæˆå¤±è´¥: "</span> + e.<span class="hljs-built_in">getMessage</span>()));
        }
    }
    
    <span class="hljs-comment">/**
     * è·å–æœåŠ¡çŠ¶æ€
     */</span>
    @<span class="hljs-selector-tag">GetMapping</span>(<span class="hljs-string">"/status"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">ResponseEntity</span>&lt;<span class="hljs-selector-tag">Map</span>&lt;<span class="hljs-selector-tag">String</span>, <span class="hljs-selector-tag">Object</span>&gt;&gt; <span class="hljs-selector-tag">getStatus</span>() {
        <span class="hljs-selector-tag">try</span> {
            <span class="hljs-selector-tag">Map</span>&lt;<span class="hljs-selector-tag">String</span>, <span class="hljs-selector-tag">Object</span>&gt; <span class="hljs-selector-tag">status</span> = <span class="hljs-selector-tag">idGenerator</span><span class="hljs-selector-class">.getStatus</span>();
            <span class="hljs-selector-tag">status</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"success"</span>, true);
            <span class="hljs-selector-tag">status</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"timestamp"</span>, System.<span class="hljs-built_in">currentTimeMillis</span>());
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.ok</span>(status);
        } <span class="hljs-selector-tag">catch</span> (Exception e) {
            <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.error</span>(<span class="hljs-string">"è·å–çŠ¶æ€å¤±è´¥"</span>, e);
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.status</span>(<span class="hljs-number">500</span>)<span class="hljs-selector-class">.body</span>(
                Map.<span class="hljs-built_in">of</span>(<span class="hljs-string">"success"</span>, false, <span class="hljs-string">"message"</span>, <span class="hljs-string">"è·å–çŠ¶æ€å¤±è´¥: "</span> + e.<span class="hljs-built_in">getMessage</span>()));
        }
    }
    
    <span class="hljs-comment">/**
     * åˆ‡æ¢ç”Ÿæˆæ¨¡å¼ï¼ˆç®¡ç†æ¥å£ï¼‰
     */</span>
    @<span class="hljs-selector-tag">PostMapping</span>(<span class="hljs-string">"/mode"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">ResponseEntity</span>&lt;<span class="hljs-selector-tag">Map</span>&lt;<span class="hljs-selector-tag">String</span>, <span class="hljs-selector-tag">Object</span>&gt;&gt; <span class="hljs-selector-tag">switchMode</span>(
            <span class="hljs-variable">@RequestParam</span> String mode,
            <span class="hljs-variable">@RequestHeader</span>(value = <span class="hljs-string">"Authorization"</span>, required = false) String auth) {
        
        <span class="hljs-comment">// ç®€å•çš„è®¤è¯æ£€æŸ¥ï¼ˆç”Ÿäº§ç¯å¢ƒåº”ä½¿ç”¨Spring Securityï¼‰</span>
        <span class="hljs-selector-tag">if</span> (!<span class="hljs-built_in">isAuthorized</span>(auth)) {
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.status</span>(<span class="hljs-number">401</span>)<span class="hljs-selector-class">.body</span>(
                Map.<span class="hljs-built_in">of</span>(<span class="hljs-string">"success"</span>, false, <span class="hljs-string">"message"</span>, <span class="hljs-string">"æœªæˆæƒæ“ä½œ"</span>));
        }
        
        <span class="hljs-selector-tag">try</span> {
            <span class="hljs-selector-tag">UnifiedIdGeneratorService</span><span class="hljs-selector-class">.GenerateMode</span> <span class="hljs-selector-tag">newMode</span> = <span class="hljs-selector-tag">parseMode</span>(mode, null);
            <span class="hljs-selector-tag">if</span> (newMode == null) {
                <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.badRequest</span>()<span class="hljs-selector-class">.body</span>(
                    Map.<span class="hljs-built_in">of</span>(<span class="hljs-string">"success"</span>, false, <span class="hljs-string">"message"</span>, <span class="hljs-string">"ä¸æ”¯æŒçš„ç”Ÿæˆæ¨¡å¼: "</span> + mode));
            }
            
            <span class="hljs-selector-tag">boolean</span> <span class="hljs-selector-tag">switched</span> = <span class="hljs-selector-tag">idGenerator</span><span class="hljs-selector-class">.switchMode</span>(newMode);
            
            <span class="hljs-selector-tag">Map</span>&lt;<span class="hljs-selector-tag">String</span>, <span class="hljs-selector-tag">Object</span>&gt; <span class="hljs-selector-tag">response</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">HashMap</span>&lt;&gt;();
            <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"success"</span>, true);
            <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"switched"</span>, switched);
            <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"newMode"</span>, newMode);
            <span class="hljs-selector-tag">response</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"timestamp"</span>, System.<span class="hljs-built_in">currentTimeMillis</span>());
            
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.ok</span>(response);
            
        } <span class="hljs-selector-tag">catch</span> (Exception e) {
            <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.error</span>(<span class="hljs-string">"åˆ‡æ¢æ¨¡å¼å¤±è´¥"</span>, e);
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.status</span>(<span class="hljs-number">500</span>)<span class="hljs-selector-class">.body</span>(
                Map.<span class="hljs-built_in">of</span>(<span class="hljs-string">"success"</span>, false, <span class="hljs-string">"message"</span>, <span class="hljs-string">"åˆ‡æ¢æ¨¡å¼å¤±è´¥: "</span> + e.<span class="hljs-built_in">getMessage</span>()));
        }
    }
    
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">UnifiedIdGeneratorService</span><span class="hljs-selector-class">.GenerateMode</span> <span class="hljs-selector-tag">parseMode</span>(String modeStr, 
                                                            UnifiedIdGeneratorService.GenerateMode defaultMode) {
        <span class="hljs-selector-tag">if</span> (modeStr == null) <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">defaultMode</span>;
        
        <span class="hljs-selector-tag">switch</span> (modeStr.<span class="hljs-built_in">toLowerCase</span>()) {
            <span class="hljs-selector-tag">case</span> "<span class="hljs-selector-tag">local</span>": <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">UnifiedIdGeneratorService</span><span class="hljs-selector-class">.GenerateMode</span><span class="hljs-selector-class">.LOCAL</span>;
            <span class="hljs-selector-tag">case</span> "<span class="hljs-selector-tag">redis</span>": <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">UnifiedIdGeneratorService</span><span class="hljs-selector-class">.GenerateMode</span><span class="hljs-selector-class">.REDIS</span>;
            <span class="hljs-selector-tag">case</span> "<span class="hljs-selector-tag">db</span>": <span class="hljs-selector-tag">case</span> "<span class="hljs-selector-tag">database</span>": <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">UnifiedIdGeneratorService</span><span class="hljs-selector-class">.GenerateMode</span><span class="hljs-selector-class">.DATABASE</span>;
            <span class="hljs-selector-tag">default</span>: <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">defaultMode</span>;
        }
    }
    
    <span class="hljs-selector-tag">private</span> <span class="hljs-selector-tag">boolean</span> <span class="hljs-selector-tag">isAuthorized</span>(String auth) {
        <span class="hljs-comment">// ç®€åŒ–å®ç°ï¼Œç”Ÿäº§ç¯å¢ƒåº”ä½¿ç”¨å®Œæ•´çš„è®¤è¯æˆæƒ</span>
        <span class="hljs-selector-tag">return</span> "<span class="hljs-selector-tag">Bearer</span> <span class="hljs-selector-tag">admin-token</span>"<span class="hljs-selector-class">.equals</span>(auth) || "<span class="hljs-selector-tag">admin</span>"<span class="hljs-selector-class">.equals</span>(auth);
    }
}
</code></pre>
<h3 data-id="heading-14">3.9 å¥åº·æ£€æŸ¥ç«¯ç‚¹</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * è‡ªå®šä¹‰å¥åº·æ£€æŸ¥ï¼ˆæ£€æŸ¥Redisã€æ•°æ®åº“è¿æ¥çŠ¶æ€ï¼‰
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IdGeneratorHealthIndicator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HealthIndicator</span> {
    
    <span class="hljs-keyword">private</span> final <span class="hljs-title class_">RedisTemplate</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&gt; redisTemplate;
    <span class="hljs-keyword">private</span> final <span class="hljs-title class_">JdbcTemplate</span> jdbcTemplate;
    <span class="hljs-keyword">private</span> final <span class="hljs-title class_">UnifiedIdGeneratorService</span> idGenerator;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">IdGeneratorHealthIndicator</span>(
            <span class="hljs-title class_">RedisTemplate</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&gt; redisTemplate,
            <span class="hljs-title class_">JdbcTemplate</span> jdbcTemplate,
            <span class="hljs-title class_">UnifiedIdGeneratorService</span> idGenerator) {
        
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">redisTemplate</span> = redisTemplate;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">jdbcTemplate</span> = jdbcTemplate;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">idGenerator</span> = idGenerator;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Health</span> <span class="hljs-title function_">health</span>(<span class="hljs-params"/>) {
        <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt; details = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        <span class="hljs-built_in">boolean</span> redisHealthy = <span class="hljs-literal">false</span>;
        <span class="hljs-built_in">boolean</span> dbHealthy = <span class="hljs-literal">false</span>;
        
        <span class="hljs-comment">// æ£€æŸ¥Redisè¿æ¥</span>
        <span class="hljs-keyword">try</span> {
            redisTemplate.<span class="hljs-title function_">opsForValue</span>().<span class="hljs-title function_">get</span>(<span class="hljs-string">"health-check"</span>);
            redisHealthy = <span class="hljs-literal">true</span>;
            details.<span class="hljs-title function_">put</span>(<span class="hljs-string">"redis"</span>, <span class="hljs-string">"UP"</span>);
        } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">Exception</span> e) {
            details.<span class="hljs-title function_">put</span>(<span class="hljs-string">"redis"</span>, <span class="hljs-string">"DOWN - "</span> + e.<span class="hljs-title function_">getMessage</span>());
        }
        
        <span class="hljs-comment">// æ£€æŸ¥æ•°æ®åº“è¿æ¥</span>
        <span class="hljs-keyword">try</span> {
            jdbcTemplate.<span class="hljs-title function_">queryForObject</span>(<span class="hljs-string">"SELECT 1"</span>, <span class="hljs-title class_">Integer</span>.<span class="hljs-property">class</span>);
            dbHealthy = <span class="hljs-literal">true</span>;
            details.<span class="hljs-title function_">put</span>(<span class="hljs-string">"database"</span>, <span class="hljs-string">"UP"</span>);
        } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">Exception</span> e) {
            details.<span class="hljs-title function_">put</span>(<span class="hljs-string">"database"</span>, <span class="hljs-string">"DOWN - "</span> + e.<span class="hljs-title function_">getMessage</span>());
        }
        
        <span class="hljs-comment">// è·å–ç”Ÿæˆå™¨çŠ¶æ€</span>
        <span class="hljs-keyword">try</span> {
            <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt; status = idGenerator.<span class="hljs-title function_">getStatus</span>();
            details.<span class="hljs-title function_">put</span>(<span class="hljs-string">"generatorStatus"</span>, status);
        } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">Exception</span> e) {
            details.<span class="hljs-title function_">put</span>(<span class="hljs-string">"generatorStatus"</span>, <span class="hljs-string">"ERROR - "</span> + e.<span class="hljs-title function_">getMessage</span>());
        }
        
        <span class="hljs-comment">// ç»¼åˆå¥åº·çŠ¶æ€</span>
        <span class="hljs-keyword">if</span> (redisHealthy &amp;&amp; dbHealthy) {
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">Health</span>.<span class="hljs-title function_">up</span>().<span class="hljs-title function_">withDetails</span>(details).<span class="hljs-title function_">build</span>();
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">Health</span>.<span class="hljs-title function_">down</span>().<span class="hljs-title function_">withDetails</span>(details).<span class="hljs-title function_">build</span>();
        }
    }
}
</code></pre>
<h2 data-id="heading-15">å››ã€ç§’æ€ä¸šåŠ¡é›†æˆç¤ºä¾‹</h2>
<h3 data-id="heading-16">4.1 ç§’æ€æœåŠ¡é›†æˆå‘å·å™¨</h3>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">/**
 * ç§’æ€æœåŠ¡ - é›†æˆå‘å·å™¨ç¤ºä¾‹
 */</span>
@Service
@Slf4j
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SeckillService</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UnifiedIdGeneratorService idGenerator;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RestTemplate restTemplate;
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">SeckillService</span><span class="hljs-params">(UnifiedIdGeneratorService idGenerator, 
                         RestTemplate restTemplate)</span> </span>{
        <span class="hljs-keyword">this</span>.idGenerator = idGenerator;
        <span class="hljs-keyword">this</span>.restTemplate = restTemplate;
    }
    
    <span class="hljs-comment">/**
     * ç§’æ€ä¸‹å•æµç¨‹
     */</span>
    @<span class="hljs-function">Transactional
    <span class="hljs-keyword">public</span> SeckillResult <span class="hljs-title">placeOrder</span><span class="hljs-params">(SeckillRequest request)</span> </span>{
        <span class="hljs-type">long</span> startTime = System.<span class="hljs-built_in">currentTimeMillis</span>();
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. å‚æ•°æ ¡éªŒ</span>
            <span class="hljs-built_in">validateRequest</span>(request);
            
            <span class="hljs-comment">// 2. ç”Ÿæˆå”¯ä¸€è®¢å•IDï¼ˆä½¿ç”¨å‘å·å™¨ï¼‰</span>
            IdResult idResult = idGenerator.<span class="hljs-built_in">nextId</span>(IdType.ORDER);
            <span class="hljs-keyword">if</span> (!idResult.<span class="hljs-built_in">isSuccess</span>()) {
                <span class="hljs-keyword">return</span> SeckillResult.<span class="hljs-built_in">fail</span>(<span class="hljs-string">"ç³»ç»Ÿç¹å¿™ï¼Œè¯·é‡è¯•"</span>);
            }
            
            <span class="hljs-type">long</span> orderId = idResult.<span class="hljs-built_in">getId</span>();
            log.<span class="hljs-built_in">info</span>(<span class="hljs-string">"ç”Ÿæˆè®¢å•IDæˆåŠŸ: {}"</span>, orderId);
            
            <span class="hljs-comment">// 3. æ£€æŸ¥åº“å­˜ï¼ˆRedisåŸå­æ“ä½œï¼‰</span>
            <span class="hljs-type">boolean</span> hasStock = <span class="hljs-built_in">checkStock</span>(request.<span class="hljs-built_in">getProductId</span>(), request.<span class="hljs-built_in">getQuantity</span>());
            <span class="hljs-keyword">if</span> (!hasStock) {
                <span class="hljs-keyword">return</span> SeckillResult.<span class="hljs-built_in">fail</span>(<span class="hljs-string">"åº“å­˜ä¸è¶³"</span>);
            }
            
            <span class="hljs-comment">// 4. æ‰£å‡åº“å­˜</span>
            <span class="hljs-type">boolean</span> deductSuccess = <span class="hljs-built_in">deductStock</span>(request.<span class="hljs-built_in">getProductId</span>(), request.<span class="hljs-built_in">getQuantity</span>());
            <span class="hljs-keyword">if</span> (!deductSuccess) {
                <span class="hljs-keyword">return</span> SeckillResult.<span class="hljs-built_in">fail</span>(<span class="hljs-string">"åº“å­˜æ‰£å‡å¤±è´¥"</span>);
            }
            
            <span class="hljs-comment">// 5. åˆ›å»ºè®¢å•</span>
            Order order = <span class="hljs-built_in">createOrder</span>(orderId, request);
            
            <span class="hljs-comment">// 6. å‘é€è®¢å•åˆ›å»ºæ¶ˆæ¯</span>
            <span class="hljs-built_in">sendOrderMessage</span>(order);
            
            <span class="hljs-type">long</span> costTime = System.<span class="hljs-built_in">currentTimeMillis</span>() - startTime;
            log.<span class="hljs-built_in">info</span>(<span class="hljs-string">"ç§’æ€ä¸‹å•æˆåŠŸï¼Œè®¢å•ID: {}, è€—æ—¶: {}ms"</span>, orderId, costTime);
            
            <span class="hljs-keyword">return</span> SeckillResult.<span class="hljs-built_in">success</span>(order);
            
        } <span class="hljs-built_in">catch</span> (Exception e) {
            log.<span class="hljs-built_in">error</span>(<span class="hljs-string">"ç§’æ€ä¸‹å•å¼‚å¸¸"</span>, e);
            <span class="hljs-keyword">return</span> SeckillResult.<span class="hljs-built_in">fail</span>(<span class="hljs-string">"ç³»ç»Ÿå¼‚å¸¸: "</span> + e.<span class="hljs-built_in">getMessage</span>());
        }
    }
    
    <span class="hljs-comment">/**
     * æ‰¹é‡ç”Ÿæˆç§’æ€èµ„æ ¼ä»¤ç‰Œ
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;<span class="hljs-type">String</span>&gt; <span class="hljs-title">generateSeckillTokens</span><span class="hljs-params">(<span class="hljs-type">String</span> activityId, <span class="hljs-type">int</span> count)</span> </span>{
        <span class="hljs-keyword">try</span> {
            List&lt;Long&gt; tokenIds = idGenerator.<span class="hljs-built_in">batchNextId</span>(IdType.SECKILL, count);
            
            <span class="hljs-keyword">return</span> tokenIds.<span class="hljs-built_in">stream</span>()
                .<span class="hljs-built_in">map</span>(id -&gt; <span class="hljs-built_in">buildToken</span>(activityId, id))
                .<span class="hljs-built_in">collect</span>(Collectors.<span class="hljs-built_in">toList</span>());
                
        } <span class="hljs-built_in">catch</span> (Exception e) {
            log.<span class="hljs-built_in">error</span>(<span class="hljs-string">"ç”Ÿæˆç§’æ€ä»¤ç‰Œå¤±è´¥"</span>, e);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RuntimeException</span>(<span class="hljs-string">"ç”Ÿæˆç§’æ€ä»¤ç‰Œå¤±è´¥"</span>, e);
        }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-title">buildToken</span><span class="hljs-params">(<span class="hljs-type">String</span> activityId, <span class="hljs-type">long</span> tokenId)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-type">String</span>.format(<span class="hljs-string">"SECKILL_%s_%d"</span>, activityId, tokenId);
    }
    
    <span class="hljs-comment">// å…¶ä»–è¾…åŠ©æ–¹æ³•...</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-type">void</span> <span class="hljs-title">validateRequest</span><span class="hljs-params">(SeckillRequest request)</span> </span>{
        <span class="hljs-keyword">if</span> (request.<span class="hljs-built_in">getQuantity</span>() &lt;= <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">IllegalArgumentException</span>(<span class="hljs-string">"è´­ä¹°æ•°é‡å¿…é¡»å¤§äº0"</span>);
        }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title">checkStock</span><span class="hljs-params">(<span class="hljs-type">String</span> productId, <span class="hljs-type">int</span> quantity)</span> </span>{
        <span class="hljs-comment">// RedisåŸå­æ“ä½œæ£€æŸ¥åº“å­˜</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// ç®€åŒ–å®ç°</span>
    }
    
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title">deductStock</span><span class="hljs-params">(<span class="hljs-type">String</span> productId, <span class="hljs-type">int</span> quantity)</span> </span>{
        <span class="hljs-comment">// RedisåŸå­æ“ä½œæ‰£å‡åº“å­˜</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// ç®€åŒ–å®ç°</span>
    }
    
    <span class="hljs-function"><span class="hljs-keyword">private</span> Order <span class="hljs-title">createOrder</span><span class="hljs-params">(<span class="hljs-type">long</span> orderId, SeckillRequest request)</span> </span>{
        Order order = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Order</span>();
        order.<span class="hljs-built_in">setId</span>(orderId);
        <span class="hljs-comment">// è®¾ç½®å…¶ä»–è®¢å•å±æ€§</span>
        <span class="hljs-keyword">return</span> order;
    }
    
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-type">void</span> <span class="hljs-title">sendOrderMessage</span><span class="hljs-params">(Order order)</span> </span>{
        <span class="hljs-comment">// å‘é€æ¶ˆæ¯åˆ°æ¶ˆæ¯é˜Ÿåˆ—</span>
    }
}
</code></pre>
<h2 data-id="heading-17">äº”ã€æ€§èƒ½æµ‹è¯•ä¸ä¼˜åŒ–</h2>
<h3 data-id="heading-18">5.1 å‹åŠ›æµ‹è¯•é…ç½®</h3>
<pre><code class="hljs language-ini" lang="ini">/**
 * å‘å·å™¨æ€§èƒ½æµ‹è¯•
 */
@SpringBootTest
@Slf4j
public class IdGeneratorPerformanceTest {
    
    @Autowired
    private UnifiedIdGeneratorService idGenerator<span class="hljs-comment">;</span>
    
    private final ExecutorService <span class="hljs-attr">executor</span> = Executors.newFixedThreadPool(<span class="hljs-number">100</span>)<span class="hljs-comment">;</span>
    
    @Test
    public void testPerformance() throws InterruptedException {
        int <span class="hljs-attr">threadCount</span> = <span class="hljs-number">50</span><span class="hljs-comment">;</span>
        int <span class="hljs-attr">requestsPerThread</span> = <span class="hljs-number">2000</span><span class="hljs-comment">;</span>
        CountDownLatch <span class="hljs-attr">latch</span> = new CountDownLatch(threadCount)<span class="hljs-comment">;</span>
        
        AtomicLong <span class="hljs-attr">successCount</span> = new AtomicLong(<span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
        AtomicLong <span class="hljs-attr">failCount</span> = new AtomicLong(<span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
        AtomicLong <span class="hljs-attr">totalTime</span> = new AtomicLong(<span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
        
        long <span class="hljs-attr">startTime</span> = System.currentTimeMillis()<span class="hljs-comment">;</span>
        
        for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; threadCount; i++) {</span>
            executor.submit(() -&gt; {
                try {
                    for (int <span class="hljs-attr">j</span> = <span class="hljs-number">0</span><span class="hljs-comment">; j &lt; requestsPerThread; j++) {</span>
                        long <span class="hljs-attr">requestStart</span> = System.nanoTime()<span class="hljs-comment">;</span>
                        
                        try {
                            IdResult <span class="hljs-attr">result</span> = idGenerator.nextId(IdType.ORDER)<span class="hljs-comment">;</span>
                            if (result.isSuccess()) {
                                successCount.incrementAndGet()<span class="hljs-comment">;</span>
                            } else {
                                failCount.incrementAndGet()<span class="hljs-comment">;</span>
                            }
                        } catch (Exception e) {
                            failCount.incrementAndGet()<span class="hljs-comment">;</span>
                        }
                        
                        long <span class="hljs-attr">cost</span> = System.nanoTime() - requestStart<span class="hljs-comment">;</span>
                        totalTime.addAndGet(cost)<span class="hljs-comment">;</span>
                    }
                } finally {
                    latch.countDown()<span class="hljs-comment">;</span>
                }
            })<span class="hljs-comment">;</span>
        }
        
        latch.await()<span class="hljs-comment">;</span>
        long <span class="hljs-attr">totalCost</span> = System.currentTimeMillis() - startTime<span class="hljs-comment">;</span>
        
        long <span class="hljs-attr">totalRequests</span> = threadCount * requestsPerThread<span class="hljs-comment">;</span>
        long <span class="hljs-attr">tps</span> = totalRequests * <span class="hljs-number">1000</span>L / totalCost<span class="hljs-comment">;</span>
        double <span class="hljs-attr">avgTime</span> = totalTime.get() / (double) totalRequests / <span class="hljs-number">1000000.0</span><span class="hljs-comment">;</span>
        
        log.info("æ€§èƒ½æµ‹è¯•ç»“æœ:")<span class="hljs-comment">;</span>
        log.info("æ€»è¯·æ±‚æ•°: {}", totalRequests)<span class="hljs-comment">;</span>
        log.info("æˆåŠŸæ•°: {}", successCount.get())<span class="hljs-comment">;</span>
        log.info("å¤±è´¥æ•°: {}", failCount.get())<span class="hljs-comment">;</span>
        log.info("æ€»è€—æ—¶: {}ms", totalCost)<span class="hljs-comment">;</span>
        log.info("TPS: {}", tps)<span class="hljs-comment">;</span>
        log.info("å¹³å‡è€—æ—¶: {}ms", avgTime)<span class="hljs-comment">;</span>
    }
}
</code></pre>
<h2 data-id="heading-19">å…­ã€éƒ¨ç½²ä¸ç›‘æ§</h2>
<h3 data-id="heading-20">6.1 Docker éƒ¨ç½²é…ç½®</h3>
<pre><code class="hljs language-bash" lang="bash">FROM openjdk:8-jre-slim

<span class="hljs-comment"># å®‰è£…å¿…è¦çš„å·¥å…·</span>
RUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends \
    curl \
    &amp;&amp; <span class="hljs-built_in">rm</span> -rf /var/lib/apt/lists/*

<span class="hljs-comment"># åˆ›å»ºåº”ç”¨ç”¨æˆ·</span>
RUN groupadd -r spring &amp;&amp; useradd -r -g spring spring

<span class="hljs-comment"># åˆ›å»ºåº”ç”¨ç›®å½•</span>
WORKDIR /app

<span class="hljs-comment"># å¤åˆ¶JARæ–‡ä»¶</span>
COPY target/id-generator-service-1.0.0.jar app.jar

<span class="hljs-comment"># è®¾ç½®æƒé™</span>
RUN <span class="hljs-built_in">chown</span> -R spring:spring /app
USER spring

<span class="hljs-comment"># å¥åº·æ£€æŸ¥</span>
HEALTHCHECK --interval=30s --<span class="hljs-built_in">timeout</span>=3s --start-period=60s --retries=3 \
    CMD curl -f http://localhost:8081/actuator/health || <span class="hljs-built_in">exit</span> 1

<span class="hljs-comment"># å¯åŠ¨åº”ç”¨</span>
ENTRYPOINT [<span class="hljs-string">"java"</span>, <span class="hljs-string">"-jar"</span>, <span class="hljs-string">"app.jar"</span>]
</code></pre>
<h3 data-id="heading-21">6.2 Prometheus ç›‘æ§é…ç½®</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># prometheus.yml</span>
<span class="hljs-attr">scrape_configs:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">'id-generator'</span>
    <span class="hljs-attr">metrics_path:</span> <span class="hljs-string">'/actuator/prometheus'</span>
    <span class="hljs-attr">static_configs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">'id-generator-service:8081'</span>]
    <span class="hljs-attr">scrape_interval:</span> <span class="hljs-string">15s</span>
</code></pre>
<h2 data-id="heading-22">ä¸ƒã€æ€»ç»“</h2>
<p>æœ¬æ–‡è¯¦ç»†å®ç°äº†åŸºäºSpringCloudçš„åˆ†å¸ƒå¼å‘å·å™¨ç³»ç»Ÿï¼Œå…·å¤‡ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<h3 data-id="heading-23">7.1 æ ¸å¿ƒä¼˜åŠ¿</h3>
<ol>
<li><strong>é«˜æ€§èƒ½</strong>ï¼šRediså·æ®µæ¨¡å¼æ”¯æŒ10ä¸‡+ TPS</li>
<li><strong>é«˜å¯ç”¨</strong>ï¼šå¤šçº§é™çº§ç­–ç•¥ï¼Œç¡®ä¿æœåŠ¡æ°¸è¿œå¯ç”¨</li>
<li><strong>æ˜“æ‰©å±•</strong>ï¼šæ°´å¹³æ‰©å±•ç®€å•ï¼Œæ”¯æŒé›†ç¾¤éƒ¨ç½²</li>
<li><strong>ä¸šåŠ¡å‹å¥½</strong>ï¼šæ”¯æŒå¤šç§ä¸šåŠ¡ç±»å‹ï¼ŒIDåŒ…å«ä¸šåŠ¡ä¿¡æ¯</li>
</ol>
<h3 data-id="heading-24">7.2 ç”Ÿäº§çº§ç‰¹æ€§</h3>
<ol>
<li><strong>ç›‘æ§å®Œå¤‡</strong>ï¼šå®Œæ•´çš„æŒ‡æ ‡ç›‘æ§å’Œå¥åº·æ£€æŸ¥</li>
<li><strong>å®¹é”™æœºåˆ¶</strong>ï¼šè‡ªåŠ¨é™çº§ã€é‡è¯•æœºåˆ¶ã€è¶…æ—¶æ§åˆ¶</li>
<li><strong>å®‰å…¨å¯æ§</strong>ï¼šæ”¯æŒæ¨¡å¼åˆ‡æ¢ã€æƒé™æ§åˆ¶</li>
<li><strong>è¿ç»´å‹å¥½</strong>ï¼šDockeråŒ–éƒ¨ç½²ã€é…ç½®å¤–éƒ¨åŒ–</li>
</ol>
<h3 data-id="heading-25">7.3 é€‚ç”¨åœºæ™¯</h3>
<ul>
<li>âœ… ç”µå•†ç§’æ€ç³»ç»Ÿ</li>
<li>âœ… é‡‘èäº¤æ˜“ç³»ç»Ÿ</li>
<li>âœ… ç‰©æµè®¢å•ç³»ç»Ÿ</li>
<li>âœ… ç¤¾äº¤feedæµç³»ç»Ÿ</li>
</ul>
<p>è¿™å¥—å‘å·å™¨è§£å†³æ–¹æ¡ˆå·²ç»è¿‡ç”Ÿäº§ç¯å¢ƒéªŒè¯ï¼Œèƒ½å¤Ÿæœ‰æ•ˆæ”¯æ’‘é«˜å¹¶å‘åœºæ™¯ä¸‹çš„IDç”Ÿæˆéœ€æ±‚ï¼Œæ˜¯æ„å»ºé«˜æ€§èƒ½åˆ†å¸ƒå¼ç³»ç»Ÿçš„å…³é”®åŸºç¡€è®¾æ–½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring Boot 3.2å®æˆ˜ï¼š5ä¸ªæå‡å¼€å‘æ•ˆç‡çš„éšè—ç‰¹æ€§åŠé¿å‘æŒ‡å—]]></title>    <link>https://juejin.cn/post/7576130918078136355</link>    <guid>https://juejin.cn/post/7576130918078136355</guid>    <pubDate>2025-11-25T00:16:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576130918078136355" data-draft-id="7576378563545530420" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring Boot 3.2å®æˆ˜ï¼š5ä¸ªæå‡å¼€å‘æ•ˆç‡çš„éšè—ç‰¹æ€§åŠé¿å‘æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-25T00:16:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="IT_é™ˆå¯’"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring Boot 3.2å®æˆ˜ï¼š5ä¸ªæå‡å¼€å‘æ•ˆç‡çš„éšè—ç‰¹æ€§åŠé¿å‘æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    IT_é™ˆå¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T00:16:39.000Z" title="Tue Nov 25 2025 00:16:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    20
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Spring Boot 3.2å®æˆ˜ï¼š5ä¸ªæå‡å¼€å‘æ•ˆç‡çš„éšè—ç‰¹æ€§åŠé¿å‘æŒ‡å—</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Spring Boot 3.2ä½œä¸ºSpringç”Ÿæ€çš„æœ€æ–°ç¨³å®šç‰ˆæœ¬ï¼Œä¸ä»…å»¶ç»­äº†â€œçº¦å®šä¼˜äºé…ç½®â€çš„ç†å¿µï¼Œè¿˜å¼•å…¥äº†ä¸€ç³»åˆ—é²œä¸ºäººçŸ¥ä½†æå…·å®ç”¨æ€§çš„ç‰¹æ€§ã€‚è¿™äº›ç‰¹æ€§å¾€å¾€è¢«å®˜æ–¹æ–‡æ¡£è½»ææ·¡å†™ï¼Œå´èƒ½æ˜¾è‘—æå‡å¼€å‘æ•ˆç‡ã€ç®€åŒ–è°ƒè¯•æµç¨‹æˆ–ä¼˜åŒ–è¿è¡Œæ—¶æ€§èƒ½ã€‚ç„¶è€Œï¼Œæ–°ç‰¹æ€§çš„ä¸å½“ä½¿ç”¨ä¹Ÿå¯èƒ½å¸¦æ¥æ„æ–™ä¹‹å¤–çš„â€œå‘â€ã€‚æœ¬æ–‡å°†æ·±å…¥å‰–æSpring Boot 3.2ä¸­5ä¸ªéšè—çš„â€œç”Ÿäº§åŠ›å·¥å…·â€ï¼Œå¹¶ç»“åˆå®é™…æ¡ˆä¾‹æä¾›é¿å‘æŒ‡å—ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸»ä½“</h2>
<h3 data-id="heading-3">1. <strong>GraalVM Native Imageæ”¯æŒå¢å¼ºï¼šæ›´å¿«çš„å¯åŠ¨ä¸æ›´ä½çš„å†…å­˜å ç”¨</strong></h3>
<p><strong>ç‰¹æ€§è§£æ</strong>ï¼š<br/>
Spring Boot 3.2å¯¹GraalVMåŸç”Ÿé•œåƒçš„æ”¯æŒä»å®éªŒæ€§å‡çº§ä¸ºæ­£å¼ç‰¹æ€§ã€‚é€šè¿‡<code>spring-boot-maven-plugin</code>çš„<code>native</code>æ„å»ºç›®æ ‡ï¼Œå¼€å‘è€…å¯ç›´æ¥ç”Ÿæˆæ— éœ€JVMçš„åŸç”Ÿå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¯åŠ¨æ—¶é—´å¯ç¼©çŸ­è‡³æ¯«ç§’çº§ã€‚</p>
<p><strong>å®æˆ˜æŠ€å·§</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">mvn -Pnative spring-boot:build-image
</code></pre>
<ul>
<li><strong>é¿å‘æŒ‡å—</strong>ï¼š
<ul>
<li><strong>åå°„ä¸åŠ¨æ€ä»£ç†é—®é¢˜</strong>ï¼šåŸç”Ÿç¼–è¯‘è¦æ±‚æ‰€æœ‰åå°„æ“ä½œåœ¨ç¼–è¯‘æœŸæ˜ç¡®å£°æ˜ã€‚ä½¿ç”¨<code>@RegisterReflectionForBinding</code>æ³¨è§£æ ‡æ³¨éœ€è¦åå°„çš„ç±»ï¼ˆå¦‚DTOï¼‰ã€‚</li>
<li><strong>Classpathæ‰«æé™åˆ¶</strong>ï¼šé¿å…è¿è¡Œæ—¶åŠ¨æ€åŠ è½½ç±»ï¼Œæ”¹ç”¨é™æ€<code>@Import</code>æˆ–æ¡ä»¶è£…é…ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-4">2. <strong>è™šæ‹Ÿçº¿ç¨‹ï¼ˆVirtual Threadsï¼‰çš„æ·±åº¦é›†æˆ</strong></h3>
<p><strong>ç‰¹æ€§è§£æ</strong>ï¼š<br/>
åŸºäºJDK21çš„è™šæ‹Ÿçº¿ç¨‹èƒ½åŠ›ï¼ŒSpring Boot 3.2é€šè¿‡<code>spring.threads.virtual.enabled=true</code>è‡ªåŠ¨å°†Tomcat/Jettyç­‰Webå®¹å™¨çš„é˜»å¡IOæ“ä½œå§”æ‰˜ç»™è™šæ‹Ÿçº¿ç¨‹æ± ï¼Œè½»æ¾å®ç°ä¸‡çº§å¹¶å‘ã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">spring:
  threads:
    virtual:
      enabled: true
</code></pre>
<ul>
<li><strong>é¿å‘æŒ‡å—</strong>ï¼š
<ul>
<li><strong>åŒæ­¥ä»£ç å—é˜»å¡VT</strong>ï¼šé¿å…åœ¨è™šæ‹Ÿçº¿ç¨‹ä¸­ä½¿ç”¨<code>synchronized</code>æˆ–é•¿æ—¶é—´æŒæœ‰é”ï¼Œæ”¹ç”¨<code>ReentrantLock</code>ã€‚</li>
<li><strong>ThreadLocalæ±¡æŸ“é—®é¢˜</strong>ï¼šè™šæ‹Ÿçº¿ç¨‹ç”Ÿå‘½å‘¨æœŸçŸ­ä¸”é¢‘ç¹å¤ç”¨ï¼Œéœ€æ˜¾å¼æ¸…ç†ThreadLocalå˜é‡ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-5">3. <strong>Declarative HTTPå®¢æˆ·ç«¯çš„æ–°ç©æ³•â€”â€”@HttpExchangeæ³¨è§£æ—</strong></h3>
<p><strong>ç‰¹æ€§è§£æ</strong>ï¼š<br/>
ç›¸è¾ƒäºFeignæˆ–RestTemplateï¼Œæ–°çš„<code>@HttpExchange</code>æ³¨è§£æ—ï¼ˆå¦‚<code>@GetExchange</code>, <code>@PostExchange</code>)å…è®¸é€šè¿‡æ¥å£å£°æ˜HTTPè¯·æ±‚ï¼Œæ”¯æŒå“åº”å¼ä¸éé˜»å¡æ¨¡å¼ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@HttpExchange("/api")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserClient</span> {
    <span class="hljs-meta">@GetExchange("/users/{id}")</span>
    Mono&lt;User&gt; <span class="hljs-title function_">getUser</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> String id)</span>;
}
</code></pre>
<ul>
<li><strong>é¿å‘æŒ‡å—</strong>ï¼š
<ul>
<li><strong>è¶…æ—¶é…ç½®é—æ¼é£é™©</strong>ï¼šé»˜è®¤æ— è¶…æ—¶è®¾ç½®ï¼åŠ¡å¿…é€šè¿‡<code>spring.webclient.timeout.connect=5s</code>å…¨å±€é…ç½®ã€‚</li>
<li><strong>URLç¼–ç é™·é˜±è·¯å¾„å˜é‡ä¸­çš„ç‰¹æ®Šå­—ç¬¦éœ€æ‰‹åŠ¨ç¼–ç ã€‚</strong></li>
</ul>
</li>
</ul>
<p>###4.<strong>CRaCï¼ˆCheckpoint/Restoreï¼‰é¢„çƒ­åŠ é€Ÿ</strong>
ç‰¹æ€§è§£æï¼š
ç»“åˆCRaCé¡¹ç›®,åº”ç”¨å¯åŠ¨æ—¶å¯ç”Ÿæˆæ£€æŸ¥ç‚¹å¿«ç…§åç»­ç›´æ¥æ¢å¤è¿è¡ŒçŠ¶æ€è·³è¿‡JVMç±»åŠ è½½å’Œåˆå§‹åŒ–é˜¶æ®µã€‚</p>
<p>æ“ä½œæ­¥éª¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">java -XX:CRaCCheckpointTo=/path/to/snapshot -jar app.jar
<span class="hljs-comment">#æ¢å¤æ—¶</span>
java -XX:CRaCRestoreFrom=/path/to/snapshot
</code></pre>
<p>-é¿å‘æŒ‡å—ï¼š
â€¢	èµ„æºæ³„æ¼é£é™©ç¡®ä¿æ‰€æœ‰æ‰“å¼€çš„æ–‡ä»¶/Socketåœ¨æ£€æŸ¥ç‚¹å‰å…³é—­ã€‚
â€¢	éšæœºæ•°å®‰å…¨ä½¿ç”¨SecureRandomæ—¶éœ€ç¦ç”¨é¢„ç”Ÿæˆç§å­ã€‚</p>
<p>###5.<strong>æµ‹è¯•å¥—ä»¶çš„é©å‘½â€”â€”@DynamicPropertySourceå¼ºåŒ–</strong>
ç‰¹æ€§è§£æï¼š
åŠ¨æ€å±æ€§æ³¨å…¥ä¸å†å±€é™äºé™æ€æ–¹æ³•ç°åœ¨å¯é€šè¿‡Lambdaè¡¨è¾¾å¼åœ¨æµ‹è¯•è¿è¡Œæ—¶å®æ—¶è®¡ç®—å±æ€§å€¼ç‰¹åˆ«é€‚åˆTestcontainersé›†æˆã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Testcontainers</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">IntegrationTest</span> {
    <span class="hljs-keyword">static</span> PostgreSQLContainer&lt;?&gt; postgres = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PostgreSQLContainer</span>&lt;&gt;();

    <span class="hljs-meta">@DynamicPropertySource</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerProperties</span><span class="hljs-params">(DynamicPropertyRegistry registry)</span> {
        registry.add(<span class="hljs-string">"db.url"</span>, postgres::getJdbcUrl);
    }
}
</code></pre>
<p>-é¿å‘æŒ‡å—ï¼š
â€¢	ç”Ÿå‘½å‘¨æœŸé”™ä¹±ç¡®ä¿å®¹å™¨å…ˆå¯åŠ¨å†æ³¨å†Œå±æ€§ã€‚
â€¢	å¹¶è¡Œæµ‹è¯•å†²çªä¸ºæ¯ä¸ªæµ‹è¯•ç±»åˆ†é…ç‹¬ç«‹å®¹å™¨å®ä¾‹ã€‚</p>
<hr/>
<p>##æ€»ç»“</p>
<p>SpringBoot3.2çš„è¿™äº›éšè—ç‰¹æ€§åƒç‘å£«å†›åˆ€èˆ¬è¦†ç›–äº†æ€§èƒ½ä¼˜åŒ–ã€å¹¶å‘æ¨¡å‹ã€APIè®¾è®¡ç­‰é¢†åŸŸä½†æ¯ä¸ªå·¥å…·éƒ½éœ€è¦ç†è§£å…¶è®¾è®¡å“²å­¦ä¸çº¦æŸæ¡ä»¶æ‰èƒ½å‘æŒ¥æœ€å¤§ä»·å€¼å»ºè®®è¯»è€…ï¼š</p>
<p>1.ç”Ÿäº§ç¯å¢ƒå¯ç”¨GraalVMNativeå‰å¿…é¡»å®Œæˆå…¨é‡é›†æˆæµ‹è¯•ã€‚
2è™šæ‹Ÿçº¿ç¨‹è™½å¥½ä½†ä¸é€‚åˆCPUå¯†é›†å‹ä»»åŠ¡åœºæ™¯ã€‚
3å®šæœŸæ£€æŸ¥å®˜æ–¹æ›´æ–°æ—¥å¿—è¿™äº›ç‰¹æ€§çš„è¡Œä¸ºå¯èƒ½åœ¨åç»­å°ç‰ˆæœ¬ä¸­è°ƒæ•´ã€‚</p>
<p>æŠ€æœ¯é€‰å‹çš„æœ¬è´¨æ˜¯æƒè¡¡å¸Œæœ›é€šè¿‡æœ¬æ–‡å¸®åŠ©ä½ åœ¨æ‹¥æŠ±æ–°ç‰¹æ€§çš„åŒæ—¶é¿å¼€æ½œåœ¨æ·±æ°´åŒº</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Rustè¿›é˜¶å¿…å¤‡:thiserrorç”¨æ³•å…¨é¢è§£æ]]></title>    <link>https://juejin.cn/post/7576371992615845924</link>    <guid>https://juejin.cn/post/7576371992615845924</guid>    <pubDate>2025-11-25T10:51:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576371992615845924" data-draft-id="7576459005390127147" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Rustè¿›é˜¶å¿…å¤‡:thiserrorç”¨æ³•å…¨é¢è§£æ"/> <meta itemprop="keywords" content="Rust"/> <meta itemprop="datePublished" content="2025-11-25T10:51:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§é±¼ä¸ƒæˆé¥±"/> <meta itemprop="url" content="https://juejin.cn/user/3017475369480509"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Rustè¿›é˜¶å¿…å¤‡:thiserrorç”¨æ³•å…¨é¢è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3017475369480509/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§é±¼ä¸ƒæˆé¥±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T10:51:22.000Z" title="Tue Nov 25 2025 10:51:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>è¿™æ˜¯<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzk0NTYxMDEyOQ%3D%3D%26action%3Dgetalbum%26album_id%3D4231603980486688798%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=Mzk0NTYxMDEyOQ==&amp;action=getalbum&amp;album_id=4231603980486688798#wechat_redirect" ref="nofollow noopener noreferrer">Rustä¹ä¹å…«åä¸€éš¾</a>ç¬¬åå››ç¯‡ï¼Œä»‹ç»ä¸‹thiserrorç»„ä»¶ã€‚ä¹‹å‰èŠè¿‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FvQB7YYq9t_oI4tl1DeqGVA" target="_blank" title="https://mp.weixin.qq.com/s/vQB7YYq9t_oI4tl1DeqGVA" ref="nofollow noopener noreferrer">anyhow</a>ï¼Œæåˆ°thiserror+anyhowæ‰æ˜¯æœ€ä½³ç»„åˆï¼Œè¿™æ¬¡æŠŠç¼ºå°‘çš„å†…å®¹è¡¥ä¸Šã€‚ç›®å‰Rustå·¥ç¨‹ç•Œæ™®éå¼•å…¥äº†thiserrorï¼ŒåŸå› æ˜¯å­˜åœ¨ä¸€äº›ç—›ç‚¹ï¼Œæ¯”å¦‚æ‰‹å†™ Display å¤ªéº»çƒ¦ï¼Œä¸šåŠ¡é€»è¾‘å¼€æ²¡æ•²ï¼Œå°±è¦å †æ ·æ¿ä»£ç ï¼Œç±»ä¼¼ä¸‹é¢è¿™ç§ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::fmt;

<span class="hljs-meta">#[derive(Debug)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">MyError</span> {
    <span class="hljs-title function_ invoke__">Config</span>(<span class="hljs-type">String</span>),
    <span class="hljs-title function_ invoke__">Io</span>(std::io::Error),
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">fmt</span>::Display <span class="hljs-keyword">for</span> <span class="hljs-title class_">MyError</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fmt</span>(&amp;<span class="hljs-keyword">self</span>, f: &amp;<span class="hljs-keyword">mut</span> fmt::Formatter) <span class="hljs-punctuation">-&gt;</span> fmt::<span class="hljs-type">Result</span> {
        <span class="hljs-keyword">match</span> <span class="hljs-keyword">self</span> {
            MyError::<span class="hljs-title function_ invoke__">Config</span>(s) =&gt; <span class="hljs-built_in">write!</span>(f, <span class="hljs-string">"Config error: {}"</span>, s),
            MyError::<span class="hljs-title function_ invoke__">Io</span>(e) =&gt; <span class="hljs-built_in">write!</span>(f, <span class="hljs-string">"IO error: {}"</span>, e),
        }
    }
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">std</span>::error::Error <span class="hljs-keyword">for</span> <span class="hljs-title class_">MyError</span> {}
</code></pre>
<p>æˆ–è€…å†™å¤§é‡é”™è¯¯é—´çš„ <code>From</code> è½¬æ¢ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">impl</span> <span class="hljs-title class_">From</span>&lt;std::io::Error&gt; <span class="hljs-keyword">for</span> <span class="hljs-title class_">MyError</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">from</span>(e: std::io::Error) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        MyError::<span class="hljs-title function_ invoke__">Io</span>(e)
    }
}
</code></pre>
<p>thiserrorå¯ä»¥è¾ƒå¥½çš„è§£å†³è¿™äº›é—®é¢˜ï¼Œä¸‹é¢å…ˆå…¥ä¸ªé—¨ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ç®€å•å…¥é—¨</h2>
<p>è·Ÿä¹‹å‰ä¸€æ ·ï¼Œå…ˆå‘ä¸ªå…¥é—¨ç¤ºä¾‹ï¼Œå¤åˆ¶ç²˜è´´å°±å¯ä»¥è¿è¡Œï¼Œæ–¹ä¾¿ç†è§£ã€‚</p>
<ul>
<li>
<p>é¡¹ç›®ç»“æ„</p>
<pre><code class="hljs language-css" lang="css">thiserror-demo/
â”œâ”€â”€ Cargo<span class="hljs-selector-class">.toml</span>
â””â”€â”€ <span class="hljs-attribute">src</span>
    â””â”€â”€ <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.rs</span>
</code></pre>
</li>
<li>
<p>Cargo.toml, æ·»åŠ ä¾èµ–,<em>éœ€è¦ rustc 1.68 åŠä»¥ä¸Š</em></p>
<pre><code class="hljs language-yaml" lang="yaml">[<span class="hljs-string">package</span>]
<span class="hljs-string">name</span> <span class="hljs-string">=</span> <span class="hljs-string">"thiserror-demo"</span>
<span class="hljs-string">version</span> <span class="hljs-string">=</span> <span class="hljs-string">"0.1.0"</span>
<span class="hljs-string">edition</span> <span class="hljs-string">=</span> <span class="hljs-string">"2021"</span>

[<span class="hljs-string">dependencies</span>]
<span class="hljs-string">thiserror</span> <span class="hljs-string">=</span> <span class="hljs-string">"2"</span>
<span class="hljs-string">anyhow</span> <span class="hljs-string">=</span> <span class="hljs-string">"1"</span>
</code></pre>
</li>
<li>
<p>main.rs</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::fs::File;
<span class="hljs-keyword">use</span> std::io::{<span class="hljs-keyword">self</span>, Read};
<span class="hljs-keyword">use</span> thiserror::Error;

<span class="hljs-comment">/// è‡ªå®šä¹‰é”™è¯¯ç±»å‹</span>
<span class="hljs-meta">#[derive(Debug, Error)]</span>
<span class="hljs-keyword">enum</span> <span class="hljs-title class_">AppError</span> {
    <span class="hljs-comment">/// IO é”™è¯¯è‡ªåŠ¨è½¬æ¢</span>
    <span class="hljs-meta">#[error(<span class="hljs-string">"IO é”™è¯¯: {0}"</span>)]</span>
    <span class="hljs-title function_ invoke__">Io</span>(<span class="hljs-meta">#[from]</span> io::Error),

    <span class="hljs-comment">/// è‡ªå®šä¹‰é”™è¯¯</span>
    <span class="hljs-meta">#[error(<span class="hljs-string">"é…ç½®æ ¼å¼é”™è¯¯: {0}"</span>)]</span>
    <span class="hljs-title function_ invoke__">InvalidConfig</span>(<span class="hljs-type">String</span>),

    <span class="hljs-comment">/// anyhow ç”¨äºå…œåº•é”™è¯¯</span>
    <span class="hljs-meta">#[error(<span class="hljs-string">"å†…éƒ¨é”™è¯¯: {0}"</span>)]</span>
    <span class="hljs-title function_ invoke__">Internal</span>(<span class="hljs-meta">#[from]</span> anyhow::Error),
}

<span class="hljs-comment">/// è¯»å–é…ç½®æ–‡ä»¶</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">read_config</span>(path: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>, AppError&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">f</span> = File::<span class="hljs-title function_ invoke__">open</span>(path)?; <span class="hljs-comment">// è‡ªåŠ¨è½¬æˆ AppError::Io</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">new</span>();
    f.<span class="hljs-title function_ invoke__">read_to_string</span>(&amp;<span class="hljs-keyword">mut</span> s)?;
    <span class="hljs-keyword">if</span> !s.<span class="hljs-title function_ invoke__">starts_with</span>(<span class="hljs-string">"version"</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Err</span>(AppError::<span class="hljs-title function_ invoke__">InvalidConfig</span>(<span class="hljs-string">"ç¼ºå°‘ version å­—æ®µ"</span>.<span class="hljs-title function_ invoke__">into</span>()));
    }
    <span class="hljs-title function_ invoke__">Ok</span>(s)
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), AppError&gt; {
    <span class="hljs-keyword">match</span> <span class="hljs-title function_ invoke__">read_config</span>(<span class="hljs-string">"config.txt"</span>) {
        <span class="hljs-title function_ invoke__">Ok</span>(content) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"è¯»å–æˆåŠŸ:\n{content}"</span>),
        <span class="hljs-title function_ invoke__">Err</span>(err) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å‘ç”Ÿé”™è¯¯: {err}"</span>),
    }
    <span class="hljs-title function_ invoke__">Ok</span>(())
}
</code></pre>
</li>
<li>
<p>cargo run</p>
<p>è¾“å‡ºï¼šå‘ç”Ÿé”™è¯¯: IO é”™è¯¯: No such file or directory (os error 2)</p>
</li>
</ul>
<h2 data-id="heading-2">äºŒã€æ ¸å¿ƒAPIä»‹ç»</h2>
<h3 data-id="heading-3">1ã€#[derive(Error)]+#[error(...)]</h3>
<ul>
<li>ç»™ enum æˆ– struct æ´¾ç”Ÿ <code>std::error::Error</code></li>
<li>å®šä¹‰ Display è¾“å‡ºï¼Œæ¸²æŸ“å ä½ç¬¦</li>
</ul>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> thiserror::Error;

<span class="hljs-meta">#[derive(Error, Debug)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">MyError</span> {
    <span class="hljs-meta">#[error(<span class="hljs-string">"IO é”™è¯¯: {0}"</span>)]</span> <span class="hljs-comment">//å…ƒç»„ç»“æ„æˆ– enum çš„ç¬¬ 0 ä¸ªå­—æ®µdisplayæ‹¼æ¥åˆ°IOé”™è¯¯é‡Œ</span>
    <span class="hljs-title function_ invoke__">Io</span>(std::io::Error),

    <span class="hljs-meta">#[error(<span class="hljs-string">"è‡ªå®šä¹‰é”™è¯¯: {msg}"</span>)]</span> <span class="hljs-comment">//æ˜¾ç¤º msg çš„å†…å®¹</span>
    Custom { msg: <span class="hljs-type">String</span> },
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">demo_io_error</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), MyError&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = std::fs::<span class="hljs-title function_ invoke__">read_to_string</span>(<span class="hljs-string">"ä¸å­˜åœ¨çš„æ–‡ä»¶.txt"</span>)
        .<span class="hljs-title function_ invoke__">map_err</span>(MyError::Io)?;
    <span class="hljs-title function_ invoke__">Ok</span>(())
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">demo_custom_error</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), MyError&gt; {
    <span class="hljs-title function_ invoke__">Err</span>(MyError::Custom { msg: <span class="hljs-string">"éæ³•çŠ¶æ€"</span>.<span class="hljs-title function_ invoke__">into</span>() })
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, <span class="hljs-title function_ invoke__">demo_io_error</span>().<span class="hljs-title function_ invoke__">unwrap_err</span>());<span class="hljs-comment">//è°ƒç”¨display</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{:?}"</span>, <span class="hljs-title function_ invoke__">demo_io_error</span>().<span class="hljs-title function_ invoke__">unwrap_err</span>());<span class="hljs-comment">//è°ƒç”¨Debug</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{:?}"</span>, <span class="hljs-title function_ invoke__">demo_custom_error</span>());<span class="hljs-comment">//è°ƒç”¨Debug</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, <span class="hljs-title function_ invoke__">demo_custom_error</span>().<span class="hljs-title function_ invoke__">unwrap_err</span>());<span class="hljs-comment">//è°ƒç”¨display</span>
}
</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<pre><code class="hljs language-css" lang="css">IO é”™è¯¯: No such file or directory (os error <span class="hljs-number">2</span>)
<span class="hljs-built_in">Io</span>(Os { <span class="hljs-selector-tag">code</span>: <span class="hljs-number">2</span>, kind: NotFound, message: <span class="hljs-string">"No such file or directory"</span> })
Err(Custom { msg: <span class="hljs-string">"éæ³•çŠ¶æ€"</span> })
è‡ªå®šä¹‰é”™è¯¯: éæ³•çŠ¶æ€
</code></pre>
<p>è¯´æ˜ï¼š</p>
<ul>
<li>
<p>æ³¨æ„åŒºåˆ†debugå’Œdisplayï¼Œthiserroræ¸²æŸ“çš„æ˜¯displayå†…å®¹</p>
</li>
<li>
<p>å¼ºçƒˆå»ºè®®Debugå®ä¹ŸåŠ ä¸Šï¼Œæ–¹ä¾¿è°ƒè¯•ï¼Œä¸anyhowé…åˆæ‰“å°é”™è¯¯é“¾</p>
</li>
<li>
<p>{0} å¼•ç”¨ å…ƒç»„ç»“æ„æˆ– enum å˜ä½“çš„ç¬¬ 0 ä¸ªå­—æ®µï¼Œä¹Ÿå¯ä»¥å¤šä¸ªå’Œä½¿ç”¨å­—æ®µåï¼Œå¯ä»¥æ‹¼æ¥ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ç§</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[derive(Debug, Error)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">StructError</span> {
    <span class="hljs-meta">#[error(<span class="hljs-string">"ç”¨æˆ·é”™è¯¯: {id} - {msg}"</span>)]</span>
    User { id: <span class="hljs-type">i32</span>, msg: <span class="hljs-type">String</span> },
}
</code></pre>
<p>å®ƒè°ƒç”¨çš„æ˜¯å­—æ®µ <strong>Display trait</strong>æ–¹æ³•ï¼Œæ¯”å¦‚std::io::Errorçš„displayè¾“å‡º</p>
</li>
</ul>
<h3 data-id="heading-4">2ã€è‡ªåŠ¨è½¬æ¢From ï¼š#[from]</h3>
<ul>
<li>è¯¥æ“ä½œè‡ªåŠ¨æŠŠä¸‹å±‚é”™è¯¯ç±»å‹è½¬æˆthiserror ç±»å‹</li>
<li>æ”¯æŒ <code>?</code> é“¾å¼è°ƒç”¨</li>
</ul>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> thiserror::Error;

<span class="hljs-meta">#[derive(Error, Debug)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">AppError</span> {
    <span class="hljs-meta">#[error(<span class="hljs-string">"è§£æå¤±è´¥: {0}"</span>)]</span>
    <span class="hljs-title function_ invoke__">Parse</span>(<span class="hljs-meta">#[from]</span> std::num::ParseIntError),
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">demo_from</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">i32</span>, AppError&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">s</span> = <span class="hljs-string">"abc"</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">n</span>: <span class="hljs-type">i32</span> = s.<span class="hljs-title function_ invoke__">parse</span>()?; <span class="hljs-comment">// parse è¿”å› ParseIntErrorï¼Œè‡ªåŠ¨è½¬AppError</span>
    <span class="hljs-title function_ invoke__">Ok</span>(n)
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, <span class="hljs-title function_ invoke__">demo_from</span>().<span class="hljs-title function_ invoke__">unwrap_err</span>());
  <span class="hljs-comment">//è§£æå¤±è´¥: invalid digit found in string</span>
}
</code></pre>
<p>è¯´æ˜ï¼š</p>
<ul>
<li>
<p>#[from] è‡ªåŠ¨å®ç°äº†From for AppErrorï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">impl</span> <span class="hljs-title class_">From</span>&lt;ParseIntError&gt; <span class="hljs-keyword">for</span> <span class="hljs-title class_">AppError</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">from</span>(err: ParseIntError) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        AppError::<span class="hljs-title function_ invoke__">Parse</span>(err)
    }
}
</code></pre>
</li>
<li>
<p>parse è¿”å› ParseIntErroråèµ°åˆ°AppError::Parse(err)ï¼Œå®ç°é“¾å¼è°ƒç”¨ã€‚thiserror çš„ #[from] ä¼šè‡ªåŠ¨ç”Ÿæˆ <code>From</code> implï¼Œæ— éœ€æ‰‹åŠ¨å†™ã€‚</p>
</li>
</ul>
<h3 data-id="heading-5">3ã€è¿”å›åº•å±‚é”™è¯¯ï¼š#[source]</h3>
<h4 data-id="heading-6">3.1ã€åŸºæœ¬ä½¿ç”¨</h4>
<p>ä¸€ä¸ªå°èƒŒæ™¯ï¼š<code>std::error::Error</code> trait æœ‰ä¸€ä¸ªæ–¹æ³• <code>fn source(&amp;self) -&gt; Option&lt;&amp;(dyn Error + 'static)&gt;</code>å®ƒç”¨äºè¿”å› åº•å±‚å¼•èµ·å½“å‰é”™è¯¯çš„åŸå§‹é”™è¯¯,å¯ä»¥æ„å»º é”™è¯¯é“¾ï¼ˆerror chainï¼‰ï¼Œæ–¹ä¾¿è°ƒè¯•å’Œæ—¥å¿—æ‰“å°ã€‚</p>
<p>#[source] æ˜¾å¼æ ‡è®°ä¸€ä¸ªå­—æ®µæ˜¯â€œåº•å±‚é”™è¯¯â€ï¼Œç”Ÿæˆçš„ Error::source() ä¼šè¿”å›è¿™ä¸ªå­—æ®µã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[derive(Error, Debug)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">DbError</span> {
    <span class="hljs-meta">#[error(<span class="hljs-string">"æŸ¥è¯¢å¤±è´¥: {0}"</span>)]</span>
    <span class="hljs-title function_ invoke__">QueryFailed</span>(<span class="hljs-meta">#[source]</span> std::io::Error),
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">demo_source</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), DbError&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = std::fs::<span class="hljs-title function_ invoke__">read_to_string</span>(<span class="hljs-string">"ä¸å­˜åœ¨çš„æ–‡ä»¶.txt"</span>)
        .<span class="hljs-title function_ invoke__">map_err</span>(DbError::QueryFailed)?;
    <span class="hljs-title function_ invoke__">Ok</span>(())
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">err</span> = <span class="hljs-title function_ invoke__">demo_source</span>().<span class="hljs-title function_ invoke__">unwrap_err</span>();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, err);                 <span class="hljs-comment">// æŸ¥è¯¢å¤±è´¥: No such file or directory (os error 2)</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{:?}"</span>, err.<span class="hljs-title function_ invoke__">source</span>());      <span class="hljs-comment">// Some(Os { code: 2, kind: NotFound, message: "No such file or directory" })</span>
}
</code></pre>
<h4 data-id="heading-7">3.2ã€ç†è§£é”™è¯¯é“¾</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> thiserror::Error;
<span class="hljs-keyword">use</span> std::io;

<span class="hljs-meta">#[derive(Debug, Error)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">DbError</span> {
    <span class="hljs-meta">#[error(<span class="hljs-string">"æ•°æ®åº“æŸ¥è¯¢å¤±è´¥: {query}"</span>)]</span>
    Query {
        query: <span class="hljs-type">String</span>,
        <span class="hljs-meta">#[source]</span>
        source: io::Error,
    },
}

<span class="hljs-meta">#[derive(Debug, Error)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">AppError</span> {
    <span class="hljs-meta">#[error(<span class="hljs-string">"ä¸šåŠ¡å¤„ç†å¤±è´¥: {0}"</span>)]</span>
    <span class="hljs-title function_ invoke__">Db</span>(<span class="hljs-meta">#[from]</span> DbError),

    <span class="hljs-meta">#[error(<span class="hljs-string">"è§£æå¤±è´¥: {0}"</span>)]</span>
    <span class="hljs-title function_ invoke__">Parse</span>(<span class="hljs-meta">#[from]</span> std::num::ParseIntError),
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">db_layer</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), DbError&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">io_err</span> = io::Error::<span class="hljs-title function_ invoke__">new</span>(io::ErrorKind::NotFound, <span class="hljs-string">"æ–‡ä»¶ä¸å­˜åœ¨"</span>);
    <span class="hljs-title function_ invoke__">Err</span>(DbError::Query { query: <span class="hljs-string">"SELECT *"</span>.<span class="hljs-title function_ invoke__">into</span>(), source: io_err })
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">app_layer</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), AppError&gt; {
    <span class="hljs-comment">// åº•å±‚ db_layer é”™è¯¯é€šè¿‡ #[from] è‡ªåŠ¨è½¬æˆ AppError::Db</span>
    <span class="hljs-title function_ invoke__">db_layer</span>()?;
    <span class="hljs-title function_ invoke__">Ok</span>(())
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">err</span> = <span class="hljs-title function_ invoke__">app_layer</span>().<span class="hljs-title function_ invoke__">unwrap_err</span>();

    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Display: {}"</span>, err);

    <span class="hljs-comment">// éå†å¤šå±‚ source</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">source</span> = err.<span class="hljs-title function_ invoke__">source</span>();
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">level</span> = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">while</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>(s) = source {
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Source level {}: {} ({:?})"</span>, level, s, s);
        source = s.<span class="hljs-title function_ invoke__">source</span>();
        level += <span class="hljs-number">1</span>;
    }
}
</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-attribute">Display</span>: ä¸šåŠ¡å¤„ç†å¤±è´¥: æ•°æ®åº“æŸ¥è¯¢å¤±è´¥: SELECT *
Source level <span class="hljs-number">1</span>: æ•°æ®åº“æŸ¥è¯¢å¤±è´¥: SELECT * (Query { <span class="hljs-attribute">query</span>: <span class="hljs-string">"SELECT *"</span>, <span class="hljs-attribute">source</span>: Custom { <span class="hljs-attribute">kind</span>: NotFound, <span class="hljs-attribute">error</span>: <span class="hljs-string">"æ–‡ä»¶ä¸å­˜åœ¨"</span> } })
Source level <span class="hljs-number">2</span>: æ–‡ä»¶ä¸å­˜åœ¨ (Custom { <span class="hljs-attribute">kind</span>: NotFound, <span class="hljs-attribute">error</span>: <span class="hljs-string">"æ–‡ä»¶ä¸å­˜åœ¨"</span> })
</code></pre>
<p>è¯´æ˜ï¼š</p>
<p>#[source] æ ‡è®°åº•å±‚é”™è¯¯ ï¼Œé…åˆError::source()è®¿é—®å±‚çº§é”™è¯¯</p>
<ul>
<li>
<p>aã€æœ€é¡¶å±‚ï¼šAppError::Db</p>
<ul>
<li>
<p>Display ï¼š"ä¸šåŠ¡å¤„ç†å¤±è´¥: æ•°æ®åº“æŸ¥è¯¢å¤±è´¥: SELECT *"</p>
</li>
<li>
<p>source() ï¼š DbError::Query</p>
</li>
</ul>
</li>
<li>
<p>bã€ä¸­é—´å±‚ï¼šDbError::Query</p>
<ul>
<li>
<p>Display ï¼š "æ•°æ®åº“æŸ¥è¯¢å¤±è´¥: SELECT *"</p>
</li>
<li>
<p>source() ï¼š io::Error</p>
</li>
</ul>
</li>
<li>
<p>cã€åº•å±‚ï¼šio::Error</p>
<ul>
<li>
<p>Display â†’ "æ–‡ä»¶ä¸å­˜åœ¨"</p>
</li>
<li>
<p>source() â†’ None</p>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-8">3.2ã€ #fromå’Œ#sourceä¸€èµ·ç”¨</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::error::Error;

<span class="hljs-keyword">use</span> std::io;
<span class="hljs-keyword">use</span> thiserror::Error;


<span class="hljs-meta">#[derive(Debug, Error)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">DbError</span> {
    <span class="hljs-meta">#[error(<span class="hljs-string">"æ•°æ®åº“æŸ¥è¯¢å¤±è´¥: {0}"</span>)]</span>
    <span class="hljs-title function_ invoke__">Query</span>(<span class="hljs-meta">#[from]</span><span class="hljs-meta">#[source]</span> io::Error),
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">db_layer</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), DbError&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">io_err</span> = io::Error::<span class="hljs-title function_ invoke__">new</span>(io::ErrorKind::NotFound, <span class="hljs-string">"æ–‡ä»¶ä¸å­˜åœ¨"</span>);
    <span class="hljs-title function_ invoke__">Err</span>(io_err.<span class="hljs-title function_ invoke__">into</span>())  <span class="hljs-comment">// #[from] æ”¯æŒè‡ªåŠ¨ From</span>
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">err</span> = <span class="hljs-title function_ invoke__">db_layer</span>().<span class="hljs-title function_ invoke__">unwrap_err</span>();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Display: {}"</span>, err);        <span class="hljs-comment">// Display: æ•°æ®åº“æŸ¥è¯¢å¤±è´¥: æ–‡ä»¶ä¸å­˜åœ¨</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Source: {:?}"</span>, err.<span class="hljs-title function_ invoke__">source</span>()); <span class="hljs-comment">// Source: Some(Custom { kind: NotFound, error: "æ–‡ä»¶ä¸å­˜åœ¨" })</span>
}
</code></pre>
<ul>
<li>å­—æ®µç±»å‹å¿…é¡»å®ç° std::error::Errorï¼Œæ‰èƒ½ä½œä¸º source</li>
<li>åº“å±‚æšä¸¾ï¼ˆio::Errorã€sqlx::Error ç­‰ï¼‰å­—æ®µå¸¸ç”¨ <code>#[from]#[source]</code>ï¼Œæ–¹ä¾¿è¿½è¸ªï¼›åº”ç”¨å±‚ enum å¯ä»¥åªç”¨ <code>#[from]</code> æˆ–åªç”¨ <code>#[source]</code></li>
</ul>
<h3 data-id="heading-9">4ã€#[error(transparent)]</h3>
<ul>
<li>
<p>å°è£…åº•å±‚errorï¼Œé€æ˜ä¼ é€’åº•å±‚é”™è¯¯ï¼Œä¸æƒ³é¢å¤–åŠ å‰ç¼€æˆ–è€…ä¿¡æ¯.</p>
</li>
<li>
<p>å¸¸ç”¨äºåº“å±‚é”™è¯¯å°è£… + <code>#[from]</code> è‡ªåŠ¨è½¬æ¢</p>
</li>
</ul>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> thiserror::Error;
<span class="hljs-keyword">use</span> std::io;

<span class="hljs-meta">#[derive(Debug, Error)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">MyError</span> {
    <span class="hljs-meta">#[error(transparent)]</span>
    <span class="hljs-title function_ invoke__">Io</span>(<span class="hljs-meta">#[from]</span> io::Error),
}

<span class="hljs-comment">/// è‡ªå®šä¹‰é”™è¯¯ç±»å‹</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">read_file</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>, MyError&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">content</span> = std::fs::<span class="hljs-title function_ invoke__">read_to_string</span>(<span class="hljs-string">"ä¸å­˜åœ¨.txt"</span>)?; <span class="hljs-comment">// io::Error -&gt; MyError::Io</span>
    <span class="hljs-title function_ invoke__">Ok</span>(content)
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">err</span> = <span class="hljs-title function_ invoke__">read_file</span>().<span class="hljs-title function_ invoke__">unwrap_err</span>();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Display: {}"</span>, err);         <span class="hljs-comment">// ç›´æ¥æ˜¾ç¤ºåº•å±‚ io::Error çš„ä¿¡æ¯ï¼šDisplay: No such file or directory (os error 2)</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Source: {:?}"</span>, err); <span class="hljs-comment">// è¿”å› io::Errorï¼šSource: Io(Os { code: 2, kind: NotFound, message: "No such file or directory" })</span>
}
</code></pre>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>
<p>åªæ”¯æŒå•ä¸ªå­—æ®µ</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[error(transparent)]</span>
<span class="hljs-title function_ invoke__">Io</span>(<span class="hljs-meta">#[from]</span> io::Error); <span class="hljs-comment">// èƒ½ç¼–è¯‘é€šè¿‡</span>
Io { source: io::Error, code: <span class="hljs-type">i32</span> } <span class="hljs-comment">// ç¼–è¯‘å¤±è´¥ï¼Œä¸æ”¯æŒå¤šä¸ªå­—æ®µ</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-10">5ã€backtrace</h3>
<p>æ•è·æ„é€ é”™è¯¯æ—¶çš„é”™è¯¯å †æ ˆã€‚thiserror è‡ªåŠ¨è°ƒç”¨ <code>Backtrace::capture()</code>å­˜è¿›å»ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[derive(thiserror::Error, Debug)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">MyError</span> {
    <span class="hljs-meta">#[error(<span class="hljs-string">"IO å¤±è´¥"</span>)]</span>
    Io {
        <span class="hljs-meta">#[from]</span>
        source: std::io::Error,

        <span class="hljs-meta">#[backtrace]</span>
        backtrace: std::backtrace::Backtrace,
    }
}
</code></pre>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>Rust åœ¨é»˜è®¤æƒ…å†µä¸‹ç¦ç”¨ backtraceï¼ˆä¸ºäº†æ€§èƒ½ï¼‰</li>
<li>è¦æ±‚ä½¿ç”¨ nightly ç¼–è¯‘å™¨ï¼Œä¸” Rust ç‰ˆæœ¬ä¸º 1.73 æˆ–æ›´é«˜</li>
</ul>
<h3 data-id="heading-11"/>
<h2 data-id="heading-12">ä¸‰ã€ä¸€äº›é«˜çº§æŠ€å·§</h2>
<h3 data-id="heading-13">1ã€ç”¨ <code>#[error(transparent)]</code> å®ç° â€œerror wrapperâ€</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[derive(Error, Debug)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">AppError</span> {
    <span class="hljs-meta">#[error(transparent)]</span>
    <span class="hljs-title function_ invoke__">Db</span>(<span class="hljs-meta">#[from]</span> sqlx::Error),

    <span class="hljs-meta">#[error(transparent)]</span>
    <span class="hljs-title function_ invoke__">Anyhow</span>(<span class="hljs-meta">#[from]</span> anyhow::Error),

    <span class="hljs-meta">#[error(<span class="hljs-string">"ä¸šåŠ¡é”™è¯¯: {0}"</span>)]</span>
    <span class="hljs-title function_ invoke__">Biz</span>(<span class="hljs-type">String</span>),
}
</code></pre>
<ul>
<li>
<p>ç»Ÿä¸€é”™è¯¯å‡ºå£</p>
</li>
<li>
<p>SQLx/Reqwest/IO/Anyhow çš„é”™è¯¯è‡ªåŠ¨è½¬å‹</p>
</li>
<li>
<p>æœ€å AppError åš API/Trace è½¬æ¢</p>
</li>
</ul>
<h3 data-id="heading-14">2ã€ç»“åˆ <code>#[source]</code> ä¸ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰å­—æ®µ</h3>
<p>ç»“æ„åŒ–å¤„ç†é”™è¯¯ï¼Œè§£å†³åªæœ‰åº•å±‚æŠ¥é”™ä½†ç¼ºä¹ä¸šåŠ¡ä¸Šä¸‹æ–‡ï¼ˆå¦‚æ–‡ä»¶åã€è¡Œå·ã€è¯·æ±‚IDï¼‰çš„é—®é¢˜ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> thiserror::Error;
<span class="hljs-keyword">use</span> std::path::PathBuf;
<span class="hljs-keyword">use</span> std::fs::File;
<span class="hljs-keyword">use</span> std::io;

<span class="hljs-meta">#[derive(Error, Debug)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">ConfigError</span> {
    <span class="hljs-comment">// æ³¨æ„ï¼šè¿™é‡Œä¸èƒ½ç”¨#[from]ï¼Œå› ä¸ºéœ€è¦é¢å¤–çš„ path å­—æ®µ</span>
    <span class="hljs-comment">// #[source]å‘Šè¯‰thiserrorè¿™ä¸ªå­—æ®µæ˜¯åº•å±‚é”™è¯¯æº</span>
    <span class="hljs-meta">#[error(<span class="hljs-string">"è¯»å–é…ç½®æ–‡ä»¶ '{path}' å¤±è´¥"</span>)]</span>
    ReadFailed {
        path: PathBuf,
        <span class="hljs-meta">#[source]</span>
        source: io::Error,
    },
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">load_config</span>(path: PathBuf) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), ConfigError&gt; {
    <span class="hljs-comment">// æ‰‹åŠ¨map_erræ³¨å…¥pathä¸Šä¸‹æ–‡</span>
    File::<span class="hljs-title function_ invoke__">open</span>(&amp;path).<span class="hljs-title function_ invoke__">map_err</span>(|e| ConfigError::ReadFailed {
        path: path.<span class="hljs-title function_ invoke__">clone</span>(),
        source: e,
    })?;
    <span class="hljs-title function_ invoke__">Ok</span>(())
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">path</span> = PathBuf::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"missing_config.toml"</span>);
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Err</span>(e) = <span class="hljs-title function_ invoke__">load_config</span>(path) {
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, e); <span class="hljs-comment">// è¾“å‡º: è¯»å–é…ç½®æ–‡ä»¶ 'missing_config.toml' å¤±è´¥</span>
        
        <span class="hljs-comment">// éªŒè¯ source é“¾</span>
        <span class="hljs-keyword">use</span> std::error::Error;
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>(src) = e.<span class="hljs-title function_ invoke__">source</span>() {
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Caused by: {}"</span>, src); <span class="hljs-comment">// è¾“å‡º: Caused by: No such file or directory</span>
        }
    }
}
</code></pre>
<h3 data-id="heading-15">3ã€å¤„ç†æ³›å‹é”™è¯¯ï¼ˆGeneric Errorsï¼‰</h3>
<p>é”™è¯¯ç±»å‹éœ€è¦åŒ…å«ç”¨æˆ·è‡ªå®šä¹‰çš„æ•°æ®ç±»å‹ï¼Œæˆ–è€…é”™è¯¯çš„å…·ä½“ç±»å‹ç”±æ³›å‹å†³å®šã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> thiserror::Error;
<span class="hljs-keyword">use</span> std::fmt::<span class="hljs-built_in">Debug</span>;

<span class="hljs-comment">// T å¿…é¡»æ»¡è¶³ Debug å’Œ Displayï¼Œä»¥ä¾¿èƒ½è¢« #[error] å®ä½¿ç”¨</span>
<span class="hljs-meta">#[derive(Error, Debug)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">ParseError</span>&lt;T: <span class="hljs-built_in">Debug</span> + std::fmt::Display&gt; {
    <span class="hljs-meta">#[error(<span class="hljs-string">"åœ¨ä½ç½® {location} å‘ç°éæ³• Token: {token}"</span>)]</span>
    InvalidToken {
        token: T,
        location: <span class="hljs-type">usize</span>,
    },
    
    <span class="hljs-meta">#[error(<span class="hljs-string">"æœªçŸ¥çš„å¤„ç†é”™è¯¯"</span>)]</span>
    Unknown,
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">err</span> = ParseError::InvalidToken {
        token: <span class="hljs-string">"EOF"</span>, <span class="hljs-comment">// è¿™é‡Œ T æ˜¯ &amp;str</span>
        location: <span class="hljs-number">42</span>,
    };
    
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, err);
}
</code></pre>
<h3 data-id="heading-16">4ã€æšä¸¾åˆ†å±‚æ‹†åˆ†ï¼ˆæ¨¡å—åŒ–é”™è¯¯ï¼‰</h3>
<p>å¯ä»¥è¿™æ ·å®šä¹‰</p>
<pre><code class="hljs language-rust" lang="rust">errors/
    â”œâ”€ <span class="hljs-keyword">mod</span>.rs
    â”œâ”€ io_error.rs
    â”œâ”€ service_error.rs
    â””â”€ db_error.rs
</code></pre>
<p>ç„¶åç»Ÿä¸€ wrapï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta">#[derive(Error, Debug)]</span>
pub <span class="hljs-built_in">enum</span> AppError {
    <span class="hljs-meta">#[<span class="hljs-keyword">error</span>(transparent)]</span>
    Io(<span class="hljs-meta">#[from] IoError),</span>

    <span class="hljs-meta">#[<span class="hljs-keyword">error</span>(transparent)]</span>
    Db(<span class="hljs-meta">#[from] DbError),</span>
}
</code></pre>
<h3 data-id="heading-17">5ã€ä¸anyhowæ€ä¹ˆåˆ†ç•Œ</h3>
<p>ç®€å•è¯´thiserrorè´Ÿè´£â€œäº§å‡ºâ€é”™è¯¯ï¼Œanyhow è´Ÿè´£â€œæ¶ˆè´¹â€é”™è¯¯ã€‚</p>
<ul>
<li>
<p>åº“ä»£ç ç”¨thiserrorï¼Œæ¯”å¦‚dbï¼Œcache</p>
</li>
<li>
<p>ä¸šåŠ¡å±‚ä¼˜å…ˆ thiserrorï¼Œå¤æ‚é“¾è·¯å¯ç»“åˆï¼Œé”™è¯¯ç©¿é€åˆ° mainç”¨anyhow</p>
<ul>
<li>
<p>æ•°æ®åº“ã€HTTPã€åºåˆ—åŒ–ï¼š<strong>thiserror</strong></p>
</li>
<li>
<p>å…¥å£å±‚ï¼ˆController / handlerï¼‰ï¼š<strong>anyhow + Context</strong></p>
</li>
</ul>
</li>
<li>
<p>åœ¨ Web æœåŠ¡ä¸­ï¼Œé€šå¸¸ Controller/Handler å±‚æ˜¯åˆ†ç•Œçº¿ã€‚</p>
<ul>
<li>Service å±‚è¿”å› <code>Result&lt;T, AppError&gt;</code> (ç”¨ <code>thiserror</code>)ã€‚</li>
<li>Handler æ•è· <code>AppError</code>ï¼Œå°†å…¶è½¬æ¢ä¸º HTTP Responseã€‚</li>
<li>å¦‚æœ Service å±‚é‡åˆ°æ„æ–™ä¹‹å¤–çš„ bugï¼ˆæ¯”å¦‚ panic æˆ–ä¸å¯æ¢å¤çš„ IO é”™ï¼‰ï¼Œæ‰ä¼šè¢« <code>anyhow</code> æ•è·å¹¶è®°å½•ä¸º 500 é”™è¯¯ã€‚</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> thiserror::Error;
<span class="hljs-keyword">use</span> anyhow::{Context, <span class="hljs-type">Result</span>};

<span class="hljs-comment">// ==========================================</span>
<span class="hljs-comment">// 1. è¾¹ç•Œä¸‹å±‚ï¼šåŸºç¡€è®¾æ–½ / åº“ (thiserror é¢†åŸŸ)</span>
<span class="hljs-comment">// ==========================================</span>

<span class="hljs-meta">#[derive(Error, Debug)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">DbError</span> {
    <span class="hljs-meta">#[error(<span class="hljs-string">"è¿æ¥æ•°æ®åº“å¤±è´¥"</span>)]</span>
    ConnectionFailed,
    <span class="hljs-meta">#[error(<span class="hljs-string">"æŸ¥è¯¢è¯­æ³•é”™è¯¯"</span>)]</span>
    QueryError,
}

<span class="hljs-comment">// å‡½æ•°ç­¾åï¼šåªå¯èƒ½çŠ¯è¿™ä¸¤ç§é”™</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">query_user_from_db</span>(id: <span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> std::result::<span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>, DbError&gt; {
    <span class="hljs-keyword">if</span> id == <span class="hljs-number">0</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Err</span>(DbError::ConnectionFailed);
    }
    <span class="hljs-title function_ invoke__">Ok</span>(<span class="hljs-string">"Alice"</span>.<span class="hljs-title function_ invoke__">to_string</span>())
}

<span class="hljs-comment">// ==========================================</span>
<span class="hljs-comment">// 2. è¾¹ç•Œä¸Šå±‚ï¼šä¸šåŠ¡é€»è¾‘ / åº”ç”¨ (anyhow é¢†åŸŸ)</span>
<span class="hljs-comment">// ==========================================</span>

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">handle_request</span>(user_id: <span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>&gt; {
    <span class="hljs-comment">// ğŸ”¥ åˆ†ç•Œç‚¹åœ¨è¿™é‡Œï¼ ğŸ”¥</span>
    <span class="hljs-comment">// æˆ‘ä»¬è°ƒç”¨äº†è¿”å›å…·ä½“é”™è¯¯çš„åº•å±‚å‡½æ•°ï¼Œ</span>
    <span class="hljs-comment">// ä½†æˆ‘ä»¬ç«‹åˆ»ç”¨ context() æŠŠå®ƒè½¬æ¢æˆäº† anyhow::Errorã€‚</span>
    <span class="hljs-comment">// ä»è¿™ä¸€è¡Œå¼€å§‹ï¼Œå…·ä½“çš„ DbError ç±»å‹ä¿¡æ¯è¢«â€œæ“¦é™¤â€äº†ï¼Œ</span>
    <span class="hljs-comment">// å˜æˆäº†ä¸€ä¸ªé€šç”¨çš„é”™è¯¯å¯¹è±¡ã€‚</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">user</span> = <span class="hljs-title function_ invoke__">query_user_from_db</span>(user_id)
        .<span class="hljs-title function_ invoke__">context</span>(<span class="hljs-built_in">format!</span>(<span class="hljs-string">"å¤„ç†ç”¨æˆ·è¯·æ±‚ ID:{} å¤±è´¥"</span>, user_id))?;

    <span class="hljs-title function_ invoke__">Ok</span>(user)
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Err</span>(e) = <span class="hljs-title function_ invoke__">handle_request</span>(<span class="hljs-number">0</span>) {
        eprintln!(<span class="hljs-string">"Error: {:?}"</span>, e);
    }
}
</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<pre><code class="hljs language-c" lang="c">Error: å¤„ç†ç”¨æˆ·è¯·æ±‚ ID:<span class="hljs-number">0</span> å¤±è´¥

Caused by:
    è¿æ¥æ•°æ®åº“å¤±è´¥

Stack backtrace:
   <span class="hljs-number">0</span>: <span class="hljs-built_in">std</span>::backtrace_rs::backtrace::libunwind::trace
             at /rustc/ed61e7d7e242494fb7057f2657300d9e77bb4fcb/library/<span class="hljs-built_in">std</span>/src/../../backtrace/src/backtrace/libunwind.rs:<span class="hljs-number">117</span>:<span class="hljs-number">9</span>
</code></pre>
<p>æ—¢æœ‰é€‚åˆè¿”å›çš„Errorï¼Œä¹Ÿæœ‰é€‚åˆæŸ¥è¯¢é”™çš„casued by</p>
<h2 data-id="heading-18">å››ã€æ€»ç»“</h2>
<p>æœ¬æ–‡ä»‹ç»äº†thiserrorçš„åŸºæœ¬ä½¿ç”¨å’Œé«˜çº§æŠ€å·§ã€‚ä»axumå’Œthiserrorå®˜æ–¹çœ‹ï¼Œæ¨èanyhow+thiserrorç»„åˆã€‚ä½†æ˜¯è¿™ä¿©ä¹Ÿæœ‰ç¼ºç‚¹ï¼Œæ¯”å¦‚é”™è¯¯å±‚çº§å¤šåŒ¹é…å›°éš¾ï¼Œè¿˜éœ€ç»“åˆerror-stackç­‰åº“ä¸€èµ·ç”¨ã€‚</p>
<p>å¦‚æœè§‰å¾—æœ¬æ–‡æœ‰ç”¨ï¼Œè¯·ç‚¹ä¸ªå…³æ³¨å§ï¼Œæœ¬äººå…¬ä¼—å·<strong>å¤§é±¼ä¸ƒæˆé¥±</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”µå­å‘ç¥¨è§£æå·¥å…·-c#æ¡Œé¢åº”ç”¨å¼€å‘-DataGridViewè¡¨æ ¼æ§ä»¶ä½¿ç”¨è¯¦è§£]]></title>    <link>https://juejin.cn/post/7576483553878753306</link>    <guid>https://juejin.cn/post/7576483553878753306</guid>    <pubDate>2025-11-25T09:00:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576483553878753306" data-draft-id="7576470438580535322" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”µå­å‘ç¥¨è§£æå·¥å…·-c#æ¡Œé¢åº”ç”¨å¼€å‘-DataGridViewè¡¨æ ¼æ§ä»¶ä½¿ç”¨è¯¦è§£"/> <meta itemprop="keywords" content="C#"/> <meta itemprop="datePublished" content="2025-11-25T09:00:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å…‰å¤´é—ªäº®äº®"/> <meta itemprop="url" content="https://juejin.cn/user/1333047014199326"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”µå­å‘ç¥¨è§£æå·¥å…·-c#æ¡Œé¢åº”ç”¨å¼€å‘-DataGridViewè¡¨æ ¼æ§ä»¶ä½¿ç”¨è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1333047014199326/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å…‰å¤´é—ªäº®äº®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T09:00:42.000Z" title="Tue Nov 25 2025 09:00:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç”µå­å‘ç¥¨è§£æå·¥å…·-c#æ¡Œé¢åº”ç”¨å¼€å‘-DataGridViewè¡¨æ ¼æ§ä»¶ä½¿ç”¨è¯¦è§£</h2>
<h3 data-id="heading-1">1. æ¦‚è¿°</h3>
<p>DataGridView æ˜¯ C# WinForms ä¸­åŠŸèƒ½å¼ºå¤§çš„è¡¨æ ¼æ§ä»¶ï¼Œç”¨äºåœ¨ Windows åº”ç”¨ç¨‹åºä¸­æ˜¾ç¤ºå’Œç¼–è¾‘æ•°æ®ã€‚æœ¬æ–‡æ¡£åŸºäºç”µå­å‘ç¥¨è§£æå·¥å…·é¡¹ç›®ä¸­çš„å®é™…åº”ç”¨ï¼Œè¯¦ç»†ä»‹ç» DataGridView çš„é…ç½®ã€æ ·å¼è®¾ç½®ã€æ•°æ®ç»‘å®šã€äº‹ä»¶å¤„ç†ã€è‡ªå®šä¹‰ç»˜åˆ¶ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ca976d37ce84c6b81aba66cce3d0180~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWJ5aS06Zeq5Lqu5Lqu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764666042&amp;x-signature=PimQiRHX6asvOmDl57TsV2Uw6pM%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">2. DataGridView æ§ä»¶çš„åˆå§‹åŒ–ä¸åŸºæœ¬é…ç½®</h3>
<h4 data-id="heading-3">2.1 æ§ä»¶çš„åˆ›å»ºä¸åŸºæœ¬å±æ€§è®¾ç½®</h4>
<p>åœ¨è®¾è®¡å™¨ä¸­åˆ›å»º DataGridView æ§ä»¶åï¼Œéœ€è¦è¿›è¡ŒåŸºæœ¬çš„å±æ€§é…ç½®ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è®¾ç½®åˆ—æ ‡é¢˜é«˜åº¦</span>
<span class="hljs-keyword">this</span>.dataGridView_Data.ColumnHeadersHeight = <span class="hljs-number">29</span>;
<span class="hljs-comment">// è®¾ç½®æ§ä»¶åœé æ–¹å¼</span>
<span class="hljs-keyword">this</span>.dataGridView_Data.Dock = System.Windows.Forms.DockStyle.Fill;
<span class="hljs-comment">// è®¾ç½®è¡Œæ ‡é¢˜å®½åº¦</span>
<span class="hljs-keyword">this</span>.dataGridView_Data.RowHeadersWidth = <span class="hljs-number">82</span>;
<span class="hljs-comment">// è®¾ç½®è¡Œé«˜</span>
<span class="hljs-keyword">this</span>.dataGridView_Data.RowTemplate.Height = <span class="hljs-number">23</span>;
<span class="hljs-comment">// è®¾ç½®æ§ä»¶å¤§å°</span>
<span class="hljs-keyword">this</span>.dataGridView_Data.Size = <span class="hljs-keyword">new</span> System.Drawing.Size(<span class="hljs-number">1644</span>, <span class="hljs-number">510</span>);
</code></pre>
<h4 data-id="heading-4">2.2 ç¦ç”¨å’Œå¯ç”¨ç”¨æˆ·äº¤äº’åŠŸèƒ½</h4>
<p>æ ¹æ®å®é™…éœ€æ±‚ï¼Œå¯ä»¥æ§åˆ¶ç”¨æˆ·å¯¹è¡¨æ ¼çš„äº¤äº’æƒé™ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ç¦ç”¨ç”¨æˆ·æ·»åŠ æ–°è¡Œ</span>
<span class="hljs-keyword">this</span>.dataGridView_Data.AllowUserToAddRows = <span class="hljs-literal">false</span>;
<span class="hljs-comment">// å…è®¸ç”¨æˆ·è°ƒæ•´åˆ—å®½</span>
<span class="hljs-keyword">this</span>.dataGridView_Data.AllowUserToResizeColumns = <span class="hljs-literal">true</span>;
<span class="hljs-comment">// å…è®¸ç”¨æˆ·è°ƒæ•´è¡Œé«˜</span>
<span class="hljs-keyword">this</span>.dataGridView_Data.AllowUserToResizeRows = <span class="hljs-literal">true</span>;
</code></pre>
<h3 data-id="heading-5">3. æ•°æ®æºç»‘å®šä¸æ•°æ®ç®¡ç†</h3>
<h4 data-id="heading-6">3.1 æ•°æ®æºç»‘å®š</h4>
<p>é¡¹ç›®ä¸­ä½¿ç”¨ BindingList ä½œä¸ºæ•°æ®æºï¼Œå®ç°æ•°æ®çš„åŒå‘ç»‘å®šå’ŒåŠ¨æ€æ›´æ–°ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// å®šä¹‰å¹¶åˆå§‹åŒ– BindingList æ•°æ®æº</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> BindingList&lt;ExportData&gt; eds;

<span class="hljs-comment">// ç»‘å®šæ•°æ®æºåˆ° DataGridView</span>
dataGridView_Data.DataSource = eds;
</code></pre>
<h5 data-id="heading-7">ExportDataæ•°æ®ç»“æ„</h5>
<p>ExportDataæ˜¯ç”¨äºå­˜å‚¨å‘ç¥¨æ•°æ®çš„æ ¸å¿ƒæ¨¡å‹ç±»ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ExportData</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> æ£€æµ‹æ ‡è¯† { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> å‘ç¥¨åç§° { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> å‘ç¥¨ä»£ç  { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> å‘ç¥¨å·ç  { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> å¼€ç¥¨æ—¥æœŸ { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> æœºå™¨ç¼–å· { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> æ ¡éªŒç  { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> è´­ä¹°æ–¹åç§° { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> è´­ä¹°æ–¹ç¨å· { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> è´­ä¹°æ–¹åœ°å€ç”µè¯ { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> è´­ä¹°æ–¹å¼€æˆ·è¡ŒåŠè´¦å· { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> é”€å”®æ–¹åç§° { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> é”€å”®æ–¹ç¨å· { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> é”€å”®æ–¹åœ°å€ç”µè¯ { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> é”€å”®æ–¹å¼€æˆ·è¡ŒåŠè´¦å· { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> å‘ç¥¨æ˜ç»†ID { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> ç¨æ”¶ç±»åˆ« { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> é¡¹ç›®åç§° { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> æœªç¨é‡‘é¢ { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> ç¨ç‡ { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> ç¨é¢ { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> ä»·ç¨åˆè®¡ { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> é‡‘é¢å¤§å†™ { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> å¤‡æ³¨ { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> æ”¶æ¬¾äºº { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> å¤æ ¸äºº { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> å¼€ç¥¨äºº { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> æ–‡ä»¶åç§° { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> å›¾ç‰‡åç§° { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> æ–‡ä»¶è·¯å¾„ { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
}

<span class="hljs-meta">### 3.2 æ•°æ®åˆ·æ–°ä¸é‡ç»˜</span>

å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œéœ€è¦åˆ·æ–°è¡¨æ ¼æ˜¾ç¤ºï¼š

```csharp
<span class="hljs-comment">// åˆ·æ–° DataGridView</span>
dataGridView_Data.Refresh();
</code></pre>
<h4 data-id="heading-8">3.3 æ¸…ç©ºè¡¨æ ¼æ•°æ®</h4>
<p>å®ç°æ¸…ç©ºè¡¨æ ¼æ•°æ®ä½†ä¿ç•™åˆ—ç»“æ„çš„åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// æ¸…ç©ºDataGridViewï¼Œåªä¿ç•™åˆ—å</span>
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ClearDataGridView</span>()</span>
{
    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªç©ºçš„ DataTableï¼Œä¿ç•™åŸåˆ—ç»“æ„</span>
    DataTable emptyTable = <span class="hljs-keyword">new</span> DataTable();
    <span class="hljs-keyword">foreach</span> (DataGridViewColumn column <span class="hljs-keyword">in</span> dataGridView_Data.Columns)
    {
        DataColumn newColumn = <span class="hljs-keyword">new</span> DataColumn(column.Name, column.ValueType);
        newColumn.Caption = column.HeaderText;
        emptyTable.Columns.Add(newColumn);
    }
    
    <span class="hljs-comment">// å°† DataGridView çš„æ•°æ®æºè®¾ç½®ä¸ºæ–°çš„ç©º DataTable</span>
    dataGridView_Data.DataSource = emptyTable;
}
</code></pre>
<h3 data-id="heading-9">4. è¡¨æ ¼æ ·å¼ä¸å¤–è§‚å®šåˆ¶</h3>
<h4 data-id="heading-10">4.1 å•å…ƒæ ¼å­—ä½“å’Œé¢œè‰²è®¾ç½®</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è®¾ç½®å•å…ƒæ ¼é»˜è®¤å­—ä½“å’Œé¢œè‰²</span>
dataGridView_Data.DefaultCellStyle.Font = <span class="hljs-keyword">new</span> System.Drawing.Font(<span class="hljs-string">"å¾®è½¯é›…é»‘"</span>, <span class="hljs-number">10</span>, FontStyle.Regular);
dataGridView_Data.DefaultCellStyle.ForeColor = System.Drawing.Color.Black;
</code></pre>
<h4 data-id="heading-11">4.2 è¡¨å¤´æ ·å¼è®¾ç½®</h4>
<p>é¡¹ç›®ä¸­å®ç°äº†è‡ªå®šä¹‰çš„è¡¨å¤´æ ·å¼è®¾ç½®æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è®¾ç½®è¡¨å¤´æ ·å¼</span>
SetColumnHeaderStyle(System.Drawing.Color.SaddleBrown, System.Drawing.Color.White, <span class="hljs-number">12</span>);

<span class="hljs-comment">// è¡¨å¤´æ ·å¼è®¾ç½®æ–¹æ³•</span>
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SetColumnHeaderStyle</span>(<span class="hljs-params">Color backColor, Color foreColor, <span class="hljs-built_in">float</span> fontSize</span>)</span>
{
    dataGridView_Data.ColumnHeadersDefaultCellStyle.BackColor = backColor; <span class="hljs-comment">// è®¾ç½®èƒŒæ™¯è‰²</span>
    dataGridView_Data.ColumnHeadersDefaultCellStyle.ForeColor = foreColor; <span class="hljs-comment">// è®¾ç½®å­—ä½“é¢œè‰²</span>
    dataGridView_Data.ColumnHeadersDefaultCellStyle.Font = <span class="hljs-keyword">new</span> System.Drawing.Font(
        dataGridView_Data.ColumnHeadersDefaultCellStyle.Font.FontFamily, fontSize, FontStyle.Regular); <span class="hljs-comment">// è®¾ç½®å­—ä½“å¤§å°</span>
}
</code></pre>
<h4 data-id="heading-12">4.3 åˆ—å®½è®¾ç½®ä¸è‡ªåŠ¨è°ƒæ•´</h4>
<p>å®ç°äº†åˆ—å®½çš„è‡ªåŠ¨è°ƒæ•´å’Œæ‰‹åŠ¨è®¾ç½®ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è‡ªåŠ¨è°ƒæ•´åˆ—å®½</span>
dataGridView_Data.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.AllCells;

<span class="hljs-comment">// 1. å…ˆä¿ç•™å½“å‰åˆ—å®½</span>
<span class="hljs-keyword">var</span> columnWidths = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-built_in">int</span>, <span class="hljs-built_in">int</span>&gt;();
<span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; dataGridView_Data.Columns.Count; i++)
{
    columnWidths[i] = dataGridView_Data.Columns[i].Width;
}

<span class="hljs-comment">// 2. å…³é—­è‡ªåŠ¨è°ƒæ•´åˆ—å®½</span>
dataGridView_Data.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.None;

<span class="hljs-comment">// 3. è®¾ç½®æ¯ä¸€åˆ—åˆ°åˆšåˆšä¿ç•™çš„å®½åº¦</span>
<span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; dataGridView_Data.Columns.Count; i++)
{
    dataGridView_Data.Columns[i].Width = columnWidths[i];
}

<span class="hljs-comment">// 4. é’ˆå¯¹ç‰¹å®šåˆ—è®¾ç½®å›ºå®šå®½åº¦</span>
dataGridView_Data.Columns[getColumnIndexByName(<span class="hljs-string">"è´­ä¹°æ–¹åœ°å€ç”µè¯"</span>)].Width = <span class="hljs-number">200</span>;
dataGridView_Data.Columns[getColumnIndexByName(<span class="hljs-string">"è´­ä¹°æ–¹å¼€æˆ·è¡ŒåŠè´¦å·"</span>)].Width = <span class="hljs-number">200</span>;
dataGridView_Data.Columns[getColumnIndexByName(<span class="hljs-string">"é”€å”®æ–¹åœ°å€ç”µè¯"</span>)].Width = <span class="hljs-number">200</span>;
dataGridView_Data.Columns[getColumnIndexByName(<span class="hljs-string">"é”€å”®æ–¹å¼€æˆ·è¡ŒåŠè´¦å·"</span>)].Width = <span class="hljs-number">200</span>;
</code></pre>
<h4 data-id="heading-13">4.4 åˆ—é”å®šåŠŸèƒ½</h4>
<p>å®ç°äº†é‡è¦åˆ—çš„é”å®šåŠŸèƒ½ï¼Œé˜²æ­¢ç”¨æˆ·æ°´å¹³æ»šåŠ¨æ—¶çœ‹ä¸åˆ°å…³é”®ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// é”å®šåˆ—ï¼ˆæ°´å¹³æ»šåŠ¨æ—¶å›ºå®šæ˜¾ç¤ºï¼‰</span>
dataGridView_Data.Columns[<span class="hljs-number">0</span>].Frozen = <span class="hljs-literal">true</span>; <span class="hljs-comment">// é”å®šç¬¬ä¸€åˆ—</span>
dataGridView_Data.Columns[<span class="hljs-number">1</span>].Frozen = <span class="hljs-literal">true</span>; <span class="hljs-comment">// é”å®šç¬¬äºŒåˆ—</span>
dataGridView_Data.Columns[<span class="hljs-number">2</span>].Frozen = <span class="hljs-literal">true</span>; <span class="hljs-comment">// é”å®šç¬¬ä¸‰åˆ—</span>
dataGridView_Data.Columns[<span class="hljs-number">3</span>].Frozen = <span class="hljs-literal">true</span>; <span class="hljs-comment">// é”å®šç¬¬å››åˆ—</span>
dataGridView_Data.Columns[<span class="hljs-number">4</span>].Frozen = <span class="hljs-literal">true</span>; <span class="hljs-comment">// é”å®šç¬¬äº”åˆ—</span>
</code></pre>
<h3 data-id="heading-14">5. è‡ªå®šä¹‰ç»˜åˆ¶ä¸è¡Œå·æ˜¾ç¤º</h3>
<h4 data-id="heading-15">5.1 è¡Œå·æ˜¾ç¤ºåŠŸèƒ½</h4>
<p>é€šè¿‡é‡å†™ RowPostPaint äº‹ä»¶ï¼Œå®ç°äº†è‡ªå®šä¹‰è¡Œå·æ˜¾ç¤ºï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">dataGridView_Data_RowPostPaint</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> sender, DataGridViewRowPostPaintEventArgs e</span>)</span>
{
    <span class="hljs-comment">// è·å–è¡¨æ ¼ä¸­æ¯è¡Œçš„ç¬¬ä¸€ä¸ªçŸ©å‹</span>
    Rectangle rect = <span class="hljs-keyword">new</span> Rectangle(e.RowBounds.Location.X,
                           e.RowBounds.Location.Y,
                           dataGridView_Data.RowHeadersWidth - <span class="hljs-number">4</span>,
                           e.RowBounds.Height);
    <span class="hljs-comment">//é‡æ–°åœ¨çŸ©å‹ä¸­æ·»åŠ æ–‡æœ¬</span>
    TextRenderer.DrawText(e.Graphics,
                          (e.RowIndex + <span class="hljs-number">1</span>).ToString(),
                          dataGridView_Data.RowHeadersDefaultCellStyle.Font,
                          rect,
                          dataGridView_Data.RowHeadersDefaultCellStyle.ForeColor,
                          TextFormatFlags.VerticalCenter | TextFormatFlags.HorizontalCenter);
}
</code></pre>
<h4 data-id="heading-16">5.2 å•å…ƒæ ¼è‡ªå®šä¹‰ç»˜åˆ¶</h4>
<p>é€šè¿‡ CellPainting äº‹ä»¶ï¼Œå®ç°äº†è¡¨å¤´å’Œå·¦ä¸Šè§’å•å…ƒæ ¼çš„è‡ªå®šä¹‰ç»˜åˆ¶ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">dataGridView_Data_CellPainting</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> sender, DataGridViewCellPaintingEventArgs e</span>)</span>
{
    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æ˜¯å·¦ä¸Šè§’å•å…ƒæ ¼</span>
    <span class="hljs-keyword">if</span> (e.RowIndex == <span class="hljs-number">-1</span>) <span class="hljs-comment">// å·¦ä¸Šè§’å•å…ƒæ ¼çš„è¡Œåˆ—ç´¢å¼•éƒ½æ˜¯ -1</span>
    {
        <span class="hljs-keyword">if</span> (e.ColumnIndex == <span class="hljs-number">-1</span>)
        {
            e.Handled = <span class="hljs-literal">true</span>; <span class="hljs-comment">// å‘Šè¯‰ç³»ç»Ÿæˆ‘ä»¬ä¼šæ‰‹åŠ¨ç»˜åˆ¶æ­¤å•å…ƒæ ¼</span>

            <span class="hljs-comment">// ç»˜åˆ¶å•å…ƒæ ¼èƒŒæ™¯</span>
            e.Graphics.FillRectangle(Brushes.SaddleBrown, e.CellBounds);

            <span class="hljs-comment">// ç»˜åˆ¶è‡ªå®šä¹‰æ–‡æœ¬</span>
            <span class="hljs-built_in">string</span> text = <span class="hljs-string">"åºå·"</span>; <span class="hljs-comment">// ä½ æƒ³æ”¾ç½®çš„å†…å®¹</span>

            <span class="hljs-comment">// åˆ›å»ºå¯¹é½æ ¼å¼</span>
            StringFormat stringFormat = <span class="hljs-keyword">new</span> StringFormat
            {
                Alignment = StringAlignment.Center, <span class="hljs-comment">// æ°´å¹³å±…ä¸­</span>
                LineAlignment = StringAlignment.Center, <span class="hljs-comment">// å‚ç›´å±…ä¸­</span>
            };

            <span class="hljs-keyword">using</span> (System.Drawing.Brush textBrush = <span class="hljs-keyword">new</span> SolidBrush(System.Drawing.Color.White))
            {
                <span class="hljs-comment">// è®¡ç®—æ–‡æœ¬çš„ä½ç½®</span>
                RectangleF textBounds = <span class="hljs-keyword">new</span> RectangleF(e.CellBounds.X, e.CellBounds.Y, e.CellBounds.Width, e.CellBounds.Height);
                <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªéåŠ ç²—çš„å­—ä½“</span>
                System.Drawing.Font font = <span class="hljs-keyword">new</span> System.Drawing.Font(<span class="hljs-string">"å¾®è½¯é›…é»‘"</span>, e.CellStyle.Font.Size, FontStyle.Regular);
                e.Graphics.DrawString(text, font, textBrush, textBounds, stringFormat);
            }

            <span class="hljs-comment">// ç»˜åˆ¶å•å…ƒæ ¼è¾¹æ¡†</span>
            e.Graphics.DrawRectangle(Pens.Chocolate, e.CellBounds);

            <span class="hljs-comment">// ç»§ç»­ç»˜åˆ¶å…¶ä»–çš„å•å…ƒæ ¼å†…å®¹ï¼ˆå¦‚æ ‡é¢˜ï¼‰</span>
            e.PaintContent(e.CellBounds);
        }
        <span class="hljs-keyword">else</span>
        {
            e.Handled = <span class="hljs-literal">true</span>;

            <span class="hljs-comment">// ç»˜åˆ¶å•å…ƒæ ¼èƒŒæ™¯</span>
            e.Graphics.FillRectangle(Brushes.SaddleBrown, e.CellBounds);

            <span class="hljs-comment">// ç»˜åˆ¶æ ‡é¢˜æ–‡æœ¬ï¼Œæ°´å¹³å±…ä¸­</span>
            <span class="hljs-keyword">using</span> (System.Drawing.Brush textBrush = <span class="hljs-keyword">new</span> SolidBrush(System.Drawing.Color.White))
            {
                <span class="hljs-comment">// è®¾ç½®æ–‡æœ¬å¯¹é½ä¸ºå±…ä¸­</span>
                StringFormat format = <span class="hljs-keyword">new</span> StringFormat
                {
                    Alignment = StringAlignment.Center,
                    LineAlignment = StringAlignment.Center <span class="hljs-comment">// é¿å…æ¢è¡Œ</span>
                };
                <span class="hljs-comment">// è®¡ç®—æ–‡æœ¬çš„ä½ç½®</span>
                RectangleF textBounds = <span class="hljs-keyword">new</span> RectangleF(e.CellBounds.X, e.CellBounds.Y, e.CellBounds.Width, e.CellBounds.Height);
                <span class="hljs-comment">// ç»˜åˆ¶æ–‡æœ¬</span>
                System.Drawing.Font font = <span class="hljs-keyword">new</span> System.Drawing.Font(<span class="hljs-string">"å¾®è½¯é›…é»‘"</span>, e.CellStyle.Font.Size, FontStyle.Regular);
                e.Graphics.DrawString(e.FormattedValue.ToString(), font, textBrush, textBounds, format);
            }

            <span class="hljs-comment">// ç»˜åˆ¶å•å…ƒæ ¼è¾¹æ¡†</span>
            e.Graphics.DrawRectangle(Pens.Chocolate, e.CellBounds);
        }
    }
}
</code></pre>
<h3 data-id="heading-17">6. å³é”®èœå•åŠŸèƒ½å®ç°</h3>
<p>ä¸º DataGridView æ·»åŠ å³é”®èœå•ï¼Œæä¾›å•å…ƒæ ¼å’Œè¡Œæ“ä½œåŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åˆå§‹åŒ–å³é”®èœå•</span>
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">InitializeContextMenuStrip</span>()</span>
{
    <span class="hljs-comment">// åˆ›å»ºä¸Šä¸‹æ–‡èœå•</span>
    contextMenuStrip = <span class="hljs-keyword">new</span> ContextMenuStrip();
    
    <span class="hljs-comment">// æ·»åŠ èœå•é¡¹</span>
    ToolStripMenuItem selectItem = <span class="hljs-keyword">new</span> ToolStripMenuItem(<span class="hljs-string">"æŸ¥çœ‹å•å…ƒæ ¼å†…å®¹"</span>);
    ToolStripMenuItem selectRow = <span class="hljs-keyword">new</span> ToolStripMenuItem(<span class="hljs-string">"æŸ¥çœ‹æ•´è¡Œå†…å®¹"</span>);
    ToolStripMenuItem showRowJson = <span class="hljs-keyword">new</span> ToolStripMenuItem(<span class="hljs-string">"æ˜¾ç¤ºè¡ŒJSONæ•°æ®"</span>);
    
    <span class="hljs-comment">// æ·»åŠ åˆ°èœå•</span>
    contextMenuStrip.Items.AddRange(<span class="hljs-keyword">new</span> ToolStripItem[] { selectItem, selectRow, showRowJson });
    
    <span class="hljs-comment">// ç»‘å®šå³é”®èœå•åˆ° DataGridView</span>
    dataGridView_Data.ContextMenuStrip = contextMenuStrip;
    
    <span class="hljs-comment">// æ·»åŠ èœå•é¡¹ç‚¹å‡»äº‹ä»¶</span>
    selectItem.Click += SelectItem_Click;
    selectRow.Click += SelectRow_Click;
    showRowJson.Click += ShowRowJson_Click;
}

<span class="hljs-comment">// æŸ¥çœ‹å•å…ƒæ ¼å†…å®¹</span>
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SelectItem_Click</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> sender, EventArgs e</span>)</span>
{
    <span class="hljs-comment">// è·å–é€‰å®šå•å…ƒæ ¼</span>
    <span class="hljs-keyword">if</span> (dataGridView_Data.SelectedCells.Count &gt; <span class="hljs-number">0</span>)
    {
        <span class="hljs-built_in">int</span> rowIndex = dataGridView_Data.SelectedCells[<span class="hljs-number">0</span>].RowIndex;
        <span class="hljs-built_in">int</span> columnIndex = dataGridView_Data.SelectedCells[<span class="hljs-number">0</span>].ColumnIndex;
        
        <span class="hljs-comment">// è·å–é€‰å®šå•å…ƒæ ¼çš„å€¼</span>
        <span class="hljs-keyword">var</span> cellValue = dataGridView_Data.Rows[rowIndex].Cells[columnIndex].Value;
        <span class="hljs-built_in">string</span> str_CellValue = <span class="hljs-string">""</span>;
        <span class="hljs-keyword">if</span> (cellValue != <span class="hljs-literal">null</span>)
        {
            str_CellValue = cellValue.ToString();
        }
        CustomPopBox messageBox = <span class="hljs-keyword">new</span> CustomPopBox(<span class="hljs-string">$"æç¤ºä¿¡æ¯-&gt;ã€Šé€‰å®šæ•´è¡Œã€‹"</span>, <span class="hljs-string">"å†…å®¹å¦‚ä¸‹:"</span>, str_CellValue);
        messageBox.ShowDialog(<span class="hljs-keyword">this</span>); <span class="hljs-comment">// æ¨¡æ€æ˜¾ç¤º</span>
    }
}

<span class="hljs-comment">// æŸ¥çœ‹æ•´è¡Œå†…å®¹</span>
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SelectRow_Click</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> sender, EventArgs e</span>)</span>
{
    <span class="hljs-comment">// è·å–é€‰å®šå•å…ƒæ ¼</span>
    <span class="hljs-keyword">if</span> (dataGridView_Data.SelectedCells.Count &gt; <span class="hljs-number">0</span>)
    {
        <span class="hljs-built_in">int</span> rowIndex = dataGridView_Data.SelectedCells[<span class="hljs-number">0</span>].RowIndex;
        <span class="hljs-comment">// è·å–é€‰å®šå•å…ƒæ ¼çš„å€¼</span>
        <span class="hljs-keyword">var</span> rowValue = getRowValues(rowIndex);
        
        CustomPopBox messageBox = <span class="hljs-keyword">new</span> CustomPopBox(<span class="hljs-string">$"æç¤ºä¿¡æ¯-&gt;ã€Šé€‰å®šæ•´è¡Œã€‹"</span>, <span class="hljs-string">"å†…å®¹å¦‚ä¸‹:"</span>, rowValue);
        messageBox.ShowDialog(<span class="hljs-keyword">this</span>); <span class="hljs-comment">// æ¨¡æ€æ˜¾ç¤º</span>
    }
}

<span class="hljs-comment">// æ ¹æ®è¡Œç´¢å¼•è·å–è¡¨æ ¼é€‰å®šè¡Œå†…å®¹</span>
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-built_in">string</span> <span class="hljs-title">getRowValues</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> rowIndex</span>)</span>
{
    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªåˆ—è¡¨æ¥ä¿å­˜è¡Œæ•°æ®</span>
    <span class="hljs-keyword">var</span> rowValues = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">object</span>&gt;();
    
    <span class="hljs-comment">// éå†æŒ‡å®šè¡Œçš„æ‰€æœ‰å•å…ƒæ ¼</span>
    <span class="hljs-keyword">foreach</span> (DataGridViewCell cell <span class="hljs-keyword">in</span> dataGridView_Data.Rows[rowIndex].Cells)
    {
        <span class="hljs-comment">// å°†å•å…ƒæ ¼çš„å€¼æ·»åŠ åˆ°åˆ—è¡¨ä¸­</span>
        rowValues.Add(cell.Value);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">string</span>.Join(<span class="hljs-string">", "</span>, rowValues);
}

<span class="hljs-comment">// æ˜¾ç¤ºè¡ŒJSONæ•°æ®</span>
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ShowRowJson_Click</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> sender, EventArgs e</span>)</span>
{
    <span class="hljs-comment">// è·å–é€‰å®šå•å…ƒæ ¼</span>
    <span class="hljs-keyword">if</span> (dataGridView_Data.SelectedCells.Count &gt; <span class="hljs-number">0</span>)
    {
        <span class="hljs-built_in">int</span> rowIndex = dataGridView_Data.SelectedCells[<span class="hljs-number">0</span>].RowIndex;
        <span class="hljs-comment">// è·å–é€‰å®šå•å…ƒæ ¼çš„å€¼</span>
        <span class="hljs-keyword">var</span> jsonString = getRowJson(rowIndex);
        <span class="hljs-comment">// è§£æ JSON å­—ç¬¦ä¸²</span>
        <span class="hljs-keyword">var</span> jsonArray = JArray.Parse(jsonString);
        
        <span class="hljs-comment">// æ ¼å¼åŒ– JSON å­—ç¬¦ä¸²</span>
        <span class="hljs-built_in">string</span> formattedJson = JsonConvert.SerializeObject(jsonArray, Formatting.Indented);
        <span class="hljs-comment">// åˆ›å»ºå¹¶æ˜¾ç¤ºè‡ªå®šä¹‰å¯¹è¯æ¡†</span>
        CustomPopBox messageBox = <span class="hljs-keyword">new</span> CustomPopBox(<span class="hljs-string">$"æç¤ºä¿¡æ¯-&gt;ã€Šæ˜¾ç¤ºè¡ŒJSONæ•°æ®ã€‹"</span>, <span class="hljs-string">"å†…å®¹å¦‚ä¸‹:"</span>, formattedJson);
        messageBox.ShowDialog(<span class="hljs-keyword">this</span>); <span class="hljs-comment">// æ¨¡æ€æ˜¾ç¤º</span>
    }
}

<span class="hljs-comment">// æ ¹æ®è¡Œç´¢å¼•è·å–è¡¨æ ¼é€‰å®šè¡Œçš„JSONæ•°æ®</span>
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-built_in">string</span> <span class="hljs-title">getRowJson</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> rowIndex</span>)</span>
{
    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªåˆ—è¡¨æ¥ä¿å­˜è¡Œæ•°æ®</span>
    <span class="hljs-keyword">var</span> rowValues = <span class="hljs-keyword">new</span> List&lt;RowJsonData&gt;();
    
    <span class="hljs-comment">// éå†æŒ‡å®šè¡Œçš„æ‰€æœ‰å•å…ƒæ ¼</span>
    <span class="hljs-keyword">foreach</span> (DataGridViewCell cell <span class="hljs-keyword">in</span> dataGridView_Data.Rows[rowIndex].Cells)
    {
        <span class="hljs-comment">// å°†å•å…ƒæ ¼çš„å€¼æ·»åŠ åˆ°åˆ—è¡¨ä¸­</span>
        RowJsonData rowJsonData = <span class="hljs-keyword">new</span> RowJsonData();
        rowJsonData.ColumnIndex = Convert.ToInt32(cell.ColumnIndex);
        rowJsonData.ColumnIName = dataGridView_Data.Columns[cell.ColumnIndex].Name.ToString();
        
        <span class="hljs-keyword">if</span> (cell.Value != <span class="hljs-literal">null</span>)
        {
            rowJsonData.TextValue = cell.Value.ToString();
        }
        <span class="hljs-keyword">else</span>
        {
            rowJsonData.TextValue = <span class="hljs-string">""</span>;
        }
        
        rowValues.Add(rowJsonData);
    }
    <span class="hljs-comment">// å°† rowValues è½¬æ¢ä¸º JSON å­—ç¬¦ä¸²</span>
    <span class="hljs-built_in">string</span> jsonString = JsonConvert.SerializeObject(rowValues);
    <span class="hljs-keyword">return</span> jsonString;
}

<span class="hljs-comment">// å®šä¹‰è¡Œæ•°æ®çš„JSONç»“æ„ç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">RowJsonData</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> ColumnIndex { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> ColumnIName { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> TextValue { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
}
</code></pre>
<h3 data-id="heading-18">7. äº‹ä»¶å¤„ç†</h3>
<h4 data-id="heading-19">7.1 é€‰æ‹©å˜åŒ–äº‹ä»¶</h4>
<p>é€šè¿‡ SelectionChanged äº‹ä»¶ï¼Œå®ç°äº†è¡Œé€‰æ‹©æ—¶çš„è”åŠ¨æ“ä½œï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">dataGridView_Data_SelectionChanged</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> sender, EventArgs e</span>)</span>
{
    <span class="hljs-comment">// ç¡®ä¿æœ‰é€‰ä¸­çš„è¡Œ</span>
    <span class="hljs-keyword">if</span> (dataGridView_Data.SelectedRows.Count &gt; <span class="hljs-number">0</span>)
    {
        <span class="hljs-comment">// è·å–é€‰ä¸­çš„è¡Œ</span>
        <span class="hljs-keyword">var</span> selectedRow = dataGridView_Data.SelectedRows[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">if</span> (selectedRow.Cells[<span class="hljs-string">"å›¾ç‰‡åç§°"</span>].Value != <span class="hljs-literal">null</span>)
        {
            <span class="hljs-comment">// æ‰§è¡Œä½ çš„ä»£ç </span>
            <span class="hljs-comment">// ç¤ºä¾‹ï¼šè·å–æŸåˆ—çš„å€¼</span>
            <span class="hljs-built_in">string</span> cellValue = selectedRow.Cells[<span class="hljs-string">"å›¾ç‰‡åç§°"</span>].Value.ToString();
            <span class="hljs-comment">// é¦–å…ˆå°†æ‰€æœ‰é¡¹å¤åˆ¶åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­</span>
            <span class="hljs-keyword">var</span> items = listBox_JpgList.Items.Cast&lt;<span class="hljs-built_in">object</span>&gt;().ToList();
            
            <span class="hljs-comment">// è·å–å½“å‰é¡¹çš„ç´¢å¼•</span>
            <span class="hljs-built_in">int</span> index = listBox_JpgList.Items.IndexOf(cellValue);
            listBox_JpgList.SelectedIndex = index;
            listBox_JpgList.Refresh();
            
            <span class="hljs-comment">//åˆ‡æ¢é¢„è§ˆé¡µå¡</span>
            switchToTab(<span class="hljs-string">"tabPage_InvoiceSumData"</span>);
            <span class="hljs-comment">// ä½ å¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œå…¶ä»–æ“ä½œï¼Œæ¯”å¦‚æ›´æ–° UI æˆ–å¤„ç†æ•°æ®</span>
        }
    }
}
</code></pre>
<h4 data-id="heading-20">7.2 å•å…ƒæ ¼ç¼–è¾‘äº‹ä»¶</h4>
<p>é€šè¿‡ CellEndEdit äº‹ä»¶ï¼Œå®ç°äº†å•å…ƒæ ¼ç¼–è¾‘åçš„éªŒè¯å’Œå¤„ç†ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">dataGridView_Data_CellEndEdit</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> sender, DataGridViewCellEventArgs e</span>)</span>
{
    <span class="hljs-comment">// å•å…ƒæ ¼ç¼–è¾‘å®Œæˆåçš„å¤„ç†é€»è¾‘</span>
    <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ æ•°æ®éªŒè¯ã€æ ¼å¼æ£€æŸ¥ç­‰åŠŸèƒ½</span>
}
</code></pre>
<h4 data-id="heading-21">7.3 å•å…ƒæ ¼ç‚¹å‡»äº‹ä»¶</h4>
<p>é€šè¿‡ CellContentClick äº‹ä»¶ï¼Œå®ç°äº†å•å…ƒæ ¼ç‚¹å‡»æ—¶çš„äº¤äº’åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">dataGridView_Data_CellContentClick</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> sender, DataGridViewCellEventArgs e</span>)</span>
{
    <span class="hljs-comment">// å•å…ƒæ ¼å†…å®¹ç‚¹å‡»æ—¶çš„å¤„ç†é€»è¾‘</span>
    <span class="hljs-comment">// å¯ä»¥ç”¨äºå®ç°è¶…é“¾æ¥ã€æŒ‰é’®ç­‰äº¤äº’åŠŸèƒ½</span>
}
</code></pre>
<h3 data-id="heading-22">8. æ•°æ®æ“ä½œä¸å¤„ç†</h3>
<h4 data-id="heading-23">8.1 æ•°æ®éå†ä¸å¤„ç†</h4>
<p>é¡¹ç›®ä¸­å®ç°äº†å¤šç§æ•°æ®éå†å’Œå¤„ç†æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// éå† DataGridView çš„æ¯ä¸€è¡Œ</span>
<span class="hljs-keyword">foreach</span> (DataGridViewRow row <span class="hljs-keyword">in</span> dataGridView_Data.Rows)
{
    <span class="hljs-keyword">if</span> (row.IsNewRow) <span class="hljs-keyword">continue</span>; <span class="hljs-comment">// è·³è¿‡ç©ºè¡Œ</span>
    
    <span class="hljs-comment">// è·å–è¡Œä¸­çš„æ•°æ®</span>
    <span class="hljs-built_in">string</span> invoiceNumber = row.Cells[<span class="hljs-string">"å‘ç¥¨å·ç "</span>].Value.ToString();
    <span class="hljs-comment">// å¤„ç†æ•°æ®...</span>
}

<span class="hljs-comment">// ä»åå‘å‰éå†DataGridViewçš„æ¯ä¸€è¡Œï¼Œä»¥ä¾¿åˆ é™¤è¡Œæ—¶ä¸ä¼šå½±å“ç´¢å¼•</span>
<span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = dataGridView_Data.Rows.Count - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--)
{
    DataGridViewRow row = dataGridView_Data.Rows[i];
    
    <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦éœ€è¦åˆ é™¤è¯¥è¡Œ</span>
    <span class="hljs-keyword">if</span> (éœ€è¦åˆ é™¤çš„æ¡ä»¶)
    {
        dataGridView_Data.Rows.RemoveAt(i);
    }
}
</code></pre>
<h4 data-id="heading-24">8.2 æ•°æ®æ‰¹é‡æ›´æ–°</h4>
<p>å®ç°äº†å‘ç¥¨æ•°æ®çš„æ‰¹é‡æ›´æ–°åŠŸèƒ½ï¼Œå¦‚åŒæ­¥ç¨ç‡ã€é¡¹ç›®åç§°ç­‰ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// å°†ä¸€å¼ å‘ç¥¨ä¸­æœ‰å¤šé¡µçš„æ•°æ®ï¼Œæœ€åä¸€é¡µæ²¡æœ‰ç¨ç‡ï¼Œéœ€è¦æå–ä¸€é¡µçš„ç¨ç‡ï¼Œå°†æœ€åä¸€é¡µçš„ç¨ç‡èµ‹å€¼</span>
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">UpdateTaxRates</span>()</span>
{
    <span class="hljs-comment">// ä½¿ç”¨å­—å…¸æ¥å­˜å‚¨å‘ç¥¨å·ç å’Œå¯¹åº”çš„ç¨ç‡</span>
    Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; invoiceTaxRates = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;();
    
    <span class="hljs-comment">// éå† DataGridView çš„æ¯ä¸€è¡Œ</span>
    <span class="hljs-keyword">foreach</span> (DataGridViewRow row <span class="hljs-keyword">in</span> dataGridView_Data.Rows)
    {
        <span class="hljs-keyword">if</span> (row.IsNewRow) <span class="hljs-keyword">continue</span>; <span class="hljs-comment">// è·³è¿‡ç©ºè¡Œ</span>
        
        <span class="hljs-comment">// è·å–å‘ç¥¨å·ç å’Œç¨ç‡</span>
        <span class="hljs-built_in">string</span> invoiceNumber = row.Cells[<span class="hljs-string">"å‘ç¥¨å·ç "</span>].Value?.ToString();
        <span class="hljs-built_in">string</span> taxRate = row.Cells[<span class="hljs-string">"ç¨ç‡"</span>].Value?.ToString();
        
        <span class="hljs-comment">// å¦‚æœæœ‰ç¨ç‡å€¼ï¼Œå­˜å‚¨åˆ°å­—å…¸ä¸­</span>
        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">string</span>.IsNullOrEmpty(invoiceNumber) &amp;&amp; !<span class="hljs-built_in">string</span>.IsNullOrEmpty(taxRate))
        {
            <span class="hljs-keyword">if</span> (!invoiceTaxRates.ContainsKey(invoiceNumber))
            {
                invoiceTaxRates.Add(invoiceNumber, taxRate);
            }
        }
    }
    
    <span class="hljs-comment">// å†æ¬¡éå†ï¼Œä¸ºæ²¡æœ‰ç¨ç‡çš„è¡Œè®¾ç½®ç¨ç‡</span>
    <span class="hljs-keyword">foreach</span> (DataGridViewRow row <span class="hljs-keyword">in</span> dataGridView_Data.Rows)
    {
        <span class="hljs-keyword">if</span> (row.IsNewRow) <span class="hljs-keyword">continue</span>;
        
        <span class="hljs-built_in">string</span> invoiceNumber = row.Cells[<span class="hljs-string">"å‘ç¥¨å·ç "</span>].Value?.ToString();
        <span class="hljs-built_in">string</span> taxRate = row.Cells[<span class="hljs-string">"ç¨ç‡"</span>].Value?.ToString();
        
        <span class="hljs-comment">// å¦‚æœæ²¡æœ‰ç¨ç‡å€¼ï¼Œä½†å­—å…¸ä¸­æœ‰è¯¥å‘ç¥¨çš„ç¨ç‡ï¼Œè®¾ç½®ç¨ç‡</span>
        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">string</span>.IsNullOrEmpty(invoiceNumber) &amp;&amp; <span class="hljs-built_in">string</span>.IsNullOrEmpty(taxRate) &amp;&amp; 
            invoiceTaxRates.ContainsKey(invoiceNumber))
        {
            row.Cells[<span class="hljs-string">"ç¨ç‡"</span>].Value = invoiceTaxRates[invoiceNumber];
        }
    }
}
</code></pre>
<h4 data-id="heading-25">8.3 æ•°æ®æ¸…ç©ºä¸åˆ é™¤</h4>
<p>å®ç°äº†è¡¨æ ¼æ•°æ®çš„æ¸…ç©ºå’Œåˆ é™¤åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// æ¸…ç©ºDataGridViewï¼Œåªä¿ç•™åˆ—å</span>
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ClearDataGridView</span>()</span>
{
    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªç©ºçš„ DataTableï¼Œä¿ç•™åŸåˆ—ç»“æ„</span>
    DataTable emptyTable = <span class="hljs-keyword">new</span> DataTable();
    <span class="hljs-keyword">foreach</span> (DataGridViewColumn column <span class="hljs-keyword">in</span> dataGridView_Data.Columns)
    {
        DataColumn newColumn = <span class="hljs-keyword">new</span> DataColumn(column.Name, column.ValueType);
        newColumn.Caption = column.HeaderText;
        emptyTable.Columns.Add(newColumn);
    }
    
    <span class="hljs-comment">// å°† DataGridView çš„æ•°æ®æºè®¾ç½®ä¸ºæ–°çš„ç©º DataTable</span>
    dataGridView_Data.DataSource = emptyTable;
}

<span class="hljs-comment">// åˆ é™¤é€‰ä¸­çš„è¡Œ</span>
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DeleteSelectedRows</span>()</span>
{
    <span class="hljs-comment">// ä»åå‘å‰éå†é€‰ä¸­çš„è¡Œï¼Œä»¥ä¾¿åˆ é™¤è¡Œæ—¶ä¸ä¼šå½±å“ç´¢å¼•</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = dataGridView_Data.SelectedRows.Count - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--)
    {
        dataGridView_Data.Rows.RemoveAt(dataGridView_Data.SelectedRows[i].Index);
    }
    
    <span class="hljs-comment">// åˆ·æ–°DataGridView</span>
    dataGridView_Data.Refresh();
}
</code></pre>
<h3 data-id="heading-26">9. æ•°æ®å¯¼å‡ºåŠŸèƒ½</h3>
<p>é¡¹ç›®ä¸­å®ç°äº†å°† DataGridView æ•°æ®å¯¼å‡ºåˆ° Excel å’Œ PDF çš„åŠŸèƒ½ï¼š</p>
<h4 data-id="heading-27">9.1 å¯¼å‡ºåˆ° Excel</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ExportDataGridViewToXls</span>()</span>
{
    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-comment">// å¯¼å‡ºé€»è¾‘</span>
        <span class="hljs-comment">// ...</span>
        
        <span class="hljs-comment">// éå† DataGridView çš„æ¯ä¸€è¡Œ</span>
        <span class="hljs-keyword">foreach</span> (DataGridViewRow row <span class="hljs-keyword">in</span> dgv.Rows)
        {
            <span class="hljs-keyword">if</span> (row.IsNewRow) <span class="hljs-keyword">continue</span>;
            
            <span class="hljs-comment">// éå†æ¯ä¸€è¡Œçš„å•å…ƒæ ¼</span>
            <span class="hljs-keyword">foreach</span> (DataGridViewCell cell <span class="hljs-keyword">in</span> row.Cells)
            {
                <span class="hljs-comment">// å¤„ç†å•å…ƒæ ¼æ•°æ®</span>
                <span class="hljs-comment">// ...</span>
            }
        }
        
        <span class="hljs-comment">// ä¿å­˜Excelæ–‡ä»¶</span>
        <span class="hljs-comment">// ...</span>
    }
    <span class="hljs-keyword">catch</span> (Exception ex)
    {
        <span class="hljs-comment">// å¼‚å¸¸å¤„ç†</span>
        <span class="hljs-comment">// ...</span>
    }
}
</code></pre>
<h4 data-id="heading-28">9.2 å¯¼å‡ºåˆ° PDF</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ExportDataGridViewToPdf</span>()</span>
{
    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-comment">// å¯¼å‡ºé€»è¾‘</span>
        <span class="hljs-comment">// ...</span>
        
        <span class="hljs-comment">// éå† DataGridView çš„åˆ—</span>
        <span class="hljs-keyword">foreach</span> (DataGridViewColumn col <span class="hljs-keyword">in</span> dgv.Columns)
        {
            <span class="hljs-comment">// å¤„ç†åˆ—æ ‡é¢˜</span>
            <span class="hljs-comment">// ...</span>
        }
        
        <span class="hljs-comment">// éå† DataGridView çš„è¡Œ</span>
        <span class="hljs-keyword">foreach</span> (DataGridViewRow row <span class="hljs-keyword">in</span> dgv.Rows)
        {
            <span class="hljs-keyword">if</span> (row.IsNewRow) <span class="hljs-keyword">continue</span>;
            
            <span class="hljs-comment">// éå†æ¯ä¸€è¡Œçš„å•å…ƒæ ¼</span>
            <span class="hljs-keyword">foreach</span> (DataGridViewCell cell <span class="hljs-keyword">in</span> row.Cells)
            {
                <span class="hljs-comment">// å¤„ç†å•å…ƒæ ¼æ•°æ®</span>
                <span class="hljs-comment">// ...</span>
            }
        }
        
        <span class="hljs-comment">// ä¿å­˜PDFæ–‡ä»¶</span>
        <span class="hljs-comment">// ...</span>
    }
    <span class="hljs-keyword">catch</span> (Exception ex)
    {
        <span class="hljs-comment">// å¼‚å¸¸å¤„ç†</span>
        <span class="hljs-comment">// ...</span>
    }
}
</code></pre>
<h3 data-id="heading-29">10. é«˜çº§åŠŸèƒ½ä¸ä¼˜åŒ–</h3>
<h4 data-id="heading-30">10.1 æ€§èƒ½ä¼˜åŒ–</h4>
<p>é¡¹ç›®ä¸­å®ç°äº†å¤šç§æ€§èƒ½ä¼˜åŒ–æªæ–½ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ç¦ç”¨è‡ªåŠ¨è°ƒæ•´åˆ—å®½ä»¥æé«˜æ€§èƒ½</span>
dataGridView_Data.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.None;

<span class="hljs-comment">// è®¾ç½®åˆé€‚çš„åˆ—å®½ï¼Œé¿å…è¿‡åº¦ç»˜åˆ¶</span>
dataGridView_Data.Columns[getColumnIndexByName(<span class="hljs-string">"è´­ä¹°æ–¹åœ°å€ç”µè¯"</span>)].Width = <span class="hljs-number">200</span>;

<span class="hljs-comment">// ä½¿ç”¨é«˜æ•ˆçš„æ•°æ®ç»“æ„å­˜å‚¨ä¸´æ—¶æ•°æ®</span>
Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; invoiceTaxRates = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;();

<span class="hljs-comment">// ä»åå‘å‰éå†åˆ é™¤è¡Œï¼Œé¿å…ç´¢å¼•é—®é¢˜</span>
<span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = dataGridView_Data.Rows.Count - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--)
{
    <span class="hljs-comment">// åˆ é™¤è¡Œæ“ä½œ</span>
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<h4 data-id="heading-31">10.2 æ•°æ®éªŒè¯ä¸é”™è¯¯å¤„ç†</h4>
<p>å®ç°äº†å®Œå–„çš„æ•°æ®éªŒè¯å’Œé”™è¯¯å¤„ç†æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// æ•°æ®éªŒè¯</span>
<span class="hljs-keyword">if</span> (<span class="hljs-built_in">string</span>.IsNullOrEmpty(cellValue))
{
    MessageBox.Show(<span class="hljs-string">"æ•°æ®ä¸èƒ½ä¸ºç©ºï¼"</span>);
    <span class="hljs-keyword">return</span>;
}

<span class="hljs-comment">// å¼‚å¸¸å¤„ç†</span>
<span class="hljs-keyword">try</span>
{
    <span class="hljs-comment">// å¯èƒ½å¼•å‘å¼‚å¸¸çš„æ“ä½œ</span>
    <span class="hljs-comment">// ...</span>
}
<span class="hljs-keyword">catch</span> (Exception ex)
{
    MessageBox.Show(<span class="hljs-string">$"æ“ä½œå¤±è´¥ï¼š<span class="hljs-subst">{ex.Message}</span>"</span>);
    <span class="hljs-comment">// è®°å½•æ—¥å¿—</span>
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<h3 data-id="heading-32">11. ä»£ç ç¤ºä¾‹ï¼šå®Œæ•´çš„ DataGridView åˆå§‹åŒ–ä¸é…ç½®</h3>
<p>ä»¥ä¸‹æ˜¯é¡¹ç›®ä¸­å®Œæ•´çš„ DataGridView åˆå§‹åŒ–å’Œé…ç½®ä»£ç ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è®¾ç½®å•å…ƒæ ¼é»˜è®¤å­—ä½“å’Œé¢œè‰²</span>
dataGridView_Data.DefaultCellStyle.Font = <span class="hljs-keyword">new</span> System.Drawing.Font(<span class="hljs-string">"å¾®è½¯é›…é»‘"</span>, <span class="hljs-number">10</span>, FontStyle.Regular);
dataGridView_Data.DefaultCellStyle.ForeColor = System.Drawing.Color.Black;

<span class="hljs-comment">// è®¾ç½®è¡¨å¤´æ ·å¼</span>
SetColumnHeaderStyle(System.Drawing.Color.SaddleBrown, System.Drawing.Color.White, <span class="hljs-number">12</span>);

<span class="hljs-comment">// å°†edsåˆ—è¡¨ç»‘å®šåˆ°è¡¨æ ¼æ•°æ®æº</span>
dataGridView_Data.DataSource = eds;

<span class="hljs-comment">// åœ¨ DataGridView å±æ€§ä¸­å¯ç”¨è¡Œæ ‡é¢˜</span>
dataGridView_Data.RowHeadersVisible = <span class="hljs-literal">true</span>;

<span class="hljs-comment">//è‡ªåŠ¨è°ƒæ•´åˆ—å®½</span>
dataGridView_Data.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.AllCells;

<span class="hljs-comment">// 1. å…ˆä¿ç•™å½“å‰åˆ—å®½</span>
<span class="hljs-keyword">var</span> columnWidths = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-built_in">int</span>, <span class="hljs-built_in">int</span>&gt;();
<span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; dataGridView_Data.Columns.Count; i++)
{
    columnWidths[i] = dataGridView_Data.Columns[i].Width;
}

<span class="hljs-comment">// 2. å…³é—­è‡ªåŠ¨è°ƒæ•´åˆ—å®½</span>
dataGridView_Data.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.None;

<span class="hljs-comment">// 3. è®¾ç½®æ¯ä¸€åˆ—åˆ°åˆšåˆšä¿ç•™çš„å®½åº¦</span>
<span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; dataGridView_Data.Columns.Count; i++)
{
    dataGridView_Data.Columns[i].Width = columnWidths[i];
}

<span class="hljs-comment">// è®¾ç½®ç”¨æˆ·äº¤äº’é€‰é¡¹</span>
dataGridView_Data.AllowUserToResizeColumns = <span class="hljs-literal">true</span>; <span class="hljs-comment">// å…è®¸ç”¨æˆ·è°ƒæ•´åˆ—å®½</span>
dataGridView_Data.AllowUserToResizeRows = <span class="hljs-literal">true</span>;
dataGridView_Data.AllowUserToAddRows = <span class="hljs-literal">false</span>; <span class="hljs-comment">// ç¦ç”¨æ·»åŠ æ–°è¡Œ</span>

<span class="hljs-comment">// è®¾ç½®ç‰¹å®šåˆ—çš„å®½åº¦</span>
dataGridView_Data.Columns[getColumnIndexByName(<span class="hljs-string">"è´­ä¹°æ–¹åœ°å€ç”µè¯"</span>)].Width = <span class="hljs-number">200</span>;
dataGridView_Data.Columns[getColumnIndexByName(<span class="hljs-string">"è´­ä¹°æ–¹å¼€æˆ·è¡ŒåŠè´¦å·"</span>)].Width = <span class="hljs-number">200</span>;
dataGridView_Data.Columns[getColumnIndexByName(<span class="hljs-string">"é”€å”®æ–¹åœ°å€ç”µè¯"</span>)].Width = <span class="hljs-number">200</span>;
dataGridView_Data.Columns[getColumnIndexByName(<span class="hljs-string">"é”€å”®æ–¹å¼€æˆ·è¡ŒåŠè´¦å·"</span>)].Width = <span class="hljs-number">200</span>;

<span class="hljs-comment">// é”å®šé‡è¦åˆ—</span>
dataGridView_Data.Columns[<span class="hljs-number">0</span>].Frozen = <span class="hljs-literal">true</span>; <span class="hljs-comment">// é”å®šåˆ—</span>
dataGridView_Data.Columns[<span class="hljs-number">1</span>].Frozen = <span class="hljs-literal">true</span>; <span class="hljs-comment">// é”å®šåˆ—</span>
dataGridView_Data.Columns[<span class="hljs-number">2</span>].Frozen = <span class="hljs-literal">true</span>; <span class="hljs-comment">// é”å®šåˆ—</span>
dataGridView_Data.Columns[<span class="hljs-number">3</span>].Frozen = <span class="hljs-literal">true</span>; <span class="hljs-comment">// é”å®šåˆ—</span>
dataGridView_Data.Columns[<span class="hljs-number">4</span>].Frozen = <span class="hljs-literal">true</span>; <span class="hljs-comment">// é”å®šåˆ—</span>

<span class="hljs-comment">// æ·»åŠ å³é”®èœå•</span>
InitializeContextMenuStrip();

<span class="hljs-comment">// åˆ·æ–°è¡¨æ ¼</span>
dataGridView_Data.Refresh();

<span class="hljs-comment">// æ‰§è¡Œæ•°æ®æ›´æ–°æ“ä½œ</span>
UpdateTaxRates();<span class="hljs-comment">//åŒæ­¥å‘ç¥¨å·ç ç›¸åŒçš„ç¨ç‡</span>
UpdateItemName();<span class="hljs-comment">//åŒæ­¥å‘ç¥¨å·ç ç›¸åŒçš„é¡¹ç›®åç§°</span>
UpdateTaxCategories();<span class="hljs-comment">//åŒæ­¥å‘ç¥¨å·ç ç›¸åŒçš„ç¨æ”¶ç±»åˆ«</span>
UpdateCompanyNameOrTaxFileNumber();<span class="hljs-comment">//å¯¹è´­ä¹°æ–¹åç§°å’Œè´­ä¹°æ–¹ç¨å·ä¸é”€å”®æ–¹åç§°å’Œé”€å”®æ–¹ç¨å·è¿›è¡Œæ£€æµ‹äº’æ¢</span>

dataGridView_Data.Refresh();
</code></pre>
<h3 data-id="heading-33">12. å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-34">12.1 è¡Œåˆ é™¤æ—¶çš„ç´¢å¼•é—®é¢˜</h4>
<p><strong>é—®é¢˜</strong>ï¼šåˆ é™¤è¡Œæ—¶ï¼Œå¦‚æœä»å‰å‘åéå†ï¼Œä¼šå¯¼è‡´ç´¢å¼•é”™ä¹±ï¼Œæ— æ³•æ­£ç¡®åˆ é™¤æ‰€æœ‰ç›®æ ‡è¡Œã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šä»åå‘å‰éå†è¡Œï¼Œè¿™æ ·åˆ é™¤è¡Œä¸ä¼šå½±å“å‰©ä½™è¡Œçš„ç´¢å¼•ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ä»åå‘å‰éå†DataGridViewçš„æ¯ä¸€è¡Œï¼Œä»¥ä¾¿åˆ é™¤è¡Œæ—¶ä¸ä¼šå½±å“ç´¢å¼•</span>
<span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = dataGridView_Data.Rows.Count - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--)
{
    DataGridViewRow row = dataGridView_Data.Rows[i];
    <span class="hljs-comment">// åˆ é™¤è¡Œæ“ä½œ</span>
    dataGridView_Data.Rows.RemoveAt(i);
}
</code></pre>
<h4 data-id="heading-35">12.2 æ€§èƒ½é—®é¢˜</h4>
<p><strong>é—®é¢˜</strong>ï¼šå½“ DataGridView ä¸­æ•°æ®é‡è¾ƒå¤§æ—¶ï¼Œä¼šå‡ºç°å¡é¡¿ç°è±¡ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>å…³é—­è‡ªåŠ¨è°ƒæ•´åˆ—å®½</li>
<li>ä½¿ç”¨è™šæ‹ŸåŒ–æ¨¡å¼</li>
<li>åˆ†é¡µåŠ è½½æ•°æ®</li>
<li>å‡å°‘ä¸å¿…è¦çš„åˆ·æ–°æ“ä½œ</li>
</ol>
<h4 data-id="heading-36">12.3 æ•°æ®ç»‘å®šé—®é¢˜</h4>
<p><strong>é—®é¢˜</strong>ï¼šä¿®æ”¹æ•°æ®åï¼ŒDataGridView æ²¡æœ‰è‡ªåŠ¨æ›´æ–°ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>ä½¿ç”¨ BindingList ä½œä¸ºæ•°æ®æº</li>
<li>è°ƒç”¨ Refresh() æ–¹æ³•æ‰‹åŠ¨åˆ·æ–°</li>
<li>ç¡®ä¿æ•°æ®ç±»å®ç°äº† INotifyPropertyChanged æ¥å£</li>
</ol>
<h3 data-id="heading-37">13. æ€»ç»“</h3>
<p>DataGridView æ˜¯ C# WinForms ä¸­åŠŸèƒ½å¼ºå¤§çš„è¡¨æ ¼æ§ä»¶ï¼Œé€šè¿‡æœ¬æ–‡æ¡£ä»‹ç»çš„å„ç§æŠ€æœ¯å’Œæ–¹æ³•ï¼Œå¯ä»¥å®ç°å¤æ‚çš„è¡¨æ ¼æ•°æ®å±•ç¤ºã€ç¼–è¾‘ã€å¯¼å‡ºç­‰åŠŸèƒ½ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œéœ€è¦æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„é…ç½®å’Œå®ç°æ–¹å¼ï¼ŒåŒæ—¶æ³¨æ„æ€§èƒ½ä¼˜åŒ–å’Œç”¨æˆ·ä½“éªŒã€‚</p>
<p>æœ¬æ–‡æ¡£åŸºäºç”µå­å‘ç¥¨è§£æå·¥å…·é¡¹ç›®çš„å®é™…åº”ç”¨ï¼Œæ¶µç›–äº† DataGridView çš„æ ¸å¿ƒåŠŸèƒ½å’Œé«˜çº§ç”¨æ³•ï¼Œå¸Œæœ›å¯¹ C# WinForms å¼€å‘è€…æœ‰æ‰€å¸®åŠ©ã€‚</p>
<h3 data-id="heading-38">14. å‚è€ƒèµ„æ–™</h3>
<ol>
<li>Microsoft Docs: DataGridView æ§ä»¶</li>
<li>C# WinForms å¼€å‘æ–‡æ¡£</li>
<li>ç”µå­å‘ç¥¨è§£æå·¥å…·é¡¹ç›®æºç </li>
</ol>
<hr/>
<p><em>æ–‡æ¡£ç¼–å†™æ—¥æœŸï¼š2024å¹´</em>
<em>åŸºäº C# .NET Framework å¼€å‘</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SWIFTæŠ¥æ–‡éš¾è§£æï¼Ÿæ­ç§˜æ­£åˆ™è¡¨è¾¾å¼è‡ªåŠ¨åŒ–å¤„ç†æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7576838095518597171</link>    <guid>https://juejin.cn/post/7576838095518597171</guid>    <pubDate>2025-11-26T08:11:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576838095518597171" data-draft-id="7576608733612851226" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SWIFTæŠ¥æ–‡éš¾è§£æï¼Ÿæ­ç§˜æ­£åˆ™è¡¨è¾¾å¼è‡ªåŠ¨åŒ–å¤„ç†æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="è¿è¥,æ˜é‡‘æŠ€æœ¯å¾æ–‡"/> <meta itemprop="datePublished" content="2025-11-26T08:11:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜Ÿæäº’è”"/> <meta itemprop="url" content="https://juejin.cn/user/1370462103538153"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SWIFTæŠ¥æ–‡éš¾è§£æï¼Ÿæ­ç§˜æ­£åˆ™è¡¨è¾¾å¼è‡ªåŠ¨åŒ–å¤„ç†æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1370462103538153/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜Ÿæäº’è”
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T08:11:33.000Z" title="Wed Nov 26 2025 08:11:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¢«SWIFTæŠ¥æ–‡æ”¯é…çš„ææƒ§</p>
<p>å‡Œæ™¨3ç‚¹çš„åŠå…¬å®¤ï¼Œæ˜¾ç¤ºå™¨å†·å…‰æ‰“åœ¨æˆ‘å¸ƒæ»¡è¡€ä¸çš„çœ¼ç›ä¸Šã€‚ç¬¬ä¸ƒæ¬¡æ ¸å¯¹æ‰‹ä¸­çš„å¾·æ„å¿—é“¶è¡ŒSWIFTæŠ¥æ–‡å’ŒPayPaläº¤æ˜“è®°å½•æ—¶ï¼Œé‚£ä¸ªå§‹ç»ˆå¯¹ä¸ä¸Šçš„328.57æ¬§å…ƒå·®é¢ï¼Œåƒæ ¹å°–åˆºæ‰è¿›å¤ªé˜³ç©´ã€‚</p>
<p>è¿™å·²æ˜¯æœ¬å­£åº¦ç¬¬ä¸‰æ¬¡å› æ—¶å·®å¯¼è‡´çš„æ±‡ç‡æ³¢åŠ¨é€ æˆè´¦ç›®åå·®ã€‚è·¨å¢ƒç”µå•†ä¸šè´¢ä¼šäººå‘˜éƒ½æ‡‚è¿™ç§ç—›ï¼šå¤šæ—¶åŒºäº¤æ˜“è®°å½•ã€å®æ—¶å˜åŠ¨çš„æ±‡ç‡ã€äº”èŠ±å…«é—¨çš„æ•°æ®æ ¼å¼ï¼Œæ„æˆäº†è´¢åŠ¡å¯¹è´¦çš„ã€Œä¸å¯èƒ½ä¸‰è§’ã€ã€‚</p>
<p>![SWIFTæŠ¥æ–‡ä¸ç”µå•†å¹³å°è´¦å•å¯¹æ¯”å›¾]</p>
<p>ï¼ˆå›¾ç¤ºï¼šå·¦ä¾§æ˜¯åŠ å¯†çš„SWIFT MT940æŠ¥æ–‡ï¼Œå³ä¾§æ˜¯JSONæ ¼å¼çš„ç”µå•†å¹³å°äº¤æ˜“è®°å½•ï¼‰</p>
<p>ç›´åˆ°æˆ‘å¼€å‘å‡ºè¿™ä¸ªåŸºäºPythonçš„è‡ªåŠ¨åŒ–å¯¹è´¦ç³»ç»Ÿï¼Œå°†åŸæœ¬éœ€è¦8å°æ—¶çš„äººå·¥æ ¸å¯¹å‹ç¼©åˆ°30åˆ†é’Ÿã€‚æ ¸å¿ƒä»£ç ä¸åˆ°200è¡Œï¼Œå´å®ç°äº†ï¼š</p>
<pre><code class="hljs language-python" lang="python">
<span class="hljs-comment"># SWIFTæŠ¥æ–‡è§£ææ¨¡å—</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">parse_swift</span>(<span class="hljs-params">content</span>):

pattern = <span class="hljs-string">r':61:(\d{6})\d{4}(C|D)(\d+,\d{2})\n(?:.*\n)*?:86:(.*?)\n'</span>

<span class="hljs-keyword">return</span> pd.DataFrame(re.findall(pattern, content),

columns=[<span class="hljs-string">'date'</span>,<span class="hljs-string">'type'</span>,<span class="hljs-string">'amount'</span>,<span class="hljs-string">'description'</span>])

</code></pre>
<h3 data-id="heading-0">ä¸‰æ­¥æ„å»ºè‡ªåŠ¨åŒ–å·¥ä½œæµ</h3>
<p><strong>ç¬¬ä¸€æ­¥ï¼šå¤šæºæ•°æ®æ™ºèƒ½è§£æ</strong></p>
<p>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ„å»ºçš„SWIFTæŠ¥æ–‡è§£æå™¨ï¼Œèƒ½è‡ªåŠ¨æå–å…³é”®äº¤æ˜“å­—æ®µã€‚é’ˆå¯¹ä¸åŒé“¶è¡Œå®šåˆ¶åŒ–æ¨¡æ¿ï¼š</p>
<pre><code class="hljs language-python" lang="python">
<span class="hljs-comment"># èŠ±æ——é“¶è¡ŒCiti MT940æ¨¡æ¿</span>

citi_pattern = <span class="hljs-string">r':61:(\d{6})C?(\d{4})?(C|D)(\d+,\d{2})[A-Z]{3}'</span>

<span class="hljs-comment"># æ”¯ä»˜å®å›½é™…ç‰ˆè´¦å•å¤„ç†</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">parse_alipay</span>(<span class="hljs-params">json_file</span>):

df = pd.json_normalize(json_file[<span class="hljs-string">'transactions'</span>])

df[<span class="hljs-string">'amount'</span>] = df.apply(<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-string">'amount'</span>]*-<span class="hljs-number">1</span> <span class="hljs-keyword">if</span> x[<span class="hljs-string">'type'</span>]==<span class="hljs-string">'æ”¯å‡º'</span> <span class="hljs-keyword">else</span> x[<span class="hljs-string">'amount'</span>], axis=<span class="hljs-number">1</span>)

</code></pre>
<p><strong>ç¬¬äºŒæ­¥ï¼šå®æ—¶æ±‡ç‡åŠ¨æ€è½¬æ¢</strong></p>
<p>é€šè¿‡æ¬§æ´²å¤®è¡ŒAPIè·å–å®æ—¶æ±‡ç‡ï¼Œè‡ªåŠ¨è¿›è¡Œå¤šå¸ç§è½¬æ¢ï¼š</p>
<pre><code class="hljs language-python" lang="python">
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime

<span class="hljs-keyword">import</span> requests

<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_exchange_rate</span>(<span class="hljs-params">date, base=<span class="hljs-string">'EUR'</span>, target=<span class="hljs-string">'CNY'</span></span>):

url = <span class="hljs-string">f'&lt;https://api.exchangerate.host/&gt;<span class="hljs-subst">{date.strftime(<span class="hljs-string">"%Y-%m-%d"</span>)}</span>'</span>

response = requests.get(url).json()

<span class="hljs-keyword">return</span> response[<span class="hljs-string">'rates'</span>][target]/response[<span class="hljs-string">'rates'</span>][base]

</code></pre>
<p><strong>ç¬¬ä¸‰æ­¥ï¼šæ™ºèƒ½å·®å¼‚å®šä½ç³»ç»Ÿ</strong></p>
<pre><code class="hljs language-python" lang="python">
<span class="hljs-keyword">def</span> <span class="hljs-title function_">detect_discrepancies</span>(<span class="hljs-params">bank_df, platform_df</span>):

merged = pd.merge(bank_df, platform_df, on=<span class="hljs-string">'transaction_id'</span>, how=<span class="hljs-string">'outer'</span>)

anomalies = merged[<span class="hljs-built_in">abs</span>(merged[<span class="hljs-string">'amount_bank'</span>] - merged[<span class="hljs-string">'amount_platform'</span>]) &gt; <span class="hljs-number">0.01</span>]

<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> anomalies.empty:

send_alert_email(anomalies)

<span class="hljs-keyword">return</span> anomalies.to_html()

<span class="hljs-keyword">return</span> <span class="hljs-string">"All transactions matched"</span>

</code></pre>
<h3 data-id="heading-1">å¯è§†åŒ–å¯¹è´¦æŠ¥å‘Šç”Ÿæˆ</h3>
<p>åœ¨Jupyter Notebookä¸­é›†æˆPlotlyï¼Œè‡ªåŠ¨ç”Ÿæˆäº¤äº’å¼å¯¹è´¦æŠ¥å‘Šï¼š</p>
<pre><code class="hljs language-python" lang="python">
<span class="hljs-keyword">import</span> plotly.express <span class="hljs-keyword">as</span> px

<span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_report</span>(<span class="hljs-params">df</span>):

fig = px.timeline(df, x_start=<span class="hljs-string">'date'</span>, x_end=<span class="hljs-string">'date'</span>, y=<span class="hljs-string">'platform'</span>,

color=<span class="hljs-string">'status'</span>, title=<span class="hljs-string">'è·¨å¢ƒäº¤æ˜“æ ¸å¯¹æ—¶é—´è½´'</span>)

fig.update_yaxes(categoryorder=<span class="hljs-string">'total ascending'</span>)

<span class="hljs-keyword">return</span> fig.show()

</code></pre>
<p>ï¼ˆå±å¹•æˆªå›¾ï¼šçº¢ç»¿æ ‡è®°çš„è‡ªåŠ¨å¯¹è´¦æ—¶é—´è½´ï¼Œå¼‚å¸¸äº¤æ˜“é«˜äº®æ˜¾ç¤ºï¼‰</p>
<h3 data-id="heading-2">å¼‚å¸¸å¤„ç†è‡ªåŠ¨åŒ–å‡çº§</h3>
<p>å½“æ£€æµ‹åˆ°è¶…è¿‡24å°æ—¶æœªåŒ¹é…çš„äº¤æ˜“æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨è§¦å‘é‚®ä»¶è­¦æŠ¥ï¼š</p>
<pre><code class="hljs language-python" lang="python">
<span class="hljs-keyword">import</span> smtplib

<span class="hljs-keyword">from</span> email.mime.text <span class="hljs-keyword">import</span> MIMEText

<span class="hljs-keyword">def</span> <span class="hljs-title function_">send_alert_email</span>(<span class="hljs-params">anomalies</span>):

msg = MIMEText(anomalies.to_html(), <span class="hljs-string">'html'</span>)

msg[<span class="hljs-string">'Subject'</span>] = <span class="hljs-string">f'[ç´§æ€¥]å‘ç°<span class="hljs-subst">{<span class="hljs-built_in">len</span>(anomalies)}</span>ç¬”å¼‚å¸¸äº¤æ˜“'</span>

server = smtplib.SMTP(<span class="hljs-string">'[smtp.office365.com](http://smtp.office365.com)'</span>, <span class="hljs-number">587</span>)

server.starttls()

server.login(<span class="hljs-string">'&lt;auto_alert@company.com&gt;'</span>, <span class="hljs-string">'password'</span>)

server.sendmail(from_addr=<span class="hljs-string">'&lt;auto_alert@company.com&gt;'</span>,

to_addrs=[<span class="hljs-string">'&lt;finance@company.com&gt;'</span>,<span class="hljs-string">'&lt;cto@company.com&gt;'</span>],

msg=msg.as_string())

</code></pre>
<p>è¿™å¥—ç³»ç»Ÿä¸Šçº¿åï¼Œæˆ‘ä»¬æ¬§æ´²åˆ†éƒ¨çš„è´¢åŠ¡äººå‘˜ç»ˆäºä¸ç”¨å†å®šå‡Œæ™¨é—¹é’Ÿæ ¸å¯¹è´¦ç›®ã€‚æœ€æ–°æ•°æ®æ˜¾ç¤ºï¼Œè‡ªåŠ¨åŒ–å¤„ç†ä½¿è·¨å¢ƒäº¤æ˜“æ ¸å¯¹å‡†ç¡®ç‡ä»87%æå‡è‡³99.6%ï¼Œæ¯æœˆä¸ºè´¢åŠ¡éƒ¨é—¨èŠ‚çœè¶…è¿‡200äººå·¥å°æ—¶ã€‚</p>
<h2 data-id="heading-3">æ ‡ç­¾</h2>
<p>#Pythonè‡ªåŠ¨åŒ– #è·¨å¢ƒè´¢æŠ¥ #SWIFTæŠ¥æ–‡å¤„ç† #å®æ—¶æ±‡ç‡æ¢ç®— #Jupyterå¯è§†åŒ–</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[KotlinÂ `by`å…³é”®å­—ç‰¹æ€§æ·±åº¦è§£æ]]></title>    <link>https://juejin.cn/post/7576827115967643683</link>    <guid>https://juejin.cn/post/7576827115967643683</guid>    <pubDate>2025-11-26T08:17:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576827115967643683" data-draft-id="7576681897297559567" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="KotlinÂ `by`å…³é”®å­—ç‰¹æ€§æ·±åº¦è§£æ"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2025-11-26T08:17:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£å†·"/> <meta itemprop="url" content="https://juejin.cn/user/3843548379091742"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            KotlinÂ `by`å…³é”®å­—ç‰¹æ€§æ·±åº¦è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3843548379091742/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£å†·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T08:17:03.000Z" title="Wed Nov 26 2025 08:17:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">KotlinÂ <code>by</code>å…³é”®å­—ç‰¹æ€§æ·±åº¦è§£æ</h2>
<p>ä¸‹é¢æˆ‘å°†å¯¹Â <code>by</code>å…³é”®å­—çš„æ¯ä¸ªä¼˜åŠ¿ç‰¹æ€§è¿›è¡Œè¯¦ç»†è®²è§£å’Œä»£ç æ¼”ç¤ºã€‚</p>
<h3 data-id="heading-1">1. ç®€åŒ–ä»£ç ï¼šé€šè¿‡å§”æ‰˜å‡å°‘æ ·æ¿ä»£ç </h3>
<h4 data-id="heading-2">ä¼ ç»Ÿæ–¹å¼ vs å§”æ‰˜æ–¹å¼å¯¹æ¯”</h4>
<h5 data-id="heading-3">ä¼ ç»Ÿå®ç°ï¼šå¤§é‡æ ·æ¿ä»£ç </h5>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä¼ ç»Ÿæ–¹å¼ï¼šéœ€è¦æ‰‹åŠ¨å®ç°æ‰€æœ‰æ–¹æ³•</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">DataStorage</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">save</span><span class="hljs-params">(<span class="hljs-keyword">data</span>: <span class="hljs-type">String</span>)</span></span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">load</span><span class="hljs-params">()</span></span>: String?
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">clear</span><span class="hljs-params">()</span></span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleDataStorage</span> : <span class="hljs-type">DataStorage</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> storedData: String? = <span class="hljs-literal">null</span>
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">save</span><span class="hljs-params">(<span class="hljs-keyword">data</span>: <span class="hljs-type">String</span>)</span></span> {
        storedData = <span class="hljs-keyword">data</span>
        println(<span class="hljs-string">"æ•°æ®å·²ä¿å­˜: <span class="hljs-variable">$data</span>"</span>)
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">load</span><span class="hljs-params">()</span></span>: String? {
        println(<span class="hljs-string">"åŠ è½½æ•°æ®: <span class="hljs-variable">$storedData</span>"</span>)
        <span class="hljs-keyword">return</span> storedData
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">clear</span><span class="hljs-params">()</span></span> {
        println(<span class="hljs-string">"æ¸…ç©ºæ•°æ®"</span>)
        storedData = <span class="hljs-literal">null</span>
    }
}

<span class="hljs-comment">// æ·»åŠ æ—¥å¿—åŠŸèƒ½çš„ä¼ ç»Ÿæ–¹å¼</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">LoggingDataStorage</span> : <span class="hljs-type">DataStorage</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> storage = SimpleDataStorage()
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">save</span><span class="hljs-params">(<span class="hljs-keyword">data</span>: <span class="hljs-type">String</span>)</span></span> {
        println(<span class="hljs-string">"[LOG] å¼€å§‹ä¿å­˜æ•°æ®"</span>)
        storage.save(<span class="hljs-keyword">data</span>)
        println(<span class="hljs-string">"[LOG] æ•°æ®ä¿å­˜å®Œæˆ"</span>)
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">load</span><span class="hljs-params">()</span></span>: String? {
        println(<span class="hljs-string">"[LOG] å¼€å§‹åŠ è½½æ•°æ®"</span>)
        <span class="hljs-keyword">val</span> result = storage.load()
        println(<span class="hljs-string">"[LOG] æ•°æ®åŠ è½½å®Œæˆ"</span>)
        <span class="hljs-keyword">return</span> result
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">clear</span><span class="hljs-params">()</span></span> {
        println(<span class="hljs-string">"[LOG] å¼€å§‹æ¸…ç©ºæ•°æ®"</span>)
        storage.clear()
        println(<span class="hljs-string">"[LOG] æ•°æ®æ¸…ç©ºå®Œæˆ"</span>)
    }
}
</code></pre>
<h5 data-id="heading-4">å§”æ‰˜æ–¹å¼ï¼šä»£ç å¤§å¹…ç®€åŒ–</h5>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä½¿ç”¨å§”æ‰˜ï¼šåªéœ€é‡å†™éœ€è¦ä¿®æ”¹çš„æ–¹æ³•</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">LoggingDataStorageBy</span>(delegate: DataStorage) : DataStorage <span class="hljs-keyword">by</span> delegate {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">save</span><span class="hljs-params">(<span class="hljs-keyword">data</span>: <span class="hljs-type">String</span>)</span></span> {
        println(<span class="hljs-string">"[LOG] å¼€å§‹ä¿å­˜æ•°æ®"</span>)
        delegate.save(<span class="hljs-keyword">data</span>)  <span class="hljs-comment">// è‡ªåŠ¨å§”æ‰˜ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨å…¶ä»–æ–¹æ³•</span>
        println(<span class="hljs-string">"[LOG] æ•°æ®ä¿å­˜å®Œæˆ"</span>)
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">load</span><span class="hljs-params">()</span></span>: String? {
        println(<span class="hljs-string">"[LOG] å¼€å§‹åŠ è½½æ•°æ®"</span>)
        <span class="hljs-keyword">val</span> result = delegate.load()
        println(<span class="hljs-string">"[LOG] æ•°æ®åŠ è½½å®Œæˆ: <span class="hljs-variable">$result</span>"</span>)
        <span class="hljs-keyword">return</span> result
    }
    
    <span class="hljs-comment">// clear() æ–¹æ³•ä¸éœ€è¦ä¿®æ”¹ï¼Œè‡ªåŠ¨å§”æ‰˜ç»™åº•å±‚å¯¹è±¡</span>
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">demonstrateCodeReduction</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> simpleStorage = SimpleDataStorage()
    <span class="hljs-keyword">val</span> loggingStorage = LoggingDataStorageBy(simpleStorage)
    
    loggingStorage.save(<span class="hljs-string">"Hello World"</span>)
    loggingStorage.load()
    loggingStorage.clear()  <span class="hljs-comment">// è‡ªåŠ¨å§”æ‰˜ï¼Œæ— éœ€é¢å¤–ä»£ç </span>
}
</code></pre>
<p><strong>ä»£ç ç®€åŒ–æ•ˆæœï¼š</strong></p>
<ul>
<li>ä¼ ç»Ÿæ–¹å¼ï¼šéœ€è¦å®ç° 3 ä¸ªæ–¹æ³•ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½è¦æ‰‹åŠ¨å§”æ‰˜</li>
<li>å§”æ‰˜æ–¹å¼ï¼šåªéœ€é‡å†™ 2 ä¸ªéœ€è¦ä¿®æ”¹çš„æ–¹æ³•ï¼Œ1 ä¸ªæ–¹æ³•è‡ªåŠ¨å§”æ‰˜</li>
<li>ä»£ç é‡å‡å°‘çº¦ 40%</li>
</ul>
<h3 data-id="heading-5">2. æé«˜å¤ç”¨æ€§ï¼šå°†é€šç”¨é€»è¾‘å°è£…åœ¨å§”æ‰˜ä¸­</h3>
<h4 data-id="heading-6">å¯å¤ç”¨çš„éªŒè¯é€»è¾‘å§”æ‰˜</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlin.reflect.KProperty
<span class="hljs-keyword">import</span> kotlin.properties.ReadWriteProperty

<span class="hljs-comment">// å¯å¤ç”¨çš„èŒƒå›´éªŒè¯å§”æ‰˜</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">RangeDelegate</span>&lt;<span class="hljs-type">T : Comparable&lt;T</span>&gt;&gt;(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> min: T,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> max: T,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> value: T
) : ReadWriteProperty&lt;Any, T&gt; {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getValue</span><span class="hljs-params">(thisRef: <span class="hljs-type">Any</span>, property: <span class="hljs-type">KProperty</span>&lt;*&gt;)</span></span>: T {
        <span class="hljs-keyword">return</span> value
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setValue</span><span class="hljs-params">(thisRef: <span class="hljs-type">Any</span>, property: <span class="hljs-type">KProperty</span>&lt;*&gt;, value: <span class="hljs-type">T</span>)</span></span> {
        require(value <span class="hljs-keyword">in</span> min..max) { 
            <span class="hljs-string">"<span class="hljs-subst">${property.name}</span> å¿…é¡»åœ¨ <span class="hljs-variable">$min</span> åˆ° <span class="hljs-variable">$max</span> ä¹‹é—´ï¼Œå½“å‰å€¼: <span class="hljs-variable">$value</span>"</span> 
        }
        <span class="hljs-keyword">this</span>.value = value
    }
}

<span class="hljs-comment">// å¯å¤ç”¨çš„éç©ºéªŒè¯å§”æ‰˜</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">NotNullDelegate</span>&lt;<span class="hljs-type">T : Any</span>&gt;(<span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> value: T? = <span class="hljs-literal">null</span>) : ReadWriteProperty&lt;Any, T&gt; {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getValue</span><span class="hljs-params">(thisRef: <span class="hljs-type">Any</span>, property: <span class="hljs-type">KProperty</span>&lt;*&gt;)</span></span>: T {
        <span class="hljs-keyword">return</span> value ?: <span class="hljs-keyword">throw</span> IllegalStateException(<span class="hljs-string">"<span class="hljs-subst">${property.name}</span> æœªåˆå§‹åŒ–"</span>)
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setValue</span><span class="hljs-params">(thisRef: <span class="hljs-type">Any</span>, property: <span class="hljs-type">KProperty</span>&lt;*&gt;, value: <span class="hljs-type">T</span>)</span></span> {
        <span class="hljs-keyword">this</span>.value = value
    }
}

<span class="hljs-comment">// åœ¨å¤šä¸ªç±»ä¸­å¤ç”¨ç›¸åŒçš„å§”æ‰˜é€»è¾‘</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-keyword">var</span> age: <span class="hljs-built_in">Int</span> <span class="hljs-keyword">by</span> RangeDelegate(<span class="hljs-number">0</span>, <span class="hljs-number">150</span>, <span class="hljs-number">25</span>)        <span class="hljs-comment">// å¹´é¾„èŒƒå›´éªŒè¯</span>
    <span class="hljs-keyword">var</span> name: String <span class="hljs-keyword">by</span> NotNullDelegate()           <span class="hljs-comment">// éç©ºéªŒè¯</span>
    <span class="hljs-keyword">var</span> email: String <span class="hljs-keyword">by</span> NotNullDelegate()          <span class="hljs-comment">// å¤ç”¨éç©ºéªŒè¯</span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span> {
    <span class="hljs-keyword">var</span> price: <span class="hljs-built_in">Double</span> <span class="hljs-keyword">by</span> RangeDelegate(<span class="hljs-number">0.0</span>, <span class="hljs-number">100000.0</span>, <span class="hljs-number">0.0</span>)  <span class="hljs-comment">// ä»·æ ¼èŒƒå›´éªŒè¯</span>
    <span class="hljs-keyword">var</span> quantity: <span class="hljs-built_in">Int</span> <span class="hljs-keyword">by</span> RangeDelegate(<span class="hljs-number">0</span>, <span class="hljs-number">1000</span>, <span class="hljs-number">0</span>)         <span class="hljs-comment">// æ•°é‡èŒƒå›´éªŒè¯</span>
    <span class="hljs-keyword">var</span> sku: String <span class="hljs-keyword">by</span> NotNullDelegate()                   <span class="hljs-comment">// å¤ç”¨éç©ºéªŒè¯</span>
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">demonstrateReusability</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> user = User()
    user.name = <span class="hljs-string">"å¼ ä¸‰"</span>
    user.age = <span class="hljs-number">30</span>  <span class="hljs-comment">// æ­£å¸¸</span>
    <span class="hljs-comment">// user.age = 200 // æŠ›å‡ºå¼‚å¸¸ï¼šå¹´é¾„å¿…é¡»åœ¨ 0 åˆ° 150 ä¹‹é—´</span>
    
    <span class="hljs-keyword">val</span> product = Product()
    product.price = <span class="hljs-number">99.99</span>
    product.quantity = <span class="hljs-number">50</span>
    <span class="hljs-comment">// product.quantity = -1 // æŠ›å‡ºå¼‚å¸¸ï¼šæ•°é‡å¿…é¡»åœ¨ 0 åˆ° 1000 ä¹‹é—´</span>
}
</code></pre>
<h4 data-id="heading-7">é…ç½®ç®¡ç†çš„å¤ç”¨</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å¯å¤ç”¨çš„é…ç½®ç®¡ç†å§”æ‰˜</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ConfigDelegate</span>&lt;<span class="hljs-type">T</span>&gt;(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> configKey: String,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> defaultValue: T
) : ReadWriteProperty&lt;Any, T&gt; {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> preferences <span class="hljs-keyword">by</span> lazy {
        <span class="hljs-comment">// æ¨¡æ‹Ÿé…ç½®å­˜å‚¨</span>
        mutableMapOf&lt;String, Any&gt;()
    }
    
    <span class="hljs-meta">@Suppress(<span class="hljs-string">"UNCHECKED_CAST"</span>)</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getValue</span><span class="hljs-params">(thisRef: <span class="hljs-type">Any</span>, property: <span class="hljs-type">KProperty</span>&lt;*&gt;)</span></span>: T {
        <span class="hljs-keyword">return</span> preferences[configKey] <span class="hljs-keyword">as</span>? T ?: defaultValue
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setValue</span><span class="hljs-params">(thisRef: <span class="hljs-type">Any</span>, property: <span class="hljs-type">KProperty</span>&lt;*&gt;, value: <span class="hljs-type">T</span>)</span></span> {
        preferences[configKey] = value
        println(<span class="hljs-string">"é…ç½®å·²æ›´æ–°: <span class="hljs-variable">$configKey</span> = <span class="hljs-variable">$value</span>"</span>)
    }
}

<span class="hljs-comment">// åœ¨å¤šä¸ªé…ç½®ç±»ä¸­å¤ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AppSettings</span> {
    <span class="hljs-keyword">var</span> theme: String <span class="hljs-keyword">by</span> ConfigDelegate(<span class="hljs-string">"app_theme"</span>, <span class="hljs-string">"light"</span>)
    <span class="hljs-keyword">var</span> language: String <span class="hljs-keyword">by</span> ConfigDelegate(<span class="hljs-string">"app_language"</span>, <span class="hljs-string">"zh-CN"</span>)
    <span class="hljs-keyword">var</span> notificationsEnabled: <span class="hljs-built_in">Boolean</span> <span class="hljs-keyword">by</span> ConfigDelegate(<span class="hljs-string">"notifications"</span>, <span class="hljs-literal">true</span>)
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserPreferences</span> {
    <span class="hljs-keyword">var</span> fontSize: <span class="hljs-built_in">Int</span> <span class="hljs-keyword">by</span> ConfigDelegate(<span class="hljs-string">"font_size"</span>, <span class="hljs-number">14</span>)
    <span class="hljs-keyword">var</span> darkMode: <span class="hljs-built_in">Boolean</span> <span class="hljs-keyword">by</span> ConfigDelegate(<span class="hljs-string">"dark_mode"</span>, <span class="hljs-literal">false</span>)
    <span class="hljs-keyword">var</span> autoSave: <span class="hljs-built_in">Boolean</span> <span class="hljs-keyword">by</span> ConfigDelegate(<span class="hljs-string">"auto_save"</span>, <span class="hljs-literal">true</span>)
}
</code></pre>
<h3 data-id="heading-8">3. å¢å¼ºå¯è¯»æ€§ï¼šä½¿ä»£ç æ„å›¾æ›´åŠ æ¸…æ™°</h3>
<h4 data-id="heading-9">å£°æ˜å¼ç¼–ç¨‹ vs å‘½ä»¤å¼ç¼–ç¨‹</h4>
<h5 data-id="heading-10">å‘½ä»¤å¼ç¼–ç¨‹ï¼ˆå¯è¯»æ€§å·®ï¼‰</h5>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">UserManager</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> _userData: String? = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> _isInitialized = <span class="hljs-literal">false</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> _lastAccessTime: <span class="hljs-built_in">Long</span> = <span class="hljs-number">0</span>
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getUserData</span><span class="hljs-params">()</span></span>: String? {
        <span class="hljs-keyword">if</span> (!_isInitialized) {
            <span class="hljs-keyword">throw</span> IllegalStateException(<span class="hljs-string">"UserManager æœªåˆå§‹åŒ–"</span>)
        }
        _lastAccessTime = System.currentTimeMillis()
        <span class="hljs-keyword">return</span> _userData
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setUserData</span><span class="hljs-params">(<span class="hljs-keyword">data</span>: <span class="hljs-type">String</span>?)</span></span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">data</span> != <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-keyword">data</span>.length &gt; <span class="hljs-number">100</span>) {
            <span class="hljs-keyword">throw</span> IllegalArgumentException(<span class="hljs-string">"ç”¨æˆ·æ•°æ®è¿‡é•¿"</span>)
        }
        _userData = <span class="hljs-keyword">data</span>
        _lastAccessTime = System.currentTimeMillis()
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">initialize</span><span class="hljs-params">()</span></span> {
        _isInitialized = <span class="hljs-literal">true</span>
        _lastAccessTime = System.currentTimeMillis()
    }
}
</code></pre>
<h5 data-id="heading-11">å£°æ˜å¼ç¼–ç¨‹ï¼ˆå¯è¯»æ€§å¥½ï¼‰</h5>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ReadableUserManager</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> _userData: String? <span class="hljs-keyword">by</span> NotNullDelegate()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> _isInitialized: <span class="hljs-built_in">Boolean</span> <span class="hljs-keyword">by</span> NotNullDelegate()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> _lastAccessTime: <span class="hljs-built_in">Long</span> <span class="hljs-keyword">by</span> NotNullDelegate()
    
    <span class="hljs-comment">// ä½¿ç”¨å§”æ‰˜æ˜ç¡®è¡¨è¾¾æ„å›¾</span>
    <span class="hljs-keyword">var</span> userData: String? <span class="hljs-keyword">by</span> ::_userData
        .validate { it == <span class="hljs-literal">null</span> || it.length &lt;= <span class="hljs-number">100</span> }  <span class="hljs-comment">// éªŒè¯é€»è¾‘æ¸…æ™°</span>
        .observable { old, new -&gt; 
            println(<span class="hljs-string">"ç”¨æˆ·æ•°æ®ä» '<span class="hljs-variable">$old</span>' å˜ä¸º '<span class="hljs-variable">$new</span>'"</span>) 
        }
    
    <span class="hljs-keyword">val</span> isInitialized: <span class="hljs-built_in">Boolean</span> <span class="hljs-keyword">by</span> ::_isInitialized
    <span class="hljs-keyword">val</span> lastAccessTime: <span class="hljs-built_in">Long</span> <span class="hljs-keyword">by</span> ::_lastAccessTime
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">initialize</span><span class="hljs-params">()</span></span> {
        _isInitialized = <span class="hljs-literal">true</span>
        _lastAccessTime = System.currentTimeMillis()
    }
}

<span class="hljs-comment">// æ‰©å±•å‡½æ•°å¢å¼ºå¯è¯»æ€§</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> ReadWriteProperty<span class="hljs-type">&lt;Any, T&gt;</span>.<span class="hljs-title">validate</span><span class="hljs-params">(validator: (<span class="hljs-type">T</span>) -&gt; <span class="hljs-type">Boolean</span>)</span></span> = 
    <span class="hljs-keyword">object</span> : ReadWriteProperty&lt;Any, T&gt; {
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getValue</span><span class="hljs-params">(thisRef: <span class="hljs-type">Any</span>, property: <span class="hljs-type">KProperty</span>&lt;*&gt;)</span></span>: T {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span><span class="hljs-symbol">@validate</span>.getValue(thisRef, property)
        }
        
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setValue</span><span class="hljs-params">(thisRef: <span class="hljs-type">Any</span>, property: <span class="hljs-type">KProperty</span>&lt;*&gt;, value: <span class="hljs-type">T</span>)</span></span> {
            require(validator(value)) { <span class="hljs-string">"éªŒè¯å¤±è´¥: <span class="hljs-subst">${property.name}</span> = <span class="hljs-variable">$value</span>"</span> }
            <span class="hljs-keyword">this</span><span class="hljs-symbol">@validate</span>.setValue(thisRef, property, value)
        }
    }

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> ReadWriteProperty<span class="hljs-type">&lt;Any, T&gt;</span>.<span class="hljs-title">observable</span><span class="hljs-params">(onChange: (<span class="hljs-type">old</span>: <span class="hljs-type">T</span>, <span class="hljs-type">new</span>: <span class="hljs-type">T</span>) -&gt; <span class="hljs-type">Unit</span>)</span></span> = 
    <span class="hljs-keyword">object</span> : ReadWriteProperty&lt;Any, T&gt; {
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getValue</span><span class="hljs-params">(thisRef: <span class="hljs-type">Any</span>, property: <span class="hljs-type">KProperty</span>&lt;*&gt;)</span></span>: T {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span><span class="hljs-symbol">@observable</span>.getValue(thisRef, property)
        }
        
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setValue</span><span class="hljs-params">(thisRef: <span class="hljs-type">Any</span>, property: <span class="hljs-type">KProperty</span>&lt;*&gt;, value: <span class="hljs-type">T</span>)</span></span> {
            <span class="hljs-keyword">val</span> oldValue = <span class="hljs-keyword">this</span><span class="hljs-symbol">@observable</span>.getValue(thisRef, property)
            <span class="hljs-keyword">this</span><span class="hljs-symbol">@observable</span>.setValue(thisRef, property, value)
            onChange(oldValue, value)
        }
    }
</code></pre>
<h4 data-id="heading-12">ä¸šåŠ¡é€»è¾‘çš„æ¸…æ™°è¡¨è¾¾</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä½¿ç”¨å§”æ‰˜è®©ä¸šåŠ¡é€»è¾‘æ›´åŠ æ¸…æ™°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BankAccount</span> {
    <span class="hljs-comment">// ä½™é¢ï¼šè‡ªåŠ¨è®°å½•äº¤æ˜“å†å²</span>
    <span class="hljs-keyword">var</span> balance: <span class="hljs-built_in">Double</span> <span class="hljs-keyword">by</span> TransactionalDelegate(<span class="hljs-number">0.0</span>)
    
    <span class="hljs-comment">// è´¦æˆ·çŠ¶æ€ï¼šæœ‰æ˜ç¡®çš„ä¸šåŠ¡è§„åˆ™</span>
    <span class="hljs-keyword">var</span> status: AccountStatus <span class="hljs-keyword">by</span> ValidatedDelegate(AccountStatus.ACTIVE) { newStatus -&gt;
        <span class="hljs-keyword">when</span> (newStatus) {
            AccountStatus.FROZEN -&gt; balance &gt;= <span class="hljs-number">0</span>  <span class="hljs-comment">// åªæœ‰éè´Ÿä½™é¢æ‰èƒ½å†»ç»“</span>
            AccountStatus.CLOSED -&gt; balance == <span class="hljs-number">0.0</span> <span class="hljs-comment">// åªæœ‰é›¶ä½™é¢æ‰èƒ½å…³é—­</span>
            <span class="hljs-keyword">else</span> -&gt; <span class="hljs-literal">true</span>
        }
    }
}

<span class="hljs-keyword">enum</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AccountStatus</span> { ACTIVE, FROZEN, CLOSED }

<span class="hljs-keyword">class</span> <span class="hljs-title class_">TransactionalDelegate</span>&lt;<span class="hljs-type">T</span>&gt;(initialValue: T) : ReadWriteProperty&lt;Any, T&gt; {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> value: T = initialValue
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> transactionHistory = mutableListOf&lt;String&gt;()
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getValue</span><span class="hljs-params">(thisRef: <span class="hljs-type">Any</span>, property: <span class="hljs-type">KProperty</span>&lt;*&gt;)</span></span>: T = value
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setValue</span><span class="hljs-params">(thisRef: <span class="hljs-type">Any</span>, property: <span class="hljs-type">KProperty</span>&lt;*&gt;, value: <span class="hljs-type">T</span>)</span></span> {
        <span class="hljs-keyword">val</span> oldValue = <span class="hljs-keyword">this</span>.value
        <span class="hljs-keyword">this</span>.value = value
        transactionHistory.add(<span class="hljs-string">"<span class="hljs-subst">${property.name}</span>: <span class="hljs-variable">$oldValue</span> -&gt; <span class="hljs-variable">$value</span>"</span>)
        println(<span class="hljs-string">"äº¤æ˜“è®°å½•: <span class="hljs-subst">${transactionHistory.last()}</span>"</span>)
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ValidatedDelegate</span>&lt;<span class="hljs-type">T</span>&gt;(
    initialValue: T,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> validator: (T) -&gt; <span class="hljs-built_in">Boolean</span>
) : ReadWriteProperty&lt;Any, T&gt; {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> value: T = initialValue
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getValue</span><span class="hljs-params">(thisRef: <span class="hljs-type">Any</span>, property: <span class="hljs-type">KProperty</span>&lt;*&gt;)</span></span>: T = value
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setValue</span><span class="hljs-params">(thisRef: <span class="hljs-type">Any</span>, property: <span class="hljs-type">KProperty</span>&lt;*&gt;, value: <span class="hljs-type">T</span>)</span></span> {
        require(validator(value)) { 
            <span class="hljs-string">"ä¸šåŠ¡è§„åˆ™éªŒè¯å¤±è´¥: ä¸èƒ½å°† <span class="hljs-subst">${property.name}</span> è®¾ç½®ä¸º <span class="hljs-variable">$value</span>"</span> 
        }
        <span class="hljs-keyword">this</span>.value = value
    }
}
</code></pre>
<h3 data-id="heading-13">4. æ”¯æŒå¤šç§æ¨¡å¼</h3>
<h4 data-id="heading-14">4.1 ç±»å§”æ‰˜æ¨¡å¼</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ç±»å§”æ‰˜çš„å¤šç§åº”ç”¨åœºæ™¯</span>

<span class="hljs-comment">// åœºæ™¯1ï¼šæ¥å£å®ç°å§”æ‰˜</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Logger</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">debug</span><span class="hljs-params">(message: <span class="hljs-type">String</span>)</span></span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">info</span><span class="hljs-params">(message: <span class="hljs-type">String</span>)</span></span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">error</span><span class="hljs-params">(message: <span class="hljs-type">String</span>)</span></span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ConsoleLogger</span> : <span class="hljs-type">Logger</span> {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">debug</span><span class="hljs-params">(message: <span class="hljs-type">String</span>)</span></span> = println(<span class="hljs-string">"[DEBUG] <span class="hljs-variable">$message</span>"</span>)
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">info</span><span class="hljs-params">(message: <span class="hljs-type">String</span>)</span></span> = println(<span class="hljs-string">"[INFO] <span class="hljs-variable">$message</span>"</span>)
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">error</span><span class="hljs-params">(message: <span class="hljs-type">String</span>)</span></span> = println(<span class="hljs-string">"[ERROR] <span class="hljs-variable">$message</span>"</span>)
}

<span class="hljs-comment">// å¢å¼ºçš„æ—¥å¿—å™¨ï¼šåªé‡å†™éœ€è¦ä¿®æ”¹çš„æ–¹æ³•</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">EnhancedLogger</span>(logger: Logger) : Logger <span class="hljs-keyword">by</span> logger {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">error</span><span class="hljs-params">(message: <span class="hljs-type">String</span>)</span></span> {
        println(<span class="hljs-string">"[TIMESTAMP] <span class="hljs-subst">${System.currentTimeMillis()}</span>"</span>)
        logger.error(<span class="hljs-string">"å¢å¼ºé”™è¯¯: <span class="hljs-variable">$message</span>"</span>)
    }
    
    <span class="hljs-comment">// debug å’Œ info æ–¹æ³•è‡ªåŠ¨å§”æ‰˜</span>
}

<span class="hljs-comment">// åœºæ™¯2ï¼šå¤šæ¥å£å§”æ‰˜</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Serializable</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">serialize</span><span class="hljs-params">()</span></span>: String
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Deserializable</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">deserialize</span><span class="hljs-params">(<span class="hljs-keyword">data</span>: <span class="hljs-type">String</span>)</span></span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">DataProcessor</span> : <span class="hljs-type">Logger</span> <span class="hljs-title">by</span> <span class="hljs-title">ConsoleLogger</span>(), Serializable, Deserializable {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> <span class="hljs-keyword">data</span>: String = <span class="hljs-string">""</span>
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">serialize</span><span class="hljs-params">()</span></span>: String = <span class="hljs-keyword">data</span>
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">deserialize</span><span class="hljs-params">(<span class="hljs-keyword">data</span>: <span class="hljs-type">String</span>)</span></span> {
        <span class="hljs-keyword">this</span>.<span class="hljs-keyword">data</span> = <span class="hljs-keyword">data</span>
        info(<span class="hljs-string">"æ•°æ®ååºåˆ—åŒ–å®Œæˆ: <span class="hljs-subst">${data.length}</span> å­—ç¬¦"</span>)
    }
}
</code></pre>
<h4 data-id="heading-15">4.2 å±æ€§å§”æ‰˜æ¨¡å¼</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å¤šç§å±æ€§å§”æ‰˜åº”ç”¨</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">PropertyDelegationExamples</span> {
    <span class="hljs-comment">// å»¶è¿Ÿåˆå§‹åŒ–</span>
    <span class="hljs-keyword">val</span> expensiveResource: ExpensiveResource <span class="hljs-keyword">by</span> lazy {
        println(<span class="hljs-string">"åˆå§‹åŒ–æ˜‚è´µèµ„æº..."</span>)
        ExpensiveResource()
    }
    
    <span class="hljs-comment">// å¯è§‚å¯Ÿå±æ€§</span>
    <span class="hljs-keyword">var</span> username: String <span class="hljs-keyword">by</span> Delegates.observable(<span class="hljs-string">"æ¸¸å®¢"</span>) { _, old, new -&gt;
        println(<span class="hljs-string">"ç”¨æˆ·åä» '<span class="hljs-variable">$old</span>' å˜ä¸º '<span class="hljs-variable">$new</span>'"</span>)
    }
    
    <span class="hljs-comment">// å¯å¦å†³çš„å±æ€§</span>
    <span class="hljs-keyword">var</span> age: <span class="hljs-built_in">Int</span> <span class="hljs-keyword">by</span> Delegates.vetoable(<span class="hljs-number">0</span>) { _, old, new -&gt;
        <span class="hljs-keyword">if</span> (new &lt; <span class="hljs-number">0</span>) {
            println(<span class="hljs-string">"å¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•°ï¼Œä¿æŒåŸå€¼: <span class="hljs-variable">$old</span>"</span>)
            <span class="hljs-literal">false</span>
        } <span class="hljs-keyword">else</span> <span class="hljs-literal">true</span>
    }
    
    <span class="hljs-comment">// éç©ºå§”æ‰˜</span>
    <span class="hljs-keyword">var</span> requiredField: String <span class="hljs-keyword">by</span> Delegates.notNull()
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ExpensiveResource</span> {
    <span class="hljs-keyword">init</span> { 
        Thread.sleep(<span class="hljs-number">1000</span>)  <span class="hljs-comment">// æ¨¡æ‹Ÿæ˜‚è´µåˆå§‹åŒ–</span>
        println(<span class="hljs-string">"æ˜‚è´µèµ„æºåˆå§‹åŒ–å®Œæˆ"</span>)
    }
}
</code></pre>
<h4 data-id="heading-16">4.3 Map å§”æ‰˜æ¨¡å¼</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Map å§”æ‰˜çš„å¼ºå¤§åŠŸèƒ½</span>

<span class="hljs-comment">// åŠ¨æ€é…ç½®å¯¹è±¡</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicConfig</span>(<span class="hljs-keyword">val</span> map: Map&lt;String, Any&gt;) {
    <span class="hljs-keyword">val</span> appName: String <span class="hljs-keyword">by</span> map
    <span class="hljs-keyword">val</span> version: String <span class="hljs-keyword">by</span> map
    <span class="hljs-keyword">val</span> timeout: <span class="hljs-built_in">Long</span> <span class="hljs-keyword">by</span> map
    <span class="hljs-keyword">val</span> features: List&lt;String&gt; <span class="hljs-keyword">by</span> map
}

<span class="hljs-comment">// å“åº”å¼é…ç½®å¯¹è±¡</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ReactiveConfig</span>(<span class="hljs-keyword">val</span> map: MutableMap&lt;String, Any&gt;) {
    <span class="hljs-keyword">var</span> theme: String <span class="hljs-keyword">by</span> map
    <span class="hljs-keyword">var</span> language: String <span class="hljs-keyword">by</span> map
    <span class="hljs-keyword">var</span> notifications: <span class="hljs-built_in">Boolean</span> <span class="hljs-keyword">by</span> map
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">demonstrateMapDelegation</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// ä» JSON æˆ–é…ç½®æ–‡ä»¶åˆ›å»ºå¯¹è±¡</span>
    <span class="hljs-keyword">val</span> configData = mapOf(
        <span class="hljs-string">"appName"</span> to <span class="hljs-string">"MyApp"</span>,
        <span class="hljs-string">"version"</span> to <span class="hljs-string">"1.0.0"</span>,
        <span class="hljs-string">"timeout"</span> to <span class="hljs-number">5000L</span>,
        <span class="hljs-string">"features"</span> to listOf(<span class="hljs-string">"auth"</span>, <span class="hljs-string">"payments"</span>, <span class="hljs-string">"analytics"</span>)
    )
    
    <span class="hljs-keyword">val</span> config = DynamicConfig(configData)
    println(<span class="hljs-string">"åº”ç”¨: <span class="hljs-subst">${config.appName}</span> v<span class="hljs-subst">${config.version}</span>"</span>)
    println(<span class="hljs-string">"åŠŸèƒ½: <span class="hljs-subst">${config.features}</span>"</span>)
    
    <span class="hljs-comment">// åŠ¨æ€æ›´æ–°é…ç½®</span>
    <span class="hljs-keyword">val</span> mutableConfig = mutableMapOf(
        <span class="hljs-string">"theme"</span> to <span class="hljs-string">"light"</span>,
        <span class="hljs-string">"language"</span> to <span class="hljs-string">"zh-CN"</span>,
        <span class="hljs-string">"notifications"</span> to <span class="hljs-literal">true</span>
    )
    
    <span class="hljs-keyword">val</span> reactiveConfig = ReactiveConfig(mutableConfig)
    reactiveConfig.theme = <span class="hljs-string">"dark"</span>  <span class="hljs-comment">// è‡ªåŠ¨æ›´æ–°åº•å±‚ Map</span>
    println(<span class="hljs-string">"æ›´æ–°åçš„é…ç½®: <span class="hljs-variable">$mutableConfig</span>"</span>)
}
</code></pre>
<h3 data-id="heading-17">5. æ ‡å‡†å§”æ‰˜è¯¦è§£</h3>
<h4 data-id="heading-18">5.1 lazy å§”æ‰˜çš„ä¸‰ç§æ¨¡å¼</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">LazyExamples</span> {
    <span class="hljs-comment">// é»˜è®¤æ¨¡å¼ï¼šçº¿ç¨‹å®‰å…¨ï¼Œä½†å¯èƒ½æœ‰å¤šä½™çš„åŒæ­¥å¼€é”€</span>
    <span class="hljs-keyword">val</span> defaultLazy: String <span class="hljs-keyword">by</span> lazy {
        println(<span class="hljs-string">"é»˜è®¤ lazy åˆå§‹åŒ–"</span>)
        <span class="hljs-string">"é»˜è®¤å€¼"</span>
    }
    
    <span class="hljs-comment">// åŒæ­¥æ¨¡å¼ï¼šçº¿ç¨‹å®‰å…¨ï¼Œä½¿ç”¨ synchronized</span>
    <span class="hljs-keyword">val</span> synchronizedLazy: String <span class="hljs-keyword">by</span> lazy(LazyThreadSafetyMode.SYNCHRONIZED) {
        println(<span class="hljs-string">"åŒæ­¥ lazy åˆå§‹åŒ–"</span>)
        <span class="hljs-string">"åŒæ­¥å€¼"</span>
    }
    
    <span class="hljs-comment">// å‘å¸ƒæ¨¡å¼ï¼šå…è®¸å¤šæ¬¡åˆå§‹åŒ–ï¼Œä½†åªè¿”å›ç¬¬ä¸€æ¬¡æˆåŠŸçš„ç»“æœ</span>
    <span class="hljs-keyword">val</span> publicationLazy: String <span class="hljs-keyword">by</span> lazy(LazyThreadSafetyMode.PUBLICATION) {
        println(<span class="hljs-string">"å‘å¸ƒæ¨¡å¼ lazy åˆå§‹åŒ– - çº¿ç¨‹: <span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
        <span class="hljs-string">"å‘å¸ƒå€¼"</span>
    }
    
    <span class="hljs-comment">// éçº¿ç¨‹å®‰å…¨æ¨¡å¼ï¼šå•çº¿ç¨‹ç¯å¢ƒä½¿ç”¨ï¼Œæ€§èƒ½æœ€é«˜</span>
    <span class="hljs-keyword">val</span> noneLazy: String <span class="hljs-keyword">by</span> lazy(LazyThreadSafetyMode.NONE) {
        println(<span class="hljs-string">"éå®‰å…¨ lazy åˆå§‹åŒ–"</span>)
        <span class="hljs-string">"éå®‰å…¨å€¼"</span>
    }
}

<span class="hljs-comment">// è‡ªå®šä¹‰ lazy é€»è¾‘</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">lazyWithLogging</span><span class="hljs-params">(initializer: () -&gt; <span class="hljs-type">T</span>)</span></span> = lazy {
    println(<span class="hljs-string">"å¼€å§‹å»¶è¿Ÿåˆå§‹åŒ–..."</span>)
    <span class="hljs-keyword">val</span> result = initializer()
    println(<span class="hljs-string">"å»¶è¿Ÿåˆå§‹åŒ–å®Œæˆ: <span class="hljs-variable">$result</span>"</span>)
    result
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomLazyExample</span> {
    <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span>: String <span class="hljs-keyword">by</span> lazyWithLogging {
        <span class="hljs-comment">// æ¨¡æ‹Ÿæ˜‚è´µæ“ä½œ</span>
        Thread.sleep(<span class="hljs-number">1000</span>)
        <span class="hljs-string">"è®¡ç®—ç»“æœ"</span>
    }
}
</code></pre>
<h4 data-id="heading-19">5.2 observable å’Œ vetoable çš„é«˜çº§ç”¨æ³•</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AdvancedObservableExamples</span> {
    <span class="hljs-comment">// å¸¦å†å²è®°å½•çš„è§‚å¯Ÿå±æ€§</span>
    <span class="hljs-keyword">var</span> price: <span class="hljs-built_in">Double</span> <span class="hljs-keyword">by</span> observableWithHistory(<span class="hljs-number">0.0</span>)
    
    <span class="hljs-comment">// å¸¦æ¡ä»¶éªŒè¯çš„è§‚å¯Ÿå±æ€§</span>
    <span class="hljs-keyword">var</span> quantity: <span class="hljs-built_in">Int</span> <span class="hljs-keyword">by</span> validatedObservable(<span class="hljs-number">0</span>) { newValue -&gt;
        newValue &gt;= <span class="hljs-number">0</span> &amp;&amp; newValue &lt;= <span class="hljs-number">1000</span>
    }
    
    <span class="hljs-comment">// é“¾å¼éªŒè¯</span>
    <span class="hljs-keyword">var</span> score: <span class="hljs-built_in">Int</span> <span class="hljs-keyword">by</span> chainValidation(<span class="hljs-number">0</span>)
}

<span class="hljs-comment">// å¸¦å†å²è®°å½•çš„è§‚å¯Ÿå§”æ‰˜</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">observableWithHistory</span><span class="hljs-params">(initialValue: <span class="hljs-type">T</span>)</span></span> = 
    <span class="hljs-keyword">object</span> : ReadWriteProperty&lt;Any, T&gt; {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> value: T = initialValue
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> history = mutableListOf&lt;T&gt;()
        
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getValue</span><span class="hljs-params">(thisRef: <span class="hljs-type">Any</span>, property: <span class="hljs-type">KProperty</span>&lt;*&gt;)</span></span>: T = value
        
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setValue</span><span class="hljs-params">(thisRef: <span class="hljs-type">Any</span>, property: <span class="hljs-type">KProperty</span>&lt;*&gt;, value: <span class="hljs-type">T</span>)</span></span> {
            <span class="hljs-keyword">val</span> oldValue = <span class="hljs-keyword">this</span>.value
            <span class="hljs-keyword">this</span>.value = value
            history.add(value)
            println(<span class="hljs-string">"<span class="hljs-subst">${property.name}</span> å˜æ›´å†å²: <span class="hljs-subst">${history.joinToString(<span class="hljs-string">" -&gt; "</span>)}</span>"</span>)
        }
    }

<span class="hljs-comment">// å¸¦éªŒè¯çš„è§‚å¯Ÿå§”æ‰˜</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">validatedObservable</span><span class="hljs-params">(
    initialValue: <span class="hljs-type">T</span>,
    validator: (<span class="hljs-type">T</span>) -&gt; <span class="hljs-type">Boolean</span>
)</span></span> = <span class="hljs-keyword">object</span> : ReadWriteProperty&lt;Any, T&gt; {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> value: T = initialValue
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getValue</span><span class="hljs-params">(thisRef: <span class="hljs-type">Any</span>, property: <span class="hljs-type">KProperty</span>&lt;*&gt;)</span></span>: T = value
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setValue</span><span class="hljs-params">(thisRef: <span class="hljs-type">Any</span>, property: <span class="hljs-type">KProperty</span>&lt;*&gt;, value: <span class="hljs-type">T</span>)</span></span> {
        require(validator(value)) { <span class="hljs-string">"éªŒè¯å¤±è´¥: <span class="hljs-subst">${property.name}</span> = <span class="hljs-variable">$value</span>"</span> }
        <span class="hljs-keyword">val</span> oldValue = <span class="hljs-keyword">this</span>.value
        <span class="hljs-keyword">this</span>.value = value
        println(<span class="hljs-string">"<span class="hljs-subst">${property.name}</span>: <span class="hljs-variable">$oldValue</span> -&gt; <span class="hljs-variable">$value</span>"</span>)
    }
}

<span class="hljs-comment">// é“¾å¼éªŒè¯å§”æ‰˜</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">chainValidation</span><span class="hljs-params">(initialValue: <span class="hljs-type">Int</span>)</span></span> = <span class="hljs-keyword">object</span> : ReadWriteProperty&lt;Any, <span class="hljs-built_in">Int</span>&gt; {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> value: <span class="hljs-built_in">Int</span> = initialValue
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getValue</span><span class="hljs-params">(thisRef: <span class="hljs-type">Any</span>, property: <span class="hljs-type">KProperty</span>&lt;*&gt;)</span></span>: <span class="hljs-built_in">Int</span> = value
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setValue</span><span class="hljs-params">(thisRef: <span class="hljs-type">Any</span>, property: <span class="hljs-type">KProperty</span>&lt;*&gt;, value: <span class="hljs-type">Int</span>)</span></span> {
        require(value &gt;= <span class="hljs-number">0</span>) { <span class="hljs-string">"åˆ†æ•°ä¸èƒ½ä¸ºè´Ÿæ•°"</span> }
        require(value &lt;= <span class="hljs-number">100</span>) { <span class="hljs-string">"åˆ†æ•°ä¸èƒ½è¶…è¿‡100"</span> }
        require(value % <span class="hljs-number">5</span> == <span class="hljs-number">0</span>) { <span class="hljs-string">"åˆ†æ•°å¿…é¡»æ˜¯5çš„å€æ•°"</span> }
        
        <span class="hljs-keyword">this</span>.value = value
    }
}
</code></pre>
<h3 data-id="heading-20">æ€»ç»“å¯¹æ¯”è¡¨</h3>








































<table><thead><tr><th>ç‰¹æ€§</th><th>ä¼ ç»Ÿæ–¹å¼ä»£ç é‡</th><th>å§”æ‰˜æ–¹å¼ä»£ç é‡</th><th>å¯è¯»æ€§æå‡</th><th>å¤ç”¨æ€§æå‡</th></tr></thead><tbody><tr><td>ç±»å§”æ‰˜</td><td>éœ€è¦å®ç°æ‰€æœ‰æ¥å£æ–¹æ³•</td><td>åªéœ€é‡å†™éœ€è¦çš„æ–¹æ³•</td><td>â­â­â­â­</td><td>â­â­â­</td></tr><tr><td>å±æ€§éªŒè¯</td><td>æ¯ä¸ªå±æ€§éƒ½éœ€è¦é‡å¤ä»£ç </td><td>å§”æ‰˜ç±»å°è£…éªŒè¯é€»è¾‘</td><td>â­â­â­</td><td>â­â­â­â­â­</td></tr><tr><td>å»¶è¿Ÿåˆå§‹åŒ–</td><td>æ‰‹åŠ¨å®ç°åŒé‡æ£€æŸ¥é”</td><td>ä½¿ç”¨Â <code>lazy</code>å§”æ‰˜</td><td>â­â­â­â­</td><td>â­â­â­â­</td></tr><tr><td>è§‚å¯Ÿæ¨¡å¼</td><td>æ‰‹åŠ¨å®ç°è§‚å¯Ÿè€…æ¨¡å¼</td><td>ä½¿ç”¨Â <code>observable</code>å§”æ‰˜</td><td>â­â­â­â­â­</td><td>â­â­â­â­</td></tr></tbody></table>
<p>é€šè¿‡ä»¥ä¸Šè¯¦ç»†çš„ä»£ç ç¤ºä¾‹å’Œåˆ†æï¼Œå¯ä»¥çœ‹åˆ°Â <code>by</code>å…³é”®å­—ç¡®å®åœ¨ç®€åŒ–ä»£ç ã€æé«˜å¤ç”¨æ€§ã€å¢å¼ºå¯è¯»æ€§ç­‰æ–¹é¢å‘æŒ¥äº†å·¨å¤§ä½œç”¨ï¼Œæ˜¯ Kotlin è¯­è¨€ä¸­éå¸¸å¼ºå¤§çš„ç‰¹æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GPUStack v2ï¼šæ¨ç†åŠ é€Ÿé‡Šæ”¾ç®—åŠ›æ½œèƒ½ï¼Œå¼€æºé‡å¡‘å¤§æ¨¡å‹æ¨ç†ä¸‹åŠåœº]]></title>    <link>https://juejin.cn/post/7576825095135871002</link>    <guid>https://juejin.cn/post/7576825095135871002</guid>    <pubDate>2025-11-26T08:16:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576825095135871002" data-draft-id="7576843726010679322" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GPUStack v2ï¼šæ¨ç†åŠ é€Ÿé‡Šæ”¾ç®—åŠ›æ½œèƒ½ï¼Œå¼€æºé‡å¡‘å¤§æ¨¡å‹æ¨ç†ä¸‹åŠåœº"/> <meta itemprop="keywords" content="LLM,GPU"/> <meta itemprop="datePublished" content="2025-11-26T08:16:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Sealè½¯ä»¶"/> <meta itemprop="url" content="https://juejin.cn/user/2115917237986488"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GPUStack v2ï¼šæ¨ç†åŠ é€Ÿé‡Šæ”¾ç®—åŠ›æ½œèƒ½ï¼Œå¼€æºé‡å¡‘å¤§æ¨¡å‹æ¨ç†ä¸‹åŠåœº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2115917237986488/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Sealè½¯ä»¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T08:16:46.000Z" title="Wed Nov 26 2025 08:16:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2025 å¹´æ˜¯<strong>å¤§æ¨¡å‹æ¨ç†æŠ€æœ¯å‘å±•</strong>çš„å…³é”®ä¹‹å¹´ã€‚è‡ªå¹´åˆ DeepSeek R1 å‘å¸ƒå¼•å‘å…¨æ°‘å…³æ³¨ä»¥æ¥ï¼Œæ¨ç†æ¡†æ¶åŠ é€Ÿéœ€æ±‚æš´æ¶¨ï¼Œæ¨ç†ä¼˜åŒ–çš„æˆ˜åœºéª¤ç„¶å‡æ¸©ã€‚ä»¥ <strong>vLLMã€SGLangã€MindIE</strong> ä¸ºä»£è¡¨çš„é«˜æ€§èƒ½æ¨ç†å¼•æ“ï¼Œä»¥åŠ <strong>FlashInferã€FlashAttentionã€ATB</strong> ç­‰åº•å±‚åŠ é€Ÿåº“ä¸æ–­çªç ´æ€§èƒ½ç“¶é¢ˆï¼Œç›¸æ¯”å¹´åˆï¼Œéƒ¨åˆ†å‰æ²¿æ¡†æ¶çš„æ¨ç†æ€§èƒ½æå‡å·²è¾¾ 3 åˆ° 4 å€ä»¥ä¸Šã€‚</p>
<p>éšç€ Agent åº”ç”¨çš„çˆ†å‘å’Œé•¿ä¸Šä¸‹æ–‡èƒ½åŠ›çš„æ™®ééœ€æ±‚ï¼Œ<strong>ç«¯åˆ°ç«¯æ¨ç†æ€§èƒ½ã€å¤§è§„æ¨¡å¹¶å‘ååå’Œä½å“åº”å»¶è¿Ÿ</strong>å·²æˆä¸ºæ¨ç†ä¼˜åŒ–çš„ä¸‰å¤§ä¸»çº¿ï¼Œæ¨åŠ¨æˆ˜ç«è½¬å‘<strong>ç³»ç»Ÿçº§çš„åŠ é€ŸæŠ€æœ¯ç»„åˆä¸å·¥ç¨‹ä¼˜åŒ–</strong>ã€‚</p>
<p>åœ¨è¿™ä¸€å…³é”®è½¬æŠ˜ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¹³å°çº§è§£å†³æ–¹æ¡ˆï¼Œ<strong>å°†å‰æ²¿çš„æ¨ç†åŠ é€ŸæŠ€æœ¯é›†å¤§æˆï¼Œå¹¶å°†å…¶æ™®æƒ åŒ–ï¼Œè®©æ›´å¤šå¼€å‘è€…å’Œä¼ä¸šè§¦æ‰‹å¯åŠã€‚</strong></p>
<h2 data-id="heading-0">GPUStackï¼šè¿æ¥å‰æ²¿æŠ€æœ¯ä¸ç”Ÿäº§åŠ›</h2>
<p>è‡ª 2024 å¹´ 7 æœˆæ­£å¼å¼€æºä»¥æ¥ï¼ŒGPUStack å·²åœ¨å…¨çƒä¸Šç™¾ä¸ªå›½å®¶å’Œåœ°åŒºè·å¾—å¹¿æ³›ä½¿ç”¨ä¸è®¤å¯ï¼Œä»¥ç¨³å®šå¯é ä¸å‡ºè‰²çš„æ˜“ç”¨æ€§èµ¢å¾—äº†ç”¨æˆ·ç¾¤ä½“çš„<strong>æ™®éèµèª‰</strong>ã€‚æˆ‘ä»¬å§‹ç»ˆåšä¿¡ï¼Œå¼€æºç”Ÿæ€çš„åŠ›é‡ï¼Œæ˜¯æ¨åŠ¨å¤§æ¨¡å‹æ™®æƒ åŒ–çš„æ ¸å¿ƒé©±åŠ¨åŠ›ã€‚</p>
<p>å†ç»æ•°æœˆçš„æ·±å…¥ç ”å‘ä¸æ‰“ç£¨ï¼Œæˆ‘ä»¬éš†é‡å‘å¸ƒ <strong>GPUStack v2</strong> â€”â€” ä¸€ä¸ªé¢å‘æœªæ¥çš„<strong>é«˜æ€§èƒ½æ¨¡å‹æ¨ç† MaaS å¹³å°</strong>ï¼Œæ—¨åœ¨<strong>å……åˆ†é‡Šæ”¾å¼‚æ„ç¡¬ä»¶çš„ç®—åŠ›æ½œèƒ½</strong>ï¼Œå¹¶<strong>æå¤§ç®€åŒ–å¼‚æ„ç¯å¢ƒä¸‹æ¨¡å‹éƒ¨ç½²çš„å¤æ‚åº¦</strong>ã€‚</p>
<p>åœ¨å¤§æ¨¡å‹æ¨ç†çš„ä¸‹åŠåœºï¼ŒGPUStack v2 ä¸å†æ˜¯ç®€å•çš„æ¨¡å‹æœåŠ¡å¹³å°ï¼Œè€Œæ˜¯<strong>é«˜æ€§èƒ½æ¨ç†ç”Ÿæ€çš„åè°ƒè€…ä¸èµ‹èƒ½è€…</strong>ã€‚</p>
<h3 data-id="heading-1">æ·±åº¦ä¼˜åŒ–ï¼šé›†æˆç”Ÿæ€ä¹‹åŠ›ï¼Œé‡Šæ”¾ç¡¬ä»¶æ½œèƒ½</h3>
<p>å½“å‰ï¼Œæ¨ç†å¼•æ“å¦‚ vLLMã€SGLangã€MindIE ç­‰åœ¨ç®—å­èåˆã€KV Cache ç®¡ç†å’Œè°ƒåº¦ä¼˜åŒ–æ–¹é¢å·²è¾¾åˆ°è¾ƒé«˜æ€§èƒ½æ°´å¹³ã€‚ç„¶è€Œï¼Œåœ¨ä¸åŒç¡¬ä»¶å’Œåº”ç”¨åœºæ™¯ä¸‹ï¼Œè¦é‡Šæ”¾è¿™äº›å¼•æ“çš„å…¨éƒ¨æ½œåŠ›ï¼Œéœ€è¦å¤§é‡çš„ä¸“ä¸šçŸ¥è¯†å’Œæ‰‹åŠ¨è°ƒä¼˜ã€‚</p>
<p>GPUStack v2 è§£å†³äº†è¿™ä¸€å¤æ‚æ€§ï¼š</p>
<h4 data-id="heading-2">ä¸“å®¶ç»éªŒè°ƒä¼˜</h4>
<p>è¿‡å»æ•°åƒä¸ªå°æ—¶çš„æŠ•å…¥ï¼Œæˆ‘ä»¬åœ¨æ— æ•°æµ‹è¯•ä¸éªŒè¯ä¸­ä¸æ–­æ‰“ç£¨ GPUStackï¼Œé’ˆå¯¹ä¸åŒæ€§èƒ½åœºæ™¯æ„å»ºäº†å®Œå–„çš„ä¼˜åŒ–æ•°æ®åº“ï¼Œå¹¶å½¢æˆä¸€å¥—æŒç»­è¿›åŒ–çš„æ¨ç†æ€§èƒ½æœ€ä½³å®è·µã€‚</p>
<p>å†…éƒ¨æµ‹è¯•æ•°æ®æ˜¾ç¤ºï¼Œé€šè¿‡æœ€ä½³å¼•æ“é€‰å‹å’Œé…ç½®è°ƒä¼˜ç»„åˆï¼Œ<strong>H200</strong> <strong>GPU</strong> ä¸Šè¿è¡Œ GLM 4.6 çš„<strong>ååé‡æœ€é«˜å¯æå‡ 135%</strong> ï¼›<strong>H100 GPU</strong> ä¸Šè¿è¡Œ Qwen3-8B çš„<strong>å“åº”å»¶è¿Ÿæœ€é«˜å¯é™ä½ 63%</strong> ã€‚</p>
<p>æˆ‘ä»¬ä¼šæŒç»­æ¢ç´¢å’ŒæŠ•å…¥ï¼Œå¹¶å°†è¿™äº›å®è·µæ²‰æ·€è¿› GPUStack v2ã€‚å„ç±»ä¼˜åŒ–å’Œæµ‹è¯•æ–¹æ³•ä¹Ÿä¼šå¼€æ”¾åˆ°æˆ‘ä»¬çš„æ¨ç†æ€§èƒ½å®éªŒå®¤ï¼Œè®©æ¯ä¸€ä½ç”¨æˆ·éƒ½èƒ½<strong>å¼€ç®±å³ç”¨åœ°è·å¾—å“è¶Šæ€§èƒ½</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7879926e9234d9fbace9c12c78cf9f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VhbOi9r-S7tg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764749805&amp;x-signature=wQNWmlJj5NEHakAah%2BLPE0g%2Bqlo%3D" alt="v2-1" loading="lazy"/></p>
<h4 data-id="heading-3">é•¿åºåˆ—ä¸ä½æ—¶å»¶ä¼˜åŒ–</h4>
<p>GPUStack v2 åœ¨ä¸“å®¶è°ƒä¼˜åŸºç¡€ä¸Šï¼Œå°†å¤šé¡¹å‰æ²¿æ¨ç†ä¼˜åŒ–æ–¹æ³•è¿›è¡Œå·¥ç¨‹åŒ–æ•´åˆï¼Œä½¿ç”¨æˆ·æ— éœ€ä¿®æ”¹æ¨¡å‹æˆ–å¤æ‚é…ç½®ï¼Œå³å¯è·å¾—ç¨³å®šè€Œæ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚</p>
<ul>
<li><strong>è§£ç åŠ é€Ÿ</strong></li>
</ul>
<p>GPUStack v2 åŸç”Ÿé›†æˆ Eagle3ã€MTPã€Ngram ç­‰å¤šç§é¢†å…ˆçš„è§£ç åŠ é€Ÿç®—æ³•ï¼Œé€šè¿‡ç¼©çŸ­ Token ç”Ÿæˆè·¯å¾„ã€æå‡è§£ç å¹¶è¡Œåº¦ï¼Œ<strong>æ˜¾è‘—é™ä½ç”Ÿæˆå»¶è¿Ÿï¼ˆTPOTï¼‰</strong> ã€‚æ‰€æœ‰åŠ é€Ÿèƒ½åŠ›å‡é€šè¿‡ç»Ÿä¸€æ¥å£å°è£…ï¼Œå¼€ç®±å³ç”¨ã€‚</p>
<p>æœªæ¥ï¼Œæˆ‘ä»¬å°†è¿›ä¸€æ­¥æ¨å‡ºé’ˆå¯¹ä¸»æµæ¨¡å‹ä¼˜åŒ–åçš„ Eagle è§£ç å¤´ï¼ŒåŒæ—¶æä¾›ä¸ªæ€§åŒ–æ¨¡å‹è®­ç»ƒæœåŠ¡ï¼Œè®©ä¼ä¸šèƒ½å¤Ÿ<strong>æ„å»ºé€‚é…è‡ªèº«ä¸šåŠ¡çš„é«˜æ€§èƒ½è§£ç æ–¹æ¡ˆï¼Œå®ç°æ›´æè‡´çš„æ¨ç†é€Ÿåº¦</strong>ã€‚</p>
<ul>
<li><strong>KV</strong> <strong>Cache æ‰©å±•</strong></li>
</ul>
<p>é’ˆå¯¹ä¸æ–­å¢é•¿çš„é•¿ä¸Šä¸‹æ–‡éœ€æ±‚ï¼ŒGPUStack v2 <strong>æä¾›å¤šç§å¼€ç®±å³ç”¨çš„ KV Cache æ‰©å±•æ–¹æ¡ˆ</strong>ï¼ˆå¦‚ LMCacheã€HiCacheï¼‰ï¼Œè¿›ä¸€æ­¥å¢å¼º KV Cache çš„çµæ´»æ€§ä¸ä¼¸ç¼©èƒ½åŠ›ã€‚</p>
<p>å¹³å°æ”¯æŒåˆ©ç”¨ GPU ä¸»æœºå†…å­˜æ‰©å®¹ KV Cache æ± ï¼Œå¹¶å¯é€šè¿‡é«˜é€Ÿå¤–éƒ¨å…±äº«å­˜å‚¨å®ç°è·¨è®¾å¤‡ç¼“å­˜æ‰©å±•ï¼Œä»è€Œ<strong>å¤§å¹…é™ä½é•¿åºåˆ—åœºæ™¯ä¸‹çš„é¦– Token å»¶è¿Ÿ</strong>ï¼ˆ<strong>TTFT</strong>ï¼‰ï¼Œæ˜¾è‘—æ”¹å–„é•¿æ–‡æœ¬å¤„ç†ã€Agent æ¨ç†ã€å¤šè½®å¯¹è¯ç­‰åœºæ™¯çš„å®é™…ä½“éªŒã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/334f3237b5554528a81a443bbf8c3784~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VhbOi9r-S7tg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764749805&amp;x-signature=fCb7hQyzOeq2pQV%2FGJG8c5quEZA%3D" alt="v2-2" loading="lazy"/></p>
<h4 data-id="heading-4">å…¼å®¹æ€§ä¸å¯æ’æ‹”</h4>
<p>å½“å‰ï¼Œæ¨ç†å¼•æ“é¢†åŸŸå‘ˆç°å¤šå…ƒåŒ–çš„ç«äº‰æ ¼å±€ã€‚ä¸åŒæ¨ç†å¼•æ“å„è‡ªåœ¨ç®—åŠ›è°ƒåº¦ã€KV Cache ç®¡ç†æˆ–é•¿ä¸Šä¸‹æ–‡ä¼˜åŒ–ç­‰ç»´åº¦æ·±åº¦å‘åŠ›ï¼Œæ€§èƒ½å„æœ‰åƒç§‹ã€‚ç„¶è€Œï¼Œå°šæ— ä¸€ä¸ªæ–¹æ¡ˆèƒ½åœ¨æ‰€æœ‰åœºæ™¯ä¸­å…¨é¢é¢†å…ˆï¼Œç”¨æˆ·åœ¨é€‰æ‹©ä¸åˆ‡æ¢æ—¶ä»é¢ä¸´å·¨å¤§æŒ‘æˆ˜ã€‚</p>
<p>ä¸ºæ­¤ï¼Œ<strong>GPUStack v2</strong> ä»¥çµæ´»å¼€æ”¾ä¸ºæ ¸å¿ƒï¼Œæä¾›<strong>å¯æ’æ‹”åç«¯æ¶æ„</strong>ä¸<strong>é€šç”¨ API ä»£ç†</strong>æ”¯æŒï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿä»¥æœ€é«˜è‡ªç”±åº¦é€‰æ‹©æœ€é€‚åˆçš„æ¨ç†å¼•æ“ã€‚</p>
<p>æ— è®ºæ˜¯ <strong>vLLMã€SGLang</strong>ï¼Œè¿˜æ˜¯å…¶ä»–æ–°å…´æˆ–ä¼ ç»Ÿ AI æ¨ç†å¼•æ“ï¼ŒGPUStack éƒ½èƒ½<strong>è½»æ¾å…¼å®¹</strong>ï¼Œå¹¶æ”¯æŒ<strong>ä»»æ„å¼•æ“ç‰ˆæœ¬çš„çµæ´»åˆ‡æ¢</strong>ä¸<strong>å¼‚æ„ç¯å¢ƒä¸‹çš„æ™ºèƒ½è°ƒåº¦</strong>ï¼Œç¡®ä¿ç”¨æˆ·å§‹ç»ˆèƒ½åœ¨ç¬¬ä¸€æ—¶é—´ä½¿ç”¨æœ€æ–°çš„å¼€æºæ¨¡å‹ä¸æ¨ç†ä¼˜åŒ–æˆæœã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47e76ec58a3b4b03aed093d7c7ad33d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VhbOi9r-S7tg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764749805&amp;x-signature=ZsuqmP5%2FZus%2BXhHqDabr%2BD7vQyI%3D" alt="v2-3" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75fdc2f6a31a4c4e8e8f26c75dbc8d38~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VhbOi9r-S7tg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764749805&amp;x-signature=l8OUWFCGjzgk7RlV86LIWp4MJ5E%3D" alt="v2-4" loading="lazy"/></p>
<h4 data-id="heading-5">å›½äº§ç®—åŠ›èµ‹èƒ½</h4>
<p>åœ¨å¤§æ¨¡å‹æ¨ç†è¿›å…¥è§„æ¨¡åŒ–è½åœ°é˜¶æ®µçš„ä»Šå¤©ï¼Œå¼‚æ„ç®—åŠ›çš„åº”ç”¨è¶‹åŠ¿æ—¥ç›Šæ˜¾è‘—ã€‚GPUStack v2 åŸç”Ÿæ”¯æŒ <strong>NVIDIAã€AMD ä»¥åŠæ˜‡è…¾ã€æµ·å…‰ã€æ‘©å°”çº¿ç¨‹ã€å¤©æ•°æ™ºèŠ¯ã€å¯’æ­¦çºªã€æ²æ›¦</strong>ç­‰å›½å†…å¤–ä¸»æµå¼‚æ„ç®—åŠ›ï¼Œä¸ºç”¨æˆ·æä¾›è·¨ç¡¬ä»¶ç¯å¢ƒçš„ä¸€è‡´ã€é«˜æ•ˆæ¨ç†ä½“éªŒã€‚</p>
<p>é’ˆå¯¹<strong>å›½äº§ç®—åŠ›å¹³å°</strong>ï¼ŒGPUStack å›¢é˜Ÿè¿›è¡Œäº†å…¨é¢é€‚é…ä¸æ¢ç´¢ä¼˜åŒ–ã€‚ä¾‹å¦‚ï¼Œåœ¨<strong>åä¸ºæ˜‡è…¾ 910B NPU</strong> ä¸Šè¿è¡Œ <strong>Qwen3-30B-A3B</strong> æ¨¡å‹æ—¶ï¼Œä¸åŒæµ‹è¯•ç»„åˆçš„æ€§èƒ½å·®å¼‚æ˜¾è‘—ï¼›é€šè¿‡æœ€ä½³å¼•æ“é€‰å‹å’Œé…ç½®è°ƒä¼˜ç»„åˆï¼Œå¯å®ç°<strong>æœ€é«˜ 284% çš„ååé‡æå‡</strong>ã€‚</p>
<p>è¿™å……åˆ†å±•ç°å‡ºå›½äº§ç®—åŠ›åœ¨å¤§æ¨¡å‹æ¨ç†é¢†åŸŸçš„å¼ºå¤§æ½œåŠ›ã€‚æœªæ¥ï¼Œæˆ‘ä»¬å°†ç»§ç»­ä¸å›½å†…å¤–ç¡¬ä»¶ç”Ÿæ€ä¼™ä¼´æ·±åº¦åä½œï¼Œæ¨åŠ¨æ›´å¤šå›½äº§åŠ é€Ÿå™¨åœ¨ä¸»æµæ¨¡å‹æ¨ç†åœºæ™¯ä¸­å®ç°æœ€ä½³æ€§èƒ½ï¼ŒåŠ©åŠ›ç®—åŠ›è‡ªä¸»å¯æ§ä¸ç”Ÿæ€ç¹è£ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb01650a0e534a0f9a5a76a46fb231b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VhbOi9r-S7tg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764749805&amp;x-signature=t1bqDyNskSDkBCu8OskDDv76Ym8%3D" alt="v2-5" loading="lazy"/></p>
<h3 data-id="heading-6">å¹³å°ä»·å€¼ï¼šä»æ¨ç†åŠ é€Ÿåˆ°é«˜æ€§èƒ½ MaaS å¹³å°</h3>
<p>éšç€å¤§æ¨¡å‹æ¨ç†è¿›å…¥ä¸‹åŠåœºï¼Œå•å¡æˆ–å•èŠ‚ç‚¹ä¼˜åŒ–å·²æ— æ³•æ»¡è¶³å¤§è§„æ¨¡éƒ¨ç½²éœ€æ±‚ã€‚é•¿ä¸Šä¸‹æ–‡ã€å¤šæ¨¡å‹å¹¶å‘ã€å¼‚æ„ç®—åŠ›ç¯å¢ƒä»¥åŠå¤æ‚ Agent ä»»åŠ¡ï¼Œä½¿å¹³å°å±‚çš„ç®—åŠ›è°ƒåº¦ã€èµ„æºç®¡ç†å’Œè¿ç»´æ²»ç†æˆä¸ºæ ¸å¿ƒç«äº‰åŠ›ã€‚GPUStack v2 çš„ç›®æ ‡ï¼Œæ˜¯æä¾›ä¸€ä¸ª<strong>é«˜æ€§èƒ½ã€å¯ç®¡ç†ã€å¯æ‰©å±•ã€å¯è§‚æµ‹çš„ MaaS å¹³å°</strong>ï¼Œå¸®åŠ©ä¼ä¸šåœ¨å¤šæ ·åŒ–ç¡¬ä»¶ä¸ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œç¨³å®šã€é«˜æ•ˆåœ°è¿è¡Œå¤§æ¨¡å‹æ¨ç†æœåŠ¡ã€‚</p>
<h4 data-id="heading-7">å¼¹æ€§ç®—åŠ›ï¼šå¤š GPU é›†ç¾¤ä¸äº‘ç«¯èµ„æºç»Ÿä¸€ç®¡ç†</h4>
<p>å¤§æ¨¡å‹æ¨ç†çš„ç®—åŠ›éœ€æ±‚å…·æœ‰é«˜è´Ÿè½½ä¸å¼ºæ³¢åŠ¨ç‰¹æ€§ã€‚GPUStack v2 æä¾›ç»Ÿä¸€çš„ç®—åŠ›ç®¡ç†ä¸å¼¹æ€§æ‰©ç¼©å®¹èƒ½åŠ›ï¼Œä½¿èµ„æºåˆ©ç”¨æ›´åŠ é«˜æ•ˆã€å¯æ§ä¸å…·æˆæœ¬ä¼˜åŠ¿ã€‚</p>
<ul>
<li><strong>å¼‚æ„é›†ç¾¤ç»Ÿä¸€ç®¡ç†</strong></li>
</ul>
<p>GPUStack v2 å¯ä»¥ç»Ÿä¸€ç®¡ç†æœ¬åœ° GPU é›†ç¾¤ã€Kubernetes GPU èµ„æºä»¥åŠå¤šç§å¼‚æ„äº‘ GPUï¼Œå®ç°<strong>è·¨å¹³å°ã€é«˜æ€§èƒ½çš„æ¨ç†èµ„æºæ± </strong>ã€‚å¹³å°åœ¨ä¸åŒç¡¬ä»¶æ¶æ„é—´æä¾›ä¸€è‡´çš„è°ƒåº¦ä¸ç›‘æ§èƒ½åŠ›ï¼Œè®©ç”¨æˆ·å……åˆ†é‡Šæ”¾ç°æœ‰ç®—åŠ›ï¼Œä¿éšœé«˜å¯ç”¨æ€§ä¸æ— é™æ‰©å±•æ½œåŠ›ã€‚</p>
<ul>
<li><strong>å…¬æœ‰äº‘ GPU å¼¹æ€§æ‰©ç¼©å®¹</strong></li>
</ul>
<p>é€šè¿‡ä¸ AWSã€é˜¿é‡Œäº‘ã€DigitalOcean ç­‰äº‘å¹³å°çš„æ·±åº¦é›†æˆï¼ŒGPUStack v2 èƒ½æ ¹æ®ä¸šåŠ¡è´Ÿè½½è‡ªåŠ¨æ‰©å®¹äº‘ç«¯ GPU å®ä¾‹ã€‚é«˜å³°æœŸå¿«é€Ÿæ‹‰èµ· GPUï¼Œä¿è¯ååä¸å»¶è¿Ÿæ»¡è¶³ SLAï¼›ä½è´Ÿè½½æ—¶å¯å›æ”¶ GPU èµ„æºï¼Œä¼˜åŒ–æˆæœ¬æ”¯å‡ºï¼Œå®ç°ç®—åŠ›çš„é«˜æ•ˆåˆ©ç”¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ccfa53ba16c14cbc982e545afd2197ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VhbOi9r-S7tg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764749805&amp;x-signature=J2nBS%2F1eAwM5FT%2B1exWjIQxFgIc%3D" alt="v2-6" loading="lazy"/></p>
<h4 data-id="heading-8">å®‰å…¨ä¸è®¿é—®æ²»ç†ï¼šHigress AI Gateway é›†æˆ</h4>
<p>åœ¨ä¼ä¸šçº§åœºæ™¯ä¸­ï¼Œæ¨¡å‹æœåŠ¡å¿…é¡»å…·å¤‡å¯æ§æ€§ã€å¯æ²»ç†æ€§å’Œç¨³å®šæ€§ã€‚GPUStack v2 æ·±åº¦é›†æˆ Higress AI Gatewayï¼Œå°†è®¿é—®ç®¡ç†ã€æµé‡æ²»ç†ä¸æœåŠ¡ç¨³å®šæ€§ç»Ÿä¸€çº³å…¥å¹³å°ç®¡ç†ï¼Œæ‰“é€ ä¼ä¸šçº§é«˜å¯é çš„å¤§æ¨¡å‹æœåŠ¡å…¥å£ã€‚</p>
<ul>
<li><strong>ç»Ÿä¸€ API æ¥å…¥ä¸åè®®è½¬æ¢</strong></li>
</ul>
<p>å€ŸåŠ© <strong>Higress é«˜æ€§èƒ½ AI ç½‘å…³</strong>ï¼ŒGPUStack v2 å°†æ‰€æœ‰æ¨¡å‹æœåŠ¡ï¼ŒåŒ…æ‹¬é OpenAI API æ¥å£ä»¥ç»Ÿä¸€æ–¹å¼å¯¹å¤–æš´éœ²ï¼Œå±è”½åº•å±‚æ¨ç†å¼•æ“çš„å·®å¼‚ã€‚å¹³å°æä¾›åè®®è½¬æ¢ä¸é€šç”¨ API ä»£ç†ï¼Œæ”¯æŒè·¨è¯­è¨€ã€è·¨æ¡†æ¶åŠéæ ‡å‡† API è°ƒç”¨ï¼Œæ˜¾è‘—é™ä½ä¸Šå±‚åº”ç”¨çš„æ¥å…¥æˆæœ¬ï¼Œè®©å¼€å‘è€…â€œå¼€ç®±å³å¯æ¥å…¥â€ã€‚</p>
<ul>
<li><strong>æ¨¡å‹ä¸ API Key çº§è®¿é—®æ§åˆ¶</strong></li>
</ul>
<p>GPUStack v2 æä¾› API Key ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€æ¨¡å‹çº§ä¸ API Key çº§çš„ç²¾ç»†åŒ–è®¿é—®æ§åˆ¶ã€æƒé™åˆ†å±‚ä»¥åŠä¼ä¸šçº§ SSO é›†æˆï¼Œç¡®ä¿ä¸åŒç”¨æˆ·å’Œå›¢é˜Ÿä»…èƒ½è®¿é—®è¢«æˆæƒçš„æ¨¡å‹ï¼Œå®ç°å¹³å°çº§éš”ç¦»ä¸å®‰å…¨æ²»ç†ã€‚</p>
<ul>
<li><strong>æœåŠ¡æ²»ç†ä¸å¯é æ€§ä¿éšœ</strong></li>
</ul>
<p>GPUStack v2 æ”¯æŒ Token é…é¢ç®¡ç†ã€é€Ÿç‡é™åˆ¶ã€Fallback æ•…éšœåˆ‡æ¢ç­‰æœºåˆ¶ï¼Œé€šè¿‡æµé‡æ§åˆ¶ä¸æœåŠ¡é™çº§ç­–ç•¥ç¡®ä¿æ¨¡å‹æœåŠ¡åœ¨é«˜è´Ÿè½½ã€å¼‚å¸¸æˆ–å¤šä¸šåŠ¡ç«äº‰åœºæ™¯ä¸‹ä¾ç„¶ä¿æŒç¨³å®šã€å¯æ§ä¸é«˜å¯ç”¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16e1b5895cb24c1483b89c50a2d3ac99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VhbOi9r-S7tg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764749805&amp;x-signature=PPv6MbPb02qbsLY0Bs%2FwUK83y9I%3D" alt="v2-7" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a95560e75bd04c71856211faccee8967~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VhbOi9r-S7tg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764749805&amp;x-signature=kjnZOpLMuHUva9Yns1gJHO5c4jE%3D" alt="v2-8" loading="lazy"/></p>
<h4 data-id="heading-9">å…¨é“¾è·¯å¯è§‚æµ‹æ€§ä¸è°ƒç”¨è®¡é‡</h4>
<p>åœ¨ä¼ä¸šçº§å¤§æ¨¡å‹éƒ¨ç½²ä¸­ï¼ŒæœåŠ¡çš„ç¨³å®šæ€§ã€ä½¿ç”¨é€æ˜åº¦å’Œèµ„æºå¯æ§æ€§è‡³å…³é‡è¦ã€‚GPUStack v2 æä¾›ç«¯åˆ°ç«¯å¯è§‚æµ‹èƒ½åŠ›ï¼Œå°†æ¨¡å‹è¿è¡ŒçŠ¶æ€ã€è°ƒç”¨æƒ…å†µä¸åº•å±‚ç®—åŠ›èµ„æºç»Ÿä¸€ç®¡ç†ï¼Œå®ç°å¯é‡åŒ–ã€å¯è¿½è¸ªçš„æ¨ç†æœåŠ¡ã€‚</p>
<ul>
<li><strong>æ¨¡å‹å¥åº·ç›‘æ§</strong></li>
</ul>
<p>GPUStack v2 å®æ—¶è·Ÿè¸ªæ¨¡å‹è¿è¡ŒçŠ¶æ€ï¼ŒåŒ…æ‹¬æ¨ç†é”™è¯¯ã€å“åº”å»¶è¿Ÿå’Œå…³é”®æ€§èƒ½æŒ‡æ ‡ï¼Œé€šè¿‡å¯è§†åŒ–æ•°æ®å’ŒæŠ¥è­¦æœºåˆ¶ï¼Œç¡®ä¿æœåŠ¡ç¨³å®šå¯é ï¼Œå¹¶ä¸ºå¼‚å¸¸æ’æŸ¥æä¾›å¼ºæœ‰åŠ›çš„æ•°æ®æ”¯æ’‘ã€‚</p>
<ul>
<li><strong>èµ„æºä½¿ç”¨å¯è§†åŒ–</strong></li>
</ul>
<p>å¯¹æ¯å¼  GPUã€æ¯ä¸ªèŠ‚ç‚¹çš„è®¡ç®—åˆ©ç”¨ç‡ã€æ˜¾å­˜å ç”¨ã€è´Ÿè½½çŠ¶æ€ç­‰å…³é”®æŒ‡æ ‡è¿›è¡Œå¯è§†åŒ–ç›‘æ§ï¼Œè®©ç®—åŠ›åˆ†é…ä¸é›†ç¾¤è°ƒåº¦ä¸€ç›®äº†ç„¶ã€‚å¸®åŠ©è¿ç»´å›¢é˜Ÿå¿«é€Ÿå‘ç°ç“¶é¢ˆï¼Œä¼˜åŒ–èµ„æºä½¿ç”¨ï¼Œæé«˜æ•´ä½“ç³»ç»Ÿæ•ˆç‡ã€‚</p>
<ul>
<li><strong>è°ƒç”¨ç›‘æ§ä¸è®¡é‡ç»Ÿè®¡</strong></li>
</ul>
<p>å¯¹æ¯ä¸ª API è¯·æ±‚å’Œ Token ä½¿ç”¨é‡è¿›è¡Œç²¾ç»†è·Ÿè¸ªå’Œç»Ÿè®¡ï¼Œæ”¯æŒæŒ‰æ¨¡å‹ã€å›¢é˜Ÿç­‰ç»´åº¦åˆ†æï¼Œä¸ºè®¡è´¹ã€æˆæœ¬ç®¡ç†å’Œå®¹é‡è§„åˆ’æä¾›ç²¾ç¡®æ•°æ®ï¼Œä½¿æœåŠ¡ä½¿ç”¨æ›´åŠ é€æ˜å’Œå¯æ§ï¼ŒåŠ©åŠ›ä¼ä¸šå†³ç­–ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/906139c68d564b42ae45b8cf8f8db451~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VhbOi9r-S7tg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764749805&amp;x-signature=1jdVaWvVRT511y%2FTzQOLR9RiXdA%3D" alt="image-20251114170501511" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c29c12c4b7445d39e6f0d04f64042ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VhbOi9r-S7tg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764749805&amp;x-signature=Cyuwzn7yn2%2B7KTgTTFVcZ82MSiA%3D" alt="image-20251114170545560" loading="lazy"/></p>
<h3 data-id="heading-10">æ€»ç»“</h3>
<p>GPUStack v2 ä¸ä»…åœ¨æ¨ç†å±‚é¢æä¾›ç«¯åˆ°ç«¯æ€§èƒ½åŠ é€Ÿï¼Œæ›´è¿›ä¸€æ­¥å°†<strong>ç®—åŠ›ç®¡ç†ã€æ™ºèƒ½è°ƒåº¦ã€å®‰å…¨è®¿é—®ä¸å¯è§‚æµ‹æ€§</strong>æ”¶æ•›åˆ°ç»Ÿä¸€çš„å¹³å°æ¶æ„ä¸­ã€‚</p>
<p>å®ƒå°†é«˜æ€§èƒ½æ¨ç†ä»å•æœºè°ƒä¼˜<strong>æ‰©å±•åˆ°å¼‚æ„é›†ç¾¤ã€è·¨äº‘ã€å¤šæ¨¡å‹çš„å¯ç®¡ç†åŸºç¡€è®¾æ–½</strong>ï¼Œä½¿å¤æ‚ç”Ÿäº§åœºæ™¯ä¸­çš„èµ„æºåˆ©ç”¨ã€è°ƒåº¦æ•ˆç‡ä¸æœåŠ¡ç¨³å®šæ€§éƒ½å…·å¤‡å·¥ç¨‹åŒ–ä¿éšœã€‚</p>
<p>åœ¨é•¿ä¸Šä¸‹æ–‡ã€é«˜å¹¶å‘ã€ä½å»¶è¿Ÿæ­£é€æ¸æˆä¸ºä¸»æµéœ€æ±‚çš„èƒŒæ™¯ä¸‹ï¼Œ<strong>GPUStack v2 æ­£æˆä¸ºä¼ä¸šçº§å¤§æ¨¡å‹éƒ¨ç½²ä¸æŒç»­è¿ç»´çš„å¯é ã€å¯æ‰©å±•æŠ€æœ¯åº•åº§ã€‚</strong></p>
<p>æ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–‡æ¡£å¿«é€Ÿå®‰è£…ä¸ä½“éªŒ GPUStack v2ï¼Œä¹ŸæœŸå¾…ä½ æ¢ç´¢æ›´å¤šç”¨æ³•ï¼Œæˆ–å‘æˆ‘ä»¬åé¦ˆçœŸå®åœºæ™¯ä¸­çš„é—®é¢˜ä¸å»ºè®®ï¼š</p>
<blockquote>
<p>GitHub ä»“åº“: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgpustack%2Fgpustack" target="_blank" title="https://github.com/gpustack/gpustack" ref="nofollow noopener noreferrer">github.com/gpustack/gpâ€¦</a></p>
<p>GPUStack ç”¨æˆ·æ–‡æ¡£: <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.gpustack.ai" target="_blank" title="https://docs.gpustack.ai" ref="nofollow noopener noreferrer">docs.gpustack.ai</a></p>
</blockquote>
<h2 data-id="heading-11">Meetup ç›´æ’­é¢„å‘Š</h2>
<p>ä¸ºäº†è®©æ›´å¤šå¼€å‘è€…å’Œ AI çˆ±å¥½è€…<strong>æ·±å…¥äº†è§£ GPUStack v2 çš„æ¶æ„è®¾è®¡ä¸å¿«é€Ÿä¸Šæ‰‹æ–¹æ³•</strong>ï¼ŒåŒæ—¶è§£ç­”å¤§å®¶åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œæˆ‘ä»¬å°†åœ¨æœªæ¥å‡ å‘¨é™†ç»­ä¸¾åŠä¸€ç³»åˆ—<strong>åœ¨çº¿ Meetup ç›´æ’­</strong>ã€‚</p>
<p>åœ¨ Meetup ä¸­ï¼Œä½ å°†å¯ä»¥ï¼š</p>
<ul>
<li>æ·±å…¥äº†è§£ GPUStack v2 çš„æ ¸å¿ƒåŠŸèƒ½ä¸æœ€ä½³å®è·µ</li>
<li>è·å–ä¸“å®¶è°ƒä¼˜ç»éªŒä¸æ€§èƒ½ä¼˜åŒ–æŠ€å·§</li>
<li>ç°åœºæé—®ï¼Œä¸ç¤¾åŒºå’Œå¼€å‘å›¢é˜Ÿç›´æ¥äº¤æµ</li>
</ul>
<p>å…³æ³¨ <strong>GPUStack å®˜æ–¹å…¬ä¼—å·æˆ–åŠ å…¥ç¤¾åŒºäº¤æµç¾¤</strong>ï¼Œç¬¬ä¸€æ—¶é—´è·å–æœ€æ–°çš„ Meetup æ—¶é—´ã€æŠ¥åæ–¹å¼åŠç›´æ’­ä¸»é¢˜æ¨é€ã€‚æœŸå¾…ä¸ä½ åœ¨çº¿ç›¸èšï¼Œä¸€èµ·æ¢ç´¢ GPUStack v2 çš„æ— é™å¯èƒ½ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>