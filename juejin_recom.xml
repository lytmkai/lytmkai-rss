<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[ä½¿ç”¨requestIdleCallbackå’ŒrequestAnimationFrameä¼˜åŒ–å‰ç«¯æ€§èƒ½]]></title>    <link>https://juejin.cn/post/7581333926372687914</link>    <guid>https://juejin.cn/post/7581333926372687914</guid>    <pubDate>2025-12-09T01:48:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581333926372687914" data-draft-id="7581324707480535081" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨requestIdleCallbackå’ŒrequestAnimationFrameä¼˜åŒ–å‰ç«¯æ€§èƒ½"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-09T01:48:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="dorisrv"/> <meta itemprop="url" content="https://juejin.cn/user/1522178380270712"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨requestIdleCallbackå’ŒrequestAnimationFrameä¼˜åŒ–å‰ç«¯æ€§èƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1522178380270712/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    dorisrv
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T01:48:06.000Z" title="Tue Dec 09 2025 01:48:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä½¿ç”¨requestIdleCallbackå’ŒrequestAnimationFrameä¼˜åŒ–å‰ç«¯æ€§èƒ½</h2>
<h3 data-id="heading-1">ğŸ¤” ä¸ºä»€ä¹ˆéœ€è¦æ€§èƒ½ä¼˜åŒ–APIï¼Ÿ</h3>
<p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å¤„ç†å„ç§ä»»åŠ¡ï¼šDOMæ¸²æŸ“ã€æ•°æ®è®¡ç®—ã€ç½‘ç»œè¯·æ±‚ç­‰ã€‚å¦‚æœè¿™äº›ä»»åŠ¡å¤„ç†ä¸å½“ï¼Œå°±ä¼šå¯¼è‡´é¡µé¢å¡é¡¿ã€å“åº”ç¼“æ…¢ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼šç”¨æˆ·æ­£åœ¨æ»šåŠ¨é¡µé¢ï¼ŒåŒæ—¶æˆ‘ä»¬çš„ä»£ç æ­£åœ¨æ‰§è¡Œä¸€ä¸ªå¤æ‚çš„è®¡ç®—ä»»åŠ¡ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´é¡µé¢å¡é¡¿ï¼Œå› ä¸ºJavaScriptæ˜¯å•çº¿ç¨‹çš„ï¼Œå¤æ‚è®¡ç®—ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚</p>
<p>æµè§ˆå™¨æä¾›äº†ä¸¤ä¸ªå¼ºå¤§çš„APIæ¥å¸®åŠ©æˆ‘ä»¬ä¼˜åŒ–è¿™ç§æƒ…å†µï¼š</p>
<ul>
<li><code>requestAnimationFrame</code>ï¼šåœ¨ä¸‹ä¸€æ¬¡æµè§ˆå™¨é‡ç»˜ä¹‹å‰æ‰§è¡Œä»»åŠ¡</li>
<li><code>requestIdleCallback</code>ï¼šåœ¨æµè§ˆå™¨ç©ºé—²æ—¶é—´æ‰§è¡Œä»»åŠ¡</li>
</ul>
<p>è¿™ä¸¤ä¸ªAPIå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´åˆç†åœ°å®‰æ’ä»»åŠ¡æ‰§è¡Œæ—¶é—´ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹ï¼Œæå‡é¡µé¢æµç•…åº¦ã€‚</p>
<h3 data-id="heading-2">ğŸ’¡ åŸºç¡€æ¦‚å¿µ</h3>
<h4 data-id="heading-3">1. requestAnimationFrame</h4>
<p><code>requestAnimationFrame</code>æ˜¯æµè§ˆå™¨æä¾›çš„ä¸€ä¸ªAPIï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨ä¸‹ä¸€æ¬¡æµè§ˆå™¨é‡ç»˜ä¹‹å‰æ‰§è¡Œå›è°ƒå‡½æ•°ã€‚æµè§ˆå™¨é€šå¸¸ä»¥60fpsï¼ˆæ¯ç§’60æ¬¡ï¼‰çš„é¢‘ç‡è¿›è¡Œé‡ç»˜ï¼Œæ‰€ä»¥<code>requestAnimationFrame</code>çš„å›è°ƒå¤§çº¦æ¯16.7msæ‰§è¡Œä¸€æ¬¡ã€‚</p>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>åŠ¨ç”»æ•ˆæœï¼ˆå¦‚å¹³æ»‘æ»šåŠ¨ã€è¿›åº¦æ¡åŠ¨ç”»ï¼‰</li>
<li>éœ€è¦ä¸é¡µé¢æ¸²æŸ“åŒæ­¥çš„ä»»åŠ¡</li>
<li>é¿å…ä¸å¿…è¦çš„é‡ç»˜å’Œå›æµ</li>
</ul>
<h4 data-id="heading-4">2. requestIdleCallback</h4>
<p><code>requestIdleCallback</code>æ˜¯æµè§ˆå™¨æä¾›çš„å¦ä¸€ä¸ªAPIï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨æµè§ˆå™¨ç©ºé—²æ—¶é—´æ‰§è¡Œå›è°ƒå‡½æ•°ã€‚æµè§ˆå™¨ç©ºé—²æ—¶é—´æ˜¯æŒ‡ï¼š</p>
<ul>
<li>æ²¡æœ‰æ›´é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡éœ€è¦æ‰§è¡Œ</li>
<li>ä¸€å¸§çš„æ¸²æŸ“å·¥ä½œå·²ç»å®Œæˆï¼Œè¿˜æœ‰å‰©ä½™æ—¶é—´</li>
</ul>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ä½ä¼˜å…ˆçº§ä»»åŠ¡ï¼ˆå¦‚æ—¥å¿—è®°å½•ã€æ•°æ®ä¸ŠæŠ¥ï¼‰</li>
<li>æ‰¹é‡å¤„ç†å¤§é‡æ•°æ®</li>
<li>é¢„åŠ è½½éå…³é”®èµ„æº</li>
<li>é¿å…å½±å“ç”¨æˆ·äº¤äº’çš„ä»»åŠ¡</li>
</ul>
<h3 data-id="heading-5">ğŸš€ åŸºç¡€å®ç°</h3>
<h4 data-id="heading-6">1. requestAnimationFrame ç¤ºä¾‹ï¼šå¹³æ»‘æ»šåŠ¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¹³æ»‘æ»šåŠ¨åˆ°é¡µé¢é¡¶éƒ¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">smoothScrollToTop</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> startPosition = <span class="hljs-variable language_">window</span>.<span class="hljs-property">pageYOffset</span>;
  <span class="hljs-keyword">const</span> targetPosition = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">const</span> distance = targetPosition - startPosition;
  <span class="hljs-keyword">const</span> duration = <span class="hljs-number">800</span>; <span class="hljs-comment">// åŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span>
  <span class="hljs-keyword">let</span> startTime = <span class="hljs-literal">null</span>;

  <span class="hljs-comment">// åŠ¨ç”»å‡½æ•°</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">animation</span>(<span class="hljs-params">currentTime</span>) {
    <span class="hljs-keyword">if</span> (startTime === <span class="hljs-literal">null</span>) startTime = currentTime;
    <span class="hljs-keyword">const</span> timeElapsed = currentTime - startTime;
    <span class="hljs-keyword">const</span> progress = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(timeElapsed / duration, <span class="hljs-number">1</span>);
    <span class="hljs-comment">// ä½¿ç”¨ç¼“åŠ¨å‡½æ•°è®©åŠ¨ç”»æ›´è‡ªç„¶</span>
    <span class="hljs-keyword">const</span> easeInOutQuad = progress &lt; <span class="hljs-number">0.5</span> ? <span class="hljs-number">2</span> * progress * progress : -<span class="hljs-number">1</span> + (<span class="hljs-number">4</span> - <span class="hljs-number">2</span> * progress) * progress;
    
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">scrollTo</span>(<span class="hljs-number">0</span>, startPosition + distance * easeInOutQuad);
    
    <span class="hljs-keyword">if</span> (timeElapsed &lt; duration) {
      <span class="hljs-title function_">requestAnimationFrame</span>(animation);
    }
  }

  <span class="hljs-title function_">requestAnimationFrame</span>(animation);
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'scrollToTopBtn'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, smoothScrollToTop);
</code></pre>
<h4 data-id="heading-7">2. requestIdleCallback ç¤ºä¾‹ï¼šæ‰¹é‡å¤„ç†æ•°æ®</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// éœ€è¦å¤„ç†çš„å¤§é‡æ•°æ®</span>
<span class="hljs-keyword">const</span> largeData = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: <span class="hljs-number">10000</span> }, <span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> i + <span class="hljs-number">1</span>);
<span class="hljs-keyword">const</span> batchSize = <span class="hljs-number">100</span>; <span class="hljs-comment">// æ¯æ‰¹å¤„ç†çš„æ•°æ®é‡</span>
<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>;

<span class="hljs-comment">// å¤„ç†å•ä¸ªæ•°æ®é¡¹çš„å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processItem</span>(<span class="hljs-params">item</span>) {
  <span class="hljs-comment">// æ¨¡æ‹Ÿå¤æ‚å¤„ç†é€»è¾‘</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å¤„ç†æ•°æ®é¡¹: <span class="hljs-subst">${item}</span>`</span>);
  <span class="hljs-keyword">return</span> item * <span class="hljs-number">2</span>;
}

<span class="hljs-comment">// ä½¿ç”¨requestIdleCallbackæ‰¹é‡å¤„ç†æ•°æ®</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processDataInBatches</span>(<span class="hljs-params">deadline</span>) {
  <span class="hljs-comment">// åªè¦æµè§ˆå™¨æœ‰ç©ºé—²æ—¶é—´ä¸”è¿˜æœ‰æ•°æ®éœ€è¦å¤„ç†</span>
  <span class="hljs-keyword">while</span> (deadline.<span class="hljs-title function_">timeRemaining</span>() &gt; <span class="hljs-number">0</span> &amp;&amp; index &lt; largeData.<span class="hljs-property">length</span>) {
    <span class="hljs-title function_">processItem</span>(largeData[index]);
    index++;
    
    <span class="hljs-comment">// æ¯å¤„ç†batchSizeä¸ªæ•°æ®é¡¹ï¼Œæ£€æŸ¥ä¸€æ¬¡æ—¶é—´</span>
    <span class="hljs-keyword">if</span> (index % batchSize === <span class="hljs-number">0</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å·²å¤„ç† <span class="hljs-subst">${index}</span> ä¸ªæ•°æ®é¡¹`</span>);
      <span class="hljs-keyword">break</span>;
    }
  }
  
  <span class="hljs-comment">// å¦‚æœè¿˜æœ‰æ•°æ®éœ€è¦å¤„ç†ï¼Œç»§ç»­è¯·æ±‚ç©ºé—²æ—¶é—´</span>
  <span class="hljs-keyword">if</span> (index &lt; largeData.<span class="hljs-property">length</span>) {
    <span class="hljs-title function_">requestIdleCallback</span>(processDataInBatches);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰€æœ‰æ•°æ®å¤„ç†å®Œæˆ'</span>);
  }
}

<span class="hljs-comment">// å¯åŠ¨æ‰¹é‡å¤„ç†</span>
<span class="hljs-title function_">requestIdleCallback</span>(processDataInBatches);
</code></pre>
<h3 data-id="heading-8">ğŸ¯ è¿›é˜¶å®ç°ï¼šç»„åˆä½¿ç”¨ä¸¤ä¸ªAPI</h3>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦ç»„åˆä½¿ç”¨è¿™ä¸¤ä¸ªAPIæ¥å®ç°æ›´å¤æ‚çš„æ€§èƒ½ä¼˜åŒ–ã€‚ä¾‹å¦‚ï¼š</p>
<ol>
<li>ä½¿ç”¨<code>requestAnimationFrame</code>æ‰§è¡Œä¸æ¸²æŸ“ç›¸å…³çš„é«˜ä¼˜å…ˆçº§ä»»åŠ¡</li>
<li>ä½¿ç”¨<code>requestIdleCallback</code>æ‰§è¡Œä½ä¼˜å…ˆçº§çš„åå°ä»»åŠ¡</li>
</ol>
<h4 data-id="heading-9">ç¤ºä¾‹ï¼šé«˜æ€§èƒ½åˆ—è¡¨æ¸²æŸ“</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">HighPerformanceList</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">container, items, itemRenderer</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span> = container;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span> = items;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemRenderer</span> = itemRenderer;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">renderedItems</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">batchSize</span> = <span class="hljs-number">20</span>; <span class="hljs-comment">// æ¯æ‰¹æ¸²æŸ“çš„é¡¹ç›®æ•°</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span> = <span class="hljs-number">0</span>;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
  }
  
  <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// é¦–å…ˆæ¸²æŸ“å¯è§åŒºåŸŸçš„é¡¹ç›®ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">renderVisibleItems</span>();
    
    <span class="hljs-comment">// ç„¶ååœ¨ç©ºé—²æ—¶é—´æ¸²æŸ“å‰©ä½™é¡¹ç›®ï¼ˆä½ä¼˜å…ˆçº§ï¼‰</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">renderRemainingItems</span>();
  }
  
  <span class="hljs-title function_">renderVisibleItems</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> containerRect = <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-title function_">getBoundingClientRect</span>();
    <span class="hljs-keyword">const</span> visibleItems = <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
      <span class="hljs-comment">// ç®€åŒ–çš„å¯è§æ€§æ£€æŸ¥</span>
      <span class="hljs-keyword">const</span> itemRect = item.<span class="hljs-property">rect</span> || { <span class="hljs-attr">top</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">0</span> };
      <span class="hljs-keyword">return</span> itemRect.<span class="hljs-property">bottom</span> &gt;= containerRect.<span class="hljs-property">top</span> &amp;&amp; itemRect.<span class="hljs-property">top</span> &lt;= containerRect.<span class="hljs-property">bottom</span>;
    });
    
    <span class="hljs-comment">// ä½¿ç”¨requestAnimationFrameæ¸²æŸ“å¯è§é¡¹ç›®</span>
    <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> {
      visibleItems.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">renderedItems</span>.<span class="hljs-title function_">has</span>(item.<span class="hljs-property">id</span>)) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">renderItem</span>(item);
        }
      });
    });
  }
  
  <span class="hljs-title function_">renderRemainingItems</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ä½¿ç”¨requestIdleCallbackåœ¨ç©ºé—²æ—¶é—´æ¸²æŸ“å‰©ä½™é¡¹ç›®</span>
    <span class="hljs-title function_">requestIdleCallback</span>(<span class="hljs-function">(<span class="hljs-params">deadline</span>) =&gt;</span> {
      <span class="hljs-keyword">let</span> renderedCount = <span class="hljs-number">0</span>;
      
      <span class="hljs-keyword">while</span> (deadline.<span class="hljs-title function_">timeRemaining</span>() &gt; <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span> &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>) {
        <span class="hljs-keyword">const</span> item = <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span>];
        <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">renderedItems</span>.<span class="hljs-title function_">has</span>(item.<span class="hljs-property">id</span>)) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">renderItem</span>(item);
          renderedCount++;
          
          <span class="hljs-comment">// æ¯æ¸²æŸ“batchSizeä¸ªé¡¹ç›®ï¼Œæ£€æŸ¥ä¸€æ¬¡æ—¶é—´</span>
          <span class="hljs-keyword">if</span> (renderedCount &gt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">batchSize</span>) {
            <span class="hljs-keyword">break</span>;
          }
        }
        
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span>++;
      }
      
      <span class="hljs-comment">// å¦‚æœè¿˜æœ‰é¡¹ç›®éœ€è¦æ¸²æŸ“ï¼Œç»§ç»­è¯·æ±‚ç©ºé—²æ—¶é—´</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span> &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">renderRemainingItems</span>();
      }
    });
  }
  
  <span class="hljs-title function_">renderItem</span>(<span class="hljs-params">item</span>) {
    <span class="hljs-keyword">const</span> itemElement = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">itemRenderer</span>(item);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-title function_">appendChild</span>(itemElement);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">renderedItems</span>.<span class="hljs-title function_">add</span>(item.<span class="hljs-property">id</span>);
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'list-container'</span>);
<span class="hljs-keyword">const</span> items = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: <span class="hljs-number">1000</span> }, <span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> ({
  <span class="hljs-attr">id</span>: i,
  <span class="hljs-attr">content</span>: <span class="hljs-string">`é¡¹ç›® <span class="hljs-subst">${i + <span class="hljs-number">1</span>}</span>`</span>,
  <span class="hljs-attr">rect</span>: { <span class="hljs-attr">top</span>: i * <span class="hljs-number">50</span>, <span class="hljs-attr">bottom</span>: (i + <span class="hljs-number">1</span>) * <span class="hljs-number">50</span> }
}));

<span class="hljs-keyword">function</span> <span class="hljs-title function_">itemRenderer</span>(<span class="hljs-params">item</span>) {
  <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
  div.<span class="hljs-property">className</span> = <span class="hljs-string">'list-item'</span>;
  div.<span class="hljs-property">textContent</span> = item.<span class="hljs-property">content</span>;
  <span class="hljs-keyword">return</span> div;
}

<span class="hljs-keyword">new</span> <span class="hljs-title class_">HighPerformanceList</span>(container, items, itemRenderer);
</code></pre>
<h3 data-id="heading-10">ğŸ¨ React ä¸­çš„åº”ç”¨</h3>
<h4 data-id="heading-11">1. ä½¿ç”¨ requestAnimationFrame å®ç°åŠ¨ç”»æ•ˆæœ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useRef, useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">SmoothProgressBar</span> = (<span class="hljs-params">{ progress }</span>) =&gt; {
  <span class="hljs-keyword">const</span> [displayProgress, setDisplayProgress] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> ref = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">let</span> animationId;
    <span class="hljs-keyword">const</span> startValue = displayProgress;
    <span class="hljs-keyword">const</span> targetValue = progress;
    <span class="hljs-keyword">const</span> startTime = performance.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">const</span> duration = <span class="hljs-number">500</span>; <span class="hljs-comment">// åŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span>
    
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">updateProgress</span> = (<span class="hljs-params">currentTime</span>) =&gt; {
      <span class="hljs-keyword">const</span> elapsedTime = currentTime - startTime;
      <span class="hljs-keyword">const</span> progress = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(elapsedTime / duration, <span class="hljs-number">1</span>);
      
      <span class="hljs-comment">// ä½¿ç”¨ç¼“åŠ¨å‡½æ•°</span>
      <span class="hljs-keyword">const</span> easeInOut = progress &lt; <span class="hljs-number">0.5</span> 
        ? <span class="hljs-number">4</span> * progress * progress * progress 
        : (progress - <span class="hljs-number">1</span>) * (<span class="hljs-number">2</span> * progress - <span class="hljs-number">2</span>) * (<span class="hljs-number">2</span> * progress - <span class="hljs-number">2</span>) + <span class="hljs-number">1</span>;
      
      <span class="hljs-keyword">const</span> currentProgress = startValue + (targetValue - startValue) * easeInOut;
      <span class="hljs-title function_">setDisplayProgress</span>(currentProgress);
      
      <span class="hljs-keyword">if</span> (progress &lt; <span class="hljs-number">1</span>) {
        animationId = <span class="hljs-title function_">requestAnimationFrame</span>(updateProgress);
      }
    };
    
    animationId = <span class="hljs-title function_">requestAnimationFrame</span>(updateProgress);
    
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">if</span> (animationId) {
        <span class="hljs-title function_">cancelAnimationFrame</span>(animationId);
      }
    };
  }, [progress]);
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"progress-bar-container"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> 
        <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span>
        <span class="hljs-attr">className</span>=<span class="hljs-string">"progress-bar-fill"</span> 
        <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">width:</span> `${<span class="hljs-attr">displayProgress</span>}%` }}
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"progress-text"</span>&gt;</span>{Math.round(displayProgress)}%<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [progress, setProgress] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleButtonClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setProgress</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(prev + <span class="hljs-number">20</span>, <span class="hljs-number">100</span>));
  };
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"app"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å¹³æ»‘è¿›åº¦æ¡<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">SmoothProgressBar</span> <span class="hljs-attr">progress</span>=<span class="hljs-string">{progress}</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleButtonClick}</span>&gt;</span>å¢åŠ è¿›åº¦<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-12">2. ä½¿ç”¨ requestIdleCallback ä¼˜åŒ–æ•°æ®å¤„ç†</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">LargeDataProcessor</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [processedCount, setProcessedCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> [status, setStatus] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'idle'</span>);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// æ¨¡æ‹Ÿå¤§é‡æ•°æ®</span>
    <span class="hljs-keyword">const</span> largeData = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: <span class="hljs-number">5000</span> }, <span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> i + <span class="hljs-number">1</span>);
    <span class="hljs-keyword">let</span> processedIndex = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">processBatch</span> = (<span class="hljs-params">deadline</span>) =&gt; {
      <span class="hljs-comment">// åªè¦æµè§ˆå™¨æœ‰ç©ºé—²æ—¶é—´ä¸”è¿˜æœ‰æ•°æ®éœ€è¦å¤„ç†</span>
      <span class="hljs-keyword">while</span> (deadline.<span class="hljs-title function_">timeRemaining</span>() &gt; <span class="hljs-number">0</span> &amp;&amp; processedIndex &lt; largeData.<span class="hljs-property">length</span>) {
        <span class="hljs-comment">// æ¨¡æ‹Ÿå¤æ‚çš„æ•°æ®å¤„ç†</span>
        <span class="hljs-keyword">const</span> data = largeData[processedIndex];
        <span class="hljs-keyword">const</span> result = data * <span class="hljs-number">2</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(data);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å¤„ç†æ•°æ® <span class="hljs-subst">${data}</span>ï¼Œç»“æœï¼š<span class="hljs-subst">${result}</span>`</span>);
        
        processedIndex++;
        <span class="hljs-title function_">setProcessedCount</span>(processedIndex);
      }
      
      <span class="hljs-comment">// å¦‚æœè¿˜æœ‰æ•°æ®éœ€è¦å¤„ç†ï¼Œç»§ç»­è¯·æ±‚ç©ºé—²æ—¶é—´</span>
      <span class="hljs-keyword">if</span> (processedIndex &lt; largeData.<span class="hljs-property">length</span>) {
        <span class="hljs-title function_">requestIdleCallback</span>(processBatch);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_">setStatus</span>(<span class="hljs-string">'completed'</span>);
      }
    };
    
    <span class="hljs-comment">// å¯åŠ¨æ•°æ®å¤„ç†</span>
    <span class="hljs-title function_">setStatus</span>(<span class="hljs-string">'processing'</span>);
    <span class="hljs-title function_">requestIdleCallback</span>(processBatch);
    
  }, []);
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"data-processor"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>æ•°æ®å¤„ç†çŠ¶æ€<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>çŠ¶æ€ï¼š{status}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å·²å¤„ç†æ•°æ®ï¼š{processedCount}/5000<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"progress-bar"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> 
          <span class="hljs-attr">className</span>=<span class="hljs-string">"progress-fill"</span> 
          <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">width:</span> `${(<span class="hljs-attr">processedCount</span> / <span class="hljs-attr">5000</span>) * <span class="hljs-attr">100</span>}%` }}
        /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-13">âš ï¸ æ³¨æ„äº‹é¡¹</h3>
<h4 data-id="heading-14">1. æµè§ˆå™¨å…¼å®¹æ€§</h4>
<ul>
<li><code>requestAnimationFrame</code>ï¼šæ”¯æŒæ‰€æœ‰ç°ä»£æµè§ˆå™¨ï¼ŒIE10+å¯ç”¨</li>
<li><code>requestIdleCallback</code>ï¼šæ”¯æŒChrome 47+ã€Firefox 55+ã€Edge 79+ï¼ŒSafariä¸æ”¯æŒ</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šä½¿ç”¨polyfill</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// requestIdleCallback polyfill</span>
<span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">window</span>.<span class="hljs-property">requestIdleCallback</span>) {
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">requestIdleCallback</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">callback, options</span>) {
    <span class="hljs-keyword">const</span> timeout = options &amp;&amp; options.<span class="hljs-property">timeout</span> || <span class="hljs-number">1000</span>;
    <span class="hljs-keyword">const</span> start = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      <span class="hljs-title function_">callback</span>({
        <span class="hljs-attr">didTimeout</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">timeRemaining</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
          <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, timeout - (<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - start));
        }
      });
    }, <span class="hljs-number">1</span>);
  };
  
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">cancelIdleCallback</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">id</span>) {
    <span class="hljs-built_in">clearTimeout</span>(id);
  };
}
</code></pre>
<h4 data-id="heading-15">2. ä¼˜å…ˆçº§ç®¡ç†</h4>
<ul>
<li>ä¸è¦åœ¨<code>requestIdleCallback</code>ä¸­æ‰§è¡Œé«˜ä¼˜å…ˆçº§ä»»åŠ¡ï¼ˆå¦‚ç”¨æˆ·äº¤äº’ã€åŠ¨ç”»ï¼‰</li>
<li>å¯¹äºç´§æ€¥ä»»åŠ¡ï¼Œä½¿ç”¨<code>requestAnimationFrame</code>æˆ–ç›´æ¥æ‰§è¡Œ</li>
<li>ä½¿ç”¨<code>requestIdleCallback</code>çš„<code>timeout</code>é€‰é¡¹ç¡®ä¿ä»»åŠ¡æœ€ç»ˆä¼šè¢«æ‰§è¡Œ</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è®¾ç½®timeoutç¡®ä¿ä»»åŠ¡åœ¨2ç§’å†…æ‰§è¡Œ</span>
<span class="hljs-title function_">requestIdleCallback</span>(handleLowPriorityTask, { <span class="hljs-attr">timeout</span>: <span class="hljs-number">2000</span> });
</code></pre>
<h4 data-id="heading-16">3. æ€§èƒ½ç›‘æ§</h4>
<ul>
<li>ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆå¦‚Chrome DevToolsçš„Performanceé¢æ¿ï¼‰ç›‘æ§é¡µé¢æ€§èƒ½</li>
<li>åˆ†æå¸§ç‡ï¼ˆFPSï¼‰å’Œä¸»çº¿ç¨‹é˜»å¡æƒ…å†µ</li>
<li>è¯†åˆ«éœ€è¦ä¼˜åŒ–çš„ä»»åŠ¡</li>
</ul>
<h4 data-id="heading-17">4. é¿å…æ»¥ç”¨</h4>
<ul>
<li>ä¸è¦å°†æ‰€æœ‰ä»»åŠ¡éƒ½æ”¾å…¥<code>requestAnimationFrame</code>æˆ–<code>requestIdleCallback</code>ä¸­</li>
<li>åªæœ‰åœ¨ç¡®å®éœ€è¦ä¼˜åŒ–æ€§èƒ½æ—¶æ‰ä½¿ç”¨è¿™äº›API</li>
<li>å¯¹äºç®€å•ä»»åŠ¡ï¼Œç›´æ¥æ‰§è¡Œå¯èƒ½æ›´é«˜æ•ˆ</li>
</ul>
<h3 data-id="heading-18">ğŸ“ æ€»ç»“</h3>
<p><code>requestAnimationFrame</code>å’Œ<code>requestIdleCallback</code>æ˜¯æµè§ˆå™¨æä¾›çš„ä¸¤ä¸ªå¼ºå¤§çš„æ€§èƒ½ä¼˜åŒ–APIï¼Œå®ƒä»¬å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´åˆç†åœ°å®‰æ’ä»»åŠ¡æ‰§è¡Œæ—¶é—´ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹ã€‚</p>
<p><strong>requestAnimationFrame</strong>ï¼š</p>
<ul>
<li>ç”¨äºé«˜ä¼˜å…ˆçº§ã€ä¸æ¸²æŸ“ç›¸å…³çš„ä»»åŠ¡</li>
<li>åœ¨ä¸‹ä¸€æ¬¡æµè§ˆå™¨é‡ç»˜ä¹‹å‰æ‰§è¡Œ</li>
<li>é€‚ç”¨äºåŠ¨ç”»æ•ˆæœå’Œéœ€è¦ä¸æ¸²æŸ“åŒæ­¥çš„ä»»åŠ¡</li>
</ul>
<p><strong>requestIdleCallback</strong>ï¼š</p>
<ul>
<li>ç”¨äºä½ä¼˜å…ˆçº§ã€éç´§æ€¥ä»»åŠ¡</li>
<li>åœ¨æµè§ˆå™¨ç©ºé—²æ—¶é—´æ‰§è¡Œ</li>
<li>é€‚ç”¨äºæ‰¹é‡å¤„ç†å’Œåå°ä»»åŠ¡</li>
</ul>
<p>é€šè¿‡åˆç†ä½¿ç”¨è¿™ä¸¤ä¸ªAPIï¼Œæˆ‘ä»¬å¯ä»¥æ˜¾è‘—æå‡é¡µé¢çš„æµç•…åº¦å’Œå“åº”é€Ÿåº¦ï¼Œä¸ºç”¨æˆ·æä¾›æ›´å¥½çš„ä½“éªŒã€‚</p>
<p>å¸Œæœ›è¿™ä¸ªå°æŠ€å·§å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®º ğŸ¤—</p>
<hr/>
<p><strong>ç›¸å…³èµ„æºï¼š</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FWindow%2FrequestAnimationFrame" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/requestAnimationFrame" ref="nofollow noopener noreferrer">MDN - requestAnimationFrame</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FWindow%2FrequestIdleCallback" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/requestIdleCallback" ref="nofollow noopener noreferrer">MDN - requestIdleCallback</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fweb.dev%2Farticles%2Fanimations-guide" target="_blank" title="https://web.dev/articles/animations-guide" ref="nofollow noopener noreferrer">Web.dev - ä¼˜åŒ–åŠ¨ç”»æ€§èƒ½</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.google.com%2Fweb%2Fupdates%2F2015%2F08%2Fusing-requestidlecallback" target="_blank" title="https://developers.google.com/web/updates/2015/08/using-requestidlecallback" ref="nofollow noopener noreferrer">Google Developers - ä½¿ç”¨requestIdleCallback</a></li>
</ul>
<p><strong>æ ‡ç­¾ï¼š</strong> #å‰ç«¯æ€§èƒ½ä¼˜åŒ– #requestAnimationFrame #requestIdleCallback #JavaScriptæ€§èƒ½ #Reactæ€§èƒ½ä¼˜åŒ–</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Reactè½»é‡çº§çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼ˆuseReducer + Context APIï¼‰]]></title>    <link>https://juejin.cn/post/7581324707480584233</link>    <guid>https://juejin.cn/post/7581324707480584233</guid>    <pubDate>2025-12-09T01:48:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581324707480584233" data-draft-id="7581324707480567849" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Reactè½»é‡çº§çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼ˆuseReducer + Context APIï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-09T01:48:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="dorisrv"/> <meta itemprop="url" content="https://juejin.cn/user/1522178380270712"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Reactè½»é‡çº§çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼ˆuseReducer + Context APIï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1522178380270712/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    dorisrv
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T01:48:50.000Z" title="Tue Dec 09 2025 01:48:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Reactè½»é‡çº§çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼ˆuseReducer + Context APIï¼‰</h2>
<h3 data-id="heading-1">ğŸ¤” ä¸ºä»€ä¹ˆéœ€è¦è½»é‡çº§çŠ¶æ€ç®¡ç†ï¼Ÿ</h3>
<p>åœ¨Reactåº”ç”¨å¼€å‘ä¸­ï¼Œéšç€ç»„ä»¶å±‚æ¬¡çš„å¢åŠ å’ŒçŠ¶æ€å¤æ‚åº¦çš„æå‡ï¼Œä¼ ç»Ÿçš„propsä¼ é€’æ–¹å¼ä¼šå˜å¾—è¶Šæ¥è¶Šç¹çï¼š</p>
<ul>
<li>å¤šå±‚çº§ç»„ä»¶éœ€è¦é€šè¿‡propsé€å±‚ä¼ é€’æ•°æ®ï¼ˆprops drillingï¼‰</li>
<li>å¤šä¸ªç»„ä»¶å…±äº«åŒä¸€ä»½çŠ¶æ€æ—¶ï¼ŒçŠ¶æ€åŒæ­¥å˜å¾—å›°éš¾</li>
<li>ç»„ä»¶é—´é€šä¿¡éœ€è¦é€šè¿‡å¤æ‚çš„å›è°ƒå‡½æ•°</li>
<li>å¤§å‹çŠ¶æ€ç®¡ç†åº“ï¼ˆå¦‚Reduxï¼‰å¯èƒ½å¸¦æ¥ä¸å¿…è¦çš„å¤æ‚æ€§</li>
</ul>
<p>å¯¹äºä¸­ç­‰è§„æ¨¡çš„åº”ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Reactå†…ç½®çš„<code>useReducer</code>å’Œ<code>Context API</code>ç»„åˆï¼Œå®ç°ä¸€ä¸ªè½»é‡çº§ã€é«˜æ•ˆçš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼Œæ—¢é¿å…äº†props drillingï¼Œåˆä¸éœ€è¦å¼•å…¥é¢å¤–çš„ä¾èµ–ã€‚</p>
<h3 data-id="heading-2">ğŸ’¡ åŸºç¡€æ¦‚å¿µ</h3>
<h4 data-id="heading-3">1. useReducer Hook</h4>
<p><code>useReducer</code>æ˜¯Reactæä¾›çš„ä¸€ä¸ªHookï¼Œç”¨äºç®¡ç†å¤æ‚çš„çŠ¶æ€é€»è¾‘ã€‚å®ƒç±»ä¼¼äºReduxçš„æ€æƒ³ï¼š</p>
<ul>
<li>çŠ¶æ€é€šè¿‡<code>reducer</code>å‡½æ•°è¿›è¡Œæ›´æ–°</li>
<li>çŠ¶æ€æ›´æ–°éœ€è¦æ´¾å‘ï¼ˆdispatchï¼‰ä¸€ä¸ªåŠ¨ä½œï¼ˆactionï¼‰</li>
<li><code>reducer</code>å‡½æ•°æ¥æ”¶å½“å‰çŠ¶æ€å’ŒåŠ¨ä½œï¼Œè¿”å›æ–°çš„çŠ¶æ€</li>
</ul>
<p><strong>è¯­æ³•</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> [state, dispatch] = <span class="hljs-title function_">useReducer</span>(reducer, initialState);
</code></pre>
<h4 data-id="heading-4">2. Context API</h4>
<p><code>Context API</code>æ˜¯Reactæä¾›çš„ä¸€ç§åœ¨ç»„ä»¶æ ‘ä¸­å…±äº«æ•°æ®çš„æ–¹å¼ï¼Œä¸éœ€è¦é€šè¿‡propsé€å±‚ä¼ é€’ï¼š</p>
<ul>
<li>ä½¿ç”¨<code>createContext</code>åˆ›å»ºä¸€ä¸ªContextå¯¹è±¡</li>
<li>ä½¿ç”¨<code>Provider</code>ç»„ä»¶åŒ…è£¹éœ€è¦å…±äº«æ•°æ®çš„ç»„ä»¶æ ‘</li>
<li>ä½¿ç”¨<code>useContext</code>åœ¨å­ç»„ä»¶ä¸­è·å–å…±äº«æ•°æ®</li>
</ul>
<p><strong>è¯­æ³•</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºContext</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MyContext</span> = <span class="hljs-title function_">createContext</span>(defaultValue);

<span class="hljs-comment">// æä¾›Context</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span>&gt;</span>
  {/* å­ç»„ä»¶ */}
<span class="hljs-tag">&lt;/<span class="hljs-name">MyContext.Provider</span>&gt;</span></span>

<span class="hljs-comment">// æ¶ˆè´¹Context</span>
<span class="hljs-keyword">const</span> value = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">MyContext</span>);
</code></pre>
<h3 data-id="heading-5">ğŸš€ åŸºç¡€å®ç°ï¼šè®¡æ•°å™¨åº”ç”¨</h3>
<p>è®©æˆ‘ä»¬å…ˆé€šè¿‡ä¸€ä¸ªç®€å•çš„è®¡æ•°å™¨åº”ç”¨ï¼Œäº†è§£<code>useReducer</code>å’Œ<code>Context API</code>çš„åŸºç¡€ç”¨æ³•ã€‚</p>
<h4 data-id="heading-6">1. åˆ›å»ºçŠ¶æ€ç®¡ç†æ–‡ä»¶</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/contexts/CounterContext.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { createContext, useContext, useReducer } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// å®šä¹‰åˆå§‹çŠ¶æ€</span>
<span class="hljs-keyword">const</span> initialState = {
  <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">history</span>: [<span class="hljs-number">0</span>],
  <span class="hljs-attr">isUndoDisabled</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">isRedoDisabled</span>: <span class="hljs-literal">true</span>
};

<span class="hljs-comment">// å®šä¹‰actionç±»å‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ActionTypes</span> = {
  <span class="hljs-attr">INCREMENT</span>: <span class="hljs-string">'INCREMENT'</span>,
  <span class="hljs-attr">DECREMENT</span>: <span class="hljs-string">'DECREMENT'</span>,
  <span class="hljs-attr">RESET</span>: <span class="hljs-string">'RESET'</span>,
  <span class="hljs-attr">UNDO</span>: <span class="hljs-string">'UNDO'</span>,
  <span class="hljs-attr">REDO</span>: <span class="hljs-string">'REDO'</span>,
  <span class="hljs-attr">SET_COUNT</span>: <span class="hljs-string">'SET_COUNT'</span>
};

<span class="hljs-comment">// åˆ›å»ºreducerå‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">counterReducer</span> = (<span class="hljs-params">state, action</span>) =&gt; {
  <span class="hljs-keyword">switch</span> (action.<span class="hljs-property">type</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-title class_">ActionTypes</span>.<span class="hljs-property">INCREMENT</span>:
      <span class="hljs-keyword">return</span> {
        ...state,
        <span class="hljs-attr">count</span>: state.<span class="hljs-property">count</span> + <span class="hljs-number">1</span>,
        <span class="hljs-attr">history</span>: [...state.<span class="hljs-property">history</span>, state.<span class="hljs-property">count</span> + <span class="hljs-number">1</span>],
        <span class="hljs-attr">currentIndex</span>: state.<span class="hljs-property">history</span>.<span class="hljs-property">length</span>,
        <span class="hljs-attr">isUndoDisabled</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">isRedoDisabled</span>: <span class="hljs-literal">true</span>
      };
      
    <span class="hljs-keyword">case</span> <span class="hljs-title class_">ActionTypes</span>.<span class="hljs-property">DECREMENT</span>:
      <span class="hljs-keyword">return</span> {
        ...state,
        <span class="hljs-attr">count</span>: state.<span class="hljs-property">count</span> - <span class="hljs-number">1</span>,
        <span class="hljs-attr">history</span>: [...state.<span class="hljs-property">history</span>, state.<span class="hljs-property">count</span> - <span class="hljs-number">1</span>],
        <span class="hljs-attr">currentIndex</span>: state.<span class="hljs-property">history</span>.<span class="hljs-property">length</span>,
        <span class="hljs-attr">isUndoDisabled</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">isRedoDisabled</span>: <span class="hljs-literal">true</span>
      };
      
    <span class="hljs-keyword">case</span> <span class="hljs-title class_">ActionTypes</span>.<span class="hljs-property">RESET</span>:
      <span class="hljs-keyword">return</span> {
        ...state,
        <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">history</span>: [...state.<span class="hljs-property">history</span>, <span class="hljs-number">0</span>],
        <span class="hljs-attr">currentIndex</span>: state.<span class="hljs-property">history</span>.<span class="hljs-property">length</span>,
        <span class="hljs-attr">isUndoDisabled</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">isRedoDisabled</span>: <span class="hljs-literal">true</span>
      };
      
    <span class="hljs-keyword">case</span> <span class="hljs-title class_">ActionTypes</span>.<span class="hljs-property">UNDO</span>:
      <span class="hljs-keyword">if</span> (state.<span class="hljs-property">currentIndex</span> &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> state;
      <span class="hljs-keyword">const</span> newIndex = state.<span class="hljs-property">currentIndex</span> - <span class="hljs-number">1</span>;
      <span class="hljs-keyword">return</span> {
        ...state,
        <span class="hljs-attr">count</span>: state.<span class="hljs-property">history</span>[newIndex],
        <span class="hljs-attr">currentIndex</span>: newIndex,
        <span class="hljs-attr">isUndoDisabled</span>: newIndex === <span class="hljs-number">0</span>,
        <span class="hljs-attr">isRedoDisabled</span>: <span class="hljs-literal">false</span>
      };
      
    <span class="hljs-keyword">case</span> <span class="hljs-title class_">ActionTypes</span>.<span class="hljs-property">REDO</span>:
      <span class="hljs-keyword">if</span> (state.<span class="hljs-property">currentIndex</span> &gt;= state.<span class="hljs-property">history</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> state;
      <span class="hljs-keyword">const</span> nextIndex = state.<span class="hljs-property">currentIndex</span> + <span class="hljs-number">1</span>;
      <span class="hljs-keyword">return</span> {
        ...state,
        <span class="hljs-attr">count</span>: state.<span class="hljs-property">history</span>[nextIndex],
        <span class="hljs-attr">currentIndex</span>: nextIndex,
        <span class="hljs-attr">isUndoDisabled</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">isRedoDisabled</span>: nextIndex === state.<span class="hljs-property">history</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>
      };
      
    <span class="hljs-keyword">case</span> <span class="hljs-title class_">ActionTypes</span>.<span class="hljs-property">SET_COUNT</span>:
      <span class="hljs-keyword">return</span> {
        ...state,
        <span class="hljs-attr">count</span>: action.<span class="hljs-property">payload</span>,
        <span class="hljs-attr">history</span>: [...state.<span class="hljs-property">history</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, state.<span class="hljs-property">currentIndex</span> + <span class="hljs-number">1</span>), action.<span class="hljs-property">payload</span>],
        <span class="hljs-attr">currentIndex</span>: state.<span class="hljs-property">currentIndex</span> + <span class="hljs-number">1</span>,
        <span class="hljs-attr">isUndoDisabled</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">isRedoDisabled</span>: <span class="hljs-literal">true</span>
      };
      
    <span class="hljs-attr">default</span>:
      <span class="hljs-keyword">return</span> state;
  }
};

<span class="hljs-comment">// åˆ›å»ºContext</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">CounterContext</span> = <span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>);

<span class="hljs-comment">// åˆ›å»ºProviderç»„ä»¶</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">CounterProvider</span> = (<span class="hljs-params">{ children }</span>) =&gt; {
  <span class="hljs-keyword">const</span> [state, dispatch] = <span class="hljs-title function_">useReducer</span>(counterReducer, initialState);
  
  <span class="hljs-comment">// å®šä¹‰æ“ä½œå‡½æ•°</span>
  <span class="hljs-keyword">const</span> actions = {
    <span class="hljs-attr">increment</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">ActionTypes</span>.<span class="hljs-property">INCREMENT</span> }),
    <span class="hljs-attr">decrement</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">ActionTypes</span>.<span class="hljs-property">DECREMENT</span> }),
    <span class="hljs-attr">reset</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">ActionTypes</span>.<span class="hljs-property">RESET</span> }),
    <span class="hljs-attr">undo</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">ActionTypes</span>.<span class="hljs-property">UNDO</span> }),
    <span class="hljs-attr">redo</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">ActionTypes</span>.<span class="hljs-property">REDO</span> }),
    <span class="hljs-attr">setCount</span>: <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">ActionTypes</span>.<span class="hljs-property">SET_COUNT</span>, <span class="hljs-attr">payload</span>: value })
  };
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">CounterContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">state</span>, <span class="hljs-attr">...actions</span> }}&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">CounterContext.Provider</span>&gt;</span></span>
  );
};

<span class="hljs-comment">// åˆ›å»ºè‡ªå®šä¹‰Hookï¼Œæ–¹ä¾¿åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useCounter</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> context = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">CounterContext</span>);
  <span class="hljs-keyword">if</span> (!context) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'useCounter must be used within a CounterProvider'</span>);
  }
  <span class="hljs-keyword">return</span> context;
};
</code></pre>
<h4 data-id="heading-7">2. åœ¨åº”ç”¨ä¸­ä½¿ç”¨Provider</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/App.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CounterProvider</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./contexts/CounterContext'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">CounterDisplay</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/CounterDisplay'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">CounterControls</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/CounterControls'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">CounterHistory</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/CounterHistory'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">CounterProvider</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"app"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>React è½»é‡çº§çŠ¶æ€ç®¡ç†ç¤ºä¾‹<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">CounterDisplay</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">CounterControls</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">CounterHistory</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">CounterProvider</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;
</code></pre>
<h4 data-id="heading-8">3. åˆ›å»ºæ¶ˆè´¹ç»„ä»¶</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/components/CounterDisplay.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { useCounter } <span class="hljs-keyword">from</span> <span class="hljs-string">'../contexts/CounterContext'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">CounterDisplay</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> { state } = <span class="hljs-title function_">useCounter</span>();
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"counter-display"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å½“å‰è®¡æ•°ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"count-value"</span>&gt;</span>{state.count}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">CounterDisplay</span>;

<span class="hljs-comment">// src/components/CounterControls.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { useCounter } <span class="hljs-keyword">from</span> <span class="hljs-string">'../contexts/CounterContext'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">CounterControls</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> { increment, decrement, reset, undo, redo, state } = <span class="hljs-title function_">useCounter</span>();
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"counter-controls"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{increment}</span>&gt;</span>+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{decrement}</span>&gt;</span>-1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{reset}</span>&gt;</span>é‡ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{undo}</span> 
        <span class="hljs-attr">disabled</span>=<span class="hljs-string">{state.isUndoDisabled}</span>
        <span class="hljs-attr">title</span>=<span class="hljs-string">"æ’¤é”€"</span>
      &gt;</span>
        â†¶
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{redo}</span> 
        <span class="hljs-attr">disabled</span>=<span class="hljs-string">{state.isRedoDisabled}</span>
        <span class="hljs-attr">title</span>=<span class="hljs-string">"é‡åš"</span>
      &gt;</span>
        â†·
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">CounterControls</span>;

<span class="hljs-comment">// src/components/CounterHistory.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { useCounter } <span class="hljs-keyword">from</span> <span class="hljs-string">'../contexts/CounterContext'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">CounterHistory</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> { state, setCount } = <span class="hljs-title function_">useCounter</span>();
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"counter-history"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>è®¡æ•°å†å²<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"history-list"</span>&gt;</span>
        {state.history.map((count, index) =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
            <span class="hljs-attr">key</span>=<span class="hljs-string">{index}</span>
            <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">history-item</span> ${<span class="hljs-attr">index</span> === <span class="hljs-string">state.currentIndex</span> ? '<span class="hljs-attr">active</span>' <span class="hljs-attr">:</span> ''}`}
            <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count)}
          &gt;
            {count}
          <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">CounterHistory</span>;
</code></pre>
<h3 data-id="heading-9">ğŸ¯ è¿›é˜¶å®ç°ï¼šè´­ç‰©è½¦åº”ç”¨</h3>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªæ›´å¤æ‚çš„è´­ç‰©è½¦åº”ç”¨ï¼Œå±•ç¤ºè¿™ä¸ªçŠ¶æ€ç®¡ç†æ–¹æ¡ˆçš„å¼ºå¤§åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-10">1. åˆ›å»ºè´­ç‰©è½¦çŠ¶æ€ç®¡ç†</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/contexts/CartContext.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { createContext, useContext, useReducer } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// å®šä¹‰åˆå§‹çŠ¶æ€</span>
<span class="hljs-keyword">const</span> initialState = {
  <span class="hljs-attr">items</span>: [],
  <span class="hljs-attr">totalItems</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">totalPrice</span>: <span class="hljs-number">0</span>
};

<span class="hljs-comment">// å®šä¹‰actionç±»å‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ActionTypes</span> = {
  <span class="hljs-attr">ADD_ITEM</span>: <span class="hljs-string">'ADD_ITEM'</span>,
  <span class="hljs-attr">REMOVE_ITEM</span>: <span class="hljs-string">'REMOVE_ITEM'</span>,
  <span class="hljs-attr">UPDATE_QUANTITY</span>: <span class="hljs-string">'UPDATE_QUANTITY'</span>,
  <span class="hljs-attr">CLEAR_CART</span>: <span class="hljs-string">'CLEAR_CART'</span>,
  <span class="hljs-attr">TOGGLE_ITEM_SELECTION</span>: <span class="hljs-string">'TOGGLE_ITEM_SELECTION'</span>,
  <span class="hljs-attr">SELECT_ALL_ITEMS</span>: <span class="hljs-string">'SELECT_ALL_ITEMS'</span>
};

<span class="hljs-comment">// åˆ›å»ºreducerå‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">cartReducer</span> = (<span class="hljs-params">state, action</span>) =&gt; {
  <span class="hljs-keyword">switch</span> (action.<span class="hljs-property">type</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-title class_">ActionTypes</span>.<span class="hljs-property">ADD_ITEM</span>: {
      <span class="hljs-keyword">const</span> { product, quantity = <span class="hljs-number">1</span> } = action.<span class="hljs-property">payload</span>;
      <span class="hljs-keyword">const</span> existingItemIndex = state.<span class="hljs-property">items</span>.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">product</span>.<span class="hljs-property">id</span> === product.<span class="hljs-property">id</span>);
      
      <span class="hljs-keyword">let</span> newItems;
      <span class="hljs-keyword">if</span> (existingItemIndex &gt;= <span class="hljs-number">0</span>) {
        <span class="hljs-comment">// å•†å“å·²å­˜åœ¨ï¼Œæ›´æ–°æ•°é‡</span>
        newItems = [...state.<span class="hljs-property">items</span>];
        newItems[existingItemIndex] = {
          ...newItems[existingItemIndex],
          <span class="hljs-attr">quantity</span>: newItems[existingItemIndex].<span class="hljs-property">quantity</span> + quantity
        };
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// æ–°å•†å“ï¼Œæ·»åŠ åˆ°è´­ç‰©è½¦</span>
        newItems = [...state.<span class="hljs-property">items</span>, { product, quantity, <span class="hljs-attr">selected</span>: <span class="hljs-literal">true</span> }];
      }
      
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">calculateTotals</span>(newItems);
    }
    
    <span class="hljs-keyword">case</span> <span class="hljs-title class_">ActionTypes</span>.<span class="hljs-property">REMOVE_ITEM</span>: {
      <span class="hljs-keyword">const</span> newItems = state.<span class="hljs-property">items</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">product</span>.<span class="hljs-property">id</span> !== action.<span class="hljs-property">payload</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">calculateTotals</span>(newItems);
    }
    
    <span class="hljs-keyword">case</span> <span class="hljs-title class_">ActionTypes</span>.<span class="hljs-property">UPDATE_QUANTITY</span>: {
      <span class="hljs-keyword">const</span> { productId, quantity } = action.<span class="hljs-property">payload</span>;
      <span class="hljs-keyword">if</span> (quantity &lt;= <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> state;
      }
      
      <span class="hljs-keyword">const</span> newItems = state.<span class="hljs-property">items</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> 
        item.<span class="hljs-property">product</span>.<span class="hljs-property">id</span> === productId 
          ? { ...item, quantity } 
          : item
      );
      
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">calculateTotals</span>(newItems);
    }
    
    <span class="hljs-keyword">case</span> <span class="hljs-title class_">ActionTypes</span>.<span class="hljs-property">CLEAR_CART</span>: {
      <span class="hljs-keyword">return</span> initialState;
    }
    
    <span class="hljs-keyword">case</span> <span class="hljs-title class_">ActionTypes</span>.<span class="hljs-property">TOGGLE_ITEM_SELECTION</span>: {
      <span class="hljs-keyword">const</span> newItems = state.<span class="hljs-property">items</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> 
        item.<span class="hljs-property">product</span>.<span class="hljs-property">id</span> === action.<span class="hljs-property">payload</span> 
          ? { ...item, <span class="hljs-attr">selected</span>: !item.<span class="hljs-property">selected</span> } 
          : item
      );
      
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">calculateTotals</span>(newItems);
    }
    
    <span class="hljs-keyword">case</span> <span class="hljs-title class_">ActionTypes</span>.<span class="hljs-property">SELECT_ALL_ITEMS</span>: {
      <span class="hljs-keyword">const</span> { selected } = action.<span class="hljs-property">payload</span>;
      <span class="hljs-keyword">const</span> newItems = state.<span class="hljs-property">items</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> ({ ...item, selected }));
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">calculateTotals</span>(newItems);
    }
    
    <span class="hljs-attr">default</span>:
      <span class="hljs-keyword">return</span> state;
  }
};

<span class="hljs-comment">// è®¡ç®—è´­ç‰©è½¦æ€»è®¡</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">calculateTotals</span> = (<span class="hljs-params">items</span>) =&gt; {
  <span class="hljs-keyword">const</span> totalItems = items.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, item</span>) =&gt;</span> sum + item.<span class="hljs-property">quantity</span>, <span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> totalPrice = items.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, item</span>) =&gt;</span> 
    sum + (item.<span class="hljs-property">selected</span> ? item.<span class="hljs-property">product</span>.<span class="hljs-property">price</span> * item.<span class="hljs-property">quantity</span> : <span class="hljs-number">0</span>), <span class="hljs-number">0</span>
  );
  
  <span class="hljs-keyword">return</span> {
    items,
    totalItems,
    totalPrice
  };
};

<span class="hljs-comment">// åˆ›å»ºContext</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">CartContext</span> = <span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>);

<span class="hljs-comment">// åˆ›å»ºProviderç»„ä»¶</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">CartProvider</span> = (<span class="hljs-params">{ children }</span>) =&gt; {
  <span class="hljs-keyword">const</span> [state, dispatch] = <span class="hljs-title function_">useReducer</span>(cartReducer, initialState);
  
  <span class="hljs-comment">// å®šä¹‰æ“ä½œå‡½æ•°</span>
  <span class="hljs-keyword">const</span> actions = {
    <span class="hljs-attr">addItem</span>: <span class="hljs-function">(<span class="hljs-params">product, quantity = <span class="hljs-number">1</span></span>) =&gt;</span> 
      <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">ActionTypes</span>.<span class="hljs-property">ADD_ITEM</span>, <span class="hljs-attr">payload</span>: { product, quantity } }),
    
    <span class="hljs-attr">removeItem</span>: <span class="hljs-function">(<span class="hljs-params">productId</span>) =&gt;</span> 
      <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">ActionTypes</span>.<span class="hljs-property">REMOVE_ITEM</span>, <span class="hljs-attr">payload</span>: productId }),
    
    <span class="hljs-attr">updateQuantity</span>: <span class="hljs-function">(<span class="hljs-params">productId, quantity</span>) =&gt;</span> 
      <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">ActionTypes</span>.<span class="hljs-property">UPDATE_QUANTITY</span>, <span class="hljs-attr">payload</span>: { productId, quantity } }),
    
    <span class="hljs-attr">clearCart</span>: <span class="hljs-function">() =&gt;</span> 
      <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">ActionTypes</span>.<span class="hljs-property">CLEAR_CART</span> }),
    
    <span class="hljs-attr">toggleItemSelection</span>: <span class="hljs-function">(<span class="hljs-params">productId</span>) =&gt;</span> 
      <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">ActionTypes</span>.<span class="hljs-property">TOGGLE_ITEM_SELECTION</span>, <span class="hljs-attr">payload</span>: productId }),
    
    <span class="hljs-attr">selectAllItems</span>: <span class="hljs-function">(<span class="hljs-params">selected</span>) =&gt;</span> 
      <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">ActionTypes</span>.<span class="hljs-property">SELECT_ALL_ITEMS</span>, <span class="hljs-attr">payload</span>: { selected } })
  };
  
  <span class="hljs-comment">// å¯¼å‡ºé¢å¤–çš„è®¡ç®—å±æ€§</span>
  <span class="hljs-keyword">const</span> computed = {
    <span class="hljs-comment">// è·å–é€‰ä¸­çš„å•†å“</span>
    <span class="hljs-attr">selectedItems</span>: state.<span class="hljs-property">items</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">selected</span>),
    <span class="hljs-comment">// è·å–é€‰ä¸­å•†å“çš„æ•°é‡</span>
    <span class="hljs-attr">selectedItemsCount</span>: state.<span class="hljs-property">items</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, item</span>) =&gt;</span> 
      sum + (item.<span class="hljs-property">selected</span> ? item.<span class="hljs-property">quantity</span> : <span class="hljs-number">0</span>), <span class="hljs-number">0</span>
    ),
    <span class="hljs-comment">// æ˜¯å¦å…¨é€‰</span>
    <span class="hljs-attr">isAllSelected</span>: state.<span class="hljs-property">items</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> &amp;&amp; state.<span class="hljs-property">items</span>.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">selected</span>)
  };
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">CartContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">state</span>, <span class="hljs-attr">...actions</span>, <span class="hljs-attr">...computed</span> }}&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">CartContext.Provider</span>&gt;</span></span>
  );
};

<span class="hljs-comment">// åˆ›å»ºè‡ªå®šä¹‰Hook</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useCart</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> context = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">CartContext</span>);
  <span class="hljs-keyword">if</span> (!context) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'useCart must be used within a CartProvider'</span>);
  }
  <span class="hljs-keyword">return</span> context;
};
</code></pre>
<h4 data-id="heading-11">2. å•†å“åˆ—è¡¨ç»„ä»¶</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/components/ProductList.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { useCart } <span class="hljs-keyword">from</span> <span class="hljs-string">'../contexts/CartContext'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">ProductList</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// æ¨¡æ‹Ÿå•†å“æ•°æ®</span>
  <span class="hljs-keyword">const</span> products = [
    { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'React Hooks å®æˆ˜'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">89.99</span>, <span class="hljs-attr">category</span>: <span class="hljs-string">'ä¹¦ç±'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'JavaScript é«˜çº§ç¨‹åºè®¾è®¡'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">99.99</span>, <span class="hljs-attr">category</span>: <span class="hljs-string">'ä¹¦ç±'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'å‰ç«¯å·¥ç¨‹åŒ–å®è·µ'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">79.99</span>, <span class="hljs-attr">category</span>: <span class="hljs-string">'ä¹¦ç±'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Vue.js ä»å…¥é—¨åˆ°ç²¾é€š'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">85.99</span>, <span class="hljs-attr">category</span>: <span class="hljs-string">'ä¹¦ç±'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'TypeScript æƒå¨æŒ‡å—'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">95.99</span>, <span class="hljs-attr">category</span>: <span class="hljs-string">'ä¹¦ç±'</span> }
  ];
  
  <span class="hljs-keyword">const</span> { addItem } = <span class="hljs-title function_">useCart</span>();
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"product-list"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å•†å“åˆ—è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"products"</span>&gt;</span>
        {products.map(product =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{product.id}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"product-card"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>{product.name}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"product-price"</span>&gt;</span>Â¥{product.price.toFixed(2)}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"product-category"</span>&gt;</span>{product.category}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
              <span class="hljs-attr">className</span>=<span class="hljs-string">"add-to-cart-btn"</span>
              <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> addItem(product, 1)}
            &gt;
              æ·»åŠ åˆ°è´­ç‰©è½¦
            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">ProductList</span>;
</code></pre>
<h4 data-id="heading-12">3. è´­ç‰©è½¦ç»„ä»¶</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/components/ShoppingCart.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { useCart } <span class="hljs-keyword">from</span> <span class="hljs-string">'../contexts/CartContext'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">ShoppingCart</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> { 
    state, 
    removeItem, 
    updateQuantity, 
    clearCart, 
    toggleItemSelection,
    selectAllItems,
    isAllSelected,
    selectedItemsCount
  } = <span class="hljs-title function_">useCart</span>();
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"shopping-cart"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>è´­ç‰©è½¦ ({state.totalItems} ä»¶å•†å“)<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      
      {state.items.length === 0 ? (
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"empty-cart"</span>&gt;</span>è´­ç‰©è½¦æ˜¯ç©ºçš„<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      ) : (
        <span class="hljs-tag">&lt;&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"cart-header"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
              <span class="hljs-attr">className</span>=<span class="hljs-string">"select-all-btn"</span>
              <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> selectAllItems(!isAllSelected)}
            &gt;
              {isAllSelected ? 'å–æ¶ˆå…¨é€‰' : 'å…¨é€‰'}
            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
              <span class="hljs-attr">className</span>=<span class="hljs-string">"clear-cart-btn"</span>
              <span class="hljs-attr">onClick</span>=<span class="hljs-string">{clearCart}</span>
            &gt;</span>
              æ¸…ç©ºè´­ç‰©è½¦
            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"cart-items"</span>&gt;</span>
            {state.items.map(item =&gt; (
              <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{item.product.id}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"cart-item"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"item-select"</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
                    <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> 
                    <span class="hljs-attr">checked</span>=<span class="hljs-string">{item.selected}</span> 
                    <span class="hljs-attr">onChange</span>=<span class="hljs-string">{()</span> =&gt;</span> toggleItemSelection(item.product.id)}
                  /&gt;
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"item-info"</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>{item.product.name}<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"item-price"</span>&gt;</span>Â¥{item.product.price.toFixed(2)}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"item-quantity"</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
                    <span class="hljs-attr">className</span>=<span class="hljs-string">"quantity-btn"</span>
                    <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> updateQuantity(item.product.id, item.quantity - 1)}
                  &gt;
                    -
                  <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{item.quantity}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
                    <span class="hljs-attr">className</span>=<span class="hljs-string">"quantity-btn"</span>
                    <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> updateQuantity(item.product.id, item.quantity + 1)}
                  &gt;
                    +
                  <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"item-total"</span>&gt;</span>
                  Â¥{(item.product.price * item.quantity).toFixed(2)}
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
                  <span class="hljs-attr">className</span>=<span class="hljs-string">"remove-btn"</span>
                  <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> removeItem(item.product.id)}
                &gt;
                  åˆ é™¤
                <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            ))}
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"cart-summary"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"summary-info"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å·²é€‰å•†å“ï¼š{selectedItemsCount} ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>åˆè®¡ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"total-price"</span>&gt;</span>Â¥{state.totalPrice.toFixed(2)}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"checkout-btn"</span>&gt;</span>å»ç»“ç®—<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/&gt;</span></span>
      )}
    &lt;/div&gt;
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">ShoppingCart</span>;
</code></pre>
<h3 data-id="heading-13">âš ï¸ æ³¨æ„äº‹é¡¹</h3>
<h4 data-id="heading-14">1. æ€§èƒ½ä¼˜åŒ–</h4>
<ul>
<li><strong>é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“</strong>ï¼šä½¿ç”¨<code>React.memo</code>ä¼˜åŒ–ç»„ä»¶ï¼Œé¿å…å› Contextæ›´æ–°å¯¼è‡´æ‰€æœ‰å­ç»„ä»¶é‡æ¸²æŸ“</li>
<li><strong>æ‹†åˆ†Context</strong>ï¼šæ ¹æ®åŠŸèƒ½å°†çŠ¶æ€æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹çš„Contextï¼Œé¿å…å•ä¸€Contextè¿‡å¤§</li>
<li><strong>ä½¿ç”¨useMemo</strong>ï¼šåœ¨Providerä¸­ä½¿ç”¨<code>useMemo</code>ç¼“å­˜å€¼ï¼Œé¿å…ä¸å¿…è¦çš„Contextå€¼æ›´æ–°</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨Providerä¸­ä½¿ç”¨useMemoä¼˜åŒ–</span>
<span class="hljs-keyword">const</span> value = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> ({ state, ...actions }), [state, actions]);

<span class="hljs-keyword">return</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">CounterContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span>&gt;</span>
    {children}
  <span class="hljs-tag">&lt;/<span class="hljs-name">CounterContext.Provider</span>&gt;</span></span>
);
</code></pre>
<h4 data-id="heading-15">2. çŠ¶æ€è®¾è®¡åŸåˆ™</h4>
<ul>
<li><strong>å•ä¸€æ•°æ®æº</strong>ï¼šæ¯ä¸ªçŠ¶æ€æœ€å¥½åªåœ¨ä¸€ä¸ªåœ°æ–¹ç®¡ç†</li>
<li><strong>ä¸å¯å˜æ€§</strong>ï¼šçŠ¶æ€æ›´æ–°æ—¶åº”è¿”å›æ–°çš„çŠ¶æ€å¯¹è±¡ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹åŸçŠ¶æ€</li>
<li><strong>åˆç†æ‹†åˆ†</strong>ï¼šå°†ç›¸å…³çš„çŠ¶æ€å’Œæ“ä½œæ”¾åœ¨ä¸€èµ·ï¼Œé¿å…å•ä¸€reducerå¤„ç†æ‰€æœ‰çŠ¶æ€</li>
</ul>
<h4 data-id="heading-16">3. è°ƒè¯•æŠ€å·§</h4>
<ul>
<li>ä½¿ç”¨React DevToolsçš„Contexté€‰é¡¹å¡æŸ¥çœ‹Contextå€¼</li>
<li>åœ¨reducerå‡½æ•°ä¸­æ·»åŠ æ—¥å¿—ï¼Œè·Ÿè¸ªçŠ¶æ€æ›´æ–°è¿‡ç¨‹</li>
<li>ä½¿ç”¨Redux DevTools Extensionï¼ˆéœ€è¦é¢å¤–é…ç½®ï¼‰æŸ¥çœ‹çŠ¶æ€å†å²å’Œactionè®°å½•</li>
</ul>
<h4 data-id="heading-17">4. åº”ç”¨åœºæ™¯</h4>
<p>è¿™ç§è½»é‡çº§çŠ¶æ€ç®¡ç†æ–¹æ¡ˆé€‚ç”¨äºï¼š</p>
<ul>
<li>ä¸­ç­‰è§„æ¨¡çš„Reactåº”ç”¨</li>
<li>éœ€è¦é¿å…props drillingçš„ç»„ä»¶æ ‘</li>
<li>å¤šä¸ªç»„ä»¶å…±äº«åŒä¸€ä»½çŠ¶æ€</li>
<li>ä¸å¸Œæœ›å¼•å…¥é¢å¤–ä¾èµ–çš„é¡¹ç›®</li>
</ul>
<p>å¯¹äºå¤§å‹å¤æ‚åº”ç”¨ï¼Œå¯èƒ½ä»ç„¶éœ€è¦ä½¿ç”¨ä¸“ä¸šçš„çŠ¶æ€ç®¡ç†åº“ï¼ˆå¦‚Reduxã€MobXï¼‰ã€‚</p>
<h3 data-id="heading-18">ğŸ“ æ€»ç»“</h3>
<p>é€šè¿‡ç»„åˆä½¿ç”¨Reactå†…ç½®çš„<code>useReducer</code>å’Œ<code>Context API</code>ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ªè½»é‡çº§ã€é«˜æ•ˆçš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼š</p>
<ol>
<li><strong>é¿å…props drilling</strong>ï¼šé€šè¿‡Contextåœ¨ç»„ä»¶æ ‘ä¸­ç›´æ¥å…±äº«çŠ¶æ€</li>
<li><strong>é›†ä¸­ç®¡ç†çŠ¶æ€</strong>ï¼šä½¿ç”¨reducerå‡½æ•°ç»Ÿä¸€å¤„ç†çŠ¶æ€æ›´æ–°é€»è¾‘</li>
<li><strong>ç®€åŒ–ç»„ä»¶é—´é€šä¿¡</strong>ï¼šç»„ä»¶å¯ä»¥ç›´æ¥è·å–å’Œæ›´æ–°å…±äº«çŠ¶æ€</li>
<li><strong>æ— éœ€é¢å¤–ä¾èµ–</strong>ï¼šåˆ©ç”¨Reactå†…ç½®åŠŸèƒ½ï¼Œå‡å°‘é¡¹ç›®ä¾èµ–</li>
<li><strong>è‰¯å¥½çš„å¯ç»´æŠ¤æ€§</strong>ï¼šçŠ¶æ€é€»è¾‘ä¸UIç»„ä»¶åˆ†ç¦»ï¼Œä¾¿äºæµ‹è¯•å’Œç»´æŠ¤</li>
</ol>
<p>è¿™ç§æ–¹æ¡ˆå…¼é¡¾äº†ç®€æ´æ€§å’ŒåŠŸèƒ½æ€§ï¼Œæ˜¯ä¸­ç­‰è§„æ¨¡Reactåº”ç”¨çš„ç†æƒ³é€‰æ‹©ã€‚é€šè¿‡åˆç†çš„çŠ¶æ€è®¾è®¡å’Œæ€§èƒ½ä¼˜åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºå‡ºé«˜æ•ˆã€å¯ç»´æŠ¤çš„å‰ç«¯åº”ç”¨ã€‚</p>
<p>å¸Œæœ›è¿™ä¸ªå°æŠ€å·§å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®º ğŸ¤—</p>
<hr/>
<p><strong>ç›¸å…³èµ„æºï¼š</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Freact.dev%2Freference%2Freact%2FuseReducer" target="_blank" title="https://react.dev/reference/react/useReducer" ref="nofollow noopener noreferrer">React å®˜æ–¹æ–‡æ¡£ - useReducer</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Freact.dev%2Flearn%2Fpassing-data-deeply-with-context" target="_blank" title="https://react.dev/learn/passing-data-deeply-with-context" ref="nofollow noopener noreferrer">React å®˜æ–¹æ–‡æ¡£ - Context API</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FArray" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array" ref="nofollow noopener noreferrer">MDN - JavaScript Array Methods</a></li>
</ul>
<p><strong>æ ‡ç­¾ï¼š</strong> #React #çŠ¶æ€ç®¡ç† #useReducer #ContextAPI #å‰ç«¯å¼€å‘</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CSS Grid + Flexboxå“åº”å¼å¤æ‚å¸ƒå±€å®ç°]]></title>    <link>https://juejin.cn/post/7581312433530470443</link>    <guid>https://juejin.cn/post/7581312433530470443</guid>    <pubDate>2025-12-09T01:50:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581312433530470443" data-draft-id="7581329603777609764" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CSS Grid + Flexboxå“åº”å¼å¤æ‚å¸ƒå±€å®ç°"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-09T01:50:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="dorisrv"/> <meta itemprop="url" content="https://juejin.cn/user/1522178380270712"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CSS Grid + Flexboxå“åº”å¼å¤æ‚å¸ƒå±€å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1522178380270712/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    dorisrv
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T01:50:12.000Z" title="Tue Dec 09 2025 01:50:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">CSS Grid + Flexboxå“åº”å¼å¤æ‚å¸ƒå±€å®ç°</h2>
<h3 data-id="heading-1">ğŸ¤” ä¸ºä»€ä¹ˆéœ€è¦ç»“åˆCSS Gridå’ŒFlexboxï¼Ÿ</h3>
<p>åœ¨å‰ç«¯å¸ƒå±€ä¸­ï¼ŒCSS Gridå’ŒFlexboxæ˜¯ä¸¤ç§å¼ºå¤§çš„å¸ƒå±€å·¥å…·ï¼Œä½†å®ƒä»¬å„è‡ªæ“…é•¿ä¸åŒçš„åœºæ™¯ï¼š</p>
<ul>
<li><strong>Flexbox</strong>ï¼šä¸€ç»´å¸ƒå±€ï¼ˆè¡Œæˆ–åˆ—ï¼‰ï¼Œé€‚åˆå¤„ç†å…ƒç´ çš„å¯¹é½ã€åˆ†å¸ƒå’Œå¼¹æ€§ä¼¸ç¼©</li>
<li><strong>CSS Grid</strong>ï¼šäºŒç»´å¸ƒå±€ï¼ˆè¡Œå’Œåˆ—åŒæ—¶ï¼‰ï¼Œé€‚åˆåˆ›å»ºå¤æ‚çš„ç½‘æ ¼ç»“æ„å’Œç²¾ç¡®çš„å…ƒç´ å®šä½</li>
</ul>
<p>ç»“åˆä½¿ç”¨è¿™ä¸¤ç§å¸ƒå±€æŠ€æœ¯ï¼Œæˆ‘ä»¬å¯ä»¥ï¼š</p>
<ul>
<li>å¿«é€Ÿæ„å»ºå¤æ‚çš„å“åº”å¼ç•Œé¢</li>
<li>çµæ´»å¤„ç†ä¸åŒå°ºå¯¸å’Œå½¢çŠ¶çš„å…ƒç´ </li>
<li>å‡å°‘å¸ƒå±€åµŒå¥—å±‚çº§ï¼Œæé«˜ä»£ç å¯ç»´æŠ¤æ€§</li>
<li>å®ç°ä¼ ç»Ÿå¸ƒå±€æŠ€æœ¯éš¾ä»¥å®Œæˆçš„å¤æ‚è®¾è®¡</li>
</ul>
<h3 data-id="heading-2">ğŸ’¡ åŸºç¡€æ¦‚å¿µå›é¡¾</h3>
<h4 data-id="heading-3">1. CSS GridåŸºç¡€</h4>
<p>CSS Gridæ˜¯ä¸€ç§äºŒç»´å¸ƒå±€ç³»ç»Ÿï¼Œå…è®¸æˆ‘ä»¬åŒæ—¶æ§åˆ¶è¡Œå’Œåˆ—ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">display</span>: grid;
  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">1</span>fr <span class="hljs-number">2</span>fr <span class="hljs-number">1</span>fr; <span class="hljs-comment">/* å®šä¹‰3åˆ—ï¼Œæ¯”ä¾‹ä¸º1:2:1 */</span>
  <span class="hljs-attribute">grid-template-rows</span>: auto <span class="hljs-number">1</span>fr auto; <span class="hljs-comment">/* å®šä¹‰3è¡Œï¼Œç¬¬ä¸€è¡Œå’Œç¬¬ä¸‰è¡Œè‡ªé€‚åº”å†…å®¹é«˜åº¦ï¼Œç¬¬äºŒè¡Œå æ®å‰©ä½™ç©ºé—´ */</span>
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">20px</span>; <span class="hljs-comment">/* ç½‘æ ¼çº¿ä¹‹é—´çš„é—´è· */</span>
  <span class="hljs-attribute">grid-template-areas</span>: <span class="hljs-comment">/* å®šä¹‰ç½‘æ ¼åŒºåŸŸ */</span>
    <span class="hljs-string">"header header header"</span>
    <span class="hljs-string">"sidebar main aside"</span>
    <span class="hljs-string">"footer footer footer"</span>;
}

<span class="hljs-selector-class">.item1</span> { <span class="hljs-attribute">grid-area</span>: header; }
<span class="hljs-selector-class">.item2</span> { <span class="hljs-attribute">grid-area</span>: sidebar; }
<span class="hljs-selector-class">.item3</span> { <span class="hljs-attribute">grid-area</span>: main; }
<span class="hljs-selector-class">.item4</span> { <span class="hljs-attribute">grid-area</span>: aside; }
<span class="hljs-selector-class">.item5</span> { <span class="hljs-attribute">grid-area</span>: footer; }
</code></pre>
<h4 data-id="heading-4">2. FlexboxåŸºç¡€</h4>
<p>Flexboxæ˜¯ä¸€ç§ä¸€ç»´å¸ƒå±€ç³»ç»Ÿï¼Œé€‚åˆå¤„ç†å…ƒç´ çš„å¯¹é½å’Œåˆ†å¸ƒï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: row; <span class="hljs-comment">/* ä¸»è½´æ–¹å‘ï¼šrowï¼ˆè¡Œï¼‰æˆ– columnï¼ˆåˆ—ï¼‰ */</span>
  <span class="hljs-attribute">justify-content</span>: space-between; <span class="hljs-comment">/* ä¸»è½´å¯¹é½æ–¹å¼ï¼šflex-start, flex-end, center, space-between, space-around, space-evenly */</span>
  <span class="hljs-attribute">align-items</span>: center; <span class="hljs-comment">/* äº¤å‰è½´å¯¹é½æ–¹å¼ï¼šstretch, flex-start, flex-end, center, baseline */</span>
  <span class="hljs-attribute">flex-wrap</span>: wrap; <span class="hljs-comment">/* æ˜¯å¦æ¢è¡Œï¼šnowrapï¼ˆä¸æ¢è¡Œï¼‰, wrapï¼ˆæ¢è¡Œï¼‰, wrap-reverseï¼ˆåå‘æ¢è¡Œï¼‰ */</span>
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>; <span class="hljs-comment">/* å…ƒç´ ä¹‹é—´çš„é—´è· */</span>
}

<span class="hljs-selector-class">.item</span> {
  <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">200px</span>; <span class="hljs-comment">/* ç®€å†™ï¼šflex-grow flex-shrink flex-basis */</span>
  <span class="hljs-comment">/* flex-grow: 1; å…ƒç´ çš„æ”¾å¤§æ¯”ä¾‹ */</span>
  <span class="hljs-comment">/* flex-shrink: 0; å…ƒç´ çš„ç¼©å°æ¯”ä¾‹ */</span>
  <span class="hljs-comment">/* flex-basis: 200px; å…ƒç´ çš„åˆå§‹å®½åº¦ */</span>
}
</code></pre>
<h3 data-id="heading-5">ğŸš€ åŸºç¡€å®ç°ï¼šå¡ç‰‡å¸ƒå±€</h3>
<p>è®©æˆ‘ä»¬å…ˆé€šè¿‡ä¸€ä¸ªç®€å•çš„å¡ç‰‡å¸ƒå±€ï¼Œäº†è§£å¦‚ä½•ç»“åˆä½¿ç”¨CSS Gridå’ŒFlexboxã€‚</p>
<h4 data-id="heading-6">1. éœ€æ±‚åˆ†æ</h4>
<p>æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªå“åº”å¼å¡ç‰‡å¸ƒå±€ï¼ŒåŒ…å«ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ¡Œé¢ç«¯ï¼š3åˆ—ç½‘æ ¼å¸ƒå±€</li>
<li>å¹³æ¿ç«¯ï¼š2åˆ—ç½‘æ ¼å¸ƒå±€</li>
<li>ç§»åŠ¨ç«¯ï¼š1åˆ—å¸ƒå±€</li>
<li>å¡ç‰‡å†…éƒ¨ä½¿ç”¨Flexboxå®ç°å†…å®¹çš„å‚ç›´å¯¹é½å’Œåˆ†å¸ƒ</li>
</ul>
<h4 data-id="heading-7">2. å®ç°ä»£ç </h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>CSS Grid + Flexbox å¡ç‰‡å¸ƒå±€<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-comment">/* å…¨å±€æ ·å¼ */</span>
    * {
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">box-sizing</span>: border-box;
    }
    
    <span class="hljs-selector-tag">body</span> {
      <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'Segoe UI'</span>, Tahoma, Geneva, Verdana, sans-serif;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f7fa</span>;
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
      <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.6</span>;
    }
    
    <span class="hljs-selector-class">.container</span> {
      <span class="hljs-attribute">max-width</span>: <span class="hljs-number">1200px</span>;
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
    }
    
    <span class="hljs-selector-tag">h1</span> {
      <span class="hljs-attribute">text-align</span>: center;
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">30px</span>;
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#2c3e50</span>;
    }
    
    <span class="hljs-comment">/* å¡ç‰‡ç½‘æ ¼å¸ƒå±€ */</span>
    <span class="hljs-selector-class">.card-grid</span> {
      <span class="hljs-attribute">display</span>: grid;
      <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(auto-fit, <span class="hljs-built_in">minmax</span>(<span class="hljs-number">320px</span>, <span class="hljs-number">1</span>fr));
      <span class="hljs-attribute">gap</span>: <span class="hljs-number">25px</span>;
    }
    
    <span class="hljs-comment">/* å¡ç‰‡æ ·å¼ */</span>
    <span class="hljs-selector-class">.card</span> {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
      <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-number">12px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.08</span>);
      <span class="hljs-attribute">overflow</span>: hidden;
      <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.3s</span> ease, box-shadow <span class="hljs-number">0.3s</span> ease;
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">flex-direction</span>: column;
    }
    
    <span class="hljs-selector-class">.card</span><span class="hljs-selector-pseudo">:hover</span> {
      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">5px</span>);
      <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">8px</span> <span class="hljs-number">24px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.12</span>);
    }
    
    <span class="hljs-comment">/* å¡ç‰‡å›¾ç‰‡ */</span>
    <span class="hljs-selector-class">.card-img</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
      <span class="hljs-attribute">object-fit</span>: cover;
    }
    
    <span class="hljs-comment">/* å¡ç‰‡å†…å®¹ */</span>
    <span class="hljs-selector-class">.card-content</span> {
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">flex-direction</span>: column;
    }
    
    <span class="hljs-selector-class">.card-title</span> {
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.5rem</span>;
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">10px</span>;
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#2c3e50</span>;
    }
    
    <span class="hljs-selector-class">.card-description</span> {
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1rem</span>;
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#7f8c8d</span>;
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">15px</span>;
      <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
    }
    
    <span class="hljs-comment">/* å¡ç‰‡æ ‡ç­¾ */</span>
    <span class="hljs-selector-class">.card-tags</span> {
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">flex-wrap</span>: wrap;
      <span class="hljs-attribute">gap</span>: <span class="hljs-number">8px</span>;
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">15px</span>;
    }
    
    <span class="hljs-selector-class">.tag</span> {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#e3f2fd</span>;
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#1976d2</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">4px</span> <span class="hljs-number">12px</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">12px</span>;
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.8rem</span>;
      <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;
    }
    
    <span class="hljs-comment">/* å¡ç‰‡æŒ‰é’® */</span>
    <span class="hljs-selector-class">.card-btn</span> {
      <span class="hljs-attribute">display</span>: inline-block;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#3498db</span>;
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
      <span class="hljs-attribute">text-decoration</span>: none;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
      <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;
      <span class="hljs-attribute">transition</span>: background-color <span class="hljs-number">0.3s</span> ease;
      <span class="hljs-attribute">text-align</span>: center;
    }
    
    <span class="hljs-selector-class">.card-btn</span><span class="hljs-selector-pseudo">:hover</span> {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#2980b9</span>;
    }
    
    <span class="hljs-comment">/* å“åº”å¼è®¾è®¡ */</span>
    <span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">768px</span>) {
      <span class="hljs-selector-class">.card-grid</span> {
        <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(auto-fit, <span class="hljs-built_in">minmax</span>(<span class="hljs-number">280px</span>, <span class="hljs-number">1</span>fr));
        <span class="hljs-attribute">gap</span>: <span class="hljs-number">20px</span>;
      }
      
      <span class="hljs-selector-class">.card-title</span> {
        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.3rem</span>;
      }
    }
    
    <span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">480px</span>) {
      <span class="hljs-selector-class">.container</span> {
        <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
      }
      
      <span class="hljs-selector-class">.card-grid</span> {
        <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">1</span>fr;
        <span class="hljs-attribute">gap</span>: <span class="hljs-number">15px</span>;
      }
      
      <span class="hljs-selector-class">.card-content</span> {
        <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span>;
      }
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>CSS Grid + Flexbox å¡ç‰‡å¸ƒå±€<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-grid"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://picsum.photos/seed/card1/600/400"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"å¡ç‰‡å›¾ç‰‡"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-img"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-content"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-title"</span>&gt;</span>React Hooks å®æˆ˜<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-description"</span>&gt;</span>æ·±å…¥å­¦ä¹  React Hooks çš„ä½¿ç”¨æŠ€å·§å’Œæœ€ä½³å®è·µï¼ŒæŒæ¡ç°ä»£ React å¼€å‘çš„æ ¸å¿ƒèƒ½åŠ›ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-tags"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tag"</span>&gt;</span>React<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tag"</span>&gt;</span>Hooks<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tag"</span>&gt;</span>å‰ç«¯å¼€å‘<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-btn"</span>&gt;</span>æŸ¥çœ‹è¯¦æƒ…<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://picsum.photos/seed/card2/600/400"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"å¡ç‰‡å›¾ç‰‡"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-img"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-content"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-title"</span>&gt;</span>TypeScript è¿›é˜¶<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-description"</span>&gt;</span>ä»åŸºç¡€åˆ°é«˜çº§ï¼Œå…¨é¢æŒæ¡ TypeScript çš„ç±»å‹ç³»ç»Ÿå’Œé«˜çº§ç‰¹æ€§ï¼Œæå‡ä»£ç è´¨é‡å’Œå¼€å‘æ•ˆç‡ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-tags"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tag"</span>&gt;</span>TypeScript<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tag"</span>&gt;</span>JavaScript<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tag"</span>&gt;</span>ç±»å‹ç³»ç»Ÿ<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-btn"</span>&gt;</span>æŸ¥çœ‹è¯¦æƒ…<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://picsum.photos/seed/card3/600/400"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"å¡ç‰‡å›¾ç‰‡"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-img"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-content"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-title"</span>&gt;</span>å‰ç«¯å·¥ç¨‹åŒ–<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-description"</span>&gt;</span>å­¦ä¹ å‰ç«¯å·¥ç¨‹åŒ–çš„æœ€ä½³å®è·µï¼ŒåŒ…æ‹¬æ„å»ºå·¥å…·ã€æ¨¡å—åŒ–å¼€å‘ã€è‡ªåŠ¨åŒ–æµ‹è¯•ç­‰å†…å®¹ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-tags"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tag"</span>&gt;</span>Webpack<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tag"</span>&gt;</span>å·¥ç¨‹åŒ–<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tag"</span>&gt;</span>è‡ªåŠ¨åŒ–<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-btn"</span>&gt;</span>æŸ¥çœ‹è¯¦æƒ…<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://picsum.photos/seed/card4/600/400"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"å¡ç‰‡å›¾ç‰‡"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-img"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-content"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-title"</span>&gt;</span>å“åº”å¼è®¾è®¡<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-description"</span>&gt;</span>æŒæ¡ç°ä»£å“åº”å¼è®¾è®¡çš„æŠ€æœ¯å’Œæ–¹æ³•ï¼Œåˆ›å»ºé€‚é…å„ç§è®¾å¤‡çš„ä¼˜ç§€ç”¨æˆ·ç•Œé¢ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-tags"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tag"</span>&gt;</span>CSS<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tag"</span>&gt;</span>å“åº”å¼<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tag"</span>&gt;</span>å¸ƒå±€<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-btn"</span>&gt;</span>æŸ¥çœ‹è¯¦æƒ…<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://picsum.photos/seed/card5/600/400"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"å¡ç‰‡å›¾ç‰‡"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-img"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-content"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-title"</span>&gt;</span>Vue.js 3 æ–°ç‰¹æ€§<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-description"</span>&gt;</span>æ¢ç´¢ Vue.js 3 çš„æ–°ç‰¹æ€§ï¼ŒåŒ…æ‹¬ Composition APIã€Teleportã€Suspense ç­‰é«˜çº§åŠŸèƒ½ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-tags"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tag"</span>&gt;</span>Vue.js<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tag"</span>&gt;</span>Composition API<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tag"</span>&gt;</span>å‰ç«¯æ¡†æ¶<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-btn"</span>&gt;</span>æŸ¥çœ‹è¯¦æƒ…<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://picsum.photos/seed/card6/600/400"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"å¡ç‰‡å›¾ç‰‡"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-img"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-content"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-title"</span>&gt;</span>æ€§èƒ½ä¼˜åŒ–<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-description"</span>&gt;</span>å­¦ä¹ å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„ç­–ç•¥å’ŒæŠ€å·§ï¼Œæå‡ç½‘ç«™åŠ è½½é€Ÿåº¦å’Œç”¨æˆ·ä½“éªŒã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-tags"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tag"</span>&gt;</span>æ€§èƒ½ä¼˜åŒ–<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tag"</span>&gt;</span>Web Vitals<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tag"</span>&gt;</span>ç”¨æˆ·ä½“éªŒ<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-btn"</span>&gt;</span>æŸ¥çœ‹è¯¦æƒ…<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ï¼š</p>
<ul>
<li><strong>CSS Grid</strong> å®ç°å¡ç‰‡çš„äºŒç»´ç½‘æ ¼å¸ƒå±€ï¼ˆ<code>card-grid</code> ç±»ï¼‰</li>
<li><strong>Flexbox</strong> å®ç°å¡ç‰‡å†…éƒ¨çš„å‚ç›´å¸ƒå±€å’Œå†…å®¹åˆ†å¸ƒï¼ˆ<code>card</code> å’Œ <code>card-content</code> ç±»ï¼‰</li>
<li><strong>å“åº”å¼è®¾è®¡</strong> ç¡®ä¿åœ¨ä¸åŒè®¾å¤‡ä¸Šéƒ½æœ‰è‰¯å¥½çš„æ˜¾ç¤ºæ•ˆæœ</li>
</ul>
<h3 data-id="heading-8">ğŸ¯ è¿›é˜¶å®ç°ï¼šå¤æ‚ä»ªè¡¨æ¿å¸ƒå±€</h3>
<p>ç°åœ¨è®©æˆ‘ä»¬å®ç°ä¸€ä¸ªæ›´å¤æ‚çš„ä»ªè¡¨æ¿å¸ƒå±€ï¼Œå±•ç¤ºå¦‚ä½•ç»“åˆCSS Gridå’ŒFlexboxå¤„ç†æ›´å¤æ‚çš„è®¾è®¡éœ€æ±‚ã€‚</p>
<h4 data-id="heading-9">1. éœ€æ±‚åˆ†æ</h4>
<p>æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªå“åº”å¼ä»ªè¡¨æ¿ï¼ŒåŒ…å«ä»¥ä¸‹ç»„ä»¶ï¼š</p>
<ul>
<li>é¡¶éƒ¨å¯¼èˆªæ </li>
<li>ä¾§è¾¹èœå•æ </li>
<li>ä¸»è¦å†…å®¹åŒºåŸŸï¼ŒåŒ…å«ï¼š
<ul>
<li>æ•°æ®æ¦‚è§ˆå¡ç‰‡ï¼ˆ4ä¸ªï¼‰</li>
<li>ä¸»è¦å›¾è¡¨ï¼ˆ1ä¸ªå¤§å›¾è¡¨ï¼‰</li>
<li>è¾…åŠ©æ•°æ®å¡ç‰‡ï¼ˆ2ä¸ªï¼‰</li>
<li>æ•°æ®è¡¨æ ¼</li>
</ul>
</li>
<li>å³ä¾§ä¿¡æ¯æ </li>
</ul>
<h4 data-id="heading-10">2. å®ç°ä»£ç </h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>CSS Grid + Flexbox å¤æ‚ä»ªè¡¨æ¿å¸ƒå±€<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-comment">/* å…¨å±€æ ·å¼ */</span>
    * {
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">box-sizing</span>: border-box;
    }
    
    <span class="hljs-selector-tag">body</span> {
      <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'Segoe UI'</span>, Tahoma, Geneva, Verdana, sans-serif;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f0f2f5</span>;
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
      <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.6</span>;
    }
    
    <span class="hljs-comment">/* æ•´ä½“å¸ƒå±€ */</span>
    <span class="hljs-selector-class">.dashboard</span> {
      <span class="hljs-attribute">display</span>: grid;
      <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">250px</span> <span class="hljs-number">1</span>fr <span class="hljs-number">300px</span>;
      <span class="hljs-attribute">grid-template-rows</span>: <span class="hljs-number">60px</span> <span class="hljs-number">1</span>fr;
      <span class="hljs-attribute">grid-template-areas</span>: 
        <span class="hljs-string">"sidebar header rightbar"</span>
        <span class="hljs-string">"sidebar main rightbar"</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;
      <span class="hljs-attribute">overflow</span>: hidden;
    }
    
    <span class="hljs-comment">/* é¡¶éƒ¨å¯¼èˆªæ  */</span>
    <span class="hljs-selector-class">.header</span> {
      <span class="hljs-attribute">grid-area</span>: header;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;
      <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">4px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">align-items</span>: center;
      <span class="hljs-attribute">justify-content</span>: space-between;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">20px</span>;
    }
    
    <span class="hljs-selector-class">.header-left</span> {
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">align-items</span>: center;
      <span class="hljs-attribute">gap</span>: <span class="hljs-number">15px</span>;
    }
    
    <span class="hljs-selector-class">.header-right</span> {
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">align-items</span>: center;
      <span class="hljs-attribute">gap</span>: <span class="hljs-number">15px</span>;
    }
    
    <span class="hljs-comment">/* ä¾§è¾¹èœå•æ  */</span>
    <span class="hljs-selector-class">.sidebar</span> {
      <span class="hljs-attribute">grid-area</span>: sidebar;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#2c3e50</span>;
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span> <span class="hljs-number">0</span>;
      <span class="hljs-attribute">overflow-y</span>: auto;
    }
    
    <span class="hljs-selector-class">.logo</span> {
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">20px</span> <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.5rem</span>;
      <span class="hljs-attribute">font-weight</span>: bold;
      <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.1</span>);
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
    }
    
    <span class="hljs-selector-class">.menu</span> {
      <span class="hljs-attribute">list-style</span>: none;
    }
    
    <span class="hljs-selector-class">.menu-item</span> {
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">5px</span>;
    }
    
    <span class="hljs-selector-class">.menu-item</span> <span class="hljs-selector-tag">a</span> {
      <span class="hljs-attribute">display</span>: block;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span> <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.8</span>);
      <span class="hljs-attribute">text-decoration</span>: none;
      <span class="hljs-attribute">transition</span>: background-color <span class="hljs-number">0.3s</span> ease, color <span class="hljs-number">0.3s</span> ease;
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">align-items</span>: center;
      <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>;
    }
    
    <span class="hljs-selector-class">.menu-item</span> <span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span>, <span class="hljs-selector-class">.menu-item</span><span class="hljs-selector-class">.active</span> <span class="hljs-selector-tag">a</span> {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#3498db</span>;
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
    }
    
    <span class="hljs-comment">/* ä¸»è¦å†…å®¹åŒºåŸŸ */</span>
    <span class="hljs-selector-class">.main</span> {
      <span class="hljs-attribute">grid-area</span>: main;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">overflow-y</span>: auto;
    }
    
    <span class="hljs-comment">/* æ•°æ®æ¦‚è§ˆå¡ç‰‡ */</span>
    <span class="hljs-selector-class">.overview-cards</span> {
      <span class="hljs-attribute">display</span>: grid;
      <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(auto-fit, <span class="hljs-built_in">minmax</span>(<span class="hljs-number">200px</span>, <span class="hljs-number">1</span>fr));
      <span class="hljs-attribute">gap</span>: <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">25px</span>;
    }
    
    <span class="hljs-selector-class">.overview-card</span> {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
      <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">4px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">align-items</span>: center;
      <span class="hljs-attribute">gap</span>: <span class="hljs-number">15px</span>;
      <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.3s</span> ease, box-shadow <span class="hljs-number">0.3s</span> ease;
    }
    
    <span class="hljs-selector-class">.overview-card</span><span class="hljs-selector-pseudo">:hover</span> {
      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">2px</span>);
      <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-number">12px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.15</span>);
    }
    
    <span class="hljs-selector-class">.card-icon</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">50px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">align-items</span>: center;
      <span class="hljs-attribute">justify-content</span>: center;
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.5rem</span>;
    }
    
    <span class="hljs-selector-class">.card-icon</span><span class="hljs-selector-class">.primary</span> { <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#e3f2fd</span>; <span class="hljs-attribute">color</span>: <span class="hljs-number">#1976d2</span>; }
    <span class="hljs-selector-class">.card-icon</span><span class="hljs-selector-class">.success</span> { <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#e8f5e9</span>; <span class="hljs-attribute">color</span>: <span class="hljs-number">#43a047</span>; }
    <span class="hljs-selector-class">.card-icon</span><span class="hljs-selector-class">.warning</span> { <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff3e0</span>; <span class="hljs-attribute">color</span>: <span class="hljs-number">#f57c00</span>; }
    <span class="hljs-selector-class">.card-icon</span><span class="hljs-selector-class">.danger</span> { <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ffebee</span>; <span class="hljs-attribute">color</span>: <span class="hljs-number">#d32f2f</span>; }
    
    <span class="hljs-selector-class">.card-info</span> <span class="hljs-selector-tag">h3</span> {
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.5rem</span>;
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">5px</span>;
    }
    
    <span class="hljs-selector-class">.card-info</span> <span class="hljs-selector-tag">p</span> {
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.9rem</span>;
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#7f8c8d</span>;
    }
    
    <span class="hljs-comment">/* ä¸»è¦å›¾è¡¨ */</span>
    <span class="hljs-selector-class">.main-chart</span> {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
      <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">4px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">25px</span>;
    }
    
    <span class="hljs-comment">/* è¾…åŠ©æ•°æ®å¡ç‰‡ */</span>
    <span class="hljs-selector-class">.secondary-cards</span> {
      <span class="hljs-attribute">display</span>: grid;
      <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(auto-fit, <span class="hljs-built_in">minmax</span>(<span class="hljs-number">300px</span>, <span class="hljs-number">1</span>fr));
      <span class="hljs-attribute">gap</span>: <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">25px</span>;
    }
    
    <span class="hljs-selector-class">.secondary-card</span> {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
      <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">4px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
    }
    
    <span class="hljs-comment">/* æ•°æ®è¡¨æ ¼ */</span>
    <span class="hljs-selector-class">.data-table</span> {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
      <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">4px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
      <span class="hljs-attribute">overflow-x</span>: auto;
    }
    
    <span class="hljs-selector-tag">table</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">border-collapse</span>: collapse;
    }
    
    <span class="hljs-selector-tag">th</span>, <span class="hljs-selector-tag">td</span> {
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span>;
      <span class="hljs-attribute">text-align</span>: left;
      <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e0e0e0</span>;
    }
    
    <span class="hljs-selector-tag">th</span> {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f5f5</span>;
      <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;
    }
    
    <span class="hljs-selector-tag">tr</span><span class="hljs-selector-pseudo">:hover</span> {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fafafa</span>;
    }
    
    <span class="hljs-comment">/* å³ä¾§ä¿¡æ¯æ  */</span>
    <span class="hljs-selector-class">.rightbar</span> {
      <span class="hljs-attribute">grid-area</span>: rightbar;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;
      <span class="hljs-attribute">box-shadow</span>: -<span class="hljs-number">2px</span> <span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">overflow-y</span>: auto;
    }
    
    <span class="hljs-selector-class">.widget</span> {
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">25px</span>;
    }
    
    <span class="hljs-selector-class">.widget-title</span> {
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.2rem</span>;
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">15px</span>;
      <span class="hljs-attribute">padding-bottom</span>: <span class="hljs-number">10px</span>;
      <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e0e0e0</span>;
    }
    
    <span class="hljs-comment">/* å“åº”å¼è®¾è®¡ */</span>
    <span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">1200px</span>) {
      <span class="hljs-selector-class">.dashboard</span> {
        <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">220px</span> <span class="hljs-number">1</span>fr <span class="hljs-number">250px</span>;
      }
    }
    
    <span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">992px</span>) {
      <span class="hljs-selector-class">.dashboard</span> {
        <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">1</span>fr;
        <span class="hljs-attribute">grid-template-rows</span>: <span class="hljs-number">60px</span> auto <span class="hljs-number">1</span>fr;
        <span class="hljs-attribute">grid-template-areas</span>: 
          <span class="hljs-string">"header"</span>
          <span class="hljs-string">"main"</span>
          <span class="hljs-string">"rightbar"</span>;
      }
      
      <span class="hljs-selector-class">.sidebar</span> {
        <span class="hljs-attribute">display</span>: none;
      }
      
      <span class="hljs-selector-class">.rightbar</span> {
        <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> -<span class="hljs-number">2px</span> <span class="hljs-number">4px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
        <span class="hljs-attribute">max-height</span>: <span class="hljs-number">300px</span>;
      }
    }
    
    <span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">768px</span>) {
      <span class="hljs-selector-class">.overview-cards</span> {
        <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>fr);
      }
      
      <span class="hljs-selector-class">.secondary-cards</span> {
        <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">1</span>fr;
      }
      
      <span class="hljs-selector-class">.header-right</span> {
        <span class="hljs-attribute">display</span>: none;
      }
    }
    
    <span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">480px</span>) {
      <span class="hljs-selector-class">.overview-cards</span> {
        <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">1</span>fr;
      }
      
      <span class="hljs-selector-class">.main</span> {
        <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
      }
      
      <span class="hljs-selector-class">.rightbar</span> {
        <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
      }
    }
    
    <span class="hljs-comment">/* æ¨¡æ‹Ÿæ•°æ® */</span>
    <span class="hljs-selector-class">.chart-placeholder</span> {
      <span class="hljs-attribute">height</span>: <span class="hljs-number">300px</span>;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f5f5</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">align-items</span>: center;
      <span class="hljs-attribute">justify-content</span>: center;
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#7f8c8d</span>;
    }
    
    <span class="hljs-selector-class">.card-placeholder</span> {
      <span class="hljs-attribute">height</span>: <span class="hljs-number">150px</span>;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f5f5</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">align-items</span>: center;
      <span class="hljs-attribute">justify-content</span>: center;
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#7f8c8d</span>;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dashboard"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- é¡¶éƒ¨å¯¼èˆªæ  --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"header"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"header-left"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"menu-toggle"</span>&gt;</span>â˜°<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Dashboard<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"header-right"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>é€šçŸ¥<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ç”¨æˆ·<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- ä¾§è¾¹èœå•æ  --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">aside</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"sidebar"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"logo"</span>&gt;</span>Logo<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"menu"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"menu-item active"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>ğŸ  ä»ªè¡¨ç›˜<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"menu-item"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>ğŸ“Š æ•°æ®ç»Ÿè®¡<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"menu-item"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>ğŸ“ˆ æ•°æ®åˆ†æ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"menu-item"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>ğŸ‘¥ ç”¨æˆ·ç®¡ç†<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"menu-item"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>âš™ï¸ ç³»ç»Ÿè®¾ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"menu-item"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>ğŸ“ æ—¥å¿—è®°å½•<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">aside</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- ä¸»è¦å†…å®¹åŒºåŸŸ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"main"</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- æ•°æ®æ¦‚è§ˆå¡ç‰‡ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"overview-cards"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"overview-card"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-icon primary"</span>&gt;</span>ğŸ“Š<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-info"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>12,345<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ€»è®¿é—®é‡<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"overview-card"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-icon success"</span>&gt;</span>ğŸ’°<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-info"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Â¥45,678<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ€»æ”¶å…¥<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"overview-card"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-icon warning"</span>&gt;</span>ğŸ‘¥<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-info"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>789<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ´»è·ƒç”¨æˆ·<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"overview-card"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-icon danger"</span>&gt;</span>ğŸ“±<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-info"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>45.6%<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç§»åŠ¨ç«¯å æ¯”<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-comment">&lt;!-- ä¸»è¦å›¾è¡¨ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"main-chart"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>ä¸»è¦æŒ‡æ ‡è¶‹åŠ¿<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"chart-placeholder"</span>&gt;</span>
          å›¾è¡¨åŒºåŸŸï¼ˆå¯æ›¿æ¢ä¸ºå®é™…å›¾è¡¨åº“ï¼šChart.jsã€EChartsç­‰ï¼‰
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-comment">&lt;!-- è¾…åŠ©æ•°æ®å¡ç‰‡ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"secondary-cards"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"secondary-card"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>ç”¨æˆ·å¢é•¿è¶‹åŠ¿<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-placeholder"</span>&gt;</span>ç”¨æˆ·å¢é•¿å›¾è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"secondary-card"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>é”€å”®æ•°æ®ç»Ÿè®¡<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-placeholder"</span>&gt;</span>é”€å”®æ•°æ®å›¾è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-comment">&lt;!-- æ•°æ®è¡¨æ ¼ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"data-table"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>æœ€æ–°è®¢å•<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">thead</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>è®¢å•å·<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>ç”¨æˆ·<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>é‡‘é¢<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>çŠ¶æ€<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>æ—¥æœŸ<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>#12345<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>å¼ ä¸‰<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>Â¥1,234<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>å·²å®Œæˆ<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>2024-01-15<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>#12344<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>æå››<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>Â¥567<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>å¤„ç†ä¸­<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>2024-01-15<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>#12343<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>ç‹äº”<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>Â¥890<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>å·²å®Œæˆ<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>2024-01-14<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>#12342<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>èµµå…­<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>Â¥2,345<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>å·²å–æ¶ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>2024-01-14<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>#12341<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>å­™ä¸ƒ<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>Â¥678<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>å·²å®Œæˆ<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>2024-01-13<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å³ä¾§ä¿¡æ¯æ  --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">aside</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"rightbar"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"widget"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"widget-title"</span>&gt;</span>æœ€è¿‘æ´»åŠ¨<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"widget-content"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>â€¢ ç”¨æˆ·å¼ ä¸‰ç™»å½•ç³»ç»Ÿ<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>â€¢ è®¢å• #12345 å·²å®Œæˆ<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>â€¢ æ–°ç”¨æˆ·æ³¨å†Œï¼šæå››<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>â€¢ ç³»ç»Ÿæ›´æ–°æˆåŠŸ<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"widget"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"widget-title"</span>&gt;</span>å¿«é€Ÿé“¾æ¥<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"widget-content"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>åˆ›å»ºæ–°è®¢å•<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>ç”¨æˆ·ç®¡ç†<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>æ•°æ®åˆ†æ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>ç³»ç»Ÿè®¾ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"widget"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"widget-title"</span>&gt;</span>ç³»ç»ŸçŠ¶æ€<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"widget-content"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æœåŠ¡å™¨çŠ¶æ€ï¼šæ­£å¸¸<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ•°æ®åº“è¿æ¥ï¼šæ­£å¸¸<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>åœ¨çº¿ç”¨æˆ·ï¼š123<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç³»ç»Ÿè´Ÿè½½ï¼š23%<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">aside</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>åœ¨è¿™ä¸ªå¤æ‚ä»ªè¡¨æ¿ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ï¼š</p>
<ul>
<li>ä½¿ç”¨ <strong>CSS Grid</strong> å®ç°äº†æ•´ä½“çš„é¡µé¢å¸ƒå±€ç»“æ„ï¼ˆä¸‰æ å¸ƒå±€ï¼šä¾§è¾¹æ ã€ä¸»å†…å®¹ã€å³ä¾§ä¿¡æ¯æ ï¼‰</li>
<li>ä½¿ç”¨ <strong>Flexbox</strong> å®ç°äº†ç»„ä»¶å†…éƒ¨çš„å¯¹é½å’Œåˆ†å¸ƒï¼ˆå¯¼èˆªæ ã€æ¦‚è§ˆå¡ç‰‡ã€èœå•ç­‰ï¼‰</li>
<li>ç»“åˆäº†ä¸¤ç§å¸ƒå±€æŠ€æœ¯çš„ä¼˜åŠ¿ï¼Œåˆ›å»ºäº†å¤æ‚è€Œçµæ´»çš„å“åº”å¼ç•Œé¢</li>
<li>ä½¿ç”¨åª’ä½“æŸ¥è¯¢å®ç°äº†ä¸åŒå±å¹•å°ºå¯¸ä¸‹çš„å¸ƒå±€é€‚é…</li>
</ul>
<h3 data-id="heading-11">âš ï¸ æ³¨æ„äº‹é¡¹å’Œæœ€ä½³å®è·µ</h3>
<h4 data-id="heading-12">1. é€‰æ‹©åˆé€‚çš„å¸ƒå±€æŠ€æœ¯</h4>
<ul>
<li><strong>ä¸€ç»´å¸ƒå±€</strong>ï¼ˆè¡Œæˆ–åˆ—ï¼‰ï¼šä¼˜å…ˆä½¿ç”¨ Flexbox</li>
<li><strong>äºŒç»´å¸ƒå±€</strong>ï¼ˆéœ€è¦åŒæ—¶æ§åˆ¶è¡Œå’Œåˆ—ï¼‰ï¼šä¼˜å…ˆä½¿ç”¨ CSS Grid</li>
<li><strong>å¤æ‚åµŒå¥—å¸ƒå±€</strong>ï¼šç»“åˆä½¿ç”¨ Grid å’Œ Flexbox</li>
</ul>
<h4 data-id="heading-13">2. é¿å…è¿‡åº¦ä½¿ç”¨</h4>
<ul>
<li>ä¸è¦åœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½åŒæ—¶ä½¿ç”¨ Grid å’Œ Flexbox</li>
<li>æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©æœ€åˆé€‚çš„å¸ƒå±€æŠ€æœ¯</li>
<li>ä¿æŒå¸ƒå±€çš„ç®€æ´æ€§å’Œå¯ç»´æŠ¤æ€§</li>
</ul>
<h4 data-id="heading-14">3. æ€§èƒ½ä¼˜åŒ–</h4>
<ul>
<li>é¿å…è¿‡æ·±çš„å¸ƒå±€åµŒå¥—</li>
<li>å‡å°‘ CSS é€‰æ‹©å™¨çš„å¤æ‚æ€§</li>
<li>ä½¿ç”¨ <code>auto-fit</code> å’Œ <code>auto-fill</code> ç­‰å…³é”®å­—å®ç°çµæ´»çš„ç½‘æ ¼å¸ƒå±€</li>
<li>é¿å…ä¸å¿…è¦çš„é‡æ’å’Œé‡ç»˜</li>
</ul>
<h4 data-id="heading-15">4. å“åº”å¼è®¾è®¡</h4>
<ul>
<li>ä½¿ç”¨åª’ä½“æŸ¥è¯¢é€‚é…ä¸åŒå±å¹•å°ºå¯¸</li>
<li>åˆ©ç”¨ Grid çš„ <code>minmax()</code> å’Œ <code>repeat()</code> å‡½æ•°å®ç°è‡ªé€‚åº”å¸ƒå±€</li>
<li>ä½¿ç”¨ Flexbox çš„ <code>flex-wrap</code> å±æ€§å¤„ç†å…ƒç´ çš„æ¢è¡Œ</li>
</ul>
<h4 data-id="heading-16">5. æµè§ˆå™¨å…¼å®¹æ€§</h4>
<ul>
<li>CSS Grid åœ¨ç°ä»£æµè§ˆå™¨ä¸­å¾—åˆ°å¹¿æ³›æ”¯æŒï¼Œä½†åœ¨æ—§ç‰ˆæµè§ˆå™¨ï¼ˆå¦‚ IE 11ï¼‰ä¸­æ”¯æŒæœ‰é™</li>
<li>Flexbox åœ¨æ‰€æœ‰ç°ä»£æµè§ˆå™¨ä¸­éƒ½æœ‰è‰¯å¥½çš„æ”¯æŒ</li>
<li>å¦‚æœéœ€è¦æ”¯æŒæ—§ç‰ˆæµè§ˆå™¨ï¼Œå¯ä»¥ä½¿ç”¨ CSS Grid çš„ <code>grid-template-areas</code> å’Œ <code>grid-area</code> å±æ€§ï¼Œè¿™äº›å±æ€§åœ¨ IE 11 ä¸­æœ‰åŸºæœ¬æ”¯æŒ</li>
</ul>
<h3 data-id="heading-17">ğŸ“ æ€»ç»“</h3>
<p>é€šè¿‡ç»“åˆä½¿ç”¨ CSS Grid å’Œ Flexboxï¼Œæˆ‘ä»¬å¯ä»¥ï¼š</p>
<ol>
<li><strong>å®ç°å¤æ‚å¸ƒå±€</strong>ï¼šå¿«é€Ÿæ„å»ºä¼ ç»Ÿå¸ƒå±€æŠ€æœ¯éš¾ä»¥å®Œæˆçš„å¤æ‚ç•Œé¢</li>
<li><strong>æé«˜å¼€å‘æ•ˆç‡</strong>ï¼šå‡å°‘å¸ƒå±€åµŒå¥—å±‚çº§ï¼Œç®€åŒ–ä»£ç ç»“æ„</li>
<li><strong>å¢å¼ºå“åº”å¼èƒ½åŠ›</strong>ï¼šæ›´å¥½åœ°é€‚é…å„ç§å±å¹•å°ºå¯¸å’Œè®¾å¤‡</li>
<li><strong>æå‡ç”¨æˆ·ä½“éªŒ</strong>ï¼šåˆ›å»ºæ›´åŠ çµæ´»å’Œç›´è§‚çš„ç•Œé¢å¸ƒå±€</li>
<li><strong>ä¼˜åŒ–ä»£ç å¯ç»´æŠ¤æ€§</strong>ï¼šåˆ†ç¦»å¸ƒå±€ç»“æ„å’Œå†…å®¹ï¼Œä¾¿äºåç»­ä¿®æ”¹å’Œæ‰©å±•</li>
</ol>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„å¸ƒå±€æŠ€æœ¯ï¼Œåˆç†æ­é…ä½¿ç”¨ CSS Grid å’Œ Flexboxï¼Œå‘æŒ¥å®ƒä»¬å„è‡ªçš„ä¼˜åŠ¿ï¼Œåˆ›å»ºé«˜æ•ˆã€çµæ´»ã€å¯ç»´æŠ¤çš„å‰ç«¯å¸ƒå±€ã€‚</p>
<p>å¸Œæœ›è¿™ä¸ªå°æŠ€å·§å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®º ğŸ¤—</p>
<hr/>
<p><strong>ç›¸å…³èµ„æºï¼š</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FCSS%2FCSS_Grid_Layout" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Grid_Layout" ref="nofollow noopener noreferrer">CSS Grid å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FCSS%2FCSS_Flexible_Box_Layout" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Flexible_Box_Layout" ref="nofollow noopener noreferrer">Flexbox å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcss-tricks.com%2Fcss-grid-vs-flexbox%2F" target="_blank" title="https://css-tricks.com/css-grid-vs-flexbox/" ref="nofollow noopener noreferrer">CSS Grid vs Flexboxï¼šä½•æ—¶ä½¿ç”¨å“ªä¸ªï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FLearn%2FCSS%2FCSS_layout" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Learn/CSS/CSS_layout" ref="nofollow noopener noreferrer">MDN - CSS å¸ƒå±€æŒ‡å—</a></li>
</ul>
<p><strong>æ ‡ç­¾ï¼š</strong> #CSS #Grid #Flexbox #å“åº”å¼è®¾è®¡ #å‰ç«¯å¸ƒå±€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…¨æ ˆé¡¹ç›®å®è·µäº”ï¼šæŠ½ç¦»npmåŒ…]]></title>    <link>https://juejin.cn/post/7581378364082618414</link>    <guid>https://juejin.cn/post/7581378364082618414</guid>    <pubDate>2025-12-09T02:05:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581378364082618414" data-draft-id="7581279471746646050" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…¨æ ˆé¡¹ç›®å®è·µäº”ï¼šæŠ½ç¦»npmåŒ…"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-09T02:05:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å…¨_"/> <meta itemprop="url" content="https://juejin.cn/user/2648040071248845"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…¨æ ˆé¡¹ç›®å®è·µäº”ï¼šæŠ½ç¦»npmåŒ…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2648040071248845/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å…¨_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T02:05:17.000Z" title="Tue Dec 09 2025 02:05:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡å†…å®¹å­¦ä¹ è‡ª å“²ç„å‰ç«¯ ã€Šå¤§å‰ç«¯å…¨æ ˆå®è·µã€‹è¯¾ç¨‹</p>
</blockquote>
<p>å½“éœ€è¦æœ¬åœ°è°ƒè¯•å¾…å‘å¸ƒçš„ npm åŒ…æ—¶
åœ¨åŒ…çš„ç›®å½•ä¸‹(elpis)æ‰§è¡Œå‘½ä»¤</p>
<pre><code class="hljs language-bash" lang="bash">npm <span class="hljs-built_in">link</span>
</code></pre>
<p>åœ¨ä½¿ç”¨åŒ…çš„ç›®å½•ä¸‹(elpis-demo)æ‰§è¡Œå‘½</p>
<pre><code class="hljs language-bash" lang="bash">npm <span class="hljs-built_in">link</span> <span class="hljs-string">"name"</span>
</code></pre>
<ul>
<li>è¿™ä¸ª name å°±æ˜¯ elpis/package.json ä¸­çš„name</li>
</ul>
<h4 data-id="heading-0">å…³äºé™æ€èµ„æºç›®å½•</h4>
<p>è¿è¡Œçš„æ—¶å€™ä¸€ç›´ä¼šæœ‰ <code>/view/project-list</code> çš„è¯·æ±‚</p>
<ul>
<li>elpis/app/view/entry.tpl ä¸­ä½¿ç”¨äº†é™æ€èµ„æº /static/xxx</li>
<li>koaStatic å’Œ KoaNunjucks é…ç½®çš„é™æ€èµ„æºç›®å½•æ˜¯ process.cwd()/app/public
<ul>
<li>èµ„æºè¯·æ±‚çš„æ˜¯è¿è¡Œç›®å½•ä¸‹çš„ elpis-demo/app/public</li>
</ul>
</li>
<li>å®é™…èµ„æºè¿˜åœ¨ elpis/app/public/static/logo.pngï¼Œä½†æ˜¯ elpis-demo ä¸­æ²¡æœ‰é™æ€èµ„æºå¯¼è‡´ä¸€ç›´è¯·æ±‚ä¸åˆ°</li>
<li>è¯·æ±‚è¿›å…¥ elpis-core/loader/router.js å…œåº•ç­–ç•¥ä¸€ç›´è¯·æ±‚ app.options.homePage</li>
</ul>
<p>è§£å†³åŠæ³•ï¼šå°†é™æ€èµ„æºç§»åŠ¨åˆ° elpis-demo/public ä¸­</p>
<h4 data-id="heading-1">devServer å’Œ element-plus çš„æŒ‰éœ€åŠ è½½</h4>
<p><code>ä¸èƒ½ç”¨element-plusçš„æŒ‰éœ€å¼•å…¥</code>ï¼Œä¸ç„¶ npm run build:dev å°±ä¸€ç›´å¡åœ¨ webpack çš„ç¼–è¯‘éƒ¨åˆ†ï¼Œnpm run build:prod å°±æ­£å¸¸è¿è¡Œã€‚</p>
<ul>
<li>è™½ç„¶ devServer æ­£å¸¸å¯åŠ¨äº†</li>
<li>ä½†æ˜¯ webpack çš„ç¼–è¯‘å™¨æ ¹æœ¬æ²¡æœ‰å¯åŠ¨ï¼Œæ²¡æœ‰å°†æºä»£ç ç¼–è¯‘ä¸º Bundleã€‚
<ul>
<li>ç¬¬ä¸€æ­¥è¿˜å¾—è‡ªå·±å…ˆæ‰‹åŠ¨ç¼–è¯‘ä¸€ä¸‹(compiler.run)ï¼Œä¸ç„¶ä¸€ç›´æ²¡ç¼–è¯‘ï¼Œæ²¡æœ‰.tplçš„è¾“å‡ºã€‚  å¯åŠ¨é™æ€æœåŠ¡å™¨ï¼Œä½†æ˜¯æ²¡æœ‰HMRçš„æ•ˆæœï¼ŒåŠ watchåªèƒ½ç›‘å¬å˜åŒ–ï¼Œæ‰‹åŠ¨åˆ·æ–°æ‰çœ‹å¾—åˆ°ã€‚</li>
</ul>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/89df3339cc4349ffbf0fa5d11c1ca161~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWoXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765850717&amp;x-signature=agfYT9avnJwimMIiuzCK%2FDhq7Xk%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">è‡ªå®šä¹‰SSRé¡µé¢çš„æ‰©å±•</h2>
<p>åœ¨ webpack.base.js ä¸­ä¿®æ”¹ entry å’Œ HtmlWebpackPlugin æ¥è·å–å…¨éƒ¨çš„å…¥å£ã€‚</p>
<p>webpacké‡Œé¢çš„loaderä¼šåœ¨è°ƒç”¨æ–¹é‡Œé¢çš„æ ¹ç›®å½•å¼€å§‹æ‰¾ï¼ˆå³åœ¨ elpis-demo çš„ node_modulesï¼‰</p>
<ul>
<li>
<p>å¦‚æœç”¨è‡ªå·± node_modules çš„ç›®å½•ï¼Œæ”¹ä¸º require.resolve()</p>
<ul>
<li>å¦‚æœæ‰¾ä¸åˆ°åŒ… ç”¨require.resolve()</li>
</ul>
</li>
<li>
<p>å½“è¿™ä¸ª webpack é…ç½®ä½œä¸º npm åŒ…è¢«å…¶ä»–é¡¹ç›®å¼•ç”¨æ—¶ï¼Œloader çš„è§£æè·¯å¾„ä¼šåŸºäº elpis åŒ…æœ¬èº«ï¼Œè€Œä¸æ˜¯è°ƒç”¨æ–¹çš„ node_modulesã€‚</p>
</li>
</ul>
<p>åœ¨ <code>elpis-demo/app/pages</code> ç›®å½•ä¸‹å†™å…¥å£æ–‡ä»¶ entry.xxx.js å’Œå¯¹åº”ç»„ä»¶</p>
<h2 data-id="heading-3">è‡ªå®šä¹‰ view é¡µé¢ dashboard/cutom-view</h2>
<ol>
<li>åœ¨ <code>elpis-demo/app/pages/dashboard/xxx</code> å†™é¡µé¢ç»„ä»¶</li>
<li>åœ¨ <code>elpis-demo/app/pages/dashboard/router.js</code> ä¸­è¿›è¡Œé…ç½®</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-function">(<span class="hljs-params">{routes, siderRoutes}</span>) =&gt;</span> {}
</code></pre>
<h3 data-id="heading-4">å½“ç”¨æˆ·æ²¡é…ç½® dashboard/router.js</h3>
<ul>
<li>try-catchæ— æ³•è§£å†³
<ul>
<li>webpackæ˜¯é™æ€æ„å»ºï¼Œå¹¶ä¸æ˜¯è¿è¡Œæ—¶æ„å»ºï¼Œæ‰€ä»¥ä¼šç›´æ¥æŠ¥é”™</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">try</span>{
  businessDashboardRouterConfig = <span class="hljs-built_in">require</span>(<span class="hljs-string">'$businessDashboardRouterConfig'</span>)
}<span class="hljs-keyword">catch</span> (e) {}
</code></pre>
<ul>
<li>importçš„æ–¹å¼æ— æ³•è§£å†³ ä¾æ—§æŠ¥é”™</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript">(<span class="hljs-keyword">async</span> () =&gt; {
  businessDashboardRouterConfig = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'$businessDashboardRouterConfig'</span>)
})()
</code></pre>
<p>è§£å†³æ–¹æ¡ˆ</p>
<ol>
<li>
<p>åˆ›å»ºç©ºæ–‡ä»¶è®© webpack åˆ«åæŒ‡å‘å®ƒä½œä¸º fallback</p>
<ol>
<li>
<pre><code class="hljs language-javascript" lang="javascript">      <span class="hljs-attr">alias</span>: (<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">const</span> aliasMap = {}
        <span class="hljs-keyword">const</span> blankModulePath = path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'../libs/blankModule.js'</span>)

        <span class="hljs-keyword">const</span> businessDashboardRouterConfigPath = path.<span class="hljs-title function_">resolve</span>(process.<span class="hljs-title function_">cwd</span>(), <span class="hljs-string">'app/pages/dashboard/router.js'</span>)
        aliasMap[<span class="hljs-string">'$businessDashboardRouterConfig'</span>] = fs.<span class="hljs-title function_">existsSync</span>(businessDashboardRouterConfigPath)
          ? businessDashboardRouterConfigPath
          : blankModulePath

        <span class="hljs-keyword">return</span> {
          ...aliasMap,
        }
      })(),
</code></pre>
</li>
<li>ç®€å•ã€ä½†æ˜¯éœ€è¦é¢å¤–ç»´æŠ¤æ–‡ä»¶</li>
</ol>
</li>
<li>
<p>ç¼–è¯‘æ—¶å¸¸é‡ + if åˆ¤æ–­</p>
<ol>
<li>
<pre><code class="hljs language-javascript" lang="javascript">      <span class="hljs-keyword">new</span> webpack.<span class="hljs-title class_">DefinePlugin</span>({
        <span class="hljs-attr">__HAS_BUSINESS_DASHBOARD_ROUTER__</span>: fs.<span class="hljs-title function_">existsSync</span>() <span class="hljs-comment">// true/false</span>
      }),
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript">    <span class="hljs-keyword">if</span>(__HAS_BUSINESS_DASHBOARD_ROUTER__) {...}
</code></pre>
<p>ä¸ä¼šå¾€Â window ä¸ŠæŒ‚å˜é‡ï¼›ä¸ä¼šåœ¨è¿è¡Œæ—¶ä»£ç é‡ŒçœŸçš„å‡ºç°Â __HAS_...__Â è¿™ä¸ªåå­—ã€‚</p>
<p>webpack åœ¨æ„å»ºæ—¶ä¼šåšå¸¸é‡æŠ˜å ï¼š<strong>å¦‚æœè¿™ä¸ªå®æ˜¯Â <code>false</code>ï¼Œæ•´å—Â <code>if</code>Â åˆ†æ”¯ä¼šè¢«æ‘‡æ‰</strong></p>
</li>
<li>
<p>æ— é¢å¤–æ–‡ä»¶ï¼Œä½†æ˜¯å®šä¹‰å…¨å±€å˜é‡è¿›è¡Œç¼–è¯‘æœŸå®æ›¿æ¢</p>
</li>
</ol>
</li>
<li>
<p>åå‘ä¾èµ–â€”â€”ç”±ä¸šåŠ¡å…¥å£è°ƒç”¨åŸºç¡€åº“</p>
</li>
</ol>
<h2 data-id="heading-5">åŠ¨æ€ç»„ä»¶æ‰©å±• dashboard/schema-view/components</h2>
<ol>
<li>åœ¨ <code>app/pages/dashboard/complex-view/schema-view/components/</code> ä¸‹å†™ç»„ä»¶</li>
</ol>
<ul>
<li>componentsçš„ç»Ÿä¸€å†™æ³•</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript">&lt;script setup&gt;
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> name = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'createForm'</span>)

<span class="hljs-keyword">const</span> isShow = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)

<span class="hljs-keyword">const</span> <span class="hljs-title function_">show</span> = (<span class="hljs-params"/>) =&gt; {
  isShow.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">close</span> = (<span class="hljs-params"/>) =&gt; {
  isShow.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
}

<span class="hljs-title function_">defineExpose</span>({
  name,
  show,
})
&lt;/script&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"less"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<ol start="2">
<li>é…ç½®<code>app/pages/dashboard/complex-view/schema-view/components/component-config.js</code></li>
</ol>
<h2 data-id="heading-6">schema-form æ§ä»¶æ‰©å±•</h2>
<ol>
<li>åœ¨<code>app/pages/widgets/schema-form/complex-view/</code>ä¸‹å†™ç»„ä»¶</li>
</ol>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">

<span class="hljs-keyword">const</span> <span class="hljs-title function_">validate</span> = (<span class="hljs-params"/>) =&gt; {}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">getValue</span> = (<span class="hljs-params"/>) =&gt; {}

<span class="hljs-title function_">defineExpose</span>({
  name,
  validate,
  getValue,
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"less"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p>2.  é…ç½®<code>app/pages/widgets/schema-form/form-item-config.js</code></p>
<h2 data-id="heading-7">schema-search-bar æ§ä»¶çš„æ‰©å±•</h2>
<ol>
<li>åœ¨<code>app/pages/widgets/schema-search-bar/complex-view/</code>ä¸‹å†™ç»„ä»¶</li>
</ol>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">

<span class="hljs-keyword">const</span> <span class="hljs-title function_">reset</span> = (<span class="hljs-params"/>) =&gt; {}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">getValue</span> = (<span class="hljs-params"/>) =&gt; {}

<span class="hljs-title function_">defineExpose</span>({
  reset,
  getValue,
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"less"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p>2.  é…ç½®<code>app/pages/widgets/schema-search-bar/search-item-config.js</code></p>
<h2 data-id="heading-8">å‘å¸ƒ</h2>
<pre><code class="hljs language-bash" lang="bash">npm config get registry
-&gt; https://registry.npmjs.org/
å¦‚æœä¸æ˜¯ï¼Œ npm config <span class="hljs-built_in">set</span> registry
</code></pre>
<pre><code class="hljs language-bash" lang="bash">npm login

npm <span class="hljs-built_in">whoami</span>

npm publish --access public
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TRAE SOLO æ­£å¼ç‰ˆï¼šAIå…¨é“¾è·¯å¼€å‘çš„æ–°èŒƒå¼ ğŸš€]]></title>    <link>https://juejin.cn/post/7581329603777773604</link>    <guid>https://juejin.cn/post/7581329603777773604</guid>    <pubDate>2025-12-09T02:16:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581329603777773604" data-draft-id="7581350888789557284" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TRAE SOLO æ­£å¼ç‰ˆï¼šAIå…¨é“¾è·¯å¼€å‘çš„æ–°èŒƒå¼ ğŸš€"/> <meta itemprop="keywords" content="å‰ç«¯,Trae"/> <meta itemprop="datePublished" content="2025-12-09T02:16:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="dorisrv"/> <meta itemprop="url" content="https://juejin.cn/user/1522178380270712"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TRAE SOLO æ­£å¼ç‰ˆï¼šAIå…¨é“¾è·¯å¼€å‘çš„æ–°èŒƒå¼ ğŸš€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1522178380270712/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    dorisrv
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T02:16:31.000Z" title="Tue Dec 09 2025 02:16:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">TRAE SOLO æ­£å¼ç‰ˆï¼šAIå…¨é“¾è·¯å¼€å‘çš„æ–°èŒƒå¼ ğŸš€</h2>
<h3 data-id="heading-1">ğŸ¤” ä¸ºä»€ä¹ˆé€‰æ‹© TRAE SOLOï¼Ÿ</h3>
<p>åœ¨AIåº”ç”¨å¼€å‘çš„å…¨æµç¨‹ä¸­ï¼Œå¼€å‘è€…å¾€å¾€é¢ä¸´ç€å·¥å…·é“¾å‰²è£‚ã€åä½œæ•ˆç‡ä½ä¸‹ã€éƒ¨ç½²æµç¨‹å¤æ‚ç­‰ç—›ç‚¹ã€‚TRAE SOLOæ­£å¼ç‰ˆä½œä¸ºä¸€æ¬¾æ•´åˆå¼AIå¼€å‘å·¥å…·ï¼Œé€šè¿‡SOLO coderã€DiffViewç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œä¸ºå¼€å‘è€…æä¾›äº†ä»ä»£ç ç¼–å†™ã€è°ƒè¯•ä¼˜åŒ–åˆ°æœ€ç»ˆéƒ¨ç½²çš„å…¨é“¾è·¯è§£å†³æ–¹æ¡ˆã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼š</p>
<ul>
<li>å½“ä½ éœ€è¦å¿«é€Ÿå®ç°ä¸€ä¸ªAIåŠŸèƒ½æ—¶ï¼Œ<strong>SOLO coder</strong> èƒ½æ™ºèƒ½ç”Ÿæˆé«˜è´¨é‡ä»£ç </li>
<li>å½“ä½ éœ€è¦å¯¹æ¯”ä¸åŒå®ç°æ–¹æ¡ˆæ—¶ï¼Œ<strong>DiffView</strong> èƒ½æ¸…æ™°å±•ç¤ºä»£ç å·®å¼‚</li>
<li>å½“ä½ éœ€è¦éƒ¨ç½²åº”ç”¨æ—¶ï¼Œå·¥å…·æä¾›äº†ä¸€é”®å¼éƒ¨ç½²æµç¨‹</li>
</ul>
<p>è¿™å°±æ˜¯TRAE SOLOå¸¦æ¥çš„å…¨æ–°å¼€å‘ä½“éªŒï¼</p>
<h3 data-id="heading-2">ğŸ’¡ TRAE SOLO æ ¸å¿ƒåŠŸèƒ½è¯¦è§£</h3>
<h4 data-id="heading-3">1. SOLO coderï¼šæ™ºèƒ½ä»£ç ç”Ÿæˆçš„å¾—åŠ›åŠ©æ‰‹</h4>
<p>SOLO coderæ˜¯TRAE SOLOçš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œå®ƒåˆ©ç”¨å…ˆè¿›çš„AIæ¨¡å‹ï¼Œæ ¹æ®è‡ªç„¶è¯­è¨€æè¿°ç”Ÿæˆé«˜è´¨é‡ä»£ç ã€‚</p>
<h5 data-id="heading-4">åŸºç¡€ä½¿ç”¨ç¤ºä¾‹</h5>
<p>å‡è®¾æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªåŸºäºReactçš„AIå›¾ç‰‡ç”Ÿæˆç»„ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨ SOLO coder ç”Ÿæˆçš„ React AI å›¾ç‰‡ç”Ÿæˆç»„ä»¶</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">AIImageGenerator</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [prompt, setPrompt] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);
  <span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [imageUrl, setImageUrl] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);
  <span class="hljs-keyword">const</span> [error, setError] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);
  <span class="hljs-keyword">const</span> fileInputRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// ç”Ÿæˆå›¾ç‰‡çš„æ ¸å¿ƒå‡½æ•°</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">generateImage</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">if</span> (!prompt.<span class="hljs-title function_">trim</span>()) {
      <span class="hljs-title function_">setError</span>(<span class="hljs-string">'è¯·è¾“å…¥æè¿°è¯'</span>);
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">try</span> {
      <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">true</span>);
      <span class="hljs-title function_">setError</span>(<span class="hljs-string">''</span>);
      <span class="hljs-title function_">setImageUrl</span>(<span class="hljs-string">''</span>);

      <span class="hljs-comment">// è°ƒç”¨ AI å›¾ç‰‡ç”Ÿæˆ API</span>
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/api/generate-image'</span>, {
        prompt,
        <span class="hljs-attr">n</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">size</span>: <span class="hljs-string">'1024x1024'</span>
      });

      <span class="hljs-keyword">if</span> (response.<span class="hljs-property">data</span>?.<span class="hljs-property">images</span>?.[<span class="hljs-number">0</span>]) {
        <span class="hljs-title function_">setImageUrl</span>(response.<span class="hljs-property">data</span>.<span class="hljs-property">images</span>[<span class="hljs-number">0</span>]);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_">setError</span>(<span class="hljs-string">'å›¾ç‰‡ç”Ÿæˆå¤±è´¥ï¼Œè¯·é‡è¯•'</span>);
      }
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ç”Ÿæˆå›¾ç‰‡å‡ºé”™:'</span>, err);
      <span class="hljs-title function_">setError</span>(<span class="hljs-string">'ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥è¿æ¥åé‡è¯•'</span>);
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>);
    }
  };

  <span class="hljs-comment">// ä¿å­˜å›¾ç‰‡åˆ°æœ¬åœ°</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">saveImage</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">if</span> (imageUrl &amp;&amp; fileInputRef.<span class="hljs-property">current</span>) {
      <span class="hljs-keyword">const</span> link = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'a'</span>);
      link.<span class="hljs-property">href</span> = imageUrl;
      link.<span class="hljs-property">download</span> = <span class="hljs-string">`ai-image-<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>.png`</span>;
      link.<span class="hljs-title function_">click</span>();
    }
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"ai-image-generator"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"generator-header"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>âœ¨ AI å›¾ç‰‡ç”Ÿæˆå™¨<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¾“å…¥æè¿°è¯ï¼Œè®©AIä¸ºä½ åˆ›ä½œç‹¬ç‰¹çš„å›¾ç‰‡<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"generator-content"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"input-section"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span>
            <span class="hljs-attr">value</span>=<span class="hljs-string">{prompt}</span>
            <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setPrompt(e.target.value)}
            placeholder="è¯·è¾“å…¥å›¾ç‰‡æè¿°ï¼Œä¾‹å¦‚ï¼šä¸€åªå¯çˆ±çš„æŸ¯åŸºåœ¨è‰åœ°ä¸Šå¥”è·‘ï¼Œé˜³å…‰æ˜åªšï¼Œç»†èŠ‚ä¸°å¯Œ"
            rows={3}
          /&gt;
          <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
            <span class="hljs-attr">onClick</span>=<span class="hljs-string">{generateImage}</span>
            <span class="hljs-attr">disabled</span>=<span class="hljs-string">{loading}</span>
            <span class="hljs-attr">className</span>=<span class="hljs-string">"generate-btn"</span>
          &gt;</span>
            {loading ? 'ç”Ÿæˆä¸­...' : 'ç”Ÿæˆå›¾ç‰‡'}
          <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

        {error &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"error-message"</span>&gt;</span>âš ï¸ {error}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}

        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"result-section"</span>&gt;</span>
          {imageUrl ? (
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"image-container"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{imageUrl}</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"AIç”Ÿæˆçš„å›¾ç‰‡"</span> /&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
                <span class="hljs-attr">onClick</span>=<span class="hljs-string">{saveImage}</span>
                <span class="hljs-attr">className</span>=<span class="hljs-string">"save-btn"</span>
              &gt;</span>
                ğŸ’¾ ä¿å­˜å›¾ç‰‡
              <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          ) : (
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"empty-state"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ğŸ¨ è¾“å…¥æè¿°è¯ï¼Œå¼€å§‹ä½ çš„åˆ›ä½œä¹‹æ—…<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          )}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">AIImageGenerator</span>;
</code></pre>
<h5 data-id="heading-5">SOLO coder é«˜çº§æŠ€å·§</h5>
<ol>
<li>
<p><strong>ç²¾ç¡®æç¤ºå·¥ç¨‹</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">// å¥½çš„æç¤ºï¼š
å¸®æˆ‘ç”Ÿæˆä¸€ä¸ªä½¿ç”¨ React Hooks çš„å›¾ç‰‡ä¸Šä¼ ç»„ä»¶ï¼ŒåŒ…å«é¢„è§ˆã€æ‹–æ‹½ä¸Šä¼ ã€è¿›åº¦æ˜¾ç¤ºå’Œé”™è¯¯å¤„ç†åŠŸèƒ½

// æ›´å¥½çš„æç¤ºï¼š
å¸®æˆ‘ç”Ÿæˆä¸€ä¸ªä½¿ç”¨ React 18 + TypeScript çš„å›¾ç‰‡ä¸Šä¼ ç»„ä»¶ï¼Œè¦æ±‚ï¼š
<span class="hljs-bullet">1.</span> ä½¿ç”¨ useState å’Œ useRef Hooks
<span class="hljs-bullet">2.</span> æ”¯æŒæ‹–æ‹½ä¸Šä¼ å’Œç‚¹å‡»é€‰æ‹©
<span class="hljs-bullet">3.</span> å®æ—¶æ˜¾ç¤ºä¸Šä¼ è¿›åº¦
<span class="hljs-bullet">4.</span> æ”¯æŒ JPGã€PNGã€WebP æ ¼å¼éªŒè¯
<span class="hljs-bullet">5.</span> é™åˆ¶æ–‡ä»¶å¤§å°ä¸º 5MB
<span class="hljs-bullet">6.</span> æä¾›å‹å¥½çš„é”™è¯¯æç¤º
</code></pre>
</li>
<li>
<p><strong>è¿­ä»£å¼ä»£ç ç”Ÿæˆ</strong></p>
<ul>
<li>å…ˆç”ŸæˆåŸºç¡€åŠŸèƒ½</li>
<li>ç„¶åé€æ­¥æ·»åŠ é«˜çº§ç‰¹æ€§</li>
<li>æœ€åä¼˜åŒ–æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ</li>
</ul>
</li>
</ol>
<h4 data-id="heading-6">2. DiffViewï¼šä»£ç å·®å¼‚å¯è§†åŒ–çš„åˆ©å™¨</h4>
<p>DiffViewåŠŸèƒ½è®©å¼€å‘è€…èƒ½å¤Ÿç›´è§‚åœ°æ¯”è¾ƒä¸åŒç‰ˆæœ¬çš„ä»£ç ï¼Œåˆ†æå˜æ›´å†…å®¹ï¼Œæå‡åä½œæ•ˆç‡å’Œä»£ç è´¨é‡ã€‚</p>
<h5 data-id="heading-7">åŸºç¡€ä½¿ç”¨ç¤ºä¾‹</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŸå§‹ç‰ˆæœ¬ï¼šç®€å•çš„å›¾ç‰‡åŠ è½½ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">ImageLoader</span> = (<span class="hljs-params">{ src, alt }</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{src}</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">{alt}</span> /&gt;</span></span>;
};

<span class="hljs-comment">// ä¼˜åŒ–ç‰ˆæœ¬ï¼šå¸¦åŠ è½½çŠ¶æ€å’Œé”™è¯¯å¤„ç†çš„å›¾ç‰‡ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">ImageLoader</span> = (<span class="hljs-params">{ src, alt, fallback }</span>) =&gt; {
  <span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">true</span>);
  <span class="hljs-keyword">const</span> [error, setError] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"image-loader"</span>&gt;</span>
      {loading &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"loading-spinner"</span>&gt;</span>ğŸ”„ åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}
      {error &amp;&amp; (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"error-message"</span>&gt;</span>
          {fallback || 'âŒ å›¾ç‰‡åŠ è½½å¤±è´¥'}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      )}
      <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
        <span class="hljs-attr">src</span>=<span class="hljs-string">{src}</span>
        <span class="hljs-attr">alt</span>=<span class="hljs-string">{alt}</span>
        <span class="hljs-attr">onLoad</span>=<span class="hljs-string">{()</span> =&gt;</span> setLoading(false)}
        onError={() =&gt; {
          setLoading(false);
          setError(true);
        }}
        style={{ display: loading || error ? 'none' : 'block' }}
      /&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h5 data-id="heading-8">DiffView é«˜çº§åº”ç”¨</h5>
<ol>
<li><strong>åˆ†æ”¯å¯¹æ¯”</strong>ï¼šæ¯”è¾ƒä¸åŒåˆ†æ”¯çš„ä»£ç å·®å¼‚</li>
<li><strong>å†å²ç‰ˆæœ¬å¯¹æ¯”</strong>ï¼šæŸ¥çœ‹ä»£ç çš„æ¼”å˜è¿‡ç¨‹</li>
<li><strong>åˆå¹¶é¢„è§ˆ</strong>ï¼šåœ¨åˆå¹¶ä»£ç å‰æŸ¥çœ‹å¯èƒ½çš„å†²çª</li>
<li><strong>æ€§èƒ½å¯¹æ¯”</strong>ï¼šåˆ†æä¸åŒå®ç°æ–¹æ¡ˆçš„æ€§èƒ½å·®å¼‚</li>
</ol>
<h3 data-id="heading-9">ğŸš€ å®æˆ˜æ¡ˆä¾‹ï¼šAIèŠå¤©åº”ç”¨å…¨æµç¨‹å¼€å‘</h3>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªAIèŠå¤©åº”ç”¨çš„å¼€å‘æµç¨‹ï¼Œæ¥ä½“éªŒTRAE SOLOçš„å…¨é“¾è·¯å¼€å‘èƒ½åŠ›ã€‚</p>
<h4 data-id="heading-10">1. éœ€æ±‚åˆ†æä¸æŠ€æœ¯é€‰å‹</h4>
<p><strong>éœ€æ±‚</strong>ï¼šå¼€å‘ä¸€ä¸ªåŸºäºWebçš„AIèŠå¤©åº”ç”¨ï¼Œæ”¯æŒå¤šè½®å¯¹è¯ã€å†å²è®°å½•ä¿å­˜ã€ä¸»é¢˜åˆ‡æ¢ç­‰åŠŸèƒ½ã€‚</p>
<p><strong>æŠ€æœ¯é€‰å‹</strong>ï¼š</p>
<ul>
<li>å‰ç«¯ï¼šReact 18 + TypeScript + Vite</li>
<li>åç«¯ï¼šNode.js + Express</li>
<li>AIæ¨¡å‹ï¼šOpenAI API</li>
</ul>
<h4 data-id="heading-11">2. ä½¿ç”¨ SOLO coder å¿«é€Ÿæ­å»ºåŸºç¡€æ¶æ„</h4>
<h5 data-id="heading-12">å‰ç«¯æ ¸å¿ƒç»„ä»¶</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä½¿ç”¨ SOLO coder ç”Ÿæˆçš„èŠå¤©åº”ç”¨ä¸»ç»„ä»¶</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useRef, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Message</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../types'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ChatInput</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./ChatInput'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">MessageList</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./MessageList'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Header</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Header'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">ChatApp</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> [messages, setMessages] = useState&lt;<span class="hljs-title class_">Message</span>[]&gt;([]);
  <span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> messagesEndRef = useRef&lt;<span class="hljs-title class_">HTMLDivElement</span>&gt;(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// æ»šåŠ¨åˆ°æœ€æ–°æ¶ˆæ¯</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">scrollToBottom</span> = (<span class="hljs-params"/>) =&gt; {
    messagesEndRef.<span class="hljs-property">current</span>?.<span class="hljs-title function_">scrollIntoView</span>({ <span class="hljs-attr">behavior</span>: <span class="hljs-string">'smooth'</span> });
  };

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">scrollToBottom</span>();
  }, [messages]);

  <span class="hljs-comment">// å‘é€æ¶ˆæ¯</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">sendMessage</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">text: <span class="hljs-built_in">string</span></span>) =&gt; {
    <span class="hljs-keyword">if</span> (!text.<span class="hljs-title function_">trim</span>()) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// æ·»åŠ ç”¨æˆ·æ¶ˆæ¯</span>
    <span class="hljs-keyword">const</span> <span class="hljs-attr">userMessage</span>: <span class="hljs-title class_">Message</span> = {
      <span class="hljs-attr">id</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>().<span class="hljs-title function_">toString</span>(),
      text,
      <span class="hljs-attr">sender</span>: <span class="hljs-string">'user'</span>,
      <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()
    };

    <span class="hljs-title function_">setMessages</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> [...prev, userMessage]);
    <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">true</span>);

    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// è°ƒç”¨AIæ¥å£</span>
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/chat'</span>, {
        <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
        <span class="hljs-attr">headers</span>: {
          <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>
        },
        <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">messages</span>: [...messages, userMessage] })
      });

      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();

      <span class="hljs-comment">// æ·»åŠ AIå›å¤</span>
      <span class="hljs-keyword">const</span> <span class="hljs-attr">aiMessage</span>: <span class="hljs-title class_">Message</span> = {
        <span class="hljs-attr">id</span>: (<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() + <span class="hljs-number">1</span>).<span class="hljs-title function_">toString</span>(),
        <span class="hljs-attr">text</span>: data.<span class="hljs-property">response</span>,
        <span class="hljs-attr">sender</span>: <span class="hljs-string">'ai'</span>,
        <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()
      };

      <span class="hljs-title function_">setMessages</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> [...prev, aiMessage]);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'èŠå¤©é”™è¯¯:'</span>, error);
      <span class="hljs-comment">// æ·»åŠ é”™è¯¯æ¶ˆæ¯</span>
      <span class="hljs-keyword">const</span> <span class="hljs-attr">errorMessage</span>: <span class="hljs-title class_">Message</span> = {
        <span class="hljs-attr">id</span>: (<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() + <span class="hljs-number">1</span>).<span class="hljs-title function_">toString</span>(),
        <span class="hljs-attr">text</span>: <span class="hljs-string">'æŠ±æ­‰ï¼Œæš‚æ—¶æ— æ³•å“åº”ï¼Œè¯·ç¨åé‡è¯•'</span>,
        <span class="hljs-attr">sender</span>: <span class="hljs-string">'ai'</span>,
        <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()
      };
      <span class="hljs-title function_">setMessages</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> [...prev, errorMessage]);
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>);
    }
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"chat-app"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Header</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">MessageList</span> 
        <span class="hljs-attr">messages</span>=<span class="hljs-string">{messages}</span> 
        <span class="hljs-attr">loading</span>=<span class="hljs-string">{loading}</span>
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{messagesEndRef}</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ChatInput</span> <span class="hljs-attr">onSendMessage</span>=<span class="hljs-string">{sendMessage}</span> <span class="hljs-attr">disabled</span>=<span class="hljs-string">{loading}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">ChatApp</span>;
</code></pre>
<h5 data-id="heading-13">åç«¯æœåŠ¡</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨ SOLO coder ç”Ÿæˆçš„åç«¯æœåŠ¡</span>
<span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> cors = <span class="hljs-built_in">require</span>(<span class="hljs-string">'cors'</span>);
<span class="hljs-keyword">const</span> { <span class="hljs-title class_">Configuration</span>, <span class="hljs-title class_">OpenAIApi</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'openai'</span>);

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();
app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">cors</span>());
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">json</span>());

<span class="hljs-comment">// é…ç½® OpenAI API</span>
<span class="hljs-keyword">const</span> configuration = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>({
  <span class="hljs-attr">apiKey</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">OPENAI_API_KEY</span>,
});
<span class="hljs-keyword">const</span> openai = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OpenAIApi</span>(configuration);

<span class="hljs-comment">// èŠå¤©æ¥å£</span>
app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/api/chat'</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> { messages } = req.<span class="hljs-property">body</span>;

    <span class="hljs-comment">// æ„å»º OpenAI API è¯·æ±‚</span>
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> openai.<span class="hljs-title function_">createChatCompletion</span>({
      <span class="hljs-attr">model</span>: <span class="hljs-string">"gpt-3.5-turbo"</span>,
      <span class="hljs-attr">messages</span>: messages.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">msg</span> =&gt;</span> ({
        <span class="hljs-attr">role</span>: msg.<span class="hljs-property">sender</span> === <span class="hljs-string">'user'</span> ? <span class="hljs-string">'user'</span> : <span class="hljs-string">'assistant'</span>,
        <span class="hljs-attr">content</span>: msg.<span class="hljs-property">text</span>
      })),
      <span class="hljs-attr">temperature</span>: <span class="hljs-number">0.7</span>,
    });

    res.<span class="hljs-title function_">json</span>({
      <span class="hljs-attr">response</span>: response.<span class="hljs-property">data</span>.<span class="hljs-property">choices</span>[<span class="hljs-number">0</span>].<span class="hljs-property">message</span>?.<span class="hljs-property">content</span> || <span class="hljs-string">'æœªæ”¶åˆ°å“åº”'</span>
    });
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'APIé”™è¯¯:'</span>, error);
    res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯'</span> });
  }
});

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PORT</span> = process.<span class="hljs-property">env</span>.<span class="hljs-property">PORT</span> || <span class="hljs-number">3001</span>;
app.<span class="hljs-title function_">listen</span>(<span class="hljs-variable constant_">PORT</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:<span class="hljs-subst">${PORT}</span>`</span>);
});
</code></pre>
<h4 data-id="heading-14">3. ä½¿ç”¨ DiffView ä¼˜åŒ–ä»£ç ç»“æ„</h4>
<p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ä¼˜åŒ–ä»£ç ç»“æ„ï¼Œä¾‹å¦‚å°†çŠ¶æ€ç®¡ç†ä»ç»„ä»¶å†…éƒ¨è¿ç§»åˆ°Contextä¸­ã€‚ä½¿ç”¨DiffViewå¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°è¿™äº›å˜æ›´ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¼˜åŒ–å‰ï¼šç»„ä»¶å†…éƒ¨çŠ¶æ€ç®¡ç†</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ChatApp</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> [messages, setMessages] = useState&lt;<span class="hljs-title class_">Message</span>[]&gt;([]);
  <span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-comment">// ...</span>
};

<span class="hljs-comment">// ä¼˜åŒ–åï¼šä½¿ç”¨ Context è¿›è¡ŒçŠ¶æ€ç®¡ç†</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ChatContext</span> = createContext&lt;<span class="hljs-title class_">ChatContextType</span>&gt;({
  <span class="hljs-attr">messages</span>: [],
  <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">sendMessage</span>: <span class="hljs-keyword">async</span> () =&gt; {},
  <span class="hljs-attr">clearMessages</span>: <span class="hljs-function">() =&gt;</span> {}
});

<span class="hljs-keyword">const</span> <span class="hljs-title class_">ChatProvider</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;{ <span class="hljs-attr">children</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span> }&gt; = <span class="hljs-function">(<span class="hljs-params">{ children }</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [messages, setMessages] = useState&lt;<span class="hljs-title class_">Message</span>[]&gt;([]);
  <span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-comment">// å‘é€æ¶ˆæ¯çš„é€»è¾‘</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">sendMessage</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">text: <span class="hljs-built_in">string</span></span>) =&gt; {
    <span class="hljs-comment">// ... å®ç°é€»è¾‘</span>
  };

  <span class="hljs-comment">// æ¸…ç©ºæ¶ˆæ¯</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">clearMessages</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setMessages</span>([]);
  };

  <span class="hljs-keyword">const</span> value = {
    messages,
    loading,
    sendMessage,
    clearMessages
  };

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ChatContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">ChatContext.Provider</span>&gt;</span></span>;
};

<span class="hljs-comment">// è‡ªå®šä¹‰ Hook æ–¹ä¾¿ä½¿ç”¨ Context</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">useChat</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> context = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">ChatContext</span>);
  <span class="hljs-keyword">if</span> (!context) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'useChat must be used within a ChatProvider'</span>);
  }
  <span class="hljs-keyword">return</span> context;
};

<span class="hljs-comment">// ä¼˜åŒ–åçš„ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ChatApp</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ChatProvider</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"chat-app"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Header</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">MessageList</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">ChatInput</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ChatProvider</span>&gt;</span></span>
  );
};
</code></pre>
<h4 data-id="heading-15">4. éƒ¨ç½²ä¸ä¸Šçº¿</h4>
<p>TRAE SOLOæä¾›äº†ä¸€é”®å¼éƒ¨ç½²åŠŸèƒ½ï¼Œæ”¯æŒå¤šç§éƒ¨ç½²æ–¹å¼ï¼š</p>
<ol>
<li>
<p><strong>Vercel éƒ¨ç½²</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨ SOLO coder ç”Ÿæˆçš„ Vercel éƒ¨ç½²è„šæœ¬</span>
vercel init
vercel deploy
</code></pre>
</li>
<li>
<p><strong>Docker å®¹å™¨åŒ–éƒ¨ç½²</strong></p>
<pre><code class="hljs language-dockerfile" lang="dockerfile"># ä½¿ç”¨ SOLO coder ç”Ÿæˆçš„ Dockerfile
FROM node:18-alpine

WORKDIR /app

COPY package*.json ./
RUN npm install

COPY . .

RUN npm run build

EXPOSE 3000

CMD ["npm", "start"]
</code></pre>
</li>
</ol>
<h3 data-id="heading-16">âš ï¸ é¿å‘æŒ‡å—ä¸æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-17">1. SOLO coder ä½¿ç”¨æ³¨æ„äº‹é¡¹</h4>
<ul>
<li><strong>é¿å…æ¨¡ç³Šçš„æç¤º</strong>ï¼šæç¤ºè¶Šå…·ä½“ï¼Œç”Ÿæˆçš„ä»£ç è´¨é‡è¶Šé«˜</li>
<li><strong>éªŒè¯ç”Ÿæˆçš„ä»£ç </strong>ï¼šè™½ç„¶ä»£ç è´¨é‡å¾ˆé«˜ï¼Œä½†ä»éœ€éªŒè¯é€»è¾‘æ­£ç¡®æ€§å’Œå®‰å…¨æ€§</li>
<li><strong>å…³æ³¨æ€§èƒ½é—®é¢˜</strong>ï¼šå¯¹äºç”Ÿæˆçš„ä»£ç ï¼Œè¦æ³¨æ„æ£€æŸ¥æ˜¯å¦å­˜åœ¨æ€§èƒ½ç“¶é¢ˆ</li>
<li><strong>ä¿æŠ¤APIå¯†é’¥</strong>ï¼šä¸è¦å°†æ•æ„Ÿä¿¡æ¯ç›´æ¥åŒ…å«åœ¨ç”Ÿæˆçš„ä»£ç ä¸­</li>
</ul>
<h4 data-id="heading-18">2. DiffView é«˜æ•ˆä½¿ç”¨æŠ€å·§</h4>
<ul>
<li><strong>è®¾ç½®åˆé€‚çš„æ¯”è¾ƒèŒƒå›´</strong>ï¼šé¿å…æ¯”è¾ƒè¿‡å¤§çš„ä»£ç æ–‡ä»¶</li>
<li><strong>ä½¿ç”¨è¿‡æ»¤åŠŸèƒ½</strong>ï¼šåªæŸ¥çœ‹å…³é”®ä»£ç çš„å·®å¼‚</li>
<li><strong>ç»“åˆç‰ˆæœ¬æ§åˆ¶</strong>ï¼šä¸Gitç­‰ç‰ˆæœ¬æ§åˆ¶å·¥å…·ç»“åˆä½¿ç”¨ï¼Œæ•ˆæœæ›´ä½³</li>
<li><strong>å®šæœŸä¿å­˜å¯¹æ¯”ç»“æœ</strong>ï¼šå¯¹äºé‡è¦çš„ä»£ç å˜æ›´ï¼Œä¿å­˜å¯¹æ¯”ç»“æœä»¥ä¾¿åç»­å‚è€ƒ</li>
</ul>
<h4 data-id="heading-19">3. å…¨é“¾è·¯å¼€å‘æœ€ä½³å®è·µ</h4>
<ul>
<li><strong>é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡</strong>ï¼šå°†åº”ç”¨æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹æ¨¡å—ï¼Œæé«˜å¯ç»´æŠ¤æ€§</li>
<li><strong>ä½¿ç”¨TypeScript</strong>ï¼šå¢å¼ºä»£ç çš„ç±»å‹å®‰å…¨æ€§</li>
<li><strong>å®ç°è‡ªåŠ¨åŒ–æµ‹è¯•</strong>ï¼šç¡®ä¿åº”ç”¨çš„ç¨³å®šæ€§</li>
<li><strong>ç›‘æ§ä¸æ—¥å¿—</strong>ï¼šæ·»åŠ ç›‘æ§å’Œæ—¥å¿—åŠŸèƒ½ï¼Œä¾¿äºæ’æŸ¥é—®é¢˜</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šå®šæœŸè¿›è¡Œæ€§èƒ½åˆ†æå’Œä¼˜åŒ–</li>
</ul>
<h3 data-id="heading-20">ğŸ¯ ä¸ä¼ ç»Ÿå¼€å‘å·¥å…·çš„å¯¹æ¯”</h3>



































<table><thead><tr><th>ç‰¹æ€§</th><th>TRAE SOLO</th><th>ä¼ ç»Ÿå¼€å‘å·¥å…·é“¾</th></tr></thead><tbody><tr><td>ä»£ç ç”Ÿæˆ</td><td>âœ… æ™ºèƒ½ç”Ÿæˆé«˜è´¨é‡ä»£ç </td><td>âŒ éœ€è¦æ‰‹åŠ¨ç¼–å†™</td></tr><tr><td>å·®å¼‚å¯¹æ¯”</td><td>âœ… å¯è§†åŒ–DiffView</td><td>âš ï¸ ä¾èµ–ç¬¬ä¸‰æ–¹å·¥å…·</td></tr><tr><td>éƒ¨ç½²æµç¨‹</td><td>âœ… ä¸€é”®å¼éƒ¨ç½²</td><td>âŒ æ‰‹åŠ¨é…ç½®å¤æ‚</td></tr><tr><td>å…¨é“¾è·¯æ”¯æŒ</td><td>âœ… ä»å¼€å‘åˆ°éƒ¨ç½²çš„å®Œæ•´æµç¨‹</td><td>âŒ å·¥å…·é“¾å‰²è£‚</td></tr><tr><td>åä½œæ•ˆç‡</td><td>âœ… å›¢é˜Ÿåä½œåŠŸèƒ½å®Œå–„</td><td>âš ï¸ åä½œæˆæœ¬é«˜</td></tr></tbody></table>
<h3 data-id="heading-21">ğŸ“ æ€»ç»“</h3>
<p>TRAE SOLOæ­£å¼ç‰ˆä½œä¸ºä¸€æ¬¾å…¨é“¾è·¯AIå¼€å‘å·¥å…·ï¼Œé€šè¿‡SOLO coderã€DiffViewç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œä¸ºAIåº”ç”¨å¼€å‘å¸¦æ¥äº†å…¨æ–°çš„èŒƒå¼ã€‚å®ƒä¸ä»…æé«˜äº†å¼€å‘æ•ˆç‡ï¼Œè¿˜æå‡äº†ä»£ç è´¨é‡å’Œåä½œä½“éªŒã€‚</p>
<p>é€šè¿‡æœ¬æ–‡çš„ä»‹ç»å’Œå®æˆ˜æ¡ˆä¾‹ï¼Œç›¸ä¿¡ä½ å·²ç»å¯¹TRAE SOLOæœ‰äº†æ·±å…¥çš„äº†è§£ã€‚æ— è®ºä½ æ˜¯AIå¼€å‘æ–°æ‰‹è¿˜æ˜¯èµ„æ·±å¼€å‘è€…ï¼ŒTRAE SOLOéƒ½èƒ½æˆä¸ºä½ å¼€å‘è·¯ä¸Šçš„å¾—åŠ›åŠ©æ‰‹ï¼</p>
<p>è®©æˆ‘ä»¬ä¸€èµ·æ‹¥æŠ±AIå¼€å‘çš„æ–°æ—¶ä»£ï¼Œç”¨TRAE SOLOåˆ›é€ æ›´å¤šç²¾å½©çš„AIåº”ç”¨å§ï¼ ğŸ¤—</p>
<hr/>
<p><strong>ç›¸å…³èµ„æºï¼š</strong></p>
<ul>
<li><a href="https://trae.ai/docs" target="_blank" title="https://trae.ai/docs" ref="nofollow noopener noreferrer">TRAE SOLO å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Freact.dev%2F" target="_blank" title="https://react.dev/" ref="nofollow noopener noreferrer">React å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.openai.com%2Fdocs%2F" target="_blank" title="https://platform.openai.com/docs/" ref="nofollow noopener noreferrer">OpenAI API æ–‡æ¡£</a></li>
</ul>
<p><strong>æ ‡ç­¾ï¼š</strong> #AIå¼€å‘ #TRAE_SOLO #å…¨é“¾è·¯å¼€å‘ #å‰ç«¯æŠ€æœ¯ #å·¥å…·å®æµ‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[antd v3 selectè‡ªå®šä¹‰ä¸‹æ‹‰æ¡†å†…å®¹å¤±å»ç„¦ç‚¹æ—¶ä¼šå…³é—­ä¸‹æ‹‰æ¡†]]></title>    <link>https://juejin.cn/post/7581619505568612378</link>    <guid>https://juejin.cn/post/7581619505568612378</guid>    <pubDate>2025-12-09T02:28:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581619505568612378" data-draft-id="7581374664327528499" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="antd v3 selectè‡ªå®šä¹‰ä¸‹æ‹‰æ¡†å†…å®¹å¤±å»ç„¦ç‚¹æ—¶ä¼šå…³é—­ä¸‹æ‹‰æ¡†"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-09T02:28:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ˜è®°è´¦ç°¿_å¾®ä¿¡å°ç¨‹åº"/> <meta itemprop="url" content="https://juejin.cn/user/1901536389893546"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            antd v3 selectè‡ªå®šä¹‰ä¸‹æ‹‰æ¡†å†…å®¹å¤±å»ç„¦ç‚¹æ—¶ä¼šå…³é—­ä¸‹æ‹‰æ¡†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1901536389893546/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ˜è®°è´¦ç°¿_å¾®ä¿¡å°ç¨‹åº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T02:28:00.000Z" title="Tue Dec 09 2025 02:28:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(1turn)}}.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#36ace1;background-image:linear-gradient(90deg,rgba(217,234,251,.25) 3%,transparent 0),linear-gradient(1turn,rgba(217,234,251,.25) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{color:#36ace1}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"";display:block;position:absolute;left:0;top:0;bottom:0;margin:auto;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAF8UlEQVRIS71Wa2wUVRT+7r0zu9t2t/RBaSioPCpYbIUfaEIQUogSAwZDAlUSGwgg/CBATExMCJH1D2hIfOEjFEUEhViCgBgIUCH44OkjPAMGBVqhpUCfW3Zn5z7MuQOE0hYxMdxJdmd25s53vnO+851leMCLPWA8/CfA2TsvL8n7q+nTFfNLG+4VqInHOeJLDQMzdz/3r4DGGDb9lxu+aPcE7U61JHDMDePcuv0O21ShugOefqDdtBie3Dk6K/O+Ab+qOjJiz7Ahv6c8hbDDwRiQlgYGDOcaWyEcjg8On+j71IpJndjGt9XO+jM7+pkywNvbazIfercieSdoJ4bE5sWjyZqMpDdeaQNXMNC34ME3LV8B56+1w3AOgk+EXe/Ub6uiLB6XdH/G/mYjeBCcFwnt3zQqWt4t4NjjnhzQ1CGkBhwOCMFAB71U0qsYgRlwBtQ1tiEJAy44OBdQUmFK3aWS06NLT+ukZAQoKCCjsfbDmk6p78RwX3ncWffmIj8U4kh6GpEwh+9rGy23LDU4GBrrm9DsuDYIGMAYIC/EUNQ7Cq1hn+WM2TI8f+jEyCmvjfn1FssuojHx6tDkyZOaCzr8TNpASzDAk8amlRIrEylcSGsYrcGIstIYWhgDDIM2BiGH3ywFkGAC1U9n38bpVqWGdk6r4HMWrZZaG1D5KLn0qYyBEAKnG1otAxLR8L7Z9nfP13CJHQ/ST4vK8sVHe8JsU0U6uO5hlexo8PI7vNDQomwoBRAwpSmtgJAAztS3QLsOsmBQlBtFJMQhlbbPUBBUR7o2hqHVddLbRsfCPQJ+u3TPw8uGl1yklAlHIJZKo3//XEhlLCtifPFyM7xwCI/lZ8IKTTBbS7pPLIggZZsSQ+zXbT4UYSsnet3UMM5HPT5LGbrDGYQroClyT2Jwnyj9aN949e8mDCwuRFoqKxRHUJ21BSDRELuQYGhvbMVV32Dp2RuxcfHSRBfAYTsbU9nJdFj5EiLkglHkRInC1xoxKbH9hQJIaTDvxxTCUddWl4wg0dCCtqSPDmoVx4Eitpxh64ZtsT6b5ie6pPRkfF90TllxOzEwmipMKRRgHODGgCuJkqIcvDdC2BZ5Y+tlHHMzkAKghbAxcQqQDiKrFBxhqg5MHTivS1tQ+sdsvaQl5Yd6yfdRXNQLsQwXnq/AQFLXEIIjzBSuNaaR0SuEtkQKl9IKjAsbJaWfzo1USDsM6zceDJfeVGgnhhN2N7YOyo5kJz1pa2AbgfrO1gRwXW6vSRQNtddR+EhvKGmseskgTtY2Q7kucYWWgToPHzyUyXry0iXfnBtfl5f/PaWPvPNW/zkOAQegJHltFE5dSaCskHqPVEnqpMAMEgkPtR1pKxyh/N0/vTToubtH1G3RmLjhM8ubKXfWB2mRa9ySOaWS2uT8lTZ0cI6I52Ngv7zAbW9mQVm1cpytu441P38XeXTlQu+e46nyh+bjLkMZRU0MCYTCJWZSG1y7cBWNURpxBlxqFBfEwGnGGhaYPSNwhpSv4DK+/vPynBk9MqRIiOWs8a2WJTm9a+cgh6SaMIMz9W1WjYHHMtv0wSmZdWB9gdsya/rcYVg7JoffCdqlD6ceTpiY59tM0PhJp5WNvra+BQkejCMyBarr8KKYDcZi8sDaCDKYFIGRk+FnSVXzyTO9JxBwF8DLc1dlLn65ooNEYN0fBsu21fTvL6PXnhxXlnLIqqhYYBian4lQ2Lk9ogiALsimiLC1QYfhlV1Hnxh7JfcMqxrpd7U2GFa5t9nOd7Kr+kg4uWvnCpromlJeXlq3Os3ZLOlrZBmNQf1ybVqpxhbA7mRIOCy1+esDOWhIyDv/+3Q7LRbsqH+rKRJ+nba+/+WW7II1s9vvVBuNr7KNF1WUM1bSt5f1Vq01jUVkKfnx8uoti3Or5rbd9782M61azJz/rFywYU/OyKqK1p5G2MS1Z18tGFDwTkvIxcK9RwaMP3a9/tbc62lPj/Nw5B9ey9Ehy/MY4oEqelgNleuyCgdXJlmc3fO5Ll56r5f+n/f+AWFf9jvBgaHpAAAAAElFTkSuQmCC);animation:spin 2s linear 1s infinite}.markdown-body h1{position:relative;font-size:30px;padding:12px 38px;margin:30px 0}.markdown-body h1:before{width:30px;height:30px;background-size:30px 30px}.markdown-body h2{position:relative;font-size:24px;padding:12px 36px;margin:28px 0}.markdown-body h2:before{width:28px;height:28px;background-size:28px 28px}.markdown-body h3{position:relative;font-size:18px;padding:4px 32px;margin:26px 0}.markdown-body h3:before{width:24px;height:24px;background-size:24px 24px}.markdown-body h4{position:relative;padding:4px 28px;font-size:16px;margin:22px 0}.markdown-body h4:before{width:20px;height:20px;background-size:20px 20px}.markdown-body h5{position:relative;padding:4px 26px;font-size:15px;margin:20px 0}.markdown-body h5:before{width:18px;height:18px;background-size:18px 18px}.markdown-body h6{position:relative;padding:4px 22px;font-size:14px;margin:16px 0}.markdown-body h6:before{width:16px;height:16px;background-size:16px 16px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#36ace1,#dff0fe,#36ace1);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:50px;height:24px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAEgElEQVRIS72Va0xbZRjH/z2FcimbchEQFDYRCIRAAWFQ2MaCXBwmUxYDLGGEcRFkH9wmk04zG0Bo2dwNIisERANqhjqdEmhd4nRbuwpsXDYWLLoRgeG4Chu9QHvMOQ0dpTAKH3y/tDnv8/5/z/Oc//scBv6nxdgoJ14gVYPEuITHdTdHY12gRIH0T0KljlqwthqUFHGtzAEsxqwLtPvkdc+FeeI3BgMeAMEhdOqR1mM7xswBrgmKE8pfIUhtm7fbZsft/i7wc98MtrUFxmbU6ByYgFwxjtFp5Q+WpF1mCy9wajXoqqD4E91saOf603e+5B7t99xTkyZJEiKJAl2DE9Xio1HvrBS8IuhVwVUP503swdJ9QWAw1izaoDs6pQT/655BMS9yy3KYiUoM/7adu7NmtnQfx5zWm8Q8Ui3gyGcddyU8rv/STRNQouDGP5/mhTubX4dpPv3DMzh1qS9LwuPWr+i63WVyn5QYj/4d/i4bqmbpoQ+auvBlQYghX6PE4wTSOzV5EUYlb5Q4MDqLk9/3cMRF27spDSNQamUnWZ4ebNB+OKNCyYVeFCZ5wZ5tiePN/UiP2YoQL0cUX+iFt4sNUiLdcaVvHJLecQiWnKVE8s5LvxAXRWeYgHLre0hecgAN0sxr0XBZgbJUP6OiLnaM4ivZCBrzOWBZEIY9rY5E8pl2nM0KMzzLq5aPiXmRzgbQm2VyR8KGGK/ICAFB6IusbvsDwhRf+n/jtSHc/nsGgjR9V6/1TyLa1wGU+FtnO1CbHQTHTSzIFJOYJ1jwcGLTccMTcyhp7oW4KFJ/SV4/IScrc55kQj07WNuOn94Lpw8kCm/Qv3W5HLjbWxsyfuNUO1TzWjAJBloKt2FBS+Jz6ShiA12NupBdLWugQcmn28lPMkONNql3U5cTSD9Lq+qEUqPFt++G0aKL687wDAqb+pAU7IKCuK2493AOPQ9UCNpib6T1tkg+RZ9KKJcNn8sJc1vac8o16jklLWLuOiDqwvHUIKPw7vtTON+iCDKkl/Cx9FeSYET5um1mHt6jN0Dz9ftwYjORudNjTdaBmi7kxvvA1d6Gjs0X/Q5Sp3tMEMSHre9HnDEZAPFCWUNVdliGJVPvqEP1Hbh4yPj9LadSY6fu6gPsCX+B3mq7NYLv2od8fj4aoViMNQGFijos/XVMTXGavgUisQIle71hwVx9KFEutLVjw8GORTuxoEbeJS7iPrmQyy/sIj2hQpqYHO7ZGs95nnZS4y8K8Pfqrb58UZ+IlKqbqNgfQm8da+pC9xjLqo8foFkau2qaCeXSyvzXfA9SDrp1bxJ/DU/jSJKXEWdBR2J/9U0UpwXTFZ/+8S76h/71FvO4A8sTeuqQThDKalOiPLN3BbhiYlaNsm964elkCztrC4xMqeDqYIus2JdB3cbS5l4MTag44qJt9GxbF4gKThRKY59lW13+KCUQ1pZMEwHKviKx4pFSqXzxCn/X9Gr2NO+zw+cTiTbxmUyCqH3GlsWg2kRNhOnHmhlrFkIvHTZt1borWvMCmRnwH4usn58STiycAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body del{color:#36ace1}.markdown-body code{font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#282c34;color:#4ec9b0;padding:.24em .46em;margin:0 4px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-family:Menlo,Monaco,Consolas,Courier New,monospace;font-size:12px;border-radius:10px;padding:15px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#4ec9b0;background:#282c34}.markdown-body a{text-decoration:none;color:#409eff;border-bottom:1px solid #409eff}.markdown-body a:active,.markdown-body a:hover{color:#007bff;border-bottom:1px solid #007bff}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{position:relative;padding:8px 26px;background-color:rgba(54,172,225,.75);margin:16px 0;border-left:4px solid #409eff;border-radius:5px}.markdown-body blockquote:before{content:"â";top:10px;left:8px;color:#409eff;font-size:20px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:20px;position:absolute;right:8px;bottom:0;color:#409eff;opacity:.7}.markdown-body blockquote&gt;p{color:#fff}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><code>antd ç‰ˆæœ¬ 3.19.3</code>
å…ˆè¯´ä¸€ä¸‹æˆ‘é‡åˆ°çš„é—®é¢˜ï¼Œé¡¹ç›®ä¸­éœ€è¦åšå¤šæ—¥æœŸå¯¹æ¯”ï¼Œæœ¬æ¥æƒ³ä½¿ç”¨ <code>DatePicker</code> ç»„ä»¶ï¼Œæ¯æ¬¡é€‰æ‹©ä¸€ä¸ªæ—¥æœŸï¼Œæ„Ÿè§‰è¿™æ ·å†™å¤ªè¿‡ç®€å•ï¼Œäºæ˜¯ï¼Œå°±æƒ³ç»“åˆ <code>Select</code> å’Œ <code>Calendar</code> ç»„ä»¶ä¸€èµ·ä½¿ç”¨ï¼Œæƒ³æ³•æ˜¯å¾ˆç¾å¥½çš„ï¼Œæ“ä½œèµ·æ¥å°±å›°éš¾é‡é‡äº†ï¼Œæˆ‘æƒ³è¦çš„æ•ˆæœå¦‚ä¸‹å›¾ï¼š</p>
</blockquote>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/184a51aad9e14fe28ac1b61f257c73a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5piO6K6w6LSm57C_X-W-ruS_oeWwj-eoi-W6jw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765852079&amp;x-signature=T%2F7CM9MtlHiqwRy5bOGi2OZdkr0%3D" width="40%" loading="lazy"/>
<p>é‡‡ç”¨çš„æ˜¯<code>Select</code> çš„ä¸­ <code>dropdownRender</code>è‡ªå®šä¹‰ä¸‹æ‹‰æ¡†å†…å®¹ï¼Œä½†æ˜¯è‡ªå®šä¹‰å†…å®¹ä¸­åŒ…å«<code>Select</code>çš„è¯å°±ä¼šå› å¤±å»ç„¦ç‚¹è€Œå…³é—­ï¼Œæ— æ³•é€‰æ‹©ï¼ŒæŸ¥äº†å¾ˆå¤šèµ„æ–™ï¼Œéƒ½è¯´å¦‚ä¸‹æ–¹æ³•å¯ä»¥è§£å†³ï¼Œè¯•äº†å¾ˆå¤šæ¬¡éƒ½æ— æ•ˆï¼Œäºæ˜¯å°±æ¢äº†ä¸€ç§å†™æ³•ï¼Œè‡ªå·±å†™ä¸€ä¸ªç±»ä¼¼<code>Select</code>çš„ç»„ä»¶ä¸å°±è¡Œäº†ï¼Œäºæ˜¯å°±é€‰æ‹©äº†<code>Dropdown</code>ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;<span class="hljs-title class_">Select</span>
  dropdownRender={<span class="hljs-function">() =&gt;</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">onMouseDown</span>=<span class="hljs-string">{(e)</span> =&gt;</span> {
        e.preventDefault();
        e.stopPropagation();
      }}
    &gt;
      Some Content
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )}
/&gt;
</code></pre>
<p>å¯¹äº <code>Calendar</code>ç»„ä»¶ï¼Œè¦ä½¿ç”¨<code>dateFullCellRender</code>ï¼Œé‡æ–°å•å…ƒæ ¼ï¼Œæ–¹ä¾¿æ·»åŠ é€‰ä¸­æ ·å¼ï¼Œåªéœ€è¦ç¨å¾®ä¿®æ”¹ä¸€ä¸‹æ ·å¼å°±å¯ä»¥äº†ã€‚</p>
<pre><code class="hljs language-css" lang="css">// CalendarPage<span class="hljs-selector-class">.css</span>
<span class="hljs-selector-class">.my_calendar</span> <span class="hljs-selector-class">.ant-fullcalendar-cell</span> <span class="hljs-selector-class">.ant-fullcalendar-selected-day</span> <span class="hljs-selector-class">.ant-fullcalendar-value</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span> <span class="hljs-meta">!important</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#1677ff</span> <span class="hljs-meta">!important</span>;
}

<span class="hljs-selector-class">.my_calendar</span> <span class="hljs-selector-class">.ant-fullcalendar-cell</span><span class="hljs-selector-class">.ant-fullcalendar-selected-day</span> <span class="hljs-selector-class">.ant-fullcalendar-value</span> {
  <span class="hljs-attribute">color</span>: unset;
  <span class="hljs-attribute">background</span>: unset;
}

<span class="hljs-selector-class">.my_calendar_menu</span> {
  <span class="hljs-attribute">max-height</span>: <span class="hljs-number">300px</span>;
  <span class="hljs-attribute">overflow</span>: auto;
}
</code></pre>
<p><code>Calendar</code>ç»„ä»¶äºŒæ¬¡å°è£…</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Calendar</span>, <span class="hljs-title class_">Card</span>, <span class="hljs-title class_">Row</span>, <span class="hljs-title class_">Col</span>, <span class="hljs-title class_">Menu</span>, <span class="hljs-title class_">Dropdown</span>, <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'antd'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">DownOutlined</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ant-design/icons'</span>
<span class="hljs-keyword">import</span> moment <span class="hljs-keyword">from</span> <span class="hljs-string">'moment'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./CalendarPage.css'</span>
<span class="hljs-keyword">const</span> dateFormat = <span class="hljs-string">'YYYY-MM-DD'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CalendarPage</span>(<span class="hljs-params">props</span>) {
  <span class="hljs-keyword">const</span> { values, handleSelect, ...resProps } = props
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Card</span>
      <span class="hljs-attr">bodyStyle</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> <span class="hljs-attr">0</span>, <span class="hljs-attr">width:</span> <span class="hljs-attr">300</span> }}
      <span class="hljs-attr">onMouseDown</span>=<span class="hljs-string">{e</span> =&gt;</span> {
        e.preventDefault()
      }}
      style={{ width: 300 }}
    &gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">Calendar</span>
        <span class="hljs-attr">headerRender</span>=<span class="hljs-string">{({</span> <span class="hljs-attr">value</span>, <span class="hljs-attr">type</span>, <span class="hljs-attr">onChange</span>, <span class="hljs-attr">onTypeChange</span> }) =&gt;</span> {
          const start = 0
          const end = 12
          const monthOptions = []
          const current = value.clone()
          const localeData = value.localeData()
          const months = []
          for (let i = 0; i &lt; 12; i++) {
            current.month(i)
            months.push(localeData.monthsShort(current))
          }
          for (let index = start; index &lt; end; index++) {
            monthOptions.push(
              <span class="hljs-tag">&lt;<span class="hljs-name">Menu.Item</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"month-item"</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{</span>`${<span class="hljs-attr">index</span>}`}&gt;</span>
                {months[index]}
              <span class="hljs-tag">&lt;/<span class="hljs-name">Menu.Item</span>&gt;</span>
            )
          }
          const month = value.month()
          const year = value.year()
          const options = []
          for (let i = year - 10; i &lt; year + 10; i += 1) {
            options.push(
              <span class="hljs-tag">&lt;<span class="hljs-name">Menu.Item</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{i}</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{i}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"year-item"</span>&gt;</span>
                {i}
              <span class="hljs-tag">&lt;/<span class="hljs-name">Menu.Item</span>&gt;</span>
            )
          }
          const menu = (
            <span class="hljs-tag">&lt;<span class="hljs-name">Menu</span>
              <span class="hljs-attr">size</span>=<span class="hljs-string">"small"</span>
              <span class="hljs-attr">onClick</span>=<span class="hljs-string">{newYear</span> =&gt;</span> {
                const now = value.clone().year(newYear.key)
                onChange(now)
              }}
              className="my_calendar_menu"
            &gt;
            	{options}
            <span class="hljs-tag">&lt;/<span class="hljs-name">Menu</span>&gt;</span>
          )
          const menu2 = (
            <span class="hljs-tag">&lt;<span class="hljs-name">Menu</span>
              <span class="hljs-attr">size</span>=<span class="hljs-string">"small"</span>
              <span class="hljs-attr">onClick</span>=<span class="hljs-string">{selectedMonth</span> =&gt;</span> {
                const newValue = value.clone()
                newValue.month(parseInt(selectedMonth.key, 10))
                onChange(newValue)
              }}
              className="my_calendar_menu"
            &gt;
            	{monthOptions}
            <span class="hljs-tag">&lt;/<span class="hljs-name">Menu</span>&gt;</span>
          )
          return (
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> <span class="hljs-attr">10</span> }}&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">Row</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"flex"</span> <span class="hljs-attr">justify</span>=<span class="hljs-string">"end"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Col</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-name">Dropdown</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"small"</span> <span class="hljs-attr">overlay</span>=<span class="hljs-string">{menu}</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>&gt;</span>
                      {String(year)}
                      <span class="hljs-tag">&lt;<span class="hljs-name">DownOutlined</span> /&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
                  <span class="hljs-tag">&lt;/<span class="hljs-name">Dropdown</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">Col</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Col</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-name">Dropdown</span> <span class="hljs-attr">size</span>=<span class="hljs-string">"small"</span> <span class="hljs-attr">overlay</span>=<span class="hljs-string">{menu2}</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">marginLeft:</span> <span class="hljs-attr">10</span> }}&gt;</span>
                      {months[month]}
                      <span class="hljs-tag">&lt;<span class="hljs-name">DownOutlined</span> /&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
                  <span class="hljs-tag">&lt;/<span class="hljs-name">Dropdown</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">Col</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-name">Row</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          )
        }}
        fullscreen={false}
        className="calendar"
        dateFullCellRender={date =&gt; {
          let de = moment(date).format(dateFormat)
          let cls = ''
          if (values &amp;&amp; values.indexOf(de) !== -1) {
            cls = 'ant-fullcalendar-selected-day'
          } else {
            cls = ''
          }
          return (
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
              <span class="hljs-attr">className</span>=<span class="hljs-string">{cls}</span>
              <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> {
                handleSelect &amp;&amp; handleSelect(moment(date).format(dateFormat))
              }}
            &gt;
              <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"ant-fullcalendar-value"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">textAlign:</span> '<span class="hljs-attr">center</span>' }}&gt;</span>
                {moment(date).date()}
              <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          )
        }}
        {...resProps}
      /&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">Card</span>&gt;</span></span>
  )
}
</code></pre>
<p>ä½¿ç”¨</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">CalendarPage</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./CalendarPage'</span>
&lt;<span class="hljs-title class_">Select</span>
  dropdownRender={<span class="hljs-function">() =&gt;</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">CalendarPage</span>
      	<span class="hljs-attr">handleSelect</span>=<span class="hljs-string">{e</span>=&gt;</span>{
      		// é€»è¾‘å¤„ç†ï¼ŒåŠ¨æ€è®¾ç½®values
      	}
      	values={['2023-06-01', '2023-06-25']}
      /&gt;</span>
  )}
/&gt;
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LongCat-Imageï¼šç¾å›¢çš„è½»é‡åŒ–å›¾åƒç”Ÿæˆä¸ç¼–è¾‘æ–°æ ‡æ†]]></title>    <link>https://juejin.cn/post/7581378364081569838</link>    <guid>https://juejin.cn/post/7581378364081569838</guid>    <pubDate>2025-12-09T00:01:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581378364081569838" data-draft-id="7581378364081553454" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LongCat-Imageï¼šç¾å›¢çš„è½»é‡åŒ–å›¾åƒç”Ÿæˆä¸ç¼–è¾‘æ–°æ ‡æ†"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-09T00:01:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å›´ç‚‰èŠç§‘æŠ€"/> <meta itemprop="url" content="https://juejin.cn/user/3229679898597516"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LongCat-Imageï¼šç¾å›¢çš„è½»é‡åŒ–å›¾åƒç”Ÿæˆä¸ç¼–è¾‘æ–°æ ‡æ†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3229679898597516/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å›´ç‚‰èŠç§‘æŠ€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T00:01:58.000Z" title="Tue Dec 09 2025 00:01:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‰ä¸¤å¤©æ‰ç›˜ç‚¹å›¾ç”Ÿå›¾çš„å¼€æºå¤§æ¨¡å‹ï¼Œ2025å¹´12æœˆ8æ—¥ï¼Œç¾å›¢å°±å‘å¸ƒäº†å…¶å¼€æºå›¾åƒç”Ÿæˆä¸ç¼–è¾‘æ¨¡å‹LongCat-Imageã€‚ä½œä¸ºä¸€æ¬¾ä»…60äº¿å‚æ•°çš„è½»é‡åŒ–æ¨¡å‹ï¼Œå®ƒåœ¨æ–‡ç”Ÿå›¾å’Œå›¾åƒç¼–è¾‘ä¸¤å¤§æ ¸å¿ƒèƒ½åŠ›ä¸Šå´è¾¾åˆ°äº†å¼€æºé¢†åŸŸçš„SOTAæ°´å¹³ï¼Œç”šè‡³é€¼è¿‘å¤´éƒ¨é—­æºæ¨¡å‹ã€‚<strong>LongCat-Imageæœ€å¤§çš„åˆ›æ–°åœ¨äºå®ç°äº†"ç”Ÿæˆä¸ç¼–è¾‘ä¸€ä½“åŒ–"ï¼Œé€šè¿‡ç»Ÿä¸€æ¶æ„å¤„ç†å¤šå…ƒä»»åŠ¡ï¼Œé¿å…äº†ä¼ ç»Ÿæ¨¡å‹åœ¨ç”Ÿæˆä¸ç¼–è¾‘åˆ‡æ¢ä¸­çš„èƒ½åŠ›æŸè€—</strong>ã€‚å¯¹äºæŠ€æœ¯ç¤¾åŒºè€Œè¨€ï¼Œè¿™ä¸ä»…æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„å›¾åƒç”Ÿæˆå·¥å…·ï¼Œæ›´æ˜¯ä¸€æ¬¡å¯¹ä¸­æ–‡å›¾åƒç”Ÿæˆç”Ÿæ€çš„é‡è¦çªç ´ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/928326d250504e6a9565a04c53811c06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu054KJ6IGK56eR5oqA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765843317&amp;x-signature=RWx5MCqLK2ugUiqA5aRzhsJNPj8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-0">ä¸€ã€æ¨¡å‹æ¦‚è¿°ï¼šè½»é‡åŒ–è®¾è®¡ä¸‹çš„èƒ½åŠ›è·ƒè¿</h3>
<p>LongCat-Imageæ˜¯ç¾å›¢LongCatå›¢é˜Ÿç ”å‘çš„å›¾åƒç”Ÿæˆä¸ç¼–è¾‘åŸºç¡€æ¨¡å‹ï¼Œå‚æ•°è§„æ¨¡ä¸º6Bï¼ˆ60äº¿ï¼‰ï¼Œå±äºè½»é‡åŒ–å¤§æ¨¡å‹ã€‚ä¸ä¹‹å‰åŠ¨è¾„ç™¾äº¿å‚æ•°çš„ä¸»æµæ¨¡å‹ç›¸æ¯”ï¼Œå®ƒé€šè¿‡åˆ›æ–°æ¶æ„è®¾è®¡å’Œç³»ç»Ÿæ€§è®­ç»ƒç­–ç•¥ï¼Œåœ¨ä¿æŒé«˜ç”Ÿæˆè´¨é‡çš„åŒæ—¶å¤§å¹…é™ä½äº†è®¡ç®—èµ„æºéœ€æ±‚ã€‚æ¨¡å‹å·²åœ¨GitHubå’ŒHugging Faceå¹³å°å¼€æºï¼Œéµå¾ªMITè®¸å¯åè®®ï¼Œè¿™æ„å‘³ç€å¼€å‘è€…å¯ä»¥è‡ªç”±åœ°ç”¨äºä¸ªäººç ”ç©¶æˆ–å•†ä¸šåº”ç”¨ï¼Œåªéœ€ä¿ç•™åŸå§‹ç‰ˆæƒå£°æ˜ã€‚</p>
<p>æŠ€æœ¯æ¶æ„ä¸Šï¼ŒLongCat-Imageé‡‡ç”¨æ–‡ç”Ÿå›¾ä¸å›¾åƒç¼–è¾‘åŒæºçš„æ··åˆéª¨å¹²æ¶æ„ï¼ˆMM-DiT+Single-DiTï¼‰ï¼Œå¹¶æ•´åˆäº†è§†è§‰è¯­è¨€æ¨¡å‹ï¼ˆVLMï¼‰æ¡ä»¶ç¼–ç å™¨  ã€‚è¿™ç§è®¾è®¡ä½¿æ¨¡å‹èƒ½å¤Ÿé€šè¿‡ä¸€å¥—æ¶æ„åŒæ—¶å¤„ç†æ–‡æœ¬ç”Ÿæˆå›¾åƒå’Œè‡ªç„¶è¯­è¨€æŒ‡ä»¤ç¼–è¾‘ä»»åŠ¡ï¼Œé¿å…äº†ä¼ ç»Ÿæ¨¡å‹åœ¨ç”Ÿæˆä¸ç¼–è¾‘åˆ‡æ¢ä¸­çš„èƒ½åŠ›æŸè€—ã€‚<strong>åœ¨è®­ç»ƒç­–ç•¥ä¸Šï¼Œå›¢é˜Ÿæ„å»ºäº†å…¨æµç¨‹è´¨æ§ä½“ç³»ï¼šé¢„è®­ç»ƒé˜¶æ®µè¿‡æ»¤AIGCæ•°æ®å¹¶å¼•å…¥åƒä¸‡é‡çº§åˆæˆæ–‡å­—æ•°æ®ï¼ŒSFTé˜¶æ®µé‡‡ç”¨äººå·¥ç²¾ç­›æ•°æ®å¯¹é½å¤§ä¼—å®¡ç¾ï¼ŒRLé˜¶æ®µåˆ›æ–°æ€§åœ°å¼•å…¥AIGCå†…å®¹æ£€æµ‹å™¨ä½œä¸ºå¥–åŠ±æ¨¡å‹ï¼Œå¼•å¯¼æ¨¡å‹å­¦ä¹ çœŸå®ä¸–ç•Œçš„ç‰©ç†çº¹ç†ä¸å…‰å½±è´¨æ„Ÿ</strong>  ã€‚</p>
<p>ä»åº”ç”¨åœºæ™¯æ¥çœ‹ï¼ŒLongCat-Imageå±•ç°å‡ºè·¨é¢†åŸŸæ½œåŠ›ï¼šç”µå•†é¢†åŸŸå¯å¿«é€Ÿç”Ÿæˆå•†å“å±•ç¤ºå›¾ä¸ä¿ƒé”€æµ·æŠ¥ï¼Œé¤é¥®åœºæ™¯èƒ½åˆ¶ä½œé£Ÿæå®£ä¼ ç´ æï¼Œä¼ ç»Ÿæ–‡åŒ–é¢†åŸŸå¯å®ç°å¤ç±æ’å›¾ä¸å¯¹è”çš„æ•°å­—åŒ–åˆ›ä½œï¼Œæ¸¸æˆè¡Œä¸šèƒ½è¾…åŠ©ç”Ÿæˆåœºæ™¯ä¸è§’è‰²åˆç¨¿  ã€‚ç¾å›¢é€šè¿‡å¼€æºé‡Šæ”¾æŠ€æœ¯èƒ½åŠ›ï¼Œæ—¢ä¸ºè‡ªèº«ä¸šåŠ¡çš„æ™ºèƒ½åŒ–å‡çº§å‚¨å¤‡å·¥å…·ï¼Œä¹Ÿä¸ºå…¨è¡Œä¸šæä¾›äº†ä¸­æ–‡åœºæ™¯ä¸‹çš„AIGCè§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-1">äºŒã€å›¾ç”Ÿå›¾åŠŸèƒ½æ·±åº¦è§£æï¼š15ç±»ç¼–è¾‘ä»»åŠ¡çš„ç²¾å‡†æŒæ§</h3>
<p>LongCat-Imageçš„å›¾ç”Ÿå›¾åŠŸèƒ½ï¼ˆå³å›¾åƒç¼–è¾‘ï¼‰æ˜¯å…¶æœ€å¤§äº®ç‚¹ä¹‹ä¸€ã€‚<strong>æ¨¡å‹æ”¯æŒç‰©ä½“å¢åˆ ã€é£æ ¼è¿ç§»ã€è§†è§’è½¬æ¢ã€æ–‡æœ¬ä¿®æ”¹ç­‰15ç±»ç»†åˆ†ç¼–è¾‘ä»»åŠ¡ï¼Œå¹¶åœ¨å¤šè½®ç¼–è¾‘ä¸­èƒ½ä¿æŒå›¾åƒé£æ ¼ã€å…‰ç…§ä¸åŸå›¾çš„é«˜åº¦ä¸€è‡´æ€§ï¼Œé¿å…äº†"æ‹¼æ¥æ„Ÿ"é—®é¢˜</strong>  ã€‚è¿™ä¸€èƒ½åŠ›æºäºå…¶ç‹¬ç‰¹çš„æŠ€æœ¯å®ç°æœºåˆ¶ã€‚</p>
<p>é¦–å…ˆï¼Œæ¨¡å‹é‡‡ç”¨"æ–‡ç”Ÿå›¾ Mid-trainingé˜¶æ®µåˆå§‹åŒ–+å¤šä»»åŠ¡è”åˆå­¦ä¹ "æœºåˆ¶ï¼Œæ—¢ç»§æ‰¿äº†ç”Ÿæˆæ¨¡å‹çš„ç¾æ„ŸåŸºç¡€ï¼Œåˆä¿éšœäº†ç¼–è¾‘æŒ‡ä»¤çš„å¤šæ ·æ€§å“åº”èƒ½åŠ›  ã€‚é€šè¿‡åœ¨ä¸­æœŸè®­ç»ƒé˜¶æ®µå†»ç»“éƒ¨åˆ†å‚æ•°å¹¶å¼•å…¥ç¼–è¾‘ä»»åŠ¡æ•°æ®ï¼Œæ¨¡å‹èƒ½å¤Ÿæ›´å¥½åœ°ç†è§£å¤æ‚å¤šæ ·çš„æŒ‡ä»¤ï¼ŒåŒæ—¶ä¿æŒç”Ÿæˆè´¨é‡ã€‚</p>
<p>å…¶æ¬¡ï¼Œé’ˆå¯¹ä¸­æ–‡æ–‡æœ¬æ¸²æŸ“è¿™ä¸€è¡Œä¸šç—›ç‚¹ï¼ŒLongCat-Imageé€šè¿‡è¯¾ç¨‹å­¦ä¹ ç­–ç•¥æå‡å­—ç¬¦è¦†ç›–åº¦å’Œæ¸²æŸ“ç²¾å‡†åº¦ã€‚<strong>é¢„è®­ç»ƒé˜¶æ®µåŸºäºåƒä¸‡é‡çº§åˆæˆæ•°æ®å­¦ä¹ å­—å½¢ï¼Œè¦†ç›–é€šç”¨è§„èŒƒæ±‰å­—è¡¨çš„8105ä¸ªæ±‰å­—ï¼›SFTé˜¶æ®µå¼•å…¥çœŸå®ä¸–ç•Œæ–‡æœ¬å›¾åƒæ•°æ®ï¼Œæå‡åœ¨å­—ä½“ã€æ’ç‰ˆå¸ƒå±€ä¸Šçš„æ³›åŒ–èƒ½åŠ›ï¼›RLé˜¶æ®µèå…¥OCRä¸ç¾å­¦åŒå¥–åŠ±æ¨¡å‹ï¼Œè¿›ä¸€æ­¥æå‡æ–‡æœ¬å‡†ç¡®æ€§ä¸èƒŒæ™¯èåˆè‡ªç„¶åº¦</strong>  ã€‚æ­¤å¤–ï¼Œæ¨¡å‹å¯¹promptä¸­æŒ‡å®šæ¸²æŸ“çš„æ–‡æœ¬é‡‡ç”¨å­—ç¬¦çº§ç¼–ç ï¼Œå¤§å¹…é™ä½æ¨¡å‹è®°å¿†è´Ÿæ‹…ï¼Œå®ç°æ–‡å­—ç”Ÿæˆå­¦ä¹ æ•ˆç‡çš„è·¨è¶Šå¼æå‡ã€‚</p>
<p>åœ¨æ€§èƒ½æ–¹é¢ï¼ŒLongCat-Imageåœ¨GEdit-Benchä¸­è‹±æ–‡è¯„æµ‹ä¸­è·7.60/7.64åˆ†ï¼ŒImgEdit-Benchè¯„æµ‹ä¸­è·4.50åˆ†ï¼Œå‡è¾¾åˆ°å¼€æºSOTAæ°´å¹³ï¼Œä¸”é€¼è¿‘å¤´éƒ¨é—­æºæ¨¡å‹  ã€‚åœ¨å¤šè½®ç¼–è¾‘è´¨é‡è¯„ä¼°ä¸­ï¼Œå°½ç®¡ä¸Nano Bananaã€Seedream 4.0ç­‰å•†ä¸šæ¨¡å‹å­˜åœ¨ä¸€å®šå·®è·ï¼Œä½†æ˜¾è‘—è¶…è¶Šäº†å…¶ä»–å¼€æºæ–¹æ¡ˆ  ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c16568692bad42fc9d74ae12c48bc141~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu054KJ6IGK56eR5oqA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765843317&amp;x-signature=4it%2Fg5fqlN1GNr%2BzyWGIbwydwT8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-2">ä¸‰ã€ä¸ä¹‹å‰å›¾ç”Ÿå›¾æ¨¡å‹çš„å¯¹æ¯”ï¼šä¸­æ–‡æ¸²æŸ“ä¸ç¼–è¾‘ä¸€è‡´æ€§çš„çªç ´</h3>
<p>ä¸ä¹‹å‰çš„å›¾ç”Ÿå›¾æ¨¡å‹ç›¸æ¯”ï¼ŒLongCat-Imageåœ¨ç»¼åˆç¼–è¾‘è´¨é‡ã€è§†è§‰ä¸€è‡´æ€§è¿™ä¸¤ä¸ªç”¨æˆ·ä½“éªŒçš„ç»´åº¦æ˜¾è‘—è¶…è¶Šäº†å…¶ä»–å¼€æºæ–¹æ¡ˆï¼Œè™½ç„¶ä¸ Nano Bananaã€Seedream 4.0 ç­‰å•†ä¸šæ¨¡å‹å­˜åœ¨ä¸€å®šå·®è·ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2eb4af56bfd8444e9148dd85023b4a55~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu054KJ6IGK56eR5oqA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765843317&amp;x-signature=JeXvVo3MZ9Z%2BLatLYGaG1jbsrlw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-3">å››ã€åº”ç”¨åœºæ™¯ï¼šä»ç”µå•†åˆ°ä¼ ç»Ÿæ–‡åŒ–çš„å…¨é¢†åŸŸè¦†ç›–</h3>
<p>LongCat-Imageçš„åº”ç”¨åœºæ™¯å¹¿æ³›ï¼Œå°¤å…¶åœ¨ä¸­æ–‡ç¯å¢ƒä¸‹è¡¨ç°å‡ºè‰²ã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªä¸»è¦é¢†åŸŸçš„åº”ç”¨æ¡ˆä¾‹ï¼š</p>
<p><strong>ç”µå•†é¢†åŸŸ</strong>ï¼šæ¨¡å‹å¯å¿«é€Ÿç”Ÿæˆå•†å“å±•ç¤ºå›¾ä¸ä¿ƒé”€æµ·æŠ¥ï¼Œæ”¯æŒå•†å®¶é€šè¿‡ç®€å•æç¤ºè¯å³å¯è°ƒæ•´å•†å“å¸ƒå±€ã€æ–‡å­—ä¿¡æ¯ç­‰ã€‚ä¾‹å¦‚ï¼Œè¾“å…¥"ä¸€å¼ ä»¥è“è‰²ä¸ºä¸»è‰²è°ƒçš„ä¿ƒé”€æµ·æŠ¥ï¼Œå®£ä¼ çš„æ˜¯å® çˆ±å­£æ´»åŠ¨ï¼Œå³ä¸Šè§’å“ç‰Œä¸º 'MAOMAO'ã€‚ç”»é¢ä¸­å¤®ï¼Œç‰¹å†™ä¸€åªéå¸¸å¯çˆ±çš„å¤§çœ¼ç›æ©˜çŒ«ä»å…‹è±å› è“è‰²çš„æ’•å¼€çš„çº¸ä¸­æ¢å‡º..."ç­‰å¤æ‚æŒ‡ä»¤ï¼Œæ¨¡å‹èƒ½å¤Ÿç²¾å‡†ç”Ÿæˆç¬¦åˆç”µå•†éœ€æ±‚çš„é«˜è´¨é‡å›¾åƒ  ã€‚ç›®å‰ï¼ŒLongCat APPå·²æä¾›24ä¸ªé›¶é—¨æ§›ç©æ³•æ¨¡æ¿ï¼Œè®©æ™®é€šç”¨æˆ·ä¹Ÿèƒ½ä¸€é”®ç”Ÿæˆä¸“ä¸šæµ·æŠ¥ï¼Œå®ç°"ä¸“ä¸šAIåˆ›ä½œé›¶é—¨æ§›"ã€‚</p>
<p><strong>é¤é¥®é¢†åŸŸ</strong>ï¼šæ¨¡å‹èƒ½å¤Ÿç”Ÿæˆé£Ÿæå®£ä¼ ç´ æï¼Œå¦‚"æµ·æŠ¥ä»¥æµ…ç±³è‰²ä¸ºèƒŒæ™¯ï¼Œä¸­å¤®å±•ç¤ºå‡ é¢—è”æï¼Œå…¶ä¸­ä¸€é¢—å‰¥å¼€ï¼Œéœ²å‡ºæ´ç™½å¤šæ±çš„æœè‚‰..."ç­‰åœºæ™¯ï¼Œè‡ªåŠ¨é€‚é…æ–‡å­—æ’ç‰ˆä¸é£Ÿæåœºæ™¯èåˆï¼Œæå‡é¤é¥®è¥é”€ç´ æçš„ç”Ÿäº§æ•ˆç‡  ã€‚</p>
<p><strong>ä¼ ç»Ÿæ–‡åŒ–é¢†åŸŸ</strong>ï¼šæ¨¡å‹ç‰¹åˆ«é€‚åˆå¤è¯—è¯æ’å›¾ã€å¯¹è”ã€é—¨åº—æ‹›ç‰Œã€æ–‡å­—Logoç­‰è®¾è®¡åœºæ™¯ã€‚<strong>å…¶èƒ½å¤Ÿå¤„ç†ç”Ÿåƒ»å­—å’Œä¹¦æ³•å­—ä½“æ¸²æŸ“ï¼Œè‡ªåŠ¨æ ¹æ®å¤é£æ–‡æ¡ˆé€‚é…ä¹¦æ³•å­—ä½“ï¼Œå®ç°æ–‡å­—ä¸åœºæ™¯çš„è‡ªç„¶èåˆ</strong>  ã€‚ä¾‹å¦‚ï¼Œè¾“å…¥"ä¸€åº§å¤è‰²å¤é¦™çš„ä¼ ç»Ÿä¸­å¼é—¨æ¥¼ï¼Œå¹³æ‘„è§†è§’ï¼Œä¸Šæ–¹æ‚¬æŒ‚ç€ä¸€å—å†™æœ‰..."ç­‰æŒ‡ä»¤ï¼Œæ¨¡å‹èƒ½å¤Ÿç”Ÿæˆç¬¦åˆä¼ ç»Ÿæ–‡åŒ–å®¡ç¾çš„å›¾åƒã€‚</p>
<p>ä¸‹å›¾æ˜¯ä½¿ç”¨LongCat APPå¯¹å›¾ç‰‡å¤„ç†çš„æ•ˆæœå›¾ï¼Œæ€»ä½“ä¸Šæ•ˆæœè¿˜æ˜¯å¾ˆä¸é”™çš„ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5732ec6af741434bb67ca46982c1334b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu054KJ6IGK56eR5oqA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765843317&amp;x-signature=VpSw%2BPI%2BNuGN4ijlg%2B0zH0g7aI8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>æ¸¸æˆé¢†åŸŸ</strong>ï¼šæ¨¡å‹å¯è¾…åŠ©ç”Ÿæˆæ¸¸æˆåœºæ™¯ä¸è§’è‰²åˆç¨¿ï¼Œæ”¯æŒé€šè¿‡è‡ªç„¶è¯­è¨€æŒ‡ä»¤è¿›è¡Œå¤šè½®ç¼–è¾‘ï¼Œå¦‚è°ƒæ•´è§’è‰²æœè£…ã€æ”¹å˜åœºæ™¯é£æ ¼ç­‰ï¼Œä¸ºæ¸¸æˆå¼€å‘è€…æä¾›é«˜æ•ˆçš„åˆ›ä½œå·¥å…·ã€‚</p>
<h3 data-id="heading-4">äº”ã€å¼€æºæ„ä¹‰ä¸æŠ€æœ¯è´¡çŒ®ï¼šä¸­æ–‡AIGCç”Ÿæ€çš„æ–°æœºé‡</h3>
<p>ç¾å›¢é€‰æ‹©å°†LongCat-Imageå¼€æºå¹¶é‡‡ç”¨MITè®¸å¯åè®®ï¼Œå…·æœ‰é‡è¦çš„è¡Œä¸šæ„ä¹‰ã€‚<strong>MITåè®®å…è®¸å¼€å‘è€…è‡ªç”±ç”¨äºä¸ªäººç ”ç©¶æˆ–å•†ä¸šåº”ç”¨ï¼Œåªéœ€ä¿ç•™åŸå§‹ç‰ˆæƒå£°æ˜ï¼Œè¿™å¤§å¤§é™ä½äº†ä¼ä¸šåº”ç”¨çš„æ³•å¾‹é—¨æ§›</strong>  ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒStable Diffusioné‡‡ç”¨Apache 2.0åè®®ï¼Œè™½ç„¶ä¹Ÿå…è®¸å•†ä¸šä½¿ç”¨ï¼Œä½†éœ€è¦æ›´å¤æ‚çš„åˆè§„æµç¨‹ã€‚</p>
<p>LongCat-Imageçš„æŠ€æœ¯è´¡çŒ®ä¸»è¦ä½“ç°åœ¨ä¸‰ä¸ªæ–¹é¢ï¼š</p>
<p>é¦–å…ˆï¼Œæ¨¡å‹è¯æ˜äº†é€šè¿‡æ¶æ„åˆ›æ–°ä¸æ•°æ®ä¼˜åŒ–ï¼Œè½»é‡åŒ–æ¨¡å‹åŒæ ·èƒ½æ‰¿è½½å¤æ‚åœºæ™¯éœ€æ±‚ï¼Œé™ä½äº†AIGCæŠ€æœ¯çš„è½åœ°æˆæœ¬  ã€‚è¿™ä¸ºä¸­å°ä¼ä¸šå’Œå¼€å‘è€…æä¾›äº†æ›´ç»æµé«˜æ•ˆçš„é€‰æ‹©ã€‚</p>
<p>å…¶æ¬¡ï¼Œæ¨¡å‹å¡«è¡¥äº†ä¸­æ–‡å›¾åƒç”Ÿæˆä¸ç¼–è¾‘é¢†åŸŸçš„ä¼˜è´¨å¼€æºèµ„æºç©ºç™½ï¼Œç‰¹åˆ«æ˜¯å…¶åœ¨ä¸­æ–‡æ–‡æœ¬æ¸²æŸ“æ–¹é¢çš„ä¼˜åŠ¿ï¼Œä¸ºä¼ ç»Ÿæ–‡åŒ–æ•°å­—åŒ–ã€å•†ä¸šå¹¿å‘Šåˆ›ä½œç­‰åœºæ™¯æä¾›äº†æŠ€æœ¯æ”¯æ’‘  ã€‚</p>
<p>ç¬¬ä¸‰ï¼Œæ¨¡å‹é‡‡ç”¨çš„æ··åˆéª¨å¹²æ¶æ„å’Œæ¸è¿›å¼è®­ç»ƒç­–ç•¥ï¼Œä¸ºå›¾åƒç”Ÿæˆä¸ç¼–è¾‘ä¸€ä½“åŒ–æä¾›äº†æ–°çš„æŠ€æœ¯è·¯å¾„ï¼Œå¯èƒ½å¯å‘æœªæ¥æ›´å¤šåˆ›æ–°æ¨¡å‹çš„è¯ç”Ÿã€‚</p>
<h3 data-id="heading-5">å…­ã€æ€»ç»“ï¼šè½»é‡åŒ–æ¨¡å‹çš„ç”Ÿæ€ä»·å€¼</h3>
<p>LongCat-Imageçš„å‘å¸ƒæ ‡å¿—ç€ç¾å›¢åœ¨AIGCé¢†åŸŸå®Œæˆå…³é”®æŠ€æœ¯å¸ƒå±€ï¼Œå…¶6Bå‚æ•°çš„è½»é‡åŒ–è®¾è®¡ã€ä¸­æ–‡åœºæ™¯çš„æ·±åº¦é€‚é…ä¸å¼€æºç­–ç•¥çš„ç»„åˆï¼Œä¸ºè¡Œä¸šæä¾›äº†æ–°çš„å‘å±•èŒƒå¼  ã€‚<strong>ç›¸è¾ƒäºåŠ¨è¾„ç™¾äº¿å‚æ•°çš„é‡å‹æ¨¡å‹ï¼Œå®ƒè¯æ˜äº†é€šè¿‡æ¶æ„åˆ›æ–°ä¸æ•°æ®ä¼˜åŒ–ï¼Œè½»é‡åŒ–æ¨¡å‹åŒæ ·èƒ½æ‰¿è½½å¤æ‚åœºæ™¯éœ€æ±‚ï¼Œé™ä½äº†AIGCæŠ€æœ¯çš„è½åœ°æˆæœ¬</strong>  ã€‚</p>
<p>å¯¹äºå¼€å‘è€…ç¤¾åŒºè€Œè¨€ï¼ŒLongCat-Imageçš„å¼€æºå¡«è¡¥äº†ä¸­æ–‡å›¾åƒç”Ÿæˆä¸ç¼–è¾‘é¢†åŸŸçš„ä¼˜è´¨å¼€æºèµ„æºç©ºç™½ï¼Œæœ‰æœ›å¸å¼•æ›´å¤šå¼€å‘è€…å‚ä¸å…±å»ºï¼Œæ¨åŠ¨ä¸­æ–‡AIGCæŠ€æœ¯çš„æ ‡å‡†åŒ–ä¸äº§ä¸šåŒ–  ã€‚è€Œå¯¹äºæ™®é€šç”¨æˆ·ä¸ä¼ä¸šæ¥è¯´ï¼Œ"ç®€å•æç¤ºè¯å³å¯é«˜æ•ˆå‡ºå›¾"çš„ç‰¹æ€§ï¼Œè®©AIåˆ›ä½œä»ä¸“ä¸šå·¥å…·è½¬å˜ä¸ºäººäººå¯ç”¨çš„ç”Ÿäº§åŠ›åŠ©æ‰‹ï¼Œä¸ºå†…å®¹åˆ›ä½œè¡Œä¸šå¸¦æ¥æ•ˆç‡é©å‘½  ã€‚</p>
<p>éšç€LongCatç³»åˆ—æ¨¡å‹çš„ä¸æ–­è¿­ä»£ä¸å¼€æºï¼Œç¾å›¢æ­£åœ¨æ„å»ºä¸€ä¸ªå®Œæ•´çš„å¤§æ¨¡å‹æŠ€æœ¯ç”Ÿæ€ï¼Œä»æ–‡æœ¬åˆ°å›¾åƒå†åˆ°è§†é¢‘ï¼Œè¦†ç›–å¤šæ¨¡æ€ç”Ÿæˆä¸ç¼–è¾‘èƒ½åŠ›ã€‚è¿™å¯¹äºä¸­å›½AIæŠ€æœ¯çš„å‘å±•å…·æœ‰é‡è¦æ„ä¹‰ï¼Œä¹Ÿä¸ºå„è¡Œä¸šæ•°å­—åŒ–è½¬å‹æä¾›äº†æ–°çš„æŠ€æœ¯è·¯å¾„ã€‚</p>
<p><strong>èµ„æºé“¾æ¥ï¼š</strong></p>
<p><strong>Hugging Face:</strong></p>
<p><em><a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2Fmeituan-longcat%2FLongCat-Image" target="_blank" title="https://huggingface.co/meituan-longcat/LongCat-Image" ref="nofollow noopener noreferrer">huggingface.co/meituan-lonâ€¦</a></em></p>
<p><strong>GitHub:</strong></p>
<p><em><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmeituan-longcat%2FLongCat-Image" target="_blank" title="https://github.com/meituan-longcat/LongCat-Image" ref="nofollow noopener noreferrer">github.com/meituan-lonâ€¦</a></em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[openlayeré€‰æ‹©ç§»åŠ¨å›¾æ ‡]]></title>    <link>https://juejin.cn/post/7581412054902390793</link>    <guid>https://juejin.cn/post/7581412054902390793</guid>    <pubDate>2025-12-09T02:35:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581412054902390793" data-draft-id="7581412054901915657" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="openlayeré€‰æ‹©ç§»åŠ¨å›¾æ ‡"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-09T02:35:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯çµæ´¾æ´¾"/> <meta itemprop="url" content="https://juejin.cn/user/3069492197857832"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            openlayeré€‰æ‹©ç§»åŠ¨å›¾æ ‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3069492197857832/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯çµæ´¾æ´¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T02:35:21.000Z" title="Tue Dec 09 2025 02:35:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æˆ‘ä»¬é€šå¸¸ä½¿ç”¨OpenLayersçš„å†…ç½®äº¤äº’ï¼Œä½†æœ‰æ—¶éœ€è¦æ‰©å±•åŠŸèƒ½ã€‚ol-extæ˜¯ä¸€ä¸ªOpenLayersçš„æ‰©å±•åº“ï¼Œå…¶ä¸­åŒ…å«äº†ä¸€äº›é¢å¤–çš„äº¤äº’å’Œæ§ä»¶ã€‚<code>ol-ext</code>Â åº“ä¸­çš„ Transform äº¤äº’ç»„ä»¶ï¼Œç”¨äºåœ¨åœ°å›¾ä¸Šå¯¹è¦ç´ è¿›è¡Œäº¤äº’å¼å˜æ¢ï¼ˆæ—‹è½¬ã€ç¼©æ”¾ã€å¹³ç§»ï¼‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ea4d3bd0eaf46139293e6079cc2a757~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv54G15rS-5rS-:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765852521&amp;x-signature=8nItaQWFHnpTwpgodJHFIpnIMew%3D" alt="åŠ¨ç”»2.gif" loading="lazy"/></p>
<ol>
<li>é¦–å…ˆï¼Œç¡®ä¿å·²ç»å®‰è£…äº†ol-extã€‚å¦‚æœæ²¡æœ‰ï¼Œå¯ä»¥é€šè¿‡npmå®‰è£…</li>
</ol>
<pre><code class="hljs language-js" lang="js">npm install ol-ext
</code></pre>
<ol start="2">
<li>å¯¼å…¥ExtTransformã€‚</li>
<li>åˆ›å»ºä¸€ä¸ªExtTransformäº¤äº’å¯¹è±¡ï¼Œå¹¶å¯ä»¥é…ç½®ä¸€äº›é€‰é¡¹ã€‚</li>
<li>å°†è¯¥äº¤äº’æ·»åŠ åˆ°åœ°å›¾ä¸­ã€‚</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">ExtTransform</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'ol-ext/interaction/Transform'</span>

 <span class="hljs-variable language_">this</span>.<span class="hljs-property">transform</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExtTransform</span>({
     <span class="hljs-comment">// äº¤äº’æ¨¡å¼</span>
      <span class="hljs-attr">enableRotatedTransform</span>: <span class="hljs-literal">true</span>,    <span class="hljs-comment">// å¯ç”¨æ—‹è½¬åçš„å˜æ¢</span>
      <span class="hljs-attr">translate</span>: <span class="hljs-literal">true</span>,                 <span class="hljs-comment">// å¯ç”¨å¹³ç§»æ‰‹æŸ„</span>
      <span class="hljs-attr">stretch</span>: <span class="hljs-literal">true</span>,                   <span class="hljs-comment">// å¯ç”¨æ‹‰ä¼¸ï¼ˆè§’æ‰‹æŸ„ï¼‰</span>
      <span class="hljs-attr">scale</span>: <span class="hljs-literal">true</span>,                     <span class="hljs-comment">// å¯ç”¨ç¼©æ”¾ï¼ˆè¾¹æ‰‹æŸ„ï¼‰</span>
      <span class="hljs-attr">rotate</span>: <span class="hljs-literal">true</span>,                    <span class="hljs-comment">// å¯ç”¨æ—‹è½¬æ‰‹æŸ„</span>
  
      <span class="hljs-comment">// è¡Œä¸ºæ§åˆ¶</span>
      <span class="hljs-attr">keepAspectRatio</span>: <span class="hljs-literal">false</span>,          <span class="hljs-comment">// æ‹‰ä¼¸æ—¶ä¿æŒå®½é«˜æ¯”ï¼ˆæŒ‰ä½Shifté”®ï¼‰</span>
      <span class="hljs-attr">translateFeature</span>: <span class="hljs-literal">false</span>,         <span class="hljs-comment">// ç‚¹å‡»è¦ç´ å†…éƒ¨æ—¶æ˜¯å¦å¹³ç§»</span>
      <span class="hljs-attr">translateAnchor</span>: <span class="hljs-literal">false</span>,          <span class="hljs-comment">// æ˜¯å¦å¹³ç§»é”šç‚¹</span>
      <span class="hljs-attr">noFlip</span>: <span class="hljs-literal">false</span>,                   <span class="hljs-comment">// ç¦æ­¢å‡ ä½•å›¾å½¢ç¿»è½¬</span>
  
      <span class="hljs-comment">// æ ·å¼</span>
      <span class="hljs-attr">style</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Style</span>({              <span class="hljs-comment">// æ§åˆ¶ç‚¹çš„æ ·å¼</span>
        <span class="hljs-attr">image</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Circle</span>({
          <span class="hljs-attr">radius</span>: <span class="hljs-number">6</span>,
          <span class="hljs-attr">fill</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Fill</span>({
            <span class="hljs-attr">color</span>: <span class="hljs-string">'#ff0000'</span>
          }),
          <span class="hljs-attr">stroke</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stroke</span>({
            <span class="hljs-attr">color</span>: <span class="hljs-string">'#ffffff'</span>,
            <span class="hljs-attr">width</span>: <span class="hljs-number">2</span>
          })
        })
      }),
  
      <span class="hljs-comment">// è¿‡æ»¤å™¨</span>
      <span class="hljs-attr">filter</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">feature, layer</span>) {
        <span class="hljs-comment">// è¿”å› true è¡¨ç¤ºè¯¥è¦ç´ å¯å˜æ¢</span>
        <span class="hljs-keyword">return</span> feature.<span class="hljs-title function_">get</span>(<span class="hljs-string">'transformable'</span>) === <span class="hljs-literal">true</span>
      }
   })
   <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">addInteraction</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">transform</span>)

   <span class="hljs-variable language_">this</span>.<span class="hljs-property">transform</span>.<span class="hljs-title function_">setActive</span>(<span class="hljs-literal">false</span>)

  <span class="hljs-comment">//ç§»åŠ¨ç»“æŸ</span>
   <span class="hljs-variable language_">this</span>.<span class="hljs-property">transform</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'translateend'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>)=&gt;</span>{
     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">coordinate_</span>);
    
     <span class="hljs-comment">// è·å–å˜æ¢åçš„å‡ ä½•å›¾å½¢</span>
      <span class="hljs-keyword">const</span> geometry = e.<span class="hljs-property">feature</span>.<span class="hljs-title function_">getGeometry</span>()
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å˜æ¢åçš„åæ ‡'</span>, geometry.<span class="hljs-title function_">getCoordinates</span>())
  });
  
 
    <span class="hljs-comment">// åˆ é™¤å˜æ¢æ§åˆ¶ç‚¹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">transform</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'stop'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å˜æ¢äº¤äº’åœæ­¢'</span>)
    })
  
</code></pre>
<p>ExtTransformäº¤äº’æä¾›äº†å¤šç§äº‹ä»¶ï¼Œæ¯”å¦‚æ­£åœ¨å˜æ¢ï¼ˆ'transforming'ï¼‰
å˜æ¢è¿‡ç¨‹ä¸­(transform)ã€å˜æ¢ç»“æŸï¼ˆ'transformend'ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶æ¥æ‰§è¡Œä¸€äº›æ“ä½œï¼ˆæ¯”å¦‚æ›´æ–°è¦ç´ çš„å±æ€§æˆ–ä¿å­˜çŠ¶æ€ï¼‰ã€‚</p>
<p>ExtTransformå¯ä»¥åŠ¨æ€æ§åˆ¶å˜æ¢</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å¯ç”¨/ç¦ç”¨ç‰¹å®šå˜æ¢ç±»å‹</span>
<span class="hljs-keyword">this</span>.transform.setTranslate(<span class="hljs-literal">true</span>)
<span class="hljs-keyword">this</span>.transform.setScale(<span class="hljs-literal">false</span>)
<span class="hljs-keyword">this</span>.transform.setRotate(<span class="hljs-literal">true</span>)
<span class="hljs-keyword">this</span>.transform.setStretch(<span class="hljs-literal">false</span>)

<span class="hljs-comment">// è®¾ç½®è¦å˜æ¢çš„è¦ç´ </span>
<span class="hljs-keyword">const</span> features = <span class="hljs-keyword">this</span>.vectorSource.getFeatures()
<span class="hljs-keyword">this</span>.transform.setFeatures(features) <span class="hljs-comment">// æ‰€æœ‰è¦ç´ </span>
<span class="hljs-comment">// æˆ–</span>
<span class="hljs-keyword">this</span>.transform.setFeatures([feature1, feature2]) <span class="hljs-comment">// ç‰¹å®šè¦ç´ </span>

<span class="hljs-comment">// æ¸…ç©ºå½“å‰å˜æ¢çš„è¦ç´ </span>
<span class="hljs-keyword">this</span>.transform.clear()

<span class="hljs-comment">// æ¿€æ´»/åœç”¨äº¤äº’</span>
<span class="hljs-keyword">this</span>.transform.setActive(<span class="hljs-literal">true</span>)  <span class="hljs-comment">// æ¿€æ´»</span>
<span class="hljs-keyword">this</span>.transform.setActive(<span class="hljs-literal">false</span>) <span class="hljs-comment">// åœç”¨</span>

<span class="hljs-comment">// è®¾ç½®é”šç‚¹ä½ç½®ï¼ˆé»˜è®¤åœ¨è¦ç´ ä¸­å¿ƒï¼‰</span>
<span class="hljs-keyword">this</span>.transform.setAnchor([x, y])
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AndroidéŸ³è§†é¢‘å¼€å‘ï¼šåŸºäº Camera2 API å®ç°RTMPæ¨æµã€RTSPæœåŠ¡ä¸å½•åƒä¸€ä½“åŒ–æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7581378364082241582</link>    <guid>https://juejin.cn/post/7581378364082241582</guid>    <pubDate>2025-12-09T01:46:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581378364082241582" data-draft-id="7581363652781555722" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AndroidéŸ³è§†é¢‘å¼€å‘ï¼šåŸºäº Camera2 API å®ç°RTMPæ¨æµã€RTSPæœåŠ¡ä¸å½•åƒä¸€ä½“åŒ–æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="æœºå™¨å­¦ä¹ ,æ·±åº¦å­¦ä¹ ,è®¡ç®—æœºè§†è§‰"/> <meta itemprop="datePublished" content="2025-12-09T01:46:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éŸ³è§†é¢‘ç‰›å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/2867982505609000"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AndroidéŸ³è§†é¢‘å¼€å‘ï¼šåŸºäº Camera2 API å®ç°RTMPæ¨æµã€RTSPæœåŠ¡ä¸å½•åƒä¸€ä½“åŒ–æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2867982505609000/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éŸ³è§†é¢‘ç‰›å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T01:46:03.000Z" title="Tue Dec 09 2025 01:46:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç§»åŠ¨ç«¯éŸ³è§†é¢‘é¢†åŸŸï¼Œå•çº¯çš„ RTMP æ¨æµå·²ä¸å†æ˜¯æŠ€æœ¯å¤©èŠ±æ¿ã€‚çœŸæ­£çš„æŒ‘æˆ˜åœ¨äºï¼š<strong>å¦‚ä½•åœ¨èµ„æºå—é™çš„ Android è®¾å¤‡ä¸Šï¼Œæ„å»ºä¸€ä¸ªæ—¢èƒ½â€œå¯¹å¤–â€è¿›è¡Œ RTMP ç›´æ’­ã€åˆèƒ½â€œå¯¹å†…â€æä¾›ä½å»¶è¿Ÿ RTSP åˆ†å‘ï¼ŒåŒæ—¶è¿˜èƒ½å®Œæˆâ€œæœ¬åœ°â€é«˜ä¿çœŸå½•åƒçš„ã€å…¨åŠŸèƒ½åª’ä½“èŠ‚ç‚¹ã€ï¼Ÿ</strong></p>
<p>é¢å¯¹è¿™ä¸€éœ€æ±‚ï¼Œä¼ ç»Ÿçš„ä¸²è¡Œå¤„ç†æ¨¡å¼å¾€å¾€ä¼šå¯¼è‡´ CPU è´Ÿè½½è¿‡é«˜ã€ç”»é¢å¡é¡¿ç”šè‡³ OOMã€‚æœ¬æ–‡å°†æ·±å…¥æºç ï¼Œç»“åˆ <code>MainActivity.java</code> åŠæ ¸å¿ƒè¾…åŠ©ç±»ï¼Œå‰–æå¦‚ä½•åˆ©ç”¨ <strong>Android Camera2 API</strong> çš„é«˜æ•ˆé‡‡é›†èƒ½åŠ›ï¼Œé…åˆ <strong>å¤§ç‰›ç›´æ’­SDK (SmartPublisher)</strong> çš„å¤šè·¯åˆ†å‘æ¶æ„ï¼Œæ‰“é€ ä¸€å¥—é›†<strong>é‡‡é›†ã€ç¼–ç ã€æ¨æµã€æœåŠ¡ã€å­˜å‚¨</strong>äºä¸€ä½“çš„é«˜å¯é ã€ä½å»¶è¿ŸéŸ³è§†é¢‘è§£å†³æ–¹æ¡ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a9410c603b04030a4efcf4aa01a826f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z-z6KeG6aKR54mb5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765849562&amp;x-signature=z24NaTrsfd8i566sAvJ4L5Y0gWA%3D" alt="" loading="lazy"/><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/>â€‹ç¼–è¾‘</p>
<h2 data-id="heading-0">1. æ•´ä½“æ¶æ„è®¾è®¡</h2>
<p>åœ¨æä¾›çš„æºç ä¸­ï¼Œ<code>MainActivity</code> å……å½“äº†æ§åˆ¶ä¸­å¿ƒçš„è§’è‰²ï¼Œè€Œæ ¸å¿ƒçš„éŸ³è§†é¢‘å¤„ç†é€»è¾‘è¢«å°è£…åœ¨ <code>LibPublisherWrapper</code> å’Œ <code>SmartPublisherJniV2</code> ä¸­ã€‚æ•´ä½“æ•°æ®æµå‘å¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p><strong>æ•°æ®é‡‡é›†</strong>ï¼š<code>Camera2Helper</code> è´Ÿè´£è°ƒç”¨ Camera2 APIï¼Œé€šè¿‡ <code>ImageReader</code> è·å– <code>YUV_420_888</code> æ ¼å¼çš„è§†é¢‘å¸§ã€‚</p>
</li>
<li>
<p><strong>æ•°æ®å‰å¤„ç†</strong>ï¼š<code>LayerPostThread</code> è´Ÿè´£å¤„ç†è§†é¢‘å±‚å åŠ ï¼ˆå¦‚æ—¶é—´æˆ³ã€æ–‡å­—æ°´å°ã€å›¾ç‰‡Logoï¼‰ã€‚</p>
</li>
<li>
<p><strong>æ ¸å¿ƒç¼–ç ä¸åˆ†å‘</strong>ï¼š<code>SmartPublisherJniV2</code> (Nativeå±‚) æ¥æ”¶å¤„ç†åçš„YUVæ•°æ®ï¼Œè¿›è¡ŒH.264/H.265ç¼–ç ï¼Œå¹¶åŒæ—¶åˆ†å‘ç»™ï¼š</p>
<ul>
<li>
<p><strong>RTMP Publisher</strong>ï¼šæ¨é€åˆ°CDNæˆ–æµåª’ä½“æœåŠ¡å™¨ã€‚</p>
</li>
<li>
<p><strong>RTSP Server</strong>ï¼šå†…ç½®è½»é‡çº§RTSPæœåŠ¡ï¼Œä¾›å±€åŸŸç½‘å†…æ‹‰æµã€‚</p>
</li>
<li>
<p><strong>Recorder</strong>ï¼šå†™å…¥MP4æ–‡ä»¶è¿›è¡Œæœ¬åœ°å­˜å‚¨ã€‚</p>
</li>
</ul>
</li>
</ol>
<p>è¿™ç§æ¶æ„çš„ä¼˜åŠ¿åœ¨äº<strong>ä¸€æ¬¡é‡‡é›†ã€ä¸€æ¬¡ç¼–ç ã€å¤šè·¯å¤ç”¨</strong>ï¼Œæå¤§åœ°é™ä½äº†CPUå’Œå†…å­˜çš„å¼€é”€ã€‚</p>
<h2 data-id="heading-1">2. Camera2 API çš„é«˜æ•ˆé‡‡é›†ä¸YUVå¤„ç†</h2>
<p>Camera2 API ç›¸æ¯”æ—§ç‰ˆ Camera API æä¾›äº†æ›´å¼ºå¤§çš„æ§åˆ¶åŠ›ï¼Œä½†ä¹Ÿæ›´ä¸ºå¤æ‚ã€‚æºç ä¸­çš„ <code>Camera2Helper.java</code> å°è£…äº†ç¹ççš„ Session åˆ›å»ºå’Œ Surface é…ç½®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03f107ef6100428484b0b19b56ecefd2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z-z6KeG6aKR54mb5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765849562&amp;x-signature=gYfir94ZMMaK%2F7I2sxaly%2BtK2Q8%3D" alt="" loading="lazy"/><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/>â€‹ç¼–è¾‘</p>
<h3 data-id="heading-2">å…³é”®ç‚¹ï¼šYUVæ•°æ®çš„è·å–ä¸æ—‹è½¬</h3>
<p>åœ¨ <code>MainActivity</code> ä¸­ï¼Œå®ç°äº† <code>Camera2Listener</code> æ¥å£ã€‚æ ¸å¿ƒæ•°æ®å›è°ƒåœ¨ <code>onCameraImageData</code> æ–¹æ³•ä¸­ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@Override</span>
public void onCameraImageData(Image image) {
    <span class="hljs-comment">// æ ¡éªŒæ ¼å¼æ˜¯å¦ä¸º YUV_420_888</span>
    if (image.getFormat() != ImageFormat<span class="hljs-selector-class">.YUV_420_888</span>) {
        return;
    }

    Image<span class="hljs-selector-class">.Plane</span><span class="hljs-selector-attr">[]</span> planes = image<span class="hljs-selector-class">.getPlanes</span>();
    <span class="hljs-comment">// è·å– Y, U, V å¹³é¢çš„ Buffer åŠ Stride ä¿¡æ¯</span>
    <span class="hljs-comment">// ... (çœç•¥éƒ¨åˆ†è£å‰ªä»£ç )</span>

    <span class="hljs-comment">// å¤„ç†è®¾å¤‡æ—‹è½¬è§’åº¦</span>
    int rotation_degree = cameraImageRotationDegree_;
    if (rotation_degree &lt; <span class="hljs-number">0</span>) return;

    <span class="hljs-comment">// å°†æ•°æ®æŠ•é€’ç»™ SDK</span>
    for (LibPublisherWrapper i : publisher_array_)
        <span class="hljs-selector-tag">i</span><span class="hljs-selector-class">.PostLayerImageYUV420888ByteBuffer</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,
            planes[<span class="hljs-number">0</span>].getBuffer(), y_offset, planes<span class="hljs-selector-attr">[0]</span><span class="hljs-selector-class">.getRowStride</span>(),
            planes<span class="hljs-selector-attr">[1]</span><span class="hljs-selector-class">.getBuffer</span>(), u_offset, planes<span class="hljs-selector-attr">[1]</span><span class="hljs-selector-class">.getRowStride</span>(),
            planes<span class="hljs-selector-attr">[2]</span><span class="hljs-selector-class">.getBuffer</span>(), v_offset, planes<span class="hljs-selector-attr">[2]</span><span class="hljs-selector-class">.getRowStride</span>(), planes<span class="hljs-selector-attr">[1]</span><span class="hljs-selector-class">.getPixelStride</span>(),
            w, h, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,
            scale_w, scale_h, scale_filter_mode, rotation_degree);
}
</code></pre>
<p><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/></p>
<p><strong>æŠ€æœ¯è§£è¯»ï¼š</strong></p>
<ul>
<li>
<p><strong>ç›´æ¥ä¼ é€’ ByteBuffer</strong>ï¼šä»£ç ç›´æ¥å°† <code>Image.Plane</code> çš„ ByteBuffer ä¼ é€’ç»™ Native å±‚ï¼ˆ<code>PostLayerImageYUV420888ByteBuffer</code>ï¼‰ï¼Œé¿å…äº†åœ¨ Java å±‚è¿›è¡Œå¤§é‡çš„æ•°æ®æ‹·è´ï¼Œè¿™æ˜¯é™ä½å»¶è¿Ÿå’Œ CPU å ç”¨çš„å…³é”®ã€‚</p>
</li>
<li>
<p><strong>å¤„ç† Stride</strong>ï¼šCamera2 è¾“å‡ºçš„æ•°æ®é€šå¸¸åŒ…å« Padding (Stride &gt; Width)ï¼Œç›´æ¥å¤„ç†å®¹æ˜“é€ æˆèŠ±å±ã€‚å¤§ç‰›ç›´æ’­SDK æä¾›äº†å¸¦ Stride å‚æ•°çš„æ¥å£ï¼Œå®Œç¾å…¼å®¹äº†ä¸åŒæœºå‹çš„ Camera2 è¾“å‡ºã€‚</p>
</li>
<li>
<p><strong>publisher_array_</strong>ï¼šè¿™é‡Œè®¾è®¡äº†ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å« <code>stream_publisher_</code> å’Œ <code>snap_shot_publisher_</code>ï¼Œæ„å‘³ç€åŒä¸€ä»½ YUV æ•°æ®è¢«åŒæ—¶ç”¨äºæ¨æµ/å½•åƒå’Œå¿«ç…§å¤„ç†ã€‚</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3fe69507b9464a4892358a8711cd0748~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z-z6KeG6aKR54mb5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765849562&amp;x-signature=1rW268TVjtvT5h5KNhInw7xbLnU%3D" alt="" loading="lazy"/></p>
<p>å®‰å“è½»é‡çº§RTSPæœåŠ¡é‡‡é›†æ‘„åƒå¤´ï¼ŒPCç«¯åˆ°å®‰å“æ‹‰å–RTSPæµ</p>
<p><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/></p>
<h2 data-id="heading-3">3. å¹¶å‘æ ¸å¿ƒï¼šLibPublisherWrapper çš„è®¾è®¡</h2>
<p>ä¸ºäº†ä¿è¯å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„ç¨³å®šæ€§ï¼ˆUIçº¿ç¨‹æ“ä½œå¼€å…³ï¼Œé‡‡é›†çº¿ç¨‹æŠ•é€’æ•°æ®ï¼Œç¼–ç çº¿ç¨‹å¤„ç†æ•°æ®ï¼‰ï¼Œæºç å°è£…äº† <code>LibPublisherWrapper</code> ç±»ã€‚å®ƒé€šè¿‡ <code>ReentrantReadWriteLock</code> è¯»å†™é”æ¥ä¿è¯ SDK å¥æŸ„çš„å®‰å…¨è®¿é—®ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LibPublisherWrapper</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">AutoCloseable</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ReadWriteLock</span> <span class="hljs-variable">rw_lock_</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantReadWriteLock</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-comment">// ...</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">PostLayerImageYUV420888ByteBuffer</span><span class="hljs-params">(...)</span> {
        <span class="hljs-keyword">if</span> (!check_native_handle()) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> (!read_lock_.tryLock()) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// å°è¯•è·å–è¯»é”ï¼Œé¿å…é˜»å¡é‡‡é›†çº¿ç¨‹</span>

        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> OK == lib_publisher_.PostLayerImageYUV420888ByteBuffer(get(), ...);
        } <span class="hljs-keyword">finally</span> {
            read_lock_.unlock();
        }
    }
}
</code></pre>
<p><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/></p>
<p>è¿™ç§ Wrapper æ¨¡å¼åœ¨éŸ³è§†é¢‘å¼€å‘ä¸­éå¸¸æ¨èï¼Œèƒ½æœ‰æ•ˆé˜²æ­¢åœ¨ SDK é”€æ¯è¿‡ç¨‹ä¸­ï¼ˆå¦‚åˆ‡æ¢æ‘„åƒå¤´æˆ–å…³é—­ Activityï¼‰å› æ•°æ®æŠ•é€’é€ æˆçš„ Crashã€‚</p>
<h2 data-id="heading-4">4. ç‰¹è‰²åŠŸèƒ½è§£æ</h2>
<h3 data-id="heading-5">4.1 å†…ç½®è½»é‡çº§ RTSP æœåŠ¡ (Lightweight RTSP Service)</h3>
<p>è¿™æ˜¯å¤§ç‰›ç›´æ’­SDKçš„ä¸€å¤§ç‰¹è‰²ã€‚ä¼ ç»Ÿçš„æ¨æµç«¯é€šå¸¸åªè´Ÿè´£æ¨æµï¼Œæ‹‰æµéœ€è¦ä¾èµ– Nginx æˆ– SRS ç­‰æœåŠ¡å™¨ã€‚ä½†è¯¥ SDK å…è®¸ Android è®¾å¤‡<strong>å˜èº«</strong>ä¸º RTSP æœåŠ¡å™¨ã€‚</p>
<p>åœ¨ <code>MainActivity</code> ä¸­ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// åˆå§‹åŒ– RTSP Server ä¸Šä¸‹æ–‡
LibPublisherWrapper.RTSPServer.initialize_sdk(libPublisher, context_)<span class="hljs-comment">;</span>

// å¯åŠ¨æœåŠ¡
int <span class="hljs-attr">port</span> = <span class="hljs-number">8554</span><span class="hljs-comment">;</span>
LibPublisherWrapper.RTSPServer.Handle <span class="hljs-attr">server_handle</span> = 
    LibPublisherWrapper.RTSPServer.create_and_start_server(libPublisher, port, user_name, password)<span class="hljs-comment">;</span>
    
// å°† RTSP Server å…³è”åˆ° Publisher
stream_publisher_.AddRtspStreamServer(rtsp_server_.get_native())<span class="hljs-comment">;</span>
</code></pre>
<p><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/></p>
<p><strong>åº”ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>
<p><strong>å†…ç½‘ä½å»¶è¿Ÿç›‘æ§</strong>ï¼šåŒä¸€ä¸ªå±€åŸŸç½‘å†…çš„ PC æˆ–å…¶ä»–æ‰‹æœºå¯ä»¥ç›´æ¥é€šè¿‡ <code>rtsp://device_ip:8554/stream1</code> æ‹‰å–ä½å»¶è¿Ÿæµï¼Œæ— éœ€ç»è¿‡äº‘ç«¯ CDNï¼Œå»¶è¿Ÿå¯æ§åˆ¶åœ¨æ¯«ç§’çº§ã€‚</p>
</li>
<li>
<p><strong>æ•™å­¦/ä¼šè®®</strong>ï¼šè®²å¸ˆç«¯ä½œä¸º RTSP Serverï¼Œå­¦ç”Ÿç«¯ç›´æ¥æ‹‰æµã€‚</p>
</li>
</ul>
<h3 data-id="heading-6">4.2 åŠ¨æ€æ°´å°ä¸å›¾å±‚å åŠ  (LayerPostThread)</h3>
<p>æºç ä¸­åŒ…å«ä¸€ä¸ª <code>LayerPostThread.java</code>ï¼Œå®ƒå±•ç¤ºäº† SDK å¼ºå¤§çš„<strong>è§†é¢‘å±‚å åŠ </strong>èƒ½åŠ›ã€‚</p>
<ul>
<li>
<p><strong>åŠ¨æ€æ—¶é—´æˆ³</strong>ï¼šé€šè¿‡ <code>makeTimestampString()</code> ç”Ÿæˆå½“å‰æ—¶é—´ Bitmapã€‚</p>
</li>
<li>
<p><strong>æ–‡å­—/å›¾ç‰‡æ°´å°</strong>ï¼šæ”¯æŒæ·»åŠ  Logo æˆ–æ–‡å­—ã€‚</p>
</li>
<li>
<p><strong>çŸ©å½¢æ¡†ç»˜åˆ¶</strong>ï¼šæ¼”ç¤ºäº†åŠ¨æ€ç»˜åˆ¶ RGB å›¾å±‚ã€‚</p>
</li>
</ul>
<p>è¿™äº›å›¾å±‚å¹¶ä¸æ˜¯åœ¨ Java å±‚é€šè¿‡ Canvas ç»˜åˆ¶åˆ°è§†é¢‘ Bitmap ä¸Šï¼ˆé‚£æ ·æ•ˆç‡å¤ªä½ï¼‰ï¼Œè€Œæ˜¯ç”Ÿæˆ Overlay æ•°æ®åï¼Œé€šè¿‡ <code>PostLayerBitmap</code> æˆ– <code>PostLayerImageRGBA8888ByteBuffer</code> ä¼ é€’ç»™åº•å±‚ï¼Œç”± GPU æˆ– Native é«˜æ•ˆæ··åˆã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// LayerPostThread.java æ ¸å¿ƒå¾ªç¯</span>
private void <span class="hljs-built_in">on_run</span>() {
    <span class="hljs-built_in">while</span>(!is_exit()) {
        <span class="hljs-comment">// æ›´æ–°æ—¶é—´æˆ³å›¾å±‚</span>
        <span class="hljs-built_in">post_timestamp_layer</span>(...);
        <span class="hljs-comment">// æ›´æ–°æ–‡å­—å›¾å±‚</span>
        <span class="hljs-built_in">postText1Layer</span>(...);
        <span class="hljs-comment">// ...</span>
        <span class="hljs-built_in">sleep_ms</span>(update_interval);
    }
}
</code></pre>
<p><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/></p>
<h3 data-id="heading-7">4.3 å®æ—¶å½•åƒä¸æ–­ç½‘é‡è¿</h3>
<ul>
<li>
<p><strong>å½•åƒ</strong>ï¼š<code>stream_publisher_.StartRecorder()</code> å³å¯å¼€å¯æœ¬åœ°å½•åƒã€‚SDK å†…éƒ¨å¤„ç†äº†éŸ³è§†é¢‘åŒæ­¥å’Œ MP4 å°è£…ï¼Œä¸”æ”¯æŒè®¾ç½®æ–‡ä»¶åˆ†ç‰‡å¤§å°ï¼ˆ<code>SetRecorderFileMaxSize</code>ï¼‰ã€‚</p>
</li>
<li>
<p><strong>å¼‚å¸¸å¤„ç†</strong>ï¼š<code>EventHandlerPublisherV2</code> ç›‘å¬ SDK å›è°ƒã€‚ä¾‹å¦‚ <code>EVENT_DANIULIVE_ERC_PUBLISHER_DISCONNECTED</code> äº‹ä»¶è§¦å‘æ—¶ï¼Œåº”ç”¨å±‚å¯ä»¥è¿›è¡Œ UI æç¤ºæˆ–è‡ªåŠ¨é‡è¿é€»è¾‘ã€‚</p>
</li>
</ul>
<h2 data-id="heading-8">5. æ€§èƒ½ä¼˜åŒ–æ€»ç»“</h2>
<p>é€šè¿‡åˆ†æè¿™ä»½ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºå‡ ä¸ªå…³é”®çš„æ€§èƒ½ä¼˜åŒ–ç‚¹ï¼š</p>
<ol>
<li>
<p><strong>é›¶æ‹·è´è®¾è®¡</strong>ï¼šCamera2 çš„ DirectByteBuffer ç›´æ¥é€å…¥ Nativeï¼Œé¿å… Java Heap å†…å­˜æŠ–åŠ¨ã€‚</p>
</li>
<li>
<p><strong>ç¡¬ç¼–ç ä¼˜å…ˆ</strong>ï¼š<code>initialize_publisher</code> æ–¹æ³•ä¸­ä¼˜å…ˆå°è¯•å¼€å¯ H.264/H.265 ç¡¬ç¼–ç  (<code>SetSmartPublisherVideoHWEncoder</code>)ï¼Œå¤§å¹…é™ä½ CPU å ç”¨ã€‚</p>
</li>
<li>
<p><strong>çº¿ç¨‹æ¨¡å‹</strong>ï¼šé‡‡é›†ã€UIã€æ•°æ®æŠ•é€’ã€ç¼–ç åˆ†å‘åˆ†ç¦»ï¼Œåˆ©ç”¨è¯»å†™é”ä¿è¯çº¿ç¨‹å®‰å…¨ä¸”ä¸é˜»å¡é«˜é¢‘çš„è§†é¢‘é‡‡é›†å›è°ƒã€‚</p>
</li>
</ol>
<h2 data-id="heading-9">ç»“è¯­ï¼šä»â€œåŠŸèƒ½å®ç°â€åˆ°â€œå·¥ä¸šçº§äº¤ä»˜â€çš„è·¨è¶Š</h2>
<p>çºµè§‚è¿™ä»½ Demo æºç ï¼Œæˆ‘ä»¬çœ‹åˆ°çš„ä¸ä»…ä»…æ˜¯ä¸€ä¸ªåŠŸèƒ½çš„å †ç Œï¼Œè€Œæ˜¯ä¸€å¥—<strong>ç»å¾—èµ·ç”Ÿäº§ç¯å¢ƒè€ƒéªŒçš„ Android éŸ³è§†é¢‘æ¶æ„èŒƒæœ¬</strong>ã€‚å®ƒå±•ç¤ºäº†å¤§ç‰›ç›´æ’­ SDK å¦‚ä½•åœ¨å¤æ‚çš„ Android ç¢ç‰‡åŒ–ç”Ÿæ€ä¸­ï¼Œæä¾›ä¸€ç§â€œç¡®å®šæ€§â€çš„è§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li>
<p><strong>æ¶æ„çš„é²æ£’æ€§è®¾è®¡</strong> æºç ä¸­ <code>LibPublisherWrapper</code> çš„å°è£…ä¸ä»…ä»…æ˜¯ä¸ºäº†ä»£ç æ•´æ´ï¼Œæ›´ä½“ç°äº†<strong>ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>çš„æ™ºæ…§ã€‚é€šè¿‡å¼•å…¥ <code>ReentrantReadWriteLock</code>ï¼ˆè¯»å†™é”ï¼‰å’Œ <code>WeakReference</code>ï¼ˆå¼±å¼•ç”¨ï¼‰ï¼Œè¿™å¥—æ¶æ„å·§å¦™åœ°è§£å†³äº†éŸ³è§†é¢‘å¼€å‘ä¸­æœ€ä¸ºæ£˜æ‰‹çš„â€œé«˜å¹¶å‘æ•°æ®ç«äº‰â€ä¸â€œå¯¹è±¡å¼•ç”¨æ³„æ¼â€é—®é¢˜ã€‚å®ƒç¡®ä¿äº†åœ¨ Activity é”€æ¯ã€æ‘„åƒå¤´åˆ‡æ¢æˆ–ç½‘ç»œæŠ–åŠ¨ç­‰æç«¯æƒ…å†µä¸‹ï¼Œåº•å±‚ Native èµ„æºä¾ç„¶èƒ½è¢«å®‰å…¨ã€æœ‰åºåœ°é‡Šæ”¾ï¼Œè¿™æ˜¯ä»â€œDemoâ€èµ°å‘â€œå•†ç”¨äº§å“â€çš„å…³é”®ä¸€æ­¥ã€‚</p>
</li>
<li>
<p><strong>â€œä¸€æ¬¡é‡‡é›†ï¼Œå¤šç«¯åˆ†å‘â€çš„æ•ˆèƒ½æé™</strong> åœ¨ç§»åŠ¨ç«¯ï¼Œç®—åŠ›å’ŒåŠŸè€—æ˜¯æ°¸è¿œçš„ç—›ç‚¹ã€‚æœ¬æ–¹æ¡ˆé€šè¿‡ <code>Camera2Helper</code> å®ç°äº†ä¸€æ¬¡ YUV æ•°æ®é‡‡é›†ï¼Œå´èƒ½åŒæ—¶æ”¯æ’‘ <strong>RTMP è¿œç«¯ç›´æ’­</strong>ã€<strong>RTSP å±€åŸŸç½‘åˆ†å‘</strong> ä»¥åŠ <strong>MP4 æœ¬åœ°å­˜è¯</strong> ä¸‰å¤§ä¸šåŠ¡æµã€‚è¿™ç§â€œå•æºå¤šæ±‡â€çš„ pipeline è®¾è®¡ï¼Œæœ€å¤§ç¨‹åº¦åœ°å¤ç”¨äº†ç¼–ç å‰çš„ YUV æ•°æ®å’Œç¼–ç åçš„ H.264/H.265 æ•°æ®ï¼Œé¿å…äº†é‡å¤çš„å†…å­˜æ‹·è´ä¸è‰²å½©ç©ºé—´è½¬æ¢ï¼Œå°† CPU å’Œå†…å­˜çš„å¼€é”€å‹åˆ°äº†æè‡´ã€‚</p>
</li>
<li>
<p><strong>ä»â€œæ¨æµç«¯â€åˆ°â€œè¾¹ç¼˜è®¡ç®—èŠ‚ç‚¹â€çš„è§’è‰²èœ•å˜</strong> æœ€ä»¤äººå°è±¡æ·±åˆ»çš„ï¼Œæ˜¯ SDK å†…ç½®çš„ <strong>è½»é‡çº§ RTSP æœåŠ¡</strong>ã€‚è¿™ä¸€åŠŸèƒ½æ‰“ç ´äº†ä¼ ç»Ÿæ¨æµç«¯åªèƒ½â€œå•å‘ä¸Šä¼ â€çš„åˆ»æ¿å°è±¡ï¼Œè®©æ¯ä¸€å° Android è®¾å¤‡éƒ½èƒ½ç¬é—´å˜èº«ä¸ºä¸€å°ç‹¬ç«‹çš„ IP Camera æˆ–æµåª’ä½“æœåŠ¡å™¨ã€‚è¿™æ„å‘³ç€åœ¨æ— å…¬ç½‘ã€æ— äº‘æœåŠ¡å™¨çš„å†…ç½‘ç¯å¢ƒä¸­ï¼ˆå¦‚è½¦è½½ç›‘æ§ã€åº”æ€¥æ•‘æ´ã€æ— äººæœºå›¾ä¼ ï¼‰ï¼Œè¯¥æ–¹æ¡ˆä¾ç„¶å…·å¤‡ç‹¬ç«‹ç»„ç½‘å’Œè§†é¢‘åˆ†å‘çš„èƒ½åŠ›ï¼Œä¸ºâ€œè¾¹ç¼˜è®¡ç®—â€å’Œâ€œç‰©è”ç½‘â€åœºæ™¯æä¾›äº†æ— é™çš„æƒ³è±¡ç©ºé—´ã€‚</p>
</li>
</ol>
<p>å¯¹äºå¹¿å¤§éŸ³è§†é¢‘å¼€å‘è€…è€Œè¨€ï¼Œä¸ä»…æ˜¯ä¸€æŠŠæ‰“å¼€ RTMP/RTSP åè®®å¤§é—¨çš„é’¥åŒ™ï¼Œæ›´æ˜¯ä¸€ä»½å…³äº<strong>é«˜æ€§èƒ½ã€ä½å»¶è¿Ÿã€é«˜ç¨³å®šæ€§</strong>éŸ³è§†é¢‘åº”ç”¨å¼€å‘çš„æœ€ä½³å®è·µæŒ‡å—ã€‚</p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ Trae Solo å¿«é€Ÿæ­å»ºä¸ªäººå·¥å…·ç½‘ç«™]]></title>    <link>https://juejin.cn/post/7581381365493661750</link>    <guid>https://juejin.cn/post/7581381365493661750</guid>    <pubDate>2025-12-09T02:38:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581381365493661750" data-draft-id="7581329603778035748" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ Trae Solo å¿«é€Ÿæ­å»ºä¸ªäººå·¥å…·ç½‘ç«™"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,Trae"/> <meta itemprop="datePublished" content="2025-12-09T02:38:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="haicoder_ibai"/> <meta itemprop="url" content="https://juejin.cn/user/4054654615819799"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ Trae Solo å¿«é€Ÿæ­å»ºä¸ªäººå·¥å…·ç½‘ç«™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4054654615819799/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    haicoder_ibai
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T02:38:25.000Z" title="Tue Dec 09 2025 02:38:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å­¦é•¿ä»¥å‰çš„ç³»åˆ—æ–‡ç« ä¸­ï¼Œ</p>
<p>ä»¥å‰ç”¨ Python å†™çš„ 30+ ä¸ªå°å·¥å…·ï¼Œ</p>
<p>ä½†æ˜¯æ—¥å¸¸ä½¿ç”¨ä¸­ååˆ†ä¸æ–¹ä¾¿ï¼Œ</p>
<p>ç¿»ä»£ç ã€é…ç¯å¢ƒã€æ‰‹åŠ¨è·‘ï¼Œååˆ†è´¹åŠ²ï¼Œ</p>
<p>å¾ˆå¤šæ—¶å€™éƒ½åªèƒ½å½“â€œä»£ç æ”¶è—å®¶â€â€”â€”</p>
<p>å­¦é•¿æ¯æ¬¡æƒ³æŠŠPythonå°å·¥å…·æ‰“åŒ…æˆç½‘ç«™ï¼Œ</p>
<p>çº¯åç«¯å‡ºèº«çš„å­¦é•¿ï¼Œä¸€æ‰“å¼€å‰ç«¯ä»£ç å°±å¤´çš®å‘éº»ï¼š</p>
<p>â€œHTMLä¸ä¼šå†™ï¼ŒCSSè°ƒä¸åŠ¨ï¼Œè¿ä¸ªæŒ‰é’®éƒ½æ•´ä¸æ˜ç™½â€¦â€</p>
<p>ç†å·¥ç”·çš„å®¡ç¾ä¹Ÿæ˜¯ä¸å¿ç›´è§†ï¼</p>
<p>ç›´åˆ°å‘ç°AIèƒ½å½“æˆ‘çš„â€œå‰ç«¯ç¿»è¯‘å®˜â€ï¼š</p>
<p>è¿‘æœŸï¼Œå­¦é•¿è¿ç”¨è±†åŒ… + åƒé—® + Traeï¼Œ</p>
<p>æ­å»ºå‡ºå±äºçš„å­¦é•¿å·¥å…·åº“ç½‘ç«™ï¼Œ</p>
<p>ä¸ç”¨å­¦å‰ç«¯ï¼Œä¸ç”¨å†™ä»£ç ï¼Œ</p>
<p>ç›´æ¥æŠŠå·¥å…·å¡è¿›ç½‘ç«™ï¼Œç‚¹å¼€å°±ç”¨ã€‚</p>
<h2 data-id="heading-1">ç›¸å…³å·¥å…·</h2>
<h3 data-id="heading-2">è±†åŒ…</h3>
<blockquote>
<p>ä¼ é€é—¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.doubao.com%2F" target="_blank" title="https://www.doubao.com/" ref="nofollow noopener noreferrer">www.doubao.com/</a></p>
</blockquote>
<h3 data-id="heading-3">åƒé—®</h3>
<blockquote>
<p>ä¼ é€é—¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.qianwen.com%2F" target="_blank" title="https://www.qianwen.com/" ref="nofollow noopener noreferrer">www.qianwen.com/</a></p>
</blockquote>
<h3 data-id="heading-4">Trae</h3>
<blockquote>
<p>ä¼ é€é—¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.trae.cn%2F" target="_blank" title="https://www.trae.cn/" ref="nofollow noopener noreferrer">www.trae.cn/</a></p>
</blockquote>
<p>PS: ä¸Šè¯‰å·¥å…·æ˜¯å­¦é•¿å¹³æ—¶ä¹ æƒ¯ä½¿ç”¨ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå·±ç†Ÿæ‚‰çš„ AI å·¥å…·ï¼Œæ¯”å¦‚ï¼šå…ƒå®ã€DeepSeek ç­‰ã€‚</p>
<h2 data-id="heading-5">æ•´ä½“æµç¨‹</h2>
<p>å®ç°ä¸€ä¸ª â€œå­¦é•¿å·¥å…·åº“â€ æ­¥éª¤ï¼š</p>
<ul>
<li>æ ¹æ®éœ€æ±‚æè¿°ï¼Œç”»å‡ºç½‘ç«™åŸå‹å›¾</li>
<li>æ ¹æ®åŸå‹å›¾ï¼Œè®© Trae å®ç°å‰ç«¯ä»£ç ã€‚</li>
<li>æ ¹æ®æç¤ºè¯ï¼Œè®© Trae è°ƒæ•´å‰ç«¯ä»£ç ã€‚</li>
</ul>
<h2 data-id="heading-6">åŸå‹å›¾</h2>
<p>å…ˆä½¿ç”¨è±†åŒ…ï¼Œç”Ÿæˆç½‘ç«™åŸå‹å›¾ï¼Œå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93d195e30d5b4a78b14d597d91652e62~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGFpY29kZXJfaWJhaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765852704&amp;x-signature=CS4lkUw0JVssILK8OqxO%2B3IP96k%3D" alt="" loading="lazy"/></p>
<p>åŸå‹å›¾ç”Ÿæˆï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f4d73122eaa4f09bf8f8de5ce229640~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGFpY29kZXJfaWJhaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765852704&amp;x-signature=Gfp38CxonAY7GF6m3iautuMiNJg%3D" alt="" loading="lazy"/></p>
<p>åŸå‹å›¾è¯¦æƒ…é¡µå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/81be41223e454f84b487a6b2f0cb6cb2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGFpY29kZXJfaWJhaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765852704&amp;x-signature=aGkf2BKwPBN65Ziovgze1Y1OjbY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-7">éœ€æ±‚æ–‡æ¡£</h2>
<p>é€šä¹‰åƒé—®æ¢³ç†å‡ºéœ€æ±‚æ–‡æ¡£ï¼Œå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28bb0b77b1d44c5a99ab588aa5db05a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGFpY29kZXJfaWJhaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765852704&amp;x-signature=q4rhiETSyV0WxV08bTUoX6aAh3A%3D" alt="" loading="lazy"/></p>
<p>ç”Ÿæˆçš„éœ€æ±‚æ–‡æ¡£æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b55c9664ac04ad0b456d54c7f80d351~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGFpY29kZXJfaWJhaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765852704&amp;x-signature=uJNC5bImzfWkcZpRy%2FhmwqMW80k%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-8">è¯¦ç»†è®¾è®¡æ–‡æ¡£</h2>
<p>ä½¿ç”¨åƒé—®ï¼Œæ ¹æ®ä¸Šè¿°éœ€æ±‚æ–‡æ¡£ï¼Œç”Ÿæˆè¯¦ç»†è®¾è®¡æ–‡æ¡£ï¼Œå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52e657bbae4741ecb61c8702fa59c313~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGFpY29kZXJfaWJhaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765852704&amp;x-signature=g3eN2WK3fYlql5aLahz1zo0%2BQ%2FQ%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">ä»£ç ç”Ÿæˆ</h2>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬æ‰“å¼€ Trae çš„ solo æ¨¡å¼ï¼Œå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82f504607fa54427a6eeb1c15d4e19ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGFpY29kZXJfaWJhaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765852704&amp;x-signature=clo8BDNBCWk6P%2BllXKjciO1zs0s%3D" alt="" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥ï¼Œé€‰ä¸­åŸå‹å›¾ï¼Œè¾“å…¥æç¤ºè¯ï¼ŒAI ä¼šè‡ªä¸»ç”Ÿæˆæ•´ä¸ªç•Œé¢ï¼Œå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7342715cb1094014a2d370efa780f30a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGFpY29kZXJfaWJhaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765852704&amp;x-signature=weydJ94YEvJDaEvQr3s3UT5vgtQ%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-10">æŠ¥é”™åˆ†æ</h2>
<p>åœ¨ç”Ÿæˆå®Œæˆåï¼Œå¯èƒ½ä¼šå‡ºç°ä¸€äº›ä»£ç æŠ¥é”™ï¼Œ</p>
<p>æˆ‘ä»¬ç›´æ¥è®© Trae å¸®æˆ‘ä»¬åˆ†æå¹¶è§£å†³å³å¯ï¼Œå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c1cc5034f3d4514b03a124d39c5bbb4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGFpY29kZXJfaWJhaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765852704&amp;x-signature=N3PftRPt7GDXy6ZCfjpUs3jTnwQ%3D" alt="" loading="lazy"/></p>
<p>è§£å†³ä¸Šè¿°è¯­æ³•é”™è¯¯ä¹‹åï¼Œè¿è¡Œä¸­æŠ¥é”™ä»¥å¯ä»¥ç›´æ¥è®© AI åˆ†æ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46d4f2a233f24da8866d0c88afc120d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGFpY29kZXJfaWJhaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765852704&amp;x-signature=MY0uYjsT9psknBSdxd22cT3FogE%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>AI ä¼šç»™å‡ºé”™è¯¯åˆ†æä»¥åŠä¿®å¤æ­¥éª¤ï¼Œå¹¶æœ€ç»ˆæŒ‰ç…§è¯¥æ­¥éª¤ç›´æ¥æ‰§è¡Œã€‚</p>
</blockquote>
<h2 data-id="heading-11">ç½‘ç«™è¿è¡Œ</h2>
<p>å¾…ä¸Šè¿°æ‰€æœ‰æµç¨‹å‡è§£å†³åï¼Œå¯ä»¥è¿è¡Œé¡¹ç›®ï¼Œæœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼š</p>
<blockquote>
<p>PSï¼šæ­¤æ•ˆæœæ¯”åŸå‹å›¾å°‘äº†è®¸å¤šå·¥å…·ï¼Œå­¦é•¿æ˜¯ä¸ºäº†æ–¹ä¾¿æé—® AI ä»¥åŠä¿®æ”¹ï¼Œ</p>
<p>å› æ­¤åªç”Ÿæˆä¸€ä¸ªç±»å‹çš„å·¥å…·ï¼Œåç»­ç³»åˆ—æ–‡ç« ä¼šæ…¢æ…¢å®Œå–„ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0010a1742774453cb6c7433a26c93349~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGFpY29kZXJfaWJhaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765852704&amp;x-signature=lqa0coOnk0DL2pVEkmK0EhnGXLk%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e79a1d4699e7471ead76471470ed3dab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGFpY29kZXJfaWJhaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765852704&amp;x-signature=T3lsRmVejzYJcqbydltiE6J0ksg%3D" alt="" loading="lazy"/></p>
<p>æ­¤æ—¶ï¼Œå­¦é•¿è§‰å¾—æŒ‰é’®æè¿°éœ€è¦è°ƒæ•´ï¼Œåˆ™å¯ä»¥éšæ—¶æ‰¾ AI è¿›è¡Œä¿®æ”¹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13408817fa7842ff9bb1d676951c6ac4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGFpY29kZXJfaWJhaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765852704&amp;x-signature=BkQN3Y1gwgvk%2BUeRkfED69SX4WE%3D" alt="" loading="lazy"/></p>
<p>æœ€ç»ˆæ›´æ”¹æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0e5fdde55294ecc8af1d604a2717190~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGFpY29kZXJfaWJhaQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765852704&amp;x-signature=Msy3wlfzqb1pni2cFUHC7%2FnqNRQ%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-12">ç»“è®º</h2>
<p>é€šè¿‡æœ¬æ–‡çš„ä»‹ç»ï¼Œä½ å­¦ä¼šäº†å¦‚ä½•åˆ©ç”¨è±†åŒ…ã€é€šä¹‰ã€Trae å¿«é€Ÿå¼€å‘ä¸€ä¸ªå·¥å…·ç½‘ç«™ï¼ˆå‰ç«¯ï¼‰ã€‚</p>
<h2 data-id="heading-13">å†å²æ–‡ç« ç³»åˆ—</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FHZ62ZmvXPxIVY4mygI_F2Q" target="_blank" title="https://mp.weixin.qq.com/s/HZ62ZmvXPxIVY4mygI_F2Q" ref="nofollow noopener noreferrer">73.ä½¿ç”¨ Trae Solo å¿«é€Ÿæ­å»ºä¸ªäººå·¥å…·ç½‘ç«™</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkyODQ4MjA4Mg%3D%3D%26mid%3D2247486255%26idx%3D1%26sn%3D7e80c63fa39fe1841a52b6e855c977e0%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkyODQ4MjA4Mg==&amp;mid=2247486255&amp;idx=1&amp;sn=7e80c63fa39fe1841a52b6e855c977e0&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">71.30åˆ†é’Ÿç”¨Traeæ­å»ºä¸“å±å·¥å…·ç½‘ç«™ï¼é›¶åŸºç¡€ä¹Ÿèƒ½å¿«é€Ÿå¼€å‘ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkyODQ4MjA4Mg%3D%3D%26mid%3D2247486220%26idx%3D1%26sn%3D4493faf5773c9452f7b600e4b3fd6ab7%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkyODQ4MjA4Mg==&amp;mid=2247486220&amp;idx=1&amp;sn=4493faf5773c9452f7b600e4b3fd6ab7&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">70.é›¶ä»£ç ä¹Ÿèƒ½åšï¼å›¾ç‰‡è¯†åˆ«+è‡ªåŠ¨å…¥åº“é£ä¹¦è¡¨æ ¼ï¼ŒCozeå·¥ä½œæµæ•™ç¨‹æ‰‹æŠŠæ‰‹æ•™å­¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkyODQ4MjA4Mg%3D%3D%26mid%3D2247486204%26idx%3D1%26sn%3D2eae5fbe94c5517c28ee1725dffca41f%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkyODQ4MjA4Mg==&amp;mid=2247486204&amp;idx=1&amp;sn=2eae5fbe94c5517c28ee1725dffca41f&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">69.è¿ç”¨Cozeå·¥ä½œæµå®ç°å¤šå¼ å‘ç¥¨è¯†åˆ«å†™å…¥é£ä¹¦è¡¨æ ¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkyODQ4MjA4Mg%3D%3D%26mid%3D2247486172%26idx%3D1%26sn%3D1a31df5b39e3e9f4b7549b51f4db32a1%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkyODQ4MjA4Mg==&amp;mid=2247486172&amp;idx=1&amp;sn=1a31df5b39e3e9f4b7549b51f4db32a1&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">68.è¿ç”¨Cozeå·¥ä½œæµå®ç°å‘ç¥¨æ™ºèƒ½è¯†åˆ«ä¸è‡ªåŠ¨åŒ–å½•å…¥é£ä¹¦å¤šç»´è¡¨æ ¼</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Celery å¼‚æ­¥ä»»åŠ¡å®Œå…¨æŒ‡å—ï¼šä»å…¥é—¨åˆ°å®æˆ˜]]></title>    <link>https://juejin.cn/post/7581470169839632422</link>    <guid>https://juejin.cn/post/7581470169839632422</guid>    <pubDate>2025-12-09T02:44:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581470169839632422" data-draft-id="7581374664327725107" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Celery å¼‚æ­¥ä»»åŠ¡å®Œå…¨æŒ‡å—ï¼šä»å…¥é—¨åˆ°å®æˆ˜"/> <meta itemprop="keywords" content="Flask,Python"/> <meta itemprop="datePublished" content="2025-12-09T02:44:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Xier"/> <meta itemprop="url" content="https://juejin.cn/user/1152710585356295"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Celery å¼‚æ­¥ä»»åŠ¡å®Œå…¨æŒ‡å—ï¼šä»å…¥é—¨åˆ°å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1152710585356295/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Xier
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T02:44:40.000Z" title="Tue Dec 09 2025 02:44:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨å¼€å‘ Web åº”ç”¨æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°éœ€è¦é•¿æ—¶é—´æ‰§è¡Œçš„ä»»åŠ¡ï¼šå‘é€é‚®ä»¶ã€å¤„ç†å¤§æ–‡ä»¶ã€ç”ŸæˆæŠ¥è¡¨ã€è®­ç»ƒæœºå™¨å­¦ä¹ æ¨¡å‹ç­‰ã€‚å¦‚æœè¿™äº›ä»»åŠ¡åœ¨ HTTP è¯·æ±‚ä¸­åŒæ­¥æ‰§è¡Œï¼Œä¼šå¯¼è‡´ç”¨æˆ·ç­‰å¾…å¾ˆä¹…ï¼Œç”šè‡³è¶…æ—¶ã€‚</p>
<p>Celery å°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„åˆ©å™¨â€”â€”ä¸€ä¸ªå¼ºå¤§çš„åˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—ç³»ç»Ÿã€‚æœ¬æ–‡å°†æ·±å…¥æµ…å‡ºåœ°ä»‹ç» Celery çš„æ ¸å¿ƒæ¦‚å¿µå’Œå®æˆ˜åº”ç”¨ï¼Œç‰¹åˆ«æ˜¯å¦‚ä½•å®ç°<strong>æ–‡ä»¶ä¸‹è½½è¿›åº¦å®æ—¶è¿½è¸ª</strong>è¿™ä¸ªå¸¸è§éœ€æ±‚ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€Celery æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<h3 data-id="heading-2">1.1 æ ¸å¿ƒæ¶æ„</h3>
<p>Celery ç”±ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶ç»„æˆï¼š</p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  <span class="hljs-selector-tag">Main</span> ç¨‹åº   â”‚ â”€â”€â”€&gt; â”‚ Message Brokerâ”‚ â”€â”€â”€&gt; â”‚Celery Worker â”‚
â”‚ (Flask/Django)â”‚      â”‚   (Redis)    â”‚      â”‚  (æ‰§è¡Œä»»åŠ¡)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                            â”‚
       â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚Result Backendâ”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚   (Redis)    â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<ul>
<li><strong>Main ç¨‹åº</strong>: å‘é€ä»»åŠ¡çš„å®¢æˆ·ç«¯ï¼ˆä½ çš„ Web åº”ç”¨ï¼‰</li>
<li><strong>Message Broker</strong>: æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå­˜å‚¨å¾…æ‰§è¡Œçš„ä»»åŠ¡ï¼ˆå¸¸ç”¨ Redisï¼‰</li>
<li><strong>Celery Worker</strong>: æ‰§è¡Œä»»åŠ¡çš„å·¥ä½œè¿›ç¨‹</li>
<li><strong>Result Backend</strong>: å­˜å‚¨ä»»åŠ¡ç»“æœå’ŒçŠ¶æ€ï¼ˆå¯é€‰ï¼Œå¸¸ç”¨ Redisï¼‰</li>
</ul>
<h3 data-id="heading-3">1.2 å¿«é€Ÿå¼€å§‹</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å®‰è£…</span>
pip install celery redis

<span class="hljs-comment"># å®šä¹‰ä»»åŠ¡ (tasks.py)</span>
from celery import Celery

<span class="hljs-attr">app</span> = Celery(<span class="hljs-string">'myapp'</span>, 
             <span class="hljs-attr">broker</span>=<span class="hljs-string">'redis://localhost:6379/0'</span>,
             <span class="hljs-attr">backend</span>=<span class="hljs-string">'redis://localhost:6379/0'</span>)

@app.task
def add(x, y):
    return x + y

<span class="hljs-comment"># å¯åŠ¨ Worker</span>
<span class="hljs-comment"># celery -A tasks worker --loglevel=info</span>

<span class="hljs-comment"># è°ƒç”¨ä»»åŠ¡ (main.py)</span>
<span class="hljs-attr">result</span> = add.delay(<span class="hljs-number">4</span>, <span class="hljs-number">6</span>)
print(result.get())  <span class="hljs-comment"># è¾“å‡º: 10</span>
</code></pre>
<h2 data-id="heading-4">äºŒã€task_idï¼šä»»åŠ¡çš„å”¯ä¸€æ ‡è¯†ç¬¦</h2>
<h3 data-id="heading-5">2.1 ä»€ä¹ˆæ˜¯ task_idï¼Ÿ</h3>
<p><code>task_id</code> æ˜¯æ¯ä¸ªä»»åŠ¡çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç±»ä¼¼äºå¿«é€’å•å·ã€‚é€šè¿‡å®ƒï¼ŒMain ç¨‹åºå’Œ Worker éƒ½èƒ½è¿½è¸ªåŒä¸€ä¸ªä»»åŠ¡ã€‚</p>
<h3 data-id="heading-6">2.2 ç”Ÿæˆä¸ä¼ é€’æœºåˆ¶</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># Main ç¨‹åºç«¯</span>
<span class="hljs-attr">result</span> = add.apply_async(args=[<span class="hljs-number">10</span>, <span class="hljs-number">20</span>])
<span class="hljs-attr">task_id</span> = result.id  <span class="hljs-comment"># Celery è‡ªåŠ¨ç”Ÿæˆ UUID</span>
print(f"Task ID: {task_id}")  <span class="hljs-comment"># 3c8a2c9a-7b5d-4e3f...</span>
</code></pre>
<p><strong>å…³é”®æµç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Main ç¨‹åº                    Redis (Broker)              Worker
    â”‚                             â”‚                        â”‚
    â”‚ â‘  ç”Ÿæˆ <span class="hljs-attr">task_id</span>=<span class="hljs-string">"abc-123"</span>    â”‚                        â”‚
    â”‚ â‘¡ å‘é€æ¶ˆæ¯                   â”‚                        â”‚
    â”‚   {id:"abc-123", args:<span class="hljs-section">[]</span>}   â”‚                        â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚                        â”‚
    â”‚                             â”‚ â‘¢ Worker æ‹‰å–æ¶ˆæ¯      â”‚
    â”‚                             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚
    â”‚                             â”‚   è§£æ task_id         â”‚
    â”‚                             â”‚                        â”‚
    â”‚                             â”‚   Redis (Backend)      â”‚
    â”‚ â‘£ æŸ¥è¯¢çŠ¶æ€                   â”‚         â”‚              â”‚
    â”‚   ç”¨ task_id æŸ¥è¯¢            â”‚         â”‚ â‘¤ å†™å…¥çŠ¶æ€  â”‚
    â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
</code></pre>
<p><strong>é‡ç‚¹</strong>ï¼štask_id åœ¨ Main ç¨‹åºç”Ÿæˆï¼Œé€šè¿‡æ¶ˆæ¯ä¼ é€’ç»™ Workerï¼ŒåŒæ–¹éƒ½ç”¨å®ƒä½œä¸º Redis Backend çš„é”®åæ¥è¯»å†™çŠ¶æ€ã€‚</p>
<h3 data-id="heading-7">2.3 è‡ªå®šä¹‰ task_id</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># è‡ªå®šä¹‰ task_idï¼ˆä¸šåŠ¡ç›¸å…³ï¼‰</span>
<span class="hljs-attr">custom_id</span> = f<span class="hljs-string">"download_{user_id}_{file_id}_{uuid.uuid4().hex[:8]}"</span>

<span class="hljs-attr">result</span> = download_file.apply_async(
    <span class="hljs-attr">args</span>=[<span class="hljs-string">'https://example.com/file.zip'</span>, <span class="hljs-string">'/tmp/file.zip'</span>],
    <span class="hljs-attr">task_id</span>=custom_id  <span class="hljs-comment"># æŒ‡å®šè‡ªå®šä¹‰ ID</span>
)

<span class="hljs-comment"># åç»­å¯ä»¥éšæ—¶æŸ¥è¯¢</span>
from celery.result import AsyncResult
<span class="hljs-attr">status</span> = AsyncResult(custom_id, app=app)
print(status.state)
</code></pre>
<p><strong>å¥½å¤„</strong>ï¼š</p>
<ul>
<li>ä¾¿äºæ•°æ®åº“å­˜å‚¨å’ŒæŸ¥è¯¢</li>
<li>å®ç°å¹‚ç­‰æ€§ï¼ˆé¿å…é‡å¤ä»»åŠ¡ï¼‰</li>
<li>ä¾¿äºæ—¥å¿—è¿½è¸ªå’Œè°ƒè¯•</li>
</ul>
<h2 data-id="heading-8">ä¸‰ã€AsyncResultï¼šä»»åŠ¡ç»“æœçš„ä»£ç†å¯¹è±¡</h2>
<h3 data-id="heading-9">3.1 ä»€ä¹ˆæ˜¯ AsyncResultï¼Ÿ</h3>
<p><code>AsyncResult</code> æ˜¯ä¸€ä¸ªä»£è¡¨ä»»åŠ¡ç»“æœçš„å¯¹è±¡ï¼Œå°±åƒ"æè´§å•"â€”â€”ä½ å¯ä»¥éšæ—¶ç”¨å®ƒæŸ¥è¯¢ä»»åŠ¡çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># æ–¹å¼ 1: ä»»åŠ¡è°ƒç”¨æ—¶ç›´æ¥è·å¾—</span>
<span class="hljs-attr">result</span> = add.delay(<span class="hljs-number">4</span>, <span class="hljs-number">6</span>)
print(type(result))  <span class="hljs-comment"># &lt;class 'celery.result.AsyncResult'&gt;</span>

<span class="hljs-comment"># æ–¹å¼ 2: é€šè¿‡ task_id é‡æ–°åˆ›å»º</span>
<span class="hljs-attr">result</span> = AsyncResult(<span class="hljs-string">'task-id-from-database'</span>, app=app)
</code></pre>
<h3 data-id="heading-10">3.2 æ ¸å¿ƒå±æ€§å’Œæ–¹æ³•</h3>
<pre><code class="hljs language-bash" lang="bash">result = long_task.delay(100)

<span class="hljs-comment"># ä»»åŠ¡æ ‡è¯†</span>
<span class="hljs-built_in">print</span>(result.id)          <span class="hljs-comment"># task_id</span>

<span class="hljs-comment"># ä»»åŠ¡çŠ¶æ€</span>
<span class="hljs-built_in">print</span>(result.state)       <span class="hljs-comment"># PENDING, STARTED, SUCCESS, FAILURE...</span>

<span class="hljs-comment"># æ£€æŸ¥çŠ¶æ€</span>
<span class="hljs-built_in">print</span>(result.ready())     <span class="hljs-comment"># æ˜¯å¦å®Œæˆ (True/False)</span>
<span class="hljs-built_in">print</span>(result.successful()) <span class="hljs-comment"># æ˜¯å¦æˆåŠŸ</span>
<span class="hljs-built_in">print</span>(result.failed())    <span class="hljs-comment"># æ˜¯å¦å¤±è´¥</span>

<span class="hljs-comment"># è·å–ç»“æœ</span>
value = result.get(<span class="hljs-built_in">timeout</span>=10)  <span class="hljs-comment"># é˜»å¡ç­‰å¾…ï¼Œæœ€å¤š 10 ç§’</span>

<span class="hljs-comment"># éé˜»å¡è·å–</span>
<span class="hljs-keyword">if</span> result.ready():
    <span class="hljs-built_in">print</span>(result.result)  <span class="hljs-comment"># è·å–ç»“æœæˆ–å¼‚å¸¸</span>
</code></pre>
<h3 data-id="heading-11">3.3 è®¿é—®ä»»åŠ¡å…ƒæ•°æ®</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@app.task(<span class="hljs-params">bind=<span class="hljs-literal">True</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">task_with_progress</span>(<span class="hljs-params">self, n</span>):
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):
        self.update_state(
            state=<span class="hljs-string">'PROGRESS'</span>,
            meta={<span class="hljs-string">'current'</span>: i, <span class="hljs-string">'total'</span>: n}
        )
    <span class="hljs-keyword">return</span> <span class="hljs-string">'done'</span>

result = task_with_progress.delay(<span class="hljs-number">10</span>)
time.sleep(<span class="hljs-number">2</span>)
<span class="hljs-built_in">print</span>(result.info)  <span class="hljs-comment"># {'current': 5, 'total': 10}</span>
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šAsyncResult æœ¬èº«ä¸å­˜å‚¨æ•°æ®ï¼Œå®ƒåªæ˜¯é€šè¿‡ task_id å» Redis æŸ¥è¯¢æ•°æ®çš„"æŸ¥è¯¢å™¨"ã€‚</p>
<h2 data-id="heading-12">å››ã€delay() vs apply_async()</h2>
<h3 data-id="heading-13">4.1 æ ¸å¿ƒåŒºåˆ«</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># delay() - ç®€åŒ–ç‰ˆæœ¬</span>
<span class="hljs-attr">result</span> = task.delay(arg1, arg2, key=value)

<span class="hljs-comment"># ç­‰ä»·äº</span>
<span class="hljs-attr">result</span> = task.apply_async(
    <span class="hljs-attr">args</span>=[arg1, arg2], 
    <span class="hljs-attr">kwargs</span>={<span class="hljs-string">'key'</span>: value}
)
</code></pre>
<h3 data-id="heading-14">4.2 åŠŸèƒ½å¯¹æ¯”è¡¨</h3>













































<table><thead><tr><th>åŠŸèƒ½</th><th>delay()</th><th>apply_async()</th></tr></thead><tbody><tr><td>ä¼ é€’ä»»åŠ¡å‚æ•°</td><td>âœ…</td><td>âœ…</td></tr><tr><td>è‡ªå®šä¹‰ task_id</td><td>âŒ</td><td>âœ…</td></tr><tr><td>å»¶è¿Ÿæ‰§è¡Œ</td><td>âŒ</td><td>âœ…</td></tr><tr><td>å®šæ—¶æ‰§è¡Œ</td><td>âŒ</td><td>âœ…</td></tr><tr><td>è®¾ç½®ä¼˜å…ˆçº§</td><td>âŒ</td><td>âœ…</td></tr><tr><td>è¦†ç›–é˜Ÿåˆ—</td><td>âŒ</td><td>âœ…</td></tr><tr><td>ä»»åŠ¡é“¾</td><td>âŒ</td><td>âœ…</td></tr></tbody></table>
<h3 data-id="heading-15">4.3 ä½¿ç”¨å»ºè®®</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ç®€å•åœºæ™¯ - ä½¿ç”¨ delay()</span>
send_email.delay("user@example.com", "Hello")

<span class="hljs-comment"># éœ€è¦è¿½è¸ªæˆ–é…ç½® - ä½¿ç”¨ apply_async()</span>
<span class="hljs-attr">result</span> = download_file.apply_async(
    <span class="hljs-attr">args</span>=[<span class="hljs-string">'https://example.com/file.zip'</span>],
    <span class="hljs-attr">task_id</span>=f<span class="hljs-string">"download_{user_id}_{timestamp}"</span>,
    <span class="hljs-attr">countdown</span>=<span class="hljs-number">60</span>,  <span class="hljs-comment"># 60 ç§’åæ‰§è¡Œ</span>
    <span class="hljs-attr">queue</span>=<span class="hljs-string">"download"</span>,
    <span class="hljs-attr">priority</span>=<span class="hljs-number">9</span>
)
</code></pre>
<p><strong>åŸåˆ™</strong>ï¼šé»˜è®¤ç”¨ <code>delay()</code> ä¿æŒç®€æ´ï¼Œéœ€è¦é«˜çº§åŠŸèƒ½æ—¶ç”¨ <code>apply_async()</code>ã€‚</p>
<h2 data-id="heading-16">äº”ã€bind=Trueï¼šä»»åŠ¡çš„è‡ªæˆ‘æ„ŸçŸ¥</h2>
<h3 data-id="heading-17">5.1 æ ¸å¿ƒä½œç”¨</h3>
<p><code>bind=True</code> è®©ä»»åŠ¡å‡½æ•°æ¥æ”¶ <code>self</code> å‚æ•°ï¼Œä»£è¡¨ä»»åŠ¡å®ä¾‹æœ¬èº«ï¼Œä»è€Œå¯ä»¥è®¿é—®ä»»åŠ¡ä¿¡æ¯å’Œæ§åˆ¶ä»»åŠ¡è¡Œä¸ºã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¸ä½¿ç”¨ bind=True</span>
<span class="hljs-meta">@app.task</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">task1</span>(<span class="hljs-params">x, y</span>):
    <span class="hljs-comment"># âŒ æ— æ³•è®¿é—® task_id</span>
    <span class="hljs-comment"># âŒ æ— æ³•æ›´æ–°çŠ¶æ€</span>
    <span class="hljs-keyword">return</span> x + y

<span class="hljs-comment"># ä½¿ç”¨ bind=True</span>
<span class="hljs-meta">@app.task(<span class="hljs-params">bind=<span class="hljs-literal">True</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">task2</span>(<span class="hljs-params">self, x, y</span>):
    <span class="hljs-comment"># âœ… è®¿é—® task_id</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Task ID: <span class="hljs-subst">{self.request.<span class="hljs-built_in">id</span>}</span>"</span>)
    
    <span class="hljs-comment"># âœ… æ›´æ–°è¿›åº¦</span>
    self.update_state(
        state=<span class="hljs-string">'PROGRESS'</span>,
        meta={<span class="hljs-string">'progress'</span>: <span class="hljs-number">50</span>}
    )
    
    <span class="hljs-keyword">return</span> x + y
</code></pre>
<h3 data-id="heading-18">5.2 ä¸‰å¤§æ ¸å¿ƒåŠŸèƒ½</h3>
<h4 data-id="heading-19">1. è®¿é—®ä»»åŠ¡ä¿¡æ¯</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@app.task(<span class="hljs-params">bind=<span class="hljs-literal">True</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">inspect_task</span>(<span class="hljs-params">self, data</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Task ID: <span class="hljs-subst">{self.request.<span class="hljs-built_in">id</span>}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Task Name: <span class="hljs-subst">{self.name}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Args: <span class="hljs-subst">{self.request.args}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Retries: <span class="hljs-subst">{self.request.retries}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Hostname: <span class="hljs-subst">{self.request.hostname}</span>"</span>)
</code></pre>
<h4 data-id="heading-20">2. æ›´æ–°ä»»åŠ¡çŠ¶æ€</h4>
<pre><code class="hljs language-ini" lang="ini">@app.task(<span class="hljs-attr">bind</span>=<span class="hljs-literal">True</span>)
def download_file(self, url, save_path):
    <span class="hljs-attr">response</span> = requests.get(url, stream=<span class="hljs-literal">True</span>)
    <span class="hljs-attr">total</span> = int(response.headers.get(<span class="hljs-string">'content-length'</span>, <span class="hljs-number">0</span>))
    <span class="hljs-attr">downloaded</span> = <span class="hljs-number">0</span>
    
    for chunk in response.iter_content(8192):
        downloaded += len(chunk)
        
        <span class="hljs-comment"># å®æ—¶æ›´æ–°è¿›åº¦</span>
        self.update_state(
            <span class="hljs-attr">state</span>=<span class="hljs-string">'PROGRESS'</span>,
            <span class="hljs-attr">meta</span>={
                'downloaded': downloaded,
                'total': total,
                'percent': int(downloaded / total * 100)
            }
        )
</code></pre>
<h4 data-id="heading-21">3. æ‰‹åŠ¨é‡è¯•ä»»åŠ¡</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@app.task(<span class="hljs-params">bind=<span class="hljs-literal">True</span>, max_retries=<span class="hljs-number">3</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">unreliable_api_call</span>(<span class="hljs-params">self, url</span>):
    <span class="hljs-keyword">try</span>:
        response = requests.get(url, timeout=<span class="hljs-number">5</span>)
        <span class="hljs-keyword">return</span> response.json()
    <span class="hljs-keyword">except</span> requests.RequestException <span class="hljs-keyword">as</span> exc:
        <span class="hljs-comment"># æŒ‡æ•°é€€é¿é‡è¯•</span>
        countdown = <span class="hljs-number">2</span> ** self.request.retries
        <span class="hljs-keyword">raise</span> self.retry(exc=exc, countdown=countdown)
</code></pre>
<h3 data-id="heading-22">5.3 ä½¿ç”¨åœºæ™¯</h3>
<p><strong>å¿…é¡»ä½¿ç”¨ bind=True</strong>ï¼š</p>
<ul>
<li>âœ… éœ€è¦å®æ—¶æ›´æ–°ä»»åŠ¡è¿›åº¦</li>
<li>âœ… éœ€è¦è®°å½• task_id åˆ°æ—¥å¿—</li>
<li>âœ… éœ€è¦å®ç°è‡ªå®šä¹‰é‡è¯•é€»è¾‘</li>
<li>âœ… æ–‡ä»¶ä¸‹è½½ã€æ•°æ®å¯¼å…¥ã€é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡</li>
</ul>
<p><strong>ä¸éœ€è¦ bind=True</strong>ï¼š</p>
<ul>
<li>âœ… ç®€å•çš„"å‘é€å¹¶å¿˜è®°"ä»»åŠ¡</li>
<li>âœ… çº¯ç²¹çš„è®¡ç®—ä»»åŠ¡</li>
<li>âœ… ä¸éœ€è¦è¿½è¸ªè¿›åº¦çš„åå°ä»»åŠ¡</li>
</ul>
<h2 data-id="heading-23">å…­ã€Queueï¼šä»»åŠ¡çš„åˆ†ç±»ä¸éš”ç¦»</h2>
<h3 data-id="heading-24">6.1 ä¸ºä»€ä¹ˆéœ€è¦é˜Ÿåˆ—ï¼Ÿ</h3>
<p>æƒ³è±¡ä¸€ä¸ªåœºæ™¯ï¼šä½ çš„åº”ç”¨æœ‰ä¸¤ç§ä»»åŠ¡</p>
<ul>
<li>å‘é€é‚®ä»¶ï¼šå¿«é€Ÿï¼Œæ¯ä¸ªä»»åŠ¡ 1 ç§’</li>
<li>è§†é¢‘è½¬ç ï¼šæ…¢é€Ÿï¼Œæ¯ä¸ªä»»åŠ¡ 5 åˆ†é’Ÿ</li>
</ul>
<p><strong>ä¸ä½¿ç”¨é˜Ÿåˆ—éš”ç¦»</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">å•ä¸€é˜Ÿåˆ—: <span class="hljs-section">[é‚®ä»¶1s]</span> <span class="hljs-section">[é‚®ä»¶1s]</span> <span class="hljs-section">[è§†é¢‘5m]</span> <span class="hljs-section">[é‚®ä»¶1s]</span>
                              â†‘
                    ç¬¬3å°é‚®ä»¶è¦ç­‰5åˆ†é’Ÿ!
</code></pre>
<p><strong>ä½¿ç”¨é˜Ÿåˆ—éš”ç¦»</strong>ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">Email</span>é˜Ÿåˆ—: <span class="hljs-selector-attr">[é‚®ä»¶]</span> <span class="hljs-selector-attr">[é‚®ä»¶]</span> <span class="hljs-selector-attr">[é‚®ä»¶]</span>  â† <span class="hljs-selector-tag">Email</span> <span class="hljs-selector-tag">Worker</span> (å¿«é€Ÿ)
<span class="hljs-selector-tag">Video</span>é˜Ÿåˆ—: <span class="hljs-selector-attr">[è§†é¢‘]</span> <span class="hljs-selector-attr">[è§†é¢‘]</span>         â† <span class="hljs-selector-tag">Video</span> <span class="hljs-selector-tag">Worker</span> (æ…¢é€Ÿ)

ç»“æœ: é‚®ä»¶ç«‹å³å‘é€ï¼Œè§†é¢‘æ…¢æ…¢å¤„ç†ï¼Œäº’ä¸å½±å“!
</code></pre>
<h3 data-id="heading-25">6.2 å®šä¹‰å’Œä½¿ç”¨é˜Ÿåˆ—</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åœ¨è£…é¥°å™¨ä¸­æŒ‡å®šé˜Ÿåˆ—</span>
<span class="hljs-meta">@shared_task(<span class="hljs-params">queue=<span class="hljs-string">"email"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">send_email</span>(<span class="hljs-params">to, subject, body</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"Email sent to <span class="hljs-subst">{to}</span>"</span>

<span class="hljs-meta">@shared_task(<span class="hljs-params">queue=<span class="hljs-string">"video"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_video</span>(<span class="hljs-params">video_id</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"Video <span class="hljs-subst">{video_id}</span> processed"</span>

<span class="hljs-meta">@shared_task(<span class="hljs-params">queue=<span class="hljs-string">"dataset"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_dataset</span>(<span class="hljs-params">dataset_id</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"Dataset <span class="hljs-subst">{dataset_id}</span> processed"</span>

<span class="hljs-comment"># è°ƒç”¨æ—¶è¦†ç›–é˜Ÿåˆ—</span>
result = send_email.apply_async(
    args=[<span class="hljs-string">"user@example.com"</span>, <span class="hljs-string">"Hello"</span>, <span class="hljs-string">"Welcome"</span>],
    queue=<span class="hljs-string">"high-priority"</span>  <span class="hljs-comment"># è¦†ç›–é»˜è®¤çš„ "email" é˜Ÿåˆ—</span>
)
</code></pre>
<h3 data-id="heading-26">6.3 å¯åŠ¨ Worker ç›‘å¬é˜Ÿåˆ—</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># åªå¤„ç† email é˜Ÿåˆ—</span>
celery -A myapp worker -Q email <span class="hljs-attr">--loglevel</span>=info

<span class="hljs-comment"># å¤„ç†å¤šä¸ªé˜Ÿåˆ—</span>
celery -A myapp worker -Q email,video,dataset <span class="hljs-attr">--loglevel</span>=info

<span class="hljs-comment"># å¤šä¸ª Worker åˆ†åˆ«å¤„ç†ä¸åŒé˜Ÿåˆ—</span>
<span class="hljs-comment"># Terminal 1: å¿«é€Ÿä»»åŠ¡</span>
celery -A myapp worker -Q email,api -n fast_worker

<span class="hljs-comment"># Terminal 2: æ…¢é€Ÿä»»åŠ¡</span>
celery -A myapp worker -Q video,dataset -n slow_worker
</code></pre>
<h3 data-id="heading-27">6.4 é˜Ÿåˆ—è®¾è®¡åŸåˆ™</h3>
<p><strong>æŒ‰ä»»åŠ¡ç±»å‹åˆ†ç±»</strong>ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@shared_task</span>(queue=<span class="hljs-string">"email"</span>)    # é‚®ä»¶ä»»åŠ¡
<span class="hljs-variable">@shared_task</span>(queue=<span class="hljs-string">"sms"</span>)      # çŸ­ä¿¡ä»»åŠ¡
<span class="hljs-variable">@shared_task</span>(queue=<span class="hljs-string">"report"</span>)   # æŠ¥è¡¨ä»»åŠ¡
</code></pre>
<p><strong>æŒ‰æ‰§è¡Œé€Ÿåº¦åˆ†ç±»</strong>ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@shared_task</span>(queue=<span class="hljs-string">"fast"</span>)     # &lt; <span class="hljs-number">1</span>ç§’
<span class="hljs-variable">@shared_task</span>(queue=<span class="hljs-string">"normal"</span>)   # <span class="hljs-number">1</span>-<span class="hljs-number">10</span>ç§’
<span class="hljs-variable">@shared_task</span>(queue=<span class="hljs-string">"slow"</span>)     # &gt; <span class="hljs-number">10</span>ç§’
</code></pre>
<p><strong>æŒ‰ä¼˜å…ˆçº§åˆ†ç±»</strong>ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@shared_task</span>(queue=<span class="hljs-string">"high-priority"</span>)
<span class="hljs-variable">@shared_task</span>(queue=<span class="hljs-string">"normal"</span>)
<span class="hljs-variable">@shared_task</span>(queue=<span class="hljs-string">"low-priority"</span>)
</code></pre>
<p><strong>æŒ‰èµ„æºéœ€æ±‚åˆ†ç±»</strong>ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@shared_task</span>(queue=<span class="hljs-string">"cpu-intensive"</span>)  # CPU å¯†é›†å‹
<span class="hljs-variable">@shared_task</span>(queue=<span class="hljs-string">"io-intensive"</span>)   # IO å¯†é›†å‹
<span class="hljs-variable">@shared_task</span>(queue=<span class="hljs-string">"memory-heavy"</span>)   # å†…å­˜å¯†é›†å‹
</code></pre>
<h3 data-id="heading-28">6.5 ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ¶æ„</h3>
<pre><code class="hljs language-css" lang="css"># æœåŠ¡å™¨ <span class="hljs-number">1</span> (<span class="hljs-number">8</span>æ ¸ CPU) - å¿«é€Ÿä»»åŠ¡
celery -<span class="hljs-selector-tag">A</span> myapp worker -<span class="hljs-selector-tag">Q</span> high-priority,api,email -c <span class="hljs-number">4</span> -n server1

# æœåŠ¡å™¨ <span class="hljs-number">2</span> (<span class="hljs-number">16</span>æ ¸ CPU) - é‡å‹ä»»åŠ¡
celery -<span class="hljs-selector-tag">A</span> myapp worker -<span class="hljs-selector-tag">Q</span> <span class="hljs-selector-tag">video</span>,dataset,ml -c <span class="hljs-number">8</span> -n server2

# æœåŠ¡å™¨ <span class="hljs-number">3</span> (<span class="hljs-number">4</span>æ ¸ CPU) - æ™®é€šä»»åŠ¡
celery -<span class="hljs-selector-tag">A</span> myapp worker -<span class="hljs-selector-tag">Q</span> default,<span class="hljs-attribute">background</span> -c <span class="hljs-number">4</span> -n server3
</code></pre>
<p><strong>å‚æ•°è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>-Q</code>: ç›‘å¬çš„é˜Ÿåˆ—åˆ—è¡¨</li>
<li><code>-c</code>: å¹¶å‘æ•°ï¼ˆWorker è¿›ç¨‹æ•°ï¼‰</li>
<li><code>-n</code>: Worker åç§°</li>
</ul>
<h2 data-id="heading-29">ä¸ƒã€å®æˆ˜æ¡ˆä¾‹ï¼šæ–‡ä»¶ä¸‹è½½è¿›åº¦å®æ—¶è¿½è¸ª</h2>
<p>ç°åœ¨æˆ‘ä»¬æŠŠæ‰€æœ‰çŸ¥è¯†ç‚¹æ•´åˆï¼Œå®ç°ä¸€ä¸ªå®Œæ•´çš„æ–‡ä»¶ä¸‹è½½è¿›åº¦è¿½è¸ªç³»ç»Ÿã€‚</p>
<h3 data-id="heading-30">7.1 Celery ä»»åŠ¡å®šä¹‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># celery_app.py</span>
<span class="hljs-keyword">from</span> celery <span class="hljs-keyword">import</span> Celery
<span class="hljs-keyword">import</span> requests

app = Celery(
    <span class="hljs-string">'tasks'</span>,
    broker=<span class="hljs-string">'redis://localhost:6379/0'</span>,
    backend=<span class="hljs-string">'redis://localhost:6379/0'</span>
)

<span class="hljs-meta">@app.task(<span class="hljs-params">bind=<span class="hljs-literal">True</span>, queue=<span class="hljs-string">"download"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">download_file</span>(<span class="hljs-params">self, url, save_path</span>):
    <span class="hljs-string">"""
    ä¸‹è½½æ–‡ä»¶ä»»åŠ¡ï¼Œå®æ—¶æ›´æ–°è¿›åº¦
    
    å…³é”®ç‚¹ï¼š
    1. bind=True - è·å– self æ¥æ›´æ–°çŠ¶æ€
    2. queue="download" - ä½¿ç”¨ä¸“é—¨çš„ä¸‹è½½é˜Ÿåˆ—
    """</span>
    <span class="hljs-keyword">try</span>:
        response = requests.get(url, stream=<span class="hljs-literal">True</span>)
        total_size = <span class="hljs-built_in">int</span>(response.headers.get(<span class="hljs-string">'content-length'</span>, <span class="hljs-number">0</span>))
        downloaded_size = <span class="hljs-number">0</span>
        
        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(save_path, <span class="hljs-string">'wb'</span>) <span class="hljs-keyword">as</span> f:
            <span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> response.iter_content(chunk_size=<span class="hljs-number">8192</span>):
                <span class="hljs-keyword">if</span> chunk:
                    f.write(chunk)
                    downloaded_size += <span class="hljs-built_in">len</span>(chunk)
                    
                    <span class="hljs-comment"># è®¡ç®—è¿›åº¦ç™¾åˆ†æ¯”</span>
                    progress = <span class="hljs-built_in">int</span>((downloaded_size / total_size) * <span class="hljs-number">100</span>) <span class="hljs-keyword">if</span> total_size &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>
                    
                    <span class="hljs-comment"># å…³é”®ï¼šæ›´æ–°ä»»åŠ¡çŠ¶æ€å’Œè¿›åº¦ä¿¡æ¯</span>
                    self.update_state(
                        state=<span class="hljs-string">'PROGRESS'</span>,
                        meta={
                            <span class="hljs-string">'current'</span>: downloaded_size,
                            <span class="hljs-string">'total'</span>: total_size,
                            <span class="hljs-string">'progress'</span>: progress,
                            <span class="hljs-string">'status'</span>: <span class="hljs-string">f'Downloading... <span class="hljs-subst">{progress}</span>%'</span>
                        }
                    )
        
        <span class="hljs-comment"># ä»»åŠ¡å®Œæˆ</span>
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">'current'</span>: total_size,
            <span class="hljs-string">'total'</span>: total_size,
            <span class="hljs-string">'progress'</span>: <span class="hljs-number">100</span>,
            <span class="hljs-string">'status'</span>: <span class="hljs-string">'Download completed'</span>,
            <span class="hljs-string">'file_path'</span>: save_path
        }
        
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-comment"># ä»»åŠ¡å¤±è´¥</span>
        self.update_state(
            state=<span class="hljs-string">'FAILURE'</span>,
            meta={
                <span class="hljs-string">'status'</span>: <span class="hljs-string">'Download failed'</span>,
                <span class="hljs-string">'error'</span>: <span class="hljs-built_in">str</span>(e)
            }
        )
        <span class="hljs-keyword">raise</span>
</code></pre>
<h3 data-id="heading-31">7.2 Flask API æ¥å£</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># flask_server.py</span>
<span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, jsonify, request
<span class="hljs-keyword">from</span> celery.result <span class="hljs-keyword">import</span> AsyncResult
<span class="hljs-keyword">from</span> celery_app <span class="hljs-keyword">import</span> download_file, app <span class="hljs-keyword">as</span> celery_app
<span class="hljs-keyword">import</span> uuid

app = Flask(__name__)

<span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">'/start_download'</span>, methods=[<span class="hljs-string">'POST'</span>]</span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">start_download</span>():
    <span class="hljs-string">"""
    å¯åŠ¨ä¸‹è½½ä»»åŠ¡
    
    è¯·æ±‚ä½“ï¼š
    {
        "url": "https://example.com/file.zip",
        "save_path": "/tmp/file.zip",
        "user_id": "user_123"
    }
    """</span>
    data = request.json
    url = data.get(<span class="hljs-string">'url'</span>)
    save_path = data.get(<span class="hljs-string">'save_path'</span>)
    user_id = data.get(<span class="hljs-string">'user_id'</span>)
    
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> url <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> save_path:
        <span class="hljs-keyword">return</span> jsonify({<span class="hljs-string">'error'</span>: <span class="hljs-string">'url and save_path are required'</span>}), <span class="hljs-number">400</span>
    
    <span class="hljs-comment"># ç”Ÿæˆä¸šåŠ¡ç›¸å…³çš„ task_id</span>
    task_id = <span class="hljs-string">f"download_<span class="hljs-subst">{user_id}</span>_<span class="hljs-subst">{uuid.uuid4().<span class="hljs-built_in">hex</span>[:<span class="hljs-number">8</span>]}</span>"</span>
    
    <span class="hljs-comment"># å¯åŠ¨å¼‚æ­¥ä»»åŠ¡ï¼ŒæŒ‡å®šè‡ªå®šä¹‰ task_id</span>
    task = download_file.apply_async(
        args=[url, save_path],
        task_id=task_id,
        queue=<span class="hljs-string">"download"</span>  <span class="hljs-comment"># å¯ä»¥è¦†ç›–è£…é¥°å™¨ä¸­çš„é˜Ÿåˆ—</span>
    )
    
    <span class="hljs-comment"># å¯ä»¥å°† task_id ä¿å­˜åˆ°æ•°æ®åº“</span>
    <span class="hljs-comment"># save_to_database(user_id, task_id, url)</span>
    
    <span class="hljs-keyword">return</span> jsonify({
        <span class="hljs-string">'task_id'</span>: task.<span class="hljs-built_in">id</span>,
        <span class="hljs-string">'status'</span>: <span class="hljs-string">'Task started'</span>,
        <span class="hljs-string">'progress_url'</span>: <span class="hljs-string">f'/download_progress/<span class="hljs-subst">{task.<span class="hljs-built_in">id</span>}</span>'</span>
    }), <span class="hljs-number">202</span>


<span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">'/download_progress/&lt;task_id&gt;'</span>, methods=[<span class="hljs-string">'GET'</span>]</span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_download_progress</span>(<span class="hljs-params">task_id</span>):
    <span class="hljs-string">"""
    è·å–ä¸‹è½½è¿›åº¦
    
    è¿”å›ç¤ºä¾‹ï¼š
    {
        "state": "PROGRESS",
        "current": 1024000,
        "total": 10240000,
        "progress": 10,
        "status": "Downloading... 10%"
    }
    """</span>
    <span class="hljs-comment"># é€šè¿‡ task_id åˆ›å»º AsyncResult å¯¹è±¡</span>
    task = AsyncResult(task_id, app=celery_app)
    
    <span class="hljs-keyword">if</span> task.state == <span class="hljs-string">'PENDING'</span>:
        response = {
            <span class="hljs-string">'state'</span>: task.state,
            <span class="hljs-string">'current'</span>: <span class="hljs-number">0</span>,
            <span class="hljs-string">'total'</span>: <span class="hljs-number">1</span>,
            <span class="hljs-string">'progress'</span>: <span class="hljs-number">0</span>,
            <span class="hljs-string">'status'</span>: <span class="hljs-string">'Task is waiting...'</span>
        }
    <span class="hljs-keyword">elif</span> task.state == <span class="hljs-string">'PROGRESS'</span>:
        response = {
            <span class="hljs-string">'state'</span>: task.state,
            <span class="hljs-string">'current'</span>: task.info.get(<span class="hljs-string">'current'</span>, <span class="hljs-number">0</span>),
            <span class="hljs-string">'total'</span>: task.info.get(<span class="hljs-string">'total'</span>, <span class="hljs-number">1</span>),
            <span class="hljs-string">'progress'</span>: task.info.get(<span class="hljs-string">'progress'</span>, <span class="hljs-number">0</span>),
            <span class="hljs-string">'status'</span>: task.info.get(<span class="hljs-string">'status'</span>, <span class="hljs-string">''</span>)
        }
    <span class="hljs-keyword">elif</span> task.state == <span class="hljs-string">'SUCCESS'</span>:
        response = {
            <span class="hljs-string">'state'</span>: task.state,
            <span class="hljs-string">'current'</span>: task.info.get(<span class="hljs-string">'current'</span>, <span class="hljs-number">1</span>),
            <span class="hljs-string">'total'</span>: task.info.get(<span class="hljs-string">'total'</span>, <span class="hljs-number">1</span>),
            <span class="hljs-string">'progress'</span>: <span class="hljs-number">100</span>,
            <span class="hljs-string">'status'</span>: task.info.get(<span class="hljs-string">'status'</span>, <span class="hljs-string">'Completed'</span>),
            <span class="hljs-string">'result'</span>: task.info
        }
    <span class="hljs-keyword">elif</span> task.state == <span class="hljs-string">'FAILURE'</span>:
        response = {
            <span class="hljs-string">'state'</span>: task.state,
            <span class="hljs-string">'current'</span>: <span class="hljs-number">0</span>,
            <span class="hljs-string">'total'</span>: <span class="hljs-number">1</span>,
            <span class="hljs-string">'progress'</span>: <span class="hljs-number">0</span>,
            <span class="hljs-string">'status'</span>: <span class="hljs-built_in">str</span>(task.info),
            <span class="hljs-string">'error'</span>: <span class="hljs-built_in">str</span>(task.info)
        }
    <span class="hljs-keyword">else</span>:
        response = {
            <span class="hljs-string">'state'</span>: task.state,
            <span class="hljs-string">'status'</span>: <span class="hljs-string">'Unknown state'</span>
        }
    
    <span class="hljs-keyword">return</span> jsonify(response)


<span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">'/cancel_download/&lt;task_id&gt;'</span>, methods=[<span class="hljs-string">'POST'</span>]</span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">cancel_download</span>(<span class="hljs-params">task_id</span>):
    <span class="hljs-string">"""å–æ¶ˆä¸‹è½½ä»»åŠ¡"""</span>
    task = AsyncResult(task_id, app=celery_app)
    task.revoke(terminate=<span class="hljs-literal">True</span>)
    
    <span class="hljs-keyword">return</span> jsonify({
        <span class="hljs-string">'status'</span>: <span class="hljs-string">'Task cancelled'</span>,
        <span class="hljs-string">'task_id'</span>: task_id
    })


<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    app.run(debug=<span class="hljs-literal">True</span>, port=<span class="hljs-number">5000</span>)
</code></pre>
<h3 data-id="heading-32">7.3 å‰ç«¯è°ƒç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¯åŠ¨ä¸‹è½½</span>
<span class="hljs-title function_">fetch</span>(<span class="hljs-string">'http://localhost:5000/start_download'</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
    <span class="hljs-attr">headers</span>: {<span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>},
    <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
        <span class="hljs-attr">url</span>: <span class="hljs-string">'https://example.com/large-file.zip'</span>,
        <span class="hljs-attr">save_path</span>: <span class="hljs-string">'/tmp/downloaded-file.zip'</span>,
        <span class="hljs-attr">user_id</span>: <span class="hljs-string">'user_123'</span>
    })
})
.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>())
.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> taskId = data.<span class="hljs-property">task_id</span>;
    
    <span class="hljs-comment">// è½®è¯¢è·å–è¿›åº¦</span>
    <span class="hljs-keyword">const</span> interval = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`http://localhost:5000/download_progress/<span class="hljs-subst">${taskId}</span>`</span>)
            .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>())
            .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">progress</span> =&gt;</span> {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Progress: <span class="hljs-subst">${progress.progress}</span>%`</span>);
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Status: <span class="hljs-subst">${progress.status}</span>`</span>);
                
                <span class="hljs-comment">// æ›´æ–°è¿›åº¦æ¡</span>
                <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'progress-bar'</span>).<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = 
                    <span class="hljs-string">`<span class="hljs-subst">${progress.progress}</span>%`</span>;
                
                <span class="hljs-comment">// ä»»åŠ¡å®Œæˆæˆ–å¤±è´¥ï¼Œåœæ­¢è½®è¯¢</span>
                <span class="hljs-keyword">if</span> (progress.<span class="hljs-property">state</span> === <span class="hljs-string">'SUCCESS'</span> || 
                    progress.<span class="hljs-property">state</span> === <span class="hljs-string">'FAILURE'</span>) {
                    <span class="hljs-built_in">clearInterval</span>(interval);
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Download finished!'</span>);
                }
            });
    }, <span class="hljs-number">1000</span>);  <span class="hljs-comment">// æ¯ç§’æŸ¥è¯¢ä¸€æ¬¡</span>
});
</code></pre>
<h3 data-id="heading-33">7.4 éƒ¨ç½²æ­¥éª¤</h3>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-comment"># 1. å®‰è£…ä¾èµ–</span>
pip install celery redis flask requests

<span class="hljs-comment"># 2. å¯åŠ¨ Redis</span>
redis-server

<span class="hljs-comment"># 3. å¯åŠ¨ Celery Workerï¼ˆä¸“é—¨å¤„ç†ä¸‹è½½é˜Ÿåˆ—ï¼‰</span>
celery -A celery_app worker -Q download --loglevel=info

<span class="hljs-comment"># 4. å¯åŠ¨ Flask æœåŠ¡å™¨</span>
python flask_server.py

<span class="hljs-comment"># 5. æµ‹è¯•</span>
curl -X POST http://localhost:5000/start_download \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -d '{<span class="hljs-string">"url"</span>:<span class="hljs-string">"https://example.com/file.zip"</span>,<span class="hljs-string">"save_path"</span>:<span class="hljs-string">"/tmp/file.zip"</span>,<span class="hljs-string">"user_id"</span>:<span class="hljs-string">"user_123"</span>}'
</code></pre>
<h2 data-id="heading-34">å…«ã€æ ¸å¿ƒæ¦‚å¿µæ€»ç»“</h2>








































<table><thead><tr><th>æ¦‚å¿µ</th><th>ä½œç”¨</th><th>ä½•æ—¶ä½¿ç”¨</th></tr></thead><tbody><tr><td><strong>task_id</strong></td><td>ä»»åŠ¡å”¯ä¸€æ ‡è¯†ç¬¦</td><td>éœ€è¦è¿½è¸ªä»»åŠ¡çŠ¶æ€æ—¶</td></tr><tr><td><strong>AsyncResult</strong></td><td>ä»»åŠ¡ç»“æœä»£ç†å¯¹è±¡</td><td>æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€å’Œç»“æœ</td></tr><tr><td><strong>delay()</strong></td><td>ç®€åŒ–çš„ä»»åŠ¡è°ƒç”¨</td><td>ç®€å•åœºæ™¯ï¼Œä¸éœ€è¦é…ç½®</td></tr><tr><td><strong>apply_async()</strong></td><td>å®Œæ•´çš„ä»»åŠ¡è°ƒç”¨</td><td>éœ€è¦ task_idã€å»¶è¿Ÿã€ä¼˜å…ˆçº§ç­‰</td></tr><tr><td><strong>bind=True</strong></td><td>ä»»åŠ¡è‡ªæˆ‘æ„ŸçŸ¥</td><td>éœ€è¦æ›´æ–°è¿›åº¦ã€é‡è¯•ã€è®¿é—®å…ƒæ•°æ®</td></tr><tr><td><strong>queue</strong></td><td>ä»»åŠ¡åˆ†ç±»éš”ç¦»</td><td>ä¸åŒç±»å‹ä»»åŠ¡éœ€è¦ç‹¬ç«‹å¤„ç†</td></tr></tbody></table>
<h2 data-id="heading-35">ä¹ã€æœ€ä½³å®è·µå»ºè®®</h2>
<h3 data-id="heading-36">9.1 ä»»åŠ¡è®¾è®¡</h3>
<ol>
<li><strong>ç²’åº¦é€‚ä¸­</strong>ï¼šä»»åŠ¡ä¸è¦å¤ªå¤§ï¼ˆé¿å…è¶…æ—¶ï¼‰ä¹Ÿä¸è¦å¤ªå°ï¼ˆé¿å…å¼€é”€ï¼‰</li>
<li><strong>å¹‚ç­‰æ€§</strong>ï¼šä»»åŠ¡åº”è¯¥å¯ä»¥å®‰å…¨é‡è¯•ï¼Œå¤šæ¬¡æ‰§è¡Œç»“æœç›¸åŒ</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šä½¿ç”¨ try-except æ•è·å¼‚å¸¸ï¼Œé¿å…ä»»åŠ¡å´©æºƒ</li>
<li><strong>è¶…æ—¶è®¾ç½®</strong>ï¼šä¸ºé•¿æ—¶é—´ä»»åŠ¡è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´</li>
</ol>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@app.task(<span class="hljs-params">bind=<span class="hljs-literal">True</span>, time_limit=<span class="hljs-number">3600</span>, soft_time_limit=<span class="hljs-number">3000</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">long_task</span>(<span class="hljs-params">self, data</span>):
    <span class="hljs-comment"># time_limit: ç¡¬è¶…æ—¶ï¼ˆå¼ºåˆ¶ç»ˆæ­¢ï¼‰</span>
    <span class="hljs-comment"># soft_time_limit: è½¯è¶…æ—¶ï¼ˆæŠ›å‡ºå¼‚å¸¸ï¼‰</span>
    <span class="hljs-keyword">pass</span>
</code></pre>
<h3 data-id="heading-37">9.2 é˜Ÿåˆ—è®¾è®¡</h3>
<ol>
<li><strong>æŒ‰ä¸šåŠ¡åˆ†ç±»</strong>ï¼šemail, sms, report, video, dataset</li>
<li><strong>æŒ‰ä¼˜å…ˆçº§åˆ†ç±»</strong>ï¼šhigh, normal, low</li>
<li><strong>æŒ‰èµ„æºéœ€æ±‚åˆ†ç±»</strong>ï¼šcpu-intensive, io-intensive</li>
<li><strong>åˆç†é…ç½® Worker</strong>ï¼šå¿«é€Ÿä»»åŠ¡å¤šå¹¶å‘ï¼Œæ…¢é€Ÿä»»åŠ¡å°‘å¹¶å‘</li>
</ol>
<h3 data-id="heading-38">9.3 ç›‘æ§å’Œè°ƒè¯•</h3>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">ä½¿ç”¨ Flower ç›‘æ§å·¥å…·</span>
pip install flower
celery -A myapp flower
<span class="hljs-meta prompt_">
# </span><span class="bash">è®¿é—® http://localhost:5555 æŸ¥çœ‹ï¼š</span>
<span class="hljs-meta prompt_"># </span><span class="bash">- å„é˜Ÿåˆ—çš„ä»»åŠ¡æ•°é‡</span>
<span class="hljs-meta prompt_"># </span><span class="bash">- Worker çš„è¿è¡ŒçŠ¶æ€</span>
<span class="hljs-meta prompt_"># </span><span class="bash">- ä»»åŠ¡æ‰§è¡Œå†å²</span>
<span class="hljs-meta prompt_"># </span><span class="bash">- å®æ—¶ç›‘æ§å›¾è¡¨</span>
</code></pre>
<h3 data-id="heading-39">9.4 ç”Ÿäº§ç¯å¢ƒé…ç½®</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># celery_config.py</span>
from kombu import Queue

<span class="hljs-comment"># ä»»åŠ¡è·¯ç”±</span>
<span class="hljs-attr">app.conf.task_routes</span> = {
    'myapp.tasks.send_email': {'queue': 'email'},
    'myapp.tasks.process_video': {'queue': 'video'},
}

<span class="hljs-comment"># ç»“æœè¿‡æœŸæ—¶é—´</span>
<span class="hljs-attr">app.conf.result_expires</span> = <span class="hljs-number">3600</span>  <span class="hljs-comment"># 1å°æ—¶</span>

<span class="hljs-comment"># ä»»åŠ¡åºåˆ—åŒ–</span>
<span class="hljs-attr">app.conf.task_serializer</span> = <span class="hljs-string">'json'</span>
<span class="hljs-attr">app.conf.result_serializer</span> = <span class="hljs-string">'json'</span>
<span class="hljs-attr">app.conf.accept_content</span> = [<span class="hljs-string">'json'</span>]

<span class="hljs-comment"># æ—¶åŒºè®¾ç½®</span>
<span class="hljs-attr">app.conf.timezone</span> = <span class="hljs-string">'Asia/Shanghai'</span>
<span class="hljs-attr">app.conf.enable_utc</span> = <span class="hljs-literal">True</span>

<span class="hljs-comment"># Worker é¢„å–è®¾ç½®</span>
<span class="hljs-attr">app.conf.worker_prefetch_multiplier</span> = <span class="hljs-number">4</span>

<span class="hljs-comment"># ä»»åŠ¡ç¡®è®¤</span>
<span class="hljs-attr">app.conf.task_acks_late</span> = <span class="hljs-literal">True</span>
</code></pre>
<h2 data-id="heading-40">åã€å¸¸è§é—®é¢˜è§£ç­”</h2>
<h3 data-id="heading-41">Q1: ä»»åŠ¡æ‰§è¡Œå¤±è´¥äº†æ€ä¹ˆåŠï¼Ÿ</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@app.task(<span class="hljs-params">bind=<span class="hljs-literal">True</span>, max_retries=<span class="hljs-number">3</span>, default_retry_delay=<span class="hljs-number">60</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">retry_task</span>(<span class="hljs-params">self, data</span>):
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># å¯èƒ½å¤±è´¥çš„æ“ä½œ</span>
        risky_operation(data)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> exc:
        <span class="hljs-comment"># è‡ªåŠ¨é‡è¯•</span>
        <span class="hljs-keyword">raise</span> self.retry(exc=exc)
</code></pre>
<h3 data-id="heading-42">Q2: å¦‚ä½•é¿å…é‡å¤ä»»åŠ¡ï¼Ÿ</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ä½¿ç”¨å›ºå®šçš„ task_id</span>
<span class="hljs-attr">task_id</span> = f<span class="hljs-string">"process_user_{user_id}"</span>
<span class="hljs-attr">result</span> = process_user.apply_async(
    <span class="hljs-attr">args</span>=[user_id],
    <span class="hljs-attr">task_id</span>=task_id
)
<span class="hljs-comment"># å¦‚æœ task_id å·²å­˜åœ¨ï¼ŒCelery ä¼šæ‹’ç»æˆ–å¿½ç•¥</span>
</code></pre>
<h3 data-id="heading-43">Q3: å¦‚ä½•å®ç°å®šæ—¶ä»»åŠ¡ï¼Ÿ</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> celery.schedules <span class="hljs-keyword">import</span> crontab

<span class="hljs-comment"># é…ç½®å®šæ—¶ä»»åŠ¡</span>
app.conf.beat_schedule = {
    <span class="hljs-string">'cleanup-every-day'</span>: {
        <span class="hljs-string">'task'</span>: <span class="hljs-string">'tasks.cleanup'</span>,
        <span class="hljs-string">'schedule'</span>: crontab(hour=<span class="hljs-number">3</span>, minute=<span class="hljs-number">0</span>),  <span class="hljs-comment"># æ¯å¤©å‡Œæ™¨3ç‚¹</span>
    },
}

<span class="hljs-comment"># å¯åŠ¨ Beat è°ƒåº¦å™¨</span>
<span class="hljs-comment"># celery -A myapp beat --loglevel=info</span>
</code></pre>
<h3 data-id="heading-44">Q4: Worker æ•°é‡å¦‚ä½•è®¾ç½®ï¼Ÿ</h3>
<pre><code class="hljs language-r" lang="r"><span class="hljs-comment"># CPU å¯†é›†å‹ï¼šWorker æ•° = CPU æ ¸å¿ƒæ•°</span>
celery <span class="hljs-operator">-</span>A myapp worker <span class="hljs-operator">-</span><span class="hljs-built_in">c</span> <span class="hljs-number">4</span>

<span class="hljs-comment"># IO å¯†é›†å‹ï¼šWorker æ•° = CPU æ ¸å¿ƒæ•° * 2-4</span>
celery <span class="hljs-operator">-</span>A myapp worker <span class="hljs-operator">-</span><span class="hljs-built_in">c</span> <span class="hljs-number">16</span>

<span class="hljs-comment"># æ··åˆå‹ï¼šæ ¹æ®å®é™…è´Ÿè½½è°ƒæ•´</span>
</code></pre>
<h2 data-id="heading-45">ç»“è¯­</h2>
<p>Celery æ˜¯ Python ç”Ÿæ€ä¸­æœ€æˆç†Ÿçš„å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ç³»ç»Ÿï¼ŒæŒæ¡å®ƒçš„æ ¸å¿ƒæ¦‚å¿µâ€”â€”task_idã€AsyncResultã€bindã€queueâ€”â€”èƒ½è®©ä½ è½»æ¾åº”å¯¹å„ç§å¼‚æ­¥ä»»åŠ¡åœºæ™¯ã€‚</p>
<h2 data-id="heading-46">å‚è€ƒèµ„æº</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.celeryproject.org%2F" target="_blank" title="https://docs.celeryproject.org/" ref="nofollow noopener noreferrer">Celery å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcelery%2Fcelery" target="_blank" title="https://github.com/celery/celery" ref="nofollow noopener noreferrer">Celery GitHub</a></li>
<li>[Flower ç›‘æ§å·¥å…·](<a href="https://link.juejin.cn?target=https%3A%2F%2Fflower.readthe" target="_blank" title="https://flower.readthe" ref="nofollow noopener noreferrer">flower.readthe</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”Ÿæˆæµ‹è¯•æ•°æ®ï¼ˆä¸€ï¼‰ï¼šåˆ†é’Ÿçº§æ„å»ºç™¾ä¸‡çº§æ•°æ®ï¼Œæµ‹è¯•æ•°æ®åº“æ€§èƒ½]]></title>    <link>https://juejin.cn/post/7581333926372507690</link>    <guid>https://juejin.cn/post/7581333926372507690</guid>    <pubDate>2025-12-09T01:21:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581333926372507690" data-draft-id="7581329603777380388" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”Ÿæˆæµ‹è¯•æ•°æ®ï¼ˆä¸€ï¼‰ï¼šåˆ†é’Ÿçº§æ„å»ºç™¾ä¸‡çº§æ•°æ®ï¼Œæµ‹è¯•æ•°æ®åº“æ€§èƒ½"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-09T01:21:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ•°æ®å°é¦’å¤´"/> <meta itemprop="url" content="https://juejin.cn/user/48851852475720"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”Ÿæˆæµ‹è¯•æ•°æ®ï¼ˆä¸€ï¼‰ï¼šåˆ†é’Ÿçº§æ„å»ºç™¾ä¸‡çº§æ•°æ®ï¼Œæµ‹è¯•æ•°æ®åº“æ€§èƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/48851852475720/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ•°æ®å°é¦’å¤´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T01:21:03.000Z" title="Tue Dec 09 2025 01:21:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨åç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¸¸é‡åˆ°ä¸€ç§åœºæ™¯ï¼šSQL åœ¨æœ¬åœ°å¼€å‘ç¯å¢ƒï¼ˆåªæœ‰å‡ ç™¾æ¡æ•°æ®ï¼‰è·‘å¾—é£å¿«ï¼Œä¸€ä¸Šçº¿é‡åˆ°ç”Ÿäº§ç¯å¢ƒï¼ˆç™¾ä¸‡/åƒä¸‡çº§æ•°æ®ï¼‰å°±ç›´æ¥å¡æ­»ç”šè‡³æ‹–å®æ•°æ®åº“ã€‚</p>
<p>æ ¸å¿ƒåŸå› åœ¨äºâ€œç©ºè¡¨é™·é˜±â€ï¼šå½“è¡¨æ•°æ®é‡è¿‡å°‘æ—¶ï¼ŒMySQL ä¼˜åŒ–å™¨å¾€å¾€ä¼šç›´æ¥é€‰æ‹©å…¨è¡¨æ‰«æï¼ˆFull Table Scanï¼‰ï¼Œå› ä¸ºæ­¤æ—¶æ‰«æå…¨è¡¨çš„æˆæœ¬æ¯”èµ°ç´¢å¼•ï¼ˆIndex Dive + å›è¡¨ï¼‰æ›´ä½ã€‚è¿™å¯¼è‡´æˆ‘ä»¬åœ¨å¼€å‘é˜¶æ®µæ— æ³•é€šè¿‡ EXPLAIN å‘ç°æ½œåœ¨çš„æ…¢æŸ¥è¯¢ï¼ˆSlow SQLï¼‰ã€‚</p>
<p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¿…é¡»åœ¨å¼€å‘/æµ‹è¯•ç¯å¢ƒæ„å»ºâ€œç­‰é‡çº§â€ç”šè‡³â€œè¶…é‡çº§â€çš„ä»¿çœŸæ•°æ®ã€‚</p>
<p>ä¼ ç»Ÿåšæ³•æ˜¯å†™è„šæœ¬æˆ–å­˜å‚¨è¿‡ç¨‹å¾ªç¯æ’å…¥ï¼Œä½†å­˜åœ¨å•çº¿ç¨‹æ…¢ã€å®¹æ˜“é”è¡¨ã€ä»£ç ç»´æŠ¤éº»çƒ¦ç­‰é—®é¢˜ã€‚æœ¬æ–‡åˆ†äº«ä¸€ä¸ªåœ¨ SQLynx ä¸­åˆ©ç”¨å†…ç½®åŠŸèƒ½ï¼Œé€šè¿‡é…ç½®äº‹åŠ¡ä¸æ‰¹é‡æäº¤ç­–ç•¥ï¼Œå¿«é€Ÿç”Ÿæˆç™¾ä¸‡çº§å‹æµ‹æ•°æ®çš„æŠ€å·§ã€‚</p>
<h2 data-id="heading-0">01 åœºæ™¯å‡†å¤‡</h2>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€å¼  t_orders è¡¨ï¼Œè¿™æ˜¯æœ€å¸¸è§çš„éœ€è¦åšæ€§èƒ½ä¼˜åŒ–çš„åœºæ™¯ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `t_orders` (
  `id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,
  `user_id` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç”¨æˆ·ID'</span>,
  `order_no` <span class="hljs-type">varchar</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è®¢å•å·'</span>,
  `amount` <span class="hljs-type">decimal</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'é‡‘é¢'</span>,
  `status` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'çŠ¶æ€:0-å¾…ä»˜,1-å·²ä»˜,2-å‘è´§,3-å®Œæˆ'</span>,
  `create_time` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  KEY `idx_user_time` (`user_id`,`create_time`)
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4;
</code></pre>
<p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ï¼š<strong>å¾€è¿™å¼ è¡¨é‡Œå¿«é€ŸçŒå…¥ 100 ä¸‡æ¡æ•°æ®ï¼Œä¸”æ•°æ®åˆ†å¸ƒè¦å°½é‡ç¬¦åˆçœŸå®ä¸šåŠ¡åœºæ™¯ï¼ˆæœ‰ç¦»æ•£åº¦ï¼‰ï¼Œä»¥éªŒè¯ idx_user_time ç´¢å¼•çš„æœ‰æ•ˆæ€§ã€‚</strong></p>
<h2 data-id="heading-1">02 æµ‹è¯•æ•°æ®é…ç½®</h2>
<p>åœ¨ SQLynx ä¸­é€‰ä¸­è¡¨ t_ordersï¼Œå³é”®é€‰æ‹© <strong>â€œç”Ÿæˆæµ‹è¯•æ•°æ®â€</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eededf4cd61d4e8b801f2cee517f56a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWw5o2u5bCP6aaS5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765848062&amp;x-signature=ZdNlvHgI4K1u0nu8G4aBpvs91To%3D" alt="" loading="lazy"/></p>
<p>è¿™é‡Œä¸éœ€è¦å†™ä»£ç ï¼Œä¸ºäº†è®©æµ‹è¯•ç»“æœçœŸå®ï¼Œéœ€è¦åœ¨å¼¹çª—ä¸­é’ˆå¯¹å­—æ®µç±»å‹åšå¦‚ä¸‹é…ç½®ï¼š</p>
<ul>
<li>
<p><strong>user_idï¼ˆæ¨¡æ‹Ÿé«˜ç¦»æ•£åº¦ï¼‰ï¼š</strong></p>
</li>
<li>
<p>è®¾ç½®ç”Ÿæˆæ¨¡å¼ä¸ºâ€œéšæœºæ•´æ•°â€ã€‚</p>
</li>
<li>
<p>èŒƒå›´è®¾ä¸º 1000 - 50000ã€‚</p>
</li>
<li>
<p>æŠ€æœ¯è§£è¯»ï¼š æ¨¡æ‹Ÿ 5 ä¸‡ä¸ªä¸åŒç”¨æˆ·çš„ä¸‹å•è¡Œä¸ºï¼Œæµ‹è¯•ç´¢å¼•çš„é€‰æ‹©æ€§ã€‚</p>
</li>
<li>
<p><strong>amountï¼ˆæ¨¡æ‹Ÿé‡‘é¢ï¼‰ï¼š</strong></p>
</li>
<li>
<p>è®¾ç½®ç”Ÿæˆæ¨¡å¼ä¸ºâ€œéšæœºæµ®ç‚¹æ•°â€ã€‚</p>
</li>
<li>
<p>èŒƒå›´ 10.00 - 5000.00ã€‚</p>
</li>
<li>
<p><strong>statusï¼ˆæ¨¡æ‹Ÿä½ç¦»æ•£åº¦ï¼‰ï¼š</strong></p>
</li>
<li>
<p>è®¾ç½®ç”Ÿæˆæ¨¡å¼ä¸ºâ€œéšæœºæ•´æ•°â€ã€‚</p>
</li>
<li>
<p>èŒƒå›´ 0 - 3ã€‚</p>
</li>
<li>
<p>æŠ€æœ¯è§£è¯»ï¼š çŠ¶æ€å­—æ®µé€šå¸¸åŸºæ•°å¾ˆå°ï¼Œç”¨äºæµ‹è¯•ç´¢å¼•å¤±æ•ˆçš„è¾¹ç•Œæƒ…å†µã€‚</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b87345c744094e82af23c236dfb64de5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWw5o2u5bCP6aaS5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765848062&amp;x-signature=CF73L1ZGEnHMEtD2n4eUe4rzG08%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">03 äº‹åŠ¡ä¸æ‰¹é‡å¤§å°</h2>
<p>è¿™æ˜¯ä»â€œæ…¢é€Ÿæ’å…¥â€åˆ°â€œæé€Ÿå†™å…¥â€çš„å…³é”®ä¸€æ­¥ã€‚</p>
<p>å¦‚æœåœ¨å¾ªç¯ä¸­æ¯æ’å…¥ä¸€æ¡æ•°æ®å°± Commit ä¸€æ¬¡ï¼Œ100 ä¸‡æ¬¡ç½‘ç»œ IO å’Œ 100 ä¸‡æ¬¡ Binlog/Redo Log åˆ·ç›˜ä¼šè®©å†™å…¥é€Ÿåº¦ææ…¢ã€‚</p>
<p>åœ¨é…ç½®ç•Œé¢ï¼Œæˆ‘ä»¬éœ€è¦è°ƒæ•´<strong>å†™å…¥ç­–ç•¥</strong>ï¼š</p>
<ol>
<li><strong>æ‰§è¡Œæ¨¡å¼ï¼š</strong> é€‰æ‹© <strong>â€œäº‹åŠ¡æ‰§è¡Œâ€</strong>ã€‚</li>
<li><strong>æ‰¹é‡å¤§å°ï¼š</strong> å¯ä» <strong>1000</strong>å¼€å§‹é€æ­¥é€’å¢ï¼Œæµ‹è¯•æœ€é€‚åˆè‡ªå·±ç¯å¢ƒçš„æœ€ä½³æ•°å€¼ï¼ˆå¦‚<strong>2000-5000çš„åŒºé—´å€¼ï¼‰</strong>ã€‚</li>
</ol>
<p><strong>ä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾ï¼Ÿ</strong></p>
<ul>
<li><strong>å‡å°‘ IO å¼€é”€ï¼š</strong> è®¾ç½® Batch=1000ï¼Œæ„å‘³ç€æ¯ 1000 æ¡ INSERT è¯­å¥åˆå¹¶ä¸ºä¸€ä¸ªç½‘ç»œåŒ…å‘é€ï¼Œä¸”åªè¿›è¡Œä¸€æ¬¡ç£ç›˜åˆ·ç›˜ã€‚</li>
<li><strong>é¿å…é•¿äº‹åŠ¡ï¼š</strong> é¿å…ç›´æ¥è®¾ç½®æ•°å€¼è¿‡å¤§ï¼Œå¦‚100000ã€‚è¿‡å¤§çš„ Batch ä¼šå¯¼è‡´ Undo Log è†¨èƒ€ï¼Œç”šè‡³å¯èƒ½è§¦ç¢° MySQL çš„ max_allowed_packet é™åˆ¶å¯¼è‡´æŠ¥é”™ã€‚</li>
<li><strong>æ¨¡å¼é€‰æ‹©ï¼š</strong> é€‰æ‹© <strong>â€œè¿½åŠ æ•°æ®â€</strong>ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f75c4c7c9844b1bbcf69cd571b73e85~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWw5o2u5bCP6aaS5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765848062&amp;x-signature=sFezWpi%2FEj4GXcmQGbvdkeXSDkE%3D" alt="" loading="lazy"/></p>
<p>ç‚¹å‡»â€œç¡®è®¤â€ï¼Œè¿›å…¥ä»»åŠ¡ä¸­å¿ƒæŸ¥çœ‹è¿›åº¦ã€‚é€šå¸¸åœ¨å†…ç½‘ç¯å¢ƒä¸‹ï¼Œç™¾ä¸‡çº§æ•°æ®çš„ç”Ÿæˆåœ¨å‡ åç§’~åˆ†é’Ÿçº§å¯å®Œæˆã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ffe22f827d24dce8d0b423eb6d12297~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWw5o2u5bCP6aaS5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765848062&amp;x-signature=ExwkMD3Bx%2FrXg7%2B42UF3bfNiYAw%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">04 éªŒè¯æ•ˆæœï¼šä» ALL åˆ° ref</h2>
<p>æ•°æ®åˆ°ä½åï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œæµ‹è¯•ã€‚</p>
<p><strong>æµ‹è¯• SQLï¼š</strong> æŸ¥è¯¢æŸä¸ªç”¨æˆ·æœ€è¿‘çš„è®¢å•ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> t_orders <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">10086</span> <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> create_time <span class="hljs-keyword">DESC</span> LIMIT <span class="hljs-number">10</span>;
</code></pre>
<p>åœºæ™¯ Aï¼šæ•°æ®é‡ 100 æ¡ï¼ˆæ¨¡æ‹Ÿå¼€å‘ç¯å¢ƒï¼‰</p>
<p>æ‰§è¡Œ EXPLAINï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ° type: ALLï¼ˆå…¨è¡¨æ‰«æï¼‰ã€‚</p>
<ul>
<li><strong>ç°è±¡ï¼š</strong> è€—æ—¶ 0.00msã€‚</li>
<li><strong>éšæ‚£ï¼š</strong> å¼€å‘è€…è¯¯ä»¥ä¸ºæ€§èƒ½å®Œç¾ã€‚å®é™…ä¸Šæ˜¯å› ä¸ºæ•°æ®é‡å¤ªå°ï¼ŒMySQL ä¼˜åŒ–å™¨è®¤ä¸ºå…¨è¡¨æ‰«ææˆæœ¬ä½äºè¯»å–ç´¢å¼•æ ‘ï¼Œå› æ­¤ä¸»åŠ¨æ”¾å¼ƒäº†ç´¢å¼•ã€‚è¿™æ©ç›–äº†æ½œåœ¨çš„æ€§èƒ½é—®é¢˜ã€‚</li>
</ul>
<p>åœºæ™¯ Bï¼šæ•°æ®é‡ 100 ä¸‡æ¡ï¼ˆæµ‹è¯•æ•°æ®ç”Ÿæˆåï¼‰</p>
<p>å†æ¬¡æ‰§è¡Œ EXPLAINã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80bf1650184e4f3db88cc28e5348affa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWw5o2u5bCP6aaS5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765848062&amp;x-signature=m0E4hKPutSKX3zZvC%2FDxf8C369k%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p><strong>type: ref</strong>ï¼šå…¨è¡¨æ‰«æï¼ˆALLï¼‰æ¶ˆå¤±äº†ï¼Œkey å­—æ®µæ˜¾ç¤ºä¸º idx_user_timeï¼Œè¯´æ˜ç´¢å¼•è¢«å‘½ä¸­ã€‚</p>
</li>
<li>
<p><strong>rows: 21</strong>ï¼šæˆ‘ä»¬è®¾ç½®çš„ç”¨æˆ· ID èŒƒå›´æ˜¯ 1000-50000ï¼ˆåŸºæ•°çº¦ 4.9 ä¸‡ï¼‰ã€‚</p>
</li>
<li>
<p>éªŒè¯ï¼š æ€»è¡Œæ•° 100 ä¸‡ / ç”¨æˆ·åŸºæ•° 4.9 ä¸‡ â‰ˆ 20.4 è¡Œã€‚</p>
</li>
<li>
<p>ç»“è®ºï¼š rows: 21 ä¸ç†è®ºå€¼ä¸€è‡´ã€‚è¿™è¯æ˜äº†ç”Ÿæˆçš„éšæœºæ•°æ®å…·æœ‰å‡åŒ€åˆ†å¸ƒç‰¹æ€§ï¼Œæ²¡æœ‰å‡ºç°æ•°æ®å€¾æ–œã€‚è¿™ç§é«˜ç¦»æ•£åº¦çš„æ•°æ®çœŸå®è¿˜åŸäº†ç”Ÿäº§ç¯å¢ƒï¼ŒéªŒè¯äº†ç´¢å¼•çš„é«˜é€‰æ‹©æ€§ã€‚</p>
</li>
</ul>
<h2 data-id="heading-4">05 æ€»ç»“</h2>
<p>â€œé€ æ•°â€æ˜¯åç«¯å¼€å‘å’Œ DBA çš„ä¸€é¡¹åŸºç¡€è®¾æ–½èƒ½åŠ›ã€‚</p>
<p>åˆ©ç”¨ SQLynx çš„â€œç”Ÿæˆæµ‹è¯•æ•°æ®â€åŠŸèƒ½ï¼Œå¯æ›¿ä»£æ‰‹å†™è„šæœ¬çš„ç¹çè¿‡ç¨‹ã€‚</p>
<p>å¯¹äºæŠ€æœ¯äººå‘˜æ¥è¯´ï¼Œåœ¨å®é™…æµ‹è¯•ç¯å¢ƒä¸­ï¼Œéœ€è¦é¢å¯¹ç™¾ä¸‡çº§ã€åƒä¸‡çº§æ•°æ®çš„å‹æµ‹ï¼Œé‡‡ç”¨ä¾¿æ·ç¨³å®šçš„å·¥å…·å¯æœ‰æ•ˆå¸®åŠ©å·¥ä½œæ•ˆç‡æå‡ï¼Œæ˜¯é¿å…çº¿ä¸Šæ•…éšœçš„æœ€ä½æˆæœ¬è·¯å¾„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€CloudBase MCP å‡çº§ç¦åˆ©ã€‘ä½ çš„AIå¼€å‘æ­å­å·²è¿›åŒ–ï¼æ™’å‡ºAI Codingé¡¹ç›®é¢†å–å‘¨è¾¹ç¤¼å“]]></title>    <link>https://juejin.cn/post/7581396828124119074</link>    <guid>https://juejin.cn/post/7581396828124119074</guid>    <pubDate>2025-12-09T02:51:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581396828124119074" data-draft-id="7581437632853786664" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€CloudBase MCP å‡çº§ç¦åˆ©ã€‘ä½ çš„AIå¼€å‘æ­å­å·²è¿›åŒ–ï¼æ™’å‡ºAI Codingé¡¹ç›®é¢†å–å‘¨è¾¹ç¤¼å“"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,å°ç¨‹åºÂ·äº‘å¼€å‘"/> <meta itemprop="datePublished" content="2025-12-09T02:51:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è…¾è®¯äº‘å¼€å‘CloudBase"/> <meta itemprop="url" content="https://juejin.cn/user/2963939080036493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€CloudBase MCP å‡çº§ç¦åˆ©ã€‘ä½ çš„AIå¼€å‘æ­å­å·²è¿›åŒ–ï¼æ™’å‡ºAI Codingé¡¹ç›®é¢†å–å‘¨è¾¹ç¤¼å“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2963939080036493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è…¾è®¯äº‘å¼€å‘CloudBase
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T02:51:55.000Z" title="Tue Dec 09 2025 02:51:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ac63b03933a4f4db110d085debde164~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5byA5Y-RQ2xvdWRCYXNl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853515&amp;x-signature=ZdxxPczG9GaMKoJSKSi9HZZhg54%3D" alt="ç¬¬äºŒç‰ˆ.png" loading="lazy"/></p>
<p>âœ¨ <strong>éœ‡æ’¼é¦–å‘</strong>ï¼šå®æµ‹CloudBase MCP ä¸‰å¤§å‡çº§ç‚¹</p>
<p>ğŸ <strong>å¥–åŠ±æœºåˆ¶</strong>ï¼šå‚ä¸æœ‰ç¤¼+å®ç‰©å‘¨è¾¹</p>
<p>ğŸ“ <strong>ç®€å•å‚ä¸</strong>ï¼šç¤¾äº¤å¹³å°å›¾æ–‡åˆ†äº«</p>
<h2 data-id="heading-0">ä¸€ã€CloudBase MCPæ›´æ–°ä»‹ç»</h2>
<p>ğŸ”—<strong>å…¬ä¼—å·é“¾æ¥ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FQM5sIbvqqw9iInGq_aNSOg" target="_blank" title="https://mp.weixin.qq.com/s/QM5sIbvqqw9iInGq_aNSOg" ref="nofollow noopener noreferrer">ä»¥é˜²ä½ ä¸çŸ¥é“....CloudBase MCPå…¨æ–°å‡çº§!</a></p>
<h2 data-id="heading-1">äºŒã€æ´»åŠ¨è¯¦æƒ…</h2>
<h4 data-id="heading-2"><strong>ğŸ“… æ´»åŠ¨æ—¶é—´ï¼š</strong></h4>
<p>å³æ—¥èµ·è‡³ 2025.12.31</p>
<h4 data-id="heading-3"><strong>ğŸ¯ å‚ä¸æ–¹å¼ï¼š</strong></h4>
<ol>
<li><strong>å½¢å¼ï¼š</strong> ğŸ¨ å›¾æ–‡çŸ­è´´</li>
<li><strong>å†…å®¹è¦æ±‚ï¼ˆåŒ…å«ä»¥ä¸‹å†…å®¹ï¼‰ï¼š</strong></li>
</ol>
<p>âœ…å‰ç«¯æŠ€æœ¯æ ˆ</p>
<p>âœ…é¡¹ç›®é“¾æ¥ï¼ˆwebï¼‰/å°ç¨‹åºä½“éªŒç‰ˆäºŒç»´ç </p>
<p>âœ…é¡¹ç›®æˆªå›¾</p>
<ol start="3">
<li><strong>å‘å¸ƒå¹³å°ï¼š</strong> å…¬ä¼—å·/CSDN/æ˜é‡‘/å°çº¢ä¹¦/<a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.com%2Fdeveloper%3Ffrom_column%3D20065%26from%3D20065" target="_blank" title="https://cloud.tencent.com/developer?from_column=20065&amp;from=20065" ref="nofollow noopener noreferrer">è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº</a>/å¾®ä¿¡å¼€æ”¾ç¤¾åŒº/çŸ¥ä¹ç­‰ä¸»æµç¤¾åŒºï¼Œæ³¨æ„äº‹é¡¹ï¼š</li>
</ol>
<ul>
<li>å¸¦ <strong>#AI</strong> <strong>#CloudBase</strong> è¯é¢˜ + æ´»åŠ¨é“¾æ¥</li>
<li>å‘å¸–å†…å®¹éœ€ç¬¦åˆä¸Šè¿°è¦æ±‚å¹¶åœ¨ç¤¾äº¤å¹³å°å…¬å¼€å¯è§</li>
</ul>
<ol start="4">
<li><strong>æäº¤å®¡æ ¸ï¼š</strong></li>
</ol>
<ul>
<li>åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.com%2Fdeveloper%2Farticle%2F2598128" target="_blank" title="https://cloud.tencent.com/developer/article/2598128" ref="nofollow noopener noreferrer">æ´»åŠ¨è´´</a>ä¸‹æ–¹è¯„è®ºä½ çš„å›¾æ–‡è´´é“¾æ¥</li>
</ul>
<h4 data-id="heading-4">âœ”ï¸æŠ•ç¨¿ç¤ºä¾‹</h4>
<p><strong>æ ‡é¢˜ï¼š</strong> ä¸‰åˆ†é’Ÿï¼Œç”¨ AI å’Œ CloudBase æå®šä¸€ä¸ªæ—¥è®°å¹³å°</p>
<p><strong>é¡¹ç›®ä»‹ç»ï¼š</strong></p>
<p>æˆ‘åˆ›å»ºäº†ä¸€ä¸ªä¸ªäººæ—¥è®°å¹³å°ï¼Œè®©ç”¨æˆ·å¯ä»¥å®‰å…¨åœ°è®°å½•å’Œæ•´ç†ä¸ªäººæ—¥è®°ã€‚å¹³å°éœ€è¦æä¾›æ—¥è®°æ’°å†™ã€ç¼–è¾‘ã€åˆ†ç±»å’Œæœç´¢åŠŸèƒ½ï¼Œç¡®ä¿ç”¨æˆ·æ•°æ®åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.com%2Fproduct%2Ftencentdb-catalog%3Ffrom_column%3D20065%26from%3D20065" target="_blank" title="https://cloud.tencent.com/product/tencentdb-catalog?from_column=20065&amp;from=20065" ref="nofollow noopener noreferrer">äº‘æ•°æ®åº“</a>ä¸­å®‰å…¨å­˜å‚¨ã€‚</p>
<p>å‰ç«¯ä½¿ç”¨CodeBuddy IDE</p>
<p>âš¡æŠ€æœ¯æ ˆï¼šVue3 + Tailwind CSS +DaisyUI ç»„ä»¶åº“</p>
<p>åç«¯æ·±åº¦é›†æˆ CloudBase</p>
<p><strong>âš¡</strong>èµ„æºï¼šèº«ä»½è®¤è¯+äº‘æ•°æ®åº“+äº‘å‡½æ•°+äº‘å­˜å‚¨+<a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.com%2Fproduct%2Fwh%3Ffrom_column%3D20065%26from%3D20065" target="_blank" title="https://cloud.tencent.com/product/wh?from_column=20065&amp;from=20065" ref="nofollow noopener noreferrer">é™æ€ç½‘ç«™æ‰˜ç®¡</a></p>
<p><strong>é¡¹ç›®é“¾æ¥ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.com%2Fdeveloper%2Ftools%2Fblog-entry%3Ftarget%3Dhttps%253A%252F%252Fcloud1-3gfjcny824250a72-1348325138.tcloudbaseapp.com%252F%26objectId%3D2598128%26objectType%3D1%26contentType%3Dundefined" target="_blank" title="https://cloud.tencent.com/developer/tools/blog-entry?target=https%3A%2F%2Fcloud1-3gfjcny824250a72-1348325138.tcloudbaseapp.com%2F&amp;objectId=2598128&amp;objectType=1&amp;contentType=undefined" ref="nofollow noopener noreferrer">cloud-1348325.tcloudbaseapp.com/</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d9556879a874957b986771798e86610~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5byA5Y-RQ2xvdWRCYXNl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853515&amp;x-signature=jqHhx6nEl0jzdH6jaJHLLRr4Ocs%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3bacc0f9c65f4862a2a3d73d3dcdb667~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IW-6K6v5LqR5byA5Y-RQ2xvdWRCYXNl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853515&amp;x-signature=iIcfcqD5NpF3WdHIrsO8BT6yLZg%3D" alt="" loading="lazy"/></p>
<p><strong>æ´»åŠ¨é“¾æ¥ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.com%2Fdeveloper%2Farticle%2F2598128" target="_blank" title="https://cloud.tencent.com/developer/article/2598128" ref="nofollow noopener noreferrer">cloud.tencent.com/developer/aâ€¦</a></p>
<p><strong>è¯é¢˜ï¼š</strong> #AI #CloudBase #CloudBase AI Toolkit #MCP</p>
<h3 data-id="heading-5"><strong>ä¸‰ã€ å¥–åŠ±å‘æ”¾</strong></h3>
<h4 data-id="heading-6"><strong>ğŸ’°å¥–åŠ±ç±»å‹</strong></h4>
<ul>
<li>
<p><strong>ğŸ’´åŸºç¡€å¥–åŠ±ï¼Œå‚ä¸æœ‰ç¤¼</strong></p>
<ul>
<li>10å…ƒæ— é—¨æ§›ä»£é‡‘åˆ¸</li>
</ul>
</li>
<li>
<p><strong>ğŸ†äººæ°”æ’è¡Œæ¦œï¼Œå‰æ’é¢†å–å®ç‰©å‘¨è¾¹</strong></p>
<ul>
<li>ç‚¹èµå‰ä¸‰åï¼šTencent Store è“è‰²åŒè‚©åŒ… / æ¼«æ­¥è€…éŸ³ç®±</li>
<li>ç‚¹èµå‰ååï¼šCloudBaseå‘¨è¾¹Tæ¤ / ç‹è€…è£è€€è”åè€³æœº</li>
</ul>
</li>
</ul>
<h4 data-id="heading-7"><strong>ğŸ“¦é¢†å–æ–¹å¼</strong></h4>
<p>â³ <strong>åŸºç¡€å¥–åŠ±ï¼š</strong> è¯„è®ºå 3-5ä¸ªå·¥ä½œæ—¥ å®Œæˆå®¡æ ¸ï¼Œå®¡æ ¸é€šè¿‡åå‘æ”¾åŸºç¡€å¥–åŠ±ã€‚</p>
<p>ğŸ <strong>äººæ°”æ’è¡Œï¼š</strong></p>
<ul>
<li>2025.12.31åœ¨æœ¬è´´å…¬å¸ƒè·å¥–åå•</li>
<li>æ·»åŠ äº‘å¼€å‘å°åŠ©æ‰‹å¾®ä¿¡ï¼Œç•™è¨€ <strong>â€œé¢†å–CloudBaseæ´»åŠ¨å¥–åŠ±â€+å‘¨è¾¹å¯„é€åœ°å€</strong></li>
</ul>
<p>ï¼ˆç‚¹å‡»é“¾æ¥æ·»åŠ å¾®ä¿¡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.com%2Fdeveloper%2Ftools%2Fblog-entry%3Ftarget%3Dhttps%253A%252F%252Fwork.weixin.qq.com%252Fca%252Fcawcde5408715d2d8a%26objectId%3D2594472%26objectType%3D1%26contentType%3Dundefined%26from_column%3D20421%26from%3D20421" target="_blank" title="https://cloud.tencent.com/developer/tools/blog-entry?target=https%3A%2F%2Fwork.weixin.qq.com%2Fca%2Fcawcde5408715d2d8a&amp;objectId=2594472&amp;objectType=1&amp;contentType=undefined&amp;from_column=20421&amp;from=20421" ref="nofollow noopener noreferrer">work.weixin.qq.com/ca/cawcde54â€¦</a>ï¼‰</p>
<h3 data-id="heading-8"><strong>å››ã€æ³¨æ„äº‹é¡¹</strong></h3>
<p>â— æŠ•ç¨¿ä½œå“ä¸å¯ä¸å¾€æœŸæ´»åŠ¨æˆ–æœ¬æœŸæ´»åŠ¨é‡å¤</p>
<p>â³ ä»£é‡‘åˆ¸è‡ªé¢†å–ä¹‹æ—¥èµ·30å¤©å†…æœ‰æ•ˆï¼ˆè¿‡æœŸä½œåºŸï¼‰</p>
<p>â“ å¦‚æœ‰ç–‘é—®ï¼Œè¯·è”ç³»å®¢æœæˆ–æäº¤issue <a href="https://link.juejin.cn?target=https%3A%2F%2Fcnb.cool%2Fgoto%3Furl%3Dhttps%253A%252F%252Ftcb.cloud.tencent.com%252Fhelp-center%26from_column%3D20421%26from%3D20421" target="_blank" title="https://cnb.cool/goto?url=https%3A%2F%2Ftcb.cloud.tencent.com%2Fhelp-center&amp;from_column=20421&amp;from=20421" ref="nofollow noopener noreferrer">tcb.cloud.tencent.com/help-center</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring çš„æœ¬åœ°æ¶ˆæ¯]]></title>    <link>https://juejin.cn/post/7581619505584046131</link>    <guid>https://juejin.cn/post/7581619505584046131</guid>    <pubDate>2025-12-09T02:51:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581619505584046131" data-draft-id="7581470169839714342" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring çš„æœ¬åœ°æ¶ˆæ¯"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-12-09T02:51:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="wh_cxy"/> <meta itemprop="url" content="https://juejin.cn/user/616169381574343"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring çš„æœ¬åœ°æ¶ˆæ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/616169381574343/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    wh_cxy
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T02:51:10.000Z" title="Tue Dec 09 2025 02:51:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è§‚å¯Ÿè€…æ¨¡å¼ã€äº‹ä»¶é€šçŸ¥æœºåˆ¶å’Œ Spring çš„æœ¬åœ°æ¶ˆæ¯æœºåˆ¶ä¸‰è€…ä¹‹é—´å­˜åœ¨æ˜ç¡®çš„å®ç°å…³ç³»ï¼Œå…·ä½“æ¥è¯´ï¼š</p>
<h2 data-id="heading-0">1. <strong>è§‚å¯Ÿè€…æ¨¡å¼ä¸äº‹ä»¶é€šçŸ¥æœºåˆ¶çš„å…³ç³»</strong></h2>
<ul>
<li><strong>è§‚å¯Ÿè€…æ¨¡å¼æ˜¯äº‹ä»¶é€šçŸ¥æœºåˆ¶çš„å…·ä½“å®ç°æ–¹å¼ä¹‹ä¸€</strong></li>
<li>äº‹ä»¶é©±åŠ¨ç¼–ç¨‹æ˜¯ä¸€ç§æ¶æ„èŒƒå¼ï¼Œè€Œè§‚å¯Ÿè€…æ¨¡å¼æ˜¯å®ç°è¿™ç§èŒƒå¼çš„å…·ä½“è®¾è®¡æ‰‹æ®µ</li>
<li>äº‹ä»¶é€šçŸ¥æœºåˆ¶é€šå¸¸é‡‡ç”¨"å‘å¸ƒ-è®¢é˜…"æ¨¡å¼ï¼Œè¿™æ­£æ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„å…¸å‹åº”ç”¨åœºæ™¯</li>
</ul>
<h2 data-id="heading-1">2. <strong>Spring äº‹ä»¶æœºåˆ¶ç¡®å®ä½¿ç”¨äº†è§‚å¯Ÿè€…æ¨¡å¼</strong></h2>
<p>Spring æ¡†æ¶çš„<strong>äº‹ä»¶é©±åŠ¨æœºåˆ¶</strong>ï¼ˆApplicationEventï¼‰æ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„<strong>æ ‡å‡†å®ç°</strong>ï¼š</p>






























<table><thead><tr><th>Spring ç»„ä»¶</th><th>è§‚å¯Ÿè€…æ¨¡å¼è§’è‰²</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>ApplicationContext</code></td><td>äº‹ä»¶æºï¼ˆSubjectï¼‰</td><td>è§¦å‘äº‹ä»¶çš„ä¸»ä½“ï¼Œç»§æ‰¿è‡ª <code>ApplicationEventPublisher</code></td></tr><tr><td><code>ApplicationEvent</code></td><td>äº‹ä»¶ï¼ˆäº‹ä»¶å¯¹è±¡ï¼‰</td><td>ç»§æ‰¿è‡ª JDK çš„ <code>EventObject</code>ï¼Œæºå¸¦äº‹ä»¶æ•°æ®</td></tr><tr><td><code>ApplicationListener</code></td><td>è§‚å¯Ÿè€…ï¼ˆObserverï¼‰</td><td>ç›‘å¬ç‰¹å®šäº‹ä»¶ï¼Œäº‹ä»¶å‘ç”Ÿæ—¶ <code>onApplicationEvent()</code> æ–¹æ³•è¢«å›è°ƒ</td></tr><tr><td><code>ApplicationEventMulticaster</code></td><td>äº‹ä»¶å¹¿æ’­å™¨</td><td>è´Ÿè´£æ³¨å†Œç›‘å¬å™¨å’Œå¹¿æ’­äº‹ä»¶ï¼Œè§£è€¦å‘å¸ƒè€…å’Œè®¢é˜…è€…</td></tr></tbody></table>
<h2 data-id="heading-2">3. <strong>"Spring æœ¬åœ°æ¶ˆæ¯"çš„ç†è§£</strong></h2>
<p>æ‚¨æåˆ°çš„"Spring æœ¬åœ°æ¶ˆæ¯"é€šå¸¸æŒ‡çš„æ˜¯<strong>Spring äº‹ä»¶æœºåˆ¶</strong>ï¼ˆè¿›ç¨‹å†…äº‹ä»¶é€šçŸ¥ï¼‰ï¼Œä¸è·¨è¿›ç¨‹çš„ MQ æ¶ˆæ¯é˜Ÿåˆ—ä¸åŒï¼š</p>
<ul>
<li><strong>åŒä¸€ JVM è¿›ç¨‹å†…</strong>çš„ç»„ä»¶è§£è€¦é€šä¿¡</li>
<li>é€šè¿‡ <code>ApplicationEventPublisher.publishEvent()</code> å‘å¸ƒäº‹ä»¶</li>
<li>ç›‘å¬å™¨é€šè¿‡ <code>@EventListener</code> æ³¨è§£æˆ–å®ç° <code>ApplicationListener</code> æ¥å£æ¥æ¥æ”¶é€šçŸ¥</li>
</ul>
<h2 data-id="heading-3">å…¸å‹åº”ç”¨åœºæ™¯</h2>
<p>ä¾‹å¦‚ç”¨æˆ·æ³¨å†ŒæˆåŠŸåï¼Œéœ€è¦åŒæ—¶å‘é€çŸ­ä¿¡ã€é‚®ä»¶å’Œä¼˜æƒ åˆ¸ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å‘å¸ƒäº‹ä»¶</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-meta">@Autowired</span> <span class="hljs-keyword">private</span> ApplicationEventPublisher publisher;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">register</span><span class="hljs-params">(String username)</span> {
        <span class="hljs-comment">// ä¿å­˜ç”¨æˆ·...</span>
        publisher.publishEvent(<span class="hljs-keyword">new</span> <span class="hljs-title class_">UserRegisterEvent</span>(<span class="hljs-built_in">this</span>, username));
    }
}

<span class="hljs-comment">// ç›‘å¬äº‹ä»¶ï¼ˆå¤šä¸ªè§‚å¯Ÿè€…ï¼‰</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmailListener</span> {
    <span class="hljs-meta">@EventListener</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendEmail</span><span class="hljs-params">(UserRegisterEvent event)</span> { <span class="hljs-comment">/* ... */</span> }
}

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SmsListener</span> {
    <span class="hljs-meta">@EventListener</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendSms</span><span class="hljs-params">(UserRegisterEvent event)</span> { <span class="hljs-comment">/* ... */</span> }
}
</code></pre>
<p><strong>æ€»ç»“</strong>ï¼šäº‹ä»¶é€šçŸ¥æœºåˆ¶é€šå¸¸åŸºäºè§‚å¯Ÿè€…æ¨¡å¼å®ç°ï¼Œè€Œ Spring çš„äº‹ä»¶æœºåˆ¶ï¼ˆå³æ‚¨è¯´çš„"æœ¬åœ°æ¶ˆæ¯"ï¼‰æ­£æ˜¯è¿™ä¸€æ¨¡å¼çš„å…¸å‹åº”ç”¨ï¼Œæä¾›äº†è¿›ç¨‹å†…ç»„ä»¶é—´æ¾è€¦åˆé€šä¿¡çš„èƒ½åŠ›ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ Spring äº‹ä»¶æœºåˆ¶ä¸­å„ç»„ä»¶åä½œå…³ç³»çš„æµç¨‹å›¾ï¼Œå®Œæ•´å±•ç¤ºäº†ä»äº‹ä»¶å‘å¸ƒåˆ°å¤„ç†çš„å…¨ç”Ÿå‘½å‘¨æœŸï¼š</p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Spring å®¹å™¨åˆå§‹åŒ–é˜¶æ®µ                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  <span class="hljs-number">1</span>. æ‰«æå¹¶å‘ç°æ‰€æœ‰ ApplicationListener å®ç°ç±»ï¼ˆå¦‚ EmailListenerï¼‰          â”‚
â”‚  <span class="hljs-number">2</span>. å°†ç›‘å¬å™¨æ³¨å†Œåˆ° ApplicationEventMulticaster çš„æ³¨å†Œè¡¨                  â”‚
â”‚     ï¼ˆå†…éƒ¨ç»´æŠ¤ Map&lt;Class&lt;?&gt;, List&lt;ApplicationListener&gt;&gt; æ˜ å°„å…³ç³»ï¼‰       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        è¿è¡Œæ—¶äº‹ä»¶å‘å¸ƒå¤„ç†æµç¨‹                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  ç”¨æˆ·æ³¨å†Œä¸šåŠ¡é€»è¾‘å®Œæˆ           â”‚                                  â”‚
     â”‚                               â–¼                                  â”‚
     â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
     â”‚              â”‚ ApplicationContext (ConcreteSubject)â”‚            â”‚
     â”‚              â”‚   - äº‹ä»¶å‘å¸ƒå…¥å£                     â”‚            â”‚
     â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
     â”‚                               â”‚ <span class="hljs-built_in">publishEvent</span>()                    â”‚
     â”‚                               â–¼                                  â”‚
     â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
     â”‚              â”‚  UserRegisterEvent (ConcreteEvent)  â”‚            â”‚
     â”‚              â”‚   - å°è£…äº‹ä»¶æ•°æ®ï¼ˆç”¨æˆ·ã€æ—¶é—´æˆ³ç­‰ï¼‰        â”‚            â”‚
     â”‚              â”‚   - extends ApplicationEvent        â”‚            â”‚
     â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
     â”‚                               â”‚                                  â”‚
     â”‚                               â–¼                                  â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚                                  â”‚
                                    â”‚                                  â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
     â”‚         ApplicationEventMulticaster (äº‹ä»¶å¹¿æ’­å™¨)               â”‚    â”‚
     â”‚         - ç®¡ç†æ‰€æœ‰ç›‘å¬å™¨æ³¨å†Œè¡¨                                   â”‚    â”‚
     â”‚         - åŒ¹é…äº‹ä»¶ç±»å‹ä¸ç›‘å¬å™¨                                   â”‚    â”‚
     â”‚                                                               â”‚    â”‚
     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
     â”‚  â”‚  <span class="hljs-number">1</span>. æ¥æ”¶äº‹ä»¶                                              â”‚ â”‚    â”‚
     â”‚  â”‚  <span class="hljs-number">2</span>. æ ¹æ®äº‹ä»¶ç±»å‹ UserRegisterEvent æŸ¥æ‰¾åŒ¹é…çš„ç›‘å¬å™¨åˆ—è¡¨   â”‚ â”‚    â”‚
     â”‚  â”‚  <span class="hljs-number">3</span>. éå†è°ƒç”¨ç›‘å¬å™¨å›è°ƒæ–¹æ³•                                â”‚ â”‚    â”‚
     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                                   â”‚                                  â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
              â”‚                   â”‚                   â”‚              â”‚
              â–¼                   â–¼                   â–¼              â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
     â”‚ EmailListener   â”‚ â”‚ CouponListener  â”‚ â”‚ SmsListener     â”‚     â”‚
     â”‚  (è§‚å¯Ÿè€…<span class="hljs-number">1</span>)        â”‚ â”‚  (è§‚å¯Ÿè€…<span class="hljs-number">2</span>)        â”‚ â”‚  (è§‚å¯Ÿè€…<span class="hljs-number">3</span>)        â”‚     â”‚
     â”‚                 â”‚ â”‚                 â”‚ â”‚                 â”‚     â”‚
     â”‚onApplicationEventâ”‚ â”‚onApplicationEventâ”‚ â”‚onApplicationEventâ”‚     â”‚
     â”‚                 â”‚ â”‚                 â”‚ â”‚                 â”‚     â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
              â”‚                   â”‚                   â”‚              â”‚
              â”‚                   â”‚                   â”‚              â”‚
              â–¼                   â–¼                   â–¼              â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
     â”‚              ä¸šåŠ¡å¤„ç†ï¼ˆå‘é€é‚®ä»¶ã€å‘æ”¾ä¼˜æƒ åˆ¸ã€å‘é€çŸ­ä¿¡ï¼‰           â”‚    â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                                                                       â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
     â”‚              <span class="hljs-keyword">@Async</span> å¯é€‰ï¼šå¼‚æ­¥çº¿ç¨‹æ± æ‰§è¡Œç›‘å¬å™¨é€»è¾‘                â”‚    â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
</code></pre>
<h2 data-id="heading-4">å…³é”®åä½œå…³ç³»è¯´æ˜</h2>
<h3 data-id="heading-5">1. <strong>ApplicationContext (ConcreteSubject)</strong></h3>
<ul>
<li><strong>èŒè´£</strong>ï¼šä½œä¸ºäº‹ä»¶å‘å¸ƒå…¥å£ï¼ŒæŒæœ‰ <code>ApplicationEventPublisher</code> æ¥å£</li>
<li><strong>æ ¸å¿ƒæ–¹æ³•</strong>ï¼š<code>publishEvent(event)</code></li>
<li><strong>ä½ç½®</strong>ï¼šç»§æ‰¿è‡ª <code>ApplicationEventPublisher</code> æ¥å£ï¼Œå®é™…è°ƒç”¨å§”æ‰˜ç»™ Multicaster</li>
</ul>
<h3 data-id="heading-6">2. <strong>UserRegisterEvent (ConcreteEvent)</strong></h3>
<ul>
<li><strong>èŒè´£</strong>ï¼šå°è£…å…·ä½“ä¸šåŠ¡æ•°æ®ï¼Œç»§æ‰¿è‡ª <code>ApplicationEvent</code></li>
<li><strong>å…³é”®å±æ€§</strong>ï¼š<code>source</code>ï¼ˆäº‹ä»¶æºå¯¹è±¡ï¼‰ã€<code>timestamp</code>ï¼ˆå‘å¸ƒæ—¶é—´ï¼‰</li>
<li><strong>ä½œç”¨</strong>ï¼šä½œä¸ºè½½ä½“åœ¨ç»„ä»¶é—´ä¼ é€’ä¿¡æ¯</li>
</ul>
<h3 data-id="heading-7">3. <strong>ApplicationEventMulticaster (äº‹ä»¶å¹¿æ’­å™¨æ ¸å¿ƒ)</strong></h3>
<ul>
<li><strong>æœ¬è´¨</strong>ï¼šè§‚å¯Ÿè€…æ¨¡å¼ä¸­çš„ <strong>"è°ƒåº¦ä¸­å¿ƒ"</strong></li>
<li><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼š
<ul>
<li><strong>æ³¨å†Œ</strong>ï¼š<code>addApplicationListener()</code> ç®¡ç†æ‰€æœ‰ç›‘å¬å™¨åˆ—è¡¨</li>
<li><strong>åŒ¹é…</strong>ï¼šæ ¹æ®äº‹ä»¶ç±»å‹åŠ¨æ€ç­›é€‰åŒ¹é…çš„ <code>ApplicationListener</code></li>
<li><strong>å¹¿æ’­</strong>ï¼š<code>multicastEvent()</code> éå†è°ƒç”¨ç›‘å¬å™¨å›è°ƒ</li>
</ul>
</li>
<li><strong>å®ç°ç±»</strong>ï¼šé»˜è®¤ä½¿ç”¨ <code>SimpleApplicationEventMulticaster</code>ï¼Œæ”¯æŒåŒæ­¥/å¼‚æ­¥å¹¿æ’­</li>
</ul>
<h3 data-id="heading-8">4. <strong>ApplicationListener (Observer)</strong></h3>
<ul>
<li><strong>èŒè´£</strong>ï¼šäº‹ä»¶å¤„ç†é€»è¾‘è½½ä½“</li>
<li><strong>ä¸¤ç§å®ç°æ–¹å¼</strong>ï¼š
<ul>
<li><strong>æ¥å£å®ç°</strong>ï¼šå®ç° <code>ApplicationListener&lt;UserRegisterEvent&gt;</code> æ¥å£</li>
<li><strong>æ³¨è§£æ–¹å¼</strong>ï¼šä½¿ç”¨ <code>@EventListener</code> æ³¨è§£æ–¹æ³•ï¼ˆæ¨èï¼‰</li>
</ul>
</li>
<li><strong>æ‰©å±•èƒ½åŠ›</strong>ï¼šæ”¯æŒ <code>@Order</code> æ§åˆ¶æ‰§è¡Œé¡ºåºã€<code>@Async</code> å¼‚æ­¥æ‰§è¡Œ</li>
</ul>
<h2 data-id="heading-9">æ—¶åºæµç¨‹ï¼ˆç®€åŒ–ç‰ˆï¼‰</h2>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant UserService as ç”¨æˆ·æœåŠ¡
    participant Context as ApplicationContext
    participant Event as UserRegisterEvent
    participant Multicaster as ApplicationEventMulticaster
    participant Listeners as ApplicationListeneråˆ—è¡¨

    UserService-&gt;&gt;Context: registerUser()
    Context-&gt;&gt;Event: åˆ›å»ºäº‹ä»¶å¯¹è±¡
    Context-&gt;&gt;Multicaster: publishEvent(event)
    Multicaster-&gt;&gt;Listeners: multicastEvent(event)
    loop å¯¹æ¯ä¸ªåŒ¹é…çš„ç›‘å¬å™¨
        Multicaster-&gt;&gt;Listeners: onApplicationEvent(event)
        Listeners--&gt;&gt;Listeners: å¤„ç†ä¸šåŠ¡é€»è¾‘
    end
    Listeners--&gt;&gt;Multicaster: è¿”å›
    Multicaster--&gt;&gt;Context: è¿”å›
    Context--&gt;&gt;UserService: å®Œæˆ
</code></pre>
<hr/>
<p><strong>æ€»ç»“</strong>ï¼š<code>ApplicationEventMulticaster</code> ä½œä¸º<strong>æ ¸å¿ƒè°ƒåº¦å™¨</strong>ï¼Œåœ¨å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¹‹é—´å®ç°äº†<strong>è§£è€¦</strong>ï¼Œæ˜¯æ•´ä¸ªè§‚å¯Ÿè€…æ¨¡å¼èƒ½å¤Ÿçµæ´»è¿ä½œçš„ä¸­æ¢ç¥ç»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ£€æµ‹å¼€å‘è€…å·¥å…·æ˜¯å¦æ‰“å¼€ï¼Ÿè¿™å‡ ç§æ–¹æ³•è®©é»‘å®¢æ— å¤„éå½¢ğŸ¤£]]></title>    <link>https://juejin.cn/post/7581619505584128051</link>    <guid>https://juejin.cn/post/7581619505584128051</guid>    <pubDate>2025-12-09T02:54:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581619505584128051" data-draft-id="7581374664327315507" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ£€æµ‹å¼€å‘è€…å·¥å…·æ˜¯å¦æ‰“å¼€ï¼Ÿè¿™å‡ ç§æ–¹æ³•è®©é»‘å®¢æ— å¤„éå½¢ğŸ¤£"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2025-12-09T02:54:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ErpanOmer"/> <meta itemprop="url" content="https://juejin.cn/user/3878732754331096"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ£€æµ‹å¼€å‘è€…å·¥å…·æ˜¯å¦æ‰“å¼€ï¼Ÿè¿™å‡ ç§æ–¹æ³•è®©é»‘å®¢æ— å¤„éå½¢ğŸ¤£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3878732754331096/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ErpanOmer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T02:54:42.000Z" title="Tue Dec 09 2025 02:54:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5be74d43fd534de5a4dd96ea18a2075a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853682&amp;x-signature=OiOSXoPShXsr5SztLkLwb%2Fh3A4I%3D" alt="image.png" loading="lazy"/></p>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ¥äº†ğŸ˜ã€‚</p>
<p><strong>å‰ç«¯ä»£ç åœ¨æµè§ˆå™¨é‡Œæ˜¯è£¸å¥”çš„ã€‚</strong>â€”â€”è¿™å‡ ä¹æ˜¯æ‰€æœ‰å¼€å‘è€…çš„å…±è¯†ã€‚</p>
<p>åªè¦ç”¨æˆ·æŒ‰ä¸€ä¸‹ <code>F12</code>ï¼Œä½ çš„æºç ã€ä½ çš„æ¥å£ã€ä½ çš„æ•°æ®ç»“æ„ï¼Œå…¨éƒ¨ä¸€è§ˆæ— ä½™ã€‚é»‘å®¢å¯ä»¥ä¿®æ”¹ä½ çš„å˜é‡ï¼Œè„šæœ¬å°å­å¯ä»¥åˆ·ä½ çš„æ¥å£ï¼Œç«å“å¯ä»¥åˆ†æä½ çš„é€»è¾‘ã€‚</p>
<p>å¾ˆå¤šè€æ¿ä¼šé—®ï¼šèƒ½ä¸èƒ½ç¦æ­¢ç”¨æˆ·æ‰“å¼€æ§åˆ¶å°ï¼Ÿ</p>
<p>é€šå¸¸æˆ‘ä»¬çš„å›ç­”æ˜¯ï¼šä¸èƒ½ã€‚æµè§ˆå™¨æ˜¯ç”¨æˆ·çš„åœ°ç›˜ï¼Œæˆ‘ä»¬æ— æƒå¹²æ¶‰ã€‚</p>
<p>ä½†æ˜¯ï¼Œ <strong>ç¦æ­¢ä¸äº†ï¼Œä¸ä»£è¡¨æˆ‘ä»¬æ£€æµ‹ä¸åˆ°ã€‚</strong></p>
<p>å¦‚æœåœ¨æ£€æµ‹åˆ°ç”¨æˆ·æ‰“å¼€ DevTools çš„é‚£ä¸€ç¬é—´ï¼Œæˆ‘ä»¬ç«‹é©¬<strong>æ¸…ç©ºæ•æ„Ÿæ•°æ®</strong>ã€<strong>åœæ­¢è§†é¢‘æ’­æ”¾</strong>ã€æˆ–è€…<strong>æ— é™ debugger å¡æ­»é¡µé¢</strong>ï¼Œæ˜¯ä¸æ˜¯å°±èƒ½æå¤§åœ°æé«˜æ”»å‡»è€…çš„é—¨æ§›ï¼ŸğŸ¤”</p>
<p>ä»Šå¤©ï¼Œæˆ‘å°±æ¥åˆ†äº«å‡ ç§åˆ©ç”¨æµè§ˆå™¨APIæŠ€å·§å®ç°çš„ <strong>DevTools æ£€æµ‹æŠ€æœ¯</strong>ã€‚</p>
<hr/>
<h4 data-id="heading-0"><strong>1.åˆ©ç”¨ <code>debugger</code> çš„æ—¶é—´å·®</strong></h4>
<p>è¿™æ˜¯æœ€å¤è€ã€æœ€æš´åŠ›ï¼Œä½†ä¹Ÿæœ€æœ‰æ•ˆçš„æ–¹æ³•ä¹‹ä¸€ã€‚</p>
<p>åŸç†ï¼š</p>
<p>å½“ DevTools æ‰“å¼€ï¼Œå¹¶ä¸”å¼€å¯äº†æ–­ç‚¹è°ƒè¯•åŠŸèƒ½æ—¶ï¼Œä»£ç æ‰§è¡Œåˆ° debugger è¯­å¥ä¼šæš‚åœã€‚</p>
<p>è€Œä¸æ‰“å¼€ DevTools æ—¶ï¼Œdebugger è¯­å¥ä¼šè¢«æµè§ˆå™¨å¿½ç•¥ï¼Œä»£ç ç¬é—´æ‰§è¡Œè¿‡å»ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥è®°å½• <code>debugger</code> è¯­å¥å‰åçš„<strong>æ—¶é—´æˆ³</strong>ã€‚å¦‚æœå·®å€¼è¿‡å¤§ï¼Œè¯´æ˜ä»£ç è¢«æš‚åœäº†â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼ŒDevTools è‚¯å®šæ˜¯å¼€ç€çš„ã€‚</p>
<p><strong>å…·ä½“ä»£ç ğŸ‘‡ï¼š</strong></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">checkDevTools</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> start = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
  
  <span class="hljs-comment">// æ ¸å¿ƒï¼šè¿™å°±å¥½æ¯”åœ¨è·¯ä¸Šè®¾ä¸ªå¡</span>
  <span class="hljs-keyword">debugger</span>; 
  
  <span class="hljs-keyword">const</span> end = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
  
  <span class="hljs-comment">// å¦‚æœæš‚åœæ—¶é—´è¶…è¿‡ 100msï¼Œåˆ¤å®šä¸ºæœ‰äººåœ¨è°ƒè¯•</span>
  <span class="hljs-keyword">if</span> (end - start &gt; <span class="hljs-number">100</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è­¦å‘Šï¼šæ£€æµ‹åˆ°å¼€å‘è€…å·¥å…·å·²æ‰“å¼€ï¼"</span>);
    <span class="hljs-comment">// è¿™é‡Œå¯ä»¥æ‰§è¡Œä½ çš„é˜²å¾¡é€»è¾‘ï¼š</span>
    <span class="hljs-comment">// window.location.reload(); </span>
    <span class="hljs-comment">// clearSensitiveData();</span>
  }
}

<span class="hljs-comment">// æä¸ªå®šæ—¶å™¨ï¼Œæ¯ç§’æŸ¥å²—ä¸€æ¬¡</span>
<span class="hljs-built_in">setInterval</span>(checkDevTools, <span class="hljs-number">1000</span>);
</code></pre>
<p>ä¼˜ç‚¹æ˜¯ç®€å•ç²—æš´ï¼Œå¯¹ä»˜å°ç™½æœ‰æ•ˆã€‚</p>
<p>ç¼ºç‚¹çš„è¯ æœ‰ç‚¹æ‰°æ°‘ğŸ˜–ã€‚å¦‚æœæ”»å‡»è€…ç¦ç”¨äº†æ–­ç‚¹åŠŸèƒ½ï¼ˆDeactivate breakpointsï¼‰ï¼Œæˆ–è€…è®¾ç½®âš™ä¸­é…ç½®äº†Never pause hereï¼Œè¿™æ‹›å°±åºŸäº†ã€‚</p>
<hr/>
<h4 data-id="heading-1"><strong>2.åˆ©ç”¨ <code>console.log</code> çš„å¯¹è±¡æ‡’åŠ è½½</strong></h4>
<p>è¿™æ˜¯ä¸€ä¸ªéå¸¸éªšçš„æ£€æµ‹æ–¹æ³•ï¼Œåˆ©ç”¨äº† Chrome æ§åˆ¶å°çš„ä¸€ä¸ªç‰¹æ€§ï¼š<strong>å¯¹è±¡æ±‚å€¼ï¼ˆObject Evaluationï¼‰</strong> ã€‚</p>
<p>åŸç†ï¼š</p>
<p>å½“ä½ æ‰§è¡Œ console.log(obj) æ—¶ï¼Œæµè§ˆå™¨ä¸ºäº†æ€§èƒ½ï¼Œå¹¶ä¸ä¼šç«‹åˆ»æŠŠ obj çš„æ‰€æœ‰å±æ€§æ‰“å°å‡ºæ¥ã€‚å®ƒåªæ‰“å°ä¸€ä¸ªå¼•ç”¨ã€‚</p>
<p>åªæœ‰å½“æ§åˆ¶å°çœŸçš„æ˜¯æ‰“å¼€çŠ¶æ€ï¼Œå¹¶ä¸”éœ€è¦æ˜¾ç¤ºå†…å®¹æ—¶ï¼Œæµè§ˆå™¨æ‰ä¼šå»è¯»å–è¿™ä¸ªå¯¹è±¡çš„å±æ€§ï¼ˆgettersï¼‰ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ç»™ä¸€ä¸ªå¯¹è±¡å®šä¹‰ä¸€ä¸ª <code>getter</code>ï¼ˆè¯»å–å™¨ï¼‰ã€‚å¦‚æœè¿™ä¸ª <code>getter</code> è¢«è§¦å‘äº†ï¼Œå°±è¯´æ˜<strong>æœ‰ä¸€ä¸ªè§‚å¯Ÿè€…ï¼ˆDevToolsï¼‰æ­£åœ¨çœ‹å®ƒ</strong>ã€‚</p>
<p><strong>ç›´æ¥ä¸Šä»£ç ğŸ‘‡ï¼š</strong></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> element = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>();

<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(element, <span class="hljs-string">'id'</span>, {
  <span class="hljs-attr">get</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-comment">// åªæœ‰å½“ DevTools æ‰“å¼€æ—¶ï¼Œæµè§ˆå™¨å°è¯•è·å– element.id æ¥æ˜¾ç¤ºè¯¦æƒ…</span>
    <span class="hljs-comment">// è¿™ä¸ª getter æ‰ä¼šæ‰§è¡Œ</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æŠ“åˆ°ä½ äº†ï¼DevTools æ˜¯å¼€ç€çš„ï¼'</span>);
    
    <span class="hljs-comment">// æ‰§è¡Œé˜²å¾¡é€»è¾‘</span>
    <span class="hljs-title function_">alert</span>(<span class="hljs-string">'è¯·å…³é—­å¼€å‘è€…å·¥å…·ç»§ç»­æµè§ˆï¼'</span>);
    
    <span class="hljs-keyword">return</span> <span class="hljs-string">'detected'</span>;
  }
});

<span class="hljs-comment">// å®šæ—¶æ‰“å°è¿™ä¸ª element</span>
<span class="hljs-comment">// å¦‚æœæ§åˆ¶å°æ²¡å¼€ï¼Œlog åªæ˜¯é™é»˜æ‰§è¡Œï¼Œä¸ä¼šè§¦å‘ getter</span>
<span class="hljs-comment">// å¦‚æœæ§åˆ¶å°å¼€äº†ï¼Œlog ä¸ºäº†æ˜¾ç¤º element çš„è¯¦æƒ…ï¼Œä¼šè§¦å‘ getter</span>
<span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(element);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">clear</span>(); <span class="hljs-comment">// åˆ·å±æ¸…ç©ºï¼Œé˜²æ­¢ç”¨æˆ·å‘ç°</span>
}, <span class="hljs-number">1000</span>);
</code></pre>
<hr/>
<p>ä¼˜ç‚¹æ˜¯éšè”½æ€§æå¼ºï¼Œä¸éœ€è¦ <code>debugger</code>ï¼Œä¸ä¼šæ‰“æ–­ä»£ç æ‰§è¡Œã€‚ç¼ºç‚¹å‘¢ï¼Ÿä¸¥é‡ä¾èµ–æµè§ˆå™¨å®ç°ã€‚Chrome ä¸Šæ•ˆæœæœ€å¥½ï¼ŒFirefox/Safari çš„è¡Œä¸ºå¯èƒ½ä¸åŒã€‚</p>
<hr/>
<h4 data-id="heading-2"><strong>3.æ— é™ Debugger (é˜²è°ƒè¯•)</strong></h4>
<p>è¿™å…¶å®ä¸æ˜¯æ£€æµ‹ï¼Œè€Œæ˜¯åŠé€€ã€‚</p>
<p>å¾ˆå¤šç½‘ç«™ï¼ˆæ¯”å¦‚æŸäº›è§†é¢‘ç«™ã€åŠ å¯†å°è¯´ç«™ï¼‰ï¼Œä¼šç”¨ä¸€ç§è®©é»‘å®¢æå…¶æ¶å¿ƒçš„æ‰‹æ®µï¼š<strong>åªè¦ä½ æ•¢å¼€æ§åˆ¶å°ï¼Œæˆ‘å°±è®©ä½ å¡æ­»ã€‚</strong></p>
<p>åŸç†ï¼š</p>
<p>åˆ©ç”¨ Function.constructor æˆ– evalï¼Œåœ¨ä¸€ä¸ªé«˜é¢‘å¾ªç¯é‡Œä¸æ–­ç”Ÿæˆæ–°çš„ debuggerã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// æ”¾åœ¨ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°é‡Œ</span>
(<span class="hljs-keyword">function</span> <span class="hljs-title function_">anonymous</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªç”Ÿæˆ debugger çš„å‡½æ•°</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">debuggerLoop</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// é€šè¿‡æ„é€ å‡½æ•°ç”Ÿæˆ debuggerï¼Œé˜²æ­¢æºç è¢«é™æ€æœç´¢åˆ°</span>
      (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Function</span>(<span class="hljs-string">"debugger"</span>))(); 
    } <span class="hljs-keyword">catch</span> (e) {}
  }

  <span class="hljs-comment">// åªè¦æ²¡è¢«æ‹¦æˆªï¼Œæˆ‘å°±ä¸€ç›´é€’å½’è°ƒç”¨</span>
  <span class="hljs-comment">// ä¹Ÿå¯ä»¥é…åˆ setInterval</span>
  <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">debuggerLoop</span>();
  }, <span class="hljs-number">50</span>); <span class="hljs-comment">// æ¯ 50ms ç‚¸ä½ ä¸€æ¬¡ğŸ¤£</span>
})();
</code></pre>
<p>æ•ˆæœï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95b25ac655bc43f3b46e61f5047b6d30~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853682&amp;x-signature=W2t%2FIZzyiwQLlfrTGmqzhbPxZMI%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸€æ—¦ä½ æ‰“å¼€ F12ï¼Œä½ çš„æµè§ˆå™¨å°±ä¼šç«‹åˆ»è¢«æ— æ•°ä¸ªæ–­ç‚¹æš‚åœã€‚ç‚¹å‡»ç»§ç»­è¿è¡Œï¼Ÿæ²¡ç”¨ï¼Œ50ms åä¸‹ä¸€ä¸ªæ–­ç‚¹åˆæ¥äº†ã€‚ä½ çš„é¡µé¢åŸºæœ¬å¤„äºå‡æ­»çŠ¶æ€ï¼Œæ ¹æœ¬æ²¡æ³•æ“ä½œ DOM æˆ–å‘è¯·æ±‚ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä½ åœ¨è°ƒè¯•æŸäº›ç½‘ç«™æ—¶ï¼Œä¼šå‘ç° <code>Sources</code> é¢æ¿é‡Œå…¨æ˜¯ <code>VMxxxx</code> å¼€å¤´çš„åŒ¿åè„šæœ¬ï¼Œè€Œä¸”ä¸€ç›´å¡åœ¨ <code>debugger</code> ä¸Šã€‚</p>
<hr/>
<h4 data-id="heading-3"><strong>å¦‚ä½•ç»•è¿‡å‘¢ï¼ŸğŸ¤”</strong></h4>
<p>ä½œä¸ºè¡¥å……ï¼Œæˆ‘å¿…é¡»å‘Šè¯‰ä½ ï¼Œè¿™äº›é˜²å¾¡<strong>éƒ½ä¸æ˜¯æ— æ•Œçš„</strong>ã€‚</p>
<p><strong>å¯¹äºæ— é™ Debuggerï¼š</strong></p>
<ol>
<li><strong>ç¦ç”¨æ–­ç‚¹</strong>ï¼šåœ¨ Chrome DevTools é‡Œç‚¹å‡»é‚£ä¸ªç¦ç”¨æ‰€æœ‰æ–­ç‚¹çš„å›¾æ ‡ï¼Œä¸–ç•Œç¬é—´æ¸…å‡€äº†ã€‚</li>
</ol>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2eb18ae20bbb452f9ac906bb4fa0c82b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853682&amp;x-signature=JP0Vx2iUWpG7igBV971gsR%2FC7WY%3D" alt="image.png" loading="lazy"/></p>
<ol start="2">
<li><strong>æ¡ä»¶æ–­ç‚¹</strong>ï¼šåœ¨é‚£ä¸ª <code>debugger</code> è¡Œå³é”® -&gt; åœç”¨æ–­ç‚¹ã€‚</li>
</ol>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17b75a3b47e340a0bb1f118572367334~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853682&amp;x-signature=Q0qCbHYJlla8dBibXIy3XHSfSjc%3D" alt="image.png" loading="lazy"/></p>
<ol start="3">
<li><strong>æœ¬åœ°æ›¿æ¢</strong>ï¼šç”¨ Chrome çš„ æœ¬åœ°æ›¿æ¢åŠŸèƒ½ï¼ŒæŠŠé‚£æ®µ JS ä»£ç æ›¿æ¢æˆæœ¬åœ°ç©ºæ–‡ä»¶ã€‚</li>
</ol>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4f16fb8bcdf4bb092e764b0aabcc5af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853682&amp;x-signature=inXbW7V5BQUA7XBACLC08Bg%2Btk8%3D" alt="image.png" loading="lazy"/></p>
<p>å¯¹äºGetter æ£€æµ‹å‘¢ï¼ŸğŸ¤”</p>
<p>é»‘å®¢å¯ä»¥ç›´æ¥ Hook console.logï¼Œè®©å®ƒå¤±æ•ˆğŸ˜–ã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// ä½ çš„æ£€æµ‹é€»è¾‘å°±åºŸäº†</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">console</span>.<span class="hljs-property">log</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {}; 
</code></pre>
<hr/>
<p>ä»»ä½•å‰ç«¯å®‰å…¨æ‰‹æ®µï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯ <strong>é˜²å›å­ï¼Œé˜²ä¸äº†å°äºº</strong>ï¼Œæˆ–è€…è¯´æ˜¯<strong>æé«˜æ”»å‡»é—¨æ§›</strong>ã€‚</p>
<p>åœ¨æµè§ˆå™¨è¿™ä¸ªå®Œå…¨å¼€æ”¾çš„ç¯å¢ƒé‡Œï¼Œæ²¡æœ‰ä»€ä¹ˆç§˜å¯†èƒ½çœŸæ­£è—å¾—ä½ã€‚</p>
<p><strong>ä¸è¦æŠŠæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ˆæ¯”å¦‚é‡‘é¢è®¡ç®—ã€æƒé™æ ¡éªŒï¼‰æ”¾åœ¨å‰ç«¯ã€‚</strong></p>
<p>è¿™äº›æ£€æµ‹æ‰‹æ®µï¼Œæ›´å¤šæ˜¯ç”¨æ¥ä¿æŠ¤<strong>çŸ¥è¯†äº§æƒ</strong>ï¼ˆé˜²æ­¢å°ç™½æ‰’ä»£ç ï¼‰æˆ–è€…<strong>åçˆ¬è™«</strong>ï¼ˆæ£€æµ‹åˆ°è°ƒè¯•å°±åœæ­¢æ¸²æŸ“æ•°æ®ï¼‰ã€‚</p>
<p><strong>å­¦ä¼šè¿™å‡ æ‹›ï¼Œèµ·ç èƒ½æŒ¡ä½ 90% çš„è„šæœ¬å°å­ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83eae55c2df64ab283a86d5162441714~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853682&amp;x-signature=1xxNUyL4wG5IZ6cg7xW3%2FcA%2FqHI%3D" alt="è°¢è°¢å¤§å®¶.gif" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç®€å•äº†è§£ï¼šAndroid14ä¸­çš„Input event]]></title>    <link>https://juejin.cn/post/7581350888789671972</link>    <guid>https://juejin.cn/post/7581350888789671972</guid>    <pubDate>2025-12-09T02:36:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581350888789671972" data-draft-id="7573863952116154374" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç®€å•äº†è§£ï¼šAndroid14ä¸­çš„Input event"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-12-09T02:36:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç…¤çƒç‹å­"/> <meta itemprop="url" content="https://juejin.cn/user/4088439235949739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç®€å•äº†è§£ï¼šAndroid14ä¸­çš„Input event
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4088439235949739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç…¤çƒç‹å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T02:36:45.000Z" title="Tue Dec 09 2025 02:36:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è¾“å…¥äº‹ä»¶çš„æ¥æº</h2>
<p>æ•°æ®çš„æºå¤´ï¼Œæ¥è‡ªç¡¬ä»¶(å¦‚:ç‚¹å‡»å±å¹•)eventäº‹ä»¶è¾“å…¥ï¼Œå†…æ ¸è¿›è¡Œå¤„ç†</p>
<p>å½“ç”¨æˆ·è¿›è¡Œè§¦æ‘¸ã€æŒ‰é”®ç­‰æ“ä½œæ—¶ï¼Œç¡¬ä»¶ä¼šäº§ç”Ÿç›¸åº”çš„äº‹ä»¶ï¼Œè¿™äº›äº‹ä»¶ç»è¿‡å†…æ ¸çš„è¾“å…¥å­ç³»ç»Ÿå¤„ç†åï¼Œä¼šè¢«ä¼ é€’ç»™ Android ç³»ç»Ÿçš„ Input ç³»ç»Ÿã€‚ç„¶åå†ç”± Input ç³»ç»Ÿå°†äº‹ä»¶åˆ†å‘ç»™å¯¹åº”çš„åº”ç”¨ç¨‹åºå¤„ç†ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¼šæ¶‰åŠåˆ°äº‹ä»¶çš„ä¼ é€’ã€åˆ†å‘ã€å¤„ç†ç­‰å¤šä¸ªç¯èŠ‚ï¼Œä»»ä½•ä¸€ä¸ªç¯èŠ‚æœ‰é—®é¢˜ï¼Œéƒ½ä¼šå¼•å…¥bugæˆ–æ€§èƒ½é—®é¢˜ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9160d5b72b83428ba39f7b9c072395ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Wk55CD546L5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765852605&amp;x-signature=ZM4CLD%2F25nLxgoh9pjSFKul8PlE%3D" alt="image.png" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d467fa7a4534e34a101ae6c16b5dd91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Wk55CD546L5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765852605&amp;x-signature=KRU481jb6u%2Bm2zIa2dESz%2FAm2Jo%3D" alt="inputeventäº‹ä»¶äº§ç”Ÿ.png" loading="lazy"/></p>
<h2 data-id="heading-1">è¾“å…¥äº‹ä»¶çš„å¤„ç†</h2>
<p>Androidç³»ç»Ÿè·å–å’Œåˆ†å‘è¾“å…¥äº‹ä»¶çš„è¿‡ç¨‹æ¶‰åŠåˆ°å¤šä¸ªç»„ä»¶å’Œå±‚æ¬¡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/647fae196673471991e2a88fac929711~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Wk55CD546L5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765852605&amp;x-signature=EnnmCa7oTa4toqSpYquisNV9q1U%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p><strong><code>è¾“å…¥è®¾å¤‡</code></strong>ï¼šæ˜¯æŒ‡èƒ½å¤Ÿäº§ç”Ÿè¾“å…¥äº‹ä»¶çš„ç¡¬ä»¶è®¾å¤‡ï¼Œå¦‚è§¦æ‘¸å±ã€é”®ç›˜ã€é¼ æ ‡ç­‰ã€‚æ¯ä¸ªè¾“å…¥è®¾å¤‡éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„IDå’Œåç§°ï¼Œä»¥åŠä¸€ç»„å±æ€§å’ŒåŠŸèƒ½ã€‚</p>
</li>
<li>
<p><strong><code>EventHub</code></strong> ï¼šæ˜¯ä½äºNativeå±‚çš„ä¸€ä¸ªç»„ä»¶ï¼Œå®ƒè´Ÿè´£æ‰“å¼€å’Œå…³é—­è¾“å…¥è®¾å¤‡ï¼Œå¹¶ä»Linuxå†…æ ¸è¯»å–åŸå§‹çš„eventæ•°æ®ï¼Œå¹¶å°†å…¶å°è£…æˆ<code>RawEvent</code>ç»“æ„ä½“ã€‚</p>
</li>
<li>
<p><strong><code>InputReader</code></strong>ï¼šæ˜¯ä½äºNativeå±‚çš„ä¸€ä¸ªç»„ä»¶ï¼Œå®ƒè´Ÿè´£æ¥æ”¶EventHubä¼ é€’è¿‡æ¥çš„<code>RawEvent</code>ï¼Œå¹¶å¯¹å…¶è¿›è¡Œè§£æå’Œè½¬æ¢ï¼Œç”Ÿæˆ <code>NotifyMotionArgs</code> å¯¹è±¡ï¼Œå¹¶å°†å…¶å‘é€ç»™InputDispatcherã€‚</p>
</li>
<li>
<p><strong><code>InputDispatcher</code></strong>ï¼šæ˜¯ä½äºNativeå±‚çš„ä¸€ä¸ªç»„ä»¶ï¼Œå®ƒè´Ÿè´£æ¥æ”¶InputReaderä¼ é€’è¿‡æ¥çš„<code>NotifyMotionArgs</code>ï¼Œå¹¶å¯¹å…¶è¿›è¡Œç­›é€‰å’Œåˆ†å‘ï¼Œæ ¹æ®ä¸åŒçš„ç­–ç•¥å°†å…¶å‘é€ç»™ä¸åŒçš„Windowæˆ–åº”ç”¨ç¨‹åºã€‚</p>
</li>
<li>
<p><strong><code>InputManagerService</code></strong>ï¼šæ˜¯ä½äºJavaå±‚çš„ä¸€ä¸ªæœåŠ¡ï¼Œå®ƒè´Ÿè´£ç®¡ç†InputDispatcherï¼Œå¹¶æä¾›ä¸€äº›æ¥å£ä¾›å…¶ä»–ç»„ä»¶è°ƒç”¨ï¼Œå¦‚æ³¨å†Œæˆ–æ³¨é”€ç›‘å¬å™¨ã€è®¾ç½®æˆ–è·å–è¿‡æ»¤å™¨ç­‰ã€‚</p>
</li>
<li>
<p><strong><code>WindowManagerService</code></strong> ï¼šæ˜¯ä½äºJavaå±‚çš„ä¸€ä¸ªæœåŠ¡ï¼Œå®ƒè´Ÿè´£ç®¡ç†Windowå’Œè§†å›¾å±‚æ¬¡ï¼Œå¹¶ä¸InputDispatcherè¿›è¡Œäº¤äº’ï¼Œæä¾›ä¸€äº›å›è°ƒæ–¹æ³•ä¾›InputDispatcherè°ƒç”¨ï¼Œå¦‚æ‹¦æˆªæˆ–åˆ†å‘è¾“å…¥äº‹ä»¶ç­‰ã€‚</p>
</li>
<li>
<p><strong><code>ViewRootImpl</code></strong>ï¼šæ˜¯ä½äºJavaå±‚çš„ä¸€ä¸ªç±»ï¼Œå®ƒè´Ÿè´£è¿æ¥Windowå’ŒViewï¼Œå¹¶ä»InputDispatcheræ¥æ”¶è¾“å…¥äº‹ä»¶ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™Viewã€‚</p>
</li>
<li>
<p><strong><code>View</code></strong>ï¼šæ˜¯ä½äºJavaå±‚çš„ä¸€ä¸ªç±»ï¼Œå®ƒæ˜¯æ‰€æœ‰è§†å›¾çš„åŸºç±»ï¼Œå®ƒè´Ÿè´£å¤„ç†æˆ–æ¶ˆè´¹è¾“å…¥äº‹ä»¶ï¼Œå¹¶æ ¹æ®éœ€è¦è¿›è¡Œå“åº”æˆ–åé¦ˆã€‚</p>
</li>
</ul>
<h3 data-id="heading-2">1.è·å–</h3>
<h4 data-id="heading-3">1.1 EventHub ä½¿ç”¨<code>epoll</code>ç›‘å¬ fd äº‹ä»¶</h4>
<p><strong><code>epoll</code></strong> æ˜¯ Linux å†…æ ¸çš„ä¸€ç§ I/O äº‹ä»¶é€šçŸ¥æœºåˆ¶ï¼Œç”¨äºé«˜æ•ˆåœ°å¤„ç†å¤§é‡æ–‡ä»¶æè¿°ç¬¦çš„ I/O äº‹ä»¶ã€‚å®ƒæ˜¯ select/poll çš„å¢å¼ºç‰ˆæœ¬ï¼Œè§£å†³äº†å®ƒä»¬åœ¨å¤„ç†å¤§é‡è¿æ¥æ—¶æ€§èƒ½ä¸‹é™çš„é—®é¢˜ã€‚</p>
<p><strong>ä¸»è¦ç”¨é€”ï¼š</strong></p>
<ul>
<li>é«˜æ€§èƒ½ç½‘ç»œæœåŠ¡å™¨ï¼ˆNginxã€Redisç­‰ï¼‰</li>
<li>æ–‡ä»¶æè¿°ç¬¦äº‹ä»¶ç›‘æ§</li>
<li>å¼‚æ­¥ I/O å¤„ç†</li>
<li>Android ä¸­çš„ Input ç³»ç»Ÿäº‹ä»¶ç›‘å¬</li>
</ul>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li><strong>O(1) æ—¶é—´å¤æ‚åº¦</strong>ï¼šä¸ç®¡ç›‘æ§å¤šå°‘æ–‡ä»¶æè¿°ç¬¦ï¼Œæ€§èƒ½éƒ½ä¿æŒç¨³å®šï¼Œåœ¨å†…æ ¸é‡Œç»´æŠ¤ä¸€æ£µ<strong>äº‹ä»¶å°±ç»ªçº¢é»‘æ ‘</strong>ï¼Œåªè¿”å›â€œçœŸæ­£å‘ç”Ÿäº‹ä»¶â€çš„ fdï¼Œå¤æ‚åº¦ O(1) çº§åˆ«</li>
<li><strong>æ— éœ€éå†æ‰€æœ‰fd</strong>ï¼šåªè¿”å›å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦</li>
<li><strong>æ”¯æŒè¾¹ç¼˜è§¦å‘(ET)å’Œæ°´å¹³è§¦å‘(LT)</strong> æ¨¡å¼</li>
</ul>
<p><strong>epoll API åˆ—è¡¨:</strong></p>



































<table><thead><tr><th>API å‡½æ•°</th><th>å‚æ•°</th><th>è¿”å›å€¼</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><strong>epoll_create1</strong></td><td><code>int flags</code></td><td>epoll å®ä¾‹çš„æ–‡ä»¶æè¿°ç¬¦</td><td>åˆ›å»ºæ–°çš„ epoll å®ä¾‹</td></tr><tr><td><strong>epoll_ctl</strong></td><td><code>int epfd</code>, <code>int op</code>, <code>int fd</code>, <code>struct epoll_event *event</code></td><td>0 æˆåŠŸï¼Œ-1 å¤±è´¥</td><td>ç®¡ç† epoll å®ä¾‹ä¸­çš„æ–‡ä»¶æè¿°ç¬¦</td></tr><tr><td><strong>epoll_wait</strong></td><td><code>int epfd</code>, <code>struct epoll_event *events</code>, <code>int maxevents</code>, <code>int timeout</code></td><td>å°±ç»ªçš„äº‹ä»¶æ•°é‡</td><td>ç­‰å¾… I/O äº‹ä»¶å‘ç”Ÿ</td></tr><tr><td><strong>epoll_pwait</strong></td><td>åŒä¸Šï¼Œå¢åŠ  <code>const sigset_t *sigmask</code></td><td>å°±ç»ªçš„äº‹ä»¶æ•°é‡</td><td>å¸¦ä¿¡å·æ©ç çš„ epoll_wait</td></tr></tbody></table>
<pre><code class="hljs language-go" lang="go">#include &lt;sys/epoll.h&gt;
epfdï¼š<span class="hljs-string">`epoll_create`</span>Â å‡½æ•°è¿”å›çš„ epoll å®ä¾‹çš„æ–‡ä»¶æè¿°ç¬¦;   ä½œç”¨:æŒ‡å®šä½ è¦æ“ä½œçš„æ˜¯å“ªä¸ª epoll å®ä¾‹ã€‚
op: éœ€è¦æ‰§è¡Œçš„æ“ä½œï¼Œç”¨å®å®šä¹‰æŒ‡å®š{EPOLL_CTL_ADDã€EPOLL_CTL_MODã€EPOLL_CTL_DEL}
fd: éœ€è¦è¢«ç›‘è§†/æ“ä½œçš„ç›®æ ‡æ–‡ä»¶æè¿°ç¬¦ã€‚
*event: ä¸€ä¸ªæŒ‡å‘Â epoll_eventÂ ç»“æ„ä½“çš„æŒ‡é’ˆï¼Œå®ƒå‘Šè¯‰å†…æ ¸æˆ‘ä»¬éœ€è¦ç›‘è§†ä»€ä¹ˆäº‹ä»¶ï¼Œä»¥åŠæˆ‘ä»¬å¸Œæœ›å…³è”çš„ç”¨æˆ·æ•°æ®
<span class="hljs-type">int</span> epoll_ctl(<span class="hljs-type">int</span> epfd, <span class="hljs-type">int</span> op, <span class="hljs-type">int</span> fd, <span class="hljs-keyword">struct</span> epoll_event *event);


epfdï¼š<span class="hljs-string">`epoll_create`</span>Â å‡½æ•°è¿”å›çš„ epoll å®ä¾‹çš„æ–‡ä»¶æè¿°ç¬¦;
*eventsï¼š ä¸€ä¸ªç”±è°ƒç”¨è€…åˆ†é…å†…å­˜çš„Â epoll_event ç»“æ„ä½“æ•°ç»„;  ä½œç”¨:å½“Â <span class="hljs-string">`epoll_wait`</span>Â è¿”å›æ—¶ï¼Œå†…æ ¸ä¼šæŠŠæ‰€æœ‰å°±ç»ªçš„äº‹ä»¶å’Œå®ƒä»¬å¯¹åº”çš„Â <span class="hljs-string">`data`</span>ï¼ˆå³ä¹‹å‰åœ¨Â <span class="hljs-string">`epoll_ctl`</span>Â ä¸­è®¾ç½®çš„Â <span class="hljs-string">`data`</span>ï¼‰å¡«å……åˆ°è¿™ä¸ªæ•°ç»„ä¸­ã€‚è¿™æ˜¯Â <span class="hljs-string">`epoll`</span>Â é«˜æ•ˆçš„å…³é”®ä¹‹ä¸€ï¼Œå®ƒé€šè¿‡ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨å°±è¿”å›äº†æ‰€æœ‰å°±ç»ªçš„äº‹ä»¶ï¼Œé¿å…äº†åƒÂ <span class="hljs-string">`select`</span>/<span class="hljs-string">`poll`</span>Â é‚£æ ·éœ€è¦éå†æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦ã€‚
maxevents: <span class="hljs-string">`events`</span>Â æ•°ç»„çš„å®¹é‡ï¼Œå³ä¸€æ¬¡æœ€å¤šå¯ä»¥æ¥æ”¶å¤šå°‘ä¸ªå°±ç»ªäº‹ä»¶
timeout: è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’ã€‚
  - **ä½œç”¨**ï¼šæ§åˆ¶Â <span class="hljs-string">`epoll_wait`</span>Â çš„é˜»å¡è¡Œä¸ºã€‚
  - **å¯é€‰å€¼**ï¼š
     - <span class="hljs-number">-1</span>ï¼šæ— é™é˜»å¡ã€‚ç›´åˆ°æœ‰äº‹ä»¶å‘ç”Ÿæ‰è¿”å›ã€‚
     -  <span class="hljs-number">0</span>ï¼šéé˜»å¡ã€‚ç«‹å³è¿”å›ï¼Œå³ä½¿æ²¡æœ‰ä»»ä½•äº‹ä»¶å°±ç»ªã€‚ç”¨äºæ£€æŸ¥çŠ¶æ€ã€‚
     -  &gt; <span class="hljs-number">0</span>ï¼šé˜»å¡æŒ‡å®šæ¯«ç§’æ•°ã€‚å¦‚æœåœ¨è¶…æ—¶ï¼Œæ—¶é—´å†…æœ‰äº‹ä»¶å°±ç»ªï¼Œåˆ™ç«‹å³è¿”å›ï¼›å¦åˆ™åœ¨è¶…æ—¶åè¿”å›ã€‚
<span class="hljs-type">int</span> epoll_wait(<span class="hljs-type">int</span> epfd, <span class="hljs-keyword">struct</span> epoll_event *events,  <span class="hljs-type">int</span> maxevents, <span class="hljs-type">int</span> timeout);
</code></pre>
<p><strong>epoll_ctl æ“ä½œç±»å‹ï¼š</strong></p>
<ul>
<li><code>EPOLL_CTL_ADD</code> - æ·»åŠ æ–‡ä»¶æè¿°ç¬¦åˆ°ç›‘æ§åˆ—è¡¨</li>
<li><code>EPOLL_CTL_MOD</code> - ä¿®æ”¹å·²ç›‘æ§çš„æ–‡ä»¶æè¿°ç¬¦çš„äº‹ä»¶è®¾ç½®</li>
<li><code>EPOLL_CTL_DEL</code> - ä»ç›‘æ§åˆ—è¡¨ä¸­ç§»é™¤æ–‡ä»¶æè¿°ç¬¦</li>
</ul>
<p><strong>epoll äº‹ä»¶ç±»å‹ï¼š</strong></p>





















































































<table><thead><tr><th>äº‹ä»¶ç±»å‹</th><th>åè¿›åˆ¶å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>EPOLLIN</td><td>1</td><td>æ–‡ä»¶æè¿°ç¬¦<code>å¯è¯»</code>ï¼ˆæœ‰æ•°æ®å¯è¯»å–ã€æœ‰æ•°æ®åˆ°è¾¾ã€æ–°è¿æ¥åˆ°è¾¾ç­‰ï¼‰</td></tr><tr><td>EPOLLPRI</td><td>2</td><td>ç´§æ€¥æ•°æ®å¯è¯»ï¼ˆå¸¦å¤–æ•°æ®ï¼‰</td></tr><tr><td>EPOLLOUT</td><td>4</td><td>æ–‡ä»¶æè¿°ç¬¦<code>å¯å†™</code>ï¼ˆå¯ä»¥å‘é€æ•°æ®ã€å‘é€ç¼“å†²åŒºæœ‰ç©ºé—´ï¼‰</td></tr><tr><td>EPOLLRDNORM</td><td>64</td><td>æ™®é€šæ•°æ®å¯è¯»</td></tr><tr><td>EPOLLRDBAND</td><td>128</td><td>ä¼˜å…ˆçº§å¸¦æ•°æ®å¯è¯»</td></tr><tr><td>EPOLLWRNORM</td><td>256</td><td>æ™®é€šæ•°æ®å¯å†™</td></tr><tr><td>EPOLLWRBAND</td><td>512</td><td>ä¼˜å…ˆçº§å¸¦æ•°æ®å¯å†™</td></tr><tr><td>EPOLLMSG</td><td>1024</td><td>æœ‰æ¶ˆæ¯å¯ç”¨ï¼ˆå¾ˆå°‘ä½¿ç”¨ï¼‰</td></tr><tr><td>EPOLLERR</td><td>8</td><td>é”™è¯¯æ¡ä»¶ï¼ˆæ€»æ˜¯ç›‘æ§ï¼Œæ— éœ€è®¾ç½®ï¼‰</td></tr><tr><td>EPOLLHUP</td><td>16</td><td>æŒ‚èµ·ï¼ˆæ€»æ˜¯ç›‘æ§ï¼Œæ— éœ€è®¾ç½®ï¼‰</td></tr><tr><td>EPOLLRDHUP</td><td>8192</td><td>å¯¹ç«¯å…³é—­è¿æ¥æˆ–åŠå…³é—­</td></tr><tr><td>EPOLLEXCLUSIVE</td><td>268435456</td><td>ç‹¬å å”¤é†’ï¼Œé¿å…æƒŠç¾¤æ•ˆåº”(&gt;=3.7)</td></tr><tr><td>EPOLLWAKEUP</td><td>536870912</td><td>ç¡®ä¿åœ¨ç³»ç»ŸæŒ‚èµ·æ—¶<code>ä¿æŒå”¤é†’</code></td></tr><tr><td>EPOLLONESHOT</td><td>1073741824</td><td>ä¸€æ¬¡æ€§äº‹ä»¶ï¼Œè§¦å‘åéœ€é‡æ–°æ³¨å†Œã€éœ€é‡æ–° epoll_ctl</td></tr><tr><td>EPOLLET</td><td>2147483648</td><td>è¾¹ç¼˜è§¦å‘ï¼ˆEdge Triggeredï¼‰ï¼Œé»˜è®¤æ°´å¹³è§¦å‘</td></tr></tbody></table>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ed81e16012c4c939a6a86f53e67decd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Wk55CD546L5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765852605&amp;x-signature=wZa3VT455kKpfbOizEA9Mah3rsg%3D" alt="EventHub1.png" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99fe2668f5b94898908a431c55c01ef0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Wk55CD546L5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765852605&amp;x-signature=F1ZsfiU4aa28%2BVN3VBRNlagkANI%3D" alt="EventHub2.png" loading="lazy"/></p>
<h4 data-id="heading-4">1.2 EventHub å°è£…eventä¸ºRawEvent</h4>
<p>è¿™ä¸ªç»“æ„ä½“æ˜¯ Android è¾“å…¥ç³»ç»Ÿé‡Œ<strong>æœ€åº•å±‚ã€æœ€åŸå§‹çš„äº‹ä»¶å•å…ƒ</strong>ï¼Œä»å†…æ ¸çš„ <code>/dev/input/eventX</code> èŠ‚ç‚¹è¯»å‡ºæ¥ä»¥åï¼ŒEventHub ç›´æ¥æŠŠå®ƒåŒ…æˆ <code>RawEvent</code> äº¤ç»™ä¸Šå±‚ï¼ˆInputReaderï¼‰ã€‚ å®ƒåªè´Ÿè´£â€œé™ˆè¿°äº‹å®â€ï¼Œä¸åšä»»ä½•è§£é‡Šæˆ–åŠ å·¥ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">/*
 * A raw event as retrieved from the EventHub.
 */</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">RawEvent</span> {
    <span class="hljs-comment">// Time when the event happened. Time when the event was read by EventHub. Only populated for input events. For other events (device added/removed/etc), this value is undefined and should not be read.</span>
    <span class="hljs-type">nsecs_t</span> when;
    <span class="hljs-type">nsecs_t</span> readTime;
    <span class="hljs-type">int32_t</span> deviceId; <span class="hljs-comment">//äº§ç”Ÿäº‹ä»¶çš„â€œè¾“å…¥è®¾å¤‡IDâ€</span>
    <span class="hljs-type">int32_t</span> type; <span class="hljs-comment">//äº‹ä»¶ç±»å‹</span>
    <span class="hljs-type">int32_t</span> code; <span class="hljs-comment">//äº‹ä»¶ä»£ç </span>
    <span class="hljs-type">int32_t</span> value;<span class="hljs-comment">//äº‹ä»¶å€¼</span>
};
</code></pre>








































<table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>when</code></td><td><code>nsecs_t</code>ï¼ˆçº³ç§’ï¼‰</td><td><strong>äº‹ä»¶åœ¨ç¡¬ä»¶å±‚é¢å‘ç”Ÿçš„æ—¶é—´</strong>ï¼Œç”±å†…æ ¸é©±åŠ¨æ‰“æˆ³ï¼Œç²¾åº¦åˆ°çº³ç§’ã€‚</td></tr><tr><td><code>readTime</code></td><td><code>nsecs_t</code></td><td><strong>EventHub ä» fd è¯»å‡ºè¯¥äº‹ä»¶çš„æ—¶é—´</strong>ï¼Œä»…å¯¹<strong>è¾“å…¥äº‹ä»¶</strong>æœ‰æ•ˆ</td></tr><tr><td><code>deviceId</code></td><td><code>int32_t</code></td><td>äº§ç”Ÿè¯¥äº‹ä»¶çš„<strong>è¾“å…¥è®¾å¤‡ ID</strong>ï¼ŒEventHub å†…éƒ¨ç¼–å·ï¼Œä¸ <code>/dev/input/eventX</code> ä¸€ä¸€å¯¹åº”ã€‚</td></tr><tr><td><code>type</code></td><td><code>int32_t</code></td><td><strong>äº‹ä»¶ç±»å‹</strong>ï¼Œå¯¹åº”å†…æ ¸çš„ <code>EV_*</code> å®ï¼š<br/> <code>0</code> = <code>EV_SYN</code>ï¼ˆåŒæ­¥åŒ…ï¼‰<br/> <code>1</code> = <code>EV_KEY</code>ï¼ˆæŒ‰é”®/è§¦æ‘¸æŒ‰ä¸‹ï¼‰<br/> <code>3</code> = <code>EV_ABS</code>ï¼ˆç»å¯¹åæ ‡ï¼Œå¦‚è§¦æ‘¸å±ï¼‰<br/> â€¦</td></tr><tr><td><code>code</code></td><td><code>int32_t</code></td><td><strong>äº‹ä»¶ä»£ç </strong>ï¼Œåœ¨ <code>type</code> ä¸‹çš„å…·ä½“å«ä¹‰ï¼š<br/> è‹¥ <code>type == EV_KEY</code>ï¼Œ<code>code == BTN_TOUCH</code> è¡¨ç¤ºè§¦æ‘¸æŒ‰ä¸‹ï¼›<br/> è‹¥ <code>type == EV_ABS</code>ï¼Œ<code>code == ABS_MT_POSITION_X</code> è¡¨ç¤º X åæ ‡ã€‚</td></tr><tr><td><code>value</code></td><td><code>int32_t</code></td><td><strong>äº‹ä»¶å€¼</strong>ï¼š<br/> å¯¹æŒ‰é”®ï¼š<code>1</code> æŒ‰ä¸‹ï¼Œ<code>0</code> æ¾å¼€ï¼Œ<code>2</code> é•¿æŒ‰é‡å¤ï¼›<br/> å¯¹åæ ‡ï¼šå…·ä½“çš„åæ ‡/å‹åŠ›å€¼ï¼›<br/> å¯¹ <code>SYN_REPORT</code>ï¼šå¿…é¡»ä¸º <code>0</code>ï¼Œè¡¨ç¤ºä¸€åŒ…æ•°æ®ç»“æŸã€‚</td></tr></tbody></table>
<blockquote>
<p><code>RawEvent</code> å°±æ˜¯å†…æ ¸ <code>input_event</code> ç»“æ„çš„â€œAndroid å¤åˆ»ç‰ˆâ€ï¼Œé¢å¤–åŠ äº†ä¸€ä¸ª <code>readTime</code> ç”¨äºæ€§èƒ½ç»Ÿè®¡ï¼Œä¸Šå±‚ä»£ç é RawEventé€æ¡è¿˜åŸç”¨æˆ·çš„æ‰‹æŒ‡ã€æŒ‰é”®ã€é¼ æ ‡ç­‰åŸå§‹åŠ¨ä½œã€‚</p>
</blockquote>
<p><strong>äº‹ä»¶ç±»å‹ï¼š</strong></p>

























































































<table><thead><tr><th>å®</th><th>åè¿›åˆ¶</th><th>å«ä¹‰</th><th>å¸¸è§ç”¨é€”</th></tr></thead><tbody><tr><td><code>EV_SYN</code></td><td>0</td><td><strong>åŒæ­¥äº‹ä»¶</strong></td><td>æ‰“åŒ…ç”¨ï¼Œæ ‡è®°â€œä¸€ç»„äº‹ä»¶ç»“æŸâ€</td></tr><tr><td><code>EV_KEY</code></td><td>1</td><td><strong>æŒ‰é”®</strong></td><td>é¥æ§å™¨/é”®ç›˜/æŒ‰é’® <strong>æŒ‰ä¸‹/æ¾å¼€</strong></td></tr><tr><td><code>EV_REL</code></td><td>2</td><td><strong>ç›¸å¯¹ä½ç§»</strong></td><td>é¼ æ ‡ç§»åŠ¨ã€æ»šè½®</td></tr><tr><td><code>EV_ABS</code></td><td>3</td><td><strong>ç»å¯¹ä½ç§»</strong></td><td>è§¦æ‘¸å±åæ ‡ã€æ‘‡æ†ç»å¯¹å€¼</td></tr><tr><td><code>EV_MSC</code></td><td>4</td><td><strong>æ‚é¡¹</strong></td><td>æ‰«æç ã€USB ç”¨æ³•ç ã€ä½å±‚è°ƒè¯•æ•°æ®</td></tr><tr><td><code>EV_SW</code></td><td>5</td><td><strong>å¼€å…³</strong></td><td>è€³æœºæ’æ‹”ã€ç›–å­å¼€åˆã€HDMI åˆ‡æ¢</td></tr><tr><td><code>EV_LED</code></td><td>17</td><td><strong>LED ç¯</strong></td><td>é”®ç›˜å¤§å†™ç¯ã€NumLock</td></tr><tr><td><code>EV_SND</code></td><td>18</td><td><strong>å£°éŸ³</strong></td><td>èœ‚é¸£å™¨ã€å¤è‘£ PC å–‡å­ï¼ˆå‡ ä¹ä¸ç”¨ï¼‰</td></tr><tr><td><code>EV_REP</code></td><td>20</td><td><strong>è‡ªåŠ¨é‡å¤</strong></td><td>é”®ç›˜é•¿æŒ‰è¿ç»­è§¦å‘</td></tr><tr><td><code>EV_FF</code></td><td>21</td><td><strong>åŠ›åé¦ˆ</strong></td><td>æ¸¸æˆæ‰‹æŸ„éœ‡åŠ¨ã€æ–¹å‘ç›˜åŠ›å›é¦ˆ</td></tr><tr><td><code>EV_PWR</code></td><td>22</td><td><strong>ç”µæº</strong></td><td>ä¼‘çœ /å”¤é†’é”®ï¼ˆå†…æ ¸çº§åˆ«ï¼‰</td></tr><tr><td><code>EV_FF_STATUS</code></td><td>23</td><td><strong>åŠ›åé¦ˆçŠ¶æ€</strong></td><td>è®¾å¤‡æŠ¥å‘ŠåŠ›åé¦ˆå½“å‰çŠ¶æ€</td></tr><tr><td><code>EV_MAX</code></td><td>31</td><td><strong>è¾¹ç•Œæ ‡è®°</strong></td><td>æ•°ç»„å¤§å°ç”¨ï¼Œä¸ä¼šçœŸçš„å‡ºç°</td></tr></tbody></table>
<p><strong>âœ… (1). EV_SYNï¼ˆtype=0ï¼‰åŒæ­¥äº‹ä»¶â€”&gt;äº‹ä»¶ä»£ç ï¼š</strong></p>






























<table><thead><tr><th>åè¿›åˆ¶ code</th><th>å®å¸¸é‡</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>0</td><td><code>SYN_REPORT</code></td><td><strong>ä¸€ç»„äº‹ä»¶ç»“æŸ</strong>ï¼Œå‰é¢æ‰€æœ‰äº‹ä»¶ç®—ä¸€ä¸ªâ€œå¸§â€</td></tr><tr><td>1</td><td><code>SYN_CONFIG</code></td><td>å·²åºŸå¼ƒï¼Œå‡ ä¹è§ä¸åˆ°</td></tr><tr><td>2</td><td><code>SYN_MT_REPORT</code></td><td>æ—§å¼å¤šç‚¹è§¦æ§ï¼ŒAndroid å·²ä¸ç”¨</td></tr><tr><td>3</td><td><code>SYN_DROPPED</code></td><td><strong>å†…æ ¸ç¼“å†²åŒºæº¢å‡º</strong>ï¼Œå‘Šè¯‰ç”¨æˆ·ç©ºé—´â€œæˆ‘ä¸¢äº‹ä»¶äº†â€</td></tr></tbody></table>
<p><strong>âœ… (2). EV_KEYï¼ˆtype=1ï¼‰æŒ‰é”®äº‹ä»¶â€”&gt;äº‹ä»¶ä»£ç ï¼š</strong></p>







































































































































<table><thead><tr><th>åè¿›åˆ¶ code</th><th>å®å¸¸é‡</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>1</td><td><code>KEY_ESC</code></td><td>è¿”å›/ESC</td></tr><tr><td>2</td><td><code>KEY_1</code> ~ 11 <code>KEY_9</code></td><td>æ•°å­— 1-9</td></tr><tr><td>10</td><td><code>KEY_0</code></td><td>æ•°å­— 0</td></tr><tr><td>28</td><td><code>KEY_ENTER</code></td><td>ç¡®å®š/å›è½¦</td></tr><tr><td>102</td><td><code>KEY_HOME</code></td><td>Home é”®</td></tr><tr><td>103</td><td><code>KEY_UP</code></td><td>ä¸Š</td></tr><tr><td>105</td><td><code>KEY_LEFT</code></td><td>å·¦</td></tr><tr><td>106</td><td><code>KEY_RIGHT</code></td><td>å³</td></tr><tr><td>108</td><td><code>KEY_DOWN</code></td><td>ä¸‹</td></tr><tr><td>114</td><td><code>KEY_VOLUMEDOWN</code></td><td>éŸ³é‡å‡</td></tr><tr><td>115</td><td><code>KEY_VOLUMEUP</code></td><td>éŸ³é‡åŠ </td></tr><tr><td>116</td><td><code>KEY_POWER</code></td><td>ç”µæºé”®</td></tr><tr><td>139</td><td><code>KEY_MENU</code></td><td>èœå•é”®</td></tr><tr><td>158</td><td><code>KEY_BACK</code></td><td>è¿”å›é”®ï¼ˆAndroid æœ€å¸¸ç”¨ï¼‰</td></tr><tr><td>172</td><td><code>KEY_HOMEPAGE</code></td><td>é¦–é¡µï¼ˆæµè§ˆå™¨/launcherï¼‰</td></tr><tr><td>217</td><td><code>KEY_SEARCH</code></td><td>æœç´¢é”®</td></tr><tr><td>304</td><td><code>BTN_SOUTH</code></td><td>æ¸¸æˆæ‰‹æŸ„ A</td></tr><tr><td>305</td><td><code>BTN_EAST</code></td><td>æ¸¸æˆæ‰‹æŸ„ B</td></tr><tr><td>306</td><td><code>BTN_C</code></td><td>æ¸¸æˆæ‰‹æŸ„ C</td></tr><tr><td>307</td><td><code>BTN_NORTH</code></td><td>æ¸¸æˆæ‰‹æŸ„ Y</td></tr><tr><td>308</td><td><code>BTN_WEST</code></td><td>æ¸¸æˆæ‰‹æŸ„ X</td></tr><tr><td>310</td><td><code>BTN_TL</code></td><td>å·¦è‚©é”® L1</td></tr><tr><td>311</td><td><code>BTN_TR</code></td><td>å³è‚©é”® R1</td></tr><tr><td>315</td><td><code>BTN_START</code></td><td>æ‰‹æŸ„ Start</td></tr><tr><td>316</td><td><code>BTN_SELECT</code></td><td>æ‰‹æŸ„ Select</td></tr></tbody></table>
<h4 data-id="heading-5">1.3å„ç±»Mapperå°è£…ä¸ºNotifyKeyArgs</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2bfc70b9fe94405c9f584b9da8573db8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Wk55CD546L5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765852605&amp;x-signature=LTmJiAjVDfTwShbp7FbPli%2B%2BqAE%3D" alt="å…³é”®ç±»1.png" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/401522a3dcdb40c983a2f32d7691a37b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Wk55CD546L5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765852605&amp;x-signature=0qJcq3acyARtNz4gikupPQvHQmA%3D" alt="äº‹ä»¶çš„è¾“å…¥ç²—ç•¥æµç¨‹.png" loading="lazy"/></p>
<h3 data-id="heading-6">2.åˆ†å‘</h3>
<h4 data-id="heading-7">2.1InputDispatcheræ¥æ”¶æºæ•°æ®</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8c87f5de2564a3bb68d57ca22c438d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Wk55CD546L5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765852605&amp;x-signature=Jx5wsJQdVn%2Bs31mYojyYcFSBCxo%3D" alt="InputDispatcherçš„æ•°æ®æ¥æº.png" loading="lazy"/>
ä»åŸå§‹æ•°æ®åˆ°InputDispatcheræ¥æ”¶æ•°æ®çš„å°è£…å†ç¨‹
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ff5f54d7c974f7a810fa8dd607f9a94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Wk55CD546L5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765852605&amp;x-signature=%2BC1lunyhkOBMLh8zJkoV%2B%2B%2FlhQ4%3D" alt="keyevent.png" loading="lazy"/></p>
<h4 data-id="heading-8">2.2 InputDispatcherå‘é€æ•°æ®</h4>
<p>InputDispatcher æ˜¯ Android è¾“å…¥ç³»ç»Ÿçš„â€œä¸­å¤®é‚®å±€â€ã€‚å®ƒæŠŠ <strong>InputReader</strong> æ‰“åŒ…å¥½çš„ <code>NotifyKeyArgs</code>ã€<code>NotifyMotionArgs</code> ç­‰â€œè£¸äº‹ä»¶â€è½¬æˆ <strong>EventEntry</strong> é˜Ÿåˆ—ï¼Œå†æŒ‰â€œ<strong>çª—å£ç„¦ç‚¹</strong>ã€<strong>è§¦æ‘¸åŒºåŸŸ</strong>ã€<strong>æƒé™</strong>â€ä¸‰æ¡è§„åˆ™æŠ•é€’åˆ°ç›®æ ‡åº”ç”¨çš„ä¸»çº¿ç¨‹ã€‚æ ¸å¿ƒæµç¨‹å¯æµ“ç¼©ä¸º 5 æ­¥ï¼š</p>
<ol>
<li>
<p>å…¥é˜Ÿ<br/>
InputReader é€šè¿‡ <code>InputDispatcher::notifyKey()</code> / <code>notifyMotion()</code> æŠŠäº‹ä»¶æ¨è¿› <strong>mInboundQueue</strong>ï¼ˆå•å‘ç”Ÿäº§ï¼Œæ— é”ï¼‰ã€‚</p>
</li>
<li>
<p>æ‰¾ç›®æ ‡ï¼Œåœ¨ <strong>dispatchOnceInnerLocked()</strong> é‡Œï¼š</p>
<ul>
<li><strong>Key äº‹ä»¶</strong> â†’ è°ƒç”¨ <code>findFocusedWindowTargetsLocked()</code>ï¼Œæ‹¿åˆ°å½“å‰â€œ<strong>è¾“å…¥æ³•çª—å£</strong>â€æˆ–â€œ<strong>å‰å°ç„¦ç‚¹çª—å£</strong>â€ã€‚</li>
<li><strong>Motion äº‹ä»¶</strong> â†’ è°ƒç”¨ <code>findTouchedWindowTargetsLocked()</code>ï¼ŒæŒ‰ <strong>x,y</strong> éå† <code>InputWindowHandle</code> åˆ—è¡¨ï¼Œ<strong>æœ€ä¸Šå±‚ã€å¯è§ã€å¯è§¦æ‘¸ã€æ— é®ç½©</strong>çš„çª—å£èƒœå‡ºï¼›åŒæ—¶æŠŠ <strong>PointerCapture</strong>ã€<strong>ç›‘è§†é€šé“</strong>ï¼ˆmonitorï¼‰ä¹ŸåŠ è¿›æ¥ã€‚</li>
</ul>
</li>
<li>
<p>æƒé™æ£€æŸ¥ï¼Œå¯¹ <strong>Key</strong> è¿˜è¦è¿‡ <strong>policy</strong>ï¼ˆPhoneWindowManagerï¼‰æ‹¦æˆªï¼š</p>
<ul>
<li>HOME/BACK/POWER ç­‰ç³»ç»Ÿé”®ä¼šè¢« policy æå‰æ¶ˆè´¹ï¼Œä¸ä¼šç»§ç»­å‘ç»™åº”ç”¨ã€‚</li>
<li>å¦‚æœç›®æ ‡çª—å£æ²¡æœ‰ <code>INJECT_EVENTS</code> æƒé™ï¼Œåˆ™ä¸¢å¼ƒã€‚</li>
</ul>
</li>
<li>
<p>è¿æ¥æŠ•é€’<br/>
æ¯ä¸ªçª—å£åœ¨æ³¨å†Œæ—¶éƒ½ä¼šæ–°å»º <strong>InputChannel</strong>ï¼ˆä¸€å¯¹ socketï¼‰ã€‚<br/>
æŠŠäº‹ä»¶åºåˆ—åŒ–æˆ <code>InputMessage</code>ï¼Œé€šè¿‡ <strong>InputPublisher::publishKeyEvent() / publishMotionEvent()</strong> å†™è¿› socketï¼›<br/>
åº”ç”¨ä¸»çº¿ç¨‹çš„ <strong>InputConsumer</strong> åœ¨ä¸‹æ¬¡ <code>nativePollOnce()</code> æ—¶æ”¶åˆ°æ¶ˆæ¯ï¼Œç›´æ¥ç»„è£…æˆ Java å±‚çš„ <code>KeyEvent</code> / <code>MotionEvent</code> å›è°ƒã€‚</p>
</li>
<li>
<p>ç­‰å¾…ä¸é‡è¯•<br/>
å¦‚æœç›®æ ‡çª—å£ 5 ç§’å†…ä¸æ¶ˆè´¹ï¼ˆä¸ finishï¼‰ï¼Œè§¦å‘ <strong>ANR</strong>ï¼›<br/>
å¦‚æœçª—å£å¤±å»ç„¦ç‚¹æˆ–åŒºåŸŸå˜åŒ–ï¼Œè°ƒç”¨ <code>cancelEventsForAnrLocked()</code> æŠŠåç»­äº‹ä»¶å–æ¶ˆæˆ–é‡æ–°åˆ†å‘ç»™æ–°çª—å£ã€‚</p>
</li>
</ol>
<p>ä¸€å¥è¯ï¼š<br/>
<strong>InputDispatcher = é˜Ÿåˆ— + ç„¦ç‚¹æŸ¥æ‰¾ + æƒé™è¿‡æ»¤ + socket ç›´æŠ• + ANR  watchdog</strong>ã€‚æ‰€æœ‰äº‹ä»¶å¿…é¡»ç»è¿‡å®ƒâ€œç›–ç« â€æ‰èƒ½å˜æˆåº”ç”¨æ”¶åˆ°çš„ <code>onKeyDown()</code> / <code>onTouchEvent()</code>ã€‚</p>
<p>å­¦ä¹ å‚è€ƒï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.aliyun.com%2Farticle%2F1489580" target="_blank" title="https://developer.aliyun.com/article/1489580" ref="nofollow noopener noreferrer">developer.aliyun.com/article/148â€¦</a>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fkernel.meizu.com%2F2023%2F10%2F27%2FAndroid-inputTuning-and-Optimizing%2F" target="_blank" title="https://kernel.meizu.com/2023/10/27/Android-inputTuning-and-Optimizing/" ref="nofollow noopener noreferrer">kernel.meizu.com/2023/10/27/â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ€§èƒ½é£è·ƒï¼è¿™å‡ ä¸ªç°ä»£æµè§ˆå™¨APIè®©é¡µé¢åŠ è½½é€Ÿåº¦æå‡è‡³90+]]></title>    <link>https://juejin.cn/post/7581385235965444130</link>    <guid>https://juejin.cn/post/7581385235965444130</guid>    <pubDate>2025-12-09T02:55:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581385235965444130" data-draft-id="7581437632853819432" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ€§èƒ½é£è·ƒï¼è¿™å‡ ä¸ªç°ä»£æµè§ˆå™¨APIè®©é¡µé¢åŠ è½½é€Ÿåº¦æå‡è‡³90+"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-09T02:55:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§çŸ¥é—²é—²i"/> <meta itemprop="url" content="https://juejin.cn/user/3799545205237111"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ€§èƒ½é£è·ƒï¼è¿™å‡ ä¸ªç°ä»£æµè§ˆå™¨APIè®©é¡µé¢åŠ è½½é€Ÿåº¦æå‡è‡³90+
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3799545205237111/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§çŸ¥é—²é—²i
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T02:55:17.000Z" title="Tue Dec 09 2025 02:55:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>===</p>
<p>é¡¹ç›®ä¸Šçº¿åï¼Œéšç€ç”¨æˆ·é‡å¢é•¿ï¼Œé¡µé¢æ€§èƒ½æ€¥å‰§ä¸‹é™ï¼Ÿé¦–å±åŠ è½½è¶…è¿‡3ç§’ï¼Œæ»šåŠ¨æ—¶é¢‘ç¹æ‰å¸§ï¼Œç”šè‡³å¯¼è‡´è®¾å¤‡å‘çƒ«ï¼Ÿè¿™äº›é—®é¢˜ä¸ä»…å½±å“ç”¨æˆ·ä½“éªŒï¼Œä¹Ÿç›´æ¥å½±å“ä¸šåŠ¡è½¬åŒ–ç‡ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘å°†åˆ†äº«åœ¨çœŸå®é¡¹ç›®ä¸­éªŒè¯æœ‰æ•ˆçš„å‡ ä¸ªä¸ªæµè§ˆå™¨APIï¼Œå¸®åŠ©ä½ å°†é¡µé¢æ€§èƒ½ä¼˜åŒ–ï¼Œè®©ç”¨æˆ·ä½“éªŒç„•ç„¶ä¸€æ–°ã€‚</p>
<h2 data-id="heading-0">1. IntersectionObserverï¼šæ™ºèƒ½æ‡’åŠ è½½è§£å†³æ–¹æ¡ˆ</h2>
<p>ä¼ ç»Ÿæ»šåŠ¨ç›‘å¬æ–¹å¼ä¼šå¯¼è‡´ä¸»çº¿ç¨‹é˜»å¡ï¼Œè€ŒIntersectionObserverå°†å…ƒç´ å¯è§æ€§åˆ¤æ–­äº¤ç»™æµè§ˆå™¨ï¼Œæ•ˆç‡æ˜¾è‘—æå‡ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">// åˆ›å»ºæ‡’åŠ è½½è§‚å¯Ÿå™¨
const <span class="hljs-attr">lazyLoadObserver</span> = new IntersectionObserver((entries) =&gt; {
  entries.forEach(<span class="hljs-attr">entry</span> =&gt; {
    if (entry.isIntersecting) {
      const <span class="hljs-attr">element</span> = entry.target<span class="hljs-comment">;</span>
      
      // å›¾ç‰‡æ‡’åŠ è½½
      if (<span class="hljs-attr">element.tagName</span> === <span class="hljs-string">'IMG'</span>) {
        <span class="hljs-attr">element.src</span> = element.dataset.src<span class="hljs-comment">;</span>
      }
      
      // ç»„ä»¶æ‡’åŠ è½½
      if (element.dataset.module) {
        loadModule(element.dataset.module)<span class="hljs-comment">;</span>
      }
      
      // åœæ­¢è§‚å¯Ÿå·²åŠ è½½å…ƒç´ 
      lazyLoadObserver.unobserve(element)<span class="hljs-comment">;</span>
    }
  })<span class="hljs-comment">;</span>
}, {
  rootMargin: '50px', // æå‰50pxå¼€å§‹åŠ è½½
  threshold: 0.1
})<span class="hljs-comment">;</span>
â€‹
// åˆå§‹åŒ–æ‡’åŠ è½½å…ƒç´ 
document.querySelectorAll('<span class="hljs-section">[data-lazy]</span>').forEach(<span class="hljs-attr">el</span> =&gt; {
  lazyLoadObserver.observe(el)<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<p><strong>æ•ˆæœ</strong>ï¼šé¦–å±åŠ è½½æ—¶é—´å‡å°‘40%ï¼Œæ»šåŠ¨æµç•…åº¦æå‡60%ï¼ŒCPUå ç”¨ç‡é™ä½30%ã€‚</p>
<h2 data-id="heading-1">2. requestIdleCallbackï¼šæ™ºèƒ½ä»»åŠ¡è°ƒåº¦å™¨</h2>
<p>å°†éå…³é”®ä»»åŠ¡æ¨è¿Ÿåˆ°æµè§ˆå™¨ç©ºé—²æ—¶æ®µæ‰§è¡Œï¼Œé¿å…é˜»å¡ç”¨æˆ·äº¤äº’ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// åˆ›å»ºä½ä¼˜å…ˆçº§ä»»åŠ¡é˜Ÿåˆ—</span>
const lowPriorityTasks = <span class="hljs-selector-attr">[  () =&gt; sendAnalytics(<span class="hljs-string">'page_view'</span>),  () =&gt; prefetchNextPageResources(),  () =&gt; cleanUpOldCache(),]</span>;
â€‹
<span class="hljs-comment">// åœ¨ç©ºé—²æ—¶æ®µæ‰§è¡Œä»»åŠ¡</span>
function <span class="hljs-built_in">scheduleIdleTasks</span>() {
  <span class="hljs-built_in">requestIdleCallback</span>((deadline) =&gt; {
    while (deadline.timeRemaining() &gt; <span class="hljs-number">0</span> &amp;&amp; lowPriorityTasks<span class="hljs-selector-class">.length</span> &gt; <span class="hljs-number">0</span>) {
      const task = lowPriorityTasks<span class="hljs-selector-class">.shift</span>();
      <span class="hljs-built_in">task</span>();
    }
    
    <span class="hljs-comment">// å¦‚æœè¿˜æœ‰ä»»åŠ¡æœªæ‰§è¡Œï¼Œç»§ç»­è°ƒåº¦</span>
    if (lowPriorityTasks.length &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-built_in">scheduleIdleTasks</span>();
    }
  }, { timeout: <span class="hljs-number">2000</span> }); <span class="hljs-comment">// æœ€é•¿ç­‰å¾…2ç§’</span>
}
â€‹
<span class="hljs-comment">// é¡µé¢åŠ è½½å®Œæˆåå¼€å§‹è°ƒåº¦</span>
window<span class="hljs-selector-class">.addEventListener</span>('load', scheduleIdleTasks);
</code></pre>
<h2 data-id="heading-2">3. requestAnimationFrameï¼šæµç•…åŠ¨ç”»çš„ä¿è¯</h2>
<p>å‘Šåˆ«<code>setTimeout</code>å¡é¡¿ï¼Œè®©åŠ¨ç”»ä¸å±å¹•åˆ·æ–°ç‡å®Œç¾åŒæ­¥ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">class SmoothAnimator {
  constructor(element, <span class="hljs-attr">duration</span> = <span class="hljs-number">300</span>) {
    <span class="hljs-attr">this.element</span> = element<span class="hljs-comment">;</span>
    <span class="hljs-attr">this.duration</span> = duration<span class="hljs-comment">;</span>
    <span class="hljs-attr">this.startTime</span> = null<span class="hljs-comment">;</span>
  }
  
  animate(property, startValue, endValue) {
    const <span class="hljs-attr">animateFrame</span> = (currentTime) =&gt; {
      if (!this.startTime) <span class="hljs-attr">this.startTime</span> = currentTime<span class="hljs-comment">;</span>
      
      const <span class="hljs-attr">elapsed</span> = currentTime - this.startTime<span class="hljs-comment">;</span>
      const <span class="hljs-attr">progress</span> = Math.min(elapsed / this.duration, <span class="hljs-number">1</span>)<span class="hljs-comment">;</span>
      
      // ä½¿ç”¨ç¼“åŠ¨å‡½æ•°æå‡åŠ¨ç”»è´¨æ„Ÿ
      const <span class="hljs-attr">easedProgress</span> = this.easeOutCubic(progress)<span class="hljs-comment">;</span>
      const <span class="hljs-attr">currentValue</span> = startValue + (endValue - startValue) * easedProgress<span class="hljs-comment">;</span>
      
      this.element.style<span class="hljs-section">[property]</span> = currentValue<span class="hljs-comment">;</span>
      
      if (progress &lt; 1) {
        requestAnimationFrame(animateFrame)<span class="hljs-comment">;</span>
      }
    }<span class="hljs-comment">;</span>
    
    requestAnimationFrame(animateFrame)<span class="hljs-comment">;</span>
  }
  
  easeOutCubic(t) {
    return 1 - Math.pow(1 - t, 3)<span class="hljs-comment">;</span>
  }
}
â€‹
// ä½¿ç”¨ç¤ºä¾‹
const <span class="hljs-attr">animator</span> = new SmoothAnimator(document.getElementById(<span class="hljs-string">'box'</span>))<span class="hljs-comment">;</span>
animator.animate('translateX', 0, 300)<span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-3">4. ResizeObserverï¼šå“åº”å¼è®¾è®¡çš„åˆ©å™¨</h2>
<p>ç²¾ç¡®ç›‘å¬å…ƒç´ å°ºå¯¸å˜åŒ–ï¼Œå‘Šåˆ«ä¸å¿…è¦çš„å…¨å±€é‡æ’ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ResponsiveComponent</span> {
  <span class="hljs-keyword">constructor</span>(container) {
    <span class="hljs-keyword">this</span>.container = container;
    <span class="hljs-keyword">this</span>.resizeObserver = new ResizeObserver(<span class="hljs-keyword">this</span>.handleResize.bind(<span class="hljs-keyword">this</span>));
    <span class="hljs-keyword">this</span>.resizeObserver.observe(container);
    
    <span class="hljs-comment">// é˜²æŠ–å¤„ç†ï¼Œé¿å…é¢‘ç¹è§¦å‘</span>
    <span class="hljs-keyword">this</span>.debouncedResize = <span class="hljs-keyword">this</span>.debounce(<span class="hljs-keyword">this</span>.updateLayout, <span class="hljs-number">100</span>);
  }
  
  handleResize(entries) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry of entries) {
      <span class="hljs-keyword">const</span> { width, height } = entry.contentRect;
      
      <span class="hljs-comment">// åªæœ‰å°ºå¯¸å‘ç”Ÿæ˜¾è‘—å˜åŒ–æ—¶æ‰æ›´æ–°</span>
      <span class="hljs-keyword">if</span> (Math.abs(width - <span class="hljs-keyword">this</span>.lastWidth) &gt; <span class="hljs-number">10</span> || 
          Math.abs(height - <span class="hljs-keyword">this</span>.lastHeight) &gt; <span class="hljs-number">10</span>) {
        <span class="hljs-keyword">this</span>.debouncedResize(width, height);
        <span class="hljs-keyword">this</span>.lastWidth = width;
        <span class="hljs-keyword">this</span>.lastHeight = height;
      }
    }
  }
  
  updateLayout(width, height) {
    <span class="hljs-comment">// æ ¹æ®æ–°å°ºå¯¸æ›´æ–°å¸ƒå±€</span>
    <span class="hljs-keyword">if</span> (width &lt; <span class="hljs-number">768</span>) <span class="hljs-keyword">this</span>.applyMobileLayout();
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (width &lt; <span class="hljs-number">1024</span>) <span class="hljs-keyword">this</span>.applyTabletLayout();
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">this</span>.applyDesktopLayout();
  }
  
  debounce(fn, delay) {
    let timer;
    <span class="hljs-keyword">return</span> (...args) =&gt; {
      clearTimeout(timer);
      timer = setTimeout(() =&gt; fn.apply(<span class="hljs-keyword">this</span>, args), delay);
    };
  }
}
</code></pre>
<h2 data-id="heading-4">5. performance APIï¼šç²¾å‡†æ€§èƒ½ç›‘æ§ç³»ç»Ÿ</h2>
<p>æ„å»ºå®Œæ•´çš„æ€§èƒ½ç›‘æ§ä½“ç³»ï¼Œæ‰¾å‡ºçœŸæ­£çš„æ€§èƒ½ç“¶é¢ˆã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">PerformanceMonitor</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">metrics</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
  }
  
  <span class="hljs-comment">// æ ‡è®°å…³é”®æ—¶é—´ç‚¹</span>
  <span class="hljs-title function_">mark</span>(<span class="hljs-params">name</span>) {
    performance.<span class="hljs-title function_">mark</span>(<span class="hljs-string">`<span class="hljs-subst">${name}</span>-start`</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">metrics</span>.<span class="hljs-title function_">set</span>(name, {
      <span class="hljs-attr">start</span>: performance.<span class="hljs-title function_">now</span>(),
      <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>
    });
  }
  
  <span class="hljs-comment">// æµ‹é‡æ€§èƒ½æŒ‡æ ‡</span>
  <span class="hljs-title function_">measure</span>(<span class="hljs-params">metricName, startMark, endMark</span>) {
    performance.<span class="hljs-title function_">measure</span>(metricName, startMark, endMark);
    
    <span class="hljs-keyword">const</span> measures = performance.<span class="hljs-title function_">getEntriesByName</span>(metricName);
    <span class="hljs-keyword">const</span> lastMeasure = measures[measures.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>];
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${metricName}</span>: <span class="hljs-subst">${lastMeasure.duration.toFixed(<span class="hljs-number">2</span>)}</span>ms`</span>);
    
    <span class="hljs-comment">// ä¸ŠæŠ¥åˆ°ç›‘æ§ç³»ç»Ÿ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reportMetric</span>(metricName, lastMeasure.<span class="hljs-property">duration</span>);
  }
  
  <span class="hljs-comment">// ç›‘æ§é•¿ä»»åŠ¡</span>
  <span class="hljs-title function_">monitorLongTasks</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PerformanceObserver</span>(<span class="hljs-function">(<span class="hljs-params">list</span>) =&gt;</span> {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> list.<span class="hljs-title function_">getEntries</span>()) {
        <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">duration</span> &gt; <span class="hljs-number">50</span>) { <span class="hljs-comment">// è¶…è¿‡50msçš„ä»»åŠ¡</span>
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'é•¿ä»»åŠ¡è­¦å‘Š:'</span>, entry);
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">optimizeLongTask</span>(entry);
        }
      }
    });
    
    observer.<span class="hljs-title function_">observe</span>({ <span class="hljs-attr">entryTypes</span>: [<span class="hljs-string">'longtask'</span>] });
  }
  
  <span class="hljs-comment">// ç›‘æ§é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ</span>
  <span class="hljs-title function_">monitorFID</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PerformanceObserver</span>(<span class="hljs-function">(<span class="hljs-params">list</span>) =&gt;</span> {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> list.<span class="hljs-title function_">getEntries</span>()) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ:'</span>, entry.<span class="hljs-property">processingStart</span> - entry.<span class="hljs-property">startTime</span>);
      }
    });
    
    observer.<span class="hljs-title function_">observe</span>({ <span class="hljs-attr">entryTypes</span>: [<span class="hljs-string">'first-input'</span>] });
  }
}
</code></pre>
<h2 data-id="heading-5">6. æ™ºèƒ½é¢„åŠ è½½ç­–ç•¥</h2>
<p>ç»“åˆpreloadå’Œprefetchï¼Œæ‰“é€ æ— ç¼åŠ è½½ä½“éªŒã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- å…³é”®CSSç«‹å³åŠ è½½ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"critical.css"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"style"</span> <span class="hljs-attr">onload</span>=<span class="hljs-string">"this.rel='stylesheet'"</span>&gt;</span>
  
  <span class="hljs-comment">&lt;!-- é¦–å±å¿…è¦å­—ä½“ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"fonts.woff2"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"font"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"font/woff2"</span> <span class="hljs-attr">crossorigin</span>&gt;</span>
  
  <span class="hljs-comment">&lt;!-- é¦–å±å¿…è¦å›¾ç‰‡ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"hero-image.jpg"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"image"</span>&gt;</span>
  
  <span class="hljs-comment">&lt;!-- éå…³é”®CSSå¼‚æ­¥åŠ è½½ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"prefetch"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"non-critical.css"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"style"</span>&gt;</span>
  
  <span class="hljs-comment">&lt;!-- é¢„åŠ è½½ä¸‹ä¸€é¡µèµ„æº --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"prefetch"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"next-page.js"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"script"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"prefetch"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"next-page-data.json"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"fetch"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>

// åŠ¨æ€é¢„åŠ è½½
class ResourcePreloader {
  constructor() {
    this.visibleLinks = new Set();
    this.initIntersectionObserver();
  }
  
  initIntersectionObserver() {
    const observer = new IntersectionObserver((entries) =&gt; {
      entries.forEach(entry =&gt; {
        if (entry.isIntersecting) {
          const link = entry.target.href;
          if (!this.visibleLinks.has(link)) {
            this.prefetchResource(link);
            this.visibleLinks.add(link);
          }
        }
      });
    });
    
    // ç›‘å¬é¡µé¢å†…æ‰€æœ‰é“¾æ¥
    document.querySelectorAll('a[href^="/"]').forEach(link =&gt; {
      observer.observe(link);
    });
  }
  
  prefetchResource(url) {
    // åˆ›å»ºprefetché“¾æ¥
    const link = document.createElement('link');
    link.rel = 'prefetch';
    link.href = url;
    link.as = this.getResourceType(url);
    document.head.appendChild(link);
  }
  
  getResourceType(url) {
    if (url.endsWith('.js')) return 'script';
    if (url.endsWith('.css')) return 'style';
    if (url.endsWith('.json')) return 'fetch';
    return 'fetch';
  }
}
</code></pre>
<h2 data-id="heading-6">7. Cache API + Service Workerï¼šç¦»çº¿ä¼˜å…ˆæ¶æ„</h2>
<p>æ„å»ºå¯é çš„ç¦»çº¿ç¼“å­˜ç­–ç•¥ï¼Œæå‡é‡å¤è®¿é—®æ€§èƒ½ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">// service-worker.js
const <span class="hljs-attr">CACHE_VERSION</span> = <span class="hljs-string">'v1.3'</span><span class="hljs-comment">;</span>
const <span class="hljs-attr">CACHE_NAME</span> = `app-cache-<span class="hljs-variable">${CACHE_VERSION}</span>`<span class="hljs-comment">;</span>
â€‹
// é™æ€èµ„æºç¼“å­˜ç­–ç•¥
const <span class="hljs-attr">STATIC_RESOURCES</span> = [
  <span class="hljs-string">'/'</span>,
  <span class="hljs-string">'/index.html'</span>,
  <span class="hljs-string">'/main.css'</span>,
  <span class="hljs-string">'/app.js'</span>,
  <span class="hljs-string">'/manifest.json'</span>
]<span class="hljs-comment">;</span>
â€‹
// å®‰è£…é˜¶æ®µï¼šç¼“å­˜æ ¸å¿ƒèµ„æº
self.addEventListener('install', <span class="hljs-attr">event</span> =&gt; {
  event.waitUntil(
    caches.open(CACHE_NAME)
      .then(<span class="hljs-attr">cache</span> =&gt; cache.addAll(STATIC_RESOURCES))
      .then(() =&gt; self.skipWaiting())
  )<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
â€‹
// æ¿€æ´»é˜¶æ®µï¼šæ¸…ç†æ—§ç¼“å­˜
self.addEventListener('activate', <span class="hljs-attr">event</span> =&gt; {
  event.waitUntil(
    caches.keys().then(<span class="hljs-attr">cacheNames</span> =&gt; {
      return Promise.all(
        cacheNames.map(<span class="hljs-attr">cacheName</span> =&gt; {
          if (cacheName !== CACHE_NAME) {
            return caches.delete(cacheName)<span class="hljs-comment">;</span>
          }
        })
      )<span class="hljs-comment">;</span>
    }).then(() =&gt; self.clients.claim())
  )<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
â€‹
// è¯·æ±‚æ‹¦æˆªï¼šæ™ºèƒ½ç¼“å­˜ç­–ç•¥
self.addEventListener('fetch', <span class="hljs-attr">event</span> =&gt; {
  const <span class="hljs-attr">request</span> = event.request<span class="hljs-comment">;</span>
  
  // å¿½ç•¥éGETè¯·æ±‚
  if (request.method !== 'GET') return<span class="hljs-comment">;</span>
  
  // å¿½ç•¥chrome-extensionç­‰ç‰¹æ®Šåè®®
  if (!request.url.startsWith('http')) return<span class="hljs-comment">;</span>
  
  event.respondWith(
    caches.match(request).then(<span class="hljs-attr">cachedResponse</span> =&gt; {
      // ç½‘ç»œä¼˜å…ˆï¼Œç¼“å­˜å…œåº•ç­–ç•¥
      const <span class="hljs-attr">fetchPromise</span> = fetch(request).then(networkResponse =&gt; {
        // å¦‚æœæ˜¯æˆåŠŸå“åº”ï¼Œæ›´æ–°ç¼“å­˜
        if (networkResponse.ok) {
          const <span class="hljs-attr">clone</span> = networkResponse.clone()<span class="hljs-comment">;</span>
          caches.open(CACHE_NAME).then(<span class="hljs-attr">cache</span> =&gt; {
            cache.put(request, clone)<span class="hljs-comment">;</span>
          })<span class="hljs-comment">;</span>
        }
        return networkResponse<span class="hljs-comment">;</span>
      }).catch(() =&gt; {
        // ç½‘ç»œå¤±è´¥ï¼Œè¿”å›ç¼“å­˜
        if (cachedResponse) return cachedResponse<span class="hljs-comment">;</span>
        
        // è¿ç¼“å­˜ä¹Ÿæ²¡æœ‰ï¼Œè¿”å›ç¦»çº¿é¡µé¢
        return caches.match('/offline.html')<span class="hljs-comment">;</span>
      })<span class="hljs-comment">;</span>
      
      return cachedResponse || fetchPromise<span class="hljs-comment">;</span>
    })
  )<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-7">8. Web Workersï¼šå¤æ‚è®¡ç®—çš„åå°å¤„ç†</h2>
<p>å°†CPUå¯†é›†å‹ä»»åŠ¡ç§»å‡ºä¸»çº¿ç¨‹ï¼Œä¿æŒUIå“åº”æ€§ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä¸»çº¿ç¨‹ï¼šä»»åŠ¡ç®¡ç†</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ComputationManager</span> {
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">this</span>.worker = new Worker(<span class="hljs-string">'compute.worker.js'</span>);
    <span class="hljs-keyword">this</span>.callbacks = new Map();
    <span class="hljs-keyword">this</span>.taskId = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">this</span>.worker.onmessage = (event) =&gt; {
      <span class="hljs-keyword">const</span> { taskId, result, type } = event.<span class="hljs-keyword">data</span>;
      
      <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'result'</span> &amp;&amp; <span class="hljs-keyword">this</span>.callbacks.has(taskId)) {
        <span class="hljs-keyword">const</span> { resolve, reject } = <span class="hljs-keyword">this</span>.callbacks.<span class="hljs-keyword">get</span>(taskId);
        resolve(result);
        <span class="hljs-keyword">this</span>.callbacks.delete(taskId);
      }
    };
    
    <span class="hljs-keyword">this</span>.worker.onerror = (error) =&gt; {
      console.error(<span class="hljs-string">'Worker error:'</span>, error);
      <span class="hljs-comment">// é”™è¯¯å¤„ç†é€»è¾‘</span>
    };
  }
  
  <span class="hljs-comment">// æäº¤è®¡ç®—ä»»åŠ¡</span>
  submitTask(<span class="hljs-keyword">data</span>, transferable = []) {
    <span class="hljs-keyword">return</span> new Promise((resolve, reject) =&gt; {
      <span class="hljs-keyword">const</span> taskId = ++<span class="hljs-keyword">this</span>.taskId;
      
      <span class="hljs-keyword">this</span>.callbacks.<span class="hljs-keyword">set</span>(taskId, { resolve, reject });
      
      <span class="hljs-keyword">this</span>.worker.postMessage(
        { taskId, <span class="hljs-keyword">data</span> },
        transferable.length ? transferable : undefined
      );
    });
  }
  
  <span class="hljs-comment">// æ‰¹é‡å¤„ç†å¤§é‡æ•°æ®</span>
  async processLargeDataset(dataset) {
    <span class="hljs-comment">// åˆ†å‰²æ•°æ®ï¼Œé¿å…å•æ¬¡å¤„ç†è¿‡å¤§</span>
    <span class="hljs-keyword">const</span> chunkSize = <span class="hljs-number">1000</span>;
    <span class="hljs-keyword">const</span> chunks = [];
    
    <span class="hljs-keyword">for</span> (let i = <span class="hljs-number">0</span>; i &lt; dataset.length; i += chunkSize) {
      chunks.push(dataset.slice(i, i + chunkSize));
    }
    
    <span class="hljs-comment">// å¹¶è¡Œå¤„ç†æ‰€æœ‰åˆ†å—</span>
    <span class="hljs-keyword">const</span> results = await Promise.all(
      chunks.map(chunk =&gt; <span class="hljs-keyword">this</span>.submitTask(chunk))
    );
    
    <span class="hljs-comment">// åˆå¹¶ç»“æœ</span>
    <span class="hljs-keyword">return</span> results.flat();
  }
}
â€‹
<span class="hljs-comment">// Workerçº¿ç¨‹ï¼šä¸“æ³¨è®¡ç®—</span>
<span class="hljs-comment">// compute.worker.js</span>
self.onmessage = function(event) {
  <span class="hljs-keyword">const</span> { taskId, <span class="hljs-keyword">data</span> } = event.<span class="hljs-keyword">data</span>;
  
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// æ‰§è¡Œå¤æ‚è®¡ç®—</span>
    <span class="hljs-keyword">const</span> result = performHeavyComputation(<span class="hljs-keyword">data</span>);
    
    <span class="hljs-comment">// è¿”å›ç»“æœ</span>
    self.postMessage({
      taskId,
      type: <span class="hljs-string">'result'</span>,
      result
    });
  } <span class="hljs-keyword">catch</span> (error) {
    self.postMessage({
      taskId,
      type: <span class="hljs-string">'error'</span>,
      error: error.message
    });
  }
};
â€‹
function performHeavyComputation(<span class="hljs-keyword">data</span>) {
  <span class="hljs-comment">// å¤æ‚çš„è®¡ç®—é€»è¾‘</span>
  <span class="hljs-comment">// ä¾‹å¦‚ï¼šæ•°æ®æ’åºã€å›¾åƒå¤„ç†ã€åŠ å¯†è§£å¯†ç­‰</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">data</span>.map(item =&gt; transform(item));
}
</code></pre>
<h2 data-id="heading-8">9. Page Visibility APIï¼šæ™ºèƒ½èµ„æºç®¡ç†</h2>
<p>æ ¹æ®é¡µé¢å¯è§çŠ¶æ€ä¼˜åŒ–èµ„æºä½¿ç”¨ï¼Œæå‡èƒ½æ•ˆè¡¨ç°ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ResourceManager</span> {
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">this</span>.timers = new Map();
    <span class="hljs-keyword">this</span>.connections = new Set();
    <span class="hljs-keyword">this</span>.isVisible = <span class="hljs-literal">true</span>;
    
    <span class="hljs-keyword">this</span>.initVisibilityListener();
    <span class="hljs-keyword">this</span>.initPerformanceMonitor();
  }
  
  initVisibilityListener() {
    document.addEventListener(<span class="hljs-string">'visibilitychange'</span>, () =&gt; {
      <span class="hljs-keyword">this</span>.isVisible = document.visibilityState === <span class="hljs-string">'visible'</span>;
      
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isVisible) {
        <span class="hljs-keyword">this</span>.onPageShow();
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">this</span>.onPageHide();
      }
    });
    
    <span class="hljs-comment">// ç›‘å¬é¡µé¢å…³é—­å‰äº‹ä»¶</span>
    window.addEventListener(<span class="hljs-string">'beforeunload'</span>, () =&gt; {
      <span class="hljs-keyword">this</span>.cleanup();
    });
  }
  
  onPageHide() {
    console.log(<span class="hljs-string">'é¡µé¢è¿›å…¥åå°ï¼Œå¼€å§‹èŠ‚æµ'</span>);
    
    <span class="hljs-comment">// æš‚åœè§†é¢‘å’ŒéŸ³é¢‘</span>
    <span class="hljs-keyword">this</span>.pauseMediaElements();
    
    <span class="hljs-comment">// é™ä½å®šæ—¶å™¨é¢‘ç‡</span>
    <span class="hljs-keyword">this</span>.throttleTimers();
    
    <span class="hljs-comment">// æš‚åœWebSocketè¿æ¥</span>
    <span class="hljs-keyword">this</span>.pauseConnections();
    
    <span class="hljs-comment">// åœæ­¢åŠ¨ç”»</span>
    <span class="hljs-keyword">this</span>.pauseAnimations();
  }
  
  onPageShow() {
    console.log(<span class="hljs-string">'é¡µé¢å›åˆ°å‰å°ï¼Œæ¢å¤åŠŸèƒ½'</span>);
    
    <span class="hljs-comment">// æ¢å¤åª’ä½“æ’­æ”¾</span>
    <span class="hljs-keyword">this</span>.resumeMediaElements();
    
    <span class="hljs-comment">// æ¢å¤å®šæ—¶å™¨</span>
    <span class="hljs-keyword">this</span>.restoreTimers();
    
    <span class="hljs-comment">// æ¢å¤è¿æ¥</span>
    <span class="hljs-keyword">this</span>.resumeConnections();
    
    <span class="hljs-comment">// åŒæ­¥æ•°æ®</span>
    <span class="hljs-keyword">this</span>.syncData();
  }
  
  <span class="hljs-comment">// æ™ºèƒ½å®šæ—¶å™¨ç®¡ç†</span>
  createSmartTimer(callback, interval, options = {}) {
    <span class="hljs-keyword">const</span> timerId = Symbol(<span class="hljs-string">'timer'</span>);
    let lastRun = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">const</span> smartCallback = () =&gt; {
      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.isVisible &amp;&amp; options.pauseWhenHidden) {
        <span class="hljs-keyword">return</span>;
      }
      
      <span class="hljs-keyword">const</span> now = Date.now();
      <span class="hljs-keyword">if</span> (now - lastRun &gt;= interval) {
        callback();
        lastRun = now;
      }
    };
    
    <span class="hljs-keyword">const</span> intervalId = setInterval(smartCallback, 
      <span class="hljs-keyword">this</span>.isVisible ? interval : (options.hiddenInterval || interval * <span class="hljs-number">3</span>));
    
    <span class="hljs-keyword">this</span>.timers.<span class="hljs-keyword">set</span>(timerId, {
      intervalId,
      originalInterval: interval,
      callback: smartCallback,
      options
    });
    
    <span class="hljs-keyword">return</span> timerId;
  }
  
  throttleTimers() {
    <span class="hljs-keyword">this</span>.timers.forEach(timer =&gt; {
      <span class="hljs-keyword">if</span> (timer.options.pauseWhenHidden) {
        clearInterval(timer.intervalId);
      } <span class="hljs-keyword">else</span> {
        clearInterval(timer.intervalId);
        timer.intervalId = setInterval(
          timer.callback, 
          timer.options.hiddenInterval || timer.originalInterval * <span class="hljs-number">3</span>
        );
      }
    });
  }
}
</code></pre>
<p><strong>å…³é”®å»ºè®®</strong>ï¼š</p>
<ol>
<li>
<p>ä»å½±å“æœ€å¤§çš„ä¼˜åŒ–å¼€å§‹ï¼ˆæ‡’åŠ è½½ã€é¢„åŠ è½½ï¼‰</p>
</li>
<li>
<p>å»ºç«‹æŒç»­çš„æ€§èƒ½ç›‘æ§ä½“ç³»</p>
</li>
<li>
<p>è®¾ç½®æ˜ç¡®çš„æ€§èƒ½é¢„ç®—</p>
</li>
<li>
<p>å®šæœŸè¿›è¡Œæ€§èƒ½å®¡è®¡</p>
</li>
<li>
<p>åœ¨çœŸå®è®¾å¤‡ä¸Šè¿›è¡Œæµ‹è¯•</p>
</li>
</ol>
<p>æ€§èƒ½ä¼˜åŒ–ä¸æ˜¯ä¸€æ¬¡æ€§ä»»åŠ¡ï¼Œè€Œæ˜¯ä¸€ä¸ªæŒç»­æ”¹è¿›çš„è¿‡ç¨‹ã€‚æ¯ä¸€ä¸ªä¼˜åŒ–ç‚¹çš„ç§¯ç´¯ï¼Œæœ€ç»ˆå°†å¸¦æ¥è´¨çš„é£è·ƒã€‚å¼€å§‹è¡ŒåŠ¨å§ï¼Œè®©ä½ çš„åº”ç”¨åœ¨æ€§èƒ½ç«äº‰ä¸­è„±é¢–è€Œå‡ºï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…³äºæ™ºèƒ½ä½“ï¼ˆAI Agentï¼‰å…¥é—¨ï¼Œä¸€ç¯‡è¶…è¯¦ç»†çš„æ€»ç»“]]></title>    <link>https://juejin.cn/post/7581619505584144435</link>    <guid>https://juejin.cn/post/7581619505584144435</guid>    <pubDate>2025-12-09T02:55:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581619505584144435" data-draft-id="7581619505584078899" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…³äºæ™ºèƒ½ä½“ï¼ˆAI Agentï¼‰å…¥é—¨ï¼Œä¸€ç¯‡è¶…è¯¦ç»†çš„æ€»ç»“"/> <meta itemprop="keywords" content="Agent,LLM,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-09T02:55:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…³äºæ™ºèƒ½ä½“ï¼ˆAI Agentï¼‰å…¥é—¨ï¼Œä¸€ç¯‡è¶…è¯¦ç»†çš„æ€»ç»“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T02:55:25.000Z" title="Tue Dec 09 2025 02:55:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»43åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<p>AI æ­£ä»¥å‰æ‰€æœªæœ‰çš„é€Ÿåº¦å‘å±•ï¼Œæ–°çš„æœºé‡ä¸æ–­æ¶Œç°ï¼Œå¦‚æœä½ å¸Œæœ›ï¼šä¸æŠ€æœ¯ä¸“å®¶ã€äº§å“ç»ç†å’Œåˆ›ä¸šè€…æ·±åº¦äº¤æµï¼Œä¸€èµ·æ¢ç´¢ AIå¦‚ä½•æ”¹å˜å„è¡Œå„ä¸šã€‚</p>
<h2 data-id="heading-0">ç¬¬ä¸€ç« ï¼šåˆè¯†æ™ºèƒ½ä½“</h2>
<p>æ¬¢è¿æ¥åˆ°æ™ºèƒ½ä½“çš„ä¸–ç•Œï¼åœ¨äººå·¥æ™ºèƒ½æµªæ½®å¸­å·å…¨çƒçš„ä»Šå¤©ï¼Œ<strong>æ™ºèƒ½ä½“ï¼ˆAgentï¼‰</strong> å·²æˆä¸ºé©±åŠ¨æŠ€æœ¯å˜é©ä¸åº”ç”¨åˆ›æ–°çš„æ ¸å¿ƒæ¦‚å¿µä¹‹ä¸€ã€‚æ— è®ºä½ çš„å¿—å‘æ˜¯æˆä¸ºAIé¢†åŸŸçš„ç ”ç©¶è€…ã€å·¥ç¨‹å¸ˆï¼Œè¿˜æ˜¯å¸Œæœ›æ·±åˆ»ç†è§£æŠ€æœ¯å‰æ²¿çš„è§‚å¯Ÿè€…ï¼ŒæŒæ¡æ™ºèƒ½ä½“çš„æœ¬è´¨ï¼Œéƒ½å°†æ˜¯ä½ çŸ¥è¯†ä½“ç³»ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€ç¯ã€‚</p>
<p>å› æ­¤ï¼Œåœ¨æœ¬ç« ï¼Œè®©æˆ‘ä»¬å›åˆ°åŸç‚¹ï¼Œä¸€èµ·æ¢è®¨å‡ ä¸ªé—®é¢˜ï¼šæ™ºèƒ½ä½“æ˜¯ä»€ä¹ˆï¼Ÿå®ƒæœ‰å“ªäº›ä¸»è¦çš„ç±»å‹ï¼Ÿå®ƒåˆæ˜¯å¦‚ä½•ä¸æˆ‘ä»¬æ‰€å¤„çš„ä¸–ç•Œè¿›è¡Œäº¤äº’çš„ï¼Ÿé€šè¿‡è¿™äº›è®¨è®ºï¼Œå¸Œæœ›èƒ½ä¸ºä½ æœªæ¥çš„å­¦ä¹ å’Œæ¢ç´¢æ‰“ä¸‹åšå®çš„åŸºç¡€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/edcb9f83224744a6abd47ef45a160487~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853724&amp;x-signature=RMdAobfdqy4Zo0DOzLm0onxo0g0%3D" alt="" loading="lazy"/></p>
<p>å›¾ 1.1 æ™ºèƒ½ä½“ä¸ç¯å¢ƒçš„åŸºæœ¬äº¤äº’å¾ªç¯</p>
<p>å¼€æºåœ°å€ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdatawhalechina%2FHello-Agents" target="_blank" title="https://github.com/datawhalechina/Hello-Agents" ref="nofollow noopener noreferrer">github.com/datawhalechâ€¦</a></p>
<p>1.1 ä»€ä¹ˆæ˜¯æ™ºèƒ½ä½“ï¼Ÿ</p>
<p>åœ¨æ¢ç´¢ä»»ä½•ä¸€ä¸ªå¤æ‚æ¦‚å¿µæ—¶ï¼Œæˆ‘ä»¬æœ€å¥½ä»ä¸€ä¸ªç®€æ´çš„å®šä¹‰å¼€å§‹ã€‚åœ¨äººå·¥æ™ºèƒ½é¢†åŸŸï¼Œæ™ºèƒ½ä½“è¢«å®šä¹‰ä¸ºä»»ä½•èƒ½å¤Ÿé€šè¿‡<strong>ä¼ æ„Ÿå™¨ï¼ˆSensorsï¼‰</strong> æ„ŸçŸ¥å…¶æ‰€å¤„<strong>ç¯å¢ƒï¼ˆEnvironmentï¼‰</strong> ï¼Œå¹¶<strong>è‡ªä¸»</strong>åœ°é€šè¿‡<strong>æ‰§è¡Œå™¨ï¼ˆActuatorsï¼‰</strong> é‡‡å–<strong>è¡ŒåŠ¨ï¼ˆActionï¼‰</strong> ä»¥è¾¾æˆç‰¹å®šç›®æ ‡çš„å®ä½“ã€‚</p>
<p>è¿™ä¸ªå®šä¹‰åŒ…å«äº†æ™ºèƒ½ä½“å­˜åœ¨çš„å››ä¸ªåŸºæœ¬è¦ç´ ã€‚ç¯å¢ƒæ˜¯æ™ºèƒ½ä½“æ‰€å¤„çš„å¤–éƒ¨ä¸–ç•Œã€‚å¯¹äºè‡ªåŠ¨é©¾é©¶æ±½è½¦ï¼Œç¯å¢ƒæ˜¯åŠ¨æ€å˜åŒ–çš„é“è·¯äº¤é€šï¼›å¯¹äºä¸€ä¸ªäº¤æ˜“ç®—æ³•ï¼Œç¯å¢ƒåˆ™æ˜¯ç¬æ¯ä¸‡å˜çš„é‡‘èå¸‚åœºã€‚æ™ºèƒ½ä½“å¹¶éä¸ç¯å¢ƒéš”ç¦»ï¼Œå®ƒé€šè¿‡å…¶ä¼ æ„Ÿå™¨æŒç»­åœ°æ„ŸçŸ¥ç¯å¢ƒçŠ¶æ€ã€‚æ‘„åƒå¤´ã€éº¦å…‹é£ã€é›·è¾¾æˆ–å„ç±»<strong>åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ï¼ˆApplication Programming Interface, APIï¼‰</strong> è¿”å›çš„æ•°æ®æµï¼Œéƒ½æ˜¯å…¶æ„ŸçŸ¥èƒ½åŠ›çš„å»¶ä¼¸ã€‚</p>
<p>è·å–ä¿¡æ¯åï¼Œæ™ºèƒ½ä½“éœ€è¦é‡‡å–è¡ŒåŠ¨æ¥å¯¹ç¯å¢ƒæ–½åŠ å½±å“ï¼Œå®ƒé€šè¿‡æ‰§è¡Œå™¨æ¥æ”¹å˜ç¯å¢ƒçš„çŠ¶æ€ã€‚æ‰§è¡Œå™¨å¯ä»¥æ˜¯ç‰©ç†è®¾å¤‡ï¼ˆå¦‚æœºæ¢°è‡‚ã€æ–¹å‘ç›˜ï¼‰æˆ–è™šæ‹Ÿå·¥å…·ï¼ˆå¦‚æ‰§è¡Œä¸€æ®µä»£ç ã€è°ƒç”¨ä¸€ä¸ªæœåŠ¡ï¼‰ã€‚</p>
<p>ç„¶è€Œï¼ŒçœŸæ­£èµ‹äºˆæ™ºèƒ½ä½“"æ™ºèƒ½"çš„ï¼Œæ˜¯å…¶<strong>è‡ªä¸»æ€§ï¼ˆAutonomyï¼‰</strong> ã€‚æ™ºèƒ½ä½“å¹¶éåªæ˜¯è¢«åŠ¨å“åº”å¤–éƒ¨åˆºæ¿€æˆ–ä¸¥æ ¼æ‰§è¡Œé¢„è®¾æŒ‡ä»¤çš„ç¨‹åºï¼Œå®ƒèƒ½å¤ŸåŸºäºå…¶æ„ŸçŸ¥å’Œå†…éƒ¨çŠ¶æ€è¿›è¡Œç‹¬ç«‹å†³ç­–ï¼Œä»¥è¾¾æˆå…¶è®¾è®¡ç›®æ ‡ã€‚è¿™ç§ä»æ„ŸçŸ¥åˆ°è¡ŒåŠ¨çš„é—­ç¯ï¼Œæ„æˆäº†æ‰€æœ‰æ™ºèƒ½ä½“è¡Œä¸ºçš„åŸºç¡€ï¼Œå¦‚å›¾1.1æ‰€ç¤ºã€‚</p>
<h4 data-id="heading-1">1.1.1 ä¼ ç»Ÿè§†è§’ä¸‹çš„æ™ºèƒ½ä½“</h4>
<p>åœ¨å½“å‰<strong>å¤§è¯­è¨€æ¨¡å‹ï¼ˆLarge Language Model, LLMï¼‰</strong> çš„çƒ­æ½®å‡ºç°ä¹‹å‰ï¼Œäººå·¥æ™ºèƒ½çš„å…ˆé©±ä»¬å·²ç»å¯¹â€œæ™ºèƒ½ä½“â€è¿™ä¸€æ¦‚å¿µè¿›è¡Œäº†æ•°åå¹´çš„æ¢ç´¢ä¸æ„å»ºã€‚è¿™äº›å¦‚ä»Šæˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œä¼ ç»Ÿæ™ºèƒ½ä½“â€çš„èŒƒå¼ï¼Œå¹¶éå•ä¸€çš„é™æ€æ¦‚å¿µï¼Œè€Œæ˜¯ç»å†äº†ä¸€æ¡ä»ç®€å•åˆ°å¤æ‚ã€ä»è¢«åŠ¨ååº”åˆ°ä¸»åŠ¨å­¦ä¹ çš„æ¸…æ™°æ¼”è¿›è·¯çº¿ã€‚</p>
<p>è¿™ä¸ªæ¼”è¿›çš„èµ·ç‚¹ï¼Œæ˜¯é‚£äº›ç»“æ„æœ€ç®€å•çš„<strong>åå°„æ™ºèƒ½ä½“ï¼ˆSimple Reflex Agentï¼‰</strong> ã€‚å®ƒä»¬çš„å†³ç­–æ ¸å¿ƒç”±å·¥ç¨‹å¸ˆæ˜ç¡®è®¾è®¡çš„â€œæ¡ä»¶-åŠ¨ä½œâ€è§„åˆ™æ„æˆï¼Œå¦‚å›¾1.2æ‰€ç¤ºã€‚ç»å…¸çš„è‡ªåŠ¨æ’æ¸©å™¨ä¾¿æ˜¯å¦‚æ­¤ï¼šè‹¥ä¼ æ„Ÿå™¨æ„ŸçŸ¥çš„å®¤æ¸©é«˜äºè®¾å®šå€¼ï¼Œåˆ™å¯åŠ¨åˆ¶å†·ç³»ç»Ÿã€‚</p>
<p>è¿™ç§æ™ºèƒ½ä½“å®Œå…¨ä¾èµ–äºå½“å‰çš„æ„ŸçŸ¥è¾“å…¥ï¼Œä¸å…·å¤‡è®°å¿†æˆ–é¢„æµ‹èƒ½åŠ›ã€‚å®ƒåƒä¸€ç§æ•°å­—åŒ–çš„æœ¬èƒ½ï¼Œå¯é ä¸”é«˜æ•ˆï¼Œä½†ä¹Ÿå› æ­¤æ— æ³•åº”å¯¹éœ€è¦ç†è§£ä¸Šä¸‹æ–‡çš„å¤æ‚ä»»åŠ¡ã€‚å®ƒçš„å±€é™æ€§å¼•å‡ºäº†ä¸€ä¸ªå…³é”®é—®é¢˜ï¼šå¦‚æœç¯å¢ƒçš„å½“å‰çŠ¶æ€ä¸è¶³ä»¥ä½œä¸ºå†³ç­–çš„å…¨éƒ¨ä¾æ®ï¼Œæ™ºèƒ½ä½“è¯¥æ€ä¹ˆåŠï¼Ÿ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96b9f744893a4f489f3cf89861170760~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853724&amp;x-signature=pvlv3DYgf48bEdSC54Nh3IcRTcU%3D" alt="" loading="lazy"/></p>
<p>å›¾ 1.2 ç®€å•åå°„æ™ºèƒ½ä½“çš„å†³ç­–é€»è¾‘ç¤ºæ„å›¾</p>
<p>ä¸ºäº†å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œç ”ç©¶è€…ä»¬å¼•å…¥äº†â€œçŠ¶æ€â€çš„æ¦‚å¿µï¼Œå‘å±•å‡º<strong>åŸºäºæ¨¡å‹çš„åå°„æ™ºèƒ½ä½“ï¼ˆModel-Based Reflex Agentï¼‰</strong> ã€‚è¿™ç±»æ™ºèƒ½ä½“æ‹¥æœ‰ä¸€ä¸ªå†…éƒ¨çš„<strong>ä¸–ç•Œæ¨¡å‹ï¼ˆWorld Modelï¼‰</strong> ï¼Œç”¨äºè¿½è¸ªå’Œç†è§£ç¯å¢ƒä¸­é‚£äº›æ— æ³•è¢«ç›´æ¥æ„ŸçŸ¥çš„æ–¹é¢ã€‚å®ƒè¯•å›¾å›ç­”ï¼šâ€œä¸–ç•Œç°åœ¨æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Ÿâ€ã€‚ä¾‹å¦‚ï¼Œä¸€è¾†åœ¨éš§é“ä¸­è¡Œé©¶çš„è‡ªåŠ¨é©¾é©¶æ±½è½¦ï¼Œå³ä¾¿æ‘„åƒå¤´æš‚æ—¶æ— æ³•æ„ŸçŸ¥åˆ°å‰æ–¹çš„è½¦è¾†ï¼Œå®ƒçš„å†…éƒ¨æ¨¡å‹ä¾ç„¶ä¼šç»´æŒå¯¹é‚£è¾†è½¦å­˜åœ¨ã€é€Ÿåº¦å’Œé¢„ä¼°ä½ç½®çš„åˆ¤æ–­ã€‚è¿™ä¸ªå†…éƒ¨æ¨¡å‹è®©æ™ºèƒ½ä½“æ‹¥æœ‰äº†åˆçº§çš„â€œè®°å¿†â€ï¼Œä½¿å…¶å†³ç­–ä¸å†ä»…ä»…ä¾èµ–äºç¬æ—¶æ„ŸçŸ¥ï¼Œè€Œæ˜¯åŸºäºä¸€ä¸ªæ›´è¿è´¯ã€æ›´å®Œæ•´çš„ä¸–ç•ŒçŠ¶æ€ç†è§£ã€‚</p>
<p>ç„¶è€Œï¼Œä»…ä»…ç†è§£ä¸–ç•Œè¿˜ä¸å¤Ÿï¼Œæ™ºèƒ½ä½“éœ€è¦æœ‰æ˜ç¡®çš„ç›®æ ‡ã€‚è¿™ä¿ƒè¿›äº†<strong>åŸºäºç›®æ ‡çš„æ™ºèƒ½ä½“ï¼ˆGoal-Based Agentï¼‰</strong> çš„å‘å±•ã€‚ä¸å‰ä¸¤è€…ä¸åŒï¼Œå®ƒçš„è¡Œä¸ºä¸å†æ˜¯è¢«åŠ¨åœ°å¯¹ç¯å¢ƒåšå‡ºååº”ï¼Œè€Œæ˜¯ä¸»åŠ¨åœ°ã€æœ‰é¢„è§æ€§åœ°é€‰æ‹©èƒ½å¤Ÿå¯¼å‘æŸä¸ªç‰¹å®šæœªæ¥çŠ¶æ€çš„è¡ŒåŠ¨ã€‚è¿™ç±»æ™ºèƒ½ä½“éœ€è¦å›ç­”çš„é—®é¢˜æ˜¯ï¼šâ€œæˆ‘åº”è¯¥åšä»€ä¹ˆæ‰èƒ½è¾¾æˆç›®æ ‡ï¼Ÿâ€ã€‚ç»å…¸çš„ä¾‹å­æ˜¯GPSå¯¼èˆªç³»ç»Ÿï¼šä½ çš„ç›®æ ‡æ˜¯åˆ°è¾¾å…¬å¸ï¼Œæ™ºèƒ½ä½“ä¼šåŸºäºåœ°å›¾æ•°æ®ï¼ˆä¸–ç•Œæ¨¡å‹ï¼‰ï¼Œé€šè¿‡æœç´¢ç®—æ³•ï¼ˆå¦‚A*ç®—æ³•ï¼‰æ¥è§„åˆ’ï¼ˆPlanningï¼‰å‡ºä¸€æ¡æœ€ä¼˜è·¯å¾„ã€‚è¿™ç±»æ™ºèƒ½ä½“çš„æ ¸å¿ƒèƒ½åŠ›ä½“ç°åœ¨äº†å¯¹æœªæ¥çš„è€ƒé‡ä¸è§„åˆ’ä¸Šã€‚</p>
<p>æ›´è¿›ä¸€æ­¥ï¼Œç°å®ä¸–ç•Œçš„ç›®æ ‡å¾€å¾€ä¸æ˜¯å•ä¸€çš„ã€‚æˆ‘ä»¬ä¸ä»…å¸Œæœ›åˆ°è¾¾å…¬å¸ï¼Œè¿˜å¸Œæœ›æ—¶é—´æœ€çŸ­ã€è·¯ç¨‹æœ€çœæ²¹å¹¶ä¸”é¿å¼€æ‹¥å µã€‚å½“å¤šä¸ªç›®æ ‡éœ€è¦æƒè¡¡æ—¶ï¼Œ<strong>åŸºäºæ•ˆç”¨çš„æ™ºèƒ½ä½“ï¼ˆUtility-Based Agentï¼‰</strong> ä¾¿éšä¹‹å‡ºç°ã€‚å®ƒä¸ºæ¯ä¸€ä¸ªå¯èƒ½çš„ä¸–ç•ŒçŠ¶æ€éƒ½èµ‹äºˆä¸€ä¸ªæ•ˆç”¨å€¼ï¼Œè¿™ä¸ªå€¼ä»£è¡¨äº†æ»¡æ„åº¦çš„é«˜ä½ã€‚æ™ºèƒ½ä½“çš„æ ¸å¿ƒç›®æ ‡ä¸å†æ˜¯ç®€å•åœ°è¾¾æˆæŸä¸ªç‰¹å®šçŠ¶æ€ï¼Œè€Œæ˜¯æœ€å¤§åŒ–æœŸæœ›æ•ˆç”¨ã€‚å®ƒéœ€è¦å›ç­”ä¸€ä¸ªæ›´å¤æ‚çš„é—®é¢˜ï¼šâ€œå“ªç§è¡Œä¸ºèƒ½ä¸ºæˆ‘å¸¦æ¥æœ€æ»¡æ„çš„ç»“æœï¼Ÿâ€ã€‚è¿™ç§æ¶æ„è®©æ™ºèƒ½ä½“å­¦ä¼šåœ¨ç›¸äº’å†²çªçš„ç›®æ ‡ä¹‹é—´è¿›è¡Œæƒè¡¡ï¼Œä½¿å…¶å†³ç­–æ›´æ¥è¿‘äººç±»çš„ç†æ€§é€‰æ‹©ã€‚</p>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬è®¨è®ºçš„æ™ºèƒ½ä½“è™½ç„¶åŠŸèƒ½æ—¥ç›Šå¤æ‚ï¼Œä½†å…¶æ ¸å¿ƒå†³ç­–é€»è¾‘ï¼Œæ— è®ºæ˜¯è§„åˆ™ã€æ¨¡å‹è¿˜æ˜¯æ•ˆç”¨å‡½æ•°ï¼Œä¾ç„¶ä¾èµ–äºäººç±»è®¾è®¡å¸ˆçš„å…ˆéªŒçŸ¥è¯†ã€‚å¦‚æœæ™ºèƒ½ä½“èƒ½ä¸ä¾èµ–é¢„è®¾ï¼Œè€Œæ˜¯é€šè¿‡ä¸ç¯å¢ƒçš„äº’åŠ¨è‡ªä¸»å­¦ä¹ å‘¢ï¼Ÿ</p>
<p>è¿™ä¾¿æ˜¯<strong>å­¦ä¹ å‹æ™ºèƒ½ä½“ï¼ˆLearning Agentï¼‰</strong> çš„æ ¸å¿ƒæ€æƒ³ï¼Œè€Œ<strong>å¼ºåŒ–å­¦ä¹ ï¼ˆReinforcement Learning, RLï¼‰</strong> æ˜¯å®ç°è¿™ä¸€æ€æƒ³æœ€å…·ä»£è¡¨æ€§çš„è·¯å¾„ã€‚ä¸€ä¸ªå­¦ä¹ å‹æ™ºèƒ½ä½“åŒ…å«ä¸€ä¸ªæ€§èƒ½å…ƒä»¶ï¼ˆå³æˆ‘ä»¬å‰é¢è®¨è®ºçš„å„ç±»æ™ºèƒ½ä½“ï¼‰å’Œä¸€ä¸ªå­¦ä¹ å…ƒä»¶ã€‚å­¦ä¹ å…ƒä»¶é€šè¿‡è§‚å¯Ÿæ€§èƒ½å…ƒä»¶åœ¨ç¯å¢ƒä¸­çš„è¡ŒåŠ¨æ‰€å¸¦æ¥çš„ç»“æœæ¥ä¸æ–­ä¿®æ­£æ€§èƒ½å…ƒä»¶çš„å†³ç­–ç­–ç•¥ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸ªå­¦ä¹ ä¸‹æ£‹çš„AIã€‚å®ƒå¼€å§‹æ—¶å¯èƒ½åªæ˜¯éšæœºè½å­ï¼Œå½“å®ƒæœ€ç»ˆèµ¢ä¸‹ä¸€å±€æ—¶ï¼Œç³»ç»Ÿä¼šç»™äºˆå®ƒä¸€ä¸ªæ­£å‘çš„å¥–åŠ±ã€‚é€šè¿‡å¤§é‡çš„è‡ªæˆ‘å¯¹å¼ˆï¼Œå­¦ä¹ å…ƒä»¶ä¼šé€æ¸å‘ç°å“ªäº›æ£‹è·¯æ›´æœ‰å¯èƒ½å¯¼å‘æœ€ç»ˆçš„èƒœåˆ©ã€‚AlphaGoæ˜¯è¿™ä¸€ç†å¿µçš„ä¸€ä¸ªé‡Œç¨‹ç¢‘å¼çš„æˆå°±ã€‚å®ƒåœ¨å›´æ£‹è¿™ä¸€å¤æ‚åšå¼ˆä¸­ï¼Œé€šè¿‡å¼ºåŒ–å­¦ä¹ å‘ç°äº†è®¸å¤šè¶…è¶Šäººç±»æ—¢æœ‰çŸ¥è¯†çš„æœ‰æ•ˆç­–ç•¥ã€‚</p>
<p>ä»ç®€å•çš„æ’æ¸©å™¨ï¼Œåˆ°æ‹¥æœ‰å†…éƒ¨æ¨¡å‹çš„æ±½è½¦ï¼Œå†åˆ°èƒ½å¤Ÿè§„åˆ’è·¯çº¿çš„å¯¼èˆªã€æ‡‚å¾—æƒè¡¡åˆ©å¼Šçš„å†³ç­–è€…ï¼Œæœ€ç»ˆåˆ°å¯ä»¥é€šè¿‡ç»éªŒè‡ªæˆ‘è¿›åŒ–çš„å­¦ä¹ è€…ã€‚è¿™æ¡æ¼”è¿›ä¹‹è·¯ï¼Œå±•ç¤ºäº†ä¼ ç»Ÿäººå·¥æ™ºèƒ½åœ¨æ„å»ºæœºå™¨æ™ºèƒ½çš„é“è·¯ä¸Šæ‰€ç»å†çš„å‘å±•è„‰ç»œã€‚å®ƒä»¬ä¸ºæˆ‘ä»¬ä»Šå¤©ç†è§£æ›´å‰æ²¿çš„æ™ºèƒ½ä½“èŒƒå¼ï¼Œæ‰“ä¸‹äº†åšå®è€Œå¿…è¦çš„åŸºç¡€ã€‚</p>
<h4 data-id="heading-2">1.1.2 å¤§è¯­è¨€æ¨¡å‹é©±åŠ¨çš„æ–°èŒƒå¼</h4>
<p>ä»¥<strong>GPTï¼ˆGenerative Pre-trained Transformerï¼‰</strong> ä¸ºä»£è¡¨çš„å¤§è¯­è¨€æ¨¡å‹çš„å‡ºç°ï¼Œæ­£åœ¨æ˜¾è‘—æ”¹å˜æ™ºèƒ½ä½“çš„æ„å»ºæ–¹æ³•ä¸èƒ½åŠ›è¾¹ç•Œã€‚ç”±å¤§è¯­è¨€æ¨¡å‹é©±åŠ¨çš„LLMæ™ºèƒ½ä½“ï¼Œå…¶æ ¸å¿ƒå†³ç­–æœºåˆ¶ä¸ä¼ ç»Ÿæ™ºèƒ½ä½“å­˜åœ¨æœ¬è´¨åŒºåˆ«ï¼Œä»è€Œèµ‹äºˆäº†å…¶ä¸€ç³»åˆ—å…¨æ–°çš„ç‰¹æ€§ã€‚</p>
<p>è¿™ç§è½¬å˜ï¼Œå¯ä»¥ä»ä¸¤è€…åœ¨æ ¸å¿ƒå¼•æ“ã€çŸ¥è¯†æ¥æºã€äº¤äº’æ–¹å¼ç­‰å¤šä¸ªç»´åº¦çš„å¯¹æ¯”ä¸­æ¸…æ™°åœ°çœ‹å‡ºï¼Œå¦‚è¡¨1.1æ‰€ç¤ºã€‚ç®€è€Œè¨€ä¹‹ï¼Œä¼ ç»Ÿæ™ºèƒ½ä½“çš„èƒ½åŠ›æºäºå·¥ç¨‹å¸ˆçš„æ˜¾å¼ç¼–ç¨‹ä¸çŸ¥è¯†æ„å»ºï¼Œå…¶è¡Œä¸ºæ¨¡å¼æ˜¯ç¡®å®šä¸”æœ‰è¾¹ç•Œçš„ï¼›è€ŒLLMæ™ºèƒ½ä½“åˆ™é€šè¿‡åœ¨æµ·é‡æ•°æ®ä¸Šçš„é¢„è®­ç»ƒï¼Œè·å¾—äº†éšå¼çš„ä¸–ç•Œæ¨¡å‹ä¸å¼ºå¤§çš„æ¶Œç°èƒ½åŠ›ï¼Œä½¿å…¶èƒ½å¤Ÿä»¥æ›´çµæ´»ã€æ›´é€šç”¨çš„æ–¹å¼åº”å¯¹å¤æ‚ä»»åŠ¡ã€‚</p>
<p>è¡¨ 1.1 ä¼ ç»Ÿæ™ºèƒ½ä½“ä¸LLMé©±åŠ¨æ™ºèƒ½ä½“çš„æ ¸å¿ƒå¯¹æ¯”</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2159126278244a43b28f90bee7581d92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853724&amp;x-signature=p10LrKiyS1O9vEEt08sbThXk4uU%3D" alt="" loading="lazy"/></p>
<p>è¿™ç§å·®å¼‚ä½¿å¾—LLMæ™ºèƒ½ä½“å¯ä»¥ç›´æ¥å¤„ç†é«˜å±‚çº§ã€æ¨¡ç³Šä¸”å……æ»¡ä¸Šä¸‹æ–‡ä¿¡æ¯çš„è‡ªç„¶è¯­è¨€æŒ‡ä»¤ã€‚è®©æˆ‘ä»¬ä»¥ä¸€ä¸ªâ€œæ™ºèƒ½æ—…è¡ŒåŠ©æ‰‹â€ä¸ºä¾‹æ¥è¯´æ˜ã€‚</p>
<p>åœ¨LLMæ™ºèƒ½ä½“å‡ºç°ä¹‹å‰ï¼Œè§„åˆ’æ—…è¡Œé€šå¸¸æ„å‘³ç€ç”¨æˆ·éœ€è¦åœ¨å¤šä¸ªä¸“ç”¨åº”ç”¨ï¼ˆå¦‚å¤©æ°”ã€åœ°å›¾ã€é¢„è®¢ç½‘ç«™ï¼‰ä¹‹é—´æ‰‹åŠ¨åˆ‡æ¢ï¼Œå¹¶ç”±ç”¨æˆ·è‡ªå·±æ‰®æ¼”ä¿¡æ¯æ•´åˆä¸å†³ç­–çš„è§’è‰²ã€‚è€Œä¸€ä¸ªLLMæ™ºèƒ½ä½“åˆ™èƒ½å°†è¿™ä¸ªæµç¨‹æ•´åˆèµ·æ¥ã€‚å½“æ¥æ”¶åˆ°â€œè§„åˆ’ä¸€æ¬¡å¦é—¨ä¹‹æ—…â€è¿™æ ·çš„æ¨¡ç³ŠæŒ‡ä»¤æ—¶ï¼Œå®ƒçš„å·¥ä½œæ–¹å¼ä½“ç°äº†ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ul>
<li><strong>è§„åˆ’ä¸æ¨ç†</strong>ï¼šæ™ºèƒ½ä½“é¦–å…ˆä¼šå°†è¿™ä¸ªé«˜å±‚çº§ç›®æ ‡åˆ†è§£ä¸ºä¸€ç³»åˆ—é€»è¾‘å­ä»»åŠ¡ï¼Œä¾‹å¦‚ï¼š<code>[ç¡®è®¤å‡ºè¡Œåå¥½] -&gt; [æŸ¥è¯¢ç›®çš„åœ°ä¿¡æ¯] -&gt; [åˆ¶å®šè¡Œç¨‹è‰æ¡ˆ] -&gt; [é¢„è®¢ç¥¨åŠ¡ä½å®¿]</code>ã€‚è¿™æ˜¯ä¸€ä¸ªå†…åœ¨çš„ã€ç”±æ¨¡å‹é©±åŠ¨çš„è§„åˆ’è¿‡ç¨‹ã€‚</li>
<li><strong>å·¥å…·ä½¿ç”¨</strong>ï¼šåœ¨æ‰§è¡Œè§„åˆ’æ—¶ï¼Œæ™ºèƒ½ä½“è¯†åˆ«åˆ°ä¿¡æ¯ç¼ºå£ï¼Œä¼šä¸»åŠ¨è°ƒç”¨å¤–éƒ¨å·¥å…·æ¥è¡¥å…¨ã€‚ä¾‹å¦‚ï¼Œå®ƒä¼šè°ƒç”¨å¤©æ°”æŸ¥è¯¢æ¥å£è·å–å®æ—¶å¤©æ°”ï¼Œå¹¶åŸºäºâ€œé¢„æŠ¥æœ‰é›¨â€è¿™ä¸€ä¿¡æ¯ï¼Œåœ¨åç»­è§„åˆ’ä¸­å€¾å‘äºæ¨èå®¤å†…æ´»åŠ¨ã€‚</li>
<li><strong>åŠ¨æ€ä¿®æ­£</strong>ï¼šåœ¨äº¤äº’è¿‡ç¨‹ä¸­ï¼Œæ™ºèƒ½ä½“ä¼šå°†ç”¨æˆ·çš„åé¦ˆï¼ˆå¦‚â€œè¿™å®¶é…’åº—è¶…å‡ºé¢„ç®—â€ï¼‰è§†ä¸ºæ–°çš„çº¦æŸï¼Œå¹¶æ®æ­¤è°ƒæ•´åç»­çš„è¡ŒåŠ¨ï¼Œé‡æ–°æœç´¢å¹¶æ¨èç¬¦åˆæ–°è¦æ±‚çš„é€‰é¡¹ã€‚æ•´ä¸ªâ€œ<strong>æŸ¥å¤©æ°” â†’ è°ƒè¡Œç¨‹ â†’ è®¢é…’åº—</strong>â€çš„æµç¨‹ï¼Œå±•ç°äº†å…¶æ ¹æ®ä¸Šä¸‹æ–‡åŠ¨æ€ä¿®æ­£è‡ªèº«è¡Œä¸ºçš„èƒ½åŠ›ã€‚</li>
</ul>
<p>æ€»è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬æ­£ä»å¼€å‘ä¸“ç”¨è‡ªåŠ¨åŒ–å·¥å…·è½¬å‘æ„å»ºèƒ½è‡ªä¸»è§£å†³é—®é¢˜çš„ç³»ç»Ÿã€‚æ ¸å¿ƒä¸å†æ˜¯ç¼–å†™ä»£ç ï¼Œè€Œæ˜¯å¼•å¯¼ä¸€ä¸ªé€šç”¨çš„â€œå¤§è„‘â€å»è§„åˆ’ã€è¡ŒåŠ¨å’Œå­¦ä¹ ã€‚</p>
<h4 data-id="heading-3">1.1.3 æ™ºèƒ½ä½“çš„ç±»å‹</h4>
<p>ç»§ä¸Šæ–‡å›é¡¾æ™ºèƒ½ä½“çš„æ¼”è¿›åï¼Œæœ¬èŠ‚å°†ä»ä¸‰ä¸ªäº’è¡¥çš„ç»´åº¦å¯¹æ™ºèƒ½ä½“è¿›è¡Œåˆ†ç±»ã€‚</p>
<p>1ï¼‰<strong>åŸºäºå†…éƒ¨å†³ç­–æ¶æ„çš„åˆ†ç±»</strong></p>
<p>ç¬¬ä¸€ç§åˆ†ç±»ç»´åº¦æ˜¯ä¾æ®æ™ºèƒ½ä½“å†…éƒ¨å†³ç­–æ¶æ„çš„å¤æ‚ç¨‹åº¦ï¼Œè¿™ä¸ªè§†è§’åœ¨ã€ŠArtificial Intelligence: A Modern Approachã€‹ä¸­ç³»ç»Ÿæ€§åœ°æå‡º[1]ã€‚æ­£å¦‚ 1.1.1 èŠ‚æ‰€è¿°ï¼Œä¼ ç»Ÿæ™ºèƒ½ä½“çš„æ¼”è¿›è·¯å¾„æœ¬èº«å°±æ„æˆäº†æœ€ç»å…¸çš„åˆ†ç±»é˜¶æ¢¯ï¼Œå®ƒæ¶µç›–äº†ä»ç®€å•çš„<strong>ååº”å¼</strong>æ™ºèƒ½ä½“ï¼Œåˆ°å¼•å…¥å†…éƒ¨æ¨¡å‹çš„<strong>æ¨¡å‹å¼</strong>æ™ºèƒ½ä½“ï¼Œå†åˆ°æ›´å…·å‰ç»æ€§çš„<strong>åŸºäºç›®æ ‡</strong>å’Œ<strong>åŸºäºæ•ˆç”¨</strong>çš„æ™ºèƒ½ä½“ã€‚æ­¤å¤–ï¼Œ<strong>å­¦ä¹ èƒ½åŠ›</strong>åˆ™æ˜¯ä¸€ç§å¯èµ‹äºˆä¸Šè¿°æ‰€æœ‰ç±»å‹çš„å…ƒèƒ½åŠ›ï¼Œä½¿å…¶èƒ½é€šè¿‡ç»éªŒè‡ªæˆ‘æ”¹è¿›ã€‚</p>
<p>2ï¼‰<strong>åŸºäºæ—¶é—´ä¸ååº”æ€§çš„åˆ†ç±»</strong></p>
<p>é™¤äº†å†…éƒ¨æ¶æ„çš„å¤æ‚æ€§ï¼Œè¿˜å¯ä»¥ä»æ™ºèƒ½ä½“å¤„ç†å†³ç­–çš„æ—¶é—´ç»´åº¦è¿›è¡Œåˆ†ç±»ã€‚è¿™ä¸ªè§†è§’å…³æ³¨æ™ºèƒ½ä½“æ˜¯åœ¨æ¥æ”¶åˆ°ä¿¡æ¯åç«‹å³è¡ŒåŠ¨ï¼Œè¿˜æ˜¯ä¼šç»è¿‡æ·±æ€ç†Ÿè™‘çš„è§„åˆ’å†è¡ŒåŠ¨ã€‚è¿™æ­ç¤ºäº†æ™ºèƒ½ä½“è®¾è®¡ä¸­ä¸€ä¸ªæ ¸å¿ƒæƒè¡¡ï¼šè¿½æ±‚é€Ÿåº¦çš„<strong>ååº”æ€§ï¼ˆReactivityï¼‰</strong> ä¸è¿½æ±‚æœ€ä¼˜è§£çš„<strong>è§„åˆ’æ€§ï¼ˆDeliberationï¼‰</strong> ä¹‹é—´çš„å¹³è¡¡ï¼Œå¦‚å›¾1.3æ‰€ç¤ºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/11babcd4cc144de8989d3c16cb1dc09d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853724&amp;x-signature=RHUS2xlr9oAsDnsO3NVE9bzAOmY%3D" alt="" loading="lazy"/></p>
<p>å›¾ 1.3 æ™ºèƒ½ä½“å†³ç­–æ—¶é—´ä¸è´¨é‡å…³ç³»å›¾</p>
<ul>
<li><strong>ååº”å¼æ™ºèƒ½ä½“ (Reactive Agents)</strong></li>
</ul>
<p>è¿™ç±»æ™ºèƒ½ä½“å¯¹ç¯å¢ƒåˆºæ¿€åšå‡ºè¿‘ä¹å³æ—¶çš„å“åº”ï¼Œå†³ç­–å»¶è¿Ÿæä½ã€‚å®ƒä»¬é€šå¸¸éµå¾ªä»æ„ŸçŸ¥åˆ°è¡ŒåŠ¨çš„ç›´æ¥æ˜ å°„ï¼Œä¸è¿›è¡Œæˆ–åªè¿›è¡Œæå°‘çš„æœªæ¥è§„åˆ’ã€‚ä¸Šæ–‡çš„<strong>ç®€å•ååº”å¼</strong>å’Œ<strong>åŸºäºæ¨¡å‹</strong>çš„æ™ºèƒ½ä½“éƒ½å±äºæ­¤ç±»åˆ«ã€‚</p>
<p>å…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äº<strong>é€Ÿåº¦å¿«ã€è®¡ç®—å¼€é”€ä½</strong>ï¼Œè¿™åœ¨éœ€è¦å¿«é€Ÿå†³ç­–çš„åŠ¨æ€ç¯å¢ƒä¸­è‡³å…³é‡è¦ã€‚ä¾‹å¦‚ï¼Œè½¦è¾†çš„å®‰å…¨æ°”å›Šç³»ç»Ÿå¿…é¡»åœ¨ç¢°æ’å‘ç”Ÿçš„æ¯«ç§’å†…åšå‡ºååº”ï¼Œä»»ä½•å»¶è¿Ÿéƒ½å¯èƒ½å¯¼è‡´ä¸¥é‡åæœï¼›åŒæ ·ï¼Œé«˜é¢‘äº¤æ˜“æœºå™¨äººä¹Ÿå¿…é¡»ä¾èµ–ååº”å¼å†³ç­–æ¥æ•æ‰ç¨çºµå³é€çš„å¸‚åœºæœºä¼šã€‚ç„¶è€Œï¼Œè¿™ç§é€Ÿåº¦çš„ä»£ä»·æ˜¯â€œçŸ­è§†â€ï¼Œç”±äºç¼ºä¹é•¿è¿œè§„åˆ’ï¼Œååº”å¼æ™ºèƒ½ä½“å®¹æ˜“é™·å…¥å±€éƒ¨æœ€ä¼˜ï¼Œéš¾ä»¥å®Œæˆéœ€è¦å¤šæ­¥éª¤åè°ƒçš„å¤æ‚ä»»åŠ¡ã€‚</p>
<ul>
<li><strong>è§„åˆ’å¼æ™ºèƒ½ä½“(Deliberative Agents)</strong></li>
</ul>
<p>ä¸ååº”å¼æ™ºèƒ½ä½“ç›¸å¯¹ï¼Œè§„åˆ’å¼ï¼ˆæˆ–ç§°å®¡è®®å¼ï¼‰æ™ºèƒ½ä½“åœ¨è¡ŒåŠ¨å‰ä¼šè¿›è¡Œå¤æ‚çš„æ€è€ƒå’Œè§„åˆ’ã€‚å®ƒä»¬ä¸ä¼šç«‹å³å¯¹æ„ŸçŸ¥åšå‡ºååº”ï¼Œè€Œæ˜¯ä¼šå…ˆåˆ©ç”¨å…¶å†…éƒ¨çš„ä¸–ç•Œæ¨¡å‹ï¼Œç³»ç»Ÿåœ°æ¢ç´¢æœªæ¥çš„å„ç§å¯èƒ½æ€§ï¼Œè¯„ä¼°ä¸åŒè¡ŒåŠ¨åºåˆ—çš„åæœï¼Œä»¥æœŸæ‰¾åˆ°ä¸€æ¡èƒ½å¤Ÿè¾¾æˆç›®æ ‡çš„æœ€ä½³è·¯å¾„ ã€‚<strong>åŸºäºç›®æ ‡</strong>å’Œ<strong>åŸºäºæ•ˆç”¨</strong>çš„æ™ºèƒ½ä½“æ˜¯å…¸å‹çš„è§„åˆ’å¼æ™ºèƒ½ä½“ã€‚</p>
<p>å¯ä»¥å°†å…¶å†³ç­–è¿‡ç¨‹ç±»æ¯”ä¸ºä¸€ä½æ£‹æ‰‹ã€‚ä»–ä¸ä¼šåªçœ‹çœ¼å‰çš„ä¸€æ­¥ï¼Œè€Œæ˜¯ä¼šé¢„æƒ³å¯¹æ‰‹å¯èƒ½çš„åº”å¯¹ï¼Œå¹¶è§„åˆ’å‡ºåç»­å‡ æ­¥ç”šè‡³åå‡ æ­¥çš„æ£‹è·¯ã€‚è¿™ç§æ·±æ€ç†Ÿè™‘çš„èƒ½åŠ›ä½¿å…¶èƒ½å¤Ÿå¤„ç†å¤æ‚çš„ã€éœ€è¦é•¿è¿œçœ¼å…‰çš„ä»»åŠ¡ï¼Œä¾‹å¦‚åˆ¶å®šä¸€ä»½å•†ä¸šè®¡åˆ’æˆ–è§„åˆ’ä¸€æ¬¡é•¿é€”æ—…è¡Œã€‚å®ƒä»¬çš„ä¼˜åŠ¿åœ¨äºå†³ç­–çš„æˆ˜ç•¥æ€§å’Œè¿œè§ã€‚ç„¶è€Œï¼Œè¿™ç§ä¼˜åŠ¿çš„å¦ä¸€é¢æ˜¯é«˜æ˜‚çš„æ—¶é—´å’Œè®¡ç®—æˆæœ¬ã€‚åœ¨ç¬æ¯ä¸‡å˜çš„ç¯å¢ƒä¸­ï¼Œå½“è§„åˆ’å¼æ™ºèƒ½ä½“è¿˜åœ¨æ·±æ€ç†Ÿè™‘æ—¶ï¼Œé‡‡å–è¡ŒåŠ¨çš„æœ€ä½³æ—¶æœºå¯èƒ½æ—©å·²è¿‡å»ã€‚</p>
<ul>
<li><strong>æ··åˆå¼æ™ºèƒ½ä½“(Hybrid Agents)</strong></li>
</ul>
<p>ç°å®ä¸–ç•Œçš„å¤æ‚ä»»åŠ¡ï¼Œå¾€å¾€æ—¢éœ€è¦å³æ—¶ååº”ï¼Œä¹Ÿéœ€è¦é•¿è¿œè§„åˆ’ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬ä¹‹å‰æåˆ°çš„æ™ºèƒ½æ—…è¡ŒåŠ©æ‰‹ï¼Œæ—¢è¦èƒ½æ ¹æ®ç”¨æˆ·çš„å³æ—¶åé¦ˆï¼ˆå¦‚â€œè¿™å®¶é…’åº—å¤ªè´µäº†â€ï¼‰è°ƒæ•´æ¨èï¼ˆååº”æ€§ï¼‰ï¼Œåˆè¦èƒ½è§„åˆ’å‡ºä¸ºæœŸæ•°å¤©çš„å®Œæ•´æ—…è¡Œæ–¹æ¡ˆï¼ˆè§„åˆ’æ€§ï¼‰ã€‚å› æ­¤ï¼Œæ··åˆå¼æ™ºèƒ½ä½“åº”è¿è€Œç”Ÿï¼Œå®ƒæ—¨åœ¨ç»“åˆä¸¤è€…çš„ä¼˜ç‚¹ï¼Œå®ç°ååº”ä¸è§„åˆ’çš„å¹³è¡¡ã€‚</p>
<p>ä¸€ç§ç»å…¸çš„æ··åˆæ¶æ„æ˜¯åˆ†å±‚è®¾è®¡ï¼šåº•å±‚æ˜¯ä¸€ä¸ªå¿«é€Ÿçš„ååº”æ¨¡å—ï¼Œå¤„ç†ç´§æ€¥æƒ…å†µå’ŒåŸºæœ¬åŠ¨ä½œï¼›é«˜å±‚åˆ™æ˜¯ä¸€ä¸ªå®¡æ…çš„è§„åˆ’æ¨¡å—ï¼Œè´Ÿè´£åˆ¶å®šé•¿è¿œç›®æ ‡ã€‚è€Œç°ä»£çš„LLMæ™ºèƒ½ä½“ï¼Œåˆ™å±•ç°äº†ä¸€ç§æ›´çµæ´»çš„æ··åˆæ¨¡å¼ã€‚å®ƒä»¬é€šå¸¸åœ¨ä¸€ä¸ªâ€œæ€è€ƒ-è¡ŒåŠ¨-è§‚å¯Ÿâ€çš„å¾ªç¯ä¸­è¿ä½œï¼Œå·§å¦™åœ°å°†ä¸¤ç§æ¨¡å¼èä¸ºä¸€ä½“ï¼š</p>
<ul>
<li><strong>è§„åˆ’(Reasoning)</strong> Â ï¼šåœ¨â€œæ€è€ƒâ€é˜¶æ®µï¼ŒLLMåˆ†æå½“å‰çŠ¶å†µï¼Œè§„åˆ’å‡ºä¸‹ä¸€æ­¥çš„åˆç†è¡ŒåŠ¨ã€‚è¿™æ˜¯ä¸€ä¸ªå®¡è®®è¿‡ç¨‹ã€‚</li>
<li><strong>ååº”(Acting &amp; Observing)</strong> Â ï¼šåœ¨â€œè¡ŒåŠ¨â€å’Œâ€œè§‚å¯Ÿâ€é˜¶æ®µï¼Œæ™ºèƒ½ä½“ä¸å¤–éƒ¨å·¥å…·æˆ–ç¯å¢ƒäº¤äº’ï¼Œå¹¶ç«‹å³è·å¾—åé¦ˆã€‚è¿™æ˜¯ä¸€ä¸ªååº”è¿‡ç¨‹ã€‚</li>
</ul>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ™ºèƒ½ä½“å°†ä¸€ä¸ªéœ€è¦é•¿è¿œè§„åˆ’çš„å®å¤§ä»»åŠ¡ï¼Œåˆ†è§£ä¸ºä¸€ç³»åˆ—â€œè§„åˆ’-ååº”â€çš„å¾®å¾ªç¯ã€‚è¿™ä½¿å…¶æ—¢èƒ½çµæ´»åº”å¯¹ç¯å¢ƒçš„å³æ—¶å˜åŒ–ï¼Œåˆèƒ½é€šè¿‡è¿è´¯çš„æ­¥éª¤ï¼Œæœ€ç»ˆå®Œæˆå¤æ‚çš„é•¿æœŸç›®æ ‡ã€‚</p>
<p><strong>3ï¼‰åŸºäºçŸ¥è¯†è¡¨ç¤ºçš„åˆ†ç±»</strong></p>
<p>è¿™æ˜¯ä¸€ä¸ªæ›´æ ¹æœ¬çš„åˆ†ç±»ç»´åº¦ï¼Œå®ƒæ¢ç©¶æ™ºèƒ½ä½“ç”¨ä»¥å†³ç­–çš„çŸ¥è¯†ï¼Œç©¶ç«Ÿæ˜¯ä»¥ä½•ç§å½¢å¼å­˜äºå…¶â€œæ€æƒ³â€ä¹‹ä¸­ã€‚è¿™ä¸ªé—®é¢˜æ˜¯äººå·¥æ™ºèƒ½é¢†åŸŸä¸€åœºæŒç»­åŠä¸ªå¤šä¸–çºªçš„è¾©è®ºæ ¸å¿ƒï¼Œå¹¶å¡‘é€ äº†ä¸¤ç§æˆªç„¶ä¸åŒçš„AIæ–‡åŒ–ã€‚</p>
<ul>
<li><strong>ç¬¦å·ä¸»ä¹‰AIï¼ˆSymbolic AIï¼‰</strong></li>
</ul>
<p>ç¬¦å·ä¸»ä¹‰ï¼Œå¸¸è¢«ç§°ä¸ºä¼ ç»Ÿäººå·¥æ™ºèƒ½ï¼Œå…¶æ ¸å¿ƒä¿¡å¿µæ˜¯ï¼šæ™ºèƒ½æºäºå¯¹ç¬¦å·çš„é€»è¾‘æ“ä½œã€‚è¿™é‡Œçš„ç¬¦å·æ˜¯äººç±»å¯è¯»çš„å®ä½“ï¼ˆå¦‚è¯è¯­ã€æ¦‚å¿µï¼‰ï¼Œæ“ä½œåˆ™éµå¾ªä¸¥æ ¼çš„é€»è¾‘è§„åˆ™ï¼Œå¦‚å›¾1.4å·¦ä¾§æ‰€ç¤ºã€‚è¿™å¥½æ¯”ä¸€ä½ä¸€ä¸ä¸è‹Ÿçš„å›¾ä¹¦ç®¡ç†å‘˜ï¼Œå°†ä¸–ç•ŒçŸ¥è¯†æ•´ç†ä¸ºæ¸…æ™°çš„è§„åˆ™åº“å’ŒçŸ¥è¯†å›¾è°±ã€‚</p>
<p>å…¶ä¸»è¦ä¼˜åŠ¿åœ¨äºé€æ˜å’Œå¯è§£é‡Šã€‚ç”±äºæ¨ç†æ­¥éª¤æ˜ç¡®ï¼Œå…¶å†³ç­–è¿‡ç¨‹å¯ä»¥è¢«å®Œæ•´è¿½æº¯ï¼Œè¿™åœ¨é‡‘èã€åŒ»ç–—ç­‰é«˜é£é™©é¢†åŸŸè‡³å…³é‡è¦ã€‚ç„¶è€Œï¼Œå…¶â€œé˜¿å–€ç‰æ–¯ä¹‹è¸µâ€åœ¨äºè„†å¼±æ€§ï¼šå®ƒä¾èµ–äºä¸€ä¸ªå®Œå¤‡çš„è§„åˆ™ä½“ç³»ï¼Œä½†åœ¨å……æ»¡æ¨¡ç³Šå’Œä¾‹å¤–çš„ç°å®ä¸–ç•Œä¸­ï¼Œä»»ä½•æœªè¢«è¦†ç›–çš„æ–°æƒ…å†µéƒ½å¯èƒ½å¯¼è‡´ç³»ç»Ÿå¤±çµï¼Œè¿™å°±æ˜¯æ‰€è°“çš„â€œçŸ¥è¯†è·å–ç“¶é¢ˆâ€ã€‚</p>
<ul>
<li><strong>äºšç¬¦å·ä¸»ä¹‰AIï¼ˆSub-symbolic AIï¼‰</strong></li>
</ul>
<p>äºšç¬¦å·ä¸»ä¹‰ï¼Œæˆ–ç§°è¿æ¥ä¸»ä¹‰ï¼Œåˆ™æä¾›äº†ä¸€å¹…æˆªç„¶ä¸åŒçš„å›¾æ™¯ã€‚åœ¨è¿™é‡Œï¼ŒçŸ¥è¯†å¹¶éæ˜¾å¼çš„è§„åˆ™ï¼Œè€Œæ˜¯å†…éšåœ°åˆ†å¸ƒåœ¨ä¸€ä¸ªç”±å¤§é‡ç¥ç»å…ƒç»„æˆçš„å¤æ‚ç½‘ç»œä¸­ï¼Œæ˜¯ä»æµ·é‡æ•°æ®ä¸­å­¦ä¹ åˆ°çš„ç»Ÿè®¡æ¨¡å¼ã€‚ç¥ç»ç½‘ç»œå’Œæ·±åº¦å­¦ä¹ æ˜¯å…¶ä»£è¡¨ã€‚</p>
<p>å¦‚å›¾1.4ä¸­é—´æ‰€ç¤ºï¼Œå¦‚æœè¯´ç¬¦å·ä¸»ä¹‰AIæ˜¯å›¾ä¹¦ç®¡ç†å‘˜ï¼Œé‚£ä¹ˆäºšç¬¦å·ä¸»ä¹‰AIå°±åƒä¸€ä¸ªç‰™ç‰™å­¦è¯­çš„å­©ç«¥ ã€‚ä»–ä¸æ˜¯é€šè¿‡å­¦ä¹ â€œçŒ«æœ‰å››æ¡è…¿ã€æ¯›èŒ¸èŒ¸ã€ä¼šå–µå–µå«â€è¿™æ ·çš„è§„åˆ™æ¥è®¤è¯†çŒ«çš„ï¼Œè€Œæ˜¯åœ¨çœ‹è¿‡æˆåƒä¸Šä¸‡å¼ çŒ«çš„å›¾ç‰‡åï¼Œå¤§è„‘ä¸­çš„ç¥ç»ç½‘ç»œèƒ½è¾¨è¯†å‡ºâ€œçŒ«â€è¿™ä¸ªæ¦‚å¿µçš„è§†è§‰æ¨¡å¼ ã€‚è¿™ç§æ–¹æ³•çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå…¶æ¨¡å¼è¯†åˆ«èƒ½åŠ›å’Œå¯¹å™ªå£°æ•°æ®çš„é²æ£’æ€§ ã€‚å®ƒèƒ½å¤Ÿè½»æ¾å¤„ç†å›¾åƒã€å£°éŸ³ç­‰éç»“æ„åŒ–æ•°æ®ï¼Œè¿™åœ¨ç¬¦å·ä¸»ä¹‰AIçœ‹æ¥æ˜¯æå…¶å›°éš¾çš„ä»»åŠ¡ã€‚</p>
<p>ç„¶è€Œï¼Œè¿™ç§å¼ºå¤§çš„ç›´è§‰èƒ½åŠ›ä¹Ÿä¼´éšç€ä¸é€æ˜æ€§ã€‚äºšç¬¦å·ä¸»ä¹‰ç³»ç»Ÿé€šå¸¸è¢«è§†ä¸ºä¸€ä¸ª<strong>é»‘ç®±ï¼ˆBlack Boxï¼‰</strong> ã€‚å®ƒèƒ½ä»¥æƒŠäººçš„å‡†ç¡®ç‡è¯†åˆ«å‡ºå›¾ç‰‡ä¸­çš„çŒ«ï¼Œä½†ä½ è‹¥é—®å®ƒâ€œä¸ºä»€ä¹ˆä½ è®¤ä¸ºè¿™æ˜¯çŒ«ï¼Ÿâ€ï¼Œå®ƒå¾ˆå¯èƒ½æ— æ³•ç»™å‡ºä¸€ä¸ªåˆä¹é€»è¾‘çš„è§£é‡Šã€‚æ­¤å¤–ï¼Œå®ƒåœ¨çº¯ç²¹çš„é€»è¾‘æ¨ç†ä»»åŠ¡ä¸Šè¡¨ç°ä¸ä½³ï¼Œæœ‰æ—¶ä¼šäº§ç”Ÿçœ‹ä¼¼åˆç†å´äº‹å®é”™è¯¯çš„å¹»è§‰ã€‚</p>
<ul>
<li><strong>ç¥ç»ç¬¦å·ä¸»ä¹‰AIï¼ˆNeuro-Symbolic AIï¼‰</strong></li>
</ul>
<p>é•¿ä¹…ä»¥æ¥ï¼Œç¬¦å·ä¸»ä¹‰å’Œäºšç¬¦å·ä¸»ä¹‰è¿™ä¸¤å¤§é˜µè¥å¦‚åŒä¸¤æ¡å¹³è¡Œçº¿ï¼Œå„è‡ªå‘å±•ã€‚ä¸ºå…‹æœä¸Šè¿°ä¸¤ç§èŒƒå¼çš„å±€é™ï¼Œä¸€ç§â€œå¤§å’Œè§£â€çš„æ€æƒ³å¼€å§‹å…´èµ·ï¼Œè¿™å°±æ˜¯ç¥ç»ç¬¦å·ä¸»ä¹‰AIï¼Œä¹Ÿç§°ç¥ç»ç¬¦å·æ··åˆä¸»ä¹‰ã€‚å®ƒçš„ç›®æ ‡ï¼Œæ˜¯èåˆä¸¤å¤§èŒƒå¼çš„ä¼˜ç‚¹ï¼Œåˆ›é€ å‡ºä¸€ä¸ªæ—¢èƒ½åƒç¥ç»ç½‘ç»œä¸€æ ·ä»æ•°æ®ä¸­å­¦ä¹ ï¼Œåˆèƒ½åƒç¬¦å·ç³»ç»Ÿä¸€æ ·è¿›è¡Œé€»è¾‘æ¨ç†çš„æ··åˆæ™ºèƒ½ä½“ã€‚å®ƒè¯•å›¾å¼¥åˆæ„ŸçŸ¥ä¸è®¤çŸ¥ã€ç›´è§‰ä¸ç†æ€§ä¹‹é—´çš„é¸¿æ²Ÿã€‚è¯ºè´å°”ç»æµå­¦å¥–å¾—ä¸»ä¸¹å°¼å°”Â·å¡å°¼æ›¼ï¼ˆDaniel Kahnemanï¼‰åœ¨å…¶è‘—ä½œã€Šæ€è€ƒï¼Œå¿«ä¸æ…¢ã€‹ï¼ˆThinking, Fast and Slowï¼‰ä¸­æå‡ºçš„åŒç³»ç»Ÿç†è®ºï¼Œä¸ºæˆ‘ä»¬ç†è§£ç¥ç»ç¬¦å·ä¸»ä¹‰æä¾›äº†ä¸€ä¸ªç»ä½³çš„ç±»æ¯”[2]ï¼Œå¦‚å›¾1.4æ‰€ç¤ºï¼š</p>
<ul>
<li><strong>ç³»ç»Ÿ1</strong>æ˜¯å¿«é€Ÿã€å‡­ç›´è§‰ã€å¹¶è¡Œçš„æ€ç»´æ¨¡å¼ï¼Œç±»ä¼¼äºäºšç¬¦å·ä¸»ä¹‰AIå¼ºå¤§çš„æ¨¡å¼è¯†åˆ«èƒ½åŠ›ã€‚</li>
<li><strong>ç³»ç»Ÿ2</strong>æ˜¯ç¼“æ…¢ã€æœ‰æ¡ç†ã€åŸºäºé€»è¾‘çš„å®¡æ…æ€ç»´ï¼Œæ°å¦‚ç¬¦å·ä¸»ä¹‰AIçš„æ¨ç†è¿‡ç¨‹ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e199a13de8f40b59dddaba424c696e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853724&amp;x-signature=wCixMd7RjnlCBZuGbXTJTiSVQLY%3D" alt="" loading="lazy"/></p>
<p>å›¾ 1.4 ç¬¦å·ä¸»ä¹‰ã€äºšç¬¦å·ä¸»ä¹‰ä¸ç¥ç»ç¬¦å·æ··åˆä¸»ä¹‰çš„çŸ¥è¯†è¡¨ç¤ºèŒƒå¼</p>
<p>äººç±»çš„æ™ºèƒ½ï¼Œæ­£æºäºè¿™ä¸¤ä¸ªç³»ç»Ÿçš„ååŒå·¥ä½œã€‚åŒæ ·ï¼Œä¸€ä¸ªçœŸæ­£é²æ£’çš„AIï¼Œä¹Ÿéœ€è¦å…¼å…·äºŒè€…ä¹‹é•¿ã€‚å¤§è¯­è¨€æ¨¡å‹é©±åŠ¨çš„æ™ºèƒ½ä½“æ˜¯ç¥ç»ç¬¦å·ä¸»ä¹‰çš„ä¸€ä¸ªæä½³å®è·µèŒƒä¾‹ã€‚å…¶å†…æ ¸æ˜¯ä¸€ä¸ªå·¨å¤§çš„ç¥ç»ç½‘ç»œï¼Œä½¿å…¶å…·å¤‡æ¨¡å¼è¯†åˆ«å’Œè¯­è¨€ç”Ÿæˆèƒ½åŠ›ã€‚ç„¶è€Œï¼Œå½“å®ƒå·¥ä½œæ—¶ï¼Œå®ƒä¼šç”Ÿæˆä¸€ç³»åˆ—ç»“æ„åŒ–çš„ä¸­é—´æ­¥éª¤ï¼Œå¦‚æ€æƒ³ã€è®¡åˆ’æˆ–APIè°ƒç”¨ï¼Œè¿™äº›éƒ½æ˜¯æ˜ç¡®çš„ã€å¯æ“ä½œçš„ç¬¦å·ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå®ƒå®ç°äº†æ„ŸçŸ¥ä¸è®¤çŸ¥ã€ç›´è§‰ä¸ç†æ€§çš„åˆæ­¥èåˆã€‚</p>
<h3 data-id="heading-4">1.2 æ™ºèƒ½ä½“çš„æ„æˆä¸è¿è¡ŒåŸç†</h3>
<h4 data-id="heading-5">1.2.1 ä»»åŠ¡ç¯å¢ƒå®šä¹‰</h4>
<p>è¦ç†è§£æ™ºèƒ½ä½“çš„è¿ä½œï¼Œæˆ‘ä»¬å¿…é¡»å…ˆç†è§£å®ƒæ‰€å¤„çš„<strong>ä»»åŠ¡ç¯å¢ƒ</strong>ã€‚åœ¨äººå·¥æ™ºèƒ½é¢†åŸŸï¼Œé€šå¸¸ä½¿ç”¨<strong>PEASæ¨¡å‹</strong>æ¥ç²¾ç¡®æè¿°ä¸€ä¸ªä»»åŠ¡ç¯å¢ƒï¼Œå³åˆ†æå…¶<strong>æ€§èƒ½åº¦é‡(Performance)ã€ç¯å¢ƒ(Environment)ã€æ‰§è¡Œå™¨(Actuators)å’Œä¼ æ„Ÿå™¨(Sensors)</strong> Â ã€‚ä»¥ä¸Šæ–‡æåˆ°çš„æ™ºèƒ½æ—…è¡ŒåŠ©æ‰‹ä¸ºä¾‹ï¼Œä¸‹è¡¨1.2å±•ç¤ºäº†å¦‚ä½•è¿ç”¨PEASæ¨¡å‹å¯¹å…¶ä»»åŠ¡ç¯å¢ƒè¿›è¡Œè§„çº¦ã€‚</p>
<p>è¡¨ 1.2 æ™ºèƒ½æ—…è¡ŒåŠ©æ‰‹çš„PEASæè¿°</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e304193bbaa7481a959563e8dbab64b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853724&amp;x-signature=qwzXFrlQrrYeMdb3UE0XE9XkW5s%3D" alt="" loading="lazy"/></p>
<p>åœ¨å®è·µä¸­ï¼ŒLLMæ™ºèƒ½ä½“æ‰€å¤„çš„æ•°å­—ç¯å¢ƒå±•ç°å‡ºè‹¥å¹²å¤æ‚ç‰¹æ€§ï¼Œè¿™äº›ç‰¹æ€§ç›´æ¥å½±å“ç€æ™ºèƒ½ä½“çš„è®¾è®¡ã€‚</p>
<p>é¦–å…ˆï¼Œç¯å¢ƒé€šå¸¸æ˜¯<strong>éƒ¨åˆ†å¯è§‚å¯Ÿçš„</strong>ã€‚ä¾‹å¦‚ï¼Œæ—…è¡ŒåŠ©æ‰‹åœ¨æŸ¥è¯¢èˆªç­æ—¶ï¼Œæ— æ³•ä¸€æ¬¡æ€§è·å–æ‰€æœ‰èˆªç©ºå…¬å¸çš„å…¨éƒ¨å®æ—¶åº§ä½ä¿¡æ¯ã€‚å®ƒåªèƒ½é€šè¿‡è°ƒç”¨èˆªç­é¢„è®¢APIï¼Œçœ‹åˆ°è¯¥APIè¿”å›çš„éƒ¨åˆ†æ•°æ®ï¼Œè¿™å°±è¦æ±‚æ™ºèƒ½ä½“å¿…é¡»å…·å¤‡è®°å¿†ï¼ˆè®°ä½å·²æŸ¥è¯¢è¿‡çš„èˆªçº¿ï¼‰å’Œæ¢ç´¢ï¼ˆå°è¯•ä¸åŒçš„æŸ¥è¯¢æ—¥æœŸï¼‰çš„èƒ½åŠ›ã€‚</p>
<p>å…¶æ¬¡ï¼Œè¡ŒåŠ¨çš„ç»“æœä¹Ÿå¹¶éæ€»æ˜¯ç¡®å®šçš„ã€‚æ ¹æ®ç»“æœçš„å¯é¢„æµ‹æ€§ï¼Œç¯å¢ƒå¯åˆ†ä¸º<strong>ç¡®å®šæ€§</strong>å’Œ<strong>éšæœºæ€§</strong>ã€‚æ—…è¡ŒåŠ©æ‰‹çš„ä»»åŠ¡ç¯å¢ƒå°±æ˜¯å…¸å‹çš„éšæœºæ€§ç¯å¢ƒã€‚å½“å®ƒæœç´¢ç¥¨ä»·æ—¶ï¼Œä¸¤æ¬¡ç›¸é‚»çš„è°ƒç”¨è¿”å›çš„æœºç¥¨ä»·æ ¼å’Œä½™ç¥¨æ•°é‡éƒ½å¯èƒ½ä¸åŒï¼Œè¿™å°±è¦æ±‚æ™ºèƒ½ä½“å¿…é¡»å…·å¤‡å¤„ç†ä¸ç¡®å®šæ€§ã€ç›‘æ§å˜åŒ–å¹¶åŠæ—¶å†³ç­–çš„èƒ½åŠ›ã€‚</p>
<p>æ­¤å¤–ï¼Œç¯å¢ƒä¸­è¿˜å¯èƒ½å­˜åœ¨å…¶ä»–è¡ŒåŠ¨è€…ï¼Œä»è€Œå½¢æˆ<strong>å¤šæ™ºèƒ½ä½“(Multi-agent)</strong> Â ç¯å¢ƒã€‚å¯¹äºæ—…è¡ŒåŠ©æ‰‹è€Œè¨€ï¼Œå…¶ä»–ç”¨æˆ·çš„é¢„è®¢è¡Œä¸ºã€å…¶ä»–è‡ªåŠ¨åŒ–è„šæœ¬ï¼Œç”šè‡³èˆªå¸çš„åŠ¨æ€è°ƒä»·ç³»ç»Ÿï¼Œéƒ½æ˜¯ç¯å¢ƒä¸­çš„å…¶ä»–â€œæ™ºèƒ½ä½“â€ã€‚å®ƒä»¬çš„è¡ŒåŠ¨ï¼ˆä¾‹å¦‚ï¼Œè®¢èµ°æœ€åä¸€å¼ ç‰¹ä»·ç¥¨ï¼‰ä¼šç›´æ¥æ”¹å˜æ—…è¡ŒåŠ©æ‰‹æ‰€å¤„ç¯å¢ƒçš„çŠ¶æ€ï¼Œè¿™å¯¹æ™ºèƒ½ä½“çš„å¿«é€Ÿå“åº”å’Œç­–ç•¥é€‰æ‹©æå‡ºäº†æ›´é«˜è¦æ±‚ã€‚</p>
<p>æœ€åï¼Œå‡ ä¹æ‰€æœ‰ä»»åŠ¡éƒ½å‘ç”Ÿåœ¨<strong>åºè´¯</strong>ä¸”<strong>åŠ¨æ€</strong>çš„ç¯å¢ƒä¸­ã€‚â€œåºè´¯â€æ„å‘³ç€å½“å‰åŠ¨ä½œä¼šå½±å“æœªæ¥ï¼›è€Œâ€œåŠ¨æ€â€åˆ™æ„å‘³ç€ç¯å¢ƒè‡ªèº«å¯èƒ½åœ¨æ™ºèƒ½ä½“å†³ç­–æ—¶å‘ç”Ÿå˜åŒ–ã€‚è¿™å°±è¦æ±‚æ™ºèƒ½ä½“çš„â€œæ„ŸçŸ¥-æ€è€ƒ-è¡ŒåŠ¨-è§‚å¯Ÿâ€å¾ªç¯å¿…é¡»èƒ½å¤Ÿå¿«é€Ÿã€çµæ´»åœ°é€‚åº”æŒç»­å˜åŒ–çš„ä¸–ç•Œã€‚</p>
<h4 data-id="heading-6">1.2.2 æ™ºèƒ½ä½“çš„è¿è¡Œæœºåˆ¶</h4>
<p>åœ¨å®šä¹‰äº†æ™ºèƒ½ä½“æ‰€å¤„çš„ä»»åŠ¡ç¯å¢ƒåï¼Œæˆ‘ä»¬æ¥æ¢è®¨å…¶æ ¸å¿ƒçš„è¿è¡Œæœºåˆ¶ã€‚æ™ºèƒ½ä½“å¹¶éä¸€æ¬¡æ€§å®Œæˆä»»åŠ¡ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªæŒç»­çš„å¾ªç¯ä¸ç¯å¢ƒè¿›è¡Œäº¤äº’ï¼Œè¿™ä¸ªæ ¸å¿ƒæœºåˆ¶è¢«ç§°ä¸ºÂ <strong>æ™ºèƒ½ä½“å¾ªç¯ (Agent Loop)</strong> ã€‚å¦‚å›¾1.5æ‰€ç¤ºï¼Œè¯¥å¾ªç¯æè¿°äº†æ™ºèƒ½ä½“ä¸ç¯å¢ƒä¹‹é—´çš„åŠ¨æ€äº¤äº’è¿‡ç¨‹ï¼Œæ„æˆäº†å…¶è‡ªä¸»è¡Œä¸ºçš„åŸºç¡€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9c9cf05e23545438e22333b49f245ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853724&amp;x-signature=GVR%2FmlT52TeMvbn8qeUnim2AQoE%3D" alt="" loading="lazy"/></p>
<p>å›¾ 1.5 æ™ºèƒ½ä½“ä¸ç¯å¢ƒäº¤äº’çš„åŸºæœ¬å¾ªç¯</p>
<p>è¿™ä¸ªå¾ªç¯ä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ä¸ªç›¸äº’å…³è”çš„é˜¶æ®µï¼š</p>
<ol start="0">
<li><strong>æ„ŸçŸ¥ (Perception)</strong> ï¼šè¿™æ˜¯å¾ªç¯çš„èµ·ç‚¹ã€‚æ™ºèƒ½ä½“é€šè¿‡å…¶ä¼ æ„Ÿå™¨ï¼ˆä¾‹å¦‚ï¼ŒAPIçš„ç›‘å¬ç«¯å£ã€ç”¨æˆ·è¾“å…¥æ¥å£ï¼‰æ¥æ”¶æ¥è‡ªç¯å¢ƒçš„è¾“å…¥ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯ï¼Œå³<strong>è§‚å¯Ÿ (Observation)</strong> ï¼Œæ—¢å¯ä»¥æ˜¯ç”¨æˆ·çš„åˆå§‹æŒ‡ä»¤ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸Šä¸€æ­¥è¡ŒåŠ¨æ‰€å¯¼è‡´çš„ç¯å¢ƒçŠ¶æ€å˜åŒ–åé¦ˆã€‚</li>
<li><strong>æ€è€ƒ (Thought)</strong> ï¼šæ¥æ”¶åˆ°è§‚å¯Ÿä¿¡æ¯åï¼Œæ™ºèƒ½ä½“è¿›å…¥å…¶æ ¸å¿ƒå†³ç­–é˜¶æ®µã€‚å¯¹äºLLMæ™ºèƒ½ä½“è€Œè¨€ï¼Œè¿™é€šå¸¸æ˜¯ç”±å¤§è¯­è¨€æ¨¡å‹é©±åŠ¨çš„å†…éƒ¨æ¨ç†è¿‡ç¨‹ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œâ€œæ€è€ƒâ€é˜¶æ®µå¯è¿›ä¸€æ­¥ç»†åˆ†ä¸ºä¸¤ä¸ªå…³é”®ç¯èŠ‚ï¼š</li>
</ol>
<ul>
<li><strong>è§„åˆ’ (Planning)</strong> ï¼šæ™ºèƒ½ä½“åŸºäºå½“å‰çš„è§‚å¯Ÿå’Œå…¶å†…éƒ¨è®°å¿†ï¼Œæ›´æ–°å¯¹ä»»åŠ¡å’Œç¯å¢ƒçš„ç†è§£ï¼Œå¹¶åˆ¶å®šæˆ–è°ƒæ•´ä¸€ä¸ªè¡ŒåŠ¨è®¡åˆ’ã€‚è¿™å¯èƒ½æ¶‰åŠå°†å¤æ‚ç›®æ ‡åˆ†è§£ä¸ºä¸€ç³»åˆ—æ›´å…·ä½“çš„å­ä»»åŠ¡ã€‚</li>
<li><strong>å·¥å…·é€‰æ‹© (Tool Selection)</strong> ï¼šæ ¹æ®å½“å‰è®¡åˆ’ï¼Œæ™ºèƒ½ä½“ä»å…¶å¯ç”¨çš„å·¥å…·åº“ä¸­ï¼Œé€‰æ‹©æœ€é€‚åˆæ‰§è¡Œä¸‹ä¸€æ­¥éª¤çš„å·¥å…·ï¼Œå¹¶ç¡®å®šè°ƒç”¨è¯¥å·¥å…·æ‰€éœ€çš„å…·ä½“å‚æ•°ã€‚</li>
</ul>
<ol start="3">
<li><strong>è¡ŒåŠ¨ (Action)</strong> ï¼šå†³ç­–å®Œæˆåï¼Œæ™ºèƒ½ä½“é€šè¿‡å…¶æ‰§è¡Œå™¨ï¼ˆActuatorsï¼‰æ‰§è¡Œå…·ä½“çš„è¡ŒåŠ¨ã€‚è¿™é€šå¸¸è¡¨ç°ä¸ºè°ƒç”¨ä¸€ä¸ªé€‰å®šçš„å·¥å…·ï¼ˆå¦‚ä»£ç è§£é‡Šå™¨ã€æœç´¢å¼•æ“APIï¼‰ï¼Œä»è€Œå¯¹ç¯å¢ƒæ–½åŠ å½±å“ï¼Œæ„å›¾æ”¹å˜ç¯å¢ƒçš„çŠ¶æ€ã€‚</li>
</ol>
<p>è¡ŒåŠ¨å¹¶éå¾ªç¯çš„ç»ˆç‚¹ã€‚æ™ºèƒ½ä½“çš„è¡ŒåŠ¨ä¼šå¼•èµ·<strong>ç¯å¢ƒ (Environment)</strong> Â çš„<strong>çŠ¶æ€å˜åŒ– (State Change)</strong> ï¼Œç¯å¢ƒéšå³ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„<strong>è§‚å¯Ÿ (Observation)</strong> Â ä½œä¸ºç»“æœåé¦ˆã€‚è¿™ä¸ªæ–°çš„è§‚å¯Ÿåˆä¼šåœ¨ä¸‹ä¸€è½®å¾ªç¯ä¸­è¢«æ™ºèƒ½ä½“çš„æ„ŸçŸ¥ç³»ç»Ÿæ•è·ï¼Œå½¢æˆä¸€ä¸ªæŒç»­çš„â€œæ„ŸçŸ¥-æ€è€ƒ-è¡ŒåŠ¨-è§‚å¯Ÿâ€çš„é—­ç¯ã€‚æ™ºèƒ½ä½“æ­£æ˜¯é€šè¿‡ä¸æ–­é‡å¤è¿™ä¸€å¾ªç¯ï¼Œé€æ­¥æ¨è¿›ä»»åŠ¡ï¼Œä»åˆå§‹çŠ¶æ€å‘ç›®æ ‡çŠ¶æ€æ¼”è¿›ã€‚</p>
<h4 data-id="heading-7">1.2.3 æ™ºèƒ½ä½“çš„æ„ŸçŸ¥ä¸è¡ŒåŠ¨</h4>
<p>åœ¨å·¥ç¨‹å®è·µä¸­ï¼Œä¸ºäº†è®©LLMèƒ½å¤Ÿæœ‰æ•ˆé©±åŠ¨è¿™ä¸ªå¾ªç¯ï¼Œæˆ‘ä»¬éœ€è¦ä¸€å¥—æ˜ç¡®çš„<strong>äº¤äº’åè®® (Interaction Protocol)</strong> Â æ¥è§„èŒƒå…¶ä¸ç¯å¢ƒä¹‹é—´çš„ä¿¡æ¯äº¤æ¢ã€‚</p>
<p>åœ¨è®¸å¤šç°ä»£æ™ºèƒ½ä½“æ¡†æ¶ä¸­ï¼Œè¿™ä¸€åè®®ä½“ç°åœ¨å¯¹æ™ºèƒ½ä½“æ¯ä¸€æ¬¡è¾“å‡ºçš„ç»“æ„åŒ–å®šä¹‰ä¸Šã€‚æ™ºèƒ½ä½“çš„è¾“å‡ºä¸å†æ˜¯å•ä¸€çš„è‡ªç„¶è¯­è¨€å›å¤ï¼Œè€Œæ˜¯ä¸€æ®µéµå¾ªç‰¹å®šæ ¼å¼çš„æ–‡æœ¬ï¼Œå…¶ä¸­æ˜ç¡®åœ°å±•ç¤ºäº†å…¶å†…éƒ¨çš„æ¨ç†è¿‡ç¨‹ä¸æœ€ç»ˆå†³ç­–ã€‚</p>
<p>è¿™ä¸ªç»“æ„é€šå¸¸åŒ…å«ä¸¤ä¸ªæ ¸å¿ƒéƒ¨åˆ†ï¼š</p>
<ul>
<li><strong>Thought (æ€è€ƒ)</strong> ï¼šè¿™æ˜¯æ™ºèƒ½ä½“å†…éƒ¨å†³ç­–çš„â€œå¿«ç…§â€ã€‚å®ƒä»¥è‡ªç„¶è¯­è¨€å½¢å¼é˜è¿°äº†æ™ºèƒ½ä½“å¦‚ä½•åˆ†æå½“å‰æƒ…å¢ƒã€å›é¡¾ä¸Šä¸€æ­¥çš„è§‚å¯Ÿç»“æœã€è¿›è¡Œè‡ªæˆ‘åæ€ä¸é—®é¢˜åˆ†è§£ï¼Œå¹¶æœ€ç»ˆè§„åˆ’å‡ºä¸‹ä¸€æ­¥çš„å…·ä½“è¡ŒåŠ¨ã€‚</li>
<li><strong>Action (è¡ŒåŠ¨)</strong> ï¼šè¿™æ˜¯æ™ºèƒ½ä½“åŸºäºæ€è€ƒåï¼Œå†³å®šå¯¹ç¯å¢ƒæ–½åŠ çš„å…·ä½“æ“ä½œï¼Œé€šå¸¸ä»¥å‡½æ•°è°ƒç”¨çš„å½¢å¼è¡¨ç¤ºã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼Œä¸€ä¸ªæ­£åœ¨è§„åˆ’æ—…è¡Œçš„æ™ºèƒ½ä½“å¯èƒ½ä¼šç”Ÿæˆå¦‚ä¸‹æ ¼å¼åŒ–çš„è¾“å‡ºï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">Thought:</span> ç”¨æˆ·æƒ³çŸ¥é“åŒ—äº¬çš„å¤©æ°”ã€‚æˆ‘éœ€è¦è°ƒç”¨å¤©æ°”æŸ¥è¯¢å·¥å…·ã€‚
<span class="hljs-symbol">Action:</span> get_weather(<span class="hljs-string">"åŒ—äº¬"</span>)
</code></pre>
<p>è¿™é‡Œçš„<code>Action</code>å­—æ®µæ„æˆäº†å¯¹å¤–éƒ¨ä¸–ç•Œçš„æŒ‡ä»¤ã€‚ä¸€ä¸ªå¤–éƒ¨çš„<strong>è§£æå™¨ (Parser)</strong> Â ä¼šæ•æ‰åˆ°è¿™ä¸ªæŒ‡ä»¤ï¼Œå¹¶è°ƒç”¨ç›¸åº”çš„<code>get_weather</code>å‡½æ•°ã€‚</p>
<p>è¡ŒåŠ¨æ‰§è¡Œåï¼Œç¯å¢ƒä¼šè¿”å›ä¸€ä¸ªç»“æœã€‚ä¾‹å¦‚ï¼Œ<code>get_weather</code>å‡½æ•°å¯èƒ½è¿”å›ä¸€ä¸ªåŒ…å«è¯¦ç»†å¤©æ°”æ•°æ®çš„JSONå¯¹è±¡ã€‚ç„¶è€Œï¼ŒåŸå§‹çš„æœºå™¨å¯è¯»æ•°æ®ï¼ˆå¦‚JSONï¼‰é€šå¸¸åŒ…å«LLMæ— éœ€å…³æ³¨çš„å†—ä½™ä¿¡æ¯ï¼Œä¸”æ ¼å¼ä¸ç¬¦åˆå…¶è‡ªç„¶è¯­è¨€å¤„ç†çš„ä¹ æƒ¯ã€‚</p>
<p>å› æ­¤ï¼Œæ„ŸçŸ¥ç³»ç»Ÿçš„ä¸€ä¸ªé‡è¦èŒè´£å°±æ˜¯æ‰®æ¼”ä¼ æ„Ÿå™¨çš„è§’è‰²ï¼šå°†è¿™ä¸ªåŸå§‹è¾“å‡ºå¤„ç†å¹¶å°è£…æˆä¸€æ®µç®€æ´ã€æ¸…æ™°çš„è‡ªç„¶è¯­è¨€æ–‡æœ¬ï¼Œå³è§‚å¯Ÿã€‚</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">Observation: åŒ—äº¬å½“å‰å¤©æ°”ä¸ºæ™´ï¼Œæ°”æ¸©25æ‘„æ°åº¦ï¼Œå¾®é£ã€‚</span>
</code></pre>
<p>è¿™æ®µ<code>Observation</code>æ–‡æœ¬ä¼šè¢«åé¦ˆç»™æ™ºèƒ½ä½“ï¼Œä½œä¸ºä¸‹ä¸€è½®å¾ªç¯çš„ä¸»è¦è¾“å…¥ä¿¡æ¯ï¼Œä¾›å…¶è¿›è¡Œæ–°ä¸€è½®çš„<code>Thought</code>å’Œ<code>Action</code>ã€‚</p>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œé€šè¿‡è¿™ä¸ªç”±Thoughtã€Actionã€Observationæ„æˆçš„ä¸¥è°¨å¾ªç¯ï¼ŒLLMæ™ºèƒ½ä½“å¾—ä»¥å°†å†…éƒ¨çš„è¯­è¨€æ¨ç†èƒ½åŠ›ï¼Œä¸å¤–éƒ¨ç¯å¢ƒçš„çœŸå®ä¿¡æ¯å’Œå·¥å…·æ“ä½œèƒ½åŠ›æœ‰æ•ˆåœ°ç»“åˆèµ·æ¥ã€‚</p>
<h3 data-id="heading-8">1.3 åŠ¨æ‰‹ä½“éªŒï¼š5 åˆ†é’Ÿå®ç°ç¬¬ä¸€ä¸ªæ™ºèƒ½ä½“</h3>
<p>åœ¨å‰é¢çš„å°èŠ‚ï¼Œæˆ‘ä»¬å­¦ä¹ äº†æ™ºèƒ½ä½“çš„ä»»åŠ¡ç¯å¢ƒã€æ ¸å¿ƒè¿è¡Œæœºåˆ¶ä»¥åŠ<code>Thought-Action-Observation</code>äº¤äº’èŒƒå¼ã€‚ç†è®ºçŸ¥è¯†å›ºç„¶é‡è¦ï¼Œä½†æœ€å¥½çš„å­¦ä¹ æ–¹å¼æ˜¯äº²æ‰‹å®è·µã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†å¼•å¯¼æ‚¨ä½¿ç”¨å‡ è¡Œç®€å•çš„Pythonä»£ç ï¼Œä»é›¶å¼€å§‹æ„å»ºä¸€ä¸ªå¯ä»¥å·¥ä½œçš„æ™ºèƒ½æ—…è¡ŒåŠ©æ‰‹ã€‚è¿™ä¸ªè¿‡ç¨‹å°†éµå¾ªæˆ‘ä»¬åˆšåˆšå­¦åˆ°çš„ç†è®ºå¾ªç¯ï¼Œè®©æ‚¨ç›´è§‚åœ°æ„Ÿå—åˆ°ä¸€ä¸ªæ™ºèƒ½ä½“æ˜¯å¦‚ä½•â€œæ€è€ƒâ€å¹¶ä¸å¤–éƒ¨â€œå·¥å…·â€äº’åŠ¨çš„ã€‚è®©æˆ‘ä»¬å¼€å§‹å§ï¼</p>
<p>åœ¨æœ¬æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ„å»ºä¸€ä¸ªèƒ½å¤„ç†åˆ†æ­¥ä»»åŠ¡çš„æ™ºèƒ½æ—…è¡ŒåŠ©æ‰‹ã€‚éœ€è¦è§£å†³çš„ç”¨æˆ·ä»»åŠ¡å®šä¹‰ä¸ºï¼š"ä½ å¥½ï¼Œè¯·å¸®æˆ‘æŸ¥è¯¢ä¸€ä¸‹ä»Šå¤©åŒ—äº¬çš„å¤©æ°”ï¼Œç„¶åæ ¹æ®å¤©æ°”æ¨èä¸€ä¸ªåˆé€‚çš„æ—…æ¸¸æ™¯ç‚¹ã€‚"è¦å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼Œæ™ºèƒ½ä½“å¿…é¡»å±•ç°å‡ºæ¸…æ™°çš„é€»è¾‘è§„åˆ’èƒ½åŠ›ã€‚å®ƒéœ€è¦å…ˆè°ƒç”¨å¤©æ°”æŸ¥è¯¢å·¥å…·ï¼Œå¹¶å°†è·å¾—çš„è§‚å¯Ÿç»“æœä½œä¸ºä¸‹ä¸€æ­¥çš„ä¾æ®ã€‚åœ¨ä¸‹ä¸€è½®å¾ªç¯ä¸­ï¼Œå®ƒå†è°ƒç”¨æ™¯ç‚¹æ¨èå·¥å…·ï¼Œä»è€Œå¾—å‡ºæœ€ç»ˆå»ºè®®ã€‚</p>
<h4 data-id="heading-9">1.3.1 å‡†å¤‡å·¥ä½œ</h4>
<p>ä¸ºäº†èƒ½ä»Pythonç¨‹åºä¸­è®¿é—®ç½‘ç»œAPIï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªHTTPåº“ã€‚<code>requests</code>æ˜¯Pythonç¤¾åŒºä¸­æœ€æµè¡Œã€æœ€æ˜“ç”¨çš„é€‰æ‹©ã€‚<code>tavily-python</code>æ˜¯ä¸€ä¸ªå¼ºå¤§çš„AIæœç´¢APIå®¢æˆ·ç«¯ï¼Œç”¨äºè·å–å®æ—¶çš„ç½‘ç»œæœç´¢ç»“æœï¼Œå¯ä»¥åœ¨å®˜ç½‘æ³¨å†Œåè·å–APIã€‚<code>openai</code>æ˜¯OpenAIå®˜æ–¹æä¾›çš„Python SDKï¼Œç”¨äºè°ƒç”¨GPTç­‰å¤§è¯­è¨€æ¨¡å‹æœåŠ¡ã€‚è¯·å…ˆé€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£…å®ƒä»¬ï¼š</p>
<pre><code class="hljs">pip install requests tavily-python openai
</code></pre>
<p>1ï¼‰æŒ‡ä»¤æ¨¡æ¿</p>
<p>é©±åŠ¨çœŸå®LLMçš„å…³é”®åœ¨äº<strong>æç¤ºå·¥ç¨‹ï¼ˆPrompt Engineeringï¼‰</strong> ã€‚æˆ‘ä»¬éœ€è¦è®¾è®¡ä¸€ä¸ªâ€œæŒ‡ä»¤æ¨¡æ¿â€ï¼Œå‘Šè¯‰LLMå®ƒåº”è¯¥æ‰®æ¼”ä»€ä¹ˆè§’è‰²ã€æ‹¥æœ‰å“ªäº›å·¥å…·ã€ä»¥åŠå¦‚ä½•æ ¼å¼åŒ–å®ƒçš„æ€è€ƒå’Œè¡ŒåŠ¨ã€‚è¿™æ˜¯æˆ‘ä»¬æ™ºèƒ½ä½“çš„â€œè¯´æ˜ä¹¦â€ï¼Œå®ƒå°†ä½œä¸º<code>system_prompt</code>ä¼ é€’ç»™LLMã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">AGENT_SYSTEM_PROMPT</span> =
""
"
ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½æ—…è¡ŒåŠ©æ‰‹ã€‚ä½ çš„ä»»åŠ¡æ˜¯åˆ†æç”¨æˆ·çš„è¯·æ±‚ï¼Œå¹¶ä½¿ç”¨å¯ç”¨å·¥å…·ä¸€æ­¥æ­¥åœ°è§£å†³é—®é¢˜ã€‚
<span class="hljs-comment"># å¯ç”¨å·¥å…·:</span>
- `get_weather(city: str)`: æŸ¥è¯¢æŒ‡å®šåŸå¸‚çš„å®æ—¶å¤©æ°”ã€‚
- `get_attraction(city: str, weather: str)`: æ ¹æ®åŸå¸‚å’Œå¤©æ°”æœç´¢æ¨èçš„æ—…æ¸¸æ™¯ç‚¹ã€‚
<span class="hljs-comment"># è¡ŒåŠ¨æ ¼å¼:</span>
ä½ çš„å›ç­”å¿…é¡»ä¸¥æ ¼éµå¾ªä»¥ä¸‹æ ¼å¼ã€‚é¦–å…ˆæ˜¯ä½ çš„æ€è€ƒè¿‡ç¨‹ï¼Œç„¶åæ˜¯ä½ è¦æ‰§è¡Œçš„å…·ä½“è¡ŒåŠ¨ã€‚
Thought: <span class="hljs-section">[è¿™é‡Œæ˜¯ä½ çš„æ€è€ƒè¿‡ç¨‹å’Œä¸‹ä¸€æ­¥è®¡åˆ’]</span>
Action: <span class="hljs-section">[è¿™é‡Œæ˜¯ä½ è¦è°ƒç”¨çš„å·¥å…·ï¼Œæ ¼å¼ä¸º function_name(arg_name="
arg_value
")]</span>
<span class="hljs-comment"># ä»»åŠ¡å®Œæˆ:</span>
å½“ä½ æ”¶é›†åˆ°è¶³å¤Ÿçš„ä¿¡æ¯ï¼Œèƒ½å¤Ÿå›ç­”ç”¨æˆ·çš„æœ€ç»ˆé—®é¢˜æ—¶ï¼Œä½ å¿…é¡»ä½¿ç”¨ `finish(<span class="hljs-attr">answer</span>=<span class="hljs-string">"
...
"</span>)` æ¥è¾“å‡ºæœ€ç»ˆç­”æ¡ˆã€‚
è¯·å¼€å§‹å§ï¼
"
""
</code></pre>
<p>2ï¼‰å·¥å…·1ï¼šæŸ¥è¯¢çœŸå®å¤©æ°”</p>
<p>æˆ‘ä»¬å°†ä½¿ç”¨å…è´¹çš„å¤©æ°”æŸ¥è¯¢æœåŠ¡<code>wttr.in</code>ï¼Œå®ƒèƒ½ä»¥JSONæ ¼å¼è¿”å›æŒ‡å®šåŸå¸‚çš„å¤©æ°”æ•°æ®ã€‚ä¸‹é¢æ˜¯å®ç°è¯¥å·¥å…·çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">import</span> json
defget_weather(city: <span class="hljs-built_in">str</span>) -&gt; <span class="hljs-built_in">str</span>:
<span class="hljs-string">"""
é€šè¿‡è°ƒç”¨ wttr.in API æŸ¥è¯¢çœŸå®çš„å¤©æ°”ä¿¡æ¯ã€‚
"""</span>
<span class="hljs-comment"># APIç«¯ç‚¹ï¼Œæˆ‘ä»¬è¯·æ±‚JSONæ ¼å¼çš„æ•°æ®</span>
url = <span class="hljs-string">f"https://wttr.in/<span class="hljs-subst">{city}</span>?format=j1"</span>
<span class="hljs-keyword">try</span>:
<span class="hljs-comment"># å‘èµ·ç½‘ç»œè¯·æ±‚</span>
response = requests.get(url)
<span class="hljs-comment"># æ£€æŸ¥å“åº”çŠ¶æ€ç æ˜¯å¦ä¸º200 (æˆåŠŸ)</span>
response.raise_for_status()
<span class="hljs-comment"># è§£æè¿”å›çš„JSONæ•°æ®</span>
data = response.json()
<span class="hljs-comment"># æå–å½“å‰å¤©æ°”çŠ¶å†µ</span>
current_condition = data[<span class="hljs-string">'current_condition'</span>][<span class="hljs-number">0</span>]
weather_desc = current_condition[<span class="hljs-string">'weatherDesc'</span>][<span class="hljs-number">0</span>][<span class="hljs-string">'value'</span>]
temp_c = current_condition[<span class="hljs-string">'temp_C'</span>]
<span class="hljs-comment"># æ ¼å¼åŒ–æˆè‡ªç„¶è¯­è¨€è¿”å›</span>
<span class="hljs-keyword">return</span><span class="hljs-string">f"<span class="hljs-subst">{city}</span>å½“å‰å¤©æ°”ï¼š<span class="hljs-subst">{weather_desc}</span>ï¼Œæ°”æ¸©<span class="hljs-subst">{temp_c}</span>æ‘„æ°åº¦"</span>
<span class="hljs-keyword">except</span> requests.exceptions.RequestException <span class="hljs-keyword">as</span> e:
<span class="hljs-comment"># å¤„ç†ç½‘ç»œé”™è¯¯</span>
<span class="hljs-keyword">return</span><span class="hljs-string">f"é”™è¯¯ï¼šæŸ¥è¯¢å¤©æ°”æ—¶é‡åˆ°ç½‘ç»œé—®é¢˜ - <span class="hljs-subst">{e}</span>"</span>
<span class="hljs-keyword">except</span> (KeyError, IndexError) <span class="hljs-keyword">as</span> e:
<span class="hljs-comment"># å¤„ç†æ•°æ®è§£æé”™è¯¯</span>
<span class="hljs-keyword">return</span><span class="hljs-string">f"é”™è¯¯ï¼šè§£æå¤©æ°”æ•°æ®å¤±è´¥ï¼Œå¯èƒ½æ˜¯åŸå¸‚åç§°æ— æ•ˆ - <span class="hljs-subst">{e}</span>"</span>
</code></pre>
<p>3ï¼‰å·¥å…·2ï¼šæœç´¢å¹¶æ¨èæ—…æ¸¸æ™¯ç‚¹</p>
<p>æˆ‘ä»¬å°†å®šä¹‰ä¸€ä¸ªæ–°å·¥å…·<code>search_attraction</code>ï¼Œå®ƒä¼šæ ¹æ®åŸå¸‚å’Œå¤©æ°”çŠ¶å†µï¼Œäº’è”ç½‘ä¸Šæœç´¢åˆé€‚çš„æ™¯ç‚¹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> tavily <span class="hljs-keyword">import</span> TavilyClient
defget_attraction(city: <span class="hljs-built_in">str</span>, weather: <span class="hljs-built_in">str</span>) -&gt; <span class="hljs-built_in">str</span>:
<span class="hljs-string">"""
æ ¹æ®åŸå¸‚å’Œå¤©æ°”ï¼Œä½¿ç”¨Tavily Search APIæœç´¢å¹¶è¿”å›ä¼˜åŒ–åçš„æ™¯ç‚¹æ¨èã€‚
"""</span>
<span class="hljs-comment"># 1. ä»ç¯å¢ƒå˜é‡ä¸­è¯»å–APIå¯†é’¥</span>
api_key = os.environ.get(<span class="hljs-string">"TAVILY_API_KEY"</span>)
ifnot api_key:
<span class="hljs-keyword">return</span><span class="hljs-string">"é”™è¯¯ï¼šæœªé…ç½®TAVILY_API_KEYç¯å¢ƒå˜é‡ã€‚"</span>
<span class="hljs-comment"># 2. åˆå§‹åŒ–Tavilyå®¢æˆ·ç«¯</span>
tavily = TavilyClient(api_key=api_key)
<span class="hljs-comment"># 3. æ„é€ ä¸€ä¸ªç²¾ç¡®çš„æŸ¥è¯¢</span>
query = <span class="hljs-string">f"'<span class="hljs-subst">{city}</span>' åœ¨'<span class="hljs-subst">{weather}</span>'å¤©æ°”ä¸‹æœ€å€¼å¾—å»çš„æ—…æ¸¸æ™¯ç‚¹æ¨èåŠç†ç”±"</span>
<span class="hljs-keyword">try</span>:
<span class="hljs-comment"># 4. è°ƒç”¨APIï¼Œinclude_answer=Trueä¼šè¿”å›ä¸€ä¸ªç»¼åˆæ€§çš„å›ç­”</span>
response = tavily.search(query=query, search_depth=<span class="hljs-string">"basic"</span>, include_answer=<span class="hljs-literal">True</span>)
<span class="hljs-comment"># 5. Tavilyè¿”å›çš„ç»“æœå·²ç»éå¸¸å¹²å‡€ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨</span>
<span class="hljs-comment"># response['answer'] æ˜¯ä¸€ä¸ªåŸºäºæ‰€æœ‰æœç´¢ç»“æœçš„æ€»ç»“æ€§å›ç­”</span>
<span class="hljs-keyword">if</span> response.get(<span class="hljs-string">"answer"</span>):
<span class="hljs-keyword">return</span> response[<span class="hljs-string">"answer"</span>]
<span class="hljs-comment"># å¦‚æœæ²¡æœ‰ç»¼åˆæ€§å›ç­”ï¼Œåˆ™æ ¼å¼åŒ–åŸå§‹ç»“æœ</span>
formatted_results = []
<span class="hljs-keyword">for</span> result <span class="hljs-keyword">in</span> response.get(<span class="hljs-string">"results"</span>, []):
formatted_results.append(<span class="hljs-string">f"- <span class="hljs-subst">{result[<span class="hljs-string">'title'</span>]}</span>: <span class="hljs-subst">{result[<span class="hljs-string">'content'</span>]}</span>"</span>)
ifnot formatted_results:
<span class="hljs-keyword">return</span><span class="hljs-string">"æŠ±æ­‰ï¼Œæ²¡æœ‰æ‰¾åˆ°ç›¸å…³çš„æ—…æ¸¸æ™¯ç‚¹æ¨èã€‚"</span>
<span class="hljs-keyword">return</span><span class="hljs-string">"æ ¹æ®æœç´¢ï¼Œä¸ºæ‚¨æ‰¾åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼š\n"</span> + <span class="hljs-string">"\n"</span>.join(formatted_results)
<span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
<span class="hljs-keyword">return</span><span class="hljs-string">f"é”™è¯¯ï¼šæ‰§è¡ŒTavilyæœç´¢æ—¶å‡ºç°é—®é¢˜ - <span class="hljs-subst">{e}</span>"</span>
</code></pre>
<p>æœ€åï¼Œæˆ‘ä»¬å°†æ‰€æœ‰å·¥å…·å‡½æ•°æ”¾å…¥ä¸€ä¸ªå­—å…¸ï¼Œä¾›ä¸»å¾ªç¯è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-comment"># å°†æ‰€æœ‰å·¥å…·å‡½æ•°æ”¾å…¥ä¸€ä¸ªå­—å…¸ï¼Œæ–¹ä¾¿åç»­è°ƒç”¨</span>
available_tools = {
<span class="hljs-string">"get_weather"</span>: get_weather,
<span class="hljs-string">"get_attraction"</span>: get_attraction,
}
</code></pre>
<h4 data-id="heading-10">1.3.2 æ¥å…¥å¤§è¯­è¨€æ¨¡å‹</h4>
<p>å½“å‰ï¼Œè®¸å¤šLLMæœåŠ¡æä¾›å•†ï¼ˆåŒ…æ‹¬OpenAIã€Azureã€ä»¥åŠä¼—å¤šå¼€æºæ¨¡å‹æœåŠ¡æ¡†æ¶å¦‚Ollamaã€vLLMç­‰ï¼‰éƒ½éµå¾ªäº†ä¸OpenAI APIç›¸ä¼¼çš„æ¥å£è§„èŒƒã€‚è¿™ç§æ ‡å‡†åŒ–ä¸ºå¼€å‘è€…å¸¦æ¥äº†æå¤§çš„ä¾¿åˆ©ã€‚æ™ºèƒ½ä½“çš„è‡ªä¸»å†³ç­–èƒ½åŠ›æ¥æºäºLLMã€‚æˆ‘ä»¬å°†å®ç°ä¸€ä¸ªé€šç”¨çš„å®¢æˆ·ç«¯<code>OpenAICompatibleClient</code>ï¼Œå®ƒå¯ä»¥è¿æ¥åˆ°ä»»ä½•å…¼å®¹OpenAIæ¥å£è§„èŒƒçš„LLMæœåŠ¡ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI
classOpenAICompatibleClient:
<span class="hljs-string">"""
ä¸€ä¸ªç”¨äºè°ƒç”¨ä»»ä½•å…¼å®¹OpenAIæ¥å£çš„LLMæœåŠ¡çš„å®¢æˆ·ç«¯ã€‚
"""</span>
def__init__(self, model: <span class="hljs-built_in">str</span>, api_key: <span class="hljs-built_in">str</span>, base_url: <span class="hljs-built_in">str</span>):
self.model = model
self.client = OpenAI(api_key=api_key, base_url=base_url)
defgenerate(self, prompt: <span class="hljs-built_in">str</span>, system_prompt: <span class="hljs-built_in">str</span>) -&gt; <span class="hljs-built_in">str</span>:
<span class="hljs-string">"""è°ƒç”¨LLM APIæ¥ç”Ÿæˆå›åº”ã€‚"""</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ­£åœ¨è°ƒç”¨å¤§è¯­è¨€æ¨¡å‹..."</span>)
<span class="hljs-keyword">try</span>:
messages = [
{<span class="hljs-string">'role'</span>: <span class="hljs-string">'system'</span>, <span class="hljs-string">'content'</span>: system_prompt},
{<span class="hljs-string">'role'</span>: <span class="hljs-string">'user'</span>, <span class="hljs-string">'content'</span>: prompt}
]
response = self.client.chat.completions.create(
model=self.model,
messages=messages,
stream=<span class="hljs-literal">False</span>
)
answer = response.choices[<span class="hljs-number">0</span>].message.content
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å¤§è¯­è¨€æ¨¡å‹å“åº”æˆåŠŸã€‚"</span>)
<span class="hljs-keyword">return</span> answer
<span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"è°ƒç”¨LLM APIæ—¶å‘ç”Ÿé”™è¯¯: <span class="hljs-subst">{e}</span>"</span>)
<span class="hljs-keyword">return</span><span class="hljs-string">"é”™è¯¯ï¼šè°ƒç”¨è¯­è¨€æ¨¡å‹æœåŠ¡æ—¶å‡ºé”™ã€‚"</span>
</code></pre>
<p>è¦å®ä¾‹åŒ–æ­¤ç±»ï¼Œæ‚¨éœ€è¦æä¾›ä¸‰ä¸ªä¿¡æ¯ï¼š<code>API_KEY</code>ã€<code>BASE_URL</code>å’ŒÂ <code>MODEL_ID</code>ï¼Œå…·ä½“å€¼å–å†³äºæ‚¨ä½¿ç”¨çš„æœåŠ¡å•†ï¼ˆå¦‚OpenAIå®˜æ–¹ã€Azureã€æˆ–Ollamaç­‰æœ¬åœ°æ¨¡å‹ï¼‰ï¼Œå¦‚æœæš‚æ—¶æ²¡æœ‰æ¸ é“è·å–ï¼Œå¯ä»¥å‚è€ƒDatawhaleå¦ä¸€æœ¬æ•™ç¨‹çš„1.2 APIè®¾ç½®ã€‚</p>
<h4 data-id="heading-11">1.3.3 æ‰§è¡Œè¡ŒåŠ¨å¾ªç¯</h4>
<p>ä¸‹é¢çš„ä¸»å¾ªç¯å°†æ•´åˆæ‰€æœ‰ç»„ä»¶ï¼Œå¹¶é€šè¿‡æ ¼å¼åŒ–åçš„Prompté©±åŠ¨LLMè¿›è¡Œå†³ç­–ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> re
<span class="hljs-comment"># --- 1. é…ç½®LLMå®¢æˆ·ç«¯ ---</span>
<span class="hljs-comment"># è¯·æ ¹æ®æ‚¨ä½¿ç”¨çš„æœåŠ¡ï¼Œå°†è¿™é‡Œæ›¿æ¢æˆå¯¹åº”çš„å‡­è¯å’Œåœ°å€</span>
API_KEY = <span class="hljs-string">"YOUR_API_KEY"</span>
BASE_URL = <span class="hljs-string">"YOUR_BASE_URL"</span>
MODEL_ID = <span class="hljs-string">"YOUR_MODEL_ID"</span>
TAVILY_API_KEY=<span class="hljs-string">"YOUR_Tavily_KEY"</span>
os.environ[<span class="hljs-string">'TAVILY_API_KEY'</span>] = <span class="hljs-string">"YOUR_TAVILY_API_KEY"</span>
llm = OpenAICompatibleClient(
model=MODEL_ID,
api_key=API_KEY,
base_url=BASE_URL
)
<span class="hljs-comment"># --- 2. åˆå§‹åŒ– ---</span>
user_prompt = <span class="hljs-string">"ä½ å¥½ï¼Œè¯·å¸®æˆ‘æŸ¥è¯¢ä¸€ä¸‹ä»Šå¤©åŒ—äº¬çš„å¤©æ°”ï¼Œç„¶åæ ¹æ®å¤©æ°”æ¨èä¸€ä¸ªåˆé€‚çš„æ—…æ¸¸æ™¯ç‚¹ã€‚"</span>
prompt_history = [<span class="hljs-string">f"ç”¨æˆ·è¯·æ±‚: <span class="hljs-subst">{user_prompt}</span>"</span>]
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç”¨æˆ·è¾“å…¥: <span class="hljs-subst">{user_prompt}</span>\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">40</span>)
<span class="hljs-comment"># --- 3. è¿è¡Œä¸»å¾ªç¯ ---</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>): <span class="hljs-comment"># è®¾ç½®æœ€å¤§å¾ªç¯æ¬¡æ•°</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"--- å¾ªç¯ <span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span> ---\n"</span>)
<span class="hljs-comment"># 3.1. æ„å»ºPrompt</span>
full_prompt = <span class="hljs-string">"\n"</span>.join(prompt_history)
<span class="hljs-comment"># 3.2. è°ƒç”¨LLMè¿›è¡Œæ€è€ƒ</span>
llm_output = llm.generate(full_prompt, system_prompt=AGENT_SYSTEM_PROMPT)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ¨¡å‹è¾“å‡º:\n<span class="hljs-subst">{llm_output}</span>\n"</span>)
prompt_history.append(llm_output)
<span class="hljs-comment"># 3.3. è§£æå¹¶æ‰§è¡Œè¡ŒåŠ¨</span>
action_match = re.search(<span class="hljs-string">r"Action: (.*)"</span>, llm_output, re.DOTALL)
ifnot action_match:
<span class="hljs-built_in">print</span>(<span class="hljs-string">"è§£æé”™è¯¯ï¼šæ¨¡å‹è¾“å‡ºä¸­æœªæ‰¾åˆ° Actionã€‚"</span>)
<span class="hljs-keyword">break</span>
action_str = action_match.group(<span class="hljs-number">1</span>).strip()
<span class="hljs-keyword">if</span> action_str.startswith(<span class="hljs-string">"finish"</span>):
final_answer = re.search(<span class="hljs-string">r'finish(answer="(.*)")'</span>, action_str).group(<span class="hljs-number">1</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä»»åŠ¡å®Œæˆï¼Œæœ€ç»ˆç­”æ¡ˆ: <span class="hljs-subst">{final_answer}</span>"</span>)
<span class="hljs-keyword">break</span>
tool_name = re.search(<span class="hljs-string">r"(\w+)("</span>, action_str).group(<span class="hljs-number">1</span>)
args_str = re.search(<span class="hljs-string">r"((.*))"</span>, action_str).group(<span class="hljs-number">1</span>)
kwargs = <span class="hljs-built_in">dict</span>(re.findall(<span class="hljs-string">r'(\w+)="([^"]*)"'</span>, args_str))
<span class="hljs-keyword">if</span> tool_name <span class="hljs-keyword">in</span> available_tools:
observation = available_tools[tool_name](**kwargs)
<span class="hljs-keyword">else</span>:
observation = <span class="hljs-string">f"é”™è¯¯ï¼šæœªå®šä¹‰çš„å·¥å…· '<span class="hljs-subst">{tool_name}</span>'"</span>
<span class="hljs-comment"># 3.4. è®°å½•è§‚å¯Ÿç»“æœ</span>
observation_str = <span class="hljs-string">f"Observation: <span class="hljs-subst">{observation}</span>"</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{observation_str}</span>\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">40</span>)
prompt_history.append(observation_str)
</code></pre>
<p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªå®Œæ•´çš„ã€ç”±çœŸå®LLMé©±åŠ¨çš„æ™ºèƒ½ä½“ã€‚å…¶æ ¸å¿ƒåœ¨äºâ€œå·¥å…·â€å’Œâ€œæç¤ºå·¥ç¨‹â€çš„ç»“åˆï¼Œè¿™æ­£æ˜¯å½“å‰ä¸»æµæ™ºèƒ½ä½“æ¡†æ¶ï¼ˆå¦‚LangChainã€LlamaIndexç­‰ï¼‰çš„è®¾è®¡ç²¾é«“ã€‚</p>
<h4 data-id="heading-12">1.3.4 è¿è¡Œæ¡ˆä¾‹åˆ†æ</h4>
<p>ä»¥ä¸‹è¾“å‡ºå®Œæ•´åœ°å±•ç¤ºäº†ä¸€ä¸ªæˆåŠŸçš„æ™ºèƒ½ä½“æ‰§è¡Œæµç¨‹ã€‚é€šè¿‡å¯¹è¿™ä¸ªä¸‰è½®å¾ªç¯çš„åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°æ™ºèƒ½ä½“è§£å†³é—®é¢˜çš„æ ¸å¿ƒèƒ½åŠ›ã€‚</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">ç”¨æˆ·è¾“å…¥: ä½ å¥½ï¼Œè¯·å¸®æˆ‘æŸ¥è¯¢ä¸€ä¸‹ä»Šå¤©åŒ—äº¬çš„å¤©æ°”ï¼Œç„¶åæ ¹æ®å¤©æ°”æ¨èä¸€ä¸ªåˆé€‚çš„æ—…æ¸¸æ™¯ç‚¹ã€‚</span>
========================================
--- å¾ªç¯ 1 ---
æ­£åœ¨è°ƒç”¨å¤§è¯­è¨€æ¨¡å‹...
å¤§è¯­è¨€æ¨¡å‹å“åº”æˆåŠŸã€‚
<span class="hljs-section">æ¨¡å‹è¾“å‡º:</span>
<span class="hljs-section">Thought: é¦–å…ˆéœ€è¦è·å–åŒ—äº¬ä»Šå¤©çš„å¤©æ°”æƒ…å†µï¼Œä¹‹åå†æ ¹æ®å¤©æ°”æƒ…å†µæ¥æ¨èæ—…æ¸¸æ™¯ç‚¹ã€‚</span>
<span class="hljs-section">Action: get_weather(city="åŒ—äº¬")</span>
<span class="hljs-section">Observation: åŒ—äº¬å½“å‰å¤©æ°”ï¼šSunnyï¼Œæ°”æ¸©26æ‘„æ°åº¦</span>
========================================
--- å¾ªç¯ 2 ---
æ­£åœ¨è°ƒç”¨å¤§è¯­è¨€æ¨¡å‹...
å¤§è¯­è¨€æ¨¡å‹å“åº”æˆåŠŸã€‚
<span class="hljs-section">æ¨¡å‹è¾“å‡º:</span>
<span class="hljs-section">Thought: ç°åœ¨å·²ç»çŸ¥é“äº†åŒ—äº¬ä»Šå¤©çš„å¤©æ°”æ˜¯æ™´æœ—ä¸”æ¸©åº¦é€‚ä¸­ï¼Œæ¥ä¸‹æ¥å¯ä»¥åŸºäºè¿™ä¸ªä¿¡æ¯æ¥æ¨èä¸€ä¸ªé€‚åˆçš„æ—…æ¸¸æ™¯ç‚¹äº†ã€‚</span>
<span class="hljs-section">Action: get_attraction(city="åŒ—äº¬", weather="Sunny")</span>
<span class="hljs-section">Observation: åŒ—äº¬åœ¨æ™´å¤©æœ€å€¼å¾—å»çš„æ—…æ¸¸æ™¯ç‚¹æ˜¯é¢å’Œå›­ï¼Œå› å…¶ç¾ä¸½çš„æ¹–æ™¯å’Œå¤å»ºç­‘ã€‚å¦ä¸€ä¸ªæ¨èæ˜¯é•¿åŸï¼Œå› å…¶å£®è§‚çš„æ™¯è§‚å’Œå†å²æ„ä¹‰ã€‚</span>
========================================
--- å¾ªç¯ 3 ---
æ­£åœ¨è°ƒç”¨å¤§è¯­è¨€æ¨¡å‹...
å¤§è¯­è¨€æ¨¡å‹å“åº”æˆåŠŸã€‚
<span class="hljs-section">æ¨¡å‹è¾“å‡º:</span>
<span class="hljs-section">Thought: å·²ç»è·å¾—äº†ä¸¤ä¸ªé€‚åˆæ™´å¤©æ¸¸è§ˆçš„æ™¯ç‚¹å»ºè®®ï¼Œç°åœ¨å¯ä»¥æ ¹æ®è¿™äº›ä¿¡æ¯ç»™ç”¨æˆ·æä¾›æ»¡æ„çš„ç­”å¤ã€‚</span>
<span class="hljs-section">Action: finish(answer="ä»Šå¤©åŒ—äº¬çš„å¤©æ°”æ˜¯æ™´æœ—çš„ï¼Œæ°”æ¸©26æ‘„æ°åº¦ï¼Œéå¸¸é€‚åˆå¤–å‡ºæ¸¸ç©ã€‚æˆ‘æ¨èæ‚¨å»é¢å’Œå›­æ¬£èµç¾ä¸½çš„æ¹–æ™¯å’Œå¤å»ºç­‘ï¼Œæˆ–è€…å‰å¾€é•¿åŸä½“éªŒå…¶å£®è§‚çš„æ™¯è§‚å’Œæ·±åšçš„å†å²æ„ä¹‰ã€‚å¸Œæœ›æ‚¨æœ‰ä¸€ä¸ªæ„‰å¿«çš„æ—…è¡Œï¼</span>
<span class="hljs-string">")
ä»»åŠ¡å®Œæˆï¼Œæœ€ç»ˆç­”æ¡ˆ: ä»Šå¤©åŒ—äº¬çš„å¤©æ°”æ˜¯æ™´æœ—çš„ï¼Œæ°”æ¸©26æ‘„æ°åº¦ï¼Œéå¸¸é€‚åˆå¤–å‡ºæ¸¸ç©ã€‚æˆ‘æ¨èæ‚¨å»é¢å’Œå›­æ¬£èµç¾ä¸½çš„æ¹–æ™¯å’Œå¤å»ºç­‘ï¼Œæˆ–è€…å‰å¾€é•¿åŸä½“éªŒå…¶å£®è§‚çš„æ™¯è§‚å’Œæ·±åšçš„å†å²æ„ä¹‰ã€‚å¸Œæœ›æ‚¨æœ‰ä¸€ä¸ªæ„‰å¿«çš„æ—…è¡Œï¼
</span></code></pre>
<p>è¿™ä¸ªç®€å•çš„æ—…è¡ŒåŠ©æ‰‹æ¡ˆä¾‹ï¼Œé›†ä¸­æ¼”ç¤ºäº†åŸºäº<code>Thought-Action-Observation</code>èŒƒå¼çš„æ™ºèƒ½ä½“æ‰€å…·å¤‡çš„å››é¡¹åŸºæœ¬èƒ½åŠ›ï¼šä»»åŠ¡åˆ†è§£ã€å·¥å…·è°ƒç”¨ã€ä¸Šä¸‹æ–‡ç†è§£å’Œç»“æœåˆæˆã€‚æ­£æ˜¯é€šè¿‡è¿™ä¸ªå¾ªç¯çš„ä¸æ–­è¿­ä»£ï¼Œæ™ºèƒ½ä½“æ‰å¾—ä»¥å°†ä¸€ä¸ªæ¨¡ç³Šçš„ç”¨æˆ·æ„å›¾ï¼Œè½¬åŒ–ä¸ºä¸€ç³»åˆ—å…·ä½“ã€å¯æ‰§è¡Œçš„æ­¥éª¤ï¼Œå¹¶æœ€ç»ˆè¾¾æˆç›®æ ‡ã€‚</p>
<h3 data-id="heading-13">1.4 æ™ºèƒ½ä½“åº”ç”¨çš„åä½œæ¨¡å¼</h3>
<p>ä¸Šä¸€èŠ‚ï¼Œæˆ‘ä»¬é€šè¿‡äº²æ‰‹æ„å»ºä¸€ä¸ªæ™ºèƒ½ä½“ï¼Œæ·±å…¥ç†è§£äº†å…¶å†…éƒ¨çš„è¿ä½œå¾ªç¯ã€‚ä¸è¿‡åœ¨æ›´å¹¿æ³›çš„åº”ç”¨åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬çš„è§’è‰²æ­£è¶Šæ¥è¶Šå¤šåœ°è½¬å˜ä¸ºä½¿ç”¨è€…ä¸åä½œè€…ã€‚åŸºäºæ™ºèƒ½ä½“åœ¨ä»»åŠ¡ä¸­çš„è§’è‰²å’Œè‡ªä¸»æ€§ç¨‹åº¦ï¼Œå…¶åä½œæ¨¡å¼ä¸»è¦åˆ†ä¸ºä¸¤ç§ï¼šä¸€ç§æ˜¯ä½œä¸ºé«˜æ•ˆå·¥å…·ï¼Œæ·±åº¦èå…¥æˆ‘ä»¬çš„å·¥ä½œæµï¼›å¦ä¸€ç§åˆ™æ˜¯ä½œä¸ºè‡ªä¸»çš„åä½œè€…ï¼Œä¸å…¶ä»–æ™ºèƒ½ä½“åä½œå®Œæˆå¤æ‚ç›®æ ‡ã€‚</p>
<h4 data-id="heading-14">1.4.1 ä½œä¸ºå¼€å‘è€…å·¥å…·çš„æ™ºèƒ½ä½“</h4>
<p>åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œæ™ºèƒ½ä½“è¢«æ·±åº¦é›†æˆåˆ°å¼€å‘è€…çš„å·¥ä½œæµä¸­ï¼Œä½œä¸ºä¸€ç§å¼ºå¤§çš„è¾…åŠ©å·¥å…·ã€‚å®ƒå¢å¼ºè€Œéå–ä»£å¼€å‘è€…çš„è§’è‰²ï¼Œé€šè¿‡è‡ªåŠ¨åŒ–å¤„ç†ç¹çã€é‡å¤çš„ä»»åŠ¡ï¼Œè®©å¼€å‘è€…èƒ½æ›´ä¸“æ³¨äºåˆ›é€ æ€§çš„æ ¸å¿ƒå·¥ä½œã€‚è¿™ç§äººæœºååŒçš„æ–¹å¼ï¼Œæå¤§åœ°æå‡äº†è½¯ä»¶å¼€å‘çš„æ•ˆç‡ä¸è´¨é‡ã€‚</p>
<p>ç›®å‰ï¼Œå¸‚åœºä¸Šæ¶Œç°äº†å¤šæ¬¾ä¼˜ç§€çš„AIç¼–ç¨‹è¾…åŠ©å·¥å…·ï¼Œå®ƒä»¬è™½ç„¶å‡èƒ½æå‡å¼€å‘æ•ˆç‡ï¼Œä½†åœ¨å®ç°è·¯å¾„å’ŒåŠŸèƒ½ä¾§é‡ä¸Šå„æœ‰åƒç§‹ï¼š</p>
<ul>
<li><strong>GitHubCopilot</strong>:Â ä½œä¸ºè¯¥é¢†åŸŸæœ€å…·å½±å“åŠ›çš„äº§å“ä¹‹ä¸€ï¼ŒCopilot ç”± GitHub ä¸ OpenAI è”åˆå¼€å‘ã€‚å®ƒæ·±åº¦é›†æˆäº Visual Studio Codeç­‰ä¸»æµç¼–è¾‘å™¨ä¸­ï¼Œä»¥å…¶å¼ºå¤§çš„ä»£ç è‡ªåŠ¨è¡¥å…¨èƒ½åŠ›è€Œé—»åã€‚å¼€å‘è€…åœ¨ç¼–å†™ä»£ç æ—¶ï¼ŒCopilot èƒ½å®æ—¶æä¾›æ•´è¡Œç”šè‡³æ•´ä¸ªå‡½æ•°å—çš„å»ºè®®ã€‚è¿‘å¹´æ¥ï¼Œå®ƒä¹Ÿé€šè¿‡ Copilot Chat æ‰©å±•äº†å¯¹è¯å¼ç¼–ç¨‹çš„èƒ½åŠ›ï¼Œå…è®¸å¼€å‘è€…åœ¨ç¼–è¾‘å™¨å†…é€šè¿‡èŠå¤©è§£å†³ç¼–ç¨‹é—®é¢˜ã€‚</li>
<li><strong>Claude Code</strong>:Â Claude Code æ˜¯ç”± Anthropic å¼€å‘çš„ AI ç¼–ç¨‹åŠ©æ‰‹ï¼Œæ—¨åœ¨é€šè¿‡è‡ªç„¶è¯­è¨€æŒ‡ä»¤å¸®åŠ©å¼€å‘è€…åœ¨ç»ˆç«¯ä¸­é«˜æ•ˆåœ°å®Œæˆç¼–ç ä»»åŠ¡ã€‚å®ƒèƒ½å¤Ÿç†è§£å®Œæ•´çš„ä»£ç åº“ç»“æ„ï¼Œæ‰§è¡Œä»£ç ç¼–è¾‘ã€æµ‹è¯•å’Œè°ƒè¯•ç­‰æ“ä½œï¼Œæ”¯æŒä»æè¿°åŠŸèƒ½åˆ°ä»£ç å®ç°çš„å…¨æµç¨‹å¼€å‘ã€‚Claude Code è¿˜æä¾›äº†æ— äº¤äº’ï¼ˆheadlessï¼‰æ¨¡å¼ï¼Œé€‚ç”¨äº CIã€pre-commit hooksã€æ„å»ºè„šæœ¬å’Œå…¶ä»–è‡ªåŠ¨åŒ–åœºæ™¯ï¼Œä¸ºå¼€å‘è€…æä¾›äº†å¼ºå¤§çš„å‘½ä»¤è¡Œç¼–ç¨‹ä½“éªŒã€‚</li>
<li><strong>Trae</strong>:Â ä½œä¸ºæ–°å…´çš„ AI ç¼–ç¨‹å·¥å…·ï¼ŒTrae ä¸“æ³¨äºä¸ºå¼€å‘è€…æä¾›æ™ºèƒ½åŒ–çš„ä»£ç ç”Ÿæˆå’Œä¼˜åŒ–æœåŠ¡ã€‚å®ƒé€šè¿‡æ·±åº¦å­¦ä¹ æŠ€æœ¯åˆ†æä»£ç æ¨¡å¼ï¼Œèƒ½å¤Ÿä¸ºå¼€å‘è€…æä¾›ç²¾å‡†çš„ä»£ç å»ºè®®å’Œè‡ªåŠ¨åŒ–é‡æ„æ–¹æ¡ˆã€‚Trae çš„ç‰¹è‰²åœ¨äºå…¶è½»é‡çº§çš„è®¾è®¡å’Œå¿«é€Ÿå“åº”èƒ½åŠ›ï¼Œç‰¹åˆ«é€‚åˆéœ€è¦é¢‘ç¹è¿­ä»£å’Œå¿«é€ŸåŸå‹å¼€å‘çš„åœºæ™¯ã€‚</li>
<li><strong>Cursor</strong>:Â ä¸ä¸Šè¿°ä¸»è¦ä½œä¸ºæ’ä»¶æˆ–é›†æˆåŠŸèƒ½å­˜åœ¨çš„å·¥å…·ä¸åŒï¼ŒCursor åˆ™é€‰æ‹©äº†ä¸€æ¡æ›´å…·æ•´åˆæ€§çš„è·¯å¾„ï¼Œå®ƒæœ¬èº«å°±æ˜¯ä¸€ä¸ªAIåŸç”Ÿçš„ä»£ç ç¼–è¾‘å™¨ã€‚å®ƒå¹¶éåœ¨ç°æœ‰ç¼–è¾‘å™¨ä¸Šå¢åŠ AIåŠŸèƒ½ï¼Œè€Œæ˜¯åœ¨è®¾è®¡ä¹‹åˆå°±å°†AIäº¤äº’ä½œä¸ºæ ¸å¿ƒã€‚é™¤äº†å…·å¤‡é¡¶çº§çš„ä»£ç ç”Ÿæˆå’ŒèŠå¤©èƒ½åŠ›å¤–ï¼Œå®ƒæ›´å¼ºè°ƒè®©AIç†è§£æ•´ä¸ªä»£ç åº“çš„ä¸Šä¸‹æ–‡ï¼Œä»è€Œå®ç°æ›´æ·±å±‚æ¬¡çš„é—®ç­”ã€é‡æ„å’Œè°ƒè¯•ã€‚</li>
</ul>
<p>å½“ç„¶è¿˜æœ‰è®¸å¤šä¼˜ç§€çš„å·¥å…·æ²¡æœ‰ä¾‹ä¸¾ï¼Œä¸è¿‡å®ƒä»¬å…±åŒæŒ‡å‘äº†ä¸€ä¸ªæ˜ç¡®çš„è¶‹åŠ¿ï¼šAI æ­£åœ¨æ·±åº¦èå…¥è½¯ä»¶å¼€å‘çš„å…¨ç”Ÿå‘½å‘¨æœŸï¼Œé€šè¿‡æ„å»ºé«˜æ•ˆçš„äººæœºååŒå·¥ä½œæµï¼Œæ·±åˆ»åœ°é‡å¡‘ç€è½¯ä»¶å·¥ç¨‹çš„æ•ˆç‡è¾¹ç•Œä¸å¼€å‘èŒƒå¼ã€‚</p>
<h4 data-id="heading-15">1.4.2 ä½œä¸ºè‡ªä¸»åä½œè€…çš„æ™ºèƒ½ä½“</h4>
<p>ä¸ä½œä¸ºå·¥å…·è¾…åŠ©äººç±»ä¸åŒï¼Œç¬¬äºŒç§äº¤äº’æ¨¡å¼å°†æ™ºèƒ½ä½“çš„è‡ªåŠ¨åŒ–ç¨‹åº¦æå‡åˆ°äº†ä¸€ä¸ªå…¨æ–°çš„å±‚æ¬¡ï¼Œè‡ªä¸»åä½œè€…ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬ä¸å†æ˜¯æ‰‹æŠŠæ‰‹åœ°æŒ‡å¯¼AIå®Œæˆæ¯ä¸€æ­¥ï¼Œè€Œæ˜¯å°†ä¸€ä¸ªé«˜å±‚çº§çš„ç›®æ ‡å§”æ‰˜ç»™å®ƒã€‚æ™ºèƒ½ä½“ä¼šåƒä¸€ä¸ªçœŸæ­£çš„é¡¹ç›®æˆå‘˜ä¸€æ ·ï¼Œç‹¬ç«‹åœ°è¿›è¡Œè§„åˆ’ã€æ¨ç†ã€æ‰§è¡Œå’Œåæ€ï¼Œç›´åˆ°æœ€ç»ˆäº¤ä»˜æˆæœã€‚è¿™ç§ä»åŠ©æ‰‹åˆ°åä½œè€…çš„è½¬å˜ï¼Œä½¿å¾—LLMæ™ºèƒ½ä½“æ›´æ·±çš„è¿›å…¥äº†å¤§ä¼—çš„è§†é‡ã€‚å®ƒæ ‡å¿—ç€æˆ‘ä»¬ä¸AIçš„å…³ç³»ä»â€œå‘½ä»¤-æ‰§è¡Œâ€æ¼”å˜ä¸ºâ€œç›®æ ‡-å§”æ‰˜â€ã€‚æ™ºèƒ½ä½“ä¸å†æ˜¯è¢«åŠ¨çš„å·¥å…·ï¼Œè€Œæ˜¯ä¸»åŠ¨çš„ç›®æ ‡è¿½æ±‚è€…ã€‚</p>
<p>å½“å‰ï¼Œå®ç°è¿™ç§è‡ªä¸»åä½œçš„æ€è·¯ç™¾èŠ±é½æ”¾ï¼Œæ¶Œç°äº†å¤§é‡ä¼˜ç§€çš„æ¡†æ¶å’Œäº§å“ï¼Œä»æ—©æœŸçš„ BabyAGIã€AutoGPTï¼Œåˆ°å¦‚ä»Šæ›´ä¸ºæˆç†Ÿçš„ CrewAIã€AutoGenã€MetaGPTã€LangGraph ç­‰ä¼˜ç§€æ¡†æ¶ï¼Œå…±åŒæ¨åŠ¨ç€è¿™ä¸€é¢†åŸŸçš„é«˜é€Ÿå‘å±•ã€‚è™½ç„¶å…·ä½“å®ç°åƒå·®ä¸‡åˆ«ï¼Œä½†å®ƒä»¬çš„æ¶æ„èŒƒå¼å¤§è‡´å¯ä»¥å½’çº³ä¸ºå‡ ä¸ªä¸»æµæ–¹å‘ï¼š</p>
<ol>
<li><strong>å•æ™ºèƒ½ä½“è‡ªä¸»å¾ªç¯</strong>ï¼šè¿™æ˜¯æ—©æœŸçš„å…¸å‹èŒƒå¼ï¼Œå¦‚Â <strong>AgentGPT</strong>Â æ‰€ä»£è¡¨çš„æ¨¡å¼ã€‚å…¶æ ¸å¿ƒæ˜¯ä¸€ä¸ªé€šç”¨æ™ºèƒ½ä½“é€šè¿‡â€œæ€è€ƒ-è§„åˆ’-æ‰§è¡Œ-åæ€â€çš„é—­ç¯ï¼Œä¸æ–­è¿›è¡Œè‡ªæˆ‘æç¤ºå’Œè¿­ä»£ï¼Œä»¥å®Œæˆä¸€ä¸ªå¼€æ”¾å¼çš„é«˜å±‚çº§ç›®æ ‡ã€‚</li>
<li><strong>å¤šæ™ºèƒ½ä½“åä½œ</strong>ï¼šè¿™æ˜¯å½“å‰æœ€ä¸»æµçš„æ¢ç´¢æ–¹å‘ï¼Œæ—¨åœ¨é€šè¿‡æ¨¡æ‹Ÿäººç±»å›¢é˜Ÿçš„åä½œæ¨¡å¼æ¥è§£å†³å¤æ‚é—®é¢˜ã€‚å®ƒåˆå¯ç»†åˆ†ä¸ºä¸åŒæ¨¡å¼ï¼šÂ <strong>è§’è‰²æ‰®æ¼”å¼å¯¹è¯</strong>ï¼šå¦‚Â <strong>CAMEL</strong>Â æ¡†æ¶ï¼Œé€šè¿‡ä¸ºä¸¤ä¸ªæ™ºèƒ½ä½“ï¼ˆä¾‹å¦‚ï¼Œâ€œç¨‹åºå‘˜â€å’Œâ€œäº§å“ç»ç†â€ï¼‰è®¾å®šæ˜ç¡®çš„è§’è‰²å’Œæ²Ÿé€šåè®®ï¼Œè®©å®ƒä»¬åœ¨ä¸€ä¸ªç»“æ„åŒ–çš„å¯¹è¯ä¸­ååŒå®Œæˆä»»åŠ¡ã€‚Â <strong>ç»„ç»‡åŒ–å·¥ä½œæµ</strong>ï¼šå¦‚Â <strong>MetaGPT</strong>Â å’ŒÂ <strong>CrewAI</strong>ï¼Œå®ƒä»¬æ¨¡æ‹Ÿä¸€ä¸ªåˆ†å·¥æ˜ç¡®çš„â€œè™šæ‹Ÿå›¢é˜Ÿâ€ï¼ˆå¦‚è½¯ä»¶å…¬å¸æˆ–å’¨è¯¢å°ç»„ï¼‰ã€‚æ¯ä¸ªæ™ºèƒ½ä½“éƒ½æœ‰é¢„è®¾çš„èŒè´£å’Œå·¥ä½œæµç¨‹ï¼ˆSOPï¼‰ï¼Œé€šè¿‡å±‚çº§åŒ–æˆ–é¡ºåºåŒ–çš„æ–¹å¼åä½œï¼Œäº§å‡ºé«˜è´¨é‡çš„å¤æ‚æˆæœï¼ˆå¦‚å®Œæ•´çš„ä»£ç åº“æˆ–ç ”ç©¶æŠ¥å‘Šï¼‰ã€‚<strong>AutoGen</strong>Â å’ŒÂ <strong>AgentScope</strong>Â åˆ™æä¾›äº†æ›´çµæ´»çš„å¯¹è¯æ¨¡å¼ï¼Œå…è®¸å¼€å‘è€…è‡ªå®šä¹‰æ™ºèƒ½ä½“é—´çš„å¤æ‚äº¤äº’ç½‘ç»œã€‚</li>
<li><strong>é«˜çº§æ§åˆ¶æµæ¶æ„</strong>ï¼šè¯¸å¦‚Â <strong>LangGraph</strong>Â ç­‰æ¡†æ¶ï¼Œåˆ™æ›´ä¾§é‡äºä¸ºæ™ºèƒ½ä½“æä¾›æ›´å¼ºå¤§çš„åº•å±‚å·¥ç¨‹åŸºç¡€ã€‚å®ƒå°†æ™ºèƒ½ä½“çš„æ‰§è¡Œè¿‡ç¨‹å»ºæ¨¡ä¸ºçŠ¶æ€å›¾ï¼ˆState Graphï¼‰ï¼Œä»è€Œèƒ½æ›´çµæ´»ã€æ›´å¯é åœ°å®ç°å¾ªç¯ã€åˆ†æ”¯ã€å›æº¯ä»¥åŠäººå·¥ä»‹å…¥ç­‰å¤æ‚æµç¨‹ã€‚</li>
</ol>
<p>è¿™äº›ä¸åŒçš„æ¶æ„èŒƒå¼ï¼Œå…±åŒæ¨åŠ¨ç€è‡ªä¸»æ™ºèƒ½ä½“ä»ç†è®ºæ„æƒ³èµ°å‘æ›´å¹¿æ³›çš„å®é™…åº”ç”¨ï¼Œä½¿å…¶æœ‰èƒ½åŠ›åº”å¯¹æ—¥ç›Šå¤æ‚çš„çœŸå®ä¸–ç•Œä»»åŠ¡ã€‚åœ¨æˆ‘ä»¬çš„åç»­ç« èŠ‚ä¸­ï¼Œä¹Ÿä¼šæ„Ÿå—ä¸åŒç±»å‹æ¡†æ¶ä¹‹é—´çš„å·®å¼‚å’Œä¼˜åŠ¿ã€‚</p>
<h4 data-id="heading-16">1.4.3 Workflowå’ŒAgentçš„å·®å¼‚</h4>
<p>åœ¨ç†è§£äº†æ™ºèƒ½ä½“ä½œä¸ºâ€œå·¥å…·â€å’Œâ€œåä½œè€…â€ä¸¤ç§æ¨¡å¼åï¼Œæˆ‘ä»¬æœ‰å¿…è¦å¯¹Workflowå’ŒAgentçš„å·®å¼‚å±•å¼€è®¨è®ºï¼Œå°½ç®¡å®ƒä»¬éƒ½æ—¨åœ¨å®ç°ä»»åŠ¡è‡ªåŠ¨åŒ–ï¼Œä½†å…¶åº•å±‚é€»è¾‘ã€æ ¸å¿ƒç‰¹å¾å’Œé€‚ç”¨åœºæ™¯å´æˆªç„¶ä¸åŒã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œ<strong>Workflow æ˜¯è®© AI æŒ‰éƒ¨å°±ç­åœ°æ‰§è¡ŒæŒ‡ä»¤ï¼Œè€Œ Agent åˆ™æ˜¯èµ‹äºˆ AI è‡ªç”±åº¦å»è‡ªä¸»è¾¾æˆç›®æ ‡ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a203bdb6a5e447581809af83ef0978f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853724&amp;x-signature=bQBqb0R%2FAFn29OXaKs3H1KWw30o%3D" alt="" loading="lazy"/></p>
<p>å›¾ 1.6 Workflowå’ŒAgentçš„å·®å¼‚</p>
<p>å¦‚å›¾1.6æ‰€ç¤ºï¼Œå·¥ä½œæµæ˜¯ä¸€ç§ä¼ ç»Ÿçš„è‡ªåŠ¨åŒ–èŒƒå¼ï¼Œå…¶æ ¸å¿ƒæ˜¯<strong>å¯¹ä¸€ç³»åˆ—ä»»åŠ¡æˆ–æ­¥éª¤è¿›è¡Œé¢„å…ˆå®šä¹‰çš„ã€ç»“æ„åŒ–çš„ç¼–æ’</strong>ã€‚å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç²¾ç¡®çš„ã€é™æ€çš„æµç¨‹å›¾ï¼Œè§„å®šäº†åœ¨ä½•ç§æ¡ä»¶ä¸‹ã€ä»¥ä½•ç§é¡ºåºæ‰§è¡Œå“ªäº›æ“ä½œã€‚ä¸€ä¸ªå…¸å‹çš„æ¡ˆä¾‹ï¼šæŸä¼ä¸šçš„è´¹ç”¨æŠ¥é”€å®¡æ‰¹æµç¨‹ã€‚å‘˜å·¥æäº¤æŠ¥é”€å•ï¼ˆè§¦å‘ï¼‰-&gt; å¦‚æœé‡‘é¢å°äº500å…ƒï¼Œç›´æ¥ç”±éƒ¨é—¨ç»ç†å®¡æ‰¹ -&gt; å¦‚æœé‡‘é¢å¤§äº500å…ƒï¼Œå…ˆç”±éƒ¨é—¨ç»ç†å®¡æ‰¹ï¼Œå†æµè½¬è‡³è´¢åŠ¡æ€»ç›‘å®¡æ‰¹ -&gt; å®¡æ‰¹é€šè¿‡åï¼Œé€šçŸ¥è´¢åŠ¡éƒ¨æ‰“æ¬¾ã€‚æ•´ä¸ªè¿‡ç¨‹çš„æ¯ä¸€æ­¥ã€æ¯ä¸€ä¸ªåˆ¤æ–­æ¡ä»¶éƒ½è¢«ç²¾ç¡®åœ°é¢„å…ˆè®¾å®šã€‚</p>
<p>ä¸å·¥ä½œæµä¸åŒï¼ŒåŸºäºå¤§å‹è¯­è¨€æ¨¡å‹çš„æ™ºèƒ½ä½“æ˜¯ä¸€ä¸ª<strong>å…·å¤‡è‡ªä¸»æ€§çš„ã€ä»¥ç›®æ ‡ä¸ºå¯¼å‘çš„ç³»ç»Ÿ</strong>ã€‚å®ƒä¸ä»…ä»…æ˜¯æ‰§è¡Œé¢„è®¾æŒ‡ä»¤ï¼Œè€Œæ˜¯èƒ½å¤Ÿåœ¨ä¸€å®šç¨‹åº¦ä¸Šç†è§£ç¯å¢ƒã€è¿›è¡Œæ¨ç†ã€åˆ¶å®šè®¡åˆ’ï¼Œå¹¶åŠ¨æ€åœ°é‡‡å–è¡ŒåŠ¨ä»¥è¾¾æˆæœ€ç»ˆç›®æ ‡ã€‚LLMåœ¨å…¶ä¸­æ‰®æ¼”ç€â€œå¤§è„‘â€çš„è§’è‰²ã€‚ä¸€ä¸ªå…¸å‹çš„ä¾‹å­ï¼Œä¾¿æ˜¯æˆ‘ä»¬åœ¨1.3èŠ‚ä¸­å†™çš„æ™ºèƒ½æ—…è¡ŒåŠ©æ‰‹ã€‚å½“æˆ‘ä»¬å‘å®ƒä¸‹è¾¾ä¸€ä¸ªæ–°æŒ‡ä»¤ï¼Œä¾‹å¦‚ï¼š <strong>â€œä½ å¥½ï¼Œè¯·å¸®æˆ‘æŸ¥è¯¢ä¸€ä¸‹ä»Šå¤©åŒ—äº¬çš„å¤©æ°”ï¼Œç„¶åæ ¹æ®å¤©æ°”æ¨èä¸€ä¸ªåˆé€‚çš„æ—…æ¸¸æ™¯ç‚¹ã€‚â€</strong> Â å®ƒçš„å¤„ç†è¿‡ç¨‹å……åˆ†å±•ç°äº†å…¶è‡ªä¸»æ€§ï¼š</p>
<ol start="0">
<li><strong>è§„åˆ’ä¸å·¥å…·è°ƒç”¨ï¼š</strong> Agenté¦–å…ˆä¼šæŠŠä»»åŠ¡æ‹†è§£ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼šâ‘  æŸ¥è¯¢å¤©æ°”ï¼›â‘¡ åŸºäºå¤©æ°”æ¨èæ™¯ç‚¹ã€‚éšå³ï¼Œå®ƒä¼šè‡ªä¸»é€‰æ‹©å¹¶è°ƒç”¨â€œå¤©æ°”æŸ¥è¯¢APIâ€ï¼Œå¹¶å°†â€œåŒ—äº¬â€ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚</li>
<li><strong>æ¨ç†ä¸å†³ç­–ï¼š</strong> å‡è®¾APIè¿”å›ç»“æœä¸ºâ€œæ™´æœ—ï¼Œå¾®é£â€ã€‚Agentçš„LLMå¤§è„‘ä¼šåŸºäºè¿™ä¸ªä¿¡æ¯è¿›è¡Œæ¨ç†ï¼šâ€œæ™´å¤©é€‚åˆæˆ·å¤–æ´»åŠ¨â€ã€‚æ¥ç€ï¼Œå®ƒä¼šæ ¹æ®è¿™ä¸ªåˆ¤æ–­ï¼Œåœ¨å®ƒçš„çŸ¥è¯†åº“æˆ–é€šè¿‡æœç´¢å¼•æ“è¿™ä¸ªå·¥å…·ä¸­ï¼Œç­›é€‰å‡ºåŒ—äº¬çš„æˆ·å¤–æ™¯ç‚¹ï¼Œå¦‚æ•…å®«ã€é¢å’Œå›­ã€å¤©å›å…¬å›­ç­‰ã€‚</li>
<li><strong>ç”Ÿæˆç»“æœï¼š</strong> æœ€åï¼ŒAgentä¼šç»¼åˆä¿¡æ¯ï¼Œç»™å‡ºä¸€ä¸ªå®Œæ•´çš„ã€äººæ€§åŒ–çš„å›ç­”ï¼šâ€œä»Šå¤©åŒ—äº¬å¤©æ°”æ™´æœ—ï¼Œå¾®é£ï¼Œéå¸¸é€‚åˆæˆ·å¤–æ¸¸ç©ã€‚ä¸ºæ‚¨æ¨èå‰å¾€ã€é¢å’Œå›­ã€‘ï¼Œæ‚¨å¯ä»¥åœ¨æ˜†æ˜æ¹–ä¸Šæ³›èˆŸï¼Œæ¬£èµç¾ä¸½çš„çš‡å®¶å›­æ—æ™¯è‰²ã€‚â€</li>
</ol>
<p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ²¡æœ‰ä»»ä½•å†™æ­»çš„<code>ifå¤©æ°”=æ™´å¤© then æ¨èé¢å’Œå›­</code>çš„è§„åˆ™ã€‚å¦‚æœå¤©æ°”æ˜¯â€œé›¨å¤©â€ï¼ŒAgentä¼šè‡ªä¸»æ¨ç†å¹¶æ¨èå›½å®¶åšç‰©é¦†ã€é¦–éƒ½åšç‰©é¦†ç­‰å®¤å†…åœºæ‰€ã€‚<strong>è¿™ç§åŸºäºå®æ—¶ä¿¡æ¯è¿›è¡ŒåŠ¨æ€æ¨ç†å’Œå†³ç­–çš„èƒ½åŠ›ï¼Œæ­£æ˜¯Agentçš„æ ¸å¿ƒä»·å€¼æ‰€åœ¨ã€‚</strong></p>
<h3 data-id="heading-17">1.5 æœ¬ç« å°ç»“</h3>
<p>åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å…±åŒè¸ä¸Šäº†æ¢ç´¢æ™ºèƒ½ä½“çš„åˆè¯†ä¹‹æ—…ã€‚æˆ‘ä»¬çš„æ—…ç¨‹ä»æœ€åŸºæœ¬çš„é—®é¢˜å¼€å§‹ï¼š</p>
<ul>
<li>ä»€ä¹ˆæ˜¯å¤§è¯­è¨€æ¨¡å‹é©±åŠ¨çš„æ™ºèƒ½ä½“ï¼Ÿæˆ‘ä»¬é¦–å…ˆæ˜ç¡®äº†å…¶å®šä¹‰ï¼Œç†è§£äº†ç°ä»£æ™ºèƒ½ä½“æ˜¯å…·å¤‡äº†èƒ½åŠ›çš„å®ä½“ã€‚å®ƒä¸å†ä»…ä»…æ˜¯æ‰§è¡Œé¢„è®¾ç¨‹åºçš„è„šæœ¬ï¼Œè€Œæ˜¯èƒ½å¤Ÿè‡ªä¸»æ¨ç†å’Œä½¿ç”¨å·¥å…·çš„å†³ç­–è€…ã€‚</li>
<li>æ™ºèƒ½ä½“å¦‚ä½•å·¥ä½œï¼Ÿæˆ‘ä»¬æ·±å…¥æ¢è®¨äº†æ™ºèƒ½ä½“ä¸ç¯å¢ƒäº¤äº’çš„è¿è¡Œæœºåˆ¶ã€‚æˆ‘ä»¬äº†è§£åˆ°ï¼Œè¿™ä¸ªæŒç»­çš„é—­ç¯æ˜¯æ™ºèƒ½ä½“å¤„ç†ä¿¡æ¯ã€åšå‡ºå†³ç­–ã€å½±å“ç¯å¢ƒå¹¶æ ¹æ®åé¦ˆè°ƒæ•´è‡ªèº«è¡Œä¸ºçš„åŸºç¡€ã€‚</li>
<li>å¦‚ä½•æ„å»ºæ™ºèƒ½ä½“ï¼Ÿè¿™æ˜¯æœ¬ç« çš„å®è·µæ ¸å¿ƒã€‚æˆ‘ä»¬ä»¥â€œæ™ºèƒ½æ—…è¡ŒåŠ©æ‰‹â€ä¸ºä¾‹ï¼Œäº²æ‰‹æ„å»ºäº†ä¸€ä¸ªå®Œæ•´çš„ã€ç”±çœŸå®LLMé©±åŠ¨çš„æ™ºèƒ½ä½“ã€‚</li>
<li>æ™ºèƒ½ä½“æœ‰å“ªäº›ä¸»æµçš„åº”ç”¨èŒƒå¼ï¼Ÿæœ€åï¼Œæˆ‘ä»¬å°†è§†é‡æŠ•å‘äº†æ›´å¹¿é˜”çš„åº”ç”¨é¢†åŸŸã€‚æˆ‘ä»¬æ¢è®¨äº†ä¸¤ç§ä¸»æµçš„æ™ºèƒ½ä½“äº¤äº’æ¨¡å¼ï¼šä¸€æ˜¯ä»¥GitHub Copilotå’ŒCursorç­‰ä¸ºä»£è¡¨çš„ã€å¢å¼ºäººç±»å·¥ä½œæµçš„â€œå¼€å‘è€…å·¥å…·â€ï¼›äºŒæ˜¯ä»¥CrewAIã€MetaGPTå’ŒAgentScopeç­‰æ¡†æ¶ä¸ºä»£è¡¨çš„ã€èƒ½å¤Ÿç‹¬ç«‹å®Œæˆé«˜å±‚çº§ç›®æ ‡çš„â€œè‡ªä¸»åä½œè€…â€ã€‚åŒæ—¶è®²è§£äº†Workflowä¸Agentçš„å·®å¼‚ã€‚</li>
</ul>
<p>é€šè¿‡æœ¬ç« çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å»ºç«‹äº†ä¸€ä¸ªå…³äºæ™ºèƒ½ä½“çš„åŸºç¡€è®¤çŸ¥æ¡†æ¶ã€‚é‚£ä¹ˆï¼Œå®ƒæ˜¯å¦‚ä½•ä¸€æ­¥æ­¥ä»æœ€åˆçš„æ„æƒ³æ¼”è¿›è‡³ä»Šçš„å‘¢ï¼Ÿåœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ¢ç´¢æ™ºèƒ½ä½“çš„å‘å±•å†å²ï¼Œä¸€æ®µè¿½æœ¬æº¯æºçš„æ—…ç¨‹å³å°†å¼€å§‹ï¼</p>
<h3 data-id="heading-18">å­¦ä¹ èµ„æºæ¨è</h3>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[nest.js / hono.js ä¸€èµ·å­¦ï¼å¼€å‘å‰å¿…å¤‡ï¼]]></title>    <link>https://juejin.cn/post/7581448482544713754</link>    <guid>https://juejin.cn/post/7581448482544713754</guid>    <pubDate>2025-12-09T02:56:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581448482544713754" data-draft-id="7580197740963151898" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="nest.js / hono.js ä¸€èµ·å­¦ï¼å¼€å‘å‰å¿…å¤‡ï¼"/> <meta itemprop="keywords" content="å‰ç«¯,Node.js"/> <meta itemprop="datePublished" content="2025-12-09T02:56:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­Ÿç¥¥_æˆéƒ½"/> <meta itemprop="url" content="https://juejin.cn/user/96412752684744"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            nest.js / hono.js ä¸€èµ·å­¦ï¼å¼€å‘å‰å¿…å¤‡ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/96412752684744/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­Ÿç¥¥_æˆéƒ½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T02:56:16.000Z" title="Tue Dec 09 2025 02:56:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»29åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æ¬¢è¿åˆ°æˆ‘ä»¬çš„äº¤æµç¾¤ä¸€èµ·äº¤æµå„ç§å‰ç«¯æŠ€æœ¯ï¼ŒåŒæ—¶æ¬¢è¿è®¿é—®æˆ‘çš„ headless ç»„ä»¶åº“ï¼ŒåŒæ—¶æ„Ÿè°¢ä½ çš„ starï¼š</p>
<ul>
<li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.frontlight.tech%2F" title="https://link.juejin.cn/?target=https%3A%2F%2Fwww.frontlight.tech%2F" target="_blank">å›½å†…å®˜ç½‘</a></li>
<li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Flio-mengxiang%2Ft-ui" title="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Flio-mengxiang%2Ft-ui" target="_blank">æ„Ÿè°¢ github star</a></li>
</ul>
<hr/>
<p>nest.js / hono.js ä¸€èµ·å­¦ç³»åˆ—ï¼Œæœ€ç»ˆä¼šå°è£…ä¸€ä¸ªé€šç”¨çš„æ¶å­ï¼Œä¾‹å¦‚æœ‰é‰´æƒï¼Œæ—¥å¿—æ”¶é›†ï¼Œå¤šç¯å¢ƒé…ç½®ç­‰ç­‰åŠŸèƒ½ï¼Œç”¨ä¸¤ç§æ¡†æ¶å»å®ç°ã€‚
ä¹‹å‰å†™äº†ä¸¤ç¯‡å…³äºè¿™ä¸¤ä¸ªæ¡†æ¶ç¼–ç¨‹æ€æƒ³ç›¸å…³çš„</p>
<ul>
<li><a href="https://juejin.cn/post/7576555431943503882" target="_blank" title="https://juejin.cn/post/7576555431943503882">æ·±å…¥ Nestjs åº•å±‚æ¦‚å¿µï¼ˆ1ï¼‰ï¼šä¾èµ–æ³¨å…¥å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ AOP</a></li>
<li><a href="https://juejin.cn/post/7580564126403362866" target="_blank" title="https://juejin.cn/post/7580564126403362866">nest.js / hono.js ä¸€èµ·â€¦</a></li>
</ul>
<p>è¿™ä¸€ç¯‡ä¸»è¦æ˜¯æ¶‰åŠåˆ°æˆ‘ä»¬é©¬ä¸Šå¼€å‘å‰éœ€è¦å…·å¤‡çš„ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼ŒåŒ…å«ï¼š</p>
<ul>
<li>å‘½ä»¤è¡Œå·¥å…·ä½¿ç”¨</li>
<li>æœ€ä½³å·¥ç¨‹å®è·µï¼ˆç›®å½•è§„åˆ’ç¯‡ï¼‰</li>
<li>å¦‚ä½•è°ƒè¯•</li>
<li>docker å…¥é—¨ + æ·±å…¥ docker åŸºæœ¬åŸç†</li>
</ul>
<h2 data-id="heading-1">å‘½ä»¤è¡Œä¸Šæ‰‹</h2>
<h3 data-id="heading-2">å…¨å±€å®‰è£… CLI</h3>
<p>å»ºè®®ï¼Œå…¨å±€å®‰è£… CLIï¼Œ ç„¶åè¯•ç€åˆ›å»ºä¸€ä¸ªé¡¹ç›®è¯•è¯•ï¼š</p>
<pre><code class="hljs language-css" lang="css">npm <span class="hljs-selector-tag">i</span> -g <span class="hljs-keyword">@nestjs</span>/cli
nest new project-name
</code></pre>
<p>åç»­ï¼Œä½ æŒ‰ç…§å‘½ä»¤è¡Œæç¤ºå³å¯å®Œæˆé¡¹ç›®åˆå§‹åŒ–ï¼Œç„¶åå®‰è£…å®ŒåŒ…ï¼Œæœ€åçœ‹ä¸€ä¸‹ package.json ä¸­ scripts ä¸­çš„å¯åŠ¨å‘½ä»¤æ˜¯ä»€ä¹ˆï¼Œå¯åŠ¨é¡¹ç›®å³å¯ã€‚</p>
<p>hono.js åˆå§‹åŒ–é¡¹ç›®æ˜¯é‡‡ç”¨ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">npm <span class="hljs-keyword">create</span> hono<span class="hljs-variable">@latest</span> project<span class="hljs-operator">-</span>name
</code></pre>
<p>åŒæ ·ï¼Œä½ æŒ‰ç…§å‘½ä»¤è¡Œæç¤ºå³å¯å®Œæˆé¡¹ç›®åˆå§‹åŒ–ï¼Œç„¶åå®‰è£…å¯¹åº”çš„åŒ…å³å¯ï¼Œæœ€åçœ‹ä¸€ä¸‹ package.json ä¸­ scripts ä¸­çš„å¯åŠ¨å‘½ä»¤æ˜¯ä»€ä¹ˆï¼Œå¯åŠ¨é¡¹ç›®å³å¯ã€‚</p>
<p>ä½†æ˜¯ hono.js å¹¶æ²¡æœ‰ç±»ä¼¼ nest çš„ cli ç®¡ç†å·¥å…·ï¼Œæ¯•ç«Ÿ nest çš„å†™æ³•è¦ç¹çå¾ˆå¤šï¼Œæ‰€ä»¥å®˜æ–¹æä¾›äº†ä¸€äº›å¿«é€Ÿåˆ›å»ºæ¨¡æ¿çš„å‘½ä»¤ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">nest --<span class="hljs-built_in">help</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3e3c9b3dd31474a853e6b51c3365065~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=wYeiPJuoEG94qx8PJq0%2F1sQmZ4M%3D" alt="image.png" loading="lazy"/></p>
<p>æœ€å¸¸è§çš„ä½¿ç”¨ generate æˆ–è€… g æ¥ç”Ÿæˆæ¨¡æ¿, æˆ‘ä»¬å¯ä»¥ç”¨ -d å‘½ä»¤ï¼Œæ¥è®© cli å‘Šè¯‰ä½ ï¼Œä½ çš„ generate æˆ–è€… g å‘½ä»¤ä¼šç”Ÿæˆä»€ä¹ˆæ–‡ä»¶ï¼Œå’±ä»¬æ¥è¯•è¯•ï¼Œå‡è®¾æˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ª åå­—ä¸º user çš„ class</p>
<pre><code class="hljs language-kotlin" lang="kotlin">nest g <span class="hljs-keyword">class</span> <span class="hljs-title class_">user</span> -<span class="hljs-title">d</span> 
</code></pre>
<p>æ˜¾ç¤ºï¼š</p>
<pre><code class="hljs language-scss" lang="scss">CREATE <span class="hljs-attribute">src</span>/user/user<span class="hljs-selector-class">.spec</span><span class="hljs-selector-class">.ts</span> (<span class="hljs-number">139</span> bytes)
CREATE <span class="hljs-attribute">src</span>/user/user<span class="hljs-selector-class">.ts</span> (<span class="hljs-number">21</span> bytes)
Dry run enabled. No files written to disk.
</code></pre>
<p>æ³¨æ„æœ€åä¸€è¡Œï¼š No files written to disk. ä¹Ÿå°±æ˜¯æ²¡æœ‰çœŸçš„æŠŠæ–‡ä»¶å†™å…¥ï¼Œè€Œæ˜¯æç¤ºå¦‚æœä½ ä½¿ç”¨<code>nest g class user</code> å¯èƒ½åˆ›å»ºçš„æ–‡ä»¶æœ‰å“ªäº›ã€‚</p>
<p>è¿˜æœ‰ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™ä¸å¤ªå–œæ¬¢æµ‹è¯•ï¼Œå¯ä»¥ä½¿ç”¨</p>
<pre><code class="hljs language-kotlin" lang="kotlin">nest g <span class="hljs-keyword">class</span> <span class="hljs-title class_">user</span> --<span class="hljs-title">no</span>-<span class="hljs-title">spec</span>
</code></pre>
<p>æ¥çœå»æµ‹è¯•æ–‡ä»¶çš„åˆ›å»ºã€‚</p>
<h2 data-id="heading-3">æœ€ä½³å·¥ç¨‹å®è·µ</h2>
<p>æˆ‘ä»¬è¿™é‡Œåˆ—ä¸¾ä¸€äº›æ¯”è¾ƒå¥½çš„å·¥ç¨‹å®è·µçš„ç‚¹ï¼Œæ¬¢è¿å¤§å®¶ä¸€èµ·è®¨è®ºã€‚</p>
<h3 data-id="heading-4">å·¥ç¨‹ç›®å½•</h3>
<p>æˆ‘ä»¬é‡‡ç”¨â€çº¦å®šå¤§äºé…ç½®â€œçš„æ€æƒ³ï¼Œæ— è®ºä½¿ç”¨ä»€ä¹ˆ node.js åç«¯æ¡†æ¶ï¼Œæˆ‘ä»¬çš„ç›®å½•åå°½å¯èƒ½ä¸€è‡´ã€‚</p>
<p>nest.js çš„å»ºè®®ï¼Œå¦‚æœä»¥ä¸‹ç›®å½•åæ„æ€ä¸æ¸…æ¥šæ²¡å…³ç³»ï¼Œåç»­å­¦åˆ°æ§åˆ¶å™¨ï¼Œservice ç­‰ç­‰ç« èŠ‚çš„æ—¶å€™ï¼Œå°±ä¼šæ˜ç™½äº†ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">src/
â”œâ”€â”€ modules/              <span class="hljs-comment"># æ ¸å¿ƒï¼šæŒ‰ä¸šåŠ¡é¢†åŸŸåˆ’åˆ†çš„æ¨¡å—</span>
â”‚   â”œâ”€â”€ users/            <span class="hljs-comment"># ç”¨æˆ·æ¨¡å—</span>
â”‚   â”‚   â”œâ”€â”€ dto/          <span class="hljs-comment"># æ•°æ®ä¼ è¾“å¯¹è±¡ï¼ˆè¯·æ±‚/å“åº”ç»“æ„ï¼‰</span>
â”‚   â”‚   â”œâ”€â”€ entities/     <span class="hljs-comment"># æ•°æ®åº“å®ä½“</span>
â”‚   â”‚   â”œâ”€â”€ users.controller.ts
â”‚   â”‚   â”œâ”€â”€ users.service.ts
â”‚   â”‚   â””â”€â”€ users.<span class="hljs-keyword">module</span>.ts
â”‚   â””â”€â”€ products/         <span class="hljs-comment"># äº§å“æ¨¡å—ï¼ˆç»“æ„ç±»ä¼¼ç”¨æˆ·æ¨¡å—ï¼‰</span>
â”œâ”€â”€ common/               <span class="hljs-comment"># å…±äº«èµ„æº</span>
â”‚   â”œâ”€â”€ filters/          <span class="hljs-comment"># å…¨å±€å¼‚å¸¸è¿‡æ»¤å™¨</span>
â”‚   â”œâ”€â”€ interceptors/     <span class="hljs-comment"># æ‹¦æˆªå™¨</span>
â”‚   â””â”€â”€ guards/           <span class="hljs-comment"># å®ˆå«</span>
â”œâ”€â”€ config/               <span class="hljs-comment"># å…¨å±€é…ç½®</span>
â”œâ”€â”€ database/             <span class="hljs-comment"># æ•°æ®åº“è¿æ¥é…ç½®        </span>
â””â”€â”€ app.<span class="hljs-keyword">module</span>.ts         <span class="hljs-comment"># åº”ç”¨æ ¹æ¨¡å—</span>
</code></pre>
<p>æ ¸å¿ƒè®¾è®¡åŸåˆ™ï¼š</p>
<ul>
<li>åŠŸèƒ½å†…èšï¼šä¸â€œç”¨æˆ·â€ç›¸å…³çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆæ§åˆ¶å™¨ã€æœåŠ¡ã€å®ä½“ã€DTOï¼‰éƒ½åº”æ”¾åœ¨ users ç›®å½•ä¸‹ã€‚</li>
<li>åˆ†å±‚ç®¡ç†ï¼šä½¿ç”¨ commonã€core ç­‰ç›®å½•ç®¡ç†è·¨æ¨¡å—å…±äº«çš„ç»„ä»¶å’Œå…¨å±€é…ç½®ã€‚</li>
</ul>
<p>hono.js çš„å»ºè®®å¦‚ä¸‹ï¼Œå½“ç„¶ config ,utils è¿™äº›æ¯”è¾ƒå¸¸è§çš„å…¨å±€æ¨¡å—ä¹Ÿå¯ä»¥æåˆ°ç¬¬ä¸€å±‚çº§ï¼Œä¹Ÿå°±æ˜¯ src ç›®å½•ä¸‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">src/
â”œâ”€â”€ modules/                <span class="hljs-meta"># æ¯ä¸ªæ¨¡å—ç‹¬ç«‹</span>
â”‚   â”œâ”€â”€ user/
â”‚   â”‚   â”œâ”€â”€ routes.ts       <span class="hljs-meta"># åªæ”¾è·¯ç”±æ³¨å†Œï¼ˆè–„å±‚ï¼‰</span>
â”‚   â”‚   â”œâ”€â”€ controller/     <span class="hljs-meta"># handlers æ§åˆ¶å™¨å±‚</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="hljs-keyword">get</span>-user.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ list-users.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ create-user.ts
â”‚   â”‚   â”‚   â””â”€â”€ update-user.ts
â”‚   â”‚   â”œâ”€â”€ service/        <span class="hljs-meta"># ä¸šåŠ¡é€»è¾‘</span>
â”‚   â”‚   â”‚   â””â”€â”€ user.service.ts
â”‚   â”‚   â”œâ”€â”€ repository/     <span class="hljs-meta"># DB / å¤–éƒ¨API</span>
â”‚   â”‚   â”‚   â””â”€â”€ user.repo.ts
â”‚   â”‚   â”œâ”€â”€ middleware/     <span class="hljs-meta"># ä¸ user æ¨¡å—å¼ºç›¸å…³çš„ä¸­é—´ä»¶</span>
â”‚   â”‚   â”‚   â””â”€â”€ user-auth.middleware.ts
â”‚   â”‚   â”œâ”€â”€ validators/     <span class="hljs-meta"># DTO / æ ¡éªŒå™¨ï¼ˆzod / valibotï¼‰</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ create-user.validator.ts
â”‚   â”‚   â”‚   â””â”€â”€ update-user.validator.ts
â”‚   â”‚   â”œâ”€â”€ dto/            <span class="hljs-meta"># è¯·æ±‚ / å“åº”ç±»å‹</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ user.dto.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ constants.ts    <span class="hljs-meta"># ä¸ user ç›¸å…³çš„å¸¸é‡</span>
â”‚   â”‚   â”œâ”€â”€ index.ts        <span class="hljs-meta"># æ¨¡å—æ€»å‡ºå£</span>
â”‚   â”‚   â””â”€â”€ types.ts        <span class="hljs-meta"># æ¨¡å—ç›¸å…³ç±»å‹</span>
â”‚   â”‚
â”‚   â”œâ”€â”€ product/
â”‚   â”‚   â”œâ”€â”€ routes.ts
â”‚   â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â”œâ”€â”€ repository/
â”‚   â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”œâ”€â”€ validators/
â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚
â”‚   â””â”€â”€ auth/
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ common/                 <span class="hljs-meta"># å…¨å±€å¤ç”¨å±‚ï¼ˆä¸å±äºä»»ä½•æ¨¡å—ï¼‰</span>
â”‚   â”œâ”€â”€ app.ts              <span class="hljs-meta"># app åˆå§‹åŒ–ï¼ˆå…¨å±€ä¸­é—´ä»¶ã€é”™è¯¯å¤„ç†ï¼‰</span>
â”‚   â”œâ”€â”€ router.ts           <span class="hljs-meta"># åˆå¹¶ modules çš„ routes</span>
â”‚   â”œâ”€â”€ middlewares/        <span class="hljs-meta"># å…¨å±€ä¸­é—´ä»¶</span>
â”‚   â”œâ”€â”€ config/             <span class="hljs-meta"># é…ç½®ï¼ˆDBã€ENVç­‰ï¼‰</span>
â”‚   â”œâ”€â”€ utils/              <span class="hljs-meta"># å·¥å…·</span>
â”‚   â”œâ”€â”€ errors/             <span class="hljs-meta"># å…¨å±€é”™è¯¯ç±»</span>
â”‚   â”œâ”€â”€ types/              <span class="hljs-meta"># å…¨å±€ç±»å‹</span>
â”‚   â””â”€â”€ logging/            <span class="hljs-meta"># æ—¥å¿—ç³»ç»Ÿ</span>
|    <span class="hljs-meta"># ä¹Ÿå¯ä»¥æŠŠä¸€äº›é‡è¦æ¨¡å—å•ç‹¬æ”¾åœ¨æ ¹ç›®å½•ï¼Œä¾‹å¦‚ config ï¼Œ log</span>
â”‚
â””â”€â”€ index.ts                <span class="hljs-meta"># å¯åŠ¨æ–‡ä»¶</span>
</code></pre>
<p>æ³¨æ„ï¼šä¹Ÿå¯ä»¥æŠŠä¸€äº›é‡è¦æ¨¡å—å•ç‹¬æ”¾åœ¨æ ¹ç›®å½•ï¼Œä¾‹å¦‚ config ï¼Œ logç­‰ç­‰ï¼Œçœ‹ä¸šåŠ¡éœ€è¦ã€‚</p>
<p>æœ€åï¼Œæˆ‘ä»¬å¯ä»¥å€Ÿé‰´ä¸€ä¸‹ angular å›¢é˜Ÿçš„ä¸€äº›ä»£ç é£æ ¼æŒ‡å—ã€‚ä¾‹å¦‚</p>
<ul>
<li>
<p>æ€»åˆ™</p>
<ul>
<li>åšæŒæ¯ä¸ªæ–‡ä»¶åªå®šä¹‰ä¸€æ ·ä¸œè¥¿ï¼ˆä¾‹å¦‚æœåŠ¡æˆ–è€…ç»„ä»¶ï¼‰</li>
<li>è€ƒè™‘æŠŠæ–‡ä»¶å¤§å°é™åˆ¶åœ¨ 400 è¡Œä»£ç ä»¥å†…</li>
<li>åšæŒå®šä¹‰ç®€å•å‡½æ•°æ¥ç»„è£…å¤æ‚å‡½æ•°</li>
</ul>
</li>
<li>
<p>å‘½å</p>
<ul>
<li>ä½¿ç”¨ç‚¹å’Œæ¨ªæ æ¥é£æ ¼æ–‡ä»¶åï¼Œä¸å»ºè®®é©¼å³°</li>
<li>åšæŒåœ¨æè¿°æ€§åå­—ä¸­ï¼Œç”¨æ¨ªæ åˆ†å‰²å•è¯</li>
<li>åšæŒéµå®ˆå…ˆæè¿°ç»„ä»¶ç‰¹æ€§ï¼Œå†æè¿°å®ƒçš„ç±»å‹çš„æ¨¡å¼ï¼Œä¾‹å¦‚ <code>feature.type.ts</code></li>
</ul>
</li>
</ul>
<h2 data-id="heading-5">è°ƒè¯•</h2>
<p>æ¥ä¸‹æ¥ä»‹ç»ä¸€ä¸‹ï¼Œå¦‚ä½•å€ŸåŠ© vscode(å…¶å®ƒç¼–è¾‘å™¨ï¼Œcursorï¼Œtrae æ˜¯åŒæ ·çš„æ–¹å¼)ï¼Œæ¥è°ƒè¯• nest.js å’Œ hono.js ä»£ç </p>
<p>é¦–å…ˆæˆ‘ä»¬ç®€å•ä»‹ç»ä¸€ä¸‹å¦‚ä½•è°ƒè¯•å•æ–‡ä»¶ node.js æ–‡ä»¶ï¼Œè¿™ä¸ªå¯¹äºæˆ‘ä»¬ demo ä¹Ÿç®—æ¯”è¾ƒæœ‰ç”¨ã€‚</p>
<p>é¦–å…ˆï¼Œéšä¾¿åœ¨è·Ÿç›®å½•å»ºä¸€ä¸ª index.js</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c45d47e0ad943d790c6d0a8139d3c44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=yOeuyBtLV8icdUet5MkUMcBGtGs%3D" alt="image.png" loading="lazy"/></p>
<p>ç„¶åæˆ‘ä»¬åœ¨ç¬¬ 6 è¡Œï¼Œæ‰“äº†ä¸€ä¸ªæ–­ç‚¹ï¼Œå¯ä»¥çœ‹åˆ°çº¢è‰²æ ‡è®°ã€‚ç„¶åå†æ ¹ç›®å½•ï¼Œå»ºç«‹ä¸€ä¸ª .vscode æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹å†…å»ºç«‹ä¸€ä¸ª launch.json</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2479c2b99bcf4a659b9474a83bc76302~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=KknRi82WS8CjI46HtBnJhc3ho7s%3D" alt="image.png" loading="lazy"/></p>
<p>æ¥ç€ç‚¹å‡» å¦‚ä¸‹çš„ bug æŒ‰é’®ï¼Œå°±å¯ä»¥è°ƒè¯•äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7dd4671a138a4eff9be825e236830162~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=FvNBsGJMUCkWds6vY4ykzaodzBc%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-6">è°ƒè¯• nest</h3>
<p>è°ƒè¯• nest å’Œ hono éƒ½å¾ˆç›¸ä¼¼ï¼Œåªæ˜¯ launch.json çš„é…ç½®ä¸ä¸€æ ·ï¼Œ</p>
<p>æˆ‘ä»¬ launch.json çš„é…ç½®å¦‚ä¸‹ï¼ˆè°ƒè¯• nest çš„ï¼‰ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-comment">// é…ç½®æ–‡ä»¶çš„ç‰ˆæœ¬å·ï¼Œéµå¾ªVSCodeè°ƒè¯•åè®®ã€‚0.2.0æ˜¯å½“å‰å¸¸ç”¨ç‰ˆæœ¬ã€‚</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-comment">// å®šä¹‰è°ƒè¯•é…ç½®çš„æ•°ç»„ï¼Œä¸€ä¸ªæ–‡ä»¶å¯ä»¥åŒ…å«å¤šä¸ªç‹¬ç«‹çš„è°ƒè¯•é…ç½®ã€‚</span>
  <span class="hljs-attr">"configurations"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-comment">// æŒ‡å®šè°ƒè¯•å™¨ç±»å‹ã€‚`node` è¡¨ç¤ºä½¿ç”¨Node.jsè°ƒè¯•é€‚é…å™¨ï¼Œç”¨äºè°ƒè¯•JavaScript/TypeScriptã€‚</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-comment">// è°ƒè¯•è¯·æ±‚ç±»å‹ã€‚`launch` è¡¨ç¤ºå¯åŠ¨ä¸€ä¸ªæ–°ç¨‹åºè¿›è¡Œè°ƒè¯•ï¼›å¦ä¸€ç§æ˜¯`attach`ï¼ˆé™„åŠ åˆ°å·²è¿è¡Œè¿›ç¨‹ï¼Œ è¿™ä¸ªä¸çº ç»“ï¼Œæˆ‘ä»¬éƒ½ç”¨ launchï¼‰ã€‚</span>
      <span class="hljs-attr">"request"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"launch"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-comment">// åœ¨VSCodeè°ƒè¯•ä¸‹æ‹‰èœå•ä¸­æ˜¾ç¤ºçš„åç§°ï¼Œéšä¾¿èµ·ä¸ªå°±è¡Œã€‚</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Launch Program"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-comment">// æŒ‡å®šå®é™…ç”¨æ¥è¿è¡Œç¨‹åºçš„å‘½ä»¤ã€‚è¿™é‡Œä½¿ç”¨`pnpm`åŒ…ç®¡ç†å™¨ä½œä¸ºå¯åŠ¨å™¨ã€‚</span>
      <span class="hljs-comment">// å¦‚æœä¸è®¾ç½®æ­¤é¡¹ï¼Œé»˜è®¤å€¼ä¸º`node`ã€‚</span>
      <span class="hljs-attr">"runtimeExecutable"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-comment">// ä¼ é€’ç»™`runtimeExecutable`ï¼ˆpnpmï¼‰çš„å‘½ä»¤è¡Œå‚æ•°ã€‚</span>
      <span class="hljs-comment">// ç­‰åŒäºåœ¨ç»ˆç«¯æ‰§è¡Œï¼š`pnpm run start:dev`</span>
      <span class="hljs-attr">"runtimeArgs"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"run"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"start:dev"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-comment">// `runtimeVersion`ä¸»è¦ç”¨äºé€šè¿‡`nvm`ç­‰ç‰ˆæœ¬ç®¡ç†å™¨åˆ‡æ¢Nodeç‰ˆæœ¬ã€‚</span>
      <span class="hljs-attr">"runtimeVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"20.16.0"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-comment">// è°ƒè¯•æ—¶è·³è¿‡ï¼ˆä¸è¿›å…¥ï¼‰çš„æ–‡ä»¶ã€‚</span>
      <span class="hljs-comment">// `&lt;node_internals&gt;/**` è¡¨ç¤ºè·³è¿‡æ‰€æœ‰Node.jså†…ç½®æ ¸å¿ƒæ¨¡å—ä»£ç ï¼Œä½¿è°ƒè¯•æ›´èšç„¦äºåº”ç”¨è‡ªèº«ã€‚</span>
      <span class="hljs-attr">"skipFiles"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-string">"&lt;node_internals&gt;/**"</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™é‡Œçš„å…³é”®æ˜¯ä»€ä¹ˆå‘¢ï¼Œå°±æ˜¯ runtimeExecutable + runtimeArgsï¼Œ runtimeExecutable ä»£è¡¨æˆ‘ä»¬æ‰§è¡Œçš„å‘½ä»¤ä½¿ç”¨ pnpm, ä½ å¯ä»¥æ”¹ä¸º yarnï¼Œ npmï¼Œéƒ½è¡Œï¼Œç„¶åæ‰§è¡Œçš„å‘½ä»¤å‚æ•°runtimeArgsï¼Œåˆèµ·æ¥å°±æ˜¯</p>
<pre><code class="hljs language-arduino" lang="arduino">pnpm run start:dev
</code></pre>
<p>ä¸ºä»€ä¹ˆè¿™æ ·å‘¢ï¼Œå› ä¸º start:dev æ˜¯ nest.js çš„ package.json ä¸­æ³¨æ˜çš„å¯åŠ¨å¼€å‘ç¯å¢ƒçš„å‘½ä»¤,å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">"scripts": {
    "build": "nest build",
    "format": "prettier --write \"src<span class="hljs-comment">/**/</span><span class="hljs-operator">*</span>.ts\" \"test<span class="hljs-comment">/**/</span><span class="hljs-operator">*</span>.ts\"",
    "start": "nest start",
    "start:dev": "nest start --watch",
    "start:debug": "nest start --debug --watch",
    "start:prod": "node dist/main",
    "lint": "eslint \"{src,apps,libs,test}<span class="hljs-comment">/**/</span><span class="hljs-operator">*</span>.ts\" --fix",
    "test": "jest",
    "test:watch": "jest --watch",
    "test:cov": "jest --coverage",
    "test:debug": "node --inspect-brk -r tsconfig-paths/register -r ts-node/register node_modules/.bin/jest --runInBand",
    "test:e2e": "jest --config ./test/jest-e2e.json"
  },
</code></pre>
<p>å½“ç„¶ï¼Œä½ å¯ä»¥ç”¨ start å‘½ä»¤ï¼Œstart:debug å‘½ä»¤éƒ½è¡Œï¼Œå‡è®¾å°±ç”¨</p>
<pre><code class="hljs language-perl" lang="perl"> // æŒ‡å®šå®é™…ç”¨æ¥è¿è¡Œç¨‹åºçš„å‘½ä»¤ã€‚è¿™é‡Œä½¿ç”¨<span class="hljs-string">`pnpm`</span>åŒ…ç®¡ç†å™¨ä½œä¸ºå¯åŠ¨å™¨ã€‚
      // å¦‚æœä¸è®¾ç½®æ­¤é¡¹ï¼Œé»˜è®¤å€¼ä¸º<span class="hljs-string">`node`</span>ã€‚
      <span class="hljs-string">"runtimeExecutable"</span>: <span class="hljs-string">"pnpm"</span>,
      <span class="hljs-regexp">//</span> ä¼ é€’ç»™<span class="hljs-string">`runtimeExecutable`</span>ï¼ˆpnpmï¼‰çš„å‘½ä»¤è¡Œå‚æ•°ã€‚
      // ç­‰åŒäºåœ¨ç»ˆç«¯æ‰§è¡Œï¼š<span class="hljs-string">`pnpm run start:dev`</span>
      <span class="hljs-string">"runtimeArgs"</span>: [<span class="hljs-string">"run"</span>, <span class="hljs-string">"start:dev"</span>],
</code></pre>
<p>ç„¶åæˆ‘ä»¬åœ¨ app.controller.ts ä¸Šæ‰“ä¸ªæ–­ç‚¹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22e4a980696b4ae8a32969ac00d971e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=BPXY5c9i2v2IuwJKzxFvL6yNvTQ%3D" alt="image.png" loading="lazy"/></p>
<p>ç„¶åå¯åŠ¨è°ƒè¯•</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac8175fe89d64b72ac1d012bf2de2cd6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=yAXY6G2hgJeDVkCshKlu1aOKOfs%3D" alt="image.png" loading="lazy"/></p>
<p>ç‚¹å‡»åï¼Œç›¸å½“äºåœ¨å‘½ä»¤è¡Œè¾“å…¥ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">pnpm run start:dev
</code></pre>
<p>æ¥ç€ä½ æµè§ˆå™¨è®¿é—® <code>http://localhost:3000</code> å°±èƒ½è§¦å‘æ–­ç‚¹äº†ï¼</p>
<h3 data-id="heading-7">è°ƒè¯• hono</h3>
<p>æ‰€ä»¥æ ¹æ®ä¸Šé¢çš„ç†è®ºï¼Œæˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ª launch.jsonï¼Œç”¨æ¥è°ƒè¯• hono</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"configurations"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"request"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"launch"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Launch Program"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"runtimeExecutable"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// æ ¸å¿ƒï¼šå‘Šè¯‰è°ƒè¯•å™¨ç”¨pnpmæ¥è¿è¡Œ</span>
      <span class="hljs-attr">"runtimeArgs"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"run"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"dev"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ä¼ ç»™pnpmçš„å‚æ•°ï¼šè¿è¡Œâ€œdevâ€è„šæœ¬</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>

</code></pre>
<p>åŒç†ï¼Œå…¶å®å°±æ˜¯è§¦å‘äº†ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">pnpm run dev
</code></pre>
<p>å‘½ä»¤ï¼Œ dev è¿™ä¸ªå‘½ä»¤å…¶å®å°±æ˜¯ hono é¡¹ç›® package.json ä¸­çš„å†…å®¹ï¼š</p>
<pre><code class="hljs language-json" lang="json">  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsx watch src/index.ts"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsc"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node dist/index.js"</span>
  <span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-8">å®¹å™¨éƒ¨ç½²</h2>
<p>æ¥ä¸‹æ¥æ˜¯å¾ˆé•¿çš„å…³äº docker å’Œæˆ‘ä»¬å‰ç«¯å…¨æ ˆç›¸å…³çš„çŸ¥è¯†ï¼Œæœ‰æ·±å…¥çš„åŸç†ä»‹ç»ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥ä¸€èµ·äº¤æµã€‚</p>
<h3 data-id="heading-9">ä¸ºä»€ä¹ˆéœ€è¦ Dockerï¼Ÿ</h3>
<p>å³ä¾¿æ˜¯çº¯å‰ç«¯å¼€å‘è€…ï¼Œä¸æ¶‰åŠ Node.jsã€Nginx æˆ–æ•°æ®åº“ç­‰æœåŠ¡å™¨ç›¸å…³è½¯ä»¶ï¼Œåœ¨ä¸­å°ä¼ä¸šéƒ¨ç½²åº”ç”¨æ—¶ï¼Œåç«¯å›¢é˜Ÿæˆ–é¡¹ç›®ç»ç†å¸¸å¸¸ä¼šè¦æ±‚å‰ç«¯å›¢é˜Ÿæä¾›ä¸€ä¸ª Dockerfileï¼Œä»¥ä¾¿å°†å‰ç«¯åº”ç”¨éƒ¨ç½²åˆ° Nginx ä¸Šã€‚è¿™ç§è¦æ±‚åœ¨å®¹å™¨åŒ–æ—¶ä»£å˜å¾—è¶Šæ¥è¶Šæ™®éã€‚æ‰€ä»¥æ˜¯æœ‰å¿…è¦äº†è§£å®¹å™¨çš„çŸ¥è¯†çš„ã€‚</p>
<h3 data-id="heading-10">å®¹å™¨åŒ–çš„åŸºæœ¬æ¦‚å¿µ</h3>
<p>åœ¨å®¹å™¨åŒ–æ—¶ä»£ï¼Œé€šå¸¸é€šè¿‡ Dockerfileï¼ˆç”¨äºæè¿°å¦‚ä½•æ„å»º Docker å®¹å™¨çš„é…ç½®æ–‡ä»¶ï¼‰æ„å»ºå¼€å‘æˆ–ç”Ÿäº§ç¯å¢ƒçš„ Docker é•œåƒï¼Œç„¶åå¯åŠ¨è¿™äº›é•œåƒï¼Œä½¿å¤–éƒ¨ç½‘ç»œå¯ä»¥è®¿é—®å¯¹åº”çš„åº”ç”¨ã€‚</p>
<p>åœ¨ Docker æµè¡Œä¹‹å‰ï¼Œå‰ç«¯åº”ç”¨çš„éƒ¨ç½²æ–¹å¼ä¸€èˆ¬æ˜¯ç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šä¸‹è½½ç›¸å…³è½¯ä»¶ï¼ˆå¦‚ Nginxã€MySQL æˆ– PostgreSQLï¼‰ï¼Œé…ç½®å¹¶å¯åŠ¨æœåŠ¡ï¼Œå†å°†æ‰“åŒ…åçš„å‰ç«¯å†…å®¹æ”¾å…¥ Nginx çš„æŒ‡å®šç›®å½•ï¼Œä»¥ä¾¿å¤–éƒ¨è®¿é—®ã€‚è¿™ç§æ–¹å¼è¢«ç§°ä¸ºç‰©ç†æœºç›´æ¥éƒ¨ç½²ã€‚</p>
<h3 data-id="heading-11">ä¸ºä½•è½¬å‘å®¹å™¨åŒ–éƒ¨ç½²ï¼Ÿ</h3>
<p>å®¹å™¨åŒ–éƒ¨ç½²çš„ä¼˜åŠ¿ä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹ä¸¤ä¸ªæ–¹é¢ï¼Œæˆ‘ä»¬ç”¨å‰ç«¯çš„è§†è§’å»ç†è§£ï¼š</p>
<ol>
<li><strong>ç¯å¢ƒä¸€è‡´æ€§</strong>ï¼š</li>
</ol>
<ul>
<li>å‰ç«¯å¸¸è§çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆåœ¨ Chrome ä¸­åŠŸèƒ½æ­£å¸¸ï¼Œä½†åœ¨å…¶ä»–æµè§ˆå™¨ä¸­å´æ— æ³•è¿è¡Œï¼Ÿ</li>
</ul>
<ol start="2">
<li><strong>ç®€åŒ–ç¯å¢ƒé…ç½®</strong>ï¼š</li>
</ol>
<ul>
<li>å‰ç«¯é¡¹ç›®é€šå¸¸éœ€è¦é…ç½® ESLintã€Prettierã€TSConfigã€Vite/Webpack ç­‰å·¥å…·ã€‚è¿™äº›é…ç½®ç¹çï¼Œä¸”éœ€è¦ä¸€å®šçš„çŸ¥è¯†æ‰èƒ½å®šåˆ¶é€‚åˆé¡¹ç›®çš„é…ç½®ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œå‰ç«¯ç¤¾åŒºæä¾›äº†è®¸å¤š CLI å·¥å…·ï¼Œå¦‚ React çš„ create-react-appã€Vue çš„ Vue CLIã€Next.js çš„ @nextjs/cli ç­‰ï¼Œè¿™äº›å·¥å…·ä¸ºé¡¹ç›®æä¾›äº†ç°æˆçš„æ¨¡æ¿ï¼Œå¹¶åœ¨ Babel/SWC å’Œ Browserslist çš„é…ç½®ä¸­è§£å†³äº†å…¼å®¹æ€§é—®é¢˜ã€‚</li>
</ul>
<p>åŒæ ·ï¼ŒæœåŠ¡å™¨ç«¯ä¹Ÿé¢ä¸´ç¯å¢ƒä¸€è‡´æ€§å’Œé…ç½®ç¹ççš„é—®é¢˜ï¼Œå¹¶ä¸”è¿™äº›é—®é¢˜ç›¸å½“æ£˜æ‰‹ã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥å›é¡¾ä¸€ä¸‹ Docker æµè¡Œä¹‹å‰çš„ PaaS é¡¹ç›®ã€‚</p>
<h3 data-id="heading-12">PaaS çš„èƒŒæ™¯</h3>
<p>PaaSï¼ˆPlatform as a Serviceï¼‰æ˜¯äº‘è®¡ç®—çš„é‡è¦æœåŠ¡æ¨¡å‹ï¼Œæ—¨åœ¨æä¾›ä¸€ä¸ªå®Œæ•´çš„åº”ç”¨å¼€å‘ã€è¿è¡Œå’Œç®¡ç†ç¯å¢ƒï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿä¸“æ³¨äºç¼–å†™ä»£ç ï¼Œè€Œæ— éœ€æ‹…å¿ƒåº•å±‚åŸºç¡€è®¾æ–½æˆ–æ“ä½œç³»ç»Ÿã€‚</p>
<h3 data-id="heading-13">PaaS å—æ¬¢è¿çš„åŸå› </h3>
<p>PaaS é¡¹ç›®å—åˆ°å¹¿æ³›æ¥çº³çš„ä¸€ä¸ªä¸»è¦åŸå› æ˜¯å®ƒæä¾›äº†â€œåº”ç”¨æ‰˜ç®¡â€èƒ½åŠ›ã€‚å¦‚ä»Šï¼Œè®¸å¤šäººä½¿ç”¨é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€AWS ç­‰äº‘æœåŠ¡ï¼Œå®é™…ä¸Šå°±æ˜¯å°†æœ¬åœ°åº”ç”¨æ‰˜ç®¡åˆ°äº‘ç«¯ã€‚ç„¶è€Œï¼Œè¿™ä¸€éƒ¨ç½²è¿‡ç¨‹å¸¸å¸¸ä¼šé‡åˆ°äº‘ç«¯è™šæ‹Ÿæœºä¸æœ¬åœ°ç¯å¢ƒä¸ä¸€è‡´çš„é—®é¢˜ã€‚å› æ­¤ï¼Œå½“æ—¶çš„äº‘è®¡ç®—æœåŠ¡ç«äº‰çš„ç„¦ç‚¹åœ¨äºè°èƒ½æ›´å¥½åœ°æ¨¡æ‹Ÿæœ¬åœ°æœåŠ¡å™¨ç¯å¢ƒï¼Œä»è€Œæä¾›æ›´ä¼˜è´¨çš„â€œä¸Šäº‘â€ä½“éªŒã€‚è€Œå¼€æº PaaS é¡¹ç›®çš„å‡ºç°ï¼Œæ­£æ˜¯ä¸ºäº†æœ‰æ•ˆè§£å†³è¿™ä¸€é—®é¢˜ã€‚</p>
<h3 data-id="heading-14">docker çš„å‡ºç°</h3>
<p>æ­£å½“å¤§å®¶æ¯”è°èƒ½æ›´å¥½æ¨¡æ‹Ÿæœ¬åœ°æœåŠ¡å™¨ç¯å¢ƒçš„æ—¶å€™ï¼Œdocker è·³å‡ºæ¥è¯´ï¼Œå¯¹ä¸èµ·ï¼Œåœ¨åšçš„å„ä½éƒ½æ˜¯åƒåœ¾ã€‚ã€‚ã€‚æˆ‘èƒ½å®Œå…¨æ¨¡æ‹Ÿæœ¬åœ°æœåŠ¡å™¨ç¯å¢ƒï¼Œå˜¿å˜¿ï¼</p>
<p><strong>å¹¶ä¸” docker æä¾›äº†éå¸¸ä¾¿æ·çš„æ‰“åŒ…æœºåˆ¶ï¼Œ</strong> å¹¶ä¸”è¿™ä¸ªå‹ç¼©åŒ…åŒ…å«äº†å®Œæ•´çš„æ“ä½œç³»ç»Ÿæ–‡ä»¶å’Œç›®å½•ï¼Œä¹Ÿå°±æ˜¯åŒ…å«äº†è¿™ä¸ªåº”ç”¨è¿è¡Œæ‰€éœ€è¦çš„æ‰€æœ‰ä¾èµ–ã€‚åªéœ€ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">docker build æ‰“åŒ…è‡ªå·±çš„æœåŠ¡
docker run å¯åŠ¨è‡ªå·±çš„æœåŠ¡
</code></pre>
<p>å¦‚æ­¤ï¼Œdocker è½»æ¾å‡»è´¥äº† pass æœ¬èº«çš„æ‰“åŒ…æœºåˆ¶ï¼Œåæ¥é€æ¸ä½¿å®¹å™¨æŠ€æœ¯æˆä¸ºäº‘æœåŠ¡çš„åŸºç¡€è®¾æ–½ä¹‹ä¸€ã€‚</p>
<p>ä½ å¯ä»¥æƒ³è±¡ï¼Œå°±è·Ÿå‰ç«¯ä½¿ç”¨ vite å’Œ webpack ä¸€æ ·ï¼Œä¸€é”® <code>npm run build xxx</code> æ‰“åŒ…åï¼Œä½ çš„å‰ç«¯åº”ç”¨èƒ½åœ¨å„ä¸ªæµè§ˆå™¨ä¸Šè¿è¡Œï¼Œå¹¶å¸®åŠ©æˆ‘ä»¬è§£å†³äº†æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜ï¼Œå¦‚æ­¤ä¾¿æ·ï¼Œè°èƒ½ä¸å–œæ¬¢è¿™æ ·çš„æŠ€æœ¯å‘¢ï¼Ÿ</p>
<p>æ‰€ä»¥è¿™ä¸ªå°èŠ‚æˆ‘ä»¬å¯ä»¥å›ç­”å¸¸è§çš„é¢è¯•é¢˜ï¼š</p>
<ul>
<li>ä¸ºä»€ä¹ˆéœ€è¦å®¹å™¨åŒ– ï¼ˆdockerï¼‰ï¼Ÿ</li>
</ul>
<p>æ—¢ç„¶ docker è¿™ä¹ˆå¥½ç”¨ï¼Œé‚£ docker é•œåƒï¼Œdocker å®¹å™¨ï¼Œdocker é•œåƒä»“åº“ç­‰ç­‰å¸¸è§æ¦‚å¿µæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæˆ‘ä»¬æ‹¿å‰ç«¯çš„ npm åŒ…ç®¡ç†æ¥å¸®åŠ©æˆ‘ä»¬ç†è§£ã€‚</p>
<h2 data-id="heading-15">Docker å¿…éœ€äº†è§£çš„åŸºç¡€æ¦‚å¿µ</h2>
<h3 data-id="heading-16">1. Docker é•œåƒå’Œ Docker å®¹å™¨</h3>
<p>é•œåƒï¼ˆ<code>Image</code>ï¼‰å’Œå®¹å™¨ï¼ˆ<code>Container</code>ï¼‰çš„å…³ç³»ï¼Œå°±åƒæ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„ <code>ç±»</code> å’Œ <code>å®ä¾‹</code> ä¸€æ ·ï¼Œé•œåƒæ˜¯é™æ€çš„å®šä¹‰ï¼Œå®¹å™¨æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚</p>
<ul>
<li><strong>Docker é•œåƒ</strong> æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œé™¤äº†æä¾›å®¹å™¨è¿è¡Œæ—¶æ‰€éœ€çš„ç¨‹åºã€åº“ã€èµ„æºã€é…ç½®ç­‰æ–‡ä»¶å¤–ï¼Œè¿˜åŒ…å«äº†ä¸€äº›ä¸ºè¿è¡Œæ—¶å‡†å¤‡çš„ä¸€äº›é…ç½®å‚æ•°ï¼ˆå¦‚åŒ¿åå·ã€ç¯å¢ƒå˜é‡ã€ç”¨æˆ·ç­‰ï¼‰ã€‚</li>
<li><strong>Docker å®¹å™¨</strong>çš„å®è´¨å°±æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œä½†æ˜¯è·Ÿæ™®é€šè¿›ç¨‹ä¸ä¸€æ ·çš„æ˜¯ï¼Œå› æ­¤å®¹å™¨å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„ <code>root</code> æ–‡ä»¶ç³»ç»Ÿã€è‡ªå·±çš„ç½‘ç»œé…ç½®ã€è‡ªå·±çš„è¿›ç¨‹ç©ºé—´ï¼Œç”šè‡³è‡ªå·±çš„ç”¨æˆ· ID ç©ºé—´ã€‚å®¹å™¨å†…çš„è¿›ç¨‹æ˜¯è¿è¡Œåœ¨ä¸€ä¸ªéš”ç¦»çš„ç¯å¢ƒé‡Œï¼Œä½¿ç”¨èµ·æ¥ï¼Œå°±å¥½åƒæ˜¯åœ¨ä¸€ä¸ªç‹¬ç«‹äºå®¿ä¸»çš„ç³»ç»Ÿä¸‹æ“ä½œä¸€æ ·ã€‚</li>
</ul>
<h3 data-id="heading-17">2. Dockerfile</h3>
<p>dockerfile æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼ŒåŒ…å«äº†ä¸€ç³»åˆ—æŒ‡ä»¤ï¼Œä¸€èˆ¬æˆ‘ä»¬éƒ½æ˜¯ç”¨è¿™ä¸ªæ–‡ä»¶é…åˆ docker build å‘½ä»¤æ¥æ„å»º docker é•œåƒã€‚</p>
<h3 data-id="heading-18">3. Docker Clientã€Docker hubã€Docker Daemon</h3>
<p>å…³ç³»å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a570165d395b4ae7927cb22d8824e443~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=Jkiiqfu%2BDqq%2F89BYaaYnBznEq5A%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7885b08b51d74326a891fbaf1776b273~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=FLhngk35eljrOBOBGdauK%2FvhUSA%3D" alt="" loading="lazy"/></p>
<p>ä¸Šå›¾ä¸­æ¶‰åŠ 3 ä¸ªé‡è¦çš„æ¦‚å¿µ</p>
<ul>
<li>Docker Hubï¼šDocker Hub æ˜¯ä¸€ä¸ªäº‘ç«¯æ‰˜ç®¡çš„Dockeré•œåƒåº“ï¼Œç”¨æˆ·å¯ä»¥åœ¨å…¶ä¸­å­˜å‚¨å’Œå…±äº« docker é•œåƒã€‚å®ƒç±»ä¼¼äº npm ä»“åº“ã€‚</li>
<li>Docker Daemonï¼šå®ˆæŠ¤è¿›ç¨‹æ˜¯ä¸€ä¸ªåå°æœåŠ¡ï¼Œè´Ÿè´£ç®¡ç† docker å®¹å™¨å’Œé•œåƒã€‚å®ƒç›‘å¬æ¥è‡ªçš„ docker å®¢æˆ·ç«¯çš„å‘½ä»¤ï¼Œå¹¶æ‰§è¡Œç›¸åº”æ“ä½œã€‚</li>
<li>Docker Clientï¼šå…è®¸ç”¨æˆ·ä¸å®ˆæŠ¤è¿›ç¨‹äº¤äº’çš„å‘½ä»¤è¡Œå·¥å…·ã€‚</li>
</ul>
<h2 data-id="heading-19">ã€å»¶ä¼¸è¡¥å……ã€‘æ·±å…¥åŸç†1ï¼šä¸€å®šè¦ç†è§£ Docker é•œåƒçš„åˆ†å±‚çš„åŸç†</h2>
<p>ä¸Šé¢æˆ‘ä»¬è¯´äº†ï¼Œ<strong>Docker é•œåƒ</strong> æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªç‰¹åˆ«é‡è¦çš„ç‰¹æ€§ï¼Œç§°ä¹‹ä¸ºæ–‡ä»¶ç³»ç»Ÿåˆ†å±‚ã€‚ä¸ºäº†è¯´æ˜è¿™ä¸ªåŸç†ï¼Œæˆ‘ä»¬éœ€è¦ä» linux æœ¬èº«çš„æ–‡ä»¶ç³»ç»Ÿè®²èµ·ã€‚</p>
<p>é¦–å…ˆ linux å¯åŠ¨çš„æ—¶å€™ï¼Œé¦–å…ˆåŠ è½½çš„æ˜¯ bootfs æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒåŒ…å«äº† boot åŠ è½½å™¨å’Œ kernel å†…æ ¸ã€‚kernel å†…æ ¸ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“è®¡ç®—æœºæ˜¯ç”±ç¡¬ä»¶æ„æˆçš„ï¼Œä¾‹å¦‚ cpuã€ä¸»æ¿ã€å¤–è®¾ã€å†…å­˜ç­‰ç­‰ï¼Œæœ€ç»ˆè¿™äº›ç¡¬ä»¶ä¼šè¢«æ“ä½œç³»ç»Ÿæ¥æ‰‹ç®¡ç†ï¼Œä¾‹å¦‚ï¼Œå°†åœ¨ç¡¬ç›˜çš„ç¨‹åºæ˜ å°„ä¸ºä¸€ä¸ªä¸ªåŠ¨æ€çš„è¿›ç¨‹ï¼Œç„¶åå¢åŠ  cpu è°ƒåº¦ç®—æ³•ï¼Œè®©æ¯ä¸ªè¿›ç¨‹æŒ‰ç…§ç‰¹å®šçš„è§„åˆ™ä¸æ–­è¿è¡Œï¼Œè¿˜éœ€è¦ç®¡ç†å†…å­˜ï¼Œä¸æ–­çš„è¯»å–å†…å­˜æŒ‡ä»¤ç»™ cpu è¿è¡Œã€‚ã€‚ã€‚</p>
<p>ç„¶å linux ä¼šæŒ‚åœ¨ rootfs æ–‡ä»¶ç³»ç»Ÿï¼Œä»€ä¹ˆæ˜¯ rootfs å‘¢ï¼Ÿä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“åœ¨ç© windows æ“ä½œç³»ç»Ÿçš„æ—¶å€™ï¼ŒC ç›˜ä¸€èˆ¬éƒ½æ˜¯ç”¨æ¥å­˜å‚¨æ“ä½œç³»ç»Ÿç›¸å…³çš„æ–‡ä»¶çš„ï¼Œä¾‹å¦‚ C ç›˜ä¸‹çš„ Program Files ä¸€èˆ¬ç”¨æ¥å­˜æ”¾æ“ä½œç³»ç»Ÿç›¸å…³çš„é…ç½®æ–‡ä»¶ã€‚</p>
<p>è€Œ linux ä¸­çš„ rootfs åœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯æŠŠæ“ä½œç³»ç»Ÿç›¸å…³çš„æ–‡ä»¶æ”¾å…¥å…¶ä¸­ã€‚linux æœ‰å¾ˆå¤šä¸åŒçš„å‘è¡Œç‰ˆæœ¬ï¼Œä¾‹å¦‚ centosï¼Œubantu ç­‰ç­‰ï¼Œä»–ä»¬éƒ½æœ‰è‡ªå·±çš„ rootfsï¼Œè§„åˆ™æœ‰æ‰€ä¸åŒã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/460a739ec5904cf49ccf1ef798882f92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=O65Hc%2F%2F%2FaD9Lg2MZZ0F8yyhiLSo%3D" alt="" loading="lazy"/></p>
<p>è€Œä¸Šé¢è¯´çš„ä¸¤ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œåœ¨ docker ä¸­ï¼Œå¹¶ä¸æ˜¯æ··åœ¨ä¸€èµ·çš„ï¼Œè€Œæ˜¯å¦‚ä¸Šå›¾åˆ†å±‚äº†çš„ï¼Œè¿™æ„å‘³ç€ï¼Œå¦‚æœæ­£åœ¨ä½¿ç”¨ä¸åŒçš„ docker é•œåƒï¼Œä»–ä»¬æœ€åº•å±‚çš„ bootfs å¾ˆå¯èƒ½æ˜¯ä¸€æ ·çš„ï¼ˆç›¸åŒçš„ linux ç‰ˆæœ¬ï¼‰ï¼Œé‚£ä¹ˆè¿™äº›é•œåƒå°±å¯ä»¥å…±äº«è¿™ä¸€å±‚ï¼Œè€Œä¸æ˜¯æ¯ä¸ªé•œåƒéƒ½åˆ†åˆ«æœ‰ä¸€ä¸ª bootfsã€‚</p>
<p>åŒç† rootfs ä¹Ÿæ˜¯ä¸€æ ·ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„é•œåƒéƒ½æ˜¯åŸºäº ubantu çš„ linux å‘è¡Œç‰ˆæœ¬ï¼Œç‰ˆæœ¬å·ä¹Ÿæ˜¯ä¸€æ ·çš„è¯ï¼Œé‚£ä¹ˆ rootfs ä¹Ÿæ˜¯å¯ä»¥å…±äº«çš„ã€‚</p>
<p>è¿™æ ·å°±ä¼šå¤§å¤§é™ä½ docker çš„ä½“ç§¯ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¤§å®¶è¯´ docker è½»é‡çš„åŸå› ã€‚</p>
<p>docker é•œåƒæœ¬èº«æä¾›çš„è¿™äº›æ•°æ®å±‚æ˜¯åªè¯»çš„ï¼Œæˆ‘ä»¬åç»­ç”¨ dockerfile å»è‡ªå®šä¹‰æˆ‘ä»¬è‡ªå·±çš„é•œåƒæ—¶ï¼Œå®åœ¨å¯è¯»å±‚ä¸Šé¢åŠ ä¸€ä¸ªè¯»å†™å±‚ï¼Œä½†æ˜¯ä¿®æ”¹ docker çš„ï¼Œæ‰€ä»¥å…±äº«åº•å±‚çš„æ•°æ®å±‚ä¹Ÿä¸ä¼šå½±å“æˆ‘ä»¬å®šåˆ¶åŒ–çš„ docker é•œåƒã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15b4b8bedf384df983393bdfe87b3b4d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=KAp6f5ZN1Rw6QuAFT%2FEfTCb0Fac%3D" alt="" loading="lazy"/></p>
<p>ä¸ºä»€ä¹ˆç†è§£åˆ†å±‚å¦‚æ­¤é‡è¦å‘¢ï¼Ÿæˆ‘ä»¬ä¸¾ä¸ªä¾‹å­ï¼ˆä»¥ä¸‹ dockerfile æ–‡ä»¶æ¯ä¸ªå‘½ä»¤æ˜¯ä»€ä¹ˆæ„æ€ä¼šè¯¦ç»†è®²è§£ï¼Œç°åœ¨ä¸ç”¨åœ¨æ„ï¼‰ï¼Œä»¥ä¸‹ docker file ä¸­ï¼Œæˆ‘ä»¬æ³¨æ„ RUN å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">FROM</span> ubuntu:<span class="hljs-number">20.04</span>

RUN apt<span class="hljs-operator">-</span><span class="hljs-keyword">get</span> <span class="hljs-keyword">update</span>
RUN apt<span class="hljs-operator">-</span><span class="hljs-keyword">get</span> install <span class="hljs-operator">-</span>y python3
RUN apt<span class="hljs-operator">-</span><span class="hljs-keyword">get</span> install <span class="hljs-operator">-</span>y python3<span class="hljs-operator">-</span>pip
RUN apt<span class="hljs-operator">-</span><span class="hljs-keyword">get</span> clean
</code></pre>
<p>è¿™é‡Œæ‰§è¡Œäº† 4 ä¸ª RUN å‘½ä»¤ï¼Œè€Œæ¯ä¸ª RUN å‘½ä»¤éƒ½ä¼šå•ç‹¬åœ¨ docker é•œåƒä¸Šå»ºç«‹ä¸€ä¸ªå•ç‹¬çš„è¯»å†™å±‚ï¼Œè¿™æ ·ä¼šå¢å¤§æ„å»ºåçš„ docker é•œåƒä½“ç§¯ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶åˆå¹¶ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">FROM</span> ubuntu:<span class="hljs-number">20.04</span>

RUN apt<span class="hljs-operator">-</span><span class="hljs-keyword">get</span> <span class="hljs-keyword">update</span> <span class="hljs-operator">&amp;&amp;</span> \
    apt<span class="hljs-operator">-</span><span class="hljs-keyword">get</span> install <span class="hljs-operator">-</span>y python3 python3<span class="hljs-operator">-</span>pip <span class="hljs-operator">&amp;&amp;</span> \
    apt<span class="hljs-operator">-</span><span class="hljs-keyword">get</span> clean <span class="hljs-operator">&amp;&amp;</span> \
    rm <span class="hljs-operator">-</span>rf <span class="hljs-operator">/</span>var<span class="hljs-operator">/</span>lib<span class="hljs-operator">/</span>apt<span class="hljs-operator">/</span>lists<span class="hljs-comment">/*
</span></code></pre>
<p>åŒæ ·çš„ï¼Œå¦‚æœåˆ†å±‚ä¸­ï¼Œåˆ†å±‚çš„å†…å®¹æ²¡æœ‰å˜ï¼Œdocker ä¼šé‡å¤åˆ©ç”¨è¿™äº›å·²ç»æ‰“åŒ…å¥½çš„å±‚ï¼Œä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæˆ‘ä»¬å‰ç«¯åº”ç”¨æ‰“åŒ…çš„æ—¶å€™ï¼Œå¾€å¾€ package.json/package.lock.json çš„ä¾èµ–æ˜¯æ²¡æœ‰å˜åŒ–çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¦‚æœèƒ½åˆ©ç”¨ä¹‹å‰å·²ç»ä¸‹è½½å¥½çš„ npm åŒ…çš„å±‚ï¼Œå°±ä¸ç”¨é‡å¤ä¸‹è½½äº†ã€‚</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># ä½¿ç”¨ Node.js ä½œä¸ºåŸºç¡€é•œåƒ</span>
FROM node:<span class="hljs-number">22</span>-slim

<span class="hljs-comment"># å°† package.json å’Œ package-lock.json å¤åˆ¶åˆ°å®¹å™¨ä¸­</span>
COPY <span class="hljs-keyword">package</span>*.json ./

<span class="hljs-comment"># å®‰è£…ä¾èµ–ï¼ˆä¼šåœ¨æ­¤å±‚ç¼“å­˜ node_modulesï¼‰</span>
RUN npm install

<span class="hljs-comment"># å¤åˆ¶åº”ç”¨ç¨‹åºçš„å…¶ä»–æºä»£ç åˆ°å®¹å™¨ä¸­</span>
COPY . .

<span class="hljs-comment"># æš´éœ²åº”ç”¨ç¨‹åºè¿è¡Œçš„ç«¯å£</span>
EXPOSE <span class="hljs-number">3000</span>

<span class="hljs-comment"># å¯åŠ¨åº”ç”¨ç¨‹åº</span>
CMD [<span class="hljs-string">"npm"</span>, <span class="hljs-string">"start"</span>]
</code></pre>
<p>ä»¥ä¸Šæˆ‘ä»¬ä¼šçœ‹åˆ° <code>RUN npm install</code> è¿™ä¸€æ­¥ï¼Œå¦‚æœå‘½ä»¤è·Ÿä»¥å‰ä¸€æ ·ï¼Œä¼šåˆ©ç”¨ç¼“å­˜ï¼Œä¸ä¼šä¸‹è½½ npm åŒ…ï¼Œå…·ä½“ç¼“å­˜è§„åˆ™ï¼Œå®˜æ–¹å™è¿°å¦‚ä¸‹ï¼ˆå»ºè®®åç»­çœ‹å®Œ dockerfile ç« èŠ‚åå†å›æ¥çœ‹è¿™éƒ¨åˆ†ï¼Œéå¸¸é‡è¦ï¼‰ï¼š</p>
<p>åœ¨é•œåƒçš„æ„å»ºè¿‡ç¨‹ä¸­ï¼ŒDocker ä¼šéå† <code>Dockerfile</code> æ–‡ä»¶ä¸­çš„æŒ‡ä»¤ï¼Œç„¶åæŒ‰é¡ºåºæ‰§è¡Œã€‚åœ¨æ‰§è¡Œæ¯æ¡æŒ‡ä»¤ä¹‹å‰ï¼ŒDocker éƒ½ä¼šåœ¨ç¼“å­˜ä¸­æŸ¥æ‰¾æ˜¯å¦å·²ç»å­˜åœ¨å¯é‡ç”¨çš„é•œåƒï¼Œå¦‚æœæœ‰å°±ä½¿ç”¨ç°å­˜çš„é•œåƒï¼Œä¸å†é‡å¤åˆ›å»ºã€‚å¦‚æœä½ ä¸æƒ³åœ¨æ„å»ºè¿‡ç¨‹ä¸­ä½¿ç”¨ç¼“å­˜ï¼Œä½ å¯ä»¥åœ¨ <code>docker build</code> å‘½ä»¤ä¸­ä½¿ç”¨ <code>--no-cache=true</code> é€‰é¡¹ã€‚ ä½†æ˜¯ï¼Œå¦‚æœä½ æƒ³åœ¨æ„å»ºçš„è¿‡ç¨‹ä¸­ä½¿ç”¨ç¼“å­˜ï¼Œä½ å¾—æ˜ç™½ä»€ä¹ˆæ—¶å€™ä¼šï¼Œä»€ä¹ˆæ—¶å€™ä¸ä¼šæ‰¾åˆ°åŒ¹é…çš„é•œåƒï¼Œéµå¾ªçš„åŸºæœ¬è§„åˆ™å¦‚ä¸‹ï¼š</p>
<ul>
<li>ä»ä¸€ä¸ªåŸºç¡€é•œåƒå¼€å§‹ï¼ˆ<code>FROM</code> æŒ‡ä»¤æŒ‡å®šï¼‰ï¼Œä¸‹ä¸€æ¡æŒ‡ä»¤å°†å’Œè¯¥åŸºç¡€é•œåƒçš„æ‰€æœ‰å­é•œåƒè¿›è¡ŒåŒ¹é…ï¼Œæ£€æŸ¥è¿™äº›å­é•œåƒè¢«åˆ›å»ºæ—¶ä½¿ç”¨çš„æŒ‡ä»¤æ˜¯å¦å’Œè¢«æ£€æŸ¥çš„æŒ‡ä»¤å®Œå…¨ä¸€æ ·ã€‚å¦‚æœä¸æ˜¯ï¼Œåˆ™ç¼“å­˜å¤±æ•ˆã€‚</li>
<li>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåªéœ€è¦ç®€å•åœ°å¯¹æ¯” <code>Dockerfile</code> ä¸­çš„æŒ‡ä»¤å’Œå­é•œåƒã€‚ç„¶è€Œï¼Œæœ‰äº›æŒ‡ä»¤éœ€è¦æ›´å¤šçš„æ£€æŸ¥å’Œè§£é‡Šã€‚</li>
<li>å¯¹äº <code>ADD</code> å’Œ <code>COPY</code> æŒ‡ä»¤ï¼Œé•œåƒä¸­å¯¹åº”æ–‡ä»¶çš„å†…å®¹ä¹Ÿä¼šè¢«æ£€æŸ¥ï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½ä¼šè®¡ç®—å‡ºä¸€ä¸ªæ ¡éªŒå’Œã€‚æ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´å’Œæœ€åè®¿é—®æ—¶é—´ä¸ä¼šçº³å…¥æ ¡éªŒã€‚åœ¨ç¼“å­˜çš„æŸ¥æ‰¾è¿‡ç¨‹ä¸­ï¼Œä¼šå°†è¿™äº›æ ¡éªŒå’Œå’Œå·²å­˜åœ¨é•œåƒä¸­çš„æ–‡ä»¶æ ¡éªŒå’Œè¿›è¡Œå¯¹æ¯”ã€‚å¦‚æœæ–‡ä»¶æœ‰ä»»ä½•æ”¹å˜ï¼Œæ¯”å¦‚å†…å®¹å’Œå…ƒæ•°æ®ï¼Œåˆ™ç¼“å­˜å¤±æ•ˆã€‚</li>
<li>é™¤äº† <code>ADD</code> å’Œ <code>COPY</code> æŒ‡ä»¤ï¼Œç¼“å­˜åŒ¹é…è¿‡ç¨‹ä¸ä¼šæŸ¥çœ‹ä¸´æ—¶å®¹å™¨ä¸­çš„æ–‡ä»¶æ¥å†³å®šç¼“å­˜æ˜¯å¦åŒ¹é…ã€‚ä¾‹å¦‚ï¼Œå½“æ‰§è¡Œå®Œ <code>RUN apt-get -y update</code> æŒ‡ä»¤åï¼Œå®¹å™¨ä¸­ä¸€äº›æ–‡ä»¶è¢«æ›´æ–°ï¼Œä½† Docker ä¸ä¼šæ£€æŸ¥è¿™äº›æ–‡ä»¶ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œåªæœ‰æŒ‡ä»¤å­—ç¬¦ä¸²æœ¬èº«è¢«ç”¨æ¥åŒ¹é…ç¼“å­˜ã€‚</li>
</ul>
<p>ä¸€æ—¦ç¼“å­˜å¤±æ•ˆï¼Œæ‰€æœ‰åç»­çš„ Dockerfile æŒ‡ä»¤éƒ½å°†äº§ç”Ÿæ–°çš„é•œåƒï¼Œç¼“å­˜ä¸ä¼šè¢«ä½¿ç”¨ã€‚</p>
<h2 data-id="heading-20">ã€å»¶ä¼¸è¡¥å……ã€‘æ·±å…¥åŸç†2ï¼šä¸€å®šè¦ç†è§£ä»€ä¹ˆæ˜¯æ„å»ºä¸Šä¸‹æ–‡</h2>
<p>ä¸Šé¢æœ‰ä¸€ä¸ªå¾ˆå®¹æ˜“æ··æ·†çš„è·¯å¾„é—®é¢˜ï¼Œ<code>COPY package*.json ./</code> ä¸­ package*.json æŒ‡çš„å¹¶ä¸æ˜¯ docker build å‘½ä»¤çš„ç›®å½•ï¼Œä¹Ÿä¸æ˜¯ <code>Dockerfile</code> æ‰€åœ¨çš„ç›®å½•ï¼Œè€Œæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç›®å½•ã€‚æ‰§è¡Œä¸Šä¸‹æ–‡ç›®å½•æˆ‘ä»¬æ˜¯åœ¨ docker build çš„æ—¶å€™æŒ‡å®šçš„ï¼Œè¿™é‡Œæˆ‘ä»¬æŒ‡å®šçš„ <code>.</code>ï¼Œè¡¨ç¤ºæ‰§è¡Œ docker build å‘½ä»¤æ—¶çš„ç›®å½•ã€‚</p>
<p>ä¸ºä»€ä¹ˆè¿™ä¸ªæ¦‚å¿µå¦‚æ­¤é‡è¦ï¼Œå¾ˆæœ‰å¯èƒ½ä½ ä½ è®¾ç½®çš„ä¸å¯¹ï¼Œæ ¹æœ¬æ‰¾ä¸åˆ° package*.jsonï¼Œä¾‹å¦‚ä½ è¿™æ ·</p>
<pre><code class="hljs language-bash" lang="bash">COPY ../package*.json ./
</code></pre>
<p><code>../package*.json</code>ï¼ŒæŒ‡çš„æ˜¯æ„å»ºä¸Šä¸‹æ–‡ä¸Šä¸€å±‚ç›®å½•çš„ package*.jsonï¼Œå…¶å®æ˜¯æ‰¾ä¸åˆ°çš„ï¼Œå› ä¸ºæˆ‘ä»¬å°†æ„å»ºä¸Šä¸‹æ–‡å¤åˆ¶åˆ° docker host çš„æ—¶å€™ï¼Œdocker åªä¼šå¤åˆ¶æ„å»ºä¸Šä¸‹æ–‡å†…çš„å†…å®¹ï¼ˆå¹¶ä¸”é™¤å¼€ .dockerignore file æŒ‡å®šçš„æ’é™¤çš„å†…å®¹ï¼‰ã€‚</p>
<p>æ‰€ä»¥ä½ åœ¨æ„å»ºä¸Šä¸‹æ–‡ä¹‹å¤–æ‰¾ package*.jsonï¼Œè‚¯å®šæ˜¯æ‰¾ä¸åˆ°çš„ã€‚</p>
<p>å¹¶ä¸”æœ‰ç›¸å½“å¤šç½‘ä¸Šçš„äººè¯¯ä»¥ä¸º <code>.</code> æ˜¯æŒ‡å®š <code>Dockerfile</code> æ‰€åœ¨ç›®å½•å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœä¸é¢å¤–æŒ‡å®š <code>Dockerfile</code> çš„è¯ï¼Œä¼šå°†ä¸Šä¸‹æ–‡ç›®å½•ä¸‹çš„åä¸º <code>Dockerfile</code> çš„æ–‡ä»¶ä½œä¸º Dockerfileã€‚</p>
<p>è¿™åªæ˜¯é»˜è®¤è¡Œä¸ºï¼Œå®é™…ä¸Š <code>Dockerfile</code> çš„æ–‡ä»¶åå¹¶ä¸è¦æ±‚å¿…é¡»ä¸º <code>Dockerfile</code>ï¼Œè€Œä¸”å¹¶ä¸è¦æ±‚å¿…é¡»ä½äºä¸Šä¸‹æ–‡ç›®å½•ä¸­ï¼Œæ¯”å¦‚å¯ä»¥ç”¨ <code>-f ../Dockerfile.php</code> å‚æ•°æŒ‡å®šæŸä¸ªæ–‡ä»¶ä½œä¸º <code>Dockerfile</code>ã€‚</p>
<p>å½“ç„¶ï¼Œä¸€èˆ¬å¤§å®¶ä¹ æƒ¯æ€§çš„ä¼šä½¿ç”¨é»˜è®¤çš„æ–‡ä»¶å <code>Dockerfile</code>ï¼Œä»¥åŠä¼šå°†å…¶ç½®äºé•œåƒæ„å»ºä¸Šä¸‹æ–‡ç›®å½•ä¸­ã€‚</p>
<p>æœ€åæœ€æœ€é‡è¦çš„å°±æ˜¯éœ€è¦å†™ä¸€ä»½ .dockerignore æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬å‰ç«¯é¡¹ç›®å¾€å¾€éƒ½æœ‰ node_modules ç›®å½•ï¼Œè€Œä¸”ä½“ç§¯ç›¸å½“å¤§ï¼Œæ‰€ä»¥æ²¡å¿…è¦å°†å…¶å¤åˆ¶åˆ° docker hostã€‚</p>
<ul>
<li>è¿™ä¼šæ˜¾è‘—å¢åŠ é•œåƒçš„ä½“ç§¯ï¼Œä»è€Œå½±å“é•œåƒæ„å»ºæ—¶é—´å’Œä¼ è¾“æ•ˆç‡ã€‚</li>
<li><code>node_modules</code> ä¸­çš„æŸäº›ä¾èµ–å¯èƒ½æ˜¯å¹³å°ç›¸å…³çš„ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨äº†åŸç”Ÿä»£ç æˆ–ç¼–è¯‘æ­¥éª¤ï¼‰ï¼Œåœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼ˆå¦‚ Windows å’Œ Linuxï¼‰ä¸Šä¼šæœ‰æ‰€ä¸åŒã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/751edbf1964d4253a777394992781d8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=Kno%2FN33OujwUu5h4MQTmHus7seQ%3D" alt="" loading="lazy"/></p>
<p>å¥½äº†ï¼Œæˆ‘ä»¬æ¥ç€ç¼–å†™å®Œ dockerfile æ–‡ä»¶ç»§ç»­è¯´ã€‚</p>
<p>ç„¶åï¼Œå°±å¯ä»¥è¿è¡Œ docker é•œåƒ</p>
<pre><code class="hljs language-arduino" lang="arduino">docker run -d -p <span class="hljs-number">3000</span>:<span class="hljs-number">80</span> react-app
</code></pre>
<ul>
<li><code>-d</code>ï¼šä»¥åå°æ¨¡å¼è¿è¡Œå®¹å™¨ã€‚</li>
<li><code>-p 3000:80</code>ï¼šå°†æœ¬åœ°çš„ 8080 ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„ 80 ç«¯å£ã€‚</li>
</ul>
<p>ç„¶åæœ¬åœ°è®¿é—® localhost: 3000ï¼Œæˆ–è€…ä½ çš„æœºå™¨æœ‰å¤–ç½‘åœ°å€ï¼Œä½¿ç”¨ &lt;å¤–ç½‘åœ°å€&gt;: 3000ï¼Œè®¿é—®å³å¯ã€‚</p>
<p>è¿™é‡Œè¿˜ä¼šç‰µæ‰¯åˆ°ä¸€ä¸ªéœ€è¦æ·±å…¥è®¨è®ºçš„å†…å®¹ï¼Œå°±æ˜¯å®¹å™¨ç½‘ç»œçš„åŸç†ï¼Œæˆ‘ä»¬åç»­å†è°ˆã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ä¸€äº›å¸¸ç”¨çš„ docker å‘½ä»¤ï¼Œå¸®åŠ©å¤§å®¶å¿«é€Ÿç”¨èµ·æ¥ dockerã€‚</p>
<h3 data-id="heading-21">å¸¸ç”¨å‘½ä»¤æ€»ç»“</h3>
<p><strong>ä¸‹è½½é•œåƒ</strong>ï¼šdocker pull &lt;é•œåƒå&gt;ï¼Œä¾‹å¦‚ä¸‹è½½ node.js 22 ç‰ˆæœ¬çš„é•œåƒ</p>
<pre><code class="hljs">docker pull node:22-slim
</code></pre>
<p>æ³¨ï¼šå¯ä»¥ç”¨ docker hub æ¥æœç´¢æ”¯æŒçš„ç‰ˆæœ¬ã€‚æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<ul>
<li>è¿›å…¥docker hubçš„å®˜ç½‘ï¼Œåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fhub.docker.com%2F" target="_blank" title="https://hub.docker.com/" ref="nofollow noopener noreferrer">hub.docker.com</a></li>
<li>ç„¶åæœç´¢éœ€è¦çš„é•œåƒï¼š</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3988f9ef8e46490ab302e31d3871e483~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=FD2TnK6Lpe1Bne3QaP8KKcKh0vA%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>æŸ¥çœ‹é•œåƒæ”¯æŒçš„ç‰ˆæœ¬ï¼š</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eac86c6febf940ce994e34bd32a0f5e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=dxY5IlqwXvRbaKbeAl8j%2F5%2BqX%2Fs%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<p><strong>åˆ—å‡ºé•œåƒï¼š</strong></p>
<pre><code class="hljs">docker images 
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/38688a35f24a4f9b92c81398c2ba463d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=IafRLnpcdUvZBbkcYRHmrYb6cno%3D" alt="" loading="lazy"/></p>
<p><strong>åˆ é™¤é•œåƒ</strong>ï¼šdocker rmi -f &lt;é•œåƒå&gt;ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs">docker rmi -f nginx
</code></pre>
<p><strong>æ–°å»ºå¹¶å¯åŠ¨å®¹å™¨ï¼šdocker run -d -p &lt;æœ¬åœ°ç«¯å£&gt;:&lt;å®¹å™¨ç«¯å£&gt; &lt;é•œåƒå&gt;ï¼Œä¾‹å¦‚</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">docker run -d -p <span class="hljs-number">80</span>:<span class="hljs-number">80</span> --name nginx nginx:<span class="hljs-number">1.17</span><span class="hljs-number">.0</span>
</code></pre>
<ul>
<li>
<p>-d é€‰é¡¹ï¼šè¡¨ç¤ºåå°è¿è¡Œ</p>
</li>
<li>
<p>--name é€‰é¡¹ï¼šæŒ‡å®šè¿è¡Œåå®¹å™¨çš„åå­—ä¸ºnginx,ä¹‹åå¯ä»¥é€šè¿‡åå­—æ¥æ“ä½œå®¹å™¨</p>
</li>
<li>
<p>-p é€‰é¡¹ï¼šæŒ‡å®šç«¯å£æ˜ å°„ï¼Œæ ¼å¼ä¸ºï¼šhostPort:containerPort</p>
</li>
</ul>
<p><strong>åˆ—å‡ºå®¹å™¨ï¼š</strong></p>
<pre><code class="hljs">docker ps
</code></pre>
<p><strong>æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨</strong>ï¼š</p>
<pre><code class="hljs">docker ps
</code></pre>
<p>å¦‚æœåŠ å…¥ -a å‚æ•°ï¼Œå³ä½¿æš‚åœçš„å®¹å™¨ä¹Ÿä¼šè¢«åˆ—å‡ºæ¥ã€‚</p>
<p><strong>åœæ­¢å®¹å™¨</strong>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">docker stop &lt;å®¹å™¨ID | å®¹å™¨åå­—&gt;
</code></pre>
<hr/>
<p><strong>åˆ é™¤å®¹å™¨</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker <span class="hljs-built_in">rm</span> &lt;å®¹å™¨ID | å®¹å™¨åå­—&gt;
</code></pre>
<p><strong>åœ¨å®¿ä¸»æœºæŸ¥çœ‹dockerä½¿ç”¨cpuã€å†…å­˜ã€ç½‘ç»œã€ioæƒ…å†µï¼š</strong></p>
<pre><code class="hljs language-xml" lang="xml">docker stats <span class="hljs-tag">&lt;<span class="hljs-name">å®¹å™¨ID</span> | <span class="hljs-attr">å®¹å™¨åå­—</span>&gt;</span>
</code></pre>
<p><strong>è¿›å…¥Dockerå®¹å™¨å†…éƒ¨çš„bash</strong></p>
<pre><code class="hljs language-bash" lang="bash">docker <span class="hljs-built_in">exec</span> -it &lt;å®¹å™¨åå­—&gt; /bin/bash
</code></pre>
<p>æ³¨æ„ï¼Œæœ‰çš„é•œåƒé‡Œé¢æ²¡æœ‰ bash å‘½ä»¤ï¼Œä¾‹å¦‚ nginxï¼Œå¯ä»¥å°† /bin/bash æ”¹ä¸º /bin/sh</p>
<p>ä»¥ä¸Šçš„çŸ¥è¯†ï¼Œè¶³å¤Ÿå‰ç«¯åº”ä»˜å¸¸è§çš„åœºæ™¯äº†ï¼Œé‡åˆ°é—®é¢˜æœç´¢ä¸€ä¸‹ï¼Œçœ‹æ‡‚ä¹Ÿä¸æ˜¯éš¾äº‹ã€‚å…¶å®å®¹å™¨çš„ç½‘ç»œï¼Œæ˜¯æ¯”è¾ƒç‰¹æ®Šçš„ï¼Œå› ä¸ºå®¹å™¨å®é™…ä¸Šçœ‹èµ·æ¥æ˜¯æœ‰è‡ªå·±ç‹¬ç«‹çš„æ–‡ä»¶ç³»ç»Ÿï¼Œç‹¬ç«‹çš„ç½‘ç»œï¼Œç‹¬ç«‹çš„è¿›ç¨‹çš„ï¼ˆä¹Ÿå°±æ˜¯åœ¨å®¹å™¨ä¸­ï¼Œä½ ä¼šçœ‹æ‡‚å®¹å™¨è¿›ç¨‹çš„ id æ˜¯ 1ï¼‰ç­‰ç­‰ã€‚</p>
<p>æ—¢ç„¶æœ‰è‡ªå·±ç‹¬ç«‹çš„ç½‘ç»œï¼Œé‚£ä¹ˆå®¹å™¨çš„ç½‘ç»œå¦‚ä½•è·Ÿå¤–ç•Œæ‰“é€šï¼ŒåŸç†åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿï¼ˆè¿™ä¸ªé—®é¢˜ç‰¹åˆ«é‡è¦ï¼Œæ— è®ºå¯¹äºä½ è‡ªå·±æœ¬åœ°è°ƒè¯•ï¼Œè¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒè§£å†³å®¹å™¨æ— æ³•è®¿é—®çš„é—®é¢˜ï¼‰</p>
<p>æ—¢ç„¶æœ‰è‡ªå·±ç‹¬ç«‹çš„æ–‡ä»¶ç³»ç»Ÿï¼Œé‚£ä¹ˆå®¹å™¨é”€æ¯ï¼Œå®¹å™¨é‡Œé¢çš„æ–‡ä»¶ä¹Ÿéšä¹‹é”€æ¯ï¼Œé‚£ä¹ˆå®¹å™¨å¦‚ä½•åšåˆ°å°†æ–‡ä»¶è·Ÿç‰©ç†æœºä¸Šçš„æ–‡ä»¶ç³»ç»Ÿå…±äº«çš„å‘¢ï¼Ÿ</p>
<h2 data-id="heading-22">ã€å»¶ä¼¸è¡¥å……ã€‘æ·±å…¥åŸç†3ï¼šdocker å®¹å™¨çš„åº•å±‚ä¸‰å¤§æ ¸å¿ƒæŠ€æœ¯</h2>
<p>ä¸‰å¤§æ ¸å¿ƒæŠ€æœ¯åˆ†åˆ«æ˜¯ namespaceã€Cgroup ä»¥åŠè”åˆæ–‡ä»¶ç³»ç»Ÿï¼Œè”åˆæ–‡ä»¶ç³»ç»Ÿä¸Šé¢å·²ç»è®²äº†ï¼Œç°åœ¨å°±å‰©ä¸‹ namespace å’Œ Cgroup äº†ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ pid namespace æ˜¯ä»€ä¹ˆã€‚</p>
<p>é¦–å…ˆå†æ¬¡å¼ºè°ƒï¼Œå®¹å™¨å°±æ˜¯ä¸€ä¸ªè¿›ç¨‹ã€‚ä¸¾ä¸ªä¾‹å­</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9caf1f5712394135bd6b369da0e82fdd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=IUHJUSoVcTJf%2FK2%2FPPFFPFMXH0A%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬é¦–å…ˆä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥è·å–åˆ°å®¹å™¨çš„è¿›ç¨‹ id ä¸º 2526</p>
<pre><code class="hljs language-bash" lang="bash">docker inspect &lt;å®¹å™¨ <span class="hljs-built_in">id</span>&gt; | grep Pid 
</code></pre>
<p>ç„¶åä½¿ç”¨ ps å‘½ä»¤æ¥è¿‡æ»¤å‡º 2526 è¿›ç¨‹</p>
<pre><code class="hljs language-perl" lang="perl">ps -ef | <span class="hljs-keyword">grep</span> <span class="hljs-number">2526</span>
</code></pre>
<p>å‘ç°ç¡®å®æœ‰å¯¹åº”çš„è¿›ç¨‹ã€‚</p>
<p>ä½†æ˜¯è·Ÿæ™®é€šè¿›ç¨‹ä¸ä¸€æ ·çš„æ˜¯ï¼Œå®¹å™¨çš„è¿›ç¨‹åˆ©ç”¨ namespace æŠ€æœ¯ï¼Œè®©æˆ‘ä»¬è¿›å…¥å®¹å™¨åï¼Œå‘ç°å®¹å™¨ä¸»è¿›ç¨‹çš„ pid æ˜¯ 1 ï¼Œè€Œä¸æ˜¯ 2526ã€‚ä¹Ÿå°±æ˜¯å®¹å™¨ä½¿ç”¨äº†"éšœçœ¼æ³•"ï¼Œæ¥è®©è‡ªå·±è·Ÿåˆ«çš„å®¹å™¨éƒ½éš”ç¦»å¼€ã€‚å°±æ‹¿è¿›ç¨‹éš”ç¦»æ¥è¯´ï¼Œå®¹å™¨æ˜¯å¦‚ä½•ä¿®æ”¹è¿›ç¨‹è§†å›¾çš„å‘¢ï¼Ÿå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0ce66bf43fd47d09fe3052a5b27d14c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=9tkQXP8lYTyx9Wi9GjGU5CD4vCU%3D" alt="" loading="lazy"/></p>
<p>å¦‚ä¸Šå›¾ï¼Œ1ã€2ã€3ã€4ã€5ã€6ã€7ã€8ã€9ã€10ï¼Œéƒ½æ˜¯åœ¨ç‰©ç†æœºæ“ä½œç³»ç»Ÿä¸Šçš„è¿›ç¨‹å·ï¼ˆPIDï¼‰ï¼Œè€Œè¿›å…¥å®¹å™¨åï¼ŒPID 8 æ˜¯å®¹å™¨çš„ä¸»è¿›ç¨‹ï¼Œlinux å°†å…¶ä¿®æ”¹ä¸ºè¿›ç¨‹å·ï¼ˆPIDï¼‰ä¸º 1ï¼Œå­è¿›ç¨‹ä¹ŸåŒæ ·ä¿®æ”¹ PIDï¼Œè¿™æ ·ä½ åœ¨å®¹å™¨é‡Œï¼Œçœ‹åˆ°ä¸»è¿›ç¨‹æ˜¯ PID 1ï¼Œä½†æ˜¯ä½ é€€å‡ºå®¹å™¨ï¼ŒæŸ¥çœ‹è¿™ä¸ªå®¹å™¨çš„è¿›ç¨‹å·ï¼Œå°±æ˜¯ 8ã€‚</p>
<p>namespace ä¸ä»…ä»…éš”ç¦»äº†è¿›ç¨‹çš„ pidï¼Œè¿˜åŒ…æ‹¬ç½‘ç»œã€ç”¨æˆ·ã€IPC ç­‰ç­‰ã€‚æ¥ç€æˆ‘ä»¬çœ‹çœ‹ Cgroup æ˜¯ä»€ä¹ˆã€‚</p>
<p>ä½ æƒ³æƒ³ï¼Œè™½ç„¶è§†å›¾å¯ä»¥æ”¹å˜ï¼Œä½†æ˜¯å´æ²¡æ³•é™åˆ¶è¿™ä¸ªå®¹å™¨å¯¹ cpu çš„ä½¿ç”¨ï¼Œæ‰€ä»¥æ˜¯æœ‰å¯èƒ½å•ä¸ªå®¹å™¨æŠŠ cpu è·‘æ»¡çš„ã€‚æ‰€ä»¥å¦‚æœèƒ½é™åˆ¶ cpuã€å†…å­˜çš„ä½¿ç”¨å°±æ›´å¥½äº†ï¼ŒCgroup å°±æ˜¯åšè¿™ä¸ªäº‹çš„ã€‚</p>
<p>Cgroup çš„åŸç†å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40a2e69605244305bc66a7e45fb5b267~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=9y8Zn7iHzfraJpWX37bPGDJoWfQ%3D" alt="" loading="lazy"/></p>
<p>Cgroup å¯¹ä¸åŒèµ„æºè¿›è¡Œäº†åˆ†ç»„ï¼Œä¾‹å¦‚ cpu æ€»å…±æ˜¯ 100%ï¼Œå‡è®¾åˆ†é…ç»™æŸä¸ªå®¹å™¨æ˜¯ 25%ï¼Œå½“ä½ è¿›å…¥å®¹å™¨ä¸­ï¼Œä½ çœ‹åˆ°çš„è‡ªå·± cpu æ€»å…±æ˜¯ 100% ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªå®¹å™¨é‡Œçš„ 100% æ˜¯å‡çš„ï¼Œå…¶å®æ˜¯ä»çœŸå®çš„ 25% é‡Œé¢å»åˆ†çš„ã€‚</p>
<p>Cgroup å¦‚ä½•æ“ä½œæ˜¯æœ‰å¯¹åº”çš„ linux å‘½ä»¤çš„ï¼Œè¿™é‡Œæˆ‘ä»¬å°±ä¸æ·±å…¥äº†ï¼Œå› ä¸ºæ€§ä»·æ¯”å¹¶ä¸é«˜ï¼Œç”¨å¥½ docker å°±å¯ä»¥äº†ã€‚</p>
<h2 data-id="heading-23">ã€å»¶ä¼¸è¡¥å……ã€‘æ·±å…¥åŸç†4ï¼šdocker å®¹å™¨ç½‘ç»œçš„ç§˜å¯†</h2>
<p>ä¸ºäº†æ›´é€šä¿—çš„è§£é‡Š docker çš„æ¡¥æ¥ç½‘ç»œï¼Œæˆ‘ä»¬å…ˆä»è®¡ç®—æœºç½‘ç»œåŸºæœ¬çš„çŸ¥è¯†è®²èµ·ï¼š</p>
<p>å¦‚ä¸‹å›¾ï¼Œåªéœ€è¦ä¸€æ ¹ç½‘çº¿ç›¸äº’è¿æ¥ï¼Œç„¶ååœ¨è®¡ç®—æœºä¸Šé…ç½®ä¸€ä¸‹è‡ªå·±çš„ ip åœ°å€ï¼ˆåœ¨ä¸€ä¸ªç½‘æ®µé‡Œï¼‰ï¼Œä¸¤å°è®¡ç®—æœºå°±å¯ä»¥ç›¸äº’é€šä¿¡äº†ã€‚ä¾‹å¦‚ A è®¡ç®—æœºçš„ ip æˆ‘ä»¬å†™æ­» ip åˆ°ç½‘å¡ï¼Œåœ°å€ä¸º 192.168.1.1/24ï¼ŒB è®¡ç®—æœºæ˜¯ 192.168.1.2/24 ï¼Œä»–ä»¬éƒ½æ˜¯ 192.168.1.xxx ç½‘æ®µã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a8d93afb2a4e41fcaab4fc1775deb8ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=sDm3sjgDlsFnfCwugXRdy%2B8RmjE%3D" alt="" loading="lazy"/></p>
<p>æœ‰äº›åŒå­¦å¯èƒ½ä¸ç†è§£ï¼Œä¸ºå•¥è¦åˆ†é… ip åœ°å€ï¼Ÿå› ä¸ºæˆ‘ä»¬å¾ˆå¤šé€šä¿¡åè®®æ˜¯åŸºäº ip åè®®çš„ï¼Œä¾‹å¦‚ httpï¼Œtcpã€‚æ‰€ä»¥å¿…é¡»åˆ†é… ip åœ°å€ï¼Œæ‰èƒ½è®©æ•°æ®åŒ…èµ°å‡ºç½‘å¡ã€‚æˆ‘ä»¬æ¥ç€èŠ:</p>
<p>ç°åœ¨æˆ‘ä»¬å¤šåŠ ä¸€äº›ç”µè„‘ï¼Œè¿™æ—¶å€™ä¸€æ ¹ç½‘çº¿è‚¯å®šå°±ä¸å¤Ÿäº†ï¼Œæˆ‘ä»¬å°±åŠ å…¥ä¸€ä¸ªäº¤æ¢æœºï¼ˆè™šæ‹Ÿäº¤æ¢æœºæ˜¯æœ‰ ip çš„ï¼Œä½†æ˜¯ç°å®ç”Ÿæ´»ä¸­çš„äº¤æ¢æœºæ˜¯æ²¡æœ‰ ipï¼‰ï¼Œå¦‚ä¸‹å›¾</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8329e75a78ee43bd83f814a96565e1e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=%2B7BU4vfRoF7tpIT3h7fF8fwW2OE%3D" alt="" loading="lazy"/></p>
<p>å‡è®¾äº¤æ¢æœºçš„ ip æ˜¯ 192.168.1.1/24ï¼Œè¿™ä¸ªäº¤æ¢æœºè¿˜å¯ä»¥è‡ªåŠ¨åˆ†é… ipï¼ˆdhcpåè®®ï¼‰ï¼Œåªè¦è®¡ç®—æœºè¿æ¥äº¤æ¢æœºï¼Œå°±ä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªä¸é‡å¤çš„ ip åœ°å€ï¼Œé‚£ä¹ˆå¤šå°è®¡ç®—æœºäº’ç›¸é€šä¿¡å°±è§£å†³äº†ã€‚</p>
<p>å…¶å® docker å†…éƒ¨é»˜è®¤æœ‰ä¸€ä¸ªå«åš docker0 çš„ç½‘æ¡¥ï¼Œè¿™ä¸ªç½‘æ¡¥å·¥ä½œæœºåˆ¶å°±è·Ÿæˆ‘ä»¬ä¸Šé¢è¯´çš„äº¤æ¢æœºç±»ä¼¼ã€‚è€Œå®¹å™¨é»˜è®¤æƒ…å†µä¸‹ï¼Œä¼šè¿æ¥ docker 0 ç½‘æ¡¥ã€‚å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32d6362471ac450492a7a8be0f5f9368~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=HHoBlHiBNSVLrarn8RgpPDg8AmE%3D" alt="" loading="lazy"/></p>
<p><strong>è¿™æ ·å®¹å™¨ä¹‹é—´äº’é€šçš„é—®é¢˜æˆ‘ä»¬å°±è§£å†³äº†ã€‚</strong></p>
<p>é‚£ä¹ˆå¦‚ä½•è§£å†³å®¹å™¨è·Ÿå¤–éƒ¨ç½‘ç»œé€šä¿¡çš„é—®é¢˜ï¼Œä¾‹å¦‚æŸä¸ªå®¹å™¨å»è®¿é—®å¾®ä¿¡ç™»å½•ã€‚</p>
<p>å¦‚ä¸‹å›¾ï¼Œå…¶å® docker0 æ˜¯è¿æ¥åˆ°æˆ‘ä»¬çœŸå®ç‰©ç†æœºçš„ç½‘å¡ eth0 æ¥è½¬å‘æ•°æ®ï¼Œä»è€Œè®©å®¹å™¨çš„æ•°æ®é€šè¿‡ -&gt; docker0 -&gt; eth0 å‘é€åˆ°è®¡ç®—æœºå¤–éƒ¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/619e592a6b874215b0bcb41f17da744f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=PZPhQEYZ91jX7fsMbKKyTY4fADw%3D" alt="" loading="lazy"/></p>
<p>è¿™é‡Œåˆæœ‰é—®é¢˜äº†ï¼Œå®¹å™¨å†…éƒ¨çš„ ip å¾€å¾€æ˜¯ä¸€ä¸ªå†…éƒ¨åœ°å€ï¼Œä»€ä¹ˆæ˜¯å†…éƒ¨åœ°å€ï¼Ÿä½ ä¼šçœ‹åˆ°ï¼Œæˆ‘ä»¬å‰ç«¯å¯åŠ¨å‰ç«¯åº”ç”¨ï¼Œç»å¸¸çœ‹åˆ°å¯åŠ¨çš„ ip åœ°å€æ˜¯ 192.168.x.xï¼Œä½ å›åˆ°å®¶å¯åŠ¨å‰ç«¯åº”ç”¨åˆ†é…çš„åœ°å€å±…ç„¶æ˜¯ä¸€æ ·çš„ 192.168.x.xã€‚æˆ‘ä»¬çŸ¥é“ ip åœ°å€å¿…é¡»å…¨ç½‘å”¯ä¸€ï¼Œä¸ºå•¥åœ¨å®¶é‡Œåˆ†é…çš„ ip å’Œåœ¨å…¬å¸åˆ†é…çš„ ip ä¸€æ ·å‘¢ï¼Ÿ</p>
<p>è¿™æ˜¯å› ä¸º ip åœ°å€è§„å®šäº†ä¸€äº›åªèƒ½åœ¨å†…ç½‘é€šè®¯çš„åœ°å€ï¼Œä¸èƒ½ç”¨åœ¨å¤–ç½‘ï¼Œä¾‹å¦‚ 192.168.x.x å°±æ˜¯ä¸ä¼šç”¨åœ¨å¤–éƒ¨ç½‘ç»œè®¿é—®çš„ ip åœ°å€ã€‚</p>
<p>è¿™å¯¹äº docker å®¹å™¨è®¿é—®å¤–éƒ¨ç½‘ç»œå°±æœ‰é—®é¢˜äº†ï¼Œä½ æƒ³æƒ³ dockerå®¹å™¨ -&gt; docker0 -&gt; eth0 å°†æ•°æ®åŒ…ä¼ ç»™äº†å¾®ä¿¡æœåŠ¡å™¨ï¼Œå¾®ä¿¡æœåŠ¡ä¸èƒ½è¯´æˆ‘å›ä¼ çš„ ip åœ°å€æ˜¯ dockerå®¹å™¨çš„ ipï¼Œå› ä¸º dockerå®¹å™¨çš„ ip æ˜¯å†…éƒ¨åœ°å€ï¼Œä¸èƒ½åœ¨ç½‘ç»œä¸Šä¼ è¾“ã€‚</p>
<p>è¿™é‡Œåˆæ¶‰åŠä¸€ä¸ªæ¦‚å¿µï¼Œå« nat è½¬æ¢ï¼Œä¹Ÿå°±æ˜¯ docker å®¹å™¨å°†æ•°æ®åŒ…ä¼ ç»™ eth0 çš„æ—¶å€™ï¼Œä¼šæ”¹å†™è‡ªå·±æ•°æ®åŒ…å‘é€ç«¯çš„ ip åœ°å€ä¸º eth0 çš„å…¬ç½‘åœ°å€ã€‚</p>
<p><strong>è¿™æ ·å°±è§£å†³äº†å®¹å™¨è®¿é—®å¤–éƒ¨ç½‘ç»œçš„é—®é¢˜äº†ã€‚</strong></p>
<p>é—®é¢˜åˆæ¥äº†å“¦ï¼Œé‚£è¿”å›ç»™ eth0 çš„æ•°æ®ï¼Œå¦‚ä½•çŸ¥é“è¿™ä¸ªæ•°æ®åŒ…æœ€ç»ˆè½¬å‘ç»™å“ªä¸ªå®¹å™¨å‘¢ï¼Ÿè¿™é‡Œæ¶‰åŠåˆ°ä¸€ä¸ªå«åš iptables çš„å·¥å…·ï¼ˆNAT è½¬æ¢ä¹Ÿæ˜¯ä¾èµ–å®ƒï¼‰ï¼Œå®ƒå¯ä»¥è®°å½•è½¬å‘è§„åˆ™ï¼Œä¾‹å¦‚å¦‚æœè¿™ä¸ªæ•°æ®æ˜¯ä» 80 ç«¯å£å‡ºå»çš„ï¼Œé‚£ä¹ˆè¿”å›çš„æ—¶å€™ï¼Œå°±è¿”å›ç»™ A å®¹å¯¹åº”çš„å†…éƒ¨ ipã€‚</p>
<h2 data-id="heading-24">ã€å»¶ä¼¸è¡¥å……ã€‘æ·±å…¥åŸç†5ï¼šdocker å®¹å™¨æ–‡ä»¶éš”ç¦»å’Œå…±äº«çš„ç§˜å¯†</h2>
<p><strong>æ–‡ä»¶éš”ç¦»</strong></p>
<p>docker å®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿæ˜¯è·Ÿå®¿ä¸»æœºéš”ç¦»çš„ï¼Œåœ¨ docker é‡Œï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°ä¸€ä»½ç‹¬ç«‹çš„æ–‡ä»¶ç³»ç»Ÿã€‚linux å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ</p>
<p>å®é™…ä¸Š linux ä¹Ÿæ˜¯ç”¨äº†éšœçœ¼æ³•åšåˆ°çš„ï¼Œå¦‚ä¸‹å›¾ï¼Œé¦–å…ˆå‡è®¾ä¸‹å›¾æ˜¯æ­£å¸¸çš„æŸå° linux æœºå™¨çš„ç›®å½•ç»“æ„ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2ba4a7f3e82450689860ceac12ac9a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=lVn%2Fidbfvt6nXwvpv6%2BgosHvcVs%3D" alt="" loading="lazy"/></p>
<p>ç„¶åæˆ‘ä»¬å¸Œæœ› docker å®¹å™¨è·Ÿ joe ç›®å½•ï¼ˆæœ€å³è¾¹æœ€åä¸€ä¸ªç›®å½•ï¼‰æ‹¿æ¥ä½œä¸ºå®¹å™¨çš„æ ¹ç›®å½•ï¼Œä½¿ç”¨ linux çš„ Mount Namespac åŠŸèƒ½ + chroot å‘½ä»¤ï¼Œç»“æœå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/224342bce84c4d8f808c3cdcf12aa387~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853776&amp;x-signature=mzAa52GcFrI1Yv92LJOZUEVqALw%3D" alt="" loading="lazy"/></p>
<p>å®¹å™¨çš„æ ¹ç›®å½•ï¼ŒæŒ‚è½½åˆ°äº†å®¿ä¸»æœºçš„ joe ç›®å½•ã€‚ç”±äº Mount Namespace æŠ€æœ¯çš„ç‰¹æ€§ï¼Œè¿™ä¸ªå®¹å™¨çš„æ ¹ç›®å½•å¯¹äºå®¿ä¸»æœºæ˜¯çœ‹ä¸è§çš„ã€‚</p>
<p>è€Œè¿™åœ¨æŸäº›æƒ…å†µä¸‹ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚æ¯”å¦‚æ•°æ®åº“æ–‡ä»¶ï¼Œæˆ‘ä»¬æƒ³ç•™åœ¨å®¿ä¸»æœºä¸Šï¼Œè¿™æ ·é‡å¯å®¹å™¨çš„æ—¶å€™ï¼Œä¾ç„¶ä¿ç•™äº†æ•°æ®åº“çš„æ•°æ®ã€‚</p>
<p>è€Œè¿™é‡Œè¦ä½¿ç”¨åˆ°çš„æŒ‚è½½æŠ€æœ¯ï¼Œå°±æ˜¯Linuxçš„<strong>ç»‘å®šæŒ‚è½½ï¼ˆbind mountï¼‰æœºåˆ¶</strong>ã€‚å®ƒçš„ä¸»è¦ä½œç”¨å°±æ˜¯ï¼Œå…è®¸ä½ å°†ä¸€ä¸ªç›®å½•æˆ–è€…æ–‡ä»¶ï¼Œè€Œä¸æ˜¯æ•´ä¸ªè®¾å¤‡ï¼ŒæŒ‚è½½åˆ°ä¸€ä¸ªæŒ‡å®šçš„ç›®å½•ä¸Šã€‚å¹¶ä¸”ï¼Œè¿™æ—¶ä½ åœ¨è¯¥æŒ‚è½½ç‚¹ä¸Šè¿›è¡Œçš„ä»»ä½•æ“ä½œï¼Œåªæ˜¯å‘ç”Ÿåœ¨è¢«æŒ‚è½½çš„ç›®å½•æˆ–è€…æ–‡ä»¶ä¸Šï¼Œè€ŒåŸæŒ‚è½½ç‚¹çš„å†…å®¹åˆ™ä¼šè¢«éšè—èµ·æ¥ä¸”ä¸å—å½±å“ã€‚</p>
<p><strong>æ–‡ä»¶å…±äº«</strong></p>
<p>ç”±äºå®¹å™¨çš„ç‰¹æ€§ï¼Œå¦‚æœå®¹å™¨åˆ é™¤ï¼Œé‚£ä¹ˆå®¹å™¨é‡Œçš„æ•°æ®ä¹Ÿä¼šåˆ é™¤ï¼Œä¹‹å‰çš„æŒ‚è½½åŠŸèƒ½ä¹Ÿä¼šè§£é™¤ã€‚å¯æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›ä¿ç•™å®¹å™¨é‡Œçš„æ•°æ®ï¼Œä¾‹å¦‚æ•°æ®åº“ï¼Œæ–¹ä¾¿å†ä¸‹ä¸€æ¬¡å¯åŠ¨é•œåƒçš„æ—¶å€™èƒ½å…±äº«ä¹‹å‰å®¹å™¨çš„æ•°æ®ã€‚</p>
<p>è¿™ä¸ªåŠŸèƒ½åœ¨ docker å«åšç»‘å®š <strong>Volume åŠŸèƒ½ã€‚</strong> è¿™ä¸ªåŠŸèƒ½çš„å®ç°å…¶å®å¾ˆç®€å•ï¼Œä¹‹é—´æˆ‘ä»¬è®²çš„ç»‘å®šæŒ‚è½½ï¼Œå…¶å®éœ€è¦åˆ†ä¸ºä¸¤æ­¥ï¼Œç¬¬ä¸€æ­¥å¼€å¯ Mount Namespaceï¼Œæ­¤æ—¶å®¹å™¨å†…éƒ¨ä»ç„¶å¯ä»¥çœ‹åˆ°å®¿ä¸»æœºçš„ç›®å½•ï¼Œä½†æ˜¯å®¿ä¸»æœºçœ‹ä¸åˆ°å®¹å™¨çš„ç›®å½•ï¼Œç¬¬äºŒæ­¥æ‰§è¡Œç±»ä¼¼ chroot å‘½ä»¤ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºæ‰§è¡Œåï¼Œå®¹å™¨å°±çœ‹ä¸åˆ°å®¿ä¸»æœºç›®å½•äº†ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨ç¬¬ä¸€æ­¥ä¹‹å‰ï¼ŒæŠŠ Volume æŒ‡å®šçš„å®¿ä¸»æœºç›®å½•ï¼ˆæ¯”å¦‚/homeç›®å½•ï¼‰ï¼ŒæŒ‚è½½åˆ°æŒ‡å®šçš„å®¹å™¨ç›®å½•ï¼ˆæ¯”å¦‚/testç›®å½•ï¼‰åœ¨å®¿ä¸»æœºä¸Šå¯¹åº”çš„ç›®å½•ä¸Šï¼Œè¿™ä¸ª Volume çš„æŒ‚è½½å·¥ä½œå°±å®Œæˆäº†ã€‚</p>
<h2 data-id="heading-25">æœ€åè¡¥å……</h2>
<p>è¡¥å……ï¼Œä¹‹å‰å‰ç«¯éƒ¨ç½²çš„ dockerfile ä¸€èˆ¬éƒ½ä¼šç”¨åˆ†é˜¶æ®µæ„å»ºçš„æ–¹æ³•ï¼Œé¦–å…ˆå€ŸåŠ© node.js é•œåƒæ‰“åŒ…å‰ç«¯åº”ç”¨ï¼Œç„¶åå°†æ‰“åŒ…å¥½çš„å†…å®¹æ”¾å…¥ nginx é•œåƒä¸­ï¼Œæœ€åå€ŸåŠ© nginx ä½œä¸º web æœåŠ¡å™¨ï¼Œæ¥è®©å¤–ç½‘è®¿é—®ã€‚æˆ‘ä»¬ç®€å•å®ç°ä¸€ä¸‹ï¼Œå¯ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Use the official Node.js runtime as the base image</span>
FROM node:20-slim as build

<span class="hljs-comment"># Set the working directory in the container</span>
WORKDIR /app

<span class="hljs-comment"># Copy package.json and package-lock.json to the working directory</span>
COPY package*.json ./

<span class="hljs-comment"># Install dependencies</span>
RUN npm install

<span class="hljs-comment"># Copy the entire application code to the container</span>
COPY . .

<span class="hljs-comment"># Build the React app for production</span>
RUN npm run build

<span class="hljs-comment"># Use Nginx as the production server</span>
FROM nginx:alpine

<span class="hljs-comment"># Copy the built React app to Nginx's web server directory</span>
COPY --from=build /app/build /usr/share/nginx/html

<span class="hljs-comment"># Expose port 80 for the Nginx server</span>
EXPOSE 80

<span class="hljs-comment"># Start Nginx when the container runs</span>
CMD [<span class="hljs-string">"nginx"</span>, <span class="hljs-string">"-g"</span>, <span class="hljs-string">"daemon off;"</span>]
</code></pre>
<p>éœ€è¦æ³¨æ„çš„æ˜¯</p>
<pre><code class="hljs language-bash" lang="bash">COPY --from=build /app/build /usr/share/nginx/html
</code></pre>
<p>--from build , è¿™ä¸ª build å°±æ˜¯ <code>FROM node:20-slim as build</code> ä¸­ï¼Œnode.js é•œåƒçš„åˆ«åã€‚æ„æ€æ˜¯æŠŠè¿™ä¸ªé•œåƒä¸­ /app/build ç›®å½•ä¸‹çš„æ–‡ä»¶å¤åˆ¶åˆ° nginx:alpine é•œåƒçš„ /usr/share/nginx/html æ–‡ä»¶å¤¹ä¸‹ã€‚</p>
<h2 data-id="heading-26">æ¬¢è¿åŠ å…¥äº¤æµç¾¤</h2>
<p>æ¬¢è¿å¤§å®¶ä¸€èµ·è¿›ç¾¤è®¨è®ºå‰ç«¯å…¨æ ˆæŠ€æœ¯å’Œ ai agent ï¼Œä¸€èµ·è¿›æ­¥ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Antigravityï¼šä¸‹ä¸€ä»£ AI ç¼–ç¨‹åŠ©æ‰‹å®Œå…¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7581423932612984872</link>    <guid>https://juejin.cn/post/7581423932612984872</guid>    <pubDate>2025-12-09T02:53:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581423932612984872" data-draft-id="7581386627676913704" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Antigravityï¼šä¸‹ä¸€ä»£ AI ç¼–ç¨‹åŠ©æ‰‹å®Œå…¨æŒ‡å—"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-09T02:53:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€åªçˆ±åƒç³–çš„å°ç¾Š"/> <meta itemprop="url" content="https://juejin.cn/user/1865251025859358"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Antigravityï¼šä¸‹ä¸€ä»£ AI ç¼–ç¨‹åŠ©æ‰‹å®Œå…¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1865251025859358/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€åªçˆ±åƒç³–çš„å°ç¾Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T02:53:13.000Z" title="Tue Dec 09 2025 02:53:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Antigravityï¼šä¸‹ä¸€ä»£ AI ç¼–ç¨‹åŠ©æ‰‹å®Œå…¨æŒ‡å—</h2>
<blockquote>
<p>Antigravity æ˜¯ç”± Google DeepMind å›¢é˜Ÿå¼€å‘çš„å¼ºå¤§ AI ç¼–ç¨‹åŠ©æ‰‹ï¼Œä¸ºå¼€å‘è€…æä¾›æ™ºèƒ½åŒ–çš„ä»£ç ç¼–å†™ã€è°ƒè¯•å’Œä¼˜åŒ–ä½“éªŒã€‚</p>
</blockquote>
<h3 data-id="heading-1">ç®€ä»‹</h3>
<p>Antigravity ä¸ä»…ä»…æ˜¯ä¸€ä¸ªä»£ç è¡¥å…¨å·¥å…·ï¼Œå®ƒæ˜¯ä¸€ä¸ªèƒ½å¤Ÿç†è§£ä½ çš„æ„å›¾ã€ä¸»åŠ¨è§£å†³é—®é¢˜çš„æ™ºèƒ½ç¼–ç¨‹ä¼™ä¼´ã€‚é€šè¿‡å…ˆè¿›çš„ AI æŠ€æœ¯ï¼ŒAntigravity å¯ä»¥å¸®åŠ©ä½ å®Œæˆä»é¡¹ç›®è§„åˆ’åˆ°ä»£ç å®ç°ã€æµ‹è¯•éªŒè¯çš„å®Œæ•´å¼€å‘æµç¨‹ã€‚</p>
<h3 data-id="heading-2">æ ¸å¿ƒç‰¹æ€§</h3>
<h4 data-id="heading-3">1. æ™ºèƒ½ä»»åŠ¡ç®¡ç†</h4>
<p>Antigravity é‡‡ç”¨ä»»åŠ¡é©±åŠ¨çš„å·¥ä½œæ–¹å¼ï¼Œå°†å¤æ‚çš„å¼€å‘ä»»åŠ¡åˆ†è§£ä¸ºå¯ç®¡ç†çš„å­ä»»åŠ¡ï¼š</p>
<ul>
<li><strong>è‡ªåŠ¨ä»»åŠ¡åˆ†è§£</strong>ï¼šå°†ç”¨æˆ·éœ€æ±‚è‡ªåŠ¨åˆ†è§£ä¸ºå…·ä½“çš„å®æ–½æ­¥éª¤</li>
<li><strong>è¿›åº¦è¿½è¸ª</strong>ï¼šå®æ—¶æ˜¾ç¤ºä»»åŠ¡æ‰§è¡ŒçŠ¶æ€å’Œå®Œæˆè¿›åº¦</li>
<li><strong>åŠ¨æ€è°ƒæ•´</strong>ï¼šæ ¹æ®å®é™…æƒ…å†µæ™ºèƒ½è°ƒæ•´æ‰§è¡Œè®¡åˆ’</li>
</ul>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># ç¤ºä¾‹ï¼šä»»åŠ¡è‡ªåŠ¨åˆ†è§£</span>
ç”¨æˆ·éœ€æ±‚ï¼šæ·»åŠ ç”¨æˆ·ç™»å½•åŠŸèƒ½

Antigravity è‡ªåŠ¨ç”Ÿæˆï¼š
<span class="hljs-bullet">-</span> [ ] è®¾è®¡ç™»å½•é¡µé¢ UI
<span class="hljs-bullet">-</span> [ ] å®ç°å‰ç«¯è¡¨å•éªŒè¯
<span class="hljs-bullet">-</span> [ ] åˆ›å»ºåç«¯ API æ¥å£
<span class="hljs-bullet">-</span> [ ] æ·»åŠ èº«ä»½è®¤è¯é€»è¾‘
<span class="hljs-bullet">-</span> [ ] ç¼–å†™å•å…ƒæµ‹è¯•
<span class="hljs-bullet">-</span> [ ] è¿›è¡Œé›†æˆæµ‹è¯•
</code></pre>
<h4 data-id="heading-4">2. ä¸‰é˜¶æ®µå·¥ä½œæ¨¡å¼</h4>
<p>Antigravity é‡‡ç”¨ç§‘å­¦çš„ä¸‰é˜¶æ®µå·¥ä½œæµç¨‹ï¼Œç¡®ä¿ä»£ç è´¨é‡ï¼š</p>
<h5 data-id="heading-5">PLANNINGï¼ˆè§„åˆ’é˜¶æ®µï¼‰</h5>
<ul>
<li>æ·±å…¥ç†è§£éœ€æ±‚ï¼Œåˆ†æä»£ç åº“ç»“æ„</li>
<li>ç”Ÿæˆè¯¦ç»†çš„å®æ–½è®¡åˆ’ï¼ˆimplementation_plan.mdï¼‰</li>
<li>è¯†åˆ«æ½œåœ¨é£é™©å’ŒæŠ€æœ¯éš¾ç‚¹</li>
<li>ç­‰å¾…ç”¨æˆ·å®¡æ ¸æ‰¹å‡†åå†æ‰§è¡Œ</li>
</ul>
<h5 data-id="heading-6">EXECUTIONï¼ˆæ‰§è¡Œé˜¶æ®µï¼‰</h5>
<ul>
<li>æŒ‰ç…§è®¡åˆ’å®æ–½ä»£ç ä¿®æ”¹</li>
<li>è‡ªåŠ¨å¤„ç†æ–‡ä»¶ä¾èµ–å…³ç³»</li>
<li>ä¿æŒä»£ç é£æ ¼ä¸€è‡´æ€§</li>
<li>å‘ç°é—®é¢˜æ—¶å¯è¿”å› PLANNING é˜¶æ®µ</li>
</ul>
<h5 data-id="heading-7">VERIFICATIONï¼ˆéªŒè¯é˜¶æ®µï¼‰</h5>
<ul>
<li>è¿è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•</li>
<li>éªŒè¯åŠŸèƒ½æ­£ç¡®æ€§</li>
<li>ç”Ÿæˆæ¼”ç¤ºæ–‡æ¡£ï¼ˆwalkthrough.mdï¼‰</li>
<li>æä¾›å¯è§†åŒ–çš„éªŒè¯ç»“æœ</li>
</ul>
<h4 data-id="heading-8">3. å¼ºå¤§çš„ä»£ç ç¼–è¾‘èƒ½åŠ›</h4>
<h5 data-id="heading-9">ç²¾ç¡®çš„ä»£ç ä¿®æ”¹</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Antigravity å¯ä»¥ç²¾ç¡®å®šä½å¹¶ä¿®æ”¹ä»£ç </span>
<span class="hljs-comment">// ä½¿ç”¨ replace_file_content è¿›è¡Œå•å—ä¿®æ”¹</span>
<span class="hljs-comment">// ä½¿ç”¨ multi_replace_file_content è¿›è¡Œå¤šå¤„ä¿®æ”¹</span>

<span class="hljs-comment">// ç¤ºä¾‹ï¼šæ·»åŠ æ–°åŠŸèƒ½</span>
<span class="hljs-comment">// åŸä»£ç </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleLogin</span>(<span class="hljs-params">username: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(username);
}

<span class="hljs-comment">// Antigravity ä¿®æ”¹å</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleLogin</span>(<span class="hljs-params">username: <span class="hljs-built_in">string</span>, password: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">if</span> (!username || !password) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'ç”¨æˆ·åå’Œå¯†ç ä¸èƒ½ä¸ºç©º'</span>);
  }
  
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">authenticateUser</span>(username, password);
}
</code></pre>
<h5 data-id="heading-10">æ™ºèƒ½ä»£ç åˆ†æ</h5>
<ul>
<li>è‡ªåŠ¨è¯†åˆ«ä»£ç ç»“æ„å’Œä¾èµ–å…³ç³»</li>
<li>ç†è§£å‡½æ•°ã€ç±»ã€æ¨¡å—çš„ä½œç”¨åŸŸ</li>
<li>æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€</li>
</ul>
<h4 data-id="heading-11">4. æ–‡ä»¶ç³»ç»Ÿæ“ä½œ</h4>
<p>Antigravity æä¾›å®Œæ•´çš„æ–‡ä»¶æ“ä½œèƒ½åŠ›ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥æ‰¾æ–‡ä»¶</span>
find_by_name - æœç´¢ç‰¹å®šæ–‡ä»¶æˆ–ç›®å½•

<span class="hljs-comment"># æŸ¥çœ‹æ–‡ä»¶</span>
view_file - æŸ¥çœ‹æ–‡ä»¶å†…å®¹
view_file_outline - æŸ¥çœ‹æ–‡ä»¶ç»“æ„å¤§çº²
view_code_item - æŸ¥çœ‹ç‰¹å®šå‡½æ•°æˆ–ç±»

<span class="hljs-comment"># æœç´¢å†…å®¹</span>
grep_search - åœ¨æ–‡ä»¶ä¸­æœç´¢ç‰¹å®šå†…å®¹

<span class="hljs-comment"># ç¼–è¾‘æ–‡ä»¶</span>
write_to_file - åˆ›å»ºæ–°æ–‡ä»¶
replace_file_content - ä¿®æ”¹ç°æœ‰æ–‡ä»¶
multi_replace_file_content - æ‰¹é‡ä¿®æ”¹
</code></pre>
<h4 data-id="heading-12">5. å‘½ä»¤è¡Œé›†æˆ</h4>
<p>ç›´æ¥åœ¨å·¥ä½œæµä¸­æ‰§è¡Œç»ˆç«¯å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Antigravity å¯ä»¥æ‰§è¡Œå„ç§å‘½ä»¤</span>
npm install          <span class="hljs-comment"># å®‰è£…ä¾èµ–</span>
npm run dev         <span class="hljs-comment"># å¯åŠ¨å¼€å‘æœåŠ¡å™¨</span>
npm <span class="hljs-built_in">test</span>            <span class="hljs-comment"># è¿è¡Œæµ‹è¯•</span>
git status          <span class="hljs-comment"># æŸ¥çœ‹ Git çŠ¶æ€</span>
</code></pre>
<h4 data-id="heading-13">6. æµè§ˆå™¨è‡ªåŠ¨åŒ–</h4>
<p>æ”¯æŒæµè§ˆå™¨æ“ä½œå’Œæµ‹è¯•ï¼š</p>
<ul>
<li>è‡ªåŠ¨æ‰“å¼€ç½‘é¡µå¹¶è¿›è¡Œäº¤äº’</li>
<li>æ•è·å±å¹•æˆªå›¾å’Œå½•åˆ¶è§†é¢‘</li>
<li>éªŒè¯ UI åŠŸèƒ½å’Œç”¨æˆ·ä½“éªŒ</li>
<li>ç”Ÿæˆå¯è§†åŒ–çš„æµ‹è¯•æŠ¥å‘Š</li>
</ul>
<h4 data-id="heading-14">7. AI å›¾åƒç”Ÿæˆ</h4>
<p>å†…ç½®å›¾åƒç”Ÿæˆèƒ½åŠ›ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¸ºä½ çš„é¡¹ç›®ç”Ÿæˆæ‰€éœ€çš„å›¾åƒèµ„æº</span>
<span class="hljs-title function_">generate_image</span>({
  <span class="hljs-attr">prompt</span>: <span class="hljs-string">"ç°ä»£åŒ–çš„ç™»å½•é¡µé¢èƒŒæ™¯å›¾ï¼Œç§‘æŠ€æ„Ÿï¼Œè“è‰²æ¸å˜"</span>,
  <span class="hljs-attr">name</span>: <span class="hljs-string">"login_bg"</span>
})
</code></pre>
<h3 data-id="heading-15">ä½¿ç”¨æŒ‡å—</h3>
<h4 data-id="heading-16">å¿«é€Ÿå¼€å§‹</h4>
<h5 data-id="heading-17">1. åŸºç¡€ä½¿ç”¨</h5>
<p>åªéœ€ç”¨è‡ªç„¶è¯­è¨€æè¿°ä½ çš„éœ€æ±‚ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-string">"å¸®æˆ‘åˆ›å»ºä¸€ä¸ª React ç»„ä»¶ï¼Œç”¨äºæ˜¾ç¤ºç”¨æˆ·ä¸ªäººä¿¡æ¯"</span>
</code></pre>
<p>Antigravity ä¼šè‡ªåŠ¨ï¼š</p>
<ul>
<li>åˆ†æéœ€æ±‚</li>
<li>åˆ›å»ºç»„ä»¶æ–‡ä»¶</li>
<li>ç¼–å†™ä»£ç </li>
<li>æ·»åŠ æ ·å¼</li>
<li>ç”Ÿæˆç¤ºä¾‹ç”¨æ³•</li>
</ul>
<h5 data-id="heading-18">2. å¤æ‚é¡¹ç›®å¼€å‘</h5>
<p>å¯¹äºå¤æ‚ä»»åŠ¡ï¼ŒAntigravity ä¼šè¿›å…¥ä»»åŠ¡æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-string">"æˆ‘æƒ³ä¸ºç½‘ç«™æ·»åŠ ä¸€ä¸ªåšå®¢ç³»ç»Ÿï¼ŒåŒ…æ‹¬æ–‡ç« åˆ—è¡¨ã€è¯¦æƒ…é¡µå’Œè¯„è®ºåŠŸèƒ½"</span>
</code></pre>
<p>Antigravity çš„å·¥ä½œæµç¨‹ï¼š</p>
<ol>
<li>
<p><strong>PLANNING é˜¶æ®µ</strong></p>
<ul>
<li>åˆ›å»º <code>implementation_plan.md</code></li>
<li>åˆ—å‡ºéœ€è¦ä¿®æ”¹çš„æ–‡ä»¶</li>
<li>è¯´æ˜æŠ€æœ¯æ–¹æ¡ˆ</li>
<li>è¯·æ±‚ç”¨æˆ·å®¡æ ¸</li>
</ul>
</li>
<li>
<p><strong>EXECUTION é˜¶æ®µ</strong></p>
<ul>
<li>åˆ›å»ºè·¯ç”±é…ç½®</li>
<li>å®ç°æ–‡ç« åˆ—è¡¨ç»„ä»¶</li>
<li>å®ç°æ–‡ç« è¯¦æƒ…ç»„ä»¶</li>
<li>æ·»åŠ è¯„è®ºç³»ç»Ÿ</li>
<li>é…ç½® API æ¥å£</li>
</ul>
</li>
<li>
<p><strong>VERIFICATION é˜¶æ®µ</strong></p>
<ul>
<li>è¿è¡Œå¼€å‘æœåŠ¡å™¨</li>
<li>æµ‹è¯•å„ä¸ªåŠŸèƒ½</li>
<li>ç”Ÿæˆ <code>walkthrough.md</code></li>
<li>æä¾›æˆªå›¾å’Œå½•å±</li>
</ul>
</li>
</ol>
<h4 data-id="heading-19">é«˜çº§æŠ€å·§</h4>
<h5 data-id="heading-20">1. æä¾›ä¸Šä¸‹æ–‡ä¿¡æ¯</h5>
<p>ä¸ºäº†è·å¾—æ›´å¥½çš„ç»“æœï¼Œä½ å¯ä»¥ï¼š</p>
<pre><code class="hljs language-css" lang="css">"å‚è€ƒç°æœ‰çš„ <span class="hljs-selector-tag">Header</span> ç»„ä»¶çš„æ ·å¼ï¼Œåˆ›å»ºä¸€ä¸ª <span class="hljs-selector-tag">Footer</span> ç»„ä»¶"
</code></pre>
<p>Antigravity ä¼šè‡ªåŠ¨ï¼š</p>
<ul>
<li>æŸ¥æ‰¾ Header ç»„ä»¶</li>
<li>åˆ†æå…¶æ ·å¼å’Œç»“æ„</li>
<li>åˆ›å»ºé£æ ¼ä¸€è‡´çš„ Footer ç»„ä»¶</li>
</ul>
<h5 data-id="heading-21">2. è¿­ä»£å¼å¼€å‘</h5>
<pre><code class="hljs language-arduino" lang="arduino">ç”¨æˆ·ï¼š<span class="hljs-string">"åˆ›å»ºä¸€ä¸ªè®¡æ•°å™¨ç»„ä»¶"</span>
Antigravityï¼š[åˆ›å»ºåŸºç¡€ç»„ä»¶]

ç”¨æˆ·ï¼š<span class="hljs-string">"æ·»åŠ é‡ç½®æŒ‰é’®"</span>
Antigravityï¼š[åœ¨ç°æœ‰ç»„ä»¶ä¸Šæ·»åŠ åŠŸèƒ½]

ç”¨æˆ·ï¼š<span class="hljs-string">"ä½¿ç”¨ Redux ç®¡ç†çŠ¶æ€"</span>
Antigravityï¼š[é‡æ„ä¸ºä½¿ç”¨ Redux]
</code></pre>
<h5 data-id="heading-22">3. ä»£ç å®¡æŸ¥å’Œä¼˜åŒ–</h5>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-string">"è¯·å®¡æŸ¥ UserProfile.tsx æ–‡ä»¶ï¼Œä¼˜åŒ–æ€§èƒ½å¹¶æ·»åŠ é”™è¯¯å¤„ç†"</span>
</code></pre>
<p>Antigravity ä¼šï¼š</p>
<ul>
<li>åˆ†æä»£ç è´¨é‡</li>
<li>è¯†åˆ«æ€§èƒ½ç“¶é¢ˆ</li>
<li>æ·»åŠ é”™è¯¯è¾¹ç•Œ</li>
<li>ä¼˜åŒ–æ¸²æŸ“é€»è¾‘</li>
<li>æä¾›æ”¹è¿›å»ºè®®</li>
</ul>
<h5 data-id="heading-23">4. è°ƒè¯•å’Œé—®é¢˜ä¿®å¤</h5>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-string">"ç™»å½•åŠŸèƒ½æœ‰é—®é¢˜ï¼Œç”¨æˆ·ç‚¹å‡»æäº¤æŒ‰é’®åæ²¡æœ‰ååº”"</span>
</code></pre>
<p>Antigravity ä¼šï¼š</p>
<ul>
<li>æ£€æŸ¥ç›¸å…³ä»£ç </li>
<li>è¯†åˆ«å¯èƒ½çš„é—®é¢˜</li>
<li>æå‡ºä¿®å¤æ–¹æ¡ˆ</li>
<li>å®æ–½ä¿®æ”¹</li>
<li>éªŒè¯ä¿®å¤æ•ˆæœ</li>
</ul>
<h3 data-id="heading-24">å®æˆ˜ç¤ºä¾‹</h3>
<h4 data-id="heading-25">ç¤ºä¾‹ 1ï¼šåˆ›å»ºå“åº”å¼å¯¼èˆªæ </h4>
<p><strong>ç”¨æˆ·è¯·æ±‚ï¼š</strong></p>
<pre><code class="hljs">åˆ›å»ºä¸€ä¸ªç°ä»£åŒ–çš„å“åº”å¼å¯¼èˆªæ ï¼Œåœ¨ç§»åŠ¨ç«¯æ˜¾ç¤ºæ±‰å ¡èœå•
</code></pre>
<p><strong>Antigravity æ‰§è¡Œæµç¨‹ï¼š</strong></p>
<ol>
<li>
<p><strong>è§„åˆ’é˜¶æ®µ</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># å®æ–½è®¡åˆ’</span>

<span class="hljs-section">## å˜æ›´å†…å®¹</span>

<span class="hljs-section">### æ–°å»ºæ–‡ä»¶</span>
<span class="hljs-bullet">-</span> src/components/Navbar/Navbar.tsx
<span class="hljs-bullet">-</span> src/components/Navbar/Navbar.less

<span class="hljs-section">## æŠ€æœ¯æ–¹æ¡ˆ</span>
<span class="hljs-bullet">-</span> ä½¿ç”¨ React Hooks ç®¡ç†èœå•çŠ¶æ€
<span class="hljs-bullet">-</span> CSS Media Queries å®ç°å“åº”å¼
<span class="hljs-bullet">-</span> å¹³æ»‘åŠ¨ç”»è¿‡æ¸¡æ•ˆæœ
</code></pre>
</li>
<li>
<p><strong>æ‰§è¡Œé˜¶æ®µ</strong></p>
<ul>
<li>åˆ›å»ºç»„ä»¶æ–‡ä»¶</li>
<li>å®ç°å“åº”å¼é€»è¾‘</li>
<li>æ·»åŠ åŠ¨ç”»æ•ˆæœ</li>
<li>é›†æˆåˆ°ä¸»åº”ç”¨</li>
</ul>
</li>
<li>
<p><strong>éªŒè¯é˜¶æ®µ</strong></p>
<ul>
<li>åœ¨ä¸åŒå±å¹•å°ºå¯¸ä¸‹æµ‹è¯•</li>
<li>æä¾›æ¼”ç¤ºæˆªå›¾</li>
<li>ç”Ÿæˆä½¿ç”¨æ–‡æ¡£</li>
</ul>
</li>
</ol>
<h4 data-id="heading-26">ç¤ºä¾‹ 2ï¼šæ·»åŠ æš—é»‘æ¨¡å¼</h4>
<p><strong>ç”¨æˆ·è¯·æ±‚ï¼š</strong></p>
<pre><code class="hljs">ä¸ºæ•´ä¸ªç½‘ç«™æ·»åŠ æš—é»‘æ¨¡å¼åˆ‡æ¢åŠŸèƒ½
</code></pre>
<p><strong>Antigravity å·¥ä½œè¿‡ç¨‹ï¼š</strong></p>
<ol>
<li>åˆ†æç°æœ‰æ ·å¼ç³»ç»Ÿ</li>
<li>åˆ›å»ºä¸»é¢˜åˆ‡æ¢ Context</li>
<li>ä¿®æ”¹æ‰€æœ‰ç»„ä»¶æ”¯æŒä¸»é¢˜</li>
<li>æ·»åŠ åˆ‡æ¢æŒ‰é’®</li>
<li>æŒä¹…åŒ–ç”¨æˆ·åå¥½</li>
<li>æµ‹è¯•æ‰€æœ‰é¡µé¢</li>
</ol>
<h4 data-id="heading-27">ç¤ºä¾‹ 3ï¼šæ€§èƒ½ä¼˜åŒ–</h4>
<p><strong>ç”¨æˆ·è¯·æ±‚ï¼š</strong></p>
<pre><code class="hljs">ä¼˜åŒ–é¦–é¡µåŠ è½½é€Ÿåº¦ï¼Œå‡å°‘åŒ…ä½“ç§¯
</code></pre>
<p><strong>Antigravity ä¼˜åŒ–æ–¹æ¡ˆï¼š</strong></p>
<ul>
<li>ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½</li>
<li>å›¾ç‰‡ä¼˜åŒ–å’Œå‹ç¼©</li>
<li>ç§»é™¤æœªä½¿ç”¨çš„ä¾èµ–</li>
<li>å®æ–½ç¼“å­˜ç­–ç•¥</li>
<li>æä¾›æ€§èƒ½æŠ¥å‘Š</li>
</ul>
<h3 data-id="heading-28">æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-29">1. æ¸…æ™°çš„éœ€æ±‚æè¿°</h4>
<p>âŒ <strong>ä¸æ¨èï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-string">"æ”¹ä¸€ä¸‹ç™»å½•é¡µé¢"</span>
</code></pre>
<p>âœ… <strong>æ¨èï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-string">"ä¿®æ”¹ç™»å½•é¡µé¢ï¼Œæ·»åŠ 'è®°ä½æˆ‘'é€‰é¡¹å’Œ'å¿˜è®°å¯†ç 'é“¾æ¥ï¼Œ
å¹¶æ”¹è¿›è¡¨å•éªŒè¯ï¼Œåœ¨ç”¨æˆ·è¾“å…¥æ—¶å®æ—¶æ˜¾ç¤ºé”™è¯¯æç¤º"</span>
</code></pre>
<h4 data-id="heading-30">2. æä¾›å¿…è¦çš„ä¸Šä¸‹æ–‡</h4>
<p>âŒ <strong>ä¸æ¨èï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-string">"æ·»åŠ ä¸€ä¸ªåˆ—è¡¨ç»„ä»¶"</span>
</code></pre>
<p>âœ… <strong>æ¨èï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-string">"å‚è€ƒç°æœ‰çš„ UserList ç»„ä»¶é£æ ¼ï¼Œåˆ›å»ºä¸€ä¸ª ArticleList ç»„ä»¶ï¼Œ
ç”¨äºæ˜¾ç¤ºåšå®¢æ–‡ç« ï¼ŒåŒ…æ‹¬æ ‡é¢˜ã€æ‘˜è¦ã€å‘å¸ƒæ—¶é—´å’Œåˆ†ç±»"</span>
</code></pre>
<h4 data-id="heading-31">3. åˆ†æ­¥éª¤è¿›è¡Œå¤æ‚ä»»åŠ¡</h4>
<p>å¯¹äºå¤§å‹åŠŸèƒ½ï¼Œå»ºè®®åˆ†é˜¶æ®µå®Œæˆï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">ç¬¬ä¸€æ­¥ï¼š<span class="hljs-string">"åˆ›å»ºåšå®¢æ–‡ç« çš„æ•°æ®æ¨¡å‹å’Œ API æ¥å£"</span>
ç¬¬äºŒæ­¥ï¼š<span class="hljs-string">"å®ç°æ–‡ç« åˆ—è¡¨é¡µé¢"</span>
ç¬¬ä¸‰æ­¥ï¼š<span class="hljs-string">"å®ç°æ–‡ç« è¯¦æƒ…é¡µé¢"</span>
ç¬¬å››æ­¥ï¼š<span class="hljs-string">"æ·»åŠ æ–‡ç« æœç´¢å’Œç­›é€‰åŠŸèƒ½"</span>
</code></pre>
<h4 data-id="heading-32">4. åŠæ—¶å®¡æŸ¥å’Œåé¦ˆ</h4>
<p>å½“ Antigravity è¯·æ±‚å®¡æŸ¥æ—¶ï¼š</p>
<ul>
<li>ä»”ç»†æ£€æŸ¥å®æ–½è®¡åˆ’</li>
<li>æå‡ºç–‘é—®å’Œå»ºè®®</li>
<li>ç¡®è®¤åå†ç»§ç»­æ‰§è¡Œ</li>
</ul>
<h4 data-id="heading-33">5. åˆ©ç”¨éªŒè¯é˜¶æ®µ</h4>
<p>åœ¨éªŒè¯é˜¶æ®µï¼š</p>
<ul>
<li>æ£€æŸ¥ç”Ÿæˆçš„æ¼”ç¤ºæ–‡æ¡£</li>
<li>æŸ¥çœ‹æˆªå›¾å’Œå½•å±</li>
<li>æ‰‹åŠ¨æµ‹è¯•å…³é”®åŠŸèƒ½</li>
<li>æå‡ºæ”¹è¿›æ„è§</li>
</ul>
<h3 data-id="heading-34">å·¥ä½œæµç¨‹å›¾ç¤º</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[ç”¨æˆ·æå‡ºéœ€æ±‚] --&gt; B{ä»»åŠ¡å¤æ‚åº¦}
    B --&gt;|ç®€å•| C[ç›´æ¥æ‰§è¡Œ]
    B --&gt;|å¤æ‚| D[è¿›å…¥ä»»åŠ¡æ¨¡å¼]
    
    D --&gt; E[PLANNING: åˆ›å»ºå®æ–½è®¡åˆ’]
    E --&gt; F[ç”¨æˆ·å®¡æ ¸]
    F --&gt;|éœ€è¦ä¿®æ”¹| E
    F --&gt;|æ‰¹å‡†| G[EXECUTION: å®æ–½ä»£ç ]
    
    G --&gt; H{å‘ç°é—®é¢˜?}
    H --&gt;|æ˜¯| E
    H --&gt;|å¦| I[VERIFICATION: éªŒè¯æµ‹è¯•]
    
    I --&gt; J[ç”Ÿæˆæ¼”ç¤ºæ–‡æ¡£]
    J --&gt; K[ä»»åŠ¡å®Œæˆ]
    
    C --&gt; K
</code></pre>
<h3 data-id="heading-35">å¸¸è§é—®é¢˜</h3>
<h4 data-id="heading-36">Q: Antigravity æ”¯æŒå“ªäº›ç¼–ç¨‹è¯­è¨€ï¼Ÿ</h4>
<p>A: Antigravity æ”¯æŒå‡ ä¹æ‰€æœ‰ä¸»æµç¼–ç¨‹è¯­è¨€ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š</p>
<ul>
<li>JavaScript/TypeScript</li>
<li>Python</li>
<li>Java/Kotlin</li>
<li>Go</li>
<li>C/C++</li>
<li>Rust</li>
<li>PHP
ç­‰</li>
</ul>
<h4 data-id="heading-37">Q: å¦‚ä½•è®© Antigravity éµå¾ªé¡¹ç›®çš„ä»£ç è§„èŒƒï¼Ÿ</h4>
<p>A: Antigravity ä¼šè‡ªåŠ¨åˆ†æä½ çš„ä»£ç åº“ï¼Œå­¦ä¹ ç°æœ‰çš„ä»£ç é£æ ¼å’Œè§„èŒƒã€‚ä½ ä¹Ÿå¯ä»¥æ˜ç¡®æŒ‡å‡ºï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-string">"éµå¾ªé¡¹ç›®ç°æœ‰çš„ä»£ç è§„èŒƒï¼Œä½¿ç”¨ ESLint é…ç½®çš„æ ‡å‡†"</span>
</code></pre>
<h4 data-id="heading-38">Q: Antigravity ä¼šç ´åç°æœ‰ä»£ç å—ï¼Ÿ</h4>
<p>A: Antigravity éå¸¸è°¨æ…ï¼š</p>
<ul>
<li>åœ¨ä¿®æ”¹å‰ä¼šå…ˆåˆ†æä»£ç </li>
<li>åªä¿®æ”¹å¿…è¦çš„éƒ¨åˆ†</li>
<li>ä¿æŒä»£ç çš„å®Œæ•´æ€§</li>
<li>ä½ å¯ä»¥éšæ—¶ä½¿ç”¨ Git å›æ»š</li>
</ul>
<h4 data-id="heading-39">Q: å¦‚ä½•è®© Antigravity è¿è¡Œæµ‹è¯•ï¼Ÿ</h4>
<p>A: ç›´æ¥è¯·æ±‚å³å¯ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-string">"è¿è¡Œé¡¹ç›®çš„æµ‹è¯•å¥—ä»¶ï¼Œå¹¶ä¿®å¤å¤±è´¥çš„æµ‹è¯•"</span>
</code></pre>
<h4 data-id="heading-40">Q: Antigravity èƒ½å¤„ç†å¤šæ–‡ä»¶çš„å¤æ‚ä¿®æ”¹å—ï¼Ÿ</h4>
<p>A: å¯ä»¥ï¼Antigravity æ“…é•¿å¤„ç†è·¨æ–‡ä»¶çš„ä¿®æ”¹ï¼š</p>
<ul>
<li>è‡ªåŠ¨è¯†åˆ«æ–‡ä»¶ä¾èµ–</li>
<li>åŒæ­¥æ›´æ–°ç›¸å…³æ–‡ä»¶</li>
<li>ä¿æŒä»£ç ä¸€è‡´æ€§</li>
</ul>
<h3 data-id="heading-41">è¿›é˜¶åŠŸèƒ½</h3>
<h4 data-id="heading-42">1. è‡ªå®šä¹‰å·¥ä½œæµ</h4>
<p>ä½ å¯ä»¥åœ¨é¡¹ç›®ä¸­åˆ›å»º <code>.agent/workflows</code> ç›®å½•ï¼Œå®šä¹‰è‡ªå·±çš„å·¥ä½œæµç¨‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">---
<span class="hljs-section">description: éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
---</span>

<span class="hljs-bullet">1.</span> è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
<span class="hljs-bullet">2.</span> æ„å»ºç”Ÿäº§ç‰ˆæœ¬
<span class="hljs-bullet">3.</span> æ£€æŸ¥æ„å»ºäº§ç‰©
<span class="hljs-bullet">4.</span> éƒ¨ç½²åˆ°æœåŠ¡å™¨
<span class="hljs-bullet">5.</span> éªŒè¯éƒ¨ç½²ç»“æœ
</code></pre>
<h4 data-id="heading-43">2. é›†æˆå¼€å‘å·¥å…·</h4>
<p>Antigravity å¯ä»¥ä¸ä½ çš„å¼€å‘å·¥å…·æ— ç¼é›†æˆï¼š</p>
<ul>
<li>Git ç‰ˆæœ¬æ§åˆ¶</li>
<li>npm/yarn åŒ…ç®¡ç†</li>
<li>æ„å»ºå·¥å…·ï¼ˆWebpack, Vite ç­‰ï¼‰</li>
<li>æµ‹è¯•æ¡†æ¶ï¼ˆJest, Vitest ç­‰ï¼‰</li>
<li>CI/CD æµç¨‹</li>
</ul>
<h4 data-id="heading-44">3. çŸ¥è¯†åº“æŸ¥è¯¢</h4>
<p>Antigravity å¯ä»¥ï¼š</p>
<ul>
<li>æœç´¢äº’è”ç½‘è·å–æœ€æ–°ä¿¡æ¯</li>
<li>é˜…è¯»æ–‡æ¡£å’Œæ•™ç¨‹</li>
<li>å‚è€ƒå¼€æºé¡¹ç›®</li>
<li>æä¾›æŠ€æœ¯å»ºè®®</li>
</ul>
<h3 data-id="heading-45">æ€§èƒ½å’Œé™åˆ¶</h3>
<h4 data-id="heading-46">æ€§èƒ½ç‰¹ç‚¹</h4>
<ul>
<li><strong>å¿«é€Ÿå“åº”</strong>ï¼šç®€å•ä»»åŠ¡ç«‹å³å®Œæˆ</li>
<li><strong>å¹¶è¡Œå¤„ç†</strong>ï¼šå¯åŒæ—¶å¤„ç†å¤šä¸ªç‹¬ç«‹ä»»åŠ¡</li>
<li><strong>æ™ºèƒ½ç¼“å­˜</strong>ï¼šé¿å…é‡å¤åˆ†æç›¸åŒä»£ç </li>
</ul>
<h4 data-id="heading-47">å½“å‰é™åˆ¶</h4>
<ul>
<li>å•æ¬¡æ–‡ä»¶æŸ¥çœ‹é™åˆ¶ä¸º 800 è¡Œ</li>
<li>ä¸æ”¯æŒç›´æ¥ç¼–è¾‘æŸäº›æ–‡ä»¶æ ¼å¼ï¼ˆå¦‚ .ipynbï¼‰</li>
<li>éœ€è¦ç½‘ç»œè¿æ¥è®¿é—®å¤–éƒ¨èµ„æº</li>
</ul>
<h3 data-id="heading-48">æ€»ç»“</h3>
<p>Antigravity æ˜¯ä¸€ä¸ªå¼ºå¤§è€Œæ™ºèƒ½çš„ AI ç¼–ç¨‹åŠ©æ‰‹ï¼Œå®ƒèƒ½å¤Ÿï¼š</p>
<p>âœ… <strong>ç†è§£ä½ çš„éœ€æ±‚</strong>ï¼šé€šè¿‡è‡ªç„¶è¯­è¨€ç†è§£å¤æ‚çš„å¼€å‘ä»»åŠ¡<br/>
âœ… <strong>è‡ªä¸»è§„åˆ’æ‰§è¡Œ</strong>ï¼šæ™ºèƒ½åˆ†è§£ä»»åŠ¡å¹¶ç”Ÿæˆè¯¦ç»†è®¡åˆ’<br/>
âœ… <strong>ç¼–å†™é«˜è´¨é‡ä»£ç </strong>ï¼šéµå¾ªæœ€ä½³å®è·µå’Œé¡¹ç›®è§„èŒƒ<br/>
âœ… <strong>éªŒè¯å’Œæµ‹è¯•</strong>ï¼šç¡®ä¿ä»£ç è´¨é‡å’ŒåŠŸèƒ½æ­£ç¡®æ€§<br/>
âœ… <strong>æŒç»­å­¦ä¹ </strong>ï¼šæ ¹æ®åé¦ˆä¸æ–­æ”¹è¿›</p>
<p>æ— è®ºä½ æ˜¯åœ¨å¼€å‘æ–°åŠŸèƒ½ã€ä¿®å¤ Bugã€ä¼˜åŒ–æ€§èƒ½ï¼Œè¿˜æ˜¯é‡æ„ä»£ç ï¼ŒAntigravity éƒ½èƒ½æˆä¸ºä½ å¾—åŠ›çš„ç¼–ç¨‹ä¼™ä¼´ã€‚</p>
<h3 data-id="heading-49">å¼€å§‹ä½¿ç”¨</h3>
<p>ç°åœ¨å°±å¼€å§‹ä½¿ç”¨ Antigravityï¼Œä½“éªŒä¸‹ä¸€ä»£ AI è¾…åŠ©ç¼–ç¨‹çš„å¼ºå¤§åŠŸèƒ½å§ï¼</p>
<hr/>
<p><strong>ç›¸å…³èµ„æºï¼š</strong></p>
<ul>
<li>Google DeepMind å®˜æ–¹æ–‡æ¡£</li>
<li>Antigravity ç¤¾åŒºè®ºå›</li>
<li>ç¤ºä¾‹é¡¹ç›®å’Œæœ€ä½³å®è·µ</li>
</ul>
<p><strong>ç‰ˆæœ¬ä¿¡æ¯ï¼š</strong> æœ¬æŒ‡å—åŸºäº Antigravity 2024 ç‰ˆæœ¬ç¼–å†™</p>
<p><strong>æœ€åæ›´æ–°ï¼š</strong> 2025-12-09</p>
<p><strong>æ¬¢è¿è®¿é—®æˆ‘çš„ä¸ªäººç½‘ç«™: <a href="https://link.juejin.cn?target=https%3A%2F%2Fhixiaohezi.com" target="_blank" title="https://hixiaohezi.com" ref="nofollow noopener noreferrer">hixiaohezi.com</a></strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52f724e4e8dd41a2ab0f139b8231169e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Y-q54ix5ZCD57OW55qE5bCP576K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765853760&amp;x-signature=Dq0OxMxpKk2Q1uLPH2s4cqv8YiM%3D" alt="og-image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•è®©AIè®¾è®¡å‡ºAppleé£æ ¼çš„é¡¶çº§UIï¼Ÿ]]></title>    <link>https://juejin.cn/post/7581423932612329512</link>    <guid>https://juejin.cn/post/7581423932612329512</guid>    <pubDate>2025-12-09T01:46:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581423932612329512" data-draft-id="7579892222608736291" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•è®©AIè®¾è®¡å‡ºAppleé£æ ¼çš„é¡¶çº§UIï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-09T01:46:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¹å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/3659622444970574"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•è®©AIè®¾è®¡å‡ºAppleé£æ ¼çš„é¡¶çº§UIï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3659622444970574/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¹å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T01:46:02.000Z" title="Tue Dec 09 2025 01:46:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c5bb5877de2402c87c0c6e9c6330b89~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5Lmd5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765849562&amp;x-signature=A7nGowBuz1QVnUw8fMwUWg0Wkhc%3D" alt="export_1764901938560.gif" loading="lazy"/></p>
<p>å¦‚ä½•è®©AIè®¾è®¡å‡ºAppleé£æ ¼çš„é¡¶çº§UIï¼Ÿç»™aiæŠ•å–‚ä»¥ä¸‹æç¤ºè¯å³å¯è®©ä½ çš„é¡µé¢å˜å¾—å’Œappleå®˜ç½‘ä¸€æ ·å¥½çœ‹</p>
<h2 data-id="heading-0">æç¤ºè¯</h2>
<pre><code class="hljs language-md" lang="md"><span class="hljs-section"># Role (è§’è‰²è®¾å®š)</span>

ä½ æ˜¯ä¸€ä½ä¸–ç•Œé¡¶çº§çš„ UI å·¥ç¨‹å¸ˆå’Œåˆ›æ„å¼€å‘ä¸“å®¶ï¼Œæ·±è°™ Apple çš„è®¾è®¡å“²å­¦ï¼ˆHuman Interface Guidelinesï¼‰ä»¥åŠ Apple å®˜ç½‘çš„ç½‘é¡µè®¾è®¡ç¾å­¦ã€‚ä½ æ“…é•¿å°†æ™®é€šçš„ UI ä»£ç é‡æ„ä¸ºå…·æœ‰â€œApple è´¨æ„Ÿâ€çš„é¡¶çº§ç•Œé¢ã€‚

<span class="hljs-section"># Goal (ä»»åŠ¡ç›®æ ‡)</span>

æˆ‘å°†æä¾›ä¸€ä¸ªç°æœ‰çš„ä»£ç é¡¹ç›®ã€‚è¯·ä½ å‚è€ƒ Block Studio å¯¹ Apple é£æ ¼çš„æ·±åº¦è§£æï¼Œå¯¹æˆ‘æä¾›çš„ä»£ç è¿›è¡Œ<span class="hljs-strong">**å…¨æ–¹ä½é‡æ„**</span>ã€‚

<span class="hljs-section"># Design Principles (æ ¸å¿ƒè®¾è®¡æ³•åˆ™)</span>

è¯·åœ¨é‡æ„æ—¶ä¸¥æ ¼æ‰§è¡Œä»¥ä¸‹ 6 å¤§ç»´åº¦çš„è®¾è®¡è§„èŒƒï¼š

<span class="hljs-section">### 1. å¸ƒå±€ä¸ç»“æ„ï¼šBento Grid (ä¾¿å½“ç›’ç¾å­¦)</span>
<span class="hljs-bullet">*</span>   <span class="hljs-strong">**æ¨¡å—åŒ–å®¹å™¨ï¼š**</span> å°†å†…å®¹é‡ç»„ä¸ºåœ†è§’çŸ©å½¢çš„â€œå¡ç‰‡â€ï¼Œå½¢æˆ Bento Grid ç½‘æ ¼å¸ƒå±€ã€‚
<span class="hljs-bullet">*</span>   <span class="hljs-strong">**é—´è· (Gap)ï¼š**</span> ä¿æŒå®½æ•ç»Ÿä¸€çš„é—´è·ï¼ˆ24px - 32pxï¼‰ï¼Œæ‹’ç»æ‹¥æŒ¤ã€‚
<span class="hljs-bullet">*</span>   <span class="hljs-strong">**å…¨å®½ä¸å±…ä¸­ï¼š**</span> å¤§å±é™åˆ¶æœ€å¤§å®½åº¦ï¼ˆå¦‚ 1120pxï¼‰å¹¶å±…ä¸­ï¼Œå°å±è‡ªåŠ¨å †å ã€‚

<span class="hljs-section">### 2. æ°›å›´ä¸æè´¨ï¼šAurora &amp; Glass (æå…‰ä¸æ¯›ç»ç’ƒ) âœ¨</span>
<span class="hljs-bullet">*</span>   <span class="hljs-strong">**Ambient Background (åŠ¨æ€å¼¥æ•£èƒŒæ™¯):**</span> 
<span class="hljs-bullet">    *</span>   <span class="hljs-strong">**Base:**</span> ä½¿ç”¨ <span class="hljs-code">`#F5F5F7`</span> ä½œä¸ºç”»å¸ƒåº•è‰²ã€‚
<span class="hljs-bullet">    *</span>   <span class="hljs-strong">**Orbs (å…‰çƒ):**</span> åœ¨èƒŒæ™¯å±‚æ”¾ç½® 2-3 ä¸ªå·¨å¤§çš„åœ†å½¢å…ƒç´  (50vw-60vw)ï¼Œä½¿ç”¨ <span class="hljs-code">`fixed`</span> å®šä½ã€‚
<span class="hljs-bullet">    *</span>   <span class="hljs-strong">**Gradient:**</span> å…‰çƒå¡«å……å¾„å‘æ¸å˜ï¼Œæ¨èé…è‰²ï¼šæ·¡è“ <span class="hljs-code">`rgba(162, 210, 255, 0.4)`</span> å’Œ æ·¡ç´« <span class="hljs-code">`rgba(200, 180, 255, 0.3)`</span>ã€‚
<span class="hljs-bullet">    *</span>   <span class="hljs-strong">**Blur:**</span> å¼ºåˆ¶åº”ç”¨æå¤§çš„é«˜æ–¯æ¨¡ç³Š (<span class="hljs-code">`filter: blur(80px)`</span> æˆ–æ›´é«˜)ï¼Œä½¿é¢œè‰²æŸ”å’Œèåˆã€‚
<span class="hljs-bullet">    *</span>   <span class="hljs-strong">**Animation:**</span> æ·»åŠ ç¼“æ…¢çš„ infinite æµ®åŠ¨åŠ¨ç”»ï¼Œè®©å…‰æ–‘æœ‰è½»å¾®çš„å‘¼å¸æ„Ÿã€‚
<span class="hljs-bullet">*</span>   <span class="hljs-strong">**Glassmorphism (æ¯›ç»ç’ƒ):**</span> å¡ç‰‡èƒŒæ™¯ä½¿ç”¨åŠé€æ˜ç™½è‰² (<span class="hljs-code">`rgba(255, 255, 255, 0.8)`</span>) é…åˆ <span class="hljs-code">`backdrop-filter: blur(20px)`</span>ï¼Œè®©èƒŒæ™¯çš„æå…‰è‰²èƒ½éšçº¦é€å‡ºã€‚
<span class="hljs-bullet">*</span>   <span class="hljs-strong">**Squircle:**</span> æ‰€æœ‰å¡ç‰‡ä½¿ç”¨è¿ç»­æ›²ç‡å¤§åœ†è§’ (24px)ã€‚

<span class="hljs-section">### 3. ç»„ä»¶å±‚çº§ï¼šButton &amp; Input Hierarchy</span>
<span class="hljs-bullet">*</span>   <span class="hljs-strong">**Primary Buttons (ä¸»æŒ‰é’®):**</span> æ ¸å¿ƒè¡ŒåŠ¨ã€‚ä½¿ç”¨<span class="hljs-strong">**å“ç‰Œè“å®å¿ƒå¡«å……**</span> (#0071e3) + ç™½è‰²æ–‡å­— + èƒ¶å›Šåœ†è§’ã€‚Hover æ—¶äº®åº¦æå‡æˆ–å¸¦å…‰æ™•ã€‚
<span class="hljs-bullet">*</span>   <span class="hljs-strong">**Secondary Buttons (æ¬¡çº§æŒ‰é’®):**</span> è¾…åŠ©è¡ŒåŠ¨ï¼ˆå¦‚â€œé€‰æ‹©æ–‡ä»¶â€ï¼‰ã€‚<span class="hljs-strong">**ç¦æ­¢ä½¿ç”¨é€æ˜èƒŒæ™¯**</span>ã€‚å¿…é¡»ä½¿ç”¨<span class="hljs-strong">**æµ…ç°è‰²å®å¿ƒå¡«å……**</span> (#E5E5EA æˆ– rgba(0,0,0,0.05)) + æ·±è‰²æ–‡å­—ï¼Œç¡®ä¿åœ¨ç™½è‰²å¡ç‰‡ä¸Šæ¸…æ™°å¯è§ã€‚
<span class="hljs-bullet">*</span>   <span class="hljs-strong">**Inputs (è¾“å…¥æ¡†):**</span> ç§»é™¤é»˜è®¤è¾¹æ¡†ã€‚ä½¿ç”¨æµ…ç°èƒŒæ™¯ (#F2F2F7) + æ·±è‰²æ–‡å­—ã€‚Focus æ—¶èƒŒæ™¯å˜ç™½ + å“ç‰Œè‰²å…‰æ™•ã€‚

<span class="hljs-section">### 4. æ’ç‰ˆä¸ä¿¡æ¯ï¼šBig Type</span>
<span class="hljs-bullet">*</span>   <span class="hljs-strong">**å­—ä½“ï¼š**</span> å¼ºåˆ¶ä½¿ç”¨ç³»ç»Ÿå­—ä½“æ ˆ (<span class="hljs-code">`-apple-system`</span>, <span class="hljs-code">`SF Pro`</span>, <span class="hljs-code">`PingFang SC`</span>)ã€‚
<span class="hljs-bullet">*</span>   <span class="hljs-strong">**å±‚çº§ï¼š**</span> æ ‡é¢˜ç²—é»‘ (700)ï¼Œæ­£æ–‡æ¸…æ™° (400)ï¼Œæ³¨é‡Šç°è‰² (#86868b)ã€‚æ ‡é¢˜å­—é—´è·å¾®ç¼© (-0.02em)ã€‚

<span class="hljs-section">### 5. åŠ¨æ•ˆï¼šPhysics (ç‰©ç†æ„Ÿ)</span>
<span class="hljs-bullet">*</span>   <span class="hljs-strong">**éçº¿æ€§ï¼š**</span> æ‰€æœ‰ Hover/Transition å¿…é¡»ä½¿ç”¨å¼¹ç°§æ›²çº¿ (e.g., <span class="hljs-code">`cubic-bezier(0.25, 1, 0.5, 1)`</span>).
<span class="hljs-bullet">*</span>   <span class="hljs-strong">**åé¦ˆï¼š**</span> æŒ‰é’® Hover æ—¶å¿…é¡»æœ‰ <span class="hljs-strong">**Scale (1.02)**</span> æˆ– <span class="hljs-strong">**Brightness**</span> å˜åŒ–ã€‚
<span class="hljs-bullet">*</span>   <span class="hljs-strong">**å…¥åœºï¼š**</span> é¡µé¢åŠ è½½æ—¶ï¼Œå¡ç‰‡åº”å¸¦æœ‰ <span class="hljs-code">`fade-in-up`</span> (æ·¡å…¥ä¸Šæµ®) çš„åºåˆ—åŠ¨ç”»ã€‚

<span class="hljs-section">### 6. ç»†èŠ‚ä¿®é¥°</span>
<span class="hljs-bullet">*</span>   <span class="hljs-strong">**Hairlines:**</span> è¾¹æ¡†å’Œåˆ†å‰²çº¿ä½¿ç”¨ 1px åŠé€æ˜çº¿ (<span class="hljs-code">`rgba(255,255,255,0.6)`</span> æˆ– <span class="hljs-code">`rgba(0,0,0,0.1)`</span>).
<span class="hljs-bullet">*</span>   <span class="hljs-strong">**Icons:**</span> ä½¿ç”¨ Emoji æˆ– SF Symbols é£æ ¼å›¾æ ‡ï¼Œå¯æ­é…å¾®æ¸å˜èƒŒæ™¯å®¹å™¨ã€‚

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[3åˆ†é’ŸSolidity: 3.3 Enumæšä¸¾]]></title>    <link>https://juejin.cn/post/7581299982671839266</link>    <guid>https://juejin.cn/post/7581299982671839266</guid>    <pubDate>2025-12-08T15:50:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581299982671839266" data-draft-id="7581314241410842659" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="3åˆ†é’ŸSolidity: 3.3 Enumæšä¸¾"/> <meta itemprop="keywords" content="Solidity,web3,åŒºå—é“¾"/> <meta itemprop="datePublished" content="2025-12-08T15:50:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Rockbean"/> <meta itemprop="url" content="https://juejin.cn/user/4054654615823560"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            3åˆ†é’ŸSolidity: 3.3 Enumæšä¸¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4054654615823560/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Rockbean
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T15:50:45.000Z" title="Mon Dec 08 2025 15:50:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¦‚éœ€è·å–æœ¬å†…å®¹çš„æœ€æ–°ç‰ˆæœ¬ï¼Œè¯·å‚è§ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cyfrin.io%2Fglossary%2Fenum-solidity-code-example" target="_blank" title="https://www.cyfrin.io/glossary/enum-solidity-code-example" ref="nofollow noopener noreferrer">Cyfrin.io ä¸Šçš„ Enumï¼ˆä»£ç ç¤ºä¾‹ï¼‰</a></p>
<p>Solidityæ”¯æŒæšä¸¾ç±»å‹ï¼Œå®ƒä»¬éå¸¸é€‚åˆç”¨äºå»ºæ¨¡é€‰æ‹©é¡¹å’Œè·Ÿè¸ªçŠ¶æ€ã€‚
æšä¸¾å¯ä»¥åœ¨åˆçº¦å¤–éƒ¨å£°æ˜ã€‚</p>
<pre><code class="hljs language-solidity" lang="solidity">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.26;

contract Enum {
    // è¡¨ç¤ºè¿è¾“çŠ¶æ€çš„æšä¸¾
    enum Status {
        Pending,
        Shipped,
        Accepted,
        Rejected,
        Canceled
    }

    // é»˜è®¤å€¼æ˜¯ç±»å‹å®šä¹‰ä¸­åˆ—å‡ºçš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæœ¬ä¾‹ä¸­ä¸ºâ€œPendingâ€
    Status public status;

    // è¿”å›æ— ç¬¦å·æ•´æ•°
    // Pending  - 0
    // Shipped  - 1
    // Accepted - 2
    // Rejected - 3
    // Canceled - 4
    function get() public view returns (Status) {
        return status;
    }

    // é€šè¿‡å°†æ— ç¬¦å·æ•´æ•°ä¼ é€’åˆ°è¾“å…¥æ¥æ›´æ–°çŠ¶æ€
    function set(Status _status) public {
        status = _status;
    }

    // ä½ å¯ä»¥åƒè¿™æ ·æ›´æ–°åˆ°ç‰¹å®šçš„æšä¸¾
    function cancel() public {
        status = Status.Canceled;
    }

    // åˆ é™¤ä¼šå°†æšä¸¾é‡ç½®ä¸ºå…¶ç¬¬ä¸€ä¸ªå€¼ï¼Œ0
    function reset() public {
        delete status;
    }
}
</code></pre>
<p>Remix Lite <a href="https://link.juejin.cn?target=https%3A%2F%2Fremix.byteatatime.dev%2F%3F%23code%3DLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVApwcmFnbWEgc29saWRpdHkgXjAuOC4yNjsKCmNvbnRyYWN0IEVudW0gewogICAgLy8gRW51bSByZXByZXNlbnRpbmcgc2hpcHBpbmcgc3RhdHVzCiAgICBlbnVtIFN0YXR1cyB7CiAgICAgICAgUGVuZGluZywKICAgICAgICBTaGlwcGVkLAogICAgICAgIEFjY2VwdGVkLAogICAgICAgIFJlamVjdGVkLAogICAgICAgIENhbmNlbGVkCiAgICB9CgogICAgLy8gRGVmYXVsdCB2YWx1ZSBpcyB0aGUgZmlyc3QgZWxlbWVudCBsaXN0ZWQgaW4KICAgIC8vIGRlZmluaXRpb24gb2YgdGhlIHR5cGUsIGluIHRoaXMgY2FzZSAiUGVuZGluZyIKICAgIFN0YXR1cyBwdWJsaWMgc3RhdHVzOwoKICAgIC8vIFJldHVybnMgdWludAogICAgLy8gUGVuZGluZyAgLSAwCiAgICAvLyBTaGlwcGVkICAtIDEKICAgIC8vIEFjY2VwdGVkIC0gMgogICAgLy8gUmVqZWN0ZWQgLSAzCiAgICAvLyBDYW5jZWxlZCAtIDQKICAgIGZ1bmN0aW9uIGdldCgpIHB1YmxpYyB2aWV3IHJldHVybnMgKFN0YXR1cykgewogICAgICAgIHJldHVybiBzdGF0dXM7CiAgICB9CgogICAgLy8gVXBkYXRlIHN0YXR1cyBieSBwYXNzaW5nIHVpbnQgaW50byBpbnB1dAogICAgZnVuY3Rpb24gc2V0KFN0YXR1cyBfc3RhdHVzKSBwdWJsaWMgewogICAgICAgIHN0YXR1cyA9IF9zdGF0dXM7CiAgICB9CgogICAgLy8gWW91IGNhbiB1cGRhdGUgdG8gYSBzcGVjaWZpYyBlbnVtIGxpa2UgdGhpcwogICAgZnVuY3Rpb24gY2FuY2VsKCkgcHVibGljIHsKICAgICAgICBzdGF0dXMgPSBTdGF0dXMuQ2FuY2VsZWQ7CiAgICB9CgogICAgLy8gZGVsZXRlIHJlc2V0cyB0aGUgZW51bSB0byBpdHMgZmlyc3QgdmFsdWUsIDAKICAgIGZ1bmN0aW9uIHJlc2V0KCkgcHVibGljIHsKICAgICAgICBkZWxldGUgc3RhdHVzOwogICAgfQp9Cg%3D%3D" target="_blank" title="https://remix.byteatatime.dev/?#code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVApwcmFnbWEgc29saWRpdHkgXjAuOC4yNjsKCmNvbnRyYWN0IEVudW0gewogICAgLy8gRW51bSByZXByZXNlbnRpbmcgc2hpcHBpbmcgc3RhdHVzCiAgICBlbnVtIFN0YXR1cyB7CiAgICAgICAgUGVuZGluZywKICAgICAgICBTaGlwcGVkLAogICAgICAgIEFjY2VwdGVkLAogICAgICAgIFJlamVjdGVkLAogICAgICAgIENhbmNlbGVkCiAgICB9CgogICAgLy8gRGVmYXVsdCB2YWx1ZSBpcyB0aGUgZmlyc3QgZWxlbWVudCBsaXN0ZWQgaW4KICAgIC8vIGRlZmluaXRpb24gb2YgdGhlIHR5cGUsIGluIHRoaXMgY2FzZSAiUGVuZGluZyIKICAgIFN0YXR1cyBwdWJsaWMgc3RhdHVzOwoKICAgIC8vIFJldHVybnMgdWludAogICAgLy8gUGVuZGluZyAgLSAwCiAgICAvLyBTaGlwcGVkICAtIDEKICAgIC8vIEFjY2VwdGVkIC0gMgogICAgLy8gUmVqZWN0ZWQgLSAzCiAgICAvLyBDYW5jZWxlZCAtIDQKICAgIGZ1bmN0aW9uIGdldCgpIHB1YmxpYyB2aWV3IHJldHVybnMgKFN0YXR1cykgewogICAgICAgIHJldHVybiBzdGF0dXM7CiAgICB9CgogICAgLy8gVXBkYXRlIHN0YXR1cyBieSBwYXNzaW5nIHVpbnQgaW50byBpbnB1dAogICAgZnVuY3Rpb24gc2V0KFN0YXR1cyBfc3RhdHVzKSBwdWJsaWMgewogICAgICAgIHN0YXR1cyA9IF9zdGF0dXM7CiAgICB9CgogICAgLy8gWW91IGNhbiB1cGRhdGUgdG8gYSBzcGVjaWZpYyBlbnVtIGxpa2UgdGhpcwogICAgZnVuY3Rpb24gY2FuY2VsKCkgcHVibGljIHsKICAgICAgICBzdGF0dXMgPSBTdGF0dXMuQ2FuY2VsZWQ7CiAgICB9CgogICAgLy8gZGVsZXRlIHJlc2V0cyB0aGUgZW51bSB0byBpdHMgZmlyc3QgdmFsdWUsIDAKICAgIGZ1bmN0aW9uIHJlc2V0KCkgcHVibGljIHsKICAgICAgICBkZWxldGUgc3RhdHVzOwogICAgfQp9Cg==" ref="nofollow noopener noreferrer">å°è¯•ä¸€ä¸‹</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2db9d26e22e44bedac1f02f2c724e22d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja2JlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765813845&amp;x-signature=P0TPWfRs%2FqH8OhzjoecVDDpiaXQ%3D" alt="solidity-Enumæšä¸¾" loading="lazy"/></p>
<h2 data-id="heading-0">å£°æ˜å’Œå¯¼å…¥æšä¸¾</h2>
<p>å£°æ˜æšä¸¾çš„æ–‡ä»¶</p>
<pre><code class="hljs language-solidity" lang="solidity">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.26;
// è¿™æ˜¯ä¿å­˜çš„'EnumDeclaration.sol'

enum Status {
    Pending,
    Shipped,
    Accepted,
    Rejected,
    Canceled
}
</code></pre>
<p>Remix <a href="https://link.juejin.cn?target=https%3A%2F%2Fremix.ethereum.org%2F%3F%23code%3DLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVApwcmFnbWEgc29saWRpdHkgXjAuOC4yNjsKLy8gVGhpcyBpcyBzYXZlZCAnRW51bURlY2xhcmF0aW9uLnNvbCcKCmVudW0gU3RhdHVzIHsKICAgIFBlbmRpbmcsCiAgICBTaGlwcGVkLAogICAgQWNjZXB0ZWQsCiAgICBSZWplY3RlZCwKICAgIENhbmNlbGVkCn0K" target="_blank" title="https://remix.ethereum.org/?#code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVApwcmFnbWEgc29saWRpdHkgXjAuOC4yNjsKLy8gVGhpcyBpcyBzYXZlZCAnRW51bURlY2xhcmF0aW9uLnNvbCcKCmVudW0gU3RhdHVzIHsKICAgIFBlbmRpbmcsCiAgICBTaGlwcGVkLAogICAgQWNjZXB0ZWQsCiAgICBSZWplY3RlZCwKICAgIENhbmNlbGVkCn0K" ref="nofollow noopener noreferrer">å°è¯•ä¸€ä¸‹</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/532f672f7d5942c78bc430dfe52f71b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja2JlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765813845&amp;x-signature=cpUBvPJkn4tfI6De4oG%2BHiaVE8Y%3D" alt="solidity-enumæšä¸¾å£°æ˜" loading="lazy"/></p>
<p>å¯¼å…¥ä¸Šè¿°æšä¸¾çš„æ–‡ä»¶</p>
<pre><code class="hljs language-solidity" lang="solidity">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.26;

import "./EnumDeclaration.sol";

contract Enum {
    Status public status;
}
</code></pre>
<p>Remix Lite <a href="https://link.juejin.cn?target=https%3A%2F%2Fremix.byteatatime.dev%2F%3F%23code%3DLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVApwcmFnbWEgc29saWRpdHkgXjAuOC4yNjsKCmltcG9ydCAiLi9FbnVtRGVjbGFyYXRpb24uc29sIjsKCmNvbnRyYWN0IEVudW0gewogICAgU3RhdHVzIHB1YmxpYyBzdGF0dXM7Cn0K" target="_blank" title="https://remix.byteatatime.dev/?#code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVApwcmFnbWEgc29saWRpdHkgXjAuOC4yNjsKCmltcG9ydCAiLi9FbnVtRGVjbGFyYXRpb24uc29sIjsKCmNvbnRyYWN0IEVudW0gewogICAgU3RhdHVzIHB1YmxpYyBzdGF0dXM7Cn0K" ref="nofollow noopener noreferrer">å°è¯•ä¸€ä¸‹</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0bf5c434f50a4c129362146087ddd5ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja2JlYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765813845&amp;x-signature=Bfq3cmPpL3%2BG9VWiY%2FRMHQL48%2Fk%3D" alt="solidity-enumæšä¸¾å¯¼å…¥" loading="lazy"/></p>
<hr/>
<p>END</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ–‡åƒé€Vue DiffåŸç†ï¼šä»æ ¸å¿ƒé€»è¾‘åˆ°å®æˆ˜é¿å‘]]></title>    <link>https://juejin.cn/post/7581210455827660836</link>    <guid>https://juejin.cn/post/7581210455827660836</guid>    <pubDate>2025-12-08T12:19:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581210455827660836" data-draft-id="7581097111896539190" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡åƒé€Vue DiffåŸç†ï¼šä»æ ¸å¿ƒé€»è¾‘åˆ°å®æˆ˜é¿å‘"/> <meta itemprop="keywords" content="Vue.js,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-08T12:19:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Dgua"/> <meta itemprop="url" content="https://juejin.cn/user/1135111924890654"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡åƒé€Vue DiffåŸç†ï¼šä»æ ¸å¿ƒé€»è¾‘åˆ°å®æˆ˜é¿å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1135111924890654/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Dgua
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T12:19:06.000Z" title="Mon Dec 08 2025 12:19:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€æ–‡åƒé€Vue DiffåŸç†ï¼šä»æ ¸å¿ƒé€»è¾‘åˆ°å®æˆ˜é¿å‘</h2>
<p>åœ¨Vueçš„æ€§èƒ½ä¼˜åŒ–é‡Œï¼ŒDiffç®—æ³•ç»å¯¹æ˜¯â€œå¹•ååŠŸè‡£â€â€”â€”å®ƒè§£å†³çš„æ˜¯è™šæ‹ŸDOMæ›´æ–°æ—¶ï¼Œâ€œæ€ä¹ˆç²¾å‡†æ‰¾åˆ°å˜äº†çš„èŠ‚ç‚¹ï¼Œè¿˜ä¸è´¹æ€§èƒ½â€è¿™ä¸ªæ ¸å¿ƒé—®é¢˜ã€‚ä¸å°‘åŒå­¦ç”¨Vueå¼€å‘æ—¶åªç®¡å†™ä¸šåŠ¡ï¼Œå¯¹Diffç®—æ³•æ€»æœ‰ç‚¹â€œé›¾é‡Œçœ‹èŠ±â€çš„æ„Ÿè§‰ï¼šä¸ºå•¥v-foréåŠ keyä¸å¯ï¼ŸVue2å’ŒVue3çš„Diffåˆ°åº•å·®åœ¨å“ªå„¿ï¼Ÿä»Šå¤©å’±ä»¬å°±ä»åŸç†è®²åˆ°å®æ“ï¼ŒæŠŠè¿™äº›ç–‘é—®å½»åº•æ°æ˜ç™½ã€‚</p>
<h3 data-id="heading-1">Diffæ˜¯è™šæ‹ŸDOMçš„â€œæœ€ä½³æ‹æ¡£â€</h3>
<p>èŠDiffä¹‹å‰ï¼Œå…ˆæ°æ‰¯æ¸…æ¥šä¸€ä¸ªæ ¸å¿ƒå…³ç³»ï¼šDiffç®—æ³•æ˜¯è·Ÿç€è™šæ‹ŸDOMä¸€èµ·å‡ºç°çš„â€œæœ€ä½³æ‹æ¡£â€ã€‚å’±ä»¬éƒ½çŸ¥é“æ“ä½œçœŸå®DOMç‰¹åˆ«è´¹æ€§èƒ½ï¼Œæ”¹ä¸€ä¸‹å°±å¯èƒ½è§¦å‘é‡æ’é‡ç»˜ï¼›è€Œè™šæ‹ŸDOMè¯´ç™½äº†å°±æ˜¯ä¸ªæè¿°çœŸå®DOMçš„JSå¯¹è±¡ï¼Œå’±ä»¬çœ‹ä¸ªç®€å•ä¾‹å­å°±æ‡‚äº†ï¼š</p>
<pre><code class="hljs language-css" lang="css">// è™šæ‹ŸDOMèŠ‚ç‚¹ç¤ºä¾‹
const vnode = {
  tag: <span class="hljs-string">'div'</span>,
  props: { class: <span class="hljs-string">'container'</span> },
  children: [
    { tag: <span class="hljs-string">'p'</span>, props: {}, children: [<span class="hljs-string">'Vue Diff'</span>] }
  ]
}
</code></pre>
<p>ç»„ä»¶çŠ¶æ€ä¸€å˜ï¼ŒVueå°±ä¼šç”Ÿæˆæ–°çš„è™šæ‹ŸDOMæ ‘ã€‚è¿™æ—¶å€™è¦æ˜¯ç›´æ¥æŠŠæ•´ä¸ªçœŸå®DOMå…¨æ¢æ‰ï¼Œé¡µé¢è‚¯å®šå¡å¾—ä¸è¡Œâ€”â€”Diffç®—æ³•çš„ä½œç”¨å°±æ˜¯â€œæ‰¾èŒ¬â€ï¼šå¯¹æ¯”æ–°æ—§ä¸¤æ£µè™šæ‹ŸDOMæ ‘ï¼ŒåªæŠŠâ€œä¸ä¸€æ ·çš„åœ°æ–¹â€è½¬æ¢æˆçœŸå®DOMæ“ä½œï¼Œåšåˆ°â€œæ”¹å¾—å°‘ã€æ”¹å¾—å‡†â€ã€‚</p>
<p>æ ¸å¿ƒç›®æ ‡å°±ä¸€ä¸ªï¼š<strong>ç”¨æœ€å°‘çš„DOMæ“ä½œæå®šæ›´æ–°ï¼Œåˆ«åšæ— ç”¨åŠŸ</strong>ã€‚</p>
<h3 data-id="heading-2">Diffçš„ä¸‰å¤§â€œå·æ‡’â€æŠ€å·§ï¼Œå†³å®šäº†å®ƒçš„é«˜æ•ˆ</h3>
<p>Vueçš„Diffä¸æ˜¯å‡­ç©ºé€ çš„ï¼Œè€Œæ˜¯Vueå›¢é˜Ÿæ‘¸é€äº†å‰ç«¯å¼€å‘çš„å¥—è·¯â€”â€”æ€»ç»“å‡ºä¸‰å¤§æ ¸å¿ƒç­–ç•¥ï¼Œæ—¢ä¿è¯äº†æ€§èƒ½ï¼Œåˆæ²¡æŠŠç®—æ³•æå¾—å¤šå¤æ‚ã€‚</p>
<h4 data-id="heading-3">1. åªæ¯”åŒå±‚ï¼Œä¸é’»æ·±å±‚</h4>
<p>æ—¥å¸¸å¼€å‘é‡Œï¼Œè°ä¼šæ²¡äº‹æŠŠdivé‡Œçš„pæ ‡ç­¾ç›´æ¥æŒªåˆ°bodyä¸‹é¢ï¼ŸVueå°±æŠ“ä½äº†è¿™ç‚¹ï¼ŒDiffçš„æ—¶å€™åªé€å±‚å¯¹æ¯”èŠ‚ç‚¹ã€‚è¦æ˜¯æŸä¸€å±‚æŸä¸ªèŠ‚ç‚¹æ²¡äº†ï¼Œç›´æ¥åˆ äº†å®ƒå’Œå®ƒçš„å­èŠ‚ç‚¹ï¼Œæ ¹æœ¬ä¸å¾€ä¸‹é’»â€”â€”çœäº†å¤§ç¬”éå†çš„åŠŸå¤«ã€‚</p>
<p>å°±é è¿™æ‹›ï¼ŒDiffçš„æ—¶é—´å¤æ‚åº¦ä»å“äººçš„O(nÂ³)ï¼ˆå…¨é‡å¯¹æ¯”ï¼‰é™åˆ°äº†O(n)ï¼ˆé¡ºç€æ‰«ä¸€éï¼‰ï¼Œæ€§èƒ½ç›´æ¥ä¸Šäº†ä¸ªå°é˜¶ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼šæ—§æ ‘æ˜¯divï¼Œæ–°æ ‘ä¹Ÿæ˜¯divï¼Œå°±æ¥ç€æ¯”å®ƒä»¬çš„å­èŠ‚ç‚¹ï¼›è¦æ˜¯æ–°æ ‘è¿™å„¿å˜æˆäº†spanï¼Œé‚£æ²¡äºŒè¯â€”â€”æŠŠæ—§divè¿é”…ç«¯ï¼Œç›´æ¥æ’æ–°spanè¿›å»ã€‚</p>
<h4 data-id="heading-4">2. å…ˆçœ‹ç±»å‹ï¼Œä¸å¯¹å°±æ¢</h4>
<p>åŒå±‚å¯¹æ¯”æ—¶ï¼ŒVueå…ˆçœ‹èŠ‚ç‚¹â€œèº«ä»½â€â€”â€”æ˜¯pæ ‡ç­¾è¿˜æ˜¯buttonï¼Œæ˜¯æ™®é€šç»„ä»¶è¿˜æ˜¯è·¯ç”±ç»„ä»¶ã€‚</p>
<ul>
<li>è¦æ˜¯ç±»å‹ä¸ä¸€æ ·ï¼ˆæ¯”å¦‚æ—§çš„æ˜¯pï¼Œæ–°çš„æ˜¯buttonï¼‰ï¼šç›´æ¥åˆ¤å®šè¿™ä¿©æ˜¯â€œå®Œå…¨ä¸åŒçš„èŠ‚ç‚¹â€ï¼Œåˆ æ—§çš„æ’æ–°çš„å°±è¡Œã€‚æ¯•ç«Ÿç±»å‹éƒ½å˜äº†ï¼Œå†…éƒ¨ç»“æ„å¤§æ¦‚ç‡ä¹Ÿä¸ä¸€æ ·ï¼Œå†æ¯”ä¸‹å»çº¯å±æµªè´¹æ—¶é—´ã€‚</li>
<li>è¦æ˜¯ç±»å‹ç›¸åŒï¼šå†å»ç»†æŠ å±æ€§ï¼ˆclassã€styleè¿™äº›ï¼‰å’Œå­èŠ‚ç‚¹ï¼Œç²¾å‡†æ›´æ–°å˜åŒ–çš„åœ°æ–¹ã€‚</li>
</ul>
<h4 data-id="heading-5">3. é keyè®¤äººï¼Œé¿å…å¼ å† ææˆ´</h4>
<p>è¿™æ‹›æœ€å®¹æ˜“è¢«æ–°æ‰‹å¿½ç•¥ï¼Œä½†æ°æ°æ˜¯Diffçš„â€œç²¾å‡†åº¦å…³é”®â€ã€‚æ¯”å¦‚æ¸²æŸ“åˆ—è¡¨ï¼Œå…¨æ˜¯liæ ‡ç­¾ï¼Œå…‰çœ‹ç±»å‹æ ¹æœ¬åˆ†ä¸æ¸…è°æ˜¯è°â€”â€”å“ªä¸ªè¯¥ç•™ï¼Ÿå“ªä¸ªæ˜¯æ–°åŠ çš„ï¼Ÿå“ªä¸ªè¢«åˆ äº†ï¼Ÿ</p>
<p>keyå°±æ˜¯ç»™æ¯ä¸ªèŠ‚ç‚¹å‘çš„â€œèº«ä»½è¯â€ï¼Œè®©Vueä¸€çœ¼å°±èƒ½è®¤å‡ºå®ƒçš„â€œå‰ä¸–ä»Šç”Ÿâ€ã€‚å’±ä»¬çœ‹ä¸¤ç»„ä»£ç å¯¹æ¯”ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- åä¾‹å­ï¼šç”¨indexå½“key --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"(item, index) in list"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"index"</span>&gt;</span>{{ item.name }}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å¥½ä¾‹å­ï¼šç”¨å”¯ä¸€IDå½“key --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in list"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"item.id"</span>&gt;</span>{{ item.name }}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
</code></pre>
<p>æ—¥å¸¸å¼€å‘é‡Œï¼Œåˆ—è¡¨å¢åˆ æ”¹æŸ¥æ˜¯å¸¸äº‹ã€‚ç”¨item.idè¿™ç§å”¯ä¸€keyï¼ŒVueèƒ½ç²¾å‡†åŒ¹é…åˆ°å¯å¤ç”¨çš„èŠ‚ç‚¹ï¼Œåªæ”¹å†…å®¹ä¸ç”¨é‡å»ºDOMï¼›ä½†è¦æ˜¯ç”¨indexå½“keyï¼Œåˆ—è¡¨ä¸€æ’åºï¼Œindexå’ŒèŠ‚ç‚¹å°±â€œå¯¹ä¸ä¸Šå·â€äº†â€”â€”Vueä¼šè¯¯åˆ¤èŠ‚ç‚¹å˜åŒ–ï¼Œè¦ä¹ˆçåˆ çå»ºæµªè´¹æ€§èƒ½ï¼Œè¦ä¹ˆæ•°æ®å’ŒèŠ‚ç‚¹å¯¹åº”é”™äº†ï¼Œå‡ºå„ç§è¯¡å¼‚BUGã€‚</p>
<p>è¡€çš„æ•™è®­ï¼škeyå¿…é¡»æ˜¯â€œä¸å˜ä¸”å”¯ä¸€â€çš„ï¼indexå’Œéšæœºæ•°ä¸è¡Œï¼</p>
<h3 data-id="heading-6">Diffæ˜¯æ€ä¹ˆè·‘èµ·æ¥çš„ï¼Ÿä»æ ¹åˆ°å­çš„å®Œæ•´æµç¨‹</h3>
<p>æŠŠè¿™ä¸‰ä¸ªç­–ç•¥è½åœ°ï¼ŒVue Diffçš„æ‰§è¡Œé€»è¾‘å°±æ¸…æ™°äº†ã€‚å’±ä»¬ä»¥Vue2ä¸ºä¾‹å­æ‹†è§£ï¼ˆVue3æ˜¯å‡çº§æ¬¾ï¼Œåé¢å•ç‹¬è¯´ï¼‰ï¼Œæ•´ä¸ªè¿‡ç¨‹åˆ†â€œæ ¹èŠ‚ç‚¹å¯¹æ¯”â€å’Œâ€œå­èŠ‚ç‚¹å¯¹æ¯”â€ä¸¤æ­¥èµ°ã€‚</p>
<h4 data-id="heading-7">ç¬¬ä¸€æ­¥ï¼šæ ¹èŠ‚ç‚¹â€œåˆç­›â€</h4>
<p>å…ˆæ‹¿æ–°æ—§è™šæ‹ŸDOMçš„æ ¹èŠ‚ç‚¹å¼€åˆ€ï¼Œåˆ†ä¸‰ç§æƒ…å†µå¤„ç†ï¼Œç‰¹åˆ«ç›´æ¥ï¼š</p>
<ol>
<li><strong>æ–°æ ¹èŠ‚ç‚¹æ²¡äº†</strong>ï¼šæ—§æ ¹èŠ‚ç‚¹å¯¹åº”çš„çœŸå®DOMç›´æ¥åˆ ã€‚</li>
<li><strong>æ—§æ ¹èŠ‚ç‚¹æ²¡äº†</strong>ï¼šæ–°æ ¹èŠ‚ç‚¹ç›´æ¥æ¸²æŸ“æˆçœŸå®DOMæ’é¡µé¢ä¸Šã€‚</li>
<li><strong>æ–°æ—§éƒ½åœ¨</strong>ï¼šå…ˆçœ‹ç±»å‹â€”â€”ç±»å‹ä¸å¯¹å°±æ¢ï¼Œç±»å‹å¯¹äº†å°±æ¥ç€æ›´å±æ€§ã€æ¯”å­èŠ‚ç‚¹ã€‚</li>
</ol>
<p>å±æ€§æ›´æ–°å¾ˆç®€å•ï¼šæ¯”å¦‚æ—§èŠ‚ç‚¹classæ˜¯redï¼Œæ–°çš„æ˜¯blueï¼Œå°±åªæ”¹classè¿™ä¸€ä¸ªå±æ€§ï¼Œå…¶ä»–ä¸åŠ¨â€”â€”ç»ä¸åšå¤šä½™æ“ä½œã€‚</p>
<h4 data-id="heading-8">ç¬¬äºŒæ­¥ï¼šå­èŠ‚ç‚¹â€œç»†æ¯”â€ï¼ˆåˆ—è¡¨Diffçš„é‡å¤´æˆï¼‰</h4>
<p>å­èŠ‚ç‚¹å¯¹æ¯”æ˜¯Diffæœ€ç»•çš„åœ°æ–¹ï¼Œä½†Vue2çš„â€œåŒæŒ‡é’ˆæ³•â€æŠŠå®ƒæ‹å¾—å¾ˆæ˜ç™½ã€‚ç®€å•è¯´å°±æ˜¯åœ¨æ–°æ—§å­èŠ‚ç‚¹åˆ—è¡¨çš„é¦–å°¾å„æ”¾ä¸€ä¸ªæŒ‡é’ˆï¼Œé€šè¿‡ç§»åŠ¨æŒ‡é’ˆå¿«é€Ÿæ‰¾åŒ¹é…çš„èŠ‚ç‚¹ï¼Œåˆ†å››æ­¥èµ°ï¼š</p>
<ol>
<li><strong>é¦–å°¾é…å¯¹</strong>ï¼šæ—§å¤´å¯¹æ–°å¤´ã€æ—§å°¾å¯¹æ–°å°¾ï¼Œèƒ½å¯¹ä¸Šå°±ç›´æ¥å¤ç”¨ï¼ŒæŒ‡é’ˆå¾€ä¸­é—´æŒªã€‚</li>
<li><strong>æ—§å°¾å¯¹æ–°å¤´</strong>ï¼šè¦æ˜¯æ—§å°¾å’Œæ–°å¤´é…ä¸Šäº†ï¼Œè¯´æ˜è¿™èŠ‚ç‚¹è¢«ç§»åˆ°æœ€å‰é¢äº†â€”â€”å¤ç”¨å®ƒï¼Œå†æŠŠå®ƒæŒªåˆ°å¯¹åº”ä½ç½®ã€‚</li>
<li><strong>æ—§å¤´å¯¹æ–°å°¾</strong>ï¼šæ—§å¤´å’Œæ–°å°¾é…ä¸Šï¼Œå°±æ˜¯èŠ‚ç‚¹è¢«ç§»åˆ°æœ€åäº†ï¼Œå¤ç”¨åè°ƒæŒ‡é’ˆå°±è¡Œã€‚</li>
<li><strong>keyå…œåº•</strong>ï¼šå‰é¢éƒ½æ²¡é…ä¸Šï¼Œå°±ç”¨æ–°èŠ‚ç‚¹çš„keyå»æ—§åˆ—è¡¨é‡Œæœã€‚æœåˆ°äº†å°±å¤ç”¨ç§»åŠ¨ï¼Œæœä¸åˆ°å°±æ–°å¢ï¼›æœ€åæŠŠæ—§åˆ—è¡¨é‡Œæ²¡é…ä¸Šçš„èŠ‚ç‚¹å…¨åˆ æ‰ã€‚</li>
</ol>
<p>è¿™å¥—é€»è¾‘å¯¹ä»˜åˆ—è¡¨å¢åˆ ã€é¦–å°¾ç§»åŠ¨ç‰¹åˆ«é«˜æ•ˆï¼Œä½†æœ‰ä¸ªå°çŸ­æ¿â€”â€”åœ¨åˆ—è¡¨ä¸­é—´æ’èŠ‚ç‚¹æ—¶ï¼Œå¯èƒ½è¦å¤šæŒªå‡ æ¬¡ã€‚è¿™ä¹Ÿæ˜¯Vue3 Diffé‡ç‚¹ä¼˜åŒ–çš„åœ°æ–¹ã€‚</p>
<h3 data-id="heading-9">Vue2 vs Vue3ï¼šDiffç®—æ³•çš„â€œè¿›åŒ–å²â€</h3>
<p>Vue3çš„Diffæ²¡ä¸¢æ ¸å¿ƒæ€è·¯ï¼Œä½†åœ¨æ€§èƒ½ä¸Šåšäº†å¤§å‡çº§â€”â€”ç›®æ ‡å¾ˆæ˜ç¡®ï¼šå¤§å‹åˆ—è¡¨æ›´æ–°æ—¶æ›´å¿«ã€æ›´çœèµ„æºã€‚æ ¸å¿ƒå·®å¼‚å°±ä¸‰ç‚¹ï¼Œå’±ä»¬ç”¨è¡¨æ ¼çœ‹å¾—æ›´æ¸…æ¥šï¼š</p>






























<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>Vue2 Diff</th><th>Vue3 Diff</th></tr></thead><tbody><tr><td>æ ¸å¿ƒç®—æ³•</td><td>åŒæŒ‡é’ˆæ³•ï¼ˆé¦–å°¾å¯¹æ¯”ï¼‰</td><td>å¿«é€ŸDiffï¼ˆåŸºäºæœ€é•¿é€’å¢å­åºåˆ—ï¼‰</td></tr><tr><td>å¤„ç†æ•ˆç‡</td><td>ä¸­é—´æ’å…¥èŠ‚ç‚¹æ—¶éœ€å¤šæ¬¡ç§»åŠ¨</td><td>é€šè¿‡æœ€é•¿é€’å¢å­åºåˆ—ç¡®å®šæœ€å°‘ç§»åŠ¨æ¬¡æ•°</td></tr><tr><td>ç¼–è¯‘ä¼˜åŒ–</td><td>æ— ç¼–è¯‘å¹²é¢„ï¼Œçº¯è¿è¡Œæ—¶Diff</td><td>ç¼–è¯‘æ—¶æ ‡è®°é™æ€èŠ‚ç‚¹ï¼ŒDiffæ—¶ç›´æ¥è·³è¿‡</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>ä¸­å°å‹åˆ—è¡¨ï¼Œç®€å•DOMç»“æ„</td><td>å¤§å‹åˆ—è¡¨ï¼Œå¤æ‚DOMç»“æ„</td></tr></tbody></table>
<p>ä¸¾ä¸ªå®åœ¨çš„ä¾‹å­ï¼š1000ä¸ªèŠ‚ç‚¹çš„åˆ—è¡¨ï¼Œåœ¨ä¸­é—´æ’ä¸€ä¸ªæ–°èŠ‚ç‚¹ã€‚Vue2å¯èƒ½è¦æŒªåŠ¨åé¢500ä¸ªèŠ‚ç‚¹æ‰èƒ½æå®šï¼Œè€ŒVue3é â€œæœ€é•¿é€’å¢å­åºåˆ—â€ç®—æ³•ï¼Œèƒ½ç²¾å‡†ç®—å‡ºâ€œå“ªäº›èŠ‚ç‚¹ä¸ç”¨åŠ¨â€ï¼ŒåªæŒªå¿…è¦çš„å‡ ä¸ªâ€”â€”æ€§èƒ½æå‡ä¸æ˜¯ä¸€ç‚¹åŠç‚¹ã€‚</p>
<h3 data-id="heading-10">å®æˆ˜é¿å‘ï¼šæ‡‚Diffæ‰èƒ½å°‘è¸©å‘</h3>
<p>ææ‡‚Diffä¸æ˜¯ä¸ºäº†é¢è¯•èƒŒé¢˜ï¼Œè€Œæ˜¯çœŸèƒ½å¸®ä½ å†™å‡ºæ›´ä¸æ»‘çš„ä»£ç ã€‚è¿™ä¸‰ä¸ªå®æˆ˜åœºæ™¯ï¼Œä¸€å®šè¦è®°ç‰¢ã€‚</p>
<h4 data-id="heading-11">1. v-forçš„keyï¼Œå°±ç”¨åç«¯ç»™çš„å”¯ä¸€ID</h4>
<p>å†å¼ºè°ƒä¸€æ¬¡ï¼škeyå°±ç”¨åç«¯è¿”å›çš„userIdã€goodsIdè¿™ç§â€œå¤©ç”Ÿå”¯ä¸€â€çš„å€¼ã€‚åˆ«å›¾çœäº‹ç”¨indexâ€”â€”åˆ—è¡¨ä¸€æ’åºå°±å‡ºé—®é¢˜ï¼›æ›´åˆ«ç”¨Math.random()â€”â€”æ¯æ¬¡æ¸²æŸ“éƒ½ç”Ÿæˆæ–°keyï¼ŒèŠ‚ç‚¹æ ¹æœ¬æ²¡æ³•å¤ç”¨ï¼Œé¡µé¢ç›´æ¥å˜å¡ã€‚</p>
<h4 data-id="heading-12">2. æ¡ä»¶æ¸²æŸ“åˆ«çæ¢æ ‡ç­¾</h4>
<p>åšæ¡ä»¶æ˜¾ç¤ºæ—¶ï¼Œåˆ«ä¸€ä¼šå„¿ç”¨pä¸€ä¼šå„¿ç”¨divã€‚å°½é‡ç”¨åŒä¸€ä¸ªæ ‡ç­¾é…åˆv-showâ€”â€”æ ‡ç­¾ç±»å‹ä¸å˜ï¼ŒVueåªæ”¹displayå±æ€§ï¼Œæ¯”åˆ æ—§èŠ‚ç‚¹æ’æ–°èŠ‚ç‚¹å¿«å¤šäº†ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- åä¾‹å­ï¼šæ ‡ç­¾ç±»å‹å˜åŒ–ï¼Œè§¦å‘èŠ‚ç‚¹æ›¿æ¢ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"show"</span>&gt;</span>å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-else</span>&gt;</span>å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å¥½ä¾‹å­ï¼šæ ‡ç­¾ç±»å‹ä¸å˜ï¼Œåªæ›´æ–°å†…å®¹ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">"show"</span>&gt;</span>å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<h4 data-id="heading-13">3. é™æ€èŠ‚ç‚¹åˆ«è®©Diffç™½è´¹åŠ²</h4>
<p>é‚£äº›çº¯æ–‡æœ¬ã€æ²¡ç»‘å®šæ•°æ®çš„èŠ‚ç‚¹ï¼ˆæ¯”å¦‚é¡µé¢æ ‡é¢˜ã€å›ºå®šè¯´æ˜ï¼‰ï¼Œå°±æ˜¯â€œé™æ€èŠ‚ç‚¹â€ã€‚Vue3ä¼šè‡ªåŠ¨è¯†åˆ«å®ƒä»¬ï¼ŒDiffæ—¶ç›´æ¥è·³è¿‡ï¼›Vue2é‡Œå¯ä»¥åŠ ä¸ªv-preæŒ‡ä»¤ï¼Œå‘Šè¯‰Vueâ€œè¿™è´§ä¸ç”¨æ¯”â€ï¼Œçœç‚¹æ€§èƒ½ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- é™æ€èŠ‚ç‚¹ï¼ŒDiffæ—¶ä¸å¯¹æ¯” --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-pre</span>&gt;</span>è¿™æ˜¯å›ºå®šå†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<h3 data-id="heading-14">æœ€åæ€»ç»“ï¼šDiffçš„æ ¸å¿ƒåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>è¯´åˆ°åº•ï¼ŒVue Diffç®—æ³•å°±æ˜¯ä¸€å¥—â€œè´´åˆå‰ç«¯å®é™…çš„æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆâ€ã€‚å®ƒæ²¡è¿½æ±‚ç†è®ºä¸Šæœ€å®Œç¾çš„ç®—æ³•ï¼Œè€Œæ˜¯ç”¨â€œåªæ¯”åŒå±‚ã€å…ˆçœ‹ç±»å‹ã€keyè®¤èŠ‚ç‚¹â€è¿™ä¸‰æ‹›ï¼Œåœ¨â€œæ€§èƒ½â€å’Œâ€œå¤æ‚åº¦â€ä¹‹é—´æ‰¾åˆ°äº†å¹³è¡¡ç‚¹â€”â€”è¿™æ‰æ˜¯æœ€èªæ˜çš„è®¾è®¡ã€‚</p>
<p>æœ€åè®°ç‰¢è¿™ä¸‰å¥è¯ï¼Œå°±ç®—æŠŠDiffåƒé€äº†ï¼š</p>
<ul>
<li>Diffæ˜¯è™šæ‹ŸDOMçš„â€œè¾…åŠ©å·¥å…·â€ï¼Œæ ¸å¿ƒç›®çš„æ˜¯å‡å°‘DOMæ“ä½œï¼›</li>
<li>keyæ˜¯èŠ‚ç‚¹çš„â€œèº«ä»½è¯â€ï¼Œç¨³å®šã€å”¯ä¸€æ˜¯åº•çº¿ï¼›</li>
<li>Vue3çš„Diffé ç¼–è¯‘ä¼˜åŒ–å’Œç®—æ³•å‡çº§ï¼Œå¤æ‚åˆ—è¡¨æ›´æ–°æ›´ç»™åŠ›ã€‚</li>
</ul>
<p>æƒ³æŒ–å¾—æ›´æ·±çš„åŒå­¦ï¼Œç›´æ¥å»ç¿»æºç å°±è¡Œï¼š
Vue2çš„Diffåœ¨src/core/vdom/patch.jsï¼Œ
Vue3çš„åœ¨packages/runtime-core/src/renderer.tsã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äº‹ä»¶å†’æ³¡å’Œäº‹ä»¶æ•è·è¯¦è§£]]></title>    <link>https://juejin.cn/post/7581406561685225518</link>    <guid>https://juejin.cn/post/7581406561685225518</guid>    <pubDate>2025-12-08T13:12:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581406561685225518" data-draft-id="7581406561685094446" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äº‹ä»¶å†’æ³¡å’Œäº‹ä»¶æ•è·è¯¦è§£"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-08T13:12:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹‹æ’å›"/> <meta itemprop="url" content="https://juejin.cn/user/2261046026312318"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äº‹ä»¶å†’æ³¡å’Œäº‹ä»¶æ•è·è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2261046026312318/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹‹æ’å›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T13:12:57.000Z" title="Mon Dec 08 2025 13:12:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atelier-estuary-light">.hljs-comment,.hljs-quote{color:#6c6b5a}.hljs-attribute,.hljs-link,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ba6236}.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#ae7313}.hljs-bullet,.hljs-string,.hljs-symbol{color:#7d9726}.hljs-section,.hljs-title{color:#36a166}.hljs-keyword,.hljs-selector-tag{color:#5f9182}.hljs-addition,.hljs-deletion{color:#22221b;display:inline-block;width:100%}.hljs-deletion{background-color:#ba6236}.hljs-addition{background-color:#7d9726}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#f4f3ec;color:#5f5e4e}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>äº‹ä»¶æµæè¿°äº†äº‹ä»¶åœ¨ DOM æ ‘ä¸­ä¼ æ’­çš„é¡ºåºã€‚ç†è§£äº‹ä»¶æµæ˜¯æŒæ¡äº‹ä»¶å¤„ç†çš„å…³é”®ã€‚</p>
<h2 data-id="heading-0">1. åŸºæœ¬æ¦‚å¿µ</h2>
<h3 data-id="heading-1">äº‹ä»¶æµä¸‰é˜¶æ®µ</h3>
<pre><code class="hljs language-markdown" lang="markdown">// äº‹ä»¶ä¼ æ’­çš„å®Œæ•´æµç¨‹
<span class="hljs-bullet">1.</span> æ•è·é˜¶æ®µ (Capturing Phase): ä»ä¸Šå¾€ä¸‹
<span class="hljs-bullet">2.</span> ç›®æ ‡é˜¶æ®µ (Target Phase): åˆ°è¾¾ç›®æ ‡å…ƒç´ 
<span class="hljs-bullet">3.</span> å†’æ³¡é˜¶æ®µ (Bubbling Phase): ä»ä¸‹å¾€ä¸Š
</code></pre>
<h3 data-id="heading-2">ç¤ºä¾‹ DOM ç»“æ„</h3>
<pre><code class="hljs language-js" lang="js">&lt;div id=<span class="hljs-string">"grandparent"</span> style=<span class="hljs-string">"padding: 50px; background-color: #f0f0f0;"</span>&gt;
  <span class="hljs-title class_">Grandparent</span>
  &lt;div id=<span class="hljs-string">"parent"</span> style=<span class="hljs-string">"padding: 30px; background-color: #e0e0e0;"</span>&gt;
    <span class="hljs-title class_">Parent</span>
    &lt;button id=<span class="hljs-string">"child"</span> style=<span class="hljs-string">"padding: 20px; background-color: #d0d0d0;"</span>&gt;
      <span class="hljs-title class_">Click</span> me!
    &lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// JavaScript</span>
<span class="hljs-keyword">const</span> grandparent = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'grandparent'</span>);
<span class="hljs-keyword">const</span> parent = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'parent'</span>);
<span class="hljs-keyword">const</span> child = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'child'</span>);
</code></pre>
<h2 data-id="heading-3">2. æ•è·é˜¶æ®µ (Capturing Phase)</h2>
<h3 data-id="heading-4">ç‰¹ç‚¹</h3>
<ul>
<li>ä» window â†’ document â†’ ... â†’ ç›®æ ‡å…ƒç´ </li>
<li>è‡ªä¸Šè€Œä¸‹ä¼ æ’­</li>
<li>é»˜è®¤ä¸ç›‘å¬æ­¤é˜¶æ®µ</li>
</ul>
<h3 data-id="heading-5">ä½¿ç”¨æ–¹æ³•</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åœ¨ addEventListener çš„ç¬¬ä¸‰ä¸ªå‚æ•°è®¾ç½®ä¸º true</span>
grandparent.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Grandparent: æ•è·é˜¶æ®µ'</span>);
}, <span class="hljs-literal">true</span>);  <span class="hljs-comment">// true è¡¨ç¤ºåœ¨æ•è·é˜¶æ®µå¤„ç†</span>

parent.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Parent: æ•è·é˜¶æ®µ'</span>);
}, <span class="hljs-literal">true</span>);

child.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Child: æ•è·é˜¶æ®µ'</span>);
}, <span class="hljs-literal">true</span>);
</code></pre>
<h2 data-id="heading-6">3. å†’æ³¡é˜¶æ®µ (Bubbling Phase)</h2>
<h3 data-id="heading-7">ç‰¹ç‚¹</h3>
<ul>
<li>ä»ç›®æ ‡å…ƒç´  â†’ ... â†’ document â†’ window</li>
<li>è‡ªä¸‹è€Œä¸Šä¼ æ’­</li>
<li>é»˜è®¤è¡Œä¸ºï¼ˆç¬¬ä¸‰ä¸ªå‚æ•°ä¸º false æˆ–çœç•¥ï¼‰</li>
</ul>
<h3 data-id="heading-8">ä½¿ç”¨æ–¹æ³•</h3>
<pre><code class="hljs language-js" lang="js">grandparent.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Grandparent: å†’æ³¡é˜¶æ®µ'</span>);
}, <span class="hljs-literal">false</span>);  <span class="hljs-comment">// false æˆ–ä¸æŒ‡å®šè¡¨ç¤ºå†’æ³¡é˜¶æ®µ</span>

parent.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Parent: å†’æ³¡é˜¶æ®µ'</span>);
});

child.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Child: å†’æ³¡é˜¶æ®µ'</span>);
});
</code></pre>
<h2 data-id="heading-9">4. å®Œæ•´äº‹ä»¶æµæ¼”ç¤º</h2>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ¸…ç†ä¹‹å‰çš„ç›‘å¬å™¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">clearAllListeners</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> listeners = [];
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">addListener</span>(<span class="hljs-params">element, handler, useCapture</span>) {
    element.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, handler, useCapture);
    listeners.<span class="hljs-title function_">push</span>({ element, handler, useCapture });
  };
}

<span class="hljs-comment">// æ·»åŠ å®Œæ•´äº‹ä»¶ç›‘å¬</span>
<span class="hljs-keyword">const</span> listener = <span class="hljs-title function_">clearAllListeners</span>();

<span class="hljs-comment">// æ•è·é˜¶æ®µ</span>
<span class="hljs-title function_">listener</span>(grandparent, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'1. Grandparent: æ•è·é˜¶æ®µ'</span>);
}, <span class="hljs-literal">true</span>);

<span class="hljs-title function_">listener</span>(parent, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'2. Parent: æ•è·é˜¶æ®µ'</span>);
}, <span class="hljs-literal">true</span>);

<span class="hljs-title function_">listener</span>(child, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'3. Child: ç›®æ ‡é˜¶æ®µ'</span>);
}, <span class="hljs-literal">true</span>);

<span class="hljs-comment">// å†’æ³¡é˜¶æ®µ</span>
<span class="hljs-title function_">listener</span>(child, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'4. Child: ç›®æ ‡é˜¶æ®µ'</span>);
}, <span class="hljs-literal">false</span>);

<span class="hljs-title function_">listener</span>(parent, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'5. Parent: å†’æ³¡é˜¶æ®µ'</span>);
}, <span class="hljs-literal">false</span>);

<span class="hljs-title function_">listener</span>(grandparent, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'6. Grandparent: å†’æ³¡é˜¶æ®µ'</span>);
}, <span class="hljs-literal">false</span>);

<span class="hljs-comment">// ç‚¹å‡»æŒ‰é’®è¾“å‡ºï¼š</span>
<span class="hljs-comment">// 1. Grandparent: æ•è·é˜¶æ®µ</span>
<span class="hljs-comment">// 2. Parent: æ•è·é˜¶æ®µ</span>
<span class="hljs-comment">// 3. Child: ç›®æ ‡é˜¶æ®µ</span>
<span class="hljs-comment">// 4. Child: ç›®æ ‡é˜¶æ®µ</span>
<span class="hljs-comment">// 5. Parent: å†’æ³¡é˜¶æ®µ</span>
<span class="hljs-comment">// 6. Grandparent: å†’æ³¡é˜¶æ®µ</span>
</code></pre>
<h2 data-id="heading-10">5. äº‹ä»¶å¯¹è±¡</h2>
<h3 data-id="heading-11">event å¯¹è±¡</h3>
<pre><code class="hljs language-js" lang="js">child.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'äº‹ä»¶å¯¹è±¡å±æ€§:'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'event.target:'</span>, event.<span class="hljs-property">target</span>);         <span class="hljs-comment">// å®é™…è§¦å‘çš„å…ƒç´ </span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'event.currentTarget:'</span>, event.<span class="hljs-property">currentTarget</span>); <span class="hljs-comment">// å½“å‰å¤„ç†å…ƒç´ </span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'event.eventPhase:'</span>, event.<span class="hljs-property">eventPhase</span>);     <span class="hljs-comment">// å½“å‰é˜¶æ®µ</span>
  <span class="hljs-comment">// 1: æ•è·, 2: ç›®æ ‡, 3: å†’æ³¡</span>
}, <span class="hljs-literal">false</span>);
</code></pre>
<h2 data-id="heading-12">6. æ§åˆ¶äº‹ä»¶ä¼ æ’­</h2>
<h3 data-id="heading-13">6.1 event.stopPropagation()</h3>
<p>é˜»æ­¢äº‹ä»¶ç»§ç»­ä¼ æ’­</p>
<pre><code class="hljs language-js" lang="js">grandparent.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Grandparent: æ•è·é˜¶æ®µ'</span>);
}, <span class="hljs-literal">true</span>);

parent.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Parent: æ•è·é˜¶æ®µ'</span>);
  e.<span class="hljs-title function_">stopPropagation</span>();  <span class="hljs-comment">// åœæ­¢ä¼ æ’­</span>
}, <span class="hljs-literal">true</span>);

child.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Child: æ°¸è¿œæ‰§è¡Œä¸åˆ°è¿™é‡Œ'</span>);
}, <span class="hljs-literal">true</span>);

<span class="hljs-comment">// ç‚¹å‡» child è¾“å‡ºï¼š</span>
<span class="hljs-comment">// Grandparent: æ•è·é˜¶æ®µ</span>
<span class="hljs-comment">// Parent: æ•è·é˜¶æ®µ</span>
<span class="hljs-comment">// åœæ­¢ä¼ æ’­ï¼Œåç»­äº‹ä»¶ä¸ä¼šæ‰§è¡Œ</span>
</code></pre>
<h3 data-id="heading-14">6.2 event.stopImmediatePropagation()</h3>
<p>é˜»æ­¢äº‹ä»¶ä¼ æ’­ï¼Œå¹¶é˜»æ­¢åŒä¸€å…ƒç´ çš„å…¶ä»–ç›‘å¬å™¨</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">handler1</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'handler1'</span>);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">handler2</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'handler2'</span>);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">handler3</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'handler3 æ‰§è¡Œå‰åœæ­¢'</span>);
  event.<span class="hljs-title function_">stopImmediatePropagation</span>();
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">handler4</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'handler4 ä¸ä¼šæ‰§è¡Œ'</span>);
}

child.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, handler1);
child.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, handler2);
child.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, handler3);
child.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, handler4);

<span class="hljs-comment">// ç‚¹å‡» child è¾“å‡ºï¼š</span>
<span class="hljs-comment">// handler1</span>
<span class="hljs-comment">// handler2</span>
<span class="hljs-comment">// handler3 æ‰§è¡Œå‰åœæ­¢</span>
<span class="hljs-comment">// handler4 ä¸ä¼šæ‰§è¡Œ</span>
</code></pre>
<h3 data-id="heading-15">6.3 event.preventDefault()</h3>
<p>é˜»æ­¢é»˜è®¤è¡Œä¸º</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'myLink'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
  e.<span class="hljs-title function_">preventDefault</span>();  <span class="hljs-comment">// é˜»æ­¢é“¾æ¥è·³è½¬</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é“¾æ¥è¢«ç‚¹å‡»ï¼Œä½†ä¸ä¼šè·³è½¬'</span>);
});

form.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'submit'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
  e.<span class="hljs-title function_">preventDefault</span>();  <span class="hljs-comment">// é˜»æ­¢è¡¨å•æäº¤</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¡¨å•æäº¤è¢«é˜»æ­¢'</span>);
});
</code></pre>
<h2 data-id="heading-16">7. äº‹ä»¶å§”æ‰˜ (Event Delegation)</h2>
<h3 data-id="heading-17">7.1 ä½¿ç”¨å†’æ³¡æœºåˆ¶</h3>
<pre><code class="hljs language-js" lang="js">&lt;ul id=<span class="hljs-string">"todoList"</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>ä»»åŠ¡1 <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"delete"</span>&gt;</span>åˆ é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>ä»»åŠ¡2 <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"delete"</span>&gt;</span>åˆ é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>ä»»åŠ¡3 <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"delete"</span>&gt;</span>åˆ é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>ä»»åŠ¡4 <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"delete"</span>&gt;</span>åˆ é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>
&lt;/ul&gt;
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// âŒ ä½æ•ˆçš„æ–¹æ³•ï¼šä¸ºæ¯ä¸ªæŒ‰é’®æ·»åŠ ç›‘å¬å™¨</span>
<span class="hljs-keyword">const</span> buttons = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.delete'</span>);
buttons.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">button</span> =&gt;</span> {
  button.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">parentElement</span>.<span class="hljs-title function_">remove</span>();
  });
});

<span class="hljs-comment">// âœ… é«˜æ•ˆçš„äº‹ä»¶å§”æ‰˜</span>
<span class="hljs-keyword">const</span> todoList = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'todoList'</span>);
todoList.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
  <span class="hljs-keyword">if</span> (event.<span class="hljs-property">target</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">contains</span>(<span class="hljs-string">'delete'</span>)) {
    event.<span class="hljs-property">target</span>.<span class="hljs-property">parentElement</span>.<span class="hljs-title function_">remove</span>();
  }
});
</code></pre>
<h3 data-id="heading-18">7.2 åŠ¨æ€æ·»åŠ å…ƒç´ </h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ·»åŠ æ–°ä»»åŠ¡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">addNewTask</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> newLi = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'li'</span>);
  newLi.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`æ–°ä»»åŠ¡ &lt;button class="delete"&gt;åˆ é™¤&lt;/button&gt;`</span>;
  todoList.<span class="hljs-title function_">appendChild</span>(newLi);
  <span class="hljs-comment">// æ— éœ€ä¸ºæ–°æŒ‰é’®æ·»åŠ äº‹ä»¶ç›‘å¬</span>
}
</code></pre>
<h2 data-id="heading-19">8. å®é™…åº”ç”¨ç¤ºä¾‹</h2>
<h3 data-id="heading-20">ç¤ºä¾‹1ï¼šåµŒå¥—èœå•</h3>
<pre><code class="hljs language-js" lang="js">&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"menu"</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"menu-toggle"</span>&gt;</span>èœå•1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"submenu"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>é€‰é¡¹1<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>é€‰é¡¹2<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>é€‰é¡¹3<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/div&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"menu"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"menu-toggle"</span>&gt;</span>èœå•2<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"submenu"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>é€‰é¡¹A<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>é€‰é¡¹B<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// äº‹ä»¶å§”æ‰˜å¤„ç†æ‰€æœ‰èœå•</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
  <span class="hljs-keyword">const</span> target = event.<span class="hljs-property">target</span>;
  
  <span class="hljs-keyword">if</span> (target.<span class="hljs-property">classList</span>.<span class="hljs-title function_">contains</span>(<span class="hljs-string">'menu-toggle'</span>)) {
    <span class="hljs-comment">// åˆ‡æ¢èœå•</span>
    <span class="hljs-keyword">const</span> submenu = target.<span class="hljs-property">nextElementSibling</span>;
    submenu.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = submenu.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> === <span class="hljs-string">'block'</span> ? <span class="hljs-string">'none'</span> : <span class="hljs-string">'block'</span>;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (target.<span class="hljs-property">tagName</span> === <span class="hljs-string">'A'</span>) {
    <span class="hljs-comment">// å¤„ç†èœå•é¡¹ç‚¹å‡»</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é€‰æ‹©äº†:'</span>, target.<span class="hljs-property">textContent</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// ç‚¹å‡»å¤–éƒ¨ï¼Œå…³é—­æ‰€æœ‰èœå•</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.submenu'</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">menu</span> =&gt;</span> {
      menu.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>;
    });
  }
});
</code></pre>
<h3 data-id="heading-21">ç¤ºä¾‹2ï¼šæ¨¡æ€æ¡†</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// äº‹ä»¶å§”æ‰˜å®ç°ç‚¹å‡»å¤–éƒ¨å…³é—­</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
  <span class="hljs-keyword">const</span> modal = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'modal'</span>);
  <span class="hljs-keyword">const</span> closeBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'closeModal'</span>);
  <span class="hljs-keyword">const</span> openBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'openModal'</span>);
  
  <span class="hljs-keyword">if</span> (event.<span class="hljs-property">target</span> === openBtn) {
    modal.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'block'</span>;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (event.<span class="hljs-property">target</span> === closeBtn || event.<span class="hljs-property">target</span> === modal) {
    modal.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (modal.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> === <span class="hljs-string">'block'</span>) {
    <span class="hljs-comment">// é˜²æ­¢å†’æ³¡</span>
    event.<span class="hljs-title function_">stopPropagation</span>();
  }
});

<span class="hljs-comment">// é˜»æ­¢æ¨¡æ€æ¡†å†…å®¹ç‚¹å‡»å…³é—­</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'modalContent'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
  event.<span class="hljs-title function_">stopPropagation</span>();
});
</code></pre>
<h2 data-id="heading-22">9. æ€§èƒ½ä¼˜åŒ–</h2>
<h3 data-id="heading-23">9.1 å‡å°‘äº‹ä»¶ç›‘å¬å™¨æ•°é‡</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// âŒ æ€§èƒ½å·®ï¼šæ¯ä¸ªå…ƒç´ éƒ½æ·»åŠ ç›‘å¬å™¨</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.item'</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
  item.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, handleClick);
});

<span class="hljs-comment">// âœ… æ€§èƒ½å¥½ï¼šä¸€ä¸ªçˆ¶å…ƒç´ ç›‘å¬</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'container'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
  <span class="hljs-keyword">if</span> (event.<span class="hljs-property">target</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">contains</span>(<span class="hljs-string">'item'</span>)) {
    <span class="hljs-title function_">handleClick</span>(event);
  }
});

<span class="hljs-comment">// æˆ–è€…ä½¿ç”¨ closest</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
  <span class="hljs-keyword">const</span> item = event.<span class="hljs-property">target</span>.<span class="hljs-title function_">closest</span>(<span class="hljs-string">'.item'</span>);
  <span class="hljs-keyword">if</span> (item) {
    <span class="hljs-title function_">handleClick</span>(event, item);
  }
});
</code></pre>
<h3 data-id="heading-24">9.2 é˜²æŠ–å’ŒèŠ‚æµ</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// èŠ‚æµå¤„ç†</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">throttle</span>(<span class="hljs-params">func, delay</span>) {
  <span class="hljs-keyword">let</span> lastCall = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
    <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">if</span> (now - lastCall &gt;= delay) {
      lastCall = now;
      func.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
    }
  };
}

<span class="hljs-comment">// é˜²æŠ–å¤„ç†</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">debounce</span>(<span class="hljs-params">func, delay</span>) {
  <span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
    <span class="hljs-built_in">clearTimeout</span>(timer);
    timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      func.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
    }, delay);
  };
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, <span class="hljs-title function_">throttle</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ»šåŠ¨äº‹ä»¶ï¼ˆèŠ‚æµï¼‰'</span>);
}, <span class="hljs-number">100</span>));

<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-title function_">debounce</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è°ƒæ•´å¤§å°äº‹ä»¶ï¼ˆé˜²æŠ–ï¼‰'</span>);
}, <span class="hljs-number">250</span>));
</code></pre>
<h2 data-id="heading-25">10. äº‹ä»¶é˜¶æ®µå¸¸é‡</h2>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// äº‹ä»¶é˜¶æ®µå¸¸é‡</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Event</span> = {
  <span class="hljs-attr">NONE</span>: <span class="hljs-number">0</span>,            <span class="hljs-comment">// æ— </span>
  <span class="hljs-attr">CAPTURING_PHASE</span>: <span class="hljs-number">1</span>,  <span class="hljs-comment">// æ•è·</span>
  <span class="hljs-attr">AT_TARGET</span>: <span class="hljs-number">2</span>,        <span class="hljs-comment">// ç›®æ ‡</span>
  <span class="hljs-attr">BUBBLING_PHASE</span>: <span class="hljs-number">3</span>    <span class="hljs-comment">// å†’æ³¡</span>
};

<span class="hljs-comment">// ä½¿ç”¨</span>
element.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
  <span class="hljs-keyword">switch</span>(event.<span class="hljs-property">eventPhase</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-title class_">Event</span>.<span class="hljs-property">CAPTURING_PHASE</span>:
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ•è·é˜¶æ®µ'</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-title class_">Event</span>.<span class="hljs-property">AT_TARGET</span>:
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç›®æ ‡é˜¶æ®µ'</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-title class_">Event</span>.<span class="hljs-property">BUBBLING_PHASE</span>:
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å†’æ³¡é˜¶æ®µ'</span>);
      <span class="hljs-keyword">break</span>;
  }
}, <span class="hljs-literal">true</span>);
</code></pre>
<h2 data-id="heading-26">11. é«˜çº§æŠ€å·§</h2>
<h3 data-id="heading-27">11.1 è‡ªå®šä¹‰äº‹ä»¶</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åˆ›å»ºè‡ªå®šä¹‰äº‹ä»¶</span>
<span class="hljs-keyword">const</span> customEvent = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomEvent</span>(<span class="hljs-string">'myEvent'</span>, {
  <span class="hljs-attr">bubbles</span>: <span class="hljs-literal">true</span>,     <span class="hljs-comment">// æ˜¯å¦å†’æ³¡</span>
  <span class="hljs-attr">cancelable</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// æ˜¯å¦å¯å–æ¶ˆ</span>
  <span class="hljs-attr">detail</span>: {          <span class="hljs-comment">// è‡ªå®šä¹‰æ•°æ®</span>
    <span class="hljs-attr">message</span>: <span class="hljs-string">'Hello World'</span>,
    <span class="hljs-attr">time</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()
  }
});

<span class="hljs-comment">// ç›‘å¬è‡ªå®šä¹‰äº‹ä»¶</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'myEvent'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è‡ªå®šä¹‰äº‹ä»¶è§¦å‘:'</span>, event.<span class="hljs-property">detail</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ˜¯å¦å†’æ³¡:'</span>, event.<span class="hljs-property">bubbles</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç›®æ ‡å…ƒç´ :'</span>, event.<span class="hljs-property">target</span>);
});

<span class="hljs-comment">// è§¦å‘äº‹ä»¶</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">dispatchEvent</span>(customEvent);
}, <span class="hljs-number">1000</span>);
</code></pre>
<h3 data-id="heading-28">11.2 ä¸€æ¬¡æ€§äº‹ä»¶ç›‘å¬</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä¼ ç»Ÿæ–¹æ³•</span>
<span class="hljs-keyword">let</span> handled = <span class="hljs-literal">false</span>;
element.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span> <span class="hljs-title function_">handler</span>(<span class="hljs-params">event</span>) {
  <span class="hljs-keyword">if</span> (handled) <span class="hljs-keyword">return</span>;
  handled = <span class="hljs-literal">true</span>;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åªæ‰§è¡Œä¸€æ¬¡'</span>);
  element.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'click'</span>, handler);
});

<span class="hljs-comment">// ä½¿ç”¨ { once: true }</span>
element.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åªæ‰§è¡Œä¸€æ¬¡'</span>);
}, { <span class="hljs-attr">once</span>: <span class="hljs-literal">true</span> });

<span class="hljs-comment">// æ•è·é˜¶æ®µä¹Ÿé€‚ç”¨</span>
element.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ•è·é˜¶æ®µåªæ‰§è¡Œä¸€æ¬¡'</span>);
}, { <span class="hljs-attr">capture</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">once</span>: <span class="hljs-literal">true</span> });
</code></pre>
<h3 data-id="heading-29">11.3 è¢«åŠ¨äº‹ä»¶ç›‘å¬</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æé«˜æ»šåŠ¨æ€§èƒ½</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'wheel'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
  <span class="hljs-comment">// è¿™é‡Œä¸ä¼šè°ƒç”¨ preventDefault</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ»šåŠ¨äº‹ä»¶'</span>);
}, { <span class="hljs-attr">passive</span>: <span class="hljs-literal">true</span> });

<span class="hljs-comment">// å°è¯•è°ƒç”¨ä¼šå‡ºé”™</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'wheel'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
  <span class="hljs-comment">// åœ¨ passive ä¸º true æ—¶ï¼Œè°ƒç”¨ preventDefault ä¼šæŠ¥é”™</span>
  <span class="hljs-comment">// event.preventDefault(); // TypeError</span>
}, { <span class="hljs-attr">passive</span>: <span class="hljs-literal">true</span> });
</code></pre>
<h2 data-id="heading-30">12. å¸¸è§é—®é¢˜</h2>
<h3 data-id="heading-31">12.1 é˜»æ­¢é»˜è®¤è¡Œä¸ºå’Œå†’æ³¡</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'link'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
  event.<span class="hljs-title function_">preventDefault</span>();  <span class="hljs-comment">// é˜»æ­¢é»˜è®¤è¡Œä¸º</span>
  event.<span class="hljs-title function_">stopPropagation</span>(); <span class="hljs-comment">// é˜»æ­¢å†’æ³¡</span>
  
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é“¾æ¥è¢«ç‚¹å‡»ï¼Œä½†ä¸ä¼šè·³è½¬ï¼Œä¹Ÿä¸ä¼šå†’æ³¡'</span>);
});

<span class="hljs-comment">// åœ¨è¡¨å•ä¸­ä½¿ç”¨</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'form'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'submit'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
  <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">isValid</span>()) {
    event.<span class="hljs-title function_">preventDefault</span>();
    event.<span class="hljs-title function_">stopPropagation</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
});
</code></pre>
<h3 data-id="heading-32">12.2 ç§»é™¤äº‹ä»¶ç›‘å¬å™¨</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç‚¹å‡»äº‹ä»¶'</span>);
}

<span class="hljs-comment">// æ·»åŠ </span>
element.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, handleClick);

<span class="hljs-comment">// ç§»é™¤ï¼ˆå¿…é¡»ä½¿ç”¨ç›¸åŒçš„å‡½æ•°å¼•ç”¨ï¼‰</span>
element.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'click'</span>, handleClick);

<span class="hljs-comment">// âŒ é”™è¯¯ï¼šåŒ¿åå‡½æ•°æ— æ³•ç§»é™¤</span>
element.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åŒ¿åå‡½æ•°'</span>);
});
element.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ— æ³•ç§»é™¤'</span>);
}); <span class="hljs-comment">// ä¸ç”Ÿæ•ˆ</span>
</code></pre>
<h2 data-id="heading-33">13. ç°ä»£æ¡†æ¶ä¸­çš„äº‹ä»¶å¤„ç†</h2>
<h3 data-id="heading-34">React</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">MyComponent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params">event</span>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'React äº‹ä»¶æ˜¯åˆæˆäº‹ä»¶'</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'äº‹ä»¶ç›®æ ‡:'</span>, event.<span class="hljs-property">target</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å†’æ³¡è¡Œä¸º:'</span>, event.<span class="hljs-property">nativeEvent</span>.<span class="hljs-property">bubbles</span>);
  };

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = (<span class="hljs-params">event</span>) =&gt; {
    event.<span class="hljs-title function_">preventDefault</span>();  <span class="hljs-comment">// é˜»æ­¢è¡¨å•æäº¤</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¡¨å•æäº¤è¢«é˜»æ­¢'</span>);
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-35">Vue</h3>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleClick"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> @<span class="hljs-attr">submit.prevent</span>=<span class="hljs-string">"handleSubmit"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">handleClick</span>(<span class="hljs-params">event</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Vue äº‹ä»¶å¤„ç†'</span>);
      event.<span class="hljs-title function_">stopPropagation</span>(); <span class="hljs-comment">// åŸç”Ÿæ–¹æ³•</span>
    },
    <span class="hljs-title function_">handleSubmit</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'.prevent ä¿®é¥°ç¬¦è‡ªåŠ¨é˜»æ­¢é»˜è®¤è¡Œä¸º'</span>);
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-36">14. æ€»ç»“</h2>
<h3 data-id="heading-37">å…³é”®ç‚¹æ€»ç»“</h3>






























<table><thead><tr><th>ç‰¹æ€§</th><th>äº‹ä»¶æ•è·</th><th>äº‹ä»¶å†’æ³¡</th></tr></thead><tbody><tr><td>ä¼ æ’­æ–¹å‘</td><td>ä¸Š â†’ ä¸‹</td><td>ä¸‹ â†’ ä¸Š</td></tr><tr><td>é»˜è®¤å¯ç”¨</td><td>âŒ éœ€æ˜¾å¼è®¾ç½®</td><td>âœ… é»˜è®¤</td></tr><tr><td>ä½¿ç”¨åœºæ™¯</td><td>å°‘ï¼Œç‰¹æ®Šéœ€æ±‚</td><td>å¤šï¼Œäº‹ä»¶å§”æ‰˜</td></tr><tr><td>æ·»åŠ æ–¹æ³•</td><td><code>addEventListener(..., true)</code></td><td><code>addEventListener(..., false)</code></td></tr></tbody></table>
<h3 data-id="heading-38">æœ€ä½³å®è·µ</h3>
<ol>
<li><strong>ä½¿ç”¨äº‹ä»¶å§”æ‰˜</strong>ï¼šå‡å°‘ç›‘å¬å™¨æ•°é‡ï¼Œæé«˜æ€§èƒ½</li>
<li><strong>ç†è§£äº‹ä»¶æµ</strong>ï¼šçŸ¥é“äº‹ä»¶å¦‚ä½•ä¼ æ’­</li>
<li><strong>åˆç†ä½¿ç”¨åœæ­¢ä¼ æ’­</strong>ï¼šä½†ä¸è¦æ»¥ç”¨</li>
<li><strong>ä½¿ç”¨è¢«åŠ¨ç›‘å¬å™¨</strong>ï¼šæé«˜æ»šåŠ¨æ€§èƒ½</li>
<li><strong>æ³¨æ„å†…å­˜æ³„æ¼</strong>ï¼šåŠæ—¶ç§»é™¤ä¸éœ€è¦çš„ç›‘å¬å™¨</li>
<li><strong>åˆ©ç”¨æ¡†æ¶ç‰¹æ€§</strong>ï¼šReact/Vue ç­‰æ¡†æ¶æœ‰ä¼˜åŒ–</li>
</ol>
<h3 data-id="heading-39">è®°å¿†å£è¯€</h3>
<pre><code class="hljs language-html" lang="html">äº‹ä»¶ä¸‰é˜¶æ®µï¼Œæ•è·ã€ç›®æ ‡ å’Œ å†’æ³¡

ä»ä¸Šå¾€ä¸‹ å«æ•è·ï¼Œä»ä¸‹å¾€ä¸Š å«å†’æ³¡

ç›®æ ‡åœ¨ä¸­é—´ï¼Œä¸¤é˜¶æ®µéƒ½è¦åˆ°

å§”æ‰˜ç”¨å†’æ³¡ï¼Œæ€§èƒ½é«˜å¯é 
</code></pre>
<p>é€šè¿‡ç†è§£äº‹ä»¶å†’æ³¡å’Œæ•è·ï¼Œä½ å¯ä»¥æ›´æœ‰æ•ˆåœ°å¤„ç† DOM äº‹ä»¶ï¼Œä¼˜åŒ–æ€§èƒ½ï¼Œå¹¶å†™å‡ºæ›´ä¼˜é›…çš„äº‹ä»¶å¤„ç†ä»£ç ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vercel + Render å…¨æ ˆåšå®¢éƒ¨ç½²å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7581251003330445338</link>    <guid>https://juejin.cn/post/7581251003330445338</guid>    <pubDate>2025-12-08T12:34:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581251003330445338" data-draft-id="7581297888808681522" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vercel + Render å…¨æ ˆåšå®¢éƒ¨ç½²å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-08T12:34:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€æŠ¹æ®‹äº‘"/> <meta itemprop="url" content="https://juejin.cn/user/1574156384092951"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vercel + Render å…¨æ ˆåšå®¢éƒ¨ç½²å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1574156384092951/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€æŠ¹æ®‹äº‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T12:34:59.000Z" title="Mon Dec 08 2025 12:34:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä»é›¶åˆ°éƒ¨ç½²ï¼šä½¿ç”¨ Vercel éƒ¨ç½²å‰ç«¯ã€Render éƒ¨ç½²åç«¯çš„å®Œæ•´å®æ“æ‰‹å†Œ ï¼Œå…¶ä¸­ç”¨åˆ°çš„å®ä¾‹çš†æ˜¯æœ¬äººä¸ªäººé¡¹ç›®<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxiaozhen123321%2Fblog" target="_blank" title="https://github.com/xiaozhen123321/blog" ref="nofollow noopener noreferrer">å®æˆ˜demo</a>ï¼Œéƒ¨ç½²å<a href="https://link.juejin.cn?target=https%3A%2F%2Fvercel.com%2Fxiaozhen123321s-projects%2Fblog-fronted" target="_blank" title="https://vercel.com/xiaozhen123321s-projects/blog-fronted" ref="nofollow noopener noreferrer">å‰ç«¯åœ°å€</a></p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ğŸ“‹ ç›®å½•</h2>
<ol>
<li><a href="#1-%E9%83%A8%E7%BD%B2%E6%9E%B6%E6%9E%84%E6%A6%82%E8%A7%88" title="#1-%E9%83%A8%E7%BD%B2%E6%9E%B6%E6%9E%84%E6%A6%82%E8%A7%88">éƒ¨ç½²æ¶æ„æ¦‚è§ˆ</a></li>
<li><a href="#2-%E5%89%8D%E7%BD%AE%E5%87%86%E5%A4%87" title="#2-%E5%89%8D%E7%BD%AE%E5%87%86%E5%A4%87">å‰ç½®å‡†å¤‡</a></li>
<li><a href="#3-%E7%AC%AC%E4%B8%80%E6%AD%A5%E9%83%A8%E7%BD%B2%E5%90%8E%E7%AB%AF%E5%88%B0-render" title="#3-%E7%AC%AC%E4%B8%80%E6%AD%A5%E9%83%A8%E7%BD%B2%E5%90%8E%E7%AB%AF%E5%88%B0-render">ç¬¬ä¸€æ­¥ï¼šéƒ¨ç½²åç«¯åˆ° Render</a></li>
<li><a href="#4-%E7%AC%AC%E4%BA%8C%E6%AD%A5%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%BA%93" title="#4-%E7%AC%AC%E4%BA%8C%E6%AD%A5%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%BA%93">ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ–æ•°æ®åº“</a></li>
<li><a href="#5-%E7%AC%AC%E4%B8%89%E6%AD%A5%E9%83%A8%E7%BD%B2%E5%89%8D%E7%AB%AF%E5%88%B0-vercel" title="#5-%E7%AC%AC%E4%B8%89%E6%AD%A5%E9%83%A8%E7%BD%B2%E5%89%8D%E7%AB%AF%E5%88%B0-vercel">ç¬¬ä¸‰æ­¥ï¼šéƒ¨ç½²å‰ç«¯åˆ° Vercel</a></li>
<li><a href="#6-%E7%AC%AC%E5%9B%9B%E6%AD%A5%E9%83%A8%E7%BD%B2%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E5%88%B0-vercel" title="#6-%E7%AC%AC%E5%9B%9B%E6%AD%A5%E9%83%A8%E7%BD%B2%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E5%88%B0-vercel">ç¬¬å››æ­¥ï¼šéƒ¨ç½²åå°ç®¡ç†åˆ° Vercel</a></li>
<li><a href="#7-%E7%AC%AC%E4%BA%94%E6%AD%A5%E8%BF%9E%E6%8E%A5%E5%89%8D%E5%90%8E%E7%AB%AF" title="#7-%E7%AC%AC%E4%BA%94%E6%AD%A5%E8%BF%9E%E6%8E%A5%E5%89%8D%E5%90%8E%E7%AB%AF">ç¬¬äº”æ­¥ï¼šè¿æ¥å‰åç«¯</a></li>
<li><a href="#8-%E7%AC%AC%E5%85%AD%E6%AD%A5%E9%AA%8C%E8%AF%81%E9%83%A8%E7%BD%B2" title="#8-%E7%AC%AC%E5%85%AD%E6%AD%A5%E9%AA%8C%E8%AF%81%E9%83%A8%E7%BD%B2">ç¬¬å…­æ­¥ï¼šéªŒè¯éƒ¨ç½²</a></li>
<li><a href="#9-monorepo-%E7%89%B9%E6%AE%8A%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E" title="#9-monorepo-%E7%89%B9%E6%AE%8A%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E">Monorepo ç‰¹æ®Šé…ç½®è¯´æ˜</a></li>
<li><a href="#10-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%AE%8C%E6%95%B4%E6%B8%85%E5%8D%95" title="#10-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%AE%8C%E6%95%B4%E6%B8%85%E5%8D%95">ç¯å¢ƒå˜é‡å®Œæ•´æ¸…å•</a></li>
<li><a href="#11-%E5%85%8D%E8%B4%B9%E9%A2%9D%E5%BA%A6%E8%AF%B4%E6%98%8E" title="#11-%E5%85%8D%E8%B4%B9%E9%A2%9D%E5%BA%A6%E8%AF%B4%E6%98%8E">å…è´¹é¢åº¦è¯´æ˜</a></li>
<li><a href="#12-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5" title="#12-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5">å¸¸è§é—®é¢˜æ’æŸ¥</a></li>
<li><a href="#13-%E4%BC%98%E5%8C%96%E5%BB%BA%E8%AE%AE" title="#13-%E4%BC%98%E5%8C%96%E5%BB%BA%E8%AE%AE">ä¼˜åŒ–å»ºè®®</a></li>
<li><a href="#14-%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2cicd" title="#14-%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2cicd">æŒç»­éƒ¨ç½²ï¼ˆCI/CDï¼‰</a></li>
</ol>
<hr/>
<h2 data-id="heading-1">1. éƒ¨ç½²æ¶æ„æ¦‚è§ˆ</h2>
<h3 data-id="heading-2">éƒ¨ç½²æ¶æ„å›¾</h3>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç”¨æˆ·è®¿é—®                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚                  â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   Vercel (å‰ç«¯)     â”‚  â”‚  Vercel (åå°)    â”‚
         â”‚  blog-frontend     â”‚  â”‚   blog-admin     â”‚
         â”‚  é™æ€èµ„æº + SPA     â”‚  â”‚   ç®¡ç†ç•Œé¢        â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚                  â”‚
                   â”‚  API è¯·æ±‚ (/api) â”‚
                   â”‚                  â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚          Render (åç«¯)                     â”‚
         â”‚         blog-server                       â”‚
         â”‚     Node<span class="hljs-selector-class">.js</span> + Express                     â”‚
         â”‚    (https://blog-<span class="hljs-number">2</span>eqo.onrender.com)      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ PostgreSQL
                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚      Render PostgreSQL                    â”‚
         â”‚         blog-postgres                     â”‚
         â”‚      Database: blog_system                â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-3">æŠ€æœ¯æ ˆ</h3>



































<table><thead><tr><th>ç»„ä»¶</th><th>å¹³å°</th><th>æŠ€æœ¯æ ˆ</th><th>è´¹ç”¨</th></tr></thead><tbody><tr><td><strong>å‰ç«¯</strong></td><td>Vercel</td><td>React + Rsbuild + Ant Design</td><td>å…è´¹</td></tr><tr><td><strong>åå°ç®¡ç†</strong></td><td>Vercel</td><td>React + Rsbuild + Ant Design + Draft.js</td><td>å…è´¹</td></tr><tr><td><strong>åç«¯ API</strong></td><td>Render</td><td>Node.js + Express + TypeScript</td><td>å…è´¹</td></tr><tr><td><strong>æ•°æ®åº“</strong></td><td>Render</td><td>PostgreSQL 16</td><td>å…è´¹</td></tr></tbody></table>
<h3 data-id="heading-4">éƒ¨ç½²é¡ºåº</h3>
<p>âš ï¸ <strong>é‡è¦</strong>ï¼šå¿…é¡»æŒ‰ä»¥ä¸‹é¡ºåºéƒ¨ç½²ï¼Œå› ä¸ºå‰ç«¯éœ€è¦åç«¯ API çš„ URLï¼š</p>
<ol>
<li><strong>åç«¯</strong> â†’ Render (è·å– API URL)</li>
<li><strong>æ•°æ®åº“åˆå§‹åŒ–</strong> â†’ Render Shell</li>
<li><strong>å‰ç«¯</strong> â†’ Vercel (é…ç½® API ä»£ç†)</li>
<li><strong>åå°</strong> â†’ Vercel (é…ç½® API ä»£ç†)</li>
<li><strong>è¿æ¥æµ‹è¯•</strong> â†’ æ›´æ–° CORS é…ç½®</li>
</ol>
<hr/>
<h2 data-id="heading-5">2. å‰ç½®å‡†å¤‡</h2>
<h3 data-id="heading-6">2.1 GitHub ä»“åº“å‡†å¤‡</h3>
<p>ç¡®ä¿ä½ çš„é¡¹ç›®ä»£ç å·²æ¨é€åˆ° GitHubï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> /path/to/blog
git status
git add .
git commit -m <span class="hljs-string">"feat: prepare for deployment"</span>
git push origin main
</code></pre>
<h3 data-id="heading-7">2.2 è´¦å·æ³¨å†Œ</h3>
<p><strong>Render æ³¨å†Œ</strong>ï¼š</p>
<ol>
<li>è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Frender.com" target="_blank" title="https://render.com" ref="nofollow noopener noreferrer">render.com</a></li>
<li>ç‚¹å‡» "Get Started" â†’ "Sign Up with GitHub"</li>
<li>æˆæƒ Render è®¿é—®ä½ çš„ GitHub ä»“åº“</li>
<li>âœ… æ— éœ€ä¿¡ç”¨å¡ï¼Œå®Œå…¨å…è´¹</li>
</ol>
<p><strong>Vercel æ³¨å†Œ</strong>ï¼š</p>
<ol>
<li>è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fvercel.com" target="_blank" title="https://vercel.com" ref="nofollow noopener noreferrer">vercel.com</a></li>
<li>ç‚¹å‡» "Sign Up" â†’ "Continue with GitHub"</li>
<li>æˆæƒ Vercel è®¿é—®ä½ çš„ GitHub ä»“åº“</li>
<li>âœ… æ— éœ€ä¿¡ç”¨å¡ï¼Œå®Œå…¨å…è´¹</li>
</ol>
<h3 data-id="heading-8">2.3 ç¯å¢ƒæ£€æŸ¥</h3>
<p>ç¡®è®¤é¡¹ç›®åŒ…å«ä»¥ä¸‹æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Render é…ç½®</span>
packages/blog-server/render.yaml              âœ…
packages/blog-server/.env.render.example      âœ…

<span class="hljs-comment"># Vercel é…ç½®</span>
packages/blog-frontend/vercel.json            âœ…
packages/blog-admin/vercel.json               âœ…

<span class="hljs-comment"># æ•°æ®åº“åˆå§‹åŒ–</span>
packages/blog-server/database/init.sql        âœ…
packages/blog-server/scripts/init-database.ts âœ…
</code></pre>
<hr/>
<h2 data-id="heading-9">3. ç¬¬ä¸€æ­¥ï¼šéƒ¨ç½²åç«¯åˆ° Render</h2>
<h3 data-id="heading-10">3.1 åˆ›å»º PostgreSQL æ•°æ®åº“</h3>
<ol>
<li>
<p>ç™»å½• <a href="https://link.juejin.cn?target=https%3A%2F%2Fdashboard.render.com%2F" target="_blank" title="https://dashboard.render.com/" ref="nofollow noopener noreferrer">Render Dashboard</a></p>
</li>
<li>
<p>ç‚¹å‡»å³ä¸Šè§’ <strong>"New +"</strong> â†’ é€‰æ‹© <strong>"PostgreSQL"</strong></p>
</li>
<li>
<p>å¡«å†™æ•°æ®åº“é…ç½®ï¼š</p>

































<table><thead><tr><th>å­—æ®µ</th><th>å€¼</th></tr></thead><tbody><tr><td><strong>Name</strong></td><td><code>blog-postgres</code></td></tr><tr><td><strong>Database</strong></td><td><code>blog_system</code></td></tr><tr><td><strong>User</strong></td><td><code>blog_user</code>ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼Œå¯ä¿®æ”¹ï¼‰</td></tr><tr><td><strong>Region</strong></td><td>é€‰æ‹© <strong>Singapore</strong>ï¼ˆç¦»ä¸­å›½æœ€è¿‘ï¼‰</td></tr><tr><td><strong>PostgreSQL Version</strong></td><td>16ï¼ˆé»˜è®¤ï¼‰</td></tr><tr><td><strong>Plan</strong></td><td><strong>Free</strong></td></tr></tbody></table>
</li>
<li>
<p>ç‚¹å‡» <strong>"Create Database"</strong></p>
</li>
<li>
<p>ç­‰å¾…çº¦ 1-2 åˆ†é’Ÿï¼ŒçŠ¶æ€å˜ä¸º <strong>"Available"</strong></p>
</li>
<li>
<p><strong>ä¿å­˜è¿æ¥ä¿¡æ¯</strong>ï¼ˆç¨åéœ€è¦ï¼‰ï¼š</p>
<ul>
<li>è¿›å…¥æ•°æ®åº“ â†’ "Info" æ ‡ç­¾</li>
<li>è®°å½•ï¼š
<ul>
<li><strong>Hostname</strong>ï¼ˆä¾‹å¦‚ï¼š<code>dpg-xxxx-a.singapore-postgres.render.com</code>ï¼‰</li>
<li><strong>Port</strong>ï¼ˆé€šå¸¸æ˜¯ <code>5432</code>ï¼‰</li>
<li><strong>Database</strong>ï¼ˆ<code>blog_system</code>ï¼‰</li>
<li><strong>Username</strong>ï¼ˆ<code>blog_user</code>ï¼‰</li>
<li><strong>Password</strong>ï¼ˆè‡ªåŠ¨ç”Ÿæˆçš„é•¿å¯†ç ï¼‰</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 data-id="heading-11">3.2 åˆ›å»º Web Serviceï¼ˆåç«¯ APIï¼‰</h3>
<ol>
<li>
<p>åœ¨ Render Dashboardï¼Œç‚¹å‡» <strong>"New +"</strong> â†’ <strong>"Web Service"</strong></p>
</li>
<li>
<p>ç‚¹å‡» <strong>"Build and deploy from a Git repository"</strong> â†’ <strong>"Next"</strong></p>
</li>
<li>
<p>é€‰æ‹©ä½ çš„ GitHub ä»“åº“ <code>blog</code>ï¼ˆå¦‚æœæ²¡æœ‰æ˜¾ç¤ºï¼Œç‚¹å‡» "Configure account" æˆæƒï¼‰</p>
</li>
<li>
<p>å¡«å†™æœåŠ¡é…ç½®ï¼š</p>


















































<table><thead><tr><th>å­—æ®µ</th><th>å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>Name</strong></td><td><code>blog-server</code></td><td>æœåŠ¡åç§°</td></tr><tr><td><strong>Region</strong></td><td><strong>Singapore</strong></td><td>ä¸æ•°æ®åº“åŒåŒºåŸŸ</td></tr><tr><td><strong>Branch</strong></td><td><code>main</code></td><td>Git åˆ†æ”¯</td></tr><tr><td><strong>Root Directory</strong></td><td><code>packages/blog-server</code></td><td>âš ï¸ <strong>é‡è¦</strong>ï¼šMonorepo å­ç›®å½•</td></tr><tr><td><strong>Runtime</strong></td><td><strong>Node</strong></td><td>è‡ªåŠ¨æ£€æµ‹</td></tr><tr><td><strong>Build Command</strong></td><td><code>npm install &amp;&amp; npm run build</code></td><td>å®‰è£…ä¾èµ–å¹¶ç¼–è¯‘ TypeScript</td></tr><tr><td><strong>Start Command</strong></td><td><code>npm start</code></td><td>å¯åŠ¨æœåŠ¡</td></tr><tr><td><strong>Plan</strong></td><td><strong>Free</strong></td><td>å…è´¹è®¡åˆ’</td></tr></tbody></table>
</li>
<li>
<p>ç‚¹å‡» <strong>"Advanced"</strong> å±•å¼€é«˜çº§é€‰é¡¹ï¼ˆæš‚ä¸é…ç½®ï¼Œç¨åæ·»åŠ ç¯å¢ƒå˜é‡ï¼‰</p>
</li>
<li>
<p>ç‚¹å‡» <strong>"Create Web Service"</strong></p>
</li>
</ol>
<p>â³ <strong>æ„å»ºè¿‡ç¨‹</strong>ï¼šçº¦ 3-5 åˆ†é’Ÿï¼Œåœ¨ "Logs" æ ‡ç­¾æŸ¥çœ‹è¿›åº¦</p>
<h3 data-id="heading-12">3.3 é…ç½®ç¯å¢ƒå˜é‡</h3>
<p>æ„å»ºå®Œæˆåï¼ˆçŠ¶æ€æ˜¾ç¤º "Live" æˆ– "Deploy failed"ï¼Œå…ˆåˆ«ç®¡ï¼‰ï¼Œé…ç½®ç¯å¢ƒå˜é‡ï¼š</p>
<ol>
<li>
<p>åœ¨ Web Service é¡µé¢ï¼Œç‚¹å‡» <strong>"Environment"</strong> æ ‡ç­¾</p>
</li>
<li>
<p>ç‚¹å‡» <strong>"Add Environment Variable"</strong>ï¼Œé€ä¸ªæ·»åŠ ä»¥ä¸‹å˜é‡ï¼š</p>
</li>
</ol>
<h4 data-id="heading-13">åŸºç¡€é…ç½®</h4>
<pre><code class="hljs language-bash" lang="bash">NODE_ENV=production
</code></pre>
<h4 data-id="heading-14">JWT é…ç½®</h4>
<pre><code class="hljs language-bash" lang="bash">JWT_SECRET=51de2d30c5629597bf6f41dbcf9f41beb714bb31e91adb5899d25fce64202fd9
</code></pre>
<blockquote>
<p>ğŸ’¡ <strong>ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹</strong>ï¼šä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆæ–°å¯†é’¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">node -e <span class="hljs-string">"console.log(require('crypto').randomBytes(32).toString('hex'))"</span>
</code></pre>
</blockquote>
<pre><code class="hljs language-bash" lang="bash">JWT_EXPIRES_IN=7d
</code></pre>
<h4 data-id="heading-15">CORS é…ç½®ï¼ˆç¨åæ›´æ–°ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">FRONTEND_URL=https://your-frontend.vercel.app
</code></pre>
<pre><code class="hljs language-bash" lang="bash">ADMIN_URL=https://your-admin.vercel.app
</code></pre>
<blockquote>
<p>âš ï¸ <strong>æ³¨æ„</strong>ï¼šè¿™ä¸¤ä¸ª URL åœ¨éƒ¨ç½² Vercel åéœ€è¦æ›´æ–°ä¸ºå®é™… URL</p>
</blockquote>
<h4 data-id="heading-16">æ–‡ä»¶ä¸Šä¼ é…ç½®</h4>
<pre><code class="hljs language-bash" lang="bash">MAX_FILE_SIZE=5242880
</code></pre>
<pre><code class="hljs language-bash" lang="bash">ALLOWED_IMAGE_TYPES=image/jpeg,image/png,image/gif,image/webp
</code></pre>
<h4 data-id="heading-17">æ•°æ®åº“é…ç½®ï¼ˆä»æ­¥éª¤ 3.1 å¤åˆ¶ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">DB_HOST=&lt;ä»æ•°æ®åº“ Info å¤åˆ¶ Hostname&gt;
</code></pre>
<pre><code class="hljs language-bash" lang="bash">DB_PORT=5432
</code></pre>
<pre><code class="hljs language-bash" lang="bash">DB_USER=&lt;ä»æ•°æ®åº“ Info å¤åˆ¶ Username&gt;
</code></pre>
<pre><code class="hljs language-bash" lang="bash">DB_PASSWORD=&lt;ä»æ•°æ®åº“ Info å¤åˆ¶ Password&gt;
</code></pre>
<pre><code class="hljs language-bash" lang="bash">DB_NAME=blog_system
</code></pre>
<ol start="3">
<li>
<p>ç‚¹å‡» <strong>"Save Changes"</strong></p>
</li>
<li>
<p>Render ä¼šè‡ªåŠ¨è§¦å‘é‡æ–°éƒ¨ç½²ï¼ˆçº¦ 2 åˆ†é’Ÿï¼‰</p>
</li>
</ol>
<h3 data-id="heading-18">3.4 æŸ¥çœ‹éƒ¨ç½²æ—¥å¿—</h3>
<ol>
<li>åœ¨ "Logs" æ ‡ç­¾ï¼Œç¡®è®¤çœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼š</li>
</ol>
<pre><code class="hljs language-dart" lang="dart">ğŸš€ Server <span class="hljs-keyword">is</span> running <span class="hljs-keyword">on</span> http:<span class="hljs-comment">//0.0.0.0:10000</span>
ğŸ“ Environment: production
ğŸ—„ï¸  Database: blog_system<span class="hljs-meta">@dpg</span>-xxxx.singapore-postgres.render.com:<span class="hljs-number">5432</span>
</code></pre>
<ol start="2">
<li>å¦‚æœçœ‹åˆ°é”™è¯¯ï¼Œæ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®</li>
</ol>
<h3 data-id="heading-19">3.5 è·å– API URL</h3>
<ol>
<li>
<p>åœ¨ Web Service é¡¶éƒ¨ï¼Œå¤åˆ¶æœåŠ¡ URLï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">https:<span class="hljs-comment">//blog-server-xxxx.onrender.com</span>
</code></pre>
</li>
<li>
<p><strong>ä¿å­˜è¿™ä¸ª URL</strong>ï¼Œç¨åéƒ¨ç½²å‰ç«¯æ—¶éœ€è¦</p>
</li>
<li>
<p>æµ‹è¯• APIï¼ˆå¯é€‰ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¥åº·æ£€æŸ¥</span>
curl https://blog-server-xxxx.onrender.com/api/health

<span class="hljs-comment"># è·å–åˆ†ç±»ï¼ˆåº”è¯¥è¿”å›ç©ºæ•°ç»„ï¼Œå› ä¸ºæ•°æ®åº“æœªåˆå§‹åŒ–ï¼‰</span>
curl https://blog-server-xxxx.onrender.com/api/categories
</code></pre>
</li>
</ol>
<hr/>
<h2 data-id="heading-20">4. ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ–æ•°æ®åº“</h2>
<h3 data-id="heading-21">4.1 ä½¿ç”¨ Render Shell</h3>
<ol>
<li>
<p>åœ¨ Web Service é¡µé¢ï¼Œç‚¹å‡» <strong>"Shell"</strong> æ ‡ç­¾</p>
</li>
<li>
<p>ç‚¹å‡» <strong>"Launch Shell"</strong> æŒ‰é’®</p>
</li>
<li>
<p>ç­‰å¾… Shell å¯åŠ¨ï¼ˆçº¦ 10 ç§’ï¼‰</p>
</li>
<li>
<p>åœ¨ Shell ä¸­è¿è¡Œåˆå§‹åŒ–è„šæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm run db:init
</code></pre>
</li>
<li>
<p>æˆåŠŸåä¼šçœ‹åˆ°ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">ğŸš€</span> <span class="hljs-string">Starting</span> <span class="hljs-string">database</span> <span class="hljs-string">initialization...</span>
<span class="hljs-string">âœ…</span> <span class="hljs-string">Connected</span> <span class="hljs-string">to</span> <span class="hljs-string">database</span>
<span class="hljs-string">âœ…</span> <span class="hljs-string">Tables</span> <span class="hljs-string">created</span> <span class="hljs-string">successfully</span>
<span class="hljs-string">âœ…</span> <span class="hljs-string">Seed</span> <span class="hljs-string">data</span> <span class="hljs-string">inserted</span> <span class="hljs-string">successfully</span>
<span class="hljs-string">âœ…</span> <span class="hljs-string">Admin</span> <span class="hljs-string">user</span> <span class="hljs-string">created</span> <span class="hljs-string">successfully</span>
<span class="hljs-string">ğŸ‰</span> <span class="hljs-string">Database</span> <span class="hljs-string">initialization</span> <span class="hljs-string">complete!</span>

<span class="hljs-string">ğŸ“</span> <span class="hljs-attr">Admin credentials:</span>
   <span class="hljs-attr">Username:</span> <span class="hljs-string">admin</span>
   <span class="hljs-attr">Password:</span> <span class="hljs-string">admin123</span>
   <span class="hljs-attr">Email:</span> <span class="hljs-string">admin@blog.com</span>
</code></pre>
</li>
</ol>
<h3 data-id="heading-22">4.2 éªŒè¯æ•°æ®</h3>
<p>åœ¨ Shell ä¸­è¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿›å…¥ PostgreSQLï¼ˆå¦‚æœéœ€è¦ï¼‰</span>
psql <span class="hljs-variable">$DATABASE_URL</span>

<span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰è¡¨</span>
\dt

<span class="hljs-comment"># æŸ¥çœ‹åˆ†ç±»</span>
SELECT * FROM categories;

<span class="hljs-comment"># æŸ¥çœ‹ç®¡ç†å‘˜</span>
SELECT username, email FROM admin_users;

<span class="hljs-comment"># é€€å‡º</span>
\q
</code></pre>
<p>åº”è¯¥çœ‹åˆ°ï¼š</p>
<ul>
<li>4 å¼ è¡¨ï¼š<code>admin_users</code>, <code>categories</code>, <code>articles</code>, <code>images</code></li>
<li>8 ä¸ªåˆ†ç±»ï¼ˆå‰ç«¯å¼€å‘ã€åç«¯å¼€å‘ç­‰ï¼‰</li>
<li>1 ä¸ªç®¡ç†å‘˜è´¦å·</li>
</ul>
<hr/>
<h2 data-id="heading-23">5. ç¬¬ä¸‰æ­¥ï¼šéƒ¨ç½²å‰ç«¯åˆ° Vercel</h2>
<h3 data-id="heading-24">5.1 å¯¼å…¥é¡¹ç›®</h3>
<ol>
<li>
<p>ç™»å½• <a href="https://link.juejin.cn?target=https%3A%2F%2Fvercel.com%2Fdashboard" target="_blank" title="https://vercel.com/dashboard" ref="nofollow noopener noreferrer">Vercel Dashboard</a></p>
</li>
<li>
<p>ç‚¹å‡» <strong>"Add New..." â†’ "Project"</strong></p>
</li>
<li>
<p>é€‰æ‹©ä½ çš„ GitHub ä»“åº“ <code>blog</code></p>
</li>
<li>
<p>ç‚¹å‡» <strong>"Import"</strong></p>
</li>
</ol>
<h3 data-id="heading-25">5.2 é…ç½®é¡¹ç›®ï¼ˆblog-frontendï¼‰</h3>
<p>Vercel ä¼šè‡ªåŠ¨æ£€æµ‹åˆ° Monorepo ç»“æ„ï¼Œç°åœ¨é…ç½®å‰ç«¯ï¼š</p>








































<table><thead><tr><th>å­—æ®µ</th><th>å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>Project Name</strong></td><td><code>blog-frontend</code>ï¼ˆå¯è‡ªå®šä¹‰ï¼‰</td><td>é¡¹ç›®åç§°</td></tr><tr><td><strong>Framework Preset</strong></td><td><strong>Other</strong></td><td>ä¸ä½¿ç”¨é¢„è®¾</td></tr><tr><td><strong>Root Directory</strong></td><td><code>packages/blog-frontend</code></td><td>âš ï¸ <strong>é‡è¦</strong>ï¼šç‚¹å‡» "Edit" ä¿®æ”¹</td></tr><tr><td><strong>Build Command</strong></td><td><code>npm install &amp;&amp; cd packages/blog-frontend &amp;&amp; npm run build</code></td><td>âš ï¸ Monorepo æ„å»ºå‘½ä»¤</td></tr><tr><td><strong>Output Directory</strong></td><td><code>../../dist/packages/blog-frontend</code></td><td>æ„å»ºè¾“å‡ºç›®å½•</td></tr><tr><td><strong>Install Command</strong></td><td><code>npm install --prefix ../.. &amp;&amp; npm install</code></td><td>å®‰è£…ä¾èµ–</td></tr></tbody></table>
<h4 data-id="heading-26">é…ç½®æˆªå›¾è¯´æ˜ä½ç½®</h4>
<p><strong>Root Directory é…ç½®</strong>ï¼š</p>
<ol>
<li>åœ¨ "Build and Output Settings" ä¸‹æ‰¾åˆ° "Root Directory"</li>
<li>ç‚¹å‡» "Edit" æŒ‰é’®</li>
<li>é€‰æ‹© <code>packages/blog-frontend</code></li>
</ol>
<p><strong>Build Command é…ç½®</strong>ï¼š</p>
<ol>
<li>å‹¾é€‰ "Override" å¤é€‰æ¡†</li>
<li>è¾“å…¥å®Œæ•´çš„ Monorepo æ„å»ºå‘½ä»¤</li>
</ol>
<h3 data-id="heading-27">5.3 é…ç½® API é‡å†™ï¼ˆé‡è¦ï¼‰</h3>
<p>âš ï¸ <strong>Vercel é¡¹ç›®é…ç½®ä¼šè¯»å– <code>vercel.json</code></strong>ï¼Œä½†æˆ‘ä»¬æ‰‹åŠ¨ç¡®è®¤ä¸€ä¸‹ï¼š</p>
<ol>
<li>åœ¨éƒ¨ç½²å‰ï¼Œç¡®è®¤é¡¹ç›®æ ¹ç›®å½•çš„ <code>packages/blog-frontend/vercel.json</code> åŒ…å«ï¼š</li>
</ol>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"rewrites"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"source"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/api/:path*"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"destination"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://blog-server-xxxx.onrender.com/api/:path*"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"source"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/(.*)"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"destination"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/index.html"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ol start="2">
<li>
<p><strong>âš ï¸ é‡è¦</strong>ï¼šå°† <code>https://blog-server-xxxx.onrender.com</code> æ›¿æ¢ä¸ºä½ åœ¨æ­¥éª¤ 3.5 è·å–çš„å®é™… Render URL</p>
</li>
<li>
<p>å¦‚æœå·²ä¿®æ”¹ï¼Œæäº¤ä»£ç ï¼š</p>
</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">git add packages/blog-frontend/vercel.json
git commit -m <span class="hljs-string">"fix: update API URL in vercel.json"</span>
git push origin main
</code></pre>
<h3 data-id="heading-28">5.4 éƒ¨ç½²</h3>
<ol>
<li>
<p>é…ç½®å®Œæˆåï¼Œç‚¹å‡» <strong>"Deploy"</strong></p>
</li>
<li>
<p>â³ æ„å»ºæ—¶é—´ï¼šçº¦ 2-3 åˆ†é’Ÿ</p>
</li>
<li>
<p>æˆåŠŸåä¼šæ˜¾ç¤ºï¼š</p>
<pre><code class="hljs">âœ… Deployment Ready
</code></pre>
</li>
<li>
<p>ç‚¹å‡» <strong>"Visit"</strong> æˆ–å¤åˆ¶éƒ¨ç½² URLï¼ˆä¾‹å¦‚ï¼š<code>https://blog-frontend-xxxx.vercel.app</code>ï¼‰</p>
</li>
<li>
<p><strong>ä¿å­˜å‰ç«¯ URL</strong>ï¼Œç¨åéœ€è¦æ›´æ–° Render çš„ CORS é…ç½®</p>
</li>
</ol>
<h3 data-id="heading-29">5.5 éªŒè¯å‰ç«¯éƒ¨ç½²</h3>
<p>è®¿é—®å‰ç«¯ URLï¼Œåº”è¯¥çœ‹åˆ°ï¼š</p>
<ul>
<li>âœ… åšå®¢é¦–é¡µåŠ è½½æ­£å¸¸</li>
<li>âœ… åˆ†ç±»åˆ—è¡¨æ˜¾ç¤ºï¼ˆä» Render API è·å–ï¼‰</li>
<li>âš ï¸ å¯èƒ½æ˜¾ç¤º "æš‚æ— æ–‡ç« "ï¼ˆæ­£å¸¸ï¼Œå› ä¸ºè¿˜æ²¡åˆ›å»ºæ–‡ç« ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-30">6. ç¬¬å››æ­¥ï¼šéƒ¨ç½²åå°ç®¡ç†åˆ° Vercel</h2>
<h3 data-id="heading-31">6.1 éƒ¨ç½²æµç¨‹</h3>
<p>ä¸å‰ç«¯ç±»ä¼¼ï¼Œé‡å¤æ­¥éª¤ 5ï¼Œä½†ä½¿ç”¨ä¸åŒçš„é…ç½®ï¼š</p>
<ol>
<li>
<p>åœ¨ Vercel Dashboardï¼Œç‚¹å‡» <strong>"Add New..." â†’ "Project"</strong></p>
</li>
<li>
<p>å†æ¬¡é€‰æ‹© <code>blog</code> ä»“åº“</p>
</li>
<li>
<p>Vercel ä¼šæç¤º "This repository is already connected"ï¼Œé€‰æ‹© <strong>"Import Anyway"</strong></p>
</li>
<li>
<p>é…ç½®é¡¹ç›®ï¼š</p>
</li>
</ol>

































<table><thead><tr><th>å­—æ®µ</th><th>å€¼</th></tr></thead><tbody><tr><td><strong>Project Name</strong></td><td><code>blog-admin</code></td></tr><tr><td><strong>Framework Preset</strong></td><td><strong>Other</strong></td></tr><tr><td><strong>Root Directory</strong></td><td><code>packages/blog-admin</code></td></tr><tr><td><strong>Build Command</strong></td><td><code>npm install &amp;&amp; cd packages/blog-admin &amp;&amp; npm run build</code></td></tr><tr><td><strong>Output Directory</strong></td><td><code>../../dist/packages/blog-admin</code></td></tr><tr><td><strong>Install Command</strong></td><td><code>npm install --prefix ../.. &amp;&amp; npm install</code></td></tr></tbody></table>
<ol start="5">
<li>
<p>ç¡®è®¤ <code>packages/blog-admin/vercel.json</code> ä¸­çš„ API URL ä¸å‰ç«¯ä¸€è‡´</p>
</li>
<li>
<p>ç‚¹å‡» <strong>"Deploy"</strong></p>
</li>
<li>
<p>è·å–åå° URLï¼ˆä¾‹å¦‚ï¼š<code>https://blog-admin-xxxx.vercel.app</code>ï¼‰</p>
</li>
</ol>
<h3 data-id="heading-32">6.2 éªŒè¯åå°éƒ¨ç½²</h3>
<p>è®¿é—®åå° URLï¼Œåº”è¯¥çœ‹åˆ°ï¼š</p>
<ul>
<li>âœ… ç™»å½•é¡µé¢åŠ è½½æ­£å¸¸</li>
<li>âš ï¸ å…ˆä¸è¦ç™»å½•ï¼ˆCORS è¿˜æœªé…ç½®ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-33">7. ç¬¬äº”æ­¥ï¼šè¿æ¥å‰åç«¯</h2>
<h3 data-id="heading-34">7.1 æ›´æ–° Render çš„ CORS é…ç½®</h3>
<p>ç°åœ¨æˆ‘ä»¬æœ‰äº†å‰ç«¯å’Œåå°çš„ URLï¼Œéœ€è¦æ›´æ–° Render ç¯å¢ƒå˜é‡ï¼š</p>
<ol>
<li>
<p>å›åˆ° Render Dashboard â†’ <code>blog-server</code> æœåŠ¡</p>
</li>
<li>
<p>è¿›å…¥ <strong>"Environment"</strong> æ ‡ç­¾</p>
</li>
<li>
<p>æ›´æ–°ä»¥ä¸‹å˜é‡ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">FRONTEND_URL=https://blog-frontend-xxxx.vercel.app
</code></pre>
<pre><code class="hljs language-bash" lang="bash">ADMIN_URL=https://blog-admin-xxxx.vercel.app
</code></pre>
<p><strong>æ›¿æ¢ä¸ºä½ å®é™…çš„ Vercel URL</strong></p>
</li>
<li>
<p>ç‚¹å‡» <strong>"Save Changes"</strong></p>
</li>
<li>
<p>Render ä¼šè‡ªåŠ¨é‡å¯æœåŠ¡ï¼ˆçº¦ 1 åˆ†é’Ÿï¼‰</p>
</li>
</ol>
<h3 data-id="heading-35">7.2 æµ‹è¯• API è¿æ¥</h3>
<ol>
<li>
<p>æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰</p>
</li>
<li>
<p>è®¿é—®å‰ç«¯ URLï¼š<code>https://blog-frontend-xxxx.vercel.app</code></p>
</li>
<li>
<p>åœ¨ Network æ ‡ç­¾æŸ¥çœ‹ API è¯·æ±‚ï¼š</p>
<ul>
<li>âœ… åº”è¯¥çœ‹åˆ° <code>/api/categories</code> è¯·æ±‚æˆåŠŸ</li>
<li>âœ… å“åº”å¤´åŒ…å« <code>Access-Control-Allow-Origin</code></li>
</ul>
</li>
<li>
<p>å¦‚æœçœ‹åˆ° CORS é”™è¯¯ï¼Œæ£€æŸ¥ï¼š</p>
<ul>
<li>Render ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®</li>
<li>æœåŠ¡æ˜¯å¦å·²é‡å¯</li>
<li>URL æ˜¯å¦åŒ…å« <code>https://</code></li>
</ul>
</li>
</ol>
<h3 data-id="heading-36">7.3 éªŒè¯ç™»å½•åŠŸèƒ½</h3>
<ol>
<li>
<p>è®¿é—®åå° URLï¼š<code>https://blog-admin-xxxx.vercel.app</code></p>
</li>
<li>
<p>ä½¿ç”¨é»˜è®¤è´¦å·ç™»å½•ï¼š</p>
<ul>
<li><strong>ç”¨æˆ·å</strong>ï¼š<code>admin</code></li>
<li><strong>å¯†ç </strong>ï¼š<code>admin123</code></li>
</ul>
</li>
<li>
<p>ç™»å½•æˆåŠŸåï¼Œåº”è¯¥è¿›å…¥ Dashboard</p>
</li>
<li>
<p>æŸ¥çœ‹ï¼š</p>
<ul>
<li>âœ… åˆ†ç±»åˆ—è¡¨æ˜¾ç¤º</li>
<li>âœ… æ–‡ç« åˆ—è¡¨ä¸ºç©ºï¼ˆæ­£å¸¸ï¼‰</li>
<li>âœ… å¯ä»¥åˆ›å»ºæ–°æ–‡ç« </li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-37">8. ç¬¬å…­æ­¥ï¼šéªŒè¯éƒ¨ç½²</h2>
<h3 data-id="heading-38">8.1 æµ‹è¯•å‰ç«¯è®¿é—®</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ›¿æ¢ä¸ºä½ çš„å‰ç«¯ URL</span>
FRONTEND_URL=<span class="hljs-string">"https://blog-frontend-xxxx.vercel.app"</span>

<span class="hljs-comment"># æµ‹è¯•é¦–é¡µ</span>
curl -I <span class="hljs-variable">$FRONTEND_URL</span>
<span class="hljs-comment"># åº”è¯¥è¿”å› 200 OK</span>

<span class="hljs-comment"># æµ‹è¯• API ä»£ç†</span>
curl <span class="hljs-variable">$FRONTEND_URL</span>/api/categories
<span class="hljs-comment"># åº”è¯¥è¿”å› JSON åˆ†ç±»åˆ—è¡¨</span>
</code></pre>
<h3 data-id="heading-39">8.2 æµ‹è¯•åå°ç™»å½•</h3>
<ol>
<li>
<p>æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°</p>
</li>
<li>
<p>è®¿é—® <code>https://blog-admin-xxxx.vercel.app</code></p>
</li>
<li>
<p>è¾“å…¥è´¦å·å¯†ç ï¼Œç‚¹å‡»ç™»å½•</p>
</li>
<li>
<p>åœ¨ Network æ ‡ç­¾æŸ¥çœ‹ï¼š</p>
<ul>
<li>âœ… <code>/api/auth/login</code> è¯·æ±‚æˆåŠŸï¼ˆ200ï¼‰</li>
<li>âœ… è¿”å› <code>token</code> å’Œç”¨æˆ·ä¿¡æ¯</li>
<li>âœ… è‡ªåŠ¨è·³è½¬åˆ° Dashboard</li>
</ul>
</li>
</ol>
<h3 data-id="heading-40">8.3 æµ‹è¯• API è°ƒç”¨</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ›¿æ¢ä¸ºä½ çš„åç«¯ URL</span>
API_URL=<span class="hljs-string">"https://blog-server-xxxx.onrender.com"</span>

<span class="hljs-comment"># æµ‹è¯•å¥åº·æ£€æŸ¥</span>
curl <span class="hljs-variable">$API_URL</span>/api/health
<span class="hljs-comment"># è¿”å›: {"status":"ok","timestamp":"..."}</span>

<span class="hljs-comment"># æµ‹è¯•è·å–åˆ†ç±»</span>
curl <span class="hljs-variable">$API_URL</span>/api/categories
<span class="hljs-comment"># è¿”å›: {"code":0,"message":"success","data":[...]}</span>

<span class="hljs-comment"># æµ‹è¯•ç™»å½•</span>
curl -X POST <span class="hljs-variable">$API_URL</span>/api/auth/login \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -d <span class="hljs-string">'{"username":"admin","password":"admin123"}'</span>
<span class="hljs-comment"># è¿”å›: {"code":0,"message":"Login successful","data":{"token":"...","user":{...}}}</span>
</code></pre>
<h3 data-id="heading-41">8.4 æµ‹è¯•å›¾ç‰‡ä¸Šä¼ </h3>
<ol>
<li>
<p>ç™»å½•åå°ç®¡ç†</p>
</li>
<li>
<p>è¿›å…¥ "æ–‡ç« ç®¡ç†" â†’ "åˆ›å»ºæ–‡ç« "</p>
</li>
<li>
<p>ç‚¹å‡»ä¸Šä¼ å°é¢å›¾ç‰‡</p>
</li>
<li>
<p>é€‰æ‹©ä¸€å¼ å›¾ç‰‡ï¼ˆ&lt;5MBï¼‰</p>
</li>
<li>
<p>ç¡®è®¤ï¼š</p>
<ul>
<li>âœ… ä¸Šä¼ æˆåŠŸ</li>
<li>âœ… å›¾ç‰‡é¢„è§ˆæ˜¾ç¤º</li>
<li>âœ… å‘å¸ƒæ–‡ç« åï¼Œå‰ç«¯å¯ä»¥çœ‹åˆ°å›¾ç‰‡</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-42">9. Monorepo ç‰¹æ®Šé…ç½®è¯´æ˜</h2>
<h3 data-id="heading-43">9.1 ä¸ºä»€ä¹ˆéœ€è¦ç‰¹æ®Šçš„æ„å»ºå‘½ä»¤ï¼Ÿ</h3>
<p>é¡¹ç›®ä½¿ç”¨ Nx Monorepoï¼Œæ‰€æœ‰ packages å…±äº«æ ¹ç›®å½•çš„ <code>node_modules</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">blog/
â”œâ”€â”€ node_modules/           <span class="hljs-comment"># æ ¹ä¾èµ–</span>
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ blog-frontend/
â”‚   â”‚   â”œâ”€â”€ node_modules/   <span class="hljs-comment"># å­é¡¹ç›®ä¾èµ–</span>
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â””â”€â”€ blog-server/
â”‚       â””â”€â”€ ...
â””â”€â”€ package.json            <span class="hljs-comment"># æ ¹ package.json</span>
</code></pre>
<h3 data-id="heading-44">9.2 Vercel æ„å»ºå‘½ä»¤è§£æ</h3>
<p><strong>æ ‡å‡†å‘½ä»¤</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install &amp;&amp; <span class="hljs-built_in">cd</span> packages/blog-frontend &amp;&amp; npm run build
</code></pre>
<p><strong>åˆ†è§£</strong>ï¼š</p>
<ol>
<li><code>npm install</code> - å®‰è£…æ ¹ä¾èµ–ï¼ˆNx, TypeScript ç­‰ï¼‰</li>
<li><code>cd packages/blog-frontend</code> - è¿›å…¥å‰ç«¯ç›®å½•</li>
<li><code>npm run build</code> - æ„å»ºå‰ç«¯ï¼ˆRsbuildï¼‰</li>
</ol>
<h3 data-id="heading-45">9.3 è¾“å‡ºç›®å½•é…ç½®</h3>
<p><strong>ä¸ºä»€ä¹ˆæ˜¯ <code>../../dist/packages/blog-frontend</code>ï¼Ÿ</strong></p>
<ul>
<li>Vercel ä» <code>packages/blog-frontend</code> ç›®å½•å¼€å§‹</li>
<li>è¾“å‡ºåˆ° <code>../../dist/packages/blog-frontend</code>ï¼ˆç›¸å¯¹äºå½“å‰ç›®å½•ï¼‰</li>
<li>å®é™…è·¯å¾„ï¼š<code>blog/dist/packages/blog-frontend</code></li>
</ul>
<p><strong>rsbuild.config.ts é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-attr">output</span>: {
  <span class="hljs-attr">distPath</span>: {
    <span class="hljs-attr">root</span>: <span class="hljs-string">'../../dist/packages/blog-frontend'</span>
  }
}
</code></pre>
<h3 data-id="heading-46">9.4 API ä»£ç†é‡å†™æœºåˆ¶</h3>
<p><strong>vercel.json é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"rewrites"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"source"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/api/:path*"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"destination"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://blog-2eqo.onrender.com/api/:path*"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>å·¥ä½œåŸç†</strong>ï¼š</p>
<ol>
<li>å‰ç«¯å‘èµ·è¯·æ±‚ï¼š<code>/api/articles</code></li>
<li>Vercel æ‹¦æˆªè¯·æ±‚ï¼Œé‡å†™ä¸ºï¼š<code>https://blog-2eqo.onrender.com/api/articles</code></li>
<li>è½¬å‘åˆ° Render åç«¯</li>
<li>è¿”å›å“åº”ç»™å‰ç«¯</li>
</ol>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>âœ… å‰ç«¯æ— éœ€å…³å¿ƒ API åŸŸå</li>
<li>âœ… é¿å… CORS é—®é¢˜ï¼ˆåŒåŸŸè¯·æ±‚ï¼‰</li>
<li>âœ… ç®€åŒ–ç¯å¢ƒå˜é‡ç®¡ç†</li>
</ul>
<hr/>
<h2 data-id="heading-47">10. ç¯å¢ƒå˜é‡å®Œæ•´æ¸…å•</h2>
<h3 data-id="heading-48">10.1 Render ç¯å¢ƒå˜é‡ï¼ˆblog-serverï¼‰</h3>






































































<table><thead><tr><th>å˜é‡å</th><th>å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>NODE_ENV</code></td><td><code>production</code></td><td>ç”Ÿäº§ç¯å¢ƒæ ‡è¯†</td></tr><tr><td><code>JWT_SECRET</code></td><td><code>&lt;éšæœº 64 ä½å­—ç¬¦ä¸²&gt;</code></td><td>JWT ç­¾åå¯†é’¥ï¼ˆå¿…é¡»ä¿®æ”¹ï¼‰</td></tr><tr><td><code>JWT_EXPIRES_IN</code></td><td><code>7d</code></td><td>Token è¿‡æœŸæ—¶é—´</td></tr><tr><td><code>FRONTEND_URL</code></td><td><code>https://blog-frontend-xxxx.vercel.app</code></td><td>å‰ç«¯ URLï¼ˆCORSï¼‰</td></tr><tr><td><code>ADMIN_URL</code></td><td><code>https://blog-admin-xxxx.vercel.app</code></td><td>åå° URLï¼ˆCORSï¼‰</td></tr><tr><td><code>DB_HOST</code></td><td><code>&lt;Render æ•°æ®åº“ Hostname&gt;</code></td><td>æ•°æ®åº“ä¸»æœº</td></tr><tr><td><code>DB_PORT</code></td><td><code>5432</code></td><td>æ•°æ®åº“ç«¯å£</td></tr><tr><td><code>DB_USER</code></td><td><code>&lt;Render æ•°æ®åº“ Username&gt;</code></td><td>æ•°æ®åº“ç”¨æˆ·</td></tr><tr><td><code>DB_PASSWORD</code></td><td><code>&lt;Render æ•°æ®åº“ Password&gt;</code></td><td>æ•°æ®åº“å¯†ç </td></tr><tr><td><code>DB_NAME</code></td><td><code>blog_system</code></td><td>æ•°æ®åº“åç§°</td></tr><tr><td><code>MAX_FILE_SIZE</code></td><td><code>5242880</code></td><td>æœ€å¤§æ–‡ä»¶å¤§å°ï¼ˆ5MBï¼‰</td></tr><tr><td><code>ALLOWED_IMAGE_TYPES</code></td><td><code>image/jpeg,image/png,image/gif,image/webp</code></td><td>å…è®¸çš„å›¾ç‰‡ç±»å‹</td></tr></tbody></table>
<h3 data-id="heading-49">10.2 Vercel ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰</h3>
<p><strong>blog-frontend å’Œ blog-admin</strong>ï¼š</p>















<table><thead><tr><th>å˜é‡å</th><th>å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>VITE_API_BASE_URL</code></td><td><code>&lt;Render API URL&gt;/api</code></td><td>API åŸºç¡€ URLï¼ˆå¯é€‰ï¼‰</td></tr></tbody></table>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šç”±äºä½¿ç”¨äº† <code>vercel.json</code> çš„ <code>rewrites</code>ï¼Œå‰ç«¯å¯ä»¥ç›´æ¥ç”¨ <code>/api</code> è¯·æ±‚ï¼Œæ— éœ€é…ç½®ç¯å¢ƒå˜é‡ã€‚</p>
</blockquote>
<h3 data-id="heading-50">10.3 å®‰å…¨æ€§å»ºè®®</h3>
<h4 data-id="heading-51">ç”Ÿæˆå®‰å…¨çš„ JWT_SECRET</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ–¹æ³• 1ï¼šNode.js</span>
node -e <span class="hljs-string">"console.log(require('crypto').randomBytes(32).toString('hex'))"</span>

<span class="hljs-comment"># æ–¹æ³• 2ï¼šOpenSSL</span>
openssl rand -hex 32

<span class="hljs-comment"># æ–¹æ³• 3ï¼šåœ¨çº¿å·¥å…·</span>
<span class="hljs-comment"># https://www.uuidgenerator.net/</span>
</code></pre>
<h4 data-id="heading-52">ç¯å¢ƒå˜é‡ç®¡ç†</h4>
<ul>
<li>âš ï¸ <strong>æ°¸è¿œä¸è¦</strong>æŠŠ <code>.env</code> æäº¤åˆ° Git</li>
<li>âœ… ä½¿ç”¨ <code>.env.example</code> ä½œä¸ºæ¨¡æ¿</li>
<li>âœ… ç”Ÿäº§ç¯å¢ƒçš„å¯†é’¥ä¸å¼€å‘ç¯å¢ƒä¸åŒ</li>
<li>âœ… å®šæœŸè½®æ¢ JWT_SECRETï¼ˆéœ€è¦ç”¨æˆ·é‡æ–°ç™»å½•ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-53">11. å…è´¹é¢åº¦è¯´æ˜</h2>
<h3 data-id="heading-54">11.1 Vercel å…è´¹è®¡åˆ’</h3>








































<table><thead><tr><th>é¡¹ç›®</th><th>é¢åº¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>å¸¦å®½</strong></td><td>100 GB/æœˆ</td><td>è¶³å¤Ÿä¸ªäººåšå®¢ä½¿ç”¨</td></tr><tr><td><strong>æ„å»ºæ‰§è¡Œæ—¶é—´</strong></td><td>100 GB-å°æ—¶/æœˆ</td><td>çº¦ 100 æ¬¡æ„å»º</td></tr><tr><td><strong>éƒ¨ç½²æ•°é‡</strong></td><td>æ— é™</td><td>æ¯æ¬¡ push éƒ½ä¼šéƒ¨ç½²</td></tr><tr><td><strong>é¡¹ç›®æ•°é‡</strong></td><td>æ— é™</td><td>å¯ä»¥éƒ¨ç½²å¤šä¸ªé¡¹ç›®</td></tr><tr><td><strong>å›¢é˜Ÿæˆå‘˜</strong></td><td>1 äºº</td><td>å…è´¹è®¡åˆ’ä»…æ”¯æŒä¸ªäºº</td></tr><tr><td><strong>åŸŸå</strong></td><td>è‡ªå®šä¹‰åŸŸå</td><td>æ”¯æŒç»‘å®šè‡ªå·±çš„åŸŸå</td></tr></tbody></table>
<p><strong>é™åˆ¶</strong>ï¼š</p>
<ul>
<li>æ¯æ¬¡æ„å»ºæœ€å¤š 45 åˆ†é’Ÿ</li>
<li>æ— æœåŠ¡å™¨å‡½æ•°æœ€å¤šè¿è¡Œ 10 ç§’</li>
<li>ç¯å¢ƒå˜é‡æœ€å¤š 4KB</li>
</ul>
<p><strong>è¶³å¤Ÿç”¨äº</strong>ï¼š</p>
<ul>
<li>âœ… ä¸ªäººåšå®¢</li>
<li>âœ… å°å‹é¡¹ç›®å±•ç¤º</li>
<li>âœ… å‰ç«¯åº”ç”¨</li>
<li>âš ï¸ ä¸é€‚åˆé«˜æµé‡å•†ä¸šç½‘ç«™</li>
</ul>
<h3 data-id="heading-55">11.2 Render å…è´¹è®¡åˆ’</h3>








































<table><thead><tr><th>é¡¹ç›®</th><th>é¢åº¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>è¿è¡Œæ—¶é—´</strong></td><td>750 å°æ—¶/æœˆ</td><td>çº¦ 31 å¤©ï¼Œå¤Ÿç”¨ä¸€æ•´æœˆ</td></tr><tr><td><strong>å†…å­˜</strong></td><td>512 MB</td><td>è¶³å¤Ÿ Node.js åº”ç”¨</td></tr><tr><td><strong>CPU</strong></td><td>å…±äº«</td><td>æ€§èƒ½å—é™ï¼Œä½†å¯æ¥å—</td></tr><tr><td><strong>å¸¦å®½</strong></td><td>100 GB/æœˆ</td><td>å‡ºç«™æµé‡é™åˆ¶</td></tr><tr><td><strong>æ„å»ºæ—¶é—´</strong></td><td>æ¯æ¬¡ 500 ç§’</td><td>è¶³å¤Ÿ npm install + build</td></tr><tr><td><strong>PostgreSQL</strong></td><td>256 MB å­˜å‚¨</td><td>çº¦å¯å­˜å‚¨ 10000+ ç¯‡æ–‡ç« </td></tr></tbody></table>
<p><strong>é‡è¦é™åˆ¶</strong>ï¼š</p>
<ul>
<li>âš ï¸ <strong>æœåŠ¡ä¼šåœ¨ 15 åˆ†é’Ÿæ— æ´»åŠ¨åä¼‘çœ </strong></li>
<li>âš ï¸ <strong>ä»ä¼‘çœ å”¤é†’éœ€è¦ 30-50 ç§’</strong>ï¼ˆé¦–æ¬¡è®¿é—®æ…¢ï¼‰</li>
<li>âš ï¸ PostgreSQL æ•°æ®åº“ 90 å¤©æœªè®¿é—®ä¼šè¢«åˆ é™¤</li>
<li>âœ… æ•°æ®åº“ä¸ä¼šä¼‘çœ ï¼ˆå§‹ç»ˆåœ¨çº¿ï¼‰</li>
</ul>
<p><strong>è¶³å¤Ÿç”¨äº</strong>ï¼š</p>
<ul>
<li>âœ… ä¸ªäººåšå®¢åç«¯</li>
<li>âœ… API æœåŠ¡</li>
<li>âœ… å°å‹å…¨æ ˆåº”ç”¨</li>
<li>âš ï¸ ä¸é€‚åˆéœ€è¦å³æ—¶å“åº”çš„åº”ç”¨</li>
</ul>
<h3 data-id="heading-56">11.3 å¦‚ä½•åº”å¯¹ Render ä¼‘çœ ï¼Ÿ</h3>
<p><strong>æ–¹æ³• 1ï¼šä½¿ç”¨ UptimeRobotï¼ˆæ¨èï¼‰</strong></p>
<ol>
<li>æ³¨å†Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fuptimerobot.com" target="_blank" title="https://uptimerobot.com" ref="nofollow noopener noreferrer">uptimerobot.com</a>ï¼ˆå…è´¹ï¼‰</li>
<li>æ·»åŠ  Monitorï¼š
<ul>
<li><strong>Monitor Type</strong>: HTTP(s)</li>
<li><strong>URL</strong>: <code>https://blog-server-xxxx.onrender.com/api/health</code></li>
<li><strong>Monitoring Interval</strong>: 5 åˆ†é’Ÿ</li>
</ul>
</li>
<li>UptimeRobot ä¼šæ¯ 5 åˆ†é’Ÿ ping ä¸€æ¬¡ï¼Œä¿æŒæœåŠ¡å”¤é†’</li>
</ol>
<p><strong>æ–¹æ³• 2ï¼šä½¿ç”¨ Cron-job.org</strong></p>
<ol>
<li>æ³¨å†Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fcron-job.org" target="_blank" title="https://cron-job.org" ref="nofollow noopener noreferrer">cron-job.org</a></li>
<li>åˆ›å»ºå®šæ—¶ä»»åŠ¡ï¼š
<ul>
<li><strong>URL</strong>: <code>https://blog-server-xxxx.onrender.com/api/health</code></li>
<li><strong>Execution</strong>: æ¯ 10 åˆ†é’Ÿ</li>
</ul>
</li>
</ol>
<p><strong>æ–¹æ³• 3ï¼šå‰ç«¯å®šæ—¶è¯·æ±‚ï¼ˆä¸æ¨èï¼‰</strong></p>
<p>åœ¨å‰ç«¯æ·»åŠ å®šæ—¶å™¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸æ¨èï¼šæ¶ˆè€—ç”¨æˆ·å¸¦å®½</span>
<span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/health'</span>)
}, <span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>) <span class="hljs-comment">// æ¯ 5 åˆ†é’Ÿ</span>
</code></pre>
<hr/>
<h2 data-id="heading-57">12. å¸¸è§é—®é¢˜æ’æŸ¥</h2>
<h3 data-id="heading-58">12.1 API 502/504 é”™è¯¯</h3>
<p><strong>ç—‡çŠ¶</strong>ï¼šå‰ç«¯æ˜¾ç¤º "ç½‘ç»œé”™è¯¯" æˆ– "502 Bad Gateway"</p>
<p><strong>åŸå› </strong>ï¼šRender æœåŠ¡ä¼‘çœ ï¼Œæ­£åœ¨å”¤é†’</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>
<p>ç­‰å¾… 30-50 ç§’ï¼Œåˆ·æ–°é¡µé¢</p>
</li>
<li>
<p>å¦‚æœä»ç„¶å¤±è´¥ï¼Œæ£€æŸ¥ Render æœåŠ¡çŠ¶æ€ï¼š</p>
<ul>
<li>è¿›å…¥ Render Dashboard â†’ <code>blog-server</code></li>
<li>æŸ¥çœ‹ "Logs" æ˜¯å¦æœ‰é”™è¯¯</li>
<li>ç¡®è®¤æœåŠ¡çŠ¶æ€ä¸º "Live"</li>
</ul>
</li>
<li>
<p>å¦‚æœæœåŠ¡å¯åŠ¨å¤±è´¥ï¼Œæ£€æŸ¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœ¨ Render Shell ä¸­</span>
node dist/server.js
<span class="hljs-comment"># æŸ¥çœ‹é”™è¯¯ä¿¡æ¯</span>
</code></pre>
</li>
</ol>
<h3 data-id="heading-59">12.2 CORS é”™è¯¯</h3>
<p><strong>ç—‡çŠ¶</strong>ï¼šæµè§ˆå™¨æ§åˆ¶å°æ˜¾ç¤ºï¼š</p>
<pre><code class="hljs language-rust" lang="rust">Access to fetch at <span class="hljs-symbol">'https</span>:<span class="hljs-comment">//blog-xxxx.onrender.com/api/...'</span>
from origin <span class="hljs-symbol">'https</span>:<span class="hljs-comment">//blog-frontend-xxxx.vercel.app' has been blocked by CORS policy</span>
</code></pre>
<p><strong>åŸå› </strong>ï¼šRender ç¯å¢ƒå˜é‡ä¸­çš„ <code>FRONTEND_URL</code> æˆ– <code>ADMIN_URL</code> ä¸æ­£ç¡®</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>
<p>æ£€æŸ¥ Render ç¯å¢ƒå˜é‡ï¼š</p>
<ul>
<li><code>FRONTEND_URL</code> å¿…é¡»ä¸ Vercel å‰ç«¯ URL å®Œå…¨ä¸€è‡´</li>
<li>åŒ…å« <code>https://</code></li>
<li>ä¸åŒ…å«å°¾éƒ¨æ–œæ  <code>/</code></li>
</ul>
</li>
<li>
<p>ç¡®è®¤ CORS é…ç½®ï¼ˆ<code>packages/blog-server/src/middleware/cors.ts</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-attr">origin</span>: [
  env.<span class="hljs-property">FRONTEND_URL</span>,  <span class="hljs-comment">// å‰ç«¯ URL</span>
  env.<span class="hljs-property">ADMIN_URL</span>      <span class="hljs-comment">// åå° URL</span>
]
</code></pre>
</li>
<li>
<p>é‡å¯ Render æœåŠ¡ï¼ˆä¿®æ”¹ç¯å¢ƒå˜é‡åè‡ªåŠ¨é‡å¯ï¼‰</p>
</li>
</ol>
<h3 data-id="heading-60">12.3 Vercel æ„å»ºå¤±è´¥</h3>
<p><strong>ç—‡çŠ¶</strong>ï¼šVercel éƒ¨ç½²å¤±è´¥ï¼Œæ˜¾ç¤º "Build failed"</p>
<p><strong>å¸¸è§é”™è¯¯ 1ï¼šæ‰¾ä¸åˆ°æ¨¡å—</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">Error: Cannot find <span class="hljs-keyword">module</span> <span class="hljs-string">'react'</span>
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>æ£€æŸ¥ Build Command æ˜¯å¦åŒ…å« <code>npm install</code></li>
<li>ç¡®è®¤ Root Directory é…ç½®æ­£ç¡®</li>
</ul>
<p><strong>å¸¸è§é”™è¯¯ 2ï¼šè¾“å‡ºç›®å½•ä¸ºç©º</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Error</span>: <span class="hljs-title class_">No</span> <span class="hljs-title class_">Output</span> <span class="hljs-title class_">Directory</span> named <span class="hljs-string">"dist"</span> found after the build
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>æ£€æŸ¥ Output Directory é…ç½®ï¼š<code>../../dist/packages/blog-frontend</code></li>
<li>æœ¬åœ°è¿è¡Œ <code>npm run build</code> ç¡®è®¤è¾“å‡ºç›®å½•æ­£ç¡®</li>
</ul>
<p><strong>å¸¸è§é”™è¯¯ 3ï¼šæ„å»ºè¶…æ—¶</strong></p>
<pre><code class="hljs language-csharp" lang="csharp">Error: Command timed <span class="hljs-keyword">out</span> after <span class="hljs-number">45</span> minutes
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>æ£€æŸ¥ <code>package.json</code> æ˜¯å¦æœ‰é‡å¤ä¾èµ–</li>
<li>ä½¿ç”¨ <code>npm ci</code> ä»£æ›¿ <code>npm install</code>ï¼ˆæ›´å¿«ï¼‰</li>
</ul>
<h3 data-id="heading-61">12.4 æ•°æ®åº“è¿æ¥å¤±è´¥</h3>
<p><strong>ç—‡çŠ¶</strong>ï¼šRender æ—¥å¿—æ˜¾ç¤ºï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">Error: connect ETIMEDOUT
</code></pre>
<p><strong>åŸå› </strong>ï¼šæ•°æ®åº“ç¯å¢ƒå˜é‡é…ç½®é”™è¯¯</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>
<p>æ£€æŸ¥ Render ç¯å¢ƒå˜é‡ï¼š</p>
<ul>
<li><code>DB_HOST</code>ã€<code>DB_PORT</code>ã€<code>DB_USER</code>ã€<code>DB_PASSWORD</code>ã€<code>DB_NAME</code></li>
<li>ä¸æ•°æ®åº“ "Info" æ ‡ç­¾çš„ä¿¡æ¯ä¸€è‡´</li>
</ul>
</li>
<li>
<p>ç¡®è®¤æ•°æ®åº“çŠ¶æ€ä¸º "Available"</p>
</li>
<li>
<p>æµ‹è¯•è¿æ¥ï¼ˆåœ¨ Render Shellï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">psql <span class="hljs-variable">$DATABASE_URL</span> -c <span class="hljs-string">"SELECT 1"</span>
</code></pre>
</li>
</ol>
<h3 data-id="heading-62">12.5 å›¾ç‰‡æ˜¾ç¤º 404</h3>
<p><strong>ç—‡çŠ¶</strong>ï¼šå‰ç«¯æ–‡ç« åˆ—è¡¨æˆ–è¯¦æƒ…é¡µï¼Œå°é¢å›¾ç‰‡æ˜¾ç¤º 404</p>
<p><strong>åŸå› </strong>ï¼šæ•°æ®åº“æœªåˆå§‹åŒ–ï¼Œæˆ–å›¾ç‰‡æœªä¸Šä¼ </p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>
<p>ç¡®è®¤æ•°æ®åº“å·²åˆå§‹åŒ–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœ¨ Render Shell</span>
psql <span class="hljs-variable">$DATABASE_URL</span> -c <span class="hljs-string">"SELECT COUNT(*) FROM images"</span>
</code></pre>
</li>
<li>
<p>å¦‚æœè¡¨ä¸å­˜åœ¨ï¼Œè¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm run db:init
</code></pre>
</li>
<li>
<p>ä¸Šä¼ æµ‹è¯•å›¾ç‰‡ï¼š</p>
<ul>
<li>ç™»å½•åå°ç®¡ç†</li>
<li>åˆ›å»ºæ–‡ç« å¹¶ä¸Šä¼ å°é¢</li>
</ul>
</li>
</ol>
<h3 data-id="heading-63">12.6 ç™»å½•å¤±è´¥</h3>
<p><strong>ç—‡çŠ¶</strong>ï¼šè¾“å…¥è´¦å·å¯†ç åï¼Œæç¤º "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"</p>
<p><strong>åŸå› </strong>ï¼šç®¡ç†å‘˜è´¦å·æœªåˆ›å»º</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>
<p>æ£€æŸ¥æ•°æ®åº“ä¸­çš„ç®¡ç†å‘˜ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœ¨ Render Shell</span>
psql <span class="hljs-variable">$DATABASE_URL</span> -c <span class="hljs-string">"SELECT username, email FROM admin_users"</span>
</code></pre>
</li>
<li>
<p>å¦‚æœä¸ºç©ºï¼Œé‡æ–°åˆå§‹åŒ–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm run db:init
</code></pre>
</li>
<li>
<p>æˆ–æ‰‹åŠ¨åˆ›å»ºç®¡ç†å‘˜ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm run create-admin
</code></pre>
</li>
</ol>
<hr/>
<h2 data-id="heading-64">13. ä¼˜åŒ–å»ºè®®</h2>
<h3 data-id="heading-65">13.1 é˜²æ­¢ Render ä¼‘çœ </h3>
<p>ä½¿ç”¨ <strong>UptimeRobot</strong> å®šæœŸ ping APIï¼ˆæ¨èï¼‰ï¼š</p>
<ol>
<li>æ³¨å†Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fuptimerobot.com" target="_blank" title="https://uptimerobot.com" ref="nofollow noopener noreferrer">uptimerobot.com</a></li>
<li>æ·»åŠ  HTTP Monitor</li>
<li>URL: <code>https://blog-server-xxxx.onrender.com/api/health</code></li>
<li>é—´éš”: 5 åˆ†é’Ÿ</li>
</ol>
<p><strong>æ•ˆæœ</strong>ï¼š</p>
<ul>
<li>âœ… æœåŠ¡å§‹ç»ˆä¿æŒæ´»è·ƒ</li>
<li>âœ… ç”¨æˆ·è®¿é—®æ— éœ€ç­‰å¾…å”¤é†’</li>
<li>âœ… å…è´¹ï¼Œæ— éœ€é¢å¤–æˆæœ¬</li>
</ul>
<h3 data-id="heading-66">13.2 å›¾ç‰‡ä¼˜åŒ–</h3>
<p><strong>é—®é¢˜</strong>ï¼šå›¾ç‰‡å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œå ç”¨ç©ºé—´ä¸”åŠ è½½æ…¢</p>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>
<p><strong>å‹ç¼©å›¾ç‰‡</strong>ï¼ˆå‰ç«¯ä¸Šä¼ å‰ï¼‰</p>
<ul>
<li>ä½¿ç”¨ <code>browser-image-compression</code> åº“</li>
<li>é™åˆ¶å®½åº¦ 1200pxï¼Œè´¨é‡ 80%</li>
</ul>
</li>
<li>
<p><strong>è¿ç§»åˆ°å¯¹è±¡å­˜å‚¨</strong>ï¼ˆæ¨èï¼‰</p>
<ul>
<li>ä½¿ç”¨ Cloudflare R2ï¼ˆå…è´¹ 10GBï¼‰</li>
<li>æˆ– AWS S3 + CloudFront</li>
<li>æ•°æ®åº“åªå­˜å‚¨ URL</li>
</ul>
</li>
<li>
<p><strong>æ·»åŠ å›¾ç‰‡ç¼“å­˜</strong></p>
<ul>
<li>Vercel è‡ªåŠ¨ç¼“å­˜é™æ€èµ„æº</li>
<li>åç«¯æ·»åŠ  <code>Cache-Control</code> å¤´</li>
</ul>
</li>
</ol>
<h3 data-id="heading-67">13.3 æ€§èƒ½ç›‘æ§</h3>
<p><strong>Vercel Analyticsï¼ˆå…è´¹ï¼‰</strong>ï¼š</p>
<ol>
<li>è¿›å…¥ Vercel é¡¹ç›® â†’ <strong>"Analytics"</strong></li>
<li>å¯ç”¨ Web Analytics</li>
<li>æŸ¥çœ‹ï¼š
<ul>
<li>é¡µé¢åŠ è½½æ—¶é—´</li>
<li>ç”¨æˆ·è®¿é—®é‡</li>
<li>åœ°ç†åˆ†å¸ƒ</li>
</ul>
</li>
</ol>
<p><strong>Render Metricsï¼ˆå…è´¹ï¼‰</strong>ï¼š</p>
<ol>
<li>è¿›å…¥ Render æœåŠ¡ â†’ <strong>"Metrics"</strong></li>
<li>æŸ¥çœ‹ï¼š
<ul>
<li>CPU ä½¿ç”¨ç‡</li>
<li>å†…å­˜ä½¿ç”¨ç‡</li>
<li>HTTP è¯·æ±‚é‡</li>
</ul>
</li>
</ol>
<h3 data-id="heading-68">13.4 æ•°æ®åº“å¤‡ä»½</h3>
<p><strong>Render å…è´¹è®¡åˆ’ä¸æä¾›è‡ªåŠ¨å¤‡ä»½</strong>ï¼Œå»ºè®®æ‰‹åŠ¨å¤‡ä»½ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æœ¬åœ°å¤‡ä»½</span>
pg_dump <span class="hljs-string">"&lt;External Database URL&gt;"</span> &gt; backup.sql

<span class="hljs-comment"># æ¢å¤</span>
psql <span class="hljs-string">"&lt;External Database URL&gt;"</span> &lt; backup.sql
</code></pre>
<p><strong>å®šæœŸå¤‡ä»½</strong>ï¼š</p>
<ul>
<li>æ¯å‘¨å¤‡ä»½ä¸€æ¬¡</li>
<li>å­˜å‚¨åœ¨ GitHubï¼ˆåŠ å¯†ï¼‰æˆ– Google Drive</li>
</ul>
<h3 data-id="heading-69">13.5 æ—¥å¿—ç®¡ç†</h3>
<p><strong>Winston æ—¥å¿—é…ç½®</strong>ï¼ˆå·²é›†æˆï¼‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// packages/blog-server/src/config/logger.ts</span>
<span class="hljs-keyword">const</span> logger = winston.<span class="hljs-title function_">createLogger</span>({
  <span class="hljs-attr">level</span>: <span class="hljs-string">'info'</span>,
  <span class="hljs-attr">format</span>: winston.<span class="hljs-property">format</span>.<span class="hljs-title function_">json</span>(),
  <span class="hljs-attr">transports</span>: [
    <span class="hljs-keyword">new</span> winston.<span class="hljs-property">transports</span>.<span class="hljs-title class_">Console</span>()
  ]
})
</code></pre>
<p><strong>æŸ¥çœ‹æ—¥å¿—</strong>ï¼š</p>
<ul>
<li>Render Dashboard â†’ "Logs"</li>
<li>å¯ä»¥æœç´¢ã€è¿‡æ»¤ã€å¯¼å‡º</li>
</ul>
<hr/>
<h2 data-id="heading-70">14. æŒç»­éƒ¨ç½²ï¼ˆCI/CDï¼‰</h2>
<h3 data-id="heading-71">14.1 GitHub é›†æˆ</h3>
<p><strong>Vercel è‡ªåŠ¨éƒ¨ç½²</strong>ï¼š</p>
<ul>
<li>âœ… Push åˆ° <code>main</code> åˆ†æ”¯ â†’ è‡ªåŠ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ</li>
<li>âœ… Pull Request â†’ è‡ªåŠ¨éƒ¨ç½²é¢„è§ˆç¯å¢ƒ</li>
<li>âœ… æ¯æ¬¡éƒ¨ç½²ç”Ÿæˆå”¯ä¸€ URL</li>
</ul>
<p><strong>Render è‡ªåŠ¨éƒ¨ç½²</strong>ï¼š</p>
<ul>
<li>âœ… Push åˆ° <code>main</code> åˆ†æ”¯ â†’ è‡ªåŠ¨éƒ¨ç½²</li>
<li>âœ… æ„å»ºæ—¥å¿—å®æ—¶æŸ¥çœ‹</li>
<li>âœ… å¤±è´¥è‡ªåŠ¨å›æ»šåˆ°ä¸Šä¸€ç‰ˆæœ¬</li>
</ul>
<h3 data-id="heading-72">14.2 åˆ†æ”¯ç­–ç•¥</h3>
<p><strong>æ¨èå·¥ä½œæµ</strong>ï¼š</p>
<pre><code class="hljs language-erlang" lang="erlang"><span class="hljs-function"><span class="hljs-title">main</span> <span class="hljs-params">(ç”Ÿäº§ç¯å¢ƒ)</span>
  â†‘
  â””â”€â”€ <span class="hljs-title">develop</span> <span class="hljs-params">(å¼€å‘ç¯å¢ƒ)</span>
        â†‘
        â””â”€â”€ <span class="hljs-title">feature</span>/* <span class="hljs-params">(åŠŸèƒ½åˆ†æ”¯)</span>
</span></code></pre>
<p><strong>Vercel å¤šç¯å¢ƒé…ç½®</strong>ï¼š</p>
<ol>
<li>
<p><strong>ç”Ÿäº§ç¯å¢ƒ</strong>ï¼ˆmain åˆ†æ”¯ï¼‰</p>
<ul>
<li>è‡ªåŠ¨éƒ¨ç½²åˆ° <code>blog-frontend.vercel.app</code></li>
</ul>
</li>
<li>
<p><strong>é¢„è§ˆç¯å¢ƒ</strong>ï¼ˆPull Requestï¼‰</p>
<ul>
<li>æ¯ä¸ª PR ç”Ÿæˆé¢„è§ˆ URL</li>
<li>ä¾‹å¦‚ï¼š<code>blog-frontend-git-feature-xxxx.vercel.app</code></li>
</ul>
</li>
</ol>
<h3 data-id="heading-73">14.3 ç‰ˆæœ¬å›æ»š</h3>
<p><strong>Vercel å›æ»š</strong>ï¼š</p>
<ol>
<li>è¿›å…¥é¡¹ç›® â†’ <strong>"Deployments"</strong></li>
<li>æ‰¾åˆ°ä¹‹å‰çš„æˆåŠŸéƒ¨ç½²</li>
<li>ç‚¹å‡» "..." â†’ <strong>"Promote to Production"</strong></li>
</ol>
<p><strong>Render å›æ»š</strong>ï¼š</p>
<ol>
<li>è¿›å…¥æœåŠ¡ â†’ <strong>"Deploys"</strong></li>
<li>æ‰¾åˆ°ä¹‹å‰çš„æˆåŠŸéƒ¨ç½²</li>
<li>ç‚¹å‡» "..." â†’ <strong>"Redeploy"</strong></li>
</ol>
<h3 data-id="heading-74">14.4 éƒ¨ç½²é€šçŸ¥</h3>
<p><strong>Vercel é›†æˆ</strong>ï¼š</p>
<ol>
<li>é¡¹ç›® Settings â†’ <strong>"Git"</strong> â†’ <strong>"Deploy Hooks"</strong></li>
<li>æ·»åŠ  Webhook URLï¼ˆä¾‹å¦‚ï¼šSlackã€Discordï¼‰</li>
<li>æ¯æ¬¡éƒ¨ç½²è‡ªåŠ¨é€šçŸ¥</li>
</ol>
<p><strong>Render é›†æˆ</strong>ï¼š</p>
<ol>
<li>æœåŠ¡ Settings â†’ <strong>"Notifications"</strong></li>
<li>æ·»åŠ é‚®ç®±æˆ– Webhook</li>
<li>éƒ¨ç½²æˆåŠŸ/å¤±è´¥è‡ªåŠ¨é€šçŸ¥</li>
</ol>
<hr/>
<h2 data-id="heading-75">15. æ€»ç»“</h2>
<h3 data-id="heading-76">15.1 éƒ¨ç½²æ¸…å•</h3>
<p>å®Œæˆä»¥ä¸‹æ‰€æœ‰æ­¥éª¤ï¼Œä½ çš„å…¨æ ˆåšå®¢å°±æˆåŠŸéƒ¨ç½²äº†ï¼š</p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" checked="checked" disabled="disabled"/> åˆ›å»º Render PostgreSQL æ•°æ®åº“</li>
<li class="task-list-item"><input type="checkbox" checked="checked" disabled="disabled"/> éƒ¨ç½²åç«¯åˆ° Render</li>
<li class="task-list-item"><input type="checkbox" checked="checked" disabled="disabled"/> é…ç½®ç¯å¢ƒå˜é‡</li>
<li class="task-list-item"><input type="checkbox" checked="checked" disabled="disabled"/> åˆå§‹åŒ–æ•°æ®åº“</li>
<li class="task-list-item"><input type="checkbox" checked="checked" disabled="disabled"/> éƒ¨ç½²å‰ç«¯åˆ° Vercel</li>
<li class="task-list-item"><input type="checkbox" checked="checked" disabled="disabled"/> éƒ¨ç½²åå°åˆ° Vercel</li>
<li class="task-list-item"><input type="checkbox" checked="checked" disabled="disabled"/> æ›´æ–° CORS é…ç½®</li>
<li class="task-list-item"><input type="checkbox" checked="checked" disabled="disabled"/> éªŒè¯æ‰€æœ‰åŠŸèƒ½</li>
</ul>
<h3 data-id="heading-77">15.2 æœ€ç»ˆæ¶æ„</h3>
<pre><code class="hljs language-scss" lang="scss">ç”¨æˆ· â†’ Vercel (å‰ç«¯/åå°) â†’ Render (API) â†’ Render (PostgreSQL)
         â†“ é™æ€èµ„æº              â†“ ä¸šåŠ¡é€»è¾‘      â†“ æ•°æ®å­˜å‚¨
       å…è´¹ <span class="hljs-number">100</span>GB              å…è´¹ <span class="hljs-number">750</span>h       å…è´¹ <span class="hljs-number">256</span>MB
</code></pre>
<h3 data-id="heading-78">15.3 è®¿é—®åœ°å€</h3>





















<table><thead><tr><th>æœåŠ¡</th><th>URL</th></tr></thead><tbody><tr><td><strong>å‰ç«¯</strong></td><td><code>https://blog-frontend-xxxx.vercel.app</code></td></tr><tr><td><strong>åå°</strong></td><td><code>https://blog-admin-xxxx.vercel.app</code></td></tr><tr><td><strong>API</strong></td><td><code>https://blog-server-xxxx.onrender.com</code></td></tr></tbody></table>
<h3 data-id="heading-79">15.4 ä¸‹ä¸€æ­¥</h3>
<ul>
<li>ğŸ¨ è‡ªå®šä¹‰åŸŸåï¼ˆVercel å’Œ Render éƒ½æ”¯æŒï¼‰</li>
<li>ğŸ“Š é…ç½® Analytics å’Œç›‘æ§</li>
<li>ğŸ”„ è®¾ç½® UptimeRobot é˜²æ­¢ä¼‘çœ </li>
<li>ğŸ’¾ å®šæœŸå¤‡ä»½æ•°æ®åº“</li>
<li>ğŸš€ ä¼˜åŒ–å›¾ç‰‡åŠ è½½å’Œç¼“å­˜</li>
<li>ğŸ“ åˆ›å»ºç¬¬ä¸€ç¯‡æ–‡ç« </li>
</ul>
<hr/>
<h2 data-id="heading-80">16. å‚è€ƒé“¾æ¥</h2>
<ul>
<li><strong>Vercel æ–‡æ¡£</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fvercel.com%2Fdocs" target="_blank" title="https://vercel.com/docs" ref="nofollow noopener noreferrer">vercel.com/docs</a></li>
<li><strong>Render æ–‡æ¡£</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Frender.com%2Fdocs" target="_blank" title="https://render.com/docs" ref="nofollow noopener noreferrer">render.com/docs</a></li>
<li><strong>Nx Monorepo</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fnx.dev" target="_blank" title="https://nx.dev" ref="nofollow noopener noreferrer">nx.dev</a></li>
<li><strong>PostgreSQL æ–‡æ¡£</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.postgresql.org%2Fdocs%2F" target="_blank" title="https://www.postgresql.org/docs/" ref="nofollow noopener noreferrer">www.postgresql.org/docs/</a></li>
<li><strong>UptimeRobot</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fuptimerobot.com" target="_blank" title="https://uptimerobot.com" ref="nofollow noopener noreferrer">uptimerobot.com</a></li>
</ul>
<hr/>
<p><strong>ğŸ‰ æ­å–œï¼ä½ çš„å…¨æ ˆåšå®¢å·²æˆåŠŸéƒ¨ç½²ï¼</strong></p>
<p>å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·å‚è€ƒ <a href="#12-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5" title="#12-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5">å¸¸è§é—®é¢˜æ’æŸ¥</a> ç« èŠ‚ï¼Œæˆ–æŸ¥çœ‹é¡¹ç›®æ ¹ç›®å½•çš„å…¶ä»–æ–‡æ¡£ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=..%2FREADME.md" target="_blank" title="../README.md" ref="nofollow noopener noreferrer">README.md</a> - æœ¬åœ°å¼€å‘æŒ‡å—</li>
<li><a href="https://link.juejin.cn?target=..%2FRENDER_DEPLOYMENT.md" target="_blank" title="../RENDER_DEPLOYMENT.md" ref="nofollow noopener noreferrer">RENDER_DEPLOYMENT.md</a> - Render è¯¦ç»†éƒ¨ç½²æŒ‡å—</li>
<li><a href="https://link.juejin.cn?target=..%2FCLAUDE.md" target="_blank" title="../CLAUDE.md" ref="nofollow noopener noreferrer">CLAUDE.md</a> - å®Œæ•´é¡¹ç›®æ–‡æ¡£</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vue3+ts ä¸­ä½¿ç”¨piniaçŠ¶æ€ç®¡ç†]]></title>    <link>https://juejin.cn/post/7581314241410646051</link>    <guid>https://juejin.cn/post/7581314241410646051</guid>    <pubDate>2025-12-08T14:06:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581314241410646051" data-draft-id="7581348660823343104" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vue3+ts ä¸­ä½¿ç”¨piniaçŠ¶æ€ç®¡ç†"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-08T14:06:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çº¢è‰²ä¹Œé¸¦"/> <meta itemprop="url" content="https://juejin.cn/user/1610106143510702"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vue3+ts ä¸­ä½¿ç”¨piniaçŠ¶æ€ç®¡ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1610106143510702/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çº¢è‰²ä¹Œé¸¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T14:06:49.000Z" title="Mon Dec 08 2025 14:06:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸‹é¢è¯¦ç»†ä»‹ç»åœ¨ Vue3 + TypeScript é¡¹ç›®ä¸­ä½¿ç”¨ Pinia ^3.0.4 çš„å®Œæ•´æ­¥éª¤å’Œæœ€ä½³å®è·µï¼ŒåŒ…å«æ ¸å¿ƒæ¦‚å¿µã€ä»£ç ç¤ºä¾‹å’Œå¸¸è§åœºæ™¯ã€‚</p>
<h3 data-id="heading-0">ä¸€ã€ç¯å¢ƒå‡†å¤‡</h3>
<p>ç¡®ä¿é¡¹ç›®å·²å®‰è£… Vue3 + TypeScriptï¼Œç„¶åå®‰è£… Piniaï¼š</p>
<p>bash</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># npm</span>
npm install pinia@^3.<span class="hljs-number">0</span>.<span class="hljs-number">4</span>

<span class="hljs-comment"># yarn</span>
yarn add pinia@^3.<span class="hljs-number">0</span>.<span class="hljs-number">4</span>

<span class="hljs-comment"># pnpm</span>
pnpm add pinia@^3.<span class="hljs-number">0</span>.<span class="hljs-number">4</span>
</code></pre>
<h3 data-id="heading-1">äºŒã€åˆå§‹åŒ– Pinia</h3>
<p>åœ¨é¡¹ç›®å…¥å£æ–‡ä»¶ï¼ˆå¦‚Â <code>main.ts</code>ï¼‰ä¸­åˆ›å»ºå¹¶æŒ‚è½½ Pinia å®ä¾‹ï¼š</p>
<p>typescript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// main.ts</span>
<span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { createPinia } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)
<span class="hljs-comment">// åˆ›å»º Pinia å®ä¾‹</span>
<span class="hljs-keyword">const</span> pinia = <span class="hljs-title function_">createPinia</span>()
<span class="hljs-comment">// æŒ‚è½½åˆ° Vue åº”ç”¨</span>
app.<span class="hljs-title function_">use</span>(pinia)

app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<h3 data-id="heading-2">ä¸‰ã€æ ¸å¿ƒæ¦‚å¿µï¼šå®šä¹‰ Store</h3>
<p>Pinia ä¸­åªæœ‰Â <code>store</code>Â æ¦‚å¿µï¼ˆæ›¿ä»£ Vuex çš„ State/Mutation/Action/Getterï¼‰ï¼Œé€šè¿‡Â <code>defineStore</code>Â å®šä¹‰ï¼Œæ¨èæŒ‰<strong>åŠŸèƒ½æ¨¡å—</strong>åˆ’åˆ† storeã€‚</p>
<h4 data-id="heading-3">3.1 åŸºç¡€ç¤ºä¾‹ï¼ˆç”¨æˆ· Storeï¼‰</h4>
<p>åˆ›å»ºÂ <code>src/stores/user.ts</code>ï¼š</p>
<p>typescript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>
<span class="hljs-keyword">import</span> { ref, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// ç¬¬ä¸€ä¸ªå‚æ•°ï¼šstore å”¯ä¸€ IDï¼ˆå¿…é¡»å”¯ä¸€ï¼‰</span>
<span class="hljs-comment">// ç¬¬äºŒä¸ªå‚æ•°ï¼šstore é…ç½®å¯¹è±¡</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUserStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'user'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// ========== 1. çŠ¶æ€ï¼ˆStateï¼‰ï¼šç”¨ ref/reactive å®šä¹‰ ==========</span>
  <span class="hljs-keyword">const</span> name = ref&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">'å¼ ä¸‰'</span>)
  <span class="hljs-keyword">const</span> age = ref&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-number">20</span>)
  <span class="hljs-keyword">const</span> permissions = ref&lt;<span class="hljs-built_in">string</span>[]&gt;([<span class="hljs-string">'read'</span>, <span class="hljs-string">'write'</span>])

  <span class="hljs-comment">// ========== 2. è®¡ç®—å±æ€§ï¼ˆGettersï¼‰ï¼šç”¨ computed å®šä¹‰ ==========</span>
  <span class="hljs-comment">// æ³¨æ„ï¼šgetter ä¾èµ–çŠ¶æ€è‡ªåŠ¨ç¼“å­˜ï¼Œç±»ä¼¼ Vue ç»„ä»¶çš„ computed</span>
  <span class="hljs-keyword">const</span> fullInfo = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`å§“åï¼š<span class="hljs-subst">${name.value}</span>ï¼Œå¹´é¾„ï¼š<span class="hljs-subst">${age.value}</span>`</span>
  })

  <span class="hljs-keyword">const</span> hasAdminPermission = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">return</span> permissions.<span class="hljs-property">value</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'admin'</span>)
  })

  <span class="hljs-comment">// ========== 3. æ–¹æ³•ï¼ˆActionsï¼‰ï¼šæ™®é€šå‡½æ•°ï¼ˆæ”¯æŒåŒæ­¥/å¼‚æ­¥ï¼‰ ==========</span>
  <span class="hljs-comment">// åŒæ­¥ Action</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateName</span>(<span class="hljs-params">newName: <span class="hljs-built_in">string</span></span>) {
    name.<span class="hljs-property">value</span> = newName
  }

  <span class="hljs-comment">// å¼‚æ­¥ Actionï¼ˆç¤ºä¾‹ï¼šæ¨¡æ‹Ÿæ¥å£è¯·æ±‚ï¼‰</span>
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchUserInfo</span>(<span class="hljs-params">userId: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// æ¨¡æ‹Ÿ API è¯·æ±‚</span>
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>&lt;{ <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span> }&gt;(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-title function_">resolve</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'æå››'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> })
        }, <span class="hljs-number">1000</span>)
      })
      name.<span class="hljs-property">value</span> = res.<span class="hljs-property">name</span>
      age.<span class="hljs-property">value</span> = res.<span class="hljs-property">age</span>
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥ï¼š'</span>, error)
    }
  }

  <span class="hljs-comment">// ========== 4. æš´éœ²çŠ¶æ€/è®¡ç®—å±æ€§/æ–¹æ³• ==========</span>
  <span class="hljs-keyword">return</span> {
    name,
    age,
    permissions,
    fullInfo,
    hasAdminPermission,
    updateName,
    fetchUserInfo
  }
})
</code></pre>
<h4 data-id="heading-4">3.2 ç±»å‹æç¤ºè¯´æ˜</h4>
<ul>
<li>Pinia ç»“åˆ TypeScript ä¼šè‡ªåŠ¨æ¨å¯¼ç±»å‹ï¼Œæ— éœ€æ‰‹åŠ¨å£°æ˜ï¼ˆå¦‚Â <code>name</code>Â è‡ªåŠ¨æ¨å¯¼ä¸ºÂ <code>Ref&lt;string&gt;</code>ï¼‰ã€‚</li>
<li>å¦‚æœéœ€è¦æ˜¾å¼æŒ‡å®šç±»å‹ï¼Œå¯åœ¨Â <code>ref</code>/<code>computed</code>Â ä¸­æ˜ç¡®æ ‡æ³¨ï¼ˆå¦‚ä¸Šä¾‹ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-5">å››ã€åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ Store</h3>
<h4 data-id="heading-6">4.1 åŸºç¡€ä½¿ç”¨ï¼ˆç»„åˆå¼ APIï¼‰</h4>
<p>vue</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- src/components/UserInfo.vue --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>{{ userStore.fullInfo }}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ˜¯å¦æœ‰ç®¡ç†å‘˜æƒé™ï¼š{{ userStore.hasAdminPermission ? 'æ˜¯' : 'å¦' }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleUpdateName"</span>&gt;</span>ä¿®æ”¹å§“å<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleFetchUser"</span>&gt;</span>å¼‚æ­¥è·å–ç”¨æˆ·ä¿¡æ¯<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// å¯¼å…¥å®šä¹‰çš„ store</span>
<span class="hljs-keyword">import</span> { useUserStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/stores/user'</span>

<span class="hljs-comment">// è·å– store å®ä¾‹ï¼ˆPinia ä¼šè‡ªåŠ¨ç®¡ç†å•ä¾‹ï¼Œå¤šæ¬¡è°ƒç”¨è¿”å›åŒä¸€ä¸ªå®ä¾‹ï¼‰</span>
<span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStore</span>()

<span class="hljs-comment">// æ–¹æ³•ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleUpdateName</span> = (<span class="hljs-params"/>) =&gt; {
  userStore.<span class="hljs-title function_">updateName</span>(<span class="hljs-string">'ç‹äº”'</span>)
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleFetchUser</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">await</span> userStore.<span class="hljs-title function_">fetchUserInfo</span>(<span class="hljs-number">1</span>)
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h4 data-id="heading-7">4.2 è§£æ„ Storeï¼ˆä¿æŒå“åº”å¼ï¼‰</h4>
<p>ç›´æ¥è§£æ„ store ä¼šä¸¢å¤±å“åº”å¼ï¼Œéœ€ä½¿ç”¨Â <code>storeToRefs</code>ï¼š</p>
<p>typescript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { storeToRefs } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>
<span class="hljs-keyword">import</span> { useUserStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/stores/user'</span>

<span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStore</span>()
<span class="hljs-comment">// è§£æ„çŠ¶æ€/è®¡ç®—å±æ€§ï¼ˆä¿æŒå“åº”å¼ï¼‰</span>
<span class="hljs-keyword">const</span> { name, age, fullInfo } = <span class="hljs-title function_">storeToRefs</span>(userStore)
<span class="hljs-comment">// æ–¹æ³•å¯ç›´æ¥è§£æ„ï¼ˆæ— éœ€ refï¼‰</span>
<span class="hljs-keyword">const</span> { updateName } = userStore

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(name.<span class="hljs-property">value</span>) <span class="hljs-comment">// å“åº”å¼</span>
<span class="hljs-title function_">updateName</span>(<span class="hljs-string">'èµµå…­'</span>) <span class="hljs-comment">// æ­£å¸¸è°ƒç”¨</span>
</code></pre>
<h3 data-id="heading-8">äº”ã€é«˜çº§ç”¨æ³•</h3>
<h4 data-id="heading-9">5.1 é‡ç½® Store çŠ¶æ€</h4>
<p>è°ƒç”¨Â <code>$reset()</code>Â æ–¹æ³•é‡ç½®çŠ¶æ€åˆ°åˆå§‹å€¼ï¼š</p>
<p>typescript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-scss" lang="scss">const userStore = <span class="hljs-built_in">useUserStore</span>()
userStore.<span class="hljs-variable">$reset</span>() <span class="hljs-comment">// é‡ç½®æ‰€æœ‰çŠ¶æ€</span>
</code></pre>
<h4 data-id="heading-10">5.2 æ‰¹é‡ä¿®æ”¹çŠ¶æ€</h4>
<p>ä½¿ç”¨Â <code>$patch</code>Â æ–¹æ³•æ‰¹é‡æ›´æ–°ï¼ˆæ€§èƒ½æ›´ä¼˜ï¼‰ï¼š</p>
<p>typescript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ–¹å¼1ï¼šå¯¹è±¡å½¢å¼ï¼ˆé€‚åˆç®€å•æ›´æ–°ï¼‰</span>
userStore.$patch({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'é’±ä¸ƒ'</span>,
  <span class="hljs-attr">age</span>: <span class="hljs-number">30</span>
})

<span class="hljs-comment">// æ–¹å¼2ï¼šå‡½æ•°å½¢å¼ï¼ˆé€‚åˆå¤æ‚æ›´æ–°ï¼‰</span>
userStore.$patch(<span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> {
  state.<span class="hljs-property">permissions</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">'admin'</span>)
  state.<span class="hljs-property">age</span> += <span class="hljs-number">1</span>
})
</code></pre>
<h4 data-id="heading-11">5.3 ç›‘å¬ Store å˜åŒ–</h4>
<p>ä½¿ç”¨Â <code>$subscribe</code>Â ç›‘å¬çŠ¶æ€å˜åŒ–ï¼ˆç±»ä¼¼ Vue çš„ watchï¼‰ï¼š</p>
<p>typescript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStore</span>()
<span class="hljs-comment">// ç›‘å¬æ‰€æœ‰çŠ¶æ€å˜åŒ–</span>
<span class="hljs-keyword">const</span> unsubscribe = userStore.$subscribe(<span class="hljs-function">(<span class="hljs-params">mutation, state</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'çŠ¶æ€å˜åŒ–ï¼š'</span>, mutation, state)
  <span class="hljs-comment">// mutation.typeï¼š'direct'ï¼ˆç›´æ¥ä¿®æ”¹ï¼‰| 'patch object' | 'patch function'</span>
  <span class="hljs-comment">// mutation.storeIdï¼šstore å”¯ä¸€ ID</span>
})

<span class="hljs-comment">// å–æ¶ˆç›‘å¬ï¼ˆç»„ä»¶å¸è½½æ—¶è°ƒç”¨ï¼‰</span>
<span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">unsubscribe</span>()
})

<span class="hljs-comment">// å•ç‹¬ç›‘å¬æŸä¸ªå±æ€§ï¼ˆç”¨ Vue çš„ watchï¼‰</span>
<span class="hljs-title function_">watch</span>(<span class="hljs-function">() =&gt;</span> userStore.<span class="hljs-property">age</span>, <span class="hljs-function">(<span class="hljs-params">newAge, oldAge</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¹´é¾„å˜åŒ–ï¼š'</span>, newAge, oldAge)
})
</code></pre>
<h4 data-id="heading-12">5.4 Store ä¹‹é—´ç›¸äº’è°ƒç”¨</h4>
<p>ä¸€ä¸ª store å¯ä»¥å¯¼å…¥å¹¶ä½¿ç”¨å¦ä¸€ä¸ª storeï¼š</p>
<p>typescript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/stores/cart.ts</span>
<span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>
<span class="hljs-keyword">import</span> { useUserStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'./user'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCartStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'cart'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStore</span>()
  <span class="hljs-keyword">const</span> cartList = ref&lt;<span class="hljs-title class_">Array</span>&lt;{ <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>; <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> }&gt;&gt;([])

  <span class="hljs-comment">// æ ¹æ®ç”¨æˆ·æƒé™è¿‡æ»¤è´­ç‰©è½¦</span>
  <span class="hljs-keyword">const</span> filteredCart = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (userStore.<span class="hljs-property">hasAdminPermission</span>) {
      <span class="hljs-keyword">return</span> cartList.<span class="hljs-property">value</span>
    }
    <span class="hljs-keyword">return</span> cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">id</span> &lt; <span class="hljs-number">10</span>)
  })

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">addToCart</span>(<span class="hljs-params">item: { id: <span class="hljs-built_in">number</span>; name: <span class="hljs-built_in">string</span> }</span>) {
    <span class="hljs-comment">// ä½¿ç”¨ userStore çš„çŠ¶æ€</span>
    <span class="hljs-keyword">if</span> (userStore.<span class="hljs-property">age</span> &gt;= <span class="hljs-number">18</span>) {
      cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">push</span>(item)
    }
  }

  <span class="hljs-keyword">return</span> { cartList, filteredCart, addToCart }
})
</code></pre>
<h4 data-id="heading-13">5.5 æŒä¹…åŒ–å­˜å‚¨ï¼ˆå¯é€‰ï¼‰</h4>
<p>ç»“åˆÂ <code>pinia-plugin-persistedstate</code>Â å®ç°çŠ¶æ€æŒä¹…åŒ–ï¼ˆå¦‚ localStorageï¼‰ï¼š</p>
<p>bash</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…æ’ä»¶</span>
npm install pinia-plugin-persistedstate
</code></pre>
<p>typescript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// main.ts</span>
<span class="hljs-keyword">import</span> { createPinia } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>
<span class="hljs-keyword">import</span> piniaPluginPersistedstate <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia-plugin-persistedstate'</span>

<span class="hljs-keyword">const</span> pinia = <span class="hljs-title function_">createPinia</span>()
<span class="hljs-comment">// æ³¨å†ŒæŒä¹…åŒ–æ’ä»¶</span>
pinia.<span class="hljs-title function_">use</span>(piniaPluginPersistedstate)
</code></pre>
<p>typescript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¿®æ”¹ user storeï¼Œæ·»åŠ æŒä¹…åŒ–é…ç½®</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUserStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'user'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// ... åŸæœ‰ä»£ç </span>
}, {
  <span class="hljs-comment">// æŒä¹…åŒ–é…ç½®</span>
  <span class="hljs-attr">persist</span>: {
    <span class="hljs-attr">key</span>: <span class="hljs-string">'user-store'</span>, <span class="hljs-comment">// è‡ªå®šä¹‰å­˜å‚¨çš„ key</span>
    <span class="hljs-attr">storage</span>: <span class="hljs-variable language_">localStorage</span>, <span class="hljs-comment">// å­˜å‚¨æ–¹å¼ï¼ˆlocalStorage/sessionStorageï¼‰</span>
    <span class="hljs-attr">paths</span>: [<span class="hljs-string">'name'</span>, <span class="hljs-string">'age'</span>] <span class="hljs-comment">// åªæŒä¹…åŒ– name å’Œ ageï¼Œé»˜è®¤æ‰€æœ‰çŠ¶æ€</span>
  }
})
</code></pre>
<h3 data-id="heading-14">å…­ã€ç±»å‹æ‰©å±•ï¼ˆå¯é€‰ï¼‰</h3>
<p>å¦‚æœéœ€è¦æ‰©å±• Pinia çš„ç±»å‹ï¼ˆå¦‚è‡ªå®šä¹‰æ’ä»¶ï¼‰ï¼Œå¯åˆ›å»ºÂ <code>src/types/pinia.d.ts</code>ï¼š</p>
<p>typescript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-string">'pinia'</span>

<span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">'pinia'</span> {
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">PiniaCustomProperties</span> {
    <span class="hljs-comment">// æ‰©å±• store å®ä¾‹çš„å±æ€§/æ–¹æ³•</span>
    <span class="hljs-attr">$log</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>
  }
}

<span class="hljs-comment">// åœ¨ main.ts ä¸­æ³¨å†Œ</span>
pinia.<span class="hljs-title function_">use</span>(<span class="hljs-function">(<span class="hljs-params">{ store }</span>) =&gt;</span> {
  store.<span class="hljs-property">$log</span> = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[<span class="hljs-subst">${store.$id}</span>]`</span>, store.<span class="hljs-property">$state</span>)
  }
})

<span class="hljs-comment">// ä½¿ç”¨</span>
userStore.$log() <span class="hljs-comment">// æ‰“å° store çŠ¶æ€</span>
</code></pre>
<h3 data-id="heading-15">ä¸ƒã€æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>Store ID å”¯ä¸€æ€§</strong>ï¼š<code>defineStore</code>Â çš„ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»å”¯ä¸€ï¼Œå¦åˆ™ä¼šå¯¼è‡´çŠ¶æ€å†²çªã€‚</li>
<li><strong>é¿å…åœ¨éç»„ä»¶ä¸­æ»¥ç”¨ Store</strong>ï¼šå¦‚æœåœ¨å·¥å…·å‡½æ•°ä¸­ä½¿ç”¨ Storeï¼Œç¡®ä¿ Pinia å·²åˆå§‹åŒ–ã€‚</li>
<li><strong>å¼‚æ­¥ Action é”™è¯¯å¤„ç†</strong>ï¼šå¼‚æ­¥ Action éœ€æ‰‹åŠ¨æ•è·å¼‚å¸¸ï¼Œé¿å…é¡µé¢å´©æºƒã€‚</li>
<li><strong>å“åº”å¼ä¿æŒ</strong>ï¼šè§£æ„ Store çŠ¶æ€æ—¶å¿…é¡»ä½¿ç”¨Â <code>storeToRefs</code>ï¼Œæ–¹æ³•å¯ç›´æ¥è§£æ„ã€‚</li>
</ol>
<p>ä»¥ä¸Šå°±æ˜¯ Vue3 + TypeScript ä¸­ä½¿ç”¨ Pinia ^3.0.4 çš„å®Œæ•´æŒ‡å—ï¼Œæ¶µç›–äº†åŸºç¡€ç”¨æ³•ã€é«˜çº§ç‰¹æ€§å’Œæœ€ä½³å®è·µï¼Œå¯æ ¹æ®é¡¹ç›®éœ€æ±‚çµæ´»è°ƒæ•´ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React Native å·¥ä½œåŸç†æ·±åº¦è§£æï¼šBridge æœºåˆ¶ä¸æ ¸å¿ƒæ¶æ„]]></title>    <link>https://juejin.cn/post/7581359420391768091</link>    <guid>https://juejin.cn/post/7581359420391768091</guid>    <pubDate>2025-12-08T14:19:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581359420391768091" data-draft-id="7581359420391751707" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React Native å·¥ä½œåŸç†æ·±åº¦è§£æï¼šBridge æœºåˆ¶ä¸æ ¸å¿ƒæ¶æ„"/> <meta itemprop="keywords" content="React Native"/> <meta itemprop="datePublished" content="2025-12-08T14:19:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React Native å·¥ä½œåŸç†æ·±åº¦è§£æï¼šBridge æœºåˆ¶ä¸æ ¸å¿ƒæ¶æ„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T14:19:00.000Z" title="Mon Dec 08 2025 14:19:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å¼•è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦äº†è§£å·¥ä½œåŸç†ï¼Ÿ</h2>
<p>React Native ä½œä¸ºç›®å‰æœ€æµè¡Œçš„è·¨å¹³å°ç§»åŠ¨å¼€å‘æ¡†æ¶ä¹‹ä¸€ï¼Œå…¶ç‹¬ç‰¹çš„"ç”¨JavaScriptå¼€å‘åŸç”Ÿåº”ç”¨"çš„ç†å¿µå¸å¼•äº†æ— æ•°å¼€å‘è€…ã€‚ä½†çœŸæ­£æŒæ¡ React Nativeï¼Œä¸ä»…éœ€è¦ä¼šä½¿ç”¨å®ƒï¼Œæ›´éœ€è¦æ·±å…¥ç†è§£å…¶åº•å±‚å·¥ä½œåŸç†ã€‚æœ¬æ–‡å°†æ·±åº¦å‰–æ React Native çš„<strong>æ ¸å¿ƒæ¶æ„</strong>ã€<strong>Bridge æœºåˆ¶</strong>ï¼Œå¹¶é€šè¿‡å¤§é‡ä»£ç ç¤ºä¾‹å’Œæµç¨‹å›¾ï¼Œè®©ä½ å½»åº•ç†è§£ React Native æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p>
<h2 data-id="heading-1">äºŒã€React Native æ•´ä½“æ¶æ„æ¦‚è§ˆ</h2>
<h3 data-id="heading-2">1. ä¸‰å±‚æ¶æ„æ¨¡å‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "JavaScript å±‚"
        A[JSX/Reactç»„ä»¶] --&gt; B[Virtual DOM&lt;br&gt;è™šæ‹ŸDOM]
        B --&gt; C[React Reconciler&lt;br&gt;åè°ƒå™¨]
    end
    
    subgraph "Bridge æ¡¥æ¥å±‚"
        C --&gt; D[MessageQueue&lt;br&gt;æ¶ˆæ¯é˜Ÿåˆ—]
        D --&gt; E[Serialization&lt;br&gt;åºåˆ—åŒ–/ååºåˆ—åŒ–]
        E --&gt; F[Batched Bridge&lt;br&gt;æ‰¹é‡æ¡¥æ¥]
    end
    
    subgraph "Native åŸç”Ÿå±‚"
        F --&gt; G[iOS/Android&lt;br&gt;åŸç”Ÿæ¨¡å—]
        G --&gt; H[UIKit/View&lt;br&gt;åŸç”ŸUIç»„ä»¶]
        H --&gt; I[GPUæ¸²æŸ“&lt;br&gt;å±å¹•æ˜¾ç¤º]
    end
    
    J[å¼€å‘è€…] --&gt; A
    I --&gt; K[ç”¨æˆ·ç•Œé¢]
    
    style D fill:#e1f5fe
    style E fill:#e1f5fe
    style F fill:#e1f5fe
</code></pre>
<h3 data-id="heading-3">2. æ ¸å¿ƒç»„ä»¶äº¤äº’æµç¨‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç®€å•çš„React Nativeç»„ä»¶ç¤ºä¾‹</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">View</span>, <span class="hljs-title class_">Text</span>, <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">SimpleApp</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">flex:</span> <span class="hljs-attr">1</span>, <span class="hljs-attr">justifyContent:</span> '<span class="hljs-attr">center</span>', <span class="hljs-attr">alignItems:</span> '<span class="hljs-attr">center</span>' }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>è®¡æ•°å™¨: {count}<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> 
        <span class="hljs-attr">title</span>=<span class="hljs-string">"å¢åŠ "</span> 
        <span class="hljs-attr">onPress</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count + 1)} 
      /&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span>
  );
};
</code></pre>
<p>è¿™ä¸ªç®€å•çš„ç»„ä»¶èƒŒåï¼Œéšè—ç€å¤æ‚çš„è·¨å¹³å°äº¤äº’æœºåˆ¶ã€‚è®©æˆ‘ä»¬ä¸€æ­¥æ­¥æ‹†è§£ã€‚</p>
<h2 data-id="heading-4">ä¸‰ã€JavaScript å±‚æ·±åº¦è§£æ</h2>
<h3 data-id="heading-5">1. JSX åˆ°è™šæ‹ŸDOMçš„è½¬æ¢</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¼€å‘è€…ç¼–å†™çš„JSXä»£ç </span>
&lt;<span class="hljs-title class_">View</span> style={styles.<span class="hljs-property">container</span>}&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>Hello World<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"Press Me"</span> /&gt;</span></span>
&lt;/<span class="hljs-title class_">View</span>&gt;

<span class="hljs-comment">// ç»è¿‡Babelè½¬æ¢åçš„JavaScriptä»£ç </span>
<span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(
  <span class="hljs-title class_">View</span>, 
  { <span class="hljs-attr">style</span>: styles.<span class="hljs-property">container</span> },
  <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-title class_">Text</span>, <span class="hljs-literal">null</span>, <span class="hljs-string">'Hello World'</span>),
  <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-title class_">Button</span>, { <span class="hljs-attr">title</span>: <span class="hljs-string">'Press Me'</span> })
);

<span class="hljs-comment">// å¯¹åº”çš„è™šæ‹ŸDOMå¯¹è±¡</span>
<span class="hljs-keyword">const</span> virtualDOM = {
  <span class="hljs-attr">type</span>: <span class="hljs-string">'View'</span>,
  <span class="hljs-attr">props</span>: {
    <span class="hljs-attr">style</span>: { <span class="hljs-attr">flex</span>: <span class="hljs-number">1</span> },
    <span class="hljs-attr">children</span>: [
      {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'Text'</span>,
        <span class="hljs-attr">props</span>: {
          <span class="hljs-attr">children</span>: <span class="hljs-string">'Hello World'</span>
        }
      },
      {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'Button'</span>,
        <span class="hljs-attr">props</span>: {
          <span class="hljs-attr">title</span>: <span class="hljs-string">'Press Me'</span>
        }
      }
    ]
  }
};
</code></pre>
<h3 data-id="heading-6">2. React Reconcilerï¼ˆåè°ƒå™¨ï¼‰å·¥ä½œåŸç†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç®€åŒ–çš„Reconcilerå®ç°æ¦‚å¿µ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Reconciler</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">previousTree</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentTree</span> = <span class="hljs-literal">null</span>;
  }
  
  <span class="hljs-comment">// å·®å¼‚å¯¹æ¯”ç®—æ³•</span>
  <span class="hljs-title function_">diff</span>(<span class="hljs-params">newTree, oldTree</span>) {
    <span class="hljs-keyword">const</span> changes = [];
    
    <span class="hljs-comment">// 1. èŠ‚ç‚¹ç±»å‹ä¸åŒï¼Œå®Œå…¨æ›¿æ¢</span>
    <span class="hljs-keyword">if</span> (newTree.<span class="hljs-property">type</span> !== oldTree.<span class="hljs-property">type</span>) {
      changes.<span class="hljs-title function_">push</span>({
        <span class="hljs-attr">type</span>: <span class="hljs-string">'REPLACE'</span>,
        <span class="hljs-attr">node</span>: newTree
      });
    }
    <span class="hljs-comment">// 2. å±æ€§ä¸åŒï¼Œæ›´æ–°å±æ€§</span>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">propsChanged</span>(newTree.<span class="hljs-property">props</span>, oldTree.<span class="hljs-property">props</span>)) {
      changes.<span class="hljs-title function_">push</span>({
        <span class="hljs-attr">type</span>: <span class="hljs-string">'UPDATE_PROPS'</span>,
        <span class="hljs-attr">props</span>: newTree.<span class="hljs-property">props</span>
      });
    }
    
    <span class="hljs-comment">// 3. é€’å½’å¤„ç†å­èŠ‚ç‚¹</span>
    <span class="hljs-keyword">const</span> childChanges = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">diffChildren</span>(newTree.<span class="hljs-property">children</span>, oldTree.<span class="hljs-property">children</span>);
    changes.<span class="hljs-title function_">push</span>(...childChanges);
    
    <span class="hljs-keyword">return</span> changes;
  }
  
  <span class="hljs-title function_">diffChildren</span>(<span class="hljs-params">newChildren, oldChildren</span>) {
    <span class="hljs-comment">// ä½¿ç”¨keyä¼˜åŒ–åˆ—è¡¨æ›´æ–°</span>
    <span class="hljs-keyword">const</span> changes = [];
    
    <span class="hljs-comment">// ç®€åŒ–çš„åˆ—è¡¨diffç®—æ³•</span>
    <span class="hljs-keyword">const</span> maxLength = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(newChildren.<span class="hljs-property">length</span>, oldChildren.<span class="hljs-property">length</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; maxLength; i++) {
      <span class="hljs-keyword">if</span> (i &gt;= newChildren.<span class="hljs-property">length</span>) {
        <span class="hljs-comment">// åˆ é™¤èŠ‚ç‚¹</span>
        changes.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'REMOVE'</span>, <span class="hljs-attr">index</span>: i });
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i &gt;= oldChildren.<span class="hljs-property">length</span>) {
        <span class="hljs-comment">// æ–°å¢èŠ‚ç‚¹</span>
        changes.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'INSERT'</span>, <span class="hljs-attr">node</span>: newChildren[i], <span class="hljs-attr">index</span>: i });
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// é€’å½’æ¯”è¾ƒ</span>
        <span class="hljs-keyword">const</span> childChanges = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">diff</span>(newChildren[i], oldChildren[i]);
        <span class="hljs-keyword">if</span> (childChanges.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
          changes.<span class="hljs-title function_">push</span>({
            <span class="hljs-attr">type</span>: <span class="hljs-string">'UPDATE_CHILD'</span>,
            <span class="hljs-attr">index</span>: i,
            <span class="hljs-attr">changes</span>: childChanges
          });
        }
      }
    }
    
    <span class="hljs-keyword">return</span> changes;
  }
}
</code></pre>
<h2 data-id="heading-7">å››ã€Bridge æœºåˆ¶ï¼šReact Native çš„æ ¸å¿ƒ</h2>
<h3 data-id="heading-8">1. Bridge æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p><strong>Bridge</strong> æ˜¯ React Native æ¶æ„ä¸­æœ€æ ¸å¿ƒçš„æ¦‚å¿µï¼Œå®ƒæ˜¯è¿æ¥ JavaScript è¿è¡Œæ—¶å’Œ Native åŸç”Ÿç¯å¢ƒçš„æ¡¥æ¢ã€‚Bridge çš„ä¸»è¦èŒè´£åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>é€šä¿¡ä¸­ä»‹</strong>ï¼šåœ¨ JS çº¿ç¨‹å’Œ Native çº¿ç¨‹ä¹‹é—´ä¼ é€’æ¶ˆæ¯</li>
<li><strong>å¼‚æ­¥é€šä¿¡</strong>ï¼šç¡®ä¿çº¿ç¨‹å®‰å…¨ï¼Œé¿å…é˜»å¡</li>
<li><strong>åºåˆ—åŒ–/ååºåˆ—åŒ–</strong>ï¼šè½¬æ¢ä¸åŒç¯å¢ƒé—´çš„æ•°æ®æ ¼å¼</li>
<li><strong>æ¶ˆæ¯é˜Ÿåˆ—</strong>ï¼šç®¡ç†æ¶ˆæ¯çš„å‘é€å’Œæ¥æ”¶é¡ºåº</li>
</ol>
<h3 data-id="heading-9">2. Bridge æ¶æ„è¯¦è§£</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant JS as JavaScriptçº¿ç¨‹
    participant MQ as MessageQueue
    participant S as Serializer
    participant B as BatchedBridge
    participant NM as NativeModules
    participant UI as Native UIçº¿ç¨‹
    
    Note over JS,UI: åˆå§‹åŒ–é˜¶æ®µ
    JS-&gt;&gt;MQ: æ³¨å†ŒJSæ¨¡å—å’Œæ–¹æ³•
    MQ-&gt;&gt;S: åºåˆ—åŒ–æ¨¡å—ä¿¡æ¯
    S-&gt;&gt;B: ä¼ è¾“åˆ°Native
    B-&gt;&gt;NM: æ³¨å†ŒNativeæ¨¡å—
    NM-&gt;&gt;UI: åˆå§‹åŒ–UIç»„ä»¶
    
    Note over JS,UI: è¿è¡Œæ—¶é€šä¿¡
    JS-&gt;&gt;MQ: è°ƒç”¨Nativeæ–¹æ³•(showAlert)
    MQ-&gt;&gt;S: åºåˆ—åŒ–è°ƒç”¨ä¿¡æ¯
    S-&gt;&gt;B: æ‰¹é‡å‘é€æ¶ˆæ¯
    B-&gt;&gt;NM: åˆ†å‘åˆ°å¯¹åº”æ¨¡å—
    NM-&gt;&gt;UI: æ‰§è¡ŒåŸç”Ÿä»£ç (æ˜¾ç¤ºå¼¹çª—)
    UI-&gt;&gt;NM: æ‰§è¡Œå®Œæˆ
    NM-&gt;&gt;B: è¿”å›ç»“æœ
    B-&gt;&gt;S: åºåˆ—åŒ–ç»“æœ
    S-&gt;&gt;MQ: æ”¾å…¥æ¶ˆæ¯é˜Ÿåˆ—
    MQ-&gt;&gt;JS: å›è°ƒJavaScript
</code></pre>
<h3 data-id="heading-10">3. Bridge å®ç°ä»£ç è§£æ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Bridgeæ ¸å¿ƒå®ç°æ¦‚å¿µä»£ç </span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ReactNativeBridge</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageQueue</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbackQueue</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbackId</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isProcessing</span> = <span class="hljs-literal">false</span>;
    
    <span class="hljs-comment">// åˆå§‹åŒ–Nativeé€šä¿¡</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupNativeCommunication</span>();
  }
  
  <span class="hljs-comment">// è®¾ç½®Nativeé€šä¿¡</span>
  <span class="hljs-title function_">setupNativeCommunication</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// åˆ›å»ºé€šä¿¡é€šé“</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">ReactNativeWebView</span>) {
      <span class="hljs-comment">// WebViewç¯å¢ƒ</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">postMessage</span> = <span class="hljs-function">(<span class="hljs-params">message</span>) =&gt;</span> {
        <span class="hljs-variable language_">window</span>.<span class="hljs-property">ReactNativeWebView</span>.<span class="hljs-title function_">postMessage</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(message));
      };
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// åŸç”Ÿç¯å¢ƒï¼ˆç®€åŒ–è¡¨ç¤ºï¼‰</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">postMessage</span> = <span class="hljs-function">(<span class="hljs-params">message</span>) =&gt;</span> {
        <span class="hljs-comment">// å®é™…æ˜¯é€šè¿‡JSIæˆ–åŸç”Ÿæ¡¥æ¥è°ƒç”¨</span>
        <span class="hljs-variable language_">global</span>.<span class="hljs-title function_">__nativeCall</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(message));
      };
    }
    
    <span class="hljs-comment">// è®¾ç½®æ¶ˆæ¯æ¥æ”¶å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupMessageReceiver</span>();
  }
  
  <span class="hljs-comment">// è°ƒç”¨Nativeæ–¹æ³•</span>
  <span class="hljs-title function_">callNative</span>(<span class="hljs-params">moduleName, methodName, args, callback</span>) {
    <span class="hljs-keyword">const</span> messageId = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateMessageId</span>();
    
    <span class="hljs-keyword">const</span> message = {
      <span class="hljs-attr">id</span>: messageId,
      <span class="hljs-attr">module</span>: moduleName,
      <span class="hljs-attr">method</span>: methodName,
      <span class="hljs-attr">args</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">serializeArgs</span>(args),
    };
    
    <span class="hljs-comment">// å¦‚æœæœ‰å›è°ƒå‡½æ•°ï¼Œä¿å­˜èµ·æ¥</span>
    <span class="hljs-keyword">if</span> (callback) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbackQueue</span>.<span class="hljs-title function_">set</span>(messageId, callback);
    }
    
    <span class="hljs-comment">// å°†æ¶ˆæ¯åŠ å…¥é˜Ÿåˆ—</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageQueue</span>.<span class="hljs-title function_">push</span>(message);
    
    <span class="hljs-comment">// è§¦å‘æ‰¹é‡å¤„ç†</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">processQueue</span>();
    
    <span class="hljs-keyword">return</span> messageId;
  }
  
  <span class="hljs-comment">// å¤„ç†æ¶ˆæ¯é˜Ÿåˆ—</span>
  <span class="hljs-title function_">processQueue</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isProcessing</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageQueue</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isProcessing</span> = <span class="hljs-literal">true</span>;
    
    <span class="hljs-comment">// æ‰¹é‡å¤„ç†æ¶ˆæ¯ï¼ˆReact Nativeé»˜è®¤æ¯16msæ‰¹é‡ä¸€æ¬¡ï¼‰</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> batch = <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageQueue</span>.<span class="hljs-title function_">slice</span>();
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageQueue</span> = [];
      
      <span class="hljs-comment">// å‘é€åˆ°Native</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">postMessage</span>({
        <span class="hljs-attr">type</span>: <span class="hljs-string">'BATCH'</span>,
        <span class="hljs-attr">messages</span>: batch,
      });
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isProcessing</span> = <span class="hljs-literal">false</span>;
      
      <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰æ–°æ¶ˆæ¯</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">messageQueue</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">processQueue</span>();
      }
    }, <span class="hljs-number">16</span>); <span class="hljs-comment">// çº¦ç­‰äºä¸€å¸§çš„æ—¶é—´</span>
  }
  
  <span class="hljs-comment">// åºåˆ—åŒ–å‚æ•°</span>
  <span class="hljs-title function_">serializeArgs</span>(<span class="hljs-params">args</span>) {
    <span class="hljs-comment">// React Nativeä½¿ç”¨ç‰¹æ®Šçš„åºåˆ—åŒ–æ ¼å¼</span>
    <span class="hljs-comment">// æ”¯æŒåŸºæœ¬ç±»å‹ã€æ•°ç»„ã€å¯¹è±¡</span>
    <span class="hljs-keyword">return</span> args.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">arg</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> arg === <span class="hljs-string">'function'</span>) {
        <span class="hljs-comment">// å‡½æ•°ä¼šè¢«è½¬æ¢ä¸ºcallbackId</span>
        <span class="hljs-keyword">const</span> callbackId = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateCallbackId</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbackQueue</span>.<span class="hljs-title function_">set</span>(callbackId, arg);
        <span class="hljs-keyword">return</span> {
          <span class="hljs-attr">__type</span>: <span class="hljs-string">'function'</span>,
          <span class="hljs-attr">__id</span>: callbackId,
        };
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(arg)) {
        <span class="hljs-keyword">return</span> {
          <span class="hljs-attr">__type</span>: <span class="hljs-string">'array'</span>,
          <span class="hljs-attr">__value</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">serializeArgs</span>(arg),
        };
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> arg === <span class="hljs-string">'object'</span> &amp;&amp; arg !== <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> {
          <span class="hljs-attr">__type</span>: <span class="hljs-string">'object'</span>,
          <span class="hljs-attr">__value</span>: <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(arg).<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">obj, key</span>) =&gt;</span> {
            obj[key] = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">serializeArgs</span>([arg[key]])[<span class="hljs-number">0</span>];
            <span class="hljs-keyword">return</span> obj;
          }, {}),
        };
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> {
          <span class="hljs-attr">__type</span>: <span class="hljs-string">'primitive'</span>,
          <span class="hljs-attr">__value</span>: arg,
        };
      }
    });
  }
  
  <span class="hljs-comment">// ååºåˆ—åŒ–ç»“æœ</span>
  <span class="hljs-title function_">deserializeResult</span>(<span class="hljs-params">result</span>) {
    <span class="hljs-keyword">if</span> (result.<span class="hljs-property">__type</span> === <span class="hljs-string">'array'</span>) {
      <span class="hljs-keyword">return</span> result.<span class="hljs-property">__value</span>.<span class="hljs-title function_">map</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">deserializeResult</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (result.<span class="hljs-property">__type</span> === <span class="hljs-string">'object'</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(result.<span class="hljs-property">__value</span>).<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">obj, key</span>) =&gt;</span> {
        obj[key] = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">deserializeResult</span>(result.<span class="hljs-property">__value</span>[key]);
        <span class="hljs-keyword">return</span> obj;
      }, {});
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (result.<span class="hljs-property">__type</span> === <span class="hljs-string">'function'</span>) {
      <span class="hljs-comment">// è¿”å›ä¸€ä¸ªåŒ…è£…å‡½æ•°ï¼Œè°ƒç”¨Native</span>
      <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">callNative</span>(<span class="hljs-string">'CallbackModule'</span>, <span class="hljs-string">'invoke'</span>, 
          [result.<span class="hljs-property">__id</span>, args]);
      };
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> result.<span class="hljs-property">__value</span>;
    }
  }
  
  <span class="hljs-comment">// æ¥æ”¶Nativeæ¶ˆæ¯</span>
  <span class="hljs-title function_">receiveNativeMessage</span>(<span class="hljs-params">messageStr</span>) {
    <span class="hljs-keyword">const</span> message = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(messageStr);
    
    <span class="hljs-keyword">if</span> (message.<span class="hljs-property">type</span> === <span class="hljs-string">'RESPONSE'</span>) {
      <span class="hljs-comment">// å¤„ç†Nativeè¿”å›ç»“æœ</span>
      <span class="hljs-keyword">const</span> callback = <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbackQueue</span>.<span class="hljs-title function_">get</span>(message.<span class="hljs-property">id</span>);
      <span class="hljs-keyword">if</span> (callback) {
        <span class="hljs-keyword">const</span> result = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">deserializeResult</span>(message.<span class="hljs-property">result</span>);
        <span class="hljs-title function_">callback</span>(result);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbackQueue</span>.<span class="hljs-title function_">delete</span>(message.<span class="hljs-property">id</span>);
      }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (message.<span class="hljs-property">type</span> === <span class="hljs-string">'CALLBACK'</span>) {
      <span class="hljs-comment">// Nativeè°ƒç”¨JSå›è°ƒ</span>
      <span class="hljs-keyword">const</span> callback = <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbackQueue</span>.<span class="hljs-title function_">get</span>(message.<span class="hljs-property">callbackId</span>);
      <span class="hljs-keyword">if</span> (callback) {
        <span class="hljs-keyword">const</span> args = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">deserializeResult</span>(message.<span class="hljs-property">args</span>);
        <span class="hljs-title function_">callback</span>(...args);
      }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (message.<span class="hljs-property">type</span> === <span class="hljs-string">'EVENT'</span>) {
      <span class="hljs-comment">// Nativeå‘é€çš„äº‹ä»¶</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emitEvent</span>(message.<span class="hljs-property">eventName</span>, message.<span class="hljs-property">data</span>);
    }
  }
  
  <span class="hljs-title function_">generateMessageId</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`msg_<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>_<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.callbackId++}</span>`</span>;
  }
  
  <span class="hljs-title function_">generateCallbackId</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`cb_<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>_<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.callbackId++}</span>`</span>;
  }
}

<span class="hljs-comment">// å…¨å±€Bridgeå®ä¾‹</span>
<span class="hljs-variable language_">global</span>.<span class="hljs-property">__ReactNativeBridge</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReactNativeBridge</span>();
</code></pre>
<h2 data-id="heading-11">äº”ã€Native åŸç”Ÿå±‚å®ç°</h2>
<h3 data-id="heading-12">1. iOS Native æ¨¡å—å®ç°</h3>
<pre><code class="hljs language-objective-c" lang="objective-c">// RCTBridgeModule.h (ç®€åŒ–)
@protocol RCTBridgeModule &lt;NSObject&gt;
+ (NSString *)moduleName;
@optional
- (NSDictionary *)constantsToExport;
- (void)setBridge:(RCTBridge *)bridge;
@end

// AlertManager.m - iOSåŸç”Ÿæ¨¡å—
#import &lt;React/RCTBridgeModule.h&gt;
#import &lt;React/RCTLog.h&gt;
#import &lt;UIKit/UIKit.h&gt;

@interface AlertManager : NSObject &lt;RCTBridgeModule&gt;
@end

@implementation AlertManager

// å¯¼å‡ºæ¨¡å—åç§°
RCT_EXPORT_MODULE();

// å¯¼å‡ºå¸¸é‡ï¼ˆåŒæ­¥ï¼‰
- (NSDictionary *)constantsToExport {
  return @{
    @"Version": @"1.0.0",
    @"Platform": @"iOS"
  };
}

// å¯¼å‡ºæ–¹æ³•ï¼ˆå¼‚æ­¥ï¼‰
RCT_EXPORT_METHOD(showAlert:(NSString *)title
                  message:(NSString *)message
                  options:(NSDictionary *)options
                  resolver:(RCTPromiseResolveBlock)resolve
                  rejecter:(RCTPromiseRejectBlock)reject) {
  
  // å¿…é¡»åœ¨ä¸»çº¿ç¨‹æ‰§è¡ŒUIæ“ä½œ
  dispatch_async(dispatch_get_main_queue(), ^{
    UIAlertController *alert = [UIAlertController
      alertControllerWithTitle:title
      message:message
      preferredStyle:UIAlertControllerStyleAlert];
    
    // æ·»åŠ æŒ‰é’®
    UIAlertAction *okAction = [UIAlertAction
      actionWithTitle:@"OK"
      style:UIAlertActionStyleDefault
      handler:^(UIAlertAction *action) {
        resolve(@{@"buttonClicked": @"OK"});
      }];
    
    UIAlertAction *cancelAction = [UIAlertAction
      actionWithTitle:@"Cancel"
      style:UIAlertActionStyleCancel
      handler:^(UIAlertAction *action) {
        resolve(@{@"buttonClicked": @"Cancel"});
      }];
    
    [alert addAction:okAction];
    [alert addAction:cancelAction];
    
    // è·å–å½“å‰æ˜¾ç¤ºçš„ViewController
    UIViewController *rootController = [UIApplication sharedApplication]
      .keyWindow.rootViewController;
    
    [rootController presentViewController:alert animated:YES completion:nil];
  });
}

// å¯¼å‡ºçº¿ç¨‹é…ç½®ï¼ˆå¯é€‰ï¼‰
- (dispatch_queue_t)methodQueue {
  return dispatch_get_main_queue(); // UIæ“ä½œå¿…é¡»åœ¨ä¸»çº¿ç¨‹
}

@end
</code></pre>
<h3 data-id="heading-13">2. Android Native æ¨¡å—å®ç°</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// AlertModule.java - AndroidåŸç”Ÿæ¨¡å—</span>
<span class="hljs-keyword">package</span> com.example.app;

<span class="hljs-keyword">import</span> android.app.AlertDialog;
<span class="hljs-keyword">import</span> android.content.DialogInterface;

<span class="hljs-keyword">import</span> com.facebook.react.bridge.ReactApplicationContext;
<span class="hljs-keyword">import</span> com.facebook.react.bridge.ReactContextBaseJavaModule;
<span class="hljs-keyword">import</span> com.facebook.react.bridge.ReactMethod;
<span class="hljs-keyword">import</span> com.facebook.react.bridge.Promise;
<span class="hljs-keyword">import</span> com.facebook.react.bridge.WritableMap;
<span class="hljs-keyword">import</span> com.facebook.react.bridge.Arguments;

<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AlertModule</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ReactContextBaseJavaModule</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ReactApplicationContext reactContext;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AlertModule</span><span class="hljs-params">(ReactApplicationContext reactContext)</span> {
        <span class="hljs-built_in">super</span>(reactContext);
        <span class="hljs-built_in">this</span>.reactContext = reactContext;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"AlertManager"</span>;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title function_">getConstants</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">final</span> Map&lt;String, Object&gt; constants = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        constants.put(<span class="hljs-string">"Version"</span>, <span class="hljs-string">"1.0.0"</span>);
        constants.put(<span class="hljs-string">"Platform"</span>, <span class="hljs-string">"Android"</span>);
        <span class="hljs-keyword">return</span> constants;
    }

    <span class="hljs-meta">@ReactMethod</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">showAlert</span><span class="hljs-params">(String title, String message, 
                         ReadableMap options, Promise promise)</span> {
        <span class="hljs-comment">// åœ¨ä¸»çº¿ç¨‹æ‰§è¡ŒUIæ“ä½œ</span>
        getCurrentActivity().runOnUiThread(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
                AlertDialog.<span class="hljs-type">Builder</span> <span class="hljs-variable">builder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AlertDialog</span>.Builder(
                    getCurrentActivity());
                
                builder.setTitle(title)
                    .setMessage(message)
                    .setPositiveButton(<span class="hljs-string">"OK"</span>, 
                        <span class="hljs-keyword">new</span> <span class="hljs-title class_">DialogInterface</span>.OnClickListener() {
                            <span class="hljs-meta">@Override</span>
                            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onClick</span><span class="hljs-params">(DialogInterface dialog, <span class="hljs-type">int</span> which)</span> {
                                <span class="hljs-type">WritableMap</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> Arguments.createMap();
                                result.putString(<span class="hljs-string">"buttonClicked"</span>, <span class="hljs-string">"OK"</span>);
                                promise.resolve(result);
                            }
                        })
                    .setNegativeButton(<span class="hljs-string">"Cancel"</span>, 
                        <span class="hljs-keyword">new</span> <span class="hljs-title class_">DialogInterface</span>.OnClickListener() {
                            <span class="hljs-meta">@Override</span>
                            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onClick</span><span class="hljs-params">(DialogInterface dialog, <span class="hljs-type">int</span> which)</span> {
                                <span class="hljs-type">WritableMap</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> Arguments.createMap();
                                result.putString(<span class="hljs-string">"buttonClicked"</span>, <span class="hljs-string">"Cancel"</span>);
                                promise.resolve(result);
                            }
                        })
                    .setOnCancelListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DialogInterface</span>.OnCancelListener() {
                        <span class="hljs-meta">@Override</span>
                        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCancel</span><span class="hljs-params">(DialogInterface dialog)</span> {
                            promise.reject(<span class="hljs-string">"CANCELLED"</span>, <span class="hljs-string">"Dialog was cancelled"</span>);
                        }
                    });
                
                <span class="hljs-type">AlertDialog</span> <span class="hljs-variable">dialog</span> <span class="hljs-operator">=</span> builder.create();
                dialog.show();
            }
        });
    }
}

<span class="hljs-comment">// AlertPackage.java - æ³¨å†Œæ¨¡å—</span>
<span class="hljs-keyword">package</span> com.example.app;

<span class="hljs-keyword">import</span> com.facebook.react.ReactPackage;
<span class="hljs-keyword">import</span> com.facebook.react.bridge.NativeModule;
<span class="hljs-keyword">import</span> com.facebook.react.bridge.ReactApplicationContext;
<span class="hljs-keyword">import</span> com.facebook.react.uimanager.ViewManager;

<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.Collections;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AlertPackage</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ReactPackage</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;ViewManager&gt; <span class="hljs-title function_">createViewManagers</span><span class="hljs-params">(
        ReactApplicationContext reactContext)</span> {
        <span class="hljs-keyword">return</span> Collections.emptyList();
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;NativeModule&gt; <span class="hljs-title function_">createNativeModules</span><span class="hljs-params">(
        ReactApplicationContext reactContext)</span> {
        List&lt;NativeModule&gt; modules = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        modules.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">AlertModule</span>(reactContext));
        <span class="hljs-keyword">return</span> modules;
    }
}
</code></pre>
<h2 data-id="heading-14">å…­ã€UIç»„ä»¶æ¸²æŸ“æµç¨‹</h2>
<h3 data-id="heading-15">1. ä»JSXåˆ°åŸç”ŸUIçš„å®Œæ•´æµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[å¼€å‘è€…ç¼–å†™JSX] --&gt; B[Babelè½¬è¯‘]
    B --&gt; C[React.createElement]
    C --&gt; D[Virtual DOMæ ‘]
    D --&gt; E[Reconciliation Diff]
    E --&gt; F[ç”ŸæˆUIæ›´æ–°æŒ‡ä»¤]
    
    subgraph "Bridgeä¼ è¾“"
        F --&gt; G[åºåˆ—åŒ–UIæŒ‡ä»¤]
        G --&gt; H[é€šè¿‡Bridgeä¼ è¾“]
        H --&gt; I[ååºåˆ—åŒ–]
    end
    
    subgraph "Nativeæ¸²æŸ“"
        I --&gt; J{iOSå¹³å°?}
        J --&gt; K[æ˜¯]
        J --&gt; L[å¦]
        
        K --&gt; M[åˆ›å»ºUIView]
        M --&gt; N[è®¾ç½®AutoLayoutçº¦æŸ]
        N --&gt; O[æ·»åŠ åˆ°è§†å›¾å±‚çº§]
        
        L --&gt; P[åˆ›å»ºView]
        P --&gt; Q[è®¾ç½®LayoutParams]
        Q --&gt; R[æ·»åŠ åˆ°ViewGroup]
    end
    
    O --&gt; S[Core Animationæ¸²æŸ“]
    R --&gt; T[SurfaceFlingeræ¸²æŸ“]
    
    S --&gt; U[GPUç»˜åˆ¶]
    T --&gt; U
    
    U --&gt; V[å±å¹•æ˜¾ç¤º]
</code></pre>
<h3 data-id="heading-16">2. å…·ä½“æ¸²æŸ“ç¤ºä¾‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// React Native UIç»„ä»¶ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">ComplexUI</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [visible, setVisible] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.container}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.title}</span>&gt;</span>React Nativeæ¸²æŸ“æ¼”ç¤º<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">ScrollView</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.scrollView}</span>&gt;</span>
        {Array.from({ length: 50 }).map((_, i) =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{i}</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.item}</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>é¡¹ç›® {i + 1}<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Switch</span> 
              <span class="hljs-attr">value</span>=<span class="hljs-string">{visible}</span>
              <span class="hljs-attr">onValueChange</span>=<span class="hljs-string">{setVisible}</span>
            /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">ScrollView</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">Modal</span> <span class="hljs-attr">visible</span>=<span class="hljs-string">{visible}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.modal}</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªæ¨¡æ€æ¡†<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> 
            <span class="hljs-attr">title</span>=<span class="hljs-string">"å…³é—­"</span> 
            <span class="hljs-attr">onPress</span>=<span class="hljs-string">{()</span> =&gt;</span> setVisible(false)} 
          /&gt;
        <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Modal</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span>
  );
};

<span class="hljs-comment">// å¯¹åº”çš„Nativeæ¸²æŸ“æŒ‡ä»¤ï¼ˆç®€åŒ–è¡¨ç¤ºï¼‰</span>
<span class="hljs-keyword">const</span> renderCommands = [
  {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'CREATE_VIEW'</span>,
    <span class="hljs-attr">reactTag</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">viewName</span>: <span class="hljs-string">'RCTView'</span>,
    <span class="hljs-attr">props</span>: { <span class="hljs-attr">style</span>: { <span class="hljs-attr">flex</span>: <span class="hljs-number">1</span> } }
  },
  {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'CREATE_VIEW'</span>,
    <span class="hljs-attr">reactTag</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">viewName</span>: <span class="hljs-string">'RCTTextView'</span>,
    <span class="hljs-attr">props</span>: { <span class="hljs-attr">text</span>: <span class="hljs-string">'React Nativeæ¸²æŸ“æ¼”ç¤º'</span> }
  },
  {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'ADD_CHILD'</span>,
    <span class="hljs-attr">parentTag</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">childTag</span>: <span class="hljs-number">2</span>
  },
  <span class="hljs-comment">// ... æ›´å¤šå‘½ä»¤</span>
];
</code></pre>
<h2 data-id="heading-17">ä¸ƒã€æ–°æ¶æ„ï¼šJSI å’Œ Fabric</h2>
<h3 data-id="heading-18">1. ä¼ ç»ŸBridgeçš„é—®é¢˜</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼ ç»ŸBridgeçš„å±€é™æ€§ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">TraditionalBridgeProblem</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// 1. åºåˆ—åŒ–/ååºåˆ—åŒ–å¼€é”€å¤§</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">bigData</span> = { <span class="hljs-comment">/* å¤§é‡æ•°æ® */</span> };
    
    <span class="hljs-comment">// 2. å¼‚æ­¥é€šä¿¡å»¶è¿Ÿ</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// è°ƒç”¨Nativeæ–¹æ³•</span>
      <span class="hljs-title class_">NativeModules</span>.<span class="hljs-property">DataProcessor</span>.<span class="hljs-title function_">process</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">bigData</span>, <span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {
        <span class="hljs-comment">// å›è°ƒæœ‰å»¶è¿Ÿ</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤„ç†å®Œæˆ:'</span>, result);
      });
    }, <span class="hljs-number">0</span>);
    
    <span class="hljs-comment">// 3. å†…å­˜å ç”¨é«˜</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cachedData</span> = [];
  }
  
  <span class="hljs-comment">// é¢‘ç¹è°ƒç”¨æ€§èƒ½å·®</span>
  <span class="hljs-title function_">frequentCalls</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
      <span class="hljs-comment">// æ¯æ¬¡è°ƒç”¨éƒ½éœ€è¦ç»è¿‡Bridge</span>
      <span class="hljs-title class_">NativeModules</span>.<span class="hljs-property">Utility</span>.<span class="hljs-title function_">doSomething</span>(i);
    }
  }
}
</code></pre>
<h3 data-id="heading-19">2. JSIï¼ˆJavaScript Interfaceï¼‰æ¶æ„</h3>
<pre><code class="hljs language-c++" lang="c++"><span class="hljs-comment">// JSI C++ æ¥å£æ¦‚å¿µ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">JSIInterface</span> {
<span class="hljs-keyword">public</span>:
  <span class="hljs-comment">// JavaScriptå¯ä»¥ç›´æ¥è°ƒç”¨C++å‡½æ•°</span>
  <span class="hljs-function"><span class="hljs-type">static</span> Value <span class="hljs-title">callNativeFunction</span><span class="hljs-params">(
    Runtime &amp;runtime,
    <span class="hljs-type">const</span> Value &amp;thisValue,
    <span class="hljs-type">const</span> Value *arguments,
    <span class="hljs-type">size_t</span> count
  )</span> </span>{
    <span class="hljs-comment">// ç›´æ¥æ‰§è¡Œï¼Œæ— éœ€åºåˆ—åŒ–</span>
    <span class="hljs-type">int</span> result = NativeCalculator::<span class="hljs-built_in">add</span>(
      arguments[<span class="hljs-number">0</span>].<span class="hljs-built_in">asNumber</span>(),
      arguments[<span class="hljs-number">1</span>].<span class="hljs-built_in">asNumber</span>()
    );
    
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Value</span>(result);
  }
  
  <span class="hljs-comment">// C++å¯ä»¥ç›´æ¥æ“ä½œJavaScriptå¯¹è±¡</span>
  <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">modifyJSObject</span><span class="hljs-params">(Runtime &amp;runtime, Object &amp;jsObject)</span> </span>{
    <span class="hljs-comment">// ç›´æ¥è®¾ç½®å±æ€§</span>
    jsObject.<span class="hljs-built_in">setProperty</span>(runtime, <span class="hljs-string">"modified"</span>, <span class="hljs-literal">true</span>);
    
    <span class="hljs-comment">// ç›´æ¥è°ƒç”¨JavaScriptå‡½æ•°</span>
    Function jsFunc = jsObject.<span class="hljs-built_in">getPropertyAsFunction</span>(runtime, <span class="hljs-string">"callback"</span>);
    jsFunc.<span class="hljs-built_in">call</span>(runtime, <span class="hljs-built_in">Value</span>(<span class="hljs-string">"Hello from C++"</span>));
  }
};

<span class="hljs-comment">// JavaScriptç«¯ä½¿ç”¨</span>
global.nativeCalculator.add = (a, b) =&gt; {
  <span class="hljs-comment">// å®é™…ä¸Šæ˜¯ç›´æ¥è°ƒç”¨C++å‡½æ•°</span>
  <span class="hljs-keyword">return</span> a + b; <span class="hljs-comment">// é€šè¿‡JSIç›´æ¥æ‰§è¡Œ</span>
};
</code></pre>
<h3 data-id="heading-20">3. Fabric æ¸²æŸ“å™¨</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Fabricæ¸²æŸ“æµç¨‹ï¼ˆå¯¹æ¯”ä¼ ç»Ÿï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">FabricRenderer</span> = {
  <span class="hljs-comment">// åŒæ­¥æ¸²æŸ“</span>
  <span class="hljs-title function_">renderSync</span>(<span class="hljs-params">element, container</span>) {
    <span class="hljs-comment">// 1. åŒæ­¥æ›´æ–°Shadow Tree</span>
    <span class="hljs-keyword">const</span> shadowNode = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createShadowNode</span>(element);
    
    <span class="hljs-comment">// 2. ç›´æ¥è°ƒç”¨Nativeç»„ä»¶</span>
    <span class="hljs-comment">// æ— éœ€ç»è¿‡Bridgeå¼‚æ­¥é€šä¿¡</span>
    <span class="hljs-title class_">NativeFabricUIManager</span>.<span class="hljs-title function_">createNode</span>(
      shadowNode,
      container
    );
    
    <span class="hljs-comment">// 3. ç«‹å³æäº¤æ›´æ–°</span>
    <span class="hljs-title class_">NativeFabricUIManager</span>.<span class="hljs-title function_">commitUpdate</span>();
  },
  
  <span class="hljs-comment">// å¹¶å‘æ¸²æŸ“æ”¯æŒ</span>
  <span class="hljs-title function_">concurrentRender</span>(<span class="hljs-params">element</span>) {
    <span class="hljs-comment">// å¯ä¸­æ–­çš„æ¸²æŸ“è¿‡ç¨‹</span>
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">startTransition</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// é«˜ä¼˜å…ˆçº§æ›´æ–°</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">renderSync</span>(element);
    });
  }
};

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">import</span> { unstable_createElement <span class="hljs-keyword">as</span> createElement } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">FabricComponent</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// ä½¿ç”¨Fabricæ¸²æŸ“å™¨</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">createElement</span>(<span class="hljs-string">'View'</span>, {
    <span class="hljs-attr">style</span>: { <span class="hljs-attr">flex</span>: <span class="hljs-number">1</span> },
    <span class="hljs-attr">onLayout</span>: <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-comment">// äº‹ä»¶å¤„ç†æ›´é«˜æ•ˆ</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¸ƒå±€å®Œæˆ:'</span>, event.<span class="hljs-property">nativeEvent</span>.<span class="hljs-property">layout</span>);
    }
  });
};
</code></pre>
<h2 data-id="heading-21">å…«ã€æ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-22">1. Bridge é€šä¿¡ä¼˜åŒ–</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼˜åŒ–Bridgeé€šä¿¡çš„ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BridgeOptimization</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">batchUpdates</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">batchTimer</span> = <span class="hljs-literal">null</span>;
  }
  
  <span class="hljs-comment">// 1. æ‰¹é‡æ›´æ–°</span>
  <span class="hljs-title function_">scheduleUpdate</span>(<span class="hljs-params">updateFn</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">batchUpdates</span>.<span class="hljs-title function_">push</span>(updateFn);
    
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">batchTimer</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">batchTimer</span> = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">flushUpdates</span>();
      }, <span class="hljs-number">16</span>); <span class="hljs-comment">// ä¸€å¸§çš„æ—¶é—´</span>
    }
  }
  
  <span class="hljs-title function_">flushUpdates</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> updates = <span class="hljs-variable language_">this</span>.<span class="hljs-property">batchUpdates</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">batchUpdates</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">batchTimer</span> = <span class="hljs-literal">null</span>;
    
    <span class="hljs-comment">// æ‰¹é‡å‘é€åˆ°Native</span>
    <span class="hljs-title class_">NativeModules</span>.<span class="hljs-property">BatchProcessor</span>.<span class="hljs-title function_">processBatch</span>(updates);
  }
  
  <span class="hljs-comment">// 2. å‡å°‘åºåˆ—åŒ–æ•°æ®</span>
  <span class="hljs-title function_">optimizeData</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-comment">// åªä¼ è¾“å¿…è¦æ•°æ®</span>
    <span class="hljs-keyword">const</span> optimized = {
      <span class="hljs-attr">id</span>: data.<span class="hljs-property">id</span>,
      <span class="hljs-comment">// é¿å…ä¼ è¾“å‡½æ•°</span>
      <span class="hljs-comment">// callback: data.callback, // ä¸è¦è¿™æ ·</span>
      <span class="hljs-attr">type</span>: data.<span class="hljs-property">type</span>
    };
    
    <span class="hljs-comment">// ä½¿ç”¨å…±äº«å†…å­˜ï¼ˆå¦‚æœæ”¯æŒï¼‰</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">global</span>.<span class="hljs-property">SharedArrayBuffer</span>) {
      <span class="hljs-keyword">const</span> buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SharedArrayBuffer</span>(<span class="hljs-number">1024</span>);
      <span class="hljs-comment">// ... å¡«å……æ•°æ®</span>
      <span class="hljs-keyword">return</span> { buffer };
    }
    
    <span class="hljs-keyword">return</span> optimized;
  }
  
  <span class="hljs-comment">// 3. ä½¿ç”¨TurboModulesï¼ˆæ–°æ¶æ„ï¼‰</span>
  <span class="hljs-title function_">setupTurboModules</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">global</span>.<span class="hljs-property">__turboModuleProxy</span>) {
      <span class="hljs-comment">// æŒ‰éœ€åŠ è½½åŸç”Ÿæ¨¡å—</span>
      <span class="hljs-keyword">const</span> <span class="hljs-title class_">MyTurboModule</span> = <span class="hljs-variable language_">global</span>.<span class="hljs-property">__turboModuleProxy</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'MyModule'</span>);
      
      <span class="hljs-comment">// åŒæ­¥è°ƒç”¨</span>
      <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">MyTurboModule</span>.<span class="hljs-title function_">doSomethingSync</span>();
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åŒæ­¥ç»“æœ:'</span>, result);
    }
  }
}

<span class="hljs-comment">// 4. å†…å­˜ç®¡ç†ä¼˜åŒ–</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryOptimization</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cleanupCallbacks</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">nativeReferences</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>();
  }
  
  <span class="hljs-title function_">registerCleanup</span>(<span class="hljs-params">instance, cleanupFn</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cleanupCallbacks</span>.<span class="hljs-title function_">add</span>(cleanupFn);
    
    <span class="hljs-comment">// ç»„ä»¶å¸è½½æ—¶æ¸…ç†</span>
    <span class="hljs-keyword">const</span> originalWillUnmount = instance.<span class="hljs-property">componentWillUnmount</span>;
    instance.<span class="hljs-property">componentWillUnmount</span> = <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">if</span> (originalWillUnmount) {
        originalWillUnmount.<span class="hljs-title function_">call</span>(instance);
      }
      <span class="hljs-title function_">cleanupFn</span>();
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">cleanupCallbacks</span>.<span class="hljs-title function_">delete</span>(cleanupFn);
    };
  }
  
  <span class="hljs-comment">// é‡Šæ”¾Nativeèµ„æº</span>
  <span class="hljs-title function_">releaseNativeResources</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cleanupCallbacks</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">fn</span> =&gt;</span> <span class="hljs-title function_">fn</span>());
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cleanupCallbacks</span>.<span class="hljs-title function_">clear</span>();
  }
}
</code></pre>
<h3 data-id="heading-23">2. å®é™…ä¼˜åŒ–æ¡ˆä¾‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼˜åŒ–å‰çš„ä»£ç </span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UnoptimizedComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> {
  <span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// é¢‘ç¹è°ƒç”¨Bridge</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">interval</span> = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title class_">NativeModules</span>.<span class="hljs-property">Sensor</span>.<span class="hljs-title function_">getData</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>({ <span class="hljs-attr">sensorData</span>: data });
        <span class="hljs-comment">// æ¯æ¬¡éƒ½ä¼šåºåˆ—åŒ–/ååºåˆ—åŒ–</span>
      });
    }, <span class="hljs-number">16</span>); <span class="hljs-comment">// æ¯å¸§éƒ½è°ƒç”¨ï¼</span>
  }
  
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å¤§æ•°æ®é‡åˆ—è¡¨</span>
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">FlatList</span>
        <span class="hljs-attr">data</span>=<span class="hljs-string">{this.state.hugeArray}</span>
        <span class="hljs-attr">renderItem</span>=<span class="hljs-string">{({</span> <span class="hljs-attr">item</span> }) =&gt;</span> (
          <span class="hljs-tag">&lt;<span class="hljs-name">View</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>{JSON.stringify(item)}<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
            {/* æ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°å¯¹è±¡ */}
          <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>
        )}
      /&gt;</span>
    );
  }
}

<span class="hljs-comment">// ä¼˜åŒ–åçš„ä»£ç </span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">OptimizedComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) {
    <span class="hljs-variable language_">super</span>(props);
    <span class="hljs-comment">// 1. ä½¿ç”¨refé¿å…é‡å¤åˆ›å»ºå‡½æ•°</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleData</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleData</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">renderItem</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">renderItem</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);
    
    <span class="hljs-comment">// 2. ä½¿ç”¨requestAnimationFrameä¼˜åŒ–é¢‘ç¹æ›´æ–°</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">animationFrame</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastUpdate</span> = <span class="hljs-number">0</span>;
  }
  
  <span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ä½¿ç”¨requestAnimationFrameæ›¿ä»£setInterval</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">update</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">animationFrame</span> = <span class="hljs-title function_">requestAnimationFrame</span>(update);
      
      <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
      <span class="hljs-keyword">if</span> (now - <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastUpdate</span> &gt; <span class="hljs-number">100</span>) { <span class="hljs-comment">// é™åˆ¶ä¸º10fps</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastUpdate</span> = now;
        
        <span class="hljs-comment">// æ‰¹é‡è·å–æ•°æ®</span>
        <span class="hljs-title class_">NativeModules</span>.<span class="hljs-property">Sensor</span>.<span class="hljs-title function_">getBatchData</span>(
          [<span class="hljs-string">'temperature'</span>, <span class="hljs-string">'humidity'</span>],
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleData</span>
        );
      }
    };
    
    <span class="hljs-title function_">update</span>();
  }
  
  <span class="hljs-title function_">componentWillUnmount</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">animationFrame</span>) {
      <span class="hljs-title function_">cancelAnimationFrame</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">animationFrame</span>);
    }
    
    <span class="hljs-comment">// æ¸…ç†Nativeèµ„æº</span>
    <span class="hljs-title class_">NativeModules</span>.<span class="hljs-property">Sensor</span>.<span class="hljs-title function_">unregister</span>();
  }
  
  handleData = <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
    <span class="hljs-comment">// ä½¿ç”¨å‡½æ•°å¼æ›´æ–°é¿å…å¤šæ¬¡setState</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(<span class="hljs-function"><span class="hljs-params">prevState</span> =&gt;</span> ({
      <span class="hljs-attr">sensorData</span>: {
        ...prevState.<span class="hljs-property">sensorData</span>,
        ...data
      }
    }));
  };
  
  <span class="hljs-comment">// ä½¿ç”¨React.memoå’ŒuseMemoä¼˜åŒ–æ¸²æŸ“</span>
  renderItem = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">memo</span>(<span class="hljs-function">(<span class="hljs-params">{ item }</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>{item.id}<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
        {/* åªæ¸²æŸ“å¿…è¦æ•°æ® */}
      <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span>
    );
  });
  
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ä½¿ç”¨getItemLayoutä¼˜åŒ–FlatList</span>
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">FlatList</span>
        <span class="hljs-attr">data</span>=<span class="hljs-string">{this.state.filteredArray}</span> // <span class="hljs-attr">ä½¿ç”¨è¿‡æ»¤åçš„æ•°æ®</span>
        <span class="hljs-attr">renderItem</span>=<span class="hljs-string">{this.renderItem}</span>
        <span class="hljs-attr">keyExtractor</span>=<span class="hljs-string">{item</span> =&gt;</span> item.id}
        getItemLayout={(data, index) =&gt; ({
          length: 50,
          offset: 50 * index,
          index,
        })}
        initialNumToRender={10}
        maxToRenderPerBatch={5}
        windowSize={5}
        removeClippedSubviews={true}
      /&gt;</span>
    );
  }
}
</code></pre>
<h2 data-id="heading-24">ä¹ã€è°ƒè¯•ä¸é—®é¢˜æ’æŸ¥</h2>
<h3 data-id="heading-25">1. Bridge é€šä¿¡è°ƒè¯•å·¥å…·</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Bridgeè°ƒè¯•å·¥å…·</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BridgeDebugger</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageLog</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">performanceLog</span> = [];
    
    <span class="hljs-comment">// æ‹¦æˆªBridgeé€šä¿¡</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">interceptBridge</span>();
  }
  
  <span class="hljs-title function_">interceptBridge</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> originalCall = <span class="hljs-variable language_">global</span>.<span class="hljs-property">__ReactNativeBridge</span>.<span class="hljs-property">callNative</span>;
    
    <span class="hljs-variable language_">global</span>.<span class="hljs-property">__ReactNativeBridge</span>.<span class="hljs-property">callNative</span> = <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> startTime = performance.<span class="hljs-title function_">now</span>();
      <span class="hljs-keyword">const</span> messageId = originalCall.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
      <span class="hljs-keyword">const</span> endTime = performance.<span class="hljs-title function_">now</span>();
      
      <span class="hljs-comment">// è®°å½•æ€§èƒ½æ•°æ®</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">performanceLog</span>.<span class="hljs-title function_">push</span>({
        <span class="hljs-attr">id</span>: messageId,
        <span class="hljs-attr">duration</span>: endTime - startTime,
        <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
        <span class="hljs-attr">args</span>: args.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>) <span class="hljs-comment">// æ’é™¤callback</span>
      });
      
      <span class="hljs-comment">// é™åˆ¶æ—¥å¿—å¤§å°</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">performanceLog</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">1000</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">performanceLog</span>.<span class="hljs-title function_">shift</span>();
      }
      
      <span class="hljs-keyword">return</span> messageId;
    };
  }
  
  <span class="hljs-comment">// åˆ†ææ€§èƒ½ç“¶é¢ˆ</span>
  <span class="hljs-title function_">analyzePerformance</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> stats = {
      <span class="hljs-attr">totalCalls</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">performanceLog</span>.<span class="hljs-property">length</span>,
      <span class="hljs-attr">avgDuration</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">slowCalls</span>: [],
      <span class="hljs-attr">frequentModules</span>: {}
    };
    
    <span class="hljs-keyword">let</span> totalDuration = <span class="hljs-number">0</span>;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">performanceLog</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">log</span> =&gt;</span> {
      totalDuration += log.<span class="hljs-property">duration</span>;
      
      <span class="hljs-comment">// è¯†åˆ«æ…¢è°ƒç”¨</span>
      <span class="hljs-keyword">if</span> (log.<span class="hljs-property">duration</span> &gt; <span class="hljs-number">100</span>) { <span class="hljs-comment">// è¶…è¿‡100ms</span>
        stats.<span class="hljs-property">slowCalls</span>.<span class="hljs-title function_">push</span>(log);
      }
      
      <span class="hljs-comment">// ç»Ÿè®¡æ¨¡å—è°ƒç”¨é¢‘ç‡</span>
      <span class="hljs-keyword">const</span> moduleName = log.<span class="hljs-property">args</span>[<span class="hljs-number">0</span>];
      stats.<span class="hljs-property">frequentModules</span>[moduleName] = 
        (stats.<span class="hljs-property">frequentModules</span>[moduleName] || <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>;
    });
    
    stats.<span class="hljs-property">avgDuration</span> = totalDuration / stats.<span class="hljs-property">totalCalls</span>;
    
    <span class="hljs-keyword">return</span> stats;
  }
  
  <span class="hljs-comment">// ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š</span>
  <span class="hljs-title function_">generateReport</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> stats = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">analyzePerformance</span>();
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">group</span>(<span class="hljs-string">'React Native Bridge æ€§èƒ½æŠ¥å‘Š'</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ€»è°ƒç”¨æ¬¡æ•°: <span class="hljs-subst">${stats.totalCalls}</span>`</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å¹³å‡è€—æ—¶: <span class="hljs-subst">${stats.avgDuration.toFixed(<span class="hljs-number">2</span>)}</span>ms`</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ…¢è°ƒç”¨(<span class="hljs-subst">${stats.slowCalls.length}</span>æ¬¡):`</span>, stats.<span class="hljs-property">slowCalls</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¨¡å—è°ƒç”¨é¢‘ç‡:'</span>, stats.<span class="hljs-property">frequentModules</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupEnd</span>();
    
    <span class="hljs-comment">// ç»™å‡ºä¼˜åŒ–å»ºè®®</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">giveRecommendations</span>(stats);
  }
  
  <span class="hljs-title function_">giveRecommendations</span>(<span class="hljs-params">stats</span>) {
    <span class="hljs-keyword">const</span> recommendations = [];
    
    <span class="hljs-keyword">if</span> (stats.<span class="hljs-property">avgDuration</span> &gt; <span class="hljs-number">50</span>) {
      recommendations.<span class="hljs-title function_">push</span>(<span class="hljs-string">'å¹³å‡è°ƒç”¨æ—¶é—´è¿‡é•¿ï¼Œè€ƒè™‘ä½¿ç”¨æ‰¹é‡æ›´æ–°'</span>);
    }
    
    <span class="hljs-keyword">if</span> (stats.<span class="hljs-property">slowCalls</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">10</span>) {
      recommendations.<span class="hljs-title function_">push</span>(<span class="hljs-string">'å­˜åœ¨å¤šä¸ªæ…¢è°ƒç”¨ï¼Œå»ºè®®ä¼˜åŒ–ç›¸åº”Nativeæ¨¡å—'</span>);
    }
    
    <span class="hljs-comment">// æ‰¾å‡ºè°ƒç”¨æœ€é¢‘ç¹çš„æ¨¡å—</span>
    <span class="hljs-keyword">const</span> mostFrequent = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(stats.<span class="hljs-property">frequentModules</span>)
      .<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> b[<span class="hljs-number">1</span>] - a[<span class="hljs-number">1</span>])[<span class="hljs-number">0</span>];
    
    <span class="hljs-keyword">if</span> (mostFrequent &amp;&amp; mostFrequent[<span class="hljs-number">1</span>] &gt; <span class="hljs-number">100</span>) {
      recommendations.<span class="hljs-title function_">push</span>(
        <span class="hljs-string">`æ¨¡å—"<span class="hljs-subst">${mostFrequent[<span class="hljs-number">0</span>]}</span>"è°ƒç”¨é¢‘ç¹(<span class="hljs-subst">${mostFrequent[<span class="hljs-number">1</span>]}</span>æ¬¡)ï¼Œè€ƒè™‘ä¼˜åŒ–`</span>
      );
    }
    
    <span class="hljs-keyword">if</span> (recommendations.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">group</span>(<span class="hljs-string">'ä¼˜åŒ–å»ºè®®'</span>);
      recommendations.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">rec, i</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${i + <span class="hljs-number">1</span>}</span>. <span class="hljs-subst">${rec}</span>`</span>);
      });
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupEnd</span>();
    }
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">if</span> (__DEV__) {
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">debugger</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BridgeDebugger</span>();
  
  <span class="hljs-comment">// å®šæœŸç”ŸæˆæŠ¥å‘Š</span>
  <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">debugger</span>.<span class="hljs-title function_">generateReport</span>();
  }, <span class="hljs-number">30000</span>); <span class="hljs-comment">// æ¯30ç§’</span>
}
</code></pre>
<h2 data-id="heading-26">åã€æ€»ç»“ä¸æœªæ¥å±•æœ›</h2>
<h3 data-id="heading-27">1. æ ¸å¿ƒè¦ç‚¹æ€»ç»“</h3>
<p>React Native çš„å·¥ä½œåŸç†å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹å‡ ä¸ªå…³é”®ç‚¹ï¼š</p>
<ol>
<li><strong>ä¸‰å±‚æ¶æ„</strong>ï¼šJavaScriptå±‚ + Bridgeæ¡¥æ¥å±‚ + NativeåŸç”Ÿå±‚</li>
<li><strong>å¼‚æ­¥é€šä¿¡</strong>ï¼šé€šè¿‡Bridgeè¿›è¡Œåºåˆ—åŒ–/ååºåˆ—åŒ–çš„æ¶ˆæ¯ä¼ é€’</li>
<li><strong>è™šæ‹ŸDOM</strong>ï¼šReactåè°ƒå™¨è´Ÿè´£è®¡ç®—UIæ›´æ–°å·®å¼‚</li>
<li><strong>åŸç”Ÿæ¸²æŸ“</strong>ï¼šæœ€ç»ˆç”±iOS/AndroidåŸç”Ÿç»„ä»¶æ¸²æŸ“åˆ°å±å¹•</li>
</ol>
<h3 data-id="heading-28">2. Bridge æœºåˆ¶çš„æ ¸å¿ƒä»·å€¼ä¸å±€é™</h3>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>å®ç°çœŸæ­£çš„è·¨å¹³å°å¼€å‘</li>
<li>ä¿æŒåŸç”Ÿåº”ç”¨æ€§èƒ½å’Œä½“éªŒ</li>
<li>æ”¯æŒçƒ­é‡è½½ï¼Œæå‡å¼€å‘æ•ˆç‡</li>
<li>åºå¤§çš„JavaScriptç”Ÿæ€å¯åˆ©ç”¨</li>
</ul>
<p><strong>å±€é™ï¼š</strong></p>
<ul>
<li>å¼‚æ­¥é€šä¿¡å¸¦æ¥çš„æ€§èƒ½å¼€é”€</li>
<li>åºåˆ—åŒ–/ååºåˆ—åŒ–çš„æˆæœ¬</li>
<li>å†…å­˜å ç”¨ç›¸å¯¹è¾ƒé«˜</li>
<li>è°ƒè¯•ç›¸å¯¹å¤æ‚</li>
</ul>
<h3 data-id="heading-29">3. æ–°æ¶æ„çš„é©å‘½æ€§æ”¹è¿›</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ä¼ ç»ŸBridgeæ¶æ„] --&gt; B[æ–°æ¶æ„ JSI+Fabric]
    
    subgraph "ä¼ ç»Ÿæ¶æ„é—®é¢˜"
        C[å¼‚æ­¥é€šä¿¡å»¶è¿Ÿ]
        D[åºåˆ—åŒ–å¼€é”€å¤§]
        E[å†…å­˜å ç”¨é«˜]
        F[æ¸²æŸ“ä¸åŒæ­¥]
    end
    
    subgraph "æ–°æ¶æ„æ”¹è¿›"
        G[åŒæ­¥ç›´æ¥è°ƒç”¨]
        H[å…±äº«å†…å­˜]
        I[å¹¶å‘æ¸²æŸ“]
        J[ç»Ÿä¸€æ¸²æŸ“å™¨]
    end
    
    C -.-&gt; G
    D -.-&gt; H
    E -.-&gt; I
    F -.-&gt; J
</code></pre>
<h3 data-id="heading-30">4. å­¦ä¹ ä¸å®è·µå»ºè®®</h3>
<ol>
<li><strong>åˆå­¦è€…</strong>ï¼šå…ˆæŒæ¡åŸºæœ¬ä½¿ç”¨ï¼Œç†è§£ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå’ŒçŠ¶æ€ç®¡ç†</li>
<li><strong>ä¸­çº§å¼€å‘è€…</strong>ï¼šæ·±å…¥ç ”ç©¶Bridgeæœºåˆ¶ï¼Œå­¦ä¹ æ€§èƒ½ä¼˜åŒ–æŠ€å·§</li>
<li><strong>é«˜çº§å¼€å‘è€…</strong>ï¼šæ¢ç´¢æ–°æ¶æ„ï¼Œå‚ä¸å¼€æºç¤¾åŒºè´¡çŒ®</li>
<li><strong>æ¶æ„å¸ˆ</strong>ï¼šæ ¹æ®é¡¹ç›®éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ¶æ„æ–¹æ¡ˆ</li>
</ol>
<h3 data-id="heading-31">5. æœªæ¥å‘å±•è¶‹åŠ¿</h3>
<ol>
<li><strong>JSIå…¨é¢æ™®åŠ</strong>ï¼šæ¶ˆé™¤Bridgeæ€§èƒ½ç“¶é¢ˆ</li>
<li><strong>Fabricæ¸²æŸ“å™¨æˆç†Ÿ</strong>ï¼šæä¾›æ›´æµç•…çš„UIä½“éªŒ</li>
<li><strong>TypeScriptæ·±åº¦é›†æˆ</strong>ï¼šæ›´å¥½çš„ç±»å‹å®‰å…¨</li>
<li><strong>Webå¹³å°æ”¯æŒ</strong>ï¼šçœŸæ­£çš„"ä¸€æ¬¡ç¼–å†™ï¼Œå¤„å¤„è¿è¡Œ"</li>
<li><strong>AIè¾…åŠ©å¼€å‘</strong>ï¼šæ™ºèƒ½åŒ–ä»£ç ç”Ÿæˆå’Œä¼˜åŒ–</li>
</ol>
<h2 data-id="heading-32">ç»“è¯­</h2>
<p>React Native çš„æˆåŠŸä¸ä»…åœ¨äºå…¶æŠ€æœ¯å®ç°ï¼Œæ›´åœ¨äºå®ƒå·§å¦™åœ°å¹³è¡¡äº†å¼€å‘æ•ˆç‡å’Œåº”ç”¨æ€§èƒ½ã€‚Bridge æœºåˆ¶ä½œä¸ºå…¶æ ¸å¿ƒï¼Œè™½ç„¶å­˜åœ¨ä¸€äº›æ€§èƒ½å¼€é”€ï¼Œä½†ä¹Ÿä¸ºè·¨å¹³å°å¼€å‘æä¾›äº†å¯è¡Œçš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>éšç€æ–°æ¶æ„çš„ä¸æ–­æˆç†Ÿï¼ŒReact Native æ­£åœ¨å‘æ›´é«˜æ•ˆã€æ›´å¼ºå¤§çš„æ–¹å‘å‘å±•ã€‚ä½œä¸ºå¼€å‘è€…ï¼Œç†è§£å…¶åº•å±‚åŸç†ä¸ä»…èƒ½å¸®åŠ©æˆ‘ä»¬å†™å‡ºæ›´å¥½çš„ä»£ç ï¼Œä¹Ÿèƒ½è®©æˆ‘ä»¬åœ¨é¢å¯¹å¤æ‚é—®é¢˜æ—¶ï¼Œèƒ½å¤Ÿä»æ ¹æºä¸Šæ‰¾åˆ°è§£å†³æ–¹æ¡ˆã€‚</p>
<p>æ— è®ºä½ æ˜¯åˆšå¼€å§‹æ¥è§¦ React Nativeï¼Œè¿˜æ˜¯å·²ç»åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨å®ƒï¼Œå¸Œæœ›æœ¬æ–‡èƒ½ä¸ºä½ æä¾›æœ‰ä»·å€¼çš„å‚è€ƒã€‚æŠ€æœ¯çš„é“è·¯æ°¸æ— æ­¢å¢ƒï¼Œä¿æŒå¥½å¥‡ï¼ŒæŒç»­å­¦ä¹ ï¼Œæˆ‘ä»¬æ‰èƒ½åœ¨å¿«é€Ÿå˜åŒ–çš„æŠ€æœ¯ä¸–ç•Œä¸­ç«‹äºä¸è´¥ä¹‹åœ°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da3816f1dbef471c8b1aec36af91c227~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YyX6L6wYWxr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765808340&amp;x-signature=0Tx0WHo5F7c6yxpw2H735S1CYXQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hora Dartï¼šæˆ‘ä¸ºä»€ä¹ˆä» jiffy ç”¨æˆ·å˜æˆäº†æ–°æ—¥æœŸåº“çš„ä½œè€…]]></title>    <link>https://juejin.cn/post/7581306080434798643</link>    <guid>https://juejin.cn/post/7581306080434798643</guid>    <pubDate>2025-12-08T12:42:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581306080434798643" data-draft-id="7581406561685012526" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hora Dartï¼šæˆ‘ä¸ºä»€ä¹ˆä» jiffy ç”¨æˆ·å˜æˆäº†æ–°æ—¥æœŸåº“çš„ä½œè€…"/> <meta itemprop="keywords" content="Flutter,Dart,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-08T12:42:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘å¿ƒé‡Œå±é™©çš„ä¸œè¥¿"/> <meta itemprop="url" content="https://juejin.cn/user/1591748568562829"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hora Dartï¼šæˆ‘ä¸ºä»€ä¹ˆä» jiffy ç”¨æˆ·å˜æˆäº†æ–°æ—¥æœŸåº“çš„ä½œè€…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1591748568562829/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘å¿ƒé‡Œå±é™©çš„ä¸œè¥¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T12:42:52.000Z" title="Mon Dec 08 2025 12:42:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;position:relative;background-image:linear-gradient(90deg,rgba(217,234,251,.25) 3%,transparent 0),linear-gradient(1turn,rgba(217,234,251,.25) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;padding-left:8px;padding-bottom:0;margin-top:35px;margin-bottom:10px;font-weight:900;font-family:serif;letter-spacing:1px;color:#000}.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover{background-color:#fff}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;position:relative}.markdown-body h2:after{content:"";left:0;bottom:0;width:100%;height:1px;position:absolute}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{height:1px;border:none;margin-top:32px;margin-bottom:32px;background-size:4px 1px;background-image:linear-gradient(270deg,#37b2ff 0,#37b2ff 25%,transparent 50%)}.markdown-body code{margin:0 4px;word-break:break-word;overflow-x:auto;background-color:#fff7f7;color:#f06;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:-apple-system,system-ui,Menlo,Monaco,Consolas,Courier New;position:relative}.markdown-body pre{margin:15px 8px;border:1px solid #f5f5f7;line-height:1.75}.markdown-body pre:before{top:-4px;left:-4px;border-top:8px solid #feea1e;border-left:8px solid #feea1e}.markdown-body pre:after,.markdown-body pre:before{width:20px;height:20px;content:"";z-index:10;position:absolute}.markdown-body pre:after{right:-4px;bottom:-4px;border-right:8px solid #37b2ff;border-bottom:8px solid #37b2ff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;overflow-x:auto;margin:0;word-break:normal;display:block;color:#333;background-color:#fff;position:unset!important}.markdown-body pre:nth-child(odd):before{border-top-color:#a7ecad;border-left-color:#a7ecad}.markdown-body pre:nth-child(odd):after{border-right-color:#e699e6;border-bottom-color:#e699e6}.markdown-body a{margin:0 4px;text-decoration:none;color:#37b2ff;transition:.3s;display:inline-block;vertical-align:bottom;position:relative}.markdown-body a:before{content:"READ MORE +";bottom:90%;width:120px;max-width:0;color:#fff;background-color:#1fb3ff;position:absolute;white-space:nowrap;transition:.3s;box-sizing:border-box;pointer-events:none;overflow:hidden}.markdown-body a:after{content:"";bottom:0;left:0;width:100%;height:1px;border-bottom:1px dashed #37b2ff;position:absolute}.markdown-body a:active:before,.markdown-body a:hover:before{max-width:120px;padding-left:14px}.markdown-body table{width:100%;max-width:100%;font-size:12px;background-color:#fff;overflow:auto;border-collapse:collapse}.markdown-body table tr:hover td,.markdown-body table tr:hover th{border-bottom:1px solid #feea1e}.markdown-body thead{text-align:left}.markdown-body th{font-size:1.2em;border-bottom:1px dashed #eee}.markdown-body tr:nth-child(2n){background-color:hsla(0,0%,87.8%,.1);border-bottom:1px solid #fff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px;border-bottom:1px dashed #fff}.markdown-body blockquote{color:#666;padding:12px 23px 2px;border:1px solid #37b2ff;background-color:#fff;margin:22px 0;position:relative}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body blockquote:after{content:"FROM";left:0;width:40px;color:#fff;background-color:#37b2ff;text-align:center}.markdown-body blockquote:after,.markdown-body blockquote:before{top:0;line-height:1;padding:2px 0;font-size:12px;font-weight:lighter;position:absolute;pointer-events:none}.markdown-body blockquote:before{content:"CITATION";left:44px;color:#37b2ff}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{line-height:2em;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#37b2ff}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol ol li,.markdown-body ol ul li,.markdown-body ul ol li,.markdown-body ul ul li{border-bottom:none}.markdown-body ol li{padding-left:6px;list-style:decimal-leading-zero}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]{position:relative}.markdown-body input[type=checkbox]:before{top:0;left:0;right:0;bottom:0;content:"";width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1;position:absolute}.markdown-body input[type=checkbox]:checked:after{content:"";top:10%;left:18%;width:90%;height:40%;border-left:2px solid #37b2ff;border-bottom:2px solid #37b2ff;color:#37b2ff;z-index:2;transform:rotate(-45deg);position:absolute}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d93479b72a64e9d8b51d5c5079dc0e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5b-D6YeM5Y2x6Zmp55qE5Lic6KW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765802571&amp;x-signature=9W3beU%2BMvFl8eVcPvuOUcuEAjCU%3D" alt="hora.png" loading="lazy"/></p>
<p align="center"/>
ä½œä¸ºä¸€ä¸ª Flutter å¼€å‘è€…ï¼Œä½ æ˜¯å¦ä¹Ÿæ›¾ä¸ºæ—¥æœŸå¤„ç†è€Œçƒ¦æ¼ï¼Ÿåœ¨ jiffyã€intlã€date_format ä¹‹é—´å¾˜å¾Šï¼Œå´æ€»è§‰å¾—å°‘ç‚¹ä»€ä¹ˆï¼Ÿ
<p>å®é™…ä¸Šï¼Œåœ¨å¼€å‘ Hora æ—¶ï¼Œæˆ‘æœ€åˆçš„çµæ„Ÿæ¥æºäº JavaScript ç”Ÿæ€ä¸­å¤‡å—å¥½è¯„çš„ <strong>day.js</strong>ã€‚day.js ä»¥å…¶ç®€æ´çš„ API å’Œå¼ºå¤§çš„æ’ä»¶ç³»ç»Ÿå¾æœäº†å‰ç«¯å¼€å‘è€…ã€‚æˆ‘å¿ƒæƒ³ï¼šä¸ºä»€ä¹ˆ Dart ç”Ÿæ€ä¸èƒ½æœ‰ä¸€ä¸ªç±»ä¼¼ä½†æ›´ä¼˜ç§€çš„æ—¥æœŸåº“å‘¢ï¼Ÿ</p>
<p>äºæ˜¯æˆ‘å¼€å§‹å°† day.js çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œ<strong>ä½¿ç”¨ Dart çš„è¯­è¨€ç‰¹æ€§é‡æ–°å®ç°</strong>ï¼š</p>
<ul>
<li><strong>Sealed Classes</strong> - æ›¿ä»£ JavaScript çš„å­—ç¬¦ä¸²æšä¸¾</li>
<li><strong>Extension Methods</strong> - å®ç° day.js çš„æ’ä»¶æœºåˆ¶</li>
<li><strong>Pattern Matching</strong> - å¤„ç†å¤æ‚çš„æ—¥æœŸé€»è¾‘</li>
<li><strong>Null Safety</strong> - é¿å… day.js ä¸­çš„ç©ºå€¼é—®é¢˜</li>
<li><strong>Tree-shakable</strong> - è®©æ€§èƒ½è¶…è¶Š day.js</li>
</ul>
<p>è¿™ä¸ä»…ä»…æ˜¯ä¸€æ¬¡ç®€å•çš„ç§»æ¤ï¼Œè€Œæ˜¯å¯¹ç°ä»£æ—¥æœŸå¤„ç†ç†å¿µåœ¨ Dart ç”Ÿæ€ä¸­çš„å®Œæ•´å®è·µã€‚</p>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆéœ€è¦å¦ä¸€ä¸ªæ—¥æœŸåº“ï¼Ÿ</h2>
<p>è¯´å®è¯ï¼Œå¼€å‘ Hora çš„åˆè¡·æºäºæˆ‘è‡ªå·±çš„ç—›ç‚¹ã€‚ä½œä¸ºä¸€åæ›¾ç»çš„ <strong>jiffy ç”¨æˆ·</strong>ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨æ—¶é‡åˆ°äº†å¾ˆå¤šè®©äººå›°æ‰°çš„é—®é¢˜ï¼š</p>
<h3 data-id="heading-1">æˆ‘çš„ jiffy ä½¿ç”¨ç»å†</h3>
<p>æœ€åˆé€‰æ‹© jiffy æ˜¯å› ä¸ºå®ƒæ¨¡ä»¿äº†è‘—åçš„ moment.js APIï¼Œçœ‹èµ·æ¥å¾ˆç†Ÿæ‚‰ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// jiffy çš„ API çœ‹èµ·æ¥ä¸é”™</span>
Jiffy().add(days: <span class="hljs-number">7</span>).format(<span class="hljs-string">'yyyy-MM-dd'</span>)
</code></pre>
<p>ä½†çœŸæ­£ç”¨èµ·æ¥å´å‘ç°<strong>å·®å¼ºäººæ„</strong>ï¼š</p>
<ol>
<li>
<p><strong>é«˜çº§åŠŸèƒ½æ”¯æŒæœ‰é™</strong>ï¼š</p>
<ul>
<li>æ²¡æœ‰å†…ç½®çš„ä¸šåŠ¡æ—¥è®¡ç®—ï¼ˆéœ€è¦è‡ªå·±å®ç°å‘¨æœ«å’ŒèŠ‚å‡æ—¥é€»è¾‘ï¼‰</li>
<li>æœˆä»½è¾¹ç•Œå¤„ç†æœ‰æ—¶ä¸å¤Ÿç›´è§‚ï¼ˆ1æœˆ31æ—¥åŠ 1ä¸ªæœˆä¼šå¾—åˆ°2æœˆ28æ—¥ï¼‰</li>
<li>æ’ä»¶ç³»ç»Ÿä¸å¦‚ Hora å®Œå–„ï¼Œæ‰©å±•æ€§æœ‰é™</li>
</ul>
</li>
<li>
<p><strong>ä¸å¯å˜æ€§ä¿è¯ä¸è¶³</strong>ï¼šè™½ç„¶å¤§éƒ¨åˆ†æ“ä½œæ˜¯æ–°çš„ï¼Œä½†æŸäº›è¾¹ç¼˜æƒ…å†µä¸‹å¯èƒ½ä¿®æ”¹åŸå¯¹è±¡</p>
</li>
<li>
<p><strong>å›½é™…åŒ–å¤æ‚åº¦</strong>ï¼šé…ç½®ç›¸å¯¹å¤æ‚ï¼Œéœ€è¦æ‰‹åŠ¨åŠ è½½è¯­è¨€åŒ…ï¼Œä¸å¦‚ Hora çš„ tree-shakable è®¾è®¡ä¼˜é›…</p>
</li>
</ol>
<h3 data-id="heading-2">ä» day.js åˆ° Horaï¼šç†å¿µä¸å®è·µ</h3>
<p>day.js çš„æˆåŠŸåœ¨äºå®ƒä¼˜é›…è§£å†³äº†ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ol>
<li><strong>API ç®€æ´</strong> - dayjs().format() è€Œä¸æ˜¯å¤æ‚çš„é…ç½®</li>
<li><strong>æ’ä»¶æœºåˆ¶</strong> - å¯æŒ‰éœ€æ‰©å±•ï¼Œä¿æŒæ ¸å¿ƒç²¾ç®€</li>
<li><strong>ä¸å¯å˜æ€§</strong> - æ¯æ¬¡æ“ä½œè¿”å›æ–°å®ä¾‹</li>
<li><strong>é“¾å¼è°ƒç”¨</strong> - ç›´è§‚çš„æ–¹æ³•é“¾</li>
</ol>
<p>è€Œ Hora åœ¨æ­¤åŸºç¡€ä¸Šï¼Œåˆ©ç”¨ Dart çš„ä¼˜åŠ¿æ›´è¿›ä¸€æ­¥ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// day.js é£æ ¼çš„ APIï¼Œä½†æ›´å®‰å…¨</span>
<span class="hljs-keyword">final</span> now = Hora.now();
<span class="hljs-keyword">final</span> result = now
    .add(<span class="hljs-number">1</span>, TemporalUnit.month)
    .startOf(TemporalUnit.day)
    .format(<span class="hljs-string">'YYYY-MM-DD'</span>);

<span class="hljs-comment">// ä½¿ç”¨ Dart çš„ sealed class ç¡®ä¿ç±»å‹å®‰å…¨</span>
TemporalUnit unit = TemporalUnit.parse(<span class="hljs-string">'month'</span>); <span class="hljs-comment">// ç¼–è¯‘æ—¶æ£€æŸ¥</span>

<span class="hljs-comment">// é€šè¿‡ Extension å®ç°æ’ä»¶ï¼Œæ¯” day.js æ›´ä¼˜é›…</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:hora/src/plugins/business_day.dart'</span>;
<span class="hljs-keyword">final</span> businessDay = now.addBusinessDays(<span class="hljs-number">5</span>);
</code></pre>
<h3 data-id="heading-3">ç—›å®šæ€ç—›ï¼Œå†³å®šè‡ªå·±åŠ¨æ‰‹</h3>
<p>åœ¨åˆ†æäº†ç°æœ‰åº“çš„ç—›ç‚¹åï¼Œæˆ‘æ„è¯†åˆ° Dart ç”Ÿæ€éœ€è¦ä¸€ä¸ªåŠŸèƒ½æ›´å…¨é¢çš„æ—¥æœŸåº“ï¼š</p>
<ul>
<li><strong>intl</strong>ï¼šåŠŸèƒ½å¼ºå¤§ï¼Œä½† API ç›¸å¯¹å¤æ‚ï¼Œä½“ç§¯è¾ƒå¤§ï¼Œåˆå§‹åŒ–é‡</li>
<li><strong>date_format</strong>ï¼šè½»é‡ï¼Œä½†åŠŸèƒ½å•ä¸€ï¼Œä»…æ”¯æŒæ ¼å¼åŒ–ï¼Œç¼ºä¹æ“ä½œèƒ½åŠ›</li>
<li><strong>jiffy</strong>ï¼šAPI å‹å¥½ä½†é«˜çº§åŠŸèƒ½æ”¯æŒä¸è¶³ï¼Œç¼ºå°‘ä¼ä¸šçº§ç‰¹æ€§</li>
</ul>
<p>æˆ‘æƒ³åˆ›é€ ä¸€ä¸ª<strong>åŠŸèƒ½å®Œæ•´</strong>çš„æ—¥æœŸåº“ï¼Œæ»¡è¶³ä»ç®€å•æ ¼å¼åŒ–åˆ°å¤æ‚ä¸šåŠ¡è®¡ç®—çš„å„ç§éœ€æ±‚ã€‚è¿™å°±æ˜¯ Hora çš„è¯ç”Ÿæ•…äº‹ã€‚</p>
<h2 data-id="heading-4">Hora çš„æ ¸å¿ƒä¼˜åŠ¿</h2>
<h3 data-id="heading-5">1. ğŸ¯ ä¸°å¯Œçš„åŠŸèƒ½ç‰¹æ€§</h3>
<p>Hora æä¾›äº†æ¯”å…¶ä»–åº“æ›´å…¨é¢çš„æ—¥æœŸæ—¶é—´å¤„ç†èƒ½åŠ›ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// Hora - åŠŸèƒ½å¼ºå¤§ä¸”æ˜“ç”¨</span>
<span class="hljs-keyword">final</span> now = Hora.now();
<span class="hljs-keyword">final</span> nextWeek = now.add(<span class="hljs-number">1</span>, TemporalUnit.week);

<span class="hljs-comment">// æ”¯æŒå¤æ‚çš„ä¸šåŠ¡æ—¥è®¡ç®—</span>
<span class="hljs-keyword">final</span> businessDays = now.addBusinessDays(<span class="hljs-number">10</span>);

<span class="hljs-comment">// è´¢å¹´å’Œå­£åº¦è®¡ç®—</span>
<span class="hljs-keyword">final</span> fiscalYear = now.fiscalYear(startMonth: <span class="hljs-number">4</span>);
<span class="hljs-keyword">final</span> fiscalQuarter = now.fiscalQuarter(startMonth: <span class="hljs-number">4</span>);

<span class="hljs-comment">// é‡å¤äº‹ä»¶æ¨¡å¼</span>
<span class="hljs-keyword">final</span> meetings = Recurrence.weekly(
  start: now,
  daysOfWeek: {<span class="hljs-built_in">DateTime</span>.monday, <span class="hljs-built_in">DateTime</span>.friday},
);

<span class="hljs-comment">// jiffy - åŸºç¡€åŠŸèƒ½æœ‰é™</span>
<span class="hljs-keyword">final</span> jiffyNextWeek = Jiffy().add(weeks: <span class="hljs-number">1</span>);

<span class="hljs-comment">// date_format - åªæ”¯æŒæ ¼å¼åŒ–ï¼Œä¸æ”¯æŒæ“ä½œ</span>
</code></pre>
<h3 data-id="heading-6">2. ğŸ”’ ä¸å¯å˜æ€§è®¾è®¡</h3>
<p>Hora é‡‡ç”¨ä¸å¯å˜è®¾è®¡ï¼Œæ‰€æœ‰æ“ä½œéƒ½è¿”å›æ–°å®ä¾‹ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">final</span> date = Hora.of(year: <span class="hljs-number">2024</span>, month: <span class="hljs-number">12</span>, day: <span class="hljs-number">8</span>);
<span class="hljs-keyword">final</span> modified = date.copyWith(hour: <span class="hljs-number">10</span>);

<span class="hljs-built_in">print</span>(date.hour);      <span class="hljs-comment">// 0 - åŸå§‹å®ä¾‹ä¸å˜</span>
<span class="hljs-built_in">print</span>(modified.hour);  <span class="hljs-comment">// 10 - æ–°å®ä¾‹</span>
</code></pre>
<p>è¿™é¿å…äº†åœ¨å¤æ‚åº”ç”¨ä¸­å› æ„å¤–ä¿®æ”¹å¯¼è‡´çš„çŠ¶æ€é—®é¢˜ã€‚</p>
<h3 data-id="heading-7">3. ğŸŒ å®Œå–„çš„å›½é™…åŒ–æ”¯æŒ</h3>
<p>Hora å†…ç½® <strong>143 ç§è¯­è¨€</strong>æ”¯æŒï¼Œå¹¶ä¸”è®¾è®¡ä¸º tree-shakableï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:hora/hora.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:hora/src/locales/ja.dart'</span>; <span class="hljs-comment">// æŒ‰éœ€å¯¼å…¥</span>

<span class="hljs-comment">// é»˜è®¤è‹±æ–‡</span>
<span class="hljs-keyword">final</span> us = Hora.now();
<span class="hljs-built_in">print</span>(us.format(<span class="hljs-string">'MMMM D, YYYY'</span>)); <span class="hljs-comment">// December 8, 2024</span>

<span class="hljs-comment">// åˆ‡æ¢åˆ°ä¸­æ–‡</span>
<span class="hljs-keyword">final</span> cn = Hora.now(locale: <span class="hljs-keyword">const</span> HoraLocaleZhCn());
<span class="hljs-built_in">print</span>(cn.format(<span class="hljs-string">'YYYYå¹´MæœˆDæ—¥'</span>)); <span class="hljs-comment">// 2024å¹´12æœˆ8æ—¥</span>

<span class="hljs-comment">// åˆ‡æ¢åˆ°æ—¥æ–‡</span>
<span class="hljs-keyword">final</span> jp = Hora.now(locale: <span class="hljs-keyword">const</span> HoraLocaleJa());
<span class="hljs-built_in">print</span>(jp.format(<span class="hljs-string">'YYYYå¹´MæœˆDæ—¥'</span>)); <span class="hljs-comment">// 2024å¹´12æœˆ8æ—¥</span>
</code></pre>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼š</p>
<ul>
<li><code>intl</code> éœ€è¦é¢å¤–é…ç½®ï¼Œåˆå§‹åŒ–è¾ƒé‡</li>
<li><code>jiffy</code> æ”¯æŒçš„è¯­è¨€è¾ƒå°‘</li>
<li><code>date_format</code> å‡ ä¹æ²¡æœ‰å›½é™…åŒ–æ”¯æŒ</li>
</ul>
<h3 data-id="heading-8">4. ğŸ“… æ™ºèƒ½çš„æ—¶é—´å•ä½å¤„ç†</h3>
<p>Hora åŒºåˆ†<strong>å›ºå®šæ—¶é•¿å•ä½</strong>å’Œ<strong>æ—¥å†ç›¸å…³å•ä½</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// å›ºå®šæ—¶é•¿å•ä½ï¼ˆä½¿ç”¨ Durationï¼‰</span>
<span class="hljs-keyword">final</span> exactWeek = now.add(<span class="hljs-number">7</span>, TemporalUnit.day); <span class="hljs-comment">// ç²¾ç¡®çš„ 7 å¤©</span>

<span class="hljs-comment">// æ—¥å†ç›¸å…³å•ä½ï¼ˆè€ƒè™‘æœˆä»½é•¿åº¦ã€é—°å¹´ç­‰ï¼‰</span>
<span class="hljs-keyword">final</span> nextMonth = now.add(<span class="hljs-number">1</span>, TemporalUnit.month); <span class="hljs-comment">// æ™ºèƒ½å¤„ç†æœˆä»½å˜åŒ–</span>

<span class="hljs-comment">// HoraDuration æ›´æ˜¯æ”¯æŒæ··åˆå•ä½</span>
<span class="hljs-keyword">final</span> duration = HoraDuration(
  years: <span class="hljs-number">1</span>,
  months: <span class="hljs-number">6</span>,
  days: <span class="hljs-number">15</span>
);
<span class="hljs-built_in">print</span>(duration.humanize()); <span class="hljs-comment">// "a year and 6 months"</span>
</code></pre>
<h3 data-id="heading-9">5. ğŸ”Œ çµæ´»çš„æ’ä»¶ç³»ç»Ÿ</h3>
<p>Hora é‡‡ç”¨ Dart Extension å®ç°æ’ä»¶æœºåˆ¶ï¼Œæ— éœ€æ˜¾å¼æ³¨å†Œï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:hora/src/plugins/week_year.dart'</span>;

<span class="hljs-keyword">final</span> h = Hora.now();
<span class="hljs-built_in">print</span>(h.weekYear());       <span class="hljs-comment">// é€šè¿‡æ‰©å±•æ–¹æ³•è°ƒç”¨</span>
<span class="hljs-built_in">print</span>(h.weekOfWeekYear()); <span class="hljs-comment">// æ— éœ€é¢å¤–é…ç½®</span>
</code></pre>
<h3 data-id="heading-10">6. âš¡ è½»é‡ä¸”é«˜æ€§èƒ½</h3>
<ul>
<li><strong>é›¶å¤–éƒ¨ä¾èµ–</strong>ï¼šåªä¾èµ– Dart å†…ç½®çš„ <code>meta</code> åŒ…</li>
<li><strong>Tree-shakable</strong>ï¼šæœªä½¿ç”¨çš„ä»£ç ä¼šè¢«ç¼–è¯‘å™¨ä¼˜åŒ–æ‰</li>
<li><strong>çº¯ Dart å®ç°</strong>ï¼šæ— å¹³å°é™åˆ¶ï¼Œæ”¯æŒ Flutter Webã€Serverã€Desktop</li>
</ul>
<h3 data-id="heading-11">7. ğŸ“Š å®Œæ•´çš„æ’ä»¶ç”Ÿæ€</h3>
<p>Hora é€šè¿‡ 20+ ä¸ªæ’ä»¶è¦†ç›–äº†ä¼ä¸šçº§åº”ç”¨çš„å„ç§éœ€æ±‚ï¼š</p>
<ul>
<li>business_dayï¼šä¸šåŠ¡æ—¥è®¡ç®—</li>
<li>recurrenceï¼šé‡å¤äº‹ä»¶</li>
<li>calendarï¼šæ—¥å†ç”Ÿæˆ</li>
<li>relative_timeï¼šç›¸å¯¹æ—¶é—´</li>
<li>custom_parse_formatï¼šè‡ªå®šä¹‰è§£æ</li>
<li>timezoneï¼šæ—¶åŒºå¤„ç†</li>
<li>fiscal_yearï¼šè´¢å¹´è®¡ç®—</li>
<li>week_yearï¼šISO å‘¨å¹´</li>
<li>ç­‰ç­‰...</li>
</ul>
<h2 data-id="heading-12">åŠŸèƒ½å¯¹æ¯”è¡¨</h2>


















































































<table><thead><tr><th>ç‰¹æ€§</th><th>Hora</th><th>intl</th><th>date_format</th><th>jiffy</th></tr></thead><tbody><tr><td>ä¸å¯å˜æ€§</td><td>âœ… å®Œå…¨ä¸å¯å˜</td><td>âš ï¸ DateTime å¯å˜</td><td>âš ï¸ DateTime å¯å˜</td><td>âš ï¸ éƒ¨åˆ†å¯å˜</td></tr><tr><td>å›½é™…åŒ–</td><td>âœ… 143+ è¯­è¨€ï¼ŒTree-shakable</td><td>âœ… å®Œæ•´ä½†è¾ƒé‡</td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… æœ‰é™æ”¯æŒ</td></tr><tr><td>æ’ä»¶ç³»ç»Ÿ</td><td>âœ… 20+ æ’ä»¶ï¼Œæ— ä¾µå…¥</td><td>âŒ æ— </td><td>âŒ æ— </td><td>âš ï¸ åŸºç¡€æ‰©å±•</td></tr><tr><td>é«˜çº§åŠŸèƒ½</td><td>âœ… ä¸šåŠ¡æ—¥ã€é‡å¤äº‹ä»¶ã€æ—¥å†</td><td>âŒ æ— </td><td>âŒ æ— </td><td>âš ï¸ åŸºç¡€åŠŸèƒ½</td></tr><tr><td>é“¾å¼æ“ä½œ</td><td>âœ… æµç•… API</td><td>âŒ ä¸æ”¯æŒ</td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… æ”¯æŒ</td></tr><tr><td>æ—¶é—´å•ä½</td><td>âœ… åŒºåˆ†å›ºå®šæ—¶é•¿å’Œæ—¥å†å•ä½</td><td>âš ï¸ éœ€æ‰‹åŠ¨è®¡ç®—</td><td>âŒ ä¸æ”¯æŒ</td><td>âš ï¸ æ¦‚å¿µæ¨¡ç³Š</td></tr><tr><td>æ ¼å¼è§£æ</td><td>âœ… è‡ªå®šä¹‰æ ¼å¼è§£æ</td><td>âš ï¸ æœ‰é™æ”¯æŒ</td><td>âŒ ä¸æ”¯æŒ</td><td>âš ï¸ åŸºç¡€æ”¯æŒ</td></tr><tr><td>æ—¶åŒºæ”¯æŒ</td><td>âœ… å†…ç½®æ”¯æŒ</td><td>âŒ éœ€è¦é¢å¤–åŒ…</td><td>âŒ ä¸æ”¯æŒ</td><td>âŒ æ— </td></tr><tr><td>è´¢å¹´è®¡ç®—</td><td>âœ… å¤šå›½è´¢å¹´æ”¯æŒ</td><td>âŒ æ— </td><td>âŒ ä¸æ”¯æŒ</td><td>âŒ æ— </td></tr><tr><td>ä¾èµ–</td><td>âœ… ä»… meta åŒ…</td><td>âŒ è¾ƒå¤šä¾èµ–</td><td>âœ… 0</td><td>âš ï¸ è½»é‡</td></tr></tbody></table>
<h2 data-id="heading-13">å®é™…åº”ç”¨ç¤ºä¾‹</h2>
<h3 data-id="heading-14">åœºæ™¯1ï¼šä¸šåŠ¡æ—¶é—´è®¡ç®—</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// Hora - å†…ç½®ä¸šåŠ¡æ—¥è®¡ç®—ï¼Œä¸€è¡Œæå®š</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:hora/src/plugins/business_day.dart'</span>;

<span class="hljs-keyword">final</span> start = Hora.of(year: <span class="hljs-number">2024</span>, month: <span class="hljs-number">12</span>, day: <span class="hljs-number">20</span>); <span class="hljs-comment">// å‘¨äº”</span>
<span class="hljs-keyword">final</span> end = start.addBusinessDays(<span class="hljs-number">5</span>); <span class="hljs-comment">// è‡ªåŠ¨è·³è¿‡å‘¨æœ«å’ŒèŠ‚å‡æ—¥</span>
<span class="hljs-built_in">print</span>(end.format(<span class="hljs-string">'YYYY-MM-DD'</span>)); <span class="hljs-comment">// 2024-12-27</span>

<span class="hljs-comment">// jiffy - éœ€è¦æ‰‹åŠ¨å®ç°</span>
<span class="hljs-keyword">var</span> current = start;
<span class="hljs-built_in">int</span> businessDays = <span class="hljs-number">0</span>;
<span class="hljs-keyword">while</span> (businessDays &lt; <span class="hljs-number">5</span>) {
  current = current.add(<span class="hljs-number">1</span>, TemporalUnit.day);
  <span class="hljs-keyword">if</span> (current.weekday &lt;= <span class="hljs-number">5</span>) businessDays++; <span class="hljs-comment">// éœ€è¦æ‰‹åŠ¨åˆ¤æ–­å‘¨æœ«</span>
}

<span class="hljs-comment">// intl - å®Œå…¨æ²¡æœ‰ä¸šåŠ¡æ—¥åŠŸèƒ½</span>
</code></pre>
<h3 data-id="heading-15">åœºæ™¯2ï¼šæ™ºèƒ½çš„æ—¶é—´å•ä½å¤„ç†</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// Hora - åŒºåˆ†å›ºå®šæ—¶é•¿å’Œæ—¥å†å•ä½</span>
<span class="hljs-keyword">final</span> jan31 = Hora.of(year: <span class="hljs-number">2024</span>, month: <span class="hljs-number">1</span>, day: <span class="hljs-number">31</span>);

<span class="hljs-comment">// å›ºå®šæ—¶é•¿ - ç²¾ç¡®çš„ 7 å¤©</span>
<span class="hljs-keyword">final</span> exact7Days = jan31.add(<span class="hljs-number">7</span>, TemporalUnit.day);
<span class="hljs-built_in">print</span>(exact7Days.format(<span class="hljs-string">'YYYY-MM-DD'</span>)); <span class="hljs-comment">// 2024-02-07</span>

<span class="hljs-comment">// æ—¥å†å•ä½ - æ™ºèƒ½å¤„ç†æœˆä»½</span>
<span class="hljs-keyword">final</span> nextMonth = jan31.add(<span class="hljs-number">1</span>, TemporalUnit.month);
<span class="hljs-built_in">print</span>(nextMonth.format(<span class="hljs-string">'YYYY-MM-DD'</span>)); <span class="hljs-comment">// 2024-02-29 (é—°å¹´2æœˆæœ«)</span>

<span class="hljs-comment">// jiffy - å®¹æ˜“æ··æ·†ï¼Œéœ€è¦è‡ªå·±è®¡ç®—</span>
<span class="hljs-keyword">final</span> jiffy1 = Jiffy.parse(<span class="hljs-string">'2024-01-31'</span>).add(days: <span class="hljs-number">7</span>); <span class="hljs-comment">// ç±»ä¼¼å›ºå®šæ—¶é•¿</span>
<span class="hljs-keyword">final</span> jiffy2 = Jiffy.parse(<span class="hljs-string">'2024-01-31'</span>).add(months: <span class="hljs-number">1</span>); <span class="hljs-comment">// ä½†é€»è¾‘ä¸é€æ˜</span>
</code></pre>
<h3 data-id="heading-16">åœºæ™¯4ï¼šå¼ºå¤§çš„æ’ä»¶ç³»ç»Ÿ</h3>
<p>Hora çš„æ’ä»¶ç³»ç»Ÿé€šè¿‡ Dart Extension å®ç°ï¼Œæ— éœ€æ˜¾å¼æ³¨å†Œï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// Calendar æ’ä»¶ - ç”Ÿæˆæ—¥å†</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:hora/src/plugins/calendar.dart'</span>;

<span class="hljs-keyword">final</span> monthCal = Hora.now().monthCalendar();
<span class="hljs-built_in">print</span>(<span class="hljs-string">'è¯¥æœˆæœ‰ <span class="hljs-subst">${monthCal.weekCount}</span> å‘¨'</span>);

<span class="hljs-comment">// Recurrence æ’ä»¶ - å¤æ‚çš„é‡å¤äº‹ä»¶</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:hora/src/plugins/recurrence.dart'</span>;

<span class="hljs-comment">// æ¯ä¸ªå‘¨ä¸€å’Œå‘¨äº”çš„ä¼šè®®</span>
<span class="hljs-keyword">final</span> meeting = Recurrence.weekly(
  start: Hora.now(),
  daysOfWeek: {<span class="hljs-built_in">DateTime</span>.monday, <span class="hljs-built_in">DateTime</span>.friday},
);
<span class="hljs-built_in">print</span>(<span class="hljs-string">'æ¥ä¸‹æ¥5æ¬¡ä¼šè®®æ—¶é—´:'</span>);
meeting.take(<span class="hljs-number">5</span>).forEach(<span class="hljs-built_in">print</span>);

<span class="hljs-comment">// è‡ªå®šä¹‰é‡å¤æ¨¡å¼ - å¦‚æ¯3å¤©ä¸€æ¬¡</span>
<span class="hljs-keyword">final</span> custom = Recurrence.custom(
  start: Hora.now(),
  generator: (current) =&gt; current.add(<span class="hljs-number">3</span>, TemporalUnit.day),
);
</code></pre>
<h3 data-id="heading-17">åœºæ™¯5ï¼šé«˜çº§ç›¸å¯¹æ—¶é—´åŠŸèƒ½</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// Relative Time æ’ä»¶ - æ¯”åŸºç¡€ fromNow æ›´å¼ºå¤§</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:hora/src/plugins/relative_time.dart'</span>;

<span class="hljs-keyword">final</span> past = Hora.now().subtract(<span class="hljs-number">5</span>, TemporalUnit.day);

<span class="hljs-comment">// è‡ªå®šä¹‰é˜ˆå€¼é…ç½®</span>
<span class="hljs-keyword">final</span> config = RelativeTimeConfig(
  thresholds: RelativeTimeThresholds.strict,
  withoutSuffix: <span class="hljs-keyword">false</span>,
);

<span class="hljs-comment">// è¯¦ç»†çš„æ—¶é—´å·®åˆ†è§£</span>
<span class="hljs-keyword">final</span> diff = past.diffFromNowDetailed();
<span class="hljs-built_in">print</span>(diff.format()); <span class="hljs-comment">// "5 days, 0 hours, 0 minutes, 0 seconds ago"</span>
<span class="hljs-built_in">print</span>(diff.formatCompact()); <span class="hljs-comment">// "5d"</span>

<span class="hljs-comment">// çŸ­æ ¼å¼ï¼Œé€‚åˆ UI æ˜¾ç¤º</span>
<span class="hljs-built_in">print</span>(past.relativeFromNowShort()); <span class="hljs-comment">// "-5d"</span>
</code></pre>
<h3 data-id="heading-18">åœºæ™¯6ï¼šè‡ªå®šä¹‰æ ¼å¼è§£æ</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// Custom Parse Format æ’ä»¶</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:hora/src/plugins/custom_parse_format.dart'</span>;

<span class="hljs-comment">// è§£æå„ç§æ ¼å¼çš„æ—¥æœŸ</span>
<span class="hljs-keyword">final</span> date1 = HoraParser.parse(<span class="hljs-string">'25/12/2024'</span>, <span class="hljs-string">'DD/MM/YYYY'</span>);
<span class="hljs-keyword">final</span> date2 = HoraParser.parseMultiple(
  <span class="hljs-string">'2024-12-25'</span>,
  [<span class="hljs-string">'YYYY-MM-DD'</span>, <span class="hljs-string">'DD/MM/YYYY'</span>, <span class="hljs-string">'MM-DD-YYYY'</span>],
);

<span class="hljs-comment">// æ”¯æŒå¤æ‚æ ¼å¼</span>
<span class="hljs-keyword">final</span> complex = HoraParser.parse(
  <span class="hljs-string">'Thursday, December 25, 2024 2:30 PM'</span>,
  <span class="hljs-string">'dddd, MMMM D, YYYY h:mm A'</span>,
);

<span class="hljs-comment">// å…¶ä»–åº“éœ€è¦è‡ªå·±å®ç°è¿™äº›å¤æ‚çš„è§£æé€»è¾‘</span>
</code></pre>
<h3 data-id="heading-19">åœºæ™¯7ï¼šæµç•…çš„é“¾å¼ API</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// Hora - çœŸæ­£çš„æµç•…æ“ä½œ</span>
<span class="hljs-keyword">final</span> result = Hora.now()
    .startOf(TemporalUnit.month)      <span class="hljs-comment">// æœˆåˆ</span>
    .addBusinessDays(<span class="hljs-number">10</span>)              <span class="hljs-comment">// åŠ 10ä¸ªå·¥ä½œæ—¥</span>
    .withLocale(<span class="hljs-keyword">const</span> HoraLocaleJa()) <span class="hljs-comment">// åˆ‡æ¢åˆ°æ—¥è¯­</span>
    .format(<span class="hljs-string">'YYYYå¹´MæœˆDæ—¥'</span>);          <span class="hljs-comment">// æ ¼å¼åŒ–</span>

<span class="hljs-comment">// jiffy - é“¾å¼æ”¯æŒä½†åŠŸèƒ½æœ‰é™</span>
<span class="hljs-keyword">final</span> jiffyResult = Jiffy()
    .startOf(<span class="hljs-string">'month'</span>)
    .add(days: <span class="hljs-number">10</span>)  <span class="hljs-comment">// ä¸èƒ½åŒºåˆ†å·¥ä½œæ—¥</span>
    .format(<span class="hljs-string">'yyyy-MM-dd'</span>);  <span class="hljs-comment">// æ ¼å¼åŒ–é€‰é¡¹æœ‰é™</span>
</code></pre>
<h3 data-id="heading-20">çœŸå®é¡¹ç›®æ¡ˆä¾‹ï¼šé¡¹ç›®ç®¡ç†åº”ç”¨</h3>
<p>åœ¨å¼€å‘ä¸€ä¸ªé¡¹ç›®ç®¡ç†å·¥å…·æ—¶ï¼Œæˆ‘é‡åˆ°äº†è¿™æ ·çš„éœ€æ±‚ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// éœ€æ±‚ï¼šè®¡ç®—ä»»åŠ¡æˆªæ­¢æ—¥æœŸï¼Œæ’é™¤å‘¨æœ«å’ŒèŠ‚å‡æ—¥</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:hora/src/plugins/business_day.dart'</span>;

<span class="hljs-comment">// è®¾ç½®èŠ‚å‡æ—¥</span>
<span class="hljs-keyword">final</span> usHolidays = HolidayCalendar.usCommon.merge(
  HolidayCalendar(fixedHolidays: [
    <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2024</span>, <span class="hljs-number">12</span>, <span class="hljs-number">24</span>), <span class="hljs-comment">// å…¬å¸é¢å¤–å‡æœŸ</span>
  ]),
);

<span class="hljs-comment">// ä»»åŠ¡åˆ†é…</span>
<span class="hljs-keyword">final</span> taskStart = Hora.of(year: <span class="hljs-number">2024</span>, month: <span class="hljs-number">12</span>, day: <span class="hljs-number">20</span>);
<span class="hljs-keyword">final</span> deadline = taskStart.addBusinessDays(
  <span class="hljs-number">10</span>,
  BusinessDayConfig(holidays: usHolidays),
);

<span class="hljs-comment">// ç”Ÿæˆé‡Œç¨‹ç¢‘æŠ¥å‘Š</span>
<span class="hljs-keyword">final</span> milestones = Recurrence.weekly(
  start: taskStart,
  daysOfWeek: {<span class="hljs-built_in">DateTime</span>.friday},
  count: <span class="hljs-number">5</span>,
).map((date) =&gt; {
  <span class="hljs-string">'week'</span>: date.isoWeek,
  <span class="hljs-string">'date'</span>: date.format(<span class="hljs-string">'YYYY-MM-DD'</span>),
  <span class="hljs-string">'deliverables'</span>: <span class="hljs-built_in">List</span>.generate(<span class="hljs-number">5</span>, (i) =&gt;
    date.addBusinessDays(i)
  ),
});

<span class="hljs-comment">// è¿™åœ¨ jiffy ä¸­éœ€è¦æ•°ç™¾è¡Œä»£ç æ¥å®ç°ï¼</span>
</code></pre>
<h3 data-id="heading-21">ç”Ÿäº§ç¯å¢ƒç”¨ä¾‹1ï¼šå…¨çƒç”µå•†ç³»ç»Ÿ</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// å¤„ç†ä¸åŒæ—¶åŒºçš„è®¢å•æˆªæ­¢æ—¶é—´</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:hora/src/plugins/timezone.dart'</span>;

<span class="hljs-comment">// è®¢å•åœ¨çº½çº¦ä¸‹åˆ6ç‚¹æˆªæ­¢</span>
<span class="hljs-keyword">final</span> nycTz = HoraTimezone.common[<span class="hljs-string">'EST'</span>]!;
<span class="hljs-keyword">final</span> orderDeadline = Hora.now()
    .withTimezone(nycTz)
    .copyWith(hour: <span class="hljs-number">18</span>, minute: <span class="hljs-number">0</span>, second: <span class="hljs-number">0</span>);

<span class="hljs-comment">// è½¬æ¢ä¸ºå„åœ°æ—¶åŒºæ˜¾ç¤º</span>
<span class="hljs-keyword">final</span> tokyoTime = orderDeadline.inTimezone(HoraTimezone.common[<span class="hljs-string">'JST'</span>]!);
<span class="hljs-keyword">final</span> londonTime = orderDeadline.inTimezone(HoraTimezone.common[<span class="hljs-string">'GMT'</span>]!);
<span class="hljs-keyword">final</span> sydneyTime = orderDeadline.inTimezone(HoraTimezone.common[<span class="hljs-string">'AEST'</span>]!);

<span class="hljs-comment">// æ‰¹é‡å¤„ç†ä¸åŒæ—¶åŒºçš„ä¿ƒé”€æ´»åŠ¨</span>
<span class="hljs-keyword">final</span> promotions = [
  {<span class="hljs-string">'city'</span>: <span class="hljs-string">'New York'</span>, <span class="hljs-string">'tz'</span>: HoraTimezone.common[<span class="hljs-string">'EST'</span>]!},
  {<span class="hljs-string">'city'</span>: <span class="hljs-string">'London'</span>, <span class="hljs-string">'tz'</span>: HoraTimezone.common[<span class="hljs-string">'GMT'</span>]!},
  {<span class="hljs-string">'city'</span>: <span class="hljs-string">'Tokyo'</span>, <span class="hljs-string">'tz'</span>: HoraTimezone.common[<span class="hljs-string">'JST'</span>]!},
  {<span class="hljs-string">'city'</span>: <span class="hljs-string">'Sydney'</span>, <span class="hljs-string">'tz'</span>: HoraTimezone.common[<span class="hljs-string">'AEST'</span>]!},
].map((loc) {
  <span class="hljs-keyword">final</span> midnight = Hora.nowIn(loc[<span class="hljs-string">'tz'</span>])
      .endOf(TemporalUnit.day)
      .add(<span class="hljs-number">1</span>, TemporalUnit.second);
  <span class="hljs-keyword">return</span> {
    <span class="hljs-string">'city'</span>: loc[<span class="hljs-string">'city'</span>],
    <span class="hljs-string">'promoEnd'</span>: midnight.format(<span class="hljs-string">'YYYY-MM-DD HH:mm:ss'</span>),
    <span class="hljs-string">'localTime'</span>: midnight.wallClockIn(loc[<span class="hljs-string">'tz'</span>] <span class="hljs-keyword">as</span> HoraTimezone),
  };
});

<span class="hljs-comment">// jiffy æ ¹æœ¬æ²¡æœ‰å†…ç½®çš„æ—¶åŒºæ”¯æŒï¼</span>
</code></pre>
<h3 data-id="heading-22">ç”Ÿäº§ç¯å¢ƒç”¨ä¾‹2ï¼šä¼ä¸šè´¢åŠ¡ç³»ç»Ÿ</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// è´¢åŠ¡æŠ¥è¡¨å’Œå­£åº¦ç»“ç®—</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:hora/src/plugins/fiscal_year.dart'</span>;

<span class="hljs-comment">// ä¸åŒå›½å®¶çš„è´¢å¹´è®¾ç½®</span>
<span class="hljs-keyword">final</span> usGovConfig = FiscalYearConfig.usGovernment;  <span class="hljs-comment">// 10æœˆ1æ—¥å¼€å§‹</span>
<span class="hljs-keyword">final</span> ukConfig = FiscalYearConfig.ukTax;           <span class="hljs-comment">// 4æœˆ6æ—¥å¼€å§‹</span>
<span class="hljs-keyword">final</span> jpConfig = FiscalYearConfig.japan;           <span class="hljs-comment">// 4æœˆ1æ—¥å¼€å§‹</span>

<span class="hljs-comment">// ç”Ÿæˆè´¢å¹´æŠ¥è¡¨</span>
<span class="hljs-keyword">final</span> now = Hora.now();
<span class="hljs-keyword">final</span> reports = {
  <span class="hljs-string">'US Gov'</span>: {
    <span class="hljs-string">'fiscalYear'</span>: now.fiscalYearWithConfig(usGovConfig),
    <span class="hljs-string">'fiscalQuarter'</span>: now.fiscalQuarterWithConfig(usGovConfig),
    <span class="hljs-string">'period'</span>: now.fiscalPeriod(config: usGovConfig),
    <span class="hljs-string">'progress'</span>: <span class="hljs-string">'<span class="hljs-subst">${(now.fiscalYearProgress(config: usGovConfig) * <span class="hljs-number">100</span>).toInt()}</span>%'</span>,
    <span class="hljs-string">'daysRemaining'</span>: now.daysRemainingInFiscalYear(config: usGovConfig),
  },
  <span class="hljs-string">'UK'</span>: {
    <span class="hljs-string">'fiscalYear'</span>: now.fiscalYearWithConfig(ukConfig),
    <span class="hljs-string">'fiscalQuarter'</span>: now.fiscalQuarterWithConfig(ukConfig),
    <span class="hljs-string">'period'</span>: now.fiscalPeriod(config: ukConfig),
    <span class="hljs-string">'progress'</span>: <span class="hljs-string">'<span class="hljs-subst">${(now.fiscalYearProgress(config: ukConfig) * <span class="hljs-number">100</span>).toInt()}</span>%'</span>,
  },
  <span class="hljs-string">'Japan'</span>: {
    <span class="hljs-string">'fiscalYear'</span>: now.fiscalYearWithConfig(jpConfig),
    <span class="hljs-string">'fiscalQuarter'</span>: now.fiscalQuarterWithConfig(jpConfig),
    <span class="hljs-string">'period'</span>: now.fiscalPeriod(config: jpConfig),
  },
};

<span class="hljs-comment">// ç”Ÿæˆè´¢å¹´æ—¥å†</span>
<span class="hljs-keyword">final</span> fyCalendar = now
    .startOfFiscalYearWithConfig(usGovConfig)
    .yearCalendar();

<span class="hljs-comment">// jiffyï¼šæŠ±æ­‰ï¼Œä¸æ”¯æŒè´¢å¹´è®¡ç®—</span>
</code></pre>
<h3 data-id="heading-23">ç”Ÿäº§ç¯å¢ƒç”¨ä¾‹3ï¼šSaaS è®¢é˜…ç®¡ç†</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// å¤„ç†è®¢é˜…å‘¨æœŸå’Œè®¡è´¹</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:hora/src/plugins/recurrence.dart'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SubscriptionPlan</span> </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> id;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> name;
  <span class="hljs-keyword">final</span> Recurrence billingCycle;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt; features;

  <span class="hljs-keyword">const</span> SubscriptionPlan({
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.id,
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.name,
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.billingCycle,
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.features,
  });
}

<span class="hljs-comment">// å®šä¹‰è®¢é˜…è®¡åˆ’</span>
<span class="hljs-keyword">final</span> plans = [
  SubscriptionPlan(
    id: <span class="hljs-string">'basic'</span>,
    name: <span class="hljs-string">'Basic Plan'</span>,
    billingCycle: Recurrence.monthly(
      start: Hora.now(),
      interval: <span class="hljs-number">1</span>,
    ),
    features: {<span class="hljs-string">'seats'</span>: <span class="hljs-number">5</span>, <span class="hljs-string">'storage'</span>: <span class="hljs-string">'100GB'</span>},
  ),
  SubscriptionPlan(
    id: <span class="hljs-string">'pro'</span>,
    name: <span class="hljs-string">'Pro Plan'</span>,
    billingCycle: Recurrence.monthly(
      start: Hora.now(),
      interval: <span class="hljs-number">1</span>,
    ),
    features: {<span class="hljs-string">'seats'</span>: <span class="hljs-number">20</span>, <span class="hljs-string">'storage'</span>: <span class="hljs-string">'1TB'</span>},
  ),
  SubscriptionPlan(
    id: <span class="hljs-string">'enterprise'</span>,
    name: <span class="hljs-string">'Enterprise'</span>,
    billingCycle: Recurrence.yearly(
      start: Hora.now(),
      interval: <span class="hljs-number">1</span>,
    ),
    features: {<span class="hljs-string">'seats'</span>: <span class="hljs-number">-1</span>, <span class="hljs-string">'storage'</span>: <span class="hljs-string">'unlimited'</span>},
  ),
];

<span class="hljs-comment">// ç”Ÿæˆæœªæ¥12ä¸ªè´¦æœŸ</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BillingService</span> </span>{
  <span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt;&gt; generateBillingSchedule(SubscriptionPlan plan) {
    <span class="hljs-keyword">return</span> plan.billingCycle
        .take(<span class="hljs-number">12</span>)
        .map((billingDate) =&gt; {
              <span class="hljs-string">'date'</span>: billingDate.format(<span class="hljs-string">'YYYY-MM-DD'</span>),
              <span class="hljs-string">'period_start'</span>: billingDate.format(<span class="hljs-string">'YYYY-MM-DD'</span>),
              <span class="hljs-string">'period_end'</span>: billingDate
                  .add(<span class="hljs-number">1</span>, TemporalUnit.month)
                  .subtract(<span class="hljs-number">1</span>, TemporalUnit.day)
                  .format(<span class="hljs-string">'YYYY-MM-DD'</span>),
              <span class="hljs-string">'days_in_period'</span>: billingDate.daysInMonth,
              <span class="hljs-string">'is_business_day'</span>: billingDate.isBusinessDay(),
            })
        .toList();
  }
}

<span class="hljs-comment">// å¤„ç†è¯•ç”¨æœŸå’Œä»˜è´¹è½¬æ¢</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TrialService</span> </span>{
  Hora calculateTrialEnd(Hora signupDate, <span class="hljs-built_in">Duration</span> trialDuration) {
    <span class="hljs-keyword">return</span> signupDate.add(
        <span class="hljs-built_in">Duration</span>.inMilliseconds(trialDuration.inMilliseconds),
        TemporalUnit.day);
  }

  Hora calculateFirstBillingDate(Hora trialEnd) {
    <span class="hljs-comment">// ç¡®ä¿ç¬¬ä¸€ä¸ªè´¦æœŸä¸æ˜¯å‘¨æœ«</span>
    <span class="hljs-keyword">return</span> trialEnd.addBusinessDays(<span class="hljs-number">1</span>);
  }
}

<span class="hljs-comment">// jiffyï¼šéœ€è¦æ‰‹åŠ¨å¤„ç†æ‰€æœ‰é‡å¤é€»è¾‘å’Œè¾¹ç•Œæƒ…å†µ</span>
</code></pre>
<h2 data-id="heading-24">ä¸ºä»€ä¹ˆé€‰æ‹© Horaï¼Ÿ</h2>
<ol>
<li><strong>åŠŸèƒ½å®Œæ•´</strong>ï¼šè¦†ç›–ä¼ä¸šçº§åº”ç”¨çš„å„ç§æ—¥æœŸæ—¶é—´éœ€æ±‚</li>
<li><strong>æ’ä»¶ç”Ÿæ€</strong>ï¼š20+ æ’ä»¶ï¼Œä¸šåŠ¡æ—¥ã€è´¢å¹´ã€æ—¶åŒºã€é‡å¤äº‹ä»¶ç­‰</li>
<li><strong>å¼€å‘å‹å¥½</strong>ï¼šæ¸…æ™°çš„ API è®¾è®¡ï¼Œä¸°å¯Œçš„ç¤ºä¾‹ä»£ç </li>
<li><strong>è½»é‡é«˜æ•ˆ</strong>ï¼šé›¶å¤–éƒ¨ä¾èµ–ï¼Œtree-shakableï¼Œçº¯ Dart å®ç°</li>
</ol>
<h2 data-id="heading-25">å¿«é€Ÿå¼€å§‹</h2>
<pre><code class="hljs language-bash" lang="bash">dart pub add hora
</code></pre>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:hora/hora.dart'</span>;

<span class="hljs-keyword">void</span> main() {
  <span class="hljs-comment">// åˆ›å»ºæ—¶é—´å®ä¾‹</span>
  <span class="hljs-keyword">final</span> now = Hora.now();

  <span class="hljs-comment">// æ—¶é—´æ“ä½œ</span>
  <span class="hljs-keyword">final</span> nextMonth = now.add(<span class="hljs-number">1</span>, TemporalUnit.month);

  <span class="hljs-comment">// æ ¼å¼åŒ–è¾“å‡º</span>
  <span class="hljs-built_in">print</span>(now.format(<span class="hljs-string">'YYYY-MM-DD HH:mm:ss'</span>));

  <span class="hljs-comment">// ç›¸å¯¹æ—¶é—´</span>
  <span class="hljs-keyword">final</span> birthday = Hora.of(year: <span class="hljs-number">1990</span>, month: <span class="hljs-number">6</span>, day: <span class="hljs-number">15</span>);
  <span class="hljs-built_in">print</span>(birthday.fromNow()); <span class="hljs-comment">// "34 years ago"</span>
}
</code></pre>
<h2 data-id="heading-26">è¿ç§»æŒ‡å—</h2>
<p>ä»å…¶ä»–åº“è¿ç§»åˆ° Hora éå¸¸ç®€å•ï¼š</p>
<h3 data-id="heading-27">ä» jiffy è¿ç§»</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// jiffy</span>
Jiffy().add(days: <span class="hljs-number">7</span>).format(<span class="hljs-string">'yyyy-MM-dd'</span>)

<span class="hljs-comment">// Hora</span>
Hora.now().add(<span class="hljs-number">7</span>, TemporalUnit.day).format(<span class="hljs-string">'YYYY-MM-DD'</span>)
</code></pre>
<h3 data-id="heading-28">ä» intl è¿ç§»</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// intl</span>
DateFormat(<span class="hljs-string">'yyyy-MM-dd'</span>).format(<span class="hljs-built_in">DateTime</span>.now())

<span class="hljs-comment">// Hora</span>
Hora.now().format(<span class="hljs-string">'YYYY-MM-DD'</span>)
</code></pre>
<h2 data-id="heading-29">Hora vs jiffyï¼šåŠŸèƒ½å¯¹æ¯”æ€»è§ˆ</h2>
<p>ä¸ºäº†è®©ä½ æ›´æ¸…æ¥šåœ°äº†è§£ Hora çš„ç‹¬ç‰¹ä¼˜åŠ¿ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªè¯¦ç»†çš„å¯¹æ¯”ï¼š</p>
<h3 data-id="heading-30">ğŸ”¥ jiffy æ ¹æœ¬æ²¡æœ‰çš„åŠŸèƒ½ï¼š</h3>



























































<table><thead><tr><th>åŠŸèƒ½ç±»åˆ«</th><th>Hora</th><th>jiffy</th><th>ç”Ÿäº§ä»·å€¼</th></tr></thead><tbody><tr><td><strong>ä¸šåŠ¡æ—¥è®¡ç®—</strong></td><td>âœ… å®Œæ•´æ”¯æŒ</td><td>âŒ æ— </td><td>é‡‘èã€ä¼ä¸šåº”ç”¨å¿…å¤‡</td></tr><tr><td><strong>æ—¶åŒºè½¬æ¢</strong></td><td>âœ… å†…ç½®æ”¯æŒ</td><td>âŒ éœ€è¦é¢å¤–åŒ…</td><td>å…¨çƒåŒ–åº”ç”¨å¿…å¤‡</td></tr><tr><td><strong>è´¢å¹´ç®¡ç†</strong></td><td>âœ… å¤šå›½è´¢å¹´</td><td>âŒ æ— </td><td>è´¢åŠ¡ç³»ç»Ÿå¿…å¤‡</td></tr><tr><td><strong>é‡å¤äº‹ä»¶</strong></td><td>âœ… å¤æ‚æ¨¡å¼</td><td>âŒ åŸºç¡€æ¨¡å¼</td><td>è®¢é˜…ç³»ç»Ÿå¿…å¤‡</td></tr><tr><td><strong>è‡ªå®šä¹‰è§£æ</strong></td><td>âœ… çµæ´»é…ç½®</td><td>âŒ æœ‰é™æ”¯æŒ</td><td>æ•°æ®å¯¼å…¥å¿…å¤‡</td></tr><tr><td><strong>æ—¥å†ç”Ÿæˆ</strong></td><td>âœ… æœˆå†/å¹´å†</td><td>âŒ æ— </td><td>è°ƒåº¦ç³»ç»Ÿå¿…å¤‡</td></tr><tr><td><strong>è¯¦ç»†æ—¶é—´å·®</strong></td><td>âœ… å¤šç§æ ¼å¼</td><td>âŒ åŸºç¡€æ ¼å¼</td><td>åˆ†ææŠ¥è¡¨å¿…å¤‡</td></tr><tr><td><strong>èŠ‚å‡æ—¥ç®¡ç†</strong></td><td>âœ… å¤šå›½æ—¥å†</td><td>âŒ æ— </td><td>æœ¬åœ°åŒ–åº”ç”¨å¿…å¤‡</td></tr></tbody></table>
<h3 data-id="heading-31">ğŸ’¡ ä¸ºä»€ä¹ˆè¿™äº›åŠŸèƒ½å¾ˆé‡è¦ï¼Ÿ</h3>
<p>åœ¨å®é™…çš„ä¼ä¸šçº§åº”ç”¨ä¸­ï¼Œä½ è¿Ÿæ—©ä¼šé‡åˆ°è¿™äº›éœ€æ±‚ï¼š</p>
<ol>
<li><strong>ä¸šåŠ¡æ—¥è®¡ç®—</strong> - è®¢å•å¤„ç†ã€ç‰©æµé…é€çš„æ—¶æ•ˆæ‰¿è¯º</li>
<li><strong>æ—¶åŒºå¤„ç†</strong> - å…¨çƒç”¨æˆ·çš„åŒæ­¥æ“ä½œ</li>
<li><strong>è´¢å¹´ç®¡ç†</strong> - è´¢åŠ¡æŠ¥è¡¨ã€é¢„ç®—è§„åˆ’</li>
<li><strong>é‡å¤äº‹ä»¶</strong> - è®¢ç»­è®¡è´¹ã€å®šæœŸæé†’</li>
<li><strong>è‡ªå®šä¹‰è§£æ</strong> - å¤„ç†å„ç§æ¥æºçš„æ•°æ®</li>
</ol>
<p><strong>jiffy åªèƒ½å¸®ä½ åšåŸºç¡€çš„æ—¥æœŸæ“ä½œï¼Œè€Œ Hora è®©ä½ èƒ½å¤Ÿæ„å»ºå®Œæ•´çš„ä¼ä¸šçº§åº”ç”¨ã€‚</strong></p>
<h2 data-id="heading-32">å†™åœ¨æœ€å</h2>
<p>ä» jiffy ç”¨æˆ·åˆ° Hora ä½œè€…ï¼Œè¿™æ®µå¼€å‘ç»å†è®©æˆ‘å­¦åˆ°äº†å¾ˆå¤šã€‚æˆ‘å¼€å§‹åªæ˜¯æƒ³è§£å†³è‡ªå·±åœ¨é¡¹ç›®ä¸­çš„ç—›ç‚¹ï¼Œæ²¡æƒ³åˆ°æœ€ç»ˆåˆ›é€ äº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„æ—¥æœŸåº“ã€‚</p>
<p>Hora çš„æ ¸å¿ƒè®¾è®¡ç†å¿µå…¶å®å¾ˆç®€å•ï¼š</p>
<ol>
<li><strong>å®ç”¨è‡³ä¸Š</strong> - è§£å†³çœŸå®çš„ä¸šåŠ¡é—®é¢˜ï¼Œè€Œä¸æ˜¯ä¸ºäº†åŠŸèƒ½è€ŒåŠŸèƒ½</li>
<li><strong>æ¸è¿›å¢å¼º</strong> - ä»ç®€å•çš„æ ¼å¼åŒ–å¼€å§‹ï¼ŒæŒ‰éœ€å¼•å…¥é«˜çº§åŠŸèƒ½</li>
<li><strong>ä¿æŒç®€å•</strong> - å¤æ‚çš„å†…éƒ¨å®ç°ï¼Œç®€å•çš„å¤–éƒ¨æ¥å£</li>
<li><strong>æ€§èƒ½ä¼˜å…ˆ</strong> - æ ‘ææ‘‡åŠ¨ã€é›¶ä¾èµ–ï¼Œä¸å½±å“åº”ç”¨æ€§èƒ½</li>
</ol>
<p>å¦‚æœä½ ä¹Ÿé‡åˆ°äº†å’Œæˆ‘ç±»ä¼¼çš„å›°æ‰°ï¼Œå¸Œæœ› Hora èƒ½å¸®ä½ èŠ‚çœæ—¶é—´ï¼Œè®©ä½ ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘è€Œä¸æ˜¯æ—¥æœŸå¤„ç†çš„ç»†èŠ‚ã€‚</p>
<p>è¿™ä¸ªé¡¹ç›®è¿˜åœ¨æŒç»­æ”¹è¿›ä¸­ï¼Œæ¬¢è¿ä»»ä½•åé¦ˆå’Œå»ºè®®ã€‚</p>
<hr/>
<h3 data-id="heading-33">ğŸ¯ é€‚ç”¨åœºæ™¯</h3>
<ul>
<li>âœ… <strong>ä¼ä¸šçº§åº”ç”¨</strong>ï¼šéœ€è¦å¤æ‚çš„ä¸šåŠ¡æ—¥æœŸè®¡ç®—</li>
<li>âœ… <strong>è·¨å¹³å°é¡¹ç›®</strong>ï¼šFlutter Webã€Mobileã€Desktop ç»Ÿä¸€ API</li>
<li>âœ… <strong>å›½é™…åŒ–äº§å“</strong>ï¼š143+ è¯­è¨€å¼€ç®±å³ç”¨</li>
<li>âœ… <strong>æ€§èƒ½æ•æ„Ÿåº”ç”¨</strong>ï¼šè½»é‡çº§å®ç°ï¼Œtree-shakable</li>
</ul>
<h3 data-id="heading-34">ğŸš€ ç«‹å³å¼€å§‹</h3>
<pre><code class="hljs language-bash" lang="bash">dart pub add hora
</code></pre>
<p><strong>GitHub</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffluttercandies%2Fhora" target="_blank" title="https://github.com/fluttercandies/hora" ref="nofollow noopener noreferrer">github.com/fluttercandâ€¦</a><br/>
<strong>Pub.dev</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Fhora" target="_blank" title="https://pub.dev/packages/hora" ref="nofollow noopener noreferrer">pub.dev/packages/hoâ€¦</a><br/>
<strong>æ–‡æ¡£</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fdocumentation%2Fhora%2Flatest%2F" target="_blank" title="https://pub.dev/documentation/hora/latest/" ref="nofollow noopener noreferrer">å®Œæ•´ API æ–‡æ¡£</a></p>
<p>å¦‚æœ Hora å¯¹ä½ çš„é¡¹ç›®æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç»™é¡¹ç›®ç‚¹ä¸ª â­ï¸ Starï¼Œä½ çš„æ”¯æŒæ˜¯æˆ‘æŒç»­å¼€å‘çš„åŠ¨åŠ›ï¼åŒæ—¶ä¹Ÿåˆ«å¿˜äº†åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Fhora" target="_blank" title="https://pub.dev/packages/hora" ref="nofollow noopener noreferrer">Pub.dev</a> ä¸Šç‚¹ä¸ª ğŸ‘ Likeï¼Œè®©æ›´å¤šå¼€å‘è€…å‘ç°è¿™ä¸ªåº“ï¼</p>
<p>è®©æˆ‘ä»¬ä¸€èµ·ï¼Œç”¨ Hora è®©æ—¥æœŸæ—¶é—´å¤„ç†å˜å¾—ç®€å•è€Œä¼˜é›…ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ä¸ªç©ºå‡½æ•°ï¼Œå¦‚ä½•æˆå°± JS ç»§æ‰¿çš„â€œå®Œç¾æ–¹æ¡ˆâ€ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7581306080435486771</link>    <guid>https://juejin.cn/post/7581306080435486771</guid>    <pubDate>2025-12-08T14:50:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581306080435486771" data-draft-id="7581406561685422126" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ä¸ªç©ºå‡½æ•°ï¼Œå¦‚ä½•æˆå°± JS ç»§æ‰¿çš„â€œå®Œç¾æ–¹æ¡ˆâ€ï¼Ÿ"/> <meta itemprop="keywords" content="JavaScript,é¢è¯•,ECMAScript 6"/> <meta itemprop="datePublished" content="2025-12-08T14:50:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xhxxx"/> <meta itemprop="url" content="https://juejin.cn/user/3235201610941578"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ä¸ªç©ºå‡½æ•°ï¼Œå¦‚ä½•æˆå°± JS ç»§æ‰¿çš„â€œå®Œç¾æ–¹æ¡ˆâ€ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3235201610941578/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xhxxx
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T14:50:35.000Z" title="Mon Dec 08 2025 14:50:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    16
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">JavaScript ç»§æ‰¿çš„ç»ˆææ–¹æ¡ˆï¼šå¯„ç”Ÿç»„åˆå¼ç»§æ‰¿è¯¦è§£</h2>
<p>åœ¨ JavaScript çš„ä¸–ç•Œé‡Œï¼Œç»§æ‰¿ä¸€ç›´æ˜¯å¼€å‘è€…ç»•ä¸å¼€çš„è¯é¢˜ã€‚ç”±äºå…¶åŸºäºåŸå‹ï¼ˆprototypeï¼‰çš„ç‹¬ç‰¹æœºåˆ¶ï¼Œå®ç°é«˜æ•ˆã€å®‰å…¨ã€å¯ç»´æŠ¤çš„ç»§æ‰¿å¹¶éæ˜“äº‹ã€‚ä»æ—©æœŸçš„åŸå‹é“¾ç»§æ‰¿ã€æ„é€ å‡½æ•°ç»§æ‰¿ï¼Œåˆ°ç»„åˆç»§æ‰¿ï¼Œå†åˆ°å¦‚ä»Šè¢«å¹¿æ³›æ¨å´‡çš„ <strong>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ï¼ˆParasitic Combination Inheritanceï¼‰</strong> ï¼Œæˆ‘ä»¬ç»ˆäºæ‰¾åˆ°äº†ä¸€ä¸ªè¿‘ä¹å®Œç¾çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>æœ¬æ–‡å°†ç»“åˆå®è·µä¸åŸç†ï¼Œå¸¦ä½ æ·±å…¥ç†è§£ä¸ºä»€ä¹ˆå¯„ç”Ÿç»„åˆå¼ç»§æ‰¿è¢«ç§°ä¸ºâ€œJavaScript ç»§æ‰¿çš„ç»ˆææ–¹æ¡ˆâ€ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€ç»§æ‰¿çš„ç—›ç‚¹ï¼šä¸ºä»€ä¹ˆéœ€è¦â€œç»ˆææ–¹æ¡ˆâ€ï¼Ÿ</h3>
<p>åœ¨ ES6 <code>class</code> è¯­æ³•å‡ºç°ä¹‹å‰ï¼ŒJavaScript çš„ç»§æ‰¿ä¸»è¦ä¾èµ–å‡½æ•°å’ŒåŸå‹ã€‚ä½†æ¯ç§æ–¹å¼éƒ½æœ‰æ˜æ˜¾ç¼ºé™·ï¼š</p>
<h4 data-id="heading-2">1. åŸå‹é“¾ç»§æ‰¿</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Animal</span>(<span class="hljs-params"/>) {}
<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">eat</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) { <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'eating'</span>); };

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Cat</span>(<span class="hljs-params"/>) {}
<span class="hljs-title class_">Cat</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Animal</span>(); <span class="hljs-comment">// âŒ é—®é¢˜ï¼šè°ƒç”¨äº† Animal æ„é€ å‡½æ•°ï¼</span>
</code></pre>
<ul>
<li><strong>ç¼ºç‚¹</strong>ï¼šå¿…é¡»æ‰§è¡Œçˆ¶ç±»æ„é€ å‡½æ•°ï¼Œå¯èƒ½å¸¦æ¥å‰¯ä½œç”¨ï¼ˆå¦‚åˆå§‹åŒ– DOMã€å‘é€è¯·æ±‚ï¼‰ï¼Œä¸”æ— æ³•ä¼ å‚ã€‚</li>
</ul>
<h4 data-id="heading-3">2. æ„é€ å‡½æ•°ç»§æ‰¿</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Cat</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-title class_">Animal</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, name); <span class="hljs-comment">// âœ… å®ä¾‹å±æ€§ç»§æ‰¿</span>
}
</code></pre>
<ul>
<li><strong>ç¼ºç‚¹</strong>ï¼šæ— æ³•ç»§æ‰¿åŸå‹ä¸Šçš„æ–¹æ³•ï¼Œæ–¹æ³•æ— æ³•å¤ç”¨ï¼Œå†…å­˜æµªè´¹ã€‚</li>
</ul>
<h4 data-id="heading-4">3. ç»„åˆç»§æ‰¿ï¼ˆå¸¸ç”¨ä½†æœ‰å†—ä½™ï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Cat</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-title class_">Animal</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, name); <span class="hljs-comment">// ç¬¬ä¸€æ¬¡è°ƒç”¨ Animal</span>
}
<span class="hljs-title class_">Cat</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Animal</span>(); <span class="hljs-comment">// ç¬¬äºŒæ¬¡è°ƒç”¨ Animal âŒ</span>
</code></pre>
<ul>
<li><strong>ç¼ºç‚¹</strong>ï¼šçˆ¶ç±»æ„é€ å‡½æ•°è¢«è°ƒç”¨äº† <strong>ä¸¤æ¬¡</strong>ï¼Œæ•ˆç‡ä½ä¸‹ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-5">äºŒã€å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ï¼šä¼˜é›…çš„è§£å†³æ–¹æ¡ˆ</h3>
<blockquote>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼š</p>
<ul>
<li>ç”¨ <code>Parent.call/apply(this)</code> ç»§æ‰¿<strong>å®ä¾‹å±æ€§</strong>ï¼ˆæ”¯æŒä¼ å‚ã€æ— å‰¯ä½œç”¨ï¼‰</li>
<li>ç”¨ä¸€ä¸ª<strong>ç©ºçš„ä¸­ä»‹å‡½æ•°</strong>ç»§æ‰¿<strong>åŸå‹æ–¹æ³•</strong>ï¼ˆä¸è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼‰</li>
</ul>
</blockquote>
<h4 data-id="heading-6">å®Œæ•´å®ç°</h4>
<pre><code class="hljs language-js" lang="js"> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Animal</span> (name,age){
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
        };
        <span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">species</span> = <span class="hljs-string">'åŠ¨ç‰©'</span>;
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">Cat</span> (name,age,color){
            <span class="hljs-comment">//{} ç©ºå¯¹è±¡ &lt;- this</span>
            <span class="hljs-comment">// </span>
            <span class="hljs-comment">// æ„é€ å‡½æ•°å¼ç»§æ‰¿</span>
            <span class="hljs-comment">// æ‰‹åŠ¨æŒ‡å®š</span>
            <span class="hljs-comment">//Animal.call(this,name,age);</span>
            <span class="hljs-title class_">Animal</span>.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>,[name,age]);<span class="hljs-comment">// æ•°ç»„ä¼ é€’</span>
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">color</span> = color;
            
        }
        <span class="hljs-comment">// </span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">extend</span> (<span class="hljs-title class_">Child</span>,<span class="hljs-title class_">Parent</span>){
            <span class="hljs-keyword">var</span> F = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>){};<span class="hljs-comment">//å‡½æ•°è¡¨è¾¾å¼ æœ‰å¼€é”€ä½†ä¸å¤§</span>
             F.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Parent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>;
             <span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_">F</span>();<span class="hljs-comment">// å®ä¾‹çš„ä¿®æ”¹ï¼Œä¸ä¼šå½±å“åˆ°åŸå‹å¯¹è±¡</span>
             <span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Child</span>;
        }
        <span class="hljs-title function_">extend</span>(<span class="hljs-title class_">Cat</span>,<span class="hljs-title class_">Animal</span>);
        <span class="hljs-title class_">Cat</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">eat</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åƒ'</span>);
        }
        <span class="hljs-keyword">const</span> cat = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>(<span class="hljs-string">'å°ç™½'</span>,<span class="hljs-number">2</span>,<span class="hljs-string">'é»‘è‰²'</span>);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(cat.<span class="hljs-property">species</span>);
</code></pre>
<p><em><strong>å…³é”®ç‚¹è§£æï¼š</strong></em></p>
<ol>
<li>
<p><strong>ä¸ºä»€ä¹ˆä½¿ç”¨ç©ºå‡½æ•° <code>F</code>ï¼Ÿ</strong><br/>
ç©ºå‡½æ•° <code>F</code> çš„å”¯ä¸€ä½œç”¨æ˜¯ä½œä¸ºä¸€ä¸ªâ€œä¸­ä»‹æ¡¥æ¢â€ã€‚å®ƒæœ¬èº«ä¸æ‰§è¡Œä»»ä½•é€»è¾‘ï¼ˆæ— å‰¯ä½œç”¨ï¼‰ï¼Œä½†é€šè¿‡ <code>new F()</code> åˆ›å»ºçš„å¯¹è±¡ä¼šè‡ªåŠ¨å°†å…¶å†…éƒ¨åŸå‹ï¼ˆ<code>[[Prototype]]</code>ï¼‰æŒ‡å‘ <code>F.prototype</code>ã€‚å½“æˆ‘ä»¬æŠŠ <code>F.prototype</code> è®¾ç½®ä¸º <code>Parent.prototype</code> æ—¶ï¼Œè¿™ä¸ªæ–°å¯¹è±¡å°±æˆä¸ºäº†ä¸€ä¸ª<strong>è‡ªèº«ä¸ºç©ºã€ä½†èƒ½è®¿é—®çˆ¶ç±»æ‰€æœ‰åŸå‹æ–¹æ³•çš„ä»£ç†å¯¹è±¡</strong>ã€‚</p>
</li>
<li>
<p><strong><code>Child.prototype = new F()</code> çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/>
è¿™è¡Œä»£ç åˆ›å»ºäº†ä¸€ä¸ªâ€œå¹²å‡€â€çš„åŸå‹å¯¹è±¡ï¼š</p>
<ul>
<li>å®ƒ<strong>ä¸æ˜¯</strong>Â <code>Parent</code>Â çš„å®ä¾‹ï¼ˆä¸ä¼šè°ƒç”¨Â <code>Parent</code>Â æ„é€ å‡½æ•°ï¼‰</li>
<li>å®ƒ<strong>è‡ªèº«æ²¡æœ‰å±æ€§</strong>ï¼ˆé¿å…æ±¡æŸ“å­ç±»åŸå‹ï¼‰</li>
<li>å®ƒçš„Â <code>__proto__</code>Â æŒ‡å‘Â <code>Parent.prototype</code>ï¼Œå› æ­¤èƒ½é€šè¿‡åŸå‹é“¾è®¿é—®æ‰€æœ‰çˆ¶ç±»æ–¹æ³•</li>
<li>è¿™ç›¸å½“äºç°ä»£å†™æ³•ï¼š<code>Object.create(Parent.prototype)</code></li>
</ul>
</li>
<li>
<p><strong>å®ä¾‹å±æ€§ vs åŸå‹æ–¹æ³•çš„åˆ†ç¦»ç»§æ‰¿</strong></p>
<ul>
<li><strong>å®ä¾‹å±æ€§</strong>ï¼ˆå¦‚Â <code>name</code>,Â <code>age</code>,Â <code>color</code>ï¼‰é€šè¿‡Â <code>Animal.apply(this, [name, age])</code>Â åœ¨å­ç±»æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–ï¼Œæ¯ä¸ªå®ä¾‹ç‹¬ç«‹ï¼Œæ”¯æŒä¼ å‚ã€‚</li>
<li><strong>åŸå‹æ–¹æ³•/å…±äº«å±æ€§</strong>ï¼ˆå¦‚Â <code>species</code>,Â <code>eat</code>ï¼‰é€šè¿‡åŸå‹é“¾ç»§æ‰¿ï¼Œæ‰€æœ‰å®ä¾‹å…±äº«ï¼ŒèŠ‚çœå†…å­˜ã€‚</li>
<li>ä¸¤è€…è§£è€¦ï¼Œå„å¸å…¶èŒï¼Œäº’ä¸å¹²æ‰°ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆè¯´â€œå®ä¾‹çš„ä¿®æ”¹ä¸ä¼šå½±å“åˆ°åŸå‹å¯¹è±¡â€ï¼Ÿ</strong><br/>
å› ä¸º <code>Cat.prototype</code> æ˜¯ä¸€ä¸ª<strong>ç‹¬ç«‹çš„æ–°å¯¹è±¡</strong>ï¼ˆç”± <code>new F()</code> åˆ›å»ºï¼‰ï¼Œå®ƒåªæ˜¯<strong>é“¾æ¥åˆ°</strong> <code>Animal.prototype</code>ï¼Œè€Œéä¸ä¹‹ç›¸ç­‰ã€‚<br/>
æ‰€ä»¥ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Cat</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">meow</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {};
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">meow</span>); <span class="hljs-comment">// undefined âœ… å®‰å…¨éš”ç¦»</span>
</code></pre>
<p>è€Œå¦‚æœç›´æ¥å†™ <code>Cat.prototype = Animal.prototype</code>ï¼Œå°±ä¼šé€ æˆåŸå‹æ±¡æŸ“ã€‚</p>
</li>
<li>
<p><strong>æ€§èƒ½ä¸å®‰å…¨æ€§åŒèµ¢</strong></p>
<ul>
<li>çˆ¶ç±»æ„é€ å‡½æ•°<strong>ä»…åœ¨å­ç±»å®ä¾‹åŒ–æ—¶è°ƒç”¨ä¸€æ¬¡</strong>ï¼ˆé€šè¿‡Â <code>apply/call</code>ï¼‰</li>
<li>åŸå‹æ–¹æ³•<strong>é›¶å¤åˆ¶ã€é›¶å†—ä½™</strong>ï¼Œå®Œå…¨å¤ç”¨</li>
<li>æ— å‰¯ä½œç”¨ã€æ— å†…å­˜æµªè´¹ã€ç±»å‹ç³»ç»Ÿå®Œæ•´</li>
</ul>
</li>
</ol>
<blockquote>
<p>è™½ç„¶<code>Child.prototype.constructor = Child;</code>è¿™è¡Œä»£ç ä¾ç„¶ä¼šå°†fçš„constructorä¿®æ”¹ä¸ºChildï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸å…³å¿ƒå®ƒï¼Œå› ä¸ºæˆ‘ä»¬åˆ›å»ºå®ƒçš„åˆè¡·å°±æ˜¯åˆ©ç”¨å®ƒå°†Childè¿æ¥åˆ°Animalçš„åŸå‹é“¾ä¸Šï¼Œè‡³äºfæœ€åæ€ä¹ˆæ ·æˆ‘ä»¬å¹¶ä¸å…³å¿ƒ</p>
</blockquote>
<hr/>
<h3 data-id="heading-7">ä¸‰ã€ä¸ºä»€ä¹ˆå®ƒæ˜¯â€œç»ˆææ–¹æ¡ˆâ€ï¼Ÿ</h3>



































<table><thead><tr><th>ç‰¹æ€§</th><th>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿</th><th>å…¶ä»–æ–¹å¼</th></tr></thead><tbody><tr><td>âœ… ä¸é‡å¤è°ƒç”¨çˆ¶æ„é€ å‡½æ•°</td><td>âœ”ï¸ åªåœ¨ <code>call</code> æ—¶è°ƒç”¨ä¸€æ¬¡</td><td>ç»„åˆç»§æ‰¿è°ƒç”¨ä¸¤æ¬¡</td></tr><tr><td>âœ… æ”¯æŒä¼ å‚</td><td>âœ”ï¸</td><td>åŸå‹é“¾ç»§æ‰¿ä¸æ”¯æŒ</td></tr><tr><td>âœ… æ–¹æ³•å¤ç”¨</td><td>âœ”ï¸ æ‰€æœ‰å®ä¾‹å…±äº«åŸå‹æ–¹æ³•</td><td>æ„é€ å‡½æ•°ç»§æ‰¿æ— æ³•å¤ç”¨</td></tr><tr><td>âœ… åŸå‹é“¾å®Œæ•´</td><td>âœ”ï¸ <code>instanceof</code> æ­£ç¡®</td><td>å¤šæ•°æ–¹å¼å¯åšåˆ°</td></tr><tr><td>âœ… æ— å‰¯ä½œç”¨</td><td>âœ”ï¸ ä¸æ‰§è¡Œ <code>new Parent()</code></td><td>åŸå‹é“¾/ç»„åˆç»§æ‰¿ä¼šæ‰§è¡Œ</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>å…³é”®ä¼˜åŠ¿</strong>ï¼šé€šè¿‡ç©ºå‡½æ•° <code>F</code> ä½œä¸ºä¸­ä»‹ï¼Œ<strong>åªç»§æ‰¿åŸå‹ï¼Œä¸æ‰§è¡Œçˆ¶ç±»æ„é€ é€»è¾‘</strong>ï¼Œæ—¢å®‰å…¨åˆé«˜æ•ˆã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-8">å››ã€åŸç†å›¾è§£</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Cat</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> (<span class="hljs-keyword">new</span> <span class="hljs-title function_">F</span>())
    â”‚
    â””â”€ [[<span class="hljs-title class_">Prototype</span>]] â†’ F.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>
                            â”‚
                            â”œ
                            â””â”€ <span class="hljs-attr">constructor</span>: <span class="hljs-title class_">Animal</span>

<span class="hljs-comment">// ä¿®å¤åï¼š</span>
<span class="hljs-title class_">Cat</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Cat</span>
</code></pre>
<ul>
<li><code>Cat.prototype</code> æ˜¯ä¸€ä¸ª<strong>ç©ºå£³å¯¹è±¡</strong>ï¼Œè‡ªèº«æ— å±æ€§</li>
<li>ä½†å®ƒé€šè¿‡åŸå‹é“¾<strong>æ— ç¼è®¿é—®</strong> <code>Animal.prototype</code> çš„æ‰€æœ‰æ–¹æ³•</li>
<li>æ¯ä¸ª <code>new Cat()</code> å®ä¾‹é€šè¿‡ <code>Animal.apply(this)</code> åˆå§‹åŒ–è‡ªå·±çš„å±æ€§ï¼Œäº’ä¸å¹²æ‰°</li>
</ul>
<hr/>
<h3 data-id="heading-9">äº”ã€ç°ä»£æ›¿ä»£ï¼šES6 <code>class</code> ä¹Ÿæ˜¯è¿™ä¹ˆå¹²çš„ï¼</h3>
<p>è™½ç„¶æˆ‘ä»¬ç°åœ¨å¸¸ç”¨ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) { <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name; }
  <span class="hljs-title function_">sayName</span>(<span class="hljs-params"/>) { <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`I am <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>); }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name, color</span>) {
    <span class="hljs-variable language_">super</span>(name);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">color</span> = color;
  }
  <span class="hljs-title function_">meow</span>(<span class="hljs-params"/>) { <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Meow!'</span>); }
}
</code></pre>
<p>ä½†ä½ çŸ¥é“å—ï¼Ÿ<strong><code>extends</code> åœ¨åº•å±‚æ­£æ˜¯é‡‡ç”¨äº†å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿çš„æ€æƒ³</strong>ï¼<br/>
Babel ç¼–è¯‘åçš„ä»£ç å‡ ä¹å°±æ˜¯æˆ‘ä»¬ä¸Šé¢æ‰‹å†™çš„ <code>extend</code> æ¨¡å¼ã€‚</p>
<p>æ‰€ä»¥ï¼Œç†è§£å¯„ç”Ÿç»„åˆç»§æ‰¿ï¼Œå°±æ˜¯ç†è§£ç°ä»£ JavaScript ç»§æ‰¿çš„æœ¬è´¨ã€‚</p>
<hr/>
<h3 data-id="heading-10">å…­ã€æ€»ç»“</h3>
<ul>
<li><strong>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ = æ„é€ å‡½æ•°ç»§æ‰¿ï¼ˆå®ä¾‹å±æ€§ï¼‰ + å¯„ç”Ÿå¼åŸå‹ç»§æ‰¿ï¼ˆåŸå‹æ–¹æ³•ï¼‰</strong></li>
<li>å®ƒè§£å†³äº†æ‰€æœ‰ä¼ ç»Ÿç»§æ‰¿æ–¹å¼çš„ç—›ç‚¹ï¼Œæ˜¯ <strong>ES5 æ—¶ä»£æœ€æ¨èçš„ç»§æ‰¿æ¨¡å¼</strong></li>
<li>å³ä½¿åœ¨ ES6+ æ—¶ä»£ï¼Œç†è§£å®ƒä¾ç„¶è‡³å…³é‡è¦â€”â€”å› ä¸º <code>class</code> åªæ˜¯è¯­æ³•ç³–ï¼Œåº•å±‚é€»è¾‘ä¸å˜</li>
<li>å¦‚æœä½ åœ¨é˜…è¯»è€é¡¹ç›®æˆ–é¢è¯•ä¸­é‡åˆ°ç»§æ‰¿é—®é¢˜ï¼Œè¿™å¥—æ–¹æ¡ˆå°±æ˜¯ä½ çš„â€œç»ˆææ­¦å™¨â€</li>
</ul>
<blockquote>
<p>ğŸŒŸ <strong>è®°ä½è¿™ä¸ªæ¨¡æ¿</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">extend</span>(<span class="hljs-params">Child, Parent</span>) {
  <span class="hljs-keyword">const</span> F = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {};
  F.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Parent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>;
  <span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_">F</span>();
  <span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Child</span>;
}
</code></pre>
</blockquote>
<p>æŒæ¡å®ƒï¼Œä½ å°±æŒæ¡äº† JavaScript ç»§æ‰¿çš„ç²¾é«“ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3 æºç å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰ï¼šç¯å¢ƒæ­å»ºä¸åˆè¯†Monorepo]]></title>    <link>https://juejin.cn/post/7581324171398512686</link>    <guid>https://juejin.cn/post/7581324171398512686</guid>    <pubDate>2025-12-08T14:36:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581324171398512686" data-draft-id="7580280096059588635" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3 æºç å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰ï¼šç¯å¢ƒæ­å»ºä¸åˆè¯†Monorepo"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2025-12-08T14:36:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åƒç´ æ°´è—»ç "/> <meta itemprop="url" content="https://juejin.cn/user/121402470704827"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3 æºç å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰ï¼šç¯å¢ƒæ­å»ºä¸åˆè¯†Monorepo
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/121402470704827/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åƒç´ æ°´è—»ç 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T14:36:12.000Z" title="Mon Dec 08 2025 14:36:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€ ä¸ºå•¥æƒ³å­¦ä¹ æºç ï¼Ÿ</h2>
<p>åœ¨è¿™ä¸ªAIè§¦æ‰‹å¯åŠçš„æ—¶ä»£ï¼Œè§£å†³é—®é¢˜å˜å¾—å‰æ‰€æœªæœ‰çš„ç®€å•â€”â€”æé—®ã€å¤åˆ¶ã€ç²˜è´´ã€å®Œæˆã€‚ä½œä¸ºCRUDå¼€å‘è€…ï¼Œæˆ‘ä»¬ç†Ÿç»ƒåœ°æ¬è¿ä»£ç ï¼Œå´å¾ˆå°‘è¿½é—®å®ƒä»¬ä¸ºä½•è¿™æ ·å·¥ä½œã€‚ä¹…è€Œä¹…ä¹‹ï¼ŒæŠ€æœ¯å˜æˆäº†é»‘ç›’ï¼Œå¥½å¥‡å¿ƒä¹Ÿåœ¨é‡å¤ä¸šåŠ¡ä¸­é€æ¸è¤ªå»ã€‚</p>
<p>ä¸€æ¬¡å¶ç„¶çš„æœºä¼šï¼Œæ¥è§¦åˆ°<strong>è¿œæ–¹ os</strong>çš„æºç è¯¾ç¨‹ï¼Œå¼€å§‹å­¦ä¹ Vue3çš„æºç å®ç°ã€‚å¸Œæœ›æŠŠè¿™æ®µæ—¶é—´çš„ç–‘é—®å’Œæ”¶è·æ•´ç†æˆç¬”è®°ï¼Œä½œä¸ºè‡ªå·±è¿™æ®µå­¦ä¹ æ—…ç¨‹çš„ä¸€ä»½çºªå¿µã€‚</p>
<h3 data-id="heading-1">ç¯å¢ƒæ­å»º</h3>
<p>Vue3 æºç æœ¬èº«å°±æ˜¯é‡‡ç”¨ Monorepo æ¶æ„ç®¡ç†ï¼Œæ‰€æœ‰æ ¸å¿ƒæ¨¡å—ï¼ˆå¦‚ reactivityã€runtime-coreã€compiler-core ç­‰ï¼‰éƒ½æ”¾åœ¨Â <code>packages</code>Â ç›®å½•ä¸‹ã€‚</p>
<h4 data-id="heading-2">æ ¸å¿ƒé…ç½®</h4>
<ul>
<li><strong>Monorepo</strong>ï¼šå•ä»“åº“ç®¡ç†å¤šä¸ªå­åŒ…ï¼Œèƒ½æ›´æ–¹ä¾¿åœ°ç®¡ç†æ¨¡å—é—´çš„ä¾èµ–ã€ç»Ÿä¸€ç‰ˆæœ¬</li>
<li><strong>pnpm workspace</strong>ï¼špnpm å†…ç½®çš„ Monorepo å·¥å…·ï¼Œç‰¹ç‚¹æ˜¯<strong>å­åŒ…æœ¬åœ°è½¯é“¾ã€å‘½ä»¤è½»é‡é«˜æ•ˆ</strong>ã€‚</li>
</ul>
<h4 data-id="heading-3">åˆå§‹åŒ–é¡¹ç›®</h4>
<ol>
<li>æœ¬åœ°åˆ›å»ºä¸€ä¸ªVue3æ–‡ä»¶å¤¹,æ‰§è¡Œ<code>pnpm init</code></li>
<li>æ–°å»º<code>pnpm workspace.yaml</code></li>
</ol>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">packages:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">"packages/*"</span> 
</code></pre>
<ol start="3">
<li>åˆ›å»º<code>packages</code>ç›®å½•ç»Ÿä¸€ç®¡ç†å­é¡¹</li>
<li>æ‰§è¡Œ<code>pnpm install typescript -D -w</code>, å®‰è£…åˆ°æ ¹ç›®å½•</li>
<li>åˆå§‹åŒ–<code>tsé…ç½®</code>,æ‰§è¡Œ<code>npx tsc --init </code></li>
</ol>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// é…ç½®</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-comment">// ç¼–è¯‘ç›®æ ‡ï¼šä½¿ç”¨æœ€æ–°çš„ ECMAScript ç‰ˆæœ¬</span>
    <span class="hljs-comment">// ç”Ÿæˆçš„ JavaScript ä»£ç ä¼šåŒ…å«æœ€æ–°çš„ ES ç‰¹æ€§</span>
    <span class="hljs-attr">"target"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ESNext"</span><span class="hljs-punctuation">,</span>

    <span class="hljs-comment">// æ¨¡å—ç³»ç»Ÿï¼šä½¿ç”¨ ES æ¨¡å—æ ¼å¼ï¼ˆimport/exportï¼‰</span>
    <span class="hljs-comment">// é€‚ç”¨äºç°ä»£æµè§ˆå™¨å’Œæ‰“åŒ…å·¥å…·</span>
    <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ESNext"</span><span class="hljs-punctuation">,</span>

    <span class="hljs-comment">// æ¨¡å—è§£æç­–ç•¥ï¼šä½¿ç”¨ Node.js é£æ ¼çš„æ¨¡å—è§£æ</span>
    <span class="hljs-comment">// ä¼šåœ¨ node_modules ä¸­æŸ¥æ‰¾ä¾èµ–</span>
    <span class="hljs-attr">"moduleResolution"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node"</span><span class="hljs-punctuation">,</span>

    <span class="hljs-comment">// è¾“å‡ºç›®å½•ï¼šç¼–è¯‘åçš„ JavaScript æ–‡ä»¶å°†æ”¾åœ¨ dist æ–‡ä»¶å¤¹ä¸­</span>
    <span class="hljs-attr">"outDir"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dist"</span><span class="hljs-punctuation">,</span>

    <span class="hljs-comment">// å…è®¸å¯¼å…¥ JSON æ–‡ä»¶ä½œä¸ºæ¨¡å—</span>
    <span class="hljs-attr">"resolveJsonModule"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>

    <span class="hljs-comment">// ä¸¥æ ¼æ¨¡å¼ï¼šè®¾ç½®ä¸º falseï¼Œå…³é—­æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥</span>
    <span class="hljs-comment">// æä¾›æ›´å®½æ¾çš„ç±»å‹æ£€æŸ¥ï¼Œé€‚åˆå¿«é€Ÿå¼€å‘</span>
    <span class="hljs-attr">"strict"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>

    <span class="hljs-comment">// åŒ…å«çš„åº“æ–‡ä»¶ï¼šESNextï¼ˆæœ€æ–° ES ç‰¹æ€§ï¼‰å’Œ DOMï¼ˆæµè§ˆå™¨ APIï¼‰</span>
    <span class="hljs-attr">"lib"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"ESNext"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"DOM"</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ol start="6">
<li>æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªÂ <code>scripts/dev.js</code></li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * æ‰“åŒ…å¼€å‘ç¯å¢ƒ
 *
 * node script/dev.js --format or cjs
 */</span>
<span class="hljs-keyword">import</span> { parseArgs } <span class="hljs-keyword">from</span> <span class="hljs-string">'node:util'</span>
<span class="hljs-keyword">import</span> { resolve, dirname } <span class="hljs-keyword">from</span> <span class="hljs-string">'node:path'</span>
<span class="hljs-keyword">import</span> { fileURLToPath } <span class="hljs-keyword">from</span> <span class="hljs-string">'node:url'</span>
<span class="hljs-keyword">import</span>  esbuild <span class="hljs-keyword">from</span> <span class="hljs-string">'esbuild'</span>
<span class="hljs-keyword">import</span> { createRequire } <span class="hljs-keyword">from</span> <span class="hljs-string">'node:module'</span>

<span class="hljs-comment">/**
 * è§£æå‘½ä»¤è¡Œå‚æ•°
 */</span>
<span class="hljs-keyword">const</span> { <span class="hljs-attr">values</span>: { format }, positionals } = <span class="hljs-title function_">parseArgs</span>({
    <span class="hljs-attr">allowPositionals</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">options</span>: {
        <span class="hljs-attr">format</span>: {
            <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>,
            <span class="hljs-attr">short</span>: <span class="hljs-string">'f'</span>,
            <span class="hljs-attr">default</span>: <span class="hljs-string">'esm'</span>,
        },
    },
})

<span class="hljs-comment">//  åˆ›å»º esm çš„ __filename</span>
<span class="hljs-keyword">const</span> __filename = <span class="hljs-title function_">fileURLToPath</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>)
<span class="hljs-comment">//  åˆ›å»º esm çš„ __dirname</span>
<span class="hljs-keyword">const</span>  __dirname = <span class="hljs-title function_">dirname</span>(__filename)

<span class="hljs-keyword">const</span>  <span class="hljs-built_in">require</span>  = <span class="hljs-title function_">createRequire</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>)

<span class="hljs-keyword">const</span>  target = positionals.<span class="hljs-property">length</span> ? positionals[<span class="hljs-number">0</span>] : <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// æ„å»ºå…¥å£æ–‡ä»¶è·¯å¾„ï¼š../packages/åŒ…å/src/index.ts</span>
<span class="hljs-keyword">const</span>  entry = <span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">`../packages/<span class="hljs-subst">${target}</span>/src/index.ts`</span>)

<span class="hljs-comment">/**
 * --format cjs or esm
 * æ„å»ºè¾“å‡ºæ–‡ä»¶è·¯å¾„ï¼š../packages/åŒ…å/dist/åŒ…å.æ ¼å¼index.js
 * ä¾‹å¦‚ï¼špackages/vue/dist/vue.cjsindex.js æˆ– packages/vue/dist/vue.esmindex.js
 */</span>
<span class="hljs-keyword">const</span>  outfile = <span class="hljs-title function_">resolve</span>(
    __dirname,
    <span class="hljs-string">`../packages/<span class="hljs-subst">${target}</span>/dist/<span class="hljs-subst">${target}</span>.<span class="hljs-subst">${format}</span>index.js`</span>
)
<span class="hljs-comment">// è¯»å–ç›®æ ‡åŒ…çš„package.jsonæ–‡ä»¶</span>
<span class="hljs-keyword">const</span> pkg = <span class="hljs-built_in">require</span>(<span class="hljs-string">`../packages/<span class="hljs-subst">${target}</span>/package.json`</span>)

<span class="hljs-comment">// ä½¿ç”¨esbuildåˆ›å»ºæ„å»ºä¸Šä¸‹æ–‡å¹¶å¯åŠ¨ç›‘å¬æ¨¡å¼</span>
esbuild.<span class="hljs-title function_">context</span>({
    <span class="hljs-attr">entryPoints</span>: [entry],  <span class="hljs-comment">// æŒ‡å®šå…¥å£æ–‡ä»¶</span>
    outfile,               <span class="hljs-comment">// æŒ‡å®šè¾“å‡ºæ–‡ä»¶</span>
    format,                <span class="hljs-comment">// æ‰“åŒ…æ ¼å¼ï¼š'cjs' æˆ– 'esm'</span>
    <span class="hljs-attr">platform</span>: format === <span class="hljs-string">'cjs'</span> ? <span class="hljs-string">'node'</span> : <span class="hljs-string">'browser'</span>, <span class="hljs-comment">// æ ¹æ®æ ¼å¼é€‰æ‹©å¹³å°ï¼šcjsç”¨nodeï¼Œesmç”¨browser</span>
    <span class="hljs-attr">sourcemap</span>: <span class="hljs-literal">true</span>,       <span class="hljs-comment">// ç”Ÿæˆsourcemapæ–‡ä»¶ï¼Œä¾¿äºè°ƒè¯•</span>
    <span class="hljs-attr">bundle</span>: <span class="hljs-literal">true</span>,          <span class="hljs-comment">// å°†ä¾èµ–æ‰“åŒ…åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­</span>
    <span class="hljs-attr">globalName</span>: pkg.<span class="hljs-property">buildOptions</span>?.<span class="hljs-property">name</span> <span class="hljs-comment">// ä»package.jsonä¸­è¯»å–å…¨å±€å˜é‡åï¼ˆç”¨äºUMDæ ¼å¼ï¼‰</span>
}).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">ctx</span> =&gt;</span> ctx.<span class="hljs-title function_">watch</span>())  <span class="hljs-comment">// å¯åŠ¨ç›‘å¬æ¨¡å¼ï¼Œæ–‡ä»¶å˜åŒ–æ—¶è‡ªåŠ¨é‡æ–°æ„å»º</span>
</code></pre>
<ol start="7">
<li><code>packages</code>ç›®å½•æ–°å»º<code>reactivityã€sharedã€vue</code>æ–‡ä»¶å¤¹
<ul>
<li><code>reactivity</code>ï¼šå“åº”å¼æ¨¡å—</li>
<li><code>shared</code>ï¼šå·¥å…·å‡½æ•°æ¨¡å—</li>
<li><code>vue</code>ï¼švueæ ¸å¿ƒåŒ…</li>
</ul>
</li>
</ol>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// package.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"@vue/reactivity"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å“åº”å¼æ¨¡å—"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"main"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"iist/reactivity.cjs.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dist/reactivity.esm.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"files"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"index.js"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"dist"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"sideEffects"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"buildOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"VueReactivity"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"formats"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"esm-bundler"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"esm-browser"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"cjs"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"global"</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// package.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"@vue/shared"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å·¥å…·å‡½æ•°"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"main"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dist/shared.cjs.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dist/shared.esm.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"files"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"index.js"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"dist"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"sideEffects"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"buildOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"VueShared"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"formats"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"esm-bundler"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"esm-browser"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"cjs"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"global"</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vue"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vueæ ¸å¿ƒåŒ…"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"main"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dist/vue.cjs.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dist/vue.esm.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"files"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"dist"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"sideEffects"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"buildOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Vue"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"formats"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"esm-bundler"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"esm-browser"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"cjs"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"global"</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ol start="8">
<li>æ ¹ç›®å½•<code>package.json</code>æ·»åŠ <code>node scripts/dev.js reactivity --format cjs</code></li>
</ol>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vue3æºç "</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"module"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"main"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"index.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node scripts/dev.js reactivity --format cjs"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"keywords"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"author"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"license"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ISC"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"@types/node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^24.3.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"esbuild"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^0.25.9"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"prettier"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^3.6.2"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"typescript"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^5.9.2"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"vue"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^3.5.21"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-4">éªŒè¯è¾“å‡º</h4>
<ul>
<li>æ–°å»º<code>reactivity/src/index.ts</code></li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æµ‹è¯•å‡½æ•°</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">a,b</span>) {
  <span class="hljs-keyword">return</span> a + b
}
</code></pre>
<ul>
<li>æ‰§è¡Œ<code>pnpm dev</code>ï¼Œåœ¨<code>reactivity/dist</code>ç›®å½•è¾“å‡ºå¦‚ä¸‹</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a5988b5a2da477eace8bc588500b5cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YOP57Sg5rC06Je756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765809744&amp;x-signature=AY2cw2xvVHqej%2B5B9AXXeVDkrlU%3D" alt="å¾®ä¿¡å›¾ç‰‡_20251208211758_6_6.png" loading="lazy"/></p>
<p>åˆ°è¿™ä¸€æ­¥ï¼Œé¡¹ç›®æ­å»ºå®Œæˆï¼</p>
<ul>
<li>é¡¹ç›®ç»“æ„</li>
</ul>
<pre><code class="hljs language-md" lang="md">Vue3/
â”œâ”€â”€ node<span class="hljs-emphasis">_modules/              # Node.js ä¾èµ–æ¨¡å—
â”œâ”€â”€ packages/                  # å¤šåŒ…å·¥ä½œåŒº
â”‚   â”œâ”€â”€ reactivity/           # å“åº”å¼ç³»ç»ŸåŒ…
â”‚   â”‚   â”œâ”€â”€ dist/            # æ„å»ºè¾“å‡ºç›®å½•
â”‚   â”‚   â”œâ”€â”€ src/             # æºä»£ç ç›®å½•
â”‚   â”‚   â”‚   â””â”€â”€ index.ts     # å“åº”å¼ç³»ç»Ÿå…¥å£æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ package.json     # reactivity åŒ…é…ç½®
â”‚   â”œâ”€â”€ shared/              # å…±äº«å·¥å…·åŒ…
â”‚   â”‚   â”œâ”€â”€ src/             # å…±äº«ä»£ç æºä»£ç 
â”‚   â”‚   â””â”€â”€ package.json     # shared åŒ…é…ç½®
â”‚   â””â”€â”€ vue/                 # Vue ä¸»åŒ…
â”‚       â”œâ”€â”€ src/             # Vue æºä»£ç 
â”‚       â””â”€â”€ package.json     # vue åŒ…é…ç½®
â”œâ”€â”€ scripts/                  # æ„å»ºè„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ dev.js               # å¼€å‘æ„å»ºè„šæœ¬
â”‚   â””â”€â”€ .prettierrc          # Prettier ä»£ç æ ¼å¼åŒ–é…ç½®
â”œâ”€â”€ package.json             # é¡¹ç›®æ ¹é…ç½®
â”œâ”€â”€ pnpm-lock.yaml           # pnpm ä¾èµ–é”æ–‡ä»¶
â”œâ”€â”€ pnpm-workspace.yaml      # pnpm å·¥ä½œåŒºé…ç½®
â”œâ”€â”€ tsconfig.json            # TypeScript é…ç½®
â”œâ”€â”€ External Libraries/      # å¤–éƒ¨åº“ï¼ˆIDE ç”Ÿæˆï¼‰
â””â”€â”€ Scratches and Consoles/ # ä¸´æ—¶æ–‡ä»¶å’Œç»ˆç«¯ï¼ˆIDE åŠŸèƒ½ï¼‰
</span></code></pre>
<p><strong>ç›¸å…³é“¾æ¥</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvuejs%2Fcore" target="_blank" title="https://github.com/vuejs/core" ref="nofollow noopener noreferrer">Vue3 å®˜æ–¹ä»“åº“</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpnpm.io%2Fworkspaces" target="_blank" title="https://pnpm.io/workspaces" ref="nofollow noopener noreferrer">pnpm å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fesbuild.github.io%2F" target="_blank" title="https://esbuild.github.io/" ref="nofollow noopener noreferrer">esbuild å®˜ç½‘</a></li>
</ul>
<p><em>ï¼ˆæ³¨ï¼šæœ¬æ–‡ä¸ºå­¦ä¹ ç¬”è®°ï¼Œå¦‚æœ‰ç†è§£ä¸å½“ä¹‹å¤„ï¼Œæ¬¢è¿æŒ‡æ­£äº¤æµã€‚ï¼‰</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Reactä¸­çš„'æ’æ§½']]></title>    <link>https://juejin.cn/post/7581350888788852772</link>    <guid>https://juejin.cn/post/7581350888788852772</guid>    <pubDate>2025-12-08T15:10:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581350888788852772" data-draft-id="7581350888788836388" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Reactä¸­çš„'æ’æ§½'"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-08T15:10:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†™ä»£ç çš„çš®ç­è‰‡"/> <meta itemprop="url" content="https://juejin.cn/user/4196178024218520"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Reactä¸­çš„'æ’æ§½'
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4196178024218520/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†™ä»£ç çš„çš®ç­è‰‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T15:10:19.000Z" title="Mon Dec 08 2025 15:10:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ä¸€ã€æœ€åŸºç¡€çš„ï¼š<code>children</code>Â propï¼ˆé»˜è®¤æ’æ§½ï¼‰</strong></h2>
<h3 data-id="heading-1"><strong>åŸºæœ¬ç”¨æ³•</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// çˆ¶ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Card</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>è¿™æ˜¯æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™æ˜¯å†…å®¹...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>ç‚¹å‡»<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Card</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// å­ç»„ä»¶ Cardï¼ˆç±»ä¼¼ Vue çš„é»˜è®¤æ’æ§½ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Card</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"card"</span>&gt;</span>
      {children}  {/* è¿™é‡Œå°±æ˜¯æ’æ§½ä½ç½® */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-2"><strong>å¤„ç†æ²¡æœ‰ children çš„æƒ…å†µ</strong></h3>
<p>jsx</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Card</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"card"</span>&gt;</span>
      {children || <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>é»˜è®¤å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h2 data-id="heading-3"><strong>äºŒã€å‘½åæ’æ§½ï¼ˆç±»ä¼¼ Vue çš„å…·åæ’æ§½ï¼‰</strong></h2>
<h3 data-id="heading-4"><strong>æ–¹æ³•1ï¼šä½¿ç”¨å¤šä¸ª props</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å­ç»„ä»¶ï¼šå®šä¹‰å¤šä¸ªæ’æ§½ä½ç½®</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Layout</span>(<span class="hljs-params">{ header, sidebar, content, footer }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"layout"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"header"</span>&gt;</span>{header}<span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">aside</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"sidebar"</span>&gt;</span>{sidebar}<span class="hljs-tag">&lt;/<span class="hljs-name">aside</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"content"</span>&gt;</span>{content}<span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">footer</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"footer"</span>&gt;</span>{footer}<span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// çˆ¶ç»„ä»¶ä½¿ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Layout</span>
      <span class="hljs-attr">header</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">h1</span>&gt;</span>ç½‘ç«™æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>}
      sidebar={
        <span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/"</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/about"</span>&gt;</span>å…³äº<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
      }
      content={<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ä¸»è¦å†…å®¹åŒºåŸŸ...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>}
      footer={<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç‰ˆæƒä¿¡æ¯ Â© 2024<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>}
    /&gt;</span>
  );
}
</code></pre>
<h3 data-id="heading-5"><strong>æ–¹æ³•2ï¼šä½¿ç”¨ children å¯¹è±¡ï¼ˆæ›´æ¥è¿‘ Vue è¯­æ³•ï¼‰</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å­ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Card</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-comment">// children å¯ä»¥æ˜¯å¯¹è±¡</span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"card"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"card-header"</span>&gt;</span>
        {children.header || <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>é»˜è®¤æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"card-body"</span>&gt;</span>
        {children.body || <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>é»˜è®¤å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"card-footer"</span>&gt;</span>
        {children.footer}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// çˆ¶ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Card</span>&gt;</span>
      {{
        header: <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>è‡ªå®šä¹‰æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>,
        body: <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è‡ªå®šä¹‰å†…å®¹...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>,
        footer: <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>ç¡®è®¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      }}
    <span class="hljs-tag">&lt;/<span class="hljs-name">Card</span>&gt;</span></span>
  );
}
</code></pre>
<h2 data-id="heading-6"><strong>ä¸‰ã€ä½œç”¨åŸŸæ’æ§½ï¼ˆå¸¦æ•°æ®çš„æ’æ§½ï¼‰</strong></h2>
<h3 data-id="heading-7"><strong>æ–¹æ³•1ï¼šä½¿ç”¨ render props</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å­ç»„ä»¶ï¼šæä¾›æ•°æ®ç»™æ’æ§½</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">DataList</span>(<span class="hljs-params">{ data, children }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"list"</span>&gt;</span>
      {data.map((item, index) =&gt; (
        // è°ƒç”¨ children å‡½æ•°ï¼Œä¼ é€’æ•°æ®
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{item.id}</span>&gt;</span>
          {children(item, index)}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// çˆ¶ç»„ä»¶ä½¿ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> users = [
    { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'æå››'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span> }
  ];
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">DataList</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{users}</span>&gt;</span>
      {(user, index) =&gt; (  // è¿™é‡Œæ¥æ”¶å­ç»„ä»¶ä¼ é€’çš„æ•°æ®
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"user-item"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{index + 1}. <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>{user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span> ({user.age}å²)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">DataList</span>&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-8"><strong>æ–¹æ³•2ï¼šä½¿ç”¨å‡½æ•°ä½œä¸º children</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å­ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Toggle</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">const</span> [isOn, setIsOn] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggle</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-title function_">setIsOn</span>(!isOn);
  
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">children</span>({ 
    isOn, 
    toggle,
    <span class="hljs-attr">onText</span>: <span class="hljs-string">'å¼€å¯'</span>,
    <span class="hljs-attr">offText</span>: <span class="hljs-string">'å…³é—­'</span>
  });
}

<span class="hljs-comment">// çˆ¶ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Toggle</span>&gt;</span>
      {({ isOn, toggle, onText, offText }) =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{toggle}</span>&gt;</span>
          {isOn ? onText : offText}
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">Toggle</span>&gt;</span></span>
  );
}
</code></pre>
<h2 data-id="heading-9"><strong>å››ã€ç»„åˆç»„ä»¶æ¨¡å¼ï¼ˆç±»ä¼¼ Web Components çš„Â <code>&lt;slot&gt;</code>ï¼‰</strong></h2>
<h3 data-id="heading-10"><strong>æ–¹æ³•1ï¼šä½¿ç”¨ç‰¹æ®Šçš„å­ç»„ä»¶</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®šä¹‰æ’æ§½ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">CardHeader</span> = (<span class="hljs-params">{ children }</span>) =&gt; children;
<span class="hljs-keyword">const</span> <span class="hljs-title function_">CardBody</span> = (<span class="hljs-params">{ children }</span>) =&gt; children;
<span class="hljs-keyword">const</span> <span class="hljs-title function_">CardFooter</span> = (<span class="hljs-params">{ children }</span>) =&gt; children;

<span class="hljs-comment">// å®¹å™¨ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Card</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-comment">// ä» children ä¸­æå–ä¸åŒæ’æ§½çš„å†…å®¹</span>
  <span class="hljs-keyword">let</span> header, body, footer;
  
  <span class="hljs-title class_">React</span>.<span class="hljs-property">Children</span>.<span class="hljs-title function_">forEach</span>(children, <span class="hljs-function"><span class="hljs-params">child</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (child.<span class="hljs-property">type</span> === <span class="hljs-title class_">CardHeader</span>) {
      header = child.<span class="hljs-property">props</span>.<span class="hljs-property">children</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (child.<span class="hljs-property">type</span> === <span class="hljs-title class_">CardBody</span>) {
      body = child.<span class="hljs-property">props</span>.<span class="hljs-property">children</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (child.<span class="hljs-property">type</span> === <span class="hljs-title class_">CardFooter</span>) {
      footer = child.<span class="hljs-property">props</span>.<span class="hljs-property">children</span>;
    }
  });
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"card"</span>&gt;</span>
      {header &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"card-header"</span>&gt;</span>{header}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}
      {body &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"card-body"</span>&gt;</span>{body}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}
      {footer &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"card-footer"</span>&gt;</span>{footer}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// çˆ¶ç»„ä»¶ä½¿ç”¨ï¼ˆç±»ä¼¼ Vue çš„è¯­æ³•ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Card</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">CardHeader</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>ç”¨æˆ·ä¿¡æ¯<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">CardHeader</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">CardBody</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å§“åï¼šå¼ ä¸‰<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å¹´é¾„ï¼š25<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">CardBody</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">CardFooter</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>ç¼–è¾‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">CardFooter</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Card</span>&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-11"><strong>æ–¹æ³•2ï¼šä½¿ç”¨ context + ç‰¹æ®Šç»„ä»¶</strong></h3>
<p>jsx</p>
<pre><code class="hljs language-ini" lang="ini">// æ›´é«˜çº§çš„å®ç°
const <span class="hljs-attr">CardContext</span> = React.createContext({})<span class="hljs-comment">;</span>

const <span class="hljs-attr">Card</span> = ({ children }) =&gt; {
  const <span class="hljs-section">[slots, setSlots]</span> = useState({})<span class="hljs-comment">;</span>
  
  return (
    &lt;CardContext.Provider <span class="hljs-attr">value</span>={{ registerSlot: setSlots }}&gt;
      {children}
      &lt;div <span class="hljs-attr">className</span>=<span class="hljs-string">"card"</span>&gt;
        &lt;div <span class="hljs-attr">className</span>=<span class="hljs-string">"card-header"</span>&gt;{slots.header}&lt;/div&gt;
        &lt;div <span class="hljs-attr">className</span>=<span class="hljs-string">"card-body"</span>&gt;{slots.body}&lt;/div&gt;
        &lt;div <span class="hljs-attr">className</span>=<span class="hljs-string">"card-footer"</span>&gt;{slots.footer}&lt;/div&gt;
      &lt;/div&gt;
    &lt;/CardContext.Provider&gt;
  )<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>

const <span class="hljs-attr">CardHeader</span> = ({ children }) =&gt; {
  const { registerSlot } = useContext(CardContext)<span class="hljs-comment">;</span>
  
  useEffect(() =&gt; {
    registerSlot(<span class="hljs-attr">prev</span> =&gt; ({ ...prev, header: children }))<span class="hljs-comment">;</span>
  }, <span class="hljs-section">[children, registerSlot]</span>)<span class="hljs-comment">;</span>
  
  return null<span class="hljs-comment">; // ä¸æ¸²æŸ“è‡ªèº«</span>
}<span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-12"><strong>äº”ã€ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“å®ç°æ’æ§½</strong></h2>
<h3 data-id="heading-13"><strong>1. React Slotï¼ˆä¸“é—¨åº“ï¼‰</strong></h3>
<pre><code class="hljs">npm install react-slot
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Slot</span>, <span class="hljs-title class_">Fill</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-slot'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Layout</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"header"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"content"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Layout</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Fill</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"header"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æˆ‘çš„ç½‘ç«™<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Fill</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Fill</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"content"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ¬¢è¿å…‰ä¸´<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Fill</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Layout</span>&gt;</span></span>
  );
}
</code></pre>
<h2 data-id="heading-14"><strong>å…­ã€å®æˆ˜æ¡ˆä¾‹ï¼šå®ç°ä¸€ä¸ªå®Œæ•´çš„å¼¹çª—ç»„ä»¶</strong></h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¼¹çª—ç»„ä»¶ï¼ˆæ”¯æŒæ’æ§½ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Modal</span>(<span class="hljs-params">{ 
  isOpen, 
  onClose, 
  title,
  children,
  footer 
}</span>) {
  <span class="hljs-keyword">if</span> (!isOpen) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"modal-overlay"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"modal"</span>&gt;</span>
        {/* æ ‡é¢˜æ’æ§½ */}
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"modal-header"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>{title}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClose}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"close-btn"</span>&gt;</span>Ã—<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        
        {/* é»˜è®¤æ’æ§½ï¼ˆä¸»è¦å†…å®¹ï¼‰ */}
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"modal-body"</span>&gt;</span>
          {children}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        
        {/* åº•éƒ¨æ’æ§½ */}
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"modal-footer"</span>&gt;</span>
          {footer || (  // é»˜è®¤åº•éƒ¨
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClose}</span>&gt;</span>å…³é—­<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
          )}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [showModal, setShowModal] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setShowModal(true)}&gt;æ‰“å¼€å¼¹çª—<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">Modal</span>
        <span class="hljs-attr">isOpen</span>=<span class="hljs-string">{showModal}</span>
        <span class="hljs-attr">onClose</span>=<span class="hljs-string">{()</span> =&gt;</span> setShowModal(false)}
        title="ç”¨æˆ·è®¾ç½®"
        footer={  // å…·åæ’æ§½
          <span class="hljs-tag">&lt;&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setShowModal(false)}&gt;å–æ¶ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> alert('ä¿å­˜æˆåŠŸ')}&gt;ä¿å­˜<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
          <span class="hljs-tag">&lt;/&gt;</span>
        }
      &gt;
        {/* é»˜è®¤æ’æ§½å†…å®¹ */}
        <span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
            ç”¨æˆ·åï¼š
            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
            é‚®ç®±ï¼š
            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span> /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Modal</span>&gt;</span></span>
    &lt;/div&gt;
  );
}
</code></pre>
<h2 data-id="heading-15"><strong>ä¸ƒã€é«˜çº§æ¨¡å¼ï¼šåŠ¨æ€æ’æ§½</strong></h2>
<h3 data-id="heading-16"><strong>åŠ¨æ€å†³å®šæ’æ§½ä½ç½®</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">DynamicLayout</span>(<span class="hljs-params">{ children, layout = <span class="hljs-string">'default'</span> }</span>) {
  <span class="hljs-comment">// æ ¹æ®å¸ƒå±€ç±»å‹åŠ¨æ€æ¸²æŸ“æ’æ§½</span>
  <span class="hljs-keyword">const</span> layouts = {
    <span class="hljs-attr">default</span>: (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"default-layout"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"top"</span>&gt;</span>{children.top}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"main"</span>&gt;</span>{children.main}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    ),
    <span class="hljs-attr">sidebar</span>: (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"sidebar-layout"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">aside</span>&gt;</span>{children.sidebar}<span class="hljs-tag">&lt;/<span class="hljs-name">aside</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>{children.main}<span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    ),
    <span class="hljs-attr">grid</span>: (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"grid-layout"</span>&gt;</span>
        {children.grid?.map((item, index) =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{index}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"grid-item"</span>&gt;</span>{item}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
  };
  
  <span class="hljs-keyword">return</span> layouts[layout];
}

<span class="hljs-comment">// ä½¿ç”¨</span>
&lt;<span class="hljs-title class_">DynamicLayout</span> layout=<span class="hljs-string">"sidebar"</span>&gt;
  {{
    <span class="hljs-attr">sidebar</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>å¯¼èˆªèœå•<span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span></span>,
    <span class="hljs-attr">main</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">article</span>&gt;</span>ä¸»è¦å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">article</span>&gt;</span></span>
  }}
&lt;/<span class="hljs-title class_">DynamicLayout</span>&gt;
</code></pre>
<h2 data-id="heading-17"><strong>å…«ã€ä¸ Vue æ’æ§½çš„å¯¹æ¯”</strong></h2>






























<table><thead><tr><th>Vue æ’æ§½</th><th>React å¯¹åº”å®ç°</th><th>ä»£ç ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>&lt;slot /&gt;</code></td><td><code>{children}</code></td><td><code>&lt;div&gt;{children}&lt;/div&gt;</code></td></tr><tr><td><code>&lt;slot name="header"&gt;</code></td><td>å¤šä¸ª props</td><td><code>header={content}</code></td></tr><tr><td>ä½œç”¨åŸŸæ’æ§½</td><td>render props</td><td><code>{(data) =&gt; &lt;div&gt;{data}&lt;/div&gt;}</code></td></tr><tr><td><code>&lt;template #header&gt;</code></td><td>ç»„ä»¶ç»„åˆ</td><td><code>&lt;Card&gt;&lt;CardHeader&gt;...&lt;/CardHeader&gt;&lt;/Card&gt;</code></td></tr></tbody></table>
<h2 data-id="heading-18"><strong>ä¹ã€æœ€ä½³å®è·µå»ºè®®</strong></h2>
<h3 data-id="heading-19"><strong>ä½•æ—¶ä½¿ç”¨å“ªç§æ–¹å¼ï¼Ÿ</strong></h3>
<ol>
<li><strong>ç®€å•å†…å®¹ä¼ é€’</strong>Â â†’Â <code>children</code>Â prop</li>
<li><strong>å¤šä¸ªå›ºå®šåŒºåŸŸ</strong>Â â†’ å¤šä¸ª propsï¼ˆå‘½åæ’æ§½ï¼‰</li>
<li><strong>éœ€è¦å‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®</strong>Â â†’ render props</li>
<li><strong>ç±»ä¼¼ Vue çš„å…·åæ’æ§½è¯­æ³•</strong>Â â†’ ç»„ä»¶ç»„åˆæ¨¡å¼</li>
<li><strong>å¤æ‚æ’æ§½é€»è¾‘</strong>Â â†’ Context + ç‰¹æ®Šç»„ä»¶</li>
</ol>
<h3 data-id="heading-20"><strong>æ€§èƒ½è€ƒè™‘</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é¿å…æ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°çš„æ’æ§½å†…å®¹</span>
&lt;<span class="hljs-title class_">Card</span>&gt;
  {{
    <span class="hljs-attr">header</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Header</span> /&gt;</span></span>,  <span class="hljs-comment">// æ¯æ¬¡éƒ½æ˜¯æ–°ç»„ä»¶</span>
    <span class="hljs-attr">body</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Body</span> /&gt;</span></span>
  }}
&lt;/<span class="hljs-title class_">Card</span>&gt;

<span class="hljs-comment">// âœ… ä½¿ç”¨ useMemo æˆ–æå–åˆ°ç»„ä»¶å¤–éƒ¨</span>
<span class="hljs-keyword">const</span> cardContent = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> ({
  <span class="hljs-attr">header</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Header</span> /&gt;</span></span>,
  <span class="hljs-attr">body</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Body</span> /&gt;</span></span>
}), [dependencies]);

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Card</span>&gt;</span>{cardContent}<span class="hljs-tag">&lt;/<span class="hljs-name">Card</span>&gt;</span></span>
</code></pre>
<p><strong>reaact ä¸­çš„æ€§èƒ½ä¼˜åŒ–æœ‰å¾ˆå¤šéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œæ¬¢è¿å¤§å®¶è¯´è¯´å¹³æ—¶é‡åˆ°çš„æƒ…å†µ</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React Router è·¯ç”±æ¨¡å¼è¯¦è§£ï¼šHashRouter vs BrowserRouter]]></title>    <link>https://juejin.cn/post/7581359420391931931</link>    <guid>https://juejin.cn/post/7581359420391931931</guid>    <pubDate>2025-12-08T15:05:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581359420391931931" data-draft-id="7581406561685536814" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React Router è·¯ç”±æ¨¡å¼è¯¦è§£ï¼šHashRouter vs BrowserRouter"/> <meta itemprop="keywords" content="React.js"/> <meta itemprop="datePublished" content="2025-12-08T15:05:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React Router è·¯ç”±æ¨¡å¼è¯¦è§£ï¼šHashRouter vs BrowserRouter
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T15:05:38.000Z" title="Mon Dec 08 2025 15:05:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨ç°ä»£å‰ç«¯å•é¡µé¢åº”ç”¨ï¼ˆSPAï¼‰å¼€å‘ä¸­ï¼Œè·¯ç”±ç®¡ç†æ˜¯è‡³å…³é‡è¦çš„ä¸€ç¯ã€‚React Router ä½œä¸º React ç”Ÿæ€ä¸­æœ€æµè¡Œçš„è·¯ç”±åº“ï¼Œæä¾›äº†ä¸¤ç§ä¸»è¦çš„è·¯ç”±æ¨¡å¼ï¼šHashRouter å’Œ BrowserRouterã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨è¿™ä¸¤ç§æ¨¡å¼çš„å®ç°åŸç†ã€ä½¿ç”¨åœºæ™¯å’Œå·®å¼‚ã€‚</p>
</blockquote>
<h2 data-id="heading-0">1. React Router ç®€ä»‹</h2>
<p>React Router æ˜¯ React å®˜æ–¹æ¨èçš„è·¯ç”±åº“ï¼Œå®ƒé€šè¿‡ç®¡ç† URL ä¸ç»„ä»¶ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œå®ç°äº†å•é¡µé¢åº”ç”¨çš„å¤šè§†å›¾åˆ‡æ¢åŠŸèƒ½ã€‚ç›®å‰ React Router å·²å‘å±•åˆ° v6 ç‰ˆæœ¬ï¼Œæä¾›äº†æ›´åŠ ç®€æ´å’Œå¼ºå¤§çš„ APIã€‚</p>
<h3 data-id="heading-1">1.1 å®‰è£… React Router</h3>
<pre><code class="hljs language-bash" lang="bash">npm install react-router-dom
</code></pre>
<h3 data-id="heading-2">1.2 åŸºæœ¬ä½¿ç”¨</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">BrowserRouter</span>, <span class="hljs-title class_">Routes</span>, <span class="hljs-title class_">Route</span>, <span class="hljs-title class_">Link</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/Home'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">About</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/About'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Contact</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/Contact'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">BrowserRouter</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/"</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/about"</span>&gt;</span>å…³äº<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/contact"</span>&gt;</span>è”ç³»<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">Routes</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Home</span> /&gt;</span>} /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/about"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">About</span> /&gt;</span>} /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/contact"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Contact</span> /&gt;</span>} /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">Routes</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">BrowserRouter</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;
</code></pre>
<h2 data-id="heading-3">2. HashRouter æ¨¡å¼</h2>
<h3 data-id="heading-4">2.1 ä»€ä¹ˆæ˜¯ HashRouter</h3>
<p>HashRouter ä½¿ç”¨ URL çš„ hash éƒ¨åˆ†ï¼ˆå³ <code>#</code> å·åé¢çš„å†…å®¹ï¼‰æ¥ç®¡ç†è·¯ç”±ã€‚è¿™ç§æ¨¡å¼å…¼å®¹æ€§æœ€å¥½ï¼Œå¯ä»¥åœ¨æ‰€æœ‰æµè§ˆå™¨ä¸­è¿è¡Œï¼Œå¹¶ä¸”ä¸éœ€è¦æœåŠ¡å™¨ç«¯é…ç½®ã€‚</p>
<p><strong>ç¤ºä¾‹ URLï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">http://example.com/<span class="hljs-comment">#/home</span>
http://example.com/<span class="hljs-comment">#/about</span>
http://example.com/<span class="hljs-comment">#/users/123</span>
</code></pre>
<h3 data-id="heading-5">2.2 HashRouter å®ç°åŸç†</h3>
<h4 data-id="heading-6">2.2.1 æ ¸å¿ƒæœºåˆ¶</h4>
<p>HashRouter çš„æ ¸å¿ƒåŸç†æ˜¯åˆ©ç”¨ <code>window.location.hash</code> å±æ€§å’Œ <code>hashchange</code> äº‹ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleHashRouter</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span> = {};
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentUrl</span> = <span class="hljs-string">''</span>;
    
    <span class="hljs-comment">// ç›‘å¬ hashchange äº‹ä»¶</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'hashchange'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">refresh</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>), <span class="hljs-literal">false</span>);
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">refresh</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>), <span class="hljs-literal">false</span>);
  }
  
  <span class="hljs-comment">// æ³¨å†Œè·¯ç”±</span>
  <span class="hljs-title function_">route</span>(<span class="hljs-params">path, callback</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span>[path] = callback || <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {};
  }
  
  <span class="hljs-comment">// è·¯ç”±åˆ·æ–°</span>
  <span class="hljs-title function_">refresh</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentUrl</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">hash</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>) || <span class="hljs-string">'/'</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentUrl</span>]) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentUrl</span>]();
    }
  }
  
  <span class="hljs-comment">// å¯¼èˆªåˆ°æ–°è·¯ç”±</span>
  <span class="hljs-title function_">navigate</span>(<span class="hljs-params">path</span>) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">hash</span> = <span class="hljs-string">'#'</span> + path;
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleHashRouter</span>();

router.<span class="hljs-title function_">route</span>(<span class="hljs-string">'/'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'content'</span>).<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'&lt;h1&gt;é¦–é¡µ&lt;/h1&gt;'</span>;
});

router.<span class="hljs-title function_">route</span>(<span class="hljs-string">'/about'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'content'</span>).<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'&lt;h1&gt;å…³äºæˆ‘ä»¬&lt;/h1&gt;'</span>;
});
</code></pre>
<h4 data-id="heading-7">2.2.2 React Router ä¸­çš„ HashRouter å®ç°</h4>
<p>React Router çš„ HashRouter ç»„ä»¶å†…éƒ¨å®ç°æ›´åŠ å¤æ‚ï¼Œä½†åŸºæœ¬åŸç†ç›¸åŒï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Router</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">HashRouter</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">const</span> [location, setLocation] = <span class="hljs-title function_">useState</span>({
    <span class="hljs-attr">pathname</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">hash</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>) || <span class="hljs-string">'/'</span>,
    <span class="hljs-attr">search</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">hash</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">state</span>: <span class="hljs-literal">null</span>
  });

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleHashChange</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-title function_">setLocation</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> ({
        ...prev,
        <span class="hljs-attr">pathname</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">hash</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>) || <span class="hljs-string">'/'</span>
      }));
    };

    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'hashchange'</span>, handleHashChange);
    
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'hashchange'</span>, handleHashChange);
    };
  }, []);

  <span class="hljs-keyword">const</span> history = {
    <span class="hljs-attr">push</span>: <span class="hljs-function">(<span class="hljs-params">path</span>) =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">hash</span> = <span class="hljs-string">'#'</span> + path;
    },
    <span class="hljs-attr">replace</span>: <span class="hljs-function">(<span class="hljs-params">path</span>) =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-string">'#'</span> + path);
    },
    <span class="hljs-attr">go</span>: <span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">go</span>(n);
    },
    <span class="hljs-attr">goBack</span>: <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">back</span>();
    },
    <span class="hljs-attr">goForward</span>: <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">forward</span>();
    },
    location
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Router</span> <span class="hljs-attr">history</span>=<span class="hljs-string">{history}</span> <span class="hljs-attr">location</span>=<span class="hljs-string">{location}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">Router</span>&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-8">2.3 HashRouter ä½¿ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">HashRouter</span>, <span class="hljs-title class_">Routes</span>, <span class="hljs-title class_">Route</span>, <span class="hljs-title class_">Link</span>, useNavigate } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> navigate = <span class="hljs-title function_">useNavigate</span>();
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> navigate('/about')}&gt;è·³è½¬åˆ°å…³äºé¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">About</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å…³äºæˆ‘ä»¬<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">User</span>(<span class="hljs-params">{ id }</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ç”¨æˆ·è¯¦æƒ… - ID: {id}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">HashRouter</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/"</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/about"</span>&gt;</span>å…³äº<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/user/123"</span>&gt;</span>ç”¨æˆ·123<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">Routes</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Home</span> /&gt;</span>} /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/about"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">About</span> /&gt;</span>} /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/user/:id"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">User</span> /&gt;</span>} /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">Routes</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">HashRouter</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;
</code></pre>
<h3 data-id="heading-9">2.4 HashRouter æµç¨‹å›¾</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[ç”¨æˆ·ç‚¹å‡»é“¾æ¥æˆ–è°ƒç”¨ navigate] --&gt; B[æ›´æ–° window.location.hash]
    B --&gt; C[è§¦å‘ hashchange äº‹ä»¶]
    C --&gt; D[React Router ç›‘å¬å™¨æ•è·äº‹ä»¶]
    D --&gt; E[æ›´æ–° Router å†…éƒ¨çŠ¶æ€]
    E --&gt; F[é‡æ–°æ¸²æŸ“åŒ¹é…çš„ç»„ä»¶]
    F --&gt; G[é¡µé¢å†…å®¹æ›´æ–°]
</code></pre>
<h2 data-id="heading-10">3. BrowserRouter æ¨¡å¼</h2>
<h3 data-id="heading-11">3.1 ä»€ä¹ˆæ˜¯ BrowserRouter</h3>
<p>BrowserRouter ä½¿ç”¨ HTML5 History API æ¥ç®¡ç†è·¯ç”±ï¼Œåˆ›å»ºçš„æ˜¯çœŸå®çš„ URL è·¯å¾„ï¼Œä¸åŒ…å« <code>#</code> ç¬¦å·ã€‚è¿™ç§æ¨¡å¼åˆ›å»ºçš„ URL æ›´åŠ ç¾è§‚ï¼Œæ›´ç¬¦åˆç”¨æˆ·ä¹ æƒ¯ã€‚</p>
<p><strong>ç¤ºä¾‹ URLï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">http:<span class="hljs-comment">//example.com/home</span>
http:<span class="hljs-comment">//example.com/about</span>
http:<span class="hljs-comment">//example.com/users/123</span>
</code></pre>
<h3 data-id="heading-12">3.2 BrowserRouter å®ç°åŸç†</h3>
<h4 data-id="heading-13">3.2.1 History API æ ¸å¿ƒæ–¹æ³•</h4>
<p>BrowserRouter ä¾èµ–äº HTML5 History APIï¼Œä¸»è¦æ–¹æ³•åŒ…æ‹¬ï¼š</p>
<ul>
<li><code>history.pushState()</code>: æ·»åŠ æ–°çš„å†å²è®°å½•</li>
<li><code>history.replaceState()</code>: æ›¿æ¢å½“å‰å†å²è®°å½•</li>
<li><code>popstate</code> äº‹ä»¶: å½“ç”¨æˆ·å¯¼èˆªå†å²è®°å½•æ—¶è§¦å‘</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleBrowserRouter</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span> = {};
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentUrl</span> = <span class="hljs-string">''</span>;
    
    <span class="hljs-comment">// ç›‘å¬ popstate äº‹ä»¶</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'popstate'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">refresh</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>), <span class="hljs-literal">false</span>);
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">refresh</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>), <span class="hljs-literal">false</span>);
  }
  
  <span class="hljs-comment">// æ³¨å†Œè·¯ç”±</span>
  <span class="hljs-title function_">route</span>(<span class="hljs-params">path, callback</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span>[path] = callback || <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {};
  }
  
  <span class="hljs-comment">// è·¯ç”±åˆ·æ–°</span>
  <span class="hljs-title function_">refresh</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentUrl</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">pathname</span> || <span class="hljs-string">'/'</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentUrl</span>]) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentUrl</span>]();
    }
  }
  
  <span class="hljs-comment">// å¯¼èˆªåˆ°æ–°è·¯ç”±</span>
  <span class="hljs-title function_">push</span>(<span class="hljs-params">path</span>) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">pushState</span>(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, path);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">refresh</span>();
  }
  
  <span class="hljs-title function_">replace</span>(<span class="hljs-params">path</span>) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">replaceState</span>(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, path);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">refresh</span>();
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleBrowserRouter</span>();

router.<span class="hljs-title function_">route</span>(<span class="hljs-string">'/'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'content'</span>).<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'&lt;h1&gt;é¦–é¡µ&lt;/h1&gt;'</span>;
});

router.<span class="hljs-title function_">route</span>(<span class="hljs-string">'/about'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'content'</span>).<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'&lt;h1&gt;å…³äºæˆ‘ä»¬&lt;/h1&gt;'</span>;
});
</code></pre>
<h4 data-id="heading-14">3.2.2 React Router ä¸­çš„ BrowserRouter å®ç°</h4>
<p>React Router çš„ BrowserRouter ç»„ä»¶å®ç°ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Router</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">BrowserRouter</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">const</span> [location, setLocation] = <span class="hljs-title function_">useState</span>({
    <span class="hljs-attr">pathname</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">pathname</span>,
    <span class="hljs-attr">search</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">search</span>,
    <span class="hljs-attr">hash</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">hash</span>,
    <span class="hljs-attr">state</span>: <span class="hljs-literal">null</span>
  });

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handlePopState</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-title function_">setLocation</span>({
        <span class="hljs-attr">pathname</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">pathname</span>,
        <span class="hljs-attr">search</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">search</span>,
        <span class="hljs-attr">hash</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">hash</span>,
        <span class="hljs-attr">state</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-property">state</span>
      });
    };

    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'popstate'</span>, handlePopState);
    
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'popstate'</span>, handlePopState);
    };
  }, []);

  <span class="hljs-keyword">const</span> history = {
    <span class="hljs-attr">push</span>: <span class="hljs-function">(<span class="hljs-params">path, state</span>) =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">pushState</span>(state, <span class="hljs-string">''</span>, path);
      <span class="hljs-title function_">setLocation</span>({
        <span class="hljs-attr">pathname</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">pathname</span>,
        <span class="hljs-attr">search</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">search</span>,
        <span class="hljs-attr">hash</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">hash</span>,
        state
      });
    },
    <span class="hljs-attr">replace</span>: <span class="hljs-function">(<span class="hljs-params">path, state</span>) =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">replaceState</span>(state, <span class="hljs-string">''</span>, path);
      <span class="hljs-title function_">setLocation</span>({
        <span class="hljs-attr">pathname</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">pathname</span>,
        <span class="hljs-attr">search</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">search</span>,
        <span class="hljs-attr">hash</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">hash</span>,
        state
      });
    },
    <span class="hljs-attr">go</span>: <span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">go</span>(n);
    },
    <span class="hljs-attr">goBack</span>: <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">back</span>();
    },
    <span class="hljs-attr">goForward</span>: <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">forward</span>();
    },
    location
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Router</span> <span class="hljs-attr">history</span>=<span class="hljs-string">{history}</span> <span class="hljs-attr">location</span>=<span class="hljs-string">{location}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">Router</span>&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-15">3.3 BrowserRouter ä½¿ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">BrowserRouter</span>, <span class="hljs-title class_">Routes</span>, <span class="hljs-title class_">Route</span>, <span class="hljs-title class_">Link</span>, useParams } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">About</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å…³äºæˆ‘ä»¬<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">User</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { id } = <span class="hljs-title function_">useParams</span>();
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ç”¨æˆ·è¯¦æƒ… - ID: {id}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">NotFound</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>404 - é¡µé¢æœªæ‰¾åˆ°<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">BrowserRouter</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/"</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/about"</span>&gt;</span>å…³äº<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/user/123"</span>&gt;</span>ç”¨æˆ·123<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">Routes</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Home</span> /&gt;</span>} /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/about"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">About</span> /&gt;</span>} /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/user/:id"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">User</span> /&gt;</span>} /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"*"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">NotFound</span> /&gt;</span>} /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">Routes</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">BrowserRouter</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;
</code></pre>
<h3 data-id="heading-16">3.4 BrowserRouter æµç¨‹å›¾</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[ç”¨æˆ·ç‚¹å‡»é“¾æ¥æˆ–è°ƒç”¨ navigate] --&gt; B[è°ƒç”¨ history.pushState]
    B --&gt; C[æ›´æ–° URL ä½†ä¸åˆ·æ–°é¡µé¢]
    C --&gt; D[React Router æ›´æ–°å†…éƒ¨çŠ¶æ€]
    D --&gt; E[é‡æ–°æ¸²æŸ“åŒ¹é…çš„ç»„ä»¶]
    E --&gt; F[é¡µé¢å†…å®¹æ›´æ–°]
    
    G[ç”¨æˆ·ç‚¹å‡»æµè§ˆå™¨å‰è¿›/åé€€] --&gt; H[è§¦å‘ popstate äº‹ä»¶]
    H --&gt; I[React Router ç›‘å¬å™¨æ•è·äº‹ä»¶]
    I --&gt; J[æ›´æ–° Router å†…éƒ¨çŠ¶æ€]
    J --&gt; K[é‡æ–°æ¸²æŸ“åŒ¹é…çš„ç»„ä»¶]
    K --&gt; L[é¡µé¢å†…å®¹æ›´æ–°]
</code></pre>
<h2 data-id="heading-17">4. ä¸¤ç§æ¨¡å¼çš„å¯¹æ¯”</h2>
<h3 data-id="heading-18">4.1 åŠŸèƒ½ç‰¹æ€§å¯¹æ¯”</h3>



































<table><thead><tr><th>ç‰¹æ€§</th><th>HashRouter</th><th>BrowserRouter</th></tr></thead><tbody><tr><td>URL ç¾è§‚åº¦</td><td>è¾ƒå·®ï¼ˆåŒ…å« #ï¼‰</td><td>è¾ƒå¥½ï¼ˆçº¯è·¯å¾„ï¼‰</td></tr><tr><td>å…¼å®¹æ€§</td><td>æ‰€æœ‰æµè§ˆå™¨</td><td>IE10+</td></tr><tr><td>æœåŠ¡å™¨é…ç½®</td><td>ä¸éœ€è¦</td><td>éœ€è¦é…ç½®æ”¯æŒ</td></tr><tr><td>SEO å‹å¥½æ€§</td><td>è¾ƒå·®</td><td>è¾ƒå¥½</td></tr><tr><td>å®ç°åŸç†</td><td>hashchange äº‹ä»¶</td><td>History API</td></tr></tbody></table>
<h3 data-id="heading-19">4.2 æœåŠ¡å™¨é…ç½®è¦æ±‚</h3>
<h4 data-id="heading-20">HashRouter æœåŠ¡å™¨é…ç½®</h4>
<p>HashRouter ä¸éœ€è¦ç‰¹æ®ŠæœåŠ¡å™¨é…ç½®ï¼Œå› ä¸º <code>#</code> åé¢çš„å†…å®¹ä¸ä¼šå‘é€åˆ°æœåŠ¡å™¨ã€‚</p>
<h4 data-id="heading-21">BrowserRouter æœåŠ¡å™¨é…ç½®</h4>
<p>BrowserRouter éœ€è¦æœåŠ¡å™¨é…ç½®ï¼Œç¡®ä¿æ‰€æœ‰è·¯ç”±éƒ½è¿”å› index.htmlï¼š</p>
<p><strong>Express æœåŠ¡å™¨é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();

<span class="hljs-comment">// é™æ€æ–‡ä»¶æœåŠ¡</span>
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">static</span>(path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">'build'</span>)));

<span class="hljs-comment">// æ‰€æœ‰è·¯ç”±éƒ½è¿”å› index.html</span>
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'*'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>) {
  res.<span class="hljs-title function_">sendFile</span>(path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">'build'</span>, <span class="hljs-string">'index.html'</span>));
});

app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">9000</span>);
</code></pre>
<p><strong>Nginx æœåŠ¡å™¨é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-nginx" lang="nginx">server {
  listen 80;
  server_name example.com;
  root /usr/share/nginx/html;
  index index.html;
  
  location / {
    try_files $uri $uri/ /index.html;
  }
}
</code></pre>
<h3 data-id="heading-22">4.3 é€‰æ‹©å»ºè®®</h3>
<ul>
<li>
<p><strong>ä½¿ç”¨ HashRouter çš„æƒ…å†µ</strong>ï¼š</p>
<ul>
<li>é™æ€ç½‘ç«™æ‰˜ç®¡ï¼ˆå¦‚ GitHub Pagesï¼‰</li>
<li>ä¸æ”¯æŒ History API çš„æ—§æµè§ˆå™¨</li>
<li>æ²¡æœ‰æœåŠ¡å™¨é…ç½®æƒé™</li>
<li>å¿«é€ŸåŸå‹å¼€å‘</li>
</ul>
</li>
<li>
<p><strong>ä½¿ç”¨ BrowserRouter çš„æƒ…å†µ</strong>ï¼š</p>
<ul>
<li>æœ‰è‡ªå·±çš„æœåŠ¡å™¨å¹¶å¯ä»¥é…ç½®</li>
<li>éœ€è¦ SEO å‹å¥½çš„ URL</li>
<li>ç°ä»£æµè§ˆå™¨ç¯å¢ƒ</li>
<li>ç”Ÿäº§ç¯å¢ƒåº”ç”¨</li>
</ul>
</li>
</ul>
<h2 data-id="heading-23">5. å®é™…åº”ç”¨ç¤ºä¾‹</h2>
<h3 data-id="heading-24">5.1 åŠ¨æ€è·¯ç”±åº”ç”¨</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">BrowserRouter</span>, <span class="hljs-title class_">Routes</span>, <span class="hljs-title class_">Route</span>, <span class="hljs-title class_">Link</span>, useParams } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

<span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®è·å–</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchUser</span> = (<span class="hljs-params">id</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">resolve</span>({
        id,
        <span class="hljs-attr">name</span>: <span class="hljs-string">`ç”¨æˆ· <span class="hljs-subst">${id}</span>`</span>,
        <span class="hljs-attr">email</span>: <span class="hljs-string">`user<span class="hljs-subst">${id}</span>@example.com`</span>
      });
    }, <span class="hljs-number">500</span>);
  });
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserList</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> users = [
    { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'æå››'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'ç‹äº”'</span> }
  ];
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ç”¨æˆ·åˆ—è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
        {users.map(user =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{user.id}</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">{</span>`/<span class="hljs-attr">user</span>/${<span class="hljs-attr">user.id</span>}`}&gt;</span>{user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserDetail</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { id } = <span class="hljs-title function_">useParams</span>();
  <span class="hljs-keyword">const</span> [user, setUser] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">true</span>);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">loadUser</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">true</span>);
      <span class="hljs-keyword">const</span> userData = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUser</span>(id);
      <span class="hljs-title function_">setUser</span>(userData);
      <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>);
    };
    
    <span class="hljs-title function_">loadUser</span>();
  }, [id]);
  
  <span class="hljs-keyword">if</span> (loading) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  <span class="hljs-keyword">if</span> (!user) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>ç”¨æˆ·ä¸å­˜åœ¨<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ç”¨æˆ·è¯¦æƒ…<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>ID:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> {user.id}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>å§“å:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> {user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>é‚®ç®±:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> {user.email}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">BrowserRouter</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> '<span class="hljs-attr">10px</span>', <span class="hljs-attr">borderBottom:</span> '<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> #<span class="hljs-attr">ccc</span>' }}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">marginRight:</span> '<span class="hljs-attr">10px</span>' }}&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/users"</span>&gt;</span>ç”¨æˆ·åˆ—è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> '<span class="hljs-attr">20px</span>' }}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Routes</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">h1</span>&gt;</span>æ¬¢è¿æ¥åˆ°ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>} /&gt;
          <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/users"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">UserList</span> /&gt;</span>} /&gt;
          <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/user/:id"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">UserDetail</span> /&gt;</span>} /&gt;
        <span class="hljs-tag">&lt;/<span class="hljs-name">Routes</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">BrowserRouter</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;
</code></pre>
<h3 data-id="heading-25">5.2 è·¯ç”±å®ˆå«ç¤ºä¾‹</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">BrowserRouter</span>, <span class="hljs-title class_">Routes</span>, <span class="hljs-title class_">Route</span>, <span class="hljs-title class_">Navigate</span>, useLocation } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

<span class="hljs-comment">// æ¨¡æ‹Ÿè®¤è¯çŠ¶æ€</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">useAuth</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [isAuthenticated, setIsAuthenticated] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">login</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setIsAuthenticated</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'isAuthenticated'</span>, <span class="hljs-string">'true'</span>);
  };
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">logout</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setIsAuthenticated</span>(<span class="hljs-literal">false</span>);
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'isAuthenticated'</span>);
  };
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> authStatus = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'isAuthenticated'</span>);
    <span class="hljs-keyword">if</span> (authStatus === <span class="hljs-string">'true'</span>) {
      <span class="hljs-title function_">setIsAuthenticated</span>(<span class="hljs-literal">true</span>);
    }
  }, []);
  
  <span class="hljs-keyword">return</span> { isAuthenticated, login, logout };
};

<span class="hljs-comment">// è·¯ç”±å®ˆå«ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ProtectedRoute</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">const</span> { isAuthenticated } = <span class="hljs-title function_">useAuth</span>();
  <span class="hljs-keyword">const</span> location = <span class="hljs-title function_">useLocation</span>();
  
  <span class="hljs-keyword">if</span> (!isAuthenticated) {
    <span class="hljs-comment">// é‡å®šå‘åˆ°ç™»å½•é¡µï¼Œå¹¶ä¿å­˜å½“å‰è·¯å¾„ä»¥ä¾¿ç™»å½•åè¿”å›</span>
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Navigate</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/login"</span> <span class="hljs-attr">state</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">from:</span> <span class="hljs-attr">location</span> }} <span class="hljs-attr">replace</span> /&gt;</span></span>;
  }
  
  <span class="hljs-keyword">return</span> children;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">LoginPage</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { login } = <span class="hljs-title function_">useAuth</span>();
  <span class="hljs-keyword">const</span> location = <span class="hljs-title function_">useLocation</span>();
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">from</span> = location.<span class="hljs-property">state</span>?.<span class="hljs-property">from</span>?.<span class="hljs-property">pathname</span> || <span class="hljs-string">'/'</span>;
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleLogin</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">login</span>();
    <span class="hljs-comment">// ç™»å½•åè·³è½¬åˆ°ä¹‹å‰å°è¯•è®¿é—®çš„é¡µé¢æˆ–é¦–é¡µ</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = <span class="hljs-keyword">from</span>;
  };
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ç™»å½•é¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleLogin}</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Dashboard</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { logout } = <span class="hljs-title function_">useAuth</span>();
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ä»ªè¡¨æ¿<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™æ˜¯å—ä¿æŠ¤çš„é¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{logout}</span>&gt;</span>é€€å‡ºç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">PublicPage</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å…¬å¼€é¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">BrowserRouter</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Routes</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">PublicPage</span> /&gt;</span>} /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/login"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">LoginPage</span> /&gt;</span>} /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> 
          <span class="hljs-attr">path</span>=<span class="hljs-string">"/dashboard"</span> 
          <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>
            &lt;<span class="hljs-attr">ProtectedRoute</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">Dashboard</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">ProtectedRoute</span>&gt;</span>
          } 
        /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">Routes</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">BrowserRouter</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;
</code></pre>
<h2 data-id="heading-26">6. æ€»ç»“</h2>
<p>React Router æä¾›äº†ä¸¤ç§ä¸»è¦çš„è·¯ç”±æ¨¡å¼ï¼šHashRouter å’Œ BrowserRouterï¼Œå®ƒä»¬å„æœ‰ä¼˜ç¼ºç‚¹å’Œé€‚ç”¨åœºæ™¯ã€‚</p>
<ul>
<li><strong>HashRouter</strong> åŸºäº URL hash å’Œ hashchange äº‹ä»¶ï¼Œå…¼å®¹æ€§å¥½ï¼Œæ— éœ€æœåŠ¡å™¨é…ç½®ï¼Œé€‚åˆé™æ€æ‰˜ç®¡å’Œç®€å•åº”ç”¨ã€‚</li>
<li><strong>BrowserRouter</strong> åŸºäº HTML5 History APIï¼ŒURL ç¾è§‚ï¼ŒSEO å‹å¥½ï¼Œä½†éœ€è¦æœåŠ¡å™¨é…ç½®ï¼Œé€‚åˆç°ä»£æµè§ˆå™¨å’Œç”Ÿäº§ç¯å¢ƒåº”ç”¨ã€‚</li>
</ul>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œåº”æ ¹æ®é¡¹ç›®éœ€æ±‚ã€ç›®æ ‡ç”¨æˆ·æµè§ˆå™¨ç¯å¢ƒå’ŒæœåŠ¡å™¨é…ç½®èƒ½åŠ›æ¥é€‰æ‹©åˆé€‚çš„è·¯ç”±æ¨¡å¼ã€‚å¯¹äºå¤§å¤šæ•°ç°ä»£ Web åº”ç”¨ï¼ŒBrowserRouter æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œå› ä¸ºå®ƒæä¾›äº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒå’Œå¼€å‘ä½“éªŒã€‚</p>
<p>æ— è®ºé€‰æ‹©å“ªç§æ¨¡å¼ï¼ŒReact Router éƒ½æä¾›äº†å¼ºå¤§è€Œçµæ´»çš„è·¯ç”±ç®¡ç†èƒ½åŠ›ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…æ„å»ºå¤æ‚çš„å•é¡µé¢åº”ç”¨ç¨‹åºã€‚<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92180fe9ea964a4ca223ba1bd35e1dc3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YyX6L6wYWxr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765811138&amp;x-signature=AdyH5TYh7y2ip00bMD%2FsxYOf7Ww%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript åŸå‹ç»§æ‰¿ä¸å‡½æ•°è°ƒç”¨æœºåˆ¶è¯¦è§£]]></title>    <link>https://juejin.cn/post/7581348660823572480</link>    <guid>https://juejin.cn/post/7581348660823572480</guid>    <pubDate>2025-12-08T14:45:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581348660823572480" data-draft-id="7581354812860661812" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript åŸå‹ç»§æ‰¿ä¸å‡½æ•°è°ƒç”¨æœºåˆ¶è¯¦è§£"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-08T14:45:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="wwwwW"/> <meta itemprop="url" content="https://juejin.cn/user/631558156323657"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript åŸå‹ç»§æ‰¿ä¸å‡½æ•°è°ƒç”¨æœºåˆ¶è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/631558156323657/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    wwwwW
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T14:45:57.000Z" title="Mon Dec 08 2025 14:45:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">JavaScript åŸå‹ç»§æ‰¿ä¸å‡½æ•°è°ƒç”¨æœºåˆ¶è¯¦è§£</h2>
<p>åœ¨ JavaScript çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ä½“ç³»ä¸­ï¼Œ<strong>åŸå‹ç»§æ‰¿</strong>ï¼ˆPrototype Inheritanceï¼‰æ˜¯å…¶æ ¸å¿ƒæœºåˆ¶ä¹‹ä¸€ã€‚ä¸åŒäºä¼ ç»Ÿè¯­è¨€å¦‚ Java æˆ– C++ ä½¿ç”¨çš„ç±»ç»§æ‰¿æ¨¡å‹ï¼ŒJavaScript é€šè¿‡åŸå‹é“¾å®ç°å¯¹è±¡ä¹‹é—´çš„å±æ€§å’Œæ–¹æ³•å…±äº«ã€‚æœ¬æ–‡å°†å›´ç»•åŸå‹ç»§æ‰¿ã€<code>call</code> ä¸ <code>apply</code> æ–¹æ³•çš„ä½œç”¨ã€æ„é€ å‡½æ•°ç»§æ‰¿ã€ä¸­ä»‹ç©ºå¯¹è±¡æ¨¡å¼ç­‰å…³é”®æ¦‚å¿µå±•å¼€æ·±å…¥è§£æï¼Œå¹¶ç»“åˆå®é™…ä»£ç ç¤ºä¾‹å¸®åŠ©è¯»è€…ç†è§£è¿™ä¸€çµæ´»è€Œå¼ºå¤§çš„ç»§æ‰¿æœºåˆ¶ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€å‡½æ•°è°ƒç”¨ä¸­çš„ this æŒ‡å‘ï¼šcall ä¸ apply</h3>
<p>åœ¨ JavaScript ä¸­ï¼Œå‡½æ•°æ˜¯ç¬¬ä¸€ç±»å¯¹è±¡ï¼Œè¿™æ„å‘³ç€å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ã€èµ‹å€¼ç»™å˜é‡ï¼Œä¹Ÿå¯ä»¥æ‹¥æœ‰è‡ªå·±çš„å±æ€§å’Œæ–¹æ³•ã€‚å…¶ä¸­ï¼Œ<code>call</code> å’Œ <code>apply</code> æ˜¯æ‰€æœ‰å‡½æ•°éƒ½å…·å¤‡çš„ä¸¤ä¸ªå†…ç½®æ–¹æ³•ï¼Œç”¨äº<strong>æ˜¾å¼æŒ‡å®šå‡½æ•°æ‰§è¡Œæ—¶çš„ <code>this</code> ä¸Šä¸‹æ–‡</strong>ã€‚</p>
<h4 data-id="heading-2">1.1 call ä¸ apply çš„åŸºæœ¬ç”¨æ³•</h4>
<ul>
<li><strong><code>fn.call(thisArg, arg1, arg2, ...)</code></strong> ï¼šç¬¬ä¸€ä¸ªå‚æ•°ä¸ºÂ <code>this</code>Â çš„ç»‘å®šå¯¹è±¡ï¼Œå…¶ä½™å‚æ•°é€ä¸ªä¼ å…¥ã€‚</li>
<li><strong><code>fn.apply(thisArg, [arg1, arg2, ...])</code></strong> ï¼šç¬¬ä¸€ä¸ªå‚æ•°åŒæ ·ä¸ºÂ <code>this</code>Â çš„ç»‘å®šå¯¹è±¡ï¼Œä½†åç»­å‚æ•°ä»¥æ•°ç»„å½¢å¼ä¼ å…¥ã€‚</li>
</ul>
<p>ä¸¤è€…çš„æ ¸å¿ƒåŒºåˆ«ä»…åœ¨äº<strong>å‚æ•°ä¼ é€’æ–¹å¼</strong>ï¼ŒåŠŸèƒ½å®Œå…¨ä¸€è‡´ï¼š<strong>ç«‹å³æ‰§è¡Œå‡½æ•°å¹¶ç»‘å®šæŒ‡å®šçš„ <code>this</code></strong>ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript">javascript
ç¼–è¾‘
<span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">greeting</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${greeting}</span>, I'm <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>);
}

<span class="hljs-keyword">const</span> person = { <span class="hljs-attr">name</span>: <span class="hljs-string">'Alice'</span> };
greet.<span class="hljs-title function_">call</span>(person, <span class="hljs-string">'Hello'</span>);   <span class="hljs-comment">// Hello, I'm Alice</span>
greet.<span class="hljs-title function_">apply</span>(person, [<span class="hljs-string">'Hi'</span>]);   <span class="hljs-comment">// Hi, I'm Alice</span>
</code></pre>
<h4 data-id="heading-3">1.2 åœ¨æ„é€ å‡½æ•°ç»§æ‰¿ä¸­çš„åº”ç”¨</h4>
<p>åœ¨æ¨¡æ‹Ÿâ€œç±»ç»§æ‰¿â€æ—¶ï¼Œå­ç±»æ„é€ å‡½æ•°å¸¸éœ€è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ä»¥åˆå§‹åŒ–å®ä¾‹å±æ€§ã€‚æ­¤æ—¶ï¼Œ<code>call</code> æˆ– <code>apply</code> è¢«ç”¨æ¥å°†çˆ¶ç±»æ„é€ å‡½æ•°çš„ <code>this</code> ç»‘å®šåˆ°å­ç±»å®ä¾‹ä¸Šï¼š</p>
<pre><code class="hljs language-ini" lang="ini">javascript
ç¼–è¾‘
function Animal(name, age) {
  <span class="hljs-attr">this.name</span> = name<span class="hljs-comment">;</span>
  <span class="hljs-attr">this.age</span> = age<span class="hljs-comment">;</span>
}

function Cat(color, name, age) {
  // å°† Animal çš„ this æŒ‡å‘å½“å‰ Cat å®ä¾‹
  Animal.apply(this, <span class="hljs-section">[name, age]</span>)<span class="hljs-comment">; // æˆ– Animal.call(this, name, age);</span>
  <span class="hljs-attr">this.color</span> = color<span class="hljs-comment">;</span>
}
</code></pre>
<p>è¿™æ ·ï¼Œ<code>Cat</code> å®ä¾‹ä¸ä»…æ‹¥æœ‰è‡ªå·±çš„ <code>color</code> å±æ€§ï¼Œè¿˜é€šè¿‡çˆ¶ç±»æ„é€ å‡½æ•°è·å¾—äº† <code>name</code> å’Œ <code>age</code>ã€‚</p>
<hr/>
<h3 data-id="heading-4">äºŒã€åŸå‹ç»§æ‰¿ï¼šå…±äº«æ–¹æ³•çš„å…³é”®</h3>
<p>ä»…ä»…é€šè¿‡æ„é€ å‡½æ•°ç»§æ‰¿å±æ€§æ˜¯ä¸å¤Ÿçš„â€”â€”æ–¹æ³•è‹¥å®šä¹‰åœ¨æ„é€ å‡½æ•°å†…éƒ¨ï¼Œä¼šå¯¼è‡´æ¯ä¸ªå®ä¾‹éƒ½æ‹¥æœ‰ç‹¬ç«‹å‰¯æœ¬ï¼Œæµªè´¹å†…å­˜ã€‚å› æ­¤ï¼Œ<strong>æ–¹æ³•åº”å®šä¹‰åœ¨åŸå‹ï¼ˆprototypeï¼‰ä¸Š</strong>ï¼Œé€šè¿‡åŸå‹é“¾å®ç°å…±äº«ã€‚</p>
<h4 data-id="heading-5">2.1 ç›´æ¥èµ‹å€¼åŸå‹çš„é—®é¢˜</h4>
<p>ä¸€ç§çœ‹ä¼¼ç®€å•çš„ç»§æ‰¿æ–¹å¼æ˜¯ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">javascript
ç¼–è¾‘
<span class="hljs-attr">Cat.prototype</span> = Animal.prototype<span class="hljs-comment">;</span>
</code></pre>
<p>ä½†è¿™ä¼šå¯¼è‡´<strong>çˆ¶å­ç±»å…±äº«åŒä¸€ä¸ªåŸå‹å¯¹è±¡</strong>ã€‚ä¸€æ—¦ä¿®æ”¹ <code>Cat.prototype</code>ï¼ˆå¦‚æ·»åŠ æ–°æ–¹æ³•ï¼‰ï¼Œ<code>Animal.prototype</code> ä¹Ÿä¼šè¢«æ±¡æŸ“ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">javascript
ç¼–è¾‘
<span class="hljs-title class_">Cat</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">meow</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) { <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Meow!'</span>); };
<span class="hljs-comment">// æ­¤æ—¶ Animal.prototype ä¹Ÿæ‹¥æœ‰äº† meow æ–¹æ³•ï¼</span>
</code></pre>
<p>è¿™æ˜¾ç„¶è¿èƒŒäº†å°è£…åŸåˆ™ã€‚</p>
<h4 data-id="heading-6">2.2 ä½¿ç”¨ç©ºå¯¹è±¡ä½œä¸ºä¸­ä»‹ï¼ˆå¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ï¼‰</h4>
<p>ä¸ºè§£å†³ä¸Šè¿°é—®é¢˜ï¼Œä¸šç•Œæ™®éé‡‡ç”¨â€œ<strong>ä¸­ä»‹ç©ºå¯¹è±¡</strong>â€æ¨¡å¼ï¼ˆä¹Ÿç§°å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">javascript
ç¼–è¾‘
<span class="hljs-keyword">function</span> <span class="hljs-title function_">extend</span>(<span class="hljs-params">Parent, Child</span>) {
  <span class="hljs-keyword">var</span> F = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {};          <span class="hljs-comment">// åˆ›å»ºç©ºæ„é€ å‡½æ•°</span>
  F.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Parent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>; <span class="hljs-comment">// å°†å…¶åŸå‹æŒ‡å‘çˆ¶ç±»åŸå‹</span>
  <span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_">F</span>();      <span class="hljs-comment">// å­ç±»åŸå‹ = ç©ºå‡½æ•°å®ä¾‹</span>
  <span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Child</span>; <span class="hljs-comment">// ä¿®æ­£ constructor æŒ‡å‘</span>
}
</code></pre>
<h5 data-id="heading-7">ä¸ºä»€ä¹ˆæœ‰æ•ˆï¼Ÿ</h5>
<ul>
<li><code>F</code>Â æ˜¯ä¸€ä¸ªç©ºå‡½æ•°ï¼Œå…¶å®ä¾‹Â <code>new F()</code>Â å‡ ä¹ä¸æºå¸¦é¢å¤–å±æ€§ã€‚</li>
<li><code>new F()</code>Â çš„Â <code>__proto__</code>Â æŒ‡å‘Â <code>Parent.prototype</code>ï¼Œå½¢æˆåŸå‹é“¾ã€‚</li>
<li>ä¿®æ”¹Â <code>Child.prototype</code>Â ä¸ä¼šå½±å“Â <code>Parent.prototype</code>ï¼Œå› ä¸ºå®ƒä»¬æ˜¯<strong>ä¸åŒçš„å¯¹è±¡</strong>ã€‚</li>
</ul>
<p>æœ€ç»ˆåŸå‹é“¾ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">text
ç¼–è¾‘
cat.<span class="hljs-property">__proto__</span> â†’ <span class="hljs-keyword">new</span> <span class="hljs-title function_">F</span>() â†’ <span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> â†’ <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>
</code></pre>
<hr/>
<h3 data-id="heading-8">ä¸‰ã€å®Œæ•´ç»§æ‰¿ç¤ºä¾‹åˆ†æ</h3>
<p>ç»“åˆä¸Šè¿°æŠ€æœ¯ï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºä¸€ä¸ªå¥å£®çš„ç»§æ‰¿ä½“ç³»ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">javascript
ç¼–è¾‘
function Animal(name, age) {
  <span class="hljs-attr">this.name</span> = name<span class="hljs-comment">;</span>
  <span class="hljs-attr">this.age</span> = age<span class="hljs-comment">;</span>
}
<span class="hljs-attr">Animal.prototype.species</span> = <span class="hljs-string">'åŠ¨ç‰©'</span><span class="hljs-comment">;</span>
<span class="hljs-attr">Animal.prototype.breathe</span> = function() { console.log(<span class="hljs-string">'å‘¼å¸'</span>)<span class="hljs-comment">; };</span>

function Cat(name, age, color) {
  Animal.apply(this, <span class="hljs-section">[name, age]</span>)<span class="hljs-comment">; // æ„é€ å‡½æ•°ç»§æ‰¿å±æ€§</span>
  <span class="hljs-attr">this.color</span> = color<span class="hljs-comment">;</span>
}

// åŸå‹ç»§æ‰¿æ–¹æ³•
function extend(Parent, Child) {
  var <span class="hljs-attr">F</span> = function() {}<span class="hljs-comment">;</span>
  <span class="hljs-attr">F.prototype</span> = Parent.prototype<span class="hljs-comment">;</span>
  <span class="hljs-attr">Child.prototype</span> = new F()<span class="hljs-comment">;</span>
  <span class="hljs-attr">Child.prototype.constructor</span> = Child<span class="hljs-comment">;</span>
}
extend(Animal, Cat)<span class="hljs-comment">;</span>

// æ‰©å±•å­ç±»ç‰¹æœ‰æ–¹æ³•
<span class="hljs-attr">Cat.prototype.eat</span> = function() { console.log(<span class="hljs-string">"eat jerry"</span>)<span class="hljs-comment">; };</span>

const <span class="hljs-attr">cat</span> = new Cat(<span class="hljs-string">'åŠ è²çŒ«'</span>, <span class="hljs-number">2</span>, <span class="hljs-string">'é»„è‰²'</span>)<span class="hljs-comment">;</span>
console.log(cat.species)<span class="hljs-comment">; // åŠ¨ç‰©ï¼ˆæ¥è‡ª Animal.prototypeï¼‰</span>
cat.eat()<span class="hljs-comment">;                // eat jerry</span>
cat.breathe()<span class="hljs-comment">;            // å‘¼å¸</span>
</code></pre>
<p>æ­¤æ¨¡å¼å®ç°äº†ï¼š</p>
<ul>
<li><strong>å±æ€§ç»§æ‰¿</strong>ï¼šé€šè¿‡Â <code>apply/call</code>Â å¤ç”¨çˆ¶ç±»æ„é€ é€»è¾‘ï¼›</li>
<li><strong>æ–¹æ³•ç»§æ‰¿</strong>ï¼šé€šè¿‡ä¸­ä»‹åŸå‹é“¾å…±äº«çˆ¶ç±»æ–¹æ³•ï¼›</li>
<li><strong>éš”ç¦»æ€§</strong>ï¼šå­ç±»æ‰©å±•ä¸å½±å“çˆ¶ç±»ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-9">å››ã€åŠ¨æ€è¯­è¨€ç‰¹æ€§ï¼šå±æ€§é®è”½ï¼ˆShadowingï¼‰</h3>
<p>JavaScript æ˜¯åŠ¨æ€è¯­è¨€ï¼Œå¯¹è±¡å±æ€§å¯åœ¨è¿è¡Œæ—¶ä¿®æ”¹ã€‚å½“å®ä¾‹å±æ€§ä¸åŸå‹å±æ€§åŒåæ—¶ï¼Œ<strong>å®ä¾‹å±æ€§ä¼šâ€œé®è”½â€åŸå‹å±æ€§</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">javascript
ç¼–è¾‘
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Cat</span>(<span class="hljs-params"/>) {}
<span class="hljs-title class_">Cat</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">species</span> = <span class="hljs-string">'çŒ«ç§‘åŠ¨ç‰©'</span>;

<span class="hljs-keyword">const</span> cat = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(cat.<span class="hljs-property">species</span>); <span class="hljs-comment">// çŒ«ç§‘åŠ¨ç‰©</span>

cat.<span class="hljs-property">species</span> = <span class="hljs-string">'hello'</span>;    <span class="hljs-comment">// åœ¨å®ä¾‹ä¸Šåˆ›å»ºæ–°å±æ€§</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(cat.<span class="hljs-property">species</span>); <span class="hljs-comment">// hello</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Cat</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">species</span>); <span class="hljs-comment">// ä»æ˜¯ çŒ«ç§‘åŠ¨ç‰©</span>
</code></pre>
<p>è¿™ä½“ç°äº† JavaScript çš„<strong>å±æ€§æŸ¥æ‰¾æœºåˆ¶</strong>ï¼šå…ˆæŸ¥è‡ªèº«ï¼Œå†æ²¿åŸå‹é“¾å‘ä¸ŠæŸ¥æ‰¾ã€‚</p>
<hr/>
<h3 data-id="heading-10">äº”ã€æ€»ç»“ï¼šJavaScript ç»§æ‰¿çš„æœ€ä½³å®è·µ</h3>
<p>å°½ç®¡ ES6 å¼•å…¥äº† <code>class</code> è¯­æ³•ç³–ï¼Œä½†å…¶åº•å±‚ä»åŸºäºåŸå‹é“¾ã€‚ç†è§£ä¼ ç»Ÿç»§æ‰¿æœºåˆ¶å¯¹æŒæ¡ JavaScript æœ¬è´¨è‡³å…³é‡è¦ã€‚æ¨èä½¿ç”¨ä»¥ä¸‹ç»„åˆæ¨¡å¼ï¼š</p>
<ol>
<li><strong>æ„é€ å‡½æ•°ç»§æ‰¿å±æ€§</strong>ï¼šä½¿ç”¨Â <code>Parent.apply(this, arguments)</code>ï¼›</li>
<li><strong>åŸå‹ç»§æ‰¿æ–¹æ³•</strong>ï¼šé€šè¿‡ç©ºå‡½æ•°ä¸­ä»‹å®ç°Â <code>Child.prototype = new F()</code>ï¼›</li>
<li><strong>ä¿®æ­£ constructor</strong>ï¼šç¡®ä¿Â <code>Child.prototype.constructor === Child</code>ã€‚</li>
</ol>
<p>è¿™ç§â€œ<strong>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿</strong>â€å…¼é¡¾æ•ˆç‡ä¸å®‰å…¨æ€§ï¼Œæ˜¯ ES5 æ—¶ä»£æœ€æˆç†Ÿçš„ç»§æ‰¿æ–¹æ¡ˆã€‚</p>
<p>éšç€ç°ä»£å¼€å‘è½¬å‘ ES6+ï¼Œæˆ‘ä»¬è™½å¯ç›´æ¥ä½¿ç”¨ <code>class extends</code>ï¼Œä½†å…¶èƒŒåä»æ˜¯ä¸Šè¿°åŸç†çš„å°è£…ã€‚å”¯æœ‰æ·±å…¥ç†è§£åŸå‹ã€<code>this</code>ã€<code>call/apply</code> åŠåŸå‹é“¾ï¼Œæ‰èƒ½çœŸæ­£é©¾é©­ JavaScript çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ã€‚</p>
<blockquote>
<p><strong>æç¤º</strong>ï¼šåœ¨å®é™…é¡¹ç›®ä¸­ï¼Œé™¤ééœ€è¦å…¼å®¹è€æ—§ç¯å¢ƒï¼Œå¦åˆ™å»ºè®®ä¼˜å…ˆä½¿ç”¨ <code>class</code> è¯­æ³•ï¼Œå®ƒæ›´ç®€æ´ä¸”ä¸æ˜“å‡ºé”™ã€‚ä½†é¢è¯•æˆ–åº•å±‚æ¡†æ¶å¼€å‘ä¸­ï¼ŒåŸå‹ç»§æ‰¿çŸ¥è¯†ä»ä¸å¯æˆ–ç¼ºã€‚</p>
</blockquote>
<hr/>
<p>é€šè¿‡æœ¬æ–‡çš„ç³»ç»Ÿæ¢³ç†ï¼Œç›¸ä¿¡ä½ å·²å¯¹ JavaScript åŸå‹ç»§æ‰¿æœºåˆ¶æœ‰äº†æ›´æ¸…æ™°çš„è®¤è¯†ã€‚æŒæ¡è¿™äº›åŸºç¡€ï¼Œå°†ä¸ºä½ åœ¨å‰ç«¯å·¥ç¨‹åŒ–ã€æ¡†æ¶åŸç†ç†è§£ä¹ƒè‡³ç®—æ³•è®¾è®¡ä¸­æ‰“ä¸‹åšå®æ ¹åŸºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Androidåç¨‹åº•å±‚åŸç†]]></title>    <link>https://juejin.cn/post/7581292270961786890</link>    <guid>https://juejin.cn/post/7581292270961786890</guid>    <pubDate>2025-12-08T14:14:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581292270961786890" data-draft-id="7581359420391735323" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Androidåç¨‹åº•å±‚åŸç†"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-08T14:14:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Poorguy9527"/> <meta itemprop="url" content="https://juejin.cn/user/1746465251931063"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Androidåç¨‹åº•å±‚åŸç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1746465251931063/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Poorguy9527
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T14:14:12.000Z" title="Mon Dec 08 2025 14:14:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å› ä¸ºAIï¼Œæ‰€ä»¥deepseek</p>
</blockquote>
<p>æ¥æ·±å…¥æ¢è®¨ä¸€ä¸‹Â <strong>Kotlin åç¨‹åœ¨ Androidï¼ˆæˆ–è€…è¯´ JVMï¼‰ä¸Šçš„åº•å±‚å®ç°åŸç†</strong>ã€‚ç†è§£è¿™ä¸ªåŸç†çš„å…³é”®åœ¨äºæ˜ç™½ï¼š<strong>åç¨‹å¹¶ä¸æ˜¯ä¸€ä¸ª JVM æˆ–æ“ä½œç³»ç»Ÿçº§åˆ«çš„åŸç”Ÿæ¦‚å¿µï¼Œè€Œæ˜¯å®Œå…¨é€šè¿‡ Kotlin ç¼–è¯‘å™¨å’Œæ ‡å‡†åº“åœ¨ç”¨æˆ·æ€å®ç°çš„ä¸€å¥—é«˜çº§æ¡†æ¶ã€‚</strong></p>
<p>å®ƒçš„æ ¸å¿ƒå¯ä»¥æ¦‚æ‹¬ä¸ºï¼š<strong>ç¼–è¯‘æ—¶ CPSï¼ˆç»­ä½“ä¼ é€’é£æ ¼ï¼‰è½¬æ¢ + è¿è¡Œæ—¶çŠ¶æ€æœº + è°ƒåº¦å™¨</strong>ã€‚</p>
<h3 data-id="heading-0">1. æ ¸å¿ƒæ€æƒ³ï¼šä»â€œæŒ‚èµ·â€å’Œâ€œæ¢å¤â€è¯´èµ·</h3>
<p>åç¨‹çš„æ ¸å¿ƒèƒ½åŠ›æ˜¯Â  <strong>â€œæŒ‚èµ·è€Œä¸é˜»å¡çº¿ç¨‹â€</strong> ã€‚</p>
<ul>
<li><strong>æŒ‚èµ·</strong>ï¼šæš‚åœå½“å‰åç¨‹çš„æ‰§è¡Œï¼Œé‡Šæ”¾å®ƒå ç”¨çš„çº¿ç¨‹èµ„æºï¼Œå»åšåˆ«çš„äº‹æƒ…ã€‚</li>
<li><strong>æ¢å¤</strong>ï¼šåœ¨åˆé€‚çš„æ—¶æœºï¼Œåœ¨ç›¸åŒæˆ–ä¸åŒçš„çº¿ç¨‹ä¸Šï¼Œä»æš‚åœçš„åœ°æ–¹ç»§ç»­æ‰§è¡Œã€‚</li>
</ul>
<p>ä¸ºäº†å®ç°è¿™ä¸ªï¼ŒKotlin åç¨‹ä¾èµ–ä¸‰ä¸ªåŸºçŸ³ï¼š</p>
<ol>
<li><strong><code>suspend</code>Â å…³é”®å­—</strong>ï¼šæ ‡è®°å¯æŒ‚èµ·å‡½æ•°ã€‚</li>
<li><strong><code>Continuation</code>ï¼ˆç»­ä½“ï¼‰</strong> ï¼šä¸€ä¸ªæ ¸å¿ƒæ¥å£ï¼Œä»£è¡¨â€œåœ¨æŸä¸ªæŒ‚èµ·ç‚¹ä¹‹åéœ€è¦ç»§ç»­æ‰§è¡Œçš„ä»£ç å’ŒçŠ¶æ€â€ã€‚å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå›è°ƒã€‚</li>
<li><strong>ç¼–è¯‘å™¨é­”æ³•</strong>ï¼šç¼–è¯‘å™¨å°†Â <code>suspend</code>Â å‡½æ•°è½¬æ¢ä¸ºä¸€ä¸ªçŠ¶æ€æœºã€‚</li>
</ol>
<h3 data-id="heading-1">2. ç¼–è¯‘å™¨çš„å·¥ä½œï¼šCPS è½¬æ¢ä¸çŠ¶æ€æœº</h3>
<p>è¿™æ˜¯åç¨‹å®ç°ä¸­æœ€ç²¾å¦™çš„éƒ¨åˆ†ã€‚ç¼–è¯‘å™¨ä¼šé‡å†™ä½ çš„Â <code>suspend</code>Â å‡½æ•°ã€‚</p>
<p><strong>a) åŸºç¡€è½¬æ¢ï¼šæ·»åŠ  Continuation å‚æ•°</strong><br/>
ä¸€ä¸ªæ™®é€šçš„æŒ‚èµ·å‡½æ•°ï¼š</p>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchUserData</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>)</span></span>: UserData
</code></pre>
<p>åœ¨ç¼–è¯‘åï¼Œå®ƒçš„ç­¾åä¼šå˜æˆç±»ä¼¼è¿™æ ·ï¼ˆJavaè¡¨ç¤ºï¼‰ï¼š</p>
<p>java</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Object</span> <span class="hljs-title function_">fetchUserData</span>(<span class="hljs-title class_">String</span> userId, <span class="hljs-title class_">Continuation</span>&lt;<span class="hljs-title class_">UserData</span>&gt; continuation)
</code></pre>
<ul>
<li>è¿”å›ç±»å‹å˜æˆäº†Â <code>Object</code>ï¼Œç”¨äºè¿”å›ä¸€ä¸ªç‰¹æ®Šæ ‡è®°ï¼ˆå¦‚Â <code>COROUTINE_SUSPENDED</code>ï¼‰æˆ–ç›´æ¥çš„ç»“æœã€‚</li>
<li>å¤šäº†ä¸€ä¸ªÂ <code>Continuation</code>Â å‚æ•°ï¼Œç”¨äºä¼ é€’å›è°ƒã€‚</li>
</ul>
<p><strong>b) çŠ¶æ€æœºç”Ÿæˆ</strong><br/>
å¯¹äºä¸€ä¸ªåŒ…å«å¤šä¸ªæŒ‚èµ·ç‚¹ï¼ˆä¾‹å¦‚å¤šä¸ªÂ <code>suspend</code>Â å‡½æ•°è°ƒç”¨ï¼‰çš„Â <code>suspend</code>Â å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šå°†å…¶è½¬æ¢æˆä¸€ä¸ª<strong>çŠ¶æ€æœº</strong>ã€‚</p>
<p><strong>çœ‹ä¸€ä¸ªä¾‹å­ï¼š</strong></p>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æºä»£ç </span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadAndCombineData</span><span class="hljs-params">()</span></span>: Result {
    <span class="hljs-keyword">val</span> data1 = fetchDataFromNetwork() <span class="hljs-comment">// æŒ‚èµ·ç‚¹1</span>
    <span class="hljs-keyword">val</span> data2 = fetchDataFromDatabase() <span class="hljs-comment">// æŒ‚èµ·ç‚¹2</span>
    <span class="hljs-keyword">return</span> combine(data1, data2)
}
</code></pre>
<p><strong>ç¼–è¯‘å™¨ä¼šå°†å…¶é‡å†™ä¸ºç±»ä¼¼ä»¥ä¸‹ä¼ªä»£ç çš„çŠ¶æ€æœºï¼š</strong></p>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä¼ªä»£ç ï¼Œå±•ç¤ºæ€æƒ³</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadAndCombineData</span><span class="hljs-params">(continuation: <span class="hljs-type">Continuation</span>&lt;<span class="hljs-type">Result</span>&gt;)</span></span>: Any? {
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoadAndCombineStateMachine</span>(
        completion: Continuation&lt;Result&gt;
    ) : CoroutineImpl(completion) {
        
        <span class="hljs-comment">// çŠ¶æ€æœºçš„å±€éƒ¨å˜é‡</span>
        <span class="hljs-keyword">var</span> data1: Data? = <span class="hljs-literal">null</span>
        <span class="hljs-keyword">var</span> data2: Data? = <span class="hljs-literal">null</span>
        
        <span class="hljs-comment">// å½“å‰çŠ¶æ€</span>
        <span class="hljs-keyword">var</span> label = <span class="hljs-number">0</span>
        
        <span class="hljs-comment">// çŠ¶æ€æœºçš„å…¥å£ï¼Œä¼šè¢«å¤šæ¬¡è°ƒç”¨ä»¥æ¢å¤æ‰§è¡Œ</span>
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">invokeSuspend</span><span class="hljs-params">(result: <span class="hljs-type">Result</span>&lt;<span class="hljs-type">Any</span>?&gt;)</span></span>: Any? {
            <span class="hljs-keyword">when</span> (label) {
                <span class="hljs-number">0</span> -&gt; {
                    <span class="hljs-comment">// ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼ŒçŠ¶æ€0</span>
                    label = <span class="hljs-number">1</span>
                    <span class="hljs-comment">// è°ƒç”¨ç¬¬ä¸€ä¸ªæŒ‚èµ·å‡½æ•°ï¼Œä¼ å…¥ thisï¼ˆä½œä¸º Continuationï¼‰</span>
                    <span class="hljs-keyword">val</span> result = fetchDataFromNetwork(<span class="hljs-keyword">this</span>)
                    <span class="hljs-comment">// å¦‚æœè¿”å›äº†æŒ‚èµ·æ ‡è®°ï¼Œåˆ™â€œæŒ‚èµ·â€ï¼Œå°†æ§åˆ¶æµè¿”å›ç»™è°ƒç”¨è€…</span>
                    <span class="hljs-keyword">if</span> (result == COROUTINE_SUSPENDED) <span class="hljs-keyword">return</span> COROUTINE_SUSPENDED
                    <span class="hljs-comment">// å¦‚æœç›´æ¥è¿”å›ç»“æœï¼Œåˆ™â€œæ¢å¤â€ï¼Œç»§ç»­æ‰§è¡ŒçŠ¶æ€1ï¼ˆæ¨¡æ‹ŸæŒ‚èµ·æ¢å¤ï¼‰</span>
                }
                <span class="hljs-number">1</span> -&gt; {
                    <span class="hljs-comment">// æ¢å¤ç‚¹1ï¼Œæ‹¿åˆ° fetchDataFromNetwork çš„ç»“æœ</span>
                    data1 = result <span class="hljs-keyword">as</span> Data
                    label = <span class="hljs-number">2</span>
                    <span class="hljs-comment">// è°ƒç”¨ç¬¬äºŒä¸ªæŒ‚èµ·å‡½æ•°</span>
                    <span class="hljs-keyword">val</span> result = fetchDataFromDatabase(<span class="hljs-keyword">this</span>)
                    <span class="hljs-keyword">if</span> (result == COROUTINE_SUSPENDED) <span class="hljs-keyword">return</span> COROUTINE_SUSPENDED
                }
                <span class="hljs-number">2</span> -&gt; {
                    <span class="hljs-comment">// æ¢å¤ç‚¹2ï¼Œæ‹¿åˆ° fetchDataFromDatabase çš„ç»“æœ</span>
                    data2 = result <span class="hljs-keyword">as</span> Data
                    label = -<span class="hljs-number">1</span> <span class="hljs-comment">// ç»“æŸçŠ¶æ€</span>
                    <span class="hljs-comment">// æ‰§è¡Œæœ€åé€»è¾‘å¹¶è¿”å›æœ€ç»ˆç»“æœ</span>
                    <span class="hljs-keyword">return</span> combine(data1!!, data2!!)
                }
                <span class="hljs-keyword">else</span> -&gt; <span class="hljs-keyword">throw</span> IllegalStateException()
            }
            <span class="hljs-comment">// å¾ªç¯æˆ–é€’å½’è°ƒç”¨ä»¥æ¨è¿›çŠ¶æ€æœºï¼ˆå®é™…å®ç°æ›´é«˜æ•ˆï¼Œä½†é€»è¾‘å¦‚æ­¤ï¼‰</span>
        }
    }
    <span class="hljs-comment">// ... åˆ›å»ºå’Œå¯åŠ¨çŠ¶æ€æœºçš„é€»è¾‘</span>
}
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li>ç¼–è¯‘å™¨å°†å‡½æ•°ä½“æ‹†åˆ†åˆ°Â <strong><code>label</code>Â æ ‡è®°çš„ä¸åŒåˆ†æ”¯</strong>ï¼Œæ¯ä¸ªæŒ‚èµ·ç‚¹å¯¹åº”ä¸€ä¸ªÂ <code>label</code>ã€‚</li>
<li>å±€éƒ¨å˜é‡ï¼ˆ<code>data1</code>,Â <code>data2</code>ï¼‰è¢«æå‡ä¸º<strong>çŠ¶æ€æœºç±»çš„æˆå‘˜å˜é‡</strong>ï¼Œä»¥ä¾¿åœ¨æŒ‚èµ·åèƒ½å¤Ÿä¿æŒã€‚</li>
<li>æ¯æ¬¡è°ƒç”¨ï¼ˆæˆ–æ¢å¤ï¼‰æ—¶ï¼Œæ£€æŸ¥Â <code>label</code>ï¼Œè·³è½¬åˆ°å¯¹åº”ä»£ç å—æ‰§è¡Œã€‚</li>
<li>å½“è°ƒç”¨å¦ä¸€ä¸ªÂ <code>suspend</code>Â å‡½æ•°æ—¶ï¼Œä¼šä¼ å…¥å½“å‰çš„Â <code>Continuation</code>ï¼ˆå³è¿™ä¸ªçŠ¶æ€æœºå®ä¾‹ï¼‰ã€‚</li>
<li>å¦‚æœè¢«è°ƒç”¨çš„Â <code>suspend</code>Â å‡½æ•°éœ€è¦æŒ‚èµ·ï¼Œå®ƒä¼šè¿”å›Â <code>COROUTINE_SUSPENDED</code>ï¼Œç„¶åè¿™ä¸ªå‡½æ•°ä¹Ÿè¿”å›Â <code>COROUTINE_SUSPENDED</code>ï¼Œåç¨‹æ¡†æ¶å°±çŸ¥é“æ­¤åç¨‹å·²è¢«æŒ‚èµ·ã€‚</li>
<li>å½“å¼‚æ­¥æ“ä½œå®Œæˆæ—¶ï¼Œä¼šè°ƒç”¨Â <code>Continuation.resumeWith(result)</code>ï¼Œè¿™æœ¬è´¨ä¸Šå°±æ˜¯<strong>å›è°ƒ</strong>ï¼Œå®ƒä¼šé‡æ–°è§¦å‘Â <code>invokeSuspend</code>ï¼Œå¹¶æ ¹æ®ä¹‹å‰ä¿å­˜çš„Â <code>label</code>Â è·³åˆ°æ­£ç¡®çš„ä½ç½®ï¼Œå¹¶æºå¸¦ç»“æœ (<code>result</code>)ï¼Œç»§ç»­æ‰§è¡Œã€‚</li>
</ul>
<h3 data-id="heading-2">3. è¿è¡Œæ—¶ï¼šåç¨‹çš„æ„å»ºã€è°ƒåº¦ä¸æ‰§è¡Œ</h3>
<p>ç¼–è¯‘å™¨åˆ›å»ºäº†çŠ¶æ€æœºå’ŒÂ <code>Continuation</code>ï¼Œè€ŒÂ <code>kotlinx.coroutines</code>Â åº“æä¾›äº†è¿è¡Œæ—¶çš„éª¨æ¶ã€‚</p>
<p><strong>a) åç¨‹æ„å»ºå™¨ï¼ˆ<code>launch</code>,Â <code>async</code>Â ç­‰ï¼‰</strong><br/>
å½“ä½ è°ƒç”¨Â <code>launch { ... }</code>Â æ—¶ï¼Œå®ƒä¼šåšå‡ ä»¶äº‹ï¼š</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªæ–°çš„åç¨‹å®ä¾‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªÂ <code>Continuation</code>ã€‚</li>
<li>ä¸ºæ–°åç¨‹æä¾›<strong>ä¸Šä¸‹æ–‡</strong>ï¼ˆ<code>CoroutineContext</code>ï¼‰ï¼Œæœ€é‡è¦çš„éƒ¨åˆ†æ˜¯Â <strong><code>CoroutineDispatcher</code>ï¼ˆè°ƒåº¦å™¨ï¼‰</strong> Â å’ŒÂ <strong><code>Job</code></strong>ã€‚</li>
<li>æœ€ç»ˆï¼Œä¼šè°ƒç”¨Â <code>CoroutineStart.invoke</code>Â æ¥å¯åŠ¨åç¨‹ï¼Œæœ€ç»ˆä¼šè°ƒç”¨åˆ°ä½ çš„æŒ‚èµ·lambdaçš„Â <code>Continuation.resumeWith</code>ã€‚</li>
</ol>
<p><strong>b) è°ƒåº¦å™¨ï¼ˆ<code>Dispatchers</code>ï¼‰</strong></p>
<ul>
<li><code>Dispatchers.Main</code>ï¼šåœ¨ Android ä¸»çº¿ç¨‹ï¼ˆUIçº¿ç¨‹ï¼‰ä¸Šæ‰§è¡Œã€‚Android ä¸Šæ˜¯é€šè¿‡Â <code>Handler.post</code>Â å®ç°çš„ã€‚</li>
<li><code>Dispatchers.Default</code>ï¼šç”¨äº CPU å¯†é›†å‹ä»»åŠ¡ï¼Œæ˜¯ä¸€ä¸ªå…±äº«çš„çº¿ç¨‹æ± ã€‚</li>
<li><code>Dispatchers.IO</code>ï¼šç”¨äº IO å¯†é›†å‹ä»»åŠ¡ï¼Œæœ‰æ›´å¤§çš„çº¿ç¨‹æ± ã€‚</li>
<li><code>Dispatchers.Unconfined</code>ï¼šç«‹å³åœ¨å½“å‰çº¿ç¨‹æ‰§è¡Œï¼Œç›´åˆ°ç¬¬ä¸€ä¸ªæŒ‚èµ·ç‚¹ã€‚</li>
</ul>
<p>è°ƒåº¦å™¨çš„æ ¸å¿ƒä½œç”¨ï¼šå†³å®šåœ¨å“ªä¸ªæˆ–å“ªäº›çº¿ç¨‹ä¸Šæ‰§è¡Œåç¨‹çš„ä»£ç å—å’Œæ¢å¤åç¨‹ã€‚å½“åç¨‹ä»æŒ‚èµ·ä¸­æ¢å¤æ—¶ï¼Œ<strong>æ¢å¤ç‚¹ï¼ˆå³Â <code>Continuation.resumeWith</code>ï¼‰çš„ä»£ç ä¼šåœ¨è°ƒåº¦å™¨æŒ‡å®šçš„çº¿ç¨‹ä¸Šæ‰§è¡Œ</strong>ã€‚</p>
<p><strong>c) æŒ‚èµ·å‡½æ•°ï¼ˆå¦‚Â <code>delay</code>,Â <code>withContext</code>,Â <code>suspendCoroutine</code>ï¼‰</strong><br/>
è¿™äº›åº“å‡½æ•°æ˜¯çœŸæ­£è§¦å‘æŒ‚èµ·å’Œæ¢å¤çš„åœ°æ–¹ã€‚ä»¥Â <code>suspendCoroutine</code>Â ä¸ºä¾‹ï¼š</p>
<p>kotlin</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">suspendCoroutine</span><span class="hljs-params">(block: (<span class="hljs-type">Continuation</span>&lt;<span class="hljs-type">T</span>&gt;) -&gt; <span class="hljs-type">Unit</span>)</span></span>: T
</code></pre>
<p>å®ƒåœ¨å†…éƒ¨æŒ‚èµ·å½“å‰åç¨‹ï¼Œå¹¶ç»™ä½ ä¸€ä¸ªÂ <code>Continuation</code>Â å¯¹è±¡ã€‚ä½ å¯ä»¥åœ¨ä½ çš„å¼‚æ­¥å›è°ƒä¸­ï¼Œæ‰‹åŠ¨è°ƒç”¨Â <code>continuation.resume(value)</code>Â æˆ–Â <code>continuation.resumeWithException(e)</code>Â æ¥<strong>æ¢å¤</strong>åç¨‹ã€‚è¿™æ˜¯è¿æ¥ä¼ ç»Ÿå›è°ƒAPIå’Œåç¨‹ä¸–ç•Œçš„æ¡¥æ¢ã€‚</p>
<h3 data-id="heading-3">4. Android ä¸Šçš„ç‰¹æ®Šè€ƒé‡</h3>
<ol>
<li><strong>ä¸»çº¿ç¨‹å®‰å…¨</strong>ï¼š<code>Dispatchers.Main</code>Â æ˜¯ Android åº”ç”¨å¼€å‘çš„æ ¸å¿ƒã€‚åç¨‹é€šè¿‡å®ƒç¡®ä¿äº†Â <code>launch(Dispatchers.Main) { ... }</code>Â å†…éƒ¨çš„ä»£ç å§‹ç»ˆåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œå³ä½¿æ¢å¤ç‚¹æ¥è‡ªåå°çº¿ç¨‹çš„å›è°ƒã€‚è¿™æå¤§åœ°ç®€åŒ–äº† UI æ›´æ–°ã€‚</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸé›†æˆ</strong>ï¼š<code>lifecycleScope</code>Â å’ŒÂ <code>viewModelScope</code>Â æ˜¯ Android ç‹¬æœ‰çš„æ‰©å±•ã€‚å®ƒä»¬æœ¬è´¨ä¸Šæ˜¯ç»‘å®šäº†Â <code>Lifecycle</code>Â æˆ–Â <code>ViewModel</code>Â ç”Ÿå‘½å‘¨æœŸçš„Â <code>CoroutineScope</code>ã€‚å½“Â <code>Activity</code>Â é”€æ¯æˆ–Â <code>ViewModel</code>Â æ¸…ç†æ—¶ï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨å–æ¶ˆå…¶ä½œç”¨åŸŸå†…å¯åŠ¨çš„æ‰€æœ‰åç¨‹ï¼Œé¿å…äº†å†…å­˜æ³„æ¼ã€‚è¿™é€šè¿‡åœ¨ä½œç”¨åŸŸçš„Â <code>CoroutineContext</code>Â ä¸­ç»‘å®šä¸€ä¸ªç‰¹æ®Šçš„Â <code>Job</code>Â æ¥å®ç°ï¼Œè¯¥Â <code>Job</code>Â åœ¨ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶è¢«å–æ¶ˆã€‚</li>
<li><strong>æ€§èƒ½ä¸è½»é‡</strong>ï¼šåç¨‹çš„æŒ‚èµ·æ˜¯ç”¨æˆ·æ€çš„åˆ‡æ¢ï¼Œä¸æ¶‰åŠçº¿ç¨‹çš„é˜»å¡å’Œæ“ä½œç³»ç»Ÿå†…æ ¸è°ƒåº¦ã€‚åœ¨ Android ä¸Šï¼Œåˆ›å»ºæˆåƒä¸Šä¸‡ä¸ªåç¨‹æ˜¯å¯è¡Œçš„ï¼Œè€Œåˆ›å»ºåŒæ ·æ•°é‡çš„çº¿ç¨‹åˆ™ä¼šè€—å°½èµ„æºã€‚è¿™å¯¹äºå¤„ç†å¤§é‡å¹¶å‘ IO æ“ä½œï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ã€æ•°æ®åº“æŸ¥è¯¢ï¼‰ç‰¹åˆ«æœ‰åˆ©ã€‚</li>
</ol>
<h3 data-id="heading-4">æ€»ç»“æµç¨‹å›¾</h3>
<p>text</p>
<pre><code class="hljs language-rust" lang="rust">[ä½ çš„ suspend å‡½æ•°ä»£ç ]
          |
          <span class="hljs-title function_ invoke__">v</span> (ç¼–è¯‘æ—¶)
[çŠ¶æ€æœºç±» + Continuation] (æ¯ä¸ª suspend å‡½æ•°è¢«ç¼–è¯‘æˆä¸€ä¸ªçŠ¶æ€æœº)
          |
          <span class="hljs-title function_ invoke__">v</span> (è¿è¡Œæ—¶ï¼Œé€šè¿‡ launch å¯åŠ¨)
[CoroutineScope.launch] <span class="hljs-punctuation">-&gt;</span> åˆ›å»ºåç¨‹å®ä¾‹ï¼ˆä¹Ÿæ˜¯ä¸€ä¸ªContinuationï¼‰ <span class="hljs-punctuation">-&gt;</span> äº¤ç»™è°ƒåº¦å™¨(Dispatcher)
          |
          v
è°ƒåº¦å™¨å†³å®šåœ¨å“ªä¸ªçº¿ç¨‹æ‰§è¡Œ <span class="hljs-punctuation">-&gt;</span> è°ƒç”¨ `continuation.resumeWith` <span class="hljs-punctuation">-&gt;</span> è¿›å…¥çŠ¶æ€æœºæ‰§è¡Œ
          |
          v
é‡åˆ°å¦ä¸€ä¸ª suspend è°ƒç”¨ï¼ˆå¦‚ `delay`ï¼‰<span class="hljs-punctuation">-&gt;</span> è¿”å› `COROUTINE_SUSPENDED` <span class="hljs-punctuation">-&gt;</span> åç¨‹æŒ‚èµ·ï¼Œçº¿ç¨‹è¢«é‡Šæ”¾
          |
          <span class="hljs-title function_ invoke__">v</span> (ä¸€æ®µæ—¶é—´åï¼Œå¯èƒ½æ˜¯å…¶ä»–çº¿ç¨‹)
`delay` çš„å†…éƒ¨æœºåˆ¶å®Œæˆ <span class="hljs-punctuation">-&gt;</span> è°ƒç”¨ä¹‹å‰ä¿å­˜çš„ `Continuation.resumeWith` <span class="hljs-punctuation">-&gt;</span> é€šçŸ¥è°ƒåº¦å™¨
          |
          v
è°ƒåº¦å™¨å®‰æ’çº¿ç¨‹ï¼ˆå¦‚ä¸»çº¿ç¨‹ï¼‰ <span class="hljs-punctuation">-&gt;</span> å†æ¬¡è°ƒç”¨çŠ¶æ€æœºçš„ `invokeSuspend` <span class="hljs-punctuation">-&gt;</span> æ ¹æ® label è·³è½¬ï¼Œæ¢å¤æ‰§è¡Œ
          |
          v
ç›´åˆ°çŠ¶æ€æœºè¿è¡Œåˆ°ç»“æŸ label <span class="hljs-punctuation">-&gt;</span> è¿”å›æœ€ç»ˆç»“æœ <span class="hljs-punctuation">-&gt;</span> å¯èƒ½æ¢å¤å…¶çˆ¶ Continuationï¼ˆå¦‚æœå­˜åœ¨ï¼‰
</code></pre>
<p>ç®€å•æ¥è¯´ï¼Œ<strong>Kotlin åç¨‹æ˜¯ç¼–è¯‘å™¨é€šè¿‡ CPS è½¬æ¢ç”ŸæˆçŠ¶æ€æœºï¼Œç»“åˆè¿è¡Œæ—¶åº“æä¾›çš„è°ƒåº¦å™¨å’Œæ„å»ºå™¨ï¼Œæ¨¡æ‹Ÿå‡ºçš„ã€æ›´è½»é‡ã€æ›´æ˜“ç”¨çš„å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹ã€‚å®ƒåœ¨ Android ä¸Šé€šè¿‡ä¸ä¸»çº¿ç¨‹Â <code>Handler</code>Â å’Œç”Ÿå‘½å‘¨æœŸç»„ä»¶çš„æ·±åº¦é›†æˆï¼Œæˆä¸ºäº†è§£å†³å¼‚æ­¥å¤„ç†å’Œçº¿ç¨‹åˆ‡æ¢é—®é¢˜çš„æœ€ä½³å®è·µã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è‡ªç ”2025ç‰ˆflutter3.38å®æˆ˜æŠ–éŸ³appçŸ­è§†é¢‘+èŠå¤©+ç›´æ’­å•†åŸç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7581348660823703552</link>    <guid>https://juejin.cn/post/7581348660823703552</guid>    <pubDate>2025-12-08T15:22:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581348660823703552" data-draft-id="7581354812860678196" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è‡ªç ”2025ç‰ˆflutter3.38å®æˆ˜æŠ–éŸ³appçŸ­è§†é¢‘+èŠå¤©+ç›´æ’­å•†åŸç³»ç»Ÿ"/> <meta itemprop="keywords" content="Flutter,Dart,Android"/> <meta itemprop="datePublished" content="2025-12-08T15:22:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xiaoyan2015"/> <meta itemprop="url" content="https://juejin.cn/user/4230576475215165"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è‡ªç ”2025ç‰ˆflutter3.38å®æˆ˜æŠ–éŸ³appçŸ­è§†é¢‘+èŠå¤©+ç›´æ’­å•†åŸç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4230576475215165/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xiaoyan2015
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T15:22:46.000Z" title="Mon Dec 08 2025 15:22:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç»è¿‡åŠä¸ªæœˆé«˜å¼ºåº¦ç ”å‘ï¼Œæœ€æ–°æ¬¾<code>Flutter3.38+Dart3.10</code>æ‰“é€ <strong>çŸ­è§†é¢‘+ç›´æ’­+èŠå¤©</strong>åº”ç”¨ï¼Œæ­£å¼å®Œç»“äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33a2df41474549249f86a0a307541cbb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=kK%2Bi0kAetQF0IHhLRnbSE%2FoXekw%3D" alt="æœªæ ‡é¢˜-aa.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1a59b15b7ca4bf0b4d02242b5dc35ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=Hz0YvdWZuhOEdHS23MiPyUcNOL4%3D" alt="æœªæ ‡é¢˜-3.png" loading="lazy"/></p>
<h2 data-id="heading-0">è¿ç”¨æŠ€æœ¯</h2>
<ul>
<li>ç¼–ç å·¥å…·ï¼šVScode</li>
<li>è·¨å¹³å°æ¡†æ¶ï¼šFlutter3.38.2+Dart3.10.0</li>
<li>çŠ¶æ€ç®¡ç†ï¼šget: ^4.7.3</li>
<li>ç¼“å­˜æœåŠ¡ï¼šget_storage: ^2.1.1</li>
<li>ç€‘å¸ƒæµç»„ä»¶ï¼šflutter_staggered_grid_view^0.7.0</li>
<li>è½®æ’­å›¾ç»„ä»¶ï¼šcard_swiper^3.0.1</li>
<li>toastå¼¹çª—ç»„ä»¶ï¼šshirne_dialog^4.8.6</li>
<li>è§†é¢‘å¥—ä»¶ï¼šmedia_kit: ^1.2.3</li>
<li>svgå›¾ç‰‡ï¼šflutter_svg: ^2.2.3</li>
<li>ç¼“å­˜å›¾ç‰‡ï¼šcached_network_image: ^3.4.1</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fead756efef646e28f8f67a12f3c05d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=BbqPDxNoR4Cf4SkifcgmN%2FJLjQA%3D" alt="z1.gif" loading="lazy"/></p>
<p>flutter3å®ç°ä¸€ä¸ªç±»ä¼¼æŠ–éŸ³appé¦–é¡µ<strong>ä¸Šä¸‹å·¦å³è”åŠ¨</strong>æ•ˆæœã€‚ä¸Šä¸‹æ»šåŠ¨åˆ‡æ¢çŸ­è§†é¢‘ã€å·¦å³æ»šåŠ¨åˆ‡æ¢é¡µé¢æ¨¡å—ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e631e75b6c64620bd002446beb7861e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=T9GxpyN0GP2bQ0ewcRSHeMK4%2BEw%3D" alt="z2.gif" loading="lazy"/></p>
<p>ç›´æ’­é¡µé¢å®ç°<strong>å³ä¾§æ»‘å…¥ç›´æ’­è¿›åœº/å·¦ä¾§æ»‘å…¥ç¤¼ç‰©æç¤ºåŠ¨æ•ˆã€å•†å“åˆ—è¡¨ã€ç¤¼ç‰©ã€å•†å“è®²è§£ã€å¼¹å¹•æ¶ˆæ¯</strong>ç­‰åŠŸèƒ½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53622ab0200e4babb10be23918458ed4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=iPuPeyBko5z3sSYZT7o%2BPQNG4T8%3D" alt="z3.gif" loading="lazy"/></p>
<h2 data-id="heading-1">é¡¹ç›®ç»“æ„ç›®å½•</h2>
<p>flutter3-douyinä½¿ç”¨æœ€æ–°è·¨å¹³å°æ¡†æ¶<code>flutter3.38.2</code>æ„å»ºé¡¹ç›®æ¨¡æ¿ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac69dc54c86d4984bb9104a626bd3cf8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=XFr7hrVuwdS6DaO4rj%2FdSgq6X9E%3D" alt="360æˆªå›¾20251202112944055.png" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1RG2eBNEwM%2F" target="_blank" title="https://www.bilibili.com/video/BV1RG2eBNEwM/" ref="nofollow noopener noreferrer">ã€flutter3.38æŠ–éŸ³appã€çŸ­è§†é¢‘+èŠå¤©+ç›´æ’­å…¥åœº-ç¤¼ç‰©ä¾§è¾¹æ»‘è¿›åŠ¨æ•ˆ - bilibili</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/542b147f1f674441afc0e55822594d04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=0n%2B7JRZNqtK5NkEmlrhS67qInyE%3D" alt="æœªæ ‡é¢˜-3_1.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/66835c5d09814529a34d9c39d5a35e72~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=FnxE2GQzRD%2BM0%2Bu6PKBrtbwC3o4%3D" alt="æœªæ ‡é¢˜-4.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93bf310bde2d4754ba18b4db1501289b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=D30EJRAftW64Q8MfGj2OS1o%2F1XE%3D" alt="æœªæ ‡é¢˜-7.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fefc84ffad804effa773a4a13a87dfc8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=9HDG3D423BuilDswwudxccqegK4%3D" alt="æœªæ ‡é¢˜-8.png" loading="lazy"/></p>
<h2 data-id="heading-2">é¡¹ç›®å…¥å£é…ç½®</h2>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/foundation.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:get/get.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:get_storage/get_storage.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:media_kit/media_kit.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:shirne_dialog/shirne_dialog.dart'</span>;

<span class="hljs-keyword">import</span> <span class="hljs-string">'utils/common.dart'</span>;

<span class="hljs-comment">// å¼•å…¥å¸ƒå±€é¡µé¢</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'layouts/index.dart'</span>;

<span class="hljs-comment">// å¼•å…¥è·¯ç”±é…ç½®</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'router/index.dart'</span>;

<span class="hljs-keyword">void</span> main() <span class="hljs-keyword">async</span> {
  <span class="hljs-comment">// åˆå§‹åŒ–get_storageå­˜å‚¨</span>
  <span class="hljs-keyword">await</span> GetStorage.init();

  <span class="hljs-comment">// åˆå§‹åŒ–media_kitè§†é¢‘å¥—ä»¶</span>
  WidgetsFlutterBinding.ensureInitialized();
  MediaKit.ensureInitialized();

  runApp(<span class="hljs-keyword">const</span> MyApp());
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">const</span> MyApp({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-comment">// æ˜¯å¦windowså¹³å°</span>
    <span class="hljs-built_in">bool</span> isWindows() {
      <span class="hljs-keyword">if</span> (kIsWeb) <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
      
      <span class="hljs-keyword">final</span> platform = Theme.of(context).platform;
      <span class="hljs-keyword">return</span> platform == TargetPlatform.windows;
    }

    <span class="hljs-keyword">return</span> GetMaterialApp(
      title: <span class="hljs-string">'Flutter3 DYMALL'</span>,
      debugShowCheckedModeBanner: <span class="hljs-keyword">false</span>,
      theme: ThemeData(
        colorScheme: ColorScheme.fromSeed(seedColor: <span class="hljs-keyword">const</span> Color(<span class="hljs-number">0xFFFF2C55</span>)),
        useMaterial3: <span class="hljs-keyword">true</span>,
        <span class="hljs-comment">// ä¿®å¤windowsä¸‹å­—ä½“ä¸ä¸€è‡´æƒ…å†µ - Web å¹³å°ç‰¹æ®Šå¤„ç†</span>
        <span class="hljs-comment">// fontFamily: Platform.isWindows ? 'Microsoft YaHei' : null</span>
        fontFamily: isWindows() ? <span class="hljs-string">'Microsoft YaHei'</span> : <span class="hljs-keyword">null</span>
      ),
      home: <span class="hljs-keyword">const</span> Layout(),
      <span class="hljs-comment">// åˆå§‹åŒ–è·¯ç”±</span>
      initialRoute: Common.isLogin() ? <span class="hljs-string">'/'</span> : <span class="hljs-string">'/login'</span>,
      <span class="hljs-comment">// è·¯ç”±é¡µé¢</span>
      getPages: routePages,
      <span class="hljs-comment">// åˆå§‹åŒ–å¼¹çª—key</span>
      navigatorKey: MyDialog.navigatorKey,
    );
  }
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf9081c4de60472aaf4c26e4994944e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=l4xql32hDSPx9%2Fq5O8gURbiSrus%3D" alt="æœªæ ‡é¢˜-9.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b707291803844acb6df733d71e757bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=KsjWMh2u%2F3NTsD%2B6EII4heiCAIA%3D" alt="æœªæ ‡é¢˜-12.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9f3780db97740438fbbc455fce592d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=6uAj5fQBPLBl%2FFA3MLhHFaSlzbI%3D" alt="æœªæ ‡é¢˜-13.png" loading="lazy"/></p>
<h2 data-id="heading-3">flutter3è‡ªå®šä¹‰æŠ–éŸ³appé¦–é¡µæ¨¡å—è”åŠ¨</h2>
<p>å¦‚ä¸‹å›¾ï¼šå®ç°ä¸€ä¸ªç±»ä¼¼æŠ–éŸ³appé¦–é¡µå·¦å³åˆ‡æ¢é¡µé¢ï¼Œä¸Šä¸‹åˆ‡æ¢çŸ­è§†é¢‘æ•ˆæœã€‚ä¸”<strong>é¡¶éƒ¨çŠ¶æ€æ +Tabèœå•+åº•éƒ¨å¯¼èˆªæ </strong>ä¸€èµ·è”åŠ¨æ•ˆæœã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/557a3c1e2e1c424693a5bb5b69219317~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=lWgH0sZWL21lCy4aJgyH7D6VNys%3D" alt="p4-3.gif" loading="lazy"/></p>
<p>å„ä¸ªtabé¡µé¢æ¨¡æ¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77a27d7f09bc4fd1a572d83f232b9393~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=M9l7PC6AwLmZ6qHw4WdDjUe6FrQ%3D" alt="f6d5d9016b765c8e3927602608ae7693_1289798-20251205232946737-697311119.png" loading="lazy"/></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-meta">@override</span>
Widget build(BuildContext context) {
  <span class="hljs-keyword">return</span> Scaffold(
    key: scaffoldKey,
    extendBodyBehindAppBar: <span class="hljs-keyword">true</span>,
    appBar: AppBar(
      forceMaterialTransparency: <span class="hljs-keyword">true</span>,
      backgroundColor: [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>].contains(videoModuleController.videoTabIndex.value) ? <span class="hljs-keyword">null</span> : Colors.transparent,
      foregroundColor: [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>].contains(videoModuleController.videoTabIndex.value) ? Colors.black : Colors.white,
      titleSpacing: <span class="hljs-number">1.0</span>,
      leading: Obx(() =&gt; IconButton(
        icon: Badge.count(
          backgroundColor: Colors.red,
          count: <span class="hljs-number">6</span>,
          child: Icon(Icons.sort_rounded, color: tabColor(),),
        ),
        onPressed: () {
          <span class="hljs-comment">// è‡ªå®šä¹‰æ‰“å¼€å³ä¾§drawer</span>
          scaffoldKey.currentState?.openDrawer();
        },
      )),
      title: Obx(() {
        <span class="hljs-keyword">return</span> ScrollConfiguration(
          behavior: CustomScrollBehavior().copyWith(scrollbars: <span class="hljs-keyword">false</span>),
          child: TabBar(
            ...
          ),
        );
      }),
      actions: [
        Obx(() =&gt; IconButton(icon: Icon(Icons.search_rounded, color: tabColor(),), onPressed: () {},),),
      ],
    ),
    body: ScrollConfiguration(
      behavior: CustomScrollBehavior().copyWith(scrollbars: <span class="hljs-keyword">false</span>),
      child: PageView(
        controller: pageController,
        onPageChanged: (index) {
          videoModuleController.updateVideoTabIndex(index);
          setState(() {
            tabController.animateTo(index, duration: <span class="hljs-built_in">Duration</span>(milliseconds: <span class="hljs-number">200</span>), curve: Curves.easeInOut);
          });
        },
        children: [
          ...tabModules
        ],
      ),
    ),
    <span class="hljs-comment">// ä¾§è¾¹æ </span>
    drawer: Drawer(
      shape: RoundedRectangleBorder(borderRadius: BorderRadius.horizontal(right: Radius.circular(<span class="hljs-number">15.0</span>))),
      clipBehavior: Clip.antiAlias,
      width: <span class="hljs-number">300</span>,
      child: Container(
        ...
      ),
    ),
  );
}
</code></pre>
<p>å·¦å³åˆ‡æ¢é•¿åˆ—è¡¨é¡µé¢ï¼Œä¿æŒåˆ‡æ¢Tabä½¿å¾—é¡µé¢<strong>æ»šåŠ¨çŠ¶æ€ä¿æŒä¸å˜</strong>ï¼Œé¡µé¢<strong>å¼€å¯ç¼“å­˜</strong>åŠŸèƒ½ã€‚</p>
<pre><code class="hljs language-dart" lang="dart">GlobalKey&lt;ScaffoldState&gt; scaffoldKey = GlobalKey();

VideoModuleController videoModuleController = Get.put(VideoModuleController());

<span class="hljs-keyword">late</span> TabController tabController = TabController(initialIndex: videoModuleController.videoTabIndex.value, length: tabList.length, vsync: <span class="hljs-keyword">this</span>);
<span class="hljs-keyword">late</span> PageController pageController = PageController(initialPage: videoModuleController.videoTabIndex.value, viewportFraction: <span class="hljs-number">1.0</span>);

<span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">String</span>&gt; tabList = [<span class="hljs-string">'è®¢é˜…'</span>, <span class="hljs-string">'é€›é€›'</span>, <span class="hljs-string">'ç›´æ’­'</span>, <span class="hljs-string">'å›¢è´­'</span>, <span class="hljs-string">'çŸ­å‰§'</span>, <span class="hljs-string">'å…³æ³¨'</span>, <span class="hljs-string">'åŒåŸ'</span>, <span class="hljs-string">'ç²¾é€‰'</span>];
<span class="hljs-keyword">final</span> tabModules = [
  KeepAliveWrapper(child: SubscribeModule()),
  KeepAliveWrapper(child: BrowseModule()),
  KeepAliveWrapper(child: LiveModule()),
  KeepAliveWrapper(child: BuyingModule()),
  KeepAliveWrapper(child: DramaModule()),
  AttentionModule(),
  LocalModule(),
  RecommendModule()
];
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7011efdf148f49f9b64d4ca6192cd685~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=xbtsc96tWe8VlRzyEgLLTTHik0o%3D" alt="cdef5921126a2ab06d2782024b2f43b1_1289798-20251205232839995-542313656.png" loading="lazy"/></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">KeepAliveWrapper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>{
  <span class="hljs-keyword">final</span> Widget child;
  <span class="hljs-keyword">const</span> KeepAliveWrapper({<span class="hljs-keyword">super</span>.key, <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.child});

  <span class="hljs-meta">@override</span>
  State&lt;KeepAliveWrapper&gt; createState() =&gt; _KeepAliveWrapperState();
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_KeepAliveWrapperState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">KeepAliveWrapper</span>&gt; <span class="hljs-title">with</span> <span class="hljs-title">AutomaticKeepAliveClientMixin</span> </span>{
  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">super</span>.build(context);
    <span class="hljs-keyword">return</span> widget.child;
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-built_in">bool</span> <span class="hljs-keyword">get</span> wantKeepAlive =&gt; <span class="hljs-keyword">true</span>;
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c860b19435c94a7688b3715746717cef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=Qup%2FoFObq3ruVkYTv7SBtmlOITU%3D" alt="001360æˆªå›¾20251130234546042.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d128c90551d14882bf2c2a694343e7b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=TnAjNK55K8J9NPuwNZgGi9jHjjw%3D" alt="002360æˆªå›¾20251201001241922.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe54bdc86e2743b7a1664649396abd2e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=gbV60fUCET%2F8YbOeuz37%2B1N0ZD0%3D" alt="003360æˆªå›¾20251201001409147.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9cb0309749d491c985326ff4b70d1d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=tW4lyUruj0GwUlQBLZd8gFEfcJI%3D" alt="003360æˆªå›¾20251201001640713.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1891afa2714b4fddb29174b2e7b2bb99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=jhCGUkMUrjVmu7iFvtQaS6i9a5Y%3D" alt="004360æˆªå›¾20251201001951040.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df2244749d984e8da343d46aee1def9f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=uoGck%2Bzb4JDC5ejMT6E6MxvxzGw%3D" alt="004360æˆªå›¾20251201002509643.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7da83399e414d6b97b3ce10fdabe771~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=MFKREkvVorIi9%2FT5GENV%2BdK1afQ%3D" alt="004360æˆªå›¾20251201003006451.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b5709cbb7b24c1d955c1e75cb2853c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=nM9N9I706v2JvRBsFK99OoQ5EpI%3D" alt="004360æˆªå›¾20251201005209179.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78fe644b79da414fb0c337c29e07062b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=ATYtNpibmWwNbiBTWqZhW31tTTc%3D" alt="004360æˆªå›¾20251201005321817.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/556c2f7a85cc4445ae2cd723a85d4a61~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=cfZtH3dWsOspEZnstJFdB0AZ1%2FY%3D" alt="005360æˆªå›¾20251201074639885.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e65ba80eb484bf68572083b65ace463~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=%2FtCPUSRci%2B7QpKq3wTurKgO2d0Y%3D" alt="005360æˆªå›¾20251201074737013.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29aff8fa4c4d4c08a0becc8d3c242dea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=AyB5dEs2kSL12duYEDUYNF0eAfU%3D" alt="005360æˆªå›¾20251201075250762.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea3726075c294750a246cbac24330eb6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=ViGgytNoJLCcFPUn6h3w3evH1Ew%3D" alt="005360æˆªå›¾20251202095434004.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19d41f8857f64e8e87d215f628365693~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=kbkQUao%2B8BKBwpMJ8KaOKfsUnqc%3D" alt="005360æˆªå›¾20251202095434007.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2617be2c32f42d0874493aebbe4ef5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=FMup4x3uf%2FYWp5iIl3GCKdFtIC4%3D" alt="005360æˆªå›¾20251202102655543.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/618bdb5e422c4421a12b17fae38a4fcb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=vlx0o%2FzYSxgit9ots4PsDisL%2BhM%3D" alt="005360æˆªå›¾20251202102949864.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7fc5cb74e6aa421587578e9ab9e7a0a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=H12Gs67erEI2cjAakEjfFtnXF2Y%3D" alt="006360æˆªå›¾20251202103841262.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21668cd41ea9430590d14525884c576d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=ipiHN5mz%2Faicv334pFxogC4rzgs%3D" alt="006360æˆªå›¾20251202104321022.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f41b89046e343ccb4d3037aa5253b0e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=cfSZ3UMRv%2BHg8%2FpI5jvXVaoQyes%3D" alt="006360æˆªå›¾20251202104919246.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/569bc0b9b9724084af488f7577f2e310~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=Ivx7SmC6C1XNXCsUyT%2FEfy9RplA%3D" alt="006360æˆªå›¾20251202105314112.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d882bf8d47b44ddba9598c0bab43fb19~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=WoKu1tlYgeX5ppNJgKuPwcI1cjw%3D" alt="006360æˆªå›¾20251202105524264.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16e9b80e55c749d6b1e9bf97aa1aa150~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=OoS2SoDX%2BPVoFCmO4D%2FLYlBd3b4%3D" alt="006360æˆªå›¾20251202105541335.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2674825944154c64a20d8046e15a7a75~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=RDKH0EYxglqjouxpqszIphyGmcs%3D" alt="007360æˆªå›¾20251202105955398.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4f96c042afc4af495d9299ec01f169d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=8icumA8chV3qD53hA7xVO8pYIVU%3D" alt="008360æˆªå›¾20251202110048233.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a697556fb94438dbe1be46cf6a1c2f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=i5LUS0FM5GqEJp%2Bc%2FYnFMQ%2ByFA0%3D" alt="008360æˆªå›¾20251202110222359.png" loading="lazy"/></p>
<h2 data-id="heading-4">flutter3å®ç°çŸ­è§†é¢‘åŠŸèƒ½</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97c2cc0038694b35a0f94f7d7ee0d836~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGlhb3lhbjIwMTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765812166&amp;x-signature=WOMELYRqxMZ4Qykv5G4HE9NfH9o%3D" alt="004360æˆªå›¾20251201002757876.png" loading="lazy"/></p>
<p>å¦‚ä¸Šå›¾ï¼štabèœå•æ‚¬æµ®åœ¨çŸ­è§†é¢‘é¡µé¢ä¸Šï¼ŒçŸ­è§†é¢‘é¡µé¢é‡‡ç”¨å…¨å±æ²‰æµ¸å¼å¹¶å»¶ä¼¸åˆ°çŠ¶æ€æ ã€‚</p>
<p>åº•éƒ¨æ’­æ”¾è¿›åº¦æ¡æ”¯æŒ<strong>æ‹–æ‹½ã€ç‚¹å‡»ã€æ˜¾ç¤ºè§†é¢‘æ—¶é•¿</strong>ã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-meta">@override</span>
Widget build(BuildContext context) {
  <span class="hljs-keyword">return</span> Container(
    color: Colors.black,
    child: Column(
      children: [
        Expanded(
          child: Stack(
            children: [
              PageView.builder(
                scrollDirection: Axis.vertical,
                controller: pageController,
                onPageChanged: (index) <span class="hljs-keyword">async</span> {
                  <span class="hljs-comment">// ...</span>
                },
                itemCount: videoList.length,
                itemBuilder: (context, index) {
                  <span class="hljs-keyword">return</span> Stack(
                    children: [
                      <span class="hljs-comment">// è§†é¢‘åŒºåŸŸ</span>
                      Positioned(
                        top: <span class="hljs-number">0</span>,
                        left: <span class="hljs-number">0</span>,
                        right: <span class="hljs-number">0</span>,
                        bottom: <span class="hljs-number">0</span>,
                        child: GestureDetector(
                          child: Stack(
                            children: [
                              <span class="hljs-comment">// çŸ­è§†é¢‘æ’ä»¶</span>
                              Visibility(
                                visible: videoModuleController.videoPlayIndex.value == index &amp;&amp; position &gt; <span class="hljs-built_in">Duration</span>.zero,
                                child: Video(
                                  controller: videoController,
                                  fit: BoxFit.cover,
                                ),
                              ),
                              <span class="hljs-comment">// æ’­æ”¾/æš‚åœæŒ‰é’®</span>
                              StreamBuilder(
                                stream: player.stream.playing,
                                builder: (context, playing) {
                                  <span class="hljs-keyword">return</span> Visibility(
                                    visible: playing.data == <span class="hljs-keyword">false</span>,
                                    child: Center(
                                      child: IconButton(
                                        padding: EdgeInsets.zero,
                                        onPressed: () {
                                          player.playOrPause();
                                        },
                                        icon: Icon(
                                          playing.data == <span class="hljs-keyword">true</span> ? Icons.pause : Icons.play_arrow_rounded,
                                          color: Colors.white60,
                                          size: <span class="hljs-number">80</span>,
                                        ),
                                        style: ButtonStyle(
                                          backgroundColor: WidgetStateProperty.all(Colors.black.withAlpha(<span class="hljs-number">15</span>))
                                        ),
                                      ),
                                    ),
                                  );
                                },
                              ),
                            ],
                          ),
                          onTap: () {
                            player.playOrPause();
                          },
                        ),
                      ),
                      <span class="hljs-comment">// å³ä¾§æ“ä½œæ </span>
                      Positioned(
                        bottom: <span class="hljs-number">15.0</span>,
                        right: <span class="hljs-number">6.0</span>,
                        child: Column(
                          spacing: <span class="hljs-number">15.0</span>,
                          children: [
                            ...
                          ],
                        ),
                      ),
                      <span class="hljs-comment">// åº•éƒ¨ä¿¡æ¯åŒºåŸŸ</span>
                      Positioned(
                        bottom: <span class="hljs-number">15.0</span>,
                        left: <span class="hljs-number">10.0</span>,
                        right: <span class="hljs-number">80.0</span>,
                        child: Column(
                          ...
                        ),
                      ),
                      <span class="hljs-comment">// miniæ’­æ”¾è¿›åº¦æ¡</span>
                      Positioned(
                        bottom: <span class="hljs-number">0.0</span>,
                        left: <span class="hljs-number">6.0</span>,
                        right: <span class="hljs-number">6.0</span>,
                        child: Visibility(
                          visible: videoModuleController.videoPlayIndex.value == index &amp;&amp; position &gt; <span class="hljs-built_in">Duration</span>.zero,
                          child: Listener(
                            child: SliderTheme(
                              data: SliderThemeData(
                                trackHeight: sliderDraging ? <span class="hljs-number">6.0</span> : <span class="hljs-number">2.0</span>,
                                thumbShape: RoundSliderThumbShape(enabledThumbRadius: <span class="hljs-number">4.0</span>), <span class="hljs-comment">// è°ƒæ•´æ»‘å—çš„å¤§å°</span>
                                overlayShape: RoundSliderOverlayShape(overlayRadius: <span class="hljs-number">0</span>), <span class="hljs-comment">// å»æ‰Slideré»˜è®¤ä¸Šä¸‹è¾¹è·é—´éš™</span>
                                inactiveTrackColor: Colors.white24, <span class="hljs-comment">// è®¾ç½®éæ´»åŠ¨è¿›åº¦æ¡çš„é¢œè‰²</span>
                                activeTrackColor: Colors.white, <span class="hljs-comment">// è®¾ç½®æ´»åŠ¨è¿›åº¦æ¡çš„é¢œè‰²</span>
                                thumbColor: Colors.white, <span class="hljs-comment">// è®¾ç½®æ»‘å—çš„é¢œè‰²</span>
                                overlayColor: Colors.transparent, <span class="hljs-comment">// è®¾ç½®æ»‘å—è¦†ç›–å±‚çš„é¢œè‰²</span>
                              ),
                              child: Slider(
                                value: sliderValue,
                                onChanged: (value) <span class="hljs-keyword">async</span> {
                                  <span class="hljs-comment">// debugPrint('å½“å‰è§†é¢‘æ’­æ”¾æ—¶é—´$value');</span>
                                  setState(() {
                                    sliderValue = value;
                                  });
                                  <span class="hljs-comment">// è·³è½¬æ’­æ”¾æ—¶é—´</span>
                                  <span class="hljs-keyword">await</span> player.seek(duration * value.clamp(<span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>));
                                },
                                onChangeEnd: (value) <span class="hljs-keyword">async</span> {
                                  setState(() {
                                    sliderDraging = <span class="hljs-keyword">false</span>;
                                  });
                                  <span class="hljs-comment">// ç»§ç»­æ’­æ”¾</span>
                                  <span class="hljs-keyword">if</span>(!player.state.playing) {
                                    <span class="hljs-keyword">await</span> player.play();
                                  }
                                },
                              ),
                            ),
                            onPointerMove: (e) {
                              setState(() {
                                sliderDraging = <span class="hljs-keyword">true</span>;
                              });
                            },
                          ),
                        ),
                      ),
                      <span class="hljs-comment">// æ’­æ”¾ä½ç½®æŒ‡ç¤ºå™¨</span>
                      Positioned(
                        bottom: <span class="hljs-number">100.0</span>,
                        left: <span class="hljs-number">10.0</span>,
                        right: <span class="hljs-number">10.0</span>,
                        child: Visibility(
                          visible: sliderDraging,
                          child: DefaultTextStyle(
                            style: TextStyle(color: Colors.white54, fontSize: <span class="hljs-number">18.0</span>, fontFamily: <span class="hljs-string">'Arial'</span>),
                            child: Row(
                              mainAxisAlignment: MainAxisAlignment.center,
                              spacing: <span class="hljs-number">8.0</span>,
                              children: [
                                Text(position.label(reference: duration), style: TextStyle(color: Colors.white)),
                                Text(<span class="hljs-string">'/'</span>, style: TextStyle(fontSize: <span class="hljs-number">14.0</span>)),
                                Text(duration.label(reference: duration)),
                              ],
                            ),
                          )
                        ),
                      ),
                    ],
                  );
                },
              ),
              <span class="hljs-comment">/// <span class="markdown">å›ºå®šå±‚</span></span>
              <span class="hljs-comment">// çº¢åŒ…å¹¿å‘Š</span>
              Ads(),
            ],
          ),
        ),
      ],
    ),
  );
}
</code></pre>
<p>ç»¼ä¸Šå°±æ˜¯flutter3.38ä»¿å†™æŠ–éŸ³appçš„ä¸€äº›çŸ¥è¯†åˆ†äº«ï¼Œæ•´ä¸ªé¡¹ç›®åŒ…å«äº†çŸ­è§†é¢‘+ç›´æ’­+èŠå¤©åŠŸèƒ½æ¨¡å—ï¼Œè¿ç”¨åˆ°çš„çŸ¥è¯†ç‚¹è¿˜æ˜¯éå¸¸å¤šçš„ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©å“ˆï¼</p>
<p><a href="https://juejin.cn/post/7560576454849757220" target="_blank" title="https://juejin.cn/post/7560576454849757220">electron38.2-vue3osç³»ç»Ÿ|Vite7+Electron38+Pinia3+ArcoDesignæ¡Œé¢ç‰ˆOSç®¡ç†ç³»ç»Ÿ</a></p>
<p><a href="https://juejin.cn/post/7550160737244708898" target="_blank" title="https://juejin.cn/post/7550160737244708898">åŸºäºelectron38+vite7+vue3 setup+elementPlusç”µè„‘ç«¯ä»¿å¾®ä¿¡/QQèŠå¤©è½¯ä»¶</a></p>
<p><a href="https://juejin.cn/post/7555690975866044431" target="_blank" title="https://juejin.cn/post/7555690975866044431">2025æœ€æ–°æ¬¾Electron38+Vite7+Vue3+ElementPlusç”µè„‘ç«¯åå°adminç³»ç»Ÿ</a></p>
<p><a href="https://juejin.cn/post/7574357603406217266" target="_blank" title="https://juejin.cn/post/7574357603406217266">2025åŸåˆ›ç ”å‘Tauri2.9+Vite7.2+Vue3+ArcoDesignå®¢æˆ·ç«¯OSç®¡ç†ç³»ç»ŸExe</a></p>
<p><a href="https://juejin.cn/post/7565043957638938675" target="_blank" title="https://juejin.cn/post/7565043957638938675">2025æœ€æ–°ç‰ˆTauri2.8+Vite7.1+Vue3+ElementPluså®¢æˆ·ç«¯èŠå¤©è½¯ä»¶Exe</a></p>
<p><a href="https://juejin.cn/post/7567181492067696655" target="_blank" title="https://juejin.cn/post/7567181492067696655">æœ€æ–°è‡ªåˆ›Tauri2.9+Vite7.1+Vue3+ElementPlusæ¡Œé¢ç«¯é€šç”¨åå°ç³»ç»Ÿç®¡ç†Exeæ¨¡æ¿</a></p>
<p><a href="https://juejin.cn/post/7534184729319440419" target="_blank" title="https://juejin.cn/post/7534184729319440419">åŸºäºflutter3.32+window_managerä»¿macOS/Winsé£æ ¼æ¡Œé¢osç³»ç»Ÿ</a></p>
<p><a href="https://juejin.cn/post/7529357546844504100" target="_blank" title="https://juejin.cn/post/7529357546844504100">flutter3.27+bitsdojo_windowç”µè„‘ç«¯ä»¿å¾®ä¿¡Exeåº”ç”¨</a></p>
<p><a href="https://juejin.cn/post/7552733801081749513" target="_blank" title="https://juejin.cn/post/7552733801081749513">æœ€æ–°ç‰ˆVite7+Vue3+Pinia3+ArcoDesignç½‘é¡µç‰ˆwebosåå°ç®¡ç†ç³»ç»Ÿ</a></p>
<p><a href="https://juejin.cn/post/7522315126492512283" target="_blank" title="https://juejin.cn/post/7522315126492512283">åŸºäºuniapp+vue3+uvueä»¿æŠ–éŸ³appçŸ­è§†é¢‘+èŠå¤©+ç›´æ’­appç³»ç»Ÿ</a></p>
<p><a href="https://juejin.cn/post/7501149179563376680" target="_blank" title="https://juejin.cn/post/7501149179563376680">åŸºäºuniapp+vue3+deepseek+markdownæ­å»ºappç‰ˆæµå¼è¾“å‡ºAIæ¨¡æ¿</a></p>
<p><a href="https://juejin.cn/post/7486369696738017321" target="_blank" title="https://juejin.cn/post/7486369696738017321">vue3.5+deepseek+arco+markdownæ­å»ºwebç‰ˆæµå¼è¾“å‡ºAIæ¨¡æ¿</a></p>
<p><a href="https://juejin.cn/post/7542505547669995555" target="_blank" title="https://juejin.cn/post/7542505547669995555">unios-adminæ‰‹æœºç‰ˆåå°|uniapp+vue3å…¨ç«¯adminç®¡ç†ç³»ç»Ÿ</a></p>
<p><a href="https://juejin.cn/post/7537106747279065134" target="_blank" title="https://juejin.cn/post/7537106747279065134">åŸºäºuni-app+vue3+uvuiè·¨ä¸‰ç«¯ä»¿å¾®ä¿¡appèŠå¤©æ¨¡æ¿</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äººå·¥æ™ºèƒ½ä¹‹æ•°æ®åˆ†æ Pandasï¼šç¬¬å…«ç«  æ•°æ®å¯è§†åŒ–]]></title>    <link>https://juejin.cn/post/7581406561684930606</link>    <guid>https://juejin.cn/post/7581406561684930606</guid>    <pubDate>2025-12-08T12:02:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581406561684930606" data-draft-id="7581251003330265114" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äººå·¥æ™ºèƒ½ä¹‹æ•°æ®åˆ†æ Pandasï¼šç¬¬å…«ç«  æ•°æ®å¯è§†åŒ–"/> <meta itemprop="keywords" content="pandas,äººå·¥æ™ºèƒ½,æ•°æ®åˆ†æ"/> <meta itemprop="datePublished" content="2025-12-08T12:02:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å’šå’šç‹"/> <meta itemprop="url" content="https://juejin.cn/user/957022447869753"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äººå·¥æ™ºèƒ½ä¹‹æ•°æ®åˆ†æ Pandasï¼šç¬¬å…«ç«  æ•°æ®å¯è§†åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/957022447869753/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å’šå’šç‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T12:02:09.000Z" title="Mon Dec 08 2025 12:02:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">äººå·¥æ™ºèƒ½ä¹‹æ•°æ®åˆ†æ Pandas</h2>
<p>ç¬¬å…«ç«   æ•°æ®å¯è§†åŒ–</p>
<hr/>
<h2 data-id="heading-1">å‰è¨€</h2>
<p>æœ¬æ–‡å°†ä» <strong>åŸºç¡€ç»˜å›¾æ–¹æ³•ã€å¸¸ç”¨å›¾è¡¨ç±»å‹ã€é«˜çº§å®šåˆ¶ã€ä¸ä¸“ä¸šåº“å¯¹æ¯”</strong> å››ä¸ªç»´åº¦ï¼Œ<strong>ç³»ç»Ÿã€è¯¦ç»†ã€å®æˆ˜åŒ–</strong>åœ°ä»‹ç» Pandas æ•°æ®å¯è§†åŒ–çš„å®Œæ•´èƒ½åŠ›ã€‚</p>
<hr/>
<h2 data-id="heading-2">ğŸ“ˆ ä¸€ã€Pandas å¯è§†åŒ–åŸºç¡€</h2>
<h3 data-id="heading-3">1. æ ¸å¿ƒåŸç†</h3>
<ul>
<li>Pandas çš„ <code>.plot()</code> æ˜¯ <strong>Matplotlib çš„å°è£…</strong>ï¼Œè¿”å› <code>matplotlib.axes.Axes</code> å¯¹è±¡</li>
<li>æ‰€æœ‰ DataFrame/Series éƒ½å¯ç›´æ¥è°ƒç”¨ <code>.plot()</code></li>
<li>è¯­æ³•ç®€æ´ï¼Œé€‚åˆå¿«é€ŸæŸ¥çœ‹æ•°æ®åˆ†å¸ƒã€è¶‹åŠ¿ã€å…³ç³»</li>
</ul>
<h3 data-id="heading-4">2. å¯ç”¨ç»˜å›¾æ”¯æŒï¼ˆé€šå¸¸è‡ªåŠ¨åŠ è½½ï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt

<span class="hljs-comment"># åœ¨ Jupyter ä¸­æ˜¾ç¤ºå›¾å½¢ï¼ˆéå¿…é¡»ï¼Œä½†æ¨èï¼‰</span>
%matplotlib inline
</code></pre>
<hr/>
<h2 data-id="heading-5">ğŸ“Š äºŒã€Series ä¸ DataFrame åŸºç¡€ç»˜å›¾</h2>
<h3 data-id="heading-6">1. Series ç»˜å›¾ï¼ˆä¸€ç»´æ•°æ®ï¼‰</h3>
<pre><code class="hljs language-python" lang="python">s = pd.Series(np.random.randn(<span class="hljs-number">10</span>).cumsum(), index=pd.date_range(<span class="hljs-string">'2025-01-01'</span>, periods=<span class="hljs-number">10</span>))

<span class="hljs-comment"># é»˜è®¤æŠ˜çº¿å›¾</span>
s.plot()
plt.title(<span class="hljs-string">'Series æŠ˜çº¿å›¾'</span>)
plt.show()
</code></pre>
<p><img src="http://openwrite.cn/uploads/19777/57186/68303118-e8e5-4bce-aa0c-acb9fcfe7e36.png" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">2. DataFrame ç»˜å›¾ï¼ˆå¤šåˆ—æ•°æ®ï¼‰</h3>
<pre><code class="hljs language-python" lang="python">df = pd.DataFrame(
    np.random.randn(<span class="hljs-number">10</span>, <span class="hljs-number">4</span>),
    columns=[<span class="hljs-string">'A'</span>, <span class="hljs-string">'B'</span>, <span class="hljs-string">'C'</span>, <span class="hljs-string">'D'</span>],
    index=pd.date_range(<span class="hljs-string">'2025-01-01'</span>, periods=<span class="hljs-number">10</span>)
)

<span class="hljs-comment"># é»˜è®¤ï¼šæ¯åˆ—ä¸€æ¡çº¿ï¼ˆæŠ˜çº¿å›¾ï¼‰</span>
df.plot()
plt.title(<span class="hljs-string">'DataFrame å¤šåˆ—æŠ˜çº¿å›¾'</span>)
plt.show()
</code></pre>
<p><img src="http://openwrite.cn/uploads/19777/57186/5e81f8bf-2c42-4728-a1aa-69e7a7fdaacc.png" alt="" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-8">ğŸ¨ ä¸‰ã€å¸¸ç”¨å›¾è¡¨ç±»å‹ï¼ˆé€šè¿‡ <code>kind</code> å‚æ•°æŒ‡å®šï¼‰</h2>























































<table><thead><tr><th>å›¾è¡¨ç±»å‹</th><th><code>kind</code> å€¼</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>æŠ˜çº¿å›¾</td><td><code>'line'</code></td><td>æ—¶é—´åºåˆ—ã€è¶‹åŠ¿</td></tr><tr><td>æŸ±çŠ¶å›¾</td><td><code>'bar'</code></td><td>åˆ†ç±»æ¯”è¾ƒï¼ˆå‚ç›´ï¼‰</td></tr><tr><td>æ°´å¹³æŸ±çŠ¶å›¾</td><td><code>'barh'</code></td><td>ç±»åˆ«åè¾ƒé•¿æ—¶</td></tr><tr><td>ç›´æ–¹å›¾</td><td><code>'hist'</code></td><td>æ•°å€¼åˆ†å¸ƒ</td></tr><tr><td>ç®±çº¿å›¾</td><td><code>'box'</code></td><td>åˆ†å¸ƒä¸å¼‚å¸¸å€¼</td></tr><tr><td>å¯†åº¦å›¾</td><td><code>'kde'</code> / <code>'density'</code></td><td>å¹³æ»‘åˆ†å¸ƒä¼°è®¡</td></tr><tr><td>é¢ç§¯å›¾</td><td><code>'area'</code></td><td>ç´¯è®¡è´¡çŒ®</td></tr><tr><td>æ•£ç‚¹å›¾</td><td><code>'scatter'</code></td><td>ä¸¤å˜é‡å…³ç³»</td></tr><tr><td>å…­è¾¹å½¢å›¾</td><td><code>'hexbin'</code></td><td>å¤§é‡æ•£ç‚¹å¯†åº¦</td></tr></tbody></table>
<blockquote>
<p>âœ… æ‰€æœ‰å›¾è¡¨éƒ½å¯é€šè¿‡ <code>df.plot(kind='xxx')</code> æˆ– <code>df.plot.xxx()</code> è°ƒç”¨</p>
</blockquote>
<hr/>
<h2 data-id="heading-9">ğŸ” å››ã€è¯¦ç»†å›¾è¡¨ç¤ºä¾‹ä¸å‚æ•°è¯´æ˜</h2>
<h3 data-id="heading-10">1. æŠ˜çº¿å›¾ï¼ˆLine Plotï¼‰â€” é»˜è®¤å›¾è¡¨</h3>
<pre><code class="hljs language-python" lang="python">df.plot(
    kind=<span class="hljs-string">'line'</span>,
    title=<span class="hljs-string">'é”€å”®é¢è¶‹åŠ¿'</span>,
    xlabel=<span class="hljs-string">'æ—¥æœŸ'</span>,
    ylabel=<span class="hljs-string">'é‡‘é¢ï¼ˆä¸‡å…ƒï¼‰'</span>,
    figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">6</span>),
    grid=<span class="hljs-literal">True</span>,
    style=[<span class="hljs-string">'-'</span>, <span class="hljs-string">'--'</span>, <span class="hljs-string">'-.'</span>, <span class="hljs-string">':'</span>]  <span class="hljs-comment"># çº¿å‹</span>
)
plt.show()
</code></pre>
<p><img src="http://openwrite.cn/uploads/19777/57186/38af2d43-9848-47a7-8afa-41cf7b22ea63.png" alt="" loading="lazy"/></p>
<h3 data-id="heading-11">2. æŸ±çŠ¶å›¾ï¼ˆBar Plotï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åˆ†ç±»æ•°æ®ç¤ºä¾‹</span>
sales = pd.DataFrame({
    <span class="hljs-string">'äº§å“'</span>: [<span class="hljs-string">'æ‰‹æœº'</span>, <span class="hljs-string">'ç”µè„‘'</span>, <span class="hljs-string">'å¹³æ¿'</span>, <span class="hljs-string">'è€³æœº'</span>],
    <span class="hljs-string">'Q1'</span>: [<span class="hljs-number">120</span>, <span class="hljs-number">80</span>, <span class="hljs-number">50</span>, <span class="hljs-number">30</span>],
    <span class="hljs-string">'Q2'</span>: [<span class="hljs-number">130</span>, <span class="hljs-number">85</span>, <span class="hljs-number">55</span>, <span class="hljs-number">35</span>]
}).set_index(<span class="hljs-string">'äº§å“'</span>)

<span class="hljs-comment"># å‚ç›´æŸ±çŠ¶å›¾ï¼ˆé»˜è®¤ï¼‰</span>
sales.plot(kind=<span class="hljs-string">'bar'</span>, figsize=(<span class="hljs-number">8</span>, <span class="hljs-number">5</span>), title=<span class="hljs-string">'å„äº§å“å­£åº¦é”€é‡'</span>)
plt.xticks(rotation=<span class="hljs-number">0</span>)  <span class="hljs-comment"># æ¨ªè½´æ ‡ç­¾ä¸æ—‹è½¬</span>
plt.show()

<span class="hljs-comment"># æ°´å¹³æŸ±çŠ¶å›¾</span>
sales.plot(kind=<span class="hljs-string">'barh'</span>, stacked=<span class="hljs-literal">True</span>)  <span class="hljs-comment"># å †å </span>
plt.show()
</code></pre>
<p><img src="http://openwrite.cn/uploads/19777/57186/1acf90dc-ec81-49fa-a646-589d12c549df.png" alt="" loading="lazy"/></p>
<p><img src="http://openwrite.cn/uploads/19777/57186/dab13573-ce72-43d0-927d-ef26f725e292.png" alt="" loading="lazy"/></p>
<h3 data-id="heading-12">3. ç›´æ–¹å›¾ï¼ˆHistogramï¼‰â€” æŸ¥çœ‹åˆ†å¸ƒ</h3>
<pre><code class="hljs language-python" lang="python">df[<span class="hljs-string">'A'</span>].plot(kind=<span class="hljs-string">'hist'</span>, bins=<span class="hljs-number">20</span>, alpha=<span class="hljs-number">0.7</span>, title=<span class="hljs-string">'A åˆ—æ•°æ®åˆ†å¸ƒ'</span>)
plt.show()

<span class="hljs-comment"># å¤šåˆ—ç›´æ–¹å›¾ï¼ˆé‡å ï¼‰</span>
df[[<span class="hljs-string">'A'</span>, <span class="hljs-string">'B'</span>]].plot.hist(alpha=<span class="hljs-number">0.5</span>, bins=<span class="hljs-number">20</span>)
plt.show()
</code></pre>
<p><img src="http://openwrite.cn/uploads/19777/57186/0947df97-0e14-432b-be52-9e9b97184cb7.png" alt="" loading="lazy"/></p>
<p><img src="http://openwrite.cn/uploads/19777/57186/16ca8ff4-4ba8-4aa6-a178-5f1938832dc6.png" alt="" loading="lazy"/></p>
<h3 data-id="heading-13">4. ç®±çº¿å›¾ï¼ˆBox Plotï¼‰â€” æŸ¥çœ‹åˆ†å¸ƒä¸å¼‚å¸¸å€¼</h3>
<pre><code class="hljs language-python" lang="python">df.plot(kind=<span class="hljs-string">'box'</span>, title=<span class="hljs-string">'å„åˆ—æ•°æ®åˆ†å¸ƒç®±çº¿å›¾'</span>)
plt.ylabel(<span class="hljs-string">'æ•°å€¼'</span>)
plt.show()
</code></pre>
<p><img src="http://openwrite.cn/uploads/19777/57186/559a96b1-d5ce-46a9-aa38-b7becb5cf493.png" alt="" loading="lazy"/></p>
<h3 data-id="heading-14">5. æ•£ç‚¹å›¾ï¼ˆScatter Plotï¼‰â€” ä¸¤å˜é‡å…³ç³»</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># éœ€æŒ‡å®š x å’Œ y åˆ—</span>
df.plot(
    kind=<span class="hljs-string">'scatter'</span>,
    x=<span class="hljs-string">'A'</span>,
    y=<span class="hljs-string">'B'</span>,
    c=<span class="hljs-string">'C'</span>,          <span class="hljs-comment"># é¢œè‰²æ˜ å°„ç¬¬ä¸‰åˆ—</span>
    colormap=<span class="hljs-string">'viridis'</span>,
    title=<span class="hljs-string">'A vs B (é¢œè‰²=C)'</span>
)
plt.show()
</code></pre>
<p><img src="http://openwrite.cn/uploads/19777/57186/b6e96fc6-7513-4382-a8ef-d3758259e042.png" alt="" loading="lazy"/></p>
<h3 data-id="heading-15">6. é¢ç§¯å›¾ï¼ˆArea Plotï¼‰â€” ç´¯è®¡è´¡çŒ®</h3>
<pre><code class="hljs language-python" lang="python">df = df.<span class="hljs-built_in">abs</span>()
df.plot(kind=<span class="hljs-string">'area'</span>, stacked=<span class="hljs-literal">True</span>, alpha=<span class="hljs-number">0.7</span>, title=<span class="hljs-string">'ç´¯è®¡è´¡çŒ®'</span>)
plt.show()
</code></pre>
<p><img src="http://openwrite.cn/uploads/19777/57186/b6ff5eba-0874-4dce-94ce-6f8252a72a2a.png" alt="" loading="lazy"/></p>
<h3 data-id="heading-16">7. å¯†åº¦å›¾ï¼ˆKDEï¼‰â€” å¹³æ»‘åˆ†å¸ƒ</h3>
<pre><code class="hljs language-python" lang="python">df[<span class="hljs-string">'A'</span>].plot(kind=<span class="hljs-string">'kde'</span>, title=<span class="hljs-string">'A åˆ—æ ¸å¯†åº¦ä¼°è®¡'</span>)
plt.show()
</code></pre>
<p><img src="http://openwrite.cn/uploads/19777/57186/7b2c7d85-fd40-4730-80db-c0408d1c56bb.png" alt="" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-17">âš™ï¸ äº”ã€é€šç”¨ç»˜å›¾å‚æ•°ï¼ˆé€‚ç”¨äºæ‰€æœ‰å›¾è¡¨ï¼‰</h2>


















































<table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>figsize</code></td><td>å›¾å½¢å¤§å°ï¼ˆå®½, é«˜ï¼‰</td><td><code>figsize=(10, 6)</code></td></tr><tr><td><code>title</code></td><td>å›¾è¡¨æ ‡é¢˜</td><td><code>title='é”€å”®åˆ†æ'</code></td></tr><tr><td><code>xlabel</code> / <code>ylabel</code></td><td>åæ ‡è½´æ ‡ç­¾</td><td><code>xlabel='æœˆä»½'</code></td></tr><tr><td><code>grid</code></td><td>æ˜¾ç¤ºç½‘æ ¼</td><td><code>grid=True</code></td></tr><tr><td><code>legend</code></td><td>æ˜¾ç¤ºå›¾ä¾‹</td><td><code>legend=True</code>ï¼ˆé»˜è®¤ï¼‰</td></tr><tr><td><code>color</code></td><td>é¢œè‰²</td><td><code>color=['red', 'blue']</code></td></tr><tr><td><code>alpha</code></td><td>é€æ˜åº¦ï¼ˆ0~1ï¼‰</td><td><code>alpha=0.5</code></td></tr><tr><td><code>rot</code></td><td>x è½´æ ‡ç­¾æ—‹è½¬è§’åº¦</td><td><code>rot=45</code></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-18">ğŸ§© å…­ã€é«˜çº§æŠ€å·§ä¸ç»„åˆå›¾</h2>
<h3 data-id="heading-19">1. å­å›¾ï¼ˆSubplotsï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ¯åˆ—ä¸€ä¸ªå­å›¾</span>
df.plot(subplots=<span class="hljs-literal">True</span>, layout=(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>), figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">8</span>))
plt.tight_layout()
plt.show()
</code></pre>
<p><img src="http://openwrite.cn/uploads/19777/57186/a4fec0f4-2164-44d7-9578-b470ead9967d.png" alt="" loading="lazy"/></p>
<h3 data-id="heading-20">2. åŒ Y è½´ï¼ˆç”¨äºä¸åŒé‡çº²ï¼‰</h3>
<pre><code class="hljs language-python" lang="python">ax = df[<span class="hljs-string">'A'</span>].plot(figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">6</span>), color=<span class="hljs-string">'blue'</span>, label=<span class="hljs-string">'A'</span>)
ax2 = ax.twinx()  <span class="hljs-comment"># å…±äº« x è½´</span>
df[<span class="hljs-string">'B'</span>].plot(ax=ax2, color=<span class="hljs-string">'red'</span>, label=<span class="hljs-string">'B'</span>)

ax.set_ylabel(<span class="hljs-string">'A å€¼'</span>, color=<span class="hljs-string">'blue'</span>)
ax2.set_ylabel(<span class="hljs-string">'B å€¼'</span>, color=<span class="hljs-string">'red'</span>)
plt.title(<span class="hljs-string">'åŒ Y è½´å›¾'</span>)
plt.show()
</code></pre>
<p><img src="http://openwrite.cn/uploads/19777/57186/5f741b8c-19e2-47cc-bb98-2baabef4b1af.png" alt="" loading="lazy"/></p>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼šPandas åŸç”Ÿä¸æ”¯æŒ <code>secondary_y</code> åœ¨ <code>.plot()</code> ä¸­ç›´æ¥ä½¿ç”¨ï¼ˆæ—§ç‰ˆæœ¬æ”¯æŒï¼‰ï¼Œå»ºè®®ç”¨ä¸Šè¿° Matplotlib æ–¹å¼ã€‚</p>
</blockquote>
<h3 data-id="heading-21">3. åˆ†ç»„æŸ±çŠ¶å›¾ï¼ˆéœ€æ•°æ®é‡å¡‘ï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å°†å®½è¡¨è½¬ä¸ºé•¿è¡¨ï¼ˆä¾¿äºåˆ†ç»„ï¼‰</span>
sales_long = sales.reset_index().melt(id_vars=<span class="hljs-string">'äº§å“'</span>, var_name=<span class="hljs-string">'å­£åº¦'</span>, value_name=<span class="hljs-string">'é”€é‡'</span>)
<span class="hljs-built_in">print</span>(sales_long)

<span class="hljs-comment"># ä½¿ç”¨ Seaborn æ›´æ–¹ä¾¿ï¼ˆè§ä¸‹æ–‡å¯¹æ¯”ï¼‰</span>
plt.figure(figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">6</span>))
sns.barplot(x=<span class="hljs-string">'äº§å“'</span>, y=<span class="hljs-string">'é”€é‡'</span>, hue=<span class="hljs-string">'å­£åº¦'</span>, data=sales_long)
plt.title(<span class="hljs-string">'å„äº§å“å­£åº¦é”€é‡'</span>)
plt.show()
</code></pre>
<p><img src="http://openwrite.cn/uploads/19777/57186/b29bd2f9-ddeb-4952-8e69-bee39ebf5351.png" alt="" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-22">ğŸ” ä¸ƒã€Pandas vs ä¸“ä¸šå¯è§†åŒ–åº“</h2>















































<table><thead><tr><th>åŠŸèƒ½</th><th>Pandas</th><th>Seaborn</th><th>Plotly</th></tr></thead><tbody><tr><td><strong>æ˜“ç”¨æ€§</strong></td><td>â­â­â­â­â­ï¼ˆæç®€ï¼‰</td><td>â­â­â­â­</td><td>â­â­â­</td></tr><tr><td><strong>ç»Ÿè®¡å›¾è¡¨</strong></td><td>åŸºç¡€</td><td>â­â­â­â­â­ï¼ˆç®±çº¿ã€å°æç´ç­‰ï¼‰</td><td>â­â­â­</td></tr><tr><td><strong>ç¾è§‚åº¦</strong></td><td>ä¸€èˆ¬ï¼ˆå¯å®šåˆ¶ï¼‰</td><td>â­â­â­â­â­ï¼ˆé»˜è®¤ç¾è§‚ï¼‰</td><td>â­â­â­â­â­ï¼ˆäº¤äº’å¼ï¼‰</td></tr><tr><td><strong>äº¤äº’æ€§</strong></td><td>âŒ</td><td>âŒ</td><td>â­â­â­â­â­</td></tr><tr><td><strong>å¤§æ•°æ®æ€§èƒ½</strong></td><td>ä¸€èˆ¬</td><td>ä¸€èˆ¬</td><td>è¾ƒå¥½ï¼ˆWebGLï¼‰</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>å¿«é€Ÿ EDA</td><td>å‘è¡¨çº§é™æ€å›¾</td><td>ä»ªè¡¨ç›˜ã€Web åº”ç”¨</td></tr></tbody></table>
<h3 data-id="heading-23">âœ… æ¨èä½¿ç”¨ç­–ç•¥ï¼š</h3>
<ul>
<li><strong>æ¢ç´¢é˜¶æ®µ</strong>ï¼šç”¨ Pandas å¿«é€Ÿç”»å›¾</li>
<li><strong>æŠ¥å‘Š/è®ºæ–‡</strong>ï¼šç”¨ Seaborn ç¾åŒ–</li>
<li><strong>äº¤äº’å±•ç¤º</strong>ï¼šç”¨ Plotly/Dash</li>
</ul>
<h4 data-id="heading-24">ç¤ºä¾‹ï¼šç›¸åŒå›¾è¡¨ç”¨ Seaborn æ›´ç®€æ´ç¾è§‚</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> seaborn <span class="hljs-keyword">as</span> sns

<span class="hljs-comment"># æ•£ç‚¹å›¾ + å›å½’çº¿</span>
sns.scatterplot(data=df, x=<span class="hljs-string">'A'</span>, y=<span class="hljs-string">'B'</span>, hue=<span class="hljs-string">'C'</span>)
sns.regplot(data=df, x=<span class="hljs-string">'A'</span>, y=<span class="hljs-string">'B'</span>, scatter=<span class="hljs-literal">False</span>)
plt.show()

<span class="hljs-comment"># ç®±çº¿å›¾ï¼ˆæŒ‰ç±»åˆ«ï¼‰</span>
sns.boxplot(data=sales_long, x=<span class="hljs-string">'äº§å“'</span>, y=<span class="hljs-string">'é”€é‡'</span>, hue=<span class="hljs-string">'å­£åº¦'</span>)
plt.show()
</code></pre>
<hr/>
<h2 data-id="heading-25">ğŸ› ï¸ å…«ã€å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-26">1. ä¸­æ–‡ä¹±ç </h3>
<pre><code class="hljs language-python" lang="python">plt.rcParams[<span class="hljs-string">'font.sans-serif'</span>] = [<span class="hljs-string">'SimHei'</span>]  <span class="hljs-comment"># Windows</span>
plt.rcParams[<span class="hljs-string">'axes.unicode_minus'</span>] = <span class="hljs-literal">False</span>    <span class="hljs-comment"># æ­£å¸¸æ˜¾ç¤ºè´Ÿå·</span>
</code></pre>
<h3 data-id="heading-27">2. å›¾å½¢ä¸æ˜¾ç¤ºï¼ˆJupyter å¤–ï¼‰</h3>
<pre><code class="hljs language-python" lang="python">plt.show()  <span class="hljs-comment"># å¿…é¡»è°ƒç”¨</span>
</code></pre>
<h3 data-id="heading-28">3. æ—¶é—´åºåˆ— X è½´æ ¼å¼æ··ä¹±</h3>
<pre><code class="hljs language-python" lang="python">df.plot()
plt.gca().xaxis.set_major_formatter(plt.matplotlib.dates.DateFormatter(<span class="hljs-string">'%Y-%m'</span>))
plt.xticks(rotation=<span class="hljs-number">45</span>)
plt.tight_layout()
plt.show()
</code></pre>
<h3 data-id="heading-29">4. é¢œè‰²è‡ªå®šä¹‰</h3>
<pre><code class="hljs language-python" lang="python">df.plot(color=[<span class="hljs-string">'#FF5733'</span>, <span class="hljs-string">'#33FF57'</span>, <span class="hljs-string">'#3357FF'</span>])
</code></pre>
<hr/>
<h2 data-id="heading-30">âœ… ä¹ã€æ€»ç»“ï¼šPandas å¯è§†åŒ–æœ€ä½³å®è·µ</h2>





































<table><thead><tr><th>åœºæ™¯</th><th>æ¨èåšæ³•</th></tr></thead><tbody><tr><td><strong>å¿«é€ŸæŸ¥çœ‹è¶‹åŠ¿</strong></td><td><code>df.plot()</code>ï¼ˆæŠ˜çº¿å›¾ï¼‰</td></tr><tr><td><strong>æ¯”è¾ƒåˆ†ç±»æ•°æ®</strong></td><td><code>df.plot.bar()</code></td></tr><tr><td><strong>æ£€æŸ¥æ•°æ®åˆ†å¸ƒ</strong></td><td><code>df.plot.hist()</code> æˆ– <code>df.plot.kde()</code></td></tr><tr><td><strong>å‘ç°å˜é‡å…³ç³»</strong></td><td><code>df.plot.scatter(x, y)</code></td></tr><tr><td><strong>æ£€æµ‹å¼‚å¸¸å€¼</strong></td><td><code>df.plot.box()</code></td></tr><tr><td><strong>éœ€è¦ç¾è§‚/å‘è¡¨</strong></td><td>è½¬ç”¨ Seaborn</td></tr><tr><td><strong>éœ€è¦äº¤äº’</strong></td><td>è½¬ç”¨ Plotly</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>è®°ä½</strong>ï¼š
<strong>Pandas å¯è§†åŒ– = å¿«é€Ÿæ¢ç´¢çš„â€œç‘å£«å†›åˆ€â€</strong>ï¼Œ
ä¸æ˜¯æœ€ç»ˆäº¤ä»˜å·¥å…·ï¼Œä½†èƒ½æå¤§æå‡åˆ†ææ•ˆç‡ï¼</p>
</blockquote>
<hr/>
<h2 data-id="heading-31">åç»­</h2>
<p>pythonè¿‡æ¸¡é¡¹ç›®éƒ¨åˆ†ä»£ç å·²ç»ä¸Šä¼ è‡³giteeï¼Œåç»­ä¼šé€æ­¥æ›´æ–°ã€‚</p>
<h2 data-id="heading-32">èµ„æ–™å…³æ³¨</h2>
<p>å…¬ä¼—å·ï¼šå’šå’šç‹
giteeï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fwy18585051844%2Fai_learning" target="_blank" title="https://gitee.com/wy18585051844/ai_learning" ref="nofollow noopener noreferrer">gitee.com/wy185850518â€¦</a></p>
<p><img src="http://openwrite.cn/uploads/19777/55978/c4e904dc-c18f-445e-bf2a-40d8bb548e61.png" alt="" loading="lazy"/></p>
<p>ã€ŠPythonç¼–ç¨‹ï¼šä»å…¥é—¨åˆ°å®è·µã€‹
ã€Šåˆ©ç”¨Pythonè¿›è¡Œæ•°æ®åˆ†æã€‹
ã€Šç®—æ³•å¯¼è®ºä¸­æ–‡ç¬¬ä¸‰ç‰ˆã€‹
ã€Šæ¦‚ç‡è®ºä¸æ•°ç†ç»Ÿè®¡ï¼ˆç¬¬å››ç‰ˆï¼‰ (ç››éª¤) ã€‹
ã€Šç¨‹åºå‘˜çš„æ•°å­¦ã€‹
ã€Šçº¿æ€§ä»£æ•°åº”è¯¥è¿™æ ·å­¦ç¬¬3ç‰ˆã€‹
ã€Šå¾®ç§¯åˆ†å’Œæ•°å­¦åˆ†æå¼•è®ºã€‹
ã€Šï¼ˆè¥¿ç“œä¹¦ï¼‰å‘¨å¿—å-æœºå™¨å­¦ä¹ ã€‹
ã€ŠTensorFlowæœºå™¨å­¦ä¹ å®æˆ˜æŒ‡å—ã€‹
ã€ŠSklearnä¸TensorFlowæœºå™¨å­¦ä¹ å®ç”¨æŒ‡å—ã€‹
ã€Šæ¨¡å¼è¯†åˆ«ï¼ˆç¬¬å››ç‰ˆï¼‰ã€‹
ã€Šæ·±åº¦å­¦ä¹  deep learningã€‹ä¼Šæ©Â·å¤å¾·è´¹æ´›è‘— èŠ±ä¹¦
ã€ŠPythonæ·±åº¦å­¦ä¹ ç¬¬äºŒç‰ˆ(ä¸­æ–‡ç‰ˆ)ã€çº¯æ–‡æœ¬ã€‘ (ç™»å°å¤§æ•°æ® (Francois Choliet)) (Z-Library)ã€‹
ã€Šæ·±å…¥æµ…å‡ºç¥ç»ç½‘ç»œä¸æ·±åº¦å­¦ä¹ +(è¿ˆå…‹å°”Â·å°¼å°”æ£®ï¼ˆMichael+Nielsenï¼‰ã€‹
ã€Šè‡ªç„¶è¯­è¨€å¤„ç†ç»¼è®º  ç¬¬2ç‰ˆã€‹
ã€ŠNatural-Language-Processing-with-PyTorchã€‹
ã€Šè®¡ç®—æœºè§†è§‰-ç®—æ³•ä¸åº”ç”¨(ä¸­æ–‡ç‰ˆ)ã€‹
ã€ŠLearning OpenCV 4ã€‹
ã€ŠAIGCï¼šæ™ºèƒ½åˆ›ä½œæ—¶ä»£ã€‹æœé›¨+&amp;+å¼ å­œé“­
ã€ŠAIGCåŸç†ä¸å®è·µï¼šé›¶åŸºç¡€å­¦å¤§è¯­è¨€æ¨¡å‹ã€æ‰©æ•£æ¨¡å‹å’Œå¤šæ¨¡æ€æ¨¡å‹ã€‹
ã€Šä»é›¶æ„å»ºå¤§è¯­è¨€æ¨¡å‹ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹
ã€Šå®æˆ˜AIå¤§æ¨¡å‹ã€‹
ã€ŠAI 3.0ã€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[uniappå¼€å‘appä½¿ç”¨æµ·åº·å¨è§†æ’­æ”¾ç›‘æ§è§†é¢‘æµå¦‚ä½•ä½¿ç”¨ä»¥åŠé‡åˆ°äº†ä»€ä¹ˆé—®é¢˜]]></title>    <link>https://juejin.cn/post/7581312433530503211</link>    <guid>https://juejin.cn/post/7581312433530503211</guid>    <pubDate>2025-12-09T01:53:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581312433530503211" data-draft-id="7581324707480453161" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="uniappå¼€å‘appä½¿ç”¨æµ·åº·å¨è§†æ’­æ”¾ç›‘æ§è§†é¢‘æµå¦‚ä½•ä½¿ç”¨ä»¥åŠé‡åˆ°äº†ä»€ä¹ˆé—®é¢˜"/> <meta itemprop="keywords" content="uni-app,Vue.js,è§†é¢‘ç¼–ç "/> <meta itemprop="datePublished" content="2025-12-09T01:53:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éšç¬”è®°"/> <meta itemprop="url" content="https://juejin.cn/user/3491704660563581"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            uniappå¼€å‘appä½¿ç”¨æµ·åº·å¨è§†æ’­æ”¾ç›‘æ§è§†é¢‘æµå¦‚ä½•ä½¿ç”¨ä»¥åŠé‡åˆ°äº†ä»€ä¹ˆé—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3491704660563581/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éšç¬”è®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T01:53:12.000Z" title="Tue Dec 09 2025 01:53:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">uniappå¼€å‘çš„appä¸­éœ€è¦ä½¿ç”¨æµ·åº·å¨è§†æ’­æ”¾è§†é¢‘æµ</h2>
<h4 data-id="heading-1">ç¬¬ä¸€æ­¥ï¼š</h4>
<p>å»å®˜ç½‘<code>https://open.hikvision.com/download/5c67f1e2f05948198c909700?type=20</code>ä¸‹è½½ç›¸å…³çš„<code>SD</code></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d2b95c391ab44a291fac12acfb40884~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZqP56yU6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765849992&amp;x-signature=wpig25t1%2Fmuh50NtzhCHZgVyZWs%3D" alt="image.png" loading="lazy"/>
å› ä¸ºæˆ‘æ˜¯ä½¿ç”¨uniappå¼€å‘çš„appï¼Œé€‰æ‹©ä¸‹è½½äº†H5è§†é¢‘æ’­æ”¾å™¨å¼€å‘åŒ…V2.5.1ï¼ŒåŒæ—¶å®ƒä¼šæœ‰ç›¸å…³çš„demoä¸‹è½½ï¼ŒåŠŸèƒ½è¿˜æ˜¯æ¯”è¾ƒå…¨çš„</p>
<h4 data-id="heading-2">ç¬¬äºŒæ­¥ï¼š</h4>
<p>è¿è¡Œdemo</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26d9cfaf07794adcaf25ae523f4fbbda~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZqP56yU6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765849992&amp;x-signature=fVcY%2Fuq%2FD6zOYlJNMGKADzcAdWs%3D" alt="image.png" loading="lazy"/></p>
<p>ç¬¬ä¸‰æ­¥ï¼šå°†ç›¸å…³çš„jsæ–‡ä»¶SDKæ”¾åœ¨é¡¹ç›®ä¸­</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/55471173918f40ada84da9489ccd5088~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZqP56yU6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765849992&amp;x-signature=2s3u4gg0Knzx%2FAk07m20OqwED1Y%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨é¡¹ç›®ä¸­å¼•å…¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">
&lt;script <span class="hljs-variable language_">module</span>=<span class="hljs-string">"vedio"</span> lang=<span class="hljs-string">"renderjs"</span>&gt;
	<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
		<span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
			<span class="hljs-keyword">return</span> {
				<span class="hljs-attr">playData</span>: [],
				<span class="hljs-attr">player</span>: <span class="hljs-literal">null</span>,
				<span class="hljs-attr">accessToken</span>: <span class="hljs-literal">null</span>,
				<span class="hljs-attr">playerSdkLoaded</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// SDKæ˜¯å¦åŠ è½½å®Œæˆ</span>
				<span class="hljs-attr">isPlayerReady</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// æ ‡è®°æ’­æ”¾å™¨æ˜¯å¦åˆå§‹åŒ–å®Œæˆï¼ˆæ–°å¢ï¼‰</span>
				<span class="hljs-title class_">JSPlugin</span>: <span class="hljs-literal">null</span> <span class="hljs-comment">// ç¼“å­˜SDKå®ä¾‹ï¼Œé¿å…é‡å¤åŠ è½½ï¼ˆæ–°å¢ï¼‰</span>
			}
		},
		<span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
			<span class="hljs-keyword">const</span> that = <span class="hljs-variable language_">this</span>;
			<span class="hljs-comment">// å…ˆä¿®å¤removeEventListenerç©ºæŒ‡é’ˆé—®é¢˜ï¼ˆå…³é”®ï¼‰</span>
			<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fixRemoveEventListener</span>();
			<span class="hljs-comment">// åªåŠ è½½ä¸€æ¬¡SDKï¼Œç¼“å­˜åˆ°JSPlugin</span>
			<span class="hljs-keyword">import</span>(<span class="hljs-string">'@/static/js/h5player.min.js'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
				<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res, <span class="hljs-string">'SDKåŠ è½½å®Œæˆ'</span>);
				that.<span class="hljs-property">JSPlugin</span> = res.<span class="hljs-property">JSPlugin</span>;
				that.<span class="hljs-property">playerSdkLoaded</span> = <span class="hljs-literal">true</span>;
				<span class="hljs-comment">// åˆå§‹åŒ–æ’­æ”¾å™¨ï¼ˆé¦–æ¬¡åŠ è½½ï¼‰</span>
				that.<span class="hljs-title function_">initPlayer</span>();
			}).<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
				<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'SDKåŠ è½½å¤±è´¥ï¼š'</span>, err);
			})
		},
		<span class="hljs-title function_">beforeDestroy</span>(<span class="hljs-params"/>) {
			<span class="hljs-comment">// é¡µé¢é”€æ¯æ—¶å½»åº•é”€æ¯æ’­æ”¾å™¨</span>
			<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">destroyPlayer</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
				<span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span> = <span class="hljs-literal">null</span>;
				<span class="hljs-variable language_">this</span>.<span class="hljs-property">isPlayerReady</span> = <span class="hljs-literal">false</span>;
				<span class="hljs-variable language_">this</span>.<span class="hljs-property">JSPlugin</span> = <span class="hljs-literal">null</span>;
			});
		},
		<span class="hljs-attr">methods</span>: {
			<span class="hljs-comment">// ä¿®å¤removeEventListenerç©ºæŒ‡é’ˆï¼ˆæ ¸å¿ƒï¼‰</span>
			<span class="hljs-title function_">fixRemoveEventListener</span>(<span class="hljs-params"/>) {
				<span class="hljs-keyword">const</span> originalRemove = <span class="hljs-title class_">EventTarget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">removeEventListener</span>;
				<span class="hljs-title class_">EventTarget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">removeEventListener</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">type, listener, options</span>) {
					<span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>) { <span class="hljs-comment">// ä»…å½“å½“å‰å¯¹è±¡å­˜åœ¨æ—¶æ‰§è¡Œ</span>
						<span class="hljs-keyword">try</span> {
							originalRemove.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, type, listener, options);
						} <span class="hljs-keyword">catch</span> (err) {
							<span class="hljs-keyword">if</span> (err.<span class="hljs-property">message</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'removeEventListener'</span>)) {
								<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'è§£ç»‘äº‹ä»¶å¿½ç•¥ï¼š'</span>, type);
							} <span class="hljs-keyword">else</span> {
								<span class="hljs-keyword">throw</span> err;
							}
						}
					}
				};
			},
			<span class="hljs-comment">// åˆ‡æ¢æ’­æ”¾åœ°å€ï¼ˆæ ¸å¿ƒæ”¹é€ ï¼‰</span>
			<span class="hljs-keyword">async</span> <span class="hljs-title function_">changePlayUrl</span>(<span class="hljs-params">newUrl, oldUrl, instance</span>) {
				<span class="hljs-keyword">if</span> (!newUrl || newUrl === oldUrl) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// ç©ºåœ°å€/ç›¸åŒåœ°å€ä¸å¤„ç†</span>
				<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åˆ‡æ¢æµåœ°å€ï¼š'</span>, newUrl);
				<span class="hljs-comment">// 1. å…ˆå½»åº•é”€æ¯æ—§æ’­æ”¾å™¨</span>
				<span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">destroyPlayer</span>();
				<span class="hljs-comment">// 2. ç¡®ä¿SDKå·²åŠ è½½ï¼Œé‡æ–°åˆå§‹åŒ–æ’­æ”¾å™¨</span>
				<span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">JSPlugin</span>) {
					<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'SDKæœªåŠ è½½å®Œæˆ'</span>);
					<span class="hljs-keyword">return</span>;
				}
				<span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initPlayer</span>();
				<span class="hljs-comment">// 3. æ’­æ”¾å™¨åˆå§‹åŒ–å®Œæˆåç«‹å³æ’­æ”¾ï¼ˆå–æ¶ˆsetTimeoutï¼Œæ”¹ç”¨å®ä¾‹å°±ç»ªåˆ¤æ–­ï¼‰</span>
				<span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">isPlayerReady</span>) {
					<span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span>.<span class="hljs-title function_">JS_Play</span>(newUrl, {
						<span class="hljs-attr">playURL</span>: newUrl,
						<span class="hljs-attr">mode</span>: <span class="hljs-number">0</span>,
						<span class="hljs-title class_">PlayBackMode</span>: <span class="hljs-number">1</span>,
						<span class="hljs-attr">keepDecoder</span>: <span class="hljs-number">0</span>
					}, <span class="hljs-number">0</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
						<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ’­æ”¾æˆåŠŸï¼š'</span>, res);
					}).<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
						<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ’­æ”¾å¤±è´¥ï¼š'</span>, err);
						<span class="hljs-comment">// H.265è§£ç å¤±è´¥æ—¶é™çº§å¤„ç†ï¼ˆå¯é€‰ï¼‰</span>
						<span class="hljs-keyword">if</span> (err.<span class="hljs-property">message</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'h265'</span>)) {
							uni.<span class="hljs-title function_">showToast</span>({
								<span class="hljs-attr">title</span>: <span class="hljs-string">'H.265è§£ç å¤±è´¥ï¼Œè¯·åˆ‡æ¢H.264æµ'</span>,
								<span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span>
							});
						}
					});
				}
			},
			<span class="hljs-comment">// é”€æ¯æ’­æ”¾å™¨ï¼ˆPromiseå°è£…ï¼Œç¡®ä¿å½»åº•ï¼‰</span>
			<span class="hljs-title function_">destroyPlayer</span>(<span class="hljs-params"/>) {
				<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> {
					<span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">isPlayerReady</span>) {
						<span class="hljs-keyword">try</span> {
							<span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span>.<span class="hljs-title function_">JS_Stop</span>(); <span class="hljs-comment">// å…ˆåœæ­¢æ’­æ”¾ï¼ˆæµ·åº·æ ‡å‡†æ–¹æ³•ï¼‰</span>
							<span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span>.<span class="hljs-title function_">off</span>(); <span class="hljs-comment">// è§£ç»‘äº‹ä»¶</span>
							<span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span>.<span class="hljs-title function_">destroy</span>(); <span class="hljs-comment">// é”€æ¯å®ä¾‹</span>
							<span class="hljs-comment">// æ¸…ç©ºå®¹å™¨DOMï¼Œé¿å…æ®‹ç•™</span>
							<span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'video-container'</span>);
							<span class="hljs-keyword">if</span> (container) container.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">''</span>;
						} <span class="hljs-keyword">catch</span> (err) {
							<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'é”€æ¯æ’­æ”¾å™¨é”™è¯¯ï¼š'</span>, err);
						} <span class="hljs-keyword">finally</span> {
							<span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span> = <span class="hljs-literal">null</span>;
							<span class="hljs-variable language_">this</span>.<span class="hljs-property">isPlayerReady</span> = <span class="hljs-literal">false</span>;
							<span class="hljs-title function_">resolve</span>();
						}
					} <span class="hljs-keyword">else</span> {
						<span class="hljs-title function_">resolve</span>();
					}
				});
			},
			<span class="hljs-comment">// å…¨å±æ’­æ”¾</span>
			<span class="hljs-title function_">wholeFullScreen</span>(<span class="hljs-params"/>) {
				<span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span>) <span class="hljs-keyword">return</span>;
				<span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span>.<span class="hljs-title function_">JS_FullScreenDisplay</span>(<span class="hljs-literal">true</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
					<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…¨å±æˆåŠŸ'</span>);
				}).<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
					<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å…¨å±å¤±è´¥ï¼š'</span>, e);
				})
			},
			<span class="hljs-comment">// åˆå§‹åŒ–æ’­æ”¾å™¨ï¼ˆé”å®šè½¯è§£ï¼Œç¨³åŒ–è§£ç ï¼‰</span>
			<span class="hljs-title function_">initPlayer</span>(<span class="hljs-params"/>) {
				<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
					<span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">JSPlugin</span>) {
						<span class="hljs-title function_">resolve</span>(<span class="hljs-literal">false</span>);
						<span class="hljs-keyword">return</span>;
					}
					<span class="hljs-keyword">try</span> {
						<span class="hljs-keyword">const</span> my_player = <span class="hljs-keyword">new</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title class_">JSPlugin</span>({
							<span class="hljs-attr">szId</span>: <span class="hljs-string">'video-container'</span>, <span class="hljs-comment">// å®¹å™¨ID</span>
							<span class="hljs-attr">szBasePath</span>: <span class="hljs-string">"/static/js/"</span>, <span class="hljs-comment">// SDKè·¯å¾„</span>
							<span class="hljs-attr">iMaxSplit</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">// ç§»åŠ¨ç«¯åªéœ€è¦1è·¯æ’­æ”¾ï¼Œå‡å°‘æ€§èƒ½æ¶ˆè€—</span>
							<span class="hljs-attr">openDebug</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// å…³é—­debugï¼Œå‡å°‘æ—¥å¿—å¹²æ‰°</span>
							<span class="hljs-attr">mseWorkerEnable</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¼€å¯å¤šçº¿ç¨‹è§£ç ï¼Œæå‡è½¯è§£æ€§èƒ½</span>
							<span class="hljs-attr">bSupporDoubleClickFull</span>: <span class="hljs-literal">true</span>,
							<span class="hljs-comment">// ========== æ ¸å¿ƒï¼šé”å®šè½¯è§£ï¼Œé¿å…H.265ç¡¬è§£ä¸ç¨³å®š ==========</span>
							<span class="hljs-attr">decodeType</span>: <span class="hljs-string">'soft'</span>, <span class="hljs-comment">// å¼ºåˆ¶è½¯è§£ï¼ˆå…³é”®ï¼æ”¾å¼ƒautoç¡¬è§£ï¼‰</span>
							<span class="hljs-attr">enableSoftDecode</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// æ˜¾å¼å¼€å¯è½¯è§£</span>
							<span class="hljs-attr">supportH265</span>: <span class="hljs-literal">true</span>,
							<span class="hljs-attr">isFlushURI</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// åˆ‡æ¢æµæ¸…ç©ºURIç¼“å­˜</span>
							<span class="hljs-attr">reconnectTimes</span>: <span class="hljs-number">3</span>, <span class="hljs-comment">// è§£ç å¤±è´¥é‡è¿</span>
							<span class="hljs-attr">reconnectInterval</span>: <span class="hljs-number">2000</span>,
							<span class="hljs-comment">// ========== ç§»åŠ¨ç«¯é€‚é… ==========</span>
							<span class="hljs-attr">renderType</span>: <span class="hljs-string">'canvas'</span>, <span class="hljs-comment">// canvasæ¸²æŸ“æ›´å…¼å®¹</span>
							<span class="hljs-attr">lowLatency</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// å…³é—­ä½å»¶è¿Ÿï¼Œæ¢ç¨³å®šæ€§</span>
							<span class="hljs-attr">maxBufferLength</span>: <span class="hljs-number">5</span>, <span class="hljs-comment">// é™ä½ç¼“å†²ï¼Œå‡å°‘å†…å­˜å ç”¨</span>
						});
						<span class="hljs-comment">// ç»‘å®šé”™è¯¯å›è°ƒï¼Œæ•è·è§£ç å¼‚å¸¸</span>
						my_player.<span class="hljs-title function_">JS_SetWindowControlCallback</span>({
							<span class="hljs-attr">pluginErrorHandler</span>: <span class="hljs-function">(<span class="hljs-params">iWndIndex, iErrorCode, oError</span>) =&gt;</span> {
								<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ’­æ”¾å™¨é”™è¯¯ï¼š'</span>, iWndIndex, iErrorCode, oError);
								<span class="hljs-keyword">if</span> (oError &amp;&amp; oError.<span class="hljs-property">message</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'h265'</span>)) {
									<span class="hljs-variable language_">this</span>.<span class="hljs-property">isPlayerReady</span> = <span class="hljs-literal">false</span>;
								}
							},
							<span class="hljs-attr">firstFrameDisplay</span>: <span class="hljs-function">(<span class="hljs-params">iWndIndex, iWidth, iHeight</span>) =&gt;</span> {
								<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é¦–å¸§æ˜¾ç¤ºï¼š'</span>, iWndIndex, iWidth, iHeight);
								<span class="hljs-variable language_">this</span>.<span class="hljs-property">isPlayerReady</span> = <span class="hljs-literal">true</span>; <span class="hljs-comment">// é¦–å¸§æ˜¾ç¤ºæ ‡è®°å°±ç»ª</span>
							},
							<span class="hljs-attr">performanceLack</span>: <span class="hljs-function">(<span class="hljs-params">iWndIndex</span>) =&gt;</span> {
								<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'æ€§èƒ½ä¸è¶³ï¼š'</span>, iWndIndex);
							}
						});
						<span class="hljs-variable language_">this</span>.<span class="hljs-property">player</span> = my_player;
						<span class="hljs-variable language_">this</span>.<span class="hljs-property">isPlayerReady</span> = <span class="hljs-literal">true</span>; <span class="hljs-comment">// æ ‡è®°åˆå§‹åŒ–å®Œæˆ</span>
						<span class="hljs-title function_">resolve</span>(<span class="hljs-literal">true</span>);
					} <span class="hljs-keyword">catch</span> (err) {
						<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'åˆå§‹åŒ–æ’­æ”¾å™¨å¤±è´¥ï¼š'</span>, err);
						<span class="hljs-variable language_">this</span>.<span class="hljs-property">isPlayerReady</span> = <span class="hljs-literal">false</span>;
						<span class="hljs-title function_">resolve</span>(<span class="hljs-literal">false</span>);
					}
				});
			},
			<span class="hljs-comment">// æˆªå–è®¾å¤‡åºå·å’Œé€šé“å·ï¼ˆä¿ç•™ï¼‰</span>
			<span class="hljs-title function_">getHashParts</span>(<span class="hljs-params">str</span>) {
				<span class="hljs-keyword">const</span> parts = str.<span class="hljs-title function_">split</span>(<span class="hljs-string">"#"</span>);
				<span class="hljs-keyword">return</span> {
					<span class="hljs-attr">before</span>: parts[<span class="hljs-number">0</span>],
					<span class="hljs-attr">after</span>: parts.<span class="hljs-property">length</span> &gt; <span class="hljs-number">1</span> ? parts[<span class="hljs-number">1</span>] : <span class="hljs-string">""</span>,
				};
			}
		},
	}
&lt;/script&gt;

</code></pre>
<h3 data-id="heading-3">åœ¨é¡¹ç›®ä¸­ä¹Ÿé‡åˆ°äº†å¾ˆå¤šé—®é¢˜ï¼Œä¹Ÿéƒ½ä¸€ä¸€è§£å†³äº†ï¼š</h3>
<p>1ï¼šå› ä¸ºå¼€å‘çš„<code>app</code>ï¼Œåœ¨æµè§ˆå™¨çš„æ‰‹æœºæ¨¡æ‹Ÿå™¨èƒ½å¤Ÿæ’­æ”¾ï¼Œä½†æ˜¯åœ¨çœŸæœºè¿è¡Œçš„æ—¶å€™æç¤º<code>JSPlugin</code>æ²¡æœ‰å®šä¹‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67ad4cd187c14b0a80f027e20ecc8814~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZqP56yU6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765849992&amp;x-signature=TlihjfitUE1vp7EwGNZJUmQiqhM%3D" alt="ä¼ä¸šå¾®ä¿¡æˆªå›¾_17649838975105.png" loading="lazy"/>
åæ¥ç»è¿‡è°ƒæ•´ï¼ŒæŸ¥èµ„æ–™æ˜¯å› ä¸º<code>jsæ–‡ä»¶</code>å¼•å…¥æ²¡æœ‰åŠ è½½æˆåŠŸï¼Œåæ¥å°±æ”¹å˜äº†å¼•å…¥æ–¹å¼ï¼Œå˜æˆè¿™æ ·</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49eb6044bc484be0b4eb43edf1b18499~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZqP56yU6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765849992&amp;x-signature=EI%2BJKnWXCIVmpxNIYAouOM8dP%2FM%3D" alt="image.png" loading="lazy"/></p>
<p>2ï¼šå› ä¸ºæ˜¯å¤šä¸ªè§†é¢‘æµè¿›è¡Œåˆ‡æ¢ï¼Œåœ¨åˆ‡æ¢çš„æ—¶å€™ä¼šå‡ºç°è¿™æ ·çš„é—®é¢˜ï¼ŒåŸå› æ˜¯<code>å®ä¾‹æœªé”€æ¯</code></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/44ae407cef51448c8ae87c21ee2d8b61~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZqP56yU6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765849992&amp;x-signature=ol5T4UDwD1BYcRhhVPOGXOIIRds%3D" alt="image.png" loading="lazy"/></p>
<p>3ï¼šåœ¨åˆ‡æ¢çš„æ—¶å€™ä¼šå‡ºç°<code>[H5player]-%c2025-12-08 10:57:44.823%c-Error: color: blue color: black VideoDecoder not support h265: at app-view.js:45399</code>,å¯¼è‡´æ’­æ”¾ä¸å‡ºæ¥ï¼Œä»¥ä¸‹æ˜¯è§£å†³åŠæ³•</p>
<p>åœ¨ <code>UniApp</code> ä¸­ä½¿ç”¨<code>æµ·åº·å¨è§† H5 æ’­æ”¾å™¨</code>åˆ‡æ¢è§†é¢‘æµæ—¶å‡ºç°Â <code>[H5player] VideoDecoder not support h265</code>Â é”™è¯¯ï¼Œæ ¸å¿ƒåŸå› æ˜¯<strong>ç§»åŠ¨ç«¯æµè§ˆå™¨ / è®¾å¤‡ä¸æ”¯æŒ H.265ï¼ˆHEVCï¼‰è§£ç </strong>ï¼Œä¸”<code>æµ·åº·å¨è§† H5 æ’­æ”¾å™¨</code>é»˜è®¤æœªå¯ç”¨å…¼å®¹é™çº§ç­–ç•¥ã€‚ä»¥ä¸‹æ˜¯åˆ†ç»´åº¦çš„è§£å†³æ–¹æ¡ˆï¼Œä»ã€Œè§£ç å…¼å®¹ã€ã€Œæµæ ¼å¼è½¬æ¢ã€ã€Œæ’­æ”¾å™¨é…ç½®ã€ä¸‰ä¸ªå±‚é¢å½»åº•è§£å†³ï¼š</p>
<h4 data-id="heading-4">ä¸€ã€æ ¸å¿ƒé—®é¢˜å®šä½</h4>
<p>H.265ï¼ˆHEVCï¼‰æ˜¯é«˜æ•ˆè§†é¢‘ç¼–ç æ ¼å¼ï¼Œä½†ç§»åŠ¨ç«¯å­˜åœ¨ä¸¤å¤§å…¼å®¹é—®é¢˜ï¼š</p>
<ol>
<li><strong>ç¡¬ä»¶å±‚é¢</strong>ï¼šä¸­ä½ç«¯å®‰å“ /iOS è®¾å¤‡çš„è§†é¢‘è§£ç èŠ¯ç‰‡ä¸æ”¯æŒ H.265 ç¡¬è§£ï¼›</li>
<li><strong>æµè§ˆå™¨å±‚é¢</strong>ï¼šç§»åŠ¨ç«¯ Chrome/Safari ç­‰æµè§ˆå™¨çš„<code>VideoDecoder</code>Â APIï¼ˆWebCodecsï¼‰å¯¹ H.265 æ”¯æŒæå·®ï¼Œä»…éƒ¨åˆ†é«˜ç‰ˆæœ¬å®‰å“è®¾å¤‡å…¼å®¹ï¼›</li>
<li><strong>æ’­æ”¾å™¨å±‚é¢</strong>ï¼šæµ·åº· H5 æ’­æ”¾å™¨é»˜è®¤ä¼˜å…ˆä½¿ç”¨ç¡¬è§£ï¼Œæœªæ£€æµ‹åˆ° H.265 æ”¯æŒæ—¶ç›´æ¥æŠ¥é”™ï¼Œæœªè‡ªåŠ¨é™çº§ä¸ºè½¯è§£ / è½¬ç ã€‚</li>
<li/>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bacf1ce95e74455e8244e97361e93c3b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZqP56yU6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765849992&amp;x-signature=2f7ux7nakuaIZh3hbLnBFkXwe9U%3D" alt="image.png" loading="lazy"/></p>
<p>ä»¥ä¸Šå°±æ˜¯æˆ‘ä½¿ç”¨æµ·åº·å¨è§†çš„ç»éªŒåˆ†äº«ï¼Œå¤§å®¶å¦‚æœæœ‰ç›¸åŒçš„é—®é¢˜æˆ–è€…å…¶å®ƒå¥½çš„ç»éªŒï¼Œå¯ä»¥è¯„è®ºåŒºè®¨è®ºå“¦</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LLMåº”ç”¨å‰–æ: å°çº¢ä¹¦AIå›¾æ–‡ç”Ÿæˆå™¨-çº¢å¢¨]]></title>    <link>https://juejin.cn/post/7581306080434733107</link>    <guid>https://juejin.cn/post/7581306080434733107</guid>    <pubDate>2025-12-08T12:30:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581306080434733107" data-draft-id="7581406561684996142" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LLMåº”ç”¨å‰–æ: å°çº¢ä¹¦AIå›¾æ–‡ç”Ÿæˆå™¨-çº¢å¢¨"/> <meta itemprop="keywords" content="ç®—æ³•,GitHub"/> <meta itemprop="datePublished" content="2025-12-08T12:30:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="mengrennwpu"/> <meta itemprop="url" content="https://juejin.cn/user/2795379959560121"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LLMåº”ç”¨å‰–æ: å°çº¢ä¹¦AIå›¾æ–‡ç”Ÿæˆå™¨-çº¢å¢¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2795379959560121/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    mengrennwpu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T12:30:08.000Z" title="Mon Dec 08 2025 12:30:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>æ¬¢è¿å…³æ³¨å…¬ä¼—å·ï¼šçˆ±å­¦ä¹ çš„å¦®å¦®qiang</strong></p>
<ul>
<li>èŠ±äº†åŠå¤©æ—¶é—´ç¿»é˜…äº†è°·æ­Œçš„æç¤ºå·¥ç¨‹è§„èŒƒï¼Œ</li>
</ul>
<h2 data-id="heading-0">1. èƒŒæ™¯</h2>
<ul>
<li>èŠ±äº†è¿‘ä¸€å‘¨æ—¶é—´ï¼Œæ·±å…¥ç ”ç©¶äº†Githubè¿‘å‡ å¤©æ¯”è¾ƒæœ‰æ„æ€çš„ä¸€ä¸ªé¡¹ç›®ï¼Œå°çº¢ä¹¦AIå›¾æ–‡ç”Ÿæˆå™¨RedInkã€‚ä»…éœ€è¾“å…¥ä¸€ä¸ªä¸»é¢˜ä»¥åŠå¯é€‰çš„å‚è€ƒå›¾ç‰‡ï¼Œç³»ç»Ÿåˆ™ä¼šè‡ªåŠ¨ç”Ÿæˆå¤§çº²ï¼Œç„¶åé’ˆå¯¹æ¯ä¸ªç« èŠ‚ç”Ÿæˆå¯¹åº”çš„å›¾ç‰‡ã€‚</li>
<li>é¡¹ç›®å‰ç«¯é‡‡ç”¨Vue+TypeScriptï¼Œåç«¯é‡‡ç”¨Flaskã€‚</li>
<li>æ”¯æŒdockeréƒ¨ç½²åŠç¼–è¯‘éƒ¨ç½²ï¼Œæ–‡æœ¬æ¨¡å‹åŠå›¾åƒæ¨¡å‹æ”¯æŒç³»ç»Ÿç¼–è¾‘ã€‚</li>
<li>Ps: å›½å†…æœ‰å“ªäº›å¹³å°å¯ä»¥è®¿é—®nano banana 2 pro? æœ¬äººä½¿ç”¨çš„æ˜¯ä¸ƒç‰›ï¼Œå…è´¹è¯•ç”¨é¢åº¦è¿˜ä¸å°‘å“¦ã€‚</li>
</ul>
<h2 data-id="heading-1">2. ç³»ç»Ÿæ•ˆæœ</h2>
<ul>
<li>æ¨¡å‹é€‰æ‹©: Qwen3-14Bå¤§è¯­è¨€æ¨¡å‹ï¼ŒNano Banana2ç”Ÿå›¾æ¨¡å‹ã€‚</li>
<li>è¾“å…¥: 3å²å®å®å†¬å­£ä¿æš–æ”»ç•¥</li>
<li>è¾“å‡ºæ•ˆæœ:
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98b8d8fc49c8429a85ef7d23dbebb0fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWVuZ3Jlbm53cHU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765801808&amp;x-signature=bq9gOCpCRk6ohad1Hen6fv4A%2Fgo%3D" alt="ç”Ÿæˆæ•ˆæœå›¾.png" loading="lazy"/></li>
</ul>
<h2 data-id="heading-2">3. æ•´ä½“æµç¨‹</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b1466135ac0c4f6d9b447966acf7a971~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWVuZ3Jlbm53cHU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765801808&amp;x-signature=SsOlZF6VbWa%2FYG71nIqmM17wxCc%3D" alt="æµç¨‹.png" loading="lazy"/></p>
<ul>
<li>(1) ç”¨æˆ·é€šè¿‡ç³»ç»Ÿè¾“å…¥å…³æ³¨çš„ä¸»é¢˜ï¼Œä¹Ÿå¯åŒæ—¶ä¸Šä¼ å‚è€ƒçš„å¤šä¸ªå›¾ç‰‡</li>
<li>(2) ç³»ç»Ÿä¼šè°ƒç”¨LLMç”Ÿæˆå¤§çº²ï¼ŒåŒ…å«å°é¢ã€å¤šä¸ªå†…å®¹ç‰‡æ®µä»¥åŠæ€»ç»“ï¼Œå¦‚æœé’ˆå¯¹ç”Ÿæˆæ•ˆæœä¸æ»¡æ„ï¼Œå¯ä»¥ç›´æ¥åœ¨çº¿ç¼–è¾‘ã€‚</li>
<li>(3) ç¼–è¾‘å¥½æ¯ä¸ªæ®µè½åï¼Œå³å¯å¼€å§‹ä¸€é”®ç”Ÿå›¾ï¼Œå¯æ ¹æ®æœåŠ¡å•†æ¨¡å‹ç‰¹æ€§ï¼Œé‡‡ç”¨ä¸²è¡ŒåŠå¹¶è¡Œä¸¤ç§æ–¹å¼ã€‚</li>
<li>(4) ç”Ÿæˆå¥½çš„å›¾ç‰‡åï¼Œå¦‚æœé’ˆå¯¹å…¶ä¸­æŸäº›ä¸æ»¡æ„ï¼Œå¯ä»¥æ‰§è¡Œé‡æ–°ç”Ÿæˆï¼Œæœ€ç»ˆå¯ä»¥ä¸€é”®ç”Ÿæˆã€‚</li>
</ul>
<h2 data-id="heading-3">4. ä»£ç æµ…æ</h2>
<ul>
<li>(1) å‰åç«¯ä»£ç çš„å¯è¯»æ€§å¾ˆå¼ºï¼Œå»ºè®®å¯ä»¥æœ¬åœ°è¿›è¡Œè°ƒè¯•ã€‚å¦‚æœæƒ³è¦åœ¨vscodeä¸­åŒæ—¶è”è°ƒå‰ç«¯å’Œåç«¯ï¼Œå¯ä»¥é‡‡ç”¨å¦‚ä¸‹vscodeçš„è°ƒè¯•é…ç½®æ–‡ä»¶launch.json</li>
</ul>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.2.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"configurations"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"chrome"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"request"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"launch"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è°ƒè¯• Vue åº”ç”¨"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http://localhost:5173"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ä½ çš„å¼€å‘æœåŠ¡å™¨åœ°å€</span>
            <span class="hljs-attr">"webRoot"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"${workspaceFolder}/frontend/src"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"breakOnLoad"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"sourceMapPathOverrides"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"/src/*"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"${webRoot}/*"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"/@fs/*"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"${webRoot}/*"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"vite://@fs/*"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"${webRoot}/*"</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"runtimeArgs"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
                <span class="hljs-string">"--remote-allow-origins=*"</span>
            <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"skipFiles"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
                <span class="hljs-string">"&lt;node_internals&gt;/**"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-string">"${workspaceFolder}/frontend/node_modules/**"</span>
            <span class="hljs-punctuation">]</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"request"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"launch"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è°ƒè¯•æ„å»ºè„šæœ¬"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"program"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"${workspaceFolder}/frontend/node_modules/vite/bin/vite.js"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"dev"</span><span class="hljs-punctuation">]</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Python è°ƒè¯•ç¨‹åº: å½“å‰æ–‡ä»¶"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"debugpy"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"request"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"launch"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"program"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"${file}"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"console"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"integratedTerminal"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"justMyCode"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"purpose"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"debug-in-terminal"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"cwd"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"${workspaceFolder}"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"PYTHONPATH"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"${workspaceFolder}"</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-punctuation">]</span>
        <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>

<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li>(2) æ¨¡å‹é…ç½®ä¿¡æ¯å¦‚ä¸‹ï¼š</li>
</ul>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># å¤§è¯­è¨€æ¨¡å‹</span>
<span class="hljs-attr">active_provider:</span> <span class="hljs-string">qwen</span>

<span class="hljs-attr">providers:</span>
Â  <span class="hljs-attr">qwen:</span>
Â  Â  <span class="hljs-attr">api_key:</span> <span class="hljs-string">test</span>
Â  Â  <span class="hljs-attr">base_url:</span> <span class="hljs-string">http://172.16.0.32:20080</span>
Â  Â  <span class="hljs-attr">endpoint_type:</span> <span class="hljs-string">/v1/chat/completions</span>
Â  Â  <span class="hljs-attr">model:</span> <span class="hljs-string">Qwen3-14B</span>
Â  Â  <span class="hljs-attr">type:</span> <span class="hljs-string">openai_compatible</span>

<span class="hljs-comment"># ç”Ÿå›¾æ¨¡å‹</span>
<span class="hljs-attr">active_provider:</span> <span class="hljs-string">ä¸ƒç‰›</span>
<span class="hljs-attr">providers:</span>
  <span class="hljs-string">ä¸ƒç‰›:</span>
    <span class="hljs-attr">api_key:</span> <span class="hljs-string">sk-34xxxxx0</span>
    <span class="hljs-attr">base_url:</span> <span class="hljs-string">https://api.qnaigc.com</span>
    <span class="hljs-attr">endpoint_type:</span> <span class="hljs-string">/v1/images/edits</span>
    <span class="hljs-attr">high_concurrency:</span> <span class="hljs-literal">false</span>
    <span class="hljs-attr">model:</span> <span class="hljs-string">gemini-3.0-pro-image-preview</span>
    <span class="hljs-attr">short_prompt:</span> <span class="hljs-literal">false</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">image_api</span>
</code></pre>
<h2 data-id="heading-4">5. æ€»ç»“ä¸æ€è€ƒ</h2>
<ul>
<li>æœ¬æ–‡ä»‹ç»äº†å°çº¢ä¹¦çš„ä¸€é”®å›¾æ–‡ç”Ÿæˆå¹³å°ï¼Œå¹¶æä¾›äº†ç³»ç»Ÿçš„åŸºæœ¬æ‰§è¡Œæµç¨‹åŠåŸç†ã€‚åŒæ—¶åˆ†äº«äº†æœ¬äººåŸºäºæœ¬åœ°éƒ¨ç½²åï¼Œç”Ÿæˆçš„å›¾æ–‡æ•ˆæœï¼Œçœ¼è¿‡åƒéä¸å¦‚æ‰‹è¿‡ä¸€éï¼Œå®è·µæ–¹èƒ½å‡ºçœŸçŸ¥ã€‚</li>
</ul>
<h2 data-id="heading-5">6. å‚è€ƒ</h2>
<ul>
<li>(1) é¡¹ç›®åœ°å€: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FHisMax%2FRedInk" target="_blank" title="https://github.com/HisMax/RedInk" ref="nofollow noopener noreferrer">github.com/HisMax/RedIâ€¦</a></li>
<li>(2) ä¸ƒç‰›äº‘å¹³å°ç”Ÿå›¾æ¨¡å‹æ–‡æ¡£:<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.qiniu.com%2Faitokenapi%2F13166%2Ftext-to-image-api" target="_blank" title="https://developer.qiniu.com/aitokenapi/13166/text-to-image-api" ref="nofollow noopener noreferrer">developer.qiniu.com/aitokenapi/â€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI Agent åäºŒè¦ç´ æ–¹æ³•è®ºï¼šæ„å»ºç”Ÿäº§çº§æ™ºèƒ½ä½“çš„å®Œæ•´æŒ‡å—]]></title>    <link>https://juejin.cn/post/7581297888808648754</link>    <guid>https://juejin.cn/post/7581297888808648754</guid>    <pubDate>2025-12-08T12:24:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581297888808648754" data-draft-id="7581297888808615986" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI Agent åäºŒè¦ç´ æ–¹æ³•è®ºï¼šæ„å»ºç”Ÿäº§çº§æ™ºèƒ½ä½“çš„å®Œæ•´æŒ‡å—"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-08T12:24:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="twl"/> <meta itemprop="url" content="https://juejin.cn/user/3016715635534029"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI Agent åäºŒè¦ç´ æ–¹æ³•è®ºï¼šæ„å»ºç”Ÿäº§çº§æ™ºèƒ½ä½“çš„å®Œæ•´æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3016715635534029/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    twl
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T12:24:30.000Z" title="Mon Dec 08 2025 12:24:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»28åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡æ˜¯å¯¹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fhumanlayer%2F12-factor-agents" target="_blank" title="https://github.com/humanlayer/12-factor-agents" ref="nofollow noopener noreferrer">12 Factor Agents</a> é¡¹ç›®çš„æ·±åº¦è§£è¯»ä¸ç¿»è¯‘æ€»ç»“ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…ç†è§£å¹¶æ„å»ºå¯é ã€å¯ç»´æŠ¤çš„ AI Agent ç³»ç»Ÿã€‚</p>
</blockquote>
<h2 data-id="heading-0">ç›®å½•</h2>
<ul>
<li><a href="#%E5%BC%95%E8%A8%80%E6%88%91%E4%BB%AC%E6%98%AF%E5%A6%82%E4%BD%95%E8%B5%B0%E5%88%B0%E8%BF%99%E4%B8%80%E6%AD%A5%E7%9A%84" title="#%E5%BC%95%E8%A8%80%E6%88%91%E4%BB%AC%E6%98%AF%E5%A6%82%E4%BD%95%E8%B5%B0%E5%88%B0%E8%BF%99%E4%B8%80%E6%AD%A5%E7%9A%84">å¼•è¨€ï¼šæˆ‘ä»¬æ˜¯å¦‚ä½•èµ°åˆ°è¿™ä¸€æ­¥çš„</a></li>
<li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%9C%9F%E6%AD%A3%E7%9A%84-agent" title="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%9C%9F%E6%AD%A3%E7%9A%84-agent">ä»€ä¹ˆæ˜¯çœŸæ­£çš„ Agent</a></li>
<li><a href="#%E5%8D%81%E4%BA%8C%E8%A6%81%E7%B4%A0%E8%AF%A6%E8%A7%A3" title="#%E5%8D%81%E4%BA%8C%E8%A6%81%E7%B4%A0%E8%AF%A6%E8%A7%A3">åäºŒè¦ç´ è¯¦è§£</a>
<ul>
<li><a href="#%E8%A6%81%E7%B4%A0-1%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E5%88%B0%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8" title="#%E8%A6%81%E7%B4%A0-1%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E5%88%B0%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8">è¦ç´  1ï¼šè‡ªç„¶è¯­è¨€åˆ°å·¥å…·è°ƒç”¨</a></li>
<li><a href="#%E8%A6%81%E7%B4%A0-2%E6%8E%8C%E6%8E%A7%E6%8F%90%E7%A4%BA%E8%AF%8D" title="#%E8%A6%81%E7%B4%A0-2%E6%8E%8C%E6%8E%A7%E6%8F%90%E7%A4%BA%E8%AF%8D">è¦ç´  2ï¼šæŒæ§æç¤ºè¯</a></li>
<li><a href="#%E8%A6%81%E7%B4%A0-3%E6%8E%8C%E6%8E%A7%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AA%97%E5%8F%A3" title="#%E8%A6%81%E7%B4%A0-3%E6%8E%8C%E6%8E%A7%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AA%97%E5%8F%A3">è¦ç´  3ï¼šæŒæ§ä¸Šä¸‹æ–‡çª—å£</a></li>
<li><a href="#%E8%A6%81%E7%B4%A0-4%E5%B7%A5%E5%85%B7%E5%8F%AA%E6%98%AF%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA" title="#%E8%A6%81%E7%B4%A0-4%E5%B7%A5%E5%85%B7%E5%8F%AA%E6%98%AF%E7%BB%93%E6%9E%84%E5%8C%96%E8%BE%93%E5%87%BA">è¦ç´  4ï¼šå·¥å…·åªæ˜¯ç»“æ„åŒ–è¾“å‡º</a></li>
<li><a href="#%E8%A6%81%E7%B4%A0-5%E7%BB%9F%E4%B8%80%E6%89%A7%E8%A1%8C%E7%8A%B6%E6%80%81%E4%B8%8E%E4%B8%9A%E5%8A%A1%E7%8A%B6%E6%80%81" title="#%E8%A6%81%E7%B4%A0-5%E7%BB%9F%E4%B8%80%E6%89%A7%E8%A1%8C%E7%8A%B6%E6%80%81%E4%B8%8E%E4%B8%9A%E5%8A%A1%E7%8A%B6%E6%80%81">è¦ç´  5ï¼šç»Ÿä¸€æ‰§è¡ŒçŠ¶æ€ä¸ä¸šåŠ¡çŠ¶æ€</a></li>
<li><a href="#%E8%A6%81%E7%B4%A0-6%E5%90%AF%E5%8A%A8%E6%9A%82%E5%81%9C%E6%81%A2%E5%A4%8D%E7%9A%84%E7%AE%80%E5%8D%95-api" title="#%E8%A6%81%E7%B4%A0-6%E5%90%AF%E5%8A%A8%E6%9A%82%E5%81%9C%E6%81%A2%E5%A4%8D%E7%9A%84%E7%AE%80%E5%8D%95-api">è¦ç´  6ï¼šå¯åŠ¨/æš‚åœ/æ¢å¤çš„ç®€å• API</a></li>
<li><a href="#%E8%A6%81%E7%B4%A0-7%E7%94%A8%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8%E8%81%94%E7%B3%BB%E4%BA%BA%E7%B1%BB" title="#%E8%A6%81%E7%B4%A0-7%E7%94%A8%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8%E8%81%94%E7%B3%BB%E4%BA%BA%E7%B1%BB">è¦ç´  7ï¼šç”¨å·¥å…·è°ƒç”¨è”ç³»äººç±»</a></li>
<li><a href="#%E8%A6%81%E7%B4%A0-8%E6%8E%8C%E6%8E%A7%E6%8E%A7%E5%88%B6%E6%B5%81" title="#%E8%A6%81%E7%B4%A0-8%E6%8E%8C%E6%8E%A7%E6%8E%A7%E5%88%B6%E6%B5%81">è¦ç´  8ï¼šæŒæ§æ§åˆ¶æµ</a></li>
<li><a href="#%E8%A6%81%E7%B4%A0-9%E5%B0%86%E9%94%99%E8%AF%AF%E5%8E%8B%E7%BC%A9%E8%BF%9B%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AA%97%E5%8F%A3" title="#%E8%A6%81%E7%B4%A0-9%E5%B0%86%E9%94%99%E8%AF%AF%E5%8E%8B%E7%BC%A9%E8%BF%9B%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AA%97%E5%8F%A3">è¦ç´  9ï¼šå°†é”™è¯¯å‹ç¼©è¿›ä¸Šä¸‹æ–‡çª—å£</a></li>
<li><a href="#%E8%A6%81%E7%B4%A0-10%E5%B0%8F%E8%80%8C%E4%B8%93%E6%B3%A8%E7%9A%84-agent" title="#%E8%A6%81%E7%B4%A0-10%E5%B0%8F%E8%80%8C%E4%B8%93%E6%B3%A8%E7%9A%84-agent">è¦ç´  10ï¼šå°è€Œä¸“æ³¨çš„ Agent</a></li>
<li><a href="#%E8%A6%81%E7%B4%A0-11%E4%BB%8E%E4%BB%BB%E4%BD%95%E5%9C%B0%E6%96%B9%E8%A7%A6%E5%8F%91%E5%9C%A8%E7%94%A8%E6%88%B7%E6%89%80%E5%9C%A8%E7%9A%84%E5%9C%B0%E6%96%B9%E6%9C%8D%E5%8A%A1" title="#%E8%A6%81%E7%B4%A0-11%E4%BB%8E%E4%BB%BB%E4%BD%95%E5%9C%B0%E6%96%B9%E8%A7%A6%E5%8F%91%E5%9C%A8%E7%94%A8%E6%88%B7%E6%89%80%E5%9C%A8%E7%9A%84%E5%9C%B0%E6%96%B9%E6%9C%8D%E5%8A%A1">è¦ç´  11ï¼šä»ä»»ä½•åœ°æ–¹è§¦å‘ï¼Œåœ¨ç”¨æˆ·æ‰€åœ¨çš„åœ°æ–¹æœåŠ¡</a></li>
<li><a href="#%E8%A6%81%E7%B4%A0-12%E8%AE%A9-agent-%E6%88%90%E4%B8%BA%E6%97%A0%E7%8A%B6%E6%80%81-reducer" title="#%E8%A6%81%E7%B4%A0-12%E8%AE%A9-agent-%E6%88%90%E4%B8%BA%E6%97%A0%E7%8A%B6%E6%80%81-reducer">è¦ç´  12ï¼šè®© Agent æˆä¸ºæ— çŠ¶æ€ Reducer</a></li>
</ul>
</li>
<li><a href="#%E9%99%84%E5%BD%95%E9%A2%84%E5%8F%96%E4%B8%8A%E4%B8%8B%E6%96%87" title="#%E9%99%84%E5%BD%95%E9%A2%84%E5%8F%96%E4%B8%8A%E4%B8%8B%E6%96%87">é™„å½•ï¼šé¢„å–ä¸Šä¸‹æ–‡</a></li>
<li><a href="#%E6%80%BB%E7%BB%93" title="#%E6%80%BB%E7%BB%93">æ€»ç»“</a></li>
</ul>
<hr/>
<h2 data-id="heading-1">å¼•è¨€ï¼šæˆ‘ä»¬æ˜¯å¦‚ä½•èµ°åˆ°è¿™ä¸€æ­¥çš„</h2>
<p>æ— è®ºä½ æ˜¯ Agent é¢†åŸŸçš„æ–°æ‰‹è¿˜æ˜¯èµ„æ·±è€æ‰‹ï¼Œæœ¬æ–‡éƒ½å°†è¯•å›¾è¯´æœä½ æŠ›å¼€å¯¹ AI Agent çš„å›ºæœ‰è®¤çŸ¥ï¼Œä»ç¬¬ä¸€æ€§åŸç†é‡æ–°æ€è€ƒå®ƒä»¬ã€‚</p>
<h3 data-id="heading-2">è½¯ä»¶å‘å±•ç®€å²ä¸ Agent çš„æ¼”è¿›</h3>
<h4 data-id="heading-3">60 å¹´å‰ï¼šè½¯ä»¶å³æœ‰å‘å›¾</h4>
<p>æˆ‘ä»¬ç»å¸¸ä¼šè°ˆåˆ°æœ‰å‘å›¾ï¼ˆDGï¼‰å’Œå®ƒä»¬çš„æ— ç¯ç‰ˆæœ¬â€”â€”æœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œè½¯ä»¶æœ¬èº«å°±æ˜¯ä¸€ä¸ªæœ‰å‘å›¾ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è¿‡å»å¸¸ç”¨æµç¨‹å›¾æ¥è¡¨ç¤ºç¨‹åºã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown">å¼€å§‹ â†’ è¾“å…¥ â†’ å¤„ç† â†’ åˆ¤æ–­ â†’ è¾“å‡º â†’ ç»“æŸ
<span class="hljs-code">              â†‘          â†“
              â† å¾ªç¯å¤„ç† â†
</span></code></pre>
<h4 data-id="heading-4">20 å¹´å‰ï¼šDAG ç¼–æ’å™¨å…´èµ·</h4>
<p>å¤§çº¦ 20 å¹´å‰ï¼ŒDAG ç¼–æ’å™¨å¼€å§‹æµè¡Œèµ·æ¥ã€‚ç»å…¸çš„å¦‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Fairflow.apache.org%2F" target="_blank" title="https://airflow.apache.org/" ref="nofollow noopener noreferrer">Airflow</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.prefect.io%2F" target="_blank" title="https://www.prefect.io/" ref="nofollow noopener noreferrer">Prefect</a>ï¼Œä»¥åŠæ›´æ–°çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdagster.io%2F" target="_blank" title="https://dagster.io/" ref="nofollow noopener noreferrer">Dagster</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.inngest.com%2F" target="_blank" title="https://www.inngest.com/" ref="nofollow noopener noreferrer">Inngest</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.windmill.dev%2F" target="_blank" title="https://www.windmill.dev/" ref="nofollow noopener noreferrer">Windmill</a> ç­‰ã€‚å®ƒä»¬éµå¾ªç›¸åŒçš„å›¾æ¨¡å¼ï¼Œé¢å¤–æä¾›äº†å¯è§‚æµ‹æ€§ã€æ¨¡å—åŒ–ã€é‡è¯•ã€ç®¡ç†ç­‰åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-5">10-15 å¹´å‰ï¼šML æ¨¡å‹èå…¥ DAG</h4>
<p>å½“æœºå™¨å­¦ä¹ æ¨¡å‹å¼€å§‹å˜å¾—è¶³å¤Ÿå¼ºå¤§å¯ç”¨æ—¶ï¼Œæˆ‘ä»¬å¼€å§‹çœ‹åˆ°å¸¦æœ‰ ML æ¨¡å‹çš„ DAGã€‚ä½ å¯ä»¥æƒ³è±¡è¿™æ ·çš„æ­¥éª¤ï¼š"å°†æ­¤åˆ—ä¸­çš„æ–‡æœ¬æ‘˜è¦åˆ°æ–°åˆ—"æˆ–"æŒ‰ä¸¥é‡ç¨‹åº¦æˆ–æƒ…æ„Ÿå¯¹æ”¯æŒé—®é¢˜è¿›è¡Œåˆ†ç±»"ã€‚</p>
<p>ä½†å½’æ ¹ç»“åº•ï¼Œå®ƒä»ç„¶ä¸»è¦æ˜¯ç›¸åŒçš„ç¡®å®šæ€§è½¯ä»¶ã€‚</p>
<h3 data-id="heading-6">Agent çš„æ‰¿è¯º</h3>
<p>å­¦ä¹  Agent æ—¶æœ€å¤§çš„æ”¶è·æ˜¯ï¼š<strong>ä½ å¯ä»¥æŠ›å¼ƒ DAG</strong>ã€‚ä¸å†éœ€è¦è½¯ä»¶å·¥ç¨‹å¸ˆç¼–å†™æ¯ä¸ªæ­¥éª¤å’Œè¾¹ç¼˜æƒ…å†µï¼Œä½ åªéœ€ç»™ Agent ä¸€ä¸ªç›®æ ‡å’Œä¸€ç»„è½¬æ¢ï¼Œè®© LLM å®æ—¶å†³ç­–æ‰¾å‡ºè·¯å¾„ã€‚</p>
<p>è¿™é‡Œçš„æ‰¿è¯ºæ˜¯ï¼š</p>
<ul>
<li>å†™æ›´å°‘çš„ä»£ç </li>
<li>åªéœ€ç»™ LLM å›¾çš„"è¾¹"ï¼Œè®©å®ƒè‡ªå·±æ‰¾å‡ºèŠ‚ç‚¹</li>
<li>å¯ä»¥ä»é”™è¯¯ä¸­æ¢å¤</li>
<li>LLM å¯èƒ½ä¼šæ‰¾åˆ°è§£å†³é—®é¢˜çš„æ–°é¢–æ–¹æ¡ˆ</li>
</ul>
<h3 data-id="heading-7">Agent å³å¾ªç¯</h3>
<p>æ¢å¥è¯è¯´ï¼Œä½ æœ‰ä¸€ä¸ªç”±ä»¥ä¸‹æ­¥éª¤ç»„æˆçš„å¾ªç¯ï¼š</p>
<ol>
<li>LLM ç¡®å®šå·¥ä½œæµçš„ä¸‹ä¸€æ­¥ï¼Œè¾“å‡ºç»“æ„åŒ– JSONï¼ˆ"å·¥å…·è°ƒç”¨"ï¼‰</li>
<li>ç¡®å®šæ€§ä»£ç æ‰§è¡Œå·¥å…·è°ƒç”¨</li>
<li>ç»“æœé™„åŠ åˆ°ä¸Šä¸‹æ–‡çª—å£</li>
<li>é‡å¤ç›´åˆ°ä¸‹ä¸€æ­¥è¢«ç¡®å®šä¸º"å®Œæˆ"</li>
</ol>
<pre><code class="hljs language-python" lang="python">initial_event = {<span class="hljs-string">"message"</span>: <span class="hljs-string">"..."</span>}
context = [initial_event]

<span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
    next_step = <span class="hljs-keyword">await</span> llm.determine_next_step(context)
    context.append(next_step)

    <span class="hljs-keyword">if</span> next_step.intent == <span class="hljs-string">"done"</span>:
        <span class="hljs-keyword">return</span> next_step.final_answer

    result = <span class="hljs-keyword">await</span> execute_step(next_step)
    context.append(result)
</code></pre>
<h3 data-id="heading-8">"å¾ªç¯ç›´åˆ°è§£å†³"æ¨¡å¼çš„é—®é¢˜</h3>
<p>è¿™ç§æ¨¡å¼æœ€å¤§çš„é—®é¢˜æ˜¯ï¼š</p>
<blockquote>
<p><strong>å½“ä¸Šä¸‹æ–‡çª—å£è¿‡é•¿æ—¶ï¼ŒAgent ä¼šè¿·å¤±æ–¹å‘â€”â€”å®ƒä»¬ä¼šä¸æ–­å°è¯•ç›¸åŒçš„å¤±è´¥æ–¹æ³•</strong></p>
</blockquote>
<p>å³ä½¿ä½ æ²¡æœ‰æ‰‹å·¥æ„å»ºè¿‡ Agentï¼Œä½ å¯èƒ½ä¹Ÿåœ¨ä½¿ç”¨ Agentic ç¼–ç å·¥å…·æ—¶é‡åˆ°è¿‡è¿™ä¸ªé•¿ä¸Šä¸‹æ–‡é—®é¢˜ã€‚å®ƒä»¬åœ¨ä¸€æ®µæ—¶é—´åå°±ä¼šè¿·å¤±ï¼Œä½ éœ€è¦å¼€å§‹æ–°çš„å¯¹è¯ã€‚</p>
<p>æˆ‘ç”šè‡³ä¼šæå‡ºä¸€ä¸ªä½ å¯èƒ½å·²ç»å‘å±•å‡ºè‡ªå·±ç›´è§‰çš„è§‚ç‚¹ï¼š</p>
<blockquote>
<h3 data-id="heading-9"><strong>å³ä½¿æ¨¡å‹æ”¯æŒè¶Šæ¥è¶Šé•¿çš„ä¸Šä¸‹æ–‡çª—å£ï¼Œå°è€Œä¸“æ³¨çš„æç¤ºå’Œä¸Šä¸‹æ–‡æ€»æ˜¯èƒ½å¾—åˆ°æ›´å¥½çš„ç»“æœ</strong></h3>
</blockquote>
<p>å¤§å¤šæ•°æ„å»ºè€…åœ¨æ„è¯†åˆ°è¶…è¿‡ 10-20 è½®çš„ä»»ä½•äº‹æƒ…éƒ½ä¼šå˜æˆ LLM æ— æ³•æ¢å¤çš„å¤§æ··ä¹±åï¼Œå°±æŠŠ"å·¥å…·è°ƒç”¨å¾ªç¯"çš„æƒ³æ³•æ”¾åˆ°ä¸€è¾¹äº†ã€‚å³ä½¿ Agent 90% çš„æ—¶é—´éƒ½èƒ½åšå¯¹ï¼Œé‚£ç¦»"è¶³å¤Ÿå¥½åˆ°å¯ä»¥äº¤ç»™å®¢æˆ·"è¿˜å·®å¾—å¾ˆè¿œã€‚ä½ èƒ½æƒ³è±¡ä¸€ä¸ª 10% é¡µé¢åŠ è½½éƒ½ä¼šå´©æºƒçš„ Web åº”ç”¨å—ï¼Ÿ</p>
<h3 data-id="heading-10">çœŸæ­£æœ‰æ•ˆçš„ï¼šå¾®å‹ Agent</h3>
<p>æˆ‘åœ¨å®é™…ä¸­çœ‹åˆ°å¾ˆå¤šçš„ä¸€ä»¶äº‹æ˜¯å°† Agent æ¨¡å¼æ•£å¸ƒåˆ°æ›´å¹¿æ³›çš„ç¡®å®šæ€§ DAG ä¸­ã€‚</p>
<p>é€šè¿‡è®©è¯­è¨€æ¨¡å‹ç®¡ç†èŒƒå›´è‰¯å¥½çš„ä»»åŠ¡é›†ï¼Œå¯ä»¥è½»æ¾åœ°æ•´åˆå®æ—¶çš„äººç±»åé¦ˆï¼Œå°†å…¶è½¬åŒ–ä¸ºå·¥ä½œæµæ­¥éª¤ï¼Œè€Œä¸ä¼šé™·å…¥ä¸Šä¸‹æ–‡é”™è¯¯å¾ªç¯ã€‚</p>
<h3 data-id="heading-11">çœŸå®çš„å¾®å‹ Agent ç¤ºä¾‹</h3>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¡®å®šæ€§ä»£ç å¦‚ä½•è¿è¡Œä¸€ä¸ªè´Ÿè´£å¤„ç†éƒ¨ç½²çš„äººæœºäº¤äº’æ­¥éª¤çš„å¾®å‹ Agent ç¤ºä¾‹ï¼š</p>
<ol>
<li><strong>äººç±»</strong> å°† PR åˆå¹¶åˆ° GitHub main åˆ†æ”¯</li>
<li><strong>ç¡®å®šæ€§ä»£ç </strong> éƒ¨ç½²åˆ° staging ç¯å¢ƒ</li>
<li><strong>ç¡®å®šæ€§ä»£ç </strong> å¯¹ staging è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•</li>
<li><strong>ç¡®å®šæ€§ä»£ç </strong> å°†ä»»åŠ¡äº¤ç»™ Agent è¿›è¡Œç”Ÿäº§éƒ¨ç½²ï¼Œåˆå§‹ä¸Šä¸‹æ–‡ï¼š"å°† SHA 4af9ec0 éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ"</li>
<li><strong>Agent</strong> è°ƒç”¨ <code>deploy_frontend_to_prod(4af9ec0)</code></li>
<li><strong>ç¡®å®šæ€§ä»£ç </strong> è¯·æ±‚äººç±»æ‰¹å‡†æ­¤æ“ä½œ</li>
<li><strong>äººç±»</strong> æ‹’ç»æ“ä½œå¹¶åé¦ˆ"ä½ èƒ½å…ˆéƒ¨ç½²åç«¯å—ï¼Ÿ"</li>
<li><strong>Agent</strong> è°ƒç”¨ <code>deploy_backend_to_prod(4af9ec0)</code></li>
<li><strong>ç¡®å®šæ€§ä»£ç </strong> è¯·æ±‚äººç±»æ‰¹å‡†æ­¤æ“ä½œ</li>
<li><strong>äººç±»</strong> æ‰¹å‡†æ“ä½œ</li>
<li><strong>ç¡®å®šæ€§ä»£ç </strong> æ‰§è¡Œåç«¯éƒ¨ç½²</li>
<li><strong>Agent</strong> è°ƒç”¨ <code>deploy_frontend_to_prod(4af9ec0)</code></li>
<li><strong>ç¡®å®šæ€§ä»£ç </strong> è¯·æ±‚äººç±»æ‰¹å‡†æ­¤æ“ä½œ</li>
<li><strong>äººç±»</strong> æ‰¹å‡†æ“ä½œ</li>
<li><strong>ç¡®å®šæ€§ä»£ç </strong> æ‰§è¡Œå‰ç«¯éƒ¨ç½²</li>
<li><strong>Agent</strong> ç¡®å®šä»»åŠ¡æˆåŠŸå®Œæˆï¼Œå®Œæˆï¼</li>
<li><strong>ç¡®å®šæ€§ä»£ç </strong> å¯¹ç”Ÿäº§ç¯å¢ƒè¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•</li>
<li><strong>ç¡®å®šæ€§ä»£ç </strong> ä»»åŠ¡å®Œæˆï¼Œæˆ–ä¼ é€’ç»™å›æ»š Agent å®¡æŸ¥å¤±è´¥å¹¶å¯èƒ½å›æ»š</li>
</ol>
<hr/>
<h2 data-id="heading-12">ä»€ä¹ˆæ˜¯çœŸæ­£çš„ Agent</h2>
<p>ä¸€ä¸ª Agent æœ¬è´¨ä¸Šç”±ä»¥ä¸‹å››ä¸ªç»„ä»¶æ„æˆï¼š</p>
<ol>
<li><strong>æç¤ºè¯ï¼ˆPromptï¼‰</strong> - å‘Šè¯‰ LLM å¦‚ä½•è¡Œä¸ºï¼Œä»¥åŠå®ƒæœ‰å“ªäº›å¯ç”¨çš„"å·¥å…·"ã€‚æç¤ºçš„è¾“å‡ºæ˜¯æè¿°å·¥ä½œæµä¸‹ä¸€æ­¥çš„ JSON å¯¹è±¡ï¼ˆ"å·¥å…·è°ƒç”¨"æˆ–"å‡½æ•°è°ƒç”¨"ï¼‰</li>
<li><strong>Switch è¯­å¥</strong> - æ ¹æ® LLM è¿”å›çš„ JSONï¼Œå†³å®šå¦‚ä½•å¤„ç†å®ƒ</li>
<li><strong>ç´¯ç§¯çš„ä¸Šä¸‹æ–‡</strong> - å­˜å‚¨å·²å‘ç”Ÿæ­¥éª¤åŠå…¶ç»“æœçš„åˆ—è¡¨</li>
<li><strong>For å¾ªç¯</strong> - ç›´åˆ° LLM å‘å‡ºæŸç§"ç»ˆæ­¢"å·¥å…·è°ƒç”¨ï¼ˆæˆ–çº¯æ–‡æœ¬å“åº”ï¼‰ï¼Œå°† switch è¯­å¥çš„ç»“æœæ·»åŠ åˆ°ä¸Šä¸‹æ–‡çª—å£å¹¶è¦æ±‚ LLM é€‰æ‹©ä¸‹ä¸€æ­¥</li>
</ol>
<p>åœ¨"éƒ¨ç½²æœºå™¨äºº"ç¤ºä¾‹ä¸­ï¼Œæ‹¥æœ‰æ§åˆ¶æµå’Œä¸Šä¸‹æ–‡ç´¯ç§¯å¸¦æ¥å‡ ä¸ªå¥½å¤„ï¼š</p>
<ul>
<li>åœ¨æˆ‘ä»¬çš„ <strong>switch è¯­å¥</strong> å’Œ <strong>for å¾ªç¯</strong> ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åŠ«æŒæ§åˆ¶æµæ¥æš‚åœç­‰å¾…äººç±»è¾“å…¥æˆ–ç­‰å¾…é•¿æ—¶é—´è¿è¡Œä»»åŠ¡çš„å®Œæˆ</li>
<li>æˆ‘ä»¬å¯ä»¥è½»æ¾åœ°åºåˆ—åŒ– <strong>ä¸Šä¸‹æ–‡</strong> çª—å£ä»¥å®ç°æš‚åœ+æ¢å¤</li>
<li>åœ¨æˆ‘ä»¬çš„ <strong>æç¤º</strong> ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä¼˜åŒ–å¦‚ä½•å‘ LLM ä¼ é€’æŒ‡ä»¤å’Œ"åˆ°ç›®å‰ä¸ºæ­¢å‘ç”Ÿäº†ä»€ä¹ˆ"</li>
</ul>
<hr/>
<h2 data-id="heading-13">åäºŒè¦ç´ è¯¦è§£</h2>
<h3 data-id="heading-14">è¦ç´  1ï¼šè‡ªç„¶è¯­è¨€åˆ°å·¥å…·è°ƒç”¨</h3>
<p>Agent æ„å»ºä¸­æœ€å¸¸è§çš„æ¨¡å¼ä¹‹ä¸€æ˜¯å°†è‡ªç„¶è¯­è¨€è½¬æ¢ä¸ºç»“æ„åŒ–å·¥å…·è°ƒç”¨ã€‚è¿™æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ¨¡å¼ï¼Œå…è®¸ä½ æ„å»ºèƒ½å¤Ÿæ¨ç†ä»»åŠ¡å¹¶æ‰§è¡Œå®ƒä»¬çš„ Agentã€‚</p>
<p>è¿™ä¸ªæ¨¡å¼çš„åŸå­åº”ç”¨æ˜¯å°†è¿™æ ·çš„çŸ­è¯­ï¼š</p>
<blockquote>
<p>"ä½ èƒ½ä¸º Terri åˆ›å»ºä¸€ä¸ª 750 ç¾å…ƒçš„ä»˜æ¬¾é“¾æ¥ï¼Œç”¨äºèµåŠ©äºŒæœˆä»½çš„ AI Tinkerers èšä¼šå—ï¼Ÿ"</p>
</blockquote>
<p>è½¬æ¢ä¸ºæè¿° Stripe API è°ƒç”¨çš„ç»“æ„åŒ–å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"function"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"create_payment_link"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"parameters"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"amount"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">750</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"customer"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cust_128934ddasf9"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"product"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"prod_8675309"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"price"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"prc_09874329fds"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"quantity"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"memo"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"äºŒæœˆä»½ AI tinkerers èšä¼šçš„ä»˜æ¬¾é“¾æ¥"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ä»é‚£é‡Œï¼Œç¡®å®šæ€§ä»£ç å¯ä»¥æ¥æ”¶æœ‰æ•ˆè´Ÿè½½å¹¶å¤„ç†å®ƒï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># LLM æ¥æ”¶è‡ªç„¶è¯­è¨€å¹¶è¿”å›ç»“æ„åŒ–å¯¹è±¡</span>
next_step = <span class="hljs-keyword">await</span> llm.determine_next_step(
    <span class="hljs-string">"""
    ä¸º Jeff åˆ›å»ºä¸€ä¸ª 750 ç¾å…ƒçš„ä»˜æ¬¾é“¾æ¥
    ç”¨äºèµåŠ©äºŒæœˆä»½çš„ AI tinkerers èšä¼š
    """</span>
)

<span class="hljs-comment"># æ ¹æ®å…¶å‡½æ•°å¤„ç†ç»“æ„åŒ–è¾“å‡º</span>
<span class="hljs-keyword">if</span> next_step.function == <span class="hljs-string">'create_payment_link'</span>:
    stripe.paymentlinks.create(next_step.parameters)
    <span class="hljs-keyword">return</span>  <span class="hljs-comment"># æˆ–è€…ä½ æƒ³è¦çš„ä»»ä½•ä¸œè¥¿</span>
<span class="hljs-keyword">elif</span> next_step.function == <span class="hljs-string">'something_else'</span>:
    <span class="hljs-comment"># ... æ›´å¤šæƒ…å†µ</span>
    <span class="hljs-keyword">pass</span>
<span class="hljs-keyword">else</span>:  <span class="hljs-comment"># æ¨¡å‹æ²¡æœ‰è°ƒç”¨æˆ‘ä»¬çŸ¥é“çš„å·¥å…·</span>
    <span class="hljs-comment"># åšå…¶ä»–äº‹æƒ…</span>
    <span class="hljs-keyword">pass</span>
</code></pre>
<p><strong>æ ¸å¿ƒä»·å€¼</strong>ï¼šLLM è´Ÿè´£ç†è§£æ„å›¾å’Œæå–å‚æ•°ï¼Œç¡®å®šæ€§ä»£ç è´Ÿè´£å®‰å…¨å¯é åœ°æ‰§è¡Œæ“ä½œã€‚è¿™ç§åˆ†ç¦»åˆ›å»ºäº†æ¸…æ™°çš„èŒè´£è¾¹ç•Œã€‚</p>
<hr/>
<h3 data-id="heading-15">è¦ç´  2ï¼šæŒæ§æç¤ºè¯</h3>
<p><strong>ä¸è¦å°†æç¤ºå·¥ç¨‹å¤–åŒ…ç»™æ¡†æ¶ã€‚</strong></p>
<p>è¿™ç»éæ–°é²œå»ºè®®ã€‚å¾ˆå¤šä¸“å®¶éƒ½å¼ºè°ƒè¿‡è¿™ä¸€ç‚¹ï¼š</p>
<blockquote>
<p>"å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ LangChain ä¸”æ— æ³•è§£é‡Šä½ æ­£åœ¨åšä»€ä¹ˆï¼Œä½ ä¸çŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆã€‚å¦‚æœä½ æ­£åœ¨æŠ½è±¡å‡ºæç¤ºï¼Œä½ åšé”™äº†ã€‚"</p>
</blockquote>
<p>ä¸€äº›æ¡†æ¶æä¾›äº†è¿™æ ·çš„"é»‘ç›’"æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-python" lang="python">agent = Agent(
    role=<span class="hljs-string">"..."</span>,
    goal=<span class="hljs-string">"..."</span>,
    personality=<span class="hljs-string">"..."</span>,
    tools=[tool1, tool2, tool3]
)

task = Task(
    instructions=<span class="hljs-string">"..."</span>,
    expected_output=OutputModel
)

result = agent.run(task)
</code></pre>
<p>è¿™å¯¹äºå¼€å§‹ä½¿ç”¨ä¸€æµçš„æç¤ºå·¥ç¨‹æ¥è¯´å¾ˆæ£’ï¼Œä½†é€šå¸¸å¾ˆéš¾è°ƒæ•´å’Œ/æˆ–é€†å‘å·¥ç¨‹ä»¥è·å¾—æ­£ç¡®çš„ token è¿›å…¥æ¨¡å‹ã€‚</p>
<p><strong>å–è€Œä»£ä¹‹</strong>ï¼Œæ‹¥æœ‰æç¤ºå¹¶å°†å®ƒä»¬è§†ä¸ºä¸€ç­‰ä»£ç ï¼š</p>
<pre><code class="hljs language-rust" lang="rust">function <span class="hljs-title function_ invoke__">DetermineNextStep</span>(thread: string) <span class="hljs-punctuation">-&gt;</span> DoneForNow | ListGitTags | DeployBackend | DeployFrontend | RequestMoreInformation {
  prompt #<span class="hljs-string">"
    {{ _.role("</span>system<span class="hljs-string">") }}

    ä½ æ˜¯ä¸€ä¸ªæœ‰å¸®åŠ©çš„åŠ©æ‰‹ï¼Œç®¡ç†å‰ç«¯å’Œåç«¯ç³»ç»Ÿçš„éƒ¨ç½²ã€‚
    ä½ åŠªåŠ›å·¥ä½œä»¥ç¡®ä¿é€šè¿‡éµå¾ªæœ€ä½³å®è·µå’Œæ­£ç¡®çš„éƒ¨ç½²ç¨‹åºæ¥å®ç°å®‰å…¨å’ŒæˆåŠŸçš„éƒ¨ç½²ã€‚

    åœ¨éƒ¨ç½²ä»»ä½•ç³»ç»Ÿä¹‹å‰ï¼Œä½ åº”è¯¥æ£€æŸ¥ï¼š
    - éƒ¨ç½²ç¯å¢ƒï¼ˆstaging vs productionï¼‰
    - è¦éƒ¨ç½²çš„æ­£ç¡®æ ‡ç­¾/ç‰ˆæœ¬
    - å½“å‰ç³»ç»ŸçŠ¶æ€

    ä½ å¯ä»¥ä½¿ç”¨ deploy_backendã€deploy_frontend å’Œ check_deployment_status ç­‰å·¥å…·æ¥ç®¡ç†éƒ¨ç½²ã€‚
    å¯¹äºæ•æ„Ÿéƒ¨ç½²ï¼Œä½¿ç”¨ request_approval è·å–äººå·¥éªŒè¯ã€‚

    æ€»æ˜¯å…ˆæ€è€ƒè¦åšä»€ä¹ˆï¼Œæ¯”å¦‚ï¼š
    - æ£€æŸ¥å½“å‰éƒ¨ç½²çŠ¶æ€
    - éªŒè¯éƒ¨ç½²æ ‡ç­¾å­˜åœ¨
    - å¦‚æœéœ€è¦è¯·æ±‚æ‰¹å‡†
    - åœ¨ç”Ÿäº§ä¹‹å‰éƒ¨ç½²åˆ° staging
    - ç›‘æ§éƒ¨ç½²è¿›åº¦

    {{ _.role("</span>user<span class="hljs-string">") }}

    {{ thread }}

    ä¸‹ä¸€æ­¥åº”è¯¥æ˜¯ä»€ä¹ˆï¼Ÿ
  "</span>#
}
</code></pre>
<p><strong>æŒæ§æç¤ºçš„å…³é”®å¥½å¤„</strong>ï¼š</p>
<ol>
<li><strong>å®Œå…¨æ§åˆ¶</strong>ï¼šç¼–å†™ Agent éœ€è¦çš„ç¡®åˆ‡æŒ‡ä»¤ï¼Œæ²¡æœ‰é»‘ç›’æŠ½è±¡</li>
<li><strong>æµ‹è¯•å’Œè¯„ä¼°</strong>ï¼šä¸ºæç¤ºæ„å»ºæµ‹è¯•å’Œè¯„ä¼°ï¼Œå°±åƒå¯¹ä»»ä½•å…¶ä»–ä»£ç ä¸€æ ·</li>
<li><strong>è¿­ä»£</strong>ï¼šæ ¹æ®çœŸå®ä¸–ç•Œçš„æ€§èƒ½å¿«é€Ÿä¿®æ”¹æç¤º</li>
<li><strong>é€æ˜åº¦</strong>ï¼šç¡®åˆ‡çŸ¥é“ Agent æ­£åœ¨ä½¿ç”¨ä»€ä¹ˆæŒ‡ä»¤</li>
<li><strong>è§’è‰²é»‘å®¢</strong>ï¼šåˆ©ç”¨æ”¯æŒéæ ‡å‡†ç”¨æˆ·/åŠ©æ‰‹è§’è‰²ç”¨æ³•çš„ APIâ€”â€”ä¾‹å¦‚ï¼Œç°å·²å¼ƒç”¨çš„éèŠå¤©é£æ ¼çš„ OpenAI "completions" APIã€‚è¿™åŒ…æ‹¬ä¸€äº›æ‰€è°“çš„"æ¨¡å‹æ´—è„‘"æŠ€æœ¯</li>
</ol>
<blockquote>
<p><strong>è®°ä½</strong>ï¼šæç¤ºæ˜¯åº”ç”¨é€»è¾‘å’Œ LLM ä¹‹é—´çš„ä¸»è¦æ¥å£ã€‚æˆ‘ä¸çŸ¥é“ä»€ä¹ˆæ˜¯æœ€å¥½çš„æç¤ºï¼Œä½†æˆ‘çŸ¥é“ä½ å¸Œæœ›æœ‰çµæ´»æ€§æ¥å°è¯•ä¸€åˆ‡ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-16">è¦ç´  3ï¼šæŒæ§ä¸Šä¸‹æ–‡çª—å£</h3>
<p>ä½ ä¸ä¸€å®šéœ€è¦ä½¿ç”¨æ ‡å‡†çš„åŸºäºæ¶ˆæ¯çš„æ ¼å¼æ¥å‘ LLM ä¼ è¾¾ä¸Šä¸‹æ–‡ã€‚</p>
<blockquote>
<h4 data-id="heading-17">åœ¨ä»»ä½•ç»™å®šæ—¶åˆ»ï¼Œä½ åœ¨ Agent ä¸­å¯¹ LLM çš„è¾“å…¥æ˜¯"è¿™æ˜¯åˆ°ç›®å‰ä¸ºæ­¢å‘ç”Ÿçš„äº‹æƒ…ï¼Œä¸‹ä¸€æ­¥æ˜¯ä»€ä¹ˆ"</h4>
</blockquote>
<p><strong>ä¸€åˆ‡éƒ½æ˜¯ä¸Šä¸‹æ–‡å·¥ç¨‹ã€‚</strong> LLM æ˜¯å°†è¾“å…¥è½¬æ¢ä¸ºè¾“å‡ºçš„æ— çŠ¶æ€å‡½æ•°ã€‚è¦è·å¾—æœ€å¥½çš„è¾“å‡ºï¼Œä½ éœ€è¦ç»™å®ƒä»¬æœ€å¥½çš„è¾“å…¥ã€‚</p>
<p>åˆ›å»ºå‡ºè‰²çš„ä¸Šä¸‹æ–‡æ„å‘³ç€ï¼š</p>
<ul>
<li>ä½ ç»™æ¨¡å‹çš„æç¤ºå’ŒæŒ‡ä»¤</li>
<li>ä½ æ£€ç´¢çš„ä»»ä½•æ–‡æ¡£æˆ–å¤–éƒ¨æ•°æ®ï¼ˆä¾‹å¦‚ RAGï¼‰</li>
<li>ä»»ä½•è¿‡å»çš„çŠ¶æ€ã€å·¥å…·è°ƒç”¨ã€ç»“æœæˆ–å…¶ä»–å†å²è®°å½•</li>
<li>æ¥è‡ªç›¸å…³ä½†ç‹¬ç«‹çš„å†å²/å¯¹è¯çš„ä»»ä½•è¿‡å»æ¶ˆæ¯æˆ–äº‹ä»¶ï¼ˆè®°å¿†ï¼‰</li>
<li>å…³äºè¾“å‡ºä»€ä¹ˆç±»å‹ç»“æ„åŒ–æ•°æ®çš„æŒ‡ä»¤</li>
</ul>
<h4 data-id="heading-18">æ ‡å‡† vs è‡ªå®šä¹‰ä¸Šä¸‹æ–‡æ ¼å¼</h4>
<p>å¤§å¤šæ•° LLM å®¢æˆ·ç«¯ä½¿ç”¨è¿™æ ·çš„æ ‡å‡†åŸºäºæ¶ˆæ¯çš„æ ¼å¼ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml">[
  { <span class="hljs-attr">'role':</span> <span class="hljs-string">'system'</span>, <span class="hljs-attr">'content':</span> <span class="hljs-string">'ä½ æ˜¯ä¸€ä¸ªæœ‰å¸®åŠ©çš„åŠ©æ‰‹...'</span> },
  { <span class="hljs-attr">'role':</span> <span class="hljs-string">'user'</span>, <span class="hljs-attr">'content':</span> <span class="hljs-string">'ä½ èƒ½éƒ¨ç½²åç«¯å—ï¼Ÿ'</span> },
  { <span class="hljs-attr">'role':</span> <span class="hljs-string">'assistant'</span>, <span class="hljs-attr">'content':</span> <span class="hljs-literal">null</span>, <span class="hljs-attr">'tool_calls':</span> [{ <span class="hljs-attr">'id':</span> <span class="hljs-string">'1'</span>, <span class="hljs-attr">'name':</span> <span class="hljs-string">'list_git_tags'</span>, <span class="hljs-attr">'arguments':</span> <span class="hljs-string">'{}'</span> }] },
  { <span class="hljs-attr">'role':</span> <span class="hljs-string">'tool'</span>, <span class="hljs-attr">'name':</span> <span class="hljs-string">'list_git_tags'</span>, <span class="hljs-attr">'content':</span> <span class="hljs-string">'{"tags": [{"name": "v1.2.3", "commit": "abc123"}]}'</span>, <span class="hljs-attr">'tool_call_id':</span> <span class="hljs-string">'1'</span> }
]
</code></pre>
<p>è™½ç„¶è¿™å¯¹å¤§å¤šæ•°ç”¨ä¾‹å¾ˆæœ‰æ•ˆï¼Œä½†å¦‚æœä½ æƒ³çœŸæ­£ä»ä»Šå¤©çš„ LLM ä¸­è·å¾—<strong>æœ€å¤§æ”¶ç›Š</strong>ï¼Œä½ éœ€è¦ä»¥æœ€ token é«˜æ•ˆå’Œæ³¨æ„åŠ›é«˜æ•ˆçš„æ–¹å¼å°†ä¸Šä¸‹æ–‡æ”¾å…¥ LLMã€‚</p>
<p>ä½œä¸ºæ ‡å‡†åŸºäºæ¶ˆæ¯æ ¼å¼çš„æ›¿ä»£æ–¹æ¡ˆï¼Œä½ å¯ä»¥æ„å»ºè‡ªå·±é’ˆå¯¹ç”¨ä¾‹ä¼˜åŒ–çš„ä¸Šä¸‹æ–‡æ ¼å¼ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰å¯¹è±¡å¹¶æ ¹æ®éœ€è¦å°†å®ƒä»¬æ‰“åŒ…/å±•å¼€åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªç”¨æˆ·ã€ç³»ç»Ÿã€åŠ©æ‰‹æˆ–å·¥å…·æ¶ˆæ¯ä¸­ã€‚</p>
<p>è¿™æ˜¯å°†æ•´ä¸ªä¸Šä¸‹æ–‡çª—å£æ”¾å…¥å•ä¸ªç”¨æˆ·æ¶ˆæ¯çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">slack_message</span>&gt;</span>
    From: @alex
    Channel: #deployments
    Text: ä½ èƒ½éƒ¨ç½²åç«¯å—ï¼Ÿ
<span class="hljs-tag">&lt;/<span class="hljs-name">slack_message</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">list_git_tags</span>&gt;</span>
    intent: "list_git_tags"
<span class="hljs-tag">&lt;/<span class="hljs-name">list_git_tags</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">list_git_tags_result</span>&gt;</span>
    tags:
      - name: "v1.2.3"
        commit: "abc123"
        date: "2024-03-15T10:00:00Z"
      - name: "v1.2.2"
        commit: "def456"
        date: "2024-03-14T15:30:00Z"
<span class="hljs-tag">&lt;/<span class="hljs-name">list_git_tags_result</span>&gt;</span>
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥ç”¨è¿™æ ·çš„ä»£ç æ„å»ºï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Thread</span>:
    events: <span class="hljs-type">List</span>[Event]

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Event</span>:
    <span class="hljs-built_in">type</span>: <span class="hljs-type">Literal</span>[<span class="hljs-string">"list_git_tags"</span>, <span class="hljs-string">"deploy_backend"</span>, <span class="hljs-string">"deploy_frontend"</span>,
                  <span class="hljs-string">"request_more_information"</span>, <span class="hljs-string">"done_for_now"</span>, <span class="hljs-string">"error"</span>, ...]
    data: <span class="hljs-type">Any</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">event_to_prompt</span>(<span class="hljs-params">event: Event</span>) -&gt; <span class="hljs-built_in">str</span>:
    data = event.data <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(event.data, <span class="hljs-built_in">str</span>) \
           <span class="hljs-keyword">else</span> stringify_to_yaml(event.data)
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"&lt;<span class="hljs-subst">{event.<span class="hljs-built_in">type</span>}</span>&gt;\n<span class="hljs-subst">{data}</span>\n&lt;/<span class="hljs-subst">{event.<span class="hljs-built_in">type</span>}</span>&gt;"</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">thread_to_prompt</span>(<span class="hljs-params">thread: Thread</span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-keyword">return</span> <span class="hljs-string">'\n\n'</span>.join(event_to_prompt(event) <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> thread.events)
</code></pre>
<p><strong>æŒæ§ä¸Šä¸‹æ–‡çª—å£çš„å…³é”®å¥½å¤„</strong>ï¼š</p>
<ol>
<li><strong>ä¿¡æ¯å¯†åº¦</strong>ï¼šä»¥æœ€å¤§åŒ– LLM ç†è§£çš„æ–¹å¼ç»„ç»‡ä¿¡æ¯</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šä»¥å¸®åŠ© LLM æ¢å¤çš„æ ¼å¼åŒ…å«é”™è¯¯ä¿¡æ¯ã€‚è€ƒè™‘åœ¨é”™è¯¯è§£å†³åä»ä¸Šä¸‹æ–‡çª—å£éšè—é”™è¯¯å’Œå¤±è´¥çš„è°ƒç”¨</li>
<li><strong>å®‰å…¨æ€§</strong>ï¼šæ§åˆ¶ä»€ä¹ˆä¿¡æ¯ä¼ é€’ç»™ LLMï¼Œè¿‡æ»¤æ‰æ•æ„Ÿæ•°æ®</li>
<li><strong>çµæ´»æ€§</strong>ï¼šéšç€ä½ äº†è§£ä»€ä¹ˆå¯¹ç”¨ä¾‹æœ€æœ‰æ•ˆè€Œè°ƒæ•´æ ¼å¼</li>
<li><strong>Token æ•ˆç‡</strong>ï¼šä¸º token æ•ˆç‡å’Œ LLM ç†è§£ä¼˜åŒ–ä¸Šä¸‹æ–‡æ ¼å¼</li>
</ol>
<blockquote>
<p><strong>åå¤å‡ºç°çš„ä¸»é¢˜</strong>ï¼šæˆ‘ä¸çŸ¥é“ä»€ä¹ˆæ˜¯æœ€å¥½çš„æ–¹æ³•ï¼Œä½†æˆ‘çŸ¥é“ä½ å¸Œæœ›æœ‰çµæ´»æ€§æ¥å°è¯•ä¸€åˆ‡ã€‚</p>
</blockquote>
<h4 data-id="heading-19">å…³äºä¸Šä¸‹æ–‡å·¥ç¨‹</h4>
<p>åœ¨ 12 å› ç´  Agent å‘å¸ƒå¤§çº¦ 2 ä¸ªæœˆåï¼Œ"ä¸Šä¸‹æ–‡å·¥ç¨‹"å¼€å§‹æˆä¸ºä¸€ä¸ªç›¸å½“æµè¡Œçš„æœ¯è¯­ã€‚Andrej Karpathy å’Œ Shopify CEO Tobi LÃ¼tke éƒ½åœ¨æ¨å¹¿è¿™ä¸ªæ¦‚å¿µï¼š</p>
<blockquote>
<p>"æˆ‘å¯èƒ½ä¼šå°†ï¼ˆæç¤ºå·¥ç¨‹ï¼‰ç§°ä¸ºä¸Šä¸‹æ–‡å·¥ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚æç¤ºå·¥ç¨‹å½“ç„¶åªæ˜¯æç¤ºï¼Œä½†ä¸Šä¸‹æ–‡å·¥ç¨‹æ˜¯æ›´å¹¿æ³›çš„è¿‡ç¨‹ã€‚"</p>
</blockquote>
<hr/>
<h3 data-id="heading-20">è¦ç´  4ï¼šå·¥å…·åªæ˜¯ç»“æ„åŒ–è¾“å‡º</h3>
<p>å·¥å…·ä¸éœ€è¦å¤æ‚ã€‚åœ¨å…¶æ ¸å¿ƒï¼Œå®ƒä»¬åªæ˜¯æ¥è‡ª LLM çš„ç»“æ„åŒ–è¾“å‡ºï¼Œè§¦å‘ç¡®å®šæ€§ä»£ç ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå‡è®¾ä½ æœ‰ä¸¤ä¸ªå·¥å…· <code>CreateIssue</code> å’Œ <code>SearchIssues</code>ã€‚è¦æ±‚ LLM "ä½¿ç”¨å‡ ä¸ªå·¥å…·ä¹‹ä¸€"åªæ˜¯è¦æ±‚å®ƒè¾“å‡ºæˆ‘ä»¬å¯ä»¥è§£æä¸ºè¡¨ç¤ºè¿™äº›å·¥å…·çš„å¯¹è±¡çš„ JSONã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Issue</span>:
    title: <span class="hljs-built_in">str</span>
    description: <span class="hljs-built_in">str</span>
    team_id: <span class="hljs-built_in">str</span>
    assignee_id: <span class="hljs-built_in">str</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CreateIssue</span>:
    intent: <span class="hljs-type">Literal</span>[<span class="hljs-string">"create_issue"</span>]
    issue: Issue

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SearchIssues</span>:
    intent: <span class="hljs-type">Literal</span>[<span class="hljs-string">"search_issues"</span>]
    query: <span class="hljs-built_in">str</span>
    what_youre_looking_for: <span class="hljs-built_in">str</span>
</code></pre>
<p><strong>æ¨¡å¼å¾ˆç®€å•</strong>ï¼š</p>
<ol>
<li>LLM è¾“å‡ºç»“æ„åŒ– JSON</li>
<li>ç¡®å®šæ€§ä»£ç æ‰§è¡Œé€‚å½“çš„æ“ä½œï¼ˆå¦‚è°ƒç”¨å¤–éƒ¨ APIï¼‰</li>
<li>ç»“æœè¢«æ•è·å¹¶åé¦ˆåˆ°ä¸Šä¸‹æ–‡ä¸­</li>
</ol>
<p>è¿™åœ¨ LLM çš„å†³ç­–å’Œåº”ç”¨æ“ä½œä¹‹é—´åˆ›å»ºäº†æ¸…æ™°çš„åˆ†ç¦»ã€‚<strong>LLM å†³å®šåšä»€ä¹ˆï¼Œä½†ä»£ç æ§åˆ¶å¦‚ä½•å®Œæˆ</strong>ã€‚ä»…ä»…å› ä¸º LLM "è°ƒç”¨äº†å·¥å…·"å¹¶ä¸æ„å‘³ç€ä½ æ¯æ¬¡éƒ½å¿…é¡»ä»¥ç›¸åŒçš„æ–¹å¼æ‰§è¡Œç‰¹å®šçš„ç›¸åº”å‡½æ•°ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">if</span> next_step.intent == <span class="hljs-string">'create_payment_link'</span>:
    stripe.paymentlinks.create(next_step.parameters)
    <span class="hljs-keyword">return</span>  <span class="hljs-comment"># æˆ–è€…ä½ æƒ³è¦çš„ä»»ä½•ä¸œè¥¿</span>
<span class="hljs-keyword">elif</span> next_step.intent == <span class="hljs-string">'wait_for_a_while'</span>:
    <span class="hljs-comment"># åšä¸€äº›å•å­æ“ä½œ</span>
    <span class="hljs-keyword">pass</span>
<span class="hljs-keyword">else</span>:  <span class="hljs-comment"># æ¨¡å‹æ²¡æœ‰è°ƒç”¨æˆ‘ä»¬çŸ¥é“çš„å·¥å…·</span>
    <span class="hljs-comment"># åšå…¶ä»–äº‹æƒ…</span>
    <span class="hljs-keyword">pass</span>
</code></pre>
<blockquote>
<p><strong>"ä¸‹ä¸€æ­¥"å¯èƒ½ä¸åƒ"è¿è¡Œçº¯å‡½æ•°å¹¶è¿”å›ç»“æœ"é‚£æ ·åŸå­åŒ–ã€‚å½“ä½ æŠŠ"å·¥å…·è°ƒç”¨"æƒ³è±¡æˆæ¨¡å‹è¾“å‡ºæè¿°ç¡®å®šæ€§ä»£ç åº”è¯¥åšä»€ä¹ˆçš„ JSON æ—¶ï¼Œä½ å°±è§£é”äº†å¾ˆå¤šçµæ´»æ€§ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-21">è¦ç´  5ï¼šç»Ÿä¸€æ‰§è¡ŒçŠ¶æ€ä¸ä¸šåŠ¡çŠ¶æ€</h3>
<p>å³ä½¿åœ¨ AI ä¸–ç•Œä¹‹å¤–ï¼Œè®¸å¤šåŸºç¡€è®¾æ–½ç³»ç»Ÿä¹Ÿè¯•å›¾å°†"æ‰§è¡ŒçŠ¶æ€"ä¸"ä¸šåŠ¡çŠ¶æ€"åˆ†å¼€ã€‚å¯¹äº AI åº”ç”¨ï¼Œè¿™å¯èƒ½æ¶‰åŠå¤æ‚çš„æŠ½è±¡æ¥è·Ÿè¸ªå½“å‰æ­¥éª¤ã€ä¸‹ä¸€æ­¥ã€ç­‰å¾…çŠ¶æ€ã€é‡è¯•è®¡æ•°ç­‰ã€‚è¿™ç§åˆ†ç¦»åˆ›å»ºäº†å¯èƒ½å€¼å¾—ä½†å¯¹ç”¨ä¾‹å¯èƒ½è¿‡äºå¤æ‚çš„å¤æ‚æ€§ã€‚</p>
<p>æ›´æ¸…æ¥šåœ°è¯´ï¼š</p>
<ul>
<li><strong>æ‰§è¡ŒçŠ¶æ€</strong>ï¼šå½“å‰æ­¥éª¤ã€ä¸‹ä¸€æ­¥ã€ç­‰å¾…çŠ¶æ€ã€é‡è¯•è®¡æ•°ç­‰</li>
<li><strong>ä¸šåŠ¡çŠ¶æ€</strong>ï¼šAgent å·¥ä½œæµä¸­åˆ°ç›®å‰ä¸ºæ­¢å‘ç”Ÿçš„äº‹æƒ…ï¼ˆä¾‹å¦‚ OpenAI æ¶ˆæ¯åˆ—è¡¨ã€å·¥å…·è°ƒç”¨å’Œç»“æœåˆ—è¡¨ç­‰ï¼‰</li>
</ul>
<p><strong>å¦‚æœå¯èƒ½ï¼Œç®€åŒ–â€”â€”å°½å¯èƒ½ç»Ÿä¸€è¿™äº›ã€‚</strong></p>
<p>å®é™…ä¸Šï¼Œä½ å¯ä»¥è®¾è®¡åº”ç”¨ï¼Œä½¿ä½ å¯ä»¥ä»ä¸Šä¸‹æ–‡çª—å£æ¨æ–­æ‰€æœ‰æ‰§è¡ŒçŠ¶æ€ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œæ‰§è¡ŒçŠ¶æ€ï¼ˆå½“å‰æ­¥éª¤ã€ç­‰å¾…çŠ¶æ€ç­‰ï¼‰åªæ˜¯å…³äºåˆ°ç›®å‰ä¸ºæ­¢å‘ç”Ÿäº†ä»€ä¹ˆçš„å…ƒæ•°æ®ã€‚</p>
<p>ä½ å¯èƒ½æœ‰ä¸€äº›ä¸èƒ½æ”¾å…¥ä¸Šä¸‹æ–‡çª—å£çš„ä¸œè¥¿ï¼Œå¦‚ä¼šè¯ IDã€å¯†ç ä¸Šä¸‹æ–‡ç­‰ï¼Œä½†ç›®æ ‡åº”è¯¥æ˜¯æœ€å°åŒ–è¿™äº›ä¸œè¥¿ã€‚</p>
<p><strong>è¿™ç§æ–¹æ³•æœ‰å‡ ä¸ªå¥½å¤„</strong>ï¼š</p>
<ol>
<li><strong>ç®€å•æ€§</strong>ï¼šæ‰€æœ‰çŠ¶æ€çš„å•ä¸€äº‹å®æ¥æº</li>
<li><strong>åºåˆ—åŒ–</strong>ï¼šçº¿ç¨‹æ˜¯ç®€å•å¯åºåˆ—åŒ–/ååºåˆ—åŒ–çš„</li>
<li><strong>è°ƒè¯•</strong>ï¼šæ•´ä¸ªå†å²è®°å½•åœ¨ä¸€ä¸ªåœ°æ–¹å¯è§</li>
<li><strong>çµæ´»æ€§</strong>ï¼šé€šè¿‡æ·»åŠ æ–°äº‹ä»¶ç±»å‹è½»æ¾æ·»åŠ æ–°çŠ¶æ€</li>
<li><strong>æ¢å¤</strong>ï¼šå¯ä»¥é€šè¿‡åŠ è½½çº¿ç¨‹ä»ä»»ä½•ç‚¹æ¢å¤</li>
<li><strong>åˆ†å‰</strong>ï¼šå¯ä»¥é€šè¿‡å°†çº¿ç¨‹çš„æŸä¸ªå­é›†å¤åˆ¶åˆ°æ–°ä¸Šä¸‹æ–‡/çŠ¶æ€ ID æ¥åœ¨ä»»ä½•ç‚¹åˆ†å‰çº¿ç¨‹</li>
<li><strong>äººç±»ç•Œé¢å’Œå¯è§‚æµ‹æ€§</strong>ï¼šå°†çº¿ç¨‹è½¬æ¢ä¸ºäººç±»å¯è¯»çš„ markdown æˆ–ä¸°å¯Œçš„ Web åº”ç”¨ UI æ˜¯ç®€å•çš„</li>
</ol>
<hr/>
<h3 data-id="heading-22">è¦ç´  6ï¼šå¯åŠ¨/æš‚åœ/æ¢å¤çš„ç®€å• API</h3>
<p>Agent åªæ˜¯ç¨‹åºï¼Œæˆ‘ä»¬å¯¹å¦‚ä½•å¯åŠ¨ã€æŸ¥è¯¢ã€æ¢å¤å’Œåœæ­¢å®ƒä»¬æœ‰ä¸€å®šçš„æœŸæœ›ã€‚</p>
<ul>
<li>ç”¨æˆ·ã€åº”ç”¨ã€ç®¡é“å’Œå…¶ä»– Agent åº”è¯¥èƒ½å¤Ÿé€šè¿‡ç®€å•çš„ API å¯åŠ¨ Agent</li>
<li>Agent åŠå…¶ç¼–æ’çš„ç¡®å®šæ€§ä»£ç åº”è¯¥èƒ½å¤Ÿåœ¨éœ€è¦é•¿æ—¶é—´è¿è¡Œæ“ä½œæ—¶æš‚åœ Agent</li>
<li>åƒ webhook è¿™æ ·çš„å¤–éƒ¨è§¦å‘å™¨åº”è¯¥ä½¿ Agent èƒ½å¤Ÿä»å®ƒä»¬åœæ­¢çš„åœ°æ–¹æ¢å¤ï¼Œè€Œä¸éœ€è¦ä¸ Agent ç¼–æ’å™¨æ·±åº¦é›†æˆ</li>
</ul>
<p>ä¸è¦ç´  5ï¼ˆç»Ÿä¸€æ‰§è¡ŒçŠ¶æ€å’Œä¸šåŠ¡çŠ¶æ€ï¼‰å’Œè¦ç´  8ï¼ˆæŒæ§æ§åˆ¶æµï¼‰å¯†åˆ‡ç›¸å…³ï¼Œä½†å¯ä»¥ç‹¬ç«‹å®ç°ã€‚</p>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šAI ç¼–æ’å™¨é€šå¸¸å…è®¸æš‚åœå’Œæ¢å¤ï¼Œä½†ä¸æ˜¯åœ¨å·¥å…·é€‰æ‹©å’Œå·¥å…·æ‰§è¡Œä¹‹é—´çš„æ—¶åˆ»ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-23">è¦ç´  7ï¼šç”¨å·¥å…·è°ƒç”¨è”ç³»äººç±»</h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒLLM API ä¾èµ–äºä¸€ä¸ªåŸºæœ¬çš„<strong>é«˜é£é™©</strong> token é€‰æ‹©ï¼šæˆ‘ä»¬æ˜¯è¿”å›çº¯æ–‡æœ¬å†…å®¹ï¼Œè¿˜æ˜¯è¿”å›ç»“æ„åŒ–æ•°æ®ï¼Ÿ</p>
<p>ä½ åœ¨ç¬¬ä¸€ä¸ª token çš„é€‰æ‹©ä¸Šæ”¾äº†å¾ˆå¤šæƒé‡ï¼Œåœ¨ <code>the weather in tokyo</code> çš„æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯ï¼š</p>
<blockquote>
<p>"the"</p>
</blockquote>
<p>ä½†åœ¨ <code>fetch_weather</code> çš„æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯æŸä¸ªè¡¨ç¤º JSON å¯¹è±¡å¼€å§‹çš„ç‰¹æ®Š tokenï¼š</p>
<blockquote>
<p>|JSON&gt;</p>
</blockquote>
<p>ä½ å¯èƒ½ä¼šé€šè¿‡è®© LLM <strong>å§‹ç»ˆ</strong>è¾“å‡º JSON æ¥è·å¾—æ›´å¥½çš„ç»“æœï¼Œç„¶åç”¨ä¸€äº›è‡ªç„¶è¯­è¨€ token å¦‚ <code>request_human_input</code> æˆ– <code>done_for_now</code> å£°æ˜å…¶æ„å›¾ï¼ˆè€Œä¸æ˜¯åƒ <code>check_weather_in_city</code> è¿™æ ·çš„"æ­£å¼"å·¥å…·ï¼‰ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Options</span>:
    urgency: <span class="hljs-type">Literal</span>[<span class="hljs-string">"low"</span>, <span class="hljs-string">"medium"</span>, <span class="hljs-string">"high"</span>]
    <span class="hljs-built_in">format</span>: <span class="hljs-type">Literal</span>[<span class="hljs-string">"free_text"</span>, <span class="hljs-string">"yes_no"</span>, <span class="hljs-string">"multiple_choice"</span>]
    choices: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]

<span class="hljs-comment"># äººç±»äº¤äº’çš„å·¥å…·å®šä¹‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">RequestHumanInput</span>:
    intent: <span class="hljs-type">Literal</span>[<span class="hljs-string">"request_human_input"</span>]
    question: <span class="hljs-built_in">str</span>
    context: <span class="hljs-built_in">str</span>
    options: Options

<span class="hljs-comment"># Agent å¾ªç¯ä¸­çš„ç¤ºä¾‹ç”¨æ³•</span>
<span class="hljs-keyword">if</span> next_step.intent == <span class="hljs-string">'request_human_input'</span>:
    thread.events.append({
        <span class="hljs-string">'type'</span>: <span class="hljs-string">'human_input_requested'</span>,
        <span class="hljs-string">'data'</span>: next_step
    })
    thread_id = <span class="hljs-keyword">await</span> save_state(thread)
    <span class="hljs-keyword">await</span> notify_human(next_step, thread_id)
    <span class="hljs-keyword">return</span>  <span class="hljs-comment"># ä¸­æ–­å¾ªç¯å¹¶ç­‰å¾…å“åº”å¸¦ç€çº¿ç¨‹ ID è¿”å›</span>
<span class="hljs-keyword">else</span>:
    <span class="hljs-comment"># ... å…¶ä»–æƒ…å†µ</span>
</code></pre>
<p>ç¨åï¼Œä½ å¯èƒ½ä¼šä»å¤„ç† Slackã€ç”µå­é‚®ä»¶ã€çŸ­ä¿¡æˆ–å…¶ä»–äº‹ä»¶çš„ç³»ç»Ÿæ”¶åˆ° webhookï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@app.post(<span class="hljs-params"><span class="hljs-string">'/webhook'</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">webhook</span>(<span class="hljs-params">req: Request</span>):
    thread_id = req.body.thread_id
    thread = <span class="hljs-keyword">await</span> load_state(thread_id)
    thread.events.append({
        <span class="hljs-string">'type'</span>: <span class="hljs-string">'response_from_human'</span>,
        <span class="hljs-string">'data'</span>: req.body
    })
    <span class="hljs-comment"># ... ç®€åŒ–ä¸ºç®€æ´èµ·è§ï¼Œä½ å¯èƒ½ä¸æƒ³åœ¨è¿™é‡Œé˜»å¡ web worker</span>
    next_step = <span class="hljs-keyword">await</span> determine_next_step(thread_to_prompt(thread))
    thread.events.append(next_step)
    result = <span class="hljs-keyword">await</span> handle_next_step(thread, next_step)
    <span class="hljs-comment"># å¾ªç¯æˆ–ä¸­æ–­æˆ–ä½ æƒ³è¦çš„ä»»ä½•ä¸œè¥¿</span>

    <span class="hljs-keyword">return</span> {<span class="hljs-string">"status"</span>: <span class="hljs-string">"ok"</span>}
</code></pre>
<p><strong>å¥½å¤„</strong>ï¼š</p>
<ol>
<li><strong>æ¸…æ™°çš„æŒ‡ä»¤</strong>ï¼šç”¨äºä¸åŒç±»å‹äººç±»è”ç³»çš„å·¥å…·å…è®¸ LLM æ›´å…·ä½“</li>
<li><strong>å†…å¾ªç¯ vs å¤–å¾ªç¯</strong>ï¼šå¯ç”¨<strong>åœ¨</strong>ä¼ ç»Ÿ chatGPT é£æ ¼ç•Œé¢<strong>ä¹‹å¤–</strong>çš„ Agent å·¥ä½œæµï¼Œå…¶ä¸­æ§åˆ¶æµå’Œä¸Šä¸‹æ–‡åˆå§‹åŒ–å¯èƒ½æ˜¯ <code>Agent-&gt;Human</code> è€Œä¸æ˜¯ <code>Human-&gt;Agent</code>ï¼ˆæƒ³æƒ³ç”± cron æˆ–äº‹ä»¶å¯åŠ¨çš„ Agentï¼‰</li>
<li><strong>å¤šäººè®¿é—®</strong>ï¼šå¯ä»¥é€šè¿‡ç»“æ„åŒ–äº‹ä»¶è½»æ¾è·Ÿè¸ªå’Œåè°ƒæ¥è‡ªä¸åŒäººç±»çš„è¾“å…¥</li>
<li><strong>å¤š Agent</strong>ï¼šç®€å•çš„æŠ½è±¡å¯ä»¥è½»æ¾æ‰©å±•ä»¥æ”¯æŒ <code>Agent-&gt;Agent</code> è¯·æ±‚å’Œå“åº”</li>
<li><strong>æŒä¹…æ€§</strong>ï¼šä¸è¦ç´  6ï¼ˆå¯åŠ¨/æš‚åœ/æ¢å¤ï¼‰ç»“åˆï¼Œè¿™ä½¿å¾—æŒä¹…ã€å¯é å’Œå¯å†…çœçš„å¤šäººå·¥ä½œæµæˆä¸ºå¯èƒ½</li>
</ol>
<hr/>
<h3 data-id="heading-24">è¦ç´  8ï¼šæŒæ§æ§åˆ¶æµ</h3>
<p>å¦‚æœä½ æ‹¥æœ‰æ§åˆ¶æµï¼Œä½ å¯ä»¥åšå¾ˆå¤šæœ‰è¶£çš„äº‹æƒ…ã€‚</p>
<p>ä¸ºç‰¹å®šç”¨ä¾‹æ„å»ºæœ‰æ„ä¹‰çš„æ§åˆ¶ç»“æ„ã€‚å…·ä½“æ¥è¯´ï¼ŒæŸäº›ç±»å‹çš„å·¥å…·è°ƒç”¨å¯èƒ½æ˜¯ä¸­æ–­å¾ªç¯å¹¶ç­‰å¾…äººç±»æˆ–å¦ä¸€ä¸ªé•¿æ—¶é—´è¿è¡Œä»»åŠ¡ï¼ˆå¦‚è®­ç»ƒç®¡é“ï¼‰å“åº”çš„ç†ç”±ã€‚ä½ å¯èƒ½è¿˜æƒ³æ•´åˆä»¥ä¸‹è‡ªå®šä¹‰å®ç°ï¼š</p>
<ul>
<li>å·¥å…·è°ƒç”¨ç»“æœçš„æ‘˜è¦æˆ–ç¼“å­˜</li>
<li>å¯¹ç»“æ„åŒ–è¾“å‡ºçš„ LLM ä½œä¸ºè¯„åˆ¤è€…</li>
<li>ä¸Šä¸‹æ–‡çª—å£å‹ç¼©æˆ–å…¶ä»–è®°å¿†ç®¡ç†</li>
<li>æ—¥å¿—è®°å½•ã€è·Ÿè¸ªå’ŒæŒ‡æ ‡</li>
<li>å®¢æˆ·ç«¯é€Ÿç‡é™åˆ¶</li>
<li>æŒä¹…ç¡çœ /æš‚åœ/"ç­‰å¾…äº‹ä»¶"</li>
</ul>
<p>ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†ä¸‰ç§å¯èƒ½çš„æ§åˆ¶æµæ¨¡å¼ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_next_step</span>(<span class="hljs-params">thread: Thread</span>):
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        next_step = <span class="hljs-keyword">await</span> determine_next_step(thread_to_prompt(thread))

        <span class="hljs-keyword">if</span> next_step.intent == <span class="hljs-string">'request_clarification'</span>:
            <span class="hljs-comment"># æ¨¡å‹è¯·æ±‚æ›´å¤šä¿¡æ¯ï¼Œä¸­æ–­å¾ªç¯ç­‰å¾…äººç±»å“åº”</span>
            thread.events.append({
                <span class="hljs-string">'type'</span>: <span class="hljs-string">'request_clarification'</span>,
                <span class="hljs-string">'data'</span>: next_step,
            })
            <span class="hljs-keyword">await</span> send_message_to_human(next_step)
            <span class="hljs-keyword">await</span> db.save_thread(thread)
            <span class="hljs-keyword">break</span>  <span class="hljs-comment"># å¼‚æ­¥æ­¥éª¤ - ä¸­æ–­å¾ªç¯ï¼Œç¨åæˆ‘ä»¬ä¼šæ”¶åˆ° webhook</span>

        <span class="hljs-keyword">elif</span> next_step.intent == <span class="hljs-string">'fetch_open_issues'</span>:
            <span class="hljs-comment"># åŒæ­¥æ­¥éª¤ - è·å–æ•°æ®å¹¶ä¼ å› LLM</span>
            thread.events.append({
                <span class="hljs-string">'type'</span>: <span class="hljs-string">'fetch_open_issues'</span>,
                <span class="hljs-string">'data'</span>: next_step,
            })
            issues = <span class="hljs-keyword">await</span> linear_client.issues()
            thread.events.append({
                <span class="hljs-string">'type'</span>: <span class="hljs-string">'fetch_open_issues_result'</span>,
                <span class="hljs-string">'data'</span>: issues,
            })
            <span class="hljs-keyword">continue</span>  <span class="hljs-comment"># å°†æ–°ä¸Šä¸‹æ–‡ä¼ é€’ç»™ LLM ä»¥ç¡®å®šä¸‹ä¸‹ä¸€æ­¥</span>

        <span class="hljs-keyword">elif</span> next_step.intent == <span class="hljs-string">'create_issue'</span>:
            <span class="hljs-comment"># é«˜é£é™©æ“ä½œ - ä¸­æ–­å¾ªç¯ç­‰å¾…äººç±»æ‰¹å‡†</span>
            thread.events.append({
                <span class="hljs-string">'type'</span>: <span class="hljs-string">'create_issue'</span>,
                <span class="hljs-string">'data'</span>: next_step,
            })
            <span class="hljs-keyword">await</span> request_human_approval(next_step)
            <span class="hljs-keyword">await</span> db.save_thread(thread)
            <span class="hljs-keyword">break</span>  <span class="hljs-comment"># å¼‚æ­¥æ­¥éª¤ - ä¸­æ–­å¾ªç¯ï¼Œç¨åæˆ‘ä»¬ä¼šæ”¶åˆ° webhook</span>
</code></pre>
<p>è¿™ç§æ¨¡å¼å…è®¸ä½ æ ¹æ®éœ€è¦ä¸­æ–­å’Œæ¢å¤ Agent çš„æµç¨‹ï¼Œåˆ›å»ºæ›´è‡ªç„¶çš„å¯¹è¯å’Œå·¥ä½œæµã€‚</p>
<p><strong>ç¤ºä¾‹</strong>ï¼šæˆ‘å¯¹æ¯ä¸ª AI æ¡†æ¶çš„ç¬¬ä¸€ä¸ªåŠŸèƒ½è¯·æ±‚æ˜¯æˆ‘ä»¬éœ€è¦èƒ½å¤Ÿä¸­æ–­æ­£åœ¨å·¥ä½œçš„ Agent å¹¶ç¨åæ¢å¤ï¼Œ<strong>ç‰¹åˆ«æ˜¯</strong>åœ¨å·¥å…·<strong>é€‰æ‹©</strong>å’Œå·¥å…·<strong>è°ƒç”¨</strong>ä¹‹é—´çš„æ—¶åˆ»ã€‚</p>
<p>æ²¡æœ‰è¿™ç§å¯æ¢å¤æ€§/ç²’åº¦çº§åˆ«ï¼Œå°±æ²¡æœ‰åŠæ³•åœ¨å·¥å…·è°ƒç”¨è¿è¡Œä¹‹å‰å®¡æŸ¥/æ‰¹å‡†å®ƒï¼Œè¿™æ„å‘³ç€ä½ è¢«è¿«è¦ä¹ˆï¼š</p>
<ol>
<li>åœ¨ç­‰å¾…é•¿æ—¶é—´è¿è¡Œçš„äº‹æƒ…å®Œæˆæ—¶å°†ä»»åŠ¡ä¿æŒåœ¨å†…å­˜ä¸­ï¼ˆæƒ³æƒ³ <code>while...sleep</code>ï¼‰ï¼Œå¦‚æœè¿›ç¨‹è¢«ä¸­æ–­å°±ä»å¤´å¼€å§‹é‡æ–°å¯åŠ¨</li>
<li>å°† Agent é™åˆ¶ä¸ºåªèƒ½è¿›è¡Œä½é£é™©ã€ä½é£é™©çš„è°ƒç”¨ï¼Œå¦‚ç ”ç©¶å’Œæ‘˜è¦</li>
<li>ç»™ Agent è®¿é—®åšæ›´å¤§ã€æ›´æœ‰ç”¨äº‹æƒ…çš„æƒé™ï¼Œç„¶åå°± yolo å¸Œæœ›å®ƒä¸ä¼šæç ¸</li>
</ol>
<hr/>
<h3 data-id="heading-25">è¦ç´  9ï¼šå°†é”™è¯¯å‹ç¼©è¿›ä¸Šä¸‹æ–‡çª—å£</h3>
<p>è¿™ä¸€ç‚¹æ¯”è¾ƒç®€çŸ­ä½†å€¼å¾—ä¸€æã€‚Agent çš„å¥½å¤„ä¹‹ä¸€æ˜¯"è‡ªæˆ‘ä¿®å¤"â€”â€”å¯¹äºçŸ­ä»»åŠ¡ï¼ŒLLM å¯èƒ½ä¼šè°ƒç”¨ä¸€ä¸ªå¤±è´¥çš„å·¥å…·ã€‚å¥½çš„ LLM æœ‰ç›¸å½“å¥½çš„æœºä¼šé˜…è¯»é”™è¯¯æ¶ˆæ¯æˆ–å †æ ˆè·Ÿè¸ªå¹¶æ‰¾å‡ºåœ¨åç»­å·¥å…·è°ƒç”¨ä¸­è¦æ›´æ”¹çš„å†…å®¹ã€‚</p>
<p>å¤§å¤šæ•°æ¡†æ¶å®ç°äº†è¿™ä¸€ç‚¹ï¼Œä½†ä½ å¯ä»¥<strong>åªåšè¿™ä¸€ç‚¹</strong>è€Œä¸åšå…¶ä»– 11 ä¸ªå› ç´ ã€‚è¿™æ˜¯ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-python" lang="python">thread = {<span class="hljs-string">"events"</span>: [initial_message]}

<span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
    next_step = <span class="hljs-keyword">await</span> determine_next_step(thread_to_prompt(thread))
    thread[<span class="hljs-string">"events"</span>].append({
        <span class="hljs-string">"type"</span>: next_step.intent,
        <span class="hljs-string">"data"</span>: next_step,
    })
    <span class="hljs-keyword">try</span>:
        result = <span class="hljs-keyword">await</span> handle_next_step(thread, next_step)  <span class="hljs-comment"># æˆ‘ä»¬çš„ switch è¯­å¥</span>
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-comment"># å¦‚æœæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒæ·»åŠ åˆ°ä¸Šä¸‹æ–‡çª—å£å¹¶é‡è¯•</span>
        thread[<span class="hljs-string">"events"</span>].append({
            <span class="hljs-string">"type"</span>: <span class="hljs-string">'error'</span>,
            <span class="hljs-string">"data"</span>: format_error(e),
        })
        <span class="hljs-comment"># å¾ªç¯ï¼Œæˆ–åœ¨è¿™é‡Œåšä»»ä½•å…¶ä»–äº‹æƒ…æ¥å°è¯•æ¢å¤</span>
</code></pre>
<p>ä½ å¯èƒ½æƒ³ä¸ºç‰¹å®šå·¥å…·è°ƒç”¨å®ç°é”™è¯¯è®¡æ•°å™¨ï¼Œé™åˆ¶å•ä¸ªå·¥å…·çš„çº¦ 3 æ¬¡å°è¯•ï¼Œæˆ–ä»»ä½•å…¶ä»–å¯¹ç”¨ä¾‹æœ‰æ„ä¹‰çš„é€»è¾‘ï¼š</p>
<pre><code class="hljs language-python" lang="python">consecutive_errors = <span class="hljs-number">0</span>

<span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
    <span class="hljs-comment"># ... ç°æœ‰ä»£ç  ...</span>

    <span class="hljs-keyword">try</span>:
        result = <span class="hljs-keyword">await</span> handle_next_step(thread, next_step)
        thread[<span class="hljs-string">"events"</span>].append({
            <span class="hljs-string">"type"</span>: next_step.intent + <span class="hljs-string">'_result'</span>,
            <span class="hljs-string">"data"</span>: result,
        })
        <span class="hljs-comment"># æˆåŠŸï¼é‡ç½®é”™è¯¯è®¡æ•°å™¨</span>
        consecutive_errors = <span class="hljs-number">0</span>
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        consecutive_errors += <span class="hljs-number">1</span>
        <span class="hljs-keyword">if</span> consecutive_errors &lt; <span class="hljs-number">3</span>:
            <span class="hljs-comment"># æ‰§è¡Œå¾ªç¯å¹¶é‡è¯•</span>
            thread[<span class="hljs-string">"events"</span>].append({
                <span class="hljs-string">"type"</span>: <span class="hljs-string">'error'</span>,
                <span class="hljs-string">"data"</span>: format_error(e),
            })
        <span class="hljs-keyword">else</span>:
            <span class="hljs-comment"># ä¸­æ–­å¾ªç¯ï¼Œé‡ç½®ä¸Šä¸‹æ–‡çª—å£çš„éƒ¨åˆ†ï¼Œå‡çº§åˆ°äººç±»ï¼Œæˆ–ä½ æƒ³åšçš„ä»»ä½•å…¶ä»–äº‹æƒ…</span>
            <span class="hljs-keyword">break</span>
</code></pre>
<p>è¾¾åˆ°æŸä¸ªè¿ç»­é”™è¯¯é˜ˆå€¼å¯èƒ½æ˜¯å‡çº§åˆ°äººç±»çš„å¥½åœ°æ–¹ï¼Œæ— è®ºæ˜¯é€šè¿‡æ¨¡å‹å†³ç­–è¿˜æ˜¯é€šè¿‡æ§åˆ¶æµçš„ç¡®å®šæ€§æ¥ç®¡ã€‚</p>
<p><strong>å¥½å¤„</strong>ï¼š</p>
<ol>
<li><strong>è‡ªæˆ‘ä¿®å¤</strong>ï¼šLLM å¯ä»¥é˜…è¯»é”™è¯¯æ¶ˆæ¯å¹¶æ‰¾å‡ºåœ¨åç»­å·¥å…·è°ƒç”¨ä¸­è¦æ›´æ”¹çš„å†…å®¹</li>
<li><strong>æŒä¹…æ€§</strong>ï¼šå³ä½¿ä¸€ä¸ªå·¥å…·è°ƒç”¨å¤±è´¥ï¼ŒAgent ä¹Ÿå¯ä»¥ç»§ç»­è¿è¡Œ</li>
</ol>
<blockquote>
<p>æˆ‘ç¡®ä¿¡ä½ ä¼šå‘ç°å¦‚æœä½ è¿™æ ·åšå¤ªå¤šï¼Œ Agent ä¼šå¼€å§‹å¤±æ§ï¼Œå¯èƒ½ä¼šä¸€éåˆä¸€éåœ°é‡å¤ç›¸åŒçš„é”™è¯¯ã€‚è¿™å°±æ˜¯è¦ç´  8ï¼ˆæŒæ§æ§åˆ¶æµï¼‰å’Œè¦ç´  3ï¼ˆæŒæ§ä¸Šä¸‹æ–‡æ„å»ºï¼‰å‘æŒ¥ä½œç”¨çš„åœ°æ–¹â€”â€”ä½ ä¸éœ€è¦åªæ˜¯å°†åŸå§‹é”™è¯¯æ”¾å›å»ï¼Œä½ å¯ä»¥å®Œå…¨é‡æ„å®ƒçš„è¡¨ç¤ºæ–¹å¼ï¼Œä»ä¸Šä¸‹æ–‡çª—å£ä¸­åˆ é™¤ä¹‹å‰çš„äº‹ä»¶ï¼Œæˆ–ä»»ä½•ä½ å‘ç°æœ‰æ•ˆçš„ç¡®å®šæ€§äº‹æƒ…æ¥è®© Agent å›åˆ°æ­£è½¨ã€‚</p>
</blockquote>
<p>ä½†é˜²æ­¢é”™è¯¯å¤±æ§çš„ç¬¬ä¸€æ–¹æ³•æ˜¯æ‹¥æŠ±<strong>è¦ç´  10â€”â€”å°è€Œä¸“æ³¨çš„ Agent</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-26">è¦ç´  10ï¼šå°è€Œä¸“æ³¨çš„ Agent</h3>
<p>ä¸å…¶æ„å»ºè¯•å›¾åšæ‰€æœ‰äº‹æƒ…çš„å•ä½“ Agentï¼Œä¸å¦‚æ„å»ºåšå¥½ä¸€ä»¶äº‹çš„å°è€Œä¸“æ³¨çš„ Agentã€‚Agent åªæ˜¯æ›´å¤§ã€ä¸»è¦æ˜¯ç¡®å®šæ€§ç³»ç»Ÿä¸­çš„ä¸€ä¸ªæ„å»ºå—ã€‚</p>
<p>è¿™é‡Œçš„å…³é”®æ´å¯Ÿæ˜¯å…³äº LLM çš„é™åˆ¶ï¼šä»»åŠ¡è¶Šå¤§è¶Šå¤æ‚ï¼Œéœ€è¦çš„æ­¥éª¤å°±è¶Šå¤šï¼Œè¿™æ„å‘³ç€æ›´é•¿çš„ä¸Šä¸‹æ–‡çª—å£ã€‚<strong>éšç€ä¸Šä¸‹æ–‡çš„å¢é•¿ï¼ŒLLM æ›´å¯èƒ½è¿·å¤±æˆ–å¤±å»ç„¦ç‚¹</strong>ã€‚é€šè¿‡è®© Agent ä¸“æ³¨äº 3-10 æ­¥ï¼Œæœ€å¤š 20 æ­¥çš„ç‰¹å®šé¢†åŸŸï¼Œæˆ‘ä»¬ä¿æŒä¸Šä¸‹æ–‡çª—å£å¯ç®¡ç†ï¼ŒLLM æ€§èƒ½é«˜ã€‚</p>
<blockquote>
<h4 data-id="heading-27">éšç€ä¸Šä¸‹æ–‡å¢é•¿ï¼ŒLLM æ›´å¯èƒ½è¿·å¤±æˆ–å¤±å»ç„¦ç‚¹</h4>
</blockquote>
<p><strong>å°è€Œä¸“æ³¨çš„ Agent çš„å¥½å¤„</strong>ï¼š</p>
<ol>
<li><strong>å¯ç®¡ç†çš„ä¸Šä¸‹æ–‡</strong>ï¼šæ›´å°çš„ä¸Šä¸‹æ–‡çª—å£æ„å‘³ç€æ›´å¥½çš„ LLM æ€§èƒ½</li>
<li><strong>æ¸…æ™°çš„èŒè´£</strong>ï¼šæ¯ä¸ª Agent éƒ½æœ‰æ˜ç¡®çš„èŒƒå›´å’Œç›®çš„</li>
<li><strong>æ›´å¥½çš„å¯é æ€§</strong>ï¼šåœ¨å¤æ‚å·¥ä½œæµä¸­è¿·å¤±çš„æœºä¼šæ›´å°‘</li>
<li><strong>æ›´å®¹æ˜“æµ‹è¯•</strong>ï¼šæ›´å®¹æ˜“æµ‹è¯•å’ŒéªŒè¯ç‰¹å®šåŠŸèƒ½</li>
<li><strong>æ”¹è¿›çš„è°ƒè¯•</strong>ï¼šå½“é—®é¢˜å‘ç”Ÿæ—¶æ›´å®¹æ˜“è¯†åˆ«å’Œä¿®å¤</li>
</ol>
<h3 data-id="heading-28">å¦‚æœ LLM å˜å¾—æ›´èªæ˜æ€ä¹ˆåŠï¼Ÿ</h3>
<p>å¦‚æœ LLM å˜å¾—è¶³å¤Ÿèªæ˜å¯ä»¥å¤„ç† 100 æ­¥ä»¥ä¸Šçš„å·¥ä½œæµï¼Œæˆ‘ä»¬è¿˜éœ€è¦è¿™ä¸ªå—ï¼Ÿ</p>
<p>ç®€çŸ­çš„å›ç­”æ˜¯<strong>æ˜¯çš„</strong>ã€‚éšç€ Agent å’Œ LLM çš„æ”¹è¿›ï¼Œå®ƒä»¬<strong>å¯èƒ½</strong>è‡ªç„¶æ‰©å±•åˆ°èƒ½å¤Ÿå¤„ç†æ›´é•¿çš„ä¸Šä¸‹æ–‡çª—å£ã€‚è¿™æ„å‘³ç€å¤„ç†æ›´å¤§ DAG çš„æ›´å¤šéƒ¨åˆ†ã€‚è¿™ç§å°è€Œä¸“æ³¨çš„æ–¹æ³•ç¡®ä¿ä½ <strong>ä»Šå¤©</strong>å°±èƒ½è·å¾—ç»“æœï¼ŒåŒæ—¶è®©ä½ å‡†å¤‡å¥½éšç€ LLM ä¸Šä¸‹æ–‡çª—å£å˜å¾—æ›´å¯é è€Œæ…¢æ…¢æ‰©å±• Agent èŒƒå›´ã€‚ï¼ˆå¦‚æœä½ ä»¥å‰é‡æ„è¿‡å¤§å‹ç¡®å®šæ€§ä»£ç åº“ï¼Œä½ ç°åœ¨å¯èƒ½æ­£åœ¨ç‚¹å¤´ã€‚ï¼‰</p>
<p>æœ‰æ„è¯†åœ°æ§åˆ¶ Agent çš„å¤§å°/èŒƒå›´ï¼Œå¹¶ä¸”åªä»¥å…è®¸ä½ ä¿æŒè´¨é‡çš„æ–¹å¼å¢é•¿ï¼Œæ˜¯è¿™é‡Œçš„å…³é”®ã€‚æ­£å¦‚æ„å»º NotebookLM çš„å›¢é˜Ÿæ‰€è¯´ï¼š</p>
<blockquote>
<p>"æˆ‘è§‰å¾—ä¸€è‡´åœ°ï¼ŒAI æ„å»ºä¸­æœ€ç¥å¥‡çš„æ—¶åˆ»å¯¹æˆ‘æ¥è¯´æ˜¯å½“æˆ‘çœŸçš„ã€çœŸçš„ã€çœŸçš„æ¥è¿‘æ¨¡å‹èƒ½åŠ›è¾¹ç¼˜çš„æ—¶å€™"</p>
</blockquote>
<p>æ— è®ºé‚£ä¸ªè¾¹ç•Œåœ¨å“ªé‡Œï¼Œå¦‚æœä½ èƒ½æ‰¾åˆ°é‚£ä¸ªè¾¹ç•Œå¹¶å§‹ç»ˆåšå¯¹ï¼Œä½ å°±ä¼šæ„å»ºç¥å¥‡çš„ä½“éªŒã€‚è¿™é‡Œæœ‰å¾ˆå¤šæŠ¤åŸæ²³å¯ä»¥å»ºç«‹ï¼Œä½†åƒå¾€å¸¸ä¸€æ ·ï¼Œå®ƒä»¬éœ€è¦ä¸€äº›å·¥ç¨‹ä¸¥è°¨æ€§ã€‚</p>
<hr/>
<h3 data-id="heading-29">è¦ç´  11ï¼šä»ä»»ä½•åœ°æ–¹è§¦å‘ï¼Œåœ¨ç”¨æˆ·æ‰€åœ¨çš„åœ°æ–¹æœåŠ¡</h3>
<p>å¦‚æœä½ æ­£åœ¨åšè¦ç´  6ï¼ˆå¯åŠ¨/æš‚åœ/æ¢å¤çš„ç®€å• APIï¼‰å’Œè¦ç´  7ï¼ˆç”¨å·¥å…·è°ƒç”¨è”ç³»äººç±»ï¼‰ï¼Œä½ å°±å‡†å¤‡å¥½æ•´åˆè¿™ä¸ªå› ç´ äº†ã€‚</p>
<p>ä½¿ç”¨æˆ·èƒ½å¤Ÿä» Slackã€ç”µå­é‚®ä»¶ã€çŸ­ä¿¡æˆ–ä»–ä»¬æƒ³è¦çš„ä»»ä½•å…¶ä»–æ¸ é“è§¦å‘ Agentã€‚ä½¿ Agent èƒ½å¤Ÿé€šè¿‡ç›¸åŒçš„æ¸ é“å“åº”ã€‚</p>
<p><strong>å¥½å¤„</strong>ï¼š</p>
<ol>
<li><strong>åœ¨ç”¨æˆ·æ‰€åœ¨çš„åœ°æ–¹æœåŠ¡</strong>ï¼šè¿™å¸®åŠ©ä½ æ„å»ºæ„Ÿè§‰åƒçœŸäººæˆ–è‡³å°‘åƒæ•°å­—åŒäº‹çš„ AI åº”ç”¨</li>
<li><strong>å¤–å¾ªç¯ Agent</strong>ï¼šä½¿ Agent èƒ½å¤Ÿè¢«éäººç±»è§¦å‘ï¼Œä¾‹å¦‚äº‹ä»¶ã€cronã€æ•…éšœç­‰ã€‚å®ƒä»¬å¯èƒ½å·¥ä½œ 5ã€20ã€90 åˆ†é’Ÿï¼Œä½†å½“å®ƒä»¬åˆ°è¾¾å…³é”®ç‚¹æ—¶ï¼Œå¯ä»¥è”ç³»äººç±»å¯»æ±‚å¸®åŠ©ã€åé¦ˆæˆ–æ‰¹å‡†</li>
<li><strong>é«˜é£é™©å·¥å…·</strong>ï¼šå¦‚æœä½ èƒ½å¿«é€Ÿå¾ªç¯å„ç§äººç±»ï¼Œä½ å¯ä»¥ç»™ Agent è®¿é—®æ›´é«˜é£é™©çš„æ“ä½œï¼Œå¦‚å‘é€å¤–éƒ¨ç”µå­é‚®ä»¶ã€æ›´æ–°ç”Ÿäº§æ•°æ®ç­‰ã€‚ä¿æŒæ¸…æ™°çš„æ ‡å‡†è®©ä½ è·å¾—å¯å®¡è®¡æ€§å’Œå¯¹æ‰§è¡Œæ›´å¤§æ›´å¥½äº‹æƒ…çš„ Agent çš„ä¿¡å¿ƒ</li>
</ol>
<hr/>
<h3 data-id="heading-30">è¦ç´  12ï¼šè®© Agent æˆä¸ºæ— çŠ¶æ€ Reducer</h3>
<p>å¥½å§ï¼Œæˆ‘ä»¬å·²ç»è¶…è¿‡ 1000 è¡Œ markdown äº†ã€‚è¿™ä¸ªä¸»è¦åªæ˜¯ä¸ºäº†å¥½ç©ã€‚</p>
<p>ä»å‡½æ•°å¼ç¼–ç¨‹çš„è§’åº¦æ¥çœ‹ï¼ŒAgent æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª <strong>reducer</strong>â€”â€”ä¸€ä¸ªæ¥æ”¶å½“å‰çŠ¶æ€å’Œäº‹ä»¶ï¼Œè¿”å›æ–°çŠ¶æ€çš„çº¯å‡½æ•°ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">newState</span> = reducer(currentState, event)
</code></pre>
<p>æˆ–è€…ç”¨ Haskell é£æ ¼è¡¨ç¤ºï¼š</p>
<pre><code class="hljs language-haskell" lang="haskell">foldl agentStep initialState events
</code></pre>
<p>è¿™ç§æ— çŠ¶æ€ reducer çš„æ€ç»´æ–¹å¼æœ‰åŠ©äºæˆ‘ä»¬ï¼š</p>
<ul>
<li>æ›´æ¸…æ™°åœ°æ€è€ƒ Agent çš„è¡Œä¸º</li>
<li>æ›´å®¹æ˜“æµ‹è¯•å’Œè°ƒè¯•</li>
<li>æ›´å¥½åœ°å®ç°æŒä¹…åŒ–å’Œæ¢å¤</li>
</ul>
<hr/>
<h2 data-id="heading-31">é™„å½•ï¼šé¢„å–ä¸Šä¸‹æ–‡</h2>
<p>å¦‚æœæ¨¡å‹å¾ˆå¯èƒ½ä¼šè°ƒç”¨å·¥å…· Xï¼Œä¸è¦æµªè´¹ token å¾€è¿”å‘Šè¯‰æ¨¡å‹å»è·å–å®ƒã€‚</p>
<p><strong>ä¸è¦è¿™æ ·</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æç¤ºä¸­åŒ…å«ï¼š</span>
<span class="hljs-comment"># "å½“æŸ¥çœ‹éƒ¨ç½²æ—¶ï¼Œä½ å¯èƒ½æƒ³è·å–å·²å‘å¸ƒçš„ git æ ‡ç­¾åˆ—è¡¨..."</span>
<span class="hljs-comment"># å·¥å…·é€‰é¡¹åŒ…æ‹¬ï¼šlist_git_tags, deploy_backend_to_prod, done_for_now</span>

thread = {<span class="hljs-string">"events"</span>: [initial_message]}
next_step = <span class="hljs-keyword">await</span> determine_next_step(thread)

<span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
    <span class="hljs-keyword">if</span> next_step.intent == <span class="hljs-string">'list_git_tags'</span>:
        tags = <span class="hljs-keyword">await</span> fetch_git_tags()
        thread[<span class="hljs-string">"events"</span>].append({
            <span class="hljs-string">"type"</span>: <span class="hljs-string">'list_git_tags'</span>,
            <span class="hljs-string">"data"</span>: tags,
        })
    <span class="hljs-keyword">elif</span> next_step.intent == <span class="hljs-string">'deploy_backend_to_prod'</span>:
        <span class="hljs-comment"># ...</span>
</code></pre>
<p><strong>è€Œæ˜¯è¿™æ ·</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æç¤ºä¸­ç›´æ¥åŒ…å«ï¼š</span>
<span class="hljs-comment"># "å½“å‰çš„ git æ ‡ç­¾æ˜¯ï¼š{{ git_tags }}"</span>
<span class="hljs-comment"># å·¥å…·é€‰é¡¹åªæœ‰ï¼šdeploy_backend_to_prod, done_for_now</span>

thread = {<span class="hljs-string">"events"</span>: [initial_message]}
git_tags = <span class="hljs-keyword">await</span> fetch_git_tags()  <span class="hljs-comment"># é¢„å–ï¼</span>

next_step = <span class="hljs-keyword">await</span> determine_next_step(thread, git_tags)

<span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
    <span class="hljs-keyword">if</span> next_step.intent == <span class="hljs-string">'deploy_backend_to_prod'</span>:
        <span class="hljs-comment"># ...</span>
</code></pre>
<p>æˆ–è€…æ›´å¥½çš„æ˜¯ï¼Œå°†æ ‡ç­¾åŒ…å«åœ¨çº¿ç¨‹ä¸­ï¼Œä»æç¤ºæ¨¡æ¿ä¸­åˆ é™¤ç‰¹å®šå‚æ•°ï¼š</p>
<pre><code class="hljs language-python" lang="python">thread = {<span class="hljs-string">"events"</span>: [initial_message]}

<span class="hljs-comment"># æ·»åŠ è¯·æ±‚</span>
thread[<span class="hljs-string">"events"</span>].append({
    <span class="hljs-string">"type"</span>: <span class="hljs-string">'list_git_tags'</span>,
})

git_tags = <span class="hljs-keyword">await</span> fetch_git_tags()

<span class="hljs-comment"># æ·»åŠ ç»“æœ</span>
thread[<span class="hljs-string">"events"</span>].append({
    <span class="hljs-string">"type"</span>: <span class="hljs-string">'list_git_tags_result'</span>,
    <span class="hljs-string">"data"</span>: git_tags,
})

next_step = <span class="hljs-keyword">await</span> determine_next_step(thread)
</code></pre>
<blockquote>
<h4 data-id="heading-32">å¦‚æœä½ å·²ç»çŸ¥é“ä½ æƒ³è®©æ¨¡å‹è°ƒç”¨ä»€ä¹ˆå·¥å…·ï¼Œå°±<strong>ç¡®å®šæ€§åœ°</strong>è°ƒç”¨å®ƒä»¬ï¼Œè®©æ¨¡å‹åšå¼„æ¸…æ¥šå¦‚ä½•ä½¿ç”¨å®ƒä»¬è¾“å‡ºçš„å›°éš¾éƒ¨åˆ†</h4>
</blockquote>
<p>å†æ¬¡å¼ºè°ƒï¼ŒAI å·¥ç¨‹å…¨éƒ½æ˜¯å…³äº<strong>ä¸Šä¸‹æ–‡å·¥ç¨‹</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-33">æ€»ç»“</h2>
<p>12 å› ç´  Agent æ–¹æ³•è®ºä¸ºæˆ‘ä»¬æä¾›äº†ä¸€å¥—ç³»ç»ŸåŒ–çš„æ–¹æ³•æ¥æ„å»ºå¯é ã€å¯ç»´æŠ¤çš„ AI Agent ç³»ç»Ÿã€‚è®©æˆ‘ä»¬å›é¡¾æ ¸å¿ƒè¦ç‚¹ï¼š</p>
<h3 data-id="heading-34">æ ¸å¿ƒç†å¿µ</h3>
<ol>
<li><strong>Agent åªæ˜¯è½¯ä»¶</strong>â€”â€”ä¸è¦è¢«"AI Agent"çš„æ¦‚å¿µç¥ç§˜åŒ–ï¼Œå®ƒä»¬æœ¬è´¨ä¸Šæ˜¯æœ‰è¾“å…¥ã€æœ‰è¾“å‡ºã€æœ‰çŠ¶æ€çš„ç¨‹åº</li>
<li><strong>ç®€å•ä¼˜äºå¤æ‚</strong>â€”â€”ä»å°è€Œä¸“æ³¨çš„ Agent å¼€å§‹ï¼Œåªåœ¨è¯æ˜å¯é åæ‰æ‰©å±•èŒƒå›´</li>
<li><strong>æŒæ§ä¸€åˆ‡</strong>â€”â€”æŒæ§æç¤ºã€ä¸Šä¸‹æ–‡ã€æ§åˆ¶æµï¼Œä¸è¦æŠŠè¿™äº›å…³é”®èƒ½åŠ›å¤–åŒ…ç»™æ¡†æ¶</li>
</ol>
<h3 data-id="heading-35">åäºŒè¦ç´ é€ŸæŸ¥</h3>






































































<table><thead><tr><th>è¦ç´ </th><th>æ ¸å¿ƒæ€æƒ³</th><th>ä¸€å¥è¯æ€»ç»“</th></tr></thead><tbody><tr><td>1</td><td>è‡ªç„¶è¯­è¨€åˆ°å·¥å…·è°ƒç”¨</td><td>LLM è´Ÿè´£æ„å›¾ç†è§£ï¼Œä»£ç è´Ÿè´£æ‰§è¡Œ</td></tr><tr><td>2</td><td>æŒæ§æç¤ºè¯</td><td>æç¤ºæ˜¯ä¸€ç­‰ä»£ç ï¼Œä¸æ˜¯é»‘ç›’é…ç½®</td></tr><tr><td>3</td><td>æŒæ§ä¸Šä¸‹æ–‡çª—å£</td><td>ä¸€åˆ‡éƒ½æ˜¯ä¸Šä¸‹æ–‡å·¥ç¨‹</td></tr><tr><td>4</td><td>å·¥å…·åªæ˜¯ç»“æ„åŒ–è¾“å‡º</td><td>å·¥å…·è°ƒç”¨åªæ˜¯ JSONï¼Œæ‰§è¡Œç”±ä½ å†³å®š</td></tr><tr><td>5</td><td>ç»Ÿä¸€æ‰§è¡ŒçŠ¶æ€ä¸ä¸šåŠ¡çŠ¶æ€</td><td>ç®€åŒ–çŠ¶æ€ç®¡ç†ï¼Œå•ä¸€äº‹å®æ¥æº</td></tr><tr><td>6</td><td>å¯åŠ¨/æš‚åœ/æ¢å¤</td><td>åƒæ™®é€šç¨‹åºä¸€æ ·ç®¡ç† Agent ç”Ÿå‘½å‘¨æœŸ</td></tr><tr><td>7</td><td>ç”¨å·¥å…·è°ƒç”¨è”ç³»äººç±»</td><td>äººæœºäº¤äº’ä¹Ÿæ˜¯ä¸€ç§å·¥å…·è°ƒç”¨</td></tr><tr><td>8</td><td>æŒæ§æ§åˆ¶æµ</td><td>è‡ªå®šä¹‰å¾ªç¯é€»è¾‘ï¼ŒæŒ‰éœ€ä¸­æ–­å’Œæ¢å¤</td></tr><tr><td>9</td><td>é”™è¯¯å‹ç¼©è¿›ä¸Šä¸‹æ–‡</td><td>è®© LLM è‡ªæˆ‘ä¿®å¤ï¼Œä½†è®¾ç½®é™åˆ¶</td></tr><tr><td>10</td><td>å°è€Œä¸“æ³¨çš„ Agent</td><td>é™åˆ¶èŒƒå›´ï¼Œä¿æŒä¸Šä¸‹æ–‡å¯ç®¡ç†</td></tr><tr><td>11</td><td>ä»ä»»ä½•åœ°æ–¹è§¦å‘</td><td>åœ¨ç”¨æˆ·æ‰€åœ¨çš„åœ°æ–¹æœåŠ¡</td></tr><tr><td>12</td><td>æ— çŠ¶æ€ Reducer</td><td>å‡½æ•°å¼æ€ç»´è®© Agent æ›´å¯é¢„æµ‹</td></tr></tbody></table>
<h3 data-id="heading-36">æœ€åçš„æ€è€ƒ</h3>
<p>æ„å»ºç”Ÿäº§çº§ AI Agent ä¸æ˜¯è¦è¿½æ±‚æœ€å¤æ‚çš„æ¶æ„æˆ–æœ€å…ˆè¿›çš„æ¡†æ¶ã€‚ç›¸åï¼Œå®ƒæ˜¯å…³äºï¼š</p>
<ul>
<li><strong>ç†è§£ LLM çš„é™åˆ¶</strong>â€”â€”ä¸Šä¸‹æ–‡çª—å£è¶Šé•¿ï¼Œæ€§èƒ½è¶Šå·®</li>
<li><strong>ä¿æŒç®€å•</strong>â€”â€”ä»å°å¤„ç€æ‰‹ï¼Œè¯æ˜æœ‰æ•ˆåå†æ‰©å±•</li>
<li><strong>æ‹¥æŠ±ç¡®å®šæ€§</strong>â€”â€”è®© LLM åšå®ƒæ“…é•¿çš„ï¼ˆç†è§£å’Œæ¨ç†ï¼‰ï¼Œè®©ä»£ç åšä»£ç æ“…é•¿çš„ï¼ˆå¯é æ‰§è¡Œï¼‰</li>
<li><strong>ä¸ºäººç±»è®¾è®¡</strong>â€”â€”Agent åº”è¯¥å¢å¼ºäººç±»èƒ½åŠ›ï¼Œè€Œä¸æ˜¯å–ä»£äººç±»åˆ¤æ–­</li>
</ul>
<blockquote>
<p>"æˆ‘è§‰å¾—ä¸€è‡´åœ°ï¼ŒAI æ„å»ºä¸­æœ€ç¥å¥‡çš„æ—¶åˆ»æ˜¯å½“æˆ‘çœŸçš„æ¥è¿‘æ¨¡å‹èƒ½åŠ›è¾¹ç¼˜çš„æ—¶å€™"</p>
</blockquote>
<p>æ‰¾åˆ°é‚£ä¸ªè¾¹ç•Œï¼Œå¹¶å§‹ç»ˆåœ¨é‚£é‡Œäº¤ä»˜ï¼Œè¿™å°±æ˜¯æ„å»ºç¥å¥‡ AI ä½“éªŒçš„ç§˜è¯€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§£æ„ TTSï¼šä»æ–‡æœ¬ç¬¦å·åˆ°å£°æ³¢ä¿¡å·çš„æ¼”è¿›]]></title>    <link>https://juejin.cn/post/7581363652780539914</link>    <guid>https://juejin.cn/post/7581363652780539914</guid>    <pubDate>2025-12-08T15:34:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581363652780539914" data-draft-id="7581359420392063003" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£æ„ TTSï¼šä»æ–‡æœ¬ç¬¦å·åˆ°å£°æ³¢ä¿¡å·çš„æ¼”è¿›"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2025-12-08T15:34:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿™å„¿æœ‰ä¸€å †èŠ±"/> <meta itemprop="url" content="https://juejin.cn/user/3076912575965819"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£æ„ TTSï¼šä»æ–‡æœ¬ç¬¦å·åˆ°å£°æ³¢ä¿¡å·çš„æ¼”è¿›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3076912575965819/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿™å„¿æœ‰ä¸€å †èŠ±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T15:34:32.000Z" title="Mon Dec 08 2025 15:34:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰ç«¯å¤„ç†ï¼šæ–‡æœ¬çš„æ ‡å‡†åŒ–ä¸éŸ³ç´ åŒ–</h2>
<p>ç³»ç»Ÿæ¥æ”¶åˆ°è¾“å…¥æ–‡æœ¬åçš„é¦–è¦ä»»åŠ¡æ˜¯æ¸…æ´—ä¸è½¬æ¢ã€‚äººç±»ä¹¦å†™çš„æ–‡æœ¬å……æ»¡äº†éæ ‡å‡†åŒ–çš„ç¬¦å·ï¼Œè®¡ç®—æœºæ— æ³•ç›´æ¥å¤„ç†è¿™äº›åŒ…å«æ­§ä¹‰çš„ä¿¡æ¯ã€‚å‰ç«¯æ¨¡å—å¿…é¡»è§£å†³æ–‡æœ¬å½’ä¸€åŒ–çš„é—®é¢˜ï¼Œå°†â€œ$20â€è½¬åŒ–ä¸ºâ€œtwenty dollarsâ€ï¼Œæˆ–è€…å°†æ—¥æœŸæ ¼å¼å±•å¼€ä¸ºæ ‡å‡†è¯»éŸ³åºåˆ—ã€‚è¿™ä¸€æ­¥éª¤å†³å®šäº†åç»­å‘éŸ³çš„å‡†ç¡®æ€§åŸºç¡€ï¼Œä»»ä½•åœ¨æ­¤é˜¶æ®µé—æ¼çš„ä¿¡æ¯éƒ½ä¼šå¯¼è‡´æœ€ç»ˆåˆæˆçš„é”™è¯¯ã€‚</p>
<p><strong>Hugging Face Transformers æ–‡æ¡£ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmediumdirt.com%2Fb.3EVo0APo3Cp%2FvcbfmkVvJHZRDM0l2-MoD-QKwjN%2FDUAd3aLeT%2FYBwuNXDuAG0oMjDlgE" target="_blank" title="https://mediumdirt.com/b.3EVo0APo3Cp/vcbfmkVvJHZRDM0l2-MoD-QKwjN/DUAd3aLeT/YBwuNXDuAG0oMjDlgE" ref="nofollow noopener noreferrer">huggingface.co/docs/transfâ€¦</a></p>
<p>æ–‡æœ¬è¢«è§„èŒƒåŒ–åï¼Œå­—ç´ è½¬éŸ³ç´ ï¼ˆG2Pï¼‰æ¨¡å—ä»‹å…¥ã€‚å®ƒå°†æ­£å­—æ³•å±‚é¢çš„å•è¯è½¬æ¢ä¸ºä»£è¡¨å®é™…å‘éŸ³çš„éŸ³ç´ åºåˆ—ã€‚è‹±è¯­ä¸­çš„å¤šéŸ³å­—æˆ–ä¸­æ–‡é‡Œçš„å˜è°ƒéƒ½éœ€è¦é€šè¿‡æŸ¥é˜…å‘éŸ³è¯å…¸æˆ–è¿è¡Œé¢„è®­ç»ƒæ¨¡å‹æ¥æ¶ˆé™¤æ­§ä¹‰ã€‚åªæœ‰å°†æ–‡æœ¬å½»åº•æ‹†è§£ä¸ºéŸ³ç´ ã€é‡éŸ³å’ŒéŸµå¾‹æ ‡è®°ï¼Œå£°å­¦æ¨¡å‹æ‰èƒ½æ¥æ”¶åˆ°æ¸…æ™°çš„æŒ‡ä»¤ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> torch
<span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn

<span class="hljs-keyword">class</span> <span class="hljs-title class_">TextEncoder</span>(nn.Module):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, vocab_size, embed_dim, hidden_dim</span>):
        <span class="hljs-built_in">super</span>().__init__()
        self.embedding = nn.Embedding(vocab_size, embed_dim)
        self.lstm = nn.LSTM(embed_dim, hidden_dim, batch_first=<span class="hljs-literal">True</span>, bidirectional=<span class="hljs-literal">True</span>)
        self.linear = nn.Linear(hidden_dim * <span class="hljs-number">2</span>, embed_dim)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):
        x = self.embedding(x)
        x, _ = self.lstm(x)
        <span class="hljs-keyword">return</span> self.linear(x)
</code></pre>
<h2 data-id="heading-1">å£°å­¦æ¨¡å‹ï¼šé¢„æµ‹å£°éŸ³çš„ç‰¹å¾å›¾è°±</h2>
<p>éŸ³ç´ åºåˆ—æœ¬èº«æ²¡æœ‰å£°éŸ³ï¼Œå®ƒä»¬åªæ˜¯ä»£è¡¨å‘éŸ³ä½ç½®çš„æŠ½è±¡ç¬¦å·ã€‚å£°å­¦æ¨¡å‹çš„ä»»åŠ¡æ˜¯å°†è¿™äº›ç¬¦å·åºåˆ—è½¬åŒ–ä¸ºå£°å­¦ç‰¹å¾ï¼Œé€šå¸¸æ˜¯æ¢…å°”é¢‘è°±å›¾ã€‚è¿™ä¸ªè¿‡ç¨‹æ¶‰åŠå¯¹æ—¶é•¿ã€åŸºé¢‘ï¼ˆF0ï¼‰å’Œèƒ½é‡çš„é¢„æµ‹ã€‚</p>
<p>æ—©æœŸçš„ Tacotron ç³»åˆ—æ¨¡å‹é‡‡ç”¨å¾ªç¯ç¥ç»ç½‘ç»œæ¶æ„ï¼Œè™½ç„¶ç”Ÿæˆæ•ˆæœå°šå¯ï¼Œä½†è‡ªå›å½’çš„ç”Ÿæˆæ–¹å¼å¯¼è‡´æ¨ç†é€Ÿåº¦ç¼“æ…¢ï¼Œä¸”å®¹æ˜“å‡ºç°æ¼è¯æˆ–é‡å¤è¯»è¯çš„ç°è±¡ã€‚å·¥ä¸šç•Œéšåè½¬å‘äº†ä»¥ FastSpeech ä¸ºä»£è¡¨çš„éè‡ªå›å½’æ¶æ„ã€‚è¿™ç§æ¶æ„åˆ©ç”¨ Transformer çš„è‡ªæ³¨æ„åŠ›æœºåˆ¶å¹¶è¡Œç”Ÿæˆæ‰€æœ‰å¸§çš„é¢‘è°±ï¼Œå¹¶é€šè¿‡æ˜¾å¼çš„æ—¶é•¿é¢„æµ‹å™¨æ¥æ§åˆ¶æ¯ä¸ªéŸ³ç´ çš„å‘éŸ³é•¿åº¦ã€‚è¿™ç§è½¬å˜æå¤§åœ°æå‡äº†åˆæˆé€Ÿåº¦ï¼ŒåŒæ—¶ä¹Ÿå¢å¼ºäº†å¯¹éŸµå¾‹çš„æ§åˆ¶èƒ½åŠ›ã€‚</p>
<p><strong>PyTorch å®˜æ–¹ç½‘ç«™ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmediumdirt.com%2Fb.3EVo0APo3Cp%2FvcbfmkVvJHZRDM0l2-MoD-QKwjN%2FDUAd3aLeT%2FYBwuNXDuAG0oMjDlgE" target="_blank" title="https://mediumdirt.com/b.3EVo0APo3Cp/vcbfmkVvJHZRDM0l2-MoD-QKwjN/DUAd3aLeT/YBwuNXDuAG0oMjDlgE" ref="nofollow noopener noreferrer">pytorch.org/</a></p>
<p>å£°å­¦æ¨¡å‹è¾“å‡ºçš„æ¢…å°”é¢‘è°±å›¾å®é™…ä¸Šæ˜¯ä¸€ç§é¢‘åŸŸç‰¹å¾ï¼Œå®ƒä¸¢å¤±äº†ç›¸ä½ä¿¡æ¯ï¼Œå› æ­¤äººç±»æ— æ³•ç›´æ¥å¬åˆ°å£°éŸ³ã€‚å®ƒæ›´åƒæ˜¯ä¸€å¼ ä¹è°±ï¼Œè¯¦ç»†è®°å½•äº†åœ¨ä¸åŒæ—¶é—´ç‚¹åº”è¯¥å‡ºç°çš„é¢‘ç‡å¼ºåº¦ï¼Œç­‰å¾…ç€è¢«è¿˜åŸä¸ºæ³¢å½¢ã€‚</p>
<h2 data-id="heading-2">å£°ç å™¨ï¼šä»ç‰¹å¾åˆ°æ³¢å½¢çš„é‡æ„</h2>
<p>å£°ç å™¨è´Ÿè´£å°†å£°å­¦ç‰¹å¾è¿˜åŸä¸ºåŸå§‹æ³¢å½¢ã€‚è¿™æ˜¯ä¸€ä¸ªæå…·æŒ‘æˆ˜æ€§çš„é€†é—®é¢˜ï¼Œå› ä¸ºä»é¢‘è°±å›¾æ¢å¤ç›¸ä½ä¿¡æ¯å­˜åœ¨æ— æ•°ç§å¯èƒ½æ€§ã€‚ä¼ ç»Ÿçš„ Griffin-Lim ç®—æ³•ä¾é æ•°å­¦è¿­ä»£ä¼°ç®—ç›¸ä½ï¼Œä½†åˆæˆå‡ºæ¥çš„å£°éŸ³å¾€å¾€å¸¦æœ‰æ˜æ˜¾çš„é‡‘å±æ„Ÿå’Œåº•å™ªï¼Œç¼ºä¹çœŸå®åº¦ã€‚</p>
<p>æ·±åº¦å­¦ä¹ æ—¶ä»£çš„å£°ç å™¨å½»åº•æ”¹å˜äº†è¿™ä¸€å±€é¢ã€‚WaveNet å±•ç¤ºäº†é€æ ·æœ¬ç‚¹ç”Ÿæˆçš„æƒŠäººéŸ³è´¨ï¼Œä½†æä½çš„æ•ˆç‡é™åˆ¶äº†å…¶åº”ç”¨ã€‚éšåå‡ºç°çš„ HiFi-GAN åˆ©ç”¨ç”Ÿæˆå¯¹æŠ—ç½‘ç»œè§£å†³äº†æ•ˆç‡ä¸è´¨é‡çš„çŸ›ç›¾ã€‚ç”Ÿæˆå™¨è¯•å›¾ä¼ªé€ é€¼çœŸçš„æ³¢å½¢ï¼Œåˆ¤åˆ«å™¨åˆ™åœ¨å¤šå°ºåº¦ä¸Šé‰´åˆ«çœŸä¼ªï¼Œä¸¤è€…çš„åšå¼ˆä½¿å¾—æœ€ç»ˆç”Ÿæˆçš„éŸ³é¢‘åœ¨å¬æ„Ÿä¸Šå‡ ä¹éš¾ä»¥ä¸çœŸäººå½•éŸ³åŒºåˆ†ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Generator</span>(torch.nn.Module):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, initial_channel, resblock_kernel_sizes, resblock_dilation_sizes, upsample_rates, upsample_initial_channel, upsample_kernel_sizes, gin_channels=<span class="hljs-number">0</span></span>):
        <span class="hljs-built_in">super</span>(Generator, self).__init__()
        self.num_kernels = <span class="hljs-built_in">len</span>(resblock_kernel_sizes)
        self.num_upsamples = <span class="hljs-built_in">len</span>(upsample_rates)
        self.conv_pre = torch.nn.Conv1d(<span class="hljs-number">80</span>, initial_channel, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>, padding=<span class="hljs-number">3</span>)
        resblock = ResBlock1 <span class="hljs-keyword">if</span> resblock_type == <span class="hljs-string">'1'</span> <span class="hljs-keyword">else</span> ResBlock2
        self.ups = torch.nn.ModuleList()
        <span class="hljs-keyword">for</span> i, (u, k) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(<span class="hljs-built_in">zip</span>(upsample_rates, upsample_kernel_sizes)):
            self.ups.append(weight_norm(
                torch.nn.ConvTranspose1d(initial_channel//(<span class="hljs-number">2</span>**i), initial_channel//(<span class="hljs-number">2</span>**(i+<span class="hljs-number">1</span>)), k, u, padding=(k-u)//<span class="hljs-number">2</span>)))
</code></pre>
<h2 data-id="heading-3">ç«¯åˆ°ç«¯ä¸è¯­è¨€æ¨¡å‹çš„èåˆ</h2>
<p>æœ€æ–°çš„æŠ€æœ¯è¶‹åŠ¿æ­£åœ¨æ‰“ç ´ä¸Šè¿°æ¨¡å—åŒ–çš„ç•Œé™ã€‚VITS ç­‰æ¨¡å‹å°è¯•å°†å£°å­¦æ¨¡å‹ä¸å£°ç å™¨åˆå¹¶ï¼Œåˆ©ç”¨å˜åˆ†æ¨æ–­ç›´æ¥ä»æ–‡æœ¬ç”Ÿæˆæ³¢å½¢ï¼Œæ¶ˆé™¤äº†ä¸­é—´ç‰¹å¾è½¬æ¢å¸¦æ¥çš„è¯¯å·®ç´¯ç§¯ã€‚</p>
<p>ä¸æ­¤åŒæ—¶ï¼ŒåŸºäºå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„éŸ³é¢‘ç”Ÿæˆæ–¹æ¡ˆæ­£åœ¨å…´èµ·ã€‚è¿™ç±»ç³»ç»Ÿä¸å¤„ç†é¢‘è°±å›¾ï¼Œè€Œæ˜¯å°†éŸ³é¢‘é‡åŒ–ä¸ºç¦»æ•£çš„ç¼–ç ï¼ˆTokenï¼‰ã€‚æ¨¡å‹åƒå¤„ç†æ–‡æœ¬æ¥é¾™ä¸€æ ·é¢„æµ‹ä¸‹ä¸€ä¸ªéŸ³é¢‘ Tokenï¼Œä»è€Œå±•ç°å‡ºå¼ºå¤§çš„é›¶æ ·æœ¬å…‹éš†èƒ½åŠ›ã€‚åªéœ€æ•°ç§’çš„å‚è€ƒéŸ³é¢‘ï¼Œæ¨¡å‹å³å¯åœ¨ä¸è¿›è¡Œå¾®è°ƒçš„æƒ…å†µä¸‹ï¼Œå¤åˆ¶è¯´è¯äººçš„éŸ³è‰²ä¸ç¯å¢ƒèƒŒæ™¯ã€‚è¿™æ ‡å¿—ç€è¯­éŸ³åˆæˆæ­£ä»å•çº¯çš„ä¿¡å·å¤„ç†è¿ˆå‘é€šç”¨çš„ç”Ÿæˆå¼äººå·¥æ™ºèƒ½é˜¶æ®µã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vite 5é‡ç£…æ›´æ–°ï¼šæ­ç§˜10ä¸ªæå‡å¼€å‘ä½“éªŒçš„éšè—åŠŸèƒ½ï¼Œè®©ä½ çš„æ„å»ºé€Ÿåº¦å†å¿«50%]]></title>    <link>https://juejin.cn/post/7581386627675832360</link>    <guid>https://juejin.cn/post/7581386627675832360</guid>    <pubDate>2025-12-09T00:16:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581386627675832360" data-draft-id="7581354812861284404" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vite 5é‡ç£…æ›´æ–°ï¼šæ­ç§˜10ä¸ªæå‡å¼€å‘ä½“éªŒçš„éšè—åŠŸèƒ½ï¼Œè®©ä½ çš„æ„å»ºé€Ÿåº¦å†å¿«50%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-09T00:16:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vite 5é‡ç£…æ›´æ–°ï¼šæ­ç§˜10ä¸ªæå‡å¼€å‘ä½“éªŒçš„éšè—åŠŸèƒ½ï¼Œè®©ä½ çš„æ„å»ºé€Ÿåº¦å†å¿«50%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T00:16:40.000Z" title="Tue Dec 09 2025 00:16:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Vite 5é‡ç£…æ›´æ–°ï¼šæ­ç§˜10ä¸ªæå‡å¼€å‘ä½“éªŒçš„éšè—åŠŸèƒ½ï¼Œè®©ä½ çš„æ„å»ºé€Ÿåº¦å†å¿«50%</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>åœ¨å‰ç«¯å·¥å…·é“¾çš„æ¿€çƒˆç«äº‰ä¸­ï¼ŒVite å‡­å€Ÿå…¶æé€Ÿçš„å¼€å‘æœåŠ¡å™¨å’Œåˆ›æ–°çš„æ„å»ºç†å¿µè¿…é€Ÿå´›èµ·ã€‚2023å¹´æœ«ï¼ŒVite 5 æ­£å¼å‘å¸ƒï¼Œä¸ä»…å¸¦æ¥äº†æ˜¾è‘—çš„æ€§èƒ½æå‡ï¼Œè¿˜éšè—äº†è®¸å¤šå¯èƒ½è¢«å¿½è§†çš„å¼ºå¤§åŠŸèƒ½ã€‚æœ¬æ–‡å°†æ·±å…¥å‰–æè¿™äº›â€œç§˜å¯†æ­¦å™¨â€ï¼Œæ­ç¤ºå®ƒä»¬å¦‚ä½•å°†ä½ çš„å¼€å‘ä½“éªŒæ¨å‘æ–°é«˜åº¦â€”â€”ä»çƒ­æ›´æ–°åˆ°ç”Ÿäº§æ„å»ºï¼Œç”šè‡³èƒ½è®©æ•´ä½“æ•ˆç‡å†æå‡50%ã€‚</p>
<h2 data-id="heading-2">ä¸€ã€Vite 5çš„æ ¸å¿ƒæ¶æ„å‡çº§</h2>
<h3 data-id="heading-3">1. Rusté©±åŠ¨çš„åº•å±‚ä¼˜åŒ–</h3>
<p>Vite 5 é¦–æ¬¡å°†éƒ¨åˆ†æ ¸å¿ƒæ¨¡å—è¿ç§»è‡³Rustå®ç°ï¼ˆå¦‚<code>esbuild-rs</code>ï¼‰ï¼Œè¿™ä½¿å¾—ä¾èµ–è§£æé€Ÿåº¦ç›¸æ¯”JavaScriptç‰ˆæœ¬æå‡äº†30%ã€‚å®é™…æµ‹è¯•ä¸­ï¼Œä¸€ä¸ªåŒ…å«500ä¸ªæ¨¡å—çš„é¡¹ç›®å†·å¯åŠ¨æ—¶é—´ä»2.1ç§’é™è‡³1.4ç§’ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ–°æ—§ç‰ˆæœ¬å¯¹æ¯”ï¼ˆä½¿ç”¨--forceé€‰é¡¹å¼ºåˆ¶æ¸…é™¤ç¼“å­˜ï¼‰</span>
vite4: [vite] server ready <span class="hljs-keyword">in</span> 2100ms
vite5: [vite] server ready <span class="hljs-keyword">in</span> 1400ms
</code></pre>
<h3 data-id="heading-4">2. Rollup 4æ·±åº¦é›†æˆ</h3>
<p>å†…ç½®Rollupç‰ˆæœ¬å‡çº§è‡³v4.xï¼Œå¸¦æ¥ï¼š</p>
<ul>
<li>Tree-shakingç²¾åº¦æé«˜15%ï¼ˆå°¤å…¶å¯¹CSS-in-JSåº“ï¼‰</li>
<li>chunkåˆ†å‰²ç­–ç•¥ä¼˜åŒ–ï¼ˆæ”¯æŒ<code>experimentalManualChunks</code>é…ç½®é¡¹ï¼‰</li>
<li>WASMå¯¼å…¥è¯­æ³•åŸç”Ÿæ”¯æŒ</li>
</ul>
<h2 data-id="heading-5">äºŒã€å¼€å‘è€…å·¥å…·çš„é¢ è¦†æ€§æ”¹è¿›</h2>
<h3 data-id="heading-6">3. Lightning HMRï¼šäºšæ¯«ç§’çº§çƒ­æ›´æ–°</h3>
<p>é€šè¿‡æ–°çš„HMRåè®®è®¾è®¡ï¼š</p>
<ul>
<li>Vueå•æ–‡ä»¶ç»„ä»¶æ›´æ–°å»¶è¿Ÿä»23msé™è‡³8ms</li>
<li>React Fast Refreshé“¾è·¯ç¼©çŸ­40%</li>
<li>CSSæ¨¡å—çƒ­æ›¿æ¢ä¸å†è§¦å‘é¡µé¢é‡æ’</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
   <span class="hljs-attr">server</span>: {
      <span class="hljs-attr">hmr</span>: {
         <span class="hljs-attr">protocol</span>: <span class="hljs-string">'ws'</span>, <span class="hljs-comment">// æ–°å¢'wss'é€‰é¡¹ç”¨äºHTTPSç¯å¢ƒ</span>
         <span class="hljs-attr">timeout</span>: <span class="hljs-number">3000</span>, <span class="hljs-comment">// â† HMRè¶…æ—¶æ—¶é—´å¯é…ç½®åŒ– </span>
      }
   }
}
</code></pre>
<h3 data-id="heading-7">4. DevToolsæ€§èƒ½åˆ†æé¢æ¿</h3>
<p>å†…ç½®çš„<code>@vitejs/plugin-inspect</code>ç°åœ¨æ”¯æŒï¼š</p>
<ul>
<li><strong>ä¾èµ–é¢„æ„å»ºå¯è§†åŒ–</strong>ï¼šå±•ç¤ºå“ªäº›npmåŒ…è¢«è‡ªåŠ¨optimized</li>
<li><strong>HMRè¾¹ç•Œè¿½è¸ª</strong>ï¼šå›¾å½¢åŒ–æ˜¾ç¤ºç»„ä»¶æ›´æ–°å½±å“èŒƒå›´</li>
<li><strong>å†…å­˜å ç”¨ç›‘æ§</strong>ï¼šå®æ—¶æ˜¾ç¤ºæ¨¡å—ç¼“å­˜å¤§å°</li>
</ul>
<p><img src="https://example.com/vite5-devtools.png" alt="DevToolsæˆªå›¾" loading="lazy"/></p>
<h2 data-id="heading-8">ä¸‰ã€æ„å»ºæ•ˆç‡çš„é»‘ç§‘æŠ€</h2>
<h3 data-id="heading-9">5. SWCè½¬è¯‘å™¨å®éªŒæ€§æ”¯æŒ</h3>
<p>åœ¨<code>vite.config.js</code>ä¸­å¯ç”¨SWCæ›¿ä»£Babelï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
   <span class="hljs-attr">esbuild</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// ç¦ç”¨esbuild</span>
   <span class="hljs-attr">swc</span>: {
      <span class="hljs-attr">jsc</span>: {
         <span class="hljs-attr">parser</span>: { <span class="hljs-attr">syntax</span>: <span class="hljs-string">'typescript'</span> },
         <span class="hljs-attr">transform</span>: { <span class="hljs-attr">react</span>: { <span class="hljs-attr">runtime</span>: <span class="hljs-string">'automatic'</span> } }
      }
   }
}
</code></pre>
<p>å®æµ‹ç»“æœï¼š</p>
<ul>
<li>Reacté¡¹ç›®æ„å»ºé€Ÿåº¦æå‡42%</li>
<li>TSç±»å‹æ“¦é™¤é˜¶æ®µè€—æ—¶å‡å°‘65%</li>
</ul>
<h3 data-id="heading-10">6. Smart Persistent Cacheæœºåˆ¶</h3>
<p>å…¨æ–°çš„ç¼“å­˜ç­–ç•¥ç‰¹ç‚¹ï¼š</p>
<ul>
<li><strong>ç‰ˆæœ¬æ„ŸçŸ¥</strong>ï¼šå½“package.jsonå˜æ›´æ—¶è‡ªåŠ¨å¤±æ•ˆç¼“å­˜</li>
<li><strong>å·®åˆ†å­˜å‚¨</strong>ï¼šä»…ä¿å­˜å˜æ›´éƒ¨åˆ†çš„ç¼–è¯‘ç»“æœ</li>
<li><strong>SSRåŒæ„ç¼“å­˜</strong>ï¼šæœåŠ¡ç«¯/å®¢æˆ·ç«¯æ„å»ºå…±äº«ç¼“å­˜æ± </li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Cacheå‘½ä¸­ç‡æ—¥å¿—ç¤ºä¾‹ </span>
[vite] cache hit ratio: client(92%), server(85%)
</code></pre>
<p>##å››ã€è¿›é˜¶é…ç½®æŠ€å·§</p>
<p>###7. Fine-grained Chunk Splitting<br/>
åŸºäºè·¯ç”±çš„æ™ºèƒ½ä»£ç åˆ†å‰²ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
<span class="hljs-keyword">import</span> { splitVendorChunkPlugin } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
   <span class="hljs-attr">build</span>: {
      <span class="hljs-attr">rollupOptions</span>: {
         <span class="hljs-attr">output</span>: {
            <span class="hljs-title function_">manualChunks</span>(<span class="hljs-params">id</span>) {
               <span class="hljs-keyword">if</span> (id.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'node_modules'</span>)) {
                  <span class="hljs-keyword">return</span> <span class="hljs-string">'vendor'</span>
               }
               <span class="hljs-keyword">if</span> (id.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'/src/views/'</span>)) {
                  <span class="hljs-keyword">return</span> id.<span class="hljs-title function_">split</span>(<span class="hljs-string">'/views/'</span>)[<span class="hljs-number">1</span>].<span class="hljs-title function_">split</span>(<span class="hljs-string">'/'</span>)[<span class="hljs-number">0</span>]
               }
            }
         }
      },
      <span class="hljs-attr">chunkSizeWarningLimit</span>: <span class="hljs-number">1024</span> <span class="hljs-comment">// â†å¢å¤§chunkå‘Šè­¦é˜ˆå€¼ </span>
   },
   <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">splitVendorChunkPlugin</span>()]
})
</code></pre>
<p>###8. Workerçº¿ç¨‹çš„é›¶æˆæœ¬è°ƒç”¨<br/>
Web Workerå¼€å‘ä½“éªŒé©æ–°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// worker.ts â†’ä¼šè¢«è‡ªåŠ¨è½¬æ¢ä¸ºmyWorker.js?worker  </span>
<span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComlinkWorker</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./worker'</span>)&gt;(
   <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'./worker'</span>, <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>)  
)

<span class="hljs-comment">// Main threadè°ƒç”¨ç¤ºä¾‹  </span>
<span class="hljs-keyword">await</span> worker.<span class="hljs-title function_">heavyTask</span>(params)
</code></pre>
<p>å…³é”®æ”¹è¿›ï¼š</p>
<ul>
<li>TypeScriptç±»å‹è‡ªåŠ¨æ¨å¯¼</li>
<li>HMRæ”¯æŒï¼ˆå¼€å‘æ¨¡å¼ä¸‹ï¼‰</li>
<li>CSPåˆè§„çš„Blob URLç”Ÿæˆ</li>
</ul>
<p>##äº”ã€ç”Ÿæ€æ•´åˆçš„æ–°ç»´åº¦</p>
<p>###9. Unified SSR Hydrationæ¨¡å¼<br/>
æœåŠ¡ç«¯æ¸²æŸ“çš„é‡å¤§æ”¹è¿›ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite.config.js  </span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {   
   <span class="hljs-attr">ssr</span>: {   
      <span class="hljs-attr">noExternal</span>: [<span class="hljs-string">'react-router-dom'</span>], <span class="hljs-comment">// â†å¼ºåˆ¶SSRæ‰“åŒ…   </span>
      <span class="hljs-attr">optimizeDeps</span>: { <span class="hljs-attr">include</span>: [<span class="hljs-string">'react-dom/server'</span>] },   
      <span class="hljs-attr">target</span>:<span class="hljs-string">'node16'</span> <span class="hljs-comment">// â†æ–°å¢æ‰§è¡Œç¯å¢ƒæŒ‡å®š   </span>
   }   
} 
</code></pre>
<p>ä¼˜åŠ¿ä½“ç°ï¼š</p>
<ul>
<li>Hydrationä¸åŒ¹é…é”™è¯¯å‡å°‘70%<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fnextjs.org%2F" target="_blank" title="https://nextjs.org/" ref="nofollow noopener noreferrer">Next.js</a>å…¼å®¹å±‚æé€Ÿ40%</li>
</ul>
<p>###10.CSSæ–°èŒƒå¼æ”¯æŒ<br/>
å‰æ²¿ç‰¹æ€§å¼€ç®±å³ç”¨ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* vite.config.css */</span>   
<span class="hljs-keyword">@custom-media</span> --mobile (<span class="hljs-attribute">max-width</span>:<span class="hljs-number">640px</span>);   

<span class="hljs-comment">/* component.module.css */</span>    
<span class="hljs-selector-class">.button</span> {   
   <span class="hljs-attribute">color</span>:<span class="hljs-built_in">hsl</span>(from <span class="hljs-number">#f00</span> h s <span class="hljs-built_in">calc</span>(l * .<span class="hljs-number">8</span>)); <span class="hljs-comment">/* CSS Color Level5 */</span>   
} 
</code></pre>
<p>é…å¥—å·¥å…·é“¾ï¼š</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Context çŸ¥å¤šå°‘ï¼Œç»„ä»¶é€šè”æœ‰é—¨é“]]></title>    <link>https://juejin.cn/post/7581348660824506368</link>    <guid>https://juejin.cn/post/7581348660824506368</guid>    <pubDate>2025-12-09T00:29:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581348660824506368" data-draft-id="7577345758036066304" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Context çŸ¥å¤šå°‘ï¼Œç»„ä»¶é€šè”æœ‰é—¨é“"/> <meta itemprop="keywords" content="Android,Kotlin"/> <meta itemprop="datePublished" content="2025-12-09T00:29:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RockByte"/> <meta itemprop="url" content="https://juejin.cn/user/1046390797768519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Context çŸ¥å¤šå°‘ï¼Œç»„ä»¶é€šè”æœ‰é—¨é“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1046390797768519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RockByte
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T00:29:48.000Z" title="Tue Dec 09 2025 00:29:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");margin-left:2px}.markdown-body a[href^="#"]:before{content:"#"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:"â€¢";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:"";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="xcode">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#000}.xml .hljs-meta{color:silver}.hljs-comment,.hljs-quote{color:#007400}.hljs-attribute,.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-tag{color:#aa0d91}.hljs-template-variable,.hljs-variable{color:#3f6e74}.hljs-code,.hljs-meta-string,.hljs-string{color:#c41a16}.hljs-link,.hljs-regexp{color:#0e0eff}.hljs-bullet,.hljs-number,.hljs-symbol,.hljs-title{color:#1c00cf}.hljs-meta,.hljs-section{color:#643820}.hljs-built_in,.hljs-builtin-name,.hljs-class .hljs-title,.hljs-params,.hljs-type{color:#5c2699}.hljs-attr{color:#836c28}.hljs-subst{color:#000}.hljs-formula{background-color:#eee;font-style:italic}.hljs-addition{background-color:#baeeba}.hljs-deletion{background-color:#ffc8bd}.hljs-selector-class,.hljs-selector-id{color:#9b703f}.hljs-doctag,.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}</style><p><em>æœ¬ç³»åˆ—ä¸º Android æŠ€æœ¯èŒåœºé¢˜æè™šæ„å°è¯´ï¼Œæ‰€æœ‰ç™»åœºäººç‰©ã€å…¬å¸åç§°ã€ç»„ç»‡æ¶æ„åŠç›¸å…³æƒ…èŠ‚å‡ä¸ºåˆ›ä½œæ‰€éœ€è™šæ„è€Œæ¥ï¼Œè‹¥æœ‰é›·åŒï¼Œçº¯å±å¶ç„¶ã€‚ä¹¦ä¸­æ¶‰åŠçš„æŠ€æœ¯çŸ¥è¯†ç»ä¸“ä¸šæ¢³ç†ï¼Œä»…ä¾›å‚è€ƒã€‚</em></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/844bf0f4350a4e488ceae20d66f4dfce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765844987&amp;x-signature=hqjJxjm%2B1%2FnQsG0jEQxcQOYQDww%3D" alt="0.png" loading="lazy"/></p>
<h2 data-id="heading-0">å››ï¼‰Context çŸ¥å¤šå°‘ï¼Œç»„ä»¶é€šè”æœ‰é—¨é“</h2>
<p>ä¸Šæ¬¡é¢è¯•çš„å¤±è´¥åƒç›†å†·æ°´ï¼Œå½»åº•æµ‡é†’äº†æµ‘æµ‘å™©å™©çš„æ—å“ã€‚é¢è¯•å®˜éšæ„æŠ›å‡ºçš„Androidç›¸å…³é—®é¢˜ï¼Œä»–ç­”å¾—æ”¯æ”¯å¾å¾ï¼Œé‚£ä¸€åˆ»ä»–æ‰æ˜ç™½ï¼Œåªé æ”¹UIã€è°ƒæ¥å£çš„è¡¨é¢åŠŸå¤«ï¼Œæ ¹æœ¬æ’‘ä¸èµ·èŒä¸šé“è·¯ã€‚</p>
<p>å›åˆ°ç»„é‡Œï¼Œä»–æ”¶èµ·äº†æ‘¸é±¼çš„å¿ƒæ€ï¼Œå¼€å§‹æ²‰ä¸‹å¿ƒé’»ç ”æ ¸å¿ƒæŠ€æœ¯ã€‚æ°é€¢ç»„é‡Œå¯åŠ¨â€œç”¨æˆ·ä¸­å¿ƒæ¨¡å—é‡æ„â€ï¼Œè€æ¨è§ä»–æ€åº¦è½¬å˜ï¼Œä¾¿æŠŠâ€œå…¨å±€é€šçŸ¥å·¥å…·ç±»å¼€å‘â€è¿™ä¸ªåŸºç¡€å­ä»»åŠ¡äº¤ç»™ä»–ç»ƒæ‰‹ã€‚æ—å“ç£•ç£•ç»Šç»Šå¹²äº†å¿«ä¸€å‘¨ï¼ŒåˆšæŠŠåŸºç¡€åŠŸèƒ½è·‘é€šï¼Œéº»çƒ¦å°±æ‰¾ä¸Šé—¨äº†ã€‚</p>
<p>â€œæ—å“ï¼Œä½ è´Ÿè´£çš„é€šçŸ¥æ¨¡å—æµ‹å‡ºé—®é¢˜äº†ï¼â€å°å®‰æŠ±ç€æµ‹è¯•æœºæ€¥åŒ†åŒ†è·‘è¿‡æ¥ï¼Œé«˜é©¬å°¾éšç€è„šæ­¥æ™ƒå¾—å‰å®³ï¼Œâ€œå¸¸è§„æ“ä½œéƒ½æ²¡é—®é¢˜ï¼Œä½†æˆ‘åšåå°ä¿æ´»æµ‹è¯•æ—¶å‘ç°ï¼Œé€€åˆ°åå°ç­‰å¾…ä¸€ä¼šå„¿å†è§¦å‘æ¨é€ï¼ŒAPPç›´æ¥å†…å­˜æ³„æ¼ï¼Œæ—¶é—´é•¿äº†è¿˜ä¼šå´©æºƒï¼Œæ—¥å¿—é‡Œå…¨æ˜¯ <strong>LeakCanary</strong> æ£€æµ‹åˆ°å†…å­˜æ³„æ¼çš„è­¦å‘Šã€‚â€</p>
<p>æ—å“èµ¶ç´§æ¥è¿‡æµ‹è¯•æœºï¼Œå±å¹•ä¸Šâ€œåº”ç”¨å·²åœæ­¢è¿è¡Œâ€çš„æç¤ºæ ¼å¤–åˆºçœ¼ã€‚ä»–æ‰“å¼€æ—¥å¿—ï¼Œ<code>Activity Context leaked</code> çš„çº¢è‰²å­—æ ·åƒæ ¹åˆºæ‰åœ¨çœ¼å‰ã€‚è¿™ä¸ªé€šçŸ¥å·¥å…·ç±»ä»–ç”¨äº†å•ä¾‹æ¨¡å¼ï¼Œä¸ºäº†æ–¹ä¾¿è°ƒç”¨ <code>Toast</code>ï¼Œç›´æ¥æŠŠ <code>Activity</code> çš„ <code>this</code> ä¼ äº†è¿›å»ã€‚</p>
<p>â€œæˆ‘æ˜æ˜åœ¨å·¥å…·ç±»é‡ŒåŠ äº†åˆ¤ç©ºå•Šã€‚â€æ—å“çš±ç€çœ‰ç¿»ä»£ç ï¼Œâ€œ<code>if (context != null) { Toast.makeText(context, msg, Toast.LENGTH_SHORT).show() }</code>ï¼Œæ€ä¹ˆè¿˜ä¼šæ³„æ¼ï¼Ÿâ€</p>
<p>â€œä½ è¿™æ˜¯æŠŠ <code>Activity</code> çš„å‘½é—¨æ”¥æ‰‹é‡Œäº†ã€‚â€è€æ¨ç«¯ç€æªç“·æ¯è·¯è¿‡ï¼Œæ¯æ²¿è¿˜æ²¾ç€ç‚¹èŒ¶å¶ã€‚</p>
<p>ä»–ç›´æŒ‡é—®é¢˜æ ¸å¿ƒï¼šâ€œå•ä¾‹æ˜¯å…¨å±€ç”Ÿå‘½å‘¨æœŸï¼Œ<code>Activity</code> ä¸€é”€æ¯ï¼Œå®ƒè¿˜æŠ±ç€ <code>Activity</code> çš„ <code>Context</code> ä¸æ”¾ï¼Œåƒåœ¾å›æ”¶å™¨æ”¶ä¸äº†ï¼Œå¯ä¸å°±æ³„æ¼äº†ï¼Ÿâ€</p>
<p>æ—å“é¡ºç€è€æ¨çš„è¯å¾€ä¸‹æƒ³ï¼Œçœ‰å¤´æ‹§å¾—æ›´ç´§ï¼šâ€œé‚£è¦æ˜¯æœ‰äº›åœºæ™¯ç¡®å®ç»•ä¸å¼€ï¼Œéå¾—åœ¨å•ä¾‹è¿™ç§é•¿ç”Ÿå‘½å‘¨æœŸå¯¹è±¡é‡Œç”¨åˆ° <code>Activity Context</code>ï¼Œå°±æ²¡åˆ«çš„åŠæ³•äº†å—ï¼Ÿâ€</p>
<p>â€œä¹Ÿä¸æ˜¯å®Œå…¨ä¸èƒ½ç”¨ï¼Œæ ¸å¿ƒæ˜¯åˆ«è®©é•¿ç”Ÿå‘½å‘¨æœŸå¯¹è±¡â€˜æ­»æŠ“ç€â€™<code>Activity Context</code> ä¸æ”¾ã€‚â€è€æ¨æ‹‰è¿‡æ¤…å­åä¸‹ï¼Œé¡ºåŠ¿æ¥è¿‡æ—å“çš„ä»£ç æœ¬ã€‚</p>
<p>ä»–ç»™å‡ºè§£å†³æ–¹æ¡ˆï¼šâ€œçœŸç¢°åˆ°è¿™ç§éœ€æ±‚ï¼Œå°±å¾—ç”¨ <code>WeakReference</code> æŠŠ <code>Context</code> åŒ…èµ·æ¥ã€‚å®ƒå°±åƒä¸ªâ€˜ä¸´æ—¶æŠ“æ‰‹â€™ï¼Œåªåœ¨éœ€è¦çš„æ—¶å€™å…³è” <code>Activity</code>ï¼Œåƒåœ¾å›æ”¶å™¨è¦æ¸…ç† <code>Activity</code> æ—¶ï¼Œå®ƒä¸ä¼šæ‹¦ç€ï¼Œè¿™æ ·å°±èƒ½ä»æ ¹ä¸Šå‡å°‘æ³„æ¼é£é™©ã€‚â€</p>
<p>å¬ç€è€æ¨çš„è®²è§£ï¼Œæ—å“çªç„¶æƒ³èµ·ä¹‹å‰çœ‹è¿‡è€æ¨ç»™çš„ã€ŠAndroidæ ¸å¿ƒçŸ¥è¯†ç‚¹ã€‹ï¼Œèµ¶ç´§è¿½é—®ï¼šâ€œæ‚¨è¿™ä¹ˆä¸€è¯´æˆ‘å°±æ˜ç™½äº†ï¼é‚£ç»“åˆä½ çš„æ–‡æ¡£é‡Œè®²çš„ <code>Context</code> ç±»å‹ï¼Œæˆ‘è¿™ä¸ªå•ä¾‹å·¥å…·ç±»ï¼Œæ˜¯ä¸æ˜¯ç›´æ¥ç”¨ <code>Application Context</code> æœ€ç¨³å¦¥ï¼Ÿâ€</p>
<p>â€œå…ˆåˆ«æ€¥ç€ä¸‹ç»“è®ºã€‚â€è€æ¨æ‹‰è¿‡æ¤…å­åä¸‹ï¼Œç‚¹å¼€å·¥å…·ç±»ä»£ç ï¼Œâ€œä½ è¿™å·¥å…·ç±»åˆå¼¹ <code>Toast</code> åˆæ˜¾ç¤º <code>Dialog</code>ï¼Œå¾—å…ˆææ¸…æ¥šä¸åŒåœºæ™¯è¯¥ç”¨å•¥ <code>Context</code>ã€‚â€</p>
<p>ä»–æŒ‡ç€å±å¹•ï¼Œç»™å‡ºå…³é”®åŒºåˆ†ï¼šâ€œåƒ <code>Toast</code> è¿™ç§è½»é‡çº§æç¤ºï¼Œç”¨ <code>Application Context</code> å®Œå…¨æ²¡é—®é¢˜ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¤„ç†çª—å£å…³è”ã€‚â€</p>
<p>â€œä½†åƒ <code>AlertDialog</code>ã€è‡ªå®šä¹‰ä¸»é¢˜çš„ <code>TextView</code> è¿™ç±»å’Œç•Œé¢ä¸»é¢˜å¼ºç›¸å…³çš„ç»„ä»¶ï¼Œå°±å¿…é¡»ç”¨ <code>Activity Context</code>ã€‚â€</p>
<p>è€æ¨å¼ºè°ƒæ ¸å¿ƒåŸå› ï¼šâ€œ<code>Application Context</code> æ²¡æœ‰æ‰¿è½½ç•Œé¢ä¸»é¢˜çš„èƒ½åŠ›ï¼Œè¿™æ‰æ˜¯æ–°æ‰‹å¸¸è¸©çš„å‘ã€‚â€</p>
<p>å°å®‰åœ¨æ—è¾¹è¿è¿ç‚¹å¤´ï¼šâ€œå¯¹å¯¹ï¼Œæˆ‘ä¸Šæ¬¡æµ‹ä¸ªå¼¹çª—åŠŸèƒ½ï¼ŒæŒ‰é’®å­—ä½“å’Œé¢œè‰²å…¨ä¸å¯¹ï¼Œè·Ÿè®¾è®¡å›¾å·®è€è¿œã€‚å¼€å‘æ”¹äº†æ”¹è°ƒç”¨æ–¹å¼ï¼Œæ¢æˆè·Ÿé¡µé¢ç»‘å®šçš„é‚£ç§ï¼Œç«‹é©¬å°±æ­£å¸¸äº†ã€‚â€å¥¹æ’‡æ’‡å˜´åæ§½ï¼Œâ€œè¿™Androidä¹Ÿå¤ªå¥‡æ€ªäº†ï¼ŒåŒæ ·æ˜¯å¼¹ä¸ªä¸œè¥¿ï¼Œæ¢ä¸ªåœ°æ–¹è§¦å‘å°±å‡ºå¹ºè›¾å­ã€‚â€</p>
<p>â€œå—¯ï¼Œè¿™ä¹Ÿæ˜¯å¾ˆå¤šæ–°æ‰‹è¸©å‘çš„åœ°æ–¹ã€‚â€</p>
<p>è€æ¨æ¥è¿‡è¯å¤´ï¼ŒæŠ›å‡ºä¸€ä¸ªéšè—çŸ¥è¯†ç‚¹ï¼šâ€œå°±è¯´ <code>Dialog</code> è¿™ä¸ªç±»ï¼Œæ„é€ å‡½æ•°æ˜æ™ƒæ™ƒå†™ç€è¦ <code>Context</code>ï¼Œä½†ä½ å»ç¿»æºç å°±çŸ¥é“ï¼Œå®ƒè¦æ±‚çš„æ˜¯ <code>@UIContext</code>ã€‚â€</p>
<p>ä»–è¿›ä¸€æ­¥è§£é‡Šï¼šâ€œè¿™ç§ä¸Šä¸‹æ–‡ä¸€èˆ¬åªæœ‰ <code>Activity</code> æ‰æœ‰ï¼Œ<code>Application</code> å’Œ <code>Service</code> æ ¹æœ¬ä¸å…·å¤‡ã€‚â€</p>
<p>ä»–æ¥ç€æ‰“å¼€æ—å“çš„å•ä¾‹ä»£ç ï¼Œç”¨é¼ æ ‡åœˆå‡º <code>private var mContext: Context? = null</code>ï¼šâ€œä½ æŠŠ <code>Activity</code> ä¼ è¿›æ¥ï¼Œå•ä¾‹å°±æˆäº† <code>Activity</code> çš„â€˜å¯„ç”Ÿè™«â€™ã€‚â€</p>
<p>â€œå°±ç®— <code>Activity</code> <code>finish</code> äº†ï¼Œå•ä¾‹è¿˜æ‹¿ç€å®ƒçš„å¼•ç”¨ï¼Œå†…å­˜èƒ½ä¸æ³„æ¼å—ï¼Ÿâ€</p>
<p>è€æ¨é¡¿äº†é¡¿ï¼Œç»™å‡ºæ˜ç¡®è§£å†³æ–¹æ¡ˆï¼šâ€œæ”¹æˆå°±ç”¨ <code>getApplicationContext()</code>ã€‚â€</p>
<p>ä»–ç‰¹æ„å¼ºè°ƒæ³¨æ„äº‹é¡¹ï¼šâ€œä½†è¦è®°æ­»ï¼Œè¿™ä¸ª <code>Context</code> ä¸èƒ½åšUIç›¸å…³çš„æ“ä½œï¼Œæ¯”å¦‚å¼¹å¯¹è¯æ¡†ã€åŠ è½½å¸ƒå±€ï¼Œåˆšå¥½é¿å¼€å®ƒçš„çŸ­æ¿ã€‚â€</p>
<p>æ—å“æç„¶å¤§æ‚Ÿï¼Œèµ¶ç´§ç¿»å›å·¥å…·ç±»ä»£ç ï¼Œæ‰‹æŒ‡åœ¨å±å¹•ä¸Šåˆ’ç€é€»è¾‘ï¼šâ€œæˆ‘æ˜ç™½æ‚¨çš„æ„æ€äº†ï¼<code>Toast</code> ç”¨ <code>Application Context</code> å°±è¡Œï¼Œä½†å·¥å…·ç±»é‡Œè¿˜ç•™ç€å¼¹ <code>AlertDialog</code> çš„åŠŸèƒ½ï¼Œè¿™æ€»ä¸èƒ½è·Ÿ <code>Toast</code> å…±ç”¨ä¸€å¥—ä¸Šä¸‹æ–‡å§ï¼Ÿæ˜¯ä¸æ˜¯å¾—è®©è°ƒç”¨æ–¹æ¯æ¬¡ä¼  <code>Activity Context</code> è¿‡æ¥ï¼Ÿâ€</p>
<p>â€œåˆ†åœºæ™¯å¤„ç†ã€‚â€è€æ¨æ‹¿èµ·ç¬”åœ¨æ—å“çš„ç¬”è®°æœ¬ä¸Šç”»èµ·æ¥ï¼Œç»™å‡ºæ¸…æ™°çš„ä½¿ç”¨å‡†åˆ™ã€‚</p>
<p>é€‚ç”¨ <code>Application Context</code> çš„åœºæ™¯ï¼šâ€œå·¥å…·ç±»é‡Œå­˜ <code>Application Context</code>ï¼Œç”¨äºåˆå§‹åŒ–é€šçŸ¥ç®¡ç†å™¨ã€è®¿é—®å…¨å±€èµ„æºï¼Œè¿˜æœ‰ <code>Toast</code> è¿™ç§é€šç”¨æç¤ºã€‚â€</p>
<p>å¿…é¡»ç”¨ <code>Activity Context</code> çš„åœºæ™¯ï¼šâ€œ<code>AlertDialog</code>ã€å¸¦è‡ªå®šä¹‰ä¸»é¢˜çš„UIç»„ä»¶è¿™äº›å’Œç•Œé¢å¼ºç»‘å®šçš„æ“ä½œï¼Œå¿…é¡»è®©è°ƒç”¨æ–¹ä¼  <code>Activity</code> é‡Œçš„ <code>Context</code>ï¼Œå¹¶ä¸”æ¯æ¬¡ç”¨çš„æ—¶å€™å®æ—¶ä¼ ï¼Œåˆ«å­˜èµ·æ¥ã€‚â€</p>
<p>ä»–é¡¿äº†é¡¿ï¼Œè¡¥å……ä¸€ä¸ª <code>Service</code> ä¸“å±çŸ¥è¯†ç‚¹ï¼šâ€œè¿˜æœ‰ä¸ª <code>Service</code> é‡Œå¸¸è¸©çš„ç¡¬å‘â€”â€”<code>Service</code> æœ¬èº«æ²¡æœ‰ç‹¬ç«‹çš„ä»»åŠ¡æ ˆï¼Œå®ƒè·‘åœ¨åå°ï¼Œä¸å±äºä»»ä½•ç•Œé¢çš„ä»»åŠ¡æ ˆã€‚â€</p>
<p>æ ¸å¿ƒè¦æ±‚ï¼šâ€œæ‰€ä»¥åœ¨ <code>Service</code> é‡Œå¯åŠ¨ <code>Activity</code> æ—¶ï¼Œå¿…é¡»ç»™ <code>Intent</code> åŠ <code>Intent.FLAG_ACTIVITY_NEW_TASK</code>è¿™ä¸ªæ ‡è®°ã€‚â€</p>
<p>æ ‡è®°ä½œç”¨ä¸å¼‚å¸¸åæœï¼šâ€œè¿™ä¸ªæ ‡è®°çš„ä½œç”¨æ˜¯å¸®æ–°å¯åŠ¨çš„ <code>Activity</code> åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ä»»åŠ¡æ ˆæ¥æ‰¿è½½å®ƒï¼Œè¦æ˜¯ä¸åŠ ï¼Œç³»ç»Ÿæ‰¾ä¸åˆ°æ”¾ <code>Activity</code> çš„åœ°æ–¹ï¼Œå°±ä¼šæŠ›å‡º<code>AndroidRuntimeException</code>ã€‚â€</p>
<p>ä»–çœ‹å‘å°å®‰ï¼šâ€œè¿™ä¸ªå°å®‰æµ‹è¯•çš„æ—¶å€™è‚¯å®šç¢°åˆ°è¿‡ã€‚â€</p>
<p>å°å®‰ç«‹åˆ»ç‚¹å¤´æ‘†æ‰‹ï¼Œæœ‰ç‚¹ä¸å¥½æ„æ€åœ°ç¬‘ï¼šâ€œåæ­£å°±æ˜¯è¿™ä¹ˆä¸ªç†å„¿ï¼æˆ‘ä¹‹å‰æµ‹è¿‡ç±»ä¼¼çš„åå°åŠŸèƒ½ï¼Œå¼€å‘æ²¡åŠ ä¸œè¥¿å°±å´©äº†ï¼Œæˆ‘æŠŠå´©çš„æƒ…å†µæŠ¥ä¸Šå»ï¼Œä»–ä»¬æ”¹äº†ä¸ªæ ‡è®°å°±å¥½äº†ã€‚å…·ä½“å•¥åŸç†æˆ‘ä¹Ÿè®°ä¸å¤ªæ¸…ï¼Œä½ ä»¬è¯´çš„è¿™äº› <code>Context</code> ç›¸å…³çš„ï¼Œæˆ‘å¬ç€éƒ½å¤´å¤§ã€‚â€</p>
<p>æ—å“ç«‹åˆ»æŒ‰è¿™ä¸ªæ€è·¯é‡æ„ä»£ç ï¼šå•ä¾‹åˆå§‹åŒ–æ—¶é€šè¿‡ <code>context.applicationContext</code> å­˜å…¨å±€ä¸Šä¸‹æ–‡ï¼Œå¼¹ <code>AlertDialog</code> çš„æ–¹æ³•åˆ™æ–°å¢ <code>Activity Context</code> å‚æ•°ï¼Œè¦æ±‚è°ƒç”¨æ–¹å®æ—¶ä¼ å…¥ã€‚æ”¹å®Œåå°å®‰å½“åœºæµ‹è¯•â€”â€”å‰å°å¼¹é€šçŸ¥ã€å¼¹çª—éƒ½æ­£å¸¸ï¼Œåå°è§¦å‘æ¨é€ä¹Ÿæ²¡å†å‡ºç°å†…å­˜æ³„æ¼ï¼Œ<strong>LeakCanary</strong> çš„è­¦å‘Šå½»åº•æ¶ˆå¤±äº†ã€‚</p>
<p>æ—å“æŠŠè€æ¨çš„è¯è®°åœ¨ç¬”è®°æœ¬ä¸Šï¼Œç‰¹æ„ç”¨çº¢ç¬”æ ‡æ³¨ï¼šâ€œå•ä¾‹å­˜ <code>Application Context</code>ï¼ŒUIæ“ä½œä¼  <code>Activity Context</code>ï¼Œå®æ—¶è°ƒç”¨ä¸ç¼“å­˜â€ã€‚æ¥ä¸‹æ¥çš„å‡ å¤©ï¼Œä»–ä¸ä»…é‡æ„äº†é€šçŸ¥å·¥å…·ç±»ï¼Œè¿˜ä¸»åŠ¨æŠŠç»„é‡Œå‡ ä¸ªè€æ¨¡å—çš„<code>Context</code>ä½¿ç”¨é€»è¾‘éƒ½æ’æŸ¥äº†ä¸€éâ€”â€”ä¹‹å‰æ€»è¢«å¿½ç•¥çš„â€œå†…å­˜æ³„æ¼éšæ‚£â€â€œä¸»é¢˜é”™ä¹±â€ç­‰å°é—®é¢˜ï¼Œå¦‚ä»Šéƒ½æˆäº†ä»–é‡ç‚¹å…³æ³¨çš„å¯¹è±¡ã€‚</p>
<p>æ—å“æ’æŸ¥å®Œæœ€åä¸€ä¸ªè€æ¨¡å—ï¼Œæ‰ç€è„–å­è·Ÿè€æ¨åé¦ˆï¼šâ€œæ¨å·¥ï¼Œæˆ‘å‘ç°å¥½å¤šæ—§ä»£ç é‡Œï¼Œ<code>Activity</code> é‡Œæ—¢ç”¨ <code>this</code> åˆç”¨ <code>baseContext</code>ï¼Œçœ‹å¾—æˆ‘æœ‰ç‚¹ä¹±ï¼Œè¿™ä¿©åˆ°åº•å•¥å…³ç³»å•Šï¼Ÿâ€</p>
<p>è€æ¨æ­£æ”¶æ‹¾ç€æ–‡æ¡£ï¼Œé—»è¨€åœä¸‹åŠ¨ä½œï¼Œå¹²è„†æŠŠæ—å“çš„ä»£ç æœ¬æ‹‰åˆ°è‡ªå·±é¢å‰ï¼šâ€œæ­£å¥½ä½ é—®åˆ°ç‚¹å­ä¸Šäº†ï¼Œå…‰ä¼šç”¨è¿˜ä¸å¤Ÿï¼Œå¾—çŸ¥é“åº•å±‚é€»è¾‘æ‰ä¸å®¹æ˜“è¸©å‘ã€‚â€</p>
<p>ä»–æ‰“å¼€ <code>ContextWrapper</code> çš„æºç ï¼Œç”¨æŒ‡å°–ç‚¹ç€å±å¹•ï¼šâ€œä½ çœ‹ï¼Œ<code>ContextWrapper</code> é‡Œæœ‰ä¸ª <code>mBase</code> å­—æ®µï¼Œè¿™å°±æ˜¯çœŸæ­£çš„ä¸Šä¸‹æ–‡å®ç°ï¼Œä¸ç®¡æ˜¯ <code>Activity</code> è¿˜æ˜¯ <code>Service</code>ï¼Œæœ€ç»ˆéƒ½è¦å§”æ‰˜ç»™å®ƒã€‚<code>Activity</code> çš„ <code>mBase</code> æ˜¯ <code>ContextImpl</code>ï¼Œè¿˜é™„åŠ äº†ä¸»é¢˜ä¿¡æ¯ï¼›ä½† <code>Service</code> çš„ <code>mBase</code> ä¹Ÿæ˜¯ <code>ContextImpl</code>ï¼Œå´æ²¡æœ‰ä¸»é¢˜æ‰©å±•â€”â€”è¿™å°±æ˜¯ä¸ºå•¥ <code>Service</code> ä¸èƒ½å¼¹å¼¹çª—ã€‚â€</p>
<p>æ—å“ç›¯ç€æºç è‹¥æœ‰æ‰€æ€ï¼Œçªç„¶æŒ‡ç€ <code>baseContext</code> ç›¸å…³çš„æ³¨é‡Šé—®ï¼šâ€œé‚£ <code>Activity</code> é‡Œçš„ <code>this</code> å’Œ <code>baseContext</code> å…·ä½“æœ‰å•¥åŒºåˆ«ï¼Ÿâ€</p>
<p>â€œè¿™é—®é¢˜é—®å¾—å¥½ï¼Œæ­£å¥½ç»“åˆä»£ç ç»™ä½ è®²æ˜ç™½ã€‚â€è€æ¨å¹²è„†æ‹‰è¿‡æ—å“çš„å·¥ä½æ¤…ï¼Œæ‰“å¼€ä»–çš„IDEï¼Œè°ƒå‡ºä¸¤æ®µä»£ç â€”â€”æ­£æ˜¯ç»„é‡Œå‰è¾ˆå†™è¿‡çš„ä¸»é¢˜åŒ…è£…ç±»ä»£ç ã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomThemeContextWrapper</span>(base: Context) : ContextWrapper(base) {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getTheme</span><span class="hljs-params">()</span></span>: Resources.Theme {
        <span class="hljs-keyword">val</span> theme = <span class="hljs-keyword">super</span>.getTheme()
        theme.applyStyle(R.style.CustomTheme, <span class="hljs-literal">true</span>) <span class="hljs-comment">// Apply a custom theme</span>
        <span class="hljs-keyword">return</span> theme
    }
}
</code></pre>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">attachBaseContext</span><span class="hljs-params">(newBase: <span class="hljs-type">Context</span>)</span></span> {
        <span class="hljs-keyword">super</span>.attachBaseContext(CustomThemeContextWrapper(newBase))
    }
}
</code></pre>
<p>è€æ¨é€è¡Œè§£æä»£ç ï¼šâ€œä½ å…ˆçœ‹è¿™æ®µ <code>CustomThemeContextWrapper</code>ï¼Œå®ƒç»§æ‰¿äº† <code>ContextWrapper</code>ï¼Œæ ¸å¿ƒæ˜¯é‡å†™ <code>getTheme()</code> æ–¹æ³•ï¼Œç»™ä¸Šä¸‹æ–‡é™„åŠ äº†è‡ªå®šä¹‰ä¸»é¢˜æ ·å¼ã€‚â€</p>
<p>â€œå†çœ‹ <code>MyActivity</code>ï¼Œé€šè¿‡ <code>attachBaseContext</code> æ–¹æ³•ï¼ŒæŠŠ <code>newBase</code> åŒ…è£…æˆäº†è¿™ä¸ªè‡ªå®šä¹‰ä¸Šä¸‹æ–‡ã€‚â€</p>
<p>æ—å“ç›¯ç€ä»£ç é‡Œçš„ <code>newBase</code> å…³é”®è¯ï¼Œçœ‰å¤´æ‹§äº†èµ·æ¥ï¼šâ€œè¿™ä¸ª <code>newBase</code> å°±æ˜¯ <code>baseContext</code> å§ï¼Ÿé‚£ <code>Activity</code> çš„ <code>this</code> æ‹¿åˆ°çš„ä¸Šä¸‹æ–‡ï¼Œæ˜¯ä¸æ˜¯åœ¨å®ƒåŸºç¡€ä¸ŠåŒ…è£…å‡ºæ¥çš„ï¼Ÿâ€</p>
<p>â€œå¯ä»¥è¿™ä¹ˆç†è§£ï¼Œä½† <code>this</code> æ˜¯æ¯” <code>baseContext</code> æ›´å®Œæ•´çš„å­˜åœ¨ã€‚â€è€æ¨æŒ‡ç€ä»£ç è§£é‡Šã€‚</p>
<p>â€œ<code>baseContext</code> æ˜¯ <code>Activity</code> çš„â€˜åº•å±‚ä¸Šä¸‹æ–‡â€™ï¼Œè´Ÿè´£å’Œç³»ç»Ÿåº•å±‚äº¤äº’ï¼Œæ¯”å¦‚è·å–èµ„æºã€å¯åŠ¨æœåŠ¡è¿™äº›åŸºç¡€æ“ä½œï¼Œä½ çœ‹åˆ°çš„ <code>newBase</code> å°±æ˜¯ç³»ç»Ÿç»™ <code>Activity</code> åˆ†é…çš„åˆå§‹ <code>baseContext</code>ã€‚â€</p>
<p>ä»–é¡¿äº†é¡¿ï¼Œæ•²äº†æ•² <code>attachBaseContext</code> æ–¹æ³•ï¼Œè®²è§£ <code>this</code> çš„ä½œç”¨ï¼šâ€œè€Œ <code>Activity</code> çš„ <code>this</code>ï¼Œæ˜¯åœ¨ <code>baseContext</code> çš„åŸºç¡€ä¸Šåšäº†â€˜å¢å¼ºâ€™â€”â€”å®ƒå°è£…äº†ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€ç•Œé¢ä¸»é¢˜ã€çª—å£ç»˜åˆ¶è¿™äº›æ ¸å¿ƒèƒ½åŠ›ã€‚â€</p>
<p>ç»“åˆä»£ç ä¸¾ä¾‹ï¼šâ€œå°±åƒè¿™æ®µä»£ç ï¼Œæˆ‘ä»¬ç»™ <code>baseContext</code> åŒ…äº†ä¸€å±‚è‡ªå®šä¹‰ä¸»é¢˜ï¼Œæœ€ç»ˆ <code>this</code> æ‹¿åˆ°çš„ä¸Šä¸‹æ–‡ï¼Œå°±å¸¦ç€è¿™ä¸ªä¸»é¢˜æ ·å¼äº†ã€‚â€</p>
<p>ä¸ºäº†è®©æ—å“æ›´ç›´è§‚ï¼Œè€æ¨ä¸¾äº†ä¸ªå¯¹æ¯”ä¾‹å­ã€‚</p>
<p><code>this</code> çš„ä¼˜åŠ¿ï¼šâ€œä½ ç”¨ <code>this</code> å»åˆ›å»º <code>AlertDialog</code>ï¼Œå®ƒèƒ½è‡ªåŠ¨é€‚é… <code>Activity</code> çš„ä¸»é¢˜ï¼Œå› ä¸º <code>this</code> é‡ŒåŒ…å«äº†ä¸»é¢˜ä¿¡æ¯ã€‚â€</p>
<p><code>baseContext</code> çš„å±€é™ï¼šâ€œä½†ä½ è¦æ˜¯ç”¨ <code>baseContext</code> å»åˆ›å»ºï¼Œå®ƒåªä¼šç”¨ç³»ç»Ÿé»˜è®¤ä¸»é¢˜â€”â€”ç”šè‡³åœ¨æŸäº›ç‰ˆæœ¬é‡Œä¼šå´©æºƒï¼Œå› ä¸º <code>baseContext</code> æ²¡æœ‰ <code>Activity</code> é‚£ç§çª—å£å…³è”èƒ½åŠ›ã€‚â€</p>
<p>â€œé‚£ä»€ä¹ˆæ—¶å€™è¯¥ç”¨ <code>baseContext</code> å•Šï¼Ÿâ€æ—å“è¿½é—®ï¼Œé¡ºæ‰‹æŠŠè€æ¨çš„è¯è®°åœ¨ç¬”è®°æœ¬ä¸Šï¼Œç‰¹æ„ç•™å‡ºè¡¥å……æ¡ˆä¾‹çš„ç©ºç™½ã€‚</p>
<p>â€œç”¨åœ¨ä¸éœ€è¦ç•Œé¢ä¸»é¢˜å’Œç”Ÿå‘½å‘¨æœŸçš„åœºæ™¯ã€‚â€è€æ¨è¡¥å……é“ã€‚</p>
<p>ä»–ç»™å‡ºä¸€å¥æ€»ç»“ï¼Œè¿˜ä¸¾äº†ä¸ªå…·ä½“ä¾‹å­ï¼šâ€œç®€å•è¯´ï¼Œ<code>this</code> æ˜¯â€˜å…¨èƒ½é€‰æ‰‹â€™ï¼Œå¸¦ç•Œé¢å±æ€§ï¼›<code>baseContext</code> æ˜¯â€˜åŸºç¡€å·¥å…·äººâ€™ï¼Œåªå¹²åº•å±‚æ´»ã€‚æ¯”å¦‚ä½ åœ¨ <code>Activity</code> é‡Œæ³¨å†Œé™æ€å¹¿æ’­ï¼Œç”¨ <code>baseContext</code> å°±å¤Ÿäº†â€</p>
<p>å°å®‰å‡‘è¿‡æ¥çœ‹çƒ­é—¹ï¼Œå¬å®Œæç„¶å¤§æ‚Ÿï¼šâ€œæ€ªä¸å¾—æˆ‘ä¸Šæ¬¡æµ‹ä¸€ä¸ªè‡ªå®šä¹‰æŒ‰é’®ï¼Œå¼€å‘çš„æ ·å¼æ€»å‡ºé—®é¢˜ï¼Œæ¢ä¸ªè°ƒç”¨æ–¹å¼å°±å¥½äº†ï¼ŒåŸæ¥é—®é¢˜åœ¨è¿™ï¼â€</p>
<p>è€æ¨ç¬‘ç€çœ‹å‘å°å®‰ï¼Œåˆè½¬å¤´å¯¹æ—å“è¯´ï¼šâ€œå…¶å®æµ‹è¯•å’Œå¼€å‘æ’æŸ¥é—®é¢˜çš„æ€è·¯æ˜¯ç›¸é€šçš„ï¼Œéƒ½èƒ½ä»åœºæ™¯åæ¨ã€‚â€</p>
<p>æ ¸å¿ƒæ’æŸ¥åœºæ™¯ï¼šâ€œä½ å°±ç›¯ç€é‚£äº›å…³é”®åœºæ™¯æµ‹ï¼šæ¯”å¦‚å¯åŠ¨æ–°é¡µé¢ã€å¼¹å¼¹çª—çš„æ ·å¼ï¼Œåå°æ“ä½œç­‰ç­‰ï¼Œå¦‚æœå‡ºé—®é¢˜ï¼Œå¤§æ¦‚ç‡æ˜¯ <code>Context</code> ç”¨é”™äº†ã€‚â€</p>
<p>ä»–è¡¥å……æµ‹è¯•è¦ç‚¹ï¼šâ€œè¿˜æœ‰é‚£äº›å…¨å±€éƒ½èƒ½ç”¨çš„å·¥å…·ï¼Œè¦æ˜¯åœ¨åå°ç”¨å°±å‡ºé—®é¢˜ï¼Œä¹Ÿå¯èƒ½æ˜¯è¿™ä¸ªåŸå› ã€‚ä½ å¤šæ¢å‡ ç§æœºå‹ã€å¤šæµ‹å‡ ä¸ªå‰åå°åˆ‡æ¢çš„åœºæ™¯ï¼Œé—®é¢˜è‡ªç„¶å°±éœ²å‡ºæ¥äº†ã€‚â€</p>
<p>å¸¦ç€è¿™äº›æ”¶è·ï¼Œæ—å“åœ¨æ¥ä¸‹æ¥çš„ä¸€å‘¨é‡Œï¼ŒæŠŠé¡¹ç›®é‡Œæ‰€æœ‰æ¶‰åŠ <code>Context</code> çš„åœ°æ–¹éƒ½ç³»ç»Ÿæ¢³ç†äº†ä¸€éã€‚</p>
<p>ä»–ç”šè‡³æ€»ç»“å‡ºä¸‰æ¡è§„èŒƒè®°åœ¨å›¢é˜Ÿå…±äº«æ–‡æ¡£é‡Œï¼šâ€œ1. å…¨å±€å·¥å…·ç±»å­˜ <code>Application Context</code>ï¼›2. ç•Œé¢ç›¸å…³æ“ä½œå¿…é¡»ä¼  <code>Activity Context</code> ä¸”å®æ—¶è°ƒç”¨ï¼›3. åå°ç¨‹åºç¦ç”¨ç•Œé¢ç±» <code>Context</code>ã€‚â€</p>
<p>å°å®‰åˆ™å‘æŒ¥æµ‹è¯•ä¼˜åŠ¿ï¼Œè®¾è®¡äº†ä¸€å¥—â€œå…¨åœºæ™¯è¦†ç›–ç”¨ä¾‹â€ï¼Œä»å‰å°æ“ä½œã€åå°é©»ç•™ã€è¿›ç¨‹é‡å¯åˆ°ä½ç”µé‡æ¨¡å¼ï¼Œåå¤æµ‹è¯•ï¼Œç¡®ä¿ <code>Context</code> ç›¸å…³çš„å´©æºƒå’Œæ³„æ¼é—®é¢˜å½»åº•ç»è¿¹ã€‚</p>
<p>å‘¨äº”å‚æ™šçš„ç ”å‘åŒºæ¸æ¸å®‰é™ï¼Œå·¥ä½ç¯ä¸€ç›ç›ç†„ç­ï¼Œåªå‰©æ—å“ã€è€æ¨å’Œå°å®‰çš„åº§ä½è¿˜äº®ç€ã€‚å°å®‰ä¸€è¾¹æ”¶æ‹¾æµ‹è¯•æœºä¸€è¾¹éšå£è¯´é“ï¼šâ€œæ—å“ï¼Œå¼ ç»„é•¿ä»Šå¤©Reviewä½ æäº¤çš„ä»£ç ï¼Œè·Ÿæˆ‘è¯´â€˜è¿™å°å­ç°åœ¨å†™çš„ä¸œè¥¿è¶Šæ¥è¶Šç¨³äº†â€™ï¼Œè¿˜è¿½é—®æ˜¯è°å¸¦çš„ä½ å‘¢ã€‚â€</p>
<p>æ—å“åˆšæ”¹å®Œæœ€åä¸€è¡Œæ³¨é‡Šï¼Œé—»è¨€æŠ¬å¤´çœ‹å‘æ­£åœ¨æ•´ç†æ–‡æ¡£çš„è€æ¨ï¼Œè„¸ä¸Šå¸¦ç€ç‚¹ä¸å¥½æ„æ€çš„ç¬‘ï¼Œä»æŠ½å±‰é‡Œæ‘¸å‡ºä¸€ç“¶å¯ä¹é€’è¿‡å»ï¼šâ€œå…¨é æ¨å·¥æŒ‡ç‚¹ï¼Œä¸ç„¶æˆ‘ç°åœ¨è¿˜åœ¨ <code>Context</code> çš„è¿·é›¾é‡Œæ‰“è½¬å‘¢ã€‚â€</p>
<p>è€æ¨æ²¡ç›´æ¥å–ï¼Œé¡ºæ‰‹æŠŠå¯ä¹å¡è¿›äº†å£è¢‹ï¼šâ€œæˆ‘ä¸çˆ±å–ç”œçš„ã€‚â€</p>
<p>ä»–ç«¯èµ·æªç“·æ¯ç»§ç»­å–ï¼Œè¤è‰²æ¶²ä½“åœ¨æ¯å£ä¸Šç•™ä¸‹æ·¡æ·¡çš„æ¸ç—•ã€‚</p>
<p>â€œä¸æ˜¯æˆ‘æŒ‡ç‚¹å¾—å¥½ï¼Œæ˜¯ä½ è‚¯é’»ã€‚â€è€æ¨æ”¾ä¸‹æ¯å­ï¼Œæ¯åº•ä¸æ¡Œé¢ç¢°æ’å‘å‡ºè½»å“ï¼Œä¸€è‚¡æ··æ‚ç€ç„¦é¦™å’ŒèŒ¶é¦™çš„å‘³é“é£˜äº†è¿‡æ¥ï¼Œâ€œæŠ€æœ¯è¿™ä¸œè¥¿ï¼Œå…‰çœ‹ç†è®ºæ²¡ç”¨ï¼Œå¾—è‡ªå·±è¯•é”™æ‰çŸ¥é“å•¥é€‚åˆè‡ªå·±ã€‚â€</p>
<p>å°å®‰æ­£æ”¶æ‹¾åˆ°ä¸€åŠï¼ŒæŠ½ç€é¼»å­å‡‘è¿‡æ¥ï¼šâ€œæ¨å·¥ï¼Œä½ è¿™æ¯å­é‡Œæ³¡çš„å•¥å‘€ï¼Ÿé—»ç€ä¸åƒçº¯èŒ¶ã€‚â€</p>
<p>æ—å“ä¹Ÿå¥½å¥‡åœ°ç¥äº†çœ¼æ¯å­é‡Œæ·±è¤è‰²çš„æ¶²ä½“ï¼Œè´¨åœ°æ¯”èŒ¶æ°´æµ“ç¨ äº›ã€‚</p>
<p>è€æ¨æœ‰ç‚¹ä¸å¥½æ„æ€åœ°æŒ æŒ å¤´ï¼šâ€œå‰å‡ å¤©èµ¶ç‰ˆæœ¬ç†¬å¤§å¤œï¼Œå›°å¾—æ…Œå°±çå…‘çš„â€”â€”ç»¿èŒ¶åŠ å’–å•¡ï¼Œæç¥åŠ²å„¿ç¿»å€ã€‚â€</p>
<p>â€œå•Šï¼ŸèŒ¶å’Œå’–å•¡æ··ç€å–ï¼Ÿâ€å°å®‰çœ¼ç›çªåœ†äº†ï¼Œâ€œé‚£æ˜¯ä»€ä¹ˆå¥‡æ€ªå‘³é“ï¼Ÿåˆè‹¦åˆæ¶©å—ï¼Ÿâ€</p>
<p>â€œè¿˜è¡Œï¼Œå–æƒ¯äº†å°±å¥½ï¼Œæ¯”çº¯å’–å•¡å°‘ç‚¹é…¸å‘³å„¿ï¼Œæ¯”æµ“èŒ¶å¤šè‚¡åŠ²å„¿ã€‚â€è€æ¨ç¬‘ç€æ‘†æ‰‹ï¼ŒæŠŠè¯é¢˜æ‹‰å›æŠ€æœ¯ã€‚</p>
<p>ä»–ç”¨è¿™ä¸ªä¾‹å­æ‰“æ¯”æ–¹ï¼šâ€œå°±åƒ <code>Context</code> è¿™çŸ¥è¯†ç‚¹ï¼ŒèƒŒä¸€ä¸‡éç†è®ºä¸å¦‚è¸©ä¸€æ¬¡å‘ï¼Œè¸©ä¸€æ¬¡å‘ä¸å¦‚è§£å†³ä¸€æ¬¡é—®é¢˜ã€‚â€</p>
<p>â€œå°±åƒ <code>Context</code> è¿™çŸ¥è¯†ç‚¹ï¼ŒèƒŒä¸€ä¸‡éç†è®ºä¸å¦‚è¸©ä¸€æ¬¡å‘ï¼Œè¸©ä¸€æ¬¡å‘ä¸å¦‚è§£å†³ä¸€æ¬¡é—®é¢˜ã€‚â€</p>
<p>ä»–è¯é”‹ä¸€è½¬è¯´èµ·æ­£äº‹ï¼Œçœ¼ç¥é‡Œå¸¦ç€ç‚¹æœŸè®¸ï¼šâ€œå¯¹äº†ï¼Œä¸‹å‘¨ç»„é‡Œä¼šæ¥å‡ ä¸ªå®ä¹ ç”Ÿï¼ŒåŸºç¡€æœ‰ç‚¹è–„å¼±ï¼Œæˆ‘è·Ÿå¼ ç»„é•¿åˆè®¡è¿‡ï¼Œè®©ä½ å¸¦å¸¦å®ƒä»¬ã€‚ä½ è¶è¿™ä¸¤å¤©æŠŠAndroidå››å¤§ç»„ä»¶çš„çŸ¥è¯†ç‚¹è¿‡ä¸€éï¼Œå°¤å…¶æ˜¯ <code>Activity</code> å’Œ <code>Service</code> çš„ç”Ÿå‘½å‘¨æœŸâ€”â€”æ­£å¥½æŠŠä½ è¿™æ®µæ—¶é—´è¸©çš„å‘ï¼Œéƒ½è½¬åŒ–æˆç»éªŒæ•™ç»™ä»–ä»¬ã€‚â€</p>
<p>æ—å“çœ¼ç›ä¸€äº®ï¼Œç”¨åŠ›ç‚¹å¤´ï¼Œæ‰‹æŒ‡æ— æ„è¯†åœ°æ‘©æŒ²ç€æ‰‹æœºé‡Œçš„ <code>Context</code> ç¬”è®°â€”â€”ä»å‰è¿ <code>Context</code> ç±»å‹éƒ½åˆ†ä¸æ¸…çš„è‡ªå·±ï¼Œå¦‚ä»Šå±…ç„¶èƒ½æŒ‡å¯¼æ–°äººäº†ï¼Œè¿™ç§æˆé•¿çš„è¸å®æ„Ÿæ ¼å¤–çœŸåˆ‡ã€‚</p>
<p>ä»–ä½å¤´çœ‹å‘æ‰‹æœºé‡Œåˆšæ•´ç†çš„ <code>Context</code> ç¬”è®°ï¼Œä¸Šé¢è€æ¨çš„æ‰¹æ³¨æ ¼å¤–é†’ç›®ï¼šâ€œ<code>Context</code> æ˜¯åº”ç”¨çš„æ ¹ï¼Œç”¨å¯¹äº†æ˜¯æ¡¥æ¢ï¼Œç”¨é”™äº†æ˜¯é™·é˜±ã€‚â€</p>
<p>è¥¿äºŒæ——çš„ç ”å‘åŒºç¯å…‰é€è¿‡ç»ç’ƒçª—æ´’ä¸‹æ¥ï¼Œç…§äº®äº†ç¬”è®°ä¸Šçš„å­—è¿¹ï¼Œä¹Ÿç…§äº®äº†ä»–ä»â€œè¸©å‘è€…â€åˆ°â€œå¼•è·¯äººâ€çš„é€†è¢­æ–¹å‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[8 ä¸ªä½ å¯èƒ½å¿½ç•¥äº†çš„ Flutter å°éƒ¨ä»¶ï¼ˆå››ï¼‰]]></title>    <link>https://juejin.cn/post/7581350888789114916</link>    <guid>https://juejin.cn/post/7581350888789114916</guid>    <pubDate>2025-12-09T00:47:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581350888789114916" data-draft-id="7578314349515128883" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="8 ä¸ªä½ å¯èƒ½å¿½ç•¥äº†çš„ Flutter å°éƒ¨ä»¶ï¼ˆå››ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-09T00:47:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JarvanMo"/> <meta itemprop="url" content="https://juejin.cn/user/2348212565845704"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            8 ä¸ªä½ å¯èƒ½å¿½ç•¥äº†çš„ Flutter å°éƒ¨ä»¶ï¼ˆå››ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2348212565845704/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JarvanMo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T00:47:48.000Z" title="Tue Dec 09 2025 00:47:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ“š BlockSemantics</h2>
<p><strong>BlockSemantics</strong> æ§ä»¶æ˜¯ä¸€ä¸ª<strong>å¯è®¿é—®æ€§æ§åˆ¶å·¥å…·</strong>ï¼Œå®ƒçš„ä½œç”¨æ˜¯<strong>é˜»æ­¢å±å¹•é˜…è¯»å™¨è®¿é—®å…¶å­æ§ä»¶æ ‘ä¸­çš„å•ä¸ªæ§ä»¶</strong>ã€‚</p>
<p>ä½ å¯ä»¥å°†å…¶æƒ³è±¡æˆï¼šç»™ä¸€ç»„æ§ä»¶è´´ä¸Šä¸€ä¸ª<strong>è¯·å‹¿æ‰“æ‰°</strong>çš„æ ‡å¿—ã€‚å±å¹•é˜…è¯»å™¨çœ‹åˆ°è¿™ä¸ªæ ‡å¿—åï¼Œå°±ä¼š<strong>å¿½ç•¥æ ‡å¿—åé¢çš„æ‰€æœ‰å†…å®¹</strong>ï¼Œä¸ä¼šå»è¯»å–é‚£äº›è¢«å®ƒåŒ…è£¹ä½çš„å•ä¸ªæ§ä»¶ã€‚</p>
<p>//video</p>
<p>è¿™ä¸ªæ§ä»¶<strong>ç‰¹åˆ«æœ‰ç”¨</strong>ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†ä»¥ä¸‹æƒ…å†µæ—¶ï¼š</p>
<p>æ‚¨æœ‰ä¸€äº›æ§ä»¶åœ¨è§†è§‰ä¸Šä½äº<strong>å…¶ä»–æ§ä»¶çš„åæ–¹</strong>ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ª<strong>æ¨¡æ€å¯¹è¯æ¡†å åŠ å±‚</strong> <code>modal dialog overlay</code>ï¼‰ï¼Œä½†å®ƒä»¬ä»ç„¶æ˜¯æ§ä»¶æ ‘çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>å¦‚æœæ²¡æœ‰ <strong>BlockSemantics</strong>ï¼Œå±å¹•é˜…è¯»å™¨å¯èƒ½ä¼šè¯»å–é‚£äº›å¯¹ç”¨æˆ·<strong>å½“å‰ä¸ç›¸å…³</strong>çš„æ§ä»¶ä¿¡æ¯ï¼Œä»è€Œæä¾›<strong>ä»¤äººå›°æƒ‘æˆ–å¤šä½™</strong>çš„ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-dart" lang="dart">BlockSemantics(
  child: Container(
    child: Column(
      children: [
        Text(<span class="hljs-string">'This text will be ignored by screen readers'</span>),
        ElevatedButton(
          onPressed: () {},
          child: Text(<span class="hljs-string">'This button will also be ignored'</span>),
        ),
      ],
    ),
  ),
)
</code></pre>
<h2 data-id="heading-1">BlockSemantics çš„åº•å±‚å·¥ä½œåŸç†</h2>
<p><strong>BlockSemantics</strong> æ§ä»¶çš„å·¥ä½œåŸç†æ˜¯<strong>åˆ›å»ºä¸€ä¸ªè¯­ä¹‰è¾¹ç•Œ</strong>ï¼Œ<strong>é˜»æ­¢</strong>è¯­ä¹‰ä¿¡æ¯ä»å…¶å­æ§ä»¶<strong>ä¼ æ’­</strong>å‡ºå»ã€‚å®ƒæœ‰æ•ˆåœ°åˆ›å»ºäº†ä¸€ä¸ªè¯­ä¹‰ä¸Šçš„â€œé»‘æ´â€ï¼Œå¯è®¿é—®æ€§æœåŠ¡<strong>æ— æ³•ç©¿é€</strong>è¿™ä¸ªé»‘æ´æ¥è¯»å–å•ä¸ªå­æ§ä»¶ã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BlockSemantics</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">SingleChildRenderObjectWidget</span> </span>{
  <span class="hljs-keyword">const</span> BlockSemantics({<span class="hljs-keyword">super</span>.key, <span class="hljs-keyword">this</span>.blocking = <span class="hljs-keyword">true</span>, <span class="hljs-keyword">super</span>.child});

  <span class="hljs-keyword">final</span> <span class="hljs-built_in">bool</span> blocking;

  <span class="hljs-meta">@override</span>
  RenderBlockSemantics createRenderObject(BuildContext context) =&gt;
      RenderBlockSemantics(blocking: blocking);

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> updateRenderObject(BuildContext context, RenderBlockSemantics renderObject) {
    renderObject.blocking = blocking;
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> debugFillProperties(DiagnosticPropertiesBuilder properties) {
    <span class="hljs-comment">// ...</span>
  }
}
</code></pre>
<p>æ¸²æŸ“å¯¹è±¡ <strong><code>RenderBlockSemantics</code></strong> <strong>é‡å†™</strong>äº†è¯­ä¹‰æ³¨è§£æ–¹æ³•ï¼Œä»¥<strong>é˜»æ­¢å­æ§ä»¶çš„è¯­ä¹‰</strong>è¢«åŒ…å«åœ¨<strong>å¯è®¿é—®æ€§æ ‘</strong>ä¸­ã€‚</p>
<hr/>
<h2 data-id="heading-2">BlockSemantics å®ç”¨å®Œæ•´ç¤ºä¾‹</h2>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ª<strong>å®Œæ•´ç¤ºä¾‹</strong>ï¼Œå±•ç¤ºäº† <strong>BlockSemantics</strong> åœ¨<strong>æ¨¡æ€å¯¹è¯æ¡†</strong>åœºæ™¯ä¸­çš„åº”ç”¨ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;

<span class="hljs-keyword">void</span> main() {
  runApp(<span class="hljs-keyword">const</span> MyApp());
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">const</span> MyApp({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> MaterialApp(
      debugShowCheckedModeBanner: <span class="hljs-keyword">false</span>,
      home: BlockSemanticsDemo(),
    );
  }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BlockSemanticsDemo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>{
  <span class="hljs-keyword">const</span> BlockSemanticsDemo({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  State&lt;BlockSemanticsDemo&gt; createState() =&gt; _BlockSemanticsDemoState();
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_BlockSemanticsDemoState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">BlockSemanticsDemo</span>&gt; </span>{
  <span class="hljs-built_in">bool</span> _showDialog = <span class="hljs-keyword">false</span>;
  <span class="hljs-built_in">bool</span> _useBlockSemantics = <span class="hljs-keyword">true</span>;

  <span class="hljs-keyword">void</span> _toggleDialog() {
    setState(() {
      _showDialog = !_showDialog;
    });
  }

  <span class="hljs-keyword">void</span> _toggleBlockSemantics() {
    setState(() {
      _useBlockSemantics = !_useBlockSemantics;
    });
  }

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> Scaffold(
      appBar: AppBar(
        title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'BlockSemantics Demo'</span>),
      ),
      body: Stack(
        children: [
          <span class="hljs-comment">// Background content</span>
          _buildBackgroundContent(),

          <span class="hljs-comment">// Modal dialog overlay</span>
          <span class="hljs-keyword">if</span> (_showDialog) _buildModalOverlay(),
        ],
      ),
    );
  }

  Widget _buildBackgroundContent() {
    Widget backgroundContent = Padding(
      padding: <span class="hljs-keyword">const</span> EdgeInsets.all(<span class="hljs-number">16.0</span>),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.stretch,
        children: [
          <span class="hljs-keyword">const</span> Card(
            child: Padding(
              padding: EdgeInsets.all(<span class="hljs-number">16.0</span>),
              child: Column(
                crossAxisAlignment: CrossAxisAlignment.start,
                children: [
                  Text(
                    <span class="hljs-string">'Background Content'</span>,
                    style: TextStyle(fontSize: <span class="hljs-number">18</span>, fontWeight: FontWeight.bold),
                  ),
                  SizedBox(height: <span class="hljs-number">8</span>),
                  Text(
                    <span class="hljs-string">'This content should be ignored by screen readers when the dialog is open.'</span>,
                  ),
                ],
              ),
            ),
          ),
          <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">16</span>),
          SwitchListTile(
            title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'Use BlockSemantics'</span>),
            subtitle: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'Toggle to see accessibility difference'</span>),
            value: _useBlockSemantics,
            onChanged: (value) =&gt; _toggleBlockSemantics(),
          ),
          <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">16</span>),
          ElevatedButton(
            onPressed: _toggleDialog,
            child: Text(_showDialog ? <span class="hljs-string">'Hide Dialog'</span> : <span class="hljs-string">'Show Dialog'</span>),
          ),
          <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">20</span>),
          <span class="hljs-keyword">const</span> Text(
            <span class="hljs-string">'Additional Background Elements'</span>,
            style: TextStyle(fontSize: <span class="hljs-number">16</span>, fontWeight: FontWeight.bold),
          ),
          <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">8</span>),
          ElevatedButton(
            onPressed: () {},
            child: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'Background Action 1'</span>),
          ),
          <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">8</span>),
          ElevatedButton(
            onPressed: () {},
            child: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'Background Action 2'</span>),
          ),
          <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">8</span>),
          <span class="hljs-keyword">const</span> TextField(
            decoration: InputDecoration(
              labelText: <span class="hljs-string">'Background Input'</span>,
              hintText: <span class="hljs-string">'This should be blocked when dialog is open'</span>,
            ),
          ),
        ],
      ),
    );

    <span class="hljs-comment">// Apply BlockSemantics when dialog is shown and option is enabled</span>
    <span class="hljs-keyword">if</span> (_showDialog &amp;&amp; _useBlockSemantics) {
      <span class="hljs-keyword">return</span> BlockSemantics(child: backgroundContent);
    }
    <span class="hljs-keyword">return</span> backgroundContent;
  }

  Widget _buildModalOverlay() {
    <span class="hljs-keyword">return</span> Container(
      color: Colors.black54,
      child: Center(
        child: Card(
          margin: <span class="hljs-keyword">const</span> EdgeInsets.all(<span class="hljs-number">32.0</span>),
          child: Padding(
            padding: <span class="hljs-keyword">const</span> EdgeInsets.all(<span class="hljs-number">24.0</span>),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                <span class="hljs-keyword">const</span> Text(
                  <span class="hljs-string">'Modal Dialog'</span>,
                  style: TextStyle(fontSize: <span class="hljs-number">20</span>, fontWeight: FontWeight.bold),
                ),
                <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">16</span>),
                <span class="hljs-keyword">const</span> Text(
                  <span class="hljs-string">'This dialog should be the focus of screen readers. '</span>
                  <span class="hljs-string">'Background content should be blocked from accessibility.'</span>,
                ),
                <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">20</span>),
                Row(
                  mainAxisAlignment: MainAxisAlignment.spaceEvenly,
                  children: [
                    ElevatedButton(
                      onPressed: _toggleDialog,
                      child: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'Cancel'</span>),
                    ),
                    ElevatedButton(
                      onPressed: _toggleDialog,
                      child: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'Confirm'</span>),
                    ),
                  ],
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }
}
</code></pre>
<p><strong>BlockSemantics</strong> å¯¹äºåˆ›å»º<strong>å¯è®¿é—®çš„æ¨¡æ€ä½“éªŒ</strong>è‡³å…³é‡è¦ï¼Œå®ƒèƒ½ç¡®ä¿å±å¹•é˜…è¯»å™¨ç”¨æˆ·<strong>åªå…³æ³¨</strong>ç›¸å…³å†…å®¹ï¼Œè€Œ<strong>ä¸ä¼šè¢«èƒŒæ™¯å…ƒç´ åˆ†æ•£æ³¨æ„åŠ›</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-3">BeveledRectangleBorder</h2>
<p><strong>BeveledRectangleBorder</strong> æ˜¯ä¸€ä¸ª<strong>å½¢çŠ¶ç±»</strong>ï¼Œå®ƒåˆ›å»ºçš„çŸ©å½¢å½¢çŠ¶çš„è§’æ˜¯<strong>æ–œåˆ‡çš„ã€â€œè¢«åˆ‡æ‰çš„â€</strong> ï¼Œè€Œä¸æ˜¯é€šå¸¸çš„åœ†è§’æˆ–ç›´è§’ã€‚</p>
<p>è¿™èµ‹äºˆäº†æ§ä»¶ä¸€ç§<strong>ç‹¬ç‰¹çš„ã€æ£±è§’åˆ†æ˜çš„å¤–è§‚</strong>ï¼Œéå¸¸é€‚åˆåˆ›å»ºå…·æœ‰<strong>å‡ ä½•ã€åˆ‡å£é£æ ¼</strong>çš„ç‹¬ç‰¹è®¾è®¡å…ƒç´ ã€‚</p>
<p>//video</p>
<p>ä½ é€šå¸¸ä¼šé€šè¿‡æŒ‰é’®ã€å¡ç‰‡å’Œå®¹å™¨ç­‰æ§ä»¶çš„ <code>shape</code> å±æ€§æ¥ä½¿ç”¨ <strong>BeveledRectangleBorder</strong>ï¼Œä»è€Œå®ç°é‚£ç§<strong>ç‹¬ç‰¹çš„æ–œåˆ‡ï¼ˆbeveledï¼‰å¤–è§‚</strong>ã€‚</p>
<pre><code class="hljs language-dart" lang="dart">Container(
  decoration: ShapeDecoration(
    color: Colors.blue,
    shape: BeveledRectangleBorder(
      borderRadius: BorderRadius.circular(<span class="hljs-number">16</span>),
      side: BorderSide(color: Colors.purple, width: <span class="hljs-number">2</span>),
    ),
  ),
  child: Text(<span class="hljs-string">'Beveled Container'</span>),
)
</code></pre>
<h2 data-id="heading-4">BeveledRectangleBorder çš„ä¸¤ä¸ªå…³é”®å±æ€§</h2>
<p>æœ‰ä¸¤ä¸ª<strong>å…³é”®å±æ€§</strong>ï¼š</p>
<ul>
<li><strong><code>borderRadius</code></strong>: æ¥å—ä¸€ä¸ª <strong><code>BorderRadius</code> å€¼</strong>ï¼Œç”¨äºå†³å®š<strong>æ–œåˆ‡ï¼ˆbevelï¼‰ä»è§’è½å¼€å§‹çš„è·ç¦»</strong>ã€‚<strong>åŠå¾„å€¼è¶Šå¤§</strong>ï¼Œåˆ›å»ºçš„åˆ‡è§’å°±<strong>è¶Šå¼•äººæ³¨ç›®</strong>ï¼ˆæ›´æˆå‰§åŒ–ï¼‰ã€‚</li>
<li><strong><code>side</code></strong>: å…è®¸æ‚¨å®šä¹‰å½¢çŠ¶å‘¨å›´çš„<strong>æè¾¹ï¼ˆborder strokeï¼‰</strong> ï¼ŒåŒ…æ‹¬é¢œè‰²ã€å®½åº¦å’Œæ ·å¼ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-5">BeveledRectangleBorder çš„åº•å±‚å·¥ä½œåŸç†</h2>
<p><strong>BeveledRectangleBorder</strong> ç»§æ‰¿è‡ª <strong><code>OutlinedBorder</code></strong>ï¼Œå¹¶<strong>å®ç°</strong>äº† <strong><code>ShapeBorder</code> æ¥å£</strong>ã€‚</p>
<p>ä»¥ä¸‹æ˜¯æ¥è‡ª GitHub ä¸Šçš„ Flutter ä»“åº“çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fblob%2Fmaster%2Fpackages%2Fflutter%2Flib%2Fsrc%2Fpainting%2Fbeveled_rectangle_border.dart" target="_blank" title="https://github.com/flutter/flutter/blob/master/packages/flutter/lib/src/painting/beveled_rectangle_border.dart" ref="nofollow noopener noreferrer">å®Œæ•´æºä»£ç </a>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// ...</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BeveledRectangleBorder</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">OutlinedBorder</span> </span>{
  <span class="hljs-keyword">final</span> BorderRadiusGeometry borderRadius;

  ShapeBorder scale(t) =&gt; BeveledRectangleBorder(
    side: side.scale(t), borderRadius: borderRadius * t);

  ShapeBorder? lerpFrom/To(other, t) =&gt; sameType
    ? BeveledRectangleBorder(
        side: BorderSide.lerp(...),
        borderRadius: BorderRadiusGeometry.lerp(...))
    : <span class="hljs-keyword">super</span>.lerpFrom/To(...);

  BeveledRectangleBorder copyWith({side?, borderRadius?}) =&gt; ...;

  Path _getPath(RRect r) {
    <span class="hljs-comment">// Clamp radii to &gt;= 0</span>
    <span class="hljs-comment">// Build 8 vertices by â€œcuttingâ€ each corner toward the side center</span>
    <span class="hljs-keyword">final</span> verts = &lt;Offset&gt;[
      <span class="hljs-comment">// TL edge points toward left &amp; top centers</span>
      <span class="hljs-comment">// TR, BR, BL similarlyâ€¦</span>
    ];
    <span class="hljs-keyword">return</span> Path()..addPolygon(verts, <span class="hljs-keyword">true</span>);
  }

  Path getOuterPath(Rect rect, {TextDirection? td}) =&gt;
    _getPath(borderRadius.resolve(td).toRRect(rect));

  Path getInnerPath(Rect rect, {TextDirection? td}) =&gt;
    _getPath(borderRadius.resolve(td).toRRect(rect).deflate(side.strokeInset));

  <span class="hljs-keyword">void</span> paint(Canvas c, Rect rect, {TextDirection? td}) {
    <span class="hljs-keyword">if</span> (side.style == BorderStyle.solid &amp;&amp; !rect.isEmpty) {
      <span class="hljs-keyword">final</span> RRect r = borderRadius.resolve(td).toRRect(rect);
      <span class="hljs-keyword">final</span> RRect inflated = r.inflate(side.strokeOutset);
      <span class="hljs-keyword">final</span> Path stroke = _getPath(inflated)
        ..addPath(getInnerPath(rect, textDirection: td), Offset.zero);
      c.drawPath(stroke, side.toPaint());
    }
  }
}
<span class="hljs-comment">// ...</span>
</code></pre>
<p>è¿™ä¸ªè¾¹æ¡†ï¼ˆ<code>BeveledRectangleBorder</code>ï¼‰ç±»ä¼¼äº <strong><code>RoundedRectangleBorder</code></strong>ï¼Œä½†ä¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒçš„<strong>è§’æ˜¯ç›´åˆ‡ï¼ˆstraight cutsï¼‰</strong> ï¼Œè€Œä¸æ˜¯åœ†å¼§ã€‚</p>
<ul>
<li>
<p><strong><code>_getPath</code> æ–¹æ³•ï¼š</strong> å®ƒè®¡ç®—å‡ºä¸€ä¸ª<strong>å…«è¾¹å½¢ï¼ˆoctagonï¼‰</strong> ï¼šå³<strong>8ä¸ªé¡¶ç‚¹</strong>ã€‚</p>
<ul>
<li>è¿™äº›é¡¶ç‚¹æ˜¯é€šè¿‡<strong>æ²¿ç€æ¯æ¡è¾¹å‘å…¶ä¾§è¾¹ä¸­å¿ƒæ»‘åŠ¨</strong>åˆ›å»ºçš„ã€‚</li>
<li>æ»‘åŠ¨çš„è·ç¦»<strong>å—é™äº</strong>æ‰€æä¾›çš„<strong>æ¯ä¸ªè§’çš„åŠå¾„ï¼ˆ<code>radii</code>ï¼‰</strong> ï¼ˆå¹¶è¢«é™åˆ¶ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰¥</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\ge 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"/><span class="mrel">â‰¥</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span>ï¼‰ã€‚</li>
<li>å¦‚æœ<strong>åŠå¾„ï¼ˆ<code>radii</code>ï¼‰éå¸¸å¤§</strong>ï¼Œæ–œåˆ‡çš„å¯¹è§’çº¿ä¼šåœ¨ä¸­å¿ƒç›¸äº¤ï¼Œå½¢çŠ¶æœ€ç»ˆä¼šå˜æˆä¸€ä¸ª<strong>è±å½¢ï¼ˆdiamondï¼‰</strong> ã€‚</li>
</ul>
</li>
<li>
<p><strong><code>getOuterPath</code>/<code>getInnerPath</code> æ–¹æ³•ï¼š</strong></p>
<ul>
<li>é¦–å…ˆï¼Œå®ƒä»¬åˆ©ç”¨ <strong><code>TextDirection</code></strong>ï¼ˆæ–‡æœ¬æ–¹å‘ï¼‰æ¥è§£æ <strong><code>BorderRadiusGeometry</code></strong>ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸º <strong><code>RRect</code></strong> å¯¹è±¡ã€‚</li>
<li>æ¥ç€ï¼Œå®ƒä»¬æ„å»º<strong>å¤–éƒ¨/å†…éƒ¨æ–œåˆ‡çš„å¤šè¾¹å½¢</strong>ï¼ˆå†…éƒ¨è·¯å¾„ä½¿ç”¨ <code>deflate</code> æ¥è€ƒè™‘æè¾¹çš„åšåº¦ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong><code>paint</code> æ–¹æ³•ï¼š</strong></p>
<ul>
<li>é¦–å…ˆï¼Œå®ƒä¸ºæè¾¹çš„å¤–å±•ï¼ˆstroke outsetï¼‰è¿›è¡Œ<strong>è†¨èƒ€</strong>ï¼ˆinflatesï¼‰ã€‚</li>
<li>ç„¶åï¼Œå®ƒæ„å»ºä¸€ä¸ª**â€œå¤–éƒ¨è·¯å¾„å‡å»å†…éƒ¨è·¯å¾„â€**çš„è·¯å¾„ï¼ˆå³è½®å»“åŒºåŸŸï¼‰ã€‚</li>
<li>æœ€åï¼Œä½¿ç”¨ <strong><code>side.toPaint()</code></strong> æ–¹æ³•å°†è¯¥è·¯å¾„ç»˜åˆ¶å‡ºæ¥ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-6">ğŸ’» BeveledRectangleBorder å®ç”¨å®Œæ•´ç¤ºä¾‹</h2>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ª<strong>ç»¼åˆç¤ºä¾‹</strong>ï¼Œå±•ç¤ºäº† <strong><code>BeveledRectangleBorder</code></strong> çš„<strong>ä¸åŒå˜ä½“</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;

<span class="hljs-keyword">void</span> main() {
  runApp(<span class="hljs-keyword">const</span> MyApp());
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">const</span> MyApp({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> MaterialApp(
      debugShowCheckedModeBanner: <span class="hljs-keyword">false</span>,
      home: Scaffold(
        appBar: AppBar(
          title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'BeveledRectangleBorder Demo'</span>),
        ),
        body: <span class="hljs-keyword">const</span> SingleChildScrollView(
          padding: EdgeInsets.all(<span class="hljs-number">16.0</span>),
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.stretch,
            children: [
              Text(
                <span class="hljs-string">'BeveledRectangleBorder Examples'</span>,
                style: TextStyle(fontSize: <span class="hljs-number">24</span>, fontWeight: FontWeight.bold),
                textAlign: TextAlign.center,
              ),
              SizedBox(height: <span class="hljs-number">20</span>),
              BeveledExample(
                title: <span class="hljs-string">'Small Bevel (8px)'</span>,
                borderRadius: <span class="hljs-number">8</span>,
                color: Colors.red,
              ),
              SizedBox(height: <span class="hljs-number">16</span>),
              BeveledExample(
                title: <span class="hljs-string">'Medium Bevel (16px)'</span>,
                borderRadius: <span class="hljs-number">16</span>,
                color: Colors.green,
              ),
              SizedBox(height: <span class="hljs-number">16</span>),
              BeveledExample(
                title: <span class="hljs-string">'Large Bevel (24px)'</span>,
                borderRadius: <span class="hljs-number">24</span>,
                color: Colors.blue,
              ),
              SizedBox(height: <span class="hljs-number">16</span>),
              BeveledExample(
                title: <span class="hljs-string">'With Border'</span>,
                borderRadius: <span class="hljs-number">20</span>,
                color: Colors.amber,
                hasBorder: <span class="hljs-keyword">true</span>,
              ),
              SizedBox(height: <span class="hljs-number">16</span>),
              BeveledButtonExample(),
              SizedBox(height: <span class="hljs-number">16</span>),
              BeveledCardExample(),
            ],
          ),
        ),
      ),
    );
  }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BeveledExample</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> title;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> borderRadius;
  <span class="hljs-keyword">final</span> Color color;
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">bool</span> hasBorder;

  <span class="hljs-keyword">const</span> BeveledExample({
    <span class="hljs-keyword">super</span>.key,
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.title,
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.borderRadius,
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.color,
    <span class="hljs-keyword">this</span>.hasBorder = <span class="hljs-keyword">false</span>,
  });

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        Text(
          title,
          style: <span class="hljs-keyword">const</span> TextStyle(fontSize: <span class="hljs-number">16</span>, fontWeight: FontWeight.w600),
        ),
        <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">8</span>),
        Container(
          height: <span class="hljs-number">80</span>,
          decoration: ShapeDecoration(
            color: color.withOpacity(<span class="hljs-number">0.3</span>),
            shape: BeveledRectangleBorder(
              borderRadius: BorderRadius.circular(borderRadius),
              side: hasBorder
                  ? BorderSide(color: color, width: <span class="hljs-number">3</span>)
                  : BorderSide.none,
            ),
          ),
          child: Center(
            child: Text(
              <span class="hljs-string">'Radius: <span class="hljs-subst">${borderRadius}</span>px'</span>,
              style: TextStyle(
                color: color.withOpacity(<span class="hljs-number">0.8</span>),
                fontWeight: FontWeight.bold,
              ),
            ),
          ),
        ),
      ],
    );
  }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BeveledButtonExample</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">const</span> BeveledButtonExample({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        <span class="hljs-keyword">const</span> Text(
          <span class="hljs-string">'Beveled Button'</span>,
          style: TextStyle(fontSize: <span class="hljs-number">16</span>, fontWeight: FontWeight.w600),
        ),
        <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">8</span>),
        ElevatedButton(
          onPressed: () {},
          style: ElevatedButton.styleFrom(
            backgroundColor: Colors.purple,
            foregroundColor: Colors.white,
            shape: <span class="hljs-keyword">const</span> BeveledRectangleBorder(
              borderRadius: BorderRadius.all(Radius.circular(<span class="hljs-number">12</span>)),
            ),
            padding: <span class="hljs-keyword">const</span> EdgeInsets.symmetric(horizontal: <span class="hljs-number">24</span>, vertical: <span class="hljs-number">12</span>),
          ),
          child: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'Beveled Button'</span>),
        ),
      ],
    );
  }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BeveledCardExample</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">const</span> BeveledCardExample({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        <span class="hljs-keyword">const</span> Text(
          <span class="hljs-string">'Beveled Card'</span>,
          style: TextStyle(fontSize: <span class="hljs-number">16</span>, fontWeight: FontWeight.w600),
        ),
        <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">8</span>),
        Card(
          shape: <span class="hljs-keyword">const</span> BeveledRectangleBorder(
            borderRadius: BorderRadius.all(Radius.circular(<span class="hljs-number">16</span>)),
            side: BorderSide(color: Colors.grey, width: <span class="hljs-number">1</span>),
          ),
          child: <span class="hljs-keyword">const</span> Padding(
            padding: EdgeInsets.all(<span class="hljs-number">16.0</span>),
            child: Column(
              crossAxisAlignment: CrossAxisAlignment.start,
              children: [
                Text(
                  <span class="hljs-string">'Card with Beveled Corners'</span>,
                  style: TextStyle(fontSize: <span class="hljs-number">16</span>, fontWeight: FontWeight.bold),
                ),
                SizedBox(height: <span class="hljs-number">8</span>),
                Text(
                  <span class="hljs-string">'This card uses BeveledRectangleBorder to create unique, '</span>
                  <span class="hljs-string">'angular corners instead of the typical rounded corners.'</span>,
                ),
              ],
            ),
          ),
        ),
      ],
    );
  }
}
</code></pre>
<h2 data-id="heading-7">ğŸŒŸ æ€»ç»“ (Conclusion)</h2>
<p>åœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬æ¢è®¨äº† <strong>8 ä¸ªå¼ºå¤§ä½†ç»å¸¸è¢«å¿½è§†çš„ Flutter æ§ä»¶æˆ–ç±»</strong>ï¼Œå®ƒä»¬èƒ½å¤Ÿè§£å†³ç‰¹å®šçš„å¼€å‘éš¾é¢˜ã€‚</p>
<p>è¿™äº›æ§ä»¶çš„ç²¾å¦™ä¹‹å¤„ä¸ä»…åœ¨äºå®ƒä»¬çš„åŠŸèƒ½ï¼Œæ›´åœ¨äºå®ƒä»¬å¦‚ä½•å±•ç¤ºäº† Flutter <strong>ä¸€è‡´çš„è®¾è®¡æ¨¡å¼</strong>ã€‚æ— è®ºæ˜¯<strong>æ€§èƒ½ä¼˜åŒ–</strong>ã€<strong>å¯è®¿é—®æ€§</strong>ã€<strong>å®‰å…¨æ€§</strong>ï¼Œè¿˜æ˜¯<strong>ç‹¬ç‰¹çš„è§†è§‰æ•ˆæœ</strong>ï¼ŒFlutter éƒ½æä¾›äº†<strong>ä¼˜é›…çš„ã€åŸºäºæ§ä»¶çš„è§£å†³æ–¹æ¡ˆ</strong>ï¼Œå®ƒä»¬èƒ½æ— ç¼åœ°èå…¥æ‚¨çš„åº”ç”¨ç¨‹åºæ¶æ„ä¸­ã€‚</p>
<hr/>
<h2 data-id="heading-8">ğŸš€ ç»§ç»­æ‚¨çš„ Flutter ä¹‹æ—…</h2>
<p>åœ¨æ‚¨çš„ Flutter ä¹‹æ—…ä¸­ï¼Œè¯·è®°ä½è¿™ä¸ªæ¡†æ¶å……æ»¡äº†è¿™äº›â€œéšè—çš„çå®â€ã€‚</p>
<p>å®˜æ–¹æ–‡æ¡£ã€æºä»£ç æ¢ç´¢å’Œç¤¾åŒºè®¨è®ºéƒ½æ˜¯ç­‰å¾…æ‚¨å»å‘ç°çš„<strong>è§£å†³æ–¹æ¡ˆçš„å®åº“</strong>ã€‚è¯·ä¿æŒæ¢ç´¢ç²¾ç¥ï¼ŒæŒç»­æ„å»ºï¼Œå¹¶ä¸”åœ¨æ‚¨æƒ³è¦ç†è§£è¿™äº›å¼ºå¤§å·¥å…·å¦‚ä½•åœ¨<strong>å¹•åå·¥ä½œ</strong>æ—¶ï¼Œè¯·æ¯«ä¸çŠ¹è±«åœ°æ·±å…¥ç ”ç©¶<strong>æºä»£ç </strong>ã€‚</p>
<hr/>
<h2 data-id="heading-9">ğŸ”— è·å–å®Œæ•´ä»£ç </h2>
<p>æœ¬ç³»åˆ—ä¸­æ‰€æœ‰ç¤ºä¾‹çš„<strong>å®Œæ•´æºä»£ç </strong>éƒ½å¯ä»¥åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmhadaily%2Fflutter_test_cases" target="_blank" title="https://github.com/mhadaily/flutter_test_cases" ref="nofollow noopener noreferrer">flutter test cases repository</a>ä¸­æ‰¾åˆ°ã€‚æ‚¨å¯ä»¥åœ¨é‚£é‡Œæ¢ç´¢ã€å®éªŒï¼Œå¹¶åœ¨æ‚¨è‡ªå·±çš„é¡¹ç›®ä¸­ä»¥è¿™äº›æ¦‚å¿µä¸ºåŸºç¡€è¿›è¡Œæ„å»ºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redisï¼ˆ172ï¼‰å¦‚ä½•ä½¿ç”¨Rediså®ç°åˆ†å¸ƒå¼é˜Ÿï¼Ÿ]]></title>    <link>https://juejin.cn/post/7581348660824358912</link>    <guid>https://juejin.cn/post/7581348660824358912</guid>    <pubDate>2025-12-08T23:09:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581348660824358912" data-draft-id="7581386627675701288" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redisï¼ˆ172ï¼‰å¦‚ä½•ä½¿ç”¨Rediså®ç°åˆ†å¸ƒå¼é˜Ÿï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-08T23:09:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redisï¼ˆ172ï¼‰å¦‚ä½•ä½¿ç”¨Rediså®ç°åˆ†å¸ƒå¼é˜Ÿï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T23:09:50.000Z" title="Mon Dec 08 2025 23:09:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä½¿ç”¨Rediså®ç°åˆ†å¸ƒå¼é˜Ÿåˆ—æ˜¯ä¸€ç§å¸¸è§çš„è§£å†³æ–¹æ¡ˆã€‚Redisæä¾›äº†ä¸°å¯Œçš„æ•°æ®ç»“æ„å’Œé«˜æ€§èƒ½ï¼Œä½¿å…¶æˆä¸ºå®ç°åˆ†å¸ƒå¼é˜Ÿåˆ—çš„ç†æƒ³é€‰æ‹©ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Redisçš„åˆ—è¡¨ï¼ˆListï¼‰æ•°æ®ç»“æ„æ¥å®ç°åˆ†å¸ƒå¼é˜Ÿåˆ—ï¼Œå¹¶é€šè¿‡LPOPã€RPOPã€LPUSHã€RPUSHç­‰å‘½ä»¤è¿›è¡Œé˜Ÿåˆ—æ“ä½œã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªè¯¦ç»†çš„ç¤ºä¾‹ä»£ç ï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨Rediså®ç°ä¸€ä¸ªç®€å•çš„åˆ†å¸ƒå¼é˜Ÿåˆ—ã€‚</p>
<h3 data-id="heading-0">1. åˆå§‹åŒ–Redisè¿æ¥</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆå§‹åŒ–Redisè¿æ¥ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisQueue</span> {
    <span class="hljs-keyword">private</span> Jedis jedis;
    <span class="hljs-keyword">private</span> String queueName;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RedisQueue</span><span class="hljs-params">(String host, <span class="hljs-type">int</span> port, String queueName)</span> {
        <span class="hljs-built_in">this</span>.jedis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(host, port);
        <span class="hljs-built_in">this</span>.queueName = queueName;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> {
        jedis.close();
    }
}
</code></pre>
<h3 data-id="heading-1">2. å®ç°ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…</h3>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®ç°é˜Ÿåˆ—çš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ã€‚</p>
<h4 data-id="heading-2">2.1. ç”Ÿäº§è€…</h4>
<p>ç”Ÿäº§è€…å°†æ¶ˆæ¯æ¨é€åˆ°é˜Ÿåˆ—çš„å³ç«¯ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">enqueue</span><span class="hljs-params">(String message)</span> {
    jedis.rpush(queueName, message);
}
</code></pre>
<h4 data-id="heading-3">2.2. æ¶ˆè´¹è€…</h4>
<p>æ¶ˆè´¹è€…ä»é˜Ÿåˆ—çš„å·¦ç«¯å¼¹å‡ºæ¶ˆæ¯ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> String <span class="hljs-title function_">dequeue</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> jedis.lpop(queueName);
}
</code></pre>
<h3 data-id="heading-4">3. ç¤ºä¾‹ä»£ç </h3>
<p>ä»¥ä¸‹æ˜¯å®Œæ•´çš„ç¤ºä¾‹ä»£ç ï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨Rediså®ç°åˆ†å¸ƒå¼é˜Ÿåˆ—ï¼Œå¹¶åŒ…å«ä¸€ä¸ªç®€å•çš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ç¤ºä¾‹ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisQueue</span> {
    <span class="hljs-keyword">private</span> Jedis jedis;
    <span class="hljs-keyword">private</span> String queueName;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RedisQueue</span><span class="hljs-params">(String host, <span class="hljs-type">int</span> port, String queueName)</span> {
        <span class="hljs-built_in">this</span>.jedis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(host, port);
        <span class="hljs-built_in">this</span>.queueName = queueName;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">enqueue</span><span class="hljs-params">(String message)</span> {
        jedis.rpush(queueName, message);
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">dequeue</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> jedis.lpop(queueName);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> {
        jedis.close();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// åˆå§‹åŒ–Redisé˜Ÿåˆ—</span>
        <span class="hljs-type">RedisQueue</span> <span class="hljs-variable">queue</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisQueue</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>, <span class="hljs-string">"myQueue"</span>);

        <span class="hljs-comment">// ç”Ÿäº§è€…çº¿ç¨‹</span>
        <span class="hljs-type">Thread</span> <span class="hljs-variable">producer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
                <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Message "</span> + (i + <span class="hljs-number">1</span>);
                queue.enqueue(message);
                System.out.println(<span class="hljs-string">"Produced: "</span> + message);
                <span class="hljs-keyword">try</span> {
                    Thread.sleep(<span class="hljs-number">500</span>); <span class="hljs-comment">// æ¨¡æ‹Ÿç”Ÿäº§é—´éš”</span>
                } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        });

        <span class="hljs-comment">// æ¶ˆè´¹è€…çº¿ç¨‹</span>
        <span class="hljs-type">Thread</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
                <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> queue.dequeue();
                System.out.println(<span class="hljs-string">"Consumed: "</span> + message);
                <span class="hljs-keyword">try</span> {
                    Thread.sleep(<span class="hljs-number">1000</span>); <span class="hljs-comment">// æ¨¡æ‹Ÿæ¶ˆè´¹é—´éš”</span>
                } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        });

        <span class="hljs-comment">// å¯åŠ¨ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çº¿ç¨‹</span>
        producer.start();
        consumer.start();

        <span class="hljs-comment">// ç­‰å¾…çº¿ç¨‹å®Œæˆ</span>
        <span class="hljs-keyword">try</span> {
            producer.join();
            consumer.join();
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            e.printStackTrace();
        }

        <span class="hljs-comment">// å…³é—­Redisè¿æ¥</span>
        queue.close();
    }
}
</code></pre>
<h3 data-id="heading-5">4. åŸºäºRedisçš„å¯é é˜Ÿåˆ—</h3>
<p>ä»¥ä¸Šä»£ç å®ç°äº†ä¸€ä¸ªç®€å•çš„åˆ†å¸ƒå¼é˜Ÿåˆ—ï¼Œä½†åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¯èƒ½éœ€è¦æ›´åŠ å¯é çš„é˜Ÿåˆ—ã€‚ä¾‹å¦‚ï¼Œä¸ºäº†é˜²æ­¢æ¶ˆè´¹è€…åœ¨å¤„ç†æ¶ˆæ¯æ—¶å‡ºç°æ•…éšœï¼Œéœ€è¦å°†æ¶ˆæ¯æ ‡è®°ä¸ºâ€œæ­£åœ¨å¤„ç†â€ï¼Œå¹¶åœ¨å¤„ç†å®Œæˆåå°†å…¶ä»é˜Ÿåˆ—ä¸­åˆ é™¤ã€‚</p>
<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Redisçš„RPOPLPUSHå‘½ä»¤å’Œä¸€ä¸ªè¾…åŠ©é˜Ÿåˆ—æ¥å®ç°å¯é é˜Ÿåˆ—ã€‚</p>
<h4 data-id="heading-6">4.1. å¯é é˜Ÿåˆ—ç¤ºä¾‹ä»£ç </h4>
<p>ä»¥ä¸‹æ˜¯åŸºäºRPOPLPUSHå‘½ä»¤çš„å¯é é˜Ÿåˆ—å®ç°ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReliableRedisQueue</span> {
    <span class="hljs-keyword">private</span> Jedis jedis;
    <span class="hljs-keyword">private</span> String queueName;
    <span class="hljs-keyword">private</span> String processingQueueName;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ReliableRedisQueue</span><span class="hljs-params">(String host, <span class="hljs-type">int</span> port, String queueName)</span> {
        <span class="hljs-built_in">this</span>.jedis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(host, port);
        <span class="hljs-built_in">this</span>.queueName = queueName;
        <span class="hljs-built_in">this</span>.processingQueueName = queueName + <span class="hljs-string">":processing"</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">enqueue</span><span class="hljs-params">(String message)</span> {
        jedis.rpush(queueName, message);
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">dequeue</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> jedis.rpoplpush(queueName, processingQueueName);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ack</span><span class="hljs-params">(String message)</span> {
        jedis.lrem(processingQueueName, <span class="hljs-number">1</span>, message);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> {
        jedis.close();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// åˆå§‹åŒ–Rediså¯é é˜Ÿåˆ—</span>
        <span class="hljs-type">ReliableRedisQueue</span> <span class="hljs-variable">queue</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReliableRedisQueue</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>, <span class="hljs-string">"myReliableQueue"</span>);

        <span class="hljs-comment">// ç”Ÿäº§è€…çº¿ç¨‹</span>
        <span class="hljs-type">Thread</span> <span class="hljs-variable">producer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
                <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Message "</span> + (i + <span class="hljs-number">1</span>);
                queue.enqueue(message);
                System.out.println(<span class="hljs-string">"Produced: "</span> + message);
                <span class="hljs-keyword">try</span> {
                    Thread.sleep(<span class="hljs-number">500</span>); <span class="hljs-comment">// æ¨¡æ‹Ÿç”Ÿäº§é—´éš”</span>
                } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        });

        <span class="hljs-comment">// æ¶ˆè´¹è€…çº¿ç¨‹</span>
        <span class="hljs-type">Thread</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
                <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> queue.dequeue();
                <span class="hljs-keyword">if</span> (message != <span class="hljs-literal">null</span>) {
                    System.out.println(<span class="hljs-string">"Consumed: "</span> + message);
                    <span class="hljs-comment">// æ¨¡æ‹Ÿæ¶ˆæ¯å¤„ç†</span>
                    <span class="hljs-keyword">try</span> {
                        Thread.sleep(<span class="hljs-number">1000</span>);
                    } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                        e.printStackTrace();
                    }
                    queue.ack(message);
                    System.out.println(<span class="hljs-string">"Acknowledged: "</span> + message);
                }
            }
        });

        <span class="hljs-comment">// å¯åŠ¨ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çº¿ç¨‹</span>
        producer.start();
        consumer.start();

        <span class="hljs-comment">// ç­‰å¾…çº¿ç¨‹å®Œæˆ</span>
        <span class="hljs-keyword">try</span> {
            producer.join();
            consumer.join();
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            e.printStackTrace();
        }

        <span class="hljs-comment">// å…³é—­Redisè¿æ¥</span>
        queue.close();
    }
}
</code></pre>
<h3 data-id="heading-7">æ€»ç»“</h3>
<p>ä»¥ä¸Šç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨Rediså®ç°åˆ†å¸ƒå¼é˜Ÿåˆ—ï¼ŒåŒ…æ‹¬ç®€å•çš„é˜Ÿåˆ—å’Œå¯é é˜Ÿåˆ—çš„å®ç°ã€‚é€šè¿‡Redisçš„åˆ—è¡¨ç»“æ„å’ŒåŸå­å‘½ä»¤ï¼Œå¯ä»¥è½»æ¾å®ç°ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å¼ï¼Œå¹¶é€šè¿‡RPOPLPUSHå‘½ä»¤å’Œè¾…åŠ©é˜Ÿåˆ—æ¥æé«˜å¯é æ€§ã€‚å¯ä»¥æ ¹æ®å…·ä½“çš„ä¸šåŠ¡éœ€æ±‚ï¼Œé€‰æ‹©åˆé€‚çš„é˜Ÿåˆ—å®ç°æ–¹æ¡ˆï¼Œä»¥ç¡®ä¿ç³»ç»Ÿçš„é«˜æ•ˆå’Œç¨³å®šè¿è¡Œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Springbootè¯·æ±‚å’Œå“åº”ç›¸å…³æ³¨è§£åŠä½¿ç”¨åœºæ™¯]]></title>    <link>https://juejin.cn/post/7581386627675717672</link>    <guid>https://juejin.cn/post/7581386627675717672</guid>    <pubDate>2025-12-08T23:10:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581386627675717672" data-draft-id="7581354812861218868" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Springbootè¯·æ±‚å’Œå“åº”ç›¸å…³æ³¨è§£åŠä½¿ç”¨åœºæ™¯"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-08T23:10:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Springbootè¯·æ±‚å’Œå“åº”ç›¸å…³æ³¨è§£åŠä½¿ç”¨åœºæ™¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T23:10:52.000Z" title="Mon Dec 08 2025 23:10:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨Spring Bootä¸­ï¼Œè¯·æ±‚å’Œå“åº”ç›¸å…³çš„æ³¨è§£ä¸»è¦ç”¨äºå¤„ç†HTTPè¯·æ±‚å’Œæ„å»ºHTTPå“åº”ã€‚ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„è¯·æ±‚å’Œå“åº”ç›¸å…³æ³¨è§£çš„è¯¦ç»†ä»‹ç»ï¼ŒåŒ…æ‹¬ä½¿ç”¨åœºæ™¯å’Œç¤ºä¾‹ã€‚</p>
<h3 data-id="heading-0">1. è¯·æ±‚å¤„ç†æ³¨è§£</h3>
<h4 data-id="heading-1">@RequestMapping</h4>
<ul>
<li><strong>æè¿°</strong>: ç”¨äºæ˜ å°„HTTPè¯·æ±‚åˆ°å¤„ç†æ–¹æ³•ä¸Šã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>: å¯ä»¥ç”¨äºç±»çº§åˆ«å’Œæ–¹æ³•çº§åˆ«ï¼Œé€‚ç”¨äºæ‰€æœ‰HTTPæ–¹æ³•ï¼ˆGET, POST, PUT, DELETEç­‰ï¼‰ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>:
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyController</span> {

    <span class="hljs-meta">@RequestMapping(value = "/hello", method = RequestMethod.GET)</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">sayHello</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello, World!"</span>;
    }
}
</code></pre>
</li>
</ul>
<h4 data-id="heading-2">@GetMapping, @PostMapping, @PutMapping, @DeleteMapping, @PatchMapping</h4>
<ul>
<li><strong>æè¿°</strong>: è¿™äº›æ˜¯ <code>@RequestMapping</code> çš„å¿«æ·å½¢å¼ï¼Œç”¨äºç‰¹å®šçš„HTTPæ–¹æ³•ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>: ç”¨äºç®€åŒ–è¯·æ±‚æ˜ å°„ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>:
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyController</span> {

    <span class="hljs-meta">@GetMapping("/hello")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">sayHello</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello, World!"</span>;
    }

    <span class="hljs-meta">@PostMapping("/create")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">createItem</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Item item)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Item created"</span>;
    }
}
</code></pre>
</li>
</ul>
<h4 data-id="heading-3">@RequestParam</h4>
<ul>
<li><strong>æè¿°</strong>: ç”¨äºå°†HTTPè¯·æ±‚å‚æ•°ç»‘å®šåˆ°æ–¹æ³•å‚æ•°ä¸Šã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>: å¤„ç†æŸ¥è¯¢å‚æ•°ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>:
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@GetMapping("/greet")</span>
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">greet</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam(name = "name", defaultValue = "World")</span> String name)</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello, "</span> + name;
}
</code></pre>
</li>
</ul>
<h4 data-id="heading-4">@PathVariable</h4>
<ul>
<li><strong>æè¿°</strong>: ç”¨äºå°†URIæ¨¡æ¿å˜é‡ç»‘å®šåˆ°æ–¹æ³•å‚æ•°ä¸Šã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>: å¤„ç†è·¯å¾„å‚æ•°ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>:
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@GetMapping("/items/{id}")</span>
<span class="hljs-keyword">public</span> Item <span class="hljs-title function_">getItem</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable("id")</span> Long id)</span> {
    <span class="hljs-comment">// Logic to fetch item by id</span>
    <span class="hljs-keyword">return</span> item;
}
</code></pre>
</li>
</ul>
<h4 data-id="heading-5">@RequestBody</h4>
<ul>
<li><strong>æè¿°</strong>: ç”¨äºå°†HTTPè¯·æ±‚ä½“ç»‘å®šåˆ°æ–¹æ³•å‚æ•°ä¸Šï¼Œå¹¶ä½¿ç”¨HttpMessageConverterè¿›è¡Œååºåˆ—åŒ–ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>: å¤„ç†è¯·æ±‚ä½“ä¸­çš„JSONæˆ–XMLæ•°æ®ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>:
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@PostMapping("/items")</span>
<span class="hljs-keyword">public</span> Item <span class="hljs-title function_">createItem</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Item item)</span> {
    <span class="hljs-comment">// Logic to create item</span>
    <span class="hljs-keyword">return</span> item;
}
</code></pre>
</li>
</ul>
<h4 data-id="heading-6">@RequestHeader</h4>
<ul>
<li><strong>æè¿°</strong>: å°†HTTPè¯·æ±‚å¤´ä¸­çš„æŸä¸ªå€¼ç»‘å®šåˆ°æ–¹æ³•å‚æ•°ä¸Šã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>: è¯»å–ç‰¹å®šè¯·æ±‚å¤´ä¿¡æ¯ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>:
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@GetMapping("/user-agent")</span>
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">getUserAgent</span><span class="hljs-params">(<span class="hljs-meta">@RequestHeader("User-Agent")</span> String userAgent)</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"User-Agent: "</span> + userAgent;
}
</code></pre>
</li>
</ul>
<h3 data-id="heading-7">2. å“åº”å¤„ç†æ³¨è§£</h3>
<h4 data-id="heading-8">@ResponseBody</h4>
<ul>
<li><strong>æè¿°</strong>: å°†æ–¹æ³•è¿”å›å€¼ç»‘å®šåˆ°HTTPå“åº”ä½“ä¸Šï¼Œå¹¶ä½¿ç”¨HttpMessageConverterè¿›è¡Œåºåˆ—åŒ–ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>: ç›´æ¥è¿”å›JSONæˆ–XMLæ ¼å¼çš„æ•°æ®ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>:
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@GetMapping("/items/{id}")</span>
<span class="hljs-meta">@ResponseBody</span>
<span class="hljs-keyword">public</span> Item <span class="hljs-title function_">getItem</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable("id")</span> Long id)</span> {
    <span class="hljs-comment">// Logic to fetch item by id</span>
    <span class="hljs-keyword">return</span> item;
}
</code></pre>
</li>
</ul>
<h4 data-id="heading-9">@RestController</h4>
<ul>
<li><strong>æè¿°</strong>: ç»„åˆæ³¨è§£ï¼Œç›¸å½“äº@Controllerå’Œ@ResponseBodyçš„ç»“åˆï¼Œæ‰€æœ‰æ–¹æ³•é»˜è®¤è¿”å›JSONæˆ–XMLæ ¼å¼çš„æ•°æ®ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>: ç”¨äºæ ‡è®°RESTfulæ§åˆ¶å™¨ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>:
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyController</span> {

    <span class="hljs-meta">@GetMapping("/items/{id}")</span>
    <span class="hljs-keyword">public</span> Item <span class="hljs-title function_">getItem</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable("id")</span> Long id)</span> {
        <span class="hljs-keyword">return</span> item;
    }
}
</code></pre>
</li>
</ul>
<h4 data-id="heading-10">@ResponseStatus</h4>
<ul>
<li><strong>æè¿°</strong>: ç”¨äºè®¾ç½®HTTPå“åº”çŠ¶æ€ç ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>: å°†ç‰¹å®šçš„çŠ¶æ€ç è¿”å›åˆ°å®¢æˆ·ç«¯ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>:
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@PostMapping("/items")</span>
<span class="hljs-meta">@ResponseStatus(HttpStatus.CREATED)</span>
<span class="hljs-keyword">public</span> Item <span class="hljs-title function_">createItem</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Item item)</span> {
    <span class="hljs-keyword">return</span> item;
}
</code></pre>
</li>
</ul>
<h3 data-id="heading-11">3. å¼‚å¸¸å¤„ç†æ³¨è§£</h3>
<h4 data-id="heading-12">@ExceptionHandler</h4>
<ul>
<li><strong>æè¿°</strong>: ç”¨äºå¤„ç†ç‰¹å®šçš„å¼‚å¸¸ï¼Œå¹¶è¿”å›è‡ªå®šä¹‰çš„å“åº”ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>: å¤„ç†æ§åˆ¶å™¨ä¸­çš„å¼‚å¸¸ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>:
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyController</span> {

    <span class="hljs-meta">@GetMapping("/items/{id}")</span>
    <span class="hljs-keyword">public</span> Item <span class="hljs-title function_">getItem</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable("id")</span> Long id)</span> {
        <span class="hljs-keyword">if</span> (id == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ItemNotFoundException</span>(<span class="hljs-string">"Item not found"</span>);
        }
        <span class="hljs-keyword">return</span> item;
    }

    <span class="hljs-meta">@ExceptionHandler(ItemNotFoundException.class)</span>
    <span class="hljs-meta">@ResponseStatus(HttpStatus.NOT_FOUND)</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">handleItemNotFoundException</span><span class="hljs-params">(ItemNotFoundException ex)</span> {
        <span class="hljs-keyword">return</span> ex.getMessage();
    }
}
</code></pre>
</li>
</ul>
<h3 data-id="heading-13">4. CORSæ”¯æŒ</h3>
<h4 data-id="heading-14">@CrossOrigin</h4>
<ul>
<li><strong>æè¿°</strong>: ç”¨äºå¯ç”¨è·¨åŸŸèµ„æºå…±äº«ï¼ˆCORSï¼‰ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>: å…è®¸è·¨åŸŸè¯·æ±‚ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>:
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api")</span>
<span class="hljs-meta">@CrossOrigin(origins = "http://example.com")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyController</span> {

    <span class="hljs-meta">@GetMapping("/items/{id}")</span>
    <span class="hljs-keyword">public</span> Item <span class="hljs-title function_">getItem</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable("id")</span> Long id)</span> {
        <span class="hljs-keyword">return</span> item;
    }
}
</code></pre>
</li>
</ul>
<h3 data-id="heading-15">5. å…¶ä»–ç›¸å…³æ³¨è§£</h3>
<h4 data-id="heading-16">@RequestAttribute</h4>
<ul>
<li><strong>æè¿°</strong>: å°†è¯·æ±‚èŒƒå›´å†…çš„å±æ€§ç»‘å®šåˆ°æ–¹æ³•å‚æ•°ä¸Šã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>: å¤„ç†åœ¨è¯·æ±‚å¤„ç†è¿‡ç¨‹ä¸­è®¾ç½®çš„å±æ€§ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>:
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@GetMapping("/attributes")</span>
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">getAttribute</span><span class="hljs-params">(<span class="hljs-meta">@RequestAttribute("myAttribute")</span> String myAttribute)</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Attribute: "</span> + myAttribute;
}
</code></pre>
</li>
</ul>
<h4 data-id="heading-17">@Valid</h4>
<ul>
<li><strong>æè¿°</strong>: ç”¨äºéªŒè¯è¯·æ±‚ä½“ä¸­çš„å¯¹è±¡ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>: å¯¹è¾“å…¥æ•°æ®è¿›è¡ŒéªŒè¯ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>:
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@PostMapping("/items")</span>
<span class="hljs-keyword">public</span> Item <span class="hljs-title function_">createItem</span><span class="hljs-params">(<span class="hljs-meta">@Valid</span> <span class="hljs-meta">@RequestBody</span> Item item)</span> {
    <span class="hljs-keyword">return</span> item;
}
</code></pre>
</li>
</ul>
<p>è¿™äº›æ³¨è§£ä¸ºSpring Bootæä¾›äº†å¼ºå¤§çš„è¯·æ±‚å’Œå“åº”å¤„ç†èƒ½åŠ›ï¼Œå¸®åŠ©å¼€å‘è€…è½»æ¾åˆ›å»ºRESTfulé£æ ¼çš„APIã€‚é€šè¿‡åˆç†ä½¿ç”¨è¿™äº›æ³¨è§£ï¼Œå¯ä»¥ä½¿ä»£ç æ›´åŠ æ¸…æ™°å’Œæ˜“äºç»´æŠ¤ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯æ€§èƒ½åŠ é€Ÿå™¨ï¼šVue Routeræ‡’åŠ è½½ä¸ç»„ä»¶åˆ†åŒ…çš„æè‡´ä¼˜åŒ–]]></title>    <link>https://juejin.cn/post/7581117416812036139</link>    <guid>https://juejin.cn/post/7581117416812036139</guid>    <pubDate>2025-12-08T23:24:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581117416812036139" data-draft-id="7581312433530126379" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯æ€§èƒ½åŠ é€Ÿå™¨ï¼šVue Routeræ‡’åŠ è½½ä¸ç»„ä»¶åˆ†åŒ…çš„æè‡´ä¼˜åŒ–"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-12-08T23:24:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°é©¬å†™ç "/> <meta itemprop="url" content="https://juejin.cn/user/3940246036939358"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯æ€§èƒ½åŠ é€Ÿå™¨ï¼šVue Routeræ‡’åŠ è½½ä¸ç»„ä»¶åˆ†åŒ…çš„æè‡´ä¼˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3940246036939358/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°é©¬å†™ç 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T23:24:18.000Z" title="Mon Dec 08 2025 23:24:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šå½“åº”ç”¨å˜"é‡"æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ›´èªæ˜çš„åŠ è½½ç­–ç•¥</h2>
<p>åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼Œéšç€Vueåº”ç”¨åŠŸèƒ½æ—¥ç›Šä¸°å¯Œï¼Œç»„ä»¶æ•°é‡ä¸æ–­å¢åŠ ï¼Œä¸€ä¸ªå¸¸è§çš„é—®é¢˜é€æ¸æµ®ç°ï¼š<strong>åˆå§‹åŠ è½½æ—¶é—´è¶Šæ¥è¶Šé•¿</strong>ã€‚ç”¨æˆ·æ‰“å¼€åº”ç”¨æ—¶ï¼Œæµè§ˆå™¨éœ€è¦ä¸‹è½½æ•´ä¸ªåº”ç”¨çš„JavaScriptä»£ç ï¼ŒåŒ…æ‹¬é‚£äº›ç”¨æˆ·å¯èƒ½æ°¸è¿œä¸ä¼šè®¿é—®çš„é¡µé¢å’ŒåŠŸèƒ½ã€‚è¿™ä¸ä»…æµªè´¹äº†å¸¦å®½ï¼Œæ›´ç›´æ¥å½±å“äº†ç”¨æˆ·ä½“éªŒã€‚æœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•ï¼Œå¯ä»¥"æŒ‰éœ€åˆ†é…"èµ„æºï¼Œåªåœ¨ç”¨æˆ·éœ€è¦æ—¶æ‰åŠ è½½ç›¸åº”ä»£ç ï¼Ÿè¿™å°±æ˜¯æˆ‘ä»¬ä»Šå¤©è¦æ¢è®¨çš„Vue Routeræ‡’åŠ è½½ä¸ç»„ä»¶åˆ†åŒ…ä¼˜åŒ–çš„æ ¸å¿ƒä»·å€¼ã€‚</p>
<h2 data-id="heading-1">ç¬¬ä¸€éƒ¨åˆ†ï¼šä¼ ç»Ÿè·¯ç”±åŠ è½½çš„é—®é¢˜å‰–æ</h2>
<p>åœ¨æ·±å…¥äº†è§£ä¼˜åŒ–æ–¹æ¡ˆå‰ï¼Œè®©æˆ‘ä»¬å…ˆçœ‹çœ‹ä¼ ç»Ÿè·¯ç”±é…ç½®çš„å±€é™æ€§ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼ ç»Ÿçš„é™æ€å¯¼å…¥æ–¹å¼</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@/views/Home.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">About</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@/views/About.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Contact</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@/views/Contact.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Dashboard</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@/views/Dashboard.vue'</span>
<span class="hljs-comment">// ...å¯èƒ½è¿˜æœ‰å‡ åä¸ªç»„ä»¶</span>

<span class="hljs-keyword">const</span> routes = [
  { <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">Home</span> },
  { <span class="hljs-attr">path</span>: <span class="hljs-string">'/about'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">About</span> },
  { <span class="hljs-attr">path</span>: <span class="hljs-string">'/contact'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">Contact</span> },
  { <span class="hljs-attr">path</span>: <span class="hljs-string">'/dashboard'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">Dashboard</span> },
  <span class="hljs-comment">// ...æ‰€æœ‰è·¯ç”±åœ¨åº”ç”¨åˆå§‹åŒ–æ—¶å°±å·²ç»è¢«åŠ è½½</span>
]
</code></pre>
<p>è¿™ç§æ¨¡å¼ä¸‹ï¼Œæ— è®ºç”¨æˆ·è®¿é—®å“ªä¸ªé¡µé¢ï¼Œæ‰€æœ‰è·¯ç”±ç»„ä»¶éƒ½ä¼šè¢«æ‰“åŒ…è¿›åŒä¸€ä¸ªJavaScriptæ–‡ä»¶ä¸­ã€‚è¿™æ„å‘³ç€ï¼š</p>
<ol>
<li><strong>é¦–å±åŠ è½½æ—¶é—´é•¿</strong>ï¼šç”¨æˆ·éœ€è¦ç­‰å¾…æ‰€æœ‰ä»£ç ä¸‹è½½å®Œæˆ</li>
<li><strong>èµ„æºæµªè´¹ä¸¥é‡</strong>ï¼šç”¨æˆ·å¯èƒ½æ°¸è¿œä¸ä¼šè®¿é—®æŸäº›é¡µé¢ï¼Œä½†è¿™äº›é¡µé¢çš„ä»£ç å·²ç»è¢«åŠ è½½</li>
<li><strong>ç¼“å­˜æ•ˆç‡ä½</strong>ï¼šä»»ä½•å¾®å°æ”¹åŠ¨éƒ½ä¼šå¯¼è‡´æ•´ä¸ªåŒ…éœ€è¦é‡æ–°ä¸‹è½½</li>
</ol>
<h2 data-id="heading-2">ç¬¬äºŒéƒ¨åˆ†ï¼šæ‡’åŠ è½½è·¯ç”±â€”â€”æŒ‰éœ€åŠ è½½çš„è‰ºæœ¯</h2>
<p>Vue Routerçš„æ‡’åŠ è½½åŠŸèƒ½é€šè¿‡åŠ¨æ€å¯¼å…¥ï¼ˆDynamic Importï¼‰å®ç°äº†è·¯ç”±ç»„ä»¶çš„æŒ‰éœ€åŠ è½½ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨æ‡’åŠ è½½çš„åŠ¨æ€å¯¼å…¥è¯­æ³•</span>
<span class="hljs-keyword">const</span> routes = [
  { 
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>, 
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/Home.vue'</span>) 
  },
  { 
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/about'</span>, 
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/About.vue'</span>) 
  },
  { 
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/contact'</span>, 
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/Contact.vue'</span>) 
  },
  { 
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/dashboard'</span>, 
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/Dashboard.vue'</span>) 
  }
]
</code></pre>
<h3 data-id="heading-3">æ‡’åŠ è½½çš„å·¥ä½œåŸç†</h3>
<p>å½“ç”¨æˆ·è®¿é—®åº”ç”¨æ—¶ï¼Œåªæœ‰é¦–é¡µï¼ˆHomeï¼‰ç»„ä»¶ä¼šè¢«åŠ è½½ã€‚å½“ç”¨æˆ·ç‚¹å‡»å¯¼èˆªåˆ°"/about"æ—¶ï¼ŒVue Routeræ‰ä¼šåŠ¨æ€è¯·æ±‚Aboutç»„ä»¶çš„ä»£ç å—ã€‚è¿™ç§æœºåˆ¶å¸¦æ¥äº†æ˜¾è‘—çš„ä¼˜åŒ–æ•ˆæœï¼š</p>
<ol>
<li><strong>å‡å°‘åˆå§‹åŒ…ä½“ç§¯</strong>ï¼šé¦–å±åªéœ€è¦åŠ è½½å¿…è¦çš„ä»£ç </li>
<li><strong>å¹¶è¡ŒåŠ è½½èƒ½åŠ›</strong>ï¼šä¸åŒè·¯ç”±çš„ä»£ç å¯ä»¥å¹¶è¡Œä¸‹è½½</li>
<li><strong>æ™ºèƒ½ç¼“å­˜ç­–ç•¥</strong>ï¼šæ¯ä¸ªè·¯ç”±ç»„ä»¶å¯ä»¥ç‹¬ç«‹ç¼“å­˜</li>
</ol>
<h2 data-id="heading-4">ç¬¬ä¸‰éƒ¨åˆ†ï¼šé«˜çº§åˆ†åŒ…ç­–ç•¥â€”â€”è®©ä¼˜åŒ–æ›´è¿›ä¸€æ­¥</h2>
<p>åŸºæœ¬çš„æ‡’åŠ è½½å·²ç»å¸¦æ¥äº†æ˜¾è‘—æå‡ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡æ›´ç²¾ç»†çš„åˆ†åŒ…ç­–ç•¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼š</p>
<h3 data-id="heading-5">1. Webpacké­”æ³•æ³¨é‡Šï¼šå‘½åä¸åˆ†ç»„</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/user/profile'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackChunkName: "user-pages" */</span> <span class="hljs-string">'@/views/user/Profile.vue'</span>)
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/user/settings'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackChunkName: "user-pages" */</span> <span class="hljs-string">'@/views/user/Settings.vue'</span>)
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/admin/dashboard'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackChunkName: "admin-module" */</span> <span class="hljs-string">'@/views/admin/Dashboard.vue'</span>)
  }
]
</code></pre>
<p>é€šè¿‡<code>webpackChunkName</code>æ³¨é‡Šï¼Œæˆ‘ä»¬å¯ä»¥ï¼š</p>
<ul>
<li><strong>ç›¸å…³ç»„ä»¶æ‰“åŒ…åˆ°ä¸€èµ·</strong>ï¼šå‡å°‘HTTPè¯·æ±‚æ•°é‡</li>
<li><strong>åˆ›å»ºæœ‰æ„ä¹‰çš„æ–‡ä»¶å</strong>ï¼šä¾¿äºè°ƒè¯•å’Œç»´æŠ¤</li>
<li><strong>å®ç°æ›´ç²¾ç»†çš„ç¼“å­˜æ§åˆ¶</strong></li>
</ul>
<h3 data-id="heading-6">2. é¢„åŠ è½½ä¸é¢„è·å–ç­–ç•¥</h3>
<p>Vue Router 4.x æä¾›äº†æ›´æ™ºèƒ½çš„é¢„åŠ è½½æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é…ç½®é¢„åŠ è½½ç­–ç•¥</span>
<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>({
  routes,
  <span class="hljs-comment">// é¢„åŠ è½½è§†å£å†…é“¾æ¥å¯¹åº”çš„è·¯ç”±</span>
  <span class="hljs-title function_">scrollBehavior</span>(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, savedPosition</span>) {
    <span class="hljs-keyword">if</span> (to.<span class="hljs-property">matched</span>.<span class="hljs-property">length</span>) {
      <span class="hljs-comment">// é¢„åŠ è½½è·¯ç”±ç»„ä»¶</span>
      to.<span class="hljs-property">matched</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">record</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> record.<span class="hljs-property">components</span>.<span class="hljs-property">default</span> === <span class="hljs-string">'function'</span>) {
          record.<span class="hljs-property">components</span>.<span class="hljs-title function_">default</span>()
        }
      })
    }
    <span class="hljs-keyword">return</span> savedPosition || { <span class="hljs-attr">top</span>: <span class="hljs-number">0</span> }
  }
})
</code></pre>
<h3 data-id="heading-7">3. æŒ‰ç”¨æˆ·è§’è‰²åˆ†åŒ…</h3>
<p>é’ˆå¯¹ä¸åŒç”¨æˆ·è§’è‰²è¿›è¡Œä»£ç åˆ†å‰²ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ ¹æ®ç”¨æˆ·è§’è‰²åŠ¨æ€åŠ è½½ä¸åŒçš„æ¨¡å—</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getUserRoleModule</span> = (<span class="hljs-params">role</span>) =&gt; {
  <span class="hljs-keyword">switch</span>(role) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'admin'</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/modules/admin'</span>)
    <span class="hljs-keyword">case</span> <span class="hljs-string">'editor'</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/modules/editor'</span>)
    <span class="hljs-attr">default</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/modules/user'</span>)
  }
}

<span class="hljs-comment">// åœ¨è·¯ç”±å®ˆå«ä¸­åº”ç”¨</span>
router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">meta</span>.<span class="hljs-property">requiresAdmin</span>) {
    <span class="hljs-keyword">const</span> adminModule = <span class="hljs-title function_">getUserRoleModule</span>(<span class="hljs-string">'admin'</span>)
    <span class="hljs-title function_">adminModule</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">next</span>())
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-title function_">next</span>()
  }
})
</code></pre>
<h2 data-id="heading-8">ç¬¬å››éƒ¨åˆ†ï¼šæœ€ä½³å®è·µä¸æ€§èƒ½ç›‘æ§</h2>
<h3 data-id="heading-9">åˆ†åŒ…ä¼˜åŒ–æ£€æŸ¥æ¸…å•</h3>
<ol>
<li><strong>è·¯ç”±å±‚çº§åˆ†åŒ…</strong>ï¼šæŒ‰åŠŸèƒ½æ¨¡å—åˆ’åˆ†ä»£ç å—</li>
<li><strong>ç¬¬ä¸‰æ–¹åº“åˆ†ç¦»</strong>ï¼šå°†Vueã€Vuexã€Vue Routerç­‰åº“å•ç‹¬æ‰“åŒ…</li>
<li><strong>å…¬å…±ç»„ä»¶æå–</strong>ï¼šæå–è·¨è·¯ç”±ä½¿ç”¨çš„ç»„ä»¶åˆ°å…¬å…±å—</li>
<li><strong>åŠ¨æ€å¯¼å…¥Vueç»„ä»¶</strong>ï¼šåœ¨ç»„ä»¶å†…éƒ¨ä¹Ÿä½¿ç”¨åŠ¨æ€å¯¼å…¥</li>
</ol>
<h3 data-id="heading-10">æ€§èƒ½ç›‘æ§ä¸åº¦é‡</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ·»åŠ è·¯ç”±åŠ è½½æ€§èƒ½ç›‘æ§</span>
<span class="hljs-keyword">const</span> loadStartTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()

router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> startTime = performance.<span class="hljs-title function_">now</span>()
  
  <span class="hljs-title function_">next</span>()
  
  <span class="hljs-comment">// ç›‘æ§è·¯ç”±åˆ‡æ¢æ€§èƒ½</span>
  <span class="hljs-keyword">const</span> loadTime = performance.<span class="hljs-title function_">now</span>() - startTime
  <span class="hljs-keyword">if</span> (loadTime &gt; <span class="hljs-number">1000</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`è·¯ç”± <span class="hljs-subst">${to.path}</span> åŠ è½½æ—¶é—´è¿‡é•¿: <span class="hljs-subst">${loadTime}</span>ms`</span>)
  }
})
</code></pre>
<h2 data-id="heading-11">ç¬¬äº”éƒ¨åˆ†ï¼šViteç¯å¢ƒä¸‹çš„ä¼˜åŒ–å·®å¼‚</h2>
<p>å¦‚æœä½ ä½¿ç”¨Viteè€ŒéWebpackï¼Œæ‡’åŠ è½½çš„å®ç°æ›´åŠ ç®€æ´ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Viteä¸­çš„åŠ¨æ€å¯¼å…¥ï¼ˆæ— éœ€ç‰¹æ®Šé…ç½®ï¼‰</span>
<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/dashboard'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../views/Dashboard.vue'</span>)
  }
]
</code></pre>
<p>Viteåˆ©ç”¨åŸç”ŸESæ¨¡å—ç‰¹æ€§ï¼Œåœ¨å¼€å‘ç¯å¢ƒä¸­æä¾›æå¿«çš„çƒ­æ›´æ–°ï¼Œåœ¨ç”Ÿäº§æ„å»ºæ—¶è‡ªåŠ¨è¿›è¡Œä»£ç åˆ†å‰²ã€‚</p>
<h2 data-id="heading-12">ç»“è¯­ï¼šæ‰“é€ è½»ç›ˆè€Œå¼ºå¤§çš„Vueåº”ç”¨</h2>
<p>Vue Routeræ‡’åŠ è½½ä¸ç»„ä»¶åˆ†åŒ…ä¼˜åŒ–ä¸ä»…æ˜¯ä¸€ç§æŠ€æœ¯å®ç°ï¼Œæ›´æ˜¯ä¸€ç§<strong>ç”¨æˆ·ä½“éªŒè‡³ä¸Šçš„å¼€å‘å“²å­¦</strong>ã€‚é€šè¿‡å°†"ä¸€æ¬¡æ€§åŠ è½½"è½¬å˜ä¸º"æŒ‰éœ€åŠ è½½"ï¼Œæˆ‘ä»¬ä¸ä»…å‡å°‘äº†åˆå§‹åŠ è½½æ—¶é—´ï¼Œè¿˜åˆ›é€ äº†æ›´åŠ æµç•…ã€å“åº”æ›´å¿«çš„åº”ç”¨ä½“éªŒã€‚</p>
<p>è®°ä½ï¼Œä¼˜åŒ–çš„æ ¸å¿ƒåœ¨äº<strong>å¹³è¡¡</strong>ï¼šä»£ç åˆ†å‰²çš„ç²’åº¦è¶Šç»†ï¼ŒHTTPè¯·æ±‚è¶Šå¤šï¼›åˆ†å‰²çš„ç²’åº¦è¶Šç²—ï¼ŒåŠ è½½å†—ä½™è¶Šå¤šã€‚ä¼˜ç§€çš„å¼€å‘è€…éœ€è¦æ ¹æ®å…·ä½“åº”ç”¨åœºæ™¯æ‰¾åˆ°æœ€ä½³å¹³è¡¡ç‚¹ã€‚</p>
<p>åœ¨å½“ä»Šè¿½æ±‚æè‡´ç”¨æˆ·ä½“éªŒçš„æ—¶ä»£ï¼ŒæŒæ¡æ‡’åŠ è½½ä¸åˆ†åŒ…ä¼˜åŒ–æŠ€æœ¯ï¼Œæ„å‘³ç€ä½ èƒ½å¤Ÿæ‰“é€ å‡ºæ—¢åŠŸèƒ½ä¸°å¯Œåˆå“åº”è¿…é€Ÿçš„å‰ç«¯åº”ç”¨ã€‚è¿™ä¸ä»…æ˜¯æŠ€æœ¯èƒ½åŠ›çš„ä½“ç°ï¼Œæ›´æ˜¯å¯¹ç”¨æˆ·æ—¶é—´ä¸ä½“éªŒçš„å°Šé‡ã€‚å¼€å§‹ä¼˜åŒ–ä½ çš„Vueåº”ç”¨å§ï¼Œè®©æ¯ä¸€ä¸ªå­—èŠ‚çš„åŠ è½½éƒ½æœ‰å…¶ä»·å€¼ï¼Œè®©æ¯ä¸€æ¬¡ç”¨æˆ·äº¤äº’éƒ½æµç•…è‡ªç„¶ã€‚</p>
<p><strong>ä¼˜åŒ–ä¹‹è·¯ï¼Œæ°¸æ— æ­¢å¢ƒï¼›ç”¨æˆ·ä½“éªŒï¼Œå§‹ç»ˆè‡³ä¸Šã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¢å¯¹æ–°ç”µè„‘ï¼Œå‰ç«¯å¼€å‘è€…éœ€è¦è¿›è¡Œå“ªäº›åˆå§‹åŒ–é…ç½®]]></title>    <link>https://juejin.cn/post/7581396828123103266</link>    <guid>https://juejin.cn/post/7581396828123103266</guid>    <pubDate>2025-12-08T23:40:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581396828123103266" data-draft-id="7581314241411317795" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¢å¯¹æ–°ç”µè„‘ï¼Œå‰ç«¯å¼€å‘è€…éœ€è¦è¿›è¡Œå“ªäº›åˆå§‹åŒ–é…ç½®"/> <meta itemprop="keywords" content="å‰ç«¯,GitHub"/> <meta itemprop="datePublished" content="2025-12-08T23:40:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æŠ¹èŒ¶å†°æ·‡æ·‹"/> <meta itemprop="url" content="https://juejin.cn/user/4212984289956471"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¢å¯¹æ–°ç”µè„‘ï¼Œå‰ç«¯å¼€å‘è€…éœ€è¦è¿›è¡Œå“ªäº›åˆå§‹åŒ–é…ç½®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984289956471/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æŠ¹èŒ¶å†°æ·‡æ·‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T23:40:36.000Z" title="Mon Dec 08 2025 23:40:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æŠ¹èŒ¶ã€‚
æœ€è¿‘å°†Macç”µè„‘é™çº§æˆV12å,éœ€è¦é‡æ–°å®‰è£…è½¯ä»¶ï¼Œé…ç½®ç¯å¢ƒï¼Œä¾¿è®°å½•è¿™ä¸€è¿‡ç¨‹ï¼Œåˆ†äº«ç»™éœ€è¦çš„äººå’Œæœªæ¥æŸä¸ªæ—¶åˆ»çš„è‡ªå·±ã€‚</p>
<h2 data-id="heading-1">è½¯ä»¶</h2>
<p>è¿˜åŸåˆ°åˆå§‹çŠ¶æ€çš„ç”µè„‘ï¼Œå°±åªæœ‰safariæµè§ˆå™¨äº†ï¼Œå¹³æ—¶ç”¨æƒ¯äº†è°·æ­Œï¼Œæ‰€ä»¥ç¬¬ä¸€æ­¥å°±æ˜¯ä¸‹è½½è°·æ­Œæµè§ˆå™¨ã€‚
ä¾æ­¤å®‰è£…çš„è½¯ä»¶æ¸…å•å¦‚ä¸‹ï¼š</p>
<ol>
<li>è°·æ­Œæµè§ˆå™¨</li>
<li>vscode (ç¼–ç å·¥å…·)</li>
<li>notion ï¼ˆç¬”è®°ï¼‰</li>
<li>snipate ï¼ˆæˆªå›¾è½¯ä»¶ï¼‰</li>
<li>ä¸‡å…´è„‘å›¾ ï¼ˆæ€ç»´å¯¼å›¾ï¼‰</li>
<li>å¾®ä¿¡</li>
<li>æ¬§è·¯è¯å…¸ ï¼ˆè‹±è¯­ï¼‰</li>
<li>è…¾è®¯ä¼šè®®</li>
</ol>
<h2 data-id="heading-2">ç¯å¢ƒä¾èµ–</h2>
<h3 data-id="heading-3">1. å®‰è£…xcode</h3>
<p>æŒ‡ä»¤<code>xcode-select --install</code>
å¦‚æœæ²¡æœ‰å®‰è£…xcodeï¼Œåœ¨è¯•å›¾ç”¨æŒ‡ä»¤å®‰è£…<code>nvm</code>æ—¶ï¼Œå°±ä¼šçœ‹åˆ°ä¸‹é¢çš„æç¤º</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6b3b6c26cd14b3b9e7bbe5239d30d94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oq56Iy25Yaw5reH5reL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765842405&amp;x-signature=x0TiF2diCXIidX%2Bvnl8PEUzbu34%3D" alt="image.png" width="70%" loading="lazy"/>
<h3 data-id="heading-4">2. gitç”Ÿæ€</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgit-scm.com%2Fbook%2Fzh%2Fv2%2F%25E8%25B5%25B7%25E6%25AD%25A5-%25E5%25AE%2589%25E8%25A3%2585-Git" target="_blank" title="https://git-scm.com/book/zh/v2/%E8%B5%B7%E6%AD%A5-%E5%AE%89%E8%A3%85-Git" ref="nofollow noopener noreferrer">git-scm.com/book/zh/v2/â€¦</a></p>
<p>å®˜ç½‘æç¤ºæœ€æ–¹ä¾¿çš„æ˜¯é€šè¿‡<code>xcode</code>å®‰è£…</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f9161b9fba14399bf6729f07f55abc1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oq56Iy25Yaw5reH5reL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765842405&amp;x-signature=YdYJCeKKgOXhXNFsXb4N%2ByJ198Y%3D" alt="image.png" width="70%" loading="lazy"/>
<p>ç›´æ¥è¿è¡Œ<code>git --version</code>åï¼Œè§¦å‘xcodeçš„å®‰è£…æç¤ºï¼Œå¦‚æœæ²¡æœ‰ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œ<code>xcode-select --install</code></p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37c76849031446caa472b1dcfeecfa7b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oq56Iy25Yaw5reH5reL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765842405&amp;x-signature=dCRpkzOa2YqDcFMDVcZ6r7hokho%3D" alt="image.png" width="70%" loading="lazy"/>
<h4 data-id="heading-5">git é‚®ç®±å’Œæ˜µç§°é…ç½®</h4>
<pre><code class="hljs language-git" lang="git"># é…ç½®å…¨å±€ç”¨æˆ·åï¼ˆè¯·å°† Your Name æ›¿æ¢æˆä½ çš„åå­—ï¼‰
git config --global user.name "Your Name"

# é…ç½®å…¨å±€é‚®ç®±ï¼ˆè¯·å°† your.email@example.com æ›¿æ¢æˆä½ çš„é‚®ç®±ï¼‰
git config --global user.email "your.email@example.com"
</code></pre>
<p>æŸ¥çœ‹é…ç½®æ˜¯å¦ç”Ÿæ•ˆ</p>
<pre><code class="hljs language-lua" lang="lua">git <span class="hljs-built_in">config</span> <span class="hljs-comment">--list</span>
</code></pre>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb1112bfc07c444d80855ff4003f59d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oq56Iy25Yaw5reH5reL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765842405&amp;x-signature=D1iizponpVW9oG%2BRNK7ozv1NmHM%3D" alt="image.png" width="70%" loading="lazy"/>
<h4 data-id="heading-6">git SSHç”Ÿæˆä¸é…ç½®</h4>
<h5 data-id="heading-7">1. ç”ŸæˆSSH key</h5>
<pre><code class="hljs language-perl" lang="perl">ssh-keygen -t ed25519 -C <span class="hljs-string">"your_email@example.com"</span>
</code></pre>
<ol>
<li><strong>â€œEnter file in which to save the key (...)â€</strong> ï¼šè¯¢é—®å¯†é’¥ä¿å­˜è·¯å¾„ã€‚<strong>ç›´æ¥æŒ‰å›è½¦</strong>ï¼Œä½¿ç”¨é»˜è®¤è·¯å¾„Â <code>~/.ssh/id_ed25519</code>ã€‚</li>
<li><strong>â€œEnter passphrase (empty for no passphrase):â€</strong> ï¼šè®¾ç½®ä¸€ä¸ª<strong>å¯†é’¥å¯†ç </strong>ã€‚è¾“å®ŒæŒ‰å›è½¦ï¼Œå¹¶æŒ‰è¦æ±‚å†ç¡®è®¤è¾“å…¥ä¸€æ¬¡ã€‚äº²æµ‹è¾“å…¥å¯†ç åæ¯æ¬¡è¿è¡ŒgitæŒ‡ä»¤éƒ½è¦æ•²å¯†ç ã€‚</li>
</ol>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b681e1d94b04f25a9f99d6a20b8cb1a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oq56Iy25Yaw5reH5reL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765842405&amp;x-signature=VUuqG5a38ol%2Fi7AFi7Z8XExdBik%3D" alt="image.png" width="70%" loading="lazy"/>
<h5 data-id="heading-8">2. å¤åˆ¶å…¬é’¥åˆ°ç²˜è´´æ¿</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é€šç”¨å‘½ä»¤ï¼ˆè‡ªåŠ¨å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼‰</span>
pbcopy &lt; ~/.ssh/id_ed25519.pub
</code></pre>
<h5 data-id="heading-9">3. é…ç½®å…¬é’¥åˆ°github</h5>
<p>å¤´åƒ=&gt; setting= &gt;SSH and GPG keys</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/395c53f8158848e592e634cac42b290d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oq56Iy25Yaw5reH5reL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765842405&amp;x-signature=UXN9DMHjtu7zCBFH%2Bti990BIlQM%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-10">4. æµ‹è¯•è¿æ¥</h5>
<p>æ·»åŠ åï¼Œåœ¨ç»ˆç«¯æµ‹è¯•è¿æ¥æ˜¯å¦æˆåŠŸï¼š</p>
<pre><code class="hljs language-css" lang="css">ssh -T git<span class="hljs-keyword">@github</span>.com
</code></pre>
<h3 data-id="heading-11">3. nodeç”Ÿæ€</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fzh-cn%2Fdownload" target="_blank" title="https://nodejs.org/zh-cn/download" ref="nofollow noopener noreferrer">nodejs.org/zh-cn/downlâ€¦</a></p>
<p>ç°åœ¨nodeå®˜ç½‘è¿›åŒ–äº†ï¼Œæ•´ä¸ªnodeç”Ÿæ€éƒ½å¯ä»¥æŒ‡ä»¤åŒ–å®‰è£…äº†ã€‚è¿™é‡Œçš„ä½¿ç”¨å‰ææ˜¯å·²ç»å®‰è£…xcode</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/def97d37413d411c8ac205c0caf29ce0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oq56Iy25Yaw5reH5reL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765842405&amp;x-signature=Ewf7rXisKU0Hm7NZG%2B1hWaPOWtg%3D" alt="image.png" loading="lazy"/></p>
<p>å®˜ç½‘æŒ‡ä»¤æ¬è¿å·¥å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"># ä¸‹è½½å¹¶å®‰è£… nvmï¼š
curl -o- <span class="hljs-attr">https</span>:<span class="hljs-comment">//raw.githubusercontent.com/nvm-sh/nvm/v0.40.3/install.sh | bash</span>

# ä»£æ›¿é‡å¯ shell
\. <span class="hljs-string">"$HOME/.nvm/nvm.sh"</span>

# ä¸‹è½½å¹¶å®‰è£… <span class="hljs-title class_">Node</span>.<span class="hljs-property">js</span>ï¼š
nvm install <span class="hljs-number">24</span>

# éªŒè¯ <span class="hljs-title class_">Node</span>.<span class="hljs-property">js</span> ç‰ˆæœ¬ï¼š
node -v 

# <span class="hljs-title class_">Should</span> print <span class="hljs-string">"v24.11.1"</span>.
# ä¸‹è½½å¹¶å®‰è£… pnpmï¼š
corepack enable pnpm

# éªŒè¯ pnpm ç‰ˆæœ¬ï¼š

pnpm -v
</code></pre>
<p>äº²æµ‹å®‰è£…å®˜ç½‘æŒ‡ä»¤ç›´æ¥ä¸€æ­¥æˆåŠŸã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œä»githubä¸‹è½½é¡¹ç›®ï¼Œå°±å¯ä»¥å¼€å§‹ç¾ç¾å¾—å†™ä»£ç äº†ã€‚</p>
<h2 data-id="heading-12">æ€»ç»“</h2>
<p>æœ¬æ–‡æ¢³ç†äº†é‡è£…ç³»ç»Ÿåï¼Œéœ€è¦å®‰è£…çš„è½¯ä»¶å’Œç¯å¢ƒä¾èµ–ã€‚ä»å…¥é—¨åˆ°ç”µè„‘å¯ä»¥å¼€å§‹å¤„ç†å·¥ä½œï¼Œéœ€è¦å®‰è£…è¿™äº›è½¯ä»¶ï¼Œä¾›å¤§å®¶å‚è€ƒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ Tiptap ç¼–å†™ä¸€ä¸ªå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ä¸ºä»€ä¹ˆå¯¹å¾ˆå¤šäººæ¥è¯´å¾ˆéš¾ ğŸ¤”ğŸ¤”ğŸ¤”]]></title>    <link>https://juejin.cn/post/7581385235964510242</link>    <guid>https://juejin.cn/post/7581385235964510242</guid>    <pubDate>2025-12-08T23:47:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581385235964510242" data-draft-id="7581385235964395554" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ Tiptap ç¼–å†™ä¸€ä¸ªå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ä¸ºä»€ä¹ˆå¯¹å¾ˆå¤šäººæ¥è¯´å¾ˆéš¾ ğŸ¤”ğŸ¤”ğŸ¤”"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,GitHub"/> <meta itemprop="datePublished" content="2025-12-08T23:47:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Moment"/> <meta itemprop="url" content="https://juejin.cn/user/3782764966460398"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ Tiptap ç¼–å†™ä¸€ä¸ªå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ä¸ºä»€ä¹ˆå¯¹å¾ˆå¤šäººæ¥è¯´å¾ˆéš¾ ğŸ¤”ğŸ¤”ğŸ¤”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3782764966460398/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Moment
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T23:47:48.000Z" title="Mon Dec 08 2025 23:47:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><blockquote>
<p>æˆ‘æ­£åœ¨å¼€å‘ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxun082%2FDocFlow" target="_blank" title="https://github.com/xun082/DocFlow" ref="nofollow noopener noreferrer">DocFlow</a>ï¼Œä¸€ä¸ªå®Œæ•´çš„ AI å…¨æ ˆååŒæ–‡æ¡£é¡¹ç›®ã€‚è¿™ä¸ªé¡¹ç›®æ¶µç›–äº†å‰ç«¯å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆåŸºäº Tiptapï¼‰ã€åç«¯æœåŠ¡ã€AI é›†æˆã€å®æ—¶åä½œç­‰å¤šä¸ªæŠ€æœ¯æ ˆã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ç§¯ç´¯äº†ä¸°å¯Œçš„å®æˆ˜ç»éªŒï¼ŒåŒ…æ‹¬ Tiptap çš„æ·±åº¦å®šåˆ¶ã€æ€§èƒ½ä¼˜åŒ–ã€åä½œåŠŸèƒ½å®ç°ç­‰æ ¸å¿ƒéš¾ç‚¹ã€‚å¦‚æœä½ å¯¹ AI å…¨æ ˆå¼€å‘ã€Tiptap å¯Œæ–‡æœ¬ç¼–è¾‘å™¨å®šåˆ¶ã€æˆ–è€… DocFlow é¡¹ç›®çš„å®Œæ•´æŠ€æœ¯æ–¹æ¡ˆæ„Ÿå…´è¶£ï¼Œæƒ³ç³»ç»Ÿå­¦ä¹ ç›¸å…³æŠ€æœ¯æ ˆå’Œæœ€ä½³å®è·µï¼Œæ¬¢è¿åŠ æˆ‘å¾®ä¿¡ <code>yunmz777</code> ç§èŠå’¨è¯¢ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/edf437a5ed804b62b407246cbbfd9574~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9tZW50:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765842468&amp;x-signature=H6pEszCPtXo3pprOvi6u4Ur2YwQ%3D" alt="20251209053826" loading="lazy"/></p>
<p>ç”¨ Tiptap åšå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå¬èµ·æ¥æŒºç¾å¥½ï¼Œå®é™…ä¸Šå´è®©ä¸å°‘äººå¤´ç–¼ã€‚è™½ç„¶å®ƒæ¯”ä»é›¶å¼€å§‹å†™ç¼–è¾‘å™¨è¦å‹å¥½å¾—å¤šï¼Œä½†çœŸæ­£ä¸Šæ‰‹åä½ ä¼šå‘ç°ï¼Œæƒ³è¦åšå‡ºä¸€ä¸ªèƒ½ç”¨çš„ç¼–è¾‘å™¨ï¼Œéš¾åº¦è¿œè¶…é¢„æœŸã€‚</p>
<p>è¿™ç¯‡æ–‡ç« æƒ³èŠèŠï¼Œä¸ºä»€ä¹ˆ Tiptap å¯¹å¾ˆå¤šäººæ¥è¯´è¿™ä¹ˆéš¾ï¼Œä»¥åŠåœ¨å®é™…é¡¹ç›®ä¸­ä¼šé‡åˆ°å“ªäº›å‘ã€‚</p>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆå¾ˆå¤šäººé€‰æ‹© Tiptap</h2>
<p>å…ˆè¯´è¯´ Tiptap å¸å¼•äººçš„åœ°æ–¹ã€‚</p>
<p><code>åŸºäº ProseMirror çš„ç¨³å¥åŸºç¡€</code> æ˜¯å®ƒæœ€å¤§çš„å–ç‚¹ã€‚ProseMirror è¿™ä¸ªåº•å±‚æ¡†æ¶è¢« Notionã€Linear è¿™äº›äº§å“éªŒè¯è¿‡ï¼Œç¨³å®šæ€§æ²¡é—®é¢˜ã€‚Tiptap åœ¨å®ƒä¸Šé¢åšäº†å°è£…ï¼Œæä¾›äº† starter-kitã€åŸºç¡€æ‰©å±•ã€getHTMLã€getJSON è¿™äº›å¸¸ç”¨ APIï¼Œè®©ä½ ä¸ç”¨ç›´æ¥é¢å¯¹ ProseMirror çš„å¤æ‚æ€§ã€‚</p>
<p><code>æ¨¡å—åŒ–è®¾è®¡</code> ä¹Ÿå¾ˆè®¨å–œã€‚æŒ‰éœ€åŠ è½½ï¼ŒåŸºç¡€åŠŸèƒ½å¯ä»¥ä¿æŒ bundle å¾ˆå°ï¼Œéœ€è¦çš„æ—¶å€™å†æ‰©å±•ã€‚è¿™ç§è®¾è®¡ç¬¦åˆç°ä»£å‰ç«¯å¼€å‘ä¹ æƒ¯ï¼Œä½ å¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚çµæ´»é€‰æ‹©åŠŸèƒ½ã€‚</p>
<p><code>æ¡†æ¶é›†æˆ</code> åšå¾—ä¸é”™ã€‚Reactã€Vueã€Svelte éƒ½æœ‰å®˜æ–¹åŒ…ï¼Œå¯ä»¥åœ¨ç†Ÿæ‚‰çš„æ¡†æ¶ç”Ÿæ€é‡Œå·¥ä½œï¼Œä¸ç”¨é‡æ–°å­¦ä¹ ä¸€å¥—ä¸œè¥¿ã€‚</p>
<p><code>ç¤¾åŒºæ´»è·ƒåº¦</code> ä¹Ÿè¿˜è¡Œã€‚GitHub ä¸Š star ä¸å°‘ï¼Œissue è®¨è®ºä¹Ÿå¾ˆå¤šï¼Œé‡åˆ°é—®é¢˜è‡³å°‘èƒ½æ‰¾åˆ°ä¸€äº›çº¿ç´¢ã€‚</p>
<p>æ‰€ä»¥ Tiptap ç¡®å®é™ä½äº†é—¨æ§›ï¼Œä½†é™ä½é—¨æ§›ä¸ç­‰äºæ¶ˆé™¤å¤æ‚æ€§ã€‚è¿™æ˜¯ç†è§£å®ƒä¸ºä»€ä¹ˆä»ç„¶å›°éš¾çš„å…³é”®ã€‚</p>
<h2 data-id="heading-1">ç„¶è€Œï¼Œ"éš¾"çš„åŸå› å¾ˆå¤š</h2>
<p>"é™ä½é—¨æ§›" â‰  "å˜æˆå®¹æ˜“"ã€‚ä¸‹é¢è¿™äº›æŒ‘æˆ˜ï¼Œå¾€å¾€åœ¨é¡¹ç›®æ¨è¿›è¿‡ç¨‹ä¸­æ‰ä¼šé€æ¸æš´éœ²ã€‚</p>
<h3 data-id="heading-2">1. åº•å±‚å¤æ‚ï¼šProseMirror çš„æŠ½è±¡ä¸å¤æ‚æ€§</h3>
<p>Tiptap è™½ç„¶å°è£…äº† ProseMirrorï¼Œä½†æœ¬è´¨ä¸Šè¿˜æ˜¯åŸºäºå®ƒã€‚æœ‰æ–‡ç« æåˆ°ï¼š</p>
<blockquote>
<p>"Tiptap is built on top of ProseMirror, a robust yet difficult to master editor."</p>
</blockquote>
<p>è¿™è¯ä¸å‡ã€‚ä¸€æ—¦ä½ éœ€è¦åšé«˜çº§å®šåˆ¶ï¼Œæ¯”å¦‚è‡ªå®šä¹‰èŠ‚ç‚¹ã€æ’ä»¶ã€å‘½ä»¤ã€åä½œåŒæ­¥ï¼Œä½ å°±å¾—æ·±å…¥ ProseMirrorã€‚é‚£äº›æŠ½è±¡æ¦‚å¿µå¯¹å¾ˆå¤šå‰ç«¯å·¥ç¨‹å¸ˆæ¥è¯´å¹¶ä¸ç›´è§‚ã€‚</p>
<h4 data-id="heading-3">æŠ½è±¡æ¦‚å¿µçš„å­¦ä¹ æ›²çº¿</h4>
<p><code>Document Model</code> æ˜¯ç¬¬ä¸€ä¸ªåã€‚ProseMirror ç”¨è‡ªå·±çš„ä¸€å¥—æ–‡æ¡£æ¨¡å‹ï¼Œä¸æ˜¯ç›´æ¥æ“ä½œ DOMã€‚è¿™æ˜¯ä¸ªæ ‘çŠ¶ç»“æ„ï¼Œæ¯ä¸ªèŠ‚ç‚¹æœ‰ç±»å‹ã€å±æ€§ã€å†…å®¹ã€‚ç†è§£è¿™ä¸ªæ¨¡å‹éœ€è¦æ€ç»´è½¬æ¢ï¼Œä¹ æƒ¯äº† DOM æ“ä½œçš„äººä¸€å¼€å§‹ä¼šä¸é€‚åº”ã€‚</p>
<p><code>Schema</code> è®¾è®¡ä¹Ÿä¸ç®€å•ã€‚å®ƒå®šä¹‰äº†æ–‡æ¡£é‡Œèƒ½æœ‰å“ªäº›èŠ‚ç‚¹å’Œæ ‡è®°ï¼Œä»¥åŠå®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚è®¾è®¡ä¸€ä¸ªåˆç†çš„ schema éœ€è¦æ·±å…¥ç†è§£æ–‡æ¡£ç»“æ„ï¼Œé‡åˆ°è¡¨æ ¼åµŒå¥—ã€åˆ—è¡¨åµŒå¥—è¿™äº›å¤æ‚æƒ…å†µæ—¶å°¤å…¶å¤´ç–¼ã€‚</p>
<p><code>Transaction</code> ç³»ç»Ÿæ˜¯å¦ä¸€ä¸ªéš¾ç‚¹ã€‚ProseMirror ç”¨ transaction å¤„ç†æ‰€æœ‰æ–‡æ¡£å˜æ›´ï¼Œæ¯ä¸ªç¼–è¾‘æ“ä½œéƒ½ä¼šåˆ›å»ºä¸€ä¸ª transactionï¼Œæè¿°ä»æ—§çŠ¶æ€åˆ°æ–°çŠ¶æ€çš„å˜åŒ–ã€‚è¦å®ç°æ’¤é”€ã€é‡åšã€åä½œè¿™äº›åŠŸèƒ½ï¼Œå¿…é¡»ç†è§£ transaction çš„å·¥ä½œåŸç†ã€‚</p>
<p><code>Selection</code> ç®¡ç†æ¯”æƒ³è±¡ä¸­å¤æ‚ã€‚ä¸åŒæµè§ˆå™¨å¯¹ selection çš„å¤„ç†ä¸ä¸€è‡´ï¼Œæ–‡æ¡£ç»“æ„å¤æ‚æ—¶ï¼ˆæ¯”å¦‚è¡¨æ ¼ã€åˆ—è¡¨ï¼‰ï¼Œselection çš„è¡Œä¸ºç»å¸¸ä¸ç¬¦åˆé¢„æœŸã€‚ä½ ä»¥ä¸ºé€‰ä¸­äº†ï¼Œå®é™…ä¸Šå¯èƒ½é€‰ä¸­çš„æ˜¯åˆ«çš„ä¸œè¥¿ã€‚</p>
<p><code>Node View</code> æ›´éº»çƒ¦ã€‚å½“ä½ éœ€è¦è‡ªå®šä¹‰èŠ‚ç‚¹æ¸²æŸ“å’Œäº¤äº’æ—¶ï¼ˆæ¯”å¦‚ä»£ç å—ã€è¡¨æ ¼ã€åµŒå…¥å†…å®¹ï¼‰ï¼Œä½ å¾—åŒæ—¶ç†è§£ Reactã€Vue ç»„ä»¶ç³»ç»Ÿå’Œ ProseMirror çš„èŠ‚ç‚¹ç³»ç»Ÿï¼Œä¸¤è€…ä¹‹é—´çš„æ¡¥æ¥å¹¶ä¸æ€»æ˜¯ç›´è§‚ã€‚</p>
<h4 data-id="heading-4">å®é™…å¼€å‘ä¸­çš„å…·ä½“å›°éš¾</h4>
<p>å¾ˆå¤šäººä¸€å¼€å§‹è§‰å¾—"å†™ä¸ªå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ä¸å°±æ˜¯ä¸ª textarea + toolbar å—"ï¼Œç­‰çœŸæ­£è¦å…¼å®¹å¤šä¸ªæ ¼å¼ã€æ’å…¥å›¾ç‰‡è¡¨æ ¼ã€æ’¤é”€é‡åšã€åä½œã€ç²˜è´´å¤„ç†ã€HTML å’Œ JSON è½¬æ¢æ—¶ï¼Œæ‰å‘ç°å‘æ·±å¦‚æµ·ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œå®ç°ä¸€ä¸ªç®€å•çš„å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½ï¼Œä½ éœ€è¦ï¼š</p>
<ol>
<li>åˆ›å»ºè‡ªå®šä¹‰ Image èŠ‚ç‚¹ç±»å‹</li>
<li>å®ç° Node View æ¥æ¸²æŸ“å›¾ç‰‡</li>
<li>å¤„ç†å›¾ç‰‡ä¸Šä¼ é€»è¾‘ï¼ˆæ‹–æ‹½ã€ç²˜è´´ã€URL è¾“å…¥ç­‰å¤šç§æ–¹å¼ï¼‰</li>
<li>å¤„ç†å›¾ç‰‡åŠ è½½å¤±è´¥çš„æƒ…å†µ</li>
<li>å®ç°å›¾ç‰‡å¤§å°è°ƒæ•´ã€å¯¹é½ç­‰åŠŸèƒ½</li>
<li>å¤„ç†å“åº”å¼å¸ƒå±€</li>
<li>å¤„ç†å›¾ç‰‡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–</li>
</ol>
<p>è¿™è¿˜åªæ˜¯å›¾ç‰‡åŠŸèƒ½ã€‚å¦‚æœå†åŠ ä¸Šè¡¨æ ¼ã€ä»£ç å—ã€åµŒå…¥å†…å®¹ï¼Œå¤æ‚åº¦ä¼šæˆå€å¢åŠ ã€‚</p>
<h3 data-id="heading-5">2. åŠŸèƒ½å¤šæ ·ï¼Œéœ€æ±‚åœºæ™¯å·®å¼‚æå¤§</h3>
<p>å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ä¸æ˜¯"ä¸€ä¸ªæŒ‰é’®èƒ½è§£å†³æ‰€æœ‰é—®é¢˜"ã€‚ä¸åŒåº”ç”¨å¯¹æ–‡æ¡£ç¼–è¾‘çš„éœ€æ±‚åƒå·®ä¸‡åˆ«ï¼Œè¿™ç§å¤šæ ·æ€§è®©"ä¸‡èƒ½"è§£å†³æ–¹æ¡ˆå˜å¾—ä¸ç°å®ã€‚</p>
<h4 data-id="heading-6">ä» Wordã€Google Docs å¤åˆ¶ç²˜è´´çš„å™©æ¢¦</h4>
<p>ä» Word å¤åˆ¶å†…å®¹åˆ°ç¼–è¾‘å™¨ï¼Œå¬èµ·æ¥ç®€å•ï¼Œå®é™…ä¸Šæ˜¯ä¸ªå™©æ¢¦ã€‚</p>
<p>æµè§ˆå™¨æ¥æ”¶åˆ°çš„æ˜¯ä¸€å †å†…è”æ ·å¼ã€åµŒå¥—çš„ div å’Œ spanã€å­—ä½“ä¿¡æ¯ã€é¢œè‰²ä¿¡æ¯ã€‚è¿™äº›å†…å®¹éœ€è¦è¢«"æ¸…æ´—"å’Œè½¬æ¢ä¸ºä½ ç¼–è¾‘å™¨ä¸­çš„èŠ‚ç‚¹ç»“æ„ã€‚ä½ å¾—è¯†åˆ«å’Œè½¬æ¢æ®µè½ã€æ ‡é¢˜ã€åˆ—è¡¨ï¼Œå¤„ç†è¡¨æ ¼ï¼ˆåŒ…æ‹¬åˆå¹¶å•å…ƒæ ¼ã€åµŒå¥—è¡¨æ ¼ï¼‰ï¼Œå¤„ç†å›¾ç‰‡å’ŒåµŒå…¥å†…å®¹ï¼Œæ¸…ç†ä¸å¿…è¦çš„æ ·å¼å’Œæ ‡ç­¾ï¼Œå¤„ç†ç‰¹æ®Šå­—ç¬¦å’Œç¼–ç é—®é¢˜ã€‚</p>
<p>å¾ˆå¤šç¼–è¾‘å™¨ï¼ˆåŒ…æ‹¬ Tiptapï¼‰å¯¹æ­¤å¤„ç†å¹¶ä¸ç†æƒ³ã€‚ä½ å¾€å¾€éœ€è¦è‡ªå·±å®ç°æˆ–æ‰©å±•ç²˜è´´å¤„ç†é€»è¾‘ï¼Œè¿™éœ€è¦æ·±å…¥ç†è§£ ProseMirror çš„ paste rules å’Œ clipboard å¤„ç†æœºåˆ¶ã€‚</p>
<h4 data-id="heading-7">åª’ä½“ä¸å¤æ‚å†…å®¹æ”¯æŒçš„å·¥ä½œé‡è¢«ä½ä¼°</h4>
<p>ä½ å¯èƒ½éœ€è¦æ”¯æŒå›¾ç‰‡ã€è§†é¢‘ã€embedã€é™„ä»¶ã€è¡¨æ ¼ã€è¡¨å•ï¼Œè¿˜è¦æ”¯æŒæ‹–æ‹½ã€ä¸Šä¼ ã€è°ƒæ•´ã€é‡æ’ã€è‡ªå®šä¹‰æ ·å¼ã€å“åº”å¼ã€å…¼å®¹å¤šç«¯ã€‚è¿™æ„å‘³ç€ä¸ä»…æ˜¯æ–‡æœ¬ï¼Œè¿˜è¦ç®¡ç†å¤æ‚ç»“æ„ã€‚</p>
<p>ä»¥è¡¨æ ¼ä¸ºä¾‹ï¼Œå®ç°ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„è¡¨æ ¼ç¼–è¾‘å™¨éœ€è¦ï¼š</p>
<ul>
<li>è¡¨æ ¼çš„åˆ›å»ºã€åˆ é™¤ã€è¡Œåˆ—çš„å¢åˆ </li>
<li>å•å…ƒæ ¼çš„åˆå¹¶å’Œæ‹†åˆ†</li>
<li>è¡¨æ ¼æ ·å¼çš„è‡ªå®šä¹‰ï¼ˆè¾¹æ¡†ã€èƒŒæ™¯è‰²ã€å¯¹é½æ–¹å¼ç­‰ï¼‰</li>
<li>è¡¨æ ¼å†…å®¹çš„ç¼–è¾‘ï¼ˆåŒ…æ‹¬åµŒå¥—å…¶ä»–èŠ‚ç‚¹ç±»å‹ï¼‰</li>
<li>è¡¨æ ¼çš„å“åº”å¼å¤„ç†ï¼ˆåœ¨å°å±å¹•ä¸Šå¦‚ä½•æ˜¾ç¤ºï¼‰</li>
<li>è¡¨æ ¼çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–</li>
<li>è¡¨æ ¼çš„å¤åˆ¶ç²˜è´´å¤„ç†</li>
</ul>
<p>è¿™è¿˜åªæ˜¯è¡¨æ ¼ã€‚å¦‚æœå†åŠ ä¸Šå›¾ç‰‡çš„æ‹–æ‹½è°ƒæ•´å¤§å°ã€è§†é¢‘çš„æ’­æ”¾æ§åˆ¶ã€åµŒå…¥å†…å®¹çš„äº¤äº’ï¼Œå·¥ä½œé‡ä¼šæ€¥å‰§å¢åŠ ã€‚å¾ˆå¤šäººä½ä¼°äº†è¿™éƒ¨åˆ†å·¥ä½œé‡ï¼Œä»¥ä¸º"ç”¨ä¸ªæ‰©å±•å°±è¡Œ"ï¼Œå®é™…ä¸Šå¾€å¾€éœ€è¦å¤§é‡çš„å®šåˆ¶å¼€å‘ã€‚</p>
<h4 data-id="heading-8">åä½œåŠŸèƒ½çš„æŒ‡æ•°çº§å¤æ‚åº¦</h4>
<p>å¦‚æœè¿˜è¦åŠ åä½œï¼ˆå¤šäººå®æ—¶ç¼–è¾‘ï¼‰ã€ç‰ˆæœ¬å†å²ã€è¯„è®ºã€å»ºè®®ç¼–è¾‘ã€åˆå¹¶ã€å†²çªè§£å†³ï¼Œé‚£å°±æ›´å¤æ‚äº†ã€‚æœ‰æ–‡ç« æŒ‡å‡ºï¼š"æ— è®ºä½ é€‰æ‹©å“ªç§å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼ŒæŠŠåä½œåŠŸèƒ½åŠ è¿›å»éƒ½æ˜¯ä¸€ä»¶éå¸¸å…·æœ‰æŒ‘æˆ˜æ€§çš„äº‹æƒ…ã€‚"</p>
<p>åä½œç¼–è¾‘æ¶‰åŠï¼š</p>
<ul>
<li><code>å®æ—¶åŒæ­¥</code>ï¼šéœ€è¦ WebSocket æˆ–ç±»ä¼¼æŠ€æœ¯æ¥å®æ—¶åŒæ­¥ç¼–è¾‘æ“ä½œ</li>
<li><code>å†²çªè§£å†³</code>ï¼šå½“å¤šä¸ªç”¨æˆ·åŒæ—¶ç¼–è¾‘åŒä¸€éƒ¨åˆ†æ—¶ï¼Œå¦‚ä½•è§£å†³å†²çª</li>
<li><code>æ“ä½œè½¬æ¢ï¼ˆOTï¼‰æˆ– CRDT</code>ï¼šéœ€è¦ç®—æ³•æ¥ä¿è¯æœ€ç»ˆä¸€è‡´æ€§</li>
<li><code>ç‰ˆæœ¬å†å²</code>ï¼šéœ€è¦è®°å½•æ¯æ¬¡å˜æ›´ï¼Œæ”¯æŒå›æ»šå’ŒæŸ¥çœ‹å†å²</li>
<li><code>æƒé™ç®¡ç†</code>ï¼šä¸åŒç”¨æˆ·å¯èƒ½æœ‰ä¸åŒçš„ç¼–è¾‘æƒé™</li>
<li><code>è¯„è®ºç³»ç»Ÿ</code>ï¼šéœ€è¦åœ¨æ–‡æ¡£ä¸­æ’å…¥è¯„è®ºï¼Œå¹¶ç®¡ç†è¯„è®ºçš„ç”Ÿå‘½å‘¨æœŸ</li>
<li><code>å»ºè®®ç¼–è¾‘</code>ï¼šå…è®¸ç”¨æˆ·æå‡ºç¼–è¾‘å»ºè®®ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹</li>
</ul>
<p>å³ä½¿ä½¿ç”¨ Y.js è¿™æ ·çš„åä½œæ¡†æ¶ï¼Œä½ ä»ç„¶éœ€è¦å¤„ç†å¾ˆå¤šç»†èŠ‚ï¼Œæ¯”å¦‚å¦‚ä½•å°† ProseMirror çš„ transaction è½¬æ¢ä¸º Y.js çš„æ“ä½œï¼Œå¦‚ä½•å¤„ç†ç½‘ç»œå»¶è¿Ÿå’Œæ–­çº¿é‡è¿ï¼Œå¦‚ä½•å¤„ç†å†²çªç­‰ã€‚</p>
<p><code>é€šç”¨ + ä¸‡èƒ½ + é«˜å¯å®šåˆ¶ + å¤šåŠŸèƒ½</code>ï¼Œæ˜¯ä¸ª"ç†æƒ³"ä¸"é­”é¬¼"å¹¶å­˜çš„ç»„åˆã€‚å¾ˆå¤šå›¢é˜Ÿå’Œä¸ªäººåœ¨æœ€åˆæ²¡è¯„ä¼°æ¸…æ¥šå°±ä¸Šäº†è½¦ï¼Œæœ€åæ‰å‘ç°é—®é¢˜ã€‚</p>
<h3 data-id="heading-9">3. æ€§èƒ½ã€UXã€æµè§ˆå™¨å…¼å®¹çš„å¤æ‚åº¦</h3>
<h4 data-id="heading-10">æ€§èƒ½é—®é¢˜çš„çœŸå®å­˜åœ¨</h4>
<p>æœ‰äººåæ˜ ï¼Œå½“æ–‡æ¡£å¾ˆé•¿ï¼ˆä¸Šç™¾ã€å‡ ç™¾æ¡ç›®ã€å¤æ‚ç»“æ„ï¼‰ä¸”å«å¤šç§æ ¼å¼ã€åµŒå…¥ã€æ ·å¼ã€å—æ—¶ï¼ŒTiptap çš„å“åº”ä¼šå˜æ…¢ã€‚æœ‰ä½¿ç”¨è€…è¯´ï¼š</p>
<blockquote>
<p>"One of the big gotchas I've had with TipTap is that it's extremely sluggish once you get to more than 300 words or so and you're using different formatting options."</p>
</blockquote>
<p>è¿™ä¸ªé—®é¢˜çš„æ ¹æºåœ¨äºï¼š</p>
<ul>
<li><code>DOM æ“ä½œçš„å¼€é”€</code>ï¼šæ¯æ¬¡ç¼–è¾‘æ“ä½œéƒ½å¯èƒ½è§¦å‘ DOM çš„æ›´æ–°ï¼Œå½“æ–‡æ¡£å¾ˆå¤§æ—¶ï¼Œè¿™äº›æ›´æ–°ä¼šå˜å¾—å¾ˆæ…¢</li>
<li><code>é‡æ¸²æŸ“çš„æˆæœ¬</code>ï¼šReactã€Vue ç»„ä»¶çš„é‡æ¸²æŸ“å¯èƒ½ä¸å¤Ÿä¼˜åŒ–ï¼Œå¯¼è‡´ä¸å¿…è¦çš„æ›´æ–°</li>
<li><code>å†…å­˜å ç”¨</code>ï¼šå¤§æ–‡æ¡£ä¼šå ç”¨å¤§é‡å†…å­˜ï¼Œç‰¹åˆ«æ˜¯åœ¨ç§»åŠ¨è®¾å¤‡ä¸Š</li>
</ul>
<p>è§£å†³æ€§èƒ½é—®é¢˜éœ€è¦æŒ‰éœ€æ¸²æŸ“ã€è™šæ‹Ÿæ»šåŠ¨ã€ä¼˜åŒ–æ›´æ–°ç­–ç•¥ã€åƒåœ¾å›æ”¶ä¼˜åŒ–ã€é˜²æŠ–å’ŒèŠ‚æµã€‚è¿™äº›ä¼˜åŒ–éƒ½éœ€è¦æ·±å…¥ç†è§£ ProseMirror å’Œæ¡†æ¶çš„å·¥ä½œåŸç†ï¼Œä¸æ˜¯ç®€å•çš„é…ç½®å°±èƒ½è§£å†³çš„ã€‚</p>
<h4 data-id="heading-11">è·¨æµè§ˆå™¨å…¼å®¹æ€§çš„æŒ‘æˆ˜</h4>
<p>ä¸åŒæµè§ˆå™¨å¯¹ content-editableã€selectionã€å¤åˆ¶ç²˜è´´è¡Œä¸ºçš„å¤„ç†å¹¶ä¸ä¸€è‡´ã€‚å…¼å®¹æ€§é—®é¢˜ã€å‰ªè´´æ¿è¡Œä¸ºå·®å¼‚ã€æ ·å¼å†²çªã€é»˜è®¤æ ·å¼è¦†ç›–ã€CSS resetã€å“åº”å¼å¸ƒå±€ç­‰ç­‰ï¼Œéƒ½å®¹æ˜“è®©äººå¤´ç–¼ã€‚</p>
<p>å…·ä½“é—®é¢˜åŒ…æ‹¬ï¼š</p>
<ul>
<li><code>Selection API çš„å·®å¼‚</code>ï¼šä¸åŒæµè§ˆå™¨å¯¹ selection çš„å¤„ç†æ–¹å¼ä¸åŒï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤æ‚èŠ‚ç‚¹ï¼ˆå¦‚è¡¨æ ¼ã€åˆ—è¡¨ï¼‰æ—¶</li>
<li><code>Clipboard API çš„å·®å¼‚</code>ï¼šå¤åˆ¶ç²˜è´´çš„è¡Œä¸ºåœ¨ä¸åŒæµè§ˆå™¨ä¸­å¯èƒ½ä¸åŒ</li>
<li><code>ContentEditable çš„è¡Œä¸ºå·®å¼‚</code>ï¼šä¸åŒæµè§ˆå™¨å¯¹ content-editable å…ƒç´ çš„å¤„ç†æ–¹å¼ä¸åŒ</li>
<li><code>ç§»åŠ¨ç«¯çš„ç‰¹æ®Šé—®é¢˜</code>ï¼šç§»åŠ¨ç«¯çš„é”®ç›˜ã€è§¦æ‘¸äº‹ä»¶ã€è¾“å…¥æ³•ç­‰éƒ½ä¼šå½±å“ç¼–è¾‘ä½“éªŒ</li>
<li><code>æ ·å¼å…¼å®¹æ€§</code>ï¼šä¸åŒæµè§ˆå™¨çš„é»˜è®¤æ ·å¼ä¸åŒï¼Œéœ€è¦å¤§é‡çš„ CSS reset å’Œå…¼å®¹æ€§å¤„ç†</li>
</ul>
<p>è¿™æ­£æ˜¯å¾ˆå¤šäººä¸æƒ³"ä»å¤´æä¸€ä¸ªå¯Œæ–‡æœ¬ç¼–è¾‘å™¨"çš„åŸå› ã€‚</p>
<h4 data-id="heading-12">ç”Ÿäº§ç¯å¢ƒçš„é¢å¤–å¤æ‚åº¦</h4>
<p>å¦‚æœä½ çš„ç¼–è¾‘å™¨ç”¨äºç”Ÿäº§ç³»ç»Ÿï¼Œè¿˜å¯èƒ½æ¶‰åŠæ•°æ®æŒä¹…åŒ–ã€å­˜å‚¨æ ¼å¼é€‰æ‹©ã€è§£æå’Œå›æ˜¾ã€ç‰ˆæœ¬æ§åˆ¶ã€è¿ç§»ã€ä¸åç«¯å…¼å®¹ã€å®‰å…¨ï¼ˆXSSï¼‰ã€å›½é™…åŒ–ã€å¤šè¯­è¨€ã€å­—ä½“ã€æ’ç‰ˆã€æ–¹å‘ï¼ˆRTLï¼‰ç­‰ã€‚</p>
<p>å½“è¿™äº›ç§¯ç´¯èµ·æ¥ï¼Œè¿œè¶…"å‡ è¡Œä»£ç  + ä¸€ä¸ª toolbar + ä¸€ä¸ªå¯Œæ–‡æœ¬è¾“å…¥æ¡†"çš„å¤æ‚åº¦ã€‚</p>
<h3 data-id="heading-13">4. ç¤¾åŒºä¸æ–‡æ¡£ â‰  "è¦†ç›–æ‰€æœ‰åœºæ™¯"</h3>
<p>è™½ç„¶ Tiptap æœ¬èº«æ–‡æ¡£ã€ç¤ºä¾‹ã€ç¤¾åŒºä¸é”™ï¼Œä½†å¯¹äºç‰¹å®šå¤æ‚åœºæ™¯ï¼ˆæ¯”å¦‚"å¸¦è¡¨æ ¼ + åµŒå…¥ + è‡ªå®šä¹‰ node + åä½œ + Undoã€Redo + å¯¼å‡º + æ’ä»¶ç³»ç»Ÿ + è‡ªå®šä¹‰æ ·å¼ã€ä¸»é¢˜ã€å¸ƒå±€ã€å“åº”å¼ã€å¤šç«¯"ï¼‰ï¼Œå‡ ä¹ä¸å­˜åœ¨ä¸€ä¸ª"ç°æˆè§£å†³æ–¹æ¡ˆ"ã€‚</p>
<h4 data-id="heading-14">æ–‡æ¡£çš„å±€é™æ€§</h4>
<p>Tiptap çš„å®˜æ–¹æ–‡æ¡£ä¸»è¦è¦†ç›–äº†åŸºç¡€ç”¨æ³•å’Œå¸¸è§åœºæ™¯ï¼Œä½†å¯¹äºå¤æ‚åœºæ™¯ï¼Œæ–‡æ¡£å¾€å¾€åªèƒ½æä¾›æ–¹å‘æ€§çš„æŒ‡å¯¼ï¼Œå…·ä½“çš„å®ç°ç»†èŠ‚éœ€è¦ä½ è‡ªå·±å»æ¢ç´¢ã€‚</p>
<p>æ¯”å¦‚å¦‚ä½•å®ç°ä¸€ä¸ªè‡ªå®šä¹‰çš„è¡¨æ ¼ç¼–è¾‘å™¨ï¼Œæ”¯æŒåˆå¹¶å•å…ƒæ ¼ã€è°ƒæ•´åˆ—å®½ç­‰åŠŸèƒ½ï¼Ÿå¦‚ä½•å®ç°ä¸€ä¸ªä»£ç å—ç¼–è¾‘å™¨ï¼Œæ”¯æŒè¯­æ³•é«˜äº®ã€è¡Œå·ã€ä»£ç æŠ˜å ï¼Ÿå¦‚ä½•å®ç°ä¸€ä¸ªåä½œç¼–è¾‘ç³»ç»Ÿï¼Œå¤„ç†å†²çªå’ŒåŒæ­¥ï¼Ÿå¦‚ä½•å®ç°ä¸€ä¸ªå¯¼å‡ºç³»ç»Ÿï¼Œå°†ç¼–è¾‘å™¨å†…å®¹å¯¼å‡ºä¸º PDFã€Word ç­‰æ ¼å¼ï¼Ÿ</p>
<p>è¿™äº›åœºæ™¯çš„æ–‡æ¡£å¾€å¾€ä¸å¤Ÿè¯¦ç»†ï¼Œæˆ–è€…æ ¹æœ¬æ²¡æœ‰æ–‡æ¡£ã€‚ä½ éœ€è¦é˜…è¯»æºç æ¥ç†è§£å·¥ä½œåŸç†ï¼Œåœ¨ GitHub ä¸Šæœç´¢ç›¸å…³çš„ issue å’Œè®¨è®ºï¼Œåœ¨ç¤¾åŒºä¸­æé—®ï¼ˆä½†å¯èƒ½å¾—ä¸åˆ°åŠæ—¶å›å¤ï¼‰ï¼Œè‡ªå·±å®éªŒå’Œè°ƒè¯•ã€‚</p>
<h4 data-id="heading-15">éœ€è¦è‡ªå·±è®¾è®¡çš„éƒ¨åˆ†</h4>
<p>å¤šæ•°æ—¶å€™ä½ å¾—è‡ªå·±è®¾è®¡ Schemaã€Node Viewã€Commandsã€æ’ä»¶ä½“ç³»ã€äº¤äº’é€»è¾‘ã€å‰ç«¯-åç«¯åŒæ­¥ã€æ•°æ®åº“å­˜å‚¨æ–¹æ¡ˆç­‰ã€‚</p>
<p><code>å¤æ‚åº¦è¢«éšè—åœ¨"æºç  + é…ç½® + æ‰©å±• + å…¼å®¹æ€§ + æ€§èƒ½è°ƒä¼˜ + æµ‹è¯• + è¾¹ç•Œ case å¤„ç†"</code> åé¢ã€‚</p>
<h4 data-id="heading-16">ä»"ç”¨ä¸ªåº“å°±å¥½"åˆ°"å‘å¤ªå¤š"çš„è½¬å˜</h4>
<p>å¾ˆå¤šäººåœ¨åˆšå¼€å§‹æŠ±ç€"ç”¨ä¸ªåº“å°±å¥½"çš„æƒ³æ³•ï¼Œä½†ä¸åˆ°çœŸæ­£è¦æ»¡è¶³å¤æ‚éœ€æ±‚çš„æ—¶å€™ï¼Œå°±å‘ç°å‘å¤ªå¤šã€‚</p>
<p>ä½ ä»¥ä¸ºæ’å…¥å›¾ç‰‡å¾ˆç®€å•ï¼Œç»“æœå‘ç°éœ€è¦å¤„ç†ä¸Šä¼ ã€åŠ è½½å¤±è´¥ã€å“åº”å¼ã€æ‹–æ‹½è°ƒæ•´å¤§å°ç­‰å¤šä¸ªé—®é¢˜ã€‚ä½ ä»¥ä¸ºå®ç°è¡¨æ ¼å¾ˆç®€å•ï¼Œç»“æœå‘ç°éœ€è¦å¤„ç†åˆå¹¶å•å…ƒæ ¼ã€åµŒå¥—è¡¨æ ¼ã€å¤åˆ¶ç²˜è´´ç­‰å¤æ‚æƒ…å†µã€‚ä½ ä»¥ä¸ºå®ç°åä½œå¾ˆç®€å•ï¼Œç»“æœå‘ç°éœ€è¦å¤„ç†å†²çªã€åŒæ­¥ã€æƒé™ç­‰å¤šä¸ªé—®é¢˜ã€‚</p>
<p>æœ‰äººç”šè‡³å»ºè®®ï¼Œå¦‚æœä½ çš„éœ€æ±‚å¾ˆåŸºç¡€ï¼ˆåªæ˜¯ç®€å•æ–‡å­— + ç²—ä½“æ–œä½“ + åˆ—è¡¨ + å°‘é‡å›¾ç‰‡ï¼‰ï¼Œç”¨ Markdown ç¼–è¾‘å™¨ + è½»é‡å¯Œæ–‡æœ¬æˆ–ç®€æ˜“é…ç½®åè€Œæ›´ç¨³ã€‚</p>
<h3 data-id="heading-17">5. å¿ƒç†é¢„æœŸ vs ç°å®è½åœ°</h3>
<p>å¾ˆå¤šäº§å“ç»ç†æˆ–ä¸ç†Ÿæ‚‰å¯Œæ–‡æœ¬åº•å±‚çš„äººï¼Œä¼šæŠŠå¯Œæ–‡æœ¬ç¼–è¾‘å™¨å½“æˆ"è½»é‡ç‰ˆ Wordã€Google Docsã€æ‰€è§å³æ‰€å¾—ç¼–è¾‘å™¨"ã€‚ä½†äº‹å®æ˜¯ï¼Œæµè§ˆå™¨é‡Œçš„ contenteditable + å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå—é™äº DOMã€Selectionã€æ ·å¼ã€å¤šç«¯å·®å¼‚ã€å¤åˆ¶ç²˜è´´è¡Œä¸ºã€HTML â†’ Model â†’ HTML çš„ round-tripã€æ ‡å‡†å…¼å®¹æ€§ã€æ€§èƒ½ã€æ’ä»¶ç”Ÿæ€ç­‰ç­‰ã€‚</p>
<h4 data-id="heading-18">Word çº§åˆ«çš„åŠŸèƒ½éœ€è¦ Word çº§åˆ«çš„æŠ•å…¥</h4>
<p>è¦åšåˆ°"åƒ Word é‚£ä¹ˆå¼ºå¤§åˆç¨³å®š"ï¼Œå°±ç®—ç”¨äº† Tiptapï¼Œä¹Ÿè‡³å°‘è¦æŠ•å…¥éå¸¸å¤šå¼€å‘ + æµ‹è¯• + å…¼å®¹ + ä¼˜åŒ– + ç»´æŠ¤æˆæœ¬ã€‚</p>
<p>Word çš„è¡¨æ ¼ç¼–è¾‘å™¨æ˜¯å‡ åå¹´çš„ç§¯ç´¯ï¼Œè€Œ Web ç¼–è¾‘å™¨è¦å®ç°ç±»ä¼¼åŠŸèƒ½éœ€è¦ä»é›¶å¼€å§‹ã€‚Word çš„åä½œåŠŸèƒ½æ˜¯ Microsoft å›¢é˜Ÿå¤šå¹´ç ”å‘çš„ç»“æœï¼Œè€Œ Web ç¼–è¾‘å™¨è¦å®ç°ç±»ä¼¼åŠŸèƒ½éœ€è¦è‡ªå·±å®ç°æˆ–é›†æˆç¬¬ä¸‰æ–¹æœåŠ¡ã€‚Word çš„å¯¼å‡ºåŠŸèƒ½æ”¯æŒå¤šç§æ ¼å¼ï¼Œè€Œ Web ç¼–è¾‘å™¨è¦å®ç°ç±»ä¼¼åŠŸèƒ½éœ€è¦é›†æˆå¤šä¸ªåº“æˆ–è‡ªå·±å®ç°ã€‚</p>
<h4 data-id="heading-19">"è·³è¿›å…”å­æ´"çš„é£é™©</h4>
<p>è¿™æ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤šä»å¤´æçš„äººï¼ˆå°¤å…¶ä¸šåŠ¡æ–¹ã€éç¼–è¾‘å™¨ä¸“æ³¨å›¢é˜Ÿï¼‰æœ€ç»ˆæ”¾å¼ƒçš„åŸå› ã€‚ç”šè‡³æœ‰å¼€å‘è€…åœ¨è®¨è®ºé‡Œç›´è¨€ï¼šæ„å»ºå¯Œæ–‡æœ¬ç¼–è¾‘å™¨"åƒè·³è¿› rabbit hole"ï¼ˆå…”å­æ´ï¼‰ï¼Œé£é™©å¤ªå¤§ï¼Œä¸é è°±ã€‚</p>
<p>è¿™ä¸ªæ¯”å–»å¾ˆå½¢è±¡ï¼šä½ ä»¥ä¸ºåªæ˜¯æŒ–ä¸€ä¸ªå°æ´ï¼Œç»“æœå‘ç°ä¸‹é¢æ˜¯ä¸€ä¸ªæ·±ä¸è§åº•çš„å…”å­æ´ï¼Œè¶ŠæŒ–è¶Šæ·±ï¼Œè¶ŠæŒ–è¶Šå¤æ‚ï¼Œæœ€ç»ˆå‘ç°è‡ªå·±æŠ•å…¥çš„æ—¶é—´å’Œç²¾åŠ›è¿œè¶…é¢„æœŸã€‚</p>
<h2 data-id="heading-20">å¯¹å¼€å‘è€…ã€é¡¹ç›®ç»ç†ã€å†…å®¹ç”Ÿäº§è€…æ¥è¯´ï¼šä¸ºä»€ä¹ˆä¾æ—§å®¹æ˜“è¢«éš¾ä½</h2>
<p>å¯¹äºä¸åŒç±»å‹çš„è§’è‰²ï¼ŒTiptap çš„å›°éš¾ç‚¹å¯èƒ½æœ‰æ‰€ä¸åŒï¼Œä½†éƒ½ä¼šé¢ä¸´ä¸€äº›å…±åŒçš„æŒ‘æˆ˜ã€‚</p>
<h3 data-id="heading-21">å†…å®¹å­˜å‚¨æ ¼å¼çš„å¤æ‚æ€§</h3>
<p>ä½ éœ€è¦è€ƒè™‘ HTMLã€JSONã€markdownã€è‡ªå®šä¹‰æ ¼å¼ã€‚Tiptap æ”¯æŒ JSONã€HTML è¾“å‡ºã€å›æ˜¾ï¼Œä½†å¦‚æœä½ è¦è‡ªå®šä¹‰èŠ‚ç‚¹ï¼ˆä¾‹å¦‚ embedã€å›¾æ–‡æ··æ’ã€ç‰¹æ®Š blockã€meta æ•°æ®ã€AI-è¾…åŠ©å†…å®¹ï¼‰ï¼Œé‚£å°±éœ€è¦ä½ è®¾è®¡ schemaï¼Œå¤„ç†åºåˆ—åŒ–ã€ååºåˆ—åŒ–é€»è¾‘ï¼Œä»¥åŠå‰åç«¯å¦‚ä½•ç»Ÿä¸€å¤„ç†è¿™äº›å†…å®¹ç»“æ„ã€‚</p>
<h4 data-id="heading-22">æ ¼å¼é€‰æ‹©çš„æƒè¡¡</h4>
<p>æ¯ç§æ ¼å¼éƒ½æœ‰å…¶ä¼˜ç¼ºç‚¹ï¼š</p>
<ul>
<li><code>HTML</code>ï¼šæœ€ç›´è§‚ï¼Œä½†å¯èƒ½åŒ…å«å¤§é‡å†—ä½™ä¿¡æ¯ï¼Œä¸åˆ©äºå­˜å‚¨å’Œä¼ è¾“</li>
<li><code>JSON</code>ï¼šç»“æ„åŒ–å¥½ï¼Œæ˜“äºå¤„ç†ï¼Œä½†éœ€è¦è‡ªå®šä¹‰è§£æé€»è¾‘</li>
<li><code>Markdown</code>ï¼šç®€æ´ï¼Œä½†è¡¨è¾¾èƒ½åŠ›æœ‰é™ï¼Œä¸é€‚åˆå¤æ‚å†…å®¹</li>
<li><code>è‡ªå®šä¹‰æ ¼å¼</code>ï¼šæœ€çµæ´»ï¼Œä½†éœ€è¦è‡ªå·±å®ç°æ‰€æœ‰é€»è¾‘</li>
</ul>
<p>é€‰æ‹©å“ªç§æ ¼å¼éœ€è¦æ ¹æ®ä½ çš„å…·ä½“éœ€æ±‚æ¥å†³å®šï¼Œè¿™ä¸ªå†³å®šä¼šå½±å“æ•´ä¸ªç³»ç»Ÿçš„æ¶æ„ã€‚</p>
<h4 data-id="heading-23">Schema è®¾è®¡çš„æŒ‘æˆ˜</h4>
<p>è®¾è®¡ä¸€ä¸ªå¥½çš„ schema éœ€è¦è€ƒè™‘å“ªäº›èŠ‚ç‚¹ç±»å‹æ˜¯å¿…éœ€çš„ã€èŠ‚ç‚¹ä¹‹é—´çš„åŒ…å«å…³ç³»ã€èŠ‚ç‚¹çš„å±æ€§ã€èŠ‚ç‚¹çš„é»˜è®¤æ ·å¼å’Œè¡Œä¸ºã€å¦‚ä½•æ‰©å±• schema ä»¥æ”¯æŒæœªæ¥éœ€æ±‚ã€‚è¿™éœ€è¦æ·±å…¥ç†è§£ä½ çš„å†…å®¹æ¨¡å‹å’Œä¸šåŠ¡éœ€æ±‚ã€‚</p>
<p>Tiptap æ–‡æ¡£ä¸­è™½æœ‰åŸºç¡€ APIï¼Œä½†è‡ªå®šä¹‰è¶Šæ·±ï¼Œä½ è¦å†™çš„ä¸œè¥¿å°±è¶Šå¤šã€‚</p>
<h3 data-id="heading-24">å¯è§†åŒ–ä¸å‘å¸ƒçš„å¤šä¸ªå±‚é¢</h3>
<p>å¦‚æœä½ å¸Œæœ›æ”¯æŒå¯è§†åŒ–ã€å¯å‘å¸ƒï¼ˆç±»ä¼¼å…¬ä¼—å·ã€ç¤¾äº¤åª’ä½“ã€Markdown è½¬ HTMLã€æ–‡ç« å¯¼å‡ºã€é™æ€é¡µé¢ï¼‰ï¼Œä½ è¿˜å¯èƒ½æ¶‰åŠæ ·å¼æ¸²æŸ“ã€å“åº”å¼ã€å…¼å®¹æ€§ã€å¤šç«¯é€‚é…ã€HTML sanitationã€å®‰å…¨ï¼ˆXSSï¼‰ã€å›¾ç‰‡ã€èµ„æºç®¡ç†ã€SEOã€å¯¼å‡ºä¸é¢„è§ˆç­‰ã€‚</p>
<p>æ¯ä¸ªå±‚é¢éƒ½éœ€è¦æ·±å…¥çš„å·¥ä½œï¼Œä¸æ˜¯ç®€å•çš„é…ç½®å°±èƒ½è§£å†³çš„ã€‚</p>
<h3 data-id="heading-25">åä½œåŠŸèƒ½çš„æŒ‡æ•°çº§å¤æ‚åº¦</h3>
<p>è‹¥ä½ è¿˜æƒ³åŠ åä½œï¼ˆå¤šäººç¼–è¾‘ã€å®æ—¶ã€å†å²ã€è¯„è®ºã€AI è¾…åŠ©ã€ç‰ˆæœ¬ã€å¯¼å‡ºã€å›æ»šï¼‰ï¼Œé‚£å¤æ‚åº¦å‘ˆæŒ‡æ•°çº§å¢é•¿ã€‚</p>
<h4 data-id="heading-26">åŸºç¡€æ¡†æ¶åªæ˜¯å¼€å§‹</h4>
<p>å³ä¾¿ Tiptap + Y.js + WebSocketã€åç«¯ï¼Œä¹Ÿåªæ˜¯åŸºç¡€æ¡†æ¶ã€‚ä½ å¯èƒ½è¿˜éœ€è¦é¢å¤–å¤„ç†å†²çªè§£å†³ã€æ•°æ®åŒæ­¥ã€æƒé™ç®¡ç†ã€undoã€redoã€ç‰ˆæœ¬å­˜å‚¨ã€åˆå¹¶é€»è¾‘ã€å¹¶å‘æ§åˆ¶ã€UIã€UX ä½“éªŒã€å¤šç«¯åä½œï¼ˆæ¡Œé¢ã€ç§»åŠ¨ï¼‰ç­‰ã€‚</p>
<h4 data-id="heading-27">"è¦ä¹ˆä½ è‡ªå·±å†™ï¼Œè¦ä¹ˆå¦¥å"</h4>
<p>å¾ˆå¤šç»†èŠ‚æ˜¯"è¦ä¹ˆä½ è‡ªå·±å†™ï¼Œè¦ä¹ˆå¦¥å"ã€‚å¦‚æœä½ éœ€è¦æ˜¾ç¤ºå…¶ä»–ç”¨æˆ·çš„å…‰æ ‡ä½ç½®ï¼Œä½ éœ€è¦è‡ªå·±å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚å¦‚æœä½ éœ€è¦æ”¯æŒè¯„è®ºå’Œå»ºè®®ç¼–è¾‘ï¼Œä½ éœ€è¦è‡ªå·±å®ç°è¿™äº›åŠŸèƒ½ã€‚å¦‚æœä½ éœ€è¦æ”¯æŒç‰ˆæœ¬å†å²ï¼Œä½ éœ€è¦è‡ªå·±å®ç°ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿã€‚</p>
<p>äº‹å®è¯æ˜ï¼Œå“ªæ€•æ˜¯ç»éªŒä¸°å¯Œçš„å›¢é˜Ÿä¹Ÿè¦èŠ±è´¹ç›¸å½“å¤šæ—¶é—´ã€‚</p>
<h3 data-id="heading-28">æ€§èƒ½ä¸ç”¨æˆ·ä½“éªŒçš„æŒç»­æŒ‘æˆ˜</h3>
<p>å½“æ–‡æ¡£è¾ƒå¤§ã€æ ¼å¼å¤æ‚ã€åŒ…å«å¤šç§èŠ‚ç‚¹ã€åµŒå…¥ã€å›¾ç‰‡ã€è¡¨æ ¼ã€æ ·å¼æ—¶ï¼Œè¦ä¿è¯ç¼–è¾‘ä½“éªŒæµç•…ã€ä¸å¡é¡¿ã€ä¸é—ªçƒã€ä¸å»¶è¿Ÿï¼Œæ˜¯ä¸ªæŒ‘æˆ˜ã€‚</p>
<p>æ€§èƒ½é—®é¢˜å¯èƒ½å‡ºç°åœ¨è¾“å…¥å»¶è¿Ÿã€æ»šåŠ¨å¡é¡¿ã€æ¸²æŸ“å»¶è¿Ÿã€å†…å­˜å ç”¨ã€CPU å ç”¨ç­‰å¤šä¸ªç»´åº¦ã€‚</p>
<p>å°¤å…¶å¯¹ç§»åŠ¨ç«¯ã€ä½æ€§èƒ½è®¾å¤‡ï¼Œæˆ–è€…éœ€è¦å³æ—¶æ¸²æŸ“ã€åŒæ­¥ã€é¢„è§ˆæ—¶ï¼Œå¡é¡¿ä½“éªŒå¯¹ç”¨æˆ·å‹å¥½åº¦ä¼¤å®³å¾ˆå¤§ã€‚ç§»åŠ¨ç«¯çš„æŒ‘æˆ˜åŒ…æ‹¬æ€§èƒ½æ›´æœ‰é™ã€è§¦æ‘¸äº¤äº’ä¸é¼ æ ‡äº¤äº’ä¸åŒã€é”®ç›˜è¾“å…¥ä½“éªŒä¸åŒã€ç½‘ç»œå¯èƒ½ä¸ç¨³å®šã€ç”µæ± ç»­èˆªéœ€è¦è€ƒè™‘ç­‰ã€‚</p>
<h3 data-id="heading-29">è¿™äº›æŒ‘æˆ˜æ˜¯æ ¸å¿ƒéœ€æ±‚ï¼Œä¸æ˜¯è¾¹ç¼˜ç”¨ä¾‹</h3>
<p>å¦‚æœä½ æœªæ¥å¯èƒ½ä¼šåš"å¤æ‚å†…å®¹ + ç¤¾äº¤ã€å…¬ä¼—å·ã€æ–‡ç« ã€AI è¾…åŠ©ã€å¯èƒ½å¤šäººåä½œã€æ’ç‰ˆå¯¼å‡º"çš„ç³»ç»Ÿï¼Œè¿™äº›æŒ‘æˆ˜å¹¶ä¸æ˜¯è¾¹ç¼˜ç”¨ä¾‹ï¼Œè€Œå¯èƒ½æ˜¯æ ¸å¿ƒéœ€æ±‚ã€‚è¿™æ„å‘³ç€ä½ ä¸èƒ½ç®€å•åœ°"å…ˆåšä¸€ä¸ªç®€å•ç‰ˆæœ¬ï¼Œä»¥åå†ä¼˜åŒ–"ï¼Œè€Œæ˜¯éœ€è¦åœ¨è®¾è®¡é˜¶æ®µå°±è€ƒè™‘è¿™äº›æŒ‘æˆ˜ã€‚</p>
<h2 data-id="heading-30">æ€»ç»“ï¼šä¸ºä»€ä¹ˆ"å¯¹å¾ˆå¤šäººæ¥è¯´ï¼ŒTiptap å¾ˆéš¾"</h2>
<h3 data-id="heading-31">å¯Œæ–‡æœ¬ç¼–è¾‘æœ¬èº«æ˜¯é«˜åº¦å¤æ‚çš„é—®é¢˜</h3>
<p>æ ¼å¼å¤šæ ·ï¼ˆæ–‡æœ¬ã€æ®µè½ã€åˆ—è¡¨ã€æ ·å¼ã€åµŒå…¥ã€åª’ä½“ã€è¡¨æ ¼...ï¼‰+ ç”¨æˆ·æœŸæœ›é«˜ï¼ˆåƒ Wordã€Google Docsã€CMS ç¼–è¾‘é‚£æ ·è‡ªç„¶ï¼‰+ æµè§ˆå™¨ã€DOMã€æ ‡å‡†ã€å…¼å®¹æ€§ã€æ€§èƒ½å„ç±»é™åˆ¶ï¼Œè¿™äº›å› ç´ å åŠ åœ¨ä¸€èµ·ï¼Œä½¿å¾—å¯Œæ–‡æœ¬ç¼–è¾‘æˆä¸ºä¸€ä¸ªé«˜åº¦å¤æ‚çš„é—®é¢˜ã€‚</p>
<h3 data-id="heading-32">åº•å±‚å¤æ‚åº¦ä¾ç„¶å­˜åœ¨</h3>
<p>è™½ç„¶ Tiptap å°è£…äº†ä¸€äº›åŸºç¡€ï¼Œä½†åº•å±‚ä»æ˜¯å¤æ‚ï¼Œé«˜åº¦å®šåˆ¶ã€å¤æ‚åŠŸèƒ½ã€å®ç”¨çº§éœ€æ±‚åŸºæœ¬éƒ½éœ€è¦"æ·±å…¥ ProseMirror + è‡ªå·±å®ç°"ã€‚Tiptap é™ä½äº†å…¥é—¨é—¨æ§›ï¼Œä½†æ²¡æœ‰æ¶ˆé™¤å¤æ‚æ€§ã€‚</p>
<h3 data-id="heading-33">æˆæœ¬å‹åŠ›å¤§</h3>
<p>å¯¹å¤§å¤šæ•°ä¸­å°å›¢é˜Ÿã€ä¸ªäººå¼€å‘è€…ã€å¸Œæœ›å¿«é€Ÿä¸Šçº¿çš„äººæ¥è¯´ï¼ŒçœŸæ­£æŠŠå¯Œæ–‡æœ¬ç¼–è¾‘å™¨"åšå¥½ã€åšç¨³ã€åšå¯ç»´æŠ¤"ï¼Œå·¥æ—¶ã€æµ‹è¯•ã€å…¼å®¹æ€§ã€æ€§èƒ½ã€ç»´æŠ¤ã€è¾¹ç¼˜ case å…¨éƒ½å‹å¾—äººå–˜ä¸è¿‡æ°”ã€‚è¿™ä¸ªæˆæœ¬å¾€å¾€è¢«ä½ä¼°ã€‚</p>
<h3 data-id="heading-34">ç»´æŠ¤æˆæœ¬æŒç»­ç´¯ç§¯</h3>
<p>å½“éœ€æ±‚ä¸æ–­å˜åŒ–ï¼ˆæ–°åŠŸèƒ½ã€æ–°æ ¼å¼ã€æ–°åª’ä½“ã€æ–°åä½œã€æ–°å¯¼å‡ºã€æ–°å…¼å®¹ï¼‰çš„æ—¶å€™ï¼Œç»´æŠ¤æˆæœ¬ä¼šä¸æ–­ç´¯ç§¯ï¼Œå¾ˆå¤šäººæœ€ç»ˆå‘ç°"å†ä¹Ÿä¸æƒ³ç¢°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨"ã€‚è¿™æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ï¼Œä¸æ˜¯ä¸€æ¬¡æ€§çš„æŠ•å…¥ã€‚</p>
<h3 data-id="heading-35">å¿ƒç†é¢„æœŸä¸ç°å®çš„å·®è·</h3>
<p>å¾ˆå¤šäººå¯¹å¯Œæ–‡æœ¬ç¼–è¾‘å™¨çš„æœŸæœ›æ˜¯"åƒ Word é‚£æ ·å¼ºå¤§"ï¼Œä½†ç°å®æ˜¯ Web ç¼–è¾‘å™¨çš„èƒ½åŠ›æœ‰é™ï¼Œè¦å®ç°ç±»ä¼¼åŠŸèƒ½éœ€è¦å¤§é‡æŠ•å…¥ã€‚è¿™ä¸ªå·®è·å¯¼è‡´äº†å¾ˆå¤šé¡¹ç›®çš„å¤±è´¥ã€‚</p>
<h2 data-id="heading-36">å»ºè®®ï¼šåŸºäºå®é™…éœ€æ±‚çš„å®è·µè·¯å¾„</h2>
<p>è™½ç„¶ Tiptap å¾ˆéš¾ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€ä½ ä¸åº”è¯¥ä½¿ç”¨å®ƒã€‚å…³é”®æ˜¯è¦æœ‰æ­£ç¡®çš„é¢„æœŸå’Œåˆç†çš„è§„åˆ’ã€‚</p>
<h3 data-id="heading-37">1. å…ˆåš Minimal Viable Editor (MVE)</h3>
<p>ç”¨ Tiptap + StarterKit åšåŸºç¡€ï¼ˆæ®µè½ã€æ ‡é¢˜ã€ç²—ä½“ã€æ–œä½“ã€åˆ—è¡¨ã€é“¾æ¥ã€å›¾ç‰‡ï¼‰ã€‚å¦‚æœä½ ä¸»è¦æ˜¯å‘æ–‡ã€å†™æ–‡ç« ã€æœ‰ä¸€å®šæ ·å¼è¦æ±‚ï¼Œè¿™è¶³å¤Ÿã€‚ä¸è¦ä¸€å¼€å§‹å°±è¯•å›¾å®ç°æ‰€æœ‰åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-38">2. æ ¹æ®éœ€è¦é€æ­¥æ‰©å±•</h3>
<p>åªå½“ç¡®å®éœ€è¦"åµŒå…¥ã€è¡¨æ ¼ã€ç‰¹æ®Šå¸ƒå±€ã€å¯¼å‡ºã€åä½œã€AI æ’ä»¶ã€è‡ªå®šä¹‰ node"æ—¶ï¼Œå†è€ƒè™‘æ‰©å±•ï¼Œè€Œä¸æ˜¯ä¸€å¼€å§‹å°±è®¾è®¡"ä¸‡èƒ½ + æ‰€æœ‰å¯èƒ½åŠŸèƒ½"ã€‚æ¯ä¸ªåŠŸèƒ½çš„æ·»åŠ éƒ½éœ€è¦è¯„ä¼°å…¶æˆæœ¬å’Œæ”¶ç›Šã€‚</p>
<h3 data-id="heading-39">3. æŠŠ Schemaã€æ•°æ®ç»“æ„è®¾è®¡åšå¥½</h3>
<p>é€‰å¥½å†…å®¹å­˜å‚¨æ ¼å¼ï¼ˆJSONã€HTMLã€è‡ªå®šä¹‰ + metadataï¼‰ï¼Œå¹¶ç¡®ä¿å‰åç«¯ã€å¯¼å…¥å¯¼å‡ºã€å…¼å®¹ã€æœªæ¥æ‰©å±•éƒ½è€ƒè™‘è¿›å»ã€‚ä¸€ä¸ªå¥½çš„æ•°æ®ç»“æ„è®¾è®¡å¯ä»¥é¿å…å¾ˆå¤šåç»­é—®é¢˜ã€‚</p>
<h3 data-id="heading-40">4. æƒè¡¡æ”¶ç›Š vs æˆæœ¬</h3>
<p>å¯¹äºä¸€äº›ä¸å¸¸ç”¨æˆ–å¤æ‚åŠŸèƒ½ï¼ˆæ¯”å¦‚å¤æ‚è¡¨æ ¼ã€æ‹–æ‹½å¸ƒå±€ã€å¤šäººåä½œã€ç‰ˆæœ¬æ§åˆ¶ã€å¤æ‚å¯¼å‡º...ï¼‰è¦è¯„ä¼°æ¸…æ¥šï¼Œæ˜¯ä¸æ˜¯å€¼å¾—æŠ•å…¥ï¼Œæˆ–è€…å¯ä»¥é€šè¿‡ Markdown + æ’ä»¶ + åå¤„ç†å¯¼å‡ºæ¥æ›¿ä»£ã€‚ä¸æ˜¯æ‰€æœ‰åŠŸèƒ½éƒ½éœ€è¦åœ¨ç¼–è¾‘å™¨ä¸­å®ç°ã€‚</p>
<h3 data-id="heading-41">5. åšå¥½æµ‹è¯•ä¸å›é€€ã€å…¼å®¹ç­–ç•¥</h3>
<p>åŒ…æ‹¬æµè§ˆå™¨å…¼å®¹ã€ç§»åŠ¨ç«¯ã€è‡ªå®šä¹‰æ ·å¼ã€themeã€å†…å®¹å¯¼å‡ºã€æ¸…æ´—ï¼ˆsanitizeï¼‰ã€æœªæ¥è¿ç§»ã€å‡çº§ã€‚è¿™äº›å·¥ä½œè™½ç„¶ç¹çï¼Œä½†å¯¹äºç”Ÿäº§ç¯å¢ƒæ˜¯å¿…éœ€çš„ã€‚</p>
<h3 data-id="heading-42">6. è€ƒè™‘æ›¿ä»£æ–¹æ¡ˆ</h3>
<p>å¦‚æœä½ çš„éœ€æ±‚ç›¸å¯¹ç®€å•ï¼Œè€ƒè™‘ä½¿ç”¨ Markdown ç¼–è¾‘å™¨ + åå¤„ç†çš„æ–¹å¼ï¼Œå¯èƒ½æ¯”ç›´æ¥ä½¿ç”¨å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ›´ç®€å•ã€æ›´ç¨³å®šã€‚Markdown è™½ç„¶è¡¨è¾¾èƒ½åŠ›æœ‰é™ï¼Œä½†å¯¹äºå¾ˆå¤šåœºæ™¯å·²ç»è¶³å¤Ÿï¼Œè€Œä¸”å®ç°å’Œç»´æŠ¤æˆæœ¬è¦ä½å¾—å¤šã€‚</p>
<h3 data-id="heading-43">7. å¯»æ±‚ä¸“ä¸šå¸®åŠ©</h3>
<p>å¦‚æœé¡¹ç›®é¢„ç®—å…è®¸ï¼Œè€ƒè™‘å¯»æ±‚ä¸“ä¸šçš„ç¼–è¾‘å™¨å¼€å‘å›¢é˜Ÿæˆ–å’¨è¯¢æœåŠ¡çš„å¸®åŠ©ã€‚å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ˜¯ä¸€ä¸ªä¸“ä¸šé¢†åŸŸï¼Œæœ‰ç»éªŒçš„äººå¯ä»¥å¸®ä½ é¿å…å¾ˆå¤šå‘ã€‚</p>
<h2 data-id="heading-44">æ€»ç»“</h2>
<p>Tiptap æ˜¯ä¸€ä¸ªä¼˜ç§€çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ¡†æ¶ï¼Œå®ƒç¡®å®é™ä½äº†å¼€å‘é—¨æ§›ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€å®ƒç®€å•ã€‚ç†è§£å…¶å¤æ‚æ€§ï¼Œæœ‰æ­£ç¡®çš„é¢„æœŸï¼Œåšå¥½è§„åˆ’ï¼Œæ˜¯æˆåŠŸä½¿ç”¨ Tiptap çš„å…³é”®ã€‚</p>
<p>å¦‚æœä½ æ­£åœ¨è€ƒè™‘ä½¿ç”¨ Tiptapï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°è¯„ä¼°é¡¹ç›®çš„å¤æ‚åº¦å’Œæˆæœ¬ï¼Œåšå‡ºæ˜æ™ºçš„å†³ç­–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æŒ–æ˜â€œæ²‰é»˜çš„ä¸“å®¶â€ -- è‚˜å­çš„ Swift å‘¨æŠ¥ #114]]></title>    <link>https://juejin.cn/post/7581359420392210459</link>    <guid>https://juejin.cn/post/7581359420392210459</guid>    <pubDate>2025-12-08T23:59:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581359420392210459" data-draft-id="7580394927978856467" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æŒ–æ˜â€œæ²‰é»˜çš„ä¸“å®¶â€  -- è‚˜å­çš„ Swift å‘¨æŠ¥ #114"/> <meta itemprop="keywords" content="Swift,SwiftUI,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-08T23:59:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸œå¡è‚˜å­"/> <meta itemprop="url" content="https://juejin.cn/user/1548526032528727"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æŒ–æ˜â€œæ²‰é»˜çš„ä¸“å®¶â€  -- è‚˜å­çš„ Swift å‘¨æŠ¥ #114
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1548526032528727/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸œå¡è‚˜å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-08T23:59:33.000Z" title="Mon Dec 08 2025 23:59:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f949add546844fe896660a71a4514be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lic5Z2h6IKY5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765843173&amp;x-signature=OkHRgsQFSyhwag2oYl4QqY4fN60%3D" alt="issue114.webp" loading="lazy"/></p>
<h2 data-id="heading-0">æŒ–æ˜â€œæ²‰é»˜çš„ä¸“å®¶â€</h2>
<p>å…³æ³¨æˆ‘åšå®¢çš„è¯»è€…å¯èƒ½ç•™æ„åˆ°ï¼Œæœ€è¿‘ä¸€æ®µæ—¶é—´æˆ‘è¾ƒå°‘å‘è¡¨ä¸ªäººçš„ä½œå“ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ï¼Œæˆ‘é™†ç»­å‘å¸ƒäº†å¤šç¯‡æ¥è‡ªä¸åŒå¼€å‘è€…çš„å®¢åº§æ–‡ç« ã€‚æ²¡é”™ï¼Œè¿™æ˜¯æˆ‘è¿‘æœŸå‘èµ·çš„ä¸€é¡¹ç‰¹åˆ«ä¼åˆ’â€”â€”é‚€è¯·é‚£äº›åœ¨å„è‡ªé¢†åŸŸæ·±è€•ä¸”å“æœ‰å»ºæ ‘çš„å¼€å‘è€…ï¼Œåˆ†äº«ä»–ä»¬çš„å®æˆ˜ç»å†ã€ç‹¬å®¶ç§˜ç±ã€ç‹¬ç‰¹è§†è§’ä»¥åŠå¿ƒè·¯å†ç¨‹ã€‚</p>
<p>ä½œä¸ºä¸€ååšä¸»ï¼Œä¸çŸ¥ä¸è§‰é—´æˆ‘å·²ç»å†™äº†å‡ ç™¾ç¯‡æ–‡ç« ã€‚è™½ç„¶æˆ‘ç›¸ä¿¡è¿™äº›å†…å®¹ä»å…·ä»·å€¼ï¼Œä½†ä¸å¾—ä¸æ‰¿è®¤ï¼Œå’Œè®¸å¤šå®šæœŸè¾“å‡ºçš„ä½œè€…ä¸€æ ·ï¼Œæˆ‘é€æ¸é™·å…¥äº†ä¸€ç§â€œç¨‹å¼åŒ–â€çš„å†™ä½œæƒ¯æ€§ä¸­ã€‚æˆ‘çš„æ–‡ç« å¾€å¾€ä¾§é‡äºæ¢è®¨ API çš„ç”¨æ³•ã€å‰–æå†…éƒ¨ç»†èŠ‚ï¼Œä½†æ›´å¤šæ˜¯åŸºäºâ€œDemoâ€æ€ç»´æ¥æ„å»ºçš„ã€‚å³ä¾¿æ¶‰åŠ Bug ä¿®å¤æˆ–é¿å‘æŒ‡å—ï¼Œå¾€å¾€ä¹Ÿåªæ˜¯å¤„ç†ä¸€ä¸ªä¸ªå­¤ç«‹çš„â€œç‚¹â€ï¼Œè€Œéè¿è´¯çš„â€œçº¿â€æˆ–â€œé¢â€ã€‚</p>
<p>ä½œä¸ºå‘¨æŠ¥ç¼–è¾‘ï¼Œæˆ‘ä¹Ÿè§‚å¯Ÿåˆ°ï¼šå°½ç®¡äº’è”ç½‘ä¸Šæ¯å‘¨éƒ½æœ‰å¤§é‡ä¼˜ç§€æŠ€æœ¯æ–‡ç« æ¶Œç°ï¼Œä½†é’ˆå¯¹ç‰¹å®šé¢†åŸŸã€èƒ½å±•å¼€æ·±åº¦è®¨è®ºä¸”è´´è¿‘ä¸€çº¿å®æˆ˜çš„å†…å®¹å´æ˜¾å¾—ç¨€ç¼ºã€‚é€æ¸æˆ‘æ„è¯†åˆ°ï¼Œä¸»è¦åŸå› æ˜¯é‚£äº›å¥‹æˆ˜åœ¨ä¸€çº¿çš„å¼€å‘è€…å¾€å¾€ç¼ºä¹æ—¶é—´æˆ–ç²¾åŠ›æ¥æ’°å†™è¿™ç±»é•¿æ–‡ã€‚ä¸ºæ­¤ï¼Œå‡ ä¸ªæœˆå‰æˆ‘å¼€å§‹ç­–åˆ’è¿™é¡¹æ´»åŠ¨ï¼Œä¸»åŠ¨å‘è¿™ç±»å¼€å‘è€…çº¦ç¨¿ï¼Œè¯•å›¾æŒ–æ˜è¿™äº›â€œæ²‰é»˜çš„ä¸“å®¶â€ï¼Œå°†ä»–ä»¬è„‘æµ·ä¸­çš„â€œéšæ€§çŸ¥è¯†â€æ˜¾æ€§åŒ–ã€‚</p>
<p>åœ¨ä¸ä½œè€…ä»¬çš„æ²Ÿé€šä¸­ï¼Œæˆ‘å¸¸é‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼šå¯¹æ–¹ä¸çŸ¥é“è¯¥å†™ä»€ä¹ˆã€‚å°½ç®¡ä»–ä»¬æ¯å¤©éƒ½åœ¨è§£å†³æ£˜æ‰‹çš„éš¾é¢˜ï¼Œä½†å› é•¿æœŸæµ¸æ·«å…¶ä¸­ï¼Œå¾€å¾€â€œèº«åœ¨åºå±±ä¸çŸ¥çœŸé¢ç›®â€ï¼Œé€æ¸å¿½ç•¥äº†è¿™äº›ç»éªŒçš„æ™®é€‚ä»·å€¼ã€‚è®¸å¤šäººè®¤ä¸ºè‡ªå·±çš„å·¥ä½œç¨€æ¾å¹³å¸¸â€”â€”â€œéš¾é“è¿™äº›ä¸æ˜¯å¸¸è¯†å—ï¼ŸçœŸçš„ä¼šæœ‰äººæƒ³äº†è§£è¿™äº›ï¼Ÿâ€æ¯å½“æ­¤æ—¶ï¼Œæˆ‘ä¾¿ä¼šåˆ‡æ¢å›å¼€å‘è€…å’Œè¯»è€…çš„è§†è§’ï¼Œå‘ä»–ä»¬è¡¨è¾¾æˆ‘å¯¹è¯¥é¢†åŸŸçš„å¥½å¥‡ï¼Œä»¥åŠæˆ‘æ¸´æœ›æ¢ç©¶çš„é‚£äº›â€œè¡Œä¸šç§˜å¯†â€ã€‚</p>
<p>åœ¨ AI æ—¶ä»£ï¼Œå¤§æ¨¡å‹æˆ–è®¸å·²ç»æŒæ¡äº†æµ·é‡çš„ API ç”¨æ³•å’Œä»£ç èŒƒå¼ã€‚ä½†å¯¹äºäººç±»è€Œè¨€ï¼Œé‚£äº›çœŸæŒšçš„æƒ…æ„Ÿã€ä¸ç‰©ç†ä¸–ç•Œçš„çœŸå®ç¢°æ’ã€ä»¥åŠä»æ— æ•°æ¬¡å¤±è´¥å®è·µä¸­æç‚¼å‡ºçš„æ•™è®­ï¼Œä»æ˜¯æˆ‘ä»¬æœ€å®è´µä¸”ç‹¬ç‰¹çš„è´¢å¯Œã€‚</p>
<p>éå¸¸æ„Ÿè°¢è¿™äº›ä½œè€…ï¼Œèƒ½åœ¨ç¹å¿™çš„å·¥ä½œä¸­æŠ½è°ƒæ—¶é—´ä¸ç²¾åŠ›ï¼Œæ— ç§åœ°åˆ†äº«ä»–ä»¬çš„çŸ¥è¯†å®è—ã€‚æ–‡ä¸­çš„è®¸å¤šå†…å®¹ï¼Œè‹¥éç»è¿‡é•¿æœŸçš„å·¥ç¨‹å®è·µå’Œè¢«å›°éš¾åå¤åœ°â€œæŠ˜ç£¨â€ï¼Œæ˜¯ç»ä¸å¯èƒ½äº§ç”Ÿå¦‚æ­¤æ·±åˆ»çš„ä½“æ‚Ÿçš„ã€‚</p>
<p>è¿™é¡¹æŒ–æ˜â€œæ²‰é»˜ä¸“å®¶â€çš„è®¡åˆ’ä»åœ¨ç»§ç»­ã€‚è¿™ä¸ä»…æ˜¯ä¸ºäº†ä¸°å¯Œåšå®¢çš„å†…å®¹ï¼Œæ›´æ˜¯ä¸ºäº†æˆ‘ä»¬è‡ªå·±ï¼Œä¸ºäº†ç¤¾åŒºã€‚åœ¨è¿™ä¸ªä¿¡æ¯é€æ¸è¢« AI åŒè´¨åŒ–çš„ä»Šå¤©ï¼Œæˆ‘å¸Œæœ›èƒ½ä¸ºå¤§å®¶ä¿ç•™å¹¶å‘ˆç°æ›´å¤šç”±é²œæ´»ç»éªŒé“¸å°±çš„ã€ä¸ä¸€æ ·çš„å£°éŸ³ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-114%2F" target="_blank" title="https://fatbobman.com/zh/weekly/issue-114/" ref="nofollow noopener noreferrer">æœ¬æœŸå†…å®¹</a> | <a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-113%2F" target="_blank" title="https://fatbobman.com/zh/weekly/issue-113/" ref="nofollow noopener noreferrer">å‰ä¸€æœŸå†…å®¹</a> | <a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2F" target="_blank" title="https://fatbobman.com/zh/weekly/" ref="nofollow noopener noreferrer">å…¨éƒ¨å‘¨æŠ¥åˆ—è¡¨</a></p>
<blockquote>
<p>ğŸš€ <strong>ã€Šè‚˜å­çš„ Swift å‘¨æŠ¥ã€‹</strong></p>
<p>æ¯å‘¨ä¸ºä½ ç²¾é€‰æœ€å€¼å¾—å…³æ³¨çš„ Swiftã€SwiftUI æŠ€æœ¯åŠ¨æ€</p>
<ul>
<li><strong>ğŸ“® ç«‹å³è®¢é˜…</strong> | <a href="https://link.juejin.cn?target=https%3A%2F%2Fweekly.fatbobman.com%2Ffatbobman" target="_blank" title="https://weekly.fatbobman.com/fatbobman" ref="nofollow noopener noreferrer">weekly.fatbobman.com</a> è·å–å®Œæ•´å†…å®¹</li>
<li><strong>ğŸ‘¥ åŠ å…¥ç¤¾åŒº</strong> | <a href="https://link.juejin.cn?target=https%3A%2F%2Fdiscord.com%2Finvite%2F7FedN5E2QQ" target="_blank" title="https://discord.com/invite/7FedN5E2QQ" ref="nofollow noopener noreferrer">Discord</a> ä¸ 2000+ å¼€å‘è€…äº¤æµ</li>
<li><strong>ğŸ“š æ·±åº¦æ•™ç¨‹</strong> | <a href="https://link.juejin.cn?target=http%3A%2F%2Ffatbobman.com" target="_blank" title="http://fatbobman.com" ref="nofollow noopener noreferrer">fatbobman.com</a> æ¢ç´¢ 200+ åŸåˆ›æ–‡ç« </li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-1">è¿‘æœŸæ¨è</h2>
<h3 data-id="heading-2"><a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fposts%2Fa-deep-dive-into-swiftui-rich-text-layout%2F%3Futm_source%3Dfatbobman%2520weekly%2520issue%2520114%26utm_medium%3Dweb" target="_blank" title="https://fatbobman.com/zh/posts/a-deep-dive-into-swiftui-rich-text-layout/?utm_source=fatbobman%20weekly%20issue%20114&amp;utm_medium=web" ref="nofollow noopener noreferrer">SwiftUI å›¾æ–‡æ··æ’æ·±åº¦å‰–æï¼šè¶…è¶Š AttributedString â€”â€” MarkdownView ä¸ RichText çš„å®ç°</a></h3>
<p>è™½ç„¶ AttributedString å·²ç»æ¨å‡ºå¤šå¹´ï¼Œä½† SwiftUI ä»ç„¶ç¼ºä¹ã€Œå®Œæ•´ Markdown æ¸²æŸ“ + å›¾æ–‡æ··æ’ + å¯é€‰ä¸­æ–‡æœ¬ + ç²¾ç»†äº¤äº’ã€çš„å®˜æ–¹æ”¯æŒã€‚ä½œä¸º <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FLiYanan2004%2FMarkdownView%3Futm_source%3Dfatbobman%2520weekly%2520issue%2520114%26utm_medium%3Dweb" target="_blank" title="https://github.com/LiYanan2004/MarkdownView?utm_source=fatbobman%20weekly%20issue%20114&amp;utm_medium=web" ref="nofollow noopener noreferrer">MarkdownView</a> å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FLiYanan2004%2FRichText%3Futm_source%3Dfatbobman%2520weekly%2520issue%2520114%26utm_medium%3Dweb" target="_blank" title="https://github.com/LiYanan2004/RichText?utm_source=fatbobman%20weekly%20issue%20114&amp;utm_medium=web" ref="nofollow noopener noreferrer">RichText</a> çš„ä½œè€…ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2FLiYanan2004" target="_blank" title="https://x.com/LiYanan2004" ref="nofollow noopener noreferrer">LiYanan</a> åœ¨æœ¬æ–‡ä¸­ç³»ç»Ÿå›é¡¾äº†ä»–ä¸ºè§£å†³è¿™äº›é—®é¢˜æ‰€è¿›è¡Œçš„æŠ€æœ¯æ¢ç´¢â€”â€”ä»æœ€åˆå°è¯• Layout åè®®ï¼Œåˆ°è¸©è¿‡ TextRenderer çš„ç§ç§é™åˆ¶ï¼Œå†åˆ°æœ€ç»ˆåŸºäº TextKit æ‰“é€ å¯äº¤äº’ã€é«˜æ€§èƒ½çš„ Markdown æ¸²æŸ“ç»„ä»¶ã€‚è¿™æ—¢æ˜¯ä¸€ä»½å…³äºåšæŒä¸æˆé•¿çš„æŠ€æœ¯å¤ç›˜ï¼Œä¹Ÿæ˜¯ç›®å‰ SwiftUI æ–‡æœ¬æ¸²æŸ“é¢†åŸŸéš¾å¾—çš„èµ„æ–™ã€‚</p>
<hr/>
<h3 data-id="heading-3"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0114-01" target="_blank" title="https://l.fatbobman.com/w0114-01" ref="nofollow noopener noreferrer">æˆ‘è¯¥å¼€å¯å“ªäº› Swift ç¼–è¯‘å™¨è®¾ç½®ï¼Ÿ (What Setting Should I Use?)</a></h3>
<p>åå²çš„ Swift ä»æœªåƒä»Šå¤©è¿™æ ·å¼ºå¤§ï¼Œä½†éšä¹‹è€Œæ¥çš„å¤æ‚åº¦ä¹Ÿæ˜¾è€Œæ˜“è§ã€‚é™¤äº†æ›´å¤šçš„è¯­è¨€ç‰¹æ€§ï¼Œä½ è¿˜è¦é¢å¯¹ä¸æ–­æ‰©å¼ çš„ç¼–è¯‘å™¨è®¾ç½®â€”â€”å®ƒä»¬å½¼æ­¤ç»„åˆï¼Œè¶³ä»¥æ„å»ºå‡ºâ€œä¸åŒå¹´ä»£ã€ä¸åŒå“²å­¦ã€ä¸åŒè¯­ä¹‰â€çš„ Swiftã€‚</p>
<p>åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fmastodon.social%2F%40mattiem" target="_blank" title="https://mastodon.social/@mattiem" ref="nofollow noopener noreferrer">Matt Massicotte</a> ç”¨éå¸¸æ¥åœ°æ°”çš„æ–¹å¼å›ç­”äº†ä¸€ä¸ªç°å®é—®é¢˜ï¼š**åœ¨ Swift 6.2 / Xcode 26 æ—¶ä»£ï¼Œæˆ‘ç©¶ç«Ÿåº”è¯¥æ‰“å¼€å“ªäº›ç¼–è¯‘å™¨è®¾ç½®ï¼Ÿå¦‚æœä½ æ­£çŠ¹è±«æ˜¯å¦åˆ‡æ¢åˆ° 6 è¯­è¨€æ¨¡å¼ï¼Œæˆ–è¿Ÿè¿Ÿæ‹¿ä¸å®šä¸»æ„ <code>StrictConcurrency</code> åº”è®¾ä¸º minimalã€targeted æˆ– completeï¼Œè¿™ç¯‡æ–‡ç« å¯ä»¥è§†ä½œä¸€ä»½å†³ç­–è¾…åŠ©æ¸…å•ï¼Œå¸®åŠ©ä½ æŒ‰æ›´å¯æ§ã€æ¸è¿›çš„æ–¹å¼å®Œæˆè¿ç§»ã€‚</p>
<hr/>
<h3 data-id="heading-4"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0114-02" target="_blank" title="https://l.fatbobman.com/w0114-02" ref="nofollow noopener noreferrer">æšä¸¾èƒŒåçš„åŠ›é‡ (Swift Enum Hidden Magic Tricks)</a></h3>
<p>æšä¸¾æ˜¯ Swift ä¸­æå…·è¾¨è¯†åº¦çš„è¯­è¨€ç‰¹æ€§ï¼Œå…¶èƒ½åŠ›è¿œè¶…â€œå¸¦ç‚¹å…³è”å€¼çš„åˆ†æ”¯è¯­å¥â€ã€‚åœ¨è®¸å¤šèµ„æ·± Swift/iOS å¼€å‘è€…çœ¼ä¸­ï¼Œæšä¸¾æ›´åƒæ˜¯ä¸€ç§<strong>ç”¨äºå¡‘é€ æ¶æ„è¾¹ç•Œçš„å»ºæ¨¡å·¥å…·</strong>ï¼Œå°¤å…¶åœ¨ç®¡ç†å¤æ‚çŠ¶æ€æ—¶æ ¼å¤–çªå‡ºã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.linkedin.com%2Fin%2Fvalentebruno%2F" target="_blank" title="https://www.linkedin.com/in/valentebruno/" ref="nofollow noopener noreferrer">Bruno Valente Pimentel</a>åœ¨æœ¬æ–‡ä¸­ç³»ç»Ÿé˜è¿°äº†æšä¸¾å¦‚ä½•å¸®åŠ©æˆ‘ä»¬<strong>è®©æ— æ•ˆçŠ¶æ€ä¸å¯è¡¨ç¤ºï¼ˆMake Invalid States Unrepresentableï¼‰</strong> ï¼Œå¹¶é€šè¿‡å¤šä¸ªçœŸå®é¡¹ç›®çš„æ¼”åŒ–è¿‡ç¨‹å±•ç¤ºè¿™ä¸€æ€æƒ³å¦‚ä½•ä»â€œè¯­æ³•æŠ€å·§â€å‡çº§ä¸ºâ€œè®¾è®¡æ–¹æ³•è®ºâ€ã€‚</p>
<blockquote>
<p>â€œè®©æ— æ•ˆçŠ¶æ€ä¸å¯è¡¨ç¤ºâ€æ˜¯ç±»å‹é©±åŠ¨è®¾è®¡æ¨å´‡çš„å…³é”®æ€æƒ³ä¹‹ä¸€ã€‚å¦‚æœä½ æƒ³è¿›ä¸€æ­¥ç†è§£è¿™ä¸€ç†å¿µçš„åº•å±‚æ€æƒ³ï¼Œéå¸¸å»ºè®®ä¸€å¹¶é˜…è¯» <a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2FAlexOzun" target="_blank" title="https://x.com/AlexOzun" ref="nofollow noopener noreferrer">Alex Ozun</a> çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fswiftology.io%2Fcollections%2Ftype-driven-design%2F%3Futm_source%3Dfatbobman%2520weekly%2520issue%2520114%26utm_medium%3Dweb" target="_blank" title="https://swiftology.io/collections/type-driven-design/?utm_source=fatbobman%20weekly%20issue%20114&amp;utm_medium=web" ref="nofollow noopener noreferrer">Type-Driven Design with Swift</a> ç³»åˆ—æ–‡ç« ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-5"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0114-03" target="_blank" title="https://l.fatbobman.com/w0114-03" ref="nofollow noopener noreferrer">ä¸ºåº”ç”¨è®¾ç½®æ›¿ä»£å (Make Your App Visible with Alternative App Names)</a></h3>
<p>åœ¨æ—¥å¸¸ä½¿ç”¨ä¸­ï¼Œä½ å¯èƒ½æ³¨æ„åˆ°æŸäº› iOS åº”ç”¨å¯ä»¥é€šè¿‡å¤šä¸ªåç§°åœ¨ Spotlight ä¸­è¢«æœç´¢åˆ°ï¼Œè¿™åœ¨å®é™…ä½¿ç”¨åœºæ™¯ä¸­éå¸¸ä¾¿åˆ©ã€‚å…¶èƒŒåæ­£æ˜¯ SiriKit æä¾›çš„èƒ½åŠ›ï¼šå¼€å‘è€…å¯ä»¥åœ¨åº”ç”¨çš„ Info.plist ä¸­é…ç½®æœ€å¤š 3 ä¸ªæ›¿ä»£åç§°ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿé€šè¿‡ä¸åŒçš„å…³é”®è¯æ›´è½»æ¾åœ°æ‰¾åˆ°ä½ çš„åº”ç”¨ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2F0xWDG" target="_blank" title="https://x.com/0xWDG" ref="nofollow noopener noreferrer">Wesley de Groot</a> åœ¨æœ¬æ–‡ä¸­ä»‹ç»äº†è¿™ä¸€åŠŸèƒ½çš„å…·ä½“å®ç°æ–¹å¼ã€‚</p>
<blockquote>
<p>éšç€ macOS 26 ç§»é™¤äº†â€œå¯åŠ¨å°â€ï¼ˆLaunchpadï¼‰ï¼Œè¶Šæ¥è¶Šå¤šçš„ç”¨æˆ·å¼€å§‹ä¾èµ– Spotlight å¯åŠ¨åº”ç”¨ã€‚æˆ–è®¸æœªæ¥ï¼Œç±»ä¼¼çš„æ›¿ä»£åç§°æœºåˆ¶ä¹Ÿä¼šè¢«å¼•å…¥åˆ° macOS å¹³å°ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-6"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0114-04" target="_blank" title="https://l.fatbobman.com/w0114-04" ref="nofollow noopener noreferrer">ç”¨ @TabContentBuilder ç»„ç»‡ä½ çš„ Tab å£°æ˜ (Organizing SwiftUI Views with TabContent and @TabContentBuilder)</a></h3>
<p>åœ¨æœ€è¿‘çš„ä¸¤ä¸ªç‰ˆæœ¬ä¸­ï¼ŒSwiftUI å¯¹ Tab æ”¯æŒè¿›è¡Œäº†å¤§å¹…æ‰©å±•ï¼šä»ä¼ ç»Ÿçš„åº•éƒ¨åˆ†é¡µå¯¼èˆªï¼Œå»¶ä¼¸åˆ°æ›´çµæ´»çš„ç»“æ„åŒ–åœºæ™¯ï¼Œä¾‹å¦‚åœ¨å¤§å±è®¾å¤‡ä¸Šè¡¨ç°ç±»ä¼¼ä¾§è¾¹æ çš„å¯¼èˆªæ¨¡å¼ã€‚å› æ­¤ï¼Œè®¸å¤šé¡¹ç›®çš„ Tab å£°æ˜å¼€å§‹å˜å¾—è¶Šæ¥è¶Šåºå¤§ï¼šè§’è‰²æ§åˆ¶ã€æ¡ä»¶åˆ†æ”¯ã€å¯¼èˆªæ ˆã€æ ‡ç­¾é…ç½®ä¸å›¢é˜Ÿçº¦å®šå¾€å¾€æ··æ‚åœ¨åŒä¸€ä¸ª <code>TabView</code> ä¸­ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.linkedin.com%2Fin%2Fartem-mirzabekian%2F" target="_blank" title="https://www.linkedin.com/in/artem-mirzabekian/" ref="nofollow noopener noreferrer">Artem Mirzabekian</a> åœ¨æ–‡ä¸­å»ºè®®å°†ä¸ Tab ç›¸å…³çš„é…ç½®ä»ä¸»å¸ƒå±€ä¸­æŠ½ç¦»ï¼Œå€ŸåŠ©è‡ªå®šä¹‰çš„ <code>@TabContentBuilder</code> æ­å»ºä¸€ä¸ªä¸“å±çš„ã€å¯ç»„åˆçš„ tab å®šä¹‰åŒºåŸŸã€‚è¿™ç§ç»„ç»‡æ–¹å¼èƒ½å¤Ÿæ˜¾è‘—æå‡å¯è¯»æ€§ä¸å¯æ‰©å±•æ€§ï¼Œè®© Tab å¯¼èˆªçš„ç»´æŠ¤ä¸å†æˆä¸º SwiftUI é¡¹ç›®çš„éš¾ç‚¹ã€‚</p>
<blockquote>
<p>é™¤äº† <code>@ViewBuilder</code> å¤–ï¼ŒSwiftUI è¿˜æä¾›äº†å¤§é‡é¢†åŸŸä¸“ç”¨çš„ result builderï¼Œå¦‚ <code>TableColumnBuilder</code>ã€<code>CommandsBuilder</code>ã€<code>SceneBuilder</code>ã€<code>ToolbarContentBuilder</code>ã€<code>ChartContentBuilder</code> ç­‰ã€‚æ›´ç²¾ç¡®åœ°é€‰ç”¨è¿™äº› builderï¼Œä¸ä»…èƒ½è®©è§†å›¾ç»“æ„æ›´æ¸…æ™°ï¼Œä¹Ÿèƒ½åœ¨å¤æ‚åœºæ™¯ï¼ˆä¾‹å¦‚å¹¶ç”¨ Charts ä¸ Tableï¼‰å‡å°‘ç±»å‹æ¨æ–­è´Ÿæ‹…ï¼Œé¿å…è§¦å‘ SwiftUI å¸¸è§çš„ â€œtype-checking explosionâ€ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-7"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0114-05" target="_blank" title="https://l.fatbobman.com/w0114-05" ref="nofollow noopener noreferrer">ç”¨ LLDB è°ƒè¯• SwiftUI åº”ç”¨ (LLDB Power User Guide: Essential Commands &amp; SwiftUI Debugging)</a></h3>
<p>è°ƒè¯• SwiftUI å‘æ¥ä¸è½»æ¾ã€‚ç›¸æ¯”åœ¨ä»£ç é‡Œä¸æ–­æ’å…¥ <code>print</code>ï¼Œå°½ç®¡ LLDB çš„èƒ½åŠ›æ›´å¼ºå¤§ï¼Œä½†å´å¾€å¾€è¢«å¿½ç•¥ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.linkedin.com%2Fin%2Fjai-krishna-chandrasekar%2F" target="_blank" title="https://www.linkedin.com/in/jai-krishna-chandrasekar/" ref="nofollow noopener noreferrer">Jai Krishna</a> é€šè¿‡å¤§é‡ SwiftUI ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•åœ¨ LLDB ä¸­å®æ—¶æŸ¥çœ‹å’Œä¿®æ”¹ <code>@State</code>ã€<code>@Binding</code>ã€<code>@Published</code> çš„å†…éƒ¨çŠ¶æ€ï¼Œä½¿ç”¨ <code>Self._printChanges()</code> è¿½è¸ªè§†å›¾çš„é‡ç»˜æ¥æºï¼Œå¹¶å€ŸåŠ©ç²¾ç»†åŒ–çš„æ–­ç‚¹ç­–ç•¥å®šä½å¸ƒå±€ä¸äº¤äº’é—®é¢˜ã€‚</p>
<hr/>
<h3 data-id="heading-8"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0114-06" target="_blank" title="https://l.fatbobman.com/w0114-06" ref="nofollow noopener noreferrer">å¦‚ä½•æŸ¥æ‰¾åº”ç”¨çš„æŒ‚èµ·åŸå›  (Identifying Hangs in iOS Apps)</a></h3>
<p>è®¸å¤šå¼€å‘è€…éƒ½ä¼šé‡åˆ°ä¸»çº¿ç¨‹é˜»å¡å¯¼è‡´çš„ UI æŒ‚èµ·ï¼Œä½†å…·ä½“å¡åœ¨ä»€ä¹ˆä½ç½®ã€ç”±ä½•å¼•èµ·ï¼Œå¹¶ä¸æ˜¯æ¯ä¸ªäººéƒ½èƒ½å‡†ç¡®è°ƒè¯•ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Ftiagodhenriques" target="_blank" title="https://x.com/tiagodhenriques" ref="nofollow noopener noreferrer">Tiago Henriques</a> é€šè¿‡ä¸€ä¸ªåˆ»æ„åˆ¶é€ å¡é¡¿çš„ç¤ºä¾‹ Appï¼Œæ¼”ç¤ºäº†å¦‚ä½•åˆ©ç”¨ Instruments çš„ Time Profiler æ¥åˆæ­¥åˆ¤æ–­é—®é¢˜çš„æ€§è´¨å’ŒèŒƒå›´ã€‚å¤ç°ä¸è¯†åˆ«åªæ˜¯è§£å†³é—®é¢˜çš„ç¬¬ä¸€æ­¥ï¼Œä½œè€…ä¹Ÿè¡¨ç¤ºå¦‚æœè¯»è€…æ„Ÿå…´è¶£ï¼Œæœªæ¥è¿˜ä¼šç»§ç»­æ¨å‡ºè¿™ä¸€ä¸»é¢˜çš„æ·±å…¥å†…å®¹ã€‚</p>
<h2 data-id="heading-9">å·¥å…·</h2>
<h3 data-id="heading-10"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0114-07" target="_blank" title="https://l.fatbobman.com/w0114-07" ref="nofollow noopener noreferrer">SwiftUI Ratings</a></h3>
<p>å¦‚æœä½ æ­£åœ¨ä¸º App æ„å»ºè¯„åˆ†/è¯„è®ºç•Œé¢ï¼Œæˆ–å¸Œæœ›åœ¨åº”ç”¨å†…æ›´è‡ªç„¶åœ°å¼•å¯¼ç”¨æˆ·å‰å¾€ App Store ç•™ä¸‹è¯„ä»·ï¼Œç”± <a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fjsedlacekjr" target="_blank" title="https://x.com/jsedlacekjr" ref="nofollow noopener noreferrer">James Sedlacek</a> å¼€å‘çš„ SwiftUI-Ratings æä¾›äº†ä¸€å¥—å³æ’å³ç”¨çš„è§£å†³æ–¹æ¡ˆã€‚å®ƒå®ç°äº†ä¸€ä¸ªé«˜åº¦å¯å®šåˆ¶çš„è¯„åˆ†ç•Œé¢ï¼Œé£æ ¼ä¸Šä¸ App Store çš„è¯„åˆ†ä¸è¯„è®ºé¡µç›¸è¿‘ï¼Œå…è®¸å¼€å‘è€…é€šè¿‡ <code>AppRatingProviding</code> åè®®çµæ´»æ¥å…¥ä»»æ„æ•°æ®æºï¼ˆé¡¹ç›®ä¸­æä¾›äº† mock å®ç°ä¸ Supabase / App Store Connect API ç¤ºä¾‹ï¼‰ã€‚å¯¹äºéœ€è¦å¿«é€Ÿæ­å»ºâ€œåº”ç”¨å†…è¯„åˆ†è¯·æ±‚â€åŠŸèƒ½çš„å¼€å‘è€…æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªè½»é‡ã€ç°ä»£ã€ä¸”æ˜“äºæ‰©å±•çš„é€‰æ‹©ã€‚</p>
<hr/>
<h3 data-id="heading-11"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0114-08" target="_blank" title="https://l.fatbobman.com/w0114-08" ref="nofollow noopener noreferrer">Swift Hugging Face</a></h3>
<p>Hugging Face æ˜¯å…¨çƒé¢†å…ˆçš„å¼€æº AI ç¤¾åŒºä¸æ¨¡å‹å¹³å°ï¼Œæä¾›æµ·é‡æ¨¡å‹ã€æ•°æ®é›†ã€å·¥å…·é“¾åŠåä½œç©ºé—´ï¼Œä½œä¸ºå…³é”®çš„ AI åŸºç¡€è®¾æ–½ï¼Œèµ‹èƒ½ç ”ç©¶è€…ã€å·¥ç¨‹å¸ˆä¸ä¼ä¸šé«˜æ•ˆæ„å»ºå¹¶éƒ¨ç½² AI åº”ç”¨ã€‚</p>
<p>ä½œä¸º Hugging Face å®˜æ–¹å‡ºå“çš„ Swift å®¢æˆ·ç«¯ï¼Œ<strong>Swift Hugging Face</strong> æä¾›äº†ä¸¤å¤§æ ¸å¿ƒèƒ½åŠ›ï¼šä¸€æ–¹é¢ï¼Œå®ƒå®Œæ•´å°è£…äº† Hugging Face Hub APIï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿä»¥åŸç”Ÿ Swift æ–¹å¼ç®¡ç†æ¨¡å‹ã€æ•°æ®é›†ã€Spaces ç­‰èµ„æºï¼›å¦ä¸€æ–¹é¢ï¼Œå®ƒæ— ç¼é›†æˆ Inference APIï¼Œè®©æ–‡æœ¬ç”Ÿæˆï¼ˆChat Completionï¼‰ã€æ–‡æœ¬å‘é‡åŒ–ã€æ–‡ç”Ÿå›¾/è§†é¢‘ï¼ˆText-to-Image/Videoï¼‰ã€è¯­éŸ³è½¬å†™ç­‰ä»»åŠ¡èƒ½å¤Ÿç›´æ¥åœ¨ iOSã€macOSã€visionOS ä¹ƒè‡³ Linux ä¸ Windows ä¸Šè¿è¡Œã€‚</p>
<p>åœ¨æ–‡ç«  <a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0114-09" target="_blank" title="https://l.fatbobman.com/w0114-09" ref="nofollow noopener noreferrer">Introducing swift-huggingface: The Complete Swift Client for Hugging Face</a> ä¸­ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fmattt" target="_blank" title="https://x.com/mattt" ref="nofollow noopener noreferrer">Mattt</a> è¯¦ç»†é˜è¿°äº†è¯¥åº“çš„è®¾è®¡ç†å¿µä¸æ ¸å¿ƒä½¿ç”¨æ–¹å¼ï¼Œä¸º Swift å¼€å‘è€…æ‰“å¼€äº†æ¥å…¥ Hugging Face AI ç”Ÿæ€çš„å®Œæ•´è·¯å¾„ã€‚</p>
<h2 data-id="heading-12">å¾€æœŸå†…å®¹</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhttps%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-113%2F" target="_blank" title="https://https://fatbobman.com/zh/weekly/issue-113/" ref="nofollow noopener noreferrer">å½“ Android æ‰‹æœºã€å¼ºè¡Œå…¼å®¹ã€AirDrop - #113</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-112%2F" target="_blank" title="https://fatbobman.com/zh/weekly/issue-112/" ref="nofollow noopener noreferrer">æ¯•ä¸š 30 å¹´åŒå­¦ç¾¤ï¼šä¸€åœº AI å¼•å‘çš„â€œçœŸå‡éš¾è¾¨â€å±æœº - #112</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-111%2F" target="_blank" title="https://fatbobman.com/zh/weekly/issue-111/" ref="nofollow noopener noreferrer">Homebrew 5.0ï¼šå¹¶è¡ŒåŠ é€Ÿã€MCP åŠ æŒï¼Œä¸ Intel çš„æœ€åå€’è®¡æ—¶ - #111</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-110%2F" target="_blank" title="https://fatbobman.com/zh/weekly/issue-110/" ref="nofollow noopener noreferrer">Skip Fuseç°åœ¨å¯¹ç‹¬ç«‹å¼€å‘è€…å…è´¹ï¼- #110</a></li>
</ul>
<h2 data-id="heading-13">ğŸ’ æ”¯æŒä¸åé¦ˆ</h2>
<p>å¦‚æœæœ¬æœŸå‘¨æŠ¥å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ï¼š</p>
<ul>
<li>ğŸ‘ <strong>ç‚¹èµ</strong> - è®©æ›´å¤šå¼€å‘è€…çœ‹åˆ°</li>
<li>ğŸ’¬ <strong>è¯„è®º</strong> - åˆ†äº«ä½ çš„çœ‹æ³•æˆ–é—®é¢˜</li>
<li>ğŸ”„ <strong>è½¬å‘</strong> - å¸®åŠ©åŒè¡Œå…±åŒæˆé•¿</li>
</ul>
<hr/>
<blockquote>
<p>ğŸš€ <strong>æ‹“å±• Swift è§†é‡</strong></p>
<ul>
<li><strong>ğŸ“® é‚®ä»¶è®¢é˜…</strong> | <a href="https://link.juejin.cn?target=https%3A%2F%2Fweekly.fatbobman.com%2Fwelcome" target="_blank" title="https://weekly.fatbobman.com/welcome" ref="nofollow noopener noreferrer">weekly.fatbobman.com</a> è·å–ç‹¬å®¶æŠ€æœ¯æ´å¯Ÿ</li>
<li><strong>ğŸ‘¥ å¼€å‘è€…ç¤¾åŒº</strong> | <a href="https://link.juejin.cn?target=https%3A%2F%2Fdiscord.com%2Finvite%2F7FedN5E2QQ" target="_blank" title="https://discord.com/invite/7FedN5E2QQ" ref="nofollow noopener noreferrer">Discord</a> å®æ—¶äº¤æµå¼€å‘ç»éªŒ</li>
<li><strong>ğŸ“š åŸåˆ›æ•™ç¨‹</strong> | <a href="https://link.juejin.cn?target=http%3A%2F%2Ffatbobman.com" target="_blank" title="http://fatbobman.com" ref="nofollow noopener noreferrer">fatbobman.com</a> å­¦ä¹  Swift/SwiftUI æœ€ä½³å®è·µ</li>
</ul>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>