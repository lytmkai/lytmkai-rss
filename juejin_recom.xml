<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[æˆ‘ä¸ºä»€ä¹ˆæ”¾å¼ƒäº†XMindå’Œäº¿å›¾ï¼ŒæŠ•å‘äº†è¿™æ¬¾å¼€æºç»˜å›¾å·¥å…·çš„æ€€æŠ±ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7582104240986963994</link>    <guid>https://juejin.cn/post/7582104240986963994</guid>    <pubDate>2025-12-11T01:09:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582104240986963994" data-draft-id="7582090790182027302" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘ä¸ºä»€ä¹ˆæ”¾å¼ƒäº†XMindå’Œäº¿å›¾ï¼ŒæŠ•å‘äº†è¿™æ¬¾å¼€æºç»˜å›¾å·¥å…·çš„æ€€æŠ±ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯,Java,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-11T01:09:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SimonKing"/> <meta itemprop="url" content="https://juejin.cn/user/4001878056904584"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘ä¸ºä»€ä¹ˆæ”¾å¼ƒäº†XMindå’Œäº¿å›¾ï¼ŒæŠ•å‘äº†è¿™æ¬¾å¼€æºç»˜å›¾å·¥å…·çš„æ€€æŠ±ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4001878056904584/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SimonKing
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T01:09:39.000Z" title="Thu Dec 11 2025 01:09:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šã€ç¼–ç¨‹æœèŠ±å¤•æ‹¾ã€‘ï¼Œå¯è·å–é¦–å‘å†…å®¹ã€‚</p>
</blockquote>
<h2 data-id="heading-0">01 å¼•è¨€</h2>
<p>æ€ç»´å¯¼å›¾ã€æµç¨‹å›¾åº”è¯¥æ˜¯æ¯ä¸ªç¨‹åºå‘˜éƒ½ä¼šç”¨åˆ°çš„ç»˜å›¾å·¥å…·ã€‚<code>Xmind</code>å’Œäº¿å›¾æ›¾æ˜¯æˆ‘çš„é¦–é€‰å·¥å…·ï¼Œä½†æ˜¯å…è´¹ç‰ˆåŠŸèƒ½å—é™ï¼Œé«˜çº§åŠŸèƒ½éœ€ä»˜è´¹ï¼Œç”¨èµ·æ¥æ€»æ˜¯å·®ç‚¹æ„æ€ã€‚è™½ç„¶é€šè¿‡å…¶ä»–æ–¹å¼æ­£å¸¸ä½¿ç”¨ï¼ˆå¤§å®¶éƒ½æ‡‚å¾—ï¼‰ï¼Œä½†æ˜¯è½¯ä»¶çš„æ›´æ–°æ ¹æœ¬ä¸æ•¢åŠ¨ï¼Œä¸€æ—¦æ›´æ–°å°±ä¼šå‰åŠŸå°½å¼ƒ......è€Œä¸”ä¸¤æ¬¾å·¥å…·æ€»ä¼šæ¥å›åˆ‡æ¢ï¼Œè™½å·²ä¹ æƒ¯ï¼Œä½†ç¨æ˜¾éº»çƒ¦ï¼</p>
<p>ç›´åˆ°ä¸ä¹…å‰é€›<code>GitHub</code>å‘ç°äº†ä¸€æ¬¾å¼€æºçš„ä¸”å¯ä»¥åœ¨çº¿ä½¿ç”¨çš„å·¥å…·ï¼š<code>Drawnix</code>ã€‚ç•Œé¢ç®€çº¦ï¼Œæ»¡è¶³æ—¥å¸¸åŸºæœ¬ç»˜å›¾éœ€æ±‚ï¼Œä¸”æ”¯æŒ <code>mermaid</code> è¯­æ³•è½¬æµç¨‹å›¾ç­‰ï¼Œç”¨èµ·æ¥éå¸¸ä¸æ»‘ã€‚æ•´ç†ä¸€ä¸‹åˆ†äº«ç»™å¤§å®¶ï¼</p>
<h2 data-id="heading-1">02 ç®€ä»‹</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aded8cfebf8a44ec9b91ac8ec9521a06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020178&amp;x-signature=NcpQeHkSVtB6dxcGrOsSeo7vWtY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">2.1 åç§°çš„ç”±æ¥</h3>
<p><code>Drawnix</code> ï¼Œæºäºç»˜ç”»( <code>Draw</code>)ä¸å‡¤å‡°( <code>Phoenix</code> )çš„çµæ„Ÿäº¤ç»‡ã€‚å‡¤å‡°è±¡å¾ç€ç”Ÿç”Ÿä¸æ¯çš„åˆ›é€ åŠ›ï¼Œè€Œ <code>Draw</code>ä»£è¡¨ç€äººç±»æœ€åŸå§‹çš„è¡¨è¾¾æ–¹å¼ã€‚åœ¨è¿™é‡Œï¼Œæ¯ä¸€æ¬¡åˆ›ä½œéƒ½æ˜¯ä¸€æ¬¡è‰ºæœ¯çš„æ¶…æ§ƒï¼Œæ¯ä¸€ç¬”ç»˜ç”»éƒ½æ˜¯çµæ„Ÿçš„é‡ç”Ÿã€‚</p>
<p>åˆ›æ„å¦‚åŒå‡¤å‡°ï¼Œæµ´ç«æ–¹èƒ½é‡ç”Ÿï¼Œè€Œ <code>Drawnix</code> è¦åšæŠ€æœ¯ä¸åˆ›æ„ä¹‹ç«çš„å®ˆæŠ¤è€…ã€‚</p>
<h3 data-id="heading-3">2.2 æ¡†æ¶</h3>
<p><code>Drawnix</code> çš„å®šä½æ˜¯ä¸€ä¸ªå¼€ç®±å³ç”¨ã€å¼€æºã€å…è´¹çš„å·¥å…·äº§å“ï¼Œå®ƒçš„åº•å±‚æ˜¯ <code>Plait</code>æ¡†æ¶ï¼Œ<code>Plait</code> æ˜¯ä½œè€…å…¬å¸å¼€æºçš„ä¸€æ¬¾ç”»å›¾æ¡†æ¶ï¼Œä»£è¡¨ç€å…¬å¸åœ¨çŸ¥è¯†åº“äº§å“ä¸Šçš„é‡è¦æŠ€æœ¯æ²‰æ·€ã€‚</p>
<p><code>Drawnix</code> æ˜¯æ’ä»¶æ¶æ„ï¼Œä¸å‰é¢è¯´åˆ°å¼€æºå·¥å…·æ¯”æŠ€æœ¯æ¶æ„æ›´å¤æ‚ä¸€äº›ï¼Œä½†æ˜¯æ’ä»¶æ¶æ„ä¹Ÿæœ‰ä¼˜åŠ¿ï¼Œæ¯”å¦‚èƒ½å¤Ÿæ”¯æŒå¤šç§ <code>UI</code> æ¡†æ¶ï¼ˆ<code>Angular</code>ã€<code>React</code>ï¼‰ï¼Œèƒ½å¤Ÿé›†æˆä¸åŒå¯Œæ–‡æœ¬æ¡†æ¶ï¼ˆå½“å‰ä»…æ”¯æŒ <code>Slate</code>æ¡†æ¶ï¼‰ï¼Œåœ¨å¼€å‘ä¸Šå¯ä»¥å¾ˆå¥½çš„å®ç°ä¸šåŠ¡çš„åˆ†å±‚ï¼Œå¼€å‘å„ç§ç»†ç²’åº¦çš„å¯å¤ç”¨æ’ä»¶ï¼Œå¯ä»¥æ‰©å±•æ›´å¤šçš„ç”»æ¿çš„åº”ç”¨åœºæ™¯ã€‚</p>
<p><code>GitHub</code>åœ°å€ï¼š</p>
<h3 data-id="heading-4">2.3 ç‰¹æ€§</h3>
<ul>
<li>ğŸ’¯ å…è´¹ + å¼€æº</li>
<li>âš’ï¸ æ€ç»´å¯¼å›¾ã€æµç¨‹å›¾</li>
<li>ğŸ–Œ ç”»ç¬”</li>
<li>ğŸ˜€ æ’å…¥å›¾ç‰‡</li>
<li>ğŸš€ åŸºäºæ’ä»¶æœºåˆ¶</li>
<li>ğŸ–¼ï¸ ğŸ“ƒ å¯¼å‡ºä¸º PNG, JSON(<code>.drawnix</code>)</li>
<li>ğŸ’¾ è‡ªåŠ¨ä¿å­˜ï¼ˆæµè§ˆå™¨ç¼“å­˜ï¼‰</li>
<li>âš¡ ç¼–è¾‘ç‰¹æ€§ï¼šæ’¤é”€ã€é‡åšã€å¤åˆ¶ã€ç²˜è´´ç­‰</li>
<li>ğŸŒŒ æ— é™ç”»å¸ƒï¼šç¼©æ”¾ã€æ»šåŠ¨</li>
<li>ğŸ¨ ä¸»é¢˜æ¨¡å¼</li>
<li>ğŸ“± ç§»åŠ¨è®¾å¤‡é€‚é…</li>
<li>ğŸ“ˆ æ”¯æŒ mermaid è¯­æ³•è½¬æµç¨‹å›¾</li>
<li>âœ¨ æ”¯æŒ markdown æ–‡æœ¬è½¬æ€ç»´å¯¼å›¾ï¼ˆæ–°æ”¯æŒ ğŸ”¥ğŸ”¥ğŸ”¥ï¼‰</li>
</ul>
<h3 data-id="heading-5">2.4 å®‰è£…</h3>
<p>æä¾›<code>Docker</code>éƒ¨ç½²ï¼š</p>
<pre><code class="hljs language-sh" lang="sh">docker pull pubuzhixing/drawnix:latest
</code></pre>
<p>ä¹Ÿå¯ä»¥åœ¨çº¿ä½¿ç”¨ï¼š</p>
<p>åœ°å€ï¼š</p>
<h2 data-id="heading-6">03 æœ€ä½³å®è·µ</h2>
<p>å®è·µæˆ‘ä»¬é‡‡ç”¨åœ¨çº¿æ–¹å¼ï¼Œå¦‚æœæ³¨é‡å®‰å…¨æˆ–è€…æœ¬åœ°ä½¿ç”¨å¯ä»¥ä½¿ç”¨<code>Docker</code>éƒ¨ç½²ã€‚</p>
<h3 data-id="heading-7">3.1 ç•Œé¢è¯´æ˜</h3>
<p>é€šè¿‡<code>https://drawnix.com/</code>è¿›å…¥ä¹‹åï¼Œæ‰€æœ‰åŠŸèƒ½å¦‚å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd1050e9bc264de3b953043d5d33b19b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020178&amp;x-signature=wSlN%2Bab1vWJtIehD7RrD3%2F64YBA%3D" alt="" loading="lazy"/></p>
<p>ä¸­é—´å·¥å…·æ åˆ†åˆ«è¡¨ç¤ºï¼š</p>
<ul>
<li>æ‹–æ‹½</li>
<li>é€‰ä¸­</li>
<li>æ€ç»´å¯¼å›¾</li>
<li>æ–‡å­—</li>
<li>æ‰‹ç»˜</li>
<li>ç®­å¤´</li>
<li>æµç¨‹å›¾</li>
<li>æ’å…¥å›¾ç‰‡</li>
<li>æ ¼å¼è½¬æ¢</li>
</ul>
<p>åŠŸèƒ½éƒ½æ¯”è¾ƒç®€å•ï¼Œæ€ç»´å¯¼å›¾ã€æµç¨‹å›¾ä»¥åŠæ ¼å¼è½¬åŒ–æ˜¯å¸¸ç”¨çš„å·¥å…·ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17d70fca32644037a52d5b30600c76d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020178&amp;x-signature=rPCwuGYDZ0OtICIaWme7hN8CUrE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">3.2 æ€ç»´å¯¼å›¾</h3>
<p>æ€ç»´å¯¼å›¾çš„ä½¿ç”¨æ–¹å¼å’Œ<code>Xmind</code>çš„ç”¨æ³•æä¸ºç›¸ä¼¼ã€‚é€‰ä¸­èŠ‚ç‚¹ï¼Œç„¶å<code>Tab</code>é”®å°±å¯ä»¥æ·»åŠ åŒçº§å­èŠ‚ç‚¹ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨<code>+</code>å·æ·»åŠ ã€‚<code>-</code>å·å¹¶ä¸æ˜¯åˆ é™¤ï¼Œè€Œæ˜¯åˆå¹¶ã€‚åˆ é™¤ä¹Ÿéå¸¸ç®€å•ï¼Œé€‰ä¸­ç›´æ¥<code>Delete</code>å³å¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/253053338d2e4fad9b280bbd1abdd554~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020178&amp;x-signature=29EXmJucrIPvcGoTl6actyUkNhE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-9">3.3 æµç¨‹å›¾</h3>
<p>æµç¨‹å›¾çš„å›¾å½¢ç›¸å¯¹æ¥è¯´æ¯”è¾ƒç®€å•ï¼Œåªæœ‰ä¸ƒé¡¹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2324740772ea409f98298583d7bd5115~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020178&amp;x-signature=gZmqMXebA63ivy6m8RC07wMMizg%3D" alt="" loading="lazy"/></p>
<p>é€‰ä¸­ä¹‹åç›´æ¥ç»˜åˆ¶å³å¯ï¼Œå›¾å½¢ä¹‹é—´ä½¿ç”¨ç®­å¤´é“¾æ¥å³å¯ã€‚</p>
<h3 data-id="heading-10">3.4 æ ¼å¼è½¬åŒ–</h3>
<p>ç›®å‰æ”¯æŒä¸¤ç§æ ¼å¼è½¬åŒ–æˆæµç¨‹å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d35787be17174e36b5f939f55898cd0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020178&amp;x-signature=OKi2U0L%2Bmo%2Bk5stpOPLMTEv7YdI%3D" alt="" loading="lazy"/></p>
<p><strong>Mermaid</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/348d3bc49d6e4c3ab89f69db4c71c5f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020178&amp;x-signature=aB%2F1hlGPV4%2F3BRkQBtAKBM90bio%3D" alt="" loading="lazy"/></p>
<p>ä»…æ”¯æŒæµç¨‹å›¾ã€åºåˆ—å›¾å’Œç±»å›¾</p>
<p><strong>Markdown</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e135f734d244b1b8688f27082a54efb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020178&amp;x-signature=s3Sxc7cdzoDgTOii7GSOgJL0rC0%3D" alt="" loading="lazy"/></p>
<p>ä»…æ”¯æŒæ€ç»´å¯¼å›¾ã€‚</p>
<h2 data-id="heading-11">04 å°ç»“</h2>
<p><code>Drawnix</code>çš„æç®€è®¾è®¡æ»¡è¶³æ—¥å¸¸ç»˜å›¾çš„éœ€è¦ï¼Œå¯èƒ½åœ¨å¾ˆå¤šåŠŸèƒ½ä¸Šä¸å¦‚<code>Xmind</code>æˆ–è€…äº¿å›¾ï¼Œä½†æ˜¯å®ƒç¡®å®ä¸¤è€…çš„ç»“åˆã€‚æ˜¯ä¸€æ¬¾ä¸é”™çš„ç»˜å›¾è½¯ä»¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœ€æ–°ï¼é‡å­ä½æ™ºåº“é‡ç£…å‘å¸ƒã€Š2025å¹´åº¦AIåå¤§è¶‹åŠ¿æŠ¥å‘Šã€‹ï¼šä¸­å›½ä»å‚ä¸è€…å˜é¢†å¯¼è€…]]></title>    <link>https://juejin.cn/post/7582131164727541800</link>    <guid>https://juejin.cn/post/7582131164727541800</guid>    <pubDate>2025-12-11T01:09:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582131164727541800" data-draft-id="7582044568721834024" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœ€æ–°ï¼é‡å­ä½æ™ºåº“é‡ç£…å‘å¸ƒã€Š2025å¹´åº¦AIåå¤§è¶‹åŠ¿æŠ¥å‘Šã€‹ï¼šä¸­å›½ä»å‚ä¸è€…å˜é¢†å¯¼è€…"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-11T01:09:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é’æ¢…ä¸»ç "/> <meta itemprop="url" content="https://juejin.cn/user/2277843825604222"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœ€æ–°ï¼é‡å­ä½æ™ºåº“é‡ç£…å‘å¸ƒã€Š2025å¹´åº¦AIåå¤§è¶‹åŠ¿æŠ¥å‘Šã€‹ï¼šä¸­å›½ä»å‚ä¸è€…å˜é¢†å¯¼è€…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2277843825604222/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é’æ¢…ä¸»ç 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T01:09:56.000Z" title="Thu Dec 11 2025 01:09:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ å¥½ï¼Œæˆ‘æ˜¯<strong>æ°å“¥</strong>ã€‚</p>
<p>å°±åœ¨æ˜¨å¤©ï¼Œé‡å­ä½æ™ºåº“æœ€æ–°å‘å¸ƒäº†ã€Š<strong>2025å¹´åº¦AIåå¤§è¶‹åŠ¿æŠ¥å‘Š</strong>ã€‹æŠ¥å‘Šã€‚è¿™ä»½æŠ¥å‘ŠåŸºäºå…¨çƒ<strong>AI</strong> æŠ€æœ¯å‰æ²¿åŠ¨æ€ï¼Œæ¢³ç†å‡º <strong>2025</strong> å¹´å°†æ·±åˆ»å½±å“äº§ä¸šå’Œç¤¾ä¼šçš„åå¤§å…³é”®è¶‹åŠ¿ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51e0d865c9ce411b8cbc5ef167fcd169~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020196&amp;x-signature=bmzF%2BOp1O2%2FLw3dMtekmW9afeXw%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29e83fe1f1ab4c75b3d3f3e3f4cdf479~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020196&amp;x-signature=GwtBkWzzvyRQsBaMvJClFqylKlc%3D" alt="" loading="lazy"/></p>
<p>æŠ¥å‘Šä»å››ä¸ªç»´åº¦å±•å¼€ï¼š<strong>åŸºç¡€è®¾æ–½ã€æ¨¡å‹è¿›åŒ–ã€åº”ç”¨ç‰ˆå›¾å’Œä¸­å›½æ—¶é—´</strong>ã€‚</p>
<h2 data-id="heading-0">ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€è®¾æ–½â€”â€”ç®—åŠ›æˆâ€œæ–°çŸ³æ²¹â€</h2>
<p><strong>AI</strong>çš„é£è·ƒç¦»ä¸å¼€åº•å±‚æ”¯æ’‘ã€‚æŠ¥å‘ŠæŒ‡å‡ºï¼Œâ€œæœ‰é™ç®—åŠ›â€å·²æˆä¸ºå…¨çƒæˆ˜ç•¥ç“¶é¢ˆï¼Œè¿™ç›´æ¥å‚¬ç”Ÿäº†åŸºç¡€è®¾æ–½çš„å·¨å˜ã€‚</p>
<h4 data-id="heading-1">è¶‹åŠ¿1ï¼šç®—åŠ›åŸºå»ºåŒ–â€”â€”æ•°æ®ä¸­å¿ƒéœ€æ±‚ç‹‚é£™ï¼Œç®—åŠ›ç»æµæ˜¯æ™ºèƒ½äº§ä¸šç¬¬ä¸€å¤§å¼•æ“</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc6598c23677460eae7276bf9fb1973d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020196&amp;x-signature=rZT2W237kqzNxxNKvDy3BeNyRI4%3D" alt="" loading="lazy"/></p>
<p><strong>AI</strong>è®­ç»ƒåƒç‚¼é’¢ä¸€æ ·ï¼Œéœ€è¦æµ·é‡â€œç”µåŠ›â€â€”â€”è¿™å°±æ˜¯ç®—åŠ›ã€‚<strong>2025å¹´</strong>ï¼Œå…¨çƒè¶…å¤§è§„æ¨¡æ•°æ®ä¸­å¿ƒå°†è¿æ¥å»ºè®¾æµªæ½®ã€‚åƒ<strong>Stargate</strong>æ˜Ÿé™…ä¹‹é—¨è®¡åˆ’ï¼ˆæŠ•èµ„è¶… <strong><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1000</mn><mtext>äº¿</mtext><mo>âˆ—</mo><mo>âˆ—</mo><mtext>ï¼‰ï¼Œç”±</mtext><mo>âˆ—</mo><mo>âˆ—</mo><mi>O</mi><mi>p</mi><mi>e</mi><mi>n</mi><mi>A</mi><mi>I</mi><mo>âˆ—</mo><mo>âˆ—</mo><mtext>ä¸</mtext><mo>âˆ—</mo><mo>âˆ—</mo><mi>O</mi><mi>r</mi><mi>a</mi><mi>c</mi><mi>l</mi><mi>e</mi><mo>âˆ—</mo><mo>âˆ—</mo><mtext>ã€</mtext><mo>âˆ—</mo><mo>âˆ—</mo><mi>S</mi><mi>o</mi><mi>f</mi><mi>t</mi><mi>B</mi><mi>a</mi><mi>n</mi><mi>k</mi><mo>âˆ—</mo><mo>âˆ—</mo><mtext>åˆä½œï¼Œå°±æ˜¯å…¸å‹ä»£è¡¨ã€‚</mtext><mo>âˆ—</mo><mo>âˆ—</mo><mi>G</mi><mi>o</mi><mi>o</mi><mi>g</mi><mi>l</mi><mi>e</mi><mo>âˆ—</mo><mo>âˆ—</mo><mtext>çš„</mtext><mo>âˆ—</mo><mo>âˆ—</mo><mi>A</mi><mi>I</mi><mo>âˆ—</mo><mo>âˆ—</mo><mtext>æ¢çº½æŠ•</mtext><mo>âˆ—</mo><mo>âˆ—</mo></mrow><annotation encoding="application/x-tex">1000äº¿**ï¼‰ï¼Œç”±**OpenAI**ä¸**Oracle**ã€**SoftBank**åˆä½œï¼Œå°±æ˜¯å…¸å‹ä»£è¡¨ã€‚**Google**çš„**AI**æ¢çº½æŠ• **</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">1000</span><span class="mord cjk_fallback">äº¿</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">âˆ—</span><span class="mord cjk_fallback">ï¼‰ï¼Œç”±</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord">âˆ—</span><span class="mord mathnormal">Op</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">âˆ—</span><span class="mord cjk_fallback">ä¸</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord">âˆ—</span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">a</span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">âˆ—</span><span class="mord cjk_fallback">ã€</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord">âˆ—</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal" style="margin-right:0.05017em;">tB</span><span class="mord mathnormal" style="margin-right:0.03148em;">ank</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">âˆ—</span><span class="mord cjk_fallback">åˆä½œï¼Œå°±æ˜¯å…¸å‹ä»£è¡¨ã€‚</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord">âˆ—</span><span class="mord mathnormal">G</span><span class="mord mathnormal">oo</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">âˆ—</span><span class="mord cjk_fallback">çš„</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">âˆ—</span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">âˆ—</span><span class="mord cjk_fallback">æ¢çº½æŠ•</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.4653em;"/><span class="mord">âˆ—</span></span></span></span></span>400äº¿</strong>ï¼Œ<strong>Microsoft</strong>çš„<strong>AI</strong>è¶…çº§å›­åŒº <strong>$73äº¿</strong>ï¼Œè¿™äº›é¡¹ç›®ä¸åªå»ºæœåŠ¡å™¨æˆ¿ï¼Œæ›´æ˜¯â€œç®—åŠ›å·¥å‚â€ã€‚</p>
<p>å…¨çƒèµ„æœ¬å¼€æ”¯é«˜è¾¾ <strong>2980äº¿ç¾å…ƒ</strong>ï¼Œäº‘è®¡ç®—å·¨å¤´å¦‚<strong>AWS</strong>ï¼ˆ<strong>â‚¬78äº¿</strong>åœ¨å¾·å›½ï¼‰ã€<strong>Google</strong>ï¼ˆ<strong>â‚¬10äº¿+</strong>ï¼‰æ­£å€¾æ–œèµ„é‡‘å‘<strong>AI</strong>ä¸“ç”¨ç®—åŠ›ã€‚æ¬§æ´²ã€ä¸­ä¸œã€ä¸œå—äºšç­‰åœ°äº‰ç›¸å¸ƒå±€ï¼Œä¸»æƒäº‘å’Œæ¸…æ´èƒ½æºæˆçƒ­ç‚¹ã€‚æ¯”å¦‚ï¼Œæ²™ç‰¹<strong>AWS</strong>äº‘åŒºåŸŸæŠ• <strong><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>53</mn><mtext>äº¿</mtext><mo>âˆ—</mo><mo>âˆ—</mo><mtext>ï¼Œè‚¯å°¼äºš</mtext><mo>âˆ—</mo><mo>âˆ—</mo><mi>M</mi><mi>i</mi><mi>c</mi><mi>r</mi><mi>o</mi><mi>s</mi><mi>o</mi><mi>f</mi><mi>t</mi><mo>âˆ—</mo><mo>âˆ—</mo><mtext>åœ°çƒ­ä¸­å¿ƒ</mtext><mo>âˆ—</mo><mo>âˆ—</mo></mrow><annotation encoding="application/x-tex">53äº¿**ï¼Œè‚¯å°¼äºš**Microsoft**åœ°çƒ­ä¸­å¿ƒ **</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">53</span><span class="mord cjk_fallback">äº¿</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">âˆ—</span><span class="mord cjk_fallback">ï¼Œè‚¯å°¼äºš</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord">âˆ—</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord mathnormal">i</span><span class="mord mathnormal">croso</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">âˆ—</span><span class="mord cjk_fallback">åœ°çƒ­ä¸­å¿ƒ</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.4653em;"/><span class="mord">âˆ—</span></span></span></span></span>10äº¿</strong>ã€‚</p>
<p>åœ¨ä¸­å›½ï¼Œâ€œä¸œæ•°è¥¿ç®—â€å·¥ç¨‹åŠ é€Ÿï¼Œæ„å»ºå…¨å›½ä¸€ä½“åŒ–ç®—åŠ›ç½‘ç»œã€‚è¶…èŠ‚ç‚¹å’Œè¶…çº§ç¾¤è®©æ•°ä¸‡å—<strong>GPU</strong>é›†ç¾¤é«˜æ•ˆè¿è½¬ï¼Œç”šè‡³å¤ªç©ºè®¡ç®—æ–¹æ¡ˆå¦‚â€œå¤©ç®—æ˜Ÿåº§â€è®¡åˆ’2027å¹´éƒ¨ç½²ç™¾æ˜Ÿçº§ã€ç™¾<strong>TOPS</strong>çº§è¶…ç®—ã€‚è¿™è‚¡ç®—åŠ›æµªæ½®ï¼Œä¸ä»…æ”¯æ’‘<strong>AI</strong>å•†ç”¨æ¸—é€ï¼Œè¿˜åƒç”µåŠ›ç½‘ä¸€æ ·ï¼Œæˆä¸ºç”Ÿæ´»å¿…éœ€ã€‚</p>
<h4 data-id="heading-2">è¶‹åŠ¿2ï¼šèŠ¯ç‰‡AIåŒ–â€”â€”AIåŸç”Ÿéœ€æ±‚é‡å¡‘èŠ¯ç‰‡åˆ›æ–°ï¼Œå¤§å¸‚åœºå¤§ç”Ÿæ€æ‰“å¼€æ—¶ä»£èŠ¯æœºé‡</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/357fb3c8c5e2437b982896a4e663e338~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020196&amp;x-signature=uongKQsazcgcEjEar8AAlQP0HWk%3D" alt="" loading="lazy"/></p>
<p>èŠ¯ç‰‡ä»â€œé€šç”¨â€å˜â€œ<strong>AI</strong>åŸç”Ÿâ€ï¼Œ<strong>GPU</strong>ä»æ˜¯ç‹è€…ï¼Œä½†ç¨€ç¼ºå’Œé«˜ä»·é€¼å‡ºæ–°ç©æ³•ã€‚<strong>NVIDIA</strong>ç»Ÿæ²»è®­ç»ƒå¸‚åœºï¼Œä½†<strong>CPU</strong>è§’è‰²è½¬å‘è¾…åŠ©<strong>AI</strong>ä»»åŠ¡ï¼Œé›†æˆåŠ é€ŸæŒ‡ä»¤é›†ã€‚ç«¯ä¾§<strong>NPU</strong>ï¼ˆç¥ç»å¤„ç†å•å…ƒï¼‰æˆæ ‡é…ï¼Œæ‰‹æœºã€<strong>PC</strong>ã€ç‰©è”ç½‘è®¾å¤‡ä½åŠŸè€—æ¨ç†å…¨é å®ƒã€‚<strong>ASIC</strong>/<strong>FPGA</strong>å®šåˆ¶èŠ¯ç‰‡ä¹Ÿçˆ†å‘ï¼Œæ»¡è¶³ç‰¹å®šåœºæ™¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/849e549e08e245969367660fc47f6cd6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020196&amp;x-signature=kN9ZGGofgQudJvoV1Gt2nbV%2FI5o%3D" alt="" loading="lazy"/></p>
<p>å…¨çƒ<strong>AI</strong>èŠ¯ç‰‡å¸‚åœº2025å¹´é¢„æµ‹å€¼äº®çœ¼ï¼Œä¸­å›½å¸‚åœºå›½äº§æ›¿ä»£åŠ é€Ÿã€‚å›½äº§æ¨¡å‹+èŠ¯ç‰‡+<strong>SDK</strong>é¦–æ¬¡éªŒè¯åƒäº¿å‚æ•°è®­ç»ƒï¼Œæ‘†è„±<strong>CUDA</strong>ä¾èµ–ã€‚<strong>DeepSeek</strong>ä¼˜åŒ–åä¸º<strong>Ascend</strong>èŠ¯ç‰‡ï¼Œç¡®ä¿é«˜æ•ˆè¿è¡Œã€‚è¿™æ³¢å˜é©ï¼Œè®©èŠ¯ç‰‡åˆ›æ–°ä»â€œè·Ÿè·‘â€åˆ°â€œé¢†è·‘â€ï¼Œå¤§ç”Ÿæ€æ‰“å¼€æ— é™æœºé‡ã€‚</p>
<h2 data-id="heading-3">ç¬¬äºŒéƒ¨åˆ†ï¼šæ¨¡å‹è¿›åŒ–â€”â€”ä»è§„æ¨¡åˆ°æ•ˆç‡çš„å¹³è¡¡èµ›è·‘</h2>
<p>æ¨¡å‹ä¸æ˜¯è¶Šå¤§è¶Šå¥½ï¼Œè€Œæ˜¯èªæ˜æ‰è¡Œã€‚ç®—åŠ›åˆ¶çº¦ä¸‹ï¼Œåˆ›æ–°èšç„¦æ•ˆç‡å’Œå®ç”¨ã€‚</p>
<h4 data-id="heading-4">è¶‹åŠ¿3ï¼šé¢„è®­ç»ƒå†³å®šå¤§æ¨¡å‹æ ¼å±€æ¢¯é˜Ÿï¼Œæ¶æ„åˆ›æ–°å†³å®šé¢„è®­ç»ƒæ°´å¹³</h4>
<p>é¢„è®­ç»ƒæ˜¯<strong>AI</strong>â€œä¸Šè¯¾â€é˜¶æ®µï¼Œå†³å®šè°è¿›æ¢¯é˜Ÿã€‚è¶…è¶Š<strong>Transformer</strong>æ¶æ„æ˜¯å…³é”®ï¼Œçº¿æ€§æ³¨æ„åŠ›å’Œç¨€ç–æ³¨æ„åŠ›é™å¤æ‚åº¦åˆ°<strong>O(n)</strong>ï¼Œé«˜æ•ˆå¤„ç†é•¿ä¸Šä¸‹æ–‡ã€‚<strong>MoE</strong>ï¼ˆæ··åˆä¸“å®¶æ¨¡å‹ï¼‰æˆä¸»æµï¼šâ€œå¤§å‚æ•°ï¼Œå°æ¿€æ´»â€ï¼Œå¦‚æ€»å‚æ•°<strong>1ä¸‡äº¿</strong>çš„<strong>Kimi K2 Thinking</strong>ï¼Œä¸“æ³¨å¤æ‚æ¨ç†ã€‚<br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5784cae410945d4b93a532f6d2432ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020196&amp;x-signature=DEBiJof9DpvaZGCEik2qcc1hHx4%3D" alt="" loading="lazy"/></p>
<p>ä¸­å›½ç©å®¶å¼ºåŠ¿ï¼š<strong>Qwen3</strong>ï¼ˆ<strong>235B</strong>æ€»å‚æ•°ï¼Œ<strong>22B</strong>æ¿€æ´»ï¼Œæ”¯æŒ119ç§è¯­è¨€ï¼‰ã€<strong>ERNIE 5.0</strong>ï¼ˆ<strong>2.4T</strong>å‚æ•°ï¼Œå…¨æ¨¡æ€ï¼‰ã€<strong>DeepSeek-V3</strong>ï¼ˆ<strong>671B</strong>ï¼Œ14.8T tokené¢„è®­ç»ƒï¼‰ã€‚è’¸é¦å°æ¨¡å‹å’Œ<strong>RLHF</strong>ï¼ˆäººç±»åé¦ˆå¼ºåŒ–å­¦ä¹ ï¼‰è®©å¤§æ¨¡å‹â€œç˜¦èº«â€åˆ°è¾¹ç¼˜è®¾å¤‡ï¼Œè¿˜èå…¥äººç±»åå¥½ï¼Œå‡å°‘å¹»è§‰ã€‚</p>
<h4 data-id="heading-5">è¶‹åŠ¿4ï¼šå¤§æ¨¡å‹è½åœ°è¿›å…¥æ¨ç†æ—¶é—´ï¼Œæ¨ç†éœ€æ±‚å€’é€¼æ¨¡å‹åˆ›æ–°</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5145ffdee1e84df4a7227d1a169e5e50~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020196&amp;x-signature=P7jPx0wtP4bJ5HQO%2BNbGTng1wVM%3D" alt="" loading="lazy"/></p>
<p>è®­ç»ƒåæ˜¯â€œå®æˆ˜â€â€”â€”æ¨ç†é˜¶æ®µã€‚2025å¹´ï¼Œå¤šæ¨¡æ€æ·±åº¦æ¨ç†ã€è‡ªé€‚åº”æ¨ç†å’Œå¢é‡å­¦ä¹ æˆç„¦ç‚¹ã€‚<strong>MoE</strong>ä¸“å®¶æ•°é‡æ¿€å¢ï¼ˆå¦‚<strong>Qwen3-Next</strong>ï¼‰ï¼Œ<strong>OCR</strong>ç”¨å°‘é‡tokenè¡¨å¾æ–‡æœ¬ï¼Œéšå¼æ¨ç†è®©æ¨¡å‹â€œå†…éƒ¨æ€è€ƒâ€ã€‚ç¡¬ä»¶å¼‚æ„ååŒå’Œè¾¹ç¼˜åŠ é€Ÿï¼Œç¡®ä¿ä½å»¶è¿Ÿã€‚<strong>Agent</strong>æ—¶ä»£ï¼Œä»»åŠ¡å¤æ‚åº¦é£™å‡ï¼Œæ¨ç†æ¡†æ¶è¿›åŒ–æˆåˆšéœ€ã€‚</p>
<h4 data-id="heading-6">è¶‹åŠ¿5ï¼šä¿¡æ¯AIåº”ç”¨æœŸï¼Œç‰©ç†AIç ”å‘æœŸï¼Œå…·èº«æ™ºèƒ½æˆåˆæµé£å£</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/286bc8a3712a4789b28a44a11e8c1a2e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020196&amp;x-signature=iDxpmBnJLdif0Bd8aLeOdFNFtO4%3D" alt="" loading="lazy"/></p>
<p><strong>AI</strong>åˆ†ä¸¤è·¯ï¼šä¿¡æ¯<strong>AI</strong>å·²è½åœ°ï¼ˆå¦‚èŠå¤©æœºå™¨äººï¼‰ï¼Œç‰©ç†<strong>AI</strong>æ­£ç ”å‘ï¼Œç†è§£é‡åŠ›ã€æ‘©æ“¦ç­‰ç‰©ç†è§„å¾‹ã€‚ä¸–ç•Œæ¨¡å‹æ¨¡æ‹ŸçœŸå®ä¸–ç•Œï¼Œ<strong>VLA</strong>ï¼ˆè§†è§‰-è¯­è¨€-åŠ¨ä½œï¼‰ç»Ÿä¸€æ¡†æ¶è®©æœºå™¨äººâ€œå¬æŒ‡ä»¤åŠ¨èµ·æ¥â€ã€‚å¼€æºå¦‚<strong>OpenVLA</strong>å’Œ<strong>Unitree RL Gym</strong>åŠ é€Ÿå…·èº«æ™ºèƒ½ï¼Œä»å·¥ä¸šåˆ°å®¶åº­ï¼Œäººå½¢æœºå™¨äººè®¢å•åˆç°ã€‚æ•°æ®é›†å¼€æºæ¨åŠ¨äº§å­¦ç ”å…±åˆ›ï¼ŒæŒ‘æˆ˜å¦‚ç»­èˆªå’Œæˆæœ¬æ­£è¢«æ”»å…‹ã€‚</p>
<h2 data-id="heading-7">ç¬¬ä¸‰éƒ¨åˆ†ï¼šåº”ç”¨ç‰ˆå›¾â€”â€”ä»è™šæ‹Ÿåˆ°ç°å®çš„å…¨é¢æ¸—é€</h2>
<p><strong>AI</strong>ä¸å†æ˜¯å·¥å…·ï¼Œè€Œæ˜¯ç”Ÿæ´»æ–¹å¼ã€‚åº”ç”¨ä»æ•°å­—æ‰©å±•åˆ°ç‰©ç†ï¼Œé‡å¡‘æµé‡å’Œç”Ÿäº§åŠ›ã€‚</p>
<h4 data-id="heading-8">è¶‹åŠ¿6ï¼šAIé‡å¡‘æµé‡å…¥å£â€”â€”PCäº’è”ç½‘ã€ç§»åŠ¨äº’è”ç½‘ã€Agenticäº’è”ç½‘</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e553745e2c3e40939c1d31b7ad819fde~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020196&amp;x-signature=dEfiB8yv%2BspyAXTVIRg4XPF3PR0%3D" alt="" loading="lazy"/></p>
<p><strong>Agent</strong>æ˜¯ä¸‹ä¸€ä¸ªèŒƒå¼ï¼Œèƒ½æ„ŸçŸ¥-è§„åˆ’-æ‰§è¡Œé—­ç¯ã€‚æ ¸å¿ƒæ˜¯æ¨ç†èƒ½åŠ›ï¼Œåˆ†è§£å¤æ‚ä»»åŠ¡ã€‚å¼€å‘é—¨æ§›é™äº†ï¼Œ<strong>AI</strong>ç¼–ç ç”Ÿæˆä»£ç ï¼Œæ¡†æ¶å¦‚<strong>LangGraph</strong>ï¼ˆçŠ¶æ€å·¥ä½œæµï¼‰å’Œ<strong>AutoGen</strong>ï¼ˆå¯¹è¯é©±åŠ¨ï¼‰è®©æ„å»º<strong>Agent</strong>å¦‚æ­ç§¯æœ¨ã€‚æµé‡ä»â€œäººæ‰¾æœåŠ¡â€å˜â€œæœåŠ¡æ‰¾äººâ€ï¼Œå¯¹è¯å³å…¥å£ï¼Œæ“ä½œç³»ç»Ÿæˆ–æˆè¶…çº§<strong>Agent</strong>ã€‚2025å¹´ï¼Œä¸“ä¸š<strong>Agent</strong>å°†å–ä»£éƒ¨åˆ†<strong>App</strong>ã€‚</p>
<h4 data-id="heading-9">è¶‹åŠ¿7ï¼šå¤šæ¨¡æ€æˆAIåº”ç”¨è½åœ°å…³é”®â€”â€”è§†é¢‘ã€3Dã€ä»£ç ä¾æ¬¡å±•ç°ç”Ÿäº§åŠ›</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88538de2a33245d6b43ad59905cf4284~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020196&amp;x-signature=76aCa2%2Fuy%2FfKjmThzDfGmwx6zwY%3D" alt="" loading="lazy"/></p>
<p>å¤šæ¨¡æ€èåˆæ–‡æœ¬ã€å›¾åƒã€è§†é¢‘æˆæ ‡é…ã€‚è§†é¢‘ç”Ÿæˆåˆ†é€šç”¨ï¼ˆå¦‚<strong>Sora2</strong>ï¼‰å’Œå‚ç›´ï¼ˆå¦‚å½±è§†é¢„è§ˆï¼‰ï¼Œæå‡åˆ†è¾¨ç‡å’Œé€»è¾‘è¿è´¯ã€‚<strong>3D</strong>ç”Ÿæˆé‡å¡‘å·¥ä½œæµï¼Œä»æ–‡æœ¬åˆ°æ¨¡å‹ä¸€æ¬¡æ€§æå®šï¼ŒåŠ©åŠ›æ¸¸æˆã€å…ƒå®‡å®™ã€‚ä»£ç ç”Ÿæˆè·¨é—¨æ§›ï¼Œ<strong>Vibe Coding</strong>ç”¨è‡ªç„¶è¯­è¨€æè¿°æ„å›¾ï¼Œ<strong>AI</strong>å»ºé¡¹ç›®ã€‚å¤šæ¨¡æ€è®©å¼€å‘è€…ä»çäº‹è§£æ”¾ï¼Œä¸“æ³¨ä»·å€¼åˆ›é€ â€”â€”ä»â€œé™æœ¬â€åˆ°â€œå‡ç»´â€ã€‚</p>
<h4 data-id="heading-10">è¶‹åŠ¿8ï¼šAIç¡¬ä»¶ç™¾ç«¯é½æ”¾â€”â€”PCæ‰‹æœºæ±½è½¦çœ¼é•œç©å…·ï¼Œç„•è„‘æ­£å½“æ—¶</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/811ca3220ce544759dc917601bd8a0c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020196&amp;x-signature=t9SLlbcrdOu0qq3%2Fnjpp9z9Il5w%3D" alt="" loading="lazy"/></p>
<p>ç«¯ä¾§<strong>AI</strong>ç”Ÿæ€çˆ†å‘ã€‚<strong>AI PC</strong>å¯†é›†å‘å¸ƒï¼Œå†…ç½®<strong>NPU</strong>å¤„ç†å™¨å¦‚<strong>Intel</strong>ã€<strong>AMD</strong>ï¼Œæœ¬åœ°è¿è¡Œæ— éœ€äº‘ç«¯ã€‚æ‰‹æœºé›†æˆç…§ç‰‡åˆ†ç±»ã€å®æ—¶ç¿»è¯‘ï¼›å¯ç©¿æˆ´å¦‚<strong>AI</strong>çœ¼é•œå®æ—¶è¯†ç‰©ï¼›ç©å…·å˜æ™ºèƒ½ä¼™ä¼´ï¼Œå¯¹è¯æ•™è‚²ã€‚ä¼˜åŠ¿ï¼Ÿä½å»¶è¿Ÿã€é«˜éšç§ã€‚è½¯ç¡¬ä»¶ååŒï¼Œæ„å»ºâ€œç¬¬äºŒå¤§è„‘â€ã€‚</p>
<h4 data-id="heading-11">è¶‹åŠ¿9ï¼šAI4S çªç ´åŠ é€Ÿ AGI å®ç°â€”â€”AI æ•°ç†åŒ–è§¦åŠåšå£«æ°´å¹³</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b0bdbac16e34cde862ada445efa1226~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020196&amp;x-signature=tCmvjL3Uk2R8MqHKLA%2FGsXaLwkg%3D" alt="" loading="lazy"/></p>
<p><strong>AI for Science</strong>ï¼ˆ<strong>AI4S</strong>ï¼‰é‡å¡‘ç§‘ç ”å…¨æµç¨‹ã€‚åŒ»ç–—å¦‚<strong>GRAPE</strong>æ¨¡å‹è¯†èƒƒç™Œæ•æ„Ÿæ€§<strong>85.1%</strong>ï¼Œ<strong>DeepGEM</strong>é¢„æµ‹è‚ºç™ŒåŸºå› <strong>78%-99%<strong>ç²¾å‡†ã€‚ææ–™ç§‘å­¦å‘ç°é«˜ç†µåˆé‡‘å‚¬åŒ–å‰‚æ€§èƒ½å‡</strong>9.3å€</strong>ï¼Œ<strong>ChemAgents</strong>è‡ªä¸»åˆæˆé‡å­ç‚¹ã€‚<strong>Agentic Science</strong>è®©<strong>AI</strong>æˆâ€œåŒ–å­¦å®¶â€ï¼ŒåŠ é€Ÿ<strong>AGI</strong>ï¼Œè§¦åŠåšå£«çº§æ•°ç†åŒ–èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-12">ç¬¬å››éƒ¨åˆ†ï¼šä¸­å›½æ—¶é—´â€”â€”å¼€æºé¢†è·‘ï¼ŒAGIä¸­å›½è·¯çº¿</h2>
<h4 data-id="heading-13">è¶‹åŠ¿10ï¼šå¼€æºAIè¿›å…¥ä¸­å›½æ—¶é—´â€”â€”AGIæ‹¥æœ‰ä¸­å›½è·¯çº¿</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32c1901873584d3dbd6d79f0eb89fec6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020196&amp;x-signature=uhlwBB5UAclH3WfExlN6eU%2F5hQs%3D" alt="" loading="lazy"/></p>
<p>ä¸­å›½ä»å‚ä¸è€…å˜é¢†å¯¼è€…ã€‚ä¼ä¸šè½¬å‹ç ”å‘ï¼Œ<strong>Huawei</strong>ã€<strong>Alibaba</strong>ç­‰å·¨èµ„èŠ¯ç‰‡å’Œæ¨¡å‹ã€‚<strong>AGI</strong>å‡å›½å®¶æˆ˜ç•¥ï¼Œåˆ°2025å¹´æ€»ç®—åŠ›è¶…<strong>300 EFLOPS</strong>ï¼Œæ™ºèƒ½å æ¯”<strong>35%</strong>ã€‚å¼€æºç”Ÿæ€ç«çƒ­ï¼š<strong>Hugging Face</strong>ä¸‹è½½å‰50ï¼Œ<strong>BAAI</strong>ï¼ˆæ™ºæºï¼‰<strong>7.90äº¿æ¬¡</strong>ã€<strong>Alibaba</strong> <strong>7.49äº¿æ¬¡</strong>é¢†è·‘ã€‚<strong>DeepSeek</strong>è¶…<strong>1äº¿</strong>ç”¨æˆ·ï¼Œ<strong>Qwen</strong>æˆåŸºåº§æ¨¡å‹ã€‚å›½é™…åˆä½œä¸‹ï¼Œä¸­å›½å»º<strong>AI</strong>æ²»ç†æ¢çº½ã€‚</p>
<p>ä»£è¡¨æ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/798f0c054c3d4045a897944d0c75600a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020196&amp;x-signature=lhthtlvnet%2Bw2bnmajklQMT%2BCAg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-14">æœ€å</h2>
<p>å…³æ³¨å…¬ä¼—å·ã€AIä¿¡æ¯é£å‘ã€‘ï¼Œå›å¤ 666ï¼Œå³å¯è·å–æ›´å¤š AI è¡Œä¸šæŠ¥å‘Šã€‚</p>
<p>AI æŠ€æœ¯æ­£ä»¥å‰æ‰€æœªæœ‰çš„é€Ÿåº¦å‘å±•ï¼Œå®ƒå°†å¦‚ä½•å¡‘é€ æˆ‘ä»¬çš„æœªæ¥ï¼Ÿè®©æˆ‘ä»¬æ‹­ç›®ä»¥å¾…ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MCP A2A Skills è¿™ä¸‰ä¸ªè¯ææ‡‚äº† å†å»å†™ä½ çš„æ™ºèƒ½ä½“]]></title>    <link>https://juejin.cn/post/7582131164727689256</link>    <guid>https://juejin.cn/post/7582131164727689256</guid>    <pubDate>2025-12-11T01:22:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582131164727689256" data-draft-id="7582133314685861940" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MCP A2A Skills è¿™ä¸‰ä¸ªè¯ææ‡‚äº† å†å»å†™ä½ çš„æ™ºèƒ½ä½“"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-11T01:22:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è€ç å°å¼ "/> <meta itemprop="url" content="https://juejin.cn/user/976022052799405"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MCP A2A Skills è¿™ä¸‰ä¸ªè¯ææ‡‚äº† å†å»å†™ä½ çš„æ™ºèƒ½ä½“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/976022052799405/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è€ç å°å¼ 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T01:22:40.000Z" title="Thu Dec 11 2025 01:22:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b07d627b0b8471cacaa874c1d9f1179~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ICB56CB5bCP5byg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020959&amp;x-signature=hnkb9o2kp5J5AEDMHPNeQDiH59E%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-0">ä¸€ å…ˆåˆ«æ€¥ç€é€ â€œè‡ªå·±çš„ Agent å¹³å°â€</h3>
<p>è¿™ä¸¤å¹´èº«è¾¹åšå¹³å°çš„æœ‹å‹ï¼ŒåŸºæœ¬éƒ½è¸©è¿‡åŒä¸€ä¸ªå‘ã€‚<br/>
ä¸Šæ¥å°±æƒ³åšä¸€æ•´å¥—â€œä¸‡èƒ½æ™ºèƒ½ä½“å¹³å°â€ï¼šæ²™ç®±ã€å·¥å…·ç®¡ç†ã€å·¥ä½œæµã€çŸ¥è¯†åº“ã€è§‚æµ‹ï¼Œä¸€å£æ°”å…¨åŒ…ã€‚</p>
<p>ç»“æœåŠå¹´è¿‡å»ï¼Œä¸šåŠ¡ä¸€ä¸ªæ²¡è½åœ°ï¼ŒåŸºç¡€è®¾æ–½å…ˆæŠŠè‡ªå·±å·è¶´ä¸‹ã€‚</p>
<p>å†·é™ä¸€ç‚¹çœ‹ï¼Œç°åœ¨è¡Œä¸šè¶‹åŠ¿å·²ç»å¾ˆæ¸…æ¥šäº†ï¼š</p>
<ul>
<li>å·¥å…·æ¥å…¥è¿™å—ï¼Œæœ‰äº† MCP åœ¨å¿«é€Ÿç»Ÿä¸€ï¼Œä¸»æµå‚å•†éƒ½åœ¨å¾€è¿™ä¸ªæ ‡å‡†é ã€‚</li>
<li>æ™ºèƒ½ä½“äº’è”è¿™å—ï¼Œå¤§å®¶åœ¨å›´ç»• A2A æŠŠå®ƒå½“â€œAgent ç‰ˆ HTTPâ€æ¥å»ºè®¾ã€‚</li>
<li>èƒ½åŠ›å»ºæ¨¡è¿™å—ï¼Œå¤§æ¨¡å‹å‚åœ¨æ¨è‡ªå·±çš„ Skills æ¨¡å‹ï¼ŒæŠŠâ€œæŠ€èƒ½â€åšæˆå¯é…ç½®ã€å¯ç»„åˆã€å¯ä¸‹å‘çš„èƒ½åŠ›åŒ…ï¼Œè€Œä¸æ˜¯æ•£ä¹±çš„æ’ä»¶ã€‚</li>
</ul>
<p>æ‰€ä»¥ï¼Œå¦‚æœä½ è¿˜åœ¨çº ç»“â€œè¦ä¸è¦è‡ªç ”ä¸ªå¤§è€Œå…¨çš„ Agent å¹³å°â€ï¼Œå¾ˆå¤§æ¦‚ç‡æ˜¯åœ¨å’Œäº§ä¸šæ–¹å‘ç¡¬åˆšã€‚<br/>
æ›´ç°å®çš„åšæ³•ï¼Œåè€Œæ˜¯ï¼šæ‰¿è®¤å¤–é¢å·²ç»æœ‰æ ‡å‡†ï¼ŒæŠŠè‡ªå·±æ”¶ç¼©æˆâ€”â€”<strong>æ¥ MCPã€æ¥ A2Aã€ç®¡ç† Skills çš„é‚£å±‚â€œé…ç½®å’Œåœºæ™¯ä¸­å°â€</strong>ã€‚</p>
<p>è¿™æ˜¯èƒŒæ™¯ã€‚ä¸‹é¢æ‹†å¼€è®²ã€‚</p>
<hr/>
<h3 data-id="heading-1">äºŒ MCPï¼šåˆ«å†ä¸€å¥—å¥—å†™ SDK äº† ï¼Œè¿™ä¹ˆå¹²å¤ªç´¯</h3>
<p>å¦‚æœä½ è¿™ä¸¤å¹´å†™è¿‡â€œç»™å¤§æ¨¡å‹æ¥å·¥å…·â€çš„ä»£ç ï¼Œå¤§æ¦‚ç»å†è¿‡è¿™å‡ æ­¥ï¼š<br/>
HTTP API ä¸€å¥—ï¼›Shell å‘½ä»¤ä¸€å¥—ï¼›å…¬å¸å†…éƒ¨ RPC å†ä¸€å¥—ã€‚<br/>
æ¯æ¢ä¸€ä¸ªæ¨¡å‹å‚å•†ï¼Œå†é…ä¸€éâ€œå·¥å…·å®šä¹‰æ ¼å¼â€å’Œâ€œç»“æœè§£æé€»è¾‘â€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4aacbb12f36c44148d953824bf4d6051~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ICB56CB5bCP5byg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020959&amp;x-signature=7k9jSjvbv8njQ%2FpifRi3QLGrBxg%3D" alt="" loading="lazy"/></p>
<p>MCP å‡ºæ¥çš„ç›®çš„å°±å¾ˆç›´æ¥ï¼š</p>
<ul>
<li>æŠŠâ€œæ¨¡å‹ â†” å¤–éƒ¨ä¸–ç•Œâ€è¿™æ¡é“¾è·¯æŠ½è±¡æˆç»Ÿä¸€åè®®ï¼Œæ¨¡å‹å«çš„æ˜¯ MCP å®¢æˆ·ç«¯ï¼Œå¤–éƒ¨ç³»ç»Ÿæ˜¯ MCP æœåŠ¡å™¨ï¼Œä¸­é—´èµ°ä¸€å¥—æ ‡å‡†åŒ–æ¶ˆæ¯å’Œç”Ÿå‘½å‘¨æœŸã€‚</li>
<li>ä½ å†™ä¸€ä¸ª MCP serverï¼ŒæŠŠä½ å®¶çš„æ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿã€ä¸šåŠ¡ API æš´éœ²æˆå·¥å…·ï¼›ä»»ä½•æ”¯æŒ MCP çš„å®¢æˆ·ç«¯ï¼ˆæ¡Œé¢åŠ©æ‰‹ã€åœ¨çº¿ IDEã€å†…éƒ¨ Agent SDKï¼‰éƒ½èƒ½æ— æ„Ÿæ¥å…¥ã€‚</li>
</ul>
<p>è¿‘ä¸€å¹´çš„å‡ ä¸ªå˜åŒ–ï¼Œå…¶å®æŒºå…³é”®ï¼š</p>
<ul>
<li>è§„èŒƒæŠŠå®‰å…¨å½“æˆä¸€ç­‰å…¬æ°‘ï¼Œé»˜è®¤ MCP server æ˜¯æ•æ„Ÿèµ„æºï¼Œå¿…é¡»é…å¥½é‰´æƒã€ä½œç”¨åŸŸï¼Œé¿å…è¢«æ¶æ„ server è¶æœºæ‹¿èµ°æ›´å¤šæƒé™ã€‚</li>
<li>ä¸»æµå‚å•†é™†ç»­ç«™é˜Ÿï¼šå¤§æ¨¡å‹æœåŠ¡ã€æ“ä½œç³»ç»Ÿã€æµè§ˆå™¨æ’ä»¶éƒ½åœ¨åŸç”Ÿæ”¯æŒ MCPï¼Œè®©â€œæ¥ä¸€æ¬¡ã€åˆ°å¤„ç”¨â€å˜å¾—ç°å®ã€‚</li>
</ul>
<p>è¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿ<br/>
æ„å‘³ç€ä½ å®Œå…¨å¯ä»¥è¿™ä¹ˆå¹²ï¼š</p>
<ul>
<li>å…¬å¸å†…éƒ¨åªç»´æŠ¤ä¸€å°æ’® MCP Serverï¼šæ¯”å¦‚â€œæ–‡æ¡£ä¸­å¿ƒ serverâ€â€œç›‘æ§ serverâ€â€œå·¥å• serverâ€ã€‚</li>
<li>ä¸ç®¡ä½ ç”¨å“ªå®¶æ¨¡å‹ã€å“ªä¸ª Agent æ¡†æ¶ï¼Œåªè¦ä¼šè®² MCPï¼Œå°±éƒ½èƒ½å¤ç”¨è¿™å‡ ä¸ª serverï¼Œä¸ç”¨é‡å†™å·¥å…·å±‚ã€‚</li>
</ul>
<p>ä»å·¥ç¨‹è§’åº¦çœ‹ï¼ŒMCP æŠŠä»¥å‰é›¶æ•£çš„ SDKï¼Œæ”¶æ•›æˆä¸€ä¸ª**â€œå·¥å…·æ€»çº¿â€**ã€‚<br/>
ä½ ä¸ç”¨ç»™æ¯ä¸ªæ¨¡å‹ã€æ¯ä¸ªäº§å“çº¿éƒ½é€ ä¸€å †é‡å¤å·¥å…·ï¼Œåªè¦æŠŠâ€œæ€»çº¿â€æ¥å¥½ã€‚</p>
<hr/>
<h3 data-id="heading-2">ä¸‰ Skillsï¼šåˆ«å†æŠŠâ€œå·¥å…·â€å’Œâ€œèƒ½åŠ›â€æ··åœ¨ä¸€èµ·  ï¼Œè®²çœŸè¿™ä¹ˆåšå¤ªå¤æ‚äº†</h3>
<p>å¾ˆå¤šå›¢é˜Ÿç°åœ¨çš„ Agent è®¾è®¡ï¼Œæœ‰ä¸ªå¾ˆæ˜æ˜¾çš„é—®é¢˜ï¼š<br/>
æ‰€æœ‰èƒ½åŠ›éƒ½è¢«å¡æˆâ€œä¸€ä¸ªä¸ª toolâ€ã€‚</p>
<p>ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>æ¨¡å‹ä¼šäº†ä¸€å †ä½å±‚ APIï¼Œå´æ²¡æœ‰â€œæ€ä¹ˆç”¨è¿™äº› API è§£ä¸€ä¸ªä¸šåŠ¡é—®é¢˜â€çš„å¥—è·¯ã€‚</li>
<li>æç¤ºè¯è¶Šå†™è¶Šé•¿ï¼Œç³»ç»Ÿ prompt å˜æˆåƒåœ¾åœºï¼Œæ—¢è®²â€œè§’è‰²â€ï¼Œåˆè®²â€œç­–ç•¥â€ï¼Œè¿˜é¡ºå¸¦è´´ä¸€å †æ¥å£æ–‡æ¡£ã€‚</li>
</ul>
<p>æœ€è¿‘ï¼Œå„å®¶åœ¨å¾€ä¸€ä¸ªæ–¹å‘æ”¶æ•›ï¼š<br/>
æŠŠâ€œå·¥å…·â€å’Œâ€œæŠ€èƒ½â€æ‹†å¼€ã€‚</p>
<ul>
<li>å·¥å…·æ›´åƒâ€œæ‰‹â€ï¼šèƒ½è¯»å†™æ•°æ®åº“ã€è°ƒ HTTPã€è·‘è„šæœ¬ï¼Œæ˜¯å…·ä½“åŠ¨ä½œã€‚</li>
<li>æŠ€èƒ½æ›´åƒâ€œè„‘å­é‡Œçš„ä¸€å¥—æ‰“æ³•â€ï¼šæ¯”å¦‚â€œå®¡é˜…åˆåŒâ€â€œæ’æŸ¥çº¿ä¸Šäº‹æ•…â€â€œåšä¸€ä¸ªå‘å¸ƒè®¡åˆ’â€ï¼Œå¼ºè°ƒçš„æ˜¯æµç¨‹ã€åˆ¤æ–­æ ‡å‡†ã€é£é™©è¾¹ç•Œã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/55b8af55758f48e98db6cfeff8e2189c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ICB56CB5bCP5byg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020959&amp;x-signature=nV%2Fy9IFFuu3naCA%2BzWnCQzFN0SM%3D" alt="å½“ç„¶ä¸ä»…ä»…æ˜¯ Claudeï¼Œå¾ˆå¤šå‚å•†ä¹Ÿé™†ç»­è·Ÿè¿›" loading="lazy"/></p>
<p>æœ‰çš„å‚å•†å·²ç»æŠŠè¿™ä¸€å¥—äº§å“åŒ–æˆ Agent Skillsï¼š</p>
<ul>
<li>æ¯ä¸ª Skill æ˜¯ä¸€ä¸ªå¯å¤ç”¨çš„èƒ½åŠ›åŒ…ï¼Œé‡Œé¢æœ‰ï¼šç»†ç²’åº¦æŒ‡ä»¤ã€å…ƒæ•°æ®ã€å¯é€‰çš„è„šæœ¬æˆ–èµ„æºã€èƒ½åŠ›è¾¹ç•Œè¯´æ˜ã€‚</li>
<li>ä¸€ä¸ª Agent å¯ä»¥ç»‘å®šå¤šç§ Skillï¼Œå†æŒ‰åœºæ™¯æ¿€æ´»ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½ä»é›¶å¼€è„‘æ´ã€‚</li>
</ul>
<p>å¯¹è¦åšâ€œæ•°å­—åˆ†èº«â€æˆ–è€…å†…éƒ¨åŠ©æ‰‹çš„å›¢é˜Ÿæ¥è¯´ï¼Œè¿™ä¸ªç†å¿µå¾ˆå…³é”®ï¼š<br/>
ä½ è¦ç®¡ç†çš„ï¼Œåº”è¯¥æ˜¯â€œæŸä¸ªåˆ†èº«æœ‰å“ªå‡ ç§æŠ€èƒ½â€ï¼Œè€Œä¸æ˜¯â€œæš´éœ²äº†å¤šå°‘ä¸ª toolâ€ã€‚</p>
<p>è½åˆ°å®ç°ä¸Šï¼Œå¯ä»¥è¿™ä¹ˆæ‹†ï¼š</p>
<ul>
<li>æŠŠâ€œæ’æŸ¥çº¿ä¸Šå‘Šè­¦â€å†™æˆä¸€ä¸ª Skillï¼š
<ul>
<li>è¾“å…¥æ˜¯ä»€ä¹ˆï¼ˆå‘Šè­¦ IDã€æ—¶é—´èŒƒå›´ï¼‰ã€‚</li>
<li>Agent åº”è¯¥èµ°å“ªå‡ æ­¥ï¼ˆæŸ¥ç›‘æ§ã€æŸ¥æœ€è¿‘å˜æ›´ã€æŸ¥å·¥å•ã€è¾“å‡ºæ¨ç†é“¾ï¼‰ã€‚</li>
<li>å“ªäº›å·¥å…·å¯ç”¨ï¼Œå“ªäº›åŠ¨ä½œå¿…é¡»äºŒæ¬¡ç¡®è®¤ã€‚</li>
</ul>
</li>
<li>æŠŠâ€œå†™å‘¨æŠ¥â€å†™æˆå¦ä¸€ä¸ª Skillï¼š
<ul>
<li>å…è®¸è®¿é—®å“ªäº›æ—¥å¿—ã€å“ªäº›é¡¹ç›®æ•°æ®ã€‚</li>
<li>è¾“å‡ºç»“æ„ã€è¯­æ°”æœ‰ä»€ä¹ˆçº¦æŸã€‚</li>
</ul>
</li>
</ul>
<p>å½“ä½ æœ‰äº†å‡ åä¸ª Skillï¼Œå†å¾€ä¸Šåšâ€œæ•°å­—åˆ†èº«é…ç½®ä¸­å¿ƒâ€ï¼š<br/>
å‹¾é€‰ä¸€ä¸‹â€œè¿™ä¸ªåˆ†èº«å…·å¤‡ Aã€Bã€C ä¸‰ç§æŠ€èƒ½â€ï¼Œå°±è¿œæ¯”è£¸é…ä¸€å † tool æ¥å¾—ç¨³ã€‚</p>
<hr/>
<h3 data-id="heading-3">å›› A2Aï¼šå½“ Agent ä¸å†å­¤ç«‹</h3>
<p>å¦‚æœè¯´ MCP ç®¡çš„æ˜¯â€œAgent æ€ä¹ˆä¼¸æ‰‹ç¢°ä¸–ç•Œâ€ï¼Œé‚£ A2A ç®¡çš„å°±æ˜¯â€œAgent æ€ä¹ˆäº’ç›¸è¯´è¯â€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05657679cd424cad9db7f2f9b08b63b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ICB56CB5bCP5byg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020959&amp;x-signature=Nxg0WM%2BB4Oma97cKjgKWTuADSOA%3D" alt="" loading="lazy"/></p>
<p>ä»¥å‰åšå¤šæ™ºèƒ½ä½“ï¼Œå¤§éƒ¨åˆ†äººéƒ½æ˜¯åœ¨è‡ªå·±ç³»ç»Ÿé‡Œç¡¬å†™ï¼š</p>
<ul>
<li>ä¸€ä¸ªå¤§ orchestratorï¼Œé‡Œé¢ if-else åˆ‡æ¢ä¸åŒå­ Agentã€‚</li>
<li>è¿›åº¦ã€çŠ¶æ€ã€ä¸Šä¸‹æ–‡é è‡ªå®šä¹‰ç»“æ„ä½“åœ¨å†…éƒ¨ä¼ ã€‚</li>
</ul>
<p>è¿™ç§å†™æ³•æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>ä½ çš„ Agent åªèƒ½æ´»åœ¨è‡ªå·±ç³»ç»Ÿé‡Œï¼Œæ²¡æ³•å’Œåˆ«äººçš„ Agent åä½œã€‚</li>
<li>åŒä¸€å®¶å…¬å¸ä¸åŒå›¢é˜Ÿå†™çš„ Agentï¼Œæ ¹æœ¬äº’ä¸è®¤è¯†ï¼Œå„ç©å„çš„ã€‚</li>
</ul>
<p>A2A çš„ç›®æ ‡å°±ä¸€å¥è¯ï¼š<br/>
<strong>ç»™ Agent ä¹‹é—´çš„é€šä¿¡ï¼Œè¡¥ä¸€ä¸ªâ€œHTTP çº§åˆ«â€çš„é€šç”¨åè®®ã€‚</strong></p>
<p>å¤§æ¦‚é•¿è¿™æ ·ï¼š</p>
<ul>
<li>ä¼ è¾“å±‚èµ°æ ‡å‡†çš„ JSON-RPC over HTTPï¼Œæ¶ˆæ¯æ ¼å¼ã€é”™è¯¯å¤„ç†éƒ½è¢«å†™æ­»ï¼Œå‡å°‘å„å®¶è‡ªåˆ›æ–¹è¨€ã€‚</li>
<li>æ¯ä¸ª Agent ç”¨ä¸€å¼ â€œAgent Cardâ€æè¿°è‡ªå·±ï¼šèƒ½åšä»€ä¹ˆã€æä¾›å“ªäº›æ–¹æ³•ã€éœ€è¦ä»€ä¹ˆé‰´æƒï¼Œç”±æ­¤å®ç°è‡ªåŠ¨å‘ç°å’Œèƒ½åŠ›å®£å‘Šã€‚</li>
<li>æ”¯æŒåŒæ­¥ã€æµå¼ã€å¼‚æ­¥æ¨é€ï¼Œé€‚åˆé•¿ä»»åŠ¡ã€ååŒä»»åŠ¡ï¼Œäººå¯ä»¥éšæ—¶æ’è¿›æ¥å½“â€œç¯èŠ‚é‡Œçš„ä¸€ä¸ªå‚ä¸è€…â€ã€‚</li>
<li>å®‰å…¨ä¸Šï¼Œæ²¿ç”¨æˆç†Ÿçš„ OAuth2ã€Tokenã€ç½‘å…³ä½“ç³»ï¼Œä¼ä¸šä¾§æ›´å¥½æ¥è¿›ç°æœ‰å®¡è®¡å’Œé£æ§ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/706c86370af34ba9a71961e223db94ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ICB56CB5bCP5byg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020959&amp;x-signature=XOGizAD1JCnjUIl3gp4mpvqNlWE%3D" alt="A2A å’Œ MCP æ˜¯äº’è¡¥ï¼Œä¸æ˜¯æ›¿ä»£" loading="lazy"/></p>
<p>ä½ å¯ä»¥æƒ³è±¡ä¸€ä¸‹å…¬å¸çš„æœªæ¥å½¢æ€ï¼š</p>
<ul>
<li>è´¢åŠ¡æœ‰ä¸€å¥—æŠ¥é”€ Agentï¼Œè¿ç»´æœ‰ä¸€å¥—æ’éšœ Agentï¼ŒHR æœ‰ä¸€å¥—æ‹›è˜ Agentã€‚</li>
<li>æŸä¸ªâ€œæ•°å­—åˆ†èº«â€æ¥åˆ°ä»»åŠ¡æ—¶ï¼Œå¹¶ä¸éœ€è¦è‡ªå·±ä»€ä¹ˆéƒ½æ‡‚ï¼Œè€Œæ˜¯é€šè¿‡ A2A å»é—®åˆ«çš„ Agentï¼šæ¯”å¦‚è®©â€œæŠ¥é”€ Agentâ€å»ç®—é¢„ç®—ï¼Œè®©â€œæ’éšœ Agentâ€å»æŸ¥æœåŠ¡ã€‚</li>
</ul>
<p>ä»æ­¤ï¼Œæ™ºèƒ½ä½“ä¸å†æ˜¯ä¸€ä¸ªä¸ªå­¤å²›ï¼Œè€Œæ˜¯ä¸€ä¸ª<strong>æ¾è€¦åˆçš„æœåŠ¡ç½‘</strong>ã€‚<br/>
è€Œ A2A å°±æ˜¯è¿™ä¸ªç½‘çš„â€œé€šç”¨è¯­â€ã€‚</p>
<hr/>
<h3 data-id="heading-4">äº” çœŸæ­£è½åœ°æ—¶ï¼Œå¯ä»¥æ€ä¹ˆé€‰å‹</h3>
<p>è¯´è¿™ä¹ˆå¤šï¼Œè½æˆä»£ç å…¶å®å¯ä»¥å¾ˆå…‹åˆ¶ã€‚<br/>
ç»™ä½ ä¸€ä¸ªæ¯”è¾ƒç°å®ã€é€‚åˆä¸­å‹å›¢é˜Ÿçš„è·¯çº¿ï¼š</p>
<ol>
<li>
<p><strong>å…ˆæŠŠâ€œå·¥å…·æ€»çº¿â€ç«™èµ·æ¥ï¼šé€‰ MCPï¼Œä¸è¦è‡ªé€ åè®®ã€‚</strong></p>
<ul>
<li>æŠŠæœ€å¸¸ç”¨çš„ä¸‰ä¸ªç³»ç»Ÿæ¥æˆ MCP Serverï¼šçŸ¥è¯†åº“ã€ç›‘æ§ã€å·¥å•ã€‚</li>
<li>å†…éƒ¨ä»»ä½• Agentã€åŠ©æ‰‹ã€æ’ä»¶ï¼Œä¸ç®¡å“ªä¸ªæ¨¡å‹ï¼Œéƒ½ç»Ÿä¸€èµ° MCP è®¿é—®è¿™äº›èµ„æºã€‚</li>
</ul>
</li>
<li>
<p><strong>åœ¨ä½ ä»¬ç°æœ‰çš„ Agent / æ•°å­—åˆ†èº«å¹³å°é‡Œï¼Œå¼•å…¥ Skills æ¦‚å¿µã€‚</strong></p>
<ul>
<li>æŠŠç°åœ¨å†™åœ¨ prompt é‡Œçš„â€œå¥—è·¯â€æŠ½å‡ºæ¥ï¼Œåšæˆå¯é…ç½®çš„æŠ€èƒ½ï¼šæœ‰åå­—ã€æœ‰ç”¨é€”ã€æœ‰è¾“å…¥è¾“å‡ºçº¦æŸã€‚</li>
<li>ç»™æ¯ä¸ªä¸šåŠ¡åœºæ™¯å®šä¹‰ä¸€ä¸ªâ€œåˆ†èº«é…ç½®â€ï¼šç»‘å®šæ¨¡å‹ã€ç»‘å®šæŠ€èƒ½ã€ç»‘å®šå¯ç”¨å·¥å…·ï¼ˆé€šè¿‡ MCPï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç­‰åˆ°ä¸šåŠ¡çº¿é‡ŒçœŸçš„å‡ºç°â€œå¤šæ™ºèƒ½ä½“åä½œâ€éœ€æ±‚ï¼Œå†ä¸Š A2Aã€‚</strong></p>
<ul>
<li>å…ˆæŒ‘ä¸€ä»¶äº‹ï¼Œæ¯”å¦‚â€œä»ç›‘æ§åˆ°å·¥å•å†åˆ°é€šçŸ¥â€ï¼Œæ‹†æˆä¸‰ä¸ª Agentï¼Œç”¨ A2A æ¥èµ·æ¥ï¼Œè€Œä¸æ˜¯åœ¨ä¸€ä¸ªæœåŠ¡é‡Œå†™æ­»æ•´ä¸ªæµç¨‹ã€‚</li>
<li>æŠŠæ¯ä¸ª Agent çš„èƒ½åŠ›å†™æ¸…æ¥šï¼Œç”¨ Agent Card å¯¹å¤–æš´éœ²ï¼Œè¿™ä¸€æ­¥åšå¾—å¥½ï¼Œå°†æ¥ä¸åŒå›¢é˜Ÿã€ä¸åŒè¯­è¨€å†™çš„ Agent ä¹Ÿèƒ½äº’é€šã€‚</li>
</ul>
</li>
<li>
<p><strong>æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œå…‹åˆ¶ä½â€œåšå¹³å°â€çš„å†²åŠ¨ã€‚</strong></p>
<ul>
<li>ä½ æ›´åƒæ˜¯åœ¨æ­ä¸€ä¸ªâ€œAgent é…ç½®ä¸æ²»ç†å±‚â€ï¼š
<ul>
<li>ç®¡ MCP server çš„æ¥å…¥å’Œæƒé™ã€‚</li>
<li>ç®¡ Skills çš„ç‰ˆæœ¬ã€ç°åº¦å’Œç»„åˆã€‚</li>
<li>ç®¡å“ªäº› Agent å¯¹å¤–æš´éœ² A2A èƒ½åŠ›ã€‚</li>
</ul>
</li>
<li>è¿è¡Œæ—¶ã€æ²™ç®±ã€å¤šæ¨¡å‹è·¯ç”±è¿™äº›ï¼Œèƒ½ç”¨äº‘å‚å•†æˆ–ç°æˆæ¡†æ¶å°±ç”¨ï¼Œä¸è¦è½»æ˜“ All in è‡ªç ”ã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-5">å…­ å†™åœ¨æœ€å</h3>
<p>MCPã€Skillsã€A2A å¬èµ·æ¥éƒ½æŒºå”¬äººçš„ï¼Œå®é™…ä¸Šåšçš„äº‹å¾ˆæœ´ç´ ï¼š</p>
<ul>
<li>MCP è®©ä½ å°‘å†™å‡ å¥—â€œæ¥å·¥å…·çš„èƒ¶æ°´ä»£ç â€ã€‚</li>
<li>Skills è®©ä½ æŠŠâ€œä¼šåšäº‹â€è¿™ä»¶äº‹æ¨¡å—åŒ–ï¼Œåˆ«æŠŠå…¨éƒ¨ä¸šåŠ¡é€»è¾‘å¡è¿›ä¸€æ¡ promptã€‚</li>
<li>A2A è®©ä¸åŒ Agent ä¹‹é—´æœ‰è¯å¯èŠï¼Œä¸è‡³äºæ¯ä¸ªå›¢é˜Ÿéƒ½é‡æ–°å‘æ˜ä¸€éâ€œå†…éƒ¨è°ƒç”¨åè®®â€ã€‚</li>
</ul>
<p>ä½ çœŸæ­£åœ¨é¡¹ç›®é‡Œè¦åšçš„ï¼Œæ˜¯ç”¨è¿™ä¸‰ä¸ªæ–¹å‘ï¼Œå¸®è‡ªå·±æŠŠè¾¹ç•Œåˆ’æ¸…æ¥šï¼š<br/>
å“ªäº›æ˜¯è¦äº¤ç»™è¡Œä¸šæ ‡å‡†å’Œå‚å•†ç”Ÿæ€å»æ‰›çš„ï¼Œ<br/>
å“ªäº›æ˜¯ä½ ä»¬å›¢é˜Ÿå¿…é¡»åƒé€ã€æ²‰æ·€æˆè‡ªå·±çš„â€œèƒ½åŠ›èµ„äº§â€çš„ã€‚</p>
<p>ææ¸…æ¥šè¿™ä¸€ç‚¹ä¹‹åï¼Œå†å›å¤´çœ‹å¸‚é¢ä¸Šä¸€å †â€œæŸæŸ Agent å¹³å°â€â€œæŸæŸæ™ºèƒ½ä½“æ¡†æ¶â€ï¼Œå¿ƒæ€ä¼šå¹³ç¨³å¾ˆå¤šã€‚<br/>
ä½ ä¼šå‘ç°ï¼Œèƒ½å†³å®šä½ èµ°å¤šè¿œçš„ï¼Œä»æ¥ä¸æ˜¯ä½ é€‰äº†å“ªä¸ªæ¡†æ¶ï¼Œè€Œæ˜¯ä½ æœ‰æ²¡æœ‰è®¤çœŸå›ç­”ä¸€ä¸ªé—®é¢˜ï¼š</p>
<p>â€”â€”åœ¨è¿™ä¸ªæ–°ä¸€è½®åŸºç¡€è®¾æ–½æ´—ç‰Œé‡Œï¼Œä½ æ˜¯è¦å½“â€œé€ è½®å­çš„äººâ€ï¼Œè¿˜æ˜¯é‚£ä¸ªçœŸæ­£æŠŠè½®å­è£…åˆ°è½¦ä¸Šçš„äººã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å—äº¬ç†å·¥å¤§å­¦è”æ‰‹ç™¾åº¦ã€å•†æ±¤ç§‘æŠ€ç­‰å›¢é˜Ÿæ¨å‡ºArtemisï¼šç”¨ç»“æ„åŒ–è§†è§‰æ¨ç†é©æ–°å¤šæ¨¡æ€æ„ŸçŸ¥]]></title>    <link>https://juejin.cn/post/7582096212662730752</link>    <guid>https://juejin.cn/post/7582096212662730752</guid>    <pubDate>2025-12-11T01:37:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582096212662730752" data-draft-id="7582114266075070479" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å—äº¬ç†å·¥å¤§å­¦è”æ‰‹ç™¾åº¦ã€å•†æ±¤ç§‘æŠ€ç­‰å›¢é˜Ÿæ¨å‡ºArtemisï¼šç”¨ç»“æ„åŒ–è§†è§‰æ¨ç†é©æ–°å¤šæ¨¡æ€æ„ŸçŸ¥"/> <meta itemprop="keywords" content="ç®—æ³•,è®¡ç®—æœºè§†è§‰,æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2025-12-11T01:37:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CoovallyAIHub"/> <meta itemprop="url" content="https://juejin.cn/user/2461151071843739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å—äº¬ç†å·¥å¤§å­¦è”æ‰‹ç™¾åº¦ã€å•†æ±¤ç§‘æŠ€ç­‰å›¢é˜Ÿæ¨å‡ºArtemisï¼šç”¨ç»“æ„åŒ–è§†è§‰æ¨ç†é©æ–°å¤šæ¨¡æ€æ„ŸçŸ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2461151071843739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CoovallyAIHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T01:37:27.000Z" title="Thu Dec 11 2025 01:37:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿‘å¹´æ¥ï¼Œå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰åœ¨æ¨ç†èƒ½åŠ›ä¸Šçªé£çŒ›è¿›ï¼Œç‰¹åˆ«æ˜¯é€šè¿‡å¼ºåŒ–å­¦ä¹ ï¼ˆRLï¼‰æ¿€å‘çš„â€œæ€ç»´é“¾â€ï¼ˆChain of Thoughtï¼‰æŠ€æœ¯ï¼Œä½¿æ¨¡å‹èƒ½å¤Ÿè¿›è¡Œå¤šæ­¥æ¨ç†ä»¥è§£å†³å¤æ‚é—®é¢˜ã€‚å—æ­¤å¯å‘ï¼Œç ”ç©¶äººå‘˜å°è¯•å°†è¿™ç§è¯­è¨€æ¨ç†èŒƒå¼å¼•å…¥å¤šæ¨¡æ€å¤§æ¨¡å‹ï¼ˆMLLMï¼‰çš„è§†è§‰æ„ŸçŸ¥ä»»åŠ¡ä¸­ã€‚ç„¶è€Œï¼Œå®è¯ç ”ç©¶è¡¨æ˜ï¼Œç®€å•çš„è¯­è¨€ä¸­é—´æ¨ç†å¾€å¾€ä¼šå¯¼è‡´æ„ŸçŸ¥æ€§èƒ½ä¸‹é™ï¼Œç”šè‡³äº§ç”Ÿä¸å›¾åƒå†…å®¹æ— å…³çš„â€œå¹»è§‰â€ã€‚</p>
<p>ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§ç°è±¡ï¼Ÿæ¥è‡ªå—äº¬ç†å·¥å¤§å­¦ã€æ–°åŠ å¡ç§‘æŠ€è®¾è®¡å¤§å­¦ã€é˜¿å¾·è±å¾·å¤§å­¦ã€ç™¾åº¦ã€Data61-CSIROä»¥åŠå•†æ±¤ç§‘æŠ€çš„ç ”ç©¶å›¢é˜Ÿåœ¨æœ€æ–°è®ºæ–‡ã€ŠArtemis: Structured Visual Reasoning for Perception Policy Learningã€‹ä¸­ç»™å‡ºäº†æ·±åˆ»çš„è§è§£ã€‚<strong>æ ¸å¿ƒé—®é¢˜ä¸åœ¨äºâ€œæ¨ç†â€æœ¬èº«ï¼Œè€Œåœ¨äºâ€œæ¨ç†çš„å½¢å¼â€ã€‚è§†è§‰æ„ŸçŸ¥çš„æœ¬è´¨è¦æ±‚åœ¨ç©ºé—´å’Œä»¥å¯¹è±¡ä¸ºä¸­å¿ƒï¼ˆObject-Centricï¼‰çš„ç»“æ„åŒ–ç¯å¢ƒä¸­è¿›è¡Œæ¨ç†ï¼Œè€Œä¸åœ¨éç»“æ„åŒ–çš„è¯­è¨€ç©ºé—´ä¸­è¿›è¡Œâ€œç©ºè°ˆâ€ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93b3b9cf9ffb4e9aa872f0e897ad317c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021847&amp;x-signature=9yJGaHgS3hgWH0Cj0fnsWMennAw%3D" alt="å›¾ç‰‡1.png" loading="lazy"/></p>
<blockquote>
<p><strong>è®ºæ–‡æ ‡é¢˜ï¼šArtemis: Structured Visual Reasoning for Perception Policy Learning</strong></p>
<p><strong>è®ºæ–‡é“¾æ¥ï¼š</strong></p>
<p><strong>ä»£ç ä»“åº“ï¼š</strong> ****</p>
</blockquote>
<h2 data-id="heading-0"><strong>é—®é¢˜æ´å¯Ÿï¼šè¯­è¨€æ¨ç†çš„å±€é™ä¸ç»“æ„åŒ–è§†è§‰æ¨ç†çš„å¿…ç„¶</strong></h2>
<p>å½“ç°æœ‰MLLMé¢å¯¹å¦‚â€œæ‰¾å‡ºæœ€çŸ®çš„è¿åŠ¨å‘˜â€è¿™ç±»æŒ‡ä»¤æ—¶ï¼Œå®ƒä»¬å¾€å¾€ä¾èµ–ç±»ä¼¼è¯­è¨€æ¨¡å‹çš„â€œå†…éƒ¨ç‹¬ç™½â€è¿›è¡Œæ¨ç†ã€‚è¿™ç§çº¯è¯­ä¹‰çš„æ¨ç†è¿‡ç¨‹ç¼ºä¹è§†è§‰åŸºç¡€ï¼Œå®¹æ˜“äº§ç”Ÿæ— å…³æˆ–é”™è¯¯çš„ä¸­é—´æè¿°ï¼Œæœ€ç»ˆå¯¼è‡´å®šä½å¤±è´¥ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œäººç±»çš„æ„ŸçŸ¥è¿‡ç¨‹æ˜¯å…¸å‹çš„ç»“æ„åŒ–è§†è§‰æ¨ç†ï¼šæˆ‘ä»¬é¦–å…ˆå¿«é€Ÿæ‰«ææ•´ä¸ªåœºæ™¯ï¼Œå®šä½å¯èƒ½ç›¸å…³çš„åŒºåŸŸï¼Œç„¶åé€æ­¥èšç„¦ã€æ¯”è¾ƒï¼Œæœ€ç»ˆé”å®šç›®æ ‡å¯¹è±¡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5df74feddb71416fa3190de4ddafd292~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021847&amp;x-signature=J0d%2F8gDmzEgM6xqe%2BECl%2F1LwaqY%3D" alt="å›¾ç‰‡2.png" loading="lazy"/></p>
<h2 data-id="heading-1"><strong>Artemisçš„è¯ç”Ÿï¼šè®©MLLMå­¦ä¼šâ€œå…ˆçœ‹åæƒ³ï¼Œè¾¹çœ‹è¾¹æ¨â€</strong></h2>
<p>ä¸ºäº†å…‹æœä¸Šè¿°å±€é™ï¼Œç ”ç©¶å›¢é˜Ÿæå‡ºäº† Artemis â€”â€” ä¸€ä¸ªåŸºäºå¼ºåŒ–å­¦ä¹ çš„æ„ŸçŸ¥ç­–ç•¥å­¦ä¹ æ¡†æ¶ã€‚è¯¥æ¡†æ¶çš„å‘½åçµæ„Ÿæ¥æºäºå¤å¸Œè…Šç¥è¯ä¸­çš„ç‹©çŒå¥³ç¥é˜¿å°”å¿’å¼¥æ–¯ï¼Œä»¥å…¶æ•é”çš„è§†è§‰å’Œç™¾å‘ç™¾ä¸­çš„ç²¾å‡†åº¦è‘—ç§°ï¼Œå¯“æ„ç€æ¨¡å‹æ‰€è¿½æ±‚çš„æ ¸å¿ƒèƒ½åŠ›ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/145d09b8412547d68721da533b1afb1d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021847&amp;x-signature=4YEnQe4rGNXGQu6Zb3%2FcsiH7B%2BY%3D" alt="å›¾ç‰‡3.png" loading="lazy"/></p>
<p>Artemisçš„æ ¸å¿ƒåˆ›æ–°åœ¨äºè¦æ±‚æ¨¡å‹æä¾›ç»“æ„åŒ–çš„è§†è§‰æ¨ç†è¯æ®ã€‚åœ¨ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆå‰ï¼Œæ¨¡å‹å¿…é¡»åœ¨ç‰¹å®šçš„æ€è€ƒé˜¶æ®µè¾“å‡ºä¸€ç³»åˆ— (æ ‡ç­¾ï¼Œè¾¹ç•Œæ¡†) å¯¹ã€‚è¿™äº›å¯¹ç›´æ¥ä»£è¡¨äº†æ¨¡å‹åœ¨å›¾åƒä¸­å®šä½åˆ°çš„è§†è§‰å®ä½“ï¼Œæ„æˆäº†å¯éªŒè¯ã€å¯è¿½è¸ªçš„ä¸­é—´è§†è§‰çŠ¶æ€ã€‚</p>
<ul>
<li><strong>ç»“æ„åŒ–è§†è§‰æ¨ç†å¥–åŠ±ï¼š</strong> è¿™æ˜¯Artemisçš„çµé­‚ã€‚å®ƒè®¾è®¡äº†ä¸€å¥—ç²¾ç»†çš„å¥–åŠ±æœºåˆ¶ï¼Œä¸ä»…é¼“åŠ±æ¨¡å‹æ‰¾å‡ºæœ€ç»ˆç­”æ¡ˆçš„å…³é”®å¯¹è±¡ï¼Œä¹Ÿå¥–åŠ±å…¶è¯†åˆ«å‡ºç›¸å…³çš„ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚è¿™å°±åƒè§£é¢˜æ—¶ï¼Œä¸ä»…è¦æ±‚ç­”æ¡ˆæ­£ç¡®ï¼Œè¿˜è¦æ±‚åˆ—å‡ºå…³é”®çš„å·²çŸ¥æ¡ä»¶å’Œæ¨å¯¼æ­¥éª¤ã€‚</li>
<li><strong>ç»Ÿä¸€çš„ç»“æœå¥–åŠ±ï¼š</strong> åŒ…æ‹¬æ ¼å¼å¥–åŠ±ï¼ˆç¡®ä¿è¾“å‡ºç»“æ„è§„èŒƒï¼‰å’Œç­”æ¡ˆå¥–åŠ±ï¼ˆåŸºäºé¢„æµ‹æ¡†ä¸çœŸå€¼æ¡†çš„é‡å åº¦åŠæ ‡ç­¾ä¸€è‡´æ€§ï¼‰ã€‚</li>
<li><strong>é«˜æ•ˆçš„è®­ç»ƒç®—æ³•ï¼š</strong> é‡‡ç”¨ç¾¤ç»„ç›¸å¯¹ç­–ç•¥ä¼˜åŒ–ï¼ˆGroup Relative Policy Optimization, GRPOï¼‰Â ç®—æ³•ï¼Œé«˜æ•ˆåœ°ä¼˜åŒ–æ•´ä¸ªæ„ŸçŸ¥ç­–ç•¥ã€‚</li>
</ul>
<h2 data-id="heading-2"><strong>å¼ºå¤§çš„è®­ç»ƒåŸºç¡€ï¼šArtemis-RFTæ•°æ®é›†</strong></h2>
<p>ä¸ºäº†è®­ç»ƒArtemisï¼Œå›¢é˜Ÿæ„å»ºäº†Artemis-RFTæ•°æ®é›†ã€‚è¯¥æ•°æ®é›†åŸºäºMS-COCOæ„å»ºï¼ŒåŒ…å«çº¦7.7ä¸‡ä¸ªå®ä¾‹ï¼Œç»Ÿä¸€äº†è§†è§‰å®šä½ï¼ˆVisual Groundingï¼‰å’Œç›®æ ‡æ£€æµ‹ï¼ˆObject Detectionï¼‰ ä¸¤ç§ä»»åŠ¡æ ¼å¼ã€‚æ¨¡å‹è¢«è®­ç»ƒåœ¨ç»™å‡ºæœ€ç»ˆç­”æ¡ˆï¼ˆç»¿è‰²æ¡†ï¼‰ä¹‹å‰ï¼Œå…ˆè¾“å‡ºä¸­é—´æ¨ç†æ­¥éª¤ï¼ˆç´«è‰²æ¡†ï¼‰æ¥æ ‡è¯†ç›¸å…³å¯¹è±¡ï¼Œä»è€Œå­¦ä¼šç»“æ„åŒ–çš„è§†è§‰æ¨ç†æµç¨‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/031ded4ea1ae4d4ca91332be208ace9d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021847&amp;x-signature=Iv3GpPD9ZqRHcg3YkoBAR2SKHwc%3D" alt="å›¾ç‰‡4.png" loading="lazy"/></p>
<p>Artemis-RFTæ•°æ®ç¤ºä¾‹ã€‚è¯¥æ•°æ®é›†åŒ…å«ä¸¤ç§ä»»åŠ¡ç±»å‹ï¼šè§†è§‰å®šä½å’Œå¯¹è±¡æ£€æµ‹ï¼Œç»Ÿä¸€çš„Artemisæ„ŸçŸ¥ç­–ç•¥å­¦ä¹ æ¡†æ¶åœ¨ä¸¤è€…ä¸Šè”åˆè®­ç»ƒã€‚ç´«è‰²æ¡†è¡¨ç¤ºæ¨ç†å¯¹è±¡ï¼Œç»¿è‰²æ¡†è¡¨ç¤ºç­”æ¡ˆã€‚</p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒArtemis è¦æ±‚æ¨¡å‹åœ¨ç»™å‡ºæœ€ç»ˆç­”æ¡ˆï¼ˆç»¿è‰²æ¡†ï¼‰ä¹‹å‰ï¼Œå…ˆé€šè¿‡æ¨ç†ï¼ˆç´«è‰²æ¡†ï¼‰è¯†åˆ«å‡ºåœºæ™¯ä¸­çš„ç›¸å…³å¯¹è±¡ã€‚è¿™ç§è®­ç»ƒæ–¹å¼è®©æ¨¡å‹å­¦ä¼šäº†â€œå…ˆçœ‹åç­”â€ã€‚</p>
<h2 data-id="heading-3"><strong>å“è¶Šçš„æ€§èƒ½è¡¨ç°ï¼šå…¨é¢é¢†å…ˆï¼Œæ³›åŒ–æƒŠäºº</strong></h2>
<p>ArtemisåŸºäºQwen2.5-VL-3Bæ¨¡å‹æ„å»ºï¼Œåœ¨å¤šä¸ªåŸºå‡†æµ‹è¯•ä¸­å–å¾—äº†çªç ´æ€§æˆæœï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1160b1e6848341a6b0ffb2bf1e44c57c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021847&amp;x-signature=UriI%2B9SLNtRKTxWbHpIUqxWKG2I%3D" alt="å›¾ç‰‡5.png" loading="lazy"/></p>
<ul>
<li><strong>è§†è§‰å®šä½ä¸æ£€æµ‹ä»»åŠ¡</strong></li>
</ul>
<p>åœ¨RefCOCO/+/gç³»åˆ—åŸºå‡†æµ‹è¯•ä¸­ï¼ŒArtemisåœ¨æ‰€æœ‰æŒ‡æ ‡ä¸Šå‡è¾¾åˆ°é¢†å…ˆæ°´å¹³ï¼Œå°¤å…¶åœ¨è¦æ±‚æé«˜çš„IoU@0.95æŒ‡æ ‡ä¸Šä¼˜åŠ¿æ˜¾è‘—ï¼Œè¯æ˜äº†å…¶è¾¹ç•Œæ¡†é¢„æµ‹çš„ç²¾å‡†åº¦ã€‚åœ¨COCOç›®æ ‡æ£€æµ‹ä»»åŠ¡ä¸Šï¼Œå…¶mAPè¾¾åˆ°31.0ï¼Œè¿œè¶…åŸºåº§æ¨¡å‹çš„15.4ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f952561f0354b7dbf28711fc19e0df1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021847&amp;x-signature=nGsO%2Fm%2F79UoiL5KoGPEvOtpD3TI%3D" alt="å›¾ç‰‡6.png" loading="lazy"/></p>
<ul>
<li>
<p><strong>æƒŠè‰³çš„é›¶æ ·æœ¬æ³›åŒ–èƒ½åŠ›</strong></p>
</li>
<li>
<p><strong>è§†è§‰è®¡æ•°ï¼š</strong> åœ¨ä»æœªæ¥å—è¿‡è®¡æ•°ä»»åŠ¡è®­ç»ƒçš„æƒ…å†µä¸‹ï¼ŒArtemisåœ¨Pixmo-Countæ•°æ®é›†ä¸Šçš„é›¶æ ·æœ¬å‡†ç¡®ç‡é«˜è¾¾81.4ï¼Œç”šè‡³è¶…è¿‡äº†ä¸“é—¨ä¸ºè®¡æ•°è®¾è®¡çš„æ¨¡å‹ã€‚å®ƒé€šè¿‡ç»“æ„åŒ–åœ°â€œåˆ—ä¸¾â€å‡ºå›¾åƒä¸­çš„ç›®æ ‡å¯¹è±¡æ¥å®Œæˆè®¡æ•°ï¼Œæ¨¡ä»¿äº†äººç±»çš„ç‚¹æ•°è¡Œä¸ºã€‚</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/877f4659b8c240d68e8508f776b5ab5c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021847&amp;x-signature=aYqiSPo90CbGBFtWOQSRqbUg3Zo%3D" alt="å›¾ç‰‡7.png" loading="lazy"/></p>
<ul>
<li><strong>å‡ ä½•å›¾å½¢æ„ŸçŸ¥ï¼š</strong> Artemisèƒ½å¤Ÿå°†å…¶åœ¨è‡ªç„¶å›¾åƒä¸­å­¦åˆ°çš„ç»“æ„åŒ–æ„ŸçŸ¥èƒ½åŠ›ï¼Œç¨³å¥åœ°è¿ç§»åˆ°æ•°å­¦å‡ ä½•å›¾å½¢é¢†åŸŸã€‚åœ¨MATHGLANCEåŸºå‡†æµ‹è¯•ï¼ˆæ¶µç›–å¹³é¢å‡ ä½•ã€ç«‹ä½“å‡ ä½•ã€å›¾è¡¨é¢˜ï¼‰ä¸­ï¼Œå®ƒåŒæ ·è¡¨ç°å‡ºè‰²ï¼Œå®ç°äº†ä»çœŸå®åœºæ™¯åˆ°æŠ½è±¡å›¾ç¤ºçš„è·¨åŸŸæ³›åŒ–ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9005edef3cdc47aeb6628be960823ec1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021847&amp;x-signature=84dlhLwr7AEPNUUJn3lJ0dL0bxI%3D" alt="å›¾ç‰‡8.png" loading="lazy"/></p>
<ul>
<li><strong>ç»¼åˆå¤šæ¨¡æ€èƒ½åŠ›</strong></li>
</ul>
<p>åœ¨MMBenchã€MMVetç­‰ä¸»æµå¤šæ¨¡æ€ç†è§£åŸºå‡†æµ‹è¯•ä¸­ï¼ŒArtemisä¿æŒäº†ç«äº‰ä¼˜åŠ¿ï¼Œè¡¨æ˜å…¶å¢å¼ºçš„æ„ŸçŸ¥èƒ½åŠ›æœ‰ç›Šäºæ•´ä½“çš„å¤šæ¨¡æ€æ¨ç†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7759ecd7f7847f6afd720be2aaf4169~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021847&amp;x-signature=YV0RDIfqecvKI6vzF1gP%2BaqBh7o%3D" alt="å›¾ç‰‡9.png" loading="lazy"/></p>
<h2 data-id="heading-4"><strong>æ¶ˆèåˆ†æï¼šéªŒè¯ç»“æ„åŒ–æ¨ç†çš„æ ¸å¿ƒä»·å€¼</strong></h2>
<p>ç ”ç©¶å›¢é˜Ÿé€šè¿‡ç³»ç»Ÿçš„æ¶ˆèå®éªŒè¯å®ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99f867095fe34738a5e4339ad5c838e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021847&amp;x-signature=bTTh7Q1bnej9YkehtmRLpdqyY1Y%3D" alt="å›¾ç‰‡10.png" loading="lazy"/></p>
<ul>
<li><strong>æ— æ¨ç†ï¼š</strong> åŸŸå†…ä»»åŠ¡å°šå¯ï¼Œä½†åŸŸå¤–æ³›åŒ–èƒ½åŠ›æå·®ã€‚</li>
<li><strong>çº¯è¯­è¨€æ¨ç†ï¼š</strong> ä¼šå¹²æ‰°æ„ŸçŸ¥è¿‡ç¨‹ï¼Œå¯¼è‡´æ€§èƒ½ä¸‹é™ï¼Œå°¤å…¶åœ¨è®¡æ•°ç­‰ä»»åŠ¡ä¸Šã€‚</li>
<li><strong>ç»“æ„åŒ–è§†è§‰æ¨ç†ï¼š</strong> æ˜¯æ€§èƒ½å…¨é¢æå‡å’Œè·å¾—å¼ºå¤§é›¶æ ·æœ¬æ³›åŒ–èƒ½åŠ›çš„å…³é”®ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f87b505cafc450ca13449ee99f90bd2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021847&amp;x-signature=55nShGcesisQp902JgDBrpIwen4%3D" alt="å›¾ç‰‡11.png" loading="lazy"/></p>
<ul>
<li><strong>å¯è§†åŒ–å±•ç¤º</strong></li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c2a472799f64d339c53a4c92b317674~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021847&amp;x-signature=vQ9joG8taCYK1I4XWnXQQuo6j6w%3D" alt="å›¾ç‰‡12.png" loading="lazy"/></p>
<p>Artemis é€šè¿‡ç´«è‰²çš„æ¨ç†æ¡†ç²¾å‡†åœ°å®šä½äº†åœºæ™¯ä¸­çš„å…³é”®è¦ç´ ï¼Œä»è€Œç»™å‡ºäº†æ­£ç¡®çš„çº¢è‰²ç­”æ¡ˆæ¡†ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œå…¶ä»–æ¨¡å‹è¦ä¹ˆå®šä½é”™è¯¯ï¼Œè¦ä¹ˆå®Œå…¨åç¦»ç›®æ ‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/974510d7241445049116a55afd435aaf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766021847&amp;x-signature=oRM0ylcMkcDuhn%2BCKDu9lD9%2BREw%3D" alt="å›¾ç‰‡13.png" loading="lazy"/></p>
<p>åœ¨è®¡æ•°ä»»åŠ¡ä¸­ï¼ŒArtemis å±•ç°äº†ç±»ä¼¼äººç±»çš„â€œç‚¹æ•°â€è¡Œä¸ºï¼Œé€šè¿‡é€ä¸ªæ ‡è®°ç›®æ ‡ï¼ˆç´«è‰²æ¡†ï¼‰æ¥å¾—å‡ºæ­£ç¡®çš„æ€»æ•°ï¼Œè€ŒåŸºåº§æ¨¡å‹ Qwen2.5-VL åˆ™å‡ºç°äº†ä¸¥é‡çš„å¹»è§‰ï¼Œæ ‡è®°äº†å¤§é‡é‡å¤æˆ–é”™è¯¯çš„æ¡†ã€‚</p>
<h2 data-id="heading-5"><strong>æŠ€æœ¯è´¡çŒ®ä¸äº§ä¸šå½±å“</strong></h2>
<p>Artemisçš„å·¥ä½œé¦–æ¬¡ç³»ç»Ÿæ€§åœ°è¯æ˜ï¼šé€šè¿‡å•ä¸€ã€ç»Ÿä¸€çš„ç»“æ„åŒ–è§†è§‰æ¨ç†è®­ç»ƒï¼Œå¯ä»¥ä½¿MLLMè·å¾—è·¨ä»»åŠ¡ã€è·¨é¢†åŸŸçš„å¼ºå¤§æ„ŸçŸ¥æ³›åŒ–èƒ½åŠ›ã€‚è¿™é¡¹ç ”ç©¶ä¸ºMLLMçš„æ„ŸçŸ¥èƒ½åŠ›ä¸ç©ºé—´æ¨ç†èƒ½åŠ›çš„å¯¹é½æŒ‡æ˜äº†æ–°æ–¹å‘ã€‚</p>
<h2 data-id="heading-6"><strong>ç»“è®º</strong></h2>
<p>Artemisçš„å‡ºç°æ ‡å¿—ç€MLLMæ„ŸçŸ¥ç ”ç©¶çš„ä¸€ä¸ªé‡è¦è½¬æŠ˜ç‚¹ï¼šå®ƒå‘Šè¯‰æˆ‘ä»¬ï¼Œå¯¹äºè§†è§‰ä»»åŠ¡ï¼Œâ€œå¦‚ä½•æ€è€ƒâ€ä¸â€œæ€è€ƒä»€ä¹ˆâ€åŒæ ·é‡è¦ï¼Œç”šè‡³æ›´ä¸ºå…³é”®ã€‚å°†æ¨ç†è¿‡ç¨‹ç©ºé—´åŒ–ã€ç»“æ„åŒ–ã€å¯éªŒè¯åŒ–ï¼Œæ˜¯è§£é”MLLMå¯é æ„ŸçŸ¥ä¸æ¨ç†èƒ½åŠ›çš„å…³é”®ã€‚è¿™é¡¹å·¥ä½œä¸ºæ„å»ºä¸‹ä¸€ä»£çœŸæ­£ç†è§£ç‰©ç†ä¸–ç•Œã€èƒ½è¿›è¡Œå¤æ‚ç©ºé—´äº¤äº’çš„æ™ºèƒ½ä½“å¥ å®šäº†åšå®çš„åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§£å†³ShardingSphereåˆ†ç‰‡ç®—æ³•åœ¨Devtoolsçƒ­é‡å¯åSpringUtil.getBean()ç©ºæŒ‡é’ˆé—®é¢˜]]></title>    <link>https://juejin.cn/post/7582041304654577710</link>    <guid>https://juejin.cn/post/7582041304654577710</guid>    <pubDate>2025-12-10T10:31:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582041304654577710" data-draft-id="7581872532363689993" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£å†³ShardingSphereåˆ†ç‰‡ç®—æ³•åœ¨Devtoolsçƒ­é‡å¯åSpringUtil.getBean()ç©ºæŒ‡é’ˆé—®é¢˜"/> <meta itemprop="keywords" content="åç«¯,Spring Boot"/> <meta itemprop="datePublished" content="2025-12-10T10:31:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœªç§ƒå¤´çš„ç¨‹åºçŒ¿"/> <meta itemprop="url" content="https://juejin.cn/user/3448514653724824"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£å†³ShardingSphereåˆ†ç‰‡ç®—æ³•åœ¨Devtoolsçƒ­é‡å¯åSpringUtil.getBean()ç©ºæŒ‡é’ˆé—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3448514653724824/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœªç§ƒå¤´çš„ç¨‹åºçŒ¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T10:31:06.000Z" title="Wed Dec 10 2025 10:31:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">â„ï¸ğŸ”¥ å†·å¯åŠ¨æ­£å¸¸ï¼Œçƒ­é‡å¯NPEï¼ŸShardingSphereæ’ä¸ŠDevtoolsçš„è¯¡å¼‚ç©ºæŒ‡é’ˆ</h2>
<blockquote>
<p><strong>æ ¸å¿ƒæç¤º</strong>ï¼šä½ çš„ ShardingSphere æŒ‰æœˆåˆ†è¡¨åŠŸèƒ½ï¼Œåœ¨åº”ç”¨é¦–æ¬¡å¯åŠ¨ï¼ˆå†·å¯åŠ¨ï¼‰æ—¶ä¸€åˆ‡æ­£å¸¸ï¼Œä½†ä¿®æ”¹ä»£ç åçƒ­é‡å¯ï¼Œå´æŠ›å‡ºä»¤äººè´¹è§£çš„ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼ˆNPEï¼‰ã€‚é—®é¢˜æ ¹æºå¹¶éä»£ç é€»è¾‘ï¼Œè€Œåœ¨äºä½ é¡¹ç›®ä¸­çš„Â <code>spring-boot-devtools</code>ã€‚</p>
</blockquote>
<h3 data-id="heading-1">é—®é¢˜ç°è±¡ï¼šè–›å®šè°”çš„ Bean</h3>
<p>å¼€å‘åŒå­¦åœ¨é›†æˆ ShardingSphere-JDBC å®ç°æŒ‰æœˆè‡ªåŠ¨åˆ†è¡¨æ—¶ï¼Œå¸¸ä¼šç¼–å†™ç±»ä¼¼çš„åˆ†ç‰‡ç®—æ³•ç±»ï¼š</p>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-comment">// DateRangeShardingAlgorithm.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DateRangeShardingAlgorithm</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PreciseShardingAlgorithm</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">doSharding</span><span class="hljs-params">(Collection tableNames, 
                            PreciseShardingValue preciseShardingValue)</span> {
        <span class="hljs-comment">// å†·å¯åŠ¨æ—¶æ­£å¸¸ï¼Œçƒ­é‡å¯åæ­¤å¥æŠ›å‡º NullPointerExceptionï¼</span>
        <span class="hljs-type">ShardingAlgorithmConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> SpringUtils.getBean(ShardingAlgorithmConfig.class);
        <span class="hljs-comment">// åç»­åˆ†è¡¨é€»è¾‘...</span>
    }
}
</code></pre>
<p><strong>ç—‡çŠ¶å…·ä½“è¡¨ç°ä¸º</strong>ï¼š</p>
<ul>
<li><strong>â„ï¸ å†·å¯åŠ¨ âœ…</strong>ï¼šé€šè¿‡ IDE æˆ–å‘½ä»¤é¦–æ¬¡å¯åŠ¨åº”ç”¨ï¼Œåˆ†è¡¨è·¯ç”±åŠŸèƒ½å®Œå…¨æ­£å¸¸ã€‚</li>
<li><strong>ğŸ”¥ çƒ­é‡å¯ âŒ</strong>ï¼šä¿®æ”¹ä»£ç ä¿å­˜åï¼ŒDevtools è‡ªåŠ¨çƒ­é‡å¯åº”ç”¨ï¼Œç›¸åŒçš„åˆ†ç‰‡æŸ¥è¯¢ç«‹åˆ»æŠ›å‡ºÂ <code>NullPointerException</code>ã€‚</li>
<li><strong>ğŸ§ª å•å…ƒæµ‹è¯• âœ…</strong>ï¼šå•ç‹¬è¿è¡ŒÂ <code>@SpringBootTest</code>Â å•å…ƒæµ‹è¯•ï¼Œä¸€åˆ‡æ­£å¸¸ï¼Œæ©ç›–äº†é—®é¢˜ã€‚</li>
</ul>
<h3 data-id="heading-2">æ ¹æºç®€æï¼šDevtools çš„â€œå¹³è¡Œå®‡å®™â€</h3>
<p><code>spring-boot-devtools</code>Â ä¸ºäº†å®ç°æé€Ÿçƒ­é‡å¯ï¼Œé‡‡ç”¨äº†<strong>åŒç±»åŠ è½½å™¨ (Dual ClassLoader)</strong> Â æœºåˆ¶ï¼š</p>
<ul>
<li><strong>Base ClassLoader</strong>ï¼šåŠ è½½åŸºæœ¬ä¸ä¼šå˜çš„ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚ Springã€ShardingSphere è‡ªèº«ï¼‰ã€‚</li>
<li><strong>Restart ClassLoader</strong>ï¼šåŠ è½½ä½ æ­£åœ¨å¼€å‘çš„ã€é¢‘ç¹å˜æ›´çš„é¡¹ç›®ä»£ç ã€‚</li>
</ul>
<p><strong>çƒ­é‡å¯æ—¶ï¼Œåªæœ‰ RestartClassLoader è¢«é‡å»º</strong>ã€‚è¿™å¯¼è‡´äº†ä¸€ä¸ªå…³é”®é—®é¢˜ï¼šä½ é¡¹ç›®ä¸­çš„å·¥å…·ç±»ï¼ˆå¦‚Â <code>SpringUtils</code>ï¼‰å’Œ ShardingSphere æ¡†æ¶åˆ›å»ºçš„åˆ†ç‰‡ç®—æ³•å®ä¾‹ï¼Œå¯èƒ½å¤„äº<strong>ä¸¤ä¸ªä¸åŒçš„â€œç±»åŠ è½½å™¨å®‡å®™â€</strong> ä¸­ã€‚å·¥å…·ç±»é‡Œç”¨äºä¿å­˜ Spring å®¹å™¨çš„é™æ€å˜é‡ï¼ˆå¦‚Â <code>beanFactory</code>ï¼‰<strong>åœ¨ä¸¤ä¸ªå®‡å®™ä¸­äº’ä¸ç›¸åŒ</strong>ã€‚æ¡†æ¶å®‡å®™é‡Œçš„å˜é‡è¢«æ­£ç¡®èµ‹å€¼äº†ï¼Œä½†ä½ ä»£ç å®‡å®™é‡Œè®¿é—®çš„å´æ˜¯å¦ä¸€ä¸ªæœªèµ‹å€¼çš„å‰¯æœ¬ï¼Œç»“æœå°±æ˜¯Â <code>null</code>ã€‚</p>
<hr/>
<h3 data-id="heading-3">ğŸ› ï¸ è§£å†³æ–¹æ¡ˆä¸€ï¼šé…ç½®æ’é™¤æ³•ï¼ˆå¿«é€Ÿä¿®å¤ï¼‰</h3>
<p>å¦‚æœä½ å¸Œæœ›ä¿ç•™ Devtools çš„ä¾¿åˆ©æ€§ï¼Œè¿™æ˜¯æœ€å¿«çš„è§£å†³æ–¹å¼ã€‚æ ¸å¿ƒæ€è·¯æ˜¯ï¼š<strong>å‘Šè¯‰ Devtoolsï¼Œå°†ç‰¹å®šçš„æ ¸å¿ƒå·¥å…·ç±»å’Œé…ç½®ç±»ï¼Œä¹Ÿäº¤ç”± BaseClassLoader åŠ è½½</strong>ï¼Œè®©å®ƒä»¬ç•™åœ¨â€œæ¡†æ¶å®‡å®™â€ï¼Œä»è€Œé¿å…éš”ç¦»ã€‚</p>
<h4 data-id="heading-4">æ“ä½œæ­¥éª¤</h4>
<p><strong>1. åˆ›å»ºæ’é™¤é…ç½®æ–‡ä»¶</strong><br/>
åœ¨é¡¹ç›®çš„Â <code>src/main/resources</code>Â ç›®å½•ä¸‹ï¼Œåˆ›å»ºÂ <code>META-INF/spring-devtools.properties</code>Â æ–‡ä»¶ã€‚</p>
<p><strong>2. æ·»åŠ æ’é™¤è§„åˆ™</strong><br/>
åœ¨æ–‡ä»¶ä¸­åŠ å…¥ä»¥ä¸‹é…ç½®ï¼ˆè¯·å°†Â <code>com.yourpackage</code>Â æ›¿æ¢ä¸ºä½ çš„å®é™…åŒ…åï¼‰ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">
# æ’é™¤åŒ…å« Spring ä¸Šä¸‹æ–‡å·¥å…·ç±»çš„åŒ…
restart.exclude.springutils=com.yourpackage.utils..*
# æ’é™¤ ShardingSphere é…ç½®ç±»çš„åŒ…
restart.exclude.shardingconfig=com.yourpackage.config.sharding..*
</code></pre>
<p><strong>3. ï¼ˆå¯é€‰ï¼‰éªŒè¯é…ç½®æ•ˆæœ</strong><br/>
ä½ å¯ä»¥åœ¨åº”ç”¨å¯åŠ¨æ—¶æ·»åŠ ä¸€æ®µæ—¥å¿—æ¥éªŒè¯ï¼š</p>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.boot.CommandLineRunner;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassLoaderCheckRunner</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">CommandLineRunner</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(String... args)</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;SpringUtils åŠ è½½è‡ª: &amp;#<span class="hljs-number">34</span>; + SpringUtils.class.getClassLoader());
        System.out.println(&amp;#<span class="hljs-number">34</span>;ShardingConfig åŠ è½½è‡ª: &amp;#<span class="hljs-number">34</span>; + ShardingAlgorithmConfig.class.getClassLoader());
        System.out.println(&amp;#<span class="hljs-number">34</span>;åˆ†ç‰‡ç®—æ³•ç±»åŠ è½½è‡ª: &amp;#<span class="hljs-number">34</span>; + DateRangeShardingAlgorithm.class.getClassLoader());
    }
}
</code></pre>
<p><strong>æœŸå¾…çš„è¾“å‡ºç»“æœ</strong>åº”æ˜¯ï¼šå‰ä¸¤ä¸ªç±»ç”±Â <code>AppClassLoader</code>Â åŠ è½½ï¼Œè€Œåˆ†ç‰‡ç®—æ³•ç±»ç”±Â <code>RestartClassLoader</code>Â åŠ è½½ã€‚</p>

















<table><thead><tr><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>é…ç½®ç®€å•ï¼Œè§æ•ˆå¿«</td><td>éœ€è¦æ˜ç¡®çŸ¥é“å“ªäº›æ ¸å¿ƒç±»éœ€æ’é™¤</td></tr><tr><td>å®Œå…¨ä¿ç•™çƒ­é‡å¯åŠŸèƒ½</td><td>æ–°å¢ç±»ä¼¼å·¥å…·ç±»éœ€æ›´æ–°é…ç½®</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-5">ğŸ§¹ è§£å†³æ–¹æ¡ˆäºŒï¼šç§»é™¤ Devtools ä¾èµ–ï¼ˆæœ€å½»åº•ï¼‰</h3>
<p>å¦‚æœä½ çš„å¼€å‘ç¯å¢ƒå¯¹çƒ­é‡å¯ä¾èµ–ä¸é«˜ï¼Œæˆ–è€…æ­¤é—®é¢˜å·²ä¸¥é‡é˜»ç¢è°ƒè¯•ï¼Œ<strong>ç›´æ¥ç§»é™¤Â <code>spring-boot-devtools</code>Â ä¾èµ–æ˜¯æœ€å½»åº•ã€ä¸€åŠ³æ°¸é€¸çš„æ–¹æ³•</strong>ã€‚</p>
<h4 data-id="heading-6">æ“ä½œæ­¥éª¤</h4>
<p><strong>1. ä¿®æ”¹ Maven ä¾èµ– (<code>pom.xml</code>)</strong><br/>
æ‰¾åˆ°å¹¶æ³¨é‡Šæˆ–åˆ é™¤Â <code>spring-boot-devtools</code>Â ä¾èµ–é¡¹ã€‚</p>
<pre><code class="hljs language-xml" lang="xml">


    org.springframework.boot
    spring-boot-devtools
    runtime
    true

--&gt;
</code></pre>
<p><strong>2. æ¸…ç†ä¸é‡å¯</strong><br/>
æ‰§è¡Œ Maven æ¸…ç†å¹¶é‡æ–°å†·å¯åŠ¨åº”ç”¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">mvn clean compile
</code></pre>
<p>ç„¶ååœ¨ IDE ä¸­é‡æ–°å¯åŠ¨ä½ çš„ Spring Boot åº”ç”¨ã€‚</p>
<h4 data-id="heading-7">ä¸ºä»€ä¹ˆç§»é™¤å°±èƒ½è§£å†³ï¼Ÿ</h4>
<p>å› ä¸ºç§»é™¤äº†Â <code>spring-boot-devtools</code>Â åï¼Œåº”ç”¨åœ¨ä»»ä½•æ—¶å€™å¯åŠ¨éƒ½ä¼šä½¿ç”¨å•ä¸€çš„ã€æ ‡å‡†çš„Â <code>AppClassLoader</code>ã€‚æ‰€æœ‰çš„ç±»éƒ½åœ¨åŒä¸€ä¸ªâ€œå®‡å®™â€ä¸­ï¼Œé™æ€å˜é‡è‡ªç„¶å¯ä»¥æ­£ç¡®å…±äº«è®¿é—®ï¼Œä¸Šè¿°çš„ NPE é—®é¢˜éšä¹‹æ¶ˆå¤±ã€‚</p>

















<table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>éœ€è¦çƒ­é‡å¯åŠŸèƒ½</strong>ï¼Œä¸”æ„¿æ„ç¨ä½œé…ç½®</td><td><strong>æ–¹æ¡ˆä¸€ï¼šé…ç½®æ’é™¤æ³•</strong></td></tr><tr><td><strong>æƒ³å½»åº•æ ¹é™¤é—®é¢˜</strong>ï¼Œæˆ–çƒ­é‡å¯éå¿…éœ€</td><td><strong>æ–¹æ¡ˆäºŒï¼šç§»é™¤ Devtools</strong></td></tr></tbody></table>
<hr/>
<h3 data-id="heading-8">æ€»ç»“</h3>
<p><code>spring-boot-devtools</code>Â åœ¨æå‡å¼€å‘æ•ˆç‡çš„åŒæ—¶ï¼Œä¹Ÿå› å…¶ç‹¬ç‰¹çš„åŒç±»åŠ è½½å™¨æœºåˆ¶å¸¦æ¥äº†â€œå†·çƒ­å¯åŠ¨è¡Œä¸ºä¸ä¸€è‡´â€çš„æš—å‘ã€‚å½“ä½ çš„Â <strong>ShardingSphere åˆ†ç‰‡ç®—æ³•ã€MyBatis æ’ä»¶ç­‰æ¡†æ¶æ‰©å±•ç‚¹</strong>ï¼Œåœ¨çƒ­é‡å¯åå‡ºç°ç¥ç§˜çš„ NPE æ—¶ï¼Œé¦–å…ˆå¯ä»¥æ£€æŸ¥æ˜¯å¦é€šè¿‡é™æ€å·¥å…·ç±»è·å–äº† Spring Beanã€‚</p>
<p>è§£å†³ä¹‹é“å¾ˆæ¸…æ™°ï¼šè¦ä¹ˆ<strong>é…ç½®æ’é™¤</strong>å…³é”®ç±»ï¼Œè¦ä¹ˆ<strong>æš‚æ—¶ç§»é™¤æ­¤ä¾èµ–</strong>ã€‚é€šå¸¸ï¼Œåœ¨é›†ä¸­è§£å†³æ­¤ç±»é›†æˆé—®é¢˜æœŸé—´ï¼Œé‡‡ç”¨æ–¹æ¡ˆäºŒèƒ½è®©è°ƒè¯•è·¯å¾„æ›´åŠ æ¸…æ™°ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡çŸ­æ–‡èƒ½å¸®ä½ å¿«é€ŸæŒ£è„±è¿™ä¸ªéšè”½çš„å›°å¢ƒï¼Œè®©ä½ çš„åˆ†è¡¨åŠŸèƒ½åœ¨å†·ä¸çƒ­çš„ä¸–ç•Œé‡Œéƒ½ç¨³å®šè¿è¡Œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ArrayListçš„addæ–¹æ³•åº•å±‚å®ç°åŸç†]]></title>    <link>https://juejin.cn/post/7581872532363722761</link>    <guid>https://juejin.cn/post/7581872532363722761</guid>    <pubDate>2025-12-10T10:31:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581872532363722761" data-draft-id="7582047554089074697" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ArrayListçš„addæ–¹æ³•åº•å±‚å®ç°åŸç†"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-10T10:31:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­¦javaä¸­"/> <meta itemprop="url" content="https://juejin.cn/user/2269028453720813"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ArrayListçš„addæ–¹æ³•åº•å±‚å®ç°åŸç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2269028453720813/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­¦javaä¸­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T10:31:44.000Z" title="Wed Dec 10 2025 10:31:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong><code>ArrayList</code> çš„åº•å±‚ç¡®å®æ˜¯ç”¨æ•°ç»„å®ç°çš„</strong>ï¼Œå¹¶ä¸”å®ƒçš„ <strong><code>add()</code> æ–¹æ³•çš„æ ¸å¿ƒé€»è¾‘å°±ä¾èµ–äºè¿™ä¸ªå†…éƒ¨æ•°ç»„</strong>ã€‚ä¸‹é¢æˆ‘ä»¬ä»æºç è§’åº¦ï¼ˆä»¥ Java 8+ ä¸ºä¸»ï¼‰æ¥è¯¦ç»†è§£æï¼š</p>
<h2 data-id="heading-0">1.Â <code>ArrayList</code>Â åº•å±‚ç»“æ„</h2>
<pre><code class="hljs language-scala" lang="scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArrayList</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractList</span></span>
        implements <span class="hljs-type">List</span>, <span class="hljs-type">RandomAccess</span>, <span class="hljs-type">Cloneable</span>, java.io.<span class="hljs-type">Serializable</span> {
    
    <span class="hljs-comment">// å­˜å‚¨å…ƒç´ çš„åº•å±‚æ•°ç»„ï¼ˆJDK 8+ æ˜¯ Object[]ï¼Œæ—©æœŸç‰ˆæœ¬å¯èƒ½ä¸º transientï¼‰</span>
    transient <span class="hljs-type">Object</span>[] elementData;

    <span class="hljs-comment">// å®é™…å…ƒç´ ä¸ªæ•°</span>
    <span class="hljs-keyword">private</span> int size;
}
</code></pre>
<ul>
<li><code>elementData</code>Â å°±æ˜¯Â <code>ArrayList</code>Â å†…éƒ¨ç”¨æ¥å­˜æ•°æ®çš„<strong>åŠ¨æ€æ•°ç»„</strong>ã€‚</li>
<li>åˆå§‹å®¹é‡é»˜è®¤ä¸ºÂ <strong>10</strong>ï¼ˆå¦‚æœä½ ç”¨æ— å‚æ„é€ å‡½æ•°ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-1">2.Â <code>add(E e)</code>Â æ–¹æ³•çš„æ ¸å¿ƒæµç¨‹</h2>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title">add</span><span class="hljs-params">(E e)</span> </span>{
    <span class="hljs-built_in">ensureCapacityInternal</span>(size + <span class="hljs-number">1</span>);  <span class="hljs-comment">// ç¡®ä¿å®¹é‡è¶³å¤Ÿ</span>
    elementData[size++] = e;           <span class="hljs-comment">// æ·»åŠ å…ƒç´ å¹¶å¢åŠ  size</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}
</code></pre>
<p>å…³é”®åœ¨ <code>ensureCapacityInternal()</code> â€”â€” å®ƒè´Ÿè´£<strong>æ‰©å®¹æ£€æŸ¥</strong>ã€‚</p>
<h2 data-id="heading-2">3. æ‰©å®¹æœºåˆ¶ï¼ˆæ ¸å¿ƒï¼ï¼‰</h2>
<h3 data-id="heading-3">æ­¥éª¤åˆ†è§£ï¼š</h3>
<h4 data-id="heading-4">(1)Â <code>ensureCapacityInternal(minCapacity)</code></h4>
<pre><code class="hljs language-ini" lang="ini">private void ensureCapacityInternal(int minCapacity) {
    if (<span class="hljs-attr">elementData</span> == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) {
        // å¦‚æœæ˜¯é»˜è®¤ç©ºæ•°ç»„ï¼Œåˆ™è‡³å°‘æ‰©å®¹åˆ° <span class="hljs-attr">DEFAULT_CAPACITY</span> = <span class="hljs-number">10</span>
        <span class="hljs-attr">minCapacity</span> = Math.max(DEFAULT_CAPACITY, minCapacity)<span class="hljs-comment">;</span>
    }
    ensureExplicitCapacity(minCapacity)<span class="hljs-comment">;</span>
}
</code></pre>
<h4 data-id="heading-5">(2)Â <code>ensureExplicitCapacity(minCapacity)</code></h4>
<pre><code class="hljs language-scss" lang="scss">private void <span class="hljs-built_in">ensureExplicitCapacity</span>(int minCapacity) {
    modCount++; <span class="hljs-comment">// ç”¨äº fail-fast æœºåˆ¶</span>
    if (minCapacity - elementData.length &gt; <span class="hljs-number">0</span>)
        <span class="hljs-built_in">grow</span>(minCapacity); <span class="hljs-comment">// éœ€è¦æ‰©å®¹ï¼</span>
}
</code></pre>
<h4 data-id="heading-6">(3)Â <code>grow(int minCapacity)</code>Â â€”â€”Â <strong>çœŸæ­£çš„æ‰©å®¹é€»è¾‘</strong></h4>
<pre><code class="hljs language-ini" lang="ini">private void grow(int minCapacity) {
    int <span class="hljs-attr">oldCapacity</span> = elementData.length<span class="hljs-comment">;</span>
    // æ–°å®¹é‡ = æ—§å®¹é‡ + æ—§å®¹é‡ &gt;&gt; 1 ï¼ˆå³ 1.5 å€ï¼‰
    int <span class="hljs-attr">newCapacity</span> = oldCapacity + (oldCapacity &gt;&gt; <span class="hljs-number">1</span>)<span class="hljs-comment">;</span>
    
    // å¦‚æœ 1.5 å€è¿˜ä¸å¤Ÿï¼ˆæ¯”å¦‚æ‰¹é‡æ·»åŠ å¤§é‡å…ƒç´ ï¼‰ï¼Œå°±ç”¨ minCapacity
    if (newCapacity - minCapacity &lt; 0)
        <span class="hljs-attr">newCapacity</span> = minCapacity<span class="hljs-comment">;</span>
    
    // å¤„ç†è¶…å¤§æ•°ç»„ï¼ˆæ¥è¿‘ Integer.MAX_VALUEï¼‰
    if (newCapacity - MAX_ARRAY_SIZE &gt; 0)
        <span class="hljs-attr">newCapacity</span> = hugeCapacity(minCapacity)<span class="hljs-comment">;</span>

    // åˆ›å»ºæ–°æ•°ç»„ï¼Œå¹¶å¤åˆ¶æ—§æ•°æ®ï¼ˆè°ƒç”¨ Arrays.copyOfï¼‰
    <span class="hljs-attr">elementData</span> = Arrays.copyOf(elementData, newCapacity)<span class="hljs-comment">;</span>
}
</code></pre>
<h2 data-id="heading-7">4. å…³é”®ç‚¹æ€»ç»“</h2>





























<table><thead><tr><th>ç‰¹æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>åº•å±‚ç»“æ„</strong></td><td><code>Object[] elementData</code>Â æ•°ç»„</td></tr><tr><td><strong>åˆå§‹å®¹é‡</strong></td><td>æ— å‚æ„é€ æ—¶ä¸ºÂ <strong>0</strong>ï¼ˆå»¶è¿Ÿåˆå§‹åŒ–ï¼‰ï¼Œç¬¬ä¸€æ¬¡Â <code>add</code>Â æ—¶æ‰©åˆ°Â <strong>10</strong></td></tr><tr><td><strong>æ‰©å®¹ç­–ç•¥</strong></td><td><strong>1.5 å€å¢é•¿</strong>ï¼ˆ<code>old + old &gt;&gt; 1</code>ï¼‰</td></tr><tr><td><strong>æ‰©å®¹æ“ä½œ</strong></td><td>è°ƒç”¨Â <code>Arrays.copyOf()</code>Â åˆ›å»ºæ–°æ•°ç»„å¹¶å¤åˆ¶å…ƒç´ ï¼ˆ<strong>æ—¶é—´å¤æ‚åº¦ O(n)</strong> ï¼‰</td></tr><tr><td><strong>çº¿ç¨‹å®‰å…¨</strong></td><td>âŒÂ <code>ArrayList</code>Â <strong>ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„</strong></td></tr></tbody></table>
<p>ä¸¾ä¾‹ï¼š<br/>
å½“å‰å®¹é‡ 10ï¼Œæ·»åŠ ç¬¬ 11 ä¸ªå…ƒç´  â†’ æ‰©å®¹åˆ° <code>10 + 5 = 15</code><br/>
å†æ·»åŠ åˆ°ç¬¬ 16 ä¸ª â†’ æ‰©å®¹åˆ° <code>15 + 7 = 22</code>ï¼ˆå› ä¸º <code>15 &gt;&gt; 1 = 7</code>ï¼‰</p>
<h2 data-id="heading-8">å¯¹æ¯”ï¼š<code>ArrayList</code>Â vs æ™®é€šæ•°ç»„</h2>






























<table><thead><tr><th>ç‰¹æ€§</th><th>æ™®é€šæ•°ç»„</th><th><code>ArrayList</code></th></tr></thead><tbody><tr><td>å¤§å°å›ºå®šï¼Ÿ</td><td>âœ… æ˜¯</td><td>âŒ åŠ¨æ€æ‰©å®¹</td></tr><tr><td>æ³›å‹æ”¯æŒï¼Ÿ</td><td>âŒ</td><td>âœ…</td></tr><tr><td>æä¾›ä¸°å¯Œæ–¹æ³•ï¼Ÿ</td><td>âŒ</td><td>âœ…ï¼ˆadd/remove/containsç­‰ï¼‰</td></tr><tr><td>å†…å­˜å¼€é”€</td><td>å°</td><td>ç¨å¤§ï¼ˆå¯¹è±¡å¤´ + size å­—æ®µç­‰ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-9">ğŸ“Œ æ€»ç»“</h3>
<ul>
<li><strong><code>ArrayList</code>Â åº•å±‚æ˜¯Â <code>Object[]</code>Â æ•°ç»„</strong>ã€‚</li>
<li><strong><code>add()</code>Â æ–¹æ³•ä¼šæ£€æŸ¥å®¹é‡ï¼Œä¸å¤Ÿå°±æ‰©å®¹</strong>ã€‚</li>
<li><strong>æ‰©å®¹è§„åˆ™ï¼š1.5 å€ï¼ˆå³ç§»ä¸€ä½åŠ åŸå€¼ï¼‰</strong> ã€‚</li>
<li><strong>æ‰©å®¹æœ¬è´¨æ˜¯åˆ›å»ºæ–°æ•°ç»„ + å¤åˆ¶æ—§æ•°æ®ï¼ˆ<code>Arrays.copyOf</code>ï¼‰</strong> ï¼Œæ‰€ä»¥<strong>é¢‘ç¹æ‰©å®¹ä¼šå½±å“æ€§èƒ½</strong>Â â†’ å»ºè®®é¢„ä¼°å®¹é‡å¹¶ç”¨Â <code>new ArrayList&lt;&gt;(initialCapacity)</code>Â åˆå§‹åŒ–ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ§ª JUnitå•å…ƒæµ‹è¯•å®Œå…¨æŒ‡å—ï¼šä»å…¥é—¨åˆ°ä¼ä¸šçº§åº”ç”¨]]></title>    <link>https://juejin.cn/post/7582039917216579584</link>    <guid>https://juejin.cn/post/7582039917216579584</guid>    <pubDate>2025-12-10T11:01:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582039917216579584" data-draft-id="7582036070159237120" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ§ª JUnitå•å…ƒæµ‹è¯•å®Œå…¨æŒ‡å—ï¼šä»å…¥é—¨åˆ°ä¼ä¸šçº§åº”ç”¨"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-10T11:01:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·44236359841"/> <meta itemprop="url" content="https://juejin.cn/user/766787307710060"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ§ª JUnitå•å…ƒæµ‹è¯•å®Œå…¨æŒ‡å—ï¼šä»å…¥é—¨åˆ°ä¼ä¸šçº§åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/766787307710060/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·44236359841
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T11:01:42.000Z" title="Wed Dec 10 2025 11:01:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ§ª JUnitå•å…ƒæµ‹è¯•å®Œå…¨æŒ‡å—ï¼šä»å…¥é—¨åˆ°ä¼ä¸šçº§åº”ç”¨</h2>
<h3 data-id="heading-1">ğŸ“– å¼•è¨€</h3>
<p>åœ¨ç°ä»£Javaå¼€å‘ä¸­ï¼Œå•å…ƒæµ‹è¯•å·²æˆä¸ºä¿è¯ä»£ç è´¨é‡ä¸å¯æˆ–ç¼ºçš„ä¸€ç¯ã€‚JUnitä½œä¸ºJavaé¢†åŸŸæœ€æµè¡Œçš„å•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œä¸ºå¼€å‘è€…æä¾›äº†å¼ºå¤§è€Œçµæ´»çš„æµ‹è¯•å·¥å…·ã€‚ä»Šå¤©ï¼Œæˆ‘å°†å¸¦ä½ å…¨é¢äº†è§£JUnitçš„ä½¿ç”¨ï¼Œå¹¶ç»“åˆå®é™…æ¡ˆä¾‹ï¼Œè®©ä½ è½»æ¾æŒæ¡ä¼ä¸šçº§æµ‹è¯•è§„èŒƒï¼</p>
<hr/>
<h3 data-id="heading-2">ğŸ¯ ç¬¬ä¸€ç« ï¼šJUnitå¿«é€Ÿå…¥é—¨</h3>
<h4 data-id="heading-3">1.1 ä»€ä¹ˆæ˜¯JUnitå•å…ƒæµ‹è¯•ï¼Ÿ</h4>
<p>JUnitå•å…ƒæµ‹è¯•ä¸»è¦ç”¨äº<strong>éªŒè¯ç±»ä¸­æ–¹æ³•çš„æ­£ç¡®æ€§</strong>ï¼Œå®ƒæ˜¯å¼€å‘è€…éªŒè¯ä»£ç é€»è¾‘çš„ç¬¬ä¸€é“é˜²çº¿ã€‚</p>
<h4 data-id="heading-4">1.2 ä¸ºä»€ä¹ˆè¦ä½¿ç”¨JUnitï¼Ÿ</h4>
<p>âœ… <strong>ä¸‰å¤§æ ¸å¿ƒä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>ğŸ›¡ï¸ <strong>ä»£ç åˆ†ç¦»</strong>ï¼šæµ‹è¯•ä»£ç ä¸ä¸šåŠ¡ä»£ç åˆ†ç¦»ï¼Œä¾¿äºç»´æŠ¤</li>
<li>ğŸ¨ <strong>ç›´è§‚åé¦ˆ</strong>ï¼šè‡ªåŠ¨ç”Ÿæˆæµ‹è¯•æŠ¥å‘Šï¼ˆç»¿è‰²é€šè¿‡ âŒ çº¢è‰²å¤±è´¥ï¼‰</li>
<li>ğŸ”’ <strong>ç‹¬ç«‹æ‰§è¡Œ</strong>ï¼šä¸€ä¸ªæµ‹è¯•æ–¹æ³•å¤±è´¥ä¸å½±å“å…¶ä»–æµ‹è¯•æ‰§è¡Œ</li>
</ul>
<h4 data-id="heading-5">1.3 å‘½åè§„èŒƒ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç±»å‘½åï¼šè¢«æµ‹è¯•ç±»å + Test</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceTest</span> {  <span class="hljs-comment">// âœ… è§„èŒƒ</span>
    
    <span class="hljs-comment">// æ–¹æ³•å‘½åï¼špublic void æ–¹æ³•å(){...}</span>
    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetAge</span><span class="hljs-params">()</span> {  <span class="hljs-comment">// âœ… è§„å®š</span>
        <span class="hljs-comment">// æµ‹è¯•é€»è¾‘</span>
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-6">âš™ï¸ ç¬¬äºŒç« ï¼šç¯å¢ƒé…ç½®ä¸åŸºç¡€ä½¿ç”¨</h3>
<h4 data-id="heading-7">2.1 Mavenä¾èµ–é…ç½®</h4>
<p>åœ¨<code>pom.xml</code>ä¸­æ·»åŠ JUnitä¾èµ–ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">

    org.junit.jupiter
    junit-jupiter
    5.9.1
    test

</code></pre>
<h4 data-id="heading-8">2.2 åˆ›å»ºç¬¬ä¸€ä¸ªæµ‹è¯•ç±»</h4>
<p>åœ¨<code>src/test/java</code>ç›®å½•ä¸‹åˆ›å»ºæµ‹è¯•ç±»ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;

<span class="hljs-comment">/**
 * ç”¨æˆ·æœåŠ¡æµ‹è¯•ç±»
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceTest</span> {

    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetAge</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// 1. å‡†å¤‡æµ‹è¯•æ•°æ®</span>
        <span class="hljs-type">UserService</span> <span class="hljs-variable">userService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserService</span>();
        
        <span class="hljs-comment">// 2. æ‰§è¡Œè¢«æµ‹è¯•æ–¹æ³•</span>
        <span class="hljs-type">Integer</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> userService.getAge(&amp;#<span class="hljs-number">34</span>;<span class="hljs-number">100000200010011011</span>&amp;#<span class="hljs-number">34</span>;);
        
        <span class="hljs-comment">// 3. éªŒè¯ç»“æœï¼ˆåˆå§‹ç‰ˆæœ¬ä½¿ç”¨è¾“å‡ºï¼‰</span>
        System.out.println(&amp;#<span class="hljs-number">34</span>;è®¡ç®—å¹´é¾„ï¼š&amp;#<span class="hljs-number">34</span>; + age);
        
        <span class="hljs-comment">// ğŸ¯ ä¼ä¸šå®è·µï¼šåº”è¯¥ä½¿ç”¨æ–­è¨€è€ŒéSystem.out</span>
        <span class="hljs-comment">// Assertions.assertEquals(22, age, &amp;#34;å¹´é¾„è®¡ç®—é”™è¯¯&amp;#34;);</span>
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-9">ğŸ” ç¬¬ä¸‰ç« ï¼šæ–­è¨€ï¼ˆAssertionsï¼‰- æµ‹è¯•çš„æ ¸å¿ƒ</h3>
<h4 data-id="heading-10">3.1 ä»€ä¹ˆæ˜¯æ–­è¨€ï¼Ÿ</h4>
<p>æ–­è¨€æ˜¯JUnitæä¾›çš„è¾…åŠ©æ–¹æ³•ï¼Œç”¨äº<strong>éªŒè¯è¢«æµ‹è¯•æ–¹æ³•æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œ</strong>ã€‚å¦‚æœæ–­è¨€å¤±è´¥ï¼Œæµ‹è¯•å°†æ ‡è®°ä¸ºå¤±è´¥ã€‚</p>
<h4 data-id="heading-11">3.2 å¸¸ç”¨æ–­è¨€æ–¹æ³•è¯¦è§£</h4>













































<table><thead><tr><th>æ–­è¨€æ–¹æ³•</th><th>æè¿°</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>assertEquals(expected, actual, message)</code></td><td>æ£€æŸ¥ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰</td><td>éªŒè¯æ–¹æ³•è¿”å›å€¼</td></tr><tr><td><code>assertNotEquals(unexpected, actual, message)</code></td><td>æ£€æŸ¥ä¸¤ä¸ªå€¼æ˜¯å¦ä¸ç›¸ç­‰</td><td>éªŒè¯ä¸ç›¸ç­‰æƒ…å†µ</td></tr><tr><td><code>assertNull(object, message)</code></td><td>æ£€æŸ¥å¯¹è±¡æ˜¯å¦ä¸ºnull</td><td>éªŒè¯ç©ºè¿”å›å€¼</td></tr><tr><td><code>assertNotNull(object, message)</code></td><td>æ£€æŸ¥å¯¹è±¡æ˜¯å¦ä¸ä¸ºnull</td><td>éªŒè¯éç©ºè¿”å›å€¼</td></tr><tr><td><code>assertTrue(condition, message)</code></td><td>æ£€æŸ¥æ¡ä»¶æ˜¯å¦ä¸ºtrue</td><td>éªŒè¯å¸ƒå°”æ¡ä»¶</td></tr><tr><td><code>assertFalse(condition, message)</code></td><td>æ£€æŸ¥æ¡ä»¶æ˜¯å¦ä¸ºfalse</td><td>éªŒè¯å‡æ¡ä»¶</td></tr><tr><td><code>assertThrows(exceptionType, executable, message)</code></td><td>æ£€æŸ¥æ˜¯å¦æŠ›å‡ºæŒ‡å®šå¼‚å¸¸</td><td>éªŒè¯å¼‚å¸¸æƒ…å†µ</td></tr></tbody></table>
<h4 data-id="heading-12">3.3 å®æˆ˜ï¼šæ–­è¨€åº”ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.junit.jupiter.api.Assertions;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceTest</span> {

    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGenderWithAssert</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å‡†å¤‡</span>
        <span class="hljs-type">UserService</span> <span class="hljs-variable">userService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserService</span>();
        
        <span class="hljs-comment">// æ‰§è¡Œ</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">gender</span> <span class="hljs-operator">=</span> userService.getGender(&amp;#<span class="hljs-number">34</span>;<span class="hljs-number">100000200010011011</span>&amp;#<span class="hljs-number">34</span>;);
        
        <span class="hljs-comment">// éªŒè¯æ–­è¨€</span>
        Assertions.assertEquals(&amp;#<span class="hljs-number">34</span>;ç”·&amp;#<span class="hljs-number">34</span>;, gender, 
            &amp;#<span class="hljs-number">34</span>;èº«ä»½è¯<span class="hljs-number">100000200010011011</span>å¯¹åº”çš„æ€§åˆ«åº”è¯¥æ˜¯ç”·æ€§&amp;#<span class="hljs-number">34</span>;);
    }
    
    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGenderWithException</span><span class="hljs-params">()</span> {
        <span class="hljs-type">UserService</span> <span class="hljs-variable">userService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserService</span>();
        
        <span class="hljs-comment">// éªŒè¯å¼‚å¸¸æ–­è¨€</span>
        Assertions.assertThrows(IllegalArgumentException.class, () -&gt; {
            userService.getGender(<span class="hljs-literal">null</span>);
        }, &amp;#<span class="hljs-number">34</span>;ä¼ å…¥<span class="hljs-literal">null</span>å‚æ•°åº”è¯¥æŠ›å‡ºIllegalArgumentExceptionå¼‚å¸¸&amp;#<span class="hljs-number">34</span>;);
    }
    
    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testComprehensiveAssertions</span><span class="hljs-params">()</span> {
        <span class="hljs-type">UserService</span> <span class="hljs-variable">userService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserService</span>();
        <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> userService.processData(&amp;#<span class="hljs-number">34</span>;test&amp;#<span class="hljs-number">34</span>;);
        
        <span class="hljs-comment">// å¤šä¸ªæ–­è¨€ç»„åˆä½¿ç”¨</span>
        Assertions.assertNotNull(result, &amp;#<span class="hljs-number">34</span>;è¿”å›å€¼ä¸åº”ä¸º<span class="hljs-literal">null</span>&amp;#<span class="hljs-number">34</span>;);
        Assertions.assertFalse(result.isEmpty(), &amp;#<span class="hljs-number">34</span>;è¿”å›å€¼ä¸åº”ä¸ºç©ºå­—ç¬¦ä¸²&amp;#<span class="hljs-number">34</span>;);
        Assertions.assertTrue(result.length() &gt; <span class="hljs-number">3</span>, &amp;#<span class="hljs-number">34</span>;è¿”å›å€¼é•¿åº¦åº”å¤§äº<span class="hljs-number">3</span>&amp;#<span class="hljs-number">34</span>;);
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-13">ğŸ·ï¸ ç¬¬å››ç« ï¼šJUnitæ³¨è§£å¤§å…¨</h3>
<h4 data-id="heading-14">4.1 æ ¸å¿ƒæ³¨è§£é€ŸæŸ¥è¡¨</h4>



























































<table><thead><tr><th>æ³¨è§£</th><th>è¯´æ˜</th><th>ç”Ÿå‘½å‘¨æœŸ</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>@Test</code></td><td>æ ‡è®°æµ‹è¯•æ–¹æ³•</td><td>æµ‹è¯•æ–¹æ³•çº§</td><td><code>@Test void testMethod()</code></td></tr><tr><td><code>@ParameterizedTest</code></td><td>å‚æ•°åŒ–æµ‹è¯•</td><td>æµ‹è¯•æ–¹æ³•çº§</td><td>é…åˆ<code>@ValueSource</code>ä½¿ç”¨</td></tr><tr><td><code>@ValueSource</code></td><td>æä¾›æµ‹è¯•å‚æ•°</td><td>æ–¹æ³•å‚æ•°çº§</td><td><code>@ValueSource(strings = {&amp;#34;A&amp;#34;, &amp;#34;B&amp;#34;})</code></td></tr><tr><td><code>@DisplayName</code></td><td>è‡ªå®šä¹‰æ˜¾ç¤ºåç§°</td><td>ç±»/æ–¹æ³•çº§</td><td><code>@DisplayName(&amp;#34;ç”¨æˆ·æ³¨å†Œæµ‹è¯•&amp;#34;)</code></td></tr><tr><td><code>@BeforeEach</code></td><td>æ¯ä¸ªæµ‹è¯•å‰æ‰§è¡Œ</td><td>å®ä¾‹æ–¹æ³•</td><td>åˆå§‹åŒ–æµ‹è¯•æ•°æ®</td></tr><tr><td><code>@AfterEach</code></td><td>æ¯ä¸ªæµ‹è¯•åæ‰§è¡Œ</td><td>å®ä¾‹æ–¹æ³•</td><td>æ¸…ç†èµ„æº</td></tr><tr><td><code>@BeforeAll</code></td><td>æ‰€æœ‰æµ‹è¯•å‰æ‰§è¡Œ</td><td>é™æ€æ–¹æ³•</td><td>åˆå§‹åŒ–æ•°æ®åº“è¿æ¥</td></tr><tr><td><code>@AfterAll</code></td><td>æ‰€æœ‰æµ‹è¯•åæ‰§è¡Œ</td><td>é™æ€æ–¹æ³•</td><td>å…³é—­æ•°æ®åº“è¿æ¥</td></tr></tbody></table>
<h4 data-id="heading-15">4.2 æ³¨è§£å®æˆ˜ç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.junit.jupiter.api.*;
<span class="hljs-keyword">import</span> org.junit.jupiter.params.ParameterizedTest;
<span class="hljs-keyword">import</span> org.junit.jupiter.params.provider.ValueSource;

<span class="hljs-meta">@DisplayName(&amp;#34;ç”¨æˆ·æœåŠ¡å®Œæ•´æµ‹è¯•å¥—ä»¶&amp;#34;)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceCompleteTest</span> {
    
    <span class="hljs-keyword">private</span> UserService userService;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">testCounter</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    
    <span class="hljs-meta">@BeforeAll</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initAll</span><span class="hljs-params">()</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;ğŸš€ å¼€å§‹æ‰§è¡Œæ‰€æœ‰æµ‹è¯•...&amp;#<span class="hljs-number">34</span>;);
        <span class="hljs-comment">// åˆå§‹åŒ–å…¨å±€èµ„æºï¼Œå¦‚æ•°æ®åº“è¿æ¥æ± </span>
    }
    
    <span class="hljs-meta">@BeforeEach</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> {
        userService = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserService</span>();
        testCounter++;
        System.out.println(&amp;#<span class="hljs-number">34</span>;ğŸ“ å‡†å¤‡æ‰§è¡Œç¬¬ &amp;#<span class="hljs-number">34</span>; + testCounter + &amp;#<span class="hljs-number">34</span>; ä¸ªæµ‹è¯•&amp;#<span class="hljs-number">34</span>;);
    }
    
    <span class="hljs-meta">@Test</span>
    <span class="hljs-meta">@DisplayName(&amp;#34;æµ‹è¯•å¹´é¾„è®¡ç®— - æ­£å¸¸æƒ…å†µ&amp;#34;)</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetAgeNormal</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Integer</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> userService.getAge(&amp;#<span class="hljs-number">34</span>;<span class="hljs-number">100000200010011011</span>&amp;#<span class="hljs-number">34</span>;);
        Assertions.assertEquals(<span class="hljs-number">22</span>, age);
    }
    
    <span class="hljs-meta">@ParameterizedTest</span>
    <span class="hljs-meta">@ValueSource(strings = {
        &amp;#34;100000200010011011&amp;#34;,  // ç”·æ€§
        &amp;#34;100000200010021028&amp;#34;,  // å¥³æ€§
        &amp;#34;100000200010031013&amp;#34;   // ç”·æ€§
    })</span>
    <span class="hljs-meta">@DisplayName(&amp;#34;å‚æ•°åŒ–æµ‹è¯• - å¤šä¸ªèº«ä»½è¯å·éªŒè¯æ€§åˆ«&amp;#34;)</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGenderParameterized</span><span class="hljs-params">(String idCard)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">gender</span> <span class="hljs-operator">=</span> userService.getGender(idCard);
        Assertions.assertNotNull(gender);
        Assertions.assertTrue(gender.equals(&amp;#<span class="hljs-number">34</span>;ç”·&amp;#<span class="hljs-number">34</span>;) || gender.equals(&amp;#<span class="hljs-number">34</span>;å¥³&amp;#<span class="hljs-number">34</span>;));
    }
    
    <span class="hljs-meta">@Test</span>
    <span class="hljs-meta">@DisplayName(&amp;#34;è¾¹ç•Œæµ‹è¯• - æœ€å°å¹´é¾„&amp;#34;)</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testMinAgeBoundary</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æµ‹è¯•åˆšå‡ºç”Ÿçš„å©´å„¿</span>
        <span class="hljs-type">Integer</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> userService.getAge(&amp;#<span class="hljs-number">34</span>;<span class="hljs-number">202312310101010101</span>&amp;#<span class="hljs-number">34</span>;);
        Assertions.assertEquals(<span class="hljs-number">0</span>, age, &amp;#<span class="hljs-number">34</span>;å½“å¤©å‡ºç”Ÿå¹´é¾„åº”ä¸º<span class="hljs-number">0</span>&amp;#<span class="hljs-number">34</span>;);
    }
    
    <span class="hljs-meta">@AfterEach</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">tearDown</span><span class="hljs-params">()</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;âœ… ç¬¬ &amp;#<span class="hljs-number">34</span>; + testCounter + &amp;#<span class="hljs-number">34</span>; ä¸ªæµ‹è¯•æ‰§è¡Œå®Œæˆ&amp;#<span class="hljs-number">34</span>;);
        <span class="hljs-comment">// æ¸…ç†æµ‹è¯•æ•°æ®</span>
    }
    
    <span class="hljs-meta">@AfterAll</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">tearDownAll</span><span class="hljs-params">()</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;ğŸ‰ æ‰€æœ‰æµ‹è¯•æ‰§è¡Œå®Œæ¯•ï¼Œå…±æ‰§è¡Œ &amp;#<span class="hljs-number">34</span>; + testCounter + &amp;#<span class="hljs-number">34</span>; ä¸ªæµ‹è¯•&amp;#<span class="hljs-number">34</span>;);
        <span class="hljs-comment">// é‡Šæ”¾å…¨å±€èµ„æº</span>
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-16">ğŸ¢ ç¬¬äº”ç« ï¼šä¼ä¸šçº§å¼€å‘è§„èŒƒ</h3>
<h4 data-id="heading-17">5.1 æµ‹è¯•è¦†ç›–åŸåˆ™</h4>
<p><strong>é»„é‡‘æ³•åˆ™ï¼šå°½å¯èƒ½è¦†ç›–ä¸šåŠ¡æ–¹æ³•ä¸­çš„æ‰€æœ‰å¯èƒ½æƒ…å†µï¼Œç‰¹åˆ«æ˜¯è¾¹ç•Œå€¼ï¼</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PaymentServiceTest</span> {
    
    <span class="hljs-meta">@Test</span>
    <span class="hljs-meta">@DisplayName(&amp;#34;æ”¯ä»˜é‡‘é¢æµ‹è¯• - å…¨è¦†ç›–&amp;#34;)</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testPaymentAmount</span><span class="hljs-params">()</span> {
        <span class="hljs-type">PaymentService</span> <span class="hljs-variable">service</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PaymentService</span>();
        
        <span class="hljs-comment">// 1. æ­£å¸¸æƒ…å†µ</span>
        Assertions.assertTrue(service.validateAmount(<span class="hljs-number">100.0</span>));
        
        <span class="hljs-comment">// 2. è¾¹ç•Œå€¼ï¼šæœ€å°å€¼</span>
        Assertions.assertTrue(service.validateAmount(<span class="hljs-number">0.01</span>));
        
        <span class="hljs-comment">// 3. è¾¹ç•Œå€¼ï¼šæœ€å¤§å€¼</span>
        Assertions.assertTrue(service.validateAmount(<span class="hljs-number">999999.99</span>));
        
        <span class="hljs-comment">// 4. å¼‚å¸¸æƒ…å†µï¼šè´Ÿæ•°</span>
        Assertions.assertFalse(service.validateAmount(-<span class="hljs-number">100.0</span>));
        
        <span class="hljs-comment">// 5. å¼‚å¸¸æƒ…å†µï¼šè¶…è¿‡æœ€å¤§å€¼</span>
        Assertions.assertFalse(service.validateAmount(<span class="hljs-number">1000000.0</span>));
        
        <span class="hljs-comment">// 6. å¼‚å¸¸æƒ…å†µï¼šé›¶å€¼</span>
        Assertions.assertFalse(service.validateAmount(<span class="hljs-number">0.0</span>));
        
        <span class="hljs-comment">// 7. è¾¹ç•Œå€¼ï¼šæ­£å¥½ç­‰äºæœ€å¤§å€¼</span>
        Assertions.assertTrue(service.validateAmount(<span class="hljs-number">999999.99</span>));
    }
}
</code></pre>
<h4 data-id="heading-18">5.2 æµ‹è¯•é‡‘å­—å¡”ç­–ç•¥</h4>
<pre><code class="hljs language-scss" lang="scss">        ğŸª UIæµ‹è¯• (å°‘é‡)
         â†‘
    ğŸ¢ é›†æˆæµ‹è¯• (é€‚é‡)
         â†‘
ğŸ§ª å•å…ƒæµ‹è¯• (å¤§é‡åŸºç¡€)
</code></pre>
<p><strong>æ¨èæ¯”ä¾‹ï¼š70%å•å…ƒæµ‹è¯• + 20%é›†æˆæµ‹è¯• + 10%UIæµ‹è¯•</strong></p>
<h4 data-id="heading-19">5.3 æœ€ä½³å®è·µæ¸…å•</h4>
<p>âœ… <strong>ä¸€å®šè¦åšï¼š</strong></p>
<ul>
<li>æ¯ä¸ªpublicæ–¹æ³•éƒ½è¦æœ‰å¯¹åº”çš„æµ‹è¯•</li>
<li>æµ‹è¯•æ–¹æ³•åè¦æ¸…æ™°è¡¨è¾¾æµ‹è¯•æ„å›¾</li>
<li>ä½¿ç”¨<code>@DisplayName</code>æé«˜å¯è¯»æ€§</li>
<li>æµ‹è¯•æ•°æ®ä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»</li>
<li>å®šæœŸè¿è¡Œæµ‹è¯•å¥—ä»¶</li>
</ul>
<p>âŒ <strong>é¿å…ï¼š</strong></p>
<ul>
<li>åœ¨æµ‹è¯•ä¸­å†™ä¸šåŠ¡é€»è¾‘</li>
<li>æµ‹è¯•æ–¹æ³•ä¹‹é—´æœ‰ä¾èµ–</li>
<li>ä½¿ç”¨<code>System.out</code>ä»£æ›¿æ–­è¨€</li>
<li>å¿½ç•¥è¾¹ç•Œæ¡ä»¶æµ‹è¯•</li>
<li>æµ‹è¯•ä»£ç ä¸ç»´æŠ¤</li>
</ul>
<hr/>
<h3 data-id="heading-20">ğŸ“¦ ç¬¬å…­ç« ï¼šMavenä¾èµ–èŒƒå›´è¯¦è§£</h3>






























<table><thead><tr><th>èŒƒå›´</th><th>è¯´æ˜</th><th>ç¤ºä¾‹åœºæ™¯</th></tr></thead><tbody><tr><td><strong>compile</strong></td><td>é»˜è®¤èŒƒå›´ï¼Œç¼–è¯‘ã€æµ‹è¯•ã€è¿è¡Œéƒ½æœ‰æ•ˆ</td><td>é¡¹ç›®æ ¸å¿ƒä¾èµ–ï¼ˆå¦‚Spring Coreï¼‰</td></tr><tr><td><strong>test</strong></td><td>ä»…æµ‹è¯•é˜¶æ®µæœ‰æ•ˆï¼Œä¸ä¼šæ‰“åŒ…å‘å¸ƒ</td><td>JUnitã€Mockitoç­‰æµ‹è¯•æ¡†æ¶</td></tr><tr><td><strong>provided</strong></td><td>ç¼–è¯‘å’Œæµ‹è¯•æœ‰æ•ˆï¼Œè¿è¡Œæ—¶ç”±å®¹å™¨æä¾›</td><td>Servlet APIã€JSP API</td></tr><tr><td><strong>runtime</strong></td><td>è¿è¡Œå’Œæµ‹è¯•æœ‰æ•ˆï¼Œç¼–è¯‘æ—¶ä¸éœ€è¦</td><td>JDBCé©±åŠ¨ã€æ—¥å¿—å®ç°</td></tr></tbody></table>
<p><strong>JUnitæ­£ç¡®é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-xml" lang="xml">
    org.junit.jupiter
    junit-jupiter
    5.9.1
    test  

</code></pre>
<hr/>
<h3 data-id="heading-21">ğŸš€ ç¬¬ä¸ƒç« ï¼šé«˜çº§æŠ€å·§ä¸å®æˆ˜å»ºè®®</h3>
<h4 data-id="heading-22">7.1 å‚æ•°åŒ–æµ‹è¯•è¿›é˜¶</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@ParameterizedTest</span>
<span class="hljs-meta">@CsvSource({
    &amp;#34;100000200010011011, ç”·, 22&amp;#34;,
    &amp;#34;100000200010021028, å¥³, 22&amp;#34;, 
    &amp;#34;100000199010011011, ç”·, 33&amp;#34;
})</span>
<span class="hljs-meta">@DisplayName(&amp;#34;CSVæ•°æ®é©±åŠ¨æµ‹è¯•&amp;#34;)</span>
<span class="hljs-keyword">void</span> <span class="hljs-title function_">testUserWithCsv</span><span class="hljs-params">(String idCard, String expectedGender, <span class="hljs-type">int</span> expectedAge)</span> {
    <span class="hljs-type">UserService</span> <span class="hljs-variable">service</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserService</span>();
    
    Assertions.assertEquals(expectedGender, service.getGender(idCard));
    Assertions.assertEquals(expectedAge, service.getAge(idCard));
}
</code></pre>
<h4 data-id="heading-23">7.2 æµ‹è¯•ä»£ç ç»“æ„æ¨¡æ¿</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * ä¼ä¸šçº§æµ‹è¯•ç±»æ¨¡æ¿
 */</span>
<span class="hljs-meta">@DisplayName(&amp;#34;[ä¸šåŠ¡æ¨¡å—] - [åŠŸèƒ½]æµ‹è¯•&amp;#34;)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">StandardTestTemplate</span> {
    
    <span class="hljs-keyword">private</span> è¢«æµ‹è¯•ç±»å®ä¾‹;
    <span class="hljs-keyword">private</span> æ¨¡æ‹Ÿä¾èµ–å®ä¾‹;
    
    <span class="hljs-meta">@BeforeEach</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUp</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// 1. åˆå§‹åŒ–è¢«æµ‹è¯•å¯¹è±¡</span>
        <span class="hljs-comment">// 2. å‡†å¤‡æµ‹è¯•æ•°æ®</span>
        <span class="hljs-comment">// 3. è®¾ç½®æ¨¡æ‹Ÿè¡Œä¸º</span>
    }
    
    <span class="hljs-meta">@Test</span>
    <span class="hljs-meta">@DisplayName(&amp;#34;åœºæ™¯æè¿° - é¢„æœŸç»“æœ&amp;#34;)</span>
    <span class="hljs-keyword">void</span> æµ‹è¯•æ–¹æ³•å() {
        <span class="hljs-comment">// 1. Arrange: å‡†å¤‡æµ‹è¯•æ•°æ®</span>
        <span class="hljs-comment">// 2. Act: æ‰§è¡Œè¢«æµ‹è¯•æ–¹æ³•</span>
        <span class="hljs-comment">// 3. Assert: éªŒè¯ç»“æœ</span>
    }
    
    <span class="hljs-meta">@AfterEach</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">tearDown</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ¸…ç†èµ„æº</span>
    }
    
    <span class="hljs-meta">@Nested</span>
    <span class="hljs-meta">@DisplayName(&amp;#34;ç‰¹å®šåœºæ™¯åˆ†ç»„&amp;#34;)</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpecificScenarioTests</span> {
        <span class="hljs-comment">// åµŒå¥—æµ‹è¯•ç±»ï¼Œç”¨äºåˆ†ç»„ç›¸å…³æµ‹è¯•</span>
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-24">ğŸ“Š ç¬¬å…«ç« ï¼šæµ‹è¯•æŠ¥å‘Šä¸æŒç»­é›†æˆ</h3>
<h4 data-id="heading-25">8.1 ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š</h4>
<p>åœ¨Mavenä¸­è¿è¡Œæµ‹è¯•å¹¶ç”ŸæˆæŠ¥å‘Šï¼š</p>
<pre><code class="hljs language-bash" lang="bash">mvn <span class="hljs-built_in">test</span>  <span class="hljs-comment"># è¿è¡Œæµ‹è¯•</span>
mvn surefire-report:report  <span class="hljs-comment"># ç”ŸæˆHTMLæŠ¥å‘Š</span>
</code></pre>
<h4 data-id="heading-26">8.2 ä¸CI/CDé›†æˆ</h4>
<p>åœ¨<code>.gitlab-ci.yml</code>æˆ–<code>Jenkinsfile</code>ä¸­æ·»åŠ æµ‹è¯•é˜¶æ®µï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">test:</span>
  <span class="hljs-attr">stage:</span> <span class="hljs-string">test</span>
  <span class="hljs-attr">script:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">mvn</span> <span class="hljs-string">clean</span> <span class="hljs-string">test</span>
  <span class="hljs-attr">artifacts:</span>
    <span class="hljs-attr">paths:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">target/surefire-reports/</span>
    <span class="hljs-attr">expire_in:</span> <span class="hljs-number">1</span> <span class="hljs-string">week</span>
</code></pre>
<hr/>
<h3 data-id="heading-27">ğŸ“ æ€»ç»“</h3>
<p>é€šè¿‡å­¦ä¹ æœ¬æŒ‡å—ï¼Œä½ åº”è¯¥å·²ç»æŒæ¡äº†ï¼š</p>
<ol>
<li>âœ… <strong>åŸºç¡€æ¦‚å¿µ</strong>ï¼šJUnitçš„ä½œç”¨ã€ä¼˜åŠ¿ã€å‘½åè§„èŒƒ</li>
<li>âœ… <strong>æ ¸å¿ƒæŠ€èƒ½</strong>ï¼šæ–­è¨€çš„ä½¿ç”¨ã€å„ç§æ³¨è§£çš„åº”ç”¨</li>
<li>âœ… <strong>ä¼ä¸šå®è·µ</strong>ï¼šæµ‹è¯•è¦†ç›–åŸåˆ™ã€æœ€ä½³å®è·µ</li>
<li>âœ… <strong>é«˜çº§ç‰¹æ€§</strong>ï¼šå‚æ•°åŒ–æµ‹è¯•ã€ä¾èµ–ç®¡ç†</li>
</ol>
<p><strong>è®°ä½ï¼šå¥½çš„æµ‹è¯•ä¸æ˜¯è´Ÿæ‹…ï¼Œè€Œæ˜¯ä½ ä»£ç çš„ä¿é•–ï¼</strong> ğŸ›¡ï¸</p>
<p>æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹éƒ½æ˜¯å¯¹æœªæ¥ä¿®æ”¹çš„ä¸€ä»½ä¿é™©ï¼ŒæŠ•èµ„æ—¶é—´å†™æµ‹è¯•ï¼Œå°±æ˜¯æŠ•èµ„é¡¹ç›®çš„ç¨³å®šæ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ç°åœ¨ï¼Œå¼€å§‹ä¸ºä½ çš„é¡¹ç›®æ·»åŠ åšå®çš„æµ‹è¯•é˜²æŠ¤å§ï¼</p>
<hr/>
<p><strong>ğŸ“š å»¶ä¼¸å­¦ä¹ èµ„æºï¼š</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjunit.org%2Fjunit5%2Fdocs%2Fcurrent%2Fuser-guide%2F" target="_blank" title="https://junit.org/junit5/docs/current/user-guide/" ref="nofollow noopener noreferrer">JUnit 5å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fsite.mockito.org%2F" target="_blank" title="https://site.mockito.org/" ref="nofollow noopener noreferrer">Mockitoæ¡†æ¶</a> - æ¨¡æ‹Ÿå¯¹è±¡æµ‹è¯•</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftestcontainers.org%2F" target="_blank" title="https://testcontainers.org/" ref="nofollow noopener noreferrer">TestContainers</a> - é›†æˆæµ‹è¯•å®¹å™¨</li>
</ul>
<p><strong>ğŸ’¡ å°æç¤ºï¼š</strong>
å¼€å§‹ä¸€ä¸ªæ–°é¡¹ç›®æ—¶ï¼Œå»ºè®®å…ˆå†™æµ‹è¯•å†å†™å®ç°ï¼ˆTDDï¼‰ï¼Œè¿™èƒ½å¸®ä½ æ›´å¥½åœ°ç†æ¸…éœ€æ±‚å’Œè®¾è®¡æ¥å£ã€‚</p>
<hr/>
<p><em>æœ¬æ–‡åŸºäºJUnit 5ç¼–å†™ï¼Œé€‚ç”¨äºSpring Bootç­‰ç°ä»£Javaæ¡†æ¶å¼€å‘ã€‚ç¥æ‚¨æµ‹è¯•æ„‰å¿«ï¼</em> ğŸ§ªâœ¨</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[.NETè¿›é˜¶â€”â€”æ·±å…¥ç†è§£å§”æ‰˜ï¼ˆ2ï¼‰åµŒå¥—å§”æ‰˜ï¼šæ‰‹å†™ä¸­é—´ä»¶æ¡†æ¶]]></title>    <link>https://juejin.cn/post/7582048028392538162</link>    <guid>https://juejin.cn/post/7582048028392538162</guid>    <pubDate>2025-12-10T11:07:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582048028392538162" data-draft-id="7581893894175227914" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=".NETè¿›é˜¶â€”â€”æ·±å…¥ç†è§£å§”æ‰˜ï¼ˆ2ï¼‰åµŒå¥—å§”æ‰˜ï¼šæ‰‹å†™ä¸­é—´ä»¶æ¡†æ¶"/> <meta itemprop="keywords" content=".NET"/> <meta itemprop="datePublished" content="2025-12-10T11:07:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘è¦æ‹¿å¾®è½¯MVP"/> <meta itemprop="url" content="https://juejin.cn/user/1945461219656633"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            .NETè¿›é˜¶â€”â€”æ·±å…¥ç†è§£å§”æ‰˜ï¼ˆ2ï¼‰åµŒå¥—å§”æ‰˜ï¼šæ‰‹å†™ä¸­é—´ä»¶æ¡†æ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1945461219656633/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘è¦æ‹¿å¾®è½¯MVP
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T11:07:39.000Z" title="Wed Dec 10 2025 11:07:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‰æ™¯æè¦</h2>
<p>åœ¨ä¸Šæ–‡æˆ‘ä»¬å·²ç»å…¥é—¨äº†å§”æ‰˜ï¼š<a href="https://juejin.cn/post/7581666412022022153" target="_blank" title="https://juejin.cn/post/7581666412022022153">.NETè¿›é˜¶â€”â€”æ·±å…¥ç†è§£å§”æ‰˜ï¼ˆ1ï¼‰å§”æ‰˜å…¥é—¨ä¸€ã€ä»€ä¹ˆæ˜¯å§”æ‰˜ å§”æ‰˜å°±ç›¸å½“äºæ˜¯ä¸€ä¸ªå¯ä»¥å­˜æ”¾æ–¹æ³•çš„ç®±å­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªâ€œç®±å­â€ - æ˜é‡‘</a>ï¼Œç°åœ¨åˆ©ç”¨å§”æ‰˜ï¼Œæˆ‘ä»¬æ¥ç©ç‚¹é«˜çº§çš„ä¸œè¥¿ã€‚</p>
<h3 data-id="heading-1">1.1 ä»€ä¹ˆæ˜¯ä¸­é—´ä»¶</h3>
<p>å­¦è¿‡ASP .NET Coreçš„åŒå­¦åº”è¯¥å¯¹ä¸­é—´ä»¶æœ‰æ‰€äº†è§£ï¼Œè¿™é‡Œå†ç®€å•çš„ä»‹ç»ä¸€ä¸‹ï¼š</p>
<p>ä¸­é—´ä»¶æ˜¯ä¸€ä¸ª<strong>å¤„ç†é“¾æ¡</strong>ï¼ˆPipelineï¼‰ï¼Œè¯·æ±‚ä»ä¸Šä¸€ä¸ªä¸­é—´ä»¶æµåˆ°ä¸‹ä¸€ä¸ªï¼Œç›´åˆ°æ ¸å¿ƒä¸šåŠ¡ï¼›å“åº”å†ä»æ ¸å¿ƒä¸šåŠ¡æµå›å„ä¸ªä¸­é—´ä»¶ï¼Œæœ€ç»ˆè¿”å›ç»™ç”¨æˆ·ã€‚å°±åƒå¿«é€’æµç¨‹ï¼šå•†å®¶ â†’ å¿«é€’å‘˜ â†’ é©¿ç«™ â†’ ä½ ï¼ˆè¯·æ±‚æ–¹å‘ï¼‰ï¼›ä½ é€€è´§ â†’ é©¿ç«™ â†’ å¿«é€’å‘˜ â†’ å•†å®¶ï¼ˆå“åº”æ–¹å‘ï¼‰ã€‚</p>
<p>ç”¨ASP .NET Coreä¸¾ä¾‹å­,ä¸€ä¸ªè¯·æ±‚ä¼šæŒ‰ã€Œæ³¨å†Œé¡ºåºã€ä¾æ¬¡ç»è¿‡æ¯ä¸ªä¸­é—´ä»¶çš„<strong>å‰ç½®é€»è¾‘</strong>ï¼›å½“æ ¸å¿ƒä¸šåŠ¡ï¼ˆè·¯ç”±ä¸­é—´ä»¶ï¼‰å¤„ç†å®Œè¯·æ±‚åï¼Œå“åº”ä¼šæŒ‰ã€Œæ³¨å†Œé¡ºåºçš„åå‘ã€ä¾æ¬¡ç»è¿‡æ¯ä¸ªä¸­é—´ä»¶çš„<strong>åç½®é€»è¾‘</strong>ã€‚å‡è®¾æˆ‘å‘èµ·äº†ä¸€ä¸ªè¯·æ±‚ï¼Œå„ä¸ªé˜¶æ®µçš„è·¯çº¿åˆ†åˆ«æ˜¯è¿™æ ·çš„ï¼š</p>
<p>è¯·æ±‚ï¼š<code>å¼‚å¸¸ä¸­é—´ä»¶</code>Â â†’Â <code>æ—¥å¿—ä¸­é—´ä»¶</code>Â â†’Â <code>è·¨åŸŸä¸­é—´ä»¶</code>Â â†’Â <code>è®¤è¯ä¸­é—´ä»¶</code>Â â†’Â <code>è·¯ç”±ä¸­é—´ä»¶</code>-&gt;<code>æ ¸å¿ƒä¸šåŠ¡</code>(é¡ºåºï¼‰</p>
<p>å“åº”ï¼š<code>æ ¸å¿ƒä¸šåŠ¡</code>â†’Â <code>è·¯ç”±ä¸­é—´ä»¶</code>Â â†’Â <code>è®¤è¯ä¸­é—´ä»¶</code>â†’Â <code>è·¨åŸŸä¸­é—´ä»¶</code>Â â†’Â <code>æ—¥å¿—ä¸­é—´ä»¶</code>-&gt;<code>å¼‚å¸¸ä¸­é—´ä»¶</code>ï¼ˆé€†åºï¼‰</p>





















<table><thead><tr><th>é˜¶æ®µ</th><th>æ‰§è¡Œé¡ºåº &amp; å…·ä½“é€»è¾‘</th></tr></thead><tbody><tr><td><strong>è¯·æ±‚é˜¶æ®µ</strong>ï¼ˆé¡ºè¡Œï¼‰</td><td>1. å¼‚å¸¸ä¸­é—´ä»¶å‰ç½®é€»è¾‘ â†’ æ— æ“ä½œï¼ˆä»…å‡†å¤‡æ•è·å¼‚å¸¸ï¼‰2. æ—¥å¿—ä¸­é—´ä»¶å‰ç½®é€»è¾‘ â†’ è®°å½• â€œè°åœ¨ä»€ä¹ˆæ—¶å€™å‘äº†ä»€ä¹ˆè¯·æ±‚â€3. è·¨åŸŸä¸­é—´ä»¶å‰ç½®é€»è¾‘ â†’ æ£€æŸ¥è·¨åŸŸè¯·æ±‚ï¼Œè®¾ç½®é¢„æ£€å“åº”å¤´4. è®¤è¯ä¸­é—´ä»¶å‰ç½®é€»è¾‘ â†’ æ£€æŸ¥ç™»å½•çŠ¶æ€ï¼ˆå·²ç™»å½•ï¼Œæ”¾è¡Œï¼‰5. è·¯ç”±ä¸­é—´ä»¶å‰ç½®é€»è¾‘ â†’ è½¬å‘è¯·æ±‚åˆ° â€œæŸ¥è¯¢ç”¨æˆ·æ•°æ®â€ æ ¸å¿ƒæ¥å£ï¼ˆæ‰§è¡Œæ ¸å¿ƒä¸šåŠ¡ï¼‰</td></tr><tr><td><strong>æ ¸å¿ƒä¸šåŠ¡</strong></td><td>è·¯ç”±ä¸­é—´ä»¶æ‰§è¡Œæ ¸å¿ƒé€»è¾‘ï¼šæŸ¥è¯¢ç”¨æˆ·æ•°æ®ï¼Œç”Ÿæˆå“åº”å†…å®¹ï¼ˆæ— å¼‚å¸¸ï¼‰</td></tr><tr><td><strong>å“åº”é˜¶æ®µ</strong>ï¼ˆé€†è¡Œï¼‰</td><td>1. è®¤è¯ä¸­é—´ä»¶åç½®é€»è¾‘ â†’ æ— æ“ä½œï¼ˆè‹¥æœ‰éœ€è¦å¯è¡¥å……å“åº”å¤´ï¼‰2. è·¨åŸŸä¸­é—´ä»¶åç½®é€»è¾‘ â†’ è¡¥å……è·¨åŸŸå“åº”å¤´ï¼ˆå¦‚ Access-Control-Allow-Originï¼‰3. æ—¥å¿—ä¸­é—´ä»¶åç½®é€»è¾‘ â†’ è®°å½• â€œè¯·æ±‚å¤„ç†å®Œæˆï¼Œå“åº”çŠ¶æ€ç  / è€—æ—¶â€4. å¼‚å¸¸ä¸­é—´ä»¶åç½®é€»è¾‘ â†’ æ— æ“ä½œï¼ˆæ— å¼‚å¸¸ï¼‰5. å“åº”æœ€ç»ˆè¿”å›ç»™å‰ç«¯</td></tr></tbody></table>
<p>ç®€å•è¯´å°±æ˜¯<strong>è¯·æ±‚é¡ºè¡Œï¼Œå“åº”é€†è¡Œ</strong>ã€‚</p>
<p>ä¸ºä»€ä¹ˆä¸­é—´ä»¶ä¼šæœ‰è¿™æ ·<strong>è¯·æ±‚é¡ºè¡Œï¼Œå“åº”é€†è¡Œ</strong>ç¥å¥‡çš„åŠŸèƒ½å‘¢ï¼Ÿæˆ‘ä»¬æ¥ä¸‹æ¥åˆ©ç”¨å§”æ‰˜æ‰‹æ“ä¸€ä¸ªå’±ä»¬è‡ªå·±çš„ä¸­é—´ä»¶æ¡†æ¶ï¼Œçœ‹å®Œä½ å°±æ˜ç™½ä¸ºä»€ä¹ˆä¸­é—´ä»¶çš„æ‰§è¡Œé¡ºåºæ˜¯è¿™æ ·çš„ã€‚</p>
<h2 data-id="heading-2">äºŒã€æ‰‹æ“ä¸­é—´ä»¶æ¡†æ¶</h2>
<h3 data-id="heading-3">2.1 æ¡†æ¶å‡†å¤‡</h3>
<p>é¦–å…ˆæˆ‘å‡†å¤‡äº†ä¸€ä¸ªç±»ï¼Œåä¸º<code>MethodInfo</code>ï¼Œå†…éƒ¨æœ‰ä¸€ä¸ªæ ¸å¿ƒæ–¹æ³•<code>Show</code>ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ª<code>CustomContext</code>å¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ª<code>CustomContext</code>å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-cs" lang="cs">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MethodInfo</span>
    {
        <span class="hljs-function"><span class="hljs-keyword">public</span> CustomContext <span class="hljs-title">Show</span>(<span class="hljs-params">CustomContext context</span>)</span>
        {
            Console.WriteLine(&amp;<span class="hljs-meta">#34;è¿™é‡Œæ‰§è¡Œäº†ä¸€ä¸ªæ–¹æ³•çš„æ ¸å¿ƒå†…å®¹ï¼ï¼ï¼&amp;#34;);</span>
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> CustomContext();
        }
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CustomContext</span>
    {

    }
</code></pre>
<p>ä¸ºä»€ä¹ˆÂ <code>Show</code>Â æ–¹æ³•è¦æ¥æ”¶Â <code>CustomContext</code>Â è¿™æ ·ä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡å‘¢ï¼Ÿ<strong>ä¸­é—´ä»¶æ¡†æ¶çš„æ ¸å¿ƒè®¾è®¡æ€æƒ³ï¼šç”¨ä¸€ä¸ªã€Œç»Ÿä¸€çš„ä¸Šä¸‹æ–‡å¯¹è±¡ã€è´¯ç©¿æ•´ä¸ªè¯·æ±‚ / å“åº”é“¾æ¡ï¼Œå®ç°æ•°æ®å…±äº«ã€çŠ¶æ€ä¼ é€’ã€æ“ä½œç»Ÿä¸€</strong>â€”â€” è¿™å’ŒÂ ASP.NET Core çš„Â <code>HttpContext</code>æ˜¯å®Œå…¨ä¸€è‡´çš„è®¾è®¡é€»è¾‘ã€‚</p>
<p>å‡è®¾Â <code>Show</code>Â æ–¹æ³•æ˜¯ä¸­é—´ä»¶ç®¡é“ä¸­çš„ä¸€ä¸ªç¯èŠ‚ï¼Œè‹¥ä¸ç”¨Â <code>CustomContext</code>ï¼Œè€Œæ˜¯ä¼ é›¶æ•£å‚æ•°ï¼ˆæ¯”å¦‚Â <code>token</code>ã€<code>requestPath</code>ã€<code>statusCode</code>ï¼‰ï¼Œä¼šå‡ºç°è¿™äº›è‡´å‘½é—®é¢˜ï¼š</p>
<ol>
<li><strong>å‚æ•°çˆ†ç‚¸</strong>ï¼šä¸­é—´ä»¶éœ€è¦çš„ä¿¡æ¯è¶Šå¤šï¼ˆè¯·æ±‚å¤´ã€ç”¨æˆ·ä¿¡æ¯ã€å“åº”çŠ¶æ€ã€ä¸´æ—¶æ•°æ®ï¼‰ï¼Œæ–¹æ³•å‚æ•°å°±è¶Šå¤šï¼ˆæ¯”å¦‚Â <code>Show(string token, string path, int code, ...)</code>ï¼‰ï¼Œç»´æŠ¤æˆæœ¬æé«˜ï¼›</li>
<li><strong>çŠ¶æ€æ— æ³•ä¼ é€’</strong>ï¼šå‰ä¸€ä¸ªä¸­é—´ä»¶ï¼ˆæ¯”å¦‚è®¤è¯ä¸­é—´ä»¶ï¼‰éªŒè¯çš„ â€œç”¨æˆ·æ˜¯å¦ç™»å½•â€ çŠ¶æ€ï¼Œæ— æ³•é«˜æ•ˆä¼ é€’ç»™åä¸€ä¸ªä¸­é—´ä»¶ï¼ˆæ¯”å¦‚ä½ çš„Â <code>Show</code>Â æ–¹æ³•ï¼‰ï¼Œåªèƒ½é€šè¿‡è¿”å›å€¼å±‚å±‚ä¼ é€’ï¼Œé“¾æ¡é•¿äº†ä¼šä¹±æˆä¸€å›¢ï¼›</li>
<li><strong>æ— æ³•ç»Ÿä¸€ä¿®æ”¹</strong>ï¼šåä¸€ä¸ªä¸­é—´ä»¶ä¿®æ”¹çš„ â€œå“åº”å†…å®¹â€ï¼Œæ— æ³•è®©å‰ä¸€ä¸ªä¸­é—´ä»¶ï¼ˆæ¯”å¦‚æ—¥å¿—ä¸­é—´ä»¶ï¼‰æ„ŸçŸ¥åˆ°ï¼Œæ¯”å¦‚Â <code>Show</code>Â æ–¹æ³•è¿”å›äº†é”™è¯¯ä¿¡æ¯ï¼Œæ—¥å¿—ä¸­é—´ä»¶æ— æ³•çŸ¥é“ï¼›</li>
<li><strong>ç®¡é“æ— æ³•ç»Ÿä¸€è°ƒåº¦</strong>ï¼šä¸­é—´ä»¶æ¡†æ¶éœ€è¦ç»Ÿä¸€è°ƒç”¨æ‰€æœ‰ä¸­é—´ä»¶ï¼ˆæ¯”å¦‚Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fasp.net%2F" target="_blank" title="https://asp.net/" ref="nofollow noopener noreferrer">ASP.NET</a>Â Core çš„Â <code>RequestDelegate</code>Â å§”æ‰˜ï¼‰ï¼Œè‹¥æ¯ä¸ªä¸­é—´ä»¶çš„å‚æ•°éƒ½ä¸ä¸€æ ·ï¼Œæ¡†æ¶æ— æ³•è®¾è®¡ç»Ÿä¸€çš„è°ƒç”¨é€»è¾‘ã€‚</li>
</ol>
<ul>
<li>
<p><strong>çœŸå®æ¡†æ¶ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fasp.net%2F" target="_blank" title="https://asp.net/" ref="nofollow noopener noreferrer">ASP.NET</a>Â Coreï¼‰</strong> ï¼š<code>HttpContext</code>Â åŒ…å«ï¼š</p>
<ul>
<li><code>Request</code>ï¼šURLã€è¯·æ±‚å¤´ã€Query å‚æ•°ã€è¯·æ±‚ä½“ã€å®¢æˆ·ç«¯ IP ç­‰ï¼›</li>
<li><code>Response</code>ï¼šå“åº”çŠ¶æ€ç ã€å“åº”å¤´ã€å“åº”ä½“ã€Cookie ç­‰ï¼›</li>
<li><code>User</code>ï¼šè®¤è¯åçš„ç”¨æˆ·ä¿¡æ¯ï¼ˆè§’è‰²ã€æƒé™ï¼‰ï¼›</li>
<li><code>Items</code>ï¼šä¸­é—´ä»¶é—´ä¸´æ—¶å…±äº«çš„é”®å€¼å¯¹ï¼ˆæ¯”å¦‚ â€œè¯·æ±‚å¼€å§‹æ—¶é—´â€â€œé™æµè®¡æ•°â€ï¼‰ï¼›</li>
<li><code>Connection</code>ï¼šTCP è¿æ¥ä¿¡æ¯ï¼ˆç«¯å£ã€åè®®ï¼‰ã€‚æ‰€æœ‰ä¸­é—´ä»¶éƒ½é€šè¿‡Â <code>HttpContext</code>Â è®¿é—®è¿™äº›æ•°æ®ï¼Œä¸ç”¨ä¼ ä¸€å †é›¶æ•£å‚æ•°ã€‚</li>
</ul>
</li>
<li>
<p><strong>CustomContextï¼ˆæ‰©å±•åï¼‰</strong> ï¼š<code>CustomContext</code>Â è™½ç„¶ç°åœ¨æ˜¯ç©ºçš„ï¼Œä½†å®é™…åœºæ™¯ä¸­ä¼šæ‰©å±•å‡ºæ ¸å¿ƒå­—æ®µï¼š</p>
<pre><code class="hljs language-cs" lang="cs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CustomContext</span>
{
    <span class="hljs-comment">// è¯·æ±‚ç›¸å…³</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> RequestPath { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } <span class="hljs-comment">// æ¯”å¦‚ /user</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Token { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }       <span class="hljs-comment">// è®¤è¯Token</span>
    <span class="hljs-comment">// å“åº”ç›¸å…³</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> StatusCode { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-number">200</span>; <span class="hljs-comment">// å“åº”çŠ¶æ€ç </span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> ResponseContent { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } <span class="hljs-comment">// å“åº”å†…å®¹</span>
    <span class="hljs-comment">// å…±äº«çŠ¶æ€</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> IsAuthenticated { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } <span class="hljs-comment">// æ˜¯å¦ç™»å½•</span>
    <span class="hljs-keyword">public</span> DateTime RequestStartTime { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } <span class="hljs-comment">// è¯·æ±‚å¼€å§‹æ—¶é—´</span>
}
</code></pre>
<p>ä¸ºäº†ç®€åŒ–ç†è§£ä¸­é—´ä»¶çš„æ¡†æ¶ï¼Œæˆ‘ä»¬è¿™é‡Œå°±æš‚ä¸”å…ˆç”¨ç©ºçš„<code>CustomContext</code>ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚</p>
</li>
</ul>
<h3 data-id="heading-4">2.2 åˆæœŸæ¡†æ¶</h3>
<p>æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæ­¤æ—¶ï¼Œæˆ‘è¦åœ¨è¿™ä¸ªæ ¸å¿ƒæ–¹æ³•æ‰§è¡Œå‰åŠ ä¸€ä¸ªæ ¡éªŒç™»å½•çš„æ–¹æ³•ï¼Œå¹¶ä¸”å†æ‰§è¡Œåå†æ·»åŠ ä¸€ä¸ªæ ¡éªŒç™»å½•çš„æ–¹æ³•ï¼Œè¿˜ä¸å¯ä»¥ä¿®æ”¹æ ¸å¿ƒä»£ç ï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆåŠï¼Ÿ</p>
<p>è¿™æ—¶å€™å°±è¦ç”¨åˆ°æˆ‘ä»¬çš„<code>å§”æ‰˜</code>äº†ï¼Œåˆ«å¿˜äº†å§”æ‰˜çš„ä»€ä¹ˆï¼Œ<code>å§”æ‰˜å°±æ˜¯ä¸€ä¸ªå­˜å‚¨æ–¹æ³•çš„ç›’å­</code>ï¼Œæˆ‘ä»¬å†è¿™ä¸ªç›’å­å†…éƒ¨ï¼Œåƒå¤¹å¿ƒé¥¼å¹²ä¸€æ ·çš„ï¼Œåˆ›å»ºä¸¤ä¸ªæ–¹æ³•ï¼ŒæŠŠæˆ‘ä»¬çš„æ ¸å¿ƒä»£ç åŒ…è£¹èµ·æ¥ï¼Œä¸€ä¸ªæ”¾åœ¨æ ¸å¿ƒä»£ç ä¹‹å‰ï¼Œä¸€ä¸ªæ”¾åœ¨æ ¸å¿ƒä»£ç ä¹‹åï¼Œè¿™æ ·å°±å¯ä»¥å®ç°ä¸ä¿®æ”¹æ ¸å¿ƒä»£ç ï¼Œå¹¶ä¸”å¯ä»¥æ·»åŠ åŠŸèƒ½çš„æ•ˆæœäº†~</p>
<pre><code class="hljs language-cs" lang="cs">         MethodInfo invokeInfo = <span class="hljs-keyword">new</span> MethodInfo();

         CustomContext context = <span class="hljs-keyword">new</span> CustomContext();

         Func func = <span class="hljs-keyword">new</span> Func(invokeInfo.Show);
</code></pre>
<p>å†™åˆ°è¿™ä¸€æ­¥åˆå‘ç°äº†é—®é¢˜ï¼š</p>
<ul>
<li><code>funcå§”æ‰˜</code>è™½ç„¶å¯ä»¥åˆ©ç”¨<code>+=</code>æ“ä½œå¾€åæ·»åŠ å…¶ä»–çš„æ–¹æ³•ï¼Œä½†æ˜¯æ— æ³•åœ¨æ ¸å¿ƒå‡½æ•°ä¹‹å‰æ·»åŠ ï¼Œåªèƒ½å¾€åè¿½åŠ </li>
<li>è¿½åŠ çš„å‡½æ•°ä¸€å®šè¦è·Ÿæ ¸å¿ƒå‡½æ•°ä¸€æ ·ï¼Œæ¥æ”¶<code>CustomContextå¯¹è±¡</code>ï¼Œè¿”å›<code>CustomContextå¯¹è±¡</code></li>
<li/>
</ul>
<p>å¦‚æœä¸ç¬¦åˆä¸Šè¿°çš„æƒ…å†µï¼Œå°±æ— æ³•éšä¾¿å¾€åè¿½åŠ ï¼Œæ‰€ä»¥ç›´æ¥ç”¨<code>+=</code>å¤šæ’­å§”æ‰˜çš„æ–¹å¼æ˜¾ç„¶è¡Œä¸é€šï¼Œé‚£æ€ä¹ˆåŠï¼Ÿ</p>
<h3 data-id="heading-5">2.3 é«˜çº§å§”æ‰˜ï¼šå§”æ‰˜çš„å§”æ‰˜</h3>
<p>ä¸å¦¨æ¢ä¸€ä¸ªæ€è·¯ï¼Œå¦‚æœæˆ‘æŠŠè¿™ä¸ªåŸæ¥çš„funcå§”æ‰˜<code>ä¿®æ”¹</code>äº†å‘¢ï¼Ÿ</p>
<p>æ—¢ç„¶ä¸è®©æˆ‘å¾€åè¿½åŠ ï¼Œæˆ‘è‡ªå·±æŠŠ<code>funcå§”æ‰˜</code>æ‹¿åˆ°ï¼Œç„¶ååœ¨è¿™ä¸ª<code>funcå§”æ‰˜</code>å‰åŠ ä¸ªå‡½æ•°ï¼Œåœ¨<code>funcå§”æ‰˜</code>åå†åŠ ä¸€ä¸ªå‡½æ•°ï¼Œä¸å°±è¡Œäº†å—ï¼Ÿ</p>
<p>é—®é¢˜æ˜¯æˆ‘ä»¬è¦å¦‚ä½•æ‹¿åˆ°è¿™ä¸ª<code>funcå§”æ‰˜</code>ï¼Œæœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•ï¼Œèƒ½æŠŠ<strong>ç°åœ¨çš„funcå§”æ‰˜ä¼ è¿›å»ï¼Œç„¶åå†æŠŠæ–°çš„åŠ å·¥è¿‡çš„funcå§”æ‰˜è¿”å›æ¥çš„æ–¹æ³•å‘¢ï¼Ÿ</strong></p>
<p>è¿™æ—¶å€™å°±è¦ç”¨åˆ°æˆ‘ä»¬çš„é«˜çº§å§”æ‰˜äº†</p>
<pre><code class="hljs language-cs" lang="cs"><span class="hljs-comment">// åˆ›å»ºæ ¸å¿ƒæ–¹æ³•çš„å®ä¾‹</span>
MethodInfo invokeInfo = <span class="hljs-keyword">new</span> MethodInfo();

<span class="hljs-comment">// åˆ›å»ºä¸Šä¸‹æ–‡</span>
CustomContext context = <span class="hljs-keyword">new</span> CustomContext();

<span class="hljs-comment">// åˆ›å»ºåˆçº§å§”æ‰˜ï¼Œæ¥æ”¶ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œè¿”å›ä¸Šä¸‹æ–‡å¯¹è±¡</span>
Func func = <span class="hljs-keyword">new</span> Func(invokeInfo.Show);

<span class="hljs-comment">// å®šä¹‰ä¸­é—´ä»¶1ï¼šæ¥æ”¶â€œä¸‹ä¸€ä¸ªç¯èŠ‚çš„å§”æ‰˜â€ï¼Œè¿”å›â€œåŒ…è£…åçš„å§”æ‰˜â€</span>
Func, Func&gt; middleWare1 =
    <span class="hljs-keyword">new</span> Func, Func&gt;(next =&gt;
    {
        <span class="hljs-comment">// ä¸­é—´ä»¶çš„æ ¸å¿ƒï¼šè¿”å›ä¸€ä¸ªâ€œåŒ…è£…åçš„å§”æ‰˜â€ï¼ˆåŒ…å«å‰ç½®+åç½®é€»è¾‘ï¼‰</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Func(context =&gt;
        {
            <span class="hljs-comment">// 1. å‰ç½®æ–¹æ³•ï¼šè¯·æ±‚è¿›å…¥ä¸­é—´ä»¶æ—¶æ‰§è¡Œï¼ˆå¯¹åº” ASP.NET Core await next() ä¹‹å‰ï¼‰</span>
            Console.WriteLine(&amp;<span class="hljs-meta">#34;æ‰§è¡Œä¸­é—´ä»¶1çš„å‰ç½®æ–¹æ³•&amp;#34;);</span>
            
            <span class="hljs-comment">// 2. è°ƒç”¨â€œä¸‹ä¸€ä¸ªç¯èŠ‚â€ï¼ˆæ ¸å¿ƒä¸šåŠ¡/ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼‰ï¼Œå¹¶ä¼ é€’ä¸Šä¸‹æ–‡</span>
            CustomContext resultContext = next.Invoke(context);
            
            <span class="hljs-comment">// 3. åç½®æ–¹æ³•ï¼šä¸‹ä¸€ä¸ªç¯èŠ‚æ‰§è¡Œå®Œæˆåæ‰§è¡Œï¼ˆå¯¹åº” ASP.NET Core await next() ä¹‹åï¼‰</span>
            Console.WriteLine(&amp;<span class="hljs-meta">#34;æˆ‘æ˜¯ä¸­é—´ä»¶1çš„åç½®æ–¹æ³•&amp;#34;);</span>
            
            <span class="hljs-comment">// 4. è¿”å›å¤„ç†åçš„ä¸Šä¸‹æ–‡</span>
            <span class="hljs-keyword">return</span> resultContext;
        });
    });
</code></pre>
<p>è¿™é‡Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ª<code>middleWare1</code>çš„é«˜çº§å§”æ‰˜ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ª<code>Func</code>çš„ä½çº§å§”æ‰˜ï¼Œè¿”å›ä¸€ä¸ª<code>Func</code>çš„ä½çº§å§”æ‰˜ï¼Œè¿™ä¸ªä½çº§å§”æ‰˜å…¶å®å°±æ˜¯æˆ‘ä»¬ä¸Šé¢è¯´çš„<code>func</code>å§”æ‰˜ï¼Œç°åœ¨æˆ‘ä»¬å°±å¯ä»¥æŠŠ<code>func</code>å§”æ‰˜ä¼ è¿›å»ï¼Œç„¶åè®©<code>middleWare</code>ç»™æˆ‘ä»¬ç”Ÿæˆä¸€ä¸ªæ–°çš„å§”æ‰˜äº†ã€‚</p>
<p><strong>å¦‚ä½•æŠŠ<code>func</code>å§”æ‰˜ä¼ è¿›å»ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„å§”æ‰˜å‘¢ï¼Ÿ</strong></p>
<pre><code class="hljs language-cs" lang="cs">next =&gt;
    {
        <span class="hljs-comment">// ä¸­é—´ä»¶çš„æ ¸å¿ƒï¼šè¿”å›ä¸€ä¸ªâ€œåŒ…è£…åçš„å§”æ‰˜â€ï¼ˆåŒ…å«å‰ç½®+åç½®é€»è¾‘ï¼‰</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Func(context =&gt;
        {
            <span class="hljs-comment">// 1. å‰ç½®æ–¹æ³•ï¼šè¯·æ±‚è¿›å…¥ä¸­é—´ä»¶æ—¶æ‰§è¡Œï¼ˆå¯¹åº” ASP.NET Core await next() ä¹‹å‰ï¼‰</span>
            Console.WriteLine(&amp;<span class="hljs-meta">#34;æ‰§è¡Œä¸­ é—´ä»¶1çš„å‰ç½®æ–¹æ³•&amp;#34;);</span>
            
            <span class="hljs-comment">// 2. è°ƒç”¨â€œä¸‹ä¸€ä¸ªç¯èŠ‚â€ï¼ˆæ ¸å¿ƒä¸šåŠ¡/ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼‰ï¼Œå¹¶ä¼ é€’ä¸Šä¸‹æ–‡</span>
            CustomContext resultContext = next.Invoke(context);
            
            <span class="hljs-comment">// 3. åç½®æ–¹æ³•ï¼šä¸‹ä¸€ä¸ªç¯èŠ‚æ‰§è¡Œå®Œæˆåæ‰§è¡Œï¼ˆå¯¹åº” ASP.NET Core await next() ä¹‹åï¼‰</span>
            Console.WriteLine(&amp;<span class="hljs-meta">#34;æˆ‘æ˜¯ä¸­é—´ä»¶1çš„åç½®æ–¹æ³•&amp;#34;);</span>
            
            <span class="hljs-comment">// 4. è¿”å›å¤„ç†åçš„ä¸Šä¸‹æ–‡</span>
            <span class="hljs-keyword">return</span> resultContext;
        });
    }
</code></pre>
<p>æ³¨æ„çœ‹æˆ‘è¿™é‡Œç”¨äº†ä¸€ä¸ªLamadeè¡¨è¾¾å¼ï¼Œå®ƒå°†æ¥æ”¶çš„å§”æ‰˜<code>next</code>å˜æˆä¸€ä¸ªæ–°çš„å¼å­å§”æ‰˜ï¼š<code>return new Func(context =&gt;</code>è¿™ä¸ªæ–°çš„å§”æ‰˜å¯ä»¥ä»ä»£ç çœ‹å‡º:</p>
<pre><code class="hljs language-cs" lang="cs"><span class="hljs-keyword">new</span> Func(context =&gt;
        {
            <span class="hljs-comment">// 1. å‰ç½®æ–¹æ³•ï¼šè¯·æ±‚è¿›å…¥ä¸­é—´ä»¶æ—¶æ‰§è¡Œï¼ˆå¯¹åº” ASP.NET Core await next() ä¹‹å‰ï¼‰</span>
            Console.WriteLine(&amp;<span class="hljs-meta">#34;æ‰§è¡Œä¸­ é—´ä»¶1çš„å‰ç½®æ–¹æ³•&amp;#34;);</span>
            
            <span class="hljs-comment">// 2. è°ƒç”¨â€œä¸‹ä¸€ä¸ªç¯èŠ‚â€ï¼ˆæ ¸å¿ƒä¸šåŠ¡/ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼‰ï¼Œå¹¶ä¼ é€’ä¸Šä¸‹æ–‡</span>
            CustomContext resultContext = next.Invoke(context);
            
            <span class="hljs-comment">// 3. åç½®æ–¹æ³•ï¼šä¸‹ä¸€ä¸ªç¯èŠ‚æ‰§è¡Œå®Œæˆåæ‰§è¡Œï¼ˆå¯¹åº” ASP.NET Core await next() ä¹‹åï¼‰</span>
            Console.WriteLine(&amp;<span class="hljs-meta">#34;æˆ‘æ˜¯ä¸­é—´ä»¶1çš„åç½®æ–¹æ³•&amp;#34;);</span>
            
            <span class="hljs-comment">// 4. è¿”å›å¤„ç†åçš„ä¸Šä¸‹æ–‡</span>
            <span class="hljs-keyword">return</span> resultContext;
        });
</code></pre>
<p>è¿™ä¸ªå§”æ‰˜çš„æ–¹æ³•å…¶å®å°±æ˜¯åœ¨åŸæ¥çš„åŸºç¡€ä¸Šï¼Œç»™åŸæ¥çš„å§”æ‰˜å¥—ä¸Šå‰ç½®æ–¹æ³•å’Œåç½®æ–¹æ³•ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•è°ƒç”¨ã€‚</p>
<pre><code class="hljs language-cs" lang="cs"><span class="hljs-comment">//  ç”¨ä¸­é—´ä»¶1åŒ…è£…æ ¸å¿ƒä¸šåŠ¡å§”æ‰˜ â†’ å¾—åˆ°â€œåŒ…å«ä¸­é—´ä»¶é€»è¾‘+æ ¸å¿ƒä¸šåŠ¡â€çš„æ–°å§”æ‰˜</span>
<span class="hljs-keyword">var</span> func1 = middleWare1.Invoke(func);

<span class="hljs-comment">//  æ‰§è¡ŒåŒ…è£…åçš„å§”æ‰˜ï¼ˆè§¦å‘å®Œæ•´çš„ä¸­é—´ä»¶æµç¨‹ï¼‰</span>
<span class="hljs-keyword">var</span> customContext = func1.Invoke(context);
</code></pre>
<p>å½“æ‰§è¡Œ<code> func1.Invoke(context);</code>åï¼Œ<code>context</code>ä¸Šä¸‹æ–‡ä¼šé€šè¿‡å‰ç½®å‡½æ•°-&gt;æ ¸å¿ƒå‡½æ•°-&gt;åç½®å‡½æ•°æ‰§è¡Œã€‚</p>
<p>æˆ‘ä»¬å†æ·»åŠ ä¸€ä¸ªä¸­é—´ä»¶æ—¶ï¼Œæƒ…å†µä¼šæœ‰æ‰€å˜åŒ–ã€‚</p>
<pre><code class="hljs language-cs" lang="cs">            MethodInfo invokeInfo = <span class="hljs-keyword">new</span> MethodInfo();

            CustomContext context = <span class="hljs-keyword">new</span> CustomContext();

            Func func = <span class="hljs-keyword">new</span> Func(invokeInfo.Show);

            Func, Func&gt; middleWare1 =
                <span class="hljs-keyword">new</span> Func, Func&gt;(next =&gt;
                {
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Func(context =&gt;
                    {
                        Console.WriteLine(&amp;<span class="hljs-meta">#34;æ‰§è¡Œä¸­é—´ä»¶1çš„å‰ç½®æ–¹æ³•&amp;#34;);</span>
                        CustomContext resultContext = next.Invoke(context);
                        Console.WriteLine(&amp;<span class="hljs-meta">#34;æˆ‘æ˜¯ä¸­é—´ä»¶1çš„åç½®æ–¹æ³•&amp;#34;);</span>
                        <span class="hljs-keyword">return</span> resultContext;
                    });
                });
            Func, Func&gt; middleWare2 =
                <span class="hljs-keyword">new</span> Func, Func&gt;(next =&gt;
                {
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Func(context =&gt;
                    {
                        Console.WriteLine(&amp;<span class="hljs-meta">#34;æ‰§è¡Œä¸­é—´ä»¶2çš„å‰ç½®æ–¹æ³•&amp;#34;);</span>
                        CustomContext resultContext = next.Invoke(context);
                        Console.WriteLine(&amp;<span class="hljs-meta">#34;æˆ‘æ˜¯ä¸­é—´ä»¶2çš„åç½®æ–¹æ³•&amp;#34;);</span>
                        <span class="hljs-keyword">return</span> resultContext;
                    });
                });
            Func, Func&gt; middleWare3 =
                <span class="hljs-keyword">new</span> Func, Func&gt;(next =&gt;
                {
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Func(context =&gt;
                    {
                        Console.WriteLine(&amp;<span class="hljs-meta">#34;æ‰§è¡Œä¸­é—´ä»¶3çš„å‰ç½®æ–¹æ³•&amp;#34;);</span>
                        CustomContext resultContext = next.Invoke(context);
                        Console.WriteLine(&amp;<span class="hljs-meta">#34;æˆ‘æ˜¯ä¸­é—´ä»¶3çš„åç½®æ–¹æ³•&amp;#34;);</span>
                        <span class="hljs-keyword">return</span> resultContext;
                    });
                });

            <span class="hljs-keyword">var</span> func1 = middleWare1.Invoke(func);
            <span class="hljs-keyword">var</span> func2 = middleWare2.Invoke(func1);
            <span class="hljs-keyword">var</span> func3 = middleWare3.Invoke(func2);
            <span class="hljs-keyword">var</span> customContext = func3.Invoke(context);
</code></pre>
<p>æ­¤æ—¶æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒåŸæ¥çš„æ ¸å¿ƒä»£ç ï¼Œè¢«middlewa1ä¸­é—´ä»¶åŒ…è£¹åï¼Œåˆè¢«middlewa2ä¸­é—´ä»¶åŒ…è£¹ï¼Œåˆè¢«middlewa3ä¸­é—´ä»¶åŒ…è£¹ï¼Œå½“æˆ‘ä»¬æ‰§è¡Œfunc3.Invoke(context)æ—¶ï¼Œæ‰§è¡Œé¡ºåºæ˜¯ï¼š</p>
<ol>
<li>æ‰§è¡Œå§”æ‰˜3ï¼š<code>func3.Invoke(context)</code></li>
<li>æ‰§è¡Œå§”æ‰˜3çš„å‰ç½®æ–¹æ³•ï¼š<code>Console.WriteLine(&amp;#34;æ‰§è¡Œä¸­é—´ä»¶3çš„å‰ç½®æ–¹æ³•&amp;#34;);</code></li>
<li>æ‰§è¡Œ<code>next.Invoke(context);</code>è¿›å…¥å§”æ‰˜2</li>
<li>æ‰§è¡Œå§”æ‰˜2çš„å‰ç½®æ–¹æ³•ï¼š<code>Console.WriteLine(&amp;#34;æ‰§è¡Œä¸­é—´ä»¶2çš„å‰ç½®æ–¹æ³•&amp;#34;);</code></li>
<li>æ‰§è¡Œ<code>next.Invoke(context);</code>è¿›å…¥å§”æ‰˜1</li>
<li>æ‰§è¡Œå§”æ‰˜1çš„å‰ç½®æ–¹æ³•ï¼š<code>Console.WriteLine(&amp;#34;æ‰§è¡Œä¸­é—´ä»¶1çš„å‰ç½®æ–¹æ³•&amp;#34;);</code></li>
<li>æ‰§è¡Œæ ¸å¿ƒæ–¹æ³•</li>
<li>æ‰§è¡Œå§”æ‰˜1çš„åç½®æ–¹æ³•ï¼š<code>Console.WriteLine(&amp;#34;æ‰§è¡Œä¸­é—´ä»¶1çš„åç½®æ–¹æ³•&amp;#34;);</code></li>
<li>é€€å›åˆ°å§”æ‰˜2ï¼Œæ‰§è¡Œå§”æ‰˜2åç½®æ–¹æ³•ï¼š<code>Console.WriteLine(&amp;#34;æ‰§è¡Œä¸­é—´ä»¶2çš„åç½®æ–¹æ³•&amp;#34;);</code></li>
<li>é€€å›åˆ°å§”æ‰˜3ï¼Œæ‰§è¡Œå§”æ‰˜3åç½®æ–¹æ³•ï¼š<code>Console.WriteLine(&amp;#34;æ‰§è¡Œä¸­é—´ä»¶3çš„åç½®æ–¹æ³•&amp;#34;);</code></li>
<li>é€€å‡ºå§”æ‰˜3</li>
</ol>
<p>ä»¥ä¸Šå°±æ˜¯å‡½æ•°æ‰§è¡Œçš„å…¨éƒ¨è¿‡ç¨‹ï¼Œç»“æœä¸ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e37f33302d5d4193a69b3ace0ed4088d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR6KaB5ou_5b6u6L2vTVZQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765969658&amp;x-signature=OrT1nAh08OskvP83oI62e37l8Rw%3D" alt="image.png" loading="lazy"/></p>
<p>è·Ÿæˆ‘ä»¬ä¸€å¼€å§‹è¯´çš„ä¸­é—´ä»¶çš„å…è®¸æµç¨‹<strong>è¯·æ±‚é¡ºè¡Œï¼Œå“åº”é€†è¡Œ</strong>ä¿æŒä¸€è‡´ï¼Œè‡³æ­¤æˆ‘ä»¬å°±é¡ºåˆ©çš„å†™å‡ºäº†æˆ‘ä»¬è‡ªå·±çš„ä¸­é—´ä»¶æ¡†æ¶ï¼Œè™½ç„¶ä¸å¤Ÿå®Œå–„ï¼Œä½†æ˜¯æœ‰åˆ©äºè®©å¤§å®¶ç†è§£ä¸­é—´ä»¶ã€‚åç»­æˆ‘ä¼šå°è£…ä¸€å¥—å®Œæ•´çš„ä¸­é—´ä»¶æ¡†æ¶ï¼Œæ•¬è¯·æœŸå¾…ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[KotlinInlineå…³é”®å­—]]></title>    <link>https://juejin.cn/post/7582021506190065710</link>    <guid>https://juejin.cn/post/7582021506190065710</guid>    <pubDate>2025-12-10T11:58:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582021506190065710" data-draft-id="7582041304654708782" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="KotlinInlineå…³é”®å­—"/> <meta itemprop="keywords" content="Kotlin"/> <meta itemprop="datePublished" content="2025-12-10T11:58:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·98512003583"/> <meta itemprop="url" content="https://juejin.cn/user/1927871600799337"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            KotlinInlineå…³é”®å­—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1927871600799337/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·98512003583
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T11:58:52.000Z" title="Wed Dec 10 2025 11:58:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>Kotlin</code> ä¸­çš„å†…è”å‡½æ•°ï¼ˆInline Functionï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°ï¼Œä¸æ™®é€šå‡½æ•°ä¸åŒ, ç¼–è¯‘å™¨ä¼šåœ¨ç¼–è¯‘æ—¶å°†å†…è”å‡½æ•°ä¸­çš„ä»£ç æ’å…¥åˆ°è°ƒç”¨å¤„, é¿å…å‡½æ•°è°ƒç”¨çš„å¼€é”€ã€‚å®ƒçš„ä½œç”¨å’Œ <code>C++</code> ä¸­çš„å†…è”å‡½æ•°ç±»ä¼¼ï¼Œéƒ½æ˜¯ä¸ºäº†æé«˜ä»£ç çš„æ‰§è¡Œæ•ˆç‡ã€‚</p>
<h2 data-id="heading-0">å®šä¹‰å†…è”å‡½æ•°</h2>
<p><code>å†…è”å‡½æ•°</code> çš„å®šä¹‰å’Œæ™®é€šå‡½æ•°ç±»ä¼¼, åªæ˜¯åœ¨å‡½æ•°åå‰æ·»åŠ  <code>inline</code> å…³é”®å­—å³å¯ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">inlineFunction</span><span class="hljs-params">(block: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    println(&amp;#<span class="hljs-number">34</span>;Inline function&amp;#<span class="hljs-number">34</span>;)
    block()
}
</code></pre>
<p>ä»è¯­æ³•ä¸Šçœ‹ï¼Œè°ƒç”¨æ–¹å¼å’Œæ™®é€šå‡½æ•°ç›¸ä¼¼</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    inlineFunction {
        println(&amp;#<span class="hljs-number">34</span>;Hello, World!&amp;#<span class="hljs-number">34</span>;)
    }
}
</code></pre>
<p>ä»¥ä¸Šä»£ç ä¸ä¸‹é¢çš„ä»£ç åœ¨æ‰§è¡Œæ•ˆæœä¸Šå®Œå…¨ä¸€è‡´</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    println(&amp;#<span class="hljs-number">34</span>;Inline function&amp;#<span class="hljs-number">34</span>;)
    println(&amp;#<span class="hljs-number">34</span>;Hello, World!&amp;#<span class="hljs-number">34</span>;)
}
</code></pre>
<h2 data-id="heading-1">å†…è”å‡½æ•°çš„return</h2>
<p><code>kotlin</code> çš„ <code>lambda</code> è¡¨è¾¾å¼returnå¿…é¡»ä½¿ç”¨ <code>return@scope</code> æ¥æŒ‡å®šè¿”å›çš„ä½œç”¨åŸŸï¼Œç”±äºå†…è”å‡½æ•°çš„ä»£ç ä¼šè¢«æ’å…¥åˆ°è°ƒç”¨å¤„ï¼Œæ‰€ä»¥å†…è”å‡½æ•°å¯ä»¥ä½¿ç”¨ return è€Œä¸å¿…é¡»æ·»åŠ @é™å®šç¬¦ã€‚æ¯”å¦‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    inlineFunction {
        println(&amp;#<span class="hljs-number">34</span>;Hello, World!&amp;#<span class="hljs-number">34</span>;)
        <span class="hljs-keyword">return</span>
    }
}
</code></pre>
<p>è€Œæ™®é€šå‡½æ•°åˆ™å¿…é¡»ä½¿ç”¨ <code>return@scope</code> æ¥è¿”å›, æ¯”å¦‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    normalFunction {
        println(&amp;#<span class="hljs-number">34</span>;Hello, World!&amp;#<span class="hljs-number">34</span>;)
        <span class="hljs-keyword">return</span><span class="hljs-symbol">@normalFunction</span>
    }
}
</code></pre>
<p>ä¸ºä»€ä¹ˆï¼Ÿå› ä¸º<code>å†…è”å‡½æ•°</code>çš„ä»£ç ä¼šè¢«æ’å…¥åˆ°è°ƒç”¨å¤„ï¼Œæ‰€ä»¥ä¸Šé¢çš„<code>å†…è”å‡½æ•°</code>è¿”å›å°±ç›¸å½“äº</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    println(&amp;#<span class="hljs-number">34</span>;Inline function&amp;#<span class="hljs-number">34</span>;)
    println(&amp;#<span class="hljs-number">34</span>;Hello, World!&amp;#<span class="hljs-number">34</span>;)
    <span class="hljs-comment">// è¿™é‡Œçš„returnæ˜¯å¯ä»¥ä¸æ·»åŠ é™å®šç¬¦ç›´æ¥è¿”å›çš„</span>
    <span class="hljs-keyword">return</span>
}
</code></pre>
<h3 data-id="heading-2">Kotlin ä¸­çš„ return</h3>
<p>ä»ä¸Šé¢å¯¹<code>å†…è”å‡½æ•°</code>çš„æè¿°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼šä»€ä¹ˆæ—¶å€™returnä¸éœ€è¦æ·»åŠ @é™å®šç¬¦å‘¢ï¼Ÿ</p>
<ol>
<li>å½“å†…è”å‡½æ•°çš„lambdaå‚æ•°åœ¨é¡¶å±‚å‡½æ•°ä¸­è¢«è°ƒç”¨æ—¶ï¼Œæ­¤æ—¶ä¸æ·»åŠ é™å®šç¬¦ï¼Œreturn å°±ç›¸å½“äºç›´æ¥è¿”å›é¡¶å±‚å‡½æ•°ã€‚</li>
<li>åŒ¿åå‡½æ•°ä¸­çš„return, ä¹Ÿä¸éœ€è¦æ·»åŠ @é™å®šç¬¦</li>
</ol>
<p>å†…è”å‡½æ•°åœ¨éå†…è”å‡½æ•°ä¸­è°ƒç”¨çš„æ—¶å€™, å°±éœ€è¦ä½¿ç”¨@é™å®šç¬¦æ¥æŒ‡å®šè¿”å›çš„ä½œç”¨åŸŸã€‚æ¯”å¦‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    normalFunction {
        inlineFunction {
            println(&amp;#<span class="hljs-number">34</span>;Hello, World!&amp;#<span class="hljs-number">34</span>;)
            <span class="hljs-comment">// è¡¨ç¤ºè¿”å›åˆ°inlineFunction</span>
            <span class="hljs-keyword">return</span><span class="hljs-symbol">@inlineFunction</span>
            
            <span class="hljs-comment">// æˆ–è€…è¿”å›åˆ°normalFunction</span>
            <span class="hljs-comment">// return@normalFunction</span>
        }
    }
    inlineFunction {
        println(&amp;#<span class="hljs-number">34</span>;Hello, World!&amp;#<span class="hljs-number">34</span>;)
        <span class="hljs-comment">// ç›´æ¥è¿”å›åˆ°é¡¶å±‚å‡½æ•°ï¼Œä¸éœ€è¦æ·»åŠ @é™å®šç¬¦</span>
        <span class="hljs-keyword">return</span>
        
        <span class="hljs-comment">// æˆ–è€…è¿”å›åˆ°normalFunction</span>
        <span class="hljs-comment">// return@normalFunction</span>
    }

    inlineFunction {
        inlineFunction {
            <span class="hljs-comment">// ç›´æ¥è¿”å›åˆ°é¡¶å±‚å‡½æ•°ï¼Œå¯ä»¥ä¸æ·»åŠ @é™å®šç¬¦</span>
            <span class="hljs-keyword">return</span>
            
            <span class="hljs-comment">// æˆ–è€…è¿”å›åˆ°inlineFunction</span>
            <span class="hljs-comment">// return@inlineFunction</span>
        }
    }

    normalFunction(<span class="hljs-function"><span class="hljs-title">fun</span> <span class="hljs-params">()</span></span>:<span class="hljs-built_in">Unit</span> {
        <span class="hljs-comment">// åŒ¿åå‡½æ•°ä¸­çš„return, ä¸éœ€è¦æ·»åŠ @é™å®šç¬¦</span>
        <span class="hljs-keyword">return</span>
    })
}
</code></pre>
<p>ä½†æ˜¯è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼ŒåŠ äº†@é™å®šç¬¦çš„returnå’Œä¸åŠ @é™å®šç¬¦çš„returnæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p>
<ul>
<li>å¦‚æœåŠ äº†é™å®šç¬¦ï¼Œé€€å‡ºçš„åªæ˜¯å½“å‰ä½œç”¨åŸŸ</li>
<li>è€Œä¸åŠ é™å®šç¬¦ï¼Œé€€å‡ºçš„æ˜¯æ•´ä¸ªå‡½æ•°</li>
</ul>
<h3 data-id="heading-3">Kotlin ä¸­çš„ return è®¾è®¡</h3>
<p>é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆKotlinè¦è®¾è®¡æˆè¿™æ ·å‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸è®¾è®¡çš„å’ŒJavaä¸€æ ·ï¼Œreturnè¿”å›çš„åªæ˜¯å½“å‰çš„ä½œç”¨åŸŸå‘¢ï¼Ÿç›®çš„æœ‰ä¸¤ä¸ª</p>
<ol>
<li>å¢åŠ æ¯”Javaä»£ç æ›´å¤§çš„çµæ´»æ€§</li>
<li>é¿å…ä½¿ç”¨å†…è”å‡½æ•°æ—¶çš„é€»è¾‘æ··æ·†</li>
</ol>
<h4 data-id="heading-4">1. å¢åŠ æ¯”Javaä»£ç æ›´å¤§çš„çµæ´»æ€§</h4>
<p>Javaä»£ç ä¸­ï¼Œlambdaè¡¨è¾¾å¼ä¸­çš„returnåªèƒ½è¿”å›å½“å‰lambdaä½œç”¨åŸŸï¼Œè€ŒKotlinä¸­çš„returnå¯ä»¥è¿”å›ä»»æ„ä½œç”¨åŸŸã€‚è¿™å°±å¢åŠ äº†æ¯”Javaä»£ç æ›´å¤§çš„çµæ´»æ€§ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œéå†ä¸€ä¸ªåˆ—è¡¨ï¼Œå¦‚æœç¬¦åˆæ¡ä»¶ï¼Œç»ˆæ­¢éå†ï¼Œæˆ‘ä»¬çœ‹çœ‹åœ¨<code>Java</code>ä¸­æ€ä¹ˆå®ç°</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span>  <span class="hljs-keyword">void</span> <span class="hljs-title function_">breakOnCondition</span><span class="hljs-params">(List list, Predicate predicate)</span> {
    <span class="hljs-keyword">for</span> (T t : list) {
        <span class="hljs-keyword">if</span> (predicate.test(t)) {
            <span class="hljs-keyword">return</span>;
        }
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
    <span class="hljs-type">List</span> <span class="hljs-variable">list</span> <span class="hljs-operator">=</span> Arrays.asList(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>);
    breakOnCondition(list, i -&gt; i == <span class="hljs-number">3</span>);
}

</code></pre>
<p>é‚£ä¹ˆï¼Œåœ¨Kotlinä¸­æˆ‘ä»¬ç”šè‡³ä¸éœ€è¦è¿™æ ·è®¾è®¡ã€‚å¯¹äºéå†åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨lambdaè¡¨è¾¾å¼ç»“åˆ return@scope æ¥ç»ˆæ­¢å½“å‰éå†æ“ä½œã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> list = listOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
    list.forEach {
        <span class="hljs-keyword">if</span> (it == <span class="hljs-number">3</span>) {
            <span class="hljs-comment">// ç›´æ¥è¿”å›forEachå¾ªç¯</span>
            <span class="hljs-keyword">return</span><span class="hljs-symbol">@forEach</span>
        }
    }
}
</code></pre>
<h4 data-id="heading-5">2. é¿å…ä½¿ç”¨å†…è”å‡½æ•°æ—¶çš„é€»è¾‘æ··æ·†</h4>
<p>å¦‚æœå¯ä»¥ä¸å¸¦æœ‰@é™å®šç¬¦ï¼Œé‚£ä¹ˆç”¨æˆ·åœ¨ç¼–å†™ä»£ç çš„æ—¶å€™ï¼Œå¾ˆéš¾ç¡®å®šç¨‹åºçš„è¡Œä¸ºï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç </p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">normalFunction</span><span class="hljs-params">(block: () -&gt; <span class="hljs-type">Unit</span>)</span></span> = block()
<span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">inlineFunction</span><span class="hljs-params">(block: () -&gt; <span class="hljs-type">Unit</span>)</span></span> = block()

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    normalFunction {
        <span class="hljs-comment">// è¿™é‡Œæ˜¯æ— æ³•ç¼–è¯‘é€šè¿‡çš„ï¼Œæˆ‘ä»¬å‡å®šå¯ä»¥é€šè¿‡</span>
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-comment">// ä¼šè¢«æ‰§è¡Œ</span>
    println(&amp;#<span class="hljs-number">34</span>;After normalFunction&amp;#<span class="hljs-number">34</span>;)
    inlineFunction {
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-comment">// ä¸ä¼šè¢«æ‰§è¡Œ</span>
    println(&amp;#<span class="hljs-number">34</span>;After inlineFunction&amp;#<span class="hljs-number">34</span>;)
}
</code></pre>
<p>å‡è®¾ä¸Šé¢çš„ä»£ç æ­£ç¡®ï¼Œå¹¶ä¸”å¯ä»¥ç¼–è¯‘é€šè¿‡ã€‚
è¿™é‡Œçš„ normalFunction ä¸­çš„returnï¼Œç»“æŸçš„æ˜¯ normalFunction å‡½æ•°ã€‚
è€Œ inlineFunction ä¸­çš„returnï¼Œç»“æŸçš„å´æ˜¯mainå‡½æ•°ï¼Œå› ä¸ºinlineFunction ä¸­çš„ä»£ç ä¼šè¢«æ’å…¥åˆ°è°ƒç”¨å¤„ï¼Œæ‰€ä»¥inlineFunction ä¸­çš„return å°±ç›¸å½“äºç›´æ¥è¿”å›mainå‡½æ•°ã€‚</p>
<p>é‚£ä¹ˆç”¨æˆ·åœ¨ç¼–å†™ä»£ç çš„æ—¶å€™ï¼Œå°±å¾ˆå®¹æ˜“æ··æ·†ã€‚</p>
<p>è€Œå¦‚æœéå†…è”å‡½æ•°çš„lambdaå‚æ•°è¦æ±‚åªèƒ½ä½¿ç”¨return@scopeæ¥è¿”å›ï¼Œå°±ä¼šé¿å…è¿™ç§å®¹æ˜“æ··æ·†çš„æƒ…å†µã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    normalFunction {
        <span class="hljs-keyword">return</span><span class="hljs-symbol">@normalFunction</span>
    }
    <span class="hljs-comment">// ä¼šè¢«æ‰§è¡Œ</span>
    println(&amp;#<span class="hljs-number">34</span>;After normalFunction&amp;#<span class="hljs-number">34</span>;)

    inlineFunction {
        <span class="hljs-keyword">return</span><span class="hljs-symbol">@inlineFunction</span>
    }
    <span class="hljs-comment">// ä¼šè¢«æ‰§è¡Œ</span>
    println(&amp;#<span class="hljs-number">34</span>;After inlineFunction&amp;#<span class="hljs-number">34</span>;)

    inlineFunction {
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-comment">// ä¸ä¼šè¢«æ‰§è¡Œ</span>
    println(&amp;#<span class="hljs-number">34</span>;After inlineFunction&amp;#<span class="hljs-number">34</span>;)
}
</code></pre>
<h2 data-id="heading-6">reified ç±»å‹å‚æ•°</h2>
<p>reified ç±»å‹å‚æ•°æ˜¯Kotlinä¸­ä¸€ç§ç‰¹æ®Šçš„ç±»å‹å‚æ•°ï¼Œå®ƒå¯ä»¥åœ¨è¿è¡Œæ—¶è·å–åˆ°ç±»å‹ä¿¡æ¯ã€‚è¿˜è®°å¾—Javaä¸­æ€ä¹ˆè·å–æ³›å‹ç±»å‹å—ï¼Ÿ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span>  T <span class="hljs-title function_">parseObj</span><span class="hljs-params">(String json, Class clazz)</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>().fromJson(json, clazz);
}
</code></pre>
<p>åœ¨Javaä¸­ï¼Œæˆ‘ä»¬å¿…é¡»æ·»åŠ  Class\ clazz å‚æ•°æ¥æŒ‡å®šæ³›å‹ç±»å‹ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬æ— æ³•åœ¨è¿è¡Œæ—¶è·å–åˆ°æ³›å‹ç±»å‹ã€‚å› ä¸ºJavaä»£ç ä¸­å¦‚æœæ²¡æœ‰å’Œæ³›å‹ç›¸å…³çš„å¯¹è±¡ä¼ å…¥è¿›æ¥çš„è¯ï¼Œæ˜¯æ— æ³•åœ¨è¿è¡Œæ—¶è·å–åˆ°æ³›å‹ç±»å‹çš„ã€‚</p>
<p>ä½†æ˜¯åœ¨<code>Kotlin</code>çš„å†…è”å‡½æ•°ä¸­ï¼Œæä¾›äº†reified ç±»å‹å‚æ•°ï¼Œå®ƒå¯ä»¥åœ¨å‡½æ•°ä¸æä¾›å‚æ•°ä¿¡æ¯æƒ…å†µä¸‹ï¼Œè·å–åˆ°æ³›å‹ç±»å‹ã€‚æ¯”å¦‚ä¸‹é¢çš„ä»£ç </p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span>  <span class="hljs-title">parseObj</span><span class="hljs-params">(json: <span class="hljs-type">String</span>)</span></span>: T {
    <span class="hljs-keyword">return</span> new Gson().fromJson(json, T::<span class="hljs-keyword">class</span>.java)
}
</code></pre>
<p>æƒ³è±¡ä¸€ä¸‹è¿™ä¸ªå‚æ•°å¯ä»¥ç»™æˆ‘ä»¬å¸¦æ¥å¤šå¤§çš„ä¾¿åˆ©æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨å‡½æ•°ä¸­ä½¿ç”¨T::class.javaæ¥è·å–åˆ°æ³›å‹ç±»å‹ï¼Œè€Œä¸éœ€è¦ä¼ å…¥Class\ clazz å‚æ•°ã€‚
<code>MybatisPlus</code> æä¾›äº† KtQueryChainWrapper ç±»,é€šè¿‡è¿™ä¸ªç±»ï¼Œå¯ä»¥é€šè¿‡lambdaçš„æ–¹å¼æ„å»ºæŸ¥è¯¢å‚æ•°ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> baseMapper: BaseMapper

<span class="hljs-keyword">val</span> chain = KtQueryChainWrapper(baseMapper, entityClass=Config::<span class="hljs-keyword">class</span>.java)
<span class="hljs-keyword">val</span> config = chain.eq(Config::name, &amp;#<span class="hljs-number">34</span>;test&amp;#<span class="hljs-number">34</span>;).one()
</code></pre>
<p>ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥ä¸º BaseMapper æ·»åŠ ä¸€ä¸ªæ‰©å±•æ–¹æ³•ï¼Œæ¥è·å– KtQueryChainWrapper ç±»ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span>  BaseMapper.<span class="hljs-title">query</span><span class="hljs-params">()</span></span>: KtQueryChainWrapper {
    <span class="hljs-comment">// å¾ˆè¦å‘½çš„æ˜¯ mybatisplus è¦æ±‚å¿…é¡»å¡«å†™ entityClass å‚æ•°ï¼Œå¦åˆ™ä¼šæŠ¥é”™</span>
    <span class="hljs-keyword">return</span> KtQueryChainWrapper(baseMapper = <span class="hljs-keyword">this</span>, entityClass = entityClass())  
}

<span class="hljs-comment">// ä½¿ç”¨çš„æ—¶å€™å°±ä¼šå¾ˆæ–¹ä¾¿</span>
<span class="hljs-keyword">val</span> config = baseMapper.query().eq(Config::name, &amp;#<span class="hljs-number">34</span>;test&amp;#<span class="hljs-number">34</span>;).one()
</code></pre>
<p>ä½†æ˜¯ï¼Œæ€ä¹ˆè·å– entityClass å‘¢ï¼Ÿå¦‚æœæ²¡æœ‰ reified å…³é”®å­—ï¼Œ æˆ‘ä»¬åªèƒ½é€šè¿‡åå°„æ¥è·å–ã€‚æ¯”å¦‚ä¸‹é¢çš„ä»£ç </p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span>  BaseMapper.<span class="hljs-title">entityClass</span><span class="hljs-params">()</span></span>: Class {  
    <span class="hljs-keyword">val</span> searchEntityClass = javaClass.searchEntityClass()  
    <span class="hljs-keyword">if</span> (searchEntityClass != <span class="hljs-literal">null</span>) {  
        <span class="hljs-keyword">return</span> searchEntityClass  
    }  
    <span class="hljs-keyword">throw</span> IllegalArgumentException(&amp;#<span class="hljs-number">34</span>;æ— æ³•è·å–å®ä½“ç±»&amp;#<span class="hljs-number">34</span>;)  
}
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span>  Class<span class="hljs-type">&lt;*&gt;</span>.<span class="hljs-title">searchEntityClass</span><span class="hljs-params">()</span></span>: Class? {
    <span class="hljs-keyword">for</span> (type <span class="hljs-keyword">in</span> genericInterfaces) {
        <span class="hljs-keyword">if</span> (type <span class="hljs-keyword">is</span> ParameterizedType) {
            <span class="hljs-keyword">if</span> (type.rawType == BaseMapper::<span class="hljs-keyword">class</span>.java) {
                <span class="hljs-keyword">return</span> type.actualTypeArguments[<span class="hljs-number">0</span>] <span class="hljs-keyword">as</span> Class
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (type <span class="hljs-keyword">is</span> Class&lt;*&gt;) {
                <span class="hljs-keyword">return</span> type.searchEntityClass()
            }
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>

}
</code></pre>
<p>è¿™æ—¶å€™å¦‚æœæˆ‘ä»¬ä½¿ç”¨ <code>å†…è”å‡½æ•°</code> + reified ç±»å‹å‚æ•°ï¼Œå°±å¯ä»¥é¿å…ä½¿ç”¨åå°„æ¥è·å–æ³›å‹ç±»å‹ã€‚æ¯”å¦‚ä¸‹é¢çš„ä»£ç </p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span>  BaseMapper.<span class="hljs-title">query</span><span class="hljs-params">()</span></span>: KtQueryChainWrapper {
    <span class="hljs-comment">// åœ¨ä½¿ç”¨äº†reified ç±»å‹å‚æ•°åï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ T::class.java æ¥è·å–æ³›å‹ç±»å‹</span>
    <span class="hljs-keyword">return</span> KtQueryChainWrapper(baseMapper = <span class="hljs-keyword">this</span>, entityClass = T::<span class="hljs-keyword">class</span>.java)  
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨äº† reified ç±»å‹å‚æ•°åï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ T::class.java æ¥è·å–æ³›å‹ç±»å‹ï¼Œè€Œä¸éœ€è¦é€šè¿‡åå°„æ¥è·å–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å½»åº•ææ‡‚å¾®æœåŠ¡ TraceId ä¼ é€’ï¼šThreadLocalã€TTL ä¸å…¨é“¾è·¯æ—¥å¿—è¿½è¸ªå®æˆ˜]]></title>    <link>https://juejin.cn/post/7582067084839665718</link>    <guid>https://juejin.cn/post/7582067084839665718</guid>    <pubDate>2025-12-10T12:00:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582067084839665718" data-draft-id="7582003642192068650" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å½»åº•ææ‡‚å¾®æœåŠ¡ TraceId ä¼ é€’ï¼šThreadLocalã€TTL ä¸å…¨é“¾è·¯æ—¥å¿—è¿½è¸ªå®æˆ˜"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,å¾®æœåŠ¡"/> <meta itemprop="datePublished" content="2025-12-10T12:00:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å½»åº•ææ‡‚å¾®æœåŠ¡ TraceId ä¼ é€’ï¼šThreadLocalã€TTL ä¸å…¨é“¾è·¯æ—¥å¿—è¿½è¸ªå®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T12:00:59.000Z" title="Wed Dec 10 2025 12:00:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    13
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å½»åº•ææ‡‚å¾®æœåŠ¡ TraceId ä¼ é€’ï¼šThreadLocalã€TTL ä¸å…¨é“¾è·¯æ—¥å¿—è¿½è¸ªå®æˆ˜</h2>
<h3 data-id="heading-1">æ‘˜è¦</h3>
<p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œä¸€æ¬¡ç”¨æˆ·è¯·æ±‚å¾€å¾€æ¨ªè·¨å¤šä¸ªæœåŠ¡ï¼Œæ’æŸ¥é—®é¢˜æ—¶æ—¥å¿—åˆ†æ•£éš¾ä»¥å…³è”ã€‚æœ¬æ–‡è¯¦ç»†è®²è§£ TraceId é€ä¼ çš„æ ¸å¿ƒæœºåˆ¶ï¼Œé‡ç‚¹è§£é‡Šä¸ºä»€ä¹ˆæ™®é€š ThreadLocal ä¸å¤Ÿç”¨ã€InheritableThreadLocal åœ¨çº¿ç¨‹æ± åœºæ™¯ä¼šå¤±æ•ˆï¼Œä»¥åŠå¦‚ä½•é€šè¿‡ TransmittableThreadLocalï¼ˆTTLï¼‰å®ç°å…¨åœºæ™¯çš„ TraceId æ— æŸä¼ é€’ã€‚æ–‡ç« åŒ…å«å®Œæ•´çš„ä»£ç å®ç°å’Œå¸¸è§é—®é¢˜æ’æŸ¥æ–¹æ³•ã€‚</p>
<p><strong>é€‚åˆäººç¾¤ï¼š</strong> åç«¯å¼€å‘ã€å¾®æœåŠ¡æ¶æ„å¸ˆã€å¯¹åˆ†å¸ƒå¼è¿½è¸ªæ„Ÿå…´è¶£çš„æŠ€æœ¯äººå‘˜</p>
<p><strong>ä½ å°†å­¦åˆ°ï¼š</strong> ThreadLocal çš„ä¸‰ç§å®ç°æœºåˆ¶ã€TTL çš„å·¥ä½œåŸç†ã€Feign/RestTemplate æ‹¦æˆªå™¨é…ç½®ã€å¼‚æ­¥åœºæ™¯å¤„ç†æ–¹æ¡ˆ</p>
<hr/>
<h3 data-id="heading-2">å‰è¨€</h3>
<p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œä¸€ä¸ªç”¨æˆ·è¯·æ±‚å¾€å¾€è¦ç»è¿‡å¤šä¸ªæœåŠ¡æ‰èƒ½å®Œæˆã€‚å½“å‡ºç°é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å„ä¸ªæœåŠ¡çš„æ—¥å¿—ä¸­æ¥å›ç¿»æ‰¾ï¼Œæ•ˆç‡æä½ã€‚TraceId å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªç—›ç‚¹è€Œç”Ÿçš„ï¼Œå®ƒèƒ½æŠŠåŒä¸€æ¬¡è¯·æ±‚çš„æ‰€æœ‰æ—¥å¿—ä¸²è”èµ·æ¥ã€‚</p>
<p>æœ¬æ–‡ä¼šè®²æ¸…æ¥š TraceId ä¼ é€’çš„æ ¸å¿ƒåŸç†ï¼Œé‡ç‚¹è§£é‡Šä¸ºä»€ä¹ˆæ™®é€šçš„ ThreadLocal ä¸å¤Ÿç”¨ï¼Œä»¥åŠå¦‚ä½•é€šè¿‡ TransmittableThreadLocal (TTL) è§£å†³æ‰€æœ‰åœºæ™¯ã€‚</p>
<h3 data-id="heading-3">ä¸€ã€é—®é¢˜ï¼šå¾®æœåŠ¡æ—¥å¿—éš¾ä»¥è¿½è¸ª</h3>
<p>å‡è®¾ä½ çš„ç³»ç»Ÿæœ‰è¿™æ ·ä¸€ä¸ªè°ƒç”¨é“¾è·¯ï¼š</p>
<pre><code class="hljs">ç”¨æˆ·ä¸‹å• â†’ ç”¨æˆ·æœåŠ¡ â†’ è®¢å•æœåŠ¡ â†’ åº“å­˜æœåŠ¡ â†’ æ”¯ä»˜æœåŠ¡
</code></pre>
<p>å½“ç”¨æˆ·åé¦ˆ"ä¸‹å•å¤±è´¥"æ—¶ï¼Œä½ éœ€è¦ï¼š</p>
<ol>
<li>æ‰“å¼€ç”¨æˆ·æœåŠ¡çš„æ—¥å¿—ï¼Œæœç´¢ç”¨æˆ·ID</li>
<li>æ‰“å¼€è®¢å•æœåŠ¡çš„æ—¥å¿—ï¼Œæ‰¾åˆ°ç›¸å…³è®°å½•</li>
<li>ç»§ç»­åœ¨åº“å­˜æœåŠ¡ã€æ”¯ä»˜æœåŠ¡ä¸­ç¿»æ‰¾</li>
<li>å¯¹æ¯”æ—¶é—´æˆ³ï¼ŒçŒœæµ‹å“ªäº›æ—¥å¿—å±äºåŒä¸€æ¬¡è¯·æ±‚</li>
</ol>
<p>è¿™ä¸ªè¿‡ç¨‹è´¹æ—¶è´¹åŠ›ï¼Œè€Œä¸”å®¹æ˜“å‡ºé”™ã€‚</p>
<h4 data-id="heading-4">å¼•å…¥ TraceId å</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ç”¨æˆ·è¯·æ±‚] --&gt;|traceId: abc123| B[ç”¨æˆ·æœåŠ¡]
    B --&gt;|traceId: abc123| C[è®¢å•æœåŠ¡]
    C --&gt;|traceId: abc123| D[åº“å­˜æœåŠ¡]
    D --&gt;|traceId: abc123| E[æ”¯ä»˜æœåŠ¡]
    
    style A fill:#e1f5ff,stroke:#01579b,stroke-width:2px
    style B fill:#fff3e0,stroke:#e65100,stroke-width:2px
    style C fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    style D fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px
    style E fill:#fce4ec,stroke:#880e4f,stroke-width:2px
</code></pre>
<p>æ¯ä¸ªæœåŠ¡çš„æ—¥å¿—éƒ½å¸¦ä¸Šç›¸åŒçš„ traceIdï¼Œåªéœ€è¦åœ¨æ—¥å¿—ç³»ç»Ÿä¸­æœç´¢ <code>abc123</code>ï¼Œå°±èƒ½çœ‹åˆ°å®Œæ•´çš„è°ƒç”¨é“¾è·¯ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">10:30:15 <span class="hljs-section">[abc123]</span> ç”¨æˆ·æœåŠ¡ - ç”¨æˆ·1001ä¸‹å•
10:30:16 <span class="hljs-section">[abc123]</span> è®¢å•æœåŠ¡ - åˆ›å»ºè®¢å•æˆåŠŸ
10:30:17 <span class="hljs-section">[abc123]</span> åº“å­˜æœåŠ¡ - æ‰£å‡åº“å­˜å¤±è´¥  â† é—®é¢˜å®šä½ï¼
10:30:18 <span class="hljs-section">[abc123]</span> æ”¯ä»˜æœåŠ¡ - æœªæ”¶åˆ°è¯·æ±‚
</code></pre>
<h3 data-id="heading-5">äºŒã€æ ¸å¿ƒæŒ‘æˆ˜ï¼šTraceId å¦‚ä½•ä¼ é€’ï¼Ÿ</h3>
<p>çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä½†å®é™…å®ç°æœ‰ä¸‰ä¸ªéš¾ç‚¹ã€‚</p>
<h4 data-id="heading-6">æŒ‘æˆ˜1ï¼šåŒä¸€æœåŠ¡å†…å¦‚ä½•å…±äº« TraceIdï¼Ÿ</h4>
<p>åœ¨åŒä¸€ä¸ªæœåŠ¡é‡Œï¼Œä» Filter åˆ° Controller åˆ° Serviceï¼Œéƒ½è¦èƒ½æ‹¿åˆ° traceIdã€‚æœ€ç›´æ¥çš„æƒ³æ³•æ˜¯ç”¨ ThreadLocalï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TraceContext</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ThreadLocal</span> <span class="hljs-variable">holder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;&gt;();
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setTraceId</span><span class="hljs-params">(String traceId)</span> {
        holder.set(traceId);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getTraceId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> holder.get();
    }
}
</code></pre>
<p>è¿™æ ·åœ¨ Filter é‡Œè®¾ç½®ï¼ŒController å’Œ Service å°±éƒ½èƒ½è·å–äº†ã€‚</p>
<h4 data-id="heading-7">æŒ‘æˆ˜2ï¼šæœåŠ¡é—´å¦‚ä½•ä¼ é€’ TraceIdï¼Ÿ</h4>
<p>HTTP è°ƒç”¨æ—¶ï¼Œéœ€è¦æŠŠ traceId æ”¾åˆ° Header é‡Œä¼ é€’ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant A as ç”¨æˆ·æœåŠ¡
    participant B as è®¢å•æœåŠ¡
    
    rect rgb(225, 245, 255)
    A-&gt;&gt;A: TraceContext.getTraceId()
    end
    
    rect rgb(255, 243, 224)
    A-&gt;&gt;B: HTTP Request&lt;br/&gt;Header: X-Trace-Id=abc123
    end
    
    rect rgb(243, 229, 245)
    B-&gt;&gt;B: ä» Header å–å‡º traceId
    B-&gt;&gt;B: TraceContext.setTraceId()
    end
</code></pre>
<p>è¿™éœ€è¦åœ¨ Feign æˆ– RestTemplate çš„æ‹¦æˆªå™¨ä¸­è‡ªåŠ¨æ·»åŠ  Headerã€‚</p>
<h4 data-id="heading-8">æŒ‘æˆ˜3ï¼šå¼‚æ­¥åœºæ™¯å¦‚ä½•ä¼ é€’ï¼Ÿ</h4>
<p>è¿™æ˜¯æœ€éº»çƒ¦çš„ã€‚å¦‚æœä½ å†™äº†å¼‚æ­¥ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Async</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendEmail</span><span class="hljs-params">()</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">traceId</span> <span class="hljs-operator">=</span> TraceContext.getTraceId();
    log.info(&amp;#<span class="hljs-number">34</span>;å‘é€é‚®ä»¶, traceId: {}&amp;#<span class="hljs-number">34</span>;, traceId);  <span class="hljs-comment">// traceId æ˜¯ nullï¼</span>
}
</code></pre>
<p>ä¸ºä»€ä¹ˆä¼šæ˜¯ nullï¼Ÿå› ä¸º ThreadLocal çš„å€¼æ— æ³•ä¼ é€’åˆ°æ–°çº¿ç¨‹ã€‚</p>
<h3 data-id="heading-9">ä¸‰ã€ThreadLocal å®¶æ—çš„ä¸‰å…„å¼Ÿ</h3>
<p>è¦è§£å†³å¼‚æ­¥ä¼ é€’çš„é—®é¢˜ï¼Œéœ€è¦ç†è§£ ThreadLocal çš„ä¸‰ä¸ªå˜ç§ã€‚</p>
<h4 data-id="heading-10">1. ThreadLocalï¼šè€å¤§ï¼Œåªç®¡è‡ªå·±</h4>
<p>ThreadLocal åªèƒ½åœ¨åŒä¸€ä¸ªçº¿ç¨‹å†…å…±äº«æ•°æ®ï¼Œæ— æ³•è·¨çº¿ç¨‹ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">ThreadLocal</span> <span class="hljs-variable">holder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;&gt;();

<span class="hljs-comment">// ä¸»çº¿ç¨‹</span>
holder.set(&amp;#<span class="hljs-number">34</span>;abc123&amp;#<span class="hljs-number">34</span>;);
System.out.println(holder.get());  <span class="hljs-comment">// abc123</span>

<span class="hljs-comment">// æ–°çº¿ç¨‹</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
    System.out.println(holder.get());  <span class="hljs-comment">// null</span>
}).start();
</code></pre>
<p><strong>é—®é¢˜ï¼š</strong> å®Œå…¨æ— æ³•ä¼ é€’åˆ°å­çº¿ç¨‹ã€‚</p>
<h4 data-id="heading-11">2. InheritableThreadLocalï¼šè€äºŒï¼Œèƒ½ä¼ ç»™å„¿å­</h4>
<p>InheritableThreadLocal åœ¨åˆ›å»ºçº¿ç¨‹æ—¶ä¼šå¤åˆ¶çˆ¶çº¿ç¨‹çš„å€¼ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">InheritableThreadLocal</span> <span class="hljs-variable">holder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InheritableThreadLocal</span>&lt;&gt;();

<span class="hljs-comment">// ä¸»çº¿ç¨‹</span>
holder.set(&amp;#<span class="hljs-number">34</span>;abc123&amp;#<span class="hljs-number">34</span>;);

<span class="hljs-comment">// æ–°çº¿ç¨‹ï¼ˆåˆ›å»ºæ—¶å¤åˆ¶ï¼‰</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
    System.out.println(holder.get());  <span class="hljs-comment">// abc123ï¼Œèƒ½æ‹¿åˆ°äº†ï¼</span>
}).start();
</code></pre>
<p>çœ‹èµ·æ¥ä¸é”™ï¼Œä½†åœ¨çº¿ç¨‹æ± åœºæ™¯ä¸‹ä¼šå‡ºé—®é¢˜ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">1</span>);

<span class="hljs-comment">// ç¬¬ä¸€æ¬¡æäº¤ä»»åŠ¡</span>
holder.set(&amp;#<span class="hljs-number">34</span>;trace1&amp;#<span class="hljs-number">34</span>;);
executor.submit(() -&gt; {
    System.out.println(holder.get());  <span class="hljs-comment">// ä»»åŠ¡1çš„å€¼</span>
});

Thread.sleep(<span class="hljs-number">100</span>);

<span class="hljs-comment">// ç¬¬äºŒæ¬¡æäº¤ä»»åŠ¡ï¼ˆå¤ç”¨åŒä¸€ä¸ªçº¿ç¨‹ï¼‰</span>
holder.set(&amp;#<span class="hljs-number">34</span>;trace2&amp;#<span class="hljs-number">34</span>;);
executor.submit(() -&gt; {
    System.out.println(holder.get());  <span class="hljs-comment">// è¿˜æ˜¯trace1 ä¸²äº†ï¼</span>
});
</code></pre>
<p><strong>é—®é¢˜ï¼š</strong> InheritableThreadLocal åªåœ¨åˆ›å»ºçº¿ç¨‹æ—¶å¤åˆ¶ï¼Œçº¿ç¨‹æ± å¤ç”¨çº¿ç¨‹æ—¶ä¸ä¼šé‡æ–°å¤åˆ¶ã€‚</p>
<h4 data-id="heading-12">3. TransmittableThreadLocalï¼šè€ä¸‰ï¼Œæœ€é è°±</h4>
<p>TTL é€šè¿‡æ‹¦æˆªå™¨æ¨¡å¼ï¼Œåœ¨æäº¤ä»»åŠ¡æ—¶æ•è·å€¼ï¼Œæ‰§è¡Œå‰æ¢å¤å€¼ï¼Œæ‰§è¡Œåæ¸…ç†å€¼ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ä¸»çº¿ç¨‹: ttl.set'ä»»åŠ¡2çš„å€¼'] --&gt; B[æäº¤ä»»åŠ¡åˆ°çº¿ç¨‹æ± ]
    B --&gt; C[æ•è·å¿«ç…§: 'ä»»åŠ¡2çš„å€¼']
    C --&gt; D[ä»»åŠ¡è¿›å…¥é˜Ÿåˆ—]
    D --&gt; E[çº¿ç¨‹æ± çº¿ç¨‹å‡†å¤‡æ‰§è¡Œ]
    E --&gt; F[æ¢å¤å¿«ç…§åˆ°å½“å‰çº¿ç¨‹]
    F --&gt; G[æ‰§è¡Œä»»åŠ¡: getè·å–åˆ°'ä»»åŠ¡2çš„å€¼']
    G --&gt; H[æ¸…ç†çº¿ç¨‹çŠ¶æ€]
    
    style A fill:#e1f5ff,stroke:#01579b,stroke-width:2px
    style B fill:#fff3e0,stroke:#e65100,stroke-width:2px
    style C fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    style D fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px
    style E fill:#fff3e0,stroke:#e65100,stroke-width:2px
    style F fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    style G fill:#e1f5ff,stroke:#01579b,stroke-width:2px
    style H fill:#ffebee,stroke:#b71c1c,stroke-width:2px
</code></pre>
<p><strong>æ ¸å¿ƒåŸç†ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TtlRunnable</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map snapshot;  <span class="hljs-comment">// å¿«ç…§</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Runnable task;              <span class="hljs-comment">// åŸå§‹ä»»åŠ¡</span>
    
    <span class="hljs-comment">// æäº¤æ—¶ï¼šæ•è·</span>
    TtlRunnable(Runnable task) {
        <span class="hljs-built_in">this</span>.task = task;
        <span class="hljs-built_in">this</span>.snapshot = captureAllTtlValues();  <span class="hljs-comment">// æŠŠæ‰€æœ‰ TTL çš„å€¼å­˜ä¸‹æ¥</span>
    }
    
    <span class="hljs-comment">// æ‰§è¡Œæ—¶ï¼šæ¢å¤ + æ¸…ç†</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Map</span> <span class="hljs-variable">backup</span> <span class="hljs-operator">=</span> restoreSnapshot(snapshot);  <span class="hljs-comment">// æ¢å¤å¿«ç…§</span>
        <span class="hljs-keyword">try</span> {
            task.run();  <span class="hljs-comment">// æ‰§è¡ŒçœŸæ­£çš„ä»»åŠ¡</span>
        } <span class="hljs-keyword">finally</span> {
            restoreBackup(backup);  <span class="hljs-comment">// è¿˜åŸçº¿ç¨‹åŸæ¥çš„çŠ¶æ€</span>
        }
    }
}
</code></pre>
<p>ä¸¾ä¸ªå…·ä½“ä¾‹å­ï¼š</p>
<ol>
<li>ä¸»çº¿ç¨‹è®¾ç½®ï¼šttl.set("ä»»åŠ¡2çš„å€¼")</li>
<li>æäº¤ä»»åŠ¡ï¼šexecutor.submit(task)
â†’ TtlRunnable ç«‹å³æ•è·å¿«ç…§: {"ä»»åŠ¡2çš„å€¼"}</li>
<li>çº¿ç¨‹æ± çº¿ç¨‹ï¼ˆå¯èƒ½æœ‰æ—§å€¼"ä»»åŠ¡1çš„å€¼"ï¼‰æ‰§è¡Œï¼š
â†’ å¤‡ä»½æ—§å€¼: {"ä»»åŠ¡1çš„å€¼"}
â†’ æ¢å¤å¿«ç…§: ttl.set("ä»»åŠ¡2çš„å€¼")
â†’ æ‰§è¡Œä»»åŠ¡: getè·å–åˆ°æ­£ç¡®çš„"ä»»åŠ¡2çš„å€¼"
â†’ è¿˜åŸæ—§å€¼: ttl.set("ä»»åŠ¡1çš„å€¼")</li>
</ol>
<p><strong>å…³é”®ç‚¹ï¼š</strong> æ¯æ¬¡æäº¤ä»»åŠ¡éƒ½ä¼šé‡æ–°æ•è·ï¼Œæ‰€ä»¥ä¸ä¼šä¸²ã€‚</p>
<h3 data-id="heading-13">å››ã€å®ç°æ–¹æ¡ˆ</h3>
<p>æœ‰äº† TTLï¼Œæˆ‘ä»¬å°±èƒ½å®ç°ä¸€ä¸ªå®Œæ•´çš„ TraceId ä¼ é€’æ–¹æ¡ˆäº†ã€‚</p>
<h4 data-id="heading-14">0. Maven ä¾èµ–</h4>
<pre><code class="hljs language-java" lang="java">
    com.alibaba
    transmittable-thread-local
    <span class="hljs-number">2.14</span><span class="hljs-number">.3</span>

</code></pre>
<h4 data-id="heading-15">1. TraceContextï¼šä¸Šä¸‹æ–‡ç®¡ç†</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TraceContext</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TRACE_ID_KEY</span> <span class="hljs-operator">=</span> &amp;#<span class="hljs-number">34</span>;traceId&amp;#<span class="hljs-number">34</span>;;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">HEADER_NAME</span> <span class="hljs-operator">=</span> &amp;#<span class="hljs-number">34</span>;X-Trace-Id&amp;#<span class="hljs-number">34</span>;;
    
    <span class="hljs-comment">// ä½¿ç”¨ TTL æ”¯æŒå¼‚æ­¥</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ThreadLocal</span> <span class="hljs-variable">holder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TransmittableThreadLocal</span>&lt;&gt;();
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setTraceId</span><span class="hljs-params">(String traceId)</span> {
        holder.set(traceId);           <span class="hljs-comment">// å­˜åˆ° TTL</span>
        MDC.put(TRACE_ID_KEY, traceId);  <span class="hljs-comment">// åŒæ­¥åˆ° MDCï¼ˆæ—¥å¿—ç”¨ï¼‰</span>
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getTraceId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> holder.get();
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">clear</span><span class="hljs-params">()</span> {
        holder.remove();
        MDC.clear();
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getHeaderName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> HEADER_NAME;
    }
}

</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¦åŒæ—¶æ”¾ MDCï¼Ÿ</strong></p>
<p>MDCï¼ˆMapped Diagnostic Contextï¼‰æ˜¯ Logback/Log4j æä¾›çš„çº¿ç¨‹çº§ä¸Šä¸‹æ–‡å®¹å™¨ï¼Œåº•å±‚åŸºäº ThreadLocal å®ç°ã€‚å®ƒçš„ä½œç”¨æ˜¯åœ¨æ—¥å¿—ä¸­è‡ªåŠ¨æ³¨å…¥ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</p>
<ul>
<li><strong>ThreadLocal</strong> æ˜¯ç»™ä»£ç ç”¨çš„ï¼Œé€šè¿‡ <code>TraceContext.getTraceId()</code> è·å–</li>
<li><strong>MDC</strong> æ˜¯ç»™æ—¥å¿—æ¡†æ¶ç”¨çš„ï¼Œlogback é…ç½® <code>%X{traceId}</code> åä¼šè‡ªåŠ¨ä» MDC å–å€¼</li>
</ul>
<p>è¿™æ ·æˆ‘ä»¬æ—¢å¯ä»¥åœ¨ä»£ç ä¸­è®¿é—® traceIdï¼Œåˆèƒ½è®©æ—¥å¿—è‡ªåŠ¨æ‰“å°å‡ºæ¥ã€‚</p>
<h4 data-id="heading-16">2. TraceFilterï¼šHTTP è¯·æ±‚å…¥å£</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Order(Ordered.HIGHEST_PRECEDENCE)</span>  <span class="hljs-comment">// æœ€é«˜ä¼˜å…ˆçº§ï¼Œç¬¬ä¸€ä¸ªæ‰§è¡Œ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TraceFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Filter</span> {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doFilter</span><span class="hljs-params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> {
        <span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">req</span> <span class="hljs-operator">=</span> (HttpServletRequest) request;
        
        <span class="hljs-comment">// 1. å°è¯•ä» Header è·å–ï¼ˆä¸Šæ¸¸ä¼ é€’è¿‡æ¥çš„ï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">traceId</span> <span class="hljs-operator">=</span> req.getHeader(TraceContext.getHeaderName());
        
        <span class="hljs-comment">// 2. å¦‚æœæ²¡æœ‰ï¼Œç”Ÿæˆæ–°çš„ï¼ˆå½“å‰æœåŠ¡æ˜¯å…¥å£ï¼‰</span>
        <span class="hljs-keyword">if</span> (traceId == <span class="hljs-literal">null</span> || traceId.isEmpty()) {
            traceId = UUID.randomUUID().toString().replace(&amp;#<span class="hljs-number">34</span>;-&amp;#<span class="hljs-number">34</span>;, &amp;#<span class="hljs-number">34</span>;&amp;#<span class="hljs-number">34</span>;);
        }
        
        <span class="hljs-comment">// 3. è®¾ç½®åˆ°ä¸Šä¸‹æ–‡</span>
        TraceContext.setTraceId(traceId);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 4. ç»§ç»­æ‰§è¡Œ</span>
            chain.doFilter(request, response);
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// 5. è¯·æ±‚ç»“æŸåæ¸…ç†ï¼ˆé˜²æ­¢çº¿ç¨‹æ± å¤ç”¨æ—¶æ±¡æŸ“ï¼‰</span>
            TraceContext.clear();
        }
    }
}
</code></pre>
<p><strong>æ‰§è¡Œæµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[HTTP è¯·æ±‚è¿›å…¥] --&gt; B{æ£€æŸ¥ Header}
    B --&gt;|æœ‰ traceId| C[ä½¿ç”¨ç°æœ‰ traceId]
    B --&gt;|æ—  traceId| D[ç”Ÿæˆæ–° traceId]
    C --&gt; E[TraceContext.setTraceId]
    D --&gt; E
    E --&gt; F[æ‰§è¡Œä¸šåŠ¡é€»è¾‘]
    F --&gt; G[finally æ¸…ç†]
    
    style A fill:#e1f5ff,stroke:#01579b,stroke-width:2px
    style B fill:#fff3e0,stroke:#e65100,stroke-width:2px
    style C fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px
    style D fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px
    style E fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    style F fill:#fff9c4,stroke:#f57f17,stroke-width:2px
    style G fill:#ffebee,stroke:#b71c1c,stroke-width:2px
</code></pre>
<h4 data-id="heading-17">3. Feign æ‹¦æˆªå™¨ï¼šæœåŠ¡é—´ä¼ é€’</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FeignConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RequestInterceptor <span class="hljs-title function_">traceInterceptor</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> template -&gt; {
            <span class="hljs-type">String</span> <span class="hljs-variable">traceId</span> <span class="hljs-operator">=</span> TraceContext.getTraceId();
            <span class="hljs-keyword">if</span> (traceId != <span class="hljs-literal">null</span>) {
                <span class="hljs-comment">// æ·»åŠ åˆ° HTTP Header</span>
                template.header(TraceContext.getHeaderName(), traceId);
            }
        };
    }
}
</code></pre>
<p>è¿™æ · Feign è°ƒç”¨æ—¶ä¼šè‡ªåŠ¨æŠŠ traceId åŠ åˆ° Header é‡Œã€‚</p>
<h4 data-id="heading-18">4. RestTemplate æ‹¦æˆªå™¨</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RestTemplateConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RestTemplate <span class="hljs-title function_">restTemplate</span><span class="hljs-params">()</span> {
        <span class="hljs-type">RestTemplate</span> <span class="hljs-variable">restTemplate</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestTemplate</span>();
        
        <span class="hljs-comment">// æ·»åŠ æ‹¦æˆªå™¨</span>
        restTemplate.setInterceptors(Collections.singletonList(
            (request, body, execution) -&gt; {
                <span class="hljs-type">String</span> <span class="hljs-variable">traceId</span> <span class="hljs-operator">=</span> TraceContext.getTraceId();
                <span class="hljs-keyword">if</span> (traceId != <span class="hljs-literal">null</span>) {
                    request.getHeaders().add(TraceContext.getHeaderName(), traceId);
                }
                <span class="hljs-keyword">return</span> execution.execute(request, body);
            }
        ));
        
        <span class="hljs-keyword">return</span> restTemplate;
    }
}
</code></pre>
<h4 data-id="heading-19">5. å¼‚æ­¥é…ç½®ï¼šæ”¯æŒ @Async</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableAsync</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> Executor <span class="hljs-title function_">asyncExecutor</span><span class="hljs-params">()</span> {
        <span class="hljs-type">ThreadPoolTaskExecutor</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolTaskExecutor</span>();
        executor.setCorePoolSize(<span class="hljs-number">10</span>);
        executor.setMaxPoolSize(<span class="hljs-number">20</span>);
        executor.setThreadNamePrefix(&amp;#<span class="hljs-number">34</span>;async-&amp;#<span class="hljs-number">34</span>;);
        
        <span class="hljs-comment">// å…³é”®ï¼šä½¿ç”¨ TTL åŒ…è£… Runnableï¼Œè‡ªåŠ¨é€ä¼  ThreadLocal å˜é‡</span>
        <span class="hljs-comment">// TtlRunnable.get(runnable) ä¼šæ•è·å½“å‰çº¿ç¨‹çš„ TTL å€¼ï¼Œå¹¶åœ¨æ‰§è¡Œæ—¶æ¢å¤</span>
        executor.setTaskDecorator(TtlRunnable::get);
        
        executor.initialize();
        <span class="hljs-keyword">return</span> executor;
    }
}
</code></pre>
<h4 data-id="heading-20">6. æ—¥å¿—é…ç½®</h4>
<pre><code class="hljs language-xml" lang="xml">

    
        
            
            %d{HH:mm:ss.SSS} [%X{traceId}] %-5level %logger{36} - %msg%n
        
    
    
    
        
    

</code></pre>
<p><code>**è¯´æ˜ï¼š**</code>%X{traceId}<code>æ˜¯ MDC çš„å ä½ç¬¦è¯­æ³•ï¼Œå…¶ä¸­</code>traceId<code>å¿…é¡»å’Œä»£ç ä¸­</code>MDC.put("traceId", ...)` çš„ key ä¿æŒä¸€è‡´ã€‚</p>
<h3 data-id="heading-21">äº”ã€å®Œæ•´è°ƒç”¨é“¾è·¯</h3>
<p>æŠŠæ‰€æœ‰ç»„ä»¶ä¸²èµ·æ¥ï¼Œå®Œæ•´çš„æµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Client as å®¢æˆ·ç«¯
    participant Filter as TraceFilter
    participant UserSvc as UserController
    participant Feign as Feignæ‹¦æˆªå™¨
    participant OrderSvc as OrderService
    
    rect rgb(225, 245, 255)
    Note over Client,Filter: 1. è¯·æ±‚è¿›å…¥
    Client-&gt;&gt;Filter: HTTP è¯·æ±‚
    Filter-&gt;&gt;Filter: ç”Ÿæˆ traceId=abc123
    Filter-&gt;&gt;Filter: TraceContext.setTraceId()
    end
    
    rect rgb(255, 243, 224)
    Note over Filter,UserSvc: 2. ç”¨æˆ·æœåŠ¡å¤„ç†
    Filter-&gt;&gt;UserSvc: å¤„ç†è¯·æ±‚
    UserSvc-&gt;&gt;UserSvc: log.info() [abc123]
    end
    
    rect rgb(243, 229, 245)
    Note over UserSvc,OrderSvc: 3. è°ƒç”¨è®¢å•æœåŠ¡
    UserSvc-&gt;&gt;Feign: è°ƒç”¨è®¢å•æœåŠ¡
    Feign-&gt;&gt;Feign: TraceContext.getTraceId()
    Feign-&gt;&gt;OrderSvc: HTTP Request&lt;br/&gt;Header: X-Trace-Id=abc123
    end
    
    rect rgb(232, 245, 233)
    Note over OrderSvc: 4. è®¢å•æœåŠ¡å¤„ç†
    OrderSvc-&gt;&gt;OrderSvc: TraceFilter æ¥æ”¶ traceId
    OrderSvc-&gt;&gt;OrderSvc: log.info() [abc123]
    OrderSvc--&gt;&gt;UserSvc: è¿”å›ç»“æœ
    end
    
    rect rgb(255, 235, 238)
    Note over UserSvc,Filter: 5. æ¸…ç†è¿”å›
    UserSvc--&gt;&gt;Filter: è¿”å›å“åº”
    Filter-&gt;&gt;Filter: TraceContext.clear()
    Filter--&gt;&gt;Client: HTTP å“åº”
    end
</code></pre>
<h3 data-id="heading-22">å…­ã€å®é™…æ•ˆæœ</h3>
<h4 data-id="heading-23">æ—¥å¿—è¾“å‡º</h4>
<p><strong>ç”¨æˆ·æœåŠ¡ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">10:30:15.123 <span class="hljs-section">[abc123]</span> INFO  UserController - æŸ¥è¯¢ç”¨æˆ·è®¢å•, userId: 1001
10:30:15.150 <span class="hljs-section">[abc123]</span> INFO  UserService - è°ƒç”¨è®¢å•æœåŠ¡
</code></pre>
<p><strong>è®¢å•æœåŠ¡ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">10:30:15.180 <span class="hljs-section">[abc123]</span> INFO  OrderController - æ”¶åˆ°è®¢å•æŸ¥è¯¢è¯·æ±‚, userId: 1001
10:30:15.190 <span class="hljs-section">[abc123]</span> INFO  OrderService - è¿”å›2ä¸ªè®¢å•
</code></pre>
<p>åŒä¸€æ¬¡è¯·æ±‚çš„æ‰€æœ‰æ—¥å¿—ï¼ŒtraceId éƒ½æ˜¯ <code>abc123</code>ï¼Œåœ¨ ELK æˆ–ä»»ä½•æ—¥å¿—ç³»ç»Ÿä¸­æœç´¢è¿™ä¸ª IDï¼Œå°±èƒ½çœ‹åˆ°å®Œæ•´é“¾è·¯ã€‚</p>
<h4 data-id="heading-24">å¼‚æ­¥åœºæ™¯</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@GetMapping(&amp;#34;/test-async&amp;#34;)</span>
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">testAsync</span><span class="hljs-params">()</span> {
    log.info(&amp;#<span class="hljs-number">34</span>;ä¸»çº¿ç¨‹å¤„ç†&amp;#<span class="hljs-number">34</span>;);           <span class="hljs-comment">// [abc123]</span>
    asyncService.sendEmail();        
    <span class="hljs-keyword">return</span> &amp;#<span class="hljs-number">34</span>;success&amp;#<span class="hljs-number">34</span>;;
}

<span class="hljs-meta">@Async(&amp;#34;asyncExecutor&amp;#34;)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendEmail</span><span class="hljs-params">()</span> {
    log.info(&amp;#<span class="hljs-number">34</span>;å¼‚æ­¥å‘é€é‚®ä»¶&amp;#<span class="hljs-number">34</span>;);         <span class="hljs-comment">// [abc123]ï¼Œä¸ä¼šä¸¢ï¼</span>
}
</code></pre>
<p><strong>æ—¥å¿—è¾“å‡ºï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">10:30:20.100 <span class="hljs-section">[abc123]</span> INFO  Controller - ä¸»çº¿ç¨‹å¤„ç†
10:30:20.120 <span class="hljs-section">[abc123]</span> INFO  AsyncService - å¼‚æ­¥å‘é€é‚®ä»¶
</code></pre>
<h3 data-id="heading-25">ä¸ƒã€å¸¸è§é—®é¢˜</h3>
<h4 data-id="heading-26">é—®é¢˜1ï¼šæ—¥å¿—é‡Œ traceId æ˜¯ç©ºçš„</h4>
<p><strong>åŸå› ï¼š</strong> Filter çš„ä¼˜å…ˆçº§ä¸å¤Ÿé«˜ï¼Œæˆ–è€… MDC çš„ key ä¸å¯¹ã€‚</p>
<p><strong>è§£å†³ï¼š</strong></p>
<ul>
<li>ç¡®ä¿ Filter åŠ äº† <code>@Order(Ordered.HIGHEST_PRECEDENCE)</code></li>
<li>æ£€æŸ¥ logback é…ç½®çš„ <code>%X{traceId}</code> æ˜¯å¦å’Œä»£ç é‡Œçš„ key ä¸€è‡´</li>
</ul>
<h4 data-id="heading-27">é—®é¢˜2ï¼šå¼‚æ­¥ä»»åŠ¡é‡Œ traceId æ˜¯ null</h4>
<p><strong>åŸå› ï¼š</strong> çº¿ç¨‹æ± æ²¡æœ‰ç”¨ TTL åŒ…è£…ã€‚</p>
<p><strong>è§£å†³ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java">executor.setTaskDecorator(TtlRunnable::get);
</code></pre>
<h4 data-id="heading-28">é—®é¢˜3ï¼šè·¨æœåŠ¡è°ƒç”¨ traceId ä¸ä¸€è‡´</h4>
<p><strong>åŸå› ï¼š</strong> Feign æˆ– RestTemplate æ‹¦æˆªå™¨æ²¡ç”Ÿæ•ˆã€‚</p>
<p><strong>æ’æŸ¥ï¼š</strong></p>
<ul>
<li>æ£€æŸ¥ FeignConfig æ˜¯å¦è¢« Spring æ‰«æåˆ°</li>
<li>åœ¨æ‹¦æˆªå™¨é‡ŒåŠ  logï¼Œçœ‹æ˜¯å¦æ‰§è¡Œäº†</li>
<li>ç¡®è®¤æ‹¦æˆªå™¨é…ç½®ä¸º <code>@Bean</code></li>
</ul>
<h4 data-id="heading-29">é—®é¢˜4ï¼šçº¿ç¨‹æ± å¤ç”¨å¯¼è‡´ traceId ä¸²å·</h4>
<p><strong>åŸå› ï¼š</strong> Filter é‡Œæ²¡æœ‰ finally æ¸…ç†ã€‚</p>
<p><strong>è§£å†³ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">try</span> {
    chain.doFilter(request, response);
} <span class="hljs-keyword">finally</span> {
    TraceContext.clear();  <span class="hljs-comment">// å¿…é¡»æ¸…ç†</span>
}
</code></pre>
<h3 data-id="heading-30">å…«ã€æ€§èƒ½å½±å“</h3>
<p>å®æµ‹æ•°æ®ï¼ˆåŸºäº Spring Boot 2.7 + JDK 17ï¼‰ï¼š</p>

































<table><thead><tr><th>æ“ä½œ</th><th>è€—æ—¶</th></tr></thead><tbody><tr><td>TraceId ç”Ÿæˆï¼ˆUUIDï¼‰</td><td>0.001ms</td></tr><tr><td>ThreadLocal.set()</td><td>0.0001ms</td></tr><tr><td>MDC.put()</td><td>0.0002ms</td></tr><tr><td>Filter æ‹¦æˆª</td><td>0.5ms</td></tr><tr><td>Feign æ‹¦æˆªå™¨</td><td>0.1ms</td></tr><tr><td>TTL è£…é¥°</td><td>0.01ms</td></tr></tbody></table>
<p><strong>ç»“è®ºï¼š</strong> æ€§èƒ½å½±å“å¯ä»¥å¿½ç•¥ä¸è®¡ï¼ˆæ€»è®¡ &lt; 1msï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-31">ä¹ã€é…ç½®æ£€æŸ¥æ¸…å•</h3>
<p>åœ¨å®é™…è½åœ°æ—¶ï¼Œå¯ä»¥æŒ‰ç…§è¿™ä¸ªæ¸…å•æ£€æŸ¥é…ç½®æ˜¯å¦å®Œæ•´ï¼š</p>
<h4 data-id="heading-32">åŸºç¡€é…ç½®</h4>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å¼•å…¥ TTL ä¾èµ–ï¼ˆ<code>transmittable-thread-local</code>ï¼‰</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> TraceContext ä½¿ç”¨ <code>TransmittableThreadLocal</code> è€Œéæ™®é€š <code>ThreadLocal</code></li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> TraceContext.setTraceId() åŒæ—¶æ›´æ–° MDC</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> TraceFilter è®¾ç½®äº† <code>@Order(Ordered.HIGHEST_PRECEDENCE)</code></li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> TraceFilter çš„ finally å—è°ƒç”¨äº† <code>TraceContext.clear()</code></li>
</ul>
<h4 data-id="heading-33">æœåŠ¡é—´è°ƒç”¨</h4>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> FeignConfig é…ç½®äº† <code>RequestInterceptor</code></li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> RestTemplate æ·»åŠ äº†æ‹¦æˆªå™¨</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> Header åç§°ç»Ÿä¸€ä¸º <code>X-Trace-Id</code>ï¼ˆæˆ–è‡ªå®šä¹‰åç§°ï¼‰</li>
</ul>
<h4 data-id="heading-34">å¼‚æ­¥åœºæ™¯</h4>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> çº¿ç¨‹æ± é…ç½®äº† <code>TaskDecorator(TtlRunnable::get)</code></li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> @Async ä½¿ç”¨äº†é…ç½®å¥½çš„çº¿ç¨‹æ±  Bean</li>
</ul>
<h4 data-id="heading-35">æ—¥å¿—é…ç½®</h4>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> logback.xml ä½¿ç”¨äº† <code>%X{traceId}</code> å ä½ç¬¦</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> MDC çš„ key ä¸ logback é…ç½®ä¸€è‡´</li>
</ul>
<hr/>
<h3 data-id="heading-36">åã€æ€»ç»“</h3>
<h4 data-id="heading-37">æ ¸å¿ƒè¦ç‚¹</h4>
<ol>
<li><strong>ThreadLocal åªèƒ½åœ¨åŒä¸€çº¿ç¨‹å†…å…±äº«</strong>ï¼Œæ— æ³•è·¨çº¿ç¨‹</li>
<li><strong>InheritableThreadLocal æ”¯æŒçˆ¶å­çº¿ç¨‹</strong>ï¼Œä½†çº¿ç¨‹æ± ä¼šå¤ç”¨å¯¼è‡´å¤±æ•ˆ</li>
<li><strong>TransmittableThreadLocal é€šè¿‡æ•è·-æ¢å¤-æ¸…ç†æœºåˆ¶</strong>ï¼Œå®Œç¾æ”¯æŒæ‰€æœ‰åœºæ™¯</li>
<li><strong>MDC æ˜¯ ThreadLocal çš„å°è£…</strong>ï¼Œä¸“é—¨ç»™æ—¥å¿—æ¡†æ¶ç”¨</li>
<li><strong>Filter å¿…é¡»è®¾ç½®æœ€é«˜ä¼˜å…ˆçº§</strong>ï¼Œä¿è¯ç¬¬ä¸€ä¸ªæ‰§è¡Œ</li>
<li><strong>finally å—å¿…é¡»æ¸…ç†</strong>ï¼Œé˜²æ­¢çº¿ç¨‹æ± å¤ç”¨æ±¡æŸ“</li>
</ol>
<h4 data-id="heading-38">æœ€ä½³å®è·µ</h4>
<ol>
<li>ä½¿ç”¨ TTL ä½œä¸ºåº•å±‚å­˜å‚¨</li>
<li>åŒæ—¶æ”¾å…¥ MDCï¼Œæ–¹ä¾¿æ—¥å¿—</li>
<li>Filter ç”¨æœ€é«˜ä¼˜å…ˆçº§</li>
<li>å¼‚æ­¥çº¿ç¨‹æ± ç”¨ TTL åŒ…è£…</li>
<li>æ‹¦æˆªå™¨ç»Ÿä¸€æ·»åŠ  Header</li>
<li>åŠ¡å¿…åœ¨ finally æ¸…ç†</li>
</ol>
<h4 data-id="heading-39">æ‰©å±•æ–¹å‘</h4>
<p>å¦‚æœä½ çš„é¡¹ç›®è¿˜æœ‰å…¶ä»–åœºæ™¯ï¼š</p>
<ul>
<li><strong>æ¶ˆæ¯é˜Ÿåˆ—</strong>ï¼šåœ¨ Message Header é‡Œä¼ é€’ traceId</li>
<li><strong>Dubbo RPC</strong>ï¼šåœ¨ RpcContext é‡Œä¼ é€’</li>
<li><strong>å®šæ—¶ä»»åŠ¡</strong>ï¼šç”Ÿæˆæ–°çš„ traceId</li>
<li><strong>Gateway</strong>ï¼šç»Ÿä¸€åœ¨ç½‘å…³ç”Ÿæˆ traceId</li>
</ul>
<h4 data-id="heading-40">è¿›ä¸€æ­¥å­¦ä¹ </h4>
<p>æŒæ¡äº†æœ¬æ–‡å†…å®¹åï¼Œå¯ä»¥ç»§ç»­äº†è§£ï¼š</p>
<ul>
<li><strong>SkyWalking</strong>ï¼šè‡ªåŠ¨åŒ–çš„é“¾è·¯è¿½è¸ªï¼Œé€šè¿‡å­—èŠ‚ç å¢å¼ºå®ç°é›¶ä¾µå…¥</li>
<li><strong>Zipkin</strong>ï¼šåˆ†å¸ƒå¼è¿½è¸ªç³»ç»Ÿï¼Œå¯è§†åŒ–è°ƒç”¨é“¾è·¯</li>
<li><strong>OpenTelemetry</strong>ï¼šæ–°ä¸€ä»£æ ‡å‡†ï¼Œè·¨è¯­è¨€ç»Ÿä¸€</li>
</ul>
<h3 data-id="heading-41">å†™åœ¨æœ€å</h3>
<p>TraceId ä¼ é€’çœ‹ä¼¼ç®€å•ï¼Œä½†è¦åšåˆ°é›¶ä¾µå…¥ã€å…¨åœºæ™¯è¦†ç›–ï¼Œè¿˜æ˜¯æœ‰ä¸å°‘ç»†èŠ‚çš„ã€‚ç†è§£äº† ThreadLocal å®¶æ—çš„ä¸‰å…„å¼Ÿï¼Œç‰¹åˆ«æ˜¯ TTL çš„æ•è·-æ¢å¤-æ¸…ç†æœºåˆ¶ï¼Œå°±èƒ½åº”å¯¹å„ç§å¤æ‚åœºæ™¯ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®ä½ å½»åº•ææ‡‚ TraceId ä¼ é€’çš„åŸç†å’Œå®ç°ã€‚</p>
<hr/>
<h4 data-id="heading-42">äº’åŠ¨äº¤æµ</h4>
<p>å¦‚æœä½ åœ¨é¡¹ç›®ä¸­ä¹Ÿé‡åˆ°è¿‡ï¼š</p>
<ul>
<li>TraceId åœ¨å¼‚æ­¥ä»»åŠ¡ä¸­ä¸¢å¤±</li>
<li>çº¿ç¨‹æ± å¤ç”¨å¯¼è‡´ traceId ä¸²å·</li>
<li>è·¨æœåŠ¡è°ƒç”¨ traceId æ–­å¼€</li>
</ul>
<p>æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„è§£å†³æ–¹æ¡ˆï¼è¿™å¥—æ–¹æ¡ˆå·²åœ¨å¤šä¸ªç”Ÿäº§ç¯å¢ƒéªŒè¯ï¼Œå¸Œæœ›èƒ½å¸®åˆ°ä½ ã€‚</p>
<p><strong>è§‰å¾—æœ‰å¸®åŠ©ï¼Ÿåˆ«å¿˜äº†ç‚¹èµã€æ”¶è—ï¼Œæˆ–è€…åˆ†äº«ç»™æ­£åœ¨è¸©å‘çš„åŒäº‹</strong> ğŸ‘</p>
<hr/>
<h4 data-id="heading-43">å¸¸è§é—®é¢˜é€ŸæŸ¥è¡¨</h4>






























<table><thead><tr><th>é—®é¢˜ç°è±¡</th><th>å¯èƒ½åŸå› </th><th>æ’æŸ¥æ–¹å‘</th></tr></thead><tbody><tr><td>æ—¥å¿—ä¸­ traceId ä¸ºç©º</td><td>Filter ä¼˜å…ˆçº§ä½æˆ– MDC key ä¸åŒ¹é…</td><td>æ£€æŸ¥ @Order å’Œ %X{traceId}</td></tr><tr><td>å¼‚æ­¥ä»»åŠ¡ traceId ä¸¢å¤±</td><td>çº¿ç¨‹æ± æœª TTL åŒ…è£…</td><td>æ£€æŸ¥ TaskDecorator é…ç½®</td></tr><tr><td>è·¨æœåŠ¡ traceId æ–­å¼€</td><td>æ‹¦æˆªå™¨æœªç”Ÿæ•ˆ</td><td>æ£€æŸ¥ @Bean å’Œç»„ä»¶æ‰«æ</td></tr><tr><td>çº¿ç¨‹æ±  traceId ä¸²å·</td><td>æœªæ¸…ç† ThreadLocal</td><td>æ£€æŸ¥ finally å—</td></tr></tbody></table>
<hr/>
<p><strong>å®Œæ•´ä»£ç ç¤ºä¾‹å·²å¼€æºï¼Œæ¬¢è¿å‚è€ƒå­¦ä¹ ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaSE è¿›é˜¶ï¼šä»£ç†è®¾è®¡æ¨¡å¼æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼ˆé™æ€ä»£ç† + åŠ¨æ€ä»£ç† + åå°„å®ç° + å®æˆ˜æ¡ˆä¾‹ï¼‰]]></title>    <link>https://juejin.cn/post/7581893894176178186</link>    <guid>https://juejin.cn/post/7581893894176178186</guid>    <pubDate>2025-12-10T12:26:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581893894176178186" data-draft-id="7582048028392603698" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaSE è¿›é˜¶ï¼šä»£ç†è®¾è®¡æ¨¡å¼æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼ˆé™æ€ä»£ç† + åŠ¨æ€ä»£ç† + åå°„å®ç° + å®æˆ˜æ¡ˆä¾‹ï¼‰"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-12-10T12:26:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜æ ¹æ ¹"/> <meta itemprop="url" content="https://juejin.cn/user/555679166786139"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaSE è¿›é˜¶ï¼šä»£ç†è®¾è®¡æ¨¡å¼æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼ˆé™æ€ä»£ç† + åŠ¨æ€ä»£ç† + åå°„å®ç° + å®æˆ˜æ¡ˆä¾‹ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/555679166786139/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜æ ¹æ ¹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T12:26:36.000Z" title="Wed Dec 10 2025 12:26:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼ä»£ç†è®¾è®¡æ¨¡å¼æ˜¯ Java ä¸­æå…·å®ç”¨ä»·å€¼çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒé€šè¿‡"å¼•å…¥ä¸­é—´ä»£ç†å¯¹è±¡"çš„æ–¹å¼ï¼Œåœ¨ä¸ä¿®æ”¹ç›®æ ‡å¯¹è±¡ä»£ç çš„å‰æä¸‹å®ç°åŠŸèƒ½å¢å¼ºï¼Œè¿™åœ¨æ—¥å¿—è®°å½•ã€äº‹åŠ¡æ§åˆ¶ã€æƒé™æ ¡éªŒç­‰åœºæ™¯ä¸­ä¸å¯æˆ–ç¼ºã€‚å¾ˆå¤šå¼€å‘è€…å®¹æ˜“æ··æ·†é™æ€ä»£ç†ä¸åŠ¨æ€ä»£ç†çš„é€‚ç”¨åœºæ™¯ï¼Œä¹Ÿä¸æ¸…æ¥šåå°„å¦‚ä½•æ”¯æ’‘åŠ¨æ€ä»£ç†çš„å®ç°ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« ä¼šä»ä»£ç†æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³å‡ºå‘ï¼Œæ‹†è§£é™æ€ä»£ç†ä¸åŠ¨æ€ä»£ç†çš„åŒºåˆ«ï¼Œæ·±å…¥è®²è§£åŸºäºåå°„çš„ JDK åŠ¨æ€ä»£ç†å®ç°ç»†èŠ‚ï¼Œå¸®ä½ å½»åº•åƒé€ä»£ç†è®¾è®¡æ¨¡å¼çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä»£ç†æ¨¡å¼æ ¸å¿ƒè®¤çŸ¥ï¼šå…ˆææ‡‚"ä¸ºä»€ä¹ˆéœ€è¦ä»£ç†"</h2>
<h3 data-id="heading-1">1.1 ä»€ä¹ˆæ˜¯ä»£ç†æ¨¡å¼ï¼Ÿ</h3>
<p>ä»£ç†æ¨¡å¼ï¼ˆProxy Patternï¼‰æ˜¯ç»“æ„å‹è®¾è®¡æ¨¡å¼çš„ä¸€ç§ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>ä¸ºç›®æ ‡å¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œç”±ä»£ç†å¯¹è±¡æ§åˆ¶å¯¹ç›®æ ‡å¯¹è±¡çš„è®¿é—®ï¼Œå¹¶åœ¨è®¿é—®å‰åæ·»åŠ é¢å¤–åŠŸèƒ½</strong>ã€‚å°±åƒç”Ÿæ´»ä¸­çš„æ˜æ˜Ÿï¼ˆå®¢æˆ·ç«¯ï¼‰ä¸ç›´æ¥ä¸èŠ‚ç›®ï¼ˆç›®æ ‡å¯¹è±¡ï¼‰æ‰“äº¤é“ï¼Œè€Œæ˜¯é€šè¿‡ç»çºªäººï¼ˆä»£ç†å¯¹è±¡ï¼‰å®Œæˆè®®ä»·ã€å‡†å¤‡ç­‰æ“ä½œã€‚</p>
<p>åœ¨ Java ä¸­ï¼Œä»£ç†æ¨¡å¼åŒ…å«ä¸‰ä¸ªæ ¸å¿ƒè§’è‰²ï¼š</p>
<ul>
<li><strong>ç›®æ ‡å¯¹è±¡ï¼ˆTargetï¼‰</strong> ï¼šè¢«ä»£ç†çš„æ ¸å¿ƒå¯¹è±¡ï¼Œè´Ÿè´£å®ç°æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚æ˜æ˜Ÿå»å®ç°â€œè¡¨æ¼”å†…å®¹â€ï¼‰ï¼›</li>
<li><strong>ä»£ç†å¯¹è±¡ï¼ˆProxyï¼‰</strong> ï¼šæŒæœ‰ç›®æ ‡å¯¹è±¡çš„å¼•ç”¨ï¼Œå¯¹å¤–æä¾›ä¸ç›®æ ‡å¯¹è±¡ä¸€è‡´çš„æ¥å£ï¼Œè´Ÿè´£æ·»åŠ é¢å¤–åŠŸèƒ½å¹¶è°ƒç”¨ç›®æ ‡å¯¹è±¡æ–¹æ³•ï¼ˆå¦‚ç»çºªäººå’ŒèŠ‚ç›®è°ˆé’±ï¼Œåšè¡¨æ¼”å‰çš„å‡†å¤‡ï¼‰ï¼›</li>
<li><strong>æŠ½è±¡æ¥å£ï¼ˆSubjectï¼‰</strong> ï¼šç›®æ ‡å¯¹è±¡å’Œä»£ç†å¯¹è±¡å…±åŒå®ç°çš„æ¥å£ï¼Œå®šä¹‰æ ¸å¿ƒä¸šåŠ¡æ–¹æ³•ï¼ˆå¦‚â€œè¡¨æ¼”â€ï¼‰ï¼Œä¿è¯ä»£ç†å¯¹è±¡ä¸ç›®æ ‡å¯¹è±¡çš„ä¸€è‡´æ€§ã€‚</li>
</ul>
<h3 data-id="heading-2">1.2 ä¸ºä»€ä¹ˆè¦ç”¨ä»£ç†æ¨¡å¼ï¼Ÿæ ¸å¿ƒä»·å€¼</h3>
<p>ä»£ç†æ¨¡å¼çš„æ ¸å¿ƒä»·å€¼æ˜¯"è§£è€¦æ ¸å¿ƒé€»è¾‘ä¸é™„åŠ åŠŸèƒ½"ï¼Œå…·ä½“ä½“ç°åœ¨ä¸‰ä¸ªæ–¹é¢ï¼š</p>
<ol>
<li><strong>åŠŸèƒ½å¢å¼º</strong>ï¼šåœ¨ä¸ä¿®æ”¹ç›®æ ‡å¯¹è±¡ä»£ç çš„å‰æä¸‹ï¼Œä¸ºç›®æ ‡æ–¹æ³•æ·»åŠ æ—¥å¿—ã€è®¡æ—¶ã€æƒé™æ ¡éªŒç­‰é™„åŠ åŠŸèƒ½ï¼ˆç¬¦åˆ"å¼€é—­åŸåˆ™"ï¼‰ï¼›</li>
<li><strong>æ§åˆ¶è®¿é—®</strong>ï¼šä»£ç†å¯¹è±¡å¯æ§åˆ¶å¯¹ç›®æ ‡å¯¹è±¡çš„è®¿é—®æ—¶æœºã€æƒé™ï¼Œæ¯”å¦‚æ‹’ç»æœªç™»å½•ç”¨æˆ·è°ƒç”¨æ ¸å¿ƒæ–¹æ³•ï¼›</li>
<li><strong>éšè—ç»†èŠ‚</strong>ï¼šä»£ç†å¯¹è±¡å¯å°è£…ç›®æ ‡å¯¹è±¡çš„å¤æ‚åˆ›å»ºè¿‡ç¨‹ï¼ˆå¦‚è¿œç¨‹æœåŠ¡è°ƒç”¨çš„è¿æ¥å»ºç«‹ï¼‰ï¼Œå®¢æˆ·ç«¯åªéœ€ä¸ä»£ç†äº¤äº’ã€‚</li>
</ol>
<p>å…³é”®åœºæ™¯ï¼šSpring AOP çš„æ ¸å¿ƒå°±æ˜¯åŠ¨æ€ä»£ç†ï¼Œäº‹åŠ¡ç®¡ç†ã€æ—¥å¿—åˆ‡é¢ç­‰éƒ½æ˜¯é€šè¿‡ä»£ç†å®ç°ï¼›RPC æ¡†æ¶ä¸­ï¼Œè¿œç¨‹æœåŠ¡çš„æœ¬åœ°ä»£ç†ä¹Ÿä¾èµ–æ­¤æ¨¡å¼ã€‚</p>
<h3 data-id="heading-3">1.3 ä»£ç†æ¨¡å¼çš„åˆ†ç±»ï¼šé™æ€ vs åŠ¨æ€</h3>
<p>æ ¹æ®ä»£ç†å¯¹è±¡çš„åˆ›å»ºæ—¶æœºï¼Œä»£ç†æ¨¡å¼åˆ†ä¸ºé™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†ä¸¤ç±»ï¼Œæ ¸å¿ƒåŒºåˆ«åœ¨äº"ä»£ç†ç±»æ˜¯å¦åœ¨ç¼–è¯‘æœŸç”Ÿæˆ"ï¼š</p>



































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>é™æ€ä»£ç†</th><th>åŠ¨æ€ä»£ç†</th><th/></tr></thead><tbody><tr><td>ä»£ç†ç±»ç”Ÿæˆæ—¶æœº</td><td>ç¼–è¯‘æœŸæ‰‹åŠ¨ç¼–å†™æˆ–é€šè¿‡å·¥å…·ç”Ÿæˆ</td><td>è¿è¡Œæ—¶é€šè¿‡åå°„æˆ–å­—èŠ‚ç æŠ€æœ¯åŠ¨æ€ç”Ÿæˆ</td><td/></tr><tr><td>ä»£ç çµæ´»æ€§</td><td>ä½ï¼Œä¸€ä¸ªä»£ç†ç±»é€šå¸¸å¯¹åº”ä¸€ä¸ªç›®æ ‡ç±»</td><td>é«˜ï¼Œä¸€ä¸ªä»£ç†å¤„ç†å™¨å¯ä»£ç†å¤šä¸ªç›®æ ‡ç±»</td><td/></tr><tr><td>ç»´æŠ¤æˆæœ¬</td><td>é«˜ï¼Œç›®æ ‡ç±»æ¥å£ä¿®æ”¹æ—¶éœ€åŒæ­¥ä¿®æ”¹ä»£ç†ç±»</td><td>ä½ï¼Œæ— éœ€æ‰‹åŠ¨ç»´æŠ¤ä»£ç†ç±»ä»£ç </td><td/></tr><tr><td>æ ¸å¿ƒæŠ€æœ¯</td><td>é¢å‘æ¥å£ç¼–ç¨‹</td><td>åå°„ï¼ˆJDK ä»£ç†ï¼‰ã€å­—èŠ‚ç ä¿®æ”¹ï¼ˆCGLIBï¼‰</td><td/></tr></tbody></table>
<h2 data-id="heading-4">äºŒã€é™æ€ä»£ç†ï¼šå…¥é—¨çº§å®ç°ï¼Œç†è§£æ ¸å¿ƒæµç¨‹</h2>
<p>é™æ€ä»£ç†æ˜¯ä»£ç†æ¨¡å¼çš„åŸºç¡€å®ç°ï¼Œä»£ç†ç±»åœ¨ç¼–è¯‘æœŸå°±å·²ç¡®å®šï¼Œé€‚åˆç®€å•åœºæ™¯ã€‚ä¸‹é¢ä»¥"æ˜æ˜Ÿè¡¨æ¼”"ä¸ºä¾‹ï¼Œå®Œæ•´å®ç°é™æ€ä»£ç†ã€‚</p>
<h3 data-id="heading-5">2.1 å®ç°æ­¥éª¤ï¼šä¸‰æ­¥å®Œæˆé™æ€ä»£ç†</h3>
<h4 data-id="heading-6">2.1.1  <strong>æ­¥éª¤1ï¼šå®šä¹‰æŠ½è±¡æ¥å£ï¼ˆSubjectï¼‰</strong> ï¼šç»Ÿä¸€ç›®æ ‡å¯¹è±¡å’Œä»£ç†å¯¹è±¡çš„æ–¹æ³•</h4>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Star</span> {
    <span class="hljs-comment">/**
     * å®ç°å”±æ­Œçš„æ–¹æ³•
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">sing</span><span class="hljs-params">()</span>;

    <span class="hljs-comment">/**
     * å®ç°è·³èˆçš„æ–¹æ³•
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">dance</span><span class="hljs-params">()</span>;

}
</code></pre>
<h4 data-id="heading-7">2.1.2  <strong>æ­¥éª¤2ï¼šå®ç°ç›®æ ‡å¯¹è±¡ï¼ˆTargetï¼‰</strong> ï¼šä¸“æ³¨æ ¸å¿ƒä¸šåŠ¡é€»è¾‘</h4>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">XXXStar</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Star</span>{

    <span class="hljs-comment">/**
     * å®ç°å”±æ­Œçš„æ–¹æ³•
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sing</span><span class="hljs-params">()</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;xxxåœ¨å”±æ­Œ&amp;#<span class="hljs-number">34</span>;);
    }

    <span class="hljs-comment">/**
     * å®ç°è·³èˆçš„æ–¹æ³•
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dance</span><span class="hljs-params">()</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;xxxåœ¨è·³èˆ&amp;#<span class="hljs-number">34</span>;);
    }
}
</code></pre>
<h4 data-id="heading-8">2.1.3  <strong>æ­¥éª¤3ï¼šå®ç°ä»£ç†å¯¹è±¡ï¼ˆProxyï¼‰</strong> ï¼šæŒæœ‰ç›®æ ‡å¯¹è±¡å¼•ç”¨ï¼Œæ·»åŠ é¢å¤–åŠŸèƒ½</h4>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-meta">@Data</span>
<span class="hljs-meta">@NoArgsConstructor</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JJRProxy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Star</span>{

    <span class="hljs-comment">//ä»£ç†ç±»è¦æ±‚ï¼šå®šä¹‰ç›®æ ‡å¯¹è±¡æˆå‘˜å˜é‡</span>
    <span class="hljs-keyword">private</span> Star star;
    <span class="hljs-comment">/**
     * å®ç°å”±æ­Œçš„æ–¹æ³•
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sing</span><span class="hljs-params">()</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;ç»çºªäººå‡†å¤‡è¯ç­’ï¼Œæ”¶é’±&amp;#<span class="hljs-number">34</span>;);
        <span class="hljs-comment">//è®©ç›®æ ‡å¯¹è±¡å»å”±æ­Œ</span>
        star.sing();
    }

    <span class="hljs-comment">/**
     * å®ç°è·³èˆçš„æ–¹æ³•
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dance</span><span class="hljs-params">()</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;ç»çºªäººå‡†å¤‡åœºåœ°ï¼Œæ”¶é’±&amp;#<span class="hljs-number">34</span>;);
        <span class="hljs-comment">//è®©ç›®æ ‡å¯¹è±¡å»è·³èˆ</span>
        star.dance();
    }
}
</code></pre>
<h4 data-id="heading-9">2.1.4 é™æ€ä»£ç†æµ‹è¯•</h4>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">// æµ‹è¯•ç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo01</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">//ç›®æ ‡ï¼šåˆ›å»ºç›®æ ‡ã€ä»£ç†å¯¹è±¡å®Œæˆå…·ä½“åŠŸèƒ½è°ƒç”¨</span>

        <span class="hljs-comment">//1.åˆ›å»ºç›®æ ‡å¯¹è±¡</span>
        <span class="hljs-type">Star</span> <span class="hljs-variable">xxxStar</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">XXXStar</span>();

        <span class="hljs-comment">//2.åˆ›å»ºä»£ç†å¯¹è±¡</span>
        <span class="hljs-type">JJRProxy</span> <span class="hljs-variable">proxy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JJRProxy</span>(xxxStar);

        <span class="hljs-comment">//3.æ‰§è¡Œä»£ç†å¯¹è±¡æ–¹æ³•</span>
        proxy.sing();
        proxy.dance();
    }
}
</code></pre>
<p><strong>æ‰§è¡Œç»“æœ</strong>ï¼š</p>
<pre><code class="hljs">ç»çºªäººå‡†å¤‡è¯ç­’ï¼Œæ”¶é’±
XXXåœ¨å”±æ­Œ
ç»çºªäººå‡†å¤‡åœºåœ°ï¼Œæ”¶é’±
XXXåœ¨è·³èˆ
</code></pre>
<h3 data-id="heading-10">2.2 é™æ€ä»£ç†æ ¸å¿ƒæ€»ç»“ï¼š</h3>
<ul>
<li>ä¼˜ç‚¹ï¼šå®ç°ç®€å•ï¼Œé€»è¾‘æ¸…æ™°ï¼Œæ— éœ€ä¾èµ–å¤æ‚æŠ€æœ¯ï¼›</li>
<li>ç¼ºç‚¹ï¼š<strong>ä»£ç å†—ä½™</strong>ï¼ˆæ¯ä¸ªç›®æ ‡ç±»éœ€å¯¹åº”ä¸€ä¸ªä»£ç†ç±»ï¼‰ã€<strong>ç»´æŠ¤æˆæœ¬é«˜</strong>ï¼ˆæ¥å£æ–°å¢æ–¹æ³•æ—¶ï¼Œç›®æ ‡ç±»å’Œä»£ç†ç±»éœ€åŒæ­¥ä¿®æ”¹ï¼‰ã€‚</li>
</ul>
<p>é™æ€ä»£ç†çš„å±€é™æ€§ï¼šå½“ç³»ç»Ÿä¸­æœ‰ 100 ä¸ªæœåŠ¡ç±»éœ€è¦æ·»åŠ æ—¥å¿—åŠŸèƒ½æ—¶ï¼Œå°±éœ€è¦ç¼–å†™ 100 ä¸ªä»£ç†ç±»ï¼Œè¿™æ˜¾ç„¶ä¸ç¬¦åˆ"é«˜å†…èšä½è€¦åˆ"çš„è®¾è®¡åŸåˆ™â€”â€”åŠ¨æ€ä»£ç†æ­£æ˜¯ä¸ºè§£å†³è¿™ä¸ªé—®é¢˜è€Œç”Ÿã€‚</p>
<h2 data-id="heading-11">ä¸‰ã€åŠ¨æ€ä»£ç†ï¼šåå°„é©±åŠ¨ï¼Œå®ç°"ä¸€ä»£ç†å¤šç”¨"</h2>
<p>åŠ¨æ€ä»£ç†çš„æ ¸å¿ƒæ˜¯"è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆä»£ç†ç±»"ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–å†™ä»£ç†ä»£ç ï¼Œä¸€ä¸ªä»£ç†å¤„ç†å™¨å°±èƒ½ä¸ºå¤šä¸ªç›®æ ‡ç±»æä¾›å¢å¼ºåŠŸèƒ½ã€‚</p>
<h3 data-id="heading-12">3.1 JDK åŠ¨æ€ä»£ç†ï¼šåŸºäºåå°„çš„æ ¸å¿ƒå®ç°</h3>
<p>JDK åŠ¨æ€ä»£ç†æ˜¯ Java åŸç”Ÿæ”¯æŒçš„ä»£ç†æ–¹å¼ï¼Œæ ¸å¿ƒä¾èµ– <code>java.lang.reflect.Proxy</code> ç±»å’Œ <code>java.lang.reflect.InvocationHandler</code> æ¥å£ï¼Œ<strong>å¿…é¡»åŸºäºæ¥å£å®ç°</strong>ã€‚</p>
<h4 data-id="heading-13">3.1.1 æ ¸å¿ƒåŸç†</h4>
<ol>
<li>å®¢æˆ·ç«¯è°ƒç”¨ <code>Proxy.newProxyInstance()</code> æ–¹æ³•ï¼Œä¼ å…¥ç±»åŠ è½½å™¨ã€ç›®æ ‡æ¥å£æ•°ç»„å’Œä»£ç†å¤„ç†å™¨ï¼›</li>
<li>JVM åœ¨è¿è¡Œæ—¶åŸºäºç›®æ ‡æ¥å£åŠ¨æ€ç”Ÿæˆä»£ç†ç±»çš„å­—èŠ‚ç ï¼Œå¹¶åŠ è½½ä¸º Class å¯¹è±¡ï¼›</li>
<li>ä»£ç†ç±»å®ä¾‹åŒ–æ—¶ï¼Œå°†ä»£ç†å¤„ç†å™¨ä¼ å…¥ï¼Œå½“å®¢æˆ·ç«¯è°ƒç”¨ä»£ç†æ–¹æ³•æ—¶ï¼Œä¼šè§¦å‘å¤„ç†å™¨çš„ <code>invoke()</code> æ–¹æ³•ï¼›</li>
<li>åœ¨ <code>invoke()</code> æ–¹æ³•ä¸­ï¼Œé€šè¿‡åå°„è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ ¸å¿ƒæ–¹æ³•ï¼Œå¹¶æ·»åŠ é™„åŠ åŠŸèƒ½ã€‚</li>
</ol>
<h4 data-id="heading-14">3.1.2 jdkåŠ¨æ€åˆ›å»ºä»£ç†å¯¹è±¡è¯­æ³•</h4>
<p>ç±»ï¼šjava.lang.reflect.Proxyç±»</p>
<p>æ–¹æ³•ï¼š  public static Object newProxyInstance(ClassLoader loader, Class[] interfaces, InvocationHandler h)</p>
<ul>
<li>å‚æ•°ä¸€ï¼šç”¨äºæŒ‡å®šç”¨å“ªä¸ªç±»åŠ è½½å™¨ï¼ˆæ¨èä½¿ç”¨ç›®æ ‡å¯¹è±¡ç±»åŠ è½½å™¨ï¼‰ï¼Œå»åŠ è½½ç”Ÿæˆçš„ä»£ç†ç±»ï¼ˆç”Ÿæˆå­—èŠ‚ç æ–‡ä»¶ï¼‰</li>
<li>å‚æ•°äºŒï¼šæŒ‡å®šæ¥å£ï¼Œè¿™äº›æ¥å£ç”¨äºæŒ‡å®šç”Ÿæˆçš„ä»£ç†é•¿ä»€ä¹ˆï¼Œä¹Ÿå°±æ˜¯æœ‰å“ªäº›æ–¹æ³•ï¼ˆè¦æ±‚ä¸ç›®æ ‡ç±»å®ç°ä¸€æ ·çš„æ¥å£ï¼‰</li>
<li>å‚æ•°ä¸‰ï¼šç”¨æ¥æŒ‡å®šç”Ÿæˆçš„ä»£ç†å¯¹è±¡è¦å¹²ä»€ä¹ˆäº‹æƒ…ï¼ˆä»£ç†è¦åšçš„äº‹æƒ…ï¼šè‡ªå·±çš„ä»£ç†èŒè´£å’Œè°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•ï¼‰</li>
</ul>
<h3 data-id="heading-15">3.2 å®ç°æ­¥éª¤ï¼šä¸‰æ­¥å®ŒæˆåŠ¨æ€ä»£ç†</h3>
<p>ä¸‹é¢ä»¥"æ˜æ˜Ÿè¡¨æ¼”"ä¸ºä¾‹ï¼Œå®Œæ•´å®ç°é™æ€ä»£ç†ã€‚</p>
<h4 data-id="heading-16">3.2.1  <strong>æ­¥éª¤1ï¼šå®šä¹‰æŠ½è±¡æ¥å£ï¼ˆSubjectï¼‰</strong> ï¼šåŒé™æ€ä»£ç†</h4>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Star</span> {
    <span class="hljs-comment">/**
     * å®ç°å”±æ­Œçš„æ–¹æ³•
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">sing</span><span class="hljs-params">()</span>;

    <span class="hljs-comment">/**
     * å®ç°è·³èˆçš„æ–¹æ³•
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">dance</span><span class="hljs-params">()</span>;

}
</code></pre>
<h4 data-id="heading-17">3.2.2  <strong>æ­¥éª¤2ï¼šå®ç°ç›®æ ‡å¯¹è±¡ï¼ˆTargetï¼‰</strong> ï¼šåŒé™æ€ä»£ç†</h4>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">XXXStar</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Star</span>{

    <span class="hljs-comment">/**
     * å®ç°å”±æ­Œçš„æ–¹æ³•
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sing</span><span class="hljs-params">()</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;xxxåœ¨å”±æ­Œ&amp;#<span class="hljs-number">34</span>;);
    }

    <span class="hljs-comment">/**
     * å®ç°è·³èˆçš„æ–¹æ³•
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dance</span><span class="hljs-params">()</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;xxxåœ¨è·³èˆ&amp;#<span class="hljs-number">34</span>;);
    }
}
</code></pre>
<h4 data-id="heading-18">3.2.3  <strong>æ­¥éª¤3ï¼šå®ç°ä»£ç†å¯¹è±¡ï¼ˆProxyï¼‰</strong> ï¼šæŒæœ‰ç›®æ ‡å¯¹è±¡å¼•ç”¨ï¼Œæ·»åŠ é¢å¤–åŠŸèƒ½</h4>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo01</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">//ç›®æ ‡ï¼šåˆ›å»ºç›®æ ‡ã€ä»£ç†å¯¹è±¡å®Œæˆå…·ä½“åŠŸèƒ½è°ƒç”¨</span>

        <span class="hljs-comment">//1.åˆ›å»ºç›®æ ‡å¯¹è±¡</span>
        <span class="hljs-type">Star</span> <span class="hljs-variable">xxxStar</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">XXXStar</span>();

        <span class="hljs-comment">//2.åˆ›å»ºä»£ç†å¯¹è±¡</span>
        <span class="hljs-type">Star</span> <span class="hljs-variable">proxy</span> <span class="hljs-operator">=</span> (Star) Proxy.newProxyInstance(
                xxxStar.getClass().getClassLoader(),
                xxxStar.getClass().getInterfaces(),
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">InvocationHandler</span>() {
                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> <span class="hljs-keyword">throws</span> Throwable {
                        <span class="hljs-comment">//åœ¨è¿™é‡Œå®Œæˆä»£ç†ç±»è¦åšçš„äº‹æƒ…</span>
                        <span class="hljs-comment">//å‚æ•°1ï¼šproxyï¼Œå°±æ˜¯ç”Ÿæˆçš„ä»£ç†å¯¹è±¡ï¼Œè¿™é‡Œä¸éœ€è¦ã€‚</span>
                        <span class="hljs-comment">//å‚æ•°2ï¼šmethodï¼Œæ˜¯åå°„æ–¹æ³•å¯¹è±¡ï¼ˆæ¥å£ä¸­çš„æ–¹æ³•ï¼Œå…·ä½“æ˜¯å“ªä¸€ä¸ªç”±å¤–éƒ¨è°ƒç”¨å†³å®šï¼Œå¤–éƒ¨ä»£ç†å¯¹è±¡è°ƒç”¨sing()ï¼ŒMethodå°±æ˜¯sing()ï¼‰</span>
                        <span class="hljs-comment">//å‚æ•°3ï¼šargsï¼Œè°ƒç”¨æ–¹æ³•ä¼ å…¥çš„å‚æ•°ï¼ˆå¤–éƒ¨ä»£ç†å¯¹è±¡è°ƒç”¨æ–¹æ³•(å‚æ•°)ï¼Œä¼ å…¥å‚æ•°æ˜¯ä»€ä¹ˆå°±æ˜¯ä»€ä¹ˆï¼‰</span>

                        <span class="hljs-comment">//ä»£ç†å¯¹è±¡éœ€è¦åšçš„èŒè´£</span>
                        <span class="hljs-keyword">if</span> (method.getName().equals(&amp;#<span class="hljs-number">34</span>;sing&amp;#<span class="hljs-number">34</span>;)) {
                            System.out.println(&amp;#<span class="hljs-number">34</span>;ç»çºªäººå‡†å¤‡è¯ç­’ï¼Œæ”¶é’±&amp;#<span class="hljs-number">34</span>;);
                        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (method.getName().equals(&amp;#<span class="hljs-number">34</span>;dance&amp;#<span class="hljs-number">34</span>;)) {
                            System.out.println(&amp;#<span class="hljs-number">34</span>;ç»çºªäººå‡†å¤‡åœºåœ°ï¼Œæ”¶é’±&amp;#<span class="hljs-number">34</span>;);
                        }

                        <span class="hljs-comment">//åå°„è°ƒç”¨ç›®æ ‡å¯¹è±¡æ–¹æ³•ï¼Œå°±æ˜¯æ‰§è¡Œmethod</span>
                        <span class="hljs-comment">//  Object result = method.invoke(ç›®æ ‡å¯¹è±¡, args);</span>
                        <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> method.invoke(xxxStar, args);

                        <span class="hljs-keyword">return</span> result;
                    }
                }
        );


        <span class="hljs-comment">//JJRProxy proxy = new JJRProxy(zrnStar);</span>

        <span class="hljs-comment">//3.æ‰§è¡Œä»£ç†å¯¹è±¡æ–¹æ³•</span>
        proxy.sing();
        proxy.dance();
        System.out.println(proxy.getClass().getName());
    }
}
</code></pre>
<p><strong>æ‰§è¡Œç»“æœ</strong>ï¼š</p>
<pre><code class="hljs">ç»çºªäººå‡†å¤‡è¯ç­’ï¼Œæ”¶é’±
XXXåœ¨å”±æ­Œ
ç»çºªäººå‡†å¤‡åœºåœ°ï¼Œæ”¶é’±
XXXåœ¨è·³èˆ
</code></pre>
<h2 data-id="heading-19">å››ã€ä»£ç†æ¨¡å¼å®æˆ˜ï¼š</h2>
<p>åŠ¨æ€ä»£ç†çš„æ ¸å¿ƒæ˜¯"è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆä»£ç†ç±»"ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–å†™ä»£ç†ä»£ç ï¼Œä¸€ä¸ªä»£ç†å¤„ç†å™¨å°±èƒ½ä¸ºå¤šä¸ªç›®æ ‡ç±»æä¾›å¢å¼ºåŠŸèƒ½ã€‚</p>
<h3 data-id="heading-20">4.1 å®ç°æ­¥éª¤</h3>
<h4 data-id="heading-21">4.1.1  <strong>æ­¥éª¤1ï¼šå®šä¹‰æŠ½è±¡æ¥å£ï¼ˆSubjectï¼‰</strong> ï¼š</h4>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">DataOperator</span> {
    <span class="hljs-comment">/**
     * æ·»åŠ 
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">()</span>;

    <span class="hljs-comment">/**
     * åˆ é™¤
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">Delete</span><span class="hljs-params">()</span>;
}
</code></pre>
<h4 data-id="heading-22">4.1.2  <strong>æ­¥éª¤2ï¼šå®ç°ç›®æ ‡å¯¹è±¡ï¼ˆTargetï¼‰</strong> ï¼š</h4>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserManager</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">DataOperator</span>{
    <span class="hljs-comment">/**
     * æ·»åŠ 
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">()</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;ç”¨æˆ·æ–°å¢æ“ä½œã€‚ã€‚ã€‚&amp;#<span class="hljs-number">34</span>;);
        <span class="hljs-keyword">try</span> {
            Thread.sleep((<span class="hljs-type">int</span>)(<span class="hljs-number">3000</span>*Math.random()));
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
        }
    }
    <span class="hljs-comment">/**
     * åˆ é™¤
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">Delete</span><span class="hljs-params">()</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;ç”¨æˆ·åˆ é™¤æ“ä½œã€‚ã€‚ã€‚&amp;#<span class="hljs-number">34</span>;);
        <span class="hljs-keyword">try</span> {
            Thread.sleep((<span class="hljs-type">int</span>)(<span class="hljs-number">3000</span>*Math.random()));
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
        }
    }
}
</code></pre>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeptManager</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">DataOperator</span>{
    <span class="hljs-comment">/**
     * æ·»åŠ 
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">()</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;éƒ¨é—¨æ–°å¢æ“ä½œã€‚ã€‚ã€‚&amp;#<span class="hljs-number">34</span>;);
        <span class="hljs-keyword">try</span> {
            Thread.sleep((<span class="hljs-type">int</span>)(<span class="hljs-number">3000</span>*Math.random()));
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
        }
    }
    <span class="hljs-comment">/**
     * åˆ é™¤
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">Delete</span><span class="hljs-params">()</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;éƒ¨é—¨åˆ é™¤æ“ä½œã€‚ã€‚ã€‚&amp;#<span class="hljs-number">34</span>;);
        <span class="hljs-keyword">try</span> {
            Thread.sleep((<span class="hljs-type">int</span>)(<span class="hljs-number">3000</span>*Math.random()));
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
        }
    }
}
</code></pre>
<h4 data-id="heading-23">4.1.3  <strong>æ­¥éª¤3ï¼šå®ç°ä»£ç†å¯¹è±¡ï¼ˆProxyï¼‰</strong> ï¼šæŒæœ‰ç›®æ ‡å¯¹è±¡å¼•ç”¨ï¼Œæ·»åŠ é¢å¤–åŠŸèƒ½</h4>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">//ç”¨äºåˆ›å»ºä»£ç†å¯¹è±¡çš„å·¥å‚å·¥å…·ç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TimeOutProxyFactoryUtil</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span>  T <span class="hljs-title function_">createProxyObj</span><span class="hljs-params">(T target)</span>{
        <span class="hljs-keyword">return</span> (T) Proxy.newProxyInstance(
                target.getClass().getClassLoader(),
                target.getClass().getInterfaces(),
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">InvocationHandler</span>() {
                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> <span class="hljs-keyword">throws</span> Throwable {
                        <span class="hljs-comment">//ä»£ç†å¯¹è±¡éœ€è¦åšçš„èŒè´£: ç»Ÿè®¡æ¯ä¸ªç›®æ ‡å¯¹è±¡æ–¹æ³•æ‰§è¡Œè€—æ—¶æ—¶é—´</span>
                        <span class="hljs-comment">//åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰å®šä¹‰å­˜å‚¨å¼€å§‹æ¯«ç§’æ•°</span>
                        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();

                        <span class="hljs-comment">//è°ƒç”¨ç›®æ ‡å¯¹è±¡æ–¹æ³•ï¼Œå°±æ˜¯æ‰§è¡Œmethod</span>
                        <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> method.invoke(target, args);

                        <span class="hljs-comment">//åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œåå®šä¹‰å­˜å‚¨ç»“æŸæ¯«ç§’æ•°</span>
                        <span class="hljs-type">Long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();

                        System.out.printf(&amp;#<span class="hljs-number">34</span>;[%s]æ‰§è¡Œè€—æ—¶æ¯«ç§’æ•°ï¼š%d%n&amp;#<span class="hljs-number">34</span>;, target.getClass().getName() + &amp;#<span class="hljs-number">34</span>;.&amp;#<span class="hljs-number">34</span>; + method.getName() + &amp;#<span class="hljs-number">34</span>;æ–¹æ³•&amp;#<span class="hljs-number">34</span>;, end - start);

                        <span class="hljs-keyword">return</span> result;
                    }
                }
        );
    }
}
</code></pre>
<h4 data-id="heading-24">4.1.4 æµ‹è¯•</h4>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo01</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">//ç›®æ ‡ï¼šä½¿ç”¨åŠ¨æ€ä»£ç†ç»™æ¯ä¸ªç®¡ç†ç±»ç»Ÿè®¡æ¯ä¸ªæ–¹æ³•è¿è¡Œè€—æ—¶</span>
        <span class="hljs-comment">//ç–‘é—®ï¼šé™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†æ¨èå“ªä¸ªï¼Ÿ</span>
        <span class="hljs-comment">//  ç­”ï¼šå¦‚æœåªæ˜¯å¯¹æŸä¸€ä¸ªç›®æ ‡è¿›è¡Œä»£ç†å“ªä¸ªéƒ½å¯ä»¥ï¼Œä½†æ˜¯å¦‚æœå¯¹å¤šä¸ªç›®æ ‡å¯¹è±¡è¿›è¡Œç›¸åŒçš„èŒè´£å¼€å‘æ¨èä½¿ç”¨åŠ¨æ€ä»£ç†ã€‚</span>

        <span class="hljs-comment">//1.åˆ›å»ºç›®æ ‡å¯¹è±¡-ç”¨æˆ·ç®¡ç†å¯¹è±¡</span>
        <span class="hljs-type">DataOperator</span> <span class="hljs-variable">userManager</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserManager</span>();

        <span class="hljs-comment">//2.åˆ›å»ºç›®æ ‡å¯¹è±¡-éƒ¨é—¨ç®¡ç†å¯¹è±¡</span>
        <span class="hljs-type">DataOperator</span> <span class="hljs-variable">deptManager</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DeptManager</span>();

        <span class="hljs-comment">//3.ç”Ÿæˆç”¨æˆ·ç®¡ç†å¯¹è±¡çš„ä»£ç†å¯¹è±¡å¹¶è°ƒç”¨æ–¹æ³•</span>
        <span class="hljs-type">DataOperator</span> <span class="hljs-variable">proxyObj1</span> <span class="hljs-operator">=</span> TimeOutProxyFactoryUtil.createProxyObj(userManager);
        proxyObj1.add();
        proxyObj1.Delete();

        <span class="hljs-comment">//4.ç”Ÿæˆéƒ¨é—¨ç®¡ç†å¯¹è±¡çš„ä»£ç†å¯¹è±¡å¹¶è°ƒç”¨æ–¹æ³•</span>
        <span class="hljs-type">DataOperator</span> <span class="hljs-variable">proxyObj2</span> <span class="hljs-operator">=</span> TimeOutProxyFactoryUtil.createProxyObj(deptManager);
        proxyObj2.add();
        proxyObj2.Delete();
    }
}
</code></pre>
<p><strong>æ‰§è¡Œç»“æœ</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">ç”¨æˆ·æ–°å¢æ“ä½œã€‚ã€‚ã€‚
[<span class="hljs-meta">UserManager.addæ–¹æ³•</span>]æ‰§è¡Œè€—æ—¶æ¯«ç§’æ•°ï¼š<span class="hljs-number">220</span>
ç”¨æˆ·åˆ é™¤æ“ä½œã€‚ã€‚ã€‚
[<span class="hljs-meta">UserManager.Deleteæ–¹æ³•</span>]æ‰§è¡Œè€—æ—¶æ¯«ç§’æ•°ï¼š<span class="hljs-number">1050</span>
éƒ¨é—¨æ–°å¢æ“ä½œã€‚ã€‚ã€‚
[<span class="hljs-meta">DeptManager.addæ–¹æ³•</span>]æ‰§è¡Œè€—æ—¶æ¯«ç§’æ•°ï¼š<span class="hljs-number">1967</span>
éƒ¨é—¨åˆ é™¤æ“ä½œã€‚ã€‚ã€‚
[<span class="hljs-meta">DeptManager.Deleteæ–¹æ³•</span>]æ‰§è¡Œè€—æ—¶æ¯«ç§’æ•°ï¼š<span class="hljs-number">673</span>
</code></pre>
<h2 data-id="heading-25">äº”ã€é¢è¯•/è¸©å‘é«˜é¢‘ç‚¹ï¼ˆåŠ åˆ†é¡¹ï¼‰</h2>
<h3 data-id="heading-26">5.1 å¸¸è§è¸©å‘ç‚¹</h3>
<ul>
<li><strong>JDK ä»£ç†è¯¯ç”¨äºæ— æ¥å£ç±»</strong>ï¼šJDK åŠ¨æ€ä»£ç†å¿…é¡»åŸºäºæ¥å£ï¼Œè‹¥ç›®æ ‡ç±»æ— æ¥å£ï¼Œä¼šæŠ› <code>ClassCastException</code>ï¼Œæ­¤æ—¶éœ€æ”¹ç”¨ CGLIBï¼›</li>
<li><strong>CGLIB ä»£ç†æ— æ³•ä»£ç† final ç±»/æ–¹æ³•</strong>ï¼šCGLIB é€šè¿‡ç»§æ‰¿å®ç°ä»£ç†ï¼Œfinal ç±»æ— æ³•è¢«ç»§æ‰¿ï¼Œfinal æ–¹æ³•æ— æ³•è¢«é‡å†™ï¼›</li>
<li><strong>åŠ¨æ€ä»£ç†å¯¹è±¡ç±»å‹åˆ¤æ–­é”™è¯¯</strong>ï¼šä»£ç†å¯¹è±¡æ˜¯ JVM åŠ¨æ€ç”Ÿæˆçš„ç±»å®ä¾‹ï¼Œä¸èƒ½ç›´æ¥å¼ºè½¬ä¸ºç›®æ ‡ç±»ç±»å‹ï¼ˆå¦‚ UserProxy ä¸èƒ½å¼ºè½¬ä¸º UserServiceImplï¼‰ï¼Œåªèƒ½å¼ºè½¬ä¸ºæ¥å£ç±»å‹ï¼›</li>
<li><strong>Spring AOP åˆ‡é¢ä¸ç”Ÿæ•ˆ</strong>ï¼šæ£€æŸ¥æ˜¯å¦åŠ äº† @Aspect å’Œ @Component æ³¨è§£ã€åˆ‡å…¥ç‚¹è¡¨è¾¾å¼æ˜¯å¦æ­£ç¡®ã€ç›®æ ‡ç±»æ˜¯å¦è¢« Spring ç®¡ç†ï¼ˆæ˜¯å¦åŠ äº† @Service ç­‰æ³¨è§£ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-27">5.2 é«˜é¢‘é¢è¯•é¢˜</h3>
<ol>
<li><strong>ä»£ç†æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³æ˜¯ä»€ä¹ˆï¼Ÿè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</strong> ç­”ï¼šæ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡ä»£ç†å¯¹è±¡æ§åˆ¶å¯¹ç›®æ ‡å¯¹è±¡çš„è®¿é—®ï¼Œåœ¨ä¸ä¿®æ”¹ç›®æ ‡å¯¹è±¡ä»£ç çš„å‰æä¸‹æ·»åŠ åŠŸèƒ½ã€‚è§£å†³äº†"æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ä¸é™„åŠ åŠŸèƒ½è€¦åˆ"çš„é—®é¢˜ï¼Œç¬¦åˆå¼€é—­åŸåˆ™å’Œå•ä¸€èŒè´£åŸåˆ™ã€‚</li>
<li><strong>é™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†çš„åŒºåˆ«ï¼Ÿå¦‚ä½•é€‰æ‹©ï¼Ÿ</strong> ç­”ï¼šåŒºåˆ«åœ¨äºä»£ç†ç±»çš„ç”Ÿæˆæ—¶æœºï¼ˆç¼–è¯‘æœŸ vs è¿è¡Œæ—¶ï¼‰å’Œçµæ´»æ€§ã€‚ç®€å•åœºæ™¯ã€ç›®æ ‡ç±»å°‘ä¸”ç¨³å®šæ—¶ç”¨é™æ€ä»£ç†ï¼›å¤æ‚åœºæ™¯ã€ç›®æ ‡ç±»å¤šæˆ–é¢‘ç¹å˜åŠ¨æ—¶ç”¨åŠ¨æ€ä»£ç†ã€‚æœ‰æ¥å£ä¼˜å…ˆç”¨ JDK ä»£ç†ï¼Œæ— æ¥å£ç”¨ CGLIB ä»£ç†ã€‚</li>
<li><strong>Spring AOP æ˜¯å¦‚ä½•é€‰æ‹©ä»£ç†æ–¹å¼çš„ï¼Ÿ</strong> ç­”ï¼šSpring AOP é»˜è®¤ä¼˜å…ˆä½¿ç”¨ JDK åŠ¨æ€ä»£ç†ï¼ˆç›®æ ‡ç±»æœ‰æ¥å£æ—¶ï¼‰ï¼›è‹¥ç›®æ ‡ç±»æ— æ¥å£ï¼Œåˆ™ä½¿ç”¨ CGLIB ä»£ç†ã€‚å¯é€šè¿‡é…ç½® <code>spring.aop.proxy-target-class=true</code> å¼ºåˆ¶ä½¿ç”¨ CGLIB ä»£ç†ã€‚</li>
<li><strong>åŠ¨æ€ä»£ç†ä¸­ï¼Œinvoke æ–¹æ³•çš„ä¸‰ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ä»€ä¹ˆå«ä¹‰ï¼Ÿ</strong> ç­”ï¼šproxy æ˜¯åŠ¨æ€ç”Ÿæˆçš„ä»£ç†å¯¹è±¡æœ¬èº«ï¼›method æ˜¯å½“å‰è¢«è°ƒç”¨çš„ç›®æ ‡æ–¹æ³•çš„ Method å¯¹è±¡ï¼›args æ˜¯ç›®æ ‡æ–¹æ³•çš„å‚æ•°æ•°ç»„ã€‚</li>
</ol>
<h2 data-id="heading-28">å…­ã€æ€»ç»“ä¸å»¶ä¼¸</h2>
<h3 data-id="heading-29">6.1 æ ¸å¿ƒæ€»ç»“</h3>
<ul>
<li>ä»£ç†æ¨¡å¼ä¸‰è§’è‰²ï¼šæŠ½è±¡æ¥å£ï¼ˆSubjectï¼‰ã€ç›®æ ‡å¯¹è±¡ï¼ˆTargetï¼‰ã€ä»£ç†å¯¹è±¡ï¼ˆProxyï¼‰ï¼›</li>
<li>é™æ€ä»£ç†ï¼šç¼–è¯‘æœŸç”Ÿæˆä»£ç†ç±»ï¼Œç®€å•ä½†çµæ´»æ€§ä½ï¼Œé€‚åˆç®€å•åœºæ™¯ï¼›</li>
<li>åŠ¨æ€ä»£ç†ï¼šè¿è¡Œæ—¶ç”Ÿæˆä»£ç†ç±»ï¼Œçµæ´»æ€§é«˜ï¼Œæ˜¯æ¡†æ¶æ ¸å¿ƒæŠ€æœ¯ï¼ˆJDK ä»£ç†åŸºäºåå°„ï¼ŒCGLIB åŸºäºå­—èŠ‚ç ï¼‰ï¼›</li>
<li>æ ¸å¿ƒä»·å€¼ï¼šè§£è€¦æ ¸å¿ƒé€»è¾‘ä¸é™„åŠ åŠŸèƒ½ï¼Œå®ç°åŠŸèƒ½å¢å¼ºä¸æ§åˆ¶è®¿é—®ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘ä»¬æ¥è¯´ä¸€è¯´ Redis ä¸»ä»å¤åˆ¶çš„åŸç†åŠä½œç”¨]]></title>    <link>https://juejin.cn/post/7582047623739031606</link>    <guid>https://juejin.cn/post/7582047623739031606</guid>    <pubDate>2025-12-10T13:10:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582047623739031606" data-draft-id="7582067084839780406" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘ä»¬æ¥è¯´ä¸€è¯´ Redis ä¸»ä»å¤åˆ¶çš„åŸç†åŠä½œç”¨"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2025-12-10T13:10:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å°å‡"/> <meta itemprop="url" content="https://juejin.cn/user/2285197690931932"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘ä»¬æ¥è¯´ä¸€è¯´ Redis ä¸»ä»å¤åˆ¶çš„åŸç†åŠä½œç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2285197690931932/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å°å‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T13:10:37.000Z" title="Wed Dec 10 2025 13:10:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">æ¦‚è¿°</h3>
<p>Redis ä¸»ä»å¤åˆ¶æ˜¯ä¸€ç§æ•°æ®åŒæ­¥æœºåˆ¶ï¼Œå®ƒå…è®¸ä¸€ä¸ª Redis æœåŠ¡å™¨ï¼ˆç§°ä¸ºÂ <strong>ä¸»æœåŠ¡å™¨/Master</strong>ï¼‰å°†å…¶æ•°æ®å¤åˆ¶åˆ°ä¸€ä¸ªæˆ–å¤šä¸ª Redis æœåŠ¡å™¨ï¼ˆç§°ä¸ºÂ <strong>ä»æœåŠ¡å™¨/Slave/Replica</strong>ï¼‰ã€‚è¿™æ˜¯ Redis å®ç°é«˜å¯ç”¨æ€§ã€å¯æ‰©å±•æ€§å’Œæ•°æ®å†—ä½™çš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€æ ¸å¿ƒä½œç”¨</h3>
<ol>
<li>
<p><strong>æ•°æ®å†—ä½™ä¸å¤‡ä»½</strong>ï¼š</p>
<ul>
<li><strong>æ ¸å¿ƒä½œç”¨</strong>ï¼šä»æœåŠ¡å™¨æ˜¯ä¸»æœåŠ¡å™¨æ•°æ®çš„å®æ—¶çƒ­å¤‡ä»½ã€‚å½“ä¸»æœåŠ¡å™¨æ•°æ®ä¸¢å¤±æˆ–æŸåæ—¶ï¼Œå¯ä»¥ä»ä»æœåŠ¡å™¨æ¢å¤ï¼Œæ˜¯å®ç°æ•°æ®æŒä¹…åŒ–çš„å¦ä¸€ç§æœ‰æ•ˆæ–¹å¼ã€‚</li>
</ul>
</li>
<li>
<p><strong>è¯»å†™åˆ†ç¦»ä¸è´Ÿè½½å‡è¡¡</strong>ï¼š</p>
<ul>
<li><strong>æ ¸å¿ƒä½œç”¨</strong>ï¼šä¸»æœåŠ¡å™¨é€šå¸¸å¤„ç†<strong>å†™æ“ä½œ</strong>å’Œ<strong>å¼ºä¸€è‡´æ€§è¯»æ“ä½œ</strong>ï¼Œè€Œä»æœåŠ¡å™¨å¯ä»¥å¤„ç†å¤§é‡çš„<strong>è¯»æ“ä½œ</strong>ã€‚é€šè¿‡å°†è¯»è¯·æ±‚åˆ†æµåˆ°å¤šä¸ªä»æœåŠ¡å™¨ä¸Šï¼Œå¯ä»¥æ˜¾è‘—æå‡ç³»ç»Ÿçš„æ•´ä½“è¯»ååé‡å’Œå¹¶å‘èƒ½åŠ›ã€‚</li>
<li><strong>æ³¨æ„</strong>ï¼šç”±äºå¤åˆ¶æ˜¯å¼‚æ­¥çš„ï¼Œä»æœåŠ¡å™¨ä¸Šçš„æ•°æ®å¯èƒ½å­˜åœ¨æ¯«ç§’çº§çš„å»¶è¿Ÿï¼Œé€‚ç”¨äºå¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚ä¸éå¸¸ä¸¥æ ¼çš„è¯»åœºæ™¯ï¼ˆå¦‚ç¼“å­˜ã€æŠ¥è¡¨æŸ¥è¯¢ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>é«˜å¯ç”¨å’Œæ•…éšœæ¢å¤çš„åŸºçŸ³</strong>ï¼š</p>
<ul>
<li><strong>æ ¸å¿ƒä½œç”¨</strong>ï¼šä¸»ä»å¤åˆ¶æ˜¯æ„å»ºÂ <strong>Redis Sentinelï¼ˆå“¨å…µï¼‰</strong>Â å’ŒÂ <strong>Redis Clusterï¼ˆé›†ç¾¤ï¼‰</strong>Â ç­‰é«˜å¯ç”¨æ¶æ„çš„åŸºç¡€ã€‚å½“ä¸»æœåŠ¡å™¨å‘ç”Ÿæ•…éšœæ—¶ï¼Œå¯ä»¥é€šè¿‡<strong>å“¨å…µ</strong>è‡ªåŠ¨å°†ä¸€ä¸ªä»æœåŠ¡å™¨æå‡ä¸ºæ–°çš„ä¸»æœåŠ¡å™¨ï¼Œå®ç°æœåŠ¡å¿«é€Ÿåˆ‡æ¢ï¼Œä¿è¯ä¸šåŠ¡çš„è¿ç»­æ€§ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ¨ªå‘æ‰©å±•è¯»èƒ½åŠ›</strong>ï¼š</p>
<ul>
<li><strong>æ ¸å¿ƒä½œç”¨</strong>ï¼šå½“è¯»è¯·æ±‚æˆä¸ºç“¶é¢ˆæ—¶ï¼Œå¯ä»¥ç®€å•åœ°é€šè¿‡æ·»åŠ æ›´å¤šä»æœåŠ¡å™¨æ¥çº¿æ€§æ‰©å±•è¯»æ€§èƒ½ï¼Œè€Œæ— éœ€å‡çº§ä¸»æœåŠ¡å™¨ç¡¬ä»¶ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-2">äºŒã€è¯¦ç»†å·¥ä½œåŸç†</h3>
<p>æ•´ä¸ªå¤åˆ¶è¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š<strong>è¿æ¥å»ºç«‹é˜¶æ®µ</strong>ã€<strong>æ•°æ®åŒæ­¥é˜¶æ®µ</strong>ã€<strong>å‘½ä»¤ä¼ æ’­é˜¶æ®µ</strong>ã€‚</p>
<h4 data-id="heading-3">é˜¶æ®µ 1ï¼šè¿æ¥å»ºç«‹ä¸é…ç½®</h4>
<ol>
<li><strong>é…ç½®ä»èŠ‚ç‚¹</strong>ï¼šåœ¨ä»æœåŠ¡å™¨é…ç½®æ–‡ä»¶ (<code>redis.conf</code>) ä¸­è®¾ç½®Â <code>replicaof  </code>Â æˆ–åœ¨è¿è¡Œæ—¶ä½¿ç”¨Â <code>REPLICAOF</code>Â å‘½ä»¤ã€‚</li>
<li><strong>å»ºç«‹è¿æ¥</strong>ï¼šä»æœåŠ¡å™¨æ ¹æ®é…ç½®ï¼Œå‘ä¸»æœåŠ¡å™¨å‘èµ·ä¸€ä¸ªÂ <strong>Socket è¿æ¥</strong>ï¼Œå¹¶å‘é€Â <code>PING</code>Â å‘½ä»¤æ£€æŸ¥é€šä¿¡æ˜¯å¦æ­£å¸¸ã€‚</li>
<li><strong>èº«ä»½éªŒè¯</strong>ï¼šå¦‚æœä¸»æœåŠ¡å™¨è®¾ç½®äº†Â <code>requirepass</code>ï¼Œä»æœåŠ¡å™¨éœ€è¦å‘é€Â <code>AUTH</code>Â å‘½ä»¤è¿›è¡Œå¯†ç éªŒè¯ã€‚</li>
<li><strong>ç«¯å£ç›‘å¬</strong>ï¼šä»æœåŠ¡å™¨è¿˜ä¼šå»ºç«‹ä¸€ä¸ªÂ <strong>å¤åˆ¶ç§¯å‹ç¼“å†²åŒºç›‘å¬ç«¯å£</strong>ï¼Œç­‰å¾…ä¸»æœåŠ¡å™¨åç»­å‘é€æ•°æ®ã€‚</li>
</ol>
<h4 data-id="heading-4">é˜¶æ®µ 2ï¼šæ•°æ®åŒæ­¥ï¼ˆå…¨é‡/éƒ¨åˆ†åŒæ­¥ï¼‰</h4>
<p>è¿™æ˜¯å¤åˆ¶è¿‡ç¨‹ä¸­æœ€æ ¸å¿ƒã€æœ€å¤æ‚çš„éƒ¨åˆ†ã€‚Redis 2.8 ä¹‹åï¼Œä½¿ç”¨Â <code>PSYNC</code>Â å‘½ä»¤å–ä»£äº†æ—§çš„Â <code>SYNC</code>Â å‘½ä»¤ï¼Œæ”¯æŒ<strong>éƒ¨åˆ†é‡åŒæ­¥</strong>ï¼Œæå¤§åœ°ä¼˜åŒ–äº†æ–­çº¿é‡è¿åçš„æ•ˆç‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54fadbdfc13741dc933d62579cfa82b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5bCP5YGH:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765977165&amp;x-signature=tYXE6s2zjmiwKD5vKhbOOeP%2F4jE%3D" alt="" loading="lazy"/>â€‹</p>
<ul>
<li>
<p><strong>å…¨é‡åŒæ­¥</strong>ï¼š</p>
<ul>
<li>
<p><strong>è§¦å‘æ¡ä»¶</strong>ï¼šä»æœåŠ¡å™¨æ˜¯ç¬¬ä¸€æ¬¡è¿æ¥ä¸»æœåŠ¡å™¨ï¼Œæˆ–è€…ä»æœåŠ¡å™¨è®°å½•çš„<strong>å¤åˆ¶åç§»é‡</strong>å·²ç»ä¸åœ¨ä¸»æœåŠ¡å™¨çš„<strong>å¤åˆ¶ç§¯å‹ç¼“å†²åŒº</strong>ä¸­ã€‚</p>
</li>
<li>
<p><strong>è¿‡ç¨‹</strong>ï¼š</p>
<ol>
<li>ä»æœåŠ¡å™¨å‘é€Â <code>PSYNC ? -1</code>Â å‘½ä»¤è¯·æ±‚å…¨é‡åŒæ­¥ã€‚</li>
<li>ä¸»æœåŠ¡å™¨æ‰§è¡ŒÂ <code>BGSAVE</code>Â å‘½ä»¤ï¼Œåœ¨åå°ç”Ÿæˆå½“å‰æ•°æ®çš„Â <strong>RDB å¿«ç…§æ–‡ä»¶</strong>ã€‚</li>
<li>ä¸»æœåŠ¡å™¨å°† RDB æ–‡ä»¶é€šè¿‡ç½‘ç»œå‘é€ç»™ä»æœåŠ¡å™¨ã€‚åœ¨ç”Ÿæˆå’Œä¼ è¾“RDBæœŸé—´ï¼Œæ–°çš„å†™å‘½ä»¤ä¼šè¢«ç¼“å­˜åœ¨å†…å­˜çš„<strong>å¤åˆ¶å®¢æˆ·ç«¯ç¼“å†²åŒº</strong>ä¸­ã€‚</li>
<li>ä»æœåŠ¡å™¨æ¸…ç©ºè‡ªèº«æ—§æ•°æ®ï¼Œç„¶ååŠ è½½æ¥æ”¶åˆ°çš„ RDB æ–‡ä»¶ï¼Œå°†è‡ªèº«æ•°æ®çŠ¶æ€æ›´æ–°åˆ°ä¸ä¸»æœåŠ¡å™¨æ‰§è¡ŒÂ <code>BGSAVE</code>Â æ—¶ä¸€è‡´ã€‚</li>
<li>ä¸»æœåŠ¡å™¨å°†<strong>å¤åˆ¶å®¢æˆ·ç«¯ç¼“å†²åŒº</strong>ä¸­ç§¯ç´¯çš„å†™å‘½ä»¤å‘é€ç»™ä»æœåŠ¡å™¨ï¼Œä»æœåŠ¡å™¨æ‰§è¡Œè¿™äº›å‘½ä»¤ï¼Œæœ€ç»ˆè¾¾åˆ°ä¸ä¸»æœåŠ¡å™¨å®Œå…¨ä¸€è‡´çš„çŠ¶æ€ã€‚</li>
</ol>
</li>
<li>
<p><strong>ç¼ºç‚¹</strong>ï¼šéå¸¸æ¶ˆè€—ä¸»æœåŠ¡å™¨çš„ CPUã€å†…å­˜ã€ç£ç›˜ I/O å’Œç½‘ç»œå¸¦å®½ï¼Œå°¤å…¶æ˜¯æ•°æ®é‡å¤§æ—¶ã€‚</p>
</li>
</ul>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af638dbc6ce64a6f9266a318dbdd374c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5bCP5YGH:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765977165&amp;x-signature=lG3QHzZhzdQmYXGBsx6P%2BAW7iKs%3D" alt="" loading="lazy"/>â€‹</p>
<ul>
<li>
<p><strong>éƒ¨åˆ†åŒæ­¥</strong>ï¼š</p>
<ul>
<li>
<p><strong>è§¦å‘æ¡ä»¶</strong>ï¼šä»æœåŠ¡å™¨çŸ­æ—¶é—´æ–­å¼€åé‡è¿ï¼Œå¹¶ä¸”å®ƒä¹‹å‰åŒæ­¥çš„åç§»é‡ä»ç„¶å­˜åœ¨äºä¸»æœåŠ¡å™¨çš„<strong>å¤åˆ¶ç§¯å‹ç¼“å†²åŒº</strong>ä¸­ã€‚</p>
</li>
<li>
<p><strong>è¿‡ç¨‹</strong>ï¼š</p>
<ol>
<li>ä»æœåŠ¡å™¨å‘é€Â <code>PSYNC  </code>Â å‘½ä»¤ï¼Œå…¶ä¸­Â <code>runid</code>Â æ˜¯ä¸»æœåŠ¡å™¨çš„å”¯ä¸€IDï¼Œ<code>offset</code>Â æ˜¯ä»æœåŠ¡å™¨å½“å‰çš„å¤åˆ¶åç§»é‡ã€‚</li>
<li>ä¸»æœåŠ¡å™¨åˆ¤æ–­Â <code>runid</code>Â æ˜¯å¦ä¸è‡ªå·±ä¸€è‡´ï¼Œä¸”Â <code>offset</code>Â ä¹‹åçš„æ•°æ®æ˜¯å¦è¿˜åœ¨<strong>å¤åˆ¶ç§¯å‹ç¼“å†²åŒº</strong>å†…ã€‚</li>
<li>å¦‚æœæ¡ä»¶æ»¡è¶³ï¼Œä¸»æœåŠ¡å™¨å›å¤Â <code>+CONTINUE</code>ï¼Œç„¶å<strong>ä»…å°†ä»Â <code>offset</code>Â åˆ°ç¼“å†²åŒºæœ«å°¾çš„å†™å‘½ä»¤</strong>å‘é€ç»™ä»æœåŠ¡å™¨ã€‚</li>
</ol>
</li>
<li>
<p><strong>ä¼˜ç‚¹</strong>ï¼šæ•ˆç‡æé«˜ï¼Œåªä¼ è¾“å°‘é‡ç¼ºå¤±çš„æ•°æ®ï¼Œå¯¹èµ„æºå½±å“å°ã€‚</p>
</li>
</ul>
</li>
</ul>
<p><strong>å…³é”®æ¦‚å¿µè§£é‡Š</strong>ï¼š</p>
<ul>
<li><strong>å¤åˆ¶åç§»é‡</strong>ï¼šä¸»ä»æœåŠ¡å™¨å„è‡ªç»´æŠ¤ä¸€ä¸ªåç§»é‡è®¡æ•°å™¨ã€‚ä¸»æœåŠ¡å™¨æ¯æ¬¡ä¼ æ’­Nä¸ªå­—èŠ‚çš„å‘½ä»¤ï¼Œå…¶åç§»é‡å°±å¢åŠ Nã€‚ä»æœåŠ¡å™¨æ¯æ¬¡æ¥æ”¶åˆ°Nä¸ªå­—èŠ‚ï¼Œå…¶åç§»é‡ä¹Ÿå¢åŠ Nã€‚é€šè¿‡å¯¹æ¯”åç§»é‡å¯ä»¥åˆ¤æ–­æ•°æ®æ˜¯å¦ä¸€è‡´ã€‚</li>
<li><strong>å¤åˆ¶ç§¯å‹ç¼“å†²åŒº</strong>ï¼šä¸»æœåŠ¡å™¨ç»´æŠ¤çš„ä¸€ä¸ª<strong>å›ºå®šé•¿åº¦çš„å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—</strong>ã€‚å®ƒæŒç»­è®°å½•æœ€è¿‘ä¼ æ’­çš„å†™å‘½ä»¤ã€‚å…¶å¤§å°é€šè¿‡Â <code>repl-backlog-size</code>Â é…ç½®ï¼Œæ˜¯å†³å®šèƒ½å¦è¿›è¡Œéƒ¨åˆ†åŒæ­¥çš„å…³é”®ã€‚</li>
<li><strong>æœåŠ¡å™¨è¿è¡ŒID</strong>ï¼šæ¯ä¸ªRediså®ä¾‹å¯åŠ¨æ—¶éƒ½ä¼šç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„è¿è¡ŒIDã€‚ä»æœåŠ¡å™¨ä¼šè®°å½•ä¸»æœåŠ¡å™¨çš„IDã€‚å½“ä¸»æœåŠ¡å™¨é‡å¯å˜æ›´åï¼Œè¿è¡ŒIDæ”¹å˜ï¼Œä»æœåŠ¡å™¨ä¼šè§¦å‘å…¨é‡åŒæ­¥ã€‚</li>
</ul>
<h4 data-id="heading-5">é˜¶æ®µ 3ï¼šå‘½ä»¤ä¼ æ’­ï¼ˆå¢é‡åŒæ­¥ï¼‰</h4>
<p>æ•°æ®åŒæ­¥å®Œæˆåï¼Œå¤åˆ¶è¿›å…¥ç¨³å®šé˜¶æ®µã€‚</p>
<ol>
<li><strong>æŒç»­åŒæ­¥</strong>ï¼šä¸»æœåŠ¡å™¨æ¯æ‰§è¡Œä¸€ä¸ªä¼šä¿®æ”¹æ•°æ®é›†çš„å†™å‘½ä»¤ï¼ˆå¦‚Â <code>SET</code>ã€<code>LPUSH</code>Â ç­‰ï¼‰ï¼Œéƒ½ä¼š<strong>å¼‚æ­¥åœ°</strong>å°†è¿™ä¸ªå‘½ä»¤å‘é€ç»™æ‰€æœ‰è¿æ¥çš„ä»æœåŠ¡å™¨ã€‚</li>
<li><strong>ä»æœåŠ¡å™¨æ‰§è¡Œ</strong>ï¼šä»æœåŠ¡å™¨æ¥æ”¶åˆ°å‘½ä»¤åï¼Œä¼šåœ¨è‡ªèº«çš„æ•°æ®é›†ä¸Šæ‰§è¡Œç›¸åŒçš„å‘½ä»¤ï¼Œä»è€Œä¿æŒä¸ä¸»æœåŠ¡å™¨çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚</li>
<li><strong>å¼‚æ­¥ç‰¹æ€§</strong>ï¼šæ•´ä¸ªå‘½ä»¤ä¼ æ’­è¿‡ç¨‹æ˜¯<strong>å¼‚æ­¥</strong>çš„ã€‚ä¸»æœåŠ¡å™¨å‘é€å‘½ä»¤åä¸ä¼šç­‰å¾…ä»æœåŠ¡å™¨çš„å›å¤ã€‚è¿™æ„å‘³ç€åœ¨æç«¯æƒ…å†µä¸‹ï¼Œå¦‚æœä¸»æœåŠ¡å™¨åœ¨å‘½ä»¤å‘é€åç«‹å³å®•æœºï¼Œè¯¥å‘½ä»¤å¯èƒ½ä¸¢å¤±ï¼Œå¯¼è‡´ä»æœåŠ¡å™¨æ•°æ®ç¨æ—§ã€‚è¿™æ˜¯Rediså¤åˆ¶åœ¨<strong>æ€§èƒ½</strong>å’Œ<strong>å¼ºä¸€è‡´æ€§</strong>ä¹‹é—´åšçš„æƒè¡¡ã€‚</li>
</ol>
<h3 data-id="heading-6">ä¸‰ã€é‡è¦ç‰¹æ€§ä¸é…ç½®</h3>
<ul>
<li><strong>å¼‚æ­¥å¤åˆ¶</strong>ï¼šé»˜è®¤ä¸”æœ€å¸¸ç”¨çš„æ¨¡å¼ï¼Œæ€§èƒ½å¥½ï¼Œä½†å­˜åœ¨æ•°æ®ä¸¢å¤±çš„æå°çª—å£æœŸã€‚</li>
<li><strong>å¯é…ç½®çš„â€œæœ€å°å‰¯æœ¬æ•°â€</strong> ï¼šé€šè¿‡Â <code>min-replicas-to-write</code>Â å’ŒÂ <code>min-replicas-max-lag</code>Â é…ç½®ï¼Œå¯ä»¥è®©ä¸»æœåŠ¡å™¨åœ¨è¿æ¥çš„ä»æœåŠ¡å™¨æ•°é‡ä¸è¶³æˆ–å»¶è¿Ÿè¿‡é«˜æ—¶ï¼Œæ‹’ç»æ‰§è¡Œå†™å‘½ä»¤ã€‚è¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜äº†æ•°æ®çš„å®‰å…¨æ€§ï¼Œç‰ºç‰²äº†éƒ¨åˆ†å¯ç”¨æ€§ã€‚</li>
<li><strong>æ— ç£ç›˜å¤åˆ¶</strong>ï¼šé€šè¿‡Â <code>repl-diskless-sync</code>Â é…ç½®ï¼Œä¸»æœåŠ¡å™¨å¯ä»¥ç›´æ¥å°† RDB å†…å®¹é€šè¿‡ç½‘ç»œå‘é€ç»™ä»æœåŠ¡å™¨ï¼Œè€Œä¸éœ€è¦å…ˆè½ç›˜ã€‚é€‚ç”¨äºç£ç›˜IOæ…¢çš„ç½‘ç»œç¯å¢ƒã€‚</li>
<li><strong>çº§è”å¤åˆ¶</strong>ï¼šä»æœåŠ¡å™¨ä¹Ÿå¯ä»¥æœ‰è‡ªå·±çš„ä»æœåŠ¡å™¨ï¼Œå½¢æˆæ ‘çŠ¶å¤åˆ¶ç»“æ„ï¼Œå¯ä»¥å‡è½»ä¸»æœåŠ¡å™¨åœ¨ä¼ æ’­å‘½ä»¤æ—¶çš„ç½‘ç»œå‹åŠ›ã€‚</li>
</ul>
<h3 data-id="heading-7">å››ã€æ€»ç»“ä¸å½¢è±¡æ¯”å–»</h3>
<p>ä½ å¯ä»¥å°† Redis ä¸»ä»å¤åˆ¶ç†è§£ä¸ºä¸€ä¸ªÂ <strong>â€œå‡ºç‰ˆ-è®¢é˜…â€æ¨¡å‹</strong>Â æˆ–Â <strong>â€œé¢†å¯¼-è·Ÿéšâ€æ¨¡å‹</strong>ï¼š</p>
<ul>
<li><strong>ä¸»æœåŠ¡å™¨</strong>Â å°±åƒå‡ºç‰ˆç¤¾ï¼Œè´Ÿè´£æ’°å†™å’Œå‡ºç‰ˆæ–°ä¹¦ï¼ˆå†™å‘½ä»¤ï¼‰ã€‚</li>
<li><strong>å¤åˆ¶ç§¯å‹ç¼“å†²åŒº</strong>Â å°±åƒæ˜¯å‡ºç‰ˆç¤¾çš„è¿‘æœŸç¨¿ä»¶ä»“åº“ã€‚</li>
<li><strong>ä»æœåŠ¡å™¨</strong>Â å°±åƒå„åœ°çš„ä¹¦åº—ã€‚</li>
<li><strong>å…¨é‡åŒæ­¥</strong>Â å°±åƒä¹¦åº—ç¬¬ä¸€æ¬¡è¿›è´§ï¼Œéœ€è¦æŠŠå‡ºç‰ˆç¤¾çš„æ‰€æœ‰åº“å­˜ä¹¦ç±ï¼ˆRDBï¼‰å…¨éƒ¨è¿è¿‡æ¥ã€‚</li>
<li><strong>éƒ¨åˆ†åŒæ­¥</strong>Â å°±åƒä¹¦åº—ä¸´æ—¶è¡¥è´§ï¼Œåªä»å‡ºç‰ˆç¤¾çš„è¿‘æœŸç¨¿ä»¶ä»“åº“é‡Œæ‹¿æœ€æ–°å‡ºç‰ˆçš„é‚£å‡ æœ¬ä¹¦ã€‚</li>
<li><strong>å‘½ä»¤ä¼ æ’­</strong>Â å°±åƒå‡ºç‰ˆç¤¾æ¯å‡ºç‰ˆä¸€æœ¬æ–°ä¹¦ï¼Œå°±ç«‹å³å¯„é€ç»™æ‰€æœ‰è®¢é˜…çš„ä¹¦åº—ã€‚</li>
</ul>
<p><strong>ä½œç”¨</strong>ï¼šè¿™ä¸ªç³»ç»Ÿè®©ä¹¦åº—ï¼ˆä»æœåŠ¡å™¨ï¼‰å§‹ç»ˆæœ‰ä¹¦å¯å–ï¼ˆæ•°æ®å¯è¯»ï¼‰ï¼Œå³ä½¿æ€»ç¤¾ï¼ˆä¸»æœåŠ¡å™¨ï¼‰æš‚æ—¶å…³é—­ï¼Œä¹Ÿèƒ½ä»å…¶ä»–å¤§å‹ä¹¦åº—ï¼ˆå¦ä¸€ä¸ªä»æœåŠ¡å™¨ï¼‰è°ƒè´§ï¼Œä¿è¯äº†å›¾ä¹¦é”€å”®ç³»ç»Ÿï¼ˆRedisæœåŠ¡ï¼‰çš„ç¨³å®šå’Œé«˜æ•ˆã€‚</p>
<h3 data-id="heading-8">é¢è¯•å›ç­”</h3>
<p>Redis ä¸»ä»å¤åˆ¶ä¸»è¦ç”¨æ¥å®ç°æ•°æ®çš„å†—ä½™å¤‡ä»½ã€è¯»å†™åˆ†ç¦»å’Œé«˜å¯ç”¨ã€‚å®ƒçš„æ ¸å¿ƒå°±æ˜¯è®©ä¸€ä¸ªä¸»èŠ‚ç‚¹çš„æ•°æ®è‡ªåŠ¨åŒæ­¥åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªä»èŠ‚ç‚¹ä¸Šã€‚<br/>
</p>
<p><strong>åŸç†ä¸Šï¼Œæˆ‘æŠŠå®ƒåˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</strong></p>
<ol>
<li><strong>å»ºç«‹è¿æ¥é˜¶æ®µ</strong><br/>
ä»èŠ‚ç‚¹å¯åŠ¨åï¼Œä¼šé€šè¿‡ <code>slaveof</code> å‘½ä»¤æˆ–è€…é…ç½®æŒ‡å‘ä¸»èŠ‚ç‚¹ï¼Œç„¶åå‘ä¸»èŠ‚ç‚¹å‘é€ <code>PSYNC</code> å‘½ä»¤è¯·æ±‚åŒæ­¥ã€‚ä¸»èŠ‚ç‚¹æ”¶åˆ°è¯·æ±‚åï¼Œä¼šç”Ÿæˆä¸€ä¸ª RDB å¿«ç…§æ–‡ä»¶ï¼ˆbgsave æ–¹å¼ï¼‰ï¼ŒåŒæ—¶ç”¨ç¼“å†²åŒºè®°å½•è¿™æœŸé—´çš„æ–°å†™å‘½ä»¤ã€‚</li>
<li><strong>æ•°æ®åŒæ­¥é˜¶æ®µ</strong><br/>
ä¸»èŠ‚ç‚¹æŠŠç”Ÿæˆçš„ RDB æ–‡ä»¶å‘é€ç»™ä»èŠ‚ç‚¹ï¼Œä»èŠ‚ç‚¹æ¸…ç©ºè‡ªå·±çš„æ—§æ•°æ®ï¼Œç„¶ååŠ è½½è¿™ä¸ª RDB æ¥æ¢å¤æ•°æ®ã€‚å¦‚æœåœ¨ç”Ÿæˆ RDB æœŸé—´ä¸»èŠ‚ç‚¹æœ‰æ–°çš„å†™æ“ä½œï¼Œè¿™äº›å‘½ä»¤ä¼šå…ˆä¿å­˜åœ¨ä¸€ä¸ªå«â€œå¤åˆ¶ç¼“å†²åŒºâ€çš„åœ°æ–¹ã€‚</li>
<li><strong>å‘½ä»¤ä¼ æ’­é˜¶æ®µ</strong><br/>
RDB åŒæ­¥å®Œæˆä¹‹åï¼Œä¸»èŠ‚ç‚¹ä¼šæŠŠå¤åˆ¶ç¼“å†²åŒºé‡Œçš„å†™å‘½ä»¤ä»¥åŠåç»­çš„æ‰€æœ‰å†™å‘½ä»¤ï¼Œä»¥ AOF é‡æ”¾çš„æ–¹å¼å‘é€ç»™ä»èŠ‚ç‚¹ï¼Œä»èŠ‚ç‚¹æ‰§è¡Œè¿™äº›å‘½ä»¤ï¼Œä»è€Œå’Œä¸»èŠ‚ç‚¹ä¿æŒå®æ—¶ä¸€è‡´ã€‚ä¹‹åä¸»èŠ‚ç‚¹æ¯æ‰§è¡Œä¸€ä¸ªå†™å‘½ä»¤ï¼Œéƒ½ä¼šå¼‚æ­¥å‘é€ç»™ä»èŠ‚ç‚¹ã€‚</li>
</ol>
<p>å¦å¤–ï¼ŒRedis 2.8 ä¹‹åæ”¯æŒäº†<strong>éƒ¨åˆ†é‡åŒæ­¥</strong>ï¼šå¦‚æœä»èŠ‚ç‚¹çŸ­æš‚æ–­è¿ååˆæ¢å¤ï¼Œä¸»èŠ‚ç‚¹å¯ä»¥æ ¹æ®å¤åˆ¶åç§»é‡å’Œå¤åˆ¶ç¼“å†²åŒºï¼Œåªå‘é€æ–­å¼€æœŸé—´ç¼ºå¤±çš„é‚£éƒ¨åˆ†å‘½ä»¤ï¼Œè€Œä¸éœ€è¦å…¨é‡åŒæ­¥ï¼Œè¿™å¤§å¤§æå‡äº†å¤åˆ¶çš„æ•ˆç‡ã€‚</p>
<p><strong>ä¸»ä»å¤åˆ¶çš„ä½œç”¨ä¸»è¦æœ‰ä¸‰ç‚¹ï¼š</strong></p>
<ol>
<li><strong>æ•°æ®å¤‡ä»½</strong><br/>
ä»èŠ‚ç‚¹ç›¸å½“äºä¸»èŠ‚ç‚¹çš„ä¸€ä¸ªå®æ—¶å¤‡ä»½ï¼Œä¸€æ—¦ä¸»èŠ‚ç‚¹æ•°æ®ä¸¢å¤±ï¼Œå¯ä»¥ä»ä»èŠ‚ç‚¹æ¢å¤ã€‚</li>
<li><strong>è¯»å†™åˆ†ç¦»</strong><br/>
ä¸»èŠ‚ç‚¹è´Ÿè´£å†™ï¼Œä»èŠ‚ç‚¹å¯ä»¥åˆ†æ‹…è¯»è¯·æ±‚ï¼Œè¿™æ ·æå‡æ•´ä½“è¯»çš„ååé‡ï¼Œé€‚åˆè¯»å¤šå†™å°‘çš„åœºæ™¯ã€‚</li>
<li><strong>é«˜å¯ç”¨åŸºç¡€</strong><br/>
ä¸»ä»å¤åˆ¶æ˜¯ Redis Sentinel å’Œ Redis Cluster å®ç°é«˜å¯ç”¨çš„åŸºç¡€ï¼Œä¸»èŠ‚ç‚¹æŒ‚äº†ä¹‹åï¼Œå¯ä»¥æ‰‹åŠ¨æˆ–è‡ªåŠ¨å°†ä¸€ä¸ªä»èŠ‚ç‚¹æå‡ä¸ºä¸»èŠ‚ç‚¹ï¼Œç»§ç»­æä¾›æœåŠ¡ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ•°æ®-180 Elasticsearch è¿‘å®æ—¶æœç´¢ï¼šSegmentã€Refreshã€Flushã€Translog å…¨æµç¨‹è§£æ]]></title>    <link>https://juejin.cn/post/7582104240987373594</link>    <guid>https://juejin.cn/post/7582104240987373594</guid>    <pubDate>2025-12-11T01:58:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582104240987373594" data-draft-id="7582090790182469670" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ•°æ®-180 Elasticsearch è¿‘å®æ—¶æœç´¢ï¼šSegmentã€Refreshã€Flushã€Translog å…¨æµç¨‹è§£æ"/> <meta itemprop="keywords" content="åç«¯,å¤§æ•°æ®,Elasticsearch"/> <meta itemprop="datePublished" content="2025-12-11T01:58:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ­¦å­åº·"/> <meta itemprop="url" content="https://juejin.cn/user/149189314230039"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ•°æ®-180 Elasticsearch è¿‘å®æ—¶æœç´¢ï¼šSegmentã€Refreshã€Flushã€Translog å…¨æµç¨‹è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/149189314230039/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ­¦å­åº·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T01:58:05.000Z" title="Thu Dec 11 2025 01:58:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">TL;DR</h2>
<ul>
<li>åœºæ™¯ï¼šå†™å…¥åç«‹åˆ»æœä¸åˆ°ã€èŠ‚ç‚¹é‡å¯æ€•ä¸¢æ•°æ®ï¼ŒåªçŸ¥é“â€œè¿‘å®æ—¶â€å´æä¸æ¸… ES åº•å±‚æ˜¯æ€ä¹ˆä¿è¯æ€§èƒ½å’Œå¯é æ€§çš„ã€‚</li>
<li>ç»“è®ºï¼šSegment ä¸å¯å˜ã€Refresh è´Ÿè´£â€œå¯æœâ€ã€Flush+Translog è´Ÿè´£â€œå¯æ¢å¤â€ï¼Œä¸€å¥—é“¾è·¯å…±åŒå®šä¹‰äº† Elasticsearch çš„æ€§èƒ½ä¸Šé™å’Œæ•°æ®å®‰å…¨è¾¹ç•Œã€‚</li>
<li>äº§å‡ºï¼šæ¢³ç†ç´¢å¼•å†™å…¥åˆ° NRT æœç´¢çš„å…¨é“¾è·¯æµç¨‹ï¼Œç»™å‡º refresh_intervalã€flushã€translog.durability ç­‰å…³é”®å‚æ•°çš„è°ƒä¼˜æ€è·¯å’Œå¸¸è§æ•…éšœæ¨¡å¼é€ŸæŸ¥è¡¨ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/55a27f4efa954dcb924e683ed44fb8a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023085&amp;x-signature=1s96bR%2FtX3JVH2e7d8qzSQIgq%2BE%3D" alt="å¤§æ•°æ®-180 Elasticsearch è¿‘å®æ—¶æœç´¢ï¼šSegmentã€Refreshã€Flushã€Translog å…¨æµç¨‹è§£æ" loading="lazy"/></p>
<h2 data-id="heading-1">ç‰ˆæœ¬çŸ©é˜µ</h2>

























<table><thead><tr><th>ç‰ˆæœ¬èŒƒå›´</th><th>å·²éªŒè¯</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Elasticsearch 7.x</td><td>éƒ¨åˆ†</td><td>å†™å…¥/Refresh/Flush/Translog åŸç†ä¸æ–‡ä¸­æè¿°ä¸€è‡´ï¼ŒAPI ç•¥æœ‰å·®å¼‚</td></tr><tr><td>Elasticsearch 8.xï¼ˆ2025ï¼‰</td><td>éƒ¨åˆ†</td><td>æ ¸å¿ƒæœºåˆ¶ç›¸åŒï¼Œå®‰å…¨ä¸é»˜è®¤é…ç½®éœ€ä»¥ 8.x å®˜æ–¹æ–‡æ¡£ä¸ºå‡†</td></tr><tr><td>Elasticsearch 6.x åŠä»¥ä¸‹</td><td>å¦</td><td>ä»…åœ¨åŸç†å±‚é¢å¤§è‡´é€‚ç”¨ï¼Œå…·ä½“å‚æ•°åä¸é»˜è®¤å€¼å¯èƒ½ä¸åŒ</td></tr></tbody></table>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c0e5c8067484a83ac1a9c828faabab8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023085&amp;x-signature=a%2FNNZoGZbgpPgN6%2FtXjm%2F4WWXik%3D" alt="Elasticsearch" loading="lazy"/></p>
<h2 data-id="heading-2">ç´¢å¼•æ–‡æ¡£å†™å…¥å’Œè¿‘å®æ—¶æœç´¢åŸç†</h2>
<h3 data-id="heading-3">åŸºæœ¬æ¦‚å¿µ</h3>
<h4 data-id="heading-4">Segments in Lucene</h4>
<p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒElasticsearchå­˜å‚¨çš„åŸºæœ¬å•å…ƒæ˜¯Shardï¼ŒESä¸­çš„ä¸€ä¸ªIndexå¯èƒ½åˆ†ä¸ºå¤šä¸ªShardï¼Œäº‹å®ä¸Šæ¯ä¸ªShardéƒ½æ˜¯ä¸€ä¸ªLucenceçš„Indexï¼Œå¹¶ä¸”æ¯ä¸ªLucenceIndexç”±å¤šä¸ªSegmentç»„æˆï¼Œæ¯ä¸ªSegmentäº‹å®ä¸Šæ˜¯ä¸€äº›å€’æ’ç´¢å¼•çš„é›†åˆï¼Œæ¯æ¬¡åˆ›å»ºä¸€ä¸ªæ–°çš„Documentï¼Œéƒ½ä¼šå½’å±äºä¸€ä¸ªæ–°çš„Segmentï¼Œè€Œä¸ä¼šå»ä¿®æ”¹åŸæ¥çš„Segmentã€‚ä¸”æ¯æ¬¡çš„æ–‡æ¡£åˆ é™¤æ“ä½œï¼Œä¼šä»…ä»…æ ‡è®°Segmentä¸­è¯¥æ–‡æ¡£ä¸ºåˆ é™¤çŠ¶æ€ï¼Œè€Œä¸ä¼šçœŸæ­£çš„ç«‹é©¬ç‰©ç†åˆ é™¤ï¼Œæ‰€ä»¥è¯´ESçš„indexå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µã€‚å°±åƒä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/394bb060b4db43ba848b76ecc127b1cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023085&amp;x-signature=xeZaY4MtlHvMElXtmChAuEGX%2FVs%3D" alt="Elasticsearch Shard å’Œ Segment" loading="lazy"/></p>
<h4 data-id="heading-5">Translog-Hbase WALï¼ˆWrite Ahead Logï¼‰</h4>
<p>Write Ahead Log é¢„å†™å…¥æ—¥å¿—
æ–°æ–‡æ¡£è¢«ç´¢å¼•æ„å‘³ç€æ–‡æ¡£ä¼šè¢«é¦–å…ˆå†™å…¥å†…å­˜bufferå’Œtranslogæ–‡ä»¶ï¼Œæ¯ä¸ªshardéƒ½å¯¹åº”ä¸€ä¸ªtranslogæ–‡ä»¶</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b11b90726794b519f21f744c4a125c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023085&amp;x-signature=9skoaWRNOkNpDFpZ3kTSkmF8%2F1s%3D" alt="Elasticsearch New document Indexing" loading="lazy"/></p>
<h4 data-id="heading-6">Refresh In Elasticsearch</h4>
<p>åœ¨Elasticsearchä¸­ï¼Œ_refreshæ“ä½œé»˜è®¤æ¯ç§’æ‰§è¡Œä¸€æ¬¡ï¼Œæ„å‘³ç€å°†å†…å­˜bufferçš„æ•°æ®å†™å…¥åˆ°ä¸€ä¸ªæ–°çš„Segmentä¸­ï¼Œè¿™ä¸ªæ—¶å€™ç´¢å¼•å˜æˆäº†å¯æ£€ç´¢çš„ï¼Œå†™å…¥æ–°Segmentåä¼šæ¸…ç©ºå†…å­˜bufferã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bed13c3f242b43d3a68aef4a905a5c81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023085&amp;x-signature=%2FDKseycrK8IENTOB1QtMl1e0GnI%3D" alt="Elasticsearch New Document Indexing" loading="lazy"/></p>
<h4 data-id="heading-7">Flush In Elasticsearch</h4>
<p>Flush æ“ä½œæ„å‘³ç€å°†å†…å­˜bufferçš„æ•°æ®å…¨éƒ¨å†™å…¥åˆ°æ–°çš„Segmentä¸­ï¼Œå¹¶å°†å†…å­˜ä¸­æ‰€æœ‰Segmentså…¨éƒ¨åˆ·ç›˜ï¼Œå¹¶ä¸”æ¸…ç©ºtranslogæ—¥å¿—çš„è¿‡ç¨‹ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/800f03990fc24f458ce2d2ec96baaf8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023085&amp;x-signature=jCQ%2FxRsi5wVs%2F9xloeq6krQ2uyM%3D" alt="Elasticsearch Flush" loading="lazy"/></p>
<h2 data-id="heading-8">è¿‘å®æ—¶æœç´¢</h2>
<h3 data-id="heading-9">åŸºæœ¬æµç¨‹</h3>
<p>Elasticsearchå†™å…¥æµç¨‹ï¼Œå½“ä¸€ä¸ªå†™è¯·æ±‚åˆ°è¾¾Elasticsearchåï¼ŒESå°†æ•°æ®å†™å…¥MemoryBufferä¸­ï¼Œå¹¶æ·»åŠ äº‹åŠ¡æ—¥å¿—ï¼ˆtranslogï¼‰ã€‚å¦‚æœæ¯æ¬¡ä¸€æ¡æ•°æ®å†™å…¥å†…å­˜åç«‹å³å†™åˆ°ç¡¬ç›˜ä¸Šï¼Œç”±äºå†™å…¥çš„æ•°æ®è‚¯å®šæ˜¯ç¦»æ•£çš„ï¼Œå› æ­¤å†™å…¥ç£ç›˜çš„æ“ä½œä¹Ÿå°±æ˜¯éšæœºå†™å…¥äº†ã€‚ç¡¬ç›˜éšæœºå†™å…¥çš„æ•ˆç‡ç›¸å½“ä½ï¼Œä¼šä¸¥é‡é™ä½ESçš„æ€§èƒ½ã€‚
å› æ­¤ESåœ¨è®¾è®¡æ—¶åœ¨MemoryBufferå’Œç¡¬ç›˜ä¹‹é—´åŠ å…¥äº†é«˜é€Ÿç¼“å­˜ï¼ˆFileSystemCacheï¼‰æ¥æé«˜ESçš„å†™æ•ˆç‡ã€‚
å½“å†™è¯·æ±‚å‘é€åˆ°ESåï¼ŒESå°†æ•°æ®å†™å…¥MemoryBufferä¸­ï¼Œæ­¤æ—¶å†™å…¥çš„æ•°æ®è¿˜ä¸èƒ½æŸ¥è¯¢åˆ°ã€‚é»˜è®¤è®¾ç½®ä¸‹ï¼ŒESæ¯1ç§’é’Ÿå°†MemoryBufferä¸­çš„æ•°æ®Refreshåˆ°Linuxçš„FileSystemCacheï¼Œå¹¶æ¸…ç©ºMemoryBufferï¼Œæ­¤æ—¶å†™å…¥çš„æ•°æ®å°±å¯ä»¥è¢«æŸ¥è¯¢åˆ°äº†ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b72adb63ed04d60b3d59686b8cc5863~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023085&amp;x-signature=b%2B8kZ8MRHr2Bnuf%2F%2FiYazX0zjMg%3D" alt="Elasticsearch è¿‘å®æ—¶æœç´¢" loading="lazy"/></p>
<h4 data-id="heading-10">Refresh API</h4>
<p>åœ¨Elasticsearchä¸­ï¼Œå†™å…¥å’Œæ‰“å¼€ä¸€ä¸ªæ–°æ®µçš„è½»é‡çš„è¿‡ç¨‹å«åšRefreshï¼Œé»˜è®¤æƒ…å†µä¸‹æ¯ä¸ªåˆ†ç‰‡ä¼šæ¯ç§’è‡ªåŠ¨åˆ·æ–°ä¸€æ¬¡ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è¯´Elasticsearchæ˜¯â€œè¿‘â€å®æ—¶æœç´¢ï¼šæ–‡æ¡£çš„å˜åŒ–å¹¶ä¸æ˜¯ç«‹å³å¯¹æœç´¢å¯è§ï¼Œä½†ä¼šåœ¨ä¸€ç§’ä¹‹å†…å˜æˆå¯è§ã€‚
è¿™äº›è¡Œä¸ºå¯èƒ½ä¼šå¯¹æ–°ç”¨æˆ·æ“ä½œå›°æƒ‘ï¼Œä»–ä»¬ç´¢å¼•äº†ä¸€ä¸ªæ–‡æ¡£ç„¶åå°è¯•æœç´¢å®ƒï¼Œä½†å´æ²¡æœ‰æœç´¢åˆ°ã€‚è¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ³•æ˜¯ç”¨ Refresh API æ‰§è¡Œä¸€æ¬¡æ‰‹åŠ¨åˆ·æ–°ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">POST /_refresh

POST /my_blogs/_refresh

POST /my_blogs/_doc/1?refresh
{&amp;#34;xxx&amp;#34;: &amp;#34;xxx&amp;#34;}

PUT /test/_doc/2?refresh=true
{&amp;#34;xxx&amp;#34;: &amp;#34;xxx&amp;#34;}
</code></pre>
<ul>
<li>åˆ·æ–°ï¼ˆRefreshï¼‰æ‰€æœ‰çš„ç´¢å¼•</li>
<li>åªåˆ·æ–°ï¼ˆRefreshï¼‰blogs ç´¢å¼•</li>
<li>åªåˆ·æ–°æ–‡æ¡£</li>
</ul>
<p>å¹¶ä¸æ˜¯æ‰€æœ‰çš„æƒ…å†µéƒ½éœ€è¦æ¯ç§’åˆ·æ–°ï¼Œå¯èƒ½ä½ æ­£åœ¨ä½¿ç”¨Elasticsearchç´¢å¼•å¤§é‡çš„æ–‡ä»¶ï¼Œä½ å¯èƒ½æƒ³ä¼˜åŒ–ç´¢å¼•é€Ÿåº¦è€Œä¸æ˜¯è¿‘å®æ—¶æœç´¢ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® refrsh_intervalï¼Œé™ä½æ¯ä¸ªç´¢å¼•çš„åˆ·æ–°é¢‘ç‡ã€‚</p>
<pre><code class="hljs language-json" lang="json">PUT /my_logs
<span class="hljs-punctuation">{</span>
  &amp;#<span class="hljs-number">34</span>;settings&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    &amp;#<span class="hljs-number">34</span>;refresh_interval&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">30</span>s&amp;#<span class="hljs-number">34</span>;
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>refresh_intervalå¯ä»¥åœ¨æ—¢å­˜ç´¢å¼•ä¸ŠåŠ¨æ€æ›´æ–°ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå½“ä½ æ­£åœ¨å»ºç«‹ä¸€ä¸ªå¤§çš„ç´¢å¼•æ—¶ï¼Œå¯ä»¥å…ˆå…³æ¯”è‡ªåŠ¨åˆ·æ–°ï¼Œå¾…å¼€å§‹ä½¿ç”¨è¯¥ç´¢å¼•æ—¶ï¼Œå†æŠŠä»–ä»¬è°ƒå›æ¥ã€‚</p>
<pre><code class="hljs language-json" lang="json">PUT /my_logs/_settings
<span class="hljs-punctuation">{</span>
  &amp;#<span class="hljs-number">34</span>;refresh_interval&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-number">-1</span>
<span class="hljs-punctuation">}</span>

PUT /my_logs/_settings
<span class="hljs-punctuation">{</span>
  &amp;#<span class="hljs-number">34</span>;refresh_interval&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">1</span>s&amp;#<span class="hljs-number">34</span>;
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-11">æŒä¹…åŒ–å˜æ›´</h2>
<h4 data-id="heading-12">åŸºæœ¬æµç¨‹</h4>
<p>æŒä¹…åŒ–å˜æ›´flush
å³ä½¿é€šè¿‡æ¯ç§’åˆ·æ–°ï¼ˆRefreshï¼‰å®ç°äº†è¿‘å®æ—¶æœç´¢ï¼Œä»ç„¶è¦ç»å¸¸è¿›è¡Œå®Œæ•´æäº¤æ¥ç¡®ä¿ä»å¤±è´¥ä¸­æ¢å¤ã€‚ä½†åœ¨ä¸¤æ¬¡æäº¤ä¹‹é—´å‘ç”Ÿå˜åŒ–çš„æ–‡æ¡£æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬ä¹Ÿä¸å¸Œæœ›ä¸¢æ‰è¿™äº›æ•°æ®ã€‚
Elasticsearchå¢åŠ äº†ä¸€ä¸ªTranslogï¼Œå«åšäº‹åŠ¡æ—¥å¿—ï¼Œåœ¨æ¯ä¸€æ¬¡å¯¹Elasticsearchæ“ä½œæ—¶éƒ½ä¼šè¿›è¡Œæ—¥å¿—è®°å½•ï¼Œé€šè¿‡translogï¼Œæ•´ä¸ªæµç¨‹æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p>
<p>ç¬¬ä¸€æ­¥ï¼šä¸€ä¸ªæ–‡æ¡£è¢«ç´¢å¼•ä¹‹åï¼Œå°±ä¼šè¢«æ·»åŠ åˆ°å†…å­˜ç¼“å†²åŒºä¸­ï¼Œå¹¶ä¸”è¿½åŠ åˆ°äº†translogï¼Œå¦‚ä¸‹å›¾æè¿°ä¸€æ ·ï¼š
æ–°çš„æ–‡æ¡£è¢«æ·»åŠ åˆ°å†…å­˜ç¼“å†²åŒºå¹¶ä¸”è¿½åŠ åˆ°äº†äº‹åŠ¡æ—¥å¿—ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cdc900e4c9614f25bc7ac4597bce8514~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023085&amp;x-signature=Zlst5ru4NrhExfZGmpKJadtz8g8%3D" alt="Elasticsearch æŒä¹…åŒ–å˜æ›´" loading="lazy"/>
ç¬¬äºŒæ­¥ï¼šåˆ·æ–°ï¼ˆrefreshï¼‰ä½¿åˆ†ç‰‡å¤„äºä¸‹å›¾æè¿°çš„çŠ¶æ€ï¼Œåˆ†ç‰‡æ¯ç§’åˆ·æ–°ï¼ˆrefreshï¼‰ä¸€æ¬¡ï¼š</p>
<ul>
<li>è¿™äº›å†…å­˜ç¼“å†²åŒºçš„æ–‡æ¡£è¢«å†™å…¥åˆ°ä¸€ä¸ªæ–°çš„æ®µä¸­ï¼Œä¸”æ²¡æœ‰è¿›è¡Œfsyncæ“ä½œ</li>
<li>è¿™ä¸ªæ®µè¢«æ‰“å¼€ï¼Œä½¿å…¶å¯è¢«æœç´¢ã€‚</li>
<li>å†…å­˜ç¼“å­˜åŒºè¢«æ¸…ç©º</li>
</ul>
<p>åˆ·æ–°ï¼ˆrefreshï¼‰å®Œæˆåï¼Œç¼“å­˜è¢«æ¸…ç©ºä½†æ˜¯äº‹åŠ¡æ—¥å¿—ä¸ä¼šã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4830f0f5ffdd42c69e84c3486644e633~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023085&amp;x-signature=2BsYmlIVbwGsPQGwhyE4zDuvEH8%3D" alt="Elasticsearch Refresh" loading="lazy"/>
ç¬¬ä¸‰æ­¥ï¼šè¿™ä¸ªè¿›ç¨‹ç»§ç»­å·¥ä½œï¼Œæ›´å¤šçš„æ–‡æ¡£è¢«æ·»åŠ åˆ°å†…å­˜ç¼“å†²åŒºå’Œè¿½åŠ åˆ°äº‹åŠ¡æ—¥å¿—ï¼Œäº‹åŠ¡æ—¥å¿—ä¸æ–­ç§¯ç´¯æ–‡æ¡£ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8232ff26a020425db5204710d1a64817~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023085&amp;x-signature=zQ9jw6JuNlDDSdwfEZYz%2FV1IqxU%3D" alt="Elasticsearch Commit Point" loading="lazy"/>
æ¯éš”ä¸€æ®µæ—¶é—´ï¼šåˆ—å¦‚translog å˜å¾—è¶Šæ¥è¶Šå¤§ï¼Œç´¢å¼•è¢«åˆ·æ–°ï¼ˆflushï¼‰ï¼Œä¸€ä¸ªæ–°çš„translogè¢«åˆ›å»ºï¼Œå¹¶ä¸”ä¸€ä¸ªå…¨é‡æäº¤è¢«æ‰§è¡Œã€‚</p>
<ul>
<li>æ‰€æœ‰åœ¨å†…å­˜ç¼“å†²åŒºçš„æ–‡æ¡£éƒ½è¢«å†™å…¥ä¸€ä¸ªæ–°çš„æ®µï¼ˆSegmentï¼‰</li>
<li>ç¼“å†²åŒºè¢«æ¸…ç©º</li>
<li>ä¸€ä¸ªæäº¤ç‚¹è¢«å†™å…¥ç¡¬ç›˜</li>
<li>æ–‡ä»¶ç³»ç»Ÿç¼“å­˜é€šè¿‡fsyncè¢«åˆ·æ–°ï¼ˆflushï¼‰</li>
<li>è€çš„translogè¢«åˆ é™¤</li>
</ul>
<p>translogæä¾›æ‰€æœ‰è¿˜æ²¡æœ‰è¢«åˆ·åˆ°ç£ç›˜çš„æ“ä½œçš„ä¸€ä¸ªæŒä¹…åŒ–è®°å½•ï¼Œå½“Elasticsearchå¯åŠ¨çš„æ—¶å€™ï¼Œå®ƒä¼šä»ç£ç›˜ä¸­ä½¿ç”¨æœ€åä¸€ä¸ªæäº¤ç‚¹å»æ¢å¤å·²ç»å¾—æ®µï¼Œå¹¶ä¸”ä¼šé‡æ”¾translogä¸­æ‰€æœ‰åœ¨æœ€åä¸€æ¬¡æäº¤åå‘ç”Ÿçš„å˜æ›´æ“ä½œã€‚
translogä¹Ÿè¢«ç”¨æ¥æä¾›å®æ—¶CRUDï¼Œå½“ä½ è¯•ç€é€šè¿‡IDæŸ¥è¯¢ã€è§£æã€åˆ é™¤ä¸€ä¸ªæ–‡æ¡£ï¼Œå®ƒä¼šåœ¨å°è¯•ä»ç›¸åº”çš„æ®µä¸­æ£€ç´¢ä¹‹å‰ï¼Œé¦–å…ˆæ£€æŸ¥translogä»»ä½•æœ€è¿‘çš„å˜æ›´ã€‚è¿™æ„å‘³ç€å®ƒæ€»æ˜¯èƒ½å¤Ÿå®æ—¶çš„è·å–åˆ°æ–‡æ¡£çš„æœ€æ–°ç‰ˆæœ¬ã€‚åœ¨åˆ·æ–°ï¼ˆflushï¼‰ä¹‹åï¼Œæ®µè¢«å…¨é‡æäº¤ï¼Œå¹¶ä¸”äº‹åŠ¡æ—¥å¿—è¢«æ¸…ç©ºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a07a9cdbab644103bb5c7dc06148cffd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023085&amp;x-signature=KoTl3yJA98FpVxaVLfhv490%2BQ2g%3D" alt="Elasticsearch translog" loading="lazy"/></p>
<h3 data-id="heading-13">flush API</h3>
<p>è¿™ä¸ªæ‰§è¡Œä¸€ä¸ªæäº¤å¹¶ä¸”æˆªæ–­translogçš„è¡Œä¸ºåœ¨Elasticsearchè¢«ç§°ä½œä¸€æ¬¡flushï¼Œåˆ†ç‰‡æ¯30åˆ†é’Ÿè¢«è‡ªåŠ¨åˆ·æ–°ï¼ˆflushï¼‰ï¼Œæˆ–è€…åœ¨translogå¤ªå¤§ï¼ˆ512Mï¼‰çš„æ—¶å€™ä¹Ÿä¼šåˆ·æ–°ã€‚
flush APIå¯ä»¥è¢«ç”¨æ¥æ‰§è¡Œä¸€ä¸ªæ‰‹å·¥çš„åˆ·æ–°ï¼ˆflushï¼‰ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">POST /blogs/_flush

POST /_flush?wait_for_ongoin
</code></pre>
<ul>
<li>åˆ·æ–°ï¼ˆflushï¼‰blogsç´¢å¼•</li>
<li>åˆ·æ–°ï¼ˆflushï¼‰æ‰€æœ‰çš„ç´¢å¼•å¹¶ä¸”ç­‰å¾…æ‰€æœ‰åˆ·æ–°åœ¨è¿”å›å‰å®Œæˆï¼Œæˆ‘ä»¬å¾ˆå°‘éœ€è¦è‡ªå·±æ‰‹åŠ¨æ‰§è¡Œä¸€ä¸ªflushæ“ä½œï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œè‡ªåŠ¨åˆ·æ–°å°±å¤Ÿäº†ã€‚</li>
</ul>
<p>è¿™å°±æ˜¯è¯´ï¼Œåœ¨é‡å¯èŠ‚ç‚¹æˆ–è€…å…³é—­ä¹‹å‰æ‰§è¡Œflushæœ‰ç›Šäºä½ çš„ç´¢å¼•ï¼Œå½“Elasticsearchå°è¯•æ¢å¤æˆ–é‡æ–°æ‰“å¼€ä¸€ä¸ªç´¢å¼•çš„æ—¶å€™ï¼Œå®ƒéœ€è¦é‡æ”¾translogä¸­æ‰€æœ‰çš„æ“ä½œï¼Œæ‰€ä»¥å¦‚æœæ—¥å¿—è¶ŠçŸ­ï¼Œæ¢å¤çš„ä¼šè¶Šå¿«ã€‚</p>
<h3 data-id="heading-14">Translogå®‰å…¨é—®é¢˜</h3>
<p>Translogæœ‰å¤šå®‰å…¨ï¼Ÿ
Translogçš„ç›®çš„æ˜¯ä¿è¯æ“ä½œä¸ä¼šä¸¢å¤±ï¼Œä½†æ˜¯å´å¼•å‡ºäº†å¯¹åº”çš„é—®é¢˜ï¼š
åœ¨æ–‡ä»¶è¢«fsyncåˆ°ç£ç›˜å‰ï¼Œè¢«å†™å…¥çš„æ–‡ä»¶åœ¨é‡å¯ä¹‹åå°±ä¼šä¸¢å¤±ã€‚è¿™ä¸ªè¿‡ç¨‹åœ¨ä¸»åˆ†ç‰‡å’Œå¤åˆ¶åˆ†ç‰‡éƒ½ä¼šå‘ç”Ÿã€‚æœ€ç»ˆï¼ŒåŸºæœ¬ä¸Šï¼Œè¿™æ„å‘³ç€åœ¨æ•´ä¸ªè¯·æ±‚è¢«fsyncåˆ°ä¸»åˆ†ç‰‡å’Œå¤åˆ¶åˆ†ç‰‡çš„translogä¹‹å‰ï¼Œä½ çš„å®¢æˆ·ç«¯ä¸ä¼šå¾—åˆ°ä¸€ä¸ª200çš„OKå“åº”ï¼Œåœ¨æ¯æ¬¡å†™è¯·æ±‚åæ‰§è¡Œä¸€ä¸ªfsyncä¼šå¸¦æ¥æ€§èƒ½ä¸Šçš„æŸå¤±ï¼Œå°½ç®¡å®è·µè¡¨æ˜è¿™ä¸ªæŸå¤±å¹¶ä¸å¤§ï¼ˆç‰¹åˆ«æ˜¯blukå¯¼å…¥ï¼Œåœ¨ä¸€æ¬¡è¯·æ±‚æ—¶å¹³æ‘Šäº†å¤§é‡çš„æ–‡æ¡£å¼€é”€ï¼‰
ä½†æ˜¯å¯¹äºä¸€äº›å¤§å®¹é‡çš„å¶å°”ä¸¢å¤±å‡ ç§’æ•°æ®é—®é¢˜å¹¶ä¸çœ¼ä¸­çš„é›†ç¾¤ï¼Œä½¿ç”¨å¼‚æ­¥çš„fsyncè¿˜æ˜¯æ¯”è¾ƒæœ‰ç›Šçš„ã€‚æ¯”å¦‚ï¼Œå†™å…¥çš„æ•°æ®è¢«ç¼“å­˜åˆ°å†…å­˜ä¸­ï¼Œå†æ¯5ç§’æ‰§è¡Œä¸€æ¬¡fsyncã€‚
è¿™ä¸ªè¡Œä¸ºå¯ä»¥é€šè¿‡è®¾ç½®durabilityå‚æ•°ä¸ºasyncæ¥å¯åŠ¨ã€‚</p>
<pre><code class="hljs language-json" lang="json">PUT /my_index/x_settings
<span class="hljs-punctuation">{</span>
  &amp;#<span class="hljs-number">34</span>;index.translog.durability&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;async&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;index.translog.sync_interval&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">5</span>s&amp;#<span class="hljs-number">34</span>;
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™ä¸ªé€‰é¡¹å¯ä»¥é’ˆå¯¹ç´¢å¼•å•ç‹¬è®¾ç½®ï¼Œå¹¶ä¸”å¯ä»¥åŠ¨æ€ä¿®æ”¹ï¼Œå¦‚æœä½ å†³å®šä½¿ç”¨å¼‚æ­¥translogçš„è¯ï¼Œä½ éœ€è¦ä¿è¯åœ¨å‘ç”Ÿcrashæ—¶ï¼Œä¸¢å¤±æ‰sync_intervalæ—¶é—´æ®µçš„æ•°æ®ä¹Ÿæ— æ‰€è°“ã€‚è¯·åœ¨å†³å®šå‰çŸ¥æ™“è¿™ä¸ªç‰¹æ€§ã€‚
å¦‚æœä½ ä¸ç¡®å®šè¿™ä¸ªè¡Œä¸ºçš„åæœï¼Œæœ€å¥½ä½¿ç”¨é»˜è®¤å‚æ•°ï¼š"index.translog.durability": "request" æ¥é¿å…æ•°æ®ä¸¢å¤±ã€‚</p>
<h2 data-id="heading-15">é”™è¯¯é€ŸæŸ¥</h2>









































<table><thead><tr><th>ç—‡çŠ¶</th><th>æ ¹å› </th><th>å®šä½</th><th>ä¿®å¤</th></tr></thead><tbody><tr><td>å†™å…¥è¿”å› 201/200ï¼Œä½†ç«‹å³æœç´¢ä¸åˆ°æ–‡æ¡£</td><td>è¿‘å®æ—¶è¯­ä¹‰ï¼šrefresh_interval ä¸º 1sï¼Œå°šæœªè§¦å‘ Refresh</td><td>æŸ¥çœ‹ç´¢å¼• settings ä¸­ refresh_intervalï¼Œç›‘æ§ refresh é¢‘ç‡</td><td>å…³é”®é“¾è·¯å¯ä¸´æ—¶è°ƒç”¨ _refreshï¼Œæˆ–ç¼©çŸ­ refresh_intervalï¼›æ‰¹é‡å†™å…¥é˜¶æ®µç›¸ååº”è°ƒå¤§æˆ–å…³é—­</td></tr><tr><td>èŠ‚ç‚¹é‡å¯åä¸¢å¤±å‡ ç§’é’Ÿå†…çš„å†™å…¥</td><td>translog ä½¿ç”¨ async æ¨¡å¼ï¼Œsync_interval å†…çš„æ•°æ®æœª fsync</td><td>æŸ¥çœ‹ index.translog.durability å’Œ index.translog.sync_interval</td><td>å¯¹å…³é”®ä¸šåŠ¡ä½¿ç”¨ durability=requestï¼Œç¼©çŸ­ sync_intervalï¼›é‡è¦å˜æ›´å‰æ‰‹åŠ¨ _flush</td></tr><tr><td>é›†ç¾¤æ¢å¤æˆ–åˆ†ç‰‡é‡å¯æ—¶é—´å¼‚å¸¸é•¿</td><td>é•¿æœŸæœª flushï¼Œtranslog ä½“ç§¯è¿‡å¤§ï¼Œæ¢å¤æ—¶éœ€è¦é‡æ”¾å¤§é‡æ“ä½œ</td><td>æŸ¥çœ‹ç´¢å¼•çš„ translog å¤§å°ã€RECOVERING çŠ¶æ€è€—æ—¶</td><td>è°ƒæ•´ flush ç­–ç•¥ï¼›åœ¨æµé‡ä½è°·æ‰§è¡Œ _flushï¼›å¿…è¦æ—¶ä½¿ç”¨æ»šåŠ¨ç´¢å¼•å‡å°å•ç´¢å¼•ä½“é‡</td></tr><tr><td>å†™å…¥ååä½ï¼Œç£ç›˜ IO æŒç»­åé«˜</td><td>refresh_interval è¿‡å°æˆ–é¢‘ç¹æ‰‹å·¥ _refresh / _flush</td><td>ç›‘æ§æ¯ç§’ refresh/flush æ¬¡æ•°ä¸ segment ç”Ÿæˆé¢‘ç‡</td><td>å¯¼å…¥é˜¶æ®µè®¾ç½® refresh_interval=-1ï¼Œå¯¼å…¥å®Œæˆåå†æ¢å¤ï¼›å‡å°‘ä¸å¿…è¦çš„æ‰‹å·¥ _refreshï¼_flush</td></tr><tr><td>ç£ç›˜ç©ºé—´å¢é•¿å¿«ï¼Œsegment æ•°é‡çˆ†ç‚¸</td><td>åˆ é™¤/æ›´æ–°é¢‘ç¹ã€merge å‹åŠ›å¤§ï¼Œflush/æ»šåŠ¨ç­–ç•¥ä¸å½“</td><td>é€šè¿‡ _cat/segmentsã€store size è§‚å¯Ÿ segment æ•°é‡ä¸å¤§å°</td><td>é‡‡ç”¨æ»šåŠ¨ç´¢å¼•æ²»ç†å†·æ•°æ®ï¼Œå®šæœŸå¯¹åªè¯»ç´¢å¼•ç”¨ force mergeï¼Œä¼˜åŒ–åˆ é™¤/æ›´æ–°æ¨¡å¼</td></tr></tbody></table>
<h2 data-id="heading-16">å…¶ä»–ç³»åˆ—</h2>
<h3 data-id="heading-17">ğŸš€ AIç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>AIç‚¼ä¸¹æ—¥å¿—-29 - å­—èŠ‚è·³åŠ¨ DeerFlow æ·±åº¦ç ”ç©¶æ¡†<em>æ–œä½“æ ·å¼</em>æ¶ ç§æœ‰éƒ¨ç½² æµ‹è¯•ä¸Šæ‰‹ æ¶æ„ç ”ç©¶</strong>ï¼ŒæŒç»­æ‰“é€ å®ç”¨AIå·¥å…·æŒ‡å—ï¼
<strong>AIç ”ç©¶-132 Java ç”Ÿæ€å‰æ²¿ 2025ï¼šSpringã€Quarkusã€GraalVMã€CRaC ä¸äº‘åŸç”Ÿè½åœ°</strong></p>
<h3 data-id="heading-18">ğŸ’» Javaç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>Java-180 Java æ¥å…¥ FastDFSï¼šè‡ªç¼–è¯‘å®¢æˆ·ç«¯ä¸ Maven/Spring Boot å®æˆ˜</strong>
MyBatis å·²å®Œç»“ï¼ŒSpring å·²å®Œç»“ï¼ŒNginxå·²å®Œç»“ï¼ŒTomcatå·²å®Œç»“ï¼Œåˆ†å¸ƒå¼æœåŠ¡å·²å®Œç»“ï¼ŒDubboå·²å®Œç»“ï¼ŒMySQLå·²å®Œç»“ï¼ŒMongoDBå·²å®Œç»“ï¼ŒNeo4jå·²å®Œç»“ï¼ŒFastDFS å·²å®Œç»“ï¼ŒOSSæ­£åœ¨æ›´æ–°... æ·±å…¥æµ…å‡ºåŠ©ä½ æ‰“ç‰¢åŸºç¡€ï¼</p>
<h3 data-id="heading-19">ğŸ“Š å¤§æ•°æ®æ¿å—å·²å®Œæˆå¤šé¡¹å¹²è´§æ›´æ–°ï¼ˆ300ç¯‡ï¼‰ï¼š</h3>
<p>åŒ…æ‹¬ Hadoopã€Hiveã€Kafkaã€Flinkã€ClickHouseã€Elasticsearch ç­‰äºŒåä½™é¡¹æ ¸å¿ƒç»„ä»¶ï¼Œè¦†ç›–ç¦»çº¿+å®æ—¶æ•°ä»“å…¨æ ˆï¼
<strong>å¤§æ•°æ®-278 Spark MLib - åŸºç¡€ä»‹ç» æœºå™¨å­¦ä¹ ç®—æ³• æ¢¯åº¦æå‡æ ‘ GBDTæ¡ˆä¾‹ è¯¦è§£</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¶…è¶Šæ·±åº¦å­¦ä¹ ï¼šé‡å­ä¼˜åŒ–å¦‚ä½•é€šè¿‡ç®—æ³•ä¸ç¡¬ä»¶é‡å¡‘AI]]></title>    <link>https://juejin.cn/post/7582073642869948431</link>    <guid>https://juejin.cn/post/7582073642869948431</guid>    <pubDate>2025-12-11T01:59:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582073642869948431" data-draft-id="7582131164727787560" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¶…è¶Šæ·±åº¦å­¦ä¹ ï¼šé‡å­ä¼˜åŒ–å¦‚ä½•é€šè¿‡ç®—æ³•ä¸ç¡¬ä»¶é‡å¡‘AI"/> <meta itemprop="keywords" content="ç®—æ³•,è®¡ç®—æœºè§†è§‰,æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2025-12-11T01:59:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CoovallyAIHub"/> <meta itemprop="url" content="https://juejin.cn/user/2461151071843739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¶…è¶Šæ·±åº¦å­¦ä¹ ï¼šé‡å­ä¼˜åŒ–å¦‚ä½•é€šè¿‡ç®—æ³•ä¸ç¡¬ä»¶é‡å¡‘AI
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2461151071843739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CoovallyAIHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T01:59:41.000Z" title="Thu Dec 11 2025 01:59:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2025å¹´åº•ï¼Œè‹¥è®ºåŠç§‘æŠ€é¢†åŸŸè¢«æåŠæœ€å¤šã€æ‰¿è½½æœ€å¤šæœªæ¥æƒ³è±¡çš„å…³é”®è¯ï¼Œâ€œé‡å­è®¡ç®—â€å¿…å®šä½åˆ—å‰èŒ…ã€‚å®ƒä¸å†ä»…ä»…æ˜¯å®éªŒå®¤ä¸­çš„æ·±å¥¥æ¦‚å¿µï¼Œè€Œæ˜¯ä½œä¸ºä¸€è‚¡åˆ‡å®çš„å˜é©åŠ›é‡ï¼Œå¼€å§‹å©å‡»ç°å®é—®é¢˜çš„å¤§é—¨ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†é‚£äº›è®©ç»å…¸è®¡ç®—æœºå€æ„Ÿå‹åŠ›çš„å¤æ‚è®¡ç®—ä»»åŠ¡æ—¶ã€‚è€Œè¿™è‚¡åŠ›é‡æœ€é”‹èŠ’åˆéœ²çš„æ–¹å‘ä¹‹ä¸€ï¼Œä¾¿æ˜¯ä¼˜åŒ–â€”â€”äººå·¥æ™ºèƒ½ä¹ƒè‡³ä¼—å¤šç§‘å­¦å’Œå·¥ä¸šé¢†åŸŸçš„æ ¸å¿ƒå¼•æ“ã€‚</p>
<p><strong>æœ€å‰æ²¿çš„äººå·¥æ™ºèƒ½ç³»ç»Ÿ</strong>ï¼Œæ— è®ºæ˜¯è‡ªåŠ¨é©¾é©¶æ±½è½¦è¿˜æ˜¯è‚¡ç¥¨é¢„æµ‹æ¨¡å‹ï¼Œéƒ½åœ¨ä¸æ–­è°ƒæ•´ã€å®Œå–„å’Œä»ç»éªŒä¸­å­¦ä¹ çš„è¿‡ç¨‹ä¸­åšå‡ºæƒè¡¡ã€‚è¿™äº›å†³ç­–èƒŒåï¼Œéšè—ç€äººå·¥æ™ºèƒ½ä¸­æœ€é‡è¦çš„ä¸€ç¯ï¼š<strong>ä¼˜åŒ–</strong>ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸€ä¸ªè®­ç»ƒç”¨äºè¯†åˆ«äº¤é€šæ ‡å¿—æˆ–é¢„æµ‹æˆ¿ä»·çš„äººå·¥æ™ºèƒ½æ¨¡å‹ä¼šä»ç¤ºä¾‹ä¸­å­¦ä¹ ã€‚åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œå®ƒæŒç»­æ”¹è¿›å­¦ä¹ æ–¹å¼ã€‚æ¯ä¸€æ­¥éƒ½è°ƒæ•´æ•°ç™¾ä¸‡ä¸ªå‚æ•°ï¼Œå¾®è°ƒæƒé‡å’Œåç½®ï¼Œä»¥å‡å°‘é¢„æµ‹è¯¯å·®å¹¶æé«˜å‡†ç¡®æ€§ã€‚</p>
<p>ä½ å¯ä»¥å°†æ­¤è¿‡ç¨‹è§†ä¸ºä¸€ä¸ª<strong>å¤§è§„æ¨¡ä¼˜åŒ–é—®é¢˜</strong>ã€‚ç›®æ ‡æ˜¯æ‰¾åˆ°èƒ½å¤Ÿæä¾›å‡†ç¡®ç»“æœã€åŒæ—¶é¿å…è¿‡æ‹Ÿåˆæˆ–æµªè´¹è®¡ç®—èµ„æºçš„æœ€ä½³å‚æ•°ç»„åˆã€‚</p>
<p>äº‹å®ä¸Šï¼Œ<strong>ä¼˜åŒ–æ˜¯äººå·¥æ™ºèƒ½çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†</strong>ã€‚æ— è®ºæ˜¯å›¾åƒè¯†åˆ«è¿˜æ˜¯ä»·æ ¼é¢„æµ‹ï¼ŒAIæ¨¡å‹éƒ½å¿…é¡»åœ¨æ— æ•°å¯èƒ½æ€§ä¸­å¯»æ‰¾æœ€æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚ä½†éšç€æ¨¡å‹å’Œæ•°æ®é›†çš„å¢é•¿ï¼Œè¿™ç§æœç´¢å˜å¾—æ—¥ç›Šå¤æ‚ä¸”è®¡ç®—æˆæœ¬é«˜æ˜‚ã€‚</p>
<p><strong>é‡å­ä¼˜åŒ–</strong>æ˜¯ä¸€ç§æ–°å…´çš„æ–¹æ³•ï¼Œå¯èƒ½æœ‰åŠ©äºåº”å¯¹è¿™ä¸€æŒ‘æˆ˜ã€‚å®ƒåŸºäº<strong>é‡å­è®¡ç®—</strong>ï¼Œåè€…åˆ©ç”¨é‡å­åŠ›å­¦åŸç†ä»¥å…¨æ–°æ–¹å¼å¤„ç†ä¿¡æ¯ã€‚</p>
<p>ä¸åªèƒ½æ˜¯0æˆ–1çš„ç»å…¸æ¯”ç‰¹ä¸åŒï¼Œé‡å­è®¡ç®—æœºä½¿ç”¨<strong>é‡å­æ¯”ç‰¹</strong>ï¼Œå¯ä»¥åŒæ—¶å¤„äºå¤šç§çŠ¶æ€ã€‚è¿™ä½¿å¾—å®ƒä»¬åœ¨æŸäº›æƒ…å†µä¸‹èƒ½å¤Ÿå¹¶è¡Œæ¢ç´¢è®¸å¤šå¯èƒ½çš„è§£å†³æ–¹æ¡ˆï¼Œä»è€Œæ¯”ç»å…¸æ–¹æ³•æ›´é«˜æ•ˆåœ°è§£å†³å¤æ‚çš„ä¼˜åŒ–é—®é¢˜ã€‚</p>
<p>ç„¶è€Œï¼Œ<strong>é‡å­å¹¶è¡Œæ€§</strong> ä¸åŒäºåŒæ—¶è¿è¡Œå¤šä¸ªç»å…¸å¤„ç†å™¨ã€‚å®ƒæ˜¯ä¸€ä¸ªæ¦‚ç‡æ€§çš„è¿‡ç¨‹ï¼Œä¾èµ–äºé‡å­å¹²æ¶‰ æ¥äº§ç”Ÿæœ‰ç”¨ç»“æœã€‚</p>
<p>ç®€è€Œè¨€ä¹‹ï¼Œè¿™æ„å‘³ç€é‡å­è®¡ç®—æœºå¹¶ä¸ä¼šä¸€æ¬¡æ€§æµ‹è¯•æ‰€æœ‰å¯èƒ½æ€§ã€‚ç›¸åï¼Œå®ƒä»¬åˆ©ç”¨å¹²æ¶‰ç°è±¡â€”â€”æŸäº›å¯èƒ½æ€§ç›¸äº’å¢å¼ºï¼Œè€Œå¦ä¸€äº›åˆ™ç›¸äº’æŠµæ¶ˆâ€”â€”æ¥å¢åŠ æ‰¾åˆ°æ­£ç¡®ç­”æ¡ˆçš„å‡ ç‡ã€‚</p>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨é‡å­ä¼˜åŒ–å¦‚ä½•å·¥ä½œã€å®ƒä¸ºä½•é‡è¦ï¼Œä»¥åŠå®ƒå¯¹æœªæ¥æ™ºèƒ½è®¡ç®—å¯èƒ½æ„å‘³ç€ä»€ä¹ˆã€‚è®©æˆ‘ä»¬å¼€å§‹å§ï¼</p>
<h2 data-id="heading-0"><strong>ä»€ä¹ˆæ˜¯é‡å­ä¼˜åŒ–ï¼Ÿ</strong></h2>
<p>é‡å­ä¼˜åŒ–æ˜¯é‡å­è®¡ç®—é¢†åŸŸå†…ä¸€ä¸ªä¸æ–­å‘å±•çš„åˆ†æ”¯ï¼Œä¸“æ³¨äºåˆ©ç”¨é‡å­åŠ›å­¦çš„ç‹¬ç‰¹æ€§è´¨æ¥è§£å†³å¤æ‚çš„ä¼˜åŒ–é—®é¢˜ã€‚å®ƒå»ºç«‹åœ¨æ•°åå¹´çš„è®¡ç®—æœºç§‘å­¦å’Œç‰©ç†å­¦ç ”ç©¶åŸºç¡€ä¸Šï¼Œå°†ä¸¤è€…ç»“åˆä»¥åº”å¯¹ä¼ ç»Ÿè®¡ç®—éš¾ä»¥åº”å¯¹çš„æŒ‘æˆ˜ã€‚</p>
<p>åˆ©ç”¨é‡å­ç³»ç»Ÿè¿›è¡Œä¼˜åŒ–çš„æƒ³æ³•æœ€æ—©å‡ºç°äº20ä¸–çºª90å¹´ä»£æœ«ï¼Œå½“æ—¶ç ”ç©¶äººå‘˜å¼€å§‹æ¢ç´¢å åŠ ï¼ˆåŒæ—¶å¤„äºå¤šç§çŠ¶æ€ï¼‰å’Œçº ç¼ ï¼ˆç›¸äº’å…³è”çš„é‡å­æ¯”ç‰¹ï¼‰ç­‰é‡å­åŸç†å¦‚ä½•åº”ç”¨äºé—®é¢˜æ±‚è§£ã€‚</p>
<p>éšç€æ—¶é—´çš„æ¨ç§»ï¼Œè¿™æ¼”å˜æˆäº†é‡å­ä¼˜åŒ–ï¼Œç ”ç©¶äººå‘˜å¼€å‘å‡ºåˆ©ç”¨é‡å­æ•ˆåº”æ¥é«˜æ•ˆæœç´¢å¤§å‹å¤æ‚é—®é¢˜ç©ºé—´ä¸­æœ€ä¼˜è§£çš„ç®—æ³•ã€‚</p>
<h2 data-id="heading-1"><strong>é‡å­ä¼˜åŒ–çš„åŸºç¡€</strong></h2>
<p>å…¶æ ¸å¿ƒï¼Œé‡å­ä¼˜åŒ–å»ºç«‹åœ¨ä¸‰ä¸ªå…³é”®ç»„æˆéƒ¨åˆ†ä¹‹ä¸Šï¼š<strong>é‡å­ç®—æ³•ã€é‡å­æ¯”ç‰¹</strong> <strong>å’ŒÂ é‡å­ç”µè·¯</strong>ã€‚é‡å­ç®—æ³•æä¾›äº†èƒ½å¤Ÿé«˜æ•ˆæ¢ç´¢å¤§é‡å¯èƒ½è§£çš„é€»è¾‘ã€‚</p>
<p>è¿™äº›ç®—æ³•æ“ä½œäºé‡å­æ¯”ç‰¹ä¸Šï¼Œå³é‡å­ä¿¡æ¯çš„åŸºæœ¬å•ä½ã€‚å®ƒä»¬ä¸ç»å…¸æ¯”ç‰¹ï¼ˆä¼ ç»Ÿè®¡ç®—æœºä¸­æ•°æ®çš„äºŒè¿›åˆ¶å•ä½ï¼Œåªèƒ½å–0æˆ–1å€¼ï¼‰ä¸åŒï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥å¤„äº<strong>å åŠ æ€</strong>ï¼ŒåŒæ—¶è¡¨ç¤º0å’Œ1ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0604e3bc91a842418f410967a66492fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023180&amp;x-signature=BJ7VfaMJlMyLXY9VCWIYVBeaG4o%3D" alt="screenshot_2025-12-10_15-13-58.png" loading="lazy"/></p>
<p>è¿™ç§ç‹¬ç‰¹å±æ€§ä½¿å¾—é‡å­ç³»ç»Ÿèƒ½å¤Ÿ<strong>åŒæ—¶è¯„ä¼°å¤šç§å¯èƒ½æ€§</strong>ï¼Œæå¤§åœ°æ‰©å±•äº†å…¶è®¡ç®—æ½œåŠ›ã€‚åŒæ—¶ï¼Œ<strong>é‡å­ç”µè·¯</strong> é€šè¿‡ä¸€ç³»åˆ—çš„é‡å­é—¨è¿æ¥é‡å­æ¯”ç‰¹ï¼Œæ§åˆ¶ä¿¡æ¯å¦‚ä½•æµåŠ¨å’Œç›¸äº’ä½œç”¨ï¼Œé€æ­¥å¼•å¯¼ç³»ç»Ÿè¶‹å‘æ¥è¿‘æœ€ä¼˜çš„è§£ã€‚</p>
<h2 data-id="heading-2"><strong>ç»å…¸ä¼˜åŒ– vs. é‡å­ä¼˜åŒ–</strong></h2>
<p>ä»¥ä¸‹æ˜¯ç»å…¸ä¼˜åŒ–ä¸é‡å­ä¼˜åŒ–æ–¹æ³•ä¹‹é—´çš„å‡ ä¸ªå…³é”®åŒºåˆ«ï¼š</p>
<ul>
<li><strong>è®¡ç®—é£æ ¼ï¼š</strong> ç»å…¸ç®—æ³•ä¸€æ¬¡æµ‹è¯•ä¸€ä¸ªè§£ã€‚é‡å­ç®—æ³•é€šè¿‡åˆ©ç”¨é‡å­ç‰©ç†çš„ç‹¬ç‰¹å±æ€§ï¼Œå¯ä»¥åŒæ—¶è€ƒè™‘å¤šç§å¯èƒ½æ€§ã€‚</li>
<li><strong>å¤„ç†èƒ½åŠ›ï¼š</strong> ç»å…¸è®¡ç®—æœºä½¿ç”¨åªèƒ½æ˜¯0æˆ–1çš„æ¯”ç‰¹ã€‚é‡å­è®¡ç®—æœºä½¿ç”¨é‡å­æ¯”ç‰¹ï¼Œå®ƒä»¬å¯ä»¥åŒæ—¶æ˜¯0å’Œ1ï¼Œå¹¶ä¸”å¯ä»¥ç›¸äº’é“¾æ¥ï¼Œä»è€Œèƒ½å¤Ÿå¤„ç†æ›´å¤æ‚çš„é—®é¢˜ã€‚</li>
<li><strong>é—®é¢˜è§„æ¨¡ï¼š</strong> ç»å…¸ä¼˜åŒ–é€‚ç”¨äºè¾ƒå°æˆ–ä¸­ç­‰å¤æ‚åº¦çš„é—®é¢˜ã€‚é‡å­ä¼˜åŒ–æ­£åœ¨è¢«å¼€å‘ç”¨äºå¤„ç†å½“ä»Šè®¡ç®—æœºéš¾ä»¥åº”å¯¹çš„ã€æ›´å¤§æ›´å¤æ‚çš„é—®é¢˜ã€‚</li>
<li><strong>ç»“æœï¼š</strong> ç»å…¸ç»“æœæ˜¯å¯é¢„æµ‹ä¸”å¯é‡å¤çš„ã€‚é‡å­ç»“æœåŸºäºæ¦‚ç‡ï¼Œå› æ­¤åŒä¸€ä»»åŠ¡å¯èƒ½ç»™å‡ºç•¥æœ‰ä¸åŒçš„ç»“æœï¼Œéœ€è¦é€šè¿‡å¤šæ¬¡è¿è¡Œæ¥ä¼˜åŒ–ï¼Œä»¥æ‰¾åˆ°æœ€ä½³ç­”æ¡ˆã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/676efba69c7b44868e13e7bc302d3e34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023180&amp;x-signature=KUk53Cv%2FoDru9L%2B7LMO7ADg8sIg%3D" alt="screenshot_2025-12-10_15-14-28.png" loading="lazy"/></p>
<h2 data-id="heading-3"><strong>é‡å­ä¼˜åŒ–å¦‚ä½•å·¥ä½œ</strong></h2>
<p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹é‡å­ä¼˜åŒ–çš„å®é™…å·¥ä½œæµç¨‹ã€‚ä¸€åˆ‡éƒ½å§‹äºå®šä¹‰ç°å®ä¸–ç•Œé—®é¢˜ï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºé‡å­è®¡ç®—æœºå¯ä»¥å¤„ç†çš„å½¢å¼ã€‚</p>
<p>ä»¥ä¸‹æ˜¯é‡å­ä¼˜åŒ–æ¶‰åŠçš„ä¸»è¦æ­¥éª¤æ¦‚è¿°ï¼š</p>
<ul>
<li><strong>å°†é—®é¢˜è¡¨è¿°ä¸ºèƒ½é‡æ™¯è§‚ï¼š</strong> æ¯ä¸ªä¼˜åŒ–é—®é¢˜ï¼Œä¾‹å¦‚è§„åˆ’é€è´§è·¯çº¿æˆ–è°ƒä¼˜æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œéƒ½å¯ä»¥æè¿°ä¸ºä¸€ä¸ªèƒ½é‡çº§åˆ«ç»„æˆçš„æ™¯è§‚ã€‚æ¯ä¸ªå¯èƒ½çš„ç­”æ¡ˆéƒ½æœ‰ä¸€ä¸ªèƒ½é‡å€¼ï¼Œç›®æ ‡æ˜¯æ‰¾åˆ°æœ€ä½çš„é‚£ä¸ªï¼Œè¿™ä»£è¡¨äº†æœ€é«˜æ•ˆæˆ–æœ€ä¼˜çš„è§£å†³æ–¹æ¡ˆã€‚</li>
<li><strong>å°†é—®é¢˜ç¼–ç åˆ°é‡å­ç”µè·¯ä¸­ï¼š</strong> ç„¶åå°†é—®é¢˜è½¬æ¢ä¸ºé‡å­ç”µè·¯ã€‚åœ¨è¿™é‡Œï¼Œé‡å­æ¯”ç‰¹ ä»£è¡¨æ•°æ®ï¼Œå¹¶å¯ä»¥é€šè¿‡å åŠ åŒæ—¶æ¢ç´¢è®¸å¤šè§£å†³æ–¹æ¡ˆã€‚</li>
<li><strong>å¼•å¯¼ç³»ç»Ÿè¶‹å‘æœ€ä½³è§£ï¼š</strong> é‡å­è®¡ç®—æœºéšåé€æ­¥è°ƒæ•´é‡å­æ¯”ç‰¹ï¼Œå…è®¸ç³»ç»Ÿç§»å‘æœ€ä½èƒ½é‡æˆ–æœ€ä½³è§£ã€‚è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºé‡å­é€€ç«æˆ–ç»çƒ­æ¼”åŒ–ï¼Œå…·ä½“å–å†³äºä½¿ç”¨çš„æ–¹æ³•ã€‚å®ƒå¸®åŠ©ç³»ç»Ÿç¨³å®šåœ¨æœ€ç†æƒ³çš„çŠ¶æ€ã€‚</li>
<li><strong>æµ‹é‡å’Œè§£é‡Šç»“æœï¼š</strong> å½“ç³»ç»Ÿç¨³å®šåï¼Œå¯¹é‡å­æ¯”ç‰¹è¿›è¡Œæµ‹é‡ï¼Œäº§ç”Ÿä¸€ä¸ªè¿‘ä¼¼è§£ã€‚é€šå¸¸ä¼šè¿›è¡Œå¤šæ¬¡è¿è¡Œä»¥è¡¡é‡è§£çš„è´¨é‡å¹¶ç¡®è®¤å¯é æ€§ã€‚</li>
<li><strong>ç»“åˆç»å…¸è®¡ç®—è¿›è¡Œç²¾ç‚¼ï¼š</strong> æœ€åï¼Œå°†ç»å…¸è®¡ç®—é‡æ–°çº³å…¥å¾ªç¯ã€‚å®ƒä»¬åˆ†æå’Œå¾®è°ƒé‡å­è¿è¡Œçš„ç»“æœä»¥æé«˜å‡†ç¡®æ€§ã€‚è¿™ç§æ··åˆæ–¹æ³•ï¼Œä¾‹å¦‚åœ¨QAOAå’ŒVQEä¸­ä½¿ç”¨ï¼Œç»“åˆäº†ç»å…¸å’Œé‡å­ç³»ç»Ÿçš„ä¼˜åŠ¿ï¼Œä»¥è·å¾—æ›´å¥½çš„æ•´ä½“æ€§èƒ½ã€‚</li>
</ul>
<h2 data-id="heading-4"><strong>æ ¸å¿ƒé‡å­ä¼˜åŒ–ç®—æ³•</strong></h2>
<p>å¾—ç›Šäºé‡å­è®¡ç®—çš„æœ€æ–°è¿›å±•ï¼Œç ”ç©¶äººå‘˜å·²ç»å¼€å‘äº†ä¸€ç³»åˆ—æ—¨åœ¨æ›´é«˜æ•ˆè§£å†³å¤æ‚é—®é¢˜çš„é‡å­ä¼˜åŒ–ç®—æ³•ã€‚è¿™äº›æ–¹æ³•æ­£åœ¨å¡‘é€ è¯¥é¢†åŸŸçš„æœªæ¥ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å…¶ä¸­ä¸€äº›ä¸»è¦çš„ç®—æ³•ã€‚</p>
<ul>
<li><strong>é‡å­é€€ç«</strong></li>
</ul>
<p>é‡å­é€€ç«æ˜¯ä¸€ç§ç”¨äºè§£å†³ä¼˜åŒ–é—®é¢˜çš„æŠ€æœ¯ï¼Œè¿™äº›é—®é¢˜æ¶‰åŠä»ä¼—å¤šå¯èƒ½æ€§ä¸­æ‰¾åˆ°æœ€ä½³çš„æ’åˆ—æˆ–ç»„åˆã€‚è¿™äº›é—®é¢˜è¢«ç§°ä¸ºç»„åˆä¼˜åŒ–é—®é¢˜ï¼Œä¾‹å¦‚è°ƒåº¦é€è´§ã€è§„åˆ’è½¦è¾†è·¯çº¿æˆ–å¯¹ç›¸ä¼¼æ•°æ®ç‚¹è¿›è¡Œåˆ†ç»„ã€‚</p>
<p>è¯¥æ–¹æ³•çš„çµæ„Ÿæ¥æºäºç§°ä¸ºé€€ç«çš„ç‰©ç†è¿‡ç¨‹ï¼Œå³ææ–™è¢«ç¼“æ…¢å†·å´ä»¥è¾¾åˆ°ç¨³å®šçš„ä½èƒ½çŠ¶æ€ã€‚ç±»ä¼¼åœ°ï¼Œé‡å­é€€ç«é€æ¸å¼•å¯¼é‡å­ç³»ç»Ÿè¶‹å‘å…¶æœ€ä½èƒ½é‡çŠ¶æ€ï¼Œè¿™ä»£è¡¨äº†é—®é¢˜çš„æœ€ä½³å¯èƒ½è§£ã€‚</p>
<p>è¿™ä¸ªåŸºäºç»çƒ­é‡å­è®¡ç®—åŸç†çš„è¿‡ç¨‹ï¼Œå…è®¸ç³»ç»Ÿæ¢ç´¢è®¸å¤šæ½œåœ¨è§£å¹¶æœ€ç»ˆæ”¶æ•›åˆ°ä¸€ä¸ªæ¥è¿‘æœ€ä¼˜çš„è§£ã€‚ç”±äºç»“æœæ˜¯æ¦‚ç‡æ€§çš„ï¼Œè¯¥è¿‡ç¨‹é€šå¸¸é‡å¤å¤šæ¬¡ï¼Œå¹¶å¸¸éšåä½¿ç”¨ç»å…¸è®¡ç®—æ¥ä¼˜åŒ–ç­”æ¡ˆã€‚</p>
<p>é‡å­é€€ç«åœ¨ç‰©æµã€èšç±»åˆ†æå’Œèµ„æºåˆ†é…ç­‰é¢†åŸŸçš„ç°å®ä¸–ç•Œä¼˜åŒ–é—®é¢˜è§£å†³ä¸­æ˜¾ç¤ºå‡ºæ½œåŠ›ã€‚ç„¶è€Œï¼Œç ”ç©¶äººå‘˜ä»åœ¨æ¢ç´¢å®ƒåœ¨ä½•æ—¶ä»¥åŠå¦‚ä½•èƒ½æ¯”ä¼ ç»Ÿæ–¹æ³•è¡¨ç°å¾—æ›´å¥½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f8443f75d2a4083b94f880dcb70e333~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023180&amp;x-signature=tRkTMdOZViQpCGncn4y9mPQrV04%3D" alt="screenshot_2025-12-10_15-14-39.png" loading="lazy"/></p>
<ul>
<li><strong>é‡å­è¿‘ä¼¼ä¼˜åŒ–ç®—æ³•</strong></li>
</ul>
<p>é‡å­è¿‘ä¼¼ä¼˜åŒ–ç®—æ³•ä¹Ÿå¤„ç†ç»„åˆä¼˜åŒ–é—®é¢˜ï¼Œä½†å…¶æ–¹å¼ä¸é‡å­é€€ç«ä¸åŒã€‚å®ƒå¹¶éé€æ¸æ¼”åŒ–åˆ°æœ€ä½èƒ½é‡çŠ¶æ€ï¼Œè€Œæ˜¯åœ¨ä¸¤ä¸ªç§°ä¸ºå“ˆå¯†é¡¿é‡çš„èƒ½é‡å‡½æ•°ä¹‹é—´äº¤æ›¿åˆ‡æ¢ã€‚</p>
<p>ä¸€ä¸ªä»£è¡¨é—®é¢˜çš„ç›®æ ‡å’Œçº¦æŸæ¡ä»¶ï¼Œå¦ä¸€ä¸ªåˆ™å¸®åŠ©ç³»ç»Ÿæ¢ç´¢æ–°çš„é…ç½®ã€‚é€šè¿‡åœ¨è¿™äº›é˜¶æ®µä¹‹é—´åˆ‡æ¢ï¼Œç®—æ³•ç¨³æ­¥ç§»å‘æ¥è¿‘æœ€ä¼˜çš„è§£ã€‚</p>
<p>QAOAåœ¨æ··åˆé‡å­-ç»å…¸ç³»ç»Ÿä¸Šè¿è¡Œï¼Œé‡å­è®¡ç®—æœºç”Ÿæˆå¯èƒ½çš„è§£ï¼Œè€Œç»å…¸è®¡ç®—æœºåœ¨æ¯æ¬¡è¿è¡Œåè°ƒæ•´å‚æ•°ã€‚è¿™ç§æ–¹æ³•ä½¿QAOAæˆä¸ºè°ƒåº¦ã€è·¯å¾„è§„åˆ’ä»¥åŠå›¾é—®é¢˜ï¼ˆå¦‚æœ€å¤§å‰²å’Œé¡¶ç‚¹è¦†ç›–ï¼‰ç­‰å¤šç§ä¼˜åŒ–ä»»åŠ¡çš„çµæ´»å·¥å…·ã€‚å°½ç®¡ç ”ç©¶ä»åœ¨è¿›è¡Œä¸­ï¼ŒQAOAè¢«å¹¿æ³›è§†ä¸ºç»“åˆç»å…¸ä¸é‡å­ä¼˜åŒ–å‰æ™¯å¹¿é˜”çš„ä¸€æ­¥ã€‚</p>
<ul>
<li><strong>å˜åˆ†é‡å­æœ¬å¾æ±‚è§£å™¨</strong></li>
</ul>
<p>å¦ä¸€ä¸ªé‡è¦çš„ç®—æ³•æ˜¯å˜åˆ†é‡å­æœ¬å¾æ±‚è§£å™¨ã€‚ä¸å¤„ç†æ¶‰åŠç¦»æ•£é€‰æ‹©çš„ç»„åˆä¼˜åŒ–é—®é¢˜çš„QAOAå’Œé‡å­é€€ç«ä¸åŒï¼ŒVQEä¸“æ³¨äºè¿ç»­ä¼˜åŒ–ï¼Œå…¶ä¸­å˜é‡å¯ä»¥å–ä¸€ä¸ªèŒƒå›´å†…çš„å€¼ï¼Œè€Œéå›ºå®šé€‰é¡¹ã€‚</p>
<p>å®ƒä¸»è¦ç”¨äºä¼°è®¡é‡å­ç³»ç»Ÿçš„åŸºæ€ï¼Œå³å¯èƒ½çš„æœ€ä½èƒ½é‡ã€‚è¿™ä½¿å¾—å®ƒåœ¨ç ”ç©¶ç‰©ç†å’ŒåŒ–å­¦ä¸­çš„åˆ†å­å’Œææ–™è¡Œä¸ºæ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚</p>
<p>VQEä¹Ÿé‡‡ç”¨æ··åˆæ–¹æ³•ï¼Œç»“åˆäº†é‡å­è®¡ç®—å’Œç»å…¸è®¡ç®—ã€‚é‡å­è®¡ç®—æœºå‡†å¤‡å’Œæµ‹è¯•å¯èƒ½çš„çŠ¶æ€ï¼Œè€Œç»å…¸è®¡ç®—æœºåˆ†æç»“æœå¹¶è°ƒæ•´å‚æ•°ä»¥æé«˜å‡†ç¡®æ€§ã€‚</p>
<p>ç”±äºå®ƒéœ€è¦æ›´å°‘çš„é‡å­æ¯”ç‰¹å’Œæ›´ç®€å•çš„ç”µè·¯ï¼ŒVQEåœ¨å½“å‰å«å™ªå£°ä¸­ç­‰è§„æ¨¡é‡å­è®¾å¤‡ä¸Šè¡¨ç°è‰¯å¥½ã€‚è¿™æ˜¯å½“å‰ä¸€ä»£çš„é‡å­è®¡ç®—æœºï¼Œè™½ç„¶é‡å­æ¯”ç‰¹æ•°é‡æœ‰é™ä¸”å—å™ªå£°å½±å“ï¼Œä½†ä»è¶³å¤Ÿå¼ºå¤§ï¼Œå¯ç”¨äºç ”ç©¶å’Œæ—©æœŸå®é™…å®éªŒã€‚</p>
<p>VQEå·²æˆä¸ºé‡å­åŒ–å­¦ã€ææ–™ç§‘å­¦å’Œè¿‡ç¨‹ä¼˜åŒ–ä¸­çš„é‡è¦å·¥å…·ã€‚å®ƒå¸®åŠ©ç ”ç©¶äººå‘˜å»ºæ¨¡åˆ†å­ã€ç ”ç©¶ååº”å¹¶æ‰¾åˆ°ç¨³å®šæ„å‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6cb3a72029141e8821e89796dccfed0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766023180&amp;x-signature=szPt6tTDRDqXe7%2FoUsQAZdtLaxs%3D" alt="screenshot_2025-12-10_15-15-06.png" loading="lazy"/></p>
<ul>
<li><strong>é‡å­åŠå®šè§„åˆ’</strong></li>
</ul>
<p>åŠå®šè§„åˆ’æ˜¯ä¸€ç§æ•°å­¦æ–¹æ³•ï¼Œç”¨äºè§£å†³åŒ…å«å˜é‡é—´çº¿æ€§å…³ç³»çš„ä¼˜åŒ–é—®é¢˜ã€‚å½“ç›®æ ‡æ˜¯åœ¨ä¿æŒæŸäº›æ¡ä»¶åœ¨æœ‰æ•ˆèŒƒå›´å†…çš„åŒæ—¶æ‰¾åˆ°æœ€ä½³å¯èƒ½ç»“æœæ—¶ï¼Œé€šå¸¸ä¼šåº”ç”¨å®ƒã€‚</p>
<p>é‡å­SDPç®—æ³•æ—¨åœ¨åŠ å¿«è¿™äº›è®¡ç®—é€Ÿåº¦ï¼Œå°¤å…¶æ˜¯åœ¨æ•°æ®æ¶‰åŠè®¸å¤šå˜é‡æˆ–å¤æ‚é«˜ç»´ç©ºé—´æ—¶ã€‚å®ƒä»¬åˆ©ç”¨é‡å­è®¡ç®—åŸç†åŒæ—¶åˆ†æå¤šç§å¯èƒ½æ€§ï¼Œè¿™å¯ä»¥ä½¿è§£å†³å¤§è§„æ¨¡é—®é¢˜æ›´é«˜æ•ˆã€‚</p>
<p>è¿™äº›ç®—æ³•æ­£åœ¨æœºå™¨å­¦ä¹ ã€ä¿¡å·å¤„ç†å’Œæ§åˆ¶ç³»ç»Ÿç­‰é¢†åŸŸè¿›è¡Œæ¢ç´¢ï¼Œå¯èƒ½æœ‰åŠ©äºæ¨¡å‹è¯†åˆ«æ¨¡å¼ã€æ”¹è¿›é¢„æµ‹æˆ–ç®¡ç†å¤æ‚ç³»ç»Ÿã€‚å°½ç®¡ç ”ç©¶ä»åœ¨è¿›è¡Œä¸­ï¼Œé‡å­SDPæ˜¾ç¤ºå‡ºåŠ é€Ÿç»å…¸è®¡ç®—æœºéš¾ä»¥åº”å¯¹çš„å…ˆè¿›ä¼˜åŒ–ä»»åŠ¡çš„æ½œåŠ›ã€‚</p>
<h2 data-id="heading-5"><strong>é‡å­ä¼˜åŒ–åœ¨äººå·¥æ™ºèƒ½ä¸­çš„åº”ç”¨</strong></h2>
<p>å°½ç®¡é‡å­ä¼˜åŒ–æ˜¯ä¸€ä¸ªæ´»è·ƒçš„ç ”ç©¶é¢†åŸŸï¼Œä½†å®ƒä¹Ÿå¼€å§‹åœ¨äººå·¥æ™ºèƒ½å’Œæœºå™¨å­¦ä¹ ç­‰é¢†åŸŸæ‰¾åˆ°å®é™…åº”ç”¨ã€‚ç ”ç©¶äººå‘˜æ­£åœ¨æ¢ç´¢é‡å­æ–¹æ³•å¦‚ä½•å¸®åŠ©æ›´é«˜æ•ˆåœ°è§£å†³å¤æ‚é—®é¢˜ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ›´è¯¦ç»†åœ°æ¢è®¨ä¸€äº›æ–°å…´çš„ç¤ºä¾‹å’Œç”¨ä¾‹ï¼Œè¿™äº›çªå‡ºäº†å®ƒåœ¨ç°å®åœºæ™¯ä¸­çš„æ½œåŠ›ã€‚</p>
<ul>
<li><strong>åŠ é€Ÿæœºå™¨å­¦ä¹ æ¨¡å‹è°ƒä¼˜</strong></li>
</ul>
<p>é‡å­ä¼˜åŒ–æ­£è¢«æ¢ç´¢ç”¨äºæ”¹è¿›æœºå™¨å­¦ä¹ æ¨¡å‹çš„è°ƒä¼˜ï¼Œç‰¹åˆ«æ˜¯åœ¨è¶…å‚æ•°ä¼˜åŒ–å’Œç‰¹å¾é€‰æ‹©æ–¹é¢ã€‚ä¸­æ€§åŸå­å¤„ç†å™¨çš„æœ€æ–°è¿›å±•ä¹Ÿæ­£åœ¨æ‰©å¤§é‡å­ä¼˜åŒ–åœ¨AIå’Œæœºå™¨å­¦ä¹ ä¸­çš„å®éªŒèŒƒå›´ã€‚</p>
<p>è¿™äº›å¤„ç†å™¨åˆ©ç”¨è¢«æ¿€å…‰å›ºå®šä½çš„å•ä¸ªåŸå­ä½œä¸ºé‡å­æ¯”ç‰¹ã€‚è¿™ä½¿å¾—ç ”ç©¶äººå‘˜èƒ½å¤Ÿæ„å»ºå¯æ‰©å±•ä¸”ç¨³å®šçš„é‡å­ç³»ç»Ÿæ¥æµ‹è¯•å¤æ‚ç®—æ³•ã€‚</p>
<ul>
<li><strong>è¡Œä¸šåº”ç”¨ä¸ç ”ç©¶äº®ç‚¹</strong></li>
</ul>
<p>é¢†å…ˆçš„ç§‘æŠ€å…¬å¸å·²ç»åœ¨è¯•éªŒè¿™äº›æƒ³æ³•ã€‚ä¾‹å¦‚ï¼Œè°·æ­Œçš„ç ”ç©¶å›¢é˜Ÿæœ€è¿‘å±•ç¤ºäº†ç”Ÿæˆå¼é‡å­ä¼˜åŠ¿ï¼Œå…¶ä¸­ä¸€ä¸ª68é‡å­æ¯”ç‰¹çš„å¤„ç†å™¨å­¦ä¼šäº†ç”Ÿæˆå¤æ‚çš„åˆ†å¸ƒï¼Œæš—ç¤ºäº†å…¶åœ¨è®­ç»ƒç”Ÿæˆæ¨¡å‹ä¸­çš„åº”ç”¨ã€‚</p>
<p>åŒæ ·ï¼Œè‹±ä¼Ÿè¾¾æ­£é€šè¿‡å°†é‡å­ç ”ç©¶æ•´åˆåˆ°å…¶è¶…çº§è®¡ç®—å’ŒGPUç”Ÿæ€ç³»ç»Ÿä¸­ï¼Œåœ¨é‡å­ä¸AIä¹‹é—´æ¶èµ·æ¡¥æ¢ã€‚ä¾‹å¦‚ï¼Œå®ƒæ¨å‡ºäº†åŠ é€Ÿé‡å­ç ”ç©¶ä¸­å¿ƒï¼Œä»¥å°†é‡å­ç¡¬ä»¶ä¸AIç³»ç»Ÿç»“åˆã€‚</p>
<p>æ­¤å¤–ï¼Œäºšé©¬é€Šäº‘ç§‘æŠ€åœ¨ Amazon Braket ä¸Šå¼€å‘äº†ä¸€ç§æ··åˆé‡å­-ç»å…¸å·¥ä½œæµï¼Œä½¿ç”¨é‡å­ç”µè·¯ä¸ç»å…¸ä¼˜åŒ–ç»“åˆæ¥å¾®è°ƒå›¾åƒåˆ†ç±»ä»»åŠ¡çš„å‚æ•°ã€‚</p>
<ul>
<li><strong>ç‰©æµã€è°ƒåº¦å’Œè·¯å¾„è§„åˆ’ä¸­çš„ä¼˜åŒ–</strong></li>
</ul>
<p>é‡å­ä¼˜åŒ–æœ€å®ç”¨çš„é¢†åŸŸä¹‹ä¸€æ˜¯ç‰©æµå’Œè°ƒåº¦ã€‚è¿™äº›ä»»åŠ¡åŒ…æ‹¬è·¯çº¿è§„åˆ’ã€è½¦è¾†åˆ†é…å’Œèµ„æºåˆ†é…ã€‚</p>
<p>ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­æ˜¯èƒ½æºç”µç½‘è°ƒåº¦ï¼Œè¿è¥å•†å¿…é¡»åœ¨å®æ—¶å¹³è¡¡ç”µåŠ›ä¾›éœ€çš„åŒæ—¶é™ä½æˆæœ¬å¹¶ä¿æŒå¯é æ€§ã€‚ç ”ç©¶äººå‘˜å·²ä½¿ç”¨é‡å­ä¼˜åŒ–å°†è¿™ä¸€è°ƒåº¦æŒ‘æˆ˜è¡¨ç¤ºä¸ºèƒ½é‡æ™¯è§‚æˆ–å“ˆå¯†é¡¿é‡ã€‚</p>
<p>åœ¨è¿™é‡Œï¼Œç›®æ ‡æ˜¯æ‰¾åˆ°ä»£è¡¨æœ€æœ‰æ•ˆé…ç½®çš„æœ€ä½èƒ½é‡çŠ¶æ€ã€‚ä¾‹å¦‚ï¼ŒD-Wave çš„é‡å­æ±‚è§£å™¨å·²é’ˆå¯¹æ­¤ç±»é—®é¢˜è¿›è¡Œæµ‹è¯•ï¼Œä¸ä¼ ç»Ÿä¼˜åŒ–æ–¹æ³•ç›¸æ¯”ï¼Œæ˜¾ç¤ºå‡ºæ›´å¿«ã€æ›´çµæ´»çš„ç»“æœã€‚</p>
<p>ç±»ä¼¼çš„æ€è·¯æ­£åœ¨æŠ•èµ„ç»„åˆç®¡ç†å’Œä¾›åº”é“¾è§„åˆ’ç­‰é¢†åŸŸè¿›è¡Œç ”ç©¶ã€‚éšç€ç¡¬ä»¶çš„æ”¹è¿›ï¼Œè¿™äº›æ–¹æ³•å¯èƒ½ä¼šæ”¹å˜AIç³»ç»Ÿåœ¨ç°å®ä¸–ç•Œçº¦æŸä¸‹è¿›è¡Œè§„åˆ’å’Œå†³ç­–çš„æ–¹å¼ã€‚</p>
<ul>
<li><strong>è¯ç‰©å‘ç°å’Œææ–™è®¾è®¡ä¸­çš„AIä¸é‡å­è®¡ç®—</strong></li>
</ul>
<p>é‡å­ä¼˜åŒ–åœ¨ç†è§£å¤æ‚åˆ†å­ç›¸äº’ä½œç”¨å’Œèƒ½é‡æ™¯è§‚è‡³å…³é‡è¦çš„é¢†åŸŸä¹Ÿè¶Šæ¥è¶Šå—åˆ°å…³æ³¨ã€‚ä¾‹å¦‚ï¼Œåœ¨è¯ç‰©å‘ç°å’Œææ–™ç§‘å­¦ä¸­ï¼Œå¯»æ‰¾æœ€ç¨³å®šçš„åˆ†å­ç»“æ„æˆ–æ„å‹å°±æ˜¯ä¸€ä¸ªä¼˜åŒ–æŒ‘æˆ˜ã€‚</p>
<p>æ··åˆé‡å­ç®—æ³•ï¼Œå¦‚VQEï¼Œæ­£è¢«ç”¨äºåŠ é€Ÿè›‹ç™½è´¨ç»“æ„é¢„æµ‹å’Œåˆ†å­æ„è±¡æœç´¢ç­‰è¿‡ç¨‹ã€‚ç ”ç©¶äººå‘˜è¿˜åœ¨æ¢ç´¢ç»“åˆé‡å­è®¡ç®—å’Œäººå·¥æ™ºèƒ½çš„æ–¹æ³•ï¼Œä»¥æ”¹è¿›æ¨¡å‹å¦‚ä½•ä»æ•°æ®ä¸­å­¦ä¹ å’Œæå–ç‰¹å¾ã€‚</p>
<p>éšç€é‡å­ç¡¬ä»¶æŒç»­è¿›æ­¥ï¼Œè¿™äº›ç»“åˆçš„æ–¹æ³•å¯èƒ½ä¼šåœ¨åŒ–å­¦ã€ç”Ÿç‰©å­¦å’Œææ–™ç ”ç©¶é¢†åŸŸå¸¦æ¥é‡å¤§çªç ´ï¼Œå®ç°æ›´å¿«çš„å‘ç°å’Œåœ¨åˆ†å­å±‚é¢ä¸Šæ›´ç²¾ç¡®çš„æ¨¡æ‹Ÿã€‚</p>
<h2 data-id="heading-6"><strong>é‡å­ä¼˜åŒ–çš„ä¼˜ç¼ºç‚¹</strong></h2>
<p>ä»¥ä¸‹æ˜¯ä½¿ç”¨é‡å­ä¼˜åŒ–çš„ä¸€äº›ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>é‡å­å¯å‘å¼ç®—æ³•ï¼š</strong> å³ä½¿åœ¨å¤§å‹é‡å­è®¡ç®—æœºå¯ç”¨ä¹‹å‰ï¼Œç ”ç©¶äººå‘˜å°±å·²ç»åœ¨ç»å…¸ç³»ç»Ÿä¸Šä½¿ç”¨é‡å­å¯å‘å¼ä¼˜åŒ–æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•é€šè¿‡æ¨¡æ‹Ÿé‡å­ç­–ç•¥ï¼Œå¯ä»¥ä¸ºç‰¹å®šç±»å‹çš„é—®é¢˜æä¾›æ›´å¿«çš„æ€§èƒ½ã€‚</li>
<li><strong>æ”¹è¿›çš„ç¡¬ä»¶å’Œæ··åˆæ±‚è§£å™¨ï¼š</strong> æ–°å‹é‡å­å¤„ç†å™¨å’ŒåŸºäºäº‘çš„æ··åˆæ±‚è§£å™¨çš„å‘å±•ï¼Œä½¿å¾—ç»“åˆé‡å­å’Œç»å…¸è®¡ç®—æˆä¸ºå¯èƒ½ã€‚è¿™ä½¿å¾—å³ä½¿åœ¨å½“å‰æ—©æœŸç¡¬ä»¶é˜¶æ®µï¼Œä¹Ÿèƒ½è¿›è¡Œå®é™…æµ‹è¯•å’Œå®éªŒã€‚</li>
<li><strong>åˆä½œç ”ç©¶è¿›å±•ï¼š</strong> IBM Quantumã€QiskitÂ å’Œå…¶ä»–å¼€æ”¾ç ”ç©¶ç¤¾åŒºæ­£åœ¨ç§¯æå¼€å‘ç®—æ³•ã€å·¥å…·åŒ…å’Œæ•™è‚²èµ„æºï¼Œä½¿é‡å­ä¼˜åŒ–æ›´æ˜“äºä½¿ç”¨ã€‚</li>
</ul>
<p>å°½ç®¡é‡å­ç ”ç©¶è¿›å±•è¿…é€Ÿï¼Œä½†ä»å­˜åœ¨æŸäº›æŒ‘æˆ˜é˜»ç¢å¤§è§„æ¨¡é‡‡ç”¨ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…³é”®é™åˆ¶å› ç´ ï¼š</p>
<ul>
<li><strong>ç¡¬ä»¶é™åˆ¶ï¼š</strong> å½“å‰çš„é‡å­è®¡ç®—æœºé‡å­æ¯”ç‰¹æ•°é‡æœ‰é™ï¼Œå¹¶ä¸”å¯¹å™ªå£°ã€é€€ç›¸å¹²å’Œæ“ä½œé”™è¯¯é«˜åº¦æ•æ„Ÿã€‚è¿™äº›å› ç´ é™ä½äº†ç»“æœçš„å‡†ç¡®æ€§å’Œå¯é æ€§ï¼Œä½¿å¾—éš¾ä»¥æ‰©å±•ç³»ç»Ÿä»¥åº”å¯¹å¤æ‚çš„ä¼˜åŒ–ä»»åŠ¡ã€‚</li>
<li><strong>ç»å…¸æ¨¡æ‹Ÿé™åˆ¶ï¼š</strong> åœ¨ç»å…¸è®¡ç®—æœºä¸Šæ¨¡æ‹Ÿå¤§å‹é‡å­ç³»ç»Ÿéœ€æ±‚å·¨å¤§ï¼Œå› ä¸ºæ‰€éœ€çš„è®¡ç®—èµ„æºéšç€é‡å­æ¯”ç‰¹æ•°é‡å‘ˆæŒ‡æ•°å¢é•¿ã€‚è¿™ä½¿å¾—æµ‹è¯•å’ŒéªŒè¯å¤§è§„æ¨¡é‡å­ç®—æ³•å…·æœ‰æŒ‘æˆ˜æ€§ã€‚</li>
<li><strong>ç¼ºä¹åŸºå‡†æµ‹è¯•æ ‡å‡†ï¼š</strong> é‡å­ä¼˜åŒ–ç ”ç©¶ä»ç„¶ç¼ºä¹ä¸€è‡´çš„åŸºå‡†æ¥æ¯”è¾ƒç®—æ³•å’Œç¡¬ä»¶æ€§èƒ½ã€‚å°½ç®¡æ­£åœ¨åŠªåŠ›åˆ›å»ºæ ‡å‡†åŒ–çš„è¯„ä¼°æ–¹æ³•ï¼Œä½†å°šæœªå½¢æˆè¡¡é‡å®é™…æ€§èƒ½æ”¹è¿›çš„é€šç”¨æ¡†æ¶ã€‚</li>
</ul>
<h2 data-id="heading-7"><strong>å…³é”®è¦ç‚¹</strong></h2>
<p>é‡å­ä¼˜åŒ–æ­£åœ¨é‡å¡‘æˆ‘ä»¬åœ¨äººå·¥æ™ºèƒ½ã€ç§‘å­¦å’Œå·¥ä¸šä¸­æ€è€ƒé—®é¢˜è§£å†³çš„æ–¹å¼ã€‚é€šè¿‡å°†é‡å­è®¡ç®—çš„åŠ›é‡ä¸ç»å…¸æ–¹æ³•ç›¸ç»“åˆï¼Œç ”ç©¶äººå‘˜æ­£åœ¨å¯»æ‰¾åº”å¯¹å¤æ‚æ€§å’ŒåŠ é€Ÿå‘ç°çš„æ–°é€”å¾„ã€‚éšç€ç¡¬ä»¶çš„æ”¹è¿›å’Œç®—æ³•çš„æˆç†Ÿï¼Œé‡å­ä¼˜åŒ–å¯èƒ½æˆä¸ºä¸‹ä¸€ä»£æ™ºèƒ½æŠ€æœ¯çš„å…³é”®é©±åŠ¨åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring Boot å®ç°å•è´¦å·ç™»å½•æ§åˆ¶]]></title>    <link>https://juejin.cn/post/7582077175001366571</link>    <guid>https://juejin.cn/post/7582077175001366571</guid>    <pubDate>2025-12-11T00:04:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582077175001366571" data-draft-id="7582067084839796790" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring Boot å®ç°å•è´¦å·ç™»å½•æ§åˆ¶"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-11T00:04:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£è±¡å—"/> <meta itemprop="url" content="https://juejin.cn/user/2524134428655159"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring Boot å®ç°å•è´¦å·ç™»å½•æ§åˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2524134428655159/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£è±¡å—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T00:04:50.000Z" title="Thu Dec 11 2025 00:04:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¾ˆå¤šä¸šåŠ¡åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ§åˆ¶å•ä¸ªè´¦å·çš„ç™»å½•æ•°é‡ã€‚æœ¬æ–‡ä»‹ç»ä¸€ç§è½»é‡çº§å®ç°æ–¹æ¡ˆï¼Œçµæ´»æ”¯æŒå•è´¦å·å•ç™»å½•å’Œå¤šç™»å½•ä¸¤ç§æ¨¡å¼ã€‚</p>
<p><strong>ä»˜è´¹ç³»ç»Ÿåœºæ™¯</strong>ï¼šæŸåœ¨çº¿æ•™è‚²å¹³å°é”€å”®VIPä¼šå‘˜è´¦å·ï¼Œå¦‚æœä¸é™åˆ¶ç™»å½•æ•°é‡ï¼Œä¸€ä¸ªè´¦å·å¯èƒ½è¢«å¤šä¸ªç”¨æˆ·å…±äº«ï¼Œå¯¼è‡´æ”¶å…¥æŸå¤±ã€‚å¹³å°éœ€è¦ç¡®ä¿ä¸€ä¸ªä»˜è´¹è´¦å·åªèƒ½æœ‰ä¸€ä¸ªç”¨æˆ·åŒæ—¶åœ¨çº¿ã€‚</p>
<p><strong>ä¼ä¸šåŠå…¬ç³»ç»Ÿ</strong>ï¼šä¸ºäº†ä¿è¯æ•°æ®å®‰å…¨ï¼Œä¼ä¸šOAç³»ç»Ÿé€šå¸¸è¦æ±‚å‘˜å·¥è´¦å·åªèƒ½åœ¨æŒ‡å®šè®¾å¤‡ä¸Šç™»å½•ã€‚å½“å‘˜å·¥åœ¨æ–°è®¾å¤‡ç™»å½•æ—¶ï¼Œéœ€è¦è‡ªåŠ¨è¸¢å‡ºå…¶ä»–è®¾å¤‡ä¸Šçš„ä¼šè¯ï¼Œé˜²æ­¢è´¦å·è¢«æ»¥ç”¨ã€‚</p>
<h4 data-id="heading-0">ä¼ ç»Ÿæ–¹æ¡ˆçš„ç—›ç‚¹</h4>
<p>ä¼ ç»Ÿçš„è´¦å·ç™»å½•æ§åˆ¶æ–¹æ¡ˆå­˜åœ¨å„ç§é—®é¢˜ï¼š</p>
<p><strong>Sessionæ–¹æ¡ˆçš„å±€é™</strong>ï¼šä½¿ç”¨HttpSessionå®ç°è™½ç„¶ç®€å•ï¼Œä½†åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ä¼šé¢ä¸´Sessionå…±äº«çš„éš¾é¢˜ã€‚å¼•å…¥Spring Sessionè™½ç„¶å¯ä»¥è§£å†³é—®é¢˜ï¼Œä½†å¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦å’Œä¾èµ–ï¼Œå¯¹äºç®€å•çš„éœ€æ±‚æ¥è¯´æœ‰äº›"æ€é¸¡ç”¨ç‰›åˆ€"ã€‚</p>
<p><strong>Spring Securityçš„å¤æ‚æ€§</strong>ï¼šSpring Securityæä¾›äº†å¼ºå¤§çš„å®‰å…¨æ¡†æ¶ï¼Œä½†å¯¹äºä»…ä»…éœ€è¦ç™»å½•æ§åˆ¶çš„éœ€æ±‚æ¥è¯´ï¼Œå­¦ä¹ æˆæœ¬è¿‡é«˜ï¼Œé…ç½®å¤æ‚ï¼Œè€Œä¸”å¼•å…¥äº†å¾ˆå¤šä¸å¿…è¦çš„åŠŸèƒ½ã€‚</p>
<p><strong>æ•°æ®åº“å­˜å‚¨çš„æ€§èƒ½é—®é¢˜</strong>ï¼šå°†ç™»å½•çŠ¶æ€å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ä¼šå¯¼è‡´æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦æŸ¥è¯¢æ•°æ®åº“ï¼Œåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ä¼šæˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚è™½ç„¶å¯ä»¥é€šè¿‡ç¼“å­˜ä¼˜åŒ–ï¼Œä½†åˆå¢åŠ äº†ç³»ç»Ÿå¤æ‚åº¦ã€‚</p>
<p><strong>å‰ç«¯çŠ¶æ€ç®¡ç†çš„éº»çƒ¦</strong>ï¼šä¼ ç»Ÿçš„é¡µé¢è·³è½¬æ–¹å¼å·²ç»ä¸é€‚åº”ç°ä»£å‰ç«¯æ¡†æ¶çš„éœ€æ±‚ã€‚å‰åç«¯åˆ†ç¦»æ¶æ„éœ€è¦ç»Ÿä¸€çš„APIæ¥å£å’ŒçŠ¶æ€ç®¡ç†æœºåˆ¶ã€‚</p>
<h2 data-id="heading-1">äºŒã€æ–¹æ¡ˆæ¦‚è¿°</h2>
<h4 data-id="heading-2">2.1 æ ¸å¿ƒæ€è·¯</h4>
<p>æœ¬æ–‡æå‡ºçš„æ–¹æ¡ˆåŸºäºä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒç†å¿µï¼š</p>
<p><strong>Tokenè®¤è¯</strong>ï¼šä½¿ç”¨è‡ªå®šä¹‰Tokenæ›¿ä»£ä¼ ç»Ÿçš„Sessionæœºåˆ¶ã€‚Tokenæ˜¯æ— çŠ¶æ€çš„ï¼Œå¯ä»¥åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹è½»æ¾æ‰©å±•ï¼ŒåŒæ—¶é¿å…äº†Sessionå…±äº«çš„å¤æ‚æ€§é—®é¢˜ã€‚</p>
<p><strong>æ‹¦æˆªå™¨éªŒè¯</strong>ï¼šé€šè¿‡Spring MVCçš„æ‹¦æˆªå™¨æœºåˆ¶ç»Ÿä¸€å¤„ç†ç™»å½•éªŒè¯ã€‚è¿™ç§æ–¹å¼çš„ä¼˜ç‚¹æ˜¯ä¸éœ€è¦ä¿®æ”¹ä¸šåŠ¡ä»£ç ï¼Œé€šè¿‡é…ç½®å³å¯å®ç°å¯¹æ‰€æœ‰è¯·æ±‚çš„æ‹¦æˆªã€‚</p>
<p><strong>æ¥å£æŠ½è±¡</strong>ï¼šå®šä¹‰æ¸…æ™°çš„SessionManageræ¥å£ï¼Œå°†å­˜å‚¨é€»è¾‘ä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»ã€‚è¿™æ ·æ—¢å¯ä»¥ä½¿ç”¨Mapå®ç°ï¼Œä¹Ÿå¯ä»¥è½»æ¾åˆ‡æ¢åˆ°Redisï¼Œä¸ºç³»ç»Ÿæ‰©å±•æä¾›å¯èƒ½ã€‚</p>
<p><strong>æ¨¡å¼åˆ‡æ¢</strong>ï¼šé€šè¿‡ç®€å•çš„é…ç½®é¡¹å³å¯åœ¨"å•ç™»å½•"å’Œ"å¤šç™»å½•"æ¨¡å¼ä¹‹é—´åˆ‡æ¢ï¼Œæ»¡è¶³ä¸åŒä¸šåŠ¡åœºæ™¯çš„éœ€æ±‚ã€‚</p>
<h4 data-id="heading-3">2.2 æŠ€æœ¯é€‰å‹</h4>
<p><strong>æ ¸å¿ƒä¾èµ–</strong></p>
<p>ä»…ä½¿ç”¨Spring Boot Web Starterï¼Œä¸å¼•å…¥ä»»ä½•é¢å¤–çš„å®‰å…¨æ¡†æ¶æˆ–ä¸­é—´ä»¶ã€‚</p>
<p><strong>å­˜å‚¨æ–¹æ¡ˆ</strong></p>
<p>å•æœºéƒ¨ç½²ï¼šä½¿ç”¨ConcurrentHashMap
åˆ†å¸ƒå¼éƒ¨ç½²ï¼šé€šè¿‡æ¥å£æŠ½è±¡æ— ç¼åˆ‡æ¢åˆ°Redis</p>
<h2 data-id="heading-4">ä¸‰ã€æ ¸å¿ƒå®ç°</h2>
<h4 data-id="heading-5">3.1 ä¼šè¯ç®¡ç†æ¥å£</h4>
<p>SessionManageræ¥å£æ˜¯æ•´ä¸ªæ–¹æ¡ˆçš„æ ¸å¿ƒï¼Œå®ƒå®šä¹‰äº†ä¼šè¯ç®¡ç†çš„æ‰€æœ‰åŸºæœ¬æ“ä½œï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">SessionManager</span> {
    <span class="hljs-comment">// ç™»å½•ï¼šç”Ÿæˆå¹¶è¿”å›Token</span>
    String <span class="hljs-title function_">login</span><span class="hljs-params">(String username, LoginInfo loginInfo)</span>;

    <span class="hljs-comment">// ç™»å‡ºï¼šä½¿æŒ‡å®šTokenå¤±æ•ˆ</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">logout</span><span class="hljs-params">(String token)</span>;

    <span class="hljs-comment">// éªŒè¯ï¼šæ£€æŸ¥Tokenæ˜¯å¦æœ‰æ•ˆ</span>
    TokenInfo <span class="hljs-title function_">validateToken</span><span class="hljs-params">(String token)</span>;

    <span class="hljs-comment">// æŸ¥è¯¢ï¼šè·å–ç”¨æˆ·çš„æ‰€æœ‰æ´»è·ƒToken</span>
    List <span class="hljs-title function_">getUserTokens</span><span class="hljs-params">(String username)</span>;

    <span class="hljs-comment">// ç®¡ç†ï¼šå¼ºåˆ¶ç”¨æˆ·ä¸‹çº¿</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">kickoutUser</span><span class="hljs-params">(String username)</span>;
}
</code></pre>
<h4 data-id="heading-6">3.2 Mapå®ç°æ–¹æ¡ˆ</h4>
<p>MapSessionManageræ˜¯åŸºäºConcurrentHashMapçš„å…·ä½“å®ç°ï¼Œå®ƒä½¿ç”¨ä¸¤ä¸ªMapæ¥ç®¡ç†ä¼šè¯çŠ¶æ€ï¼š</p>
<p><strong>tokenMap</strong>ï¼šå­˜å‚¨Tokenåˆ°TokenInfoçš„æ˜ å°„ï¼Œç”¨äºå¿«é€ŸéªŒè¯Tokençš„æœ‰æ•ˆæ€§ã€‚TokenInfoåŒ…å«ç”¨æˆ·åã€ç™»å½•æ—¶é—´ã€è¿‡æœŸæ—¶é—´ç­‰å…³é”®ä¿¡æ¯ã€‚</p>
<p><strong>userTokenMap</strong>ï¼šå­˜å‚¨ç”¨æˆ·ååˆ°Tokené›†åˆçš„æ˜ å°„ï¼Œç”¨äºç®¡ç†ç”¨æˆ·çš„æ‰€æœ‰ä¼šè¯ã€‚è¿™æ ·è®¾è®¡çš„å¥½å¤„æ˜¯ï¼Œå½“éœ€è¦è¸¢å‡ºç”¨æˆ·æ—¶ï¼Œå¯ä»¥å¿«é€Ÿæ‰¾åˆ°è¯¥ç”¨æˆ·çš„æ‰€æœ‰Tokenå¹¶ä½¿å…¶å¤±æ•ˆã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MapSessionManager</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">SessionManager</span> {
    <span class="hljs-comment">// Token -&gt; TokenInfo çš„æ˜ å°„ï¼Œç”¨äºéªŒè¯</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Map</span> <span class="hljs-variable">tokenMap</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();

    <span class="hljs-comment">// Username -&gt; Tokené›†åˆçš„æ˜ å°„ï¼Œç”¨äºç®¡ç†</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&gt; userTokenMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">login</span><span class="hljs-params">(String username, LoginInfo loginInfo)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> generateToken();
        <span class="hljs-type">TokenInfo</span> <span class="hljs-variable">tokenInfo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TokenInfo</span>(token, username, loginInfo,
            System.currentTimeMillis() + properties.getTokenExpireTime() * <span class="hljs-number">1000</span>);

        <span class="hljs-comment">// å•ç™»å½•æ¨¡å¼ï¼šå…ˆè¸¢å‡ºæ—§ä¼šè¯</span>
        <span class="hljs-keyword">if</span> (properties.getMode() == LoginMode.SINGLE) {
            kickoutUser(username);
        }

        <span class="hljs-comment">// å­˜å‚¨æ–°Token</span>
        tokenMap.put(token, tokenInfo);
        userTokenMap.computeIfAbsent(username, k -&gt; ConcurrentHashMap.newKeySet())
                   .add(token);

        <span class="hljs-keyword">return</span> token;
    }
}
</code></pre>
<h4 data-id="heading-7">3.3 æ‹¦æˆªå™¨è®¾è®¡</h4>
<p>LoginInterceptorè´Ÿè´£æ‹¦æˆªæ‰€æœ‰éœ€è¦è®¤è¯çš„è¯·æ±‚ï¼ŒéªŒè¯Tokençš„æœ‰æ•ˆæ€§ã€‚å®ƒçš„è®¾è®¡è¦ç‚¹åŒ…æ‹¬ï¼š</p>
<p><strong>è·¯å¾„æ’é™¤</strong>ï¼šé™æ€èµ„æºã€ç™»å½•æ¥å£ç­‰ä¸éœ€è¦è®¤è¯çš„è·¯å¾„éœ€è¦è¢«æ’é™¤ã€‚</p>
<p><strong>Tokenæå–</strong>ï¼šä»HTTPè¯·æ±‚å¤´ä¸­æå–Tokenï¼Œæ”¯æŒè‡ªå®šä¹‰Headeråç§°ã€‚</p>
<p><strong>éªŒè¯é€»è¾‘</strong>ï¼šè°ƒç”¨SessionManageréªŒè¯Tokenï¼Œå°†éªŒè¯ç»“æœå­˜å…¥è¯·æ±‚å±æ€§ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerInterceptor</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> SessionManager sessionManager;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preHandle</span><span class="hljs-params">(HttpServletRequest request,
                           HttpServletResponse response,
                           Object handler)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> getTokenFromRequest(request);
        <span class="hljs-keyword">if</span> (token == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> handleUnauthorized(response, &amp;#<span class="hljs-number">34</span>;è¯·å…ˆç™»å½•&amp;#<span class="hljs-number">34</span>;);
        }

        <span class="hljs-type">TokenInfo</span> <span class="hljs-variable">tokenInfo</span> <span class="hljs-operator">=</span> sessionManager.validateToken(token);
        <span class="hljs-keyword">if</span> (tokenInfo == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> handleUnauthorized(response, &amp;#<span class="hljs-number">34</span>;ç™»å½•å·²è¿‡æœŸ&amp;#<span class="hljs-number">34</span>;);
        }

        <span class="hljs-comment">// å°†ç”¨æˆ·ä¿¡æ¯å­˜å…¥è¯·æ±‚ä¸Šä¸‹æ–‡</span>
        request.setAttribute(&amp;#<span class="hljs-number">34</span>;username&amp;#<span class="hljs-number">34</span>;, tokenInfo.getUsername());
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
}
</code></pre>
<h4 data-id="heading-8">3.4 é…ç½®ç®¡ç†</h4>
<p>LoginPropertiesé›†ä¸­ç®¡ç†æ‰€æœ‰å¯é…ç½®çš„å‚æ•°ï¼Œé€šè¿‡Spring Bootçš„é…ç½®æœºåˆ¶ï¼Œå¯ä»¥åœ¨application.ymlä¸­çµæ´»è°ƒæ•´ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">app:</span>
  <span class="hljs-attr">login:</span>
    <span class="hljs-comment"># ç™»å½•æ¨¡å¼æ§åˆ¶</span>
    <span class="hljs-attr">mode:</span> <span class="hljs-string">MULTIPLE</span>  <span class="hljs-comment"># SINGLE-å•ç™»å½•, MULTIPLE-å¤šç™»å½•</span>

    <span class="hljs-comment"># Tokenç›¸å…³é…ç½®</span>
    <span class="hljs-attr">token-expire-time:</span> <span class="hljs-number">1800</span>  <span class="hljs-comment"># æœ‰æ•ˆæœŸ30åˆ†é’Ÿ</span>
    <span class="hljs-attr">token-header:</span> <span class="hljs-string">Authorization</span>  <span class="hljs-comment"># è¯·æ±‚å¤´åç§°</span>
    <span class="hljs-attr">token-prefix:</span> <span class="hljs-string">TOKEN_</span>  <span class="hljs-comment"># Tokenå‰ç¼€</span>

    <span class="hljs-comment"># ç»´æŠ¤é…ç½®</span>
    <span class="hljs-attr">enable-auto-clean:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment"># å¯ç”¨è‡ªåŠ¨æ¸…ç†</span>
    <span class="hljs-attr">clean-interval:</span> <span class="hljs-number">5</span>  <span class="hljs-comment"># æ¸…ç†é—´éš”ï¼ˆåˆ†é’Ÿï¼‰</span>
</code></pre>
<h2 data-id="heading-9">å››ã€APIæ¥å£è®¾è®¡</h2>
<h4 data-id="heading-10">4.1 æ¥å£å®šä¹‰</h4>
<p>ç³»ç»Ÿæä¾›äº†ä¸€å¥—RESTful APIæ¥å£ï¼Œæ”¯æŒå®Œæ•´çš„ç”¨æˆ·ä¼šè¯ç®¡ç†åŠŸèƒ½ï¼š</p>






















































<table><thead><tr><th>æ¥å£è·¯å¾„</th><th>è¯·æ±‚æ–¹æ³•</th><th>åŠŸèƒ½è¯´æ˜</th><th>è¯·æ±‚å‚æ•°</th><th>å“åº”æ•°æ®</th></tr></thead><tbody><tr><td>/api/auth/login</td><td>POST</td><td>ç”¨æˆ·ç™»å½•</td><td>username, password</td><td>Tokenä¿¡æ¯</td></tr><tr><td>/api/auth/logout</td><td>POST</td><td>ç”¨æˆ·é€€å‡º</td><td>æ— </td><td>æ“ä½œç»“æœ</td></tr><tr><td>/api/auth/current</td><td>GET</td><td>å½“å‰ç”¨æˆ·</td><td>æ— </td><td>ç”¨æˆ·ä¿¡æ¯</td></tr><tr><td>/api/auth/online</td><td>GET</td><td>åœ¨çº¿åˆ—è¡¨</td><td>æ— </td><td>ç”¨æˆ·ååˆ—è¡¨</td></tr><tr><td>/api/auth/tokens</td><td>GET</td><td>ç”¨æˆ·Tokens</td><td>username</td><td>Tokenåˆ—è¡¨</td></tr><tr><td>/api/auth/kickout</td><td>POST</td><td>è¸¢å‡ºç”¨æˆ·</td><td>username</td><td>æ“ä½œç»“æœ</td></tr></tbody></table>
<h4 data-id="heading-11">4.2 ç»Ÿä¸€å“åº”æ ¼å¼</h4>
<p>æ‰€æœ‰APIæ¥å£éƒ½éµå¾ªç»Ÿä¸€çš„å“åº”æ ¼å¼ï¼Œä¾¿äºå‰ç«¯å¤„ç†ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    &amp;#<span class="hljs-number">34</span>;code&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>        <span class="hljs-comment">// çŠ¶æ€ç </span>
    &amp;#<span class="hljs-number">34</span>;message&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;æˆåŠŸ&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>   <span class="hljs-comment">// æç¤ºä¿¡æ¯</span>
    &amp;#<span class="hljs-number">34</span>;data&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>          <span class="hljs-comment">// ä¸šåŠ¡æ•°æ®</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>çŠ¶æ€ç è§„èŒƒ</strong>ï¼š</p>
<ul>
<li>200ï¼šè¯·æ±‚æˆåŠŸ</li>
<li>401ï¼šæœªè®¤è¯æˆ–Tokenå¤±æ•ˆ</li>
<li>403ï¼šæƒé™ä¸è¶³</li>
<li>500ï¼šæœåŠ¡å™¨å†…éƒ¨é”™è¯¯</li>
</ul>
<h4 data-id="heading-12">4.3 ç™»å½•è®¤è¯æµç¨‹</h4>
<p>å®Œæ•´çš„ç™»å½•æµç¨‹åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<p><strong>1. ç”¨æˆ·æäº¤å‡­æ®</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable constant_">POST</span> /api/auth/login
<span class="hljs-title class_">Content</span>-<span class="hljs-title class_">Type</span>: application/json

{
    &amp;#<span class="hljs-number">34</span>;username&amp;#<span class="hljs-number">34</span>;: &amp;#<span class="hljs-number">34</span>;admin&amp;#<span class="hljs-number">34</span>;,
    &amp;#<span class="hljs-number">34</span>;password&amp;#<span class="hljs-number">34</span>;: &amp;#<span class="hljs-number">34</span>;admin123&amp;#<span class="hljs-number">34</span>;
}
</code></pre>
<p><strong>2. æœåŠ¡ç«¯éªŒè¯å¹¶ç”ŸæˆToken</strong>
æœåŠ¡ç«¯éªŒè¯ç”¨æˆ·åå¯†ç åï¼Œç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„Tokenï¼ŒåŒ…å«ï¼š</p>
<ul>
<li>Tokenå­—ç¬¦ä¸²ï¼ˆUUIDï¼‰</li>
<li>ç”¨æˆ·ä¿¡æ¯</li>
<li>ç™»å½•æ—¶é—´</li>
<li>è¿‡æœŸæ—¶é—´</li>
</ul>
<p><strong>3. è¿”å›Tokenç»™å®¢æˆ·ç«¯</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    &amp;#<span class="hljs-number">34</span>;code&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
    &amp;#<span class="hljs-number">34</span>;message&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;ç™»å½•æˆåŠŸ&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
    &amp;#<span class="hljs-number">34</span>;data&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        &amp;#<span class="hljs-number">34</span>;token&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;TOKEN_550e8400-e29b<span class="hljs-number">-41</span>d4-a716<span class="hljs-number">-446655440000</span>&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
        &amp;#<span class="hljs-number">34</span>;username&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;admin&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
        &amp;#<span class="hljs-number">34</span>;expireTime&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-number">1704067200000</span><span class="hljs-punctuation">,</span>
        &amp;#<span class="hljs-number">34</span>;loginMode&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;MULTIPLE&amp;#<span class="hljs-number">34</span>;
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>4. å®¢æˆ·ç«¯å­˜å‚¨Token</strong>
æ ¹æ®ç”¨æˆ·é€‰æ‹©ï¼ŒTokenå¯ä»¥å­˜å‚¨åœ¨localStorageï¼ˆé•¿æœŸæœ‰æ•ˆï¼‰æˆ–sessionStorageï¼ˆä¼šè¯çº§åˆ«ï¼‰ã€‚</p>
<p><strong>5. åç»­è¯·æ±‚æºå¸¦Token</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable constant_">GET</span> /api/auth/current
<span class="hljs-title class_">Authorization</span>: TOKEN_550e8400-e29b-41d4-a716-<span class="hljs-number">446655440000</span>
</code></pre>
<p><strong>6. æœåŠ¡ç«¯éªŒè¯Token</strong>
æ‹¦æˆªå™¨è‡ªåŠ¨éªŒè¯Tokençš„æœ‰æ•ˆæ€§ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>Tokenæ˜¯å¦å­˜åœ¨</li>
<li>Tokenæ˜¯å¦è¿‡æœŸ</li>
<li>Tokenæ˜¯å¦è¢«è¸¢å‡º</li>
</ul>
<h4 data-id="heading-13">4.4 é”™è¯¯å¤„ç†æœºåˆ¶</h4>
<p>å½“è®¤è¯å¤±è´¥æ—¶ï¼Œç³»ç»Ÿä¼šè¿”å›æ˜ç¡®çš„é”™è¯¯ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    &amp;#<span class="hljs-number">34</span>;code&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-number">401</span><span class="hljs-punctuation">,</span>
    &amp;#<span class="hljs-number">34</span>;message&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;Tokenå·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
    &amp;#<span class="hljs-number">34</span>;data&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å‰ç«¯æ”¶åˆ°401å“åº”åï¼Œä¼šè‡ªåŠ¨æ¸…é™¤æœ¬åœ°å­˜å‚¨çš„Tokenï¼Œå¹¶è·³è½¬åˆ°ç™»å½•é¡µé¢ã€‚</p>
<h4 data-id="heading-14">4.5 ç®¡ç†åŠŸèƒ½æ¥å£</h4>
<p>ç®¡ç†å‘˜å¯ä»¥é€šè¿‡ä¸“é—¨çš„æ¥å£ç®¡ç†ç³»ç»Ÿç”¨æˆ·ï¼š</p>
<p><strong>è·å–åœ¨çº¿ç”¨æˆ·</strong>ï¼šè¿”å›å½“å‰æ‰€æœ‰åœ¨çº¿ç”¨æˆ·çš„ç”¨æˆ·ååˆ—è¡¨ï¼Œå¯ç”¨äºç›‘æ§å’Œç»Ÿè®¡ã€‚</p>
<p><strong>è¸¢å‡ºæŒ‡å®šç”¨æˆ·</strong>ï¼šå¼ºåˆ¶æŒ‡å®šç”¨æˆ·ä¸‹çº¿ï¼Œæ¸…é™¤å…¶æ‰€æœ‰Tokenï¼Œå¸¸ç”¨äºå¤„ç†å¼‚å¸¸æƒ…å†µã€‚</p>
<p><strong>æŸ¥çœ‹ç”¨æˆ·ä¼šè¯</strong>ï¼šè·å–æŒ‡å®šç”¨æˆ·çš„æ‰€æœ‰æ´»è·ƒTokenï¼Œäº†è§£ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ã€‚</p>
<h2 data-id="heading-15">äº”ã€å‰ç«¯å®ç°</h2>
<h4 data-id="heading-16">5.1 æ ¸å¿ƒå®ç°</h4>
<p><strong>api.js</strong>ï¼šè´Ÿè´£æ‰€æœ‰APIè¯·æ±‚çš„å°è£…ï¼ŒåŒ…æ‹¬Tokenç®¡ç†ã€è¯·æ±‚æ‹¦æˆªã€é”™è¯¯å¤„ç†ç­‰ã€‚</p>
<p><strong>é¡µé¢æ¨¡å—</strong>ï¼šlogin.htmlã€index.htmlã€admin.htmlå„è‡ªè´Ÿè´£ç‹¬ç«‹çš„åŠŸèƒ½ï¼Œé€šè¿‡importå¯¼å…¥apiæ¨¡å—ã€‚</p>
<p><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šä½¿ç”¨localStorageå’ŒsessionStorageç®¡ç†TokençŠ¶æ€ï¼Œæ”¯æŒ"è®°ä½æˆ‘"åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-17">5.2 Tokenç®¡ç†æœºåˆ¶</h4>
<p>Tokenç®¡ç†æ˜¯å‰ç«¯çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå®ç°äº†å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Tokenè·å–ç­–ç•¥</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getToken</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ä¼˜å…ˆä»localStorageè·å–ï¼ˆé•¿æœŸæœ‰æ•ˆï¼‰</span>
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>)
        || sessionStorage.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>);  <span class="hljs-comment">// å†ä»sessionStorageè·å–</span>
}

<span class="hljs-comment">// Tokenå­˜å‚¨ç­–ç•¥</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">setToken</span>(<span class="hljs-params">token, remember</span>) {
    <span class="hljs-keyword">if</span> (remember) {
        <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'token'</span>, token);  <span class="hljs-comment">// ç”¨æˆ·é€‰æ‹©&amp;#34;è®°ä½æˆ‘&amp;#34;</span>
    } <span class="hljs-keyword">else</span> {
        sessionStorage.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'token'</span>, token);  <span class="hljs-comment">// ä»…æœ¬æ¬¡ä¼šè¯æœ‰æ•ˆ</span>
    }
}
</code></pre>
<p>è¿™ç§è®¾è®¡çš„ä¼˜åŠ¿æ˜¯ç»™äº†ç”¨æˆ·é€‰æ‹©æƒï¼šéšç§æ•æ„Ÿçš„åœºæ™¯å¯ä»¥ä½¿ç”¨sessionStorageï¼Œç¡®ä¿å…³é—­æµè§ˆå™¨åè‡ªåŠ¨æ¸…é™¤ï¼›ä¸ªäººè®¾å¤‡ä¸Šå¯ä»¥ä½¿ç”¨localStorageï¼Œæä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<h4 data-id="heading-18">5.3 è¯·æ±‚æ‹¦æˆªå™¨</h4>
<p>å‰ç«¯å®ç°äº†ä¸€ä¸ªè½»é‡çº§çš„è¯·æ±‚æ‹¦æˆªå™¨ï¼Œè‡ªåŠ¨å¤„ç†è®¤è¯ç›¸å…³çš„é€»è¾‘ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">apiRequest</span>(<span class="hljs-params">url, options = {}</span>) {
    <span class="hljs-comment">// è‡ªåŠ¨æ·»åŠ Token</span>
    <span class="hljs-keyword">const</span> token = <span class="hljs-title function_">getToken</span>();
    <span class="hljs-keyword">if</span> (token) {
        options.<span class="hljs-property">headers</span> = {
            ...options.<span class="hljs-property">headers</span>,
            <span class="hljs-string">'Authorization'</span>: token
        };
    }

    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url, options);

    <span class="hljs-comment">// ç»Ÿä¸€å¤„ç†401å“åº”</span>
    <span class="hljs-keyword">if</span> (response.<span class="hljs-property">status</span> === <span class="hljs-number">401</span>) {
        <span class="hljs-title function_">clearToken</span>();
        <span class="hljs-comment">// é¿å…åœ¨ç™»å½•é¡µé‡å¤è·³è½¬</span>
        <span class="hljs-keyword">if</span> (location.<span class="hljs-property">pathname</span> !== <span class="hljs-string">'/login.html'</span>) {
            location.<span class="hljs-property">href</span> = <span class="hljs-string">'/login.html'</span>;
        }
    }

    <span class="hljs-keyword">return</span> response.<span class="hljs-title function_">json</span>();
}
</code></pre>
<p>è¿™ä¸ªæ‹¦æˆªå™¨å®ç°äº†ï¼š</p>
<ul>
<li>è‡ªåŠ¨æºå¸¦Tokenï¼Œå‡å°‘é‡å¤ä»£ç </li>
<li>ç»Ÿä¸€çš„401å¤„ç†ï¼Œç¡®ä¿ç”¨æˆ·åœ¨Tokenå¤±æ•ˆæ—¶èƒ½å¤ŸåŠæ—¶é‡æ–°ç™»å½•</li>
</ul>
<h2 data-id="heading-19">å…­ã€æ€»ç»“</h2>
<p>æ•´ä¸ªæ–¹æ¡ˆä»…ä¾èµ–Spring Boot Webï¼Œä¸éœ€è¦å¼•å…¥ä»»ä½•é¢å¤–çš„å®‰å…¨æ¡†æ¶ã€ç¼“å­˜ä¸­é—´ä»¶æˆ–æ•°æ®åº“ã€‚è¿™ä½¿å¾—é¡¹ç›®çš„ä¾èµ–ä¿æŒæœ€å°åŒ–ã€‚</p>
<p>é€šè¿‡SessionManageræ¥å£æŠ½è±¡ï¼Œå®ç°äº†ä¸šåŠ¡é€»è¾‘ä¸å­˜å‚¨é€»è¾‘çš„å®Œå…¨åˆ†ç¦»ã€‚å½“éœ€è¦ä»å•æœºæ‰©å±•åˆ°åˆ†å¸ƒå¼æ—¶ï¼Œåªéœ€è¦å®ç°ä¸€ä¸ªåŸºäºRedisçš„SessionManagerå³å¯ï¼Œä¸šåŠ¡ä»£ç æ— éœ€ä»»ä½•ä¿®æ”¹ã€‚</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/github.com/yuboon</span><span class="hljs-regexp">/java-examples/tree</span><span class="hljs-regexp">/master/springboot</span>-single-login
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C# Params Collections è¯¦è§£ï¼šæ¯” params T[] æ›´å¼ºå¤§çš„æ–°è¯­æ³•]]></title>    <link>https://juejin.cn/post/7582090790181879846</link>    <guid>https://juejin.cn/post/7582090790181879846</guid>    <pubDate>2025-12-11T00:10:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582090790181879846" data-draft-id="7582041304655413294" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C# Params Collections è¯¦è§£ï¼šæ¯” params T[] æ›´å¼ºå¤§çš„æ–°è¯­æ³•"/> <meta itemprop="keywords" content="C#,.NET"/> <meta itemprop="datePublished" content="2025-12-11T00:10:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å”é’æ«"/> <meta itemprop="url" content="https://juejin.cn/user/3737995266234280"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C# Params Collections è¯¦è§£ï¼šæ¯” params T[] æ›´å¼ºå¤§çš„æ–°è¯­æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3737995266234280/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å”é’æ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T00:10:11.000Z" title="Thu Dec 11 2025 00:10:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ç®€ä»‹</h3>
<p><code>Params Collections</code> æ˜¯ <code>C# 12</code> ä¸­å¼•å…¥çš„æ–°ç‰¹æ€§ï¼Œå®ƒæ‰©å±•äº†ä¼ ç»Ÿçš„ <code>params</code> å…³é”®å­—åŠŸèƒ½ï¼Œä½¿å…¶ä¸ä»…æ”¯æŒæ•°ç»„ï¼Œè¿˜èƒ½æ”¯æŒå„ç§é›†åˆç±»å‹ã€‚è¿™ä¸ªç‰¹æ€§ä½¿å¾—æ–¹æ³•èƒ½å¤Ÿæ¥å—å¯å˜æ•°é‡çš„å‚æ•°ï¼Œå¹¶ä¸”è¿™äº›å‚æ•°å¯ä»¥è‡ªåŠ¨è½¬æ¢ä¸ºæŒ‡å®šçš„é›†åˆç±»å‹ã€‚</p>
<p>å…³é”®ç‰¹ç‚¹ï¼š</p>
<ul>
<li>
<p>å¯å˜å‚æ•°ï¼šè°ƒç”¨è€…å¯ä»¥ä¼ é€’ä»»æ„æ•°é‡çš„å‚æ•°ï¼ˆåŒ…æ‹¬é›¶ä¸ªï¼‰ã€‚</p>
</li>
<li>
<p>ç±»å‹å®‰å…¨ï¼š<code>params</code> å‚æ•°æ˜¯å¼ºç±»å‹çš„ï¼Œç¼–è¯‘å™¨ç¡®ä¿å‚æ•°ç±»å‹åŒ¹é…ã€‚</p>
</li>
<li>
<p>å•ä¸€ <code>params</code> å‚æ•°ï¼šä¸€ä¸ªæ–¹æ³•åªèƒ½æœ‰ä¸€ä¸ª <code>params</code> å‚æ•°ï¼Œä¸”å¿…é¡»æ˜¯æœ€åä¸€ä¸ªå‚æ•°ã€‚</p>
</li>
<li>
<p><code>C# 12</code> æ‰©å±•ï¼šæ”¯æŒéæ•°ç»„é›†åˆç±»å‹ï¼ˆå¦‚ <code>List</code>, <code>Span</code>ï¼‰ï¼Œé€‚åˆé«˜æ€§èƒ½æˆ–ç‰¹å®šåœºæ™¯ã€‚</p>
</li>
</ul>
<h3 data-id="heading-1">æ ¸å¿ƒç‰¹æ€§</h3>
<h4 data-id="heading-2">æ”¯æŒä»»æ„é›†åˆç±»å‹</h4>
<ul>
<li>å¯æŒ‡å®š <code>Listã€Spanã€IReadOnlyCollection</code> ç­‰ä½œä¸ºå‚æ•°ç±»å‹</li>
</ul>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">LogEntries</span>(<span class="hljs-params"><span class="hljs-keyword">params</span> List messages</span>)</span> { ... }
</code></pre>
<h4 data-id="heading-3">è‡ªåŠ¨é›†åˆæ„é€ </h4>
<ul>
<li>ç¼–è¯‘å™¨è‡ªåŠ¨å°†ç¦»æ•£å‚æ•°è½¬æ¢ä¸ºç›®æ ‡é›†åˆç±»å‹å®ä¾‹</li>
</ul>
<pre><code class="hljs language-csharp" lang="csharp">AnalyzeNumbers(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>); 
<span class="hljs-comment">// ç­‰æ•ˆäºï¼š</span>
AnalyzeNumbers(<span class="hljs-keyword">new</span> List { <span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span> });
</code></pre>
<h4 data-id="heading-4">ä¸ç°æœ‰ params å…¼å®¹</h4>
<ul>
<li>
<p>ä¼ ç»Ÿ <code>params T[]</code> ä»ç„¶æœ‰æ•ˆ</p>
</li>
<li>
<p>æ–°è¯­æ³•ä¸ä¼šç ´åå·²æœ‰ä»£ç </p>
</li>
</ul>
<h3 data-id="heading-5">ä¼ ç»Ÿ params å…³é”®å­—</h3>
<p>åœ¨ <code>C# 12</code> ä¹‹å‰ï¼Œ<code>params</code> å…³é”®å­—åªèƒ½ç”¨äºæ•°ç»„ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ä¼ ç»Ÿçš„ params æ•°ç»„ç”¨æ³•</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ProcessNumbers</span>(<span class="hljs-params"><span class="hljs-keyword">params</span> <span class="hljs-built_in">int</span>[] numbers</span>)</span>
{
    <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> number <span class="hljs-keyword">in</span> numbers)
    {
        Console.WriteLine(number);
    }
}

<span class="hljs-comment">// è°ƒç”¨æ–¹å¼</span>
ProcessNumbers(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>);
</code></pre>
<h3 data-id="heading-6">Params Collections çš„æ–°ç‰¹æ€§</h3>
<p><code>C# 12</code> æ‰©å±•äº† <code>params</code> å…³é”®å­—ï¼Œä½¿å…¶èƒ½å¤Ÿç”¨äºä»»ä½•é›†åˆç±»å‹ï¼Œåªè¦è¯¥ç±»å‹æ»¡è¶³ç‰¹å®šæ¡ä»¶ã€‚</p>
<h4 data-id="heading-7">åŸºæœ¬è¯­æ³•</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ä½¿ç”¨ params ä¸é›†åˆç±»å‹</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ProcessNumbers</span>(<span class="hljs-params"><span class="hljs-keyword">params</span> List numbers</span>)</span>
{
    <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> number <span class="hljs-keyword">in</span> numbers)
    {
        Console.WriteLine(number);
    }
}

<span class="hljs-comment">// è°ƒç”¨æ–¹å¼ä¸å˜</span>
ProcessNumbers(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>);
</code></pre>
<h3 data-id="heading-8">æ”¯æŒçš„æ¡ä»¶</h3>
<p>è¦ä½¿é›†åˆç±»å‹èƒ½å¤Ÿä¸ <code>params</code> å…³é”®å­—ä¸€èµ·ä½¿ç”¨ï¼Œå¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ä¹‹ä¸€ï¼š</p>
<ul>
<li>
<p>é›†åˆç±»å‹å¿…é¡»æœ‰ä¸€ä¸ªæ— å‚æ•°çš„æ„é€ å‡½æ•°</p>
</li>
<li>
<p>é›†åˆç±»å‹å¿…é¡»æœ‰ä¸€ä¸ª <code>Add</code> æ–¹æ³•ï¼Œç”¨äºæ·»åŠ å…ƒç´ </p>
</li>
<li>
<p>é›†åˆç±»å‹å¿…é¡»å®ç° <code>IEnumerable</code></p>
</li>
</ul>
<h4 data-id="heading-9">è‡ªå®šä¹‰é›†åˆä¸ params</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è‡ªå®šä¹‰é›†åˆç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">NumberCollection</span> : <span class="hljs-title">IEnumerable</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> List _numbers = <span class="hljs-keyword">new</span>();
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Add</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> number</span>)</span> =&gt; _numbers.Add(number);
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> IEnumerator <span class="hljs-title">GetEnumerator</span>()</span> =&gt; _numbers.GetEnumerator();
    
    IEnumerator IEnumerable.GetEnumerator() =&gt; GetEnumerator();
}

<span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰é›†åˆä½œä¸º params å‚æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ProcessNumbers</span>(<span class="hljs-params"><span class="hljs-keyword">params</span> NumberCollection numbers</span>)</span>
{
    <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> number <span class="hljs-keyword">in</span> numbers)
    {
        Console.WriteLine(number);
    }
}

<span class="hljs-comment">// è°ƒç”¨</span>
ProcessNumbers(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>);
</code></pre>
<h3 data-id="heading-10">å®é™…åº”ç”¨ç¤ºä¾‹</h3>
<h4 data-id="heading-11">ä¸ Span å’Œ ReadOnlySpan ç»“åˆä½¿ç”¨</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ä½¿ç”¨ Span ä½œä¸º params å‚æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ProcessData</span>(<span class="hljs-params"><span class="hljs-keyword">params</span> Span data</span>)</span>
{
    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; data.Length; i++)
    {
        data[i] *= <span class="hljs-number">2</span>;
    }
}

<span class="hljs-comment">// è°ƒç”¨</span>
<span class="hljs-built_in">int</span>[] array = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
ProcessData(array);
Console.WriteLine(<span class="hljs-built_in">string</span>.Join(&amp;<span class="hljs-meta">#34;, &amp;#34;, array)); // è¾“å‡º: 2, 4, 6, 8, 10</span>
</code></pre>
<h4 data-id="heading-12">ä¸ Immutable Collections ç»“åˆä½¿ç”¨</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> System.Collections.Immutable;

<span class="hljs-comment">// ä½¿ç”¨ä¸å¯å˜é›†åˆä½œä¸º params å‚æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ProcessItems</span>(<span class="hljs-params"><span class="hljs-keyword">params</span> ImmutableArray items</span>)</span>
{
    <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> item <span class="hljs-keyword">in</span> items)
    {
        Console.WriteLine(item);
    }
}

<span class="hljs-comment">// è°ƒç”¨</span>
ProcessItems(&amp;<span class="hljs-meta">#34;apple&amp;#34;, &amp;#34;banana&amp;#34;, &amp;#34;cherry&amp;#34;);</span>
</code></pre>
<h3 data-id="heading-13">é«˜çº§ç”¨æ³•</h3>
<h4 data-id="heading-14">æ³›å‹æ–¹æ³•ä¸ params é›†åˆ</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// æ³›å‹æ–¹æ³•ä¸­ä½¿ç”¨ params é›†åˆ</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ProcessCollection</span>(<span class="hljs-params"><span class="hljs-keyword">params</span> List collection</span>)
    <span class="hljs-keyword">where</span> T : <span class="hljs-keyword">notnull</span></span>
{
    <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> item <span class="hljs-keyword">in</span> collection)
    {
        Console.WriteLine(item);
    }
}

<span class="hljs-comment">// è°ƒç”¨</span>
ProcessCollection(&amp;<span class="hljs-meta">#34;a&amp;#34;, &amp;#34;b&amp;#34;, &amp;#34;c&amp;#34;); // å­—ç¬¦ä¸²åˆ—è¡¨</span>
ProcessCollection(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);       <span class="hljs-comment">// æ•´æ•°åˆ—è¡¨</span>
</code></pre>
<h4 data-id="heading-15">ä¸æ¨¡å¼åŒ¹é…ç»“åˆä½¿ç”¨</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ä½¿ç”¨æ¨¡å¼åŒ¹é…å¤„ç† params é›†åˆ</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">HandleValues</span>(<span class="hljs-params"><span class="hljs-keyword">params</span> <span class="hljs-built_in">int</span>[] values</span>)</span>
{
    <span class="hljs-keyword">switch</span> (values)
    {
        <span class="hljs-keyword">case</span> [<span class="hljs-keyword">var</span> first, .. <span class="hljs-keyword">var</span> middle, <span class="hljs-keyword">var</span> last]:
            Console.WriteLine($&amp;<span class="hljs-meta">#34;é¦–: {first}, å°¾: {last}, ä¸­é—´æœ‰ {middle.Length} ä¸ªå…ƒç´ &amp;#34;);</span>
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> [<span class="hljs-keyword">var</span> single]:
            Console.WriteLine($&amp;<span class="hljs-meta">#34;å•ä¸ªå€¼: {single}&amp;#34;);</span>
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> []:
            Console.WriteLine(&amp;<span class="hljs-meta">#34;ç©ºé›†åˆ&amp;#34;);</span>
            <span class="hljs-keyword">break</span>;
    }
}

<span class="hljs-comment">// è°ƒç”¨</span>
HandleValues(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>); <span class="hljs-comment">// è¾“å‡º: é¦–: 1, å°¾: 5, ä¸­é—´æœ‰ 3 ä¸ªå…ƒç´ </span>
HandleValues(<span class="hljs-number">42</span>);            <span class="hljs-comment">// è¾“å‡º: å•ä¸ªå€¼: 42</span>
HandleValues();              <span class="hljs-comment">// è¾“å‡º: ç©ºé›†åˆ</span>
</code></pre>
<h4 data-id="heading-16">ä¸æ¥å£ç»“åˆä½¿ç”¨</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ä½¿ç”¨æ¥å£ä½œä¸º params å‚æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ProcessEnumerables</span>(<span class="hljs-params"><span class="hljs-keyword">params</span> IEnumerable[] collections</span>)</span>
{
    <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> collection <span class="hljs-keyword">in</span> collections)
    {
        <span class="hljs-built_in">int</span> sum = collection.Sum();
        Console.WriteLine($&amp;<span class="hljs-meta">#34;é›†åˆæ€»å’Œ: {sum}&amp;#34;);</span>
    }
}

<span class="hljs-comment">// è°ƒç”¨</span>
ProcessEnumerables(
    <span class="hljs-keyword">new</span> List { <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span> },
    <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>[] { <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span> },
    <span class="hljs-keyword">new</span> HashSet { <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span> }
);
</code></pre>
<h4 data-id="heading-17">é«˜æ€§èƒ½æ±‚å’Œï¼ˆä½¿ç”¨ <code>Span</code>ï¼‰</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">decimal</span> <span class="hljs-title">Average</span>(<span class="hljs-params"><span class="hljs-keyword">params</span> Span numbers</span>)</span>
{
    <span class="hljs-keyword">if</span> (numbers.Length == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    <span class="hljs-built_in">decimal</span> sum = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> num <span class="hljs-keyword">in</span> numbers)
    {
        sum += num;
    }
    <span class="hljs-keyword">return</span> sum / numbers.Length;
}

Console.WriteLine(Average(<span class="hljs-number">1.5</span>m, <span class="hljs-number">2.5</span>m, <span class="hljs-number">3.5</span>m)); <span class="hljs-comment">// è¾“å‡º: 2.5</span>
</code></pre>
<ul>
<li>
<p>ä½¿ç”¨ <code>Span</code> é¿å…æ•°ç»„åˆ†é…ï¼Œæé«˜æ€§èƒ½ã€‚</p>
</li>
<li>
<p>é€‚åˆå¤„ç†å¤§é‡æ•°å€¼è®¡ç®—ã€‚</p>
</li>
</ul>
<h3 data-id="heading-18">é€‚ç”¨åœºæ™¯</h3>
<ul>
<li>
<p>ç®€åŒ–æ–¹æ³•è°ƒç”¨ï¼šå…è®¸è°ƒç”¨è€…ä¼ é€’ä»»æ„æ•°é‡çš„å‚æ•°ï¼Œå‡å°‘é‡è½½éœ€æ±‚ã€‚</p>
</li>
<li>
<p>å¤„ç†é›†åˆæ•°æ®ï¼šé€‚åˆå¤„ç†åˆ—è¡¨ã€æ•°ç»„æˆ–åºåˆ—ï¼Œä¾‹å¦‚æ—¥å¿—è®°å½•ã€å­—ç¬¦ä¸²è¿æ¥ã€æ•°å­¦è®¡ç®—ã€‚</p>
</li>
<li>
<p>é«˜æ€§èƒ½åœºæ™¯ï¼ˆ<code>C# 12+</code>ï¼‰ï¼šä½¿ç”¨ <code>Span</code> æˆ– <code>ReadOnlySpan</code> å‡å°‘å †åˆ†é…ï¼Œä¼˜åŒ–æ€§èƒ½ã€‚</p>
</li>
<li>
<p>ä¸æœ¬æœºä»£ç äº¤äº’ï¼š<code>Span</code> ç±»å‹çš„ <code>params</code> å‚æ•°é€‚åˆä¼ é€’è¿ç»­å†…å­˜å—ã€‚</p>
</li>
<li>
<p>çµæ´»æ¥å£è®¾è®¡ï¼šä¸ºæ–¹æ³•æä¾›é€šç”¨æ¥å£ï¼Œæ”¯æŒä¸åŒæ•°é‡çš„è¾“å…¥ã€‚</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redis æ€§èƒ½ç¿»å€çš„ 5 ä¸ªå†·é—¨æŠ€å·§ï¼Œ90%å¼€å‘è€…éƒ½ä¸çŸ¥é“çš„åº•å±‚ä¼˜åŒ–ï¼]]></title>    <link>https://juejin.cn/post/7582039917217906688</link>    <guid>https://juejin.cn/post/7582039917217906688</guid>    <pubDate>2025-12-11T00:16:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582039917217906688" data-draft-id="7582044568721621032" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redis æ€§èƒ½ç¿»å€çš„ 5 ä¸ªå†·é—¨æŠ€å·§ï¼Œ90%å¼€å‘è€…éƒ½ä¸çŸ¥é“çš„åº•å±‚ä¼˜åŒ–ï¼"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-11T00:16:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redis æ€§èƒ½ç¿»å€çš„ 5 ä¸ªå†·é—¨æŠ€å·§ï¼Œ90%å¼€å‘è€…éƒ½ä¸çŸ¥é“çš„åº•å±‚ä¼˜åŒ–ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T00:16:46.000Z" title="Thu Dec 11 2025 00:16:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Redis æ€§èƒ½ç¿»å€çš„ 5 ä¸ªå†·é—¨æŠ€å·§ï¼Œ90%å¼€å‘è€…éƒ½ä¸çŸ¥é“çš„åº•å±‚ä¼˜åŒ–ï¼</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Redis ä½œä¸ºé«˜æ€§èƒ½çš„å†…å­˜æ•°æ®åº“ï¼Œè¢«å¹¿æ³›åº”ç”¨äºç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ã€å®æ—¶ç»Ÿè®¡ç­‰åœºæ™¯ã€‚å¤§å¤šæ•°å¼€å‘è€…ç†Ÿæ‚‰åŸºç¡€å‘½ä»¤å’Œé…ç½®è°ƒä¼˜ï¼ˆå¦‚ <code>maxmemory</code>ã€<code>expire</code>ï¼‰ï¼Œä½† Redis çš„æ€§èƒ½æ½œåŠ›è¿œä¸æ­¢äºæ­¤ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ <strong>5 ä¸ªé²œä¸ºäººçŸ¥çš„åº•å±‚ä¼˜åŒ–æŠ€å·§</strong>ï¼Œç»“åˆæºç å®ç°å’Œç¡¬ä»¶ç‰¹æ€§ï¼Œå¸®åŠ©ä½ å°† Redis æ€§èƒ½æå‡ä¸€å€ç”šè‡³æ›´å¤šã€‚</p>
<hr/>
<h2 data-id="heading-2">1. Pipeline + MULTI/EXECï¼šéšè—çš„ç½‘ç»œä¼˜åŒ–</h2>
<h3 data-id="heading-3">é—®é¢˜èƒŒæ™¯</h3>
<p>å¸¸è§„çš„ Redis æ“ä½œæ˜¯â€œè¯·æ±‚-å“åº”â€æ¨¡å¼ï¼Œæ¯æ¡å‘½ä»¤éƒ½éœ€è¦ä¸€æ¬¡ç½‘ç»œå¾€è¿”ï¼ˆRTTï¼‰ã€‚åœ¨é«˜å»¶è¿Ÿç½‘ç»œä¸­ï¼ˆå¦‚è·¨æœºæˆ¿è°ƒç”¨ï¼‰ï¼Œè¿™ä¼šæˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚</p>
<h3 data-id="heading-4">å†·é—¨æŠ€å·§</h3>
<p>ä½¿ç”¨ <strong>Pipeline</strong> æ‰¹é‡å‘é€å‘½ä»¤å¯ä»¥å‡å°‘ RTTï¼Œä½†æ›´è¿›ä¸€æ­¥çš„æ˜¯ç»“åˆ <code>MULTI/EXEC</code> äº‹åŠ¡ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¼ ç»Ÿ Pipeline  </span>
<span class="hljs-built_in">echo</span> -e &amp;<span class="hljs-comment">#34;SET k1 v1\nGET k1&amp;#34; | redis-cli --pipe  </span>

<span class="hljs-comment"># Pipeline + MULTI/EXECï¼ˆåŸå­æ€§æ‰¹é‡æ“ä½œï¼‰  </span>
<span class="hljs-built_in">echo</span> -e &amp;<span class="hljs-comment">#34;MULTI\nSET k1 v1\nSET k2 v2\nEXEC&amp;#34; | redis-cli --pipe  </span>
</code></pre>
<h4 data-id="heading-5"><strong>åº•å±‚åŸç†</strong></h4>
<ul>
<li>Pipeline é€šè¿‡ç¼“å†²å‘½ä»¤ä¸€æ¬¡æ€§å‘é€ï¼Œå‡å°‘ TCP/IP åè®®æ ˆçš„ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</li>
<li><code>MULTI/EXEC</code> åœ¨æœåŠ¡ç«¯å°†å¤šä¸ªæ“ä½œåˆå¹¶ä¸ºä¸€ä¸ªåŸå­æ“ä½œï¼Œé¿å…ä¸­é—´çŠ¶æ€å¯¼è‡´çš„é”ç«äº‰ï¼ˆå°¤å…¶åœ¨ Lua è„šæœ¬ä¸­æ›´æ˜æ˜¾ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-6"><strong>æ€§èƒ½å¯¹æ¯”</strong></h4>

























<table><thead><tr><th>æ–¹å¼</th><th>QPS (æœ¬åœ°æµ‹è¯•)</th><th>RTTæ¶ˆè€—</th></tr></thead><tbody><tr><td>Single Command</td><td>~50k</td><td>High</td></tr><tr><td>Pipeline</td><td>~200k</td><td>Low</td></tr><tr><td>Pipeline+MULTI/EXEC</td><td>~300k</td><td>Lowest</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-7">2. Hash Slot Prefetchingï¼šé›†ç¾¤æ¨¡å¼ä¸‹çš„ç§˜å¯†æ­¦å™¨</h2>
<h3 data-id="heading-8">é—®é¢˜èƒŒæ™¯</h3>
<p>Redis Cluster ä½¿ç”¨å“ˆå¸Œæ§½ï¼ˆ16384 slotsï¼‰åˆ†ç‰‡æ•°æ®ã€‚è·¨èŠ‚ç‚¹è®¿é—®éœ€è¦é¢å¤–çš„ <code>MOVED</code> é‡å®šå‘å¼€é”€ã€‚</p>
<h3 data-id="heading-9">å†·é—¨æŠ€å·§</h3>
<p>é€šè¿‡ <strong>é¢„è®¡ç®— Key çš„å“ˆå¸Œæ§½</strong>ï¼Œå®¢æˆ·ç«¯å¯ä»¥ç›´è¿ç›®æ ‡èŠ‚ç‚¹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> rediscluster  

<span class="hljs-comment"># CRC16ç®—æ³•é¢„è®¡ç®—slotï¼ˆä¸Redisæºç ä¸€è‡´ï¼‰  </span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_slot</span>(<span class="hljs-params">key</span>):  
    crc = binascii.crc16(key.encode()) &amp; <span class="hljs-number">0xFFFF</span>  
    <span class="hljs-keyword">return</span> crc % <span class="hljs-number">16384</span>  

slot = get_slot(&amp;<span class="hljs-comment">#34;user:1000&amp;#34;)  </span>
node = cluster_nodes[slot]   <span class="hljs-comment"># clientç»´æŠ¤slot-nodeæ˜ å°„</span>
node.execute(&amp;<span class="hljs-comment">#34;GET&amp;#34;, &amp;#34;user:1000&amp;#34;) </span>
</code></pre>
<h4 data-id="heading-10"><strong>åº•å±‚åŸç†</strong></h4>
<ul>
<li>Redis Cluster Client ï¼ˆå¦‚ Lettuceï¼‰é»˜è®¤ä¼šç¼“å­˜ <code>MOVED</code>å“åº”ï¼Œä½†é¦–æ¬¡è®¿é—®ä»éœ€é‡å®šå‘ã€‚é¢„è®¡ç®—å®Œå…¨é¿å…æ­¤å¼€é”€ã€‚</li>
<li>CRC16 (<em>src/crc16.c</em>)æ˜¯è½»é‡çº§è®¡ç®—ï¼Œå‡ ä¹æ— é¢å¤–æˆæœ¬ã€‚</li>
</ul>
<h4 data-id="heading-11"><strong>é€‚ç”¨åœºæ™¯</strong></h4>
<p>é•¿è¿æ¥+å›ºå®šKeyæ¨¡å¼ï¼ˆå¦‚ä¼šè¯å­˜å‚¨ï¼‰ã€‚</p>
<hr/>
<h2 data-id="heading-12">3. Memory Alignmentï¼šæ•°æ®ç»“æ„çš„å†…å­˜ç„æœº</h2>
<h3 data-id="heading-13">RedisObjectçš„ç§˜å¯†å¸ƒå±€</h3>
<p>Redisæ‰€æœ‰å€¼éƒ½è¢«å°è£…ä¸º <code>redisObject</code> (<em>server.h</em>)ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">redisObject</span> {</span>    
    <span class="hljs-type">unsigned</span> type:<span class="hljs-number">4</span>;       <span class="hljs-comment">// e.g. OBJ_STRING    </span>
    <span class="hljs-type">unsigned</span> encoding:<span class="hljs-number">4</span>;   <span class="hljs-comment">// e.g. OBJ_ENCODING_INT    </span>
    <span class="hljs-type">unsigned</span> lru:<span class="hljs-number">24</span>;       <span class="hljs-comment">// LRUæ—¶é—´æˆ³    </span>
    <span class="hljs-type">int</span> refcount;          <span class="hljs-comment">//å¼•ç”¨è®¡æ•°    </span>
    <span class="hljs-type">void</span> *ptr;             <span class="hljs-comment">//æŒ‡å‘å®é™…æ•°æ®    </span>
} robj;    
</code></pre>
<h3 data-id="heading-14">CPU Cache Lineä¼˜åŒ–</h3>
<p>ç°ä»£CPUä»¥Cache Lineï¼ˆé€šå¸¸64å­—èŠ‚ï¼‰ä¸ºå•ä½è¯»å–å†…å­˜ã€‚å¦‚æœ<code>robj</code>è·¨è¶Šä¸¤ä¸ªCache Lineï¼Œä¼šå¯¼è‡´å¤šæ¬¡å†…å­˜è®¿é—®ã€‚é€šè¿‡è°ƒæ•´å­—æ®µé¡ºåºæˆ–ç¼–è¯‘å™¨æŒ‡ä»¤å¼ºåˆ¶å¯¹é½ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> __<span class="hljs-title">attribute__</span>((<span class="hljs-title">aligned</span>(64))) <span class="hljs-title">redisObject</span> {</span> ... } robj;   
</code></pre>
<h4 data-id="heading-15"><strong>å®æµ‹å½±å“</strong></h4>
<p>åœ¨ARMæ¶æ„æœåŠ¡å™¨ä¸Šï¼ˆå¦‚AWS Gravitonï¼‰ï¼Œå¯¹é½åçš„QPSæå‡å¯è¾¾15%ã€‚</p>
<hr/>
<h2 data-id="heading-16">TLS Session Resumptionï¼šåŠ å¯†è¿æ¥çš„æ€§èƒ½æ•‘æ˜Ÿ</h2>
<h3 data-id="heading-17">SSL/TLSæ¡æ‰‹å¼€é”€</h3>
<p>å¯ç”¨TLSåï¼Œæ¯æ¬¡è¿æ¥éœ€è¦å®Œæ•´çš„æ¡æ‰‹æµç¨‹ï¼ˆ~2 RTT + RSAè®¡ç®—ï¼‰ã€‚</p>
<h3 data-id="heading-18">Sessionå¤ç”¨é…ç½®</h3>
<p>åœ¨<code>redis.conf</code>ä¸­å¯ç”¨TLSä¼šè¯å¤ç”¨ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">tls-session-caching yes     
tls-session-cache-size  50000      <span class="hljs-comment">#ä¿æŒå¤§é‡ä¼šè¯      </span>
tls-session-cache-timeout  300     <span class="hljs-comment">#è¶…æ—¶æ—¶é—´(ç§’)     </span>
</code></pre>
<h4 data-id="heading-19"><strong>OpenSSLçš„å¦™ç”¨</strong></h4>
<p>Redisä½¿ç”¨OpenSSLçš„ <code>SSL_CTX_set_session_cache_mode</code> APIå®ç°ä¼šè¯ç¥¨æ®å¤ç”¨(<em>src/tls.c</em>)ã€‚å¯¹äºçŸ­è¿æ¥åœºæ™¯ï¼ˆå¦‚Serverlessï¼‰ï¼Œååé‡å¯æå‡3å€ä»¥ä¸Šã€‚</p>
<hr/>
<h2 data-id="heading-20">Shared Memoryç»“æ„ä½“æ± åŒ–</h2>
<h3 data-id="heading-21">SDSçš„åŠ¨æ€åˆ†é…é—®é¢˜</h3>
<p>Rediså­—ç¬¦ä¸²é‡‡ç”¨SDS (<em>sds.h</em>)ç»“æ„å­˜å‚¨é¢‘ç¹ä¿®æ”¹çš„å­—ç¬¦ä¸²å¯èƒ½å¯¼è‡´å†…å­˜ç¢ç‰‡åŒ– ã€‚</p>
<h3 data-id="heading-22">HACKæ–¹æ¡ˆï¼šè‡ªå®šä¹‰å†…å­˜åˆ†é…å™¨</h3>
<p>æ›¿æ¢é»˜è®¤çš„<code>zmalloc()</code> (<em>zmalloc.c</em>) ï¼Œä¸ºSDSé¢„åˆ†é…å¯¹è±¡æ±  ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">//ç¤ºä¾‹ä¼ªä»£ç  </span>
sds <span class="hljs-title function_">sdsnewlen</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">void</span> *init, <span class="hljs-type">size_t</span> initlen)</span> {     
    <span class="hljs-keyword">if</span> (initlen &lt; SDS_MAX_POOLED_SIZE) {         
        sdshdr *sh = sds_pool_get(initlen); <span class="hljs-comment">//ä»æ± ä¸­è·å–         </span>
        <span class="hljs-keyword">if</span> (sh) <span class="hljs-keyword">return</span> sh-&gt;buf();      
    }     
    <span class="hljs-comment">//åŸå§‹åˆ†é…é€»è¾‘...    </span>
}    
</code></pre>
<h4 data-id="heading-23"><strong>é£é™©ä¸æ”¶ç›Šå¹¶å­˜</strong></h4>
<ul>
<li>Pros:  å‡å°‘malloc/freeè°ƒç”¨ ï¼Œå°¤å…¶é€‚åˆé«˜é¢‘è®¡æ•°å™¨åœºæ™¯ ï¼ˆå¦‚INCRï¼‰ã€‚</li>
<li>Cons:  éœ€è°¨æ…å¤„ç†çº¿ç¨‹å®‰å…¨æ€§å’Œå†…å­˜æ³„æ¼ ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-24">Conclusion</h2>
<p>ä»¥ä¸Š5ä¸ªæŠ€å·§ä»åè®®ã€ç®—æ³•ã€å†…å­˜ã€åŠ å¯†å’Œèµ„æºç®¡ç†äº”ä¸ªç»´åº¦æŒ–æ˜Redisçš„æ·±å±‚æ€§èƒ½æ½œåŠ› ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ ï¼š</p>
<ol>
<li>Pipeline+MULTIé€‚åˆæ‰¹å¤„ç†ä½†ä¼šç‰ºç‰²åŸå­æ€§éš”ç¦»çº§åˆ« ï¼›</li>
<li>Sloté¢„è®¡ç®—è¦æ±‚å®¢æˆ·ç«¯ç»´æŠ¤é›†ç¾¤æ‹“æ‰‘ ï¼›</li>
<li>Memory Alignmentçš„æ•ˆæœä¾èµ–CPUæ¶æ„ ï¼›</li>
</ol>
<p>çœŸæ­£çš„æ€§èƒ½è°ƒä¼˜éœ€ç»“åˆå…·ä½“ä¸šåŠ¡åœºæ™¯å’Œæ•°æ®ç‰¹å¾ ã€‚å»ºè®®é€šè¿‡ <code>redis-benchmark -A pipeline=32... </code>é’ˆå¯¹æ€§å‹æµ‹éªŒè¯æ•ˆæœ ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¯¹äºã€Šç›®å‰ç¨‹åºè¯­è¨€ä¸è½¯ä»¶å·¥ç¨‹ç ”ç©¶ä¸­çœŸæ­£ä¸¥é‡çš„ç¼ºé™·æ˜¯ä»€ä¹ˆï¼Ÿã€‹ä¸€æ–‡çš„è§£è¯»]]></title>    <link>https://juejin.cn/post/7582044568721637416</link>    <guid>https://juejin.cn/post/7582044568721637416</guid>    <pubDate>2025-12-11T00:19:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582044568721637416" data-draft-id="7582096212662288384" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¯¹äºã€Šç›®å‰ç¨‹åºè¯­è¨€ä¸è½¯ä»¶å·¥ç¨‹ç ”ç©¶ä¸­çœŸæ­£ä¸¥é‡çš„ç¼ºé™·æ˜¯ä»€ä¹ˆï¼Ÿã€‹ä¸€æ–‡çš„è§£è¯»"/> <meta itemprop="keywords" content="åç«¯,æ¶æ„,é¢†åŸŸé©±åŠ¨è®¾è®¡"/> <meta itemprop="datePublished" content="2025-12-11T00:19:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="canonical_entropy"/> <meta itemprop="url" content="https://juejin.cn/user/4212984289694429"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¯¹äºã€Šç›®å‰ç¨‹åºè¯­è¨€ä¸è½¯ä»¶å·¥ç¨‹ç ”ç©¶ä¸­çœŸæ­£ä¸¥é‡çš„ç¼ºé™·æ˜¯ä»€ä¹ˆï¼Ÿã€‹ä¸€æ–‡çš„è§£è¯»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984289694429/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    canonical_entropy
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T00:19:33.000Z" title="Thu Dec 11 2025 00:19:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æˆ‘çš„å‰ä¸€ç¯‡æ–‡ç« <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FlJyGfNa3psbVxeSO1sji-A" target="_blank" title="https://mp.weixin.qq.com/s/lJyGfNa3psbVxeSO1sji-A" ref="nofollow noopener noreferrer">ã€Šç›®å‰ç¨‹åºè¯­è¨€ä¸è½¯ä»¶å·¥ç¨‹ç ”ç©¶ä¸­çœŸæ­£ä¸¥é‡çš„ç¼ºé™·æ˜¯ä»€ä¹ˆï¼Ÿã€‹</a>ä¸­ï¼Œæˆ‘æå‡ºäº†ä¸€ä¸ªæ ¸å¿ƒè§‚ç‚¹ï¼šå½“ä»£ç¼–ç¨‹è¯­è¨€ä¸è½¯ä»¶å·¥ç¨‹çš„ä¸»æµç†è®ºï¼ŒæŠŠæ³¨æ„åŠ›å‡ ä¹å…¨éƒ¨é›†ä¸­åœ¨â€œå•ä¸ªç¨‹åºçš„é™æ€å¿«ç…§â€ä¸Šï¼Œå´ç¼ºä¹ä¸€å¥—ä»¥â€œå˜åŒ–æœ¬èº«â€ä¸ºä¸€ç­‰å…¬æ°‘ã€é¢å‘ç¨‹åºæ—é•¿æœŸæ¼”åŒ–çš„ç»Ÿä¸€ç†è®ºæ¡†æ¶ã€‚ä¸ºæ­¤ï¼Œæˆ‘å¼•å…¥äº†â€œå¹¿ä¹‰å¯é€†è®¡ç®—ï¼ˆGRCï¼‰â€åŠå…¶æ ¸å¿ƒå…¬å¼ <code>Y = F(X) âŠ• Î”</code>ï¼Œè¯•å›¾æŠŠâ€œç”Ÿæˆâ€å’Œâ€œæ¼”åŒ–â€ç»Ÿä¸€åœ¨ä¸€æ¡æ–¹ç¨‹ä¹‹ä¸­ã€‚</p>
<p>è¿™ç¯‡è¡¥å……è¯´æ˜çš„ç›®çš„ï¼Œæ˜¯æŠŠåŸæ–‡ä¸­ä¸€äº›éšå«ä½†å…³é”®çš„æ€æƒ³æ˜ç¡®æ‹‰åˆ°å‰å°ï¼š</p>
<ul>
<li>Î” å¹¶ä¸æ˜¯å¯¹æ–‡æœ¬åš diffï¼Œè€Œæ˜¯ç›¸å¯¹äºæŸä¸ª<strong>ç»“æ„ç©ºé—´</strong>ä¸­çš„â€œä½ç§»/æ‰°åŠ¨â€ï¼›</li>
<li>æ„é€ ä¸ä¿®æ”¹åœ¨å½¢å¼ä¸Šéƒ½æ˜¯å·®é‡ï¼šå…¨é‡æ„é€ å¯ä»¥è§†ä¸ºâ€œä»ç©ºçŠ¶æ€å‡ºå‘çš„ä¸€æ¬¡å¤§ Î”â€ï¼›</li>
<li><code>Y = F(X) âŠ• Î”</code> çš„è¦æ±‚ä¸ä»…æ˜¯â€œç”Ÿæˆ + æ‰‹å·¥è¡¥å……â€ï¼Œè€Œæ˜¯è¦æ±‚ F(X) å’Œ Î” å¤„åœ¨<strong>åŒä¸€ç»“æ„åæ ‡ç³»</strong>ä¸­ï¼Œå¹¶ä¸”è¿™æ¡æ–¹ç¨‹åœ¨åº”ç”¨å±‚ã€DSL å±‚ã€å…ƒæ¨¡å‹å±‚ã€å·¥å…·å±‚ä»¥â€œåˆ†å½¢â€æ–¹å¼å±‚å±‚å¤ç”¨ï¼›</li>
<li>â€œå¯é€†æ€§â€ä¸ä»…æ„å‘³ç€å¯ä»¥ undo æŸæ¬¡ä¿®æ”¹ï¼Œè¿˜æ„å‘³ç€å¯ä»¥åœ¨â€œæ„é€ é€»è¾‘ç©ºé—´â€ä¸­é‡æ’ã€æ’å…¥ã€å›æº¯æ„é€ æ­¥éª¤ï¼Œä»è€Œåœ¨æ¼”åŒ–ä¸­æ§åˆ¶ç†µå¢ï¼›</li>
<li>GRC ä¸æ˜¯è¦å–ä»£ DDDã€MDAã€SPLã€DSL å·¥ç¨‹ï¼Œè€Œæ˜¯å¸Œæœ›ä¸ºå®ƒä»¬æä¾›ä¸€ä¸ªå…±åŒçš„â€œæ•°å­¦æ¯ä½“â€ï¼šç”¨â€œç»“æ„ç©ºé—´ + Î”/âŠ•â€æ¥ç»Ÿä¸€è¡¨è¾¾è¿™äº›æ–¹æ³•è®ºä¸­çš„ç”Ÿæˆã€å˜ä½“å’Œå®šåˆ¶é€»è¾‘ã€‚</li>
</ul>
<p>é€šè¿‡å¯¹è¿™äº›å‰æçš„æ¾„æ¸…ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ¸…æ™°åœ°çœ‹åˆ°ï¼š<br/>
GRC æƒ³è¡¥çš„ï¼Œä¸æ˜¯ä¸€ä¸¤ä¸ªå·¥ç¨‹æŠ€å·§çš„ç¼ºå£ï¼Œè€Œæ˜¯ä¸€æ•´å—â€œå…³äºå˜åŒ–çš„ç§‘å­¦â€çš„ç†è®ºç©ºç™½â€”â€”è®©å·®é‡ Î”ã€åˆå¹¶ âŠ•ã€ç»“æ„ç©ºé—´ä¸å¯é€†æ€§ï¼ŒçœŸæ­£å›åˆ°è½¯ä»¶ç†è®ºçš„ä¸­å¿ƒä½ç½®ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€åŸæ–‡åœ¨è®²â€œå·®é‡ï¼ˆÎ”ï¼‰â€æ—¶ï¼Œå…¶å®æš—å«äº†ä¸€ä¸ªâ€œç»“æ„ç©ºé—´â€çš„æ¦‚å¿µ</h2>
<p>åŸæ–‡ä¸€ç›´åœ¨è®²ï¼š</p>
<ul>
<li>å·®é‡ Î”ï¼›</li>
<li>åˆå¹¶ âŠ•ï¼›</li>
<li>ç¨‹åºæ—ä¸æ¼”åŒ–è·¯å¾„ã€‚</li>
</ul>
<p>å®¹æ˜“é—æ¼çš„æ˜¯ï¼šè¿™äº›æ¦‚å¿µä¸æ˜¯æ‚¬ç©ºå­˜åœ¨çš„ï¼Œå®ƒä»¬æ€»æ˜¯ç›¸å¯¹äºæŸä¸ªâ€œç©ºé—´â€è€Œè¨€ã€‚</p>
<h3 data-id="heading-1">1. ä»€ä¹ˆå«â€œç»“æ„ç©ºé—´â€ï¼Ÿ</h3>
<p>åŸæ–‡åœ¨å¤šä¸ªåœ°æ–¹éšå«åœ°ç”¨äº†è¿™ä¸ªæƒ³æ³•ï¼š</p>
<blockquote>
<p>ä¸€é—¨è¯­è¨€/ä¸€ä¸ªå»ºæ¨¡ä½“ç³»ï¼Œå¹¶ä¸åªæ˜¯ä¸€å †è¯­æ³•è§„åˆ™ï¼Œ<br/>
è€Œæ˜¯å®šä¹‰äº†â€œå®ƒèƒ½ç”Ÿæˆçš„æ‰€æœ‰ç¨‹åº/æ¨¡å‹â€è¿™ä¸€æ•´ç‰‡ç©ºé—´ã€‚</p>
</blockquote>
<p>ä½ å¯ä»¥è¿™ä¹ˆçœ‹ï¼š</p>
<ul>
<li>å¯¹ C è¯­è¨€è€Œè¨€ï¼Œâ€œæ‰€æœ‰åˆæ³• C ç¨‹åºçš„æŠ½è±¡è¯­æ³•æ ‘é›†åˆâ€ï¼Œå°±æ˜¯ä¸€ä¸ªç»“æ„ç©ºé—´ï¼›</li>
<li>å¯¹æŸä¸ª DSLï¼ˆæ¯”å¦‚å·¥ä½œæµ DSLï¼‰è€Œè¨€ï¼Œâ€œæ‰€æœ‰åˆæ³•çš„æµç¨‹å›¾ç»“æ„â€ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªç»“æ„ç©ºé—´ã€‚</li>
</ul>
<p>åŸæ–‡æè®®ï¼š<br/>
å½“æˆ‘ä»¬è°ˆ Î” æ—¶ï¼Œè¦æ˜ç¡®<strong>å®ƒæ˜¯è¿™ç‰‡ç©ºé—´å†…éƒ¨çš„ä¸€ç§â€œä½ç§»/å¾®æ‰°â€</strong>ï¼Œè€Œä¸æ˜¯æ–‡ä»¶ä¸Šçš„æ–‡æœ¬å·®å¼‚ã€‚</p>
<p>æ¢å¥è¯è¯´ï¼š</p>
<ul>
<li>æ–‡æœ¬ diff = æ–‡ä»¶è¡Œçš„å¢åˆ æ”¹ï¼›</li>
<li>ç»“æ„å·®é‡ = åœ¨â€œå¯è§£é‡Šçš„ç¨‹åºç»“æ„ç©ºé—´â€ä¸­æ“ä½œæŸäº›èŠ‚ç‚¹/å…³ç³»ã€‚</li>
</ul>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåŸæ–‡ä¸åœå¼ºè°ƒï¼š</p>
<ul>
<li>ä¸èƒ½åªåœç•™åœ¨ Git diffã€JSON Patch é‚£ç§æ–‡æœ¬/è¯­æ³•å±‚ï¼›</li>
<li>å¿…é¡»åœ¨â€œç¨‹åº/æ¨¡å‹ç»“æ„æœ¬èº«â€çš„å±‚çº§æ¥å®šä¹‰ Î”ã€‚</li>
</ul>
<p>æˆ‘è¿™é‡Œç”¨â€œç»“æ„ç©ºé—´â€è¿™ä¸ªè¯ï¼Œæ˜¯ä¸ºäº†æŠŠè¿™ç‚¹æ˜¾å¼åŒ–ï¼š<br/>
<strong>Î” ä¸€å®šæ˜¯ç›¸å¯¹äºæŸä¸ªç»“æ„åŒ–çš„ç¨‹åºç©ºé—´è€Œè¨€çš„ï¼Œè€Œä¸æ˜¯éšä¾¿å¯¹å­—èŠ‚æ¯”ä¸€æ¯”ã€‚</strong></p>
<hr/>
<h2 data-id="heading-2">äºŒã€â€œä¸€åˆ‡çš†å·®é‡â€èƒŒåï¼Œå…¶å®æ˜¯æƒ³æŠŠâ€œä»é›¶æ„é€ â€å’Œâ€œä¿®æ”¹â€ç»Ÿä¸€èµ·æ¥</h2>
<p>åŸæ–‡æœ‰ä¸€å¥å¾ˆå®¹æ˜“è¢«å½“æˆå“²å­¦æ„Ÿå¹çš„è¯ï¼šâ€œä¸€åˆ‡çš†å·®é‡â€ã€‚<br/>
è¿™å¥è¯å…¶å®æœ‰ä¸€ä¸ªéå¸¸å…·ä½“çš„å·¥ç¨‹å«ä¹‰ï¼š</p>
<h3 data-id="heading-3">1. æŠŠå…¨é‡æ„é€ çœ‹æˆâ€œç›¸å¯¹äºç©ºâ€çš„ä¸€æ¬¡å¤§ Î”</h3>
<p>åœ¨ä»£æ•°é‡Œï¼Œå¦‚æœæœ‰ä¸€ä¸ªâ€œé›¶å…ƒç´  0â€ï¼Œå°±å¯ä»¥å†™ï¼š</p>
<blockquote>
<p>A = 0 âŠ• A</p>
</blockquote>
<p>åŸæ–‡å€Ÿç”¨äº†è¿™ä¸ªæ€è·¯ï¼š</p>
<ul>
<li>ä¸€ä¸ªç³»ç»Ÿä»â€œæ— â€åˆ°â€œæœ‰â€çš„è¿‡ç¨‹ï¼Œå¯ä»¥çœ‹ä½œå¯¹â€œç©ºç³»ç»Ÿâ€åº”ç”¨äº†ä¸€ä¸ªâ€œå¤§å·®é‡â€ï¼›</li>
<li>ä¹‹åçš„æ¯ä¸€æ¬¡ä¿®æ”¹/å®šåˆ¶ï¼Œåˆæ˜¯åœ¨åŸæœ‰çŠ¶æ€ä¸Šå åŠ æ›´å¤š Î”ã€‚</li>
</ul>
<p>è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li><strong>â€œç”Ÿæˆå‡ºæ¥çš„åˆå§‹ç³»ç»Ÿâ€</strong> å’Œ</li>
<li><strong>â€œåé¢é’ˆå¯¹è¿™ä¸ªç³»ç»Ÿåšçš„ä¸€æ¬¡ä¿®æ”¹â€</strong></li>
</ul>
<p>åœ¨å½¢å¼ä¸Šå¯ä»¥ç”¨åŒä¸€ç§ Î”/âŠ• æœºåˆ¶æè¿°ï¼Œåªæ˜¯åŸºåº•ä¸åŒï¼š</p>
<ul>
<li>ä» 0 å åŠ  â†’ â€œæ„é€ å…¨é‡â€ï¼›</li>
<li>ä» Base å åŠ  â†’ â€œåœ¨å·²æœ‰ç³»ç»Ÿä¸Šæ¼”åŒ–â€ã€‚</li>
</ul>
<p>å¾ˆå¤šäººåˆè¯»æ—¶åªæ³¨æ„åˆ°ï¼š<br/>
â€œå“¦ï¼ŒÎ” æ˜¯ç”¨æ¥æè¿°ä¿®æ”¹/å®šåˆ¶çš„â€ï¼Œä½†å®¹æ˜“å¿½ç•¥ï¼š</p>
<blockquote>
<p>åŸæ–‡å…¶å®æ˜¯åœ¨è¯´ï¼š<br/>
<strong>æ„é€  â‰ˆ ä¸€æ¬¡å¤§çš„ Î”ï¼Œ<br/>
æ¼”åŒ– â‰ˆ ç»§ç»­å åŠ  Î”ã€‚</strong></p>
</blockquote>
<p>è¿™æ‰æ˜¯â€œç”Ÿæˆï¼ˆF(Xï¼‰ï¼‰å’Œæ¼”åŒ–ï¼ˆâŠ• Î”ï¼‰å¯ä»¥ç»Ÿä¸€è¿›ä¸€æ¡æ–¹ç¨‹â€çš„æ·±å±‚å«ä¹‰ã€‚</p>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€Y = F(X) âŠ• Î” è¿™æ¡å…¬å¼æœ€å…³é”®çš„ä¸¤ä¸ªâ€œå¼ºè¦æ±‚â€</h2>
<p>å¯¹å¾ˆå¤šäººæ¥è¯´ï¼Œè¿™ä¸ªå…¬å¼å¾ˆç›´è§‚ï¼š</p>
<ul>
<li>ç”¨ F(X) è¡¨ç¤ºâ€œä»æ¨¡å‹ X è‡ªåŠ¨ç”Ÿæˆçš„éƒ¨åˆ†â€ï¼›</li>
<li>ç”¨ Î” è¡¨ç¤ºâ€œæ‰‹å·¥è¡¥å……/ä¿®æ­£çš„éƒ¨åˆ†â€ã€‚</li>
</ul>
<p>ä½†åŸæ–‡çœŸæ­£è‹›åˆ»çš„åœ°æ–¹ä¸åœ¨è¿™ä¸ªåˆ†è§£ï¼Œè€Œåœ¨å®ƒå¯¹ä¸¤ä»¶äº‹æƒ…æå‡ºçš„â€œå¼ºè¦æ±‚â€ï¼š</p>
<h3 data-id="heading-5">1. è¦æ±‚ Î” å’Œ F(X) åœ¨åŒä¸€ä¸ªâ€œåæ ‡ç³»â€é‡Œ</h3>
<p>åŸæ–‡æå‡ºâ€œåæ ‡ç³»â€çš„æ¯”å–»ï¼Œå¾ˆå¤šäººä¼šç†è§£ä¸ºâ€œé¢†åŸŸæ¨¡å‹å°±æ˜¯ä¸€ç§åæ ‡ç³»â€ã€‚<br/>
è¿™é‡Œæœ‰ä¸€ä¸ªéšå«ä½†éå¸¸é‡è¦çš„æ„æ€ï¼š</p>
<blockquote>
<p>ä¸ç®¡æ˜¯ç”Ÿæˆçš„ F(X)ï¼Œè¿˜æ˜¯åç»­å åŠ çš„ Î”ï¼Œ<br/>
éƒ½å¿…é¡»åœ¨åŒä¸€ä¸ªç»“æ„åæ ‡ç³»é‡Œè¡¨è¾¾ã€‚</p>
</blockquote>
<p>ä»€ä¹ˆæ„æ€ï¼Ÿ</p>
<ul>
<li>å¦‚æœ F(X) ç”Ÿæˆçš„æ˜¯æŸç§ç»“æ„åŒ–æ¨¡å‹ï¼ˆä¾‹å¦‚ä¸€æ£µâ€œé¡µé¢ç»„ä»¶æ ‘â€ï¼‰ï¼›</li>
<li>é‚£ Î” ä¹Ÿåº”è¯¥æ˜¯å¯¹è¿™æ£µæ ‘ä¸­å…·ä½“èŠ‚ç‚¹çš„â€œå®šç‚¹ä¿®æ”¹/æ‰©å±•â€ï¼Œè€Œä¸æ˜¯åœ¨ç”Ÿæˆç»“æœä¸Šéšä¾¿å†™è„šæœ¬â€œä¹± patchâ€ã€‚</li>
</ul>
<p>åä¾‹æ˜¯å¸¸è§çš„åšæ³•ï¼š</p>
<ul>
<li>æ¨¡å‹ç”Ÿæˆä¸€å †ä»£ç ï¼›</li>
<li>æ‰‹å·¥æ”¹åŠ¨ç›´æ¥å†™åœ¨ä»£ç ä¸Šï¼›</li>
<li>æ”¹åŠ¨ä¸å†ä»¥â€œæ¨¡å‹ä¸Šçš„å·®é‡â€å­˜åœ¨ï¼Œè€Œæ˜¯å˜æˆå¯¹ç”Ÿæˆäº§ç‰©çš„ä¸å¯è¿½è¸ªä¿®æ”¹ã€‚</li>
</ul>
<p>åŸæ–‡çš„æ€åº¦æ˜¯ï¼š<br/>
<strong>è¿™æ ·çš„ä¿®æ”¹å…¶å®å·²ç»é€ƒå‡ºäº†åŸæ¥çš„ç»“æ„ç©ºé—´ï¼ŒÎ” å¤±å»äº†â€œç»“æ„åæ ‡â€æ„ä¹‰ã€‚</strong></p>
<p>æƒ³çœŸæ­£æ»¡è¶³ Y = F(X) âŠ• Î” çš„â€œç»Ÿä¸€ç²¾ç¥â€ï¼Œå°±æ„å‘³ç€ï¼š</p>
<ul>
<li>Î” å¿…é¡»åœ¨â€œç”Ÿæˆç‰©çš„ç»“æ„ç©ºé—´â€é‡Œæœ‰æ˜ç¡®åæ ‡ï¼ˆç±»ä¼¼â€œåœ¨è¿™ä¸ªç»„ä»¶æ ‘çš„è¿™ä¸ªèŠ‚ç‚¹ä¸Šå¢åŠ è¿™ä¸ªå­èŠ‚ç‚¹â€ï¼‰ï¼›</li>
<li>è€Œä¸æ˜¯â€œåœ¨è¿™ä¸ª .java æ–‡ä»¶ç¬¬ 123 è¡Œæ’å…¥å‡ è¡Œâ€ã€‚</li>
</ul>
<p>è¿™ç‚¹åœ¨åŸæ–‡é‡Œæ²¡æœ‰å…¬å¼åŒ–ï¼Œä½†åŸ‹äº†å¾ˆå¤šé“ºå«ï¼Œå¾ˆå¤šè¯»è€…ä¼šä¸‹æ„è¯†ç•¥è¿‡ã€‚</p>
<h3 data-id="heading-6">2. è¦æ±‚è¿™æ¡å…¬å¼èƒ½åœ¨å¤šå±‚çº§ä¸Šé‡å¤ä½¿ç”¨ï¼ˆåˆ†å½¢é€’å½’ï¼‰</h3>
<p>åŸæ–‡ä¸åªæ˜¯è¯´â€œåœ¨åº”ç”¨å±‚å¯ä»¥å†™å‡º Y = F(X) âŠ• Î”â€ï¼Œè€Œæ˜¯æš—ç¤ºï¼š</p>
<ul>
<li>åœ¨æ¨¡å‹å±‚ä¹Ÿå¯ä»¥ï¼šé¢†åŸŸæ¨¡å‹ = (åŸºç¡€å…ƒæ¨¡å‹) ç»è¿‡æŸä¸ª Fï¼Œå† âŠ• Î”ï¼›</li>
<li>åœ¨ DSL å±‚ä¹Ÿå¯ä»¥ï¼šæŸ DSL = ä»æ›´æŠ½è±¡å…ƒè¯­è¨€ F å‡ºæ¥ï¼Œå† âŠ• Î”ï¼›</li>
<li>åœ¨å·¥å…·å±‚ä¹Ÿå¯ä»¥ï¼šç”Ÿæˆå™¨æœ¬èº« = æŸåŸºç¡€ç”Ÿæˆå™¨ Fâ‚€ï¼ŒåŠ ä¸Š Î”_generator å½¢æˆ Fâ‚ã€‚</li>
</ul>
<p>åŒºåˆ«åœ¨äºï¼š</p>
<ul>
<li>å¾ˆå¤šå·¥ç¨‹å®è·µåªåœ¨æŸä¸€ä¸¤å±‚ç”¨â€œç”Ÿæˆ+æ‰‹æ”¹â€çš„æ¨¡å¼ï¼Œå±€éƒ¨ä½¿ç”¨ç±»ä¼¼æ€è·¯ï¼›</li>
<li>åŸæ–‡å¸Œæœ›çš„æ˜¯ï¼š<strong>æ•´ä¸ªè½¯ä»¶æ„é€ /æ¼”åŒ–é“¾æ¡ï¼Œä»å…ƒæ¨¡å‹åˆ°ä»£ç /é…ç½®ï¼Œéƒ½èƒ½åœ¨åŒä¸€æ¨¡å¼ä¸‹æè¿°ã€‚</strong></li>
</ul>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå®ƒä¼šç”¨â€œåˆ†å½¢â€â€œç»“æ„ç©ºé—´â€â€œè·¯å¾„ç§¯åˆ†â€ç­‰ç‰©ç†/æ•°å­¦æ¯”å–»ï¼š<br/>
å®ƒæƒ³è¦çš„æ˜¯<strong>ä¸€æ¡è´¯é€šå¤šå±‚çš„ç»Ÿä¸€è¡¨è¾¾</strong>ï¼Œä¸åªæ˜¯è¯´â€œåœ¨æŸå¤„å¼•å…¥ Î” æ¯”è¾ƒæ–¹ä¾¿â€ã€‚</p>
<hr/>
<h2 data-id="heading-7">å››ã€â€œå¯é€†æ€§â€ä¸‰å±‚å«ä¹‰é‡Œï¼Œæœ€å®¹æ˜“è¢«å¿½ç•¥çš„æ˜¯â€œè¿‡ç¨‹å¯é€†æ€§â€</h2>
<p>åŸæ–‡æ²¡æœ‰ç³»ç»Ÿåˆ†å±‚å®šä¹‰â€œå¯é€†æ€§â€ï¼Œä½†éšå«äº†ä¸‰ä¸ªå±‚æ¬¡ï¼š</p>
<ol>
<li>
<p><strong>ä»£æ•°å¯é€†æ€§</strong></p>
<ul>
<li>æœ‰ Î” çš„é€†å…ƒ âˆ’Î”ï¼Œå¯ä»¥è¡¨è¾¾â€œæ’¤é”€æŸä¸ªå˜åŒ–â€ï¼Œä½¿å¾— Î” âŠ• (âˆ’Î”) çº¦ç­‰äºâ€œæ— å˜åŒ–â€ã€‚</li>
</ul>
</li>
<li>
<p><strong>å˜æ¢å¯é€†æ€§</strong></p>
<ul>
<li>ç±»ä¼¼åŒå‘å˜æ¢ï¼ˆBXï¼‰ï¼š<br/>
ä»é«˜å±‚æ¨¡å‹åˆ°ä½å±‚è¡¨ç¤ºæœ‰ Fï¼Œä»ä½å±‚è¿”å›é«˜å±‚æœ‰ Fâ»Â¹ï¼›<br/>
å˜æ¢å°½é‡ä¿¡æ¯ä¸ä¸¢å¤±ã€‚</li>
</ul>
</li>
<li>
<p><strong>è¿‡ç¨‹å¯é€†æ€§</strong>ï¼ˆæœ€å®¹æ˜“ä¸€ç¬”å¸¦è¿‡ï¼‰</p>
<ul>
<li>æ„å»ºæµç¨‹é€šå¸¸è¢«è§†ä¸ºï¼šå…ˆæœ‰åº“ï¼Œå†æ„å»ºåº”ç”¨ï¼›å…ˆæœ‰ v1ï¼Œå†æ¼”åŒ–å‡º v2ã€‚</li>
<li>åŸæ–‡åœ¨è®²â€œç”¨æœªæ¥çš„ Î” ä¿®æ­£å†å²äº§ç‰©â€æ—¶ï¼Œå…¶å®åœ¨é‡æ–°ç†è§£è¿™ä¸ªæ—¶é—´é¡ºåºï¼š
<ul>
<li>ä½ ä¸ä¸€å®šè¦ä¿®æ”¹åº“æºç ï¼›</li>
<li>å¯ä»¥åœ¨â€œåæ¥â€çš„ä¸€ä¸ªåœ°æ–¹å®šä¹‰ Î”ï¼Œè®©è¿è¡Œæ—¶æˆ–é‡æ„æ—¶â€œå‘åä½œç”¨â€äºå·²å­˜åœ¨çš„ä¸œè¥¿ï¼›</li>
<li>åœ¨é€»è¾‘æ„é€ ç©ºé—´é‡Œï¼Œç›¸å½“äºæŠŠè¿™æ­¥ Î” æ’å…¥åˆ°äº†æ›´æ—©çš„ä½ç½®ã€‚</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>è¿™ç¬¬ä¸‰å±‚çš„æ„æ€æ˜¯ï¼š</p>
<blockquote>
<p>æˆ‘ä»¬å¹³æ—¶æŠŠæ„é€ è§†ä¸ºä¸¥æ ¼å•å‘çš„æ—¶é—´çº¿ï¼Œ<br/>
GRC ä¸»å¼ åœ¨â€œæ„é€ é€»è¾‘ç©ºé—´â€é‡Œï¼Œè¿™æ¡çº¿å¯ä»¥è¢«é‡æ’ã€å¯é€†ã€å¯æ’å…¥ã€‚</p>
</blockquote>
<p>å·¥ç¨‹ä¸Šå¯¹åº”çš„å½¢æ€åŒ…æ‹¬ï¼š</p>
<ul>
<li>å¯¹ç¬¬ä¸‰æ–¹åº“åšâ€œéä¾µå…¥å¼å®šåˆ¶/ä¿®å¤â€ï¼Œå´è¿˜ä¿ç•™ä½“ç³»ç»“æ„ä¸Šçš„å¯è¿½è¸ªå’Œå¯æ’¤é”€ï¼›</li>
<li>å¯¹å·²å‘å¸ƒç³»ç»Ÿåšâ€œçƒ­ä¿®å¤â€ï¼Œå…¶é€»è¾‘å¯è¢«å½’å…¥ç»Ÿä¸€çš„ Î”/âŠ• æ¨¡å‹ä¸­ï¼Œè€Œä¸æ˜¯æŸç§â€œç‰¹æ®Šæ‰‹æ®µâ€ã€‚</li>
</ul>
<p>å¾ˆå¤šäººçœ‹åˆ°â€œå¯é€†è®¡ç®—â€å®¹æ˜“æƒ³åˆ°çš„åªæ˜¯â€œèƒ½ä¸èƒ½ undoâ€ï¼Œè€Œå¿½ç•¥äº†è¿™ä¸€å±‚â€œé‡æ–°ç¼–æ’æ„é€ è¿‡ç¨‹â€çš„å«ä¹‰ã€‚</p>
<hr/>
<h2 data-id="heading-8">äº”ã€æ–‡ç« å¯¹ç°æœ‰ç†è®ºçš„æ‰¹è¯„ï¼Œå…¶å®æ˜¯åœ¨â€œæ‹‰é«˜åº¦â€ï¼Œè€Œä¸æ˜¯â€œå¦å®šå…¶ä»·å€¼â€</h2>
<p>åŸæ–‡å¯¹ç±»å‹è®ºã€å½¢å¼æ–¹æ³•ã€èŒƒç•´è®ºåœ¨ PL ä¸­çš„ç”¨æ³•æå‡ºäº†ä¸å°‘æ‰¹è¯„ã€‚åˆçœ‹ä¼šæœ‰ä¸€ç§â€œä½ æ˜¯ä¸æ˜¯è¿‡äºçœ‹è½»è¿™äº›é¢†åŸŸâ€çš„æ„Ÿè§‰ã€‚ä½†å¦‚æœç»“åˆå…¨æ–‡é€»è¾‘ï¼Œå¯ä»¥è¿™æ ·æ›´å‡†ç¡®ç†è§£ï¼š</p>
<ol>
<li>å®ƒä¸å¦è®¤ç°æœ‰æˆæœåœ¨â€œå•ç¨‹åºé™æ€æ€§è´¨â€ä¸Šçš„æˆåŠŸï¼›</li>
<li>å®ƒæŒ‡å‡ºçš„æ˜¯ï¼š<strong>åœ¨â€œç¨‹åºæ— + æ¼”åŒ–â€ç»´åº¦ä¸Šï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰ç±»ä¼¼ç±»å‹è®ºé‚£æ ·æˆç†Ÿçš„ç»Ÿä¸€ä¸»å¹²ã€‚</strong></li>
<li>å®ƒæ‰¹è¯„çš„é‡ç‚¹ä¸æ˜¯â€œç°åœ¨åšçš„é”™äº†â€ï¼Œè€Œæ˜¯â€œæˆ‘ä»¬åˆ°ç›®å‰ä¸ºæ­¢ï¼Œé‡å¿ƒé€‰åœ¨äº†ä¸€ä¸ªåé™æ€çš„åˆ‡é¢ä¸Šï¼Œè€Œå¦ä¸€ä¸ªç»´åº¦è¿˜æ²¡æœ‰è¢«å½“æˆâ€˜ä¸­å¿ƒä»»åŠ¡â€™ã€‚â€</li>
</ol>
<p>æ¢å¥è¯è¯´ï¼Œæ–‡ç« æƒ³ä¼ è¾¾çš„å¹¶ä¸æ˜¯ï¼š</p>
<blockquote>
<p>ä½ ä»¬ç ”ç©¶ç±»å‹/å½¢å¼æ–¹æ³•éƒ½é”™äº†ï¼Œåº”è¯¥æ¥æ GRCã€‚</p>
</blockquote>
<p>è€Œæ›´æ¥è¿‘ï¼š</p>
<blockquote>
<p>é™æ€å®‰å…¨è¿™å—åŸºç¡€å·²ç»å¾ˆç‰¢äº†ï¼Œ<br/>
ä½†â€œå˜åŒ–/æ¼”åŒ–â€çš„åŸºç¡€ç†è®ºè¿˜æ²¡ç«‹èµ·æ¥ï¼Œ<br/>
GRC æ˜¯ä¸€ä¸ªå°è¯•åœ¨è¿™ä¸ªç©ºç™½å¤„ç«‹æ–°æŸ±å­çš„æ–¹å‘ã€‚</p>
</blockquote>
<p>è¿™ä¸€ç‚¹å¦‚æœæ²¡æœ‰æ„è¯†åˆ°ï¼Œå¾ˆå®¹æ˜“è¯¯è§£ä¸ºä¸€ç§â€œæ—§å±±ä¸å¦‚æ–°å±±â€çš„å§¿æ€ã€‚å®é™…ä¸Šï¼Œå®ƒå¸Œæœ›çš„æ˜¯<strong>å¤šä¸€åº§â€œå…³äºå˜åŒ–â€çš„å±±</strong>ï¼Œè€Œä¸æ˜¯è¦æŠŠåŸæœ‰é‚£åº§æ¨å€’ã€‚</p>
<hr/>
<h2 data-id="heading-9">å…­ã€åŸæ–‡å’Œ DDD/MDA/SPL çš„å…³ç³»ï¼šGRC ä¸æ˜¯æ¥â€œå–ä»£â€å®ƒä»¬ï¼Œè€Œæ˜¯è¦ç»™å®ƒä»¬ä¸€ä¸ªç»Ÿä¸€çš„â€œæ•°å­¦æ¯ä½“â€</h2>
<p>åŸæ–‡å¤šæ¬¡æåˆ°ï¼š</p>
<ul>
<li>æ¨¡å‹é©±åŠ¨ï¼ˆMDA/MDDï¼‰ï¼›</li>
<li>è½¯ä»¶äº§å“çº¿ï¼ˆSPLï¼‰ï¼›</li>
<li>é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDDDï¼‰ï¼›</li>
<li>DSL å·¥ç¨‹ã€‚</li>
</ul>
<p>å®¹æ˜“å‡ºç°çš„è¯¯è¯»æ˜¯ï¼š</p>
<ul>
<li>GRC æ˜¯ä¸€å¥—â€œæ›´å¥½çš„ MDE/SPL/DDDâ€ï¼›</li>
<li>æ—§çš„æ–¹æ³•è®ºä¸å¤Ÿå¥½ï¼Œç°åœ¨è¦æ¢ç”¨ GRCã€‚</li>
</ul>
<p>æ›´å‡†ç¡®çš„ç†è§£æ˜¯ï¼š</p>
<ul>
<li>MDA/MDD ä¸»è¦å…³æ³¨ä»æ¨¡å‹åˆ°å®ç°çš„<strong>ä¸€æ¬¡æ€§ç”Ÿæˆ</strong>ï¼›</li>
<li>SPL å…³æ³¨çš„æ˜¯äº§å“æ—çš„<strong>ç‰¹æ€§ç»„åˆ</strong>ï¼›</li>
<li>DDD å…³æ³¨çš„æ˜¯å¦‚ä½•åœ¨ä¸šåŠ¡é¢†åŸŸå»ºç«‹å¥½çš„<strong>è¯­è¨€ä¸æ¨¡å‹è¾¹ç•Œ</strong>ï¼›</li>
<li>GRC æƒ³åšçš„æ˜¯ï¼š<strong>æŠŠè¿™äº›ä¸œè¥¿éƒ½æ”¾è¿›åŒä¸€ä¸ªâ€œç»“æ„ç©ºé—´ + Î”/âŠ•â€çš„ç»Ÿä¸€æ¡†æ¶ä¸­æ¥è§£é‡Š</strong>ã€‚</li>
</ul>
<p>ä¸¾ä¾‹ï¼š</p>
<ul>
<li>
<p>MDAï¼šä¼ ç»Ÿæ˜¯ <code>App = Transform(Model)</code>ï¼›<br/>
GRC è§†è§’ä¸‹æ˜¯ <code>App = F(Model) âŠ• Î”</code>ï¼Œè¿ç§»äº†â€œç”Ÿæˆåæ‰‹æ”¹â€çš„é‚£å—åˆ° Î” ä¸­ã€‚</p>
</li>
<li>
<p>SPLï¼šä¸€èˆ¬è°ˆ feature ç»„åˆã€å˜ä½“ï¼›<br/>
GRC è§†è§’ä¸‹æ˜¯ <code>Variant = Base âŠ• Î”_feature âŠ• Î”_customer âŠ• â€¦</code>ï¼Œç‰¹æ€§/å®¢æˆ·å®šåˆ¶éƒ½æˆä¸ºå·®é‡å±‚ã€‚</p>
</li>
<li>
<p>DDDï¼šè°ˆé™ç•Œä¸Šä¸‹æ–‡ã€é¢†åŸŸäº‹ä»¶ï¼›<br/>
GRC è§†è§’ä¸‹ï¼Œé™ç•Œä¸Šä¸‹æ–‡å¯ä»¥ç†è§£ä¸ºä¸åŒçš„ç»“æ„å­ç©ºé—´ï¼Œé¢†åŸŸäº‹ä»¶åˆ™æ˜¯çŠ¶æ€ç©ºé—´ä¸Šçš„ Î”ï¼š</p>
<p><code>NewState = OldState âŠ• EventÎ”</code></p>
</li>
</ul>
<p>æ‰€ä»¥ï¼Œæ›´åˆé€‚çš„æ¯”å–»æ˜¯ï¼š</p>
<blockquote>
<p>GRC å¸Œæœ›å½“â€œæ¯è¯­è¨€â€ï¼Œ<br/>
ç”¨åŒä¸€å¥— Î”/âŠ• ç»“æ„å»è¡¨è¾¾ MDA/SPL/DDD/DSL ç­‰å·²æœ‰æ–¹æ³•è®ºçš„æ„é€ å’Œæ¼”åŒ–é€»è¾‘ï¼Œ<br/>
è€Œä¸æ˜¯è¦å‘æ˜ä¸€å¥—ä¸å®ƒä»¬ç«äº‰çš„â€œæ–°æ–¹æ³•è®ºâ€ã€‚</p>
</blockquote>
<h2 data-id="heading-10">ä¸ƒã€å¦‚æœè¯»å®ŒåŸæ–‡è¿˜è§‰å¾—æ¨¡ç³Šï¼Œå¯ä»¥ç”¨ä¸€ä¸ªç®€åŒ–å›¾æ™¯æ¥å¸®åŠ©ç†è§£</h2>
<p>æŠŠåŸæ–‡çš„ä¸»è¦æ€æƒ³å‹ç¼©æˆä¸€ä¸ªç®€å•çš„æ¯”å–»ï¼š</p>
<ol>
<li>
<p><strong>å…ˆæƒ³è±¡ä¸€å¼ åœ°å›¾ï¼ˆç»“æ„ç©ºé—´ï¼‰</strong></p>
<ul>
<li>è¿™å¼ åœ°å›¾ä¸Šæ¯ä¸ªç‚¹éƒ½æ˜¯ä¸€ä¸ªç³»ç»Ÿç‰ˆæœ¬/æ¨¡å‹ç‰ˆæœ¬ï¼›</li>
<li>é è¿‘çš„ç‚¹è¡¨ç¤ºç»“æ„ç›¸ä¼¼ã€‚</li>
</ul>
</li>
<li>
<p><strong>å·®é‡ Î” å°±æ˜¯ä»ä¸€ä¸ªç‚¹åˆ°å¦ä¸€ä¸ªç‚¹çš„â€œçŸ¢é‡â€</strong></p>
<ul>
<li>ä¸€æ¬¡ä¿®å¤ã€ä¸€æ¬¡å®šåˆ¶ã€ä¸€æ¬¡è¿ç§»ï¼Œéƒ½æ˜¯ä¸€ä¸ªç®­å¤´ Î”ï¼›</li>
<li>å¤šæ¬¡å˜åŒ–å°±æ˜¯ Î”1, Î”2, â€¦ çš„æ¥åŠ›ã€‚</li>
</ul>
</li>
<li>
<p><strong>åˆå¹¶ âŠ• æ˜¯ç®­å¤´çš„â€œä¸²è”â€è¿ç®—</strong></p>
<ul>
<li>Î”1 âŠ• Î”2 è¡¨ç¤ºå…ˆèµ° Î”1 å†èµ° Î”2ï¼›</li>
<li>å¸Œæœ›å®ƒæ»¡è¶³å°é—­æ€§ã€ç»“åˆå¾‹ç­‰è‰¯å¥½æ€§è´¨ã€‚</li>
</ul>
</li>
<li>
<p><strong>Y = F(X) âŠ• Î” è¡¨ç¤ºï¼šä»æŸä¸ªæ¨¡å‹ X å‡ºå‘ï¼Œå…ˆèµ°ä¸€æ®µç”±ç”Ÿæˆå™¨ F è‡ªåŠ¨ç”»å‡ºçš„è·¯å¾„ï¼Œå†åŠ ä¸Šäººå·¥ç”»çš„é‚£æ®µ Î”</strong></p>
</li>
<li>
<p><strong>å¯é€†æ€§æ˜¯è¯´ï¼šå°½é‡è®©ç®­å¤´å¯ä»¥åå‘èµ°ï¼Œæˆ–è€…è‡³å°‘ææ¸…æ¥šâ€œèƒ½èµ°å›å¤´è·¯çš„æ˜¯å“ªå‡ ç±»ç®­å¤´â€</strong></p>
</li>
<li>
<p><strong>åŸæ–‡çš„æ‰¹è¯„æ˜¯ï¼šæˆ‘ä»¬åœ¨ç ”ç©¶â€œåœ°å›¾ä¸Šçš„æŸä¸€ä¸ªç‚¹ï¼ˆç¨‹åº Pï¼‰æ€§è´¨æˆ–è€…ç‰¹å®šä¸¤ç‚¹ä¹‹é—´çš„è½¬æ¢â€ä¸Šå·²ç»å¾ˆå¼ºï¼Œä½†å¯¹æ•´ä¸ªåœ°å›¾çš„å½¢çŠ¶ã€ç®­å¤´çš„ç»„åˆä¸å¯é€†æ€§è´¨ï¼Œæ²¡æœ‰ä¸€é—¨çœŸæ­£ç³»ç»Ÿçš„ç†è®ºï¼›GRC æ˜¯åœ¨æå‡ºè¿™æ ·ä¸€é—¨ç†è®ºçš„åˆæ­¥è½®å»“ã€‚</strong></p>
</li>
</ol>
<p>æ›´è¿›ä¸€æ­¥:</p>
<ol start="7">
<li><strong>è½¯ä»¶ä¸–ç•Œæ˜¯ä¸€æœ¬â€œåŠ¨æ€åœ°å›¾é›†ï¼ˆAtlasï¼‰â€ï¼Œè€Œéå•ä¸€åœ°å›¾</strong></li>
</ol>
<ul>
<li>ç°å®ä¸­çš„å¤æ‚è½¯ä»¶ç³»ç»Ÿæ— æ³•ç”¨å•ä¸€è§†å›¾å®Œæ•´æè¿°ï¼Œå°±åƒçœŸå®ä¸–ç•Œæ— æ³•ç”¨ä¸€å¼ åœ°å›¾å‘ˆç°æ‰€æœ‰ä¿¡æ¯ã€‚</li>
<li>æ¯ä¸ª <strong>DSL</strong>ï¼ˆé¢†åŸŸç‰¹å®šè¯­è¨€ï¼‰å°±æ˜¯ä¸€æœ¬ä¸“é¢˜åœ°å›¾ï¼š
<ul>
<li><strong>æ•°æ®åº“Schemaå›¾</strong>ï¼ˆæ•°æ®æ¨¡å‹ç©ºé—´ï¼‰</li>
<li><strong>ä¸šåŠ¡æµç¨‹å›¾</strong>ï¼ˆå·¥ä½œæµç©ºé—´ï¼‰</li>
<li><strong>UIç»„ä»¶æ ‘</strong>ï¼ˆç•Œé¢ç©ºé—´ï¼‰</li>
<li><strong>éƒ¨ç½²æ‹“æ‰‘å›¾</strong>ï¼ˆåŸºç¡€è®¾æ–½ç©ºé—´ï¼‰</li>
</ul>
</li>
<li>è¿™äº›åœ°å›¾å…±åŒæ„æˆäº†ä¸€æœ¬<strong>åœ°å›¾é›†</strong>ï¼Œæ¯ä¸ªè§†å›¾éƒ½æ˜¯åŒä¸€ç°å®åœ¨ä¸åŒå…³æ³¨ç‚¹/ä¸åŒæŠ½è±¡åˆ‡é¢çš„æŠ•å½±ã€‚</li>
</ul>
<ol start="8">
<li><strong>Generatorï¼ˆFï¼‰æ˜¯åœ°å›¾åˆ¶å›¾å­¦ä¸­çš„â€œæŠ•å½±å˜æ¢è§„åˆ™â€</strong></li>
</ol>
<ul>
<li>åœ°è´¨å­¦å®¶é€šè¿‡æµ‹é‡æ•°æ®ï¼Œ<strong>æŒ‰ç…§æŠ•å½±è§„åˆ™</strong>ç”Ÿæˆå¯è§†åŒ–çš„åœ°è´¨å›¾ã€‚</li>
<li>åŒæ ·ï¼Œ<strong>Generator</strong> æ˜¯é¢†åŸŸæ¨¡å‹ç©ºé—´åˆ°å…·ä½“å®ç°ç©ºé—´çš„æ˜ å°„è§„åˆ™ï¼š
<ul>
<li><code>F_orm</code>ï¼šé¢†åŸŸæ¨¡å‹ â†’ æ•°æ®åº“Schema</li>
<li><code>F_api</code>ï¼šé¢†åŸŸæ¨¡å‹ â†’ APIæ¥å£è§„èŒƒ</li>
<li><code>F_ui</code>ï¼šä¸šåŠ¡å¯¹è±¡ â†’ ç•Œé¢ç»„ä»¶æ ‘</li>
</ul>
</li>
<li>æ¯ä¸ªGeneratorå®šä¹‰äº†ä¸¤ä¸ªç»“æ„ç©ºé—´ä¹‹é—´çš„<strong>å¯è®¡ç®—æ˜ å°„å…³ç³»</strong>ã€‚</li>
</ul>
<ol start="9">
<li><strong>å·®é‡Î”æ˜¯åœ°å›¾ä¸Šçš„â€œç»“æ„åŒ–ç¼–è¾‘å›¾å±‚â€</strong></li>
</ol>
<ul>
<li>åœ¨ä¼ ç»ŸGISä¸­ï¼Œä½ ä¸èƒ½ç›´æ¥åœ¨å°åˆ·åœ°å›¾ä¸Šä¿®æ”¹æ²³æµèµ°å‘ã€‚</li>
<li>ä½†åœ¨ç°ä»£æ•°å­—åœ°å›¾ç³»ç»Ÿä¸­ï¼Œæ‰€æœ‰ä¿®æ”¹éƒ½æ˜¯<strong>åˆ†å±‚çš„</strong>ï¼š
<ul>
<li><strong>åŸºåº•å›¾å±‚</strong>ï¼šç”±Generatorä»æ ¸å¿ƒæ¨¡å‹è‡ªåŠ¨ç”Ÿæˆçš„â€œæ ‡å‡†åœ°å›¾â€</li>
<li><strong>å·®é‡å›¾å±‚ï¼ˆÎ”ï¼‰</strong>ï¼šæœ¬åœ°åŒ–çš„ä¿®æ­£ã€å®¢æˆ·ç‰¹å®šçš„è¦†ç›–ã€ç´§æ€¥ä¿®å¤</li>
</ul>
</li>
<li><strong>å…³é”®åŒºåˆ«</strong>ï¼šÎ”ä¸æ˜¯éšæ„æ¶‚æ”¹ï¼Œè€Œæ˜¯åœ¨<strong>åŒä¸€åæ ‡ç³»</strong>ä¸­çš„ç²¾ç¡®æ ‡è®°ï¼š
<blockquote>
<p>â€œåœ¨åæ ‡(ä¸šåŠ¡å¯¹è±¡.è®¢å•.çŠ¶æ€)å¤„å¢åŠ â€˜å·²å¤æ ¸â€™çŠ¶æ€â€
è€Œä¸æ˜¯â€œåœ¨Order.javaç¬¬123è¡Œæ’å…¥ä»£ç â€</p>
</blockquote>
</li>
</ul>
<ol start="10">
<li><strong>å¯é€†æ€§ï¼šåœ°å›¾é›†çš„â€œåŒæ­¥æ›´æ–°æœºåˆ¶â€</strong>
çœŸæ­£çš„æŒ‘æˆ˜åœ¨äºå¤šåœ°å›¾ååŒï¼š</li>
</ol>
<ul>
<li><strong>ä»£æ•°å¯é€†æ€§</strong>ï¼šå¦‚æœåœ¨åœ°è´¨å›¾ä¸Šæ ‡è®°â€œæ­¤å¤„å®é™…ä¸ºæ²‰ç§¯å²©è€ŒéèŠ±å²—å²©â€ï¼ˆ+Î”ï¼‰ï¼Œåº”è¯¥èƒ½æ’¤é”€æ­¤æ ‡è®°ï¼ˆ-Î”ï¼‰</li>
<li><strong>å˜æ¢å¯é€†æ€§</strong>ï¼šä»åœ°è´¨æ•°æ®åˆ°åœ°è´¨å›¾çš„æŠ•å½±ï¼ˆFï¼‰ï¼Œæœ€å¥½èƒ½åå‘ä»åœ°å›¾ä¿®æ”¹å›æ•°æ®ï¼ˆFâ»Â¹ï¼‰</li>
<li><strong>è¿‡ç¨‹å¯é€†æ€§</strong>ï¼šå½“äº¤é€šå›¾ä¸ŠæŸæ¡é“è·¯è¢«å°é—­ï¼ˆÎ”_trafficï¼‰ï¼Œè¿™ä¸ªå˜åŒ–å¯ä»¥è¢«<strong>åå‘ä¼ æ’­</strong>ï¼š
<ul>
<li>è‡ªåŠ¨æé†’åœ°è´¨å›¾ï¼šâ€œæ­¤å¤„å¯èƒ½æœ‰åœ°è´¨å‹˜æ¢å—å½±å“â€</li>
<li>è‡ªåŠ¨æ›´æ–°è¡Œæ”¿åŒºåˆ’å›¾ï¼šâ€œæ­¤å¤„è¾¹ç•Œé€šè¡Œè§„åˆ™éœ€è°ƒæ•´â€</li>
<li>è€Œä¸æ˜¯è®©å„åœ°å›¾ç»´æŠ¤è€…æ‰‹åŠ¨å‘ç°å’ŒåŒæ­¥</li>
</ul>
</li>
</ul>
<blockquote>
<p>â€œå“ªäº›å˜åŒ–éœ€è¦è‡ªåŠ¨ä¼ æ’­ã€ä¼ æ’­åˆ°å“ªå‡ å¼ åœ°å›¾â€æ˜¯å…·ä½“å·¥ç¨‹è®¾è®¡çš„é—®é¢˜ï¼Œä¸æ˜¯ GRC åœ¨ç†è®ºå±‚é¢ç›´æ¥å¼ºåˆ¶çš„ã€‚</p>
</blockquote>
<p>è¿™ä¸‰ç§å¯é€†æ€§å…±åŒæ„æˆäº†GRCæ§åˆ¶â€˜ç†µå¢â€™çš„æœºåˆ¶ï¼šä»£æ•°å¯é€†ç¡®ä¿ä¿®æ”¹å¯æ’¤é”€ï¼ˆå±€éƒ¨ç†µä¸å˜ï¼‰ï¼Œå˜æ¢å¯é€†åŠ›æ±‚åœ¨è¡¨è±¡ä¹‹é—´ä¿æŒä¿¡æ¯å®ˆæ’ï¼ˆè·¨è§†å›¾ç†µä¸å˜ï¼‰ï¼Œè¿‡ç¨‹å¯é€†åˆ™å…è®¸é‡æ„æ¼”åŒ–è·¯å¾„ï¼ˆå…¨å±€ç†µå¯æ§ï¼‰ã€‚</p>
<ol start="12">
<li><strong>Y = F(X) âŠ• Î” åœ¨åœ°å›¾é›†ä¸­çš„å¤šå±‚å«ä¹‰</strong>
è¿™ä¸ªå…¬å¼åœ¨ä¸åŒå±‚çº§é€’å½’å‡ºç°ï¼š</li>
</ol>






























<table><thead><tr><th>å±‚çº§</th><th>å…¬å¼</th><th>åœ°å›¾é›†æ¯”å–»</th></tr></thead><tbody><tr><td><strong>åº”ç”¨å±‚</strong></td><td>App = F_app(DomainModel) âŠ• Î”_custom</td><td>æœ€ç»ˆç”¨æˆ·çœ‹åˆ°çš„â€œç»¼åˆåœ°å›¾â€ = ï¼ˆæ ‡å‡†æŠ•å½± + æœ¬åœ°è¦†ç›–å±‚ï¼‰</td></tr><tr><td><strong>æ¨¡å‹å±‚</strong></td><td>DSL = F_dsl(MetaModel) âŠ• Î”_dsl</td><td>â€œäº¤é€šå›¾è§„èŒƒâ€ = ï¼ˆæ ‡å‡†åˆ¶å›¾è§„åˆ™ + æœ¬åœ°å›¾ä¾‹æ‰©å±•ï¼‰</td></tr><tr><td><strong>å…ƒæ¨¡å‹å±‚</strong></td><td>MetaModel' = MetaModel âŠ• Î”_meta</td><td>â€œæ•´ä¸ªåœ°å›¾é›†çš„åæ ‡åŸºå‡†â€è‡ªèº«çš„æ¼”è¿›</td></tr><tr><td><strong>å·¥å…·å±‚</strong></td><td>Generator' = Generator âŠ• Î”_gen</td><td>â€œæŠ•å½±è§„åˆ™â€æœ¬èº«ä¹Ÿå¯ä»¥ç‰ˆæœ¬åŒ–å’Œå®šåˆ¶</td></tr></tbody></table>
<p>å¦‚æœè¯»è€…å¸¦ç€è¿™ä¸ªå›¾æ™¯ï¼Œå†å›å¤´çœ‹åŸæ–‡ä¸­å…³äºâ€œç»“æ„ç©ºé—´â€ã€â€œåæ ‡ç³»â€ã€â€œå¯é€†æ€§â€ã€â€œåˆ†å½¢é€’å½’â€ç­‰æ¦‚å¿µï¼Œä»¥åŠå®ƒå¯¹ç±»å‹è®ºã€èŒƒç•´è®ºå½“å‰ç”¨æ³•çš„æ‰¹è¯„ï¼Œå°±ä¼šæ›´åŠ é€å½»â€”â€”GRCæ˜¯åœ¨å‘¼åå°†è½¯ä»¶ç ”ç©¶çš„é‡å¿ƒï¼Œä»â€œå•ä¸ªç¨‹åºçš„é™æ€å¿«ç…§â€ï¼Œæ‰©å±•åˆ°â€œæ•´ä¸ªç¨‹åºæ—åœ¨å¤šç©ºé—´ååŒä¸‹çš„åŠ¨æ€æ¼”åŒ–è½¨è¿¹ä»¥åŠè¿™äº›è½¨è¿¹æ‰€æ„æˆçš„ç©ºé—´æ•´ä½“â€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚æœæˆ‘é—®ä½  Contextï¼Œä½ æ‰›å¾—ä½å—ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7582039917217988608</link>    <guid>https://juejin.cn/post/7582039917217988608</guid>    <pubDate>2025-12-11T00:29:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582039917217988608" data-draft-id="7577284771447685160" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚æœæˆ‘é—®ä½  Contextï¼Œä½ æ‰›å¾—ä½å—ï¼Ÿ"/> <meta itemprop="keywords" content="Android,Kotlin"/> <meta itemprop="datePublished" content="2025-12-11T00:29:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RockByte"/> <meta itemprop="url" content="https://juejin.cn/user/1046390797768519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚æœæˆ‘é—®ä½  Contextï¼Œä½ æ‰›å¾—ä½å—ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1046390797768519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RockByte
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T00:29:49.000Z" title="Thu Dec 11 2025 00:29:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;color:#282d36}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px;color:#2f845e}.markdown-body h2{font-size:22px;display:inline-block;font-weight:700;background:#2f845e;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(47,132,194,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 32px);border-bottom:3px solid #2f845e}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%;box-shadow:6px 6px 6px #888}.markdown-body hr{border:none;border-top:1px solid rgba(66,185,131,.15);margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:16px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#262626;border:1px solid #2f845e;border-top:8px solid #2f845e;background:linear-gradient(180deg,rgba(66,185,131,.1),transparent)!important}.markdown-body pre&gt;code.hljs[lang]:before{top:8px!important;color:#2f845e!important}.markdown-body pre&gt;code.language-awesome_error{border:1px solid #ff4d4f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ff4d4f!important;background:#fff2f0!important}.markdown-body pre&gt;code.language-awesome_error:before{content:"!"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ff4d4f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_warn{border:1px solid #ffc46f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ffc46f!important;background:#fffbe6!important}.markdown-body pre&gt;code.language-awesome_warn:before{content:"â˜‚"!important;position:absolute;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ffc46f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_success{border:1px solid #52c41a!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#52c41a!important;background:#f6ffed!important}.markdown-body pre&gt;code.language-awesome_success:before{content:"âœ“"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#52c41a!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_info{border:1px solid #1890ff!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#1890ff!important;background:#e6f7ff!important}.markdown-body pre&gt;code.language-awesome_info:before{content:"i"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#1890ff!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body strong{background-color:inherit;color:#2f845e}.markdown-body em{background-color:inherit;color:#949415}.markdown-body a{text-decoration:none;color:#2f8e54;border-bottom:1px solid #3f9e64}.markdown-body a:active,.markdown-body a:hover{color:#3f9e64}.markdown-body a[class^=footnote]{margin-left:4px}.markdown-body a:before{content:"â¤ "}.markdown-body table{font-size:12px;width:100%;max-width:100%;overflow:auto;border:2px solid #2f8e54}.markdown-body thead{background:#2f8e54;color:#fff;text-align:left;font-weight:700}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:22px}.markdown-body td{min-width:120px}.markdown-body blockquote{padding:1px 22px;margin:22px 0;border-left:6px solid #2f845e;background-color:rgba(66,185,131,.1);border-radius:2px}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#2f845e}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px;color:#282d36}.markdown-body del{color:#2f845e}.markdown-body input[type=checkbox]:checked:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA/klEQVQ4T72TMU7DQBBF318XdFR06egQEnAXRINEGlqgowoIR8AF4AZOZ4JEGq5AC5EixBU4A55BNrEVHAcSBTHlaubt37/zxZKlcn7n6mDPXJvz8IJ89HzWu8t7C8D2dfsY52ae4apHnLx0ktsCsHXZjiUuFgG40x2eJ/H/AhztB+zDUTpLwWj8jGkzxSHiHaMPrDQC8sMoilKzLAUqiKQjmb+ZuAdW80tmelCHODoNgSfP7AFprTTaRTzsJN1GEyuIZ7uW6TEEHwCtyV/6EVBKJHhfzgC0Xv/iXwEFBF4FG0378bd7sPQq5xK/hSnk6sdlX3mZrKkwLZKBeu8n9XuWEUE7X+YAAAAASUVORK5CYII=);position:relative;top:-1px;left:-1px}.markdown-body .math .katex{font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}@media (max-width:720px){.markdown-body h1{font-size:22px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="xcode">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#000}.xml .hljs-meta{color:silver}.hljs-comment,.hljs-quote{color:#007400}.hljs-attribute,.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-tag{color:#aa0d91}.hljs-template-variable,.hljs-variable{color:#3f6e74}.hljs-code,.hljs-meta-string,.hljs-string{color:#c41a16}.hljs-link,.hljs-regexp{color:#0e0eff}.hljs-bullet,.hljs-number,.hljs-symbol,.hljs-title{color:#1c00cf}.hljs-meta,.hljs-section{color:#643820}.hljs-built_in,.hljs-builtin-name,.hljs-class .hljs-title,.hljs-params,.hljs-type{color:#5c2699}.hljs-attr{color:#836c28}.hljs-subst{color:#000}.hljs-formula{background-color:#eee;font-style:italic}.hljs-addition{background-color:#baeeba}.hljs-deletion{background-color:#ffc8bd}.hljs-selector-class,.hljs-selector-id{color:#9b703f}.hljs-doctag,.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}</style><p><em>æœ¬ç³»åˆ—ä¸ºå°è¯´ã€Šé€†è¢­è¥¿äºŒæ——ã€‹çš„æŠ€æœ¯è®²è§£ï¼Œç”¨äºè¯¦ç»†è¯´æ˜<a href="https://juejin.cn/post/7581348660824506368" target="_blank" title="https://juejin.cn/post/7581348660824506368">å‰§æƒ…</a>é‡Œæ¶‰åŠçš„å¼€å‘ç»†èŠ‚ã€‚</em></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f1b5f6096214ccf89f001ee015b88b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766017789&amp;x-signature=3%2FBmrHIGgXFGVwT2TftDraD7vEI%3D" alt="0.jpg" loading="lazy"/></p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ Contextï¼ŒContext æœ‰å“ªäº›ç±»å‹</h2>
<p><code>Context</code> ä»£è¡¨åº”ç”¨ç¨‹åºçš„ç¯å¢ƒæˆ–çŠ¶æ€ï¼Œæä¾›å¯¹åº”ç”¨ä¸“å±èµ„æºå’Œç±»çš„è®¿é—®ã€‚å®ƒå……å½“åº”ç”¨ä¸ Android ç³»ç»Ÿä¹‹é—´çš„æ¡¥æ¢ï¼Œè®©ç»„ä»¶èƒ½å¤Ÿè®¿é—®èµ„æºã€æ•°æ®åº“ã€ç³»ç»ŸæœåŠ¡ç­‰ã€‚åœ¨æ‰§è¡Œè¯¸å¦‚å¯åŠ¨ <code>Activity</code>ã€è¯»å– <code>assets</code> æ–‡ä»¶æˆ–åŠ è½½å¸ƒå±€ç­‰ä»»åŠ¡æ—¶ï¼Œ<code>Context</code> è‡³å…³é‡è¦ã€‚</p>
<p>Android ä¸­æœ‰å¤šç§ç±»å‹çš„ <code>Context</code>ã€‚</p>
<h3 data-id="heading-1">é¢è¯•é—®é¢˜</h3>
<p>åœ¨ Android åº”ç”¨ä¸­ï¼Œä¸ºä½•ä½¿ç”¨æ­£ç¡®çš„ <code>Context</code> ç±»å‹è‡³å…³é‡è¦ï¼Ÿ<br/>
æŒæœ‰ <code>Activit Context</code> çš„é•¿ç”Ÿå‘½å‘¨æœŸå¼•ç”¨åˆå¯èƒ½å¸¦æ¥å“ªäº›é£é™©ï¼Ÿ</p>
<h3 data-id="heading-2">Application Context</h3>
<p><code>Application Context</code> ä¸æ•´ä¸ªåº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸç»‘å®šã€‚å½“ä½ éœ€è¦ä¸€ä¸ªå…¨å±€ã€é•¿ç”Ÿå‘½å‘¨æœŸä¸”ç‹¬ç«‹äºå½“å‰ <code>Activity</code> æˆ– <code>Fragment</code> çš„ <code>Context</code> æ—¶ï¼Œå°±åº”ä½¿ç”¨å®ƒã€‚å¯é€šè¿‡è°ƒç”¨ <code>getApplicationContext()</code> è·å–ã€‚</p>
<p>é€‚ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>è®¿é—®å…¨å±€èµ„æºï¼Œå¦‚ <code>SharedPreferences</code> æˆ–æ•°æ®åº“ï¼›</li>
<li>æ³¨å†Œéœ€è´¯ç©¿æ•´ä¸ªåº”ç”¨ç”Ÿå‘½å‘¨æœŸçš„å¹¿æ’­æ¥æ”¶å™¨ï¼›</li>
<li>åˆå§‹åŒ–åœ¨æ•´ä¸ªåº”ç”¨ç”Ÿå‘½å‘¨æœŸå†…æŒç»­å­˜åœ¨çš„åº“æˆ–ç»„ä»¶ã€‚</li>
</ul>
<h3 data-id="heading-3">Activity Context</h3>
<p><code>Activity Context</code>ï¼ˆå³ <code>Activity</code> ä¸­çš„ <code>this</code>ï¼‰ä¸ <code>Activity</code> çš„ç”Ÿå‘½å‘¨æœŸç»‘å®šï¼Œç”¨äºè®¿é—®èµ„æºã€å¯åŠ¨å…¶ä»– <code>Activity</code>ï¼Œæˆ–åŠ è½½è¯¥ <code>Activity</code> ç‰¹æœ‰çš„å¸ƒå±€ã€‚</p>
<p>é€‚ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>åˆ›å»ºæˆ–ä¿®æ”¹ UI ç»„ä»¶ï¼›</li>
<li>å¯åŠ¨å¦ä¸€ä¸ª <code>Activity</code>ï¼›</li>
<li>è®¿é—®é™å®šäºå½“å‰ <code>Activity</code> çš„èµ„æºæˆ–ä¸»é¢˜ã€‚</li>
</ul>
<h3 data-id="heading-4">Service Context</h3>
<p><code>Service Context</code> ä¸ <code>Service</code> çš„ç”Ÿå‘½å‘¨æœŸç»‘å®šï¼Œä¸»è¦ç”¨äºåå°ä»»åŠ¡ï¼Œä¾‹å¦‚æ‰§è¡Œç½‘ç»œè¯·æ±‚æˆ–æ’­æ”¾éŸ³ä¹ã€‚å®ƒå¯è®¿é—® <code>Service</code> æ‰€éœ€çš„ç³»ç»Ÿçº§æœåŠ¡ã€‚</p>
<h3 data-id="heading-5">Broadcast Context</h3>
<p><code>Broadcast Context</code> åœ¨ <code>BroadcastReceiver</code> è¢«è°ƒç”¨æ—¶æä¾›ã€‚å®ƒçš„ç”Ÿå‘½å‘¨æœŸå¾ˆçŸ­ï¼Œé€šå¸¸ä»…ç”¨äºå“åº”ç‰¹å®šå¹¿æ’­äº‹ä»¶ã€‚<strong>åˆ‡å‹¿åœ¨æ­¤ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œè€—æ—¶æ“ä½œã€‚</strong></p>
<h3 data-id="heading-6">Context çš„å¸¸è§ä½¿ç”¨åœºæ™¯</h3>
<ol>
<li><strong>è®¿é—®èµ„æº</strong>ï¼šé€šè¿‡ <code>getString()</code>ã€<code>getDrawable()</code> ç­‰æ–¹æ³•ï¼Œ<code>Context</code> å¯ç”¨äºè·å–å­—ç¬¦ä¸²ã€å›¾ç‰‡ã€å°ºå¯¸ç­‰èµ„æºã€‚</li>
<li><strong>åŠ è½½å¸ƒå±€</strong>ï¼šä½¿ç”¨ <code>Context</code> é€šè¿‡ <code>LayoutInflater</code> å°† XML å¸ƒå±€æ–‡ä»¶è½¬æ¢ä¸º <code>View</code> å¯¹è±¡ã€‚</li>
<li><strong>å¯åŠ¨ Activity å’Œ Service</strong>ï¼šè°ƒç”¨ <code>startActivity()</code> æˆ– <code>startService()</code> æ—¶å¿…é¡»ä¼ å…¥ <code>Context</code>ã€‚</li>
<li><strong>è®¿é—®ç³»ç»ŸæœåŠ¡</strong>ï¼šé€šè¿‡ <code>getSystemService()</code>ï¼Œ<code>Context</code> èƒ½è·å–å¦‚ <code>ClipboardManager</code>ã€<code>ConnectivityManager</code> ç­‰ç³»ç»Ÿçº§æœåŠ¡ã€‚</li>
<li><strong>æ•°æ®åº“ä¸ <code>SharedPreferences</code> æ“ä½œ</strong>ï¼š<code>Context</code> ç”¨äºè®¿é—® <strong>SQLite</strong> æ•°æ®åº“æˆ– <code>SharedPreferences</code> ç­‰æŒä¹…åŒ–å­˜å‚¨æœºåˆ¶ã€‚</li>
</ol>
<h3 data-id="heading-7">æ€»ç»“</h3>
<p><code>Context</code> æ˜¯ Android ä¸­çš„æ ¸å¿ƒç»„ä»¶ï¼Œä½¿åº”ç”¨èƒ½å¤Ÿä¸ç³»ç»Ÿèµ„æºè¿›è¡Œäº¤äº’ã€‚Android æä¾›äº†å¤šç§ <code>Context</code> ç±»å‹ï¼Œå¦‚ <code>Application Context</code>ã€<code>Activity Context</code> å’Œ <code>Service Context</code>ï¼Œå„è‡ªé€‚ç”¨äºä¸åŒåœºæ™¯ã€‚æ­£ç¡®ä½¿ç”¨ <code>Context</code> ä¸ä»…èƒ½é«˜æ•ˆç®¡ç†èµ„æºï¼Œè¿˜èƒ½é¿å…å†…å­˜æ³„æ¼å’Œå´©æºƒã€‚å› æ­¤ï¼ŒåŠ¡å¿…æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©åˆé€‚çš„ <code>Context</code>ï¼Œå¹¶é¿å…ä¸å¿…è¦çš„é•¿æœŸæŒæœ‰ã€‚</p>
<h3 data-id="heading-8">è¿›é˜¶ï¼šä½¿ç”¨ Context æ—¶è¦æ³¨æ„ä»€ä¹ˆ</h3>
<p><code>Context</code> æ˜¯ Android ä¸­ä¸€ç§ä¾¿æ·çš„æœºåˆ¶ï¼Œä½†ä½¿ç”¨ä¸å½“ä¼šå¼•å‘ä¸¥é‡é—®é¢˜ï¼Œæ¯”å¦‚å†…å­˜æ³„æ¼ã€å´©æºƒï¼Œæˆ–è€…èµ„æºå¤„ç†æ•ˆç‡ä½ä¸‹ã€‚ä¸ºé¿å…è¿™äº›é™·é˜±ï¼ŒåŠ¡å¿…äº†è§£å…¶ç»†å¾®å·®åˆ«ä»¥åŠæœ‰æ•ˆä½¿ç”¨ <code>Context</code> çš„æœ€ä½³å®è·µã€‚</p>
<p>æœ€å¸¸è§çš„é—®é¢˜ä¹‹ä¸€ï¼Œæ˜¯åœ¨ <code>Activity</code> æˆ– <code>Fragment</code> ç­‰ <code>Context</code> çš„ç”Ÿå‘½å‘¨æœŸä¹‹å¤–ï¼Œä»ç„¶ä¿ç•™å¯¹å®ƒä»¬çš„å¼•ç”¨ã€‚è¿™ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œå› ä¸ºåƒåœ¾å›æ”¶å™¨æ— æ³•å›æ”¶è¯¥ <code>Context</code> åŠå…¶ç›¸å…³èµ„æºæ‰€å ç”¨çš„å†…å­˜ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„ç¤ºä¾‹ä»£ç å¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">object</span> Singleton {
    <span class="hljs-keyword">var</span> context: Context? = <span class="hljs-literal">null</span> <span class="hljs-comment">// If this retains the Activity context, causing a memory leak</span>
}
</code></pre>
<p>ç›¸åï¼Œå¯¹äºéœ€è¦ <code>Context</code> çš„é•¿ç”Ÿå‘½å‘¨æœŸå¯¹è±¡ï¼Œåº”ä½¿ç”¨ <code>Application Context</code>ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">object</span> Singleton {
    <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> applicationContext: Context
}
</code></pre>
<p>å› æ­¤ï¼Œä½¿ç”¨åˆé€‚ç±»å‹çš„ <code>Context</code> è‡³å…³é‡è¦ã€‚ä¸åŒç±»å‹çš„ <code>Context</code> ç”¨é€”å„å¼‚ï¼Œç”¨é”™ç±»å‹å¯èƒ½å¯¼è‡´æ„å¤–è¡Œä¸ºï¼š</p>
<ul>
<li>æ‰§è¡Œä¸ç•Œé¢ï¼ˆUIï¼‰ç›¸å…³çš„ä»»åŠ¡ï¼Œå¦‚åŠ è½½å¸ƒå±€æˆ–æ˜¾ç¤ºå¯¹è¯æ¡†æ—¶ï¼Œä½¿ç”¨ <code>Activity Context</code>ã€‚</li>
<li>è¿›è¡Œä¸ UI ç”Ÿå‘½å‘¨æœŸæ— å…³çš„æ“ä½œï¼Œå¦‚åˆå§‹åŒ–åº“æ—¶ï¼Œä½¿ç”¨ <code>Application Context</code>ã€‚</li>
</ul>
<p>ä¸‹é¢çš„ç¤ºä¾‹å±•ç¤ºäº†è¯¯ç”¨ <code>Application Context</code> çš„æƒ…å†µï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">val</span> dialog = AlertDialog.Builder(context.getApplicationContext()) <span class="hljs-comment">// Incorrect</span>
</code></pre>
<p>åº”ä½¿ç”¨ <code>Activity Context</code> ä»¥ç¡®ä¿æ­£ç¡®çš„ä¸»é¢˜è®¾ç½®ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">val</span> dialog = AlertDialog.Builder(activityContext) <span class="hljs-comment">// Correct</span>
</code></pre>
<p>å¦ä¸€ä¸ªå…³é”®è€ƒé‡ç‚¹æ˜¯ï¼Œå½“å…³è”ç»„ä»¶ï¼ˆå¦‚ <code>Activity</code> æˆ– <code>Fragment</code>ï¼‰è¢«é”€æ¯åï¼Œè¦é¿å…ä½¿ç”¨ <code>Context</code>ã€‚è®¿é—®ä¸å·²é”€æ¯ç»„ä»¶ç»‘å®šçš„ <code>Context</code>ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç¨‹åºå´©æºƒæˆ–å‡ºç°æœªå®šä¹‰è¡Œä¸ºï¼Œå› ä¸ºä¸è¯¥ <code>Context</code> å…³è”çš„èµ„æºå¯èƒ½å·²ä¸å¤å­˜åœ¨ã€‚</p>
<p>ä¸‹é¢çš„ç¤ºä¾‹å±•ç¤ºäº†å¯¹ <code>Context</code> çš„è¯¯ç”¨ï¼Œå…¶ä¸­è‡ªå®šä¹‰è§†å›¾çš„åˆ›å»ºæ–¹å¼ä¸å½“ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin">activity.finish() <span class="hljs-comment">// The activity is destroyed</span>
<span class="hljs-keyword">val</span> text = TextView(activity) <span class="hljs-comment">// but the TextView retains a reference</span>
</code></pre>
<p><em>å¦‚æœåœ¨ <code>activity</code> é”€æ¯åä¾ç„¶ä½¿ç”¨ <code>text</code>ï¼Œæ˜¯éå¸¸å±é™©çš„è¡Œä¸ºï¼ˆä¾‹å¦‚ <code>activity</code> é”€æ¯åï¼Œæ‰è¯·æ±‚åˆ°æ•°æ®ï¼Œç„¶åæ›´æ–° <code>text</code> çš„æ˜¾ç¤ºï¼‰ã€‚</em></p>
<p>é¿å…åœ¨åå°çº¿ç¨‹ä½¿ç”¨ <code>Context</code>ã€‚</p>
<p><code>Context</code> æ˜¯ä¸ºä¸»çº¿ç¨‹è®¾è®¡çš„ï¼Œå°¤å…¶é€‚ç”¨äºè®¿é—®èµ„æºæˆ–ä¸ç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰äº¤äº’ã€‚åœ¨åå°çº¿ç¨‹ä½¿ç”¨å®ƒå¯èƒ½ä¼šå¯¼è‡´æ„å¤–å´©æºƒæˆ–çº¿ç¨‹é—®é¢˜ã€‚åœ¨ä¸ UI ç›¸å…³çš„ <code>Context</code> èµ„æºäº¤äº’å‰ï¼Œéœ€åˆ‡æ¢å›ä¸»çº¿ç¨‹ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin">viewModelScope.launch {
    <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span> = fetchData()
    withContext(Dispatchers.Main) {
        Toast.makeText(context, &amp;#<span class="hljs-number">34</span>;Data fetched&amp;#<span class="hljs-number">34</span>;, Toast.LENGTH_SHORT).show()
    }
}
</code></pre>
<p>æ€»ä¹‹ã€‚</p>
<p>è¦æœ‰æ•ˆä½¿ç”¨ <code>Context</code>ï¼Œéœ€è°¨æ…è€ƒé‡ï¼Œè§„é¿å¸¸è§é™·é˜±ã€‚ä¸åº”åœ¨ <code>Activity</code> æˆ– <code>Fragment</code> çš„ç”Ÿå‘½å‘¨æœŸç»“æŸåä»ä¿ç•™å…¶ <code>Context</code>ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ã€‚é’ˆå¯¹ç‰¹å®šä»»åŠ¡ï¼ŒåŠ¡å¿…é€‰æ‹©æ­£ç¡®ç±»å‹çš„ <code>Context</code>ï¼Œé¿å…åœ¨åå°çº¿ç¨‹ï¼Œæˆ–å…³è”ç»„ä»¶é”€æ¯åä½¿ç”¨å®ƒã€‚æ­¤å¤–ï¼Œä½¿ç”¨åŒ¿åå†…éƒ¨ç±»å’Œå›è°ƒæ—¶è¦å°å¿ƒï¼Œå®ƒä»¬å¯èƒ½ä¼šä¸ç»æ„é—´æŒæœ‰å¯¹ <code>Context</code> çš„å¼•ç”¨ã€‚æ­£ç¡®ç®¡ç† <code>Context</code> èƒ½ç¡®ä¿é«˜æ•ˆåˆ©ç”¨èµ„æºï¼Œæœ‰åŠ©äºé˜²æ­¢å†…å­˜æ³„æ¼æˆ–åº”ç”¨ç¨‹åºå´©æºƒã€‚</p>
<h3 data-id="heading-9">è¿›é˜¶ï¼šContextWrapper</h3>
<p><code>ContextWrapper</code> æ˜¯ Android ä¸­çš„ä¸€ä¸ªåŸºç±»ï¼Œå®ƒå…·å¤‡åŒ…è£… <code>Context</code> å¯¹è±¡çš„èƒ½åŠ›ï¼Œå°†è°ƒç”¨å§”æ‰˜ç»™è¢«åŒ…è£…çš„ <code>Context</code>ã€‚å®ƒå……å½“ä¸­é—´å±‚ï¼Œç”¨äºä¿®æ”¹æˆ–æ‰©å±•åŸå§‹ <code>Context</code> çš„è¡Œä¸ºã€‚é€šè¿‡ä½¿ç”¨ <code>ContextWrapper</code>ï¼Œä½ å¯ä»¥åœ¨ä¸æ”¹å˜åº•å±‚ <code>Context</code> çš„æƒ…å†µä¸‹å®šåˆ¶åŠŸèƒ½ã€‚</p>
<p>å½“ä½ éœ€è¦å¢å¼ºæˆ–è¦†ç›–ç°æœ‰ <code>Context</code> çš„ç‰¹å®šè¡Œä¸ºæ—¶ï¼Œå°±ä¼šç”¨åˆ° <code>ContextWrapper</code>ã€‚å®ƒå…è®¸ä½ æ‹¦æˆªå¯¹åŸå§‹ <code>Context</code> çš„è°ƒç”¨ï¼Œå¹¶æä¾›é¢å¤–åŠŸèƒ½æˆ–å®šåˆ¶åŒ–è¡Œä¸ºã€‚</p>
<p>ä»¥ <code>Activity</code> çš„ç»§æ‰¿å…³ç³»ä¸ºä¾‹ï¼š<code>Activity</code> -&gt; <code>ContextThemeWrapper</code> -&gt; <code>ContextWrapper</code>ã€‚</p>
<p>è€Œ <code>ContextWrapper</code> æºç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ContextWrapper</span> <span class="hljs-title">extends</span> <span class="hljs-title">Context</span> {
    <span class="hljs-meta">@UnsupportedAppUsage</span>
    Context mBase;
    ...
}
</code></pre>
<p>ä½¿ç”¨åœºæ™¯ï¼š</p>
<ol>
<li><strong>è‡ªå®šä¹‰ <code>Context</code></strong>ï¼šå½“ä½ å‡ºäºç‰¹å®šç›®çš„éœ€è¦åˆ›å»ºè‡ªå®šä¹‰ <code>Context</code> æ—¶ï¼Œä¾‹å¦‚åº”ç”¨ä¸åŒçš„ä¸»é¢˜ï¼Œæˆ–ä»¥ç‰¹å®šæ–¹å¼å¤„ç†èµ„æºã€‚</li>
<li><strong>åŠ¨æ€èµ„æºå¤„ç†</strong>ï¼šåŒ…è£… <code>Context</code> ä»¥åŠ¨æ€æä¾›æˆ–ä¿®æ”¹è¯¸å¦‚å­—ç¬¦ä¸²ã€å°ºå¯¸æˆ–æ ·å¼ç­‰èµ„æºã€‚</li>
<li><strong>ä¾èµ–æ³¨å…¥</strong>ï¼šåƒ <strong>Dagger</strong> å’Œ <strong>Hilt</strong> è¿™æ ·çš„åº“ä¼šåˆ›å»º <code>ContextWrapper</code>ï¼Œä»¥ä¾¿å°†è‡ªå®šä¹‰ <code>Context</code> é™„åŠ åˆ°ç»„ä»¶ä¸Šè¿›è¡Œä¾èµ–æ³¨å…¥ã€‚</li>
</ol>
<p>ä¸‹é¢çš„ä»£ç å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ <code>ContextWrapper</code> æ¥åº”ç”¨è‡ªå®šä¹‰ä¸»é¢˜ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomThemeContextWrapper</span>(base: Context) : ContextWrapper(base) {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getTheme</span><span class="hljs-params">()</span></span>: Resources.Theme {
        <span class="hljs-keyword">val</span> theme = <span class="hljs-keyword">super</span>.getTheme()
        theme.applyStyle(R.style.CustomTheme, <span class="hljs-literal">true</span>) <span class="hljs-comment">// Apply a custom theme</span>
        <span class="hljs-keyword">return</span> theme
    }
}
</code></pre>
<p>ä½ å¯ä»¥åœ¨ <code>Activity</code> ä¸­ä½¿ç”¨è¿™ä¸ªè‡ªå®šä¹‰åŒ…è£…å™¨ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">attachBaseContext</span><span class="hljs-params">(newBase: <span class="hljs-type">Context</span>)</span></span> {
        <span class="hljs-keyword">super</span>.attachBaseContext(CustomThemeContextWrapper(newBase))
    }
}
</code></pre>
<p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œ<code>CustomThemeContextWrapper</code> ä¸º <code>Activity</code> åº”ç”¨äº†ç‰¹å®šä¸»é¢˜ï¼Œè¦†ç›–äº†åŸºç¡€ä¸Šä¸‹æ–‡çš„é»˜è®¤è¡Œä¸ºã€‚</p>
<p>è¿™æ ·åšæœ‰å¾ˆå¤šå¥½å¤„ï¼š</p>
<ul>
<li><strong>å¯å¤ç”¨æ€§</strong>ï¼šä½ èƒ½å°†è‡ªå®šä¹‰é€»è¾‘å°è£…åœ¨åŒ…è£…å™¨ç±»ä¸­ï¼Œå¹¶åœ¨å¤šä¸ªç»„ä»¶é—´å¤ç”¨ã€‚</li>
<li><strong>å°è£…æ€§</strong>ï¼šå¢å¼ºæˆ–ä¿®æ”¹è¡Œä¸ºçš„åŒæ—¶ï¼Œæ— éœ€æ›´æ”¹åŸå§‹ <code>Context</code> çš„å®ç°ã€‚</li>
<li><strong>å…¼å®¹æ€§</strong>ï¼šä¸ç°æœ‰ <code>Context</code> å¯¹è±¡æ— ç¼åä½œï¼Œä¿æŒå‘åå…¼å®¹æ€§ã€‚</li>
</ul>
<p>æ€»ä¹‹ã€‚</p>
<p><code>ContextWrapper</code> æ˜¯ Android ä¸­ç”¨äºå®šåˆ¶ <code>Context</code> è¡Œä¸ºçš„çµæ´»ä¸”å¯å¤ç”¨çš„å·¥å…·ã€‚å®ƒä½¿å¼€å‘è€…èƒ½å¤Ÿæ‹¦æˆªå¹¶ä¿®æ”¹å¯¹åŸå§‹ <code>Context</code> çš„è°ƒç”¨ï¼Œè€Œæ— éœ€ç›´æ¥æ›´æ”¹å®ƒï¼Œè¿™ä½¿å…¶æˆä¸ºæ„å»ºæ¨¡å—åŒ–ä¸”é€‚åº”æ€§å¼ºçš„åº”ç”¨ç¨‹åºå¿…ä¸å¯å°‘çš„ç±»ã€‚</p>
<h3 data-id="heading-10">è¿›é˜¶ï¼šActivity ä¸­çš„ baseContext æ˜¯ä»€ä¹ˆ</h3>
<p>åœ¨ <code>Activity</code> ä¸­ï¼Œ<code>this</code> å’Œ <code>baseContext</code> éƒ½èƒ½ç”¨äºè®¿é—® <code>Context</code>ï¼Œä½†å®ƒä»¬ç”¨é€”ä¸åŒï¼Œä»£è¡¨ç€ Android ä¸Šä¸‹æ–‡å±‚çº§ç»“æ„ä¸­çš„ä¸åŒå±‚æ¬¡ã€‚æ¸…æ¥šä½•æ—¶ä½¿ç”¨å®ƒä»¬ï¼Œå¯¹é¿å…ä»£ç æ··æ·†æˆ–æ½œåœ¨é—®é¢˜è‡³å…³é‡è¦ã€‚</p>
<p>åœ¨ <code>Activity</code> ä¸­ï¼Œå…³é”®å­— <code>this</code> æŒ‡çš„æ˜¯ <code>Activity</code> ç±»çš„å½“å‰å®ä¾‹ã€‚ç”±äº <code>Activity</code> æ˜¯ <code>ContextWrapper</code> çš„å­ç±»ï¼ˆå› è€Œé—´æ¥æ˜¯ <code>Context</code> çš„å­ç±»ï¼‰ï¼Œ<code>this</code> æä¾›äº†å¯¹ <code>Activity</code> ç‰¹å®šä¸Šä¸‹æ–‡çš„è®¿é—®ï¼ŒåŒ…æ‹¬è¯¸å¦‚ç”Ÿå‘½å‘¨æœŸç®¡ç†ä»¥åŠä¸ç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰äº¤äº’ç­‰é¢å¤–åŠŸèƒ½ã€‚</p>
<p>å½“åœ¨ <code>Activity</code> ä¸­ä½¿ç”¨ <code>this</code> æ—¶ï¼Œå®ƒé€šå¸¸æŒ‡å‘ <code>Activity</code> çš„å½“å‰ä¸Šä¸‹æ–‡ï¼Œå…è®¸ä½ è°ƒç”¨ç‰¹å®šäºè¯¥ <code>Activity</code> çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ éœ€è¦å¯åŠ¨å¦ä¸€ä¸ª <code>Activity</code> æˆ–æ˜¾ç¤ºä¸è¿™ä¸ªç‰¹å®š <code>Activity</code> ç›¸å…³è”çš„å¯¹è¯æ¡†ï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>this</code>ã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">val</span> intent = Intent(<span class="hljs-keyword">this</span>, AnotherActivity::<span class="hljs-keyword">class</span>.java)
startActivity(intent)

<span class="hljs-keyword">val</span> dialog = AlertDialog.Builder(<span class="hljs-keyword">this</span>)
    .setTitle(&amp;#<span class="hljs-number">34</span>;Example&amp;#<span class="hljs-number">34</span>;)
    .setMessage(&amp;#<span class="hljs-number">34</span>;This dialog <span class="hljs-keyword">is</span> tied to <span class="hljs-keyword">this</span> Activity instance.&amp;#<span class="hljs-number">34</span>;)
    .show()
</code></pre>
<p><code>baseContext</code> ä»£è¡¨ <code>Activity</code> æ‰€åŸºäºçš„åŸºç¡€ä¸Šä¸‹æ–‡ã€‚å®ƒæ˜¯ <code>ContextWrapper</code> ç±»çš„ä¸€éƒ¨åˆ†ï¼Œè€Œ <code>Activity</code> ç»§æ‰¿è‡ª <code>ContextWrapper</code>ã€‚<code>baseContext</code> é€šå¸¸æ˜¯ <code>ContextImpl</code> å®ä¾‹ï¼Œä¸º <code>Context</code> æ–¹æ³•æä¾›æ ¸å¿ƒå®ç°ã€‚</p>
<p><code>baseContext</code> ä¸€èˆ¬é€šè¿‡ <code>getBaseContext()</code> æ–¹æ³•æ¥è®¿é—®ã€‚ä½ å¾ˆå°‘ç›´æ¥ä½¿ç”¨å®ƒï¼Œä½†åœ¨å¤„ç†è‡ªå®šä¹‰ <code>ContextWrapper</code> å®ç°ï¼Œæˆ–è€…éœ€è¦å¼•ç”¨è¢«åŒ…è£…ä¸Šä¸‹æ–‡èƒŒåçš„åŸå§‹ä¸Šä¸‹æ–‡æ—¶ï¼Œå®ƒå°±ä¼šæ´¾ä¸Šç”¨åœºã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-comment">// å’Œç›´æ¥é€šè¿‡ this è¿”å›çš„ç›¸æ¯”ï¼Œæ­¤å¤„çš„ baseContext ä¸æºå¸¦å½“å‰ Activity çš„ä¸»é¢˜ä¿¡æ¯</span>
<span class="hljs-keyword">val</span> systemService = baseContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE)
</code></pre>
<p>æ€»ç»“ä¸€ä¸‹ä»–ä»¬ä¹‹é—´çš„åŒºåˆ«ï¼š</p>
<ol>
<li><strong>ä½œç”¨åŸŸ</strong>ï¼š<code>this</code> ä»£è¡¨å½“å‰çš„ <code>Activity</code> å®ä¾‹åŠå…¶ç”Ÿå‘½å‘¨æœŸï¼Œè€Œ <code>baseContext</code> æŒ‡çš„æ˜¯ <code>Activity</code> æ„å»ºæ‰€åŸºäºçš„æ›´ä½å±‚æ¬¡çš„ä¸Šä¸‹æ–‡ã€‚</li>
<li><strong>ç”¨æ³•</strong>ï¼š<code>this</code> é€šå¸¸ç”¨äºä¸ <code>Activity</code> ç”Ÿå‘½å‘¨æœŸæˆ–ç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰ç›¸å…³çš„æ“ä½œï¼Œä¾‹å¦‚å¯åŠ¨ <code>Activity</code> æˆ–æ˜¾ç¤ºå¯¹è¯æ¡†ã€‚<code>baseContext</code> ä¸€èˆ¬åœ¨ä¸ <code>Context</code> çš„æ ¸å¿ƒå®ç°è¿›è¡Œäº¤äº’æ—¶ä½¿ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨è‡ªå®šä¹‰ <code>ContextWrapper</code> çš„åœºæ™¯ä¸­ã€‚</li>
<li><strong>å±‚çº§å…³ç³»</strong>ï¼š<code>baseContext</code> æ˜¯ <code>Activity</code> çš„åŸºç¡€ä¸Šä¸‹æ–‡ã€‚è®¿é—® <code>baseContext</code> ä¼šç»•è¿‡ <code>Activity</code> ä½œä¸º <code>ContextWrapper</code> æ‰€æä¾›çš„é¢å¤–åŠŸèƒ½ã€‚</li>
</ol>
<p>æ€»ä¹‹ã€‚</p>
<p>åœ¨ <code>Activity</code> ä¸­ï¼Œ<code>this</code> æŒ‡å‘å½“å‰çš„ <code>Activity</code> å®ä¾‹ï¼Œæä¾›äº†å…·æœ‰ç”Ÿå‘½å‘¨æœŸå’Œç‰¹å®šäºç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰åŠŸèƒ½çš„é«˜çº§ä¸Šä¸‹æ–‡ã€‚è€Œ <code>baseContext</code> ä»£è¡¨ <code>Activity</code> æ‰€åŸºäºçš„åŸºç¡€ä¸Šä¸‹æ–‡ï¼Œå¸¸ç”¨äºè¯¸å¦‚è‡ªå®šä¹‰ <code>ContextWrapper</code> å®ç°ç­‰é«˜çº§åœºæ™¯ã€‚è™½ç„¶åœ¨ Android å¼€å‘ä¸­ <code>this</code> ä½¿ç”¨æœ€ä¸ºæ™®éï¼Œä½†ç†è§£ <code>baseContext</code> æœ‰åŠ©äºè°ƒè¯•ä»¥åŠåˆ›å»ºæ¨¡å—åŒ–ã€å¯å¤ç”¨çš„ç»„ä»¶ã€‚</p>
<h2 data-id="heading-11">ç•ªå¤–</h2>
<p>æœ¬æ–‡è®²è¿°çš„æŠ€æœ¯ç»†èŠ‚å®Œå…¨æ˜¯åŸºäºé¢è¯•ä¸‹çš„ï¼Œå¦‚æœä½ æƒ³å¯¹ <code>Context</code> æœ‰ä¸ªæ›´åŠ å®Œæ•´çš„è®¤è¯†ï¼Œè¯·çœ‹ä¸‹é¢ä¸¤ç¯‡æ–‡ç« ï¼š</p>
<p><a href="https://juejin.cn/post/7531888045412663348" target="_blank" title="https://juejin.cn/post/7531888045412663348">æ†‹äº†ä¸€å‘¨äº†ï¼Œ12000å­—æ·±å…¥æµ…å‡ºAndroidçš„Contextæœºåˆ¶</a></p>
<p><a href="https://juejin.cn/post/7527953491890274319" target="_blank" title="https://juejin.cn/post/7527953491890274319">2025å¹´äº†ï¼Œä¸‡å­—é•¿æ–‡å¸¦ä½ äº†è§£Context</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¥–ä¼ é¡¹ç›®äºŒå¼€å¿«ä¸Šçº¿äº†ï¼Œå´è¿˜æœ‰å¾ˆå¤šæ—§çš„èµ„æºï¼Œæ€ä¹ˆåŠï¼Ÿ]]></title>    <link>https://juejin.cn/post/7582047554090254345</link>    <guid>https://juejin.cn/post/7582047554090254345</guid>    <pubDate>2025-12-11T00:49:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582047554090254345" data-draft-id="7582047554090221577" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¥–ä¼ é¡¹ç›®äºŒå¼€å¿«ä¸Šçº¿äº†ï¼Œå´è¿˜æœ‰å¾ˆå¤šæ—§çš„èµ„æºï¼Œæ€ä¹ˆåŠï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-11T00:49:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¿å…ƒç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/1972988307323236"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¥–ä¼ é¡¹ç›®äºŒå¼€å¿«ä¸Šçº¿äº†ï¼Œå´è¿˜æœ‰å¾ˆå¤šæ—§çš„èµ„æºï¼Œæ€ä¹ˆåŠï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972988307323236/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¿å…ƒç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T00:49:20.000Z" title="Thu Dec 11 2025 00:49:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç‚¹å‡»ä¸Šæ–¹äº¿å…ƒç¨‹åºå‘˜+å…³æ³¨å’Œâ˜…æ˜Ÿæ ‡</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d37f61c1b0a24fdc9d8f8cabe7af6a1e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018959&amp;x-signature=1gTzZRzeppWCybmhWQHR47JHzCs%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p><strong>å“ˆå–½å¤§å®¶å¥½</strong>ï¼Œæ¬¢è¿å°ä¼™ä¼´æä¾›çš„ç´ æï¼š</p>
<blockquote>
<p><strong>äº¿å“¥</strong>æ™šä¸Šå¥½ï¼Œä¸Šæ¬¡å‹ç¼©äº†<code>PNG</code>å›¾ç‰‡åï¼Œå›¾ç‰‡èµ„æºè¿˜æ˜¯éå¸¸å¤§ã€‚</p>
<p><strong>ä»”ç»†</strong>ç ”ç©¶äº†ä¸€ä¸‹ï¼Œå‘ç°é¡¹ç›®é‡Œé¢å±…ç„¶è¿˜æœ‰å¾ˆå¤šæ²¡ç”¨åˆ°çš„ç¥–ä¼ èµ„æºï¼</p>
<p><strong>æ¸¸æˆå¿«è¦ä¸Šçº¿äº†ï¼Œé¡¹ç›®é‡Œå´è¿˜æœ‰å¾ˆå¤šæ—§çš„èµ„æºï¼Œæ€ä¹ˆåŠï¼Ÿ</strong></p>
</blockquote>
<p><strong>é€šå¸¸</strong>è¿™æ ·çš„æƒ…å†µå‡ºç°äºé¡¹ç›®çš„äºŒæ¬¡å¼€å‘é˜¶æ®µæˆ–è€…ç•Œé¢æ•ˆæœä¸å¥½é¢‘ç¹æ›´æ¢çš„æƒ…å†µã€‚</p>
<p><strong>ç”±äº</strong>ç•Œé¢çš„å¸ƒå±€å‘ç”Ÿå˜åŒ–ï¼Œå›¾ç‰‡æ²¡åŠæ³•ç›´æ¥è¦†ç›–æ›¿æ¢ï¼Œä¸€ä¸å°å¿ƒå°±æœ‰å¯èƒ½ä¼šå¯¼è‡´æ—§èµ„æºé—å¿˜åœ¨é¡¹ç›®é‡Œï¼Œé€ æˆâ€œæ³„æ¼â€ã€‚</p>
<p><strong>é‚£</strong>æˆ‘ä»¬æŠŠé—å¿˜çš„èµ„æºåˆ æ‰ä¸å°±å¥½äº†ï¼Ÿ</p>
<p><strong>æ˜¯çš„</strong>ï¼Œå‰ææ˜¯è¦çŸ¥é“å“ªäº›èµ„æºæ˜¯å·²ç»æ²¡è¢«å¼•ç”¨äº†ï¼</p>
<p><strong>è¨€å½’æ­£ä¼ </strong>ï¼Œæœ¬æœŸä¸€èµ·æ¥çœ‹çœ‹ï¼Œå¦‚ä½•åœ¨<code>Cocos</code>æ¸¸æˆå¼€å‘ä¸­ï¼Œè‡ªå®šä¹‰æ’ä»¶<strong>æŸ¥çœ‹èµ„æºè¢«ä»€ä¹ˆèµ„æºå¼•ç”¨</strong>ã€‚</p>
<p><strong>æœ¬æ–‡æºå·¥ç¨‹å¯åœ¨æ–‡æœ«è·å–ï¼Œå°ä¼™ä¼´ä»¬è‡ªè¡Œå‰å¾€ã€‚</strong></p>
<h2 data-id="heading-1">ç›´æ¥ä¸Šå®ä¾‹</h2>
<p><strong>å®¢å®˜</strong>è¯·ç•™æ­¥ï¼Œå€’æ¯èŒ¶ï¼Œå’±ä»¬æœ¬æœŸç›´æ¥ä¸Šå®ä¾‹ï¼ŒåºŸè¯æœ€åå†è¯´ã€‚</p>
<h3 data-id="heading-2">1.åˆ›å»ºæ’ä»¶</h3>
<p><strong>æƒ³è¦è‡ªå®šä¹‰æ’ä»¶æŸ¥çœ‹èµ„æºè¢«ä»€ä¹ˆå¼•ç”¨</strong>ï¼Œé¦–å…ˆè¦åˆ›å»ºæˆ‘ä»¬çš„æ’ä»¶ï¼Œé€šè¿‡èœå•<code>æ‰©å±•-&gt;åˆ›å»ºæ‰©å±•</code>æ‰“å¼€æ‰©å±•åˆ›å»ºé¢æ¿,é€‰æ‹©ä¸€ä¸ªç©ºç™½æ¨¡æ¿è¿›è¡Œåˆ›å»ºå¹¶å¯ç”¨æ’ä»¶ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b16bcdd42f74bb2b68af650cacba3e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018959&amp;x-signature=3nirqIUY6yeQ2s1LUYoflaLPGYU%3D" alt="" loading="lazy"/></p>
<p><strong>æ·»åŠ </strong>ä¸ªæ¶ˆæ¯<code>findReferences</code>å’Œå¿«æ·é”®<code>ctrl+shift+f</code>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3ce30d4f4724c1ab3c7a58badafa8c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018959&amp;x-signature=5Gxwunlm%2BvXNjqX%2FMQgN69WSDfg%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">2.æ’ä»¶åŸç†</h3>
<blockquote>
<p><strong>æ¯ä¸ª</strong>å¯¼å…¥é¡¹ç›®çš„èµ„æºï¼ˆå›¾ç‰‡ã€éŸ³é¢‘ã€<code>prefab</code>ã€è„šæœ¬ç­‰ï¼‰éƒ½ä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ª<code>uuid</code>ã€‚</p>
<p><strong>è¿™ä¸ª</strong><code>uuid</code>ç”¨äºåœ¨é¡¹ç›®ä¸­å”¯ä¸€æ ‡è¯†è¯¥èµ„æºã€‚</p>
<p><strong>é€šå¸¸</strong><code>uuid</code>ä¼šåœ¨èµ„æºæ–‡ä»¶æˆ–è€…èµ„æºçš„<code>meta</code>æ–‡ä»¶ä¸­ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98f4f29b5a8a436d94c309ecacfe79d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018959&amp;x-signature=8I5a0qZGFbI83t5UPOtrWDFx0HI%3D" alt="" loading="lazy"/></p>
<p><strong>å¦‚ä¸Šå›¾</strong>ï¼Œ<code>Main.scene</code>çš„<code>uuid</code>ï¼Œæˆ–è€…æ˜¯åœ¨ä¸‹å›¾çš„<code>Main.scene.meta</code>æ–‡ä»¶ä¸­:</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/506a022e64634689890e331686302681~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018959&amp;x-signature=x1gBoXE15zEt99AAi6cXpzIOrww%3D" alt="" loading="lazy"/></p>
<p><strong>åŸç†å¾ˆç®€å•</strong>ï¼Œå°±æ˜¯è·å–å½“å‰èµ„æºçš„<code>uuid</code>ï¼Œç„¶åå†å»æŸ¥æ‰¾å…¶ä»–æ‰€æœ‰èµ„æºï¼Œå¦‚æœå…¶ä»–èµ„æºæ–‡ä»¶çš„æ•°æ®ä¸­åŒ…å«äº†å½“å‰èµ„æºçš„<code>uuid</code>ï¼Œè¯´æ˜å½“å‰èµ„æºè¢«å¼•ç”¨ã€‚</p>
<h3 data-id="heading-4">3.æ’ä»¶æµç¨‹</h3>
<blockquote>
<p><code>å¼€å§‹-&gt;è·å–é€‰ä¸­çš„èµ„æºçš„uuid-&gt;éå†assetç›®å½•æ‰€æœ‰çš„èµ„æº-&gt;åˆ¤æ–­uuidæ˜¯å¦åœ¨éå†èµ„æºçš„æ•°æ®ä¸­-&gt;ç»“æŸ</code></p>
</blockquote>
<ul>
<li>
<p><strong>è·å–é€‰ä¸­çš„èµ„æºçš„uuid</strong>ï¼š<code>const selectedUuids = Editor.Selection.getSelected(&amp;#34;asset&amp;#34;);</code>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ac48a296e144965bf27e1bf925a04ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018959&amp;x-signature=SqPfa6P8O9sQE%2FvYDHyeLsRjd0Q%3D" alt="" loading="lazy"/></p>
</li>
<li>
<p><strong>éå†assetç›®å½•æ‰€æœ‰çš„èµ„æº</strong>: <code>const allAssets = await Editor.Message.request('asset-db', 'query-assets', { pattern: 'db://assets/**/*' }); </code>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9034bf915a948c1917a68b5c19ba169~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018959&amp;x-signature=4JRpRXX%2FM3kjFUkSM9jH4vSHHp4%3D" alt="" loading="lazy"/></p>
</li>
<li>
<p><strong>åˆ¤æ–­uuidæ˜¯å¦åœ¨éå†èµ„æºçš„æ•°æ®ä¸­</strong>: <code>let assetFile = fs.readFileSync(assetInfo.file, 'utf-8');</code>é€šè¿‡<code>fs</code>æ¨¡å—è¯»å–æ–‡ä»¶å†…å®¹ç„¶ååˆ¤æ–­æ˜¯å¦åŒ…å«é€‰ä¸­èµ„æºçš„<code>uuid</code>ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bba76712b3e34161b6a4feee502c141b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018959&amp;x-signature=OcNr9NWg6UfWjeRDp6v7N7KmSpU%3D" alt="" loading="lazy"/></p>
</li>
</ul>
<h3 data-id="heading-5">4.æ•ˆæœæ¼”ç¤º</h3>
<p><strong>åœ¨æ’ä»¶ç›®å½•</strong>ï¼Œå®‰è£…ä¾èµ–<code>npm install</code>å’Œæ„å»ºæ’ä»¶<code>npm run build</code>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30ab53fbc76a48d4a15b2b69d25fe9a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018959&amp;x-signature=33rswlodpy88WUFLTRqWi0j0ohk%3D" alt="" loading="lazy"/></p>
<p><strong>é€‰ä¸­</strong>å›¾ç‰‡èµ„æºï¼ŒæŒ‰ä¸‹<code>crtl+shift+f</code>ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0fb87c7111c44974a6d323ac13a0ddd1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018959&amp;x-signature=xyShvTZl9nKTD5ZtqfMbvHDjt6c%3D" alt="" loading="lazy"/></p>
<p><strong>é€‰ä¸­</strong>è„šæœ¬èµ„æºï¼ŒæŒ‰ä¸‹<code>crtl+shift+f</code>ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/daa9c570c1894df982cb8edee67ba533~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018959&amp;x-signature=Z%2FCI6diCJrV3hzW2XsVYWSGdMjI%3D" alt="" loading="lazy"/></p>
<p><strong>æ•´ä½“</strong>é¢„è§ˆå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0d22e7c30584fa58941775bb5de8b4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018959&amp;x-signature=9FQ2TohKg0r%2B%2BVUeQIAMO85s3qI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">æ¸©é¦¨æç¤º</h2>
<ul>
<li>
<p><strong>ä»¥ä¸Š</strong>æ’ä»¶åŠŸèƒ½ä»…æ˜¾ç¤ºé€‰ä¸­èµ„æºçš„è¢«å¼•ç”¨æƒ…å†µï¼Œè¦æŸ¥è¯¢æ‰€æœ‰èµ„æºçš„å°ä¼™ä¼´å¯è‡ªè¡Œä¿®æ”¹æ‰©å±•éå†æ‰€æœ‰å›¾ç‰‡èµ„æºã€‚</p>
</li>
<li>
<p><strong>æ’ä»¶</strong>ä»…æŸ¥æ‰¾èµ„æºè¢«å…¶ä»–èµ„æºå¼•ç”¨æƒ…å†µï¼Œä»£ç ä¸­åŠ¨æ€åŠ è½½çš„èµ„æºï¼Œéœ€è¦è‡ªè¡Œæ‰©å±•(æ£€ç´¢æ¥å£æˆ–é…ç½®)ã€‚</p>
</li>
<li>
<p><strong>é™¤äº†</strong>åœ¨<code>Bundle</code>åŒ…ä¸­(åŒ…æ‹¬<code>resources</code>æ–‡ä»¶å¤¹)ï¼Œæ²¡è¢«ä¾èµ–çš„èµ„æºä¸ä¼šè¢«æ‰“åˆ°åŒ…ä¸­ã€‚</p>
</li>
<li>
<p><strong>å·¥å…·æ£€ç´¢</strong>æ˜¯éœ€è¦çš„ï¼Œä½†æ˜¯ä¹Ÿéœ€è¦äººå·¥å¯¹èµ„æºè¿›è¡Œè¾¨åˆ«ï¼Œç‰¹åˆ«åœ¨ä¸Šçº¿å‰ï¼Œä¿è¯ä¸è¯¯åˆ åœ¨ç”¨èµ„æºã€‚</p>
</li>
</ul>
<h2 data-id="heading-7">ç»“è¯­</h2>
<p><strong>ä»¥ä¸Š</strong>å°±æ˜¯å¦‚ä½•æŸ¥çœ‹èµ„æºè¢«ä»€ä¹ˆèµ„æºå¼•ç”¨çš„å…¨éƒ¨å†…å®¹ï¼Œå¦‚æœ‰ä¸å¯¹ï¼Œè¿˜è¯·å°ä¼™ä¼´ä»¬æŒ‡å‡ºï¼Œæ¬¢è¿æ›´å¤šçš„å°ä¼™ä¼´è¿›è¡ŒæŠ•ç¨¿(ç´ æã€æ–‡ç« ï¼Œç¡¬å¸ç­‰ç­‰)ï¼Œæ„Ÿè°¢æ”¯æŒï¼</p>
<p><strong>å°ä¼™ä¼´ä»¬åœ¨æ¸¸æˆå¼€å‘ä¸­è¿˜é‡åˆ°å“ªäº›æœ‰è¶£çš„äº‹æƒ…å‘¢ï¼Ÿ</strong></p>
<p>æœ¬æ–‡<strong>æºå·¥ç¨‹</strong>å¯é€šè¿‡<strong>ç§ä¿¡</strong>å‘é€ <strong>resfinder</strong> è·å–ï¼Œæ›´å¤š<strong>ä¸å®ç”¨èµ„æº</strong>å¯é€šè¿‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fstore.cocos.com%2Fapp%2Fdetail%2F6576" target="_blank" title="https://store.cocos.com/app/detail/6576" ref="nofollow noopener noreferrer">é˜…è¯»åŸæ–‡</a>è·å–ã€‚</p>
<hr/>
<p><strong>æˆ‘æ˜¯"äº¿å…ƒç¨‹åºå‘˜"ï¼Œä¸€ä½æœ‰ç€8å¹´æ¸¸æˆè¡Œä¸šç»éªŒçš„ä¸»ç¨‹ã€‚åœ¨æ¸¸æˆå¼€å‘ä¸­ï¼Œå¸Œæœ›èƒ½ç»™åˆ°æ‚¨å¸®åŠ©, ä¹Ÿå¸Œæœ›é€šè¿‡æ‚¨èƒ½å¸®åŠ©åˆ°å¤§å®¶ã€‚</strong></p>
<p>AD:ç¬”è€…çº¿ä¸Šçš„å°æ¸¸æˆã€Šæ‰“èºä¸é—¯å…³ã€‹ã€Šè´ªåƒè›‡æŒæœºç»å…¸ã€‹ã€Šé‡åŠ›è¿·å®«çƒã€‹ã€Šå¡«è‰²ä¹‹æ—…ã€‹ã€Šæ–¹å—æŒæœºç»å…¸ã€‹å¤§å®¶å¯ä»¥è‡ªè¡Œç‚¹å‡»æœç´¢ä½“éªŒã€‚</p>
<p>å®ä¸ç›¸ç’ï¼Œæƒ³è¦ä¸ª<strong>èµ</strong>å’Œ<strong>çˆ±å¿ƒ</strong>ï¼è¯·æŠŠè¯¥æ–‡ç« <strong>åˆ†äº«</strong>ç»™ä½ è§‰å¾—æœ‰éœ€è¦çš„å…¶ä»–å°ä¼™ä¼´ã€‚è°¢è°¢ï¼</p>
<p>æ¨èä¸“æ ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzg5NTY2MjIzMg%3D%3D%26action%3Dgetalbum%26album_id%3D3175880857546129410%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=Mzg5NTY2MjIzMg==&amp;action=getalbum&amp;album_id=3175880857546129410#wechat_redirect" ref="nofollow noopener noreferrer">çŸ¥è¯†ä»˜è´¹ä¸“æ </a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg5NTY2MjIzMg%3D%3D%26mid%3D2247487282%26idx%3D1%26sn%3De3cb8ab6f5c0d5f804d5c29e2e90b9ad%26chksm%3Dc00daec5f77a27d33933e877464d8cde24c4c947d3755f5e8262c634634617e7c26de3953a54%26token%3D336413522%26lang%3Dzh_CN%23rd" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg5NTY2MjIzMg==&amp;mid=2247487282&amp;idx=1&amp;sn=e3cb8ab6f5c0d5f804d5c29e2e90b9ad&amp;chksm=c00daec5f77a27d33933e877464d8cde24c4c947d3755f5e8262c634634617e7c26de3953a54&amp;token=336413522&amp;lang=zh_CN#rd" ref="nofollow noopener noreferrer">ä½ çŸ¥é“å’Œä¸çŸ¥é“çš„å¾®ä¿¡å°æ¸¸æˆå¸¸ç”¨APIæ•´ç†ï¼Œèµ¶ç´§æ”¶è—ç”¨èµ·æ¥~</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzg5NTY2MjIzMg%3D%3D%26action%3Dgetalbum%26album_id%3D3207702867494305797%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=Mzg5NTY2MjIzMg==&amp;action=getalbum&amp;album_id=3207702867494305797#wechat_redirect" ref="nofollow noopener noreferrer">100ä¸ªCocoså®ä¾‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzg5NTY2MjIzMg%3D%3D%26action%3Dgetalbum%26album_id%3D3073771187570999299%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=Mzg5NTY2MjIzMg==&amp;action=getalbum&amp;album_id=3073771187570999299#wechat_redirect" ref="nofollow noopener noreferrer">8å¹´ä¸»ç¨‹æ‰‹æŠŠæ‰‹æ‰“é€ Cocosç‹¬ç«‹æ¸¸æˆå¼€å‘æ¡†æ¶</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzg5NTY2MjIzMg%3D%3D%26action%3Dgetalbum%26album_id%3D3121583619634626562%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=Mzg5NTY2MjIzMg==&amp;action=getalbum&amp;album_id=3121583619634626562#wechat_redirect" ref="nofollow noopener noreferrer">å’Œ8å¹´æ¸¸æˆä¸»ç¨‹ä¸€èµ·å­¦ä¹ è®¾è®¡æ¨¡å¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3Faction%3Dgetalbum%26__biz%3DMzg5NTY2MjIzMg%3D%3D%26scene%3D1%26album_id%3D3038883468588089350%26count%3D3%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/mp/appmsgalbum?action=getalbum&amp;__biz=Mzg5NTY2MjIzMg==&amp;scene=1&amp;album_id=3038883468588089350&amp;count=3#wechat_redirect" ref="nofollow noopener noreferrer">ä»é›¶å¼€å§‹å¼€å‘è´ªåƒè›‡å°æ¸¸æˆåˆ°ä¸Šçº¿ç³»åˆ—</a></p>
<p>ç‚¹å‡»ä¸‹æ–¹ç°è‰²æŒ‰é’®+å…³æ³¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰‘æŒ‡offer-49ã€æŠŠå­—ç¬¦ä¸²è½¬æ¢æˆæ•´æ•°]]></title>    <link>https://juejin.cn/post/7582063437414449190</link>    <guid>https://juejin.cn/post/7582063437414449190</guid>    <pubDate>2025-12-11T00:56:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582063437414449190" data-draft-id="7580277964341510154" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" å‰‘æŒ‡offer-49ã€æŠŠå­—ç¬¦ä¸²è½¬æ¢æˆæ•´æ•°"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-12-11T00:56:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SevenCoding"/> <meta itemprop="url" content="https://juejin.cn/user/3261615728242467"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             å‰‘æŒ‡offer-49ã€æŠŠå­—ç¬¦ä¸²è½¬æ¢æˆæ•´æ•°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3261615728242467/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SevenCoding
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T00:56:56.000Z" title="Thu Dec 11 2025 00:56:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é¢˜â½¬æè¿°</h2>
<p>è¯·ä½ æ¥å®ç°â¼€ä¸ª myAtoi(string s) å‡½æ•°ï¼Œä½¿å…¶èƒ½å°†å­—ç¬¦ä¸²è½¬æ¢æˆâ¼€ä¸ª 32 ä½æœ‰ç¬¦å·æ•´æ•°ï¼ˆç±»ä¼¼C/C++ ä¸­çš„ atoi å‡½æ•°ï¼‰ã€‚</p>
<p>å‡½æ•° myAtoi(string s) çš„ç®—æ³•å¦‚ä¸‹ï¼š</p>
<ul>
<li>è¯»â¼Šå­—ç¬¦ä¸²å¹¶ä¸¢å¼ƒâ½†â½¤çš„å‰å¯¼ç©ºæ ¼</li>
<li>æ£€æŸ¥ä¸‹â¼€ä¸ªå­—ç¬¦ï¼ˆå‡è®¾è¿˜æœªåˆ°å­—ç¬¦æœ«å°¾ï¼‰ä¸ºæ­£è¿˜æ˜¯è´Ÿå·ï¼Œè¯»å–è¯¥å­—ç¬¦ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚ ç¡®å®šæœ€ç»ˆç»“æœæ˜¯è´Ÿæ•°ï¼Œè¿˜æ˜¯æ­£æ•°ã€‚ å¦‚æœä¸¤è€…éƒ½ä¸å­˜åœ¨ï¼Œåˆ™å‡å®šç»“æœä¸ºæ­£ã€‚</li>
<li>è¯»â¼Šä¸‹â¼€ä¸ªå­—ç¬¦ï¼Œç›´åˆ°åˆ°è¾¾ä¸‹â¼€ä¸ªâ¾®æ•°å­—å­—ç¬¦æˆ–åˆ°è¾¾è¾“â¼Šçš„ç»“å°¾ã€‚å­—ç¬¦ä¸²çš„å…¶ä½™éƒ¨åˆ†å°†è¢«å¿½ç•¥ã€‚</li>
<li>å°†å‰â¾¯æ­¥éª¤è¯»â¼Šçš„è¿™äº›æ•°å­—è½¬æ¢ä¸ºæ•´æ•°ï¼ˆå³ï¼Œ" 123 " -&gt; 123 ï¼Œ " 0032 " -&gt; 32 ï¼‰ã€‚</li>
<li>å¦‚æœæ²¡æœ‰è¯»â¼Šæ•°å­—ï¼Œåˆ™æ•´æ•°ä¸º 0 ã€‚å¿…è¦æ—¶æ›´æ”¹ç¬¦å·ï¼ˆä»æ­¥éª¤ 2 å¼€å§‹ï¼‰ã€‚</li>
<li>å¦‚æœæ•´æ•°æ•°è¶…è¿‡ 32 ä½æœ‰ç¬¦å·æ•´æ•°èŒƒå›´ [âˆ’2^31, 2^(31 âˆ’ 1)] ï¼Œéœ€è¦æˆªæ–­è¿™ä¸ªæ•´æ•°ï¼Œä½¿å…¶ä¿æŒåœ¨è¿™ä¸ªèŒƒå›´å†…ã€‚å…·ä½“æ¥è¯´ï¼Œâ¼©äº âˆ’2^31 çš„æ•´æ•°åº”è¯¥è¢«å›ºå®šä¸º 2^31 ï¼Œâ¼¤äº 2^(31 âˆ’ 1) çš„æ•´æ•°åº”è¯¥è¢«å›ºå®šä¸º2^(31 âˆ’ 1)</li>
<li>è¿”å›æ•´æ•°ä½œä¸ºæœ€ç»ˆç»“æœã€‚</li>
</ul>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>æœ¬é¢˜ä¸­çš„ç©ºâ½©å­—ç¬¦åªåŒ…æ‹¬ç©ºæ ¼å­—ç¬¦ ' ' ã€‚</li>
<li>é™¤å‰å¯¼ç©ºæ ¼æˆ–æ•°å­—åçš„å…¶ä½™å­—ç¬¦ä¸²å¤–ï¼Œè¯·å‹¿å¿½ç•¥ ä»»ä½•å…¶ä»–å­—ç¬¦ã€‚</li>
</ul>
<p>ç¤ºä¾‹1ï¼š
è¾“â¼Šï¼šs = "42"
è¾“å‡ºï¼š42
è§£é‡Šï¼šåŠ ç²—çš„å­—ç¬¦ä¸²ä¸ºå·²ç»è¯»â¼Šçš„å­—ç¬¦ï¼Œæ’â¼Šç¬¦å·æ˜¯å½“å‰è¯»å–çš„å­—ç¬¦ã€‚</p>
<ol>
<li>ç¬¬ 1 æ­¥ï¼š"42"ï¼ˆå½“å‰æ²¡æœ‰è¯»â¼Šå­—ç¬¦ï¼Œå› ä¸ºæ²¡æœ‰å‰å¯¼ç©ºæ ¼ï¼‰</li>
<li>ç¬¬ 2 æ­¥ï¼š"42"ï¼ˆå½“å‰æ²¡æœ‰è¯»â¼Šå­—ç¬¦ï¼Œå› ä¸ºè¿™â¾¥ä¸å­˜åœ¨ '-' æˆ–è€… '+'ï¼‰</li>
<li>ç¬¬ 3 æ­¥ï¼š"42"ï¼ˆè¯»â¼Š "42"ï¼‰</li>
<li>è§£æå¾—åˆ°æ•´æ•° 42 ã€‚</li>
<li>ç”±äº "42" åœ¨èŒƒå›´ [-231, 231 - 1] å†…ï¼Œæœ€ç»ˆç»“æœä¸º 42 ã€‚</li>
</ol>
<p>ç¤ºä¾‹2ï¼š
è¾“â¼Šï¼šs = " -42"
è¾“å‡ºï¼š-42
è§£é‡Šï¼š</p>
<ol>
<li>ç¬¬ 1 æ­¥ï¼š" -42"ï¼ˆè¯»â¼Šå‰å¯¼ç©ºæ ¼ï¼Œä½†å¿½è§†æ‰ï¼‰</li>
<li>ç¬¬ 2 æ­¥ï¼š" -42"ï¼ˆè¯»â¼Š '-' å­—ç¬¦ï¼Œæ‰€ä»¥ç»“æœåº”è¯¥æ˜¯è´Ÿæ•°ï¼‰</li>
<li>ç¬¬ 3 æ­¥ï¼š" -42"ï¼ˆè¯»â¼Š "42"ï¼‰</li>
<li>è§£æå¾—åˆ°æ•´æ•° -42 ã€‚</li>
<li>ç”±äº "-42" åœ¨èŒƒå›´ [-231, 231 - 1] å†…ï¼Œæœ€ç»ˆç»“æœä¸º -42 ã€‚</li>
</ol>
<p>ç¤ºä¾‹3ï¼š
è¾“â¼Šï¼šs = "4193 with words"
è¾“å‡ºï¼š4193
è§£é‡Šï¼š</p>
<ol>
<li>ç¬¬ 1 æ­¥ï¼š"4193 with words"ï¼ˆå½“å‰æ²¡æœ‰è¯»â¼Šå­—ç¬¦ï¼Œå› ä¸ºæ²¡æœ‰å‰å¯¼ç©ºæ ¼ï¼‰</li>
<li>ç¬¬ 2 æ­¥ï¼š"4193 with words"ï¼ˆå½“å‰æ²¡æœ‰è¯»â¼Šå­—ç¬¦ï¼Œå› ä¸ºè¿™â¾¥ä¸å­˜åœ¨ '-' æˆ–è€… '+'ï¼‰</li>
<li>ç¬¬ 3 æ­¥ï¼š"4193 with words"ï¼ˆè¯»â¼Š "4193"ï¼›ç”±äºä¸‹â¼€ä¸ªå­—ç¬¦ä¸æ˜¯â¼€ä¸ªæ•°å­—ï¼Œæ‰€ä»¥è¯»â¼Šåœâ½Œï¼‰</li>
<li>è§£æå¾—åˆ°æ•´æ•° 4193 ã€‚</li>
<li>ç”±äº "4193" åœ¨èŒƒå›´ [-231, 231 - 1] å†…ï¼Œæœ€ç»ˆç»“æœä¸º 4193 ã€‚</li>
</ol>
<p>ç¤ºä¾‹4ï¼š
è¾“â¼Šï¼šs = "words and 987"
è¾“å‡ºï¼š0
è§£é‡Šï¼š</p>
<ol>
<li>ç¬¬ 1 æ­¥ï¼š"words and 987"ï¼ˆå½“å‰æ²¡æœ‰è¯»â¼Šå­—ç¬¦ï¼Œå› ä¸ºæ²¡æœ‰å‰å¯¼ç©ºæ ¼ï¼‰</li>
<li>ç¬¬ 2 æ­¥ï¼š"words and 987"ï¼ˆå½“å‰æ²¡æœ‰è¯»â¼Šå­—ç¬¦ï¼Œå› ä¸ºè¿™â¾¥ä¸å­˜åœ¨ '-' æˆ–è€… '+'ï¼‰</li>
<li>ç¬¬ 3 æ­¥ï¼š"words and 987"ï¼ˆç”±äºå½“å‰å­—ç¬¦ 'w' ä¸æ˜¯â¼€ä¸ªæ•°å­—ï¼Œæ‰€ä»¥è¯»â¼Šåœâ½Œï¼‰</li>
<li>è§£æå¾—åˆ°æ•´æ•° 0 ï¼Œå› ä¸ºæ²¡æœ‰è¯»â¼Šä»»ä½•æ•°å­—ã€‚</li>
<li>ç”±äº 0 åœ¨èŒƒå›´ [-231, 231 - 1] å†…ï¼Œæœ€ç»ˆç»“æœä¸º 0 ã€‚</li>
</ol>
<p>ç¤ºä¾‹5ï¼š
è¾“â¼Šï¼šs = "-91283472332"
è¾“å‡ºï¼š-2147483648
è§£é‡Šï¼š</p>
<ol>
<li>ç¬¬ 1 æ­¥ï¼š"-91283472332"ï¼ˆå½“å‰æ²¡æœ‰è¯»â¼Šå­—ç¬¦ï¼Œå› ä¸ºæ²¡æœ‰å‰å¯¼ç©ºæ ¼ï¼‰</li>
<li>ç¬¬ 2 æ­¥ï¼š"-91283472332"ï¼ˆè¯»â¼Š '-' å­—ç¬¦ï¼Œæ‰€ä»¥ç»“æœåº”è¯¥æ˜¯è´Ÿæ•°ï¼‰</li>
<li>ç¬¬ 3 æ­¥ï¼š"-91283472332"ï¼ˆè¯»â¼Š "91283472332"ï¼‰</li>
<li>è§£æå¾—åˆ°æ•´æ•° -91283472332 ã€‚</li>
<li>ç”±äº -91283472332 â¼©äºèŒƒå›´ [-231, 231 - 1] çš„ä¸‹ç•Œï¼Œæœ€ç»ˆç»“æœè¢«æˆªæ–­ä¸º -231 = -2147483648</li>
</ol>
<p>æç¤ºï¼š</p>
<ul>
<li>0 &lt;= s.length &lt;= 200</li>
<li>s ç”±è‹±â½‚å­—âºŸï¼ˆâ¼¤å†™å’Œâ¼©å†™ï¼‰ã€æ•°å­—ï¼ˆ0-9ï¼‰ã€' 'ã€'+'ã€'-' å’Œ '.' ç»„æˆ</li>
</ul>
<h2 data-id="heading-1">æ€è·¯ä¸è§£ç­”</h2>
<h3 data-id="heading-2">åŸºç¡€éå†æ³•</h3>
<p>è¿™é“é¢˜â½¬çœ‹èµ·æ¥å¾ˆâ»“ï¼Œä½†æ˜¯å®é™…ä¸Šé€»è¾‘å¾ˆæ¸…æ™°ï¼Œå°±æ˜¯å°†å­—ç¬¦ä¸²è§£ææˆä¸ºæ•°å­—ï¼Œâ¾¥â¾¯æœ‰â¼ä¸ªç‰¹æ®Šçš„åˆ™ï¼š</p>
<ol>
<li>å‰â¾¯çš„ç©ºæ ¼å»æ‰ï¼Œä¸è¯»å–</li>
<li>æ¥ä¸‹æ¥çš„å­—ç¬¦å¿…é¡»æ˜¯æ•°å­—ï¼Œâ€œ + â€å·æˆ–è€…â€œ - â€å·
<ol>
<li>å¦‚æœæ˜¯â€œ + â€å·æˆ–è€…â€œ - â€å·ï¼Œå°†ç¬¦å·è®°å½•ä¸‹æ¥</li>
<li>æ²¡æœ‰ç¬¦å·é»˜è®¤æ˜¯â€œ + â€å·ï¼Œæ­£æ•°ã€‚</li>
</ol>
</li>
<li>æ¥ä¸‹æ¥çš„å­—ç¬¦å¿…é¡»æ˜¯æ•°å­—ï¼Œé‡åˆ°å…¶ä»–å­—ç¬¦ä¼šç›´æ¥ç»“æŸ</li>
<li>éœ€è¦è€ƒè™‘æº¢å‡ºçš„é—®é¢˜</li>
</ol>
<p>åœ¨å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ•°å­—çš„æ—¶å€™ï¼Œâ½¤ä¸‹â¾¯è¿™å¥æ ¸â¼¼ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java">sum = sum * <span class="hljs-number">10</span> + (str.charAt(i) - <span class="hljs-string">'0'</span>);
</code></pre>
<p>ä½†æ˜¯åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¾ç„¶éœ€è¦è€ƒè™‘æ•°å­—æº¢å‡ºçš„é—®é¢˜ï¼Œé’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åŠ å’Œä¹‹å‰åˆ¤æ–­ï¼Œé’ˆå¯¹â¼¤äº0çš„æƒ…å†µï¼Œå¦‚æœâ¼¤äºæœ€â¼¤å€¼æ•´é™¤10ï¼Œæˆ–è€…ç­‰äºæœ€â¼¤å€¼æ•´é™¤10ï¼Œä½†æ˜¯ä¸ªä½æ•°è¶…è¿‡äº†ï¼Œéƒ½ç›´æ¥è¿”å›0ã€‚</p>
<p>å‡è®¾æœ€â¼¤å€¼æ˜¯127ï¼Œé‚£ä¹ˆsumå¦‚æœâ¼¤äº12ï¼Œè‚¯å®šä¼šè¶…è¿‡ï¼Œå¦‚æœsum == 12ï¼Œä½†æ˜¯ä¸ªä½æ•°â¼¤äº7ï¼Œä¹˜ä»¥10ç›¸åŠ ï¼Œä¹Ÿè‚¯å®šä¼šè¶…ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (sum &gt; Integer.MAX_VALUE/<span class="hljs-number">10</span> || (sum == Integer.MAX_VALUE / <span class="hljs-number">10</span> &amp;&amp;
(str.charAt(i) - <span class="hljs-string">'0'</span>) &gt; <span class="hljs-number">7</span>)) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
</code></pre>
<p>å¯¹äºâ¼©äº0 çš„æƒ…å†µï¼Œå‡è®¾æœ€â¼©å€¼æ˜¯-128 ï¼Œé‚£ä¹ˆsum æ˜¯æ•°å­—éƒ¨åˆ† 128 , å¦‚æœå½“å‰sum â¼¤äº 12 ï¼Œé‚£ä¹ˆå°±â¼€å®šè¶…å‡ºï¼Œæˆ–è€…sum == 12 ï¼Œä½†æ˜¯ä¸ªä½æ•°â¼¤äº8 ï¼Œä¹˜ä»¥10 ï¼Œç›¸åŠ ä¹Ÿä¼šâ¼¤äº128 ï¼Œä¸ç¬¦åˆè¦æ±‚ï¼Œæ‰€ä»¥ç›´æ¥è¿”å›0 ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (sum &lt; Integer.MIN_VALUE/<span class="hljs-number">10</span> || (sum == Integer.MIN_VALUE / <span class="hljs-number">10</span> &amp;&amp; x
(str.charAt(i) - <span class="hljs-string">'0'</span>) &gt; <span class="hljs-number">8</span>)) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
</code></pre>
<p>å…·ä½“ä»£ç å®ç°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">myAtoi</span><span class="hljs-params">(String str)</span> {
        <span class="hljs-keyword">if</span> (str == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        }
        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">while</span> (i &lt; str.length() &amp;&amp; str.charAt(i) == <span class="hljs-string">' '</span>) {
            i++;
        }
        <span class="hljs-keyword">if</span> (i &gt;= str.length() || (str.charAt(i) != <span class="hljs-string">'-'</span> &amp;&amp; str.charAt(i) != <span class="hljs-string">'+'</span> &amp;&amp; !((str.charAt(i) &gt;= <span class="hljs-string">'0'</span>) &amp;&amp;
                (str.charAt(i) &lt;= <span class="hljs-string">'9'</span>)))) {
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        }
        <span class="hljs-type">int</span> <span class="hljs-variable">sign</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
        <span class="hljs-keyword">if</span> (i &lt; str.length() &amp;&amp; (str.charAt(i) == <span class="hljs-string">'-'</span> || i &lt; str.length() &amp;&amp;
                str.charAt(i) == <span class="hljs-string">'+'</span>)) {
            sign = str.charAt(i) == <span class="hljs-string">'-'</span> ? -<span class="hljs-number">1</span> : <span class="hljs-number">1</span>;
            i++;
        }
        <span class="hljs-type">int</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (; i &lt; str.length(); i++) {
            <span class="hljs-keyword">if</span> (str.charAt(i) &gt;= <span class="hljs-string">'0'</span> &amp;&amp; str.charAt(i) &lt;= <span class="hljs-string">'9'</span>) {
                <span class="hljs-keyword">if</span> (sign == <span class="hljs-number">1</span>) {
                    <span class="hljs-keyword">if</span> (sum &gt; Integer.MAX_VALUE / <span class="hljs-number">10</span> || sum == Integer.MAX_VALUE / <span class="hljs-number">10</span> &amp;&amp; (str.charAt(i) - <span class="hljs-string">'0'</span>) &gt; <span class="hljs-number">7</span>) {
                        <span class="hljs-keyword">return</span> Integer.MAX_VALUE;
                    }
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">if</span> (sum &gt; (Integer.MAX_VALUE) / <span class="hljs-number">10</span> || sum ==
                        (Integer.MAX_VALUE) / <span class="hljs-number">10</span> &amp;&amp; (str.charAt(i) - <span class="hljs-string">'0'</span>) &gt; <span class="hljs-number">8</span>) {
                        <span class="hljs-keyword">return</span> Integer.MIN_VALUE;
                    }
                }
                sum = sum * <span class="hljs-number">10</span> + (str.charAt(i) - <span class="hljs-string">'0'</span>);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> sum * sign;
            }
        }
        <span class="hljs-keyword">return</span> sum * sign;
    }
}
</code></pre>
<ul>
<li>æ—¶é—´å¤æ‚åº¦ä¸º O(n)</li>
<li>ç©ºé—´å¤æ‚åº¦ä¸º O(1)ã€‚</li>
</ul>
<h3 data-id="heading-3">æ­£åˆ™è¡¨è¾¾å¼</h3>
<p>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é…æ•°å­—æ¨¡å¼ï¼Œä»£ç æ›´åŠ ç®€æ´</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">myAtoi</span><span class="hljs-params">(String s)</span> {
        <span class="hljs-keyword">if</span> (s == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        
        s = s.trim();
        <span class="hljs-keyword">if</span> (s.length() == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        
        <span class="hljs-comment">// ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ•°å­—æ¨¡å¼ï¼šå¯é€‰ç¬¦å·ä½+æ•°å­—[3](@ref)</span>
        <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(&amp;#<span class="hljs-number">34</span>;^[+-]?\\d+&amp;#<span class="hljs-number">34</span>;);
        <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(s);
        
        <span class="hljs-keyword">if</span> (!matcher.find()) {
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// æ²¡æœ‰åŒ¹é…åˆ°æ•°å­—æ¨¡å¼</span>
        }
        
        <span class="hljs-type">String</span> <span class="hljs-variable">numStr</span> <span class="hljs-operator">=</span> matcher.group();
        <span class="hljs-type">int</span> <span class="hljs-variable">sign</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">startIndex</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        
        <span class="hljs-comment">// å¤„ç†ç¬¦å·ä½</span>
        <span class="hljs-keyword">if</span> (numStr.charAt(<span class="hljs-number">0</span>) == <span class="hljs-string">'+'</span>) {
            startIndex = <span class="hljs-number">1</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (numStr.charAt(<span class="hljs-number">0</span>) == <span class="hljs-string">'-'</span>) {
            sign = -<span class="hljs-number">1</span>;
            startIndex = <span class="hljs-number">1</span>;
        }
        
        <span class="hljs-type">long</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// ä½¿ç”¨longé˜²æ­¢è½¬æ¢è¿‡ç¨‹ä¸­æº¢å‡º</span>
        
        <span class="hljs-comment">// è½¬æ¢æ•°å­—éƒ¨åˆ†</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> startIndex; i &lt; numStr.length(); i++) {
            <span class="hljs-type">int</span> <span class="hljs-variable">digit</span> <span class="hljs-operator">=</span> numStr.charAt(i) - <span class="hljs-string">'0'</span>;
            result = result * <span class="hljs-number">10</span> + digit;
            
            <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æº¢å‡ºintèŒƒå›´</span>
            <span class="hljs-keyword">if</span> (sign == <span class="hljs-number">1</span> &amp;&amp; result &gt; Integer.MAX_VALUE) {
                <span class="hljs-keyword">return</span> Integer.MAX_VALUE;
            }
            <span class="hljs-keyword">if</span> (sign == -<span class="hljs-number">1</span> &amp;&amp; -result &lt; Integer.MIN_VALUE) {
                <span class="hljs-keyword">return</span> Integer.MIN_VALUE;
            }
        }
        
        <span class="hljs-keyword">return</span> (<span class="hljs-type">int</span>) result * sign;
    }
}
</code></pre>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œæ­£åˆ™åŒ¹é…å’Œæ•°å­—è½¬æ¢éƒ½æ˜¯çº¿æ€§æ—¶é—´</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œéœ€è¦å­˜å‚¨åŒ¹é…åˆ°çš„å­å­—ç¬¦ä¸²</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pinia å…¥é—¨ï¼šä¸ºä»€ä¹ˆè¯´å®ƒæ˜¯ Vuex æ›´å…·é­…åŠ›çš„ç°ä»£ç»§ä»»è€…ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7582067084840534070</link>    <guid>https://juejin.cn/post/7582067084840534070</guid>    <pubDate>2025-12-10T23:31:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582067084840534070" data-draft-id="7582067084840517686" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pinia å…¥é—¨ï¼šä¸ºä»€ä¹ˆè¯´å®ƒæ˜¯ Vuex æ›´å…·é­…åŠ›çš„ç°ä»£ç»§ä»»è€…ï¼Ÿ"/> <meta itemprop="keywords" content="Vue.js,JavaScript,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-10T23:31:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°é©¬å†™ç "/> <meta itemprop="url" content="https://juejin.cn/user/3940246036939358"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pinia å…¥é—¨ï¼šä¸ºä»€ä¹ˆè¯´å®ƒæ˜¯ Vuex æ›´å…·é­…åŠ›çš„ç°ä»£ç»§ä»»è€…ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3940246036939358/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°é©¬å†™ç 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T23:31:16.000Z" title="Wed Dec 10 2025 23:31:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šVue çŠ¶æ€ç®¡ç†çš„æ—¶ä»£å˜è¿</h2>
<p>åœ¨ Vue.js åº”ç”¨å¼€å‘çš„ä¸–ç•Œé‡Œï¼ŒçŠ¶æ€ç®¡ç†ä¸€ç›´æ˜¯æ„å»ºå¤æ‚åº”ç”¨çš„æ ¸å¿ƒè¯¾é¢˜ã€‚å¤šå¹´æ¥ï¼ŒVuex ä½œä¸ºå®˜æ–¹çŠ¶æ€ç®¡ç†åº“ï¼Œå‡ ä¹æˆä¸º Vue é¡¹ç›®çš„æ ‡å‡†é…ç½®ã€‚ç„¶è€Œï¼Œéšç€ Vue 3 çš„æ¨å‡ºå’Œå¼€å‘ç†å¿µçš„æ¼”è¿›ï¼Œä¸€ä¸ªå…¨æ–°çš„æŒ‘æˆ˜è€…â€”â€”<strong>Pinia</strong>â€”â€”æ‚„ç„¶ç™»åœºï¼Œå¹¶è¿…é€Ÿèµ¢å¾—äº†å¼€å‘è€…çš„é’çã€‚å®ƒä¸ä»…è¢« Vue å®˜æ–¹æ¨èä¸ºâ€œé»˜è®¤çš„çŠ¶æ€ç®¡ç†è§£å†³æ–¹æ¡ˆâ€ï¼Œæ›´ä»¥å…¶ç®€æ´ã€ç›´è§‚å’Œå¼ºå¤§çš„ç‰¹æ€§ï¼Œæ­£åœ¨é‡æ–°å®šä¹‰æˆ‘ä»¬å¯¹ Vue çŠ¶æ€ç®¡ç†çš„è®¤çŸ¥ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€Pinia æ˜¯ä»€ä¹ˆï¼Ÿä¸ä»…ä»…æ˜¯â€œå¦ä¸€ä¸ªçŠ¶æ€åº“â€</h2>
<p>Pinia æ˜¯ä¸€ä¸ªä¸º Vue.js è®¾è®¡çš„çŠ¶æ€ç®¡ç†åº“ã€‚å®ƒç”± Vue æ ¸å¿ƒå›¢é˜Ÿæˆå‘˜å¼€å‘ï¼Œæ—¨åœ¨æä¾›æ›´ç›´è§‚ã€ç±»å‹å®‰å…¨ä¸”æ¨¡å—åŒ–çš„çŠ¶æ€ç®¡ç†ä½“éªŒã€‚</p>
<p>ä¸ Vuex ç›¸æ¯”ï¼ŒPinia æœ€æ˜¾è‘—çš„å“²å­¦è½¬å˜æ˜¯ï¼š<strong>å®ƒæ‘’å¼ƒäº† mutations çš„æ¦‚å¿µ</strong>ã€‚è¿™ä¸ªè®¾è®¡å†³ç­–çœ‹ä¼¼ç®€å•ï¼Œå´å¸¦æ¥äº†å¼€å‘ä½“éªŒçš„è´¨å˜ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Pinia çš„ Store ç¤ºä¾‹ - ç®€æ´ç›´è§‚</span>
<span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCounterStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'counter'</span>, {
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> }),
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-title function_">increment</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++ <span class="hljs-comment">// ç›´æ¥ä¿®æ”¹çŠ¶æ€ï¼Œæ— éœ€ mutations</span>
    },
  },
  <span class="hljs-attr">getters</span>: {
    <span class="hljs-attr">doubleCount</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> state.<span class="hljs-property">count</span> * <span class="hljs-number">2</span>,
  },
})
</code></pre>
<h2 data-id="heading-2">äºŒã€ä¸ºä»€ä¹ˆé€‰æ‹© Piniaï¼Ÿäº”å¤§æ ¸å¿ƒä¼˜åŠ¿</h2>
<h3 data-id="heading-3">1. æ›´ç®€æ´çš„ API è®¾è®¡</h3>
<p>Pinia çš„ API æåº¦ç²¾ç®€ï¼Œå­¦ä¹ æ›²çº¿å¹³ç¼“ã€‚å»æ‰äº† Vuex ä¸­çš„ <code>mutations</code>ï¼ŒçŠ¶æ€ä¿®æ”¹å¯ä»¥é€šè¿‡ actions ç›´æ¥å®Œæˆï¼Œä¹Ÿå¯ä»¥ç›´æ¥èµ‹å€¼ä¿®æ”¹ï¼ˆé…åˆå“åº”å¼ç³»ç»Ÿï¼‰ã€‚è¿™ç§è®¾è®¡å‡å°‘äº†æ¦‚å¿µæ•°é‡ï¼Œè®©ä»£ç æ›´æ˜“è¯»æ˜“å†™ã€‚</p>
<h3 data-id="heading-4">2. å®Œç¾çš„ TypeScript æ”¯æŒ</h3>
<p>Pinia ä»ä¸€å¼€å§‹å°±ä¸º TypeScript è®¾è®¡ï¼Œæä¾›äº†å‡ºè‰²çš„ç±»å‹æ¨æ–­ã€‚ä½ çš„ storeã€stateã€actions å’Œ getters éƒ½èƒ½è·å¾—å®Œæ•´çš„ç±»å‹å®‰å…¨ï¼Œå¤§å¹…æå‡å¼€å‘æ•ˆç‡å’Œä»£ç å¯é æ€§ã€‚</p>
<h3 data-id="heading-5">3. æ¨¡å—åŒ–çš„è‡ªç„¶å®ç°</h3>
<p>åœ¨ Pinia ä¸­ï¼Œæ¯ä¸ª store éƒ½æ˜¯ç‹¬ç«‹çš„æ¨¡å—ï¼Œæ— éœ€åƒ Vuex é‚£æ ·åœ¨å•ä¸€ store ä¸­æ³¨å†Œæ¨¡å—ã€‚è¿™ç§è®¾è®¡è®©ä»£ç ç»„ç»‡æ›´åŠ çµæ´»ï¼Œä¹Ÿä¾¿äºä»£ç åˆ†å‰²å’ŒæŒ‰éœ€åŠ è½½ã€‚</p>
<h3 data-id="heading-6">4. æ›´å‹å¥½çš„å¼€å‘ä½“éªŒ</h3>
<ul>
<li><strong>Composition API é£æ ¼</strong>ï¼šä¸ Vue 3 çš„ Composition API å®Œç¾å¥‘åˆ</li>
<li><strong>DevTools é›†æˆ</strong>ï¼šæ”¯æŒ Vue DevToolsï¼Œæä¾›æ—¶é—´æ—…è¡Œè°ƒè¯•</li>
<li><strong>çƒ­æ¨¡å—æ›¿æ¢</strong>ï¼šæ”¯æŒå¼€å‘æ—¶çš„çƒ­æ›´æ–°ï¼Œä¿æŒçŠ¶æ€ä¸ä¸¢å¤±</li>
</ul>
<h3 data-id="heading-7">5. è½»é‡ä¸”é«˜æ€§èƒ½</h3>
<p>Pinia ä½“ç§¯å°å·§ï¼ŒåŒæ—¶é€šè¿‡æ™ºèƒ½çš„è®¾è®¡é¿å…äº†ä¸å¿…è¦çš„æ€§èƒ½å¼€é”€ã€‚å®ƒçš„å“åº”å¼ç³»ç»Ÿç›´æ¥æ„å»ºåœ¨ Vue çš„ reactive API ä¹‹ä¸Šï¼Œç¡®ä¿äº†é«˜æ•ˆçš„çŠ¶æ€æ›´æ–°ã€‚</p>
<h2 data-id="heading-8">ä¸‰ã€ä» Vuex è¿ç§»åˆ° Piniaï¼šä¸€ä¸ªå¹³æ»‘çš„è¿‡æ¸¡</h2>
<p>å¯¹äº Vuex ç”¨æˆ·ï¼Œè¿ç§»åˆ° Pinia æ˜¯ä¸€ä¸ªç›¸å¯¹å¹³æ»‘çš„è¿‡ç¨‹ã€‚ä¸¤è€…æ ¸å¿ƒæ¦‚å¿µæœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œä½† Pinia æä¾›äº†æ›´ç®€æ´çš„å®ç°ï¼š</p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>Vuex 4</th><th>Pinia</th></tr></thead><tbody><tr><td>çŠ¶æ€å®šä¹‰</td><td><code>state</code> å‡½æ•°</td><td><code>state</code> å‡½æ•°</td></tr><tr><td>è·å–çŠ¶æ€</td><td><code>getters</code></td><td><code>getters</code></td></tr><tr><td>ä¿®æ”¹çŠ¶æ€</td><td><code>mutations</code> + <code>actions</code></td><td><code>actions</code>ï¼ˆå¯ç›´æ¥ä¿®æ”¹ï¼‰</td></tr><tr><td>æ¨¡å—ç³»ç»Ÿ</td><td>åµŒå¥—æ¨¡å—</td><td>ç‹¬ç«‹ store</td></tr><tr><td>TypeScript æ”¯æŒ</td><td>éœ€è¦é¢å¤–é…ç½®</td><td>å¼€ç®±å³ç”¨</td></tr></tbody></table>
<p>è¿ç§»ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Vuex æ–¹å¼</span>
<span class="hljs-attr">mutations</span>: {
  <span class="hljs-title function_">SET_COUNT</span>(<span class="hljs-params">state, value</span>) {
    state.<span class="hljs-property">count</span> = value
  }
},
<span class="hljs-attr">actions</span>: {
  <span class="hljs-title function_">updateCount</span>(<span class="hljs-params">{ commit }, value</span>) {
    <span class="hljs-title function_">commit</span>(<span class="hljs-string">'SET_COUNT'</span>, value)
  }
}

<span class="hljs-comment">// Pinia æ–¹å¼ï¼ˆæ›´ç®€æ´ï¼‰</span>
<span class="hljs-attr">actions</span>: {
  <span class="hljs-title function_">updateCount</span>(<span class="hljs-params">value</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> = value <span class="hljs-comment">// ç›´æ¥èµ‹å€¼ï¼Œå“åº”å¼ç³»ç»Ÿè‡ªåŠ¨å¤„ç†</span>
  }
}
</code></pre>
<h2 data-id="heading-9">å››ã€å®æˆ˜ï¼šæ„å»ºä½ çš„ç¬¬ä¸€ä¸ª Pinia Store</h2>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ç”¨æˆ·ç®¡ç†ç¤ºä¾‹ï¼Œå¿«é€Ÿä¸Šæ‰‹ Piniaï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// stores/user.js</span>
<span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUserStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'user'</span>, {
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({
    <span class="hljs-attr">user</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">isAuthenticated</span>: <span class="hljs-literal">false</span>,
  }),
  
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">login</span>(<span class="hljs-params">credentials</span>) {
      <span class="hljs-comment">// æ¨¡æ‹Ÿ API è°ƒç”¨</span>
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">login</span>(credentials)
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">user</span> = response.<span class="hljs-property">user</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isAuthenticated</span> = <span class="hljs-literal">true</span>
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'token'</span>, response.<span class="hljs-property">token</span>)
    },
    
    <span class="hljs-title function_">logout</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">user</span> = <span class="hljs-literal">null</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isAuthenticated</span> = <span class="hljs-literal">false</span>
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'token'</span>)
    },
  },
  
  <span class="hljs-attr">getters</span>: {
    <span class="hljs-attr">userName</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> state.<span class="hljs-property">user</span>?.<span class="hljs-property">name</span> || <span class="hljs-string">'Guest'</span>,
    <span class="hljs-attr">isAdmin</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> state.<span class="hljs-property">user</span>?.<span class="hljs-property">role</span> === <span class="hljs-string">'admin'</span>,
  },
})
</code></pre>
<p>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">
  &lt;div&gt;
    &lt;p&gt;Welcome, {{ userStore.userName }}&lt;/p&gt;
    Logout
  &lt;/div&gt;



import { useUserStore } from '@/stores/user'

const userStore = useUserStore()
// å¯ä»¥ç›´æ¥è®¿é—®çŠ¶æ€å’Œæ“ä½œ

</code></pre>
<h2 data-id="heading-10">äº”ã€é«˜çº§ç‰¹æ€§ï¼šæ¢ç´¢ Pinia çš„å¼ºå¤§èƒ½åŠ›</h2>
<h3 data-id="heading-11">1. Store ç»„åˆ</h3>
<p>Pinia å…è®¸ stores ä¹‹é—´ç›¸äº’è°ƒç”¨ï¼Œä¾¿äºç»„ç»‡å¤æ‚çš„çŠ¶æ€é€»è¾‘ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// stores/cart.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCartStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'cart'</span>, {
  <span class="hljs-comment">// ... cart é€»è¾‘</span>
})

<span class="hljs-comment">// stores/checkout.js  </span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCheckoutStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'checkout'</span>, {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> cartStore = <span class="hljs-title function_">useCartStore</span>()
    
    <span class="hljs-keyword">return</span> {
      <span class="hljs-comment">// å¯ä»¥è®¿é—®å…¶ä»– store</span>
      <span class="hljs-attr">cartItems</span>: cartStore.<span class="hljs-property">items</span>,
    }
  }
})
</code></pre>
<h3 data-id="heading-12">2. æ’ä»¶ç³»ç»Ÿ</h3>
<p>Pinia æ”¯æŒæ’ä»¶ï¼Œå¯ä»¥è½»æ¾æ‰©å±•åŠŸèƒ½ï¼Œå¦‚æŒä¹…åŒ–å­˜å‚¨ã€æ—¥å¿—è®°å½•ç­‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æŒä¹…åŒ–æ’ä»¶ç¤ºä¾‹</span>
<span class="hljs-keyword">import</span> { createPinia } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>

<span class="hljs-keyword">const</span> pinia = <span class="hljs-title function_">createPinia</span>()

pinia.<span class="hljs-title function_">use</span>(<span class="hljs-function">(<span class="hljs-params">{ store }</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> key = <span class="hljs-string">`pinia-<span class="hljs-subst">${store.$id}</span>`</span>
  <span class="hljs-keyword">const</span> saved = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(key)
  <span class="hljs-keyword">if</span> (saved) {
    store.$patch(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(saved))
  }
  
  store.$subscribe(<span class="hljs-function">(<span class="hljs-params">mutation, state</span>) =&gt;</span> {
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(key, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(state))
  })
})
</code></pre>
<h2 data-id="heading-13">å…­ã€æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ</h2>
<ol>
<li><strong>å‘½åè§„èŒƒ</strong>ï¼šå»ºè®®ä½¿ç”¨ <code>use</code> å‰ç¼€å‘½å storeï¼ˆå¦‚ <code>useUserStore</code>ï¼‰ï¼Œä»¥ç¬¦åˆ Composition API æƒ¯ä¾‹</li>
<li><strong>é¿å…è¿‡åº¦ä½¿ç”¨</strong>ï¼šä¸æ˜¯æ‰€æœ‰çŠ¶æ€éƒ½éœ€è¦æ”¾å…¥ Piniaï¼Œç»„ä»¶æœ¬åœ°çŠ¶æ€ä»åº”ä½¿ç”¨ <code>ref</code> æˆ– <code>reactive</code></li>
<li><strong>ä¿æŒ Actions çº¯å‡€</strong>ï¼šè™½ç„¶å¯ä»¥ç›´æ¥ä¿®æ”¹çŠ¶æ€ï¼Œä½†å»ºè®®é€šè¿‡ actions è¿›è¡Œä¿®æ”¹ï¼Œä¾¿äºç»´æŠ¤å’Œè°ƒè¯•</li>
<li><strong>åˆ©ç”¨ DevTools</strong>ï¼šå……åˆ†åˆ©ç”¨ Vue DevTools çš„ Pinia é¢æ¿è¿›è¡ŒçŠ¶æ€è°ƒè¯•</li>
</ol>
<h2 data-id="heading-14">ç»“è¯­ï¼šè¿æ¥ Vue çŠ¶æ€ç®¡ç†çš„æ–°æ—¶ä»£</h2>
<p>Pinia çš„å‡ºç°å¹¶éå¶ç„¶ï¼Œå®ƒä»£è¡¨äº† Vue ç”Ÿæ€å‘æ›´ç®€æ´ã€æ›´ç±»å‹å®‰å…¨ã€æ›´ç¬¦åˆç°ä»£å¼€å‘ä½“éªŒçš„æ–¹å‘æ¼”è¿›ã€‚å®ƒä¿ç•™äº† Vuex çš„æ ¸å¿ƒæ€æƒ³ï¼ŒåŒæ—¶å»é™¤äº†å…¶ä¸­çš„ç¹å¤éƒ¨åˆ†ï¼Œæä¾›äº†æ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>å¯¹äºæ–°é¡¹ç›®ï¼ŒPinia æ— ç–‘æ˜¯é»˜è®¤çš„æœ€ä½³é€‰æ‹©ï¼›å¯¹äºç°æœ‰ Vuex é¡¹ç›®ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘é€æ­¥è¿ç§»ï¼Œäº«å—æ›´ä¼˜çš„å¼€å‘ä½“éªŒã€‚æ­£å¦‚ Vue åˆ›å§‹äººå°¤é›¨æºªæ‰€è¨€ï¼š"Pinia å°±æ˜¯ Vuex 5ï¼Œåªä¸è¿‡æˆ‘ä»¬å†³å®šå«å®ƒ Pinia"ã€‚</p>
<p>åœ¨çŠ¶æ€ç®¡ç†çš„ä¸–ç•Œé‡Œï¼Œæ²¡æœ‰ç»å¯¹çš„"æœ€å¥½"ï¼Œåªæœ‰"æœ€é€‚åˆ"ã€‚è€Œ Piniaï¼Œå‡­å€Ÿå…¶ç®€æ´çš„è®¾è®¡ã€å‡ºè‰²çš„ TypeScript æ”¯æŒå’Œä¸ Vue 3 çš„å®Œç¾èåˆï¼Œæ­£æˆä¸ºè¶Šæ¥è¶Šå¤š Vue å¼€å‘è€…çš„é¦–é€‰ã€‚å®ƒä¸ä»…æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œæ›´æ˜¯ Vue ç”Ÿæ€æˆç†Ÿå’Œè¿›æ­¥çš„æ ‡å¿—â€”â€”è®©æˆ‘ä»¬ä»¥æ›´å°‘çš„ä»£ç ï¼Œå®ç°æ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œäº«å—æ›´æ„‰å¿«çš„å¼€å‘è¿‡ç¨‹ã€‚</p>
<p>æ‹¥æŠ± Piniaï¼Œå°±æ˜¯æ‹¥æŠ± Vue çŠ¶æ€ç®¡ç†çš„æœªæ¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Mistral æ€æ¡Œäº†ï¼šDevstral 2 ä¸ Vibe CLI é‡å¡‘å¼€æºç¼–ç¨‹ä½“éªŒ]]></title>    <link>https://juejin.cn/post/7582063437414219814</link>    <guid>https://juejin.cn/post/7582063437414219814</guid>    <pubDate>2025-12-10T16:52:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582063437414219814" data-draft-id="7582063437414203430" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Mistral æ€æ¡Œäº†ï¼šDevstral 2 ä¸ Vibe CLI é‡å¡‘å¼€æºç¼–ç¨‹ä½“éªŒ"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2025-12-10T16:52:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨é£å¦‚é›ª"/> <meta itemprop="url" content="https://juejin.cn/user/4064249017803927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Mistral æ€æ¡Œäº†ï¼šDevstral 2 ä¸ Vibe CLI é‡å¡‘å¼€æºç¼–ç¨‹ä½“éªŒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4064249017803927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨é£å¦‚é›ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T16:52:43.000Z" title="Wed Dec 10 2025 16:52:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2025 å¹´çš„å¹´æœ«ï¼ŒAI ç¼–ç¨‹åœˆå­æ¯”ä»¥å¾€ä»»ä½•æ—¶å€™éƒ½è¦çƒ­é—¹ã€‚å°±åœ¨å¤§å®¶éƒ½ä»¥ä¸ºä»Šå¹´çš„å¤§æ¨¡å‹æ··æˆ˜å·²ç»å°˜åŸƒè½å®šçš„æ—¶å€™ï¼ŒMistral AI åœ¨ 12 æœˆ 9 æ—¥çªç„¶æ€äº†ä¸ªå›é©¬æªï¼Œå‘å¸ƒäº†å…¨æ–°çš„ <strong>Devstral 2</strong> ç¼–ç¨‹æ¨¡å‹å®¶æ—ï¼Œä»¥åŠä¸€ä¸ªè®©äººçœ¼å‰ä¸€äº®çš„ç»ˆç«¯å·¥å…· <strong>Mistral Vibe CLI</strong>ã€‚</p>
<p>è¿™æ¬¡å‘å¸ƒä¸ä»…ä»…æ˜¯ä¸¢å‡ºä¸¤ä¸ªæƒé‡æ–‡ä»¶é‚£ä¹ˆç®€å•ï¼ŒMistral æ˜¾ç„¶æ˜¯çœ‹å‡†äº†ç°åœ¨æœ€ç«çš„â€œAgentic Codingâ€ï¼ˆä»£ç†å¼ç¼–ç¨‹ï¼‰èµ›é“ï¼Œè¯•å›¾ç”¨å¼€æºæ–¹æ¡ˆå»åŠ¨ä¸€åŠ¨é—­æºå·¨å¤´ä»¬çš„å¥¶é…ªã€‚</p>
<p>å¦‚æœä½ æ˜¯å¼€å‘è€…ï¼Œæˆ–è€…æ˜¯å¯¹æœ¬åœ°éƒ¨ç½²æ„Ÿå…´è¶£çš„æŠ€æœ¯æå®¢ï¼Œè¿™æ¬¡æ›´æ–°é‡Œæœ‰å‡ ä¸ªå¿…é¡»è¦å…³æ³¨çš„ç¡¬æ ¸ç»†èŠ‚ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2FDevstral-Model-Performance-Comparison-Dark-1-1024x500.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/Devstral-Model-Performance-Comparison-Dark-1-1024x500.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54073f9490704ae19ea094f02cc3a66d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765990363&amp;x-signature=jEzm0u6nxK7gq70TAzWVI4NTKPg%3D" alt="Devstral - Model Performance Comparison (Dark) (1)" loading="lazy"/></a></p>
<h3 data-id="heading-0">æ‰€è°“çš„â€œVibe Codingâ€åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>Mistral è¿™æ¬¡ä¸»æ‰“çš„æ¦‚å¿µå¾ˆæœ‰æ„æ€ï¼Œå«â€œVibe Codingâ€ã€‚å¬èµ·æ¥ç„ä¹ï¼Œä½†è½åœ°åˆ°äº§å“ <strong>Mistral Vibe CLI</strong> ä¸Šï¼Œé€»è¾‘å…¶å®éå¸¸ç®€å•ç²—æš´ï¼šæŠŠ AI ä»å•çº¯çš„â€œèŠå¤©æ¡†â€é‡Œè§£æ”¾å‡ºæ¥ï¼Œç›´æ¥å¡è¿›ä½ çš„ç»ˆç«¯ï¼ˆTerminalï¼‰ã€‚</p>
<p>ä»¥å¾€æˆ‘ä»¬ç”¨ ChatGPT å†™ä»£ç ï¼Œæµç¨‹é€šå¸¸æ˜¯ï¼šå¤åˆ¶éœ€æ±‚ -&gt; ç²˜è´´ä»£ç  -&gt; æŠ¥é”™ -&gt; å†å¤åˆ¶æŠ¥é”™ã€‚è€Œ Vibe CLI æ˜¯ä¸€ä¸ªåŸç”Ÿçš„å‘½ä»¤è¡Œ Agentã€‚å®ƒèƒ½ç›´æ¥è¯»å–ä½ çš„æœ¬åœ°æ–‡ä»¶ç»“æ„ï¼Œç†è§£ Git çŠ¶æ€ï¼Œç”šè‡³å¸®ä½ æ‰§è¡Œ Shell å‘½ä»¤ã€‚</p>
<p>è¿™æ„å‘³ç€ä½ å¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯é‡Œå¯¹å®ƒè¯´ï¼šâ€œå¸®æˆ‘é‡æ„ä¸€ä¸‹ <code>auth.py</code>ï¼Œé¡ºä¾¿æŠŠç›¸å…³çš„æµ‹è¯•æ–‡ä»¶ä¹Ÿæ”¹äº†ã€‚â€å®ƒæ‹¥æœ‰å¤šæ–‡ä»¶ç¼–è¾‘çš„èƒ½åŠ›ï¼Œä¸å†æ˜¯â€œåªåŠ¨å£ä¸åŠ¨æ‰‹â€ï¼Œè€Œæ˜¯ç›´æ¥å¯¹ä»£ç åº“è¿›è¡Œæ‰‹æœ¯ã€‚å¯¹äºä¹ æƒ¯åœ¨ UNIX ç¯å¢ƒä¸‹å·¥ä½œçš„å¼€å‘è€…æ¥è¯´ï¼Œè¿™ç§æ— éœ€ç¦»å¼€ç»ˆç«¯çš„ä½“éªŒï¼Œç¡®å®å¾ˆâ€œVibeâ€ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2FDevstral-SWE-Bench-Verified-Regular-Performance-xModelsize-Dark-1024x589.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/Devstral-SWE-Bench-Verified-Regular-Performance-xModelsize-Dark-1024x589.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b874aa8980544ef8a4dfc7fd11c0642~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765990363&amp;x-signature=h29zdEfm3JEiTuvz0zhv6Wv3%2Bl8%3D" alt="Devstral - SWE-Bench Verified Regular Performance xModelsize (Dark)" loading="lazy"/></a></p>
<h3 data-id="heading-1">ç¡¬èœä¸Šæ¡Œï¼šä¸¤æ¬¾æ¨¡å‹ï¼Œä¸¤ç§æ‰“æ³•</h3>
<p>è¿™æ¬¡å‘å¸ƒçš„ Devstral 2 å®¶æ—åŒ…å«ä¸¤ä¸ªç‰ˆæœ¬ï¼Œåˆ€æ³•ç²¾å‡†ï¼Œåˆ†åˆ«ç„å‡†äº†ä¼ä¸šçº§ç”Ÿäº§åŠ›å’Œä¸ªäººå¼€å‘è€…ã€‚</p>
<p><strong>1. æ——èˆ°çŒ›å…½ï¼šDevstral 2 (123B)</strong></p>
<p>è¿™æ˜¯ä¸€å¤´å‚æ•°é‡çº¦ä¸º 1230 äº¿çš„åºç„¶å¤§ç‰©ã€‚å®ƒçš„å®šä½éå¸¸æ˜ç¡®ï¼šå¯¹æ ‡ç›®å‰å¸‚é¢ä¸Šæœ€å¼ºçš„é—­æºæ¨¡å‹ï¼ˆæ¯”å¦‚ Claude 3.5 Sonnetï¼‰ã€‚</p>
<ul>
<li><strong>èƒ½åŠ›ï¼š</strong> æ‹¥æœ‰ 256k çš„è¶…é•¿ä¸Šä¸‹æ–‡ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥ä¸€æ¬¡æ€§åä¸‹æ•´ä¸ªé¡¹ç›®çš„ä»£ç åº“ã€‚åœ¨ SWE-bench Verified åŸºå‡†æµ‹è¯•ä¸­ï¼Œå®ƒæ‹¿ä¸‹äº† 72.2% çš„é«˜åˆ†ã€‚è¿™ä¸ªæˆç»©ç›¸å½“æƒŠäººï¼Œè¦çŸ¥é“å®ƒæ˜¯ä¸€ä¸ªå¼€æºæƒé‡çš„æ¨¡å‹ã€‚</li>
<li><strong>æ“…é•¿ï¼š</strong> å¤æ‚çš„è·¨æ–‡ä»¶é‡æ„ã€æ¶æ„å±‚é¢çš„ç†è§£ã€ä»¥åŠä½œä¸º Agent è°ƒç”¨å„ç§å·¥å…·ã€‚</li>
<li><strong>æ³¨æ„ç‚¹ï¼š</strong> å®ƒçš„å¼€æºåè®®æ˜¯ <strong>Modified MIT</strong>ã€‚è™½ç„¶å…è®¸å•†ç”¨ï¼Œä½† Mistral ç•™äº†ä¸€æ‰‹ï¼šå¦‚æœä½ çš„å…¬å¸æœˆæ”¶å…¥è¶…è¿‡ 2000 ä¸‡ç¾å…ƒï¼Œä½¿ç”¨æ¡æ¬¾ä¼šæœ‰æ‰€é™åˆ¶ã€‚è¿™æ˜¾ç„¶æ˜¯ä¸ºäº†é˜²æ­¢ç§‘æŠ€å·¨å¤´ç›´æ¥ç™½å«–ã€‚</li>
</ul>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2FDevstral-SWE-Bench-Verified_-OpenWeights-vs-Proprietary-Models-Dark-1-1024x664.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/Devstral-SWE-Bench-Verified_-OpenWeights-vs-Proprietary-Models-Dark-1-1024x664.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e76be34094a4f8c988d7fdbfa1692f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765990363&amp;x-signature=WlBchjNSdB2I8zu7lhIPHI49XWg%3D" alt="Devstral - SWE-Bench Verified_ OpenWeights vs Proprietary Models (Dark) (1)" loading="lazy"/></a></p>
<p><strong>2. æ¡Œé¢å°é’¢ç‚®ï¼šDevstral Small 2 (24B)</strong></p>
<p>å¯¹äºå¤§å¤šæ•°æƒ³åœ¨æœ¬åœ°è·‘æ¨¡å‹çš„å¼€å‘è€…æ¥è¯´ï¼Œè¿™ä¸ª 240 äº¿å‚æ•°çš„ç‰ˆæœ¬æ‰æ˜¯çœŸæ­£çš„ç”œç‚¹ã€‚</p>
<ul>
<li><strong>æ€§ä»·æ¯”ï¼š</strong> å®ƒä½¿ç”¨äº†æ›´å®½æ¾çš„ <strong>Apache 2.0</strong> åè®®ï¼Œå®Œå…¨å¼€æºã€‚</li>
<li><strong>é…ç½®éœ€æ±‚ï¼š</strong> 24B çš„å¤§å°æ„å‘³ç€ä½ ä¸éœ€è¦æ‹¥æœ‰ H100 è¿™ç§æ ¸å¼¹çº§æ˜¾å¡ã€‚é«˜ç«¯æ¶ˆè´¹çº§æ˜¾å¡ï¼ˆå¦‚ 4090ï¼‰æˆ–è€… Mac Studio é…åˆé€‚å½“çš„é‡åŒ–ï¼Œå®Œå…¨å¯ä»¥åœ¨æœ¬åœ°æµç•…è¿è¡Œã€‚</li>
<li><strong>æ€§èƒ½ï¼š</strong> åˆ«çœ‹å®ƒå°ï¼Œå®ƒåœ¨åŸºå‡†æµ‹è¯•ä¸­è¾¾åˆ°äº† 68.0% çš„åˆ†æ•°ã€‚å®˜æ–¹å®£ç§°å®ƒçš„æ•ˆç‡æé«˜ï¼Œä¸ä»…æ¨ç†é€Ÿåº¦å¿«ï¼Œè€Œä¸”åœ¨å¤„ç†å¤šæ–‡ä»¶ç¼–è¾‘æ—¶çš„é€»è¾‘å¹¶ä¸è¾“ç»™å¾ˆå¤šå¤§å‚æ•°æ¨¡å‹ã€‚</li>
</ul>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆè¿™æ¬¡å‘å¸ƒå¾ˆé‡è¦ï¼Ÿ</h3>
<p>åœ¨ Devstral 2 ä¹‹å‰ï¼Œå¼€æºç¼–ç¨‹æ¨¡å‹è™½ç„¶å¤šï¼ˆæ¯”å¦‚ DeepSeek æ—©æœŸç‰ˆæœ¬ã€CodeLlama ç­‰ï¼‰ï¼Œä½†åœ¨â€œAgentâ€èƒ½åŠ›ä¸Šæ€»æ˜¯å·®ä¸€å£æ°”ã€‚æ‰€è°“çš„ Agent èƒ½åŠ›ï¼Œå°±æ˜¯æ¨¡å‹ä¸ä»…è¦ä¼šå†™ä»£ç ï¼Œè¿˜è¦çŸ¥é“æ€ä¹ˆä½¿ç”¨å·¥å…·ã€æ€ä¹ˆè‡ªæˆ‘çº é”™ã€æ€ä¹ˆåœ¨ä¸ç ´ååŸæœ‰é€»è¾‘çš„æƒ…å†µä¸‹ä¿®æ”¹å¤šä¸ªæ–‡ä»¶ã€‚</p>
<p>Mistral è¿™æ¬¡ç›´æ¥æŠŠâ€œè½¯ä»¶å·¥ç¨‹ï¼ˆSWEï¼‰â€ä½œä¸ºæ ¸å¿ƒè®­ç»ƒç›®æ ‡ã€‚å®˜æ–¹æ•°æ®æ˜¾ç¤ºï¼ŒDevstral 2 åœ¨å·¥å…·è°ƒç”¨å’Œå¤šæ­¥æ¨ç†ä¸Šçš„è¡¨ç°éå¸¸ç¨³å¥ã€‚è¿™å¡«è¡¥äº†å¼€æºé¢†åŸŸçš„ä¸€ä¸ªç©ºç™½ï¼šæˆ‘ä»¬éœ€è¦ä¸€ä¸ªèƒ½çœŸæ­£åƒâ€œå·¥ç¨‹å¸ˆâ€ä¸€æ ·æ€è€ƒï¼Œè€Œä¸ä»…ä»…æ˜¯åƒâ€œè‡ªåŠ¨è¡¥å…¨æœºå™¨â€ä¸€æ ·å·¥ä½œçš„æ¨¡å‹ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2FiShot_2025-12-11_00.39.55-1024x353.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/iShot_2025-12-11_00.39.55-1024x353.png" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3e7baba7b004e88b478fb3aed4257a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765990363&amp;x-signature=Sfziefk7Pj2meSOBw3sJNAzxuq8%3D" alt="iShot_2025-12-11_00.39.55" loading="lazy"/></a></p>
<h3 data-id="heading-3">å¦‚ä½•ä¸Šæ‰‹ï¼Ÿ</h3>
<p>ç›®å‰ä½“éªŒè¿™å¥—ç³»ç»Ÿä¸»è¦æœ‰ä¸‰æ¡è·¯ï¼š</p>
<ol>
<li><strong>å°é²œå…šï¼š</strong> ç›´æ¥å» Mistral å®˜æ–¹å¹³å°ç”³è¯· APIï¼Œç›®å‰æœ‰ä¸€æ®µå…è´¹ä½¿ç”¨æœŸã€‚è¿™æ˜¯ä½“éªŒæ»¡è¡€ç‰ˆ 123B æ¨¡å‹æœ€å¿«çš„æ–¹å¼ã€‚</li>
<li><strong>æœ¬åœ°å…šï¼š</strong> æ—¢ç„¶å¼€æºäº†ï¼ŒHugging Face ä¸Šå·²ç»æœ‰äº†æƒé‡ã€‚å¦‚æœä½ æœ‰æ˜¾å¡èµ„æºï¼Œæ‹‰å– Devstral Small 2 (24B)ï¼Œé…åˆ vLLM æˆ–è€… Ollamaï¼ˆç­‰å¾…ç¤¾åŒºé€‚é…ï¼‰ï¼Œå°±èƒ½åœ¨ç¦»çº¿ç¯å¢ƒä¸‹æ‹¥æœ‰ä¸€ä¸ªå¼ºåŠ›çš„ç¼–ç¨‹åŠ©æ‰‹ã€‚</li>
<li><strong>æå®¢å…šï¼š</strong> å®‰è£… <code>mistral-vibe</code> CLI å·¥å…·ã€‚åªè¦é…ç½®å¥½ç¯å¢ƒï¼Œä½ å°±èƒ½ä½“éªŒé‚£ç§â€œå¯¹ç€ç»ˆç«¯è¯´è¯ï¼Œä»£ç è‡ªåŠ¨ç”Ÿæˆâ€çš„æ„Ÿè§‰ã€‚å½“ç„¶ï¼Œå®˜æ–¹ä¹Ÿæé†’äº†ï¼Œåœ¨è®© AI ä¿®æ”¹æ ¸å¿ƒä»£ç å‰ï¼Œæœ€å¥½åœ¨ä¸€ä¸ªå—æ§çš„æµ‹è¯•åˆ†æ”¯é‡Œè¿›è¡Œï¼Œæ¯•ç«Ÿ AI å¶å°”ä¹Ÿä¼šâ€œå‘ç–¯â€ã€‚</li>
</ol>
<h3 data-id="heading-4">å†™åœ¨æœ€å</h3>
<p>Devstral 2 çš„å‡ºç°ï¼Œè®©å¼€æºç¼–ç¨‹æ¨¡å‹çš„æ°´å¹³åˆä¸Šäº†ä¸€ä¸ªå°é˜¶ã€‚å®ƒä¸å†æ»¡è¶³äºä»£ç è¡¥å…¨ï¼Œè€Œæ˜¯è¯•å›¾æ¥ç®¡æ›´å¤æ‚çš„å·¥ç¨‹ä»»åŠ¡ã€‚</p>
<p>å¯¹äºä¸ªäººå¼€å‘è€…è€Œè¨€ï¼Œ24B ç‰ˆæœ¬çš„ Apache 2.0 åè®®æ˜¯ä¸€ä»½å¤§ç¤¼ï¼›å¯¹äºä¼ä¸šè€Œè¨€ï¼Œ123B ç‰ˆæœ¬åˆ™æä¾›äº†ä¸€ä¸ªå¯ä»¥åœ¨ç§æœ‰ç¯å¢ƒéƒ¨ç½²çš„å¼ºåŠ›é€‰é¡¹ã€‚è™½ç„¶ç›®å‰è¿˜éœ€è¦æ—¶é—´æ¥éªŒè¯å®ƒåœ¨çœŸå®å¤æ‚é¡¹ç›®ä¸­çš„ç¨³å®šæ€§ï¼Œä½†è‡³å°‘ Mistral è¯æ˜äº†ä¸€ä»¶äº‹ï¼šåœ¨ä»£ç æ™ºèƒ½è¿™æ¡èµ›é“ä¸Šï¼Œå¼€æºç¤¾åŒºä¾ç„¶æ‹¥æœ‰ä¸é—­æºå·¨å¤´å«æ¿çš„åº•æ°”ã€‚</p>
<p><strong>å¦‚æœä½ ä¹Ÿå¯¹æœ€æ–°çš„AIä¿¡æ¯æ„Ÿå…´è¶£æˆ–è€…æœ‰ç–‘é—® éƒ½å¯ä»¥åŠ å…¥æˆ‘çš„å¤§å®¶åº­ ç¬¬ä¸€æ—¶é—´åˆ†äº«æœ€æ–°AIèµ„è®¯ã€å·¥å…·ã€æ•™ç¨‹ã€æ–‡æ¡£ æ¬¢è¿ä½ çš„åŠ å…¥ï¼ï¼ï¼ğŸ˜‰ğŸ˜‰ğŸ˜‰</strong></p>
<p>å…¬ä¼—å·ï¼šå¢¨é£å¦‚é›ªå°ç«™</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Nettyï¼ˆ4ï¼‰Nettyçš„Channelæ˜¯ä»€ä¹ˆï¼Ÿå®ƒæœ‰å“ªäº›ç±»å‹ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7582039917217824768</link>    <guid>https://juejin.cn/post/7582039917217824768</guid>    <pubDate>2025-12-10T23:07:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582039917217824768" data-draft-id="7582044568721473576" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Nettyï¼ˆ4ï¼‰Nettyçš„Channelæ˜¯ä»€ä¹ˆï¼Ÿå®ƒæœ‰å“ªäº›ç±»å‹ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-10T23:07:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Nettyï¼ˆ4ï¼‰Nettyçš„Channelæ˜¯ä»€ä¹ˆï¼Ÿå®ƒæœ‰å“ªäº›ç±»å‹ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T23:07:15.000Z" title="Wed Dec 10 2025 23:07:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨Nettyä¸­ï¼ŒChannelï¼ˆé€šé“ï¼‰æ˜¯ç½‘ç»œæ“ä½œçš„æŠ½è±¡æ¦‚å¿µï¼Œå®ƒä»£è¡¨ä¸€ä¸ªå¼€æ”¾çš„è¿æ¥ï¼Œå¯ä»¥è¿›è¡Œæ•°æ®çš„è¯»å–å’Œå†™å…¥ã€‚Channelæä¾›äº†å¼‚æ­¥çš„ã€äº‹ä»¶é©±åŠ¨çš„æ–¹å¼å¤„ç†æ•°æ®çš„ä¼ è¾“å’Œæ“ä½œã€‚</p>
<p>Nettyæä¾›äº†å¤šç§ç±»å‹çš„Channelï¼Œä»¥é€‚åº”ä¸åŒçš„ç½‘ç»œåè®®å’Œä¼ è¾“æ–¹å¼ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„Channelç±»å‹ï¼š</p>
<ol>
<li>
<p>NioSocketChannelï¼šåŸºäºJava NIOçš„SocketChannelï¼Œç”¨äºTCPå®¢æˆ·ç«¯ã€‚</p>
</li>
<li>
<p>NioServerSocketChannelï¼šåŸºäºJava NIOçš„ServerSocketChannelï¼Œç”¨äºTCPæœåŠ¡å™¨ã€‚</p>
</li>
<li>
<p>NioDatagramChannelï¼šåŸºäºJava NIOçš„DatagramChannelï¼Œç”¨äºUDPé€šä¿¡ã€‚</p>
</li>
<li>
<p>EmbeddedChannelï¼šç”¨äºæµ‹è¯•å’Œå†…åµŒå¼å¤„ç†ã€‚</p>
</li>
<li>
<p>OioSocketChannelï¼šåŸºäºä¼ ç»Ÿçš„é˜»å¡å¼I/Oçš„SocketChannelï¼Œç”¨äºTCPå®¢æˆ·ç«¯ã€‚</p>
</li>
<li>
<p>OioServerSocketChannelï¼šåŸºäºä¼ ç»Ÿçš„é˜»å¡å¼I/Oçš„ServerSocketChannelï¼Œç”¨äºTCPæœåŠ¡å™¨ã€‚</p>
</li>
</ol>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ä»£ç ï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨Nettyçš„NioSocketChannelï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> io.netty.bootstrap.Bootstrap;
<span class="hljs-keyword">import</span> io.netty.channel.ChannelFuture;
<span class="hljs-keyword">import</span> io.netty.channel.ChannelHandlerContext;
<span class="hljs-keyword">import</span> io.netty.channel.ChannelInitializer;
<span class="hljs-keyword">import</span> io.netty.channel.EventLoopGroup;
<span class="hljs-keyword">import</span> io.netty.channel.nio.NioEventLoopGroup;
<span class="hljs-keyword">import</span> io.netty.channel.socket.SocketChannel;
<span class="hljs-keyword">import</span> io.netty.channel.socket.nio.NioSocketChannel;
<span class="hljs-keyword">import</span> io.netty.handler.codec.string.StringDecoder;
<span class="hljs-keyword">import</span> io.netty.handler.codec.string.StringEncoder;
<span class="hljs-keyword">import</span> io.netty.handler.logging.LogLevel;
<span class="hljs-keyword">import</span> io.netty.handler.logging.LoggingHandler;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChannelExample</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">HOST</span> <span class="hljs-operator">=</span> &amp;#<span class="hljs-number">34</span>;localhost&amp;#<span class="hljs-number">34</span>;;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">PORT</span> <span class="hljs-operator">=</span> <span class="hljs-number">8080</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">EventLoopGroup</span> <span class="hljs-variable">group</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NioEventLoopGroup</span>();

        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Bootstrap</span> <span class="hljs-variable">bootstrap</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bootstrap</span>();
            bootstrap.group(group)
                    .channel(NioSocketChannel.class)
                    .handler(<span class="hljs-keyword">new</span> <span class="hljs-title class_">LoggingHandler</span>(LogLevel.INFO))
                    .handler(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ChannelInitializer</span>() {
                        <span class="hljs-meta">@Override</span>
                        <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initChannel</span><span class="hljs-params">(SocketChannel ch)</span> <span class="hljs-keyword">throws</span> Exception {
                            ch.pipeline().addLast(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringDecoder</span>(), <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringEncoder</span>(), <span class="hljs-keyword">new</span> <span class="hljs-title class_">EchoClientHandler</span>());
                        }
                    });

            <span class="hljs-type">ChannelFuture</span> <span class="hljs-variable">future</span> <span class="hljs-operator">=</span> bootstrap.connect(HOST, PORT).sync();
            future.channel().closeFuture().sync();
        } <span class="hljs-keyword">finally</span> {
            group.shutdownGracefully();
        }
    }
}

<span class="hljs-keyword">import</span> io.netty.channel.ChannelHandlerContext;
<span class="hljs-keyword">import</span> io.netty.channel.ChannelInboundHandlerAdapter;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EchoClientHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ChannelInboundHandlerAdapter</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">channelActive</span><span class="hljs-params">(ChannelHandlerContext ctx)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> &amp;#<span class="hljs-number">34</span>;Hello, Netty!&amp;#<span class="hljs-number">34</span>;;
        ctx.writeAndFlush(message); <span class="hljs-comment">// å‘é€æ¶ˆæ¯ç»™æœåŠ¡å™¨</span>
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">channelRead</span><span class="hljs-params">(ChannelHandlerContext ctx, Object msg)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> (String) msg;
        System.out.println(&amp;#<span class="hljs-number">34</span>;Received message: &amp;#<span class="hljs-number">34</span>; + message);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">exceptionCaught</span><span class="hljs-params">(ChannelHandlerContext ctx, Throwable cause)</span> <span class="hljs-keyword">throws</span> Exception {
        cause.printStackTrace();
        ctx.close(); <span class="hljs-comment">// å‘ç”Ÿå¼‚å¸¸æ—¶å…³é—­è¿æ¥</span>
    }
}
</code></pre>
<p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†NioSocketChannelä½œä¸ºå®¢æˆ·ç«¯çš„Channelç±»å‹ã€‚åœ¨Bootstrapçš„é…ç½®ä¸­ï¼Œæˆ‘ä»¬æŒ‡å®šäº†é€šé“ç±»å‹ï¼ˆNioSocketChannelï¼‰å’Œæ—¥å¿—å¤„ç†å™¨ï¼ˆLoggingHandlerï¼‰ã€‚åœ¨initChannelæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ äº†è‡ªå®šä¹‰çš„ChannelHandlerï¼ˆEchoClientHandlerï¼‰æ¥å¤„ç†äº‹ä»¶å’Œæ•°æ®ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¼–ç¨‹ç•Œ è¯­è¨€ç¥ : èµ¶ç´§èµ·æ¥å­¦ Rust äº†ï¼]]></title>    <link>https://juejin.cn/post/7582048028393373746</link>    <guid>https://juejin.cn/post/7582048028393373746</guid>    <pubDate>2025-12-10T16:04:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582048028393373746" data-draft-id="7582021506190671918" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¼–ç¨‹ç•Œ è¯­è¨€ç¥ :  èµ¶ç´§èµ·æ¥å­¦ Rust äº†ï¼"/> <meta itemprop="keywords" content="Rust"/> <meta itemprop="datePublished" content="2025-12-10T16:04:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Pomelo_åˆ˜é‡‘"/> <meta itemprop="url" content="https://juejin.cn/user/3450694359320669"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¼–ç¨‹ç•Œ è¯­è¨€ç¥ :  èµ¶ç´§èµ·æ¥å­¦ Rust äº†ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3450694359320669/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Pomelo_åˆ˜é‡‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T16:04:53.000Z" title="Wed Dec 10 2025 16:04:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å¤§å®¶å¯¹ Rust çš„å°è±¡</h3>
<h4 data-id="heading-1">æ²¡æ¥è§¦è¿‡çš„ï¼š</h4>
<p>ç¼–ç¨‹ç•Œè¯­è¨€ç¥</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c41de4bc9dd44d385e4eb9ad5825f61~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=Jofl81ph00TkT7yfruU%2FF4Joe1U%3D" alt="" loading="lazy"/></p>
<p>æ•´å¤©é‡æ„è¿™é‡æ„é‚£</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f0cb62cb94945b28a52dd6a8c753840~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=7%2F2aauWbpkFYgUlc3cL%2BsYQn6dk%3D" alt="" loading="lazy"/></p>
<p>è¿˜è¦ è¦å¹²æ‰ c++ ï¼Ÿï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d39230df4feb43609e29d3ed746e30ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=P%2BteFptRNIorUS7ECNNaISWzb7w%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-2">ç¨å¾®äº†è§£è¿‡çš„ï¼š</h4>
<p>å­¦ä¹ æ›²çº¿ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d5a3e2eb19f4b54a86bc041e0255107~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=QZ0YHpW1AqFHDs1DwOoJzPr6aZ8%3D" alt="" loading="lazy"/></p>
<p>ä½†å®é™…ä¸Šæ˜¯ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02b26ef56db8422fb822791344cfd65a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=thEHuZ%2BuHYyoxsmmrT1bd1zJVrw%3D" alt="" loading="lazy"/></p>
<p>ç¬¬ä¸€ä¸ªé«˜å³°æ˜¯ å€Ÿç”¨æ£€æŸ¥å™¨ï¼Œç¬¬äºŒä¸ªæ˜¯å¼‚æ­¥ï¼Œç¬¬ä¸‰ä¸ªæ˜¯unsafeï¼Œç¬¬å››ä¸ªæ˜¯å®æ€ä¹ˆç©ï¼Ÿ</p>
<h4 data-id="heading-3">å¼€å§‹æ¥è§¦ä¹‹å</h4>
<p>ç¼–è¯‘å™¨ä¸è®©æˆ‘å†™ä»£ç ï¼Œæ€ä¹ˆå†™éƒ½æŠ¥é”™</p>
<p>å†™ rust ä»£ç åƒæ˜¯åœ¨è·Ÿ rust ç¼–è¯‘å™¨è°ˆå¯¹è±¡ ï¼Œ</p>
<p>æˆ‘åªæ˜¯ä¼ ä¸ªå‚æ•°ï¼Œä½ è·Ÿæˆ‘è®²æ‰€æœ‰æƒã€å€Ÿç”¨ã€ç”Ÿå‘½å‘¨æœŸï¼Ÿâ€</p>
<h4 data-id="heading-4">å†™çš„ä»£ç ä¸Šçº¿ä¹‹åï¼Œè¿˜ä¸é”™å“¦</h4>
<blockquote>
<ul>
<li>â€œåˆ«çš„è¯­è¨€é¡¹ç›®ä¸Šçº¿æµç¨‹â€</li>
<li>å†…å®¹ï¼š</li>
<li>ç¼–è¯‘ âœ”</li>
<li>æµ‹è¯•ï¼ˆå¶å°”æŒ‚ä¸€ä¸¤æ¡ï¼‰âœ”</li>
<li>ä¸Šçº¿åï¼šåŠå¤œè¢«ç”µè¯å«é†’ï¼šâŒ</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>â€œRust é¡¹ç›®ä¸Šçº¿æµç¨‹â€</li>
<li>å†…å®¹ï¼š</li>
<li>ç¼–è¯‘ âŒ âŒ âŒ âŒ âŒ ï¼ˆä¸‰å¤©åï¼‰</li>
<li>ç¼–è¯‘ âœ”</li>
<li>æµ‹è¯• ï¼ˆå¶å°”æŒ‚ä¸€ä¸¤æ¡ï¼‰âœ”</li>
<li>ä¸Šçº¿ï¼šåŸºæœ¬æ²¡äººæ‰“ç”µè¯ âœ…</li>
</ul>
</blockquote>
<p>ç”±æ­¤å¤§å®¶å¯èƒ½æœ‰ç‚¹æ„Ÿå—åˆ°æˆ‘æƒ³ä¸‹ä¸€æ­¥æƒ³è¯´ä»€ä¹ˆäº†</p>
<p>ä»¥åŠå¤§å®¶å¯èƒ½äº§ç”Ÿäº†ä¸€ä¸ªç–‘æƒ‘</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f49a2a6b0f04f3f8dcd97ad6490b13e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=fk7vTEnoxg771EB0VrLqX3xCl%2Fc%3D" alt="" loading="lazy"/></p>
<p>Rust çœŸçš„èƒ½å‡å°‘ bug ä¹ˆï¼Œå¹ç‰›å§</p>
<h3 data-id="heading-5">Rust æ˜¯å¦èƒ½å‡å°‘ bug ï¼Ÿ</h3>
<p>Rust æœ€è‘—åçš„æ‰¿è¯ºæ˜¯<strong>å†…å­˜å®‰å…¨ï¼ˆMemory Safetyï¼‰å’Œçº¿ç¨‹å®‰å…¨ï¼ˆThread Safetyï¼‰</strong> ï¼Œå¦‚æœæ˜¯çœŸçš„ï¼Œè¿™ç›´æ¥æ¶ˆç­äº†ä¸¤ç±»æœ€è®©å¤§å…¬å¸å¤´ç–¼çš„ Bugã€‚</p>
<h4 data-id="heading-6">Google (Android å®‰å…¨å›¢é˜Ÿ)</h4>
<ul>
<li>
<p>æ–‡ç« é“¾æ¥ï¼š</p>
</li>
<li>
<p>å…³é”®ç‚¹</p>
<ul>
<li>Â Â We adopted Rust for its security and are seeing <strong>a 1000x reduction in memory safety vulnerability density compared to Androidâ€™s C and C++ code</strong>. But the biggest surprise was Rust's impact on software delivery. With Rust changes having <strong>a 4x lower rollback rate</strong> and spending <strong>25% less time</strong> <strong>in</strong> <strong>code review</strong>, the safer path is now also the faster one.</li>
<li>Â Â æˆ‘ä»¬é‡‡ç”¨ Rust æ˜¯å› ä¸ºå®ƒå®‰å…¨æ€§é«˜ï¼Œä¸ Android çš„ C å’Œ C++ ä»£ç ç›¸æ¯”ï¼Œå†…å­˜å®‰å…¨æ¼æ´å¯†åº¦é™ä½äº† 1000 å€ã€‚ä½†æœ€å¤§çš„æƒŠå–œæ˜¯ Rust å¯¹è½¯ä»¶äº¤ä»˜çš„å½±å“ã€‚Rust çš„å˜æ›´å›æ»šç‡é™ä½äº† 4 å€ï¼Œä»£ç å®¡æŸ¥æ—¶é—´ä¹Ÿå‡å°‘äº† 25% ï¼Œæ›´å®‰å…¨çš„è·¯å¾„ç°åœ¨ä¹Ÿæ›´å¿«äº†ã€‚</li>
<li/>
</ul>
</li>
<li>
<p>æ–‡ç« é“¾æ¥ï¼š</p>
</li>
<li>
<p><strong>å…³é”®å¥</strong></p>
<ul>
<li>
<p>Â Â To date, there have been zero memory safety vulnerabilities discovered in Androidâ€™s Rust code.</p>
</li>
<li>
<p>Â Â We donâ€™t expect that number to stay zero forever, but given the volume of new Rust code across two Android releases, and the security-sensitive components where itâ€™s being used, itâ€™s a significant result. It demonstrates that Rust is fulfilling its intended purpose of preventing Androidâ€™s most common source of vulnerabilities. Historical vulnerability density is greater than 1/kLOC (1 vulnerability per thousand lines of code) in many of Androidâ€™s C/C++ components (e.g. media, Bluetooth, NFC, etc). Based on this historical vulnerability density, itâ€™s likely that using Rust has already prevented hundreds of vulnerabilities from reaching production.</p>
</li>
<li>
<p>Â Â è¿„ä»Šä¸ºæ­¢ï¼ŒAndroid çš„ Rust ä»£ç ä¸­å°šæœªå‘ç°ä»»ä½•å†…å­˜å®‰å…¨æ¼æ´ã€‚</p>
</li>
<li>
<p>Â Â æˆ‘ä»¬å¹¶ä¸æŒ‡æœ›è¿™ä¸ªæ•°å­—æ°¸è¿œä¸ºé›¶ï¼Œä½†è€ƒè™‘åˆ°ä¸¤ä¸ª Android ç‰ˆæœ¬ä¸­æ–°å¢çš„ Rust ä»£ç é‡ï¼Œä»¥åŠ Rust è¢«ç”¨äºå®‰å…¨æ•æ„Ÿç»„ä»¶ï¼Œè¿™ç¡®å®æ˜¯ä¸€ä¸ªæ„ä¹‰é‡å¤§çš„ç»“æœã€‚å®ƒè¡¨æ˜ Rust æ­£åœ¨å®ç°å…¶é¢„æœŸç›®æ ‡ï¼Œå³é˜²æ­¢ Android æœ€å¸¸è§çš„æ¼æ´æ¥æºã€‚åœ¨ Android çš„è®¸å¤š C/C++ ç»„ä»¶ï¼ˆä¾‹å¦‚åª’ä½“ã€è“ç‰™ã€NFC ç­‰ï¼‰ä¸­ï¼Œå†å²æ¼æ´å¯†åº¦è¶…è¿‡ 1/kLOCï¼ˆæ¯åƒè¡Œä»£ç ä¸€ä¸ªæ¼æ´ï¼‰ã€‚åŸºäºè¿™ç§å†å²æ¼æ´å¯†åº¦ï¼ŒRust çš„ä½¿ç”¨å¾ˆå¯èƒ½å·²ç»é˜»æ­¢äº†æ•°ç™¾ä¸ªæ¼æ´è¿›å…¥ç”Ÿäº§ç¯å¢ƒã€‚</p>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-7">Microsoft (MSRC)</h4>
<p>è¿™æ˜¯å¾®è½¯æ‰¿è®¤ C/C++ å±€é™æ€§çš„é‡Œç¨‹ç¢‘å¼æ–‡ç« ï¼Œä¹Ÿæ˜¯â€œ70% æ¼æ´è®ºâ€çš„å‡ºå¤„ã€‚</p>
<ul>
<li>
<p>æ–‡ç« é“¾æ¥ï¼š-</p>
</li>
<li>
<p>å…³é”®å¥ï¼š</p>
<ul>
<li>
<p>Â Â roughly 70% of the security issues that the MSRC assigns a CVE to are memory safety issues. This means that if that software had been written in Rust, 70% of these security issues would most likely have been eliminated</p>
</li>
<li>
<p>Â Â å¤§çº¦ 70% æ˜¯å†…å­˜å®‰å…¨é—®é¢˜ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœè¿™äº›è½¯ä»¶æ˜¯ç”¨ Rust ç¼–å†™çš„ï¼Œé‚£ä¹ˆå…¶ä¸­ 70% çš„å®‰å…¨é—®é¢˜å¾ˆå¯èƒ½å·²è¢«æ¶ˆé™¤ã€‚</p>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-8">AWS</h4>
<ul>
<li>
<p>æ–‡ç« é“¾æ¥ï¼š</p>
</li>
<li>
<p>å…³é”®ç‚¹</p>
<ul>
<li>
<p>Â Â  Rust uses a strict type system and ownership model to achieve compile-time verification of memory and concurrency safety, making the cost of testing and validating Rust implementations significantly lower than C/C++. Carl Lerche, a principal AWS engineer, says Rust and Tokio give AWS the ability to write services that respond fast, reliably, and that help us offer a better customer experience.</p>
</li>
<li>
<p>Â Â Rust ä½¿ç”¨ä¸¥æ ¼çš„ç±»å‹ç³»ç»Ÿå’Œæ‰€æœ‰æƒæ¨¡å‹ï¼Œå®ç°äº†å†…å­˜å’Œå¹¶å‘å®‰å…¨æ€§çš„ç¼–è¯‘æ—¶éªŒè¯ï¼Œä½¿å¾— Rust å®ç°çš„æµ‹è¯•å’ŒéªŒè¯æˆæœ¬è¿œä½äº C/C++ã€‚AWS é¦–å¸­å·¥ç¨‹å¸ˆ Carl Lerche è¡¨ç¤ºï¼ŒRust å’Œ Tokio è®© AWS èƒ½å¤Ÿç¼–å†™å“åº”è¿…é€Ÿã€å¯é ä¸”æœ‰åŠ©äºæä¾›æ›´ä½³å®¢æˆ·ä½“éªŒçš„æœåŠ¡ã€‚</p>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-9">ä¸ºä»€ä¹ˆ bug å°‘ï¼Ÿ</h4>
<p>Rust çš„è®¾è®¡ç†å¿µä»¥åŠæ€è·¯æ˜¯</p>
<p>æˆ‘ä¸ç›¸ä¿¡ç¨‹åºå‘˜èƒ½å†™å‡ºå¥å£®çš„ç¨‹åºï¼Œä½ è¦æƒ³ä½ çš„ç¨‹åºæ²¡æœ‰å†…å­˜å®‰å…¨é—®é¢˜ï¼ŒæŒ‰ç…§æˆ‘è¯´çš„åšã€‚</p>
<p>ç»“æœå‘¢ï¼Œå°±æ˜¯ å°†ä¸Šçº¿æœŸæ‰ä¼šæš´éœ²çš„ é—®é¢˜ï¼Œæå‰åˆ°ç¼–è¯‘æœŸå°±å‘Šè¯‰ä½ ï¼Œè¿™æ ·å†™ä¸è¡Œï¼Œä¼šå‡ºé—®é¢˜ã€‚</p>
<p>é‚£å…·ä½“æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ</p>
<p><strong>Rust çš„ 3 æ¡â€œçº¦æ³•ä¸‰ç« â€ï¼š</strong></p>
<ol>
<li>
<p>æ‰€æœ‰æƒ / å€Ÿç”¨ï¼ˆä¸è®²åè¯ï¼Œåªè®²è§„åˆ™ï¼‰</p>
</li>
<li>
<p>ç©ºå€¼ / Optional çš„æ€åº¦</p>
</li>
<li>
<p>å¹¶å‘ / æ•°æ®ç«äº‰çš„é™åˆ¶</p>
</li>
</ol>
<p>çº¦æ³•ä¸€ï¼šè°è´Ÿè´£èµ„æºï¼Œå†™æ­»ï¼Œä¸è®¸ç³Šå¼„</p>
<blockquote>
<p>â€œRust çš„ç¬¬ä¸€ä¸ªåŸåˆ™ï¼š <strong>â€˜æ¯ä¸€å—èµ„æºï¼Œå¿…é¡»æœ‰æ˜ç¡®çš„å”¯ä¸€â€œè´Ÿè´£äººâ€ã€‚â€™</strong></p>
<ul>
<li>è°åˆ›å»ºå®ƒ</li>
<li>å®ƒèƒ½æ´»å¤šä¹…</li>
<li>è°å¯ä»¥åŠ¨å®ƒ</li>
</ul>
<p>è¿™äº›ä¸œè¥¿ä¸æ˜¯é çº¦å®šï¼Œè€Œæ˜¯ç¼–è¯‘å™¨åœ¨å¸®ä½ è¿½è¸ªã€‚â€</p>
</blockquote>
<p>çº¦æ³•äºŒï¼šå¯èƒ½å¤±è´¥ / å¯èƒ½ä¸ºç©ºï¼Œå¿…é¡»å†™åœ¨ç±»å‹ä¸Š</p>
<p>ä» Go / JS è§’åº¦è§£é‡Š <code>Result</code> / <code>Option</code> çš„æ€æƒ³ï¼Œè€Œä¸æ˜¯è¯­æ³•ã€‚</p>
<p>ä½ å¯ä»¥è¿™æ ·è®²ï¼š</p>
<blockquote>
<p>â€œç¬¬äºŒä¸ªåŸåˆ™ï¼š <strong>â€˜å¯èƒ½å¤±è´¥ã€å¯èƒ½ä¸º null çš„åœ°æ–¹ï¼Œå¿…é¡»åœ¨ç±»å‹ä¸Šå†™æ¸…æ¥šï¼Œä¸èƒ½å·å·æ‘¸æ‘¸ã€‚â€™</strong></p>
<p>åœ¨ Go é‡Œï¼š</p>
<ul>
<li>å¾ˆå¤šå‡½æ•°ç­¾åæ˜¯ï¼š<code>(T, error)</code></li>
<li>ä½†æˆ‘ä»¬å¯ä»¥é€‰æ‹©å¿½ç•¥ <code>error</code>ï¼Œç”šè‡³ <code>_ = xxx</code>ã€‚</li>
</ul>
<p>åœ¨ Rust é‡Œï¼Œç±»ä¼¼çš„ä¸œè¥¿ä¼šæ˜¯ï¼š</p>
<ul>
<li><code>Result</code>ï¼šæˆ‘å¯èƒ½æˆåŠŸä¹Ÿå¯èƒ½å¤±è´¥</li>
<li><code>Option</code>ï¼šæˆ‘å¯èƒ½æœ‰å€¼ä¹Ÿå¯èƒ½æ²¡å€¼</li>
</ul>
<p>åŒºåˆ«åœ¨äºï¼š <strong>Rust ä¸å¤ªå…è®¸ä½ è£…ä½œâ€˜å®ƒä¸€å®šæ²¡é—®é¢˜â€™ã€‚</strong> <strong>ä½ ä¸å¤„ç†ï¼Œè¿™æ®µä»£ç å°±è¿‡ä¸äº†ç¼–è¯‘ã€‚</strong> â€</p>
</blockquote>
<blockquote>
<p>â€œRustï¼šä½ å¯ä»¥èœï¼Œä½†ä½ ä¸èƒ½ä¸è®¤çœŸã€‚ Go / JSï¼šä½ è¦æ˜¯æƒ³ç³Šå¼„ä¸€ä¸‹ï¼Œæˆ‘ä¹Ÿä¸æ‹¦ä½ ã€‚â€</p>
</blockquote>
<p>è®©å¤§å®¶æ„Ÿå—åˆ°ï¼š <strong>Rust æŠŠâ€œé”™è¯¯/ç©ºå€¼â€ä»â€œçº¦å®šâ€å˜æˆäº†â€œåˆ¶åº¦â€ã€‚</strong></p>
<p>çº¦æ³•ä¸‰ï¼šå¹¶å‘è®¿é—®æ•°æ®ï¼Œå…ˆè¯´æ¸…æ¥šæ€ä¹ˆç”¨</p>
<blockquote>
<p>â€œRust çš„å¹¶å‘å“²å­¦ï¼š <strong>â€˜è¦ä¹ˆä½ ä¿è¯è¿™ä»½æ•°æ®åªæœ‰ä¸€ä¸ªäººèƒ½æ”¹ï¼Œè¦ä¹ˆå¤§å®¶éƒ½åªèƒ½çœ‹ä¸èƒ½æ”¹ã€‚â€™</strong></p>
<p>ç¼–è¯‘å™¨ä¼šåœ¨ä½ å¯åŠ¨çº¿ç¨‹çš„é‚£ä¸€åˆ»ï¼Œå°±æ£€æŸ¥ï¼š</p>
<ul>
<li>ä½ æ˜¯ä¸æ˜¯æŠŠä¸€ä¸ªä¼šè¢«å¤šå¤„åŒæ—¶ä¿®æ”¹çš„ä¸œè¥¿åˆ°å¤„ä¹±ä¼ </li>
<li>ä½ æ˜¯ä¸æ˜¯æŠŠä¸€ä¸ªçŸ­å‘½çš„æ•°æ®å€Ÿç»™äº†æ´»å¾—æ¯”å®ƒä¹…çš„çº¿ç¨‹</li>
</ul>
<p>å¦‚æœæœ‰è¿™ç§å¯èƒ½æ€§ï¼š <strong>â€”â€”ç›´æ¥ä¸ç»™ä½ ç¼–è¯‘é€šè¿‡ã€‚</strong></p>
</blockquote>
<h3 data-id="heading-10">Rust æ€§èƒ½æ€ä¹ˆæ ·å‘¢ï¼Ÿ</h3>
<p>å¼€å‘è€…æ ¹æ® <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.oschina.net%2Faction%2FGoToLink%3Furl%3Dhttps%253A%252F%252Fbenchmarksgame-team.pages.debian.net%252Fbenchmarksgame%252Findex.html" target="_blank" title="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fbenchmarksgame-team.pages.debian.net%2Fbenchmarksgame%2Findex.html" ref="nofollow noopener noreferrer">The Benchmarks Game</a> çš„æµ‹è¯•æ•°æ®åˆ¶ä½œäº†ä¸€ä»½å¯è§†åŒ–å›¾è¡¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œç°è‰²åæ˜ çš„æ˜¯æ—¶é—´æ•ˆç‡ï¼Œè¶ŠçŸ­ä»£è¡¨æ€§èƒ½è¶Šå¥½ï¼Œæ£•è‰²åˆ™æ˜¯åŸºäºæ‰§è¡Œæ—¶é—´å’Œå†…å­˜å¼€é”€çš„åŠ æƒå€¼ã€‚ ï¼ˆè®¡ç®—æœºè¯­è¨€åŸºå‡†æµ‹è¯•æ¸¸æˆï¼ˆä»¥å‰ç§°ä¸ºè®¡ç®—æœºè¯­è¨€å¤§æ¯”æ‹¼ï¼‰æ˜¯ä¸€ä¸ª<a href="https://link.juejin.cn?target=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FFree_software" target="_blank" title="https://en.wikipedia.org/wiki/Free_software" ref="nofollow noopener noreferrer">è‡ªç”±è½¯ä»¶é¡¹ç›®ï¼Œç”¨äºæ¯”è¾ƒç»™å®šçš„ç®€å•</a><a href="https://link.juejin.cn?target=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FAlgorithms" target="_blank" title="https://en.wikipedia.org/wiki/Algorithms" ref="nofollow noopener noreferrer">ç®—æ³•</a>å­é›†å¦‚ä½•åœ¨å„ç§æµè¡Œçš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FProgramming_languages" target="_blank" title="https://en.wikipedia.org/wiki/Programming_languages" ref="nofollow noopener noreferrer">ç¼–ç¨‹è¯­è¨€</a>ä¸­å®ç°ã€‚ï¼‰</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c11ef98abb9d41ce8e328359cdb300c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=5%2BI0sPGzuvsWPup7GZGfD%2BQX2%2Fo%3D" alt="" loading="lazy"/></p>
<p>Web æ¡†æ¶æ€§èƒ½å¯¹æ¯”</p>
<p>å¯ä»¥çœ‹åˆ°æœ€å¿«çš„10ä¸ªæ¡†æ¶ä¸­ Rust å‰åå ä¸ƒ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6cbd9f3b806d42acaa2501fd629af153~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=dFz%2F3pAya%2B2hfa%2FPdqS1ea7UHp8%3D" alt="" loading="lazy"/></p>
<p>AWS Lambda å†·å¯åŠ¨æ—¶é—´ï¼ˆServerless åœºæ™¯ï¼‰â€œå†·å¯åŠ¨â€å°±æ˜¯ä½ çš„ç¨‹åºä»â€œæ²‰ç¡â€åˆ°â€œå®Œå…¨å”¤é†’å¹¶å¼€å§‹å·¥ä½œâ€æ‰€éœ€çš„æ—¶é—´ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5300c75b748c46908c92c7c6e018a1c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=AainNr9ju2SP9EVPp77DQoWhvlo%3D" alt="" loading="lazy"/></p>
<p>è¿˜æœ‰ä¸ªç‰¹æ®Šè§†è§’ï¼šèƒ½è€—ï¼š</p>
<p>è·‘å®ŒåŒä¸€ä¸ªä»»åŠ¡éœ€è¦æ¶ˆè€—å¤šå°‘ç„¦è€³çš„ç”µ ï¼Œè¿™å¯¹äºäº‘åŸç”Ÿæ—¶ä»£ï¼ˆç”µè´¹å³æˆæœ¬ï¼‰éå¸¸é‡è¦ã€‚</p>
<p>è®ºæ–‡ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e20fbda1f2a247969ddbf9ebae45631f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=60B7tQag6I8TiWdm%2FGdc72i6nuk%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-11">ä¸ºä»€ä¹ˆå¿«ï¼Ÿ</h4>
<p>æ²¡æœ‰â€œåƒåœ¾å›æ”¶â€ï¼ˆNo Garbage Collectionï¼‰â€”â€” æœ€å…³é”®çš„å·®å¼‚</p>
<ul>
<li>Rust æ²¡æœ‰åƒåœ¾å›æ”¶å™¨ã€‚å®ƒé€šè¿‡ä¸€å¥—ç‹¬ç‰¹çš„**æ‰€æœ‰æƒï¼ˆOwnershipï¼‰**æœºåˆ¶ï¼Œåœ¨ä»£ç ç¼–è¯‘çš„æ—¶å€™ï¼Œå°±å·²ç»ç²¾ç¡®è®¡ç®—å‡ºäº†æ¯ä¸€ä¸ªå˜é‡åº”è¯¥åœ¨ä»€ä¹ˆæ—¶å€™è¢«é”€æ¯ã€‚ç›¸æ¯”è¾ƒäº å¸¦ GC çš„è¯­è¨€çš„ä¼˜åŠ¿å°±æ˜¯ä¸ä¼šå‡ºç°éšæœºçš„â€œå¡é¡¿â€ï¼ˆLatency Spikesï¼‰ã€‚</li>
</ul>
<p>æå…¶æ¿€è¿›çš„ç¼–è¯‘å™¨ä¼˜åŒ– (LLVM)</p>
<p>Rust çš„ç¼–è¯‘å™¨æ˜¯å‡ºäº†åçš„â€œä¸¥æ ¼â€å’Œâ€œæ…¢â€ï¼Œä½†è¿™æ˜¯ä¸ºäº†ç”Ÿæˆæè‡´çš„æœºå™¨ç ã€‚</p>
<ul>
<li><strong>é™æ€åˆ†æ</strong>ï¼šå› ä¸º Rust çš„è¯­æ³•è§„åˆ™éå¸¸ä¸¥æ ¼ï¼ˆæ¯”å¦‚å¼ºç±»å‹ã€ä¸å¯å˜æ€§ï¼‰ï¼Œç¼–è¯‘å™¨èƒ½ç¡®ä¿¡ä»£ç çš„æŸäº›éƒ¨åˆ†æ°¸è¿œä¸ä¼šæ”¹å˜ï¼Œä»è€Œè¿›è¡Œæå…¶å¤§èƒ†çš„ä¼˜åŒ–ï¼ˆæ¯”å¦‚ç›´æ¥åˆ é™¤å†—ä½™ä»£ç ã€å†…è”å‡½æ•°è°ƒç”¨ï¼‰ï¼Œè€ŒåŠ¨æ€è¯­è¨€ï¼ˆå¦‚ Python/JSï¼‰ä¸æ•¢è¿™ä¹ˆåšã€‚</li>
</ul>
<p>åŸºäº Rust çš„ä¸‰å¤§æ€æ‰‹é”â€”â€”<strong>å†…å­˜å®‰å…¨ï¼ˆä¸å´©æºƒï¼‰</strong> ã€<strong>æé«˜æ€§èƒ½ï¼ˆè·‘å¾—å¿«ï¼‰</strong> ã€<strong>æ— </strong> <strong>GC</strong> <strong>ï¼ˆä¸å¡é¡¿ï¼‰</strong> ï¼Œå¯¼è‡´å…¶é€‚åˆçš„æ˜¯é‚£äº›â€œæ—¢è¦é«˜å¯é æ€§ï¼Œåˆè¦æé™æ€§èƒ½â€çš„åœºæ™¯ã€‚</p>
<h3 data-id="heading-12">é€‚ç”¨åœºæ™¯</h3>
<p>ä¾‹å¦‚ ï¼š</p>
<ul>
<li>
<p>åŸºç¡€è®¾æ–½ä¸åº•å±‚ç³»ç»Ÿï¼šLinux Kernel 6.1 æ­£å¼æ¥çº³ Rust ä¸ºç¬¬äºŒå®˜æ–¹è¯­è¨€ï¼ˆå†å²ä¸Šåªæœ‰ C è¯­è¨€ï¼‰ï¼›Windows å†…æ ¸é‡å†™éƒ¨åˆ†ç»„ä»¶ã€‚</p>
</li>
<li>
<p>é«˜å¹¶å‘ç½‘ç»œæœåŠ¡ä¸ç½‘å…³ï¼ˆè§£å†³â€œé•¿å°¾å»¶è¿Ÿâ€ï¼‰è¿™æ˜¯ Rust æ­£åœ¨ç–¯ç‹‚å¢é•¿çš„é¢†åŸŸï¼Œä¸»è¦ç”¨æ¥è§£å†³ Go æˆ– Java åœ¨è¶…é«˜å¹¶å‘ä¸‹é‡åˆ°çš„ GC ç“¶é¢ˆã€‚</p>
</li>
<li>
<p>åµŒå…¥å¼å¼€å‘ (Embedded) &amp; IoT åœ¨èµ„æºå—é™çš„è®¾å¤‡</p>
</li>
<li>
<p>å‘½ä»¤è¡Œå·¥å…· (CLI) ä¸å¼€å‘è€…ç”Ÿæ€ï¼Œè¿™æ˜¯æ™®é€šå¼€å‘è€…æœ€å®¹æ˜“æ„ŸçŸ¥åˆ° Rust å¨åŠ›çš„åœ°æ–¹ã€‚Rust æ­£åœ¨é‡å†™å‡ ä¹æ‰€æœ‰ç»å…¸çš„ Linux å‘½ä»¤è¡Œå·¥å…·ã€‚</p>
</li>
<li>
<p>WebAssembly (Wasm) ä¸è¾¹ç¼˜è®¡ç®—ï¼ŒRust æ˜¯ç›®å‰ WebAssembly ç”Ÿæ€ä¸­æ”¯æŒæœ€å¥½çš„è¯­è¨€ï¼Œæ²¡æœ‰ä¹‹ä¸€ã€‚</p>
</li>
<li>
<p>åŒºå—é“¾ (Blockchain &amp; Web3) Solanaï¼ŒPolkadotï¼ŒNear Protocolï¼ŒAptos / Sui ç­‰ç­‰</p>
</li>
<li>
<p>äº¤æ˜“ç³»ç»Ÿä¸é‡åŒ–é‡‘è (Trading Systems &amp; HFT)ï¼šBinance çš„è®¸å¤šæ ¸å¿ƒæ’®åˆå¼•æ“å’Œé«˜æ€§èƒ½ç½‘å…³ï¼Œéƒ½åœ¨é€æ¸è¿ç§»åˆ° Rustã€‚</p>
</li>
</ul>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯ c++ çš„ä½¿ç”¨åœºæ™¯</p>
<p>æ²¡é”™ï¼ï¼Œc++ å¹²çš„äº†çš„ æˆ‘ Rust å¹²ï¼Œc++ å¹²ä¸äº†çš„ æˆ‘ Rust æ›´è¦å¹²ï¼Œç»Ÿç»Ÿé‡æ„ï¼ŒLinus ç‰¹è®¸ï¼Œè¿™å°±æ˜¯ Rust</p>
<h3 data-id="heading-13">æ„Ÿè§‰æœ‰ç‚¹å‰å®³ï¼Œé‚£ Rustå®é™…å¥½ä¸å¥½ç”¨å‘¢ ï¼Ÿ</h3>
<p>å½“ç„¶é™¤äº†å­¦ä¹ éš¾åº¦æˆ‘ä»¬å¿æŠ›å¼€ä¸è°ˆï¼Œåœ¨æ—¥å¸¸å¼€å‘ä¸Šï¼ŒRust å·¥å…·é“¾å¯è°“ç®€æ´å®ç”¨ï¼Œå€Ÿé‰´äº† go/jRuby/Node.js å‰è¾ˆçš„ä¼˜ç‚¹</p>
<ul>
<li>
<p>Cargoï¼šå…¬è®¤ä¸ºæ˜¯å½“ä»Šç¼–ç¨‹ç•Œæœ€å®Œç¾çš„åŒ…ç®¡ç†å™¨ æ•°æ®æ¥æºï¼š</p>
<ul>
<li>Â Â åœ¨ C/C++ æ—¶ä»£ï¼Œæ„å»ºä¸€ä¸ªè·¨å¹³å°é¡¹ç›®ç®€ç›´æ˜¯ç¾éš¾ã€‚Rust çš„ <strong>Cargo</strong> ä¸ä»…ä»…æ˜¯ä¸€ä¸ªåŒ…ç®¡ç†å™¨ï¼Œå®ƒæ˜¯<strong>æ„å»ºç³»ç»Ÿ + åŒ…ç®¡ç† + æµ‹è¯•è¿è¡Œå™¨ + æ–‡æ¡£ç”Ÿæˆå™¨</strong>çš„å››åˆä¸€ã€‚</li>
</ul>
</li>
<li>
<p>Rustfmtï¼šä»£ç æ ¼å¼åŒ–å€Ÿé‰´äº†gofmtã€‚åœ¨å›¢é˜Ÿå¼€å‘ä¸­ï¼Œæœ€æµªè´¹æ—¶é—´çš„äº‹æƒ…ä¹‹ä¸€å°±æ˜¯äº‰è®ºâ€œèŠ±æ‹¬å·æ¢ä¸æ¢è¡Œâ€æˆ–è€…â€œç¼©è¿›ç”¨ 2 ä¸ªç©ºæ ¼è¿˜æ˜¯ 4 ä¸ªç©ºæ ¼â€ Rust å®˜æ–¹ç›´æ¥æä¾› rustfmtã€‚å®ƒæœ‰ä¸€å¥—å®˜æ–¹å®šä¹‰çš„â€œæ ‡å‡†æ ¼å¼â€ã€‚Code Reviewï¼ˆä»£ç å®¡æŸ¥ï¼‰æ—¶ï¼Œæ²¡æœ‰ä»»ä½•äººä¼šå†è¯„è®ºæ ¼å¼é—®é¢˜ï¼Œæ‰€æœ‰äººçš„ç²¾åŠ›éƒ½é›†ä¸­åœ¨<strong>ä¸šåŠ¡é€»è¾‘</strong>å’Œ<strong>æ¶æ„è®¾è®¡</strong>ä¸Šã€‚</p>
</li>
<li>
<p>Clippyï¼šå…¨è‡ªåŠ¨çš„â€œé«˜çº§å¯¼å¸ˆâ€ä¸â€œä»£ç å®ˆé—¨å‘˜â€ï¼ˆé‡ç‚¹ï¼‰Clippy æ˜¯ Rust çš„å®˜æ–¹ Linterï¼ˆé™æ€åˆ†æå·¥å…·ï¼‰ï¼Œä½†å®ƒæ¯”æ™®é€šçš„ Linter å¼ºå¤§å¾—å¤šã€‚å®ƒä¸ä»…ä»…æ˜¯æ£€æŸ¥é”™è¯¯ï¼Œå®ƒæ˜¯åœ¨æ•™ä½ å†™â€œåœ°é“â€çš„ Rust ä»£ç ï¼ˆIdiomatic Rustï¼‰ã€‚Clippy çš„ä½œç”¨å°±æ˜¯æ‹‰å¹³è¿™ä¸ªå·®è·ï¼š</p>
<ul>
<li>
<p>çº æ­£â€œæ–¹è¨€â€ï¼Œå¼ºåˆ¶â€œæ™®é€šè¯â€ï¼š Clippy å†…ç½®äº†è¶…è¿‡ 700 æ¡ è§„åˆ™ã€‚å®ƒä¼šè¯†åˆ«å‡ºé‚£äº›â€œèƒ½è·‘ï¼Œä½†æ˜¯å†™å¾—å¾ˆä¸‘/å¾ˆæ…¢/å¾ˆå±é™©â€çš„ä»£ç ï¼Œå¹¶ç»™å‡ºä¿®æ”¹å»ºè®®ã€‚</p>
</li>
<li>
<p>ä¸ä»…æŒ‡å‡ºé—®é¢˜ï¼Œè¿˜è‡ªåŠ¨ä¿®å¤ï¼š å¾ˆå¤šæ—¶å€™ï¼ŒClippy å¯ä»¥ç›´æ¥é€šè¿‡ cargo clippy --fix è‡ªåŠ¨å¸®ä½ æŠŠä»£ç æ”¹æˆæœ€ä¼˜å†™æ³•ã€‚</p>
</li>
</ul>
</li>
</ul>
<p>ä»ä»“åº“åˆ›å»ºï¼Œ ä¾èµ–æ‹‰å–ï¼Œæ ¼å¼ç»Ÿä¸€ï¼Œä»£ç é£æ ¼ç»Ÿä¸€ï¼Œä»£ç æ£€æŸ¥ï¼Œè‡ªåŠ¨ä¿®å¤ï¼Œä»£ç æµ‹è¯•ï¼Œæ–‡æ¡£ç”Ÿæˆï¼Œcrate å‘å¸ƒ Rust å·¥å…·é“¾ç›´æ¥ä¸€æ¡é¾™æœåŠ¡ã€‚</p>
<p>å½“ç„¶æˆ‘å…¶ä»–è¯­è¨€ç”¨çš„æ¯”è¾ƒå°‘ï¼Œè¿™ä¸ªå¯ä»¥é—®ä¸‹ä¼šå¤šç§è¯­è¨€çš„ å¤§ä½¬ä»¬ï¼Œå®é™…ä½“éªŒæ˜¯ä¸æ˜¯è¿™æ ·ã€‚</p>
<p>ç®€å•æ€»ç»“ï¼š</p>
<p>å¯¹å¤§å…¬å¸æ¥è¯´</p>
<ul>
<li>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li><strong>æ›´å°‘çš„æœåŠ¡å™¨</strong>ï¼šå› ä¸ºæ€§èƒ½é«˜ï¼ˆCloudflare æ¡ˆä¾‹ï¼‰ã€‚</li>
<li><strong>æ›´å°‘çš„ç»´æŠ¤</strong>ï¼šå› ä¸º Bug å°‘ï¼ˆGoogle æ¡ˆä¾‹ï¼‰ã€‚</li>
<li><strong>æ›´å¥½çš„ä½“éªŒ</strong>ï¼šå› ä¸ºæ— å¡é¡¿ï¼ˆDiscord æ¡ˆä¾‹ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p>ç¼ºç‚¹ï¼šå› ä¸ºå­¦ä¹ é—¨æ§›é«˜ï¼Œå¼€å‘äººå‘˜å°‘ã€‚æ‹›ä¸åˆ°äºº</p>
</li>
</ul>
<p>å¯¹ä¸ªäººæ¥è¯´ï¼š</p>
<ul>
<li>
<p>ä¼˜ç‚¹ï¼šæœ‰ç¬¬ä¸€æ¢¯é˜Ÿçš„ æ€§èƒ½ï¼Œæœ‰é¢å¤–çš„å®‰å…¨æ£€æŸ¥ï¼Œæœ‰å¥½ç”¨çš„å¼€å‘å·¥å…·é“¾</p>
</li>
<li>
<p>ç¼ºç‚¹ï¼š å­¦ä¹ é—¨æ§›é«˜ï¼Œéœ€è¦åå¤å…¥é—¨</p>
</li>
</ul>
<p>åˆ°è¿™é‡Œï¼Œå¤§å®¶å¯¹å…¬å¸æ¥è¯´ Rust çš„ä¼˜ç¼ºç‚¹åº”è¯¥æ²¡ä»€ä¹ˆå¼‚è®®ï¼Œ</p>
<p>å¯¹ä¸ªäººæ¥è¯´çš„è§‚ç‚¹ å¯èƒ½å¤§å¤šæ•°ç¨‹åºå‘˜ä¸æ•¢è‹ŸåŒ</p>
<p>ä½ è¯´è¿™ä¸ªç¼–ç¨‹è¯­è¨€ï¼Œè¿™ä¹ˆå‰å®³ï¼Œæœ‰ä»€ä¹ˆç”¨å•Šï¼Œèƒ½è®©æˆ‘æ—©ä¸‹ç­ï¼Œèƒ½ç»™æˆ‘å¤šå‘ç‚¹å·¥èµ„ä¹ˆï¼Ÿ</p>
<p>æ¥çœ‹ä¸€ä¸ª 2024-2025 å¹´ ä¸åŒç¼–ç¨‹è¯­è¨€è–ªèµ„æ°´å¹³ æ•°æ®</p>
<p>æ•°æ®åˆ†æå¹³å° DevJobsScanner åˆ†æäº†æ¥è‡ªä¸–ç•Œå„åœ°è¶…è¿‡ 1000 ä¸‡ä¸ªå¼€å‘èŒä½ï¼Œä»¥å¸®åŠ©æˆ‘ä»¬äº†è§£å¸‚åœºä»¥åŠæœ€çƒ­é—¨ã€è–ªèµ„æœ€é«˜çš„è¯­è¨€ã€‚åœ¨æœ¬ç ”ç©¶ä¸­ï¼Œä»…å…³æ³¨æ¥è‡ª<strong>ç¾å›½</strong>çš„èŒä½ã€‚è¿™ç¡®ä¿äº†ç»“æœæ›´åŠ ä¸€è‡´å’Œå…·æœ‰ä»£è¡¨æ€§ï¼Œå¹¶æ˜¾è‘—é™ä½äº†ä»»ä½•æ½œåœ¨çš„æ•°æ®åå·®</p>
<p>é“¾æ¥ï¼š</p>
<p>Solidity æ˜¯è¿è¡Œåœ¨ evmè™š æ‹Ÿæœºä¸Šçš„ æ™ºèƒ½åˆçº¦è¯­è¨€</p>
<p>Clojure æ˜¯è¿è¡Œåœ¨ Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¸Šçš„ç°ä»£ Lisp æ–¹è¨€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b39c71e68ac4e59a208627ef413218b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=rGz4yVCO2iwspIDMmTGJb%2FPFA4g%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6db610e973d24a30a5e24e2d7a21eb01~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=Z7XGfBVDPWLp9PG4%2F6q6CL3tuyE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/25de2fb6f95c42acb6cc72cea8839f99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=fjfLf3yUyqeuOcTjKJr%2FkLmAjI0%3D" alt="" loading="lazy"/></p>
<p>è¿˜æœ‰äººè¯´äº†ï¼šé‚£ä½ ä¹Ÿåªæ˜¯ç°åœ¨å·¥èµ„é«˜ï¼Œæœªæ¥å‘¢ï¼Ÿæˆ‘å¥½ä¸å®¹æ˜“å­¦ä¼šäº†ï¼ŒRust ä¸ç«äº†é‚£ä¸ç™½å­¦äº†</p>
<p>æœªæ¥å‘å±•</p>
<p>æœªæ¥ä»€ä¹ˆæ ·ï¼Œè°ä¹Ÿè¯´ä¸äº†ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥æ¥çœ‹è¿™æ ·ä¸€ç»„æ•°æ®ï¼š</p>
<p>2025 å¹´ Stackoverflow ç»Ÿè®¡çš„æœ€ Admired çš„ç¼–ç¨‹è¯­è¨€ï¼ˆæŒ‡ç”¨äº†è¿˜æƒ³ç”¨ï¼Œç”¨æˆ·æ»¡æ„åº¦é«˜ï¼‰ ï¼ˆ åœ¨è¿‡å»ä¸€å¹´é‡Œä½¿ç”¨äº†è¯¥è¯­è¨€ï¼Œå¹¶ä¸”åœ¨æ¥å¹´è¿˜æƒ³ç»§ç»­ä½¿ç”¨è¯¥è¯­è¨€çš„å¼€å‘è€…æ¯”ä¾‹ï¼‰</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f1fe906585d48a9b8fb258506a61907~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=6zoqi3dSi3NGuoKDf7GtOvlAwK4%3D" alt="" loading="lazy"/></p>
<p>è‡³æ­¤ è‡ª Rust 2015 å¹´ 5 æœˆå‘å¸ƒä»¥æ¥ï¼Œ ä»2016-2025å¹´ è¿ç»­ 10 å¹´å¹¶æŒç»­éœ¸æ¦œæˆä¸ºç”¨æˆ·æ»¡æ„åº¦æœ€é«˜çš„è¯­è¨€ã€‚</p>
<p>è¾¾æˆäº† <strong>â€œ</strong> <strong>å‡ºé“ 10 å¹´ï¼Œéœ¸æ¦œ 10 å¹´</strong> <strong>â€</strong> çš„æˆå°±ã€‚</p>
<p>èƒ½å¦è¯´æ˜æœªæ¥å‘å±•å‰æ™¯å¹¿é˜”</p>
<p>å¤§å®¶é—®é‚£2015å¹´å‘¢ï¼Ÿ2015å¹´æ˜¯ç©ºé™ç¬¬ä¸‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/454384b707414c4eac7f5f5b66d41a06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUG9tZWxvX-WImOmHkQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987714&amp;x-signature=QjjjnWbDfCHE41htq4Nq8CjLFYw%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-14">æœ€ç»ˆç»“è®ºï¼š</h3>
<p>å¯¹ä¸ªäººæ¥è¯´</p>
<p>å–œæ¬¢é«˜æ€§èƒ½ï¼Œé«˜ å®‰å…¨æ€§ -&gt; Rust!</p>
<p>æå‰å¸ƒå±€æœªæ¥ï¼Œé€‰æœ‰å‘å±•çš„ ç¼–ç¨‹è¯­è¨€ -&gt; Rust!</p>
<p>æƒ³è¦å¤šèµšé’± -&gt; Rust!</p>
<p>æ‰€ä»¥ï¼Œè¿™æ · ç‹‚æ‹½ç‚«é…·åŠç‚¸å¤©ï¼Œç¨‹åºçŒ¿ç”¨äº†éƒ½è¯´å¥½ï¼Œå¹¶ä¸”è–ªèµ„æ‹‰æ»¡çš„ Rust çœŸçš„ä¸å­¦ä¸€ä¸‹ä¹ˆï¼Ÿ</p>
<p>Pomelo_åˆ˜é‡‘ã€‚è½¬è½½è¯·æ³¨æ˜åŸæ–‡é“¾æ¥ã€‚æ„Ÿè°¢ï¼</p>
<p>ä¸å­¦é”™è¿‡æœªæ¥ï¼Œé”™è¿‡ä¸€ä¸ªäº¿å“¦</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Perfettoä»å…¥é—¨åˆ°ç²¾é€šã€‘2. ä½¿ç”¨ Perfetto è¿½è¸ª/åˆ†æ APP çš„ Native/Java å†…å­˜]]></title>    <link>https://juejin.cn/post/7582041304655249454</link>    <guid>https://juejin.cn/post/7582041304655249454</guid>    <pubDate>2025-12-10T16:27:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582041304655249454" data-draft-id="7582048028393226290" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Perfettoä»å…¥é—¨åˆ°ç²¾é€šã€‘2. ä½¿ç”¨ Perfetto è¿½è¸ª/åˆ†æ APP çš„ Native/Java å†…å­˜"/> <meta itemprop="keywords" content="Android,æ€§èƒ½ä¼˜åŒ–,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-10T16:27:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lei_official"/> <meta itemprop="url" content="https://juejin.cn/user/2351234021066314"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Perfettoä»å…¥é—¨åˆ°ç²¾é€šã€‘2. ä½¿ç”¨ Perfetto è¿½è¸ª/åˆ†æ APP çš„ Native/Java å†…å­˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2351234021066314/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lei_official
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T16:27:50.000Z" title="Wed Dec 10 2025 16:27:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>è¿™ä¸ªä¸–ç•Œå°±æ˜¯è¿™æ ·ï¼Œä½ ä»å¤±è´¥ä¸­å­¦åˆ°çš„ä¸œè¥¿å¯èƒ½æ¯”æˆåŠŸä¸­å­¦åˆ°çš„ä¸œè¥¿æ›´å¤šâ€”â€”ã€ŠAndroid ä¼ å¥‡ã€‹</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96da1c986c7f488ebbcbd5279fc0a176~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765988870&amp;x-signature=M7SiapCro%2B87iY33xT2f2937wgE%3D" alt="image.png" loading="lazy"/></p>
<p>è¯´èµ· Android APP å†…å­˜åˆ†æï¼Œæˆ‘ä»¬ç¬¬ä¸€æ—¶é—´æƒ³åˆ°çš„ï¼Œå¾€å¾€æ˜¯ Android Studio Profilerã€MAT è¿™æ ·çš„è€ç‰Œå·¥å…·ï¼Œè€Œ Perfetto çš„å‡ºç°ï¼Œåˆä¸ºå…¶æä¾›äº†ä¸€ç§æ›´åŠ è´´è¿‘åº•å±‚çš„è§†è§’ã€‚è€Œä¸”ç›¸æ¯”äºç°æœ‰çš„å·¥å…·ï¼ŒPerfetto æ›´åŠ æ“…é•¿äºåˆ†æ Native å†…å­˜å ç”¨ï¼Œå¯ä»¥è¯´æ˜¯è¡¥é½äº†å·¥ç¨‹å¸ˆåœ¨è¿™æ–¹é¢çš„çŸ­æ¿ã€‚</p>
<p><strong>åœ¨å†…å­˜æ–¹å‘ï¼Œæˆ‘è®¡åˆ’ç”¨2~3ç¯‡æ–‡ç« æ¥ä»‹ç» Perfetto çš„åŠŸèƒ½ã€ç‰¹ç‚¹ã€ä½¿ç”¨æ–¹æ³•ç­‰</strong> ã€‚ä½œä¸ºç¬¬1ç¯‡ï¼Œæœ¬æ–‡åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>Android APP æ‰€ç”³è¯·çš„å†…å­˜åˆ†ç±»ï¼ˆJavaã€Nativeï¼‰</li>
<li>å¦‚ä½•æŠ“å–ã€åˆ†æè¿™ä¸¤ç±»å†…å­˜å ç”¨æƒ…å†µï¼Œå¹¶æä¾›å¯¹åº”çš„ Perfetto æ“ä½œå®ä¾‹</li>
</ul>
<h2 data-id="heading-0">APP å ç”¨å†…å­˜åˆ†ç±»</h2>
<p>Android ç³»ç»Ÿæ¡†æ¶æ˜¯ç”± Linux å‘å±•è€Œæ¥çš„ï¼Œå¯¹äºæ¯ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼ˆAPPï¼‰ï¼Œæ¡†æ¶ä¸ºå…¶åˆå§‹åˆ†é…ä¸€ä¸ªè¿›ç¨‹ï¼Œå¹¶å¯åŠ¨äº†ä¸€ä¸ª ART è™šæ‹Ÿæœºï¼ˆæ›´æ—©æ—¶å€™æ˜¯ Dalvikï¼‰ï¼Œè¿™ä¸ªè™šæ‹Ÿæœºç”¨äºè§£é‡Šæ‰§è¡Œ Java å­—èŠ‚ç ã€‚å› æ­¤ï¼Œä¸€ä¸ª APP æ‰€å ç”¨çš„å†…å­˜ï¼Œå¯ä»¥å½’ç»“ä¸ºä¸¤ç±»ï¼šåœ¨ Linux å±‚ç”³è¯·çš„ Native å†…å­˜ï¼Œä»¥åŠåœ¨ JVM ä¸Šç”³è¯·çš„ Java å†…å­˜ã€‚</p>
<ul>
<li><strong>Native å†…å­˜</strong> ï¼šç”± C/C++/Rust è¿›ç¨‹ç”³è¯·ï¼Œå…¶åº•å±‚ä½¿ç”¨ <code>libc</code> çš„ <code>malloc()/free()</code> å‡½æ•°è¿›è¡Œå†…å­˜ç”³è¯·/é‡Šæ”¾ã€‚æ­¤å¤–ï¼ŒAPP é€šè¿‡ JNI ä¹Ÿå¯ç”³è¯·æ­¤éƒ¨åˆ†å†…å­˜ï¼Œä¾‹å¦‚ <code>java.util.regex.Pattern</code> ç±»çš„å¤§éƒ¨åˆ†åŠŸèƒ½ï¼Œå°±åŒæ—¶ç”³è¯·äº† Native å†…å­˜å’Œ Java å†…å­˜ã€‚</li>
<li><strong>Java å†…å­˜</strong> ï¼šç”±åº”ç”¨å†…çš„ Java/Kotlin ä»£ç ï¼Œé€šè¿‡ <code>new X()</code> çš„æ–¹å¼ç”³è¯·ï¼Œä½äº <strong>å †</strong> ä¸Šï¼Œç”±ç³»ç»Ÿè‡ªåŠ¨è¿›è¡Œå›æ”¶ã€‚</li>
</ul>
<p>é’ˆå¯¹ä¸Šè¿°å†…å­˜ä½¿ç”¨åœºæ™¯ï¼ŒPerfetto æä¾›äº†ä¸¤ç§æŠ€æœ¯è¿›è¡Œåˆ†æã€‚</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fgetting-started%2Fmemory-profiling%23native-c-c-rust-heap-profling" target="_blank" title="https://perfetto.dev/docs/getting-started/memory-profiling#native-c-c-rust-heap-profling" ref="nofollow noopener noreferrer">heap profilingï¼ˆå †åˆ†æï¼‰</a> é€‚ç”¨äº Native ä»£ç ï¼Œé€šè¿‡ AOPï¼Œè¿½è¸ª <code>malloc/free</code> å‡½æ•°è°ƒç”¨é“¾ï¼Œä»è€Œè¯†åˆ«å‡ºæ¯ä¸ªå‡½æ•°å¼•èµ·çš„å†…å­˜å˜åŒ–ï¼Œé›†æˆåœ¨ç«ç„°å›¾å½“ä¸­å±•ç¤ºã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fgetting-started%2Fmemory-profiling%23java-managed-heap-dumps" target="_blank" title="https://perfetto.dev/docs/getting-started/memory-profiling#java-managed-heap-dumps" ref="nofollow noopener noreferrer">heap dumpï¼ˆå †è½¬å‚¨ï¼‰</a> é€‚ç”¨äº Java ä»£ç ï¼Œå±•ç¤ºå¯¹è±¡ä¹‹é—´çš„å¼•ç”¨å…³ç³»ï¼Œä½†ä¸åŒ…å«è°ƒç”¨é“¾ã€‚</li>
</ul>
<h2 data-id="heading-1">Native (C/C++/Rust) å†…å­˜åˆ†æ</h2>
<p>åœ¨ C/C++/Rust è¯­è¨€ä¸­ï¼Œä½¿ç”¨åº•å±‚çš„ <code>malloc/free</code> å‡½æ•°è¿›è¡Œå†…å­˜ç”³è¯·å’Œé‡Šæ”¾ï¼ŒPerfetto é€šè¿‡ AOP æŠ€æœ¯ï¼Œåœ¨è¿™äº›å‡½æ•°å†…éƒ¨æ³¨å…¥ä»£ç è¿›è¡Œæ‹¦æˆªï¼Œå› æ­¤èƒ½å¤Ÿè¯†åˆ«æ¯ä¸€æ¬¡å†…å­˜çš„ç»†å¾®å˜åŠ¨ã€‚å‡ºäºåœ¨åº”ç”¨æ€§èƒ½å’ŒæŠ“å–æ•ˆæœä¹‹é—´ä¿æŒå¹³è¡¡çš„è€ƒè™‘ï¼Œè¿˜æä¾›äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fdesign-docs%2Fheapprofd-sampling" target="_blank" title="https://perfetto.dev/docs/design-docs/heapprofd-sampling" ref="nofollow noopener noreferrer">samplingï¼ˆé‡‡æ ·ï¼‰</a> æœºåˆ¶ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒNative å†…å­˜åˆ†ææ˜¯ <strong>ä¸å¯è¿½æº¯</strong> çš„ï¼Œå®ƒåªèƒ½è®°å½•ä» <strong>å¯åŠ¨ Perfetto çš„æ—¶é—´ç‚¹ä¹‹å</strong> çš„å†…å­˜åˆ†é…ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœå†…å­˜é—®é¢˜å·²ç»å‘ç”Ÿåï¼Œå†è¿›è¡Œ Native å†…å­˜è¿½è¸ªï¼Œä¼šæœ‰æ— æ³•è¯†åˆ«å¼•èµ·å†…å­˜é—®é¢˜çš„å‡½æ•°çš„é£é™©ï¼ˆå†…å­˜æ³„æ¼åˆ™ä¸ä¸€æ ·ï¼Œå› ä¸ºå®ƒæ— æ—¶æ— åˆ»ä¸åœ¨å‘ç”Ÿï¼‰ã€‚</p>
<h3 data-id="heading-2">æ¡ˆä¾‹ï¼šNowInAndroid</h3>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ Android 7.1ï¼ˆAPI 25ï¼‰ä¹‹å‰ï¼ŒBitmap å¯¹è±¡çš„åƒç´ æ•°æ®æ˜¯ä½¿ç”¨ Dalvik heap å­˜å‚¨çš„ï¼Œåœ¨æ‹¿åˆ° heap æ–‡ä»¶åï¼Œå¯ä»¥ç›´æ¥å¯¼å‡ºå¹¶çœ‹åˆ°å›¾ç‰‡å†…å®¹ã€‚ä» Android 7.1 å¼€å§‹ï¼ŒBitmap çš„å­˜å‚¨ä½ç½®ä» Dalvik heap è½¬ç§»åˆ°äº† Native heapã€‚è¿™æ ·ä¸€æ¥ï¼Œè™½ç„¶å¯ä»¥é¿å…å¤§é‡å›¾ç‰‡èµ„æºè€—å°½ JVM å†…å­˜ï¼Œä½†ä¹Ÿå®¹æ˜“è®©äººå¿½è§†æ‰ Native å†…å­˜ç®¡ç†ï¼Œå¯¼è‡´ OOM å‘ç”Ÿã€‚</p>
<p>Perfetto çš„ Native å†…å­˜åˆ†æï¼Œå¯ä»¥ç”¨æ¥è¯†åˆ«è¿™ç§è½åœ¨ Native heap çš„å†…å­˜åˆ†é…è°ƒç”¨é“¾ã€‚æˆ‘ä»¬ä»¥ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fandroid%2Fnowinandroid" target="_blank" title="https://github.com/android/nowinandroid" ref="nofollow noopener noreferrer">NowInAndroid</a> é¡¹ç›®ä¸ºä¾‹ã€‚</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21771e680e7a4828908a89d5d7d024f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765988870&amp;x-signature=a7PtuG5UXzJ%2F9TR37R%2Be2aK4TBs%3D" alt="nowinandroid_homepage.png" width="30%" loading="lazy"/>
<p>APP çš„é¦–é¡µæ˜¯å›¾æ–‡å…ƒç´ æ„æˆçš„ç€‘å¸ƒæµï¼Œåœ¨é¢‘ç¹æ»‘åŠ¨çš„æƒ…å†µä¸‹ï¼Œä¼šäº§ç”Ÿå¤§é‡ Native å†…å­˜ç”³è¯·/å›æ”¶çš„ç°è±¡ï¼Œæˆ‘ä»¬é€šè¿‡ Perfetto å¯¹æ­¤è¿›è¡Œè§‚å¯Ÿã€‚</p>
<p>åœ¨ç½‘é¡µç«¯å¼€å¯ Memory ç›®å½•ä¸‹çš„ Native heap profiling å¼€å…³ï¼ŒåŒæ—¶å¡«å…¥å¾…åˆ†æçš„åŒ…å <code>com.google.samples.apps.nowinandroid.demo.debug</code>ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤ <code>adb shell ps -A</code> æ¥æŸ¥çœ‹è¿›ç¨‹å¯¹åº”çš„åŒ…åã€‚</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6df13ec90a854c42abe34f51eea2c9af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765988870&amp;x-signature=9bvAT0T%2Bbm5jQQHX%2FnoGHeMdRfo%3D" alt="perfetto_native_profiling.png" width="70%" loading="lazy"/>
<p>æ§åˆ¶å°å‚æ•°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-plaintext" lang="plaintext">buffers {
  size_kb: 65536
  fill_policy: DISCARD
}
data_sources {
  config {
    name: &amp;#34;android.heapprofd&amp;#34;
    heapprofd_config {
      sampling_interval_bytes: 4096
      process_cmdline: &amp;#34;com.google.samples.apps.nowinandroid.demo.debug&amp;#34;
      shmem_size_bytes: 8388608
      block_client: true
      all_heaps: false
    }
  }
}
duration_ms: 10000
</code></pre>
<p>æ¥ä¸‹æ¥ç‚¹å‡» <code>Start tracing</code> å¼€å§‹æŠ“å–ï¼Œåœ¨ 10s çš„æŠ“å–è¿‡ç¨‹ä¸­ï¼Œä¸Šæ»‘é¡µé¢ï¼Œä»¥åŠ è½½æ›´å¤šå›¾ç‰‡å’Œæ–‡å­—ã€‚æŠ“å–ç»“æœå¦‚ä¸‹ï¼š</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ede55f4c37424b06a388851b68580ba6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765988870&amp;x-signature=OpIAvRmfCu05ODIA%2FWCzEN23K8U%3D" alt="perfetto_native_profiling_result.png" width="70%" loading="lazy"/>
<p>å›¾ä¾‹æ¯”è¾ƒç®€å•ï¼Œåˆ†æˆå·¦ä¸Šè§’çš„â€œ<strong>æ•°æ®é€‰æ‹©</strong>â€ã€å³ä¸Šè§’çš„â€œ<strong>å±•ç¤ºæ–¹å¼</strong>â€å’Œå æ®æ­£ä¸­å¤®å¤§éƒ¨åˆ†çš„â€œ<strong>ç«ç„°å›¾</strong>â€ï¼Œä¾æ¬¡ä»‹ç»ä¹‹ã€‚</p>
<p>â€œ<strong>æ•°æ®é€‰æ‹©</strong>â€åŒºåŸŸï¼Œå…±æœ‰4ç§æ’åºæ–¹å¼ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li><strong>Unreleased Malloc Sizeï¼ˆæœªé‡Šæ”¾å†…å­˜åˆ†é…å¤§å°ï¼‰</strong>ï¼šé»˜è®¤æ¨¡å¼ï¼ŒæŒ‰æœªé‡Šæ”¾å†…å­˜ <code>å­—èŠ‚æ•°</code> çš„æ€»å’Œèšåˆè°ƒç”¨æ ˆã€‚</li>
<li><strong>Unreleased Malloc Countï¼ˆæœªé‡Šæ”¾å†…å­˜åˆ†é…è®¡æ•°ï¼‰</strong>ï¼šæŒ‰ <code>è®¡æ•°</code>èšåˆæœªé‡Šæ”¾çš„å†…å­˜åˆ†é…ï¼Œå¿½ç•¥æ¯æ¬¡åˆ†é…çš„å¤§å°ã€‚è¿™æœ‰åŠ©äºå‘ç°å°è§„æ¨¡çš„å†…å­˜æ³„æ¼ï¼Œå³æ¯ä¸ªå¯¹è±¡éƒ½å¾ˆå°ï¼Œä½†éšç€æ—¶é—´çš„æ¨ç§»ï¼Œå¤§é‡å¯¹è±¡ä¼šç´¯ç§¯èµ·æ¥ã€‚é€šå¸¸ç§°ä¹‹ä¸º <code>å†…å­˜ç¢ç‰‡</code>ã€‚</li>
<li><strong>Total Malloc Sizeï¼ˆæ€»å†…å­˜åˆ†é…å¤§å°ï¼‰</strong>ï¼šæŒ‰é€šè¿‡ <code>malloc()</code> åˆ†é…çš„å†…å­˜å­—èŠ‚æ•°èšåˆè°ƒç”¨æ ˆï¼Œæ— è®ºè¿™äº›å†…å­˜æ˜¯å¦å·²è¢«é‡Šæ”¾ã€‚è¿™æœ‰åŠ©äºè°ƒæŸ¥å †é¢‘ç¹è°ƒç”¨ï¼Œå³å³ä½¿æœ€ç»ˆé‡Šæ”¾äº†å†…å­˜ï¼Œä¹Ÿä¼šå¯¹åˆ†é…å™¨é€ æˆå¾ˆå¤§å‹åŠ›çš„ä»£ç è·¯å¾„ã€‚é€šå¸¸ç§°ä¹‹ä¸º <code>å†…å­˜æ³¢åŠ¨</code>ã€‚</li>
<li><strong>Total Malloc Countï¼ˆæ€»å†…å­˜åˆ†é…è®¡æ•°ï¼‰</strong>ï¼šä¸ä¸Šè¿°ç±»ä¼¼ï¼Œä½†æŒ‰ <code>malloc()</code> è°ƒç”¨æ¬¡æ•°èšåˆï¼Œå¿½ç•¥æ¯æ¬¡åˆ†é…çš„å¤§å°ã€‚</li>
</ul>
<p>æˆ‘ä»¬ç›®å‰é€‰æ‹©çš„æ˜¯é»˜è®¤çš„ <code>Unreleased Malloc Size</code> é€‰é¡¹ã€‚</p>
<p>â€œ<strong>å±•ç¤ºæ–¹å¼</strong>â€åŒºåŸŸï¼Œåˆ†ä¸ºâ€œè‡ªé¡¶å‘ä¸‹â€å’Œâ€œè‡ªåº•å‘ä¸Šâ€ï¼Œå‰è€…çš„ç«ç„°å‘ä¸‹ç”Ÿé•¿ï¼Œåè€…åä¹‹ï¼Œä¸èµ˜è¿°ã€‚</p>
<p>â€œ<strong>ç«ç„°å›¾</strong>â€åŒºåŸŸï¼Œæ˜¯æ€§èƒ½åˆ†æçš„é‡ç‚¹ï¼Œé€šè¿‡å±‚å çš„å½¢å¼å±•ç¤ºå‡½æ•°è°ƒç”¨é“¾è·¯ï¼Œæ¯ä¸ªè‰²å—ï¼ˆBlockï¼‰çš„é¢ç§¯è¡¨ç¤ºè¯¥å‡½æ•°å¼•èµ·çš„å†…å­˜å¢åŠ ï¼Œå‘ç”Ÿåœ¨ç›¸åŒå±‚çº§çš„åŒä¸€ä¸ªå‡½æ•°ï¼Œä¼šè¢«èšåˆå±•ç¤ºã€‚å›¾ä¸­çš„ç«ç„°å›¾å¯ä»¥çœ‹å‡ºï¼ŒNowInAndroid ä»£ç å†™çš„ç›¸å¯¹å¥å£®ï¼Œå›æ”¶å’Œå¤ç”¨éƒ½åšå¾—æ¯”è¾ƒå¥½ï¼Œå› æ­¤ RecyclerView ä¸­æœªè§å†…å­˜æ³„æ¼ã€‚</p>
<h2 data-id="heading-3">Java å†…å­˜å¿«ç…§</h2>
<p>åœ¨ JVM ç³»è¯­è¨€ä¸­ï¼Œé€šè¿‡è‡ªåŠ¨å›æ”¶æœºåˆ¶ç®¡ç†å†…å­˜ï¼Œå¤§éƒ¨åˆ† Profiling å·¥å…·éƒ½æ˜¯è¿›è¡Œå†…å­˜å¿«ç…§ï¼Œè®¡ç®—å½“å‰è™šæ‹Ÿæœºçš„ <code>å…¨éƒ¨å¯¹è±¡</code> åŠå…¶ <code>å¼•ç”¨å…³ç³»</code>ï¼Œä»è€Œå½¢æˆä¸€å¼ å®Œæ•´çš„å¯¹è±¡å›¾ã€‚</p>
<p><strong>Java å†…å­˜å¿«ç…§çš„ä¸è¶³ä¹‹å¤„æ˜¯ï¼Œæ— æ³•é€šè¿‡å®ƒæŸ¥çœ‹å‡½æ•°è°ƒç”¨é“¾è·¯ï¼Œå³å“ªäº›å‡½æ•°å¼•èµ·äº†å¤šå¤§çš„å†…å­˜å¢é•¿ã€‚</strong></p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ea458224cbc42e28a888a8babfd9f57~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765988870&amp;x-signature=nC527ATpMA2BWMeM6TOVBySqZmo%3D" alt="perfetto_java_profiling.png" width="70%" loading="lazy"/>
<p>å¼€å§‹æŠ“å–åï¼Œä¸Šæ»‘é¡µé¢ç›´è‡³å®Œæˆ10sçš„æŠ“å–ï¼Œä»¥ä¸‹æ˜¯æŠ“å–åˆ°çš„ç»“æœã€‚</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3ca3959a6a14f1bad35506ee1e9a3b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765988870&amp;x-signature=mxHl2AIyC%2BxKFPXXUevjOkjXp5c%3D" alt="perfetto_java_profiling_result.png" width="70%" loading="lazy"/>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>Bitmap</code> å æ®äº†å†…å­˜çš„å¤§éƒ¨åˆ†ã€‚æ­¤å¤–ï¼ŒStringæ•°é‡æœ‰ <code>96433</code> ä¸ªï¼Œä¹ŸåŒæ ·å€¼å¾—å…³æ³¨ã€‚</p>
<blockquote>
<p>æœªå®Œå¾…ç»­â€¦â€¦</p>
</blockquote>
<h2 data-id="heading-4">å‚è€ƒèµ„æ–™</h2>
<ul>
<li/>
<li/>
<li/>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ”— æ·±åº¦è§£æ SystemUI è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶ï¼ˆä¸€ï¼‰]]></title>    <link>https://juejin.cn/post/7582047554090057737</link>    <guid>https://juejin.cn/post/7582047554090057737</guid>    <pubDate>2025-12-10T15:47:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582047554090057737" data-draft-id="7581752787563626536" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ”— æ·±åº¦è§£æ SystemUI è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶ï¼ˆä¸€ï¼‰"/> <meta itemprop="keywords" content="Android,APP,æ“ä½œç³»ç»Ÿ"/> <meta itemprop="datePublished" content="2025-12-10T15:47:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ„¤æ€’çš„ä»£ç "/> <meta itemprop="url" content="https://juejin.cn/user/4125023358426190"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ”— æ·±åº¦è§£æ SystemUI è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶ï¼ˆä¸€ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4125023358426190/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ„¤æ€’çš„ä»£ç 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T15:47:02.000Z" title="Wed Dec 10 2025 15:47:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸš€ 0x00. å¼•è¨€ï¼šSystemUI çš„æ ¸å¿ƒèŒè´£ä¸é€šä¿¡å¿…è¦æ€§</h2>
<p>åœ¨ Android çš„ä¸–ç•Œé‡Œï¼Œ<strong>SystemUI</strong> æ‰®æ¼”ç€â€œç³»ç»Ÿé—¨é¢â€çš„è§’è‰²ã€‚æ— è®ºæ˜¯é¡¶éƒ¨çš„<strong>çŠ¶æ€æ </strong>ï¼ˆæ˜¾ç¤ºæ—¶é—´ã€ç”µé‡ã€ä¿¡å·ï¼‰ã€åº•éƒ¨çš„<strong>å¯¼èˆªæ </strong>ï¼ˆæ‰‹åŠ¿æˆ–æŒ‰é”®ï¼‰ï¼Œè¿˜æ˜¯ä¸‹æ‹‰çš„<strong>é€šçŸ¥ä¸­å¿ƒ</strong>ä¸<strong>é”å±ç•Œé¢</strong>ï¼Œéƒ½æ˜¯ SystemUI çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>ç„¶è€Œï¼Œåœ¨ AOSPï¼ˆAndroid Open Source Projectï¼‰çš„æ¶æ„ä¸­ï¼ŒSystemUI å¹¶ä¸æ˜¯ç³»ç»Ÿå†…æ ¸çš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ˜¯ä¸€ä¸ªè¿è¡Œåœ¨ç‹¬ç«‹è¿›ç¨‹ï¼ˆ<code>com.android.systemui</code>ï¼‰ä¸­çš„<strong>åº”ç”¨ç¨‹åº</strong>ã€‚</p>
<p>è¿™å°±å¸¦æ¥äº†ä¸€ä¸ªå·¨å¤§çš„æŒ‘æˆ˜ï¼š</p>
<p>SystemUI åªæ˜¯ä¸€ä¸ª UI å±•ç¤ºå±‚ï¼Œä½†å®ƒå±•ç¤ºçš„æ•°æ®ï¼ˆå¦‚ç”µé‡ã€é€šçŸ¥ã€æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡ï¼‰å’Œæ‰§è¡Œçš„æ“ä½œï¼ˆå¦‚æ€æ‰è¿›ç¨‹ã€åˆ‡æ¢åº”ç”¨ï¼‰éƒ½æŒæ¡åœ¨ç³»ç»Ÿæ ¸å¿ƒè¿›ç¨‹ï¼ˆsystem_serverï¼‰æˆ–æ¡Œé¢å¯åŠ¨å™¨ï¼ˆLauncherï¼‰æ‰‹ä¸­ã€‚</p>
<p>å¦‚æœæŠŠ Android ç³»ç»Ÿæ¯”ä½œä¸€å®¶å¤§å…¬å¸ï¼š</p>
<ul>
<li><strong>SystemUI</strong> æ˜¯å‰å°æ¥å¾…å‘˜ï¼ˆè´Ÿè´£å±•ç¤ºå’Œç®€å•äº¤äº’ï¼‰ã€‚</li>
<li><strong>Framework (system_server)</strong> æ˜¯æ€»ç»ç†å’Œå„ä¸ªèŒèƒ½éƒ¨é—¨ï¼ˆæŒæ¡æ ¸å¿ƒæƒåŠ›å’Œæ•°æ®ï¼‰ã€‚</li>
<li><strong>Launcher</strong> æ˜¯æ¡£æ¡ˆå®¤ç®¡ç†å‘˜ï¼ˆç®¡ç†åº”ç”¨åˆ—è¡¨å’Œä»»åŠ¡æ ˆï¼‰ã€‚</li>
</ul>
<p>å‰å°æ¥å¾…å‘˜è¦å®Œæˆå·¥ä½œï¼Œå°±å¿…é¡»æ—¶åˆ»ä¿æŒä¸æ€»ç»ç†å’Œæ¡£æ¡ˆç®¡ç†å‘˜çš„é€šè¯ã€‚è¿™ç§â€œé€šè¯â€æœºåˆ¶ï¼Œå°±æ˜¯æˆ‘ä»¬ä»Šå¤©è¦æ·±æŒ–çš„ <strong>IPCï¼ˆè¿›ç¨‹é—´é€šä¿¡ï¼‰</strong> ï¼Œè€Œåœ¨ Android ä¸­ï¼Œå…¶åŸºçŸ³ä¾¿æ˜¯ <strong>Binder</strong>ã€‚</p>
<h2 data-id="heading-1">ğŸŒ‰ 0x01. æ ¸å¿ƒé€šä¿¡æœºåˆ¶ï¼ˆä¸€ï¼‰ï¼šä¸ Launcher/Recents çš„é€šä¿¡ï¼ˆå¤šä»»åŠ¡ç®¡ç†ï¼‰</h2>
<h3 data-id="heading-2">èƒŒæ™¯</h3>
<p>åœ¨ Android 9.0 (Pie) ä¹‹å‰ï¼Œâ€œæœ€è¿‘ä»»åŠ¡â€ (Recents) ç•Œé¢é€šå¸¸ç”± SystemUI è‡ªå·±ç»˜åˆ¶ã€‚ä½†ä¸ºäº†å®ç°æ‰‹åŠ¿æ“ä½œä¸­â€œä»åº”ç”¨å¹³æ»‘è¿‡æ¸¡åˆ°æ¡Œé¢â€çš„åŠ¨ç”»æ•ˆæœï¼ŒGoogle å·¥ç¨‹å¸ˆå°† Recents çš„ UI é€»è¾‘ç§»äº¤ç»™äº† <strong>Launcher</strong> è¿›ç¨‹ï¼ˆå³ QuickStepï¼‰ã€‚</p>
<p>è¿™å°±å‡ºç°äº†ä¸€ä¸ªå…¸å‹çš„è·¨è¿›ç¨‹åä½œåœºæ™¯ï¼šç”¨æˆ·åœ¨ SystemUI çš„å¯¼èˆªæ åŒºåŸŸä¸Šæ»‘ -&gt; SystemUI æ•è·æ‰‹åŠ¿ -&gt; é€šçŸ¥ Launcher æ˜¾ç¤º Recents ç•Œé¢å¹¶è·Ÿéšæ‰‹æŒ‡è¿åŠ¨ã€‚</p>
<h3 data-id="heading-3">æŠ€æœ¯è§£æï¼šIOverviewProxy çš„æ¡¥æ¢ä½œç”¨</h3>
<p>SystemUI å’Œ Launcher ä¹‹é—´çš„é€šä¿¡ä¸»è¦ä¾èµ–äºä¸€ä¸ªåä¸º <code>IOverviewProxy</code> çš„ AIDL æ¥å£ã€‚</p>
<ol>
<li>
<p><strong>å»ºç«‹è¿æ¥ï¼š</strong></p>
<ul>
<li>SystemUI å¯åŠ¨æ—¶ï¼Œä¼šé€šè¿‡ <code>OverviewProxyService</code> ç›‘å¬ Launcher æœåŠ¡çš„çŠ¶æ€ã€‚</li>
<li>å½“ Launcher å¯åŠ¨åï¼Œå®ƒä¼šå®ç° <code>IOverviewProxy</code> æ¥å£ï¼Œå¹¶å°†å…¶ Binder å¯¹è±¡ä¼ é€’ç»™ SystemUIã€‚</li>
<li><strong>é€šä¿—ç†è§£ï¼š</strong> Launcher ä¸Šç­äº†ï¼ŒæŠŠè‡ªå·±çš„â€œä¸“çº¿ç”µè¯å·ç â€å‘Šè¯‰äº† SystemUIã€‚</li>
</ul>
</li>
<li>
<p><strong>æ•°æ®æµå‘ä¸äº¤äº’ï¼š</strong></p>
<ul>
<li><strong>æ‰‹åŠ¿è§¦å‘ï¼š</strong> å½“ä½ åœ¨å¯¼èˆªæ¡ä¸Šæ»‘åŠ¨æ—¶ï¼ŒSystemUI çš„å¯¼èˆªæ ç»„ä»¶æ•è·è§¦æ‘¸äº‹ä»¶ã€‚</li>
<li><strong>Binder è°ƒç”¨ï¼š</strong> SystemUI é€šè¿‡æŒæœ‰çš„ <code>IOverviewProxy</code> ä»£ç†å¯¹è±¡ï¼Œè°ƒç”¨ Launcher ä¸­çš„æ–¹æ³•ï¼ˆå¦‚ <code>onOverviewShown()</code> æˆ– <code>onMotionDown()</code>ï¼‰ã€‚</li>
<li><strong>UI å“åº”ï¼š</strong> Launcher æ¥æ”¶åˆ°æŒ‡ä»¤ï¼Œå¼€å§‹ç»˜åˆ¶ Recents çš„ç¼©ç•¥å›¾ï¼Œå¹¶æ ¹æ®æ‰‹æŒ‡ä½ç½®æ›´æ–°åŠ¨ç”»ã€‚</li>
</ul>
</li>
</ol>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    autonumber
    %% å‚ä¸è€…å®šä¹‰
    participant SysUI as SystemUIè¿›ç¨‹&lt;br/&gt;(OverviewProxyService)
    participant BinderDriver as Binderé©±åŠ¨&lt;br/&gt;(Kernel)
    participant Launcher as Launcherè¿›ç¨‹&lt;br/&gt;(TouchInteractionService)

    %% --- é˜¶æ®µä¸€ï¼šå»ºç«‹è¿æ¥ (Binding) ---
    rect rgb(240, 248, 255)
        note right of SysUI: é˜¶æ®µä¸€ï¼šå»ºç«‹è¿æ¥ (Binding)
        SysUI-&gt;&gt;SysUI: ç³»ç»Ÿå¯åŠ¨ï¼Œåˆå§‹åŒ–æœåŠ¡
        SysUI-&gt;&gt;BinderDriver: bindService(Intent=&amp;#34;android.intent.action.QUICKSTEP_SERVICE&amp;#34;)
        BinderDriver-&gt;&gt;Launcher: å”¤é†’ Launcher è¿›ç¨‹
        Launcher-&gt;&gt;Launcher: onCreate() -&gt; onBind()
        note right of Launcher: åˆ›å»º IOverviewProxy.Stub å®ä½“
        Launcher--&gt;&gt;BinderDriver: è¿”å› Binder å¯¹è±¡
        BinderDriver--&gt;&gt;SysUI: onServiceConnected(IBinder)
        note right of SysUI: å°† IBinder è½¬æ¢ä¸º IOverviewProxy å¯¹è±¡
    end

    %% --- é˜¶æ®µäºŒï¼šåŒå‘æ¡æ‰‹ (Handshake) ---
    rect rgb(255, 250, 240)
        note right of SysUI: é˜¶æ®µäºŒï¼šåŒå‘æ¡æ‰‹ (Handshake)
        note over SysUI, Launcher: SystemUI ä¹Ÿéœ€è¦æŠŠè‡ªå·±çš„æ¥å£ç»™ Launcher
        SysUI-&gt;&gt;SysUI: åˆ›å»º ISystemUiProxy (å®ç°è€…)
        SysUI-&gt;&gt;Launcher: è°ƒç”¨ IOverviewProxy.onInitialize(ISystemUiProxy)
        Launcher-&gt;&gt;Launcher: ä¿å­˜ SystemUI çš„ä»£ç†å¯¹è±¡
        note right of Launcher: è‡³æ­¤ï¼ŒåŒæ–¹å»ºç«‹äº†åŒå‘é€šä¿¡é€šé“
    end

    %% --- é˜¶æ®µä¸‰ï¼šè¿è¡Œæ—¶é€šä¿¡ (Runtime IPC) ---
    rect rgb(240, 255, 240)
        note right of SysUI: é˜¶æ®µä¸‰ï¼šæ‰‹åŠ¿äº¤äº’ (Runtime)
        
        participant User as ç”¨æˆ·æ‰‹æŒ‡
        User-&gt;&gt;SysUI: åœ¨å¯¼èˆªæ ä¸Šæ»‘ (Touch Event)
        SysUI-&gt;&gt;SysUI: InputMonitor æ•è·äº‹ä»¶
        
        note over SysUI, Launcher: è·¨è¿›ç¨‹è°ƒç”¨å¼€å§‹
        SysUI-&gt;&gt;BinderDriver: mOverviewProxy.onMotionDown()
        BinderDriver-&gt;&gt;Launcher: ä¼ è¾“æ•°æ® (Parcel)
        Launcher-&gt;&gt;Launcher: Stub.onMotionDown()
        
        Launcher-&gt;&gt;Launcher: ç»˜åˆ¶ Recents åŠ¨ç”» (è·Ÿéšæ‰‹æŒ‡)
        Launcher--&gt;&gt;User: ç•Œé¢æ›´æ–° (UI Feedback)
    end
</code></pre>
<h4 data-id="heading-4">A. è¯·æ±‚è¿æ¥ (Connection)</h4>
<ul>
<li><strong>SystemUI ç«¯</strong>ï¼šä½¿ç”¨ <code>Context.bindService()</code> ç»‘å®š Launcher çš„<strong>Service</strong> (<code>TouchInteractionService</code>)ã€‚</li>
<li><strong>Launcher ç«¯</strong>ï¼šåœ¨ <code>onBind()</code> ä¸­è¿”å› <code>mTISBinder</code>ã€‚è¿™ä¸ª Binder å¯¹è±¡ç»§æ‰¿è‡ª <code>IOverviewProxy.Stub</code>ã€‚</li>
</ul>
<p>SystemUI ç«¯åœ¨ <code>OverviewProxyService</code> ä¸ Launcher å»ºç«‹è¿æ¥å¹¶æŠŠSystemUIçš„ä»£ç†å¯¹è±¡ä¼ ç»™Launcherï¼Œå…¶ä»£ç ç‰‡æ®µä¸º</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">// SystemUI è¿›ç¨‹å»ºç«‹è¿æ¥çš„æ–¹æ³•</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">startConnectionToCurrentUser</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">if</span> (mHandler.getLooper() != Looper.myLooper()) {
        mHandler.post(mConnectionRunnable);
    } <span class="hljs-keyword">else</span> {
        internalConnectToCurrentUser();
    }
}
<span class="hljs-comment">// å®é™…å‘èµ·è¿æ¥çš„é€»è¾‘</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">internalConnectToCurrentUser</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">//...</span>
    <span class="hljs-comment">// æŸ¥è¯¢ Launcher çš„æœåŠ¡Actionå®é™…ä¸Šå°±æ˜¯Launcher è¿›ç¨‹ä¸­ Manifestä¸­å®šä¹‰çš„</span>
    <span class="hljs-comment">// &amp;#34;android.intent.action.QUICKSTEP_SERVICE&amp;#34;</span>
    <span class="hljs-type">Intent</span> <span class="hljs-variable">launcherServiceIntent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Intent</span>(ACTION_QUICKSTEP)
            .setPackage(mRecentsComponentName.getPackageName());
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// 1.ç»‘å®šæœåŠ¡ï¼ŒSystemUI è¯·æ±‚æœåŠ¡ï¼Œå°†è·å– Launcher ä¸­çš„ IOverviewProxy ä»£ç†å¯¹è±¡</span>
        mBound = mContext.bindServiceAsUser(launcherServiceIntent,
                mOverviewServiceConnection,
                Context.BIND_AUTO_CREATE | Context.BIND_FOREGROUND_SERVICE_WHILE_AWAKE,
                UserHandle.of(getCurrentUserId()));
    } <span class="hljs-keyword">catch</span> (SecurityException e) {
        Log.e(TAG_OPS, &amp;#<span class="hljs-number">34</span>;Unable to bind because of security error&amp;#<span class="hljs-number">34</span>;, e);
    }
    <span class="hljs-comment">//...</span>
}

<span class="hljs-comment">// æœåŠ¡è¿æ¥ç›‘å¬</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ServiceConnection</span> <span class="hljs-variable">mOverviewServiceConnection</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServiceConnection</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onServiceConnected</span><span class="hljs-params">(ComponentName name, IBinder service)</span> {
        <span class="hljs-comment">//...</span>
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 2. ç›‘å¬è¿æ¥é“¾è·¯çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¦‚æœæœåŠ¡æ­»äº¡åˆ™é‡æ–°å‘èµ·è¿æ¥</span>
            service.linkToDeath(mOverviewServiceDeathRcpt, <span class="hljs-number">0</span>);
        } <span class="hljs-keyword">catch</span> (RemoteException e) {
           <span class="hljs-comment">//...</span>
        }

        mCurrentBoundedUserId = getCurrentUserId();
        <span class="hljs-comment">// 3. è·å– Launcher å¾—ä»£ç†å¯¹è±¡ IOverviewProxy</span>
        mOverviewProxy = IOverviewProxy.Stub.asInterface(service);

        <span class="hljs-type">Bundle</span> <span class="hljs-variable">params</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bundle</span>();
        <span class="hljs-comment">// 4. æŠŠ SystemUI çš„ä»£ç†å¯¹è±¡ mSysUiProxy é€šè¿‡ Bundle è¿›è¡Œä¼ è¾“</span>
        params.putBinder(KEY_EXTRA_SYSUI_PROXY, mSysUiProxy.asBinder());
        params.putFloat(KEY_EXTRA_WINDOW_CORNER_RADIUS, mWindowCornerRadius);
        params.putBoolean(KEY_EXTRA_SUPPORTS_WINDOW_CORNERS, mSupportsRoundedCornersOnWindows);
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 4. å»ºç«‹åŒå‘é€šè¡Œï¼ŒæŠŠ SystemUI çš„ä»£ç†å¯¹è±¡ å‘ŠçŸ¥ Launcher</span>
            <span class="hljs-comment">// è‡³æ­¤ SystemUI ä¸ Launcher éƒ½è·å¾—äº†å¯¹æ–¹çš„ä»£ç†å¯¹è±¡</span>
            <span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ªä¸¤ä¸ªè¿›ç¨‹åŒå‘é€šè¡Œã€ä¿æ´»æœºåˆ¶çš„æ ‡å‡†å®ç°æ–¹å¼ï¼Œå®é™…é¡¹ç›®ä¸­è¯·ç›´æ¥ç…§æŠ„æ­¤æ¨¡å¼ï¼</span>
            mOverviewProxy.onInitialize(params);
        } <span class="hljs-keyword">catch</span> (RemoteException e) {
            mCurrentBoundedUserId = -<span class="hljs-number">1</span>;
            Log.e(TAG_OPS, &amp;#<span class="hljs-number">34</span>;Failed to call <span class="hljs-title function_">onInitialize</span><span class="hljs-params">()</span>&amp;#<span class="hljs-number">34</span>;, e);
        }
        <span class="hljs-comment">// ...</span>
    }

    <span class="hljs-comment">//... çœç•¥ä»£ç </span>
};

</code></pre>
<p>Launcher ç«¯åœ¨ <code>TouchInteractionService</code> å®ç°äº†<code>IOverviewProxy.Stub</code> æ¥å£ï¼Œä»£ç ç‰‡æ®µä¸º</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TISBinder</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IOverviewProxy</span>.Stub {

        <span class="hljs-meta">@BinderThread</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onInitialize</span><span class="hljs-params">(Bundle bundle)</span> {
            <span class="hljs-comment">// è¿™é‡Œç›´æ¥ä»Bundle ä¸­è·å– SystemUI çš„ä»£ç†å¯¹è±¡ å¹¶è½¬æˆ ISystemUiProxy</span>
            <span class="hljs-type">ISystemUiProxy</span> <span class="hljs-variable">proxy</span> <span class="hljs-operator">=</span> ISystemUiProxy.Stub.asInterface(
                    bundle.getBinder(KEY_EXTRA_SYSUI_PROXY));
               ...
            });
            sIsInitialized = <span class="hljs-literal">true</span>;
        }
        ...
</code></pre>
<h4 data-id="heading-5">B. æ•°æ®ä¼ è¾“ (Transaction)</h4>
<p>å½“åœ¨ SystemUI è°ƒç”¨ <code>mOverviewProxy.onOverviewShown()</code> æ—¶ï¼Œåº•å±‚å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p>
<ol>
<li><strong>åºåˆ—åŒ– (Marshalling)</strong> ï¼šSystemUI çš„ IOverviewProxy å°†æ–¹æ³• IDï¼ˆå¦‚ <code>TRANSACTION_onOverviewShown</code>ï¼‰å’Œå‚æ•°å†™å…¥ä¸€ä¸ª <code>Parcel</code> å¯¹è±¡ã€‚</li>
<li><strong>é™·å…¥å†…æ ¸ (Kernel Trap)</strong> ï¼šProxy è°ƒç”¨ <code>transact()</code>ï¼Œçº¿ç¨‹æŒ‚èµ·ï¼Œè¿›å…¥ Linux å†…æ ¸æ€ã€‚</li>
<li><strong>é©±åŠ¨æ¬è¿</strong>ï¼šBinder é©±åŠ¨æ‰¾åˆ° Launcher è¿›ç¨‹ï¼Œå°†æ•°æ®ä» SystemUI çš„å†…å­˜ç©ºé—´æ‹·è´ï¼ˆæ˜ å°„ï¼‰åˆ° Launcher çš„å†…å­˜ç©ºé—´ã€‚</li>
<li><strong>åˆ†å‘ (Dispatch)</strong> ï¼šLauncher è¿›ç¨‹ä¸­çš„ Binder çº¿ç¨‹æ± è¢«å”¤é†’ï¼Œæ”¶åˆ°æ•°æ®ã€‚</li>
<li><strong>æ‰§è¡Œ (Execution)</strong> ï¼šLauncher çš„ Stub è°ƒç”¨ <code>onTransact()</code>ï¼Œè§£æå‡ºæ˜¯å“ªä¸ªæ–¹æ³•ï¼Œç„¶åè°ƒç”¨ <code>TouchInteractionService</code> ä¸­å…·ä½“çš„ <code>onOverviewShown()</code> å®ç°é€»è¾‘ã€‚</li>
</ol>
<h4 data-id="heading-6">C. åŒå‘é€šä¿¡ (Bi-directional)</h4>
<p>æ³¨æ„å›¾ä¸­ <strong>é˜¶æ®µäºŒ</strong> çš„â€œæ¡æ‰‹â€ã€‚</p>
<ul>
<li>Launcher ä¸ä»…ä»…æ˜¯è¢«æ§åˆ¶ï¼Œå®ƒæœ‰æ—¶ä¹Ÿéœ€è¦æ§åˆ¶ SystemUIï¼ˆä¾‹å¦‚ï¼šåœ¨å¤šä»»åŠ¡ç•Œé¢ç‚¹å‡»â€œåˆ†å±â€ï¼ŒLauncher éœ€è¦é€šçŸ¥ SystemUI è¿›å…¥åˆ†å±æ¨¡å¼ï¼‰ã€‚</li>
<li>å› æ­¤ï¼ŒSystemUI è¿æ¥ä¸Š Launcher åï¼Œç«‹åˆ»è°ƒç”¨ <code>onInitialize(ISystemUiProxy proxy)</code>ï¼ŒæŠŠ<strong>è‡ªå·±çš„ Binder</strong> ä¼ ç»™ Launcherã€‚</li>
<li>è¿™æ ·ï¼Œ<strong>åŒæ–¹æ‰‹ä¸­éƒ½æ¡ç€å¯¹æ–¹çš„â€œé¥æ§å™¨â€ï¼ˆBinder ä»£ç†å¯¹è±¡ï¼‰</strong> ï¼Œéƒ½å¯ä»¥ç»™å¯¹æ–¹å‘é€æ¶ˆæ¯ã€‚</li>
</ul>
<h2 data-id="heading-7">ğŸ“ 0x02. æ ¸å¿ƒé€šä¿¡æœºåˆ¶ï¼ˆäºŒï¼‰ï¼šä¸ Framework çš„é€šä¿¡ï¼ˆCommandQueueï¼‰</h2>
<h3 data-id="heading-8">èƒŒæ™¯</h3>
<p>Framework å±‚ï¼ˆä¸»è¦æ˜¯ <code>system_server</code> è¿›ç¨‹ï¼‰åŒ…å«ç€ Android çš„å¤§è„‘ï¼Œå¦‚ <code>WindowManagerService</code> (WMS) å’Œ <code>StatusBarManagerService</code>ã€‚å½“ç³»ç»ŸçŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶â€”â€”ä¾‹å¦‚ç”µè¯æ¥äº†éœ€è¦å…¨å±é€šçŸ¥ï¼Œæˆ–è€…åº”ç”¨è¯·æ±‚éšè—çŠ¶æ€æ ï¼ˆæ²‰æµ¸æ¨¡å¼ï¼‰â€”â€”Framework éœ€è¦â€œå‘½ä»¤â€ SystemUI æ›´æ–°ç•Œé¢ã€‚</p>
<h3 data-id="heading-9">CommandQueue æ·±åº¦è§£æ</h3>
<p><strong>CommandQueue</strong> æ˜¯ SystemUI ä¸­æå…¶å…³é”®çš„ä¸€ä¸ªç±»ï¼Œå®ƒæ˜¯ Framework å‘ SystemUI å‘å·æ–½ä»¤çš„â€œæ€»çº¿â€ã€‚</p>
<h4 data-id="heading-10">1. å®šä¹‰ä¸åŸç†</h4>
<ul>
<li><strong>æœ¬è´¨ï¼š</strong> <code>CommandQueue</code> ç»§æ‰¿è‡ª <code>IStatusBar.Stub</code>ã€‚è¿™æ„å‘³ç€å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª <strong>Binder æœ¬åœ°å¯¹è±¡</strong>ã€‚</li>
<li><strong>ä½ç½®ï¼š</strong> å®ƒè¿è¡Œåœ¨ SystemUI è¿›ç¨‹ä¸­ã€‚</li>
<li><strong>ä½œç”¨ï¼š</strong> å®ƒæ˜¯ SystemUI åœ¨ Binder é€šä¿¡ä¸­çš„â€œæ¥æ”¶ç«¯â€ã€‚</li>
</ul>
<p>åœ¨ SystemUI ç«¯ <code>CommandQueue</code> ç›‘å¬åˆ° Framework çš„é€šçŸ¥åé€šè¿‡ Handler è¿›è¡Œåˆ†å‘ï¼Œå…¶ä»£ç ç‰‡æ®µä¸º</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CommandQueue</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IStatusBar</span>.Stub {
    
    <span class="hljs-comment">// ...</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">animateCollapsePanels</span><span class="hljs-params">(<span class="hljs-type">int</span> flags, <span class="hljs-type">boolean</span> force)</span> {
        <span class="hljs-keyword">synchronized</span> (mLock) {
            mHandler.removeMessages(MSG_COLLAPSE_PANELS);
            mHandler.obtainMessage(MSG_COLLAPSE_PANELS, flags, force ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>).sendToTarget();
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">togglePanel</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">synchronized</span> (mLock) {
            mHandler.removeMessages(MSG_TOGGLE_PANEL);
            mHandler.obtainMessage(MSG_TOGGLE_PANEL, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>).sendToTarget();
        }
    }
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p><code>CommandQueue</code> ä½œä¸º SystemUI çš„æœåŠ¡ç«¯æ¥å£ï¼Œé‚£å®ƒæ˜¯å¦‚ä½•å‘ŠçŸ¥ Framework ä¸­çš„ <code>system_server</code> è¿›ç¨‹çš„å‘¢?</p>
<p>ç­”æ¡ˆæ˜¯åœ¨ <code>StatusBar</code> æˆ–è€…é«˜ç‰ˆæœ¬çš„ <code>CentralSurfacesImpl</code> çš„ <code>start()</code> ä¸­ï¼Œé€šè¿‡ç³»ç»ŸæœåŠ¡ <code>StatusBarService</code> è¿›è¡Œä¼ é€’çš„ã€‚</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">start</span><span class="hljs-params">()</span> {
    ...
    <span class="hljs-comment">// è¿™é‡Œé€šè¿‡ ServiceManager è·å–åˆ° StatusBarService çš„å¯¹è±¡</span>
    mBarService = IStatusBarService.Stub.asInterface(
          ServiceManager.getService(Context.STATUS_BAR_SERVICE));
    ...
    
    <span class="hljs-type">RegisterStatusBarResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// ç„¶åé€šè¿‡ registerStatusBar æ–¹æ³•æŠŠ CommandQueue å¯¹è±¡ä¼ è¾“åˆ°</span>
        <span class="hljs-comment">// system_server è¿›ç¨‹ï¼Œè¿™æ ·system_server å°±å¯ä»¥ä¸ SystemUI è¿›è¡Œé€šä¿¡äº†</span>
        result = mBarService.registerStatusBar(mCommandQueue);
    } <span class="hljs-keyword">catch</span> (RemoteException ex) {
        ex.rethrowFromSystemServer();
    }

    createAndAddWindows(result);

    ...
}
</code></pre>
<h4 data-id="heading-11">2. æ•°æ®æµå‘</h4>
<ol>
<li>
<p><strong>å‘é€æŒ‡ä»¤ (Framework)ï¼š</strong></p>
<ul>
<li>å½“ App è°ƒç”¨ <code>setSystemUiVisibility()</code> è¯·æ±‚å…¨å±æ—¶ï¼ŒWMS ä¼šå¤„ç†è¯¥è¯·æ±‚ã€‚</li>
<li>WMS é€šè¿‡ <code>StatusBarManagerService</code> æ‰¾åˆ° SystemUI æ³¨å†Œè¿‡æ¥çš„ Binder ä»£ç†ï¼ˆå³ <code>IStatusBar</code> æ¥å£ï¼‰ã€‚</li>
<li>è°ƒç”¨ <code>bar.setSystemUiVisibility(...)</code>ã€‚</li>
</ul>
</li>
<li>
<p><strong>è·¨è¿›ç¨‹ä¼ è¾“ (Binder)ï¼š</strong></p>
<ul>
<li>æŒ‡ä»¤é€šè¿‡ Binder é©±åŠ¨ä» <code>system_server</code> ä¼ è¾“åˆ° SystemUI è¿›ç¨‹ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ¥æ”¶ä¸åˆ†å‘ (SystemUI)ï¼š</strong></p>
<ul>
<li><code>CommandQueue</code> æ¥æ”¶åˆ° Binder è°ƒç”¨ã€‚</li>
<li><strong>å…³é”®ç‚¹ï¼š</strong> Binder è°ƒç”¨é€šå¸¸å‘ç”Ÿåœ¨ Binder çº¿ç¨‹æ± ä¸­ï¼Œä¸èƒ½ç›´æ¥æ›´æ–° UIã€‚å› æ­¤ï¼Œ<code>CommandQueue</code> å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ª <code>Handler</code>ï¼Œå°†è¿™äº›æŒ‡ä»¤å°è£…æˆ Messageï¼Œå‘é€åˆ° SystemUI çš„<strong>ä¸»çº¿ç¨‹ (Main Thread)</strong> é˜Ÿåˆ—ä¸­æ’é˜Ÿæ‰§è¡Œã€‚</li>
<li>æœ€ç»ˆï¼ŒSystemUI çš„å„ä¸ªç»„ä»¶ï¼ˆå¦‚ <code>StatusBar</code> ç±»ï¼‰é€šè¿‡å›è°ƒæ¥å£ï¼ˆ<code>Callbacks</code>ï¼‰å“åº”è¿™äº›å˜åŒ–ï¼Œæ›´æ–°å›¾æ ‡æˆ–éšè—å¯¼èˆªæ ã€‚</li>
</ul>
</li>
</ol>
<p>å®ƒä»¬ä¸‰è€…çš„å…³ç³»æ—¶åºå›¾ä¸º</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    autonumber

    participant SysUI as SystemUIè¿›ç¨‹&lt;br/&gt;(CommandQueue)
    participant SBMS as SystemServer&lt;br/&gt;(StatusBarManagerService)
    participant BinderDriver as Binderé©±åŠ¨/ServiceManager

    Note over SysUI: SystemUI è¿›ç¨‹å¯åŠ¨
    
    %% --- é˜¶æ®µä¸€ï¼šCommandQueue å¯¹è±¡åˆ›å»ºä¸åˆå§‹åŒ– ---
    SysUI-&gt;&gt;SysUI: åˆ›å»º CommandQueue å®ä¾‹
    Note right of SysUI: CommandQueue ç»§æ‰¿ IStatusBar.Stub&lt;br/&gt;(SystemUI çš„ Binder å®ä½“)
    
    %% --- é˜¶æ®µäºŒï¼šå‘ SystemServer æ³¨å†ŒæœåŠ¡ ---
    Note over SysUI, SBMS: SystemUI å°†è‡ªèº« Stub å¯¹è±¡æ³¨å†Œåˆ° Framework
    
    SysUI-&gt;&gt;SBMS: getSystemService(STATUS_BAR_SERVICE)&lt;br/&gt;(è·å– SBMS ä»£ç†)
    
    SysUI-&gt;&gt;SBMS: registerStatusBar(IStatusBar.Stub)
    
    %% 3. Binder ä¼ è¾“
    Note right of SBMS: SBMS æ¥æ”¶ Stub å¯¹è±¡&lt;br/&gt;å¹¶è½¬æ¢ä¸º IStatusBar ä»£ç†
    
    SBMS-&gt;&gt;SBMS: ä¿å­˜ IStatusBar ä»£ç†å¼•ç”¨ (mCallbacks)
    
    Note over SBMS, SysUI: è¿æ¥å»ºç«‹å®Œæˆï¼š&lt;br/&gt;SystemServer ç°æŒæœ‰ SystemUI çš„â€œé¥æ§å™¨â€
    
    %% --- é˜¶æ®µä¸‰ï¼šåç»­æŒ‡ä»¤å‡†å¤‡å°±ç»ª ---
    SBMS-&gt;&gt;SysUI: (è¿æ¥ç¡®è®¤ï¼Œä½†æ— è¿”å›å€¼)
    
    loop åç»­æŒ‡ä»¤å‘é€
        SBMS-&gt;&gt;SysUI: IStatusBar.disable(StateFlags)&lt;br/&gt;(é€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨)
        SysUI-&gt;&gt;SysUI: CommandQueue æ¥æ”¶å¹¶å¤„ç†æŒ‡ä»¤
    end
</code></pre>
<h3 data-id="heading-12">åº”ç”¨å®ä¾‹ï¼šæ²‰æµ¸æ¨¡å¼</h3>
<p>å½“ä½ åœ¨çœ‹è§†é¢‘æ—¶ï¼ŒApp è¯·æ±‚éšè—çŠ¶æ€æ ï¼š</p>
<ol>
<li><strong>App</strong> -&gt; <code>View.setSystemUiVisibility(SYSTEM_UI_FLAG_FULLSCREEN)</code></li>
<li><strong>WMS</strong> (Framework) è®¡ç®—å‡ºæ–°çš„æ ‡å¿—ä½ã€‚</li>
<li><strong>Binder</strong> è°ƒç”¨ <code>IStatusBar.setSystemUiVisibility</code>ã€‚</li>
<li><strong>SystemUI</strong> çš„ <code>CommandQueue</code> æ”¶åˆ°è°ƒç”¨ -&gt; åˆ‡å›ä¸»çº¿ç¨‹ -&gt; é€šçŸ¥çŠ¶æ€æ  View æ’­æ”¾æ·¡å‡ºåŠ¨ç”»ã€‚</li>
</ol>
<p><strong>æ€»ç»“ï¼š</strong><br/>
æœ¬æ–‡è®²è§£ SystemUI ä¸­ä¸¤ç§æ¯”è¾ƒå¸¸è§çš„ Binder çš„ä¸šåŠ¡ï¼š</p>
<ul>
<li>ä¸ç³»ç»Ÿå±‚ Framework é€šä¿¡ï¼ˆCommandQueueæœºåˆ¶ï¼‰</li>
<li>ä¸Appå±‚ Launcher é€šä¿¡ï¼ˆåŒå‘é€šä¿¡ï¼‰</li>
</ul>
<p>æŒæ¡ SystemUI çš„ IPC æœºåˆ¶ï¼Œæ˜¯ç†è§£ Android ç³»ç»Ÿäº¤äº’é€»è¾‘çš„é’¥åŒ™ï¼Œä¹Ÿæ˜¯è¿›è¡Œæ·±åº¦ç³»ç»Ÿå®šåˆ¶çš„å¿…ç»ä¹‹è·¯ã€‚å¸Œæœ›æœ¬æ–‡èƒ½ä¸ºæ‚¨æ­å¼€è¿™å±‚ç¥ç§˜çš„é¢çº±ã€‚<br/>
ä¸‹ä¸€ç¯‡å°†å‰–ææ›´ä¸ºå¤æ‚ç²¾å¦™çš„<strong>å…¨é¢å±æ‰‹åŠ¿å¯¼èˆª</strong>çš„æœºåˆ¶ï¼Œè¿™é‡Œä¸ä»…æœ‰è¿›ç¨‹é—´é€šä¿¡è¿˜æœ‰å„ç§äº‹ä»¶çš„åœ¨ä¸åŒåº”ç”¨çš„åˆ†å‘ä¼ é€’ä¸åè°ƒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SDWebImageæ·±åº¦è§£æï¼šé«˜æ•ˆå›¾ç‰‡åŠ è½½èƒŒåçš„æ¶æ„è®¾è®¡ä¸å“è¶Šå®è·µ]]></title>    <link>https://juejin.cn/post/7582067084840304694</link>    <guid>https://juejin.cn/post/7582067084840304694</guid>    <pubDate>2025-12-10T15:48:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582067084840304694" data-draft-id="7582047623739080758" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SDWebImageæ·±åº¦è§£æï¼šé«˜æ•ˆå›¾ç‰‡åŠ è½½èƒŒåçš„æ¶æ„è®¾è®¡ä¸å“è¶Šå®è·µ"/> <meta itemprop="keywords" content="iOS,å›¾ç‰‡èµ„æº"/> <meta itemprop="datePublished" content="2025-12-10T15:48:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="sweetä¸¶"/> <meta itemprop="url" content="https://juejin.cn/user/3227821869921646"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SDWebImageæ·±åº¦è§£æï¼šé«˜æ•ˆå›¾ç‰‡åŠ è½½èƒŒåçš„æ¶æ„è®¾è®¡ä¸å“è¶Šå®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3227821869921646/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    sweetä¸¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T15:48:23.000Z" title="Wed Dec 10 2025 15:48:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨ç§»åŠ¨åº”ç”¨å¼€å‘ä¸­ï¼Œå›¾ç‰‡åŠ è½½å’Œç¼“å­˜æ˜¯å½±å“ç”¨æˆ·ä½“éªŒçš„å…³é”®ç¯èŠ‚ã€‚SDWebImageä½œä¸ºiOSå¹³å°ä¸Šæœ€å—æ¬¢è¿çš„å›¾ç‰‡åŠ è½½åº“ï¼Œä»¥å…¶é«˜æ€§èƒ½ã€ä¸°å¯Œçš„åŠŸèƒ½å’Œç¨³å®šçš„è¡¨ç°èµ¢å¾—äº†å…¨çƒå¼€å‘è€…çš„ä¿¡èµ–ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨SDWebImageçš„æ ¸å¿ƒåŸç†ã€æ¶æ„è®¾è®¡ï¼Œå¹¶è§£ç­”å®é™…ä½¿ç”¨ä¸­çš„å¸¸è§é—®é¢˜ã€‚</p>
</blockquote>
<h3 data-id="heading-0">ä¸€ã€æ•´ä½“æ¶æ„è®¾è®¡ï¼šæ¨¡å—åŒ–ä¸èŒè´£åˆ†ç¦»</h3>
<p>ä¸ºäº†è®©ä½ èƒ½è¿…é€ŸæŠ“ä½æ ¸å¿ƒï¼Œæˆ‘ä»¬å…ˆç”¨ä¸€å¼ å›¾ï¼Œä»å®è§‚è§†è§’çœ‹æ‡‚å®ƒçš„å·¥ä½œåŸç†ä¸æ ¸å¿ƒæµç¨‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f7b2aecc97b438bb945a3b1fbefc46a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3dlZXTkuLY=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765986502&amp;x-signature=KCbOGYB5Ijkfa77oKQtmhsD9WWY%3D" alt="deepseek_mermaid_20251210_9277be.png" loading="lazy"/></p>
<p>SDWebImageé‡‡ç”¨äº†æ¸…æ™°çš„åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œå°†å¤æ‚çš„å›¾ç‰‡åŠ è½½è¿‡ç¨‹åˆ†è§£ä¸ºç‹¬ç«‹çš„æ¨¡å—ï¼Œå„å¸å…¶èŒï¼š</p>
<p><strong>1. æ ¸å¿ƒåè°ƒè€…ï¼šSDWebImageManager</strong></p>
<p>è¿™æ˜¯SDWebImageçš„"å¤§è„‘"ï¼Œè´Ÿè´£åè°ƒç¼“å­˜æŸ¥æ‰¾ã€ä¸‹è½½å’Œå›¾ç‰‡å¤„ç†æµç¨‹ã€‚å®ƒä½¿ç”¨ç»„åˆæ¨¡å¼å°†<code>SDImageCache</code>å’Œ<code>SDWebImageDownloader</code>ç»„åˆåœ¨ä¸€èµ·ï¼Œå®ç°äº†å¯¹å›¾ç‰‡åŠ è½½å…¨ç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†ã€‚</p>
<p><strong>2. ç¼“å­˜æ¨¡å—ï¼šSDImageCache</strong>
è´Ÿè´£å†…å­˜å’Œç£ç›˜ç¼“å­˜çš„åŒå±‚å­˜å‚¨ã€‚å†…å­˜ç¼“å­˜åŸºäºNSCacheå®ç°ï¼Œæä¾›å¿«é€Ÿè®¿é—®ï¼›ç£ç›˜ç¼“å­˜å°†å›¾ç‰‡æŒä¹…åŒ–å­˜å‚¨åˆ°æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œæ”¯æŒè‡ªå®šä¹‰ç¼“å­˜ç­–ç•¥ã€‚</p>
<p><strong>3. ä¸‹è½½æ¨¡å—ï¼šSDWebImageDownloader</strong>
åŸºäºNSURLSessionæ„å»ºçš„å¼‚æ­¥ä¸‹è½½å™¨ï¼Œæ”¯æŒå¹¶å‘æ§åˆ¶ã€è¯·æ±‚ä¼˜å…ˆçº§è®¾ç½®å’Œèº«ä»½éªŒè¯ç­‰é«˜çº§åŠŸèƒ½ã€‚å®ƒé€šè¿‡æ“ä½œé˜Ÿåˆ—ç®¡ç†ä¸‹è½½ä»»åŠ¡ï¼Œç¡®ä¿é«˜æ•ˆåˆ©ç”¨ç½‘ç»œèµ„æºã€‚</p>
<p><strong>4. è§£ç ä¸å¤„ç†æ¨¡å—</strong>
è´Ÿè´£å›¾ç‰‡è§£ç ã€ç¼©æ”¾ã€è£å‰ªç­‰åå¤„ç†æ“ä½œã€‚SDWebImageåœ¨åå°çº¿ç¨‹æ‰§è¡Œè¿™äº›æ“ä½œï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹ã€‚</p>
<p><strong>5. è§†å›¾æ‰©å±•ï¼šUIImageView+WebCache</strong>
ä¸ºUIKitç»„ä»¶æä¾›çš„ä¾¿æ·æ¥å£ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡ä¸€è¡Œä»£ç å®ç°å›¾ç‰‡çš„å¼‚æ­¥åŠ è½½å’Œç¼“å­˜ç®¡ç†ã€‚</p>
<p>è¿™ç§æ¨¡å—åŒ–è®¾è®¡ä¸ä»…ä½¿ä»£ç ç»“æ„æ¸…æ™°ï¼Œè¿˜æé«˜äº†åº“çš„å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<h3 data-id="heading-1">äºŒã€å›¾ç‰‡è§£ç æœºåˆ¶ï¼šåå°çº¿ç¨‹çš„é«˜æ•ˆå¤„ç†</h3>
<p>iOSç³»ç»Ÿåœ¨æ¸²æŸ“å›¾ç‰‡æ—¶éœ€è¦å°†å…¶è§£ç ä¸ºä½å›¾æ ¼å¼ï¼Œè¿™ä¸ªè¿‡ç¨‹é»˜è®¤åœ¨ä¸»çº¿ç¨‹è¿›è¡Œï¼Œå¯èƒ½å¯¼è‡´ç•Œé¢å¡é¡¿ã€‚SDWebImageå¯¹æ­¤è¿›è¡Œäº†é‡è¦ä¼˜åŒ–ï¼š</p>
<p><strong>è§£ç æ—¶æœºä¸çº¿ç¨‹ç­–ç•¥</strong>
SDWebImageåœ¨å›¾ç‰‡ä»ç£ç›˜åŠ è½½æˆ–ç½‘ç»œä¸‹è½½å®Œæˆåï¼Œç«‹å³åœ¨åå°çº¿ç¨‹è¿›è¡Œè§£ç ã€‚è§£ç å™¨ä½¿ç”¨ä¸“é—¨çš„<code>NSOperationQueue</code>ï¼Œé¿å…äº†è§£ç ä»»åŠ¡é˜»å¡ä¸»çº¿ç¨‹ã€‚</p>
<p><strong>ç©ºé—´æ¢æ—¶é—´çš„ç¼“å­˜ç­–ç•¥</strong>
è§£ç åçš„ä½å›¾æ•°æ®ä¼šè¢«ç¼“å­˜åˆ°å†…å­˜ä¸­ã€‚å½“åŒä¸€å›¾ç‰‡å†æ¬¡è¯·æ±‚æ—¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ç¼“å­˜çš„è§£ç ç»“æœï¼Œæ— éœ€é‡å¤è§£ç ï¼Œæ˜¾è‘—æå‡äº†æ€§èƒ½ã€‚</p>
<p><strong>æ¸è¿›å¼è§£ç æ”¯æŒ</strong>
å¯¹äºç½‘ç»œä¸‹è½½çš„å¤§å›¾ç‰‡ï¼ŒSDWebImageæ”¯æŒæ¸è¿›å¼è§£ç ã€‚å›¾ç‰‡åœ¨ä¸‹è½½è¿‡ç¨‹ä¸­é€æ­¥æ˜¾ç¤ºï¼Œç”¨æˆ·å¯ä»¥æ›´å¿«åœ°çœ‹åˆ°å›¾ç‰‡å†…å®¹ï¼Œæå‡ç­‰å¾…ä½“éªŒã€‚</p>
<h3 data-id="heading-2">ä¸‰ã€ç¼“å­˜æœºåˆ¶ï¼šæ™ºèƒ½çš„åŒå±‚å­˜å‚¨ç³»ç»Ÿ</h3>
<p>SDWebImageçš„ç¼“å­˜ç³»ç»Ÿæ˜¯å…¶é«˜æ€§èƒ½çš„æ ¸å¿ƒä¿éšœï¼š</p>
<p><strong>1. å†…å­˜ç¼“å­˜ï¼ˆMemory Cacheï¼‰</strong>
åŸºäºNSCacheå®ç°ï¼Œå…·æœ‰è‡ªåŠ¨æ¸…ç†æœºåˆ¶ã€‚å½“ç³»ç»Ÿå†…å­˜ç´§å¼ æ—¶ï¼ŒNSCacheä¼šè‡ªåŠ¨é‡Šæ”¾éƒ¨åˆ†ç¼“å­˜ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒSDWebImageä¸é™åˆ¶å†…å­˜ç¼“å­˜å¤§å°ï¼Œä½†æ”¯æŒé€šè¿‡<code>totalCostLimit</code>å’Œ<code>countLimit</code>è¿›è¡Œè‡ªå®šä¹‰é™åˆ¶ã€‚</p>
<p><strong>2. ç£ç›˜ç¼“å­˜ï¼ˆDisk Cacheï¼‰</strong>
å›¾ç‰‡ä»¥æ–‡ä»¶å½¢å¼å­˜å‚¨åœ¨Cacheç›®å½•ä¸­ï¼Œæ–‡ä»¶åç»è¿‡MD5å“ˆå¸Œå¤„ç†ï¼Œç¡®ä¿å”¯ä¸€æ€§å’Œå®‰å…¨æ€§ã€‚</p>
<p><strong>3. é»˜è®¤æœ€å¤§ç¼“å­˜å¤§å°</strong>
SDWebImageé»˜è®¤çš„ç£ç›˜ç¼“å­˜å¤§å°ä¸º<strong>100MB</strong>ã€‚å½“ç¼“å­˜è¶…è¿‡æ­¤é™åˆ¶æ—¶ï¼ŒSDWebImageä¼šåŸºäºæ–‡ä»¶çš„æœ€åè®¿é—®æ—¶é—´è¿›è¡Œæ¸…ç†ï¼Œä¼˜å…ˆç§»é™¤æœ€ä¹…æœªè®¿é—®çš„å›¾ç‰‡ã€‚è¿™ä¸€è®¾ç½®å¯ä»¥åœ¨<code>SDImageCacheConfig</code>ä¸­è‡ªå®šä¹‰ã€‚</p>
<h3 data-id="heading-3">å››ã€ç¼“å­˜æ¸…ç†æœºåˆ¶ï¼šçµæ´»çš„èµ„æºç®¡ç†</h3>
<p>SDWebImageæä¾›äº†å¤šç§ç¼“å­˜æ¸…ç†æ–¹å¼ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯çš„éœ€æ±‚ï¼š</p>
<p><strong>1. è‡ªåŠ¨æ¸…ç†æœºåˆ¶</strong></p>
<ul>
<li><strong>åŸºäºæ—¶é—´çš„æ¸…ç†</strong>ï¼šé»˜è®¤é…ç½®ä¸‹ï¼ŒSDWebImageä¼šè‡ªåŠ¨æ¸…ç†è¶…è¿‡ä¸€å‘¨çš„ç¼“å­˜æ–‡ä»¶</li>
<li><strong>åŸºäºå¤§å°çš„æ¸…ç†</strong>ï¼šå½“ç¼“å­˜è¶…è¿‡è®¾å®šçš„å¤§å°æ—¶ï¼Œè‡ªåŠ¨æ¸…ç†æœ€æ—§çš„å›¾ç‰‡æ–‡ä»¶</li>
</ul>
<p><strong>2. æ‰‹åŠ¨æ¸…ç†æ¥å£</strong></p>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-comment">// æ¸…ç†æ‰€æœ‰å†…å­˜ç¼“å­˜</span>
[[SDImageCache sharedImageCache] clearMemory];

<span class="hljs-comment">// æ¸…ç†æ‰€æœ‰ç£ç›˜ç¼“å­˜ï¼ˆå¼‚æ­¥ï¼‰</span>
[[SDImageCache sharedImageCache] clearDiskOnCompletion:<span class="hljs-literal">nil</span>];

<span class="hljs-comment">// æ¸…ç†è¿‡æœŸçš„ç£ç›˜ç¼“å­˜ï¼ˆå¼‚æ­¥ï¼‰</span>
[[SDImageCache sharedImageCache] deleteOldFilesWithCompletionBlock:<span class="hljs-literal">nil</span>];
</code></pre>
<p><strong>3. ç»†ç²’åº¦æ§åˆ¶</strong>
å¼€å‘è€…å¯ä»¥é’ˆå¯¹ç‰¹å®šURLæˆ–keyæ¸…ç†ç¼“å­˜ï¼Œå®ç°æ›´ç²¾å‡†çš„ç¼“å­˜ç®¡ç†ã€‚</p>
<h3 data-id="heading-4">äº”ã€åŠ¨æ€å›¾æ”¯æŒï¼šä»GIFåˆ°ç°ä»£åŠ¨ç”»æ ¼å¼</h3>
<p>SDWebImageå¯¹åŠ¨æ€å›¾çš„æ”¯æŒç»å†äº†æ˜¾è‘—çš„æ¼”è¿›ï¼š</p>
<p><strong>æ—©æœŸæ–¹æ¡ˆ</strong>
æ—©æœŸç‰ˆæœ¬é€šè¿‡å°†GIFåˆ†è§£ä¸ºå¸§åºåˆ—ï¼Œä½¿ç”¨UIImageçš„åŠ¨ç”»APIæ’­æ”¾ï¼Œè¿™ç§æ–¹å¼å†…å­˜å ç”¨é«˜ä¸”åŠŸèƒ½æœ‰é™ã€‚</p>
<p><strong>ç°ä»£æ–¹æ¡ˆï¼šSDAnimatedImageåè®®</strong>
ä»SDWebImage 5.0å¼€å§‹ï¼Œå¼•å…¥äº†<code>SDAnimatedImage</code>åè®®ï¼Œæä¾›äº†ç»Ÿä¸€çš„åŠ¨ç”»å›¾ç‰‡æ¥å£ï¼Œæ”¯æŒå¤šç§æ ¼å¼ï¼š</p>
<ul>
<li>GIFï¼šå®Œæ•´çš„è§£ç å’Œæ’­æ”¾æ”¯æŒ</li>
<li>APNGï¼šAppleåŸç”Ÿæ”¯æŒçš„åŠ¨ç”»æ ¼å¼</li>
<li>WebPï¼šGoogleçš„é«˜æ•ˆå›¾ç‰‡æ ¼å¼ï¼ˆéœ€è¦é¢å¤–ç¼–ç å™¨ï¼‰</li>
<li>HEICï¼šé«˜æ•ˆçš„ç°ä»£å›¾ç‰‡æ ¼å¼</li>
</ul>
<p><strong>å†…å­˜ä¼˜åŒ–</strong>
<code>SDAnimatedImageView</code>é‡‡ç”¨æƒ°æ€§è§£ç ç­–ç•¥ï¼Œä»…è§£ç å½“å‰æ˜¾ç¤ºå’Œé¢„åŠ è½½çš„å¸§ï¼Œå¤§å¹…é™ä½äº†å†…å­˜å ç”¨ã€‚å¼€å‘è€…è¿˜å¯ä»¥é€šè¿‡<code>maxBufferSize</code>å±æ€§æ§åˆ¶ç¼“å†²å¸§æ•°ï¼Œåœ¨æµç•…åº¦å’Œå†…å­˜æ¶ˆè€—ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ã€‚</p>
<h3 data-id="heading-5">å…­ã€è§†å›¾å¯è§æ€§è§¦å‘åŠ è½½ï¼šæŒ‰éœ€åŠ è½½çš„æ™ºèƒ½ç­–ç•¥</h3>
<p>åœ¨åˆ—è¡¨ç­‰åœºæ™¯ä¸­ï¼Œå®ç°"è§†å›¾å‡ºç°åœ¨å±å¹•æ‰å¼€å§‹åŠ è½½å›¾ç‰‡"æ˜¯æå‡æ€§èƒ½çš„å…³é”®ã€‚SDWebImageä¸UIKitçš„ååŒå·¥ä½œå®ç°äº†è¿™ä¸€ç›®æ ‡ï¼š</p>
<p><strong>UITableView/UICollectionViewçš„ä¼˜åŒ–åŠ è½½</strong></p>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-comment">// åœ¨cellForRowAtIndexPathä¸­è®¾ç½®å›¾ç‰‡</span>
- (<span class="hljs-built_in">UITableViewCell</span> *)tableView:(<span class="hljs-built_in">UITableView</span> *)tableView 
         cellForRowAtIndexPath:(<span class="hljs-built_in">NSIndexPath</span> *)indexPath {
    <span class="hljs-built_in">UITableViewCell</span> *cell = [tableView dequeueReusableCellWithIdentifier:@&amp;#<span class="hljs-number">34</span>;Cell&amp;#<span class="hljs-number">34</span>;];
    
    <span class="hljs-comment">// è·å–å›¾ç‰‡URL</span>
    <span class="hljs-built_in">NSURL</span> *imageURL = [<span class="hljs-keyword">self</span> imageURLForIndexPath:indexPath];
    
    <span class="hljs-comment">// ä½¿ç”¨SDWebImageåŠ è½½å›¾ç‰‡</span>
    [cell.imageView sd_setImageWithURL:imageURL
                      placeholderImage:[<span class="hljs-built_in">UIImage</span> imageNamed:@&amp;#<span class="hljs-number">34</span>;placeholder&amp;#<span class="hljs-number">34</span>;]
                             completed:^(<span class="hljs-built_in">UIImage</span> *image, <span class="hljs-built_in">NSError</span> *error, SDImageCacheType cacheType, <span class="hljs-built_in">NSURL</span> *imageURL) {
        <span class="hljs-comment">// åŠ è½½å®Œæˆå¤„ç†</span>
    }];
    
    <span class="hljs-keyword">return</span> cell;
}

<span class="hljs-comment">// åœ¨prepareForReuseä¸­å–æ¶ˆæœªå®Œæˆçš„åŠ è½½</span>
- (<span class="hljs-type">void</span>)prepareForReuse {
    [<span class="hljs-variable language_">super</span> prepareForReuse];
    [<span class="hljs-keyword">self</span>.imageView sd_cancelCurrentImageLoad];
}
</code></pre>
<p><strong>å·¥ä½œåŸç†</strong></p>
<ol>
<li>å½“cellå‡†å¤‡æ˜¾ç¤ºæ—¶ï¼Œ<code>tableView:cellForRowAtIndexPath:</code>è¢«è°ƒç”¨ï¼Œå¼€å§‹å›¾ç‰‡åŠ è½½</li>
<li>å¦‚æœcellæ»šå‡ºå±å¹•ï¼Œ<code>prepareForReuse</code>ä¼šè¢«è°ƒç”¨ï¼Œå–æ¶ˆæœªå®Œæˆçš„å›¾ç‰‡åŠ è½½</li>
<li>SDWebImageå†…éƒ¨ä¼šç®¡ç†åŠ è½½é˜Ÿåˆ—ï¼Œä¼˜å…ˆå¤„ç†å¯è§cellçš„è¯·æ±‚</li>
</ol>
<p><strong>é«˜çº§ä¼˜åŒ–æŠ€å·§</strong></p>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-comment">// 1. é¢„åŠ è½½ï¼šæå‰åŠ è½½å³å°†æ˜¾ç¤ºçš„å›¾ç‰‡</span>
- (<span class="hljs-type">void</span>)tableView:(<span class="hljs-built_in">UITableView</span> *)tableView 
  willDisplayCell:(<span class="hljs-built_in">UITableViewCell</span> *)cell 
forRowAtIndexPath:(<span class="hljs-built_in">NSIndexPath</span> *)indexPath {
    <span class="hljs-comment">// é¢„åŠ è½½ä¸‹ä¸€æ‰¹å›¾ç‰‡</span>
    <span class="hljs-keyword">if</span> (indexPath.row + <span class="hljs-number">5</span> &lt; [<span class="hljs-keyword">self</span>.dataSource count]) {
        <span class="hljs-built_in">NSURL</span> *preloadURL = [<span class="hljs-keyword">self</span> imageURLForIndexPath:[<span class="hljs-built_in">NSIndexPath</span> indexPathForRow:indexPath.row + <span class="hljs-number">5</span> inSection:indexPath.section]];
        [[SDWebImagePrefetcher sharedImagePrefetcher] prefetchURLs:@[preloadURL]];
    }
}

<span class="hljs-comment">// 2. è®¾ç½®ä¸åŒçš„åŠ è½½ä¼˜å…ˆçº§</span>
SDWebImageOptions options = SDWebImageLowPriority | SDWebImageProgressiveLoad;
[cell.imageView sd_setImageWithURL:imageURL placeholderImage:<span class="hljs-literal">nil</span> options:options];
</code></pre>
<h3 data-id="heading-6">ä¸ƒã€é™æ€å›¾ä¸åŠ¨æ€å›¾çš„é€‰æ‹©ç­–ç•¥</h3>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é¢ä¸´é€‰æ‹©ï¼šä½¿ç”¨<code>UIImageView</code>è¿˜æ˜¯<code>SDAnimatedImageView</code>ï¼Ÿä»¥ä¸‹æ˜¯æ˜ç¡®çš„æŒ‡å¯¼åŸåˆ™ï¼š</p>
<p><strong>1. é™æ€å›¾ç‰‡åœºæ™¯</strong></p>
<ul>
<li>ä½¿ç”¨æ ‡å‡†çš„<code>UIImageView</code></li>
<li>é€šè¿‡<code>sd_setImageWithURL:</code>æ–¹æ³•åŠ è½½</li>
<li>æ€§èƒ½æœ€ä½³ï¼Œå†…å­˜å ç”¨æœ€ä½</li>
</ul>
<p><strong>2. åŠ¨æ€å›¾ç‰‡åœºæ™¯</strong></p>
<ul>
<li>ä½¿ç”¨<code>SDAnimatedImageView</code></li>
<li>é€šè¿‡<code>sd_setImageWithURL:</code>æ–¹æ³•åŠ è½½ï¼ˆSDWebImageä¼šè‡ªåŠ¨æ£€æµ‹å›¾ç‰‡ç±»å‹ï¼‰</li>
<li>æ”¯æŒGIFã€APNGã€WebPç­‰å¤šç§åŠ¨æ€æ ¼å¼</li>
</ul>
<p><strong>3. æœªçŸ¥å›¾ç‰‡ç±»å‹çš„å¤„ç†ç­–ç•¥</strong>
å½“ä¸ç¡®å®šå›¾ç‰‡æ˜¯é™æ€è¿˜æ˜¯åŠ¨æ€æ—¶ï¼Œæ¨èé‡‡ç”¨ä»¥ä¸‹æ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-comment">// æ–¹æ¡ˆ1ï¼šç»Ÿä¸€ä½¿ç”¨SDAnimatedImageViewï¼ˆæ¨èï¼‰</span>
<span class="hljs-comment">// ä¼˜ç‚¹ï¼šè‡ªåŠ¨é€‚åº”æ‰€æœ‰å›¾ç‰‡ç±»å‹ï¼Œä»£ç ç®€æ´</span>
<span class="hljs-comment">// ç¼ºç‚¹ï¼šå¯¹é™æ€å›¾æœ‰è½»å¾®æ€§èƒ½å¼€é”€</span>
SDAnimatedImageView *imageView = [SDAnimatedImageView new];
[imageView sd_setImageWithURL:imageURL];

<span class="hljs-comment">// æ–¹æ¡ˆ2ï¼šæ ¹æ®URLæˆ–å“åº”å¤´åŠ¨æ€é€‰æ‹©</span>
<span class="hljs-comment">// åœ¨çŸ¥é“å›¾ç‰‡ç±»å‹çš„æƒ…å†µä¸‹ä¼˜åŒ–æ€§èƒ½</span>
<span class="hljs-keyword">if</span> ([url.pathExtension isEqualToString:@&amp;#<span class="hljs-number">34</span>;gif&amp;#<span class="hljs-number">34</span>;] || 
    [url.absoluteString containsString:@&amp;#<span class="hljs-number">34</span>;animated&amp;#<span class="hljs-number">34</span>;]) {
    <span class="hljs-comment">// ä½¿ç”¨SDAnimatedImageView</span>
    SDAnimatedImageView *animatedImageView = [SDAnimatedImageView new];
    [animatedImageView sd_setImageWithURL:url];
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// ä½¿ç”¨æ™®é€šUIImageView</span>
    <span class="hljs-built_in">UIImageView</span> *staticImageView = [<span class="hljs-built_in">UIImageView</span> new];
    [staticImageView sd_setImageWithURL:url];
}

<span class="hljs-comment">// æ–¹æ¡ˆ3ï¼šä½¿ç”¨SDWebImageçš„è‡ªåŠ¨æ£€æµ‹åŠŸèƒ½</span>
<span class="hljs-comment">// SDWebImage 5.0+ å¯ä»¥è‡ªåŠ¨æ£€æµ‹å›¾ç‰‡ç±»å‹å¹¶é€‰æ‹©åˆé€‚çš„è§†å›¾</span>
<span class="hljs-built_in">UIImageView</span> *imageView = [<span class="hljs-built_in">UIImageView</span> new];
SDWebImageOptions options = SDWebImageAutoHandleAnimatedImage;
[imageView sd_setImageWithURL:url options:options];
</code></pre>
<p><strong>æ€§èƒ½å¯¹æ¯”ä¸å»ºè®®</strong></p>








































<table><thead><tr><th>åœºæ™¯</th><th>æ¨èè§†å›¾</th><th>å†…å­˜å ç”¨</th><th>CPUä½¿ç”¨</th><th>å…¼å®¹æ€§</th></tr></thead><tbody><tr><td>å·²çŸ¥é™æ€å›¾</td><td>UIImageView</td><td>ä½</td><td>ä½</td><td>æœ€ä½³</td></tr><tr><td>å·²çŸ¥åŠ¨æ€å›¾</td><td>SDAnimatedImageView</td><td>ä¸­ç­‰</td><td>ä¸­ç­‰</td><td>æœ€ä½³</td></tr><tr><td>æœªçŸ¥ç±»å‹</td><td>SDAnimatedImageView</td><td>ä¸­ç­‰</td><td>ä¸­ç­‰</td><td>æœ€ä½³</td></tr><tr><td>å¤§é‡é™æ€å›¾åˆ—è¡¨</td><td>UIImageView</td><td>ä½</td><td>ä½</td><td>æœ€ä½³</td></tr></tbody></table>
<p><strong>æœ€ä½³å®è·µå»ºè®®</strong></p>
<ol>
<li>å¯¹äºå›¾ç‰‡ç¤¾äº¤åº”ç”¨ï¼ˆå¦‚Instagramï¼‰ï¼Œç”¨æˆ·ä¸Šä¼ å†…å®¹ç±»å‹æœªçŸ¥ï¼Œå»ºè®®ç»Ÿä¸€ä½¿ç”¨<code>SDAnimatedImageView</code></li>
<li>å¯¹äºç”µå•†åº”ç”¨ï¼Œå•†å“ä¸»å›¾å¤§å¤šæ˜¯é™æ€å›¾ï¼Œä½¿ç”¨<code>UIImageView</code>å³å¯</li>
<li>åœ¨æ€§èƒ½æ•æ„Ÿçš„åœºæ™¯ï¼ˆå¦‚å¤§è§„æ¨¡å›¾ç‰‡åˆ—è¡¨ï¼‰ï¼Œå¯ä»¥è€ƒè™‘å…ˆè·å–å›¾ç‰‡å…ƒä¿¡æ¯å†å†³å®šè§†å›¾ç±»å‹</li>
</ol>
<h3 data-id="heading-7">å…«ã€é«˜çº§åŠŸèƒ½ä¸å®šåˆ¶æ‰©å±•</h3>
<p><strong>è‡ªå®šä¹‰ç¼“å­˜ç­–ç•¥</strong></p>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-comment">// åˆ›å»ºè‡ªå®šä¹‰ç¼“å­˜é…ç½®</span>
SDImageCacheConfig *config = [SDImageCacheConfig defaultCacheConfig];
config.maxDiskAge = <span class="hljs-number">7</span> * <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span>; <span class="hljs-comment">// ä¸€å‘¨</span>
config.maxDiskSize = <span class="hljs-number">200</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>; <span class="hljs-comment">// 200MB</span>
config.maxMemoryCost = <span class="hljs-number">100</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>; <span class="hljs-comment">// 100MBå†…å­˜ç¼“å­˜</span>
config.diskCacheExpireType = SDImageCacheConfigExpireTypeAccessDate; <span class="hljs-comment">// æŒ‰è®¿é—®æ—¶é—´è¿‡æœŸ</span>

<span class="hljs-comment">// åˆ›å»ºè‡ªå®šä¹‰ç¼“å­˜å®ä¾‹</span>
SDImageCache *customCache = [[SDImageCache alloc] initWithNamespace:@&amp;#<span class="hljs-number">34</span>;Custom&amp;#<span class="hljs-number">34</span>; diskCacheDirectory:customPath config:config];
</code></pre>
<p><strong>å›¾ç‰‡è½¬æ¢å™¨</strong></p>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-comment">// åˆ›å»ºåœ†è§’å›¾ç‰‡è½¬æ¢å™¨</span>
SDImageRoundCornerTransformer *transformer = [SDImageRoundCornerTransformer transformerWithRadius:<span class="hljs-number">10</span> corners:<span class="hljs-built_in">UIRectCornerAllCorners</span> borderWidth:<span class="hljs-number">1</span> borderColor:[<span class="hljs-built_in">UIColor</span> whiteColor]];

<span class="hljs-comment">// åŠ è½½æ—¶åº”ç”¨è½¬æ¢å™¨</span>
[imageView sd_setImageWithURL:url placeholderImage:<span class="hljs-literal">nil</span> options:<span class="hljs-number">0</span> context:@{SDWebImageContextImageTransformer: transformer}];
</code></pre>
<h3 data-id="heading-8">ä¹ã€æ€§èƒ½ç›‘æ§ä¸è°ƒè¯•</h3>
<p><strong>å†…å­˜ä½¿ç”¨ç›‘æ§</strong></p>
<pre><code class="hljs language-objc" lang="objc"><span class="hljs-comment">// è·å–ç¼“å­˜ç»Ÿè®¡ä¿¡æ¯</span>
<span class="hljs-built_in">NSUInteger</span> memCost = [[SDImageCache sharedImageCache] totalMemoryCost];
<span class="hljs-built_in">NSUInteger</span> diskCount = [[SDImageCache sharedImageCache] totalDiskCount];
<span class="hljs-built_in">NSUInteger</span> diskSize = [[SDImageCache sharedImageCache] totalDiskSize];

<span class="hljs-comment">// ç›‘æ§å›¾ç‰‡åŠ è½½æ€§èƒ½</span>
[SDWebImageManager.sharedManager setCacheKeyFilter:^<span class="hljs-built_in">NSString</span> * _Nullable(<span class="hljs-built_in">NSURL</span> * _Nullable url) {
    <span class="hljs-comment">// è®°å½•åŠ è½½æ—¶é—´</span>
    <span class="hljs-built_in">CFTimeInterval</span> startTime = <span class="hljs-built_in">CACurrentMediaTime</span>();
    <span class="hljs-keyword">return</span> [url absoluteString];
}];
</code></pre>
<h3 data-id="heading-9">åã€æ€»ç»“ä¸å±•æœ›</h3>
<p>SDWebImageé€šè¿‡å…¶ç²¾è‰¯çš„æ¶æ„è®¾è®¡ï¼Œåœ¨å›¾ç‰‡åŠ è½½çš„å„ä¸ªå…³é”®ç¯èŠ‚éƒ½åšäº†æ·±åº¦ä¼˜åŒ–ã€‚ä»åå°è§£ç åˆ°æ™ºèƒ½ç¼“å­˜ï¼Œä»åŠ¨æ€å›¾æ”¯æŒåˆ°å¯è§æ€§è§¦å‘åŠ è½½ï¼Œæ¯ä¸€ä¸ªè®¾è®¡å†³ç­–éƒ½ä½“ç°äº†å¯¹æ€§èƒ½ä¸ç”¨æˆ·ä½“éªŒçš„æè‡´è¿½æ±‚ã€‚</p>
<p>éšç€iOSå¼€å‘æŠ€æœ¯çš„æ¼”è¿›ï¼ŒSDWebImageä¹Ÿåœ¨ä¸æ–­å‘å±•ã€‚æœªæ¥ï¼Œæˆ‘ä»¬æœŸå¾…çœ‹åˆ°ï¼š</p>
<ol>
<li>å¯¹Swift Concurrencyçš„æ›´å¥½æ”¯æŒ</li>
<li>ä¸SwiftUIçš„æ›´æ·±åº¦é›†æˆ</li>
<li>å¯¹æ–°å‹å›¾ç‰‡æ ¼å¼çš„æ›´å¿«é€‚é…</li>
<li>æ›´æ™ºèƒ½çš„ç¼“å­˜é¢„å–å’Œæ·˜æ±°ç®—æ³•</li>
</ol>
<p>æ— è®ºä½ æ˜¯åˆšåˆšæ¥è§¦SDWebImageçš„æ–°æ‰‹ï¼Œè¿˜æ˜¯å¸Œæœ›æ·±å…¥ä¼˜åŒ–å›¾ç‰‡åŠ è½½æ€§èƒ½çš„èµ„æ·±å¼€å‘è€…ï¼Œç†è§£SDWebImageçš„æ ¸å¿ƒåŸç†éƒ½å°†å¸®åŠ©ä½ æ„å»ºæ›´æµç•…ã€æ›´é«˜æ•ˆçš„iOSåº”ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ¨¡å‹é‡åŒ–éƒ¨ç½²ç»ˆææŒ‡å—:è®©700äº¿å‚æ•°çš„AIè·‘è¿›ä½ çš„æ˜¾å¡]]></title>    <link>https://juejin.cn/post/7582073642868555791</link>    <guid>https://juejin.cn/post/7582073642868555791</guid>    <pubDate>2025-12-10T15:59:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582073642868555791" data-draft-id="7582073642868539407" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ¨¡å‹é‡åŒ–éƒ¨ç½²ç»ˆææŒ‡å—:è®©700äº¿å‚æ•°çš„AIè·‘è¿›ä½ çš„æ˜¾å¡ "/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-10T15:59:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å´ä½³æµ©"/> <meta itemprop="url" content="https://juejin.cn/user/2696441245481975"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ¨¡å‹é‡åŒ–éƒ¨ç½²ç»ˆææŒ‡å—:è®©700äº¿å‚æ•°çš„AIè·‘è¿›ä½ çš„æ˜¾å¡ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2696441245481975/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å´ä½³æµ©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T15:59:55.000Z" title="Wed Dec 10 2025 15:59:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{font-family:-apple-system,system-ui,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial;color:#00325e}.markdown-body ::selection{background-color:#00325e;color:#fff}.markdown-body blockquote{padding:10px 20px;background-color:#fffaf0;box-shadow:0 3px 10px 0 rgba(255,172,194,.24);border:1px solid #f3ca8e;transition:all .2s;margin:1em 0;border-radius:5px}.markdown-body blockquote p{font-size:14px;line-height:25px;color:#795548}.markdown-body blockquote p:last-child{margin:0}.markdown-body blockquote:hover{border-color:#ff9800;background-color:#fff8e0;box-shadow:0 6px 10px -5px rgba(225,173,98,.3803921569)}.markdown-body blockquote code{color:#ff502c}.markdown-body pre{border:1px solid #8cc0f3;box-shadow:0 3px 10px 0 rgba(255,198,198,.28);border-radius:5px;transition:all .2s;overflow-x:auto;white-space:pre-wrap}.markdown-body pre:hover{border-color:#6d9dce}.markdown-body pre&gt;code{padding:10px 20px;color:#00325e;background:#f0f8ff;font-size:12px;line-height:1.6;display:block}.markdown-body code{background:#f6fbff;color:#0b5393;padding:2px 4px;border-radius:4px;font-size:12px}.markdown-body p{font-size:14px;line-height:28px;text-align:justify;margin-bottom:17px;color:#595959}.markdown-body a{color:#00325e;text-decoration:none}.markdown-body a:after{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAQdJREFUKFNt0DtLA0EUBeBzZle0Eks7rcUfEfBRCha7NorYa6NmVJzgyi4smUgKtdZGCJktLMVH4Y8QeztLWyE7VyLEuNFbXj4Oh0P8c8mZm+uJrEN4BJFTeP/MUVe3bnocfALwkOlo1zS7iZAzf6Cx7oXgbaqjxiDEWCcVaGyxQ8pSWo9XhqhoQ/xUFbaKjhe5V+CmR7mnSplEEF6GSmJ+F/d0KHvbCIIJCLc85U6BC5mONgbJNM3uFag++sX7z8O8MzsWBucifMx0dDGE1kmm458KDVukAlnNdDz/exEeW3dNkbfsYC0xtmgDWP6ELLZ0/F6BJu/UoFQN5AkoeUjeJPvx6+i+X5Sjah4tA6gYAAAAAElFTkSuQmCC);margin-left:2px}.markdown-body a:hover{box-shadow:0 1px}.markdown-body table{max-width:100%;border-collapse:collapse;border-spacing:0;box-shadow:0 3px 10px 0 rgba(255,238,172,.24);transition:all .2s}.markdown-body table:hover{box-shadow:0 3px 10px 0 rgba(185,169,103,.24)}.markdown-body table tr th{border:1px solid #8cc0f3;background-color:#f0f8ff;padding:12px 15px}.markdown-body table tr td{border:1px solid rgba(243,202,142,.4);padding:12px 15px}.markdown-body table tbody tr{transition:all .2s}.markdown-body table tbody tr:hover td{border-color:#f3ca8e;background-color:#fff8e0;z-index:1}.markdown-body img{max-width:100%}.markdown-body h1{font-size:20px;margin-top:30px;margin-bottom:10px;padding-left:30px;position:relative}.markdown-body h1&gt;code{font-size:20px}.markdown-body h1:before{content:"ğŸº";display:block;font-size:18px;width:18px;height:18px;left:0;position:absolute}.markdown-body h2{font-size:18px;margin-top:30px;margin-bottom:10px;padding-left:28px;position:relative}.markdown-body h2&gt;code{font-size:18px}.markdown-body h2:before{content:"ğŸ»";display:block;font-size:16px;width:16px;height:16px;left:0;position:absolute}.markdown-body h3{font-size:16px;margin-top:30px;margin-bottom:10px;padding-left:26px;position:relative}.markdown-body h3&gt;code{font-size:16px}.markdown-body h3:before{content:"ğŸ¥‚";display:block;font-size:14px;width:14px;height:14px;left:0;position:absolute}.markdown-body h4{font-size:14px;margin-top:30px;margin-bottom:10px;padding-left:24px;position:relative}.markdown-body h4&gt;code{font-size:14px}.markdown-body h4:before{content:"ğŸ¥ƒ";display:block;font-size:12px;width:12px;height:12px;left:0;position:absolute}.markdown-body h5{font-size:12px;margin-top:30px;margin-bottom:10px}.markdown-body h5&gt;code{font-size:12px}.markdown-body h6{font-size:10px;margin-top:30px;margin-bottom:10px}.markdown-body h6&gt;code{font-size:10px}.markdown-body h1,.markdown-body h2{color:#ff502c}.markdown-body hr{height:4px;border:none;margin-top:32px;margin-bottom:32px;background-size:4px 1px;background-image:linear-gradient(270deg,#6d9dce,#8cc0f3 25%,transparent 50%)}.markdown-body hr:nth-child(2n){background-image:linear-gradient(270deg,#ff9800,#fff8e0 25%,transparent 50%)}.markdown-body ul{padding-inline-start:20px}.markdown-body ul li{list-style-type:"ğŸ”¸"}.markdown-body ul li li{list-style-type:"â—»ï¸"}.markdown-body ul li li li{list-style-type:"â–«ï¸"}.markdown-body ol{padding-inline-start:20px}.markdown-body ol ::marker{color:#ff9800}.markdown-body ol,.markdown-body ul{line-height:2em}.markdown-body li{padding-inline-start:1ch}.markdown-body li.task-list-item{list-style:none;padding-inline-start:0}.markdown-body li input{padding-right:2px}.markdown-body li input[type=checkbox i]{appearance:none}.markdown-body li input:before{content:"ğŸŸ©";display:block;width:13px;height:13px}.markdown-body li input:checked:before{content:"âœ…"}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å¤§æ¨¡å‹é‡åŒ–éƒ¨ç½²ç»ˆææŒ‡å—:è®©700äº¿å‚æ•°çš„AIè·‘è¿›ä½ çš„æ˜¾å¡</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e53064d7b28447568f9ce11ce5ee2bec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC05L2z5rWp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765987195&amp;x-signature=95wlmXDLbrjvKRrRE1mJMKj01BY%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p><strong>æ ¸å¿ƒé—®é¢˜</strong>:ä¸€ä¸ª70B(700äº¿å‚æ•°)çš„å¤§æ¨¡å‹åŸæœ¬éœ€è¦140GBæ˜¾å­˜,æ€ä¹ˆå¡è¿›24GBçš„æ˜¾å¡? <strong>ç­”æ¡ˆ</strong>:é‡åŒ– â€”â€” AIç•Œçš„"å‹ç¼©åŒ…æŠ€æœ¯"</p>
</blockquote>
<p>æƒ³è±¡ä¸€ä¸‹,ä½ æœ‰ä¸€æœ¬ç²¾ç¾çš„4Kç”»å†Œ,ä½†æ‰‹æœºå­˜å‚¨ä¸å¤Ÿã€‚ä½ æœ‰ä¸‰ä¸ªé€‰æ‹©:</p>
<ul>
<li>è½¬æˆJPG(æœ‰æŸä½†èƒ½ç”¨)â†’ è¿™å°±æ˜¯<strong>GGUF</strong></li>
<li>åªä¿ç•™å…³é”®è‰²å—(æ™ºèƒ½å‹ç¼©)â†’ è¿™å°±æ˜¯<strong>AWQ</strong></li>
<li>ç”¨ä¸“ä¸šå·¥å…·æ‰¹é‡è½¬æ¢(é€šç”¨æ–¹æ¡ˆ)â†’ è¿™å°±æ˜¯<strong>GPTQ</strong></li>
</ul>
<hr/>
<h3 data-id="heading-1">ç¬¬ä¸€éƒ¨åˆ†:é‡åŒ–çš„ä¸‰å¤§é—¨æ´¾(å¿…é¡»ææ‡‚çš„åˆ†ç±»é€»è¾‘)</h3>
<pre><code class="hljs">é‡åŒ–åˆ†ç±»
é™æ€é‡åŒ–
GGUF/GPTQ/AWQ
åŠ¨æ€é‡åŒ–
BitsAndBytes
æ··åˆç²¾åº¦
FP16/BF16/FP8
</code></pre>
<h4 data-id="heading-2">é—¨æ´¾A:é¢„åˆ¶èœæ´¾ â€”â€” æ¨¡å‹æ–‡ä»¶çº§é‡åŒ–</h4>
<p><strong>æ ¸å¿ƒç†å¿µ</strong>:"å‡ºå‚å‰å°±å‹ç¼©å¥½,æ‹¿æ¥å³ç”¨"</p>
<p>å°±åƒä¹°é€Ÿå†»æ°´é¥º,å‚å®¶å·²ç»å¸®ä½ åŒ…å¥½ã€å†»å¥½,å›å®¶ç›´æ¥ä¸‹é”…ã€‚</p>
<p><strong>ä»£è¡¨é€‰æ‰‹</strong>:</p>
<ul>
<li><strong>GGUF</strong> â†’ å…¨å¹³å°é€šåƒçš„"ä¸‡é‡‘æ²¹"</li>
<li><strong>GPTQ</strong> â†’ GPUè€å¸æœºçš„æœ€çˆ±</li>
<li><strong>AWQ</strong> â†’ æ¿€æ´»æ„ŸçŸ¥çš„"ç²¾å‡†ç‹™å‡»æ‰‹"</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>: âœ… ç”Ÿäº§ç¯å¢ƒéƒ¨ç½² âœ… æ˜¾å­˜åƒç´§ âœ… è¿½æ±‚æè‡´æ€§èƒ½</p>
<hr/>
<h4 data-id="heading-3">âš¡ é—¨æ´¾B:ç°ç‚’ç°å–æ´¾ â€”â€” åŠ¨æ€é‡åŒ–</h4>
<p><strong>æ ¸å¿ƒç†å¿µ</strong>:"åŸææ–™æ˜¯å®Œæ•´çš„,åŠ è½½æ—¶ç°åœºå‹ç¼©"</p>
<p>åƒå»é¤å…ç‚¹èœ,å¨å¸ˆæ‹¿åˆ°æ–°é²œé£Ÿæåç°åœºå¤„ç†ã€‚</p>
<p><strong>ä»£è¡¨é€‰æ‰‹</strong>:</p>
<ul>
<li><strong>BitsAndBytes</strong> (4bit/8bit)</li>
<li><strong>Transformersé‡åŒ–é…ç½®</strong></li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>: âœ… å¿«é€Ÿå®éªŒ âœ… è°ƒè¯•æ¨¡å‹ âœ… ä¸æƒ³æŠ˜è…¾è½¬æ¢</p>
<p><strong>ä¸‰è¡Œä»£ç æå®š</strong>:</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">model</span> = AutoModelForCausalLM.from_pretrained(
 Â  Â &amp;<span class="hljs-comment">#34;Qwen/Qwen-7B&amp;#34;,</span>
 Â  Â <span class="hljs-attr">load_in_4bit</span>=<span class="hljs-literal">True</span> Â <span class="hljs-comment"># å°±è¿™ä¹ˆç®€å•!</span>
)
</code></pre>
<hr/>
<h4 data-id="heading-4">ğŸ’ é—¨æ´¾C:ç²¾åº¦æ´¾ â€”â€” ç¡¬ä»¶åŸç”Ÿå‹ç¼©</h4>
<p><strong>æ ¸å¿ƒç†å¿µ</strong>:"ä¸æ˜¯çœŸé‡åŒ–,åªæ˜¯æ¢äº†ä¸ª'å®¹å™¨'"</p>
<p>åƒæŠŠæ°´ä»ç»ç’ƒç“¶å€’è¿›å¡‘æ–™ç“¶,å®¹é‡ä¸å˜ä½†æ›´è½»ä¾¿ã€‚</p>
<p><strong>ä»£è¡¨é€‰æ‰‹</strong>:</p>
<ul>
<li><strong>FP16/BF16</strong>(åŠç²¾åº¦)</li>
<li><strong>TensorRT FP8</strong>(ä¼ä¸šçº§)</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>: âœ… åœŸè±ªæ˜¾å¡(A100/H100) âœ… è¿½æ±‚æè‡´ç²¾åº¦ âœ… ä¼ä¸šçº§éƒ¨ç½²</p>
<hr/>
<h3 data-id="heading-5">ç¬¬äºŒéƒ¨åˆ†:ä¸‰å¤§å¤©ç‹è¯¦è§£(ä½ ç»•ä¸å¼€çš„ä¸»æµæ–¹æ¡ˆ)</h3>
<h4 data-id="heading-6">GGUF:å¹³æ°‘ä¹‹ç‹,èƒ½åœ¨ä»»ä½•è®¾å¤‡ä¸Šè·‘AI</h4>
<p><strong>ä¸ºä»€ä¹ˆå®ƒè¿™ä¹ˆç«?</strong></p>
<p>æƒ³è±¡ä½ æœ‰ä¸ªæ¸¸æˆ,èƒ½åœ¨Switchã€PS5ã€ç”µè„‘ä¸Šæ— ç¼è¿è¡Œ â€”â€” GGUFå°±æ˜¯LLMç•Œçš„"è·¨å¹³å°ç¥å™¨"ã€‚</p>
<p><strong>ç¡¬æ ¸ä¼˜åŠ¿</strong>:</p>
<ul>
<li>âœ… CPUè·‘AI?å¯ä»¥! (è™½ç„¶æ…¢ä½†èƒ½è·‘)</li>
<li>âœ… Mac MèŠ¯ç‰‡?å®Œç¾é€‚é…!</li>
<li>âœ… GTX 1060è€æ˜¾å¡?ç…§æ ·èƒ½ç”¨!</li>
<li>âœ… æ–‡ä»¶ä½“ç§¯æœ€å°(7Bæ¨¡å‹åªéœ€3-4GB)</li>
</ul>
<p><strong>é€‚é…è¡¨</strong>(è¶Šå¤šæ˜Ÿè¶Šå¥½):</p>






























<table><thead><tr><th>è®¾å¤‡ç±»å‹</th><th>æ¨èåº¦</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>CPU(Intel/AMD)</td><td>â­â­â­â­â­</td><td>é€Ÿåº¦æ…¢ä½†ç¨³å®š</td></tr><tr><td>Mac M1/M2/M3</td><td>â­â­â­â­â­</td><td>é‡‘å±åŠ é€Ÿ,ä½“éªŒä¸æ»‘</td></tr><tr><td>è€æ˜¾å¡(GTXç³»åˆ—)</td><td>â­â­â­â­</td><td>é‡åŒ–ç‰ˆæ•‘æ˜Ÿ</td></tr><tr><td>RTX 30/40ç³»åˆ—</td><td>â­â­â­</td><td>èƒ½ç”¨ä½†ä¸æ˜¯æœ€ä¼˜è§£</td></tr></tbody></table>
<p><strong>çœŸå®æ¡ˆä¾‹</strong>:</p>
<blockquote>
<p>"æˆ‘ç”¨MacBook M2è·‘33Bæ¨¡å‹(330äº¿å‚æ•°,Q4é‡åŒ–),è¾“å‡ºé€Ÿåº¦5 tokens/s,å†™ä»£ç å¤Ÿç”¨äº†!" â€”â€” æŸç‹¬ç«‹å¼€å‘è€…</p>
</blockquote>
<hr/>
<h4 data-id="heading-7">GPTQ:æœ€æˆç†Ÿçš„GPUé‡åŒ–æ–¹æ¡ˆ</h4>
<p><strong>ä¸ºä»€ä¹ˆé€‰å®ƒ?</strong></p>
<p>å¦‚æœGGUFæ˜¯"ç‘å£«å†›åˆ€",GPTQå°±æ˜¯"ä¸“ä¸šçº§å·¥å…·ç®±" â€”â€” ä¸“ä¸ºNVIDIAæ˜¾å¡ä¼˜åŒ–ã€‚</p>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>:</p>
<ul>
<li>âœ… ç¤¾åŒºæ”¯æŒæœ€å¹¿(90%å¼€æºæ¨¡å‹éƒ½æœ‰GPTQç‰ˆ)</li>
<li>âœ… å…¼å®¹æ€§æœ€å¼º(ä»GTX 1080åˆ°RTX 4090é€šåƒ)</li>
<li>âœ… æ–‡æ¡£å®Œå–„(é‡åˆ°é—®é¢˜Googleä¸€ä¸‹å°±æœ‰ç­”æ¡ˆ)</li>
</ul>
<p><strong>ç¡¬ä»¶é€‚é…</strong>:</p>

























<table><thead><tr><th>GPUç³»åˆ—</th><th>æ¨èåº¦</th><th>å®æˆ˜è¡¨ç°</th></tr></thead><tbody><tr><td>RTX 20/30/40/50</td><td>â­â­â­â­â­</td><td>å®Œç¾è¿è¡Œ</td></tr><tr><td>T4(äº‘æœåŠ¡å™¨å¸¸è§)</td><td>â­â­â­â­â­</td><td>æ€§ä»·æ¯”ä¹‹ç‹</td></tr><tr><td>A10/A100</td><td>â­â­â­â­â­</td><td>ä¸“ä¸šçº§é€‰æ‹©</td></tr></tbody></table>
<p><strong>æ–‡ä»¶ç»“æ„</strong>:</p>
<pre><code class="hljs language-bash" lang="bash">model-GPTQ/
â”œâ”€â”€ model.safetensors Â  Â   <span class="hljs-comment"># é‡åŒ–åçš„æƒé‡</span>
â”œâ”€â”€ quantize_config.json Â  <span class="hljs-comment"># é‡åŒ–é…ç½®</span>
â””â”€â”€ config.json Â  Â  Â  Â  Â   <span class="hljs-comment"># æ¨¡å‹é…ç½®</span>
</code></pre>
<p><strong>å°ç¼ºç‚¹</strong>:</p>
<ul>
<li>âŒ æ¨ç†é€Ÿåº¦æ¯”AWQæ…¢10-15%</li>
<li>âŒ å¯¹æ¿€æ´»å€¼ä¸å¤Ÿ"æ•æ„Ÿ"</li>
</ul>
<hr/>
<h4 data-id="heading-8">AWQ:æ¿€æ´»æ„ŸçŸ¥çš„"ç²¾å‡†ç‹™å‡»æ‰‹"</h4>
<p><strong>ä¸ºä»€ä¹ˆå®ƒæœ€çœæ˜¾å­˜?</strong></p>
<p>æƒ³è±¡ä½ è¦æ¬å®¶,å¤§éƒ¨åˆ†ä¸œè¥¿éƒ½èƒ½å‹ç¼©,ä½†æœ‰äº›"æ˜“ç¢å“"å¿…é¡»åŸæ ·ä¿æŠ¤ã€‚AWQå°±æ˜¯è¿™æ · â€”â€” å®ƒçŸ¥é“æ¨¡å‹å“ªäº›æƒé‡é‡è¦,é‡ç‚¹ä¿æŠ¤ã€‚</p>
<p><strong>é»‘ç§‘æŠ€</strong>:</p>
<ul>
<li><strong>æ¿€æ´»æ„ŸçŸ¥</strong>:åˆ†ææ¨ç†æ—¶å“ªäº›ç¥ç»å…ƒæœ€æ´»è·ƒ</li>
<li><strong>åˆ†å±‚é‡åŒ–</strong>:é‡è¦å±‚ä¿ç•™é«˜ç²¾åº¦,æ¬¡è¦å±‚æ¿€è¿›å‹ç¼©</li>
<li><strong>ç»“æœ</strong>:INT4ç²¾åº¦â‰ˆINT8æ•ˆæœ,ä½†æ˜¾å­˜çœ50%!</li>
</ul>
<p><strong>å®æˆ˜æ•°æ®</strong>(7Bæ¨¡å‹,å³70äº¿å‚æ•°):</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">FP16: Â  14GBæ˜¾å­˜</span>
<span class="hljs-section">GPTQ: Â   6GBæ˜¾å­˜</span>
<span class="hljs-section">AWQ: Â  Â  4GBæ˜¾å­˜ â† æœ€çœ!</span>
</code></pre>
<p><strong>ç¡¬ä»¶è¦æ±‚</strong>(ç•¥æŒ‘é£Ÿ):</p>

























<table><thead><tr><th>GPU</th><th>æ¨èåº¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>RTX 30/40/50</td><td>â­â­â­â­â­</td><td>æ¨ç†é€Ÿåº¦æœ€å¿«</td></tr><tr><td>A100/H100</td><td>â­â­â­â­â­</td><td>ä¼ä¸šçº§é¦–é€‰</td></tr><tr><td>T4</td><td>â­â­â­</td><td>èƒ½è·‘ä½†ä¸å¦‚GPTQå¿«</td></tr></tbody></table>
<p><strong>ä¸ºä»€ä¹ˆT4ä¸æ¨è?</strong> T4çš„TensorCoreæ˜¯7.5æ¶æ„(è¾ƒè€),AWQçš„INT4ä¼˜åŒ–åƒä¸æ»¡,åè€ŒGPTQçš„INT8æ›´é€‚åˆã€‚</p>
<hr/>
<h3 data-id="heading-9">ç¬¬ä¸‰éƒ¨åˆ†:å…¶ä»–é‡è¦é€‰æ‰‹</h3>
<h4 data-id="heading-10">TensorRT:å·¥ä¸šçº§çš„"F1èµ›è½¦"</h4>
<p><strong>å®šä½</strong>:ä¼ä¸šç”Ÿäº§ç¯å¢ƒçš„ç»ˆææ–¹æ¡ˆ</p>
<p><strong>ä¸ºä»€ä¹ˆå¿«?</strong></p>
<ul>
<li>ç®—å­èåˆ(æŠŠ10æ­¥æ“ä½œåˆæˆ1æ­¥)</li>
<li>å†…å­˜ä¼˜åŒ–(å‡å°‘CPU-GPUæ•°æ®æ¬è¿)</li>
<li>ç¡¬ä»¶ç›´é€š(ç›´æ¥è°ƒç”¨TensorCore)</li>
</ul>
<p><strong>é€Ÿåº¦å¯¹æ¯”</strong>(70Bæ¨¡å‹,å³700äº¿å‚æ•°æ¨ç†):</p>
<pre><code class="hljs language-bash" lang="bash">PyTorch FP16: Â  120ms/token
GPTQ: Â  Â  Â  Â  Â  80ms/token
TensorRT FP8: Â  35ms/token â† å¿«3å€!
</code></pre>
<p><strong>ä»£ä»·</strong>:</p>
<ul>
<li>âŒ éœ€è¦å¯¼å‡ºONNX</li>
<li>âŒ éœ€è¦æ ¡å‡†æ•°æ®é›†</li>
<li>âŒ è°ƒè¯•éš¾åº¦é«˜</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>: âœ… è§†é¢‘å¹³å°å®æ—¶å­—å¹• âœ… å®¢æœæœºå™¨äºº(ç§’çº§å“åº”) âœ… é‡‘èé£æ§(é«˜å¹¶å‘)</p>
<hr/>
<h4 data-id="heading-11">BitsAndBytes:æ‡’äººçš„ç¦éŸ³</h4>
<p><strong>ä¸€å¥è¯æ€»ç»“</strong>:"ä¸æƒ³è½¬æ¢æ¨¡å‹?é‚£å°±ç”¨æˆ‘!"</p>
<p><strong>ä½¿ç”¨ä½“éªŒ</strong>:</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ä¼ ç»Ÿæ–¹å¼:ä¸‹è½½â†’è½¬æ¢â†’åŠ è½½(30åˆ†é’Ÿèµ·æ­¥)</span>
<span class="hljs-comment"># BitsAndBytes:ç›´æ¥åŠ è½½(3åˆ†é’Ÿæå®š)</span>
â€‹
from transformers import AutoModelForCausalLM, BitsAndBytesConfig
â€‹
<span class="hljs-attr">model</span> = AutoModelForCausalLM.from_pretrained(
 Â  Â &amp;<span class="hljs-comment">#34;Qwen/Qwen-7B&amp;#34;,</span>
 Â  Â <span class="hljs-attr">quantization_config</span>=BitsAndBytesConfig(
 Â  Â  Â  Â <span class="hljs-attr">load_in_4bit</span>=<span class="hljs-literal">True</span>,
 Â  Â  Â  Â <span class="hljs-attr">bnb_4bit_compute_dtype</span>=torch.float16
 Â   )
)
<span class="hljs-comment"># å°±è¿™ä¹ˆç®€å•,å¼€ç®±å³ç”¨!</span>
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>: âœ… é›¶è½¬æ¢æˆæœ¬ âœ… TransformersåŸç”Ÿæ”¯æŒ âœ… é€‚åˆå¿«é€Ÿå®éªŒ</p>
<p><strong>ç¼ºç‚¹</strong>: âŒ æ€§èƒ½æ¯”é¢„é‡åŒ–æ–¹æ¡ˆæ…¢10-20% âŒ éœ€è¦è¾ƒæ–°æ˜¾å¡(&gt;=RTX 20ç³»åˆ—)</p>
<hr/>
<h4 data-id="heading-12">FP16/BF16:ç²¾åº¦å…šçš„åšå®ˆ</h4>
<p><strong>æ ¸å¿ƒè§‚å¿µ</strong>:"æˆ‘ä¸ç¼ºæ˜¾å­˜,åªè¦ç²¾åº¦!"</p>
<p><strong>å®æˆ˜åœºæ™¯</strong>:</p>
<ul>
<li>å­¦æœ¯ç ”ç©¶(éœ€è¦å¯å¤ç°ç»“æœ)</li>
<li>åŒ»ç–—AI(ç²¾åº¦è¦æ±‚æé«˜)</li>
<li>å¤§è§„æ¨¡å®éªŒ(A100é›†ç¾¤)</li>
</ul>
<p><strong>æ•°æ®å¯¹æ¯”</strong>:</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">FP32</span>(å…¨ç²¾åº¦):  <span class="hljs-number">100%</span>ç²¾åº¦, <span class="hljs-number">28</span>GBæ˜¾å­˜
<span class="hljs-built_in">FP16</span>(åŠç²¾åº¦):  <span class="hljs-number">99.9%</span>ç²¾åº¦, <span class="hljs-number">14</span>GBæ˜¾å­˜ â† æ€§ä»·æ¯”é«˜
<span class="hljs-built_in">INT8</span>(GPTQ): Â   <span class="hljs-number">98%</span>ç²¾åº¦, Â   <span class="hljs-number">7</span>GBæ˜¾å­˜
<span class="hljs-built_in">INT4</span>(AWQ): Â  Â  <span class="hljs-number">95%</span>ç²¾åº¦, Â   <span class="hljs-number">4</span>GBæ˜¾å­˜
</code></pre>
<hr/>
<h3 data-id="heading-13">ç¬¬å››éƒ¨åˆ†:ç»ˆæå¯¹æ¯”çŸ©é˜µ(é€‰å‹å¿…çœ‹!)</h3>
<h4 data-id="heading-14">å…¨æ–¹æ¡ˆå¯¹æ¯”è¡¨</h4>




































































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>ç²¾åº¦</th><th>æ˜¾å­˜</th><th>é€Ÿåº¦</th><th>å…¼å®¹æ€§</th><th>ç‰¹ç‚¹</th><th>æ¨èæŒ‡æ•°</th></tr></thead><tbody><tr><td><strong>GGUF</strong></td><td>ä¸­ç­‰</td><td>ğŸ†æœ€ä½</td><td>ä¸­ç­‰</td><td>ğŸ†å…¨å¹³å°</td><td>è·¨å¹³å°ä¹‹ç‹</td><td>â­â­â­â­</td></tr><tr><td><strong>GPTQ</strong></td><td>è‰¯å¥½</td><td>ä½</td><td>è‰¯å¥½</td><td>ğŸ†æœ€å¹¿</td><td>æœ€ç¨³å¦¥é€‰æ‹©</td><td>â­â­â­â­â­</td></tr><tr><td><strong>AWQ</strong></td><td>ğŸ†æœ€ä½³</td><td>ğŸ†æ›´ä½</td><td>å¿«</td><td>æ–°å¡ä¼˜</td><td>æ˜¾å­˜æ€æ‰‹</td><td>â­â­â­â­â­</td></tr><tr><td><strong>TensorRT</strong></td><td>æä½³</td><td>ä¸­ç­‰</td><td>ğŸ†æœ€å¿«</td><td>ä¼ä¸šçº§</td><td>ç”Ÿäº§ç¯å¢ƒ</td><td>â­â­â­â­</td></tr><tr><td><strong>BitsAndBytes</strong></td><td>ä¸­ç­‰</td><td>ä¸­ç­‰</td><td>è¾ƒå¿«</td><td>æ–°å¡</td><td>æ‡’äººç¦éŸ³</td><td>â­â­â­â­</td></tr><tr><td><strong>FP16</strong></td><td>ğŸ†åŸç”Ÿ</td><td>é«˜</td><td>å¿«</td><td>å¤§æ˜¾å¡</td><td>ç²¾åº¦å…š</td><td>â­â­â­</td></tr></tbody></table>
<p>å¾ˆå¤šäººä¼šé—®ï¼š</p>
<ul>
<li>vLLM æ”¯æŒè°ï¼Ÿï¼ˆGPTQ? AWQ? GGUF?ï¼‰</li>
<li>SGLang æ”¯æŒè°ï¼Ÿ</li>
<li>llama.cpp æ”¯æŒä»€ä¹ˆæ ¼å¼ï¼Ÿ</li>
</ul>





























































<table><thead><tr><th>æ¡†æ¶</th><th>GGUF</th><th>GPTQ</th><th>AWQ</th><th>BnB</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>llama.cpp</td><td>âœ…</td><td>âŒ</td><td>âŒ</td><td>âŒ</td><td>GGUFä¸“å±</td></tr><tr><td>Transformers</td><td>âŒ</td><td>âŒ</td><td>âŒ</td><td>âœ…</td><td>åŸç”Ÿæ”¯æŒ4/8bit</td></tr><tr><td>AutoGPTQ</td><td>âŒ</td><td>âœ…</td><td>âŒ</td><td>âŒ</td><td>GPTQä¸“ç”¨</td></tr><tr><td>AWQ repo</td><td>âŒ</td><td>âŒ</td><td>âœ…</td><td>âŒ</td><td>AWQä¸“ç”¨</td></tr><tr><td>vLLM</td><td>âŒ</td><td>éƒ¨åˆ†</td><td>éƒ¨åˆ†</td><td>âŒ</td><td>2024åé€æ­¥æ”¯æŒ INT4/INT8 æ’ä»¶</td></tr><tr><td>SGLang</td><td>âŒ</td><td>éƒ¨åˆ†</td><td>éƒ¨åˆ†</td><td>âŒ</td><td>æ€§èƒ½éå¸¸å¼º</td></tr></tbody></table>
<p>é‚£ä¹ˆæ˜¾å­˜æ€ä¹ˆé€‰ï¼Ÿ<a href="https://link.juejin.cn?target=https%3A%2F%2Fxiaobingan.github.io%2Fgpu-calculator%2F" target="_blank" title="https://xiaobingan.github.io/gpu-calculator/" ref="nofollow noopener noreferrer">å¯ä»¥çœ‹ä¸€ä¸‹æˆ‘å‰å‡ å¤©åšçš„æ˜¾å­˜è®¡ç®—å™¨</a>åšä¸ªç®€å•çš„å‚è€ƒ</p>





































<table><thead><tr><th>70B æ¨¡å‹æ ¼å¼</th><th>æ˜¾å­˜éœ€æ±‚</th></tr></thead><tbody><tr><td>FP16</td><td>~140GB</td></tr><tr><td>BF16</td><td>~140GB</td></tr><tr><td>FP8 (TensorRT)</td><td>~80GB</td></tr><tr><td>GPTQ (INT4)</td><td>~38GB</td></tr><tr><td>AWQ (INT4)</td><td>~32GB</td></tr><tr><td>GGUF Q4</td><td>~28GB</td></tr><tr><td>GGUF Q5</td><td>~36GB</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-15">ç¬¬äº”éƒ¨åˆ†:5ç§’é€‰å‹æŒ‡å—(æŒ‰ç¡¬ä»¶ç›´æ¥é€‰!)</h3>
<h4 data-id="heading-16">ğŸ¯ å¿«é€Ÿå†³ç­–æ ‘</h4>
<pre><code class="hljs language-scss" lang="scss">ä½ çš„è®¾å¤‡æ˜¯ä»€ä¹ˆ?
â”‚
â”œâ”€ ğŸ’» CPU / Mac / è€æ˜¾å¡
â”‚ Â  â””â”€ â†’ GGUF (å”¯ä¸€ä¹‹é€‰)
â”‚
â”œâ”€ ğŸ® RTX <span class="hljs-number">20</span>/<span class="hljs-number">30</span>/<span class="hljs-number">40</span>ç³»åˆ—æ˜¾å¡
â”‚ Â  â””â”€ â†’ GPTQ (æœ€ç¨³å¦¥)
â”‚
â”œâ”€ ğŸ’¡ æ˜¾å­˜ä¸å¤Ÿç”¨(æƒ³è·‘å¤§æ¨¡å‹)
â”‚ Â  â””â”€ â†’ AWQ (å‹ç¼©ç‡æœ€é«˜)
â”‚
â”œâ”€ âš¡ ä¼ä¸šçº§<span class="hljs-built_in">GPU</span>(A100/H100)
â”‚ Â  â””â”€ â†’ TensorRT FP8 (è¿½æ±‚æè‡´)
â”‚
â”œâ”€ ğŸ› ï¸ ä¸æƒ³æŠ˜è…¾(å¿«é€Ÿå®éªŒ)
â”‚ Â  â””â”€ â†’ BitsAndBytes (å¼€ç®±å³ç”¨)
â”‚
â””â”€ ğŸ§ª å¤§æ˜¾å¡ + è¦ç²¾åº¦
 Â   â””â”€ â†’ FP16/BF16 (æ¥è¿‘åŸç”Ÿ)
</code></pre>
<hr/>
<h4 data-id="heading-17">ğŸ’¡ å®æˆ˜åœºæ™¯åŒ¹é…</h4>
<p><strong>åœºæ™¯1:ä¸ªäººå­¦ä¹ /å¼€å‘</strong></p>
<ul>
<li>é¢„ç®—: æ²¡æœ‰æœ€å¥½çš„æ–¹æ¡ˆ,åªæœ‰æœ€é€‚åˆä½ ç¡¬ä»¶çš„æ–¹æ¡ˆã€‚å…ˆçœ‹æ˜¾å¡,å†é€‰é‡åŒ–!</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JS é«˜æ‰‹å¿…ä¼šï¼šæ‰‹å†™ new ä¸ instanceof]]></title>    <link>https://juejin.cn/post/7582016579858317346</link>    <guid>https://juejin.cn/post/7582016579858317346</guid>    <pubDate>2025-12-10T16:02:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582016579858317346" data-draft-id="7581670270844682280" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JS é«˜æ‰‹å¿…ä¼šï¼šæ‰‹å†™ new ä¸ instanceof"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2025-12-10T16:02:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è°è¨€è¥¿è¥¿é‡Œ"/> <meta itemprop="url" content="https://juejin.cn/user/332466136029851"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JS é«˜æ‰‹å¿…ä¼šï¼šæ‰‹å†™ new ä¸ instanceof
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/332466136029851/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è°è¨€è¥¿è¥¿é‡Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T16:02:15.000Z" title="Wed Dec 10 2025 16:02:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ‰‹å†™ instanceof</h2>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦äº†è§£ <code>instanceof</code>æ˜¯å•¥ï¼Ÿ</p>
<p>åœ¨å…¶ä»–é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ä¸­<code>instanceof</code>å¤§å¤šä¸º<strong>å®ä¾‹åˆ¤æ–­è¿ç®—ç¬¦</strong>ï¼Œå³æ£€æŸ¥å¯¹è±¡æ˜¯å¦æ˜¯æŸä¸ªæ„é€ å‡½æ•°çš„å®ä¾‹ã€‚</p>
<p>ä½†æ˜¯åœ¨ JS ä¸­ï¼Œ<code>instanceof</code>ä¸º<strong>åŸå‹å…³ç³»åˆ¤æ–­è¿ç®—ç¬¦</strong>ï¼Œç”¨äºæ£€æµ‹æ„é€ å‡½æ•°çš„<code>prototype</code>å±æ€§æ˜¯å¦å‡ºç°åœ¨æŸä¸ªå¯¹è±¡çš„åŸå‹é“¾ä¸Šã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// object instanceof Constructor</span>
A <span class="hljs-keyword">instanceof</span> B <span class="hljs-comment">// A çš„åŸå‹é“¾ä¸Šæ˜¯å¦æœ‰ B çš„åŸå‹ </span>
</code></pre>
<p>è€Œåœ¨å¤§å‹é¡¹ç›®ã€å¤šäººåä½œçš„æƒ…å†µä¸‹ï¼Œåœ¨æä¸æ‡‚å¯¹è±¡ä¸Šæœ‰å“ªäº›å±æ€§å’Œæ–¹æ³•ï¼Œé€šè¿‡<code>instanceof</code>æ¥æŸ¥æ‰¾ç»§æ‰¿å…³ç³»</p>
<h3 data-id="heading-1">åŸå‹é“¾å…³ç³»ï¼š</h3>
<ul>
<li><code>__proto__</code>: æŒ‡å‘åŸå‹å¯¹è±¡ï¼ˆä¸Šä¸€ä½çš„ .prototypeï¼‰ï¼Œç”¨äºå±æ€§æŸ¥æ‰¾</li>
<li><code>constructor</code>: æŒ‡å‘æ„é€ å‡½æ•°æœ¬èº«ï¼Œç”¨äºæ ‡è¯†å¯¹è±¡çš„åˆ›å»ºè€…</li>
<li><code>prototype</code>ï¼š å‡½æ•°çš„å±æ€§ï¼ŒæŒ‡å‘åŸå‹å¯¹è±¡ï¼ˆå†…ç½®æ„é€ å‡½æ•°çš„ prototype ä¸Šé€šå¸¸æœ‰é»˜è®¤æ–¹æ³•ï¼‰</li>
</ul>
<pre><code class="hljs language-js" lang="js">å­.<span class="hljs-property">__proto__</span> === çˆ¶.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>
çˆ¶.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> === çˆ¶
å­.<span class="hljs-property">__proto__</span>.<span class="hljs-property">constructor</span> === çˆ¶ï¼ˆé€šè¿‡åŸå‹é“¾è®¿é—®ï¼‰
</code></pre>
<p>ä¸¾ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> arr = [];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
    arr.<span class="hljs-property">__proto__</span>, <span class="hljs-comment">// Array.prototype</span>
    arr.<span class="hljs-property">__proto__</span>.<span class="hljs-property">__proto__</span>, <span class="hljs-comment">// Object.prototype</span>
    arr.<span class="hljs-property">__proto__</span>.<span class="hljs-property">__proto__</span>.<span class="hljs-property">__proto__</span> <span class="hljs-comment">// null</span>
)
</code></pre>
<p>é‚£ä¹ˆarrçš„åŸå‹é“¾å…³ç³»å°±æ˜¯ï¼š<code>arr -&gt; Array.prototype -&gt; Object.prototype -&gt; null</code></p>
<p>è€Œæˆ‘ä»¬è¦æ‰‹å†™<code>instanceof</code>ï¼Œä¹Ÿå°±æ˜¯åªéœ€è¦æ²¿ç€åŸå‹é“¾å»æŸ¥æ‰¾ï¼Œé‚£ä¹ˆç”¨ç®€å•çš„å¾ªç¯å³å¯ã€‚</p>
<h3 data-id="heading-2">æ‰‹å†™ä»£ç å¦‚ä¸‹</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// right æ˜¯å¦å‡ºç°åœ¨ left çš„åŸå‹é“¾ä¸Š</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">isInstanceOf</span>(<span class="hljs-params">left, right</span>) {
    <span class="hljs-keyword">let</span> proto = left.<span class="hljs-property">__proto__</span>;
    <span class="hljs-comment">// å¾ªç¯æŸ¥æ‰¾åŸå‹é“¾</span>
    <span class="hljs-keyword">while</span> (proto) {
        <span class="hljs-keyword">if</span> (proto === right.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        proto = proto.<span class="hljs-property">__proto__</span>; <span class="hljs-comment">// null ç»“æŸå¾ªç¯</span>
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
</code></pre>
<h2 data-id="heading-3">æ‰‹å†™ new</h2>
<p><code>new</code>å¯¹æˆ‘ä»¬æ¥è¯´å¹¶ä¸é™Œç”Ÿï¼Œä¹Ÿå°±æ˜¯<strong>å®ä¾‹è¿ç®—ç¬¦</strong></p>
<p>åœ¨ä¹‹å‰çš„æ–‡ç« æˆ‘ä¹Ÿæåˆ°è¿‡<code>new</code>çš„ä¼ªä»£ç ï¼Œè®©æˆ‘ä»¬å†æ¥å¤ä¹ ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä»ç©ºå¯¹è±¡å¼€å§‹</span>
<span class="hljs-keyword">let</span> obj = {}
<span class="hljs-comment">// this -&gt; åˆ›å»ºç©ºå¯¹è±¡ï¼Œè¿è¡Œæ„é€ å‡½æ•°</span>
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">call</span>(obj)
<span class="hljs-comment">// å°†ç©ºå¯¹è±¡çš„__proto__ æŒ‡å‘ æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡</span>
obj.<span class="hljs-property">__proto__</span> = <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>
<span class="hljs-comment">// è¿”å›æ–°å¯¹è±¡</span>
<span class="hljs-keyword">return</span> obj
</code></pre>
<h3 data-id="heading-4">å†™æ³•ä¸€ï¼šï¼ˆes6 æ–°å†™æ³•ï¼‰</h3>
<p>å‡å¦‚æˆ‘ä»¬è¦<code>new</code>ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œä½†æ˜¯ä¸çŸ¥é“æ„é€ å‡½æ•°ä¸Šçš„å‚æ•°æ•°é‡ï¼Œè€Œåœ¨es6ä¸­æœ‰ä¸€ä¸ªæ–°çš„è¿ç®—ç¬¦ï¼Œä¹Ÿå°±æ˜¯<code>...</code>è¿ç®—ç¬¦ï¼Œå®ƒçš„è¯¸å¤šåŠŸèƒ½å°±å¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚</p>
<h4 data-id="heading-5"><code>...</code>æ‰©å±•è¿ç®—ç¬¦</h4>
<p><code>...</code>æœ‰åŒé‡èº«ä»½ï¼Œåœ¨ä¸åŒæƒ…å†µä¸‹çš„ä½œç”¨ä¹Ÿä¸åŒ</p>
<ul>
<li>
<p><strong>å‡½æ•°è°ƒç”¨ / æ•°ç»„ / å¯¹è±¡å­—é¢é‡ä¸­</strong>ï¼š<code>...</code>ç§°ä¸ºæ‰©å±•è¿ç®—ç¬¦ï¼Œå°†å¯è¿­ä»£å¯¹è±¡â€œå±•å¼€â€ä¸ºç‹¬ç«‹å…ƒç´ </p>
</li>
<li>
<p><strong>å‡½æ•°å‚æ•° / è§£æ„èµ‹å€¼ä¸­</strong>: <code>...</code>ç§°ä¸ºå‰©ä½™å‚æ•°/å‰©ä½™å…ƒç´ ï¼Œå°†å¤šä¸ªå€¼â€œæ”¶é›†â€ä¸ºä¸€ä¸ªæ•°ç»„</p>
</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å±•å¼€æ•°ç»„</span>
<span class="hljs-keyword">const</span> arr1 = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]; 
<span class="hljs-keyword">const</span> arr2 = [...arr1, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]; <span class="hljs-comment">// [1, 2, 3, 4, 5] </span>

<span class="hljs-comment">// æ”¶é›†æ•°ç»„</span>
<span class="hljs-keyword">const</span> [first, ...rest] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(first); <span class="hljs-comment">// 1</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(rest);  <span class="hljs-comment">// [2, 3, 4]</span>
</code></pre>
<p>è€Œä¾æ®æˆ‘ä»¬çš„ä¼ªä»£ç å³å¯æ¨¡æ‹Ÿ <code>new</code>çš„åŠŸèƒ½</p>
<h3 data-id="heading-6">æ‰‹å†™ä»£ç å¦‚ä¸‹</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">objectFactory</span>(<span class="hljs-params">Construstor, ...args</span>) {
    <span class="hljs-comment">// åˆ›å»ºç©ºå¯¹è±¡</span>
    <span class="hljs-keyword">var</span> obj = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>(); 
    <span class="hljs-comment">// ç»‘å®š this å¹¶æ‰§è¡Œæ„é€ å‡½æ•°</span>
    <span class="hljs-title class_">Construstor</span>.<span class="hljs-title function_">apply</span>(obj, args); <span class="hljs-comment">// ä¸èƒ½ä½¿ç”¨callï¼Œå› ä¸ºapplyè°ƒç”¨æ•°ç»„</span>
    <span class="hljs-comment">// è®¾ç½®åŸå‹é“¾</span>
    obj.<span class="hljs-property">__proto__</span> = <span class="hljs-title class_">Construstor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>; 
    <span class="hljs-keyword">return</span> obj;
}

<span class="hljs-comment">// ä½¿ç”¨ï¼šå®Œå…¨ä¸éœ€è¦çŸ¥é“ Person éœ€è¦å‡ ä¸ªå‚æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name, age, city</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">city</span> = city;
}

<span class="hljs-keyword">const</span> p = <span class="hljs-title function_">objectFactory</span>(<span class="hljs-title class_">Person</span>, <span class="hljs-string">'Alice'</span>, <span class="hljs-number">25</span>, <span class="hljs-string">'Beijing'</span>); <span class="hljs-comment">// è‡ªåŠ¨é€‚é…</span>
</code></pre>
<hr/>
<h3 data-id="heading-7">å†™æ³•äºŒï¼šï¼ˆæ ¹æ®arguments es5ï¼‰</h3>
<p>å½“ç„¶ï¼Œåœ¨es6ä¹‹å‰æˆ‘ä»¬å¹¶æ²¡æœ‰<code>...</code>è¿ç®—ç¬¦ï¼Œé‚£ä¹ˆå¦‚ä½•æ‰‹å†™<code>new</code>å‘¢ï¼Ÿè¿™å°±ä¸å¾—ä¸æåˆ°<code>arguments</code>äº†ã€‚</p>
<h4 data-id="heading-8"><code>arguments</code> æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p><code>arguments</code> æ˜¯ JS ä¸­çš„ä¸€ä¸ª<strong>ç±»æ•°ç»„å¯¹è±¡</strong>ï¼Œå®ƒåœ¨æ‰€æœ‰éç®­å¤´å‡½æ•°å†…éƒ¨è‡ªåŠ¨å¯ç”¨ï¼Œç”¨äº<strong>è®¿é—®ä¼ é€’ç»™è¯¥å‡½æ•°çš„æ‰€æœ‰å®å‚</strong>ã€‚</p>
<blockquote>
<p>ç±»æ•°ç»„å¯¹è±¡ï¼š</p>
<ul>
<li>
<p>æ‹¥æœ‰ <code>length</code> å±æ€§å’Œè‹¥å¹²ç´¢å¼•å±æ€§ï¼Œä½†ä¸å…·å¤‡æ•°ç»„åŸå‹æ–¹æ³•ï¼ˆå¦‚ <code>.push()</code>, <code>.map()</code>, <code>.forEach()</code> ç­‰ï¼‰çš„å¯¹è±¡ï¼Œæ‰€ä»¥<strong>å…¶ä¸æ˜¯çœŸæ­£çš„æ•°ç»„</strong></p>
</li>
<li>
<p>åœ¨<strong>æ™®é€šå‡½æ•°</strong>ä¸­è‡ªåŠ¨ç»‘å®šã€‚</p>
</li>
<li>
<p><strong>ç®­å¤´å‡½æ•°å†…éƒ¨æ²¡æœ‰è‡ªå·±çš„ <code>arguments</code></strong>ï¼Œä½†æ˜¯ä¼šæ²¿ä½œç”¨åŸŸé“¾æŸ¥æ‰¾å¤–å±‚å‡½æ•°çš„ <code>arguments</code>ï¼Œå¦‚æœå¤–å±‚æœ‰å°±ç”¨å¤–å±‚çš„ã€‚</p>
</li>
</ul>
</blockquote>
<p>ä¸å¦¨æ¥çœ‹ä¸ªä¾‹å­ç†è§£ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">arguments</span>); <span class="hljs-comment">// ç±»æ•°ç»„å¯¹è±¡</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>); <span class="hljs-comment">// å®é™…ä¼ å…¥å‚æ•°ä¸ªæ•°</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>]);     <span class="hljs-comment">// ç¬¬ä¸€ä¸ªå‚æ•°</span>
}
<span class="hljs-title function_">greet</span>(<span class="hljs-string">'Alice'</span>, <span class="hljs-string">'Bob'</span>); <span class="hljs-comment">// è¾“å‡º: { '0': 'Alice', '1': 'Bob' }, length: 2, 'Alice'</span>
</code></pre>
<h4 data-id="heading-9">å¦‚ä½•å°† <code>arguments</code> è½¬ä¸ºçœŸæ•°ç»„ï¼Ÿ</h4>
<p>å› ä¸º <code>arguments</code> ä¸æ˜¯æ•°ç»„ï¼Œä¸èƒ½ç›´æ¥ç”¨æ•°ç»„æ–¹æ³•ã€‚ä½†æ˜¯å¯ä»¥å°†å…¶è½¬æ¢ä¸ºæ•°ç»„ï¼š</p>
<p><strong>æ–¹æ³• 1ï¼šæ‰©å±•è¿ç®—ç¬¦ï¼ˆES6+ï¼Œæœ€ç®€æ´ï¼‰</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> args = [...<span class="hljs-variable language_">arguments</span>];
  args.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x * <span class="hljs-number">2</span>); <span class="hljs-comment">// å¯ç”¨æ•°ç»„æ–¹æ³•</span>
}
</code></pre>
<p><strong>æ–¹æ³• 2ï¼š<code>Array.from()</code></strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> args = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">arguments</span>);
</code></pre>
<p><strong>æ–¹æ³• 3ï¼š<code>[].slice.call()</code></strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> args = <span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">slice</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">arguments</span>);
<span class="hljs-comment">// æˆ–ç®€å†™ï¼ˆæ›´æ¨èï¼‰</span>
<span class="hljs-keyword">const</span> args = [].<span class="hljs-property">slice</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">arguments</span>);
</code></pre>
<p><code>slice</code>æ˜¯æ•°ç»„åŸå‹ä¸Šçš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äº<strong>è¿”å›ä¸€ä¸ªä»åŸæ•°ç»„æˆ–ç±»æ•°ç»„ä¸­æµ…æ‹·è´å‡ºæ¥çš„æ–°æ•°ç»„</strong>ï¼ˆå®ç°å°†ç±»æ•°ç»„è½¬æ¢æˆæ•°ç»„ï¼‰</p>
<p><code>[].slice</code>æ˜¯å› ä¸º<code>arguments</code>ä¸Šæ²¡æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥éœ€è¦å»ç©ºæ•°ç»„ä¸­â€œå€Ÿç”¨â€ï¼Œå¹¶ä¸”é€šè¿‡
<code>.call()</code> å°†<code>slice</code>çš„<code>this</code>æŒ‡å‘<code>arguments</code>ï¼Œå˜ç›¸çš„è®©<code>arguments</code>å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p>
<p>åœ¨äº†è§£äº†<code>arguments</code>åï¼Œèªæ˜çš„ä½ å·²ç»æƒ³åˆ°äº†å¦‚ä½•é€šè¿‡å®ƒæ¥å®ç°æ‰‹å†™<code>new</code>äº†</p>
<h3 data-id="heading-10">æ‰‹å†™ä»£ç å¦‚ä¸‹</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">objectFactory</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// åˆ›å»ºç©ºå¯¹è±¡</span>
    <span class="hljs-keyword">var</span> obj = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>(); 
    <span class="hljs-comment">// å°† arugments çš„ç¬¬ä¸€é¡¹æå‡ºæ¥ï¼ˆä¹Ÿå°±æ˜¯ æ„é€ å‡½æ•°ï¼‰</span>
    <span class="hljs-keyword">var</span> <span class="hljs-title class_">Construstor</span> = [].<span class="hljs-property">shift</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">arguments</span>);
    <span class="hljs-comment">// ç»‘å®š this å¹¶æ‰§è¡Œæ„é€ å‡½æ•°</span>
    <span class="hljs-title class_">Construstor</span>.<span class="hljs-title function_">apply</span>(obj, <span class="hljs-variable language_">arguments</span>); <span class="hljs-comment">// ä¸èƒ½ä½¿ç”¨callï¼Œå› ä¸º applyè°ƒç”¨æ•°ç»„</span>
    <span class="hljs-comment">// è®¾ç½®åŸå‹é“¾</span>
    obj.<span class="hljs-property">__proto__</span> = <span class="hljs-title class_">Construstor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>; 
    <span class="hljs-keyword">return</span> obj;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name, age, city</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">city</span> = city;
}

<span class="hljs-keyword">const</span> p = <span class="hljs-title function_">objectFactory</span>(<span class="hljs-title class_">Person</span>, <span class="hljs-string">'Alice'</span>, <span class="hljs-number">25</span>, <span class="hljs-string">'Beijing'</span>); <span class="hljs-comment">// è‡ªåŠ¨é€‚é…</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GLM-4.6V åˆæ¢ï¼šå›½äº§ AI èƒ½è¾¹å†™è¾¹è‡ªå·±é…å›¾äº†]]></title>    <link>https://juejin.cn/post/7582102297480740906</link>    <guid>https://juejin.cn/post/7582102297480740906</guid>    <pubDate>2025-12-10T14:34:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582102297480740906" data-draft-id="7582102297480724522" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GLM-4.6V åˆæ¢ï¼šå›½äº§ AI èƒ½è¾¹å†™è¾¹è‡ªå·±é…å›¾äº†"/> <meta itemprop="keywords" content="ChatGLM (æ™ºè°±),äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-10T14:34:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£å“¥æ•°æ™ºè°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3825956195409223"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GLM-4.6V åˆæ¢ï¼šå›½äº§ AI èƒ½è¾¹å†™è¾¹è‡ªå·±é…å›¾äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3825956195409223/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£å“¥æ•°æ™ºè°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T14:34:58.000Z" title="Wed Dec 10 2025 14:34:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å†™æ–‡ç« æ—¶æ€»ä¼šé‡åˆ°éœ€è¦æ’å›¾è§£é‡Šçš„åœ°æ–¹ï¼Œä¹‹å‰åˆ†äº«è¿‡<code>å³æ¢¦</code>å¯ä»¥ä¸ºæ–‡ç« å…¨æ–‡é…å›¾äº†ã€‚</p>
<p>ã€Š<a href="https://juejin.cn/post/7566526381727924266" target="_blank" title="https://juejin.cn/post/7566526381727924266">å³æ¢¦AIç«Ÿç„¶å¯ä»¥å…¨æ–‡ä¸€é”®é…å›¾äº†ï¼Ÿ - æ˜é‡‘</a>ã€‹</p>
<p>ä½†ç»ˆå½’è¿˜éœ€è¦æ‰‹åŠ¨å¤åˆ¶ã€ç²˜è´´ï¼Œä½“éªŒæ²¡æœ‰é‚£ä¹ˆå®Œç¾ã€‚</p>
<p>å¸¸ç”¨çš„ AI æˆ‘å½“æ—¶ä¹Ÿå°è¯•äº†ï¼Œåªæœ‰ <code>Gemini</code> ç»™å‡ºäº†å›¾æ–‡æ··æ’çš„ç»“æœã€‚</p>
<p>å¦‚ä»Šï¼Œå›½äº§æ¨¡å‹ç»™å‡ºäº†é€‰æ‹©â€”â€”<code>GLM-4.6V</code>ï¼Œä¸€é”®æå®šå›¾æ–‡æ··æ’å†…å®¹åˆ›ä½œã€‚</p>
<h2 data-id="heading-0">GLM-4.6V</h2>
<p><code>GLM</code> çš„ V ç³»åˆ—æ˜¯æ™ºè°±æ¨¡å‹ä¸­çš„å¤šæ¨¡æ€å¤§æ¨¡å‹ï¼Œæ•ˆæœä¸€ç›´ä¸é”™ã€‚</p>
<p>æœ¬æ¬¡å‘å¸ƒåŒ…æ‹¬ä¸¤æ¬¾æ¨¡å‹ï¼š</p>
<ul>
<li><strong>GLM-4.6Vï¼ˆ106B-A12Bï¼‰</strong>ï¼šé¢å‘äº‘ç«¯ä¸é«˜æ€§èƒ½é›†ç¾¤åœºæ™¯çš„åŸºç¡€ç‰ˆï¼›</li>
<li><strong>GLM-4.6V-Flashï¼ˆ9Bï¼‰</strong>ï¼šé¢å‘æœ¬åœ°éƒ¨ç½²ä¸ä½å»¶è¿Ÿåº”ç”¨çš„è½»é‡ç‰ˆã€‚</li>
</ul>
<p>å…¶ä¸­ï¼Œ<code>Flash</code> ç‰ˆæœ¬ä¾ç„¶å…è´¹æä¾›ç»™å¤§å®¶ä½¿ç”¨ã€‚</p>
<p>è¿™æ¬¡å‘å¸ƒçš„ä¸»è¦å†…å®¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>è®­ç»ƒæ—¶ä¸Šä¸‹æ–‡çª—å£æå‡åˆ° <code>128k tokens</code>ï¼Œåœ¨è§†è§‰ç†è§£ç²¾åº¦ä¸Šè¾¾åˆ°åŒå‚æ•°è§„æ¨¡ <code>SOTA</code>ã€‚</li>
<li>é¦–æ¬¡åœ¨æ¨¡å‹æ¶æ„ä¸­å°†Â <code>Function Call</code>ï¼ˆå·¥å…·è°ƒç”¨ï¼‰èƒ½åŠ›åŸç”Ÿèå…¥è§†è§‰æ¨¡å‹ï¼Œæ‰“é€šä»**ã€Œè§†è§‰æ„ŸçŸ¥ã€<strong>åˆ°</strong>ã€Œå¯æ‰§è¡Œè¡ŒåŠ¨ï¼ˆActionï¼‰ã€**çš„é“¾è·¯ã€‚</li>
</ul>
<p>æˆ‘ä»¬ç›´æ¥åˆ° <code>z.ai</code> ä¸Šä½“éªŒä¸‹â€œå·¥å…·è°ƒç”¨èƒ½åŠ›åŸç”Ÿèå…¥è§†è§‰æ¨¡å‹â€æ˜¯ä»€ä¹ˆæ„Ÿå—ã€‚</p>
<h2 data-id="heading-1">åŸç”Ÿå¤šæ¨¡æ€å·¥å…·è°ƒç”¨å®æµ‹</h2>
<p>åœºæ™¯æ¯”è¾ƒç®€å•ï¼Œæˆ‘è®© <code>GLM-4.6V</code> å¸®æˆ‘å†™ä¸€ç¯‡ <code>Gemini 3 Pro</code> çš„ç§‘æ™®æ–‡ç« ï¼Œé‡è¦çš„æ˜¯è¾“å‡ºè¦å›¾æ–‡æ··æ’ã€‚</p>
<p><strong>æç¤ºè¯</strong></p>
<pre><code class="hljs">å¸®æˆ‘å†™ä¸€ç¯‡ä»‹ç» Gemini 3 pro çš„ç§‘æ™®æ–‡ç« ï¼Œéœ€è¦å›¾æ–‡å¹¶èŒ‚
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b1e8826a8cca4bcbba31f8b44b1a42a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765982098&amp;x-signature=Q209VOJIxpVk%2BCB6EPE7kzOipm0%3D" alt="" loading="lazy"/></p>
<p>æˆªå›¾ä¸­å¯ä»¥çœ‹åˆ°æ€è€ƒè¿‡ç¨‹ä¸­å°±å¯ä»¥è°ƒç”¨å›¾ç‰‡æœç´¢å·¥å…·ï¼ˆ<code>Function</code>ï¼‰ï¼ŒæŸ¥æ‰¾é€‚åˆçš„å›¾ç‰‡ä»¥ä¾›ä½¿ç”¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e5ddf442c704204a875bdee0c0da20b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765982098&amp;x-signature=924RGg%2BDpS5X%2F2k7ol%2Bz4cT4Bqc%3D" alt="" loading="lazy"/></p>
<p>åç»­ä¹Ÿç¡®å®åœ¨æ–‡ç« ä¸­ä½¿ç”¨äº†ä¸Šé¢çš„å›¾ç‰‡ï¼Œå¹¶é’ˆå¯¹å›¾ç‰‡è¿›è¡Œäº†æ–‡å­—è§£é‡Šã€‚</p>
<p>æ•´ä¸ªè¿‡ç¨‹å®Œå…¨è‡ªåŠ¨åŒ–ï¼Œä¸€è½®å¯¹è¯å°±èƒ½å¾—åˆ°ä¸€ç¯‡å›¾æ–‡å¹¶èŒ‚çš„é«˜è´¨é‡æ–‡ç« äº†ã€‚</p>
<h2 data-id="heading-2">ç»“è¯­</h2>
<p>è¿™æ„å‘³ç€ï¼Œä»¥åçš„å†…å®¹åˆ›ä½œï¼Œç»ˆäºä¸ç”¨åœ¨ä¸åŒæ¨¡å‹é—´æ¥å›åˆ‡æ¢äº†ã€‚</p>
<p>ä½†æˆ‘è®¤ä¸ºæ„ä¹‰è¿œä¸æ­¢è¿™ä¸€ç‚¹ã€‚</p>
<p><strong>å¤šæ¨¡æ€å¤§æ¨¡å‹ä¸­çš„â€œå¤šâ€ä¸€ç›´æŒ‡çš„æ˜¯å¯ä»¥æ”¯æŒçš„ç§ç±»å¤šï¼Œè€Œä¸æ˜¯ä¸€è½®å¯¹è¯ä¸­çš„è¯­æ–™æ¨¡æ€â€œå¤šâ€</strong>ã€‚</p>
<p>ç°åœ¨ï¼Œä½¿ç”¨ GLM-4.6Vï¼Œæˆ‘ä»¬å¯ä»¥ä¸€æ¬¡æ€§ä¼ é€’æ–‡å­—ã€å›¾ç‰‡ä¸¤ç§æ¨¡æ€ï¼Œåç»­è¯­éŸ³ã€è§†é¢‘ä¼°è®¡ä¹Ÿä¼šé™†ç»­å‡ºç°ã€‚</p>
<p>è¿™ç§æ¨¡å‹èƒ½åŠ›çš„æå‡ï¼Œå°†ä¼šæ›´åŠ ç²¾å‡†çš„æè¿°çœŸå®ä¸–ç•Œï¼Œç›¸åº”çš„ï¼Œæ¨¡å‹åç»­çš„æœåŠ¡æ°´å¹³ä¹Ÿä¸€å®šä¼šå†æ¬¡æå‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[èŠèŠåç¨‹é‡Œçš„ Semaphoreï¼šåˆ«è®©åç¨‹æŒ¤çˆ†é—¨å£]]></title>    <link>https://juejin.cn/post/7582016579858169890</link>    <guid>https://juejin.cn/post/7582016579858169890</guid>    <pubDate>2025-12-10T14:18:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582016579858169890" data-draft-id="7582036070159695872" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="èŠèŠåç¨‹é‡Œçš„ Semaphoreï¼šåˆ«è®©åç¨‹æŒ¤çˆ†é—¨å£"/> <meta itemprop="keywords" content="Android,Kotlin"/> <meta itemprop="datePublished" content="2025-12-10T14:18:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RainyJiang"/> <meta itemprop="url" content="https://juejin.cn/user/2287404300943566"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            èŠèŠåç¨‹é‡Œçš„ Semaphoreï¼šåˆ«è®©åç¨‹æŒ¤çˆ†é—¨å£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2287404300943566/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RainyJiang
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T14:18:11.000Z" title="Wed Dec 10 2025 14:18:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    18
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atelier-dune-light">.hljs-comment,.hljs-quote{color:#7d7a68}.hljs-attribute,.hljs-link,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#d73737}.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#b65611}.hljs-bullet,.hljs-string,.hljs-symbol{color:#60ac39}.hljs-section,.hljs-title{color:#6684e1}.hljs-keyword,.hljs-selector-tag{color:#b854d4}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fefbec;color:#6e6b5e}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æœ€è¿‘åœ¨å·¥ä½œä¸­é‡åˆ°äº†ä¸€ä¸ªéå¸¸æ™®é€šçš„å°éœ€æ±‚ï¼Œå®¢æˆ·ç«¯éœ€è¦ä»äº‘ç«¯ä¸Šæ‹‰å–ä¸€å †å›¾ç‰‡é“¾æ¥ï¼Œå¹¶ä¸”é’ˆå¯¹å›¾ç‰‡åšå‡åºå¤„ç†åå±•ç¤ºæœ€ç»ˆåˆ—è¡¨ã€‚å¬èµ·æ¥æ˜¯ä¸æ˜¯å¾ˆç®€å•å‘¢ï¼Œä¸å°±æ˜¯â€œä¸‹è½½ â†’ çœ‹å¤§å° â†’ æ’æ’åºâ€œå°±æå®šäº†ã€‚ç»“æœä¸€è·‘ï¼ŒæœåŠ¡å™¨å·®ç‚¹è¢«æˆ‘æŒ‰åœ¨åœ°ä¸Šæ‘©æ“¦ã€‚å› ä¸ºå›¾ç‰‡ä¸€å¤šï¼Œåç¨‹ä¸€ä¸ªä¸ªåƒæ‰“äº†é¸¡è¡€ä¸€æ ·ï¼Œ<strong>åŒæ—¶èµ·é£ï¼åŒæ—¶è¯·æ±‚ï¼åŒæ—¶å†²å‘æœåŠ¡å™¨ï¼</strong> è¿™è¾¹çš„å®¢æˆ·ç«¯æ˜¯è§‰å¾—å¾ˆçˆ½ï¼Œå¾ˆå—¨äº†ã€‚ä½†äº‘æœåŠ¡å™¨é‚£è¾¹å°±ä¸å¤ªä¹è§‚äº†ï¼šâ€œå…„derä½ å†·é™ç‚¹ï¼Œæˆ‘ä¸æ˜¯ CDNï¼Œæˆ‘åªæ˜¯ä¸ªæ™®é€šæ‰“å·¥äºº API å•Šï¼â€</p>
<p>æ˜¯çš„ï¼Œå½“æˆç™¾ä¸Šåƒä¸‡ä¸ªåç¨‹ä¸€èµ·æ‹‰å›¾ç‰‡çš„æ—¶å€™ï¼Œç½‘ç»œè¿æ¥å¼€å§‹çˆ†æ»¡ï¼ŒæœåŠ¡ç«¯å“åº”å˜æ…¢ï¼Œå®¢æˆ·ç«¯æ’åºé€»è¾‘è¿˜æ²¡è·‘èµ·æ¥ï¼Œå…ˆè¢«è‡ªå·±çš„å¹¶å‘å‹å®äº†ã€‚è¿™æ—¶å€™æ­å–œä½ ï¼Œä½“éªŒåˆ°äº†<strong>æ— é™åˆ¶å¹¶å‘çš„ææ€–åæœ</strong>ã€‚</p>
<p>å°±æ˜¯åœ¨è¿™æ··ä¹±çš„â€œåç¨‹æš´èµ°äº‹ä»¶â€ä¸­ï¼Œç¬”è€…æ„è¯†åˆ°ï¼š<strong>éœ€è¦æœ‰äººæ¥æ§åœºï¼Œéœ€è¦ä¸€ä¸ªèƒ½è®©åç¨‹æ’é˜Ÿã€æœ‰åºã€æ–‡æ˜åŠäº‹çš„å­˜åœ¨ã€‚</strong></p>
<p>äºæ˜¯<em>Kotlin</em>çš„ <em>Semaphore</em>ä¿¡å·é‡é—ªäº®ç™»åœºäº†ï¼Œç›¸ä¿¡å„ä½å°ä¼™ä¼´éƒ½ä¸é™Œç”Ÿäº†ã€‚å®ƒåƒä¸€ä¸ªç»éªŒä¸°å¯Œçš„äº¤é€šæŒ‡æŒ¥å‘˜ï¼Œç«™åœ¨ç½‘ç»œè¯·æ±‚å…¥å£å¤„ï¼Œå¯¹åç¨‹ä»¬è¯´ï¼šâ€œåˆ«æŒ¤åˆ«æŒ¤ï¼Œä¸€ä¸ªä¸€ä¸ªæ¥ï¼Œæœ€å¤šäº”ä¸ªåŒæ—¶ä¸‹è½½ï¼Œæ‡‚ï¼Ÿâ€ã€‚ä»é‚£ä»¥åï¼Œå›¾ç‰‡è¯·æ±‚ä¸å†æŒ¤çˆ†æœåŠ¡å™¨ï¼Œæ’åºæµç¨‹é¡ºé¡ºåˆ©åˆ©ã€‚</p>
<p>OK, ç›¸ä¿¡å°ä¼™ä¼´ä»¬å·²ç»çŸ¥é“ä»Šå¤©æˆ‘ä»¬è¦èŠä»€ä¹ˆäº†ï¼Œæ²¡é”™ï¼Œä»Šå¤©è¦èŠçš„ä¸»è§’ï¼Œå°±æ˜¯é‚£ä¸ªèƒ½å¸®å¤§å®¶<strong>ç»´æŒç§©åºã€é˜²æ­¢è¿‡åº¦çƒ­æƒ…</strong>çš„å°å®¶ä¼™ï¼š<em>Semaphore(ä¿¡å·é‡)</em> ã€‚</p>
<h2 data-id="heading-1">ä¸€å¥è¯è§£é‡Šåç¨‹ä¸­çš„<em>Semaphore</em></h2>
<p>è¿™æ—¶å€™å°±æœ‰åŒå­¦è¦é—®äº†ï¼Œå•¥æ˜¯åç¨‹ä¸­çš„<em>Semaphore</em>ï¼Œå®ƒå’ŒJavaå½“ä¸­çš„<em>Semaphore</em>æ˜¯ä¸€ä¸ªä¸œè¥¿ä¹ˆï¼Ÿ</p>
<p>æˆ‘ä»¬æ‰“ä¸ªæ¯”æ–¹ï¼Œå‡å¦‚æˆ‘ä»¬åˆšåˆšå¼€äº†ä¸€å®¶ç«é”…åº—ï¼Œä½†åº—é‡Œæ­¤æ—¶åªæœ‰ 5 ä¸ªç‚‰å­ã€‚é¡¾å®¢æ’æˆé•¿é¾™ï¼Œæ¯ä¸ªé¡¾å®¢éƒ½æƒ³è‡ªå·±æ¶®èœã€‚è¿™æ—¶å€™æ€ä¹ˆåŠï¼Ÿ</p>
<p>äºæ˜¯ä½ å®šäº†ä»¥ä¸‹çš„è§„åˆ™ï¼š</p>
<ul>
<li>åŒæ—¶æœ€å¤š5ä¸ªé¡¾å®¢æ‹¿åˆ°çƒ¤ç‚‰ï¼ˆè®¸å¯è¯ï¼‰</li>
<li>å½“æœ‰é¡¾å®¢åƒå®Œäº†ï¼ˆ<em>release</em>ï¼‰ï¼Œä¸‹ä¸€ä¸ªé¡¾å®¢å†æ¥ç€ä¸Š(<em>acquire</em>)</li>
</ul>
<p>è¿™å°±æ˜¯ä¿¡å·é‡çš„èŒè´£æ‰€åœ¨ï¼ŒKotlinçš„<em>Semaphore</em>ä¹Ÿå¹²ç€ç±»ä¼¼çš„äº‹æƒ…ï¼Œå®ƒæ§åˆ¶ç€<strong>åŒæ—¶èƒ½æœ‰å¤šå°‘ä¸ªåç¨‹è¿›å…¥æŸæ®µä»£ç </strong>ã€‚ä¸€æ—¦è¶…è¿‡äº†ï¼Ÿé‚£åé¢å°±<strong>ä¹–ä¹–æ’é˜Ÿã€æŒ‚èµ·ç­‰å¾…</strong>ã€‚</p>
<p>Javaä¸­åŒæ ·ä¹Ÿå«è¿™ä¸ªï¼Œä½†å¾ˆå¯æƒœï¼Œå®ƒä»¬å¹¶ä¸ç®—æ˜¯åŒä¸€ä¸ªä¸œè¥¿ã€‚æˆ‘ä»¬å¯ä»¥ç®€å•ç†è§£ä¸ºï¼šä¸€ä¸ªæ˜¯ <strong>â€œåç¨‹ä¸–ç•Œçš„äº¤è­¦â€</strong> ï¼Œä¸€ä¸ªæ˜¯ <strong>â€œçº¿ç¨‹ä¸–ç•Œçš„äº¤è­¦â€</strong> ï¼Œéƒ½ä¸åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œå·¥ä½œæ–¹å¼ä¹Ÿæœ‰æ‰€ä¸åŒã€‚å…·ä½“è¿™é‡Œå°±ä¸è¿‡å¤šå»¶å±•ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥ä»”ç»†ç ”ç©¶ç ”ç©¶ï¼Œä¸‹é¢ç¬”è€…ç”¨ä¸€ä¸ªè¡¨æ ¼ç®€å•æ¦‚æ‹¬ä¸‹å®ƒä»¬ä¹‹å‰çš„åŒºåˆ«</p>


















































<table><thead><tr><th/><th>Java Semaphore</th><th>Kotlin Coroutine Semaphore</th></tr></thead><tbody><tr><td>æ‰€å±åŒ…</td><td><em>java.util.concurrent</em></td><td><em>kotlinx.coroutines.sync</em></td></tr><tr><td>æ§åˆ¶å¯¹è±¡</td><td>çº¿ç¨‹</td><td>åç¨‹</td></tr><tr><td>é˜»å¡æ–¹å¼</td><td>é˜»å¡çº¿ç¨‹ï¼ˆ<em>Blocking</em>ï¼‰</td><td>æŒ‚èµ·åç¨‹ï¼ˆ<em>Suspending</em>ï¼‰</td></tr><tr><td>æ€§èƒ½ç‰¹å¾</td><td>çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€å¤§</td><td>éé˜»å¡ã€è½»é‡ã€å¯æ‰©å±•</td></tr><tr><td>ä½¿ç”¨è¯­æ³•</td><td><em>acquire()</em> / <em>release()</em></td><td><em>withPermit { ... }</em> ï¼ˆæŒ‚èµ·å®‰å…¨çš„ï¼‰</td></tr><tr><td>å‡ºé”™åé‡Šæ”¾</td><td>æ‰‹åŠ¨ <em>try...finally</em></td><td>è‡ªåŠ¨ï¼ˆ<em>withPermit</em>ï¼‰</td></tr><tr><td>ä½¿ç”¨åœºæ™¯</td><td>å¤šçº¿ç¨‹åŒæ­¥ã€å¹¶å‘é™æµ</td><td>åç¨‹å¹¶å‘æ§åˆ¶ã€å¼‚æ­¥é™æµ</td></tr><tr><td>å…¬å¹³æ€§</td><td>å¯é€‰å…¬å¹³æ¨¡å¼</td><td>é»˜è®¤ä¸å…¬å¹³ï¼ˆå¯è‡ªå®šä¹‰é€»è¾‘ï¼‰</td></tr></tbody></table>
<h2 data-id="heading-2">å¦‚ä½•ä½¿ç”¨<em>Semaphore</em></h2>
<p>Kotlinçš„<em>Semaphore</em>æ ¸å¿ƒç”¨æˆ·å…¶å®å°±æ˜¯ä¸¤ä¸ªå­—ï¼šè¿›å‡º</p>
<ul>
<li><em>acquire</em>:ç”³è¯·è®¸å¯è¯ï¼ˆè¿›é—¨ï¼‰</li>
<li>release: é‡Šæ”¾è®¸å¯è¯ï¼ˆå‡ºé—¨ï¼‰</li>
</ul>
<p>ç”±äºKotlinä¸­æ‡’å¾—ä½¿ç”¨<em>try..finally</em>, æ‰€ä»¥å®˜æ–¹éå¸¸è´´å¿ƒçš„å°è£…äº†ä¸ªå‡½æ•°ï¼Œè‡ªåŠ¨å¸®ä½  acquire + releaseï¼Œå°±åƒé—¨ç¦åˆ·è„¸è‡ªåŠ¨å‡ºå…¥ï¼Œä¸å¿…æ‹…å¿ƒå¿˜è®°å¸¦å¡è€Œè¢«å…³åœ¨äº†å¤–é¢ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">semaphore.withPermit {
 Â  Â <span class="hljs-comment">// å—ä¿æŠ¤çš„ä»£ç åŒº</span>
}
</code></pre>
<h2 data-id="heading-3">èŠèŠä¸€äº›ä½¿ç”¨<em>Semaphore</em>çš„åœºæ™¯</h2>
<h3 data-id="heading-4">åœºæ™¯1ï¼šé™æµè¯·æ±‚ï¼Œä¸è¢«å°å·</h3>
<p>å‡è®¾æˆ‘ä»¬è¦æŠ“å–å‡ åä¸ªç½‘é¡µï¼Œä½†ç½‘ç«™è§„å®šæ¯æ¬¡æœ€å¤š 5 ä¸ªå¹¶å‘ã€‚ç›´æ¥ä¸Š<em>Sempahore</em></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchAll</span><span class="hljs-params">(urls: <span class="hljs-type">List</span>)</span></span> = coroutineScope {
 Â  Â <span class="hljs-keyword">val</span> semaphore = Semaphore(<span class="hljs-number">5</span>)
 Â  Â urls.map { url -&gt;
 Â  Â  Â  Â async {
 Â  Â  Â  Â  Â  Â semaphore.withPermit {
 Â  Â  Â  Â  Â  Â  Â  Â println(&amp;#<span class="hljs-number">34</span>;å¼€å§‹æŠ“å– $url&amp;#<span class="hljs-number">34</span>;)
 Â  Â  Â  Â  Â  Â  Â  Â delay(<span class="hljs-number">500</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚</span>
 Â  Â  Â  Â  Â  Â  Â  Â &amp;#<span class="hljs-number">34</span>;å†…å®¹æ¥è‡ª $url&amp;#<span class="hljs-number">34</span>;
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
 Â   }.awaitAll()
}
</code></pre>
<p><em>Semaphore</em>åœ¨è¿™é‡Œå°±æ˜¯æˆ‘ä»¬çš„â€œçˆ¬è™«èŠ‚æµé˜€â€ï¼Œä¼˜é›…åœ°è®©ä½ åœ¨ä¸è¢« ban æ‰çš„è¾¹ç¼˜åå¤è¯•æ¢ã€‚å…„å¼Ÿï¼Œåˆ«è¯•æ¢äº†</p>
<h3 data-id="heading-5">åœºæ™¯2ï¼šCPU å¯†é›†ä»»åŠ¡çš„èŠ‚æµé˜€</h3>
<p>å¦‚æœæˆ‘ä»¬æœ‰ä¸€äº›éå¸¸é‡ä¸”è€—æ—¶çš„è®¡ç®—ä»»åŠ¡Task,</p>
<pre><code class="hljs language-scss" lang="scss">(<span class="hljs-number">1</span>..<span class="hljs-number">10000000</span>)<span class="hljs-selector-class">.map</span> {
 Â  Â async { <span class="hljs-built_in">heavyCompute</span>(it) }
}<span class="hljs-selector-class">.awaitAll</span>()
â€‹
</code></pre>
<p>CPUè¿Ÿæ—©è¢«æˆ‘ä»¬æ¦¨å¹²äº†ï¼Œæ”¹ç”¨<em>Samphore</em>è¯•è¯•å§</p>
<pre><code class="hljs language-scss" lang="scss">val semaphore = <span class="hljs-built_in">Semaphore</span>(Runtime.getRuntime()<span class="hljs-selector-class">.availableProcessors</span>())
(<span class="hljs-number">1</span>..<span class="hljs-number">10000000</span>)<span class="hljs-selector-class">.map</span> {
 Â  Â async {
 Â  Â  Â  Â semaphore<span class="hljs-selector-class">.withPermit</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-built_in">heavyCompute</span>(it)
 Â  Â  Â   }
 Â   }
}<span class="hljs-selector-class">.awaitAll</span>()
</code></pre>
<p>CPUç»ˆäºèƒ½å–˜å£æ°”ï¼Œä¸å†è¿›è¡Œæˆåƒä¸Šç™¾ä¸‡ä¸ªè®¡ç®—å†…å·ä¸­ã€‚</p>
<h2 data-id="heading-6">æ³¨æ„äº‹é¡¹ï¼šä¸€äº›å®¹æ˜“ç¿»è½¦çš„ç‚¹</h2>
<h3 data-id="heading-7">1. å¿˜è®° <em>release()</em> â†’ åç¨‹æ°¸è¿œå¡åœ¨é—¨å£</h3>
<p>å¦‚æœæˆ‘ä»¬æ‰‹åŠ¨ä½¿ç”¨ <em>acquire()</em> ï¼Œå´åœ¨ä¸­é€”ä»£ç å—ä¸­æŠ¥é”™äº†ã€returnã€æˆ–è€…å¿˜è®°åœ¨ <em>finally</em>ä¸­è°ƒç”¨ <em>release()</em> ï¼Œé‚£è®¸å¯è¯å°±â€œä¸¢äº†â€ã€‚å‰©ä½™<em>permits</em>ä¼šè¶Šæ¥è¶Šå°‘ï¼Œæœ€åæ‰€æœ‰åç¨‹éƒ½ä¼šåœåœ¨ <em>acquire()</em> è¿™ä¸€æ­¥ï¼Œå†ä¹Ÿä¸ç»§ç»­æ‰§è¡Œã€‚</p>
<p>å°±åƒé¥­åº—ä¸€å…± 3 ä¸ªç‚‰å­ï¼Œæœ‰ä¸ªå®¢äººç”¨å®Œå¿˜äº†è¿˜ç‚‰å­ï¼Œè¿˜æŠŠç‚‰å­å¸¦èµ°äº†ï¼Œå…¨åº—ä»æ­¤åªèƒ½å¼€ 2 ä¸ªç‚‰å­ï¼Œä¹‹åå®¢äººçº·çº·æ•ˆä»¿ï¼Œä»¥è‡³äºæœ€åå¨æˆ¿å½»åº•ç˜«ç—ªã€‚</p>
<pre><code class="hljs language-scss" lang="scss">semaphore<span class="hljs-selector-class">.acquire</span>()
<span class="hljs-built_in">doSomething</span>() Â <span class="hljs-comment">// è¿™é‡Œå¦‚æœæŠ›å¼‚å¸¸äº†...</span>
semaphore<span class="hljs-selector-class">.release</span>() <span class="hljs-comment">// æ ¹æœ¬è¿›ä¸åˆ°è¿™è¡Œ</span>
</code></pre>
<p><strong>è§£å†³åŠæ³•ï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç”¨ <em>withPermit {}</em> æ°¸è¿œä¸ä¼šå¿˜è®°é‡Šæ”¾ï¼</strong></p>
<h3 data-id="heading-8">2. é‡å…¥ä¿¡å·é‡ â†’ åç¨‹â€œè‡ªé”æˆä»™â€</h3>
<p>è¿™æ˜¯å•¥æ„æ€å‘¢ï¼Ÿæˆ‘ä»¬è¦çŸ¥é“<em>Semaphore</em> <strong>ä¸æ˜¯å¯é‡å…¥çš„</strong>ã€‚åŒä¸€ä¸ªåç¨‹å†…éƒ¨å¦‚æœè¿˜æ²¡æœ‰é‡Šæ”¾å‰ä¸€ä¸ªè®¸å¯è¯ï¼Œåˆå†æ¬¡ <em>acquire()</em> ï¼Œå°±ä¼šé™·å…¥æ­»é”ã€‚å› ä¸ºè‡ªå·±æ‹¿ç€è®¸å¯è¯ï¼Œå´åˆåœ¨ç­‰è‡ªå·±é‡Šæ”¾å®ƒã€‚</p>
<pre><code class="hljs language-scss" lang="scss">semaphore<span class="hljs-selector-class">.withPermit</span> {
 Â  Â <span class="hljs-built_in">println</span>(&amp;#<span class="hljs-number">34</span>;å¤–å±‚å¼€å§‹&amp;#<span class="hljs-number">34</span>;)
 Â  Â semaphore<span class="hljs-selector-class">.withPermit</span> { Â <span class="hljs-comment">// å†²çªç‚¹å°±åœ¨è¿™é‡Œ</span>
 Â  Â  Â  Â <span class="hljs-built_in">println</span>(&amp;#<span class="hljs-number">34</span>;å†…å±‚ï¼šæ°¸è¿œè¿›ä¸æ¥&amp;#<span class="hljs-number">34</span>;)
 Â   }
}
</code></pre>
<p>è¿™æ®µä»£ç æ°¸è¿œæ‰§è¡Œä¸åˆ°å†…å±‚ï¼Œå› ä¸ºå¤–å±‚æ‹¿ç€è®¸å¯è¯ä¸æ”¾ã€‚</p>
<p><strong>è§£å†³æ–¹æ³•ï¼š</strong></p>
<ul>
<li>ä¸è¦åœ¨å—æ§åŒºåŸŸé‡Œå†æ¬¡è°ƒç”¨å—æ§åŒºåŸŸã€‚</li>
<li>å¦‚æœç¡®å®éœ€è¦åµŒå¥—ç»“æ„ï¼Œæ”¹ç”¨åˆ«çš„æœºåˆ¶ï¼ˆå¦‚<em>Mutex</em>ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-9">3. ä¸å…¬å¹³è°ƒåº¦ â†’ ä½ ä»¥ä¸ºæ˜¯æ’é˜Ÿï¼Œå…¶å®æ˜¯â€œæ’é˜Ÿç°åœºâ€</h3>
<p>åç¨‹çš„<em>Semaphore</em> æ˜¯<strong>ä¸ä¿è¯å…¬å¹³æ€§çš„</strong>ã€‚å®ƒä¸ä¼šç¡®ä¿â€œå…ˆç­‰å¾…çš„åç¨‹å…ˆè·å¾—è®¸å¯è¯â€ã€‚åªè¦è®¸å¯è¯é‡Šæ”¾æ—¶ï¼Œæœ‰åç¨‹ç«äº‰åˆ°ï¼Œå®ƒå°±ä¸Šï¼Œè°å…ˆè°åï¼Œè°ƒåº¦å™¨è¯´äº†ç®—ã€‚</p>
<p><strong>è¿™æ„å‘³ç€ï¼š</strong></p>
<ul>
<li>æŸäº›åç¨‹å¯èƒ½ä¸€ç›´æŠ¢ä¸åˆ°è®¸å¯è¯ã€‚</li>
<li>è¿™åœ¨å¤§é‡åç¨‹ç­‰å¾… + é«˜ç«äº‰çš„æƒ…å†µä¸‹æ›´æ˜æ˜¾ã€‚</li>
</ul>
<p>å°±å¥½æ¯”åœ¨ç½‘çº¢åº—é—¨å£æ’é˜Ÿä¹°å¥¶èŒ¶ï¼Œåº—å‘˜ä¸€å¼€é—¨è®©å®¢äººè¿›æ¥ï¼Œç»“æœæ°¸è¿œæ˜¯ç«™å¾—è¿‘çš„é‚£å‡ ä¸ªäººæŒ¤è¿›å»äº†ã€‚æ’åœ¨è¿œå¤„çš„å‡ ä¸ªå€’éœ‰è›‹å¯èƒ½ç­‰äº† 10 åˆ†é’Ÿè¿˜æ˜¯æ²¡è¿›å»ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">val semaphore = <span class="hljs-built_in">Semaphore</span>(<span class="hljs-number">1</span>)
â€‹
repeat(<span class="hljs-number">100</span>) { <span class="hljs-selector-tag">i</span> -&gt;
 Â  Â launch {
 Â  Â  Â  Â if (i == <span class="hljs-number">0</span>) {
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// 0å·åç¨‹ï¼šå¯æ€œå¨ƒï¼Œå¯èƒ½æ°¸è¿œç­‰ä¸åˆ°</span>
 Â  Â  Â  Â  Â  Â semaphore<span class="hljs-selector-class">.withPermit</span> {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-built_in">println</span>(&amp;#<span class="hljs-number">34</span>;<span class="hljs-number">0</span>å·ç»ˆäºè¿›æ¥äº†&amp;#<span class="hljs-number">34</span>;)
 Â  Â  Â  Â  Â   }
 Â  Â  Â   } else {
 Â  Â  Â  Â  Â  Â semaphore<span class="hljs-selector-class">.withPermit</span> {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å…¶ä»–åç¨‹æ‰§è¡Œå¾—æ›´å¿«ï¼Œå¯èƒ½ä¸€ç›´å ç€èŠ‚å¥</span>
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
 Â   }
}
</code></pre>
<p>å› ä¸ºè°ƒåº¦å™¨ä¼šæ›´â€œåçˆ±â€æ‰§è¡Œé€Ÿåº¦å¿«ã€ç”Ÿå‘½å‘¨æœŸçŸ­çš„åç¨‹ï¼Œ0 å·åç¨‹å¯èƒ½ä¸€ç›´æŠ¢ä¸åˆ°æ—¶æœºã€‚</p>
<p>å¥½äº†ï¼Œ<strong>é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•é¿å…ä¸å…¬å¹³å¼•èµ·çš„é—®é¢˜ï¼Ÿ</strong></p>
<p><strong>å¦‚æœæˆ‘ä»¬ä¸šåŠ¡ç¡®å®éœ€è¦â€œå…ˆæ¥å…ˆæœåŠ¡ï¼ˆFIFOï¼‰â€ï¼Œå¯ä»¥ç›´æ¥ç”¨æ‰‹åŠ¨é˜Ÿåˆ—ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> mutex = Mutex()
<span class="hljs-keyword">val</span> queue = ArrayDeque&gt;()
â€‹
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fairAcquire</span><span class="hljs-params">()</span></span> {
 Â  Â <span class="hljs-keyword">val</span> waiter = CompletableDeferred()
 Â  Â mutex.lock()
 Â  Â <span class="hljs-keyword">val</span> first = queue.isEmpty()
 Â  Â queue.add(waiter)
 Â  Â mutex.unlock()
 Â  Â <span class="hljs-keyword">if</span> (!first) {
 Â  Â  Â  Â waiter.await() <span class="hljs-comment">// ç­‰å‰é¢çš„åç¨‹é‡Šæ”¾</span>
 Â   }
}
â€‹
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fairRelease</span><span class="hljs-params">()</span></span> {
 Â  Â mutex.lock()
 Â  Â queue.removeFirstOrNull()?.complete(<span class="hljs-built_in">Unit</span>)
 Â  Â mutex.unlock()
}
</code></pre>
<p>æ­¤æ—¶æˆ‘ä»¬å†åœ¨ <em>withPermit</em> å¤–å±‚å¥—è¿™å¥—â€œå…¬å¹³é˜Ÿåˆ—â€ï¼Œå°±èƒ½å®ç°çœŸæ­£çš„<strong>å…¬å¹³ä¿¡å·é‡</strong>ã€‚ä½†å¤§å¤šæ•°ä¸šåŠ¡å…¶å®ä¸éœ€è¦è¿™ä¹ˆä¸¥æ ¼ï¼Œåªè¦å¹¶å‘æ•°é‡ä¸å¤¸å¼ ï¼Œé»˜è®¤çš„<em>Semaphore</em>æ˜¯å®Œå…¨å¤Ÿç”¨çš„ã€‚</p>
<h2 data-id="heading-10">å°¾å£°</h2>
<p>å¦‚æœæŠŠåç¨‹ä¸–ç•Œæ¯”ä½œä¸€åº§åŸå¸‚ï¼š<em>launch</em> æ˜¯æ±½è½¦ ï¼Œ<em>delay</em> æ˜¯çº¢ç¯ï¼Œé‚£ <em>Semaphore</em> å°±æ˜¯äº¤é€šæŒ‡æŒ¥å‘˜ ã€‚æ²¡æœ‰å®ƒï¼Œåç¨‹å°±ä¼šåƒä¸€ç¾¤æ²¡åˆ¹è½¦çš„å¸æœºï¼ŒæŒ¤æˆä¸€é”…ç²¥ã€‚æœ‰äº†å®ƒï¼Œå¤§å®¶æ–‡æ˜å‡ºè¡Œï¼Œäº•ç„¶æœ‰åºã€‚</p>
<p>é‚£ä¹ˆä»€ä¹ˆæ—¶å€™è¯¥ç”¨<em>Semaphore</em>ï¼Ÿ</p>
<ul>
<li>
<p>å½“ä½ æƒ³é™åˆ¶â€œåŒæ—¶å¹²æ´»çš„äººæ•°â€ï¼Œæ¯”å¦‚è¯´ä¸€æ¬¡åªå…è®¸ <strong>5 ä¸ªåç¨‹ä¸‹è½½å›¾ç‰‡</strong>ã€‚</p>
</li>
<li>
<p>å½“ä½ è¦ä¿æŠ¤ä¸€ä¸ªâ€œæœ‰é™èµ„æºâ€ï¼Œæ¯”å¦‚è¯´æ•°æ®åº“è¿æ¥æ± åªæœ‰ <strong>5 ä¸ªè¿æ¥</strong>ï¼Œå¿…é¡»æ’é˜Ÿä½¿ç”¨ã€‚</p>
</li>
<li>
<p>å½“ä½ æ‹…å¿ƒ API è¢«ä½ æ‰“åˆ° 429ï¼Œæ¯”å¦‚è¯´äº‘ç«¯æ¥å£è§„å®š <strong>æ¯ç§’æœ€å¤š 10 ä¸ªè¯·æ±‚</strong>ï¼Œé‚£å¿…é¡»ä¹–ä¹–éµå®ˆã€‚</p>
</li>
<li>
<p>å½“ä½ æƒ³è®© CPU æ´»å¾—ä¹…ä¸€ç‚¹ï¼Œæ¯”å¦‚è¯´å›¾ç‰‡å¤„ç†ã€AI æ¨ç†ã€å‹ç¼©ç­‰é‡æ“ä½œï¼Œä¸é€‚åˆè®©å‡ åä¸ªåç¨‹ä¸€èµ·ä¸Šã€‚</p>
</li>
</ul>
<p>ç®€å•æ¥è¯´ï¼Œå½“ä½ éœ€è¦â€œå…è®¸æœ€å¤š N ä¸ªåç¨‹åŒæ—¶æ‰§è¡ŒæŸæ®µä»£ç â€çš„æ—¶å€™ï¼Œå¯ä»¥è€ƒè™‘è€ƒè™‘<em>Semaphore</em>ã€‚</p>
<p>å¥½äº†ï¼Œå°±å†™åˆ°è¿™é‡Œå§ã€‚</p>
<p>ç¥å„ä½æ—©å®‰åˆå®‰æ™šå®‰ï¼Œç¥‰çŒ·å¹¶èŒ‚ï¼Œé¡ºé‚æ— è™ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Expo è¿›é˜¶æŒ‡å—ï¼šèµ‹äºˆ TanStack Query â€œåŸç”Ÿæ„ŸçŸ¥åŠ›â€ â€”â€” æ·±åº¦è§£æ AppState ä¸ NetInfo]]></title>    <link>https://juejin.cn/post/7582036070159941632</link>    <guid>https://juejin.cn/post/7582036070159941632</guid>    <pubDate>2025-12-10T14:58:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582036070159941632" data-draft-id="7582067084840124470" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Expo è¿›é˜¶æŒ‡å—ï¼šèµ‹äºˆ TanStack Query â€œåŸç”Ÿæ„ŸçŸ¥åŠ›â€ â€”â€” æ·±åº¦è§£æ AppState ä¸ NetInfo"/> <meta itemprop="keywords" content="å‰ç«¯,React Native"/> <meta itemprop="datePublished" content="2025-12-10T14:58:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çš®è›‹å°ç²¾çµ"/> <meta itemprop="url" content="https://juejin.cn/user/219558056559278"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Expo è¿›é˜¶æŒ‡å—ï¼šèµ‹äºˆ TanStack Query â€œåŸç”Ÿæ„ŸçŸ¥åŠ›â€ â€”â€” æ·±åº¦è§£æ AppState ä¸ NetInfo
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/219558056559278/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çš®è›‹å°ç²¾çµ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T14:58:54.000Z" title="Wed Dec 10 2025 14:58:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Web å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¹ æƒ¯äº†æµè§ˆå™¨çš„â€œæ™ºèƒ½â€ï¼šåˆ‡æ¢æ ‡ç­¾é¡µæ—¶é¡µé¢ä¼šè‡ªåŠ¨åˆ·æ–°ï¼Œæ–­ç½‘é‡è¿åè¯·æ±‚ä¼šè‡ªåŠ¨é‡è¯•ã€‚è¿™æ˜¯å› ä¸ºæµè§ˆå™¨åº•å±‚è‡ªåŠ¨å¤„ç†äº†çª—å£èšç„¦ï¼ˆWindow Focusï¼‰å’Œç½‘ç»œçŠ¶æ€ï¼ˆOnline Statusï¼‰çš„äº‹ä»¶ã€‚</p>
<p>ç„¶è€Œï¼Œåœ¨ <strong>React Native (Expo)</strong> ç¯å¢ƒä¸­ï¼ŒApp é»˜è®¤æ˜¯â€œç›²â€å’Œâ€œè‹â€çš„ã€‚TanStack Query ä¸çŸ¥é“ç”¨æˆ·ä»€ä¹ˆæ—¶å€™æŠŠ App åˆ‡åˆ°äº†åå°ï¼Œä¹Ÿä¸çŸ¥é“æ‰‹æœºä»€ä¹ˆæ—¶å€™æ–­äº†ç½‘ã€‚</p>
<p>ä¸ºäº†è®© App æ‹¥æœ‰æè‡´çš„ç”¨æˆ·ä½“éªŒï¼ˆå¦‚ï¼šåˆ‡å›æ¥è‡ªåŠ¨åˆ·æ–°ã€æ–­ç½‘è‡ªåŠ¨æš‚åœé‡è¯•ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨é…ç½® <strong>â€œæ„Ÿå®˜ç³»ç»Ÿâ€</strong> ã€‚æœ¬æ–‡å°†æ·±å…¥è§£è¯» <strong><code>AppStateStatus</code></strong> å’Œ <strong><code>setOnline</code></strong>ï¼Œå¹¶æä¾›ç”Ÿäº§ç¯å¢ƒçš„å®Œæ•´é…ç½®æ–¹æ¡ˆã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ æ·±åº¦è§£è¯»ï¼šApp çš„â€œæ„Ÿå®˜ç³»ç»Ÿâ€</h2>
<h3 data-id="heading-1">1. è§†è§‰ç¥ç»ï¼š<code>AppStateStatus</code> (åº”ç”¨çŠ¶æ€)</h3>
<p>AppStateStatus æ˜¯ React Native åŸç”Ÿæä¾›çš„ä¸€ä¸ªçŠ¶æ€ç±»å‹ï¼Œç”¨äºæè¿° App å½“å‰å¤„äºä»€ä¹ˆå¤„å¢ƒã€‚</p>
<p><strong>ä¸‰ä¸ªæ ¸å¿ƒçŠ¶æ€ï¼š</strong></p>
<ul>
<li><strong><code>active</code> (å‰å°/æ´»è·ƒ)</strong> ï¼šç”¨æˆ·æ­£åœ¨ç›¯ç€å±å¹•ï¼ŒApp åœ¨æœ€ä¸Šå±‚è¿è¡Œã€‚è¿™æ˜¯æˆ‘ä»¬å”¯ä¸€å¸Œæœ›è§¦å‘æ•°æ®åˆ·æ–°çš„çŠ¶æ€ã€‚</li>
<li><strong><code>background</code> (åå°)</strong> ï¼šç”¨æˆ·æŒ‰äº† Home é”®ï¼Œæˆ–è€…åˆ‡æ¢åˆ°äº†å¾®ä¿¡ã€‚App è¿˜åœ¨å†…å­˜ä¸­è¿è¡Œï¼Œä½†ç•Œé¢ä¸å¯è§ã€‚</li>
<li><strong><code>inactive</code> (éæ´»è·ƒ)</strong> ï¼šApp å¤„äºâ€œåŠæ­»ä¸æ´»â€çš„è¿‡æ¸¡æ€ï¼ˆå¦‚è¢«æ¥ç”µç”»é¢è¦†ç›–ã€æ‹‰ä¸‹äº†é€šçŸ¥æ ã€iOS å¤šä»»åŠ¡åˆ‡æ¢ç•Œé¢ï¼‰ã€‚</li>
</ul>
<p>ä¸ºä»€ä¹ˆè¦é…ç½®å®ƒï¼Ÿ</p>
<p>TanStack Query æœ‰ä¸€ä¸ªæ ¸å¿ƒåŠŸèƒ½å« Window Focus Refetchingã€‚</p>
<ul>
<li><strong>é—®é¢˜</strong>ï¼šRN é»˜è®¤æ²¡æœ‰ <code>window.onfocus</code> äº‹ä»¶ã€‚</li>
<li><strong>è§£å†³</strong>ï¼šæˆ‘ä»¬éœ€è¦ç›‘å¬ <code>AppState</code> çš„å˜åŒ–ã€‚å½“çŠ¶æ€å˜ä¸º <code>active</code> æ—¶ï¼Œæ‰‹åŠ¨è°ƒç”¨ <code>focusManager.setFocused(true)</code>ã€‚</li>
<li><strong>æ•ˆæœ</strong>ï¼šTanStack Query æ”¶åˆ°ä¿¡å·åï¼Œä¼šç«‹å³æ£€æŸ¥é¡µé¢ä¸Šçš„æ•°æ®æ˜¯å¦è¿‡æœŸï¼ˆStaleï¼‰ã€‚å¦‚æœè¿‡æœŸï¼Œå®ƒä¼šåœ¨åå°æ‚„æ‚„å‘èµ·è¯·æ±‚ï¼Œç”¨æˆ·åˆ‡å›æ¥çš„ä¸€ç¬é—´çœ‹åˆ°çš„å°±æ˜¯æœ€æ–°æ•°æ®ã€‚</li>
</ul>
<h3 data-id="heading-2">2. å¬è§‰ç¥ç»ï¼š<code>setOnline</code> (è”ç½‘å›è°ƒ)</h3>
<p>setOnline ä¸æ˜¯ä¸€ä¸ªä½ å¯ä»¥ç›´æ¥å¯¼å…¥çš„å‡½æ•°ï¼Œå®ƒæ˜¯ TanStack Query çš„ onlineManager.setEventListener æ–¹æ³•ä¼ é€’ç»™ä½ çš„ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼ˆå‚æ•°ï¼‰ã€‚ä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸º TanStack Query é€’ç»™ä½ çš„ä¸€æŠŠâ€œå¼€å…³â€ã€‚</p>
<p><strong>é€»è¾‘æµç¨‹å›¾ï¼šä»æ–­ç½‘åˆ°é‡è¿</strong></p>
<pre><code class="hljs language-lua" lang="lua">+<span class="hljs-comment">---------------------------+</span>
| ğŸ“¡ ç‰©ç†å±‚                  |
| æ‰‹æœº <span class="hljs-number">4</span>G/WiFi ä¿¡å·å˜åŒ–       |
+<span class="hljs-comment">-------------+-------------+</span>
              |
              v (è§¦å‘ç³»ç»Ÿäº‹ä»¶)
+<span class="hljs-comment">-------------+-------------+</span>
| ğŸ§ B: NetInfo ç›‘å¬å™¨       |
+<span class="hljs-comment">-------------+-------------+</span>
              |
              v (è·å–çŠ¶æ€: isConnected)
+<span class="hljs-comment">-------------+-------------+</span>
| ğŸ’» C: å¼€å‘è€…ä»£ç é€»è¾‘        |
| (app/_layout.tsx)         |
+<span class="hljs-comment">-------------+-------------+</span>
              |
              v (è°ƒç”¨ setOnline)
+<span class="hljs-comment">-------------+-------------+</span>
| âš™ï¸ D: TanStack Query      |
|     (onlineManager)       |
+<span class="hljs-comment">-------------+-------------+</span>
       /             \
      / (<span class="hljs-literal">false</span>)       \ (<span class="hljs-literal">true</span>)
     v                 v
+<span class="hljs-comment">---------+       +---------+</span>
| E: ğŸ›‘   |       | F: ğŸš€   |
| æš‚åœ     |       | æ¢å¤    |
| (Pause) |       | (Resume)|
| åœæ­¢é‡è¯• |       | ç«‹å³é‡è¯• |
+<span class="hljs-comment">---------+       +---------+</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¦é…ç½®å®ƒï¼Ÿ</strong></p>
<ul>
<li><strong>çœç”µä¿æŠ¤</strong>ï¼šå¦‚æœæ²¡é…ç½®ï¼Œæ–­ç½‘æ—¶ TanStack Query ä¼šå‚»å‚»åœ°ä¸€ç›´é‡è¯•è¯·æ±‚ï¼Œæ¶ˆè€—ç”¨æˆ·ç”µé‡ã€‚é…ç½®åï¼Œæ–­ç½‘å³ä¼‘çœ ã€‚</li>
<li><strong>ä½“éªŒä¼˜åŒ–</strong>ï¼šå¦‚æœæ²¡é…ç½®ï¼Œç½‘ç»œæ¢å¤åï¼ŒApp ä¸ä¼šæœ‰ååº”ï¼Œç”¨æˆ·å¿…é¡»æ‰‹åŠ¨ä¸‹æ‹‰åˆ·æ–°ã€‚é…ç½®åï¼Œ<strong>ä¿¡å·æ¢å¤çš„ç¬é—´ï¼Œæ•°æ®è‡ªåŠ¨åŠ è½½æˆåŠŸ</strong>ï¼ˆâ€œç”µæ¢¯æ•ˆåº”â€ï¼‰ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-3">äºŒã€ ç”Ÿäº§ç¯å¢ƒå®Œæ•´é…ç½® (<code>app/_layout.tsx</code>)</h2>
<p>è¿™æ˜¯èåˆäº†ä¸Šè¿°åŸç†çš„å®Œæ•´é…ç½®ä»£ç ã€‚è¯·ç¡®ä¿ä½ å·²å®‰è£…äº† <code>@react-native-community/netinfo</code>ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">import</span> { useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppState</span>, <span class="hljs-title class_">AppStateStatus</span>, <span class="hljs-title class_">Platform</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Slot</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'expo-router'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">NetInfo</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@react-native-community/netinfo'</span>;
<span class="hljs-keyword">import</span> { 
  <span class="hljs-title class_">QueryClient</span>, 
  <span class="hljs-title class_">QueryClientProvider</span>, 
  focusManager, 
  onlineManager 
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@tanstack/react-query'</span>;

<span class="hljs-comment">// =================================================================</span>
<span class="hljs-comment">// 1. é…ç½®ç½‘ç»œç›‘å¬ (ç»™ App è£…ä¸Šâ€œè€³æœµâ€)</span>
<span class="hljs-comment">// =================================================================</span>
onlineManager.<span class="hljs-title function_">setEventListener</span>(<span class="hljs-function">(<span class="hljs-params">setOnline</span>) =&gt;</span> {
  <span class="hljs-comment">// setOnline æ˜¯ Query ä¼ è¿›æ¥çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥æ¥æ”¶ç½‘ç»œçŠ¶æ€</span>
  <span class="hljs-comment">// æˆ‘ä»¬ä½¿ç”¨ NetInfo æ¥ç›‘å¬çœŸå®çš„ç½‘ç»œå˜åŒ–</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">NetInfo</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> {
    <span class="hljs-comment">// state.isConnected å¯èƒ½ä¸º nullï¼Œç”¨ !! å¼ºè½¬ä¸º boolean</span>
    <span class="hljs-comment">// å½“è¿™é‡Œè°ƒç”¨ setOnline(true) æ—¶ï¼ŒQuery ä¼šç«‹å³é‡è¯•åˆšæ‰å¤±è´¥çš„è¯·æ±‚</span>
    <span class="hljs-title function_">setOnline</span>(!!state.<span class="hljs-property">isConnected</span>);
  });
});

<span class="hljs-comment">// =================================================================</span>
<span class="hljs-comment">// 2. é…ç½® App çŠ¶æ€ç›‘å¬ (ç»™ App è£…ä¸Šâ€œçœ¼ç›â€)</span>
<span class="hljs-comment">// =================================================================</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">onAppStateChange</span>(<span class="hljs-params">status: AppStateStatus</span>) {
  <span class="hljs-comment">// Web æµè§ˆå™¨ä¼šè‡ªåŠ¨å¤„ç†çª—å£èšç„¦ï¼Œåªæœ‰åŸç”Ÿ App éœ€è¦æ‰‹åŠ¨å¤„ç†</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Platform</span>.<span class="hljs-property">OS</span> !== <span class="hljs-string">'web'</span>) {
    <span class="hljs-comment">// æ ¸å¿ƒé€»è¾‘ï¼š</span>
    <span class="hljs-comment">// å½“ AppState å˜ä¸º 'active' (å‰å°) æ—¶</span>
    <span class="hljs-comment">// æˆ‘ä»¬æ‰‹åŠ¨å‘Šè¯‰ Query çš„ focusManagerï¼šâ€œç”¨æˆ·ç°åœ¨èšç„¦åœ¨ App ä¸Šäº†â€</span>
    <span class="hljs-comment">// Query æ”¶åˆ°ä¿¡å·åï¼Œä¼šæ£€æŸ¥é¡µé¢æ•°æ®æ˜¯å¦è¿‡æœŸ (stale)ï¼Œå¦‚æœè¿‡æœŸåˆ™è‡ªåŠ¨ Refetch</span>
    focusManager.<span class="hljs-title function_">setFocused</span>(status === <span class="hljs-string">'active'</span>);
  }
}

<span class="hljs-comment">// =================================================================</span>
<span class="hljs-comment">// 3. åˆå§‹åŒ– QueryClient (é…ç½®å…¨å±€ç­–ç•¥)</span>
<span class="hljs-comment">// =================================================================</span>
<span class="hljs-keyword">const</span> queryClient = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryClient</span>({
  <span class="hljs-attr">defaultOptions</span>: {
    <span class="hljs-attr">queries</span>: {
      <span class="hljs-attr">retry</span>: <span class="hljs-number">2</span>,             <span class="hljs-comment">// å¤±è´¥åè‡ªåŠ¨é‡è¯• 2 æ¬¡</span>
      <span class="hljs-attr">staleTime</span>: <span class="hljs-number">1000</span> * <span class="hljs-number">60</span>, <span class="hljs-comment">// æ•°æ® 1 åˆ†é’Ÿå†…ç®—â€œæ–°é²œâ€ï¼Œåˆ‡å›æ¥ä¹Ÿä¸åˆ·æ–°</span>
                            <span class="hljs-comment">// è¶…è¿‡ 1 åˆ†é’Ÿååˆ‡å›æ¥ï¼Œä¼šè§¦å‘è‡ªåŠ¨åˆ·æ–°</span>
    },
  },
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RootLayout</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// æ³¨å†Œ AppState ç›‘å¬å™¨</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// å¼€å§‹ç›‘å¬ç³»ç»ŸçŠ¶æ€å˜åŒ–</span>
    <span class="hljs-keyword">const</span> subscription = <span class="hljs-title class_">AppState</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'change'</span>, onAppStateChange);
    
    <span class="hljs-comment">// ç»„ä»¶å¸è½½æ—¶å–æ¶ˆç›‘å¬ï¼Œè¿™æ˜¯é˜²æ­¢å†…å­˜æ³„æ¼çš„æ ‡å‡†åšæ³•</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> subscription.<span class="hljs-title function_">remove</span>();
  }, []);

  <span class="hljs-keyword">return</span> (
    
      {<span class="hljs-comment">/* Slot æ˜¯ Expo Router çš„é¡µé¢å…¥å£ */</span>}
      
    
  );
}
</code></pre>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€ æ€»ç»“</h2>
<p>åœ¨ React Native ä¸­ä½¿ç”¨ TanStack Queryï¼Œ<strong>90% çš„äººåªåšäº†â€œå®‰è£…â€ï¼Œè€Œå¿½ç•¥äº†â€œé…ç½®â€</strong> ã€‚</p>
<p>å¦‚æœä¸é…ç½®è¿™ä¸¤ä¸ªç®¡ç†å™¨ï¼Œä½ çš„ App å°±å¤±å»äº†çµé­‚ï¼š</p>
<ol>
<li><strong><code>AppStateStatus</code> + <code>focusManager</code></strong>ï¼šè®© App çŸ¥é“â€œ<strong>æˆ‘é†’äº†</strong>â€ï¼Œä»è€Œå®ç°å¾®ä¿¡åˆ‡å›æ¥çš„è‡ªåŠ¨åˆ·æ–°ã€‚</li>
<li><strong><code>setOnline</code> + <code>onlineManager</code></strong>ï¼šè®© App çŸ¥é“â€œ<strong>æˆ‘æœ‰ç½‘äº†</strong>â€ï¼Œä»è€Œå®ç°èµ°å‡ºç”µæ¢¯åçš„è‡ªåŠ¨é‡è¿ã€‚</li>
</ol>
<p>åªè¦åœ¨ <code>_layout.tsx</code> ä¸­å†™å¥½é…ç½®ä»£ç ï¼Œä½ åº”ç”¨é‡Œæ‰€æœ‰çš„ <code>useQuery</code> å°±éƒ½è‡ªåŠ¨æ‹¥æœ‰äº†è¿™äº›åŸç”Ÿçº§åˆ«çš„æ„ŸçŸ¥èƒ½åŠ›ã€‚è¿™å°±æ˜¯ä»â€œèƒ½ç”¨â€åˆ°â€œå¥½ç”¨â€çš„å…³é”®è·¨è¶Šã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»ç¾å›¢å…¨æ ˆåŒ–çœ‹ AI å†²å‡»ï¼šå‰ç«¯è½¬å…¨æ ˆï¼Œæ˜¯è‡ªæ•‘è¿˜æ˜¯å¿…ç„¶ ğŸ¤”ğŸ¤”ğŸ¤”]]></title>    <link>https://juejin.cn/post/7581999251368460340</link>    <guid>https://juejin.cn/post/7581999251368460340</guid>    <pubDate>2025-12-10T14:30:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581999251368460340" data-draft-id="7582036070159745024" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»ç¾å›¢å…¨æ ˆåŒ–çœ‹ AI å†²å‡»ï¼šå‰ç«¯è½¬å…¨æ ˆï¼Œæ˜¯è‡ªæ•‘è¿˜æ˜¯å¿…ç„¶ ğŸ¤”ğŸ¤”ğŸ¤”"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-10T14:30:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Moment"/> <meta itemprop="url" content="https://juejin.cn/user/3782764966460398"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»ç¾å›¢å…¨æ ˆåŒ–çœ‹ AI å†²å‡»ï¼šå‰ç«¯è½¬å…¨æ ˆï¼Œæ˜¯è‡ªæ•‘è¿˜æ˜¯å¿…ç„¶ ğŸ¤”ğŸ¤”ğŸ¤”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3782764966460398/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Moment
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T14:30:11.000Z" title="Wed Dec 10 2025 14:30:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><blockquote>
<p>æˆ‘æ­£åœ¨å¼€å‘ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxun082%2FDocFlow" target="_blank" title="https://github.com/xun082/DocFlow" ref="nofollow noopener noreferrer">DocFlow</a>ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®Œæ•´çš„ AI å…¨æ ˆååŒæ–‡æ¡£å¹³å°ã€‚è¯¥é¡¹ç›®èåˆäº†å¤šä¸ªæŠ€æœ¯æ ˆï¼ŒåŒ…æ‹¬åŸºäº <code>Tiptap</code> çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ã€<code>NestJs</code> åç«¯æœåŠ¡ã€<code>AI</code> é›†æˆåŠŸèƒ½å’Œå®æ—¶åä½œã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ç§¯ç´¯äº†ä¸°å¯Œçš„å®æˆ˜ç»éªŒï¼Œæ¶µç›–äº† <code>Tiptap</code> çš„æ·±åº¦å®šåˆ¶ã€æ€§èƒ½ä¼˜åŒ–å’Œåä½œåŠŸèƒ½çš„å®ç°ç­‰æ ¸å¿ƒéš¾ç‚¹ã€‚</p>
</blockquote>
<p>å¦‚æœä½ å¯¹ AI å…¨æ ˆå¼€å‘ã€Tiptap å¯Œæ–‡æœ¬ç¼–è¾‘å™¨å®šåˆ¶æˆ– DocFlow é¡¹ç›®çš„å®Œæ•´æŠ€æœ¯æ–¹æ¡ˆæ„Ÿå…´è¶£ï¼Œæ¬¢è¿åŠ æˆ‘å¾®ä¿¡ <code>yunmz777</code> è¿›è¡Œç§èŠå’¨è¯¢ï¼Œè·å–è¯¦ç»†çš„æŠ€æœ¯åˆ†äº«å’Œæœ€ä½³å®è·µã€‚</p>
<p>æ® <code>å¤§å‚æ—¥æŠ¥</code> ç§°ï¼Œç¾å›¢å±¥çº¦å›¢é˜Ÿè¿‘æœŸæ­£åœ¨æ¨è¡Œ"å…¨æ ˆåŒ–"è½¬å‹ã€‚æ®æ‚‰ï¼Œç»ˆç«¯ç»„çš„éƒ¨åˆ†å‰ç«¯åŒå­¦åœ¨ 11 æœˆæœ«å·¦å³è½¬åˆ°äº†åç«¯ç»„åšå…¨æ ˆï¼ˆå‰åç«¯ä»£ç ä¸€èµ·å†™ï¼‰ï¼Œä¸»è¦æ˜¯ agent ç›¸å…³é¡¹ç›®ã€‚å†…éƒ¨æ‰“å¬äº†ä¸€ä¸‹ï¼Œå›¢å­ç›®å‰å…¨æ ˆå¼€å‘è¿˜ç›¸å¯¹é è°±ï¼Œä¸Šçº¿æŠŠæ§æ¯”è¾ƒä¸¥æ ¼ã€‚</p>
<p>è¿™ä¸€æ¶ˆæ¯åœ¨æŠ€æœ¯åœˆå¼•èµ·äº†å¹¿æ³›å…³æ³¨ï¼Œä¹Ÿåæ˜ äº† AI æ—¶ä»£ä¸‹å‰ç«¯å·¥ç¨‹å¸ˆå‘å…¨æ ˆè½¬å‹çš„å¿…ç„¶è¶‹åŠ¿ã€‚ä½†æ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦æ·±å…¥æ€è€ƒï¼šAI åˆ°åº•ç»™å‰ç«¯å¸¦æ¥äº†ä»€ä¹ˆå†²å‡»ï¼Ÿä¸ºä»€ä¹ˆå‰ç«¯è½¬å…¨æ ˆæˆä¸ºäº†å¿…ç„¶é€‰æ‹©ï¼Ÿ</p>
<p>æœ€è¿‘ï¼Œå‰ç«¯åœˆé‡Œä¸æ–­æœ‰"å‰ç«¯å·²æ­»"çš„è¯è¯­æµå‡ºã€‚æœ‰äººè¯´ AI å·¥å…·ä¼šæ›¿ä»£å‰ç«¯å¼€å‘ï¼Œæœ‰äººè¯´ä½ä»£ç å¹³å°ä¼šè®©å‰ç«¯å¤±ä¸šï¼Œè¿˜æœ‰äººè¯´å‰ç«¯å·¥ç¨‹å¸ˆçš„ä»·å€¼æ­£åœ¨å¿«é€Ÿä¸‹é™ã€‚è¿™äº›å£°éŸ³è™½ç„¶æœ‰äº›æç«¯ï¼Œä½†ç¡®å®åæ˜ äº† AI æ—¶ä»£å‰ç«¯é¢ä¸´çš„çœŸå®æŒ‘æˆ˜ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€AI å¯¹å‰ç«¯çš„å†²å‡»ï¼šæŒ‘æˆ˜ä¸æœºé‡å¹¶å­˜</h2>
<h3 data-id="heading-1">1. ä»£ç ç”Ÿæˆèƒ½åŠ›çš„å†²å‡»</h3>
<p>å†²å‡»ç‚¹ï¼š</p>
<ul>
<li>ä½å¤æ‚åº¦é¡µé¢ç”Ÿæˆï¼šAI å·¥å…·ï¼ˆå¦‚ Claude Codeã€Cursorï¼‰å·²ç»èƒ½å¤Ÿå¿«é€Ÿç”Ÿæˆå¸¸è§çš„ UI ç»„ä»¶ã€é¡µé¢å¸ƒå±€</li>
<li>é‡å¤æ€§å·¥ä½œè¢«æ›¿ä»£ï¼šè¡¨å•ã€åˆ—è¡¨ã€è¯¦æƒ…é¡µç­‰æ ‡å‡†åŒ–é¡µé¢ï¼ŒAI ç”Ÿæˆæ•ˆç‡è¿œè¶…äººå·¥</li>
<li>å­¦ä¹ é—¨æ§›é™ä½ï¼šæ–°æ‰‹å€ŸåŠ© AI ä¹Ÿèƒ½å¿«é€Ÿäº§å‡ºåŸºç¡€ä»£ç ï¼Œå‰ç«¯"å…¥é—¨çº¢åˆ©"æ¶ˆå¤±</li>
</ul>
<p>å½±å“ï¼š
ä¼ ç»Ÿå‰ç«¯å¼€å‘ä¸­ï¼Œå¤§é‡æ—¶é—´èŠ±åœ¨"å†™é¡µé¢"ä¸Šã€‚AI çš„å‡ºç°ï¼Œè®©è¿™éƒ¨åˆ†å·¥ä½œå˜å¾—æå…¶é«˜æ•ˆï¼Œç”šè‡³å¯ä»¥è¯´ï¼Œåªä¼šå†™é¡µé¢çš„å‰ç«¯å·¥ç¨‹å¸ˆï¼Œä»·å€¼æ­£åœ¨å¿«é€Ÿä¸‹é™ã€‚è¿™ä¹Ÿæ­£æ˜¯"å‰ç«¯å·²æ­»"è®ºè°ƒçš„ä¸»è¦ä¾æ®ä¹‹ä¸€ã€‚</p>
<h3 data-id="heading-2">2. ä¸šåŠ¡é€»è¾‘å‰ç§»çš„å†²å‡»</h3>
<p>å†²å‡»ç‚¹ï¼š</p>
<ul>
<li>AI Agent é¡¹ç›®æ¿€å¢ï¼šå¦‚ç¾å›¢æ¡ˆä¾‹ä¸­çš„ agent ç›¸å…³é¡¹ç›®ï¼Œéœ€è¦å‰åç«¯ä¸€ä½“åŒ–å¼€å‘</li>
<li>å®æ—¶äº¤äº’éœ€æ±‚ï¼šAI åº”ç”¨çš„æµå¼å“åº”ã€å®æ—¶å¯¹è¯ï¼Œè¦æ±‚å‰åç«¯ç´§å¯†é…åˆ</li>
<li>æ•°æ®æµè½¬å¤æ‚åŒ–ï¼šAI æ¨¡å‹è°ƒç”¨ã€æ•°æ®å¤„ç†ã€çŠ¶æ€ç®¡ç†ï¼Œéƒ½éœ€è¦å…¨æ ˆè§†è§’</li>
</ul>
<p>å½±å“ï¼š
çº¯å‰ç«¯å·¥ç¨‹å¸ˆåœ¨ AI é¡¹ç›®ä¸­å¾€å¾€åªèƒ½è´Ÿè´£ UI å±‚ï¼Œæ— æ³•æ·±å…¥ä¸šåŠ¡é€»è¾‘ã€‚è€Œ AI é¡¹ç›®çš„æ ¸å¿ƒä»·å€¼åœ¨äºä¸šåŠ¡é€»è¾‘å’Œæ•°æ®å¤„ç†ï¼Œè¿™æ°æ°æ˜¯åç«¯èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-3">3. æŠ€æœ¯æ ˆè¾¹ç•Œçš„æ¨¡ç³Š</h3>
<p>å†²å‡»ç‚¹ï¼š</p>
<ul>
<li>å‰åç«¯ä¸€ä½“åŒ–è¶‹åŠ¿ï¼šNext.jsã€Remix ç­‰å…¨æ ˆæ¡†æ¶å…´èµ·ï¼Œå‰åç«¯ä»£ç åŒä»“åº“</li>
<li>Serverless æ¶æ„ï¼šè¾¹ç¼˜å‡½æ•°ã€API è·¯ç”±ï¼Œå‰ç«¯å¼€å‘è€…éœ€è¦ç†è§£åç«¯é€»è¾‘</li>
<li>AI æœåŠ¡é›†æˆï¼šè°ƒç”¨ AI APIã€å¤„ç†æµå¼æ•°æ®ã€ç®¡ç†çŠ¶æ€ï¼Œéƒ½éœ€è¦åç«¯çŸ¥è¯†</li>
</ul>
<p>å½±å“ï¼š
å‰ç«¯å’Œåç«¯çš„è¾¹ç•Œæ­£åœ¨æ¶ˆå¤±ã€‚åªä¼šå‰ç«¯çš„å‰ç«¯å·¥ç¨‹å¸ˆï¼Œåœ¨ AI æ—¶ä»£ä¼šå‘ç°è‡ªå·±"å¤Ÿä¸ç€"æ ¸å¿ƒä¸šåŠ¡ã€‚</p>
<h3 data-id="heading-4">4. èŒä¸šå‘å±•çš„å¤©èŠ±æ¿</h3>
<p>å†²å‡»ç‚¹ï¼š</p>
<ul>
<li>æŠ€æœ¯æ·±åº¦è¦æ±‚ï¼šAI é¡¹ç›®éœ€è¦ç†è§£æ•°æ®æµã€ç®—æ³•é€»è¾‘ã€ç³»ç»Ÿæ¶æ„</li>
<li>ä¸šåŠ¡ç†è§£èƒ½åŠ›ï¼šå…¨æ ˆå¼€å‘è€…èƒ½æ›´å¥½åœ°ç†è§£ä¸šåŠ¡å…¨è²Œï¼Œåšå‡ºæŠ€æœ¯å†³ç­–</li>
<li>å›¢é˜Ÿåä½œæ•ˆç‡ï¼šå…¨æ ˆå¼€å‘è€…å‡å°‘å‰åç«¯æ²Ÿé€šæˆæœ¬ï¼Œæå‡äº¤ä»˜æ•ˆç‡</li>
</ul>
<p>å½±å“ï¼š
åœ¨ AI æ—¶ä»£ï¼Œåªä¼šå‰ç«¯çš„å‰ç«¯å·¥ç¨‹å¸ˆï¼ŒèŒä¸šå¤©èŠ±æ¿æ˜æ˜¾ã€‚è€Œå…¨æ ˆå¼€å‘è€…èƒ½å¤Ÿï¼š</p>
<ul>
<li>ç‹¬ç«‹è´Ÿè´£å®Œæ•´åŠŸèƒ½æ¨¡å—</li>
<li>æ·±å…¥ç†è§£ä¸šåŠ¡é€»è¾‘</li>
<li>åœ¨æŠ€æœ¯å†³ç­–ä¸­å‘æŒ¥æ›´å¤§ä½œç”¨</li>
</ul>
<h2 data-id="heading-5">äºŒã€ä¸ºä»€ä¹ˆå‰ç«¯è½¬å…¨æ ˆæ˜¯å¿…ç„¶é€‰æ‹©ï¼Ÿ</h2>
<h3 data-id="heading-6">1. AI é¡¹ç›®çš„æœ¬è´¨éœ€æ±‚</h3>
<p>æ­£å¦‚ç¾å›¢æ¡ˆä¾‹æ‰€ç¤ºï¼ŒAI é¡¹ç›®ï¼ˆç‰¹åˆ«æ˜¯ Agent é¡¹ç›®ï¼‰çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li>å‰åç«¯ä»£ç ä¸€èµ·å†™ï¼šä¸šåŠ¡é€»è¾‘å¤æ‚ï¼Œéœ€è¦å‰åç«¯ååŒ</li>
<li>æ•°æ®æµå¤„ç†ï¼šAI æ¨¡å‹çš„è¾“å…¥è¾“å‡ºã€æµå¼å“åº”å¤„ç†</li>
<li>çŠ¶æ€ç®¡ç†å¤æ‚ï¼šå¯¹è¯çŠ¶æ€ã€ä¸Šä¸‹æ–‡ç®¡ç†ã€é”™è¯¯å¤„ç†</li>
</ul>
<p>è¿™äº›éœ€æ±‚ï¼Œçº¯å‰ç«¯å·¥ç¨‹å¸ˆæ— æ³•ç‹¬ç«‹å®Œæˆï¼Œå¿…é¡»æŒæ¡åç«¯èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-7">2. æŠ€æœ¯å‘å±•çš„è¶‹åŠ¿</h3>
<ul>
<li>å…¨æ ˆæ¡†æ¶æ™®åŠï¼šNext.jsã€Remixã€SvelteKit ç­‰ï¼Œéƒ½åœ¨æ¨åŠ¨å…¨æ ˆå¼€å‘</li>
<li>è¾¹ç¼˜è®¡ç®—å…´èµ·ï¼šCloudflare Workersã€Vercel Edge Functionsï¼Œå‰ç«¯éœ€è¦å†™åç«¯é€»è¾‘</li>
<li>å¾®å‰ç«¯ + å¾®æœåŠ¡ï¼šå‰åç«¯ä¸€ä½“åŒ–éƒ¨ç½²ï¼Œé™ä½ç³»ç»Ÿå¤æ‚åº¦</li>
</ul>
<h3 data-id="heading-8">3. å¸‚åœºéœ€æ±‚çš„è½¬å˜</h3>
<ul>
<li>æ‹›è˜è¦æ±‚å˜åŒ–ï¼šè¶Šæ¥è¶Šå¤šçš„å²—ä½è¦æ±‚"å…¨æ ˆèƒ½åŠ›"</li>
<li>é¡¹ç›®äº¤ä»˜æ•ˆç‡ï¼šå…¨æ ˆå¼€å‘è€…èƒ½ç‹¬ç«‹äº¤ä»˜åŠŸèƒ½ï¼Œå‡å°‘æ²Ÿé€šæˆæœ¬</li>
<li>æŠ€æœ¯å†³ç­–èƒ½åŠ›ï¼šå…¨æ ˆå¼€å‘è€…èƒ½æ›´å¥½åœ°è¯„ä¼°æŠ€æœ¯æ–¹æ¡ˆ</li>
</ul>
<h2 data-id="heading-9">ä¸‰ã€åç«¯æŠ€æœ¯æ ˆçš„é€‰æ‹©ï¼šNode.jsã€Pythonã€Go</h2>
<p>å¯¹äºå‰ç«¯è½¬å…¨æ ˆï¼Œåç«¯æŠ€æœ¯æ ˆçš„é€‰æ‹©è‡³å…³é‡è¦ã€‚ä¸åŒæŠ€æœ¯æ ˆæœ‰ä¸åŒä¼˜åŠ¿ï¼Œéœ€è¦æ ¹æ®é¡¹ç›®éœ€æ±‚é€‰æ‹©ã€‚</p>
<h3 data-id="heading-10">1. Node.js + Nest.jsï¼šå‰ç«¯è½¬å…¨æ ˆçš„æœ€ä½³èµ·ç‚¹</h3>
<p>ä¼˜åŠ¿ï¼š</p>
<ul>
<li>é›¶è¯­è¨€åˆ‡æ¢ï¼šJavaScript/TypeScript å‰åç«¯é€šç”¨</li>
<li>ç”Ÿæ€ç»Ÿä¸€ï¼šnpm åŒ…å‰åç«¯å…±äº«ï¼Œå·¥å…·é“¾ä¸€è‡´</li>
<li>å­¦ä¹ æˆæœ¬ä½ï¼šåˆ©ç”¨ç°æœ‰æŠ€èƒ½ï¼Œå¿«é€Ÿä¸Šæ‰‹</li>
<li>AI é›†æˆå‹å¥½ï¼šLangChain.jsã€OpenAI SDK ç­‰å®Œå–„æ”¯æŒ</li>
</ul>
<p>é€‚ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>Web åº”ç”¨åç«¯</li>
<li>å®æ—¶åº”ç”¨ï¼ˆWebSocketã€SSEï¼‰</li>
<li>å¾®æœåŠ¡æ¶æ„</li>
<li>AI Agent é¡¹ç›®ï¼ˆå¦‚ç¾å›¢æ¡ˆä¾‹ï¼‰</li>
</ul>
<p>å­¦ä¹ è·¯å¾„ï¼š</p>
<ol>
<li>Node.js åŸºç¡€ï¼ˆäº‹ä»¶å¾ªç¯ã€æ¨¡å—ç³»ç»Ÿï¼‰</li>
<li>Nest.js æ¡†æ¶ï¼ˆæ¨¡å—åŒ–ã€ä¾èµ–æ³¨å…¥ï¼‰</li>
<li>æ•°æ®åº“é›†æˆï¼ˆTypeORMã€Prismaï¼‰</li>
<li>AI æœåŠ¡é›†æˆï¼ˆOpenAIã€æµå¼å¤„ç†ï¼‰</li>
</ol>
<h3 data-id="heading-11">2. Python + FastAPIï¼šAI é¡¹ç›®çš„é¦–é€‰</h3>
<p>ä¼˜åŠ¿ï¼š</p>
<ul>
<li>AI ç”Ÿæ€æœ€å®Œå–„ï¼šOpenAIã€LangChainã€LlamaIndex ç­‰åŸç”Ÿæ”¯æŒ</li>
<li>æ•°æ®ç§‘å­¦èƒ½åŠ›ï¼šNumPyã€Pandas ç­‰æ•°æ®å¤„ç†åº“</li>
<li>å¿«é€Ÿå¼€å‘ï¼šè¯­æ³•ç®€æ´ï¼Œå¼€å‘æ•ˆç‡é«˜</li>
<li>æ¨¡å‹éƒ¨ç½²ï¼šTensorFlowã€PyTorch ç­‰æ¨¡å‹æ¡†æ¶</li>
</ul>
<p>é€‚ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>AI/ML é¡¹ç›®</li>
<li>æ•°æ®åˆ†æåç«¯</li>
<li>ç§‘å­¦è®¡ç®—æœåŠ¡</li>
<li>Agent é¡¹ç›®ï¼ˆéœ€è¦å¤æ‚ AI é€»è¾‘ï¼‰</li>
</ul>
<p>å­¦ä¹ è·¯å¾„ï¼š</p>
<ol>
<li>Python åŸºç¡€ï¼ˆè¯­æ³•ã€æ•°æ®ç»“æ„ï¼‰</li>
<li>FastAPI æ¡†æ¶ï¼ˆå¼‚æ­¥ã€ç±»å‹æç¤ºï¼‰</li>
<li>AI åº“é›†æˆï¼ˆOpenAIã€LangChainï¼‰</li>
<li>æ•°æ®å¤„ç†ï¼ˆPandasã€NumPyï¼‰</li>
</ol>
<h3 data-id="heading-12">3. Goï¼šé«˜æ€§èƒ½åœºæ™¯çš„é€‰æ‹©</h3>
<p>ä¼˜åŠ¿ï¼š</p>
<ul>
<li>æ€§èƒ½ä¼˜ç§€ï¼šç¼–è¯‘å‹è¯­è¨€ï¼Œæ‰§è¡Œæ•ˆç‡é«˜</li>
<li>å¹¶å‘èƒ½åŠ›å¼ºï¼šGoroutine å¹¶å‘æ¨¡å‹</li>
<li>éƒ¨ç½²ç®€å•ï¼šå•æ–‡ä»¶éƒ¨ç½²ï¼Œèµ„æºå ç”¨å°‘</li>
<li>äº‘åŸç”Ÿå‹å¥½ï¼šDockerã€Kubernetes ç”Ÿæ€å®Œå–„</li>
</ul>
<p>é€‚ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>é«˜å¹¶å‘æœåŠ¡</li>
<li>å¾®æœåŠ¡æ¶æ„</li>
<li>äº‘åŸç”Ÿåº”ç”¨</li>
<li>æ€§èƒ½æ•æ„Ÿåœºæ™¯</li>
</ul>
<p>å­¦ä¹ è·¯å¾„ï¼š</p>
<ol>
<li>Go åŸºç¡€ï¼ˆè¯­æ³•ã€å¹¶å‘æ¨¡å‹ï¼‰</li>
<li>Web æ¡†æ¶ï¼ˆGinã€Echoï¼‰</li>
<li>æ•°æ®åº“æ“ä½œï¼ˆGORMï¼‰</li>
<li>å¾®æœåŠ¡å¼€å‘</li>
</ol>
<h3 data-id="heading-13">4. æŠ€æœ¯æ ˆé€‰æ‹©å»ºè®®</h3>
<p>å¯¹äºå‰ç«¯è½¬å…¨æ ˆçš„å¼€å‘è€…ï¼š</p>
<ol>
<li>
<p>é¦–é€‰ Node.jsï¼šå¦‚æœç›®æ ‡æ˜¯å¿«é€Ÿè½¬å…¨æ ˆï¼ŒNode.js æ˜¯æœ€ä½³é€‰æ‹©</p>
<ul>
<li>å­¦ä¹ æˆæœ¬æœ€ä½</li>
<li>å‰åç«¯ä»£ç å¤ç”¨</li>
<li>é€‚åˆå¤§å¤šæ•° Web åº”ç”¨</li>
</ul>
</li>
<li>
<p>è€ƒè™‘ Pythonï¼šå¦‚æœä¸“æ³¨ AI é¡¹ç›®</p>
<ul>
<li>AI ç”Ÿæ€æœ€å®Œå–„</li>
<li>é€‚åˆå¤æ‚ AI é€»è¾‘</li>
<li>æ•°æ®ç§‘å­¦èƒ½åŠ›</li>
</ul>
</li>
<li>
<p>å­¦ä¹  Goï¼šå¦‚æœè¿½æ±‚æ€§èƒ½</p>
<ul>
<li>é«˜å¹¶å‘åœºæ™¯</li>
<li>å¾®æœåŠ¡æ¶æ„</li>
<li>äº‘åŸç”Ÿåº”ç”¨</li>
</ul>
</li>
</ol>
<p>å»ºè®®ï¼š</p>
<ul>
<li>ç¬¬ä¸€é˜¶æ®µï¼šé€‰æ‹© Node.jsï¼Œå¿«é€Ÿè½¬å…¨æ ˆ</li>
<li>ç¬¬äºŒé˜¶æ®µï¼šæ ¹æ®é¡¹ç›®éœ€æ±‚ï¼Œå­¦ä¹  Python æˆ– Go</li>
<li>é•¿æœŸç›®æ ‡ï¼šæŒæ¡å¤šç§æŠ€æœ¯æ ˆï¼Œæ ¹æ®åœºæ™¯é€‰æ‹©</li>
</ul>
<h2 data-id="heading-14">å››ã€æ€»ç»“</h2>
<p>AI æ—¶ä»£çš„åˆ°æ¥ï¼Œç»™å‰ç«¯å¸¦æ¥äº†æ·±åˆ»å†²å‡»ï¼š</p>
<ol>
<li>ä»£ç ç”Ÿæˆèƒ½åŠ›ï¼šä½å¤æ‚åº¦é¡µé¢ç”Ÿæˆè¢« AI æ›¿ä»£</li>
<li>ä¸šåŠ¡é€»è¾‘å‰ç§»ï¼šAI é¡¹ç›®éœ€è¦å‰åç«¯ä¸€ä½“åŒ–</li>
<li>æŠ€æœ¯è¾¹ç•Œæ¨¡ç³Šï¼šå‰åç«¯è¾¹ç•Œæ­£åœ¨æ¶ˆå¤±</li>
<li>èŒä¸šå¤©èŠ±æ¿ï¼šåªä¼šå‰ç«¯çš„å‰ç«¯å·¥ç¨‹å¸ˆï¼Œå‘å±•å—é™</li>
</ol>
<p>å‰ç«¯è½¬å…¨æ ˆï¼Œæ˜¯ AI æ—¶ä»£çš„å¿…ç„¶é€‰æ‹©ã€‚</p>
<p>å¯¹äºæŠ€æœ¯æ ˆé€‰æ‹©ï¼š</p>
<ul>
<li>Node.jsï¼šå‰ç«¯è½¬å…¨æ ˆçš„æœ€ä½³èµ·ç‚¹ï¼Œå­¦ä¹ æˆæœ¬ä½</li>
<li>Pythonï¼šAI é¡¹ç›®çš„é¦–é€‰ï¼Œç”Ÿæ€å®Œå–„</li>
<li>Goï¼šé«˜æ€§èƒ½åœºæ™¯çš„é€‰æ‹©ï¼Œäº‘åŸç”Ÿå‹å¥½</li>
</ul>
<p>æ­£å¦‚ç¾å›¢çš„å…¨æ ˆåŒ–å®è·µæ‰€ç¤ºï¼Œå…¨æ ˆå¼€å‘è¿˜ç›¸å¯¹é è°±ï¼Œå…³é”®åœ¨äºï¼š</p>
<ul>
<li>é€‰æ‹©åˆé€‚çš„æŠ€æœ¯æ ˆ</li>
<li>å»ºç«‹ä¸¥æ ¼çš„å¼€å‘æµç¨‹</li>
<li>æŒç»­å­¦ä¹ å’Œå®è·µ</li>
</ul>
<p>å¯¹äºå‰ç«¯å¼€å‘è€…æ¥è¯´ï¼ŒAI æ—¶ä»£æ—¢æ˜¯æŒ‘æˆ˜ï¼Œä¹Ÿæ˜¯æœºé‡ã€‚è½¬å…¨æ ˆï¼Œä¸ä»…èƒ½åº”å¯¹ AI å†²å‡»ï¼Œæ›´èƒ½æ‰“å¼€èŒä¸šå‘å±•çš„æ–°ç©ºé—´ã€‚é‚£äº›"å‰ç«¯å·²æ­»"çš„å£°éŸ³ï¼Œå…¶å®æ˜¯åœ¨æé†’æˆ‘ä»¬ï¼šåªæœ‰ä¸æ–­è¿›åŒ–ï¼Œæ‰èƒ½åœ¨è¿™ä¸ªæ—¶ä»£ç«‹è¶³ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äº²å†å¤–ä¼è£å‘˜ï¼šä¸Šåˆè¿˜åœ¨å†™ä»£ç ï¼Œä¸‹åˆå·¥ä½å°±ç©ºäº†]]></title>    <link>https://juejin.cn/post/7582048028393144370</link>    <guid>https://juejin.cn/post/7582048028393144370</guid>    <pubDate>2025-12-10T15:03:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582048028393144370" data-draft-id="7581893894176473098" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äº²å†å¤–ä¼è£å‘˜ï¼šä¸Šåˆè¿˜åœ¨å†™ä»£ç ï¼Œä¸‹åˆå·¥ä½å°±ç©ºäº†"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜,é¢è¯•,æ±‚èŒ"/> <meta itemprop="datePublished" content="2025-12-10T15:03:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Konata_9"/> <meta itemprop="url" content="https://juejin.cn/user/888061123629997"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äº²å†å¤–ä¼è£å‘˜ï¼šä¸Šåˆè¿˜åœ¨å†™ä»£ç ï¼Œä¸‹åˆå·¥ä½å°±ç©ºäº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/888061123629997/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Konata_9
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T15:03:33.000Z" title="Wed Dec 10 2025 15:03:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/880839605848438f9804473043fa7eab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS29uYXRhXzk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765983813&amp;x-signature=reIjBJw%2BHfgqkvnA4V3NXxxTRdE%3D" alt="jimeng-2025-12-09-9499-ç°ä»£åŠå…¬å®¤å†…éƒ¨ï¼Œå†·è‰²è°ƒï¼Œè“è‰²å’Œç°è‰²ä¸ºä¸»ï¼Œç©ºè¡è¡çš„å·¥ä½ï¼Œå‡ å°äº®ç€çš„æ˜¾ç¤ºå™¨ï¼Œçª—å¤–æ˜¯é˜´..._cleanup.png" loading="lazy"/></p>
<h2 data-id="heading-0">å¼•å­ï¼šä¸å†æ˜¯â€œä¸»åŠ¨çš„é€‰æ‹©â€</h2>
<p>è®°å¾— 2018 å¹´çš„æ—¶å€™ï¼Œå¹´è½»ä¸äº’è”ç½‘çš„å…´èµ·ï¼Œåªè¦ç®€å†æŒ‚åœ¨æ±‚èŒ APP ä¸Šï¼Œç«‹é©¬å°±ä¼šæœ‰çŒå¤´æˆ–è€… HR æ¥è”ç³»ã€‚åœ¨é‚£æ—¶ï¼Œç¦»èŒé€šå¸¸ä¼´éšç€çš„æ˜¯è–ªèµ„å¢é•¿å’ŒèŒçº§çš„è·ƒå‡ã€‚</p>
<p>é‚£æ—¶å€™çš„æˆ‘ä»¬ï¼Œä»¿ä½›æ˜¯åœ¨è‰åŸä¸Šé€æ°´è‰è€Œå±…çš„æ¸¸ç‰§æ°‘æ—ï¼Œå“ªé‡Œæ°´è‰ä¸°ç¾å°±å»å“ªé‡Œï¼Œä»æœªæƒ³è¿‡è‰åŸä¹Ÿä¼šæœ‰æ¯é»„çš„ä¸€å¤©ã€‚</p>
<p>ç„¶è€Œä»Šå¤©ï¼Œæˆ‘ç¬¬ä¸€æ¬¡ä»¥æ—è§‚è€…çš„èº«ä»½ï¼Œè§è¯äº†ä¸€åœºå¹¶éå‡ºäºè‡ªæ„¿çš„ç¦»åˆ«ã€‚å½“å¤§ç¯å¢ƒä¸å†å®‰å®šã€å½“æ—¶ä»£çš„çº¢åˆ©é€€æ½®ï¼Œè£¸æ³³çš„ä¸ä»…æ˜¯ä¼ä¸šï¼Œè¿˜æœ‰æ¯ä¸€ä¸ªèº«å¤„å…¶ä¸­çš„ä¸ªä½“ã€‚</p>
<h2 data-id="heading-1">ç°åœºï¼šä¸¤å°æ—¶çš„â€œæ¶ˆå¤±æœ¯â€</h2>
<p>æ—©åœ¨ä¸€ä¸ªæœˆå‰ï¼Œç©ºæ°”ä¸­å°±å·²ç»å¼¥æ¼«ç€ä¸å®‰çš„å‘³é“ã€‚æˆ–è€…è¯´æ—©åœ¨ HCï¼ˆHeadcountï¼‰å†»ç»“æ—¶ï¼Œå°±å·²ç»åŸ‹ä¸‹äº†ä¼ç¬”ã€‚</p>
<p>11æœˆçš„æ—¶å€™ï¼Œä¸€äº›åŸæœ¬è¯¥ç»­ç­¾çš„åˆåŒè¢«æç½®ï¼Œé‚£æ—¶å€™æˆ‘ä»¬å°±çŸ¥é“ï¼Œæš´é£é›¨è¦æ¥äº†ã€‚ä½†æˆ‘æ²¡æƒ³åˆ°ï¼Œå®ƒæ¥å¾—å¦‚æ­¤è¿…çŒ›ä¸”å®‰é™ã€‚</p>
<p>æ—©ä¸Š 9 ç‚¹ï¼Œæ— æ„é—´ç¥è§ Leader ä»¬èšåœ¨ä¸€é—´ä¼šè®®å®¤ä¸­å¼€ä¼šã€‚åŸä»¥ä¸ºæ˜¯ä»–ä»¬çš„ä¾‹ä¼šï¼Œæ²¡æ›¾æƒ³ä¼šæ˜¯è£å‘˜çš„å¼€å§‹é”®ï¼š</p>
<p>Leader è°ˆè¯ -&gt; ç¡®è®¤èµ”å¿ -&gt; ç­¾å­— -&gt; äº¤è¿˜ç”µè„‘ -&gt; ç¦»å¼€ã€‚</p>
<p>è¿™åœºâ€œæ–©é¦–è¡ŒåŠ¨â€æŒç»­äº†ä¸åˆ°ä¸¤ä¸ªå°æ—¶ï¼Œè¿…é€Ÿä¸”å®‰é™ã€‚æ•´ä¸ªè¿‡ç¨‹æŒç»­åˆ°äº†ä¸Šåˆ 11 ç‚¹ï¼Œå°˜åŸƒè½å®šã€‚æ•´ä¸ªéƒ¨é—¨åˆè®¡å°‘äº†å››åˆ†ä¹‹ä¸€çš„äººã€‚</p>
<p>å¤–ä¼çš„ä½“é¢åœ¨è¿™ä¸€åˆ»å±•ç°å¾—æ·‹æ¼“å°½è‡´ï¼ŒåŒæ—¶ä¹Ÿå†·é…·å¾—ä»¤äººå¿ƒæƒŠã€‚æ²¡æœ‰å¤šä½™çš„åºŸè¯ï¼Œåªæœ‰æµç¨‹å’Œç»“æœã€‚å‰ä¸€åˆ†é’Ÿè¿˜åœ¨å’Œæˆ‘è¯´è¦ä¿® CI é”™è¯¯çš„åŒäº‹ï¼Œåä¸€åˆ†é’Ÿå·¥ä½å°±å·²ç»å›æ¥å’Œæˆ‘ä»¬å‘Šåˆ«äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01d87d8803d641c88b9d35d15b92d0db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS29uYXRhXzk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765983813&amp;x-signature=R6hhlK08SlzoNNQHm%2Bcp7iDlDpA%3D" alt="jimeng-2025-12-09-6938-å’–å•¡å…çš„ä¸€è§’ï¼Œæ¡Œä¸Šæ”¾ç€ä¸¤æ¯å’–å•¡ï¼Œæ¨¡ç³Šçš„èƒŒæ™¯æ˜¯ç¹åçš„åŸå¸‚CBDï¼Œé€è¿‡ç»ç’ƒçª—çœ‹å¤–é¢ï¼Œ..._cleanup.png" loading="lazy"/></p>
<h2 data-id="heading-2">åˆé¤ï¼šç„¦è™‘çš„æ³¡æ²«</h2>
<p>ä¸­åˆï¼Œâ€œå¹¸å­˜â€ä¸‹æ¥çš„åŒäº‹ä¸çº¦è€ŒåŒåœ°ä¸€èµ·å»åƒé¥­ã€‚</p>
<p>è¯é¢˜ä¸å†æ˜¯å¾€æ—¥çš„â€œæœ€è¿‘å“ªä¸ª AI æŠ€æœ¯æ ˆå¾ˆç«â€ã€â€œå“ªä¸ª Node.js çš„åº“å¯ä»¥ç”¨åˆ°é¡¹ç›®é‡Œâ€ï¼Œè€Œæ˜¯å˜æˆäº†â€œç°åœ¨å‡ºå»äº†èƒ½åšä»€ä¹ˆâ€ã€â€œè¿˜ä¼šæœ‰ä¸‹ä¸€æ³¢å—â€ã€‚</p>
<p>è°ˆåˆ°èµ”å¿ï¼Œç”±äºä¸æ–¹ä¾¿é€éœ²ï¼Œåªèƒ½ç®—æ˜¯â€œä¸­è§„ä¸­çŸ©â€ã€‚å³ä¸ä¼šåƒä½³èƒ½é‚£æ ·ä¸Šæ–°é—»ï¼Œä¹Ÿä¸ä¼šé—¹åˆ°ä»²è£ã€‚</p>
<p>åœ¨å…­ä¸ƒå¹´å‰ï¼Œè¿™ç¬”é’±å¯èƒ½æ˜¯ä¸€ç¬”å¿«ä¹çš„æ—…æ¸¸åŸºé‡‘ï¼›è€Œåœ¨å½“ä¸‹çš„ç¯å¢ƒä¸­ï¼Œå®ƒæ›´åƒæ˜¯ä¸€ç¬”â€œè¿‡å†¬è´¹â€ï¼Œæ˜¯é¢å¯¹æœªçŸ¥çš„æ¼«é•¿å¯’å†¬æ—¶ï¼Œæ‰‹é‡Œä»…æœ‰çš„ä¸€ç‚¹ä½™ç²®ã€‚</p>
<p>åƒå®Œé¥­åï¼Œå¤§å®¶ä¹Ÿæ˜¯å¿ƒç…§ä¸å®£åœ°æ•£ç€æ­¥ã€‚ä¸“é—¨æŒ‘äº†å¤ªé˜³æœ€å¤§çš„åœ°æ–¹èµ°äº†å¥½ä¹…ï¼Œä»¿ä½›å¯ä»¥é©±æ•£èº«ä¸Šçš„å¯’æ°”ã€‚</p>
<p>ä½†æˆ‘ä»¬éƒ½æ¸…æ¥šï¼Œæˆ‘ä»¬è¿™äº›ç•™ä¸‹æ¥çš„äººï¼Œä¹Ÿæ²¡æœ‰å¤ªå¤šåº†å¹¸ã€‚æ›´å¤šçš„æ˜¯ä¸€ç§â€œå…”æ­»ç‹æ‚²â€çš„æ— åŠ›æ„Ÿã€‚è°ä¹Ÿä¸çŸ¥é“ï¼Œä¸‹ä¸€æ¬¡åå•ä¸Šä¼šä¸ä¼šæœ‰è‡ªå·±çš„åå­—ã€‚</p>
<h2 data-id="heading-3">ä¸‹åˆï¼šæ²‰é»˜çš„åŠå…¬å®¤</h2>
<p>å›åˆ°å·¥ä½ï¼Œå·¥ä½œè¿˜å¾—ç»§ç»­ã€‚ä»£ç è¿˜åœ¨é‚£é‡Œï¼ŒBug è¿˜æ²¡ä¿®å®Œï¼ŒPR è¿˜ç­‰ç€ Mergeã€‚</p>
<p>ä½†å½“çœ‹åˆ° PR ä¸­é‚£äº›ç‚¹äº† Approve æˆ–è€…ç•™ä¸‹ Comments çš„â€œå‰â€åŒäº‹çš„å¤´åƒï¼Œç«Ÿæœ‰ä¸€ä¸ä¸æƒ³ Merge çš„å†²åŠ¨ã€‚</p>
<p>å‘ç”Ÿäº†è¿™ä¹ˆå¤§çš„äº‹æƒ…åï¼ŒåŠå…¬å®¤çš„æ°›å›´è‡ªç„¶å˜äº†ã€‚å¾€å¸¸åˆ°äº†ä¸‹ç­ç‚¹ï¼Œå¤§å®¶å¯èƒ½è¿˜ä¼šä¸ºäº†èµ¶è¿›åº¦å†å¤šå¾…ä¸€ä¼šå„¿æˆ–è€…ä¸€èµ·èŠä¼šå¤©ã€‚ä½†ä»Šå¤©ï¼Œä¸€åˆ°æ—¶é—´ï¼ŒLeader ä»¬å°±ç¤ºæ„å¤§å®¶æ—©ç‚¹å›å»ï¼Œä¸è¦å†åŠ ç­äº†ã€‚</p>
<p>è¿™ä¸ä»…æ˜¯ä¸€ç§ä½“æ¤ï¼Œæ›´åƒæ˜¯ä¸€ç§æ— å£°çš„å®£å‘Šï¼šå½“â€œåŠªåŠ›â€å·²ç»æ— æ³•å¯¹æŠ—â€œè¶‹åŠ¿â€æ—¶ï¼Œå¤§å®¶é»˜å¥‘åœ°é€‰æ‹©äº†â€œèŠ‚èƒ½æ¨¡å¼â€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/596a116a9413405193ac5f31db691cc5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS29uYXRhXzk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765983813&amp;x-signature=SUJthrxWEZFvtxHGMilMp4LAF8w%3D" alt="jimeng-2025-12-09-2436-ä¸€ä¸ªäººå­¤ç‹¬åœ°ç«™åœ¨é«˜æ¥¼çš„è½åœ°çª—å‰ï¼ŒèƒŒå½±ï¼Œä¿¯ç°ç€ä¸‹é¢ç¹å¿™ä½†æ¸ºå°çš„åŸå¸‚è½¦æµï¼Œå¤•é˜³è¥¿ä¸‹æˆ–..._cleanup.png" loading="lazy"/></p>
<h2 data-id="heading-4">ç»“è¯­</h2>
<p>å¤äººäº‘ï¼šâ€œå±±é›¨æ¬²æ¥é£æ»¡æ¥¼â€ã€‚ä»Šå¤©çš„è¿™åœºè£å‘˜ï¼Œæˆ–è®¸åªæ˜¯æ—¶ä»£å¤§æ½®ä¸­çš„ä¸€æœµæµªèŠ±ã€‚</p>
<p>å¤–ä¼æ›¾ç»æ˜¯æˆ‘ä»¬å¿ƒä¸­çš„é¿é£æ¸¯ï¼Œæ„å‘³ç€é«˜è–ªã€ä½“é¢ã€Work-Life Balanceã€‚ä½†ä»Šå¤©çš„ä¸€åˆ‡å‘Šè¯‰æˆ‘ä»¬ï¼Œåœ¨è¿™ä¸ªå……æ»¡ä¸ç¡®å®šæ€§çš„æ—¶ä»£ï¼Œæ²¡æœ‰ç»å¯¹çš„å®‰å…¨å²›ã€‚</p>
<p>å¯¹äºæˆ‘ä»¬æ¯ä¸€ä¸ªæŠ€æœ¯äººæ¥è¯´ï¼Œæˆ–è®¸æ˜¯æ—¶å€™é‡æ–°å®¡è§†è‡ªå·±çš„æ ¸å¿ƒç«äº‰åŠ›äº†ã€‚å½“å¤§æ½®é€€å»ï¼Œæˆ‘ä»¬æ‰‹é‡Œæ¡ç€çš„ï¼Œç©¶ç«Ÿæ˜¯å¯ä»¥éšæ—¶å˜ç°çš„æŠ€èƒ½ï¼Œè¿˜æ˜¯ä¸€å¼ éšæ—¶å¯èƒ½å¤±æ•ˆçš„å·¥ç‰Œï¼Ÿ</p>
<p>æœ€åçš„æœ€åï¼Œæˆ‘æƒ³è¯´æˆ‘ä»¬ç»„æœ¬æ¥äººä¹Ÿä¸å¤šï¼Œå¤§å®¶å…³ç³»ä¹Ÿéƒ½å¾ˆå¥½ï¼Œå¹³æ—¶è¯´è¯´ç¬‘ç¬‘ä¹Ÿå¾ˆå¼€å¿ƒã€‚è¡·å¿ƒç¥æ„¿ä»–ä»¬èƒ½åœ¨åé¢çš„æ—¥å­é¡ºåˆ©ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[cssçš„è‡‚è†€ï¼Œå‰ç«¯åŠ¨æ•ˆçš„åˆ©å™¨ï¼Œè¿˜æ˜¯å¸ƒå±€çš„â€œéšå½¢é™·é˜±â€ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7582016579857989666</link>    <guid>https://juejin.cn/post/7582016579857989666</guid>    <pubDate>2025-12-10T13:07:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582016579857989666" data-draft-id="7582016579857973282" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="cssçš„è‡‚è†€ï¼Œå‰ç«¯åŠ¨æ•ˆçš„åˆ©å™¨ï¼Œè¿˜æ˜¯å¸ƒå±€çš„â€œéšå½¢é™·é˜±â€ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,CSS,HTML"/> <meta itemprop="datePublished" content="2025-12-10T13:07:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èƒ¡gh"/> <meta itemprop="url" content="https://juejin.cn/user/494101298678516"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            cssçš„è‡‚è†€ï¼Œå‰ç«¯åŠ¨æ•ˆçš„åˆ©å™¨ï¼Œè¿˜æ˜¯å¸ƒå±€çš„â€œéšå½¢é™·é˜±â€ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/494101298678516/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èƒ¡gh
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T13:07:47.000Z" title="Wed Dec 10 2025 13:07:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><hr/>
<h3 data-id="heading-0">å‰è¨€</h3>
<p>åœ¨ç°ä»£ Web å¼€å‘ä¸­ï¼Œ<code>transform</code> å‡ ä¹æˆäº†åŠ¨æ•ˆä¸å±…ä¸­çš„ä»£åè¯ã€‚å®ƒé«˜æ•ˆã€çµæ´»ã€æ”¯æŒç¡¬ä»¶åŠ é€Ÿï¼Œä¸€å¥ <code>transform: translate(-50%, -50%)</code> å°±èƒ½ä¼˜é›…å®ç°æœªçŸ¥å°ºå¯¸å…ƒç´ çš„ç»å¯¹å±…ä¸­â€”â€”è¿™æ›¾æ˜¯å¤šå°‘å‰ç«¯å¼€å‘è€…æ¢¦å¯ä»¥æ±‚çš„è§£å†³æ–¹æ¡ˆã€‚ç„¶è€Œï¼Œåœ¨èµç¾å…¶å¼ºå¤§ä¹‹ä½™ï¼Œæˆ‘ä»¬æ˜¯å¦å¿½ç•¥äº†å®ƒé‚£â€œæ¸©æŸ”é¢å…·â€ä¸‹çš„å¦ä¸€é¢ï¼Ÿ<strong><code>transform</code> ä¸ä»…æ”¹å˜è§†è§‰ï¼Œæ›´æ‚„ç„¶é‡å¡‘äº† CSS çš„åº•å±‚è§„åˆ™â€”â€”å°¤å…¶æ˜¯ä¸ <code>position</code> çš„äº¤äº’ï¼Œå¸¸å¸¸æˆä¸ºå¸ƒå±€å´©åçš„éšå½¢å…ƒå‡¶ã€‚</strong></p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€<code>transform</code> çš„â€œç†æƒ³é¢â€ï¼šé«˜æ•ˆã€æ— ä¾µå…¥ã€è¡¨ç°åŠ›å¼º</h3>
<h4 data-id="heading-2">æ ¸å¿ƒä¼˜åŠ¿ï¼šä¸æ‰°åŠ¨æ–‡æ¡£æµ</h4>
<p>è¿™æ˜¯ <code>transform</code> æœ€è¢«ç§°é“çš„ç‰¹æ€§ï¼š<strong>å®ƒåªä½œç”¨äºåˆæˆå±‚ï¼ˆcompositing layerï¼‰ï¼Œä¸å½±å“æ–‡æ¡£æµä¸­çš„å ä½</strong>ã€‚<br/>
å¯¹æ¯”ä¼ ç»Ÿæ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ä½æ•ˆï¼šè§¦å‘é‡æ’ï¼ˆreflowï¼‰ */</span>
<span class="hljs-selector-class">.box</span> { <span class="hljs-attribute">top</span>: <span class="hljs-number">10px</span>; <span class="hljs-attribute">left</span>: <span class="hljs-number">20px</span>; }

<span class="hljs-comment">/* é«˜æ•ˆï¼šä»…è§¦å‘åˆæˆï¼ˆcompositingï¼‰ */</span>
<span class="hljs-selector-class">.box</span> { <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate</span>(<span class="hljs-number">20px</span>, <span class="hljs-number">10px</span>); }
</code></pre>
<p>å‰è€…ä¼šè¿«ä½¿æµè§ˆå™¨é‡æ–°è®¡ç®—æ•´ä¸ªå¸ƒå±€æ ‘ï¼Œè€Œåè€…ç›´æ¥ç”± GPU å¤„ç†ï¼Œå¸§ç‡æ›´é«˜ã€èƒ½è€—æ›´ä½ã€‚</p>
<h4 data-id="heading-3">ç»å…¸ç”¨ä¾‹ï¼šç»å¯¹å±…ä¸­</h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.centered</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate</span>(-<span class="hljs-number">50%</span>, -<span class="hljs-number">50%</span>);
}
</code></pre>
<ul>
<li><strong>æ— éœ€çŸ¥é“å®½é«˜</strong>ï¼š<code>-50%</code> åŸºäºå…ƒç´ è‡ªèº«å°ºå¯¸ï¼Œå®Œç¾é€‚é…åŠ¨æ€å†…å®¹ã€‚</li>
<li><strong>è¯­ä¹‰æ¸…æ™°</strong>ï¼šæ„å›¾æ˜ç¡®ï¼Œä»£ç ç®€æ´ã€‚</li>
<li><strong>æ€§èƒ½ä¼˜å¼‚</strong>ï¼šè¿œèƒœ <code>margin: auto</code> æˆ– <code>calc()</code> æ–¹æ¡ˆã€‚</li>
</ul>
<h4 data-id="heading-4">äº¤äº’å¢å¼ºï¼šå¾®åŠ¨æ•ˆæå‡ä½“éªŒ</h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.card</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">4px</span>) <span class="hljs-built_in">scale</span>(<span class="hljs-number">1.02</span>);
  <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.2s</span> ease;
}
</code></pre>
<p>è¿™ç§â€œæµ®èµ·â€æ•ˆæœå·²æˆä¸ºç°ä»£ UI çš„æ ‡é…ï¼Œè€Œ <code>transform</code> æ˜¯å®ç°å®ƒçš„æœ€ä½³è½½ä½“ã€‚</p>
<hr/>
<h3 data-id="heading-5">äºŒã€<code>transform</code> çš„â€œæš—é¢â€ï¼šå½“å®ƒé‡ä¸Š <code>position</code></h3>
<p>é—®é¢˜æ¥äº†ï¼š<strong>å¦‚æœ <code>transform</code> å¦‚æ­¤ç¾å¥½ï¼Œä¸ºä½•æ— æ•°å¼€å‘è€…åœ¨ä½¿ç”¨ Modalã€Tooltip æ—¶é­é‡â€œfixed å…ƒç´ è·Ÿç€æ»šåŠ¨â€çš„è¯¡å¼‚ç°è±¡ï¼Ÿ</strong></p>
<p>ç­”æ¡ˆå°±è—åœ¨ CSS è§„èŒƒçš„ä¸€ä¸ªè§’è½é‡Œï¼š</p>
<blockquote>
<p><strong>â€œä»»ä½•é <code>none</code> çš„ <code>transform</code> å€¼ï¼Œéƒ½ä¼šä½¿è¯¥å…ƒç´ æˆä¸ºå…¶ <code>position: fixed</code> åä»£çš„åŒ…å«å—ï¼ˆcontaining blockï¼‰ã€‚â€</strong></p>
</blockquote>
<p>è¿™æ„å‘³ç€ï¼š<strong><code>fixed</code> å…ƒç´ çš„å®šä½å‚è€ƒç³»ï¼Œä¸å†æ˜¯è§†å£ï¼Œè€Œæ˜¯æœ€è¿‘çš„å¸¦ <code>transform</code> çš„ç¥–å…ˆï¼</strong></p>
<h4 data-id="heading-6">å®ä¾‹ï¼šä¸€ä¸ªâ€œå¤±æ•ˆâ€çš„å›ºå®šå¯¼èˆªæ </h4>
<pre><code class="hljs language-ini" lang="ini">&lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"app"</span>&gt;
  &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"animated-section"</span>&gt; 
    &lt;nav <span class="hljs-attr">class</span>=<span class="hljs-string">"navbar"</span>&gt;æˆ‘æ˜¯å¯¼èˆªæ &lt;/nav&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.animated-section</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">0</span>); <span class="hljs-comment">/* å“ªæ€•æ˜¯â€œæ— æ“ä½œâ€å˜æ¢ï¼ */</span>
  <span class="hljs-attribute">height</span>: <span class="hljs-number">200vh</span>; <span class="hljs-comment">/* è¶³å¤Ÿæ»šåŠ¨ */</span>
}

<span class="hljs-selector-class">.navbar</span> {
  <span class="hljs-attribute">position</span>: fixed;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">background</span>: black;
  <span class="hljs-attribute">color</span>: white;
  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1000</span>;
}
</code></pre>
<p><strong>é¢„æœŸè¡Œä¸º</strong>ï¼šå¯¼èˆªæ å›ºå®šåœ¨é¡¶éƒ¨ï¼Œé¡µé¢æ»šåŠ¨æ—¶ä¸åŠ¨ã€‚<br/>
<strong>å®é™…è¡Œä¸º</strong>ï¼šå¯¼èˆªæ éš <code>.animated-section</code> ä¸€èµ·æ»šåŠ¨ï¼</p>
<blockquote>
<p><strong>åŸå› </strong>ï¼š<code>.animated-section</code> å›  <code>transform</code> æˆä¸ºæ–°çš„åŒ…å«å—ï¼Œ<code>fixed</code> çš„ <code>top: 0</code> å˜æˆäº†â€œç›¸å¯¹äºè¯¥å®¹å™¨é¡¶éƒ¨â€ï¼Œè€Œéè§†å£ã€‚</p>
</blockquote>
<p>è¿™å¹¶éæµè§ˆå™¨ bugï¼Œè€Œæ˜¯ <strong>CSS è§„èŒƒçš„æ˜ç¡®è®¾è®¡</strong>ã€‚ä½†å¯¹å¼€å‘è€…è€Œè¨€ï¼Œè¿™å´æ˜¯ä¸€ä¸ªå…¸å‹çš„â€œç¬¦åˆè§„èŒƒä½†è¿èƒŒç›´è§‰â€çš„é™·é˜±ã€‚</p>
<hr/>
<h2 data-id="heading-7">è¡¥å……</h2>
<hr/>
<h5 data-id="heading-8">å…³é”®è¡¥å……å±æ€§</h5>
<h6 data-id="heading-9">1.Â <code>transform-origin</code>ï¼šä¿®æ”¹å˜æ¢åŸç‚¹</h6>
<p>é»˜è®¤å˜æ¢åŸç‚¹æ˜¯å…ƒç´ ä¸­å¿ƒï¼ˆ<code>50% 50%</code>Â æˆ–Â <code>center center</code>ï¼‰ï¼Œå¯é€šè¿‡è¯¥å±æ€§è‡ªå®šä¹‰ï¼š</p>
<ul>
<li>
<p>è¯­æ³•ï¼š<code>transform-origin: x y;</code>ï¼ˆx/y æ”¯æŒ pxã€%ã€å…³é”®å­—ï¼ˆleft/right/top/bottom/centerï¼‰ï¼‰ï¼›</p>
</li>
<li>
<p>ç¤ºä¾‹ï¼š</p>
<p>css</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.box</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">45deg</span>);
  <span class="hljs-attribute">transform-origin</span>: left top; <span class="hljs-comment">/* ç»•å·¦ä¸Šè§’æ—‹è½¬ */</span>
}
</code></pre>
</li>
</ul>
<h6 data-id="heading-10">2.Â <code>transform-style</code>ï¼š3D å˜æ¢å±‚çº§</h6>
<p>å½“ä½¿ç”¨ 3D å˜æ¢ï¼ˆå¦‚Â <code>rotateX/rotateY</code>ï¼‰æ—¶ï¼Œéœ€è®¾ç½®è¯¥å±æ€§è®©å­å…ƒç´ ç»§æ‰¿ 3D ç©ºé—´ï¼š</p>
<ul>
<li><code>transform-style: preserve-3d;</code>ï¼šä¿ç•™ 3D å˜æ¢æ•ˆæœï¼ˆå¸¸ç”¨ï¼‰ï¼›</li>
<li><code>transform-style: flat;</code>ï¼šé»˜è®¤å€¼ï¼Œå­å…ƒç´ æ‰å¹³åŒ–åˆ° 2D å¹³é¢ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-11">ä¸‰ã€ä¸æ­¢ <code>transform</code>ï¼š<code>filter</code> ä¸ <code>perspective</code> çš„å…±è°‹</h3>
<p>æ›´ä»¤äººå¤´ç–¼çš„æ˜¯ï¼Œ<strong><code>transform</code> å¹¶éå­¤ä¾‹</strong>ã€‚ä»¥ä¸‹å±æ€§åŒæ ·ä¼šåˆ›å»ºæ–°çš„åŒ…å«å—ï¼š</p>
<ul>
<li><code>filter: blur(0)</code>ï¼ˆå“ªæ€•æ— è§†è§‰å˜åŒ–ï¼‰</li>
<li><code>perspective: 1000px</code></li>
<li><code>will-change: transform</code></li>
</ul>
<p>å®ƒä»¬å¸¸è¢«ç”¨äºï¼š</p>
<ul>
<li>åŠ¨ç”»åº“ï¼ˆFramer Motionã€GSAPï¼‰è‡ªåŠ¨æ³¨å…¥ <code>transform</code></li>
<li>ç»„ä»¶åº“å†…éƒ¨ä½¿ç”¨ <code>filter</code> å®ç°æ¯›ç»ç’ƒæ•ˆæœ</li>
<li>3D å¡ç‰‡ç»„ä»¶å¯ç”¨ <code>perspective</code></li>
</ul>
<p>ç»“æœå°±æ˜¯ï¼š<strong>ä½ çš„ <code>fixed</code> Modal çªç„¶æ— æ³•è¦†ç›–å…¨å±ï¼ŒTooltip é”™ä½ï¼Œæ‚¬æµ®æŒ‰é’®å¤±æ•ˆâ€¦â€¦</strong></p>
<hr/>
<h3 data-id="heading-12">å››ã€åæ€ï¼šæˆ‘ä»¬æ˜¯å¦è¿‡åº¦ä¾èµ– <code>transform</code>ï¼Ÿ</h3>
<p><code>transform</code> çš„æµè¡Œï¼ŒæŸç§ç¨‹åº¦ä¸Šæ©ç›–äº†æˆ‘ä»¬å¯¹ CSS å¸ƒå±€æ¨¡å‹ç†è§£çš„ä¸è¶³ã€‚æˆ‘ä»¬ä¹ æƒ¯æ€§åœ°ç”¨å®ƒè§£å†³ä¸€åˆ‡ä½ç½®é—®é¢˜ï¼Œå´å¿˜äº†é—®ï¼š</p>
<blockquote>
<p><strong>â€œè¿™ä¸ªå…ƒç´ çœŸçš„éœ€è¦è„±ç¦»æ–‡æ¡£æµå—ï¼Ÿå®ƒçš„ç¥–å…ˆæ˜¯å¦å¹²å‡€ï¼Ÿâ€</strong></p>
</blockquote>
<p>åœ¨ React/Vue ç­‰ç»„ä»¶åŒ–æ¡†æ¶ä¸­ï¼Œé—®é¢˜è¢«è¿›ä¸€æ­¥æ”¾å¤§ï¼š</p>
<ul>
<li>ç»„ä»¶åµŒå¥—æ·±ï¼Œéš¾ä»¥è¿½è¸ªå“ªä¸ªç¥–å…ˆåŠ äº† <code>transform</code></li>
<li>ç¬¬ä¸‰æ–¹åº“å†…éƒ¨å®ç°ä¸å¯æ§</li>
<li>åŠ¨ç”»ä¸å¸ƒå±€é€»è¾‘è€¦åˆï¼Œè°ƒè¯•å›°éš¾</li>
</ul>
<p>äºæ˜¯ï¼Œ<code>transform</code> ä»â€œè§£å†³æ–¹æ¡ˆâ€å˜æˆäº†â€œé—®é¢˜æºå¤´â€ã€‚</p>
<hr/>
<h3 data-id="heading-13">äº”ã€ç ´å±€ä¹‹é“ï¼šç†æ€§ä½¿ç”¨ + æ¶æ„è§„é¿</h3>
<h4 data-id="heading-14">1. <strong>æµ®å±‚ç»„ä»¶å¿…é¡»è„±ç¦»å½“å‰ä¸Šä¸‹æ–‡</strong></h4>
<p>åœ¨ React ä¸­ï¼Œ<strong>æ°¸è¿œä½¿ç”¨ <code>ReactDOM.createPortal</code> æ¸²æŸ“ Modal/Toast/Dropdown</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">Modal</span> = (<span class="hljs-params">{ children }</span>) =&gt; 
  <span class="hljs-title function_">createPortal</span>(
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>,
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>
  );
</code></pre>
<p>è¿™æ ·å¯ç¡®ä¿å…¶ç¥–å…ˆæ—  <code>transform</code>ï¼Œ<code>fixed</code> è¡Œä¸ºç¬¦åˆé¢„æœŸã€‚</p>
<h4 data-id="heading-15">2. <strong>é¿å…åœ¨å¯èƒ½åŒ…å«æµ®å±‚çš„åŒºåŸŸä½¿ç”¨ <code>transform</code></strong></h4>
<ul>
<li>å¯¼èˆªåŒºåŸŸã€ä¸»å†…å®¹åŒºæ…ç”¨åŠ¨ç”»</li>
<li>è‹¥å¿…é¡»ç”¨ï¼Œç¡®ä¿æµ®å±‚ä¸åœ¨å…¶å­æ ‘ä¸­</li>
</ul>
<h4 data-id="heading-16">3. <strong>è°ƒè¯•æ—¶ç‰¢è®°â€œåŒ…å«å—â€æ¦‚å¿µ</strong></h4>
<p>å½“ <code>fixed</code> è¡Œä¸ºå¼‚å¸¸ï¼Œç«‹å³æ£€æŸ¥ï¼š</p>
<ul>
<li>æ‰€æœ‰ç¥–å…ˆæ˜¯å¦æœ‰ <code>transform</code> / <code>filter</code> / <code>perspective</code></li>
<li>æ˜¯å¦æ„å¤–åˆ›å»ºäº†å±‚å ä¸Šä¸‹æ–‡</li>
</ul>
<hr/>
<h3 data-id="heading-17">ç»“è¯­ï¼šå·¥å…·æ— å–„æ¶ï¼Œè®¤çŸ¥å®šæˆè´¥</h3>
<p><code>transform</code> æœ¬èº«å¹¶æ— è¿‡é”™ã€‚å®ƒæ˜¯ CSS è¿›åŒ–çš„é‡è¦é‡Œç¨‹ç¢‘ï¼Œæå¤§æå‡äº† Web çš„è¡¨ç°åŠ›ä¸æ€§èƒ½ã€‚<br/>
<strong>çœŸæ­£çš„é£é™©ï¼Œæ¥è‡ªäºæˆ‘ä»¬å¯¹å…¶å‰¯ä½œç”¨çš„æ— çŸ¥ï¼Œä»¥åŠå¯¹â€œç®€å•ä¸€è¡Œä»£ç å°±èƒ½è§£å†³é—®é¢˜â€çš„ç›²ç›®ä¿¡ä»»ã€‚</strong></p>
<p>å‰ç«¯å¼€å‘ä¸ä»…æ˜¯å†™ä»£ç ï¼Œæ›´æ˜¯ç†è§£ç³»ç»Ÿã€‚å½“æˆ‘ä»¬ç†Ÿç»ƒè¿ç”¨ <code>transform: translate(-50%, -50%)</code> çš„åŒæ—¶ï¼Œä¹Ÿåº”æ·±çŸ¥ï¼š</p>
<blockquote>
<p><strong>æ¯ä¸€ä¸ªçœ‹ä¼¼ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆèƒŒåï¼Œéƒ½æœ‰ä¸€å¥—ä¸¥å¯†çš„è§„åˆ™åœ¨è¿è¡Œã€‚å¿½è§†è§„åˆ™ï¼Œç»ˆå°†è¢«è§„åˆ™åå™¬ã€‚</strong></p>
</blockquote>
<p>å› æ­¤ï¼Œè¯·ç»§ç»­çƒ­çˆ± <code>transform</code>ï¼Œä½†è¯·å¸¦ç€æ•¬ç•ä¹‹å¿ƒä½¿ç”¨å®ƒâ€”â€”å°¤å…¶æ˜¯åœ¨ä¸ <code>position</code> å…±èˆä¹‹æ—¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ–‡è®²æ¸…ï¼šAIå¤§æ¨¡å‹é¢„è®­ç»ƒä¸åè®­ç»ƒçš„æ•°æ®é€‰æ‹©]]></title>    <link>https://juejin.cn/post/7581893894176325642</link>    <guid>https://juejin.cn/post/7581893894176325642</guid>    <pubDate>2025-12-10T13:07:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581893894176325642" data-draft-id="7582063437413728294" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡è®²æ¸…ï¼šAIå¤§æ¨¡å‹é¢„è®­ç»ƒä¸åè®­ç»ƒçš„æ•°æ®é€‰æ‹©"/> <meta itemprop="keywords" content="LLM"/> <meta itemprop="datePublished" content="2025-12-10T13:07:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ™ºæ³ŠAI"/> <meta itemprop="url" content="https://juejin.cn/user/3572727470361578"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡è®²æ¸…ï¼šAIå¤§æ¨¡å‹é¢„è®­ç»ƒä¸åè®­ç»ƒçš„æ•°æ®é€‰æ‹©
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3572727470361578/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ™ºæ³ŠAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T13:07:25.000Z" title="Wed Dec 10 2025 13:07:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>ä¸€ã€é¢„è®­ç»ƒçš„æ•°æ®é€‰æ‹©</strong></p>
<p><strong>æ¨¡å‹å½±å“åŠ›é©±åŠ¨ï¼ˆInfluence / Importance-based Selectionï¼‰</strong></p>
<p>MATES: Model-Aware Data Selection for Efficient Pretraining with Data Influence Models</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de65d2c485d0479291b89d50a8bcec2a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765976845&amp;x-signature=hyHRbLGFgx1axPSY1ir5Nx3LXvw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>MATESåˆ›æ–°æ€§åœ°è®¾è®¡äº†ä¸€ç§åŠ¨æ€é€‚åº”æ¨¡å‹éœ€æ±‚çš„æ•°æ®ç­›é€‰æœºåˆ¶ã€‚</p>
<p>åŒºåˆ«äºä¼ ç»Ÿé™æ€è¿‡æ»¤æ–¹æ³•ï¼Œè¯¥ç ”ç©¶æŒ‡å‡ºæ¨¡å‹åœ¨è®­ç»ƒè¿›ç¨‹ä¸­ä¼šæŒç»­æ”¹å˜å¯¹ä¸åŒæ•°æ®ç‰¹å¾çš„"åå¥½å€¾å‘"ï¼Œå› æ­¤æ•°æ®ç­›é€‰ç­–ç•¥éœ€å®ç°ä¸è®­ç»ƒè¿›åº¦çš„åŒæ­¥åŠ¨æ€ä¼˜åŒ–ã€‚</p>
<p>å…¶æ–¹æ³•è®ºæ ¸å¿ƒåœ¨äºå»ºç«‹"æ•°æ®ä»·å€¼è¯„ä¼°æ¨¡å‹"ã€‚</p>
<p>å®æ–½æµç¨‹åŒ…å«ï¼šè®­ç»ƒå‘¨æœŸå†…é€šè¿‡å‘¨æœŸæ€§æ¢æµ‹ï¼ˆprobeï¼‰é‡åŒ–å„æ•°æ®æ ·æœ¬å¯¹æ¨¡å‹æ€§èƒ½çš„å®é™…è´¡çŒ®åº¦ï¼Œåˆ©ç”¨è¯¥è¯„ä¼°ç»“æœè®­ç»ƒè½»é‡çº§é¢„æµ‹æ¨¡å‹ï¼Œè¿›è€Œé¢„åˆ¤æµ·é‡è¯­æ–™ä¸­æ¯é¡¹æ•°æ®çš„æ½œåœ¨ä»·å€¼æƒé‡ã€‚</p>
<p>åœ¨åç»­è®­ç»ƒé˜¶æ®µä¸­ï¼Œç³»ç»Ÿå°†ä¼˜å…ˆé‡‡ç”¨é¢„æµ‹ä»·å€¼è¾ƒé«˜çš„æ•°æ®æ ·æœ¬ã€‚</p>
<p>è·¨å¤šç§è§„æ¨¡è¯­è¨€æ¨¡å‹çš„éªŒè¯å®éªŒæ˜¾ç¤ºï¼Œç›¸è¾ƒäºéšæœºé‡‡æ ·æˆ–é™æ€è§„åˆ™è¿‡æ»¤ï¼ŒMATESåœ¨å¤šé¡¹ä»»åŠ¡ä¸­å®ç°å¹³å‡æ€§èƒ½çš„æ˜¾è‘—æå‡ï¼Œä¸”è¾¾æˆåŒç­‰æ€§èƒ½æ‰€éœ€çš„è®¡ç®—èµ„æºå¯é™ä½çº¦50%ã€‚</p>
<p>è¯¥æˆæœè¯å®ï¼šåŸºäºæ¨¡å‹å®æ—¶çŠ¶æ€çš„åŠ¨æ€æ•°æ®ç­›é€‰æœºåˆ¶ï¼Œç›¸æ¯”å›ºå®šè§„åˆ™ç­–ç•¥å…·æœ‰æ˜¾è‘—ä¼˜åŠ¿ï¼Œä»£è¡¨äº†é¢„è®­ç»ƒæ•°æ®ç®¡ç†æŠ€æœ¯çš„é‡è¦å‘å±•æ–¹å‘ã€‚</p>
<p><strong>æ›´å¤šAIå¤§æ¨¡å‹å­¦ä¹ è§†é¢‘åŠèµ„æºï¼Œéƒ½åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fyuan.zhipoai.cn%2F" target="_blank" title="https://yuan.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</strong></p>
<p><strong>è´¨é‡ + å¤šæ ·æ€§å¹³è¡¡ï¼ˆQualityâ€“Diversity Joint Methodsï¼‰</strong></p>
<p>Harnessing Diversity for Important Data Selection in Pretraining Large Language Models</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13c87bdc62a3490b96d3f030ee5977c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765976845&amp;x-signature=q6YXg%2Bc4CCJmBxMKTNAm3ysOdLI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ç¯‡è®ºæ–‡èšç„¦äºä¸€ä¸ªç»å…¸å´æ˜“è¢«å¿½ç•¥çš„æŒ‘æˆ˜ï¼šä»…ä¾æ®"é‡è¦æ€§"ï¼ˆå¦‚å½±å“åŠ›æˆ–è´¨é‡ï¼‰ç­›é€‰æ•°æ®ï¼Œå¾€å¾€ä¼šå¯¼è‡´æ‰€é€‰æ•°æ®åœ¨è¯­è¨€é£æ ¼ã€çŸ¥è¯†é¢†åŸŸå’Œè¯­ä¹‰åˆ†å¸ƒä¸Šå‘ˆç°é«˜åº¦åŒè´¨åŒ–ï¼Œè¿›è€Œå‰Šå¼±æ¨¡å‹çš„æ³›åŒ–æ€§èƒ½ã€‚</p>
<p>ç ”ç©¶è€…æå‡ºçš„Quadæ–¹æ³•åˆ›æ–°æ€§åœ°é€šè¿‡åŒæ­¥ä¼˜åŒ–æ•°æ®çš„é‡è¦æ€§å’Œå¤šæ ·æ€§æ¥åº”å¯¹è¿™ä¸€éš¾é¢˜ã€‚</p>
<p>è¯¥æ–¹æ³•é¦–å…ˆé‡‡ç”¨é«˜æ•ˆçš„åå‘Hessianè®¡ç®—æŠ€æœ¯ï¼Œé‡åŒ–æ¯æ¡æ•°æ®å¯¹æ¨¡å‹è®­ç»ƒçš„å½±å“æƒé‡ã€‚éšåå°†è¯­æ–™åº“åŸºäºè¯­ä¹‰è¡¨ç¤ºåˆ’åˆ†ä¸ºå¤šä¸ªç°‡ï¼Œæ¯ä¸ªç°‡è¢«å»ºæ¨¡ä¸ºå¤šè‡‚èµŒåšæœºé—®é¢˜ä¸­çš„ä¸€ä¸ªç‹¬ç«‹"è‡‚"ã€‚</p>
<p>åœ¨æ•°æ®é€‰æ‹©è¿‡ç¨‹ä¸­ï¼Œç®—æ³•ä¸ä»…ä¼˜å…ˆç­›é€‰é«˜å½±å“åŠ›æ•°æ®ï¼Œè¿˜ä¼šä¸»åŠ¨æŒ–æ˜é‚£äº›è¢«ä½é¢‘é€‰æ‹©å´å…·å¤‡æ½œåœ¨ä»·å€¼çš„ç°‡ï¼Œä»è€Œç¡®ä¿æ•°æ®é›†çš„æ•´ä½“å¤šæ ·æ€§ã€‚</p>
<p>å®éªŒéªŒè¯æ˜¾ç¤ºï¼ŒQuadåœ¨å¤šä¸ªåŸºå‡†æµ‹è¯•ä¸­å‡ä¼˜äºä¼ ç»Ÿæ•°æ®é€‰æ‹©æ–¹æ³•ï¼Œå¹¶èƒ½æ˜¾è‘—å¢å¼ºæ¨¡å‹çš„é›¶æ ·æœ¬å­¦ä¹ èƒ½åŠ›ã€‚</p>
<p>è¯¥ç ”ç©¶æœ‰åŠ›è¯æ˜äº†åœ¨é¢„è®­ç»ƒæ•°æ®ç­›é€‰ä¸­ï¼Œå¤šæ ·æ€§ä¸è´¨é‡å…·æœ‰åŒç­‰å…³é”®ä»·å€¼ï¼ŒåŒæ—¶æä¾›äº†ä¸€ä¸ªå…¼å…·å¯æ‰©å±•æ€§å’Œå®ç”¨æ€§çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>QuaDMix: Qualityâ€“Diversity Balanced Data Selection for Efficient LLM Pretraining</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13c796dac68845f48d56d62749c9ed58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765976845&amp;x-signature=VuWC0tGKta%2Fhq%2FNfLzdcvnc7MIQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>QuaDMix çš„ç ”ç©¶è¡¨æ˜ï¼Œåœ¨é¢„è®­ç»ƒæ•°æ®é€‰æ‹©ä¸­ï¼Œ"è´¨é‡"ä¸"å¤šæ ·æ€§"çš„ä¼ ç»Ÿç‹¬ç«‹å¤„ç†æ–¹å¼ä¼šå¯¼è‡´æ˜¾è‘—å¤±è¡¡ï¼Œå…¸å‹è¡¨ç°ä¸ºé«˜è´¨é‡æ•°æ®åœ¨ç‰¹å®šé¢†åŸŸçš„è¿‡åº¦é›†ä¸­ã€‚</p>
<p>é’ˆå¯¹è¿™ä¸€é—®é¢˜ï¼ŒQuaDMix åˆ›æ–°æ€§åœ°å¼€å‘äº†ä¸€ä¸ªé›†æˆæ¡†æ¶ï¼Œé€šè¿‡å‚æ•°åŒ–é‡‡æ ·åˆ†å¸ƒåŒæ­¥æ•´åˆä¸¤ä¸ªå…³é”®ç»´åº¦ã€‚</p>
<p>è¯¥æ–¹æ³•å®æ–½åŒ…å«ä¸‰ä¸ªæ ¸å¿ƒæ­¥éª¤ï¼š</p>
<p><strong>â€Œå¤šç»´è´¨é‡è¯„ä¼°â€Œ</strong>ï¼šå¯¹æ¯é¡¹æ•°æ®å®æ–½è¯­è¨€æµç•…æ€§ã€æ–‡æœ¬å¤æ‚åº¦åŠæ•°æ®æ¸…æ´åº¦ç­‰å¤šå…ƒæŒ‡æ ‡é‡åŒ–</p>
<p><strong>â€Œé¢†åŸŸç‰¹å¾æ ‡æ³¨â€Œ</strong>ï¼šé‡‡ç”¨åˆ†ç±»ç®—æ³•æ˜ç¡®æ•°æ®æ‰€å±é¢†åŸŸç±»åˆ«</p>
<p><strong>â€ŒåŠ¨æ€é‡‡æ ·æœºåˆ¶â€Œ</strong>ï¼šåŸºäº"è´¨é‡å‘é‡+é¢†åŸŸæ ‡ç­¾"çš„å¤åˆå‡½æ•°è®¡ç®—é‡‡æ ·æ¦‚ç‡ï¼Œå¹¶é€šè¿‡å°è§„æ¨¡å®éªŒä¼˜åŒ–å‚æ•°é…ç½®</p>
<p>å®éªŒæ•°æ®è¯å®ï¼Œç›¸è¾ƒäºå•ä¸€ä¼˜åŒ–è´¨é‡æˆ–å¤šæ ·æ€§çš„åŸºå‡†æ–¹æ³•ï¼ŒQuaDMix çš„ååŒä¼˜åŒ–ç­–ç•¥åœ¨è·¨ä»»åŠ¡æµ‹è¯•ä¸­å®ç°äº†7%ä»¥ä¸Šçš„æ€§èƒ½å¢ç›Šã€‚</p>
<p>è¿™ä¸€æˆæœéªŒè¯äº†è´¨é‡-å¤šæ ·æ€§ç»Ÿä¸€æ¡†æ¶åœ¨æ•°æ®ç­›é€‰ä¸­çš„ä¼˜è¶Šæ€§ã€‚</p>
<p>Learning from the Best, Differently: A Diversity-Driven Rethinking on Data Selection</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2b3bbeff73a4e0f8dbf142d6d4166ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765976845&amp;x-signature=CV6UCRHgtryOCro35jyGTg8nAdA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ç¯‡è®ºæ–‡å¯¹æ•°æ®ç­›é€‰çš„å¸¸è§„æ–¹æ³•â€”â€”"æŒ‰è¯„åˆ†æ’åºå¹¶é€‰å–å‰kåï¼ˆæœ€é«˜åˆ†æ•°æ®ï¼‰"â€”â€”æå‡ºäº†è´¨ç–‘ã€‚</p>
<p>ä½œè€…æŒ‡å‡ºï¼Œè¯¥æ–¹æ³•çš„å±€é™æ€§åœ¨äºï¼šè¯„åˆ†ä½“ç³»å¾€å¾€èåˆäº†å¤šä¸ªå…³è”ç»´åº¦ï¼ˆå¦‚è¯­è¨€è´¨é‡ã€çŸ¥è¯†å¯†åº¦ã€è¯­ä¹‰å¤æ‚åº¦ç­‰ï¼‰ï¼Œå¯¼è‡´é«˜åˆ†æ•°æ®è™½ç„¶åœ¨ç»¼åˆè¯„åˆ†ä¸Šè¡¨ç°ä¼˜å¼‚ï¼Œå´å®¹æ˜“åœ¨å¤šä¸ªç»´åº¦ä¸Šå‘ˆç°é«˜åº¦è¶‹åŒï¼Œé€ æˆæ•°æ®å¤šæ ·æ€§çš„æ˜¾è‘—ä¸è¶³ã€‚</p>
<p>å°¤ä¸ºä¸¥é‡çš„æ˜¯ï¼Œè¿™ç§å•ä¸€åŒ–çš„ç­›é€‰ç­–ç•¥ç”šè‡³å¯èƒ½æŸå®³ä¸‹æ¸¸ä»»åŠ¡çš„è¡¨ç°ã€‚</p>
<p>é’ˆå¯¹è¿™ä¸€é—®é¢˜ï¼Œç ”ç©¶å›¢é˜Ÿåˆ›æ–°æ€§åœ°æå‡ºäº†ODiSï¼ˆæ­£äº¤å¤šæ ·æ€§æ„ŸçŸ¥é€‰æ‹©æ¡†æ¶ï¼‰ã€‚å…¶æ ¸å¿ƒæµç¨‹åŒ…æ‹¬ï¼š</p>
<p>1ï¼‰å¯¹æ•°æ®è¿›è¡Œå¤šç»´åº¦è¯„ä¼°ï¼Œæ¶µç›–è¯­è¨€è´¨é‡ï¼ˆlanguage qualityï¼‰ã€çŸ¥è¯†/äº‹å®è´¨é‡ï¼ˆknowledge qualityï¼‰ã€è¯­ä¹‰ç†è§£éš¾åº¦ï¼ˆcomprehension difficultyï¼‰ç­‰å…³é”®æŒ‡æ ‡ï¼›</p>
<p>2ï¼‰é€šè¿‡ä¸»æˆåˆ†åˆ†æï¼ˆPCAï¼‰å®ç°ç»´åº¦æ­£äº¤åŒ–å¤„ç†ï¼Œæ¶ˆé™¤å„ç»´åº¦é—´çš„ç›¸å…³æ€§ï¼Œç¡®ä¿ç‰¹å¾ç‹¬ç«‹æ€§ï¼›</p>
<p>3ï¼‰ä¸ºæ¯ä¸ªæ­£äº¤ç»´åº¦è®­ç»ƒç‹¬ç«‹è¯„åˆ†æ¨¡å‹ï¼Œå°†PCAæŠ•å½±å¾—åˆ†å›å½’åˆ°æ•°æ®å±‚é¢ï¼Œå®ç°å¤§è§„æ¨¡è¯­æ–™çš„å¿«é€Ÿè¯„åˆ†ã€‚</p>
<p>åœ¨æ„å»ºè®­ç»ƒé›†æ—¶ï¼Œè¯¥æ–¹æ³•å¹¶éç®€å•é€‰å–æ€»ä½“è¯„åˆ†æœ€é«˜çš„æ•°æ®ï¼Œè€Œæ˜¯ä»æ¯ä¸ªæ­£äº¤ç»´åº¦åˆ†åˆ«ç­›é€‰é«˜åˆ†æ•°æ®ï¼ˆæˆ–æŒ‰æ¯”ä¾‹é‡‡æ ·ï¼‰ï¼Œä»è€Œæ—¢ä¿è¯å¤šç»´è¦†ç›–åˆç»´æŒæ•°æ®å¤šæ ·æ€§ï¼ˆå› ä¸åŒç»´åº¦çš„æœ€ä¼˜æ•°æ®é€šå¸¸å…·æœ‰å·®å¼‚æ€§ï¼‰ã€‚</p>
<p>å®éªŒç»“æœè¡¨æ˜ï¼Œé‡‡ç”¨ODiSç­›é€‰çš„æ•°æ®è®­ç»ƒçš„æ¨¡å‹ï¼Œåœ¨å¤šä¸ªä¸‹æ¸¸ä»»åŠ¡ä¸­å‡æ˜¾è‘—ä¼˜äºä¼ ç»Ÿå•ä¸€è¯„åˆ†åŸºå‡†ã€‚ç ”ç©¶ç‰¹åˆ«å‘ç°ï¼Œå½“ç»´åº¦é—´é‡å ç‡è¢«æ§åˆ¶åœ¨2%ä»¥ä¸‹æ—¶ï¼Œæ¨¡å‹æ€§èƒ½è¡¨ç°æ›´ä¸ºç¨³å®šä¼˜å¼‚ã€‚</p>
<p>è¯¥ç ”ç©¶çš„ç†è®ºä»·å€¼åœ¨äºï¼šé¢ è¦†äº†"é«˜åˆ†å³ä¼˜è´¨è®­ç»ƒæ•°æ®"çš„ä¼ ç»Ÿè®¤çŸ¥ï¼Œç³»ç»Ÿè®ºè¯äº†é€šè¿‡ç»†åˆ†è´¨é‡æŒ‡æ ‡å’Œä¸»åŠ¨å¼•å…¥å¤šæ ·æ€§æ¥æå‡æ¨¡å‹æ³›åŒ–èƒ½åŠ›çš„é‡è¦æ€§ï¼Œè€Œéç›²ç›®è¿½æ±‚æ€»åˆ†æœ€é«˜çš„æ•°æ®ã€‚</p>
<p><strong>å¤šç­–ç•¥é›†æˆé©±åŠ¨ï¼ˆCollaborative / Ensemble Methodsï¼‰</strong></p>
<p>Efficient Pretraining Data Selection via Multi-Actor Collaboration</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/442a3c20bc3646a0965321aacd9df5a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765976845&amp;x-signature=th9AaVcWWJqTYBORzdv7FgZ8yrk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å½“å‰æ•°æ®é€‰æ‹©é¢†åŸŸå·²å‘å±•å‡ºå¤šç§å…ˆè¿›æ–¹æ³•è®ºï¼ˆè´¨é‡å¯¼å‘/å½±å“åŠ›å¯¼å‘/å¤šæ ·æ€§æ„ŸçŸ¥/é¢†åŸŸæ··åˆç­‰ï¼‰ï¼Œå¦‚ä½•é€šè¿‡ååŒæ•´åˆè¿™äº›æ–¹æ³•ä»¥æœ€å¤§åŒ–ä¼˜åŠ¿å¹¶è§„é¿æ½œåœ¨çŸ›ç›¾ï¼Ÿ</p>
<p>ç ”ç©¶å›¢é˜Ÿåˆ›æ–°æ€§åœ°è®¾è®¡äº†å¤šæ™ºèƒ½ä½“ååŒçš„æ•°æ®ç­›é€‰æ¡†æ¶ã€‚</p>
<p>å°†å„ç±»æ•°æ®é€‰æ‹©ç­–ç•¥è§†ä¸ºç‹¬ç«‹è¿è¡Œçš„"æ™ºèƒ½ä½“"ï¼šä¾‹å¦‚ï¼Œè´¨é‡è¿‡æ»¤æ™ºèƒ½ä½“(quality filtering)ä¸“æ³¨æ•°æ®çº¯åº¦ï¼Œå¤šæ ·æ€§æ™ºèƒ½ä½“(diversity)ç»´æŠ¤æ ·æœ¬åˆ†å¸ƒå‡è¡¡ã€‚</p>
<p>å½±å“åŠ›æ™ºèƒ½ä½“(influence)è¯„ä¼°æ•°æ®å¯¹æ¨¡å‹çš„å…³é”®ä½œç”¨ï¼Œé¢†åŸŸæ··åˆæ™ºèƒ½ä½“(domain mixing)ä¼˜åŒ–è·¨é¢†åŸŸæ•°æ®é…æ¯”ã€‚</p>
<p>åœ¨é¢„è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œå„æ™ºèƒ½ä½“ä¼šåŸºäºå®æ—¶æ¨¡å‹çŠ¶æ€åŠ¨æ€æ›´æ–°å…¶ä¼˜å…ˆçº§è§„åˆ™ï¼ˆå³æ ¹æ®å½“å‰æ¨¡å‹æ€§èƒ½è‡ªé€‚åº”è°ƒæ•´æ•°æ®åå¥½ï¼‰ã€‚</p>
<p>ä¸­å¤®è°ƒåº¦å™¨åˆ™é€šè¿‡åŠ¨æ€åˆ†é…å„æ™ºèƒ½ä½“æƒé‡ï¼ˆå†³å®šä¸åŒè®­ç»ƒé˜¶æ®µçš„ä¸»å¯¼ç­–ç•¥ï¼‰ï¼Œå®ç°å¤šç»´åº¦ä¿¡å·çš„æœ‰æ•ˆèåˆã€‚</p>
<p>å®éªŒéªŒè¯è¡¨æ˜ï¼Œç›¸è¾ƒäºå•ä¸€æ–¹æ³•æˆ–å›ºå®šç»„åˆç­–ç•¥ï¼Œè¯¥å¤šæ™ºèƒ½ä½“ååŒæœºåˆ¶ä¸ä»…èƒ½æ˜¾è‘—æå‡é¢„è®­ç»ƒæ”¶æ•›é€Ÿåº¦ï¼Œæ›´åœ¨æ•°æ®åˆ©ç”¨ç‡ä¸Šå®ç°çªç ´æ€§æ”¹è¿›ã€‚</p>
<p>è¿™é¡¹å·¥ä½œä¸ºæ•°æ®é€‰æ‹©æä¾›äº†æ›´å…·é€‚åº”æ€§çš„ç³»ç»ŸåŒ–æ–¹æ¡ˆï¼šæ— éœ€å±€é™äºç‰¹å®šç­–ç•¥çš„å–èˆï¼Œè€Œæ˜¯å°†å¤šå…ƒç­–ç•¥æ„å»ºä¸ºä¸“å®¶åä½œç½‘ç»œï¼Œä½¿ç³»ç»Ÿèƒ½å¤Ÿè‡ªä¸»é€‰æ‹©ä¸æ¨¡å‹çŠ¶æ€æœ€ä¼˜åŒ¹é…çš„æ–¹æ³•ç»„åˆã€‚</p>
<p><strong>ç»“æ„åŒ–çŸ¥è¯†/æŠ€èƒ½é©±åŠ¨ï¼ˆSkill- or Structure-aware Selectionï¼‰</strong></p>
<p>MASS: Mathematical Data Selection via Skill Graphs</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/969d8e08404949589305de22c79a34b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765976845&amp;x-signature=oGodgvOx%2BOlAZG2NwQPtf7FGICg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>MASS çš„æ ¸å¿ƒåˆ›æ–°åœ¨äºæ•°å­¦ä¸æ¨ç†é¢†åŸŸé¢„è®­ç»ƒæ•°æ®çš„ç­›é€‰æœºåˆ¶ã€‚</p>
<p>ç ”ç©¶å›¢é˜ŸæŒ‡å‡ºï¼Œæ•°å­¦æ–‡æœ¬è•´å«ç‹¬ç‰¹çš„ç»“æ„ç‰¹å¾ä¸æŠ€èƒ½å…³è”æ€§ï¼Œä¼ ç»Ÿé€šç”¨è¿‡æ»¤æ–¹æ³•éš¾ä»¥ç²¾å‡†è¯†åˆ«è¿™äº›ç‰¹æ€§ã€‚</p>
<p>ä¸ºæ­¤ï¼ŒMASS åˆ›æ–°æ€§åœ°å¼•å…¥"æŠ€èƒ½å›¾è°±"ï¼ˆskill graphï¼‰æ¡†æ¶ï¼Œé€šè¿‡å¯è§†åŒ–æ•°å­¦èƒ½åŠ›é—´çš„æ‹“æ‰‘å…³ç³»å®ç°æ•°æ®ä»·å€¼é‡åŒ–è¯„ä¼°ã€‚</p>
<p>è¯¥æ–¹æ³•å®æ–½åˆ†ä¸ºä¸‰ä¸ªå…³é”®æ­¥éª¤ï¼š</p>
<p>1ï¼‰ä»æƒå¨æ•°å­¦èµ„æºä¸­æå–åŸºç¡€æ•°å­¦æŠ€èƒ½ï¼ˆå¦‚ä»£æ•°ã€å‡ ä½•ã€å¾®ç§¯åˆ†ã€è¯æ˜æ¨ç†ç­‰ï¼‰ï¼Œå»ºç«‹ä»¥æŠ€èƒ½ä¸ºèŠ‚ç‚¹ã€ä¾èµ–å…³ç³»ä¸ºè¾¹çš„çŸ¥è¯†å›¾è°±ï¼›</p>
<p>2ï¼‰å¯¹å€™é€‰æ•°å­¦æ–‡æœ¬è¿›è¡ŒæŠ€èƒ½æˆåˆ†åˆ†æï¼Œå°†å…¶ä¸å›¾è°±è¿›è¡ŒåŒ¹é…ï¼Œç»¼åˆè®¡ç®—è¦†ç›–æŠ€èƒ½çš„æ•°é‡ã€å±‚çº§æƒé‡å’Œå…³é”®æ€§æŒ‡æ ‡ï¼›</p>
<p>3ï¼‰ä¾æ®å¤šç»´è¯„åˆ†ä½“ç³»å¯¹æ•°æ®æ’åºï¼Œç­›é€‰å‡ºå¯¹æ¨¡å‹æ•°å­¦èƒ½åŠ›æå‡æœ€å…·é’ˆå¯¹æ€§çš„æ•°æ®å­é›†ã€‚</p>
<p>å®éªŒç»“æœè¡¨æ˜ï¼Œé‡‡ç”¨MASSç­›é€‰æ•°æ®çš„æ¨¡å‹åœ¨æ•°å­¦æ¨ç†ä»»åŠ¡ä¸­è¡¨ç°å…¨é¢è¶…è¶ŠåŸºå‡†æ¨¡å‹ï¼Œå°¤å…¶åœ¨æ•°æ®è§„æ¨¡ç¼©å‡50%-70%çš„æ¡ä»¶ä¸‹ï¼Œä»èƒ½å®ç°4%-6%çš„æ€§èƒ½æå‡ã€‚</p>
<p>è¿™ä¸€éªŒè¯å……åˆ†è¯æ˜ï¼ŒåŸºäºé¢†åŸŸçŸ¥è¯†æ„å»ºç»“æ„åŒ–æŠ€èƒ½å›¾è°±å¹¶æŒ‡å¯¼æ•°æ®é€‰æ‹©ï¼Œæ˜¯ä¼˜åŒ–æ¨¡å‹ä¸“ä¸šèƒ½åŠ›çš„æœ‰æ•ˆèŒƒå¼ã€‚</p>
<p><strong>ä»»åŠ¡ç›¸å…³æ€§é©±åŠ¨ï¼ˆTask-aware Data Selectionï¼‰</strong></p>
<p>Language Models Improve When Pretraining Data Matches Target Tasks</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37605e64ca58451ea2cdd17989d51506~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765976845&amp;x-signature=tKW7AwvqwlFhUXK%2F%2F5qQ0muM1Vw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¯¥ç ”ç©¶èšç„¦äºé¢„è®­ç»ƒè¯­è¨€æ¨¡å‹çš„æ ¸å¿ƒé—®é¢˜ï¼šå½“è®­ç»ƒæ•°æ®åˆ†å¸ƒä¸ç›®æ ‡ä»»åŠ¡é«˜åº¦ä¸€è‡´æ—¶ï¼Œæ¨¡å‹æ€§èƒ½èƒ½å¦å®ç°æ˜¾è‘—ä¼˜åŒ–ã€‚</p>
<p>ç ”ç©¶è€…åˆ›æ–°æ€§åœ°æå‡ºäº†ä¸€ç§é«˜æ•ˆæ•°æ®ç­›é€‰æ¡†æ¶BETRï¼ˆBenchmark-Targeted Rankingï¼‰</p>
<p>å…¶æ ¸å¿ƒæœºåˆ¶åŒ…å«ä¸‰ä¸ªæ­¥éª¤ï¼šé¦–å…ˆå°†ç›®æ ‡ä»»åŠ¡æ ·æœ¬ä¸é¢„è®­ç»ƒæ•°æ®å­é›†è¿›è¡Œå‘é‡ç©ºé—´å¯¹é½ï¼Œé€šè¿‡ç›¸ä¼¼åº¦è®¡ç®—å»ºç«‹åˆå§‹æ’åºï¼›</p>
<p>ç»§è€Œå€ŸåŠ©è½»é‡åˆ†ç±»å™¨å°†æ’åºç­–ç•¥æ³›åŒ–è‡³å…¨é‡è¯­æ–™åº“ï¼›æœ€ç»ˆç­›é€‰å‡ºä¸ç›®æ ‡ä»»åŠ¡åˆ†å¸ƒåŒ¹é…åº¦æœ€é«˜çš„è®­ç»ƒæ•°æ®ã€‚</p>
<p>é€šè¿‡æ„å»ºæ•°ç™¾ä¸ªå®éªŒæ¨¡å‹å¹¶éªŒè¯ä¸åŒæ•°æ®è§„æ¨¡ä¸‹çš„scaling lawï¼Œç ”ç©¶å‘ç°BETRç­›é€‰çš„æ•°æ®å¯ä½¿è®¡ç®—æ•ˆç‡æå‡2å€ä»¥ä¸Šï¼Œä¸”æ¨¡å‹è¡¨ç°æ˜¾è‘—ä¼˜äºåŸå§‹æ•°æ®æˆ–åŸºç¡€è¿‡æ»¤æ–¹æ³•ã€‚</p>
<p>åœ¨ç›®æ ‡benchmarkä¸ä¸‹æ¸¸ä»»åŠ¡å­˜åœ¨åˆ†å¸ƒåç§»çš„åœºæ™¯ä¸­ï¼ŒBETRä»èƒ½ä¿æŒä¸åŸºå‡†æ•°æ®ç›¸å½“ç”šè‡³æ›´ä¼˜çš„æ€§èƒ½ã€‚</p>
<p>ç ”ç©¶æ˜ç¡®è¯å®ï¼šé¢„è®­ç»ƒæ•°æ®ä¸ä»»åŠ¡éœ€æ±‚çš„åˆ†å¸ƒåŒ¹é…åº¦è¾ƒæ•°æ®è§„æ¨¡æ›´å…·å†³å®šæ€§å½±å“ã€‚é‡‡ç”¨å¯æ‰©å±•çš„è½»é‡çº§ä»»åŠ¡ç›¸å…³æ€§æ’åºæ–¹æ³•ï¼Œèƒ½å¤Ÿåœ¨ç»´æŒè®¡ç®—æˆæœ¬çš„å‰æä¸‹æ˜¾è‘—æå‡æ¨¡å‹è´¨é‡ã€‚</p>
<p><strong>äºŒã€åè®­ç»ƒçš„æ•°æ®é€‰æ‹©</strong></p>
<p><strong>åœ¨çº¿å’Œç¦»çº¿æ•°æ®é€‰æ‹©ç»“åˆ</strong></p>
<p>Towards High Data Efficiency in Reinforcement Learning with Verifiable Reward</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/771460e406224dfaa535fdb096ad1ef0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765976845&amp;x-signature=LpLDTWJIQhwE8Ef%2BAhn7KlK2n78%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>â€ŒåŠ¨æœºâ€Œ</strong></p>
<p>å½“å‰RLVRæ–¹æ³•ä¾èµ–å¢åŠ è®­ç»ƒæ•°æ®è§„æ¨¡ä¸rolloutæ•°é‡æ¥å¢å¼ºæ¨¡å‹æ¨ç†èƒ½åŠ›ï¼Œä½†è¿™ä¸€æ–¹å¼æ˜¾è‘—æå‡äº†è®­ç»ƒæˆæœ¬ï¼ˆè®¡ç®—èµ„æºæ¶ˆè€—ã€æ—¶é—´æŠ•å…¥ï¼‰å¹¶é™ä½äº†æ•°æ®åˆ©ç”¨æ•ˆç‡ã€‚</p>
<p>â€Œç¦»çº¿æ•°æ®é€‰æ‹©â€Œçš„å±€é™æ€§ä½“ç°åœ¨ï¼šä¼ ç»Ÿæ–¹æ³•éœ€åœ¨å…¨é‡æ•°æ®é›†ä¸Šè®­ç»ƒä»¥è¯„ä¼°æ•°æ®é€‰æ‹©æŒ‡æ ‡ï¼ˆå¦‚å¥–åŠ±è¶‹åŠ¿åˆ†æã€æ¢¯åº¦å¯¹é½ï¼‰ï¼Œè®¡ç®—è´Ÿæ‹…æ²‰é‡ï¼›æˆ–ä»…å…³æ³¨å•ä¸€ç»´åº¦ï¼ˆå¦‚æ ·æœ¬éš¾åº¦è¿‡æ»¤ï¼‰ï¼Œå¿½è§†æ ·æœ¬é—´çš„å…³è”æ€§ã€‚</p>
<p>â€Œåœ¨çº¿rolloutæ•ˆç‡é—®é¢˜â€Œï¼šç°æœ‰æ–¹æ³•ï¼ˆä»¥GRESOä¸ºä¾‹ï¼‰ä»…èƒ½å¯¹é›¶æ–¹å·®æ ·æœ¬è¿›è¡Œç²—ç•¥ç­›é€‰ï¼Œæ— æ³•æœ‰æ•ˆè¯†åˆ«å…·æœ‰é«˜æ¢ç´¢æ½œåŠ›çš„æ ·æœ¬ï¼Œå¯¼è‡´å¤§é‡è®¡ç®—èµ„æºè¢«ä½è´¡çŒ®æ ·æœ¬å ç”¨ã€‚</p>
<p><strong>â€Œæ–¹æ³•â€Œ</strong></p>
<p><strong>â€Œå¤šç»´åº¦ç¦»çº¿æ•°æ®ç­›é€‰æ¡†æ¶â€Œ</strong></p>
<p>1.1 é‡‡ç”¨LLMæœ€ç»ˆå±‚tokenåµŒå…¥æ„å»ºæ ·æœ¬è¡¨å¾ç©ºé—´ï¼ŒåŸºäºä½™å¼¦ç›¸ä¼¼åº¦å»ºç«‹ç›¸ä¼¼åº¦å›¾ç½‘ç»œã€‚</p>
<p>1.2 é€šè¿‡PageRankæƒé‡ä¸è¡Œåˆ—å¼ç‚¹è¿‡ç¨‹ååŒä¼˜åŒ–ï¼Œå®ç°å­é›†å¤šæ ·æ€§ä¸å½±å“åŠ›çš„è”åˆæœ€å¤§åŒ–ã€‚</p>
<p>1.3 å¯¹åˆæ­¥ç­›é€‰åçš„å­é›†æ‰§è¡Œç­–ç•¥ç¦»çº¿rolloutï¼Œä»¥æ ·æœ¬å‡†ç¡®ç‡é‡åŒ–éš¾åº¦æŒ‡æ ‡ï¼Œå¹¶æŒ‰æ­£æ€åˆ†å¸ƒä¼˜å…ˆé€‰å–ä¸­ç­‰éš¾åº¦æ ·æœ¬ã€‚</p>
<p><strong>â€ŒåŸºäºç†µçš„åœ¨çº¿rolloutä¼˜åŒ–æœºåˆ¶â€Œ</strong></p>
<p>2.1 è®¾è®¡æ»‘åŠ¨çª—å£å†…å†å²ç†µä¸ä¼˜åŠ¿å‡½æ•°çš„åŠ¨æ€åŠ æƒæŒ‡æ ‡ï¼Œç²¾å‡†è¯†åˆ«é«˜æ¢ç´¢æ½œåŠ›æ ·æœ¬è¿›è¡Œåœ¨çº¿rolloutã€‚</p>
<p>2.2 å®æ–½åŠ¨æ€æ ·æœ¬é‡æ”¾ç­–ç•¥ï¼Œç¡®ä¿è®­ç»ƒè¦†ç›–æ‰€æœ‰æ ·æœ¬çš„å……åˆ†å­¦ä¹ ã€‚</p>
<p><strong>â€Œå®éªŒéªŒè¯â€Œ</strong></p>
<p>è¯¥æ–¹æ³•ä»…éœ€20%æ•°æ®å³å¯è¾¾åˆ°å…¨é‡è®­ç»ƒæ€§èƒ½ï¼ŒåŒæ—¶å®ç°è®­ç»ƒè€—æ—¶é™ä½40%ã€rolloutæ•°é‡å‡å°‘60%çš„ä¼˜åŒ–æ•ˆæœã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ccec261439942269fda3a9fb5e03dc5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765976845&amp;x-signature=rLxwhr5NnMVXiaD51nfyH1Oz1OQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æœ¬æ–‡åœ¨ä¸‰ä¸ªæ¨¡å‹å’Œäº”ä¸ªæ¨ç†æ•°æ®é›†ä¸Šéƒ½è¿›è¡Œäº†è¯¦ç»†çš„å®éªŒï¼Œå®éªŒç»“æœè¡¨æ˜ DEPO åœ¨å„ä¸ªæ•°æ®é›†ä¸Šéƒ½å±•ç°å‡ºå¼ºå¤§çš„æ€§èƒ½å’Œæ•ˆç‡ä¼˜åŠ¿ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/38cf6f8dd5d0485d9f1fe9915fdd30cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765976845&amp;x-signature=FUQEzJitAgyWT8AP5m9%2BVXVzwfQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>åœ¨çº¿æ•°æ®é€‰æ‹©</strong></p>
<p>Act Only When It Pays: Efficient Reinforcement Learning for LLM Reasoning via Selective Rollouts</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b43327d7e226433ebc50ebfd7ed1554b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765976845&amp;x-signature=YLL47yKGQdvZokosQQh1LIxmylw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è®ºæ–‡åˆ†æäº†æç¤ºåœ¨ä¸åŒè®­ç»ƒepochä¸­çš„å¥–åŠ±åŠ¨æ€ï¼Œå‘ç°é›¶æ–¹å·®æç¤ºï¼ˆå³æ‰€æœ‰å“åº”çš„å¥–åŠ±éƒ½ç›¸åŒçš„æç¤ºï¼‰åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­å…·æœ‰å¾ˆå¼ºçš„æ—¶é—´ä¸€è‡´æ€§ã€‚</p>
<p>è‡ªé€‚åº”è°ƒæ•´æ¢ç´¢æ¦‚ç‡ï¼šé‡‡ç”¨äº†ä¸€ç§è‡ªé€‚åº”æœºåˆ¶æ¥è‡ªåŠ¨è°ƒæ•´æ¢ç´¢æ¦‚ç‡ï¼Œæ ¹æ®ç›®æ ‡é›¶æ–¹å·®æ¯”ä¾‹å’Œå®é™…è§‚å¯Ÿåˆ°çš„é›¶æ–¹å·®æ¯”ä¾‹åŠ¨æ€è°ƒæ•´æ¢ç´¢æ¦‚ç‡ã€‚</p>
<p>è‡ªé€‚åº”é‡‡æ ·æ‰¹æ¬¡å¤§å°ï¼šå¦‚æœå½“å‰æ‰¹æ¬¡ä¸­æœ‰æ•ˆæç¤ºçš„æ•°é‡ä¸è¶³ï¼Œç®—æ³•ä¼šæ ¹æ®éœ€è¦åŠ¨æ€è°ƒæ•´é‡‡æ ·æ‰¹æ¬¡å¤§å°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/856319c7d68d4dd1a640ec2fd06cb7f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765976845&amp;x-signature=RSxm9lAghAbIKtLGNkNwjeD17lI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>ç¦»çº¿æ•°æ®é€‰æ‹©</strong></p>
<p>LearnAlign: Reasoning Data Selection for Reinforcement Learning in Large Language Models Based on Improved Gradient Alignment</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a97f74c1a7a4ce684ebb9495d1923ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765976845&amp;x-signature=xcJMr8AeGO64GeSgZSfXBUX8w%2Fw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>â€Œæ¢¯åº¦å¯¹é½â€Œï¼šç ”ç©¶é€šè¿‡ä¸€é˜¶æ³°å‹’å±•å¼€è¿‘ä¼¼æ¨¡å‹å‚æ•°æ›´æ–°å¯¹æŸå¤±å‡½æ•°çš„ä½œç”¨ï¼Œå°†æ•°æ®ç‚¹é—´çš„å½±å“åŠ›é‡åŒ–ä¸ºä¸¤è€…æ¢¯åº¦çš„å†…ç§¯å€¼ã€‚</p>
<p>â€Œå¯å­¦æ€§â€Œï¼šé‡‡ç”¨æˆåŠŸæ¦‚ç‡ä½œä¸ºè¯„ä¼°æŒ‡æ ‡ï¼Œè¡¨å¾æ•°æ®ç‚¹å¯¹æ¨¡å‹æ€§èƒ½ä¼˜åŒ–çš„æ½œåœ¨è´¡çŒ®åº¦ã€‚</p>
<p>â€ŒLearnAlignåˆ†æ•°â€Œï¼šç»¼åˆæ•°æ®å¯å­¦æ€§ä¸æ¢¯åº¦å¯¹é½ç»“æœï¼Œç”Ÿæˆè¯¥åˆ†æ•°ä»¥é‡åŒ–æ•°æ®ç‚¹é—´çš„ç›¸ä¼¼æ€§åŠå­¦ä¹ ä»·å€¼ã€‚</p>
<p><strong>â€Œæ•°æ®ç­›é€‰æµç¨‹â€Œ</strong></p>
<p>â€Œé¢„çƒ­è®­ç»ƒâ€Œï¼šéšæœºæŠ½å–è®­ç»ƒæ•°æ®çš„å°è§„æ¨¡å­é›†è¿›è¡Œåˆå§‹è®­ç»ƒï¼Œä¸ºæ¢¯åº¦ä¼°è®¡æä¾›ç¨³å®šåŸºç¡€ã€‚</p>
<p>â€Œæ¢¯åº¦ä¿¡æ¯å¤„ç†â€Œï¼šåœ¨é¢„çƒ­é˜¶æ®µè®¡ç®—å„æ•°æ®ç‚¹æ¢¯åº¦ï¼Œå¹¶é€šè¿‡éšæœºæŠ•å½±å®ç°é™ç»´ã€‚</p>
<p>â€Œåˆ†æ•°çŸ©é˜µæ„å»ºâ€Œï¼šåŸºäºé™ç»´æ¢¯åº¦æ•°æ®ï¼Œè®¡ç®—æ‰€æœ‰æ•°æ®ç‚¹å¯¹çš„LearnAlignåˆ†æ•°ï¼Œå½¢æˆå®Œæ•´çŸ©é˜µã€‚</p>
<p>â€Œæœ€ç»ˆç­›é€‰â€Œï¼šä¾æ®çŸ©é˜µå‡å€¼æ’åºï¼Œé€‰å–å¾—åˆ†æœ€é«˜çš„å‰Nä¸ªæ•°æ®ç‚¹ä½œä¸ºæœ€ä¼˜å­é›†ã€‚</p>
<p>Reinforcement Learning for Reasoning in Large Language Models with One Training Example</p>
<p>è®ºæ–‡æå‡ºäº†â€œ1-shot RLVRâ€çš„æ¦‚å¿µï¼Œæ—¨åœ¨æ¢ç©¶ä»…ä½¿ç”¨ä¸€ä¸ªè®­ç»ƒæ ·æœ¬æ˜¯å¦èƒ½å¤Ÿå®ç°ä¸ä½¿ç”¨å¤§è§„æ¨¡æ•°æ®é›†ç›¸å½“çš„æ€§èƒ½æå‡ã€‚</p>
<p>é€šè¿‡åˆ†æè®­ç»ƒæ ·æœ¬çš„å†å²æ–¹å·®å¾—åˆ†ï¼Œé€‰æ‹©å…·æœ‰æœ€é«˜æ–¹å·®çš„æ ·æœ¬ä½œä¸ºè®­ç»ƒæ•°æ®ã€‚è¿™ç§æ–¹æ³•åŸºäºå‡è®¾é«˜æ–¹å·®æ ·æœ¬åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­å¯èƒ½æä¾›æ›´ä¸°å¯Œçš„ä¿¡æ¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9795239bddf74e709670bb169d0848b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765976845&amp;x-signature=g9YiJRwxXKU3Z9YEw0boP8tKG80%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>LIMR: Less is More for RL Scaling</p>
<p>ä»¥æ¨¡å‹å¹³å‡å¥–åŠ±æ›²çº¿ä¸ºåŸºå‡†ï¼Œè¡¡é‡å•ä¸ªæ ·æœ¬å­¦ä¹ è½¨è¿¹ä¸æ•´ä½“å­¦ä¹ è½¨è¿¹çš„åŒ¹é…åº¦ã€‚</p>
<p>é€šè¿‡å½’ä¸€åŒ–å¯¹é½åˆ†æ•°è¯„ä¼°æ ·æœ¬å¯¹æ¨¡å‹å­¦ä¹ çš„è´¡çŒ®å€¼ï¼Œåˆ†æ•°è¶Šé«˜è¡¨æ˜æ ·æœ¬ä¸æ¨¡å‹å­¦ä¹ è·¯å¾„çš„ä¸€è‡´æ€§è¶Šå¼ºï¼Œå…¶å¯¹æ¨¡å‹ä¼˜åŒ–çš„ä¿ƒè¿›ä½œç”¨ä¹Ÿè¶Šæ˜¾è‘—ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8170c65a789c421b8f27c66e299d842e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765976845&amp;x-signature=iPghKIwEdsUL%2BSJs334GpfI0J3o%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Data-Efficient RLVR via Off-Policy Influence Guidance</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1216d58140fb47e491c23af134717135~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765976845&amp;x-signature=zsWsQftE0bhZWdPBLqgvSTjwO%2BI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>ç†è®ºæ‰©å±•ä¸æ–¹æ³•åˆ›æ–°â€Œ</strong></p>
<p>å°†ç›‘ç£å­¦ä¹ çš„å½±å“å‡½æ•°ç†è®ºæ¨å¹¿è‡³RLVRé¢†åŸŸï¼Œå»ºç«‹è®­ç»ƒæ ·æœ¬å¯¹ç­–ç•¥æ€§èƒ½å½±å“çš„ä¸€é˜¶è¿‘ä¼¼é‡åŒ–æ¨¡å‹ã€‚</p>
<p>é€šè¿‡ç¦»ç­–ç•¥ä¼°è®¡æŠ€æœ¯ï¼Œåˆ©ç”¨è¡Œä¸ºç­–ç•¥ç”Ÿæˆçš„ç¦»çº¿è½¨è¿¹æ›¿ä»£å®æ—¶ç­–ç•¥æ¢¯åº¦è®¡ç®—ï¼Œå®ç°å®Œå…¨ç¦»çº¿åŒ–çš„é«˜æ•ˆè®­ç»ƒæµç¨‹ã€‚</p>
<p><strong>â€Œè®¡ç®—ä¼˜åŒ–æŠ€æœ¯â€Œ</strong></p>
<p>é‡‡ç”¨ç¨€ç–éšæœºæŠ•å½±æ–¹æ³•ï¼Œåœ¨æ¢¯åº¦è¿ç®—å‰é€šè¿‡éšæœºç»´åº¦ä¸¢å¼ƒä¸ä½ç»´å˜æ¢ï¼Œæ˜¾è‘—å‡å°‘å­˜å‚¨éœ€æ±‚ä¸è®¡ç®—å¤æ‚åº¦ï¼ŒåŒæ—¶å®éªŒè¡¨æ˜è¯¥æ–¹æ³•èƒ½æœ‰æ•ˆä¿æŒå‘é‡å†…ç§¯çš„æ’åºç‰¹æ€§ã€‚</p>
<p><strong>â€Œæ¡†æ¶è®¾è®¡ä¸åº”ç”¨â€Œ</strong></p>
<p>åŸºäºä¸Šè¿°ç†è®ºæ„å»ºå¤šé˜¶æ®µè¯¾ç¨‹å­¦ä¹ ç³»ç»ŸCROPIï¼Œæ¡†æ¶é€šè¿‡åŠ¨æ€ç­›é€‰éªŒè¯é›†å½±å“åŠ›æœ€å¤§çš„æ•°æ®å­é›†ï¼Œåˆ†é˜¶æ®µå®æ–½GRPOç®—æ³•æ›´æ–°ç­–ç•¥ï¼Œå®ç°é«˜æ•ˆæ¸è¿›å¼å­¦ä¹ ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c34bc180b4bb4e8d9bf1212b95461197~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765976845&amp;x-signature=j%2Bhvq41q0e%2F2YrzWBTAiLAzuDmI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>â€Œç¬¬ä¸€é˜¶æ®µâ€Œï¼šé‡‡ç”¨9ké“å‡è¡¡éš¾åº¦é¢˜ç›®ï¼Œæ¯é“é¢˜æ‰§è¡Œ8æ¬¡rolloutè®­ç»ƒï¼Œæ€»åºåˆ—é•¿åº¦24kï¼Œæœ‰æ•ˆé¿å…æ¨¡å‹é™·å…¥æ¨¡å¼å›ºåŒ–ï¼›</p>
<p>â€Œç¬¬äºŒé˜¶æ®µâ€Œï¼šç­›é€‰æç«¯å›°éš¾æ ·æœ¬ï¼Œé€šè¿‡64æ¬¡rolloutçš„é˜¶æ¢¯å¼è®­ç»ƒï¼ˆåˆ†ä¸‰é˜¶æ®µé€æ­¥å¼ºåŒ–ï¼‰ï¼Œä¸æ–­æ¨åŠ¨æ¨¡å‹çªç ´æ€§èƒ½æé™ã€‚</p>
<p><strong>æ›´å¤šAIå¤§æ¨¡å‹å­¦ä¹ è§†é¢‘åŠèµ„æºï¼Œéƒ½åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fyuan.zhipoai.cn%2F" target="_blank" title="https://yuan.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¦»å¼€èˆ’é€‚åŒº100å¤©ï¼Œæˆ‘åæ‚”äº†å—ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7582021506190327854</link>    <guid>https://juejin.cn/post/7582021506190327854</guid>    <pubDate>2025-12-10T13:16:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582021506190327854" data-draft-id="7581995152190963754" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¦»å¼€èˆ’é€‚åŒº100å¤©ï¼Œæˆ‘åæ‚”äº†å—ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-10T13:16:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¼˜å¼§"/> <meta itemprop="url" content="https://juejin.cn/user/852876722177533"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¦»å¼€èˆ’é€‚åŒº100å¤©ï¼Œæˆ‘åæ‚”äº†å—ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/852876722177533/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¼˜å¼§
  </span> <!----> <!----> <div class="vip-level" data-v-cd7d0a50="" data-v-292f6e48=""><span class="tooltip" data-v-cd7d0a50=""><div class="byte-tooltip byte-tooltip--dark" style="display:none;">
        VIP.5 å¦‚é±¼å¾—æ°´
      </div><span class="byte-tooltip__wrapper"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="VIP.5 å¦‚é±¼å¾—æ°´" title="VIP.5 å¦‚é±¼å¾—æ°´" class="lazy" style="aspect-ratio:NaN;" data-v-5244ef91="" data-v-cd7d0a50=""/></span></span></div> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T13:16:40.000Z" title="Wed Dec 10 2025 13:16:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å„ä½æœ‹å‹å¥½ï¼Œæˆ‘æ˜¯ä¼˜å¼§ã€‚ä»Šå¤©æƒ³ç”¨ä¸€ç§è½»æ¾çš„æ–¹å¼ï¼Œè®°å½•ä¸€ä¸ªå°å°çš„é‡Œç¨‹ç¢‘ï¼š<strong>æˆ‘æ¥åˆ°æ–°éƒ¨é—¨ï¼Œå·²ç»æ»¡100å¤©äº†ã€‚</strong></p>
<p>å¦‚æœæŠŠèŒåœºæ¯”ä½œä¸€æ®µæ—…ç¨‹ï¼Œè¿™100å¤©åƒæ˜¯ä»ä¸€æ¡ç†Ÿæ‚‰çš„ä¸»è·¯ï¼Œè½¬å…¥äº†ä¸€æ¡å…¨æ–°çš„å°å¾„ã€‚é£æ™¯ä¸åŒï¼Œè·¯å†µä¹Ÿè¿¥å¼‚ã€‚è¿‡å»ï¼Œæˆ‘æ›´å¤šæ˜¯åœ¨æ—¢å®šæ–¹å‘é‡ŒæŠŠäº‹æƒ…åšæ·±åšé€ï¼›å¦‚ä»Šï¼Œåˆ™åƒæ˜¯åœ¨ä¸€ç‰‡æ–°çš„åœ°åŸºä¸Šï¼Œä¸€ç –ä¸€ç“¦åœ°æ­å»ºèµ·"è§„åˆ™ã€æ–¹æ³•ä¸èŠ‚å¥"ã€‚</p>
<p>æˆ‘ç°åœ¨æ‰€åœ¨çš„å›¢é˜Ÿï¼Œä»äº‹çš„æ˜¯<strong>æ•°æ®æ ‡æ³¨ä¸è¯„æµ‹</strong>ç›¸å…³å·¥ä½œã€‚å¾ˆå¤šäººä¸€å¬"æ ‡æ³¨"ï¼Œç¬¬ä¸€ååº”æ˜¯"æ˜¯ä¸æ˜¯å°±æ˜¯æ‰“æ ‡ç­¾ï¼Ÿ"â€”â€”æˆ‘æœ€åˆä¹Ÿæ˜¯è¿™ä¹ˆæƒ³çš„ã€‚ä½†çœŸæ­£æ·±å…¥ä¹‹åæ‰å‘ç°ï¼šå®ƒæ›´åƒæ˜¯æŠŠäººç±»çš„åˆ¤æ–­ï¼Œè½¬åŒ–ä¸ºä¸€å¥—æ¸…æ™°ã€ä¸€è‡´ã€å¯å¤ç”¨çš„"è¯­è¨€"ã€‚è¿™äº›è¯­è¨€ä¼šå‡ç»“æˆæ•°æ®ï¼Œæ•°æ®ä¼šå¡‘é€ æ¨¡å‹ï¼Œæ¨¡å‹å†åè¿‡æ¥å½±å“äº§å“ä½“éªŒã€‚å®ƒä¸å¼ æ‰¬ï¼Œå´è‡³å…³é‡è¦ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>è¿™100å¤©ï¼Œæˆ‘ä¸»è¦åšäº†ä¸‰ä»¶äº‹</strong></h2>
<p><strong>ç¬¬ä¸€ä»¶ï¼šæŠŠæ¨¡ç³Šå˜æ¸…æ™°ã€‚</strong></p>
<p>æ–°æ–¹å‘é‡Œï¼Œæœ€å¸¸è§çš„å›°éš¾ä¸æ˜¯"åšä¸å‡ºæ¥"ï¼Œè€Œæ˜¯"å¤§å®¶ä»¥ä¸ºç†è§£ä¸€è‡´ï¼Œå…¶å®å„æœ‰å„çš„ç†è§£"ã€‚æ‰€ä»¥æˆ‘èŠ±äº†å¤§é‡æ—¶é—´åš"å¯¹é½"â€”â€”æŠŠéœ€æ±‚å†™æ¸…æ¥šï¼ŒæŠŠè¾¹ç•Œè®²æ˜ç™½ï¼ŒæŠŠå®¹æ˜“äº§ç”Ÿæ­§ä¹‰çš„åœ°æ–¹ç”¨å…·ä½“æ¡ˆä¾‹å›ºå®šä¸‹æ¥ã€‚</p>
<p>è¿™ä»¶äº‹çœ‹ä¼¼ä¸èµ·çœ¼ï¼Œå´èƒ½è®©åæ¥çš„äººå°‘èµ°è®¸å¤šå¼¯è·¯ã€‚</p>
<p><strong>ç¬¬äºŒä»¶ï¼šæŠŠäº‹æƒ…åšå¾—æ›´ç¨³ã€‚</strong></p>
<p>åœ¨è¿™é‡Œï¼Œ"åšå®Œ"ä¸æ˜¯ç»ˆç‚¹ï¼Œ"èƒ½ç¨³å®šäº¤ä»˜"æ‰æ˜¯ã€‚</p>
<p>æˆ‘å‚ä¸æ¢³ç†æµç¨‹ã€å®Œå–„æ£€æŸ¥æœºåˆ¶ï¼Œä¹Ÿä¼šå’Œä¸€çº¿åŒäº‹ä¸€èµ·å¤ç›˜ï¼šå“ªé‡Œæœ€å®¹æ˜“å‡ºé”™ï¼Ÿæ˜¯è§„åˆ™æ²¡è®²æ¸…æ¥šï¼Œè¿˜æ˜¯æ ·ä¾‹ä¸å¤Ÿå……åˆ†ï¼Œè¿˜æ˜¯å·¥å…·è®¾è®¡è®©äººäº§ç”Ÿè¯¯è§£ï¼Ÿ</p>
<p>æˆ‘ä»¬åœ¨åŠªåŠ›æŠŠ"é ç»éªŒ"å˜æˆ"é æœºåˆ¶"ï¼ŒæŠŠ"å‡­æ„Ÿè§‰"å˜æˆ"æœ‰å…±è¯†"ã€‚</p>
<p><strong>ç¬¬ä¸‰ä»¶ï¼šæŠŠç»éªŒæ²‰æ·€ä¸‹æ¥ã€‚</strong></p>
<p>æˆ‘è¶Šæ¥è¶Šç›¸ä¿¡ä¸€ä¸ªæœ´ç´ çš„é“ç†ï¼š<strong>å›¢é˜Ÿçš„æ•ˆç‡ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºèƒ½å¦æŠŠç»éªŒå†™ä¸‹æ¥ã€ä¼ ä¸‹å»ã€å¤ç”¨èµ·æ¥ã€‚</strong></p>
<p>æ‰€ä»¥è¿™æ®µæ—¶é—´ï¼Œæˆ‘æŒç»­åœ¨åšæ–‡æ¡£åŒ–ã€æ ·ä¾‹åº“æ•´ç†ã€å¸¸è§é—®é¢˜æ±‡æ€»ï¼Œè®©æ–°äººä¸Šæ‰‹æ›´å¿«ï¼Œè€åŒäº‹åä½œæ›´é¡ºã€‚</p>
<hr/>
<h2 data-id="heading-1"><strong>è¿™100å¤©ï¼Œæˆ‘æœ€å¤§çš„æ”¶è·</strong></h2>
<p>è¯´å®è¯ï¼Œæ–°æ–¹å‘å¹¶ä¸è½»æ¾ã€‚å®ƒä¸åƒå†²åˆºå‹é¡¹ç›®é‚£æ ·"ç«‹ç«¿è§å½±"ï¼Œæ›´å¤šæ˜¯"æ¶¦ç‰©æ— å£°"ã€‚ä½†ä¹Ÿæ­£å› å¦‚æ­¤ï¼Œå®ƒè®©æˆ‘å­¦ä¼šäº†å¦ä¸€ç§èƒ½åŠ›ï¼š<strong>è€å¿ƒåœ°æŠŠä¸€ä»¶äº‹åšæˆä½“ç³»ã€‚</strong></p>
<p>æˆ‘ä¹Ÿæ›´æ·±åˆ»åœ°ä½“ä¼šåˆ°â€”â€”æ‰€è°“æˆé•¿ï¼Œä¸ä¸€å®šæ˜¯ç«™åˆ°æ›´é«˜çš„ä½ç½®ï¼Œæœ‰æ—¶å€™æ˜¯æ¢ä¸€ä¸ªè§’åº¦çœ‹ä¸–ç•Œï¼šä»è¿½æ±‚ç»“æœï¼Œåˆ°æ„å»ºæ–¹æ³•ï¼›ä»è§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œåˆ°æ¶ˆé™¤ä¸€ç±»é—®é¢˜ã€‚</p>
<hr/>
<h2 data-id="heading-2"><strong>å‡ ç‚¹çœŸå®çš„å°æ„Ÿæ‚Ÿ</strong></h2>
<ul>
<li>å¾ˆå¤šåˆ†æ­§ä¸æ˜¯è°å¯¹è°é”™ï¼Œåªæ˜¯å¤§å®¶ç«™åœ¨ä¸åŒä½ç½®ï¼Œçœ‹åŒä¸€ä»¶äº‹ã€‚</li>
<li>æŠŠè§„åˆ™å†™æ¸…æ¥šï¼Œæ¯”æƒ³è±¡ä¸­æ›´éš¾ï¼›å†™æ¸…æ¥šä¹‹åï¼Œæ¯”æƒ³è±¡ä¸­æ›´æœ‰ä»·å€¼ã€‚</li>
<li>è®©äº‹æƒ…"ç¨³å®š"ï¼Œå¾€å¾€æ¯”è®©äº‹æƒ…"å¿«é€Ÿ"æ›´è€ƒéªŒåŠŸåŠ›ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-3"><strong>å†™åœ¨æœ€å</strong></h2>
<p>100å¤©å½“ç„¶ä¸ç®—é•¿ï¼Œä½†è¶³ä»¥è®©æˆ‘ç¡®è®¤ï¼šæˆ‘å·²ç»åœ¨ä¸€ä¸ªæ–°çš„æ–¹å‘ä¸Šé‡æ–°å‡ºå‘äº†ã€‚ç¦»å¼€ä¸æ˜¯å‘Šåˆ«ï¼Œæ›´åƒæ˜¯æŠŠè‡ªå·±æ¨å…¥ä¸€ä¸ªæ›´é™Œç”Ÿçš„åœºæ™¯ï¼Œå†å­¦ä¸€æ¬¡"å¦‚ä½•æŠŠäº‹æƒ…åšå¥½"ã€‚</p>
<p>æœ€åï¼Œç”¨ä¸€å¥æˆ‘å¾ˆå–œæ¬¢çš„è¯æ”¶å°¾ï¼ˆæˆ‘ä¸€ç›´æ‹¿å®ƒæé†’è‡ªå·±ï¼‰ï¼š</p>
<blockquote>
<p>"è¿™ä¸ªä¸–ç•Œä¸Šæ²¡æœ‰ä»€ä¹ˆç”Ÿæ´»æ–¹å¼æ˜¯å®Œå…¨æ­£ç¡®çš„ï¼Œç¥å±±åœ£æ¹–å¹¶ä¸æ˜¯ç»ˆç‚¹ã€‚æ¥å—å¹³å‡¡çš„è‡ªæˆ‘ï¼Œä½†ä¸æ”¾å¼ƒç†æƒ³å’Œä¿¡ä»°ï¼Œçƒ­çˆ±ç”Ÿæ´»ã€‚æˆ‘ä»¬éƒ½åœ¨è·¯ä¸Šï¼Œä¹Ÿè®¸è·¯çš„å°½å¤´æ˜¯ä»€ä¹ˆï¼Œä»æ¥éƒ½ä¸é‡è¦ã€‚"</p>
</blockquote>
<p>æ„Ÿè°¢è¿™ä¸€è·¯é‡åˆ°çš„æ¯ä¸€ä¸ªäººã€‚ä¹Ÿå¸Œæœ›ä¸‹ä¸€ä¸ª100å¤©ï¼Œæˆ‘èƒ½ç»§ç»­ä¿æŒå¥½å¥‡ã€ä¿æŒç¬ƒå®šï¼ŒæŠŠè¿™æ¡è·¯èµ°å¾—æ›´æ·±ã€æ›´ç¨³ã€‚</p>
<hr/>
<h2 data-id="heading-4"><strong>é¡ºä¾¿æ‰“ä¸ªå°å¹¿å‘Š</strong></h2>
<p>æ—¢ç„¶èŠåˆ°äº†æ•°æ®æ ‡æ³¨ï¼Œä¹Ÿå€Ÿè¿™ä¸ªæœºä¼šè¯´ä¸€å£°ï¼š<strong>æˆ‘ä»¬çš„æ ‡æ³¨å¹³å°å³å°†ä¸Šçº¿ï¼Œç°åœ¨å¼€å§‹æ‹›å‹Ÿæ ‡æ³¨å‘˜å•¦ï¼</strong></p>
<p>å¦‚æœä½ æ˜¯è®¡ç®—æœºç›¸å…³ä¸“ä¸šèƒŒæ™¯ï¼Œå¯¹ä»£ç æœ‰çƒ­æƒ…ï¼Œæƒ³ç”¨ä¸“ä¸šèƒ½åŠ›åšç‚¹æœ‰ä»·å€¼çš„äº‹ï¼ˆé¡ºä¾¿èµšç‚¹å¤–å¿«ï¼‰ï¼Œæ¬¢è¿äº†è§£ä¸€ä¸‹ï¼š</p>
<p><strong>æˆ‘ä»¬åœ¨æ‰¾è¿™æ ·çš„ä½ ï¼š</strong></p>
<ul>
<li><strong>ç ”å‘å·¥ç¨‹å¸ˆ</strong>ï¼Œèƒ½ç‹¬ç«‹ç†è§£å¹¶ä¿®æ”¹å¼€æºæˆ–ä¼ä¸šçº§ä»£ç ï¼Œç†Ÿæ‚‰å•æµ‹ä¸éªŒè¯æµç¨‹</li>
<li><strong>3å¹´ä»¥ä¸Šå¼€å‘ç»éªŒ</strong>ï¼Œç†Ÿæ‚‰ Gitã€å•å…ƒæµ‹è¯•ã€æ¨¡å—åŒ–æ¶æ„ï¼Œèƒ½é˜…è¯»ã€ç†è§£ã€è°ƒè¯•ä¸­å¤§å‹é¡¹ç›®</li>
<li>æŒæ¡ä¸»æµå¼€å‘è¯­è¨€ï¼ˆPython / Java / JS / TS / Rust / C / C++ï¼‰</li>
<li>å…·å¤‡é—®é¢˜æŠ½è±¡ã€ä»£ç é‡æ„ä¸æ€§èƒ½ä¼˜åŒ–ç»éªŒï¼Œèƒ½ä»å¼€å‘è€…è§†è§’æ„é€ é«˜è´¨é‡é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</li>
</ul>
<p><strong>å·¥ä½œæ–¹å¼ï¼š</strong></p>
<ul>
<li>çº¿ä¸Šçµæ´»åŠå…¬ï¼Œæ—¶é—´è‡ªç”±å®‰æ’</li>
<li>æ¯å‘¨æŠ•å…¥ <strong>20å°æ—¶ä»¥ä¸Š</strong> å³å¯</li>
</ul>
<p><strong>è–ªé…¬å¾…é‡ï¼š</strong></p>
<ul>
<li>æ—¶è–ª <strong>50ï½100å…ƒ</strong>ï¼Œå…·ä½“ä»¥é¡¹ç›®æœ€ç»ˆå®šä»·ä¸ºå‡†</li>
</ul>
<p>å½“ç„¶ï¼Œå¦‚æœä½ æ˜¯<strong>æœ¬ç§‘åŠä»¥ä¸Šå­¦å†ã€æœ‰è®¡ç®—æœºç›¸å…³èƒŒæ™¯</strong>çš„åŒå­¦ï¼Œä¹Ÿéå¸¸æ¬¢è¿æŠ¥åâ€”â€”æˆ‘ä»¬åŒæ ·æœŸå¾…æ–°é²œè¡€æ¶²çš„åŠ å…¥ï¼</p>
<p>æ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥ç§ä¿¡æˆ‘ï¼Œæˆ–è€…ç•™è¨€å’¨è¯¢ã€‚æœŸå¾…ä¸ä½ åœ¨æ ‡æ³¨çš„ä¸–ç•Œé‡Œç›¸é‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b97428020c7546358f63495bf510c9ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LyY5byn:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765977400&amp;x-signature=mGucn44Ekj10SZR2l2FMUbCu4ss%3D" alt="1_1067699600_171_85_3_1067549210_6ec3197faa53f1febc00f936e9787654.png" width="30%" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Agentã€‘MemOS æºç ç¬”è®°---(4)---KV Cache]]></title>    <link>https://juejin.cn/post/7582039917216989184</link>    <guid>https://juejin.cn/post/7582039917216989184</guid>    <pubDate>2025-12-10T13:27:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582039917216989184" data-draft-id="7581117416811708459" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Agentã€‘MemOS æºç ç¬”è®°---(4)---KV Cache"/> <meta itemprop="keywords" content="ç®—æ³•,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-10T13:27:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç½—è¥¿çš„æ€è€ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/351470467691175"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Agentã€‘MemOS æºç ç¬”è®°---(4)---KV Cache
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/351470467691175/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç½—è¥¿çš„æ€è€ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T13:27:58.000Z" title="Wed Dec 10 2025 13:27:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ã€Agentã€‘MemOS æºç ç¬”è®°---(4)---KV Cache</h2>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x00 æ¦‚è¦</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x01 åŸç†</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.1 æŠ€æœ¯è·¯å¾„</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.2 å¯¹æ¯”</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.3 ååŒå·¥ä½œ</a></li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x02 å®šä¹‰</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.1 KV Cacheçš„è®°å¿†ç»“æ„</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.2 APIæ€»ç»“ (KVCacheMemory)</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.3 KVCacheMemoryä»£ç </a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.4 æµç¨‹</a></li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x03 é‡è¦ç»„ä»¶</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">3.1 KVCacheItem</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">3.2 build_kv_cache</a></li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x04 ç¤ºä¾‹</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">4.1 ä½•æ—¶ä½¿ç”¨ï¼š</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">4.2 å…³é”®ç‚¹ï¼š</a></li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0xFF å‚è€ƒ</a></p>
</li>
</ul>
<h3 data-id="heading-1">0x00 æ¦‚è¦</h3>
<p>åœ¨MemOSä¸­ï¼ŒKV Cacheæœ€é€‚åˆå­˜å‚¨<strong>è¯­ä¹‰ç¨³å®šä¸”ç»å¸¸å¤ç”¨çš„èƒŒæ™¯ä¿¡æ¯</strong>ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>å¸¸è§é—®é¢˜ï¼ˆFAQsï¼‰æˆ–ç‰¹å®šé¢†åŸŸçŸ¥è¯†</li>
<li>å…ˆå‰çš„å¯¹è¯å†å²</li>
</ul>
<p>è¿™äº›ç¨³å®šçš„<strong>æ˜æ–‡è®°å¿†é¡¹</strong>ç”±<code>MemScheduler</code>æ¨¡å—è‡ªåŠ¨è¯†åˆ«å’Œç®¡ç†ã€‚ä¸€æ—¦è¢«é€‰ä¸­ï¼Œå®ƒä»¬å°±ä¼šè¢«æå‰è½¬æ¢æˆKVæ ¼å¼çš„è¡¨ç¤º(<code>KVCacheItem</code>)ã€‚è¿™ä¸ªé¢„è®¡ç®—æ­¥éª¤ä»¥å¯å¤ç”¨çš„æ ¼å¼å­˜å‚¨è®°å¿†çš„æ¿€æ´»çŠ¶æ€ï¼ˆé”®å€¼å¯¹å¼ é‡ï¼‰ï¼Œå…è®¸å®ƒä»¬åœ¨æ¨ç†æœŸé—´æ³¨å…¥åˆ°æ¨¡å‹çš„æ³¨æ„åŠ›ç¼“å­˜ä¸­</p>
<p>ä¸€æ—¦è¿›è¡Œè½¬æ¢ï¼Œè¿™äº›KVè®°å¿†å°±å¯ä»¥<strong>è·¨æŸ¥è¯¢å¤ç”¨</strong>ï¼Œè€Œä¸éœ€è¦å¯¹åŸå§‹å†…å®¹é‡æ–°ç¼–ç ã€‚è¿™å‡å°‘äº†å¤„ç†å’Œå­˜å‚¨å¤§é‡æ–‡æœ¬çš„è®¡ç®—å¼€é”€ï¼Œä½¿å…¶æˆä¸ºéœ€è¦<strong>å¿«é€Ÿå“åº”æ—¶é—´</strong>å’Œ<strong>é«˜ååé‡</strong>çš„åº”ç”¨ç¨‹åºçš„ç†æƒ³é€‰æ‹©ã€‚</p>
<h3 data-id="heading-2">0x01 åŸç†</h3>
<p>KVCacheMemory æ˜¯MemOSä¸­ç”¨äºå­˜å‚¨å’Œç®¡ç†KV cacheçš„ä¸“ç”¨è®°å¿†æ¨¡å—ï¼Œä¸»è¦ç”¨äºåŠ é€Ÿå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰æ¨ç†å¹¶æ”¯æŒæœ‰æ•ˆçš„ä¸Šä¸‹æ–‡å¤ç”¨ã€‚<strong>KVCacheMemory</strong> å°†æœ€è¿‘æˆ–ç¨³å®šçš„ä¸Šä¸‹æ–‡ä½œä¸ºæ¿€æ´»ç¼“å­˜ä¿å­˜ï¼Œæœ‰åŠ©äºå¯¹äºä¼šè¯å¼å’Œç”Ÿæˆå¼äººå·¥æ™ºèƒ½ç³»ç»Ÿã€‚</p>
<h4 data-id="heading-3">1.1 æŠ€æœ¯è·¯å¾„</h4>
<p>è‹¥è¦æ›¿å¤§æ¨¡å‹è¡¥ä¸Šè®°å¿†çš„ç¼ºå£ï¼Œå¦‚ä»Šçš„äº§ä¸šç•Œå¤§è‡´è¸©å‡ºä¸¤æ¡æŠ€æœ¯è·¯å¾„ï¼Œå„æœ‰åˆ©å¼Šï¼Œä¹Ÿå†³å®šäº†äº§å“è½åœ°çš„ä¸åŒèµ°å‘ã€‚</p>
<ul>
<li>ç¬¬ä¸€æ¡è·¯æ˜¯â€œå¤–æŒ‚å¼â€çš„æ–‡æœ¬è®°å¿†ã€‚åšæ³•ç›´æˆªäº†å½“ï¼šå…ˆæŠŠå¯¹è¯é‡Œçš„å…³é”®ä¿¡æ¯æç‚¼æˆå¯è¯»çš„æ–‡å­—ï¼Œå†å†™è¿›å‘é‡åº“æˆ–å›¾æ•°æ®åº“ï¼›å¾…æ¨¡å‹éœ€è¦æ—¶ï¼ŒæŒ‰è¯­ä¹‰ç›¸ä¼¼åº¦æŠŠå®ƒä»¬é‡æ–°å¬å›å³å¯ã€‚è¿™ç›¸å½“äºç»™æ¨¡å‹é…ä¸€æœ¬éšèº«çš„æ™ºèƒ½è®°äº‹æœ¬ï¼Œå†™è¿›å»çš„æ˜¯ä»€ä¹ˆï¼Œä»¥åè¯»å‡ºæ¥çš„ä¹Ÿæ˜¯ä»€ä¹ˆï¼Œäººç±»ä¸€çœ¼å°±èƒ½æ ¸å¯¹ã€åˆ æ”¹æˆ–å¢è¡¥ã€‚</li>
<li>ç¬¬äºŒæ¡è·¯æ˜¯â€œå†…ç½®å¼â€çš„å¼ é‡è®°å¿†ã€‚åœ¨æ¨¡å‹å†…éƒ¨æ–°å¢æ•°åäº¿å‚æ•°ï¼Œå……å½“éšå¼çš„â€œè®°å¿†æ± â€ï¼Œä¸€åˆ‡ä¿¡æ¯éƒ½è¢«å‹ç¼©æˆé«˜ç»´å¼ é‡å­˜äºå…¶ä¸­ã€‚æ­¤æ³•çš„å¥½å¤„æ˜¯å¬å›è·¯å¾„çŸ­ï¼Œä¸æ¨ç†è¿‡ç¨‹èä¸ºä¸€ä½“ï¼›ä»£ä»·åˆ™æ˜¯ä¸å¯è¯»ã€ä¸å¯æ”¹ï¼Œä¸€æ—¦å†™é”™ï¼Œåªèƒ½é‡æ–°è®­ç»ƒï¼Œæ— æ³•åƒåˆ æ”¹æ–‡æ¡£é‚£æ ·éšæ‰‹ä¿®æ­£ã€‚</li>
</ul>
<p>KVCacheMemory çœ‹èµ·æ¥æ˜¯ä»‹äºä¸¤è€…ä¹‹é—´çš„ä¸€æ¡è·¯ã€‚</p>
<p>KVCacheMemory å¯¹åº”äº†æ¿€æ´»è®°å¿†ï¼Œå³è¿è¡Œæ—¶çš„ KV ç¼“å­˜å’Œéšè—çŠ¶æ€ï¼ˆé«˜æ•ˆç‡ï¼‰ã€‚MemOS ä½¿ç”¨ KVCacheMemory ï¼ˆæœ€è¿‘æˆ–ç¨³å®šçš„ä¸Šä¸‹æ–‡ï¼‰æ¥åŠ é€Ÿå¤šè½®å¯¹è¯ï¼Œé«˜æ•ˆçš„è¿è¡Œæ—¶çŠ¶æ€ç¼“å­˜ã€‚é€‚åˆå¯¹è¯ä¸­çš„å¿«é€Ÿé‡ç”¨ã€å¤šè½®ä¼šè¯ã€‚</p>
<h4 data-id="heading-4">1.2 å¯¹æ¯”</h4>
<p>æˆ‘ä»¬æ¯”å¯¹ä¸‹æ˜¯å¦å¸¦ KV Cache çš„åŒºåˆ«ï¼š</p>
<ul>
<li>
<p>æ— KV Cacheè®°å¿†</p>
<ul>
<li>æ¯ä¸ªæ–°æŸ¥è¯¢éƒ½è¢«æ·»åŠ åˆ°å®Œæ•´çš„æç¤ºæ¨¡æ¿ä¸­ï¼ŒåŒ…æ‹¬èƒŒæ™¯çŸ¥è¯†ã€‚</li>
<li>æ¨¡å‹å¿…é¡»åœ¨æ•´ä¸ªåºåˆ—ä¸Š<strong>é‡æ–°è®¡ç®—tokenåµŒå…¥å’Œæ³¨æ„åŠ›</strong>â€”â€”å³ä½¿æ˜¯æœªæ›´æ”¹çš„è®°å¿†ã€‚</li>
</ul>
</li>
<li>
<p>æœ‰KV Cacheè®°å¿†</p>
<ul>
<li>èƒŒæ™¯çŸ¥è¯†ä»¥é”®å€¼å¯¹å¼ é‡çš„å½¢å¼<strong>ç¼“å­˜ä¸€æ¬¡</strong>ã€‚</li>
<li>å¯¹äºæ¯ä¸ªæŸ¥è¯¢ï¼Œåªå¯¹æ–°ç”¨æˆ·è¾“å…¥ï¼ˆæŸ¥è¯¢tokenï¼‰è¿›è¡Œç¼–ç ã€‚</li>
<li>ä¹‹å‰ç¼“å­˜çš„KVè¢«ç›´æ¥æ³¨å…¥åˆ°æ³¨æ„åŠ›æœºåˆ¶ä¸­ã€‚</li>
</ul>
</li>
</ul>
<p>è¿™ç§åˆ†ç¦»å‡å°‘äº†é¢„å¡«å……é˜¶æ®µçš„å†—ä½™è®¡ç®—ï¼Œä»è€Œå¯¼è‡´:</p>
<ul>
<li>è·³è¿‡èƒŒæ™¯çŸ¥è¯†çš„é‡å¤ç¼–ç </li>
<li>æ›´å¿«çš„æŸ¥è¯¢tokenå’Œç¼“å­˜è®°å¿†ä¹‹é—´çš„æ³¨æ„åŠ›è®¡ç®—</li>
<li><strong>é™ä½é¦–æ¬¡tokenæ—¶é—´(Time To First Token, TTFT)</strong> ç”Ÿæˆè¿‡ç¨‹ä¸­çš„å»¶è¿Ÿ</li>
</ul>
<p>è¿™ç§ä¼˜åŒ–åœ¨ä»¥ä¸‹æ–¹é¢ç‰¹åˆ«æœ‰ä»·å€¼:</p>
<ul>
<li>å¤šå›åˆèŠå¤©æœºå™¨äººäº¤äº’</li>
<li>æ£€ç´¢å¢å¼ºç”Ÿæˆæˆ–ä¸Šä¸‹æ–‡å¢å¼ºç”Ÿæˆ(RAG, CAG)</li>
<li>åœ¨å›ºå®šæ–‡æ¡£æˆ–FAQé£æ ¼è®°å¿†ä¸Šæ“ä½œçš„åŠ©ç†</li>
</ul>
<p>æˆ‘ä»¬å†æ¯”å¯¹ä¸‹ TreeTextMemory å’Œ KVCacheMemory ï¼š</p>
<ul>
<li>TreeTextMemory å°†ä½ çš„é•¿æ—¶è®°å¿†å­˜å‚¨åœ¨å›¾æ•°æ®åº“ï¼ˆNeo4jï¼‰ä¸­ã€‚</li>
<li>KVCacheMemory å°†æœ€è¿‘æˆ–ç¨³å®šçš„ä¸Šä¸‹æ–‡ä½œä¸ºæ¿€æ´»ç¼“å­˜ä¿å­˜ã€‚</li>
<li>äºŒè€…åœ¨ä¸€ä¸ª MemCube ä¸­ååŒå·¥ä½œï¼Œç”±ä½ çš„ <code>MOS</code> Pipeline ç»Ÿä¸€ç®¡ç†ã€‚</li>
</ul>
<h4 data-id="heading-5">1.3 ååŒå·¥ä½œ</h4>
<p>MemOS å°†è®°å¿†è§†ä¸ºä¸€ä¸ªç”Ÿæ€ç³»ç»Ÿâ€”â€”ä¸ä»…ä»…æ˜¯é™æ€æ•°æ®ï¼Œè€Œæ˜¯æ¼”è¿›çš„çŸ¥è¯†ã€‚ä»¥ä¸‹æ˜¯ä¸‰ç§æ ¸å¿ƒè®°å¿†ç±»å‹å¦‚ä½•ååŒå·¥ä½œï¼š</p>

























<table><thead><tr><th>è®°å¿†ç±»å‹</th><th>æè¿°</th><th>ä½•æ—¶ä½¿ç”¨</th></tr></thead><tbody><tr><td><strong>å‚æ•°è®°å¿†</strong></td><td>çŸ¥è¯†æç‚¼åˆ°æ¨¡å‹æƒé‡ä¸­</td><td>å¸¸é’æŠ€èƒ½ã€ç¨³å®šé¢†åŸŸä¸“ä¸šçŸ¥è¯†</td></tr><tr><td><strong>æ¿€æ´»è®°å¿†</strong></td><td>çŸ­æœŸ KV cache å’Œéšè—çŠ¶æ€</td><td>å¯¹è¯ä¸­çš„å¿«é€Ÿé‡ç”¨ã€å¤šè½®ä¼šè¯</td></tr><tr><td><strong>æ˜æ–‡è®°å¿†</strong></td><td>æ–‡æœ¬ã€æ–‡æ¡£ã€å›¾èŠ‚ç‚¹æˆ–å‘é‡å—</td><td>å¯æœç´¢ã€å¯æ£€æŸ¥ã€æ¼”è¿›çŸ¥è¯†</td></tr></tbody></table>
<p>MemOS è®©ç”¨æˆ·åœ¨ç”Ÿå‘½å‘¨æœŸå¾ªç¯ä¸­è°ƒåº¦æ‰€æœ‰ä¸‰ç§è®°å¿†ç±»å‹ï¼š</p>
<ul>
<li>é«˜é¢‘çš„æ˜æ–‡è®°å¿†å¯ä»¥æç‚¼ä¸ºå‚æ•°åŒ–æƒé‡ã€‚</li>
<li>é«˜é¢‘æ¿€æ´»è·¯å¾„æˆä¸ºå¯é‡ç”¨çš„ KV æ¨¡æ¿ã€‚</li>
<li>é™ˆæ—§çš„å‚æ•°åŒ–æˆ–æ¿€æ´»å•å…ƒå¯ä»¥é™çº§ä¸ºæ˜æ–‡è®°å¿†ä»¥è¿›è¡Œè¿½æº¯ã€‚</li>
</ul>
<p>ä½¿ç”¨ MemOSï¼Œç”¨æˆ·çš„ AI ä¸ä»…ä»…æ˜¯å­˜å‚¨äº‹å®â€”â€”å®ƒ<strong><strong>è®°å¿†</strong></strong>ã€<strong><strong>ç†è§£</strong></strong>å’Œ<strong><strong>æˆé•¿</strong></strong>ã€‚</p>
<p><strong>æ·±å…¥ç†è§£</strong></p>
<ul>
<li>éšç€æ—¶é—´çš„æ¨ç§»ï¼Œé¢‘ç¹ä½¿ç”¨çš„æ˜æ–‡è®°å¿†å¯ä»¥æç‚¼ä¸ºå‚æ•°åŒ–å½¢å¼ã€‚</li>
<li>å¾ˆå°‘ä½¿ç”¨çš„æƒé‡æˆ–ç¼“å­˜å¯ä»¥é™çº§ä¸ºçº¯æ–‡æœ¬å­˜å‚¨ä»¥è¿›è¡Œå®¡è®¡å’Œé‡æ–°è®­ç»ƒã€‚</li>
</ul>
<h3 data-id="heading-6">0x02 å®šä¹‰</h3>
<h4 data-id="heading-7">2.1 KV Cacheçš„è®°å¿†ç»“æ„</h4>
<p>é€šè¿‡<code>KVCacheMemory</code>å®ç°åŸºäºKVçš„è®°å¿†å¤ç”¨ï¼Œåœ¨ä¿æŒç›¸åŒè¾“å‡ºçš„åŒæ—¶ï¼Œå¤§å¤§å‡å°‘äº†æ¨¡å‹å¤§å°å’ŒæŸ¥è¯¢ç±»å‹ä¹‹é—´çš„å»¶è¿Ÿã€‚é€šè¿‡å°†å¯å¤ç”¨è®°å¿†ä»æ˜æ–‡æç¤ºè½¬ç§»åˆ°é¢„å…ˆè®¡ç®—çš„KV Cacheï¼ŒMemOSæ¶ˆé™¤äº†å†—ä½™çš„ä¸Šä¸‹æ–‡ç¼–ç ï¼Œå¹¶å®ç°äº†æ›´å¿«çš„å“åº”æ—¶é—´ï¼Œç‰¹åˆ«æ˜¯åœ¨å®æ—¶çš„ã€è®°å¿†å¢å¼ºçš„LLMåº”ç”¨ç¨‹åºä¸­ã€‚</p>
<p>æ¯ä¸ªç¼“å­˜è¢«å­˜å‚¨ä¸ºä¸€ä¸ª<code>KVCacheItem</code>:</p>

























<table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>kv_cache_id</code></td><td><code>str</code></td><td>ç¼“å­˜ä¸­çš„å”¯ä¸€ID(UUID)</td></tr><tr><td><code>kv_cache</code></td><td><code>DynamicCache</code></td><td>å®é™…çš„KV Cache(transformers)</td></tr><tr><td><code>metadata</code></td><td><code>dict</code></td><td>å…ƒæ•°æ® (æº, æŠ½å–æ—¶é—´ç­‰.)</td></tr></tbody></table>
<p>æ€»ä½“é€»è¾‘å¦‚ä¸‹ï¼š</p>
<ul>
<li>KVCacheItem æ˜¯æ•°æ®è½½ä½“ï¼ŒKVCacheMemory æ˜¯ç®¡ç†å¤šä¸ªKVCacheItem çš„å†…å­˜ç³»ç»Ÿï¼Œå¯¹å¤–æä¾›æ“ä½œæ¥å£ã€‚</li>
<li>KVCacheMemory æ˜¯ç®¡ç†å¤šä¸ª KVCacheItem çš„å†…å­˜ç³»ç»Ÿï¼ˆä½¿ç”¨kv_cache_memoriesè¿™ä¸ªå­—å…¸ç»“æ„æ¥ä¿å­˜ï¼‰ï¼Œæä¾›äº†CRUDæ“ä½œï¼Œè´Ÿè´£ KVCacheItem çš„åˆ›å»ºã€å­˜å‚¨ã€æ£€ç´¢ã€åˆå¹¶å’ŒæŒä¹…åŒ–ã€‚</li>
<li>KVCacheItem æ˜¯å•ä¸ªæ¿€æ´»è®°å¿†çš„æ•°æ®ç»“æ„ã€‚ç»§æ‰¿è‡ªåŸºç¡€æ¿€æ´»å†…å­˜é¡¹ï¼Œä¸“é—¨å­˜å‚¨ LLM çš„åŠ¨æ€ KV ç¼“å­˜ï¼Œæ”¯æŒè‡ªå®šä¹‰å…ƒæ•°æ®å’Œå…³è”æ–‡æœ¬è®°å½•ã€‚KVCacheItem åŒ…å«å¤šä¸ªKVCacheRecordsï¼ŒKVCacheRecordså­˜å‚¨ä¸ç¼“å­˜ç›¸å…³çš„æ–‡æœ¬è®°å¿†ä¿¡æ¯ã€‚</li>
</ul>
<h4 data-id="heading-8">2.2 APIæ€»ç»“ (KVCacheMemory)</h4>
<p>KVCacheMemory æä¾›äº†CRUDæ“ä½œï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p>
<p>åˆå§‹åŒ–ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">KVCacheMemory</span>(config:Â KVCacheMemoryConfig)
</code></pre>
<p>æ ¸å¿ƒæ–¹æ³•å¦‚ä¸‹ï¼š</p>





















































<table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>extract(text)</code></td><td>ä½¿ç”¨LLMä»è¾“å…¥æ–‡æœ¬ä¸­æå–KV Cache</td></tr><tr><td><code>add(memories)</code></td><td>æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ª<code>KVCacheItem</code>åˆ°è®°å¿†ä¸­</td></tr><tr><td><code>get(memory_id)</code></td><td>æ ¹æ®IDè·å–å•ä¸ªç¼“å­˜</td></tr><tr><td><code>get_by_ids(ids)</code></td><td>æ ¹æ®IDsè·å–å¤šä¸ªç¼“å­˜</td></tr><tr><td><code>get_all()</code></td><td>è¿”å›æ‰€æœ‰å­˜å‚¨çš„ç¼“å­˜</td></tr><tr><td><code>get_cache(cache_ids)</code></td><td>ä»å¤šä¸ªIDsåˆå¹¶å¹¶è¿”å›ç»„åˆç¼“å­˜</td></tr><tr><td><code>delete(ids)</code></td><td>é€šè¿‡IDsåˆ é™¤ç¼“å­˜</td></tr><tr><td><code>delete_all()</code></td><td>åˆ é™¤æ‰€æœ‰ç¼“å­˜</td></tr><tr><td><code>dump(dir)</code></td><td>å°†æ‰€æœ‰ç¼“å­˜åºåˆ—åŒ–åˆ°ç›®å½•ä¸­çš„pickleæ–‡ä»¶</td></tr><tr><td><code>load(dir)</code></td><td>ä»ç›®å½•ä¸­çš„pickleæ–‡ä»¶åŠ è½½ç¼“å­˜</td></tr><tr><td><code>from_textual_memory(mem)</code></td><td>å°†<code>TextualMemoryItem</code> è½¬æ¢ä¸º <code>KVCacheItem</code></td></tr></tbody></table>
<p>å½“è°ƒç”¨<code>dump(dir)</code>, ç³»ç»Ÿå†™åˆ°:</p>
<pre><code class="hljs">/
</code></pre>
<p>è¯¥æ–‡ä»¶åŒ…å«æ‰€æœ‰KV Cacheçš„pickleå­—å…¸ï¼Œå¯ä»¥ä½¿ç”¨<code>load(dir)</code>é‡æ–°åŠ è½½ã€‚</p>
<h4 data-id="heading-9">2.3 KVCacheMemoryä»£ç </h4>
<p>KVCacheMemoryï¼š</p>
<ul>
<li>è¯¥ç±»æ˜¯åŸºäºé”®å€¼ç¼“å­˜çš„æ¿€æ´»å†…å­˜å­˜å‚¨æœºåˆ¶ï¼Œç”¨äºç®¡ç† LLM çš„é”®å€¼ç¼“å­˜ï¼ˆKV Cacheï¼‰</li>
<li>æä¾›äº†å®Œæ•´çš„é”®å€¼ç¼“å­˜æå–ã€æ·»åŠ ã€æŸ¥è¯¢ã€åˆå¹¶ã€åˆ é™¤ç­‰åŠŸèƒ½</li>
<li>æ”¯æŒå°†æ–‡æœ¬å†…å®¹è½¬æ¢ä¸º KV ç¼“å­˜æ ¼å¼ï¼Œä¹Ÿæ”¯æŒä¸æ–‡æœ¬å†…å­˜é¡¹çš„ç›¸äº’è½¬æ¢</li>
<li>ç‰¹è‰²æ˜¯é’ˆå¯¹ä¸åŒç‰ˆæœ¬çš„ transformers åº“è¿›è¡Œäº†å…¼å®¹å¤„ç†ï¼Œå®ç°äº†é«˜æ•ˆçš„å¤šå±‚ç¼“å­˜åˆå¹¶æ“ä½œï¼Œé€šè¿‡æ‰¹é‡æ‹¼æ¥å¼ é‡æå‡æ€§èƒ½</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64f5e3319eb04d6c8aab313bfb499189~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765978078&amp;x-signature=zsYh%2FwW%2FnpTvEiK2dd%2Bd5lagvL4%3D" alt="memos-kv-1" loading="lazy"/></p>
<p>memos-kv-1</p>
<p>å…·ä½“ä»£ç å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">class</span>Â <span class="hljs-selector-tag">KVCacheMemory</span>(BaseActMemory):
Â Â Â Â <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;
Â Â Â Â ç”¨äºæ¿€æ´»å†…å­˜çš„é”®å€¼ç¼“å­˜å­˜å‚¨å™¨ã€‚
Â Â Â Â è¿™ç§å†…å­˜ç±»å‹è®¾è®¡ç”¨äºå­˜å‚¨å’Œæ£€ç´¢é”®å€¼ç¼“å­˜ã€‚
Â Â Â Â <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;

Â Â Â Â @<span class="hljs-selector-tag">require_python_package</span>(
Â Â Â Â Â Â Â Â import_name=&amp;#<span class="hljs-number">34</span>;torch&amp;#<span class="hljs-number">34</span>;,
Â Â Â Â Â Â Â Â install_link=&amp;#<span class="hljs-number">34</span>;<span class="hljs-attribute">https</span>:<span class="hljs-comment">//pytorch.org/get-started/locally/&amp;#34;,</span>
Â Â Â Â )
Â Â Â Â <span class="hljs-selector-tag">def</span>Â <span class="hljs-selector-tag">__init__</span>(self,Â <span class="hljs-attribute">config</span>:Â KVCacheMemoryConfig)Â <span class="hljs-selector-tag">-</span>&gt;Â <span class="hljs-selector-tag">None</span>:
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;ä½¿ç”¨é…ç½®åˆå§‹åŒ–<span class="hljs-selector-tag">KV</span>ç¼“å­˜å­˜å‚¨å™¨ã€‚<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">self</span><span class="hljs-selector-class">.config</span>Â =Â <span class="hljs-selector-tag">config</span>Â Â #Â å­˜å‚¨é…ç½®ä¿¡æ¯
Â Â Â Â Â Â Â Â #Â æ ¹æ®é…ç½®åˆ›å»º<span class="hljs-selector-tag">LLM</span>å®ä¾‹ï¼Œç”¨äºæå–<span class="hljs-selector-tag">KV</span>ç¼“å­˜
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">self</span><span class="hljs-selector-class">.llm</span>Â =Â <span class="hljs-selector-tag">LLMFactory</span><span class="hljs-selector-class">.from_config</span>(config.extractor_llm)
Â Â Â Â Â Â Â Â #Â å­˜å‚¨<span class="hljs-selector-tag">KV</span>ç¼“å­˜é¡¹çš„å­—å…¸ï¼Œä»¥<span class="hljs-selector-tag">ID</span>ä¸ºé”®
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">self</span><span class="hljs-selector-class">.kv_cache_memories</span>:Â <span class="hljs-selector-tag">dict</span><span class="hljs-selector-attr">[str,Â KVCacheItem]</span>Â =Â {}

Â Â Â Â <span class="hljs-selector-tag">def</span>Â <span class="hljs-selector-tag">extract</span>(self,Â <span class="hljs-attribute">text</span>:Â str)Â <span class="hljs-selector-tag">-</span>&gt;Â <span class="hljs-selector-tag">KVCacheItem</span>:
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;åŸºäºæ–‡æœ¬æå–å†…å­˜ã€‚

Â Â Â Â Â Â Â Â ä½¿ç”¨<span class="hljs-selector-tag">LLM</span>ä»æä¾›çš„æ–‡æœ¬ä¸­æ„å»º<span class="hljs-selector-tag">KV</span>ç¼“å­˜ã€‚

Â Â Â Â Â Â Â Â å‚æ•°:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">text</span>:Â ç”¨äºæå–å†…å­˜çš„è¾“å…¥æ–‡æœ¬

Â Â Â Â Â Â Â Â è¿”å›:
Â Â Â Â Â Â Â Â Â Â Â Â æå–çš„å†…å­˜é¡¹
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;
Â Â Â Â Â Â Â Â #Â ä½¿ç”¨<span class="hljs-selector-tag">LLM</span>ä»æ–‡æœ¬æ„å»º<span class="hljs-selector-tag">KV</span>ç¼“å­˜
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">kv_cache</span>Â =Â <span class="hljs-selector-tag">self</span><span class="hljs-selector-class">.llm</span><span class="hljs-selector-class">.build_kv_cache</span>(text)

Â Â Â Â Â Â Â Â #Â åˆ›å»ºåŒ…å«æå–çš„ç¼“å­˜çš„<span class="hljs-selector-tag">KV</span>ç¼“å­˜é¡¹
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">cache_item</span>Â =Â <span class="hljs-selector-tag">KVCacheItem</span>(
Â Â Â Â Â Â Â Â Â Â Â Â memory=kv_cache,
Â Â Â Â Â Â Â Â Â Â Â Â metadata={<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">source_text</span><span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;:Â <span class="hljs-selector-tag">text</span>,Â <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">extracted_at</span><span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;:Â <span class="hljs-selector-tag">datetime</span><span class="hljs-selector-class">.now</span>()<span class="hljs-selector-class">.isoformat</span>()},
Â Â Â Â Â Â Â Â )

Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">return</span>Â <span class="hljs-selector-tag">cache_item</span>

Â Â Â Â <span class="hljs-selector-tag">def</span>Â <span class="hljs-selector-tag">add</span>(self,Â <span class="hljs-attribute">memories</span>:Â list[KVCacheItem])Â <span class="hljs-selector-tag">-</span>&gt;Â <span class="hljs-selector-tag">None</span>:
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;å°†å†…å­˜æ·»åŠ åˆ°<span class="hljs-selector-tag">KV</span>ç¼“å­˜å­˜å‚¨å™¨ä¸­ã€‚

Â Â Â Â Â Â Â Â å‚æ•°:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">memories</span>:Â è¦æ·»åŠ çš„<span class="hljs-selector-tag">KV</span>ç¼“å­˜é¡¹åˆ—è¡¨
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">for</span>Â <span class="hljs-selector-tag">memory</span>Â <span class="hljs-selector-tag">in</span>Â <span class="hljs-selector-tag">memories</span>:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">self</span><span class="hljs-selector-class">.kv_cache_memories</span><span class="hljs-selector-attr">[memory.id]</span>Â =Â <span class="hljs-selector-tag">memory</span>

Â Â Â Â <span class="hljs-selector-tag">def</span>Â <span class="hljs-selector-tag">get_cache</span>(self,Â <span class="hljs-attribute">cache_ids</span>:Â list[str])Â <span class="hljs-selector-tag">-</span>&gt;Â <span class="hljs-selector-tag">DynamicCache</span>Â |Â <span class="hljs-selector-tag">None</span>:
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;å°†å¤šä¸ª<span class="hljs-selector-tag">KV</span>ç¼“å­˜åˆå¹¶ä¸ºä¸€ä¸ªç¼“å­˜ã€‚

Â Â Â Â Â Â Â Â å‚æ•°:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">cache_ids</span>:Â è¦åˆå¹¶çš„ç¼“å­˜<span class="hljs-selector-tag">ID</span>åˆ—è¡¨

Â Â Â Â Â Â Â Â è¿”å›:
Â Â Â Â Â Â Â Â Â Â Â Â åˆå¹¶åçš„<span class="hljs-selector-tag">DynamicCache</span>ï¼Œå¦‚æœæœªæ‰¾åˆ°ç¼“å­˜åˆ™è¿”å›<span class="hljs-selector-tag">None</span>
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">caches_to_merge</span>Â =Â <span class="hljs-selector-attr">[]</span>
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">for</span>Â <span class="hljs-selector-tag">cache_id</span>Â <span class="hljs-selector-tag">in</span>Â <span class="hljs-selector-tag">cache_ids</span>:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">cache_item</span>Â =Â <span class="hljs-selector-tag">self</span><span class="hljs-selector-class">.kv_cache_memories</span><span class="hljs-selector-class">.get</span>(cache_id)
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">if</span>Â <span class="hljs-selector-tag">cache_item</span>Â <span class="hljs-selector-tag">and</span>Â <span class="hljs-selector-tag">cache_item</span><span class="hljs-selector-class">.memory</span>:
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">caches_to_merge</span><span class="hljs-selector-class">.append</span>(cache_item.memory)

Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">if</span>Â <span class="hljs-selector-tag">not</span>Â <span class="hljs-selector-tag">caches_to_merge</span>:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">return</span>Â <span class="hljs-selector-tag">None</span>

Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">return</span>Â <span class="hljs-selector-tag">self</span><span class="hljs-selector-class">._concat_caches</span>(caches_to_merge)

Â Â Â Â <span class="hljs-selector-tag">def</span>Â <span class="hljs-selector-tag">get</span>(self,Â <span class="hljs-attribute">memory_id</span>:Â str)Â <span class="hljs-selector-tag">-</span>&gt;Â <span class="hljs-selector-tag">KVCacheItem</span>Â |Â <span class="hljs-selector-tag">None</span>:
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;é€šè¿‡<span class="hljs-selector-tag">ID</span>è·å–å†…å­˜ã€‚

Â Â Â Â Â Â Â Â å‚æ•°:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">memory_id</span>:Â è¦æ£€ç´¢çš„å†…å­˜<span class="hljs-selector-tag">ID</span>

Â Â Â Â Â Â Â Â è¿”å›:
Â Â Â Â Â Â Â Â Â Â Â Â å†…å­˜å­—å…¸ï¼Œå¦‚æœæœªæ‰¾åˆ°åˆ™è¿”å›<span class="hljs-selector-tag">None</span>
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">return</span>Â <span class="hljs-selector-tag">self</span><span class="hljs-selector-class">.kv_cache_memories</span><span class="hljs-selector-class">.get</span>(memory_id)

Â Â Â Â <span class="hljs-selector-tag">def</span>Â <span class="hljs-selector-tag">get_by_ids</span>(self,Â <span class="hljs-attribute">memory_ids</span>:Â list[str])Â <span class="hljs-selector-tag">-</span>&gt;Â <span class="hljs-selector-tag">list</span><span class="hljs-selector-attr">[KVCacheItemÂ |Â None]</span>:
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;é€šè¿‡<span class="hljs-selector-tag">ID</span>åˆ—è¡¨è·å–å¤šä¸ªå†…å­˜ã€‚

Â Â Â Â Â Â Â Â å‚æ•°:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">memory_ids</span>:Â è¦æ£€ç´¢çš„å†…å­˜<span class="hljs-selector-tag">ID</span>åˆ—è¡¨

Â Â Â Â Â Â Â Â è¿”å›:
Â Â Â Â Â Â Â Â Â Â Â Â å†…å­˜å­—å…¸åˆ—è¡¨ï¼Œå¯¹äºä¸å­˜åœ¨çš„<span class="hljs-selector-tag">ID</span>è¿”å›<span class="hljs-selector-tag">None</span>
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">results</span>Â =Â <span class="hljs-selector-attr">[]</span>
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">for</span>Â <span class="hljs-selector-tag">memory_id</span>Â <span class="hljs-selector-tag">in</span>Â <span class="hljs-selector-tag">memory_ids</span>:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">memory</span>Â =Â <span class="hljs-selector-tag">self</span><span class="hljs-selector-class">.get</span>(memory_id)
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">results</span><span class="hljs-selector-class">.append</span>(memory)
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">return</span>Â <span class="hljs-selector-tag">results</span>

Â Â Â Â <span class="hljs-selector-tag">def</span>Â <span class="hljs-selector-tag">get_all</span>(self)Â <span class="hljs-selector-tag">-</span>&gt;Â <span class="hljs-selector-tag">list</span><span class="hljs-selector-attr">[KVCacheItem]</span>:
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;è·å–æ‰€æœ‰å†…å­˜ã€‚

Â Â Â Â Â Â Â Â è¿”å›:
Â Â Â Â Â Â Â Â Â Â Â Â å­˜å‚¨å™¨ä¸­æ‰€æœ‰<span class="hljs-selector-tag">KV</span>ç¼“å­˜é¡¹çš„åˆ—è¡¨
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">return</span>Â <span class="hljs-selector-tag">list</span>(self.kv_cache_memories.<span class="hljs-built_in">values</span>())

Â Â Â Â <span class="hljs-selector-tag">def</span>Â <span class="hljs-selector-tag">delete</span>(self,Â <span class="hljs-attribute">memory_ids</span>:Â list[str])Â <span class="hljs-selector-tag">-</span>&gt;Â <span class="hljs-selector-tag">None</span>:
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;é€šè¿‡<span class="hljs-selector-tag">ID</span>åˆ é™¤å†…å­˜ã€‚

Â Â Â Â Â Â Â Â å‚æ•°:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">memory_ids</span>:Â è¦åˆ é™¤çš„å†…å­˜<span class="hljs-selector-tag">ID</span>åˆ—è¡¨
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">for</span>Â <span class="hljs-selector-tag">memory_id</span>Â <span class="hljs-selector-tag">in</span>Â <span class="hljs-selector-tag">memory_ids</span>:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">self</span><span class="hljs-selector-class">.kv_cache_memories</span><span class="hljs-selector-class">.pop</span>(memory_id,Â None)

Â Â Â Â <span class="hljs-selector-tag">def</span>Â <span class="hljs-selector-tag">delete_all</span>(self)Â <span class="hljs-selector-tag">-</span>&gt;Â <span class="hljs-selector-tag">None</span>:
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;åˆ é™¤æ‰€æœ‰å†…å­˜ã€‚<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">self</span><span class="hljs-selector-class">.kv_cache_memories</span><span class="hljs-selector-class">.clear</span>()

Â Â Â Â <span class="hljs-selector-tag">def</span>Â <span class="hljs-selector-tag">from_textual_memory</span>(self,Â <span class="hljs-attribute">mem</span>:Â TextualMemoryItem)Â <span class="hljs-selector-tag">-</span>&gt;Â <span class="hljs-selector-tag">KVCacheItem</span>:
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;
Â Â Â Â Â Â Â Â å°†<span class="hljs-selector-tag">TextualMemoryItem</span>è½¬æ¢ä¸º<span class="hljs-selector-tag">KVCacheItem</span>ã€‚
Â Â Â Â Â Â Â Â æ­¤æ–¹æ³•ä»æ–‡æœ¬å†…å­˜ä¸­æå–é”®å€¼ç¼“å­˜ã€‚
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;
Â Â Â Â Â Â Â Â #Â ä»æ–‡æœ¬å†…å­˜å†…å®¹æ„å»º<span class="hljs-selector-tag">KV</span>ç¼“å­˜
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">kv_cache</span>Â =Â <span class="hljs-selector-tag">self</span><span class="hljs-selector-class">.llm</span><span class="hljs-selector-class">.build_kv_cache</span>(mem.memory)
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">return</span>Â <span class="hljs-selector-tag">KVCacheItem</span>(memory=kv_cache,Â metadata=mem.metadata.<span class="hljs-built_in">model_dump</span>())

Â Â Â Â <span class="hljs-selector-tag">def</span>Â <span class="hljs-selector-tag">_concat_caches</span>(self,Â <span class="hljs-attribute">caches</span>:Â list[DynamicCache])Â <span class="hljs-selector-tag">-</span>&gt;Â <span class="hljs-selector-tag">DynamicCache</span>:
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;
Â Â Â Â Â Â Â Â æ›´å¿«çš„æ‹¼æ¥åˆå¹¶ï¼šå¯¹äºæ¯ä¸ªå±‚ï¼Œæ”¶é›†æ‰€æœ‰ç¼“å­˜çš„å¼ é‡
Â Â Â Â Â Â Â Â å¹¶æ¯å±‚æ‰§è¡Œä¸€æ¬¡<span class="hljs-selector-tag">torch</span><span class="hljs-selector-class">.cat</span>æ“ä½œã€‚
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">import</span>Â <span class="hljs-selector-tag">torch</span>

Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">assert</span>Â <span class="hljs-selector-tag">caches</span>,Â <span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;è‡³å°‘éœ€è¦ä¸€ä¸ªç¼“å­˜<span class="hljs-selector-tag">&amp;</span><span class="hljs-selector-id">#34</span>;
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">if</span>Â <span class="hljs-selector-tag">len</span>(caches)Â ==Â <span class="hljs-number">1</span>:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">return</span>Â <span class="hljs-selector-tag">caches</span><span class="hljs-selector-attr">[0]</span>

Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">merged</span>Â =Â <span class="hljs-selector-tag">DynamicCache</span>()
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">num_layers</span>Â =Â <span class="hljs-selector-tag">len</span>(caches[<span class="hljs-number">0</span>].key_cache)

Â Â Â Â Â Â Â Â #Â å¤„ç†<span class="hljs-selector-tag">transformers</span>Â <span class="hljs-number">4.54</span><span class="hljs-selector-class">.0</span>åŠä»¥ä¸Šç‰ˆæœ¬çš„ç¼“å­˜ç»“æ„
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">if</span>Â <span class="hljs-selector-tag">Version</span>(<span class="hljs-built_in">version</span>(&amp;#<span class="hljs-number">34</span>;transformers&amp;#<span class="hljs-number">34</span>;))Â &gt;=Â <span class="hljs-selector-tag">Version</span>(&amp;#<span class="hljs-number">34</span>;<span class="hljs-number">4.54</span>.<span class="hljs-number">0</span>&amp;#<span class="hljs-number">34</span>;):
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">merged</span><span class="hljs-selector-class">.append_new_layers</span>(num_layersÂ -Â <span class="hljs-number">1</span>)
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">for</span>Â <span class="hljs-selector-tag">layer</span>Â <span class="hljs-selector-tag">in</span>Â <span class="hljs-selector-tag">range</span>(num_layers):
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â #Â æ”¶é›†å½“å‰å±‚çš„æ‰€æœ‰<span class="hljs-selector-tag">K</span>å’Œ<span class="hljs-selector-tag">V</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">keys</span>Â =Â <span class="hljs-selector-attr">[c.layers[layer]</span><span class="hljs-selector-class">.keys</span>Â <span class="hljs-selector-tag">for</span>Â <span class="hljs-selector-tag">c</span>Â <span class="hljs-selector-tag">in</span>Â <span class="hljs-selector-tag">caches</span>]
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">vals</span>Â =Â <span class="hljs-selector-attr">[c.layers[layer]</span><span class="hljs-selector-class">.values</span>Â <span class="hljs-selector-tag">for</span>Â <span class="hljs-selector-tag">c</span>Â <span class="hljs-selector-tag">in</span>Â <span class="hljs-selector-tag">caches</span>]
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â #Â æ¯å±‚æ‰§è¡Œä¸€æ¬¡æ‹¼æ¥
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">merged</span><span class="hljs-selector-class">.layers</span><span class="hljs-selector-attr">[layer]</span><span class="hljs-selector-class">.keys</span>Â =Â <span class="hljs-selector-tag">torch</span><span class="hljs-selector-class">.cat</span>(keys,Â dim=-<span class="hljs-number">2</span>)
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">merged</span><span class="hljs-selector-class">.layers</span><span class="hljs-selector-attr">[layer]</span><span class="hljs-selector-class">.values</span>Â =Â <span class="hljs-selector-tag">torch</span><span class="hljs-selector-class">.cat</span>(vals,Â dim=-<span class="hljs-number">2</span>)

Â Â Â Â Â Â Â Â #Â å¤„ç†æ—§ç‰ˆæœ¬<span class="hljs-selector-tag">transformers</span>çš„ç¼“å­˜ç»“æ„
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">else</span>:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">for</span>Â <span class="hljs-selector-tag">layer</span>Â <span class="hljs-selector-tag">in</span>Â <span class="hljs-selector-tag">range</span>(num_layers):
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â #Â æ”¶é›†å½“å‰å±‚çš„æ‰€æœ‰<span class="hljs-selector-tag">K</span>å’Œ<span class="hljs-selector-tag">V</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">keys</span>Â =Â <span class="hljs-selector-attr">[c.key_cache[layer]</span>Â <span class="hljs-selector-tag">for</span>Â <span class="hljs-selector-tag">c</span>Â <span class="hljs-selector-tag">in</span>Â <span class="hljs-selector-tag">caches</span>]
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">vals</span>Â =Â <span class="hljs-selector-attr">[c.value_cache[layer]</span>Â <span class="hljs-selector-tag">for</span>Â <span class="hljs-selector-tag">c</span>Â <span class="hljs-selector-tag">in</span>Â <span class="hljs-selector-tag">caches</span>]
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â #Â æ¯å±‚æ‰§è¡Œä¸€æ¬¡æ‹¼æ¥
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">merged</span><span class="hljs-selector-class">.key_cache</span><span class="hljs-selector-class">.append</span>(torch.<span class="hljs-built_in">cat</span>(keys,Â dim=-<span class="hljs-number">2</span>))
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">merged</span><span class="hljs-selector-class">.value_cache</span><span class="hljs-selector-class">.append</span>(torch.<span class="hljs-built_in">cat</span>(vals,Â dim=-<span class="hljs-number">2</span>))

Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">return</span>Â <span class="hljs-selector-tag">merged</span>
</code></pre>
<h4 data-id="heading-10">2.4 æµç¨‹</h4>
<p>å‡ ä¸ªé‡è¦çš„æµç¨‹å›¾æ€»ç»“å¦‚ä¸‹ï¼š</p>
<h5 data-id="heading-11">2.4.1 åˆå§‹åŒ–æµç¨‹</h5>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78458bd760bf44b9964728899e51f8d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765978078&amp;x-signature=E5s74L6kysYEs3n%2FAW15%2BuivNII%3D" alt="memos-kv-2" loading="lazy"/></p>
<p>memos-kv-2</p>
<h5 data-id="heading-12">2.4.2 æå–ä¸æ·»åŠ æµç¨‹</h5>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd3a737a9e5a4ff6a6a5802fd66a5ae2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765978078&amp;x-signature=mxvHCMSvbNm0aW7tNj37%2FslaRmg%3D" alt="memos-kv-3" loading="lazy"/></p>
<p>memos-kv-3</p>
<h5 data-id="heading-13">2.4.3 ç¼“å­˜åˆå¹¶æµç¨‹</h5>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4fea80e2833b4cc7ba01ac8897d67a3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765978078&amp;x-signature=poVfMQ5opVMxVhhwulYjR4w3jSo%3D" alt="memos-kv-4" loading="lazy"/></p>
<p>memos-kv-4</p>
<h3 data-id="heading-14">0x03 é‡è¦ç»„ä»¶</h3>
<h4 data-id="heading-15">3.1 KVCacheItem</h4>
<h5 data-id="heading-16">3.1.1 å®šä¹‰</h5>
<ul>
<li>
<p>è¯¥ä»£ç å®šä¹‰äº† MemOS ä¸­æ¿€æ´»å†…å­˜ç›¸å…³çš„æ•°æ®æ¨¡å‹ï¼Œç”¨äºæ ‡å‡†åŒ–å­˜å‚¨ KV ç¼“å­˜åŠå…³è”å…ƒæ•°æ®ã€‚</p>
</li>
<li>
<p>æ ¸å¿ƒæ˜¯<code>KVCacheItem</code>ç±»ï¼Œç»§æ‰¿è‡ªåŸºç¡€æ¿€æ´»å†…å­˜é¡¹ï¼Œä¸“é—¨å­˜å‚¨ LLM çš„åŠ¨æ€ KV ç¼“å­˜ï¼Œæ”¯æŒè‡ªå®šä¹‰å…ƒæ•°æ®å’Œå…³è”æ–‡æœ¬è®°å½•ã€‚</p>
</li>
<li>
<p>è¡ç”Ÿç±»<code>VLLMKVCacheItem</code>é€‚é… vLLM åœºæ™¯ï¼Œå°†ç¼“å­˜å­˜å‚¨æ”¹ä¸ºæç¤ºå­—ç¬¦ä¸²ï¼ˆå›  vLLM åœ¨æœåŠ¡ç«¯é¢„åŠ è½½ KV ç¼“å­˜ï¼‰ã€‚</p>
</li>
<li>
<p>ç‰¹è‰²æ˜¯ä½¿ç”¨ Pydantic æ¨¡å‹å®ç°æ•°æ®ç»“æ„åŒ–ï¼Œè‡ªåŠ¨ç”Ÿæˆå”¯ä¸€ IDï¼Œæ”¯æŒä»»æ„ç±»å‹å­—æ®µï¼ˆé€‚é… DynamicCacheï¼‰ï¼ŒåŒæ—¶é€šè¿‡<code>KVCacheRecords</code>è®°å½•æ–‡æœ¬å†…å­˜æ¥æºå’Œç»„åˆä¿¡æ¯ï¼Œä¿è¯æ•°æ®å¯è¿½æº¯ã€‚</p>
<p>classÂ ActivationMemoryItem(BaseModel):
Â Â Â Â """åŸºç¡€æ¿€æ´»å†…å­˜é¡¹æ¨¡å‹ï¼Œå®šä¹‰æ¿€æ´»å†…å­˜çš„æ ¸å¿ƒç»“æ„"""
Â Â Â Â #Â å†…å­˜é¡¹å”¯ä¸€IDï¼Œé»˜è®¤ä½¿ç”¨UUID4è‡ªåŠ¨ç”Ÿæˆ
Â Â Â Â id:Â strÂ =Â Field(default_factory=lambda:Â str(uuid.uuid4()))
Â Â Â Â #Â å†…å­˜å…·ä½“å†…å®¹ï¼Œæ”¯æŒä»»æ„ç±»å‹
Â Â Â Â memory:Â Any
Â Â Â Â #Â å†…å­˜å…³è”çš„å…ƒæ•°æ®ï¼Œé»˜è®¤ç©ºå­—å…¸
Â Â Â Â metadata:Â dictÂ =Â {}</p>
<p>classÂ KVCacheRecords(BaseModel):
Â Â Â Â """KVç¼“å­˜å…³è”çš„æ–‡æœ¬è®°å½•æ¨¡å‹ï¼Œç”¨äºè¿½æº¯ç¼“å­˜æ¥æº"""
Â Â Â Â #Â è½¬æ¢ä¸ºæ¿€æ´»å†…å­˜çš„æ–‡æœ¬å†…å­˜åˆ—è¡¨
Â Â Â Â text_memories:Â list[str]Â =Â Field(
Â Â Â Â Â Â Â Â default=[],
Â Â Â Â Â Â Â Â description="è½¬æ¢ä¸ºæ¿€æ´»å†…å­˜çš„æ–‡æœ¬å†…å­˜åˆ—è¡¨",
Â Â Â Â )
Â Â Â Â #Â ä½¿ç”¨ç»„è£…æ¨¡æ¿ç»„åˆæ‰€æœ‰æ–‡æœ¬å†…å­˜åçš„å•ä¸€å­—ç¬¦ä¸²
Â Â Â Â composed_text_memory:Â strÂ =Â Field(
Â Â Â Â Â Â Â Â default="",
Â Â Â Â Â Â Â Â description="ä½¿ç”¨ç»„è£…æ¨¡æ¿å°†æ‰€æœ‰æ–‡æœ¬å†…å­˜ç»„åˆæˆçš„å•ä¸€å­—ç¬¦ä¸²",
Â Â Â Â )
Â Â Â Â #Â æäº¤æ—¶é—´ï¼ˆç”¨äºè°ƒåº¦æ¶ˆæ¯ï¼‰ï¼Œé»˜è®¤ä½¿ç”¨UTCå½“å‰æ—¶é—´
Â Â Â Â timestamp:Â datetimeÂ =Â Field(
Â Â Â Â Â Â Â Â default_factory=datetime.utcnow,Â description="è°ƒåº¦æ¶ˆæ¯çš„æäº¤æ—¶é—´"
Â Â Â Â )</p>
<p>classÂ KVCacheItem(ActivationMemoryItem):
Â Â Â Â """KVç¼“å­˜å†…å­˜é¡¹æ¨¡å‹ï¼Œä¸“é—¨å­˜å‚¨é”®å€¼ç¼“å­˜æ•°æ®"""
Â Â Â Â #Â ç¼“å­˜é¡¹å”¯ä¸€IDï¼Œé»˜è®¤ä½¿ç”¨UUID4è‡ªåŠ¨ç”Ÿæˆï¼ˆè¦†ç›–çˆ¶ç±»å­—æ®µï¼‰
Â Â Â Â id:Â strÂ =Â Field(default_factory=lambda:Â str(uuid.uuid4()))
Â Â Â Â #Â å­˜å‚¨KVé”®å€¼å¯¹çš„åŠ¨æ€ç¼“å­˜ï¼Œé»˜è®¤åˆå§‹åŒ–ç©ºDynamicCache
Â Â Â Â memory:Â DynamicCacheÂ =Â Field(
Â Â Â Â Â Â Â Â default_factory=DynamicCache,
Â Â Â Â Â Â Â Â description="ç”¨äºåœ¨å†…å­˜ä¸­å­˜å‚¨é”®å€¼å¯¹çš„åŠ¨æ€ç¼“å­˜",
Â Â Â Â )
Â Â Â Â #Â ä¸KVç¼“å­˜é¡¹å…³è”çš„å…ƒæ•°æ®ï¼Œé»˜è®¤ç©ºå­—å…¸ï¼ˆè¦†ç›–çˆ¶ç±»å­—æ®µï¼‰
Â Â Â Â metadata:Â dictÂ =Â Field(
Â Â Â Â Â Â Â Â default_factory=dict,Â description="ä¸KVç¼“å­˜é¡¹å…³è”çš„å…ƒæ•°æ®"
Â Â Â Â )</p>
<p>Â Â Â Â #Â é…ç½®æ¨¡å‹ä»¥å…è®¸ä»»æ„ç±»å‹å­—æ®µï¼ˆæ”¯æŒDynamicCacheä½œä¸ºå­—æ®µç±»å‹ï¼‰
Â Â Â Â model_configÂ =Â ConfigDict(arbitrary_types_allowed=True)
Â Â Â Â #Â å…³è”çš„æ–‡æœ¬è®°å½•ï¼Œé»˜è®¤åˆå§‹åŒ–ç©ºKVCacheRecords
Â Â Â Â records:Â KVCacheRecordsÂ =Â KVCacheRecords()</p>
<p>classÂ VLLMKVCacheItem(KVCacheItem):
Â Â Â Â """
Â Â Â Â vLLMä¸“ç”¨KVç¼“å­˜é¡¹æ¨¡å‹ï¼Œå­˜å‚¨æç¤ºå­—ç¬¦ä¸²è€ŒéDynamicCacheå¯¹è±¡ã€‚
Â Â Â Â åŸå› æ˜¯vLLMé€šè¿‡é¢„åŠ è½½åœ¨æœåŠ¡ç«¯å¤„ç†KVç¼“å­˜ã€‚
Â Â Â Â """</p>
<p>Â Â Â Â #Â é‡å†™memoryå­—æ®µï¼Œå­˜å‚¨æç¤ºå­—ç¬¦ä¸²è€ŒéDynamicCacheï¼ˆé€‚é…vLLMï¼‰
Â Â Â Â memory:Â strÂ =Â Field(
Â Â Â Â Â Â Â Â default="",
Â Â Â Â Â Â Â Â description="ç”¨äºåœ¨vLLMæœåŠ¡ç«¯é¢„åŠ è½½KVç¼“å­˜çš„æç¤ºå­—ç¬¦ä¸²",
Â Â Â Â )</p>
</li>
</ul>
<h5 data-id="heading-17">3.1.2 å…³è”</h5>
<p>KVCacheItem å’Œ KVCacheMemory æ˜¯äº’ç›¸è”ç³»çš„ã€‚KVCacheItem æ˜¯æ•°æ®å•å…ƒ/å•ä¸ªè®°å¿†å•å…ƒï¼ŒKVCacheMemory æ˜¯ç®¡ç†ç³»ç»Ÿ/æ¿€æ´»è®°å¿†çš„å­˜å‚¨ç³»ç»Ÿã€‚</p>
<ul>
<li>KVCacheMemory æ˜¯ç®¡ç†å¤šä¸ª KVCacheItem çš„å†…å­˜ç³»ç»Ÿï¼Œæä¾›äº†å®Œæ•´çš„CRUDï¼ˆåˆ›å»ºã€å­˜å‚¨ã€æ£€ç´¢ã€åˆå¹¶å’ŒæŒä¹…åŒ–ï¼‰æ“ä½œã€‚</li>
<li>KVCacheMemory ä¸­æœ‰self.kv_cache_memories: dict[str, KVCacheItem] = {}ã€‚</li>
<li>KVCacheRecords æ˜¯ KVCacheItem çš„ä¸€éƒ¨åˆ†ï¼Œä¸º KVCacheItem æä¾›äº†é‡è¦çš„å…ƒæ•°æ®æ”¯æŒï¼Œä½¿å¾—ç³»ç»Ÿå¯ä»¥æœ‰æ•ˆç®¡ç†å’Œè·Ÿè¸ªKV Cache çš„çŠ¶æ€å˜åŒ–ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9557074120a4867885cb17bd995d498~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765978078&amp;x-signature=j3A2feoZvXYsqd8tlrocTErxpfw%3D" alt="memos-kv-5" loading="lazy"/></p>
<p>memos-kv-5</p>
<h4 data-id="heading-18">3.2 build_kv_cache</h4>
<p>KVCacheMemory ä¼šä½¿ç”¨LLMæŠŠæ–‡æœ¬æ„å»ºæˆKV Cacheï¼Œæˆ–è€…è¯´æ˜¯æ„å»ºæˆKV å‘é‡ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">self.llm</span>Â =Â LLMFactory.from_config(config.extractor_llm)

<span class="hljs-attr">kv_cache</span>Â =Â self.llm.build_kv_cache(text)
</code></pre>
<p>HFLLMç±»æ˜¯åŸºäº Hugging Face Transformers çš„ LLM å°è£…ï¼Œæ”¯æŒç¼“å­˜å¢å¼ºç”Ÿæˆï¼ˆCAGï¼‰å’Œé‡‡æ ·åŠŸèƒ½ã€‚</p>
<ul>
<li>æ ¸å¿ƒèƒ½åŠ›æ˜¯å°†å¤šç§æ ¼å¼çš„è¾“å…¥ï¼ˆå­—ç¬¦ä¸²ã€å­—ç¬¦ä¸²åˆ—è¡¨ã€èŠå¤©æ¶ˆæ¯åˆ—è¡¨ï¼‰è½¬æ¢ä¸ºæ ‡å‡† KV ç¼“å­˜ï¼Œä¸ºåç»­ç”Ÿæˆä»»åŠ¡æä¾›ä¸Šä¸‹æ–‡åŠ é€Ÿã€‚</li>
<li>å†…ç½®æ¸©åº¦ã€Top-Kã€Top-P ç­‰é‡‡æ ·ç­–ç•¥çš„æ—¥å¿—å¤„ç†å™¨ï¼Œæ”¯æŒçµæ´»çš„ç”Ÿæˆé…ç½®ã€‚</li>
<li>ç‰¹è‰²æ˜¯è‡ªåŠ¨é€‚é…æ¨¡å‹å’Œåˆ†è¯å™¨åˆå§‹åŒ–ï¼Œæ”¯æŒå¤šç§è¾“å…¥æ ¼å¼æ ‡å‡†åŒ–ï¼Œé€šè¿‡å•æ¬¡å‰å‘ä¼ æ’­é«˜æ•ˆæ„å»º KV ç¼“å­˜ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/682ad97f1e8c43e59d48126caf1dff76~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765978078&amp;x-signature=0ylugVAas%2ByZdF1tABOd3gB9XHc%3D" alt="memos-kv-6" loading="lazy"/></p>
<p>memos-kv-6</p>
<p>åˆå§‹åŒ–æµç¨‹å¦‚ä¸‹:</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3dbe488535b4269801fbb8ee5a715dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765978078&amp;x-signature=ODQR5vEH2vgns%2FuIPeKWwEPgteY%3D" alt="memos-kv-7" loading="lazy"/></p>
<p>memos-kv-7</p>
<p>build_kv_cache()æµç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e826990178c642e187773af1ef7695fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765978078&amp;x-signature=8zbctLkwDuUCuEEpqhu%2F%2Filob6s%3D" alt="memos-kv-8" loading="lazy"/></p>
<p>memos-kv-8</p>
<p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">HFLLM</span>(<span class="hljs-title class_ inherited__">BaseLLM</span>):
Â Â Â Â &amp;<span class="hljs-comment">#34;&amp;#34;&amp;#34;</span>
Â Â Â Â HFLLMï¼šæ”¯æŒç¼“å­˜å¢å¼ºç”Ÿæˆï¼ˆCAGï¼‰å’Œé‡‡æ ·çš„TransformersÂ LLMç±»ã€‚
Â Â Â Â &amp;<span class="hljs-comment">#34;&amp;#34;&amp;#34;Â Â Â Â </span>
Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self,Â config:Â HFLLMConfig</span>):
Â Â Â Â Â Â Â Â &amp;<span class="hljs-comment">#34;&amp;#34;&amp;#34;</span>
Â Â Â Â Â Â Â Â åˆå§‹åŒ–HFLLMæ¨¡å‹å’Œåˆ†è¯å™¨ï¼Œå¹¶è®¾ç½®ç”¨äºé‡‡æ ·çš„æ—¥å¿—å¤„ç†å™¨ã€‚
Â Â Â Â Â Â Â Â &amp;<span class="hljs-comment">#34;&amp;#34;&amp;#34;</span>
Â Â Â Â Â Â Â Â self.configÂ =Â configÂ Â <span class="hljs-comment">#Â å­˜å‚¨æ¨¡å‹é…ç½®ä¿¡æ¯</span>

Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â å¦‚æœæœªæŒ‡å®šæ¨¡å‹ï¼Œä½¿ç”¨é»˜è®¤æ¨¡å‹</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-keyword">not</span>Â self.config.model_name_or_path:
Â Â Â Â Â Â Â Â Â Â Â Â self.config.model_name_or_pathÂ =Â &amp;<span class="hljs-comment">#34;Qwen/Qwen3-1.7B&amp;#34;</span>

Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â åˆå§‹åŒ–HuggingÂ Faceæ¨¡å‹</span>
Â Â Â Â Â Â Â Â self.modelÂ =Â AutoModelForCausalLM.from_pretrained(
Â Â Â Â Â Â Â Â Â Â Â Â self.config.model_name_or_path,Â torch_dtype=&amp;<span class="hljs-comment">#34;auto&amp;#34;,Â device_map=&amp;#34;auto&amp;#34;</span>
Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â åˆå§‹åŒ–åˆ†è¯å™¨ï¼Œå¯ç”¨å¿«é€Ÿåˆ†è¯æ¨¡å¼</span>
Â Â Â Â Â Â Â Â self.tokenizerÂ =Â AutoTokenizer.from_pretrained(
Â Â Â Â Â Â Â Â Â Â Â Â self.config.model_name_or_path,Â use_fast=<span class="hljs-literal">True</span>
Â Â Â Â Â Â Â Â )

Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â åˆå§‹åŒ–ç”¨äºé‡‡æ ·çš„æ—¥å¿—å¤„ç†å™¨åˆ—è¡¨</span>
Â Â Â Â Â Â Â Â processorsÂ =Â []
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ¸©åº¦è°ƒèŠ‚ï¼šæ§åˆ¶ç”Ÿæˆçš„éšæœºæ€§ï¼Œé1.0æ—¶æ·»åŠ </span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-built_in">getattr</span>(self.config,Â &amp;<span class="hljs-comment">#34;temperature&amp;#34;,Â 1.0)Â !=Â 1.0:</span>
Â Â Â Â Â Â Â Â Â Â Â Â processors.append(TemperatureLogitsWarper(self.config.temperature))
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â Top-Ké‡‡æ ·ï¼šé™åˆ¶ä»…ä»æ¦‚ç‡æœ€é«˜çš„Kä¸ªtokenä¸­é€‰æ‹©ï¼ŒK&gt;0æ—¶æ·»åŠ </span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-built_in">getattr</span>(self.config,Â &amp;<span class="hljs-comment">#34;top_k&amp;#34;,Â 0)Â &gt;Â 0:</span>
Â Â Â Â Â Â Â Â Â Â Â Â processors.append(TopKLogitsWarper(self.config.top_k))
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â Top-Pé‡‡æ ·ï¼šé™åˆ¶ä»…ä»ç´¯ç§¯æ¦‚ç‡è¾¾Pçš„tokenå­é›†é€‰æ‹©ï¼Œ0&lt;p&gt;Â DynamicCache:</span>
Â Â Â Â Â Â Â Â &amp;<span class="hljs-comment">#34;&amp;#34;&amp;#34;</span>
Â Â Â Â Â Â Â Â é€šè¿‡å•æ¬¡å‰å‘ä¼ æ’­ä»èŠå¤©æ¶ˆæ¯æ„å»ºKVç¼“å­˜ã€‚
Â Â Â Â Â Â Â Â æ”¯æŒä»¥ä¸‹è¾“å…¥ç±»å‹ï¼š
Â Â Â Â Â Â Â Â Â Â Â Â -Â <span class="hljs-built_in">str</span>ï¼šç”¨ä½œç³»ç»Ÿæç¤ºè¯ã€‚
Â Â Â Â Â Â Â Â Â Â Â Â -Â <span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>]ï¼šæ‹¼æ¥åç”¨ä½œç³»ç»Ÿæç¤ºè¯ã€‚
Â Â Â Â Â Â Â Â Â Â Â Â -Â <span class="hljs-built_in">list</span>[<span class="hljs-built_in">dict</span>]ï¼šç›´æ¥ç”¨ä½œèŠå¤©æ¶ˆæ¯ï¼ˆéœ€åŒ…å«&amp;<span class="hljs-comment">#34;role&amp;#34;å’Œ&amp;#34;content&amp;#34;é”®ï¼‰ã€‚</span>
Â Â Â Â Â Â Â Â æ¶ˆæ¯å§‹ç»ˆä¼šè½¬æ¢ä¸ºæ ‡å‡†èŠå¤©æ¨¡æ¿æ ¼å¼ã€‚
Â Â Â Â Â Â Â Â å¼‚å¸¸ï¼š
Â Â Â Â Â Â Â Â Â Â Â Â ValueErrorï¼šå¦‚æœæ¨¡æ¿å¤„ç†åçš„æç¤ºè¯ä¸ºç©ºã€‚
Â Â Â Â Â Â Â Â è¿”å›ï¼š
Â Â Â Â Â Â Â Â Â Â Â Â DynamicCacheï¼šæ„å»ºå®Œæˆçš„KVç¼“å­˜å¯¹è±¡ã€‚
Â Â Â Â Â Â Â Â &amp;<span class="hljs-comment">#34;&amp;#34;&amp;#34;</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">import</span>Â torch

Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â å¤„ç†å¤šç§è¾“å…¥ç±»å‹ï¼Œç»Ÿä¸€è½¬æ¢ä¸ºæ ‡å‡†èŠå¤©æ¶ˆæ¯æ ¼å¼</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-built_in">isinstance</span>(messages,Â <span class="hljs-built_in">str</span>):
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â å­—ç¬¦ä¸²è¾“å…¥è½¬ä¸ºç³»ç»Ÿæç¤ºè¯æ ¼å¼</span>
Â Â Â Â Â Â Â Â Â Â Â Â messagesÂ =Â [
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &amp;<span class="hljs-comment">#34;role&amp;#34;:Â &amp;#34;system&amp;#34;,</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &amp;<span class="hljs-comment">#34;content&amp;#34;:Â f&amp;#34;BelowÂ isÂ someÂ informationÂ aboutÂ theÂ user.\n{messages}&amp;#34;,</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â ]
Â Â Â Â Â Â Â Â <span class="hljs-keyword">elif</span>Â <span class="hljs-built_in">isinstance</span>(messages,Â <span class="hljs-built_in">list</span>)Â <span class="hljs-keyword">and</span>Â messagesÂ <span class="hljs-keyword">and</span>Â <span class="hljs-built_in">isinstance</span>(messages[<span class="hljs-number">0</span>],Â <span class="hljs-built_in">str</span>):
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â å­—ç¬¦ä¸²åˆ—è¡¨è¾“å…¥æ‹¼æ¥åè½¬ä¸ºç³»ç»Ÿæç¤ºè¯</span>
Â Â Â Â Â Â Â Â Â Â Â Â messagesÂ =Â [
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &amp;<span class="hljs-comment">#34;role&amp;#34;:Â &amp;#34;system&amp;#34;,</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &amp;<span class="hljs-comment">#34;content&amp;#34;:Â f&amp;#34;BelowÂ isÂ someÂ informationÂ aboutÂ theÂ user.\n{'Â '.join(messages)}&amp;#34;,</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â ]
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â åº”ç”¨èŠå¤©æ¨¡æ¿ç”Ÿæˆå®Œæ•´æç¤ºè¯ï¼ˆä¸æ·»åŠ ç”Ÿæˆæç¤ºï¼Œä¸åˆ†è¯ï¼‰</span>
Â Â Â Â Â Â Â Â promptÂ =Â self.tokenizer.apply_chat_template(
Â Â Â Â Â Â Â Â Â Â Â Â messages,Â tokenize=<span class="hljs-literal">False</span>,Â add_generation_prompt=<span class="hljs-literal">False</span>
Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â å¯¹æç¤ºè¯è¿›è¡Œåˆ†è¯ï¼Œè½¬æ¢ä¸ºæ¨¡å‹è¾“å…¥æ ¼å¼</span>
Â Â Â Â Â Â Â Â inputsÂ =Â self.tokenizer(prompt,Â return_tensors=&amp;<span class="hljs-comment">#34;pt&amp;#34;)</span>
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â å°†è¾“å…¥IDç§»è‡³æ¨¡å‹æ‰€åœ¨è®¾å¤‡ï¼Œè½¬æ¢ä¸ºé•¿æ•´å‹</span>
Â Â Â Â Â Â Â Â inputs[&amp;<span class="hljs-comment">#34;input_ids&amp;#34;]Â =Â inputs[&amp;#34;input_ids&amp;#34;].to(self.model.device,Â dtype=torch.long)</span>
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–åºåˆ—é•¿åº¦</span>
Â Â Â Â Â Â Â Â seq_lenÂ =Â inputs[&amp;<span class="hljs-comment">#34;input_ids&amp;#34;].size(-1)</span>
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ£€æŸ¥æç¤ºè¯æ˜¯å¦ä¸ºç©º</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â seq_lenÂ ==Â <span class="hljs-number">0</span>:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">raise</span>Â ValueError(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &amp;<span class="hljs-comment">#34;èŠå¤©æ¨¡æ¿å¤„ç†åçš„æç¤ºè¯ä¸ºç©ºï¼Œæ— æ³•æ„å»ºKVç¼“å­˜ã€‚è¯·æ£€æŸ¥ä½ çš„æ¶ˆæ¯è¾“å…¥ã€‚&amp;#34;</span>
Â Â Â Â Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â åˆå§‹åŒ–åŠ¨æ€KVç¼“å­˜</span>
Â Â Â Â Â Â Â Â kvÂ =Â DynamicCache()
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â å…³é—­æ¢¯åº¦è®¡ç®—ï¼Œæ‰§è¡Œå‰å‘ä¼ æ’­æ„å»ºç¼“å­˜</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">with</span>Â torch.no_grad():
Â Â Â Â Â Â Â Â Â Â Â Â self.model(**inputs,Â use_cache=<span class="hljs-literal">True</span>,Â past_key_values=kv)
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æˆªå–æœ‰æ•ˆé•¿åº¦çš„ç¼“å­˜ï¼ˆå»é™¤å¯èƒ½çš„å†—ä½™éƒ¨åˆ†ï¼‰</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â i,Â (k,Â v)Â <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">enumerate</span>(<span class="hljs-built_in">zip</span>(kv.key_cache,Â kv.value_cache,Â strict=<span class="hljs-literal">False</span>)):
Â Â Â Â Â Â Â Â Â Â Â Â kv.key_cache[i]Â =Â k[:,Â :,Â :seq_len,Â :]
Â Â Â Â Â Â Â Â Â Â Â Â kv.value_cache[i]Â =Â v[:,Â :,Â :seq_len,Â :]
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â kv
</code></pre>
<h3 data-id="heading-19">0x04 ç¤ºä¾‹</h3>
<h4 data-id="heading-20">4.1 ä½•æ—¶ä½¿ç”¨ï¼š</h4>
<ul>
<li>ä½ æƒ³è¦çŸ­æœŸå·¥ä½œè®°å¿†ä»¥åŠ å¿«å¤šè½®å¯¹è¯é€Ÿåº¦ã€‚</li>
<li>é€‚åˆèŠå¤©æœºå™¨äººä¼šè¯åŠ é€Ÿæˆ–æç¤ºå¤ç”¨ã€‚</li>
<li>æœ€é€‚åˆç¼“å­˜éšè—çŠ¶æ€ / KV å¯¹ã€‚</li>
</ul>
<h4 data-id="heading-21">4.2 å…³é”®ç‚¹ï¼š</h4>
<ul>
<li>
<p>ç”¨ KVCacheMemoryï¼Œä¸å«æ˜¾å¼æ˜æ–‡è®°å¿†ã€‚</p>
</li>
<li>
<p>æ¼”ç¤ºæå– â†’ æ·»åŠ  â†’ åˆå¹¶ â†’ è·å– â†’ åˆ é™¤ã€‚</p>
</li>
<li>
<p>å±•ç¤ºå¦‚ä½•å¯¼å‡º/åŠ è½½ KV cacheã€‚</p>
</li>
</ul>
<p>ä»¥ä¸‹æ˜¯KV Cacheçš„ä½¿ç”¨ç¤ºä¾‹ã€‚</p>
<pre><code class="hljs language-xml" lang="xml">fromÂ memos.configs.memoryÂ importÂ MemoryConfigFactory
fromÂ memos.memories.factoryÂ importÂ MemoryFactory

#Â ä¸ºÂ KVCacheMemoryï¼ˆHuggingFaceÂ åç«¯ï¼‰åˆ›å»ºé…ç½®
configÂ =Â MemoryConfigFactory(
Â Â Â Â backend=<span class="hljs-symbol">&amp;#34;</span>kv_cache<span class="hljs-symbol">&amp;#34;</span>,
Â Â Â Â config={
Â Â Â Â Â Â Â Â <span class="hljs-symbol">&amp;#34;</span>extractor_llm<span class="hljs-symbol">&amp;#34;</span>:Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-symbol">&amp;#34;</span>backend<span class="hljs-symbol">&amp;#34;</span>:Â <span class="hljs-symbol">&amp;#34;</span>huggingface<span class="hljs-symbol">&amp;#34;</span>,
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-symbol">&amp;#34;</span>config<span class="hljs-symbol">&amp;#34;</span>:Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-symbol">&amp;#34;</span>model_name_or_path<span class="hljs-symbol">&amp;#34;</span>:Â <span class="hljs-symbol">&amp;#34;</span>Qwen/Qwen3-0.6B<span class="hljs-symbol">&amp;#34;</span>,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-symbol">&amp;#34;</span>max_tokens<span class="hljs-symbol">&amp;#34;</span>:Â 32,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-symbol">&amp;#34;</span>add_generation_prompt<span class="hljs-symbol">&amp;#34;</span>:Â True,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-symbol">&amp;#34;</span>remove_think_prefix<span class="hljs-symbol">&amp;#34;</span>:Â True,
Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â },
Â Â Â Â },
)

#Â å®ä¾‹åŒ–Â KVCacheMemory
kv_memÂ =Â MemoryFactory.from_config(config)

#Â æå–ä¸€ä¸ªÂ KVCacheItemï¼ˆDynamicCacheï¼‰
promptÂ =Â [
Â Â Â Â {<span class="hljs-symbol">&amp;#34;</span>role<span class="hljs-symbol">&amp;#34;</span>:Â <span class="hljs-symbol">&amp;#34;</span>user<span class="hljs-symbol">&amp;#34;</span>,Â <span class="hljs-symbol">&amp;#34;</span>content<span class="hljs-symbol">&amp;#34;</span>:Â <span class="hljs-symbol">&amp;#34;</span>WhatÂ isÂ MemOS?<span class="hljs-symbol">&amp;#34;</span>},
Â Â Â Â {<span class="hljs-symbol">&amp;#34;</span>role<span class="hljs-symbol">&amp;#34;</span>:Â <span class="hljs-symbol">&amp;#34;</span>assistant<span class="hljs-symbol">&amp;#34;</span>,Â <span class="hljs-symbol">&amp;#34;</span>content<span class="hljs-symbol">&amp;#34;</span>:Â <span class="hljs-symbol">&amp;#34;</span>MemOSÂ isÂ aÂ memoryÂ operatingÂ systemÂ forÂ LLMs.<span class="hljs-symbol">&amp;#34;</span>},
]
print(<span class="hljs-symbol">&amp;#34;</span>=====Â ExtractÂ KVCacheItemÂ =====<span class="hljs-symbol">&amp;#34;</span>)
cache_itemÂ =Â kv_mem.extract(prompt)
print(cache_item)

#Â å°†ç¼“å­˜æ·»åŠ åˆ°å†…å­˜ä¸­
kv_mem.add([cache_item])
print(<span class="hljs-symbol">&amp;#34;</span>AllÂ caches:<span class="hljs-symbol">&amp;#34;</span>,Â kv_mem.get_all())

#Â é€šè¿‡Â IDÂ è·å–
retrievedÂ =Â kv_mem.get(cache_item.id)
print(<span class="hljs-symbol">&amp;#34;</span>Retrieved:<span class="hljs-symbol">&amp;#34;</span>,Â retrieved)

#Â åˆå¹¶ç¼“å­˜ï¼ˆæ¨¡æ‹Ÿå¤šè½®å¯¹è¯ï¼‰
item2Â =Â kv_mem.extract([{<span class="hljs-symbol">&amp;#34;</span>role<span class="hljs-symbol">&amp;#34;</span>:Â <span class="hljs-symbol">&amp;#34;</span>user<span class="hljs-symbol">&amp;#34;</span>,Â <span class="hljs-symbol">&amp;#34;</span>content<span class="hljs-symbol">&amp;#34;</span>:Â <span class="hljs-symbol">&amp;#34;</span>TellÂ meÂ aÂ joke.<span class="hljs-symbol">&amp;#34;</span>}])
kv_mem.add([item2])
mergedÂ =Â kv_mem.get_cache([cache_item.id,Â item2.id])
print(<span class="hljs-symbol">&amp;#34;</span>MergedÂ cache:<span class="hljs-symbol">&amp;#34;</span>,Â merged)

#Â åˆ é™¤å…¶ä¸­ä¸€ä¸ª
kv_mem.delete([cache_item.id])
print(<span class="hljs-symbol">&amp;#34;</span>AfterÂ delete:<span class="hljs-symbol">&amp;#34;</span>,Â kv_mem.get_all())

#Â å¯¼å‡ºå’ŒåŠ è½½ç¼“å­˜
kv_mem.dump(<span class="hljs-symbol">&amp;#34;</span>tmp/kv_mem<span class="hljs-symbol">&amp;#34;</span>)
print(<span class="hljs-symbol">&amp;#34;</span>DumpedÂ toÂ tmp/kv_mem<span class="hljs-symbol">&amp;#34;</span>)
kv_mem.delete_all()
kv_mem.load(<span class="hljs-symbol">&amp;#34;</span>tmp/kv_mem<span class="hljs-symbol">&amp;#34;</span>)
print(<span class="hljs-symbol">&amp;#34;</span>LoadedÂ caches:<span class="hljs-symbol">&amp;#34;</span>,Â kv_mem.get_all())
</code></pre>
<h3 data-id="heading-22">0xFF å‚è€ƒ</h3>
<p>æœ¬æ–‡ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmarkdown.com.cn" target="_blank" title="https://markdown.com.cn" ref="nofollow noopener noreferrer">markdown.com.cn</a> æ’ç‰ˆ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç´§æ€¥ä¿®å¤ï¼Dify CVE-2025-55182 é«˜å±æ¼æ´ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ å‡çº§é¿å‘]]></title>    <link>https://juejin.cn/post/7581999251368214580</link>    <guid>https://juejin.cn/post/7581999251368214580</guid>    <pubDate>2025-12-10T12:40:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581999251368214580" data-draft-id="7582016579857956898" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç´§æ€¥ä¿®å¤ï¼Dify CVE-2025-55182 é«˜å±æ¼æ´ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ å‡çº§é¿å‘"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-10T12:40:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="wwwzhouhui"/> <meta itemprop="url" content="https://juejin.cn/user/3428746411400537"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç´§æ€¥ä¿®å¤ï¼Dify CVE-2025-55182 é«˜å±æ¼æ´ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ å‡çº§é¿å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3428746411400537/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    wwwzhouhui
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T12:40:34.000Z" title="Wed Dec 10 2025 12:40:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨AIåº”ç”¨å¿«é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œå¦‚ä½•ä¿éšœç”Ÿäº§ç¯å¢ƒçš„å®‰å…¨æˆä¸ºäº†ä¼ä¸šå…³æ³¨çš„ç„¦ç‚¹ã€‚ä¼ ç»Ÿçš„å¼€å‘æ–¹å¼å¾€å¾€åªå…³æ³¨åŠŸèƒ½å®ç°ï¼Œå´å¿½è§†äº†åº•å±‚æ¡†æ¶çš„ä¾›åº”é“¾å®‰å…¨é£é™©ï¼Œç‰¹åˆ«æ˜¯å½“ä½ ä½¿ç”¨çš„æŠ€æœ¯æ ˆå‡çº§åˆ°æœ€æ–°æ¶æ„æ—¶ï¼Œä¸€äº›éšè—çš„å®‰å…¨æ¼æ´å¯èƒ½åœ¨ä¸ç»æ„é—´å°±è®©ä½ çš„æœåŠ¡å™¨"è£¸å¥”"åœ¨äº’è”ç½‘ä¸Šã€‚</p>
<p>è¿™2å¤©Difyç”¨æˆ·ç‚¸é”…äº†ï¼å·ç§°"å²ä¸Šæœ€ä¸¥é‡"çš„Reactæ¼æ´CVE-2025-55182è¢«æ›å…‰ï¼ŒCVSSè¯„åˆ†é«˜è¾¾10.0æ»¡åˆ†ã€‚è¿™ä¸ªæ¼æ´æºäºReact Server Componentsï¼ˆRSCï¼‰å’ŒNext.js App Routeræ¶æ„çš„ååºåˆ—åŒ–ç¼ºé™·ï¼Œæ”»å‡»è€…æ— éœ€ä»»ä½•èº«ä»½éªŒè¯ï¼Œåªéœ€å‘é€ä¸€ä¸ªç²¾å¿ƒæ„é€ çš„HTTPè¯·æ±‚ï¼Œå°±èƒ½åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»»æ„ä»£ç ï¼Œç›´æ¥æ‹¿ä¸‹æœåŠ¡å™¨æƒé™ã€‚æ›´å¯æ€•çš„æ˜¯ï¼Œå…¨çƒå·²æœ‰å¤§é‡Difyè‡ªæ‰˜ç®¡å®ä¾‹è¢«æ¤å…¥æŒ–çŸ¿ç¨‹åºã€çªƒå–APIå¯†é’¥ã€ç”šè‡³å»ºç«‹æŒä¹…åŒ–åé—¨ã€‚å¥½å®¶ä¼™ï¼Œè¿™ä¸å°±æ˜¯ç°ä»£ç‰ˆçš„"ä¸€é”®å¤ºèˆ"å—ï¼Ÿ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85c1a4f593844cb89f62021410fadfeb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=I73MxHnI1%2FpfPewU2GWNZI7iekE%3D" alt="1765352612636" loading="lazy"/></p>
<p>ä»Šå¤©æˆ‘ä»¬å°±å¸¦å°ä¼™ä¼´ä»¬æ·±å…¥äº†è§£CVE-2025-55182æ¼æ´çš„æ¥é¾™å»è„‰ï¼Œå¹¶æ‰‹æŠŠæ‰‹æ•™å¤§å®¶åœ¨Difyå¹³å°ä¸Šè¿›è¡Œå®‰å…¨ä¿®å¤å‡çº§ï¼Œé¿å¼€å‡çº§è¿‡ç¨‹ä¸­çš„å„ç§å¤§å‘ã€‚å‘µå‘µï¼Œä¿è¯è®©ä½ çš„Difyå®ä¾‹å›ºè‹¥é‡‘æ±¤ï¼</p>
<h2 data-id="heading-1">âœ¨ æ¼æ´æ ¸å¿ƒç‰¹å¾</h2>
<ul>
<li><strong>ğŸ”¥ CVSS 10.0æ»¡åˆ†</strong>: å²ä¸Šæœ€ä¸¥é‡çš„Reactå®‰å…¨æ¼æ´ï¼Œå½±å“èŒƒå›´æå¹¿</li>
<li><strong>ğŸ’€ æ— éœ€èº«ä»½éªŒè¯</strong>: æ”»å‡»è€…ä¸éœ€è¦ç™»å½•ï¼Œåªè¦æœåŠ¡æš´éœ²åœ¨å…¬ç½‘å³å¯æ”»å‡»</li>
<li><strong>âš¡ è¿œç¨‹ä»£ç æ‰§è¡Œ</strong>: ä¸€ä¸ªHTTPè¯·æ±‚ç›´æ¥è·å–æœåŠ¡å™¨Shellæƒé™</li>
<li><strong>ğŸ¯ ç²¾å‡†æ‰“å‡»Dify</strong>: ä½¿ç”¨Next.js App Routerçš„Dify v1.9.x-v1.10.1å…¨çº¿å—å½±å“</li>
<li><strong>ğŸ’° é«˜ä»·å€¼ç›®æ ‡</strong>: å¯çªƒå–OpenAI/Claude APIå¯†é’¥ã€æ•°æ®åº“å‡­è¯ç­‰æ ¸å¿ƒèµ„äº§</li>
<li><strong>ğŸ”— ä¾›åº”é“¾æ”»å‡»</strong>: æºå¤´æ¼æ´åœ¨Reactï¼ŒNext.jsè¿å¸¦å—å½±å“ï¼Œæ³¢åŠæ•´ä¸ªç”Ÿæ€</li>
<li><strong>âš ï¸ å‡çº§æœ‰å‘</strong>: å®˜æ–¹é•œåƒæ ‡ç­¾å­˜åœ¨é”™è¯¯ï¼Œç›²ç›®å‡çº§å¯èƒ½æ— æ•ˆ</li>
<li><strong>ğŸ›¡ï¸ WAFå¯é˜²å¾¡</strong>: é€šè¿‡é›·æ± ç­‰WAFå¯ä¸´æ—¶æ‹¦æˆªæ”»å‡»ï¼Œäº‰å–å‡çº§æ—¶é—´</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba3fb6ddce9f41389d4b0014545b65f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=qiH2tMhPh0zXDbOn1CNxx6eNAvo%3D" alt="1765359233004" loading="lazy"/></p>
<h2 data-id="heading-2">ğŸ› ï¸ æŠ€æœ¯èƒŒæ™¯ï¼šä»CSRåˆ°RSCçš„æ¶æ„æ¼”è¿›</h2>
<p>è¦ç†è§£è¿™ä¸ªæ¼æ´ä¸ºä»€ä¹ˆè¿™ä¹ˆä¸¥é‡ï¼Œæˆ‘ä»¬å¾—å…ˆäº†è§£Reactå’ŒNext.jsçš„æŠ€æœ¯æ¼”è¿›å²ã€‚å‘µå‘µï¼Œåˆ«æ€•ï¼Œæˆ‘ç”¨å¤§ç™½è¯ç»™å¤§å®¶è®²æ¸…æ¥šã€‚</p>
<h3 data-id="heading-3">Reactæ¶æ„çš„ä¸‰æ¬¡è¿›åŒ–</h3>
<p><strong>ç¬¬ä¸€ä»£ï¼šå®¢æˆ·ç«¯æ¸²æŸ“ï¼ˆCSRï¼‰</strong></p>
<ul>
<li><strong>æ—¶ä»£</strong>: 2013-2016å¹´</li>
<li><strong>ç‰¹ç‚¹</strong>: æœåŠ¡å™¨åªå‘é€ç©ºHTMLï¼Œæµè§ˆå™¨ä¸‹è½½JSååŠ¨æ€ç”Ÿæˆé¡µé¢</li>
<li><strong>é—®é¢˜</strong>: é¦–å±æ…¢ã€SEOå·®ã€JSä½“ç§¯å¤§</li>
</ul>
<p><strong>ç¬¬äºŒä»£ï¼šæœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰</strong></p>
<ul>
<li><strong>æ—¶ä»£</strong>: 2016-2022å¹´</li>
<li><strong>ä»£è¡¨</strong>: Next.js Pages Router</li>
<li><strong>ç‰¹ç‚¹</strong>: æœåŠ¡å™¨ç”Ÿæˆå®Œæ•´HTMLï¼Œæµè§ˆå™¨"æ³¨æ°´"(Hydration)å®ç°äº¤äº’</li>
<li><strong>é—®é¢˜</strong>: ä»éœ€ä¸‹è½½å…¨é‡JSï¼ŒHydrationå»¶è¿Ÿé«˜</li>
</ul>
<p><strong>ç¬¬ä¸‰ä»£ï¼šReact Server Componentsï¼ˆRSCï¼‰</strong></p>
<ul>
<li><strong>æ—¶ä»£</strong>: 2022å¹´è‡³ä»Š</li>
<li><strong>ä»£è¡¨</strong>: Next.js 13+ App Router</li>
<li><strong>ç‰¹ç‚¹</strong>: ç»„ä»¶åˆ†ä¸ºæœåŠ¡ç«¯ç»„ä»¶å’Œå®¢æˆ·ç«¯ç»„ä»¶ï¼ŒæœåŠ¡ç«¯ç»„ä»¶ä¸å‘é€åˆ°å®¢æˆ·ç«¯</li>
<li><strong>ä¼˜åŠ¿</strong>: JSä½“ç§¯å‡å°‘90%ï¼Œæ€§èƒ½å¤§å¹…æå‡</li>
<li><strong>é£é™©</strong>: å¼•å…¥äº†æ–°çš„é€šä¿¡åè®®â€”â€”Flight Protocol</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b2af5864b204ccb94dc8eb167b9f927~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=mO3HF%2ByaDHpoaF%2F7y8B2mThl%2F%2Fg%3D" alt="1765359490644" loading="lazy"/></p>
<h3 data-id="heading-4">Flightåè®®ï¼šæ¼æ´çš„"å…ƒå‡¶"</h3>
<p>ä¸ºäº†è®©æœåŠ¡ç«¯ç»„ä»¶å’Œå®¢æˆ·ç«¯ç»„ä»¶èƒ½å¤Ÿæ— ç¼é€šä¿¡ï¼ŒReactå›¢é˜Ÿè®¾è®¡äº†Flight Protocolã€‚è¿™ä¸ªåè®®ä¸ä»…è¦ä¼ è¾“æ•°æ®ï¼Œè¿˜è¦ä¼ è¾“ç»„ä»¶æ ‘ç»“æ„ã€Promiseå¯¹è±¡ã€ç”šè‡³æœåŠ¡ç«¯å‡½æ•°å¼•ç”¨ã€‚ä¼ ç»Ÿçš„JSONæ ¼å¼æ— æ³•æ»¡è¶³è¿™äº›å¤æ‚éœ€æ±‚ï¼Œäºæ˜¯Reactå®ç°äº†ä¸€å¥—è‡ªå®šä¹‰çš„åºåˆ—åŒ–/ååºåˆ—åŒ–æœºåˆ¶ã€‚</p>
<p><strong>é—®é¢˜å°±å‡ºåœ¨è¿™é‡Œï¼</strong> å½“æœåŠ¡å™¨ååºåˆ—åŒ–å®¢æˆ·ç«¯å‘æ¥çš„Flightåè®®æ•°æ®æ—¶ï¼Œæ²¡æœ‰å……åˆ†éªŒè¯æ•°æ®çš„å®‰å…¨æ€§ï¼Œå¯¼è‡´æ”»å‡»è€…å¯ä»¥æ„é€ æ¶æ„çš„åºåˆ—åŒ–æ•°æ®ï¼Œè§¦å‘æœåŠ¡å™¨æ‰§è¡Œä»»æ„ä»£ç ã€‚</p>



































<table><thead><tr><th>æ¶æ„ç‰¹å¾</th><th>CSR</th><th>SSR</th><th>RSC</th></tr></thead><tbody><tr><td>æ‰§è¡Œä½ç½®</td><td>æµè§ˆå™¨</td><td>æœåŠ¡å™¨+æµè§ˆå™¨</td><td><strong>æœåŠ¡å™¨(Server Components)</strong></td></tr><tr><td>æ•°æ®ä¼ è¾“</td><td>JSON API</td><td>HTMLå­—ç¬¦ä¸²</td><td><strong>Flightåè®®åºåˆ—åŒ–æµ</strong></td></tr><tr><td>ä¸»è¦é£é™©</td><td>XSS, CSRF</td><td>XSS, æ³¨å…¥</td><td><strong>ååºåˆ—åŒ–RCE</strong></td></tr><tr><td>å—æ­¤æ¼æ´å½±å“</td><td>âŒ å¦</td><td>âŒ å¦</td><td>âœ… <strong>æ˜¯</strong></td></tr></tbody></table>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2ef3b88e8e94dccb5a73a827d7208a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=rIcvKM7MgPYIzDt7ul1i%2FNgtwgE%3D" alt="unnamed" loading="lazy"/></p>
<h2 data-id="heading-5">ğŸ¯ æ¼æ´å½±å“èŒƒå›´</h2>
<h3 data-id="heading-6">å—å½±å“çš„Difyç‰ˆæœ¬</h3>
<ul>
<li><strong>Dify v1.9.0 - v1.10.1</strong>: å…¨çº¿å—å½±å“</li>
<li><strong>æ ¸å¿ƒå—å®³è€…</strong>: dify-webå®¹å™¨ï¼ˆå‰ç«¯æœåŠ¡ï¼‰</li>
<li><strong>æŠ€æœ¯æ ˆ</strong>: Next.js 15.x + React 19.x (App Routeræ¶æ„)</li>
</ul>
<h3 data-id="heading-7">å—å½±å“çš„Next.jsç‰ˆæœ¬</h3>
<ul>
<li><strong>Next.js 13.4+</strong>: ä½¿ç”¨App Routerçš„æ‰€æœ‰ç‰ˆæœ¬</li>
<li><strong>Next.js 14.x, 15.x, 16.x</strong>: å…¨éƒ¨å—å½±å“</li>
<li><strong>Pages Routerç”¨æˆ·</strong>: å®Œå…¨ä¸å—å½±å“ï¼ˆä½¿ç”¨pages/ç›®å½•ï¼‰</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5776fc850747483cb84ff99bb5fde6eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=jW%2FQggaNk1PRCoT6%2FP0%2FPpoAqUw%3D" alt="1765359829068" loading="lazy"/></p>
<h3 data-id="heading-8">æ”»å‡»åæœ</h3>
<p>æ ¹æ®çœŸå®æ¡ˆä¾‹ï¼Œæ”»å‡»è€…æˆåŠŸå…¥ä¾µåä¼šè¿›è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<ol>
<li><strong>èµ„æºåŠ«æŒ</strong>: éƒ¨ç½²XMRigæŒ–çŸ¿ç¨‹åºï¼ŒCPUå ç”¨é£™å‡è‡³100%</li>
<li><strong>å‡­è¯çªƒå–</strong>: è¯»å–ç¯å¢ƒå˜é‡ä¸­çš„APIå¯†é’¥ï¼ˆOpenAI/Claude/AWSç­‰ï¼‰</li>
<li><strong>æ•°æ®æ³„éœ²</strong>: çªƒå–æ•°æ®åº“å¯†ç ï¼Œè®¿é—®PostgreSQLä¸­çš„æ•æ„Ÿæ•°æ®</li>
<li><strong>æŒä¹…åŒ–åé—¨</strong>: åœ¨.nextç›®å½•å†™å…¥Webshellï¼Œä¿®æ”¹cronä»»åŠ¡</li>
<li><strong>å†…ç½‘æ¸—é€</strong>: ä»¥Difyä¸ºè·³æ¿ï¼Œæ”»å‡»å†…ç½‘å…¶ä»–æœåŠ¡</li>
</ol>
<h2 data-id="heading-9">å®‰å…¨æ¼æ´å¤ç°</h2>
<h3 data-id="heading-10">difyéƒ¨ç½²</h3>
<p>æˆ‘è¿™é‡Œä½¿ç”¨æœ€æ–°çš„dify1.10.1ç‰ˆæœ¬ç»™å¤§å®¶æ¼”ç¤ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/696793f4461d4e6bb7144e94a857821e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=0goLQnWVNDTCtk3GpfmU3iyWulM%3D" alt="image-20251210142140149" loading="lazy"/></p>
<p>æˆ‘ä»¬åœ¨æœ¬åœ°ç”µè„‘ä¸Šä½¿ç”¨docker compose å®‰è£…</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15400be90bf6476f8dee205408ce7f2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=6UImSO6oKh9CrV%2FDuNieKjV1emI%3D" alt="image-20251210142250397" loading="lazy"/></p>
<p>ä¸‹å›¾æˆ‘ä»¬æŒ‰ç…§å®˜æ–¹çš„éƒ¨ç½²æ–¹å¼éƒ¨ç½²äº†ä¸€ä¸ª1.10.1ç‰ˆæœ¬ï¼ˆç®—æ˜¯æ¯”è¾ƒæ–°çš„ç‰ˆæœ¬ï¼‰</p>
<h3 data-id="heading-11">æ¼æ´æ£€æŸ¥</h3>
<p>æˆ‘ä»¬è¿™é‡Œåœ¨githubæœç´¢CVE-2025-55182 æœåˆ°è¿™ä¸ªå¼€æºé¡¹ç›® æŠŠè¿™ä¸ªä»£ç ä¸‹è½½åˆ°æœ¬åœ°</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80743f80aa3b4e2b900a549df74e0fc7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=f4%2FLXLZIucU7%2B6brm98cfcq7FHI%3D" alt="image-20251210142527875" loading="lazy"/></p>
<p>ä»£ç ä¸‹è½½æœ¬åœ°</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06c9f2e623e045fdbc6875a648e4cc0f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=swuy7Yjyyhse9mBLm2Niw0SEkbs%3D" alt="image-20251210142556609" loading="lazy"/></p>
<p>è¿™ä¸ªpoc.py ä»£ç éå¸¸ç®€å•ï¼Œæˆ‘ä»¬åœ¨å‘½ä»¤è¡Œçª—å£ç›´æ¥ä¸‹é¢åœ°å€</p>
<pre><code class="hljs language-shell" lang="shell">python poc.py http://127.0.0.1
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0e0912140494c1e94e0f2d51a0bb9d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=HYTo7QLZlga5T4OjnrWRSUXOmv4%3D" alt="image-20251210142741505" loading="lazy"/></p>
<p>å‡ºç°ä¸‹é¢çš„ç”»é¢æˆ‘ä»¬çš„æµ®ç°äº†ä¸Šæ‰‹æ¼æ´ã€‚è„šæœ¬å·²ç»æˆåŠŸæ‹¿åˆ°æ•°æ®åº“è¿”å›uid=1001 ç”¨æˆ·rootã€‚å¦‚æœè¿™ä¸ªæš´éœ²åœ¨äº’è”ç½‘ï¼Œå¦‚æœæ²¡æœ‰å®‰å…¨é˜²æŠ¤WAFç­‰å®‰å…¨è®¾å¤‡ç¡¬ä»¶æˆ–è€…è½¯ä»¶åŸºæœ¬ä¸Šæˆ‘é€šè¿‡è¿™ä¸€è¡Œå‘½ä»¤å°±å¯ä»¥æˆåŠŸæ‹¿åˆ°æœåŠ¡å™¨æƒé™äº†ã€‚</p>
<h3 data-id="heading-12">æ‰«æç”Ÿæˆç¯å¢ƒ</h3>
<p>æˆ‘ä»¬å…¬å¸ä¹Ÿå°‘é‡çš„ä½¿ç”¨çš„difyåšä¸€äº›ä¿¡æ¯æŸ¥è¯¢å’Œç»Ÿè®¡ã€‚æˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹ç”Ÿäº§ç¯å¢ƒçš„ç‰ˆæœ¬ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/505762073565409ba3795f8a8d6d1164~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=hdZ2KGWAgpbiDCifrp07V32%2F8hk%3D" alt="image-20251210143144806" loading="lazy"/></p>
<p>æˆ‘ä»¬æ£€æŸ¥ä¸‹é¢å½“å‰ç”Ÿäº§ç¯å¢ƒä½¿ç”¨çš„æ˜¯1.9.0 ç‰ˆæœ¬ã€‚åˆšæ‰æˆ‘ä»¬ä¸Šé¢ç»™å¤§å®¶æ¼”ç¤ºçš„æ˜¯1.10.1 ç‰ˆæœ¬ä¹Ÿæ˜¯æˆåŠŸæ‹¿ä¸‹ï¼Œæˆ‘ä»¬ä¹Ÿåœ¨æƒ³è¿™ä¸ªè„šæœ¬æ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥æ‹¿ä¸‹ç”Ÿäº§ç¯å¢ƒï¼Ÿç­”æ¡ˆæˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œæˆ‘ä»¬æ¥è¯•ä¸€è¯•ã€‚</p>
<pre><code class="hljs language-shell" lang="shell">python poc.py https://xxx.xxx.com
</code></pre>
<p>ç”Ÿäº§ç¯å¢ƒæˆ‘ä»¬ç”¨åŸŸåæ¥å®ç°è®¿é—®çš„æ‰€ä»¥åœ°å€æ˜¯ä¸Šé¢çš„ä¿¡æ¯ï¼ˆæˆ‘è¿™é‡Œå½±è—äº†ã€‚ï¼‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7725baac73804b82892e540ad3e817af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=i3XZFO0m6smfRrksfmUWhX0Idk0%3D" alt="image-20251210143455362" loading="lazy"/></p>
<p>è¿”å›äº†ä¸€ä¸²ä¿¡æ¯è¿˜æœ‰ä¸€ä¸ª403ã€‚è¿”å›ä¿¡æ¯æ˜¯ä¸€ä¸ªHTMLï¼Œæˆ‘ä»¬æŠ“å‡ºæ¥ä¿å­˜HTML</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae4119049fdc4a1f914087a2356fd8f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=yH1g7Z0%2B0HAFsYmWvjKHo8N45Cs%3D" alt="image-20251210143608687" loading="lazy"/></p>
<p>æˆ‘ä»¬çœ‹åˆ°è¿™é‡Œçš„POCè¯·æ±‚è¢«æˆ‘ä»¬çš„é›·æ± WAFæˆåŠŸæ‹¦æˆªäº†ã€‚å› ä¸ºè¿™ä¸ªæ˜¯ä¸€ä¸ªååºåˆ—åŒ–æ¼æ´ï¼ŒWAFé€šè¿‡åˆ¤æ–­æˆåŠŸæ‹¦æˆªäº†ä¸€äº›éæ³•è¯·æ±‚ã€‚æˆåŠŸä¿æŠ¤äº†æˆ‘ä»¬åç«¯ç¨‹åºä¸ç»™å…¶ä»–éæ³•å·¥å…·æ”»å‡»æˆåŠŸã€‚</p>
<p>æ‰€ä»¥ç”Ÿäº§ç¯å¢ƒä¸­æˆ‘ä»¬åœ¨å‰ç«¯å¢åŠ ä¸€ä¸ªWAFé˜²æŠ¤æ‹¦æˆªè¿˜æ˜¯æœ‰å¿…è¦çš„ã€‚è¿™æ ·æˆ‘ä»¬å¯ä»¥ç»™åç«¯ç¨‹åºäº‰å–å‡çº§çš„æ—¶é—´ï¼Œæœ‰æ•ˆçš„åŒ…å«æˆ‘ä»¬çš„ä¿¡æ¯èµ„äº§ä¸ä¼šè¢«æ”»å‡»åˆ°ã€‚</p>
<h2 data-id="heading-13">å‡çº§æ¼æ´ä¿®å¤</h2>
<h3 data-id="heading-14">å‡çº§åŒ…ä»‹ç»</h3>
<p>çŸ¥é“äº†ä¸Šé¢çš„å®‰å…¨æ¼æ´æˆ‘ä»¬æŒ‰ç…§å®˜æ–¹æä¾›çš„å®‰å…¨æ¼æ´é•œåƒåŒ…å‡çº§å°±å¯ä»¥äº†ã€‚æˆ‘ä»¬åœ¨difyå®˜æ–¹é•œåƒåŒ…</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05dbd70c3d9b45c7a2ac72ad74d12527~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=qCLre2thsUXuv3Y%2Bky9W%2B9Imqlw%3D" alt="image-20251210144155082" loading="lazy"/></p>
<p>æˆ‘ä»¬æŠŠä»£ç ä¸‹è½½åˆ°æœ¬åœ°</p>
<p>æˆ‘ä»¬æ‰“å¼€ä»£ç è¿›å…¥dockeræ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°docker-compose.yaml å¹¶æ‰“å¼€å®ƒã€‚è¿™ä¸ªåœ°æ–¹å…¶å®æœ‰ä¸€ä¸ªå‘ï¼Œä¸Šå‘¨å®˜æ–¹ç´§æ€¥ä¿®æ”¹äº†BUGï¼Œä½†æ˜¯è¿™ä¸ªdocker-compose.yamlé‡Œé¢çš„é•œåƒæ–‡ä»¶å¹¶æ²¡æœ‰ä¿®å¤è¿˜æ˜¯è€çš„langgenius/dify-api:1.10.1ã€langgenius/dify-web:1.10.1</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2360905e55e14333821cb2a64ecf07ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=muTDAXELtkAlbrhO2Y2yGASDS7A%3D" alt="image-20251210145019818" loading="lazy"/></p>
<p>æˆ‘ä»¬éœ€è¦æ³¨æ„è¿™ä¸ªåœ°æ–¹åº”è¯¥æ˜¯langgenius/dify-web:1.10.1-fix.1ã€langgenius/dify-api:1.10.1-fix.1</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4802dceb49644ef6bc73a24e846716c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=oBNcZkPUKfluXkWLTO97ihyBYkk%3D" alt="image-20251210145142608" loading="lazy"/></p>
<p>å¾ˆå¤šå°ä¼™ä¼´è¢«å‘äº†ä¸€æŠŠï¼ŒæœåŠ¡å™¨æˆ‘æ˜¯å‘¨æœ«æ‰‹å·¥å‡çº§çš„ï¼Œå…¬å¸çš„ç¯å¢ƒæˆ‘å‘¨ä¸€ï¼ˆ2025å¹´12æœˆ8æ—¥ï¼‰å®‰æ’å…¶ä»–äººå‡çº§çš„ï¼Œç»“æœå‡çº§åæ²¡æœ‰ä¿®å¤è¿™ä¸ªæ¼æ´å¤ç°äº†ã€‚æˆ‘ä»Šå¤©ä»”ç»†æ£€æŸ¥äº†å‡çº§çš„è®°å½•å‘ç°ä¸Šè¿°é—®é¢˜ã€‚</p>
<p>æ–°çš„å‡çº§åŒ…å·²ç»ä¿®å¤äº†è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘çœ‹å‡çº§æ—¶é—´å¤§æ¦‚æ˜¯æ˜¨å¤©</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb09e74d74e4426683964437001b17df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=71U2JH2rTVLV1y7cbwaZ7SiZaak%3D" alt="image-20251210145510508" loading="lazy"/></p>
<p>å¤§å®¶å¯ä»¥ä½¿ç”¨æ¯”è¾ƒå·¥å…·æ¯”è¾ƒï¼ˆæˆ‘å¹³æ—¶å‡çº§éƒ½ä¸æ˜¯å®‰è£…å®˜æ–¹æ–¹å¼å‡çº§ï¼Œå®˜æ–¹å‡çº§å‘å¤šï¼‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a69845cbef74c92b981f7ba0d276a07~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=S9gjUnSkOi680M8yHiVIeXkkA64%3D" alt="image-20251210145742384" loading="lazy"/></p>
<p>ç¡®ä¿ä»¥ä¸Šç‰ˆæœ¬æ˜¯langgenius/dify-web:1.10.1-fix.1ã€langgenius/dify-api:1.10.1-fix.1 å‡çº§åæ‰ä¸ä¼šæœ‰é—®é¢˜ã€‚</p>
<p>é¡ºä¾¿æä¸€å˜´ï¼Œæˆ‘ä½¿ç”¨çš„æ¯”è¾ƒå·¥å…·åå­—å«åšBCompareï¼Œå†™ä»£ç ã€åˆ†æä»£ç æ¯”è¾ƒæ–‡æ¡£ç¥å™¨ã€‚æˆ‘è¿™ä¸ªå·¥å…·æˆ‘ç”¨äº†å¾ˆå¤šå¹´äº†æ¨èç»™å¤§å®¶ã€‚ï¼ˆå·¥å…·ä¸‹è½½å¤§å®¶å¯ä»¥ç½‘ä¸Šæœï¼Œè¿™é‡Œå°±ä¸ç»™æä¾›ä¸‹è½½åŒ…äº†ï¼ŒåŒ…æˆ‘ä¹Ÿæ²¡æœ‰ã€‚ï¼‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f88b807a23c45b1b71a3011597f6b7e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=qm7Wf8EXFGxMiNvhwsfm9l1zicM%3D" alt="image-20251210153213972" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9666bd409caf442fb6fcaff70121b6b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=sjYGLb6w3cM8wAuUu3peble3se4%3D" alt="image-20251210153151439" loading="lazy"/></p>
<h3 data-id="heading-15">å‡çº§å¤æµ‹</h3>
<p>æˆ‘ä»¬ç¡®ä¿å‡çº§ç‰ˆæœ¬æ˜¯langgenius/dify-web:1.10.1-fix.1ã€langgenius/dify-api:1.10.1-fix.1 æ­£ç¡®çš„ä¿®å¤é•œåƒåå¯åŠ¨dify, æ¥ä¸‹æ¥æˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨å‰é¢çš„éªŒè¯è„šæœ¬æµ‹è¯•</p>
<pre><code class="hljs language-shell" lang="shell">python poc.py  http://192.168.210.10
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f21b69f5d4240689b9122b33507ed7e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765975233&amp;x-signature=irbi7Dae%2FfYskOBA2skGKd8N19A%3D" alt="image-20251210150011032" loading="lazy"/></p>
<p>å‡ºç°404äº†ã€‚è¿™ä¸ªæµ‹è¯•æ–¹æ³•æˆ‘æ˜¯ç»•è¿‡å…¬å¸ç½‘ç»œå®‰å…¨é˜²æŠ¤WAFéªŒè¯çš„ã€‚è¿™POC æ²¡æœ‰è¿”å›ä¿¡æ¯ï¼Œè¯´æ˜å®‰å…¨æ¼æ´å·²ç»ä¿®å¤æ²¡æœ‰å‡ºç°åå¼¹çš„åºåˆ—åŒ–æ¼æ´äº†ã€‚</p>
<h2 data-id="heading-16">æ€»ç»“</h2>
<p>ä»Šå¤©ä¸»è¦å¸¦å¤§å®¶äº†è§£å¹¶å®ç°äº†Difyå¹³å°CVE-2025-55182é«˜å±å®‰å…¨æ¼æ´çš„å®Œæ•´æ£€æµ‹ä¸ä¿®å¤æµç¨‹ï¼Œè¯¥æ¼æ´ä»¥"React Server Componentsååºåˆ—åŒ–ç¼ºé™· + CVSS 10.0æ»¡åˆ†è¯„çº§"ä¸ºæ ¸å¿ƒç‰¹å¾ï¼Œç»“åˆNext.js App Routeræ¶æ„å’ŒFlightåè®®çš„ä¸å®‰å…¨ååºåˆ—åŒ–æœºåˆ¶ï¼Œé€šè¿‡æ— éœ€èº«ä»½éªŒè¯çš„æ¶æ„HTTPè¯·æ±‚ç›´æ¥è§¦å‘è¿œç¨‹ä»£ç æ‰§è¡Œï¼Œå½¢æˆäº†ä¸€å¥—ä»æ¼æ´æ£€æµ‹åˆ°å®‰å…¨åŠ å›ºçš„å…¨é“¾è·¯é˜²å¾¡æ–¹æ¡ˆã€‚</p>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¯¥ä¿®å¤æ–¹æ¡ˆä¸ä»…è§£å†³äº†Reactç”Ÿæ€å²ä¸Šæœ€ä¸¥é‡çš„å®‰å…¨æ¼æ´å¨èƒï¼Œè¿˜é€šè¿‡å¯¹æ¯”CSR/SSR/RSCä¸‰ä»£æ¶æ„æ¼”è¿›æ­ç¤ºäº†Flightåè®®è®¾è®¡ç¼ºé™·çš„æ ¹æœ¬åŸå› ï¼ŒæŠ€æœ¯æ·±åº¦è¿œè¶…ç®€å•çš„"æ‰“è¡¥ä¸"æ“ä½œï¼›ç‰¹åˆ«æ˜¯é€šè¿‡çœŸå®çš„ç”Ÿäº§ç¯å¢ƒWAFæ‹¦æˆªæ¡ˆä¾‹ã€å®˜æ–¹é•œåƒæ ‡ç­¾é”™è¯¯è¸©å‘ç»å†ã€å‘¨æœ«ç´§æ€¥å‡çº§ä¸å‘¨ä¸€å¤æµ‹å¤±è´¥çš„è¡€æ³ªæ•™è®­ç­‰å…³é”®ä¿¡æ¯ç‚¹ï¼Œæœ‰æ•ˆå¸®åŠ©å°ä¼™ä¼´ä»¬é¿å¼€å‡çº§è¿‡ç¨‹ä¸­12æœˆ6-8æ—¥æœŸé—´docker-compose.yamlé…ç½®æ–‡ä»¶æœªæ›´æ–°-fix.1åç¼€çš„è‡´å‘½é™·é˜±ã€‚</p>
<p>æ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥æŒ‰ç…§æ–‡ä¸­æä¾›çš„æ­¥éª¤è¿›è¡Œå®è·µï¼Œæ ¹æ®å®é™…éƒ¨ç½²æ¶æ„è°ƒæ•´é•œåƒç‰ˆæœ¬æ£€æŸ¥å’ŒPOCæµ‹è¯•æ–¹æ³•ã€‚ä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™é‡Œç»“æŸäº†ï¼Œæˆ‘ä»¬ä¸‹ä¸€ç¯‡æ–‡ç« è§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€é¸¿è’™å¼€å‘æ¡ˆä¾‹ç¯‡ã€‘é¸¿è’™è·¨è®¾å¤‡å®æ—¶æ»¤é•œåŒæ­¥çš„å®Œæ•´æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7581858890608476196</link>    <guid>https://juejin.cn/post/7581858890608476196</guid>    <pubDate>2025-12-10T11:14:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581858890608476196" data-draft-id="7581995152190783530" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€é¸¿è’™å¼€å‘æ¡ˆä¾‹ç¯‡ã€‘é¸¿è’™è·¨è®¾å¤‡å®æ—¶æ»¤é•œåŒæ­¥çš„å®Œæ•´æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="HarmonyOS,ArkTS,ArkUI"/> <meta itemprop="datePublished" content="2025-12-10T11:14:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¨å“¥çˆ±ç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/2242659450109575"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€é¸¿è’™å¼€å‘æ¡ˆä¾‹ç¯‡ã€‘é¸¿è’™è·¨è®¾å¤‡å®æ—¶æ»¤é•œåŒæ­¥çš„å®Œæ•´æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2242659450109575/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¨å“¥çˆ±ç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T11:14:37.000Z" title="Wed Dec 10 2025 11:14:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ V å“¥ã€‚é¸¿è’™åœ¨è·¨è®¾å¤‡æ•°æ®ä¼ è¾“çš„èƒ½åŠ›ï¼Œå³ä¸æ»‘åˆé…·ç‚«ï¼Œä»Šå¤©çš„å†…å®¹ï¼ŒV å“¥æƒ³åˆ†äº«ä¸€ä¸‹åŸºäºé¸¿è’™ 6.0ï¼ˆAPI21ï¼‰å®ç°è·¨è®¾å¤‡å®æ—¶æ»¤é•œåŒæ­¥çš„å®Œæ•´æ–¹æ¡ˆï¼Œç»“åˆåˆ†å¸ƒå¼è½¯æ€»çº¿ä¸ <code>PixelMap</code> çš„ååŒå¤„ç†æµç¨‹ï¼š</p>
<p>è”ç³»Vå“¥è·å– <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Ftraining%2FclassDetail%2F042cb1cc4d7d44ecbdbd902fd1275dcc%3Ftype%3D1%3Fha_source%3Dhmosclass%26ha_sourceId%3D89000248" target="_blank" title="https://developer.huawei.com/consumer/cn/training/classDetail/042cb1cc4d7d44ecbdbd902fd1275dcc?type=1?ha_source=hmosclass&amp;ha_sourceId=89000248" ref="nofollow noopener noreferrer">é¸¿è’™å­¦ä¹ èµ„æ–™</a></p>
<hr/>
<h3 data-id="heading-0">ä¸€ã€æŠ€æœ¯æ¶æ„è®¾è®¡</h3>

























<table><thead><tr><th>å±‚çº§</th><th>ç»„ä»¶</th><th>åŠŸèƒ½è¯´æ˜</th></tr></thead><tbody><tr><td><strong>åº”ç”¨å±‚</strong></td><td>æ‰‹æœºï¼ˆå®¢æˆ·ç«¯ï¼‰</td><td>è°ƒç”¨ç›¸æœºç”Ÿæˆ <code>PixelMap</code>ï¼Œåº”ç”¨æ»¤é•œç®—æ³•ï¼Œé€šè¿‡ RPC å‘é€æ•°æ®</td></tr><tr><td><strong>ä¼ è¾“å±‚</strong></td><td>åˆ†å¸ƒå¼è½¯æ€»çº¿ï¼ˆSoftBusï¼‰</td><td>è®¾å¤‡è‡ªåŠ¨å‘ç°ã€ä½å»¶è¿Ÿä¼ è¾“æ¸²æŸ“æŒ‡ä»¤æµ</td></tr><tr><td><strong>æ¸²æŸ“å±‚</strong></td><td>å¹³æ¿ï¼ˆæœåŠ¡ç«¯ï¼‰</td><td>æ¥æ”¶ <code>PixelMap</code> æ•°æ®æµï¼Œé€šè¿‡ <code>CanvasRenderer</code> å®æ—¶æ¸²æŸ“</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-1">äºŒã€æ ¸å¿ƒå®ç°æ­¥éª¤</h3>
<h4 data-id="heading-2">1. <strong>ç¯å¢ƒé…ç½®ä¸æƒé™å£°æ˜</strong></h4>
<p>åœ¨ <code>module.json5</code> ä¸­æ·»åŠ åˆ†å¸ƒå¼èƒ½åŠ›ä¸ç›¸æœºæƒé™ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  &amp;#<span class="hljs-number">34</span>;module&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    &amp;#<span class="hljs-number">34</span>;requestPermissions&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
        &amp;#<span class="hljs-number">34</span>;name&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;ohos.permission.DISTRIBUTED_DATASYNC&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>  <span class="hljs-comment">// åˆ†å¸ƒå¼æ•°æ®åŒæ­¥</span>
        &amp;#<span class="hljs-number">34</span>;reason&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;è·¨è®¾å¤‡ä¼ è¾“PixelMapæ•°æ®&amp;#<span class="hljs-number">34</span>;
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        &amp;#<span class="hljs-number">34</span>;name&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;ohos.permission.CAMERA&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
        &amp;#<span class="hljs-number">34</span>;usedScene&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> &amp;#<span class="hljs-number">34</span>;abilities&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>&amp;#<span class="hljs-number">34</span>;CameraAbility&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">]</span> <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    &amp;#<span class="hljs-number">34</span>;abilities&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
        &amp;#<span class="hljs-number">34</span>;name&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;CameraAbility&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
        &amp;#<span class="hljs-number">34</span>;distributedEnabled&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>  <span class="hljs-comment">// å¯ç”¨åˆ†å¸ƒå¼èƒ½åŠ›</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-3">2. <strong>è®¾å¤‡å‘ç°ä¸è¿æ¥ç®¡ç†</strong></h4>
<p>ä½¿ç”¨ <code>DistributedDeviceManager</code> è·å–ç›®æ ‡è®¾å¤‡ NetworkIdï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> distributedDeviceManager <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.distributedDeviceManager'</span>;

<span class="hljs-comment">// å‘ç°å¯ç”¨è®¾å¤‡</span>
<span class="hljs-keyword">let</span> deviceManager = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(context);
<span class="hljs-keyword">let</span> deviceList = deviceManager.<span class="hljs-title function_">getTrustedDeviceListSync</span>();
<span class="hljs-keyword">let</span> targetDevice = deviceList.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">device</span> =&gt;</span> device.<span class="hljs-property">deviceName</span> === &amp;#<span class="hljs-number">34</span>;å¹³æ¿è®¾å¤‡&amp;#<span class="hljs-number">34</span>;);
<span class="hljs-keyword">let</span> networkId = targetDevice.<span class="hljs-property">networkId</span>;
</code></pre>
<h4 data-id="heading-4">3. <strong>æ‰‹æœºç«¯ï¼šç›¸æœºæ•è·ä¸æ»¤é•œå¤„ç†</strong></h4>
<p>é€šè¿‡ <code>@ohos.multimedia.camera</code> è·å–ç›¸æœºå¸§æ•°æ®å¹¶è½¬æ¢ä¸º <code>PixelMap</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> camera <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.multimedia.camera'</span>;

<span class="hljs-comment">// åˆ›å»ºç›¸æœºé¢„è§ˆæµ</span>
camera.<span class="hljs-title function_">createPreviewOutput</span>(cameraManager, surfaceId).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">previewOutput</span>) =&gt;</span> {
  previewOutput.<span class="hljs-title function_">on</span>(<span class="hljs-string">'frameStart'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// è·å–å›¾åƒæ•°æ®å¹¶åº”ç”¨æ»¤é•œ</span>
    <span class="hljs-keyword">let</span> pixelMap = <span class="hljs-keyword">await</span> image.<span class="hljs-title function_">createPixelMapFromSurface</span>(surfaceId);
    <span class="hljs-keyword">let</span> filteredPixelMap = <span class="hljs-title function_">applySepiaFilter</span>(pixelMap);  <span class="hljs-comment">// ç¤ºä¾‹ï¼šæ£•è¤è‰²æ»¤é•œ</span>
    <span class="hljs-title function_">sendToTablet</span>(filteredPixelMap, networkId);
  });
});

<span class="hljs-comment">// æ»¤é•œç®—æ³•ç¤ºä¾‹ï¼ˆæ£•è¤è‰²è°ƒï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">applySepiaFilter</span>(<span class="hljs-params">pixelMap: image.PixelMap</span>): image.<span class="hljs-property">PixelMap</span> {
  <span class="hljs-keyword">let</span> arrayBuffer = <span class="hljs-keyword">await</span> pixelMap.<span class="hljs-title function_">getImageData</span>();
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; arrayBuffer.<span class="hljs-property">length</span>; i += <span class="hljs-number">4</span>) {
    <span class="hljs-keyword">let</span> r = arrayBuffer[i], g = arrayBuffer[i+<span class="hljs-number">1</span>], b = arrayBuffer[i+<span class="hljs-number">2</span>];
    arrayBuffer[i] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">255</span>, (r * <span class="hljs-number">0.393</span>) + (g * <span class="hljs-number">0.769</span>) + (b * <span class="hljs-number">0.189</span>));
    arrayBuffer[i+<span class="hljs-number">1</span>] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">255</span>, (r * <span class="hljs-number">0.349</span>) + (g * <span class="hljs-number">0.686</span>) + (b * <span class="hljs-number">0.168</span>));
    arrayBuffer[i+<span class="hljs-number">2</span>] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">255</span>, (r * <span class="hljs-number">0.272</span>) + (g * <span class="hljs-number">0.534</span>) + (b * <span class="hljs-number">0.131</span>));
  }
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> image.<span class="hljs-title function_">createPixelMapFromData</span>(arrayBuffer, pixelMap.<span class="hljs-title function_">getImageInfo</span>());
}
</code></pre>
<h4 data-id="heading-5">4. <strong>è·¨è®¾å¤‡æ•°æ®ä¼ è¾“ï¼ˆRPC è°ƒç”¨ï¼‰</strong></h4>
<p><strong>æœåŠ¡ç«¯ï¼ˆå¹³æ¿ï¼‰å®šä¹‰è¿œç¨‹æ¥å£</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> rpc <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.rpc'</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">FilterService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">rpc.RemoteObject</span> {
  <span class="hljs-comment">// æ¥æ”¶æ‰‹æœºç«¯å‘é€çš„PixelMapæ•°æ®</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">onRemoteMessageRequest</span>(<span class="hljs-params">code: <span class="hljs-built_in">number</span>, data: rpc.MessageSequence, reply: rpc.MessageSequence</span>) {
    <span class="hljs-keyword">if</span> (code === <span class="hljs-number">1</span>) {
      <span class="hljs-keyword">let</span> pixelMapData = data.<span class="hljs-title function_">readObject</span>() <span class="hljs-keyword">as</span> image.<span class="hljs-property">PixelMap</span>;  <span class="hljs-comment">// ååºåˆ—åŒ–æ•°æ®</span>
      <span class="hljs-title function_">renderOnCanvas</span>(pixelMapData);  <span class="hljs-comment">// åœ¨å¹³æ¿ç«¯æ¸²æŸ“</span>
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
}
</code></pre>
<p><strong>å®¢æˆ·ç«¯ï¼ˆæ‰‹æœºï¼‰ç»‘å®šæœåŠ¡å¹¶å‘é€æ•°æ®</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ„é€ Wantå¯¹è±¡ç»‘å®šå¹³æ¿æœåŠ¡</span>
<span class="hljs-keyword">let</span> want = {
  <span class="hljs-attr">bundleName</span>: &amp;#<span class="hljs-number">34</span>;com.<span class="hljs-property">example</span>.<span class="hljs-property">tabletapp</span>&amp;#<span class="hljs-number">34</span>;,
  <span class="hljs-attr">abilityName</span>: &amp;#<span class="hljs-number">34</span>;<span class="hljs-title class_">FilterServiceAbility</span>&amp;#<span class="hljs-number">34</span>;,
  <span class="hljs-attr">deviceId</span>: networkId  <span class="hljs-comment">// ç›®æ ‡è®¾å¤‡æ ‡è¯†</span>
};

<span class="hljs-comment">// å‘é€æ»¤é•œå¤„ç†åçš„PixelMap</span>
<span class="hljs-keyword">let</span> proxy = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Context</span>.<span class="hljs-title function_">connectService</span>(want);
<span class="hljs-keyword">let</span> data = rpc.<span class="hljs-property">MessageSequence</span>.<span class="hljs-title function_">create</span>();
data.<span class="hljs-title function_">writeObject</span>(pixelMap);
proxy.<span class="hljs-title function_">sendMessageRequest</span>(<span class="hljs-number">1</span>, data);
</code></pre>
<h4 data-id="heading-6">5. <strong>å¹³æ¿ç«¯ï¼šå®æ—¶æ¸²æŸ“ä¸æ˜¾ç¤º</strong></h4>
<p>ä½¿ç”¨ <code>CanvasRenderer</code> æ¸²æŸ“æ¥æ”¶åˆ°çš„ <code>PixelMap</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> ui <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.arkui.ui'</span>;

<span class="hljs-comment">// åˆ›å»ºç”»å¸ƒç»„ä»¶</span>
struct <span class="hljs-title class_">FilterCanvas</span> {
  <span class="hljs-meta">@State</span> <span class="hljs-attr">pixelMap</span>: image.<span class="hljs-property">PixelMap</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Canvas</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">onCanvasReady</span>)
      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)
  }

  <span class="hljs-title function_">onCanvasReady</span>(<span class="hljs-params">ctx: CanvasRenderingContext2D</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">pixelMap</span>) {
      ctx.<span class="hljs-title function_">drawImage</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pixelMap</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">360</span>, <span class="hljs-number">640</span>);  <span class="hljs-comment">// æ¸²æŸ“å›¾åƒ</span>
    }
  }

  <span class="hljs-comment">// æ¥æ”¶æ‰‹æœºç«¯æ•°æ®æ›´æ–°UI</span>
  <span class="hljs-title function_">updatePixelMap</span>(<span class="hljs-params">newPixelMap: image.PixelMap</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixelMap</span> = newPixelMap;
  }
}
</code></pre>
<hr/>
<h3 data-id="heading-7">ä¸‰ã€æ€§èƒ½ä¼˜åŒ–å…³é”®ç‚¹</h3>
<ol>
<li>
<p><strong>æ•°æ®å‹ç¼©ä¼ è¾“</strong></p>
<ul>
<li>å°† <code>PixelMap</code> è½¬æ¢ä¸º <code>ArrayBuffer</code> åä½¿ç”¨ LZ4 å‹ç¼©ï¼Œå‡å°‘è½¯æ€»çº¿å¸¦å®½å ç”¨ã€‚</li>
<li>ä»£ç ç¤ºä¾‹ï¼š
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">let</span> compressedData = zlib.<span class="hljs-title function_">compress</span>(pixelMap.<span class="hljs-title function_">getImageData</span>(), { <span class="hljs-attr">level</span>: <span class="hljs-number">3</span> });
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>æ¸²æŸ“å¸§ç‡æ§åˆ¶</strong></p>
<ul>
<li>é€šè¿‡ <code>requestAnimationFrame</code> é™åˆ¶åˆ·æ–°ç‡ï¼ˆå¦‚ 30fpsï¼‰ï¼Œé¿å…å¹³æ¿ç«¯è¿‡è½½ã€‚</li>
</ul>
</li>
<li>
<p><strong>é”™è¯¯å¤„ç†ä¸é‡è¿</strong></p>
<ul>
<li>ç›‘å¬è®¾å¤‡æ–­å¼€äº‹ä»¶ï¼Œè‡ªåŠ¨åˆ‡æ¢è‡³æœ¬åœ°æ¸²æŸ“ï¼š
<pre><code class="hljs language-typescript" lang="typescript">deviceManager.<span class="hljs-title function_">on</span>(<span class="hljs-string">'deviceOffline'</span>, <span class="hljs-function">(<span class="hljs-params">device</span>) =&gt;</span> {
  <span class="hljs-title function_">showDialog</span>(<span class="hljs-string">'è®¾å¤‡æ–­å¼€ï¼Œå·²åˆ‡æ¢æœ¬åœ°æ¨¡å¼'</span>);
  <span class="hljs-title function_">switchToLocalRender</span>();
});
</code></pre>
</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-8">å››ã€å®Œæ•´æµç¨‹ç¤ºæ„å›¾</h3>
<pre><code class="hljs language-css" lang="css">æ‰‹æœºç«¯é‡‡é›† â†’ æ»¤é•œå¤„ç† â†’ è½¯æ€»çº¿ä¼ è¾“ â†’ å¹³æ¿æ¸²æŸ“ â†’ æ˜¾ç¤ºåé¦ˆ
    â†“          â†“           â†“           â†“         â†“
  Camera â†’ PixelMap â†’ RPCè°ƒç”¨ â†’ <span class="hljs-selector-tag">Canvas</span> â†’ UIæ›´æ–°
</code></pre>
<hr/>
<h3 data-id="heading-9">æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>è®¾å¤‡å…¼å®¹æ€§</strong>ï¼šéœ€ç¡®ä¿åŒç«¯è®¾å¤‡ä¸º HarmonyOS 6.0 åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œä¸”ç™»å½•åŒä¸€åä¸ºè´¦å·ã€‚</li>
<li><strong>å»¶è¿Ÿä¼˜åŒ–</strong>ï¼šè‹¥ä¼ è¾“å»¶è¿Ÿ &gt;100msï¼Œå¯é™ä½å›¾åƒåˆ†è¾¨ç‡ï¼ˆå¦‚ 720pâ†’480pï¼‰ã€‚</li>
<li><strong>éšç§å®‰å…¨</strong>ï¼šä¼ è¾“çš„ <code>PixelMap</code> æ•°æ®éœ€åœ¨æœ¬åœ°å®Œæˆè„±æ•å¤„ç†ï¼Œé¿å…æ•æ„Ÿä¿¡æ¯æ³„éœ²ã€‚</li>
</ol>
<p>é€šè¿‡ä»¥ä¸Šæ–¹æ¡ˆï¼Œå¯å®ç°æ‰‹æœºæ‹æ‘„åæ»¤é•œæ•ˆæœå®æ—¶åŒæ­¥è‡³å¹³æ¿æ¸²æŸ“ï¼Œå……åˆ†å‘æŒ¥é¸¿è’™åˆ†å¸ƒå¼èƒ½åŠ›ä¸å›¾åƒå¤„ç†æ€§èƒ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter Path.computeMetrics() çš„ä½¿ç”¨æ³¨æ„ç‚¹]]></title>    <link>https://juejin.cn/post/7582003642191937578</link>    <guid>https://juejin.cn/post/7582003642191937578</guid>    <pubDate>2025-12-10T11:20:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582003642191937578" data-draft-id="7581858890608492580" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter Path.computeMetrics() çš„ä½¿ç”¨æ³¨æ„ç‚¹"/> <meta itemprop="keywords" content="Flutter,Android"/> <meta itemprop="datePublished" content="2025-12-10T11:20:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç«æŸ´å°±æ˜¯æˆ‘"/> <meta itemprop="url" content="https://juejin.cn/user/272334614705575"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter Path.computeMetrics() çš„ä½¿ç”¨æ³¨æ„ç‚¹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/272334614705575/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç«æŸ´å°±æ˜¯æˆ‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T11:20:00.000Z" title="Wed Dec 10 2025 11:20:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸€ä¸ªPathè½¬è™šçº¿çš„æ‰©å±•</p>
<pre><code class="hljs language-java" lang="java">extension DashedPathExtension on Path {
  <span class="hljs-comment">/// è½¬æ¢ä¸ºè™šçº¿ Pathï¼ˆå®‰å…¨ç‰ˆï¼‰</span>
  <span class="hljs-comment">/// [solidLength]ï¼šå®çº¿æ®µé•¿åº¦ï¼ˆåƒç´ ï¼‰</span>
  <span class="hljs-comment">/// [gapLength]ï¼šç©ºçº¿æ®µé•¿åº¦ï¼ˆåƒç´ ï¼‰</span>
  <span class="hljs-comment">/// è¿”å›ï¼šæ–°çš„è™šçº¿ Pathï¼ˆåŸ Path ä¸å˜ï¼‰</span>
  Path <span class="hljs-title function_">toDashedPath</span><span class="hljs-params">({
    required <span class="hljs-type">double</span> solidLength,
    required <span class="hljs-type">double</span> gapLength,
  })</span> {
    <span class="hljs-comment">// å‰ç½®å‚æ•°æ ¡éªŒ</span>
    <span class="hljs-keyword">assert</span>(solidLength &gt; <span class="hljs-number">0</span>, &amp;#<span class="hljs-number">34</span>;å®çº¿æ®µé•¿åº¦å¿…é¡»å¤§äº<span class="hljs-number">0</span>&amp;#<span class="hljs-number">34</span>;);
    <span class="hljs-keyword">assert</span>(gapLength &gt;= <span class="hljs-number">0</span>, &amp;#<span class="hljs-number">34</span>;ç©ºçº¿æ®µé•¿åº¦ä¸èƒ½ä¸ºè´Ÿæ•°&amp;#<span class="hljs-number">34</span>;);

    <span class="hljs-comment">// 1. å®‰å…¨è·å– PathMetrics å¹¶æ ¡éªŒ</span>
    <span class="hljs-comment">//final PathMetrics metrics = computeMetrics();</span>
    <span class="hljs-comment">// // æ ¡éªŒ1ï¼šPathMetrics ä¸ºç©º â†’ è¿”å›ç©º Path</span>
    <span class="hljs-comment">//if (metrics.isEmpty) return Path();</span>

    <span class="hljs-comment">// 2. éå† metricsï¼ˆå…¼å®¹å¤šæ®µè·¯å¾„ï¼‰ï¼Œé¿å… first ç›´æ¥æŠ¥é”™</span>
    <span class="hljs-keyword">final</span> <span class="hljs-type">Path</span> <span class="hljs-variable">dashedPath</span> <span class="hljs-operator">=</span> Path();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> PathMetric metric in <span class="hljs-title function_">computeMetrics</span><span class="hljs-params">()</span>) {
      <span class="hljs-keyword">final</span> <span class="hljs-type">double</span> <span class="hljs-variable">totalLength</span> <span class="hljs-operator">=</span> metric.length;
      <span class="hljs-comment">// æ ¡éªŒ2ï¼šå•æ®µè·¯å¾„é•¿åº¦ä¸º0 â†’ è·³è¿‡</span>
      <span class="hljs-keyword">if</span> (totalLength &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">continue</span>;

      <span class="hljs-comment">// 3. å¾ªç¯ç»˜åˆ¶å®çº¿æ®µï¼ˆå§‹ç»ˆä»å®çº¿å¼€å§‹ï¼‰</span>
      <span class="hljs-type">double</span> <span class="hljs-variable">currentDistance</span> <span class="hljs-operator">=</span> <span class="hljs-number">0.0</span>;
      <span class="hljs-keyword">while</span> (currentDistance &lt; totalLength) {
        <span class="hljs-keyword">final</span> <span class="hljs-type">double</span> <span class="hljs-variable">solidEnd</span> <span class="hljs-operator">=</span> currentDistance + solidLength;
        <span class="hljs-keyword">final</span> <span class="hljs-type">double</span> <span class="hljs-variable">actualEnd</span> <span class="hljs-operator">=</span> solidEnd &gt; totalLength ? totalLength : solidEnd;

        <span class="hljs-comment">// æå–å®çº¿æ®µå¹¶æ·»åŠ åˆ°è™šçº¿ Path</span>
        <span class="hljs-keyword">final</span> <span class="hljs-type">Path</span> <span class="hljs-variable">segment</span> <span class="hljs-operator">=</span> metric.extractPath(currentDistance, actualEnd);
        dashedPath.addPath(segment, Offset.zero);

        <span class="hljs-comment">// è·³è¿‡ç©ºçº¿æ®µ</span>
        currentDistance = solidEnd + gapLength;
      }
    }

    <span class="hljs-keyword">return</span> dashedPath;
  }
}
</code></pre>
<p>æ³¨æ„ç‚¹æ˜¯è¿™ä¸ª</p>
<pre><code class="hljs language-js" lang="js">    <span class="hljs-comment">// 1. å®‰å…¨è·å– PathMetrics å¹¶æ ¡éªŒ</span>
    <span class="hljs-comment">// final PathMetrics metrics = computeMetrics();</span>
    <span class="hljs-comment">// // // æ ¡éªŒ1ï¼šPathMetrics ä¸ºç©º â†’ è¿”å›ç©º Path</span>
    <span class="hljs-comment">// if (metrics.isEmpty) return Path();</span>
</code></pre>
<p>è¿™é‡Œè°ƒç”¨äº† metrics.isEmpty()</p>
<pre><code class="hljs language-js" lang="js">  bool get isEmpty =&gt; !iterator.<span class="hljs-title function_">moveNext</span>();
</code></pre>
<p>ä¹Ÿå°±æ˜¯è°ƒç”¨äº†è¿­ä»£å™¨çš„moveNext() å†æ¬¡éå†metrics å°±ä¼šä»ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹ã€‚
å¦‚æœè¿­ä»£å™¨æœ¬èº«åªæœ‰ä¸€ä¸ªå…ƒç´ ,è¿™ä¸ªæ—¶å€™è°ƒç”¨metrics.first æ•‘æŠ¤æŠ¥é”™no elementã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Expo (React Native) æœ¬åœ°å­˜å‚¨å…¨æ”»ç•¥ï¼šæ™®é€šæ•°æ®ä¸æ•æ„Ÿæ•°æ®è¯¥å­˜å“ªï¼Ÿ]]></title>    <link>https://juejin.cn/post/7582036070159269888</link>    <guid>https://juejin.cn/post/7582036070159269888</guid>    <pubDate>2025-12-10T11:29:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582036070159269888" data-draft-id="7581876069609504811" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Expo (React Native) æœ¬åœ°å­˜å‚¨å…¨æ”»ç•¥ï¼šæ™®é€šæ•°æ®ä¸æ•æ„Ÿæ•°æ®è¯¥å­˜å“ªï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,React Native"/> <meta itemprop="datePublished" content="2025-12-10T11:29:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çš®è›‹å°ç²¾çµ"/> <meta itemprop="url" content="https://juejin.cn/user/219558056559278"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Expo (React Native) æœ¬åœ°å­˜å‚¨å…¨æ”»ç•¥ï¼šæ™®é€šæ•°æ®ä¸æ•æ„Ÿæ•°æ®è¯¥å­˜å“ªï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/219558056559278/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çš®è›‹å°ç²¾çµ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T11:29:43.000Z" title="Wed Dec 10 2025 11:29:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç§»åŠ¨åº”ç”¨å¼€å‘ä¸­ï¼Œ<strong>æ•°æ®æŒä¹…åŒ–</strong>ï¼ˆData Persistenceï¼‰æ˜¯ç»•ä¸å¼€çš„è¯é¢˜ã€‚æ— è®ºæ˜¯ä¸ºäº†è®©ç”¨æˆ·å…äºé‡å¤ç™»å½•ï¼Œè¿˜æ˜¯ä¿å­˜ç”¨æˆ·çš„åå¥½è®¾ç½®ï¼ˆå¦‚æ·±è‰²æ¨¡å¼ï¼‰ï¼Œæˆ‘ä»¬éƒ½éœ€è¦å°†æ•°æ®å­˜å‚¨åœ¨ç”¨æˆ·çš„è®¾å¤‡ä¸Šã€‚</p>
<p>å¯¹äºä½¿ç”¨ Expo å¼€å‘çš„ React Native é¡¹ç›®ï¼Œå®˜æ–¹æ¨èäº†ä¸¤ç§æˆªç„¶ä¸åŒçš„å­˜å‚¨æ–¹æ¡ˆï¼š<strong><code>AsyncStorage</code></strong> å’Œ <strong><code>expo-secure-store</code></strong>ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥è§£æè¿™ä¸¤è€…çš„åŒºåˆ«ã€é€‚ç”¨åœºæ™¯ï¼Œå¹¶æ•™ä½ å¦‚ä½•åœ¨é¡¹ç›®ä¸­ä¼˜é›…åœ°å°è£…å®ƒä»¬ã€‚</p>
<hr/>
<h2 data-id="heading-0">æ–¹æ¡ˆä¸€ï¼šAsyncStorageï¼ˆé€šç”¨å­˜å‚¨ï¼‰</h2>
<p><strong>AsyncStorage</strong> æ˜¯ React Native ç¤¾åŒºç»´æŠ¤çš„ä¸€ä¸ªå¼‚æ­¥ã€éåŠ å¯†çš„é”®å€¼å¯¹ï¼ˆKey-Valueï¼‰å­˜å‚¨ç³»ç»Ÿã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆæµè§ˆå™¨ç«¯çš„ <code>localStorage</code>ã€‚</p>
<h3 data-id="heading-1">1. é€‚ç”¨åœºæ™¯</h3>
<p>ç”±äºå®ƒæ˜¯<strong>æœªåŠ å¯†</strong>çš„ï¼Œä»»ä½•æ‹¥æœ‰è®¾å¤‡æ–‡ä»¶ç³»ç»Ÿè®¿é—®æƒé™çš„äººï¼ˆæˆ–æ¶æ„è½¯ä»¶ï¼‰éƒ½èƒ½è¯»å–è¿™äº›æ•°æ®ã€‚å› æ­¤ï¼Œå®ƒ<strong>åªé€‚åˆ</strong>å­˜å‚¨ï¼š</p>
<ul>
<li>âœ… ç”¨æˆ·åå¥½è®¾ç½®ï¼ˆå¦‚ï¼šæ˜¯å¦å¼€å¯æ¨é€ã€è¯­è¨€è®¾ç½®ã€ä¸»é¢˜è‰²ï¼‰</li>
<li>âœ… åº”ç”¨ç¼“å­˜æ•°æ®ï¼ˆå¦‚ï¼šé¦–é¡µçš„ä¸´æ—¶æ•°æ®åˆ—è¡¨ï¼‰</li>
<li>âœ… Redux/Zustand çŠ¶æ€çš„æŒä¹…åŒ–</li>
<li>âŒ <strong>ç»å¯¹ä¸è¦å­˜</strong>ï¼šç”¨æˆ·å¯†ç ã€èº«ä»½è®¤è¯ Tokenã€ä¿¡ç”¨å¡ä¿¡æ¯</li>
</ul>
<h3 data-id="heading-2">2. å®‰è£…</h3>
<pre><code class="hljs language-Bash" lang="Bash">npx expo install @react-native-async-storage/async-storage
</code></pre>
<h3 data-id="heading-3">3. ä½¿ç”¨ç¤ºä¾‹</h3>
<p>AsyncStorage åªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ã€‚å¦‚æœä½ è¦å­˜å‚¨å¯¹è±¡ï¼Œéœ€è¦ä½¿ç”¨ <code>JSON.stringify</code> å’Œ <code>JSON.parse</code> è¿›è¡Œè½¬æ¢ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">AsyncStorage</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@react-native-async-storage/async-storage'</span>;

<span class="hljs-comment">// 1. å­˜å‚¨æ•°æ® (Key å¿…é¡»æ˜¯å­—ç¬¦ä¸²ï¼ŒValue ä¹Ÿå¿…é¡»æ˜¯å­—ç¬¦ä¸²)</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">saveSettings</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">AsyncStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'app_theme'</span>, <span class="hljs-string">'dark'</span>);
    <span class="hljs-comment">// å­˜å‚¨å¯¹è±¡éœ€åºåˆ—åŒ–</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">AsyncStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'user_profile'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'John'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span> }));
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ä¿å­˜å¤±è´¥'</span>, e);
  }
};

<span class="hljs-comment">// 2. è¯»å–æ•°æ®</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">loadSettings</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> theme = <span class="hljs-keyword">await</span> <span class="hljs-title class_">AsyncStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'app_theme'</span>);
    
    <span class="hljs-keyword">const</span> jsonValue = <span class="hljs-keyword">await</span> <span class="hljs-title class_">AsyncStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'user_profile'</span>);
    <span class="hljs-keyword">const</span> userProfile = jsonValue != <span class="hljs-literal">null</span> ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(jsonValue) : <span class="hljs-literal">null</span>;
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(theme, userProfile);
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯»å–å¤±è´¥'</span>, e);
  }
};

<span class="hljs-comment">// 3. åˆ é™¤/æ¸…ç©º</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">clearData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">AsyncStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'app_theme'</span>); <span class="hljs-comment">// åˆ é™¤å•ä¸ª</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">AsyncStorage</span>.<span class="hljs-title function_">clear</span>(); <span class="hljs-comment">// æ¸…ç©ºæ‰€æœ‰ï¼ˆæ…ç”¨ï¼‰</span>
}
</code></pre>
<hr/>
<h2 data-id="heading-4">æ–¹æ¡ˆäºŒï¼šexpo-secure-storeï¼ˆå®‰å…¨å­˜å‚¨ï¼‰</h2>
<p><strong>SecureStore</strong> æ˜¯ Expo æä¾›çš„ä¸€ä¸ªåº“ï¼Œå®ƒåˆ©ç”¨äº†æ“ä½œç³»ç»Ÿåº•å±‚çš„å®‰å…¨æœºåˆ¶æ¥åŠ å¯†å­˜å‚¨æ•°æ®ã€‚</p>
<ul>
<li><strong>iOS</strong>: ä½¿ç”¨ <strong>Keychain Services</strong>ï¼ˆé’¥åŒ™ä¸²ï¼‰ã€‚</li>
<li><strong>Android</strong>: ä½¿ç”¨ <strong>SharedPreferences</strong>ï¼ˆé…åˆ Keystore åŠ å¯†ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-5">1. é€‚ç”¨åœºæ™¯</h3>
<p>è¿™æ˜¯å­˜å‚¨æ•æ„Ÿæ•°æ®çš„å”¯ä¸€æ­£ç¡®é€‰æ‹©ï¼š</p>
<ul>
<li>âœ… èº«ä»½è®¤è¯ Token (Auth Token / Refresh Token)</li>
<li>âœ… ç”¨æˆ·å¯†ç  (Password)</li>
<li>âœ… API å¯†é’¥ (API Keys)</li>
</ul>
<h3 data-id="heading-6">2. å®‰è£…</h3>
<pre><code class="hljs language-Bash" lang="Bash">npx expo install expo-secure-store
</code></pre>
<h3 data-id="heading-7">3. ä½¿ç”¨ç¤ºä¾‹</h3>
<p>API ä¸ AsyncStorage éå¸¸ç›¸ä¼¼ï¼Œä½†å®ƒä¿è¯äº†æ•°æ®æ˜¯åŠ å¯†è½ç›˜çš„ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-title class_">SecureStore</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'expo-secure-store'</span>;

<span class="hljs-comment">// 1. å­˜å‚¨æ•æ„Ÿæ•°æ®</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">saveToken</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">token: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-comment">// æ³¨æ„ï¼šKey å’Œ Value éƒ½å¿…é¡»æ˜¯å­—ç¬¦ä¸²</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title class_">SecureStore</span>.<span class="hljs-title function_">setItemAsync</span>(<span class="hljs-string">'user_token'</span>, token);
};

<span class="hljs-comment">// 2. è¯»å–æ•°æ®</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getToken</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> token = <span class="hljs-keyword">await</span> <span class="hljs-title class_">SecureStore</span>.<span class="hljs-title function_">getItemAsync</span>(<span class="hljs-string">'user_token'</span>);
  <span class="hljs-keyword">if</span> (token) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·å–åˆ° Token:'</span>, token);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœªæ‰¾åˆ° Token'</span>);
  }
};

<span class="hljs-comment">// 3. åˆ é™¤æ•°æ® (å¦‚ç”¨æˆ·ç™»å‡ºæ—¶)</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">removeToken</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">await</span> <span class="hljs-title class_">SecureStore</span>.<span class="hljs-title function_">deleteItemAsync</span>(<span class="hljs-string">'user_token'</span>);
};
</code></pre>
<hr/>
<h2 data-id="heading-8">æ·±åº¦å¯¹æ¯”ï¼šè¯¥é€‰å“ªä¸€ä¸ªï¼Ÿ</h2>



































<table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>AsyncStorage</strong></th><th><strong>SecureStore</strong></th></tr></thead><tbody><tr><td><strong>å®‰å…¨æ€§</strong></td><td>ğŸš¨ <strong>ä½</strong> (æ˜æ–‡å­˜å‚¨ï¼Œç±»ä¼¼ TXT æ–‡ä»¶)</td><td>ğŸ”’ <strong>é«˜</strong> (OS çº§ç¡¬ä»¶åŠ å¯†)</td></tr><tr><td><strong>å­˜å‚¨å®¹é‡</strong></td><td>è¾ƒå¤§ (å‡  MB åˆ°å‡ å MB æ²¡é—®é¢˜)</td><td>æå° (å»ºè®®åªå­˜ &lt; 2KB çš„çŸ­å­—ç¬¦ä¸²)</td></tr><tr><td><strong>è¯»å†™é€Ÿåº¦</strong></td><td>å¿«</td><td>ç¨æ…¢ (æ¶‰åŠè§£å¯†è¿‡ç¨‹)</td></tr><tr><td><strong>æ•°æ®ç±»å‹</strong></td><td>ä»…å­—ç¬¦ä¸² (éœ€æ‰‹åŠ¨ JSON åºåˆ—åŒ–)</td><td>ä»…å­—ç¬¦ä¸²</td></tr><tr><td><strong>æ ¸å¿ƒç”¨é€”</strong></td><td>ç¼“å­˜ã€è®¾ç½®ã€éæ•æ„ŸçŠ¶æ€</td><td><strong>Tokenã€å¯†ç ã€è¯ä¹¦</strong></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-9">æœ€ä½³å®è·µï¼šå°è£…ç»Ÿä¸€çš„å­˜å‚¨å·¥å…·</h2>
<p>åœ¨çœŸå®çš„é¡¹ç›®å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¸åº”è¯¥åœ¨ UI ç»„ä»¶é‡Œç›´æ¥è°ƒç”¨ <code>AsyncStorage</code> æˆ– <code>SecureStore</code>ï¼Œè€Œæ˜¯åº”è¯¥å°è£…ä¸€ä¸ªå·¥å…·æ¨¡å—ã€‚è¿™æ ·æ—¢èƒ½ç»Ÿä¸€ç®¡ç† Keyï¼Œåˆèƒ½å±è”½åº•å±‚å®ç°çš„å·®å¼‚ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªæ¨èçš„ <strong><code>utils/storage.ts</code></strong> å°è£…ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// utils/storage.ts</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">AsyncStorage</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@react-native-async-storage/async-storage'</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-title class_">SecureStore</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'expo-secure-store'</span>;

<span class="hljs-comment">// å®šä¹‰æ‰€æœ‰çš„ Keyï¼Œé˜²æ­¢æ‰‹è¯¯å†™é”™</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEYS</span> = {
  <span class="hljs-attr">TOKEN</span>: <span class="hljs-string">'auth_token'</span>,
  <span class="hljs-attr">USER_INFO</span>: <span class="hljs-string">'user_info'</span>,
  <span class="hljs-attr">THEME</span>: <span class="hljs-string">'app_theme'</span>,
};

<span class="hljs-comment">/**
 * æ•æ„Ÿæ•°æ®å­˜å‚¨å·¥å…· (ä½¿ç”¨ SecureStore)
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AuthStorage</span> = {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">setToken</span>(<span class="hljs-params">token: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">SecureStore</span>.<span class="hljs-title function_">setItemAsync</span>(<span class="hljs-variable constant_">KEYS</span>.<span class="hljs-property">TOKEN</span>, token);
  },

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getToken</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title class_">SecureStore</span>.<span class="hljs-title function_">getItemAsync</span>(<span class="hljs-variable constant_">KEYS</span>.<span class="hljs-property">TOKEN</span>);
  },

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">clearToken</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">SecureStore</span>.<span class="hljs-title function_">deleteItemAsync</span>(<span class="hljs-variable constant_">KEYS</span>.<span class="hljs-property">TOKEN</span>);
  },
};

<span class="hljs-comment">/**
 * æ™®é€šæ•°æ®å­˜å‚¨å·¥å…· (ä½¿ç”¨ AsyncStorage)
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AppStorage</span> = {
  <span class="hljs-comment">// å°è£…å¯¹è±¡å­˜å‚¨ï¼Œè‡ªåŠ¨å¤„ç† JSON è½¬æ¢</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">setUser</span>(<span class="hljs-params">user: <span class="hljs-built_in">any</span></span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> jsonValue = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(user);
      <span class="hljs-keyword">await</span> <span class="hljs-title class_">AsyncStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-variable constant_">KEYS</span>.<span class="hljs-property">USER_INFO</span>, jsonValue);
    } <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Saving user failed'</span>, e);
    }
  },

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getUser</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> jsonValue = <span class="hljs-keyword">await</span> <span class="hljs-title class_">AsyncStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-variable constant_">KEYS</span>.<span class="hljs-property">USER_INFO</span>);
      <span class="hljs-keyword">return</span> jsonValue != <span class="hljs-literal">null</span> ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(jsonValue) : <span class="hljs-literal">null</span>;
    } <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Loading user failed'</span>, e);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
  },
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">clearAll</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">await</span> <span class="hljs-title class_">AsyncStorage</span>.<span class="hljs-title function_">clear</span>();
  }
};
</code></pre>
<h3 data-id="heading-10">å¦‚ä½•åœ¨ä¸šåŠ¡ä¸­ä½¿ç”¨ï¼Ÿ</h3>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AuthStorage</span>, <span class="hljs-title class_">AppStorage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils/storage'</span>;

<span class="hljs-comment">// ç™»å½•æˆåŠŸå</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleLoginSuccess</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">apiResponse</span>) =&gt; {
    <span class="hljs-keyword">const</span> { token, user } = apiResponse;
    
    <span class="hljs-comment">// 1. Token è¿›ä¿é™©ç®±</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">AuthStorage</span>.<span class="hljs-title function_">setToken</span>(token);
    
    <span class="hljs-comment">// 2. ç”¨æˆ·ä¿¡æ¯è¿›æ™®é€šä»“åº“</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">setUser</span>(user);
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç™»å½•æ•°æ®å·²æŒä¹…åŒ–'</span>);
};

<span class="hljs-comment">// é€€å‡ºç™»å½•æ—¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleLogout</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">AuthStorage</span>.<span class="hljs-title function_">clearToken</span>();
    <span class="hljs-keyword">await</span> <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">setUser</span>(<span class="hljs-literal">null</span>); 
};
</code></pre>
<h2 data-id="heading-11">æ€»ç»“</h2>
<p>åœ¨ React Native (Expo) å¼€å‘ä¸­ï¼Œè¯·åŠ¡å¿…éµå®ˆ <strong>â€œæ•°æ®åˆ†çº§â€</strong> åŸåˆ™ï¼š</p>
<ol>
<li><strong>Token å’Œå¯†ç </strong>ï¼šå¿…é¡»é€šè¿‡ <code>expo-secure-store</code> æ”¾å…¥ç³»ç»Ÿçš„â€œä¿é™©ç®±â€ã€‚</li>
<li><strong>è®¾ç½®å’Œç¼“å­˜</strong>ï¼šå¯ä»¥é€šè¿‡ <code>@react-native-async-storage/async-storage</code> æ”¾å…¥æ™®é€šçš„â€œå‚¨ç‰©æŸœâ€ã€‚</li>
</ol>
<p>é€šè¿‡åˆç†çš„å°è£…ï¼Œä½ å¯ä»¥è®©ä»£ç æ›´å®‰å…¨ã€æ›´æ•´æ´ï¼Œä¹Ÿæ›´æ˜“äºç»´æŠ¤ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[VS Codeç»ˆç«¯ä»å…¥é—¨åˆ°ç²¾é€šå®Œå…¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7581995152190849066</link>    <guid>https://juejin.cn/post/7581995152190849066</guid>    <pubDate>2025-12-10T11:32:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581995152190849066" data-draft-id="7582003642191986730" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="VS Codeç»ˆç«¯ä»å…¥é—¨åˆ°ç²¾é€šå®Œå…¨æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2025-12-10T11:32:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            VS Codeç»ˆç«¯ä»å…¥é—¨åˆ°ç²¾é€šå®Œå…¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T11:32:13.000Z" title="Wed Dec 10 2025 11:32:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å½“å‰ï¼ŒVisual Studio Codeçš„é›†æˆç»ˆç«¯å·²æˆä¸ºå¼€å‘è€…æ—¥å¸¸å·¥ä½œä¸­ä¸å¯æˆ–ç¼ºçš„å·¥å…·ã€‚å®ƒä¸ä»…èƒ½è¿è¡Œ <code>echo</code>ã€ <code>ls</code> å’Œ <code>git</code> ç­‰å‘½ä»¤ï¼Œè¿˜ä¸ç¼–è¾‘å™¨æ·±åº¦é›†æˆï¼Œæ”¯æŒå·¥ä½œåŒºæ–‡ä»¶é“¾æ¥å’Œé”™è¯¯æ£€æµ‹ç­‰åŠŸèƒ½ã€‚æ— è®ºä½ æ˜¯ä½¿ç”¨Bashã€Zshè¿˜æ˜¯PowerShellï¼ŒVS Codeç»ˆç«¯éƒ½èƒ½æ»¡è¶³ä½ çš„éœ€æ±‚ã€‚</p>
<p>æ‰“å¼€ç»ˆç«¯çš„ä¸‰ç§æ–¹å¼ï¼š</p>
<ul>
<li>å¿«æ·é”®ï¼š <code>Ctrl+``ï¼ˆWindows/Linuxï¼‰æˆ–</code>Cmd+``ï¼ˆmacOSï¼‰</li>
<li>èœå•æ ï¼š<strong>æŸ¥çœ‹ &gt; ç»ˆç«¯</strong></li>
<li>å‘½ä»¤é¢æ¿ï¼š <code>Ctrl+Shift+P</code> è¾“å…¥<strong>ç»ˆç«¯ï¼šæ–°å»ºç»ˆç«¯</strong></li>
</ul>
<p>ç»ˆç«¯é»˜è®¤å·¥ä½œç›®å½•ä¸ºå½“å‰æ‰“å¼€çš„VS Codeé¡¹ç›®æ ¹ç›®å½•ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥ç›´æ¥è¿è¡Œä¸é¡¹ç›®ç›¸å…³çš„å‘½ä»¤ï¼Œæ— éœ€é¢å¤–åˆ‡æ¢è·¯å¾„ã€‚</p>
<h2 data-id="heading-0">åŸºç¡€æ“ä½œ</h2>
<p>VS Codeç»ˆç«¯æä¾›ä¸°å¯Œçš„äº¤äº’åŠŸèƒ½ï¼Œè®©ä½ èƒ½å¤Ÿé«˜æ•ˆåœ°ä¸å‘½ä»¤è¾“å‡ºè¿›è¡Œäº¤äº’ã€‚å‘½ä»¤é€šå¸¸ä¼šè¾“å‡ºæ–‡ä»¶è·¯å¾„æˆ–URLï¼Œä½ åªéœ€æŒ‰ä½Ctrl/Cmdé”®ï¼Œå°†é¼ æ ‡æ‚¬åœåœ¨æ–‡ä»¶åä¸Šï¼Œç„¶åç‚¹å‡»é“¾æ¥ï¼ŒVS Codeä¼šè‡ªåŠ¨åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€è¯¥æ–‡ä»¶ã€‚å¯¹äºURLï¼Œç‚¹å‡»åä¼šåœ¨é»˜è®¤æµè§ˆå™¨ä¸­æ‰“å¼€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84d6c57dd60b450e92beef7718da6538~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB5LqL5ryr6LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765971132&amp;x-signature=4H%2FOhO%2FDF18%2BzKMRRk2OyHbSps8%3D" alt="image.png" loading="lazy"/></p>
<p>æ ¸å¿ƒå¿«æ·é”®ä¸€è§ˆï¼š</p>
<ul>
<li>æ–°å»ºç»ˆç«¯ï¼š `Ctrl+Shift+``</li>
<li>åˆ‡æ¢ç»ˆç«¯ï¼š <code>Ctrl+PageUp/PageDown</code></li>
<li>åˆ†å±ç»ˆç«¯ï¼š <code>Ctrl+\</code>ï¼ˆWindows/Linuxï¼‰æˆ– <code>Cmd+\</code>ï¼ˆmacOSï¼‰</li>
<li>å…³é—­ç»ˆç«¯ï¼š <code>Ctrl+Shift+W</code></li>
</ul>
<p>å‘½ä»¤å†å²å¯¼èˆªï¼š</p>
<ul>
<li>å‘ä¸ŠæŸ¥çœ‹å†å²å‘½ä»¤ï¼š <code>â†‘</code> é”®</li>
<li>å‘ä¸‹æŸ¥çœ‹å†å²å‘½ä»¤ï¼š <code>â†“</code> é”®</li>
<li>æœç´¢å†å²å‘½ä»¤ï¼š <code>Ctrl+R</code>ï¼ˆBash/Zshï¼‰æˆ– <code>F8</code>ï¼ˆPowerShellï¼‰</li>
</ul>
<p>åˆ›å»ºå‘½ä»¤åˆ—è¡¨æ–‡ä»¶ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Bash/Zsh</span>
<span class="hljs-built_in">ls</span> -l /usr/bin &gt; Command.txt

<span class="hljs-comment"># PowerShell</span>
Get-Command | Out-File -FilePath .\Command.txt
</code></pre>
<h2 data-id="heading-1">é…ç½®æ–‡ä»¶</h2>
<p>ç»ˆç«¯é…ç½®æ–‡ä»¶æ˜¯ç‰¹å®šäºå¹³å°çš„shellé…ç½®ï¼Œç”±å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ã€å‚æ•°å’Œå…¶ä»–è‡ªå®šä¹‰é¡¹ç»„æˆã€‚VS Codeä¼šè‡ªåŠ¨æ£€æµ‹å‡ ä¸ªå¸¸è§çš„é…ç½®æ–‡ä»¶ï¼Œä½ ä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œè‡ªå®šä¹‰æˆ–æ·»åŠ æ–°çš„é…ç½®æ–‡ä»¶ã€‚</p>
<p>è®¾ç½®é»˜è®¤é…ç½®æ–‡ä»¶æ­¥éª¤ï¼š</p>
<ul>
<li>æ‰“å¼€å‘½ä»¤é¢æ¿ï¼ˆ <code>Ctrl+Shift+P</code>ï¼‰</li>
<li>æœç´¢"ç»ˆç«¯: é€‰æ‹©é»˜è®¤é…ç½®æ–‡ä»¶"</li>
<li>ä»ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©ä½ å¸¸ç”¨çš„shell</li>
</ul>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒLinuxå’ŒmacOSä¸Šçš„é»˜è®¤shellæ˜¯ <code>$SHELL</code> ç¯å¢ƒå˜é‡æŒ‡å®šçš„ç¨‹åºï¼ŒWindowsç³»ç»Ÿé»˜è®¤ä½¿ç”¨PowerShellã€‚</p>
<p>è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼ˆsettings.jsonï¼‰ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  &amp;#<span class="hljs-number">34</span>;terminal.integrated.profiles.windows&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    &amp;#<span class="hljs-number">34</span>;PowerShell - NoProfile&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      &amp;#<span class="hljs-number">34</span>;source&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;PowerShell&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
      &amp;#<span class="hljs-number">34</span>;args&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>&amp;#<span class="hljs-number">34</span>;-NoProfile&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    &amp;#<span class="hljs-number">34</span>;Git Bash&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      &amp;#<span class="hljs-number">34</span>;path&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;C<span class="hljs-punctuation">:</span>\\Program Files\\Git\\bin\\bash.exe&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
      &amp;#<span class="hljs-number">34</span>;args&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>&amp;#<span class="hljs-number">34</span>;--login&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;terminal.integrated.defaultProfile.windows&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;Git Bash&amp;#<span class="hljs-number">34</span>;
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-2">Shellé›†æˆ</h2>
<p>VS Codeèƒ½å¤Ÿä¸å¸¸è§çš„Shellé›†æˆï¼Œä½¿ç»ˆç«¯å¯ä»¥æ›´æ·±å…¥åœ°äº†è§£Shellå†…éƒ¨çš„æƒ…å†µã€‚è¿™ç§é›†æˆå¯ç”¨äº†å·¥ä½œç›®å½•æ£€æµ‹ã€å‘½ä»¤æ£€æµ‹ã€è£…é¥°å’Œå¯¼èˆªç­‰æœ‰ç”¨åŠŸèƒ½ã€‚</p>
<p>æ”¯æŒçš„ShellåŒ…æ‹¬Linux/macOSä¸Šçš„bashã€fishã€pwshã€zshï¼Œä»¥åŠWindowsä¸Šçš„Git Bashå’Œpwshã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä»VS Codeå¯åŠ¨å—æ”¯æŒçš„Shellæ—¶ï¼ŒShellé›†æˆè„šæœ¬ä¼šè‡ªåŠ¨æ¿€æ´»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/44b355fbec424e5e8275491b8a54f1f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB5LqL5ryr6LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765971132&amp;x-signature=NXlmF6%2Fyz06hJSfBTsrjT04vTVs%3D" alt="image.png" loading="lazy"/></p>
<p>æ‰‹åŠ¨å®‰è£…Shellé›†æˆï¼ˆä»¥bashä¸ºä¾‹ï¼‰ï¼š</p>
<ul>
<li>æ‰“å¼€é…ç½®æ–‡ä»¶ï¼š <code>code ~/.bashrc</code></li>
<li>æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">[[ &amp;<span class="hljs-comment">#34;$TERM_PROGRAM&amp;#34; == &amp;#34;vscode&amp;#34; ]] &amp;&amp; . &amp;#34;$(code --locate-shell-integration-path bash)&amp;#34;</span>
</code></pre>
<ul>
<li>é‡æ–°åŠ è½½é…ç½®ï¼š <code>source ~/.bashrc</code></li>
</ul>
<p>Shellé›†æˆè´¨é‡åˆ†ä¸º"æ— "ã€"ä¸°å¯Œ"å’Œ"åŸºæœ¬"ä¸‰ä¸ªç­‰çº§ã€‚å°†é¼ æ ‡æ‚¬åœåœ¨ç»ˆç«¯é€‰é¡¹å¡ä¸Šå¯ä»¥æŸ¥çœ‹å½“å‰çš„é›†æˆè´¨é‡çŠ¶æ€ã€‚</p>
<h2 data-id="heading-3">å¤–è§‚è®¾ç½®</h2>
<p>VS Codeç»ˆç«¯çš„å¤–è§‚å¯ä»¥è¿›è¡Œå¹¿æ³›çš„è‡ªå®šä¹‰ï¼ŒåŒ…æ‹¬æ–‡æœ¬æ ·å¼ã€å…‰æ ‡æ ·å¼å’Œé€‰é¡¹å¡ç­‰ã€‚é€šè¿‡è°ƒæ•´è¿™äº›è®¾ç½®ï¼Œä½ å¯ä»¥æ‰“é€ ä¸€ä¸ªæ—¢ç¾è§‚åˆç¬¦åˆä¸ªäººä¹ æƒ¯çš„ç»ˆç«¯ç¯å¢ƒã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae78ca4728114d5d88c0be960dc88101~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB5LqL5ryr6LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765971132&amp;x-signature=h5QGs71bzL1R1B1B3xBrAw6u6bY%3D" alt="image.png" loading="lazy"/></p>
<p>å¸¸ç”¨å¤–è§‚è®¾ç½®ï¼ˆsettings.jsonï¼‰ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  &amp;#<span class="hljs-number">34</span>;terminal.integrated.fontFamily&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;'Fira Code'<span class="hljs-punctuation">,</span> 'Hack NF'<span class="hljs-punctuation">,</span> monospace&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;terminal.integrated.fontSize&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-number">14</span><span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;terminal.integrated.lineHeight&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-number">1.2</span><span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;terminal.integrated.cursorStyle&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;line&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;terminal.integrated.cursorWidth&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;terminal.integrated.cursorBlinking&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;workbench.colorCustomizations&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    &amp;#<span class="hljs-number">34</span>;terminal.background&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;#<span class="hljs-number">1e1</span>e1e&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
    &amp;#<span class="hljs-number">34</span>;terminal.foreground&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;#e0e0e0&amp;#<span class="hljs-number">34</span>;
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>Powerlineå’ŒNerd Fontsé…ç½®ï¼š</p>
<pre><code class="hljs language-json" lang="json">&amp;#<span class="hljs-number">34</span>;terminal.integrated.fontFamily&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;'DejaVu Sans Mono for Powerline'<span class="hljs-punctuation">,</span> 'Hack NF'&amp;#<span class="hljs-number">34</span>;
</code></pre>
<h2 data-id="heading-4">é«˜çº§åŠŸèƒ½</h2>
<p>VS Codeç»ˆç«¯æä¾›äº†è®¸å¤šé«˜çº§åŠŸèƒ½ï¼Œå¸®åŠ©ä½ è¿›ä¸€æ­¥æå‡å¼€å‘æ•ˆç‡ã€‚</p>
<h3 data-id="heading-5">æŒä¹…ä¼šè¯</h3>
<p>ç»ˆç«¯æ”¯æŒä¸¤ç§æŒä¹…ä¼šè¯ç±»å‹ï¼š</p>
<ul>
<li>è¿›ç¨‹é‡æ–°è¿æ¥ï¼šé‡æ–°åŠ è½½çª—å£æ—¶é‡æ–°è¿æ¥åˆ°å…ˆå‰çš„è¿›ç¨‹</li>
<li>è¿›ç¨‹æ¢å¤ï¼šé‡æ–°å¯åŠ¨VS Codeæ—¶æ¢å¤ç»ˆç«¯å†…å®¹å¹¶é‡æ–°å¯åŠ¨è¿›ç¨‹</li>
</ul>
<p>ç¦ç”¨æŒä¹…ä¼šè¯ï¼š</p>
<pre><code class="hljs language-json" lang="json">&amp;#<span class="hljs-number">34</span>;terminal.integrated.enablePersistentSessions&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
</code></pre>
<h3 data-id="heading-6">å‘½ä»¤åˆ«åè®¾ç½®</h3>
<p>é€šè¿‡shellé…ç½®æ–‡ä»¶å®ç°å¸¸ç”¨å‘½ä»¤çš„å¿«æ·æ–¹å¼ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Bash/Zshç”¨æˆ·ç¼–è¾‘~/.bashrcæˆ–~/.zshrc</span>
<span class="hljs-built_in">alias</span> ll=<span class="hljs-string">'ls -la'</span>
<span class="hljs-built_in">alias</span> gs=<span class="hljs-string">'git status'</span>
<span class="hljs-built_in">alias</span> gp=<span class="hljs-string">'git push'</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/787d064309364ed6968e86f8009678a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB5LqL5ryr6LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765971132&amp;x-signature=BjsdY09agq3FF9p5UzyLkJ4TOyc%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-7">è‡ªå®šä¹‰é”®ç›˜å¿«æ·é”®</h3>
<p>åœ¨keybindings.jsonä¸­é…ç½®ç»ˆç«¯å¿«æ·é”®ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  &amp;#<span class="hljs-number">34</span>;key&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;ctrl+shift+t&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;command&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;workbench.action.terminal.sendSequence&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;args&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> &amp;#<span class="hljs-number">34</span>;text&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;npm run dev\n&amp;#<span class="hljs-number">34</span>; <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-8">å¤šç»ˆç«¯ç®¡ç†</h3>
<ul>
<li>é‡å‘½åç»ˆç«¯ï¼šå³é”®ç»ˆç«¯é€‰é¡¹å¡ &gt; <strong>é‡å‘½å</strong></li>
<li>ç§»åŠ¨ç»ˆç«¯ï¼šæ‹–æ‹½ç»ˆç«¯é€‰é¡¹å¡åˆ°ç¼–è¾‘å™¨åŒºåŸŸæˆ–æ–°çª—å£</li>
<li>ç»ˆç«¯åˆ†ç»„ï¼šå³é”®ç»ˆç«¯ &gt; <strong>ç§»åŠ¨åˆ°æ–°ç»„</strong></li>
</ul>
<h3 data-id="heading-9">ä»»åŠ¡è‡ªåŠ¨åŒ–</h3>
<p>åœ¨å·¥ä½œåŒºæ ¹ç›®å½•åˆ›å»º <code>.vscode/tasks.json</code>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  &amp;#<span class="hljs-number">34</span>;version&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">2.0</span><span class="hljs-number">.0</span>&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;tasks&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      &amp;#<span class="hljs-number">34</span>;label&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;å¯åŠ¨å¼€å‘æœåŠ¡å™¨&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
      &amp;#<span class="hljs-number">34</span>;type&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;shell&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
      &amp;#<span class="hljs-number">34</span>;command&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;npm run dev&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
      &amp;#<span class="hljs-number">34</span>;group&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        &amp;#<span class="hljs-number">34</span>;kind&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;build&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
        &amp;#<span class="hljs-number">34</span>;isDefault&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      &amp;#<span class="hljs-number">34</span>;problemMatcher&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ä½¿ç”¨ <code>Ctrl+Shift+B</code> å¿«é€Ÿè¿è¡Œä»»åŠ¡ã€‚</p>
<p>VS Codeç»ˆç«¯ä¸ä»…ä»…æ˜¯ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œå·¥å…·ï¼Œå®ƒæ˜¯ä½ å¼€å‘å·¥ä½œæµçš„æ ¸å¿ƒéƒ¨åˆ†ã€‚èŠ±æ—¶é—´é…ç½®å¥½ç»ˆç«¯ï¼Œæ¯å¤©èŠ‚çœçš„æ“ä½œæ—¶é—´ä¼šç´¯ç§¯æˆæ˜¾è‘—çš„æ•ˆç‡ä¼˜åŠ¿ã€‚æ— è®ºä½ æ˜¯åˆšå…¥é—¨çš„æ–°æ‰‹è¿˜æ˜¯ç»éªŒä¸°å¯Œçš„å¼€å‘è€…ï¼ŒæŒæ¡è¿™äº›ç»ˆç«¯æŠ€å·§éƒ½å°†ä½¿ä½ çš„VS Codeä½“éªŒæ›´åŠ æµç•…å’Œé«˜æ•ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç°ä»£C++ç³»ç»Ÿç¼–ç¨‹ä¸­ç±»å‹é‡è§£é‡Šçš„å†…å­˜å®‰å…¨èŒƒå¼]]></title>    <link>https://juejin.cn/post/7581858890608574500</link>    <guid>https://juejin.cn/post/7581858890608574500</guid>    <pubDate>2025-12-10T11:35:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581858890608574500" data-draft-id="7581876069609553963" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç°ä»£C++ç³»ç»Ÿç¼–ç¨‹ä¸­ç±»å‹é‡è§£é‡Šçš„å†…å­˜å®‰å…¨èŒƒå¼"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-10T11:35:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç°ä»£C++ç³»ç»Ÿç¼–ç¨‹ä¸­ç±»å‹é‡è§£é‡Šçš„å†…å­˜å®‰å…¨èŒƒå¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T11:35:30.000Z" title="Wed Dec 10 2025 11:35:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨åº•å±‚ç³»ç»Ÿç¼–ç¨‹é¢†åŸŸï¼ŒæŒ‡é’ˆè¿ç®—å’Œç±»å‹é‡è§£é‡Šæ˜¯æ„å»ºé«˜æ€§èƒ½ç¡¬ä»¶æ¥å£å’Œæ•°æ®å¤„ç†ç®¡é“çš„åŸºçŸ³ã€‚ç„¶è€Œï¼Œä¸€ä¸ªæ™®éå­˜åœ¨çš„ç¼–ç æ¨¡å¼â€”â€”<code>reinterpret_cast(byte_buffer[offset])</code>â€”â€”æ­ç¤ºäº†ç¨‹åºå‘˜å¯¹C++æŒ‡é’ˆè¯­ä¹‰çš„æ·±å±‚æ¬¡è¯¯è§£ã€‚æœ¬æ–‡é€šè¿‡å½¢å¼åŒ–åˆ†æè¿™ä¸€åæ¨¡å¼ï¼Œæ¢è®¨äº†åœ°å€ç©ºé—´æ“ä½œä¸å€¼è¯­ä¹‰çš„æ··æ·†ç°è±¡ï¼Œæå‡ºäº†åŸºäºç°ä»£C++ç±»å‹ç³»ç»Ÿçš„å®‰å…¨è®¿é—®èŒƒå¼ï¼Œå¹¶å»ºç«‹äº†é˜²å¾¡æ€§æŒ‡é’ˆè¿ç®—çš„å·¥ç¨‹å®è·µæ¡†æ¶ã€‚</p>
<h2 data-id="heading-0">1. ä¸€ä¸ªå·¥ä¸šçº§åæ¨¡å¼</h2>
<h3 data-id="heading-1">1.1 åæ¨¡å¼å®šä¹‰</h3>
<p>è€ƒè™‘ä»¥ä¸‹ç¡¬ä»¶æ•°æ®é‡‡é›†ç³»ç»Ÿçš„å…¸å‹ä»£ç ç‰‡æ®µï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// PCIe DMAç¼“å†²åŒºæ•°æ®æµå¤„ç†</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">SensorData</span> {
    <span class="hljs-type">float</span> real_component;
    <span class="hljs-type">float</span> imag_component;
    <span class="hljs-type">uint32_t</span> timestamp;
    <span class="hljs-type">uint16_t</span> quality_flag;
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">DataPipeline</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ProcessHardwareData</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span>* dma_buffer, <span class="hljs-type">size_t</span> buffer_capacity)</span> </span>{
        <span class="hljs-keyword">constexpr</span> <span class="hljs-type">size_t</span> protocol_overhead = <span class="hljs-number">64</span>;  <span class="hljs-comment">// åè®®å¤´éƒ¨å¤§å°</span>
        
        <span class="hljs-comment">// åæ¨¡å¼ï¼šå±é™©çš„ç±»å‹é‡è§£é‡Š</span>
        SensorData* sensor_stream = 
            <span class="hljs-built_in">reinterpret_cast</span>(dma_buffer[protocol_overhead]);
        
        <span class="hljs-built_in">ExtractTelemetry</span>(sensor_stream);
    }
};
</code></pre>
<h3 data-id="heading-2">1.2 è¯­ä¹‰åˆ†æ</h3>
<p>ä¸Šè¿°ä»£ç ä¸­ï¼Œç¨‹åºå‘˜æ„å›¾è·³è¿‡64å­—èŠ‚çš„åè®®å¤´éƒ¨ï¼Œå°†åç»­æ•°æ®è§£é‡Šä¸º<code>SensorData</code>ç»“æ„æµã€‚ç„¶è€Œï¼Œè¡¨è¾¾å¼çš„å®é™…è¯­ä¹‰æ˜¯ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// è¯­æ³•æ ‘åˆ†è§£</span>
dma_buffer[protocol_overhead]           <span class="hljs-comment">// 1. æ•°ç»„ä¸‹æ ‡æ“ä½œç¬¦ï¼Œè¿”å›uint8_tå€¼</span>
<span class="hljs-built_in">reinterpret_cast</span>(... )     <span class="hljs-comment">// 2. å°†8ä½æ•´æ•°å€¼å¼ºåˆ¶è½¬æ¢ä¸ºæŒ‡é’ˆ</span>

<span class="hljs-comment">// ç­‰ä»·å±•å¼€</span>
<span class="hljs-type">uint8_t</span> temporary_byte = *(dma_buffer + protocol_overhead);
SensorData* misinterpreted_ptr = <span class="hljs-built_in">reinterpret_cast</span>(
    <span class="hljs-built_in">static_cast</span>(temporary_byte)
);
</code></pre>
<p><strong>å…³é”®æ´å¯Ÿ</strong>ï¼šç¨‹åºå‘˜æ‰§è¡Œçš„æ˜¯<strong>å€¼çš„ç±»å‹é‡è§£é‡Š</strong>è€Œé<strong>åœ°å€çš„ç±»å‹é‡è§£é‡Š</strong>ï¼Œè¿™è¿åäº†æŒ‡é’ˆä»£æ•°çš„åŸºæœ¬å…¬ç†ã€‚</p>
<h2 data-id="heading-3">2. ç†è®ºåŸºç¡€</h2>
<h3 data-id="heading-4">2.1 å†…å­˜å¯¹è±¡æ¨¡å‹ï¼ˆC++17 Â§6.7ï¼‰</h3>
<p>C++æ ‡å‡†å°†å­˜å‚¨åˆ†ä¸º<strong>å­—èŠ‚</strong>ï¼ˆbyteï¼‰å’Œ<strong>å¯¹è±¡</strong>ï¼ˆobjectï¼‰ä¸¤ä¸ªæŠ½è±¡å±‚æ¬¡ã€‚ç±»å‹ç³»ç»Ÿåœ¨è¿™ä¸¤ä¸ªå±‚æ¬¡é—´å»ºç«‹äº†æ˜ å°„å…³ç³»ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å†…å­˜å¸ƒå±€çš„æ•°å­¦æè¿°</span>
<span class="hljs-keyword">template</span>
<span class="hljs-keyword">concept</span> ByteRepresentable = <span class="hljs-keyword">requires</span> {
    <span class="hljs-built_in">sizeof</span>(T) &gt;= <span class="hljs-number">1</span>;
    <span class="hljs-built_in">alignof</span>(T) &gt;= <span class="hljs-number">1</span>;
};

<span class="hljs-comment">// å¯¹è±¡åˆ›å»ºçš„å…¬ç†</span>
<span class="hljs-keyword">template</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryObject</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// å…¬ç†1ï¼šå¯¹è±¡å æ®è¿ç»­çš„å­—èŠ‚åºåˆ—</span>
    <span class="hljs-built_in">static_assert</span>(is_trivially_copyable_v);
    
    <span class="hljs-comment">// å…¬ç†2ï¼šå¯¹è±¡åœ°å€ç­‰äºå…¶é¦–å­—èŠ‚åœ°å€</span>
    <span class="hljs-function"><span class="hljs-type">uint8_t</span>* <span class="hljs-title">begin_bytes</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">reinterpret_cast</span>(<span class="hljs-built_in">const_cast</span>(<span class="hljs-keyword">this</span>));
    }
    
    <span class="hljs-comment">// å…¬ç†3ï¼šç±»å‹å®‰å…¨çš„é‡è§£é‡Šå¿…é¡»åŸºäºåœ°å€è€Œéå€¼</span>
    <span class="hljs-function"><span class="hljs-keyword">template</span>
    <span class="hljs-type">static</span> U* <span class="hljs-title">ReinterpretAtAddress</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span>* byte_address)</span> </span>{
        <span class="hljs-comment">// æ­£ç¡®ï¼šåœ°å€è½¬æ¢</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">reinterpret_cast</span>&lt;u&gt;(byte_address);
    }
    
    <span class="hljs-function"><span class="hljs-keyword">template</span>
    <span class="hljs-type">static</span> U* <span class="hljs-title">ReinterpretAtValue</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> byte_value)</span> </span>{  <span class="hljs-comment">// å±é™©ï¼</span>
        <span class="hljs-comment">// é”™è¯¯ï¼šå€¼è½¬æ¢ï¼ˆè¿åå†…å­˜å®‰å…¨ï¼‰</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">reinterpret_cast</span>&lt;u&gt;(<span class="hljs-built_in">static_cast</span>(byte_value));
    }
};
</code></pre>
<h3 data-id="heading-5">2.2 æŒ‡é’ˆè¿ç®—çš„å½¢å¼è¯­ä¹‰</h3>
<p>æŒ‡é’ˆè¿ç®—åœ¨C++æ ‡å‡†ä¸­å®šä¹‰ä¸º<strong>åŸºäºç±»å‹çš„åœ°å€ç®—æœ¯</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æŒ‡é’ˆè¿ç®—çš„å½¢å¼å®šä¹‰</span>
<span class="hljs-keyword">template</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">FormalPointer</span> {
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">uintptr_t</span> base_address;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// å®šä¹‰ï¼šæŒ‡é’ˆåŠ æ³• â‰¡ åœ°å€åç§» + ç±»å‹å¤§å°ç¼©æ”¾</span>
    FormalPointer <span class="hljs-keyword">operator</span>+(<span class="hljs-type">ptrdiff_t</span> n) <span class="hljs-type">const</span> {
        <span class="hljs-type">uintptr_t</span> raw_offset = n * <span class="hljs-built_in">sizeof</span>(T);
        <span class="hljs-type">uintptr_t</span> new_address = base_address + raw_offset;
        
        <span class="hljs-comment">// æ»¡è¶³ï¼šp + n â‰¡ reinterpret_cast(reinterpret_cast(p) + n * sizeof(T))</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">FormalPointer</span>(new_address);
    }
    
    <span class="hljs-comment">// å…³é”®åŒºåˆ«ï¼šä¸‹æ ‡æ“ä½œç¬¦è¿”å›çš„æ˜¯å€¼ï¼Œä¸æ˜¯åœ°å€</span>
    T <span class="hljs-keyword">operator</span>[](<span class="hljs-type">ptrdiff_t</span> n) <span class="hljs-type">const</span> {
        <span class="hljs-keyword">return</span> *(<span class="hljs-keyword">this</span> + n);  <span class="hljs-comment">// è§£å¼•ç”¨æ“ä½œ</span>
    }
};
</code></pre>
<h2 data-id="heading-6">3. å·¥ç¨‹å½±å“</h2>
<h3 data-id="heading-7">3.1 å±é™©åœºæ™¯åˆ†ç±»</h3>



































<table><thead><tr><th>åœºæ™¯ç±»å‹</th><th>é”™è¯¯æ¨¡å¼</th><th>æ½œåœ¨åæœ</th><th>å‘ç”Ÿæ¦‚ç‡</th></tr></thead><tbody><tr><td><strong>ç¡¬ä»¶æ¥å£</strong></td><td><code>reinterpret_cast(mmio_base[offset])</code></td><td>æ€»çº¿é”™è¯¯ï¼Œç¡¬ä»¶é”æ­»</td><td>é«˜</td></tr><tr><td><strong>ç½‘ç»œåè®®</strong></td><td><code>reinterpret_cast(rx_buffer[header_len])</code></td><td>æ•°æ®æŸåï¼Œå®‰å…¨æ¼æ´</td><td>ä¸­</td></tr><tr><td><strong>æ–‡ä»¶æ˜ å°„</strong></td><td><code>reinterpret_cast&lt;header&gt;(file_view[magic_size])</code></td><td>æ®µé”™è¯¯ï¼Œæ–‡ä»¶æŸå</td><td>é«˜</td></tr><tr><td><strong>è·¨è¯­è¨€æ¥å£</strong></td><td><code>reinterpret_cast(c_buffer[alignment])</code></td><td>ABIä¸åŒ¹é…ï¼Œæ ˆç ´å</td><td>ä¸­</td></tr></tbody></table>
<h3 data-id="heading-8">3.2 çœŸå®æ¡ˆä¾‹åˆ†æ</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ¡ˆä¾‹ï¼šåŒ»ç–—æˆåƒè®¾å¤‡å›ºä»¶æ¼æ´ï¼ˆå·²åŒ¿ååŒ–å¤„ç†ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UltrasoundImageProcessor</span> {
    <span class="hljs-comment">// å†å²æ¼æ´ä»£ç </span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ProcessEchoData</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span>* pcie_payload)</span> </span>{
        <span class="hljs-comment">// é”™è¯¯ï¼šå°†FIRST_SAMPLE_OFFSETå¤„çš„å­—èŠ‚å€¼å½“ä½œæŒ‡é’ˆ</span>
        ComplexFloat* echo_samples = 
            <span class="hljs-built_in">reinterpret_cast</span>(pcie_payload[FIRST_SAMPLE_OFFSET]);
        
        <span class="hljs-comment">// å½“pcie_payload[32] = 0x80æ—¶</span>
        <span class="hljs-comment">// å®é™…è®¿é—®åœ°å€0x00000080ï¼Œå±äºå†…æ ¸ç©ºé—´</span>
        <span class="hljs-comment">// å¯¼è‡´ç‰¹æƒçº§å¼‚å¸¸ï¼Œç³»ç»Ÿå´©æºƒ</span>
    }
    
    <span class="hljs-comment">// ä¿®å¤å</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ProcessEchoDataSafe</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span>* pcie_payload)</span> </span>{
        <span class="hljs-comment">// æ­£ç¡®ï¼šè®¡ç®—åç§»åœ°å€åè¿›è¡Œç±»å‹é‡è§£é‡Š</span>
        <span class="hljs-type">uint8_t</span>* samples_start = pcie_payload + FIRST_SAMPLE_OFFSET;
        ComplexFloat* echo_samples = 
            <span class="hljs-built_in">reinterpret_cast</span>(samples_start);
        
        <span class="hljs-comment">// æ·»åŠ è¾¹ç•ŒéªŒè¯</span>
        <span class="hljs-type">size_t</span> available_bytes = <span class="hljs-built_in">CalculateAvailableBytes</span>(pcie_payload);
        <span class="hljs-keyword">if</span> (samples_start + <span class="hljs-built_in">sizeof</span>(ComplexFloat) &gt; pcie_payload + available_bytes) {
            <span class="hljs-built_in">LogFault</span>(FAULT_BOUNDARY_VIOLATION);
            <span class="hljs-keyword">return</span>;
        }
    }
};
</code></pre>
<p><strong>åæœåˆ†æ</strong>ï¼šåŸå§‹æ¼æ´å¯¼è‡´è®¾å¤‡åœ¨ç‰¹å®šæ•°æ®æ¨¡å¼ä¸‹ï¼ˆæ¦‚ç‡çº¦0.4%ï¼‰å‘ç”Ÿç³»ç»Ÿçº§å´©æºƒï¼Œéœ€è¦ç°åœºå·¥ç¨‹å¸ˆé‡å¯ã€‚ä¿®å¤åå®ç°äº†é›¶æ•…éšœè¿è¡Œè¶…è¿‡18ä¸ªæœˆã€‚</p>
<h2 data-id="heading-9">4. ç±»å‹å®‰å…¨çš„è§£å†³æ–¹æ¡ˆæ¡†æ¶</h2>
<h3 data-id="heading-10">4.1 ç¼–è¯‘æ—¶éªŒè¯ç³»ç»Ÿ</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ¦‚å¿µï¼šå¯å®‰å…¨é‡è§£é‡Šçš„å†…å­˜åŒºåŸŸ</span>
<span class="hljs-keyword">template</span>
<span class="hljs-keyword">concept</span> SafelyReinterpretable = <span class="hljs-keyword">requires</span> {
    <span class="hljs-keyword">requires</span> is_trivially_copyable_v;
    <span class="hljs-keyword">requires</span> is_trivially_copyable_v;
    <span class="hljs-keyword">requires</span> is_standard_layout_v;
    <span class="hljs-function"><span class="hljs-keyword">requires</span> <span class="hljs-title">sizeof</span><span class="hljs-params">(To)</span> &lt;</span>= <span class="hljs-built_in">sizeof</span>(From);  <span class="hljs-comment">// æˆ–æ»¡è¶³ç‰¹å®šå¯¹é½</span>
};

<span class="hljs-comment">// å®‰å…¨æŒ‡é’ˆå°è£…å™¨</span>
<span class="hljs-keyword">template</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CheckedReinterpretPtr</span> {
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">uint8_t</span>* base_ptr_;
    <span class="hljs-type">size_t</span> capacity_;
    
    <span class="hljs-comment">// ç¼–è¯‘æ—¶æ£€æŸ¥ï¼šé˜²æ­¢å€¼åˆ°æŒ‡é’ˆçš„é”™è¯¯è½¬æ¢</span>
    <span class="hljs-keyword">template</span>
    <span class="hljs-type">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-type">bool</span> IsValueToPointerConversion = 
        is_pointer_v&lt;u&gt; &amp;&amp; !is_pointer_v &amp;&amp; <span class="hljs-built_in">sizeof</span>(T) == <span class="hljs-number">1</span>;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">template</span>
    <span class="hljs-keyword">explicit</span> <span class="hljs-title">CheckedReinterpretPtr</span><span class="hljs-params">(ByteSource* source, <span class="hljs-type">size_t</span> capacity)</span>
        : base_ptr_(reinterpret_cast(source))
        , capacity_(capacity) {</span>
        
        <span class="hljs-built_in">static_assert</span>(!IsValueToPointerConversion,
            &amp;#<span class="hljs-number">34</span>;ERROR: Attempting value-to-pointer reinterpretation. &amp;#<span class="hljs-number">34</span>;
            &amp;#<span class="hljs-number">34</span>;Use pointer arithmetic instead.&amp;#<span class="hljs-number">34</span>;);
    }
    
    <span class="hljs-comment">// å®‰å…¨çš„åç§»è®¿é—®ï¼ˆç¼–è¯‘æ—¶+è¿è¡Œæ—¶æ£€æŸ¥ï¼‰</span>
    <span class="hljs-keyword">template</span>
    [[nodiscard]] <span class="hljs-function">Expected 
    <span class="hljs-title">OffsetAs</span><span class="hljs-params">(<span class="hljs-type">size_t</span> byte_offset)</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-comment">// ç¼–è¯‘æ—¶éªŒè¯</span>
        <span class="hljs-built_in">static_assert</span>(SafelyReinterpretable,
            &amp;#<span class="hljs-number">34</span>;Target type <span class="hljs-keyword">not</span> safely reinterpretable from bytes&amp;#<span class="hljs-number">34</span>;);
        
        <span class="hljs-comment">// è¿è¡Œæ—¶è¾¹ç•Œæ£€æŸ¥</span>
        <span class="hljs-keyword">if</span> (byte_offset + <span class="hljs-built_in">sizeof</span>(TargetType) &gt; capacity_) {
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Unexpected</span>(AccessError::OutOfBounds);
        }
        
        <span class="hljs-type">uint8_t</span>* target_address = base_ptr_ + byte_offset;
        
        <span class="hljs-comment">// å¯¹é½æ£€æŸ¥ï¼ˆå¦‚æœä¸¥æ ¼è¦æ±‚ï¼‰</span>
        <span class="hljs-function"><span class="hljs-keyword">if</span> <span class="hljs-title">constexpr</span> <span class="hljs-params">(<span class="hljs-keyword">alignof</span>(TargetType) &gt; <span class="hljs-number">1</span>)</span> </span>{
            <span class="hljs-type">uintptr_t</span> addr = <span class="hljs-built_in">reinterpret_cast</span>(target_address);
            <span class="hljs-keyword">if</span> (addr % <span class="hljs-built_in">alignof</span>(TargetType) != <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-built_in">Unexpected</span>(AccessError::Misaligned);
            }
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">reinterpret_cast</span>(target_address);
    }
};
</code></pre>
<h3 data-id="heading-11">4.2 å·¥ä¸šçº§æœ€ä½³å®è·µ</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å®è·µ1ï¼šåˆ†å±‚æŠ½è±¡æ¶æ„</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">HardwareDataChannel</span> {
<span class="hljs-keyword">private</span>:
    <span class="hljs-comment">// ç¬¬ä¸€å±‚ï¼šåŸå§‹å­—èŠ‚è®¿é—®ï¼ˆéš”ç¦»å±é™©æ“ä½œï¼‰</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">RawByteAccessor</span> {
        <span class="hljs-type">uint8_t</span>* <span class="hljs-type">const</span> buffer_;
        <span class="hljs-type">const</span> <span class="hljs-type">size_t</span> capacity_;
        
    <span class="hljs-keyword">public</span>:
        <span class="hljs-comment">// ä»…æä¾›å®‰å…¨çš„åŸå§‹æ“ä½œ</span>
        <span class="hljs-function">Span <span class="hljs-title">SliceBytes</span><span class="hljs-params">(<span class="hljs-type">size_t</span> offset, <span class="hljs-type">size_t</span> length)</span> <span class="hljs-type">const</span> </span>{
            <span class="hljs-keyword">if</span> (offset + length &gt; capacity_) {
                <span class="hljs-built_in">ThrowBoundaryError</span>(offset, length, capacity_);
            }
            <span class="hljs-keyword">return</span> {buffer_ + offset, length};  <span class="hljs-comment">// æ­£ç¡®ï¼šæŒ‡é’ˆç®—æœ¯</span>
        }
    };
    
    <span class="hljs-comment">// ç¬¬äºŒå±‚ï¼šç±»å‹å®‰å…¨è§†å›¾</span>
    <span class="hljs-keyword">template</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">TypedDataView</span> {
        Span raw_span_;
        
    <span class="hljs-keyword">public</span>:
        <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">TypedDataView</span><span class="hljs-params">(Span raw)</span> : raw_span_(raw) {</span>
            <span class="hljs-built_in">ValidateLayout</span>();
        }
        
        <span class="hljs-function">DataType* <span class="hljs-title">data</span><span class="hljs-params">()</span> </span>{
            <span class="hljs-comment">// å®‰å…¨çš„å•ç‚¹è½¬æ¢</span>
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">reinterpret_cast</span>(raw_span_.<span class="hljs-built_in">data</span>());
        }
    };
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">template</span>
    TypedDataView <span class="hljs-title">GetDataView</span><span class="hljs-params">(<span class="hljs-type">size_t</span> byte_offset)</span> </span>{
        <span class="hljs-keyword">auto</span> raw_slice = raw_accessor_.<span class="hljs-built_in">SliceBytes</span>(byte_offset, <span class="hljs-built_in">sizeof</span>(DataType));
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">TypedDataView</span>(raw_slice);
    }
};

<span class="hljs-comment">// å®è·µ2ï¼šåŸºäºç­–ç•¥çš„è®¾è®¡æ¨¡å¼</span>
<span class="hljs-keyword">template</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PolicyBasedReinterpreter</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">template</span>
    <span class="hljs-type">static</span> TargetType* <span class="hljs-title">Reinterpret</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span>* source, <span class="hljs-type">size_t</span> offset)</span> </span>{
        <span class="hljs-comment">// ç­–ç•¥é©±åŠ¨çš„å®‰å…¨æ£€æŸ¥</span>
        <span class="hljs-function"><span class="hljs-keyword">if</span> <span class="hljs-title">constexpr</span> <span class="hljs-params">(SafetyPolicy::requires_bounds_check)</span> </span>{
            SafetyPolicy::<span class="hljs-built_in">ValidateBounds</span>(source, offset, <span class="hljs-built_in">sizeof</span>(TargetType));
        }
        
        <span class="hljs-function"><span class="hljs-keyword">if</span> <span class="hljs-title">constexpr</span> <span class="hljs-params">(SafetyPolicy::requires_alignment_check)</span> </span>{
            SafetyPolicy::<span class="hljs-built_in">ValidateAlignment</span>(source + offset);
        }
        
        <span class="hljs-function"><span class="hljs-keyword">if</span> <span class="hljs-title">constexpr</span> <span class="hljs-params">(SafetyPolicy::requires_type_safety)</span> </span>{
            SafetyPolicy::<span class="hljs-built_in">ValidateTypeCompatibility</span>();
        }
        
        <span class="hljs-comment">// å®‰å…¨çš„æ ¸å¿ƒè½¬æ¢</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">reinterpret_cast</span>(source + offset);
    }
};

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹ï¼šåŒ»ç–—è®¾å¤‡çš„é«˜å®‰å…¨æ€§ç­–ç•¥</span>
<span class="hljs-keyword">using</span> MedicalImagingPolicy = SafetyPolicy&lt;
    bounds_check = Strict,
    alignment_check = Strict,
    type_safety = Strict,
    logging = Detailed
&gt;;

<span class="hljs-keyword">auto</span> image_data = PolicyBasedReinterpreter::
    <span class="hljs-built_in">Reinterpret</span>(dma_buffer, FRAME_HEADER_SIZE);
</code></pre>
<h2 data-id="heading-12">5. éªŒè¯ä¸æµ‹è¯•æ–¹æ³•è®º</h2>
<h3 data-id="heading-13">5.1 é™æ€åˆ†æè§„åˆ™</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Clang-Tidyè‡ªå®šä¹‰æ£€æŸ¥è§„åˆ™</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ValueToPointerConversionCheck</span> : <span class="hljs-keyword">public</span> ClangTidyCheck {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">registerMatchers</span><span class="hljs-params">(MatchFinder* Finder)</span> <span class="hljs-keyword">override</span> </span>{
        <span class="hljs-comment">// åŒ¹é…æ¨¡å¼ï¼šreinterpret_cast(buffer[index])</span>
        Finder-&gt;<span class="hljs-built_in">addMatcher</span>(
            <span class="hljs-built_in">reinterpretCastExpr</span>(
                <span class="hljs-built_in">hasSourceExpression</span>(
                    <span class="hljs-built_in">arraySubscriptExpr</span>(
                        <span class="hljs-built_in">hasBase</span>(<span class="hljs-built_in">expr</span>().<span class="hljs-built_in">bind</span>(&amp;#<span class="hljs-number">34</span>;base&amp;#<span class="hljs-number">34</span>;)),
                        <span class="hljs-built_in">hasIndex</span>(<span class="hljs-built_in">expr</span>().<span class="hljs-built_in">bind</span>(&amp;#<span class="hljs-number">34</span>;index&amp;#<span class="hljs-number">34</span>;))
                    )
                )
            ).<span class="hljs-built_in">bind</span>(&amp;#<span class="hljs-number">34</span>;reinterpret&amp;#<span class="hljs-number">34</span>;),
            <span class="hljs-keyword">this</span>
        );
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">check</span><span class="hljs-params">(<span class="hljs-type">const</span> MatchResult&amp; Result)</span> <span class="hljs-keyword">override</span> </span>{
        <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>* Reinterpret = Result.Nodes.<span class="hljs-built_in">getNodeAs</span>(&amp;#<span class="hljs-number">34</span>;reinterpret&amp;#<span class="hljs-number">34</span>;);
        <span class="hljs-built_in">diag</span>(Reinterpret-&gt;<span class="hljs-built_in">getBeginLoc</span>(), 
            &amp;#<span class="hljs-number">34</span>;å±é™©ï¼šå°†æ•°ç»„å…ƒç´ çš„å€¼è½¬æ¢ä¸ºæŒ‡é’ˆã€‚&amp;#<span class="hljs-number">34</span>;
            &amp;#<span class="hljs-number">34</span>;è¿™é€šå¸¸æ„å‘³ç€æ„å›¾è¿›è¡ŒæŒ‡é’ˆåç§»è€Œéå€¼è½¬æ¢ã€‚\n&amp;#<span class="hljs-number">34</span>;
            &amp;#<span class="hljs-number">34</span>;å»ºè®®ä½¿ç”¨ï¼š<span class="hljs-built_in">reinterpret_cast</span>(buffer + offset)&amp;#<span class="hljs-number">34</span>;)
            &lt;&lt; FixItHint::<span class="hljs-built_in">CreateReplacement</span>(
                Reinterpret-&gt;<span class="hljs-built_in">getSourceRange</span>(),
                <span class="hljs-built_in">GenerateFix</span>(Result));
    }
};

<span class="hljs-comment">// LLVMç¼–è¯‘å™¨æ’ä»¶ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PointerSemanticsSanitizer</span> : <span class="hljs-keyword">public</span> llvm::ModulePass {
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">runOnModule</span><span class="hljs-params">(llvm::Module&amp; M)</span> <span class="hljs-keyword">override</span> </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; F : M) {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; BB : F) {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; I : BB) {
                    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span>* CI = <span class="hljs-built_in">dyn_cast</span>(&amp;I)) {
                        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsValueToPointerCast</span>(CI)) {
                            <span class="hljs-built_in">InsertRuntimeCheck</span>(CI);  <span class="hljs-comment">// æ’å…¥è¿è¡Œæ—¶æ£€æŸ¥</span>
                            ++InstrumentedCasts;
                        }
                    }
                }
            }
        }
        <span class="hljs-keyword">return</span> InstrumentedCasts &gt; <span class="hljs-number">0</span>;
    }
};
</code></pre>
<h3 data-id="heading-14">5.2 è¿è¡Œæ—¶é˜²æŠ¤æœºåˆ¶</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å†…å­˜ä¿æŠ¤ä»£ç†</span>
<span class="hljs-keyword">template</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ProtectedMemoryAllocator</span> : <span class="hljs-keyword">public</span> UnderlyingAllocator {
<span class="hljs-keyword">private</span>:
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">AllocationMetadata</span> {
        <span class="hljs-type">uintptr_t</span> base_address;
        <span class="hljs-type">size_t</span> total_size;
        std::array canary_value;  <span class="hljs-comment">// è¾¹ç•Œä¿æŠ¤</span>
    };
    
    std::unordered_map allocation_map_;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span>* <span class="hljs-title">allocate</span><span class="hljs-params">(<span class="hljs-type">size_t</span> size, <span class="hljs-type">size_t</span> alignment)</span> <span class="hljs-keyword">override</span> </span>{
        <span class="hljs-type">void</span>* raw_mem = UnderlyingAllocator::<span class="hljs-built_in">allocate</span>(
            size + <span class="hljs-built_in">sizeof</span>(AllocationMetadata) + <span class="hljs-number">64</span>,  <span class="hljs-comment">// é¢å¤–ç©ºé—´</span>
            alignment
        );
        
        <span class="hljs-comment">// è®¾ç½®ä¿æŠ¤åŒºåŸŸ</span>
        <span class="hljs-built_in">SetupMemoryProtection</span>(raw_mem, size);
        
        <span class="hljs-comment">// è®°å½•å…ƒæ•°æ®ç”¨äºéªŒè¯</span>
        AllocationMetadata meta = {
            .base_address = <span class="hljs-built_in">reinterpret_cast</span>(raw_mem),
            .total_size = size
        };
        <span class="hljs-built_in">GenerateCanary</span>(meta.canary_value);
        
        allocation_map_[raw_mem] = meta;
        
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">CalculateUserPointer</span>(raw_mem);
    }
    
    <span class="hljs-comment">// éªŒè¯æ‰€æœ‰æŒ‡é’ˆè®¿é—®</span>
    <span class="hljs-function"><span class="hljs-keyword">template</span>
    T* <span class="hljs-title">ValidateAndTranslate</span><span class="hljs-params">(<span class="hljs-type">void</span>* user_ptr, <span class="hljs-type">size_t</span> offset)</span> </span>{
        <span class="hljs-keyword">auto</span>* actual_base = <span class="hljs-built_in">FindAllocationBase</span>(user_ptr);
        <span class="hljs-keyword">if</span> (!actual_base) {
            <span class="hljs-built_in">TriggerSecurityViolation</span>(SecurityEvent::InvalidPointer);
        }
        
        <span class="hljs-type">uint8_t</span>* target_address = 
            <span class="hljs-built_in">reinterpret_cast</span>(actual_base) + offset;
        
        <span class="hljs-comment">// éªŒè¯è¾¹ç•Œ</span>
        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">IsWithinAllocation</span>(target_address, <span class="hljs-built_in">sizeof</span>(T))) {
            <span class="hljs-built_in">TriggerSecurityViolation</span>(SecurityEvent::BoundaryOverflow);
        }
        
        <span class="hljs-comment">// éªŒè¯canaryå®Œæ•´æ€§</span>
        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">VerifyCanaryIntegrity</span>(actual_base)) {
            <span class="hljs-built_in">TriggerSecurityViolation</span>(SecurityEvent::BufferCorruption);
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">reinterpret_cast</span>(target_address);
    }
};
</code></pre>
<h2 data-id="heading-15">6. ç»“è®ºå»ºè®®</h2>
<h3 data-id="heading-16">6.1 æ ¸å¿ƒå‘ç°</h3>
<ol>
<li>
<p><strong>è¯­ä¹‰é¸¿æ²Ÿ</strong>ï¼š<code>buffer[offset]</code>ä¸<code>buffer + offset</code>ä¹‹é—´çš„å·®å¼‚åæ˜ äº†C++ä¸­å€¼è¯­ä¹‰ä¸åœ°å€è¯­ä¹‰çš„æ ¹æœ¬åŒºåˆ«ï¼Œè¿™ç§åŒºåˆ«åœ¨ç±»å‹é‡è§£é‡Šæ—¶å°¤ä¸ºå±é™©ã€‚</p>
</li>
<li>
<p><strong>ç³»ç»Ÿæ€§é£é™©</strong>ï¼šå€¼åˆ°æŒ‡é’ˆçš„é”™è¯¯è½¬æ¢é€šå¸¸ä¸ä¼šåœ¨å•å…ƒæµ‹è¯•ä¸­æš´éœ²ï¼Œä½†åœ¨ç‰¹å®šç¡¬ä»¶çŠ¶æ€æˆ–æ•°æ®æ¨¡å¼ä¸‹ä¼šå¯¼è‡´ç³»ç»Ÿæ€§å´©æºƒï¼Œæ„æˆ<strong>é—´æ­‡æ€§æ•…éšœ</strong>æ¨¡å¼ã€‚</p>
</li>
<li>
<p><strong>é˜²å¾¡æ€§æ¶æ„</strong>ï¼šé€šè¿‡ç¼–è¯‘æ—¶çº¦æŸã€è¿è¡Œæ—¶éªŒè¯å’Œåˆ†å±‚æŠ½è±¡ï¼Œå¯ä»¥å®Œå…¨æ¶ˆé™¤æ­¤ç±»é”™è¯¯ï¼ŒåŒæ—¶ä¿æŒç³»ç»Ÿæ€§èƒ½ã€‚</p>
</li>
</ol>
<h3 data-id="heading-17">6.2 è¡Œä¸šæ ‡å‡†å»ºè®®</h3>
<p><strong>ISO C++å§”å‘˜ä¼šææ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æè®®ï¼šåœ¨C++26ä¸­å¼•å…¥[[pointer_arithmetic]]å±æ€§</span>
<span class="hljs-keyword">template</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">hardware_interface</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// æ˜ç¡®æ ‡è®°åº”ä½¿ç”¨æŒ‡é’ˆç®—æœ¯çš„åœºæ™¯</span>
    [[pointer_arithmetic]]
    <span class="hljs-function">T* <span class="hljs-title">access_register</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span>* mmio_base, <span class="hljs-type">size_t</span> offset)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">reinterpret_cast</span>(mmio_base + offset);  <span class="hljs-comment">// ç¼–è¯‘å™¨éªŒè¯</span>
    }
    
    <span class="hljs-comment">// ç¦æ­¢å€¼åˆ°æŒ‡é’ˆçš„éšå¼è½¬æ¢</span>
    [[<span class="hljs-built_in">deprecated</span>(&amp;#<span class="hljs-number">34</span>;value-to-pointer conversion is unsafe&amp;#<span class="hljs-number">34</span>;)]]
    <span class="hljs-function">T* <span class="hljs-title">unsafe_access</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span>* mmio_base, <span class="hljs-type">size_t</span> offset)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">reinterpret_cast</span>(mmio_base[offset]);  <span class="hljs-comment">// ç¼–è¯‘è­¦å‘Š</span>
    }
};
</code></pre>
<p><strong>å·¥ä¸šç¼–ç æ ‡å‡†</strong>ï¼š</p>
<ol>
<li><strong>è§„åˆ™P.101</strong>ï¼šç¦æ­¢åœ¨<code>reinterpret_cast</code>ä¸­ä½¿ç”¨æ•°ç»„ä¸‹æ ‡æ“ä½œç¬¦çš„ç»“æœ</li>
<li><strong>è§„åˆ™P.202</strong>ï¼šæ‰€æœ‰ç¡¬ä»¶æ¥å£è®¿é—®å¿…é¡»é€šè¿‡ç±»å‹å®‰å…¨çš„åŒ…è£…å™¨</li>
<li><strong>è§„åˆ™P.303</strong>ï¼šå…³é”®ç³»ç»Ÿå¿…é¡»ä½¿ç”¨å¸¦æœ‰è¾¹ç•Œæ£€æŸ¥çš„ä¸“ç”¨åˆ†é…å™¨</li>
<li><strong>è§„åˆ™T.404</strong>ï¼šæŒ‡é’ˆè¿ç®—ä»£ç å¿…é¡»åŒ…å«ç¼–è¯‘æ—¶å’Œè¿è¡Œæ—¶åŒé‡éªŒè¯</li>
</ol>
<h3 data-id="heading-18">6.3 æœªæ¥ç ”ç©¶æ–¹å‘</h3>
<ol>
<li><strong>å½¢å¼åŒ–éªŒè¯</strong>ï¼šå¼€å‘èƒ½å¤Ÿè¯æ˜æŒ‡é’ˆè¿ç®—å®‰å…¨æ€§çš„å½¢å¼åŒ–æ–¹æ³•</li>
<li><strong>ç¡¬ä»¶æ”¯æŒ</strong>ï¼šç ”ç©¶CPUçº§åˆ«çš„æŒ‡é’ˆè¯­ä¹‰æ£€æŸ¥æœºåˆ¶</li>
<li><strong>è¯­è¨€æ‰©å±•</strong>ï¼šè®¾è®¡æ›´å®‰å…¨çš„æŒ‡é’ˆè¿ç®—åŸè¯­ï¼Œå¯èƒ½ä½œä¸ºC++çš„æœªæ¥æ‰©å±•</li>
</ol>
<p>æŒ‡é’ˆè¿ç®—çš„ç±»å‹å®‰å…¨ä¸ä»…æ˜¯ä¸€ä¸ªç¼–ç é£æ ¼é—®é¢˜ï¼Œæ›´æ˜¯ç³»ç»Ÿå¯é æ€§çš„åŸºçŸ³ã€‚é€šè¿‡æ·±åˆ»ç†è§£åœ°å€ä¸å€¼çš„è¯­ä¹‰åŒºåˆ«ï¼Œå¹¶é‡‡ç”¨ç³»ç»Ÿæ€§çš„é˜²æŠ¤æªæ–½ï¼Œå·¥ç¨‹å¸ˆå¯ä»¥æ„å»ºæ—¢é«˜æ€§èƒ½åˆé«˜å¯é çš„åº•å±‚ç³»ç»Ÿï¼Œä¸ºå…³é”®åŸºç¡€è®¾æ–½æä¾›åšå®çš„æŠ€æœ¯åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€é¸¿è’™å¼€å‘æ¡ˆä¾‹ç¯‡ã€‘é¸¿è’™6.0è®¡ç®—å™¨å®ç°è¯¦è§£]]></title>    <link>https://juejin.cn/post/7581858890608623652</link>    <guid>https://juejin.cn/post/7581858890608623652</guid>    <pubDate>2025-12-10T11:45:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581858890608623652" data-draft-id="7581858890608607268" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€é¸¿è’™å¼€å‘æ¡ˆä¾‹ç¯‡ã€‘é¸¿è’™6.0è®¡ç®—å™¨å®ç°è¯¦è§£"/> <meta itemprop="keywords" content="HarmonyOS,ArkTS,ArkUI"/> <meta itemprop="datePublished" content="2025-12-10T11:45:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¨å“¥çˆ±ç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/2242659450109575"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€é¸¿è’™å¼€å‘æ¡ˆä¾‹ç¯‡ã€‘é¸¿è’™6.0è®¡ç®—å™¨å®ç°è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2242659450109575/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¨å“¥çˆ±ç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T11:45:46.000Z" title="Wed Dec 10 2025 11:45:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ V å“¥ã€‚å¬è¯´å°ç™½å…¥é—¨é¸¿è’™å¿…å†™çš„å°åº”ç”¨å°±æ˜¯è®¡ç®—å™¨ï¼Œä¸ä»…å¯ä»¥ç»ƒæ‰‹å°åº”ç”¨ï¼Œè¿˜èƒ½åœ¨åˆšå¼€å§‹å­¦ä¹ çš„æ—¶å€™é”»ç‚¼è‡ªå·±çš„é€»è¾‘èƒ½åŠ›ï¼Œå¯è°“æ˜¯ä¸€ä¸¾ä¸¤å¾—ï¼Œå¯¹ï¼Œå¯¹ï¼Œå¯¹ï¼Œä¸¾èµ·æ¥ï¼Œä½ æ‡‚çš„ã€‚</p>
<p>ä¸‹é¢æ˜¯åŸºäºåŸºç¡€ç»„ä»¶å’Œå®¹å™¨ç»„ä»¶æ¥ç»ƒç»ƒæ‰‹ï¼ŒVå“¥å°†è¯¦ç»†å®ç°ä¸€ä¸ªæ”¯æŒåŠ å‡ä¹˜é™¤æ··åˆè¿ç®—çš„è®¡ç®—å™¨ã€‚</p>
<p>è”ç³»Vå“¥è·å– <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Ftraining%2FclassDetail%2F042cb1cc4d7d44ecbdbd902fd1275dcc%3Ftype%3D1%3Fha_source%3Dhmosclass%26ha_sourceId%3D89000248" target="_blank" title="https://developer.huawei.com/consumer/cn/training/classDetail/042cb1cc4d7d44ecbdbd902fd1275dcc?type=1?ha_source=hmosclass&amp;ha_sourceId=89000248" ref="nofollow noopener noreferrer">é¸¿è’™å­¦ä¹ èµ„æ–™</a></p>
<hr/>
<h3 data-id="heading-0">ä¸€ã€é¡¹ç›®ç»“æ„ä¸æ ¸å¿ƒè®¾è®¡</h3>
<h4 data-id="heading-1">æŠ€æœ¯æ ˆ</h4>
<ul>
<li><strong>APIç‰ˆæœ¬</strong>ï¼šHarmonyOS 6.0.0 Release (API 21)</li>
<li><strong>å¼€å‘å·¥å…·</strong>ï¼šDevEco Studio 6</li>
<li><strong>æ ¸å¿ƒç»„ä»¶</strong>ï¼šTextInputã€Buttonã€ForEachã€Gridã€Stack</li>
</ul>
<h4 data-id="heading-2">ç›®å½•ç»“æ„</h4>
<pre><code class="hljs language-bash" lang="bash">Calculator/
â”œâ”€â”€ entry/
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ main/
â”‚       â”‚   â”œâ”€â”€ ets/
â”‚       â”‚   â”‚   â”œâ”€â”€ pages/
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ Index.ets        <span class="hljs-comment"># ä¸»é¡µé¢</span>
â”‚       â”‚   â”‚   â”œâ”€â”€ utils/
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ Calculator.ts    <span class="hljs-comment"># è®¡ç®—é€»è¾‘</span>
â”‚       â”‚   â”‚   â””â”€â”€ CommonConstants.ts   <span class="hljs-comment"># å¸¸é‡å®šä¹‰</span>
â”‚       â”‚   â””â”€â”€ resources/               <span class="hljs-comment"># èµ„æºæ–‡ä»¶</span>
</code></pre>
<hr/>
<h3 data-id="heading-3">äºŒã€æ ¸å¿ƒä»£ç å®ç°</h3>
<h4 data-id="heading-4">1. å¸¸é‡å®šä¹‰ï¼ˆCommonConstants.tsï¼‰</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CommonConstants</span> {
  <span class="hljs-comment">// è¿ç®—ç¬¦å¸¸é‡</span>
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">ADD</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'+'</span>;
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">SUB</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'-'</span>;
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">MUL</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Ã—'</span>;
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">DIV</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Ã·'</span>;
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">EQUAL</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'='</span>;
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">CLEAR</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'C'</span>;
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">BACKSPACE</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'âŒ«'</span>;
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">DOT</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'.'</span>;
  
  <span class="hljs-comment">// æŒ‰é’®å¸ƒå±€</span>
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">BUTTONS</span>: <span class="hljs-built_in">string</span>[][] = [
    [<span class="hljs-string">'C'</span>, <span class="hljs-string">'âŒ«'</span>, <span class="hljs-string">'Ã·'</span>, <span class="hljs-string">'Ã—'</span>],
    [<span class="hljs-string">'7'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'9'</span>, <span class="hljs-string">'-'</span>],
    [<span class="hljs-string">'4'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'+'</span>],
    [<span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'='</span>],
    [<span class="hljs-string">'0'</span>, <span class="hljs-string">'.'</span>, <span class="hljs-string">'='</span>]
  ];
}
</code></pre>
<h4 data-id="heading-5">2. è®¡ç®—é€»è¾‘æ ¸å¿ƒï¼ˆCalculator.tsï¼‰</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Calculator</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">currentInput</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'0'</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">previousInput</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">operator</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">shouldResetInput</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;

  <span class="hljs-comment">// å¤„ç†æŒ‰é’®ç‚¹å‡»</span>
  <span class="hljs-title function_">handleButtonClick</span>(<span class="hljs-attr">button</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isNumber</span>(button)) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleNumber</span>(button);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isOperator</span>(button)) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleOperator</span>(button);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (button === <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">DOT</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleDot</span>();
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (button === <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">CLEAR</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleClear</span>();
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (button === <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">BACKSPACE</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleBackspace</span>();
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (button === <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">EQUAL</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleEqual</span>();
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentInput</span>;
  }

  <span class="hljs-comment">// æ•°å­—å¤„ç†ï¼ˆè§£å†³ç²¾åº¦é—®é¢˜ï¼‰</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">handleNumber</span>(<span class="hljs-attr">num</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">shouldResetInput</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentInput</span> === <span class="hljs-string">'0'</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentInput</span> = num;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">shouldResetInput</span> = <span class="hljs-literal">false</span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentInput</span> += num;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentInput</span>;
  }

  <span class="hljs-comment">// è¿ç®—ç¬¦å¤„ç†</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">handleOperator</span>(<span class="hljs-attr">op</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">operator</span> &amp;&amp; !<span class="hljs-variable language_">this</span>.<span class="hljs-property">shouldResetInput</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">calculate</span>();
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">previousInput</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentInput</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">operator</span> = op;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">shouldResetInput</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentInput</span>;
  }

  <span class="hljs-comment">// ç­‰äºå·å¤„ç†</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">handleEqual</span>(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">operator</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">previousInput</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">calculate</span>();
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">operator</span> = <span class="hljs-string">''</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">shouldResetInput</span> = <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentInput</span>;
  }

  <span class="hljs-comment">// æ ¸å¿ƒè®¡ç®—é€»è¾‘ï¼ˆè§£å†³æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜ï¼‰</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">calculate</span>(): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">const</span> prev = <span class="hljs-built_in">parseFloat</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">previousInput</span>);
    <span class="hljs-keyword">const</span> current = <span class="hljs-built_in">parseFloat</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentInput</span>);
    
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(prev) || <span class="hljs-built_in">isNaN</span>(current)) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">let</span> <span class="hljs-attr">result</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-keyword">switch</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">operator</span>) {
      <span class="hljs-keyword">case</span> <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">ADD</span>:
        <span class="hljs-comment">// å°æ•°ç²¾åº¦å¤„ç†ï¼šè½¬æ¢ä¸ºæ•´æ•°è®¡ç®—</span>
        result = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">add</span>(prev, current);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">SUB</span>:
        result = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">subtract</span>(prev, current);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">MUL</span>:
        result = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">multiply</span>(prev, current);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">DIV</span>:
        result = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">divide</span>(prev, current);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-attr">default</span>:
        <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-comment">// å¤„ç†å¤§æ•°æ˜¾ç¤ºï¼ˆç§‘å­¦è®¡æ•°æ³•ï¼‰</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentInput</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">formatResult</span>(result);
  }

  <span class="hljs-comment">// ç²¾ç¡®åŠ æ³•ï¼ˆè§£å†³0.1+0.2â‰ 0.3é—®é¢˜ï¼‰</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">add</span>(<span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">const</span> multiplier = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-number">10</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDecimalLength</span>(a), <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDecimalLength</span>(b)));
    <span class="hljs-keyword">return</span> (a * multiplier + b * multiplier) / multiplier;
  }

  <span class="hljs-comment">// ç²¾ç¡®ä¹˜æ³•</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">multiply</span>(<span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">const</span> decimalLength = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDecimalLength</span>(a) + <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDecimalLength</span>(b);
    <span class="hljs-keyword">const</span> multiplier = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-number">10</span>, decimalLength);
    <span class="hljs-keyword">return</span> (a * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-number">10</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDecimalLength</span>(a))) * 
           (b * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-number">10</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDecimalLength</span>(b))) / multiplier;
  }

  <span class="hljs-comment">// è·å–å°æ•°ä½æ•°</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">getDecimalLength</span>(<span class="hljs-attr">num</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">const</span> str = num.<span class="hljs-title function_">toString</span>();
    <span class="hljs-keyword">return</span> str.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'.'</span>) ? str.<span class="hljs-title function_">split</span>(<span class="hljs-string">'.'</span>).<span class="hljs-property">length</span> : <span class="hljs-number">0</span>;
  }

  <span class="hljs-comment">// ç»“æœæ ¼å¼åŒ–ï¼ˆå¤§æ•°è½¬ç§‘å­¦è®¡æ•°æ³•ï¼‰</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">formatResult</span>(<span class="hljs-attr">result</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(result) &gt; <span class="hljs-number">1e15</span> || (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(result) &lt; <span class="hljs-number">1e-6</span> &amp;&amp; result !== <span class="hljs-number">0</span>)) {
      <span class="hljs-keyword">return</span> result.<span class="hljs-title function_">toExponential</span>(<span class="hljs-number">10</span>).<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/(\.\d*?[1-9])0+e/</span>, <span class="hljs-string">'$1e'</span>);
    }
    <span class="hljs-keyword">return</span> result.<span class="hljs-title function_">toString</span>();
  }

  <span class="hljs-comment">// å…¶ä»–è¾…åŠ©æ–¹æ³•</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">isNumber</span>(<span class="hljs-attr">str</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">boolean</span> { <span class="hljs-keyword">return</span> !<span class="hljs-built_in">isNaN</span>(<span class="hljs-title class_">Number</span>(str)); }
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">isOperator</span>(<span class="hljs-attr">str</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">boolean</span> { 
    <span class="hljs-keyword">return</span> [<span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">ADD</span>, <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">SUB</span>, <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">MUL</span>, <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">DIV</span>].<span class="hljs-title function_">includes</span>(str); 
  }
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">handleDot</span>(): <span class="hljs-built_in">string</span> { <span class="hljs-comment">/* å®ç°å°æ•°ç‚¹é€»è¾‘ */</span> }
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">handleClear</span>(): <span class="hljs-built_in">string</span> { <span class="hljs-comment">/* å®ç°æ¸…ç©ºé€»è¾‘ */</span> }
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">handleBackspace</span>(): <span class="hljs-built_in">string</span> { <span class="hljs-comment">/* å®ç°é€€æ ¼é€»è¾‘ */</span> }
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">subtract</span>(<span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> { <span class="hljs-comment">/* ç²¾ç¡®å‡æ³• */</span> }
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">divide</span>(<span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> { <span class="hljs-comment">/* ç²¾ç¡®é™¤æ³• */</span> }
}
</code></pre>
<h4 data-id="heading-6">3. ä¸»é¡µé¢UIå®ç°ï¼ˆIndex.etsï¼‰</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Entry</span>
<span class="hljs-meta">@Component</span>
struct <span class="hljs-title class_">CalculatorPage</span> {
  <span class="hljs-meta">@State</span> <span class="hljs-attr">displayText</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'0'</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">calculator</span>: <span class="hljs-title class_">Calculator</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Calculator</span>()

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">20</span> }) {
      <span class="hljs-comment">// æ˜¾ç¤ºåŒºåŸŸ</span>
      <span class="hljs-title class_">TextInput</span>({ <span class="hljs-attr">text</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">displayText</span> })
        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>)
        .<span class="hljs-title function_">height</span>(<span class="hljs-number">80</span>)
        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">32</span>)
        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">End</span>)
        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)
        .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span> })

      <span class="hljs-comment">// æŒ‰é’®åŒºåŸŸ - ä½¿ç”¨Gridå¸ƒå±€</span>
      <span class="hljs-title class_">Grid</span>() {
        <span class="hljs-title class_">ForEach</span>(<span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">BUTTONS</span>, <span class="hljs-function">(<span class="hljs-params">row: <span class="hljs-built_in">string</span>[], rowIndex: <span class="hljs-built_in">number</span></span>) =&gt;</span> {
          <span class="hljs-title class_">GridItem</span>() {
            <span class="hljs-title class_">Row</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">10</span> }) {
              <span class="hljs-title class_">ForEach</span>(row, <span class="hljs-function">(<span class="hljs-params">button: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
                <span class="hljs-title class_">Button</span>(button)
                  .<span class="hljs-title function_">width</span>(<span class="hljs-number">70</span>)
                  .<span class="hljs-title function_">height</span>(<span class="hljs-number">70</span>)
                  .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">24</span>)
                  .<span class="hljs-title function_">fontColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getButtonColor</span>(button))
                  .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getButtonBgColor</span>(button))
                  .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">10</span>)
                  .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {
                    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onButtonClick</span>(button)
                  })
              })
            }
          }
        })
      }
      .<span class="hljs-title function_">columnsTemplate</span>(<span class="hljs-string">'1fr 1fr 1fr 1fr'</span>)
      .<span class="hljs-title function_">rowsTemplate</span>(<span class="hljs-string">'1fr 1fr 1fr 1fr 1fr'</span>)
      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>)
      .<span class="hljs-title function_">height</span>(<span class="hljs-number">400</span>)
    }
    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)
    .<span class="hljs-title function_">padding</span>(<span class="hljs-number">20</span>)
    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#F5F5F5'</span>)
  }

  <span class="hljs-comment">// æŒ‰é’®ç‚¹å‡»å¤„ç†</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">onButtonClick</span>(<span class="hljs-attr">button</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">displayText</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">calculator</span>.<span class="hljs-title function_">handleButtonClick</span>(button)
  }

  <span class="hljs-comment">// æŒ‰é’®é¢œè‰²é…ç½®</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">getButtonColor</span>(<span class="hljs-attr">button</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Color</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isOperator</span>(button) || button === <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">EQUAL</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>
  }

  <span class="hljs-keyword">private</span> <span class="hljs-title function_">getButtonBgColor</span>(<span class="hljs-attr">button</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Color</span> {
    <span class="hljs-keyword">if</span> (button === <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">CLEAR</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isOperator</span>(button) || button === <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">EQUAL</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span>
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>
  }

  <span class="hljs-keyword">private</span> <span class="hljs-title function_">isOperator</span>(<span class="hljs-attr">button</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">return</span> [<span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">ADD</span>, <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">SUB</span>, <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">MUL</span>, <span class="hljs-title class_">CommonConstants</span>.<span class="hljs-property">DIV</span>].<span class="hljs-title function_">includes</span>(button)
  }
}
</code></pre>
<hr/>
<h3 data-id="heading-7">ä¸‰ã€å…³é”®æŠ€æœ¯ç‰¹æ€§</h3>
<h4 data-id="heading-8">1. ç²¾åº¦å¤„ç†æœºåˆ¶</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç¤ºä¾‹ï¼š0.2 + 2.22 çš„æ­£ç¡®è®¡ç®—</span>
<span class="hljs-keyword">private</span> <span class="hljs-title function_">add</span>(<span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {
  <span class="hljs-keyword">const</span> decimalA = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDecimalLength</span>(a)  <span class="hljs-comment">// 1ä½å°æ•°</span>
  <span class="hljs-keyword">const</span> decimalB = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDecimalLength</span>(b)  <span class="hljs-comment">// 2ä½å°æ•°</span>
  <span class="hljs-keyword">const</span> multiplier = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-number">10</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(decimalA, decimalB))  <span class="hljs-comment">// 100</span>
  
  <span class="hljs-keyword">return</span> (a * multiplier + b * multiplier) / multiplier
  <span class="hljs-comment">// è®¡ç®—è¿‡ç¨‹ï¼š(0.2*100 + 2.22*100)/100 = (20 + 222)/100 = 242/100 = 2.42</span>
}
</code></pre>
<h4 data-id="heading-9">2. å¤§æ•°æ˜¾ç¤ºä¼˜åŒ–</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// 9007199254740992 + 1 æ˜¾ç¤ºä¸ºç§‘å­¦è®¡æ•°æ³•</span>
<span class="hljs-keyword">private</span> <span class="hljs-title function_">formatResult</span>(<span class="hljs-attr">result</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-keyword">if</span> (result &gt; <span class="hljs-number">1e15</span>) {
    <span class="hljs-keyword">return</span> result.<span class="hljs-title function_">toExponential</span>(<span class="hljs-number">10</span>)  <span class="hljs-comment">// &amp;#34;9.007199254740993e15&amp;#34;</span>
  }
  <span class="hljs-keyword">return</span> result.<span class="hljs-title function_">toString</span>()
}
</code></pre>
<h4 data-id="heading-10">3. è¿ç»­è¿ç®—æ”¯æŒ</h4>
<ul>
<li>æ”¯æŒè¡¨è¾¾å¼ï¼š<code>3 + 5 Ã— 2 - 1 = 12</code></li>
<li>çŠ¶æ€ç®¡ç†ï¼šé€šè¿‡<code>previousInput</code>ã€<code>currentInput</code>ã€<code>operator</code>è·Ÿè¸ªè¿ç®—çŠ¶æ€</li>
</ul>
<hr/>
<h3 data-id="heading-11">å››ã€è¿è¡Œæ•ˆæœä¸æµ‹è¯•ç”¨ä¾‹</h3>
<h4 data-id="heading-12">æµ‹è¯•åœºæ™¯</h4>
<ol>
<li><strong>åŸºç¡€è¿ç®—</strong>ï¼š<code>5 + 3 = 8</code> âœ“</li>
<li><strong>å°æ•°ç²¾åº¦</strong>ï¼š<code>0.1 + 0.2 = 0.3</code> âœ“</li>
<li><strong>æ··åˆè¿ç®—</strong>ï¼š<code>3 + 5 Ã— 2 = 13</code> âœ“</li>
<li><strong>å¤§æ•°å¤„ç†</strong>ï¼š<code>999999999999999 + 1 = 1e+15</code> âœ“</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼š<code>5 Ã· 0 = Infinity</code> âœ“</li>
</ol>
<hr/>
<h3 data-id="heading-13">äº”ã€æ‰©å±•åŠŸèƒ½å»ºè®®</h3>
<ol>
<li><strong>å†å²è®°å½•</strong>ï¼šæ·»åŠ Stackç»„ä»¶ä¿å­˜è®¡ç®—å†å²</li>
<li><strong>ä¸»é¢˜åˆ‡æ¢</strong>ï¼šä½¿ç”¨@StorageLinkå®ç°æ·±è‰²æ¨¡å¼</li>
<li><strong>è¯­éŸ³æ’­æŠ¥</strong>ï¼šé›†æˆTTSåŠŸèƒ½æœ—è¯»è®¡ç®—ç»“æœ</li>
<li><strong>å•ä½è½¬æ¢</strong>ï¼šæ‰©å±•ç§‘å­¦è®¡ç®—å™¨åŠŸèƒ½</li>
</ol>
<p>è¿™ä¸ªå®ç°å®Œæ•´å±•ç¤ºäº†é¸¿è’™6.0ä¸‹åŸºäºåŸºç¡€ç»„ä»¶çš„è®¡ç®—å™¨å¼€å‘ï¼Œé‡ç‚¹è§£å†³äº†æµ®ç‚¹æ•°ç²¾åº¦å’Œå¤§æ•°æ˜¾ç¤ºç­‰æ ¸å¿ƒé—®é¢˜ã€‚å…„å¼Ÿä»¬ï¼Œå¯ä»¥å»è¯•è¯•å“¦ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/371c356c5ce840e885ede120f750f6d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aiB5ZOl54ix57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765971946&amp;x-signature=7ow6SslISoa2pK%2BmRLOUYmr6cvo%3D" alt="å·äºŒ_å‰¯æœ¬2.jpg" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Expo (React Native) æœ€ä½³å®è·µï¼šTanStack Query æ·±åº¦é›†æˆæŒ‡å—]]></title>    <link>https://juejin.cn/post/7581876069609603115</link>    <guid>https://juejin.cn/post/7581876069609603115</guid>    <pubDate>2025-12-10T11:53:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581876069609603115" data-draft-id="7582047623738687542" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Expo (React Native) æœ€ä½³å®è·µï¼šTanStack Query æ·±åº¦é›†æˆæŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,React Native"/> <meta itemprop="datePublished" content="2025-12-10T11:53:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çš®è›‹å°ç²¾çµ"/> <meta itemprop="url" content="https://juejin.cn/user/219558056559278"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Expo (React Native) æœ€ä½³å®è·µï¼šTanStack Query æ·±åº¦é›†æˆæŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/219558056559278/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çš®è›‹å°ç²¾çµ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T11:53:19.000Z" title="Wed Dec 10 2025 11:53:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Expo å¼€å‘ä¸­ï¼Œå¼•å…¥ <strong>TanStack Query (React Query)</strong> æ˜¯ç§»åŠ¨ç«¯å¼€å‘çš„<strong>å¼ºçƒˆæ¨èæ–¹æ¡ˆ</strong>ã€‚</p>
<p>å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªè¯·æ±‚åº“ï¼Œè€Œæ˜¯ä¸€å¥—å®Œæ•´çš„<strong>å¼‚æ­¥çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ</strong>ï¼Œä¸“é—¨è§£å†³äº† React Native ä¸­æœ€æ£˜æ‰‹çš„ç½‘ç»œä¸ç¼“å­˜é—®é¢˜ã€‚</p>
<h2 data-id="heading-0">1. ä¸ºä»€ä¹ˆå®ƒæ˜¯å¿…é€‰é¡¹ï¼Ÿ</h2>
<p>åœ¨ç§»åŠ¨ç«¯åœºæ™¯ä¸‹ï¼ŒTanStack Query è§£å†³äº†ä¼ ç»Ÿ <code>useEffect</code> + <code>useState</code> éš¾ä»¥å¤„ç†çš„å››å¤§ç—›ç‚¹ï¼š</p>
<ul>
<li><strong>æ™ºèƒ½ç¼“å­˜ä¸ç¦»çº¿æ”¯æŒ</strong>ï¼šåœ¨ç½‘ç»œä¸ç¨³å®šæˆ–ç¦»çº¿æ—¶å±•ç¤ºç¼“å­˜æ•°æ®ï¼Œé¿å…ç™½å±ï¼›ç½‘ç»œæ¢å¤åè‡ªåŠ¨åœ¨åå°é™é»˜æ›´æ–°ã€‚</li>
<li><strong>åº”ç”¨æ¿€æ´»è‡ªåŠ¨åˆ·æ–° (Focus Refetch)</strong> ï¼šå½“ç”¨æˆ·ä»åå°ï¼ˆå¦‚å›å¤å¾®ä¿¡åï¼‰åˆ‡å› App æ—¶ï¼Œè‡ªåŠ¨æ£€æµ‹å¹¶åˆ·æ–°è¿‡æœŸæ•°æ®ï¼Œç¡®ä¿ç”¨æˆ·çœ‹åˆ°çš„ä¿¡æ¯æ°¸è¿œæ˜¯æœ€æ–°çš„ã€‚</li>
<li><strong>çŠ¶æ€ç®¡ç†è‡ªåŠ¨åŒ–</strong>ï¼šå½»åº•å‘Šåˆ«æ‰‹å†™ <code>isLoading</code>ã€<code>isError</code>ã€<code>data</code> ç­‰ç¹ççš„æ ·æ¿ä»£ç ã€‚</li>
<li><strong>åˆ—è¡¨äº¤äº’é›†æˆ</strong>ï¼šå†…ç½®äº†å¯¹ <strong>ä¸‹æ‹‰åˆ·æ–°</strong>ã€<strong>æ— é™æ»šåŠ¨ (Infinite Scroll)</strong> çš„å®Œç¾æ”¯æŒï¼Œä¸ <code>FlatList</code> é…åˆå¤©è¡£æ— ç¼ã€‚</li>
</ul>
<h2 data-id="heading-1">2. æ¨èçš„æŠ€æœ¯æ ˆæ¶æ„</h2>
<p>åœ¨ React Native åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬æ¨èä»¥ä¸‹çš„â€œé»„é‡‘ä¸‰è§’â€ç»„åˆï¼š</p>
<ul>
<li><strong>çŠ¶æ€ç®¡ç† (Server State)</strong> ï¼š<strong>TanStack Query</strong> (è´Ÿè´£è¯·æ±‚å»é‡ã€ç¼“å­˜ã€è¿‡æœŸç­–ç•¥)</li>
<li><strong>ç½‘ç»œè¯·æ±‚ (Fetcher)</strong> ï¼š<strong>Axios</strong> æˆ– <strong>Fetch</strong> (è´Ÿè´£å‘é€ HTTP è¯·æ±‚)</li>
<li><strong>å®‰å…¨å­˜å‚¨ (Auth)</strong> ï¼š<strong>Expo Secure Store</strong> (è´Ÿè´£å­˜å‚¨ Token)</li>
</ul>
<h2 data-id="heading-2">3. ç”Ÿäº§ç¯å¢ƒé›†æˆæŒ‡å— (å…³é”®)</h2>
<p>åœ¨ React Native ä¸­ä½¿ç”¨ TanStack Queryï¼Œå¿…é¡»æ‰‹åŠ¨é…ç½® <strong>App çŠ¶æ€ç›‘å¬</strong> å’Œ <strong>ç½‘ç»œçŠ¶æ€ç›‘å¬</strong>ï¼Œå¦åˆ™â€œåˆ‡åå°è‡ªåŠ¨åˆ·æ–°â€ç­‰æ ¸å¿ƒåŠŸèƒ½åœ¨çœŸæœºä¸Šå°†å¤±æ•ˆã€‚</p>
<h3 data-id="heading-3">ç¬¬ä¸€æ­¥ï¼šå®‰è£…ä¾èµ–</h3>
<pre><code class="hljs language-Bash" lang="Bash"><span class="hljs-comment"># æ ¸å¿ƒåº“</span>
npm install @tanstack/react-query

<span class="hljs-comment"># ç”¨äºç›‘å¬ç½‘ç»œçŠ¶æ€ï¼ˆå¿…é¡»ï¼‰</span>
npx expo install @react-native-community/netinfo
</code></pre>
<h3 data-id="heading-4">ç¬¬äºŒæ­¥ï¼šé…ç½®å…¨å±€ Provider (<code>app/_layout.tsx</code>)</h3>
<p>è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚æˆ‘ä»¬éœ€è¦å‘Šè¯‰ TanStack Query ä½•æ—¶ App å¤„äºâ€œå‰å°â€ï¼Œä»¥åŠä½•æ—¶â€œè”ç½‘â€ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">import</span> { useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppStateStatus</span>, <span class="hljs-title class_">Platform</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Slot</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'expo-router'</span>;
<span class="hljs-keyword">import</span> { 
  <span class="hljs-title class_">QueryClient</span>, 
  <span class="hljs-title class_">QueryClientProvider</span>, 
  focusManager, 
  onlineManager 
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@tanstack/react-query'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">NetInfo</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@react-native-community/netinfo'</span>;
<span class="hljs-keyword">import</span> { useAppState } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks/useAppState'</span>; <span class="hljs-comment">// å‡è®¾ä½ æœ‰ä¸€ä¸ª AppState Hookï¼Œæˆ–è€…ç›´æ¥å†™åœ¨ä¸‹é¢</span>

<span class="hljs-comment">// 1. é…ç½®ç½‘ç»œçŠ¶æ€ç›‘å¬ (è§£å†³æ–­ç½‘é‡è¿è‡ªåŠ¨åˆ·æ–°)</span>
onlineManager.<span class="hljs-title function_">setEventListener</span>(<span class="hljs-function">(<span class="hljs-params">setOnline</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">NetInfo</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> {
    <span class="hljs-title function_">setOnline</span>(!!state.<span class="hljs-property">isConnected</span>);
  });
});

<span class="hljs-comment">// 2. é…ç½® App ç„¦ç‚¹ç›‘å¬ (è§£å†³åˆ‡å›å‰å°è‡ªåŠ¨åˆ·æ–°)</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">onAppStateChange</span>(<span class="hljs-params">status: AppStateStatus</span>) {
  <span class="hljs-comment">// Web ç«¯è‡ªå¸¦ç›‘å¬ï¼ŒRN ç«¯éœ€è¦æ‰‹åŠ¨è§¦å‘</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Platform</span>.<span class="hljs-property">OS</span> !== <span class="hljs-string">'web'</span>) {
    focusManager.<span class="hljs-title function_">setFocused</span>(status === <span class="hljs-string">'active'</span>);
  }
}

<span class="hljs-comment">// 3. åˆå§‹åŒ– QueryClient (é…ç½®å…¨å±€é»˜è®¤ç­–ç•¥)</span>
<span class="hljs-keyword">const</span> queryClient = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryClient</span>({
  <span class="hljs-attr">defaultOptions</span>: {
    <span class="hljs-attr">queries</span>: {
      <span class="hljs-attr">retry</span>: <span class="hljs-number">2</span>, <span class="hljs-comment">// è¯·æ±‚å¤±è´¥è‡ªåŠ¨é‡è¯• 2 æ¬¡</span>
      <span class="hljs-attr">staleTime</span>: <span class="hljs-number">1000</span> * <span class="hljs-number">60</span>, <span class="hljs-comment">// æ•°æ® 1 åˆ†é’Ÿå†…è®¤ä¸ºæ˜¯â€œæ–°é²œâ€çš„ï¼Œä¸è§¦å‘è‡ªåŠ¨è¯·æ±‚</span>
      <span class="hljs-attr">gcTime</span>: <span class="hljs-number">1000</span> * <span class="hljs-number">60</span> * <span class="hljs-number">5</span>, <span class="hljs-comment">// ç¼“å­˜åƒåœ¾å›æ”¶æ—¶é—´ (5åˆ†é’Ÿ)</span>
    },
  },
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RootLayout</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ç›‘å¬ App çŠ¶æ€å˜åŒ–</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> subscription = <span class="hljs-title class_">AppState</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'change'</span>, onAppStateChange);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> subscription.<span class="hljs-title function_">remove</span>();
  }, []);

  <span class="hljs-keyword">return</span> (
    
       {<span class="hljs-comment">/* ä½ çš„é¡µé¢å…¥å£ */</span>}
    
  );
}
</code></pre>
<h3 data-id="heading-5">ç¬¬ä¸‰æ­¥ï¼šåœ¨é¡µé¢ä¸­ä½¿ç”¨</h3>
<p>é…åˆ <code>RefreshControl</code> å®ç°ä¸‹æ‹‰åˆ·æ–°å˜å¾—éå¸¸ç®€å•ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">import</span> { useQuery } <span class="hljs-keyword">from</span> <span class="hljs-string">'@tanstack/react-query'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">View</span>, <span class="hljs-title class_">Text</span>, <span class="hljs-title class_">FlatList</span>, <span class="hljs-title class_">RefreshControl</span>, <span class="hljs-title class_">ActivityIndicator</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native'</span>;
<span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;

<span class="hljs-comment">// å®šä¹‰è¯·æ±‚å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchTodos</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> { data } = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">'https://api.example.com/todos'</span>);
  <span class="hljs-keyword">return</span> data;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">TodoListScreen</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { data, isLoading, isError, refetch } = <span class="hljs-title function_">useQuery</span>({
    <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'todos'</span>],
    <span class="hljs-attr">queryFn</span>: fetchTodos,
  });

  <span class="hljs-keyword">if</span> (isLoading) <span class="hljs-keyword">return</span> ;
  <span class="hljs-keyword">if</span> (isError) <span class="hljs-keyword">return</span> åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•;

  <span class="hljs-keyword">return</span> (
     item.<span class="hljs-property">id</span>.<span class="hljs-title function_">toString</span>()}
      renderItem={<span class="hljs-function">(<span class="hljs-params">{ item }</span>) =&gt;</span> {item.<span class="hljs-property">title</span>}}
      <span class="hljs-comment">// é›†æˆä¸‹æ‹‰åˆ·æ–°ï¼Œåªéœ€ä¸€è¡Œä»£ç </span>
      refreshControl={
        
      }
    /&gt;
  );
}
</code></pre>
<h2 data-id="heading-6">4. æ€»ç»“</h2>
<p>å¼•å…¥ TanStack Query æ˜¯ Expo åº”ç”¨è¿ˆå‘<strong>é«˜æ€§èƒ½</strong>å’Œ<strong>é«˜å¯ç”¨æ€§</strong>çš„å…³é”®ä¸€æ­¥ã€‚</p>
<ul>
<li><strong>å¯¹äºå¼€å‘è€…</strong>ï¼šå®ƒæ¶ˆé™¤äº† 90% çš„å†—ä½™ä»£ç å’Œæ‰‹åŠ¨çŠ¶æ€ç®¡ç†ã€‚</li>
<li><strong>å¯¹äºç”¨æˆ·</strong>ï¼šå®ƒæä¾›äº†ä¸æ»‘çš„â€œåˆ‡åå°åˆ·æ–°â€å’Œâ€œæ–­ç½‘é‡è¿â€ä½“éªŒã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[@contextlib.contextmanager çš„ä½œç”¨æ˜¯ä»€ä¹ˆ]]></title>    <link>https://juejin.cn/post/7581470169840058406</link>    <guid>https://juejin.cn/post/7581470169840058406</guid>    <pubDate>2025-12-09T03:34:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581470169840058406" data-draft-id="7581448482544943130" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="@contextlib.contextmanager çš„ä½œç”¨æ˜¯ä»€ä¹ˆ"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2025-12-09T03:34:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Xier"/> <meta itemprop="url" content="https://juejin.cn/user/1152710585356295"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            @contextlib.contextmanager çš„ä½œç”¨æ˜¯ä»€ä¹ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1152710585356295/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Xier
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T03:34:37.000Z" title="Tue Dec 09 2025 03:34:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong><code>with</code> è¯­å¥æ ¹æœ¬å¬ä¸æ‡‚å‡½æ•°çš„è¯­è¨€ï¼Œå®ƒåªå¬å¾—æ‡‚â€œç±»â€çš„è¯­è¨€ï¼ˆå³ <code>__enter__</code> å’Œ <code>__exit__</code>ï¼‰ã€‚</strong></p>
<p><code>@contextlib.contextmanager</code> çš„ä½œç”¨å°±æ˜¯<strong>æŠŠä½ çš„ç”Ÿæˆå™¨å‡½æ•°â€œåŒ…è£…â€æˆä¸€ä¸ª <code>with</code> è¯­å¥èƒ½å¬æ‡‚çš„ç±»</strong>ã€‚</p>
<p>ä¸‹é¢æˆ‘ä¸ºä½ æ‹†è§£å®ƒçš„æ ¸å¿ƒæœºåˆ¶ï¼š</p>
<h3 data-id="heading-0">1. ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥ç”¨ï¼Ÿ</h3>
<p>å¦‚æœä½ ç›´æ¥æŠŠä¸€ä¸ªåŒ…å« <code>try...finally</code> å’Œ <code>yield</code> çš„æ™®é€šç”Ÿæˆå™¨å‡½æ•°æ”¾åˆ° <code>with</code> åé¢ï¼Œç¨‹åºä¼šç›´æ¥<strong>æŠ¥é”™</strong>ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">my_gen</span>():
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">yield</span> <span class="hljs-number">1</span>
    <span class="hljs-keyword">finally</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ¸…ç†å·¥ä½œ"</span>)

<span class="hljs-comment"># âŒ è¿™æ ·å†™ä¼šæŠ¥é”™ï¼</span>
<span class="hljs-comment"># AttributeError: __enter__</span>
<span class="hljs-comment"># with my_gen() as x:</span>
<span class="hljs-comment">#     pass</span>
</code></pre>
<p><strong>åŸå› ï¼š</strong> <code>with</code> è¯­å¥æœŸæœ›åé¢çš„å¯¹è±¡å¿…é¡»æœ‰ <code>__enter__</code> å’Œ <code>__exit__</code> æ–¹æ³•ã€‚æ™®é€šçš„ç”Ÿæˆå™¨å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡ï¼Œå®ƒæ²¡æœ‰è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚</p>
<h3 data-id="heading-1">2. <code>@contextlib.contextmanager</code> åˆ°åº•åšäº†ä»€ä¹ˆï¼Ÿ</h3>
<p>å½“ä½ ç»™å‡½æ•°åŠ ä¸Šè¿™ä¸ªè£…é¥°å™¨æ—¶ï¼ŒPython åœ¨èƒŒååšäº†ä¸€ä¸ªâ€œå·å¤©æ¢æ—¥â€çš„æ“ä½œï¼š</p>
<ol>
<li>å®ƒæ•è·äº†ä½ çš„ç”Ÿæˆå™¨å‡½æ•°ã€‚</li>
<li>å®ƒè¿”å›äº†ä¸€ä¸ª<strong>æ–°çš„å¯¹è±¡</strong>ï¼ˆHelper Classï¼‰ï¼Œè¿™ä¸ªå¯¹è±¡å†…éƒ¨å®ç°äº† <code>__enter__</code> å’Œ <code>__exit__</code>ã€‚</li>
<li>å®ƒåœ¨ <code>__exit__</code> æ–¹æ³•é‡Œï¼Œå¸®ä½ å»<strong>æ‰‹åŠ¨è§¦å‘</strong>äº†ç”Ÿæˆå™¨çš„åç»­ä»£ç ï¼ˆä¹Ÿå°±æ˜¯ä½ çš„ <code>finally</code> éƒ¨åˆ†ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-2">3. æ‰§è¡Œæµç¨‹å›¾è§£ï¼ˆæ ¸å¿ƒåŸç†ï¼‰</h3>
<p>ä¸ºäº†è®©ä½ æ˜ç™½ <code>finally</code> æ˜¯æ€ä¹ˆè¢«è§¦å‘çš„ï¼Œè¯·çœ‹è¿™ä¸ªæµç¨‹ï¼š</p>
<ol>
<li>
<p><strong><code>with</code> å¼€å§‹</strong> -&gt; è°ƒç”¨è£…é¥°å™¨ç”Ÿæˆçš„å¯¹è±¡çš„ <code>__enter__</code>ã€‚</p>
</li>
<li>
<p><strong><code>__enter__</code> å†…éƒ¨</strong> -&gt; è°ƒç”¨ <code>next(your_generator)</code>ã€‚</p>
<ul>
<li>ç”Ÿæˆå™¨å¼€å§‹è¿è¡Œ -&gt; é‡åˆ° <code>yield</code> æš‚åœã€‚</li>
<li><code>__enter__</code> æ‹¿åˆ° <code>yield</code> å‡ºæ¥çš„å€¼ï¼Œå¹¶è¿”å›ç»™ <code>as</code> åçš„å˜é‡ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç”¨æˆ·ä»£ç å— (<code>with</code> å†…éƒ¨)</strong> -&gt; æ‰§è¡Œä½ çš„ä¸šåŠ¡é€»è¾‘ã€‚</p>
</li>
<li>
<p><strong><code>with</code> ç»“æŸ</strong> -&gt; è‡ªåŠ¨è°ƒç”¨è£…é¥°å™¨ç”Ÿæˆçš„å¯¹è±¡çš„ <code>__exit__</code>ã€‚</p>
</li>
<li>
<p><strong><code>__exit__</code> å†…éƒ¨</strong> -&gt; <strong>å…³é”®ç‚¹æ¥äº†ï¼</strong></p>
<ul>
<li>å®ƒä¼šå†æ¬¡è°ƒç”¨ <code>next(your_generator)</code> (æˆ–è€… <code>throw</code> å¦‚æœæœ‰å¼‚å¸¸)ã€‚</li>
<li><strong>è¿™å¯¼è‡´ç”Ÿæˆå™¨ä» <code>yield</code> åé¢ç»§ç»­è¿è¡Œã€‚</strong></li>
<li>å› æ­¤ï¼Œä½ çš„ <code>finally</code> ä»£ç å—æ‰å¾—ä»¥æ‰§è¡Œã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-3">4. è‡ªå·±æ¨¡æ‹Ÿä¸€ä¸ª <code>contextmanager</code></h3>
<p>ä¸ºäº†è¯æ˜è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªç®€åŒ–ç‰ˆçš„ç±»ï¼Œæ¥å®ç°å’Œ <code>@contextlib.contextmanager</code> ä¸€æ ·çš„åŠŸèƒ½ã€‚çœ‹å®Œè¿™ä¸ªä½ å°±å½»åº•æ‡‚äº†ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyContextManagerWrapper</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, generator_func, *args, **kwargs</span>):
        <span class="hljs-comment"># 1. åˆå§‹åŒ–æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡</span>
        self.gen = generator_func(*args, **kwargs)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__enter__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-comment"># 2. è¿›å…¥ with æ—¶ï¼Œè¿è¡Œç”Ÿæˆå™¨ç›´åˆ°é‡åˆ° yield</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">next</span>(self.gen)
        <span class="hljs-keyword">except</span> StopIteration:
            <span class="hljs-keyword">raise</span> RuntimeError(<span class="hljs-string">"ç”Ÿæˆå™¨æ²¡æœ‰ yield ä»»ä½•å€¼ï¼"</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__exit__</span>(<span class="hljs-params">self, exc_type, exc_value, traceback</span>):
        <span class="hljs-comment"># 3. é€€å‡º with æ—¶ï¼Œæ ¸å¿ƒé€»è¾‘åœ¨è¿™é‡Œï¼</span>
        <span class="hljs-keyword">if</span> exc_type <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
            <span class="hljs-keyword">try</span>:
                <span class="hljs-comment"># å¦‚æœæ²¡æœ‰å¼‚å¸¸ï¼Œè®©ç”Ÿæˆå™¨ç»§ç»­è¿è¡Œï¼ˆæ‰§è¡Œ yield åé¢çš„ä»£ç ï¼Œå³ finallyï¼‰</span>
                <span class="hljs-built_in">next</span>(self.gen)
            <span class="hljs-keyword">except</span> StopIteration:
                <span class="hljs-comment"># ç”Ÿæˆå™¨æ­£å¸¸ç»“æŸæ˜¯é¢„æœŸçš„</span>
                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">try</span>:
                <span class="hljs-comment"># å¦‚æœæœ‰å¼‚å¸¸ï¼ŒæŠŠå¼‚å¸¸æ‰”å›ç»™ç”Ÿæˆå™¨</span>
                self.gen.throw(exc_type, exc_value, traceback)
            <span class="hljs-keyword">except</span> (StopIteration, exc_type):
                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
            <span class="hljs-keyword">except</span> Exception:
                <span class="hljs-comment"># å¤„ç†ç”Ÿæˆå™¨å†…éƒ¨çš„æ–°å¼‚å¸¸</span>
                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>

<span class="hljs-comment"># --- æµ‹è¯• ---</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">simple_func</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"1. setup"</span>)
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">yield</span> <span class="hljs-string">"èµ„æº"</span>
    <span class="hljs-keyword">finally</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"3. teardown (finally æ‰§è¡Œäº†)"</span>)

<span class="hljs-comment"># ä½¿ç”¨æˆ‘ä»¬è¦åŒ…è£…çš„ç±»</span>
<span class="hljs-keyword">with</span> MyContextManagerWrapper(simple_func) <span class="hljs-keyword">as</span> res:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"2. inside with: <span class="hljs-subst">{res}</span>"</span>)
</code></pre>
<p><strong>è¾“å‡ºï¼š</strong></p>
<p>Plaintext</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> setup
<span class="hljs-bullet">2.</span> inside with: èµ„æº
<span class="hljs-bullet">3.</span> teardown (finally æ‰§è¡Œäº†)
</code></pre>
<h3 data-id="heading-4">æ€»ç»“</h3>
<p><code>@contextlib.contextmanager</code> <strong>ä¸æ˜¯ä»…ä»…ä¸ºäº†æ‰§è¡Œ <code>finally</code></strong>ï¼Œå®ƒçš„ä½œç”¨æ˜¯ï¼š</p>
<ol>
<li><strong>æ¡¥æ¥ (Bridge)ï¼š</strong> æŠŠâ€œç”Ÿæˆå™¨â€è½¬æ¢æˆç¬¦åˆâ€œä¸Šä¸‹æ–‡ç®¡ç†å™¨åè®®â€çš„å¯¹è±¡ã€‚</li>
<li><strong>é©±åŠ¨ (Driver)ï¼š</strong> å®ƒè´Ÿè´£åœ¨ <code>__enter__</code> æ—¶å¯åŠ¨ç”Ÿæˆå™¨ï¼Œåœ¨ <code>__exit__</code> æ—¶<strong>æ¢å¤</strong>ç”Ÿæˆå™¨çš„æ‰§è¡Œã€‚</li>
</ol>
<p>æ­£æ˜¯å› ä¸ºå®ƒåœ¨ <code>__exit__</code> é‡Œæ‰‹åŠ¨å¸®ä½ â€œè¸¹â€äº†ç”Ÿæˆå™¨ä¸€è„šï¼ˆè°ƒç”¨äº† <code>next()</code>ï¼‰ï¼Œç”Ÿæˆå™¨æ‰å¾—ä»¥ä» <code>yield</code> é†’æ¥å¹¶å¾€ä¸‹èµ°ï¼Œä»è€Œæ‰§è¡Œåˆ°äº†ä½ çš„ <code>finally</code> ä»£ç å—ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ–°é¡¹ç›®ä¸ºä»€ä¹ˆæ¨èWebFluxï¼Œè€ŒéSpringMVC?]]></title>    <link>https://juejin.cn/post/7581381365494366262</link>    <guid>https://juejin.cn/post/7581381365494366262</guid>    <pubDate>2025-12-09T03:41:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7581381365494366262" data-draft-id="7581324707481305129" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ–°é¡¹ç›®ä¸ºä»€ä¹ˆæ¨èWebFluxï¼Œè€ŒéSpringMVC?"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-09T03:41:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹ä¸‰è¯´æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/465848661970824"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ–°é¡¹ç›®ä¸ºä»€ä¹ˆæ¨èWebFluxï¼Œè€ŒéSpringMVC?
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/465848661970824/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹ä¸‰è¯´æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-09T03:41:39.000Z" title="Tue Dec 09 2025 03:41:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä»æ—©æœŸçš„ Struts åˆ°ç»Ÿæ²»å¤šå¹´çš„ Spring MVCï¼Œæˆ‘è§è¯äº†æ•´ä¸ª Java Web å¼€å‘æ¡†æ¶çš„æ¼”è¿›ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘æƒ³å’Œå¤§å®¶æ·±å…¥èŠèŠ Spring 5 å¸¦æ¥çš„è¿™ä¸ªâ€œæ–°æˆå‘˜â€â€”â€” <strong>WebFlux</strong>ã€‚</p>
<p>æœ‰äº›å°ä¼™ä¼´åœ¨å·¥ä½œä¸­å¯èƒ½å¬è¯´è¿‡å®ƒï¼ŒçŸ¥é“å®ƒâ€œæ€§èƒ½é«˜â€ã€â€œå¼‚æ­¥éé˜»å¡â€ï¼Œä½†çœŸè¦ä¸Šæ‰‹ï¼Œå¿ƒé‡Œå´ç›´æ‰“é¼“ï¼šè¿™å’Œ Spring MVC åˆ°åº•æœ‰å•¥ä¸åŒï¼Ÿæˆ‘çš„é¡¹ç›®çœŸçš„éœ€è¦å®ƒå—ï¼Ÿ</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±ä»åº•å±‚åŸç†åˆ°å®æˆ˜ä»£ç ï¼Œå½»åº•æŠŠ WebFlux è®²æ˜ç™½ã€‚</p>
<p><a href="https://link.juejin.cn/?target=http%3A%2F%2Fsusan.net.cn%2Fproject" title="https://link.juejin.cn/?target=http%3A%2F%2Fsusan.net.cn%2Fproject" target="_blank">æœ€è¿‘å‡†å¤‡é¢è¯•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹è¿™ä¸ªå®è—ç½‘ç«™ï¼ˆJavaçªå‡»é˜Ÿï¼‰ï¼šwww.susan.net.cnï¼Œé‡Œé¢ï¼šé¢è¯•å…«è‚¡æ–‡ã€åœºæ™¯è®¾è®¡é¢˜ã€Springæºç è§£è¯»ã€8ä¸ªé¡¹ç›®å®æˆ˜ã€å·¥ä½œå†…æ¨ä»€ä¹ˆéƒ½æœ‰</a>ã€‚</p>
<h2 data-id="heading-1">01 ä¸ºä»€ä¹ˆæ˜¯WebFluxï¼Ÿ</h2>
<p>è¦ç†è§£ WebFluxï¼Œå¿…é¡»å…ˆçœ‹æ¸…æ¥šå®ƒè¦è§£å†³çš„é—®é¢˜ã€‚æˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„ Spring MVCï¼Œå…¶æ ¸å¿ƒæ˜¯å»ºç«‹åœ¨ Servlet API ä¹‹ä¸Šçš„<strong>åŒæ­¥é˜»å¡æ¨¡å‹</strong>ã€‚</p>
<p>æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼šä½ çš„æ§åˆ¶å™¨é‡Œæœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œéœ€è¦è°ƒç”¨ä¸€ä¸ªå¤–éƒ¨æ¥å£è·å–æ•°æ®ï¼Œè¿™ä¸ªæ¥å£å“åº”å¾ˆæ…¢ï¼Œå¯èƒ½éœ€è¦ 2 ç§’ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼ ç»Ÿçš„Spring MVCæ§åˆ¶å™¨</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TraditionalController</span> {
    <span class="hljs-meta">@GetMapping("/slow")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">slowApi</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ¨¡æ‹Ÿä¸€ä¸ªè€—æ—¶2ç§’çš„è¿œç¨‹è°ƒç”¨</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> someSlowRemoteService.call(); <span class="hljs-comment">// çº¿ç¨‹åœ¨è¿™é‡Œè¢«é˜»å¡2ç§’ï¼</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Data: "</span> + data;
    }
}
</code></pre>
<p><strong>é—®é¢˜å‡ºåœ¨å“ªé‡Œï¼Ÿ</strong> å½“è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨æ—¶ï¼ŒServlet å®¹å™¨ï¼ˆå¦‚ Tomcatï¼‰ä¼šä»å®ƒçš„çº¿ç¨‹æ± ä¸­åˆ†é…ä¸€ä¸ªå·¥ä½œçº¿ç¨‹æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚ã€‚</p>
<p>åœ¨è¿™ä¸ªçº¿ç¨‹æ‰§è¡Œ <code>someSlowRemoteService.call()</code> çš„æ•´æ•´ 2 ç§’é’Ÿé‡Œï¼Œ<strong>è¿™ä¸ªçº¿ç¨‹ä»€ä¹ˆä¹Ÿåšä¸äº†ï¼Œåªèƒ½ç©ºè½¬ã€ç­‰å¾…</strong>ã€‚</p>
<p>å®ƒæ— æ³•å»å¤„ç†å…¶ä»–å·²ç»åˆ°è¾¾çš„è¯·æ±‚ã€‚å¦‚æœåŒä¸€æ—¶é—´æœ‰ 1000 ä¸ªè¿™æ ·çš„å¹¶å‘è¯·æ±‚ï¼ŒTomcat å°±éœ€è¦å‡†å¤‡è‡³å°‘ 1000 ä¸ªçº¿ç¨‹æ¥åº”å¯¹ã€‚</p>
<p>æ¯ä¸ªçº¿ç¨‹éƒ½æ¶ˆè€—å†…å­˜ï¼ˆçº¦ 1MB æ ˆå†…å­˜ï¼‰å’Œ CPU è°ƒåº¦èµ„æºã€‚å½“çº¿ç¨‹æ•°è¶…è¿‡ç‰©ç†æ ¸å¿ƒæ‰¿è½½èƒ½åŠ›ï¼Œå¤§é‡çš„æ—¶é—´å°†æµªè´¹åœ¨çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ä¸Šï¼Œå¯¼è‡´å“åº”å˜æ…¢ï¼Œæœ€ç»ˆå¯èƒ½å› èµ„æºè€—å°½è€Œå´©æºƒã€‚</p>
<p>è¿™å°±æ˜¯ <strong>â€œä¸€ä¸ªè¯·æ±‚ï¼Œä¸€ä¸ªçº¿ç¨‹â€çš„é˜»å¡æ¨¡å‹åœ¨ I/O å¯†é›†å‹åœºæ™¯ä¸‹çš„å¤©ç„¶ç“¶é¢ˆ</strong>ã€‚æˆ‘ä»¬æŠ•å…¥äº†å¤§é‡èµ„æºï¼ˆçº¿ç¨‹ï¼‰ï¼Œä»…ä»…æ˜¯ä¸ºäº†â€œç­‰å¾…â€ï¼Œè€Œä¸æ˜¯â€œè®¡ç®—â€ã€‚</p>
<p>æœ‰äº›å°ä¼™ä¼´åœ¨å·¥ä½œä¸­ï¼Œå¯èƒ½å·²ç»é€šè¿‡å¢å¤§çº¿ç¨‹æ± ã€æœåŠ¡æ‹†åˆ†ç­‰æ–¹å¼ç¼“è§£äº†è¿™ä¸ªé—®é¢˜ï¼Œä½†è¿™æœ¬è´¨ä¸Šæ˜¯â€œç”¨èµ„æºæ¢ååé‡â€ï¼Œå¹¶éæœ€ä¼˜è§£ã€‚</p>
<h2 data-id="heading-2">02 WebFluxçš„æ ¸å¿ƒï¼šå¼‚æ­¥éé˜»å¡ä¸å“åº”å¼æµ</h2>
<p>WebFlux çš„å“²å­¦æˆªç„¶ä¸åŒã€‚å®ƒæºäº<strong>å“åº”å¼ç¼–ç¨‹èŒƒå¼</strong>ï¼Œæ ¸å¿ƒç›®æ ‡æ˜¯ï¼š<strong>ç”¨å°‘é‡ã€å›ºå®šçš„çº¿ç¨‹ï¼Œå¤„ç†å¤§é‡å¹¶å‘è¯·æ±‚</strong>ã€‚</p>
<p>å¦‚ä½•åšåˆ°ï¼Ÿç­”æ¡ˆæ˜¯ <strong>äº‹ä»¶é©±åŠ¨</strong> å’Œ <strong>å¼‚æ­¥éé˜»å¡ I/O</strong>ã€‚å®ƒä¸å†è®©çº¿ç¨‹å‚»ç­‰ï¼Œè€Œæ˜¯å‘Šè¯‰ç³»ç»Ÿï¼šâ€œæˆ‘å»åšç‚¹åˆ«çš„ï¼Œç­‰æ•°æ®å‡†å¤‡å¥½äº†ï¼Œä½ å†å›è°ƒé€šçŸ¥æˆ‘â€ã€‚</p>
<h3 data-id="heading-3">Reactor ä¸ Mono/Flux</h3>
<p>è¿™æ˜¯ç†è§£ WebFlux çš„ç¬¬ä¸€é“åã€‚WebFlux æ„å»ºåœ¨ Project Reactor å“åº”å¼åº“ä¹‹ä¸Šï¼Œå¼•å…¥äº†ä¸¤ä¸ªæ ¸å¿ƒç±»å‹ï¼š</p>
<ul>
<li><strong>Mono</strong>ï¼š ä»£è¡¨ <strong>0 æˆ– 1 ä¸ª</strong> ç»“æœçš„å¼‚æ­¥åºåˆ—ã€‚å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªâ€œæœªæ¥å¯èƒ½åˆ°æ¥çš„å•ä¸ªæ•°æ®åŒ…â€çš„æ‰¿è¯ºã€‚</li>
<li><strong>Flux</strong>ï¼š ä»£è¡¨ <strong>0 åˆ° N ä¸ª</strong> ç»“æœçš„å¼‚æ­¥åºåˆ—ã€‚å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªâ€œæ•°æ®æµâ€ï¼Œæ•°æ®é¡¹ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°å¼‚æ­¥å‘å¸ƒå‡ºæ¥ã€‚</li>
</ul>
<p>çœ‹ä¸€ä¸ªä»£ç å¯¹æ¯”ï¼Œç«‹åˆ»å°±èƒ½æ˜ç™½ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Spring MVC: ç›´æ¥è¿”å›å¯¹è±¡</span>
<span class="hljs-meta">@GetMapping("/user/{id}")</span>
<span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUser</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> String id)</span> {
    <span class="hljs-keyword">return</span> userService.findById(id); <span class="hljs-comment">// é˜»å¡å¼ï¼Œçº¿ç¨‹ç­‰å¾…æ•°æ®åº“è¿”å›</span>
}

<span class="hljs-comment">// WebFlux: è¿”å›Monoï¼Œä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ‰¿è¯º</span>
<span class="hljs-meta">@GetMapping("/user/{id}")</span>
<span class="hljs-keyword">public</span> Mono&lt;User&gt; <span class="hljs-title function_">getUser</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> String id)</span> {
    <span class="hljs-keyword">return</span> userService.findByIdReactive(id); <span class="hljs-comment">// éé˜»å¡ï¼Œç«‹å³è¿”å›Monoï¼Œæ•°æ®ç¨åå¡«å……</span>
}
</code></pre>
<p>åœ¨ WebFlux ç‰ˆæœ¬ä¸­ï¼Œ<code>getUser</code> æ–¹æ³•<strong>å‡ ä¹ç¬é—´è¿”å›</strong>ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ª <code>Mono&lt;User&gt;</code> çš„ç©ºå£³ã€‚å½“åº•å±‚éé˜»å¡æ•°æ®åº“é©±åŠ¨çœŸæ­£è·å–åˆ°æ•°æ®åï¼Œä¼šè‡ªåŠ¨å°†æ•°æ®â€œå¡«å……â€åˆ°è¿™ä¸ª <code>Mono</code> é‡Œï¼Œå¹¶æœ€ç»ˆå‘é€ç»™å®¢æˆ·ç«¯ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œçº¿ç¨‹æ²¡æœ‰è¢«æŒ‚èµ·ï¼Œå®ƒå¯ä»¥ç«‹åˆ»å»å¤„ç†å…¶ä»–è¯·æ±‚ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢è¿™å¼ å›¾ï¼Œç›´è§‚æ„Ÿå—ä¸¤ç§æ¨¡å‹å¤„ç†å¤šä¸ªæ…¢è¯·æ±‚æ—¶çš„å·¨å¤§å·®å¼‚ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47208efe6f154e3e9c0f4f454f51dc87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765856499&amp;x-signature=sy9F4uC%2FtkQMfAFsd4sOfs8AZ4g%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-4">èƒŒå‹ï¼ˆBackpressureï¼‰ï¼šå“åº”å¼æµçš„ç²¾é«“</h3>
<p>è¿™æˆ–è®¸æ˜¯ WebFlux æœ€ç²¾å¦™ä¹Ÿæœ€å®¹æ˜“è¢«å¿½è§†çš„ç‰¹æ€§ã€‚åœ¨ä¼ ç»Ÿçš„æ‹‰å–æ¨¡å‹ä¸­ï¼Œæ¶ˆè´¹è€…æ§åˆ¶èŠ‚å¥ã€‚è€Œåœ¨å“åº”å¼æµä¸­ï¼Œæ•°æ®ç”±ç”Ÿäº§è€…ä¸»åŠ¨æ¨é€ï¼Œå¦‚æœç”Ÿäº§è€…å¤ªå¿«ï¼Œæ¶ˆè´¹è€…æ¥ä¸åŠå¤„ç†æ€ä¹ˆåŠï¼Ÿ</p>
<p><strong>èƒŒå‹æœºåˆ¶</strong>å…è®¸æ¶ˆè´¹è€…ï¼ˆå¦‚ä¸‹æ¸¸æœåŠ¡ï¼‰ä¸»åŠ¨å‘ŠçŸ¥ç”Ÿäº§è€…ï¼ˆå¦‚ä¸Šæ¸¸æ•°æ®æºï¼‰â€œæˆ‘æœ€å¤šè¿˜èƒ½å¤„ç†å¤šå°‘â€ï¼Œç”Ÿäº§è€…æ®æ­¤è°ƒæ•´æ¨é€é€Ÿç‡ï¼Œé¿å…æ¶ˆè´¹è€…è¢«å‹å®ã€‚è¿™ä¸ºæ„å»ºå¥å£®çš„æµå¤„ç†ç³»ç»Ÿæä¾›äº†åŸºç¡€ä¿éšœï¼Œæ˜¯ Reactive Streams è§„èŒƒçš„æ ¸å¿ƒã€‚</p>
<h2 data-id="heading-5">03 ä¸¤ç§ç¼–ç¨‹æ¨¡å‹ï¼šæ³¨è§£ä¸å‡½æ•°å¼</h2>
<p>æœ‰äº›å°ä¼™ä¼´ä¸€å¬è¦å­¦æ–°æ¡†æ¶å°±å¤´å¤§ï¼Œç”Ÿæ€•è¿‡å» Spring MVC çš„ç»éªŒç™½è´¹ã€‚åˆ«æ‹…å¿ƒï¼ŒWebFlux è´´å¿ƒåœ°æä¾›äº†ä¸¤ç§ç¼–ç¨‹æ¨¡å‹ï¼Œå¹³æ»‘è¿‡æ¸¡ã€‚</p>
<h3 data-id="heading-6">1. æ³¨è§£æ¨¡å‹ï¼šæœ€ç†Ÿæ‚‰çš„é™Œç”Ÿäºº</h3>
<p>è¿™ç§æ–¹å¼å’Œ Spring MVC <strong>å‡ ä¹ä¸€æ¨¡ä¸€æ ·</strong>ï¼Œå­¦ä¹ æˆæœ¬æä½ã€‚ä¸»è¦åŒºåˆ«ä»…åœ¨äºè¿”å›å€¼å’Œéƒ¨åˆ†å‚æ•°ç±»å‹ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/orders")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReactiveOrderController</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ReactiveOrderService orderService;

    <span class="hljs-comment">// è¿”å›Fluxï¼Œä»£è¡¨å¤šä¸ªè®¢å•çš„æµ</span>
    <span class="hljs-meta">@GetMapping</span>
    <span class="hljs-keyword">public</span> Flux&lt;Order&gt; <span class="hljs-title function_">getAllOrders</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> orderService.findAll();
    }

    <span class="hljs-comment">// è¿”å›Mono</span>
    <span class="hljs-meta">@GetMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> Mono&lt;Order&gt; <span class="hljs-title function_">getOrderById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> String id)</span> {
        <span class="hljs-keyword">return</span> orderService.findById(id);
    }

    <span class="hljs-comment">// å‚æ•°ä¹Ÿå¯ä»¥æ˜¯Mono</span>
    <span class="hljs-meta">@PostMapping</span>
    <span class="hljs-keyword">public</span> Mono&lt;Void&gt; <span class="hljs-title function_">createOrder</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Mono&lt;Order&gt; orderMono)</span> {
        <span class="hljs-keyword">return</span> orderMono.flatMap(orderService::save).then();
    }
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œé™¤äº† <code>Flux</code> å’Œ <code>Mono</code> è¿™äº›ç±»å‹ï¼Œå…¶ä»–æ³¨è§£ <code>@RestController</code>ã€<code>@GetMapping</code> éƒ½æ˜¯è€ç†Ÿäººã€‚è¿™å¯¹äºç°æœ‰é¡¹ç›®è¿›è¡Œéƒ¨åˆ†é‡æ„æˆ–æ–°é¡¹ç›®å¯åŠ¨éå¸¸å‹å¥½ã€‚</p>
<h3 data-id="heading-7">2. å‡½æ•°å¼æ¨¡å‹ï¼šæ›´çµæ´»è½»é‡çš„é€‰æ‹©</h3>
<p>è¿™æ˜¯ WebFlux çš„å¦ä¸€é¢ï¼Œæ›´åƒæ˜¯åœ¨ç”¨ <strong>Java 8 çš„ Lambda è¡¨è¾¾å¼å’Œå‡½æ•°å¼æ¥å£æ¥å®šä¹‰è·¯ç”±å’Œå¤„ç†é€»è¾‘</strong>ï¼Œå®ƒä¸ä¾èµ–äºæ³¨è§£ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RouterFunctionConfig</span> {

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RouterFunction&lt;ServerResponse&gt; <span class="hljs-title function_">routeOrder</span><span class="hljs-params">(ReactiveOrderHandler orderHandler)</span> {
        <span class="hljs-keyword">return</span> RouterFunctions.route()
                .GET(<span class="hljs-string">"/fn/orders"</span>, orderHandler::getAll)
                .GET(<span class="hljs-string">"/fn/orders/{id}"</span>, orderHandler::getById)
                .POST(<span class="hljs-string">"/fn/orders"</span>, orderHandler::create)
                .build();
    }
}

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReactiveOrderHandler</span> {
    <span class="hljs-keyword">public</span> Mono&lt;ServerResponse&gt; <span class="hljs-title function_">getAll</span><span class="hljs-params">(ServerRequest request)</span> {
        Flux&lt;Order&gt; orders = ... <span class="hljs-comment">// è·å–è®¢å•æµ</span>
        <span class="hljs-keyword">return</span> ServerResponse.ok()
                .contentType(MediaType.APPLICATION_JSON)
                .body(orders, Order.class);
    }
    <span class="hljs-comment">// ... å…¶ä»–å¤„ç†æ–¹æ³•</span>
}
</code></pre>
<p>å‡½æ•°å¼æ¨¡å‹å°†æ‰€æœ‰è·¯ç”±å’Œå¤„ç†å™¨æš´éœ²ä¸ºæ˜ç¡®çš„ Beanï¼Œ<strong>å£°æ˜æ¸…æ™°ï¼Œæ˜“äºæµ‹è¯•ï¼Œä¸”è¿è¡Œæ—¶å¼€é”€æ›´å°</strong>ï¼Œç‰¹åˆ«é€‚åˆå¾®æœåŠ¡åœºæ™¯ä¸­åŠŸèƒ½æ˜ç¡®ã€ç»“æ„ç®€æ´çš„ç«¯ç‚¹ã€‚</p>
<p>æœ€è¿‘ä¸ºäº†å¸®åŠ©å¤§å®¶æ‰¾å·¥ä½œï¼Œä¸“é—¨å»ºäº†ä¸€äº›å·¥ä½œå†…æ¨ç¾¤ï¼Œå„å¤§åŸå¸‚éƒ½æœ‰ï¼Œæ¬¢è¿å„ä½HRå’Œæ‰¾å·¥ä½œçš„å°ä¼™ä¼´è¿›ç¾¤äº¤æµï¼Œç¾¤é‡Œç›®å‰å·²ç»æ”¶é›†äº†20å¤šå®¶å¤§å‚çš„å·¥ä½œå†…æ¨å²—ä½ã€‚åŠ è‹ä¸‰çš„å¾®ä¿¡ï¼šli_su223ï¼Œå¤‡æ³¨ï¼šæ˜é‡‘+æ‰€åœ¨åŸå¸‚ï¼Œå³å¯è¿›ç¾¤ã€‚</p>
<h2 data-id="heading-8">04 æ·±å…¥æ ¸å¿ƒï¼šWebFluxå¦‚ä½•è¿è½¬</h2>
<p>ç†è§£äº†è¡¨é¢ç”¨æ³•ï¼Œæˆ‘ä»¬ä»¥æ³¨è§£æ¨¡å‹ä¸ºä¾‹ï¼Œæ·±å…¥ä¸€å±‚ï¼Œçœ‹çœ‹ä¸€ä¸ªè¯·æ±‚åœ¨ WebFlux å†…éƒ¨æ˜¯å¦‚ä½•æµè½¬çš„ã€‚</p>
<p>WebFlux çš„æ ¸å¿ƒè°ƒåº¦å™¨ä¸å†æ˜¯ Servlet å®¹å™¨çš„çº¿ç¨‹æ± ï¼Œè€Œæ˜¯ä¸€ä¸ªåä¸º <code>DispatcherHandler</code> çš„ç»„ä»¶ï¼Œå®ƒæ‰®æ¼”ç€ç±»ä¼¼ Spring MVC ä¸­ <code>DispatcherServlet</code> çš„è§’è‰²ã€‚</p>
<ol>
<li><strong>è¯·æ±‚æ¥æ”¶</strong>ï¼š ä»¥ Netty ä¸ºä¾‹ï¼ŒI/O çº¿ç¨‹æ¥æ”¶åˆ° HTTP è¯·æ±‚ï¼Œå°†å…¶å°è£…ä¸º <code>ServerWebExchange</code>ï¼ˆä¸€ä¸ªéé˜»å¡çš„è¯·æ±‚-å“åº”äº¤æ¢å¯¹è±¡ï¼‰ã€‚</li>
<li><strong>å¯»æ‰¾å¤„ç†å™¨</strong>ï¼š <code>DispatcherHandler</code> è°ƒç”¨ä¸€ç»„ <code>HandlerMapping</code>ï¼Œæ ¹æ®è¯·æ±‚è·¯å¾„ç­‰ä¿¡æ¯ï¼Œæ‰¾åˆ°å¯¹åº”çš„æ§åˆ¶å™¨æ–¹æ³•ï¼ˆå°±æ˜¯ä¸€ä¸ª <code>Handler</code>ï¼‰ã€‚</li>
<li><strong>æ‰§è¡Œå¤„ç†</strong>ï¼š <code>DispatcherHandler</code> å†é€šè¿‡ <code>HandlerAdapter</code> å»å®é™…æ‰§è¡Œè¿™ä¸ªæ§åˆ¶å™¨æ–¹æ³•ã€‚æˆ‘ä»¬çš„æ–¹æ³•è¿”å›ä¸€ä¸ª <code>Mono</code> æˆ– <code>Flux</code>ã€‚</li>
<li><strong>å¤„ç†ç»“æœ</strong>ï¼š <code>HandlerResultHandler</code> è´Ÿè´£å¤„ç†è¿™ä¸ªååº”å¼è¿”å›ç±»å‹ï¼Œå°†æµä¸­çš„æ•°æ®åºåˆ—åŒ–ï¼ˆå¦‚è½¬ä¸º JSONï¼‰ï¼Œå¹¶é€šè¿‡éé˜»å¡ I/O å†™å›å“åº”ã€‚</li>
</ol>
<p>æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œ<strong>æ‰€æœ‰ç¯èŠ‚éƒ½æ˜¯éé˜»å¡çš„</strong>ã€‚çº¿ç¨‹åªåœ¨æœ‰ CPU è®¡ç®—ä»»åŠ¡æ—¶æ‰å¿™ç¢Œï¼Œä¸€æ—¦é‡åˆ° I/O ç­‰å¾…ï¼Œå°±ä¼šå»å¤„ç†å…¶ä»–ä»»åŠ¡ï¼Œä»è€Œå®ç°æé«˜çš„èµ„æºåˆ©ç”¨ç‡ã€‚</p>
<p>ä¸‹é¢æ˜¯ WebFlux æ ¸å¿ƒç»„ä»¶ååŒå¤„ç†è¯·æ±‚çš„æ¶æ„å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/999baa7b71514b11b705d8981fd15709~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765856499&amp;x-signature=dwDZ8W7t5nyQ6VhZVjQESCP2TgU%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">05 æ€§èƒ½ä¸é€‰æ‹©ï¼šå¹¶éé“¶å¼¹</h2>
<p>è¯»åˆ°è¿™é‡Œï¼Œæœ‰äº›å°ä¼™ä¼´å¯èƒ½æ‘©æ‹³æ“¦æŒï¼Œå‡†å¤‡æŠŠç°æœ‰é¡¹ç›®å…¨ç›˜è¿ç§»åˆ° WebFluxã€‚<strong>ä¸”æ…¢ï¼æŠ€æœ¯é€‰å‹æœ€å¿Œâ€œä¸ºäº†ç”¨è€Œç”¨â€</strong>ã€‚</p>
<p>WebFlux å’Œ Spring MVC ä¸æ˜¯æ›¿ä»£å…³ç³»ï¼Œè€Œæ˜¯äº’è¡¥å…³ç³»ï¼Œå®ƒä»¬å…±åŒæ‰©å±•äº† Spring ç”Ÿæ€çš„èƒ½åŠ›è¾¹ç•Œã€‚</p>
<h3 data-id="heading-10">æ€§èƒ½çœŸç›¸</h3>
<ul>
<li><strong>WebFlux çš„ä¼˜åŠ¿åœ¨äºé«˜å¹¶å‘ã€ä½å»¶è¿Ÿçš„ I/O å¯†é›†å‹åœºæ™¯</strong>ã€‚å½“ä½ çš„åº”ç”¨æœ‰å¤§é‡å¤–éƒ¨è°ƒç”¨ï¼ˆæ•°æ®åº“ã€å¾®æœåŠ¡ã€APIï¼‰ã€æ…¢è¿æ¥æˆ–é•¿è½®è¯¢ï¼ˆå¦‚èŠå¤©ï¼‰æ—¶ï¼ŒWebFlux èƒ½ç”¨æ›´å°‘çš„èµ„æºæä¾›æ›´ç¨³å®šçš„ååé‡ã€‚</li>
<li><strong>WebFlux ä¸ä¼šè®©ä½ çš„ CPU å¯†é›†å‹è®¡ç®—æ›´å¿«</strong>ã€‚å¦‚æœä¸šåŠ¡é€»è¾‘æœ¬èº«å°±æ˜¯å¤æ‚çš„è®¡ç®—ï¼Œæ²¡æœ‰å¤ªå¤š I/O ç­‰å¾…ï¼Œé‚£ä¹ˆåˆ‡æ¢åˆ° WebFlux å¯èƒ½çœ‹ä¸åˆ°æ”¶ç›Šï¼Œç”šè‡³å› ä¸ºå“åº”å¼é“¾çš„å¼€é”€è€Œç•¥æœ‰ä¸‹é™ã€‚</li>
<li><strong>èµ„æºåˆ©ç”¨ç‡æ˜¯æ ¸å¿ƒä¼˜åŠ¿</strong>ã€‚WebFlux é€šè¿‡å‡å°‘çº¿ç¨‹æ•°é‡ï¼Œé™ä½äº†å†…å­˜æ¶ˆè€—å’Œä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ï¼Œä½¿ç³»ç»Ÿåœ¨å‹åŠ›ä¸‹çš„è¡¨ç°æ›´åŠ å¯é¢„æµ‹å’Œç¨³å®šã€‚</li>
</ul>
<h3 data-id="heading-11">ä»£ä»·ä¸æŒ‘æˆ˜</h3>
<ul>
<li><strong>ç¼–ç¨‹èŒƒå¼è½¬æ¢</strong>ï¼š ä»â€œæŒ‡ä»¤å¼â€æ€ç»´åˆ‡æ¢åˆ°â€œå£°æ˜å¼â€ã€â€œå‡½æ•°å¼â€çš„ååº”å¼æ€ç»´æ˜¯ä¸€å¤§æŒ‘æˆ˜ã€‚è°ƒè¯•é“¾å¼è°ƒç”¨çš„ <code>Mono/Flux</code> ä¹Ÿæ¯”è°ƒè¯•æ™®é€šä»£ç æ›´å›°éš¾ã€‚</li>
<li><strong>ç”Ÿæ€å…¼å®¹æ€§</strong>ï¼š ä½ çš„æ•´ä¸ªæŠ€æœ¯æ ˆéƒ½éœ€è¦æ”¯æŒéé˜»å¡ã€‚<strong>è¿™æ„å‘³ç€ä½ å¸¸ç”¨çš„é˜»å¡å¼æ•°æ®åº“é©±åŠ¨ï¼ˆå¦‚ JDBCï¼‰ã€Redis å®¢æˆ·ç«¯ç­‰å¯èƒ½æ— æ³•ç›´æ¥ä½¿ç”¨</strong>ï¼Œå¿…é¡»å¯»æ‰¾å…¶ååº”å¼ç‰ˆæœ¬ï¼ˆå¦‚ R2DBCã€Lettuceï¼‰ã€‚è¿™æ˜¯ä¸€æ¡â€œå…¨æ ˆååº”å¼â€çš„ä¸å½’è·¯ã€‚</li>
<li><strong>å­¦ä¹ æ›²çº¿</strong>ï¼š å›¢é˜Ÿéœ€è¦æ—¶é—´å­¦ä¹  Reactor ä¸°å¯Œçš„æ“ä½œç¬¦ï¼ˆ<code>map</code>, <code>flatMap</code>, <code>zip</code> ç­‰ï¼‰å’Œé”™è¯¯å¤„ç†æœºåˆ¶ã€‚</li>
</ul>
<h3 data-id="heading-12">å¦‚ä½•é€‰æ‹©ï¼Ÿ</h3>
<p>ä½ å¯ä»¥éµå¾ªä»¥ä¸‹çš„å†³ç­–æµç¨‹ï¼Œæ¥åˆ¤æ–­ä½ çš„é¡¹ç›®æ˜¯å¦çœŸçš„éœ€è¦ WebFluxï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/015ef95dff174171918d00a929c206a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765856499&amp;x-signature=qn%2BeB3u21kXBa2mzSMZMaLDKsJE%3D" alt="image.png" loading="lazy"/></p>
<p><strong>å¯¹äºæ–°é¡¹ç›®</strong>ï¼š å¦‚æœæ˜¯å¾®æœåŠ¡ç½‘å…³ï¼ˆSpring Cloud Gateway å°±æ˜¯åŸºäº WebFluxï¼‰ã€å®æ—¶ç›‘æ§ã€æ¶ˆæ¯æ¨é€ç­‰åœºæ™¯ï¼ŒWebFlux æ˜¯ç»ä½³é€‰æ‹©ã€‚</p>
<p><strong>å¯¹äºç°æœ‰é¡¹ç›®</strong>ï¼š <strong>ä¸è¦è½»æ˜“é‡æ„ï¼</strong> å¦‚æœ Spring MVC è¿è¡Œè‰¯å¥½ï¼Œé‡æ„çš„æˆæœ¬å’Œé£é™©æé«˜ã€‚</p>
<p>ä¸€ä¸ªæ›´åŠ¡å®çš„åˆ‡å…¥ç‚¹æ˜¯ï¼š<strong>å…ˆåœ¨ Spring MVC é¡¹ç›®ä¸­ä½¿ç”¨ <code>WebClient</code>ï¼ˆWebFlux æä¾›çš„éé˜»å¡ HTTP å®¢æˆ·ç«¯ï¼‰æ¥è°ƒç”¨å¤–éƒ¨æ…¢æœåŠ¡</strong>ï¼Œè¿™èƒ½ç«‹å³ä¸ºä½ çš„åº”ç”¨å¸¦æ¥éƒ¨åˆ†éé˜»å¡çš„ä¼˜åŠ¿ã€‚</p>
<hr/>
<h2 data-id="heading-13">06 æ€»ç»“</h2>
<p>WebFlux æ˜¯ Spring åº”å¯¹ç°ä»£é«˜å¹¶å‘ã€ä½å»¶è¿Ÿåº”ç”¨éœ€æ±‚äº¤å‡ºçš„ä¸€ä»½ä¼˜ç§€ç­”å·ã€‚</p>
<p>å®ƒé€šè¿‡å¼‚æ­¥éé˜»å¡å’Œå“åº”å¼æµçš„æŠ€æœ¯ï¼Œåœ¨ I/O å¯†é›†å‹é¢†åŸŸå±•ç°å‡ºå·¨å¤§ä¼˜åŠ¿ã€‚</p>
<p>ä½†å®ƒä¸æ˜¯ä¸€ä¸ªâ€œå‚»ç“œå¼â€çš„æ€§èƒ½æå‡æŒ‰é’®ï¼Œè€Œæ˜¯ä¸€å¥—å®Œæ•´çš„ã€æœ‰é—¨æ§›çš„æ–°ç¼–ç¨‹èŒƒå¼ã€‚</p>
<p>æˆ‘ä»¬çš„èŒè´£ä¸æ˜¯è¿½é€æœ€é…·çš„æŠ€æœ¯ï¼Œè€Œæ˜¯<strong>ä¸ºä¸šåŠ¡åœºæ™¯é€‰æ‹©æœ€åˆé€‚çš„æŠ€æœ¯</strong>ã€‚</p>
<p>åœ¨ä½ å†³å®šæ‹¥æŠ± WebFlux ä¹‹å‰ï¼Œä¸å¦¨å…ˆé—®è‡ªå·±ä¸‰ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>æˆ‘çš„åº”ç”¨ç“¶é¢ˆçœŸçš„æ˜¯ I/O å—ï¼Ÿ</li>
<li>æˆ‘çš„å›¢é˜Ÿå’ŒæŠ€æœ¯æ ˆå‡†å¤‡å¥½â€œå…¨æ ˆååº”å¼â€äº†å—ï¼Ÿ</li>
<li>é¢„æœŸçš„æ”¶ç›Šèƒ½å¦è¦†ç›–å­¦ä¹ å’Œæ”¹é€ æˆæœ¬ï¼Ÿ</li>
</ol>
<p>æƒ³æ¸…æ¥šè¿™äº›é—®é¢˜ï¼Œä½ çš„é€‰æ‹©è‡ªç„¶ä¼šæ¸…æ™°èµ·æ¥ã€‚</p>
<p>æŠ€æœ¯ä¸–ç•Œæ²¡æœ‰é“¶å¼¹ï¼Œ<strong>ç†è§£åŸç†ï¼Œæƒè¡¡åˆ©å¼Šï¼Œæ–¹æ˜¯é•¿æœŸä¸»ä¹‰è€…çš„ç”Ÿå­˜ä¹‹é“</strong>ã€‚</p>
<h2 data-id="heading-14">æœ€åè¯´ä¸€å¥(æ±‚å…³æ³¨ï¼Œåˆ«ç™½å«–æˆ‘)</h2>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œæˆ–è€…æœ‰æ‰€å¯å‘çš„è¯ï¼Œå¸®å¿™å…³æ³¨ä¸€ä¸‹æˆ‘çš„åŒåå…¬ä¼—å·ï¼šè‹ä¸‰è¯´æŠ€æœ¯ï¼Œæ‚¨çš„æ”¯æŒæ˜¯æˆ‘åšæŒå†™ä½œæœ€å¤§çš„åŠ¨åŠ›ã€‚</p>
<p>æ±‚ä¸€é”®ä¸‰è¿ï¼šç‚¹èµã€è½¬å‘ã€åœ¨çœ‹ã€‚</p>
<p>å…³æ³¨å…¬ä¼—å·ï¼šã€è‹ä¸‰è¯´æŠ€æœ¯ã€‘ï¼Œåœ¨å…¬ä¼—å·ä¸­å›å¤ï¼šè¿›å¤§å‚ï¼Œå¯ä»¥å…è´¹è·å–æˆ‘æœ€è¿‘æ•´ç†çš„10ä¸‡å­—çš„é¢è¯•å®å…¸ï¼Œå¥½å¤šå°ä¼™ä¼´é è¿™ä¸ªå®å…¸æ‹¿åˆ°äº†å¤šå®¶å¤§å‚çš„offerã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>